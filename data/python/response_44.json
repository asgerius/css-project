[{"tags": ["python", "post", "cgi"], "answers": [{"tags": [], "owner": {"reputation": 5436, "user_id": 2744166, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b079827a014bd14f42b163afd4bb1e91?s=128&d=identicon&r=PG", "display_name": "Joe Young", "link": "https://stackoverflow.com/users/2744166/joe-young"}, "is_accepted": false, "score": 0, "last_activity_date": 1447287664, "creation_date": 1447287664, "answer_id": 33662345, "question_id": 33662073, "link": "https://stackoverflow.com/questions/33662073/python-cgi-field-storage-error/33662345#33662345", "title": "Python - cgi field storage error", "body": "<p>Try changing the <code>enctype</code> of your form to either <code>multipart/form-data</code> or <code>application/x-www-form-urlencoded</code>.</p>\n\n<p>More information here: <a href=\"http://www.futurequest.net/forums/showthread.php?t=14245\" rel=\"nofollow\">http://www.futurequest.net/forums/showthread.php?t=14245</a></p>\n\n<p><a href=\"http://www.w3schools.com/tags/att_form_enctype.asp\" rel=\"nofollow\">http://www.w3schools.com/tags/att_form_enctype.asp</a></p>\n"}], "owner": {"reputation": 2914, "user_id": 3630528, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b30def66e0863b24eb11d91b34b52740?s=128&d=identicon&r=PG&f=1", "display_name": "spen123", "link": "https://stackoverflow.com/users/3630528/spen123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1503, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1447287664, "creation_date": 1447286077, "question_id": 33662073, "link": "https://stackoverflow.com/questions/33662073/python-cgi-field-storage-error", "title": "Python - cgi field storage error", "body": "<p>I have this in my python script </p>\n\n<pre><code>form = cgi.FieldStorage()\nprint form\nprint form.getvalue(\"param\")\n</code></pre>\n\n<p>the 2nd line prints <code>FieldStorage(None, None, 'param=abcd')</code> and the 3rd line causes an error </p>\n\n<pre><code>    File \"/var/www/cgi-bin/use_save.py\", line 24, in &amp;lt;module&amp;gt;\n    print form.getvalue(\"param\")\n  File \"/usr/lib64/python2.7/cgi.py\", line 548, in getvalue\n    if key in self:\n  File \"/usr/lib64/python2.7/cgi.py\", line 594, in __contains__\n    raise TypeError, \"not indexable\"\n    TypeError: not indexable\n</code></pre>\n\n<p>What is causing this error the value being passed just a string?</p>\n"}, {"tags": ["python", "python-2.7"], "comments": [{"owner": {"reputation": 42285, "user_id": 2057919, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ec600dcd84770c5d835cd4c943514088?s=128&d=identicon&r=PG&f=1", "display_name": "elixenide", "link": "https://stackoverflow.com/users/2057919/elixenide"}, "edited": false, "score": 2, "creation_date": 1447285982, "post_id": 33662041, "comment_id": 55097684, "body": "Please make an effort first. Show what you&#39;re thinking and have tried. Then ask for help. Please read about <a href=\"http://stackoverflow.com/questions/how-to-ask\"><b>How to Ask questions here</b></a>."}, {"owner": {"reputation": 10628, "user_id": 4565947, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e5b166ea39cc61a22e0c04a67ef53bd7?s=128&d=identicon&r=PG&f=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/4565947/julien"}, "edited": false, "score": 4, "creation_date": 1447286188, "post_id": 33662041, "comment_id": 55097741, "body": "Attending to your programming lectures would be a good start."}], "answers": [{"tags": [], "owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "is_accepted": true, "score": 0, "last_activity_date": 1447286763, "creation_date": 1447286763, "answer_id": 33662190, "question_id": 33662041, "link": "https://stackoverflow.com/questions/33662041/i-have-to-write-mini-project-and-dont-know-how-to-start/33662190#33662190", "title": "I have to write mini project and don&#39;t know how to start", "body": "<ul>\n<li><p>Allow the student to enter the school ID number when they enter the cafeteria.  </p>\n\n<p><em>see <code>raw_input</code> or <code>input</code></em></p></li>\n<li><p>Keep track of the students who are currently in the cafeteria. </p>\n\n<p><em>see dictionary (or even list or some other <a href=\"https://docs.python.org/2/tutorial/datastructures.html\" rel=\"nofollow\">Data Structure</a>)</em></p></li>\n<li><p>Display student names and when they logged in</p>\n\n<p><em>see <code>print</code> and <code>time</code> respectively</em></p></li>\n<li><p>Display the total number of students who are currently in the cafeteria.</p>\n\n<p><em>see <code>len</code></em></p></li>\n<li><p>Keep track of all the students who accessed the cafeteria throughout the day.</p>\n\n<p><em>see dictionary (or even list or some other <a href=\"https://docs.python.org/2/tutorial/datastructures.html\" rel=\"nofollow\">Data Structure</a>)</em></p></li>\n<li><p>Display only to authorized cafeteria personal all the students who came</p>\n\n<p><em>see <code>print</code> and <code>raw_input</code> (or <code>input</code> in python3)</em></p></li>\n<li><p>in, when they came in, and when they left.</p>\n\n<p><em>see <code>print</code> and <code>time</code> modules, and use your earlier DataStructures</em>    </p></li>\n</ul>\n"}], "owner": {"reputation": 9, "user_id": 5491958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7e34e4bc297212ba4bfa9e5389d2382?s=128&d=identicon&r=PG&f=1", "display_name": "Bryan", "link": "https://stackoverflow.com/users/5491958/bryan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "closed_date": 1447299753, "accepted_answer_id": 33662190, "answer_count": 1, "score": -4, "last_activity_date": 1447286763, "creation_date": 1447285859, "question_id": 33662041, "link": "https://stackoverflow.com/questions/33662041/i-have-to-write-mini-project-and-dont-know-how-to-start", "closed_reason": "Needs more focus", "title": "I have to write mini project and don&#39;t know how to start", "body": "<p>Hi everyone I need to write mini project and I have no idea where to start or what are the steps. Can someone help me to how to start or even give me steps to what to do?</p>\n\n<pre><code>A perspective client has approached your company to write a program to help track\nstudents accessing the school cafeteria.  The client will supply a list of current student\nnames and ID numbers. The client would like the program to do the following:\n\n\n -Allow the student to enter the school ID number when they enter the cafeteria.  \n -Keep track of the students who are currently in the cafeteria.\n -Display student names and when they logged in\n -Display the total number of students who are currently in the cafeteria.\n  Allow the student to enter the school ID number when they enter the cafeteria.\n -Keep track of all the students who accessed the cafeteria throughout the day.\n -Display only to authorized cafeteria personal all the students who came\n -in, when they came in, and when they left.\n</code></pre>\n"}, {"tags": ["python", "python-2.7", "lifetime-scoping"], "comments": [{"owner": {"reputation": 5338, "user_id": 4594973, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/USV9e.jpg?s=128&g=1", "display_name": "code_dredd", "link": "https://stackoverflow.com/users/4594973/code-dredd"}, "edited": false, "score": 0, "creation_date": 1447285916, "post_id": 33662010, "comment_id": 55097665, "body": "Did you install as the <code>root</code> user or in your <code>$HOME</code> directory as an unprivileged user?"}, {"owner": {"reputation": 17238, "user_id": 240490, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/536433ff8bf7f50dcab75a920a11d30a?s=128&d=identicon&r=PG", "display_name": "Jonathan Eunice", "link": "https://stackoverflow.com/users/240490/jonathan-eunice"}, "edited": false, "score": 3, "creation_date": 1447285947, "post_id": 33662010, "comment_id": 55097675, "body": "Run <code>python -V</code>. Make <i>sure</i> you&#39;re running on Python 2.7. This is the error message you&#39;d get on Python 2.6 or previous."}, {"owner": {"reputation": 47, "user_id": 5551467, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/79d0273bc2f904958aabc7eb763c6883?s=128&d=identicon&r=PG&f=1", "display_name": "ddewber", "link": "https://stackoverflow.com/users/5551467/ddewber"}, "edited": false, "score": 0, "creation_date": 1447287077, "post_id": 33662010, "comment_id": 55097999, "body": "You are right that I am running python 2.6.  Thank you"}, {"owner": {"reputation": 47, "user_id": 5551467, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/79d0273bc2f904958aabc7eb763c6883?s=128&d=identicon&r=PG&f=1", "display_name": "ddewber", "link": "https://stackoverflow.com/users/5551467/ddewber"}, "edited": false, "score": 0, "creation_date": 1447287178, "post_id": 33662010, "comment_id": 55098020, "body": "It seems I have both 2.7 and 2.6 installed.  I thought I was running 2.7 but apparently not"}], "answers": [{"tags": [], "owner": {"reputation": 47, "user_id": 5551467, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/79d0273bc2f904958aabc7eb763c6883?s=128&d=identicon&r=PG&f=1", "display_name": "ddewber", "link": "https://stackoverflow.com/users/5551467/ddewber"}, "is_accepted": false, "score": 0, "last_activity_date": 1447349190, "creation_date": 1447349190, "answer_id": 33677568, "question_id": 33662010, "link": "https://stackoverflow.com/questions/33662010/python-lifetimes-module-error/33677568#33677568", "title": "Python Lifetimes Module Error", "body": "<p><a href=\"http://linuxconfig.org/how-to-change-from-default-to-alternative-python-version-on-debian-linux\" rel=\"nofollow\">http://linuxconfig.org/how-to-change-from-default-to-alternative-python-version-on-debian-linux</a></p>\n\n<p>This is what worked for me but I did have to re-install the modules that were on 2.6 into 2.7</p>\n"}], "owner": {"reputation": 47, "user_id": 5551467, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/79d0273bc2f904958aabc7eb763c6883?s=128&d=identicon&r=PG&f=1", "display_name": "ddewber", "link": "https://stackoverflow.com/users/5551467/ddewber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 915, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1447349190, "creation_date": 1447285685, "last_edit_date": 1447285818, "question_id": 33662010, "link": "https://stackoverflow.com/questions/33662010/python-lifetimes-module-error", "title": "Python Lifetimes Module Error", "body": "<p>I was trying to load the Lifetimes Module on my Linux AMI server.\nI installed it just fine and everything seemed to work with no error.</p>\n\n<p>However when I went to use it I got the error below. (tried to do a few things that I thought would fix it but nothing has worked)</p>\n\n<pre><code>import lifetimes\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"lifetimes/__init__.py\", line 1, in &lt;module&gt;\n    from .estimation import BetaGeoFitter, ParetoNBDFitter, GammaGammaFitter\n  File \"lifetimes/estimation.py\", line 2, in &lt;module&gt;\n    from collections import OrderedDict\nImportError: cannot import name OrderedDict\n</code></pre>\n"}, {"tags": ["python", "sqlite", "python-2.x"], "comments": [{"owner": {"reputation": 3135, "user_id": 4372759, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/6zzjk.jpg?s=128&g=1", "display_name": "flybonzai", "link": "https://stackoverflow.com/users/4372759/flybonzai"}, "edited": false, "score": 1, "creation_date": 1447286096, "post_id": 33661986, "comment_id": 55097719, "body": "Perhaps something like a Try: Except: where the Except: waits for a couple seconds and then tries again?"}], "answers": [{"tags": [], "owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "is_accepted": true, "score": 1, "last_activity_date": 1447286213, "creation_date": 1447286213, "answer_id": 33662097, "question_id": 33661986, "link": "https://stackoverflow.com/questions/33661986/how-to-make-a-program-wait-for-a-lock-on-a-sqlite-database/33662097#33662097", "title": "How to make a program wait for a lock on a sqlite database", "body": "<pre><code>if __name__ == '__main__':\n    opts = get_options()\n    for i in range(90): #give up after 90 seconds\n        try:\n            sqlite3_backup(opts.databasefile, opts.backupdir)\n        except sqlite3.OperationalError as e:\n            if \"locked\" in str(e):\n                 time.sleep(1)\n            else:\n                 raise\n        else:\n            sys.stdout.write(\"OK Backup sucess!\")\n            sys.exit(0)\n   sys.stderr.write(\"Unable to aquire database lock...\")\n   sys.exit(1)\n</code></pre>\n\n<p>Is one way you might do this ...</p>\n\n<p>I would also recommend using an ORM as I think most ORM's may implement this sort of thing for you behind the scenes (maybe im wrong)</p>\n"}], "owner": {"reputation": 3135, "user_id": 4372759, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/6zzjk.jpg?s=128&g=1", "display_name": "flybonzai", "link": "https://stackoverflow.com/users/4372759/flybonzai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1418, "favorite_count": 0, "accepted_answer_id": 33662097, "answer_count": 1, "score": 0, "last_activity_date": 1447286213, "creation_date": 1447285536, "question_id": 33661986, "link": "https://stackoverflow.com/questions/33661986/how-to-make-a-program-wait-for-a-lock-on-a-sqlite-database", "title": "How to make a program wait for a lock on a sqlite database", "body": "<p>I have a program that runs as part of a larger process with the sole purpose being to safely copy a sqlite database to another folder for back-up.  Only problem is that my production run just went down because the database was locked by other processes.  Is there a way I can specify for this program to wait to obtain a lock?  It is okay if it holds up the rest of the program by a few seconds.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>import sqlite3\nimport shutil\nimport optparse\nimport os\nimport time\nimport logging\n\nlogging.basicConfig(level=logging.INFO, format=\"[%(levelname)s] - %(message)s\")\nlogging.disable(logging.CRITICAL)\n\ndef sqlite3_backup(db_file, backup_dir):\n    print 'DB is: ', db_file + '\\n', 'Backup Dir is: ', backup_dir\n    if not os.path.isdir(backup_dir):\n        raise Exception(\"Backup directory does not exist: {0}\".format(backup_dir))\n\n    with sqlite3.connect(db_file) as conn:\n        logging.info('Connected to the database.')\n        cursor = conn.cursor()\n        cursor.execute('begin immediate')\n        shutil.copy(db_file, backup_dir)\n        logging.info('Closing the database.')\n\nusage = \"%prog [options] db-file backup-dir\"\ndescription = \"\"\"\\\nBackup sqlite3 database to a directory, appending a datestamp on the backup.\"\"\"\n\ndef get_options():\n    parser = optparse.OptionParser(usage=usage, description=description)\n    opts, args = parser.parse_args()\n    if len(args) != 2:\n        raise parser.error(\"Incorrect number of parameters\")\n\n    opts.databasefile, opts.backupdir = args\n    return opts\n\nif __name__ == '__main__':\n    opts = get_options()\n    sqlite3_backup(opts.databasefile, opts.backupdir)\n</code></pre>\n"}, {"tags": ["python", "list", "python-2.7", "dictionary"], "answers": [{"tags": [], "owner": {"reputation": 950, "user_id": 2908879, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/pFvwp.jpg?s=128&g=1", "display_name": "durrrutti", "link": "https://stackoverflow.com/users/2908879/durrrutti"}, "is_accepted": false, "score": 0, "last_activity_date": 1447286809, "creation_date": 1447286809, "answer_id": 33662198, "question_id": 33661954, "link": "https://stackoverflow.com/questions/33661954/dynamic-approach-to-iterate-nested-dict-and-list-of-dict-in-python/33662198#33662198", "title": "Dynamic approach to iterate nested dict and list of dict in Python", "body": "<blockquote>\n  <p>Que 1 :What is a pythonic way to get the total number of dictionaries under \"nested_comment\" list ?</p>\n</blockquote>\n\n<p>User <code>Counter</code> from the standard library.</p>\n\n<pre><code>from collections import Counter\n\nmy_list = [{'hello': 'world'}, {'foo': 'bar'}, 1, 2, 'hello']\ndict_count = Counter([x for x in my_list if type(x) is dict])\n</code></pre>\n\n<hr>\n\n<blockquote>\n  <p>Que 2 :How can i get total count of type where type=\"ABC\". (Note: type is a nested key under \"outer_key2\")</p>\n</blockquote>\n\n<p>It's not clear what you're asking for here. If by \"total count\", you are referring to the total number of comments in all dicts where \"type\" equals \"ABC\":</p>\n\n<pre><code>abcs = [x for x in dict1['outer_key2'] if x['type'] == 'ABC']\ncomment_count = sum([len(x['comments']['nested_comment']) for x in abcs])\n</code></pre>\n\n<p>But I've gotta say, that is some weird data you're dealing with.</p>\n"}, {"tags": [], "owner": {"reputation": 1401, "user_id": 3892023, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/907ba8841224d866d6377d7b6062410b?s=128&d=identicon&r=PG&f=1", "display_name": "Harwee", "link": "https://stackoverflow.com/users/3892023/harwee"}, "is_accepted": false, "score": 0, "last_activity_date": 1447290107, "creation_date": 1447290107, "answer_id": 33662728, "question_id": 33661954, "link": "https://stackoverflow.com/questions/33661954/dynamic-approach-to-iterate-nested-dict-and-list-of-dict-in-python/33662728#33662728", "title": "Dynamic approach to iterate nested dict and list of dict in Python", "body": "<p>You got answers for #1 and #3, check this too</p>\n\n<pre><code>from collections import Counter\ndict1={\n      \"outer_key1\" : {\n      \"total\" : 5              #1.I want the value of \"total\" \n      },\n      \"outer_key2\" : \n      [{\n       \"type\": \"ABC\",          #2. I want to count whole structure where      type=\"ABC\"\n   \"comments\": {\n   \"nested_comment\":[\n    {\n      \"key\":\"value\",\n      \"key\": \"value\"\n    },      \n    {\n     \"key\":\"value\",\n     \"id\": 2\n    } \n   ]                       # 3. Count Dict inside this list.\n}}]}\n\n\nprint \"total:   \",dict1['outer_key1']['total']\nprint \"No of nested comments:   \", len(dict1['outer_key2'][0]['comments']  ['nested_comment']), \n</code></pre>\n\n<p>Assuming that below is the data structure for outer_key2 this is how you get total number of comments of <code>type='ABC'</code></p>\n\n<pre><code>dict2={\n  \"outer_key1\" : {\n  \"total\" : 5              \n  },\n  \"outer_key2\" : \n  [{\n   \"type\": \"ABC\",         \n   \"comments\": {'...'}\n   },\n   {\n   \"type\": \"ABC\",          \n   \"comments\": {'...'}\n   },\n   {\n   \"type\": \"ABC\",         \n   \"comments\": {'...'}\n   }]}\n\ni=0\nk=0\nwhile k &lt; len(dict2['outer_key2']):\n    #print k\n    if dict2['outer_key2'][k]['type'] == 'ABC':\n        i+=int(1)\n    else:\n        pass\n    k+=1\nprint (\"\\r\\nNo of dictionaries with type = 'ABC' : \"), i\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user3439895"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1447454971, "creation_date": 1447285373, "last_edit_date": 1447454971, "question_id": 33661954, "link": "https://stackoverflow.com/questions/33661954/dynamic-approach-to-iterate-nested-dict-and-list-of-dict-in-python", "title": "Dynamic approach to iterate nested dict and list of dict in Python", "body": "<p>I am looking for a dynamic approach to solve my issue. I have a very complex structure, but for simplicity,  </p>\n\n<p>I have a dictionary structure like this: </p>\n\n<pre><code>dict1={\n      \"outer_key1\" : {\n      \"total\" : 5              #1.I want the value of \"total\" \n      },\n      \"outer_key2\" : \n      [{\n       \"type\": \"ABC\",          #2. I want to count whole structure where type=\"ABC\"\n       \"comments\": {\n       \"nested_comment\":[\n        {\n          \"key\":\"value\",\n          \"id\": 1\n        },      \n        {\n         \"key\":\"value\",\n         \"id\": 2\n        } \n       ]                       # 3. Count Dict inside this list.\n    }}]}  \n</code></pre>\n\n<p>I want to this iterate dictionary and solve #1, #2 and #3.   </p>\n\n<p>My attempt to solve #1 and #3:  </p>\n\n<pre><code>def getTotal(dict1):\n    #for solving #1\n    for key,val in dict1.iteritems():\n        val = dict1[key]\n        if isinstance(val, dict):\n            for k1 in val:\n                if k1=='total':\n                    total=val[k1]  \n                    print total                              #gives output 5\n        #for solving #3\n        if isinstance(val,list):\n            print len(val[0]['comment']['nested_comment'])   #gives output 2\n            #How can i get this dynamicallty?  \n</code></pre>\n\n<p>Output:  </p>\n\n<pre><code>total=5  \n2\n</code></pre>\n\n<p>Que 1 :What is a pythonic way to get the total number of dictionaries under \"nested_comment\" list ?<br>\nQue 2 :How can i get total count of type where type=\"ABC\". (Note: type is a nested key under \"outer_key2\")</p>\n"}, {"tags": ["python", "windows", "macos", "dll", "cython"], "comments": [{"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 1, "creation_date": 1447464631, "post_id": 33661946, "comment_id": 55180596, "body": "Windows doesn&#39;t pool global symbols into a common namespace. Modules (DLLs) have to explicitly export and import symbols. Does the embedded Python include the <code>_ctypes</code> extension module? Otherwise maybe you could do something with an RPC to another process."}, {"owner": {"reputation": 5630, "user_id": 34871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cdb7432b08dbbae981f43363264435b?s=128&d=identicon&r=PG", "display_name": "vincent", "link": "https://stackoverflow.com/users/34871/vincent"}, "reply_to_user": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1447466783, "post_id": 33661946, "comment_id": 55180957, "body": "Thanks, so that&#39;s why. I thought about ctypes but it comes with a dll ( more exactly a pyd ) as well, and it has been stripped. So long story short, my most critical feature relies on zeromq and as it seems it&#39;s no more an option if I want portability ( there is a &quot;pure python&quot; alternative but it ends up relying on pywin32 which as binaries ). I opened a question in their beta site but I don&#39;t have much hope. I&#39;m currently reimplementing the network part using asyncore, not as nice but available and viable."}], "answers": [{"comments": [{"owner": {"reputation": 5630, "user_id": 34871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cdb7432b08dbbae981f43363264435b?s=128&d=identicon&r=PG", "display_name": "vincent", "link": "https://stackoverflow.com/users/34871/vincent"}, "edited": false, "score": 0, "creation_date": 1455054709, "post_id": 35277030, "comment_id": 58316127, "body": "Actually the first comment is the right answer. Won&#39;t judge if the statement is true or false, it&#39;s just unrelated."}], "tags": [], "owner": {"reputation": 135876, "user_id": 99834, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/63c50004c4f6eaf3235b9ea836f4b6cf?s=128&d=identicon&r=PG", "display_name": "sorin", "link": "https://stackoverflow.com/users/99834/sorin"}, "is_accepted": false, "score": -1, "last_activity_date": 1454957350, "creation_date": 1454957350, "answer_id": 35277030, "question_id": 33661946, "link": "https://stackoverflow.com/questions/33661946/why-cython-extensions-on-windows-depend-on-pythonxx-dll-but-not-on-macosx/35277030#35277030", "title": "Why Cython extensions on Windows depend on pythonXX.dll but not on MacOSX?", "body": "<p>There are DLL on OS X and as opposed to Windows, most OS X applications are statically linked, bigger but with less external dependencies.</p>\n"}], "owner": {"reputation": 5630, "user_id": 34871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cdb7432b08dbbae981f43363264435b?s=128&d=identicon&r=PG", "display_name": "vincent", "link": "https://stackoverflow.com/users/34871/vincent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 125, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1454957350, "creation_date": 1447285319, "question_id": 33661946, "link": "https://stackoverflow.com/questions/33661946/why-cython-extensions-on-windows-depend-on-pythonxx-dll-but-not-on-macosx", "title": "Why Cython extensions on Windows depend on pythonXX.dll but not on MacOSX?", "body": "<p>I built the same libraries ( example below is from rfoo ) on windows and mac, and the mac version only has system dependencies</p>\n\n<pre><code>$ otool -L marsh.so \nmarsh.so:\n    /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 1213.0.0)\n</code></pre>\n\n<p>while on windows it depends on python's dll</p>\n\n<pre><code>&gt;dumpbin /dependents marsh.pyd\nMicrosoft (R) COFF/PE Dumper Version 12.00.31101.0\nCopyright (C) Microsoft Corporation.  All rights reserved.\n\n\nDump of file marsh.pyd\n\nFile Type: DLL\n\n  Image has the following dependencies:\n\n    python25.dll\n    MSVCR120.dll\n    KERNEL32.dll\n</code></pre>\n\n<p>I wonder if it's an implementation choice that is not really due to windows, or if there is something specific to windows that requires this.</p>\n\n<p>Context: I use this to load python extensions from within an embed interpreter inside Ableton Live, which uses an old python version ; but the worst is that python is not loaded as a library, it's statically linked inside the software. On mac, it's not a problem, I can still load the extension. On windows, I can't, because I have to link to python25.dll, but then at load it tries to initialize again the interpreter, which gives an error, since the dll is not used by Ableton Live. I wonder if there is some hope to have it work on windows.</p>\n"}, {"tags": ["python", "list", "python-3.x", "dictionary", "data-structures"], "comments": [{"owner": {"reputation": 13849, "user_id": 2904896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/428748f4b24cb77ed1745007d95e1ef6?s=128&d=identicon&r=PG", "display_name": "metatoaster", "link": "https://stackoverflow.com/users/2904896/metatoaster"}, "edited": false, "score": 0, "creation_date": 1447285093, "post_id": 33661893, "comment_id": 55097395, "body": "Keys for a dictionary <a href=\"https://wiki.python.org/moin/DictionaryKeys\" rel=\"nofollow noreferrer\">must provide <code>__hash__</code></a>. Mutable datatypes cannot provide a stable hash function.  Please read that link for further explanation."}, {"owner": {"reputation": 6119, "user_id": 165753, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/w6iBN.jpg?s=128&g=1", "display_name": "dimid", "link": "https://stackoverflow.com/users/165753/dimid"}, "edited": false, "score": 0, "creation_date": 1447285194, "post_id": 33661893, "comment_id": 55097431, "body": "add a comma after the first element in <code>new_list_of_dict</code>"}, {"owner": {"reputation": 125, "user_id": 5308932, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/WOGBJ.jpg?s=128&g=1", "display_name": "ayNONE", "link": "https://stackoverflow.com/users/5308932/aynone"}, "edited": false, "score": 0, "creation_date": 1447285324, "post_id": 33661893, "comment_id": 55097468, "body": "I&#39;m not trying to make a list the key. The key should be name whilst the value is Johno. I would however like to make the value a list sometime in the future, but this much I know is possible."}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 0, "creation_date": 1447285614, "post_id": 33661893, "comment_id": 55097573, "body": "<code>i</code> is each of <code>new_list_of_dict</code>s dictionaries. You can&#39;t use a dictionary as a key. I&#39;m not sure what you&#39;re trying to get <code>first_dict</code> to look like when you&#39;re done"}, {"owner": {"reputation": 125, "user_id": 5308932, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/WOGBJ.jpg?s=128&g=1", "display_name": "ayNONE", "link": "https://stackoverflow.com/users/5308932/aynone"}, "reply_to_user": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 0, "creation_date": 1447287027, "post_id": 33661893, "comment_id": 55097986, "body": "@AdamSmith I am trying to make it so that I can grab multiple specific keys and value pairs from one dictionary and put them in the other."}], "answers": [{"comments": [{"owner": {"reputation": 125, "user_id": 5308932, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/WOGBJ.jpg?s=128&g=1", "display_name": "ayNONE", "link": "https://stackoverflow.com/users/5308932/aynone"}, "edited": false, "score": 0, "creation_date": 1447286860, "post_id": 33661925, "comment_id": 55097941, "body": "But, what if I don&#39;t want all of the keys in a dictionary and I only want to target a few. Say for example there is one dictionary with keys 1,2,3,4 and I want to make a new dictionary with only keys 1 and 3"}, {"owner": {"reputation": 6609, "user_id": 934960, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/IvhMv.jpg?s=128&g=1", "display_name": "Raunak Agarwal", "link": "https://stackoverflow.com/users/934960/raunak-agarwal"}, "reply_to_user": {"reputation": 125, "user_id": 5308932, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/WOGBJ.jpg?s=128&g=1", "display_name": "ayNONE", "link": "https://stackoverflow.com/users/5308932/aynone"}, "edited": false, "score": 0, "creation_date": 1447287252, "post_id": 33661925, "comment_id": 55098035, "body": "You will have to embed that logic, for the keys that you want to skip."}], "tags": [], "owner": {"reputation": 6609, "user_id": 934960, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/IvhMv.jpg?s=128&g=1", "display_name": "Raunak Agarwal", "link": "https://stackoverflow.com/users/934960/raunak-agarwal"}, "is_accepted": false, "score": 2, "last_activity_date": 1447285186, "creation_date": 1447285186, "answer_id": 33661925, "question_id": 33661893, "link": "https://stackoverflow.com/questions/33661893/typeerror-unhashable-type-dict-dictionaries-within-lists/33661925#33661925", "title": "TypeError: unhashable type: &#39;dict&#39;. Dictionaries within lists", "body": "<p>In your code, you are making the dict <code>i</code> as the key of dict <code>first_dict</code>. Hence, the <code>unhashable</code> error. Try this instead:</p>\n\n<pre><code>for i in new_list_of_dict:\n    for key, value in i.items():\n        first_dict[key] = value\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6119, "user_id": 165753, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/w6iBN.jpg?s=128&g=1", "display_name": "dimid", "link": "https://stackoverflow.com/users/165753/dimid"}, "is_accepted": false, "score": 1, "last_activity_date": 1447287887, "last_edit_date": 1447287887, "creation_date": 1447286636, "answer_id": 33662172, "question_id": 33661893, "link": "https://stackoverflow.com/questions/33661893/typeerror-unhashable-type-dict-dictionaries-within-lists/33662172#33662172", "title": "TypeError: unhashable type: &#39;dict&#39;. Dictionaries within lists", "body": "<p>Assuming each element in <code>new_list_of_dict</code> has one key-value pair:</p>\n\n<p><code>dict([d.items()[0] for d in new_list_of_dict])</code></p>\n\n<p>Explanation: <code>items()</code> returns a list of the dictionary's key-value pairs, where each element in the list is a tuple <code>(key, value)</code>. Since we assume this list contains only one element, we take the first, and use list comprehension to create a list of such tuples, i.e.:</p>\n\n<pre><code>[('name', 'Johno'),\n('name', 'Johno'),\n      ...\n\n('name', 'Johno')]\n</code></pre>\n\n<p>Finally we convert it to a dictionary.</p>\n\n<p>In order to select specific indices, first select the indices you want:</p>\n\n<p><code>inds = [1,3]</code></p>\n\n<p>then select the new list and convert:</p>\n\n<p><code>dict([d.items()[0] for d in [new_list_of_dict[i] for i in inds]])</code></p>\n"}], "owner": {"reputation": 125, "user_id": 5308932, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/WOGBJ.jpg?s=128&g=1", "display_name": "ayNONE", "link": "https://stackoverflow.com/users/5308932/aynone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 14197, "favorite_count": 1, "closed_date": 1478639211, "answer_count": 2, "score": 2, "last_activity_date": 1447287887, "creation_date": 1447284960, "last_edit_date": 1447285422, "question_id": 33661893, "link": "https://stackoverflow.com/questions/33661893/typeerror-unhashable-type-dict-dictionaries-within-lists", "closed_reason": "Duplicate", "title": "TypeError: unhashable type: &#39;dict&#39;. Dictionaries within lists", "body": "<p>I am making a small program which is making a dictionary out of values from another dictionary. However I've hit a snag with the syntax for this.\nHere is the code:</p>\n\n<pre><code>first_dict = {}\nnew_list_of_dict = [{\"name\": \"Johno\"},\n                    {\"name\": \"Johno\"},\n                    {\"name\": \"Johno\"},\n                    {\"name\": \"Johno\"},\n                    {\"name\": \"Johno\"},\n                    {\"name\": \"Johno\"},\n                    {\"name\": \"Johno\"},\n                    {\"name\": \"Johno\"},\n                    {\"name\": \"Johno\"},\n                    {\"name\": \"Johno\"},\n                    {\"name\": \"Johno\"},\n                    {\"name\": \"Johno\"},\n                    {\"name\": \"Johno\"}]\nfor i in new_list_of_dict:\n    print(i[\"name\"])\n    first_dict[i] = i[\"name\"]\n    print(first_dict)\n</code></pre>\n\n<p>I want to give <code>first_dict</code> the key <code>name</code> and then set the value to <code>Johno</code>. I also need the solution to be expandable to multiple keys with values that are different data types such as lists and integers.</p>\n"}, {"tags": ["python", "plot", "ode"], "answers": [{"tags": [], "owner": {"reputation": 21073, "user_id": 3088138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/114f33fdece969de35d41038fb0eeb46?s=128&d=identicon&r=PG&f=1", "display_name": "Lutz Lehmann", "link": "https://stackoverflow.com/users/3088138/lutz-lehmann"}, "is_accepted": false, "score": 0, "last_activity_date": 1449925994, "last_edit_date": 1449925994, "creation_date": 1449820967, "answer_id": 34218698, "question_id": 33661874, "link": "https://stackoverflow.com/questions/33661874/python-plotting-using-dopri5/34218698#34218698", "title": "Python plotting using dopri5", "body": "<p>By the Gronwall lemma, the error propagation of \"nice\" ODE is controlled by an exponential with the Lipschitz constant <code>L</code> as factor. Which means that any local error contribution incurred at time <code>t</code> gets (potentially) magnified by a factor of <code>exp(L(T-t))</code> at time <code>T</code>.</p>\n\n<p>Being generous one may use <code>L=10</code> for your system. Over a time interval of <code>10</code> this gives an error magnification of <code>exp(100)=2.688e+43</code>, or a total decoupling of the numerical value from the initial value and the exact solution.</p>\n\n<p>Thus it is more astonishing how far, up to <code>t=80</code>, the similarity of both solutions is preserved.</p>\n\n<hr>\n\n<p><em>Notes on the theory, spikes:</em> There is nothing limiting the variables to stay inside the interval [0,1] or to have some conserved quantity that has the same effect. The best you can do is to use a Ljapunov function like <code>V(x)=sum(x*x)</code> which then gives bounds that limit the solution to be between two spheres.</p>\n\n<p>The fixed points are all hyperbolic, the Jacobian there is rank-deficient and traceless which excludes stable fixed points. The spikes are then just a result of the direction of the stable and unstable manifolds/axis of these hyperbolic points. </p>\n"}], "owner": {"reputation": 381, "user_id": 5175815, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/596390c0392ea7e6bfa947f8dd4052a7?s=128&d=identicon&r=PG", "display_name": "Brenton", "link": "https://stackoverflow.com/users/5175815/brenton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 104, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1449925994, "creation_date": 1447284892, "last_edit_date": 1495540758, "question_id": 33661874, "link": "https://stackoverflow.com/questions/33661874/python-plotting-using-dopri5", "title": "Python plotting using dopri5", "body": "<p>My goal is to plot the following set of coupled ODEs:</p>\n\n<p><a href=\"https://i.stack.imgur.com/GEBoZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GEBoZ.png\" alt=\"enter image description here\"></a></p>\n\n<p>The odeint method was giving me problems (such as some of the x_i's taking on negative values which analytically does not happen), so I decided to use a fourth-order Runge-Kutta solver. I was following the examples here to use the dopri5 method (<a href=\"https://stackoverflow.com/questions/12926393/using-adaptive-step-sizes-with-scipy-integrate-ode\">Using adaptive step sizes with scipy.integrate.ode</a>):</p>\n\n<pre><code>import scipy as sp\nimport pylab as plt\nimport numpy as np\nimport scipy.integrate as spi\n\n#Constants\nc13 = 6.2\nc14 = 1.0\nc21 = 7.3\nc32 = 2.4\nc34 = 12.7\nc42 = 5.7\nc43 = 5.0\n\ne12 = 1.5\ne23 = 2.5\ne24 = 2.0\ne31 = 3.0\ne41 = 4.8\n\n#Time\nt_end = 700\nt_start = 0\nt_step = 1\nt_interval = sp.arange(t_start, t_end, t_step)\n\n#Initial Condition\nic = [0.2,0.3,0.3,0.5]\n\ndef model(t,ic):\n    Eqs= np.zeros((4))\n    Eqs[0] = (ic[0]*(1-ic[0]*ic[0]-ic[1]*ic[1]-ic[2]*ic[2]-ic[3]*ic[3])-c21*((ic[1]*ic[1])*ic[0])+e31*((ic[2]*ic[2])*ic[0])+e41*((ic[3]*ic[3])*ic[0]))\n    Eqs[1] = (ic[1]*(1-ic[0]*ic[0]-ic[1]*ic[1]-ic[2]*ic[2]-ic[3]*ic[3])+e12*((ic[0]*ic[0])*ic[1])-c32*((ic[2]*ic[2])*ic[1])-c42*((ic[3]*ic[3])*ic[1]))\n    Eqs[2] = (ic[2]*(1-ic[0]*ic[0]-ic[1]*ic[1]-ic[2]*ic[2]-ic[3]*ic[3])-c13*((ic[0]*ic[0])*ic[2])+e23*((ic[1]*ic[1])*ic[2])-c43*((ic[3]*ic[3])*ic[2]))\n    Eqs[3] = (ic[3]*(1-ic[0]*ic[0]-ic[1]*ic[1]-ic[2]*ic[2]-ic[3]*ic[3])-c14*((ic[0]*ic[0])*ic[3])+e24*((ic[1]*ic[1])*ic[3])-c34*((ic[2]*ic[2])*ic[3]))\n    return Eqs\n\node =  spi.ode(model)\n\node.set_integrator('dopri5')\node.set_initial_value(ic,t_start)\nts = []\nys = []\n\nwhile ode.successful() and ode.t &lt; t_end:\n    ode.integrate(ode.t + t_step)\n    ts.append(ode.t)\n    ys.append(ode.y)\n\nt = np.vstack(ts)\nx1,x2,x3,x4 = np.vstack(ys).T\n\nplt.subplot(1, 1, 1)\nplt.plot(t, x1, 'r', label = 'x1')\nplt.plot(t, x2, 'b', label = 'x2')\nplt.plot(t, x3, 'g', label = 'x3')\nplt.plot(t, x4, 'purple', label = 'x4')\nplt.xlim([0,t_end])\nplt.legend()\nplt.ylim([-0.2,1.3])\n\nplt.show()\n</code></pre>\n\n<p>which produces the following plot:</p>\n\n<p><a href=\"https://i.stack.imgur.com/iSz81.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iSz81.png\" alt=\"enter image description here\"></a></p>\n\n<p>However, my plots have something odd about them -- the x1 value seems to randomly spike above 1. Because (1,0,0,0) is a fixed point of the dynamical system, it doesn't make much sense to me that it spikes above one (there might've been a reason if the spikes had shown some sort of repetitive pattern, but they look random in the plot, so I'm wondering if that has more to do with just the numerical integration rather than the actual dynamics). Changing parameters also changes that spike (some parameter values I tried still have that spiking but it's substantially less). I therefore have 2 questions:</p>\n\n<p>1) What is causing these spikes to appear? My original thought was that it was the \"t_step\" being large, so I tried playing around with it (which leads me to my second question)</p>\n\n<p>2) I tried changing the step size from 1 to 0.1. However it produced this plot, which actually looks much different than if step size was 1 (which I thought lower step size would produce more accurate plots?) In this plot, it appears that the time each x_i spends near 1 is longer than if the step size was 1 instead of 0.1, and the heights of the spikes are all equal -- how do I know which plot is more accurate of the true system considering the plots have some substantial differences?</p>\n\n<p><a href=\"https://i.stack.imgur.com/Jgmhs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Jgmhs.png\" alt=\"enter image description here\"></a></p>\n\n<p>The real crux of the problem I'm working on is looking up the interaction between x3 and x4, but I want to make sure the simulations are set up correctly so that I can get accurate results about x3 and x4!</p>\n"}, {"tags": ["python", "multiplication"], "comments": [{"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 1, "creation_date": 1447285103, "post_id": 33661863, "comment_id": 55097400, "body": "What&#39;s the type of those variables?"}, {"owner": {"reputation": 18468, "user_id": 5249307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c640cd731ca8e455d79860519b6b208?s=128&d=identicon&r=PG", "display_name": "donkopotamus", "link": "https://stackoverflow.com/users/5249307/donkopotamus"}, "edited": false, "score": 1, "creation_date": 1447285406, "post_id": 33661863, "comment_id": 55097500, "body": "Why do you feel it should be 4 by 1?  You are creating <code>numpy</code> arrays, not <code>numpy</code> matrices.  Perhaps you could start by reading the documentation of the library you&#39;re using?"}, {"owner": {"reputation": 10628, "user_id": 4565947, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e5b166ea39cc61a22e0c04a67ef53bd7?s=128&d=identicon&r=PG&f=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/4565947/julien"}, "edited": false, "score": 1, "creation_date": 1447285537, "post_id": 33661863, "comment_id": 55097541, "body": "use <code>np.dot</code> for matrix multiplication, <code>*</code> is interpreted as element wise multiplication, and <code>u</code> is then broadcasted as a 4x4 array (4 replicas of <code>u</code>)"}, {"owner": {"reputation": 8873, "user_id": 2913864, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8fd76251e7baccce47654c94e399b915?s=128&d=identicon&r=PG&f=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/2913864/alan"}, "reply_to_user": {"reputation": 18468, "user_id": 5249307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c640cd731ca8e455d79860519b6b208?s=128&d=identicon&r=PG", "display_name": "donkopotamus", "link": "https://stackoverflow.com/users/5249307/donkopotamus"}, "edited": false, "score": 0, "creation_date": 1447285554, "post_id": 33661863, "comment_id": 55097550, "body": "Elaborating on what @donkopotamus, multiplication of numpy arrays is done by broadcasting.  Use <code>dot</code> for matrix multiplication.  (In Python 3.5+, you can use <code>@</code>.)"}, {"owner": {"reputation": 1089, "user_id": 4592639, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/aa2463371a45175830ebc8e4b7891889?s=128&d=identicon&r=PG&f=1", "display_name": "ZigZagZebra", "link": "https://stackoverflow.com/users/4592639/zigzagzebra"}, "edited": false, "score": 0, "creation_date": 1447285780, "post_id": 33661863, "comment_id": 55097629, "body": "I will look it up. Thank you."}], "owner": {"reputation": 1089, "user_id": 4592639, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/aa2463371a45175830ebc8e4b7891889?s=128&d=identicon&r=PG&f=1", "display_name": "ZigZagZebra", "link": "https://stackoverflow.com/users/4592639/zigzagzebra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 170, "favorite_count": 0, "closed_date": 1447285514, "answer_count": 0, "score": 0, "last_activity_date": 1447285310, "creation_date": 1447284834, "last_edit_date": 1447285310, "question_id": 33661863, "link": "https://stackoverflow.com/questions/33661863/matrix-multiplication-in-python-use", "closed_reason": "Duplicate", "title": "Matrix multiplication in python use *", "body": "<p>I have some code here:</p>\n\n<pre><code>u = np.zeros((4, 1))\nU = np.zeros((4, 4))\n# Then did some stuff to change some value in U\nX = U * u\nprint U\nprint u\nprint X\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[[ 0. -1.  2.  0.]\n[ 0.  0. -1.  3.]\n[ 0.  0.  0. -1.]\n[ 0.  0.  0.  0.]]\n[[ 0.]\n [ 0.]\n [ 0.]\n [ 0.]]\n[[ 0. -0.  0.  0.]\n [ 0.  0. -0.  0.]\n [ 0.  0.  0. -0.]\n [ 0.  0.  0.  0.]]\n</code></pre>\n\n<p>I cannot figure out. Shouldn't X be 4 * 1 matrix? Why it is 4 * 4?</p>\n"}, {"tags": ["python", "scipy", "regression", "curve-fitting"], "comments": [{"owner": {"reputation": 677, "user_id": 3814425, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fc67f3de09d8a0d4f7af59c5f38bc2ed?s=128&d=identicon&r=PG&f=1", "display_name": "klib", "link": "https://stackoverflow.com/users/3814425/klib"}, "edited": false, "score": 0, "creation_date": 1447286377, "post_id": 33661857, "comment_id": 55097802, "body": "I don&#39;t think you need to make it this complicated and I don&#39;t think you are actually doing what you want. I think you should combine the equations. Since you already know VPD and some values of C you only have 1 unknown and then can just use a solver. Python really doesn&#39;t have the best set of solvers for this, I prefer Wolfram but you could use SymPy"}], "answers": [{"tags": [], "owner": {"reputation": 677, "user_id": 3814425, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fc67f3de09d8a0d4f7af59c5f38bc2ed?s=128&d=identicon&r=PG&f=1", "display_name": "klib", "link": "https://stackoverflow.com/users/3814425/klib"}, "is_accepted": true, "score": 1, "last_activity_date": 1447286923, "creation_date": 1447286923, "answer_id": 33662219, "question_id": 33661857, "link": "https://stackoverflow.com/questions/33661857/curve-fitting-to-exponential/33662219#33662219", "title": "Curve Fitting to Exponential", "body": "<p>Assuming your equations are correct which I did not verify you can simply do this:</p>\n\n<pre><code>from sympy.solvers import solve\nfrom sympy import Symbol\n\nr = Symbol('r')\nfor C in np.linspace(0,50,100):\n    result = solve(((r/100)*(0.6108*np.exp((17.27*C)/(C+273.3))))-0.5, r )\n    print(\"For C = {} RH = {}\".format(C, result[0]))\n</code></pre>\n\n<p>This will print the RH for each value of C assuming your equations are correct. I simply substituted the equations and set the resulting equation equal to 0. Just change the -0.5 to -(new VPD) to get the results for a different VPD.</p>\n"}], "owner": {"reputation": 1113, "user_id": 2587593, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ea513caa4ce5e321589581b3c3106278?s=128&d=identicon&r=PG", "display_name": "user2587593", "link": "https://stackoverflow.com/users/2587593/user2587593"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 33662219, "answer_count": 1, "score": 1, "last_activity_date": 1447341840, "creation_date": 1447284814, "last_edit_date": 1447341840, "question_id": 33661857, "link": "https://stackoverflow.com/questions/33661857/curve-fitting-to-exponential", "title": "Curve Fitting to Exponential", "body": "<p>I am currently attempting to find the values of RH and TMP in the function for vapor pressure deficit (VPD) that result in the ideal VPD. So I've defined my functions for VPD and tried to do a non-linear regression but am not getting the curve I am looking for.</p>\n\n<pre><code>import numpy as np\nfrom scipy.optimize import curve_fit\n\ndef ES(C):\n    es = 0.6108*np.exp((17.27*C)/(C+273.3))\n    return es\n\ndef EA(RH,es):\n    ea = (float(RH)/100)*es\n    return ea\n\ndef VPD(C,RH):\n    es = ES(C)\n    ea = EA(RH,es)\n    vpd = ea\n    return vpd\n\nC = np.linspace(0,50,100)\nvpd = [0.5]*len(C)\n\npopt, pcov = curve_fit(VPD, C, vpd)\n</code></pre>\n\n<p>Which gives me the values for popt and pcov of 10.09132776 and 0.51489686. However, what I would really like to do here is determine the values of RH at these temperature values in C that give me VPD values of 0.5. I may be going about this in the wrong way but I've really been struggling with this for a long time and could really use some outside perspective as to how to go about this task.</p>\n"}, {"tags": ["python", "time-series", "forecasting", "statsmodels"], "answers": [{"tags": [], "owner": {"reputation": 1071, "user_id": 1661049, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/tY0PZ.jpg?s=128&g=1", "display_name": "riccamini", "link": "https://stackoverflow.com/users/1661049/riccamini"}, "is_accepted": true, "score": 8, "last_activity_date": 1448970591, "creation_date": 1448970591, "answer_id": 34019731, "question_id": 33661762, "link": "https://stackoverflow.com/questions/33661762/python-statsmodels-arima-forecast/34019731#34019731", "title": "Python statsmodels ARIMA Forecast", "body": "<p>If I am right, I had the very similar problem: basically I wanted to split my time series into training and test set, train the model, and then predict arbitrarily any element of the test set given its past history. I did not manage to achieve it using the ARIMA statsmodels class though.</p>\n\n<p>That's how I did it using statsmodels: I've applied a first order difference to the series to achieve stationarity, and computed an arma model:</p>\n\n<pre><code>model = sm.tsa.ARMA(fitting_data, order=(p, q), dates=fitting_dates).fit()\n</code></pre>\n\n<p>I've converted the arma model into a pure-ar one:</p>\n\n<pre><code>ar_params = model.arparams\nma_params = model.maparams\n\nar_coefficients = arma2ar(ar_params, ma_params, nobs=final_ar_coeff)\n</code></pre>\n\n<p>The <em>nobs</em> parameters influences the number of auto-regressive coefficients you will get. I tried several values, increasing it until no significant change in the predictions was observed. Once you get your predictions w.r.t. the differenced series, you want to bring back them to the original one. I implemented a method which, given one or a chain of predictions and the last known element before your forecasts, computes the  predictions in the original series:</p>\n\n<pre><code>def differenced_series_to_original(values, starting_value):\n\n    original_series = [starting_value]\n    [original_series.append(original_series[-1]+i) for i in values]\n\n    return original_series[1:]\n</code></pre>\n\n<p>Obviously <em>values</em> is the list of your predictions, <em>starting_value</em> the last known element. Hope it helps with your problem.</p>\n"}, {"tags": [], "owner": {"reputation": 196, "user_id": 5928436, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-vH459ayHmo0/AAAAAAAAAAI/AAAAAAAAB1k/r15lvbLBvAw/photo.jpg?sz=128", "display_name": "Rahib", "link": "https://stackoverflow.com/users/5928436/rahib"}, "is_accepted": false, "score": 0, "last_activity_date": 1556543490, "last_edit_date": 1556543490, "creation_date": 1556542135, "answer_id": 55903760, "question_id": 33661762, "link": "https://stackoverflow.com/questions/33661762/python-statsmodels-arima-forecast/55903760#55903760", "title": "Python statsmodels ARIMA Forecast", "body": "<p>From what i can understand is that you dont want to run the model everytime, there can be two solutions to this problem</p>\n\n<ol>\n<li>Extract model in pickle format and then use the same model everytime to create forecasts.</li>\n<li>Extract the coefficients from the model and use it for your calculations.</li>\n</ol>\n\n<p>Code for both the options are below.</p>\n\n<ol>\n<li><p>Pickle creation and using it further.</p>\n\n<pre><code>import pmdarima as pm\nmodel = pm.auto_arima(train,\n                      exogenous=exogenous_train,\n                      start_p=1, start_q=1,\n                      test='adf',       # use adftest to find optimal 'd'\n                      max_p=5, max_q=5, # maximum p and q\n                      m=12,              # frequency of series\n                      d=None,           # let model determine 'd'\n                      seasonal=True,   # No Seasonality\n                      start_P=0, \n                      D=1, \n                      trace=True,\n                      error_action='ignore',  \n                      suppress_warnings=True, \n                      stepwise=True)\n\nfilename = 'ARIMA_Model.sav'\npickle.dump(model, open(filename, 'wb')) ## This will create a pickle file\n\n## Load Model\nmodel = pickle.load(open(filename, 'rb'))\n\n## Forecast\nfc, confint = model.predict(n_periods=1, \n                    exogenous=exogenous_test_df,\n                    return_conf_int=True)\n</code></pre></li>\n<li><p>Extract the model coefficients, I have used pmdarima for ARIMA so this is how you can extract the coefficients. I guess it should be same in other ARIMA libraries.</p>\n\n<pre><code>Model_dict = model.to_dict()\nModel_Order = Model_dict['order']\nModel_seasonal_order = Model_dict['seasonal_order'][1]\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 677, "user_id": 3814425, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fc67f3de09d8a0d4f7af59c5f38bc2ed?s=128&d=identicon&r=PG&f=1", "display_name": "klib", "link": "https://stackoverflow.com/users/3814425/klib"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5951, "favorite_count": 7, "accepted_answer_id": 34019731, "answer_count": 2, "score": 8, "last_activity_date": 1556543490, "creation_date": 1447284316, "last_edit_date": 1495542866, "question_id": 33661762, "link": "https://stackoverflow.com/questions/33661762/python-statsmodels-arima-forecast", "title": "Python statsmodels ARIMA Forecast", "body": "<p>I am trying to do out of sample forecasting using python statsmodels. I do not want to just forecast the next x number of values from the end of the training set but I want to forecast one value at a time and take in consideration the actual values when forecasting. In other words I want to do rolling 1-period forecasts, but I don't want to recalibrate the model every time. The closest post I could find was here:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/18616588/arma-out-of-sample-prediction-with-statsmodels?rq=1\">ARMA out-of-sample prediction with statsmodels</a></p>\n\n<p>However, this uses ARMA not ARIMA. How can I achieve this with ARIMA or is there a better method? I know I could actually pull the coefficients and apply a function myself but in my code the ARIMA model I am using is dynamic over time, therefore the number of coefficients and lagged values used is not constant. Any help would be greatly appreciated.</p>\n"}, {"tags": ["python", "beautifulsoup"], "comments": [{"owner": {"reputation": 677, "user_id": 3814425, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fc67f3de09d8a0d4f7af59c5f38bc2ed?s=128&d=identicon&r=PG&f=1", "display_name": "klib", "link": "https://stackoverflow.com/users/3814425/klib"}, "edited": false, "score": 0, "creation_date": 1447284814, "post_id": 33661709, "comment_id": 55097319, "body": "Can you give an example of the HTML?"}], "answers": [{"comments": [{"owner": {"reputation": 3575, "user_id": 4678042, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R0bWq.jpg?s=128&g=1", "display_name": "sunny", "link": "https://stackoverflow.com/users/4678042/sunny"}, "edited": false, "score": 0, "creation_date": 1447286506, "post_id": 33661828, "comment_id": 55097836, "body": "I see. In that case how would I get past that standalone string?"}, {"owner": {"reputation": 950, "user_id": 2908879, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/pFvwp.jpg?s=128&g=1", "display_name": "durrrutti", "link": "https://stackoverflow.com/users/2908879/durrrutti"}, "reply_to_user": {"reputation": 3575, "user_id": 4678042, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R0bWq.jpg?s=128&g=1", "display_name": "sunny", "link": "https://stackoverflow.com/users/4678042/sunny"}, "edited": false, "score": 0, "creation_date": 1447287328, "post_id": 33661828, "comment_id": 55098059, "body": "Using my example, try <code>h.find_next(&#39;p&#39;)</code> to get the tag you are looking for."}, {"owner": {"reputation": 3575, "user_id": 4678042, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R0bWq.jpg?s=128&g=1", "display_name": "sunny", "link": "https://stackoverflow.com/users/4678042/sunny"}, "edited": false, "score": 0, "creation_date": 1447288071, "post_id": 33661828, "comment_id": 55098263, "body": "Perhaps I have an old BS version. I had to use findNext() and find_next generated a very strange error message about NoneType..."}, {"owner": {"reputation": 950, "user_id": 2908879, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/pFvwp.jpg?s=128&g=1", "display_name": "durrrutti", "link": "https://stackoverflow.com/users/2908879/durrrutti"}, "reply_to_user": {"reputation": 3575, "user_id": 4678042, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R0bWq.jpg?s=128&g=1", "display_name": "sunny", "link": "https://stackoverflow.com/users/4678042/sunny"}, "edited": false, "score": 0, "creation_date": 1447288420, "post_id": 33661828, "comment_id": 55098370, "body": "Yup, sounds like an older version."}], "tags": [], "owner": {"reputation": 950, "user_id": 2908879, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/pFvwp.jpg?s=128&g=1", "display_name": "durrrutti", "link": "https://stackoverflow.com/users/2908879/durrrutti"}, "is_accepted": true, "score": 0, "last_activity_date": 1447284667, "creation_date": 1447284667, "answer_id": 33661828, "question_id": 33661709, "link": "https://stackoverflow.com/questions/33661709/beautiful-soup-order-based-search/33661828#33661828", "title": "Beautiful Soup order-based search", "body": "<p>When you're calling <code>h.next_sibling</code>, BeautifulSoup returns whatever element comes next at the same level. Now, this element can either be a tag or a standalone string. My guess is that there is some standalone string in your HTML document that precedes the HTML tags you are looking for.</p>\n\n<p>Example:</p>\n\n<pre><code>html = '&lt;h1&gt;A header&lt;/h1&gt;Some random text&lt;p&gt;A paragraph&lt;/p&gt;'\nsoup = BeautifulSoup(html)\nh = soup.find('h1') # Contains &lt;h1&gt;A header&lt;/h1&gt;\nprint(h.next_sibling) # Prints u'Some random text', not the p tag\n</code></pre>\n"}], "owner": {"reputation": 3575, "user_id": 4678042, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R0bWq.jpg?s=128&g=1", "display_name": "sunny", "link": "https://stackoverflow.com/users/4678042/sunny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 339, "favorite_count": 0, "accepted_answer_id": 33661828, "answer_count": 1, "score": 0, "last_activity_date": 1447284667, "creation_date": 1447284041, "last_edit_date": 1447284548, "question_id": 33661709, "link": "https://stackoverflow.com/questions/33661709/beautiful-soup-order-based-search", "title": "Beautiful Soup order-based search", "body": "<p>I am scraping a series of very flat webpages, where the structure that matters to me is that I want to find all elements that occur after a <code>h2</code> element with a known id. The elements I want to find after this <code>h2</code> element are <code>p</code>, <code>blockquote</code>, and <code>center</code>. Ordering is important and needs to be preserved in locating these elements. I should also say that all the elements of interest are siblings in the sense of being at the same organizational level, right next to on another. How can I do this? </p>\n\n<p>Here's what I tried:</p>\n\n<pre><code>soup = BeautifulSoup(response)\n# here is the title\nh =  soup.find(\"h2\", {\"id\":\"content\"})\nprint(h.text) # correct, so we're in the right place\nprint(h.next_sibling)\n</code></pre>\n\n<p>But the final print statement just prints a <code>None</code>. I also tried this: </p>\n\n<pre><code>i = h.next\nprint(i.text)\n</code></pre>\n\n<p>But this raises a NavigableString error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"scrape.py\", line 15, in &lt;module&gt;\n    print(i.text)\n  File \"/usr/lib/python2.7/dist-packages/BeautifulSoup.py\", line 473, in __getattr__\n    raise AttributeError, \"'%s' object has no attribute '%s'\" % (self.__class__.__name__, attr)\nAttributeError: 'NavigableString' object has no attribute 'text'\n</code></pre>\n\n<p>The elements I'm looking for are definitely at the same level as this <code>h2</code> element and occur afterwords in the HTML. How can I find them in the BS navigation schema?</p>\n"}, {"tags": ["python", "cluster-analysis", "k-means"], "comments": [{"owner": {"reputation": 10628, "user_id": 4565947, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e5b166ea39cc61a22e0c04a67ef53bd7?s=128&d=identicon&r=PG&f=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/4565947/julien"}, "edited": false, "score": 0, "creation_date": 1447284154, "post_id": 33661691, "comment_id": 55097093, "body": "Note: K-means is initialized randomly, have you tried running it several times to see if you just didn&#39;t have bad luck the first time? But in general, if your data is not clustered in the first place no algo is going to find good clusters that do not exist. This seems more like a binning problem..."}, {"owner": {"reputation": 1430, "user_id": 3681744, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6921bacfad9bc18fc661bd14c17082d3?s=128&d=identicon&r=PG&f=1", "display_name": "A.M.", "link": "https://stackoverflow.com/users/3681744/a-m"}, "reply_to_user": {"reputation": 10628, "user_id": 4565947, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e5b166ea39cc61a22e0c04a67ef53bd7?s=128&d=identicon&r=PG&f=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/4565947/julien"}, "edited": false, "score": 0, "creation_date": 1447284218, "post_id": 33661691, "comment_id": 55097113, "body": "@JulienBernu Yes I have tried it several times with different initialization and different umber of iterations for convergence."}, {"owner": {"reputation": 677, "user_id": 3814425, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fc67f3de09d8a0d4f7af59c5f38bc2ed?s=128&d=identicon&r=PG&f=1", "display_name": "klib", "link": "https://stackoverflow.com/users/3814425/klib"}, "edited": false, "score": 0, "creation_date": 1447285151, "post_id": 33661691, "comment_id": 55097415, "body": "The constraint that the clusters must have equal size is very strong. Take a look at this post: <a href=\"http://stats.stackexchange.com/questions/40777/spatial-clustering-with-the-constraint-that-all-clusters-have-equal-count\" title=\"spatial clustering with the constraint that all clusters have equal count\">stats.stackexchange.com/questions/40777/&hellip;</a>"}, {"owner": {"reputation": 677, "user_id": 3814425, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fc67f3de09d8a0d4f7af59c5f38bc2ed?s=128&d=identicon&r=PG&f=1", "display_name": "klib", "link": "https://stackoverflow.com/users/3814425/klib"}, "edited": false, "score": 0, "creation_date": 1447285193, "post_id": 33661691, "comment_id": 55097430, "body": "You no longer have a typical clustering problem once you have that constraint"}, {"owner": {"reputation": 70452, "user_id": 1060350, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/XCkw7.jpg?s=128&g=1", "display_name": "Has QUIT--Anony-Mousse", "link": "https://stackoverflow.com/users/1060350/has-quit-anony-mousse"}, "edited": false, "score": 0, "creation_date": 1447285588, "post_id": 33661691, "comment_id": 55097563, "body": "There are no clusters here. Two attributes are uniform (= should be discarded). Can you show an example of what you would expect?"}, {"owner": {"reputation": 1430, "user_id": 3681744, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6921bacfad9bc18fc661bd14c17082d3?s=128&d=identicon&r=PG&f=1", "display_name": "A.M.", "link": "https://stackoverflow.com/users/3681744/a-m"}, "reply_to_user": {"reputation": 70452, "user_id": 1060350, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/XCkw7.jpg?s=128&g=1", "display_name": "Has QUIT--Anony-Mousse", "link": "https://stackoverflow.com/users/1060350/has-quit-anony-mousse"}, "edited": false, "score": 1, "creation_date": 1447285958, "post_id": 33661691, "comment_id": 55097677, "body": "@Anony-Mousse According to the rest of comments, maybe a better explanation is that I want to divide this cube to sum mini-cube such that in each mini-cube there are equal number of data points."}, {"owner": {"reputation": 70452, "user_id": 1060350, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/XCkw7.jpg?s=128&g=1", "display_name": "Has QUIT--Anony-Mousse", "link": "https://stackoverflow.com/users/1060350/has-quit-anony-mousse"}, "edited": false, "score": 1, "creation_date": 1447310605, "post_id": 33661691, "comment_id": 55104604, "body": "You then should rephrase your question, and look at octrees."}], "answers": [{"tags": [], "owner": {"reputation": 931, "user_id": 3199122, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/77e6f3e28b815b358334dd39bccd24d2?s=128&d=identicon&r=PG", "display_name": "kronosapiens", "link": "https://stackoverflow.com/users/3199122/kronosapiens"}, "is_accepted": false, "score": 0, "last_activity_date": 1447286063, "creation_date": 1447286063, "answer_id": 33662072, "question_id": 33661691, "link": "https://stackoverflow.com/questions/33661691/clustering-points-in-3d-plane/33662072#33662072", "title": "Clustering points in 3D plane", "body": "<p>Try using Scikit-Learn's implementation. They initialize their clusters using a technique known as \"K-Means++\" which picks the first means probabilistically to get an optimal starting distribution. This creates a higher probability of a good result.</p>\n\n<p><a href=\"http://scikit-learn.org/stable/modules/generated/sklearn.cluster.KMeans.html\" rel=\"nofollow\">http://scikit-learn.org/stable/modules/generated/sklearn.cluster.KMeans.html</a></p>\n"}], "owner": {"reputation": 1430, "user_id": 3681744, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6921bacfad9bc18fc661bd14c17082d3?s=128&d=identicon&r=PG&f=1", "display_name": "A.M.", "link": "https://stackoverflow.com/users/3681744/a-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3025, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1447286063, "creation_date": 1447283941, "question_id": 33661691, "link": "https://stackoverflow.com/questions/33661691/clustering-points-in-3d-plane", "title": "Clustering points in 3D plane", "body": "<p>Suppose we have 1000 random data points in a cube (as shown in the following image). The distribution of points in X and Y directions are uniform but not in Z direction. As we get deeper, the data points are denser. Is there any straightforward way in python to cluster these data points such that:</p>\n\n<ul>\n<li>each cluster has equal size</li>\n<li>each cluster consists of local points, i.e., each cluster consists of points being close to each other.</li>\n</ul>\n\n<p>I have already tried K-means clustering from Scipy package but it did not give me a good result and the points of each cluster were very widespread rather than being concentrated.</p>\n\n<p><a href=\"https://i.stack.imgur.com/TZGhh.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TZGhh.jpg\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "dictionary", "grouping"], "comments": [{"owner": {"reputation": 18468, "user_id": 5299236, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/KtXnq.jpg?s=128&g=1", "display_name": "Casimir Crystal", "link": "https://stackoverflow.com/users/5299236/casimir-crystal"}, "edited": false, "score": 1, "creation_date": 1447284543, "post_id": 33661674, "comment_id": 55097211, "body": "So what have you tried? Can you give us your code?"}, {"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 0, "creation_date": 1447285704, "post_id": 33661674, "comment_id": 55097602, "body": "How is the input data a nested dictionary? Also why not show us your unelegant/unpythonic solution so that we may suggest improvements and also know that you have at least made some effort to solve your problem."}], "answers": [{"tags": [], "owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "is_accepted": false, "score": 2, "last_activity_date": 1447284681, "creation_date": 1447284681, "answer_id": 33661835, "question_id": 33661674, "link": "https://stackoverflow.com/questions/33661674/grouping-items-in-python-dictionary-by-common-value/33661835#33661835", "title": "Grouping items in Python Dictionary by common value", "body": "<pre><code>doglist = [\n    {'name': 'Fido', 'breed': 'Dalmatian', 'age': 3},\n    {'name': 'Rex', 'breed': 'Dalmatian', 'age': 2},\n    {'name': 'Max', 'breed': 'Dalmatian', 'age': 0},\n    {'name': 'Rocky', 'breed': 'Pitbull', 'age': 6},\n    {'name': 'Buster', 'breed': 'Pitbull', 'age': 7},\n]\ndogdict = {}\n\nfor dog in doglist:\n    if dog['breed'] in dogdict:\n        dogdict[dog['breed']]['name'].append(dog['name'])\n        dogdict[dog['breed']]['age'].append(dog['age'])\n    else:\n        dogdict[dog['breed']] = {'name': [dog['name']], 'age': [dog['age']]}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2579, "user_id": 4760801, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-svA_WD2vGC4/AAAAAAAAAAI/AAAAAAAAAGM/pzanXRLcCok/photo.jpg?sz=128", "display_name": "Michael Recachinas", "link": "https://stackoverflow.com/users/4760801/michael-recachinas"}, "is_accepted": false, "score": 4, "last_activity_date": 1447286787, "last_edit_date": 1447286787, "creation_date": 1447286005, "answer_id": 33662060, "question_id": 33661674, "link": "https://stackoverflow.com/questions/33661674/grouping-items-in-python-dictionary-by-common-value/33662060#33662060", "title": "Grouping items in Python Dictionary by common value", "body": "<p>Here are two possibilities:</p>\n\n<p>Example #1: <a href=\"http://ideone.com/RRzWaL\" rel=\"nofollow\">http://ideone.com/RRzWaL</a></p>\n\n<pre><code>dogs = [\n    {'name': 'Fido', 'breed': 'Dalmatian', 'age': 3},\n    {'name': 'Rex', 'breed': 'Dalmatian', 'age': 2},\n    {'name': 'Max', 'breed': 'Dalmatian', 'age': 0},\n    {'name': 'Rocky', 'breed': 'Pitbull', 'age': 6},\n    {'name': 'Buster', 'breed': 'Pitbull', 'age': 7},\n]\n\n# get rid of duplicates\nbreeds = set([ dog['breed'] for dog in dogs ])\n\nbreed_dict = {}\nfor breed in breeds:\n    # get the names of all dogs corresponding to `breed`\n    names = [ dog['name'] for dog in dogs if dog['breed'] == breed ]\n\n    # get the ages of all dogs corresponding to `breed`\n    ages = [ dog['age'] for dog in dogs if dog['breed'] == breed ]\n\n    # add to the new dict\n    breed_dict[breed] = { 'age': ages, 'name': names }\n</code></pre>\n\n<p>I'll also add a simplification of @JohnGordon's code using <code>collections</code>'s <code>defaultdict</code>:</p>\n\n<p>Example #2: <a href=\"http://ideone.com/B2xLGR\" rel=\"nofollow\">http://ideone.com/B2xLGR</a></p>\n\n<pre><code>from collections import defaultdict\n\ndoglist = [\n    {'name': 'Fido', 'breed': 'Dalmatian', 'age': 3},\n    {'name': 'Rex', 'breed': 'Dalmatian', 'age': 2},\n    {'name': 'Max', 'breed': 'Dalmatian', 'age': 0},\n    {'name': 'Rocky', 'breed': 'Pitbull', 'age': 6},\n    {'name': 'Buster', 'breed': 'Pitbull', 'age': 7},\n]\ndogdict = defaultdict(lambda: defaultdict(list))\n\nfor dog in doglist:\n    # `defaultdict` allows us to not have to check whether\n    # a key is already in the `dict`, it'll just set it to\n    # a default (`[]` in the inner dict in our case) \n    # if it's not there, and then append it.\n    dogdict[dog['breed']]['name'].append(dog['name'])\n    dogdict[dog['breed']]['age'].append(dog['age'])\n</code></pre>\n\n<p>Note that the second example using <code>defaultdict</code> will be faster than the first example, which has two separate list comprehensions (i.e., two separate inner loops).</p>\n"}, {"tags": [], "owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "is_accepted": false, "score": 0, "last_activity_date": 1447289686, "last_edit_date": 1447289686, "creation_date": 1447288610, "answer_id": 33662506, "question_id": 33661674, "link": "https://stackoverflow.com/questions/33661674/grouping-items-in-python-dictionary-by-common-value/33662506#33662506", "title": "Grouping items in Python Dictionary by common value", "body": "<p>Use <code>itertools.groupby</code> to segregate the dictionaries then construct the new dictionaries.</p>\n\n<pre><code>import itertools, collections, operator\ndees = [{'name': 'Fido', 'breed': 'Dalmatian', 'age': 3},\n        {'name': 'Rex', 'breed': 'Dalmatian', 'age': 2},\n        {'name': 'Max', 'breed': 'Dalmatian', 'age': 0},\n        {'name': 'Rocky', 'breed': 'Pitbull', 'age': 6},\n        {'name': 'Buster', 'breed': 'Pitbull', 'age': 7}]\n\nbreed = operator.itemgetter('breed')\nfiltr = ['name', 'age']\nnew_dees = []\nfor key, group in itertools.groupby(dees, breed):\n    d = collections.defaultdict(list)\n    for thing in group:\n        for k, v in thing.items():\n            if k in filtr:\n                d[k].append(v)\n    new_dees.append({key:d})\n</code></pre>\n\n<hr>\n\n<p>As an alternative you can just extract the values you want instead of using <code>if k in filtr</code>.  I haven't decided which alternate I like best so I'll post this also.</p>\n\n<pre><code># using previously defined functions and variables\nitems_of_interest = operator.itemgetter(*filtr)\nfor key, group in itertools.groupby(dees, breed):\n    d = collections.defaultdict(list)\n    for thing in group:\n        values = items_of_interest(thing)\n        for k, v in zip(filtr, values):\n            d[k].append(v)\n    new_dees.append({key:d})\n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 4142251, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/147f01c6d73554a5e2856aa48c39262d?s=128&d=identicon&r=PG&f=1", "display_name": "Felipe Rios", "link": "https://stackoverflow.com/users/4142251/felipe-rios"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 759, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1447289686, "creation_date": 1447283871, "question_id": 33661674, "link": "https://stackoverflow.com/questions/33661674/grouping-items-in-python-dictionary-by-common-value", "title": "Grouping items in Python Dictionary by common value", "body": "<p>I have a nested dictonary that I'm iterating over, I'd like to make a new dictonary derived from the old dictonry that groups certain values together based on a value present in the old dictonary. To illustrate:</p>\n\n<pre><code>{'name': Fido, 'breed': Dalmatian, 'age': 3}\n{'name': Rex, 'breed': Dalmatian, 'age': 2}\n{'name': Max, 'breed': Dalmatian, 'age': 0}\n{'name': Rocky, 'breed': Pitbull, 'age': 6}\n{'name': Buster, 'breed': Pitbull, 'age': 7}\n</code></pre>\n\n<p>Would give me:</p>\n\n<pre><code>Dalmation: {'name': [Fido, Rex, Max], 'age': [3, 2, 0]}\nPitbull : {'name': [Rocky, Buster], 'age': [6, 7]} \n</code></pre>\n\n<p>I've tried to find an elegant and pythonic solution to this to no avail.</p>\n"}, {"tags": ["python", "string", "class", "oop", "instance"], "comments": [{"owner": {"reputation": 4789, "user_id": 3641545, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/F85G1.png?s=128&g=1", "display_name": "Zarwan", "link": "https://stackoverflow.com/users/3641545/zarwan"}, "edited": false, "score": 0, "creation_date": 1447283709, "post_id": 33661623, "comment_id": 55096917, "body": "Why would you want to do that? Instead you could have a name property as a part of the <code>Lens</code> class and refer to that."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 2, "creation_date": 1447283797, "post_id": 33661623, "comment_id": 55096958, "body": "Objects don&#39;t intrinsically have names. What should happen if you do <code>table.addcomponent(Lens(...), 10)</code>?"}, {"owner": {"reputation": 3424, "user_id": 3750257, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KF8gx.png?s=128&g=1", "display_name": "pppery", "link": "https://stackoverflow.com/users/3750257/pppery"}, "edited": false, "score": 1, "creation_date": 1447283898, "post_id": 33661623, "comment_id": 55096999, "body": "If you say <code>lens_A = lens_B = Lens()</code>, which name is right."}, {"owner": {"reputation": 2238, "user_id": 4159833, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9c40168a426e48fa3faa82591351b7de?s=128&d=identicon&r=PG&f=1", "display_name": "Physicist", "link": "https://stackoverflow.com/users/4159833/physicist"}, "edited": false, "score": 1, "creation_date": 1447284133, "post_id": 33661623, "comment_id": 55097089, "body": "so other than adding an extra property to the class, there are no ways to get the &#39;words&#39; (which is &#39;lensA&#39;) that I type for the argument &#39;component&#39; of the method?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user824425"}, "edited": false, "score": 0, "creation_date": 1447284637, "post_id": 33661623, "comment_id": 55097243, "body": "Exactly. In fact, for most programming languages, the cases where names of things are observable at execution time are exceptional. The general rule is often that (when done according to the binding semantics of the language) name changes don&#39;t change the behaviour of the program."}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1447291150, "post_id": 33661623, "comment_id": 55099150, "body": "This or similar questions have been asked a number of times here, search around and see what solutions were offered."}], "answers": [{"tags": [], "owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "is_accepted": true, "score": 2, "last_activity_date": 1447368421, "last_edit_date": 1447368421, "creation_date": 1447290913, "answer_id": 33662843, "question_id": 33661623, "link": "https://stackoverflow.com/questions/33661623/how-to-get-the-name-of-a-class-variable/33662843#33662843", "title": "how to get the name of a class variable", "body": "<p>You can find it but it may not be practical and this may not work depending on the scope where it is executed.  It seems like a hack and not the correct way to solve the problem.</p>\n\n<pre><code># locals() might work instead of globals()\n&gt;&gt;&gt; class Foo(object):\n    pass\n\n&gt;&gt;&gt; lion = Foo()\n&gt;&gt;&gt; zebra = Foo()\n&gt;&gt;&gt; zebra, lion\n(&lt;__main__.Foo object at 0x02F82CF0&gt;, &lt;__main__.Foo object at 0x03078FD0&gt;)\n&gt;&gt;&gt; for k, v in globals().items():\n    if v in (lion, zebra):\n        print 'object:{} - name:{}'.format(v, k)\n\n\nobject:&lt;__main__.Foo object at 0x03078FD0&gt; - name:lion\nobject:&lt;__main__.Foo object at 0x02F82CF0&gt; - name:zebra\n&gt;&gt;&gt; \n</code></pre>\n"}], "owner": {"reputation": 2238, "user_id": 4159833, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9c40168a426e48fa3faa82591351b7de?s=128&d=identicon&r=PG&f=1", "display_name": "Physicist", "link": "https://stackoverflow.com/users/4159833/physicist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 33662843, "answer_count": 1, "score": 0, "last_activity_date": 1447368421, "creation_date": 1447283629, "question_id": 33661623, "link": "https://stackoverflow.com/questions/33661623/how-to-get-the-name-of-a-class-variable", "title": "how to get the name of a class variable", "body": "<p>Suppose I have the following codes:</p>\n\n<pre><code>lens_A = Lens(...) # declare an object of type 'Lens' called 'lens_A'\ntable = Bench() # declare an object 'Bench' called 'table'\ntable.addcomponent(lens_A, 10) \n\naddcomponent(self, component, position): # a method inside the class Bench\n    self.__component_class.append(component)\n    self.__component_position.append(position)\n    self.__component_name.append(...) # how to do this????\n</code></pre>\n\n<p>I want to write the last line such that I can add the name of the class variable ('lensA') to the list <code>self.__component_name</code>, but not the location of the instance (which is done in <code>self.__component_class</code>). How to do that?</p>\n"}, {"tags": ["python", "web-scraping", "beautifulsoup", "web-crawler", "scrapy"], "comments": [{"owner": {"reputation": 8048, "user_id": 2658948, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xFeL8.jpg?s=128&g=1", "display_name": "dstudeba", "link": "https://stackoverflow.com/users/2658948/dstudeba"}, "edited": false, "score": 0, "creation_date": 1447283353, "post_id": 33661500, "comment_id": 55096770, "body": "can you post the url?"}, {"owner": {"reputation": 17034, "user_id": 858913, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/b5015a60c08feee1d8116be3dd70878d?s=128&d=identicon&r=PG", "display_name": "eLRuLL", "link": "https://stackoverflow.com/users/858913/elrull"}, "edited": false, "score": 0, "creation_date": 1447283377, "post_id": 33661500, "comment_id": 55096780, "body": "this totally depends on the page itself, you&#39;ll need to use something like chrome develepor tools, or firebug to check which requests are being done."}, {"owner": {"reputation": 374, "user_id": 4110223, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/b15cae528c5bf1b72f17cf5f9c63150f?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/4110223/tom"}, "edited": false, "score": 0, "creation_date": 1447286023, "post_id": 33661500, "comment_id": 55097698, "body": "<a href=\"http://www.tripadvisor.com/Hotels-g60713-San_Francisco_California-Hotels.html\" rel=\"nofollow noreferrer\">tripadvisor.com/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 374, "user_id": 4110223, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/b15cae528c5bf1b72f17cf5f9c63150f?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/4110223/tom"}, "edited": false, "score": 0, "creation_date": 1447352589, "post_id": 33663286, "comment_id": 55130197, "body": "If the pages has unique urls can I expect the crawl spider to eventually reach them on his own? Is there a particular crawler Rule that makes the spider reach these pages?"}, {"owner": {"reputation": 8048, "user_id": 2658948, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xFeL8.jpg?s=128&g=1", "display_name": "dstudeba", "link": "https://stackoverflow.com/users/2658948/dstudeba"}, "reply_to_user": {"reputation": 374, "user_id": 4110223, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/b15cae528c5bf1b72f17cf5f9c63150f?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/4110223/tom"}, "edited": false, "score": 0, "creation_date": 1447353068, "post_id": 33663286, "comment_id": 55130448, "body": "Sorry, that is a scrapy question and I have not used that tool.  For beautiful soup I would do a <code>page.read()</code> and open each one of the pages that you pulled the url of."}], "tags": [], "owner": {"reputation": 8048, "user_id": 2658948, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xFeL8.jpg?s=128&g=1", "display_name": "dstudeba", "link": "https://stackoverflow.com/users/2658948/dstudeba"}, "is_accepted": true, "score": 0, "last_activity_date": 1447296712, "last_edit_date": 1447296712, "creation_date": 1447294285, "answer_id": 33663286, "question_id": 33661500, "link": "https://stackoverflow.com/questions/33661500/scraping-different-values-cookies-under-the-same-url/33663286#33663286", "title": "Scraping different values (cookies?) under the same url", "body": "<p>If you look in the page source at the page numbers on the bottom of the page they have a unique url to each of the pages.  If you print out the soup you see that you can grab that url.  If there are a lot of pages it won't show all of the pages, just a ... for the intermediate pages.  However you can calculate the urls from the first and last values (I did not do that below).  Here is the code I used:</p>\n\n<pre><code>url = \"http://www.tripadvisor.com/Hotels-g60713-San_Francisco_California-Hotels.html\" \npage=urllib.request.urlopen(url)\n\nsoup = BeautifulSoup(page.read())\n#print(soup)\nfor myValue3 in soup.findAll(\"a\",attrs={ \"class\" : \"pageNum\" }):\n    try:\n        print(\"the value of page \" + myValue3.get(\"data-page-number\") + \" is: \" + myValue3.get(\"href\").split(\"#ACCOM_OVERVIEW\")[0])\n    except:\n        print(\"error\")\n</code></pre>\n\n<p>Here is the output</p>\n\n<pre><code>the value of page 2 is: /Hotels-g60713-oa30-San_Francisco_California-Hotels.html\nthe value of page 3 is: /Hotels-g60713-oa60-San_Francisco_California-Hotels.html\nthe value of page 4 is: /Hotels-g60713-oa90-San_Francisco_California-Hotels.html\nthe value of page 5 is: /Hotels-g60713-oa120-San_Francisco_California-Hotels.html\nthe value of page 6 is: /Hotels-g60713-oa150-San_Francisco_California-Hotels.html\nthe value of page 8 is: /Hotels-g60713-oa210-San_Francisco_California-Hotels.html\n</code></pre>\n\n<p>notice the <code>-oa###-</code> in the url.  That can be changed and you can get all the subsequent pages.</p>\n"}], "owner": {"reputation": 374, "user_id": 4110223, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/b15cae528c5bf1b72f17cf5f9c63150f?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/4110223/tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 519, "favorite_count": 0, "accepted_answer_id": 33663286, "answer_count": 1, "score": 0, "last_activity_date": 1447296712, "creation_date": 1447283024, "question_id": 33661500, "link": "https://stackoverflow.com/questions/33661500/scraping-different-values-cookies-under-the-same-url", "title": "Scraping different values (cookies?) under the same url", "body": "<p>I am using scrapy and beautifulsoup in order to scrape a list of all the hotels in different cities in the US.</p>\n\n<p>When I get to a page called \"Hotels in San Francisco\" it contains only 30 hotels out of the 250 in the city. Clicking on \"next 30 on the list\" <strong>doesn't change the url</strong> and neither does changing the sorting parameter.\nMy question: how can I reach the entire list of 250 hotels, or choose what ranking to scrape from.  Thanks.</p>\n\n<p>My code so far:</p>\n\n<pre><code>r = requests.get(url)\nsoup = BeautifulSoup(r.content,'html.parser')\nheaders = soup.find_all(\"h1\",{\"class\":\"X\"})\n\nfor header in headers:\n    headerText = header.text\n    match=re.search('(.+ Hotels)',headerText)\n    if match:\n        writeHotels(soup,match.group(0))\n\n\n\ndef writeHotels(soup,location):\n\n   #create Hotels directory\n   hotelDir = 'Hotels/'\n   if not os.path.exists(hotelDir):\n       os.makedirs(hotelDir)\n\n\n   hotels = soup.find_all(\"a\",{\"class\":\"Y\"})\n   name=location+'.txt'\n   #write hotels to file\n   if os.path.exists(hotelDir+name):\n       print 'opening file '+name+\"\\n\"\n   else:\n       print 'creating file '+name+\"\\n\"\n   file=open(hotelDir+name,'a') \n   for hotel in hotels:\n       file.write(hotel.text+\"\\n\")\n   file.close()\n</code></pre>\n"}, {"tags": ["python", "raspberry-pi", "divide"], "comments": [{"owner": {"reputation": 448, "user_id": 4153614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/095f33d30e635ec361b40886041b9153?s=128&d=identicon&r=PG&f=1", "display_name": "kponz", "link": "https://stackoverflow.com/users/4153614/kponz"}, "edited": false, "score": 2, "creation_date": 1447283021, "post_id": 33661444, "comment_id": 55096617, "body": "You&#39;re probably running a version of python that doesn&#39;t do float division by default - try adding <code>from __future__ import division</code> to the beginning of your python script"}, {"owner": {"reputation": 39811, "user_id": 1322401, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JlaPg.jpg?s=128&g=1", "display_name": "Steven Rumbalski", "link": "https://stackoverflow.com/users/1322401/steven-rumbalski"}, "edited": false, "score": 0, "creation_date": 1447283066, "post_id": 33661444, "comment_id": 55096637, "body": "See <a href=\"https://www.python.org/dev/peps/pep-0238/\" rel=\"nofollow noreferrer\">PEP 238 -- Changing the Division Operator</a>."}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 5552568, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/10155180135665114/picture?type=large", "display_name": "Edward Hammock", "link": "https://stackoverflow.com/users/5552568/edward-hammock"}, "edited": false, "score": 0, "creation_date": 1447283355, "post_id": 33661483, "comment_id": 55096771, "body": "This sorted it.  Thanks!! Everyday is a school day!  I really need to get to grips with the fundamental differences."}], "tags": [], "owner": {"reputation": 2069, "user_id": 254954, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eec780d8c6032413b39ba779b5359d8e?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/254954/sebastian"}, "is_accepted": true, "score": 1, "last_activity_date": 1447282952, "creation_date": 1447282952, "answer_id": 33661483, "question_id": 33661444, "link": "https://stackoverflow.com/questions/33661444/raspberry-pi-python-divide-produces-integer/33661483#33661483", "title": "Raspberry pi python divide produces integer", "body": "<p>Both environments are probably using different versions of Python.</p>\n\n<p>Integer division on Python3 returns a float, whereas integer division in Python2 will return an integer.</p>\n\n<p>Cast you denominator to float so that it is an integer / float division and returns a float in both Python versions:</p>\n\n<pre><code>i /= 100.0\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 5552568, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/10155180135665114/picture?type=large", "display_name": "Edward Hammock", "link": "https://stackoverflow.com/users/5552568/edward-hammock"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 313, "favorite_count": 0, "accepted_answer_id": 33661483, "answer_count": 1, "score": 0, "last_activity_date": 1447282952, "creation_date": 1447282785, "question_id": 33661444, "link": "https://stackoverflow.com/questions/33661444/raspberry-pi-python-divide-produces-integer", "title": "Raspberry pi python divide produces integer", "body": "<p>I hope you can help me.  I am coding in python on a Raspberry Pi, I use pycharm to draft the code then copy across.  I am trying to count from 1.00 to 2.00 in 0.01 steps.  This is my code:</p>\n\n<pre><code>import time\nimport os\n\ntry:\n    pause = 0.1\n    while (True):\n        for i in range(100, 201, 1):\n            i /= 100\n            print(str(i))\n            time.sleep(pause)\n\nexcept (KeyboardInterrupt):\n    os.system('clear')\n    print(\"Complete\")\n</code></pre>\n\n<p>In pycharm it gives an expected response of</p>\n\n<blockquote>\n  <p>1.01,\n  1.02,\n  1.03...</p>\n</blockquote>\n\n<p>On the RPi this gives:</p>\n\n<blockquote>\n  <p>1, 1,\n  1...</p>\n</blockquote>\n\n<p>Any idea why?  I'm tearing my hair out.</p>\n"}, {"tags": ["python", "numpy", "scikit-learn"], "comments": [{"owner": {"reputation": 448, "user_id": 4153614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/095f33d30e635ec361b40886041b9153?s=128&d=identicon&r=PG&f=1", "display_name": "kponz", "link": "https://stackoverflow.com/users/4153614/kponz"}, "edited": false, "score": 0, "creation_date": 1447283207, "post_id": 33661428, "comment_id": 55096703, "body": "It looks like you&#39;ve got csv formatted data, try using the csv module to read it in: <a href=\"https://docs.python.org/2/library/csv.html\" rel=\"nofollow noreferrer\">docs.python.org/2/library/csv.html</a>"}, {"owner": {"reputation": 1767, "user_id": 5420432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/626fb32f10020d504b6090933d592433?s=128&d=identicon&r=PG", "display_name": "RobertB", "link": "https://stackoverflow.com/users/5420432/robertb"}, "edited": false, "score": 0, "creation_date": 1447283207, "post_id": 33661428, "comment_id": 55096704, "body": "Give a sample of what you want the data structure to look like, your description is confusing. Also, post any code that you have tried so far, SO isn&#39;t a code writing service. Lastly, the basic approach would be to read lines in a loop until the first character is &#39;%&#39; and then start building your data structure."}], "answers": [{"tags": [], "owner": {"reputation": 1287, "user_id": 4941992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74a0ae74556d1b4bcaad2abd4e791ce0?s=128&d=identicon&r=PG", "display_name": "datawrestler", "link": "https://stackoverflow.com/users/4941992/datawrestler"}, "is_accepted": true, "score": 2, "last_activity_date": 1447286163, "last_edit_date": 1447286163, "creation_date": 1447284580, "answer_id": 33661811, "question_id": 33661428, "link": "https://stackoverflow.com/questions/33661428/how-to-load-in-txt-file-as-data-in-python/33661811#33661811", "title": "How to load in txt file as data in Python?", "body": "<p>as others had mentioned it was a little unclear as to what shape you were looking for, but just as a general starter, and getting the data into a very flexible format, you could read the text file into python and convert it to a pandas dataframe. I am certain their are other more compact ways of doing this, but just to provide clear steps we could start with:</p>\n\n<pre><code>import pandas as pd\nimport re \n\nfile = 'filepath' #this is the file path to the saved text file\nmusic = open(file, 'r')\nlines = music.readlines()\n# split the lines by comma\nlines = [line.split(',') for line in lines]\n# capturing the column line\ncolumns = lines[9]\n# capturing the actual content of the data, and dismissing the header info\ncontent = lines[10:]\n\nmusicdf = pd.DataFrame(content)\n# assign the column names to our dataframe\nmusicdf.columns = columns\n# preview the dataframe\nmusicdf.head(10)\n\n# the final column had formatting issues, so wanted to provide code to get rid of the \"\\n\" in both the column title and the column values\n\ndef cleaner(txt):\n    txt = re.sub(r'[\\n]+', '', txt)\n    return txt\n\n# rename the column of issue\nmusicdf = musicdf.rename(columns = {'var_timbre12\\n' : 'var_timbre12'})\n\n# applying the column cleaning function above to the column of interest\nmusicdf['var_timbre12'] = musicdf['var_timbre12'].apply(lambda p: cleaner(p))\n\n# checking the top and bottom of dataframe for column var_timbre12\nmusicdf['var_timbre12'].head(10)\nmusicdf['var_timbre12'].tail(10)\n</code></pre>\n\n<p>the result of this would be the following:</p>\n\n<pre><code>             %genre            track_id       artist_name  \n0  classic pop and rock  TRFCOOU128F427AEC0  Blue Oyster Cult   \n1  classic pop and rock  TRNJTPB128F427AE9F  Blue Oyster Cult \n</code></pre>\n\n<p>By having the data in this format, you can now do lots of grouping tasks, finding certain genres and their relative attributes, etc. using pandas groupby function. </p>\n\n<p>Hope this helps!</p>\n"}], "owner": {"reputation": 539, "user_id": 2763868, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/koC6K.jpg?s=128&g=1", "display_name": "Lucky", "link": "https://stackoverflow.com/users/2763868/lucky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1974, "favorite_count": 1, "accepted_answer_id": 33661811, "answer_count": 1, "score": 2, "last_activity_date": 1447286163, "creation_date": 1447282698, "last_edit_date": 1447284808, "question_id": 33661428, "link": "https://stackoverflow.com/questions/33661428/how-to-load-in-txt-file-as-data-in-python", "title": "How to load in txt file as data in Python?", "body": "<p>I'm learning how to use sklearn and scikit and all that to do some machine learning.</p>\n\n<p>I was wondering how to import this as data?</p>\n\n<p><a href=\"https://i.stack.imgur.com/ynZBC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ynZBC.png\" alt=\"enter image description here\"></a></p>\n\n<p>This is a dataset from the million song genre dataset.</p>\n\n<p>How can I make my <code>data.target[0]</code> equal to \"classic pop and rock\" (as 0) and <code>data.target[1]</code> equal to 0 which is \"classic pop and rock\" and <code>data.target[640]</code> equal to 1 which is \"folk\"?</p>\n\n<p>And my <code>data.data[0,:]</code> be equal to <code>-8.697</code>, <code>155.007</code>, 1, 9, and so forth (all numerical values after the title column)</p>\n"}, {"tags": ["python", "scikit-learn"], "answers": [{"tags": [], "owner": {"reputation": 52229, "user_id": 2937831, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/56c4053438af8e8b90d6f53cbb7573be?s=128&d=identicon&r=PG", "display_name": "jakevdp", "link": "https://stackoverflow.com/users/2937831/jakevdp"}, "is_accepted": false, "score": 2, "last_activity_date": 1447397664, "last_edit_date": 1447397664, "creation_date": 1447397362, "answer_id": 33687288, "question_id": 33661376, "link": "https://stackoverflow.com/questions/33661376/sklearn-balltree-giving-unexpected-results/33687288#33687288", "title": "sklearn BallTree giving unexpected results", "body": "<p>By default the BallTree computes the Euclidean distance between your vectors, and so it is inappropriate for the type of computation you have in mind.</p>\n\n<p>As a simple example, imagine you have the following two sets:</p>\n\n<pre><code>collections[0] = [1, 3]\ncollections[1] = [1, 2, 3]\n</code></pre>\n\n<p>When you convert them to vectors within <code>darray</code> as you have done above, they become this:</p>\n\n<pre><code>darray[0] = [1, 3, 0]\ndarray[1] = [1, 2, 3]\n</code></pre>\n\n<p>The Euclidean distance between these does not reflect the number of similar entries in the set, which is why the results are not what you expected.</p>\n\n<p>Rather than a Euclidean distance, the distance metric you're looking for is probably the <a href=\"https://en.wikipedia.org/wiki/Jaccard_index\" rel=\"nofollow\">Jaccard distance</a>, which measures the similarity between sets. The BallTree implements this for Boolean representations of the sets; that is, for the above data the vectors would become</p>\n\n<pre><code>darray[0] = [True, False, True]\ndarray[1] = [True, True, True]\n</code></pre>\n\n<p>where the first entry indicates if <code>1</code> is in the set, the second entry indicates if <code>2</code> is in the set, and so on. This is a version of \"one-hot encoding\".</p>\n\n<p>For the sample data you provided, you can compute the results this way:</p>\n\n<pre><code>import numpy as np\nfrom sklearn.neighbors import BallTree\nfrom sklearn.feature_extraction import DictVectorizer\n\n# for replicability\nnp.random.seed(0)\n\n# Compute the collections using a more efficient method\ncollections = [np.random.choice(300, replace=False,\n                                size=np.random.randint(7, 15))\n               for _ in range(10000)]\n\n# Use DictVectorizer to compute binary representation of collections\ndicts = [dict(zip(c, np.ones_like(c))) for c in collections]\ndarray = DictVectorizer(sparse=False, dtype=bool).fit_transform(dicts)\n\n# Compute 15 nearest neighbors for the first collection\ndist, ind = BallTree(darray, metric='jaccard').query(darray[0], k=15)\nfor i in ind[0]:\n    print(set(collections[0]) &amp; set(collections[i]))\n</code></pre>\n\n<p>I get the following results:</p>\n\n<pre><code>{225, 226, 261, 166, 296, 52, 150, 246, 215, 221, 223}\n{52, 261, 221, 215}\n{225, 226, 166, 150}\n{223, 150, 215}\n{225, 261, 166, 221}\n{226, 261, 223}\n{261, 150, 221}\n{223, 52, 166, 215}\n{296, 226, 166, 223}\n{296, 221, 150}\n{223, 52, 215}\n{52, 261, 246}\n{296, 225, 52}\n{296, 225, 221}\n{225, 150, 223}\n</code></pre>\n\n<p>Note that the Jaccard similarity is not simply the size of the intersection, but that size normalized by the size of the union. The size of the intersection alone does not have the properties of a distance metric, and so cannot be computed directly with the BallTree.</p>\n\n<p>Edit: I should add that if you have many entries in the sets, this method becomes untenable because the boolean encoding matrix becomes too large. The best way to compute very high-dimensional neighbor searches with the Jaccard distance is probably via Locality Sensitive Hashing, though I don't know of an easy-to-use Python implementation suitable for this problem.</p>\n"}], "owner": {"reputation": 341, "user_id": 1043694, "user_type": "registered", "profile_image": "https://graph.facebook.com/32903142/picture?type=large", "display_name": "Steve Yeago", "link": "https://stackoverflow.com/users/1043694/steve-yeago"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 510, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1447397664, "creation_date": 1447282382, "last_edit_date": 1447366778, "question_id": 33661376, "link": "https://stackoverflow.com/questions/33661376/sklearn-balltree-giving-unexpected-results", "title": "sklearn BallTree giving unexpected results", "body": "<p>What am I doing wrong?</p>\n\n<p>I am trying to use sklearn's BallTree in order to come up with similar collections and then generate some suggestions on items that might be missing from a given collection.</p>\n\n<pre><code>import random\nfrom sklearn.neighbors import BallTree\nimport numpy\n\ncollections = []  # 10k sample collections of between\n                  # 7 and 15 (of a possible 300...) items\n\nfor sample in range(0, 10000):  # build sample data\n   items = random.sample(range(1, 300), random.randint(7, 15))\n   collections.append(items)    \n\ndarray = numpy.zeros((len(collections), max(map(len, collections))))  # 10k x 15 matrix\n\nfor c_cnt, items in enumerate(collections):  # populate matrix\n   for cnt, i in enumerate(sorted(items)):\n      darray[C_cnt][cnt] = i\n\nquery = BallTree(darray).query(darray[0], k=15)\n\nnearest_neighbors = query[1][0]\n\n# test the results against the first item!\n\nall_sets = [set(darray[0]) &amp; set(darray[item]) for item in nearest_neighbors]\nfor item in all_sets:\n    print item  # intersection of the neighbor\n</code></pre>\n\n<p>I get the following results:</p>\n\n<pre><code>set([0.0, 130.0, 167.0, 290.0, 162.0, 144.0, 17.0, 214.0]) # Nearest neighbor is itself! Awesome!\nset([0.0])  # WTF? The second closest item shares only 1 item?\nset([0.0, 290.0])\nset([0.0, 17.0])\nset([0.0, 130.0])\nset([0.0])\nset([0.0])\nset([0.0])\nset([0.0])\nset([0.0])\nset([0.0])\nset([0.0])\nset([0.0, 162.0])\nset([0.0, 144.0, 162.0])  # uhh okay, i would expect this to be higher up\nset([0.0, 144.0, 17.0])\n</code></pre>\n\n<p>I observe that the higher suggested items tend to have the same length of non-zero values as the array I am attempting to compare. Is there some preparation I can do with my data to fix this?</p>\n"}, {"tags": ["python", "python-requests"], "comments": [{"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 2, "creation_date": 1447282084, "post_id": 33661305, "comment_id": 55096261, "body": "Connection pooling only happens when you use a session. How are you calling the API, can you share sample code?"}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 1, "creation_date": 1447282106, "post_id": 33661305, "comment_id": 55096274, "body": "Also see <a href=\"http://stackoverflow.com/q/10115126\">Python-Requests close http connection</a>"}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 1, "creation_date": 1447283553, "post_id": 33661305, "comment_id": 55096856, "body": "There is no definition for the <code>upvote()</code>, <code>get_access_token()</code>, <code>create_header()</code> and <code>set_pos()</code> functions."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1447283610, "post_id": 33661305, "comment_id": 55096876, "body": "Sidenote: <code>data</code> defaults to <code>None</code>, there is no need to branch in <code>do_put()</code>; just pass in <code>data=payload</code> and if <code>payload</code> is set to <code>None</code> things work as expected anyway."}, {"owner": {"reputation": 215, "user_id": 5090532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b459c17c5cfc731555da20f7b1b0d71?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/5090532/jan"}, "reply_to_user": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1447284214, "post_id": 33661305, "comment_id": 55097111, "body": "@MartijnPieters done"}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1447285648, "post_id": 33661305, "comment_id": 55097585, "body": "You&#39;ve modified the global headers dictionary. <code>Auth</code> is now always present the moment you do <code>auth=True</code>. Not likely the cause of your problems, but a problems nonetheless. Using <code>global</code> outside of a function is pointless, the names set outside functions are already globals."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 2, "creation_date": 1447285761, "post_id": 33661305, "comment_id": 55097622, "body": "Further notes: Don&#39;t set the <code>Host</code> header, <code>requests</code> handles that for you. Use the <code>json</code> keyword argument and you don&#39;t need to encode to JSON yourself and you don&#39;t have to set the <code>Content-Type</code> header."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 2, "creation_date": 1447285818, "post_id": 33661305, "comment_id": 55097637, "body": "Next, look into using a Session object and have it handle common headers, like <code>Auth</code>. Create one Session object per authentication token, for example, and reuse that."}, {"owner": {"reputation": 20540, "user_id": 1953283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/396e3de53320abf9855d912cd3d9431f?s=128&d=identicon&r=PG", "display_name": "Ian Stapleton Cordasco", "link": "https://stackoverflow.com/users/1953283/ian-stapleton-cordasco"}, "edited": false, "score": 0, "creation_date": 1447301201, "post_id": 33661305, "comment_id": 55101903, "body": "@Jan can you explain what you mean when you say subsequent requests do not succeed. How do you determine success?"}, {"owner": {"reputation": 215, "user_id": 5090532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b459c17c5cfc731555da20f7b1b0d71?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/5090532/jan"}, "reply_to_user": {"reputation": 20540, "user_id": 1953283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/396e3de53320abf9855d912cd3d9431f?s=128&d=identicon&r=PG", "display_name": "Ian Stapleton Cordasco", "link": "https://stackoverflow.com/users/1953283/ian-stapleton-cordasco"}, "edited": false, "score": 0, "creation_date": 1447312951, "post_id": 33661305, "comment_id": 55105431, "body": "@sigmavirus24 First call returns 200. The proceeding call return 404."}], "answers": [{"tags": [], "owner": {"reputation": 455, "user_id": 1313741, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b64a56218bcb76d5499a4281f01e55?s=128&d=identicon&r=PG", "display_name": "Bobby Russell", "link": "https://stackoverflow.com/users/1313741/bobby-russell"}, "is_accepted": true, "score": 1, "last_activity_date": 1447350923, "last_edit_date": 1447350923, "creation_date": 1447285698, "answer_id": 33662015, "question_id": 33661305, "link": "https://stackoverflow.com/questions/33661305/how-to-reset-requests/33662015#33662015", "title": "How to reset Requests?", "body": "<p>I'm almost positive that <a href=\"https://www.maxcdn.com/one/visual-glossary/keep-alive/\" rel=\"nofollow\">keep-alive</a> is not doing this. I would suggest writing some handlers to debug the response if you don't get the expected response code after the request.</p>\n\n<p>Also, might I suggest a slightly different design that avoids <code>global</code>?</p>\n\n<pre><code>class RESTClient(object):\n\n    BASE_HEADERS = {\"Connection\":\"keep-alive\",\n                    \"Accept-Encoding\":\"gzip\",\n                    \"Host\":\"xxxxxxxxxxx\",\n                    \"Content-Type\":\"application/json; charset=UTF-8\"}\n\n    def __init__(self, user_agent, auth = None):\n        self.headers = dict(self.BASE_HEADERS)\n        self.headers['User-Agent'] = user_agent\n        self.auth = auth\n\n    def create_header(self):\n        headers = dict(self.headers)\n        if auth:\n            headers['Authorization'] = auth\n        return headers\n\n    def do_get(self, url):\n        return requests.get(url, headers=self.create_header());\n\n\n    def do_put(self, url, payload = None):\n        if not payload:\n            return requests.put(url, headers=self.create_header())\n        return requests.put(url, data=payload, headers=self.create_header())\n\n\n    def upvote(self, postid):\n        return do_put(\"xxxxxxxxxxxxx\" % postid).content\n\n    def set_pos(self, longtitude, latitude, place, country=\"DE\"):\n        payload = {'xxxxx':'xxxx'}\n        json_payload = json.dumps(payload)\n        return do_put(\"xxxxxxxxxxxxxxx\",json_payload).content\n\n    def do_post(self, url, payload, do_auth = None):\n        return requests.post(url, data=payload, headers=self.create_header())\n\n    def new_acc(self, place, latitude, longtitude):\n        access = get_access_token(place, latitude, longtitude)\n        print access\n        self.auth = \"Bearer %s\" % access['access_token']\n        set_pos(longtitude, latitude, place)\n\nrc = RESTClient('Mozilla/5.0 ... Firefox/38.0', 'my-auth-token')\nrc.upvote(post_id)\netc...\n</code></pre>\n\n<p>It could be that your use of globals is breaking things. Having not run your code, I can't check, but I would avoid using <code>global</code>s and favor tighter control of your state via objects. </p>\n\n<p><strong>EDIT:</strong>\nGiven that this answer was accepted by the OP, I am assuming the defect was caused by mutation of globals.</p>\n"}], "owner": {"reputation": 215, "user_id": 5090532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b459c17c5cfc731555da20f7b1b0d71?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/5090532/jan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1206, "favorite_count": 0, "accepted_answer_id": 33662015, "answer_count": 1, "score": 0, "last_activity_date": 1447350923, "creation_date": 1447282026, "last_edit_date": 1447284003, "question_id": 33661305, "link": "https://stackoverflow.com/questions/33661305/how-to-reset-requests", "title": "How to reset Requests?", "body": "<p>Im trying to write a REST Client for a closed API. I call a specific function twice but it only works the first time. It's the same command. If i run the script twice with batch It works. Im suspecting Requests keeps the connection alive or caches data. How do i \"reset\" Requests ?</p>\n\n<pre><code>base_headers = {\"Connection\":\"keep-alive\",\n            \"User-Agent\":user_agent,\n            \"Accept-Encoding\":\"gzip\",\n            \"Host\":\"xxxxxxxxxxx\",\n            \"Content-Type\":\"application/json; charset=UTF-8\"}\nglobal auth\nauth = 'xxxxxx'\n\n\ndef create_header(doAuth = True):\n    headers = base_headers\n    if doAuth:\n       headers['Authorization'] = auth\n    return headers\ndef do_get(url):\n    return requests.get(url, headers=create_header());\n\n\ndef do_put(url, payload):\n    if payload is None:\n        return requests.put(url, headers=create_header())\n\n    return requests.put(url, data=payload, headers=create_header())\n\n\ndef upvote(postid):\n    return do_put(\"xxxxxxxxxxxxx\" % postid, None).content\n\n\ndef set_pos(longtitude, latitude, place, country=\"DE\"):\n    payload = {'xxxxx':'xxxx'}\n\n    json_payload = json.dumps(payload)\n\n    return do_put(\"xxxxxxxxxxxxxxx\",json_payload).content\n\n\ndef do_post(url, payload, doAuth=True):\n    return requests.post(url, data=payload, headers=create_header(doAuth=doAuth))\n\ndef new_acc(place, latitude, longtitude):\n    access = get_access_token(place, latitude, longtitude)\n    print access\n    global auth\n    auth = \"Bearer %s\" % access['access_token']\n    set_pos(longtitude, latitude, place) # Does a POST\n\nfor i in range(1,30):\n    posts = new_acc(uni['city'], uni['latitude'], uni['longtitude'])\n    upvote('xxxxxxxxxxxxx')\n</code></pre>\n\n<p>Basically the first upvote() goes through every time but every succeding does not. </p>\n"}, {"tags": ["python", "python-2.7", "pyinstaller", "python-keyring"], "answers": [{"tags": [], "owner": {"reputation": 107, "user_id": 4909692, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b83f6bd8afd9fb71beb34d82772884f6?s=128&d=identicon&r=PG&f=1", "display_name": "Sonic", "link": "https://stackoverflow.com/users/4909692/sonic"}, "is_accepted": true, "score": 1, "last_activity_date": 1448034290, "creation_date": 1448034290, "answer_id": 33830653, "question_id": 33661301, "link": "https://stackoverflow.com/questions/33661301/pyinstaller-include-keyring-module/33830653#33830653", "title": "pyinstaller: include keyring module?", "body": "<p>After a week of no success even after posting here and on the pyinstaller github i made my own solution.\nI ditched the keyring module and used win32crypt module to use the windows function CryptProtectData which after some research uses the same protection as keyring. </p>\n\n<p>I hash the password into a string stored in the user appdata folder and decrypt it when needed. This works great and should be as secure as the keyring method because its only decryptable from the same user, resetting the password to get access wont work aswell. Secure enough for me.</p>\n\n<p>And of course this works with pyinstaller.</p>\n"}], "owner": {"reputation": 107, "user_id": 4909692, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b83f6bd8afd9fb71beb34d82772884f6?s=128&d=identicon&r=PG&f=1", "display_name": "Sonic", "link": "https://stackoverflow.com/users/4909692/sonic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 785, "favorite_count": 0, "accepted_answer_id": 33830653, "answer_count": 1, "score": 0, "last_activity_date": 1448034290, "creation_date": 1447282000, "last_edit_date": 1447288531, "question_id": 33661301, "link": "https://stackoverflow.com/questions/33661301/pyinstaller-include-keyring-module", "title": "pyinstaller: include keyring module?", "body": "<p>i wrote a small python app to automatically login a user to specific service using the keyring module (for storing the password in the windows credential vault) and wxpython for a login gui.\nThe login tool for this service doesnt support the storage of login credentials but has a cmd login method i am using in my script.</p>\n\n<p>The script is now finished and works perfectly but i would like to deploy this as exe to several other systems.</p>\n\n<p>Keyring doesnt seem to play nice with pyinstaller but i got my program to start atleast after adding a huge list of hidden imports:</p>\n\n<pre><code>'json', \n'json.decoder', \n'json.encoder', \n'json.scanner',\n'keyring.backends.file',\n'keyring.backends.Gnome',\n'keyring.backends.Google',\n'keyring.backends.keyczar',\n'keyring.backends.kwallet',\n'keyring.backends.multi',\n'keyring.backends.OS_X',\n'keyring.backends.pyfs',\n'keyring.backends.SecretService',\n'keyring.backends.Windows',\n'keyring.backends._win_crypto',\n'keyring.util.escape',\n'keyring.util.XDG',\n'keyring.credentials'\n</code></pre>\n\n<p>With those the app starts without any errors of missing modules but it still crashes when it tries to access the credential vault:</p>\n\n<pre><code>c:\\PY\\novell_login&gt;dist\\thread_test\\thread_test.exe\nLogging in User: test\nTraceback (most recent call last):\n  File \"c:\\PY\\build\\thread_test\\out00-PYZ.pyz\\wx._core\", line 16766, in &lt;lambda&gt;\n  File \"&lt;string&gt;\", line 119, in LongTaskDone\n  File \"c:\\PY\\build\\thread_test\\out00-PYZ.pyz\\keyring.core\", line 44, in set_password\n  File \"c:\\PY\\build\\thread_test\\out00-PYZ.pyz\\keyring.backends.file\", line 87, in set_password\n  File \"c:\\PY\\build\\thread_test\\out00-PYZ.pyz\\keyring.backends.Windows\", line 81, in encrypt\nNameError: global name '_win_crypto' is not defined\n</code></pre>\n\n<p>I dont know what else to do to fix this...\nCan anyone help me to properly include keyring or knows an alternative i could use. I would really like to keep using the windows crendential vault for storing the password.</p>\n\n<p>Thanks!</p>\n\n<p>Python: 2.7.9\npyinstaller: 2.1\nkeyring: 5.6\npywin: Build 219</p>\n"}, {"tags": ["python", "python-2.7", "out-of-memory"], "comments": [{"owner": {"reputation": 209114, "user_id": 1427416, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/QWHKg.png?s=128&g=1", "display_name": "BrenBarn", "link": "https://stackoverflow.com/users/1427416/brenbarn"}, "edited": false, "score": 0, "creation_date": 1447281921, "post_id": 33661250, "comment_id": 55096179, "body": "Are you using a 64-bit version of Python?"}, {"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1447282203, "post_id": 33661250, "comment_id": 55096318, "body": "windows32 is limited to 2gb of memory per application"}, {"owner": {"reputation": 1465, "user_id": 1803356, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/4P5Wk.png?s=128&g=1", "display_name": "suiwenfeng", "link": "https://stackoverflow.com/users/1803356/suiwenfeng"}, "edited": false, "score": 0, "creation_date": 1447338067, "post_id": 33661250, "comment_id": 55119893, "body": "crashed with the same error in my 64bit/4 core/16G dev machine.  newGroup.append(listTemp) recursive without end."}, {"owner": {"reputation": 1465, "user_id": 1803356, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/4P5Wk.png?s=128&g=1", "display_name": "suiwenfeng", "link": "https://stackoverflow.com/users/1803356/suiwenfeng"}, "edited": false, "score": 0, "creation_date": 1447338694, "post_id": 33661250, "comment_id": 55120374, "body": "monitor the memory usage and program crashed while the memory reach      10GB from 8GB and the memery not released."}, {"owner": {"reputation": 950, "user_id": 3614855, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/267970129056459ed1a52d4373fc438b?s=128&d=identicon&r=PG&f=1", "display_name": "fiacre", "link": "https://stackoverflow.com/users/3614855/fiacre"}, "edited": false, "score": 0, "creation_date": 1447542188, "post_id": 33661250, "comment_id": 55199714, "body": "I would look to avoid recursion -- you are blowing out the stack."}], "owner": {"reputation": 82, "user_id": 3576578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/056300047eed85a0afb3b4bb62cef477?s=128&d=identicon&r=PG&f=1", "display_name": "Stijn Goethals", "link": "https://stackoverflow.com/users/3576578/stijn-goethals"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 145, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1447281801, "creation_date": 1447281801, "question_id": 33661250, "link": "https://stackoverflow.com/questions/33661250/how-do-i-raise-the-memory-limit-in-python", "title": "How do I raise the memory limit in python?", "body": "<p>I have written a python (2.7) script but it use a lot of memory so I get a out of memory error. Is it possible to use memory?</p>\n\n<p>My code (<a href=\"https://github.com/icecoldfire/group-divider\" rel=\"nofollow\">or the github</a>):</p>\n\n<pre><code>from itertools import combinations\nimport numpy    \n# Find the unused members and put this in a other group\ndef findMembers(listIn,listMembers):\n    lengthlist2 = (len(listMembers)-len(listIn[0]))\n    group2 = [0] * lengthlist2 #making the other groups based on the length of the first group\n    for i in listIn:\n        wichRow = 0\n        for x in listMembers:\n            if not (x in i) :\n                group2[wichRow] = x\n                wichRow += 1\n    listIn.append(group2)\n    return listIn\n\n#you give a list of members and the numbers of groups\n#you get back all the possibilities of combinations\ndef findCombinations(listMembers,numbersOfGroups):\n    groupTemp = [] #list needed to save correctly all the combinations\n    group = [] #list needed for keep it simple\n    newGroup = [] #list that will be returned\n    for listPossibilities in combinations(listMembers,(len(listMembers)/numbersOfGroups)):\n        groupTemp.append(list(listPossibilities))\n        group.append(groupTemp) #saving all the possibilities \n        groupTemp = []\n    for k in group:\n        # place the unused members in group2\n        k = (findMembers(k,listMembers))\n        if numbersOfGroups &gt; 2:\n            groupTemp = []\n            groupTemp = findCombinations(k[1],numbersOfGroups-1)\n            for i in groupTemp:\n                listTemp = []\n                listTemp.append(k[0])\n                listTemp.extend(i)\n                newGroup.append(listTemp)\n        else:\n            newGroup = group\n    return newGroup\n\n    # Calculate the happiness of the group\ndef findHappiness(tabel,listIn):\n    happiness = 0\n    for i in listIn:\n        for j in i:\n            for k in i:\n                happiness += tabel[j][k]    \n    return happiness\ndef buildTabel(members): #build a random survey\n    tabel = numpy.random.random((members,members)) \n    return tabel\ndef calculateHappiness(group):\n    print \"Finding all the happiness: \"\n    maxhappiness = 0\n    i = 0\n    for x in group:\n        happiness = findHappiness(tabel,x)\n        if happiness &gt; maxhappiness:\n            maxhappiness = happiness\n            y = x\n        progress = int(round((((i)*1.0/(len(group)))*100.0)))\n        update_progress(progress)\n        i += 1  \n    print \"\\n Best solution: \", y, \" with: \", maxhappiness, \" happiness\"\ndef update_progress(progress):\n    print '\\r[{0}] {1}%'.format('#'*(progress/5), progress),\nif __name__ == \"__main__\":\n    members = 24    # members of the group\n    numbersOfGroups = 3\n    tabel = buildTabel(members) #preferences will be stored here  \n    listMembers = (range(members)) #members of the group that need to be divided\n    print \"Searching all the combinations...\"\n    group = findCombinations(listMembers,numbersOfGroups) #find all the combinations (recursive)\n    print len(group),\" combinations\"\n    calculateHappiness(group) #calculate the most happiest group and print\n</code></pre>\n\n<p>the error:</p>\n\n<pre><code>Searching all the combinations...\nTraceback (most recent call last):\n  File \"main.py\", line 75, in &lt;module&gt;\n    calculateHappiness(group) #calculate the most happiest group and print\n  File \"main.py\", line 38, in findCombinations\n    newGroup = group\nMemoryError\n</code></pre>\n\n<p>I'm using windows 10 64bit with 6gb ram. Is it possible to use virtual ram or disk space of mine hard drive disk?</p>\n"}, {"tags": ["python", "algorithm"], "comments": [{"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 1, "creation_date": 1447281993, "post_id": 33661235, "comment_id": 55096211, "body": "I think O(1) space and an O(n) solution is going to be interesting"}, {"owner": {"reputation": 8211, "user_id": 1850923, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f4c516ea2a612cdca29a5b48e9805cd9?s=128&d=identicon&r=PG", "display_name": "Lin Ma", "link": "https://stackoverflow.com/users/1850923/lin-ma"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1447282041, "post_id": 33661235, "comment_id": 55096236, "body": "@PadraicCunningham, if you have thoughts on my question, it will be greater. You can try my code. :)"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 2, "creation_date": 1447282224, "post_id": 33661235, "comment_id": 55096325, "body": "I would use a collections.Counter to get the counts but that will not give you a O(1) space algorithm, I have no idea  how you would satisfy <i>Given an integer array of size n, find all elements that appear more than \u230a n/3 \u230b times. The algorithm should run in linear time and in O(1) space.</i>"}, {"owner": {"reputation": 8211, "user_id": 1850923, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f4c516ea2a612cdca29a5b48e9805cd9?s=128&d=identicon&r=PG", "display_name": "Lin Ma", "link": "https://stackoverflow.com/users/1850923/lin-ma"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1447282435, "post_id": 33661235, "comment_id": 55096408, "body": "@PadraicCunningham, thanks. I tried the code I shared works. And just want to understand why it works, and if you could have any thoughts in the future, appreciate for sharing. Have a good day. :)"}, {"owner": {"reputation": 3918, "user_id": 1608226, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3f75e2877a53e9cd06009cce727235e4?s=128&d=identicon&r=PG&f=1", "display_name": "Nuclearman", "link": "https://stackoverflow.com/users/1608226/nuclearman"}, "edited": false, "score": 1, "creation_date": 1447291058, "post_id": 33661235, "comment_id": 55099127, "body": "Quickselect with a good pivot selection (to ensure O(N) time performance) algorithm should be suitable for modification to your purpose. All you need to do is break up the array into segments of less than about <code>N&#47;6</code> in size. If two neighboring pivots have the same value, then the numbers between them also have the same value. So rather than looking for the <code>kth</code> item, you are looking for two indices (pivots) that contain <code>N&#47;3+</code> of the same element between them."}, {"owner": {"reputation": 8211, "user_id": 1850923, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f4c516ea2a612cdca29a5b48e9805cd9?s=128&d=identicon&r=PG", "display_name": "Lin Ma", "link": "https://stackoverflow.com/users/1850923/lin-ma"}, "reply_to_user": {"reputation": 3918, "user_id": 1608226, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3f75e2877a53e9cd06009cce727235e4?s=128&d=identicon&r=PG&f=1", "display_name": "Nuclearman", "link": "https://stackoverflow.com/users/1608226/nuclearman"}, "edited": false, "score": 0, "creation_date": 1447291192, "post_id": 33661235, "comment_id": 55099168, "body": "@Nuclearman, your solution is not O(1) space complexity? :)"}, {"owner": {"reputation": 3918, "user_id": 1608226, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3f75e2877a53e9cd06009cce727235e4?s=128&d=identicon&r=PG&f=1", "display_name": "Nuclearman", "link": "https://stackoverflow.com/users/1608226/nuclearman"}, "edited": false, "score": 0, "creation_date": 1447335113, "post_id": 33661235, "comment_id": 55117909, "body": "Ah, forgot to add that it&#39;s requires being able to do it in-place (re-arrange the array the holding the input data), which requires no additional memory. Making it <code>O(1)</code>. It&#39;s far harder to ensure that approach is <code>O(N)</code> time than it is to ensure it&#39;s <code>O(1)</code> space."}], "answers": [{"comments": [{"owner": {"reputation": 8211, "user_id": 1850923, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f4c516ea2a612cdca29a5b48e9805cd9?s=128&d=identicon&r=PG", "display_name": "Lin Ma", "link": "https://stackoverflow.com/users/1850923/lin-ma"}, "edited": false, "score": 0, "creation_date": 1447285013, "post_id": 33661652, "comment_id": 55097371, "body": "Thanks David, what do you mean &quot;deleting three pairwise distinct items&quot;? A bit more details are appreciated.  BTW, my confusion is in the code I posted, it compare with candidate 1 and candidate 2, so should be two items? Why 3? :)"}, {"owner": {"reputation": 51837, "user_id": 2144669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e7393f439028063515255b63ed94cfd?s=128&d=identicon&r=PG", "display_name": "David Eisenstat", "link": "https://stackoverflow.com/users/2144669/david-eisenstat"}, "reply_to_user": {"reputation": 8211, "user_id": 1850923, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f4c516ea2a612cdca29a5b48e9805cd9?s=128&d=identicon&r=PG", "display_name": "Lin Ma", "link": "https://stackoverflow.com/users/1850923/lin-ma"}, "edited": false, "score": 1, "creation_date": 1447285329, "post_id": 33661652, "comment_id": 55097472, "body": "@LinMa If <code>count1</code> and <code>count2</code> are positive, and <code>n</code> is neither <code>candidate1</code> nor <code>candidate2</code>, then we delete a <code>candidate1</code>, a <code>candidate2</code>, and <code>n</code>."}, {"owner": {"reputation": 8211, "user_id": 1850923, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f4c516ea2a612cdca29a5b48e9805cd9?s=128&d=identicon&r=PG", "display_name": "Lin Ma", "link": "https://stackoverflow.com/users/1850923/lin-ma"}, "edited": false, "score": 0, "creation_date": 1447290455, "post_id": 33661652, "comment_id": 55098977, "body": "Thanks David, for your comments -- &quot;any element that occurred more n/3 times in the old list occurs more than n&#39;/3 times in the new list, where n is the length of the old list and n&#39; = n-3 is the length of the new list&quot;, I read your prove of the lemma and the confusion is I do not find n&#39; (which is the length of the new list)?"}, {"owner": {"reputation": 8211, "user_id": 1850923, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f4c516ea2a612cdca29a5b48e9805cd9?s=128&d=identicon&r=PG", "display_name": "Lin Ma", "link": "https://stackoverflow.com/users/1850923/lin-ma"}, "edited": false, "score": 0, "creation_date": 1447290514, "post_id": 33661652, "comment_id": 55098992, "body": "Another confusion is, why n&#39; = n-3 is the length of the new list? The new list should be just 2 elements -- candidate 1 and candidate 2? :)"}, {"owner": {"reputation": 51837, "user_id": 2144669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e7393f439028063515255b63ed94cfd?s=128&d=identicon&r=PG", "display_name": "David Eisenstat", "link": "https://stackoverflow.com/users/2144669/david-eisenstat"}, "reply_to_user": {"reputation": 8211, "user_id": 1850923, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f4c516ea2a612cdca29a5b48e9805cd9?s=128&d=identicon&r=PG", "display_name": "Lin Ma", "link": "https://stackoverflow.com/users/1850923/lin-ma"}, "edited": false, "score": 1, "creation_date": 1447291733, "post_id": 33661652, "comment_id": 55099319, "body": "@LinMa Ignore the implementation of the algorithm for the moment. Conceptually what it&#39;s doing is deleting elements three at a time, e.g., <code>2,3,1,2,1,3,1,5,5,1,6</code> (delete <code>2,3,1</code>) to <code>2,1,3,1,5,5,1,6</code> (delete <code>2,1,3</code>) to <code>1,5,5,1,6</code> (delete <code>1,5,6</code>) to <code>5,1</code>, then find that <code>1</code> but not <code>5</code> appears <code>&gt;11&#47;3</code> times."}, {"owner": {"reputation": 8211, "user_id": 1850923, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f4c516ea2a612cdca29a5b48e9805cd9?s=128&d=identicon&r=PG", "display_name": "Lin Ma", "link": "https://stackoverflow.com/users/1850923/lin-ma"}, "edited": false, "score": 0, "creation_date": 1447292504, "post_id": 33661652, "comment_id": 55099559, "body": "Thanks David, smart analysis. My test cases fit into the scenario of delete in a 3-element group perfectly since I create the test case to make 1 distributed sparsely. But suppose in other scenario, if 1 appears a lot in the first half part of the array, but seldom appear in the 2nd part of the array, then how could we ensure it could survive as one of the two candidate in the final? :)"}, {"owner": {"reputation": 51837, "user_id": 2144669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e7393f439028063515255b63ed94cfd?s=128&d=identicon&r=PG", "display_name": "David Eisenstat", "link": "https://stackoverflow.com/users/2144669/david-eisenstat"}, "reply_to_user": {"reputation": 8211, "user_id": 1850923, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f4c516ea2a612cdca29a5b48e9805cd9?s=128&d=identicon&r=PG", "display_name": "Lin Ma", "link": "https://stackoverflow.com/users/1850923/lin-ma"}, "edited": false, "score": 1, "creation_date": 1447293070, "post_id": 33661652, "comment_id": 55099682, "body": "@LinMa We never delete two 1s at once, so we reach farther and farther into the list to eliminate them. The order actually doesn&#39;t matter at all for the analysis."}, {"owner": {"reputation": 8211, "user_id": 1850923, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f4c516ea2a612cdca29a5b48e9805cd9?s=128&d=identicon&r=PG", "display_name": "Lin Ma", "link": "https://stackoverflow.com/users/1850923/lin-ma"}, "edited": false, "score": 0, "creation_date": 1447293333, "post_id": 33661652, "comment_id": 55099735, "body": "Hi David, for sure we delete one 1 at one time. I could be wrong but I think order matters? Please feel free to correct me if I am wrong. Suppose list like this [1,1,1,1,1,1,...], where &quot;...&quot; means a lot of other elements other than 1. Since number of &quot;...&quot; elements could be as much as 2n/3 - 1, suppose we only have n/3 + 1, I think &quot;...&quot; are good enough to kill all 1s? Please feel free to correct me if I am wrong."}, {"owner": {"reputation": 51837, "user_id": 2144669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e7393f439028063515255b63ed94cfd?s=128&d=identicon&r=PG", "display_name": "David Eisenstat", "link": "https://stackoverflow.com/users/2144669/david-eisenstat"}, "reply_to_user": {"reputation": 8211, "user_id": 1850923, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f4c516ea2a612cdca29a5b48e9805cd9?s=128&d=identicon&r=PG", "display_name": "Lin Ma", "link": "https://stackoverflow.com/users/1850923/lin-ma"}, "edited": false, "score": 1, "creation_date": 1447293440, "post_id": 33661652, "comment_id": 55099757, "body": "@LinMa We&#39;re deleting two other elements for every <code>1</code> (since we can&#39;t delete two <code>1</code>s at once), so to kill off <code>n&#47;3 + 1</code> ones, we&#39;d need <code>2n&#47;3 + 2</code> other elements, which is <code>n + 3</code> in total (too many)."}, {"owner": {"reputation": 8211, "user_id": 1850923, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f4c516ea2a612cdca29a5b48e9805cd9?s=128&d=identicon&r=PG", "display_name": "Lin Ma", "link": "https://stackoverflow.com/users/1850923/lin-ma"}, "edited": false, "score": 0, "creation_date": 1447293663, "post_id": 33661652, "comment_id": 55099823, "body": "Thanks David, for your comments &quot;deleting two other elements for every 1&quot;, want to make sure my understanding is correct, suppose we have candidate 1 and candidate x, with their own counters, and if we met with another candidate y, count of x decrease by one, and y is deleted as well -- and it is what you mean delete two other elements? Thanks."}, {"owner": {"reputation": 51837, "user_id": 2144669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e7393f439028063515255b63ed94cfd?s=128&d=identicon&r=PG", "display_name": "David Eisenstat", "link": "https://stackoverflow.com/users/2144669/david-eisenstat"}, "reply_to_user": {"reputation": 8211, "user_id": 1850923, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f4c516ea2a612cdca29a5b48e9805cd9?s=128&d=identicon&r=PG", "display_name": "Lin Ma", "link": "https://stackoverflow.com/users/1850923/lin-ma"}, "edited": false, "score": 1, "creation_date": 1447293815, "post_id": 33661652, "comment_id": 55099873, "body": "@LinMa Right -- without that <code>x</code> to throw away, we put <code>y</code> in the second counter."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 8211, "user_id": 1850923, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f4c516ea2a612cdca29a5b48e9805cd9?s=128&d=identicon&r=PG", "display_name": "Lin Ma", "link": "https://stackoverflow.com/users/1850923/lin-ma"}, "edited": false, "score": 1, "creation_date": 1447294728, "post_id": 33661652, "comment_id": 55100107, "body": "@linma: The proof in this answer is the induction step of a proof by induction (on the number of algorithm steps taken) that a plurality element must be in {candidate1, candidate2} when the list is completely read. Each step of the algorithm maintains the plurality property, and the algorithm terminates with the remaining list containing precisely count1 instances of candidate1 and count2  instances of candidate2. Since plurality elements are preserved by each algorithm step, if there are plurality elements, they must be in this final list."}, {"owner": {"reputation": 8211, "user_id": 1850923, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f4c516ea2a612cdca29a5b48e9805cd9?s=128&d=identicon&r=PG", "display_name": "Lin Ma", "link": "https://stackoverflow.com/users/1850923/lin-ma"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1447295000, "post_id": 33661652, "comment_id": 55100191, "body": "@rici, great comments and if you could elaborate a bit more what means &quot;maintains the plurality property&quot;, it will be great. What property do you mean specifically?"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 8211, "user_id": 1850923, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f4c516ea2a612cdca29a5b48e9805cd9?s=128&d=identicon&r=PG", "display_name": "Lin Ma", "link": "https://stackoverflow.com/users/1850923/lin-ma"}, "edited": false, "score": 1, "creation_date": 1447295408, "post_id": 33661652, "comment_id": 55100305, "body": "@linma: the property that the count for the value is more than n/3. David&#39;s very clever proof shows that a deletion step preserves this property. It&#39;s clear that a non-deletion step preserves the property because the list is unchanged. So every step of the algorithm preserves the property. So any plurality element (of which there can be at most 2) must survive the entire algorithm until the end. It may appear and disappear from the candidate variables as the algorithm proceeds, but it must be there at the end."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 8211, "user_id": 1850923, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f4c516ea2a612cdca29a5b48e9805cd9?s=128&d=identicon&r=PG", "display_name": "Lin Ma", "link": "https://stackoverflow.com/users/1850923/lin-ma"}, "edited": false, "score": 1, "creation_date": 1447295701, "post_id": 33661652, "comment_id": 55100394, "body": "@LinMa: The thing I find interesting about this particular proof is that it is an example of an induction proof which is not obvious, or even necessarily intuitive. Most of the induction proofs used as examples in elementary math classes are so intuitive that they are boring. But this one is beautifully surprising. (It can be extended to finding elements whose counts are more than n/k for any value of k, using 2k auxiliary memory locations.)"}, {"owner": {"reputation": 8211, "user_id": 1850923, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f4c516ea2a612cdca29a5b48e9805cd9?s=128&d=identicon&r=PG", "display_name": "Lin Ma", "link": "https://stackoverflow.com/users/1850923/lin-ma"}, "edited": false, "score": 0, "creation_date": 1447315903, "post_id": 33661652, "comment_id": 55106751, "body": "Thanks @DavidEisenstat for the help, mark as answered. :)"}, {"owner": {"reputation": 8211, "user_id": 1850923, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f4c516ea2a612cdca29a5b48e9805cd9?s=128&d=identicon&r=PG", "display_name": "Lin Ma", "link": "https://stackoverflow.com/users/1850923/lin-ma"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1447316029, "post_id": 33661652, "comment_id": 55106825, "body": "@rici, appreciate for the great summary. :)"}], "tags": [], "owner": {"reputation": 51837, "user_id": 2144669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e7393f439028063515255b63ed94cfd?s=128&d=identicon&r=PG", "display_name": "David Eisenstat", "link": "https://stackoverflow.com/users/2144669/david-eisenstat"}, "is_accepted": true, "score": 3, "last_activity_date": 1447283766, "creation_date": 1447283766, "answer_id": 33661652, "question_id": 33661235, "link": "https://stackoverflow.com/questions/33661235/find-major-elements-appears-more-than-n-3-times/33661652#33661652", "title": "find major elements appears more than n/3 times", "body": "<p>Conceptually, we repeatedly apply a reduction operation to the list that involves deleting three pairwise distinct items. This particular code does reductions online, so that the reduced list so far can be described by two different elements and their corresponding counts (because if there were a third element distinct from the other two, then we could reduce). At the end, we consider at most two elements for occurring more than n/3 times.</p>\n\n<p>The interesting part of the correctness proof is a lemma that, whenever we perform this reduction operation, any element that occurred more n/3 times in the old list occurs more than n'/3 times in the new list, where n is the length of the old list and n' = n-3 is the length of the new list. This ensures by induction that the final list contains all elements occurring more than n/3 times in the initial list (but of course the final list contains only two distinct elements).</p>\n\n<p>The proof of the lemma is that, if an item occurs k times out of n in the old list, then at worst it occurs k-1 times out of n-3 in the new list, and if k/n > 1/3, then</p>\n\n<pre><code>              (k-1) n\n(k-1)/(n-3) = -------\n              (n-3) n\n\n              k (n-3) + 3 k - n\n            = -----------------\n                   (n-3) n\n\n                      (k/n - 1/3)\n            = k/n + 3 -----------\n                          n-3\n\n            &gt; 1/3.\n</code></pre>\n"}], "owner": {"reputation": 8211, "user_id": 1850923, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f4c516ea2a612cdca29a5b48e9805cd9?s=128&d=identicon&r=PG", "display_name": "Lin Ma", "link": "https://stackoverflow.com/users/1850923/lin-ma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 706, "favorite_count": 2, "accepted_answer_id": 33661652, "answer_count": 1, "score": 1, "last_activity_date": 1447283766, "creation_date": 1447281721, "question_id": 33661235, "link": "https://stackoverflow.com/questions/33661235/find-major-elements-appears-more-than-n-3-times", "title": "find major elements appears more than n/3 times", "body": "<p>Working on below algorithm puzzle and debugging below solution works, for a few test cases. My confusion and question is, how could we always guarantee the count for an elements appears more than n/3 times have a positive count? There are another 2n/3 elements which could make it count negative? But I tried and it always work in my samples. If anyone could help to clarify, it will be great.</p>\n\n<p>Here are the problem statement and my code/test cases,</p>\n\n<p>Given an integer array of size n, find all elements that appear more than \u230a n/3 \u230b times. The algorithm should run in linear time and in O(1) space.</p>\n\n<pre><code>def majorityElement(nums):\n    if not nums:\n        return []\n    count1, count2, candidate1, candidate2 = 0, 0, 0, 0\n    for n in nums:\n        if n == candidate1:\n            count1 += 1\n        elif n == candidate2:\n            count2 += 1\n        elif count1 == 0:\n            candidate1, count1 = n, 1\n        elif count2 == 0:\n            candidate2, count2 = n, 1\n        else:\n            count1, count2 = count1 - 1, count2 - 1\n    return [n for n in (candidate1, candidate2) if nums.count(n) &gt; len(nums) // 3]\n\nif __name__ == \"__main__\":\n\n    # print majorityElement([1,2,1,3,1,5,6])\n    print majorityElement([2,3,1,2,1,3,1,5,5,1,6])\n</code></pre>\n\n<p>thanks in advance,\nLin</p>\n"}, {"tags": ["python", "string", "command-line"], "comments": [{"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1447281609, "post_id": 33661201, "comment_id": 55096044, "body": "What is <code>cmdline</code>?  It doesn&#39;t appear to be a standard module."}, {"owner": {"reputation": 109, "user_id": 5537753, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/5f518099874adb6cdfc82469a9b141f9?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/5537753/matt"}, "reply_to_user": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1447281716, "post_id": 33661201, "comment_id": 55096085, "body": "Sorry! I added it to my post."}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1447281865, "post_id": 33661201, "comment_id": 55096150, "body": "Have a look at this post: <a href=\"http://stackoverflow.com/questions/28354770/scrapy-pass-arguments-to-cmdline-execute\" title=\"scrapy pass arguments to cmdline execute\">stackoverflow.com/questions/28354770/&hellip;</a>"}, {"owner": {"reputation": 109, "user_id": 5537753, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/5f518099874adb6cdfc82469a9b141f9?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/5537753/matt"}, "reply_to_user": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1447282323, "post_id": 33661201, "comment_id": 55096368, "body": "Thank you! I don&#39;t know how I couldn&#39;t find that post. I appreciate it."}, {"owner": {"reputation": 109, "user_id": 5537753, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/5f518099874adb6cdfc82469a9b141f9?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/5537753/matt"}, "reply_to_user": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1447282349, "post_id": 33661201, "comment_id": 55096375, "body": "<a href=\"http://stackoverflow.com/questions/28354770/scrapy-pass-arguments-to-cmdline-execute\" title=\"scrapy pass arguments to cmdline execute\">stackoverflow.com/questions/28354770/&hellip;</a>"}], "owner": {"reputation": 109, "user_id": 5537753, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/5f518099874adb6cdfc82469a9b141f9?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/5537753/matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1447281699, "creation_date": 1447281524, "last_edit_date": 1447281699, "question_id": 33661201, "link": "https://stackoverflow.com/questions/33661201/how-to-make-python-cmdline-module-recognize-that-the-argument-is-a-string-variab", "title": "How to make python cmdline module recognize that the argument is a String variable?", "body": "<p>So I have the following code:</p>\n\n<pre><code>line = 'scrapy crawl backpage_tester -a start_url=\"' + url + '\" -o ' + output\ncmdline.execute(line)\n</code></pre>\n\n<p>And when I check what it is doing, it is literally running <code>line</code> as the command, when it should run the contents of the line variable. </p>\n\n<p>Does anyone have any experience with this? Thank you!</p>\n\n<p>Module:</p>\n\n<pre><code>from scrapy import cmdline\n</code></pre>\n"}, {"tags": ["python", "flask", "flask-uploads"], "comments": [{"owner": {"reputation": 15081, "user_id": 978961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9562cbc3556ac68f081dfda387a9f4ab?s=128&d=identicon&r=PG", "display_name": "dirn", "link": "https://stackoverflow.com/users/978961/dirn"}, "edited": false, "score": 5, "creation_date": 1447285984, "post_id": 33661115, "comment_id": 55097685, "body": "<code>urllib2</code> was part of the standard library that was removed in Python 3. Flask-Storage isn&#39;t compatible with Python 3. You&#39;ll either need to pick a different library, do it yourself, or use Python 2 instead."}, {"owner": {"reputation": 834, "user_id": 2566613, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e730e18eb31170db79c512bbde1c1b79?s=128&d=identicon&r=PG", "display_name": "blahedo", "link": "https://stackoverflow.com/users/2566613/blahedo"}, "edited": false, "score": 0, "creation_date": 1447344733, "post_id": 33661115, "comment_id": 55125031, "body": "The Flask docs say that &quot;Flask and all of its dependencies support Python 3&quot; ( <a href=\"http://flask.pocoo.org/docs/0.10/python3/\" rel=\"nofollow noreferrer\">flask.pocoo.org/docs/0.10/python3</a> ) Is that not true?  The Python3 version of pip seems perfectly happy to install them all\u2014does the Python3 package database include packages that are Python2 only?"}, {"owner": {"reputation": 9, "user_id": 5469578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e167ef17712dfda49d7f14e900fc1678?s=128&d=identicon&r=PG&f=1", "display_name": "RevvyTheWolf", "link": "https://stackoverflow.com/users/5469578/revvythewolf"}, "edited": false, "score": 0, "creation_date": 1447706487, "post_id": 33661115, "comment_id": 55256847, "body": "Is there another similar library that is compatible with Python 2 that you could recommend?"}, {"owner": {"reputation": 15998, "user_id": 770425, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f87997cd806a0495c0b677f5a7728319?s=128&d=identicon&r=PG", "display_name": "Jeff Widman", "link": "https://stackoverflow.com/users/770425/jeff-widman"}, "edited": false, "score": 0, "creation_date": 1450174796, "post_id": 33661115, "comment_id": 56314508, "body": "FYI: Flask-Uploads is now Python 3 compatible due to this commit: <a href=\"https://github.com/jeffwidman/flask-uploads/commit/231687b9084adde181b26923784a73008b38be8e\" rel=\"nofollow noreferrer\">github.com/jeffwidman/flask-uploads/commit/&hellip;</a> No idea about Flask-Storage"}], "owner": {"reputation": 9, "user_id": 5469578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e167ef17712dfda49d7f14e900fc1678?s=128&d=identicon&r=PG&f=1", "display_name": "RevvyTheWolf", "link": "https://stackoverflow.com/users/5469578/revvythewolf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 286, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1450145841, "creation_date": 1447281139, "last_edit_date": 1450145841, "question_id": 33661115, "link": "https://stackoverflow.com/questions/33661115/dependency-problems-with-flask-uploads-and-urllib2", "title": "Dependency problems with Flask Uploads and urllib2", "body": "<p>I am working on setting up the front end of a database to track theater costumes in Flask. Users need to be able to upload picture of the costumes, and I am attempting to use Flask-Uploads for this. I installed Flask Uploads and Flask Storage using these two commands:</p>\n\n<pre><code>pip install flask-uploads\npip install flask-storage\n</code></pre>\n\n<p>They seem to have installed correctly, but they depend on urllib2, which doesn't work properly. I'm not sure how to resolve these dependency errors from the downloaded apps. The error log is below.</p>\n\n<pre><code>    File \"/srv/http/projects/costumes/costume.wsgi\", line 3, in &lt;module&gt;\n     from costumeServer import app as application\n   File \"/srv/http/projects/costumes/costumeServer.py\", line 6, in &lt;module&gt;\n     from flask.ext.storage import get_default_storage_class\n   File \"/usr/lib/python3.5/site-packages/flask/exthook.py\", line 81, in load_module\n     reraise(exc_type, exc_value, tb.tb_next)\n   File \"/usr/lib/python3.5/site-packages/flask/_compat.py\", line 32, in reraise\n     raise value.with_traceback(tb)\n   File \"/usr/lib/python3.5/site-packages/flask_storage/__init__.py\", line 17, in &lt;module&gt;\n     from ._base import *\n   File \"/usr/lib/python3.5/site-packages/flask_storage/_base.py\", line 13, in &lt;module&gt;\n     import urllib2\n ImportError: No module named 'urllib2'\n</code></pre>\n\n<p>I tried installing urllib2 with </p>\n\n<pre><code>pip install urllib2\n</code></pre>\n\n<p>but that made no difference.</p>\n"}, {"tags": ["python", "apache", "xampp", "cgi"], "comments": [{"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1447281387, "post_id": 33661106, "comment_id": 55095925, "body": "Maybe <code>__name__</code> isn&#39;t <code>__main__</code> when being executed from XAMPP?  Try printing the value of <code>__name__</code>."}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1447282472, "post_id": 33661106, "comment_id": 55096425, "body": "Also your ending tags use the wrong slash.  Use forward slashes, not backslashes."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5552469"}, "reply_to_user": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1447319199, "post_id": 33661106, "comment_id": 55108432, "body": "Thank you very much John, it works now I&#39;ve changed the backslashes!"}], "owner": {"user_type": "does_not_exist", "display_name": "user5552469"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 124, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1447281096, "creation_date": 1447281096, "question_id": 33661106, "link": "https://stackoverflow.com/questions/33661106/why-does-my-python-cgi-code-print-nothing-when-run-in-xampp-apache-server", "title": "Why does my Python CGI code print nothing when run in XAMPP Apache server?", "body": "<p>I am trying to run this simple \"Hello World\" code on an XAMPP Apache server as part of this <a href=\"http://www.pythonschool.net/server-side-scripting/create-your-first-server-side-script/\" rel=\"nofollow\">Python School tutorial</a> on server-side scripting. It throws up no server errors, but all I get is a blank white screen. I have tried this in both Chrome and MS Edge. Is there anything I am overlooking as to why this isn't working or is this an overly complicated way to do this?</p>\n\n<pre><code>#!C:\\python34\\python.exe\nimport cgi\n\ndef htmlTop():\n    print(\"\"\"Content-type: text/html\\n\\n\n        &lt;!DOCTYPE html&gt;\n        &lt;html&gt;\n        &lt;title&gt;My first server-side page&lt;\\title&gt;\n        &lt;body&gt;\"\"\")\n\ndef htmlBottom():\n    print(\"\"\"&lt;\\body&gt;\n        &lt;\\html&gt;\"\"\")\n\nif __name__ == \"__main__\":\n    htmlTop()\n    print(\"Hello World\")\n    htmlBottom()\n</code></pre>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 326, "user_id": 2930529, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/df1c6fbb1bbf5feb5a2ac42dcebf8b80?s=128&d=identicon&r=PG", "display_name": "MindV0rtex", "link": "https://stackoverflow.com/users/2930529/mindv0rtex"}, "edited": false, "score": 0, "creation_date": 1447286936, "post_id": 33661593, "comment_id": 55097959, "body": "In my case <code>b</code> is actually a temporary Series obtained from slicing another  DataFrame (with no MultiIndex). Is there a way to solve this without storing that temporary Series and reindexing it?"}, {"owner": {"reputation": 705380, "user_id": 190597, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1", "display_name": "unutbu", "link": "https://stackoverflow.com/users/190597/unutbu"}, "reply_to_user": {"reputation": 326, "user_id": 2930529, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/df1c6fbb1bbf5feb5a2ac42dcebf8b80?s=128&d=identicon&r=PG", "display_name": "MindV0rtex", "link": "https://stackoverflow.com/users/2930529/mindv0rtex"}, "edited": false, "score": 0, "creation_date": 1447291753, "post_id": 33661593, "comment_id": 55099326, "body": "I think the easiest workaround is the one you showed -- assign a non-indexed object: <code>a.loc[1,&#39;b&#39;] = b.values</code>."}], "tags": [], "owner": {"reputation": 705380, "user_id": 190597, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1", "display_name": "unutbu", "link": "https://stackoverflow.com/users/190597/unutbu"}, "is_accepted": true, "score": 4, "last_activity_date": 1447291951, "last_edit_date": 1447291951, "creation_date": 1447283501, "answer_id": 33661593, "question_id": 33661091, "link": "https://stackoverflow.com/questions/33661091/pandas-dataframe-contains-nans-after-write-operation/33661593#33661593", "title": "Pandas DataFrame contains NaNs after write operation", "body": "<p>When you write</p>\n\n<pre><code>a.loc[1,'b'] = b\n</code></pre>\n\n<p>and <code>b</code> is a Series, the index of <code>b</code> has to exactly match the indexer generated by <code>a.loc[1,'b']</code> in order for the values in <code>b</code> to be copied into <code>a</code>. It turns out, however, that when <code>a.columns</code> is a <code>MultiIndex</code>, <a href=\"https://github.com/pydata/pandas/blob/master/pandas/core/indexing.py#L594\" rel=\"nofollow\">the indexer for <code>a.loc[1,'b']</code></a> is:</p>\n\n<pre><code>(Pdb) p new_ix\nIndex([(u'b', 0), (u'b', 1)], dtype='object')\n</code></pre>\n\n<p>whereas the index for <code>b</code> is </p>\n\n<pre><code>(Pdb) p ser.index\nInt64Index([0, 1], dtype='int64')\n</code></pre>\n\n<p>They don't match, and therefore</p>\n\n<pre><code>(Pdb) p ser.index.equals(new_ix)\nFalse\n</code></pre>\n\n<p>Since the values aren't aligned, <a href=\"https://github.com/pydata/pandas/blob/master/pandas/core/indexing.py#L602\" rel=\"nofollow\">the code branch you fall into</a> assigns</p>\n\n<pre><code>(Pdb) p ser.reindex(new_ix).values\narray([ nan,  nan])\n</code></pre>\n\n<p>I found this by adding <code>pdb.set_trace()</code> to your code:</p>\n\n<pre><code>import pandas as pd\n\ncolumns = pd.MultiIndex.from_product([['a', 'b', 'c'], range(2)])\na = pd.DataFrame(0.0, index=range(3),columns=columns, dtype='float')\nb = pd.Series([13.0, 15.0])\nimport pdb\npdb.set_trace()\na.loc[1,'b'] = b  # this line results in NaNs\na.loc[1,'b'] = b.values  # this yields correct behavior\n</code></pre>\n\n<p>and simply stepping through it at a \"high level\" and finding <a href=\"https://github.com/pydata/pandas/blob/master/pandas/core/indexing.py#L350\" rel=\"nofollow\">the problem occurs in</a></p>\n\n<pre><code>        if isinstance(value, ABCSeries):\n            value = self._align_series(indexer, value)\n</code></pre>\n\n<p>and then stepping through it again (with a finer-toothed comb) with a break point starting at the line calling <code>self._align_series(indexer, value)</code>.</p>\n\n<hr>\n\n<p>Notice that if you change the index of <code>b</code> to also be a MultiIndex:</p>\n\n<pre><code>b = pd.Series([13.0, 15.0], index=pd.MultiIndex.from_product([['b'], [0,1]]))\n</code></pre>\n\n<p>then </p>\n\n<pre><code>import pandas as pd\n\ncolumns = pd.MultiIndex.from_product([['a', 'b', 'c'], range(2)])\na = pd.DataFrame(0.0, index=range(3),columns=columns, dtype='float')\nb = pd.Series([13.0, 15.0], index=pd.MultiIndex.from_product([['b'], [0,1]]))\na.loc[1,'b'] = b  \nprint(a)\n</code></pre>\n\n<p>yields</p>\n\n<pre><code>   a      b      c   \n   0  1   0   1  0  1\n0  0  0   0   0  0  0\n1  0  0  13  15  0  0\n2  0  0   0   0  0  0\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user707650"}, "is_accepted": false, "score": 1, "last_activity_date": 1447283827, "creation_date": 1447283827, "answer_id": 33661666, "question_id": 33661091, "link": "https://stackoverflow.com/questions/33661091/pandas-dataframe-contains-nans-after-write-operation/33661666#33661666", "title": "Pandas DataFrame contains NaNs after write operation", "body": "<p>You can directly assign <code>b</code> to a column in <code>a</code>, because <code>b</code> is not a multiindex Series. Changing <code>b</code> will make it work:</p>\n\n<pre><code>columns = pd.MultiIndex.from_product([['a', 'b', 'c'], range(2)])\na = pd.DataFrame(0.0, index=range(3),columns=columns, dtype='float')\nindex = pd.MultiIndex.from_product([['b'], range(2)])\nb = pd.Series([13.0, 15.0], index=index)\n\na.loc[1,'b'] = b\nprint(a)\n</code></pre>\n\n<p>yields</p>\n\n<pre><code>   a      b      c\n   0  1   0   1  0  1\n0  0  0   0   0  0  0\n1  0  0  13  15  0  0\n2  0  0   0   0  0  0\n</code></pre>\n\n<hr>\n\n<p>The other case, where you use <code>b.values</code>, likely works because Pandas takes the values in <code>b</code> at face value, and tries to do the most logical assignment for the supplied values.</p>\n"}], "owner": {"reputation": 326, "user_id": 2930529, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/df1c6fbb1bbf5feb5a2ac42dcebf8b80?s=128&d=identicon&r=PG", "display_name": "MindV0rtex", "link": "https://stackoverflow.com/users/2930529/mindv0rtex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 1, "accepted_answer_id": 33661593, "answer_count": 2, "score": 7, "last_activity_date": 1447291951, "creation_date": 1447281014, "question_id": 33661091, "link": "https://stackoverflow.com/questions/33661091/pandas-dataframe-contains-nans-after-write-operation", "title": "Pandas DataFrame contains NaNs after write operation", "body": "<p>Here is a minimum working example of my problem:</p>\n\n<pre><code>import pandas as pd\n\ncolumns = pd.MultiIndex.from_product([['a', 'b', 'c'], range(2)])\na = pd.DataFrame(0.0, index=range(3),columns=columns, dtype='float')\nb = pd.Series([13.0, 15.0])\n\na.loc[1,'b'] = b  # this line results in NaNs\na.loc[1,'b'] = b.values  # this yields correct behavior\n</code></pre>\n\n<p>Why is the first assignment incorrect? Both Series seem to have the same index, so I assume it should produce the correct result.</p>\n\n<p>I am using pandas 0.17.0.</p>\n"}, {"tags": ["python", "matplotlib"], "comments": [{"owner": {"reputation": 4730, "user_id": 4524746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O45fL.jpg?s=128&g=1", "display_name": "jonchar", "link": "https://stackoverflow.com/users/4524746/jonchar"}, "edited": false, "score": 1, "creation_date": 1447334700, "post_id": 33661080, "comment_id": 55117621, "body": "Instead of adding the text at the exact x values (<code>ind</code> in your code above, try adding them at something like <code>ind - 0.1</code> with <code>ha</code> kwarg set to <code>right</code> as suggested by ali_m. That way you can directly control the distance between your plot marker and the text you display."}], "answers": [{"comments": [{"owner": {"reputation": 2466, "user_id": 4392566, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh6.googleusercontent.com/-ImHaDyD-cAI/AAAAAAAAAAI/AAAAAAAAFiY/uaHSvuoPAp4/photo.jpg?sz=128", "display_name": "Dance Party", "link": "https://stackoverflow.com/users/4392566/dance-party"}, "edited": false, "score": 0, "creation_date": 1447338469, "post_id": 33662900, "comment_id": 55120204, "body": "Thank you both for the most helpful responses. By the way, is one method better than the other (for a, b in zip... vs. for i, text in enumerate) for what I&#39;m trying to do?"}, {"owner": {"reputation": 62045, "user_id": 1461210, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fa93b9461ed24899945403cae69e02ee?s=128&d=identicon&r=PG", "display_name": "ali_m", "link": "https://stackoverflow.com/users/1461210/ali-m"}, "reply_to_user": {"reputation": 2466, "user_id": 4392566, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh6.googleusercontent.com/-ImHaDyD-cAI/AAAAAAAAAAI/AAAAAAAAFiY/uaHSvuoPAp4/photo.jpg?sz=128", "display_name": "Dance Party", "link": "https://stackoverflow.com/users/4392566/dance-party"}, "edited": false, "score": 0, "creation_date": 1447344261, "post_id": 33662900, "comment_id": 55124706, "body": "In this case your <code>enumerate</code> version can be simplified to <code>for a, b in enumerate(y2): ... ax.text(a, b, str(b))</code>, since <code>b</code> will yield consecutive elements from <code>y2</code> and  <code>a</code> will be their corresponding indices. In general I think it&#39;s more Pythonic to use <code>zip</code> to iterate over multiple sequences rather than using explicit indexing, although this is mostly a stylistic preference."}, {"owner": {"reputation": 62045, "user_id": 1461210, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fa93b9461ed24899945403cae69e02ee?s=128&d=identicon&r=PG", "display_name": "ali_m", "link": "https://stackoverflow.com/users/1461210/ali-m"}, "reply_to_user": {"reputation": 2466, "user_id": 4392566, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh6.googleusercontent.com/-ImHaDyD-cAI/AAAAAAAAAAI/AAAAAAAAFiY/uaHSvuoPAp4/photo.jpg?sz=128", "display_name": "Dance Party", "link": "https://stackoverflow.com/users/4392566/dance-party"}, "edited": false, "score": 0, "creation_date": 1447344436, "post_id": 33662900, "comment_id": 55124820, "body": "<code>annotate</code> offers much more power and flexibility in terms of the style and placement than <code>text</code>, which comes at the price of greater complexity (I always end up having to check the docs in order to remember how to use it...)"}], "tags": [], "owner": {"reputation": 62045, "user_id": 1461210, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fa93b9461ed24899945403cae69e02ee?s=128&d=identicon&r=PG", "display_name": "ali_m", "link": "https://stackoverflow.com/users/1461210/ali-m"}, "is_accepted": true, "score": 8, "last_activity_date": 1447291306, "creation_date": 1447291306, "answer_id": 33662900, "question_id": 33661080, "link": "https://stackoverflow.com/questions/33661080/python-matplotlib-plot-text-will-not-align-left/33662900#33662900", "title": "Python Matplotlib: plot text will not align left", "body": "<p>The <code>ha</code> and <code>va</code> arguments specify which edges of the text bounding box will be aligned to the specified x,y coordinates. If you want your text to appear to the <em>left</em> of your dot, you need to align it according to the <em>right hand</em> edge of the bounding box:</p>\n\n<pre><code>from matplotlib import pyplot as  plt\n\nfig, ax = plt.subplots(1, 1)\nax.hold(True)\nax.plot(0, 0, '+', ms=60)\nax.text(0, 0, 'align by top right corner', ha='right', va='top', fontsize=22)\nax.text(0, 0, 'align by bottom left corner', ha='left', va='bottom', fontsize=22)\nax.set_axis_off()\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/mrWHl.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/mrWHl.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 2466, "user_id": 4392566, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh6.googleusercontent.com/-ImHaDyD-cAI/AAAAAAAAAAI/AAAAAAAAFiY/uaHSvuoPAp4/photo.jpg?sz=128", "display_name": "Dance Party", "link": "https://stackoverflow.com/users/4392566/dance-party"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4186, "favorite_count": 0, "accepted_answer_id": 33662900, "answer_count": 1, "score": 2, "last_activity_date": 1447291306, "creation_date": 1447280989, "question_id": 33661080, "link": "https://stackoverflow.com/questions/33661080/python-matplotlib-plot-text-will-not-align-left", "title": "Python Matplotlib: plot text will not align left", "body": "<p>I am trying to get the values for red dots (for values of 'y2') to plot to the left of the dots. I'm using ha='left' but to no avail. I tried the following two aproaches:</p>\n\n<pre><code>for a,b in zip(ind, y2):\n    plt.text(a, b, str(b), fontsize=14, color='black', va='center', ha='left)\n\n#OR:\nfor i, text in enumerate(y2):\n    ax.annotate(str(text), (ind[i],y2[i]), ha='left')\n</code></pre>\n\n<p>Here is the code in its entirety:</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\nfrom matplotlib import pyplot as plt\n%matplotlib inline\ndf0=pd.read_csv('sample1.csv')\n\nimport matplotlib.pyplot as plt\n\n# You typically want your plot to be ~1.33x wider than tall.\n# Common sizes: (10, 7.5) and (12, 9)\nfig, ax = plt.subplots(1, 1, figsize=(12, 9))\nplt.xticks(ind, x_axis, fontsize=14)\n#Set y-axis font size\nplt.yticks(fontsize=12)\nx_axis = ['a','b','c']\ny_axis = [2,8,10]\n\ny2 = [3, 5, 9.5]\n\n# Remove the plot frame lines. They are unnecessary here.\nax.spines['top'].set_visible(False)\nax.spines['bottom'].set_visible(False)\nax.spines['right'].set_visible(False)\nax.spines['left'].set_visible(False)\n\n#0 = 'a', 1 = 'b, 2 = 'c'\nind = np.arange(len(x_axis))\n\n\n#remove axis ticks save for left (y-axis):\nplt.tick_params(\n    axis='x',          # changes apply to the x-axis\n    which='both',      # both major and minor ticks are affected\n    bottom='off',      # ticks along the bottom edge are off\n    top='off')         # ticks along the top edge are off\n\n\nplt.tick_params(\n    axis='y',          # changes apply to the x-axis\n    which='both',      # both major and minor ticks are affected\n    right='off')\n\nplt.title('Super Awesome Title Goes Here\\n'\n          'and Is Continued Here', fontsize=18, va='center')\n#Plot dots, cyan circles, no edges, transparency = 0.7 (1 is opaque))\n# larger circles\nplt.plot(ind, y_axis, 'co', markeredgecolor='none', alpha=1, markersize=40)\n#plt.axis(0,10,0,3)\n\nplt.plot(ind, y2, 'ro', markeredgecolor='none', alpha=.7, markersize=40)\n\n#a and b are \"where\" to plot the label, str(b) is what to plot for the label\n#add spaces to put label to the right\nfor a,b in zip(ind, y_axis):\n    plt.text(a, b, \"     \"+str(b), fontsize=14, color='black', va='center')\n\nfor a,b in zip(ind, y2):\n    plt.text(a, b, str(b), fontsize=14, color='black', va='center', ha='left')\n\n    #Cell padding between categories\nplt.xlim([min(ind) - 0.25, max(ind) + 0.25])\nplt.ylim([0, max(y_axis) + 2])\nplt.show()\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 30101, "user_id": 783412, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/895a112c66d93cefcd06d2cf371219e6?s=128&d=identicon&r=PG", "display_name": "hd1", "link": "https://stackoverflow.com/users/783412/hd1"}, "edited": false, "score": 0, "creation_date": 1447281203, "post_id": 33661075, "comment_id": 55095832, "body": "What does infofile look like right now and what should it look like when sorted?"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5552493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d19f89e6612060050b03a84e09fa599c?s=128&d=identicon&r=PG&f=1", "display_name": "Delta", "link": "https://stackoverflow.com/users/5552493/delta"}, "edited": false, "score": 0, "creation_date": 1447348628, "post_id": 33661141, "comment_id": 55127730, "body": "Hi, I tried using your line to write the files back, however shell returns a type error, stating &quot;TypeError: write() argument must be str, not list&quot;. (Line 43). If you could help me with this, it would be greatly appreciated."}], "tags": [], "owner": {"reputation": 2069, "user_id": 254954, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eec780d8c6032413b39ba779b5359d8e?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/254954/sebastian"}, "is_accepted": false, "score": 0, "last_activity_date": 1447358157, "last_edit_date": 1447358157, "creation_date": 1447281261, "answer_id": 33661141, "question_id": 33661075, "link": "https://stackoverflow.com/questions/33661075/sorting-contents-of-a-text-file-alphabetically-in-python/33661141#33661141", "title": "Sorting contents of a text file alphabetically in Python", "body": "<p>You're forgetting to write the sorted lines back to the file:</p>\n\n<pre><code>file = open(infofile)\nlines = file.readlines()\nlines.sort()\nfor line in lines:\n    file.write(line)   # &lt;-- Write the lines back\nfile.close()\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5552493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d19f89e6612060050b03a84e09fa599c?s=128&d=identicon&r=PG&f=1", "display_name": "Delta", "link": "https://stackoverflow.com/users/5552493/delta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 5298, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1447358157, "creation_date": 1447280966, "question_id": 33661075, "link": "https://stackoverflow.com/questions/33661075/sorting-contents-of-a-text-file-alphabetically-in-python", "title": "Sorting contents of a text file alphabetically in Python", "body": "<p>I would like to alphabetically sort the file inside the variable 'infofile'. My current code to do this does not work, with the file remaining untouched. The program itself is a basic questionnaire, created to experiment reading and writing to files.</p>\n\n<pre><code>import time\nimport sys\n\nname = input(\"What is your first name?\").upper()\n\nage = input(\"How old are you?\")\nwhile not age.isdigit():\n    print(\"Please Only Enter Numbers.\")\n    age = input(\"How old are you?\")\n\nif int(age) &lt;16:\n    infofile = \"DatabaseMinor.txt\"\nelif int(age) &gt;15 and int(age) &lt;22:\n    infofile = \"DatabaseYoungAdult.txt\"\nelif int(age) &gt;21 and int(age) &lt;65:\n    infofile = \"DatabaseAdult.txt\"\nelse:\n    infofile = \"DatabaseSenior.txt\"\n\ngender = input(\"Are you [M]ale or [F]emale?\").upper()\nwhile gender not in {'M', 'F'}:\n    print(\"Please Only Enter M Or F.\")\n    gender = str(input(\"Are you [M]ale or [F]emale?\")).upper()\n\nlocation = input(\"What country are you from? (UK)\").upper()\nwhile location not in {'ENGLAND', 'SCOTLAND', 'WALES', 'NORTHERN IRELAND'}:\n      print(\"Please Only Enter A Valid Country Within The UK.\")\n      location = input(\"What country are you from?\").upper()\n\n#Compilation of inputs into a single line format\nuserinfo = name + \" \" + str(age) + \" \" + gender + \" \" + location + \" \" + (time.strftime(\"%d/%m/%Y\")) + \" \" + (time.strftime(\"%H:%M:%S\")) + '\\n'\n\n#Opening and writing value of the userinfo variable to the appropriate text file\nfile = open(infofile, 'a')\nfile.write(userinfo)\nfile.close()\n\nfile = open(infofile)\nlines = file.readlines()\nlines.sort()\nfile.close()\n</code></pre>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["python", "django", "entity-attribute-value"], "answers": [{"comments": [{"owner": {"reputation": 671, "user_id": 1537744, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2ae6c9bc9e51e323d21fc31f52f75183?s=128&d=identicon&r=PG", "display_name": "b3rt0", "link": "https://stackoverflow.com/users/1537744/b3rt0"}, "edited": false, "score": 0, "creation_date": 1447310735, "post_id": 33661318, "comment_id": 55104644, "body": "Thanks. I will take that into account on my modeling. Does the approach you propose have any drawbacks with respect to performance?"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user764357"}, "is_accepted": true, "score": 2, "last_activity_date": 1447282085, "creation_date": 1447282085, "answer_id": 33661318, "question_id": 33660936, "link": "https://stackoverflow.com/questions/33660936/django-model-with-varying-fields-entity-attribute-value-model/33661318#33661318", "title": "Django: Model with varying fields (Entity-Attribute-Value model)", "body": "<p><strong>Django is an excellent framework, but it is still just an abstraction over a relation database.</strong></p>\n\n<p>What you are asking isn't efficiently possible in a relational database, so it will be tough to do in Django. Primarily, because at some point your code will need to be converted to tables.</p>\n\n<p>There are basically 2 ways you can do this:</p>\n\n<ol>\n<li><p>A <code>product</code> class with a <code>ManyToMany</code> relation to an attribute table:</p>\n\n<pre><code>class Product(models.Model):\n    name = models.CharField(max_length=20)\n    stock = models.IntegerField()\n    price = models.FloatField()\n    product_type = models.CharField(max_length=20)  eg. Monitor, desktop, etc...\n    attributes = models.ManyToManyField(ProductAttribute)\nclass ProductAttribute(models.Model):\n    property = models.CharField(max_length=20) # eg. \"resolution\"\n    value = models.CharField(max_length=20) # eg. \"1080p\"\n</code></pre>\n\n<p>But, your logic around certain classes of objects having certain properties will be lost.</p></li>\n<li><p>Use inheritance. Django is just Python, and inheritance is certainly possible - <a href=\"https://docs.djangoproject.com/en/1.8/topics/db/models/#model-inheritance\" rel=\"nofollow\">in fact its encouraged</a>:</p>\n\n<pre><code>class Product(models.Model):\n    name = models.CharField(max_length=20)\n    stock = models.IntegerField()\n    price = models.FloatField()\n\nclass Desktop(Product):\n    memory_size = models.CharField(max_length=20)\n    storage_size = models.CharField(max_length=20)\nclass Monitor(Product):\n    resolution = models.CharField(max_length=20)\n    screen_size = models.CharField(max_length=20)\n</code></pre>\n\n<p>Then you can do queries on all products - <code>Products.objects.all()</code> - or just Monitors - Monitor.objects.all()` - and so on. This hard codes the possible products in code, so a new product type requires a database migration, but it also gives you the ability to embed your business logic in the models themselves.</p></li>\n</ol>\n\n<p>There are trade-offs to both these approaches which you need to decide, so picking is up to you.</p>\n"}], "owner": {"reputation": 671, "user_id": 1537744, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2ae6c9bc9e51e323d21fc31f52f75183?s=128&d=identicon&r=PG", "display_name": "b3rt0", "link": "https://stackoverflow.com/users/1537744/b3rt0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 902, "favorite_count": 1, "accepted_answer_id": 33661318, "answer_count": 1, "score": 2, "last_activity_date": 1447282085, "creation_date": 1447280367, "last_edit_date": 1495535562, "question_id": 33660936, "link": "https://stackoverflow.com/questions/33660936/django-model-with-varying-fields-entity-attribute-value-model", "title": "Django: Model with varying fields (Entity-Attribute-Value model)", "body": "<p>I have the following Django model to store sparse product data in a relational database. I apologize myself for any wrong relationship in the code below (ForeignKey and/or ManyToMany might be wrongly placed, I am just playing around with Django for now).</p>\n\n<pre><code>class ProdCategory(models.Model):\n    category = models.CharField(max_length=32, primary_key=True)\n\nclass ProdFields(models.Model):\n    categoryid = models.ForeignKey(ProdCategory)\n    field = models.CharField(max_length=32)\n\nclass Product(models.Model):\n    name = models.CharField(max_length=20)\n    stock = models.IntegerField()\n    price = models.FloatField()\n\nclass ProdData(models.Model):\n    prodid = models.ManyToManyField(Product)\n    fieldid = models.ManyToManyField(ProdFields)\n    value = models.CharField(max_length=128)\n</code></pre>\n\n<p>The idea is to store the <em>name</em>, <em>stock</em> and <em>price</em> for each product in one table and the information for each product in the (<strong>id</strong>, <strong>value</strong>) format in another table.</p>\n\n<p>I do know, a priori, the fields that each product category should have. For instance, a product of type <strong>Desktop</strong> should have, among others, <em>memory size</em> and <em>storage size</em> as fields, whereas another product of category <strong>Monitor</strong> should have <em>resolution</em> and <em>screen size</em> as fields.</p>\n\n<p>My question is: How do I guarantee, in Django, that each product contains only the fields for its category? More precisely, when specifying a product of category <strong>Monitor</strong>, how to assure that only <em>resolution</em> and <em>screen size</em> are fields in the ProdData table?</p>\n\n<p>I found a similar question <a href=\"https://stackoverflow.com/questions/3610327/django-advice-on-designing-a-model-with-varying-fields\">Django: Advice on designing a model with varying fields</a>, but there was no answer on how to assure the above.</p>\n\n<p>Thank you in advance.</p>\n"}, {"tags": ["python", "pandas", "plot", "histogram"], "answers": [{"tags": [], "owner": {"reputation": 524, "user_id": 1489602, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6e940c16d1be5afc5d6a9be9818d3eb6?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamin Horowitz", "link": "https://stackoverflow.com/users/1489602/benjamin-horowitz"}, "is_accepted": true, "score": 0, "last_activity_date": 1447286998, "creation_date": 1447286998, "answer_id": 33662228, "question_id": 33660905, "link": "https://stackoverflow.com/questions/33660905/stacked-histograms-of-grouped-data-in-pandas/33662228#33662228", "title": "Stacked Histograms of Grouped Data In pandas", "body": "<p>So, I think I figured this out. First one needs to stack the data using; .unstack(level=-1)</p>\n\n<p>This will turn it into an n by m array-like structure where n is number of X entries and m is the number of Y entries. From this form you can follow the outline given here:\n<a href=\"http://pandas.pydata.org/pandas-docs/stable/visualization.html\" rel=\"nofollow\">http://pandas.pydata.org/pandas-docs/stable/visualization.html</a></p>\n\n<p>So in total the command will be:</p>\n\n<pre><code>df.groupby([\"X\",\"Y\"]).size().unstack(level=-1).plot(kind='bar',stacked=True)\n</code></pre>\n\n<p>Kinda unwieldy looking though!</p>\n"}], "owner": {"reputation": 524, "user_id": 1489602, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6e940c16d1be5afc5d6a9be9818d3eb6?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamin Horowitz", "link": "https://stackoverflow.com/users/1489602/benjamin-horowitz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "accepted_answer_id": 33662228, "answer_count": 1, "score": 0, "last_activity_date": 1447286998, "creation_date": 1447280244, "question_id": 33660905, "link": "https://stackoverflow.com/questions/33660905/stacked-histograms-of-grouped-data-in-pandas", "title": "Stacked Histograms of Grouped Data In pandas", "body": "<p>Say that I have a dataframe (df)with lots of values, including two columns, X and Y. I want to create a stacked histogram where each bin is a categorical value in X (say A and B), and inside each bin are stacks by values in Y (say a,b,c,...).</p>\n\n<p>I can run df.groupby([\"X\",\"Y\"]).size() to get output like below, but how can I make the stacked histogram from this?</p>\n\n<pre><code>A      a      14\n       b      41\n       c       4\n       d       2\n       e       2\n       f      15\n       g       1\n       h       3\nB      a      18\n       b     37\n       c       1\n       d       3\n       e       1\n       f      17\n       g       2\n</code></pre>\n"}, {"tags": ["python", "psycopg2"], "comments": [{"owner": {"reputation": 11698, "user_id": 166247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50c5bd086b49b0b66cf9089d6f7e4d41?s=128&d=identicon&r=PG", "display_name": "Ashalynd", "link": "https://stackoverflow.com/users/166247/ashalynd"}, "edited": false, "score": 0, "creation_date": 1447280658, "post_id": 33660871, "comment_id": 55095545, "body": "<a href=\"http://stackoverflow.com/questions/13793399/passing-table-name-as-a-parameter-in-psycopg2\" title=\"passing table name as a parameter in psycopg2\">stackoverflow.com/questions/13793399/&hellip;</a>"}, {"owner": {"reputation": 784, "user_id": 1664323, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/3d5c3e09fc76ddd81b066c2a558331a2?s=128&d=identicon&r=PG", "display_name": "mgcdanny", "link": "https://stackoverflow.com/users/1664323/mgcdanny"}, "reply_to_user": {"reputation": 11698, "user_id": 166247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50c5bd086b49b0b66cf9089d6f7e4d41?s=128&d=identicon&r=PG", "display_name": "Ashalynd", "link": "https://stackoverflow.com/users/166247/ashalynd"}, "edited": false, "score": 0, "creation_date": 1447282832, "post_id": 33660871, "comment_id": 55096557, "body": "So, the table name cannot be interpolated: <a href=\"http://stackoverflow.com/questions/13793399/passing-table-name-as-a-parameter-in-psycopg2\" title=\"passing table name as a parameter in psycopg2\">stackoverflow.com/questions/13793399/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 3050, "user_id": 5285608, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-g30toIHtm8A/AAAAAAAAAAI/AAAAAAAAF0M/I4ERmSoVEi0/photo.jpg?sz=128", "display_name": "Antoine Duss&#233;aux", "link": "https://stackoverflow.com/users/5285608/antoine-duss%c3%a9aux"}, "is_accepted": true, "score": 0, "last_activity_date": 1490519376, "creation_date": 1490519376, "answer_id": 43026972, "question_id": 33660871, "link": "https://stackoverflow.com/questions/33660871/psycopg2-interpolate-table-name-in-executemany-statement/43026972#43026972", "title": "psycopg2 interpolate table name in executemany statement", "body": "<p>As stated in the official documentation: \"Only query values should be bound via this method: it shouldn\u2019t be used to merge table or field names to the query. If you need to generate dynamically an SQL query (for instance choosing dynamically a table name) you can use the facilities provided by the psycopg2.sql module.\"</p>\n\n<p>It has the following syntax:</p>\n\n<pre><code>from psycopg2 import sql\ntbl = 'table_name'\nrows = [{'this':x, 'that': x+1} for x in range(10)]\ncur.execute(\n    sql.SQL(\"INSERT INTO {} VALUES (%(this)s, %(that)s);\"\"\"\")\n        .format(sql.Identifier(tbl)), rows)\n</code></pre>\n\n<p>More on <a href=\"http://initd.org/psycopg/docs/sql.html#module-psycopg2.sql\" rel=\"nofollow noreferrer\">http://initd.org/psycopg/docs/sql.html#module-psycopg2.sql</a></p>\n"}], "owner": {"reputation": 784, "user_id": 1664323, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/3d5c3e09fc76ddd81b066c2a558331a2?s=128&d=identicon&r=PG", "display_name": "mgcdanny", "link": "https://stackoverflow.com/users/1664323/mgcdanny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 213, "favorite_count": 0, "accepted_answer_id": 43026972, "answer_count": 1, "score": 4, "last_activity_date": 1490519376, "creation_date": 1447280099, "question_id": 33660871, "link": "https://stackoverflow.com/questions/33660871/psycopg2-interpolate-table-name-in-executemany-statement", "title": "psycopg2 interpolate table name in executemany statement", "body": "<p>I am trying to insert data into a table.  The table is determined in the beging of the program and remains constant throughout.  How do I interpolate the table name in an execute many statement like the one below? </p>\n\n<pre><code>tbl = 'table_name'\nrows = [{'this':x, 'that': x+1} for x in range(10)]\ncur.executemany(\"\"\"INSERT INTO %(tbl)s \n                  VALUES(\n                          %(this)s,\n                          %(that)s\n                  )\"\"\", rows)\n</code></pre>\n"}, {"tags": ["python", "flask", "sqlalchemy", "flask-sqlalchemy", "flask-admin"], "comments": [{"owner": {"reputation": 1617, "user_id": 3602383, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4d6ce634497c018584fe80baa67678ef?s=128&d=identicon&r=PG&f=1", "display_name": "Hans Schindler", "link": "https://stackoverflow.com/users/3602383/hans-schindler"}, "edited": false, "score": 1, "creation_date": 1447459921, "post_id": 33660840, "comment_id": 55179589, "body": "For flexible database interface this feature one must have. A good answer will help many people. Sure the data itself one can structure differently but that&#39;s not the point. Adding bounty. :)"}], "answers": [{"comments": [{"owner": {"reputation": 1617, "user_id": 3602383, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4d6ce634497c018584fe80baa67678ef?s=128&d=identicon&r=PG&f=1", "display_name": "Hans Schindler", "link": "https://stackoverflow.com/users/3602383/hans-schindler"}, "edited": false, "score": 1, "creation_date": 1448334745, "post_id": 33870250, "comment_id": 55533747, "body": "Will be curious to see #1 if you show working code, +1 for the solutions."}, {"owner": {"reputation": 153, "user_id": 5245711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbf92439b750de8bbde2a524d6324485?s=128&d=identicon&r=PG&f=1", "display_name": "droptable", "link": "https://stackoverflow.com/users/5245711/droptable"}, "edited": false, "score": 0, "creation_date": 1448335389, "post_id": 33870250, "comment_id": 55533910, "body": "Thank you very much for your answer. Suffering from bad cold right now but looking forward to trying out your ideas (not sure I fully understand the first). You think something along the lines of your first idea would be the most robust? By the way, if you had to guess, is this the kind of feature that should make it into <code>flask-admin</code> at some stage?"}, {"owner": {"reputation": 1195, "user_id": 1573542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ztWUP.png?s=128&g=1", "display_name": "bperson", "link": "https://stackoverflow.com/users/1573542/bperson"}, "edited": false, "score": 0, "creation_date": 1448357169, "post_id": 33870250, "comment_id": 55542869, "body": "Hans Schindler@: I will try to get something working for 1-. My biggest hurdle right now is to get Flask-Admin to add a <code>data</code> attribute on the <code>option</code> tags.  droptable@: hopefully getting some code for 1 will make it clearer ;) As for the most robust, both are hacks and the 1 has some drawbacks as well: you need to get the list of all methodArgs beforehand so that the JS can have a big enough picture to do the filtering for you. Finally, I am not the maintainer of Flask-Admin, my guess is it&#39;s a very difficult feature to get generically enough right and can still be considered an edge case."}, {"owner": {"reputation": 1195, "user_id": 1573542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ztWUP.png?s=128&g=1", "display_name": "bperson", "link": "https://stackoverflow.com/users/1573542/bperson"}, "edited": false, "score": 0, "creation_date": 1448412272, "post_id": 33870250, "comment_id": 55575835, "body": "I tried the first solution but it ends up being even more cumbersome as you basically have to hijack WTForms more than Flask-Admin. You could get rid of the monkeypatch by using something like: <a href=\"http://flask-admin.readthedocs.org/en/latest/advanced/#wysiwig-text-fields\" rel=\"nofollow noreferrer\">flask-admin.readthedocs.org/en/latest/advanced/&hellip;</a> (which would also enable you to not have that <code>data-mid</code> on every <code>select</code> in your page). <a href=\"http://stackoverflow.com/questions/23023788/add-a-css-class-to-an-option-in-a-wtforms-selectfield\" title=\"add a css class to an option in a wtforms selectfield\">stackoverflow.com/questions/23023788/&hellip;</a> discusses that issue with adding custom attributes to options in a WTForm&#39;s <code>SelectField</code>."}, {"owner": {"reputation": 153, "user_id": 5245711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbf92439b750de8bbde2a524d6324485?s=128&d=identicon&r=PG&f=1", "display_name": "droptable", "link": "https://stackoverflow.com/users/5245711/droptable"}, "edited": false, "score": 0, "creation_date": 1448486472, "post_id": 33870250, "comment_id": 55614123, "body": "Thank you for the terrific effort (accepted), which gets you into the <a href=\"http://stackoverflow.com/questions/tagged/flask-admin?sort=votes&amp;pageSize=50\"><code>flask-admin</code> hall of fame</a> :) This shows that there is no easy way. I hope the <code>flask-admin</code> team adds this much-needed feature at some stage. For the time being I&#39;ll forget about <code>flask-admin</code> and make my interface from the ground up."}], "tags": [], "owner": {"reputation": 1195, "user_id": 1573542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ztWUP.png?s=128&g=1", "display_name": "bperson", "link": "https://stackoverflow.com/users/1573542/bperson"}, "is_accepted": true, "score": 8, "last_activity_date": 1473621013, "last_edit_date": 1473621013, "creation_date": 1448278977, "answer_id": 33870250, "question_id": 33660840, "link": "https://stackoverflow.com/questions/33660840/flask-admin-form-constrain-value-of-field-2-depending-on-value-of-field-1/33870250#33870250", "title": "flask-admin form: Constrain Value of Field 2 depending on Value of Field 1", "body": "<p>I see two ways of tacking this problem:</p>\n\n<p>1- When Flask-Admin generate the form, add <code>data</code> attributes with the <code>mid</code> of each <code>methodArg</code> on each <code>option</code> tag in the <code>methodArg</code> select. Then have some JS code filter the <code>option</code> tags based on the recipe selected.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Here is a tentative try at putting a <code>data-mid</code> attribute on each <code>option</code>:</p>\n\n<pre><code>def monkeypatched_call(self, field, **kwargs):\n    kwargs.setdefault('id', field.id)\n    if self.multiple:\n        kwargs['multiple'] = True\n    html = ['&lt;select %s&gt;' % html_params(name=field.name, **kwargs)]\n    for (val, label, selected), (_, methodarg) in zip(field.iter_choices(), field._get_object_list()):\n        html.append(self.render_option(val, label, selected, **{'data-mid': methodarg.mid}))\n    html.append('&lt;/select&gt;')\n    return HTMLString(''.join(html))\n\nSelect.__call__ = monkeypatched_call\n</code></pre>\n\n<p>The blocker is in the fact that those render calls are triggered from the jinja templates, so you are pretty much stuck updating a widget (<code>Select</code> being the most low-level one in WTForms, and is used as a base for Flask-Admin's <code>Select2Field</code>).</p>\n\n<p>After getting those <code>data-mid</code> on each of your options, you can proceed with just binding an <code>change</code> on your recipe's select and display the methodarg's <code>option</code> that have a matching <code>data-mid</code>. Considering Flask-Admin uses <code>select2</code>, you might have to do some JS tweaking (easiest ugly solution would be to clean up the widget and re-create it for each <code>change</code> event triggered)</p>\n\n<p>Overall, I find this one less robust than the second solution. I kept the monkeypatch to make it clear this should not be used in production imho. (the second solution is slightly less intrusive)</p>\n\n<p>2- Use the supported ajax-completion in Flask-Admin to hack your way into getting the options that you want based on the selected recipe:</p>\n\n<p>First, create a custom AjaxModelLoader that will be responsible for executing the right selection query to the DB:</p>\n\n<pre><code>class MethodArgAjaxModelLoader(sqla.ajax.QueryAjaxModelLoader):\n    def get_list(self, term, offset=0, limit=10):\n        query = self.session.query(self.model).filter_by(mid=term)\n        return query.offset(offset).limit(limit).all()\n\nclass RecipeArgAdmin(sqla.ModelView):\n    column_list = ('recipe', 'methodarg', 'strvalue')\n    form_ajax_refs = {\n        'methodarg': MethodArgAjaxModelLoader('methodarg', db.session, MethodArg, fields=['methodarg'])\n    }\n    column_editable_list = column_list\n</code></pre>\n\n<p>Then, update Flask-Admin's <code>form.js</code> to get the browser to send you the recipe information instead of the <code>methodArg</code> name that needs to be autocompleted. (or you could send both in <code>query</code> and do some arg parsing in your AjaxLoader since Flask-Admin does no parsing whatsoever on <code>query</code>, expecting it to be a string I suppose <a href=\"https://github.com/mrjoes/flask-admin/blob/master/flask_admin/model/base.py#L1577\" rel=\"nofollow\">[0]</a>. That way, you would keep the auto-completion)</p>\n\n<pre><code>data: function(term, page) {\n    return {\n        query: $('#recipe').val(),\n        offset: (page - 1) * 10,\n        limit: 10\n    };\n},\n</code></pre>\n\n<p>This snippet is taken from Flask-Admin's <code>form.js</code> <a href=\"https://github.com/flask-admin/flask-admin/blob/master/flask_admin/static/admin/js/form.js#L20\" rel=\"nofollow\">[1]</a></p>\n\n<p>Obviously, this needs some tweaking and parametrising (because doing such a hacky solution would block you from using other ajax-populated select in the rest of your app admin + the update on <code>form.js</code> directly like that would make upgrading <code>Flask-Admin</code> extremely cumbersome)</p>\n\n<p>Overall, I am unsatisfied with both solutions and this showcase that whenever you want to go out of the tracks of a framework / tool, you can end up in complex dead ends. This might be an interesting feature request / project for someone willing to contribute a <strong>real</strong> solution upstream to Flask-Admin though.</p>\n"}], "owner": {"reputation": 153, "user_id": 5245711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbf92439b750de8bbde2a524d6324485?s=128&d=identicon&r=PG&f=1", "display_name": "droptable", "link": "https://stackoverflow.com/users/5245711/droptable"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3205, "favorite_count": 7, "accepted_answer_id": 33870250, "answer_count": 1, "score": 12, "last_activity_date": 1473621013, "creation_date": 1447279955, "last_edit_date": 1447280607, "question_id": 33660840, "link": "https://stackoverflow.com/questions/33660840/flask-admin-form-constrain-value-of-field-2-depending-on-value-of-field-1", "title": "flask-admin form: Constrain Value of Field 2 depending on Value of Field 1", "body": "<p>One feature I have been struggling to implement in flask-admin is when the user edits a form, to constrain the value of Field 2 once Field 1 has been set.</p>\n\n<p>Let me give a simplified example in words (the actual use case is more convoluted). Then I will show a full gist that implements that example, minus the \"constrain\" feature.</p>\n\n<p>Let's say we have a database that tracks some software \"recipes\" to output reports in various formats. The <code>recipe</code> table of our sample database has two recipes: \"Serious Report\", \"ASCII Art\".</p>\n\n<p>To implement each recipe, we choose one among several methods. The <code>method</code> table of our database has two methods: \"tabulate_results\", \"pretty_print\".</p>\n\n<p>Each method has parameters. The <code>methodarg</code> table has two parameter names for \"tabulate_results\" (\"rows\", \"display_total\") and two parameters for \"pretty_print\" (\"embellishment_character\", \"lines_to_jump\").</p>\n\n<p>Now for each of the recipes (\"Serious Report\", \"ASCII Art\") we need to provide the value of the arguments of their respective methods (\"tabulate_results\", \"pretty_print\").</p>\n\n<p>For each record, the <code>recipearg</code> table lets us select a recipe (that's Field 1, for instance \"Serious Report\") and an argument name (that's Field 2). The problem is that all possible argument names are shown, whereas they need to be constrained based on the value of Field 1. </p>\n\n<p>What filtering / constraining mechanism can we implement such that once we select \"Serious Report\", we know we will be using the \"tabulate_results\" method, so that only the \"rows\" and \"display_total\" arguments are available?</p>\n\n<p>I'm thinking some AJAX wizardry that checks Field 1 and sets a query for Field 2 values, but have no idea how to proceed.</p>\n\n<p>You can see this by playing with the gist: click on the <code>Recipe Arg</code> tab. In the first row (\"Serious Report\"), if you try to edit the \"Methodarg\" value by clicking on it, all four argument names are available, instead of just two.</p>\n\n<pre><code># full gist: please run this\n\nfrom flask import Flask\nfrom flask_admin import Admin\nfrom flask_admin.contrib import sqla\nfrom flask_sqlalchemy import SQLAlchemy\nfrom sqlalchemy import Column, ForeignKey, Integer, String\nfrom sqlalchemy.orm import relationship\n\n# Create application\napp = Flask(__name__)\n\n# Create dummy secrey key so we can use sessions\napp.config['SECRET_KEY'] = '123456790'\n\napp.config['SQLALCHEMY_DATABASE_URI'] = 'sqlite:///a_sample_database.sqlite'\napp.config['SQLALCHEMY_ECHO'] = True\ndb = SQLAlchemy(app)\n\n# Create admin app\nadmin = Admin(app, name=\"Constrain Values\", template_mode='bootstrap3')\n\n# Flask views\n@app.route('/')\ndef index():\n    return '&lt;a href=\"/admin/\"&gt;Click me to get to Admin!&lt;/a&gt;'\n\n\nclass Method(db.Model):\n    __tablename__ = 'method'\n    mid = Column(Integer, primary_key=True)\n    method = Column(String(20), nullable=False, unique=True)\n    methodarg = relationship('MethodArg', backref='method')\n    recipe = relationship('Recipe', backref='method')\n\n\n    def __str__(self):\n        return self.method\n\n\nclass MethodArg(db.Model):\n    __tablename__ = 'methodarg'\n    maid = Column(Integer, primary_key=True)\n    mid = Column(ForeignKey('method.mid', ondelete='CASCADE', onupdate='CASCADE'), nullable=False)\n    methodarg = Column(String(20), nullable=False, unique=True)\n    recipearg = relationship('RecipeArg', backref='methodarg')\n    inline_models = (Method,)\n\n\n    def __str__(self):\n        return self.methodarg\n\n\nclass Recipe(db.Model):\n    __tablename__ = 'recipe'\n    rid = Column(Integer, primary_key=True)\n    mid = Column(ForeignKey('method.mid', ondelete='CASCADE', onupdate='CASCADE'), nullable=False)\n    recipe = Column(String(20), nullable=False, index=True)\n    recipearg = relationship('RecipeArg', backref='recipe')\n    inline_models = (Method,)\n\n    def __str__(self):\n        return self.recipe\n\n\nclass RecipeArg(db.Model):\n    __tablename__ = 'recipearg'\n\n    raid = Column(Integer, primary_key=True)\n    rid = Column(ForeignKey('recipe.rid', ondelete='CASCADE', onupdate='CASCADE'), nullable=False)\n    maid = Column(ForeignKey('methodarg.maid', ondelete='CASCADE', onupdate='CASCADE'), nullable=False)\n    strvalue = Column(String(80), nullable=False)\n    inline_models = (Recipe, MethodArg)\n\n\n    def __str__(self):\n        return self.strvalue\n\n\nclass MethodArgAdmin(sqla.ModelView):\n    column_list = ('method', 'methodarg')\n    column_editable_list = column_list\n\n\n\nclass RecipeAdmin(sqla.ModelView):\n    column_list = ('recipe', 'method')\n    column_editable_list = column_list\n\n\n\nclass RecipeArgAdmin(sqla.ModelView):\n    column_list = ('recipe', 'methodarg', 'strvalue')\n    column_editable_list = column_list\n\n\nadmin.add_view(RecipeArgAdmin(RecipeArg, db.session))\n\n# More submenu\nadmin.add_view(sqla.ModelView(Method, db.session, category='See Other Tables'))\nadmin.add_view(MethodArgAdmin(MethodArg, db.session, category='See Other Tables'))\nadmin.add_view(RecipeAdmin(Recipe, db.session, category='See Other Tables'))\n\n\nif __name__ == '__main__':\n\n    db.drop_all()\n    db.create_all()\n    db.session.add(Method(mid=1, method='tabulate_results'))\n    db.session.add(Method(mid=2, method='pretty_print'))\n    db.session.commit()\n    db.session.add(MethodArg(maid=1, mid=1, methodarg='rows'))\n    db.session.add(MethodArg(maid=2, mid=1, methodarg='display_total'))\n    db.session.add(MethodArg(maid=3, mid=2, methodarg='embellishment_character'))\n    db.session.add(MethodArg(maid=4, mid=2, methodarg='lines_to_jump'))\n    db.session.add(Recipe(rid=1, mid=1, recipe='Serious Report'))\n    db.session.add(Recipe(rid=2, mid=2, recipe='ASCII Art'))\n    db.session.commit()\n    db.session.add(RecipeArg(raid=1, rid=1, maid=2, strvalue='true' ))\n    db.session.add(RecipeArg(raid=2, rid=1, maid=1, strvalue='12' ))\n    db.session.add(RecipeArg(raid=3, rid=2, maid=4, strvalue='3' ))\n    db.session.commit()\n\n    # Start app\n    app.run(debug=True)\n</code></pre>\n"}, {"tags": ["python", "machine-learning", "scikit-learn", "dataframe"], "answers": [{"comments": [{"owner": {"reputation": 1051, "user_id": 2255912, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/132547411a88cfd935071eb06e471bad?s=128&d=identicon&r=PG", "display_name": "R Claven", "link": "https://stackoverflow.com/users/2255912/r-claven"}, "edited": false, "score": 2, "creation_date": 1475533720, "post_id": 33661042, "comment_id": 66972527, "body": "I&#39;d found so many bad examples and this was the first one to make sense to me.  Thank you!"}, {"owner": {"reputation": 23937, "user_id": 678572, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kZ2Ia.jpg?s=128&g=1", "display_name": "O.rka", "link": "https://stackoverflow.com/users/678572/o-rka"}, "reply_to_user": {"reputation": 1051, "user_id": 2255912, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/132547411a88cfd935071eb06e471bad?s=128&d=identicon&r=PG", "display_name": "R Claven", "link": "https://stackoverflow.com/users/2255912/r-claven"}, "edited": false, "score": 1, "creation_date": 1476303899, "post_id": 33661042, "comment_id": 67293428, "body": "Thanks!  I haven&#39;t gotten any good feedback from one of my answers so I really appreciate it."}, {"owner": {"reputation": 6712, "user_id": 1870832, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/4zazd.png?s=128&g=1", "display_name": "Max Power", "link": "https://stackoverflow.com/users/1870832/max-power"}, "edited": false, "score": 5, "creation_date": 1492060646, "post_id": 33661042, "comment_id": 73829733, "body": "+1 for including the steps to restore DataFrame type with original column names and index, after raw numpy array comes out of any sklearn Imputer"}], "tags": [], "owner": {"reputation": 23937, "user_id": 678572, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kZ2Ia.jpg?s=128&g=1", "display_name": "O.rka", "link": "https://stackoverflow.com/users/678572/o-rka"}, "is_accepted": true, "score": 40, "last_activity_date": 1476303994, "last_edit_date": 1476303994, "creation_date": 1447280811, "answer_id": 33661042, "question_id": 33660836, "link": "https://stackoverflow.com/questions/33660836/impute-entire-dataframe-all-columns-using-scikit-learn-sklearn-without-itera/33661042#33661042", "title": "Impute entire DataFrame (all columns) using Scikit-learn (sklearn) without iterating over columns", "body": "<p>If you want the <code>mean</code> or <code>median</code> you could do something like:</p>\n\n<pre><code>fill_NaN = Imputer(missing_values=np.nan, strategy='mean', axis=1)\nimputed_DF = pd.DataFrame(fill_NaN.fit_transform(DF))\nimputed_DF.columns = DF.columns\nimputed_DF.index = DF.index\n</code></pre>\n\n<p>If you want to fill them with 0s or something you could always just do:</p>\n\n<pre><code>DF[DF.isnull()] = 0\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 23937, "user_id": 678572, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kZ2Ia.jpg?s=128&g=1", "display_name": "O.rka", "link": "https://stackoverflow.com/users/678572/o-rka"}, "edited": false, "score": 0, "creation_date": 1523468827, "post_id": 49749758, "comment_id": 86578251, "body": "That&#39;s probably what I would do now.  Maybe something along the lines of <code>df[df.isnull()] = x</code>.  I don&#39;t think I would actually <code>impute</code> anything in a real world dataset tho."}], "tags": [], "owner": {"reputation": 126, "user_id": 7225303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91859ea08096ec53dc08db0855dc7133?s=128&d=identicon&r=PG&f=1", "display_name": "Biggus", "link": "https://stackoverflow.com/users/7225303/biggus"}, "is_accepted": false, "score": 5, "last_activity_date": 1523351602, "creation_date": 1523351602, "answer_id": 49749758, "question_id": 33660836, "link": "https://stackoverflow.com/questions/33660836/impute-entire-dataframe-all-columns-using-scikit-learn-sklearn-without-itera/49749758#49749758", "title": "Impute entire DataFrame (all columns) using Scikit-learn (sklearn) without iterating over columns", "body": "<p>Unless you specifically need to use the sklearn <code>Imputer</code> for some reason, it seems to me  that a simpler option would be to just do:</p>\n\n<pre><code>df = df.fillna(df.mean())\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 6512980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fff71809808465dc26a180ca0e917c7?s=128&d=identicon&r=PG&f=1", "display_name": "Dong Liang", "link": "https://stackoverflow.com/users/6512980/dong-liang"}, "is_accepted": false, "score": 1, "last_activity_date": 1577064041, "last_edit_date": 1577064041, "creation_date": 1572200387, "answer_id": 58582092, "question_id": 33660836, "link": "https://stackoverflow.com/questions/33660836/impute-entire-dataframe-all-columns-using-scikit-learn-sklearn-without-itera/58582092#58582092", "title": "Impute entire DataFrame (all columns) using Scikit-learn (sklearn) without iterating over columns", "body": "<p>df.mean() will return NA if any of the columns contains NA, therefore making df.fillna() not function as expected. A proper way would be using np.nanmean()</p>\n"}], "owner": {"reputation": 23937, "user_id": 678572, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kZ2Ia.jpg?s=128&g=1", "display_name": "O.rka", "link": "https://stackoverflow.com/users/678572/o-rka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 17074, "favorite_count": 7, "accepted_answer_id": 33661042, "answer_count": 3, "score": 25, "last_activity_date": 1577064041, "creation_date": 1447279939, "question_id": 33660836, "link": "https://stackoverflow.com/questions/33660836/impute-entire-dataframe-all-columns-using-scikit-learn-sklearn-without-itera", "title": "Impute entire DataFrame (all columns) using Scikit-learn (sklearn) without iterating over columns", "body": "<p>I want to impute all of the columns on a pandas DataFrame...the only way I can think of doing this is column by column as shown below...</p>\n\n<p><strong>Is there an operation where I can impute the entire DataFrame without iterating through the columns?</strong> </p>\n\n<pre><code>#!/usr/bin/python\nfrom sklearn.preprocessing import Imputer\nimport numpy as np\nimport pandas as pd\n\n#Imputer\nfill_NaN = Imputer(missing_values=np.nan, strategy='mean', axis=1)\n\n#Model 1\nDF = pd.DataFrame([[0,1,np.nan],[2,np.nan,3],[np.nan,2,5]])\nDF.columns = \"c1.c2.c3\".split(\".\")\nDF.index = \"i1.i2.i3\".split(\".\")\n\n#Impute Series\nimputed_DF = DF\nfor col in DF.columns:\n    imputed_column = fill_NaN.fit_transform(DF[col]).T\n    #Fill in Series on DataFrame\n    imputed_DF[col] = imputed_column\n\n#DF\n#c1  c2  c3\n#i1   0   1 NaN\n#i2   2 NaN   3\n#i3 NaN   2   5\n\n#imputed_DF\n#c1   c2  c3\n#i1   0  1.0   4\n#i2   2  1.5   3\n#i3   1  2.0   5\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 6, "creation_date": 1447279553, "post_id": 33660737, "comment_id": 55095017, "body": "To use the <code>argparse</code> module"}, {"owner": {"reputation": 11906, "user_id": 4842742, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5ExYH.jpg?s=128&g=1", "display_name": "sobolevn", "link": "https://stackoverflow.com/users/4842742/sobolevn"}, "edited": false, "score": 1, "creation_date": 1447279601, "post_id": 33660737, "comment_id": 55095037, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/1009860/command-line-arguments-in-python\">Command Line Arguments In Python</a>"}, {"owner": {"reputation": 7959, "user_id": 704972, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c176240cfcbeda075c655197a2cc8544?s=128&d=identicon&r=PG", "display_name": "Calaf", "link": "https://stackoverflow.com/users/704972/calaf"}, "reply_to_user": {"reputation": 11906, "user_id": 4842742, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5ExYH.jpg?s=128&g=1", "display_name": "sobolevn", "link": "https://stackoverflow.com/users/4842742/sobolevn"}, "edited": false, "score": 0, "creation_date": 1447291790, "post_id": 33660737, "comment_id": 55099339, "body": "@sobolevn How about the new variation of the question? Does that make it entirely unique?"}], "answers": [{"comments": [{"owner": {"reputation": 7959, "user_id": 704972, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c176240cfcbeda075c655197a2cc8544?s=128&d=identicon&r=PG", "display_name": "Calaf", "link": "https://stackoverflow.com/users/704972/calaf"}, "edited": false, "score": 0, "creation_date": 1447289656, "post_id": 33660778, "comment_id": 55098759, "body": "argh looks good, but after <code>sudo port install py27-argh</code>, I&#39;m getting &quot;ImportError: No module named argh&quot;."}], "tags": [], "owner": {"reputation": 2614, "user_id": 763560, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6c05805cff09c54d9704f8a9b24c56ed?s=128&d=identicon&r=PG", "display_name": "circular-ruin", "link": "https://stackoverflow.com/users/763560/circular-ruin"}, "is_accepted": false, "score": 1, "last_activity_date": 1447279692, "creation_date": 1447279692, "answer_id": 33660778, "question_id": 33660737, "link": "https://stackoverflow.com/questions/33660737/what-is-the-canonical-way-to-send-arguments-to-a-python-script/33660778#33660778", "title": "What is the canonical way to send arguments to a Python script?", "body": "<p>There are various options. The <a href=\"https://docs.python.org/3/library/argparse.html\" rel=\"nofollow\">argparse</a> module in the standard library is one. </p>\n\n<p>There are also some wrappers that make it easy/easier to use, for example <a href=\"https://pypi.python.org/pypi/argh\" rel=\"nofollow\">argh</a>. This lets you write:</p>\n\n<pre><code>import argh\n\n# declaring:\n\ndef echo(text):\n    \"Returns given word as is.\"\n    return text\n\ndef greet(name, greeting='Hello'):\n    \"Greets the user with given name. The greeting is customizable.\"\n    return greeting + ', ' + name\n\n# assembling:\n\nparser = argh.ArghParser()\nparser.add_commands([echo, greet])\n\n# dispatching:\n\nif __name__ == '__main__':\n    parser.dispatch()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2194, "user_id": 2142505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99f16433508978bc7ab06ee6fd8f124b?s=128&d=identicon&r=PG", "display_name": "davejagoda", "link": "https://stackoverflow.com/users/2142505/davejagoda"}, "is_accepted": false, "score": 1, "last_activity_date": 1447279731, "creation_date": 1447279731, "answer_id": 33660784, "question_id": 33660737, "link": "https://stackoverflow.com/questions/33660737/what-is-the-canonical-way-to-send-arguments-to-a-python-script/33660784#33660784", "title": "What is the canonical way to send arguments to a Python script?", "body": "<p>I recommend argparse: <a href=\"https://docs.python.org/2/howto/argparse.html\" rel=\"nofollow\">https://docs.python.org/2/howto/argparse.html</a></p>\n\n<p>It supports mutual exclusion of arguments among other features.</p>\n"}, {"tags": [], "owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "is_accepted": true, "score": 3, "last_activity_date": 1447279847, "creation_date": 1447279847, "answer_id": 33660814, "question_id": 33660737, "link": "https://stackoverflow.com/questions/33660737/what-is-the-canonical-way-to-send-arguments-to-a-python-script/33660814#33660814", "title": "What is the canonical way to send arguments to a Python script?", "body": "<pre><code>import argparse as ap\n\ndef dothis():\n    print \"We're doing this.\"\n\ndef dothat():\n    print \"We're doing that.\"\n\nif __name__ == \"__main__\":\n    parser = ap.ArgumentParser()\n    parser.add_argument('thing', choices=['dothis', 'dothat'])\n    args = parser.parse_args()\n    f = locals()[args.thing]\n    f()\n</code></pre>\n"}], "owner": {"reputation": 7959, "user_id": 704972, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c176240cfcbeda075c655197a2cc8544?s=128&d=identicon&r=PG", "display_name": "Calaf", "link": "https://stackoverflow.com/users/704972/calaf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 1, "accepted_answer_id": 33660814, "answer_count": 3, "score": 1, "last_activity_date": 1447300770, "creation_date": 1447279471, "last_edit_date": 1447300770, "question_id": 33660737, "link": "https://stackoverflow.com/questions/33660737/what-is-the-canonical-way-to-send-arguments-to-a-python-script", "title": "What is the canonical way to send arguments to a Python script?", "body": "<p>The following code in file <code>script.py</code> makes it possible (after <code>chmod 755 script.py</code>) to either <code>script.py dothis</code> or to <code>script.py dothat</code>.</p>\n\n<pre><code>import sys\n\ndef dothis():\n    print \"We're doing this.\"\n\ndef dothat():\n    print \"We're doing that.\"\n\nif __name__ == \"__main__\":\n    if len(sys.argv) != 2:\n        print \"Error: You must specify exactly one function: dothis or dothat\"\n        sys.exit(1)\n    if sys.argv[1] == \"dothis\":\n        dothis()\n    elif sys.argv[1] == \"dothat\":\n        dothat()\n    else:\n        print \"I don't know how to \"+sys.argv[1]\n</code></pre>\n\n<p>Is this the most elegant way to call one of two functions from the command line?</p>\n"}, {"tags": ["python", "web-scraping"], "comments": [{"owner": {"reputation": 880, "user_id": 116090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cea41095c8bd38891c836f07fbcc9c5?s=128&d=identicon&r=PG", "display_name": "Erik", "link": "https://stackoverflow.com/users/116090/erik"}, "edited": false, "score": 0, "creation_date": 1447280259, "post_id": 33660680, "comment_id": 55095357, "body": "The answer is always beautifulsoup."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user764357"}, "edited": false, "score": 0, "creation_date": 1447282367, "post_id": 33660980, "comment_id": 55096386, "body": "While a long and interesting answer, this doesn&#39;t answer the askers question at all. There are ways this can be done with Python."}, {"owner": {"reputation": 12701, "user_id": 758836, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/58f86c627aaaffa73935dd28da619e33?s=128&d=identicon&r=PG", "display_name": "loretoparisi", "link": "https://stackoverflow.com/users/758836/loretoparisi"}, "edited": false, "score": 0, "creation_date": 1447283263, "post_id": 33660980, "comment_id": 55096736, "body": "I do not suggest you to go through Python (and I&#39;m a experienced Python dev). Phantomjs (written in C++) is a real world Javascript engine that is used by top companies. This is my 2 cents ( <a href=\"https://en.wikipedia.org/wiki/PhantomJS#Companies_using_PhantomJS\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/PhantomJS#Companies_using_PhantomJS</a> ). Then you decision. I would have suggested to use yet another python web parser, but not, that&#39;s not the best answer in my opinion."}, {"owner": {"user_type": "does_not_exist", "display_name": "user764357"}, "edited": false, "score": 0, "creation_date": 1447283532, "post_id": 33660980, "comment_id": 55096847, "body": "Look, I agree using Python for this isn&#39;t the greatest solution. But the aquestion was &quot;How can I do X with Python?&quot;, and X <i>is</i> possible in Python, so don&#39;t just answer &quot;Don&#39;t, just use a different language.&quot;"}, {"owner": {"reputation": 12701, "user_id": 758836, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/58f86c627aaaffa73935dd28da619e33?s=128&d=identicon&r=PG", "display_name": "loretoparisi", "link": "https://stackoverflow.com/users/758836/loretoparisi"}, "edited": false, "score": 0, "creation_date": 1447283539, "post_id": 33660980, "comment_id": 55096852, "body": "@LegoStormtroopr I do not agree. 1) It answer the fact that the solution renders the whole page considering the client-side JavaScript VM machine code execution. 2) Then it shows which events to handle to achieve this. 3) It shows how phantomjs take the web page, pass to a parser object page, that register the callbacks, and get  the page contents at the right time."}, {"owner": {"reputation": 12701, "user_id": 758836, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/58f86c627aaaffa73935dd28da619e33?s=128&d=identicon&r=PG", "display_name": "loretoparisi", "link": "https://stackoverflow.com/users/758836/loretoparisi"}, "edited": false, "score": 0, "creation_date": 1447283619, "post_id": 33660980, "comment_id": 55096880, "body": "@LegoStormtroopr Yes, but my answer was. Nope, forget python, and choose a better solution, in my point of view, this is a correct answer, since it achieves the same result. Feel free to downvote anyways, I understand your point as well."}], "tags": [], "owner": {"reputation": 12701, "user_id": 758836, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/58f86c627aaaffa73935dd28da619e33?s=128&d=identicon&r=PG", "display_name": "loretoparisi", "link": "https://stackoverflow.com/users/758836/loretoparisi"}, "is_accepted": false, "score": 2, "last_activity_date": 1447280559, "creation_date": 1447280559, "answer_id": 33660980, "question_id": 33660680, "link": "https://stackoverflow.com/questions/33660680/web-scraping-a-page-after-its-loaded-its-data/33660980#33660980", "title": "Web scraping a page after it&#39;s loaded its data", "body": "<p>You cannot this with Python only. You need a JavaScript engine API like <a href=\"http://phantomjs.org/\" rel=\"nofollow\">PhantomJS</a></p>\n\n<p>With Phantom, will be very easy to setup the web scraping of all the page contents, static and dynamic JavaScript contents (like Ajax calls results in your case). Infact you can register page event handlers to your page parser like (this is a node.js + phantom.js example)</p>\n\n<pre><code>/*\n     * Register Page Handlers as functions\n\n    {\n        onLoadStarted : onLoadStarted,\n        onLoadFinished: onLoadFinished,\n        onError : onError,\n        onResourceRequested : onResourceRequested,\n        onResourceReceived : onResourceReceived,\n        onNavigationRequested : onNavigationRequested,\n        onResourceError : onResourceError\n    }\n\n    */\n    registerHandlers : function(page, handlers) {\n        if(handlers.onLoadStarted) page.set('onLoadStarted',handlers.onLoadStarted)\n        if(handlers.onLoadFinished) page.set('onLoadFinished',handlers.onLoadFinished)\n        if(handlers.resourceError) page.set('onResourceError', handlers.resourceError)\n        if(handlers.onResourceRequested) page.set('onResourceRequested',handlers.onResourceRequested)\n        if(handlers.onResourceReceived) page.set('onResourceReceived',handlers.onResourceReceived)\n        if(handlers.onNavigationRequested) page.set('onNavigationRequested',handlers.onNavigationRequested)\n        if(handlers.onError) page.set('onError',handlers.onError)\n\n    }\n</code></pre>\n\n<p>At this point you have full control of what is going on and when in the page you have to download like:</p>\n\n<pre><code>var onResourceError = function(resourceError) {\n                        var errorReason = resourceError.errorString;\n                        var errorPageUrl = resourceError.url;\n                }\n                var onResourceRequested = function (request) {\n                    var msg = '  request: ' + JSON.stringify(request, undefined, 4);\n                };\n                var onResourceReceived = function(response) {\n                    var msg = '  id: ' + response.id + ', stage: \"' + response.stage + '\", response: ' + JSON.stringify(response);\n                };\n                var onNavigationRequested = function(url, type, willNavigate, main) {\n                    var msg = '  destination_url: ' + url;\n                    msg += '  type (cause): ' + type;\n                    msg += '  will navigate: ' + willNavigate;\n                    msg += '  from page\\'s main frame: ' + main;\n                };\n                page.onResourceRequested(\n                function(requestData, request) {\n                        //request.abort()\n                        //request.changeUrl(url)\n                        //request.setHeader(key,value)\n                        var msg = '  request: ' + JSON.stringify(request, undefined, 4);\n                        //console.log( msg )\n                    },\n                function(requestData) {\n                        //console.log(requestData.url)\n                })\n        PageHelper.registerHandlers(page,\n                    {\n                        onLoadStarted : onLoadStarted,\n                        onLoadFinished: onLoadFinished,\n                        onError : null, // onError THIS HANDLER CRASHES PHANTOM-NODE\n                        onResourceRequested : null, // MUST BE ON PAGE OBJECT\n                        onResourceReceived : onResourceReceived,\n                        onNavigationRequested : onNavigationRequested,\n                        onResourceError : onResourceError\n                    });\n</code></pre>\n\n<p>As you can see you can define you page handlers and take control of the flow and so of the resources loaded on that page. So you can be sure that all data are ready and set, before you take the whole page source like:</p>\n\n<pre><code>var Parser = {\n  parse : function(page) {\n\n    var onSuccess = function (page) { // page loaded\n        var pageContents=page.evaluate(function() {\n            return document.body.innerText;\n        });\n      }\n    var onError = function (page,elapsed) { // error\n    }\n    page.evaluate(function(func) {\n            return func(document);\n        }, function(dom) {\n            return true;\n        });\n\n  }\n} // Parser\n</code></pre>\n\n<p>Here you can see the whole page contents loaded in the onSuccess callback:</p>\n\n<pre><code>var pageContents=page.evaluate(function() {\n                return document.body.innerText;\n            });\n</code></pre>\n\n<p>The page comes from Phantomjs directly like in the following snippet:</p>\n\n<pre><code>phantom.create(function (ph) {\n            ph.createPage(function (page) {\n                Parser.parse(page)\n            })\n        },options)\n</code></pre>\n\n<p>Of course this to give you and idea of what you can do with node.js + Phantomjs, that are super powerful when combined together.</p>\n\n<p>You can run phantomjs in a Python env, calling it like</p>\n\n<pre><code>try:\n            output = ''\n            for result in runProcess([self.runProcess,\n            self.runScript,\n            self.jobId,\n            self.protocol,\n            self.hostname,\n            self.queryString]):\n                output += '' + result\n                print output\n        except Exception as e:\n            print e\n            print(traceback.format_exc())\n</code></pre>\n\n<p>where you use subprocess Popen to execute the binary:</p>\n\n<pre><code>def runProcess(exe):\n    p = subprocess.Popen(exe, stdout=subprocess.PIPE, stderr=subprocess.STDOUT)\n    while(True):\n      retcode = p.poll() #returns None while subprocess is running\n      line = p.stdout.readline()\n      yield line\n      if(retcode is not None):\n        break\n</code></pre>\n\n<p>Of course the process to run is node.js in this case</p>\n\n<pre><code>self.runProcess='node'\n</code></pre>\n\n<p>with the args you need as params.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user764357"}, "is_accepted": false, "score": 1, "last_activity_date": 1447282603, "creation_date": 1447282603, "answer_id": 33661412, "question_id": 33660680, "link": "https://stackoverflow.com/questions/33660680/web-scraping-a-page-after-its-loaded-its-data/33661412#33661412", "title": "Web scraping a page after it&#39;s loaded its data", "body": "<p>The challenge is reading the data once its been rendered by a web browser, which will require some extra tricks to do. If you can see if the site has a pre-rendered version<sup>*</sup> or an API.</p>\n\n<p><a href=\"https://web.archive.org/web/20150326024246/https://impythonist.wordpress.com/2015/01/06/ultimate-guide-for-scraping-javascript-rendered-web-pages/\" rel=\"nofollow\">This article (linked from the Web archive)</a> has a pretty good breakdown of what you'll need to do. It can be summed up however as:</p>\n\n<ol>\n<li>Pick a good python-webkit renderer (in the case of the article PyQT)</li>\n<li>Use a windowing widget to fetch and render the page</li>\n<li>Fetch the rendered HTML from the widget</li>\n<li>Parse this HTML as normal using a library like lXML or BeautifulSoup.</li>\n</ol>\n\n<p><sup>* Minor rant - the idea of having to hope for a pre-rendered version ofwhat should be a static webpage angers me.</sup></p>\n"}], "owner": {"reputation": 203, "user_id": 3835980, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c29c5532c14cf51ab4e1851158421b80?s=128&d=identicon&r=PG&f=1", "display_name": "user3835980", "link": "https://stackoverflow.com/users/3835980/user3835980"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2196, "favorite_count": 3, "answer_count": 2, "score": 2, "last_activity_date": 1481313161, "creation_date": 1447279255, "question_id": 33660680, "link": "https://stackoverflow.com/questions/33660680/web-scraping-a-page-after-its-loaded-its-data", "title": "Web scraping a page after it&#39;s loaded its data", "body": "<p>Trying to collect data on book price fluctuations for a school project. I'm using Python to scrape from a book buyback aggregator (in this case, bookscouter), but I find that since the site has to load in the data, grabbing the source code through the urllib2 package gives me the source code from before the data is loaded. How do I pull from after the data is loaded?</p>\n\n<p>Example: <a href=\"http://bookscouter.com/prices.php?isbn=9788498383621&amp;searchbutton=Sell\" rel=\"nofollow\">http://bookscouter.com/prices.php?isbn=9788498383621&amp;searchbutton=Sell</a></p>\n"}, {"tags": ["python", "while-loop", "binary", "decimal"], "comments": [{"owner": {"reputation": 15180, "user_id": 1689706, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/hlpjt.jpg?s=128&g=1", "display_name": "Alberto Bonsanto", "link": "https://stackoverflow.com/users/1689706/alberto-bonsanto"}, "edited": false, "score": 0, "creation_date": 1447279054, "post_id": 33660538, "comment_id": 55094800, "body": "please indent your code properly :)"}, {"owner": {"reputation": 129, "user_id": 3975231, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/119af9843dd6377e89bed681326ae498?s=128&d=identicon&r=PG&f=1", "display_name": "DecafOyster208", "link": "https://stackoverflow.com/users/3975231/decafoyster208"}, "reply_to_user": {"reputation": 15180, "user_id": 1689706, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/hlpjt.jpg?s=128&g=1", "display_name": "Alberto Bonsanto", "link": "https://stackoverflow.com/users/1689706/alberto-bonsanto"}, "edited": false, "score": 0, "creation_date": 1447280965, "post_id": 33660538, "comment_id": 55095702, "body": "whats wrong with it?"}], "answers": [{"tags": [], "owner": {"reputation": 7235, "user_id": 3734914, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/JAGw8.jpg?s=128&g=1", "display_name": "Batman", "link": "https://stackoverflow.com/users/3734914/batman"}, "is_accepted": false, "score": 1, "last_activity_date": 1447707477, "last_edit_date": 1447707477, "creation_date": 1447279366, "answer_id": 33660709, "question_id": 33660538, "link": "https://stackoverflow.com/questions/33660538/converting-from-binary-to-decimal-python-function/33660709#33660709", "title": "Converting from Binary to Decimal python function", "body": "<pre><code>def binary(n):\n    binlist = [int(x) for x in bin(n)[2:]]\n    return binlist\n</code></pre>\n\n<p>If you really want to use a <code>while</code> loop:</p>\n\n<pre><code>def binary(n):\n    binary = list()\n    while n &gt; 0:\n        binary.insert(0, n%2)\n        n /= 2\n\n    return binary\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3467, "user_id": 5509239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6563e2e4d92a4591fcf3b7860bb28192?s=128&d=identicon&r=PG&f=1", "display_name": "memoselyk", "link": "https://stackoverflow.com/users/5509239/memoselyk"}, "is_accepted": false, "score": -1, "last_activity_date": 1447284248, "creation_date": 1447284248, "answer_id": 33661752, "question_id": 33660538, "link": "https://stackoverflow.com/questions/33660538/converting-from-binary-to-decimal-python-function/33661752#33661752", "title": "Converting from Binary to Decimal python function", "body": "<p>How do you expect to get a <code>list</code> if you are never creating one?</p>\n\n<p>You should first, initialize your return value to an empty list <code>[]</code>.\nAnd then use <code>append</code> (to add each new item at the end), or <code>insert</code> (to add it to the beginning).</p>\n"}], "owner": {"reputation": 129, "user_id": 3975231, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/119af9843dd6377e89bed681326ae498?s=128&d=identicon&r=PG&f=1", "display_name": "DecafOyster208", "link": "https://stackoverflow.com/users/3975231/decafoyster208"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2274, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1447707477, "creation_date": 1447278813, "question_id": 33660538, "link": "https://stackoverflow.com/questions/33660538/converting-from-binary-to-decimal-python-function", "title": "Converting from Binary to Decimal python function", "body": "<p>I'm having trouble with two different functions i have for converting a decimal number into a binary number. I want the binary number to return in the form of a list with commas inbetween each digit. i.e >>>Binary(19) returns [1,0,0,1,1]\nMy first function says 'int too large to convert to float' and the second function returns the binary number in  a string not a list with commas, and im having difficulty changing that around.\nThe first function:</p>\n\n<pre><code>    def Binary(n):\n    i=1\n    s=0\n    while n&gt;0:\n        rem=n%2\n        s=s+(i*rem)\n        n=n/2\n        i=i*10\n    return s\n</code></pre>\n\n<p>My second function that returns a string:</p>\n\n<pre><code>    def Binary2(n):\n        binstr = ''\n        if n == 0: return '0'\n        while n &gt; 0:\n           binstr = str(n % 2) + binstr\n           n = n &gt;&gt; 1\n        return binstr\n</code></pre>\n\n<p>I only need just one function to output the result im looking for, so i appreciate any help thanks:)</p>\n\n<p>Also i know there is many easier ways of doing this but i prefer to stick to using the while loop </p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 15180, "user_id": 1689706, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/hlpjt.jpg?s=128&g=1", "display_name": "Alberto Bonsanto", "link": "https://stackoverflow.com/users/1689706/alberto-bonsanto"}, "edited": false, "score": 2, "creation_date": 1447278758, "post_id": 33660491, "comment_id": 55094653, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/1164309/python-object-creation\">Python object creation</a>"}, {"owner": {"reputation": 2801, "user_id": 3500191, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6kwij.jpg?s=128&g=1", "display_name": "Ethan Bierlein", "link": "https://stackoverflow.com/users/3500191/ethan-bierlein"}, "reply_to_user": {"reputation": 15180, "user_id": 1689706, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/hlpjt.jpg?s=128&g=1", "display_name": "Alberto Bonsanto", "link": "https://stackoverflow.com/users/1689706/alberto-bonsanto"}, "edited": false, "score": 2, "creation_date": 1447278920, "post_id": 33660491, "comment_id": 55094722, "body": "@AlbertoBonsanto Nope. This is just a typographical error. That question&#39;s asking something completely different."}, {"owner": {"reputation": 8584, "user_id": 890242, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a002dc8cd51a7d25e31e1bf4662b1b85?s=128&d=identicon&r=PG", "display_name": "miraculixx", "link": "https://stackoverflow.com/users/890242/miraculixx"}, "edited": false, "score": 2, "creation_date": 1447278927, "post_id": 33660491, "comment_id": 55094728, "body": "first rule of debugging: look for errors in your code (hint: the TypeError tells you where to look)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user177800"}, "edited": false, "score": 1, "creation_date": 1447278929, "post_id": 33660491, "comment_id": 55094730, "body": "fix the typos and you will have fixed your program"}], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 5495923, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/nEuXO.jpg?s=128&g=1", "display_name": "aznjonn", "link": "https://stackoverflow.com/users/5495923/aznjonn"}, "edited": false, "score": 0, "creation_date": 1447278986, "post_id": 33660534, "comment_id": 55094769, "body": "will do, once it allows me too =)"}], "tags": [], "owner": {"reputation": 2801, "user_id": 3500191, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6kwij.jpg?s=128&g=1", "display_name": "Ethan Bierlein", "link": "https://stackoverflow.com/users/3500191/ethan-bierlein"}, "is_accepted": true, "score": 3, "last_activity_date": 1447278799, "creation_date": 1447278799, "answer_id": 33660534, "question_id": 33660491, "link": "https://stackoverflow.com/questions/33660491/learning-how-to-write-a-class-and-object-first-time/33660534#33660534", "title": "Learning how to write a Class and Object first time", "body": "<p>You need to have <em>two</em> underscores around magic methods like <code>__init__</code>. That means this:</p>\n\n<blockquote>\n<pre><code>def _init_(self, lyrics):\n    self.lyrics = lyrics\n</code></pre>\n</blockquote>\n\n<p>Should become this:</p>\n\n<pre><code>def __init__(self, lyrics):\n    self.lyrics = lyrics\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 95, "user_id": 5495923, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/nEuXO.jpg?s=128&g=1", "display_name": "aznjonn", "link": "https://stackoverflow.com/users/5495923/aznjonn"}, "edited": false, "score": 1, "creation_date": 1447279172, "post_id": 33660548, "comment_id": 55094843, "body": "Thanks, i think i missed that quote when i copied it over. i do have it in the actual file"}], "tags": [], "owner": {"reputation": 1941, "user_id": 5186820, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3054407a607bcfc6f7203280afd0aceb?s=128&d=identicon&r=PG&f=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/5186820/brian"}, "is_accepted": false, "score": 1, "last_activity_date": 1447278860, "creation_date": 1447278860, "answer_id": 33660548, "question_id": 33660491, "link": "https://stackoverflow.com/questions/33660491/learning-how-to-write-a-class-and-object-first-time/33660548#33660548", "title": "Learning how to write a Class and Object first time", "body": "<p>The <code>_init_</code> function should be <code>__init__</code>.</p>\n\n<p>I can also see, just from syntax highlighting, that the last string you use in the file is missing starting double-quotes</p>\n"}], "owner": {"reputation": 95, "user_id": 5495923, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/nEuXO.jpg?s=128&g=1", "display_name": "aznjonn", "link": "https://stackoverflow.com/users/5495923/aznjonn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 222, "favorite_count": 0, "accepted_answer_id": 33660534, "answer_count": 2, "score": -5, "last_activity_date": 1447278860, "creation_date": 1447278620, "last_edit_date": 1447278859, "question_id": 33660491, "link": "https://stackoverflow.com/questions/33660491/learning-how-to-write-a-class-and-object-first-time", "title": "Learning how to write a Class and Object first time", "body": "<p>So I am using the hardest way to learn python and I am on exercise 40, and below is the code that we are instructed to write into a file named ex40.py:</p>\n\n<pre><code>class Song(object):\n\n    def _init_(self, lyrics):\n        self.lyrics = lyrics\n\n    def sing_me_a_song(self):\n        for line in self.lyrics:\n            print line\n\nhappy_bday = Song([\"Happy birthday to you\",\n                   \"I don't want to get sued\",\n                   \"So I'll stop right there\"])\n\nbulls_on_parade = Song([\"They rally around the family\",\n                         With pockets full of shells\"])\n\nhappy_bday.sing_me_a_song()\n\nbulls_on_parade.sing_me_a_song()\n</code></pre>\n\n<p>Then to run it, I am doing: python ex40.py and I am receiving error:</p>\n\n<pre><code>MacBook-Pro-3:PythonsScripts$ python ex40.py\n\nTraceback (most recent call last):\n  File \"ex40.py\", line 12, in &lt;module&gt;\n    \"So I'll stop right there\"])\nTypeError: object() takes no parameters\n</code></pre>\n"}, {"tags": ["python", "matplotlib", "heatmap", "seaborn"], "comments": [{"owner": {"reputation": 4924, "user_id": 2862719, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/yzhk5.png?s=128&g=1", "display_name": "m00am", "link": "https://stackoverflow.com/users/2862719/m00am"}, "edited": false, "score": 0, "creation_date": 1447279564, "post_id": 33660420, "comment_id": 55095023, "body": "Welcome to SO. It would be really helpful to see you code to help you with this. Can you add it to the question please?"}, {"owner": {"reputation": 41, "user_id": 5552393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c37a04e499d3dd88f4df0ae7ddb2ac3?s=128&d=identicon&r=PG&f=1", "display_name": "jkf", "link": "https://stackoverflow.com/users/5552393/jkf"}, "reply_to_user": {"reputation": 4924, "user_id": 2862719, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/yzhk5.png?s=128&g=1", "display_name": "m00am", "link": "https://stackoverflow.com/users/2862719/m00am"}, "edited": false, "score": 0, "creation_date": 1447281227, "post_id": 33660420, "comment_id": 55095846, "body": "<code>ax = sns.heatmap(pcolor_data,             xticklabels=day_columns,             yticklabels=line_sales_by_day[&#39;product_name&#39;][0:n_skus].valu&zwnj;&#8203;es,             annot=True,             cbar=True,             annot_kws={&#39;size&#39;:10},             fmt=&#39;g&#39;,             cmap=cmap)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 49128, "user_id": 588071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0e0397d27c84e04451691ddb6c8d49c?s=128&d=identicon&r=PG&f=1", "display_name": "tmdavison", "link": "https://stackoverflow.com/users/588071/tmdavison"}, "is_accepted": false, "score": 7, "last_activity_date": 1447322996, "creation_date": 1447322996, "answer_id": 33668916, "question_id": 33660420, "link": "https://stackoverflow.com/questions/33660420/seaborn-ticklabels-are-being-truncated/33668916#33668916", "title": "Seaborn ticklabels are being truncated", "body": "<p>Have you tried the <a href=\"http://matplotlib.org/users/tight_layout_guide.html\" rel=\"noreferrer\"><code>tight_layout</code></a> option from <code>matplotlib.pyplot</code>?</p>\n\n<pre><code>ax = sns.heatmap(...)\n\nax.figure.tight_layout()\n</code></pre>\n\n<p>Alternatively, you can control the edges of your subplot area with <a href=\"http://matplotlib.org/api/figure_api.html#matplotlib.figure.Figure.subplots_adjust\" rel=\"noreferrer\"><code>subplots_adjust</code></a>, a method of the <code>plt.figure</code> instance, which you can access with <code>ax.figure.subplots_adjust()</code>:</p>\n\n<pre><code>ax = sns.heatmap(...)\n\nax.figure.subplots_adjust(left = 0.3) # change 0.3 to suit your needs.\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 5552393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c37a04e499d3dd88f4df0ae7ddb2ac3?s=128&d=identicon&r=PG&f=1", "display_name": "jkf", "link": "https://stackoverflow.com/users/5552393/jkf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4696, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1447322996, "creation_date": 1447278276, "last_edit_date": 1447322537, "question_id": 33660420, "link": "https://stackoverflow.com/questions/33660420/seaborn-ticklabels-are-being-truncated", "title": "Seaborn ticklabels are being truncated", "body": "<p>I'm using the Seaborn heatmap function with customized yticklabels. My labels are quite long, and they are being truncated even when I shrink the fontsize. Is there a way to allow longer visible tick labels? </p>\n\n<pre><code>ax = sns.heatmap(\n        pcolor_data, \n        xticklabels=day_columns, \n        yticklabels=line_sales_by_day['product_name'][0:n_skus].values, \n        annot=True, \n        cbar=True, \n        annot_kws={'size':10}, \n        fmt='g', \n        cmap=cmap\n        )\n</code></pre>\n"}, {"tags": ["python", "arrays", "numpy", "dictionary"], "comments": [{"owner": {"reputation": 24570, "user_id": 2272172, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/40d9cf17504d06006a0154ef0b332457?s=128&d=identicon&r=PG&f=1", "display_name": "cel", "link": "https://stackoverflow.com/users/2272172/cel"}, "edited": false, "score": 0, "creation_date": 1447278444, "post_id": 33660362, "comment_id": 55094475, "body": "trying to build a dict that maps an array to the same array makes very little sense. I think you may have to rethink what inputs the other program requires. It seems that a list of arrays may make more sense."}, {"owner": {"reputation": 53, "user_id": 5149482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91aa398d87c66bcd1c6b28c9df9d1333?s=128&d=identicon&r=PG&f=1", "display_name": "Jean Sylvian", "link": "https://stackoverflow.com/users/5149482/jean-sylvian"}, "reply_to_user": {"reputation": 24570, "user_id": 2272172, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/40d9cf17504d06006a0154ef0b332457?s=128&d=identicon&r=PG&f=1", "display_name": "cel", "link": "https://stackoverflow.com/users/2272172/cel"}, "edited": false, "score": 0, "creation_date": 1447278570, "post_id": 33660362, "comment_id": 55094541, "body": "i understand that you can&#39;t map an array to itself, and i apologize for any confusion. i was trying to make the keys have the same name as the arrays for convenience&#39;s sake"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 1, "creation_date": 1447278580, "post_id": 33660362, "comment_id": 55094547, "body": "Did you try:  <code>{&#39;a&#39;:a, &#39;b&#39;:b,...}</code>, or <code>dict(a=a, b=b,...)</code>?  <code>dict([(&#39;a&#39;, a), (&#39;b&#39;, b)])</code> should also work."}, {"owner": {"reputation": 1401, "user_id": 3892023, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/907ba8841224d866d6377d7b6062410b?s=128&d=identicon&r=PG&f=1", "display_name": "Harwee", "link": "https://stackoverflow.com/users/3892023/harwee"}, "edited": false, "score": 1, "creation_date": 1447278612, "post_id": 33660362, "comment_id": 55094569, "body": "I agree with what cel said,  trying to implement dictionary (which is not necessary) where the problem can be solved with an array is not a good way to code."}, {"owner": {"reputation": 5488, "user_id": 3015734, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/31ccee0370328a7c894902c0a70373f7?s=128&d=identicon&r=PG", "display_name": "Tgsmith61591", "link": "https://stackoverflow.com/users/3015734/tgsmith61591"}, "edited": false, "score": 0, "creation_date": 1447278712, "post_id": 33660362, "comment_id": 55094628, "body": "The problem is right now it&#39;s trying to set a numpy array as a key at some point and this won&#39;t work because python doesn&#39;t allow mutable objects as a key in a dict. That&#39;s where the unhashable exception is coming from"}, {"owner": {"reputation": 53, "user_id": 5149482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91aa398d87c66bcd1c6b28c9df9d1333?s=128&d=identicon&r=PG&f=1", "display_name": "Jean Sylvian", "link": "https://stackoverflow.com/users/5149482/jean-sylvian"}, "edited": false, "score": 0, "creation_date": 1447278770, "post_id": 33660362, "comment_id": 55094661, "body": "unfortunately i do not really have a choice in the usage of dictionaries. my original code did utilize a list of arrays. I am being required externally to rework these inputs. also thanks hpjaul, that did fix it. details... every time"}, {"owner": {"reputation": 53, "user_id": 5149482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91aa398d87c66bcd1c6b28c9df9d1333?s=128&d=identicon&r=PG&f=1", "display_name": "Jean Sylvian", "link": "https://stackoverflow.com/users/5149482/jean-sylvian"}, "edited": false, "score": 0, "creation_date": 1447278792, "post_id": 33660362, "comment_id": 55094672, "body": "also, thanks to Tgsmith for explaining where the unhashable is comnig from"}], "answers": [{"comments": [{"owner": {"reputation": 79, "user_id": 4109886, "user_type": "registered", "profile_image": "https://graph.facebook.com/849700301/picture?type=large", "display_name": "Aman Chawla", "link": "https://stackoverflow.com/users/4109886/aman-chawla"}, "reply_to_user": {"reputation": 24570, "user_id": 2272172, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/40d9cf17504d06006a0154ef0b332457?s=128&d=identicon&r=PG&f=1", "display_name": "cel", "link": "https://stackoverflow.com/users/2272172/cel"}, "edited": false, "score": 0, "creation_date": 1447279121, "post_id": 33660521, "comment_id": 55094818, "body": "Oh ya i get it now, well I just started explaining the basic format.. lol.. old habits"}, {"owner": {"reputation": 721, "user_id": 5666203, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fo0sw.jpg?s=128&g=1", "display_name": "AaronJPung", "link": "https://stackoverflow.com/users/5666203/aaronjpung"}, "edited": false, "score": 0, "creation_date": 1565361502, "post_id": 33660521, "comment_id": 101342689, "body": "This was really helpful, I hadn&#39;t been exposed to storing arrays in dictionaries before! You&#39;ve solved my problem, thank you for posting @AmanChawla"}], "tags": [], "owner": {"reputation": 79, "user_id": 4109886, "user_type": "registered", "profile_image": "https://graph.facebook.com/849700301/picture?type=large", "display_name": "Aman Chawla", "link": "https://stackoverflow.com/users/4109886/aman-chawla"}, "is_accepted": false, "score": 3, "last_activity_date": 1447278894, "last_edit_date": 1447278894, "creation_date": 1447278745, "answer_id": 33660521, "question_id": 33660362, "link": "https://stackoverflow.com/questions/33660362/how-to-store-an-array-in-a-dictionary-using-python/33660521#33660521", "title": "How to store an array in a dictionary using python", "body": "<p>You can do this even with using collections </p>\n\n<p>Declare your dictionary as: </p>\n\n<p><code>Dictionary = {};  // {} makes it a key, value pair dictionary</code></p>\n\n<p>add your value for which you want an array as a key by declaring</p>\n\n<p><code>Dictionary[a] = [1,2,3,4];    // [] makes it an array</code></p>\n\n<p>So now your dictionary will look like</p>\n\n<p><code>{a: [1,2,3,4]}</code>    </p>\n\n<p>Which means for key a, you have an array and you can insert data in that which you can access like dictionary[a][0] which will give the value 1 and so on. :)</p>\n\n<p>Btw.. If you look into examples of a dictionary, array and key value pairs, nested dictionary, your concept will get clearer.</p>\n"}, {"comments": [{"owner": {"reputation": 53, "user_id": 5149482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91aa398d87c66bcd1c6b28c9df9d1333?s=128&d=identicon&r=PG&f=1", "display_name": "Jean Sylvian", "link": "https://stackoverflow.com/users/5149482/jean-sylvian"}, "edited": false, "score": 0, "creation_date": 1447279161, "post_id": 33660553, "comment_id": 55094839, "body": "Feel like a rookie, spent like an hour staring at dictionary documentation... thanks!"}], "tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": true, "score": 0, "last_activity_date": 1447278868, "creation_date": 1447278868, "answer_id": 33660553, "question_id": 33660362, "link": "https://stackoverflow.com/questions/33660362/how-to-store-an-array-in-a-dictionary-using-python/33660553#33660553", "title": "How to store an array in a dictionary using python", "body": "<p>Copied from my comment:</p>\n\n<p>Correct dictionary formats:</p>\n\n<pre><code>{'a':a, 'b':b,...}, or \ndict(a=a, b=b,...)\ndict([('a', a), ('b', b),...])\n</code></pre>\n\n<p>The goal is to make the strings 'a','b',etc the keys, not the variable values.</p>\n"}], "owner": {"reputation": 53, "user_id": 5149482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91aa398d87c66bcd1c6b28c9df9d1333?s=128&d=identicon&r=PG&f=1", "display_name": "Jean Sylvian", "link": "https://stackoverflow.com/users/5149482/jean-sylvian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 17616, "favorite_count": 0, "accepted_answer_id": 33660553, "answer_count": 2, "score": 4, "last_activity_date": 1612695922, "creation_date": 1447278069, "question_id": 33660362, "link": "https://stackoverflow.com/questions/33660362/how-to-store-an-array-in-a-dictionary-using-python", "title": "How to store an array in a dictionary using python", "body": "<p>I am currently attempting to modify a series of programs by utilizing dictionaries as opposed to arrays. I have columns of raw information in a file, which is then read into an ASCII csv file. I need to convert this file into a dictionary, so that it can be fed into another program.</p>\n\n<p>I used a numpy.genfromtxt to pull out the information i need from the csv file, following this format:</p>\n\n<pre><code>a,b,c,d = np.genfromtxt(\"file\",delimiter = ',', unpack = true)\n</code></pre>\n\n<p>this step works completely fine.</p>\n\n<p>I then attempt to build a dictionary:</p>\n\n<pre><code>ouputDict = dict([a,a],[b,b],[c,c],[d,d])\n</code></pre>\n\n<p>As i understand it, this should make the <strong>key \"a\"</strong> in the dictionary a correspond to the <strong>array \"a\"</strong>.</p>\n\n<p>thus if:</p>\n\n<pre><code>a = [1,2,3,4]\n</code></pre>\n\n<p>then:</p>\n\n<pre><code>outputDict[a][0] = 1\n</code></pre>\n\n<p>However, when i attempt to create this dictionary i receive the following error:</p>\n\n<pre><code>TypeError: unhashable type: 'numpy.ndarray'\n</code></pre>\n\n<p>Why can't I construct an array in this fashion and what is the workaround, if any? Any help will be greatly appreciated!</p>\n"}, {"tags": ["python", "python-2.7", "unit-testing", "mocking"], "comments": [{"owner": {"reputation": 16853, "user_id": 4101725, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dGwoPMFb_tM/AAAAAAAAAAI/AAAAAAAABks/tMMqc6E9REg/photo.jpg?sz=128", "display_name": "Michele d&#39;Amico", "link": "https://stackoverflow.com/users/4101725/michele-damico"}, "edited": false, "score": 0, "creation_date": 1447333590, "post_id": 33660332, "comment_id": 55116931, "body": "Three question: 1) I took a look to <code>lexicon</code> module at <a href=\"https://github.com/bitprophet/lexicon/tree/master/lexicon\" rel=\"nofollow noreferrer\">github.com/bitprophet/lexicon/tree/master/lexicon</a> and seams to me the class is <code>Lexicon</code> instead <code>lexicon</code>; 2) my guess is that you have another <code>lexicon</code> module and not just the one in <code>D:\\python\\lexicon</code>; 3) why do you need <code>;</code> at the end of the lines ?"}, {"owner": {"reputation": 35, "user_id": 4110346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e05a3334fa6b595cdb7c814aaa714060?s=128&d=identicon&r=PG&f=1", "display_name": "krzym1", "link": "https://stackoverflow.com/users/4110346/krzym1"}, "reply_to_user": {"reputation": 16853, "user_id": 4101725, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dGwoPMFb_tM/AAAAAAAAAAI/AAAAAAAABks/tMMqc6E9REg/photo.jpg?sz=128", "display_name": "Michele d&#39;Amico", "link": "https://stackoverflow.com/users/4101725/michele-damico"}, "edited": false, "score": 0, "creation_date": 1447353450, "post_id": 33660332, "comment_id": 55130644, "body": "1) <code>lexicon</code> is my own module that just happens to have the same name as the one you linked; 2) I have only two files in <code>D:\\python\\lexicon</code> one is <code>lexicon.py</code> and second one is <code>test_lexicon.py</code> containing unittests; 3) The <code>;</code> are just something I got used to in other languages, but that&#39;s not really relevant here"}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 4110346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e05a3334fa6b595cdb7c814aaa714060?s=128&d=identicon&r=PG&f=1", "display_name": "krzym1", "link": "https://stackoverflow.com/users/4110346/krzym1"}, "edited": false, "score": 0, "creation_date": 1447362921, "post_id": 33681026, "comment_id": 55136022, "body": "I&#39;ve stated in the original post that the lexicon is imported simply by <code>import lexicon;</code>. I&#39;ve added the full <code>Parser</code> code to the original post. I&#39;ve seen the Where to Patch. I know that could mock <code>scan</code> method only, but it annoys me that mocking an entire class doesn&#39;t work when theres no reason for it not to"}, {"owner": {"reputation": 16853, "user_id": 4101725, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dGwoPMFb_tM/AAAAAAAAAAI/AAAAAAAABks/tMMqc6E9REg/photo.jpg?sz=128", "display_name": "Michele d&#39;Amico", "link": "https://stackoverflow.com/users/4101725/michele-damico"}, "reply_to_user": {"reputation": 35, "user_id": 4110346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e05a3334fa6b595cdb7c814aaa714060?s=128&d=identicon&r=PG&f=1", "display_name": "krzym1", "link": "https://stackoverflow.com/users/4110346/krzym1"}, "edited": false, "score": 0, "creation_date": 1447365230, "post_id": 33681026, "comment_id": 55137187, "body": "Updated... <code>Parser</code>&#39;s class code was what is really relevant here."}, {"owner": {"reputation": 35, "user_id": 4110346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e05a3334fa6b595cdb7c814aaa714060?s=128&d=identicon&r=PG&f=1", "display_name": "krzym1", "link": "https://stackoverflow.com/users/4110346/krzym1"}, "edited": false, "score": 0, "creation_date": 1447366459, "post_id": 33681026, "comment_id": 55137810, "body": "Thank you! It finally works. I need to read up on references in python, I hoped that such nuisances would be mentioned in Where to Patch documentation."}, {"owner": {"reputation": 16853, "user_id": 4101725, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dGwoPMFb_tM/AAAAAAAAAAI/AAAAAAAABks/tMMqc6E9REg/photo.jpg?sz=128", "display_name": "Michele d&#39;Amico", "link": "https://stackoverflow.com/users/4101725/michele-damico"}, "reply_to_user": {"reputation": 35, "user_id": 4110346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e05a3334fa6b595cdb7c814aaa714060?s=128&d=identicon&r=PG&f=1", "display_name": "krzym1", "link": "https://stackoverflow.com/users/4110346/krzym1"}, "edited": false, "score": 0, "creation_date": 1447366817, "post_id": 33681026, "comment_id": 55137977, "body": "I don&#39;t think that Where to Patch can cover these cases: that is how Python works and you should try to understand what happen on import and understand what is execute and what not. Personally I avoid to execute any kind of function/creation in the static part of the module/class."}], "tags": [], "owner": {"reputation": 16853, "user_id": 4101725, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dGwoPMFb_tM/AAAAAAAAAAI/AAAAAAAABks/tMMqc6E9REg/photo.jpg?sz=128", "display_name": "Michele d&#39;Amico", "link": "https://stackoverflow.com/users/4101725/michele-damico"}, "is_accepted": true, "score": 1, "last_activity_date": 1447365099, "last_edit_date": 1447365099, "creation_date": 1447361254, "answer_id": 33681026, "question_id": 33660332, "link": "https://stackoverflow.com/questions/33660332/mocking-an-entire-class/33681026#33681026", "title": "Mocking an entire class", "body": "<p>What is real relevant here is how <code>categorize_words_in_sentence</code> <code>Parser</code>'s method use <code>lexicon</code>. But first of all we should remove the noise:</p>\n\n<pre><code>print mock_lexicon is lexicon.lexicon + \"\\n\"\n</code></pre>\n\n<p>Is what can lead us to the wrong direction: try to replace it by</p>\n\n<pre><code>self.assertIs(mock_lexicon, lexicon.lexicon)\n</code></pre>\n\n<p>and you will understand that you are printing <code>False</code> because <code>mock_lexicon</code> is not <code>lexicon.lexicon + \"\\n\"</code> but just <code>lexicon.lexicon</code>.</p>\n\n<p>Now I cannot tell you why the first test doesn't work because the answer is in <code>categorize_words_in_sentence</code> method or more probably in <code>sentence_parser</code> module where I can guess you can have something like </p>\n\n<pre><code>from lexicon import lexicon\n</code></pre>\n\n<p>In both case take a look to <a href=\"https://docs.python.org/3/library/unittest.mock.html#where-to-patch\" rel=\"nofollow\">Where to Patch</a> documentation that can enlighten you on what can be the cause and what you really need to patch in your case.</p>\n\n<p>The second version works just because you are patching the object and not the reference (that should be different).</p>\n\n<p>Finally the more concise and general version can be:</p>\n\n<pre><code>@mock.patch('lexicon.lexicon.scan', return_value=\"anything\")\ndef test_categorizedWordsAreAssigned_v3(self, mock_scan) :\n    self.Parser.categorize_words_in_sentence(\"sentence\")\n    mock_scan.assert_called_once_with(\"sentence\")\n</code></pre>\n\n<p>One more thing: remove <code>unittest2</code> at least you're not using python 2.4 and you are interested on backported unittest features.</p>\n\n<p><strong>[EDIT]</strong></p>\n\n<p>Now I can stop to guess and point to you why the first version doesn't work and will never work:</p>\n\n<pre><code>class Parser(object) :\n    my_lexicon = lexicon.lexicon()\n</code></pre>\n\n<p><code>Parser.my_lexicon</code> attribute is evaluated at the <em>load time</em>. That means when you import <code>sentence_parser</code> a <code>lexicon</code> is created and the reference associated to <code>Parser.my_lexicon</code>. When you patch <code>lexicon.lexicon</code> you leave this reference untouched and your parser object still use the original reference created when is imported.</p>\n\n<p>What you can do is to patch the reference in <code>Parser</code> class by</p>\n\n<pre><code>@patch(\"sentence_parser.Parser.my_lexicon\")\n</code></pre>\n\n<p>You can use <a href=\"https://docs.python.org/3/library/unittest.mock.html#create-autospec\" rel=\"nofollow\"><code>create_autospect</code></a> if you want give to your mock the same <code>lexicon</code>'s signature.</p>\n\n<pre><code>@patch(\"sentence_parser.Parser.my_lexicon\", create_autospec(\"lexicon.lexicon\", instance=True))\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 4110346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e05a3334fa6b595cdb7c814aaa714060?s=128&d=identicon&r=PG&f=1", "display_name": "krzym1", "link": "https://stackoverflow.com/users/4110346/krzym1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2501, "favorite_count": 0, "accepted_answer_id": 33681026, "answer_count": 1, "score": 1, "last_activity_date": 1447365099, "creation_date": 1447277968, "last_edit_date": 1447362773, "question_id": 33660332, "link": "https://stackoverflow.com/questions/33660332/mocking-an-entire-class", "title": "Mocking an entire class", "body": "<p>Long story short, I'm perfectly able to mock class method, when it's just that method that's replaced by mock object, but I'm unable to mock that method when I'm trying to replace the whole class by the mock object</p>\n\n<p>The <code>@mock.patch.object</code> successfully mocks the <code>scan</code> method but <code>@mock.patch</code> fails to do so. I've followed the example at \n<a href=\"https://docs.python.org/3/library/unittest.mock.html#unittest.mock.patch\" rel=\"nofollow\">https://docs.python.org/3/library/unittest.mock.html#unittest.mock.patch</a>\nbut apparently I'm doing something wrong. </p>\n\n<p>I'm mocking the lexicon module in the same namespace in both cases (it's imported by <code>import lexicon</code> in the <code>sentence_parser</code>) but the <code>mock_lexicon is lexicon.lexicon</code> check fails</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>#!python\nimport sys;\nsys.path.append('D:\\python\\lexicon');\nimport lexicon;\n\nimport sentence_parser;\nimport unittest2 as unittest;\nimport mock;\n\nclass ParserTestCases(unittest.TestCase) :\n\n    def setUp(self) :\n        self.Parser = sentence_parser.Parser();\n\n    @mock.patch('lexicon.lexicon')\n    def test_categorizedWordsAreAssigned_v1(self, mock_lexicon) :\n\n        print \"mock is lexicon:\";\n        print mock_lexicon is lexicon.lexicon + \"\\n\";\n\n        instance = mock_lexicon.return_value;\n        instance.scan.return_value = \"anything\";    \n\n        self.Parser.categorize_words_in_sentence(\"sentence\");\n        instance.scan.assert_called_once_with(\"sentence\");\n\n    @mock.patch.object(lexicon.lexicon, 'scan')\n    def test_categorizedWordsAreAssigned_v2(self, mock_scan) :\n\n        mock_scan.return_value = \"anything\";    \n\n        self.Parser.categorize_words_in_sentence(\"sentence\");\n        mock_scan.assert_called_once_with(\"sentence\");\n\nif (__name__ == '__main__') :\n    unittest.main()\n</code></pre>\n\n<p>Output :</p>\n\n<pre><code>mock is lexicon:\nFalse\n\n======================================================================\nFAIL: test_categorizedWordsAreAssigned_v1 (__main__.ParserTestCases)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"D:\\python\\get_img\\getImage_env\\lib\\site-packages\\mock\\mock.py\", line 1305, in patched\n    return func(*args, **keywargs)\n  File \"./test_sentence_parser.py\", line 26, in test_categorizedWordsAreAssigned_v1\n    instance.scan.assert_called_once_with(\"sentence\");\n  File \"D:\\python\\get_img\\getImage_env\\lib\\site-packages\\mock\\mock.py\", line 947, in assert_called_once_with\n    raise AssertionError(msg)\nAssertionError: Expected 'scan' to be called once. Called 0 times.\n\n----------------------------------------------------------------------\nRan 2 tests in 0.009s\n\nFAILED (failures=1)\n</code></pre>\n\n<p>EDIT :</p>\n\n<p>To clarify, the <code>Parser</code> is defined as follows </p>\n\n<pre><code>#!python\n\nimport sys;\nsys.path.append('D:\\python\\lexicon');\nimport lexicon;\n\nclass Parser(object) :\n\n    my_lexicon = lexicon.lexicon()\n\n    def __init__(self) :\n        self.categorized_words = ['test'];\n\n    def categorize_words_in_sentence(self, sentence) :\n        self.categorized_words = self.my_lexicon.scan(sentence);\n\n\nif (__name__ == '__main__') :\n    instance = Parser();\n    instance.categorize_words_in_sentence(\"bear\");\n    print instance.categorized_words;\n</code></pre>\n"}, {"tags": ["python", "mongodb", "unix-timestamp", "dst"], "comments": [{"owner": {"reputation": 1390, "user_id": 5551669, "user_type": "registered", "profile_image": "https://graph.facebook.com/100006442653263/picture?type=large", "display_name": "Galax", "link": "https://stackoverflow.com/users/5551669/galax"}, "edited": false, "score": 0, "creation_date": 1447282103, "post_id": 33660329, "comment_id": 55096271, "body": "Be careful though because the <a href=\"https://en.wikipedia.org/wiki/Energy_Policy_Act_of_2005\" rel=\"nofollow noreferrer\">DST rules changed in 2007</a> and they could change again in the future."}], "answers": [{"comments": [{"owner": {"reputation": 421, "user_id": 5020027, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/782b38d9e883bf06d03437fc50b29d72?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick R Miles", "link": "https://stackoverflow.com/users/5020027/patrick-r-miles"}, "edited": false, "score": 0, "creation_date": 1447278815, "post_id": 33660371, "comment_id": 55094680, "body": "So something like: Check the time difference between UTC and EST time when the loop finds that the log file has a new line, then adjust the date it stores based off of that? Would something like .localize take care of this?"}, {"owner": {"reputation": 1390, "user_id": 5551669, "user_type": "registered", "profile_image": "https://graph.facebook.com/100006442653263/picture?type=large", "display_name": "Galax", "link": "https://stackoverflow.com/users/5551669/galax"}, "reply_to_user": {"reputation": 421, "user_id": 5020027, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/782b38d9e883bf06d03437fc50b29d72?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick R Miles", "link": "https://stackoverflow.com/users/5020027/patrick-r-miles"}, "edited": false, "score": 0, "creation_date": 1447280021, "post_id": 33660371, "comment_id": 55095215, "body": "It should be simpler than that, just use the built in functions and always keep times in UTC internally, and always store it as UTC in your file. I&#39;ve added an example to my answer, that formats a time to be saved in the file, and parses it again, ending up with the same time value. You can convert to local time for display a user if needed, but in your code only use UTC time."}, {"owner": {"reputation": 421, "user_id": 5020027, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/782b38d9e883bf06d03437fc50b29d72?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick R Miles", "link": "https://stackoverflow.com/users/5020027/patrick-r-miles"}, "edited": false, "score": 0, "creation_date": 1447281083, "post_id": 33660371, "comment_id": 55095766, "body": "Thanks for the input. You&#39;re suggesting I change how the log file gets written, right? The file is updated by the software for a helium liquefier and I can&#39;t change how it writes to the file. Sorry for the confusion."}, {"owner": {"reputation": 1390, "user_id": 5551669, "user_type": "registered", "profile_image": "https://graph.facebook.com/100006442653263/picture?type=large", "display_name": "Galax", "link": "https://stackoverflow.com/users/5551669/galax"}, "reply_to_user": {"reputation": 421, "user_id": 5020027, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/782b38d9e883bf06d03437fc50b29d72?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick R Miles", "link": "https://stackoverflow.com/users/5020027/patrick-r-miles"}, "edited": false, "score": 1, "creation_date": 1447281318, "post_id": 33660371, "comment_id": 55095886, "body": "Well unfortunately the helium liquefier software developers suck ;) You can use e.g. the Pytz module to convert the local times in the file to GMT, but even that module can&#39;t correctly handle the one hour per year that is ambiguous. If the timestamps are in order you could use that information to work out the correct daylight savings status of the 01:00 that follows a timestamp of 01:30, but it&#39;s quite messy to get that 1 hour per year correct."}, {"owner": {"reputation": 421, "user_id": 5020027, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/782b38d9e883bf06d03437fc50b29d72?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick R Miles", "link": "https://stackoverflow.com/users/5020027/patrick-r-miles"}, "edited": false, "score": 0, "creation_date": 1447282036, "post_id": 33660371, "comment_id": 55096233, "body": "Agreed. I actually had to do a bunch of wonky things to parse the file correctly, like make lists of the locations of all of the tabs, colons, and slashes in the current line and then make strings out of the stuff between certain pairs of those things. It was a good way to start out with Python but I imagine other labs that use liquefiers like this would rather a more usable way of storing data."}, {"owner": {"reputation": 1390, "user_id": 5551669, "user_type": "registered", "profile_image": "https://graph.facebook.com/100006442653263/picture?type=large", "display_name": "Galax", "link": "https://stackoverflow.com/users/5551669/galax"}, "reply_to_user": {"reputation": 421, "user_id": 5020027, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/782b38d9e883bf06d03437fc50b29d72?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick R Miles", "link": "https://stackoverflow.com/users/5020027/patrick-r-miles"}, "edited": false, "score": 0, "creation_date": 1447282312, "post_id": 33660371, "comment_id": 55096362, "body": "Have you come across regular expresssions? Python has a great <code>re</code> module that you might find useful."}], "tags": [], "owner": {"reputation": 1390, "user_id": 5551669, "user_type": "registered", "profile_image": "https://graph.facebook.com/100006442653263/picture?type=large", "display_name": "Galax", "link": "https://stackoverflow.com/users/5551669/galax"}, "is_accepted": false, "score": 4, "last_activity_date": 1447280190, "last_edit_date": 1447280190, "creation_date": 1447278092, "answer_id": 33660371, "question_id": 33660329, "link": "https://stackoverflow.com/questions/33660329/how-do-i-account-for-daylight-savings-time-when-parsing-date-time-from-a-text-fi/33660371#33660371", "title": "How do I account for Daylight Savings Time when parsing date/time from a text file?", "body": "<p>The best thing to do would be to store all dates &amp; times in UTC, a.k.a. GMT, and to compare them against other UTC times. If you use local time you should also store a time offset or flag to say whether or not the daylight switch has occurred, as some local times are ambiguous e.g. 1:30am on the morning that the clocks go back in the fall, but it gets quite messy though.</p>\n\n<p>Example manipulating time in GMT:</p>\n\n<pre><code>import time, calendar\nseconds = int(time.time())\nprint(seconds)\ngmtstruct = time.gmtime(seconds)\ntimeformat = \"%Y-%m-%d %H:%M:%S\"\ntimestr = time.strftime(timeformat, gmtstruct)\nprint(timestr + \" +0000\")\nreadstruct = time.strptime(timestr, timeformat)\nreadseconds = calendar.timegm(readstruct)\nprint(readseconds)\n</code></pre>\n\n<p>Outputs:</p>\n\n<pre><code>1447279828\n2015-11-11 22:10:28 +0000\n1447279828\n</code></pre>\n\n<p>I ran this at 5:10pm local time, which is EST, so the GMT time was formatted as 22:10. I added the \"+0000\" to indicate that the time zone is GMT for future users of the file.</p>\n"}, {"comments": [{"owner": {"reputation": 1390, "user_id": 5551669, "user_type": "registered", "profile_image": "https://graph.facebook.com/100006442653263/picture?type=large", "display_name": "Galax", "link": "https://stackoverflow.com/users/5551669/galax"}, "edited": false, "score": 2, "creation_date": 1447281452, "post_id": 33660769, "comment_id": 55095962, "body": "If the time stamps are being written to a file sequentially, then the second entry must come after the first, but there is no way to know if they are half an hour apart or 90 minutes apart, unless the next entry is say 01:30 again, in which case you know that they were 30 minutes apart. All very messy."}, {"owner": {"reputation": 421, "user_id": 5020027, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/782b38d9e883bf06d03437fc50b29d72?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick R Miles", "link": "https://stackoverflow.com/users/5020027/patrick-r-miles"}, "edited": false, "score": 1, "creation_date": 1447281679, "post_id": 33660769, "comment_id": 55096073, "body": "Thanks for the input. I used pytz originally, but I couldn&#39;t get it to work the way I wanted it to so I switched to using timeStamps. I edited the original post with a possible solution, and I&#39;ll edit again with an update."}, {"owner": {"reputation": 195413, "user_id": 634824, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/889cf720c96957e615463b5c903a5e18?s=128&d=identicon&r=PG", "display_name": "Matt Johnson-Pint", "link": "https://stackoverflow.com/users/634824/matt-johnson-pint"}, "reply_to_user": {"reputation": 1390, "user_id": 5551669, "user_type": "registered", "profile_image": "https://graph.facebook.com/100006442653263/picture?type=large", "display_name": "Galax", "link": "https://stackoverflow.com/users/5551669/galax"}, "edited": false, "score": 0, "creation_date": 1447614804, "post_id": 33660769, "comment_id": 55217047, "body": "@Galax - Yes, that is a good approach, but of course, it depends on having data that is out of sequence in the file (data written both before and after the transition during the ambiguous period).  In this example there is, but in the generic case it might be that there was activity only on one side of the transition - in which case you can&#39;t tell which side it was on. :)"}, {"owner": {"reputation": 1390, "user_id": 5551669, "user_type": "registered", "profile_image": "https://graph.facebook.com/100006442653263/picture?type=large", "display_name": "Galax", "link": "https://stackoverflow.com/users/5551669/galax"}, "edited": false, "score": 0, "creation_date": 1447697486, "post_id": 33660769, "comment_id": 55252019, "body": "Yes, although if the file is checked every 15 seconds you can tell when the data was written by when it appeared in the file. All ugly hacks to workaround a flaw in the data format."}, {"owner": {"reputation": 455, "user_id": 1313741, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b64a56218bcb76d5499a4281f01e55?s=128&d=identicon&r=PG", "display_name": "Bobby Russell", "link": "https://stackoverflow.com/users/1313741/bobby-russell"}, "reply_to_user": {"reputation": 1390, "user_id": 5551669, "user_type": "registered", "profile_image": "https://graph.facebook.com/100006442653263/picture?type=large", "display_name": "Galax", "link": "https://stackoverflow.com/users/5551669/galax"}, "edited": false, "score": 0, "creation_date": 1447708377, "post_id": 33660769, "comment_id": 55257850, "body": "@Galax, you know can know when the entry was written, but how do you classify the entry semantically? Should an entry written at 1:59AM be placed before or after an entry written at 1:30AM? Even if the event at 1:59 &#39;truly&#39; (for lack of a better word) took place before before the event at 1:30, you still have a confusing entry in your log. It is not an easy problem to solve."}, {"owner": {"reputation": 1390, "user_id": 5551669, "user_type": "registered", "profile_image": "https://graph.facebook.com/100006442653263/picture?type=large", "display_name": "Galax", "link": "https://stackoverflow.com/users/5551669/galax"}, "edited": false, "score": 0, "creation_date": 1447715546, "post_id": 33660769, "comment_id": 55261125, "body": "The entries will written to the file in the order that they occur. A &#39;confusing entry&#39; (which has a lower numeric value for local time than a previous entry) will indicate that either an error (such as a change to the device&#39;s internal clock) or the fall daylight switch occurred."}, {"owner": {"reputation": 1390, "user_id": 5551669, "user_type": "registered", "profile_image": "https://graph.facebook.com/100006442653263/picture?type=large", "display_name": "Galax", "link": "https://stackoverflow.com/users/5551669/galax"}, "edited": false, "score": 1, "creation_date": 1447715780, "post_id": 33660769, "comment_id": 55261222, "body": "Your question &quot;Should an entry written at 1:59AM be placed before or after an entry written at 1:30AM?&quot; doesn&#39;t make sense, because you said that you can&#39;t modify the device that writes the log entries- how can you decide which order it should write them in?"}, {"owner": {"reputation": 455, "user_id": 1313741, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b64a56218bcb76d5499a4281f01e55?s=128&d=identicon&r=PG", "display_name": "Bobby Russell", "link": "https://stackoverflow.com/users/1313741/bobby-russell"}, "reply_to_user": {"reputation": 1390, "user_id": 5551669, "user_type": "registered", "profile_image": "https://graph.facebook.com/100006442653263/picture?type=large", "display_name": "Galax", "link": "https://stackoverflow.com/users/5551669/galax"}, "edited": false, "score": 0, "creation_date": 1447716986, "post_id": 33660769, "comment_id": 55261586, "body": "@Galax, the condition <code>elif(newdataDate &lt; latestDate): #Throw error, end script</code> is what is complicating things here. If you just print the dates to a file, parsing will throw and error. If you reorder them, then you can&#39;t tell which entry came first."}, {"owner": {"reputation": 1390, "user_id": 5551669, "user_type": "registered", "profile_image": "https://graph.facebook.com/100006442653263/picture?type=large", "display_name": "Galax", "link": "https://stackoverflow.com/users/5551669/galax"}, "edited": false, "score": 1, "creation_date": 1447729359, "post_id": 33660769, "comment_id": 55264994, "body": "If you print the dates to a file yourself, convert them to UTC first as I originally mentioned and everything will be fine from that point on."}], "tags": [], "owner": {"reputation": 455, "user_id": 1313741, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b64a56218bcb76d5499a4281f01e55?s=128&d=identicon&r=PG", "display_name": "Bobby Russell", "link": "https://stackoverflow.com/users/1313741/bobby-russell"}, "is_accepted": false, "score": 0, "last_activity_date": 1447279652, "creation_date": 1447279652, "answer_id": 33660769, "question_id": 33660329, "link": "https://stackoverflow.com/questions/33660329/how-do-i-account-for-daylight-savings-time-when-parsing-date-time-from-a-text-fi/33660769#33660769", "title": "How do I account for Daylight Savings Time when parsing date/time from a text file?", "body": "<p>This is pretty tricky, because you're not storing datetime objects, but rather flat text. You have to store time zone data in your flat files somehow. I don't there is any other conceivable way to account for DST without that.</p>\n\n<p>Even then, there are some corner cases where you won't be able to figure out which record came before the other. For example:</p>\n\n<pre><code>11/1/2015   1:30:39 AM  3.14    0.00    4.18\n11/1/2015   1:59:59 AM  3.14    0.00    4.18  \n</code></pre>\n\n<p>Assuming we gain an hour at 2AM (i.e., 1:59:59 AM -> 1:00:00 AM,) there is no way to know which record came first as far as I can tell. <a href=\"http://pytz.sourceforge.net/\" rel=\"nofollow\">Pytz</a> is good for working with timezone data, for whatever that is worth to you.</p>\n"}, {"tags": [], "owner": {"reputation": 1390, "user_id": 5551669, "user_type": "registered", "profile_image": "https://graph.facebook.com/100006442653263/picture?type=large", "display_name": "Galax", "link": "https://stackoverflow.com/users/5551669/galax"}, "is_accepted": false, "score": 0, "last_activity_date": 1447281939, "creation_date": 1447281939, "answer_id": 33661291, "question_id": 33660329, "link": "https://stackoverflow.com/questions/33660329/how-do-i-account-for-daylight-savings-time-when-parsing-date-time-from-a-text-fi/33661291#33661291", "title": "How do I account for Daylight Savings Time when parsing date/time from a text file?", "body": "<p>A simpler answer is to change your script to:</p>\n\n<pre><code>if(newdataDate &gt; latestDate):\n    db.LiqLog.insert(newdata)\nelif(newdataDate &lt; latestDate):\n    print(\"Warning: DST switch detected\")\n    db.LiqLog.insert(newdata)\n</code></pre>\n\n<p>Are there any other error conditions that could cause the new date in the file to be earlier than the last date?</p>\n\n<p>Why do you need to check the date at all? If an extra line has been written to the file, is there always new data to insert?</p>\n"}], "owner": {"reputation": 421, "user_id": 5020027, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/782b38d9e883bf06d03437fc50b29d72?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick R Miles", "link": "https://stackoverflow.com/users/5020027/patrick-r-miles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 708, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1447281939, "creation_date": 1447277933, "last_edit_date": 1447281799, "question_id": 33660329, "link": "https://stackoverflow.com/questions/33660329/how-do-i-account-for-daylight-savings-time-when-parsing-date-time-from-a-text-fi", "title": "How do I account for Daylight Savings Time when parsing date/time from a text file?", "body": "<p>I've written a python script to parse raw text into usable data, but the recent DST time change has thrown things off. Here's some of the text, specifically the portion that causes problems:</p>\n\n<pre><code>11/1/2015   1:00:37 AM  3.14    0.00    4.18  \n11/1/2015   1:30:37 AM  3.14    0.00    4.18  \n11/1/2015   1:00:39 AM  3.14    0.00    4.18  \n11/1/2015   1:30:39 AM  3.14    0.00    4.18  \n11/1/2015   2:00:40 AM  3.14    0.00    4.18\n</code></pre>\n\n<p>The text file gets updated at regular intervals and syncs to dropbox.  On the first run of the script, it populates a mongodb collection with documents that correspond to each line of the file. Each document contains a datetime (for readability in the mongo shell), a timeStamp, and other fields that correspond to the data from the file.  </p>\n\n<p>Once the collection is populated, a loop runs every 15 seconds that compares the number of lines in the file to the number of documents in the collection. If the file contains more lines, the script then reads the lowest line in the file and parses it into a document that can be added to the database. It compares the timeStamp of this potential new document to that of the latest document in the collection with</p>\n\n<pre><code>if(newdataDate &gt; latestDate):\n    db.LiqLog.insert(newdata)\nelif(newdataDate &lt; latestDate):\n    #Throw error, end script\n</code></pre>\n\n<p>How can I have my script account for changes in the log file due to DST? The only way I can think of is to hard code future DST time changes and work around those. This script will probably run continuously on our lab server for many years, and since I have no way of knowing how long it needs to run for, it would be best for it to be able to handle DST without the need for hard coding dates.</p>\n\n<p>Edit: I found <a href=\"http://www.nist.gov/pml/div688/dst.cfm\" rel=\"nofollow\">online</a> that DST always begins on the second Sunday of March and ends on the second Sunday of November. I'm going to try to work with this and I'll edit this post again once I make progress. Thank you all for your help so far.</p>\n"}, {"tags": ["python", "flask", "sqlalchemy", "flask-sqlalchemy"], "answers": [{"comments": [{"owner": {"reputation": 403, "user_id": 1674908, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/4d73f64ba1212e0b5890968f07739826?s=128&d=identicon&r=PG", "display_name": "Hamlett", "link": "https://stackoverflow.com/users/1674908/hamlett"}, "edited": false, "score": 0, "creation_date": 1447282098, "post_id": 33661121, "comment_id": 55096268, "body": "unique=True is for single columns, I need to create a unique compund constraint. name=name is an explicit way to pass the parameter."}, {"owner": {"reputation": 4729, "user_id": 1703772, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/963bc9ac37c31c3f6bff29dc60b8891b?s=128&d=identicon&r=PG", "display_name": "NuclearPeon", "link": "https://stackoverflow.com/users/1703772/nuclearpeon"}, "reply_to_user": {"reputation": 403, "user_id": 1674908, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/4d73f64ba1212e0b5890968f07739826?s=128&d=identicon&r=PG", "display_name": "Hamlett", "link": "https://stackoverflow.com/users/1674908/hamlett"}, "edited": false, "score": 0, "creation_date": 1447284031, "post_id": 33661121, "comment_id": 55097059, "body": "@Jp_uy Does this help? <a href=\"http://stackoverflow.com/questions/10059345/sqlalchemy-unique-across-multiple-columns\" title=\"sqlalchemy unique across multiple columns\">stackoverflow.com/questions/10059345/&hellip;</a> -- It looks like your unique constraint is correct, does fixing the <code>__init__</code> method fix the problem?"}, {"owner": {"reputation": 403, "user_id": 1674908, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/4d73f64ba1212e0b5890968f07739826?s=128&d=identicon&r=PG", "display_name": "Hamlett", "link": "https://stackoverflow.com/users/1674908/hamlett"}, "edited": false, "score": 1, "creation_date": 1447437329, "post_id": 33661121, "comment_id": 55169684, "body": "This is almost what I want to do, in fact, what I&#39;m doing but with the little difference that I have inheritance. The inheritance is what is complicating in my case. To be more specific, class Parametric is the parent of Bar. I want to set the unique constraint in the Parent but when the child is read by the interpreter, it tries to create it from the child (I mean, taking just the child attributes) and fails."}], "tags": [], "owner": {"reputation": 4729, "user_id": 1703772, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/963bc9ac37c31c3f6bff29dc60b8891b?s=128&d=identicon&r=PG", "display_name": "NuclearPeon", "link": "https://stackoverflow.com/users/1703772/nuclearpeon"}, "is_accepted": false, "score": 0, "last_activity_date": 1447281179, "creation_date": 1447281179, "answer_id": 33661121, "question_id": 33660318, "link": "https://stackoverflow.com/questions/33660318/uniqueconstraint-in-parent-class-sqlalchemy/33661121#33661121", "title": "UniqueConstraint in parent class SQLAlchemy", "body": "<p>In SQLAlchemy, you can specify a Column to be unique with the <code>unique=True</code> parameter. I think that would be a preferred, more readable way of doing things.</p>\n\n<p>I think your problem is to do with inheritance, possibly syntax.</p>\n\n<p>In your Parametic's <code>__init__()</code> function, you have <code>name</code>. Notice that <code>name</code> is an arg, not a kwarg. Instead of using <code>name=name</code>, just submit name like so:</p>\n\n<pre><code>super(Parametric, self).__init__(name)\n</code></pre>\n"}], "owner": {"reputation": 403, "user_id": 1674908, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/4d73f64ba1212e0b5890968f07739826?s=128&d=identicon&r=PG", "display_name": "Hamlett", "link": "https://stackoverflow.com/users/1674908/hamlett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 925, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1447281179, "creation_date": 1447277900, "last_edit_date": 1447278297, "question_id": 33660318, "link": "https://stackoverflow.com/questions/33660318/uniqueconstraint-in-parent-class-sqlalchemy", "title": "UniqueConstraint in parent class SQLAlchemy", "body": "<p>I'm trying to add a unique constraint in a parent class in Flask-SQLAlchemy in the next way.\nAs you see, the inheritance is represeted in the Joined Table way.</p>\n\n<pre><code>class Parametric(object, Model):\n  __tablename__ = \"parametric\"\n  __mapper_args__ = {'polymorphic_on': type,\n                     'polymorphic_identity': 'Parametric'}\n  __table_args__ = (\n         db.UniqueConstraint('name', 'type', name='name_type'),\n     )\n  id = Column(db.Integer, primary_key=True)\n  name = Column(db.String(32), nullable=False)\n  type = Column(db.String(50)) \n\n  def __init__(self, name):\n   self.name = name\n\n\nclass Bar(Parametric):        \n  __tablename__ = \"bar\"\n  __mapper_args__ = {'polymorphic_identity': 'Foo'}\n  prop = Column(db.String(32), nullable=False)\n  id = db.Column(db.Integer, db.ForeignKey('parametric.id'), primary_key=True)\n\n  def __init__(self, name, prop):\n   super(Parametric, self).__init__(name=name)\n   self.prop = prop\n</code></pre>\n\n<p>When the first child is read by the interpreter, i get the next traceback:</p>\n\n<pre><code>  File \"/usr/local/lib/python2.7/dist-packages/Flask_SQLAlchemy-1.0-py2.7.egg/flask_sqlalchemy/__init__.py\", line 510, in __init__\n    DeclarativeMeta.__init__(self, name, bases, d)\n  File \"/usr/local/lib/python2.7/dist-packages/SQLAlchemy-0.9.4-py2.7-linux-x86_64.egg/sqlalchemy/ext/declarative/api.py\", line 53, in __init__\n    _as_declarative(cls, classname, cls.__dict__)\n  File \"/usr/local/lib/python2.7/dist-packages/SQLAlchemy-0.9.4-py2.7-linux-x86_64.egg/sqlalchemy/ext/declarative/base.py\", line 251, in _as_declarative\n    **table_kw)\n  File \"/usr/local/lib/python2.7/dist-packages/SQLAlchemy-0.9.4-py2.7-linux-x86_64.egg/sqlalchemy/sql/schema.py\", line 352, in __new__\n    table._init(name, metadata, *args, **kw)\n  File \"/usr/local/lib/python2.7/dist-packages/SQLAlchemy-0.9.4-py2.7-linux-x86_64.egg/sqlalchemy/sql/schema.py\", line 429, in _init\n    self._init_items(*args)\n  File \"/usr/local/lib/python2.7/dist-packages/SQLAlchemy-0.9.4-py2.7-linux-x86_64.egg/sqlalchemy/sql/schema.py\", line 72, in _init_items\n    item._set_parent_with_dispatch(self)\n  File \"/usr/local/lib/python2.7/dist-packages/SQLAlchemy-0.9.4-py2.7-linux-x86_64.egg/sqlalchemy/sql/base.py\", line 421, in _set_parent_with_dispatch\n    self._set_parent(parent)\n  File \"/usr/local/lib/python2.7/dist-packages/SQLAlchemy-0.9.4-py2.7-linux-x86_64.egg/sqlalchemy/sql/schema.py\", line 2272, in _set_parent\n    ColumnCollectionMixin._set_parent(self, table)\n  File \"/usr/local/lib/python2.7/dist-packages/SQLAlchemy-0.9.4-py2.7-linux-x86_64.egg/sqlalchemy/sql/schema.py\", line 2240, in _set_parent\n    col = table.c[col]\n  File \"/usr/local/lib/python2.7/dist-packages/SQLAlchemy-0.9.4-py2.7-linux-x86_64.egg/sqlalchemy/util/_collections.py\", line 156, in __getitem__\n    return self._data[key]\nKeyError: 'name'\n</code></pre>\n\n<p>Any solution? is there something wrong in my code?</p>\n"}, {"tags": ["python", "xml", "xpath", "robotframework"], "answers": [{"comments": [{"owner": {"reputation": 17081, "user_id": 702948, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/67e6e5d7a11beaccbb17bd47142b42de?s=128&d=identicon&r=PG", "display_name": "ewok", "link": "https://stackoverflow.com/users/702948/ewok"}, "edited": false, "score": 0, "creation_date": 1447278166, "post_id": 33660355, "comment_id": 55094348, "body": "<code>SyntaxError(&quot;cannot use absolute path on element&quot;)</code>"}, {"owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "reply_to_user": {"reputation": 17081, "user_id": 702948, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/67e6e5d7a11beaccbb17bd47142b42de?s=128&d=identicon&r=PG", "display_name": "ewok", "link": "https://stackoverflow.com/users/702948/ewok"}, "edited": false, "score": 1, "creation_date": 1447278183, "post_id": 33660355, "comment_id": 55094359, "body": "@ewok sure, added the dot."}, {"owner": {"reputation": 17081, "user_id": 702948, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/67e6e5d7a11beaccbb17bd47142b42de?s=128&d=identicon&r=PG", "display_name": "ewok", "link": "https://stackoverflow.com/users/702948/ewok"}, "edited": false, "score": 0, "creation_date": 1447278274, "post_id": 33660355, "comment_id": 55094402, "body": "<code>SyntaxError(&quot;invalid predicate&quot;)</code>.  I suppose I should also ask. I&#39;m currently starting with <code>root = ElementTree.parse(filename).getroot()</code> and executing <code>root.findall()</code>.  will this work?"}, {"owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "reply_to_user": {"reputation": 17081, "user_id": 702948, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/67e6e5d7a11beaccbb17bd47142b42de?s=128&d=identicon&r=PG", "display_name": "ewok", "link": "https://stackoverflow.com/users/702948/ewok"}, "edited": false, "score": 1, "creation_date": 1447278450, "post_id": 33660355, "comment_id": 55094478, "body": "@ewok is this an <code>xml.etree.ElementTree</code> you are using? It has a <a href=\"https://docs.python.org/2/library/xml.etree.elementtree.html#xpath-support\" rel=\"nofollow noreferrer\">rather limited xpath support</a>, switch to <code>lxml.etree</code> if possible."}, {"owner": {"reputation": 17081, "user_id": 702948, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/67e6e5d7a11beaccbb17bd47142b42de?s=128&d=identicon&r=PG", "display_name": "ewok", "link": "https://stackoverflow.com/users/702948/ewok"}, "edited": false, "score": 0, "creation_date": 1447278552, "post_id": 33660355, "comment_id": 55094531, "body": "yes it is.  Is there a way do it using <code>xml.etree.ElementTree</code>? I&#39;ll look into switching.  shouldnt be a problem, but just in case"}, {"owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "reply_to_user": {"reputation": 17081, "user_id": 702948, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/67e6e5d7a11beaccbb17bd47142b42de?s=128&d=identicon&r=PG", "display_name": "ewok", "link": "https://stackoverflow.com/users/702948/ewok"}, "edited": false, "score": 1, "creation_date": 1447278629, "post_id": 33660355, "comment_id": 55094587, "body": "@ewok I&#39;m afraid that you&#39;ll have to loop over the <code>test</code> elements and check if there is a <code>status</code> element with a desired <code>status</code> attribute inside. Lmk if you need an example. Thanks."}, {"owner": {"reputation": 17081, "user_id": 702948, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/67e6e5d7a11beaccbb17bd47142b42de?s=128&d=identicon&r=PG", "display_name": "ewok", "link": "https://stackoverflow.com/users/702948/ewok"}, "edited": false, "score": 0, "creation_date": 1447279424, "post_id": 33660355, "comment_id": 55094956, "body": "<code>lxml</code> is still giving me a <code>SyntaxError(&quot;invalid predicate&quot;)</code>"}, {"owner": {"reputation": 17081, "user_id": 702948, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/67e6e5d7a11beaccbb17bd47142b42de?s=128&d=identicon&r=PG", "display_name": "ewok", "link": "https://stackoverflow.com/users/702948/ewok"}, "edited": false, "score": 1, "creation_date": 1447279603, "post_id": 33660355, "comment_id": 55095038, "body": "nevermind.  I was still using <code>root.findall()</code> and I needed to use <code>root.xpath()</code>. thanks!"}], "tags": [], "owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "is_accepted": true, "score": 1, "last_activity_date": 1447278178, "last_edit_date": 1447278178, "creation_date": 1447278048, "answer_id": 33660355, "question_id": 33660309, "link": "https://stackoverflow.com/questions/33660309/python-xml-xpath-for-elements-with-childer-with-specific-attribute-values/33660355#33660355", "title": "python xml: xpath for elements with childer with specific attribute values", "body": "<p>You are almost there:</p>\n\n<pre><code>.//test[status/@status = \"PASS\"]\n</code></pre>\n\n<p>This is exactly <em>All nodes with the tag \"test\" that have a child with the tag \"status\" that have an attribute called \"status\" with the value \"PASS\"</em>.</p>\n"}], "owner": {"reputation": 17081, "user_id": 702948, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/67e6e5d7a11beaccbb17bd47142b42de?s=128&d=identicon&r=PG", "display_name": "ewok", "link": "https://stackoverflow.com/users/702948/ewok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 214, "favorite_count": 2, "accepted_answer_id": 33660355, "answer_count": 1, "score": 1, "last_activity_date": 1447341306, "creation_date": 1447277865, "last_edit_date": 1447341306, "question_id": 33660309, "link": "https://stackoverflow.com/questions/33660309/python-xml-xpath-for-elements-with-childer-with-specific-attribute-values", "title": "python xml: xpath for elements with childer with specific attribute values", "body": "<p>I need an xpath expression for the following:</p>\n\n<p>All nodes with the tag \"test\" that have a child with the tag \"status\" that have an attribute called \"status\" with the value \"PASS\"</p>\n\n<p>so with the xml below, I need to get the node with the id \"s1-t1\".  I should be able to modify this so that instead of Passed tests, I get tests with the attribute <code>[@status='FAIL']</code>.  I've tried a couple things to no avail:</p>\n\n<ul>\n<li><code>\".//test/[@status='PASS']\"</code> returns nothing</li>\n<li><code>\".//test/[status][@status='PASS']\"</code> returns nothing</li>\n<li><code>\".//test//[status][@status='PASS']\"</code> throws a SyntaxError(\"invalid descendant\")</li>\n<li><code>\".//test//status[@status='PASS']\"</code> returns 2 status nodes (one for the test status and one for the keyword status)</li>\n<li><code>\".//test//status[@status='PASS']/../..\"</code> returns the correct test node, but also the suite node</li>\n</ul>\n\n<p>I'm not sure what to try at this point.  Here's the XML I'm working on:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;robot generated=\"20151111 16:29:28.630\" generator=\"Robot 2.9.1 (Python 2.7.10 on cygwin)\"&gt;\n&lt;suite source=\"/cygdrive/c/test/robot/thing.robot\" id=\"s1\" name=\"Thing\"&gt;\n&lt;test id=\"s1-t1\" name=\"Case1\"&gt;\n&lt;kw name=\"Should Contain\" library=\"BuiltIn\"&gt;\n&lt;doc&gt;Fails if ``item1`` does not contain ``item2`` one or more times.&lt;/doc&gt;\n&lt;arguments&gt;\n&lt;arg&gt;hello&lt;/arg&gt;\n&lt;arg&gt;hell&lt;/arg&gt;\n&lt;/arguments&gt;\n&lt;status status=\"PASS\" endtime=\"20151111 16:29:28.689\" starttime=\"20151111 16:29:28.689\"&gt;&lt;/status&gt;\n&lt;/kw&gt;\n&lt;status status=\"PASS\" endtime=\"20151111 16:29:28.689\" critical=\"yes\" starttime=\"20151111 16:29:28.688\"&gt;&lt;/status&gt;\n&lt;/test&gt;\n&lt;test id=\"s1-t2\" name=\"Case2\"&gt;\n&lt;kw name=\"Should Contain\" library=\"BuiltIn\"&gt;\n&lt;doc&gt;Fails if ``item1`` does not contain ``item2`` one or more times.&lt;/doc&gt;\n&lt;arguments&gt;\n&lt;arg&gt;hello&lt;/arg&gt;\n&lt;arg&gt;elo&lt;/arg&gt;\n&lt;/arguments&gt;\n&lt;msg timestamp=\"20151111 16:29:28.690\" level=\"FAIL\"&gt;'hello' does not contain 'elo'&lt;/msg&gt;\n&lt;status status=\"FAIL\" endtime=\"20151111 16:29:28.690\" starttime=\"20151111 16:29:28.690\"&gt;&lt;/status&gt;\n&lt;/kw&gt;\n&lt;status status=\"FAIL\" endtime=\"20151111 16:29:28.690\" critical=\"yes\" starttime=\"20151111 16:29:28.690\"&gt;'hello' does not contain 'elo'&lt;/status&gt;\n&lt;/test&gt;\n&lt;test id=\"s1-t3\" name=\"Case3\"&gt;\n&lt;kw name=\"Should Contain\" library=\"BuiltIn\"&gt;\n&lt;doc&gt;Fails if ``item1`` does not contain ``item2`` one or more times.&lt;/doc&gt;\n&lt;arguments&gt;\n&lt;arg&gt;hello&lt;/arg&gt;\n&lt;/arguments&gt;\n&lt;msg timestamp=\"20151111 16:29:28.691\" level=\"FAIL\"&gt;Keyword 'BuiltIn.Should Contain' expected 2 to 4 arguments, got 1.&lt;/msg&gt;\n&lt;status status=\"FAIL\" endtime=\"20151111 16:29:28.691\" starttime=\"20151111 16:29:28.691\"&gt;&lt;/status&gt;\n&lt;/kw&gt;\n&lt;status status=\"FAIL\" endtime=\"20151111 16:29:28.691\" critical=\"yes\" starttime=\"20151111 16:29:28.691\"&gt;Keyword 'BuiltIn.Should Contain' expected 2 to 4 arguments, got 1.&lt;/status&gt;\n&lt;/test&gt;\n&lt;status status=\"FAIL\" endtime=\"20151111 16:29:28.692\" starttime=\"20151111 16:29:28.633\"&gt;&lt;/status&gt;\n&lt;/suite&gt;\n&lt;statistics&gt;\n&lt;total&gt;\n&lt;stat fail=\"2\" pass=\"1\"&gt;Critical Tests&lt;/stat&gt;\n&lt;stat fail=\"2\" pass=\"1\"&gt;All Tests&lt;/stat&gt;\n&lt;/total&gt;\n&lt;tag&gt;\n&lt;/tag&gt;\n&lt;suite&gt;\n&lt;stat fail=\"2\" id=\"s1\" name=\"Thing\" pass=\"1\"&gt;Thing&lt;/stat&gt;\n&lt;/suite&gt;\n&lt;/statistics&gt;\n&lt;errors&gt;\n&lt;/errors&gt;\n&lt;/robot&gt;\n</code></pre>\n"}, {"tags": ["python", "youtube", "youtube-api", "youtube-analytics-api"], "answers": [{"tags": [], "owner": {"reputation": 39, "user_id": 5420430, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1e2d06faff1745e0ef6ac97e9dd1aee?s=128&d=identicon&r=PG&f=1", "display_name": "user5420430", "link": "https://stackoverflow.com/users/5420430/user5420430"}, "is_accepted": false, "score": 2, "last_activity_date": 1447451681, "last_edit_date": 1447451681, "creation_date": 1447437933, "answer_id": 33699139, "question_id": 33660279, "link": "https://stackoverflow.com/questions/33660279/youtube-reporting-api-retrieve-reports-py-report-url-to-download/33699139#33699139", "title": "youtube-reporting-api retrieve_reports.py &quot;report URL to download&quot;", "body": "<p>Apologies, download url's are provided, not sure why it wasn't showing in the first place, maybe copy and pasted the code incorrectly.  It is displayed out of the retrieve_reports function.</p>\n\n<p>It looks like the actual problem is that I did not read the docs thoroughly! reports are not available for 48 hours!</p>\n\n<p>It would be nice if we had a development mode or something, pointing at non-prod youtube environment where we could get reports immediately, am I missing something that could provide this?</p>\n"}], "owner": {"reputation": 39, "user_id": 5420430, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1e2d06faff1745e0ef6ac97e9dd1aee?s=128&d=identicon&r=PG&f=1", "display_name": "user5420430", "link": "https://stackoverflow.com/users/5420430/user5420430"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 311, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1472034076, "creation_date": 1447277748, "question_id": 33660279, "link": "https://stackoverflow.com/questions/33660279/youtube-reporting-api-retrieve-reports-py-report-url-to-download", "title": "youtube-reporting-api retrieve_reports.py &quot;report URL to download&quot;", "body": "<p>When stepping thru the example python code for creating and retrieving data using the youtube-reporting-api, when I get to the retrieve_report.py code that prompts me to:</p>\n\n<p>Please enter the report URL to download:</p>\n\n<p>What is supposed to be entered here? A specific example would be most helpful. </p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 24570, "user_id": 2272172, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/40d9cf17504d06006a0154ef0b332457?s=128&d=identicon&r=PG&f=1", "display_name": "cel", "link": "https://stackoverflow.com/users/2272172/cel"}, "edited": false, "score": 2, "creation_date": 1447278146, "post_id": 33660276, "comment_id": 55094332, "body": "You may want to give an example data frame, show the output you desire and explain how your code does not meet your expectations."}], "answers": [{"tags": [], "owner": {"reputation": 7235, "user_id": 3734914, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/JAGw8.jpg?s=128&g=1", "display_name": "Batman", "link": "https://stackoverflow.com/users/3734914/batman"}, "is_accepted": false, "score": 0, "last_activity_date": 1447279831, "last_edit_date": 1447279831, "creation_date": 1447278493, "answer_id": 33660467, "question_id": 33660276, "link": "https://stackoverflow.com/questions/33660276/how-to-select-random-samples-of-elements-with-a-particular-id/33660467#33660467", "title": "how to select random samples of elements with a particular id", "body": "<p>Not sure a <code>DataFrameGroupBy</code> object is what you want. I think you'd be better off using <code>DataFrame.sample()</code> for each id.</p>\n\n<pre><code>frames = list()\nfor buisness_id in df['business_id'].unique():\n    frame = df[df['business_id'] == business_id].sample(5)\n    frames.append(frame)\n\ndf = pd.concat(frames)\n</code></pre>\n"}], "owner": {"reputation": 249, "user_id": 4061820, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/93220ac7de2e15572fd55e33d4a72173?s=128&d=identicon&r=PG&f=1", "display_name": "dana111", "link": "https://stackoverflow.com/users/4061820/dana111"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1447279831, "creation_date": 1447277736, "question_id": 33660276, "link": "https://stackoverflow.com/questions/33660276/how-to-select-random-samples-of-elements-with-a-particular-id", "title": "how to select random samples of elements with a particular id", "body": "<p>I am trying to select 5 review ids for each business from a dataframe with reviews ids and business ids. I thought it would iterate over the groupby object, but this does not work. </p>\n\n<pre><code>df_b = df.groupby('business_id')\nselected = random.sample(df_b,5).review_ids\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "error-handling", "urllib"], "answers": [{"tags": [], "owner": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "is_accepted": false, "score": 0, "last_activity_date": 1447284624, "creation_date": 1447284624, "answer_id": 33661822, "question_id": 33660178, "link": "https://stackoverflow.com/questions/33660178/cannot-read-urllib-error-message-once-it-is-read/33661822#33661822", "title": "Cannot read urllib error message once it is read()", "body": "<p>The error object may read from the network. Network is not seekable -- you can't go back in the general case.</p>\n\n<p>You could replace <code>err</code> with a new HTTPError instance that reads from a buffer (like <code>io.BytesIO()</code>) instead of the network e.g., (not tested):</p>\n\n<pre><code>content = err.read()\nself.log.exception(content)\nraise HTTPError(err.url, err.code, err.reason, err.headers, io.BytesIO(content))\n</code></pre>\n\n<p>Though I'm not sure that you should -- handle the error in a single place instead e.g., reraise a more application specific exception or leave the logging to an upstream handler.</p>\n"}, {"comments": [{"owner": {"reputation": 3762, "user_id": 408556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/869402f85dcbabcef3da1ee61b88a45a?s=128&d=identicon&r=PG", "display_name": "reubano", "link": "https://stackoverflow.com/users/408556/reubano"}, "edited": false, "score": 0, "creation_date": 1485710472, "post_id": 41922833, "comment_id": 71027880, "body": "You should save the result of <code>resp.read()</code> so that you pass in the raw bytes back to <code>HTTPError</code> instead of re-encoding the text. See @jf&#39;s answer above."}, {"owner": {"reputation": 76, "user_id": 6163906, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qhx2O.jpg?s=128&g=1", "display_name": "Floyd Kots", "link": "https://stackoverflow.com/users/6163906/floyd-kots"}, "reply_to_user": {"reputation": 3762, "user_id": 408556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/869402f85dcbabcef3da1ee61b88a45a?s=128&d=identicon&r=PG", "display_name": "reubano", "link": "https://stackoverflow.com/users/408556/reubano"}, "edited": false, "score": 0, "creation_date": 1485715233, "post_id": 41922833, "comment_id": 71029505, "body": "Thank you @reubano. It sure is better that way. I don&#39;t understand why, at first, when I tried to pass in the raw bytes, the variable <code>msg</code> would remain as an empty <code>bytestring</code> object. I must have been doing something wrong. I think that&#39;s why I decoded the <code>bytestring</code>."}], "tags": [], "owner": {"reputation": 76, "user_id": 6163906, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qhx2O.jpg?s=128&g=1", "display_name": "Floyd Kots", "link": "https://stackoverflow.com/users/6163906/floyd-kots"}, "is_accepted": false, "score": 2, "last_activity_date": 1485706373, "last_edit_date": 1485706373, "creation_date": 1485705489, "answer_id": 41922833, "question_id": 33660178, "link": "https://stackoverflow.com/questions/33660178/cannot-read-urllib-error-message-once-it-is-read/41922833#41922833", "title": "Cannot read urllib error message once it is read()", "body": "<p>This is what I did. Worked for me.</p>\n\n<p>When reading the error for the first time, save it to a variable like this: <code>msg = response.read().decode('utf8')</code>. You can then create a new <code>HTTPError</code> instance, with the message, and propagate it.</p>\n\n<pre><code>resp = urllib.request.urlopen(request)\nmsg = resp.read().decode('utf8')\nself.log.exception(msg)\nraise HTTPError(resp.url, resp.code, resp.reason, resp.headers, io.BytesIO(bytes(msg, 'utf8')))\n</code></pre>\n"}], "owner": {"reputation": 8019, "user_id": 895733, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c8a0f008f35602d74c1e6a4e8aadbd11?s=128&d=identicon&r=PG", "display_name": "Amey", "link": "https://stackoverflow.com/users/895733/amey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 389, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1485706373, "creation_date": 1447277236, "question_id": 33660178, "link": "https://stackoverflow.com/questions/33660178/cannot-read-urllib-error-message-once-it-is-read", "title": "Cannot read urllib error message once it is read()", "body": "<p>My problem is with error handling of the python urllib error object. I am unable to read the error message while still keeping it intact in the error object, for it to be consumed later.</p>\n\n<pre><code>response = urllib.request.urlopen(request) # request that will raise an error\nresponse.read()\nresponse.read() # is empty now\n# Also tried seek(0), that does not work either.\n</code></pre>\n\n<p>So this how I intend to use it, but when the Exception bubbles up, the<code>.read()</code> second time is empty.</p>\n\n<pre><code>try:\n    response = urllib.request.urlopen(request)\nexcept urllib.error.HTTPError as err:\n    self.log.exception(err.read())\n    raise err\n</code></pre>\n\n<p>I tried making a deepcopy of the err object, </p>\n\n<pre><code>import copy\ntry:\n    response = urllib.request.urlopen(request)\nexcept urllib.error.HTTPError as err:\n    err_obj_copy = copy.deepcopy(err)\n    self.log.exception(\n        \"Method:{}\\n\"\n        \"URL:{}\\n\"\n        \"Data:{}\\n\"\n        \"Details:{}\\n\"\n        \"Headers:{}\".format(method, url, data, err_obj_copy.read(), headers))\n    raise err\n</code></pre>\n\n<p>but copy is unable to make a deepcopy and throws an error -\n<code>TypeError: __init__() missing 5 required positional arguments: 'url', 'code', 'msg', 'hdrs', and 'fp'</code>.</p>\n\n<p>How do I read the error message, while still keeping it intact in the object?</p>\n\n<p>I do know how to do it using <code>requests</code>, but I am stuck with legacy code and need to make it work with <code>urllib</code></p>\n"}, {"tags": ["python", "scheduled-tasks"], "comments": [{"owner": {"reputation": 50452, "user_id": 33258, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c4b21ea020b4d95c4abacaffc9daaf4e?s=128&d=identicon&r=PG", "display_name": "Hugh Bothwell", "link": "https://stackoverflow.com/users/33258/hugh-bothwell"}, "edited": false, "score": 0, "creation_date": 1447277885, "post_id": 33660081, "comment_id": 55094196, "body": "Have you looked at Celery?  <a href=\"http://www.celeryproject.org/\" rel=\"nofollow noreferrer\">celeryproject.org</a>"}], "owner": {"reputation": 662, "user_id": 1887912, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/cb3aa8025d2e06f2adac3f3a8a6388de?s=128&d=identicon&r=PG", "display_name": "JonB", "link": "https://stackoverflow.com/users/1887912/jonb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1447290578, "creation_date": 1447276820, "last_edit_date": 1447290578, "question_id": 33660081, "link": "https://stackoverflow.com/questions/33660081/scheduler-that-delegates-jobs-to-various-clients", "title": "Scheduler that delegates jobs to various clients", "body": "<p>I hava a simple task that I want to use some kind of scheduler for.\nHere is a break up of the problem.</p>\n\n<p>1.) Two or more machines waiting on too take on a job.<br>\n2.) list of jobs that need to get executed.</p>\n\n<p>Start the scheduler.\nCheck if machine one has no job, the send first item in the list to it.\nCheck if machine two has no job, the send the next item in the list to it.</p>\n\n<p>If machine two finish before machine one, notify back to scheduler, which then sends the third item in the list to machine two.</p>\n\n<p>Repeat this scenario until list is empty. </p>\n\n<p>This is the code I have come up with, this works, but how do I delegate between the functions?</p>\n\n<pre><code>import logging\nimport threading\nimport time\n\nlogging.basicConfig(level=logging.DEBUG,\n                    format='[%(levelname)s] (%(threadName)-10s) %(message)s',\n                    )\n\ndef worker1(job):\n    logging.debug('Starting: %s' % job)\n    time.sleep(7)\n    logging.debug('Exiting: %s' % job)\n    return\n\ndef worker2(job):\n    logging.debug('Starting: %s' % job)\n    time.sleep(3)\n    logging.debug('Exiting: %s' % job)\n    return\n\n\nif __name__ == '__main__':\n    jobs = ['job1', 'job2', 'job3', 'job4', 'job5']\n\n    #t1 = threading.Thread(target=worker1, args=(job, ))   \n    for job in jobs:\n        try:\n            t1 = threading.Thread(target=worker1, args=(job, ))\n            t1.start()\n            t1.join()\n            #Thread(target=myfunction, args=(job,)).start()\n        except Exception, errtxt:\n            print errtxt\n</code></pre>\n"}, {"tags": ["python", "menu", "tkinter", "height", "size"], "comments": [{"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1447278349, "post_id": 33660068, "comment_id": 55094438, "body": "Why do you need the window to be as tall as the menu? That seems like a very unusual request."}, {"owner": {"reputation": 1394, "user_id": 1575470, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/3f7083535b799a2d4174a18e2061dc6b?s=128&d=identicon&r=PG", "display_name": "whiteSkar", "link": "https://stackoverflow.com/users/1575470/whiteskar"}, "reply_to_user": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1447278673, "post_id": 33660068, "comment_id": 55094604, "body": "Not as tall as menu. I need it to be no smaller than the initial window size including the menu and all other widgets. Right now, because master.winfo_height() does not include the height of the menu, I can still make the master window smaller and the widget at the very bottom gets cut off."}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1447279670, "post_id": 33660068, "comment_id": 55095067, "body": "As long as you use <code>grid</code> and/or <code>pack</code>, the window will always be big enough to contain everything. There should be no reason to set a minimum size. Just let tkinter figure out the size for you. I think you&#39;re attempting to solve a non-problem."}, {"owner": {"reputation": 1394, "user_id": 1575470, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/3f7083535b799a2d4174a18e2061dc6b?s=128&d=identicon&r=PG", "display_name": "whiteSkar", "link": "https://stackoverflow.com/users/1575470/whiteskar"}, "reply_to_user": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1447280139, "post_id": 33660068, "comment_id": 55095284, "body": "It is an actual problem for me. I can click the bottom border of the window and move my mouse up to make the window smaller. Then the widgets at the bottom gets cut off."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1487792496, "post_id": 33660068, "comment_id": 71948571, "body": "I&#39;m having the same problem, the window may be initially large enough to contain everything, but it can be resized smaller, cutting off widgets (yes, I recognize that normally the user is allowed to shoot themselves in the foot, but I&#39;m not the one calling the shots). If I set (after a forced <code>update</code>/<code>update_idletasks</code>) the minsize using <code>master.minsize(master.winfo_reqwidth(), master.winfo_reqheight() + menu.winfo_reqheight())</code> (where the menu reports a reqheight of 60) it sort of works, but it pads, half of which can&#39;t be shrunk away."}], "answers": [{"tags": [], "owner": {"reputation": 1812, "user_id": 4198514, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/94a9dd568be5903fdcd899fc3b2eff2d?s=128&d=identicon&r=PG&f=1", "display_name": "R4PH43L", "link": "https://stackoverflow.com/users/4198514/r4ph43l"}, "is_accepted": false, "score": 1, "last_activity_date": 1447322270, "last_edit_date": 1592644375, "creation_date": 1447322270, "answer_id": 33668672, "question_id": 33660068, "link": "https://stackoverflow.com/questions/33660068/python-tkinter-how-to-get-height-of-menu/33668672#33668672", "title": "Python tkinter. How to get height of Menu", "body": "<p>Please read the <a href=\"http://infohost.nmt.edu/tcc/help/pubs/tkinter/web/universal.html\" rel=\"nofollow noreferrer\">documentation</a> of <code>winfo_height()</code> and <code>winfo_width()</code>.\nAs it states out there:</p>\n<blockquote>\n<p>w.winfo_height()</p>\n<p>[...] See the remarks on geometry updating under <code>.winfo_geometry()</code>, above. You may prefer to use <code>.winfo_reqheight()</code>, described below, which is always up to date.</p>\n<p>w.winfo_reqheight()</p>\n<p>These methods return the requested height of widget w. This is the minimum height necessary so that all of w's contents have the room they need. The actual height may be different due to negotiations with the geometry manager.</p>\n</blockquote>\n<p>Also have a look at <a href=\"https://stackoverflow.com/questions/28040943/in-tkinter-why-winfo-height-always-return-1\">this question</a>.</p>\n"}], "owner": {"reputation": 1394, "user_id": 1575470, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/3f7083535b799a2d4174a18e2061dc6b?s=128&d=identicon&r=PG", "display_name": "whiteSkar", "link": "https://stackoverflow.com/users/1575470/whiteskar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1616, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1447322270, "creation_date": 1447276780, "last_edit_date": 1495541828, "question_id": 33660068, "link": "https://stackoverflow.com/questions/33660068/python-tkinter-how-to-get-height-of-menu", "title": "Python tkinter. How to get height of Menu", "body": "<p>I am trying to set the minimum size of the window.</p>\n\n<p>I followed the solution posted on <a href=\"https://stackoverflow.com/questions/10448882/how-do-i-set-a-minimum-window-size-in-tkinter\">How do I set a minimum window size in tkinter?</a></p>\n\n<p>However, that doesn't take account of the height of the Menu I have.</p>\n\n<p>The Menu code I have is:</p>\n\n<pre><code>menubar = tk.Menu(self)\n\nmenu = tk.Menu(menubar, tearoff=0)\nmenu.add_command(label=\"Change user name\", \\\n                 command=self.prompt_new_name)\nmenu.add_separator()\nmenu.add_command(label=\"Exit\", command=self.close_app)\nmenubar.add_cascade(label=\"Menu\", menu=menu)\nself.master.config(menu=menubar)\n</code></pre>\n\n<p>And the way how I am setting the minimum size is:</p>\n\n<pre><code>master = self.master\nmaster.update()\nprint(master.winfo_height())\nprint(menubar.winfo_height())\nmaster.minsize(master.winfo_width(), master.winfo_height())\n</code></pre>\n\n<p>master.winfo_height() looks like it returns the height of the window as if there was no Menu widget. I tried printing the height of menubar but it returns 1.</p>\n\n<p>How do I get the height of the window including the menu or only get the height of the menu separately so I can add it to the master.winfo_height() and set that as the minsize?</p>\n"}, {"tags": ["python", "list", "string-comparison", "similarity"], "comments": [{"owner": {"reputation": 4866, "user_id": 2084656, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/f93ca28f809ae615adbb5e98d1a594f4?s=128&d=identicon&r=PG", "display_name": "wnnmaw", "link": "https://stackoverflow.com/users/2084656/wnnmaw"}, "edited": false, "score": 0, "creation_date": 1447277025, "post_id": 33660054, "comment_id": 55093771, "body": "The Google made <a href=\"https://code.google.com/p/google-diff-match-patch/\" rel=\"nofollow noreferrer\">diff-match-patch package</a> has a lot of what you&#39;re already looking for.  You&#39;ll probably be most interested in<code>diff</code>"}, {"owner": {"reputation": 11, "user_id": 5540541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/767fa2439e61219f68450e55772d1299?s=128&d=identicon&r=PG&f=1", "display_name": "user1234567890", "link": "https://stackoverflow.com/users/5540541/user1234567890"}, "reply_to_user": {"reputation": 4866, "user_id": 2084656, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/f93ca28f809ae615adbb5e98d1a594f4?s=128&d=identicon&r=PG", "display_name": "wnnmaw", "link": "https://stackoverflow.com/users/2084656/wnnmaw"}, "edited": false, "score": 0, "creation_date": 1447278161, "post_id": 33660054, "comment_id": 55094343, "body": "I appreciate it, Im just looking for something I can do and understand a bit more."}], "answers": [{"tags": [], "owner": {"reputation": 13145, "user_id": 4850343, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/BNXOO.jpg?s=128&g=1", "display_name": "Sebastian Wozny", "link": "https://stackoverflow.com/users/4850343/sebastian-wozny"}, "is_accepted": false, "score": 4, "last_activity_date": 1447277159, "creation_date": 1447277159, "answer_id": 33660165, "question_id": 33660054, "link": "https://stackoverflow.com/questions/33660054/string-similarity-comparison-in-python/33660165#33660165", "title": "String similarity comparison in python", "body": "<p>It sounds like your problem could be solved by the levenshtein distance between two words. It gives you a similarity metric for two strings.</p>\n\n<p>From <a href=\"https://en.wikipedia.org/wiki/Levenshtein_distance\" rel=\"nofollow\">wikipedia</a>:</p>\n\n<blockquote>\n  <p>The Levenshtein distance is a string metric for measuring the\n  difference between two sequences. Informally, the Levenshtein distance\n  between two words is the minimum number of single-character edits\n  (i.e. insertions, deletions or substitutions) required to change one\n  word into the other.</p>\n</blockquote>\n\n<p>You can find a python implementation of the levenshtein distance on <a href=\"https://pypi.python.org/pypi/python-Levenshtein/\" rel=\"nofollow\">pypi</a></p>\n\n<pre><code>pip install python-levenshtein\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5540541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/767fa2439e61219f68450e55772d1299?s=128&d=identicon&r=PG&f=1", "display_name": "user1234567890", "link": "https://stackoverflow.com/users/5540541/user1234567890"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 956, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1447278765, "creation_date": 1447276711, "last_edit_date": 1447278765, "question_id": 33660054, "link": "https://stackoverflow.com/questions/33660054/string-similarity-comparison-in-python", "title": "String similarity comparison in python", "body": "<p>I am trying to write a program that compares a list of scrambled names, to a big list of regular names, character by character.</p>\n\n<p>For example let's say one of the names in the scrambled list is <code>B@B St@r#</code> and I'm trying to compare that name to the list of regular names and see how many characters it has in common with or if its a perfect match with one of the names of the regular list. </p>\n\n<p>My code so far is this:</p>\n\n<pre><code>for ch in list2:    ##list 2 has the decrypted names\n    parts = ch.split()\n    decryptedfirst_names.append(parts[0]) ##Im trying to compare first names for now\n    for ch in list1:  ##list1 is a big list of regular names\n        part = ch.split()\n        first_names.append(part[0])\n\nmatching = []\nfor ch in first_names:\n    if ch in decryptedfirst_names and ch not in matching:\n        matching.append(ch)\nprint(matching)\n</code></pre>\n\n<p>Then this code will just print the name of the match. </p>\n\n<p>I need help trying to calculate the exact number of characters that match by position, that way I can put it in a percentage like 80% match and so on and if possible, something a beginner can program.</p>\n"}, {"tags": ["python", "python-3.x", "turtle-graphics"], "comments": [{"owner": {"reputation": 6594, "user_id": 93910, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bcd3c9d1bdca6ce813053f420ebced02?s=128&d=identicon&r=PG&f=1", "display_name": "Sanjay Manohar", "link": "https://stackoverflow.com/users/93910/sanjay-manohar"}, "edited": false, "score": 0, "creation_date": 1447276707, "post_id": 33660009, "comment_id": 55093611, "body": "what is <code>1=turtle.Turtle()</code> supposed to achieve?"}, {"owner": {"reputation": 21, "user_id": 5552286, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-DxiFzkklwp0/AAAAAAAAAAI/AAAAAAAAAI8/5PYK7bl8hfU/photo.jpg?sz=128", "display_name": "python noob", "link": "https://stackoverflow.com/users/5552286/python-noob"}, "reply_to_user": {"reputation": 6594, "user_id": 93910, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bcd3c9d1bdca6ce813053f420ebced02?s=128&d=identicon&r=PG&f=1", "display_name": "Sanjay Manohar", "link": "https://stackoverflow.com/users/93910/sanjay-manohar"}, "edited": false, "score": 0, "creation_date": 1447276779, "post_id": 33660009, "comment_id": 55093648, "body": "1 = turtle.Turtle() creates a turtle called 1, so I&#39;m asking if using the for loop will work, to send the 1st turtle to (0, 0) and the second to (10, 10)"}, {"owner": {"reputation": 50452, "user_id": 33258, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c4b21ea020b4d95c4abacaffc9daaf4e?s=128&d=identicon&r=PG", "display_name": "Hugh Bothwell", "link": "https://stackoverflow.com/users/33258/hugh-bothwell"}, "edited": false, "score": 2, "creation_date": 1447276787, "post_id": 33660009, "comment_id": 55093653, "body": "<code>1</code> is not a valid variable name; try something like <code>first_turtle</code> instead."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 5552286, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-DxiFzkklwp0/AAAAAAAAAAI/AAAAAAAAAI8/5PYK7bl8hfU/photo.jpg?sz=128", "display_name": "python noob", "link": "https://stackoverflow.com/users/5552286/python-noob"}, "edited": false, "score": 0, "creation_date": 1447276945, "post_id": 33660072, "comment_id": 55093731, "body": "But will this work for &quot;i&quot;? because you haven&#39;t got &quot;i&quot; in your code, but you&#39;ve still used it."}, {"owner": {"reputation": 6594, "user_id": 93910, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bcd3c9d1bdca6ce813053f420ebced02?s=128&d=identicon&r=PG&f=1", "display_name": "Sanjay Manohar", "link": "https://stackoverflow.com/users/93910/sanjay-manohar"}, "reply_to_user": {"reputation": 21, "user_id": 5552286, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-DxiFzkklwp0/AAAAAAAAAAI/AAAAAAAAAI8/5PYK7bl8hfU/photo.jpg?sz=128", "display_name": "python noob", "link": "https://stackoverflow.com/users/5552286/python-noob"}, "edited": false, "score": 0, "creation_date": 1447277094, "post_id": 33660072, "comment_id": 55093815, "body": "sorry, pressed &#39;submit&#39; too soon!"}, {"owner": {"reputation": 6594, "user_id": 93910, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bcd3c9d1bdca6ce813053f420ebced02?s=128&d=identicon&r=PG&f=1", "display_name": "Sanjay Manohar", "link": "https://stackoverflow.com/users/93910/sanjay-manohar"}, "reply_to_user": {"reputation": 21, "user_id": 5552286, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-DxiFzkklwp0/AAAAAAAAAAI/AAAAAAAAAI8/5PYK7bl8hfU/photo.jpg?sz=128", "display_name": "python noob", "link": "https://stackoverflow.com/users/5552286/python-noob"}, "edited": false, "score": 0, "creation_date": 1447277302, "post_id": 33660072, "comment_id": 55093912, "body": "enumerate(turtles) will effectively give a list of pairs <code>[(0,turtle[0]), (1,turtle[1])</code>. So you get both the index and the turtle."}, {"owner": {"reputation": 21, "user_id": 5552286, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-DxiFzkklwp0/AAAAAAAAAAI/AAAAAAAAAI8/5PYK7bl8hfU/photo.jpg?sz=128", "display_name": "python noob", "link": "https://stackoverflow.com/users/5552286/python-noob"}, "edited": false, "score": 0, "creation_date": 1447277345, "post_id": 33660072, "comment_id": 55093943, "body": "Thanks for helping me :)"}, {"owner": {"reputation": 4729, "user_id": 1703772, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/963bc9ac37c31c3f6bff29dc60b8891b?s=128&d=identicon&r=PG", "display_name": "NuclearPeon", "link": "https://stackoverflow.com/users/1703772/nuclearpeon"}, "edited": false, "score": 0, "creation_date": 1447285057, "post_id": 33660072, "comment_id": 55097385, "body": "Also see the <code>range(0, i)</code> method for python, it&#39;s easier than incrementing integers."}], "tags": [], "owner": {"reputation": 6594, "user_id": 93910, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bcd3c9d1bdca6ce813053f420ebced02?s=128&d=identicon&r=PG&f=1", "display_name": "Sanjay Manohar", "link": "https://stackoverflow.com/users/93910/sanjay-manohar"}, "is_accepted": true, "score": 0, "last_activity_date": 1447276797, "creation_date": 1447276797, "answer_id": 33660072, "question_id": 33660009, "link": "https://stackoverflow.com/questions/33660009/can-i-use-a-variable-in-this-context/33660072#33660072", "title": "Can I use a variable in this context?", "body": "<p>If you want to create two objects and iterate over them, use a <code>list</code></p>\n\n<pre><code>turtles = []\nturtles += [ turtle.Turtle() ]\n\ni=0\nfor t in turtles:\n  t.goto(data[i],data[i+1])\n  i+=2\n</code></pre>\n\n<p>If you want a number as well, for <code>i</code>, you can use an enumeration</p>\n\n<pre><code>for (i,t) in enumerate(turtles):\n  t.goto(data[2*i],data[2*i+1])\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 5552286, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-DxiFzkklwp0/AAAAAAAAAAI/AAAAAAAAAI8/5PYK7bl8hfU/photo.jpg?sz=128", "display_name": "python noob", "link": "https://stackoverflow.com/users/5552286/python-noob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 33660072, "answer_count": 1, "score": -1, "last_activity_date": 1447276797, "creation_date": 1447276565, "question_id": 33660009, "link": "https://stackoverflow.com/questions/33660009/can-i-use-a-variable-in-this-context", "title": "Can I use a variable in this context?", "body": "<p>My code is:</p>\n\n<pre><code>import turtle\n1 = turtle.Turtle()\n2 = turtle.Turtle()\ndata = [1, 0, 0, 10, 10]\nfor i in range(1, 3, 2):\n    i.goto(data[i], data[i+1])\n</code></pre>\n\n<p>Will this send the turtles to the x and y specified? I am using this in a larger piece of code with a socket server to draw stuff with my friends, but I want to change the code I have currently so more than one person can play with me. I am not sure if using i.goto will work, so any help or suggestions are appreciated :)</p>\n"}, {"tags": ["python", "django", "django-rest-framework"], "answers": [{"comments": [{"owner": {"reputation": 2038, "user_id": 2828594, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/4XNqm.jpg?s=128&g=1", "display_name": "soueuls", "link": "https://stackoverflow.com/users/2828594/soueuls"}, "edited": false, "score": 0, "creation_date": 1447416888, "post_id": 33671554, "comment_id": 55156533, "body": "Thank you, this helped me a bit, even if I had started to figure this out, the create method is pretty easy to implement, but I must say that the update one is not. Because for example in my UserSerializer I have a CharField for password and password confirmation, they are both required but whenever I want to update the use I need to provide both the passwords again."}, {"owner": {"reputation": 8454, "user_id": 3755845, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c91acb7faf4cf918fcb1b912810d323d?s=128&d=identicon&r=PG", "display_name": "Louis Barranqueiro", "link": "https://stackoverflow.com/users/3755845/louis-barranqueiro"}, "reply_to_user": {"reputation": 2038, "user_id": 2828594, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/4XNqm.jpg?s=128&g=1", "display_name": "soueuls", "link": "https://stackoverflow.com/users/2828594/soueuls"}, "edited": false, "score": 0, "creation_date": 1447429054, "post_id": 33671554, "comment_id": 55164180, "body": "Please update your question then, cause you talk about creation. Could you be more explicit about what you want to do in the update method, please?"}, {"owner": {"reputation": 184, "user_id": 10754251, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vaMzg.jpg?s=128&g=1", "display_name": "Nikhil Bhardwaj", "link": "https://stackoverflow.com/users/10754251/nikhil-bhardwaj"}, "edited": false, "score": 0, "creation_date": 1574579327, "post_id": 33671554, "comment_id": 104277769, "body": "Awesome man I was searching something like this, it is working like a charm, thank you @LouisBarranqueiro"}], "tags": [], "owner": {"reputation": 8454, "user_id": 3755845, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c91acb7faf4cf918fcb1b912810d323d?s=128&d=identicon&r=PG", "display_name": "Louis Barranqueiro", "link": "https://stackoverflow.com/users/3755845/louis-barranqueiro"}, "is_accepted": true, "score": 22, "last_activity_date": 1447333379, "last_edit_date": 1447333379, "creation_date": 1447331812, "answer_id": 33671554, "question_id": 33659994, "link": "https://stackoverflow.com/questions/33659994/django-rest-framework-create-user-and-user-profile/33671554#33671554", "title": "Django Rest Framework create user and user profile", "body": "<p>Indeed, Django Rest Framework can't handle this job with nested relationships then you have to implement these methods yourself. I will give you some example of what your code should look like.</p>\n\n<p>Your view : </p>\n\n<pre class=\"lang-python prettyprint-override\"><code>class UserList(generics.ListCreateAPIView):\n    permission_classes = (IsAuthenticatedOrWriteOnly,)\n    serializer_class = UserSerializer\n\n    def post(self, request, format=None):\n        serializer = UserSerializer(data=request.data)\n        if serializer.is_valid():\n            serializer.save()\n            return Response(serializer.data, status=status.HTTP_201_CREATED)\n        return Response(serializer.errors, status=status.HTTP_400_BAD_REQUEST)\n</code></pre>\n\n<p>Now, the <code>save</code> method of your serializer will call a <code>create</code> method when you want to create an object and <code>update</code> method when you want to update an object. So let's implement the <code>create</code> method of your <code>UserSerializer</code> which will create the profile and the user. Here is a simple example of what your <code>UserSerializer</code> should look like :</p>\n\n<pre class=\"lang-python prettyprint-override\"><code>class UserSerializer(serializers.ModelSerializer):\n    profile = ProfileSerializer(required=True)\n    class Meta:\n        model = User\n        fields = ('url', 'email', 'profile', 'created',)\n\n    def create(self, validated_data):\n\n        # create user \n        user = User.objects.create(\n            url = validated_data['url'],\n            email = validated_data['email'],\n            # etc ...\n        )\n\n        profile_data = validated_data.pop('profile')\n        # create profile\n        profile = Profile.objects.create(\n            user = user\n            first_name = profile_data['first_name'],\n            last_name = profile_data['last_name'],\n            # etc...\n        )\n\n        return user\n</code></pre>\n\n<p>As I said, this is an example, you have to complete it to do what you want to do but now, you know how to do it :) To define the behavior during an update, implement an <code>update</code> method.</p>\n"}, {"tags": [], "owner": {"reputation": 48, "user_id": 9935953, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-6El3ERbKe-8/AAAAAAAAAAI/AAAAAAAAAC8/GfBq1oa9Fgc/photo.jpg?sz=128", "display_name": "Pamilerin", "link": "https://stackoverflow.com/users/9935953/pamilerin"}, "is_accepted": false, "score": 0, "last_activity_date": 1615233902, "creation_date": 1615233902, "answer_id": 66536392, "question_id": 33659994, "link": "https://stackoverflow.com/questions/33659994/django-rest-framework-create-user-and-user-profile/66536392#66536392", "title": "Django Rest Framework create user and user profile", "body": "<p>This might be late but why not bypass drf entirely and relegate profile creation trigger to models using signals like so:</p>\n<p>models.py</p>\n<pre><code>class User(AbstractBaseUser):\n      pass\nclass UserProfile(models.Model):\n      user =  models.OneToOneField(User, on_delete=models.CASCADE, related_name='customer_profile')\n      country = models.CharField(blank=True, max_length=250)\n</code></pre>\n<p>signals.py</p>\n<pre><code>@receiver(post_save, sender=User)\ndef create_user_profile(sender, instance, created, **kwargs):\n    if created:\n        UserProfile.objects.create(\n            user = instance\n        )\n</code></pre>\n<p>this basically triggers a corresponding profile row creation once a user has been created via any means; admin, drf etc.</p>\n<p>then you can use serializers to update the data.\nhope this helps anyone else stumbling here</p>\n"}], "owner": {"reputation": 2038, "user_id": 2828594, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/4XNqm.jpg?s=128&g=1", "display_name": "soueuls", "link": "https://stackoverflow.com/users/2828594/soueuls"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 18707, "favorite_count": 11, "accepted_answer_id": 33671554, "answer_count": 2, "score": 11, "last_activity_date": 1615233902, "creation_date": 1447276508, "question_id": 33659994, "link": "https://stackoverflow.com/questions/33659994/django-rest-framework-create-user-and-user-profile", "title": "Django Rest Framework create user and user profile", "body": "<p>I am trying to create the view that will create new user using my API.\nI am using a custom model for my User and also created a model called Profile to manage data that are not authentication related.</p>\n\n<p>I am new to the Django world and it can be quite difficult.</p>\n\n<p>Here is my models.py</p>\n\n<pre><code>class UserManager(BaseUserManager):\n    def create_user(self, email, password=None):\n        if not email:\n            raise ValueError('User must have an email address')\n\n        user = self.model(\n            email = self.normalize_email(email),\n        )\n        user.set_password(password)\n        user.save()\n        return user\n\n    def create_superuser(self, email, password):\n        user = self.create_user(email, password=password)\n        user.is_admin = True\n        user.save()\n        return user\n\n\nclass User(AbstractBaseUser):\n    objects = UserManager()\n    email = models.EmailField(unique=True, db_index=True)\n    created = models.DateTimeField('created', auto_now_add=True)\n    modified = models.DateTimeField(auto_now=True)\n\n    is_active = models.BooleanField('active', default=True)\n    is_admin = models.BooleanField('admin', default=False)\n\n    USERNAME_FIELD = 'email'\n\n    ordering = ('created',)\n\n    def is_staff(self):\n        return self.is_admin\n\n    def has_perm(self, perm, obj=None):\n        return True\n\n    def has_module_perms(self, app_label):\n        return True\n\n    def get_short_name(self):\n        return self.email\n\n    def get_full_name(self):\n        return self.email\n\n    def __unicode__(self):\n        return self.email\n\n\nclass Profile(models.Model):\n    GENDER = (\n        ('M', 'Homme'),\n        ('F', 'Femme'),\n    )\n\n    user = models.OneToOneField(settings.AUTH_USER_MODEL)\n    first_name = models.CharField(max_length=120, blank=False)\n    last_name = models.CharField(max_length=120, blank=False)\n    gender = models.CharField(max_length=1, choices=GENDER)\n    zip_code = models.CharField(max_length=5, validators=[MinLengthValidator(5)], blank=False)\n\n    def __unicode__(self):\n        return u'Profile of user: {0}'.format(self.user.email)\n\n\ndef create_profile(sender, instance, created, **kwargs):\n    if created:\n        Profile.objects.create(user=instance)\npost_save.connect(create_profile, sender=User)\n\n\ndef delete_user(sender, instance=None, **kwargs):\n    try:\n        instance.user\n    except User.DoesNotExist:\n        pass\n    else:\n        instance.user.delete()\npost_delete.connect(delete_user, sender=Profile)\n</code></pre>\n\n<p>Here is my serializers.py</p>\n\n<pre><code>class ProfileSerializer(serializers.ModelSerializer):\n    class Meta:\n        model = Profile\n        fields = ('first_name', 'last_name', 'gender', 'zip_code',)\n\n\nclass UserSerializer(serializers.ModelSerializer):\n    profile = ProfileSerializer(required=True)\n    class Meta:\n        model = User\n        fields = ('url', 'email', 'profile', 'created',)\n</code></pre>\n\n<p>And here is the views.py</p>\n\n<pre><code>class UserList(generics.ListCreateAPIView):\n    permission_classes = (IsAuthenticatedOrWriteOnly,)\n    serializer_class = UserSerializer\n\n    def get_queryset(self):\n        if self.request.user.is_staff:\n            return User.objects.all()\n        else:\n            return self.request.user\n\n    def post(self, request, format=None):\n        serializer = ProfileSerializer(data=request.data)\n        print serializer.__dict__\n        if serializer.is_valid():\n            print \"valid\"\n        return Response(\"placeholder\", status=status.HTTP_201_CREATED)\n</code></pre>\n\n<p>My goal is to be able to create the User and the Profile at the same time while being able to valid everything, how could I achieve this ?</p>\n"}, {"tags": ["python", "django", "django-queryset"], "comments": [{"owner": {"reputation": 9136, "user_id": 688393, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/3RXeo.jpg?s=128&g=1", "display_name": "C&#233;sar", "link": "https://stackoverflow.com/users/688393/c%c3%a9sar"}, "edited": false, "score": 0, "creation_date": 1447276752, "post_id": 33659966, "comment_id": 55093633, "body": "When passing variables to a function you need to use <code>=</code> and not <code>==</code>, <code>==</code> is for comparison."}, {"owner": {"reputation": 1075, "user_id": 1352932, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3b1ed1b8d18f1fee723f1ff434b96a4c?s=128&d=identicon&r=PG", "display_name": "caliph", "link": "https://stackoverflow.com/users/1352932/caliph"}, "reply_to_user": {"reputation": 9136, "user_id": 688393, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/3RXeo.jpg?s=128&g=1", "display_name": "C&#233;sar", "link": "https://stackoverflow.com/users/688393/c%c3%a9sar"}, "edited": false, "score": 0, "creation_date": 1447276921, "post_id": 33659966, "comment_id": 55093717, "body": "thanks. I changed it and an error remains. I updated the question."}, {"owner": {"reputation": 9136, "user_id": 688393, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/3RXeo.jpg?s=128&g=1", "display_name": "C&#233;sar", "link": "https://stackoverflow.com/users/688393/c%c3%a9sar"}, "edited": false, "score": 0, "creation_date": 1447277172, "post_id": 33659966, "comment_id": 55093857, "body": "Ok, I missed that one, change <code>select_related</code> for <code>filter</code>"}, {"owner": {"reputation": 1075, "user_id": 1352932, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3b1ed1b8d18f1fee723f1ff434b96a4c?s=128&d=identicon&r=PG", "display_name": "caliph", "link": "https://stackoverflow.com/users/1352932/caliph"}, "reply_to_user": {"reputation": 9136, "user_id": 688393, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/3RXeo.jpg?s=128&g=1", "display_name": "C&#233;sar", "link": "https://stackoverflow.com/users/688393/c%c3%a9sar"}, "edited": false, "score": 0, "creation_date": 1447277317, "post_id": 33659966, "comment_id": 55093921, "body": "Thanks for your reply. I did that and now I have: Cannot resolve keyword &#39;citytranslations__language&#39; into field."}], "answers": [{"comments": [{"owner": {"reputation": 1075, "user_id": 1352932, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3b1ed1b8d18f1fee723f1ff434b96a4c?s=128&d=identicon&r=PG", "display_name": "caliph", "link": "https://stackoverflow.com/users/1352932/caliph"}, "edited": false, "score": 0, "creation_date": 1447278333, "post_id": 33660193, "comment_id": 55094431, "body": "Could you explain a bit more, please? &quot;City&quot; has no field &quot;language&quot;. So &quot;city__language&quot; should not exist..."}, {"owner": {"reputation": 21174, "user_id": 636625, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/EuUH4.jpg?s=128&g=1", "display_name": "Shang Wang", "link": "https://stackoverflow.com/users/636625/shang-wang"}, "reply_to_user": {"reputation": 1075, "user_id": 1352932, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3b1ed1b8d18f1fee723f1ff434b96a4c?s=128&d=identicon&r=PG", "display_name": "caliph", "link": "https://stackoverflow.com/users/1352932/caliph"}, "edited": false, "score": 0, "creation_date": 1447278605, "post_id": 33660193, "comment_id": 55094563, "body": "Sorry I fixed my answer, can you try it now?"}], "tags": [], "owner": {"reputation": 21174, "user_id": 636625, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/EuUH4.jpg?s=128&g=1", "display_name": "Shang Wang", "link": "https://stackoverflow.com/users/636625/shang-wang"}, "is_accepted": true, "score": 0, "last_activity_date": 1447278573, "last_edit_date": 1447278573, "creation_date": 1447277350, "answer_id": 33660193, "question_id": 33659966, "link": "https://stackoverflow.com/questions/33659966/how-to-query-this-snow-flake-data-schema-in-django/33660193#33660193", "title": "How to query this (snow flake) data schema in django", "body": "<pre><code>Doctor.objects.filter(doctortranslations__language='ru', \n                      city__citytranslations__language='ru')\n</code></pre>\n"}], "owner": {"reputation": 1075, "user_id": 1352932, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3b1ed1b8d18f1fee723f1ff434b96a4c?s=128&d=identicon&r=PG", "display_name": "caliph", "link": "https://stackoverflow.com/users/1352932/caliph"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 588, "favorite_count": 0, "accepted_answer_id": 33660193, "answer_count": 1, "score": 1, "last_activity_date": 1523178784, "creation_date": 1447276425, "last_edit_date": 1523178784, "question_id": 33659966, "link": "https://stackoverflow.com/questions/33659966/how-to-query-this-snow-flake-data-schema-in-django", "title": "How to query this (snow flake) data schema in django", "body": "<p>I want to query a snow flake data schema in django and cannot get it right. </p>\n\n<p><strong>model.py</strong></p>\n\n<pre><code>class City(models.Model):\n   city_name =       models.CharField(max_length=30, default='')\n\nclass CityTranslations(models.Model):\n   language =        models.CharField(max_length=2, default='--')\n   city_name_trans = models.CharField(max_length=30, default='')\n   city =            models.ForeignKey(City)\n\nclass Doctor(models.Model):\n   doctor_name =     models.CharField(max_length=30, default='')\n   city =            models.ForeignKey(City)\n\nclass DoctorTranslations(models.Model):\n   language =          models.CharField(max_length=2, default='--')\n   doctor_name_trans = models.CharField(max_length=30, default='')\n   doctor =            models.ForeignKey(Doctor)\n</code></pre>\n\n<p>Short explanation:</p>\n\n<pre><code>Doctor  n:1  City\nCity    1:n  CityTranslations  \nDoctor  1:n  DoctorTranslations   #e.g. german, russian, arabic\n</code></pre>\n\n<p>I want to:<br>\n1. get all fields of all tables (<code>selects * from</code>)<br>\n2. receive a list of all doctors <br>\n3. with russian translations </p>\n\n<p>So I tried:</p>\n\n<p><strong>views.py</strong></p>\n\n<pre><code>a = Doctor.objects.select_related(doctortranslations__language='ru', citytranslations__language='ru')\n</code></pre>\n\n<p>But this ends with an error</p>\n\n<blockquote>\n  <p>select_related() got an unexpected keyword argument 'doctortranslations__language'</p>\n</blockquote>\n\n<p>Any help is appreciated.</p>\n"}, {"tags": ["python", "windows", "matplotlib", "64-bit"], "comments": [{"owner": {"reputation": 24570, "user_id": 2272172, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/40d9cf17504d06006a0154ef0b332457?s=128&d=identicon&r=PG&f=1", "display_name": "cel", "link": "https://stackoverflow.com/users/2272172/cel"}, "edited": false, "score": 1, "creation_date": 1447275674, "post_id": 33659668, "comment_id": 55093067, "body": "Why do you think this caused by the <code>64 bitness</code>? This seems very unlikely."}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1447275996, "post_id": 33659668, "comment_id": 55093221, "body": "Yes, the rest of the world uses matplotlib on 64bit architecture for a long time and has no problems with the menu.  How can we recreate your issue?"}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1447276083, "post_id": 33659668, "comment_id": 55093278, "body": "What do you get from <code>import matplotlib; print(matplotlib.rcParams[&#39;toolbar&#39;])</code> ?"}, {"owner": {"reputation": 1409, "user_id": 2005135, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/QcTNv.jpg?s=128&g=1", "display_name": "jhc", "link": "https://stackoverflow.com/users/2005135/jhc"}, "reply_to_user": {"reputation": 24570, "user_id": 2272172, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/40d9cf17504d06006a0154ef0b332457?s=128&d=identicon&r=PG&f=1", "display_name": "cel", "link": "https://stackoverflow.com/users/2272172/cel"}, "edited": false, "score": 0, "creation_date": 1447327843, "post_id": 33659668, "comment_id": 55113718, "body": "@cel: Only difference between the two versions."}, {"owner": {"reputation": 1409, "user_id": 2005135, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/QcTNv.jpg?s=128&g=1", "display_name": "jhc", "link": "https://stackoverflow.com/users/2005135/jhc"}, "reply_to_user": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1447335143, "post_id": 33659668, "comment_id": 55117925, "body": "@wim: Your lines return &#39;toolbar2&#39; in command line python."}], "owner": {"reputation": 1409, "user_id": 2005135, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/QcTNv.jpg?s=128&g=1", "display_name": "jhc", "link": "https://stackoverflow.com/users/2005135/jhc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 114, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1447360367, "creation_date": 1447275392, "last_edit_date": 1447360367, "question_id": 33659668, "link": "https://stackoverflow.com/questions/33659668/64-bit-python-breaks-matplotlib-plot-menu", "title": "64 bit python breaks Matplotlib plot menu", "body": "<p><br>\nDue to memory limitations of 32 bit application, I had to update our python installation to the 64 bit version. I've made everything functional again (modules and 3rd party libs), but have noticed a potential bug in a matplotlib figure. See the image below. This is a typical matplotlib in perfect functionality. Please note the menu in the bottom left corner.</p>\n\n<p>For some reason, running the 64 bit version, this menu simply dissapears. This is very unfortunate as we really do use the menu on this app.</p>\n\n<p>Any idea how to force the menu to display?</p>\n\n<p>Please note that although the figure below indicates linux, we are in fact using this on Windows. The image is simply to show exactly what menu I'm talking about.</p>\n\n<p>EDIT - <br>\nI have made a simple hello world that replicates the error.</p>\n\n<pre><code>import matplotlib.pyplot as plt\nfig = plt.figure('Hello World',figsize(10,15))\nplt.show()\n</code></pre>\n\n<p>I believe this error happens when the figsize extrapolates the screen size, matplotlib simply does not render the toolbar. Even when I resize the figure to until it fits the screen, the toolbar is still missing.</p>\n\n<p><a href=\"https://i.stack.imgur.com/NAKLF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NAKLF.png\" alt=\"matplotlib\"></a></p>\n"}, {"tags": ["python", "windows", "command-line"], "comments": [{"owner": {"reputation": 18362, "user_id": 1767754, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/00ba1fd17dc5970a0096cc4d7a932536?s=128&d=identicon&r=PG", "display_name": "user1767754", "link": "https://stackoverflow.com/users/1767754/user1767754"}, "edited": false, "score": 0, "creation_date": 1447275836, "post_id": 33659632, "comment_id": 55093147, "body": "<a href=\"http://www.guidingtech.com/4862/always-run-as-administrator/\" rel=\"nofollow noreferrer\">guidingtech.com/4862/always-run-as-administrator</a>"}, {"owner": {"reputation": 1401, "user_id": 3892023, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/907ba8841224d866d6377d7b6062410b?s=128&d=identicon&r=PG&f=1", "display_name": "Harwee", "link": "https://stackoverflow.com/users/3892023/harwee"}, "reply_to_user": {"reputation": 18362, "user_id": 1767754, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/00ba1fd17dc5970a0096cc4d7a932536?s=128&d=identicon&r=PG", "display_name": "user1767754", "link": "https://stackoverflow.com/users/1767754/user1767754"}, "edited": false, "score": 0, "creation_date": 1447276191, "post_id": 33659632, "comment_id": 55093337, "body": "@user1767754 i can do it on my pc but what if I want to distribute this piece of code and there are people out there who don&#39;t know to change name of file"}, {"owner": {"reputation": 448, "user_id": 4153614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/095f33d30e635ec361b40886041b9153?s=128&d=identicon&r=PG&f=1", "display_name": "kponz", "link": "https://stackoverflow.com/users/4153614/kponz"}, "edited": false, "score": 0, "creation_date": 1447282223, "post_id": 33659632, "comment_id": 55096324, "body": "Take a look at this answer: <a href=\"http://stackoverflow.com/questions/19672352/how-to-run-python-script-with-elevated-privilege-on-windows\" title=\"how to run python script with elevated privilege on windows\">stackoverflow.com/questions/19672352/&hellip;</a>"}], "owner": {"reputation": 1401, "user_id": 3892023, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/907ba8841224d866d6377d7b6062410b?s=128&d=identicon&r=PG&f=1", "display_name": "Harwee", "link": "https://stackoverflow.com/users/3892023/harwee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 142, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1447275247, "creation_date": 1447275247, "question_id": 33659632, "link": "https://stackoverflow.com/questions/33659632/pass-password-to-admin-prompt", "title": "pass password to Admin prompt", "body": "<p>I have a script which needs to run a command on command line with admin privileges.</p>\n\n<pre><code>password = \"abcdef\"\ncmd = ['runas', '/user:', 'cmd.exe /C echo test']\ncmd[1]+=str(platform.node())\nsubprocess.Popen(cmd)\n</code></pre>\n\n<p>I can have the code get to ask for password(admin password), but is there a way I can supply password without it asking me again and again as there a quiet a number of times I need to call command line</p>\n"}, {"tags": ["python", "schedule"], "answers": [{"comments": [{"owner": {"reputation": 180, "user_id": 5390623, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/190f4470f708126a6720330725826825?s=128&d=identicon&r=PG&f=1", "display_name": "ZtoYi", "link": "https://stackoverflow.com/users/5390623/ztoyi"}, "edited": false, "score": 0, "creation_date": 1447275774, "post_id": 33659737, "comment_id": 55093116, "body": "I put a print statement inside the if branch. It never gets run once the while loop starts."}, {"owner": {"reputation": 455, "user_id": 1313741, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b64a56218bcb76d5499a4281f01e55?s=128&d=identicon&r=PG", "display_name": "Bobby Russell", "link": "https://stackoverflow.com/users/1313741/bobby-russell"}, "reply_to_user": {"reputation": 180, "user_id": 5390623, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/190f4470f708126a6720330725826825?s=128&d=identicon&r=PG&f=1", "display_name": "ZtoYi", "link": "https://stackoverflow.com/users/5390623/ztoyi"}, "edited": false, "score": 0, "creation_date": 1447275834, "post_id": 33659737, "comment_id": 55093145, "body": "@ZtoYi what is compareTimes doing with i.time? what is i.time? Check those."}, {"owner": {"reputation": 180, "user_id": 5390623, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/190f4470f708126a6720330725826825?s=128&d=identicon&r=PG&f=1", "display_name": "ZtoYi", "link": "https://stackoverflow.com/users/5390623/ztoyi"}, "edited": false, "score": 0, "creation_date": 1447275922, "post_id": 33659737, "comment_id": 55093185, "body": "compareTimes works. I have checked it thoroughly. If I run this program at the time it is supposed to be run the if loop will be entered."}, {"owner": {"reputation": 455, "user_id": 1313741, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b64a56218bcb76d5499a4281f01e55?s=128&d=identicon&r=PG", "display_name": "Bobby Russell", "link": "https://stackoverflow.com/users/1313741/bobby-russell"}, "reply_to_user": {"reputation": 180, "user_id": 5390623, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/190f4470f708126a6720330725826825?s=128&d=identicon&r=PG&f=1", "display_name": "ZtoYi", "link": "https://stackoverflow.com/users/5390623/ztoyi"}, "edited": false, "score": 0, "creation_date": 1447276182, "post_id": 33659737, "comment_id": 55093329, "body": "@ZtoYi What is meant by &#39;the time it&#39;s supposed to be run?&#39; The purpose of the scheduling queue is to have the &#39;the time it&#39;s supposed to be run&#39; handled for you."}, {"owner": {"reputation": 180, "user_id": 5390623, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/190f4470f708126a6720330725826825?s=128&d=identicon&r=PG&f=1", "display_name": "ZtoYi", "link": "https://stackoverflow.com/users/5390623/ztoyi"}, "edited": false, "score": 0, "creation_date": 1447276452, "post_id": 33659737, "comment_id": 55093479, "body": "In my use case I am looking at different time zones. Therefore, as opposing to hard coding a time for a job to run, I have the if statement to check if it is indeed time for it to run."}, {"owner": {"reputation": 8584, "user_id": 890242, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a002dc8cd51a7d25e31e1bf4662b1b85?s=128&d=identicon&r=PG", "display_name": "miraculixx", "link": "https://stackoverflow.com/users/890242/miraculixx"}, "reply_to_user": {"reputation": 180, "user_id": 5390623, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/190f4470f708126a6720330725826825?s=128&d=identicon&r=PG&f=1", "display_name": "ZtoYi", "link": "https://stackoverflow.com/users/5390623/ztoyi"}, "edited": false, "score": 1, "creation_date": 1447276708, "post_id": 33659737, "comment_id": 55093613, "body": "@ZtoYi <i>I put a print statement inside the if branch</i>, yes this will only be executed once - when scheduling the jobs. then only the <code>job</code> function will run, once every day as per your example. put the print statement in <code>job</code> and you will see it run at the scheduled intervals."}], "tags": [], "owner": {"reputation": 455, "user_id": 1313741, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b64a56218bcb76d5499a4281f01e55?s=128&d=identicon&r=PG", "display_name": "Bobby Russell", "link": "https://stackoverflow.com/users/1313741/bobby-russell"}, "is_accepted": true, "score": 3, "last_activity_date": 1447275608, "creation_date": 1447275608, "answer_id": 33659737, "question_id": 33659606, "link": "https://stackoverflow.com/questions/33659606/using-schedule-to-run-jobs-at-certain-times/33659737#33659737", "title": "Using Schedule to run jobs at certain times", "body": "<blockquote>\n  <p>This is what I came up with. Obviously this is wrong (it gets stuck in\n  the while loop). There is no documentation for .run_pending() so I\n  don't know how to fix it to get it to work. Please assist.</p>\n</blockquote>\n\n<p>That appears to be the correct behaviour. The scheduler is checking for pending jobs every 60 seconds, and (I assume) is running them as they come in. It is supposed to run forever, because are you scheduling jobs perpetually with <code>schedule.every().day.do(job)</code>. Your problem is that you need to run this program in the background.</p>\n\n<p>If you are interested in something that is suitable for a production environment, I suggest taking a look at either <a href=\"http://www.celeryproject.org/\" rel=\"nofollow\">Celery</a> (which my very well be overkill) or <a href=\"http://python-rq.org/\" rel=\"nofollow\">Python RQ</a>. These are well documented, distributed, and can run in the background out of the box.</p>\n"}, {"comments": [{"owner": {"reputation": 180, "user_id": 5390623, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/190f4470f708126a6720330725826825?s=128&d=identicon&r=PG&f=1", "display_name": "ZtoYi", "link": "https://stackoverflow.com/users/5390623/ztoyi"}, "edited": false, "score": 0, "creation_date": 1447276793, "post_id": 33659886, "comment_id": 55093656, "body": "What does it mean that jobs are executed serially? Suppose I have a job that&#39;s schedule to run at 3:00, another scheduled at 2:00 (respectively). The 2:00 job will always run before the 3:00 job, even if it is ordered after, right?"}, {"owner": {"reputation": 754, "user_id": 1981160, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/9b3b448352c2bf1359f2eaa1771d5cf1?s=128&d=identicon&r=PG", "display_name": "mr.wolle", "link": "https://stackoverflow.com/users/1981160/mr-wolle"}, "reply_to_user": {"reputation": 180, "user_id": 5390623, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/190f4470f708126a6720330725826825?s=128&d=identicon&r=PG&f=1", "display_name": "ZtoYi", "link": "https://stackoverflow.com/users/5390623/ztoyi"}, "edited": false, "score": 1, "creation_date": 1447278466, "post_id": 33659886, "comment_id": 55094487, "body": "Yes you are right. Serially means that the next job will be executed after the one before has finished its work. So the 2pm job starts first. The 3pm job will start only at its time if the 2pm job is finished! If 2pm is not finished the 3pm job will be delayed."}], "tags": [], "owner": {"reputation": 754, "user_id": 1981160, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/9b3b448352c2bf1359f2eaa1771d5cf1?s=128&d=identicon&r=PG", "display_name": "mr.wolle", "link": "https://stackoverflow.com/users/1981160/mr-wolle"}, "is_accepted": false, "score": 3, "last_activity_date": 1447276162, "creation_date": 1447276162, "answer_id": 33659886, "question_id": 33659606, "link": "https://stackoverflow.com/questions/33659606/using-schedule-to-run-jobs-at-certain-times/33659886#33659886", "title": "Using Schedule to run jobs at certain times", "body": "<p>Your solution I think works as it should: The main thread is blocked by looping. The work you registered with  <code>schedule.every().day.do(job)</code> will be called every day. Remind that the jobs are executed serially! \nI think in the order as you have registered them. </p>\n\n<p>For a solution without blocking the main thread see this <a href=\"https://github.com/mrhwick/schedule/blob/master/schedule/__init__.py#L63\" rel=\"nofollow\">Code</a> (run_continuously method). </p>\n\n<p>For some examples see <a href=\"https://github.com/dbader/schedule/blob/master/FAQ.rst\" rel=\"nofollow\">here</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 13236658, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AOh14Gg-KI7XjZDRazDaLOX_nfAoDfOJ2lbqOJfSSrfs=k-s128", "display_name": "KiLly", "link": "https://stackoverflow.com/users/13236658/killy"}, "is_accepted": false, "score": 0, "last_activity_date": 1608995210, "last_edit_date": 1608995210, "creation_date": 1608952678, "answer_id": 65453392, "question_id": 33659606, "link": "https://stackoverflow.com/questions/33659606/using-schedule-to-run-jobs-at-certain-times/65453392#65453392", "title": "Using Schedule to run jobs at certain times", "body": "<p>Here in this line :</p>\n<pre><code>schedule.every().day.do(job)\n</code></pre>\n<p>You didn't specify the time you need to run the script at in the day , and the correct syntax is :</p>\n<pre><code>schedule.every().day.at(&quot;00.00&quot;).do(job)\n</code></pre>\n<p>now by adding</p>\n<pre><code>.at('xx:xx')\n</code></pre>\n<p>script can work correctly</p>\n<p><strong>Note</strong> : if the time you specify for example is : <code>'4:13'</code> then it will return an error and the correct format is <code>'04:13'</code> means it must be <code>'xx:xx'</code></p>\n<p>I tried the code and it worked correctly so hope this solves your problem.</p>\n"}], "owner": {"reputation": 180, "user_id": 5390623, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/190f4470f708126a6720330725826825?s=128&d=identicon&r=PG&f=1", "display_name": "ZtoYi", "link": "https://stackoverflow.com/users/5390623/ztoyi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6460, "favorite_count": 0, "accepted_answer_id": 33659737, "answer_count": 3, "score": 2, "last_activity_date": 1608995210, "creation_date": 1447275092, "last_edit_date": 1447277103, "question_id": 33659606, "link": "https://stackoverflow.com/questions/33659606/using-schedule-to-run-jobs-at-certain-times", "title": "Using Schedule to run jobs at certain times", "body": "<p>I am trying to schedule a few jobs and thanks to stackoverflow I was able to find Schedule (<a href=\"https://pypi.python.org/pypi/schedule\" rel=\"nofollow\">https://pypi.python.org/pypi/schedule</a>).</p>\n\n<p>Unfortunately this isn't documented very well. I have a list of jobs I am trying to run, each with a certain time in a single day that it is supposed to be run.</p>\n\n<pre><code>for i in jobArray:\n    # compareTimes returns a boolean that indicates if it's time to run it, assume it works.\n    if compareTimes(i.time):\n        # I want to schedule this job for a specific time, i.time\n        schedule.every().day.do(job)\nwhile 1:\n    schedule.run_pending()\n    time.sleep(60)\n</code></pre>\n\n<p>This is what I came up with. Obviously this is wrong (it gets stuck in the while loop). There is no documentation for .run_pending() so I don't know how to fix it to get it to work. Please assist.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["python", "sqlite"], "comments": [{"owner": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "edited": false, "score": 0, "creation_date": 1447274998, "post_id": 33659562, "comment_id": 55092724, "body": "Show the table definition."}, {"owner": {"reputation": 44406, "user_id": 375874, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/STZt9.jpg?s=128&g=1", "display_name": "Falmarri", "link": "https://stackoverflow.com/users/375874/falmarri"}, "edited": false, "score": 1, "creation_date": 1447275091, "post_id": 33659562, "comment_id": 55092772, "body": "What are you planning on doing with a sqlite table with 15 million rows and no index? It&#39;s going to be basically impossible to query at all."}, {"owner": {"reputation": 99, "user_id": 4315786, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/48ec6951b96d61876e5bdfe98e88e40c?s=128&d=identicon&r=PG&f=1", "display_name": "Eladriol", "link": "https://stackoverflow.com/users/4315786/eladriol"}, "reply_to_user": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "edited": false, "score": 0, "creation_date": 1447275157, "post_id": 33659562, "comment_id": 55092814, "body": "Sorry @CL could you expand on what you need/mean by table defintion?"}, {"owner": {"reputation": 99, "user_id": 4315786, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/48ec6951b96d61876e5bdfe98e88e40c?s=128&d=identicon&r=PG&f=1", "display_name": "Eladriol", "link": "https://stackoverflow.com/users/4315786/eladriol"}, "reply_to_user": {"reputation": 44406, "user_id": 375874, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/STZt9.jpg?s=128&g=1", "display_name": "Falmarri", "link": "https://stackoverflow.com/users/375874/falmarri"}, "edited": false, "score": 0, "creation_date": 1447275390, "post_id": 33659562, "comment_id": 55092918, "body": "@Falmarri Absolutely impossible to query, or just pretty slow? I&#39;m not going to be querying most tables (especially that one, it&#39;s pretty much a it&#39;s there if i need it) regularly or frequently, and I was under the impression that it was faster to not use indexes and then add them after doing the inserts"}, {"owner": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "edited": false, "score": 0, "creation_date": 1447275499, "post_id": 33659562, "comment_id": 55092974, "body": "The CREATE TABLE statement."}, {"owner": {"reputation": 44406, "user_id": 375874, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/STZt9.jpg?s=128&g=1", "display_name": "Falmarri", "link": "https://stackoverflow.com/users/375874/falmarri"}, "edited": false, "score": 0, "creation_date": 1447275623, "post_id": 33659562, "comment_id": 55093037, "body": "@Eladriol I can&#39;t imagine that it will be possible to query unless you&#39;re just iterating over the entire table in the order that it&#39;s stored.  Yes if you add indexes after the insertions you&#39;ll be able to query it. But 200 gigs is still very, very big for a sqlite db. Why are you using sqlite and not a full db server?"}, {"owner": {"reputation": 99, "user_id": 4315786, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/48ec6951b96d61876e5bdfe98e88e40c?s=128&d=identicon&r=PG&f=1", "display_name": "Eladriol", "link": "https://stackoverflow.com/users/4315786/eladriol"}, "reply_to_user": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "edited": false, "score": 0, "creation_date": 1447276357, "post_id": 33659562, "comment_id": 55093432, "body": "@CL I&#39;ve added the function- there are 65 ish different schemes but I&#39;ve given an example of one and they all look like that (with differing lengths and data types)"}, {"owner": {"reputation": 99, "user_id": 4315786, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/48ec6951b96d61876e5bdfe98e88e40c?s=128&d=identicon&r=PG&f=1", "display_name": "Eladriol", "link": "https://stackoverflow.com/users/4315786/eladriol"}, "reply_to_user": {"reputation": 44406, "user_id": 375874, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/STZt9.jpg?s=128&g=1", "display_name": "Falmarri", "link": "https://stackoverflow.com/users/375874/falmarri"}, "edited": false, "score": 0, "creation_date": 1447276539, "post_id": 33659562, "comment_id": 55093530, "body": "@Falmarri That specific table is a very simple one, it&#39;s just a timestamp/value one every 15 seconds. Because I was told to use Sqlite3, before I using a file system and CSVs- I really came into this cold so I have no idea on best practice. I had heard though that Sqlite3 could do databases that are multi terrabytes."}], "answers": [{"tags": [], "owner": {"reputation": 1390, "user_id": 5551669, "user_type": "registered", "profile_image": "https://graph.facebook.com/100006442653263/picture?type=large", "display_name": "Galax", "link": "https://stackoverflow.com/users/5551669/galax"}, "is_accepted": false, "score": 0, "last_activity_date": 1447275472, "creation_date": 1447275472, "answer_id": 33659691, "question_id": 33659562, "link": "https://stackoverflow.com/questions/33659562/insert-slowing-down-over-time-as-data-base-grows-no-index/33659691#33659691", "title": "Insert slowing down over time as data base grows (no index)", "body": "<p>It makes sense to me that the time to INSERT increases as a function of the database size. The operating system itself may be slower when opening/closing/writing to larger files. An index could slow things down much more of course, but that doesn't mean that there would be no slowdown at all without an index.</p>\n"}, {"comments": [{"owner": {"reputation": 99, "user_id": 4315786, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/48ec6951b96d61876e5bdfe98e88e40c?s=128&d=identicon&r=PG&f=1", "display_name": "Eladriol", "link": "https://stackoverflow.com/users/4315786/eladriol"}, "edited": false, "score": 0, "creation_date": 1447286580, "post_id": 33660278, "comment_id": 55097860, "body": "thanks for the suggestions, I&#39;ll try them out with some iterations over the coming days and see if it helps. Do you know of any guidelines on how to set cache size; ie is there a rule of thumb related to system memory/table size etc?"}, {"owner": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "reply_to_user": {"reputation": 99, "user_id": 4315786, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/48ec6951b96d61876e5bdfe98e88e40c?s=128&d=identicon&r=PG&f=1", "display_name": "Eladriol", "link": "https://stackoverflow.com/users/4315786/eladriol"}, "edited": false, "score": 0, "creation_date": 1447316899, "post_id": 33660278, "comment_id": 55107260, "body": "The guideline is &quot;measure&quot;."}, {"owner": {"reputation": 99, "user_id": 4315786, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/48ec6951b96d61876e5bdfe98e88e40c?s=128&d=identicon&r=PG&f=1", "display_name": "Eladriol", "link": "https://stackoverflow.com/users/4315786/eladriol"}, "edited": false, "score": 0, "creation_date": 1447410850, "post_id": 33660278, "comment_id": 55153247, "body": "initial tests seem to suggest upping the cache size does actually significantly help the speed of the writing (~factor of 2 to go from default to 10,000). Annoyingly I didn&#39;t implement some sort of logging when I first ran the script in full to create the database so it&#39;s difficult to fully benchmark, so I&#39;ll need to run some more tests.  Are there any downsides to increasing cache size- apart from increasing the ability of sqlite to consume system resources? For example if I were to increase it to 100,000 would that have negative consequences?"}, {"owner": {"reputation": 99, "user_id": 4315786, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/48ec6951b96d61876e5bdfe98e88e40c?s=128&d=identicon&r=PG&f=1", "display_name": "Eladriol", "link": "https://stackoverflow.com/users/4315786/eladriol"}, "edited": false, "score": 0, "creation_date": 1447412472, "post_id": 33660278, "comment_id": 55154135, "body": "should specify that this script is running on an individual work laptop with 4gb, not a third party phone or anything like that"}, {"owner": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "reply_to_user": {"reputation": 99, "user_id": 4315786, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/48ec6951b96d61876e5bdfe98e88e40c?s=128&d=identicon&r=PG&f=1", "display_name": "Eladriol", "link": "https://stackoverflow.com/users/4315786/eladriol"}, "edited": false, "score": 0, "creation_date": 1447415985, "post_id": 33660278, "comment_id": 55156035, "body": "Increasing SQLite&#39;s cache size will implicitly reduce the amount of memory used by the OS for its file cache."}, {"owner": {"reputation": 99, "user_id": 4315786, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/48ec6951b96d61876e5bdfe98e88e40c?s=128&d=identicon&r=PG&f=1", "display_name": "Eladriol", "link": "https://stackoverflow.com/users/4315786/eladriol"}, "edited": false, "score": 0, "creation_date": 1447425332, "post_id": 33660278, "comment_id": 55161645, "body": "Sorry to ask so many questions, but what are the implications of that? If I have it right that that would make the computer less responsive to other applications, but would that also have negative effects on the python/sqlite3 script hogging the cache due to some dependence on the OS using it&#39;s file cache? To put it another way would it ever be possible to allocate too high a cache limit to SQL to the point where it has negative consequences?"}, {"owner": {"reputation": 99, "user_id": 4315786, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/48ec6951b96d61876e5bdfe98e88e40c?s=128&d=identicon&r=PG&f=1", "display_name": "Eladriol", "link": "https://stackoverflow.com/users/4315786/eladriol"}, "edited": false, "score": 0, "creation_date": 1450200285, "post_id": 33660278, "comment_id": 56332662, "body": "Sorry took so long to accept, I wasn&#39;t able to test for a while due to getting sidetracked by a bug caused by faulty RAM... Anyway your suggestion of less tables worked very well, around 2-3 times faster. Turns out cache size didn&#39;t effect things so much, but turning pragma sync off was also very helpful (it&#39;s not the end of the world if the database gets corrupted and I have to recreate it)  Many thanks for your help."}], "tags": [], "owner": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "is_accepted": true, "score": 1, "last_activity_date": 1447415949, "last_edit_date": 1447415949, "creation_date": 1447277742, "answer_id": 33660278, "question_id": 33659562, "link": "https://stackoverflow.com/questions/33659562/insert-slowing-down-over-time-as-data-base-grows-no-index/33660278#33660278", "title": "Insert slowing down over time as data base grows (no index)", "body": "<p>Appending rows to the end of a table is the fastest way to insert data (and you are not playing games with the <code>rowid</code>, so you are indeed appending to then end).</p>\n\n<p>However, you are not using a single table but 16k tables, so the overhead for managing the table structure is multiplied.</p>\n\n<p>Try increasing the <a href=\"http://www.sqlite.org/pragma.html#pragma_cache_size\" rel=\"nofollow\">cache size</a>. But the most promising change would be to use fewer tables.</p>\n"}], "owner": {"reputation": 99, "user_id": 4315786, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/48ec6951b96d61876e5bdfe98e88e40c?s=128&d=identicon&r=PG&f=1", "display_name": "Eladriol", "link": "https://stackoverflow.com/users/4315786/eladriol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 367, "favorite_count": 1, "accepted_answer_id": 33660278, "answer_count": 2, "score": 1, "last_activity_date": 1447415949, "creation_date": 1447274936, "last_edit_date": 1495541245, "question_id": 33659562, "link": "https://stackoverflow.com/questions/33659562/insert-slowing-down-over-time-as-data-base-grows-no-index", "title": "Insert slowing down over time as data base grows (no index)", "body": "<p>I'm trying to create a (single) database file (that will be regularly updated/occasionally partially recreated/occasionally queried) that is over 200GB, so relatively large in my view. There are about 16k tables and they range in size from a few kb to ~1gb; they have 2-21 columns. The longest table has nearly 15 million rows.</p>\n\n<p>The script I wrote goes through the input files one by one, doing a bunch of processing and regex to get usable data. It regularly sends a batch (0.5-1GB) to be written in sqlite3, with one separate executemany statement to each table that data is inserted to. There are no commit or create table statements etc in-between these execute statements so I believe that all comes under a single transaction</p>\n\n<p>Initially the script worked fast enough for my purposes, but it slows down dramatically over time as it neared completion- which given I will need to slow it down further to keep the memory use manageable in normal use for my laptop is unfortunate.</p>\n\n<p>I did some quick bench-marking comparing inserting identical sample data to an empty database versus inserting to the 200GB database. The later test was ~3 times slower to execute the insert statements (the relative speed commit was even worse, but in absolute terms its insignificant)- aside from that there was no significant difference between </p>\n\n<p>When I researched this topic before it mostly <a href=\"https://stackoverflow.com/questions/15778716/sqlite-insert-speed-slows-as-number-of-records-increases-due-to-an-index\">returned results for indexes slowing down inserts on large tables</a>. The answer seemed to be that insert on tables without an index should stay at more or less the same speed regardless of size; since I don't need to run numerous queries against this database I didn't make any indexes. I even double checked and ran a check for indexes which if I have it right should exclude that as a cause:</p>\n\n<pre><code>c.execute('SELECT name FROM sqlite_master WHERE type=\"index\"')\n\nprint(c.fetchone()) #returned none\n</code></pre>\n\n<p>The other issue that cropped up was transactions, but I don't see how that could be a problem only writing to large databases for the same script and the same data to be written.</p>\n\n<p>abbreviated relevant code:</p>\n\n<pre><code>#process pre defined objects, files, retrieve data in batch - \n#all fine, no slowdown on full database\n\nconn = sqlite3.connect(db_path)\n\nc = conn.cursor()\n\ntable_breakdown=[(tup[0]+'-'+tup[1],tup[0],tup[1]) for tup in all_tup] # creates list of tuples\n# (tuple name \"subject-item\", subject, item)\n\ntargeted_create_tables=functools.partial(create_tables,c) #creates new table if needed\n#for new subjects/items- \nlist(map(targeted_create_tables,table_breakdown)) #no slowdown on full database\n\ntargeted_insert_data=functools.partial(insert_data,c) #inserts data for specific \n#subject item combo\n\nlist(map(targeted_insert_data,table_breakdown)) # (3+) X slower\n\nconn.commit() # significant relative slowdown, but insignificant in absolute terms\nconn.close()\n</code></pre>\n\n<p>and relevant insert function:</p>\n\n<pre><code>def insert_data(c,tup):\n    global collector ###list of tuples of data for a combo of a subject and item\n    global sql_length ###pre defined dictionary translating the item into the \n    #right length (?,?,?...) string\n    tbl_name=tup[0]\n    subject=tup[1]\n    item=tup[2]\n    subject_data=collector[subject][item]\n    if not (subject_data==[]):\n\n        statement='''INSERT INTO \"{0}\" VALUES {1}'''.format(tbl_name,sql_length[item])\n\n        c.executemany(statement,subject_data)#massively slower, about 80% of \n    #inserts &gt; twice slower\n\n        subject_data=[]\n</code></pre>\n\n<p>EDIT: table create function per CL request. I'm aware that this is inefficient (it takes roughly the same time to check if a table name exists this way as to create the table) but it's not significant to the slow down.</p>\n\n<pre><code>def create_tables(c,tup):\n    global collector\n    global title #list of column schemes to match to items\n    tbl_name=tup[0]\n    bm_unit=tup[1]\n    item=tup[2]\n    subject_data=bm_collector[bm_unit][item]\n\n    if not (subject_data==[]):\n        c.execute('SELECT * FROM sqlite_master WHERE name = \"{0}\" and type=\"table\"'.format(tbl_name))\n        if c.fetchone()==None:\n            c.execute('CREATE TABLE \"{0}\" {1}'.format(tbl_name,title[item]))    \n</code></pre>\n\n<p>there are all told 65 different column schemes in the title dict but this is an example of what they look like:</p>\n\n<pre><code>title.append(('WINDFOR','(TIMESTAMP TEXT, SP INTEGER, SD TEXT, PUBLISHED TEXT, WIND_CAP NUMERIC, WIND_FOR NUMERIC)'))\n</code></pre>\n\n<p>Anyone got any ideas about where to look or what could cause this issue? I apologize if I've left out important information or missed something horribly basic, I've come into this topic area completely cold.</p>\n"}, {"tags": ["python", "command-line", "arguments"], "answers": [{"tags": [], "owner": {"reputation": 1390, "user_id": 5551669, "user_type": "registered", "profile_image": "https://graph.facebook.com/100006442653263/picture?type=large", "display_name": "Galax", "link": "https://stackoverflow.com/users/5551669/galax"}, "is_accepted": false, "score": 0, "last_activity_date": 1447275859, "creation_date": 1447275859, "answer_id": 33659811, "question_id": 33659553, "link": "https://stackoverflow.com/questions/33659553/when-would-i-use-positional-arguments-for-my-python-program/33659811#33659811", "title": "When would I use positional arguments for my Python program?", "body": "<p>I think you've got it the wrong way round, the first example was positional, the second was more like a named argument, although you might usually expect to see something more like <code>--file=\"joe\"</code>. The reason for named arguments is usually to allow defaults to be taken when there are many arguments, without having to type all of the arguments that you don't care about. Positional arguments work well when there are very few of them, and they are always needed.</p>\n"}], "owner": {"reputation": 17247, "user_id": 1675976, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/SNvIc.jpg?s=128&g=1", "display_name": "CodyBugstein", "link": "https://stackoverflow.com/users/1675976/codybugstein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1447275859, "creation_date": 1447274897, "question_id": 33659553, "link": "https://stackoverflow.com/questions/33659553/when-would-i-use-positional-arguments-for-my-python-program", "title": "When would I use positional arguments for my Python program?", "body": "<p>I'm creating a Python program/utility that I want others to be able to use.</p>\n\n<p>Currently it takes arguments when launched, for example</p>\n\n<pre><code>python main.py 123456 \"joe\"\n</code></pre>\n\n<p>I've noticed in many places that people pass arguments to their Python app using positional arguments like</p>\n\n<pre><code>python main.py 123456 --\"joe\"\n</code></pre>\n\n<p>What is the difference and advantage of doing this?</p>\n"}, {"tags": ["python", "mongoengine", "nosql"], "answers": [{"tags": [], "owner": {"reputation": 15649, "user_id": 831531, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/rB642.gif?s=128&g=1", "display_name": "matino", "link": "https://stackoverflow.com/users/831531/matino"}, "is_accepted": true, "score": 1, "last_activity_date": 1447327285, "creation_date": 1447327285, "answer_id": 33670296, "question_id": 33659540, "link": "https://stackoverflow.com/questions/33659540/delete-embedded-document-from-listffield-in-mongo-engine/33670296#33670296", "title": "Delete Embedded Document from ListfField in Mongo Engine", "body": "<p>It should look like this (note these are raw mongodb queries):</p>\n\n<pre><code># To update the number:\ndb.team.update({ \"name\": \"FC Barcelona\", \"players.name\" : \"Lionel Messi\" }, { $set: { \"players.$.number\" : 11 }})\n\n# To remove the player from the list:\ndb.team.update({ \"name\": \"FC Barcelona\", \"players.name\" : \"Cesc Fabregas\" }, { $pull: { \"players.name\" : \"Cesc Fabregas\" }})\n</code></pre>\n"}], "owner": {"reputation": 2777, "user_id": 4852094, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/10102767534136292/picture?type=large", "display_name": "Rob", "link": "https://stackoverflow.com/users/4852094/rob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 324, "favorite_count": 0, "accepted_answer_id": 33670296, "answer_count": 1, "score": 1, "last_activity_date": 1505015520, "creation_date": 1447274828, "last_edit_date": 1506103282, "question_id": 33659540, "link": "https://stackoverflow.com/questions/33659540/delete-embedded-document-from-listffield-in-mongo-engine", "title": "Delete Embedded Document from ListfField in Mongo Engine", "body": "<p>I haven't found a clear answer to this yet, but the issue is I need to delete and/or update an Embedded Document in a listfield.  So if I had a schema:</p>\n\n<pre><code>-Team\n    -Players\n        -name\n        -number\n</code></pre>\n\n<p>how would I delete or update Players?</p>\n"}, {"tags": ["python", "django", "django-crispy-forms"], "answers": [{"comments": [{"owner": {"reputation": 2896, "user_id": 3361028, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b53a63319b061edb80dc910c10cfbfd1?s=128&d=identicon&r=PG&f=1", "display_name": "hY8vVpf3tyR57Xib", "link": "https://stackoverflow.com/users/3361028/hy8vvpf3tyr57xib"}, "edited": false, "score": 0, "creation_date": 1447276976, "post_id": 33659835, "comment_id": 55093749, "body": "That wouldn&#39;t work because then you get the error ContactForm has no attribute &#39;helper&#39;."}], "tags": [], "owner": {"reputation": 9136, "user_id": 688393, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/3RXeo.jpg?s=128&g=1", "display_name": "C&#233;sar", "link": "https://stackoverflow.com/users/688393/c%c3%a9sar"}, "is_accepted": false, "score": 0, "last_activity_date": 1447275968, "creation_date": 1447275968, "answer_id": 33659835, "question_id": 33659537, "link": "https://stackoverflow.com/questions/33659537/manipulating-a-helper-of-a-crispy-form-in-a-view/33659835#33659835", "title": "Manipulating a helper of a crispy form in a view", "body": "<p>The problem is in the <code>form_class</code> definition of your <code>CreateContactView</code>. You don't have to instantiate it (i.e. <code>ContactForm()</code>) when using Class-based Views. You need to change it to:</p>\n\n<pre><code>class CreateContactView(LoginRequiredMixin, CreateView):                                                     \n    template_name = 'contacts/contact_form.html'                                \n    form_class = ContactForm \n    form_class.helper.form_action = \"\"                                                                              \n    model = Contact                                                             \n    success_url = reverse_lazy('contacts:list_contacts')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 250720, "user_id": 113962, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b80ae1d65878cf68a4b1a00848467527?s=128&d=identicon&r=PG", "display_name": "Alasdair", "link": "https://stackoverflow.com/users/113962/alasdair"}, "is_accepted": true, "score": 2, "last_activity_date": 1447276832, "last_edit_date": 1447276832, "creation_date": 1447276458, "answer_id": 33659979, "question_id": 33659537, "link": "https://stackoverflow.com/questions/33659537/manipulating-a-helper-of-a-crispy-form-in-a-view/33659979#33659979", "title": "Manipulating a helper of a crispy form in a view", "body": "<p>When you set <code>form_class</code> in a class based view, you must use the <em>class</em>, not an <em>instance</em> of it. </p>\n\n<pre><code>class CreateContactView(LoginRequiredMixin, CreateView):                                                     \n    template_name = 'contacts/contact_form.html'                                \n    form_class = ContactForm\n</code></pre>\n\n<p>This code is loaded once, when the server starts.</p>\n\n<p>If you want to change the helper, then you need to edit the form instance in a method of the view. This code is run once for every request. For example, you could override <a href=\"https://docs.djangoproject.com/en/1.8/ref/class-based-views/mixins-editing/#django.views.generic.edit.FormMixin.get_form\" rel=\"nofollow\"><code>get_form</code></a>.</p>\n\n<pre><code>class CreateContactView(LoginRequiredMixin, CreateView):                                                     \n    template_name = 'contacts/contact_form.html'                                \n    form_class = ContactForm\n\n    def get_form(self, form_class=None):\n        form = super(CreateContactView, self).get_form(form_class)\n        form.helper.form_action = \"\"\n        return form                                                                            \n</code></pre>\n\n<p>However, for the example you have given it would be easier to set the action in the form's <code>__init__</code> method. Then you won't have to override the <code>get_form</code> method as well.</p>\n\n<pre><code> class ContactForm(forms.ModelForm):                                             \n\n    def __init__(self, *args, **kwargs):                                        \n        self.helper = FormHelper()\n        self.helper.form_action = \"\"                                                                              \n        ...\n</code></pre>\n"}], "owner": {"reputation": 2896, "user_id": 3361028, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b53a63319b061edb80dc910c10cfbfd1?s=128&d=identicon&r=PG&f=1", "display_name": "hY8vVpf3tyR57Xib", "link": "https://stackoverflow.com/users/3361028/hy8vvpf3tyr57xib"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 498, "favorite_count": 0, "accepted_answer_id": 33659979, "answer_count": 2, "score": 0, "last_activity_date": 1447276832, "creation_date": 1447274820, "question_id": 33659537, "link": "https://stackoverflow.com/questions/33659537/manipulating-a-helper-of-a-crispy-form-in-a-view", "title": "Manipulating a helper of a crispy form in a view", "body": "<p>just started working with crispy forms in Django and so far it is awesome! I am however stuck with the following problem:</p>\n\n<p>Whenever I try to Manipulate my helper in my view, as explained here: <a href=\"https://django-crispy-forms.readthedocs.org/en/d-0/tags.html\" rel=\"nofollow\">https://django-crispy-forms.readthedocs.org/en/d-0/tags.html</a> , I get the following TypeError: 'ContactForm' object is not callable.</p>\n\n<p><strong>forms.py</strong></p>\n\n<pre><code>  1 from django import forms                                                        \n  2 from django.core.urlresolvers import reverse, reverse_lazy                      \n  3 from .models import Contact                                                     \n  4 from django.utils.translation import ugettext_lazy as _                         \n  5                                                                                 \n  6 from crispy_forms.helper import FormHelper                                      \n  7 from crispy_forms.layout import Submit                                          \n  8                                                                                 \n  9                                                                                 \n 10 class ContactForm(forms.ModelForm):                                             \n 11                                                                                 \n 12     def __init__(self, *args, **kwargs):                                        \n 13         self.helper = FormHelper()                                              \n 14         self.helper.add_input(Submit('add_contact', 'Add contact'))\n 15         self.helper.show_errors = True                                          \n 16         self.helper.form_action = reverse_lazy('contacts:create_contact')                                      \n 17         super(ContactForm, self).__init__(*args, **kwargs)                      \n 18                                                                                 \n 19     class Meta:                                                                  \n 20         model = Contact                                                         \n 21         fields = ['title']      \n</code></pre>\n\n<p><strong>views.py</strong>       </p>\n\n<pre><code>  2 from __future__ import absolute_import, unicode_literals                        \n  3                                                                                 \n  4 from django.core.urlresolvers import reverse, reverse_lazy                      \n  5 from django.views.generic import DetailView, ListView, RedirectView, UpdateView, FormView\n  6 from django.views.generic.edit import CreateView                                \n  7 from django.contrib.auth.decorators import login_required                       \n  8 from django.shortcuts import render                                             \n  9                                                                                 \n 10 from braces.views import LoginRequiredMixin                                     \n 11 from .forms import ContactForm                                                  \n 12 from .models import Contact                                                                                  \n 13                                                                                                              \n 14                                                                                                                                                                                                                          \n 20 class CreateContactView(LoginRequiredMixin, CreateView):                                                     \n 21     template_name = 'contacts/contact_form.html'                                \n 22     form_class = ContactForm()  \n 23     form_class.helper.form_action = \"\"                                                                              \n 23     model = Contact                                                             \n 24     success_url = reverse_lazy('contacts:list_contacts')\n</code></pre>\n\n<p>Do you guys know what I am doing wrong? How can I make this form callable? Obviously the error starts at line 22 of my view, I can solve it by removing line 23 and removing the brackets at line 22, but I have to do this if I want to change helper.form_action.       </p>\n"}, {"tags": ["python", "numpy", "interpolation"], "comments": [{"owner": {"reputation": 25595, "user_id": 202229, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6cc1d82c11563b440c57280ad587ee47?s=128&d=identicon&r=PG", "display_name": "smci", "link": "https://stackoverflow.com/users/202229/smci"}, "edited": false, "score": 1, "creation_date": 1447276758, "post_id": 33659453, "comment_id": 55093636, "body": "This is an algorithm question, and would probably be better migrated to one of the other SE sites... but which? Math.SE has a lot of hits for &quot;point spline distance&quot;."}, {"owner": {"reputation": 1419, "user_id": 2460374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/448cb6bb58c400ddb4decc721680d231?s=128&d=identicon&r=PG", "display_name": "jkalden", "link": "https://stackoverflow.com/users/2460374/jkalden"}, "edited": false, "score": 1, "creation_date": 1447335085, "post_id": 33659453, "comment_id": 55117890, "body": "Well, when you are able to find the two closest points on the pareto frontier, the linear connection between these two points is probably the closest line element, isn&#39;t it? Thus, as a second step you can calculate the distance between the line and the point."}, {"owner": {"reputation": 25595, "user_id": 202229, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6cc1d82c11563b440c57280ad587ee47?s=128&d=identicon&r=PG", "display_name": "smci", "link": "https://stackoverflow.com/users/202229/smci"}, "edited": false, "score": 0, "creation_date": 1447366527, "post_id": 33659453, "comment_id": 55137840, "body": "Do we take it this a piecewise-linear approximation, not an actual spline?"}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "reply_to_user": {"reputation": 1419, "user_id": 2460374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/448cb6bb58c400ddb4decc721680d231?s=128&d=identicon&r=PG", "display_name": "jkalden", "link": "https://stackoverflow.com/users/2460374/jkalden"}, "edited": false, "score": 1, "creation_date": 1449540450, "post_id": 33659453, "comment_id": 56041301, "body": "@jkalden. Your assumption is not correct. Imagine a very long line segment that is close to the point. It could have endpoints that are further from the point of interest than a shorter segment which is really further away."}], "answers": [{"comments": [{"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1449540643, "post_id": 34146724, "comment_id": 56041358, "body": "Your formula is a bit difficult to extrapolate to higher dimensions, but the derivation can be used to re-express it in terms of dot products, which would make it 100% applicable to the original question."}, {"owner": {"reputation": 10409, "user_id": 483620, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/efc681121bec8b6c5f9b5bc0714396a0?s=128&d=identicon&r=PG", "display_name": "Benjamin", "link": "https://stackoverflow.com/users/483620/benjamin"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1449540943, "post_id": 34146724, "comment_id": 56041438, "body": "@ Mad Physicist: Yes, I missed that in the original question. There is a good formulation here: <a href=\"http://programmers.stackexchange.com/a/168577\">programmers.stackexchange.com/a/168577</a>"}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1449540959, "post_id": 34146724, "comment_id": 56041443, "body": "Also, this is the distance to the whole line, not the line segment. See this SO post for some sample calculations in different languages: <a href=\"http://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment\" title=\"shortest distance between a point and a line segment\">stackoverflow.com/questions/849211/&hellip;</a>"}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1449541068, "post_id": 34146724, "comment_id": 56041458, "body": "I&#39;m still voting you up because you fully addressed the concept and I consider it laziness on the OP&#39;s part not to have Googled the answer before posting."}], "tags": [], "owner": {"reputation": 10409, "user_id": 483620, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/efc681121bec8b6c5f9b5bc0714396a0?s=128&d=identicon&r=PG", "display_name": "Benjamin", "link": "https://stackoverflow.com/users/483620/benjamin"}, "is_accepted": false, "score": 1, "last_activity_date": 1449540078, "creation_date": 1449540078, "answer_id": 34146724, "question_id": 33659453, "link": "https://stackoverflow.com/questions/33659453/calculate-distance-to-smoothed-line/34146724#34146724", "title": "Calculate distance to smoothed line", "body": "<p>The formula for the coordinates of the nearest point on the line is given <a href=\"https://en.wikipedia.org/wiki/Distance_from_a_point_to_a_line%20%22here%22.\" rel=\"nofollow noreferrer\">here</a>. Specifically, you are interested in the one called \"line defined by two points\". For posterity, the formula is:</p>\n\n<p><a href=\"https://i.stack.imgur.com/d9UK5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/d9UK5.png\" alt=\"Formula for distance between a line defined by two points, and a third point\"></a></p>\n\n<p>Because the frontier is relatively simple, you can loop through each two-point line segment in the frontier, and calculate the closest distance for each, keeping the smallest. You could introduce other constraints / pre-computations to limit the number of calculations required.</p>\n"}], "owner": {"reputation": 4265, "user_id": 1208142, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/vfF38.jpg?s=128&g=1", "display_name": "Lucien S.", "link": "https://stackoverflow.com/users/1208142/lucien-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 252, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1449540078, "creation_date": 1447274548, "last_edit_date": 1447276682, "question_id": 33659453, "link": "https://stackoverflow.com/questions/33659453/calculate-distance-to-smoothed-line", "title": "Calculate distance to smoothed line", "body": "<p>I'm trying to find the distance of a point (in 4 dimensions, only 2 are shown here) (any coloured crosses in the figure) to a supposed Pareto frontier (black line). This line represents the best Pareto frontier representation during an optimization process.</p>\n\n<pre><code>Pareto = [[0.3875575798354123, -2.4122340425531914], [0.37707675586149786, -2.398936170212766], [0.38176077842761763, -2.4069148936170213], [0.4080534133844003, -2.4914285714285715], [0.35963459448268725, -2.3631532329495126], [0.34395217638838566, -2.3579931972789114], [0.32203302106516224, -2.344858156028369], [0.36742404637441123, -2.3886054421768708], [0.40461156254852226, -2.4141156462585034], [0.36387868122767975, -2.375], [0.3393199109776927, -2.348404255319149]]\n</code></pre>\n\n<p>Right now, I calculate the distance from any point to the Pareto frontier like this:</p>\n\n<pre><code>def dominates(row, rowCandidate):\nreturn all(r &gt;= rc for r, rc in zip(row, rowCandidate))\n\ndef dist2Pareto(pareto,candidate):\n    listDist = []\n\n    dominateN = 0\n    dominatePoss = 0\n    if len(pareto) &gt;= 2:\n        for i in pareto:\n            if i != candidate:\n                dominatePoss += 1\n                dominate = dominates(candidate,i)\n                if dominate == True:\n                    dominateN += 1\n                listDist.append(np.linalg.norm(np.array(i)-np.array(candidate)))\n\n        listDist.sort()\n\n        if dominateN == len(pareto):\n            print \"beyond\"            \n            return listDist[0]  \n        else:\n            return listDist[0]\n</code></pre>\n\n<p>Where I calculate the distance to each point of the black line, and retrieve the shortest distance (distance to the closest point of the known Frontier). </p>\n\n<p>However, I feel I should calculate the distance to the closest line segment instead. How would I go about achieving this?</p>\n\n<p><a href=\"https://i.stack.imgur.com/Q2CsF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Q2CsF.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "tensorflow"], "comments": [{"owner": {"reputation": 119710, "user_id": 3574081, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LIW6C.jpg?s=128&g=1", "display_name": "mrry", "link": "https://stackoverflow.com/users/3574081/mrry"}, "edited": false, "score": 0, "creation_date": 1447281703, "post_id": 33659424, "comment_id": 55096082, "body": "Can you try editing line 19 of <code>fully_connected_feed.py</code> to simply do <code>import input_data</code>? (You might need to do the same for <code>import mnist</code> on the following line as well.)  This looks like an issue with the tutorial, which requires you to be in a particular path. Changing the import statements should fix it."}, {"owner": {"reputation": 143, "user_id": 5552083, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-eHhtYefXhmg/AAAAAAAAAAI/AAAAAAAAAMY/pWMRC8NeaHU/photo.jpg?sz=128", "display_name": "Marc Delingat", "link": "https://stackoverflow.com/users/5552083/marc-delingat"}, "reply_to_user": {"reputation": 119710, "user_id": 3574081, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LIW6C.jpg?s=128&g=1", "display_name": "mrry", "link": "https://stackoverflow.com/users/3574081/mrry"}, "edited": false, "score": 0, "creation_date": 1447284946, "post_id": 33659424, "comment_id": 55097351, "body": "Thank you. That solved the problem :-)"}], "answers": [{"tags": [], "owner": {"reputation": 119710, "user_id": 3574081, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LIW6C.jpg?s=128&g=1", "display_name": "mrry", "link": "https://stackoverflow.com/users/3574081/mrry"}, "is_accepted": true, "score": 13, "last_activity_date": 1447287971, "creation_date": 1447287971, "answer_id": 33662396, "question_id": 33659424, "link": "https://stackoverflow.com/questions/33659424/tensorflow-mnist-example-not-running-with-fully-connected-feed-py/33662396#33662396", "title": "TensorFlow MNIST example not running with fully_connected_feed.py", "body": "<p>This is a Python path issue. Assuming that the directory <code>tensorflow/g3doc/tutorials/mnist</code> is your current working directory (or in your Python path), the easiest way to resolve it is to change the following lines in fully_connected_feed.py from:</p>\n\n<pre><code>from tensorflow.g3doc.tutorials.mnist import input_data\nfrom tensorflow.g3doc.tutorials.mnist import mnist\n</code></pre>\n\n<p>...to:</p>\n\n<pre><code>import input_data\nimport mnist\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 558, "user_id": 4275865, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0wLdH.jpg?s=128&g=1", "display_name": "Barry Rogerson", "link": "https://stackoverflow.com/users/4275865/barry-rogerson"}, "is_accepted": false, "score": 1, "last_activity_date": 1447367954, "creation_date": 1447367954, "answer_id": 33682776, "question_id": 33659424, "link": "https://stackoverflow.com/questions/33659424/tensorflow-mnist-example-not-running-with-fully-connected-feed-py/33682776#33682776", "title": "TensorFlow MNIST example not running with fully_connected_feed.py", "body": "<p>Another alternative is to link the 'g3doc' directory from the github repo into the tensorflow python wheel folder. That way you don't need to change the code.</p>\n"}], "owner": {"reputation": 143, "user_id": 5552083, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-eHhtYefXhmg/AAAAAAAAAAI/AAAAAAAAAMY/pWMRC8NeaHU/photo.jpg?sz=128", "display_name": "Marc Delingat", "link": "https://stackoverflow.com/users/5552083/marc-delingat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 19632, "favorite_count": 1, "accepted_answer_id": 33662396, "answer_count": 2, "score": 14, "last_activity_date": 1450015149, "creation_date": 1447274417, "last_edit_date": 1450015149, "question_id": 33659424, "link": "https://stackoverflow.com/questions/33659424/tensorflow-mnist-example-not-running-with-fully-connected-feed-py", "title": "TensorFlow MNIST example not running with fully_connected_feed.py", "body": "<p>I am able to run the <code>Deep MNIST Example</code> fine, but when running <code>fully_connected_feed.py</code>, I am getting the following error:</p>\n\n<pre><code>File \"fully_connected_feed.py\", line 19, in &lt;module&gt;\nfrom tensorflow.g3doc.tutorials.mnist import input_data ImportError: No module named\ng3doc.tutorials.mnist\n</code></pre>\n\n<p>I am new to Python so could also just be a general setup problem.</p>\n"}, {"tags": ["python", "list", "pandas", "dataframe", "intersection"], "answers": [{"tags": [], "owner": {"reputation": 11923, "user_id": 1577947, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f343750acd1f96953260b47c705582d9?s=128&d=identicon&r=PG", "display_name": "Jarad", "link": "https://stackoverflow.com/users/1577947/jarad"}, "is_accepted": false, "score": 0, "last_activity_date": 1447307590, "creation_date": 1447307590, "answer_id": 33665233, "question_id": 33659417, "link": "https://stackoverflow.com/questions/33659417/python-pandas-dataframe-columns-of-lists-get-intersection-and-apply-function-to/33665233#33665233", "title": "Python Pandas Dataframe Columns of Lists, Get Intersection And Apply Function To Another Column", "body": "<p>I figured out how to achieve this with a non-pandas approach but it's pretty nasty. I was really hoping to learn how to do this with pandas (if it's even possible!)</p>\n\n<pre><code>for idx in df.index:\n    intersect = list(set(df['StemmedAG'][idx]).intersection(df['StemmedKW'][idx]))\n    positions = [i for word in intersect for i, j in enumerate(df['StemmedKW'][idx]) if j == word]\n    df.loc[idx, 'Keyword'] = ' '.join([\"+\"+word if df['Keyword'][idx].split().index(word) in positions else word for word in df['Keyword'][idx].split()])\n</code></pre>\n"}], "owner": {"reputation": 11923, "user_id": 1577947, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f343750acd1f96953260b47c705582d9?s=128&d=identicon&r=PG", "display_name": "Jarad", "link": "https://stackoverflow.com/users/1577947/jarad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 632, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1447307590, "creation_date": 1447274387, "last_edit_date": 1447304109, "question_id": 33659417, "link": "https://stackoverflow.com/questions/33659417/python-pandas-dataframe-columns-of-lists-get-intersection-and-apply-function-to", "title": "Python Pandas Dataframe Columns of Lists, Get Intersection And Apply Function To Another Column", "body": "<p><strong>Problem Data</strong></p>\n\n<pre><code>df = pd.DataFrame({'Keyword': ['basement finishing systems akron pa', 'basement finishing systems biglerville pa', 'basement finishing systems chambersburg pa', 'basement finishing systems christiana pa', 'basement finishing systems delta pa'], 'StemmedKW': [['basement', 'finish', 'system', 'akron', 'pa'], ['basement', 'finish', 'system', 'biglervil', 'pa'], ['basement', 'finish', 'system', 'chambersburg', 'pa'], ['basement', 'finish', 'system', 'christiana', 'pa'], ['basement', 'finish', 'system', 'delta', 'pa']], 'Ad Group': ['Finishing System', 'Finishing System', 'Finishing System', 'Finishing System', 'Finishing System'], 'Campaign': ['Campaign A', 'Campaign A', 'Campaign A', 'Campaign A', 'Campaign A'], 'StemmedAG': [['finish', 'system'], ['finish', 'system'], ['finish', 'system'], ['finish', 'system'], ['finish', 'system']]}, columns=['Campaign', 'Ad Group', 'Keyword', 'StemmedAG', 'StemmedKW'])\n</code></pre>\n\n<p><strong>Dataframe Looks Like This</strong></p>\n\n<pre><code>     Campaign          Ad Group                                     Keyword  \\\n0  Campaign A  Finishing System         basement finishing systems akron pa   \n1  Campaign A  Finishing System   basement finishing systems biglerville pa   \n2  Campaign A  Finishing System  basement finishing systems chambersburg pa   \n3  Campaign A  Finishing System    basement finishing systems christiana pa   \n4  Campaign A  Finishing System         basement finishing systems delta pa   \n\n          StemmedAG                                     StemmedKW  \n0  [finish, system]         [basement, finish, system, akron, pa]  \n1  [finish, system]     [basement, finish, system, biglervil, pa]  \n2  [finish, system]  [basement, finish, system, chambersburg, pa]  \n3  [finish, system]    [basement, finish, system, christiana, pa]  \n4  [finish, system]         [basement, finish, system, delta, pa] \n</code></pre>\n\n<p><strong>Context</strong></p>\n\n<p><code>StemmedAG</code> and <code>StemmedKW</code> are columns of lists. I produced these columns by word stemming the <code>Ad Group</code> and <code>Keyword</code> columns. The goal is to put a plus sign <code>+</code> in front of the keywords in the <code>Keyword</code> column for any words that appear in both <code>StemmedAG</code> and <code>StemmedKW</code>.</p>\n\n<p><strong>Result</strong></p>\n\n<p>Note how <code>row 0</code> <code>Keyword</code> has the value <code>basement +finishing +systems akron pa</code>?  This would happen because the word <code>finish</code> and <code>system</code> both appear in <code>StemmedAG</code> and <code>StemmedKW</code>.  Therefore, plus signs are put in front of the non-stemmed words in the <code>Keyword</code> column.</p>\n\n<pre><code>     Campaign          Ad Group                                       Keyword  \\\n0  Campaign A  Finishing System         basement +finishing +systems akron pa   \n1  Campaign A  Finishing System   basement +finishing +systems biglerville pa   \n2  Campaign A  Finishing System  basement +finishing +systems chambersburg pa   \n3  Campaign A  Finishing System    basement +finishing +systems christiana pa   \n4  Campaign A  Finishing System         basement +finishing +systems delta pa   \n\n              StemmedAG                                          StemmedKW  \n0  ['finish', 'system']    ['basement', 'finish', 'system', 'akron', 'pa']  \n1  ['finish', 'system']  ['basement', 'finish', 'system', 'biglervil', ...  \n2  ['finish', 'system']  ['basement', 'finish', 'system', 'chambersburg...  \n3  ['finish', 'system']  ['basement', 'finish', 'system', 'christiana',...  \n4  ['finish', 'system']    ['basement', 'finish', 'system', 'delta', 'pa'] \n</code></pre>\n\n<p>I'm not used to working with <code>lists</code> in columns of Pandas and don't know how to get the intersection of <code>lists</code> from two columns in a <code>dataframe</code>, then get the index of where the words appear, then apply plus signs to the front of each found index.  Or maybe easier would be a string replacement on <code>df['Keyword']</code> using the words from <code>StemmedAG</code>?</p>\n\n<p>I'd also like to do this the most pandas way possible and avoid <code>for</code> loops.</p>\n"}, {"tags": ["python", "tkinter", "widget", "bind", "simpledialog"], "answers": [{"tags": [], "owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "is_accepted": true, "score": 1, "last_activity_date": 1447301227, "last_edit_date": 1447301227, "creation_date": 1447300769, "answer_id": 33664214, "question_id": 33659401, "link": "https://stackoverflow.com/questions/33659401/python-tkinter-simpledialog-how-to-bind-a-key-to-the-ok-button-in-simpledialog/33664214#33664214", "title": "Python tkinter simpledialog. How to bind a key to the OK button in simpledialog", "body": "<p><code>SimpleDialog</code> is \"simple\". Create own dialog (using <code>TopLevel</code> widget) if you need something different.</p>\n\n<hr>\n\n<p>Or see <code>SimpleDialog</code> source code to recreate <code>askstring</code></p>\n\n<p><a href=\"https://fossies.org/dox/Python-3.5.0/simpledialog_8py_source.html\" rel=\"nofollow\">https://fossies.org/dox/Python-3.5.0/simpledialog_8py_source.html</a></p>\n\n<pre><code>import tkinter as tk\nimport tkinter.simpledialog \n\nclass My_QueryString(tkinter.simpledialog._QueryString):\n\n      def body(self, master):\n          self.bind('&lt;KP_Enter&gt;', self.ok) # KeyPad Enter\n          super().body(master)\n\ndef myaskstring(title, prompt, **kw):\n    d = My_QueryString(title, prompt, **kw)\n    return d.result\n\n#---------------------------------------------------------\n\nroot = tk.Tk()\n\nnew_name = myaskstring(\"Name Change\", \"New name\")\nif new_name:\n    print(new_name)\n\nroot.mainloop()\n</code></pre>\n"}], "owner": {"reputation": 1394, "user_id": 1575470, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/3f7083535b799a2d4174a18e2061dc6b?s=128&d=identicon&r=PG", "display_name": "whiteSkar", "link": "https://stackoverflow.com/users/1575470/whiteskar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4858, "favorite_count": 0, "accepted_answer_id": 33664214, "answer_count": 1, "score": 1, "last_activity_date": 1447301227, "creation_date": 1447274340, "last_edit_date": 1447279143, "question_id": 33659401, "link": "https://stackoverflow.com/questions/33659401/python-tkinter-simpledialog-how-to-bind-a-key-to-the-ok-button-in-simpledialog", "title": "Python tkinter simpledialog. How to bind a key to the OK button in simpledialog", "body": "<pre><code>def prompt_new_name(self):\n    new_name = simpledialog.askstring(\"Name Change\", \"New name\")\n    if new_name is not None:\n        self.request_name_change(new_name)\n</code></pre>\n\n<p>I want to bind enter key on the keypad to the OK button in the simpledialog askstrinig prompt. (realized later normal enter key is already bound, but I need both enter keys to be bound)\nI know how to bind enter key to a widget using bind function. However, to do that I need a reference to the widget.</p>\n\n<p>For this case, I don't have the reference to the widget since I am calling askstring fuction on simpledialog without making the widget. I am wondering how I can achieve what I want.</p>\n"}, {"tags": ["python", "loops", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 1924, "user_id": 5516874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ioXgB.jpg?s=128&g=1", "display_name": "Jessica", "link": "https://stackoverflow.com/users/5516874/jessica"}, "edited": false, "score": 0, "creation_date": 1447275026, "post_id": 33659543, "comment_id": 55092742, "body": "this time the error gives:     return array(a, dtype, copy=False, order=order) ValueError: setting an array element with a sequence"}], "tags": [], "owner": {"reputation": 1390, "user_id": 5551669, "user_type": "registered", "profile_image": "https://graph.facebook.com/100006442653263/picture?type=large", "display_name": "Galax", "link": "https://stackoverflow.com/users/5551669/galax"}, "is_accepted": true, "score": 0, "last_activity_date": 1447274837, "creation_date": 1447274837, "answer_id": 33659543, "question_id": 33659396, "link": "https://stackoverflow.com/questions/33659396/looping-through-files-and-data-error-message-pandas-python/33659543#33659543", "title": "looping through files and data error message pandas python", "body": "<p>The explanation at <a href=\"http://pandas.pydata.org/pandas-docs/stable/indexing.html#indexing-view-versus-copy\" rel=\"nofollow\">that link</a> was pretty helpful. It looks like the solution is to use <code>data.loc[:,('VHseq', position)] = seq</code> . The problem seems to be that the first <code>[]</code> returns a singly indexed data frame, which you can't necessarily just update.</p>\n"}], "owner": {"reputation": 1924, "user_id": 5516874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ioXgB.jpg?s=128&g=1", "display_name": "Jessica", "link": "https://stackoverflow.com/users/5516874/jessica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 33659543, "answer_count": 1, "score": 0, "last_activity_date": 1447275529, "creation_date": 1447274314, "last_edit_date": 1447275529, "question_id": 33659396, "link": "https://stackoverflow.com/questions/33659396/looping-through-files-and-data-error-message-pandas-python", "title": "looping through files and data error message pandas python", "body": "<p>I have an excel file:</p>\n\n<pre><code>data = pd.read_excel('.../excel.xlsx')\n\nVHseqName    VHseq      \n  nameA       \n  nameB\n  nameC\n  nameD\n  nameE\n  nameF\n....\n</code></pre>\n\n<p>i have a fasta file :</p>\n\n<pre><code>f=open(\".../Fastafile.fasta\", \"r+\")\n\n&gt;nameA\nAAAGGGCCT\n&gt;nameC\nGGTTAACC\n&gt;nameD\nCCCTTAA\n&gt;nameF \nGGGGGAATTCC\n....\n</code></pre>\n\n<p>my desired output is: (for every match of the name from excel and fasta, put the sequence which is the next line to the same row but for column 'VHseq')</p>\n\n<pre><code>  VHseqName    VHseq      \n  nameA       AAAGGGCCT\n  nameB\n  nameC       GGTTAACC\n  nameD       CCCTTAA\n  nameE\n  nameF       GGGGGAATTCC\n....\n</code></pre>\n\n<p>my code:</p>\n\n<pre><code>for vh in data[\"VHseqName\"]:\n\nposition = data.index.get_indexer_for((data[data['VHseqName'] == vh].index)) \n\n   for line in f:\n     title = line[1:]\n     title = title.rstrip()   \n     seq = f.readline()\n        if(title in vh):\n          data['VHseq'][position] = seq\n          break\n</code></pre>\n\n<p>my code works sometimes, and sometimes it doesn't give complete result table, and i get this error each time:</p>\n\n<p><strong>A value is trying to be set on a copy of a slice from a DataFrame\nSee the caveats in the documentation: <a href=\"http://pandas.pydata.org/pandas-\" rel=\"nofollow\">http://pandas.pydata.org/pandas-</a>   docs/stable/indexing.html#indexing-view-versus-copy\ndata['full_H_Sequence'][position] = seq</strong></p>\n\n<p>i looked into it and played around with the code and changed to (as suggested by comments below)</p>\n\n<pre><code>data.loc[:,('full_H_Sequence',position)] = seq \n</code></pre>\n\n<p>but this time i got this error message:\n<strong>return array(a, dtype, copy=False, order=order)\nValueError: setting an array element with a sequence</strong></p>\n\n<p>what's the right syntax to use here?</p>\n"}, {"tags": ["python", "numpy", "multidimensional-array", "append"], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 2657663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9f81d0b8f8d31c02a77867a4aa13d7a?s=128&d=identicon&r=PG", "display_name": "user2657663", "link": "https://stackoverflow.com/users/2657663/user2657663"}, "edited": false, "score": 0, "creation_date": 1447276497, "post_id": 33659460, "comment_id": 55093506, "body": "First off, Cheers for replying!!  It looks like numpy.newaxis is really close to what I need. The shape I&#39;m looking for is actually [90,1699,1699]. I&#39;ve just tried a few combinations of numpy.newaxis, but wasn&#39;t able to make it work. Is it possible?"}, {"owner": {"reputation": 12642, "user_id": 3019689, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cc10b8b7be444698cc0737fb52d51ce7?s=128&d=identicon&r=PG&f=1", "display_name": "jez", "link": "https://stackoverflow.com/users/3019689/jez"}, "reply_to_user": {"reputation": 73, "user_id": 2657663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9f81d0b8f8d31c02a77867a4aa13d7a?s=128&d=identicon&r=PG", "display_name": "user2657663", "link": "https://stackoverflow.com/users/2657663/user2657663"}, "edited": false, "score": 0, "creation_date": 1447276868, "post_id": 33659460, "comment_id": 55093698, "body": "You could start with <code>a = a.T</code> which means <code>a.shape</code> will be <code>[90,1699]</code> to start.  Then it&#39;s <code>a[:, np.newaxis, :] * a[ :, :, np.newaxis ]</code>.  Alternatively, you could also simply take my first solution and say <code>result = result.transpose([2,0,1])</code> at the end: this creates a new &quot;view&quot; of the numpy array with different dimension order and strides, but without needing to duplicate or move 2GB worth of content."}, {"owner": {"reputation": 12642, "user_id": 3019689, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cc10b8b7be444698cc0737fb52d51ce7?s=128&d=identicon&r=PG&f=1", "display_name": "jez", "link": "https://stackoverflow.com/users/3019689/jez"}, "reply_to_user": {"reputation": 73, "user_id": 2657663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9f81d0b8f8d31c02a77867a4aa13d7a?s=128&d=identicon&r=PG", "display_name": "user2657663", "link": "https://stackoverflow.com/users/2657663/user2657663"}, "edited": false, "score": 0, "creation_date": 1447277217, "post_id": 33659460, "comment_id": 55093881, "body": "Oops: should have been <code>&#47;</code>, not <code>*</code> in previous comment.   Note also: it&#39;s not really <code>numpy.newaxis</code> that&#39;s doing the magic for you.  You can also use <code>numpy.expand_dims</code>, or say something like <code>b = a.view(); c = a.view(); b.shape = [1699, 90, 1]; c.shape = [1699, 1, 90]; result = b&#47;c</code>  The important thing is simply to get the dimensions aligned right before letting numpy do the hard work: the magic is then done by the &quot;broadcasting&quot; nature of the <code>&#47;</code> operator when applied to numpy arrays."}], "tags": [], "owner": {"reputation": 12642, "user_id": 3019689, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cc10b8b7be444698cc0737fb52d51ce7?s=128&d=identicon&r=PG&f=1", "display_name": "jez", "link": "https://stackoverflow.com/users/3019689/jez"}, "is_accepted": false, "score": 0, "last_activity_date": 1447274961, "last_edit_date": 1447274961, "creation_date": 1447274560, "answer_id": 33659460, "question_id": 33659297, "link": "https://stackoverflow.com/questions/33659297/storing-multiple-arrays-within-multiple-arrays-within-an-array-python-numpy/33659460#33659460", "title": "Storing multiple arrays within multiple arrays within an array Python/Numpy", "body": "<p>Dividing each of the numbers in a given column by each of the other values in the same column can be accomplished in one operation as follows. </p>\n\n<pre><code>result = a[:, numpy.newaxis, :] / a[numpy.newaxis, :, :]\n</code></pre>\n\n<p>Because looping over the elements happens in the optimized binary depths of numpy, this is as fast as Python is ever going to get for this operation.</p>\n\n<p>If <code>a.shape</code> was <code>[1699,90]</code> to begin with, then the result will have shape <code>[1699,1699,90]</code>.  Assuming <code>dtype=float64</code>, that means you will need nearly 2 GB of memory available to store the result.</p>\n"}, {"tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": false, "score": 0, "last_activity_date": 1447278439, "last_edit_date": 1447278439, "creation_date": 1447277091, "answer_id": 33660149, "question_id": 33659297, "link": "https://stackoverflow.com/questions/33659297/storing-multiple-arrays-within-multiple-arrays-within-an-array-python-numpy/33660149#33660149", "title": "Storing multiple arrays within multiple arrays within an array Python/Numpy", "body": "<p>First let's focus on the load:</p>\n\n<pre><code>arrays = np.array([np.loadtxt(f, skiprows=1) for f in fnames])\nNIR_values = np.concatenate(arrays)\n</code></pre>\n\n<p>Your text talks about loading a file, and manipulating it.  But this clip loads multple files and joins them.</p>\n\n<p>My first change is to collect the arrays in a list, not another array</p>\n\n<pre><code>alist = [np.loadtxt(f, skiprows=1) for f in fnames]\n</code></pre>\n\n<p>If you want to skip some columns, look at using the <code>usecols</code> parameter.  That may save you work later.</p>\n\n<p>The elements of <code>alist</code> will now be 2d arrays (of floats).  If they are matching sizes <code>(N,M)</code>, they can be joined in various ways.  If there are <code>n</code> files, then</p>\n\n<pre><code>arrays = np.array(alist)  # (n,N,M) array\narrays = np.concatenate(alist, axis=0)   # (n*N, M) array\n# similarly for axis=1\n</code></pre>\n\n<p>Your code does the same, but potentially confuses steps:</p>\n\n<pre><code>In [566]: arrays = np.array([np.ones((3,4)) for i in range(5)])\nIn [567]: arrays.shape\nOut[567]: (5, 3, 4)     # (n,N,M) array\nIn [568]: NIR_values = np.concatenate(arrays)\nIn [569]: NIR_values.shape\nOut[569]: (15, 4)       # (n*N, M) array\n</code></pre>\n\n<p><code>NIR_band</code> is now <code>(4,15)</code>, and it's <code>len()</code> is the .shape[0]<code>, the size of the 1st dimension.</code>len(NIR_band[3])<code>is</code>shape[1]`, the size of the 2nd dimension.</p>\n\n<p>You could skip the columns of <code>NIR_values</code> with <code>NIR_values[:,3:]</code>.</p>\n\n<p>I get lost in the rest of text description.</p>\n\n<p>The <code>NIR_band[i][j]/NIR_band[i,:]</code>, I would rewrite as <code>NIR_band[i,j]/NIR_band[i,:]</code>. What's the purpose of that?</p>\n\n<p>As for you subject line, <code>Storing multiple arrays within multiple arrays within an array</code> - that sounds like making a 3 or 4d array.  <code>arrays</code> is 3d, <code>NIR_valus</code> is 2d.  </p>\n\n<p>Creating a (90,1699,1699) from a (93,1699) will probably involve (without iteration) a calculation analogous to:</p>\n\n<pre><code>In [574]: X = np.arange(13*4).reshape(13,4)\nIn [575]: X.shape\nOut[575]: (13, 4)\nIn [576]: (X[3:,:,None]+X[3:,None,:]).shape\nOut[576]: (10, 4, 4)\n</code></pre>\n\n<p>The last dimension is expanded with <code>None</code> (np.newaxis), and 2 versions broadcasted against each other.  <code>np.outer</code> does the multiplication of this calculation.</p>\n"}], "owner": {"reputation": 73, "user_id": 2657663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9f81d0b8f8d31c02a77867a4aa13d7a?s=128&d=identicon&r=PG", "display_name": "user2657663", "link": "https://stackoverflow.com/users/2657663/user2657663"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 904, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1447278439, "creation_date": 1447273925, "question_id": 33659297, "link": "https://stackoverflow.com/questions/33659297/storing-multiple-arrays-within-multiple-arrays-within-an-array-python-numpy", "title": "Storing multiple arrays within multiple arrays within an array Python/Numpy", "body": "<p>I have a text file with 93 columns and 1699 rows that I have imported into Python. The first three columns do not contain data that is necessary for what I'm currently trying to do. Within each column, I need to divide each element (aka row) in the column by all of the other elements (rows) in that same column. The result I want is an array of 90 elements where each of 1699 elements has 1699 elements. </p>\n\n<p>A more detailed description of what I'm attempting: I begin with Column3. At Column3, Row1 is to be divided by all the other rows (including the value in Row1) within Column3. That will give Row1 1699 calculations. Then the same process is done for Row2 and so on until Row1699. This gives Column3 1699x1699 calculations. When the calculations of all of the rows in Column 3 have completed, then the program moves on to do the same thing in Column 4 for all of the rows. This is done for all 90 columns which means that for the end result, I should have 90x1699x1699 calculations. </p>\n\n<p>My code as it currently is is: </p>\n\n<pre><code>import numpy as np\nfrom glob import glob\n\nfnames = glob(\"NIR_data.txt\")\narrays = np.array([np.loadtxt(f, skiprows=1) for f in fnames])\nNIR_values = np.concatenate(arrays)\nNIR_band = NIR_values.T\n\nC_values = []\n\nfor i in range(3,len(NIR_band)):\n    for j in range(0,len(NIR_band[3])):\n        loop_list = NIR_band[i][j]/NIR_band[i,:]\n        C_values.append(loop_list)\n</code></pre>\n\n<p>What it produces is an array of 1699x1699 dimension. Each individual array is the results from the Row calculations. Another complaint is that the code takes ages to run. So, I have two questions, is it possible to create the type of array I'd like to work with? And, is there a faster way of coding this calculation?</p>\n"}, {"tags": ["python", "dictionary"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user707650"}, "edited": false, "score": 1, "creation_date": 1447273717, "post_id": 33659192, "comment_id": 55092059, "body": "I&#39;d write a simple for loop stepping through each word in the list, with an if-statement. Have you tried anything so far?"}, {"owner": {"reputation": 51083, "user_id": 1467082, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/ZPeMR.jpg?s=128&g=1", "display_name": "David Zemens", "link": "https://stackoverflow.com/users/1467082/david-zemens"}, "edited": false, "score": 0, "creation_date": 1447273902, "post_id": 33659192, "comment_id": 55092167, "body": "using list comprehension this is simple: <code>sum([dictionary[i] for i in list if i in dictionary])</code>"}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1447275997, "post_id": 33659192, "comment_id": 55093224, "body": "You really should make an attempt and post it here."}], "answers": [{"comments": [{"owner": {"reputation": 51083, "user_id": 1467082, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/ZPeMR.jpg?s=128&g=1", "display_name": "David Zemens", "link": "https://stackoverflow.com/users/1467082/david-zemens"}, "edited": false, "score": 0, "creation_date": 1447274139, "post_id": 33659289, "comment_id": 55092290, "body": "Revised to solve the problem. Iteration is correct, but your summation was not correct :)"}, {"owner": {"reputation": 8933, "user_id": 546822, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/N4O1Z.jpg?s=128&g=1", "display_name": "Serjik", "link": "https://stackoverflow.com/users/546822/serjik"}, "reply_to_user": {"reputation": 51083, "user_id": 1467082, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/ZPeMR.jpg?s=128&g=1", "display_name": "David Zemens", "link": "https://stackoverflow.com/users/1467082/david-zemens"}, "edited": false, "score": 0, "creation_date": 1447274288, "post_id": 33659289, "comment_id": 55092373, "body": "@DavidZemens : sure tnx"}], "tags": [], "owner": {"reputation": 8933, "user_id": 546822, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/N4O1Z.jpg?s=128&g=1", "display_name": "Serjik", "link": "https://stackoverflow.com/users/546822/serjik"}, "is_accepted": false, "score": 0, "last_activity_date": 1447274086, "last_edit_date": 1447274086, "creation_date": 1447273901, "answer_id": 33659289, "question_id": 33659192, "link": "https://stackoverflow.com/questions/33659192/comparing-keys-from-dictionaries-to-a-list-of-strings-and-summing-the-values/33659289#33659289", "title": "Comparing keys from dictionaries to a list of strings and summing the values", "body": "<p>Don't use list as variable name (it's a keyword)</p>\n\n<p>This code does what you want:</p>\n\n<pre><code>sum_value = 0\nfor item in list1:\n    if item in dictionary:\n        sum_value += dictionary[item]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1447275947, "post_id": 33659304, "comment_id": 55093190, "body": "You could also use a generator expression instead of the list comprehension."}], "tags": [], "owner": {"reputation": 51083, "user_id": 1467082, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/ZPeMR.jpg?s=128&g=1", "display_name": "David Zemens", "link": "https://stackoverflow.com/users/1467082/david-zemens"}, "is_accepted": false, "score": 2, "last_activity_date": 1447273953, "creation_date": 1447273953, "answer_id": 33659304, "question_id": 33659192, "link": "https://stackoverflow.com/questions/33659192/comparing-keys-from-dictionaries-to-a-list-of-strings-and-summing-the-values/33659304#33659304", "title": "Comparing keys from dictionaries to a list of strings and summing the values", "body": "<p>Using list comprehension:</p>\n\n<pre><code>dictionary = {\"happy\": 5, \"greatest\": 10, \"best\": 5, \"excited\": 10}\nlst = [\"I\", \"am\", \"so\", \"happy\", \"this\", \"is\", \"the\", \"greatest\", \"day\", \"ever\", \"I\", \"am\", \"so\", \"excited\", \"!\"]\n\nprint sum([dictionary[i] for i in lst if i in dictionary])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "is_accepted": false, "score": 1, "last_activity_date": 1447274566, "last_edit_date": 1447274566, "creation_date": 1447274090, "answer_id": 33659338, "question_id": 33659192, "link": "https://stackoverflow.com/questions/33659192/comparing-keys-from-dictionaries-to-a-list-of-strings-and-summing-the-values/33659338#33659338", "title": "Comparing keys from dictionaries to a list of strings and summing the values", "body": "<p>You can use <a href=\"https://docs.python.org/2/library/stdtypes.html#dict.get\" rel=\"nofollow\"><strong><code>get</code></strong></a> on a <a href=\"https://docs.python.org/2/library/stdtypes.html#dict\" rel=\"nofollow\"><strong><code>dict</code></strong></a> with a default value to return if the key doesn't exist.</p>\n\n<p>Also, dictionary and list are not good variable names, even in an example:</p>\n\n<pre><code>&gt;&gt;&gt; weights = {\"happy\": 5, \"greatest\": 10, \"best\": 5, \"excited\": 10}\n&gt;&gt;&gt; sentence = 'I am so happy this is the greatest day ever I am so excited !'\n\n&gt;&gt;&gt; sum(weights.get(word, 0) for word in sentence.split())\n20\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 5552136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68bde8002c2f84ae0570eac49aa93276?s=128&d=identicon&r=PG&f=1", "display_name": "JenJen95", "link": "https://stackoverflow.com/users/5552136/jenjen95"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1447274566, "creation_date": 1447273542, "question_id": 33659192, "link": "https://stackoverflow.com/questions/33659192/comparing-keys-from-dictionaries-to-a-list-of-strings-and-summing-the-values", "title": "Comparing keys from dictionaries to a list of strings and summing the values", "body": "<p>so I have made a dictionary, the keys are words and the values are numerical values associated to each of the words. I also have a list of words. I want to take the words in the list and see if any of them are in the dictionary. If words from the list are in the dictionary, I need to be able to add up the values associated with each of the words.</p>\n\n<pre><code>dictionary = {\"happy\": 5, \"greatest\": 10, \"best\": 5, \"excited\": 10}\nlist = [\"I\", \"am\", \"so\", \"happy\", \"this\", \"is\", \"the\", \"greatest\", \"day\", \"ever\", \"I\", \"am\", \"so\", \"excited\", \"!\"]\n</code></pre>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user707650"}, "edited": false, "score": 1, "creation_date": 1447273888, "post_id": 33659179, "comment_id": 55092158, "body": "Count your groups (i.e., parentheses): you have two sets of parentheses/groups for each of a, b and c. You may need to make some of these non-capturing, or just other referring numbers in your replacement string. Alternatively, use named groups."}, {"owner": {"reputation": 28647, "user_id": 1422096, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/da3871bf5450fa726f20557fa3f18f51?s=128&d=identicon&r=PG", "display_name": "Basj", "link": "https://stackoverflow.com/users/1422096/basj"}, "edited": false, "score": 0, "creation_date": 1447273941, "post_id": 33659179, "comment_id": 55092187, "body": "@Evert do you have an example? I couldn&#39;t find a way to do it, to make them non-capturing"}], "answers": [{"comments": [{"owner": {"reputation": 28647, "user_id": 1422096, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/da3871bf5450fa726f20557fa3f18f51?s=128&d=identicon&r=PG", "display_name": "Basj", "link": "https://stackoverflow.com/users/1422096/basj"}, "edited": false, "score": 0, "creation_date": 1447274045, "post_id": 33659307, "comment_id": 55092245, "body": "I tried with <code>$1</code> instead of <code>\\1</code>, etc. but it doesn&#39;t work."}, {"owner": {"reputation": 28647, "user_id": 1422096, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/da3871bf5450fa726f20557fa3f18f51?s=128&d=identicon&r=PG", "display_name": "Basj", "link": "https://stackoverflow.com/users/1422096/basj"}, "edited": false, "score": 0, "creation_date": 1447274488, "post_id": 33659307, "comment_id": 55092468, "body": "Thanks @JoeYoung. How to get <code>thisisb=23.23 thisisa=2323.232323 thisisc=112  d=12</code> as output then?"}], "tags": [], "owner": {"reputation": 5436, "user_id": 2744166, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b079827a014bd14f42b163afd4bb1e91?s=128&d=identicon&r=PG", "display_name": "Joe Young", "link": "https://stackoverflow.com/users/2744166/joe-young"}, "is_accepted": true, "score": 2, "last_activity_date": 1447275487, "last_edit_date": 1447275487, "creation_date": 1447273964, "answer_id": 33659307, "question_id": 33659179, "link": "https://stackoverflow.com/questions/33659179/matching-and-replacing-floats-with-re-sub/33659307#33659307", "title": "Matching and replacing floats with re.sub", "body": "<p>From the perlretut:</p>\n\n<blockquote>\n  <p>If the groupings in a regexp are nested, $1 gets the group with the\n  leftmost opening parenthesis, $2 the next opening parenthesis, etc.</p>\n</blockquote>\n\n<p>Source: <a href=\"http://perldoc.perl.org/perlretut.html\" rel=\"nofollow\">http://perldoc.perl.org/perlretut.html</a></p>\n\n<p>Python's regex engine is based on Perl's so the behaviour is similar.</p>\n\n<p>So:</p>\n\n<p><code>a=(([-+]?(\\d*[.])?\\d+)</code> outer capture group i.e. <code>2323.232323</code> == Group 1</p>\n\n<p><code>a=(([-+]?(\\d*[.])?\\d+)</code> inner capture group i.e. <code>(\\d*[.])</code> i.e. <code>2323.</code> == Group 2</p>\n\n<p><code>b=([-+]?(\\d*[.])?\\d+)</code> outer capture group i.e. <code>23.23</code> == Group 3</p>\n\n<p>To get the output you want, try this:</p>\n\n<pre><code>import re\ns = \"a=2323.232323 b=23.23 c=112  d=12\"\npattern = r'a=([-+]?(\\d*[.])?\\d+) b=([-+]?(\\d*[.])?\\d+) c=([-+]?(\\d*)([.]\\d*)?)'\ntobereplacedwith = r'thisisb=\\3 thisisa=\\1 thisisc=\\6'\nprint re.sub(pattern, tobereplacedwith, s)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>thisisb=23.23 thisisa=2323.232323 thisisc=112  d=12\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1989, "user_id": 996114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12ab699f0efdf582f02f8f3dbba7a4b1?s=128&d=identicon&r=PG", "display_name": "Mike Covington", "link": "https://stackoverflow.com/users/996114/mike-covington"}, "is_accepted": false, "score": 2, "last_activity_date": 1447276404, "creation_date": 1447276404, "answer_id": 33659956, "question_id": 33659179, "link": "https://stackoverflow.com/questions/33659179/matching-and-replacing-floats-with-re-sub/33659956#33659956", "title": "Matching and replacing floats with re.sub", "body": "<p>When your capture groups get complex, sometimes it is easier to used named capture groups. For example:</p>\n\n<pre><code>pattern = r'a=(?P&lt;thisisa&gt;[-+]?(\\d*[.])?\\d+) b=(?P&lt;thisisb&gt;[-+]?(\\d*[.])?\\d+) c=(?P&lt;thisisc&gt;[-+]?(\\d*[.])?\\d+)'\ntobereplacedwith = r'thisisb=\\g&lt;thisisb&gt; thisisa=\\g&lt;thisisa&gt; thisisc=\\g&lt;thisisc&gt;'\n</code></pre>\n\n<p>To create a capture group named <code>foo</code>, you use <code>(?&lt;foo&gt;...)</code>. To create a back-reference to it, you use <code>(?=foo)</code>. To get the contents of it, you use <code>\\g&lt;foo&gt;</code>.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "is_accepted": false, "score": 1, "last_activity_date": 1447288002, "creation_date": 1447288002, "answer_id": 33662402, "question_id": 33659179, "link": "https://stackoverflow.com/questions/33659179/matching-and-replacing-floats-with-re-sub/33662402#33662402", "title": "Matching and replacing floats with re.sub", "body": "<p>This is your regex, with the current grouping's:<br>\n<a href=\"http://www.regexformat.com\" rel=\"nofollow\">Formatted and tested:</a>  </p>\n\n<pre><code> a=\n (                             # (1 start)\n      [-+]? \n      ( \\d* [.] )?                  # (2)\n      \\d+ \n )                             # (1 end)\n \\ b=\n (                             # (3 start)\n      [-+]? \n      ( \\d* [.] )?                  # (4)\n      \\d+ \n )                             # (3 end)\n \\ c=\n (                             # (5 start)\n      [-+]? \n      ( \\d* [.] )?                  # (6)\n      \\d+ \n )                             # (5 end)\n</code></pre>\n\n<p>Output:  </p>\n\n<pre><code> **  Grp 0 -  ( pos 0 , len 27 ) \na=2323.232323 b=23.23 c=112  \n **  Grp 1 -  ( pos 2 , len 11 ) \n2323.232323  \n **  Grp 2 -  ( pos 2 , len 5 ) \n2323.  \n **  Grp 3 -  ( pos 16 , len 5 ) \n23.23  \n **  Grp 4 -  ( pos 16 , len 3 ) \n23.  \n **  Grp 5 -  ( pos 24 , len 3 ) \n112  \n **  Grp 6 -  NULL \n</code></pre>\n\n<p>You don't need the <em>optional</em> capture subgroups.<br>\nAfter converting them to <em>cluster groups</em> :  </p>\n\n<pre><code> # a=([-+]?(?:\\d*[.])?\\d+) b=([-+]?(?:\\d*[.])?\\d+) c=([-+]?(?:\\d*[.])?\\d+)\n\n a=\n (                             # (1 start)\n      [-+]? \n      (?: \\d* [.] )?\n      \\d+ \n )                             # (1 end)\n \\ b=\n (                             # (2 start)\n      [-+]? \n      (?: \\d* [.] )?\n      \\d+ \n )                             # (2 end)\n \\ c=\n (                             # (3 start)\n      [-+]? \n      (?: \\d* [.] )?\n      \\d+ \n )                             # (3 end)\n</code></pre>\n\n<p>Output:  </p>\n\n<pre><code> **  Grp 0 -  ( pos 0 , len 27 ) \na=2323.232323 b=23.23 c=112  \n **  Grp 1 -  ( pos 2 , len 11 ) \n2323.232323  \n **  Grp 2 -  ( pos 16 , len 5 ) \n23.23  \n **  Grp 3 -  ( pos 24 , len 3 ) \n112  \n</code></pre>\n"}], "owner": {"reputation": 28647, "user_id": 1422096, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/da3871bf5450fa726f20557fa3f18f51?s=128&d=identicon&r=PG", "display_name": "Basj", "link": "https://stackoverflow.com/users/1422096/basj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 488, "favorite_count": 0, "accepted_answer_id": 33659307, "answer_count": 3, "score": 1, "last_activity_date": 1447288002, "creation_date": 1447273485, "question_id": 33659179, "link": "https://stackoverflow.com/questions/33659179/matching-and-replacing-floats-with-re-sub", "title": "Matching and replacing floats with re.sub", "body": "<p>Suprisingly, the output of</p>\n\n<pre><code>import re\ns = \"a=2323.232323 b=23.23 c=112  d=12\"\npattern = r'a=([-+]?(\\d*[.])?\\d+) b=([-+]?(\\d*[.])?\\d+) c=([-+]?(\\d*[.])?\\d+)'\ntobereplacedwith = r'thisisb=\\2 thisisa=\\1 thisisc=\\3'\nprint re.sub(pattern, tobereplacedwith, s)\n</code></pre>\n\n<p>is </p>\n\n<pre><code>thisisb=2323. thisisa=2323.232323 thisisc=23.23  d=12\n</code></pre>\n\n<p><strong>Why doesn't this produce</strong> </p>\n\n<pre><code>thisisb=23.23 thisisa=2323.232323 thisisc=112  d=12\n</code></pre>\n\n<p><strong>?</strong></p>\n"}, {"tags": ["python", "dictionary", "functional-programming"], "comments": [{"owner": {"reputation": 695068, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 1, "creation_date": 1447273503, "post_id": 33659139, "comment_id": 55091951, "body": "Make sure you tell the Haskell people that list comprehensions aren&#39;t functional..."}, {"owner": {"reputation": 2449, "user_id": 2397318, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/e98da1c8bd5fc26c80a02d99a8fe35f7?s=128&d=identicon&r=PG", "display_name": "meto", "link": "https://stackoverflow.com/users/2397318/meto"}, "reply_to_user": {"reputation": 695068, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 1, "creation_date": 1447274850, "post_id": 33659139, "comment_id": 55092637, "body": "Bad phrasing. I really don&#39;t want to start a war with the Haskell people :)"}, {"owner": {"reputation": 6107, "user_id": 7851470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d10f0dc1bc1f340708d6f6b4c8ec3866?s=128&d=identicon&r=PG&f=1", "display_name": "Georgy", "link": "https://stackoverflow.com/users/7851470/georgy"}, "edited": false, "score": 0, "creation_date": 1557495341, "post_id": 33659139, "comment_id": 98795538, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/11736407/apply-list-of-functions-on-an-object-in-python\">Apply list of functions on an object in Python</a>"}], "answers": [{"comments": [{"owner": {"reputation": 19090, "user_id": 138772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32504cb73cc05b26335a43219fff3a79?s=128&d=identicon&r=PG", "display_name": "JAB", "link": "https://stackoverflow.com/users/138772/jab"}, "edited": false, "score": 0, "creation_date": 1447274273, "post_id": 33659365, "comment_id": 55092360, "body": "Of course, the same holds for the generator expression <code>(fun(arg) for fun in list_of_functions)</code>."}, {"owner": {"reputation": 2449, "user_id": 2397318, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/e98da1c8bd5fc26c80a02d99a8fe35f7?s=128&d=identicon&r=PG", "display_name": "meto", "link": "https://stackoverflow.com/users/2397318/meto"}, "edited": false, "score": 0, "creation_date": 1447274713, "post_id": 33659365, "comment_id": 55092585, "body": "Thanks for the note, but my question is more about the syntax. For now I don&#39;t really care if i get back a generator or an actual object"}, {"owner": {"reputation": 1390, "user_id": 5551669, "user_type": "registered", "profile_image": "https://graph.facebook.com/100006442653263/picture?type=large", "display_name": "Galax", "link": "https://stackoverflow.com/users/5551669/galax"}, "edited": false, "score": 0, "creation_date": 1447274958, "post_id": 33659365, "comment_id": 55092697, "body": "I&#39;d go with the generator expression in JAB&#39;s comment if you are using a new enough version of Python."}], "tags": [], "owner": {"reputation": 1390, "user_id": 5551669, "user_type": "registered", "profile_image": "https://graph.facebook.com/100006442653263/picture?type=large", "display_name": "Galax", "link": "https://stackoverflow.com/users/5551669/galax"}, "is_accepted": false, "score": 1, "last_activity_date": 1447274357, "last_edit_date": 1447274357, "creation_date": 1447274187, "answer_id": 33659365, "question_id": 33659139, "link": "https://stackoverflow.com/questions/33659139/apply-multiple-functions-to-the-same-argument-in-functional-python/33659365#33659365", "title": "Apply multiple functions to the same argument in functional Python", "body": "<p>In Python 3 your <code>map()</code> example returns a map object, so the functions are only called when it is iterated over, which is at least lazy.</p>\n"}, {"comments": [{"owner": {"reputation": 2449, "user_id": 2397318, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/e98da1c8bd5fc26c80a02d99a8fe35f7?s=128&d=identicon&r=PG", "display_name": "meto", "link": "https://stackoverflow.com/users/2397318/meto"}, "edited": false, "score": 1, "creation_date": 1447275056, "post_id": 33659502, "comment_id": 55092755, "body": "Not sure if I agree. Isn&#39;t this creating <code>(f.arg(), g.arg(), h.arg())</code>?"}, {"owner": {"reputation": 36583, "user_id": 42610, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/5ea9e348dc045d53f5659eadf3e695b2?s=128&d=identicon&r=PG", "display_name": "liori", "link": "https://stackoverflow.com/users/42610/liori"}, "reply_to_user": {"reputation": 2449, "user_id": 2397318, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/e98da1c8bd5fc26c80a02d99a8fe35f7?s=128&d=identicon&r=PG", "display_name": "meto", "link": "https://stackoverflow.com/users/2397318/meto"}, "edited": false, "score": 1, "creation_date": 1447275243, "post_id": 33659502, "comment_id": 55092855, "body": "@meto: ah, sorry, you found my post before I realized my mistake. It&#39;s fixed now ;-)"}, {"owner": {"reputation": 2449, "user_id": 2397318, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/e98da1c8bd5fc26c80a02d99a8fe35f7?s=128&d=identicon&r=PG", "display_name": "meto", "link": "https://stackoverflow.com/users/2397318/meto"}, "edited": false, "score": 0, "creation_date": 1447275831, "post_id": 33659502, "comment_id": 55093141, "body": "Thanks for the correction. I agree that this looks uglier than the list comprehensions. I would really like to see a <code>functioncaller</code> function, even if I understand that the usage would be quite limited"}], "tags": [], "owner": {"reputation": 36583, "user_id": 42610, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/5ea9e348dc045d53f5659eadf3e695b2?s=128&d=identicon&r=PG", "display_name": "liori", "link": "https://stackoverflow.com/users/42610/liori"}, "is_accepted": true, "score": 4, "last_activity_date": 1447275178, "last_edit_date": 1447275178, "creation_date": 1447274710, "answer_id": 33659502, "question_id": 33659139, "link": "https://stackoverflow.com/questions/33659139/apply-multiple-functions-to-the-same-argument-in-functional-python/33659502#33659502", "title": "Apply multiple functions to the same argument in functional Python", "body": "<p>You can try:</p>\n\n<pre><code>from operator import methodcaller\n\nmap(methodcaller('__call__', arg), list_of_functions)\n</code></pre>\n\n<p>The <a href=\"https://docs.python.org/2/library/operator.html\" rel=\"nofollow\"><code>operator</code></a> module also has similar functions for getting fixed attributes or items out of an object, often useful in functional-esque programming style. Nothing directly for calling a callable, but <a href=\"https://docs.python.org/2/library/operator.html#operator.methodcaller\" rel=\"nofollow\"><code>methodcaller</code></a> is close enough.</p>\n\n<p>Though, I personally like list comprehension more in this case. Maybe if there was a direct equivalent in the <code>operator</code> module, like:</p>\n\n<pre><code>def functioncaller(*args, **kwargs):\n    return lambda fun:fun(*args, **kwargs)\n</code></pre>\n\n<p>\u2026to use it as:</p>\n\n<pre><code>map(functioncaller(arg), list_of_functions)\n</code></pre>\n\n<p>\u2026then maybe it would be convenient enough?</p>\n"}], "owner": {"reputation": 2449, "user_id": 2397318, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/e98da1c8bd5fc26c80a02d99a8fe35f7?s=128&d=identicon&r=PG", "display_name": "meto", "link": "https://stackoverflow.com/users/2397318/meto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2995, "favorite_count": 2, "accepted_answer_id": 33659502, "answer_count": 2, "score": 1, "last_activity_date": 1447275178, "creation_date": 1447273356, "question_id": 33659139, "link": "https://stackoverflow.com/questions/33659139/apply-multiple-functions-to-the-same-argument-in-functional-python", "title": "Apply multiple functions to the same argument in functional Python", "body": "<p>I am trying to \"invert\" <code>map</code> (same function, multiple arguments) in a case where I have multiple function that I want to apply to the same argument. I am trying to find a more function approach to replace the classical</p>\n\n<pre><code>arg = \"My fixed argument\"\nlist_of_functions = [f, g, h] #note that they all have the same signature\n[fun(arg) for fun in list_of_functions]\n</code></pre>\n\n<p>The only thing I could come up with is</p>\n\n<pre><code>map(lambda x: x(arg), list_of_functions)\n</code></pre>\n\n<p>which is not really great.</p>\n"}, {"tags": ["python", "string", "list", "python-2.7", "substring"], "comments": [{"owner": {"reputation": 111, "user_id": 4905796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1a1f7e1f3af3d7ad1aababfaad9c1f4?s=128&d=identicon&r=PG", "display_name": "Rishi", "link": "https://stackoverflow.com/users/4905796/rishi"}, "edited": false, "score": 0, "creation_date": 1447274126, "post_id": 33659118, "comment_id": 55092285, "body": "What regular expressions have you tried so far? Are you able to extract at least one substring, e.g. just the first: &quot;&lt;C (programming language)&gt;&quot;?"}, {"owner": {"reputation": 211, "user_id": 5397716, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/fe3304d4214ff7175bd69fb36d74f18b?s=128&d=identicon&r=PG&f=1", "display_name": "Cosma Iaffaldano", "link": "https://stackoverflow.com/users/5397716/cosma-iaffaldano"}, "reply_to_user": {"reputation": 111, "user_id": 4905796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1a1f7e1f3af3d7ad1aababfaad9c1f4?s=128&d=identicon&r=PG", "display_name": "Rishi", "link": "https://stackoverflow.com/users/4905796/rishi"}, "edited": false, "score": 0, "creation_date": 1447274855, "post_id": 33659118, "comment_id": 55092639, "body": "I have tried re.search or re.match for find all substrings with this feature &lt;sub-string&gt; So i use this pattern &lt;.*?&gt; but i have no match."}, {"owner": {"reputation": 111, "user_id": 4905796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1a1f7e1f3af3d7ad1aababfaad9c1f4?s=128&d=identicon&r=PG", "display_name": "Rishi", "link": "https://stackoverflow.com/users/4905796/rishi"}, "edited": false, "score": 0, "creation_date": 1447278626, "post_id": 33659118, "comment_id": 55094585, "body": "<code>&lt;.*?&gt;</code> should have worked, as you have correctly used the non-greedy <code>*?</code>. Try that with the answer you picked. But this greedy <code>*</code> vs. non-greedy <code>*?</code> is always confusing, so I&#39;d also go with the much clearer <code>&lt;[^&gt;]*&gt;</code> or <code>&lt;[^&gt;]+&gt;</code>."}], "answers": [{"tags": [], "owner": {"reputation": 7582, "user_id": 1608816, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/808f852fc552d0791ef2de213cc59f45?s=128&d=identicon&r=PG&f=1", "display_name": "tobspr", "link": "https://stackoverflow.com/users/1608816/tobspr"}, "is_accepted": true, "score": 6, "last_activity_date": 1447274432, "creation_date": 1447274432, "answer_id": 33659429, "question_id": 33659118, "link": "https://stackoverflow.com/questions/33659118/create-a-list-of-substrings-from-string/33659429#33659429", "title": "Create a list of substrings from string", "body": "<p>Using regular expressions, you can use:</p>\n\n<pre><code>import re\nregexp = re.compile(\"&lt;[^&gt;]+&gt;\")\nmatches = regexp.findall(my_string)\n</code></pre>\n\n<p>The regular expression basically matches everything starting with a '&lt;' and ending with a '>'. <code>findall</code> then returns all found matches.</p>\n"}, {"tags": [], "owner": {"reputation": 601, "user_id": 5513449, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a05a860a36fdd2afb665db132b4606ed?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/5513449/daniel"}, "is_accepted": false, "score": 1, "last_activity_date": 1447274727, "creation_date": 1447274727, "answer_id": 33659509, "question_id": 33659118, "link": "https://stackoverflow.com/questions/33659118/create-a-list-of-substrings-from-string/33659509#33659509", "title": "Create a list of substrings from string", "body": "<p>This can be done using the re import, although another solution would be to use the split method as shown here:</p>\n\n<pre><code>st = st.split('&gt;')  # splits the string to a list made of elements divided by the '&gt;' sign but deletes the '&gt;' sign\ndel st[len(st) - 1]  # Splitting your String like we did will add another unneccesary element in the end of the list\nst = [i + \"&gt;\" for i in st]  # adds back the '&gt;' sign to the every element of the list\n</code></pre>\n\n<p>Hope it helped</p>\n"}], "owner": {"reputation": 211, "user_id": 5397716, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/fe3304d4214ff7175bd69fb36d74f18b?s=128&d=identicon&r=PG&f=1", "display_name": "Cosma Iaffaldano", "link": "https://stackoverflow.com/users/5397716/cosma-iaffaldano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 402, "favorite_count": 0, "accepted_answer_id": 33659429, "answer_count": 2, "score": 1, "last_activity_date": 1447274727, "creation_date": 1447273278, "question_id": 33659118, "link": "https://stackoverflow.com/questions/33659118/create-a-list-of-substrings-from-string", "title": "Create a list of substrings from string", "body": "<p>I have this string:</p>\n\n<pre><code>\"&lt;C (programming language)&gt; &lt;C++ (programming language)&gt; &lt;Programming Languages&gt; &lt;Computer Programming&gt; \"\n</code></pre>\n\n<p>And i want to obtain a list of substrings, like this:</p>\n\n<pre><code>['&lt;C (programming language)&gt;','&lt;C++ (programming language)&gt;','&lt;Programming Languages&gt;','&lt;Computer Programming&gt;']\n</code></pre>\n\n<p>I tried to use <strong>re library python</strong> but without success</p>\n"}, {"tags": ["python", "encryption", "vigenere"], "comments": [{"owner": {"reputation": 58084, "user_id": 1816580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f30e6b41f1e2bd48b058e8e72c1f0f57?s=128&d=identicon&r=PG", "display_name": "Artjom B.", "link": "https://stackoverflow.com/users/1816580/artjom-b"}, "edited": false, "score": 1, "creation_date": 1447275298, "post_id": 33659092, "comment_id": 55092880, "body": "It&#39;s time to learn about functions which encapsulate a part of the code in a callable fashion."}, {"owner": {"reputation": 1, "user_id": 5551851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d4b4a225a4cc2c17014485b11635bb5?s=128&d=identicon&r=PG&f=1", "display_name": "Muntee JNR", "link": "https://stackoverflow.com/users/5551851/muntee-jnr"}, "reply_to_user": {"reputation": 58084, "user_id": 1816580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f30e6b41f1e2bd48b058e8e72c1f0f57?s=128&d=identicon&r=PG", "display_name": "Artjom B.", "link": "https://stackoverflow.com/users/1816580/artjom-b"}, "edited": false, "score": 0, "creation_date": 1447276961, "post_id": 33659092, "comment_id": 55093744, "body": "i dont know what that means im a beginner at python  soooooooo............"}, {"owner": {"reputation": 58084, "user_id": 1816580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f30e6b41f1e2bd48b058e8e72c1f0f57?s=128&d=identicon&r=PG", "display_name": "Artjom B.", "link": "https://stackoverflow.com/users/1816580/artjom-b"}, "edited": false, "score": 1, "creation_date": 1447277180, "post_id": 33659092, "comment_id": 55093866, "body": "I understood that you&#39;re a beginner. That&#39;s why I suggested that you learn about <a href=\"https://docs.python.org/2/tutorial/controlflow.html#defining-functions\" rel=\"nofollow noreferrer\">functions</a> so that you can call the same code with different parameters without copying it around."}, {"owner": {"reputation": 1, "user_id": 5551851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d4b4a225a4cc2c17014485b11635bb5?s=128&d=identicon&r=PG&f=1", "display_name": "Muntee JNR", "link": "https://stackoverflow.com/users/5551851/muntee-jnr"}, "reply_to_user": {"reputation": 58084, "user_id": 1816580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f30e6b41f1e2bd48b058e8e72c1f0f57?s=128&d=identicon&r=PG", "display_name": "Artjom B.", "link": "https://stackoverflow.com/users/1816580/artjom-b"}, "edited": false, "score": 0, "creation_date": 1447278360, "post_id": 33659092, "comment_id": 55094444, "body": "ok, i will comment again if i get stuck"}, {"owner": {"reputation": 1, "user_id": 5551851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d4b4a225a4cc2c17014485b11635bb5?s=128&d=identicon&r=PG&f=1", "display_name": "Muntee JNR", "link": "https://stackoverflow.com/users/5551851/muntee-jnr"}, "reply_to_user": {"reputation": 58084, "user_id": 1816580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f30e6b41f1e2bd48b058e8e72c1f0f57?s=128&d=identicon&r=PG", "display_name": "Artjom B.", "link": "https://stackoverflow.com/users/1816580/artjom-b"}, "edited": false, "score": 0, "creation_date": 1447351455, "post_id": 33659092, "comment_id": 55129498, "body": "i managed to d oit but know is says &quot;KeywordTwoencrypt= Keyword2[KeywordTwocount] NameError: name &#39;Keyword2&#39; is not defined&quot;"}, {"owner": {"reputation": 1, "user_id": 5551851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d4b4a225a4cc2c17014485b11635bb5?s=128&d=identicon&r=PG&f=1", "display_name": "Muntee JNR", "link": "https://stackoverflow.com/users/5551851/muntee-jnr"}, "reply_to_user": {"reputation": 58084, "user_id": 1816580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f30e6b41f1e2bd48b058e8e72c1f0f57?s=128&d=identicon&r=PG", "display_name": "Artjom B.", "link": "https://stackoverflow.com/users/1816580/artjom-b"}, "edited": false, "score": 0, "creation_date": 1447351828, "post_id": 33659092, "comment_id": 55129737, "body": "wrong error pls chech the error in image provided"}, {"owner": {"reputation": 8404, "user_id": 243712, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5347c683b6963f418d1b16c65917bf3f?s=128&d=identicon&r=PG", "display_name": "poolie", "link": "https://stackoverflow.com/users/243712/poolie"}, "edited": false, "score": 0, "creation_date": 1447354077, "post_id": 33659092, "comment_id": 55131016, "body": "Copy the code from <a href=\"http://stackoverflow.com/q/32595168/243712\">stackoverflow.com/q/32595168/243712</a>"}, {"owner": {"reputation": 1, "user_id": 5551851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d4b4a225a4cc2c17014485b11635bb5?s=128&d=identicon&r=PG&f=1", "display_name": "Muntee JNR", "link": "https://stackoverflow.com/users/5551851/muntee-jnr"}, "edited": false, "score": 0, "creation_date": 1447356766, "post_id": 33659092, "comment_id": 55132631, "body": "i wantto encrypt the message twice and save the encrypted message as a text file"}, {"owner": {"reputation": 1, "user_id": 5551851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d4b4a225a4cc2c17014485b11635bb5?s=128&d=identicon&r=PG&f=1", "display_name": "Muntee JNR", "link": "https://stackoverflow.com/users/5551851/muntee-jnr"}, "edited": false, "score": 0, "creation_date": 1447356785, "post_id": 33659092, "comment_id": 55132643, "body": "i would rather want to know how to fix this problem"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5551851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d4b4a225a4cc2c17014485b11635bb5?s=128&d=identicon&r=PG&f=1", "display_name": "Muntee JNR", "link": "https://stackoverflow.com/users/5551851/muntee-jnr"}, "edited": false, "score": 0, "creation_date": 1447357140, "post_id": 33678414, "comment_id": 55132852, "body": "im in a rush i dont have time"}], "tags": [], "owner": {"reputation": 8404, "user_id": 243712, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5347c683b6963f418d1b16c65917bf3f?s=128&d=identicon&r=PG", "display_name": "poolie", "link": "https://stackoverflow.com/users/243712/poolie"}, "is_accepted": false, "score": 0, "last_activity_date": 1447351997, "creation_date": 1447351997, "answer_id": 33678414, "question_id": 33659092, "link": "https://stackoverflow.com/questions/33659092/what-does-string-index-out-of-range-mean-in-this-vigenere-cipher/33678414#33678414", "title": "What does &quot;string index out of range&quot; mean in this Vigenere cipher?", "body": "<p><code>KeywordTwo[KeywordTwoCount] IndexError: string index out of range</code> means that the index (<code>KeywordTwoCount</code>) is greater than the length of the string you're indexing in to <code>KeywordTwo</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 58084, "user_id": 1816580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f30e6b41f1e2bd48b058e8e72c1f0f57?s=128&d=identicon&r=PG", "display_name": "Artjom B.", "link": "https://stackoverflow.com/users/1816580/artjom-b"}, "is_accepted": false, "score": 1, "last_activity_date": 1447364924, "last_edit_date": 1447364924, "creation_date": 1447364510, "answer_id": 33681986, "question_id": 33659092, "link": "https://stackoverflow.com/questions/33659092/what-does-string-index-out-of-range-mean-in-this-vigenere-cipher/33681986#33681986", "title": "What does &quot;string index out of range&quot; mean in this Vigenere cipher?", "body": "<p><code>if KeywordTwocount &gt;= Keywordlength:</code> should be <code>if KeywordTwocount &gt;= KeywordTwolength:</code></p>\n\n<p>If there is an index problem, then you should look closer to all parts of the code that deal with this specific index incrementation/decrementation.</p>\n\n<p>In this specific case, you should see that the index of the second keyword shouldn't have anything to do with the length of the first keyword. So the updating is buggy:</p>\n\n<pre><code>if KeywordTwocount &gt;= Keywordlength:\n    KeywordTwocount = 0\n</code></pre>\n\n<hr>\n\n<p>This error would have been easily avoidable by defining a function that encrypts a message with one keyword:</p>\n\n<pre><code>def vigenere(message, keyword):\n    ...\n</code></pre>\n\n<p>And then you can chain those two together:</p>\n\n<pre><code>print(vigenere(vigenere(message, keyword1), keyword2))\n</code></pre>\n\n<hr>\n\n<p>Writing to a file is also easy with the built-in functions:</p>\n\n<pre><code>with open('ciphertext.txt', 'w') as ct:\n    ct.write(EncryptedMessage)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5551851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d4b4a225a4cc2c17014485b11635bb5?s=128&d=identicon&r=PG&f=1", "display_name": "Muntee JNR", "link": "https://stackoverflow.com/users/5551851/muntee-jnr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1447364924, "creation_date": 1447273170, "last_edit_date": 1447364744, "question_id": 33659092, "link": "https://stackoverflow.com/questions/33659092/what-does-string-index-out-of-range-mean-in-this-vigenere-cipher", "title": "What does &quot;string index out of range&quot; mean in this Vigenere cipher?", "body": "<pre><code>#Vigenere Cipher\nEncryptedMessage=\"\"\nMode=\"\"\nKeywordcount = 0 #sets everything to 0\nKeywordTwocount = 0\n\nwhile Mode != \"encrypt\" and Mode != \"decrypt\":\n    Mode = input('Do you want to encrypt or decrypt a message?')\n    Mode = Mode.lower()\n\nif Mode == \"encrypt\":\n    Message=input('Please eneter the message you wish to encrypt: ')\n    Keyword=input('Please enter the keyword you want to use:')\n    KeywordTwo = input(' Please enter second keyword you want to use:') \n    Keywordlength = len(Keyword)\n    KeywordTwolength = len(KeywordTwo)\n\n    for i in range(0, len(Message)):\n        Messageencrypt = Message[i]\n        Keywordencrypt = Keyword[Keywordcount]\n        KeywordTwoencrypt= KeywordTwo[KeywordTwocount]\n        if Messageencrypt.isalpha():\n            if Messageencrypt.isupper():\n                Messageencrypt = ord(Messageencrypt)\n                Keywordencrypt = Keywordencrypt.upper()\n                Keywordencrypt = ord(Keywordencrypt) - 64\n                KeywordTwoencrypt = KeywordTwoencrypt.upper()\n                KeywordTwoencrypt = ord(Keyword2encrypt) - 64\n                FirstCodedMessage = Messageencrypt + Keywordencrypt\n                FinalCodedMessage = FirstCodedMessage + Keyword2encrypt\n                if FinalCodedMessage &gt; 90:\n                    FinalCodedMessage = FinalCodedMessage - 26\n                Encryptedletter = chr(FinalCodedMessage)\n            elif Messageencrypt.islower():\n                Messageencrypt = ord(Messageencrypt)\n                Keywordencrypt = Keywordencrypt.upper()\n                Keywordencrypt = ord(Keywordencrypt) - 64\n                KeywordTwoencrypt = KeywordTwoencrypt.upper()\n                KeywordTwoencrypt = ord(KeywordTwoencrypt) - 64\n                FinalCodedMessage = Messageencrypt + Keywordencrypt\n                if FinalCodedMessage &gt; 122:\n                    FinalCodedMessage = FinalCodedMessage - 26\n            Encryptedletter = chr(FinalCodedMessage)\n        else:\n            Encryptedletter = Messageencrypt\n        EncryptedMessage = EncryptedMessage + Encryptedletter\n        Keywordcount = Keywordcount + 1\n        if Keywordcount &gt;= Keywordlength:\n            Keywordcount = 0\n        KeywordTwocount = KeywordTwocount + 1\n        if KeywordTwocount &gt;= Keywordlength:\n            KeywordTwocount = 0\n    print(EncryptedMessage)\n</code></pre>\n\n<p>What does</p>\n\n<pre>\nKeywordTwoencrypt= KeywordTwo[KeywordTwocount]\nIndexError: string index out of range\n</pre>\n\n<p>mean? <a href=\"http://i.stack.imgur.com/4JGXg.png\" rel=\"nofollow\">Error</a></p>\n\n<p>Also how would I save this encrypted message as a txt file? <a href=\"http://i.stack.imgur.com/DH7Xt.png\" rel=\"nofollow\">Error</a></p>\n"}, {"tags": ["python", "unit-testing", "diff", "multiline"], "comments": [{"owner": {"reputation": 2325, "user_id": 2272638, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4c4d7d86231ea02341f3a868d9d3f8c5?s=128&d=identicon&r=PG", "display_name": "dwanderson", "link": "https://stackoverflow.com/users/2272638/dwanderson"}, "edited": false, "score": 0, "creation_date": 1447273524, "post_id": 33659074, "comment_id": 55091963, "body": "First thing that comes to mind is difference between tabs and spaces, which wouldn&#39;t always show up correctly on the diff (unless you can set it to display tabs differently? not sure)."}, {"owner": {"reputation": 2325, "user_id": 2272638, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4c4d7d86231ea02341f3a868d9d3f8c5?s=128&d=identicon&r=PG", "display_name": "dwanderson", "link": "https://stackoverflow.com/users/2272638/dwanderson"}, "edited": false, "score": 0, "creation_date": 1447273724, "post_id": 33659074, "comment_id": 55092063, "body": "Second thing: there ARE different amounts of space, since your test string is indented once for the class, and again for the function. If you were to do:`    htmlcase = (&lt;insert newline&gt;&quot;&quot;&quot;&lt;table&gt; etc &quot;&quot;&quot;)` things might work. The issue is that multiline string <i>respects</i> your indentation, and you&#39;ve put a bunch of it (which is fine), but differing amounts between the real code and test code (not fine)."}], "answers": [{"tags": [], "owner": {"reputation": 1692, "user_id": 4476908, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/103c9d3979fd6388ba1c1f985646321c?s=128&d=identicon&r=PG&f=1", "display_name": "NotAnAmbiTurner", "link": "https://stackoverflow.com/users/4476908/notanambiturner"}, "is_accepted": false, "score": 0, "last_activity_date": 1447273617, "creation_date": 1447273617, "answer_id": 33659219, "question_id": 33659074, "link": "https://stackoverflow.com/questions/33659074/what-the-diff-python-unittest-failing-due-to-leading-whitespace-in-multine/33659219#33659219", "title": "What the Diff? (Python unittest failing (?) due to leading whitespace in multine strings)", "body": "<p>One potential solution is to simply match the indents on both the string that forms the testcase, and the string that is used in the function. This has the effect of allowing the test to pass.</p>\n\n<p>However, it seems sort of stupid (is in not scalable, and really doesn't go to the heart of the function). It would be much better to simply ignore leading whitespace. Perhaps another commenter can be of assistance with that. While we're at it, I would be interested to hear people's comments re: generating HTML in python and what the best way is to ensure that proper nesting of tags is maintained (for visual appeal, if nothing else) on output.</p>\n"}, {"comments": [{"owner": {"reputation": 2325, "user_id": 2272638, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4c4d7d86231ea02341f3a868d9d3f8c5?s=128&d=identicon&r=PG", "display_name": "dwanderson", "link": "https://stackoverflow.com/users/2272638/dwanderson"}, "edited": false, "score": 0, "creation_date": 1447273827, "post_id": 33659251, "comment_id": 55092126, "body": "This is the way to go: you don&#39;t want to test if you&#39;ve made a typo in your html code, so there&#39;s no reason to re-type it all again."}, {"owner": {"reputation": 5521, "user_id": 755851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1bb0ef4d5aebec860f85f7c76b894fd?s=128&d=identicon&r=PG", "display_name": "Foon", "link": "https://stackoverflow.com/users/755851/foon"}, "edited": false, "score": 0, "creation_date": 1447274016, "post_id": 33659251, "comment_id": 55092227, "body": "I would agree with that, except he&#39;s trying to make sure what he renders matches his expectation, and it&#39;s not clear how to do that without having the template AND an expected output for a given set of test inputs"}, {"owner": {"reputation": 2325, "user_id": 2272638, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4c4d7d86231ea02341f3a868d9d3f8c5?s=128&d=identicon&r=PG", "display_name": "dwanderson", "link": "https://stackoverflow.com/users/2272638/dwanderson"}, "reply_to_user": {"reputation": 5521, "user_id": 755851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1bb0ef4d5aebec860f85f7c76b894fd?s=128&d=identicon&r=PG", "display_name": "Foon", "link": "https://stackoverflow.com/users/755851/foon"}, "edited": false, "score": 0, "creation_date": 1447280955, "post_id": 33659251, "comment_id": 55095696, "body": "@Foon I would argue that that&#39;s confusing unittests with some even lower-level testing. Making sure a string is what you think it is isn&#39;t really Python&#39;s job; in this case the &quot;rendering&quot; is slapping in the month and date, which should be verified for sure. But not by making sure the entirety of an HTML table is character-for-character the same. I&#39;m not sure how best to do this either though; so I don&#39;t mean to disagree without proposing solutions, it jsut leaves a weird taste in my mouth, as far as proper testing goes."}, {"owner": {"reputation": 1692, "user_id": 4476908, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/103c9d3979fd6388ba1c1f985646321c?s=128&d=identicon&r=PG&f=1", "display_name": "NotAnAmbiTurner", "link": "https://stackoverflow.com/users/4476908/notanambiturner"}, "reply_to_user": {"reputation": 2325, "user_id": 2272638, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4c4d7d86231ea02341f3a868d9d3f8c5?s=128&d=identicon&r=PG", "display_name": "dwanderson", "link": "https://stackoverflow.com/users/2272638/dwanderson"}, "edited": false, "score": 0, "creation_date": 1447301834, "post_id": 33659251, "comment_id": 55102072, "body": "@dwanderson interesting... maybe it&#39;s just the newbie in me, but I just felt way more comfortable testing the entire block of HTML. I&#39;m definitely picking up what you&#39;re putting down though -- it would have the added benefits of the tests not breaking if I decided to change the template I&#39;m using. It&#39;s probable that as I become more advanced, I&#39;ll be less trepidatious about doing such things. I&#39;m also more than a little behind in my knowledge of importing modules a la what comes with an import, what doesn&#39;t, etc. If I define a GLOBAL in a module, then import one class, is that GLOBAL imported?"}], "tags": [], "owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "is_accepted": false, "score": 3, "last_activity_date": 1447273740, "creation_date": 1447273740, "answer_id": 33659251, "question_id": 33659074, "link": "https://stackoverflow.com/questions/33659074/what-the-diff-python-unittest-failing-due-to-leading-whitespace-in-multine/33659251#33659251", "title": "What the Diff? (Python unittest failing (?) due to leading whitespace in multine strings)", "body": "<p>Don't define the HTML code in two different places. Define it in <strong>one</strong> place and use it where needed.</p>\n\n<p>One common way to do this is to define it as a global variable in a module, and then import it from that module.  For example, you could have this in a module named, say, <code>html_examples.py</code>:</p>\n\n<pre><code>TABLE_CODE = \"\"\"\n    &lt;table&gt;\n        &lt;th colspan='7'&gt;\n         blah blah...\n\"\"\"\n</code></pre>\n\n<p>Then when you need access to that text in another module, you can just say this:</p>\n\n<pre><code>from html_examples import TABLE_CODE\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1692, "user_id": 4476908, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/103c9d3979fd6388ba1c1f985646321c?s=128&d=identicon&r=PG&f=1", "display_name": "NotAnAmbiTurner", "link": "https://stackoverflow.com/users/4476908/notanambiturner"}, "edited": false, "score": 0, "creation_date": 1447302062, "post_id": 33659287, "comment_id": 55102126, "body": "Thanks! Using beautiful soup for that is an awesome idea! I couldn&#39;t really figure how to get this working. I would be curious if there will be a python interpreter at some point that will automatically drop leading whitespace in indented multiline strings - that&#39;s the behaviour I had expected initially."}], "tags": [], "owner": {"reputation": 5521, "user_id": 755851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1bb0ef4d5aebec860f85f7c76b894fd?s=128&d=identicon&r=PG", "display_name": "Foon", "link": "https://stackoverflow.com/users/755851/foon"}, "is_accepted": true, "score": 1, "last_activity_date": 1563118198, "last_edit_date": 1563118198, "creation_date": 1447273893, "answer_id": 33659287, "question_id": 33659074, "link": "https://stackoverflow.com/questions/33659074/what-the-diff-python-unittest-failing-due-to-leading-whitespace-in-multine/33659287#33659287", "title": "What the Diff? (Python unittest failing (?) due to leading whitespace in multine strings)", "body": "<p>First off: multiline strings don't respect indentions.  This means that if your test case is inside a class and your generator is inside a function, that's going to be an issue.</p>\n\n<p>More usefully, whitespace in general are essentially ignorable in HTML... I'd suggest at a minimum doing something like:</p>\n\n<pre><code>def strip_white_space(str):\n   return str.replace(\" \", \"\").replace(\"\\t\", \"\").replace(\"\\n\", \"\")\n\nself.assertEqual(strip_white_space(htmlcase), strip_white_space(htmltest))\n</code></pre>\n\n<p>A better approach which I don't know how to do off the top of my head would be to caniconalize the two strings.  <a href=\"https://stackoverflow.com/questions/3073881/clean-up-html-in-python\">Clean Up HTML in Python</a> has some suggestions, e.g.:</p>\n\n<pre><code>from BeautifulSoup import BeautifulSoup\nhtmlcase = BeautifulSoup(htmlcase).prettify()\nhtmltest = BeautifulSoup(htmltest).prettify()\n</code></pre>\n\n<p>(Though I don't know for certain that will always remove whitespace consistently)</p>\n"}], "owner": {"reputation": 1692, "user_id": 4476908, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/103c9d3979fd6388ba1c1f985646321c?s=128&d=identicon&r=PG&f=1", "display_name": "NotAnAmbiTurner", "link": "https://stackoverflow.com/users/4476908/notanambiturner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1309, "favorite_count": 0, "accepted_answer_id": 33659287, "answer_count": 3, "score": 2, "last_activity_date": 1563118198, "creation_date": 1447273060, "last_edit_date": 1447273390, "question_id": 33659074, "link": "https://stackoverflow.com/questions/33659074/what-the-diff-python-unittest-failing-due-to-leading-whitespace-in-multine", "title": "What the Diff? (Python unittest failing (?) due to leading whitespace in multine strings)", "body": "<p>I am attempting to build the header row of a month in HTML. I have a test case, and when I visually inspect either the comparison or the portion generated by my code, I get an assertion error (eg. my case did not pass). The weird thing is that when I visually inspect, the outputs SEEM to be identical.</p>\n\n<p>I have done some fiddling, and narrowed the scope of the problem. Please see code below.</p>\n\n<p>Here is my testcase:</p>\n\n<pre><code>class xyz(unittest.TestCase):\n\n    def test__render_table_header(self):\n        self.maxDiff = None\n        testy = self.testcal1\n        htmltest = testy._render_table_header(date(2014, 8, 1))\n        htmlcase = \"\"\"&lt;table&gt;\n            &lt;th colspan='7'&gt;\n                &lt;div class=\"headercontainer\"&gt;\n                    &lt;div class=\"montheader\"&gt;{}&lt;/div&gt;\n                    &lt;div class=\"yearheader\"&gt;{}&lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/th&gt;\n            &lt;tr&gt;\n                &lt;td class='dayheader'&gt;Sun&lt;/td&gt;\n                &lt;td class='dayheader'&gt;Mon&lt;/td&gt;\n                &lt;td class='dayheader'&gt;Tues&lt;/td&gt;\n                &lt;td class='dayheader'&gt;Wed&lt;/td&gt;\n                &lt;td class='dayheader'&gt;Thurs&lt;/td&gt;\n                &lt;td class='dayheader'&gt;Fri&lt;/td&gt;\n                &lt;td class='dayheader'&gt;Sat&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\"\"\".format('August', '2014')\n        self.assertEqual(htmlcase, htmltest)\n</code></pre>\n\n<p>Here is my function:</p>\n\n<pre><code>def _render_table_header(self, dateobj):\n\n    TOP_OF_TABLE = \"\"\"&lt;table&gt;\n        &lt;th colspan='7'&gt;\n            &lt;div class=\"headercontainer\"&gt;\n                &lt;div class=\"montheader\"&gt;{}&lt;/div&gt;\n                &lt;div class=\"yearheader\"&gt;{}&lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/th&gt;\n        &lt;tr&gt;\n            &lt;td class='dayheader'&gt;Sun&lt;/td&gt;\n            &lt;td class='dayheader'&gt;Mon&lt;/td&gt;\n            &lt;td class='dayheader'&gt;Tues&lt;/td&gt;\n            &lt;td class='dayheader'&gt;Wed&lt;/td&gt;\n            &lt;td class='dayheader'&gt;Thurs&lt;/td&gt;\n            &lt;td class='dayheader'&gt;Fri&lt;/td&gt;\n            &lt;td class='dayheader'&gt;Sat&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\"\"\"\n    month = dateobj.strftime('%B')\n    year = dateobj.strftime('%Y')\n    return TOP_OF_TABLE.format(month, year)\n</code></pre>\n\n<p>Here is the error and diff I get:</p>\n\n<pre><code>FAIL: test__render_table_header \n\n(__main__.test_enhanced_cal_helper_functions)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"court_app_timeline.py\", line 430, in test__render_table_header\n    self.assertEqual(htmlcase, htmltest)\nAssertionError: '&lt;table&gt;\\n            &lt;th colspan=\\'7\\'&gt;\\n                &lt;div [585 chars]&lt;tr&gt;' != '&lt;table&gt;\\n                &lt;th colspan=\\'7\\'&gt;\\n                 [649 chars]&lt;tr&gt;'\n  &lt;table&gt;\n-             &lt;th colspan='7'&gt;\n+                 &lt;th colspan='7'&gt;\n? ++++\n-                 &lt;div class=\"headercontainer\"&gt;\n+                     &lt;div class=\"headercontainer\"&gt;\n? ++++\n-                     &lt;div class=\"montheader\"&gt;August&lt;/div&gt;\n+                         &lt;div class=\"montheader\"&gt;August&lt;/div&gt;\n? ++++\n-                     &lt;div class=\"yearheader\"&gt;2014&lt;/div&gt;\n+                         &lt;div class=\"yearheader\"&gt;2014&lt;/div&gt;\n? ++++\n-                 &lt;/div&gt;\n+                     &lt;/div&gt;\n? ++++\n-             &lt;/th&gt;\n+                 &lt;/th&gt;\n? ++++\n-             &lt;tr&gt;\n+                 &lt;tr&gt;\n? ++++\n-                 &lt;td class='dayheader'&gt;Sun&lt;/td&gt;\n+                     &lt;td class='dayheader'&gt;Sun&lt;/td&gt;\n? ++++\n-                 &lt;td class='dayheader'&gt;Mon&lt;/td&gt;\n+                     &lt;td class='dayheader'&gt;Mon&lt;/td&gt;\n? ++++\n-                 &lt;td class='dayheader'&gt;Tues&lt;/td&gt;\n+                     &lt;td class='dayheader'&gt;Tues&lt;/td&gt;\n? ++++\n-                 &lt;td class='dayheader'&gt;Wed&lt;/td&gt;\n+                     &lt;td class='dayheader'&gt;Wed&lt;/td&gt;\n? ++++\n-                 &lt;td class='dayheader'&gt;Thurs&lt;/td&gt;\n+                     &lt;td class='dayheader'&gt;Thurs&lt;/td&gt;\n? ++++\n-                 &lt;td class='dayheader'&gt;Fri&lt;/td&gt;\n+                     &lt;td class='dayheader'&gt;Fri&lt;/td&gt;\n? ++++\n-                 &lt;td class='dayheader'&gt;Sat&lt;/td&gt;\n+                     &lt;td class='dayheader'&gt;Sat&lt;/td&gt;\n? ++++\n-             &lt;/tr&gt;\n+                 &lt;/tr&gt;\n? ++++\n-             &lt;tr&gt;+                 &lt;tr&gt;? ++++\n\n\n----------------------------------------------------------------------\n</code></pre>\n\n<p>I will admit to you fine folks that I'm not the most talented programmer. In fact, my entire programming career hearkens back to only about 5 months ago. Along with that comes a certain ineptitude at reading diffs. It seems to me that the major difference between the outputs has to do with leading whitespace. How can I fix this?</p>\n\n<p>PS - any tips, comments, pointers, etc. are much appreciated.</p>\n"}, {"tags": ["python", "python-2.7", "dictionary", "itertools"], "comments": [{"owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "edited": false, "score": 1, "creation_date": 1447273410, "post_id": 33659052, "comment_id": 55091901, "body": "Lists of dicts are not an efficient way to store this data.  Best would be a NumPy/Pandas matrix, assuming your data are fairly large.  Second best might be a list of tuples."}, {"owner": {"reputation": 7355, "user_id": 505649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IPxfn.jpg?s=128&g=1", "display_name": "Ulrich Schwarz", "link": "https://stackoverflow.com/users/505649/ulrich-schwarz"}, "edited": false, "score": 0, "creation_date": 1447273468, "post_id": 33659052, "comment_id": 55091939, "body": "Are your labels unique? My first approach would be to map your lists into a  dict each, and reverse that in the end."}, {"owner": {"reputation": 148, "user_id": 2388475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4060f7dddd39c26e43a8bed041fef144?s=128&d=identicon&r=PG", "display_name": "JSchwerberg", "link": "https://stackoverflow.com/users/2388475/jschwerberg"}, "reply_to_user": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "edited": false, "score": 1, "creation_date": 1447273595, "post_id": 33659052, "comment_id": 55091991, "body": "@JohnZwinck These lists are being generated by pymssql.conn.cursor(as_dict=True), so I&#39;m just trying to work with the data the way it is returned.  A NumPy/Pandas matrix also would likely not work, as this is being consumed by a Jinja2 template which likely would not parse the matrix object."}, {"owner": {"reputation": 2325, "user_id": 2272638, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4c4d7d86231ea02341f3a868d9d3f8c5?s=128&d=identicon&r=PG", "display_name": "dwanderson", "link": "https://stackoverflow.com/users/2272638/dwanderson"}, "reply_to_user": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "edited": false, "score": 1, "creation_date": 1447276584, "post_id": 33659052, "comment_id": 55093546, "body": "@JohnZwinck while I&#39;m generally all for helpful side comments, to tell the OP his set up is wrong, without further understanding of his situation, is pretty presumptuous."}], "owner": {"reputation": 148, "user_id": 2388475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4060f7dddd39c26e43a8bed041fef144?s=128&d=identicon&r=PG", "display_name": "JSchwerberg", "link": "https://stackoverflow.com/users/2388475/jschwerberg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1447272934, "creation_date": 1447272934, "question_id": 33659052, "link": "https://stackoverflow.com/questions/33659052/making-sure-that-three-lists-of-dicts-all-have-dicts-with-same-values-for-a-spec", "title": "Making sure that three lists of dicts all have dicts with same values for a specific key", "body": "<p>I am looking for a way to iterate over multiple lists of dictionaries, making sure that if a dictionary exists with a given value for key 'label', it will be filled into the other lists with a default value (0), as represented below:</p>\n\n<pre><code>p1 = [{'label': 201501, 'y': 22}, {'label': 201502, 'y': 11}, {'label': 201503, 'y': 10}]\np2 = [{'label': 201502, 'y': 10}]\np3 = [{'label': 201504, 'y': 1}]\n\nDesired result:\n\np1 = [{'label': 201501, 'y': 22}, {'label': 201502, 'y': 11}, {'label': 201503, 'y': 10}, {'label': 201504, 'y': 0}]\np2 = [{'label': 201501, 'y': 0}, {'label': 201502, 'y': 10}, {'label': 201503, 'y': 0}, {'label': 201504, 'y': 0}]\np3 = [{'label': 201501, 'y': 0}, {'label': 201502, 'y': 0}, {'label': 201503, 'y': 0}, {'label': 201504, 'y': 1}]\n</code></pre>\n\n<p>If p1, p2, and p3 were just dictionaries, I would use itertools.chain, but I am lost on how to do this with multiple lists of dicts.</p>\n"}, {"tags": ["python", "gpu", "nvidia", "tensorflow"], "comments": [{"owner": {"reputation": 285, "user_id": 1850692, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/c86368bc5c7c7ef6cbc1ccc6db0d6fd6?s=128&d=identicon&r=PG", "display_name": "Chimi", "link": "https://stackoverflow.com/users/1850692/chimi"}, "edited": false, "score": 0, "creation_date": 1458973530, "post_id": 33659047, "comment_id": 60095521, "body": "You edited to say you found the ./configure file. I have the same problem and cannot find it on my machine. Where were you able to find it?"}, {"owner": {"reputation": 2309, "user_id": 4802797, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-qOpr0OlDCkA/AAAAAAAAAAI/AAAAAAAAALE/8bNsDCgdbuk/photo.jpg?sz=128", "display_name": "fluency03", "link": "https://stackoverflow.com/users/4802797/fluency03"}, "reply_to_user": {"reputation": 285, "user_id": 1850692, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/c86368bc5c7c7ef6cbc1ccc6db0d6fd6?s=128&d=identicon&r=PG", "display_name": "Chimi", "link": "https://stackoverflow.com/users/1850692/chimi"}, "edited": false, "score": 0, "creation_date": 1458983558, "post_id": 33659047, "comment_id": 60097690, "body": "@Chimi just under the folder, which contains your tensorflow source code."}, {"owner": {"reputation": 2309, "user_id": 4802797, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-qOpr0OlDCkA/AAAAAAAAAAI/AAAAAAAAALE/8bNsDCgdbuk/photo.jpg?sz=128", "display_name": "fluency03", "link": "https://stackoverflow.com/users/4802797/fluency03"}, "reply_to_user": {"reputation": 285, "user_id": 1850692, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/c86368bc5c7c7ef6cbc1ccc6db0d6fd6?s=128&d=identicon&r=PG", "display_name": "Chimi", "link": "https://stackoverflow.com/users/1850692/chimi"}, "edited": false, "score": 0, "creation_date": 1458983658, "post_id": 33659047, "comment_id": 60097719, "body": "@Chimi for example, after <code>git clone https:&#47;&#47;github.com&#47;tensorflow&#47;tensorflow.git</code>, then <code>cd tensorflow</code>, then you will find it there."}], "answers": [{"comments": [{"owner": {"reputation": 180675, "user_id": 1090562, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d675b3e6225683ba6432496ec23ed806?s=128&d=identicon&r=PG", "display_name": "Salvador Dali", "link": "https://stackoverflow.com/users/1090562/salvador-dali"}, "edited": false, "score": 0, "creation_date": 1447273601, "post_id": 33659119, "comment_id": 55091996, "body": "@fluency_03 then why are you looking how to install it from sources (you do not need to do that)? If you piped it, then you already either installed a GPU one or not."}, {"owner": {"reputation": 2309, "user_id": 4802797, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-qOpr0OlDCkA/AAAAAAAAAAI/AAAAAAAAALE/8bNsDCgdbuk/photo.jpg?sz=128", "display_name": "fluency03", "link": "https://stackoverflow.com/users/4802797/fluency03"}, "edited": false, "score": 0, "creation_date": 1447274276, "post_id": 33659119, "comment_id": 55092362, "body": "I have found the ./configure according toyour answer. But when doing the example code, I got the errors as stated in my edited question below."}, {"owner": {"reputation": 180675, "user_id": 1090562, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d675b3e6225683ba6432496ec23ed806?s=128&d=identicon&r=PG", "display_name": "Salvador Dali", "link": "https://stackoverflow.com/users/1090562/salvador-dali"}, "reply_to_user": {"reputation": 2309, "user_id": 4802797, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-qOpr0OlDCkA/AAAAAAAAAAI/AAAAAAAAALE/8bNsDCgdbuk/photo.jpg?sz=128", "display_name": "fluency03", "link": "https://stackoverflow.com/users/4802797/fluency03"}, "edited": false, "score": 0, "creation_date": 1447274589, "post_id": 33659119, "comment_id": 55092522, "body": "@ChangLiu are you sure you have GPU devices and all the dependency for them is installed. I recommend you to grab a cpu version, play with it and if you find you can do nice things with it, start worrying about GPU."}, {"owner": {"reputation": 20711, "user_id": 5545260, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-bKB2xg1RkdE/AAAAAAAAAAI/AAAAAAAAgnM/sdLgfXnDtwM/photo.jpg?sz=128", "display_name": "dga", "link": "https://stackoverflow.com/users/5545260/dga"}, "edited": false, "score": 1, "creation_date": 1447299194, "post_id": 33659119, "comment_id": 55101397, "body": "Strongly, strongly agree with @SalvadorDali&#39;s suggestion of starting CPU-only.  GPUs are only about speed, not about anything fundamentally different in what you can achieve with patience.  Once you&#39;re waiting an hour for your model to train and finding it annoying, <i>then</i> get the GPU online. :)"}], "tags": [], "owner": {"reputation": 180675, "user_id": 1090562, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d675b3e6225683ba6432496ec23ed806?s=128&d=identicon&r=PG", "display_name": "Salvador Dali", "link": "https://stackoverflow.com/users/1090562/salvador-dali"}, "is_accepted": false, "score": 7, "last_activity_date": 1447273283, "creation_date": 1447273283, "answer_id": 33659119, "question_id": 33659047, "link": "https://stackoverflow.com/questions/33659047/where-is-the-configure-of-tensorflow-and-how-to-enable-the-gpu-support/33659119#33659119", "title": "where is the ./configure of TensorFlow and how to enable the GPU support?", "body": "<p>This is a bash script which suppose to be in </p>\n\n<blockquote>\n  <p>the root of your source tree</p>\n</blockquote>\n\n<p>when you <a href=\"https://github.com/tensorflow/tensorflow\">cloned the repo</a>. Here it is <a href=\"https://github.com/tensorflow/tensorflow/blob/master/configure\">https://github.com/tensorflow/tensorflow/blob/master/configure</a></p>\n"}, {"comments": [{"owner": {"reputation": 909, "user_id": 1363774, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/fbdf37ccc1f323b8ee9f75fc75934358?s=128&d=identicon&r=PG", "display_name": "auro", "link": "https://stackoverflow.com/users/1363774/auro"}, "edited": false, "score": 0, "creation_date": 1454009769, "post_id": 33662595, "comment_id": 57863871, "body": "I have a similar issue. When I run nvidia-smi, I get the response,  &#39;Failed to initialize NVML: GPU access blocked by the operating system&#39;"}, {"owner": {"reputation": 2309, "user_id": 4802797, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-qOpr0OlDCkA/AAAAAAAAAAI/AAAAAAAAALE/8bNsDCgdbuk/photo.jpg?sz=128", "display_name": "fluency03", "link": "https://stackoverflow.com/users/4802797/fluency03"}, "edited": false, "score": 0, "creation_date": 1458301319, "post_id": 33662595, "comment_id": 59811030, "body": "I have GPU: <code>NVIDIA Corporation GK208GLM [Quadro K610M]</code>. I have CUDA 2.0 + cuDNN installed. I do not have <code>nvidia-smi</code>. I have driver installed bu the GPU just not working."}, {"owner": {"reputation": 20711, "user_id": 5545260, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-bKB2xg1RkdE/AAAAAAAAAAI/AAAAAAAAgnM/sdLgfXnDtwM/photo.jpg?sz=128", "display_name": "dga", "link": "https://stackoverflow.com/users/5545260/dga"}, "edited": false, "score": 0, "creation_date": 1458337633, "post_id": 33662595, "comment_id": 59833927, "body": "Are you on linux?  If you don&#39;t have nvidia-smi, something&#39;s wrong with your driver install.  That card sounds a little weak for what we typically test on and definitely has less memory than we recommend.  You could <i>try</i> tweaking  TF_MIN_GPU_MULTIPROCESSOR_COUNT  (environment variable) to convince tensorflow to use it, but I&#39;m not holding my breath for success. :)  Would be interested in hearing your results."}], "tags": [], "owner": {"reputation": 20711, "user_id": 5545260, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-bKB2xg1RkdE/AAAAAAAAAAI/AAAAAAAAgnM/sdLgfXnDtwM/photo.jpg?sz=128", "display_name": "dga", "link": "https://stackoverflow.com/users/5545260/dga"}, "is_accepted": false, "score": 2, "last_activity_date": 1447289113, "creation_date": 1447289113, "answer_id": 33662595, "question_id": 33659047, "link": "https://stackoverflow.com/questions/33659047/where-is-the-configure-of-tensorflow-and-how-to-enable-the-gpu-support/33662595#33662595", "title": "where is the ./configure of TensorFlow and how to enable the GPU support?", "body": "<p>For your second question:  Do you have a compatible GPU (NVIDIA compute capability 3.5 or higher) installed, and do you have CUDA 7.0 + cuDNN installed as per the instructions?  That's the most likely reason you're seeing a failure.  It could be a cuda install problem if the answer is yes.  Do you see your GPU listed when you run nvidia-smi?  If not, you need to get that fixed first.  This may require getting a newer driver and/or re-running nvidia-xconfig, etc.</p>\n"}, {"tags": [], "owner": {"reputation": 79, "user_id": 5564902, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ve5Jg.jpg?s=128&g=1", "display_name": "Emergix", "link": "https://stackoverflow.com/users/5564902/emergix"}, "is_accepted": false, "score": 0, "last_activity_date": 1447620474, "creation_date": 1447620474, "answer_id": 33724855, "question_id": 33659047, "link": "https://stackoverflow.com/questions/33659047/where-is-the-configure-of-tensorflow-and-how-to-enable-the-gpu-support/33724855#33724855", "title": "where is the ./configure of TensorFlow and how to enable the GPU support?", "body": "<p>you can rebuild a GPU version from the source only if you have the 7.0 cuda libraries and the 6.5 cudnn libraries.\nthis need to be updated by google, I think</p>\n"}, {"tags": [], "owner": {"reputation": 2309, "user_id": 4802797, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-qOpr0OlDCkA/AAAAAAAAAAI/AAAAAAAAALE/8bNsDCgdbuk/photo.jpg?sz=128", "display_name": "fluency03", "link": "https://stackoverflow.com/users/4802797/fluency03"}, "is_accepted": true, "score": 3, "last_activity_date": 1458326749, "last_edit_date": 1495540391, "creation_date": 1458319144, "answer_id": 36089757, "question_id": 33659047, "link": "https://stackoverflow.com/questions/33659047/where-is-the-configure-of-tensorflow-and-how-to-enable-the-gpu-support/36089757#36089757", "title": "where is the ./configure of TensorFlow and how to enable the GPU support?", "body": "<ul>\n<li><p>Answer to first question: <code>./configure</code> has already been found according to the answer <a href=\"https://stackoverflow.com/a/33659119/4802797\">here</a>. It is under the source folder of <code>tensorflow</code> as shown <a href=\"https://github.com/tensorflow/tensorflow/blob/master/configure\" rel=\"nofollow noreferrer\">here</a>. </p></li>\n<li><p>Answer to second question: </p></li>\n</ul>\n\n<p>Actually, I have the GPU <code>NVIDIA Corporation GK208GLM [Quadro K610M]</code>. I also have <code>CUDA</code> + <code>cuDNN</code> installed. (Therefore, the following answer is based on you have already installed <code>CUDA 7.0+</code> + <code>cuDNN</code> correctly with the correct versions.) However the problem is: I have driver installed but the GPU is just not working. I made it working in the following steps:</p>\n\n<p>At first, I did this <code>lspci</code> and got: </p>\n\n<pre><code>01:00.0 VGA compatible controller: NVIDIA Corporation GK208GLM [Quadro K610M] (rev ff)\n</code></pre>\n\n<p>The status here is <strong>rev ff</strong>. Then, I did <code>sudo update-pciids</code>, and check <code>lspci</code> again, and got:</p>\n\n<pre><code>01:00.0 VGA compatible controller: NVIDIA Corporation GK208GLM [Quadro K610M] (rev a1)\n</code></pre>\n\n<p>Now, the status of Nvidia GPU is correct as <strong>rev a1</strong>. But now, the <code>tensorflow</code> is not supporting GPU yet. The next steps are (the Nvidia driver I installed is version <code>nvidia-352</code>): </p>\n\n<pre><code>sudo modprobe nvidia_352\nsudo modprobe nvidia_352_uvm\n</code></pre>\n\n<p>in order to add the driver into correct mode. Check again: </p>\n\n<pre><code>cliu@cliu-ubuntu:~$ lspci -vnn | grep -i VGA -A 12\n01:00.0 VGA compatible controller [0300]: NVIDIA Corporation GK208GLM [Quadro K610M] [10de:12b9] (rev a1) (prog-if 00 [VGA controller])\n    Subsystem: Hewlett-Packard Company Device [103c:1909]\n    Flags: bus master, fast devsel, latency 0, IRQ 16\n    Memory at cb000000 (32-bit, non-prefetchable) [size=16M]\n    Memory at 50000000 (64-bit, prefetchable) [size=256M]\n    Memory at 60000000 (64-bit, prefetchable) [size=32M]\n    I/O ports at 5000 [size=128]\n    Expansion ROM at cc000000 [disabled] [size=512K]\n    Capabilities: &lt;access denied&gt;\n    Kernel driver in use: nvidia\ncliu@cliu-ubuntu:~$ lsmod | grep nvidia\nnvidia_uvm             77824  0 \nnvidia               8646656  1 nvidia_uvm\ndrm                   348160  7 i915,drm_kms_helper,nvidia\n</code></pre>\n\n<p>We can find that the <code>Kernel driver in use: nvidia</code> is shown and <code>nvidia</code> is in correct mode. </p>\n\n<p>Now, use the example <a href=\"https://www.tensorflow.org/versions/r0.7/how_tos/using_gpu/index.html#logging-device-placement\" rel=\"nofollow noreferrer\">here</a> for testing the GPU: </p>\n\n<pre><code>cliu@cliu-ubuntu:~$ python\nPython 2.7.9 (default, Apr  2 2015, 15:33:21) \n[GCC 4.9.2] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; import tensorflow as tf\n&gt;&gt;&gt; a = tf.constant([1.0, 2.0, 3.0, 4.0, 5.0, 6.0], shape=[2, 3], name='a')\n&gt;&gt;&gt; b = tf.constant([1.0, 2.0, 3.0, 4.0, 5.0, 6.0], shape=[3, 2], name='b')\n&gt;&gt;&gt; c = tf.matmul(a, b)\n&gt;&gt;&gt; sess = tf.Session(config=tf.ConfigProto(log_device_placement=True))\nI tensorflow/core/common_runtime/local_device.cc:25] Local device intra op parallelism threads: 8\nI tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:888] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:88] Found device 0 with properties: \nname: Quadro K610M\nmajor: 3 minor: 5 memoryClockRate (GHz) 0.954\npciBusID 0000:01:00.0\nTotal memory: 1023.81MiB\nFree memory: 1007.66MiB\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:112] DMA: 0 \nI tensorflow/core/common_runtime/gpu/gpu_init.cc:122] 0:   Y \nI tensorflow/core/common_runtime/gpu/gpu_device.cc:643] Creating TensorFlow device (/gpu:0) -&gt; (device: 0, name: Quadro K610M, pci bus id: 0000:01:00.0)\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:47] Setting region size to 846897152\nI tensorflow/core/common_runtime/local_session.cc:45] Local session inter op parallelism threads: 8\nDevice mapping:\n/job:localhost/replica:0/task:0/gpu:0 -&gt; device: 0, name: Quadro K610M, pci bus id: 0000:01:00.0\nI tensorflow/core/common_runtime/local_session.cc:107] Device mapping:\n/job:localhost/replica:0/task:0/gpu:0 -&gt; device: 0, name: Quadro K610M, pci bus id: 0000:01:00.0\n\n&gt;&gt;&gt; print sess.run(c)\nb: /job:localhost/replica:0/task:0/gpu:0\nI tensorflow/core/common_runtime/simple_placer.cc:289] b: /job:localhost/replica:0/task:0/gpu:0\na: /job:localhost/replica:0/task:0/gpu:0\nI tensorflow/core/common_runtime/simple_placer.cc:289] a: /job:localhost/replica:0/task:0/gpu:0\nMatMul: /job:localhost/replica:0/task:0/gpu:0\nI tensorflow/core/common_runtime/simple_placer.cc:289] MatMul: /job:localhost/replica:0/task:0/gpu:0\n[[ 22.  28.]\n [ 49.  64.]]\n</code></pre>\n\n<p>As you can see, the GPU is utilized. </p>\n"}], "owner": {"reputation": 2309, "user_id": 4802797, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-qOpr0OlDCkA/AAAAAAAAAAI/AAAAAAAAALE/8bNsDCgdbuk/photo.jpg?sz=128", "display_name": "fluency03", "link": "https://stackoverflow.com/users/4802797/fluency03"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 19308, "favorite_count": 3, "protected_date": 1458113805, "accepted_answer_id": 36089757, "answer_count": 4, "score": 13, "last_activity_date": 1458326749, "creation_date": 1447272914, "last_edit_date": 1495540391, "question_id": 33659047, "link": "https://stackoverflow.com/questions/33659047/where-is-the-configure-of-tensorflow-and-how-to-enable-the-gpu-support", "title": "where is the ./configure of TensorFlow and how to enable the GPU support?", "body": "<p>When installing TensorFlow on my Ubuntu, I would like to use GPU with CUDA. </p>\n\n<p>But I am stopped at this step in the <a href=\"http://www.tensorflow.org/get_started/os_setup.md\" rel=\"nofollow noreferrer\">Official Tutorial</a> :</p>\n\n<p><a href=\"https://i.stack.imgur.com/dmwOC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dmwOC.png\" alt=\"enter image description here\"></a></p>\n\n<p>Where exactly is this <code>./configure</code> ? Or where is my root of source tree.</p>\n\n<p>My TensorFlow is located here <code>/usr/local/lib/python2.7/dist-packages/tensorflow</code>.   But I still did not find <code>./configure</code>.  </p>\n\n<p><strong>EDIT</strong></p>\n\n<p>I have found the <code>./configure</code> according to <a href=\"https://stackoverflow.com/a/33659119/4802797\">Salvador Dali's answer</a>. But when doing the example code, I got the following error:</p>\n\n<pre><code>&gt;&gt;&gt; import tensorflow as tf\n&gt;&gt;&gt; hello = tf.constant('Hello, TensorFlow!')\n&gt;&gt;&gt; sess = tf.Session()\nI tensorflow/core/common_runtime/local_device.cc:25] Local device intra op parallelism threads: 8\nE tensorflow/stream_executor/cuda/cuda_driver.cc:466] failed call to cuInit: CUDA_ERROR_NO_DEVICE\nI tensorflow/stream_executor/cuda/cuda_diagnostics.cc:86] kernel driver does not appear to be running on this host (cliu-ubuntu): /proc/driver/nvidia/version does not exist\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:112] DMA: \nI tensorflow/core/common_runtime/local_session.cc:45] Local session inter op parallelism threads: 8\n</code></pre>\n\n<p>The cuda device cannot be found. </p>\n\n<p><strong>Answer</strong></p>\n\n<p>See the answer about how did I enable GPU support <a href=\"https://stackoverflow.com/a/36089757/4802797\">here</a>.</p>\n"}, {"tags": ["python", "indexing", "while-loop", "palindrome"], "comments": [{"owner": {"reputation": 1224, "user_id": 4889443, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AG841.png?s=128&g=1", "display_name": "NendoTaka", "link": "https://stackoverflow.com/users/4889443/nendotaka"}, "edited": false, "score": 0, "creation_date": 1447272990, "post_id": 33659034, "comment_id": 55091687, "body": "you need an if statement in your while loop to end the loop otherwise you will loop till you get an error"}], "answers": [{"comments": [{"owner": {"reputation": 129, "user_id": 3975231, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/119af9843dd6377e89bed681326ae498?s=128&d=identicon&r=PG&f=1", "display_name": "DecafOyster208", "link": "https://stackoverflow.com/users/3975231/decafoyster208"}, "edited": false, "score": 0, "creation_date": 1447274564, "post_id": 33659294, "comment_id": 55092508, "body": "i have a problem though when inputing s as an empty string, it says string index out of range"}, {"owner": {"reputation": 601, "user_id": 5513449, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a05a860a36fdd2afb665db132b4606ed?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/5513449/daniel"}, "reply_to_user": {"reputation": 129, "user_id": 3975231, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/119af9843dd6377e89bed681326ae498?s=128&d=identicon&r=PG&f=1", "display_name": "DecafOyster208", "link": "https://stackoverflow.com/users/3975231/decafoyster208"}, "edited": false, "score": 0, "creation_date": 1447274836, "post_id": 33659294, "comment_id": 55092633, "body": "You can add a line in the beginning like this: if len(s) == 0 return False/True depending on what you&#39;d like it to return"}], "tags": [], "owner": {"reputation": 601, "user_id": 5513449, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a05a860a36fdd2afb665db132b4606ed?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/5513449/daniel"}, "is_accepted": true, "score": 1, "last_activity_date": 1447273919, "creation_date": 1447273919, "answer_id": 33659294, "question_id": 33659034, "link": "https://stackoverflow.com/questions/33659034/how-to-check-for-palindrome-using-while-loop-python/33659294#33659294", "title": "How to check for palindrome using while loop python", "body": "<pre><code>def palindrome(s):\n    i = 0\n    while i &lt;= len(s) / 2:\n        if s[i] != s[-i - 1]:\n            return False\n        i += 1\n    return True\n</code></pre>\n\n<p>this should do it. </p>\n"}, {"comments": [{"owner": {"reputation": 4609, "user_id": 4636715, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ebd8c54bb287f99b94373429b588e21?s=128&d=identicon&r=PG&f=1", "display_name": "vahdet", "link": "https://stackoverflow.com/users/4636715/vahdet"}, "edited": false, "score": 0, "creation_date": 1550561884, "post_id": 54760897, "comment_id": 96302611, "body": "Good, full code! But, would be perfect if you could add some explanation on what did the trick."}, {"owner": {"reputation": 1168, "user_id": 10427807, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/neftl.jpg?s=128&g=1", "display_name": "Rashed Rahat", "link": "https://stackoverflow.com/users/10427807/rashed-rahat"}, "reply_to_user": {"reputation": 4609, "user_id": 4636715, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ebd8c54bb287f99b94373429b588e21?s=128&d=identicon&r=PG&f=1", "display_name": "vahdet", "link": "https://stackoverflow.com/users/4636715/vahdet"}, "edited": false, "score": 0, "creation_date": 1550566088, "post_id": 54760897, "comment_id": 96304523, "body": "Hmm, ok i&#39;m giving explanation. Wait few min. I&#39;ll get back to you."}], "tags": [], "owner": {"reputation": 1168, "user_id": 10427807, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/neftl.jpg?s=128&g=1", "display_name": "Rashed Rahat", "link": "https://stackoverflow.com/users/10427807/rashed-rahat"}, "is_accepted": false, "score": 0, "last_activity_date": 1550567591, "last_edit_date": 1550567591, "creation_date": 1550561622, "answer_id": 54760897, "question_id": 33659034, "link": "https://stackoverflow.com/questions/33659034/how-to-check-for-palindrome-using-while-loop-python/54760897#54760897", "title": "How to check for palindrome using while loop python", "body": "<pre><code>str = input(\"Enter a string: \") #taking a string from user &amp; storing into variable.\nli = list(str) #converting the string into list &amp; storing into variable.\nln = len(li) #storing the length of the list into a variable.\nrevStr = \"\" #defining an empty variable (which will be updated &amp; will be final result to check palindrome).\ni = ln - 1 #value of i will be used in loop.\n\nwhile i &gt;= 0: #here logic is to start from right to left from the list named \"li\". That means going from last to first index of the list till the index value is \"0\" of the \"li\" list.\n    revStr = revStr + li[i] #concatenating &amp; updating the \"revStr\" defined variable.\n    i = i - 1 #decreasing the value of i to reach from the last index to first index.\nstr = str.lower() #converting value into lowercase string.\nrevStr = revStr.lower() #converting the final output into lowercase string to avoid case sensitive issue.\n\nif str == revStr: #the two string is same or not?\n    print(str, \", is PALINDROME!\") #if same.\nelse:\n    print(str, \", isn't PALINDROME!\") #if not same.\n</code></pre>\n"}], "owner": {"reputation": 129, "user_id": 3975231, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/119af9843dd6377e89bed681326ae498?s=128&d=identicon&r=PG&f=1", "display_name": "DecafOyster208", "link": "https://stackoverflow.com/users/3975231/decafoyster208"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4815, "favorite_count": 0, "accepted_answer_id": 33659294, "answer_count": 2, "score": 0, "last_activity_date": 1550567591, "creation_date": 1447272863, "question_id": 33659034, "link": "https://stackoverflow.com/questions/33659034/how-to-check-for-palindrome-using-while-loop-python", "title": "How to check for palindrome using while loop python", "body": "<p>I'm trying to check for a palindrome using a while loop and indexing, return True or False. I know this can be done much simpler using a for loop or even just one line: \n    return num[::-1] == num<br>\n(num being the parameter inside the function)\n<a href=\"http://i.stack.imgur.com/Iu3wb.png\" rel=\"nofollow\">click for image of code here</a></p>\n\n<p>I'd love to complete this with a while loop if anyone could shed some light on what im doing wrong here would be great:)</p>\n\n<p>By the way a palindrome is a word or phrase which can be read the same the reversed way around, example: level, racecar, rotavator etc</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 3, "creation_date": 1447272681, "post_id": 33658975, "comment_id": 55091540, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/5595425/what-is-the-best-way-to-compare-floats-for-almost-equality-in-python\">What is the best way to compare floats for almost-equality in Python?</a>"}, {"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 1, "creation_date": 1447272865, "post_id": 33658975, "comment_id": 55091627, "body": "What did you expect?"}, {"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "edited": false, "score": 1, "creation_date": 1447275277, "post_id": 33658975, "comment_id": 55092869, "body": "Ref: <a href=\"https://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html\" rel=\"nofollow noreferrer\">docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1390, "user_id": 5551669, "user_type": "registered", "profile_image": "https://graph.facebook.com/100006442653263/picture?type=large", "display_name": "Galax", "link": "https://stackoverflow.com/users/5551669/galax"}, "is_accepted": false, "score": 0, "last_activity_date": 1447273426, "creation_date": 1447273426, "answer_id": 33659161, "question_id": 33658975, "link": "https://stackoverflow.com/questions/33658975/python-equality-comparison/33659161#33659161", "title": "Python Equality Comparison", "body": "<p>This is due to the way that most computers handle floating point numbers. 0.1 is an irrational binary number, like 1/3 is in decimal. A simpler demonstration is <code>print(0.1+0.1+0.1)</code> which prints <code>0.30000000000000004</code>. That number would be seen as different to to 0.3 if I compare with <code>==</code>. You should compare for almost-equality in this case, as noted in the comment above.</p>\n"}], "owner": {"reputation": 11, "user_id": 5552049, "user_type": "registered", "profile_image": "https://graph.facebook.com/865800080202182/picture?type=large", "display_name": "James Kuo", "link": "https://stackoverflow.com/users/5552049/james-kuo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1447273426, "creation_date": 1447272571, "last_edit_date": 1447272813, "question_id": 33658975, "link": "https://stackoverflow.com/questions/33658975/python-equality-comparison", "title": "Python Equality Comparison", "body": "<p>I came across a equality comparison problem in python 2.7. I ran the following program,expecting that <code>elist[i][1] == MC</code> will return <code>True</code>.</p>\n\n<pre><code>elist=elist=[[1,1],[2,4],[3,9]]\nMC=0\nwhile (MC&lt;1.01):\n    MC+=0.01\n    for i in range(len(elist)):\n        #test equality\n        print elist[i][1]\n        print MC\n        print elist[i][1]==int(MC)\n</code></pre>\n\n<p>But it came out as:</p>\n\n<pre><code>1\n1.0\nFalse\n4\n1.0\nFalse\n9\n1.0\nFalse\n</code></pre>\n\n<p>Even I change into:</p>\n\n<pre><code>float(elist[i][1])==float(MC)\n</code></pre>\n\n<p>It still returns the same result.</p>\n\n<p>Does anybody know why this happen?</p>\n"}, {"tags": ["python", "macos", "pip", "virtualenv", "virtualenvwrapper"], "answers": [{"comments": [{"owner": {"reputation": 9743, "user_id": 1120027, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/6CuUV.jpg?s=128&g=1", "display_name": "JGallardo", "link": "https://stackoverflow.com/users/1120027/jgallardo"}, "edited": false, "score": 0, "creation_date": 1447274060, "post_id": 33659138, "comment_id": 55092254, "body": "ok that helped. I am on python 3 now as well. i guess the new problem is that when i run the command <code>mkvirtualenv --python=&#47;usr&#47;local&#47;bin&#47;python3 wordcounts</code> i get an error <code>-bash: mkvirtualenv: command not found</code> then i found this on github    <a href=\"https://github.com/robbyrussell/oh-my-zsh/issues/3047\" rel=\"nofollow noreferrer\">github.com/robbyrussell/oh-my-zsh/issues/3047</a> but that is for people using zsh. I am sure i am missing something obvious, but not sure what."}, {"owner": {"reputation": 1989, "user_id": 996114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12ab699f0efdf582f02f8f3dbba7a4b1?s=128&d=identicon&r=PG", "display_name": "Mike Covington", "link": "https://stackoverflow.com/users/996114/mike-covington"}, "reply_to_user": {"reputation": 9743, "user_id": 1120027, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/6CuUV.jpg?s=128&g=1", "display_name": "JGallardo", "link": "https://stackoverflow.com/users/1120027/jgallardo"}, "edited": false, "score": 1, "creation_date": 1447274521, "post_id": 33659138, "comment_id": 55092483, "body": "Do you have a file called: <code>&#47;usr&#47;local&#47;bin&#47;virtualenvwrapper.sh </code>?"}, {"owner": {"reputation": 9743, "user_id": 1120027, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/6CuUV.jpg?s=128&g=1", "display_name": "JGallardo", "link": "https://stackoverflow.com/users/1120027/jgallardo"}, "edited": false, "score": 0, "creation_date": 1447274674, "post_id": 33659138, "comment_id": 55092566, "body": "Mike, yes I do. I just checked."}, {"owner": {"reputation": 1989, "user_id": 996114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12ab699f0efdf582f02f8f3dbba7a4b1?s=128&d=identicon&r=PG", "display_name": "Mike Covington", "link": "https://stackoverflow.com/users/996114/mike-covington"}, "reply_to_user": {"reputation": 9743, "user_id": 1120027, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/6CuUV.jpg?s=128&g=1", "display_name": "JGallardo", "link": "https://stackoverflow.com/users/1120027/jgallardo"}, "edited": false, "score": 0, "creation_date": 1447275792, "post_id": 33659138, "comment_id": 55093126, "body": "It looks like you have <code>virtualenvwrapper</code> installed, but not properly configured. I&#39;ve update my answer with some more stuff for you to try."}], "tags": [], "owner": {"reputation": 1989, "user_id": 996114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12ab699f0efdf582f02f8f3dbba7a4b1?s=128&d=identicon&r=PG", "display_name": "Mike Covington", "link": "https://stackoverflow.com/users/996114/mike-covington"}, "is_accepted": true, "score": 7, "last_activity_date": 1452874293, "last_edit_date": 1452874293, "creation_date": 1447273354, "answer_id": 33659138, "question_id": 33658888, "link": "https://stackoverflow.com/questions/33658888/installing-virtualenv-virtualenvwrapper-with-pip-on-osx-10-11-1/33659138#33659138", "title": "Installing virtualenv virtualenvwrapper with pip on osx 10.11.1", "body": "<p>You shouldn't be using your system's version of Python.</p>\n\n<p>According to <a href=\"http://docs.python-guide.org/en/latest/starting/install/osx/\">Python's docs</a>:</p>\n\n<blockquote>\n  <p>The version of Python that ships with OS X is great for learning but it\u2019s not good for development. </p>\n</blockquote>\n\n<p>According to <a href=\"https://developer.apple.com/library/prerelease/mac/documentation/Security/Conceptual/System_Integrity_Protection_Guide/FileSystemProtections/FileSystemProtections.html\">Apple's docs</a>:</p>\n\n<blockquote>\n  <p>Developers using Perl, Python, Ruby, or any other scripting languages that ship with OS X, are encouraged to manage their own installations of the language and dependencies ...</p>\n</blockquote>\n\n<p>So, I recommend installing Python 2 and/or Python 3 using homebrew as suggested and described in <a href=\"http://docs.python-guide.org/en/latest/starting/install/osx/\">Python's OS X installation docs</a>.</p>\n\n<p>Note that these instructions provide the command to install Python 2. To install Python 3, you would run:</p>\n\n<pre><code>brew install python3    # instead of 'brew install python'\n</code></pre>\n\n<p>These Python installation docs also link to detailed instructions for <a href=\"https://github.com/kennethreitz/python-guide/blob/master/docs/dev/virtualenvs.rst\">installing <code>virtualenv</code> and <code>virtualenvwrapper</code></a>.</p>\n\n<p><strong>Update:</strong></p>\n\n<p>It looks like you have <code>virtualenvwrapper</code> installed, but not properly configured. When I installed it, I ran the following code based on <a href=\"http://virtualenvwrapper.readthedocs.org/en/latest/install.html\">installation docs  for <code>virtualenvwrapper</code></a> to configure:</p>\n\n<pre><code># Create a directory to hold the virtual environments.\nmkdir $HOME/.virtualenvs\n\necho \"\n# Python's virtualenvwrapper-RELATED\nexport WORKON_HOME=$HOME/.virtualenvs\nsource /usr/local/bin/virtualenvwrapper.sh \n\" &gt;&gt; ~/.bash_profile\nsource ~/.bash_profile\n</code></pre>\n"}], "owner": {"reputation": 9743, "user_id": 1120027, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/6CuUV.jpg?s=128&g=1", "display_name": "JGallardo", "link": "https://stackoverflow.com/users/1120027/jgallardo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3852, "favorite_count": 0, "accepted_answer_id": 33659138, "answer_count": 1, "score": 4, "last_activity_date": 1455433564, "creation_date": 1447272184, "last_edit_date": 1592644375, "question_id": 33658888, "link": "https://stackoverflow.com/questions/33658888/installing-virtualenv-virtualenvwrapper-with-pip-on-osx-10-11-1", "title": "Installing virtualenv virtualenvwrapper with pip on osx 10.11.1", "body": "<h2>Objective</h2>\n<p>Install virtualenv virtualenvwrapper</p>\n<h2>Background</h2>\n<p>I am trying to create a sample flask app by following this tutorial <a href=\"https://realpython.com/blog/python/flask-by-example-part-1-project-setup/\" rel=\"nofollow noreferrer\">https://realpython.com/blog/python/flask-by-example-part-1-project-setup/</a></p>\n<p>But I am running into constant issues since I am setting up Python and related technologies on this new Mac running on 10.11.1</p>\n<p>I am stuck at the command where I enter this</p>\n<p>$ mkvirtualenv --python=/usr/local/bin/python3 wordcounts</p>\n<p>I later realized that I did not have python 3. But still i have the error of</p>\n<pre><code>-bash: mkvirtualenv: command not found\n</code></pre>\n<p>So i found this tutorial to help install virtualenv <a href=\"http://exponential.io/blog/2015/02/10/install-virtualenv-and-virtualenvwrapper-on-mac-os-x/\" rel=\"nofollow noreferrer\">Install virtualenv and virtualenvwrapper on Mac OS X</a> and it said to run this</p>\n<pre><code>pip install virtualenv virtualenvwrapper\n</code></pre>\n<p>But then i ran into problem with pip</p>\n<h2>Current state</h2>\n<p>I thought I found an existing answer at <a href=\"https://stackoverflow.com/questions/32086631/cant-install-virtualenvwrapper-on-osx-10-11-el-capitan\">Can't install virtualenvwrapper on OSX 10.11 El Capitan</a></p>\n<p>The answer said to</p>\n<pre><code>sudo pip install pbr\nsudo pip install --no-deps stevedore\nsudo pip install --no-deps virtualenvwrapper\n</code></pre>\n<p>but even another user mentioned in the comments of the accepted answer that it was not working on <strong>10.11.1</strong></p>\n<h2>Logs</h2>\n<pre><code>Captains-MacBook-Pro:flask-by-example mac$ sudo pip install pbr\nPassword:\nThe directory '/Users/mac/Library/Caches/pip/http' or its parent directory is not owned by the current user and the cache has been disabled. Please check the permissions and owner of that directory. If executing pip with sudo, you may want sudo's -H flag.\nThe directory '/Users/mac/Library/Caches/pip' or its parent directory is not owned by the current user and caching wheels has been disabled. check the permissions and owner of that directory. If executing pip with sudo, you may want sudo's -H flag.\nRequirement already satisfied (use --upgrade to upgrade): pbr in /Library/Python/2.7/site-packages\nCaptains-MacBook-Pro:flask-by-example mac$ sudo pip install --no-deps stevedore\nThe directory '/Users/mac/Library/Caches/pip/http' or its parent directory is not owned by the current user and the cache has been disabled. Please check the permissions and owner of that directory. If executing pip with sudo, you may want sudo's -H flag.\nThe directory '/Users/mac/Library/Caches/pip' or its parent directory is not owned by the current user and caching wheels has been disabled. check the permissions and owner of that directory. If executing pip with sudo, you may want sudo's -H flag.\nCollecting stevedore\n  Downloading stevedore-1.9.0-py2.py3-none-any.whl\nInstalling collected packages: stevedore\nSuccessfully installed stevedore-1.9.0\nCaptains-MacBook-Pro:flask-by-example mac$ sudo pip install --no-deps virtualenvwrapper\nThe directory '/Users/mac/Library/Caches/pip/http' or its parent directory is not owned by the current user and the cache has been disabled. Please check the permissions and owner of that directory. If executing pip with sudo, you may want sudo's -H flag.\nThe directory '/Users/mac/Library/Caches/pip' or its parent directory is not owned by the current user and caching wheels has been disabled. check the permissions and owner of that directory. If executing pip with sudo, you may want sudo's -H flag.\nCollecting virtualenvwrapper\n  Downloading virtualenvwrapper-4.7.1-py2.py3-none-any.whl\nInstalling collected packages: virtualenvwrapper\nSuccessfully installed virtualenvwrapper-4.7.1\nCaptains-MacBook-Pro:flask-by-example mac$ sudo pip install virtualenv virtualenvwrapper\nThe directory '/Users/mac/Library/Caches/pip/http' or its parent directory is not owned by the current user and the cache has been disabled. Please check the permissions and owner of that directory. If executing pip with sudo, you may want sudo's -H flag.\nThe directory '/Users/mac/Library/Caches/pip' or its parent directory is not owned by the current user and caching wheels has been disabled. check the permissions and owner of that directory. If executing pip with sudo, you may want sudo's -H flag.\nRequirement already satisfied (use --upgrade to upgrade): virtualenv in /Library/Python/2.7/site-packages\nRequirement already satisfied (use --upgrade to upgrade): virtualenvwrapper in /Library/Python/2.7/site-packages\nRequirement already satisfied (use --upgrade to upgrade): virtualenv-clone in /Library/Python/2.7/site-packages (from virtualenvwrapper)\nRequirement already satisfied (use --upgrade to upgrade): stevedore in /Library/Python/2.7/site-packages (from virtualenvwrapper)\nRequirement already satisfied (use --upgrade to upgrade): pbr&gt;=1.6 in /Library/Python/2.7/site-packages (from stevedore-&gt;virtualenvwrapper)\nRequirement already satisfied (use --upgrade to upgrade): argparse in /Library/Python/2.7/site-packages (from stevedore-&gt;virtualenvwrapper)\nCollecting six&gt;=1.9.0 (from stevedore-&gt;virtualenvwrapper)\n  Downloading six-1.10.0-py2.py3-none-any.whl\nInstalling collected packages: six\n  Found existing installation: six 1.4.1\n    DEPRECATION: Uninstalling a distutils installed project (six) has been deprecated and will be removed in a future version. This is due to the fact that uninstalling a distutils project will only partially uninstall the project.\n    Uninstalling six-1.4.1:\nException:\nTraceback (most recent call last):\n  File &quot;/Library/Python/2.7/site-packages/pip-7.1.2-py2.7.egg/pip/basecommand.py&quot;, line 211, in main\n    status = self.run(options, args)\n  File &quot;/Library/Python/2.7/site-packages/pip-7.1.2-py2.7.egg/pip/commands/install.py&quot;, line 311, in run\n    root=options.root_path,\n  File &quot;/Library/Python/2.7/site-packages/pip-7.1.2-py2.7.egg/pip/req/req_set.py&quot;, line 640, in install\n    requirement.uninstall(auto_confirm=True)\n  File &quot;/Library/Python/2.7/site-packages/pip-7.1.2-py2.7.egg/pip/req/req_install.py&quot;, line 716, in uninstall\n    paths_to_remove.remove(auto_confirm)\n  File &quot;/Library/Python/2.7/site-packages/pip-7.1.2-py2.7.egg/pip/req/req_uninstall.py&quot;, line 125, in remove\n    renames(path, new_path)\n  File &quot;/Library/Python/2.7/site-packages/pip-7.1.2-py2.7.egg/pip/utils/__init__.py&quot;, line 315, in renames\n    shutil.move(old, new)\n  File &quot;/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/shutil.py&quot;, line 302, in move\n    copy2(src, real_dst)\n  File &quot;/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/shutil.py&quot;, line 131, in copy2\n    copystat(src, dst)\n  File &quot;/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/shutil.py&quot;, line 103, in copystat\n    os.chflags(dst, st.st_flags)\nOSError: [Errno 1] Operation not permitted: '/tmp/pip-tK4FXO-uninstall/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/six-1.4.1-py2.7.egg-info'\nCaptains-MacBook-Pro:flask-by-example mac$\n</code></pre>\n"}, {"tags": ["python", "multithreading", "image-processing", "vips"], "comments": [{"owner": {"reputation": 7702, "user_id": 894763, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d013c9681666f0a68a6c1c00ff4d603?s=128&d=identicon&r=PG", "display_name": "jcupitt", "link": "https://stackoverflow.com/users/894763/jcupitt"}, "edited": false, "score": 1, "creation_date": 1447335171, "post_id": 33658795, "comment_id": 55117941, "body": "I thought of another possible problem: vips uses a recursive algorithm to walk pipelines and work out which bit to calculate next. If your pipeline is extremely long and the C stack on your platform is rather small, you can get a C stack overflow. Could that be the problem? I would edit your question to include a complete example program that fails, plus a description of your platform and the vips version. You could also open an issue on the vips tracker, it&#39;s a better place for debugging: <a href=\"https://github.com/jcupitt/libvips/issues\" rel=\"nofollow noreferrer\">github.com/jcupitt/libvips/issues</a>"}, {"owner": {"reputation": 2012, "user_id": 3667217, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/37760b6c9391f5402c3cb3b77b3ed9a3?s=128&d=identicon&r=PG&f=1", "display_name": "user3667217", "link": "https://stackoverflow.com/users/3667217/user3667217"}, "reply_to_user": {"reputation": 7702, "user_id": 894763, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d013c9681666f0a68a6c1c00ff4d603?s=128&d=identicon&r=PG", "display_name": "jcupitt", "link": "https://stackoverflow.com/users/894763/jcupitt"}, "edited": false, "score": 0, "creation_date": 1447350104, "post_id": 33658795, "comment_id": 55128733, "body": "Thanks for your comment ! I&#39;ll have to read on C stack overflow. I&#39;m not quite sure what it means... I&#39;ve included complete program here. The file to be read from contains ~5000 small tiles saved in .jxr format."}], "answers": [{"comments": [{"owner": {"reputation": 2012, "user_id": 3667217, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/37760b6c9391f5402c3cb3b77b3ed9a3?s=128&d=identicon&r=PG&f=1", "display_name": "user3667217", "link": "https://stackoverflow.com/users/3667217/user3667217"}, "edited": false, "score": 0, "creation_date": 1447279836, "post_id": 33660672, "comment_id": 55095125, "body": "Thanks for the response ! I figured I need to do the threading myself because these small images are actually in .jxr format. The work for each thread is : open a file, read a chunk in binary, save in .jxr, call JxrDecApp to decode and save in .tiff, call Vips to read into memory. I suppose this can&#39;t be handled by Vips itself ?"}, {"owner": {"reputation": 7702, "user_id": 894763, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d013c9681666f0a68a6c1c00ff4d603?s=128&d=identicon&r=PG", "display_name": "jcupitt", "link": "https://stackoverflow.com/users/894763/jcupitt"}, "reply_to_user": {"reputation": 2012, "user_id": 3667217, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/37760b6c9391f5402c3cb3b77b3ed9a3?s=128&d=identicon&r=PG&f=1", "display_name": "user3667217", "link": "https://stackoverflow.com/users/3667217/user3667217"}, "edited": false, "score": 0, "creation_date": 1447281667, "post_id": 33660672, "comment_id": 55096066, "body": "Can you get the jxr decoder to write the uncompressed byte array to memory? If you can, you could skip the tiff save / load and make a vips image directly."}, {"owner": {"reputation": 2012, "user_id": 3667217, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/37760b6c9391f5402c3cb3b77b3ed9a3?s=128&d=identicon&r=PG&f=1", "display_name": "user3667217", "link": "https://stackoverflow.com/users/3667217/user3667217"}, "edited": false, "score": 0, "creation_date": 1447281883, "post_id": 33660672, "comment_id": 55096161, "body": "That&#39;s my next step. Now, the openly available jxrlib only reads and writes files. I&#39;ll have to understand the jxr decoder and modify it so it can directly decode binary data into memory. But even if I do so, don&#39;t I have to handle the threading myself ? And still, I&#39;m not sure what went wrong in my implementation I posted..?"}, {"owner": {"reputation": 7702, "user_id": 894763, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d013c9681666f0a68a6c1c00ff4d603?s=128&d=identicon&r=PG", "display_name": "jcupitt", "link": "https://stackoverflow.com/users/894763/jcupitt"}, "reply_to_user": {"reputation": 2012, "user_id": 3667217, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/37760b6c9391f5402c3cb3b77b3ed9a3?s=128&d=identicon&r=PG&f=1", "display_name": "user3667217", "link": "https://stackoverflow.com/users/3667217/user3667217"}, "edited": false, "score": 0, "creation_date": 1447282261, "post_id": 33660672, "comment_id": 55096341, "body": "Your example should work, and it sounds like it does, but you&#39;re still threading something that doesn&#39;t need to be threaded. I would make your source tiffs in parallel, but build the vips pipeline single-threaded. Also, use bigtiff: <code>canvas.write_to_file(&#39;complete.tif&#39;, bigtiff = True)</code>."}, {"owner": {"reputation": 2012, "user_id": 3667217, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/37760b6c9391f5402c3cb3b77b3ed9a3?s=128&d=identicon&r=PG&f=1", "display_name": "user3667217", "link": "https://stackoverflow.com/users/3667217/user3667217"}, "edited": false, "score": 0, "creation_date": 1447317456, "post_id": 33660672, "comment_id": 55107546, "body": "Preparing source tiff in parallel and reading in single-threaded sounds good.  I&#39;ll certainly try that. But still, my issue is not resolved. As I posted in my question, when I tried to save part of the image, I got very strange result. Furthermore, canvas.extract_area seems to take a rather long time, but in my final implementation, I do need to save multiple parts of the large image"}, {"owner": {"reputation": 7702, "user_id": 894763, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d013c9681666f0a68a6c1c00ff4d603?s=128&d=identicon&r=PG", "display_name": "jcupitt", "link": "https://stackoverflow.com/users/894763/jcupitt"}, "reply_to_user": {"reputation": 2012, "user_id": 3667217, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/37760b6c9391f5402c3cb3b77b3ed9a3?s=128&d=identicon&r=PG&f=1", "display_name": "user3667217", "link": "https://stackoverflow.com/users/3667217/user3667217"}, "edited": false, "score": 0, "creation_date": 1447321945, "post_id": 33660672, "comment_id": 55110057, "body": "I updated my example, don&#39;t know if that helps. Try swapping the last line for <code>img.crop(20000,40000,2000,2000).write_to_file(&quot;complete.tif&quot;&zwnj;&#8203;)</code>, it seems to work for me. Could you post a complete example of something that fails for you?"}, {"owner": {"reputation": 7702, "user_id": 894763, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d013c9681666f0a68a6c1c00ff4d603?s=128&d=identicon&r=PG", "display_name": "jcupitt", "link": "https://stackoverflow.com/users/894763/jcupitt"}, "reply_to_user": {"reputation": 2012, "user_id": 3667217, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/37760b6c9391f5402c3cb3b77b3ed9a3?s=128&d=identicon&r=PG&f=1", "display_name": "user3667217", "link": "https://stackoverflow.com/users/3667217/user3667217"}, "edited": false, "score": 0, "creation_date": 1447411350, "post_id": 33660672, "comment_id": 55153533, "body": "I&#39;ve rewritten the answer, does that help?"}, {"owner": {"reputation": 7702, "user_id": 894763, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d013c9681666f0a68a6c1c00ff4d603?s=128&d=identicon&r=PG", "display_name": "jcupitt", "link": "https://stackoverflow.com/users/894763/jcupitt"}, "reply_to_user": {"reputation": 2012, "user_id": 3667217, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/37760b6c9391f5402c3cb3b77b3ed9a3?s=128&d=identicon&r=PG&f=1", "display_name": "user3667217", "link": "https://stackoverflow.com/users/3667217/user3667217"}, "edited": false, "score": 1, "creation_date": 1447426530, "post_id": 33660672, "comment_id": 55162497, "body": "I had a poke about in the code and found a way to slim down the stack use per operation. It was 1120 bytes per call, it&#39;s 512 with this patch: <a href=\"https://github.com/jcupitt/libvips/commit/3b32200cc112d55b5ebb87043bc4fcdd9af96223\" rel=\"nofollow noreferrer\">github.com/jcupitt/libvips/commit/&hellip;</a> ... thanks for raising this issue, it&#39;s a nice improvement."}, {"owner": {"reputation": 2012, "user_id": 3667217, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/37760b6c9391f5402c3cb3b77b3ed9a3?s=128&d=identicon&r=PG&f=1", "display_name": "user3667217", "link": "https://stackoverflow.com/users/3667217/user3667217"}, "edited": false, "score": 0, "creation_date": 1447432482, "post_id": 33660672, "comment_id": 55166636, "body": "Thanks for this detailed explanation ! It makes sense now to me now. I&#39;ll need some more help on the implementation, though. There is some overlap between the tiles, and it&#39;s somewhat irregular. If I break the large image into strips, I&#39;ll have to leave some overlap between strips so they can joined nicely. This means that the small tiles sitting on the border between the strips will have to be read twice. This certainly is not ideal. I have thousands of tiles to insert, how to break up the task nicely seems unclear to me..."}, {"owner": {"reputation": 2012, "user_id": 3667217, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/37760b6c9391f5402c3cb3b77b3ed9a3?s=128&d=identicon&r=PG&f=1", "display_name": "user3667217", "link": "https://stackoverflow.com/users/3667217/user3667217"}, "edited": false, "score": 0, "creation_date": 1447432583, "post_id": 33660672, "comment_id": 55166708, "body": "Alternatively, is there anyway to check if there is a stack overflow ? Or to check if the tasks in pipeline have been cleared? If I can implement a check before sending more task into the pipeline, that would seem to solve the problem ?"}, {"owner": {"reputation": 7702, "user_id": 894763, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d013c9681666f0a68a6c1c00ff4d603?s=128&d=identicon&r=PG", "display_name": "jcupitt", "link": "https://stackoverflow.com/users/894763/jcupitt"}, "reply_to_user": {"reputation": 2012, "user_id": 3667217, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/37760b6c9391f5402c3cb3b77b3ed9a3?s=128&d=identicon&r=PG&f=1", "display_name": "user3667217", "link": "https://stackoverflow.com/users/3667217/user3667217"}, "edited": false, "score": 0, "creation_date": 1447434311, "post_id": 33660672, "comment_id": 55167851, "body": "Predicting stack overflow is not easy in C, unfortunately :( you&#39;ll probably have to render the image in sections. How large are each of the 5,000 tiles? Can you hold all the source images in memory? You could load the position of each image, sort by Y, partition into 10 (?) equal chunks, load the images for the top chunk and render that part, then throw away all the images you don&#39;t need for chunk 2, load any you are still missing, render chunk 2 ... and so on."}, {"owner": {"reputation": 7702, "user_id": 894763, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d013c9681666f0a68a6c1c00ff4d603?s=128&d=identicon&r=PG", "display_name": "jcupitt", "link": "https://stackoverflow.com/users/894763/jcupitt"}, "reply_to_user": {"reputation": 2012, "user_id": 3667217, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/37760b6c9391f5402c3cb3b77b3ed9a3?s=128&d=identicon&r=PG&f=1", "display_name": "user3667217", "link": "https://stackoverflow.com/users/3667217/user3667217"}, "edited": false, "score": 0, "creation_date": 1447434501, "post_id": 33660672, "comment_id": 55167985, "body": "vips has operations that do soft, feathered joins, would they be useful? You&#39;d need to be able to express your problem as a set of pairwise left-right or top-bottom joins. We should move this to chat, or switch to the vips issue tracker."}], "tags": [], "owner": {"reputation": 7702, "user_id": 894763, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d013c9681666f0a68a6c1c00ff4d603?s=128&d=identicon&r=PG", "display_name": "jcupitt", "link": "https://stackoverflow.com/users/894763/jcupitt"}, "is_accepted": false, "score": 3, "last_activity_date": 1587983579, "last_edit_date": 1587983579, "creation_date": 1447279219, "answer_id": 33660672, "question_id": 33658795, "link": "https://stackoverflow.com/questions/33658795/difficulty-with-handling-very-large-image-using-vips/33660672#33660672", "title": "Difficulty with handling very large image using VIPS", "body": "<p>I think your problem has to do with the way libvips calculates pixels. </p>\n\n<p>In systems like OpenCV, images are huge areas of memory. You perform a series of operations, and each operation modifies a memory image in some way. </p>\n\n<p>libvips is not like this, though the interface looks similar. In libvips, when you perform an operation on an image, you are actually just adding a new section to a pipeline. It's only when you finally connect the output to some sink (a file on disk, or a region of memory you want filled with image data, or an area of the display) that libvips will actually do any calculations. libvips will then use a recursive algorithm to run a large set of worker threads up and down the whole length of the pipeline, evaluating all of the operations you created at the same time. </p>\n\n<p>To make an analogy with programming languages, systems like OpenCV are imperative, libvips is functional. </p>\n\n<p>The good thing about the way libvips does things is that it can see the whole pipeline at once and it can optimise away most of the memory use and make good use of your CPU. The bad thing is that long sequences of operations can need large amounts of stack to evaluate (whereas with systems like OpenCV you are more likely to be bounded by image size). In particular, the recursive system used by libvips to evaluate means that pipeline length is limited by the C stack, about 2MB on many operating systems. </p>\n\n<p>Here's a simple test program that does more or less what you are doing:</p>\n\n<pre><code>#!/usr/bin/python3\n\nimport sys\nimport pyvips\n\nif len(sys.argv) &lt; 4:\n    print \"usage: %s image-in image-out n\" % sys.argv[0]\n    print \"   make an n x n grid of image-in\"\n    sys.exit(1)\n\ntile = pyvips.Image.new_from_file(sys.argv[1])\noutfile = sys.argv[2]\nsize = int(sys.argv[3])\n\nimg = pyvips.Image.black(size * tile.width, size * tile.height, bands=3)\n\nfor y in range(size):\n    for x in range(size):\n        img = img.insert(tile, x * size, y * size)\n\n# we're not interested in huge files for this test, just write a small patch\nimg.crop(10, 10, 100, 100).write_to_file(outfile)\n</code></pre>\n\n<p>You run it like this:</p>\n\n<pre><code>time ./bigjoin.py ~/pics/k2.jpg out.tif 2\nreal    0m0.176s\nuser    0m0.144s\nsys 0m0.031s\n</code></pre>\n\n<p>It loads <code>k2.jpg</code> (a 2k x 2k JPG image), repeats that image into a 2 x 2 grid, and saves a small part of it. This program will work well with very large images, try removing the <code>crop</code> and running as:</p>\n\n<pre><code>./bigjoin.py huge.tif out.tif[bigtiff] 10\n</code></pre>\n\n<p>and it'll copy the huge tiff image 100 times into a REALLY huge tiff file. It'll be quick and use little memory. </p>\n\n<p>However, this program will become very unhappy with small images being copied many times. For example, on this machine (a Mac), I can run:</p>\n\n<pre><code>./bigjoin.py ~/pics/k2.jpg out.tif 26\n</code></pre>\n\n<p>But this fails:</p>\n\n<pre><code>./bigjoin.py ~/pics/k2.jpg out.tif 28\nBus error: 10\n</code></pre>\n\n<p>With a 28 x 28 output, that's 784 tiles. The way we've built the image, repeatedly inserting a single tile, that's a pipeline 784 operations long -- long enough to cause a stack overflow. On my Ubuntu laptop I can get pipelines up to about 2,900 operations long before it starts failing. </p>\n\n<p>There's a simple way to fix this program: build a wide rather than a deep pipeline. Instead of inserting a single image each time, make a set of strips, then join the strips. Now the pipeline depth will be proportional to the square root of the number of tiles. For example:</p>\n\n<pre><code>img = pyvips.Image.black(size * tile.width, size * tile.height, bands=3)\n\nfor y in range(size):\n    strip = pyvips.Image.black(size * tile.width, tile.height, bands=3)\n    for x in range(size):\n        strip = strip.insert(tile, x * size, 0)\n    img = img.insert(strip, 0, y * size)\n</code></pre>\n\n<p>Now I can run:</p>\n\n<pre><code>./bigjoin2.py ~/pics/k2.jpg out.tif 200\n</code></pre>\n\n<p>Which is 40,000 images joined together.</p>\n"}], "owner": {"reputation": 2012, "user_id": 3667217, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/37760b6c9391f5402c3cb3b77b3ed9a3?s=128&d=identicon&r=PG&f=1", "display_name": "user3667217", "link": "https://stackoverflow.com/users/3667217/user3667217"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1370, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1587983579, "creation_date": 1447271812, "last_edit_date": 1447349771, "question_id": 33658795, "link": "https://stackoverflow.com/questions/33658795/difficulty-with-handling-very-large-image-using-vips", "title": "Difficulty with handling very large image using VIPS", "body": "<p>I'm writing a Python(3.4.3) program that uses VIPS(8.1.1) on Ubuntu 14.04 LTS to read many small tiles using multiple threads and put them together into a large image. </p>\n\n<p>In a very simple test : </p>\n\n<pre><code>from concurrent.futures import ThreadPoolExecutor\nfrom multiprocessing import Lock\nfrom gi.repository import Vips\n\ncanvas = Vips.Image.black(8000,1000,bands=3)\n\ndef do_work(x):\n    img = Vips.Image.new_from_file('part.tif')    # RGB tiff image\n    with lock:\n        canvas = canvas.insert(img, x*1000, 0)\n\nwith ThreadPoolExecutor(max_workers=8) as executor:\n    for x in range(8):\n        executor.submit(do_work, x)\n\ncanvas.write_to_file('complete.tif')\n</code></pre>\n\n<p>I get correct result. In my full program, the work for each thread involves read binary from a source file, turn them into tiff format, read the image data and insert into canvas. It seems to work but when I try to examine the result, I ran into trouble. Because the image is extremely large(~50000*100000 pixels), I couldn't save the entire image in one file, so I tried</p>\n\n<pre><code>canvas = canvas.resize(.5)\ncanvas.write_to_file('test.jpg')\n</code></pre>\n\n<p>This takes extremely long time, and the resulting jpeg has only black pixels. If I do resize three times, the program get killed. I also tried </p>\n\n<pre><code>canvas.extract_area(20000,40000,2000,2000).write_to_file('test.tif')\n</code></pre>\n\n<p>This results in error message <code>segmentation fault(core dumped)</code> but it does save an image. There are image contents in it, but they seem to be in the wrong place.</p>\n\n<p>I'm wondering what the problem could be? </p>\n\n<p>Below are the codes for the complete program. The same logic was also implemented using OpenCV + sharedmem (sharedmem handled the multiprocessing part) and it worked without a problem.  </p>\n\n<pre><code>import os\nimport subprocess\nimport pickle\nfrom multiprocessing import Lock\nfrom concurrent.futures import ThreadPoolExecutor\nimport threading\nimport numpy as np\nfrom gi.repository import Vips\n\nlock = Lock()\n\ndef read_image(x):\n    with open(file_name, 'rb') as fin:\n        fin.seek(sublist[x]['dataStartPos'])\n        temp_array = np.fromfile(fin, dtype='int8', count=sublist[x]['dataSize'])\n\n    name_base = os.path.join(rd_path, threading.current_thread().name + 'tempimg')\n    with open(name_base + '.jxr', 'wb') as fout:\n        temp_array.tofile(fout)\n    subprocess.call(['./JxrDecApp', '-i', name_base + '.jxr', '-o', name_base + '.tif'])\n    temp_img = Vips.Image.new_from_file(name_base + '.tif')\n    with lock:\n        global canvas\n        canvas = canvas.insert(temp_img, sublist[x]['XStart'], sublist[x]['YStart'])\n\ndef assemble_all(filename, ramdisk_path, scene):\n    global canvas, sublist, file_name, rd_path, tilesize_x, tilesize_y\n    file_name = filename\n    rd_path = ramdisk_path\n    file_info = fetch_pickle(filename)   # A custom function\n    # this info includes where to begin reading image data, image size and coordinates\n    tilesize_x = file_info['sBlockList_P0'][0]['XSize']\n    tilesize_y = file_info['sBlockList_P0'][0]['YSize']\n    sublist = [item for item in file_info['sBlockList_P0'] if item['SStart'] == scene]\n    max_x = max([item['XStart'] for item in file_info['sBlockList_P0']])\n    max_y = max([item['YStart'] for item in file_info['sBlockList_P0']])\n    canvas = Vips.Image.black((max_x+tilesize_x), (max_y+tilesize_y), bands=3)\n\n    with ThreadPoolExecutor(max_workers=4) as executor:\n        for x in range(len(sublist)):\n            executor.submit(read_image, x)\n\n    return canvas\n</code></pre>\n\n<p>The above module (imported as mcv) is called in the driver script : </p>\n\n<pre><code>canvas = mcv.assemble_all(filename, ramdisk_path, 0)\n</code></pre>\n\n<p>To examine the content, I used </p>\n\n<pre><code>canvas.extract_area(25000, 40000, 2000, 2000).write_to_file('test_vips1.jpg')\n</code></pre>\n"}, {"tags": ["python", "pandas", "pytables", "hdf"], "comments": [{"owner": {"reputation": 1872, "user_id": 1332656, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/Zv8H8.jpg?s=128&g=1", "display_name": "Alpha", "link": "https://stackoverflow.com/users/1332656/alpha"}, "edited": false, "score": 0, "creation_date": 1471383753, "post_id": 33658783, "comment_id": 65322609, "body": "I got this problem as well, seems to be a bug"}], "owner": {"reputation": 21, "user_id": 1281657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81e9604175f0cda08fc7af6893b86528?s=128&d=identicon&r=PG", "display_name": "user1281657", "link": "https://stackoverflow.com/users/1281657/user1281657"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 575, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1447271735, "creation_date": 1447271735, "question_id": 33658783, "link": "https://stackoverflow.com/questions/33658783/empty-pandas-dataframes-saved-with-hdfstore-make-very-large-hdf-files", "title": "Empty pandas DataFrames saved with HDFStore make very large HDF files", "body": "<p>Storing empty DataFrames using pandas HDFStore consumes a lot of disk space. Here's an example:</p>\n\n<pre><code>import pandas as pd\n\nfor i in range(1000):\n    with pd.HDFStore('/tmp/test_empty.hdf') as s:\n        key = 'E{:03d}'.format(i)\n        s[key] = pd.DataFrame()\n\nfor i in range(1000):\n    with pd.HDFStore('/tmp/test_nan.hdf') as s:\n        key = 'N{:03d}'.format(i)\n        s[key] = pd.DataFrame([pd.np.nan])\n</code></pre>\n\n<p>The file sizes:</p>\n\n<pre><code>$ ls -lh /tmp/test_empty.hdf /tmp/test_nan.hdf\n.... 2.0G Nov 11 11:47 /tmp/test_empty.hdf\n.... 5.5M Nov 11 11:47 /tmp/test_nan.hdf\n</code></pre>\n\n<p>1000 DataFrames containing a single NaN consumes about 400 times less space than 1000 DataFrames that are empty. Is there a more efficient way to mark a key as taken in an HDFStore? (It's non-intuitive that empty DataFrames consume so much space.)</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 486, "user_id": 5373131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/55f6804fa2b8ffb09a00f1c7d1f99cd6?s=128&d=identicon&r=PG&f=1", "display_name": "Lee", "link": "https://stackoverflow.com/users/5373131/lee"}, "reply_to_user": {"reputation": 8840, "user_id": 2319400, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/9Ckyw.png?s=128&g=1", "display_name": "sebastian", "link": "https://stackoverflow.com/users/2319400/sebastian"}, "edited": false, "score": 0, "creation_date": 1447281677, "post_id": 33658773, "comment_id": 55096072, "body": "very similar except simpler than mine"}], "answers": [{"comments": [{"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 1, "creation_date": 1447271977, "post_id": 33658812, "comment_id": 55091163, "body": "You don&#39;t need to use a list comp <code>zip(*(i.split(&#39;.&#39;) for i in d))</code>"}, {"owner": {"reputation": 94141, "user_id": 2867928, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a8DM1.jpg?s=128&g=1", "display_name": "kasravnd", "link": "https://stackoverflow.com/users/2867928/kasravnd"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1447272185, "post_id": 33658812, "comment_id": 55091259, "body": "@PadraicCunningham I think using list comprehension has more performance than generator expression in terms of execution time. Because by using generator expression python will does an extra jobs again (calling the generator function and using <code>iter</code> and <code>next</code> methods ), ;-) . read my answer here <a href=\"http://stackoverflow.com/questions/33634130/why-is-any-running-slower-than-using-loops/33634284\" title=\"why is any running slower than using loops\">stackoverflow.com/questions/33634130/&hellip;</a>"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1447272242, "post_id": 33658812, "comment_id": 55091290, "body": "If you have large amounts of data you are potentially creating multiple copies which may cause issue"}, {"owner": {"reputation": 94141, "user_id": 2867928, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a8DM1.jpg?s=128&g=1", "display_name": "kasravnd", "link": "https://stackoverflow.com/users/2867928/kasravnd"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1447272356, "post_id": 33658812, "comment_id": 55091364, "body": "@PadraicCunningham Yep, in terms of memory use actually a generator expression would performs so much better."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1447272566, "post_id": 33658812, "comment_id": 55091482, "body": "Watch out, though; if <code>d</code> is empty, the assignment will fail due to not enough values to unpack!"}, {"owner": {"reputation": 94141, "user_id": 2867928, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a8DM1.jpg?s=128&g=1", "display_name": "kasravnd", "link": "https://stackoverflow.com/users/2867928/kasravnd"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1447272711, "post_id": 33658812, "comment_id": 55091554, "body": "@user2357112 Yes but it seems that <code>d</code> is not variable."}], "tags": [], "owner": {"reputation": 94141, "user_id": 2867928, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a8DM1.jpg?s=128&g=1", "display_name": "kasravnd", "link": "https://stackoverflow.com/users/2867928/kasravnd"}, "is_accepted": true, "score": 7, "last_activity_date": 1447271881, "creation_date": 1447271881, "answer_id": 33658812, "question_id": 33658773, "link": "https://stackoverflow.com/questions/33658773/more-pythonic-way-to-do-this-string-splitting/33658812#33658812", "title": "More pythonic way to do this (string splitting)?", "body": "<p>You can use <code>zip()</code> function:</p>\n\n<pre><code>&gt;&gt;&gt; a,b = zip(*[i.split('.') for i in d])\n&gt;&gt;&gt; a\n('a1', 'a2', 'a3')\n&gt;&gt;&gt; b\n('b1', 'b2', 'b3')\n</code></pre>\n"}], "owner": {"reputation": 486, "user_id": 5373131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/55f6804fa2b8ffb09a00f1c7d1f99cd6?s=128&d=identicon&r=PG&f=1", "display_name": "Lee", "link": "https://stackoverflow.com/users/5373131/lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "closed_date": 1447345687, "accepted_answer_id": 33658812, "answer_count": 1, "score": 3, "last_activity_date": 1447272796, "creation_date": 1447271692, "last_edit_date": 1447272796, "question_id": 33658773, "link": "https://stackoverflow.com/questions/33658773/more-pythonic-way-to-do-this-string-splitting", "closed_reason": "Duplicate", "title": "More pythonic way to do this (string splitting)?", "body": "<p><code>d</code> is a string list where each item is composed of two parts (connected by a dot). I want to extract the parts before and after the dot for each string item.</p>\n\n<p>Here is how I did it.</p>\n\n<pre><code>d = ['a1.b1', 'a2.b2', 'a3.b3']\nb = [c.split('.')[0] for c in d]\na = [c.split('.')[1] for c in d]\n</code></pre>\n\n<p>But I guess there is some more pythonic way?</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 11, "user_id": 11965583, "user_type": "registered", "profile_image": "https://graph.facebook.com/2766319730046523/picture?type=large", "display_name": "Diego Casso", "link": "https://stackoverflow.com/users/11965583/diego-casso"}, "edited": false, "score": 0, "creation_date": 1568438623, "post_id": 33658756, "comment_id": 102282628, "body": "I was just doing some research about the same thing, and I found this new binarytree module. It already comes with different methods to list the elements or even print the tree strucutre. <a href=\"https://pypi.org/project/binarytree/\" rel=\"nofollow noreferrer\">This is the link where I found the module.</a> I hope it helps somehow."}], "answers": [{"comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1447272596, "post_id": 33658863, "comment_id": 55091499, "body": "Presumably, <code>for k in self.left</code> would never enter the body if <code>self.left</code> were falsy, making the <code>if</code> check redundant."}], "tags": [], "owner": {"reputation": 6199, "user_id": 2560053, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/64aacb2c26ae0bb85730da51291d0b9b?s=128&d=identicon&r=PG", "display_name": "Thomas Baruchel", "link": "https://stackoverflow.com/users/2560053/thomas-baruchel"}, "is_accepted": false, "score": 0, "last_activity_date": 1447272098, "creation_date": 1447272098, "answer_id": 33658863, "question_id": 33658756, "link": "https://stackoverflow.com/questions/33658756/reading-a-binary-tree-using-iter/33658863#33658863", "title": "Reading a Binary Tree using __iter__", "body": "<p>Not tried, but probably rather something like:</p>\n\n<pre><code>def __iter__(self):\n    if self.left:\n        for k in self.left:\n            yield k\n    yield self\n    if self.right:\n        for k in self.right:\n            yield k\n</code></pre>\n\n<p>But check it first.</p>\n"}, {"tags": [], "owner": {"reputation": 10078, "user_id": 2709018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/p98Vl.png?s=128&g=1", "display_name": "myaut", "link": "https://stackoverflow.com/users/2709018/myaut"}, "is_accepted": false, "score": 0, "last_activity_date": 1447272139, "last_edit_date": 1495535342, "creation_date": 1447272139, "answer_id": 33658873, "question_id": 33658756, "link": "https://stackoverflow.com/questions/33658756/reading-a-binary-tree-using-iter/33658873#33658873", "title": "Reading a Binary Tree using __iter__", "body": "<p>Next element from the collection should be <strong>returned</strong> by <code>__next__()</code>: <a href=\"https://stackoverflow.com/questions/13094421/what-is-the-interface-for-python-iterators\">What is the interface for python iterators?</a> </p>\n\n<p><code>__iter__()</code> should return an iterator, an object that defines <code>__next__()</code> method. <code>yield</code> is used in generator which is quite different concept than iterators, but you can use generator function (because it is an iterator), i.e.:</p>\n\n<pre><code>class A:\n    def __init__(self, val, a=None, b=None):\n        self.left = a\n        self.right = b\n        self.val = val\n\n    def __iter__(self):\n        def generator():\n            if self.left:\n                for leaf in self.left:\n                    yield leaf\n            yield self\n            if self.right:\n                for leaf in self.right:\n                    yield leaf\n        return generator()\n\nfor i in A(3, A(5, A(2), A(1)), A(4)):\n    print(i.val)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4023, "user_id": 5238308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CKZ9Y.jpg?s=128&g=1", "display_name": "Jashandeep Sohi", "link": "https://stackoverflow.com/users/5238308/jashandeep-sohi"}, "is_accepted": true, "score": 9, "last_activity_date": 1447272855, "last_edit_date": 1447272855, "creation_date": 1447272348, "answer_id": 33658920, "question_id": 33658756, "link": "https://stackoverflow.com/questions/33658756/reading-a-binary-tree-using-iter/33658920#33658920", "title": "Reading a Binary Tree using __iter__", "body": "<p>In Python >= <a href=\"https://docs.python.org/3/whatsnew/3.3.html#pep-380\" rel=\"noreferrer\">3.3</a>, one can use the <code>yield from x</code> syntax for recursive iterators:</p>\n\n<pre><code>def __iter__(self):\n    if self.left:\n        yield from self.left\n    yield self\n    if self.right:\n        yield from self.right\n</code></pre>\n\n<p>Edit: Python 3.3 support confirmed.</p>\n"}], "owner": {"reputation": 23, "user_id": 5552018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a97fc336f66d9f2c2ec4836360b497cd?s=128&d=identicon&r=PG&f=1", "display_name": "Quizzlesticks", "link": "https://stackoverflow.com/users/5552018/quizzlesticks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1207, "favorite_count": 1, "accepted_answer_id": 33658920, "answer_count": 3, "score": 2, "last_activity_date": 1568438623, "creation_date": 1447271623, "question_id": 33658756, "link": "https://stackoverflow.com/questions/33658756/reading-a-binary-tree-using-iter", "title": "Reading a Binary Tree using __iter__", "body": "<p>I have a standard Binary Tree that reads like<br>\n    1<br>\n   / \\<br>\n2  3<br>\n/ \\ / \\<br>\n4  5 6  7</p>\n\n<p>I need to read the binary tree by importing my tree class, creating this tree, and then using a for loop to read it like: [4, 2, 5, 1, 6, 3, 7]</p>\n\n<p>I have already made the tree and my program will generate a like tree with any amount of numbers. My problem is in the method.</p>\n\n<p>def <strong>iter</strong>(self):</p>\n\n<p>So far I have:</p>\n\n<pre><code>def __iter__(self):\n    if self.left:\n        self.left.__iter__()\n    yield self\n    if self.right:\n        self.right.__iter__()\n</code></pre>\n\n<p>But when I run a for loop on the tree object like:</p>\n\n<p>for item in tree:\n    print(\"{}: {}\").format(item.name, item.height())</p>\n\n<p>It only prints the first node in my try with a correct height.</p>\n\n<p>My question is basically, how to print this binary tree using recursion?</p>\n"}, {"tags": ["python", "list", "multidimensional-array", "compression", "data-science"], "answers": [{"tags": [], "owner": {"reputation": 94141, "user_id": 2867928, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a8DM1.jpg?s=128&g=1", "display_name": "kasravnd", "link": "https://stackoverflow.com/users/2867928/kasravnd"}, "is_accepted": true, "score": 1, "last_activity_date": 1447272508, "last_edit_date": 1447272508, "creation_date": 1447271674, "answer_id": 33658764, "question_id": 33658729, "link": "https://stackoverflow.com/questions/33658729/python-create-frequency-table-from-2d-list/33658764#33658764", "title": "Python: create frequency table from 2D list", "body": "<p>It's what that <code>collections.Counter()</code> is for:</p>\n\n<pre><code>&gt;&gt;&gt; from collections import Counter\n&gt;&gt;&gt; \n&gt;&gt;&gt; Counter(map(tuple,data))\nCounter({(0, 1): 2, (2, 3): 1, (0, 2): 1})\n&gt;&gt;&gt; Counter(map(tuple,data)).items()\n[((0, 1), 2), ((2, 3), 1), ((0, 2), 1)]\n</code></pre>\n\n<p>Note that since list objects are not hashable you can not use them as the dictionary keys.So you need to convert them to tuple which is a hashable object.</p>\n"}], "owner": {"reputation": 1340, "user_id": 5552014, "user_type": "registered", "accept_rate": 52, "profile_image": "https://lh3.googleusercontent.com/--_ZWSqH8tU0/AAAAAAAAAAI/AAAAAAAABoI/AIL-0NU4Bg0/photo.jpg?sz=128", "display_name": "Nate Gardner", "link": "https://stackoverflow.com/users/5552014/nate-gardner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 496, "favorite_count": 0, "accepted_answer_id": 33658764, "answer_count": 1, "score": 1, "last_activity_date": 1447272508, "creation_date": 1447271506, "question_id": 33658729, "link": "https://stackoverflow.com/questions/33658729/python-create-frequency-table-from-2d-list", "title": "Python: create frequency table from 2D list", "body": "<p>Starting with data formatted like this:</p>\n\n<pre><code>data = [[0,1],[2,3],[0,1],[0,2]]\n</code></pre>\n\n<p>I would like to represent every value once with its frequency:</p>\n\n<pre><code>output = [[[0,1],2],[[2,3],1],[[0,2],1]]\n</code></pre>\n\n<p>I've found many solutions to this problem for 1D lists, but they don't seem to work for 2D.</p>\n"}, {"tags": ["python", "opencv"], "comments": [{"owner": {"reputation": 5410, "user_id": 1390022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d29e994a1301613f40c4cc99909edb0?s=128&d=identicon&r=PG", "display_name": "derricw", "link": "https://stackoverflow.com/users/1390022/derricw"}, "edited": false, "score": 0, "creation_date": 1447272296, "post_id": 33658709, "comment_id": 55091326, "body": "Are you wanting to save your array as an image (for example as a png)? or wanting to just display it?  Also, what have you tried so far?"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 1, "creation_date": 1447272587, "post_id": 33658709, "comment_id": 55091495, "body": "Welcome to StackOverflow.  Please read and follow the posting guidelines in the help documentation.  <a href=\"http://stackoverflow.com/help/mcve\">Minimal, complete, verifiable example</a> applies here.  We cannot effectively help you until you post your code and accurately describe the problem."}, {"owner": {"reputation": 296, "user_id": 3960301, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/aa1246204a46eb759c13f343f23fd474?s=128&d=identicon&r=PG&f=1", "display_name": "Raghib Ahsan", "link": "https://stackoverflow.com/users/3960301/raghib-ahsan"}, "edited": false, "score": 0, "creation_date": 1447274479, "post_id": 33658709, "comment_id": 55092462, "body": "I want to do both save and display"}, {"owner": {"reputation": 296, "user_id": 3960301, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/aa1246204a46eb759c13f343f23fd474?s=128&d=identicon&r=PG&f=1", "display_name": "Raghib Ahsan", "link": "https://stackoverflow.com/users/3960301/raghib-ahsan"}, "reply_to_user": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1447274657, "post_id": 33658709, "comment_id": 55092552, "body": "@Prune thanks <a href=\"http://pastebin.com/DCJWqJpk\" rel=\"nofollow noreferrer\">pastebin.com/DCJWqJpk</a>"}], "answers": [{"comments": [{"owner": {"reputation": 296, "user_id": 3960301, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/aa1246204a46eb759c13f343f23fd474?s=128&d=identicon&r=PG&f=1", "display_name": "Raghib Ahsan", "link": "https://stackoverflow.com/users/3960301/raghib-ahsan"}, "edited": false, "score": 0, "creation_date": 1447277157, "post_id": 33659694, "comment_id": 55093849, "body": "Done but faced with new problems thatis,getting error while saving the file and the error is IOError(&quot;cannot write mode %s as JPEG&quot; % im.mode)"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "reply_to_user": {"reputation": 296, "user_id": 3960301, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/aa1246204a46eb759c13f343f23fd474?s=128&d=identicon&r=PG&f=1", "display_name": "Raghib Ahsan", "link": "https://stackoverflow.com/users/3960301/raghib-ahsan"}, "edited": false, "score": 0, "creation_date": 1447277600, "post_id": 33659694, "comment_id": 55094052, "body": "Okay ... new problem, post a new question.  Follow that MCVE link.  I don&#39;t know how many people would dig through these indirections to solve a secondary problem.  You haven&#39;t given us the code needed to reproduce the problem, and I don&#39;t have it here."}, {"owner": {"reputation": 296, "user_id": 3960301, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/aa1246204a46eb759c13f343f23fd474?s=128&d=identicon&r=PG&f=1", "display_name": "Raghib Ahsan", "link": "https://stackoverflow.com/users/3960301/raghib-ahsan"}, "edited": false, "score": 0, "creation_date": 1447277767, "post_id": 33659694, "comment_id": 55094138, "body": "i edited the question and updated the link.. thanks for the mcve link. Iwould follow in the future"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "reply_to_user": {"reputation": 296, "user_id": 3960301, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/aa1246204a46eb759c13f343f23fd474?s=128&d=identicon&r=PG&f=1", "display_name": "Raghib Ahsan", "link": "https://stackoverflow.com/users/3960301/raghib-ahsan"}, "edited": false, "score": 0, "creation_date": 1447280427, "post_id": 33659694, "comment_id": 55095439, "body": "This should really be another question.  The comments and answer here refer to the original question; now it looks like we&#39;re all inebriated.  :-)"}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": true, "score": 4, "last_activity_date": 1447275487, "creation_date": 1447275487, "answer_id": 33659694, "question_id": 33658709, "link": "https://stackoverflow.com/questions/33658709/convert-an-array-into-image/33659694#33659694", "title": "Convert an array into image", "body": "<p>That's <strong>much</strong> better with the code; thanks.  In the future, please remember to cut down the code to the minimal level and post it in the original question.  An external link doesn't get nearly as much attention.</p>\n\n<p>Your problem is that <strong>Image.fromarray</strong> requires an array as input; you gave it a list.  You did originally convert your list, <strong>c</strong>, to an array, but you didn't keep the array.  I think you need this at lines 18 and 41 from your pastebin code, where I've added references to c_array:</p>\n\n<pre><code>c = [[0]*k*im.width for i in range(k*im.height)]\nc_array = np.asarray(c)\n...\nime = Image.fromarray(c_array)\nime.save(\"your_file.jpeg\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 117, "user_id": 9813194, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PH3pwMPoZu4/AAAAAAAAAAI/AAAAAAAAAQM/p2Qnqhru_GU/photo.jpg?sz=128", "display_name": "Harsh Shah", "link": "https://stackoverflow.com/users/9813194/harsh-shah"}, "is_accepted": false, "score": 1, "last_activity_date": 1558393470, "last_edit_date": 1558393470, "creation_date": 1558393137, "answer_id": 56229165, "question_id": 33658709, "link": "https://stackoverflow.com/questions/33658709/convert-an-array-into-image/56229165#56229165", "title": "Convert an array into image", "body": "<p>You can simply use c.<strong>values</strong> to convert dataframe into an array </p>\n\n<blockquote>\n<pre><code>ime = Image.fromarray(c.values)\nime.save(\"your_file.jpeg\")\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 296, "user_id": 3960301, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/aa1246204a46eb759c13f343f23fd474?s=128&d=identicon&r=PG&f=1", "display_name": "Raghib Ahsan", "link": "https://stackoverflow.com/users/3960301/raghib-ahsan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13438, "favorite_count": 1, "accepted_answer_id": 33659694, "answer_count": 2, "score": 2, "last_activity_date": 1558393470, "creation_date": 1447271446, "last_edit_date": 1447280726, "question_id": 33658709, "link": "https://stackoverflow.com/questions/33658709/convert-an-array-into-image", "title": "Convert an array into image", "body": "<p>I have a 2Darray  named <code>C</code> containing pixels in its indexes. How to view the image\nthat is formed by that pixels value, A image can be represented by array. No w i am trying the reverse process, I wanna see only <strong>grayscale image</strong> since array named <code>C</code> has only one value per index. Doing programming in python</p>\n\n<p>Here goes my code\n<a href=\"http://pastebin.com/qmnKrtzu\" rel=\"nofollow\">http://pastebin.com/qmnKrtzu</a></p>\n\n<p>getting error in this line</p>\n\n<pre><code>ime = Image.fromarray(c)\nime.save(\"your_file.jpeg\")\n</code></pre>\n\n<p><code>ime = Image.fromarray(c_array)</code>\n<code>arr = obj.__array_interface__\nAttributeError: 'list' object has no attribute '__array_interface__'</code></p>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 3711, "user_id": 3456281, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6fb5e6fa4617d883de24fe3cc4372898?s=128&d=identicon&r=PG&f=1", "display_name": "Jasper", "link": "https://stackoverflow.com/users/3456281/jasper"}, "edited": false, "score": 3, "creation_date": 1447271358, "post_id": 33658662, "comment_id": 55090824, "body": "regexes would&#39;nt make too much sense on constant strings :)"}, {"owner": {"reputation": 18736, "user_id": 308827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/28f523030f3ecd9c9f2ad23ca745cc65?s=128&d=identicon&r=PG", "display_name": "user308827", "link": "https://stackoverflow.com/users/308827/user308827"}, "reply_to_user": {"reputation": 3711, "user_id": 3456281, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6fb5e6fa4617d883de24fe3cc4372898?s=128&d=identicon&r=PG&f=1", "display_name": "Jasper", "link": "https://stackoverflow.com/users/3456281/jasper"}, "edited": false, "score": 0, "creation_date": 1447271410, "post_id": 33658662, "comment_id": 55090857, "body": "thanks @Jasper, it is a bad name for the question :) but &#39;regular expression in python&#39; was already asked"}], "answers": [{"tags": [], "owner": {"reputation": 3711, "user_id": 3456281, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6fb5e6fa4617d883de24fe3cc4372898?s=128&d=identicon&r=PG&f=1", "display_name": "Jasper", "link": "https://stackoverflow.com/users/3456281/jasper"}, "is_accepted": false, "score": 1, "last_activity_date": 1447271705, "creation_date": 1447271705, "answer_id": 33658778, "question_id": 33658662, "link": "https://stackoverflow.com/questions/33658662/regular-expression-in-python-with-variable-strings/33658778#33658778", "title": "Regular expression in python with variable strings", "body": "<p>The following regexp should work:</p>\n\n<pre><code>(.*)_(SW|WW)\n</code></pre>\n\n<p>Match everything up to an underscore followed by either <code>SW</code> or <code>WW</code> and put this in the first matching group and the following <code>SW</code> or <code>WW</code> in the second group:</p>\n\n<pre><code>import re\n\nstrs = [\"Vladimir_SW_crop_mask_ERA.hdr\",\n        \"Ust_Ordynskiy_Buryatskiy_AO_SW_crop_mask_ERA.hdr\",\n        \"Ingush_WW_crop_mask.dat\"]\n\nfor s in strs:\n    print(re.match(\"(.*)_(SW|WW)\", s).groups())\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>('Vladimir', 'SW')\n('Ust_Ordynskiy_Buryatskiy_AO', 'SW')\n('Ingush', 'WW')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "is_accepted": true, "score": 2, "last_activity_date": 1447271730, "creation_date": 1447271730, "answer_id": 33658781, "question_id": 33658662, "link": "https://stackoverflow.com/questions/33658662/regular-expression-in-python-with-variable-strings/33658781#33658781", "title": "Regular expression in python with variable strings", "body": "<p>You can <a href=\"http://docs.python.org/3/library/stdtypes.html?highlight=partition#str.partition\" rel=\"nofollow\">partition</a> and <a href=\"http://docs.python.org/3/library/stdtypes.html?highlight=partition#str.rpartition\" rel=\"nofollow\">rpartition</a> to do this:</p>\n\n<pre><code>&gt;&gt;&gt; s = 'Vladimir_SW_crop_mask_ERA.hdr'\n&gt;&gt;&gt; s.partition('_crop')[0].rpartition('_')[::2]\n('Vladimir', 'SW')\n&gt;&gt;&gt; s = 'Ust_Ordynskiy_Buryatskiy_AO_SW_crop_mask_ERA.hdr'\n&gt;&gt;&gt; s.partition('_crop')[0].rpartition('_')[::2]\n('Ust_Ordynskiy_Buryatskiy_AO', 'SW')\n</code></pre>\n"}], "owner": {"reputation": 18736, "user_id": 308827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/28f523030f3ecd9c9f2ad23ca745cc65?s=128&d=identicon&r=PG", "display_name": "user308827", "link": "https://stackoverflow.com/users/308827/user308827"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 33658781, "answer_count": 2, "score": 0, "last_activity_date": 1447271730, "creation_date": 1447271270, "question_id": 33658662, "link": "https://stackoverflow.com/questions/33658662/regular-expression-in-python-with-variable-strings", "title": "Regular expression in python with variable strings", "body": "<p>I have the foll. strings in python:</p>\n\n<pre><code>Vladimir_SW_crop_mask_ERA.hdr\nUst_Ordynskiy_Buryatskiy_AO_SW_crop_mask_ERA.hdr\nIngush_WW_crop_mask.dat\n</code></pre>\n\n<p>I want to parse these strings such that:</p>\n\n<ol>\n<li><p>Get the crop type which can be either SW or WW</p></li>\n<li><p>Get the region name which is the text preceding _SW or _WW</p></li>\n</ol>\n\n<p>I was doing str.split('_')[0] to get region name, but that fails in case of <code>Ust_Ordynskiy_Buryatskiy_AO_SW_crop_mask_ERA.hdr</code>, where the region name is <code>Ust_Ordynskiy_Buryatskiy_AO</code></p>\n"}, {"tags": ["python", "django", "path"], "answers": [{"tags": [], "owner": {"reputation": 50179, "user_id": 594589, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/0f9d5953607841d6a50b843a1107e51e?s=128&d=identicon&r=PG", "display_name": "dm03514", "link": "https://stackoverflow.com/users/594589/dm03514"}, "is_accepted": true, "score": 2, "last_activity_date": 1447271302, "creation_date": 1447271302, "answer_id": 33658666, "question_id": 33658643, "link": "https://stackoverflow.com/questions/33658643/how-to-turn-back-path-levels/33658666#33658666", "title": "How to turn back path levels?", "body": "<p>You should be able to provide any directories to <code>TEMPLATE_DIRS</code> that django will use to search for templates</p>\n\n<p><a href=\"https://docs.djangoproject.com/en/1.8/ref/settings/#template-dirs\" rel=\"nofollow\">https://docs.djangoproject.com/en/1.8/ref/settings/#template-dirs</a></p>\n\n<p>you should be able to construct this using the <code>ROOT_PATH</code> to avoid referencing absolute paths directly; change for your specific path:</p>\n\n<pre><code>TEMPLATE_DIRS = (\n  os.path.join(ROOT_PATH, '..', '..', 'prog', 'templates'\n)\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 4581002, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff6f84b44b2d53ff904cf676bcd9787f?s=128&d=identicon&r=PG&f=1", "display_name": "fasolo", "link": "https://stackoverflow.com/users/4581002/fasolo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 33658666, "answer_count": 1, "score": 0, "last_activity_date": 1447271302, "creation_date": 1447271191, "question_id": 33658643, "link": "https://stackoverflow.com/questions/33658643/how-to-turn-back-path-levels", "title": "How to turn back path levels?", "body": "<p>i'm new in python world and i'm using python 3.4 and django 1.7\nWhen o put <code>DEBUG=True</code> in <em>settings.py</em> the browser shows me an error like: </p>\n\n<blockquote>\n  <p>Django tried loading these templates, in this order:\n  Using loader django.template.loaders.filesystem.Loader:\n  C:\\workspace_virtualenv34\\prog\\prog\\templates\\main_sites\\registration\\login.html (File does not exist)</p>\n</blockquote>\n\n<p>But my templates are in a different path: </p>\n\n<blockquote>\n  <p>C:\\workspace_virtualenv34\\prog\\templates\\</p>\n</blockquote>\n\n<p>In <em>settings.py</em> i set ROOT_PATH as: </p>\n\n<blockquote>\n  <p>ROOT_PATH = os.path.abspath(os.path.join(os.path.dirname( <strong>file</strong> ), os.pardir))</p>\n</blockquote>\n\n<p>Is there anyway to turn back path levels that solve this problem?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 12289, "user_id": 675568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1cfe53579fb7b2afd58949be94cf97e?s=128&d=identicon&r=PG", "display_name": "Tom Zych", "link": "https://stackoverflow.com/users/675568/tom-zych"}, "edited": false, "score": 0, "creation_date": 1447271173, "post_id": 33658598, "comment_id": 55090729, "body": "For one thing, <code>randrange()</code> takes 2 or 3 arguments. What output do you expect?"}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "reply_to_user": {"reputation": 12289, "user_id": 675568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1cfe53579fb7b2afd58949be94cf97e?s=128&d=identicon&r=PG", "display_name": "Tom Zych", "link": "https://stackoverflow.com/users/675568/tom-zych"}, "edited": false, "score": 1, "creation_date": 1447271388, "post_id": 33658598, "comment_id": 55090845, "body": "@TomZych: nope, one is enough."}, {"owner": {"reputation": 12289, "user_id": 675568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1cfe53579fb7b2afd58949be94cf97e?s=128&d=identicon&r=PG", "display_name": "Tom Zych", "link": "https://stackoverflow.com/users/675568/tom-zych"}, "reply_to_user": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1447271502, "post_id": 33658598, "comment_id": 55090913, "body": "@MartijnPieters: Whoops, didn&#39;t read carefully."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 1, "creation_date": 1447271545, "post_id": 33658598, "comment_id": 55090932, "body": "Did you mean to include <code>print()</code> in the loop? You probably meant to unindent that and print the newline <i>after</i> the loop has completed. Otherwise you may as well drop it and drop the <code>end=&#39;&#39;</code> argument."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1447271717, "post_id": 33658598, "comment_id": 55091016, "body": "And last but not least: don&#39;t just state that it <i>doesn&#39;t work</i>. What <i>should</i> happen when it <i>does</i> work? What output where you expecting?"}, {"owner": {"reputation": 131, "user_id": 5401830, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f4907056931102955310c1c582d2d9cd?s=128&d=identicon&r=PG&f=1", "display_name": "KitKat", "link": "https://stackoverflow.com/users/5401830/kitkat"}, "edited": false, "score": 0, "creation_date": 1447272318, "post_id": 33658598, "comment_id": 55091336, "body": "Why have my question downgraded?"}, {"owner": {"reputation": 6529, "user_id": 4252320, "user_type": "registered", "accept_rate": 59, "profile_image": "https://lh3.googleusercontent.com/-_DAs7Dtci9U/AAAAAAAAAAI/AAAAAAAAIf8/96ZNJAUF2Xk/photo.jpg?sz=128", "display_name": "ergonaut", "link": "https://stackoverflow.com/users/4252320/ergonaut"}, "edited": false, "score": 0, "creation_date": 1447272397, "post_id": 33658598, "comment_id": 55091388, "body": "please provide feedback, and answer all the comments.  We are unsure what you are looking for."}], "answers": [{"tags": [], "owner": {"reputation": 6529, "user_id": 4252320, "user_type": "registered", "accept_rate": 59, "profile_image": "https://lh3.googleusercontent.com/-_DAs7Dtci9U/AAAAAAAAAAI/AAAAAAAAIf8/96ZNJAUF2Xk/photo.jpg?sz=128", "display_name": "ergonaut", "link": "https://stackoverflow.com/users/4252320/ergonaut"}, "is_accepted": false, "score": 1, "last_activity_date": 1447271375, "creation_date": 1447271375, "answer_id": 33658684, "question_id": 33658598, "link": "https://stackoverflow.com/questions/33658598/randrange-inside-for-loop-in-python-3-5/33658684#33658684", "title": "randrange inside for loop in python 3.5", "body": "<p>you have to use range.</p>\n\n<pre><code>for x in range(random.randrange(100)):\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "is_accepted": true, "score": 2, "last_activity_date": 1447271445, "creation_date": 1447271445, "answer_id": 33658708, "question_id": 33658598, "link": "https://stackoverflow.com/questions/33658598/randrange-inside-for-loop-in-python-3-5/33658708#33658708", "title": "randrange inside for loop in python 3.5", "body": "<p><code>random.randrange()</code> returns <strong>one integer</strong>, taken from the given range. It does not produce an iterable sequence.</p>\n\n<p>If you wanted to produce a <code>range()</code> iterable of random length, you need to pass the result of <code>randrange()</code> to <code>range()</code>, explicitly:</p>\n\n<pre><code>for x in range(random.randrange(100)):\n</code></pre>\n\n<p>Rather than use a loop, you can have <code>print()</code> print all values in one go:</p>\n\n<pre><code>print(*range(random.randrange(100)))\nprint(*range(random.randrange(100)))\n</code></pre>\n\n<p>The <code>*</code> syntax unpacks the <code>range()</code> iterable into separate arguments.</p>\n\n<p>Demo:</p>\n\n<pre><code>&gt;&gt;&gt; import random\n&gt;&gt;&gt; print(*range(random.randrange(100)))\n0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70\n&gt;&gt;&gt; print(*range(random.randrange(100)))\n0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 136, "user_id": 5552085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b95471a63d49bda33cd1ef1ff62e2e4a?s=128&d=identicon&r=PG&f=1", "display_name": "B. Fuller", "link": "https://stackoverflow.com/users/5552085/b-fuller"}, "is_accepted": false, "score": 1, "last_activity_date": 1447271992, "creation_date": 1447271992, "answer_id": 33658842, "question_id": 33658598, "link": "https://stackoverflow.com/questions/33658598/randrange-inside-for-loop-in-python-3-5/33658842#33658842", "title": "randrange inside for loop in python 3.5", "body": "<p>random.randrange() produces a number, which is not iterable.  You need to produce a list or some other iterable type as \"y\" in order to use \"for x in y:\"</p>\n\n<p>You can use the range() function to do that.  Here, the range function produces a list of integer values from 0 up to 99, which you can iterate in a for loop:</p>\n\n<pre><code>for x in range(random.randrange(100)):\n    print(x)\n</code></pre>\n"}], "owner": {"reputation": 131, "user_id": 5401830, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f4907056931102955310c1c582d2d9cd?s=128&d=identicon&r=PG&f=1", "display_name": "KitKat", "link": "https://stackoverflow.com/users/5401830/kitkat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1477, "favorite_count": 0, "accepted_answer_id": 33658708, "answer_count": 3, "score": -2, "last_activity_date": 1617537492, "creation_date": 1447271026, "last_edit_date": 1447271662, "question_id": 33658598, "link": "https://stackoverflow.com/questions/33658598/randrange-inside-for-loop-in-python-3-5", "title": "randrange inside for loop in python 3.5", "body": "<p>Please explain why the following code doesn't work. </p>\n\n<pre><code>import random\nfor x in random.randrange(100):\n    print(x, end='')\n    print()\nfor y in random.randrange(100):\n    print(y, end='')\n    print()\n</code></pre>\n"}, {"tags": ["python", "regex"], "answers": [{"tags": [], "owner": {"reputation": 94141, "user_id": 2867928, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a8DM1.jpg?s=128&g=1", "display_name": "kasravnd", "link": "https://stackoverflow.com/users/2867928/kasravnd"}, "is_accepted": true, "score": 1, "last_activity_date": 1447271185, "creation_date": 1447271185, "answer_id": 33658640, "question_id": 33658582, "link": "https://stackoverflow.com/questions/33658582/how-to-escape-all-special-character-for-regex-in-python/33658640#33658640", "title": "How to escape all special character for regex in python", "body": "<p>You can use <code>re.escape()</code> to escape the special characters :</p>\n\n<pre><code>&gt;&gt;&gt; s = \"11 (1)\" \n&gt;&gt;&gt; import re\n&gt;&gt;&gt; \n&gt;&gt;&gt; re.escape(s)\n'11\\\\ \\\\(1\\\\)'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1493, "user_id": 5286625, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/224bf5e812e82acaa1a4a300942577a9?s=128&d=identicon&r=PG&f=1", "display_name": "KDD", "link": "https://stackoverflow.com/users/5286625/kdd"}, "edited": false, "score": 0, "creation_date": 1447273883, "post_id": 33658644, "comment_id": 55092154, "body": "Thank you! In this example I agree, but sometimes I need to provide a regex object for some API"}], "tags": [], "owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "is_accepted": false, "score": 1, "last_activity_date": 1447271193, "creation_date": 1447271193, "answer_id": 33658644, "question_id": 33658582, "link": "https://stackoverflow.com/questions/33658582/how-to-escape-all-special-character-for-regex-in-python/33658644#33658644", "title": "How to escape all special character for regex in python", "body": "<p>If you're ignoring all special characters, why use regex at all?  You're effectively doing a straight plain text comparison at that point.</p>\n\n<pre><code>for p in patterns:\n    if p in text:\n        # do something\n</code></pre>\n"}], "owner": {"reputation": 1493, "user_id": 5286625, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/224bf5e812e82acaa1a4a300942577a9?s=128&d=identicon&r=PG&f=1", "display_name": "KDD", "link": "https://stackoverflow.com/users/5286625/kdd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2280, "favorite_count": 0, "accepted_answer_id": 33658640, "answer_count": 2, "score": 1, "last_activity_date": 1447271193, "creation_date": 1447270962, "question_id": 33658582, "link": "https://stackoverflow.com/questions/33658582/how-to-escape-all-special-character-for-regex-in-python", "title": "How to escape all special character for regex in python", "body": "<p>I just wonder whether there's a way to ignore <strong>all</strong> special characters in my pattern string, rather than adding \"\\\" to all of them. </p>\n\n<p>For example, I have a very long list of patterns: </p>\n\n<pre><code>patterns = [\"11 (1)\", \"22 (2)\", ... ]\n</code></pre>\n\n<p>I want to search the patterns in a text using a for loop:</p>\n\n<pre><code>for p in patterns:\n    if re.search(\"%s\" % p,text):\n        # do something\n</code></pre>\n\n<p>This code definitely won't work because I got parenthesis in my patterns. Adding \"\\\" to all special characters will solve this problem, but that looks pretty dumb. </p>\n\n<p>I wonder is there a better way to do this?? Like, using a magic quote symbol to escape all special characters in regex? Thank you! </p>\n"}, {"tags": ["python", "arrays", "python-2.7", "multidimensional-array", "median"], "answers": [{"tags": [], "owner": {"reputation": 111, "user_id": 4905796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1a1f7e1f3af3d7ad1aababfaad9c1f4?s=128&d=identicon&r=PG", "display_name": "Rishi", "link": "https://stackoverflow.com/users/4905796/rishi"}, "is_accepted": false, "score": 0, "last_activity_date": 1447272248, "creation_date": 1447272248, "answer_id": 33658900, "question_id": 33658580, "link": "https://stackoverflow.com/questions/33658580/find-the-median-of-each-row-of-a-2-dimensional-array/33658900#33658900", "title": "Find the median of each row of a 2 dimensional array", "body": "<p>First, the obvious variable naming errors: <code>Matrix</code> is not defined.  You probably meant <code>list</code>, or you meant to name the function argument as <code>Matrix</code>. Btw <code>list</code> is not a good variable name to have, as there is Python data type <code>list</code>.  Also <code>Matrix</code> isn't a good name either, as it's good practice to have variable names lowercase.  Also, <code>srtd</code> is not defined.</p>\n\n<p>Once you correct the naming errors, then the next problem is <code>sorted(xyz)</code> does not modify <code>xyz</code>, but returns a sorted copy of <code>xyz</code>.  So you need to assign it to something.  Well, don't assign it back to <code>Matrix[lineindex]</code>, because then the function will have the undesirable side effect of changing the input matrix passed to it.</p>\n"}, {"tags": [], "owner": {"reputation": 83, "user_id": 2600569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12a151daa9271c89ef9d96277635f900?s=128&d=identicon&r=PG", "display_name": "SydHenry", "link": "https://stackoverflow.com/users/2600569/sydhenry"}, "is_accepted": false, "score": 0, "last_activity_date": 1447273459, "creation_date": 1447273459, "answer_id": 33659166, "question_id": 33658580, "link": "https://stackoverflow.com/questions/33658580/find-the-median-of-each-row-of-a-2-dimensional-array/33659166#33659166", "title": "Find the median of each row of a 2 dimensional array", "body": "<p>This should help you out a bit. As @Rishi said, there were a lot of variable name issues.</p>\n\n<pre><code>def median_rows(matrix):\n    for line in matrix:  # line is each row of the matrix\n        sorted_line = sorted(line)  # have to set the sorted line to a variable\n        mid_point = len(sorted_line) / 2  # only need to do one, because we know the upper index will always be the one after the midpoint\n        if len(line) % 2 == 0:\n            # have to take avg of middle two\n            median = (sorted_line[mid_point] + sorted_line[mid_point + 1]) / 2.0\n            print \"The median is %f\" % median  \n        else:\n            median = line[mid_point]\n            print \"The median is %d\" % median\n\nmatrix = [[1,2,3,5],[1,2,3,7]]\n\nmedian_rows(matrix)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 29117, "user_id": 1587329, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/UWmiP.png?s=128&g=1", "display_name": "serv-inc", "link": "https://stackoverflow.com/users/1587329/serv-inc"}, "is_accepted": false, "score": 2, "last_activity_date": 1517326295, "creation_date": 1517326295, "answer_id": 48525055, "question_id": 33658580, "link": "https://stackoverflow.com/questions/33658580/find-the-median-of-each-row-of-a-2-dimensional-array/48525055#48525055", "title": "Find the median of each row of a 2 dimensional array", "body": "<p>If you want to keep things simple, use <a href=\"http://www.numpy.org/\" rel=\"nofollow noreferrer\">numpy</a>'s <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.median.html\" rel=\"nofollow noreferrer\"><code>median</code></a>:</p>\n\n<pre><code>matrix = numpy.array(zip(range(10), [x+1 for x in range(10)])).T\n# array([[ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9],\n#        [ 1,  2,  3,  4,  5,  6,  7,  8,  9, 10]])\nnp.median(matrix, axis=1) # array([ 4.5,  5.5])\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 5552013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d50962dded3e75057fc4a0149712fccd?s=128&d=identicon&r=PG&f=1", "display_name": "Padraig O Connor", "link": "https://stackoverflow.com/users/5552013/padraig-o-connor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1490, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1517326582, "creation_date": 1447270954, "last_edit_date": 1517326338, "question_id": 33658580, "link": "https://stackoverflow.com/questions/33658580/find-the-median-of-each-row-of-a-2-dimensional-array", "title": "Find the median of each row of a 2 dimensional array", "body": "<p>I am trying to find the median of each row of a 2 dimensional array. This is what I have tried so far but I cannot get it to work. Any help would be greatly appreciated.</p>\n\n<pre><code>def median_rows(list):            \n    for lineindex in range(len(Matrix)):\n        sorted(Matrix[lineindex])\n\n        mid_upper = ((len(Matrix[lineindex]))/2\n        mid_lower = ((len(Matrix[lineindex])+1)/2\n        if len(Matrix[lineindex])%2 == 0:\n            #have to take avg of middle two\n            median = (Matrix[mid_lower] + Matrix[mid_upper])/2.0\n            print \"The median is %f\" %median\n       else:\n            median = srtd[mid]  \n            print \"The median is %d\" %median\n\n\nmedian_rows(Matrix)\n</code></pre>\n"}, {"tags": ["python", "list", "function", "append"], "comments": [{"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 1, "creation_date": 1447271092, "post_id": 33658537, "comment_id": 55090699, "body": "You look up <code>new[x]</code> four times."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1447271196, "post_id": 33658537, "comment_id": 55090747, "body": "How much memory do you have? You&#39;re using a ton of it."}, {"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 1, "creation_date": 1447271269, "post_id": 33658537, "comment_id": 55090781, "body": "You only need one row at a time, but appear to read the whole file into memory."}, {"owner": {"reputation": 111, "user_id": 4905796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1a1f7e1f3af3d7ad1aababfaad9c1f4?s=128&d=identicon&r=PG", "display_name": "Rishi", "link": "https://stackoverflow.com/users/4905796/rishi"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1447273081, "post_id": 33658537, "comment_id": 55091726, "body": "As @user2357112 said, you are using a ton of memory. Each element of <code>list_a</code> has length 1115 + 7 + 1 = 1123, and <code>list_a</code> has 1017209 elements. So, roughly 1k x 1m = 1g numbers you&#39;re trying to store. So, the memory consumption is easily around 4 GB, 8 GB. And much of it is just zeros, so you should take advantage of that sparsity somehow."}], "answers": [{"comments": [{"owner": {"reputation": 184, "user_id": 5542451, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10205696118778225/picture?type=large", "display_name": "Bal&#225;zs Feh&#233;r", "link": "https://stackoverflow.com/users/5542451/bal%c3%a1zs-feh%c3%a9r"}, "edited": false, "score": 0, "creation_date": 1447348205, "post_id": 33658898, "comment_id": 55127487, "body": "@Rishi indeed, I run into a memory problem. I started using csv.reader but it still does not work, at around line 320,000 my memory usage is at 95% and it basically stops.   I figured the vectorized_id() causes the problem as it gives a 1115 length vector for each line. So it would produce a list of several GBs as Rishi mentioned right? Then I guess I should save intermediate results on hard drive, and empty memory. Any tips on how to do that?"}, {"owner": {"reputation": 11119, "user_id": 109427, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4CEEX.jpg?s=128&g=1", "display_name": "John Percival Hackworth", "link": "https://stackoverflow.com/users/109427/john-percival-hackworth"}, "reply_to_user": {"reputation": 184, "user_id": 5542451, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10205696118778225/picture?type=large", "display_name": "Bal&#225;zs Feh&#233;r", "link": "https://stackoverflow.com/users/5542451/bal%c3%a1zs-feh%c3%a9r"}, "edited": false, "score": 1, "creation_date": 1447350611, "post_id": 33658898, "comment_id": 55128993, "body": "As @Rishi mentioned, you&#39;re using a lot of memory. If you really need to have all the records you&#39;re generating, you&#39;ll probably need to write them to files and reload the files later when you need them."}], "tags": [], "owner": {"reputation": 11119, "user_id": 109427, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4CEEX.jpg?s=128&g=1", "display_name": "John Percival Hackworth", "link": "https://stackoverflow.com/users/109427/john-percival-hackworth"}, "is_accepted": false, "score": 1, "last_activity_date": 1447272238, "creation_date": 1447272238, "answer_id": 33658898, "question_id": 33658537, "link": "https://stackoverflow.com/questions/33658537/efficient-list-operations/33658898#33658898", "title": "Efficient list operations", "body": "<p>A couple of things:</p>\n\n<ol>\n<li>Don't read in the entire file at once, you don't appear to be doing anything that requires multiple lines.</li>\n<li>Look at using <a href=\"https://docs.python.org/3/library/csv.html#csv.reader\" rel=\"nofollow\"><code>csv.reader</code></a> for loading your data.</li>\n<li>Really stop indexing in the giant <code>new</code> list.</li>\n</ol>\n"}], "owner": {"reputation": 184, "user_id": 5542451, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10205696118778225/picture?type=large", "display_name": "Bal&#225;zs Feh&#233;r", "link": "https://stackoverflow.com/users/5542451/bal%c3%a1zs-feh%c3%a9r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1447272238, "creation_date": 1447270801, "last_edit_date": 1447270954, "question_id": 33658537, "link": "https://stackoverflow.com/questions/33658537/efficient-list-operations", "title": "Efficient list operations", "body": "<p>I have a large matrix (1,017,209 rows) from which I need to read out elements, make operations on them, and collecting the results into lists. When I do it on 10,000 rows or even 100,000 it finishes in a reasonable time, however 1,000,000 does not. Here is my code:</p>\n\n<pre><code>import pandas as pd\n\ndata = pd.read_csv('scaled_train.csv', index_col=False, header=0)\nnew = data.as_matrix()\n\ndef vectorized_id(j):\n    \"\"\"Return a 1115-dimensional unit vector with a 1.0 in the j-1'th position\n    and zeroes elsewhere.  This is used to convert the store ids (1...1115)\n    into a corresponding desired input for the neural network.\n    \"\"\"\n    j = j - 1    \n    e = [0] * 1115\n    e[j] = 1.0\n    return e\n\ndef vectorized_day(j):\n    \"\"\"Return a 7-dimensional unit vector with a 1.0 in the j-1'th position\n    and zeroes elsewhere.  This is used to convert the days (1...7)\n    into a corresponding desired input for the neural network.\n    \"\"\"\n    j = j - 1\n    e = [0] * 7\n    e[j] = 1.0\n    return e\n\nlist_b = []\nlist_a = []\n\nfor x in xrange(0,1017209):\n    a1 = vectorized_id(new[x][0])\n    a2 = vectorized_day(new[x][1])\n    a3 = [new[x][5]]\n    a = a1 + a2 + a3\n    b = new[x][3]\n    list_a.append(a)\n    list_b.append(b)\n</code></pre>\n\n<p>What makes it slow at that scale (what is the bottleneck)? Are there ways to optimize it?</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 59346, "user_id": 444036, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/My2AZ.jpg?s=128&g=1", "display_name": "Paulo Scardine", "link": "https://stackoverflow.com/users/444036/paulo-scardine"}, "edited": false, "score": 0, "creation_date": 1447270626, "post_id": 33658448, "comment_id": 55090445, "body": "Yes, it is possible. Posting a sample file and the code you have tried so far would vastly improve this question."}], "answers": [{"tags": [], "owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "is_accepted": false, "score": 0, "last_activity_date": 1447270619, "creation_date": 1447270619, "answer_id": 33658484, "question_id": 33658448, "link": "https://stackoverflow.com/questions/33658448/is-it-possible-to-use-data-in-a-txt-file-as-variables-in-a-conditional-statemen/33658484#33658484", "title": "Is it Possible to Use data in a .txt file as variables in a conditional statement", "body": "<p>Yes, you may use data read from a text file to drive a conditional statement. You must <code>.read()</code> the data and store it in a variable. Like so:</p>\n\n<pre><code>with open(\"input.txt\") as input_file:\n    text = input_file.read()\nstrings = text.split()\nnumbers = [int(item) for item in strings]\n</code></pre>\n\n<p>Now all of your numbers are stored in the list <code>numbers</code>. To print out only the odd ones:</p>\n\n<pre><code>odds = [number for number in numbers if number % 2 == 1]\nprint(odds)\n</code></pre>\n\n<p>Or, if you prefer not to use list comprehensions:</p>\n\n<pre><code>for number in numbers:\n    if number % 2 == 1:\n        print(number)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5536848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7250b8895cdb439be7fbaa9ca3e97102?s=128&d=identicon&r=PG&f=1", "display_name": "notyournachos", "link": "https://stackoverflow.com/users/5536848/notyournachos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1447273454, "creation_date": 1447270440, "last_edit_date": 1447273454, "question_id": 33658448, "link": "https://stackoverflow.com/questions/33658448/is-it-possible-to-use-data-in-a-txt-file-as-variables-in-a-conditional-statemen", "title": "Is it Possible to Use data in a .txt file as variables in a conditional statement", "body": "<p>Just wondering if it would be possible for data in an opened .txt file to be used in a conditional statement as variables? Internet Explorer says if you had a list of numbers in a saved text file, but only want to display odd integers in a list in python. (I've only been programming for a few months as a newbie) How would you go about doing this? </p>\n\n<p>Thank.</p>\n"}, {"tags": ["python", "python-2.7", "numpy", "import", "scikit-learn"], "answers": [{"tags": [], "owner": {"reputation": 174, "user_id": 3213566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/199f245e018a477b1093f36cfd67292d?s=128&d=identicon&r=PG", "display_name": "metasyn", "link": "https://stackoverflow.com/users/3213566/metasyn"}, "is_accepted": false, "score": 0, "last_activity_date": 1447271124, "creation_date": 1447271124, "answer_id": 33658624, "question_id": 33658423, "link": "https://stackoverflow.com/questions/33658423/weight-for-baggingclassifier-in-python/33658624#33658624", "title": "Weight for BaggingClassifier in python", "body": "<p>The shape of <code>sample_weight</code> needs to be <a href=\"http://scikit-learn.org/stable/modules/generated/sklearn.ensemble.BaggingClassifier.html#sklearn.ensemble.BaggingClassifier.fit\" rel=\"nofollow\">equal to the number of items</a> in <code>XTrain</code></p>\n\n<pre><code>sample_weight : array-like, shape = [n_samples] or None\n</code></pre>\n\n<p>Note however:</p>\n\n<blockquote>\n  <p>Sample weights. If None, then samples are equally weighted. Note that this is supported only if the base estimator supports sample weighting.</p>\n</blockquote>\n"}], "owner": {"reputation": 2109, "user_id": 5425511, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/78111643f469a17eba110aa8cb5ace4c?s=128&d=identicon&r=PG&f=1", "display_name": "Talia ", "link": "https://stackoverflow.com/users/5425511/talia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 270, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1447644642, "creation_date": 1447270373, "last_edit_date": 1447644642, "question_id": 33658423, "link": "https://stackoverflow.com/questions/33658423/weight-for-baggingclassifier-in-python", "title": "Weight for BaggingClassifier in python", "body": "<p>I want to use different weight for BaggingClassifier in sklearn.\nFor Type with value 1,2,3 and for i need weight 1, 30, 30 and 30 respectedly.\n<a href=\"http://scikit-learn.org/stable/modules/generated/sklearn.ensemble.BaggingClassifier.html#sklearn.ensemble.BaggingClassifier.fit\" rel=\"nofollow\">http://scikit-learn.org/stable/modules/generated/sklearn.ensemble.BaggingClassifier.html#sklearn.ensemble.BaggingClassifier.fit</a></p>\n\n<p>This is my code:</p>\n\n<pre><code> sample_weight=[1,30,30,30]\nbagging.fit(XTrain,yTrain,sample_weight)\n</code></pre>\n\n<p>This doesn't work. Could you please guide me what the correct format is?</p>\n\n<p>based on the helps given here, i did the following:</p>\n\n<pre><code>bagging.fit(XTrain,yTrain,sample_weight=w)\n</code></pre>\n\n<p>and w shape is <code>('w.shape', (417, 1))</code> and <code>('XTrain.shape', (417, 7))</code>, <code>yTrain.shape (417,)</code>\ni receive the following error:<code>ValueError: could not broadcast input array from shape (417,417) into shape (417,1)</code></p>\n"}, {"tags": ["python", "macos", "pip"], "comments": [{"owner": {"reputation": 67949, "user_id": 297696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/782a7a5f79b342bb12dc0aaae3a0c34d?s=128&d=identicon&r=PG", "display_name": "wkl", "link": "https://stackoverflow.com/users/297696/wkl"}, "edited": false, "score": 0, "creation_date": 1447270710, "post_id": 33658381, "comment_id": 55090489, "body": "That tutorial provides some pretty outdated information - you should follow the <a href=\"http://pip.readthedocs.org/en/stable/installing/\" rel=\"nofollow noreferrer\">official <code>pip</code> install directions</a> to install it - you don&#39;t have to actually use setuptools directly anymore. To answer your immediate question, though - <code>which</code> locates the executable program in a path, and <code>&#47;usr&#47;bin</code> generally only stores executable files. The real path to where the default <code>python</code> installation is on a Mac is: <code>&#47;System&#47;Library&#47;Frameworks&#47;Python.framework&#47;Versions&#47;(versio&zwnj;&#8203;n)&#47;lib</code>."}, {"owner": {"reputation": 9743, "user_id": 1120027, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/6CuUV.jpg?s=128&g=1", "display_name": "JGallardo", "link": "https://stackoverflow.com/users/1120027/jgallardo"}, "reply_to_user": {"reputation": 67949, "user_id": 297696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/782a7a5f79b342bb12dc0aaae3a0c34d?s=128&d=identicon&r=PG", "display_name": "wkl", "link": "https://stackoverflow.com/users/297696/wkl"}, "edited": false, "score": 0, "creation_date": 1447270851, "post_id": 33658381, "comment_id": 55090589, "body": "@birryree ok i managed to get pip installed by just following the accepted answer on <a href=\"http://stackoverflow.com/questions/17271319/installing-pip-on-mac-os-x\" title=\"installing pip on mac os x\">stackoverflow.com/questions/17271319/installing-pip-on-mac-o&zwnj;&#8203;s-x</a> . so wondering if I should remove the question or edit it to be useful if someone does need to get into the python directory"}], "owner": {"reputation": 9743, "user_id": 1120027, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/6CuUV.jpg?s=128&g=1", "display_name": "JGallardo", "link": "https://stackoverflow.com/users/1120027/jgallardo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1447270243, "creation_date": 1447270243, "last_edit_date": 1592644375, "question_id": 33658381, "link": "https://stackoverflow.com/questions/33658381/how-to-get-into-the-python-directory", "title": "How to get into the python directory", "body": "<h2>objective</h2>\n<p>Install <strong>pip</strong>. But I need to install a few other dependencies on my mac. I need to check a few things in the python directory.</p>\n<h2>Background</h2>\n<p>This would seem simple enough. I am following along to a tutorial <a href=\"http://simpledeveloper.com/how-to-install-pip/\" rel=\"nofollow noreferrer\">http://simpledeveloper.com/how-to-install-pip/</a></p>\n<p>I am currently at the part of the tutorial where they have you</p>\n<blockquote>\n4)Verify that easy_install is inside Scripts sub-folder - See more at: http://simpledeveloper.com/how-to-install-pip/#sthash.ZKCMs26K.dpuf\n</blockquote>\n<p>But now they want me to</p>\n<blockquote>\ngo to your Python directory (where you installed Python) and open the Scripts sub-folder. Look inside it and make sure that you can see easy_install \u2013 an executable file.\n</blockquote>\n<p>The tutorial is aimed for PC users. I am on a mac. I found the python directory by running</p>\n<pre><code>which python\n</code></pre>\n<p>which gave me the result</p>\n<p><a href=\"https://i.stack.imgur.com/361hw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/361hw.png\" alt=\"enter image description here\" /></a></p>\n"}, {"tags": ["python", "pipeline", "infix-notation"], "answers": [{"comments": [{"owner": {"reputation": 508, "user_id": 2317696, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ec9ca534c06088b44a188c0744b7f142?s=128&d=identicon&r=PG", "display_name": "Malthus", "link": "https://stackoverflow.com/users/2317696/malthus"}, "edited": false, "score": 0, "creation_date": 1447365276, "post_id": 33661327, "comment_id": 55137211, "body": "Thanks for your response. Would it be possible to make a separate class (like SinkInto) for each function to avoid having to pass the functions as an argument?"}, {"owner": {"reputation": 508, "user_id": 2317696, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ec9ca534c06088b44a188c0744b7f142?s=128&d=identicon&r=PG", "display_name": "Malthus", "link": "https://stackoverflow.com/users/2317696/malthus"}, "edited": false, "score": 0, "creation_date": 1447451753, "post_id": 33661327, "comment_id": 55176917, "body": "Awesome! That looks perfect, but unfortunately I&#39;m getting an error. Here is my code: <a href=\"http://pastebin.com/Qss4HrEK\" rel=\"nofollow noreferrer\">link</a>. Not sure what I&#39;m missing."}, {"owner": {"reputation": 59346, "user_id": 444036, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/My2AZ.jpg?s=128&g=1", "display_name": "Paulo Scardine", "link": "https://stackoverflow.com/users/444036/paulo-scardine"}, "reply_to_user": {"reputation": 508, "user_id": 2317696, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ec9ca534c06088b44a188c0744b7f142?s=128&d=identicon&r=PG", "display_name": "Malthus", "link": "https://stackoverflow.com/users/2317696/malthus"}, "edited": false, "score": 0, "creation_date": 1447672415, "post_id": 33661327, "comment_id": 55236445, "body": "Sorry, I swear I tested it before posting, but now I was able to reproduce the same error you got. I&#39;ve updated the answer with a working version of the decorator."}, {"owner": {"reputation": 9302, "user_id": 611116, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/uuQsM.jpg?s=128&g=1", "display_name": "OHL&#193;L&#193;", "link": "https://stackoverflow.com/users/611116/ohl%c3%81l%c3%81"}, "edited": false, "score": 0, "creation_date": 1511422359, "post_id": 33661327, "comment_id": 81854472, "body": "The problem with this solution is when you are trying to call the function instead of piping."}, {"owner": {"reputation": 59346, "user_id": 444036, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/My2AZ.jpg?s=128&g=1", "display_name": "Paulo Scardine", "link": "https://stackoverflow.com/users/444036/paulo-scardine"}, "reply_to_user": {"reputation": 9302, "user_id": 611116, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/uuQsM.jpg?s=128&g=1", "display_name": "OHL&#193;L&#193;", "link": "https://stackoverflow.com/users/611116/ohl%c3%81l%c3%81"}, "edited": false, "score": 0, "creation_date": 1511445869, "post_id": 33661327, "comment_id": 81869125, "body": "@OHL&#193;L&#193; it should be easy enough to fix by adding a <code>__call__</code> method."}, {"owner": {"reputation": 9302, "user_id": 611116, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/uuQsM.jpg?s=128&g=1", "display_name": "OHL&#193;L&#193;", "link": "https://stackoverflow.com/users/611116/ohl%c3%81l%c3%81"}, "edited": false, "score": 0, "creation_date": 1511512260, "post_id": 33661327, "comment_id": 81892644, "body": "@PauloScardine In that case you need to call the object explicitly: pipe= select(df, &#39;one&#39;) pipe() Is there a way to avoid that?"}, {"owner": {"reputation": 59346, "user_id": 444036, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/My2AZ.jpg?s=128&g=1", "display_name": "Paulo Scardine", "link": "https://stackoverflow.com/users/444036/paulo-scardine"}, "edited": false, "score": 0, "creation_date": 1511527792, "post_id": 33661327, "comment_id": 81901838, "body": "There are some options. Not sure if a proper solution deserves its own question or if I should just amend this answer."}, {"owner": {"reputation": 9302, "user_id": 611116, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/uuQsM.jpg?s=128&g=1", "display_name": "OHL&#193;L&#193;", "link": "https://stackoverflow.com/users/611116/ohl%c3%81l%c3%81"}, "edited": false, "score": 0, "creation_date": 1511531461, "post_id": 33661327, "comment_id": 81903946, "body": "I added a new question here: <a href=\"https://stackoverflow.com/questions/47474704/how-can-i-create-a-chain-pipeline\" title=\"how can i create a chain pipeline\">stackoverflow.com/questions/47474704/&hellip;</a>"}], "tags": [], "owner": {"reputation": 59346, "user_id": 444036, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/My2AZ.jpg?s=128&g=1", "display_name": "Paulo Scardine", "link": "https://stackoverflow.com/users/444036/paulo-scardine"}, "is_accepted": true, "score": 29, "last_activity_date": 1511532428, "last_edit_date": 1511532428, "creation_date": 1447282118, "answer_id": 33661327, "question_id": 33658355, "link": "https://stackoverflow.com/questions/33658355/piping-output-from-one-function-to-another-using-python-infix-syntax/33661327#33661327", "title": "&quot;Piping&quot; output from one function to another using Python infix syntax", "body": "<p>It is hard to implement this using the bitwise <code>or</code> operator because <code>pandas.DataFrame</code> implements it. If you don't mind replacing <code>|</code> with <code>&gt;&gt;</code>, you can try this:</p>\n\n<pre><code>import pandas as pd\n\ndef select(df, *args):\n    cols = [x for x in args]\n    return df[cols]\n\n\ndef rename(df, **kwargs):\n    for name, value in kwargs.items():\n        df = df.rename(columns={'%s' % name: '%s' % value})\n    return df\n\n\nclass SinkInto(object):\n    def __init__(self, function, *args, **kwargs):\n        self.args = args\n        self.kwargs = kwargs\n        self.function = function\n\n    def __rrshift__(self, other):\n        return self.function(other, *self.args, **self.kwargs)\n\n    def __repr__(self):\n        return \"&lt;SinkInto {} args={} kwargs={}&gt;\".format(\n            self.function, \n            self.args, \n            self.kwargs\n        )\n\ndf = pd.DataFrame({'one' : [1., 2., 3., 4., 4.],\n                   'two' : [4., 3., 2., 1., 3.]})\n</code></pre>\n\n<p>Then you can do:</p>\n\n<pre><code>&gt;&gt;&gt; df\n   one  two\n0    1    4\n1    2    3\n2    3    2\n3    4    1\n4    4    3\n\n&gt;&gt;&gt; df = df &gt;&gt; SinkInto(select, 'one') \\\n            &gt;&gt; SinkInto(rename, one='new_one')\n&gt;&gt;&gt; df\n   new_one\n0        1\n1        2\n2        3\n3        4\n4        4\n</code></pre>\n\n<p>In Python 3 you can abuse unicode:</p>\n\n<pre><code>&gt;&gt;&gt; print('\\u01c1')\n\u01c1\n&gt;&gt;&gt; \u01c1 = SinkInto\n&gt;&gt;&gt; df &gt;&gt; \u01c1(select, 'one') &gt;&gt; \u01c1(rename, one='new_one')\n   new_one\n0        1\n1        2\n2        3\n3        4\n4        4\n</code></pre>\n\n<p>[update]</p>\n\n<blockquote>\n  <p>Thanks for your response. Would it be possible to make a separate class (like SinkInto) for each function to avoid having to pass the functions as an argument?</p>\n</blockquote>\n\n<h2>How about a decorator?</h2>\n\n<pre><code>def pipe(original):\n    class PipeInto(object):\n        data = {'function': original}\n\n        def __init__(self, *args, **kwargs):\n            self.data['args'] = args\n            self.data['kwargs'] = kwargs\n\n        def __rrshift__(self, other):\n            return self.data['function'](\n                other, \n                *self.data['args'], \n                **self.data['kwargs']\n            )\n\n    return PipeInto\n\n\n@pipe\ndef select(df, *args):\n    cols = [x for x in args]\n    return df[cols]\n\n\n@pipe\ndef rename(df, **kwargs):\n    for name, value in kwargs.items():\n        df = df.rename(columns={'%s' % name: '%s' % value})\n    return df\n</code></pre>\n\n<p>Now you can decorate any function that takes a <code>DataFrame</code> as the first argument:</p>\n\n<pre><code>&gt;&gt;&gt; df &gt;&gt; select('one') &gt;&gt; rename(one='first')\n   first\n0      1\n1      2\n2      3\n3      4\n4      4\n</code></pre>\n\n<h2>Python is awesome!</h2>\n\n<p>I know that languages like Ruby are \"so expressive\" that it encourages people to write every program as new DSL, but this is kind of frowned upon in Python. Many Pythonists consider operator overloading for a different purpose as a sinful blasphemy.</p>\n\n<h2>[update]</h2>\n\n<p>User OHL\u00c1L\u00c1 is not impressed:</p>\n\n<blockquote>\n  <p>The problem with this solution is when you are trying to call the function instead of piping. \u2013 OHL\u00c1L\u00c1</p>\n</blockquote>\n\n<p>You can implement the dunder-call method:</p>\n\n<pre><code>def __call__(self, df):\n    return df &gt;&gt; self\n</code></pre>\n\n<p>And then:</p>\n\n<pre><code>&gt;&gt;&gt; select('one')(df)\n   one\n0  1.0\n1  2.0\n2  3.0\n3  4.0\n4  4.0\n</code></pre>\n\n<p>Looks like it is not easy to please OHL\u00c1L\u00c1:</p>\n\n<blockquote>\n  <p>In that case you need to call the object explicitly:<br>\n  <code>select('one')(df)</code> Is there a way to avoid that? \u2013 OHL\u00c1L\u00c1</p>\n</blockquote>\n\n<p>Well, I can think of a solution but there is a caveat: your original function must not take a second positional argument that is a pandas dataframe (keyword arguments are ok). Lets add a <code>__new__</code> method to our <code>PipeInto</code> class inside the docorator that tests if the first argument is a dataframe, and if it is then we just call the original function with the arguments:</p>\n\n<pre><code>def __new__(cls, *args, **kwargs):\n    if args and isinstance(args[0], pd.DataFrame):\n        return cls.data['function'](*args, **kwargs)\n    return super().__new__(cls)\n</code></pre>\n\n<p>It seems to work but probably there is some downside I was unable to spot.</p>\n\n<pre><code>&gt;&gt;&gt; select(df, 'one')\n   one\n0  1.0\n1  2.0\n2  3.0\n3  4.0\n4  4.0\n\n&gt;&gt;&gt; df &gt;&gt; select('one')\n   one\n0  1.0\n1  2.0\n2  3.0\n3  4.0\n4  4.0\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5119, "user_id": 3980197, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/40b4b2a37dca408b616a6f5d6548f8c6?s=128&d=identicon&r=PG&f=1", "display_name": "CoderGuy123", "link": "https://stackoverflow.com/users/3980197/coderguy123"}, "edited": false, "score": 3, "creation_date": 1493577856, "post_id": 34213754, "comment_id": 74463939, "body": "This is nice but unfortunately, I have to do work with base Python functions/objects, and they cannot work like this. That&#39;s why I&#39;m looking for a proper piping system."}, {"owner": {"reputation": 808, "user_id": 1139196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1195df9636bb4232ec7ff2a13d94ba9e?s=128&d=identicon&r=PG", "display_name": "mhsekhavat", "link": "https://stackoverflow.com/users/1139196/mhsekhavat"}, "reply_to_user": {"reputation": 5119, "user_id": 3980197, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/40b4b2a37dca408b616a6f5d6548f8c6?s=128&d=identicon&r=PG&f=1", "display_name": "CoderGuy123", "link": "https://stackoverflow.com/users/3980197/coderguy123"}, "edited": false, "score": 1, "creation_date": 1548183101, "post_id": 34213754, "comment_id": 95449301, "body": "@Deleet Please take a look at <a href=\"https://github.com/sspipe/sspipe\" rel=\"nofollow noreferrer\">github.com/sspipe/sspipe</a>. It works with any python object. Please upvote my answer below if it satisfies your requirement."}], "tags": [], "owner": {"reputation": 10688, "user_id": 294017, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8e5422a173711c086b685140dbc498fe?s=128&d=identicon&r=PG", "display_name": "lgautier", "link": "https://stackoverflow.com/users/294017/lgautier"}, "is_accepted": false, "score": 10, "last_activity_date": 1478177553, "last_edit_date": 1478177553, "creation_date": 1449790602, "answer_id": 34213754, "question_id": 33658355, "link": "https://stackoverflow.com/questions/33658355/piping-output-from-one-function-to-another-using-python-infix-syntax/34213754#34213754", "title": "&quot;Piping&quot; output from one function to another using Python infix syntax", "body": "<p>While I can't help mentioning that using <a href=\"http://rpy2.readthedocs.org/en/version_2.7.x/lib_dplyr.html\" rel=\"noreferrer\">dplyr in Python</a> might the closest thing to having in dplyr in Python (it has the rshift operator, but as a gimmick), I'd like to also point out that the pipe operator might only be necessary in R because of its use of generic functions rather than methods as object attributes. <a href=\"https://en.wikipedia.org/wiki/Method_chaining\" rel=\"noreferrer\">Method chaining</a> gives you essentially the same without having to override operators:</p>\n\n<pre><code>dataf = (DataFrame(mtcars).\n         filter('gear&gt;=3').\n         mutate(powertoweight='hp*36/wt').\n         group_by('gear').\n         summarize(mean_ptw='mean(powertoweight)'))\n</code></pre>\n\n<p>Note wrapping the chain between a pair of parenthesis lets you break it into multiple lines without the need for a trailing <code>\\</code> on each line. </p>\n"}, {"tags": [], "owner": {"reputation": 4233, "user_id": 6510523, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-d58ISqzIb4k/AAAAAAAAAAI/AAAAAAAADFo/4rh4L8K0zS0/photo.jpg?sz=128", "display_name": "Brett Beatty", "link": "https://stackoverflow.com/users/6510523/brett-beatty"}, "is_accepted": false, "score": 0, "last_activity_date": 1498863596, "creation_date": 1498863596, "answer_id": 44855795, "question_id": 33658355, "link": "https://stackoverflow.com/questions/33658355/piping-output-from-one-function-to-another-using-python-infix-syntax/44855795#44855795", "title": "&quot;Piping&quot; output from one function to another using Python infix syntax", "body": "<p>I couldn't find a built-in way of doing this, so I created a class that uses the <code>__call__</code> operator because it supports <code>*args/**kwargs</code>:</p>\n\n<pre><code>class Pipe:\n    def __init__(self, value):\n        \"\"\"\n        Creates a new pipe with a given value.\n        \"\"\"\n        self.value = value\n    def __call__(self, func, *args, **kwargs):\n        \"\"\"\n        Creates a new pipe with the value returned from `func` called with\n        `args` and `kwargs` and it's easy to save your intermedi.\n        \"\"\"\n        value = func(self.value, *args, **kwargs)\n        return Pipe(value)\n</code></pre>\n\n<p>The syntax takes some getting used to, but it allows for piping.</p>\n\n<pre><code>def get(dictionary, key):\n    assert isinstance(dictionary, dict)\n    assert isinstance(key, str)\n    return dictionary.get(key)\n\ndef keys(dictionary):\n    assert isinstance(dictionary, dict)\n    return dictionary.keys()\n\ndef filter_by(iterable, check):\n    assert hasattr(iterable, '__iter__')\n    assert callable(check)\n    return [item for item in iterable if check(item)]\n\ndef update(dictionary, **kwargs):\n    assert isinstance(dictionary, dict)\n    dictionary.update(kwargs)\n    return dictionary\n\n\nx = Pipe({'a': 3, 'b': 4})(update, a=5, c=7, d=8, e=1)\ny = (x\n    (keys)\n    (filter_by, lambda key: key in ('a', 'c', 'e', 'g'))\n    (set)\n    ).value\nz = x(lambda dictionary: dictionary['a']).value\n\nassert x.value == {'a': 5, 'b': 4, 'c': 7, 'd': 8, 'e': 1}\nassert y == {'a', 'c', 'e'}\nassert z == 5\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 378, "user_id": 1472770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd8e4587a9f073c0c17d2f5c7a1217d5?s=128&d=identicon&r=PG", "display_name": "alancalvitti", "link": "https://stackoverflow.com/users/1472770/alancalvitti"}, "edited": false, "score": 0, "creation_date": 1572546257, "post_id": 51716859, "comment_id": 103603213, "body": "Does sspipe work with general python or only Pandas DFs?"}, {"owner": {"reputation": 808, "user_id": 1139196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1195df9636bb4232ec7ff2a13d94ba9e?s=128&d=identicon&r=PG", "display_name": "mhsekhavat", "link": "https://stackoverflow.com/users/1139196/mhsekhavat"}, "reply_to_user": {"reputation": 378, "user_id": 1472770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd8e4587a9f073c0c17d2f5c7a1217d5?s=128&d=identicon&r=PG", "display_name": "alancalvitti", "link": "https://stackoverflow.com/users/1472770/alancalvitti"}, "edited": false, "score": 0, "creation_date": 1573349147, "post_id": 51716859, "comment_id": 103853231, "body": "@alancalvitti It does support general python."}, {"owner": {"reputation": 378, "user_id": 1472770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd8e4587a9f073c0c17d2f5c7a1217d5?s=128&d=identicon&r=PG", "display_name": "alancalvitti", "link": "https://stackoverflow.com/users/1472770/alancalvitti"}, "edited": false, "score": 0, "creation_date": 1573476436, "post_id": 51716859, "comment_id": 103883290, "body": "Is the &#39;p&#39; necessary? A true pipe operator would allow this syntax: <code>df | select(&#39;one&#39;) | rename(one=&#39;new_one&#39;)</code>, at least where <code>select</code>, <code>rename</code> are curried."}, {"owner": {"reputation": 808, "user_id": 1139196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1195df9636bb4232ec7ff2a13d94ba9e?s=128&d=identicon&r=PG", "display_name": "mhsekhavat", "link": "https://stackoverflow.com/users/1139196/mhsekhavat"}, "reply_to_user": {"reputation": 378, "user_id": 1472770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd8e4587a9f073c0c17d2f5c7a1217d5?s=128&d=identicon&r=PG", "display_name": "alancalvitti", "link": "https://stackoverflow.com/users/1472770/alancalvitti"}, "edited": false, "score": 0, "creation_date": 1573650653, "post_id": 51716859, "comment_id": 103950031, "body": "you can define <code>select2 = lambda x: p(select, x)</code> then <code>df | select2(&#39;one&#39;)</code> works."}, {"owner": {"reputation": 378, "user_id": 1472770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd8e4587a9f073c0c17d2f5c7a1217d5?s=128&d=identicon&r=PG", "display_name": "alancalvitti", "link": "https://stackoverflow.com/users/1472770/alancalvitti"}, "edited": false, "score": 0, "creation_date": 1573656175, "post_id": 51716859, "comment_id": 103953313, "body": "no, because you&#39;d have to redefine every function in python as you&#39;ve shown. The entire point of pipelining is to compose existing functions."}, {"owner": {"reputation": 808, "user_id": 1139196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1195df9636bb4232ec7ff2a13d94ba9e?s=128&d=identicon&r=PG", "display_name": "mhsekhavat", "link": "https://stackoverflow.com/users/1139196/mhsekhavat"}, "reply_to_user": {"reputation": 378, "user_id": 1472770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd8e4587a9f073c0c17d2f5c7a1217d5?s=128&d=identicon&r=PG", "display_name": "alancalvitti", "link": "https://stackoverflow.com/users/1472770/alancalvitti"}, "edited": false, "score": 1, "creation_date": 1573818817, "post_id": 51716859, "comment_id": 104020431, "body": "That would be impossible. Because Python needs a clue to distinguish <code>pipe</code> semantics from (bitwise-OR)[<a href=\"https://wiki.python.org/moin/BitwiseOperators]\" rel=\"nofollow noreferrer\">wiki.python.org/moin/BitwiseOperators]</a> semantics. When you just write <code>x | y</code>, python doesn&#39;t know which one to use."}, {"owner": {"reputation": 378, "user_id": 1472770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd8e4587a9f073c0c17d2f5c7a1217d5?s=128&d=identicon&r=PG", "display_name": "alancalvitti", "link": "https://stackoverflow.com/users/1472770/alancalvitti"}, "edited": false, "score": 0, "creation_date": 1573829786, "post_id": 51716859, "comment_id": 104026150, "body": "Just because <code>|</code> is used in Unix shell pipes is irrelevant- use a different symbol. Other languages can pipe and use different syntax, eg in R it&#39;s <code>%&gt;%</code>, in Wolfram Language <code>&#47;*</code>."}], "tags": [], "owner": {"reputation": 808, "user_id": 1139196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1195df9636bb4232ec7ff2a13d94ba9e?s=128&d=identicon&r=PG", "display_name": "mhsekhavat", "link": "https://stackoverflow.com/users/1139196/mhsekhavat"}, "is_accepted": false, "score": 6, "last_activity_date": 1533597947, "creation_date": 1533597947, "answer_id": 51716859, "question_id": 33658355, "link": "https://stackoverflow.com/questions/33658355/piping-output-from-one-function-to-another-using-python-infix-syntax/51716859#51716859", "title": "&quot;Piping&quot; output from one function to another using Python infix syntax", "body": "<p>You can use <a href=\"https://github.com/sspipe/sspipe\" rel=\"noreferrer\">sspipe</a> library, and use the following syntax:</p>\n\n<pre><code>from sspipe import p\ndf = df | p(select, 'one') \\\n        | p(rename, one = 'new_one')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5345, "user_id": 2768350, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/a05c59ff1a1b667e80986ec143fcbf40?s=128&d=identicon&r=PG", "display_name": "jramm", "link": "https://stackoverflow.com/users/2768350/jramm"}, "is_accepted": false, "score": 1, "last_activity_date": 1600417061, "creation_date": 1600417061, "answer_id": 63951866, "question_id": 33658355, "link": "https://stackoverflow.com/questions/33658355/piping-output-from-one-function-to-another-using-python-infix-syntax/63951866#63951866", "title": "&quot;Piping&quot; output from one function to another using Python infix syntax", "body": "<p>I would argue strongly against doing this or any of the answers suggested here and just implement a <code>pipe</code> function in standard python code, without operator trickery, decorators or what not:</p>\n<pre><code>def pipe(first, *args):\n  for fn in args:\n    first = fn(first)\n  return first\n</code></pre>\n<p>See my answer here for more background:\n<a href=\"https://stackoverflow.com/a/60621554/2768350\">https://stackoverflow.com/a/60621554/2768350</a></p>\n<p>Overloading operators, involving external libraries and what not serve to make the code less readable, less maintainable, less testable and less pythonic.\nIf I want to do some kind of pipe in python, I would not want to do more than <code>pipe(input, fn1, fn2, fn3)</code>. Thats the most readable &amp; robust solution I can think of.\nIf someone in our company committed operator overloading or new dependencies to production <em>just</em> to do a pipe, it would get immediately reverted and they would be sentenced to doing QA checks the rest of the week :D\nIf you really really really must use some sort of operator for pipe, then maybe you have bigger problems and Python is not the right language for your use case...</p>\n"}, {"tags": [], "owner": {"reputation": 335, "user_id": 3763801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7f6bae7de6d6d242ebda103450b35f6?s=128&d=identicon&r=PG&f=1", "display_name": "user3763801", "link": "https://stackoverflow.com/users/3763801/user3763801"}, "is_accepted": false, "score": 0, "last_activity_date": 1610328202, "creation_date": 1610328202, "answer_id": 65660280, "question_id": 33658355, "link": "https://stackoverflow.com/questions/33658355/piping-output-from-one-function-to-another-using-python-infix-syntax/65660280#65660280", "title": "&quot;Piping&quot; output from one function to another using Python infix syntax", "body": "<p>An old question but still of interest to me (coming from R). So despite the objection of purists here is a shorty inspired by <a href=\"http://tomerfiliba.com/blog/Infix-Operators/\" rel=\"nofollow noreferrer\">http://tomerfiliba.com/blog/Infix-Operators/</a></p>\n<pre><code>class FuncPipe:\n    class Arg:\n        def __init__(self, arg):\n            self.arg = arg\n        def __or__(self, func):\n            return func(self.arg)\n\n    def __ror__(self, arg):\n        return self.Arg(arg)\npipe = FuncPipe()\n</code></pre>\n<p>Then</p>\n<pre><code>1 |pipe| \\\n  (lambda x: return x+1) |pipe| \\\n  (lambda x: return 2*x)\n</code></pre>\n<p>returns</p>\n<pre><code>4 \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1784, "user_id": 5088165, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c54064a4903efcc8bbb27c502f04c693?s=128&d=identicon&r=PG", "display_name": "Panwen Wang", "link": "https://stackoverflow.com/users/5088165/panwen-wang"}, "is_accepted": false, "score": 1, "last_activity_date": 1615316985, "last_edit_date": 1615316985, "creation_date": 1615225153, "answer_id": 66534568, "question_id": 33658355, "link": "https://stackoverflow.com/questions/33658355/piping-output-from-one-function-to-another-using-python-infix-syntax/66534568#66534568", "title": "&quot;Piping&quot; output from one function to another using Python infix syntax", "body": "<p>I have been porting data packages (dplyr, tidyr, tibble, etc) from R in python:</p>\n<p><a href=\"https://github.com/pwwang/datar\" rel=\"nofollow noreferrer\">https://github.com/pwwang/datar</a></p>\n<p>If you are familiar with those packages in R, and want to apply it in python, then it is here for you:</p>\n<pre class=\"lang-py prettyprint-override\"><code>from datar.all import *\n\nd = {'one' : [1., 2., 3., 4., 4.],\n     'two' : [4., 3., 2., 1., 3.]}\ndf = tibble(one=d['one'], two=d['two'])\n\ndf = df &gt;&gt; select(f.one) &gt;&gt; rename(new_one=f.one)\nprint(df)\n</code></pre>\n<p>Output:</p>\n<pre><code>   new_one\n0      1.0\n1      2.0\n2      3.0\n3      4.0\n4      4.0\n</code></pre>\n"}], "owner": {"reputation": 508, "user_id": 2317696, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ec9ca534c06088b44a188c0744b7f142?s=128&d=identicon&r=PG", "display_name": "Malthus", "link": "https://stackoverflow.com/users/2317696/malthus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 16501, "favorite_count": 9, "accepted_answer_id": 33661327, "answer_count": 7, "score": 29, "last_activity_date": 1615316985, "creation_date": 1447270155, "last_edit_date": 1447270281, "question_id": 33658355, "link": "https://stackoverflow.com/questions/33658355/piping-output-from-one-function-to-another-using-python-infix-syntax", "title": "&quot;Piping&quot; output from one function to another using Python infix syntax", "body": "<p>I'm trying to replicate, roughly, the <a href=\"https://cran.rstudio.com/web/packages/dplyr/vignettes/introduction.html\">dplyr</a> package from R using Python/Pandas (as a learning exercise). Something I'm stuck on is the \"piping\" functionality.</p>\n\n<p>In R/dplyr, this is done using the pipe-operator <code>%&gt;%</code>, where <code>x %&gt;% f(y)</code> is equivalent to <code>f(x, y)</code>. If possible, I would like to replicate this using infix syntax (see <a href=\"http://dev-tricks.net/pipe-infix-syntax-for-python\">here</a>).</p>\n\n<p>To illustrate, consider the two functions below.</p>\n\n<pre><code>import pandas as pd\n\ndef select(df, *args):\n    cols = [x for x in args]\n    df = df[cols]\n    return df\n\ndef rename(df, **kwargs):\n    for name, value in kwargs.items():\n        df = df.rename(columns={'%s' % name: '%s' % value})\n    return df\n</code></pre>\n\n<p>The first function takes a dataframe and returns only the given columns. The second takes a dataframe, and renames the given columns. For example:</p>\n\n<pre><code>d = {'one' : [1., 2., 3., 4., 4.],\n     'two' : [4., 3., 2., 1., 3.]}\n\ndf = pd.DataFrame(d)\n\n# Keep only the 'one' column.\ndf = select(df, 'one')\n\n# Rename the 'one' column to 'new_one'.\ndf = rename(df, one = 'new_one')\n</code></pre>\n\n<p>To achieve the same using pipe/infix syntax, the code would be:</p>\n\n<pre><code>df = df | select('one') \\\n        | rename(one = 'new_one')\n</code></pre>\n\n<p>So the output from the left-hand side of <code>|</code> gets passed as the first argument to the function on the right-hand side. Whenever I see something like this done (<a href=\"http://code.activestate.com/recipes/384122-infix-operators/\">here</a>, for example) it involves lambda functions. Is it possible to pipe a Pandas' dataframe between functions in the same manner?</p>\n\n<p>I know Pandas has the <code>.pipe</code> method, but what's important to me is the syntax of the example I provided. Any help would be appreciated. </p>\n"}, {"tags": ["python", "windows-services", "subprocess", "stdout", "popen"], "comments": [{"owner": {"reputation": 2607, "user_id": 1226857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f198ca74f94c84973cc941f9c17de17?s=128&d=identicon&r=PG", "display_name": "dhobbs", "link": "https://stackoverflow.com/users/1226857/dhobbs"}, "edited": false, "score": 0, "creation_date": 1447273223, "post_id": 33658335, "comment_id": 55091795, "body": "When you created the service, did you allow it to interact with the desktop?"}, {"owner": {"reputation": 35, "user_id": 4175926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2fd47187009b1dcee54c8411cf2592d?s=128&d=identicon&r=PG&f=1", "display_name": "Frenky", "link": "https://stackoverflow.com/users/4175926/frenky"}, "reply_to_user": {"reputation": 2607, "user_id": 1226857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f198ca74f94c84973cc941f9c17de17?s=128&d=identicon&r=PG", "display_name": "dhobbs", "link": "https://stackoverflow.com/users/1226857/dhobbs"}, "edited": false, "score": 0, "creation_date": 1447276108, "post_id": 33658335, "comment_id": 55093290, "body": "Thank you for answer. No I didn&#180;t. So I did it and suddenly  Interactive Services Detection was viewed. I have never seen it. But I don&#180;t want some special interface I would like the notepad was launched normaly."}], "owner": {"reputation": 35, "user_id": 4175926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2fd47187009b1dcee54c8411cf2592d?s=128&d=identicon&r=PG&f=1", "display_name": "Frenky", "link": "https://stackoverflow.com/users/4175926/frenky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "closed_date": 1447538640, "answer_count": 0, "score": 0, "last_activity_date": 1447270065, "creation_date": 1447270065, "question_id": 33658335, "link": "https://stackoverflow.com/questions/33658335/run-application-within-windows-service", "closed_reason": "Duplicate", "title": "Run application within windows service", "body": "<p>I have simple windows service in python and I need to run some external application for example notepad.exe. When I try to launch this application within windows services, so nothig happens. However when I open list of process in my Windows Task Manager, I can see there the notepad.exe. \nMy code for launching the notepad.exe:</p>\n\n<pre><code>proc = subprocess.Popen('\"C:/Windows/System32/notepad.exe\"', shell=True, bufsize=128,stdin=subprocess.PIPE, stdout=subprocess.PIPE, stderr=subprocess.PIPE)\n</code></pre>\n\n<p>How can I fix it?</p>\n"}, {"tags": ["python", "dictionary"], "comments": [{"owner": {"reputation": 8538, "user_id": 3059812, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/UaU9b.jpg?s=128&g=1", "display_name": "Morgan Thrapp", "link": "https://stackoverflow.com/users/3059812/morgan-thrapp"}, "edited": false, "score": 0, "creation_date": 1447270008, "post_id": 33658305, "comment_id": 55090081, "body": "Welcome to Stack Overflow! You seem to be asking for someone to write some code for you. Stack Overflow is a question and answer site, not a code-writing service. Please <a href=\"http://stackoverflow.com/help/how-to-ask\">see here</a> to learn how to write effective questions."}], "answers": [{"tags": [], "owner": {"reputation": 448, "user_id": 4153614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/095f33d30e635ec361b40886041b9153?s=128&d=identicon&r=PG&f=1", "display_name": "kponz", "link": "https://stackoverflow.com/users/4153614/kponz"}, "is_accepted": true, "score": 1, "last_activity_date": 1447282888, "creation_date": 1447282888, "answer_id": 33661469, "question_id": 33658305, "link": "https://stackoverflow.com/questions/33658305/how-to-convert-a-complex-string-to-dict-of-dict-in-python/33661469#33661469", "title": "How to convert a complex string to dict of dict in python", "body": "<p>To read in the string, take a look at the json library:</p>\n\n<pre><code>import json\ns = \"{'key1':\\\"{'status': 'completed','media': {'key2':{'value1': False, 'key3': False},'key4':{'active': True}\\\"}\"\nimported_dict = json.loads(s)\n</code></pre>\n\n<p>Then, you can use <code>imported_dict</code> to re-form to your new dictionary format.</p>\n"}], "owner": {"reputation": 195, "user_id": 3106196, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/3028950ebf798462a506db138d247a67?s=128&d=identicon&r=PG&f=1", "display_name": "Jahir", "link": "https://stackoverflow.com/users/3106196/jahir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 33661469, "answer_count": 1, "score": -1, "last_activity_date": 1447282888, "creation_date": 1447269935, "last_edit_date": 1447270326, "question_id": 33658305, "link": "https://stackoverflow.com/questions/33658305/how-to-convert-a-complex-string-to-dict-of-dict-in-python", "title": "How to convert a complex string to dict of dict in python", "body": "<p>I have a string with complex dict. I want to convert that as dict of dict recursively</p>\n\n<p>eg:\n<code>s = \"{'key1':\\\"{'status': 'completed','media': {'key2':{'value1': False, 'key3': False},'key4':{'active': True}\\\"}\"</code></p>\n\n<p>As I am new to python, I couldnt crack this.</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["python", "json", "sqlite"], "comments": [{"owner": {"reputation": 695068, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 0, "creation_date": 1447269700, "post_id": 33658216, "comment_id": 55089896, "body": "Have you considered testing if a value is <code>None</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 4102576, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a36cd82218f7c4ce2a6d0f13f155b5d0?s=128&d=identicon&r=PG&f=1", "display_name": "SanjanaS801", "link": "https://stackoverflow.com/users/4102576/sanjanas801"}, "edited": false, "score": 0, "creation_date": 1447275344, "post_id": 33658682, "comment_id": 55092901, "body": "Works perfectly! I had to use cur.execute(sql, list(line.values()) though"}, {"owner": {"reputation": 8840, "user_id": 2319400, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/9Ckyw.png?s=128&g=1", "display_name": "sebastian", "link": "https://stackoverflow.com/users/2319400/sebastian"}, "reply_to_user": {"reputation": 81, "user_id": 4102576, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a36cd82218f7c4ce2a6d0f13f155b5d0?s=128&d=identicon&r=PG&f=1", "display_name": "SanjanaS801", "link": "https://stackoverflow.com/users/4102576/sanjanas801"}, "edited": false, "score": 0, "creation_date": 1447307187, "post_id": 33658682, "comment_id": 55103560, "body": "Right - that&#39;s because you&#39;re using python3, where the values are returned as iterator - I missed that. I edited my answer accordingly."}], "tags": [], "owner": {"reputation": 8840, "user_id": 2319400, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/9Ckyw.png?s=128&g=1", "display_name": "sebastian", "link": "https://stackoverflow.com/users/2319400/sebastian"}, "is_accepted": true, "score": 3, "last_activity_date": 1447307004, "last_edit_date": 1447307004, "creation_date": 1447271357, "answer_id": 33658682, "question_id": 33658216, "link": "https://stackoverflow.com/questions/33658216/insert-null-into-sqlite-from-python/33658682#33658682", "title": "Insert null into Sqlite from Python", "body": "<p>You're getting a <code>\"None\"</code> string, because you're converting the <code>None</code> into a string before passing it to the <code>execute</code> function:</p>\n\n<pre><code>cur.execute(sql, [\"'\" + str(i) + \"'\" for i in line.values()])\n</code></pre>\n\n<p>So, as far as python/sqlite is concerned, you're inserting the string <code>\"None\"</code> - not the <code>None</code> object.</p>\n\n<p>The point of having the parameters as second argument in the <code>execute</code> function is that it's supposed to do the value-to-sql-string representation for you. Hence, you should provide the values in their native python datatypes.</p>\n\n<p>So, using</p>\n\n<pre><code>cur.execute(sql, list(line.values()))\n</code></pre>\n\n<p>should actually give you a <code>null</code> instead of <code>\"None\"</code>.</p>\n"}], "owner": {"reputation": 81, "user_id": 4102576, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a36cd82218f7c4ce2a6d0f13f155b5d0?s=128&d=identicon&r=PG&f=1", "display_name": "SanjanaS801", "link": "https://stackoverflow.com/users/4102576/sanjanas801"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1622, "favorite_count": 1, "accepted_answer_id": 33658682, "answer_count": 1, "score": 1, "last_activity_date": 1447307004, "creation_date": 1447269569, "question_id": 33658216, "link": "https://stackoverflow.com/questions/33658216/insert-null-into-sqlite-from-python", "title": "Insert null into Sqlite from Python", "body": "<p>I have a table called 'test' that I'm creating through my Python code.</p>\n\n<pre><code>db = sqlite3.connect(\"mydb.db\")\ncur = db.cursor()\ncur.execute('''CREATE TABLE IF NOT EXISTS test \n            (\n                \"id\" text primary key,\n                \"field1\" integer,\n                \"fiedl2\" integer,\n                \"field3\" text\n            )'''\n           )\n</code></pre>\n\n<p>I have a file where each line is a json. I read the file line by line and insert data from the json of each line into the table. </p>\n\n<p>file.txt:</p>\n\n<pre><code>{'id':'abcde', 'field1': 10, 'field2': 20, 'field3': \"hello\"}\n{'id':'asdf', 'field1': 20, 'field2': 5, 'field3': \"world\"}\n{'id':'qwerty', 'field1': 1, 'field2': 2, 'field3': None}\n</code></pre>\n\n<p>If a field in the json doesn't have a value, I want to insert null into my sqlite table. So as in the last line above, if field3 doesn't have a value, I put None into it because this is what I read in other related questions.</p>\n\n<p>However, when I insert as below:</p>\n\n<pre><code>for line in readfile:\n    line = ast.literal_eval(line)\n    columns = '\", \"'.join([i.strip() for i in line.keys()])\n    columns = \"\\\"\" + columns + '\\\"' \n    placeholders = ', '.join('?' * len(line))\n    sql = 'INSERT INTO test ({}) VALUES ({})'.format(columns, placeholders)\n    cur.execute(sql, [\"'\" + str(i) + \"'\" for i in line.values()])\n    db.commit()\n</code></pre>\n\n<p>I get 'None' instead of null when I perform a select statement from the Sqlite console.</p>\n\n<pre><code>sqlite&gt; select * from test where id='qwerty' limit 1;\n'qwerty'|1|2|'None'|\n</code></pre>\n\n<p>Can anyone please help me fix this? I'm using Python 3.4</p>\n"}, {"tags": ["python", "file", "if-statement", "dictionary", "output"], "comments": [{"owner": {"reputation": 51083, "user_id": 1467082, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/ZPeMR.jpg?s=128&g=1", "display_name": "David Zemens", "link": "https://stackoverflow.com/users/1467082/david-zemens"}, "edited": false, "score": 0, "creation_date": 1447269803, "post_id": 33658180, "comment_id": 55089962, "body": "Using which version of python? Are you sure the input passed an <code>int</code> to <code>fd</code>?"}, {"owner": {"reputation": 59, "user_id": 4257517, "user_type": "registered", "accept_rate": 12, "profile_image": "https://lh6.googleusercontent.com/-NViHe4q3ygw/AAAAAAAAAAI/AAAAAAAACTk/kwjhYVvA5U4/photo.jpg?sz=128", "display_name": "Aanandhi V B", "link": "https://stackoverflow.com/users/4257517/aanandhi-v-b"}, "reply_to_user": {"reputation": 51083, "user_id": 1467082, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/ZPeMR.jpg?s=128&g=1", "display_name": "David Zemens", "link": "https://stackoverflow.com/users/1467082/david-zemens"}, "edited": false, "score": 0, "creation_date": 1447269950, "post_id": 33658180, "comment_id": 55090048, "body": "i am using python 2.7 version."}, {"owner": {"reputation": 51083, "user_id": 1467082, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/ZPeMR.jpg?s=128&g=1", "display_name": "David Zemens", "link": "https://stackoverflow.com/users/1467082/david-zemens"}, "edited": false, "score": 0, "creation_date": 1447270861, "post_id": 33658180, "comment_id": 55090595, "body": "I get a printed value of 234: <a href=\"http://i.imgur.com/7uMSdCh.png\" rel=\"nofollow noreferrer\">i.imgur.com/7uMSdCh.png</a>"}, {"owner": {"reputation": 59, "user_id": 4257517, "user_type": "registered", "accept_rate": 12, "profile_image": "https://lh6.googleusercontent.com/-NViHe4q3ygw/AAAAAAAAAAI/AAAAAAAACTk/kwjhYVvA5U4/photo.jpg?sz=128", "display_name": "Aanandhi V B", "link": "https://stackoverflow.com/users/4257517/aanandhi-v-b"}, "reply_to_user": {"reputation": 51083, "user_id": 1467082, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/ZPeMR.jpg?s=128&g=1", "display_name": "David Zemens", "link": "https://stackoverflow.com/users/1467082/david-zemens"}, "edited": false, "score": 0, "creation_date": 1447271164, "post_id": 33658180, "comment_id": 55090725, "body": "can you tell me the indentation, because its not working in mine."}, {"owner": {"reputation": 51083, "user_id": 1467082, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/ZPeMR.jpg?s=128&g=1", "display_name": "David Zemens", "link": "https://stackoverflow.com/users/1467082/david-zemens"}, "edited": false, "score": 0, "creation_date": 1447271199, "post_id": 33658180, "comment_id": 55090749, "body": "I have copied your code <i>exactly</i> as you have presented it, and run it through console/command prompt.  There is no indentation error."}, {"owner": {"reputation": 59, "user_id": 4257517, "user_type": "registered", "accept_rate": 12, "profile_image": "https://lh6.googleusercontent.com/-NViHe4q3ygw/AAAAAAAAAAI/AAAAAAAACTk/kwjhYVvA5U4/photo.jpg?sz=128", "display_name": "Aanandhi V B", "link": "https://stackoverflow.com/users/4257517/aanandhi-v-b"}, "reply_to_user": {"reputation": 51083, "user_id": 1467082, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/ZPeMR.jpg?s=128&g=1", "display_name": "David Zemens", "link": "https://stackoverflow.com/users/1467082/david-zemens"}, "edited": false, "score": 0, "creation_date": 1447271402, "post_id": 33658180, "comment_id": 55090854, "body": "now if you try food=1 and fd=2 you will still get 234 not 345"}, {"owner": {"reputation": 51083, "user_id": 1467082, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/ZPeMR.jpg?s=128&g=1", "display_name": "David Zemens", "link": "https://stackoverflow.com/users/1467082/david-zemens"}, "edited": false, "score": 0, "creation_date": 1447271705, "post_id": 33658180, "comment_id": 55091009, "body": "<code>has_key</code> returns boolean, which is <code>==1</code>, so as long as user inputs a key which exist in the dictionary, the first test will always evaluate true, since <code>has_key(fd)</code> == True and <code>True == 1</code>."}], "answers": [{"tags": [], "owner": {"reputation": 51083, "user_id": 1467082, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/ZPeMR.jpg?s=128&g=1", "display_name": "David Zemens", "link": "https://stackoverflow.com/users/1467082/david-zemens"}, "is_accepted": false, "score": 0, "last_activity_date": 1447272755, "creation_date": 1447272755, "answer_id": 33659012, "question_id": 33658180, "link": "https://stackoverflow.com/questions/33658180/is-this-the-correct-way-to-implement-dictionary/33659012#33659012", "title": "Is this the correct way to implement dictionary?", "body": "<p><code>has_key</code> returns boolean, which is <code>==1</code>, so as long as user inputs a key which exist in the dictionary, the first test will always evaluate true, since <code>has_key(fd)</code> == True and <code>True == 1</code>.  So you need to revise your logic.</p>\n\n<p>I think you are going about this the wrong way, though, as it is quickly devolving in to spaghetti code of if/elif/else statements when you can more appropriately deal with this by nesting dictionaries.  This will also help with readability.</p>\n\n<p>You may look at initializing and nesting your dictionaries properly, and include the rate as part of the dict.  This is just an example:</p>\n\n<pre><code>hotel_starters = {1:{'item':'Salmon Devilled Eggs', 'rate':234},\n                 2:{'item':'Baked Parika Cheese', 'rate':345},\n                 3:{'item':'Ricotta and Parmesan Fritters', 'rate':'456'}\n                 }\nhotel_main_courses = {1:{'item':'Filet Mignon', 'rate':678},\n                 2:{'item':'Vegetarian Lasagna', 'rate':567},\n                 3:{'item':'Halibut', 'rate':'890'}\n                 }\nhotel_menu = {1:hotel_starters,\n             2: hotel_main_courses}  \n</code></pre>\n\n<p>Using that sort of data structure, you can easily query by key:</p>\n\n<pre><code>hotel_menu[1] # returns the entire 'hotel_starters' dictionary\n\nhotel_menu[1][1]  # returns the dictionary for hotel_starters[1]\n\nhotel_menu[1][1]['rate'] # returns the rate associated with that item, etc.\n</code></pre>\n\n<p>And further, to print your menu:</p>\n\n<pre><code>for k, v in hotel_menu['starters'].items():\n    print k, v['item'], v['rate']                   \n</code></pre>\n\n<p>So in an example you can do:</p>\n\n<pre><code># initialize your menu dictionaries\nhotel_starters = {1:{'item':'Salmon Devilled Eggs', 'rate':234},\n                 2:{'item':'Baked Parika Cheese', 'rate':345},\n                 3:{'item':'Ricotta and Parmesan Fritters', 'rate':'456'}\n                 }\nhotel_main_courses = {1:{'item':'Filet Mignon', 'rate':678},\n                 2:{'item':'Vegetarian Lasagna', 'rate':567},\n                 3:{'item':'Halibut', 'rate':'890'}\n                 }\nhotel_menu = {1:hotel_starters,\n             2: hotel_main_courses}  \n\n\nrates=0\nmenu = input('1 for starters, 2 for main courses:')\nif menu in hotel_menu:\n    print 'menu is:\\n'\n    for k, v in hotel_menu[menu].items():\n        print k, v['item'], v['rate'] \n    food = input('enter your food item:\\n')\n    if food in hotel_menu[menu]:\n        rates += hotel_menu[menu][food]['rate'] \n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 4257517, "user_type": "registered", "accept_rate": 12, "profile_image": "https://lh6.googleusercontent.com/-NViHe4q3ygw/AAAAAAAAAAI/AAAAAAAACTk/kwjhYVvA5U4/photo.jpg?sz=128", "display_name": "Aanandhi V B", "link": "https://stackoverflow.com/users/4257517/aanandhi-v-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1447272755, "creation_date": 1447269448, "question_id": 33658180, "link": "https://stackoverflow.com/questions/33658180/is-this-the-correct-way-to-implement-dictionary", "title": "Is this the correct way to implement dictionary?", "body": "<pre><code>       f=open('food.dat','w+')\n       rates=0\n       rate=0\n       print\"Menu is:\"\n       print\"\"\"   1.Starters\n       2.Main Courses\n       3.Snacks\n       4.Drinks\n       5.Desserts\"\"\"\n       hotel_food1={1:'Starters',\n       2:'Main Courses',\n       3:'Snacks',\n       4:'Drinks',\n       5:'Desserts'}\n       while True:\n           food=input(\"Enter the food type:\")\n           if(hotel_food1.has_key(food)==1):\n                     print\"Menu is:\"\n                     print\"\"\"1.Salmon Devilled Eggs\n                     2.Baked Parika Cheese\n                     3.Ricotta and Parmesan Fritters\n                     4.Traditional Welsh Cawl\n                     5.Summer Ratatouille Salad\"\"\"\n                     hotel_starter={1:'Salmon Devilled Eggs',\n                      2:'Baked Parika Cheese',\n                      3:'Ricotta and Parmesan Fritters',\n                      4:'Traditional Welsh Cawl',\n                      5:'Summer Ratatouille Salad'}\n                     fd=input(\"ENter the food type\")\n                     if(hotel_starter.has_key(fd)==1):\n                                               rate=rate+234\n                     elif(hotel_starter.has_key(fd)==2):\n                                          rate=rate+345\n                     elif(hotel_starter.has_key(fd)==3):\n                                       rate=rate+200\n                     elif(hotel_starter.has_key(fd)==4):\n                                       rate=rate+110\n                     elif(hotel_starter.has_key(fd)==5):\n                                        rate=rate+334\n                     ch=raw_input(\"Do you want to continue? yes/no??\")\n                     if(ch=='no'):\n                              break\n       rates=rates+rate\n\n       f.write(str(rates))\n\n\n       f.seek(0,0)\n       x=f.read()\n       print x\n\n       f.close()\n</code></pre>\n\n<p>Hello, In the above program when i give input for food as 1 and fd as 1 ,i must get the value 234 printed.but when i run the program i get value as 0. Is there something wrong with the indentation? Is the dictionary implemented correctly?? please help!Thank you!</p>\n"}, {"tags": ["python", "django", "elasticsearch", "http-authentication", "elasticutils"], "answers": [{"comments": [{"owner": {"reputation": 163519, "user_id": 4604579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/reC2t.jpg?s=128&g=1", "display_name": "Val", "link": "https://stackoverflow.com/users/4604579/val"}, "edited": false, "score": 0, "creation_date": 1447850737, "post_id": 33663945, "comment_id": 55327137, "body": "@EMILIOCRUZ have you had any luck with this?"}, {"owner": {"reputation": 23, "user_id": 5551934, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0tD_vtaNeiA/AAAAAAAAAAI/AAAAAAAAANc/BnStmR5DJxM/photo.jpg?sz=128", "display_name": "emcq_coder", "link": "https://stackoverflow.com/users/5551934/emcq-coder"}, "edited": false, "score": 0, "creation_date": 1447962319, "post_id": 33663945, "comment_id": 55391436, "body": "Thanks a lot @val, yes it works perfectly although I installed the shield plugin in my es_server, the auth-method (es_client = get_es(urls=[&#39;localhost:9200&#39;], http_auth=&quot;username:password&quot;))you suggested me works fine  with shield. <a href=\"https://www.elastic.co/guide/en/shield/current/enable-basic-auth.html\" rel=\"nofollow noreferrer\">elastic.co/guide/en/shield/current/enable-basic-auth.html</a>"}], "tags": [], "owner": {"reputation": 163519, "user_id": 4604579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/reC2t.jpg?s=128&g=1", "display_name": "Val", "link": "https://stackoverflow.com/users/4604579/val"}, "is_accepted": true, "score": 0, "last_activity_date": 1447298910, "creation_date": 1447298910, "answer_id": 33663945, "question_id": 33658175, "link": "https://stackoverflow.com/questions/33658175/python-elasticutils-http-authentication-or-api-key/33663945#33663945", "title": "Python elasticutils http authentication or api key?", "body": "<p>There are several ways of protecting your ES cluster.</p>\n\n<p>The easiest way would be to install a plugin such as <a href=\"https://github.com/Asquera/elasticsearch-http-basic\" rel=\"nofollow\">elasticsearch-http-basic</a> in order to protect your cluster. You can configure it with a <a href=\"https://github.com/Asquera/elasticsearch-http-basic#configuration\" rel=\"nofollow\">BASIC username/password</a> combo and then it's just a matter of configuring <a href=\"https://github.com/mozilla/elasticutils\" rel=\"nofollow\">elasticutils</a> to pass those BASIC credentials along to the underlying ES client provided by the <a href=\"https://github.com/elastic/elasticsearch-py\" rel=\"nofollow\">elasticsearch-py</a> library.</p>\n\n<p>When calling <code>get_es(...)</code> you simply need to add the <code>http_auth</code> parameter which will be passed along to the <code>Elasticsearch</code> constructor like this:</p>\n\n<pre><code>es_client = get_es(urls=['localhost:9200'], http_auth=\"username:password\")\n</code></pre>\n\n<p>Another way is to hide your ES cluster behind a web server like Apache or Nginx, but it's more involved than the above solution.</p>\n\n<p>You can also use <a href=\"https://www.elastic.co/products/shield\" rel=\"nofollow\">Shield</a>, just know it is a commercial product.</p>\n"}], "owner": {"reputation": 23, "user_id": 5551934, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0tD_vtaNeiA/AAAAAAAAAAI/AAAAAAAAANc/BnStmR5DJxM/photo.jpg?sz=128", "display_name": "emcq_coder", "link": "https://stackoverflow.com/users/5551934/emcq-coder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 645, "favorite_count": 0, "accepted_answer_id": 33663945, "answer_count": 1, "score": 0, "last_activity_date": 1447298910, "creation_date": 1447269434, "question_id": 33658175, "link": "https://stackoverflow.com/questions/33658175/python-elasticutils-http-authentication-or-api-key", "title": "Python elasticutils http authentication or api key?", "body": "<p>Hello I'm currently using elasticutils in django to search indexed documents but my cluster doesn't have any authentication method so anyone can access to my ES server from internet, is there any way to set a key o auth method with elasticutils in order to the only servers with the key can query to the ES server?</p>\n\n<p>Something likely searchly or amazon keys api's</p>\n"}, {"tags": ["javascript", "python", "graph", "highcharts", "flask"], "comments": [{"owner": {"reputation": 16959, "user_id": 1011544, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/HWVzY.png?s=128&g=1", "display_name": "jlbriggs", "link": "https://stackoverflow.com/users/1011544/jlbriggs"}, "edited": false, "score": 2, "creation_date": 1447338997, "post_id": 33658139, "comment_id": 55120592, "body": "You could possibly make use of the zones property?  | <a href=\"http://api.highcharts.com/highcharts#plotOptions.series.zones\" rel=\"nofollow noreferrer\">api.highcharts.com/highcharts#plotOptions.series.zones</a>"}, {"owner": {"reputation": 486, "user_id": 323524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/104168afed407719deadf316d907c72c?s=128&d=identicon&r=PG", "display_name": "nuin", "link": "https://stackoverflow.com/users/323524/nuin"}, "reply_to_user": {"reputation": 16959, "user_id": 1011544, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/HWVzY.png?s=128&g=1", "display_name": "jlbriggs", "link": "https://stackoverflow.com/users/1011544/jlbriggs"}, "edited": false, "score": 0, "creation_date": 1447343863, "post_id": 33658139, "comment_id": 55124430, "body": "Seems a good idea. I will try to implement, thanks a lot for the comment."}], "answers": [{"tags": [], "owner": {"reputation": 486, "user_id": 323524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/104168afed407719deadf316d907c72c?s=128&d=identicon&r=PG", "display_name": "nuin", "link": "https://stackoverflow.com/users/323524/nuin"}, "is_accepted": true, "score": 0, "last_activity_date": 1447359895, "creation_date": 1447359895, "answer_id": 33680652, "question_id": 33658139, "link": "https://stackoverflow.com/questions/33658139/best-way-to-add-different-colours-based-on-conditions-to-bargraphs-plotted-with/33680652#33680652", "title": "Best way to add different colours based on conditions to bargraphs plotted with Highcharts.js", "body": "<p>Thanks to jlbriggs comment, I was able to find the right solution. I have tried adding a zone to the options section of the Sparkline function but that didn't work. The zone section had to be added to the doChunk() function of when the series of value is created, as a parameter for the Highcharts.Sparkline function</p>\n\n<pre><code>$td.highcharts('SparkLine', {\n            series: [{\n                data: data,\n                pointStart: 1,\n                zoneAxis: 'y',\n                zones: [{\n                    value: 99,\n                 color: '#FF1811'\n            }],\n            }],\n            tooltip: {\n                headerFormat: '&lt;span style=\"font-size: 12px\"&gt;' + $td.parent().find('th').html() + ', Amplicon {point.x}:&lt;/span&gt;&lt;br/&gt;',\n                pointFormat: '&lt;b&gt;{point.y}&lt;/b&gt;'\n            },\n            chart: chart\n        });\n</code></pre>\n\n<p>It still a little bit hard top control different graphs colours, but at least the effect I was looking for was set.</p>\n"}], "owner": {"reputation": 486, "user_id": 323524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/104168afed407719deadf316d907c72c?s=128&d=identicon&r=PG", "display_name": "nuin", "link": "https://stackoverflow.com/users/323524/nuin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 194, "favorite_count": 0, "accepted_answer_id": 33680652, "answer_count": 1, "score": 0, "last_activity_date": 1447359895, "creation_date": 1447269280, "question_id": 33658139, "link": "https://stackoverflow.com/questions/33658139/best-way-to-add-different-colours-based-on-conditions-to-bargraphs-plotted-with", "title": "Best way to add different colours based on conditions to bargraphs plotted with Highcharts.js", "body": "<p>I have a simple, Flask application that generates a series of sparkling bargraphs with Highcharts.js into a HTML table. I have adapted the example code of Highcharts' webpage to generate my page. Basically my plotting function is identical to the documentation, with small modifications</p>\n\n<pre><code>function doChunk() {\n    var time = +new Date(),\n        i,\n        len = $tds.length,\n        $td,\n        stringdata,\n        arr,\n        data,\n        chart;\n\n    for (i = 0; i &lt; len; i += 1) {\n        $td = $($tds[i]);\n        stringdata = $td.data('sparkline');\n        data = $.map(stringdata, parseFloat);\n        chart = {};\n        chart.type= 'column';\n        $td.highcharts('SparkLine', {\n            series: [{\n                data: data,\n                pointStart: 1,\n            }],\n            tooltip: {\n                headerFormat: '&lt;span style=\"font-size: 12px\"&gt;' + $td.parent().find('th').html() + ', Amplicon {point.x}:&lt;/span&gt;&lt;br/&gt;',\n                pointFormat: '&lt;b&gt;{point.y}&lt;/b&gt;'\n            },\n            chart: chart\n        });\n\n        n += 1;\n\n        // If the process takes too much time, run a timeout to allow interaction with the browser\n        if (new Date() - time &gt; 500) {\n            $tds.splice(0, i + 1);\n            setTimeout(doChunk, 0);\n            break;\n        }\n    }\n}\ndoChunk();\n\n});\n</code></pre>\n\n<p>The Flask module reads an ASCII file, does some processing and sends to the HTML portion of the template the values that then sent for plotting. All the values passed to the data-sparkline objects are lists </p>\n\n<pre><code>      {% for gene in gene_information %}\n      &lt;tr&gt;\n        &lt;th&gt;{{ gene }}&lt;/th&gt;\n        &lt;td style=\"text-align:center\"&gt;{{ gene_information[gene]['total_length'] }}&lt;/td&gt;\n        &lt;td data-sparkline=\"{{ gene_information[gene]['min_coverage'] | string }}\"/&gt;\n        &lt;td data-sparkline=\"{{ gene_information[gene]['target_perc'] }}\"/&gt;\n        &lt;td data-sparkline=\"{{ gene_information[gene]['above_30'] }}\"&gt;\n        &lt;td data-sparkline=\"{{ gene_information[gene]['zero'] }}\"&gt;\n    &lt;/tr&gt;\n  {% endfor %}\n</code></pre>\n\n<p>Now, what would be the most straightforward way to set a condition to the bar colour based on the value provided by Flask? Let's say I want to make the default bar colour blue, but if one the 'above_30' list values is below 50 the bar turns red?</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["python", "python-2.7", "sockets", "network-protocols"], "comments": [{"owner": {"reputation": 25103, "user_id": 1340389, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5d0e5b16679b92b24c8262e1e6aa2aa7?s=128&d=identicon&r=PG", "display_name": "Kevin", "link": "https://stackoverflow.com/users/1340389/kevin"}, "edited": false, "score": 0, "creation_date": 1447269131, "post_id": 33658011, "comment_id": 55089562, "body": "Hint: on the client side, <code>sizeof</code> is a string, not an integer.  For your next question, go read the <a href=\"https://docs.python.org/2/library/struct.html\" rel=\"nofollow noreferrer\"><code>struct</code></a> documentation."}, {"owner": {"reputation": 51, "user_id": 5162334, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/5WdtR.jpg?s=128&g=1", "display_name": "mman1235", "link": "https://stackoverflow.com/users/5162334/mman1235"}, "reply_to_user": {"reputation": 25103, "user_id": 1340389, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5d0e5b16679b92b24c8262e1e6aa2aa7?s=128&d=identicon&r=PG", "display_name": "Kevin", "link": "https://stackoverflow.com/users/1340389/kevin"}, "edited": false, "score": 0, "creation_date": 1447269718, "post_id": 33658011, "comment_id": 55089913, "body": "Ok thanks I looked into it, and made some changes, though now there&#39;s a weird problem where it just doesn&#39;t want to go into the doit loop at all... I&#39;ll update the post to show you, Thanks again!"}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 5162334, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/5WdtR.jpg?s=128&g=1", "display_name": "mman1235", "link": "https://stackoverflow.com/users/5162334/mman1235"}, "edited": false, "score": 0, "creation_date": 1447271215, "post_id": 33658374, "comment_id": 55090754, "body": "Fantastic ! :) I adjusted after I understood your points my code for both sides and now it does it and writes in just the right amount! only a little adjusting on the: ending the protocol so I can do the others effieciently"}, {"owner": {"reputation": 51, "user_id": 5162334, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/5WdtR.jpg?s=128&g=1", "display_name": "mman1235", "link": "https://stackoverflow.com/users/5162334/mman1235"}, "edited": false, "score": 0, "creation_date": 1447271257, "post_id": 33658374, "comment_id": 55090776, "body": "and it&#39;s done. Thanks again, you explained very well and left me stuff to figure out on my own which I really appreciate :) Thanks!"}], "tags": [], "owner": {"reputation": 25103, "user_id": 1340389, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5d0e5b16679b92b24c8262e1e6aa2aa7?s=128&d=identicon&r=PG", "display_name": "Kevin", "link": "https://stackoverflow.com/users/1340389/kevin"}, "is_accepted": true, "score": 1, "last_activity_date": 1447270574, "last_edit_date": 1447270574, "creation_date": 1447270211, "answer_id": 33658374, "question_id": 33658011, "link": "https://stackoverflow.com/questions/33658011/protocol-writes-data-into-file-even-when-the-if-statement-should-be-passed/33658374#33658374", "title": "Protocol writes data into file even when the if statement should be passed", "body": "<p>OK, let's go through the issues here.</p>\n\n<ol>\n<li><code>sizeof = int(my_socket.recv(1024))</code>: You do not know that the number is exactly 1024 digits long.  Indeed, it is probably much shorter than that, so this is sucking up part of the image data.  You need to pack it into a fixed-width byte field with <a href=\"https://docs.python.org/2/library/struct.html#struct.pack\" rel=\"nofollow\"><code>struct.pack()</code></a> on the server side, then unpack it with the same format on the client side.</li>\n<li><code>accumulated = bytes(0)</code>: In Python 2.7, <code>bytes</code> is exactly synonymous with <code>str</code> (in 3.x it's still a string-like thing, but slightly different).  In other words, this is not an integer, it is a string.  If you had been using Python 3, this would have thrown an exception at the line <code>if accumulated &lt; sizeof:</code>, since 3.x doesn't allow comparing integers to strings.</li>\n<li><code>my_socket.send(\"Send file\")</code>/<code>my_socket.send(\"GOT IT\")</code>: Since the server never calls <code>recv()</code>, this data could theoretically fill up the TCP buffer and block.  In practice it won't because you're only sending a small amount, but in general, you can't send things unless the other side is receiving them.</li>\n<li><code>accumulated += struct.unpack('l',data)</code>: That won't work.  You do in fact want <code>len(data)</code> here.</li>\n</ol>\n"}], "owner": {"reputation": 51, "user_id": 5162334, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/5WdtR.jpg?s=128&g=1", "display_name": "mman1235", "link": "https://stackoverflow.com/users/5162334/mman1235"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 33658374, "answer_count": 1, "score": 0, "last_activity_date": 1447270574, "creation_date": 1447268829, "last_edit_date": 1447269840, "question_id": 33658011, "link": "https://stackoverflow.com/questions/33658011/protocol-writes-data-into-file-even-when-the-if-statement-should-be-passed", "title": "Protocol writes data into file even when the if statement should be passed", "body": "<p>I wanted to do a protocol that efficiently writes a jpg file data from the server to a client by writing the given data to a file in the client's C:\\ directory. </p>\n\n<p>The protocol does it as the new jpg file is present and complete at the client's computer, </p>\n\n<p>but the protocol keeps repeating itself and writing data into the file without ending, </p>\n\n<p>leading it to have an enormous file size </p>\n\n<p>and the protocol doesn't end so I the client can access the other protocols I have.</p>\n\n<p>Can anyone notice what I am doing wrong?</p>\n\n<p><strong><em>Server Protocol:</em></strong></p>\n\n<pre><code>if data == \"screen shot\":\n    im = ImageGrab.grab()\n    im.save(r'C:\\screen.jpg')\n    file = open(r'C:\\screen.jpg','rb').read()\n\n    sizeoffile = os.stat(r'C:\\screen.jpg').st_size\n    client_socket.send(str(sizeoffile))\n    if data == \"Send file\":\n        client_socket.send(file)\n</code></pre>\n\n<p><strong>Client's Protocol:</strong></p>\n\n<pre><code>if x == \"screen shot\":\n    print \"Here you go\"\n    sizeof = my_socket.recv(1024)\n    print \"Size of file: \" + str(sizeof)\n    accumulated = bytes(0)\n    doit = True\n    file = open(r'C:\\serverscreen.jpg','wb')\n    my_socket.send(\"Send file\")\n\n    while doit:\n        if accumulated &lt; sizeof:\n            print \"Receiving...\"\n            my_socket.send(\"GOT IT\")\n            data = my_socket.recv(1024)\n            accumulated = os.stat(r'C:\\serverscreen.jpg').st_size # do a loop to check if accumulated equals sizeof to know if entire file has been, accumulated\n            print \"Accumulated: \" + str(accumulated)\n            file.write(data)\n        else:\n            doit = False\n\n    file.close()\n</code></pre>\n\n<p><strong>Update</strong></p>\n\n<p><strong>Client's Protocol:</strong></p>\n\n<pre><code>if x == \"screen shot\":\n    print \"Here you go\"\n    sizeof = int(my_socket.recv(1024))\n    print \"Size of file: \" + str(sizeof)\n    accumulated = bytes(0)\n    doit = True\n    file = open(r'C:\\serverscreen.jpg','wb')\n    my_socket.send(\"Send file\")\n    while doit:\n        if accumulated &lt; sizeof:\n            print \"Receiving...\"\n            my_socket.send(\"GOT IT\")\n            data = my_socket.recv(1024)#round(float(sizeof))))\n            accumulated += struct.unpack('l',data) #os.stat(r'C:\\serverscreen.jpg').st_size # do a loop to check if accumulated equels sizeof to know if entire file has been, accumulaed\n            print \"Accumulated: \" + str(accumulated)\n            file.write(data)\n        else:\n            doit = False\n\n    file.close()\n</code></pre>\n"}]