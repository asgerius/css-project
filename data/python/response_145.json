[{"tags": ["python", "anaconda"], "comments": [{"owner": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "edited": false, "score": 0, "creation_date": 1508372301, "post_id": 46820975, "comment_id": 80589644, "body": "looks like that package only supports py27 <a href=\"https://anaconda.org/marufr/parmap/files\" rel=\"nofollow noreferrer\">anaconda.org/marufr/parmap/files</a>"}, {"owner": {"reputation": 994, "user_id": 4905579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efe4c045d81145929c7ba8eec6e2bdcf?s=128&d=identicon&r=PG&f=1", "display_name": "Good Luck", "link": "https://stackoverflow.com/users/4905579/good-luck"}, "reply_to_user": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "edited": false, "score": 0, "creation_date": 1508372337, "post_id": 46820975, "comment_id": 80589657, "body": "I guess so... I have no idea how to get it into work  :|"}, {"owner": {"reputation": 994, "user_id": 4905579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efe4c045d81145929c7ba8eec6e2bdcf?s=128&d=identicon&r=PG&f=1", "display_name": "Good Luck", "link": "https://stackoverflow.com/users/4905579/good-luck"}, "reply_to_user": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "edited": false, "score": 0, "creation_date": 1508372366, "post_id": 46820975, "comment_id": 80589669, "body": "I might need to change the nevironement of my anaconda to python27 for this"}, {"owner": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "edited": false, "score": 0, "creation_date": 1508372415, "post_id": 46820975, "comment_id": 80589682, "body": "if there&#39;s no alternative package that supports python3.6, yes I think so"}, {"owner": {"reputation": 994, "user_id": 4905579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efe4c045d81145929c7ba8eec6e2bdcf?s=128&d=identicon&r=PG&f=1", "display_name": "Good Luck", "link": "https://stackoverflow.com/users/4905579/good-luck"}, "reply_to_user": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "edited": false, "score": 0, "creation_date": 1508372468, "post_id": 46820975, "comment_id": 80589692, "body": "I need parmap for python 36"}, {"owner": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "edited": false, "score": 0, "creation_date": 1508372539, "post_id": 46820975, "comment_id": 80589706, "body": "this repo mentions it supports python3 <a href=\"https://github.com/zeehio/parmap\" rel=\"nofollow noreferrer\">github.com/zeehio/parmap</a>"}, {"owner": {"reputation": 994, "user_id": 4905579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efe4c045d81145929c7ba8eec6e2bdcf?s=128&d=identicon&r=PG&f=1", "display_name": "Good Luck", "link": "https://stackoverflow.com/users/4905579/good-luck"}, "reply_to_user": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "edited": false, "score": 0, "creation_date": 1508372952, "post_id": 46820975, "comment_id": 80589799, "body": "That&#39;s for Linux. I need it for windows 64."}, {"owner": {"reputation": 994, "user_id": 4905579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efe4c045d81145929c7ba8eec6e2bdcf?s=128&d=identicon&r=PG&f=1", "display_name": "Good Luck", "link": "https://stackoverflow.com/users/4905579/good-luck"}, "reply_to_user": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "edited": false, "score": 0, "creation_date": 1508373205, "post_id": 46820975, "comment_id": 80589854, "body": "@downshift thanks for your help anyways."}, {"owner": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "edited": false, "score": 0, "creation_date": 1508374089, "post_id": 46820975, "comment_id": 80590029, "body": "No problem, where does it say it&#39;s only for Linux? Python is os independent if there are no window API calls,so should work the same on Windows"}, {"owner": {"reputation": 994, "user_id": 4905579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efe4c045d81145929c7ba8eec6e2bdcf?s=128&d=identicon&r=PG&f=1", "display_name": "Good Luck", "link": "https://stackoverflow.com/users/4905579/good-luck"}, "reply_to_user": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "edited": false, "score": 0, "creation_date": 1508375322, "post_id": 46820975, "comment_id": 80590290, "body": "I get packagenotfounderror if I use this:conda install -c zeehio parmap. I beleive it does not have win-64 packages."}, {"owner": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "edited": false, "score": 0, "creation_date": 1508389791, "post_id": 46820975, "comment_id": 80593635, "body": "I&#39;m on Windows 64 and python 3.4 virtual-environment, <code>parmap</code> install and runs the <a href=\"https://github.com/zeehio/parmap#advanced-multiple-parallel-tasks-running-in-parallel\" rel=\"nofollow noreferrer\">Advanced: Multiple parallel tasks running in parallel</a> screenshot: <a href=\"https://i.imgur.com/AaVTw77.png\" rel=\"nofollow noreferrer\">i.imgur.com/AaVTw77.png</a>"}], "answers": [{"tags": [], "owner": {"reputation": 12973, "user_id": 5061557, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7df554b2e75e1a1581ed3757ca4d0c82?s=128&d=identicon&r=PG&f=1", "display_name": "Grr", "link": "https://stackoverflow.com/users/5061557/grr"}, "is_accepted": true, "score": 1, "last_activity_date": 1508427301, "last_edit_date": 1592644375, "creation_date": 1508427301, "answer_id": 46833671, "question_id": 46820975, "link": "https://stackoverflow.com/questions/46820975/installing-parmap-using-anaconda3/46833671#46833671", "title": "Installing parmap using anaconda3", "body": "<p>I've seen this a good deal since using Python 3.6. What I have found is that, after receiving this message for a pacakage, quite often using pip to install a package works just fine. As is this case here. I just tested on:</p>\n<p>Python 3.6.3 :: Anaconda custom (x86_64)</p>\n<pre><code>pip install parmap\nCollecting parmap\n  Downloading parmap-1.5.1-py2.py3-none-any.whl\nInstalling collected packages: parmap\nSuccessfully installed parmap-1.5.1\n</code></pre>\n<p>I did notice that the files listed for parmap in marufr are all python 2.7 specific, which is likely causing your problem.</p>\n<p>To be more clear about the error message you are seeing it is in fact a little misleading. For an example try (on Python 3.6) <code>conda install xlutils</code>. You will see a similar message:</p>\n<blockquote>\n<p>UnsatisfiableError: The following specifications were found to be in conflict:</p>\n<p>-python 3.6*</p>\n<p>-xlutils -&gt; python 2.6*</p>\n</blockquote>\n<p>That seems to say xlutils is only available for 2.6*. But looking further into the problem with <code>conda info xlutils</code> you will see something different. I'm not including the entire readout as it includes all of the versions available, but the last entry is below.</p>\n<pre><code>xlutils 2.0.0 py35_0\n--------------------\nfile name   : xlutils-2.0.0-py35_0.tar.bz2\nname        : xlutils\nversion     : 2.0.0\nbuild string: py35_0\nbuild number: 0\nchannel     : defaults\nsize        : 70 KB\narch        : x86_64\ndate        : 2016-07-19\nlicense     : MIT\nmd5         : d73edc0acad935f1835f34a00d6454f0\nnoarch      : None\nplatform    : darwin\nurl         : https://repo.continuum.io/pkgs/free/osx-64/xlutils-2.0.0-py35_0.tar.bz2\ndependencies:\n    python 3.5*\n    xlrd &gt;=0.7.2\n    xlwt &gt;=0.7.4\n</code></pre>\n<p>Clearly this package is available for Python 3.5 despite the misleading message from <code>conda install</code>.You could repeat this with the parmap package (after adding the channel to your config with <code>conda config --add channels marufr</code>), but as I mentioned there is only the one version in that channel so it isn't a great example. To be fair, xlutils doesn't have a Python 3.6 specific version out yet, but the 3.5 version works in 3.6 and can be installed using <code>pip install xlutils</code>.</p>\n<p>In general I believe the case is just that a handful of packages haven't had the required files added yet.</p>\n"}, {"tags": [], "owner": {"reputation": 3262, "user_id": 446149, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/65a4cf95d25e268e1390602dfcba08d6?s=128&d=identicon&r=PG", "display_name": "zeehio", "link": "https://stackoverflow.com/users/446149/zeehio"}, "is_accepted": false, "score": 2, "last_activity_date": 1559029381, "creation_date": 1559029381, "answer_id": 56337288, "question_id": 46820975, "link": "https://stackoverflow.com/questions/46820975/installing-parmap-using-anaconda3/56337288#56337288", "title": "Installing parmap using anaconda3", "body": "<p><em>(parmap author here)</em></p>\n\n<p>I recently realized the conda packages where not set to be arch-independent and I was building only linux packages in my channel. This is the reason why it was not possible to install <code>parmap</code> with <code>conda install -c zeehio parmap</code> on windows.</p>\n\n<p>Anyway, I added parmap to conda-forge, so now it is possible to:</p>\n\n<pre><code>conda install -c conda-forge parmap\n</code></pre>\n\n<p>Or </p>\n\n<pre><code>pip install parmap\n</code></pre>\n\n<p>Whatever option you like best.</p>\n\n<p>parmap works with python2.7 and python3 (as of May 2019, tested on python 3.3 through 3.7) and it works on all platforms supported by multiprocessing (Windows, OSX, Linux included).</p>\n"}], "owner": {"reputation": 994, "user_id": 4905579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efe4c045d81145929c7ba8eec6e2bdcf?s=128&d=identicon&r=PG&f=1", "display_name": "Good Luck", "link": "https://stackoverflow.com/users/4905579/good-luck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 335, "favorite_count": 0, "accepted_answer_id": 46833671, "answer_count": 2, "score": 0, "last_activity_date": 1559029381, "creation_date": 1508371182, "last_edit_date": 1508425597, "question_id": 46820975, "link": "https://stackoverflow.com/questions/46820975/installing-parmap-using-anaconda3", "title": "Installing parmap using anaconda3", "body": "<p>I want to install parmap in anaconda3 for windows 64. If I try  <code>conda install -c marufr parmap</code>, I receive an error reporting a conflict between python 2.7 and python 3.6 which is the current python version of my anaconda3. Is there any way to solve this issue? This is the error that I am receiving:</p>\n\n<blockquote>\n  <p>UnsatisfiableError: The following specifications were found to be in conflict:</p>\n  \n  <p>-parmap->python 2.7*</p>\n  \n  <p>-python 3.6*</p>\n</blockquote>\n"}, {"tags": ["python", "python-3.x", "while-loop"], "answers": [{"comments": [{"owner": {"reputation": 139, "user_id": 6209497, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/fGnsi.png?s=128&g=1", "display_name": "CholoBoy", "link": "https://stackoverflow.com/users/6209497/choloboy"}, "edited": false, "score": 0, "creation_date": 1508371886, "post_id": 46820992, "comment_id": 80589548, "body": "But won&#39;t that cause a problem since &#39;game&#39; is defined after the while loop?"}, {"owner": {"reputation": 139, "user_id": 6209497, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/fGnsi.png?s=128&g=1", "display_name": "CholoBoy", "link": "https://stackoverflow.com/users/6209497/choloboy"}, "edited": false, "score": 0, "creation_date": 1508372654, "post_id": 46820992, "comment_id": 80589740, "body": "After testing that code for a couple times I found that when I type &#39;done&#39; it adds it to the list so I just added &quot;games.remove(&#39;done&#39;)&quot; after the first while loop"}, {"owner": {"reputation": 30484, "user_id": 2875563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/umbJB.jpg?s=128&g=1", "display_name": "Reblochon Masque", "link": "https://stackoverflow.com/users/2875563/reblochon-masque"}, "reply_to_user": {"reputation": 139, "user_id": 6209497, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/fGnsi.png?s=128&g=1", "display_name": "CholoBoy", "link": "https://stackoverflow.com/users/6209497/choloboy"}, "edited": false, "score": 0, "creation_date": 1508372769, "post_id": 46820992, "comment_id": 80589761, "body": "Yes, you are correct, I fixed it, sorry, I am just getting warmed up."}, {"owner": {"reputation": 139, "user_id": 6209497, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/fGnsi.png?s=128&g=1", "display_name": "CholoBoy", "link": "https://stackoverflow.com/users/6209497/choloboy"}, "edited": false, "score": 0, "creation_date": 1508372879, "post_id": 46820992, "comment_id": 80589781, "body": "Hint: look at the last piece of code there s apostrophe missing and a parenthesis"}], "tags": [], "owner": {"reputation": 30484, "user_id": 2875563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/umbJB.jpg?s=128&g=1", "display_name": "Reblochon Masque", "link": "https://stackoverflow.com/users/2875563/reblochon-masque"}, "is_accepted": true, "score": 1, "last_activity_date": 1508372940, "last_edit_date": 1508372940, "creation_date": 1508371304, "answer_id": 46820992, "question_id": 46820963, "link": "https://stackoverflow.com/questions/46820963/adding-game-names-to-a-file/46820992#46820992", "title": "Adding game names to a file?", "body": "<p>You currently have an infinite loop that writes the last game name entered in the file, indefinitely.  </p>\n\n<p>You must place the input prompt in the while loop.<br>\nI think it is better to collect all data in a list first, then write the file.</p>\n\n<pre><code>filename = 'games.txt'\nprint(\"When you want to finish adding games just type 'done'\")\n\ngames = []\ngame = ''\nwhile True:\n    game = input('Whats your favorite game? ')\n    if game == 'done':\n        break\n    games.append(game)\n\nwith open(filename, 'w') as file_object:\n    for game in games:\n        file_object.write(game + str(\"\\n\"))\n</code></pre>\n"}], "owner": {"reputation": 139, "user_id": 6209497, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/fGnsi.png?s=128&g=1", "display_name": "CholoBoy", "link": "https://stackoverflow.com/users/6209497/choloboy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 46820992, "answer_count": 1, "score": 1, "last_activity_date": 1508377951, "creation_date": 1508371113, "last_edit_date": 1508377951, "question_id": 46820963, "link": "https://stackoverflow.com/questions/46820963/adding-game-names-to-a-file", "title": "Adding game names to a file?", "body": "<p>Hello I'm doing a school assignment with these instructions</p>\n\n<blockquote>\n  <p>Write a while loop that prompts users for their favorite game. When\n  they enter the name of the game, print a message to the screen and add\n  a line recording their log in a file called games.txt. Make sure each\n  entry appears on a new line in the file.</p>\n</blockquote>\n\n<p>I'm having trouble making the loop ask multiple times instead of just adding the game over and over again. Also, I don't want the <code>games.txt</code> file to lose the previous games that were added.</p>\n\n<hr>\n\n<p>This is my current code:</p>\n\n<pre><code>filename = 'games.txt'\nprint(\"When you want to finish adding games just type 'done'\")\ngame = input('Whats your favorite game? ')\n\nwith open(filename, 'w') as file_object:\n    while game != 'done':\n        print(game)\n        file_object.write(game + str(\"\\n)\n</code></pre>\n\n<p>As you can see if I run it and I put \"Destiny 2\" as a game it will keep adding the destiny 2 to the file named <code>games.txt</code> until I stop the program.</p>\n"}, {"tags": ["python", "xml", "openstreetmap", "elementtree", "itertools"], "comments": [{"owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 2, "creation_date": 1508371577, "post_id": 46820942, "comment_id": 80589451, "body": "You do it the same way you instantiate any other class at any other place in your code."}], "answers": [{"tags": [], "owner": {"reputation": 635, "user_id": 4509609, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/81a4b6c0790fb7799805aee03082a945?s=128&d=identicon&r=PG&f=1", "display_name": "Cecilia Lee", "link": "https://stackoverflow.com/users/4509609/cecilia-lee"}, "is_accepted": false, "score": 0, "last_activity_date": 1508373599, "creation_date": 1508373599, "answer_id": 46821271, "question_id": 46820942, "link": "https://stackoverflow.com/questions/46820942/how-to-create-an-instance-of-one-class-object-with-the-function-of-another-class/46821271#46821271", "title": "How to create an instance of one class object with the function of another class object in Python?", "body": "<p>I've found a way:</p>\n\n<pre><code>class Mother(object):\n    def __init__(self):\n        pass\n\n    def reproduce(self):\n        return Child()\n\nclass Child(object):\n    def __init__(self):\n        pass\n</code></pre>\n"}], "owner": {"reputation": 635, "user_id": 4509609, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/81a4b6c0790fb7799805aee03082a945?s=128&d=identicon&r=PG&f=1", "display_name": "Cecilia Lee", "link": "https://stackoverflow.com/users/4509609/cecilia-lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1508373599, "creation_date": 1508370857, "question_id": 46820942, "link": "https://stackoverflow.com/questions/46820942/how-to-create-an-instance-of-one-class-object-with-the-function-of-another-class", "title": "How to create an instance of one class object with the function of another class object in Python?", "body": "<p>I'm trying to use the <code>iterparse</code> funciton of ElementTree to parse a large OpenStreetMap (OSM) XML file. I'm trying to define my OSM file and its elements as class objects to help with my later analysis.</p>\n\n<p>Now I've successfully defined an <code>OSM</code> class: </p>\n\n<ul>\n<li><code>parse()</code> uses a generator to iterparse the OSM file. It yields <code>elem</code> (elements in OpenStreetMap).</li>\n<li><code>reset()</code> reset the generator to avoid exhaustion.</li>\n<li><code>slice()</code> uses itertools to make views of the OSM file by passing the index of start, stop and step. It returns a list of <code>elem</code>.</li>\n<li><code>iloc()</code> called the slice function to locate a specific <code>elem</code>.</li>\n<li><code>getchild()</code> returns the secondary element of an element with a given index.</li>\n</ul>\n\n<hr>\n\n<p>My problem is: <strong>I want to make another class <code>elem</code> to create functions on a single element. However, I must only generate an instance of <code>elem</code> through calling a function of <code>OSM</code>. \ni.e. I have <em>class1</em>. And when I call a function of an instance of <em>class1</em>, it should create and return an instance of <em>class2</em>.</strong></p>\n\n<p>How can I achive this?</p>\n\n<p>Here is my current code:</p>\n\n<pre><code>import xml.etree.cElementTree as ET\nfrom collections import defaultdict\nimport itertools\n\n\nclass OSM:\n\n    def __init__(self, data):\n        self.data = data\n        self.parser = ET.iterparse(self.data, events=('start', ))\n\n    def parse(self):\n        _, root = next(self.parser)\n        for event, elem in self.parser:\n            yield elem\n            elem.clear()\n            root.clear()\n\n    def reset(self):\n        self.parser = ET.iterparse(self.data, events=('start', ))\n\n    def slice(self, start=0, stop=1, step=1):\n        self.reset()\n        view = []\n        for i in itertools.islice(self.parse(), start, stop, step):\n            view.append(i)\n        return view\n\n    def iloc(self, index):\n        self.reset()\n        return self.slice(index, index + 1)[0]\n\n    def getchild(self, index):\n        self.reset()\n        elem = self.iloc(index)\n        childdict = defaultdict(list)\n        for i, child in enumerate(list(elem)):\n            childdict[i] = [child.tag, child.attrib]\n        return dict(childdict)\n</code></pre>\n"}, {"tags": ["python", "sql-server", "amazon-web-services", "psycopg2"], "comments": [{"owner": {"reputation": 42040, "user_id": 4237701, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/OeLef.jpg?s=128&g=1", "display_name": "helloV", "link": "https://stackoverflow.com/users/4237701/hellov"}, "edited": false, "score": 0, "creation_date": 1508371588, "post_id": 46820932, "comment_id": 80589452, "body": "I think you mixed up the values for <code>dbname</code> and <code>host</code>."}, {"owner": {"reputation": 93705, "user_id": 610569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0e9087f2672b0e4f28d91266acf9ce57?s=128&d=identicon&r=PG", "display_name": "alvas", "link": "https://stackoverflow.com/users/610569/alvas"}, "reply_to_user": {"reputation": 42040, "user_id": 4237701, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/OeLef.jpg?s=128&g=1", "display_name": "helloV", "link": "https://stackoverflow.com/users/4237701/hellov"}, "edited": false, "score": 0, "creation_date": 1508371664, "post_id": 46820932, "comment_id": 80589483, "body": "When I swap the values for <code>dbname</code> and <code>host</code>, I get <code>OperationalError: FATAL:  database &quot;jdbc:redshift&quot; does not exist</code> =("}, {"owner": {"reputation": 42040, "user_id": 4237701, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/OeLef.jpg?s=128&g=1", "display_name": "helloV", "link": "https://stackoverflow.com/users/4237701/hellov"}, "edited": false, "score": 0, "creation_date": 1508371917, "post_id": 46820932, "comment_id": 80589555, "body": "Do not know much about Redshift. But from the URL, the database is <code>sample_database</code>."}, {"owner": {"reputation": 93705, "user_id": 610569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0e9087f2672b0e4f28d91266acf9ce57?s=128&d=identicon&r=PG", "display_name": "alvas", "link": "https://stackoverflow.com/users/610569/alvas"}, "reply_to_user": {"reputation": 42040, "user_id": 4237701, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/OeLef.jpg?s=128&g=1", "display_name": "helloV", "link": "https://stackoverflow.com/users/4237701/hellov"}, "edited": false, "score": 0, "creation_date": 1508372310, "post_id": 46820932, "comment_id": 80589651, "body": "I&#39;ve got it to work with the updates on the question but I&#39;m still unclear what&#39;s happening. =("}, {"owner": {"reputation": 42040, "user_id": 4237701, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/OeLef.jpg?s=128&g=1", "display_name": "helloV", "link": "https://stackoverflow.com/users/4237701/hellov"}, "edited": false, "score": 0, "creation_date": 1508372549, "post_id": 46820932, "comment_id": 80589711, "body": "What is not clear? <code>jdbc:redshift</code> is not a host, just a driver to connect to the DB."}, {"owner": {"reputation": 93705, "user_id": 610569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0e9087f2672b0e4f28d91266acf9ce57?s=128&d=identicon&r=PG", "display_name": "alvas", "link": "https://stackoverflow.com/users/610569/alvas"}, "reply_to_user": {"reputation": 42040, "user_id": 4237701, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/OeLef.jpg?s=128&g=1", "display_name": "helloV", "link": "https://stackoverflow.com/users/4237701/hellov"}, "edited": false, "score": 0, "creation_date": 1508372993, "post_id": 46820932, "comment_id": 80589809, "body": "It&#39;s unclear what are the flags set by <code>psycopg2</code>? e.g. I supposed <code>ssl=true</code> but for <code>sslfactory</code> how did psycopg2 know it&#39;s <code>com.amazon.redshift.ssl.NonValidatingFactory</code>? Pretty magical to me =)"}], "answers": [{"tags": [], "owner": {"reputation": 42040, "user_id": 4237701, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/OeLef.jpg?s=128&g=1", "display_name": "helloV", "link": "https://stackoverflow.com/users/4237701/hellov"}, "is_accepted": true, "score": 2, "last_activity_date": 1508372451, "creation_date": 1508372451, "answer_id": 46821150, "question_id": 46820932, "link": "https://stackoverflow.com/questions/46820932/how-to-set-the-psycopg2-parameters-given-the-uri-in-sql-workbench/46821150#46821150", "title": "How to set the psycopg2 parameters given the URI in SQL workbench?", "body": "<p>From the URL:</p>\n\n<blockquote>\n  <p>jdbc:redshift://sample.redshift.openbridge.io:5439/sample_database?ssl=true&amp;sslfactory=com.amazon.redshift.ssl.NonValidatingFactory</p>\n</blockquote>\n\n<pre><code>host: sample.redshift.openbridge.io\nport: 5439\ndatabase: sample_database\n</code></pre>\n"}], "owner": {"reputation": 93705, "user_id": 610569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0e9087f2672b0e4f28d91266acf9ce57?s=128&d=identicon&r=PG", "display_name": "alvas", "link": "https://stackoverflow.com/users/610569/alvas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1208, "favorite_count": 0, "accepted_answer_id": 46821150, "answer_count": 1, "score": 0, "last_activity_date": 1508372451, "creation_date": 1508370813, "last_edit_date": 1508372284, "question_id": 46820932, "link": "https://stackoverflow.com/questions/46820932/how-to-set-the-psycopg2-parameters-given-the-uri-in-sql-workbench", "title": "How to set the psycopg2 parameters given the URI in SQL workbench?", "body": "<p>From the this <a href=\"https://blog.openbridge.com/definitive-guide-for-connecting-sql-workbench-j-to-amazon-redshift-57d06aa32805\" rel=\"nofollow noreferrer\">SQL workbench tutorial</a></p>\n\n<p>Given the URI:</p>\n\n<blockquote>\n  <p>jdbc:redshift://sample.redshift.openbridge.io:5439/sample_database?ssl=true&amp;sslfactory=com.amazon.redshift.ssl.NonValidatingFactory</p>\n</blockquote>\n\n<p>Additionally, I just need the <code>Username</code> and <code>Password</code> to connect to the redshift server on AWS.</p>\n\n<p>If I'm using <code>psycopg2</code> in Python, I would require the following fields to establish a connection to the database:</p>\n\n<ul>\n<li><code>dbname</code></li>\n<li><code>host</code></li>\n<li><code>port</code></li>\n<li><code>user</code></li>\n<li><code>password</code></li>\n</ul>\n\n<p>E.g. </p>\n\n<pre><code>import psycopg2\ncon=psycopg2.connect(dbname= 'dbname', host='host', \n                     port= 'port', user= 'user', password= 'pwd')\ncon.connect()\n</code></pre>\n\n<p>Given the URI as shown above, I figured these values:</p>\n\n<ul>\n<li><code>dbname</code> = <code>sample.redshift.openbridge.io</code></li>\n<li><code>host</code> = <code>jdbc:redshift://</code></li>\n<li><code>port</code> = <code>5439</code></li>\n<li><code>user</code> = The Username to connect as like the SQL workbench</li>\n<li><code>password</code> = My Password for the user</li>\n</ul>\n\n<p>But I think the values I've tried to split up from the URI is wrong:</p>\n\n<pre><code>import psycopg2\ndbname='sample.redshift.openbridge.io'\nhost='jdbc:redshift'\nport=5439\nuser='Username'\npassword='Password'\ncon=psycopg2.connect(dbname, host, port, user, password)\n\nOperationalError: could not translate host name \"jdbc:redshift:\" to address: nodename nor servname provided, or not known\n</code></pre>\n\n<p><strong>What would be the appropriate values for the <code>psycopg2</code> parameters given the URI above?</strong></p>\n\n<p>How about the <code>ssl=true</code> and <code>sslfactory=com.amazon.redshift.ssl.NonValidatingFactory</code> settings and \n<code>sample_database</code> database? <strong>How do I set these as the <code>con</code> parameters in psycopg2?</strong></p>\n\n<p>My environment settings:</p>\n\n<ul>\n<li>Mac OS X</li>\n<li>Python 3</li>\n<li><code>psycopg2.__version__</code> = 2.7.3.1 (dt dec pq3 ext lo64)</li>\n</ul>\n\n<hr>\n\n<p>I've got it to work with:</p>\n\n<pre><code>import psycopg2\ndbname='sample_database'\nhost='sample.redshift.openbridge.io'\nport=5439\nuser='Username'\npassword='Password'\ncon=psycopg2.connect(dbname, host, port, user, password)\n</code></pre>\n\n<p>But I'm not sure about the ssl properties that was set for the connection. </p>\n\n<p><strong>Is <code>ssl=true</code> and <code>sslfactory=com.amazon.redshift.ssl.NonValidatingFactory</code> when I connect to through <code>psycopg2</code> in the above manner?</strong></p>\n\n<p><strong>Does the <code>psycopg2</code> automatically set <code>jdbc:redshift</code> as the protocol?</strong></p>\n"}, {"tags": ["python", "python-3.x", "list", "random", "range"], "comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1508371197, "post_id": 46820909, "comment_id": 80589344, "body": "Usually, you don&#39;t need a list for this kind of sequence of 1-character strings; just use a single string <code>list = &#39;abc...xyz1234567890 ABC...XYZ&#39;</code>"}, {"owner": {"reputation": 419, "user_id": 7520564, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5dbda10ea63a59366dba00693dc7cab0?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Hackman", "link": "https://stackoverflow.com/users/7520564/michael-hackman"}, "edited": false, "score": 0, "creation_date": 1508371197, "post_id": 46820909, "comment_id": 80589345, "body": "as a side note, if your list is similar to that have you seen python&#39;s string module? Specifically string.ascii_letters and string.digits?"}, {"owner": {"reputation": 419, "user_id": 7520564, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5dbda10ea63a59366dba00693dc7cab0?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Hackman", "link": "https://stackoverflow.com/users/7520564/michael-hackman"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1508371307, "post_id": 46820909, "comment_id": 80589379, "body": "after importing string, mylist = list(string.ascii_lowercase + string.digits + &quot; &quot; + string.ascii_uppercase) will give you almost exactly what you have (with the position of 0 changed), or remove the list() to get what @chepner suggested."}], "answers": [{"tags": [], "owner": {"reputation": 30484, "user_id": 2875563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/umbJB.jpg?s=128&g=1", "display_name": "Reblochon Masque", "link": "https://stackoverflow.com/users/2875563/reblochon-masque"}, "is_accepted": true, "score": 4, "last_activity_date": 1508370785, "creation_date": 1508370785, "answer_id": 46820926, "question_id": 46820909, "link": "https://stackoverflow.com/questions/46820909/random-sample-within-a-certain-range-in-a-list-array-python-3-x/46820926#46820926", "title": "Random sample within a certain range in a list (array) | Python 3.x", "body": "<p>You can slice the array, to sample it.</p>\n\n<pre><code>random.sample(seq[:26], k=8)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 312, "user_id": 8781016, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed2e8ca657a69d1e6d3039d127074943?s=128&d=identicon&r=PG&f=1", "display_name": "saband", "link": "https://stackoverflow.com/users/8781016/saband"}, "is_accepted": false, "score": 1, "last_activity_date": 1508371401, "creation_date": 1508371401, "answer_id": 46821004, "question_id": 46820909, "link": "https://stackoverflow.com/questions/46820909/random-sample-within-a-certain-range-in-a-list-array-python-3-x/46821004#46821004", "title": "Random sample within a certain range in a list (array) | Python 3.x", "body": "<p>Firsty you need the <a href=\"https://docs.python.org/2/library/random.html\" rel=\"nofollow noreferrer\">random module</a>:</p>\n\n<pre><code>import random\n</code></pre>\n\n<p>Then I would use this solution:</p>\n\n<pre><code>your_list = ['a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q',\n        'r','s','t','u','v','w','x','y','z','1','2','3','4','5','6','7','8','9',\n        '0',\" \",'A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P',\n        'Q','R','S','T','U','V','W','X','Y','Z']\n\nfirst_26_characters = your_list[0:26] # get items from 0 to 26 in new list\nrandom.shuffle(first_26_characters) # shuffle new list\nrandom_8_characters = first_26_characters[0:8] # get first 8 characters because after shuffle they are random\n</code></pre>\n\n<p>I hope this helps!</p>\n"}], "owner": {"reputation": 23, "user_id": 8798533, "user_type": "registered", "profile_image": "https://graph.facebook.com/232784733916862/picture?type=large", "display_name": "Kieran Ryan", "link": "https://stackoverflow.com/users/8798533/kieran-ryan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 46820926, "answer_count": 2, "score": 2, "last_activity_date": 1508371401, "creation_date": 1508370658, "last_edit_date": 1508371074, "question_id": 46820909, "link": "https://stackoverflow.com/questions/46820909/random-sample-within-a-certain-range-in-a-list-array-python-3-x", "title": "Random sample within a certain range in a list (array) | Python 3.x", "body": "<p>I have a list with many characters in it like such:</p>\n\n<pre><code>list = ['a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q',\n        'r','s','t','u','v','w','x','y','z','1','2','3','4','5','6','7','8','9',\n        '0',\" \",'A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P',\n        'Q','R','S','T','U','V','W','X','Y','Z']\n</code></pre>\n\n<p>I want the program to randomly pick 8 characters within the first 26 (lowercase letters) items in my list. I will not delete or separate the other items in this array as I need them later for a similar thing.</p>\n\n<p>I am somewhat new to programming and I prefer a simple solution, although I am not stopping you from putting something more complex out there for others to see.  </p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["python", "json", "regex", "python-3.x", "pandas"], "comments": [{"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 1, "creation_date": 1508380847, "post_id": 46820898, "comment_id": 80591550, "body": "Doing this is almost certainly the wrong approach. Better would be finding what does the extra level of escaping, and using the same tool to un-escape the strings."}, {"owner": {"reputation": 501, "user_id": 3120554, "user_type": "registered", "accept_rate": 48, "profile_image": "https://graph.facebook.com/1030985049/picture?type=large", "display_name": "user3120554", "link": "https://stackoverflow.com/users/3120554/user3120554"}, "reply_to_user": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1508412663, "post_id": 46820898, "comment_id": 80605007, "body": "@DanielH if by tool you mean what provided the data that was then saved into json, then that would be through scraping twitter? So I guess i can&#39;t really do anything from Twitter side?"}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1508428057, "post_id": 46820898, "comment_id": 80615368, "body": "Wait... what do you get when you say <code>print(data[&#39;full_text&#39;])</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 501, "user_id": 3120554, "user_type": "registered", "accept_rate": 48, "profile_image": "https://graph.facebook.com/1030985049/picture?type=large", "display_name": "user3120554", "link": "https://stackoverflow.com/users/3120554/user3120554"}, "edited": false, "score": 0, "creation_date": 1508412955, "post_id": 46822056, "comment_id": 80605187, "body": "The original json I use (before i load it into python), if i were to open it in notepad++, and find that tweet, I would see the backspace before the quote mark (i checked a few different tweets, and they all suffer from the same issue). I&#39;m not quite sure I understand the \\&#40;?=\\&quot;), I replaced my expression with it (enclosed in single quotes) although the compilor is complaining about unbalanced parenthesis at position 5? (a bit stupid, but if i matters, I added in the preceding &#39;r&#39; too. If fixed the error, but when i checked the new json, the backslash was still there :("}, {"owner": {"reputation": 501, "user_id": 3120554, "user_type": "registered", "accept_rate": 48, "profile_image": "https://graph.facebook.com/1030985049/picture?type=large", "display_name": "user3120554", "link": "https://stackoverflow.com/users/3120554/user3120554"}, "edited": false, "score": 0, "creation_date": 1508413659, "post_id": 46822056, "comment_id": 80605594, "body": "if i understand that expression right \\&#40;?=\\&quot;), from my link, your&#39;e matching (based on the (?=...) for the first and only instance of \\&quot;. although,  I&#39;m not sure how the two \\\\ does anything other than remove the quirk for the second \\, causing the expression to search ofr \\\\&quot;. I also noticed that the number of back slashes on the outside seems to control that parenthesis error"}, {"owner": {"reputation": 501, "user_id": 3120554, "user_type": "registered", "accept_rate": 48, "profile_image": "https://graph.facebook.com/1030985049/picture?type=large", "display_name": "user3120554", "link": "https://stackoverflow.com/users/3120554/user3120554"}, "edited": false, "score": 0, "creation_date": 1508417225, "post_id": 46822056, "comment_id": 80607712, "body": "i even tried this with re.sub as an anonymous function but it didnt work :(  data[&#39;full_text&#39;] = data[&#39;full_text&#39;].apply(lambda x: re.sub(r&#39;\\&#40;?=\\&quot;)&#39;,&#39;&quot;&#39;,x))"}, {"owner": {"reputation": 501, "user_id": 3120554, "user_type": "registered", "accept_rate": 48, "profile_image": "https://graph.facebook.com/1030985049/picture?type=large", "display_name": "user3120554", "link": "https://stackoverflow.com/users/3120554/user3120554"}, "edited": false, "score": 0, "creation_date": 1508417700, "post_id": 46822056, "comment_id": 80608024, "body": "i ran this and it looks like the issue isnt the regex !!!! print(data[&#39;full_text&#39;].loc[data[&#39;id_str&#39;] == 791046066464358200])"}, {"owner": {"reputation": 501, "user_id": 3120554, "user_type": "registered", "accept_rate": 48, "profile_image": "https://graph.facebook.com/1030985049/picture?type=large", "display_name": "user3120554", "link": "https://stackoverflow.com/users/3120554/user3120554"}, "edited": false, "score": 0, "creation_date": 1508418004, "post_id": 46822056, "comment_id": 80608236, "body": "the problem seems to come from my last line data.to_json(&#39;new_abc_short.json&#39;,orient=&#39;records&#39;)..... i remove the back slash and to_json is reintroducing it. Although still not sure how this could be fixed unless I&#39;m looking for a specific flag"}], "tags": [], "owner": {"reputation": 2784, "user_id": 1487843, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1BFY8.jpg?s=128&g=1", "display_name": "Marc Lambrichs", "link": "https://stackoverflow.com/users/1487843/marc-lambrichs"}, "is_accepted": true, "score": 1, "last_activity_date": 1508382315, "last_edit_date": 1508382315, "creation_date": 1508380619, "answer_id": 46822056, "question_id": 46820898, "link": "https://stackoverflow.com/questions/46820898/python3-regex-not-changing-to/46822056#46822056", "title": "Python3 regex not changing \\&quot; to &quot;", "body": "<p>Ow, I missed the pandas hint, so pandas replace <em>does</em> use regexes. But, to be clear, <a href=\"https://docs.python.org/3/library/stdtypes.html#str.replace\" rel=\"nofollow noreferrer\">str.replace</a> doesn't work with regexes. <a href=\"https://docs.python.org/3/library/re.html#re.sub\" rel=\"nofollow noreferrer\">re.sub</a> does.</p>\n\n<p>Now</p>\n\n<ul>\n<li>to match a single backslash, your regex is: <code>\"\\\\\"</code></li>\n<li>string to describe that regex: <code>\"\\\\\\\\\"</code></li>\n<li>when using a raw string, a double backslash is enough: <code>r'\\\\'</code></li>\n</ul>\n\n<p>If your string <em>really</em> contains a <code>\\</code> preceding a <code>\"</code>, a regex that would do is:</p>\n\n<pre><code>\\\\(?=\\\")\n</code></pre>\n\n<p>which does a lookahead for your <code>\"</code> (Look at <a href=\"https://regex101.com/r/yHFSev/2\" rel=\"nofollow noreferrer\">regex101</a>). </p>\n\n<p>You would have to use something like:</p>\n\n<pre><code>re.sub(r'\\\\(?=\\\")',\"\",s,0)\n</code></pre>\n\n<p>or a pandas equivalent using that regex.</p>\n"}], "owner": {"reputation": 501, "user_id": 3120554, "user_type": "registered", "accept_rate": 48, "profile_image": "https://graph.facebook.com/1030985049/picture?type=large", "display_name": "user3120554", "link": "https://stackoverflow.com/users/3120554/user3120554"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 0, "accepted_answer_id": 46822056, "answer_count": 1, "score": 0, "last_activity_date": 1508395273, "creation_date": 1508370571, "last_edit_date": 1508395273, "question_id": 46820898, "link": "https://stackoverflow.com/questions/46820898/python3-regex-not-changing-to", "title": "Python3 regex not changing \\&quot; to &quot;", "body": "<p>i have a json file filled with user comments (from web scraping) which I've pulled into python with pandas</p>\n\n<pre><code>import pandas as pd\n\ndata = pd.DataFrame(pd.read_json(filename, orient=columnName,encoding=\"utf-8\"),columns=columnName)\ndata['full_text'] = data['full_text'].replace('^@ABC(\\\\u2019s)*[ ,\\n]*', '', regex=True)\ndata['full_text'] = data['full_text'].replace('(\\\\u2019)', \"'\", regex=True)\ndata.to_json('new_abc_short.json',orient='records')\n</code></pre>\n\n<p>The messages don't completely match the respective messages online. (emojis shown as \\u0234 or something, apostrophes as \\u2019, forward slash in links, and quote marks have back slash.</p>\n\n<p>i want to clean them up so i learnt some regex, so i can pull into python, clean them up and then resave them back to json in a different name (for now) (<a href=\"https://docs.python.org/3/howto/regex.html\" rel=\"nofollow noreferrer\">https://docs.python.org/3/howto/regex.html</a>)</p>\n\n<p>second line helps to remove the twitter handle (if it exists in only in the beginning), then removes 's if it was used (e.g. @ABC's ). If there was no twitter handle at the beginning (maybe used in the middle of the message) then that is kept. then it removes any spaces and commas that were left behind (again only at the beginning of the string)\ne.g. \"@ABC, hi there\" becomes \"hi there\". \"hi there @ABC\" stays the same. \"@ABC's twitter is big\" would become \"twitter is big\"</p>\n\n<p>third line helps replace every apostrophe that could not be shown (e.g. don\\u2019t changes back to don't)</p>\n\n<p>i have thousands of records (not all of them have issues with apostrophes, quotes, links etc), and based on the very small examples i've looked at, they seem to work</p>\n\n<p>but my third one doesn't work:</p>\n\n<pre><code>data['full_text'] = data['full_text'].replace('\\\\\"', '\"', regex=True) \n</code></pre>\n\n<p>Example message in the json: \"full_text\":\"@ABC How can you \\\"accidentally close\\\" my account\"</p>\n\n<p>i want to remove the \\ next to the double quotes so it looks like the real message (i assume it is a escape character which the user obviously didn't type)</p>\n\n<p>but no matter what i do, i can't remove it</p>\n\n<p>from my regex learning, \" is't a metacharacter. so backslash shouldn't even be there. But anyway, I've tried:</p>\n\n<pre><code>\\\\\" (which i think should be the obvious one, i have \\\", no special quirk in \" but there is in \\ so i need another back slash to escape that)\n\\\\\\\\\" (some forums posts online mention needing 4 slashes\n\\\\\\\" ( i think someone mention in the forum posts that they got it workin with 3) \n\\\\\\(\\\")  (i know that brackets provide groupings so i tried different combinations)\n(\\\\\\\\\")\n</code></pre>\n\n<p>all of the above expression i encased in single quotes, and they didn't work. I thought maybe the double quote was the problem since i only had one, so i replaced the single quotes with single quotes x3</p>\n\n<pre><code>'''\\\\\"'''\n</code></pre>\n\n<p>but none of the above worked for triple single quotes either</p>\n\n<p>I keep rechecking the newly saved json and i keep seeing:</p>\n\n<p>\"full_text\":\"How can you \\\"accidentally close\\\" my account\"\n(i.e. removing @ABC with space worked, but not the back slash bit)</p>\n\n<p>originally, i tried looking into converting these unicode issues i.e. using encoding=\"utf-8\") although my experience in this is limited and it kept failing, so regex is my best option</p>\n"}, {"tags": ["python", "python-3.x", "pandas", "csv"], "answers": [{"comments": [{"owner": {"reputation": 603, "user_id": 1781482, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/1b81aacc445c4dea2b16b9c55205aafc?s=128&d=identicon&r=PG", "display_name": "user1781482", "link": "https://stackoverflow.com/users/1781482/user1781482"}, "edited": false, "score": 0, "creation_date": 1508371080, "post_id": 46820910, "comment_id": 80589305, "body": "@coldspeed I&#39;m super impressed how this works with 2 lines of code! Any way to skip the first column with the 0-5? I need to find a good book and learn pandas!"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 603, "user_id": 1781482, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/1b81aacc445c4dea2b16b9c55205aafc?s=128&d=identicon&r=PG", "display_name": "user1781482", "link": "https://stackoverflow.com/users/1781482/user1781482"}, "edited": false, "score": 1, "creation_date": 1508371110, "post_id": 46820910, "comment_id": 80589313, "body": "@user1781482 Edited, set <code>index=False</code> :-)"}], "tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 1, "last_activity_date": 1508371102, "last_edit_date": 1508371102, "creation_date": 1508370659, "answer_id": 46820910, "question_id": 46820888, "link": "https://stackoverflow.com/questions/46820888/dictionary-data-to-csv-with-pandas-in-python-3/46820910#46820910", "title": "Dictionary data to CSV with Pandas in Python 3", "body": "<p><code>pd.DataFrame</code> + <code>melt</code>.</p>\n\n<pre><code>df = pd.DataFrame(dct).melt(var_name='group', value_name='ip')\nprint(df)\n  group           ip\n0     A  192.168.1.1\n1     A  192.168.1.4\n2     B  192.168.1.2\n3     B  192.168.1.5\n4     C  192.168.1.3\n5     C  192.168.1.6\n</code></pre>\n\n<p>Save to a CSV using <code>df.to_csv</code>:</p>\n\n<pre><code>df.to_csv('out.csv', sep=',', index=False)\n</code></pre>\n"}], "owner": {"reputation": 603, "user_id": 1781482, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/1b81aacc445c4dea2b16b9c55205aafc?s=128&d=identicon&r=PG", "display_name": "user1781482", "link": "https://stackoverflow.com/users/1781482/user1781482"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 0, "accepted_answer_id": 46820910, "answer_count": 1, "score": 0, "last_activity_date": 1508371102, "creation_date": 1508370492, "question_id": 46820888, "link": "https://stackoverflow.com/questions/46820888/dictionary-data-to-csv-with-pandas-in-python-3", "title": "Dictionary data to CSV with Pandas in Python 3", "body": "<p>I have the code below that turns a CSV with two columns into a dictionary:</p>\n\n<pre><code>import pandas as pd\n\ndf = pd.read_csv('file.csv', sep=',')\ndct = df.groupby('group').ip.apply(lambda x: x.tolist()).to_dict()\n\nprint(dct)\n{'A': ['192.168.1.1', '192.168.1.4'],\n 'B': ['192.168.1.2', '192.168.1.5'],\n 'C': ['192.168.1.3', '192.168.1.6']}\n</code></pre>\n\n<p>How would I go about doing the reverse of that? I would have this dictionary:</p>\n\n<pre><code>dct = {'A': ['192.168.1.1', '192.168.1.4'],\n 'B': ['192.168.1.2', '192.168.1.5'],\n 'C': ['192.168.1.3', '192.168.1.6']}\n</code></pre>\n\n<p>And want to turn it to CSV with two columns like this:</p>\n\n<pre><code>ip,group\n192.168.1.1,A\n192.168.1.2,B\n192.168.1.3,C\n192.168.1.4,A\n192.168.1.5,B\n192.168.1.6,C\n</code></pre>\n\n<p>User @c\u1d0f\u029f\u1d05s\u1d18\u1d07\u1d07\u1d05 helped me for the first part and pandas is above my python skills at the moment. Thanks for any help!</p>\n"}, {"tags": ["python", "pandas", "date", "if-statement", "dataframe"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1508370555, "post_id": 46820877, "comment_id": 80589182, "body": "Uh, those dates aren&#39;t equal though, how are you still combining the rows?"}, {"owner": {"reputation": 49, "user_id": 7607101, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10155150359614828/picture?type=large", "display_name": "MAUCA", "link": "https://stackoverflow.com/users/7607101/mauca"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1508370622, "post_id": 46820877, "comment_id": 80589202, "body": "@c\u1d0f\u029f\u1d05s\u1d18\u1d07\u1d07\u1d05 those are only the first 4 dates, the whole data set is 14000 entries, that&#39;s why it finds that date == date2 at some point in the loop"}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 7607101, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10155150359614828/picture?type=large", "display_name": "MAUCA", "link": "https://stackoverflow.com/users/7607101/mauca"}, "edited": false, "score": 0, "creation_date": 1508370928, "post_id": 46820927, "comment_id": 80589282, "body": "Awesome! that did the work, you have a little mistake: dfm.observation_date = pd.to_datetime(dfm.observation_date, format=&#39;%Y-%d-%m&#39;)                                                                                        should be: dfm.observation_date = pd.to_datetime(dfm.observation_date, format=&#39;%Y-%m-%d&#39;)                                                                                         in case anyone else wants to use this as a solution as well"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 49, "user_id": 7607101, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10155150359614828/picture?type=large", "display_name": "MAUCA", "link": "https://stackoverflow.com/users/7607101/mauca"}, "edited": false, "score": 0, "creation_date": 1508371014, "post_id": 46820927, "comment_id": 80589290, "body": "@MauricioCastaneda I thought the date formats of <code>dfi</code> and <code>dfm</code>  were different? You said <code>dfi</code> starts with day, and <code>dfm</code> starts with the month. Or are they the same?"}, {"owner": {"reputation": 49, "user_id": 7607101, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10155150359614828/picture?type=large", "display_name": "MAUCA", "link": "https://stackoverflow.com/users/7607101/mauca"}, "edited": false, "score": 0, "creation_date": 1508371153, "post_id": 46820927, "comment_id": 80589334, "body": "@COLDSPEED they are the same, what I mean is that dfi is recorded monthly, and dfm is recorded daily, but both the same %Y-%m-%d format"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 49, "user_id": 7607101, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10155150359614828/picture?type=large", "display_name": "MAUCA", "link": "https://stackoverflow.com/users/7607101/mauca"}, "edited": false, "score": 0, "creation_date": 1508371271, "post_id": 46820927, "comment_id": 80589368, "body": "@MAUCA You might not even need to datetime conversion now!."}], "tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 1, "last_activity_date": 1508371729, "last_edit_date": 1508371729, "creation_date": 1508370790, "answer_id": 46820927, "question_id": 46820877, "link": "https://stackoverflow.com/questions/46820877/append-values-in-pandas-where-value-equals-other-value/46820927#46820927", "title": "Append values in pandas where value equals other value", "body": "<p>If the date formats are inconsistent, convert them first:</p>\n\n<pre><code>dfi.observation_date = pd.to_datetime(dfi.observation_date, format='%Y-%m-%d')\ndfm.observation_date = pd.to_datetime(dfm.observation_date, format='%Y-%m-%d')\n</code></pre>\n\n<p>Now, getting your result should be easy with a <code>merge</code>:</p>\n\n<pre><code>df = dfi.merge(dfm, on='observation_date')\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 7607101, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10155150359614828/picture?type=large", "display_name": "MAUCA", "link": "https://stackoverflow.com/users/7607101/mauca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "accepted_answer_id": 46820927, "answer_count": 1, "score": 0, "last_activity_date": 1508371729, "creation_date": 1508370392, "last_edit_date": 1508370666, "question_id": 46820877, "link": "https://stackoverflow.com/questions/46820877/append-values-in-pandas-where-value-equals-other-value", "title": "Append values in pandas where value equals other value", "body": "<p>I have two data frames:</p>\n\n<pre><code>dfi = pd.read_csv('C:/Users/Mauricio/Desktop/inflation.csv')\ndfm = pd.read_csv('C:/Users/Mauricio/Desktop/maturity.csv')\n# equals the following\n  observation_date  CPIAUCSL\n0       1947-01-01     21.48\n1       1947-02-01     21.62\n2       1947-03-01     22.00\n3       1947-04-01     22.00\n4       1947-05-01     21.95\n  observation_date  DGS10\n0       1962-01-02   4.06\n1       1962-01-03   4.03\n2       1962-01-04   3.99\n3       1962-01-05   4.02\n4       1962-01-08   4.03\n</code></pre>\n\n<p>I created a copy as df doing the following:</p>\n\n<pre><code>df = dfi.copy(deep=True)\n</code></pre>\n\n<p>which returns an exact copy of dfi, <strong>dfi</strong> dates go by <strong>month</strong> and <strong>dfm</strong> dates go by <strong>day</strong>, I want to create a new column in df that everytime a date in dfi == a date in dfm, to append the DGS10 value in it. </p>\n\n<p>I have this so far:</p>\n\n<pre><code>for date in df.observation_date:\n    for date2 in dfm.observation_date:\n        if date==date2:\n            df['mat_rate'] = dfm['DGS10']\n\n# this is what I get but dates do not match values\n   observation_date  CPIAUCSL  mat_rate\n0       1947-01-01     21.48      4.06\n1       1947-02-01     21.62      4.03\n2       1947-03-01     22.00      3.99\n3       1947-04-01     22.00      4.02\n4       1947-05-01     21.95      4.03\n</code></pre>\n\n<p>It works but does not append the dates where <strong>date == date2</strong> what can I do so it appends the values <strong>where date equals date2 only</strong>?\nThank you!</p>\n"}, {"tags": ["python", "django", "python-3.x"], "answers": [{"comments": [{"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1508374758, "post_id": 46821075, "comment_id": 80590178, "body": "Mind you, if the goal is just to replace it with the representation of the <code>list</code>, they could just do: <code>userid.replace(&#39;[]&#39;, str(the_user.phonelist))</code>, no need for converting the elements one by one."}, {"owner": {"reputation": 358, "user_id": 2368509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eae27345bc24c24b458f1fdc80b6091a?s=128&d=identicon&r=PG", "display_name": "Adam Holloway", "link": "https://stackoverflow.com/users/2368509/adam-holloway"}, "reply_to_user": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1508447814, "post_id": 46821075, "comment_id": 80625770, "body": "True, you can do that as well.  It depends on what the desired string format is."}], "tags": [], "owner": {"reputation": 358, "user_id": 2368509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eae27345bc24c24b458f1fdc80b6091a?s=128&d=identicon&r=PG", "display_name": "Adam Holloway", "link": "https://stackoverflow.com/users/2368509/adam-holloway"}, "is_accepted": false, "score": 0, "last_activity_date": 1508371846, "creation_date": 1508371846, "answer_id": 46821075, "question_id": 46820876, "link": "https://stackoverflow.com/questions/46820876/how-do-i-replace-a-string-variable/46821075#46821075", "title": "How do I replace a string variable", "body": "<p>As the error suggests, you have to convert the list to a string</p>\n\n<p>One way to do this is with a join:</p>\n\n<pre><code>phonelist_str = ''.join(the_user.phonelist)\n</code></pre>\n\n<p>This only will work though if all the items in the list are strings.  If not, you'll have to pair it with a list comprehension in order to cast all of the list's items to strings:</p>\n\n<pre><code>phonelist_str = ''.join([str(x) for x in the_user.phonelist])\n</code></pre>\n\n<p>Once you have a string, you can do your replace:</p>\n\n<pre><code>ans = userid.replace('[]', phonelist_str)\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 1096468, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/9517c571d6d82070596d3b7897d1d6b6?s=128&d=identicon&r=PG", "display_name": "Divino", "link": "https://stackoverflow.com/users/1096468/divino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1508374765, "creation_date": 1508370392, "last_edit_date": 1508374765, "question_id": 46820876, "link": "https://stackoverflow.com/questions/46820876/how-do-i-replace-a-string-variable", "title": "How do I replace a string variable", "body": "<p>I have a code as follows</p>\n\n<pre><code>with open(f1) as f:\n            userid=f.read().replace('0', str(instance.id))\n</code></pre>\n\n<p>The above works well. Now, the variable <strong><em>userid</em></strong> as a string has character In will like to replace. I tried this code and is given errors shown below. Please note: the variable <strong><em>the_user.phonelist</em></strong> is a python LIST. I will like to replace the character <strong>[]</strong> with the list.</p>\n\n<pre><code>ans = userid.replace('[]', the_user.phonelist)\nError: Can't convert 'list' object to str implicitly\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 5074, "user_id": 1354854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/013458c49caa535da7af54d010a8a0b3?s=128&d=identicon&r=PG", "display_name": "bnaecker", "link": "https://stackoverflow.com/users/1354854/bnaecker"}, "edited": false, "score": 0, "creation_date": 1508371372, "post_id": 46820838, "comment_id": 80589398, "body": "Is it possible to change <code>f</code> so that it can take the array directly? If it involves mathematical operations, like addition, multiplication, thresholding, etc. then it is possible to do so. This would make your life easier."}, {"owner": {"reputation": 1568, "user_id": 8793975, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/086643c7f3fafe914727c51882e974bc?s=128&d=identicon&r=PG&f=1", "display_name": "enumaris", "link": "https://stackoverflow.com/users/8793975/enumaris"}, "reply_to_user": {"reputation": 5074, "user_id": 1354854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/013458c49caa535da7af54d010a8a0b3?s=128&d=identicon&r=PG", "display_name": "bnaecker", "link": "https://stackoverflow.com/users/1354854/bnaecker"}, "edited": false, "score": 0, "creation_date": 1508371511, "post_id": 46820838, "comment_id": 80589431, "body": "I don&#39;t believe so...at least I haven&#39;t thought of a way in which that could work."}, {"owner": {"reputation": 5074, "user_id": 1354854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/013458c49caa535da7af54d010a8a0b3?s=128&d=identicon&r=PG", "display_name": "bnaecker", "link": "https://stackoverflow.com/users/1354854/bnaecker"}, "edited": false, "score": 0, "creation_date": 1508371570, "post_id": 46820838, "comment_id": 80589450, "body": "See Ben Usman&#39;s answer for why this is something you should really try to make work. It will be magnitudes faster, depending on the array sizes, and much easier to express."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1508371733, "post_id": 46820838, "comment_id": 80589504, "body": "&quot;from what I understand of Python, dictionaries are not actually copied, it just makes an extra label that references to the one underlying dictionary&quot; Well, it&#39;s not Python dictionaries, it&#39;s <b>all Python objects</b>, because that is just the semantics of assignment in Python. Assignment <b>never copies</b>."}], "answers": [{"comments": [{"owner": {"reputation": 1568, "user_id": 8793975, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/086643c7f3fafe914727c51882e974bc?s=128&d=identicon&r=PG&f=1", "display_name": "enumaris", "link": "https://stackoverflow.com/users/8793975/enumaris"}, "edited": false, "score": 0, "creation_date": 1508371258, "post_id": 46820895, "comment_id": 80589364, "body": "What if I have to iterate over the keys in params using numbers instead of a key? (Later I will have lines like params[&#39;W&#39;+str(i)] to get to the right key, where i is a number I&#39;m running over now)"}, {"owner": {"reputation": 5991, "user_id": 232371, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fb2a01bdde27923d196336fe006c8764?s=128&d=identicon&r=PG", "display_name": "Ben Usman", "link": "https://stackoverflow.com/users/232371/ben-usman"}, "edited": false, "score": 0, "creation_date": 1508371353, "post_id": 46820895, "comment_id": 80589394, "body": "he probably meant <code>paramscheck[key] = np.zeros((n, m))</code>"}, {"owner": {"reputation": 1568, "user_id": 8793975, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/086643c7f3fafe914727c51882e974bc?s=128&d=identicon&r=PG&f=1", "display_name": "enumaris", "link": "https://stackoverflow.com/users/8793975/enumaris"}, "edited": false, "score": 0, "creation_date": 1508371560, "post_id": 46820895, "comment_id": 80589445, "body": "I follow the logic of this answer, but I realized that I didn&#39;t give the whole question, so I&#39;m not sure if this answer would still work...I&#39;m going to edit the question. Sorry for the hassle guys, I thought I could write a simplified version of the problem."}], "tags": [], "owner": {"reputation": 4450, "user_id": 4458510, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/GZUMI.png?s=128&g=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/4458510/alex"}, "is_accepted": false, "score": 0, "last_activity_date": 1508370551, "creation_date": 1508370551, "answer_id": 46820895, "question_id": 46820838, "link": "https://stackoverflow.com/questions/46820838/using-a-python-dictionary-of-arrays/46820895#46820895", "title": "Using a python dictionary of arrays", "body": "<pre><code>paramscheck = {}\nfor key in params:\n    paramscheck[key] = {} # this line\n    for i in range(0,n):\n        for j in range(0,m):\n            paramscheck[key][i,j] = f(params[key][i,j])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5991, "user_id": 232371, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fb2a01bdde27923d196336fe006c8764?s=128&d=identicon&r=PG", "display_name": "Ben Usman", "link": "https://stackoverflow.com/users/232371/ben-usman"}, "is_accepted": true, "score": 0, "last_activity_date": 1508371877, "last_edit_date": 1508371877, "creation_date": 1508371517, "answer_id": 46821032, "question_id": 46820838, "link": "https://stackoverflow.com/questions/46820838/using-a-python-dictionary-of-arrays/46821032#46821032", "title": "Using a python dictionary of arrays", "body": "<p>If your operation is elementwise by nature (e.g. <code>x + 1</code>), then you could just use something like</p>\n\n<pre><code>def elementwise_f(x):\n    return f(x) \n\nparamscheck = {k: elementwise_f(v) for k, v in array_dict.items()}\n</code></pre>\n\n<p>otherwise something like the following might also work well</p>\n\n<pre><code>import numpy as np\nfrom functools import partial\nfrom collections import defaultdict\nparamscheck = defaultdict(partial(np.zeros, (10, 20)))  # instead of {}\n</code></pre>\n\n<p>if you want to just initialize new one with old values without changing old values while editing the new one, try <code>deepcopy</code> instead of <code>copy</code></p>\n\n<pre><code>from copy import deepcopy\nparamscheck = deepcopy(params)\n</code></pre>\n"}], "owner": {"reputation": 1568, "user_id": 8793975, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/086643c7f3fafe914727c51882e974bc?s=128&d=identicon&r=PG&f=1", "display_name": "enumaris", "link": "https://stackoverflow.com/users/8793975/enumaris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3395, "favorite_count": 0, "accepted_answer_id": 46821032, "answer_count": 2, "score": 0, "last_activity_date": 1508372018, "creation_date": 1508370142, "last_edit_date": 1508372018, "question_id": 46820838, "link": "https://stackoverflow.com/questions/46820838/using-a-python-dictionary-of-arrays", "title": "Using a python dictionary of arrays", "body": "<p>EDIT: I'm sorry, I realized that I didn't give the full question, this edit should contain the full question. I thougth that my previous question was similar enough to the full question that I could get the answer that way without having to add too many additional details, but I was wrong. </p>\n\n<p>I have a dictionary <code>params</code> in python, where each entry is a numpy array of some sort. But the arrays in this dictionary are not all of the same shape. Some are size (n,m), some are size (1,m), some still are totally different sizes. I can call a specific number in this dictionary via:\n<code>params[key][i,j]</code></p>\n\n<p>I need to loop over x of the keys in this dictionary, so I have a loop like:</p>\n\n<pre><code>for i in range(0,x):\n    for j in range(0,(dim of 0th axis of array at key x)):\n        for k in range(0,(dim of 1 axis of array at key x)):\n            stuff = f(params['W'+str(i)][i,j])\n</code></pre>\n\n<p>I want to create a new dictionary <code>paramscheck</code> which will be contain the elements that I'm going to loop over, but the specific numbers in <code>paramscheck</code> will be some function of the corresponding numbers in params. </p>\n\n<p>I can't quite figure out the best way to do this. </p>\n\n<p>If I write code like:   </p>\n\n<pre><code>paramscheck = {}\nfor i in range(0,x):\n    for j in range(0,n):\n        for k in range(0,m):\n            paramscheck['W'+str(i)][i,j] = f(params['W'+str(i)][i,j])\n</code></pre>\n\n<p>Then I will get that I'm outside the range of the index of paramscheck since that dictionary started out empty. </p>\n\n<p>If I copy <code>params</code> to <code>paramscheck</code> first and then do the loop with a line like</p>\n\n<pre><code>paramscheck = params\n</code></pre>\n\n<p>Then, I won't have issue accessing any entry in paramscheck, but my params dictionary will be modified simultaneously (from what I understand of Python, dictionaries are not actually copied, it just makes an extra label that references to the one underlying dictionary).</p>\n\n<p>I've tried something like <code>paramscheck = params.copy()</code> and <code>paramscheck = dict(params)</code>, but still the params dictionary is being modified when I go to modify <code>paramscheck</code>. </p>\n\n<p>How should I accomplish this? </p>\n"}, {"tags": ["python"], "answers": [{"tags": [], "owner": {"reputation": 85, "user_id": 8758205, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iv0Qp.png?s=128&g=1", "display_name": "madimov", "link": "https://stackoverflow.com/users/8758205/madimov"}, "is_accepted": false, "score": 1, "last_activity_date": 1508371263, "creation_date": 1508371263, "answer_id": 46820984, "question_id": 46820805, "link": "https://stackoverflow.com/questions/46820805/python-average-rainfall-how-to-get-yearly-average/46820984#46820984", "title": "Python Average Rainfall, how to get yearly average?", "body": "<p>One way is to add a yearly_avgs list and update it in your outer for loop, and find the total average from that list as opposed to using total_months. For example:</p>\n\n<pre><code>yearly_avgs = []                       # initialize list for yearly averages\ntotal_months = 0\nrainfall_inches = 0\nyears = int(input(\"How many years of data do you wish to collect? \"))\n\nfor currentYear in range(1, years + 1):\n  for currentMonth in range(1, 13):\n    monthly_rainfall = float(input(\"Enter the inches of rainfall for month \"\n    + \\\n    format(currentMonth, \"d\") + \", year \" + format(currentYear,\"d\") +\n    \": \"))\n    rainfall_inches += monthly_rainfall\n    total_months += 1\n  yearly_avgs += rainfall_inches       # append average for currentYear\n  rainfall_inches = 0                  # reset rainfall_inches\n\navg_rainfall = sum(yearly_avgs)/years  # get average over years\n\nprint(\"Number of months: \" + format(total_months, \"d\"), \"Total inches of `\nrainfall: \" + format(rainfall_inches, \".2f\"), \"Average rainfall: \" + `\nformat(avg_rainfall, \".2f\"), sep=\"\\n\")\n</code></pre>\n\n<p>It's still a little clunky but it gets the job done, I think.</p>\n"}], "owner": {"reputation": 1, "user_id": 8705936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e098666f68daaeea20aa4c31c0d39b9?s=128&d=identicon&r=PG&f=1", "display_name": "MarkIG", "link": "https://stackoverflow.com/users/8705936/markig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 853, "favorite_count": 0, "closed_date": 1508389759, "answer_count": 1, "score": -1, "last_activity_date": 1508371263, "creation_date": 1508369921, "last_edit_date": 1508370406, "question_id": 46820805, "link": "https://stackoverflow.com/questions/46820805/python-average-rainfall-how-to-get-yearly-average", "closed_reason": "Not suitable for this site", "title": "Python Average Rainfall, how to get yearly average?", "body": "<h2>On this program I have it set to get the overall average of all the years if more than 1, but how do I get the separate yearly averages?</h2>\n\n<pre><code>total_months = 0\n\nrainfall_inches = 0\n\nyears = int(input(\"How many years of data do you wish to collect? \"))\n\nfor currentYear in range(1, years + 1):\n\n    for currentMonth in range(1, 13):\n\n        monthly_rainfall = float(input(\"Enter the inches of rainfall for month \" \n+ format(currentMonth, \"d\") + \", year \" + format(currentYear,\"d\") + \n\": \"))\n\n        rainfall_inches += monthly_rainfall\n\n        total_months += 1\n\n\navg_rainfall = rainfall_inches / total_months\n\nprint(\"Number of months: \" + format(total_months, \"d\"), \"Total inches of `\nrainfall: \" + format(rainfall_inches, \".2f\"), \"Average rainfall: \" + `\nformat(avg_rainfall, \".2f\"), sep=\"\\n\")\n</code></pre>\n"}, {"tags": ["python", "python-2.7", "multiprocessing"], "comments": [{"owner": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "edited": false, "score": 0, "creation_date": 1508370756, "post_id": 46820799, "comment_id": 80589239, "body": "I can&#39;t reproduce your results. When I run the code at the top (with a little added boilerplate to make it work), I get an empty list as the result. I get this in both Python 3.6 (after changing the <code>print</code> call) and in 2.7."}], "answers": [{"tags": [], "owner": {"reputation": 1213, "user_id": 4943161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3326cd13fd411585e3947a10cc3ac392?s=128&d=identicon&r=PG&f=1", "display_name": "Hao Li", "link": "https://stackoverflow.com/users/4943161/hao-li"}, "is_accepted": false, "score": 1, "last_activity_date": 1508377679, "creation_date": 1508377679, "answer_id": 46821711, "question_id": 46820799, "link": "https://stackoverflow.com/questions/46820799/why-is-list-extend-appending-in-this-situation/46821711#46821711", "title": "Why is list.extend appending in this situation?", "body": "<p>I can not comment, so I post an answer.\npool.map_async will return a <strong>list</strong>, call it Result.\nYour callback function apply to this Result.In your case, Result is [[err0], [err1], ...], so error.extend(Result) get [[]].\nTry this:</p>\n\n<pre><code>def foo(x):\n    err = something\n    return err\n\nerrors = []\nres = pool.map_async(foo, mylist, callback=errors.extend)\n# or\n# res.wait()\n# print res.get()\nprint errors\n</code></pre>\n"}], "owner": {"reputation": 580, "user_id": 3776297, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/b447d4f7aa5b200b5cebb6fd4916f719?s=128&d=identicon&r=PG&f=1", "display_name": "BenH", "link": "https://stackoverflow.com/users/3776297/benh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1508377679, "creation_date": 1508369858, "last_edit_date": 1508370013, "question_id": 46820799, "link": "https://stackoverflow.com/questions/46820799/why-is-list-extend-appending-in-this-situation", "title": "Why is list.extend appending in this situation?", "body": "<p>I am using the callback component of multiprocessing.Pool like so:</p>\n\n<pre><code>def foo(x):\n    err = []\n    return err\n\nerrors = []\nres = pool.map_async(foo, mylist, callback=errors.extend)\n\nprint errors\n</code></pre>\n\n<p>And I get:</p>\n\n<pre><code>[[]]\n</code></pre>\n\n<p>If I append a test error to err inside of foo(), I get this:</p>\n\n<pre><code>[['test']]\n</code></pre>\n\n<p>Any ideas what I'm missing here?</p>\n\n<p>Why doesn't it mirror this behavior:</p>\n\n<pre><code>a = []\nb = []\na.extend(b)\nprint a\n</code></pre>\n\n<p>Results:</p>\n\n<pre><code>[]\n</code></pre>\n"}, {"tags": ["python", "pandas", "crosstab"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 1, "creation_date": 1508370004, "post_id": 46820793, "comment_id": 80589044, "body": "What does <code>df</code> look like?"}], "answers": [{"comments": [{"owner": {"reputation": 975, "user_id": 7974647, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3Ul5F.jpg?s=128&g=1", "display_name": "Lumos", "link": "https://stackoverflow.com/users/7974647/lumos"}, "edited": false, "score": 0, "creation_date": 1508388230, "post_id": 46821047, "comment_id": 80593199, "body": "@COLDSPEED, how can I groupby mutilple levels? <code>groupby([level=0, level=1], axis=1) </code> seems not work. Thanks!"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 975, "user_id": 7974647, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3Ul5F.jpg?s=128&g=1", "display_name": "Lumos", "link": "https://stackoverflow.com/users/7974647/lumos"}, "edited": false, "score": 1, "creation_date": 1508390097, "post_id": 46821047, "comment_id": 80593715, "body": "@Kay <code>groupby(level=[0, 1], axis=1)</code>"}], "tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 1, "last_activity_date": 1508372516, "last_edit_date": 1508372516, "creation_date": 1508371610, "answer_id": 46821047, "question_id": 46820793, "link": "https://stackoverflow.com/questions/46820793/calculate-percentage-in-high-dimensional-crosstab/46821047#46821047", "title": "calculate percentage in high dimensional crosstab", "body": "<p>Add another step, <code>groupby</code> the 0th level along columns and divide <code>c</code> by the <code>sum</code>.</p>\n\n<pre><code>c = pd.crosstab(df.group, [df.position, df.offer])\ndf = c / c.groupby(level=0, axis=1).sum()\nprint(df)\n\nposition   left            right          \noffer    accept reject    accept    reject\ngroup                                     \ngroup1      1.0    0.0  0.000000  1.000000\ngroup2      0.0    1.0  0.333333  0.666667\ngroup3      1.0    0.0  1.000000  0.000000\n</code></pre>\n\n<hr>\n\n<p>If you're as much of a perfectionist as I am, you might want the whole numbers as integers, you can do that like this:</p>\n\n<pre><code>df = c.div(c.groupby(level=0, axis=1).sum()).astype(object)\nprint(df)\n\nposition   left            right          \noffer    accept reject    accept    reject\ngroup                                     \ngroup1        1      0         0         1\ngroup2        0      1  0.333333  0.666667\ngroup3        1      0         1         0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 58812, "user_id": 2137255, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/zzmt4.png?s=128&g=1", "display_name": "Zero", "link": "https://stackoverflow.com/users/2137255/zero"}, "is_accepted": false, "score": 0, "last_activity_date": 1508381032, "creation_date": 1508381032, "answer_id": 46822103, "question_id": 46820793, "link": "https://stackoverflow.com/questions/46820793/calculate-percentage-in-high-dimensional-crosstab/46822103#46822103", "title": "calculate percentage in high dimensional crosstab", "body": "<p>You could use</p>\n\n<pre><code>In [4013]: dfa = df.groupby(['group', 'position', 'offer']).size().unstack(fill_value=0)\n\nIn [4014]: dfa.div(dfa.sum(axis=1), axis=0).unstack()\nOut[4014]:\noffer    accept           reject\nposition   left     right   left     right\ngroup\ngroup1      1.0  0.000000    0.0  1.000000\ngroup2      0.0  0.333333    1.0  0.666667\ngroup3      1.0  1.000000    0.0  0.000000\n</code></pre>\n\n<hr>\n\n<p>You could also have <code>dfa</code> from <code>pivot_table</code> as well.</p>\n\n<pre><code>df.pivot_table(index=['group', 'position'], columns='offer', aggfunc=len)['pid']\n</code></pre>\n"}], "owner": {"reputation": 975, "user_id": 7974647, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3Ul5F.jpg?s=128&g=1", "display_name": "Lumos", "link": "https://stackoverflow.com/users/7974647/lumos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 733, "favorite_count": 0, "accepted_answer_id": 46821047, "answer_count": 2, "score": 0, "last_activity_date": 1508381032, "creation_date": 1508369822, "last_edit_date": 1508370723, "question_id": 46820793, "link": "https://stackoverflow.com/questions/46820793/calculate-percentage-in-high-dimensional-crosstab", "title": "calculate percentage in high dimensional crosstab", "body": "<p>I have made a <code>crosstab</code> on 3 variables (<code>position</code>, <code>offer</code>, <code>group</code>). How can I calculate the percentage by the total of 1 variable <code>offer</code>, but not the margins (i.e. normalize by column)?</p>\n\n<pre><code>df = pd.crosstab(df.group, [df.position, df.offer], margins = True)\n</code></pre>\n\n<p>df</p>\n\n<pre><code>pid offer   position    group\n1   accept  left        group1\n1   accept  left        group1\n1   accept  right       group2\n1   reject  right       group2\n1   reject  right       group1\n2   reject  right       group1\n2   reject  left        group2\n2   accept  left        group3\n3   accept  right       group3\n3   reject  right       group1\n3   reject  right       group2\n</code></pre>\n\n<p>my current crosstab:</p>\n\n<pre><code> position         left                 right          All\n offer          accept   reject    accept   reject        \n group1         2         0           0       3       5\n group2         0         1           1       2       4\n group3         1         0           1       0       2\n All            3         1           2       5       11\n</code></pre>\n\n<p>expected outcome:</p>\n\n<pre><code> position         left                 right\n offer          accept   reject    accept   reject       \n group1            1       0         0        1 \n group2            0       1         0.33     0.66  \n group3            1       0         1        0  \n</code></pre>\n\n<p>Thanks!  </p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1508369363, "post_id": 46820715, "comment_id": 80588885, "body": "Which line is the error happening on?"}, {"owner": {"reputation": 1043, "user_id": 6035703, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3252ceecff3c6283bca24f59e72eca21?s=128&d=identicon&r=PG&f=1", "display_name": "0TTT0", "link": "https://stackoverflow.com/users/6035703/0ttt0"}, "edited": false, "score": 0, "creation_date": 1508369436, "post_id": 46820715, "comment_id": 80588901, "body": "please post the error code"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1508369471, "post_id": 46820715, "comment_id": 80588910, "body": "My guess is you have a line in the file with no <code>,</code>, so <code>currente[1]</code> is out of range."}, {"owner": {"reputation": 21, "user_id": 8798483, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-5eNXNgsmEps/AAAAAAAAAAI/AAAAAAAAAEo/gQvJcOdR7d0/photo.jpg?sz=128", "display_name": "Osprey", "link": "https://stackoverflow.com/users/8798483/osprey"}, "edited": false, "score": 0, "creation_date": 1508369643, "post_id": 46820715, "comment_id": 80588954, "body": "Traceback (most recent call last):   File &quot;C:\\Users\\Osprey\\AppData\\Local\\Programs\\Python\\Python36-32\\c&zwnj;&#8203;ountdown_calendar.py&zwnj;&#8203;&quot;, line 28, in &lt;module&gt;     for event in gete():   File &quot;C:\\Users\\Osprey\\AppData\\Local\\Programs\\Python\\Python36-32\\c&zwnj;&#8203;ountdown_calendar.py&zwnj;&#8203;&quot;, line 11, in gete     eventd = datetime.strptime(currente[1], &#39;%d/%m/%y&#39;).date() IndexError: list index out of range"}, {"owner": {"reputation": 21, "user_id": 8798483, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-5eNXNgsmEps/AAAAAAAAAAI/AAAAAAAAAEo/gQvJcOdR7d0/photo.jpg?sz=128", "display_name": "Osprey", "link": "https://stackoverflow.com/users/8798483/osprey"}, "edited": false, "score": 0, "creation_date": 1508369660, "post_id": 46820715, "comment_id": 80588956, "body": "That is my error code"}, {"owner": {"reputation": 21, "user_id": 8798483, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-5eNXNgsmEps/AAAAAAAAAAI/AAAAAAAAAEo/gQvJcOdR7d0/photo.jpg?sz=128", "display_name": "Osprey", "link": "https://stackoverflow.com/users/8798483/osprey"}, "edited": false, "score": 0, "creation_date": 1508369686, "post_id": 46820715, "comment_id": 80588962, "body": "Barmar my file has 2 lines in it."}, {"owner": {"reputation": 21, "user_id": 8798483, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-5eNXNgsmEps/AAAAAAAAAAI/AAAAAAAAAEo/gQvJcOdR7d0/photo.jpg?sz=128", "display_name": "Osprey", "link": "https://stackoverflow.com/users/8798483/osprey"}, "edited": false, "score": 0, "creation_date": 1508369723, "post_id": 46820715, "comment_id": 80588970, "body": "Those lines are dates and events and they are separated by commas"}, {"owner": {"reputation": 1205, "user_id": 2726279, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/02dd604908396fad7f3a6fb7df912ba2?s=128&d=identicon&r=PG", "display_name": "Tim Hoffmann", "link": "https://stackoverflow.com/users/2726279/tim-hoffmann"}, "edited": false, "score": 0, "creation_date": 1508369788, "post_id": 46820715, "comment_id": 80588988, "body": "Maybe you have an empty line. You should almost always add <code>if not line.strip(): continue</code> to such a for loop over the lines."}, {"owner": {"reputation": 21, "user_id": 8798483, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-5eNXNgsmEps/AAAAAAAAAAI/AAAAAAAAAEo/gQvJcOdR7d0/photo.jpg?sz=128", "display_name": "Osprey", "link": "https://stackoverflow.com/users/8798483/osprey"}, "edited": false, "score": 0, "creation_date": 1508369906, "post_id": 46820715, "comment_id": 80589022, "body": "you mean add that loop in the def gete()?"}, {"owner": {"reputation": 21, "user_id": 8798483, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-5eNXNgsmEps/AAAAAAAAAAI/AAAAAAAAAEo/gQvJcOdR7d0/photo.jpg?sz=128", "display_name": "Osprey", "link": "https://stackoverflow.com/users/8798483/osprey"}, "edited": false, "score": 0, "creation_date": 1508370085, "post_id": 46820715, "comment_id": 80589067, "body": "Thank you Tim Hoffmann your solution fixed my errors. Thank you."}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1508370089, "post_id": 46820715, "comment_id": 80589068, "body": "Why don&#39;t you simply add a check to your code, right after you split the line, to check that <code>len(currente)</code> is &gt;= 2?  My guess is that it will fail for some line, and then you&#39;ll know exactly where the problem is."}, {"owner": {"reputation": 1205, "user_id": 2726279, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/02dd604908396fad7f3a6fb7df912ba2?s=128&d=identicon&r=PG", "display_name": "Tim Hoffmann", "link": "https://stackoverflow.com/users/2726279/tim-hoffmann"}, "edited": false, "score": 0, "creation_date": 1508370892, "post_id": 46820715, "comment_id": 80589270, "body": "@Osprey I&#39;ve created a general answer, so that the solution is easier to find."}, {"owner": {"reputation": 1572, "user_id": 5306470, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/9M5cV.jpg?s=128&g=1", "display_name": "Daniel Springer", "link": "https://stackoverflow.com/users/5306470/daniel-springer"}, "edited": false, "score": 0, "creation_date": 1508372024, "post_id": 46820715, "comment_id": 80589584, "body": "<a href=\"http://pythontutor.com\" rel=\"nofollow noreferrer\">pythontutor.com</a>"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 8798483, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-5eNXNgsmEps/AAAAAAAAAAI/AAAAAAAAAEo/gQvJcOdR7d0/photo.jpg?sz=128", "display_name": "Osprey", "link": "https://stackoverflow.com/users/8798483/osprey"}, "edited": false, "score": 0, "creation_date": 1508371960, "post_id": 46820924, "comment_id": 80589566, "body": "Your answer is very helpful and appreciated."}], "tags": [], "owner": {"reputation": 1205, "user_id": 2726279, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/02dd604908396fad7f3a6fb7df912ba2?s=128&d=identicon&r=PG", "display_name": "Tim Hoffmann", "link": "https://stackoverflow.com/users/2726279/tim-hoffmann"}, "is_accepted": true, "score": 0, "last_activity_date": 1508370782, "creation_date": 1508370782, "answer_id": 46820924, "question_id": 46820715, "link": "https://stackoverflow.com/questions/46820715/why-am-i-getting-an-indexerror-list-index-out-of-range-when-my-code-appears-to/46820924#46820924", "title": "Why am I getting an IndexError: list index out of range when my code appears to be within the range?", "body": "<p>When parsing a text file, you'll almost always want to skip empty lines. Here's an idomatic pattern for this:</p>\n\n<pre><code>for line in file:\n    line = line.strip()\n    if not line:\n        continue\n    # process line\n</code></pre>\n\n<p>If your file format depends on whitespace on the non-empty lines, you can join lines 2 and 3 to <code>if not line.strip()</code>.</p>\n"}], "owner": {"reputation": 21, "user_id": 8798483, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-5eNXNgsmEps/AAAAAAAAAAI/AAAAAAAAAEo/gQvJcOdR7d0/photo.jpg?sz=128", "display_name": "Osprey", "link": "https://stackoverflow.com/users/8798483/osprey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 224, "favorite_count": 0, "accepted_answer_id": 46820924, "answer_count": 1, "score": -3, "last_activity_date": 1508370782, "creation_date": 1508369278, "question_id": 46820715, "link": "https://stackoverflow.com/questions/46820715/why-am-i-getting-an-indexerror-list-index-out-of-range-when-my-code-appears-to", "title": "Why am I getting an IndexError: list index out of range when my code appears to be within the range?", "body": "<p>I was coding a project called \"My Countdown Calendar\". I was almost done and so I gave what I had so far a test run. I ended up getting this error.\nHere is my code.</p>\n\n<pre><code>from tkinter import Tk, Canvas\nfrom datetime import date, datetime\n\ndef gete():\n    liste = []\n    with open('events.txt') as file:\n        for line in file:\n            line = line.rstrip('\\n')\n            currente = line.split(',')\n\n            eventd = datetime.strptime(currente[1], '%d/%m/%y').date()\n            currente[1] = eventd\n            liste.append(currente)\n        return liste\ndef daysbd(date1, date2):\n    timeb = str(date1-date2)\n    numberofd = timeb.split(' ')\n    return numberofd[0]\n\nroot = Tk()\n\nc = Canvas(root, width=800, height=800, bg='black')\nc.pack()\nc.create_text(100, 50, anchor='w', fill='orange', font = 'Arial 28 bold underline', text = 'My Countdown Calendar')\n\n\nevents = gete()\ntoday = date.today()\n\nfor event in events:\n    eventn = event[0]\n    daysu = daysbd(event[1], today)\n    display = 'It is %s days until %s ' % (daysu, eventn)\n    c.create_text(100, 100, anchor='w', fill='lightblue',\\\n                  font = 'Arial 28 bold ', text = display)\n</code></pre>\n"}, {"tags": ["python", "list", "dictionary", "dictionary-comprehension"], "answers": [{"tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 2, "last_activity_date": 1508369450, "creation_date": 1508369450, "answer_id": 46820737, "question_id": 46820714, "link": "https://stackoverflow.com/questions/46820714/how-to-create-a-list-of-values-in-a-dictionary-comprehension-in-python/46820737#46820737", "title": "How to create a list of values in a dictionary comprehension in Python", "body": "<p>Sure, you can, using <code>sorted</code> + <code>groupby</code>, but it doesn't look great.</p>\n\n<pre><code>from itertools import groupby\nd = dict([(k, list(g)) for k, g in groupby(sorted(mywords.split(), key=len), key=len)])\n\nprint(d)\n{2: ['be', 'be'],\n 3: ['May', 'and'],\n 4: ['your', 'your'],\n 5: ['short'],\n 6: ['coffee', 'strong', 'Monday']}\n</code></pre>\n\n<p><sub>P.S., Here's my <a href=\"https://stackoverflow.com/a/46820587/4909087\">answer</a> (using <code>defaultdict</code> that I recommend over this) to the <a href=\"https://stackoverflow.com/q/46820551/4909087\">original question</a>.</sub></p>\n"}, {"comments": [{"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1508369517, "post_id": 46820742, "comment_id": 80588918, "body": "I agree that this is the &quot;right way&quot; to do this ... but it pretty clearly violates his one line condition ...."}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1508369578, "post_id": 46820742, "comment_id": 80588933, "body": "@JoranBeasley For reference, this question stems from <a href=\"https://stackoverflow.com/q/46820551/4909087\">another question</a>, and my <a href=\"https://stackoverflow.com/a/46820587/4909087\">answer</a> to it is exactly this."}, {"owner": {"reputation": 7725, "user_id": 4889267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b86b65464f4070d38bbf2abdbd4f1610?s=128&d=identicon&r=PG&f=1", "display_name": "AK47", "link": "https://stackoverflow.com/users/4889267/ak47"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1508369702, "post_id": 46820742, "comment_id": 80588966, "body": "@c\u1d0f\u029f\u1d05s\u1d18\u1d07\u1d07\u1d05 I thought when he originally posted it he was just being meta with your answer. I&#39;m looking to do it in a comprehension, I had seen this solution in the other answer but I was attempting it in one line - turns out the 1 liner is a bit messier than expected"}], "tags": [], "owner": {"reputation": 214708, "user_id": 201359, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7odj.jpg?s=128&g=1", "display_name": "&#211;scar L&#243;pez", "link": "https://stackoverflow.com/users/201359/%c3%93scar-l%c3%b3pez"}, "is_accepted": false, "score": 2, "last_activity_date": 1508369608, "last_edit_date": 1508369608, "creation_date": 1508369465, "answer_id": 46820742, "question_id": 46820714, "link": "https://stackoverflow.com/questions/46820714/how-to-create-a-list-of-values-in-a-dictionary-comprehension-in-python/46820742#46820742", "title": "How to create a list of values in a dictionary comprehension in Python", "body": "<p>Don't try to cram everything in one line, it won't be readable. This is a simple, easy-to-understand solution, even if it takes a couple of lines:</p>\n\n<pre><code>from collections import defaultdict\n\nmywords = \"May your coffee be strong and your Monday be short\"    \nans = defaultdict(list)\n\nfor word in mywords.split():\n    ans[len(word)].append(word)\n</code></pre>\n"}], "owner": {"reputation": 7725, "user_id": 4889267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b86b65464f4070d38bbf2abdbd4f1610?s=128&d=identicon&r=PG&f=1", "display_name": "AK47", "link": "https://stackoverflow.com/users/4889267/ak47"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1093, "favorite_count": 0, "accepted_answer_id": 46820737, "answer_count": 2, "score": 1, "last_activity_date": 1508369608, "creation_date": 1508369275, "question_id": 46820714, "link": "https://stackoverflow.com/questions/46820714/how-to-create-a-list-of-values-in-a-dictionary-comprehension-in-python", "title": "How to create a list of values in a dictionary comprehension in Python", "body": "<p>Taking a very simple example of looping over a sentence and creating a dictionary which maps <code>{x:y}</code>, where <code>x</code> is a key representing the length of the words and <code>y</code> is a list of words in the sentence that contain <code>x</code> amount of letters</p>\n\n<p>Input:</p>\n\n<pre><code>mywords = \"May your coffee be strong and your Monday be short\"\n</code></pre>\n\n<p>Expected Output:</p>\n\n<pre><code>{2: ['be', 'be'], 3: ['May', 'and'], 4: ['your', 'your'], 5: ['short'], 6: ['coffee', 'strong', 'Monday']}\n</code></pre>\n\n<p>Here's an attempt that creates a list of values but overwrites it each time:</p>\n\n<pre><code>{len(x):[x] for x in mywords.split()}\n{2: ['be'], 3: ['and'], 4: ['your'], 5: ['short'], 6: ['Monday']}\n</code></pre>\n\n<p>Is it possible to do this in one line in Python?</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 1, "last_activity_date": 1508394986, "last_edit_date": 1508394986, "creation_date": 1508370214, "answer_id": 46820850, "question_id": 46820705, "link": "https://stackoverflow.com/questions/46820705/rename-specific-columns-with-numbers-with-strnumber/46820850#46820850", "title": "Rename specific columns with numbers with str+number", "body": "<p>IIUC, you can initialise a <code>itertools.count</code> object and reset the columns in a list comprehension.</p>\n\n<pre><code>from itertools import count\n\ncnt = count(1)\ndf.columns = ['Apple{}'.format(next(cnt)) if \n       str(x).isdigit() else x for x in df.columns]\n</code></pre>\n\n<p>This will also work very well if the digits are not contiguous, but you want them to be renamed with a contiguous suffix:</p>\n\n<pre><code>print(df)\n       1   Col1       5    Col2     500\n0  1240.0  552.0  1238.0    52.0  1370.0\n1   633.0  435.0   177.0  2201.0   185.0\n2  1518.0  936.0   385.0   288.0   427.0\n3   212.0  660.0   320.0   438.0  1403.0\n4    15.0  556.0   501.0  1259.0  1298.0\n5   177.0  718.0  1420.0   833.0   984.0\n\ncnt = count(1)\ndf.columns = ['Apple{}'.format(next(cnt)) if \n         str(x).isdigit() else x for x in df.columns]\n\nprint(df)\n   Apple1   Col1  Apple2    Col2  Apple3\n0  1240.0  552.0  1238.0    52.0  1370.0\n1   633.0  435.0   177.0  2201.0   185.0\n2  1518.0  936.0   385.0   288.0   427.0\n3   212.0  660.0   320.0   438.0  1403.0\n4    15.0  556.0   501.0  1259.0  1298.0\n5   177.0  718.0  1420.0   833.0   984.0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16194, "user_id": 667883, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a39234ae82a5898cba1d70b5bff80ec3?s=128&d=identicon&r=PG", "display_name": "Allen", "link": "https://stackoverflow.com/users/667883/allen"}, "is_accepted": false, "score": 0, "last_activity_date": 1508373433, "last_edit_date": 1508373433, "creation_date": 1508370307, "answer_id": 46820863, "question_id": 46820705, "link": "https://stackoverflow.com/questions/46820705/rename-specific-columns-with-numbers-with-strnumber/46820863#46820863", "title": "Rename specific columns with numbers with str+number", "body": "<p>You can use rename_axis:</p>\n\n<pre><code>df.rename_axis(lambda x: 'Apple{}'.format(int(x)+1) if str(x).isdigit() else x, axis=\"columns\")\nOut[9]: \n   Apple1  Apple2  Apple3\n0   444.0   286.0   657.0\n1  2103.0  2317.0  2577.0\n2   157.0   200.0   161.0\n3  4000.0  3363.0  4986.0\n4  1042.0   541.0   872.0\n5  1607.0  1294.0  3305.0\n</code></pre>\n"}], "owner": {"reputation": 155, "user_id": 8787119, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/17c9cc19a5c36b9861f8a690d8cf8a31?s=128&d=identicon&r=PG&f=1", "display_name": "Flora", "link": "https://stackoverflow.com/users/8787119/flora"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 46820850, "answer_count": 2, "score": 0, "last_activity_date": 1508394986, "creation_date": 1508369198, "question_id": 46820705, "link": "https://stackoverflow.com/questions/46820705/rename-specific-columns-with-numbers-with-strnumber", "title": "Rename specific columns with numbers with str+number", "body": "<p>I originally have r number of csv files.</p>\n\n<p>I created one dataframe with 9 columns and r of them have numbers as headers.</p>\n\n<p>I would like to target only them and change their name into ['Apple']+range(len(files)). </p>\n\n<p>Example:\nI have 3 csv files.</p>\n\n<p>The current 3 targeted columns in my dataframe are:</p>\n\n<pre><code>            0       1       2  \n0       444.0   286.0   657.0  \n1      2103.0  2317.0  2577.0  \n2       157.0   200.0   161.0  \n3      4000.0  3363.0  4986.0  \n4      1042.0   541.0   872.0  \n5      1607.0  1294.0  3305.0\n</code></pre>\n\n<p>I would like:</p>\n\n<pre><code>       Apple1  Apple2    Apple3  \n0       444.0   286.0   657.0  \n1      2103.0  2317.0  2577.0  \n2       157.0   200.0   161.0  \n3      4000.0  3363.0  4986.0  \n4      1042.0   541.0   872.0  \n5      1607.0  1294.0  3305.0\n</code></pre>\n\n<p>Thank you</p>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 126, "user_id": 8778044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b382743135578c2582d87156b6ea6e3e?s=128&d=identicon&r=PG", "display_name": "noes1s", "link": "https://stackoverflow.com/users/8778044/noes1s"}, "edited": false, "score": 0, "creation_date": 1508369632, "post_id": 46820685, "comment_id": 80588950, "body": "Is brand pre determined or self populating or is it user input. Also are you talking about a dropdown form field or something of the like?"}, {"owner": {"reputation": 149, "user_id": 7893681, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/qpof3.jpg?s=128&g=1", "display_name": "Arcee", "link": "https://stackoverflow.com/users/7893681/arcee"}, "reply_to_user": {"reputation": 126, "user_id": 8778044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b382743135578c2582d87156b6ea6e3e?s=128&d=identicon&r=PG", "display_name": "noes1s", "link": "https://stackoverflow.com/users/8778044/noes1s"}, "edited": false, "score": 0, "creation_date": 1508381409, "post_id": 46820685, "comment_id": 80591682, "body": "They\u2019re user input."}, {"owner": {"reputation": 68674, "user_id": 41316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2c31ca37c09ab42763f690e0d1355d7?s=128&d=identicon&r=PG", "display_name": "bruno desthuilliers", "link": "https://stackoverflow.com/users/41316/bruno-desthuilliers"}, "edited": false, "score": 0, "creation_date": 1508412360, "post_id": 46820685, "comment_id": 80604821, "body": "What are your &quot;mac_os&quot;, &quot;windows_os&quot; and &quot;linux&quot; fields for ?"}, {"owner": {"reputation": 149, "user_id": 7893681, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/qpof3.jpg?s=128&g=1", "display_name": "Arcee", "link": "https://stackoverflow.com/users/7893681/arcee"}, "reply_to_user": {"reputation": 68674, "user_id": 41316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2c31ca37c09ab42763f690e0d1355d7?s=128&d=identicon&r=PG", "display_name": "bruno desthuilliers", "link": "https://stackoverflow.com/users/41316/bruno-desthuilliers"}, "edited": false, "score": 0, "creation_date": 1508415069, "post_id": 46820685, "comment_id": 80606435, "body": "@brunodesthuilliers they&#39;re fields to enter the version of your os. So if your computer is a mac you don&#39;t need the fields for windows and linux. Although they&#39;re just examples."}, {"owner": {"reputation": 68674, "user_id": 41316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2c31ca37c09ab42763f690e0d1355d7?s=128&d=identicon&r=PG", "display_name": "bruno desthuilliers", "link": "https://stackoverflow.com/users/41316/bruno-desthuilliers"}, "edited": false, "score": 0, "creation_date": 1508422466, "post_id": 46820685, "comment_id": 80611466, "body": "@Arcee I&#39;m not sure this is the best design... I don&#39;t have enough context (who will use this application and what it&#39;s used for), but: 1/ most people will have one single OS installed, so it could be modeled with one &quot;os&quot; field and one &quot;version&quot; field, 2/ some people WILL have a multiboot, and then possibly with 2 or more versions of a same OS, 3/ the brand doesn&#39;t mean much (except that you probably won&#39;t have MacOS on a PC, but I know of some Mac running Linux...) - , 4/ &quot;Linux&quot; is not enough - you have to mention the distro -, and 5/ there are other OS (NetBSD, FreeBDS, OpenBSD etc)."}, {"owner": {"reputation": 149, "user_id": 7893681, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/qpof3.jpg?s=128&g=1", "display_name": "Arcee", "link": "https://stackoverflow.com/users/7893681/arcee"}, "reply_to_user": {"reputation": 68674, "user_id": 41316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2c31ca37c09ab42763f690e0d1355d7?s=128&d=identicon&r=PG", "display_name": "bruno desthuilliers", "link": "https://stackoverflow.com/users/41316/bruno-desthuilliers"}, "edited": false, "score": 0, "creation_date": 1508452564, "post_id": 46820685, "comment_id": 80627564, "body": "@brunodesthuilliers I&#39;m sorry if I caused a little confusion those codes are just examples. Not a real application that I&#39;m trying to build... I tried my best to update the variables to be easily understood. Just want to know how to hide a field that depends on the condition of the other field. Example if you fill in the brand field with &#39;machintosh&#39; only the mac_os_version field will show up in the django admin and will hide the other two."}], "answers": [{"tags": [], "owner": {"reputation": 7519, "user_id": 7692463, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d58fe02a8d24e238972f415fa3d84239?s=128&d=identicon&r=PG&f=1", "display_name": "scharette", "link": "https://stackoverflow.com/users/7692463/scharette"}, "is_accepted": false, "score": 1, "last_activity_date": 1508383495, "last_edit_date": 1508383495, "creation_date": 1508378088, "answer_id": 46821765, "question_id": 46820685, "link": "https://stackoverflow.com/questions/46820685/how-do-you-hide-a-field-if-other-fields-condition-is-not-met-in-django/46821765#46821765", "title": "How do you hide a field if other field&#39;s condition is not met in django?", "body": "<p>You could override the clean method in <strong>admin.py</strong>:</p>\n\n<pre><code>from django.core.exceptions import ValidationError\n\ndef clean(self):\n\n    windows = {'HP','otherbrand1','otherbrand2'}\n\n    if self.cleaned_data['brand'] in windows and \\ \n    (self.cleaned_data['mac_os'] or self.cleaned_data['linux']):\n        raise ValidationError('Only windows is allowed')\n\n    return self.cleaned_data\n</code></pre>\n\n<p><code>cleaned_data</code> is a dict of values that have been validated by the form. Therefore, you're validating that someone doesn't enter a value for fields <code>mac_os</code> or <code>linux</code> if a windows brand was specified beforehand.</p>\n\n<p>Note that this will not be the exact behavior you were expecting. Indeed, this will only raise an error message to the user if he tries to save the model. If you absolutely need to have an in-time solution, you'll need more JS than Django code. </p>\n"}], "owner": {"reputation": 149, "user_id": 7893681, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/qpof3.jpg?s=128&g=1", "display_name": "Arcee", "link": "https://stackoverflow.com/users/7893681/arcee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1508452233, "creation_date": 1508369057, "last_edit_date": 1508452233, "question_id": 46820685, "link": "https://stackoverflow.com/questions/46820685/how-do-you-hide-a-field-if-other-fields-condition-is-not-met-in-django", "title": "How do you hide a field if other field&#39;s condition is not met in django?", "body": "<p>So if I have this code in my models.py</p>\n\n<pre><code>class Computer(models.Model):\n    brand = models.CharField(max_length=225)\n</code></pre>\n\n<p>How do I show either of the following additional field in my django admin depending on the value of brand above?</p>\n\n<pre><code>mac_os_version = models.CharField(max_length=225)\nwindows_os_version = models.CharField(max_length=225)\nlinux_os_version = models.CharField(max_length=225)\n</code></pre>\n\n<p>e.g. if brand == HP only the field for windows_os or linux will be shown when you try to input your data in the admin and will the hide field for mac_os.</p>\n"}, {"tags": ["python", "python-3.x", "pip"], "comments": [{"owner": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "edited": false, "score": 0, "creation_date": 1508414279, "post_id": 46820625, "comment_id": 80605954, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/34803040/how-to-run-pip-of-different-version-of-python-using-python-command\">How to run pip of different version of python using python command?</a>"}, {"owner": {"reputation": 10664, "user_id": 475229, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/0952c4a2c08421aecb397d3a81545f6e?s=128&d=identicon&r=PG", "display_name": "jgritty", "link": "https://stackoverflow.com/users/475229/jgritty"}, "edited": false, "score": 0, "creation_date": 1508444606, "post_id": 46820625, "comment_id": 80624286, "body": "The &#39;-p python3.6&#39; should be the arguments for virtualenv not pip3"}, {"owner": {"reputation": 1025, "user_id": 1698426, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/01fc68ff8e5babbe4e81075539a4b3ab?s=128&d=identicon&r=PG", "display_name": "John Schmitt", "link": "https://stackoverflow.com/users/1698426/john-schmitt"}, "edited": false, "score": 1, "creation_date": 1508631578, "post_id": 46820625, "comment_id": 80685861, "body": "If one of these answers solved your problem, please mark it."}, {"owner": {"reputation": 3138, "user_id": 463213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e0f387381ec6bd2ede5472a04c769c7?s=128&d=identicon&r=PG", "display_name": "charlesreid1", "link": "https://stackoverflow.com/users/463213/charlesreid1"}, "edited": false, "score": 1, "creation_date": 1508699751, "post_id": 46820625, "comment_id": 80703341, "body": "Also see <a href=\"https://unix.stackexchange.com/questions/399626/why-is-kali-linux-so-hard-to-set-up-why-wont-people-help-me/399627#399627\">this question</a> and the advice given there: <b><i>If you aren&#39;t already a Linux pro, don&#39;t use Kali.</i></b> This cannot be stressed enough."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8798404"}, "edited": false, "score": 1, "creation_date": 1508405355, "post_id": 46820836, "comment_id": 80600946, "body": "<code>pip3 --version</code> <code>pip 9.0.1 from &#47;usr&#47;lib&#47;python3&#47;dist-packages (python 3.5)</code>     <code>&gt;&gt;&gt; import site; site.getsitepackages()</code>     <code>[&#39;&#47;usr&#47;local&#47;lib&#47;python3.6&#47;site-packages&#39;]</code>"}, {"owner": {"reputation": 3138, "user_id": 463213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e0f387381ec6bd2ede5472a04c769c7?s=128&d=identicon&r=PG", "display_name": "charlesreid1", "link": "https://stackoverflow.com/users/463213/charlesreid1"}, "edited": false, "score": 0, "creation_date": 1508410237, "post_id": 46820836, "comment_id": 80603586, "body": "Yep, your pip3 and python binaries are mismatched. How and why do you have two versions of Python 3 installed? You should uninstall both versions of Python 3 and re-install one or the other. Please update your post with information about how you installed these two versions of Python so I can help you figure out how to uninstall them."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8798404"}, "edited": false, "score": 0, "creation_date": 1508431827, "post_id": 46820836, "comment_id": 80617600, "body": "I don&#39;t remember exactly but I think Python 3.6 was built in dist and Python 3.5 I&#39;ve installed by myself. I think so, because I read that the built-in versions do not have pip"}, {"owner": {"reputation": 2620, "user_id": 899950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dbb03e33d3960bf7834721592292103?s=128&d=identicon&r=PG", "display_name": "Lawrence D&#39;Oliveiro", "link": "https://stackoverflow.com/users/899950/lawrence-doliveiro"}, "edited": false, "score": 4, "creation_date": 1508436458, "post_id": 46820836, "comment_id": 80620061, "body": "It is quite possible on Linux systems, and not problematic, to have multiple versions of Python installed. I currently have versions from 3.2 up to 3.6 on my main Debian machine. This is handy for testing compatibility of code that I write."}, {"owner": {"reputation": 3138, "user_id": 463213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e0f387381ec6bd2ede5472a04c769c7?s=128&d=identicon&r=PG", "display_name": "charlesreid1", "link": "https://stackoverflow.com/users/463213/charlesreid1"}, "reply_to_user": {"reputation": 2620, "user_id": 899950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dbb03e33d3960bf7834721592292103?s=128&d=identicon&r=PG", "display_name": "Lawrence D&#39;Oliveiro", "link": "https://stackoverflow.com/users/899950/lawrence-doliveiro"}, "edited": false, "score": 0, "creation_date": 1508445750, "post_id": 46820836, "comment_id": 80624843, "body": "@LawrenceD&#39;Oliveiro Sure, and if you know what you&#39;re doing and need python 3.5 alongside 3.6 (<i>and have a strategy for managing inevitable $PATH and $PYTHONPATH conflicts</i>) that&#39;s fine. The OP clearly <b>does not</b> need 3.5 and 3.6 side by side."}, {"owner": {"reputation": 3138, "user_id": 463213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e0f387381ec6bd2ede5472a04c769c7?s=128&d=identicon&r=PG", "display_name": "charlesreid1", "link": "https://stackoverflow.com/users/463213/charlesreid1"}, "edited": false, "score": 0, "creation_date": 1508446011, "post_id": 46820836, "comment_id": 80624976, "body": "@Lorkes Then the problem is with your <code>$PATH</code> environmental variable. That&#39;s where your system is looking for versions of Python when you type &quot;python&quot; at the command prompt. The quick fix is to find the path to where python 3.5 is located on your machine, and add it to the front of your path. Running <code>which -a python3</code> (NOT python3.6, as advised above) will tell you where python 3.5 is located. Please post the output of this command: <code>which -a python3</code>."}, {"owner": {"reputation": 3138, "user_id": 463213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e0f387381ec6bd2ede5472a04c769c7?s=128&d=identicon&r=PG", "display_name": "charlesreid1", "link": "https://stackoverflow.com/users/463213/charlesreid1"}, "edited": false, "score": 0, "creation_date": 1508446417, "post_id": 46820836, "comment_id": 80625173, "body": "(My <i>real</i> and <i>quick</i> advice here, again, is to uninstall Python 3.5 and use the system Python. It&#39;s pretty obvious from your choice of distro that you just need a python3 to hack away with. But if you <i>really</i> want to keep both, just post output of <code>which -a python3</code> so we can figure out what to add to your <code>$PATH</code>.)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8798404"}, "edited": false, "score": 0, "creation_date": 1508486806, "post_id": 46820836, "comment_id": 80637133, "body": "<code>which -a python3</code> <code>&#47;usr&#47;local&#47;bin&#47;python3 &#47;usr&#47;bin&#47;python3 </code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8798404"}, "edited": false, "score": 0, "creation_date": 1508489149, "post_id": 46820836, "comment_id": 80638405, "body": "Looks like I made a mistake. When I created a new user (5 mins ago), Python 3.5 and Python 3.6 were already installed. And pip3 is connected to Python 3.5"}, {"owner": {"reputation": 3138, "user_id": 463213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e0f387381ec6bd2ede5472a04c769c7?s=128&d=identicon&r=PG", "display_name": "charlesreid1", "link": "https://stackoverflow.com/users/463213/charlesreid1"}, "edited": false, "score": 0, "creation_date": 1508699849, "post_id": 46820836, "comment_id": 80703379, "body": "Well... alrighty then. Please mark an answer as accepted so that others know what answer/information was useful. Also see <a href=\"https://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>"}, {"owner": {"reputation": 3925, "user_id": 3815611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26b153a6443c973aea03f8314127f33a?s=128&d=identicon&r=PG&f=1", "display_name": "BlackJack", "link": "https://stackoverflow.com/users/3815611/blackjack"}, "edited": false, "score": 0, "creation_date": 1602065735, "post_id": 46820836, "comment_id": 113599743, "body": "@charlesreid1 This answer is almost wrong. There is no problem having multiple Python versions installed.  Just invoke <code>pip</code> via the Python you want to install packages for as in <code>python3.9 -m pip ...</code>."}], "tags": [], "owner": {"reputation": 3138, "user_id": 463213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e0f387381ec6bd2ede5472a04c769c7?s=128&d=identicon&r=PG", "display_name": "charlesreid1", "link": "https://stackoverflow.com/users/463213/charlesreid1"}, "is_accepted": true, "score": 16, "last_activity_date": 1508446255, "last_edit_date": 1508446255, "creation_date": 1508370134, "answer_id": 46820836, "question_id": 46820625, "link": "https://stackoverflow.com/questions/46820625/how-to-use-pip3-for-python-3-6-instead-of-python-3-5/46820836#46820836", "title": "How to use pip3 for python 3.6 instead of python 3.5?", "body": "<p>Your version of pip is inextricably linked to your version of Python, you cannot tell pip \"use this Python\" or \"use that Python.\" If you have a version mismatch between pip3 (using Python 3.X) and python3 (being Python 3.Y), it means your problem is with multiple overlapping distributions of Python and a weirdly configured <code>$PATH</code>.</p>\n\n<p>If you run <code>pip3 --version</code> it will tell you the site-packages directory and Python version number that pip3 is associated with. </p>\n\n<p>If you run <code>python3</code> and then execute <code>&gt;&gt;&gt; import site; site.getsitepackages()</code>, it should print the site-packages directory your <code>python3</code> is using. </p>\n\n<p>If these do not match, you've got path problems and you'll need to post more information about what operating system you're on, what Python distributions you're using, and how you installed them.</p>\n\n<p><strong>Update/Summary of Comment Thread:</strong> Original poster had a distribution-bundled Python 3.6 installed alongside a self-installed Python 3.5. The pip3 on their path was associated with Python 3.6 (system Python), while the command python3 was associated with Python 3.5 (their self-installed Python). Resolution:</p>\n\n<p>Run <code>which -a python3</code> to find Python 3.5. Add the location of Python 3.5 to your <code>$PATH</code>. (Do it in <code>.profile</code> or <code>.bash_profile</code> to make it permanent.)</p>\n"}, {"comments": [{"owner": {"reputation": 1025, "user_id": 1698426, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/01fc68ff8e5babbe4e81075539a4b3ab?s=128&d=identicon&r=PG", "display_name": "John Schmitt", "link": "https://stackoverflow.com/users/1698426/john-schmitt"}, "edited": false, "score": 0, "creation_date": 1508423818, "post_id": 46820915, "comment_id": 80612426, "body": "<code>which -a</code> works on macOS and Linux. Which OS are you using?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8798404"}, "edited": false, "score": 0, "creation_date": 1508431355, "post_id": 46820915, "comment_id": 80617336, "body": "As I wrote in the post - Kali Linux"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8798404"}, "edited": false, "score": 0, "creation_date": 1508432324, "post_id": 46820915, "comment_id": 80617857, "body": "Oh, sorry, it&#39;s my fault, I just wrote the wrong command. <code>which -a python3.6</code> <code>&#47;usr&#47;local&#47;bin&#47;python3.6 &#47;usr&#47;bin&#47;python3.6 </code>"}], "tags": [], "owner": {"reputation": 1025, "user_id": 1698426, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/01fc68ff8e5babbe4e81075539a4b3ab?s=128&d=identicon&r=PG", "display_name": "John Schmitt", "link": "https://stackoverflow.com/users/1698426/john-schmitt"}, "is_accepted": false, "score": -1, "last_activity_date": 1508370679, "creation_date": 1508370679, "answer_id": 46820915, "question_id": 46820625, "link": "https://stackoverflow.com/questions/46820625/how-to-use-pip3-for-python-3-6-instead-of-python-3-5/46820915#46820915", "title": "How to use pip3 for python 3.6 instead of python 3.5?", "body": "<p>First find the right version of python you want to use:</p>\n\n<pre><code>$ which -a python3.6\n/usr/bin/python3.6\n</code></pre>\n\n<p>then invoke that instance of python directly, e.g.</p>\n\n<pre><code>$ /usr/bin/python3.6 -m venv\nusage: venv [-h] [--system-site-packages] [--symlinks | --copies] [--clear] [--upgrade] [--without-pip] [--prompt PROMPT] ENV_DIR [ENV_DIR ...]\nvenv: error: the following arguments are required: ENV_DIR\n</code></pre>\n\n<p>Next, <code>pip</code> does not create virtual environments.  The module <code>venv</code> does.  Read <a href=\"https://docs.python.org/3/library/venv.html\" rel=\"nofollow noreferrer\" title=\"recommended usage\">the <code>venv</code> documentation</a> for recommended usage.  In your case, you might want:</p>\n\n<pre><code>$ /usr/bin/python3.6 -m venv myenv\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8798404"}, "edited": false, "score": 5, "creation_date": 1508405706, "post_id": 46821748, "comment_id": 80601167, "body": "<code>pip3 -V pip 9.0.1 from &#47;usr&#47;lib&#47;python3&#47;dist-packages (python 3.5) </code>   <code>python3.6 $(which pip3) --version</code> <code>Traceback (most recent call last):</code>   <code>File &quot;&#47;usr&#47;bin&#47;pip3&quot;, line 9, in &lt;module&gt;</code>     <code>from pip import main</code> <code>ModuleNotFoundError: No module named &#39;pip&#39; </code>"}], "tags": [], "owner": {"reputation": 2620, "user_id": 899950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dbb03e33d3960bf7834721592292103?s=128&d=identicon&r=PG", "display_name": "Lawrence D&#39;Oliveiro", "link": "https://stackoverflow.com/users/899950/lawrence-doliveiro"}, "is_accepted": false, "score": 7, "last_activity_date": 1508377982, "creation_date": 1508377982, "answer_id": 46821748, "question_id": 46820625, "link": "https://stackoverflow.com/questions/46820625/how-to-use-pip3-for-python-3-6-instead-of-python-3-5/46821748#46821748", "title": "How to use pip3 for python 3.6 instead of python 3.5?", "body": "<p>You can explicitly run the <code>pip3</code> script with a particular Python version, by prefixing it with the appropriate <code>python3.</code><em>x</em> command:</p>\n\n<pre><code>ldo@theon:~&gt; pip3 --version\npip 9.0.1 from /usr/lib/python3/dist-packages (python 3.6)\nldo@theon:~&gt; python3.5 $(which pip3) --version\npip 9.0.1 from /usr/lib/python3/dist-packages (python 3.5)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1378, "user_id": 1607937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7eac48b60589f9a7e483887c07c26c2?s=128&d=identicon&r=PG", "display_name": "Den-Jason", "link": "https://stackoverflow.com/users/1607937/den-jason"}, "is_accepted": false, "score": 0, "last_activity_date": 1574708512, "creation_date": 1574708512, "answer_id": 59038498, "question_id": 46820625, "link": "https://stackoverflow.com/questions/46820625/how-to-use-pip3-for-python-3-6-instead-of-python-3-5/59038498#59038498", "title": "How to use pip3 for python 3.6 instead of python 3.5?", "body": "<p>When you install Python3, see if there's a comment such as this:\n<code>Ignoring ensurepip failure: pip 9.0.1 requires SSL/TLS</code></p>\n\n<p>You might see entries like this in the log:</p>\n\n<pre><code>INFO: Can't locate Tcl/Tk libs and/or headers\n\nPython build finished successfully!\nThe necessary bits to build these optional modules were not found:\n_bz2                  _dbm                  _gdbm              \n_lzma                 _sqlite3              _ssl               \n_tkinter              readline                                 \nTo find the necessary bits, look in setup.py in detect_modules() for the     module's name.\n\nThe following modules found by detect_modules() in setup.py, have been\nbuilt by the Makefile instead, as configured by the Setup files:\natexit                pwd                   time  \n</code></pre>\n\n<p>This answer describes using ensurepip\n<a href=\"https://stackoverflow.com/a/38250442/1607937\">https://stackoverflow.com/a/38250442/1607937</a></p>\n\n<p>Also see this regarding openssl\n<a href=\"https://stackoverflow.com/questions/41328451/ssl-module-in-python-is-not-available-when-installing-package-with-pip3\">&quot;SSL module in Python is not available&quot; when installing package with pip3</a></p>\n"}, {"tags": [], "owner": {"reputation": 354, "user_id": 5905599, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/pwvmH.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/5905599/mike"}, "is_accepted": false, "score": 2, "last_activity_date": 1594882928, "creation_date": 1594882928, "answer_id": 62929254, "question_id": 46820625, "link": "https://stackoverflow.com/questions/46820625/how-to-use-pip3-for-python-3-6-instead-of-python-3-5/62929254#62929254", "title": "How to use pip3 for python 3.6 instead of python 3.5?", "body": "<p>To install a package in the same version location that's associated with the version associated with python3, use the following:</p>\n<pre><code>python3 -m pip install [package]\n</code></pre>\n<p>to pick a specific version that you'd like your package to be associated with (so you're not guessing with the above):</p>\n<pre><code>python3.5 -m pip install [package]\npython3.7 -m pip install [package]\n</code></pre>\n<p>Also, be careful because pip3 can point to different locations and may not necessarily match the location of the python3 binary.  I just found that out when I did a pip3 install and it failed to import when running python3.</p>\n<p>You can also explicitly call pip3.5, pip3.7, etc, but honestly I prefer using the <code>python[version] -m pip install [package]</code> method because I know that it will install the package in the location associated with whatever python3.x binary I'm using.</p>\n"}, {"tags": [], "owner": {"reputation": 130, "user_id": 10526869, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-HFk9XGX4knY/AAAAAAAAAAI/AAAAAAAAAAk/oP5_wo3Diqs/photo.jpg?sz=128", "display_name": "Leonardo Rick", "link": "https://stackoverflow.com/users/10526869/leonardo-rick"}, "is_accepted": false, "score": 0, "last_activity_date": 1611856049, "creation_date": 1611856049, "answer_id": 65942543, "question_id": 46820625, "link": "https://stackoverflow.com/questions/46820625/how-to-use-pip3-for-python-3-6-instead-of-python-3-5/65942543#65942543", "title": "How to use pip3 for python 3.6 instead of python 3.5?", "body": "<p>If you want to use only one version of python you sould probably create an alias. Add this line at the end of your ~/.bashrc flie:</p>\n<pre><code>alias pip='python3.6 -m pip'\n</code></pre>\n<p>Then, run <code>source ~/.bashrc</code>, and now <code>pip --version</code> will show something like:</p>\n<pre><code>pip xx.x.x from /usr/lib/python3/dist-packages/pip (python 3.6)\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8798404"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41350, "favorite_count": 4, "accepted_answer_id": 46820836, "answer_count": 6, "score": 15, "last_activity_date": 1611856049, "creation_date": 1508368737, "question_id": 46820625, "link": "https://stackoverflow.com/questions/46820625/how-to-use-pip3-for-python-3-6-instead-of-python-3-5", "title": "How to use pip3 for python 3.6 instead of python 3.5?", "body": "<p>I'm using Kali dist so I have already installed Python 2.7, 3.5 and 3.6. Commands 'python' and 'pip' are associated with Python 2.7. But the 'python3' uses Python 3.6 while pip3 is installing packages for Python 3.5.<br>\nWhen I tried to create an venv:</p>\n\n<pre><code>pip3 -p python3.6 virtualenv myenv\n</code></pre>\n\n<p>I've got an error:</p>\n\n<pre><code>no such option: -p\n</code></pre>\n\n<p>How can I associate pip3 with Python 3.6 instead of Python 3.5?</p>\n"}, {"tags": ["python", "machine-learning", "keras"], "answers": [{"tags": [], "owner": {"reputation": 2511, "user_id": 8328970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iCYkb.png?s=128&g=1", "display_name": "blackHoleDetector", "link": "https://stackoverflow.com/users/8328970/blackholedetector"}, "is_accepted": false, "score": 9, "last_activity_date": 1558964362, "last_edit_date": 1558964362, "creation_date": 1508372873, "answer_id": 46821197, "question_id": 46820609, "link": "https://stackoverflow.com/questions/46820609/how-the-keras-steps-per-epoch-in-fit-generator-works/46821197#46821197", "title": "How the Keras steps_per_epoch in fit_generator works", "body": "<p>The <code>steps_per_epoch</code> parameter is the number of batches of samples it will take to complete one full epoch. This is dependent on your batch size. The batch size is set where you initialize your training data. For example, if you're doing this with <code>ImageDataGenerator.flow()</code> or <code>ImageDataGenerator.flow_from_directory()</code>, the batch size is specified with the <code>batch_size</code> parameter in each of these.</p>\n\n<p>You said you have 3000 samples. </p>\n\n<ul>\n<li>If your batch size was 100, then <code>steps_per_epoch</code> would be 30.</li>\n<li>If your batch size was 10, then <code>steps_per_epoch</code> would be 300. </li>\n<li>If your batch size was 1, then <code>steps_per_epoch</code> would be 3000. </li>\n</ul>\n\n<p>This is because <code>steps_per_epoch</code> should be equivalent to the total number of samples divided by the batch size. The process of implementing this in Keras is available in the two videos below.</p>\n\n<p>The reason why you have to set <code>steps_per_epoch</code> is that the generator is designed to run indefinitely (See the <a href=\"https://keras.io/models/model/#fit_generator\" rel=\"noreferrer\">docs</a>: </p>\n\n<blockquote>\n  <p>\"The generator is expected to loop over its data indefinitely.\"</p>\n</blockquote>\n\n<p>). You implemented this by setting <code>while 1</code>.\nSince <code>fit_generator()</code> is supposed to run <code>epochs=x</code> times, the method must know when the next epoch begins within this indefinitely loop (and, hence, the data has to be drawn from the beginning again).</p>\n\n<ul>\n<li><a href=\"https://youtu.be/LhEMXbjGV_4\" rel=\"noreferrer\">Image preparation for CNN training with Keras</a></li>\n<li><a href=\"https://youtu.be/daovGOlMbT4\" rel=\"noreferrer\">Create and train a CNN in Keras</a></li>\n</ul>\n"}], "owner": {"reputation": 61, "user_id": 4946726, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/72265cf5f5a050d19119762c38671e91?s=128&d=identicon&r=PG&f=1", "display_name": "CyberDreamer", "link": "https://stackoverflow.com/users/4946726/cyberdreamer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5372, "favorite_count": 3, "answer_count": 1, "score": 2, "last_activity_date": 1558964362, "creation_date": 1508368576, "last_edit_date": 1508370177, "question_id": 46820609, "link": "https://stackoverflow.com/questions/46820609/how-the-keras-steps-per-epoch-in-fit-generator-works", "title": "How the Keras steps_per_epoch in fit_generator works", "body": "<p>In Keras documentation - <strong>steps_per_epoch:</strong> Total number of steps (batches of samples) to yield from generator before declaring one epoch finished and starting the next epoch. It should typically be equal to the number of unique samples of your dataset divided by the batch size.</p>\n\n<p>I have 3000 samples. \nIf i set steps_per_epoch=3000 it's work slowly. If i set steps_per_epoch=300 it's work faster and i thought that Batch works! </p>\n\n<p>But then I compared how much video memory is allocated in the first and second cases. And did not notice a big difference. If I use a simple <strong>fit()</strong> function then the difference is large. So it's real  speed up or i just process 300 examples, instead of 3000?</p>\n\n<p>What for this parameter is necessary? And how can I speed up the training? \nMy generator code:</p>\n\n<pre><code>def samples_generator(self, path_source, path_mask):\n    while 1:\n        file_paths_x = self.get_files(path_source)\n        file_paths_y = self.get_files(path_mask)\n        for path_x, path_y in zip(file_paths_x, file_paths_y):\n            x = self.load_pixels(path_x, 3, cv2.INTER_CUBIC)\n            y = self.load_pixels(path_y, 0, cv2.INTER_NEAREST)\n            yield (x, y)\n</code></pre>\n"}, {"tags": ["python", "gdal", "rasterio"], "comments": [{"owner": {"reputation": 1489, "user_id": 512111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e5f1d712b8bb45a9aed6b3989c4f2e9?s=128&d=identicon&r=PG", "display_name": "j08lue", "link": "https://stackoverflow.com/users/512111/j08lue"}, "edited": false, "score": 0, "creation_date": 1516695261, "post_id": 46820601, "comment_id": 83781454, "body": "In my experience with rasterio/GDAL, data is usually only written to disk once you <b>close the file</b>. Why would you want to write the modified data, read it again right away, just to modify it again? Either way, you have to close the file to write."}, {"owner": {"reputation": 1459, "user_id": 387851, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dedc4888ddabc340b34dac29618095c9?s=128&d=identicon&r=PG", "display_name": "four43", "link": "https://stackoverflow.com/users/387851/four43"}, "reply_to_user": {"reputation": 1489, "user_id": 512111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e5f1d712b8bb45a9aed6b3989c4f2e9?s=128&d=identicon&r=PG", "display_name": "j08lue", "link": "https://stackoverflow.com/users/512111/j08lue"}, "edited": false, "score": 0, "creation_date": 1516926987, "post_id": 46820601, "comment_id": 83901316, "body": "Not enough memory to store everything in memory at once. This is a 3mo old question. I don&#39;t even know what this was in reference to, I think I found a workaround (I don&#39;t remember) but I&#39;ll leave this open in case anyone else has any ideas."}], "owner": {"reputation": 1459, "user_id": 387851, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dedc4888ddabc340b34dac29618095c9?s=128&d=identicon&r=PG", "display_name": "four43", "link": "https://stackoverflow.com/users/387851/four43"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 269, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1508368539, "creation_date": 1508368539, "question_id": 46820601, "link": "https://stackoverflow.com/questions/46820601/rasterio-gdal-read-and-write-modified-data", "title": "Rasterio/GDAL read and write modified data", "body": "<p>I'm having an issue where I'm trying to read and write from the same data set. As data gets modified there are situations where that data needs to be read and modified again, immediately. The python code looks pretty straight forward, but it seems to be buffering the writes to disk, but not in the same memory location as the reads because those seem to be writing different data??</p>\n\n<pre><code>with rasterio.open(\"mydata.tiff\", \"r+\") as rIoHandle:\n    # Read window\n    data = rIoHandle.read(1, window=myWindow) \n    # Modify data\n    data = data * 0.9\n    # Write back window\n    rIoHandle.write(data, window=myWindow)\n</code></pre>\n\n<p>It seems like as that window is re-read it's actually just reading the original data, not the data that is written. Am I doing something wrong? Is there a write thread in the background that is hiding that data from me?</p>\n\n<p>Thanks,\n-Seth</p>\n"}, {"tags": ["javascript", "python", "css", "python-3.x", "selenium"], "comments": [{"owner": {"reputation": 5908, "user_id": 2442613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c872ea7055801788bec55c7703b96d88?s=128&d=identicon&r=PG", "display_name": "Paul Cornelius", "link": "https://stackoverflow.com/users/2442613/paul-cornelius"}, "edited": false, "score": 2, "creation_date": 1508368997, "post_id": 46820559, "comment_id": 80588797, "body": "Your approach to exception handling is not helping you here.  There could be hundreds of possible errors, all caught by a single <code>except</code> that prints out no useful diagnostic information.  Try printing a traceback inside the except block to see which line is raising the exception (import traceback; traceback.print_exc())."}, {"owner": {"reputation": 2145, "user_id": 2403000, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/2303300fa4b29197c3a11eea331afdbf?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/2403000/peter"}, "edited": false, "score": 0, "creation_date": 1508369200, "post_id": 46820559, "comment_id": 80588850, "body": "Either that or just remove the try/except block until you know what you&#39;re looking for. Dunno if it&#39;s an error with copying, but <code>if &quot;driver.find_element_by_id(&#39;state-text&#39;).text == &quot;Not Ready - Break&quot;:</code> has an incorrect speech mark at the start."}, {"owner": {"reputation": 11632, "user_id": 8582353, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa2e22a564c1d0e098316210a2ec4fb1?s=128&d=identicon&r=PG&f=1", "display_name": "yong", "link": "https://stackoverflow.com/users/8582353/yong"}, "edited": false, "score": 0, "creation_date": 1508376020, "post_id": 46820559, "comment_id": 80590460, "body": "driver.execute_script(&quot;$(window.open(&#39;child_link&#39;))&quot;) seems will not to open the link, but open new window/dialog.  because window.open() use to open dialog/window.  Are you sure you use the right way to open the link?"}, {"owner": {"reputation": 13, "user_id": 8213145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b62eab0d5b3fa057f35cf7315ba89901?s=128&d=identicon&r=PG&f=1", "display_name": "Shaik", "link": "https://stackoverflow.com/users/8213145/shaik"}, "edited": false, "score": 0, "creation_date": 1508376616, "post_id": 46820559, "comment_id": 80590594, "body": "Whenever it meets condition i have to ooen new tab. That&#39;s why i used (window.open(child_link)). Moreover its shows exception even if i try to open child link manually in my webdriver ."}], "owner": {"reputation": 13, "user_id": 8213145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b62eab0d5b3fa057f35cf7315ba89901?s=128&d=identicon&r=PG&f=1", "display_name": "Shaik", "link": "https://stackoverflow.com/users/8213145/shaik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1508369335, "creation_date": 1508368216, "last_edit_date": 1508369335, "question_id": 46820559, "link": "https://stackoverflow.com/questions/46820559/python-selenium-shows-exception", "title": "Python selenium shows exception", "body": "<p>I am getting an exception while trying to open a new link. I have written python script and I expected it will open new link whenever it meets certain condition but while it meet condition it shows alert popup(while entering my credential, it shows exception) and I don't know how to fix it. Currently I am working on Firefox browser and I also checked previous questions related to this issue, where their issue got fixed by changing the browser from Firefox to IE, but in my case I can't use IE since my base link will not open(support) in IE. Is there any way to fix this one?</p>\n\n<p>Here is my code:</p>\n\n<pre><code>import time\nfrom datetime import datetime\nfrom selenium import webdriver\n\ntry:\n\n    driver = webdriver.Firefox(executable_path=\"C:\\\\Users\\\\Programs\\\\Python\\\\Python36\\\\Lib\\\\site-packages\\\\selenium\\\\webdriver\\\\firefox\\\\geckodriver.exe\")\n    driver.get('https://base_link')\n\n    my_id = driver.find_element_by_name('j_username')\n    my_id.send_keys('1895')\n\n    password = driver.find_element_by_name('j_password')\n    password.send_keys('1895')\n\n    ext = driver.find_element_by_name('extension_login_user')\n    ext.send_keys('4081111895')\n\n    sign_in_button = driver.find_element_by_id('signin-button')\n    sign_in_button.click()\n\n    time.sleep(30)\n\n    driver.set_window_size(1024, 768)\n    driver.maximize_window()\n\n    ticket_opened = False\n    window = 0\n    while True:\n        if driver.find_element_by_id('state-text').text == 'Not Ready - GMC Work':\n            time.sleep(1)\n\n            if driver.find_element_by_id('state-text').text == \"Not Ready - Break\":\n                if ticket_opened is False:\n                    driver.execute_script(\"$(window.open('child_link'))\")\n                    driver.switch_to_window(driver.window_handles[window])\n                    window += 1\n                    continue\n                else:\n                    ticket_opened = False\n            else:\n                continue\n        else:\n            continue\n\nexcept Exception as e:\n    print('Exception Occurred: ' + str(e))\n    print('Time and Date: ' + str(datetime.now())[0:19])\n</code></pre>\n\n<p>Here I am getting the exception (output):</p>\n\n<pre><code>Exception Occurred: Alert Text: None\nMessage: \n\nTime and Date: 2017-10-19 04:13:39\n</code></pre>\n\n<p>Kindly help me to fix out this one using python selenium. If we can't fix this one, then kindly suggest me some other tool/way to fix this one. </p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 2261, "user_id": 8544123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f32b871be77d8c71efc294359b300367?s=128&d=identicon&r=PG&f=1", "display_name": "Acccumulation", "link": "https://stackoverflow.com/users/8544123/acccumulation"}, "edited": false, "score": 0, "creation_date": 1508370355, "post_id": 46820551, "comment_id": 80589134, "body": "For one thing, you have a single equals sign in an if statement. Can you explain what you expect your function to do and why? Right now, even if you changed the <code>=</code> to <code>==</code>, it would just look for two words with the same length and return them."}, {"owner": {"reputation": 214708, "user_id": 201359, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7odj.jpg?s=128&g=1", "display_name": "&#211;scar L&#243;pez", "link": "https://stackoverflow.com/users/201359/%c3%93scar-l%c3%b3pez"}, "edited": false, "score": 0, "creation_date": 1508370494, "post_id": 46820551, "comment_id": 80589168, "body": "Just use one of the previous answers to this same question, and sort the lists in the dict at the end. There&#39;s no need to keep asking the same question"}], "answers": [{"comments": [{"owner": {"reputation": 153, "user_id": 8057003, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/ed24feaa1ac5d6febc871832eae39cb2?s=128&d=identicon&r=PG&f=1", "display_name": "Kee", "link": "https://stackoverflow.com/users/8057003/kee"}, "edited": false, "score": 0, "creation_date": 1508369098, "post_id": 46820587, "comment_id": 80588823, "body": "Dict function have no effect."}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 153, "user_id": 8057003, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/ed24feaa1ac5d6febc871832eae39cb2?s=128&d=identicon&r=PG&f=1", "display_name": "Kee", "link": "https://stackoverflow.com/users/8057003/kee"}, "edited": false, "score": 0, "creation_date": 1508369130, "post_id": 46820587, "comment_id": 80588831, "body": "@Kee Except converting <code>defaultdict</code> to a <code>dict</code>, it only looks more readable when printing. ;-)"}, {"owner": {"reputation": 153, "user_id": 8057003, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/ed24feaa1ac5d6febc871832eae39cb2?s=128&d=identicon&r=PG&f=1", "display_name": "Kee", "link": "https://stackoverflow.com/users/8057003/kee"}, "edited": false, "score": 0, "creation_date": 1508371980, "post_id": 46820587, "comment_id": 80589572, "body": "How to achieve same result with list function and sort the output ?"}], "tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 1, "last_activity_date": 1508372093, "last_edit_date": 1508372093, "creation_date": 1508368424, "answer_id": 46820587, "question_id": 46820551, "link": "https://stackoverflow.com/questions/46820551/get-word-length-in-dict-python/46820587#46820587", "title": "Get word length in dict python", "body": "<p>A <code>defaultdict</code> of <code>set</code>s should do. First, let's define a function.</p>\n\n<pre><code>from collections import defaultdict\n\ndef get_word_counts(text):\n    d = defaultdict(set)\n\n    for word in text.split():\n        d[len(word)].add(word)    # observe this bit carefully\n\n    return {k : list(v) for k, v in d.items()}\n</code></pre>\n\n<p>The idea is to find the length of each word, and insert it into the list/set that it belongs to. Once you've defined the function, you may call it as you please.</p>\n\n<pre><code>text = \"May your coffee be strong and your Monday be short\"\nprint(get_word_counts(text))\n{2: ['be'], 3: ['and', 'May'], 4: ['your'], 5: ['short'], 6: ['coffee', 'strong', 'Monday']}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5991, "user_id": 232371, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fb2a01bdde27923d196336fe006c8764?s=128&d=identicon&r=PG", "display_name": "Ben Usman", "link": "https://stackoverflow.com/users/232371/ben-usman"}, "is_accepted": false, "score": 0, "last_activity_date": 1508370330, "creation_date": 1508370330, "answer_id": 46820868, "question_id": 46820551, "link": "https://stackoverflow.com/questions/46820551/get-word-length-in-dict-python/46820868#46820868", "title": "Get word length in dict python", "body": "<p>You can also use <code>itertools.groupby</code> with <code>sorted</code> in order to get similar \"lazy\" results:</p>\n\n<pre><code>a = 'a long list of words in nice'\nx = groupby(sorted(a.split(), key=len), len)  # word counts\nprint(dict((a, list(b)) for a, b in x))\n&gt;&gt;&gt; {1: ['a'], 2: ['of', 'in'], 4: ['long', 'list', 'nice'], 5: ['words']}\n</code></pre>\n\n<p>By \"lazy\" I mean that things would not start actually computing (e.g. if you have a really large string), until you start iterating over it. Be careful with iterators returned by <code>groupby()</code> though! That is quite easy to accidentally empty them and then attempt to read second time (and get empty list).</p>\n\n<blockquote>\n  <p>The returned group is itself an iterator that shares the underlying\n  iterable with groupby(). Because the source is shared, when the\n  groupby() object is advanced, the previous group is no longer visible.\n  So, if that data is needed later, it should be stored as a list</p>\n</blockquote>\n"}], "owner": {"reputation": 153, "user_id": 8057003, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/ed24feaa1ac5d6febc871832eae39cb2?s=128&d=identicon&r=PG&f=1", "display_name": "Kee", "link": "https://stackoverflow.com/users/8057003/kee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1446, "favorite_count": 0, "closed_date": 1508370452, "accepted_answer_id": 46820587, "answer_count": 2, "score": 0, "last_activity_date": 1508372093, "creation_date": 1508368175, "question_id": 46820551, "link": "https://stackoverflow.com/questions/46820551/get-word-length-in-dict-python", "closed_reason": "Duplicate", "title": "Get word length in dict python", "body": "<p>Example:</p>\n\n<pre><code> def test_get_word_len_dict():\n    text = \"May your coffee be strong and your Monday be short\"\n    the_dict = get_word_len_dict(text)\n    print_dict_in_key_order(the_dict)\n    print()\n\n    text = 'why does someone believe you when you say there are four billion stars but they have to check when you say the paint is wet'\n    the_dict = get_word_len_dict(text)\n    print_dict_in_key_order(the_dict)\n</code></pre>\n\n<p>I want to get a dictionary with keys which are\nintegers and corresponding values which are lists of unique words.The\nlist of words corresponding to a key contains all the unique words from\nthe text that have a length equal to the key value. The corresponding\nlists of unique words should be in sorted alphabetical order.I don't know how to fix my function</p>\n\n<pre><code>def get_len_word_dict():\n     new_text = text.split()\n     for k,v in new_text.items():\n        if len(v) = len(k):\n           return k,v\n</code></pre>\n\n<p>expected:</p>\n\n<pre><code> 2 : ['be']\n 3 : ['May', 'and']\n 4 : ['your']\n 5 : ['short']\n 6 : ['Monday', 'coffee', 'strong']\n\n 2 : ['is', 'to']\n 3 : ['are', 'but', 'say', 'the', 'wet', 'why', 'you']\n 4 : ['does', 'four', 'have', 'they', 'when']\n 5 : ['check', 'paint', 'stars', 'there']\n 7 : ['believe', 'billion', 'someone']\n</code></pre>\n"}, {"tags": ["python", "numpy", "tensorflow", "machine-learning", "bigdata"], "comments": [{"owner": {"reputation": 469, "user_id": 8581827, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-p2Tn2fY2BLw/AAAAAAAAAAI/AAAAAAAAAX4/lbtxBpy2GGs/photo.jpg?sz=128", "display_name": "kww", "link": "https://stackoverflow.com/users/8581827/kww"}, "edited": false, "score": 0, "creation_date": 1508371466, "post_id": 46820500, "comment_id": 80589418, "body": "This is probably exactly what you are looking for: <a href=\"https://www.tensorflow.org/programmers_guide/datasets\" rel=\"nofollow noreferrer\">Import Data (with the <code>Dataset</code> API)</a>"}, {"owner": {"reputation": 789, "user_id": 6288172, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4d9cb072975c5dc5a5ee485a63eb354b?s=128&d=identicon&r=PG&f=1", "display_name": "Paramdeep Singh Obheroi", "link": "https://stackoverflow.com/users/6288172/paramdeep-singh-obheroi"}, "edited": false, "score": 0, "creation_date": 1508395007, "post_id": 46820500, "comment_id": 80595246, "body": "With large datasets you should not pass all of it at once. Use mini-batches to overcome that. But over that, do not bring everything in memory in the first place. Use mini-batches."}, {"owner": {"reputation": 191, "user_id": 686572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/561b584a8d309e785ce6dc026d0cabeb?s=128&d=identicon&r=PG", "display_name": "Joao Paulo Farias", "link": "https://stackoverflow.com/users/686572/joao-paulo-farias"}, "edited": false, "score": 0, "creation_date": 1508460693, "post_id": 46820500, "comment_id": 80629636, "body": "Karhy, I did read the dataset documentation but most of it seems to assume the data is preloaded into memory.  Paramdeep, I am using mini batches, this is just how I load the data from the numpy files, then later on I shuffle the data and manually do mini batches to feed the x and y placeholders. This is what I am trying to figure out how to do in a more efficient way."}], "answers": [{"tags": [], "owner": {"reputation": 47598, "user_id": 712995, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/c7ImO.png?s=128&g=1", "display_name": "Maxim", "link": "https://stackoverflow.com/users/712995/maxim"}, "is_accepted": false, "score": 10, "last_activity_date": 1509467306, "creation_date": 1509467306, "answer_id": 47040165, "question_id": 46820500, "link": "https://stackoverflow.com/questions/46820500/how-to-handle-large-amouts-of-data-in-tensorflow/47040165#47040165", "title": "How to handle large amouts of data in tensorflow?", "body": "<p>The utilities for <code>npy</code> files indeed allocate the whole array in memory. I'd recommend you to convert all of your numpy arrays to <a href=\"https://www.tensorflow.org/api_guides/python/python_io#tfrecords_format_details\" rel=\"noreferrer\"><code>TFRecords</code> format</a> and use these files in training. This is one of the most efficient ways to read large dataset in tensorflow.</p>\n\n<p><strong>Convert to <code>TFRecords</code></strong></p>\n\n<pre><code>def array_to_tfrecords(X, y, output_file):\n  feature = {\n    'X': tf.train.Feature(float_list=tf.train.FloatList(value=X.flatten())),\n    'y': tf.train.Feature(float_list=tf.train.FloatList(value=y.flatten()))\n  }\n  example = tf.train.Example(features=tf.train.Features(feature=feature))\n  serialized = example.SerializeToString()\n\n  writer = tf.python_io.TFRecordWriter(output_file)\n  writer.write(serialized)\n  writer.close()\n</code></pre>\n\n<p>A complete example that deals with images can be <a href=\"https://github.com/tensorflow/tensorflow/blob/r1.3/tensorflow/examples/how_tos/reading_data/convert_to_records.py\" rel=\"noreferrer\">found here</a>.</p>\n\n<p><strong>Read <code>TFRecordDataset</code></strong></p>\n\n<pre><code>def parse_proto(example_proto):\n  features = {\n    'X': tf.FixedLenFeature((345,), tf.float32),\n    'y': tf.FixedLenFeature((5,), tf.float32),\n  }\n  parsed_features = tf.parse_single_example(example_proto, features)\n  return parsed_features['X'], parsed_features['y']\n\ndef read_tfrecords(file_names=(\"file1.tfrecord\", \"file2.tfrecord\", \"file3.tfrecord\"),\n                   buffer_size=10000,\n                   batch_size=100):\n  dataset = tf.contrib.data.TFRecordDataset(file_names)\n  dataset = dataset.map(parse_proto)\n  dataset = dataset.shuffle(buffer_size)\n  dataset = dataset.repeat()\n  dataset = dataset.batch(batch_size)\n  return tf.contrib.data.Iterator.from_structure(dataset.output_types, dataset.output_shapes)\n</code></pre>\n\n<p>The data manual can be <a href=\"https://www.tensorflow.org/api_guides/python/reading_data\" rel=\"noreferrer\">found here</a>.</p>\n"}], "owner": {"reputation": 191, "user_id": 686572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/561b584a8d309e785ce6dc026d0cabeb?s=128&d=identicon&r=PG", "display_name": "Joao Paulo Farias", "link": "https://stackoverflow.com/users/686572/joao-paulo-farias"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6577, "favorite_count": 4, "answer_count": 1, "score": 14, "last_activity_date": 1523908845, "creation_date": 1508367771, "last_edit_date": 1523908845, "question_id": 46820500, "link": "https://stackoverflow.com/questions/46820500/how-to-handle-large-amouts-of-data-in-tensorflow", "title": "How to handle large amouts of data in tensorflow?", "body": "<p>For my project I have large amounts of data, about 60GB spread into npy files, each holding about 1GB, each containing about 750k records and labels.</p>\n\n<p>Each record is a 345 float32  and the labels are 5 float32.</p>\n\n<p>I read the tensorflow dataset documentation and the queues / threads documentation as well but I can't figure out how to best handle the input for training and then how save the model and weights for future predicting.</p>\n\n<p>My model is pretty straight forward, it looks like this:</p>\n\n<pre><code>x = tf.placeholder(tf.float32, [None, 345], name='x')\ny = tf.placeholder(tf.float32, [None, 5], name='y')\nwi, bi = weight_and_bias(345, 2048)\nhidden_fc = tf.nn.sigmoid(tf.matmul(x, wi) + bi)\nwo, bo = weight_and_bias(2048, 5)\nout_fc = tf.nn.sigmoid(tf.matmul(hidden_fc, wo) + bo)\nloss = tf.reduce_mean(tf.squared_difference(y, out_fc))\ntrain_op = tf.train.AdamOptimizer().minimize(loss)\n</code></pre>\n\n<p>The way I was training my neural net was reading the files one at a time in a random order then using a shuffled numpy array to index each file and manually creating each batch to feed the <code>train_op</code> using <code>feed_dict</code>. From everything I read this is very inefficient and I should somehow replace it with datasets or queue and threads but as I said the documentation was of no help.</p>\n\n<p>So, what is the best way to handle large amounts of data in tensorflow?</p>\n\n<p>Also, for reference, my data was saved to a numpy file in a 2 operation step:</p>\n\n<pre><code>with open('datafile1.npy', 'wb') as fp:\n    np.save(data, fp)\n    np.save(labels, fp)\n</code></pre>\n"}, {"tags": ["python", "string", "filereader"], "comments": [{"owner": {"reputation": 2052, "user_id": 4434679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8Vrsg.png?s=128&g=1", "display_name": "BHawk", "link": "https://stackoverflow.com/users/4434679/bhawk"}, "edited": false, "score": 0, "creation_date": 1508367951, "post_id": 46820496, "comment_id": 80588526, "body": "Do you want a list of indexes where the word fields appears?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1508368722, "post_id": 46820496, "comment_id": 80588727, "body": "You could use a regexp and <code>re.findall()</code>"}], "answers": [{"tags": [], "owner": {"reputation": 7725, "user_id": 4889267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b86b65464f4070d38bbf2abdbd4f1610?s=128&d=identicon&r=PG&f=1", "display_name": "AK47", "link": "https://stackoverflow.com/users/4889267/ak47"}, "is_accepted": false, "score": 1, "last_activity_date": 1508367819, "creation_date": 1508367819, "answer_id": 46820505, "question_id": 46820496, "link": "https://stackoverflow.com/questions/46820496/list-all-index-in-a-string-that-satisfies-a-certain-string/46820505#46820505", "title": "List all Index in a string that satisfies a certain string", "body": "<p>Open the file, loop over every line and check if it contains 'fields' and if it does, print the line</p>\n\n<pre><code>with open(\"controlDict\", \"r\") as myfile:\n    for line in myfile.readlines():\n        if 'fields' in line:\n            print(line)\n</code></pre>\n\n<p>If you just need the index of the line you can use</p>\n\n<pre><code>with open(\"controlDict\", \"r\") as myfile:\n    for index, line in enumerate(myfile.readlines()):\n        if 'fields' in line:\n            print(index)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2052, "user_id": 4434679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8Vrsg.png?s=128&g=1", "display_name": "BHawk", "link": "https://stackoverflow.com/users/4434679/bhawk"}, "is_accepted": false, "score": 0, "last_activity_date": 1508368263, "creation_date": 1508368263, "answer_id": 46820563, "question_id": 46820496, "link": "https://stackoverflow.com/questions/46820496/list-all-index-in-a-string-that-satisfies-a-certain-string/46820563#46820563", "title": "List all Index in a string that satisfies a certain string", "body": "<p>If you want the exact index where the word fields occurs in the file you can do the following:</p>\n\n<pre><code>str = \"fields\"\nindices = []\ni = 0\nwhile i &gt;= 0:\n  i = file.find(str,i)\n  indices.append(i)\n</code></pre>\n\n<p>If you want the line index you can use AK47's answer.</p>\n"}, {"tags": [], "owner": {"reputation": 1370, "user_id": 3188061, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9c5b5891d55112097938b3c8e66218e5?s=128&d=identicon&r=PG&f=1", "display_name": "Alper F\u0131rat Kaya", "link": "https://stackoverflow.com/users/3188061/alper-f%c4%b1rat-kaya"}, "is_accepted": false, "score": 0, "last_activity_date": 1508368298, "creation_date": 1508368298, "answer_id": 46820572, "question_id": 46820496, "link": "https://stackoverflow.com/questions/46820496/list-all-index-in-a-string-that-satisfies-a-certain-string/46820572#46820572", "title": "List all Index in a string that satisfies a certain string", "body": "<p>if you want the indexes of the words </p>\n\n<pre><code>def all_occurences(file, str):\n    initial = 0\n    while True:\n        initial = file.find(str, initial)\n        if initial == -1: return\n        yield initial\n        initial += len(str)\n\nprint(list(all_occurences(open(\"controlDict.txt\").read(), \"fields\")))\n</code></pre>\n\n<p>you can use this code</p>\n"}, {"tags": [], "owner": {"reputation": 367, "user_id": 1835057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b5c48b9e6d7c68086d1e715090e71db?s=128&d=identicon&r=PG", "display_name": "Sindhuri Kuppasad", "link": "https://stackoverflow.com/users/1835057/sindhuri-kuppasad"}, "is_accepted": false, "score": 0, "last_activity_date": 1508369003, "creation_date": 1508369003, "answer_id": 46820675, "question_id": 46820496, "link": "https://stackoverflow.com/questions/46820496/list-all-index-in-a-string-that-satisfies-a-certain-string/46820675#46820675", "title": "List all Index in a string that satisfies a certain string", "body": "<p>The <code>re</code> module and list comprehension could be used:</p>\n\n<pre><code>import re\n\nwith open('controlDict.txt', 'r') as myfile:\n    file = myfile.read()\n\nindices = [match.start() for match in re.finditer('fields', file)]\n</code></pre>\n"}], "owner": {"reputation": 181, "user_id": 8566262, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8ebe2c2cc1bbf8f165f018936b2c34da?s=128&d=identicon&r=PG&f=1", "display_name": "Zhifang Hu", "link": "https://stackoverflow.com/users/8566262/zhifang-hu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1508369003, "creation_date": 1508367724, "last_edit_date": 1508368172, "question_id": 46820496, "link": "https://stackoverflow.com/questions/46820496/list-all-index-in-a-string-that-satisfies-a-certain-string", "title": "List all Index in a string that satisfies a certain string", "body": "<p>I am trying to use python to read a text file and search a certain string in the file as below</p>\n\n<pre><code>with open(\"controlDict\",\"r\") as myfile:\n    file=myfile.read()\n\nIndexFirst=file.find('fields')\n</code></pre>\n\n<p>However, I found out that it only gives me the first index of 'fields' in the file but I need to find all the indexes where 'fields' appears on the line.</p>\n\n<p>I did some research online and tried below</p>\n\n<pre><code>Index=[i for i, val in enumerate(file) if val=='fields']\n</code></pre>\n\n<p>but it does not work and returns an empty list. </p>\n\n<p>I am not sure why, anyone has any suggestions?</p>\n"}, {"tags": ["python", "selenium", "selenium-webdriver"], "comments": [{"owner": {"reputation": 8717, "user_id": 3124333, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MCMEh.jpg?s=128&g=1", "display_name": "SiKing", "link": "https://stackoverflow.com/users/3124333/siking"}, "edited": false, "score": 0, "creation_date": 1508366892, "post_id": 46820353, "comment_id": 80588229, "body": "So how much data is in the db? How many pages of data are you expecting? You do have access to the db data, because you have permission to scrape this website, correct?"}, {"owner": {"reputation": 11632, "user_id": 8582353, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa2e22a564c1d0e098316210a2ec4fb1?s=128&d=identicon&r=PG&f=1", "display_name": "yong", "link": "https://stackoverflow.com/users/8582353/yong"}, "edited": false, "score": 0, "creation_date": 1508377466, "post_id": 46820353, "comment_id": 80590785, "body": "The click event function of see ore link defined in Itera.RegNumbers.js,  I think the possible reason of your issue come  from  two aspects.  1.  you not wait the page load before to click the see more link, browser is busy on rendering page, can&#39;t response the click event.  2. when you click the see more link the Itera.RegNumbers.js had not finish loading.  A quick way to detect is to add sleep 15s  after self.driver.get(url);"}], "answers": [{"tags": [], "owner": {"reputation": 4487, "user_id": 2329061, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/89e7e5642e4f608893b279c8438329a3?s=128&d=identicon&r=PG", "display_name": "Buaban", "link": "https://stackoverflow.com/users/2329061/buaban"}, "is_accepted": true, "score": 1, "last_activity_date": 1508394985, "last_edit_date": 1508394985, "creation_date": 1508388196, "answer_id": 46822948, "question_id": 46820353, "link": "https://stackoverflow.com/questions/46820353/click-show-more-button-until-all-data-in-table-is-shown-and-fetch-all-data-fro/46822948#46822948", "title": "Click &quot;show more&quot; button until all data in table is shown and fetch all data from table", "body": "<p>It looks like the root cause is about clicking on the button doesn't work. Use JavaScriptExecutor to click the button will solve this. See my code below.</p>\n\n<pre><code>from selenium import webdriver\nfrom selenium.webdriver.common.by import By\nfrom selenium.webdriver.support.ui import WebDriverWait\nfrom selenium.webdriver.support import expected_conditions as EC\nfrom selenium.common.exceptions import TimeoutException\nimport time\n\ndriver = webdriver.Chrome()\ndata = []\nurl = 'https://www.nets.eu/dk-da/l%C3%B8sninger/Registreringsnumre'\nxpath = '//table[@class=\"itera-DataTable\"]/tbody/tr'\ndriver.get(url)\n\ntry:\n    table = WebDriverWait(driver, 10).until(EC.presence_of_element_located((By.CLASS_NAME, 'itera-DataTable')))\n    print('Table found!')\nexcept TimeoutException:\n    print('Table not found')\n\n\nrow_count = len(driver.find_elements_by_xpath(xpath))\nprint(row_count)\nwhile True:\n    try:\n        button = WebDriverWait(driver, 10).until(EC.element_to_be_clickable((By.CSS_SELECTOR, '.itera-nextbatchbox')))\n        print('Button found!')\n    except TimeoutException:\n        break\n\n    driver.execute_script(\"arguments[0].click();\", button)\n    time.sleep(1)\n\n    try:\n        WebDriverWait(driver, 10).until(lambda driver: len(driver.find_elements_by_xpath( xpath)) &gt; row_count)\n        time.sleep(1)\n        row_count = len(driver.find_elements_by_xpath( xpath))\n        print(row_count)\n    except TimeoutException:\n        print('No more rows. Rows count: ' + str(len(driver.find_elements_by_xpath( xpath))))\n</code></pre>\n"}], "owner": {"reputation": 24613, "user_id": 555222, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/dcd4c7151c0b298d4fb46001df735f6b?s=128&d=identicon&r=PG", "display_name": "clarkk", "link": "https://stackoverflow.com/users/555222/clarkk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 658, "favorite_count": 0, "accepted_answer_id": 46822948, "answer_count": 1, "score": 1, "last_activity_date": 1508394985, "creation_date": 1508366602, "question_id": 46820353, "link": "https://stackoverflow.com/questions/46820353/click-show-more-button-until-all-data-in-table-is-shown-and-fetch-all-data-fro", "title": "Click &quot;show more&quot; button until all data in table is shown and fetch all data from table", "body": "<p>I need to fetch all data from the table on this page\n<a href=\"https://www.nets.eu/dk-da/l%C3%B8sninger/Registreringsnumre\" rel=\"nofollow noreferrer\">https://www.nets.eu/dk-da/l%C3%B8sninger/Registreringsnumre</a></p>\n\n<p>But I need to click the \"show more\" button until all data is shown..</p>\n\n<p>But no matter how many time I click the \"show more\" button the table keeps having 30 rows..!?</p>\n\n<pre><code>import sys\nimport time\nfrom pyvirtualdisplay import Display\nfrom selenium import webdriver\nfrom selenium.webdriver.common.by import By\nfrom selenium.webdriver.support.ui import WebDriverWait\nfrom selenium.webdriver.support import expected_conditions as EC\nfrom selenium.common.exceptions import TimeoutException\nimport json\n\nclass Scrape:\n    display = None\n    driver = None\n\n    def __init__(self):\n        #   Start display\n        self.display = Display(visible=0, size=(800, 600))\n        self.display.start()\n\n        #   Init driver\n        self.driver = webdriver.Firefox()\n        self.driver.wait = WebDriverWait(self.driver, 5)\n\n        self.load_page()\n\n        time.sleep(5)\n\n        self.close()\n\n    def load_page(self):\n        data = []\n        url = 'https://www.nets.eu/dk-da/l%C3%B8sninger/Registreringsnumre'\n        xpath = '//table[@class=\"itera-DataTable\"]/tbody/tr'\n        self.driver.get(url)\n\n        try:\n            table = self.driver.wait.until(EC.presence_of_element_located(\n                (By.CLASS_NAME, 'itera-DataTable')))\n\n            print 'Table found!'\n\n            i = 1\n            while True:\n                button = self.driver.wait.until(EC.presence_of_element_located(\n                    (By.CLASS_NAME, 'itera-nextbatchbox')))\n\n                print 'Button %d found!' % (i)\n\n                row_count = len(self.driver.find_elements_by_xpath(xpath))\n                print row_count\n\n                button.click()\n\n                i += 1\n\n                if i &gt; 5:\n                    break\n\n            i = 1\n            for tr in self.driver.find_elements_by_xpath(xpath):\n                print 'TR %d' % (i)\n                tr_data = []\n                tds = tr.find_elements_by_tag_name('td')\n                if tds:\n                    tr_data.append([td.text for td in tds])\n                    data.append(tr_data)\n\n                i += 1\n\n            #print json.dumps(data)\n\n        except TimeoutException:\n            self.error('Table not found')\n\n    def error(self, str):\n        self.close()\n\n        print&gt;&gt;sys.stderr, str\n        sys.exit(1)\n\n    def close(self):\n        if self.driver is not None:\n            self.driver.quit()\n        self.display.stop()\n\nif __name__ == '__main__':\n    Scrape()\n</code></pre>\n"}, {"tags": ["python", "pandas", "regression", "linear-regression"], "comments": [{"owner": {"reputation": 1010, "user_id": 7183483, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206724005413282/picture?type=large", "display_name": "jlmurph", "link": "https://stackoverflow.com/users/7183483/jlmurph"}, "edited": false, "score": 1, "creation_date": 1508367071, "post_id": 46820317, "comment_id": 80588283, "body": "Include attempted code"}, {"owner": {"reputation": 894, "user_id": 4410133, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh6.googleusercontent.com/-Wsd24rhvY3k/AAAAAAAAAAI/AAAAAAAAAOY/zuzuR7SNY0A/photo.jpg?sz=128", "display_name": "Dave Kielpinski", "link": "https://stackoverflow.com/users/4410133/dave-kielpinski"}, "edited": false, "score": 0, "creation_date": 1508369065, "post_id": 46820317, "comment_id": 80588814, "body": "If you are asking about regression methodology, this question is better suited to the Data Science Stack Exchange."}], "owner": {"reputation": 7, "user_id": 8798301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d60633b44203670b51de799d4963928?s=128&d=identicon&r=PG&f=1", "display_name": "&#214;mer", "link": "https://stackoverflow.com/users/8798301/%c3%96mer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 269, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1564331465, "creation_date": 1508366343, "last_edit_date": 1564331465, "question_id": 46820317, "link": "https://stackoverflow.com/questions/46820317/linear-regression-over-time-series-with-multiple-outputs", "title": "Linear Regression over time series with multiple outputs", "body": "<p>I've been working with U.S. NOAA's (National Oceanic and Atmospheric Administration) Global Mean Sea Level dataset. There are 4 satellites provide information, so, there are 4 columns and year column. Those satellites provided informations within a specific time interval. For example; satellite Posedion worked within 1992-2006, Jason-1 worked within 2003-2014 etc. Of course, there will be lots of NaN values where Jason-1 doesn't serve but Poseidon does.</p>\n\n<p>What I want is to plot linear line to calculate sea level rise, that's all. I want those four columns to be fit with year column. Couldn't cracked yet..</p>\n\n<pre><code>Here is my code;\n\nimport numpy as np\nimport pandas as pd\nfrom scipy import stats\nfrom sklearn import linear_model\nfrom matplotlib import pyplot as plt\nimport pylab\nimport matplotlib.patches as mpatches\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nfrom sklearn.linear_model import LinearRegression\n\nAtlantic = pd.read_csv('C:\\\\Atlantic_Free2.csv', error_bad_lines=False)\n\nAtlantic = Atlantic[~np.isnan(Atlantic)]\n\nPoseidon = Atlantic['Poseidon']\nJason1 = Atlantic['Jason1']\nJason2 = Atlantic['Jason2']\nJason3 = Atlantic['Jason3']\n\n\nplt.figure(figsize=(20,10))\n\ncolors = [\"blue\", \"red\", \"green\", \"purple\"]\ntexts = [\"Poseidon\", \"Jason1\", \"Jason2\", \"Jason3\"]\npatches = [ plt.plot([],[], marker=\"o\", ms=10, ls=\"\", mec=None, color=colors[i], \n            label=\"{:s}\".format(texts[i]) )[0]  for i in range(len(texts)) ]\nplt.legend(handles=patches, loc='upper left', ncol=1, facecolor=\"grey\", numpoints=1 )\n\n\nplt.plot(Atlantic, Poseidon , 'ro', color='blue')\n\nplt.plot(Atlantic, Jason1 , 'ro', color='red')\n\nplt.plot(Atlantic, Jason2 , 'ro', color='green')\n\nplt.plot(Atlantic, Jason3 , 'ro', color='purple')\n\n\n\n\nplt.ylabel('Change in mean sea level [mm]', fontsize=20)\nplt.xlabel('Years', fontsize=20)\nplt.title('Atlantic Ocean - Mean Sea Level', fontsize=20)\n\nplt.axis([1992, 2018, -25, 80])\n\nplt.grid(True)\nplt.plot()\nplt.show()\n</code></pre>\n\n<p>Output of the code above, added to below.</p>\n\n<p><img src=\"https://i.stack.imgur.com/NGI7a.png\" alt=\"enter image description here\"></p>\n"}, {"tags": ["python", "django", "django-templates", "django-views"], "comments": [{"owner": {"reputation": 5226, "user_id": 7473847, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/iZysq.png?s=128&g=1", "display_name": "Essex", "link": "https://stackoverflow.com/users/7473847/essex"}, "edited": false, "score": 0, "creation_date": 1508366847, "post_id": 46820315, "comment_id": 80588216, "body": "As I saw up to now, <code>slice</code> is the best method in order to limit list elements."}, {"owner": {"reputation": 168, "user_id": 1802534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/043a64c35a5977224a5304cfaa241b88?s=128&d=identicon&r=PG&f=1", "display_name": "Serg Anuke", "link": "https://stackoverflow.com/users/1802534/serg-anuke"}, "edited": false, "score": 0, "creation_date": 1508366864, "post_id": 46820315, "comment_id": 80588225, "body": "The same. Use Django Debug Toolbar, Luke!"}, {"owner": {"reputation": 2151, "user_id": 7638069, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/ZZKFz.png?s=128&g=1", "display_name": "hansTheFranz", "link": "https://stackoverflow.com/users/7638069/hansthefranz"}, "edited": false, "score": 4, "creation_date": 1508368853, "post_id": 46820315, "comment_id": 80588758, "body": "Limit the qs in the view. The SQL statement will be executed in both cases but the limited SQL statement is faster and not so heavy. Cutting the qs in the template will have the same output but the way to get there takes longer since you load all the data even when you just need the first three elements. If you want to do more optimization I suggest to look up <code>prefetch_related()</code> and <code>values_list()</code>. And please rename the running variable in your <code>for loop</code>. it shouldn&#39;t be the same."}], "answers": [{"tags": [], "owner": {"reputation": 3193, "user_id": 8196244, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uTuJY.jpg?s=128&g=1", "display_name": "Mauricio Cortazar", "link": "https://stackoverflow.com/users/8196244/mauricio-cortazar"}, "is_accepted": true, "score": 4, "last_activity_date": 1508369542, "creation_date": 1508369542, "answer_id": 46820759, "question_id": 46820315, "link": "https://stackoverflow.com/questions/46820315/limit-django-for-loop-in-the-template-or-the-view-for-better-performance/46820759#46820759", "title": "Limit django for loop in the template or the view for better performance?", "body": "<p>as @hansTheFranz said Django querysets are lazy. That means a query will hit the database only when you ask for it.</p>\n\n<p>So until your template ask for the result, it wont execute the query. So, yes you can use:</p>\n\n<pre><code>blog_latest_entries = BlogDetails.objects.filter(blog_date_published__lte=date_now).order_by('-blog_date_published')\n{% for new in news|slice:\":10\" %}\n</code></pre>\n\n<p>is the same than use <code>SELECT * FROM Customers LIMIT 3;</code> </p>\n"}], "owner": {"reputation": 1176, "user_id": 3354539, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/216d91e4017b2e296f3a1b5f76d57b10?s=128&d=identicon&r=PG&f=1", "display_name": "user3354539", "link": "https://stackoverflow.com/users/3354539/user3354539"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1290, "favorite_count": 2, "accepted_answer_id": 46820759, "answer_count": 1, "score": 1, "last_activity_date": 1508369542, "creation_date": 1508366339, "question_id": 46820315, "link": "https://stackoverflow.com/questions/46820315/limit-django-for-loop-in-the-template-or-the-view-for-better-performance", "title": "Limit django for loop in the template or the view for better performance?", "body": "<p>I have a for loop on my template. I only want to display the first 3 items in the loop for a blog.</p>\n\n<p>At present there are only 20 blog entries, but if the blog entries are say 500 or more, from a performance perspective, is it better to limit the loop in the views.py code or in the template code?</p>\n\n<p>Here is the loop limit in the views.py file:</p>\n\n<pre><code>blog_latest_entries = BlogDetails.objects.filter(blog_date_published__lte=date_now).order_by('-blog_date_published')[:3]\n.....\nreturn render(request, 'page.html', {\n    'blog': blog_details_latest_entries,\n</code></pre>\n\n<p>Here is the limit in the template code:</p>\n\n<pre><code>{% for blog in blog|slice:\"3\" %}\n</code></pre>\n\n<p>Which option is best for performance. I suspect the views.py approach, but I would like my suspicion backed up by someone with real knowledge.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["python", "for-loop", "substring"], "comments": [{"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1508366481, "post_id": 46820292, "comment_id": 80588114, "body": "Do you understand what <code>read</code> does/returns?"}, {"owner": {"reputation": 21, "user_id": 8798319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90630df4c920842fb5c5b713e22698bd?s=128&d=identicon&r=PG&f=1", "display_name": "Willow", "link": "https://stackoverflow.com/users/8798319/willow"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1508366860, "post_id": 46820292, "comment_id": 80588224, "body": "I guess not prior to adding that I wasn&#39;t able to get any of the contents of my text files to print if I called them within my function. Does it not return the contents of the variable?"}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1508367099, "post_id": 46820292, "comment_id": 80588296, "body": "Can you show that too ?"}, {"owner": {"reputation": 856, "user_id": 8786820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c686012938b3042116cbb6b2a96ae9c4?s=128&d=identicon&r=PG&f=1", "display_name": "MaximTitarenko", "link": "https://stackoverflow.com/users/8786820/maximtitarenko"}, "edited": false, "score": 0, "creation_date": 1508367169, "post_id": 46820292, "comment_id": 80588312, "body": "How actually do you store numbers in index-files?"}, {"owner": {"reputation": 21, "user_id": 8798319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90630df4c920842fb5c5b713e22698bd?s=128&d=identicon&r=PG&f=1", "display_name": "Willow", "link": "https://stackoverflow.com/users/8798319/willow"}, "edited": false, "score": 0, "creation_date": 1508367220, "post_id": 46820292, "comment_id": 80588326, "body": "Just as a list of numbers, I will add examples to the question above"}, {"owner": {"reputation": 856, "user_id": 8786820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c686012938b3042116cbb6b2a96ae9c4?s=128&d=identicon&r=PG&f=1", "display_name": "MaximTitarenko", "link": "https://stackoverflow.com/users/8786820/maximtitarenko"}, "edited": false, "score": 0, "creation_date": 1508367334, "post_id": 46820292, "comment_id": 80588363, "body": "@Willow, can you give an actual examle of the content?"}, {"owner": {"reputation": 21, "user_id": 8798319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90630df4c920842fb5c5b713e22698bd?s=128&d=identicon&r=PG&f=1", "display_name": "Willow", "link": "https://stackoverflow.com/users/8798319/willow"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1508367569, "post_id": 46820292, "comment_id": 80588436, "body": "@Mad Physicist, Which part do you want me to show?"}, {"owner": {"reputation": 856, "user_id": 8786820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c686012938b3042116cbb6b2a96ae9c4?s=128&d=identicon&r=PG&f=1", "display_name": "MaximTitarenko", "link": "https://stackoverflow.com/users/8786820/maximtitarenko"}, "edited": false, "score": 0, "creation_date": 1508367719, "post_id": 46820292, "comment_id": 80588467, "body": "Ok, I see. To get numbers (int) you can try this: 1. <code>nums = [int(str_num) for str_num in indices.split()] </code> or: 2. <code>indices=index.readlines()</code> =&gt; <code>nums = [int(str_num.strip()) for str_num in indices] </code>. And then in your loop instead of: <code>for i in indices</code> use: <code>for i in nums</code>"}, {"owner": {"reputation": 21, "user_id": 8798319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90630df4c920842fb5c5b713e22698bd?s=128&d=identicon&r=PG&f=1", "display_name": "Willow", "link": "https://stackoverflow.com/users/8798319/willow"}, "edited": false, "score": 0, "creation_date": 1508368090, "post_id": 46820292, "comment_id": 80588556, "body": "Awesome! Thanks that worked. So the problem was it was being treated like a long string? And that split the txt file at the spaces between the numbers?"}, {"owner": {"reputation": 856, "user_id": 8786820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c686012938b3042116cbb6b2a96ae9c4?s=128&d=identicon&r=PG&f=1", "display_name": "MaximTitarenko", "link": "https://stackoverflow.com/users/8786820/maximtitarenko"}, "edited": false, "score": 0, "creation_date": 1508368801, "post_id": 46820292, "comment_id": 80588751, "body": "@Willow, cool! :) The main problem was you tried to convert string to int by its elements (~chars) and it crashed when faced the newline symbol: <code>&#39;\\n&#39;</code>. Also your substring from a single line  &#39;1234&#39; (for example) was treated like &#39;1&#39;, &#39;2&#39;, &#39;3&#39;, &#39;4&#39;, which, I guess, is not what you want. So, with <code>split()</code> or <code>readlines() + strip()</code> we can get rid of <code>&#39;\\n&#39;</code> and separate file&#39;s lines with a list"}, {"owner": {"reputation": 2261, "user_id": 8544123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f32b871be77d8c71efc294359b300367?s=128&d=identicon&r=PG&f=1", "display_name": "Acccumulation", "link": "https://stackoverflow.com/users/8544123/acccumulation"}, "edited": false, "score": 1, "creation_date": 1508369061, "post_id": 46820292, "comment_id": 80588813, "body": "It&#39;s generally a good idea to have files open as little as possible, and to use the <code>with</code> syntax. You can pass the names of the files to the function, open them in the function, read them, and then immediately close them."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1508379476, "post_id": 46820292, "comment_id": 80591213, "body": "As a general rule, when you provide errors, include the full stack trace. Your case is pretty simple so we can do without, but most of the time we would at least need the clear indication of the error that the stack trace provides."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1508379820, "post_id": 46820292, "comment_id": 80591321, "body": "BTW, good job on being responsive and providing all the relevant information (eventually). +1 for that and showing real effort."}], "answers": [{"comments": [{"owner": {"reputation": 2171, "user_id": 1666143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccf9b10bcf3d5759cedc2a482a6cbd05?s=128&d=identicon&r=PG", "display_name": "anupsabraham", "link": "https://stackoverflow.com/users/1666143/anupsabraham"}, "edited": false, "score": 0, "creation_date": 1508367221, "post_id": 46820381, "comment_id": 80588327, "body": "You&#39;re looking at the wrong place. unsupported operand type is happening for the variable <code>i</code> which depends on the content of his file."}, {"owner": {"reputation": 809, "user_id": 2923755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-eUSbCnXkgow/AAAAAAAAAAI/AAAAAAAAArk/QX5YTDngfcA/photo.jpg?sz=128", "display_name": "niCk cAMel", "link": "https://stackoverflow.com/users/2923755/nick-camel"}, "reply_to_user": {"reputation": 2171, "user_id": 1666143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccf9b10bcf3d5759cedc2a482a6cbd05?s=128&d=identicon&r=PG", "display_name": "anupsabraham", "link": "https://stackoverflow.com/users/1666143/anupsabraham"}, "edited": false, "score": 0, "creation_date": 1508368199, "post_id": 46820381, "comment_id": 80588587, "body": "@anupsabraham riiight ok. Edited"}, {"owner": {"reputation": 809, "user_id": 2923755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-eUSbCnXkgow/AAAAAAAAAAI/AAAAAAAAArk/QX5YTDngfcA/photo.jpg?sz=128", "display_name": "niCk cAMel", "link": "https://stackoverflow.com/users/2923755/nick-camel"}, "reply_to_user": {"reputation": 2171, "user_id": 1666143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccf9b10bcf3d5759cedc2a482a6cbd05?s=128&d=identicon&r=PG", "display_name": "anupsabraham", "link": "https://stackoverflow.com/users/1666143/anupsabraham"}, "edited": false, "score": 0, "creation_date": 1508368253, "post_id": 46820381, "comment_id": 80588598, "body": "@anupsabraham that&#39;s what happens when you answer too quickly from the loo"}], "tags": [], "owner": {"reputation": 809, "user_id": 2923755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-eUSbCnXkgow/AAAAAAAAAAI/AAAAAAAAArk/QX5YTDngfcA/photo.jpg?sz=128", "display_name": "niCk cAMel", "link": "https://stackoverflow.com/users/2923755/nick-camel"}, "is_accepted": false, "score": -3, "last_activity_date": 1508368162, "last_edit_date": 1508368162, "creation_date": 1508366812, "answer_id": 46820381, "question_id": 46820292, "link": "https://stackoverflow.com/questions/46820292/python-subsetting-sequence-using-list-of-numbers/46820381#46820381", "title": "Python subsetting sequence using list of numbers", "body": "<p>Try inputting <code>'shaker'</code> with double quotes, <code>\"shaker\"</code>. Or, use str(gene) in your function.</p>\n\n<p>OK, I just realized it's python so quotes thing shouldn't matter, I think</p>\n\n<p>Or <code>open(\"{}_insertion_seq.txt\".format(gene), 'w')</code></p>\n\n<p>If it's at the write, change <code>output.write(site + '\\n')</code>\nto <code>output.write(str(site) + '\\n')</code></p>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 8798319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90630df4c920842fb5c5b713e22698bd?s=128&d=identicon&r=PG&f=1", "display_name": "Willow", "link": "https://stackoverflow.com/users/8798319/willow"}, "edited": false, "score": 0, "creation_date": 1508390244, "post_id": 46822262, "comment_id": 80593757, "body": "thanks for your detailed response! I will go through the python tutorials and improve my code. Again, really appreciate it."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "reply_to_user": {"reputation": 21, "user_id": 8798319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90630df4c920842fb5c5b713e22698bd?s=128&d=identicon&r=PG&f=1", "display_name": "Willow", "link": "https://stackoverflow.com/users/8798319/willow"}, "edited": false, "score": 0, "creation_date": 1508429055, "post_id": 46822262, "comment_id": 80615985, "body": "@Willow. If this answer helps you, I would recommend selecting it. It will mark your question as answered and give you a couple of rep points (and me too :)."}, {"owner": {"reputation": 21, "user_id": 8798319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90630df4c920842fb5c5b713e22698bd?s=128&d=identicon&r=PG&f=1", "display_name": "Willow", "link": "https://stackoverflow.com/users/8798319/willow"}, "edited": false, "score": 0, "creation_date": 1508517293, "post_id": 46822262, "comment_id": 80654372, "body": "Great! Sorry, I am to all this (obviously ;) )"}], "tags": [], "owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "is_accepted": true, "score": 0, "last_activity_date": 1508389961, "last_edit_date": 1508389961, "creation_date": 1508382375, "answer_id": 46822262, "question_id": 46820292, "link": "https://stackoverflow.com/questions/46820292/python-subsetting-sequence-using-list-of-numbers/46822262#46822262", "title": "Python subsetting sequence using list of numbers", "body": "<p>The errors in your code are caused by the fact that <a href=\"https://docs.python.org/3/library/io.html#io.TextIOBase.read\" rel=\"nofollow noreferrer\"><code>read</code></a> does not do quite what you seem to expect. <a href=\"https://docs.python.org/3/tutorial/inputoutput.html#methods-of-file-objects\" rel=\"nofollow noreferrer\">Called without parameters</a>, it reads the entire file into a string. You then iterate over the characters in the string instead of the numbers in the file. The <a href=\"https://docs.python.org/3/library/exceptions.html#TypeError\" rel=\"nofollow noreferrer\"><code>TypeError</code></a> happens when you do <code>'1' - 9</code> in the index to the sequence.</p>\n\n<p>Your intuition to convert the iterated values to <a href=\"https://docs.python.org/3/library/functions.html#int\" rel=\"nofollow noreferrer\"><code>int</code></a> is basically correct. However, since you are still iterating over characters, you get <code>int('1')</code>, <code>int('3')</code>, <code>int('1')</code>, <code>int('2')</code>, followed by a <a href=\"https://docs.python.org/3/library/exceptions.html#ValueError\" rel=\"nofollow noreferrer\"><code>ValueError</code></a> from <code>int('\\n')</code>. <code>read</code> reads in the entire file as-is, newlines and all.</p>\n\n<p>Fortunately, the <a href=\"https://docs.python.org/3/glossary.html#term-file-object\" rel=\"nofollow noreferrer\">file object</a> is <a href=\"https://docs.python.org/3/glossary.html#term-iterable\" rel=\"nofollow noreferrer\">iterable</a> over the lines in the file. This means that you can do something like <code>for line in file: ...</code>, and <code>line</code> will take on the string value of each index you want to parse. It has the added bonus that line endings are stripped from the line, meaning that you could pass it directly into <code>int</code> with no further modification, for example.</p>\n\n<p>There are a number of additional improvements you can make to your code, including the corrections that would make it work properly.</p>\n\n<ol>\n<li><p>As per @Acccumulation's advice, open files in a <a href=\"https://docs.python.org/3/reference/compound_stmts.html#the-with-statement\" rel=\"nofollow noreferrer\"><code>with</code></a> block to ensure that they get cleaned up properly if the program crashes, e.g. from an I/O error. It will also close the file automatically when the block ends, which is something you are currently not doing at all (but should be)</p></li>\n<li><p>Conceptually, there is no need for you to pass around file objects at all. You only use each one in one place for one purpose. I would even extend this to recommend that you write a small function to parse each file type into a usable format and pass that around instead.</p></li>\n<li><p>Files are iterable by line in Python. This is especially handy for your index files, which are a very line-oriented format. You do not need to do a full <code>read</code> at all, and can save a couple of steps from @MaximTitarenko's comment.</p></li>\n<li><p>You can use <a href=\"https://docs.python.org/3/library/stdtypes.html#str.join\" rel=\"nofollow noreferrer\"><code>str.join</code></a> directly on a file to combine any sequences that have line breaks in them.</p></li>\n</ol>\n\n<p>Combining all that advice, you could do the following:</p>\n\n<pre><code>def read_indices(fname):\n    with open(fname, 'r') as file:\n        return [int(index) for index in file]\n\ndef read_sequence(fname):\n    with open(fname, 'r') as file:\n        return ''.join(file)\n</code></pre>\n\n<p>Since files are iterables of strings, you can use them in <a href=\"https://docs.python.org/3/tutorial/datastructures.html#list-comprehensions\" rel=\"nofollow noreferrer\">list comprehensions</a> and string join operations like that. The rest of your code will now look much cleaner:</p>\n\n<pre>\ndef gen_insertion_seq(index, seq, gene):\n    indices = read_indices(index)\n    sequence = read_sequence(seq)\n    with open(\"%s_insertion_seq.txt\" % gene, 'w') as output:\n        for i in indices:\n            site = sequence[i-9:i+15]\n            output.write(site + '\\n')\n\ngen_insertion_seq('212_index.txt', '212_seq.txt', 'shaker')\ngen_insertion_seq('214_index.txt', '214_seq.txt', 'kir2')\ngen_insertion_seq('216_index.txt', '216_seq.txt', 'asic1a')\ngen_insertion_seq('252_index.txt', '252_seq.txt', 'nachra7')\n</pre>\n\n<p>Your main function is now easier to understand because it focuses only on the sequences and not on things like I/O and parsing. You also don't have a bunch of open file handles floating around, waiting for an error. In fact, the file operations are all self contained, away from the real task.</p>\n\n<p>If you had sequences (<a href=\"https://docs.python.org/3/library/stdtypes.html#sequence-types-list-tuple-range\" rel=\"nofollow noreferrer\">in the Python sense</a>) of file IDs and gene names, you could further simplify the call to your function with a loop:</p>\n\n<pre><code>for id, gene in zip((212, 214, 216, 252), ('shaker', 'kir2', 'asic1a', 'nachra7')):\n    gen_insertion_seq('%d_index.txt' % id, '%d_seq.txt' % id, gene)\n</code></pre>\n\n<p>PS. The <a href=\"https://docs.python.org/3/tutorial/inputoutput.html#input-and-output\" rel=\"nofollow noreferrer\">I/O</a> section in the Python tutorial is really nice. The section on <a href=\"https://docs.python.org/3/tutorial/inputoutput.html#reading-and-writing-files\" rel=\"nofollow noreferrer\">files</a> may be of especial interest to you.</p>\n"}], "owner": {"reputation": 21, "user_id": 8798319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90630df4c920842fb5c5b713e22698bd?s=128&d=identicon&r=PG&f=1", "display_name": "Willow", "link": "https://stackoverflow.com/users/8798319/willow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 46822262, "answer_count": 2, "score": 1, "last_activity_date": 1508389961, "creation_date": 1508366245, "last_edit_date": 1508379963, "question_id": 46820292, "link": "https://stackoverflow.com/questions/46820292/python-subsetting-sequence-using-list-of-numbers", "title": "Python subsetting sequence using list of numbers", "body": "<p>I am trying to write a program that takes a file that has a list of numbers and use each of these numbers to subset a part of a string. When I try to call my function (below) I get the error:</p>\n\n<pre><code>TypeError: unsupported operand type(s) for -: 'str' and 'int'\n</code></pre>\n\n<p>I tried changing the <code>i</code> in the for loop to <code>int(i)</code> in case, for some reason, <code>i</code> wasn't an integer but that resulted in the following error:</p>\n\n<pre><code>ValueError: invalid literal for int() with base 10: ''\n</code></pre>\n\n<p>Code:</p>\n\n<pre><code>#Function Collects Sequences and Writes to a Files\ndef gen_insertion_seq(index, seq, gene):\n    output = open(\"%s_insertion_seq.txt\" % gene, 'w')\n    indices = index.read()\n    sequence = seq.read()\n    for i in indices:\n        site = sequence[i-9:i+15]\n        output.write(site + '\\n')\n\n#Open Index Files\nshaker_index = open(\"212_index.txt\")\nkir2_index = open(\"214_index.txt\")\nasic1a_index = open(\"216_index.txt\")\nnachra7_index = open(\"252_index.txt\")\n\n#Open Sequence Files\nshaker_seq = open(\"212_seq.txt\")\nkir2_seq = open(\"214_seq.txt\")\nasic1a_seq = open(\"216_seq.txt\")\nnachra7_seq = open(\"252_seq.txt\")\n#Call function on Index and Sequence Files - Should output list of generated Sequences for insertion sites.\n#Must hand check first couple\ngen_insertion_seq(shaker_index, shaker_seq, 'shaker')\n</code></pre>\n\n<p>Sample input files:</p>\n\n<p><strong>212_index.txt</strong></p>\n\n<pre><code>1312\n210\n633\n696\n1475\n637\n1198\n645\n1504\n361\n651\n...\n</code></pre>\n\n<p><strong>212_seq.txt</strong></p>\n\n<pre><code>ATGGCCGCCGTGGCACTGCGAGAACAACAGCTCCAACGAAATAGTCTGGATGGATACGGTTCACTGCCTAAACTGTCTAGCCAAGACGAAGAAGGTGGCGCCGGCCATGGCTTCGGTGGGGGC\n</code></pre>\n"}, {"tags": ["python", "numpy", "scipy"], "comments": [{"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 2, "creation_date": 1508366279, "post_id": 46820288, "comment_id": 80588058, "body": "Add sample cases?"}, {"owner": {"reputation": 3152, "user_id": 1377706, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/bhJMC.png?s=128&g=1", "display_name": "Pharap", "link": "https://stackoverflow.com/users/1377706/pharap"}, "edited": false, "score": 0, "creation_date": 1508367150, "post_id": 46820288, "comment_id": 80588308, "body": "Is an <code>n</code> dimensional matrix not simply a <code>1 x n</code> matrix in disguise?"}, {"owner": {"reputation": 1, "user_id": 8798351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b51e946c508c2ea762f76b23ef09bec8?s=128&d=identicon&r=PG&f=1", "display_name": "Anon", "link": "https://stackoverflow.com/users/8798351/anon"}, "edited": false, "score": 0, "creation_date": 1508367358, "post_id": 46820288, "comment_id": 80588372, "body": "Do you mean flatten my existing array to a <code>1 X n</code> matrix ? How would the pairwise work in that case."}, {"owner": {"reputation": 3152, "user_id": 1377706, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/bhJMC.png?s=128&g=1", "display_name": "Pharap", "link": "https://stackoverflow.com/users/1377706/pharap"}, "edited": false, "score": 0, "creation_date": 1508367433, "post_id": 46820288, "comment_id": 80588397, "body": "When you said &quot;I have a <code>n</code> dimensional matrix&quot; I assumed you meant it was <code>1 x n</code>. If it isn&#39;t, what&#39;s the <code>m</code>?"}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 1, "creation_date": 1508367823, "post_id": 46820288, "comment_id": 80588493, "body": "That looks like 2D and should be solvable by pdist/cdist. Could you show how pdist didn&#39;t work for you?"}, {"owner": {"reputation": 1, "user_id": 8798351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b51e946c508c2ea762f76b23ef09bec8?s=128&d=identicon&r=PG&f=1", "display_name": "Anon", "link": "https://stackoverflow.com/users/8798351/anon"}, "reply_to_user": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1508368154, "post_id": 46820288, "comment_id": 80588574, "body": "Hi @Divakar, Apologies as I was editing the question. I would like to extend the concept to a 3d matrix. Calculating <code>scipy.spatial.distance.pdist</code> on the last array yields as <code>ValueError</code> mentioning that a 2D array is required."}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1508368303, "post_id": 46820288, "comment_id": 80588618, "body": "Not exactly clear from the sample. Add a working loopy solution or pseudo one maybe?"}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1508368511, "post_id": 46820288, "comment_id": 80588669, "body": "Or can you simply reshape the array to 2D : <code>a.reshape(-1,a.shape[-1])</code>, use <code>pdist</code>, get the distance output and reshape back to <code>3D</code> or <code>2D</code> with <code>squareform</code>?"}], "owner": {"reputation": 1, "user_id": 8798351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b51e946c508c2ea762f76b23ef09bec8?s=128&d=identicon&r=PG&f=1", "display_name": "Anon", "link": "https://stackoverflow.com/users/8798351/anon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 357, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1508368074, "creation_date": 1508366224, "last_edit_date": 1508368074, "question_id": 46820288, "link": "https://stackoverflow.com/questions/46820288/pairwise-distances-of-all-rows-in-n-dimensional-matrix", "title": "Pairwise distances of all rows in n dimensional matrix", "body": "<p>I have a <code>n</code> dimensional matrix <code>A</code> i.e <code>nXn...Xn</code> matrix and I would like to calculate the sum of all pairwise distances of the rows in the matrix. The distance can be euclidean or any other defined distances.</p>\n\n<p>I tried the example given in <code>scipy</code> using <code>scipy.spatial.distance.pdist</code>, however it does not work on n dimensional matrices (requiring a <code>mXn</code> matrix as stated in the documentation).</p>\n\n<p>For a 2d matrix, </p>\n\n<pre><code>A = [ a b c , \n      d e f ,\n      g h i ]\n</code></pre>\n\n<p>the euclidean distance between all possible pair of observations is defined as</p>\n\n<pre><code>Sum = sqrt( (a-d)^2 + (b-e)^2 + (c-f)^2 ) ) +  sqrt( (a-g)^2 + (b-h)^2 + (c-i)^2 ) ) + sqrt( (g-d)^2 + (h-e)^2 + (i-f)^2 ) ) \n</code></pre>\n\n<p>I would like to extend the above concept of distance of a 2d matrix (taking every pairwise row and calculating distance between them).</p>\n\n<pre><code>array([[[ 0.,  0.,  0.],\n    [ 0.,  0.,  0.],\n    [ 0.,  0.,  0.]],\n\n   [[ 0.,  0.,  0.],\n    [ 0.,  0.,  0.],\n    [ 0.,  0.,  0.]],\n\n   [[ 0.,  0.,  0.],\n    [ 0.,  0.,  0.],\n    [ 0.,  0.,  0.]]])\n</code></pre>\n\n<p>What would be the quickest way to calculate the same using vectorization ?</p>\n"}, {"tags": ["python", "pointers", "opengl", "pyopengl"], "answers": [{"comments": [{"owner": {"reputation": 115, "user_id": 8749979, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/281327525676408/picture?type=large", "display_name": "Ricardo Magallanes", "link": "https://stackoverflow.com/users/8749979/ricardo-magallanes"}, "edited": false, "score": 0, "creation_date": 1508384256, "post_id": 46821740, "comment_id": 80592369, "body": "Thank you very much, that last information you added did the work. I still don&#39;t have very clear what is it doing. But I&#39;ll find out. Thank you."}, {"owner": {"reputation": 18987, "user_id": 2470818, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c3e0df5ee75b18ce0c8aeadf4433e151?s=128&d=identicon&r=PG&f=1", "display_name": "vallentin", "link": "https://stackoverflow.com/users/2470818/vallentin"}, "reply_to_user": {"reputation": 115, "user_id": 8749979, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/281327525676408/picture?type=large", "display_name": "Ricardo Magallanes", "link": "https://stackoverflow.com/users/8749979/ricardo-magallanes"}, "edited": false, "score": 0, "creation_date": 1508384916, "post_id": 46821740, "comment_id": 80592515, "body": "You&#39;re welcome! <code>vertices.ctypes.data</code> returns the address of the array. So the first 4 bytes (size of a float) at the address, will be the first element in <code>vertices</code> and so on (every 4 bytes). Thus if we take the <code>address + 4 * 3</code>, then that will be the address of the first color element. You already tell the stride (24 bytes), that&#39;s why it only needs to know the starting address. The stride is 24 bytes because you have 6 floats (X, Y, Z, R, G, B). <code>6 floats * 4 float_size = 24 bytes</code>."}], "tags": [], "owner": {"reputation": 18987, "user_id": 2470818, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c3e0df5ee75b18ce0c8aeadf4433e151?s=128&d=identicon&r=PG&f=1", "display_name": "vallentin", "link": "https://stackoverflow.com/users/2470818/vallentin"}, "is_accepted": true, "score": 1, "last_activity_date": 1508379194, "last_edit_date": 1508379194, "creation_date": 1508377946, "answer_id": 46821740, "question_id": 46820254, "link": "https://stackoverflow.com/questions/46820254/how-to-extract-data-for-glvertexpointer-and-glcolorpointer-from-a-single-arr/46821740#46821740", "title": "How to extract data for glVertexPointer() and glColorPointer() from a single array in PyOpenGL?", "body": "<p>This depends on whether you have a vertex buffer bound or not. The last parameter <code>pointer</code> in <code>gl*Pointer()</code> is either.</p>\n\n<ul>\n<li><em>No Vertex Buffer Bound:</em> It's the address to the vertices</li>\n<li><em>Vertex Buffer Bound:</em> It's a relative offset in relation to the address of the buffer</li>\n</ul>\n\n<p>You can utilize <code>ctypes</code> for this.</p>\n\n<pre><code>import ctypes\n\nbuffer_offset = ctypes.c_void_p\nfloat_size = ctypes.sizeof(ctypes.c_float)\n</code></pre>\n\n<p>Assuming you have a vertex buffer bound, then you'd simply do:</p>\n\n<pre><code>glVertexPointer(3, GL_FLOAT, 12, buffer_offset(0))\nglColorPointer(3, GLFLOAT, 12, buffer_offset(float_size * 3))\n</code></pre>\n\n<p>If you are just using that array and nothing else, then I would assume you could just get the address and equally offset it.</p>\n\n<pre><code>glVertexPointer(3, GL_FLOAT, 12, buffer_offset(vertices.ctypes.data))\nglColorPointer(3, GLFLOAT, 12, buffer_offset(vertices.ctypes.data + float_size * 3))\n</code></pre>\n\n<p><em>But I have to admit, I've never had the need for this in Python, so I can't confirm it.</em></p>\n"}], "owner": {"reputation": 115, "user_id": 8749979, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/281327525676408/picture?type=large", "display_name": "Ricardo Magallanes", "link": "https://stackoverflow.com/users/8749979/ricardo-magallanes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 355, "favorite_count": 1, "accepted_answer_id": 46821740, "answer_count": 1, "score": 1, "last_activity_date": 1513594661, "creation_date": 1508365975, "last_edit_date": 1513594661, "question_id": 46820254, "link": "https://stackoverflow.com/questions/46820254/how-to-extract-data-for-glvertexpointer-and-glcolorpointer-from-a-single-arr", "title": "How to extract data for glVertexPointer() and glColorPointer() from a single array in PyOpenGL?", "body": "<p>I'm starting to learn PyOpenGL, and I'm following <a href=\"https://www.youtube.com/watch?v=U5BV4a57Tv0\" rel=\"nofollow noreferrer\">this</a> tutorial. At one point the instructor creates a single array from which he extracts the information to construct a triangle: vetices and their color (I added the Numpy line here):</p>\n\n<pre><code>#-----------|-Vertices pos--|---Colors----|-----------\nvertices = [-0.5, -0.5, 0.0, 1.0, 0.0, 0.0,\n             0.5, -0.5, 0.0, 0.0, 1.0, 0.0,\n             0.0,  0.5, 0.0, 0.0, 0.0, 1.0]\n\nvertices = np.array(vertices, dtype = np.float32)\n</code></pre>\n\n<p>The information of this array is passed to <a href=\"http://pyopengl.sourceforge.net/documentation/manual-3.0/glColorPointer.html\" rel=\"nofollow noreferrer\">glVertexPointer() and glColorPointer()</a> in the display function:</p>\n\n<pre><code>def display():\n\n    glClear(GL_COLOR_BUFFER_BIT)      \n    glEnableClientState(GL_VERTEX_ARRAY)\n    glEnableClientState(GL_COLOR_ARRAY)\n\n    glVertexPointer(3, GL_FLOAT, 12, vertices)\n    glColorPointer(3, GLFLOAT, 12, vertices + 3)\n\n    glDrawArrays(GL_TRIANGLES, 0, 3)\n\n    glDisableClientState(GL_VERTEX_ARRAY)\n    glDisableClientState(GL_COLOR_ARRAY)\n    glutSwapBuffers()\n</code></pre>\n\n<p>My problem is with the last argument of those functions, in the tutorial (since he is using C++), he can write <code>vertices + 3</code> in order to tell the program to start reading from the third position of the array, I cannot do this in python.\nCan some one guide me on how can I define this pointer? Or how can extract the information from my array.</p>\n\n<p>Note: I'm aware that I can split the information of vertices and colors in differnt arrays, but I want to know if it is possible to do it using one array.</p>\n\n<p><strong>EDIT</strong> - Adding the complete code:</p>\n\n<pre><code>from OpenGL.GL import *\nfrom OpenGL.GLUT import *\nimport numpy as np\nimport ctypes\n\n#-----------|-Vertices pos--|---Colors----|-----------\nvertices = [-0.5, -0.5, 0.0, 1.0, 0.0, 0.0,\n             0.5, -0.5, 0.0, 0.0, 1.0, 0.0,\n             0.0,  0.5, 0.0, 0.0, 0.0, 1.0]\nvertices = np.array(vertices, dtype = np.float32)\n\nbuffer_offset = ctypes.c_void_p\nfloat_size = ctypes.sizeof(ctypes.c_float)\n\n#-----------------------------------------------------\n\ndef display():\n\n    glClear(GL_COLOR_BUFFER_BIT)      \n    glEnableClientState(GL_VERTEX_ARRAY)\n    glEnableClientState(GL_COLOR_ARRAY)\n\n    glVertexPointer(3, GL_FLOAT, 24, buffer_offset(vertices.ctypes.data))\n    glColorPointer(3, GL_FLOAT, 24, buffer_offset(vertices.ctypes.data + float_size * 3))\n\n    glDrawArrays(GL_TRIANGLES, 0, 3)\n\n    glDisableClientState(GL_VERTEX_ARRAY)\n    glDisableClientState(GL_COLOR_ARRAY)\n    glutSwapBuffers()\n\ndef reshape(w,h):\n    glViewport(0,0,w,h)\n\ndef initOpenGL():\n    glClearColor(0,0,0,1)\n\n#-----------------------------------------------------\n\nglutInit()\nglutInitDisplayMode(GLUT_DOUBLE | GLUT_RGBA | GLUT_DEPTH)\nglutInitWindowSize(500,500)\nglutCreateWindow(b'Test')\n\nglutDisplayFunc(display)\nglutIdleFunc(display)\nglutReshapeFunc(reshape)\n\ninitOpenGL()\nglutMainLoop()\n</code></pre>\n"}, {"tags": ["python", "dask"], "answers": [{"comments": [{"owner": {"reputation": 7511, "user_id": 2530674, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/75d910050ccc1bc26073167739158abf?s=128&d=identicon&r=PG", "display_name": "sachinruk", "link": "https://stackoverflow.com/users/2530674/sachinruk"}, "edited": false, "score": 0, "creation_date": 1508383791, "post_id": 46821613, "comment_id": 80592245, "body": "But the latter method will guarantee that I will run through the entire dataset right? I should also mention that I had done this earlier: <code>df = dd.from_pandas(df, 16)</code>. Will it cause a clash or just do another partition?"}, {"owner": {"reputation": 47893, "user_id": 616616, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/8749ec52cee260c4c1f67f2dec29d957?s=128&d=identicon&r=PG", "display_name": "MRocklin", "link": "https://stackoverflow.com/users/616616/mrocklin"}, "reply_to_user": {"reputation": 7511, "user_id": 2530674, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/75d910050ccc1bc26073167739158abf?s=128&d=identicon&r=PG", "display_name": "sachinruk", "link": "https://stackoverflow.com/users/2530674/sachinruk"}, "edited": false, "score": 1, "creation_date": 1508413633, "post_id": 46821613, "comment_id": 80605580, "body": "Yes, this will include the entire dataset.  You can repartition safely.  Or you can call from_pandas with a different number of partitions.  Everything should work fine here either way."}], "tags": [], "owner": {"reputation": 47893, "user_id": 616616, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/8749ec52cee260c4c1f67f2dec29d957?s=128&d=identicon&r=PG", "display_name": "MRocklin", "link": "https://stackoverflow.com/users/616616/mrocklin"}, "is_accepted": true, "score": 2, "last_activity_date": 1508376871, "creation_date": 1508376871, "answer_id": 46821613, "question_id": 46820223, "link": "https://stackoverflow.com/questions/46820223/subsetting-dask-dataframes/46821613#46821613", "title": "Subsetting Dask DataFrames", "body": "<p>If your dataset has well known divisions then this might work, but instead I recommend just computing one partition at a time.</p>\n\n<pre><code>for part in df.to_delayed():\n    subset = part.compute()\n</code></pre>\n\n<p>You can roughly control the size by repartitioning beforehand</p>\n\n<pre><code>for part in df.repartition(npartitions=100).to_delayed():\n    subset = part.compute()\n</code></pre>\n\n<p>This isn't exactly the same, because it doesn't guarantee a fixed number of rows in each partition, but that guarantee might be quite expensive, depending on how the data is obtained.</p>\n"}], "owner": {"reputation": 7511, "user_id": 2530674, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/75d910050ccc1bc26073167739158abf?s=128&d=identicon&r=PG", "display_name": "sachinruk", "link": "https://stackoverflow.com/users/2530674/sachinruk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 823, "favorite_count": 0, "accepted_answer_id": 46821613, "answer_count": 1, "score": 2, "last_activity_date": 1508376871, "creation_date": 1508365827, "question_id": 46820223, "link": "https://stackoverflow.com/questions/46820223/subsetting-dask-dataframes", "title": "Subsetting Dask DataFrames", "body": "<p>Is this a valid way of loading subsets of a dask dataframe to memory:</p>\n\n<pre><code>while i &lt; len_df:\n    j = i + batch_size \n    if j &gt; len_df: \n        j = len_df\n    subset = df.loc[i:j,'source_country_codes'].compute()\n</code></pre>\n\n<p>I read somewhere that this may not be correct because of how dask assigns index numbers because of it dividing the bigger dataframe into smaller pandas dfs. Also I don't think dask dataframes has an <code>iloc</code> attribute.\nI am using version 0.15.2</p>\n\n<p>In terms of use cases, this would be a way of loading batches of data to deep learning (say keras).</p>\n"}, {"tags": ["python", "graphics"], "comments": [{"owner": {"reputation": 668, "user_id": 600633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3aa9a39bcccb51aa79492ed3c05140f9?s=128&d=identicon&r=PG", "display_name": "Rickard", "link": "https://stackoverflow.com/users/600633/rickard"}, "edited": false, "score": 0, "creation_date": 1508366350, "post_id": 46820189, "comment_id": 80588080, "body": "Is the graphic package installed? run pip install graphics in the shell"}, {"owner": {"reputation": 1, "user_id": 8792498, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156024511358159/picture?type=large", "display_name": "Woop", "link": "https://stackoverflow.com/users/8792498/woop"}, "reply_to_user": {"reputation": 668, "user_id": 600633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3aa9a39bcccb51aa79492ed3c05140f9?s=128&d=identicon&r=PG", "display_name": "Rickard", "link": "https://stackoverflow.com/users/600633/rickard"}, "edited": false, "score": 0, "creation_date": 1508900579, "post_id": 46820189, "comment_id": 80793685, "body": "Wasnt not installed, oddly as it was, and I had a very interesting time finding the file. I got it working though thank you! &lt;0"}], "owner": {"reputation": 1, "user_id": 8792498, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156024511358159/picture?type=large", "display_name": "Woop", "link": "https://stackoverflow.com/users/8792498/woop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1255, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1508571859, "creation_date": 1508365620, "last_edit_date": 1508571859, "question_id": 46820189, "link": "https://stackoverflow.com/questions/46820189/modulenotfounderror-no-module-named-graphics", "title": "ModuleNotFoundError: No module named &#39;graphics&#39;", "body": "<p>When running this module on my home pc I got this error message. I made this in class today as it was what we were going over. trying to get some more practice on this stuff. Is my python missing a file or something? I am using shell 3.6.3 Thanks!</p>\n\n<p>error message displays on shell:    </p>\n\n<pre><code>from graphics import * \nModuleNotFoundError: No module named 'graphics'\n</code></pre>\n\n<p>module I made in class today:</p>\n\n<pre><code>from graphics import *\n\ndef main ():\n    window = GraphWin ('Mikes Circle Graph Window', 800,600)\n    #window.setBackground ('blue')\n    circle1 = Circle(Point(250,380), 50)\n    circle1.draw (window)\n    circle1.setFill ('yellow')\n\n    #p1 = Point (50,50) #step 3\n    #p2 = Point (500,500)\n    #p1.draw (window) #step 4\n    #p2.draw (window)\n\n\n    #line = Line (Point(50,50), Point(500,500))\n    #line.draw (window)\n    #line.setFill ('blue')\n\n    triangle = Polygon (Point(40,340), Point(260,80))\n    triangle.setFill ('saddle brown')\n    triangle.draw (window)\n    #input('Enter Something')\n    #triangle.move(point(500,50))\n\n    rectangle1 = Rectangle(Point(20,80), Point(560,80))\n    rectangle1.draw (window)\n    rectangle1.setFill ('blue')\n\nmain ()\n</code></pre>\n"}, {"tags": ["python", "random"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1508366335, "post_id": 46820182, "comment_id": 80588076, "body": "Method 3 is fastest because all the other methods have to do something like that internally."}], "answers": [{"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1508366454, "post_id": 46820312, "comment_id": 80588111, "body": "Why use <code>randint(0, 7) % 2</code> instead of just <code>randint(0, 1)</code>?"}, {"owner": {"reputation": 1767, "user_id": 5420432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/626fb32f10020d504b6090933d592433?s=128&d=identicon&r=PG", "display_name": "RobertB", "link": "https://stackoverflow.com/users/5420432/robertb"}, "edited": false, "score": 0, "creation_date": 1508368016, "post_id": 46820312, "comment_id": 80588538, "body": "My test shows this slower than all the OP&#39;s options."}], "tags": [], "owner": {"reputation": 508, "user_id": 7488315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c77f02af8cefbe630b492a7bdf3f6aa?s=128&d=identicon&r=PG&f=1", "display_name": "Chun-Yen Wang", "link": "https://stackoverflow.com/users/7488315/chun-yen-wang"}, "is_accepted": false, "score": -4, "last_activity_date": 1508366310, "creation_date": 1508366310, "answer_id": 46820312, "question_id": 46820182, "link": "https://stackoverflow.com/questions/46820182/randomly-generate-1-or-1-positive-or-negative-integer/46820312#46820312", "title": "Randomly generate 1 or -1 (positive or negative integer)", "body": "<p>My code is as</p>\n\n<pre><code>vals = array(\"i\", [-1, 1])\n\ndef my_rnd():\n    return vals[randint(0, 7) % 2]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 70452, "user_id": 1060350, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/XCkw7.jpg?s=128&g=1", "display_name": "Has QUIT--Anony-Mousse", "link": "https://stackoverflow.com/users/1060350/has-quit-anony-mousse"}, "edited": false, "score": 0, "creation_date": 1508369128, "post_id": 46820633, "comment_id": 80588830, "body": "At least the last one doesn&#39;t only return -1,+1."}, {"owner": {"reputation": 1031, "user_id": 6575359, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5bddbaafe8811a59bce3a65535b9c1c4?s=128&d=identicon&r=PG&f=1", "display_name": "Siemkowski", "link": "https://stackoverflow.com/users/6575359/siemkowski"}, "edited": false, "score": 0, "creation_date": 1508402114, "post_id": 46820633, "comment_id": 80598985, "body": "isn&#39;t the last one (7) equivalent to <code>random.choices([-1,1], k=100000)</code> in <code>random</code> module?"}, {"owner": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "reply_to_user": {"reputation": 1031, "user_id": 6575359, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5bddbaafe8811a59bce3a65535b9c1c4?s=128&d=identicon&r=PG&f=1", "display_name": "Siemkowski", "link": "https://stackoverflow.com/users/6575359/siemkowski"}, "edited": false, "score": 0, "creation_date": 1508411384, "post_id": 46820633, "comment_id": 80604248, "body": "@Siemkowski There was an edit, and the comment above referred to (8) i suppose."}, {"owner": {"reputation": 1031, "user_id": 6575359, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5bddbaafe8811a59bce3a65535b9c1c4?s=128&d=identicon&r=PG&f=1", "display_name": "Siemkowski", "link": "https://stackoverflow.com/users/6575359/siemkowski"}, "reply_to_user": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 0, "creation_date": 1508411640, "post_id": 46820633, "comment_id": 80604415, "body": "@sascha I know, I am referring to (7)"}, {"owner": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 0, "creation_date": 1508411702, "post_id": 46820633, "comment_id": 80604452, "body": "Yes it is. But python&#39;s random module is not numpy&#39;s random module."}], "tags": [], "owner": {"reputation": 14291, "user_id": 545424, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/6a4ac5213b7eeab93dc09b263effcfcf?s=128&d=identicon&r=PG", "display_name": "user545424", "link": "https://stackoverflow.com/users/545424/user545424"}, "is_accepted": false, "score": 1, "last_activity_date": 1508369174, "last_edit_date": 1508369174, "creation_date": 1508368799, "answer_id": 46820633, "question_id": 46820182, "link": "https://stackoverflow.com/questions/46820182/randomly-generate-1-or-1-positive-or-negative-integer/46820633#46820633", "title": "Randomly generate 1 or -1 (positive or negative integer)", "body": "<p>The fastest way to generate random numbers if you're going to be doing lots of them is by using numpy:</p>\n\n<pre><code>In [1]: import numpy as np\n\nIn [2]: import random\n\nIn [3]: %timeit [random.choice([-1,1]) for i in range(100000)]\n10 loops, best of 3: 88.9 ms per loop\n\nIn [4]: %timeit [(-1)**random.randrange(2) for i in range(100000)]\n10 loops, best of 3: 110 ms per loop\n\nIn [5]: %timeit [1 if random.random() &lt; 0.5 else -1 for i in range(100000)]\n100 loops, best of 3: 18.4 ms per loop\n\nIn [6]: %timeit [random.randint(0,1)*2-1 for i in range(100000)]\n1 loop, best of 3: 180 ms per loop\n\nIn [7]: %timeit np.random.choice([-1,1],size=100000)\n1000 loops, best of 3: 1.52 ms per loop\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 70452, "user_id": 1060350, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/XCkw7.jpg?s=128&g=1", "display_name": "Has QUIT--Anony-Mousse", "link": "https://stackoverflow.com/users/1060350/has-quit-anony-mousse"}, "is_accepted": true, "score": 11, "last_activity_date": 1508368810, "creation_date": 1508368810, "answer_id": 46820635, "question_id": 46820182, "link": "https://stackoverflow.com/questions/46820182/randomly-generate-1-or-1-positive-or-negative-integer/46820635#46820635", "title": "Randomly generate 1 or -1 (positive or negative integer)", "body": "<p>A one liner variation of #3:</p>\n\n<pre><code>return 1 if random.random() &lt; 0.5 else -1\n</code></pre>\n\n<p>It's fast(er) than the 'math' variants, because it doesn't involve additional arithmetic.</p>\n"}, {"comments": [{"owner": {"reputation": 1031, "user_id": 6575359, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5bddbaafe8811a59bce3a65535b9c1c4?s=128&d=identicon&r=PG&f=1", "display_name": "Siemkowski", "link": "https://stackoverflow.com/users/6575359/siemkowski"}, "edited": false, "score": 0, "creation_date": 1508505039, "post_id": 46821099, "comment_id": 80646856, "body": "I tested this - it is not faster. <code>timeit.timeit(stmt = &quot;my_number = 1 if random.random() &lt; 0.5 else -1&quot;, setup = &quot;import random&quot;)</code> <code>&gt;0.17129717730503558</code> and <code>timeit.timeit(&quot;my_number = [-1,1][random.randrange(1,2)]&quot;,setup= &quot;import random&quot;)</code> <code>&gt;2.5639535604734647</code>"}, {"owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "reply_to_user": {"reputation": 1031, "user_id": 6575359, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5bddbaafe8811a59bce3a65535b9c1c4?s=128&d=identicon&r=PG&f=1", "display_name": "Siemkowski", "link": "https://stackoverflow.com/users/6575359/siemkowski"}, "edited": false, "score": 0, "creation_date": 1508505674, "post_id": 46821099, "comment_id": 80647255, "body": "@Siemkowski Your range specification is different than mine, and there may be differences between various versions of Python."}, {"owner": {"reputation": 1031, "user_id": 6575359, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5bddbaafe8811a59bce3a65535b9c1c4?s=128&d=identicon&r=PG&f=1", "display_name": "Siemkowski", "link": "https://stackoverflow.com/users/6575359/siemkowski"}, "edited": false, "score": 0, "creation_date": 1508505820, "post_id": 46821099, "comment_id": 80647352, "body": "sorry, pasted wrong line, but it is still slower for me. I use <code>Python 3.6.1</code>. What version did you test it on?"}, {"owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "reply_to_user": {"reputation": 1031, "user_id": 6575359, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5bddbaafe8811a59bce3a65535b9c1c4?s=128&d=identicon&r=PG&f=1", "display_name": "Siemkowski", "link": "https://stackoverflow.com/users/6575359/siemkowski"}, "edited": false, "score": 0, "creation_date": 1508506323, "post_id": 46821099, "comment_id": 80647691, "body": "@Siemkowski Python 2.7.10 on MacOS."}, {"owner": {"reputation": 2856, "user_id": 1623728, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D5Gx1.jpg?s=128&g=1", "display_name": "Rikki", "link": "https://stackoverflow.com/users/1623728/rikki"}, "edited": false, "score": 0, "creation_date": 1618725103, "post_id": 46821099, "comment_id": 118685760, "body": "I like the simplicity of this code. Don&#39;t care about the difference in performance as much in my scenario - thanks! (:"}], "tags": [], "owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "is_accepted": false, "score": 6, "last_activity_date": 1508372024, "creation_date": 1508372024, "answer_id": 46821099, "question_id": 46820182, "link": "https://stackoverflow.com/questions/46820182/randomly-generate-1-or-1-positive-or-negative-integer/46821099#46821099", "title": "Randomly generate 1 or -1 (positive or negative integer)", "body": "<p>Here's another one-liner that my timings show to be faster than the if/else comparison to 0.5:</p>\n\n<pre><code>[-1,1][random.randrange(2)]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "is_accepted": false, "score": 1, "last_activity_date": 1508415990, "last_edit_date": 1508415990, "creation_date": 1508414563, "answer_id": 46829405, "question_id": 46820182, "link": "https://stackoverflow.com/questions/46820182/randomly-generate-1-or-1-positive-or-negative-integer/46829405#46829405", "title": "Randomly generate 1 or -1 (positive or negative integer)", "body": "<p>If you need single bits (one per call), you already did your benchmark and other answers provide additional info.</p>\n\n<p>If you need many bits or can pre-calculate bit-arrays for later consumption, numpy's methods <em>might</em> shine.</p>\n\n<p>Here is some more <strong>demo-approach</strong> using numpy (which surprisingly does not have a method dedicated for this job exactly):</p>\n\n<pre><code>import numpy as np\nimport random\n\ndef sample_bits(N):\n    assert N % 8 == 0  # demo only\n    n_bytes = N // 8\n\n    rbytes = np.random.randint(0, 255, dtype=np.uint8, size=n_bytes)\n    return np.unpackbits(rbytes)\n\ndef alt(N):\n    return np.random.choice([-1,1],size=N)\n\ndef alt2(N):\n    return [1 if random.random() &lt; 0.5 else -1 for i in range(N)]\n\nif __name__ == '__main__':\n    import timeit\n    print(timeit.timeit(\"sample_bits(1024)\", setup=\"from __main__ import sample_bits\", number=10000))\n    print(timeit.timeit(\"alt(1024)\", setup=\"from __main__ import alt\", number=10000))\n    print(timeit.timeit(\"alt2(1024)\", setup=\"from __main__ import alt2\", number=10000))\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>0.06640421246836543\n0.352129537507486\n1.5522800431775592\n</code></pre>\n\n<p>The general idea is:</p>\n\n<ul>\n<li>use numpy to generate many uint8's in one step\n\n<ul>\n<li>(there might be something better using internal functions without the randint-API)</li>\n</ul></li>\n<li>unpack uint8's to 8 bits\n\n<ul>\n<li>uniformity follows from randint's uniformity guarantees</li>\n</ul></li>\n</ul>\n\n<p>Again, this is only a demo:</p>\n\n<ul>\n<li>for one specific case</li>\n<li>not caring about different result-types of these functions</li>\n<li>not caring about -1 vs. 0 (might be important in your use-case)</li>\n<li>(not even optimal compared to much more low-level approaches; MT used internally can be used as a bit-source, which does not need fp-math, like many other PRNGs!)</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 51, "user_id": 9698716, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Arik Voronov", "link": "https://stackoverflow.com/users/9698716/arik-voronov"}, "is_accepted": false, "score": 5, "last_activity_date": 1524672294, "creation_date": 1524672294, "answer_id": 50026751, "question_id": 46820182, "link": "https://stackoverflow.com/questions/46820182/randomly-generate-1-or-1-positive-or-negative-integer/50026751#50026751", "title": "Randomly generate 1 or -1 (positive or negative integer)", "body": "<p>not sure what your application is exactly, but I needed something similar for a large vectorized array.</p>\n\n<p>Here's a good way to get a sign array:</p>\n\n<blockquote>\n  <p>(2*np.random.randint(0,2,size=(your_size))-1)</p>\n</blockquote>\n\n<p>The result is an array, for example:</p>\n\n<blockquote>\n  <p>array([-1, -1, -1,  1,  1,  1, -1, -1,  1,  1,  1, -1, -1,  1, -1])</p>\n</blockquote>\n\n<p>and you can use the reshape command to get the above to the size of your matrix:</p>\n\n<blockquote>\n  <p>(2*np.random.randint(0,2,size=(m*n))-1).reshape(m,n)</p>\n</blockquote>\n\n<p>Then you can multiply a matrix by the above and get all of the members with random signs. </p>\n\n<blockquote>\n  <p>A= np.array([[1, 2, 3],\n         [4, 5, 6]])</p>\n  \n  <p>B = A*(2*np.random.randint(0,2,size=(2*3))-1).reshape(2,3)</p>\n</blockquote>\n\n<p>Then you get something like : </p>\n\n<blockquote>\n  <p>B = array([[ 1,  2, -3],[ 4,  5, -6]])</p>\n</blockquote>\n\n<p>Pretty quick, if your data is vectorized.</p>\n"}], "owner": {"reputation": 1031, "user_id": 6575359, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5bddbaafe8811a59bce3a65535b9c1c4?s=128&d=identicon&r=PG&f=1", "display_name": "Siemkowski", "link": "https://stackoverflow.com/users/6575359/siemkowski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 22645, "favorite_count": 1, "accepted_answer_id": 46820635, "answer_count": 6, "score": 13, "last_activity_date": 1524672294, "creation_date": 1508365569, "question_id": 46820182, "link": "https://stackoverflow.com/questions/46820182/randomly-generate-1-or-1-positive-or-negative-integer", "title": "Randomly generate 1 or -1 (positive or negative integer)", "body": "<p>I wanted to generate 1 or -1 in <code>Python</code> as a step to randomizing between non-negative and non-positive numbers or to randomly changing sign of an already existing integer. What would be the best way to generate 1 or -1 in <code>Python</code>? Assuming even distribution I know I could use:</p>\n\n<pre><code>import random\n\n#method1\nmy_number = random.choice((-1, 1))\n\n#method2\nmy_number = (-1)**random.randrange(2)\n\n#method3\n# if I understand correctly random.random() should never return exactly 1\n# so I use \"&lt;\", not \"&lt;=\"\nif random.random() &lt; 0.5:\n    my_number = 1\nelse:\n    my_number = -1\n\n#method4\nmy_number = random.randint(0,1)*2-1\n</code></pre>\n\n<p>Using <code>timeit</code> module I got the following results:</p>\n\n<pre><code>#method1\ns = \"my_number = random.choice((-1, 1))\"\ntimeit.timeit(stmt = s, setup = \"import random\")\n&gt;2.814896769857569\n#method2\ns = \"my_number = (-1)**random.randrange(2)\"\ntimeit.timeit(stmt = s, setup = \"import random\")\n&gt;3.521280517518562\n#method3\ns = \"\"\"\nif random.random() &lt; 0.5: my_number = 1\nelse: my_number = -1\"\"\"\ntimeit.timeit(stmt = s, setup = \"import random\")\n&gt;0.25321546903273884\n#method4\ns = \"random.randint(0,1)*2-1\"\ntimeit.timeit(stmt = s, setup = \"import random\")\n&gt;4.526625442240402\n</code></pre>\n\n<p>So unexpectedly method 3 is the fastest. My bet was on method 1 to be the fastest as it is also shortest. Also both method 1 (since <code>Python 3.6</code> I think?) and 3 give the possibility to introduce uneven distributions. Although method 1 is shortest (main advantege) for now I would choose method 3:</p>\n\n<pre><code>def positive_or_negative():\n    if random.random() &lt; 0.5:\n        return 1\n    else:\n        return -1\n</code></pre>\n\n<p>Testing:</p>\n\n<pre><code>s = \"\"\"\nimport random\ndef positive_or_negative():\n    if random.random() &lt; 0.5:\n        return 1\n    else:\n        return -1\n        \"\"\"\ntimeit.timeit(stmt = \"my_number = positive_or_negative()\", setup = s)\n&gt;0.3916183138621818\n</code></pre>\n\n<p>Any better (faster or shorter) method to randomly generate -1 or 1 in <code>Python</code>? Any reason why would you choose method 1 over method 3 or vice versa?</p>\n"}, {"tags": ["python", "numpy", "scikit-learn", "feature-selection"], "answers": [{"tags": [], "owner": {"reputation": 28829, "user_id": 3374996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ijirj.png?s=128&g=1", "display_name": "Vivek Kumar", "link": "https://stackoverflow.com/users/3374996/vivek-kumar"}, "is_accepted": true, "score": 2, "last_activity_date": 1508378500, "creation_date": 1508378500, "answer_id": 46821812, "question_id": 46820178, "link": "https://stackoverflow.com/questions/46820178/column-names-on-feature-selection-output-in-python-scikit-learn/46821812#46821812", "title": "Column Names on Feature Selection Output in Python (Scikit Learn)", "body": "<p>Use <a href=\"http://scikit-learn.org/stable/modules/generated/sklearn.feature_selection.SelectFromModel.html#sklearn.feature_selection.SelectFromModel.get_support\" rel=\"nofollow noreferrer\"><code>model.get_support()</code></a>.</p>\n\n<blockquote>\n  <p><strong>get_support(indices=False)</strong> </p>\n  \n  <p>Get a mask, or integer index, of\n  the features selected</p>\n</blockquote>\n\n<p>Lets say you have total 5 features in your X and 3 were selected from it: First, Second and fifth.</p>\n\n<p>Then <code>model.get_support()</code> will return :</p>\n\n<pre><code>[True, True, False, False, True]\n</code></pre>\n\n<p>If you use <code>model.get_support(indices=True)</code>, then you will get:</p>\n\n<pre><code>[0,1,4]\n</code></pre>\n\n<p>Hope this clears your question.</p>\n"}], "owner": {"reputation": 25, "user_id": 8798325, "user_type": "registered", "profile_image": "https://graph.facebook.com/1719175034760983/picture?type=large", "display_name": "Kim", "link": "https://stackoverflow.com/users/8798325/kim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 966, "favorite_count": 0, "accepted_answer_id": 46821812, "answer_count": 1, "score": 0, "last_activity_date": 1508378500, "creation_date": 1508365529, "question_id": 46820178, "link": "https://stackoverflow.com/questions/46820178/column-names-on-feature-selection-output-in-python-scikit-learn", "title": "Column Names on Feature Selection Output in Python (Scikit Learn)", "body": "<p>Disclaimer: I'm very new to Python.</p>\n\n<p>I've done a preprocessing step of feature selection on my dataset in Python 2.7 scikit learn. In doing this, I've reduced the number of columns from 222 to 77.</p>\n\n<p>My problem is the output of the feature selection is a numpy array, which appears to have stripped the column names. I need to know which columns were kept, but I'm not sure how to get this information if I can't see the column names.\nHere's my feature selection code, which returns a matrix:</p>\n\n<pre><code> clf = ExtraTreesClassifier()\n clf = clf.fit(X, y)\n clf.feature_importances_  \n model = SelectFromModel(clf, prefit=True)\n X_new = model.transform(X)\n</code></pre>\n\n<p>Thanks for your help!</p>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 536, "user_id": 8767168, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/Tthwq.jpg?s=128&g=1", "display_name": "Austin A", "link": "https://stackoverflow.com/users/8767168/austin-a"}, "edited": false, "score": 0, "creation_date": 1508365781, "post_id": 46820146, "comment_id": 80587917, "body": "Try to see if your algorithm behaves like any matrix transformations or operations?"}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1508366707, "post_id": 46820146, "comment_id": 80588181, "body": "With <code>if [0., 0., 0.] in a1</code> its checking if <b>anyone in <code>a1</code> is zero</b>. Are you sure you want that?"}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1508386570, "post_id": 46820146, "comment_id": 80592842, "body": "@Liondancer That doesn&#39;t answer my question, which was - With <code>if [0., 0., 0.] in a1:</code>, are you trying to check if <code>ALL</code> elements in <code>a1</code> are zeros OR if <code>ANY</code> one element in <code>a1</code> is zero?"}, {"owner": {"reputation": 13318, "user_id": 1815710, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/dddf39759fed431cd1e8ecad2aa7dc49?s=128&d=identicon&r=PG", "display_name": "Liondancer", "link": "https://stackoverflow.com/users/1815710/liondancer"}, "reply_to_user": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1508402778, "post_id": 46820146, "comment_id": 80599404, "body": "@Divakar if ALL elements in a1 are zeros sorry"}], "answers": [{"tags": [], "owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "is_accepted": true, "score": 1, "last_activity_date": 1508367519, "last_edit_date": 1508367519, "creation_date": 1508367112, "answer_id": 46820419, "question_id": 46820146, "link": "https://stackoverflow.com/questions/46820146/optimize-numpy-iterating-through-image-and-changing-values/46820419#46820419", "title": "Optimize NumPy iterating through image and changing values", "body": "<p>The only obstacle to vectorization seemed to be that <code>IF</code> conditional in <code>avg</code>. To get past it, simply use the choosing capability of <code>np.where</code> and thus have our solution like so -</p>\n\n<pre><code>avgs = (im + image_2)/2.0\nimage_2_out = np.where((im == 0).any(-1,keepdims=1), image_2, avgs)\n</code></pre>\n\n<p>Note that this assumes with <code>if [0., 0., 0.] in a1</code>, you meant to check for <code>ANY</code> one match. If you meant to check for <code>ALL</code> zeros, simply use <code>.all</code> instead of <code>.any</code>.</p>\n\n<p>Alternatively, to do in-situ edits in <code>image_2</code>, use a mask for <code>boolean-indexing</code> -</p>\n\n<pre><code>mask = ~(im == 0).any(-1)\nimage_2[mask] = avgs[mask]\n</code></pre>\n"}], "owner": {"reputation": 13318, "user_id": 1815710, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/dddf39759fed431cd1e8ecad2aa7dc49?s=128&d=identicon&r=PG", "display_name": "Liondancer", "link": "https://stackoverflow.com/users/1815710/liondancer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 46820419, "answer_count": 1, "score": 0, "last_activity_date": 1508370462, "creation_date": 1508365304, "last_edit_date": 1508370462, "question_id": 46820146, "link": "https://stackoverflow.com/questions/46820146/optimize-numpy-iterating-through-image-and-changing-values", "title": "Optimize NumPy iterating through image and changing values", "body": "<p>Is there a way to optimize this snippet of code? With my current <code>im</code> value, it is taking me ~28 seconds. Wondering if I could reduce this time.</p>\n\n<pre><code>im = output_image[-min_xy[1]:-min_xy[1] + image_2.shape[0], -min_xy[0]:-min_xy[0] + image_2.shape[1]]\n    for idx, rk in enumerate(im):\n        for ix, k in enumerate(rk):\n            image_2[idx][ix] = avg(im[idx][ix], image_2[idx][ix])\n</code></pre>\n\n<p><code>type(image_2)</code> and <code>type(im)</code> is <code>&lt;type 'numpy.ndarray'&gt;</code></p>\n\n<p><code>im.shape</code> and <code>image_2.shape</code> is <code>(2386, 3200, 3)</code></p>\n\n<p>what my <code>avg()</code> does is </p>\n\n<pre><code>def avg(a1, a2):\n    if [0., 0., 0.] in a1:\n        return a2\n    else:\n        return (a1 + a2) / 2\n</code></pre>\n\n<p>NOTE: <code>a1</code> is an array of size 3 ex: <code>array([ 0.68627451,  0.5372549 ,  0.4745098])</code></p>\n"}, {"tags": ["python", "memory"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 5, "creation_date": 1508365276, "post_id": 46820135, "comment_id": 80587764, "body": "The OS reclaims it, and that&#39;s that."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1508365584, "post_id": 46820135, "comment_id": 80587842, "body": "All major, modern operating systems will free the memory allocated by a process once the process terminates."}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1508366783, "post_id": 46820135, "comment_id": 80588199, "body": "Garbage collection can be something to research. It&#39;s not Python specific"}], "answers": [{"comments": [{"owner": {"reputation": 129, "user_id": 5727612, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/978bd8b2fa23e86bbb7ac48ea5150af1?s=128&d=identicon&r=PG&f=1", "display_name": "arm93", "link": "https://stackoverflow.com/users/5727612/arm93"}, "edited": false, "score": 0, "creation_date": 1508519100, "post_id": 46820161, "comment_id": 80655277, "body": "Thanks for the help!"}], "tags": [], "owner": {"reputation": 2933, "user_id": 3434388, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/uZ9Hf.jpg?s=128&g=1", "display_name": "Danielle M.", "link": "https://stackoverflow.com/users/3434388/danielle-m"}, "is_accepted": true, "score": 1, "last_activity_date": 1508365371, "creation_date": 1508365371, "answer_id": 46820161, "question_id": 46820135, "link": "https://stackoverflow.com/questions/46820135/what-happens-to-the-memory-used-by-your-program-after-its-finished-running/46820161#46820161", "title": "What happens to the memory used by your program after it&#39;s finished running?", "body": "<p>The details depend on the OS, but in general, when a process exits, the OS deletes everything it touched - memory, file handles, sockets, etc. At least, it tries to. </p>\n"}], "owner": {"reputation": 129, "user_id": 5727612, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/978bd8b2fa23e86bbb7ac48ea5150af1?s=128&d=identicon&r=PG&f=1", "display_name": "arm93", "link": "https://stackoverflow.com/users/5727612/arm93"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 46820161, "answer_count": 1, "score": 0, "last_activity_date": 1508365371, "creation_date": 1508365217, "question_id": 46820135, "link": "https://stackoverflow.com/questions/46820135/what-happens-to-the-memory-used-by-your-program-after-its-finished-running", "title": "What happens to the memory used by your program after it&#39;s finished running?", "body": "<p>TL:DR What does python do with a programs allocated memory space after it terminates? </p>\n\n<p>This may seem like a basic question but I want to know what happens to, for example, a python list that contains 1000 ints after I shut down the program. </p>\n\n<p>I ask this because I've recently been working with programs that have quite large dict's and lists. I feel I should manually delete the programs allocated memory space, esspecially if I'm just trying to see if the program runs correctly. </p>\n\n<p>Is there a way to do this in python, does python do this automatically? </p>\n\n<p>Should I even be worried about it at all?</p>\n"}, {"tags": ["python", "win32com"], "answers": [{"comments": [{"owner": {"reputation": 2933, "user_id": 3434388, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/uZ9Hf.jpg?s=128&g=1", "display_name": "Danielle M.", "link": "https://stackoverflow.com/users/3434388/danielle-m"}, "edited": false, "score": 0, "creation_date": 1508365973, "post_id": 46820149, "comment_id": 80587974, "body": "When running as a different user, python probably searches for modules in an entirely different location."}, {"owner": {"reputation": 28384, "user_id": 648265, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4d98e414a47934d66cb78bf73d0845ba?s=128&d=identicon&r=PG", "display_name": "ivan_pozdeev", "link": "https://stackoverflow.com/users/648265/ivan-pozdeev"}, "edited": false, "score": 0, "creation_date": 1508369778, "post_id": 46820149, "comment_id": 80588985, "body": "Always running Python as administrator is not really a solution. Neither do I think that <code>pywin32</code> has such a blatant design flaw. Must be something else - maybe one needs to run it as admin one time (that would still be a bug, though not a critical one)."}, {"owner": {"reputation": 792, "user_id": 8106859, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/SF7s2.png?s=128&g=1", "display_name": "Polymer", "link": "https://stackoverflow.com/users/8106859/polymer"}, "reply_to_user": {"reputation": 2933, "user_id": 3434388, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/uZ9Hf.jpg?s=128&g=1", "display_name": "Danielle M.", "link": "https://stackoverflow.com/users/3434388/danielle-m"}, "edited": false, "score": 0, "creation_date": 1508394888, "post_id": 46820149, "comment_id": 80595210, "body": "@DanielleM. probably has the right idea. In order to install the win32com module, I had to use administrator mode, due to system restrictions. Due to this it could have quite possibly installed in an entirely different directory, but even still this is quite an odd bug."}], "tags": [], "owner": {"reputation": 792, "user_id": 8106859, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/SF7s2.png?s=128&g=1", "display_name": "Polymer", "link": "https://stackoverflow.com/users/8106859/polymer"}, "is_accepted": false, "score": 0, "last_activity_date": 1508365309, "creation_date": 1508365309, "answer_id": 46820149, "question_id": 46820109, "link": "https://stackoverflow.com/questions/46820109/import-error-with-win32com-gen-py/46820149#46820149", "title": "Import error with win32com.gen_py", "body": "<p>Found the issue here. Turns out I need to run Python as Administrator, should have worked that out given the Permission error. Strange how the gen_py directory is still empty, however.</p>\n"}, {"tags": [], "owner": {"reputation": 107, "user_id": 3702057, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/849eb67352af94bd4f44d1f1fe50fcdd?s=128&d=identicon&r=PG&f=1", "display_name": "Ptolomeo XII", "link": "https://stackoverflow.com/users/3702057/ptolomeo-xii"}, "is_accepted": false, "score": 0, "last_activity_date": 1526989594, "creation_date": 1526989594, "answer_id": 50466895, "question_id": 46820109, "link": "https://stackoverflow.com/questions/46820109/import-error-with-win32com-gen-py/50466895#50466895", "title": "Import error with win32com.gen_py", "body": "<p>I had this same problem and reinstalled AS ADMINISTRATOR the pywin32-XXX.exe installer for the win32com.client module, and everything works fine now.\nGood luck.</p>\n"}], "owner": {"reputation": 792, "user_id": 8106859, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/SF7s2.png?s=128&g=1", "display_name": "Polymer", "link": "https://stackoverflow.com/users/8106859/polymer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3287, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1526989594, "creation_date": 1508365109, "question_id": 46820109, "link": "https://stackoverflow.com/questions/46820109/import-error-with-win32com-gen-py", "title": "Import error with win32com.gen_py", "body": "<p>I'm developing a Python application that can interface with Outlook and send emails on Outlook's behalf. Because of this, I need the use of the <code>win32com</code> library, in order to use <code>win32com.client</code>. <br><br>\nIn addition to this, the same Python script will also have to access a MySQL database using the Oracle mysql-connector. Because of this, Python34 must be used as this is the only version I managed to get working with the sql-connector. <br><br>\nNow here comes the crux of the issue. I have installed win32com (as it is not pre-installed with Python34) and it installed with no errors, and I can import win32com fine within python. However, when importing win32com.client, it gives the below error message:<br><br></p>\n\n<pre><code>&gt;&gt;&gt; import win32com.client\nTraceback (most recent call last):\n    File \"C:\\Python34\\lib\\site-packages\\win32com\\client\\gencache.py\", line 60, in __init__\n        _LoadDicts()\n    File \"C:\\Python34\\lib\\site-packages\\win32com\\client\\gencache.py\", line 110, in _LoadDicts\n        f = open(os.path.join(win32com.__gen_path__, \"dicts.dat\"), \"rb\")\nFileNotFoundError: [Errno 2] No such file or directory: 'C:\\\\Python34\\\\lib\\\\site-packages\\\\win32com\\\\gen_py\\\\dicts.dat'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n    File \"C:\\Python34\\lib\\site-packages\\win32com\\client\\gencache.py\", line 143, in GetGeneratePath\n        os.stat(fname)\nFileNotFoundError: [WinError 2] The system cannot find the file specified: 'C:\\\\Python34\\\\lib\\\\site-packages\\\\win32com\\\\gen_py\\\\__init__.py'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n    File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n    File \"C:\\Python34\\lib\\site-packages\\win32com\\client\\__init__.py\", line 11, in &lt;module&gt;\n        from . import gencache\n    File \"C:\\Python34\\lib\\site-packages\\win32com\\client\\gencache.py\", line 666, in &lt;module&gt;\n        __init__()\n    File \"C:\\Python34\\lib\\site-packages\\win32com\\client\\gencache.py\", line 62, in __init__\n        Rebuild()\n    File \"C:\\Python34\\lib\\site-packages\\win32com\\client\\gencache.py\", line 653, in Rebuild\n        _SaveDicts()\n    File \"C:\\Python34\\lib\\site-packages\\win32com\\client\\gencache.py\", line 69, in _SaveDicts\n        f = open(os.path.join(GetGeneratePath(), \"dicts.dat\"), \"wb\")\n    File \"C:\\Python34\\lib\\site-packages\\win32com\\client\\gencache.py\", line 145, in GetGeneratePath\n        f = open(fname,\"w\")\nPermissionError: [Errno 13] Permission denied: 'C:\\\\Python34\\\\lib\\\\site-packages\\\\win32com\\\\gen_py\\\\__init__.py'\n</code></pre>\n\n<p>Beautiful error, isn't it! I checked the directory <code>'C:\\\\Python34\\\\lib\\\\site-packages\\\\win32com\\\\gen_py\\\\'</code> manually to see what is there, and here's the thing, it's completely empty. When I installed <code>win32com</code> I installed with administrator permissions, so that couldn't have been the issue. I have also re-installed the <code>win32com</code> module to see if that might've fixed it but to no avail.<br><br>\nIf anybody with a bit more experience with Python could offer some advice on what I need to install or repair I would be appreciative</p>\n"}, {"tags": ["python", "logging"], "answers": [{"tags": [], "owner": {"reputation": 28384, "user_id": 648265, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4d98e414a47934d66cb78bf73d0845ba?s=128&d=identicon&r=PG", "display_name": "ivan_pozdeev", "link": "https://stackoverflow.com/users/648265/ivan-pozdeev"}, "is_accepted": false, "score": 0, "last_activity_date": 1510051441, "last_edit_date": 1510051441, "creation_date": 1508366024, "answer_id": 46820261, "question_id": 46820095, "link": "https://stackoverflow.com/questions/46820095/cleaning-the-log-file-on-demand/46820261#46820261", "title": "Cleaning the log file on demand?", "body": "<p>This isn't available out of the box because it's a rather unusual (so as not to say \"strange\") use case. Logs aren't supposed to be just deleted and overwritten right away - they're useless this way. You may be better off rotating the log instead:</p>\n\n<pre><code>h = logging.handlers.RotatingFileHandler(&lt;...&gt;)\n&lt;logger&gt;.addHandler(h)\n\n&lt;...&gt;\n\nfor &lt;batch&gt; in &lt;batches&gt;:\n   &lt;...&gt;\n   h.doRollover()\n</code></pre>\n\n<hr>\n\n<p>That said, what you requested <em>is</em> possible with a non-public method of <code>FileHandler</code> that normally opens the log upon the handler's initialization:</p>\n\n<pre><code>h = logging.FileHandler(mode='w', &lt;...&gt;)   #or use whatever else creates a FileHandler, e.g. basicConfig()\n\n&lt;...&gt;\nh.close() #needed because it prevents side effects from the old descriptor\n          #(e.g. garbage from unflushed writes, sharing violation)\nh._open()\n</code></pre>\n"}], "owner": {"reputation": 5193, "user_id": 1019129, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/357b7f0f0ca6e2c0f0ebccbec9b1a87b?s=128&d=identicon&r=PG", "display_name": "sten", "link": "https://stackoverflow.com/users/1019129/sten"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1510051441, "creation_date": 1508365037, "last_edit_date": 1508365917, "question_id": 46820095, "link": "https://stackoverflow.com/questions/46820095/cleaning-the-log-file-on-demand", "title": "Cleaning the log file on demand?", "body": "<p>I want to clean the log file on demand.\nI have app that runs batches .. I want in the beginning of every batch run to clean the log file.</p>\n\n<p>Is there a \"logging\" method for that or I have to do a shell command.\nWill shell command interfere with file-descriptor that the \"logging\" module holds.</p>\n\n<p>Overwrite-mode wont work, I want to do it on demand.</p>\n"}, {"tags": ["python", "tuples", "comparison-operators"], "answers": [{"comments": [{"owner": {"reputation": 2531, "user_id": 6084317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4295c9b1ada748080d7a123f7263ae69?s=128&d=identicon&r=PG&f=1", "display_name": "Edward Minnix", "link": "https://stackoverflow.com/users/6084317/edward-minnix"}, "reply_to_user": {"reputation": 317, "user_id": 4208823, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/WQPlx.jpg?s=128&g=1", "display_name": "Ellest", "link": "https://stackoverflow.com/users/4208823/ellest"}, "edited": false, "score": 1, "creation_date": 1508382492, "post_id": 46821830, "comment_id": 80591936, "body": "@Ellest custom classes are the simplest and most Pythonic way to implement specific overloaded operators. You&#39;re approach probably won&#39;t work because <code>def __lt__(self, other):</code> globally won&#39;t overload the operator on any class. Also, it&#39;s impossible to monkey patch the builtin types. So while syntactically correct, it&#39;s logically incorrect and the best solution is a custom class."}], "tags": [], "owner": {"reputation": 2620, "user_id": 899950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dbb03e33d3960bf7834721592292103?s=128&d=identicon&r=PG", "display_name": "Lawrence D&#39;Oliveiro", "link": "https://stackoverflow.com/users/899950/lawrence-doliveiro"}, "is_accepted": true, "score": 1, "last_activity_date": 1508378662, "creation_date": 1508378662, "answer_id": 46821830, "question_id": 46820094, "link": "https://stackoverflow.com/questions/46820094/python-overriding-heapq-comparison-when-using-tuples/46821830#46821830", "title": "Python overriding heapq comparison when using tuples", "body": "<p>Yes, that will work. To clarify the overall process for using a custom class with <code>heapq</code>, here are some extracts from a test script I wrote to try to get to grips with <code>asyncio</code>. To keep track of timers that go off at different times, I defined this class:</p>\n\n<pre><code>class TimerTask :\n    \"actions to be invoked at specific times.\"\n\n    def __init__(self, when, action) :\n        self.when = when\n        self.action = action\n    #end __init__\n\n    def __lt__(a, b) :\n        return \\\n            a.when &lt; b.when\n    #end __lt__\n\n#end TimerTask\n</code></pre>\n\n<p>A line like this puts a <code>TimerTask</code> on the pending queue:</p>\n\n<pre><code>heapq.heappush(self.pending, self.TimerTask(when, trigger_sleep_done))\n</code></pre>\n\n<p>Then this sequence waits for the earliest pending timer to come due and invokes its corresponding action:</p>\n\n<pre><code>try :\n    until = self.pending[0].when\nexcept IndexError :\n    # nothing more for event loop to do\n    break\n#end try\nnow = time.time()\nif until &gt; now :\n    time.sleep(until - now)\n#end if\nheapq.heappop(self.pending).action()\n</code></pre>\n"}], "owner": {"reputation": 317, "user_id": 4208823, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/WQPlx.jpg?s=128&g=1", "display_name": "Ellest", "link": "https://stackoverflow.com/users/4208823/ellest"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1303, "favorite_count": 0, "accepted_answer_id": 46821830, "answer_count": 1, "score": 0, "last_activity_date": 1539583491, "creation_date": 1508365035, "last_edit_date": 1539583491, "question_id": 46820094, "link": "https://stackoverflow.com/questions/46820094/python-overriding-heapq-comparison-when-using-tuples", "title": "Python overriding heapq comparison when using tuples", "body": "<p>So I understand that you can use tuples instead of straight values in using the heapq module for creating a heap that essentially contains (key,value) pairs. </p>\n\n<p>I'm also aware that you can override the <code>__lt__</code> comparison operator for the heapq module to have your own comparison in creating and maintaining the heap. </p>\n\n<p>Is there a way to override this operator so that it compares both values of the tuple? For instance, I'm trying to have heapq compare the second values of the tuple if the first are equal with something along the lines of:</p>\n\n<pre><code>def __lt__(self, other):\n    return self[0] &lt; other[0] if self[0] != other[0] else other[1] &lt; self[1]\n</code></pre>\n\n<p>The latter half <code>other[1] &lt; self[1]</code> is reversed on purpose as the logic is that the tuple with a greater second value should be considered the lesser of the two. </p>\n\n<p>Thanks for any insight in advance!</p>\n\n<p><em>Edit: I think I was confused by the difference between the terminologies \"overload\" and \"override\". Override was what I was referring to.</em></p>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "edited": false, "score": 2, "creation_date": 1508365213, "post_id": 46820081, "comment_id": 80587740, "body": "The <code>b</code> means it&#39;s a byte-string. But the exception message is mostly telling you that you didn&#39;t choose the right delimiter (the <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.loadtxt.html\" rel=\"nofollow noreferrer\">docs</a> mention that it uses any whitespace as delimiter by default... but given the error message your csv uses comma). Does it work if you use <code>np.loadtxt(filename, skiprows=0, delimiter=&#39;,&#39;)</code>?"}, {"owner": {"reputation": 41, "user_id": 4561290, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GL5dK.jpg?s=128&g=1", "display_name": "Andy Kellett", "link": "https://stackoverflow.com/users/4561290/andy-kellett"}, "reply_to_user": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "edited": false, "score": 0, "creation_date": 1508365524, "post_id": 46820081, "comment_id": 80587830, "body": "I should make it clear that even with values like 123.45, 234.56 in the hand-crafted .csv file, the &#39;b&#39; still appears before &#39;123.45, 234.56&#39; in the error message."}, {"owner": {"reputation": 41, "user_id": 4561290, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GL5dK.jpg?s=128&g=1", "display_name": "Andy Kellett", "link": "https://stackoverflow.com/users/4561290/andy-kellett"}, "reply_to_user": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "edited": false, "score": 0, "creation_date": 1508365659, "post_id": 46820081, "comment_id": 80587868, "body": "Mseifert is exactly right - it was my non-choice of delimiter.  Thank you very much!"}], "owner": {"reputation": 41, "user_id": 4561290, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GL5dK.jpg?s=128&g=1", "display_name": "Andy Kellett", "link": "https://stackoverflow.com/users/4561290/andy-kellett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 23, "favorite_count": 0, "closed_date": 1508365130, "answer_count": 0, "score": 0, "last_activity_date": 1508364947, "creation_date": 1508364947, "question_id": 46820081, "link": "https://stackoverflow.com/questions/46820081/what-does-the-b-mean-here-valueerror-could-not-convert-string-to-float-b1", "closed_reason": "Duplicate", "title": "What does the &#39;b&#39; mean here: ValueError: could not convert string to float: b&#39;1.94E+02,2.02E-03&#39;", "body": "<p>When I run this:</p>\n\n<pre><code>import numpy as np\n\nfilename = \"C:\\\\AV GIS\\\\ILS_measure\\\\sunshine_oct18.csv\"\n#filename = \"C:\\\\AV GIS\\\\ILS_measure\\\\testcsv.csv\"\ndata = np.loadtxt(filename, skiprows=0)\nprint(data.shape)\n</code></pre>\n\n<p>I get this:</p>\n\n<pre><code> ValueError: could not convert string to float: b'1.94E+02,2.02E-03'\n</code></pre>\n\n<p>What does the 'b' mean before the \"number-string\" arguments?</p>\n\n<p>I did hand-craft a .csv file to see if there was something peculiar to my real .csv data file, but even the simple .csv file produces the same error. </p>\n"}, {"tags": ["python", "pandas", "dataframe", "join", "merge"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 2, "creation_date": 1508364986, "post_id": 46820068, "comment_id": 80587670, "body": "<code>pd.concat([df1, df2], 1)</code>"}, {"owner": {"reputation": 147, "user_id": 7115780, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2f538591b651ee0108d9a77da2738d0a?s=128&d=identicon&r=PG&f=1", "display_name": "P.J", "link": "https://stackoverflow.com/users/7115780/p-j"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1508365988, "post_id": 46820068, "comment_id": 80587983, "body": "Error: Reindexing only valid with uniquely valued Index objects"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1508366230, "post_id": 46820068, "comment_id": 80588042, "body": "Posted answer..."}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1508366553, "post_id": 46820068, "comment_id": 80588133, "body": "I would say , do not change your question like this ..."}], "answers": [{"comments": [{"owner": {"reputation": 147, "user_id": 7115780, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2f538591b651ee0108d9a77da2738d0a?s=128&d=identicon&r=PG&f=1", "display_name": "P.J", "link": "https://stackoverflow.com/users/7115780/p-j"}, "edited": false, "score": 0, "creation_date": 1508365996, "post_id": 46820125, "comment_id": 80587984, "body": "Error: Reindexing only valid with uniquely valued Index objects"}], "tags": [], "owner": {"reputation": 3863, "user_id": 7252805, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/7x3Z0.png?s=128&g=1", "display_name": "sheldonzy", "link": "https://stackoverflow.com/users/7252805/sheldonzy"}, "is_accepted": false, "score": 0, "last_activity_date": 1508365169, "creation_date": 1508365169, "answer_id": 46820125, "question_id": 46820068, "link": "https://stackoverflow.com/questions/46820068/join-two-dataframes-along-columns-with-non-unique-index/46820125#46820125", "title": "Join two dataframes along columns with non-unique index", "body": "<p>concatenate along the column axis with <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.concat.html\" rel=\"nofollow noreferrer\"><code>concat</code></a></p>\n\n<pre><code>import pandas as pd\n\ndf1 = pd.DataFrame({'A': ['A0', 'A1', 'A2', 'A3'],'B': ['B0', 'B1', 'B2', 'B3'],'C': ['C0', 'C1', 'C2', 'C3']},index=[0, 1, 2, 2])\n\ndf2 = pd.DataFrame({'D': ['D0', 'D1'],'E': ['E0', 'E1']},index=[0, 2])\n\ndf = pd.concat([df1, df2], axis=1)\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>    A   B   C    D    E\n0  A0  B0  C0   D0   E0\n1  A1  B1  C1  NaN  NaN\n2  A2  B2  C2   D1   E1\n2  A3  B3  C3   D1   E1\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": false, "score": 1, "last_activity_date": 1508366454, "last_edit_date": 1508366454, "creation_date": 1508365890, "answer_id": 46820235, "question_id": 46820068, "link": "https://stackoverflow.com/questions/46820068/join-two-dataframes-along-columns-with-non-unique-index/46820235#46820235", "title": "Join two dataframes along columns with non-unique index", "body": "<p>By using <code>combine_first</code></p>\n\n<pre><code>df1.combine_first(df2).dropna(subset=['A'],axis=0)\nOut[320]: \n    A   B   C    D    E\n0  A0  B0  C0   D0   E0\n1  A1  B1  C1  NaN  NaN\n2  A2  B2  C2   D1   E1\n2  A3  B3  C3   D1   E1\n</code></pre>\n\n<p>After you edit: </p>\n\n<p>By using <code>combine_first</code></p>\n\n<pre><code>df1.combine_first(df2.set_index('A'))\nOut[338]: \n   A   B   C    E\n0  0  B0  C0   E0\n1  1  B1  C1  NaN\n2  2  B2  C2   E1\n3  2  B3  C3   E2\n</code></pre>\n\n<p>Or </p>\n\n<pre><code>pd.concat([df1,df2.set_index('A')],axis=1)\nOut[339]: \n   A   B   C    E\n0  0  B0  C0   E0\n1  1  B1  C1  NaN\n2  2  B2  C2   E1\n3  2  B3  C3   E2\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 4, "last_activity_date": 1508366558, "last_edit_date": 1508366558, "creation_date": 1508366209, "answer_id": 46820286, "question_id": 46820068, "link": "https://stackoverflow.com/questions/46820068/join-two-dataframes-along-columns-with-non-unique-index/46820286#46820286", "title": "Join two dataframes along columns with non-unique index", "body": "<p>Maybe you're looking for a <em>left outer</em> <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.merge.html\" rel=\"nofollow noreferrer\">merge</a>.</p>\n\n<pre><code>df1.merge(df2, how='left')\n   A   B   C    E\n0  0  B0  C0   E0\n1  1  B1  C1  NaN\n2  2  B2  C2   E1\n3  2  B3  C3   E1\n</code></pre>\n"}], "owner": {"reputation": 147, "user_id": 7115780, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2f538591b651ee0108d9a77da2738d0a?s=128&d=identicon&r=PG&f=1", "display_name": "P.J", "link": "https://stackoverflow.com/users/7115780/p-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2737, "favorite_count": 1, "accepted_answer_id": 46820286, "answer_count": 3, "score": 1, "last_activity_date": 1525739605, "creation_date": 1508364871, "last_edit_date": 1525739605, "question_id": 46820068, "link": "https://stackoverflow.com/questions/46820068/join-two-dataframes-along-columns-with-non-unique-index", "title": "Join two dataframes along columns with non-unique index", "body": "<p>I have two data frames that I want to join them along columns. The index is not unique:</p>\n\n<pre><code>df1 = pd.DataFrame({'A': ['0', '1', '2', '2'],'B': ['B0', 'B1', 'B2', 'B3'],'C': ['C0', 'C1', 'C2', 'C3']}):\n    A   B   C\n0  0  B0  C0\n1  1  B1  C1\n2  2  B2  C2\n3  2  B3  C3\n\ndf2 = pd.DataFrame({'A': ['0', '2', '3'],'E': ['E0', 'E1', 'E2']},index=[0, 2, 3])\n    A   E\n0  0  E0\n1  2  E1\n2  3  E2\n</code></pre>\n\n<p>A should be my index. what I want is:</p>\n\n<pre><code>    A   B   C   E\n0  0  B0  C0    E0\n1  1  B1  C1    NAN\n2  2  B2  C2    E1\n3  2  B3  C3    E1\n</code></pre>\n\n<p>This <code>pd.concat([df1, df2], 1)</code> gives me error: </p>\n\n<pre><code>Reindexing only valid with uniquely valued Index objects\n</code></pre>\n"}, {"tags": ["python", "tkinter", "pack"], "answers": [{"tags": [], "owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "is_accepted": false, "score": 0, "last_activity_date": 1508367029, "last_edit_date": 1508367029, "creation_date": 1508366720, "answer_id": 46820372, "question_id": 46820061, "link": "https://stackoverflow.com/questions/46820061/tkinter-pack-error-argument-method/46820372#46820372", "title": "Tkinter pack() error argument method", "body": "<p>You're not calling the <code>Label</code> widget constructor correctly. Here's some <a href=\"http://infohost.nmt.edu/tcc/help/pubs/tkinter/web/label.html\" rel=\"nofollow noreferrer\">documentation</a>.</p>\n\n<p>So here's how to do it (the <code>text=text</code> may look strange, but that's because you've given the positional parameter to <code>labelCreate()</code> function the same name as one of the <code>Label</code> widget constructor's <em>keyword</em> arguments:</p>\n\n<pre><code>    def labelCreate(self, container, text, fonte, tamanho, estilo, alinhamento):\n#        self.lbl = Label(container, text)      # Wrong calling sequence!\n        self.lbl = Label(container, text=text)  # Correct way.\n        self.lbl['font'] = (fonte, tamanho, estilo)\n        self.lbl.pack(side=alinhamento)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8798248, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-OGe_wkbiqCg/AAAAAAAAAAI/AAAAAAAADkk/Q72QUxJy03M/photo.jpg?sz=128", "display_name": "Lucas Marchiori", "link": "https://stackoverflow.com/users/8798248/lucas-marchiori"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 373, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1508367029, "creation_date": 1508364842, "last_edit_date": 1508365845, "question_id": 46820061, "link": "https://stackoverflow.com/questions/46820061/tkinter-pack-error-argument-method", "title": "Tkinter pack() error argument method", "body": "<p>I'm trying to make a GUI using TKinter and OOP (newbie).</p>\n\n<pre><code>from usuarios import Usuarios\nfrom tkinter import *\n\nclass Application:\n\n    def __init__(self, master = None):\n        self.fonte = ('Verdana', '8')\n\n        container1 = self.containerCreate(10)\n        container2 = self.containerCreate(5, 20)\n        container3 = self.containerCreate(5, 20)\n        container4 = self.containerCreate(5, 20)\n        container5 = self.containerCreate(5, 20)\n        container6 = self.containerCreate(5, 20)\n        container7 = self.containerCreate(5, 20)\n        container8 = self.containerCreate(10, 20)\n        container9 = self.containerCreate(10)\n\n        lbl1 = self.labelCreate(container1, 'Informe os dados abaixo:', 'Calibri', '9', 'bold', LEFT)\n#        lblUsuario = self.labelCreate(container2, 'idUsu\u00e1rio')\n\n    def labelCreate(self, container, text, fonte, tamanho, estilo, alinhamento):\n        self.lbl = Label(container, text)\n        self.lbl['font'] = (fonte, tamanho, estilo)\n        self.lbl.pack(side = alinhamento)\n\n\n    def containerCreate(self, y = 0, x = 0, master = None):\n        self.cont = Frame(master)\n        self.cont['pady'] = y\n        self.cont['padx'] = x\n        self.cont.pack()\n\nroot = Tk()\nApplication(root)\nroot.mainloop()\n</code></pre>\n\n<p>I receive this error when I try to pass and argument to the <code>self.lbl.pack(alinhamento)</code> in the <code>labelCreate</code> method:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>runfile('D:/Dropbox/Dropbox/Python/Tkinter/db Teste/App.py', wdir='D:/Dropbox/Dropbox/Python/Tkinter/db Teste')\nReloaded modules: usuarios, Banco\nTraceback (most recent call last):\n\n  File \"&lt;ipython-input-73-c94772663ba8&gt;\", line 1, in &lt;module&gt;\n    runfile('D:/Dropbox/Dropbox/Python/Tkinter/db Teste/App.py', wdir='D:/Dropbox/Dropbox/Python/Tkinter/db Teste')\n\n  File \"D:\\Anaconda\\lib\\site-packages\\spyder\\utils\\site\\sitecustomize.py\", line 710, in runfile\n    execfile(filename, namespace)\n\n  File \"D:\\Anaconda\\lib\\site-packages\\spyder\\utils\\site\\sitecustomize.py\", line 101, in execfile\n    exec(compile(f.read(), filename, 'exec'), namespace)\n\n  File \"D:/Dropbox/Dropbox/Python/Tkinter/db Teste/App.py\", line 44, in &lt;module&gt;\n    Application(root)\n\n  File \"D:/Dropbox/Dropbox/Python/Tkinter/db Teste/App.py\", line 27, in __init__\n    lbl1 = self.labelCreate(container1, 'Informe os dados abaixo:', 'Calibri', '9', 'bold', LEFT)\n\n  File \"D:/Dropbox/Dropbox/Python/Tkinter/db Teste/App.py\", line 32, in labelCreate\n    self.lbl = Label(container, text)\n\n  File \"D:\\Anaconda\\lib\\tkinter\\__init__.py\", line 2760, in __init__\n    Widget.__init__(self, master, 'label', cnf, kw)\n\n  File \"D:\\Anaconda\\lib\\tkinter\\__init__.py\", line 2289, in __init__\n    classes = [(k, v) for k, v in cnf.items() if isinstance(k, type)]\n\nAttributeError: 'str' object has no attribute 'items'\n</code></pre>\n"}, {"tags": ["python", "sql", "pandas"], "comments": [{"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1508365692, "post_id": 46820047, "comment_id": 80587881, "body": "Please read <a href=\"http://stackoverflow.com/questions/20109391/how-to-make-good-reproducible-pandas-examples\">how to make good reproducible pandas examples</a> and edit your post correspondingly."}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 5115693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/205b6e21fb04b36b53fe997c58357775?s=128&d=identicon&r=PG&f=1", "display_name": "Igor dias", "link": "https://stackoverflow.com/users/5115693/igor-dias"}, "edited": false, "score": 0, "creation_date": 1508365369, "post_id": 46820085, "comment_id": 80587794, "body": "Thanks for the help, it worked.  I was trying to filter the df [&#39;rain&#39;] and then use the groupby function to group the records by day and count the number of days, but it did not work out very well."}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "reply_to_user": {"reputation": 35, "user_id": 5115693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/205b6e21fb04b36b53fe997c58357775?s=128&d=identicon&r=PG&f=1", "display_name": "Igor dias", "link": "https://stackoverflow.com/users/5115693/igor-dias"}, "edited": false, "score": 0, "creation_date": 1508365489, "post_id": 46820085, "comment_id": 80587817, "body": "@Igordias, i have converted your SQL to Pandas - you didn&#39;t use <code>GROUP BY</code> clause, so that SQL should return one number, so my solution. ;-) Maybe you should open a new question with a new SQL, including <code>GROUP BY</code>..."}], "tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": true, "score": 1, "last_activity_date": 1508364980, "creation_date": 1508364980, "answer_id": 46820085, "question_id": 46820047, "link": "https://stackoverflow.com/questions/46820047/transform-sql-code-in-pandas-notation/46820085#46820085", "title": "Transform SQL code in Pandas notation", "body": "<p>IIUC:</p>\n\n<pre><code>df.loc[pd.to_numeric(df['rain'], errors='coerce') == 1, 'DATEn'].nunique()\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 5115693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/205b6e21fb04b36b53fe997c58357775?s=128&d=identicon&r=PG&f=1", "display_name": "Igor dias", "link": "https://stackoverflow.com/users/5115693/igor-dias"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 46820085, "answer_count": 1, "score": 2, "last_activity_date": 1508365000, "creation_date": 1508364734, "last_edit_date": 1508365000, "question_id": 46820047, "link": "https://stackoverflow.com/questions/46820047/transform-sql-code-in-pandas-notation", "title": "Transform SQL code in Pandas notation", "body": "<p>How do I transform this SQL code:</p>\n\n<pre><code>SELECT\n   COUNT(DISTINCT DATEn) as count (*)\nFROM weather_data\nWHERE cast (rain as integer) = 1\n</code></pre>\n\n<p>using the Pandas notation, like this: df.groupby ('rain') DATEn.sum ()</p>\n"}, {"tags": ["python", "flask", "wtforms", "flask-wtforms"], "answers": [{"comments": [{"owner": {"reputation": 89, "user_id": 5496042, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/618ca9e78f13d76cb8c1df79b98cf2d6?s=128&d=identicon&r=PG&f=1", "display_name": "xGlorify", "link": "https://stackoverflow.com/users/5496042/xglorify"}, "edited": false, "score": 0, "creation_date": 1508376042, "post_id": 46821260, "comment_id": 80590465, "body": "This is correct! Thank you. I should have been able to figure that out on my own. Just had to adjust my route processing to handle the change. All set."}], "tags": [], "owner": {"reputation": 9076, "user_id": 865601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47d4708f5f7ae78ab1f4c4b8c3b62ddd?s=128&d=identicon&r=PG", "display_name": "Jacob Budin", "link": "https://stackoverflow.com/users/865601/jacob-budin"}, "is_accepted": true, "score": 1, "last_activity_date": 1508373425, "creation_date": 1508373425, "answer_id": 46821260, "question_id": 46820042, "link": "https://stackoverflow.com/questions/46820042/trying-to-insert-blank-option-in-dynamic-wtform-field/46821260#46821260", "title": "Trying to insert blank option in dynamic WTForm field", "body": "<p>The problem is rendering your forms, specifically the customer field, with the integer coercion.</p>\n\n<p>According to the <a href=\"https://wtforms.readthedocs.io/en/1.0.4/widgets.html#wtforms.widgets.Select\" rel=\"nofollow noreferrer\">WTForms's documentation on the <code>Select</code> widget</a>:</p>\n\n<blockquote>\n  <p>The field must provide an <code>iter_choices()</code> method which the widget will call on rendering; this method must yield tuples of <code>(value, label, selected)</code>.</p>\n</blockquote>\n\n<p>If you look at <a href=\"https://github.com/wtforms/wtforms/blob/086d0bf7d6d73ab9a05e30b861adee627916a71c/wtforms/fields/core.py#L453-L455\" rel=\"nofollow noreferrer\">the source code for this method</a>:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def iter_choices(self):\n    for value, label in self.choices:\n        yield (value, label, self.coerce(value) == self.data)\n</code></pre>\n\n<p>There's no exception-handling in this method for failed coercion. In your case, <code>self.coerce(value)</code> gets executed as <code>int('')</code>, which causes the <code>ValueError</code> exception you're encountering.</p>\n\n<p>There are at least two solutions:</p>\n\n<ol>\n<li>Remove <code>coerce</code>.</li>\n<li><p>Use a <a href=\"https://en.wikipedia.org/wiki/Sentinel_value\" rel=\"nofollow noreferrer\">sentinel value</a> such as <code>0</code> or <code>-1</code> to represent that no customer is being selected:</p>\n\n<pre><code>form.customer.choices.insert(0, (0, \"\"))\n</code></pre>\n\n<p>This value will pass coercion, but you'll need to handle this value (to unset the \"customer\" field) post form-processing.</p></li>\n</ol>\n"}], "owner": {"reputation": 89, "user_id": 5496042, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/618ca9e78f13d76cb8c1df79b98cf2d6?s=128&d=identicon&r=PG&f=1", "display_name": "xGlorify", "link": "https://stackoverflow.com/users/5496042/xglorify"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 760, "favorite_count": 0, "accepted_answer_id": 46821260, "answer_count": 1, "score": 0, "last_activity_date": 1508373425, "creation_date": 1508364701, "question_id": 46820042, "link": "https://stackoverflow.com/questions/46820042/trying-to-insert-blank-option-in-dynamic-wtform-field", "title": "Trying to insert blank option in dynamic WTForm field", "body": "<p>I'm trying to add a blank option in an existing working dynamic field (customer) following a result I found on SOF <a href=\"https://stackoverflow.com/questions/5868718/wtforms-how-to-generate-blank-value-using-select-fields-with-dynamic-choice-val\">here</a>, however getting an error.</p>\n\n<p>The error is <code>ValueError: invalid literal for int() with base 10: ''.</code></p>\n\n<p>I can provide the full traceback if necessary. </p>\n\n<p>Here is the form - the dynamic field is the customer one as you can see:</p>\n\n<pre><code>class FilterWorkorderForm(FlaskForm):\n    id = IntegerField('id', validators=[Optional()])\n    date = DateField('Date', validators=[Optional()])\n    customer = SelectField('Customer', coerce=int, validators=[Optional()])\n    customer_po = StringField('Customer PO', validators=[Optional()])\n    requested_by = StringField('Requested By', validators=[Optional()])\n    work_description = StringField('Work Description', validators=[Optional()])\n    status = SelectField('Status', choices=[('Quote', 'Quote'), ('Pending', 'Pending'), ('WIP', 'WIP'), ('Complete', 'Complete'), ('TBI', 'TBI'), ('Invoiced', 'Invoiced'), ('VOID', 'VOID')])\n</code></pre>\n\n<p>Below is the route:</p>\n\n<pre><code>@app.route('/reports/filter_workorder', methods=['GET', 'POST'])\n@login_required\ndef filter_workorder():\n    results = None\n    form = FilterWorkorderForm()\n    form.customer.choices = [(cus.id, cus.company_name) for cus in Company.query.order_by('id')]\n    ### LINE CAUSING ERROR ### form.customer.choices.insert(0, (\"\", \"\")) ### LINE CAUSING ERROR ###\n    if request.method == 'POST':\n        if form.validate_on_submit():\n            try:\n                customer_id = form.customer.data\n                customer = Company.query.filter_by(id = customer_id).first_or_404()\n                customer_name = customer.company_name\n                filter_data = {'id' : form.id.data, 'date' : form.date.data, 'customer_po' : form.customer_po.data, 'customer' : customer_name, \n                'work_description' : form.work_description.data, 'status' : form.status.data}\n                filter_data = {key: value for (key, value) in filter_data.items() if value}\n                results = Workorder.query.filter_by(**filter_data).all()\n            except Exception as e:\n                db.session.rollback()\n                flash(e)\n        return render_template('filter_workorder.html', form = form, results = results)\n    return render_template('filter_workorder.html', form = form)\n</code></pre>\n"}, {"tags": ["python", "heroku", "supervisord"], "answers": [{"comments": [{"owner": {"reputation": 165, "user_id": 3034014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39bf8afd2363dc3a0b3f5176dbddabfa?s=128&d=identicon&r=PG&f=1", "display_name": "LtMerlin", "link": "https://stackoverflow.com/users/3034014/ltmerlin"}, "edited": false, "score": 0, "creation_date": 1508401213, "post_id": 46823939, "comment_id": 80598524, "body": "thanks for the answer, i&#39;ll use a dyno for each process. Is there also some kind of notification system that will trigger when something is &quot;wrong&quot; with the process running in its dyno?"}, {"owner": {"reputation": 4347, "user_id": 1659476, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0c1139ab4f069e8c9b02ecc1d44d64b9?s=128&d=identicon&r=PG", "display_name": "Yoni Rabinovitch", "link": "https://stackoverflow.com/users/1659476/yoni-rabinovitch"}, "reply_to_user": {"reputation": 165, "user_id": 3034014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39bf8afd2363dc3a0b3f5176dbddabfa?s=128&d=identicon&r=PG&f=1", "display_name": "LtMerlin", "link": "https://stackoverflow.com/users/3034014/ltmerlin"}, "edited": false, "score": 0, "creation_date": 1508403210, "post_id": 46823939, "comment_id": 80599689, "body": "There are many ways to do that. One way is to add Papertrail as your logging service, and then to configure automatic notifications (via email, slack etc.) for Heroku errors."}], "tags": [], "owner": {"reputation": 4347, "user_id": 1659476, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0c1139ab4f069e8c9b02ecc1d44d64b9?s=128&d=identicon&r=PG", "display_name": "Yoni Rabinovitch", "link": "https://stackoverflow.com/users/1659476/yoni-rabinovitch"}, "is_accepted": true, "score": 2, "last_activity_date": 1508394699, "creation_date": 1508394699, "answer_id": 46823939, "question_id": 46820040, "link": "https://stackoverflow.com/questions/46820040/how-to-use-supervisord-on-heroku/46823939#46823939", "title": "How to use supervisord on Heroku", "body": "<p>It is technically possible to have a Heroku dyno run some kind of parent supervisor process, that spawns and automatically restarts child processes. I have done this myself with <a href=\"https://www.npmjs.com/package/forever-monitor\" rel=\"nofollow noreferrer\">forever-monitor</a>. My Procfile had a line for a worker <a href=\"https://devcenter.heroku.com/articles/procfile#process-types-as-templates\" rel=\"nofollow noreferrer\">process type</a> that ran a parent process that spawned and managed child processes.</p>\n\n<p>So yes, this can be done, technically. </p>\n\n<p>However, you need to carefully consider whether this is good for your use-case. An advantage of this approach is that it may enable you to reduce dyno costs (since you will be running child processes on a single dyno instead of on separate dynos). \nBut this is really \"working around\" Heroku best practices (and the <a href=\"https://12factor.net/\" rel=\"nofollow noreferrer\">12 Factor App</a> methodology behind it). </p>\n\n<p>If at all possible, it is probably better if you can allow Heroku to schedule your long running python scripts as separate worker process types, each on its own dyno(s). If you can afford to do that (cost-wise), then Heroku will automatically restart each of your scripts after failure or restart (see <a href=\"https://devcenter.heroku.com/articles/dynos#restarting\" rel=\"nofollow noreferrer\">Restarting</a>). If that is all you need, then you don't need to run your own \"Supervisor\" at all - let Heroku take care of that for you (it does it very well).</p>\n"}], "owner": {"reputation": 165, "user_id": 3034014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39bf8afd2363dc3a0b3f5176dbddabfa?s=128&d=identicon&r=PG&f=1", "display_name": "LtMerlin", "link": "https://stackoverflow.com/users/3034014/ltmerlin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 696, "favorite_count": 0, "accepted_answer_id": 46823939, "answer_count": 1, "score": 2, "last_activity_date": 1565720757, "creation_date": 1508364697, "last_edit_date": 1565720757, "question_id": 46820040, "link": "https://stackoverflow.com/questions/46820040/how-to-use-supervisord-on-heroku", "title": "How to use supervisord on Heroku", "body": "<p>Can supervisor (<a href=\"http://supervisord.org\" rel=\"nofollow noreferrer\">http://supervisord.org</a>) run and manage/monitor several long running python scripts (long-polling SOAP listeners) on Heroku or do i have to use a dyno for each script.\nIf dyno\u2019s for each script can be used, will they restart automatically after failure or restart? (That\u2019s basically what i need, redundancy for those scripts)</p>\n"}, {"tags": ["python", "memory", "optimization"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1508364599, "post_id": 46820001, "comment_id": 80587561, "body": "You could start by not materializing your combinations iterator..."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1508364608, "post_id": 46820001, "comment_id": 80587566, "body": "Why are you building so many lists when iterators work fine?"}, {"owner": {"reputation": 136, "user_id": 7072235, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BY4ip.jpg?s=128&g=1", "display_name": "mohammed awni", "link": "https://stackoverflow.com/users/7072235/mohammed-awni"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1508365231, "post_id": 46820001, "comment_id": 80587750, "body": "@user2357112 ok i will change lists with iterators."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 1, "creation_date": 1508367736, "post_id": 46820001, "comment_id": 80588469, "body": "Try changing the <code>get_subsets()</code> function to <code>return itertools.combinations(arr,m)</code> which will return a (relatively small) generator of the different combinations rather than an actual <code>list</code> containing of all of them."}, {"owner": {"reputation": 136, "user_id": 7072235, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BY4ip.jpg?s=128&g=1", "display_name": "mohammed awni", "link": "https://stackoverflow.com/users/7072235/mohammed-awni"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1508369452, "post_id": 46820001, "comment_id": 80588905, "body": "@martineau using your solution the memory usage problem is solved . But another problem appeared TIME_LIMIT_EXCEEDED . I will try to optimize the code to solve TIME_LIMIT_EXCEEDED problem ."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 1, "creation_date": 1508369868, "post_id": 46820001, "comment_id": 80589012, "body": "Python itself doesn&#39;t have a time limit on how long a script is allowed to run, so it must be whatever else you&#39;re using to run the code that&#39;s producing that error. Regardless, you may need to now figure-out how to optimize your code to run faster given that it now isn&#39;t using too much memory. Another thing to consider would be using a completely different algorithm\u2014yours seems like a very &quot;brute force&quot; approach."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 1, "creation_date": 1508370059, "post_id": 46820001, "comment_id": 80589062, "body": "Profiling your script may help seeing where it&#39;s spending most of its time\u2014to know where to spend your own time optimizing. See <a href=\"https://stackoverflow.com/questions/582336/how-can-you-profile-a-script\"><b><i>How can you profile a script?</i></b></a>"}], "answers": [{"tags": [], "owner": {"reputation": 383, "user_id": 8661716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/T2lhq.jpg?s=128&g=1", "display_name": "LFMekz", "link": "https://stackoverflow.com/users/8661716/lfmekz"}, "is_accepted": false, "score": 1, "last_activity_date": 1508364902, "creation_date": 1508364902, "answer_id": 46820074, "question_id": 46820001, "link": "https://stackoverflow.com/questions/46820001/how-to-optimize-this-code-to-reduce-memory-usage/46820074#46820074", "title": "How to optimize this code to reduce memory usage?", "body": "<p>One way might be instead of using lists. Use generators. They are iterable too. See: <a href=\"http://letstalkdata.com/2015/05/how-to-use-python-generators-to-save-memory/\" rel=\"nofollow noreferrer\">http://letstalkdata.com/2015/05/how-to-use-python-generators-to-save-memory/</a></p>\n"}], "owner": {"reputation": 136, "user_id": 7072235, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BY4ip.jpg?s=128&g=1", "display_name": "mohammed awni", "link": "https://stackoverflow.com/users/7072235/mohammed-awni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1104, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1508367331, "creation_date": 1508364453, "last_edit_date": 1508367331, "question_id": 46820001, "link": "https://stackoverflow.com/questions/46820001/how-to-optimize-this-code-to-reduce-memory-usage", "title": "How to optimize this code to reduce memory usage?", "body": "<p>My below code uses more than 300000 KB using about(30000 input element) and there is a limit per memory usage(256 MB), so is there any way to optimize it?</p>\n\n<pre><code>import itertools\ndef get_subsets(arr,m) :\n    return list(itertools.combinations(arr,m))\ndef _9(string) :\n    count =0\n    for i in range(len(string)-1 , -1 ,-1) :\n        if string[i] != '9' :\n            break\n        count += 1\n    return count\nif __name__ == \"__main__\" :\n    length = int(input())\n    arr = [int(x) for x in input().strip().split()]\n    pairs = get_subsets(arr,2)\n    max_9 = [_9(str(x[0]+x[1])) for x in pairs]\n    max_9_0 = max(max_9)  \n    print(max_9_0,max_9.count(max_9_0))\n</code></pre>\n\n<p><strong>The problem is:</strong>\nLet's define the quality of the price as the number of nines at its end (the number of rightmost digits that are equal to 9). For example, numbers 2999 and 123912391999 both have the quality 3, while number 952 has quality 0.</p>\n\n<p>There are n products with distinct prices t1,\u2009t2,\u2009...,\u2009tn.</p>\n\n<p>You're going to buy exactly two products (they must be different). Please find the maximum possible quality of the total price of two chosen products. Also, find the number of ways to choose two different products and get that maximum possible quality of the total price.</p>\n"}, {"tags": ["python", "python-2.7"], "comments": [{"owner": {"reputation": 536, "user_id": 8767168, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/Tthwq.jpg?s=128&g=1", "display_name": "Austin A", "link": "https://stackoverflow.com/users/8767168/austin-a"}, "edited": false, "score": 0, "creation_date": 1508364408, "post_id": 46819982, "comment_id": 80587483, "body": "I&#39;m not sure what you mean by comparing words with each other as &quot;too high&quot; or &quot;too low&quot;"}, {"owner": {"reputation": 8411, "user_id": 2399775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29a2523b23d09e0bfc15d3a77e505271?s=128&d=identicon&r=PG", "display_name": "wpercy", "link": "https://stackoverflow.com/users/2399775/wpercy"}, "edited": false, "score": 0, "creation_date": 1508364497, "post_id": 46819982, "comment_id": 80587521, "body": "Don&#39;t put your code in images"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8798211"}, "edited": false, "score": 0, "creation_date": 1508364586, "post_id": 46819982, "comment_id": 80587556, "body": "Hi Austin. I understand how that can be confusing. By \u201ctoo high,\u201d I mean the word is past the correct word in the alphabet. So if the correct word (the one I\u2019m trying to guess) is \u201ccat\u201d and the user guesses \u201capple,\u201d the program would return \u201ctoo high,\u201d because \u201cc\u201d comes after \u201ca\u201d and is too \u201chigh.\u201d Does that make more sense?"}, {"owner": {"reputation": 2933, "user_id": 3434388, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/uZ9Hf.jpg?s=128&g=1", "display_name": "Danielle M.", "link": "https://stackoverflow.com/users/3434388/danielle-m"}, "edited": false, "score": 0, "creation_date": 1508364633, "post_id": 46819982, "comment_id": 80587571, "body": "Forget python and programming at all for a second - go back to plain old english. What exactly do you want your application to do? Why is apple less than dog, why is pear more than dog? Try to break down your goal into a series of very discrete steps. Why is dog more than apple, but less than pear?"}, {"owner": {"reputation": 1422, "user_id": 8373129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fa80a46b614235fc4df519ca1d0b973?s=128&d=identicon&r=PG&f=1", "display_name": "ACVM", "link": "https://stackoverflow.com/users/8373129/acvm"}, "edited": false, "score": 0, "creation_date": 1508364739, "post_id": 46819982, "comment_id": 80587604, "body": "In python, you can grab the ASCII value of a character by using <code>ord()</code>."}, {"owner": {"reputation": 4810, "user_id": 3844376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fbad3d6f74043c47c9dc4f16714edfa?s=128&d=identicon&r=PG&f=1", "display_name": "viddik13", "link": "https://stackoverflow.com/users/3844376/viddik13"}, "edited": false, "score": 0, "creation_date": 1508370266, "post_id": 46819982, "comment_id": 80589113, "body": "I doubt that <code>guess = int(raw_input(&#39;Enter a word&#39;)</code> will produce expected results - you&#39;ll probably get an error here most of the time as the interpreter will try to convert the word into integer. Check <a href=\"https://docs.python.org/2/library/functions.html#int\" rel=\"nofollow noreferrer\">int() doc</a> for more details."}, {"owner": {"reputation": 2620, "user_id": 899950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dbb03e33d3960bf7834721592292103?s=128&d=identicon&r=PG", "display_name": "Lawrence D&#39;Oliveiro", "link": "https://stackoverflow.com/users/899950/lawrence-doliveiro"}, "edited": false, "score": 0, "creation_date": 1508378762, "post_id": 46819982, "comment_id": 80591071, "body": "Why are you using Python 2.7?"}], "answers": [{"comments": [{"owner": {"reputation": 718, "user_id": 2990052, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ttvup.jpg?s=128&g=1", "display_name": "PeterH", "link": "https://stackoverflow.com/users/2990052/peterh"}, "edited": false, "score": 0, "creation_date": 1508366488, "post_id": 46820281, "comment_id": 80588118, "body": "There is an edge case in your code that even if they guess the correct word on the last loop they will still get the &quot;sorry&quot; message. Easy fix is to change <code>if lives == 0</code> to <code>if lives == 0 and guess != correct</code>"}], "tags": [], "owner": {"reputation": 533, "user_id": 8786919, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/58abf3624c1b2eab24b8c46bc2217cf6?s=128&d=identicon&r=PG&f=1", "display_name": "OmO Walker", "link": "https://stackoverflow.com/users/8786919/omo-walker"}, "is_accepted": false, "score": 2, "last_activity_date": 1508366600, "last_edit_date": 1508366600, "creation_date": 1508366193, "answer_id": 46820281, "question_id": 46819982, "link": "https://stackoverflow.com/questions/46819982/python-2-7-word-guessing/46820281#46820281", "title": "Python 2.7 Word Guessing", "body": "<p>there is no need for 2 loops. You can use the <strong>AND</strong> this will stop your loop if a person guessed the word right or if that person run out of lives. Also there is no need to say <strong>int()</strong> for your input as you only input a word. If the word is \"too low\" you print it decrease lives and enter a new word, similarly for \"too high\". You stop when your lives are at 0 or you guessed the word</p>\n\n<pre><code>guess = raw_input('Guess a word: ')\ncorrect = 'dog'\nlives = 50\n\nwhile guess != correct and lives != 0:\n    if guess &lt; correct:\n        print 'Too low'\n        lives -= 1\n        guess = raw_input('Enter a word: ')\n    else:\n        print 'Too high'\n        lives -= 1\n        guess = raw_input('Enter a word: ')\n\n\nif lives == 0 and guess != correct:\n    print \"Sorry. My word was\", correct,\". Better luck next time!\"\nelse:\n    print \"You finally got it!\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 533, "user_id": 8786919, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/58abf3624c1b2eab24b8c46bc2217cf6?s=128&d=identicon&r=PG&f=1", "display_name": "OmO Walker", "link": "https://stackoverflow.com/users/8786919/omo-walker"}, "edited": false, "score": 0, "creation_date": 1508368072, "post_id": 46820441, "comment_id": 80588553, "body": "Definitely a better code, all I did was play with @hashicode code, therefore it&#39;s easier for him to understand. I really like the formating in your code, makes things look nice"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8798211"}, "edited": false, "score": 0, "creation_date": 1508375374, "post_id": 46820441, "comment_id": 80590309, "body": "Thank you all so much, that definitely makes more sense. Is there anyway to track how many \u201clives\u201d I\u2019ve used?"}, {"owner": {"reputation": 718, "user_id": 2990052, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ttvup.jpg?s=128&g=1", "display_name": "PeterH", "link": "https://stackoverflow.com/users/2990052/peterh"}, "edited": false, "score": 0, "creation_date": 1508439040, "post_id": 46820441, "comment_id": 80621303, "body": "the <code>lives</code> variable is keeping track of how many lives you have left. Every time the user is offered a guess one is subtracted from the variable until <code>lives</code> is &lt;= 0. If you want the user to be able to see how many lives they have left you can add <code>print &quot;{} lives remaining&quot;.format()</code> before the <code>guess = raw_input(&#39;Guess a word: &#39;).lower()</code> line. I changed my answer to reflect this."}], "tags": [], "owner": {"reputation": 718, "user_id": 2990052, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ttvup.jpg?s=128&g=1", "display_name": "PeterH", "link": "https://stackoverflow.com/users/2990052/peterh"}, "is_accepted": false, "score": 2, "last_activity_date": 1508439261, "last_edit_date": 1508439261, "creation_date": 1508367325, "answer_id": 46820441, "question_id": 46819982, "link": "https://stackoverflow.com/questions/46819982/python-2-7-word-guessing/46820441#46820441", "title": "Python 2.7 Word Guessing", "body": "<p>I like <a href=\"https://stackoverflow.com/a/46820281/2990052\">OmO Walker's answer</a> to the question. Here is a slight variation of OmO's code.</p>\n\n<pre><code># I like adding a .lower() so the person doesn't have to worry about the case matching.\ncorrect = 'dog'.lower()\nlives = 2\n\nguess = None\n\n# I like doing a &gt; check not an != because stuff happens and if lives become &lt; 0 you\n# get stuck in an infinite loop. BUT in some cases comparisons &lt;, &gt; can be slower than ==.\n# So if speed is a problem stick to ==\nwhile not guess == correct and not lives &lt;= 0:\n    # Moving this here makes it so there are fewer places you have to get input.\n\n    # Prints how many lives the user has left.\n    print \"{} lives remaining\".format()\n    guess = raw_input('Guess a word: ').lower()\n\n    if guess &lt; correct:\n        print '{} was too low'.format(guess)\n    elif guess &gt; correct:\n        print '{} was too high'.format(guess)\n    lives -= 1\n\nif not lives &gt; 0 and not guess == correct:\n    # I like using the format string method instead of adding strings or using ',' in a print. It is more reliable if\n    # the variable you are trying to print is not a string.\n    print \"Sorry. My word was {}. Better luck next time!\".format(correct)\n\n# Makes sure the guess is really right before giving the confirmation\nelif guess == correct:\n    print \"You got it! The word was {}\".format(correct)\n\n# This is an added safety that will be triggered if some how the other conditions fall through. Its better to\n# have an error thrown than have a program silently break.\nelse:\n    print \"ERROR. Something is broken\"\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8798211"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1508439261, "creation_date": 1508364285, "last_edit_date": 1508364514, "question_id": 46819982, "link": "https://stackoverflow.com/questions/46819982/python-2-7-word-guessing", "title": "Python 2.7 Word Guessing", "body": "<p>I\u2019m trying to write a guessing word program in Python 2.7. The user has 50 chances to correctly guess the word. I\u2019ve already written a function that generates a random word from a list of words. The user needs to correctly guess the word.</p>\n\n<p>For example, if the correct word is \u201cdog\u201d and the user guesses \u201capple,\u201d the program will return \u201ctoo low\u201d and the user will then guess again. If the user guesses \u201cpear,\u201d the program will return \u201ctoo high.\u201d </p>\n\n<p>I don\u2019t really know how to start writing this piece of code. I tried using a while loop, but I don\u2019t know where to go from here. Thank you all in advance. </p>\n\n<p>Here\u2019s what I have so far:</p>\n\n<p><strong>Note: \u2018correct\u2019 is the word the user is trying to guess; guess is the word the user guessed</strong></p>\n\n<pre><code>while guess != 'correct':\n    if guess &lt; correct:\n        print 'Too low'\n        guess = int(raw_input('Enter a word')\n    elif guess &gt; correct:\n        print 'Too high'\n        guess = int(raw_input('Enter a word')\n    else:\n        print 'You finally got it!'\n        break\n    print\n\nwhile tries &lt; 50:\n    guess = raw_input('Guess a word')\n    if guess not in word: \n        print \"Sorry, try again.\"\n    else:\n        print 'Good job!'\nelse:\n    print \"Sorry. My word was \", word, \". Better luck next time!\"\n</code></pre>\n"}, {"tags": ["python", "pyinstaller"], "comments": [{"owner": {"reputation": 3670, "user_id": 868044, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/tQcbU.jpg?s=128&g=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/868044/dan"}, "edited": false, "score": 0, "creation_date": 1508364491, "post_id": 46819980, "comment_id": 80587519, "body": "To reference files in code you need to use <code>sys._MEIPASS</code> as the base path when using pyinstaller - this is a common source of bugs."}, {"owner": {"reputation": 97, "user_id": 8752740, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0c7d1e9eaa46164f3f2330c8ba0d5a5e?s=128&d=identicon&r=PG&f=1", "display_name": "CDVC23", "link": "https://stackoverflow.com/users/8752740/cdvc23"}, "reply_to_user": {"reputation": 3670, "user_id": 868044, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/tQcbU.jpg?s=128&g=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/868044/dan"}, "edited": false, "score": 0, "creation_date": 1508410937, "post_id": 46819980, "comment_id": 80604011, "body": "I tried using your method, i do not have files to add between, everything needed is in my main.py . Now im getting : site-package\\PyInstaller\\loader\\pyiboot01_bootstrap.py line 25, ModuleNotFindError : no module named &#39;os&#39;"}, {"owner": {"reputation": 3670, "user_id": 868044, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/tQcbU.jpg?s=128&g=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/868044/dan"}, "edited": false, "score": 0, "creation_date": 1508416391, "post_id": 46819980, "comment_id": 80607187, "body": "Did you import os?"}, {"owner": {"reputation": 97, "user_id": 8752740, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0c7d1e9eaa46164f3f2330c8ba0d5a5e?s=128&d=identicon&r=PG&f=1", "display_name": "CDVC23", "link": "https://stackoverflow.com/users/8752740/cdvc23"}, "reply_to_user": {"reputation": 3670, "user_id": 868044, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/tQcbU.jpg?s=128&g=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/868044/dan"}, "edited": false, "score": 0, "creation_date": 1508426981, "post_id": 46819980, "comment_id": 80614623, "body": "No, my program doesnt use os, thats why i tryed to add it to the spec file. its the pyiboot01_boostrap.py file from pyinstaller who tries to import it but fails : File &quot;site-packages\\PyInstaller\\loader\\pyiboot01_bootstrap.py&quot;, line 25, in &lt;module&gt; ModuleNotFoundError: No module named &#39;os&#39;"}, {"owner": {"reputation": 3670, "user_id": 868044, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/tQcbU.jpg?s=128&g=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/868044/dan"}, "edited": false, "score": 0, "creation_date": 1508430571, "post_id": 46819980, "comment_id": 80616898, "body": "Did that module import os?"}, {"owner": {"reputation": 97, "user_id": 8752740, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0c7d1e9eaa46164f3f2330c8ba0d5a5e?s=128&d=identicon&r=PG&f=1", "display_name": "CDVC23", "link": "https://stackoverflow.com/users/8752740/cdvc23"}, "reply_to_user": {"reputation": 3670, "user_id": 868044, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/tQcbU.jpg?s=128&g=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/868044/dan"}, "edited": false, "score": 0, "creation_date": 1508433557, "post_id": 46819980, "comment_id": 80618459, "body": "Yes it does, its a part of pyinstaller code."}, {"owner": {"reputation": 2946, "user_id": 2038801, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/WVnDF.jpg?s=128&g=1", "display_name": "The4thIceman", "link": "https://stackoverflow.com/users/2038801/the4thiceman"}, "edited": false, "score": 0, "creation_date": 1508576083, "post_id": 46819980, "comment_id": 80670630, "body": "I answered a similar question here: <a href=\"https://stackoverflow.com/questions/46499068/pyinstaller-not-loading-dll/46679099#46679099\" title=\"pyinstaller not loading dll\">stackoverflow.com/questions/46499068/&hellip;</a>. It could be of use to you."}, {"owner": {"reputation": 97, "user_id": 8752740, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0c7d1e9eaa46164f3f2330c8ba0d5a5e?s=128&d=identicon&r=PG&f=1", "display_name": "CDVC23", "link": "https://stackoverflow.com/users/8752740/cdvc23"}, "edited": false, "score": 0, "creation_date": 1509208017, "post_id": 46819980, "comment_id": 80930393, "body": "Fixed using python 3.4 instead of 3.6"}], "answers": [{"comments": [{"owner": {"reputation": 97, "user_id": 8752740, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0c7d1e9eaa46164f3f2330c8ba0d5a5e?s=128&d=identicon&r=PG&f=1", "display_name": "CDVC23", "link": "https://stackoverflow.com/users/8752740/cdvc23"}, "edited": false, "score": 1, "creation_date": 1508410725, "post_id": 46820036, "comment_id": 80603889, "body": "I tried with and without --onefile. I keep getting an error message if i compile directly with these commands : site-package\\PyInstaller\\loader\\pyiboot01_bootstrap.py line 25, ModuleNotFindError : no module named &#39;os&#39;"}, {"owner": {"reputation": 3670, "user_id": 868044, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/tQcbU.jpg?s=128&g=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/868044/dan"}, "edited": false, "score": 0, "creation_date": 1508416429, "post_id": 46820036, "comment_id": 80607208, "body": "Are you trying to use os without importing it?"}, {"owner": {"reputation": 97, "user_id": 8752740, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0c7d1e9eaa46164f3f2330c8ba0d5a5e?s=128&d=identicon&r=PG&f=1", "display_name": "CDVC23", "link": "https://stackoverflow.com/users/8752740/cdvc23"}, "edited": false, "score": 1, "creation_date": 1508418389, "post_id": 46820036, "comment_id": 80608472, "body": "Nop im not using os in my code, its the pyiboot01_boostrap.py file from pyinstaller who tries to import it but fails : File &quot;site-packages\\PyInstaller\\loader\\pyiboot01_bootstrap.py&quot;, line 25, in &lt;module&gt; ModuleNotFoundError: No module named &#39;os&#39;"}, {"owner": {"reputation": 677, "user_id": 8779237, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5e7a79f09b0a155e41c88f16525d9f35?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Khan", "link": "https://stackoverflow.com/users/8779237/muhammad-khan"}, "edited": false, "score": 0, "creation_date": 1508488802, "post_id": 46820036, "comment_id": 80638220, "body": "Have you tried compiling a basic application that just prints <code>Hello, World!</code> to check if pyinstaller works on your computer?"}], "tags": [], "owner": {"reputation": 677, "user_id": 8779237, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5e7a79f09b0a155e41c88f16525d9f35?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Khan", "link": "https://stackoverflow.com/users/8779237/muhammad-khan"}, "is_accepted": false, "score": 0, "last_activity_date": 1513600315, "last_edit_date": 1513600315, "creation_date": 1508364671, "answer_id": 46820036, "question_id": 46819980, "link": "https://stackoverflow.com/questions/46819980/pyinstaller-exe-not-starting-properly/46820036#46820036", "title": "pyinstaller .exe not starting properly", "body": "<p>How did you tell pyinstaller to compile the <code>.py</code> file?</p>\n\n<p>If you installed pyinstaller with pip, try running this is the command prompt on the same directory as the file. </p>\n\n<p><code>pyinstaller mypythonapp.py</code></p>\n\n<p>The <code>.exe</code> will be in a new directory called <code>dist</code>. To get the exe as one file use the <code>--onefile</code> parameter in the command prompt when compiling. </p>\n"}], "owner": {"reputation": 97, "user_id": 8752740, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0c7d1e9eaa46164f3f2330c8ba0d5a5e?s=128&d=identicon&r=PG&f=1", "display_name": "CDVC23", "link": "https://stackoverflow.com/users/8752740/cdvc23"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1454, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1513600315, "creation_date": 1508364275, "question_id": 46819980, "link": "https://stackoverflow.com/questions/46819980/pyinstaller-exe-not-starting-properly", "title": "pyinstaller .exe not starting properly", "body": "<p>Hello Im learning python for my studies.\nRight now im trying to use pyinstaller to get an .exe file since its easier to share. </p>\n\n<p>My small program use tkinter, numpy and matplotlib but when i try to start it, nothing happens, its quite weird because I get no error in the compiling process :</p>\n\n<pre><code>    pyinstaller main.spec\n531 INFO: PyInstaller: 3.4.dev0+133d18156\n531 INFO: Python: 3.6.2\n531 INFO: Platform: Windows-10-10.0.15063-SP0\n531 INFO: UPX is not available.\n531 INFO: Extending PYTHONPATH with paths\n['C:\\\\Users\\\\Charles\\\\eclipse-workspace\\\\algo2\\\\src',\n 'C:\\\\Users\\\\Charles\\\\eclipse-workspace\\\\algo2\\\\src']\n531 INFO: checking Analysis\n531 INFO: Building Analysis because out00-Analysis.toc is non existent\n531 INFO: Initializing module dependency graph...\n546 INFO: Initializing module graph hooks...\n578 INFO: Analyzing base_library.zip ...\n4672 INFO: Analyzing hidden import 'os'\n4719 INFO: Analyzing hidden import 'stat'\n4719 INFO: Analyzing hidden import 'ntpath'\n4781 INFO: Analyzing hidden import 'genericpath'\n4797 INFO: running Analysis out00-Analysis.toc\n4812 INFO: Adding Microsoft.Windows.Common-Controls to dependent assemblies of final executable\n  required by c:\\users\\charles\\anaconda3\\python.exe\n5906 INFO: Caching module hooks...\n5922 INFO: Analyzing main.py\n5937 INFO: Loading module hooks...\n5937 INFO: Loading module hook \"hook-encodings.py\"...\n6078 INFO: Looking for ctypes DLLs\n6078 INFO: Analyzing run-time hooks ...\n6078 INFO: Looking for dynamic libraries\n6078 INFO: Looking for eggs\n6078 INFO: Using Python library c:\\users\\charles\\anaconda3\\python36.dll\n6078 INFO: Found binding redirects:\n[]\n6109 INFO: Graph cross-reference written to C:\\Users\\Charles\\eclipse-workspace\\algo2\\src\\build\\main\\xref-main.html\n6141 INFO: checking PYZ\n6141 INFO: Building PYZ because out00-PYZ.toc is non existent\n6141 INFO: Building PYZ (ZlibArchive) C:\\Users\\Charles\\eclipse-workspace\\algo2\\src\\build\\main\\out00-PYZ.pyz\n6344 INFO: Building PYZ (ZlibArchive) C:\\Users\\Charles\\eclipse-workspace\\algo2\\src\\build\\main\\out00-PYZ.pyz completed successfully.\n6344 INFO: checking PKG\n6344 INFO: Building PKG because out00-PKG.toc is non existent\n6344 INFO: Building PKG (CArchive) out00-PKG.pkg\n6406 INFO: Building PKG (CArchive) out00-PKG.pkg completed successfully.\n6422 INFO: Bootloader c:\\users\\charles\\anaconda3\\lib\\site-packages\\PyInstaller\\bootloader\\Windows-64bit\\run_d.exe\n6422 INFO: checking EXE\n6422 INFO: Building EXE because out00-EXE.toc is non existent\n6422 INFO: Building EXE from out00-EXE.toc\n6422 INFO: Appending archive to EXE C:\\Users\\Charles\\eclipse-workspace\\algo2\\src\\build\\main\\main.exe\n6516 INFO: Building EXE from out00-EXE.toc completed successfully.\n6531 INFO: checking COLLECT\n6531 INFO: Building COLLECT because out00-COLLECT.toc is non existent\n6547 INFO: Building COLLECT out00-COLLECT.toc\n7359 INFO: Building COLLECT out00-COLLECT.toc completed successfully.\n</code></pre>\n\n<p>So i tried to compile with debug, i do not see something wrong :</p>\n\n<pre><code>main.exe&gt;log.txt\n[3912] PyInstaller Bootloader 3.x\n[3912] LOADER: executable is C:\\Users\\Charles\\eclipse-workspace\\algo2\\src\\dist\\main\\main.exe\n[3912] LOADER: homepath is C:\\Users\\Charles\\eclipse-workspace\\algo2\\src\\dist\\main\n[3912] LOADER: _MEIPASS2 is NULL\n[3912] LOADER: archivename is C:\\Users\\Charles\\eclipse-workspace\\algo2\\src\\dist\\main\\main.exe\n[3912] LOADER: No need to extract files to run; setting extractionpath to homepath\n[3912] LOADER: SetDllDirectory(C:\\Users\\Charles\\eclipse-workspace\\algo2\\src\\dist\\main)\n[3912] LOADER: Already in the child - running user's code.\n[3912] LOADER: Python library: C:\\Users\\Charles\\eclipse-workspace\\algo2\\src\\dist\\main\\python36.dll\n[3912] LOADER: Loaded functions from Python library.\n[3912] LOADER: Manipulating environment (sys.path, sys.prefix)\n[3912] LOADER: Pre-init sys.path is C:\\Users\\Charles\\eclipse-workspace\\algo2\\src\\dist\\main\\base_library.zip;C:\\Users\\Charles\\eclipse-workspace\\algo2\\src\\dist\\main\n[3912] LOADER: sys.prefix is C:\\Users\\Charles\\eclipse-workspace\\algo2\\src\\dist\\main\n[3912] LOADER: Setting runtime options\n[3912] LOADER: Initializing python\n[3912] LOADER: Overriding Python's sys.path\n[3912] LOADER: Post-init sys.path is C:\\Users\\Charles\\eclipse-workspace\\algo2\\src\\dist\\main\\base_library.zip;C:\\Users\\Charles\\eclipse-workspace\\algo2\\src\\dist\\main\n[3912] LOADER: Setting sys.argv\n[3912] LOADER: setting sys._MEIPASS\n[3912] LOADER: importing modules from CArchive\n[3912] LOADER: extracted struct\n[3912] LOADER: callfunction returned...\n[3912] LOADER: extracted pyimod01_os_path\n[3912] LOADER: callfunction returned...\n[3912] LOADER: extracted pyimod02_archive\n[3912] LOADER: callfunction returned...\n[3912] LOADER: extracted pyimod03_importers\n[3912] LOADER: callfunction returned...\n[3912] LOADER: Installing PYZ archive with Python modules.\n[3912] LOADER: PYZ archive: out00-PYZ.pyz\n[3912] LOADER: Running pyiboot01_bootstrap.py\n[3912] LOADER: OK.\n[3912] LOADER: Cleaning up Python interpreter.\n</code></pre>\n\n<p>Here my .spec file :</p>\n\n<pre><code># -*- mode: python -*-\nimport sys\n\nblock_cipher = None\n\n\na = Analysis(['main.py'],\n             pathex=['C:\\\\Users\\\\Charles\\\\eclipse-workspace\\\\algo2\\\\src'],\n             binaries=[],\n             datas=[],\n             hiddenimports=['os', 'stat', 'ntpath', 'genericpath'],\n             hookspath=[],\n             runtime_hooks=[],\n             excludes=[],\n             win_no_prefer_redirects=False,\n             win_private_assemblies=False,\n             cipher=block_cipher\n             )\npyz = PYZ(a.pure, a.zipped_data,\n             cipher=block_cipher\n             )\nexe = EXE(pyz,\n          a.binaries + [('msvcp100.dll', 'C:\\\\Windows\\\\System32\\\\msvcp100.dll', 'BINARY'),\n                        ('msvcr100.dll', 'C:\\\\Windows\\\\System32\\\\msvcr100.dll', 'BINARY')]\n          if sys.platform == 'win32' else a.binaries,\n          exclude_binaries=True,\n          name='main',\n          debug=False,\n          strip=False,\n          upx=False,\n          console=False )\ncoll = COLLECT(exe,\n               a.binaries,\n               a.zipfiles,\n               a.datas,\n               strip=False,\n               upx=False,\n               name='main')\n</code></pre>\n\n<p>My program works without problem if i run it with the python interpreter.\nTried to start the .exe with and without console, nothing happens.</p>\n\n<p>Any idea ?</p>\n\n<p>Thanks</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "pandas", "dataframe", "vectorization"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2398046"}, "edited": false, "score": 0, "creation_date": 1508364643, "post_id": 46819978, "comment_id": 80587575, "body": "I prefer the first one. You?"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1508364686, "post_id": 46819978, "comment_id": 80587587, "body": "@dirtysocks45 Same, it&#39;s much cleaner than the second."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2398046"}, "edited": false, "score": 0, "creation_date": 1508364954, "post_id": 46819978, "comment_id": 80587659, "body": "Do you mind checking my other question on vectorization? My last comment on the accepted answer has a question."}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 1, "creation_date": 1508365225, "post_id": 46819978, "comment_id": 80587748, "body": "@dirtysocks45 I took a look at piR&#39;s solution, but it went over my head. I&#39;ll let him handle it. Sorry about that."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2398046"}, "edited": false, "score": 0, "creation_date": 1508365759, "post_id": 46819978, "comment_id": 80587906, "body": "He is the Pandas and Numpy God"}], "tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 2, "last_activity_date": 1508364274, "creation_date": 1508364274, "answer_id": 46819978, "question_id": 46819962, "link": "https://stackoverflow.com/questions/46819962/how-do-you-set-all-values-in-a-pandas-data-frame-at-once-if-you-multiply-two-oth/46819978#46819978", "title": "How do you set all values in a pandas data frame at once if you multiply two other data frames to produce it?", "body": "<p>Convert to <code>np.array</code> using <code>.values</code> and perform element-wise multiplication.</p>\n\n<pre><code>df = pd.DataFrame(df1.values * df2.values,\n         index=df1.index, columns=\"MY NAME IS SLIM_SHADY\".split())\nprint(df)\n            MY  NAME  IS  SLIM_SHADY\nDate                                \n2011-01-10   4     4   4           4\n2011-01-13   4     4   4           4\n2011-01-13   4     4   4           4\n2011-01-26   4     4   4           4\n</code></pre>\n\n<hr>\n\n<p>Another method would be to rename indexes, and then call <code>df.mul</code>:</p>\n\n<pre><code>df2.columns = df1.columns  # could also add df2.index = df1.index for security\ndf = df1.mul(df2)\ndf.columns=\"MY NAME IS SLIM_SHADY\".split()\n\nprint(df)\n            MY  NAME  IS  SLIM_SHADY\nDate                                \n2011-01-10   4     4   4           4\n2011-01-13   4     4   4           4\n2011-01-13   4     4   4           4\n2011-01-26   4     4   4           4\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user2398046"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 46819978, "answer_count": 1, "score": 0, "last_activity_date": 1508364274, "creation_date": 1508364160, "question_id": 46819962, "link": "https://stackoverflow.com/questions/46819962/how-do-you-set-all-values-in-a-pandas-data-frame-at-once-if-you-multiply-two-oth", "title": "How do you set all values in a pandas data frame at once if you multiply two other data frames to produce it?", "body": "<p>I want to take two data frames and multiply them together to make a third one. </p>\n\n<p>Say I have </p>\n\n<pre><code>            HI   BYE  HE  HER   \nDate                                                   \n2011-01-10  2     2    2   2 \n2011-01-13  2     2    2   2    \n2011-01-13  2     2    2   2   \n2011-01-26  2     2    2   2\n</code></pre>\n\n<p>and </p>\n\n<pre><code>            BRO  CHICK DUDE MAN   \nDate                                                   \n2011-01-10  2     2    2     2 \n2011-01-13  2     2    2     2    \n2011-01-13  2     2    2     2   \n2011-01-26  2     2    2     2\n</code></pre>\n\n<p>and I want, </p>\n\n<pre><code>            MY  NAME  IS    SLIM_SHADY   \nDate                                                   \n2011-01-10  4     4    4     4 \n2011-01-13  4     4    4     4    \n2011-01-13  4     4    4     4   \n2011-01-26  4     4    4     4\n</code></pre>\n\n<p>How do I do this in one line?</p>\n"}, {"tags": ["javascript", "python", "youtube", "youtube-api", "youtube-data-api"], "answers": [{"tags": [], "owner": {"reputation": 331, "user_id": 993047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1c961d41ca31f63a66b3b8c5515370a?s=128&d=identicon&r=PG", "display_name": "Codr", "link": "https://stackoverflow.com/users/993047/codr"}, "is_accepted": false, "score": 3, "last_activity_date": 1516089286, "creation_date": 1516089286, "answer_id": 48276412, "question_id": 46819958, "link": "https://stackoverflow.com/questions/46819958/extract-youtube-stats-for-nerds-through-an-api/48276412#48276412", "title": "Extract youtube stats for nerds through an API", "body": "<p>Check the <a href=\"https://developers.google.com/youtube/v3/docs/videos\" rel=\"nofollow noreferrer\">Resource representation of Videos</a>, if you're looking for stats for nerds. You can get the following data:</p>\n\n<pre><code>{\n  \"kind\": \"youtube#video\",\n  \"etag\": etag,\n  \"id\": string,\n  ...\n  \"fileDetails\": {\n    \"fileName\": string,\n    \"fileSize\": unsigned long,\n    \"fileType\": string,\n    \"container\": string,\n    \"videoStreams\": [\n      {\n        \"widthPixels\": unsigned integer,\n        \"heightPixels\": unsigned integer,\n        \"frameRateFps\": double,\n        \"aspectRatio\": double,\n        \"codec\": string,\n        \"bitrateBps\": unsigned long,\n        \"rotation\": string,\n        \"vendor\": string\n      }\n    ],\n    \"audioStreams\": [\n      {\n        \"channelCount\": unsigned integer,\n        \"codec\": string,\n        \"bitrateBps\": unsigned long,\n        \"vendor\": string\n      }\n    ],\n    \"durationMs\": unsigned long,\n    \"bitrateBps\": unsigned long,\n    \"creationTime\": string\n  },\n  \"processingDetails\": {\n    \"processingStatus\": string,\n    \"processingProgress\": {\n      \"partsTotal\": unsigned long,\n      \"partsProcessed\": unsigned long,\n      \"timeLeftMs\": unsigned long\n    },\n    \"processingFailureReason\": string,\n    \"fileDetailsAvailability\": string,\n    \"processingIssuesAvailability\": string,\n    \"tagSuggestionsAvailability\": string,\n    \"editorSuggestionsAvailability\": string,\n    \"thumbnailsAvailability\": string\n  },\n  ...\n}\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 3296141, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/5773e7e35f57c7d56035fd0888c24cd6?s=128&d=identicon&r=PG&f=1", "display_name": "pikapika", "link": "https://stackoverflow.com/users/3296141/pikapika"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1333, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1525112080, "creation_date": 1508364132, "last_edit_date": 1508374653, "question_id": 46819958, "link": "https://stackoverflow.com/questions/46819958/extract-youtube-stats-for-nerds-through-an-api", "title": "Extract youtube stats for nerds through an API", "body": "<p>Is there any available youtube API to get stats for nerds?</p>\n\n<p><a href=\"https://i.stack.imgur.com/RYIOn.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RYIOn.jpg\" alt=\"stats for nerds data\"></a></p>\n\n<p>I have looked around for statistics but they point out to viewCount, likeCount etc. I am particularly looking for stats for nerds data available on right click of a video.</p>\n\n<pre><code>   URL: https://www.googleapis.com/youtube/v3/videos?id=7lCDEYXw3mM&amp;key=YOUR_API_KEY\n     &amp;part=snippet,statistics&amp;fields=items(id,snippet,statistics)\n\nDescription: This example adds the fields parameter to remove all\n             kind and etag properties from the API response.\n\nAPI response:\n\n{\n \"videos\": [\n  {\n   \"id\": \"7lCDEYXw3mM\",\n   \"snippet\": {\n    \"publishedAt\": \"2012-06-20T22:45:24.000Z\",\n    \"channelId\": \"UC_x5XG1OV2P6uZZ5FSM9Ttw\",\n    \"title\": \"Google I/O 101: Q&amp;A On Using Google APIs\",\n    \"description\": \"Antonio Fuentes speaks to us and takes questions on working with Google APIs and OAuth 2.0.\",\n    \"thumbnails\": {\n     \"default\": {\n      \"url\": \"https://i.ytimg.com/vi/7lCDEYXw3mM/default.jpg\"\n     },\n     \"medium\": {\n      \"url\": \"https://i.ytimg.com/vi/7lCDEYXw3mM/mqdefault.jpg\"\n     },\n     \"high\": {\n      \"url\": \"https://i.ytimg.com/vi/7lCDEYXw3mM/hqdefault.jpg\"\n     }\n    },\n    \"categoryId\": \"28\"\n   },\n   \"statistics\": {\n    \"viewCount\": \"3057\",\n    \"likeCount\": \"25\",\n    \"dislikeCount\": \"0\",\n    \"favoriteCount\": \"17\",\n    \"commentCount\": \"12\"\n   }\n  }\n ]\n}\n</code></pre>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 12837, "user_id": 2184364, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fe15cfa3ec22be57f1762ba905c8eb70?s=128&d=identicon&r=PG", "display_name": "Julien Spronck", "link": "https://stackoverflow.com/users/2184364/julien-spronck"}, "edited": false, "score": 1, "creation_date": 1508364155, "post_id": 46819942, "comment_id": 80587384, "body": "<code>if shape.lower() == &quot;cube&quot;: ...</code>"}], "answers": [{"tags": [], "owner": {"reputation": 533, "user_id": 8786919, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/58abf3624c1b2eab24b8c46bc2217cf6?s=128&d=identicon&r=PG&f=1", "display_name": "OmO Walker", "link": "https://stackoverflow.com/users/8786919/omo-walker"}, "is_accepted": true, "score": 2, "last_activity_date": 1508364159, "creation_date": 1508364159, "answer_id": 46819961, "question_id": 46819942, "link": "https://stackoverflow.com/questions/46819942/i-want-the-input-to-be-validated-no-matter-the-upper-or-lowercase/46819961#46819961", "title": "I want the input to be validated no matter the upper or lowercase", "body": "<p>you can use the shape.lower() it converts a string to lower case.</p>\n\n<pre><code>while True:\n    shape = input(\"What shape would you like?: \")\n\n    if (shape.lower() == \"cube\" ) : #Calculating cube volume\n        cube_func()\n        continue\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 8798257, "user_type": "registered", "profile_image": "https://graph.facebook.com/820636158104211/picture?type=large", "display_name": "Aly Husein", "link": "https://stackoverflow.com/users/8798257/aly-husein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "closed_date": 1508364152, "accepted_answer_id": 46819961, "answer_count": 1, "score": -3, "last_activity_date": 1508364159, "creation_date": 1508364046, "question_id": 46819942, "link": "https://stackoverflow.com/questions/46819942/i-want-the-input-to-be-validated-no-matter-the-upper-or-lowercase", "closed_reason": "Duplicate", "title": "I want the input to be validated no matter the upper or lowercase", "body": "<p>So I'm doing a project where you put an input and once you do it matches one of cube, pyramid, ellipsoid, quit or it goes back to the original question</p>\n\n<p>I want the user to be able to input any of those words in whatever uppercase or lowercase possible, so an example would be I'd want cUbe or cubE to do the same thing as cube</p>\n\n<pre><code>while True:\n    shape = input(\"What shape would you like?: \")\n\n    if (shape == \"cube\" ) : #Calculating cube volume\n        cube_func()\n        continue\n</code></pre>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 8411, "user_id": 2399775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29a2523b23d09e0bfc15d3a77e505271?s=128&d=identicon&r=PG", "display_name": "wpercy", "link": "https://stackoverflow.com/users/2399775/wpercy"}, "edited": false, "score": 0, "creation_date": 1508363874, "post_id": 46819869, "comment_id": 80587275, "body": "We need to know what your <code>WriteFields()</code> function looks like"}, {"owner": {"reputation": 2391, "user_id": 6764079, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/mUwmx.png?s=128&g=1", "display_name": "Juggernaut", "link": "https://stackoverflow.com/users/6764079/juggernaut"}, "edited": false, "score": 0, "creation_date": 1508364186, "post_id": 46819869, "comment_id": 80587391, "body": "not specifically related to your question but you cannot test an API like that. the test client requests must be made asynchronously. your requests are being queued with your current method. use <code>aiohttp</code> to perfom async requests."}, {"owner": {"reputation": 293, "user_id": 7111747, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mdH7b.jpg?s=128&g=1", "display_name": "zhiqiang huang", "link": "https://stackoverflow.com/users/7111747/zhiqiang-huang"}, "edited": false, "score": 0, "creation_date": 1508364224, "post_id": 46819869, "comment_id": 80587403, "body": "It seems that your WriteFields() function would use several IO operating which will consume a long time."}, {"owner": {"reputation": 2933, "user_id": 3434388, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/uZ9Hf.jpg?s=128&g=1", "display_name": "Danielle M.", "link": "https://stackoverflow.com/users/3434388/danielle-m"}, "reply_to_user": {"reputation": 8411, "user_id": 2399775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29a2523b23d09e0bfc15d3a77e505271?s=128&d=identicon&r=PG", "display_name": "wpercy", "link": "https://stackoverflow.com/users/2399775/wpercy"}, "edited": false, "score": 0, "creation_date": 1508364225, "post_id": 46819869, "comment_id": 80587404, "body": "As @wpercy mentions, it&#39;s probably the <code>WriteFields()</code> function. Comment it out and re-run your tests?"}, {"owner": {"reputation": 2350, "user_id": 2135035, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3b776d90a1f60cea10dec51558e2a14c?s=128&d=identicon&r=PG", "display_name": "Ahmed", "link": "https://stackoverflow.com/users/2135035/ahmed"}, "edited": false, "score": 0, "creation_date": 1508364347, "post_id": 46819869, "comment_id": 80587453, "body": "If you are running a dev server, it runs on a single thread. It&#39;s not designed for heavy hitting. You are hitting the link 100 times."}], "owner": {"reputation": 383, "user_id": 1566066, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/ee892ee3a29e1006813728859576e515?s=128&d=identicon&r=PG", "display_name": "Oliver9523", "link": "https://stackoverflow.com/users/1566066/oliver9523"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 274, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1508493685, "creation_date": 1508363683, "last_edit_date": 1508493685, "question_id": 46819869, "link": "https://stackoverflow.com/questions/46819869/django-slow-post-response", "title": "django slow POST response", "body": "<p>I've been trying to learn python and django by creating a server on an raspberry pi 3  to accept data from some IoT projects around the house.</p>\n\n<p>I have set up the server and successfully managed to POST data to a url. However, I'm seeing that that the POST request takes about 1s. This is far too slow if I want several IoT devices feeding data back to the pi.</p>\n\n<pre><code>@csrf_exempt\ndef update(request):\n\n  if request.method == \"POST\":\n    key = request.POST.get(\"key\", \"\")\n\n    if key == settings.API_KEY:\n        deviceID = request.POST.get(\"id\", \"\")\n        format = request.POST.get(\"format\", \"\")\n        datatype = request.POST.get(\"datatype\", \"\")\n        data = request.POST.get(\"data\", \"\")\n\n        fields = [format,datatype,data]\n\n        WriteFields(deviceID,fields)\n        return JsonResponse({\"result\": \"received\"})\n    else:\n        return JsonResponse({\"error\": \"invalid_key\"})\n\nreturn JsonResponse({\"error\": \"no_post\"})\n</code></pre>\n\n<p>I ran a quick script to test the POST rate</p>\n\n<pre><code>import requests\n\nfor i in range(100):\n    r = requests.post(\"http://heimdall:8000/sensors/update/\", data={'key': 'testkey', 'id': '123456', 'format': 'temp', 'datatype': 'c', 'data': '12'})\n    print(r.status_code, r.reason)\n</code></pre>\n\n<p>The timestamps in the django terminal were showing the response about every 1s. To eliminate the pi being the bottle-neck I ran the same django project on my i3 based Plex media server and I get similar results.<br>\nI've also tested sending POST requests using CURL from windows cmd line and see the same response time. Is this a fundamental limit of POST? Or is the problem likely to be in my project somewhere?</p>\n\n<p><strong>UPDATE</strong><br>\nI've removed most of the code from the Update function and re-run</p>\n\n<pre><code>@csrf_exempt\ndef update(request):\n    if request.method == \"POST\":\n        key = request.POST.get(\"key\", \"\")\n    return JsonResponse({\"test\": \"test\"})\n</code></pre>\n\n<p>but the response rate is still around 1s.<br>\nI've also noted the comments about using <code>aiohttp</code>, I will investigate this next.<br>\nI've tried setting <code>DEBUG = False</code> in settings.py with no change.</p>\n\n<p><strong>UPDATE2</strong><br>\nInterestingly actually running the request on my nodemcu esp8266 IoT device I don't see this delay... the serial output from the Arduino console DOESN'T pause for 1s and it still successfully reads the response from the server.</p>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 126, "user_id": 8778044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b382743135578c2582d87156b6ea6e3e?s=128&d=identicon&r=PG", "display_name": "noes1s", "link": "https://stackoverflow.com/users/8778044/noes1s"}, "edited": false, "score": 0, "creation_date": 1508388920, "post_id": 46819866, "comment_id": 80593376, "body": "Go to the django shell. Import your model. Run your queryset and try to manipulate the data there to make sure your not having issues with your model."}, {"owner": {"reputation": 126, "user_id": 8778044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b382743135578c2582d87156b6ea6e3e?s=128&d=identicon&r=PG", "display_name": "noes1s", "link": "https://stackoverflow.com/users/8778044/noes1s"}, "edited": false, "score": 1, "creation_date": 1508391180, "post_id": 46819866, "comment_id": 80594023, "body": "There is a discrepancy in your naming. In urls it is named info_page.html in view it is named infopage.html"}, {"owner": {"reputation": 21, "user_id": 4779104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abe9c86f0aac7a3900a5cb9c76f5b1bf?s=128&d=identicon&r=PG&f=1", "display_name": "Hinchy", "link": "https://stackoverflow.com/users/4779104/hinchy"}, "reply_to_user": {"reputation": 126, "user_id": 8778044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b382743135578c2582d87156b6ea6e3e?s=128&d=identicon&r=PG", "display_name": "noes1s", "link": "https://stackoverflow.com/users/8778044/noes1s"}, "edited": false, "score": 0, "creation_date": 1508393926, "post_id": 46819866, "comment_id": 80594878, "body": "@noes1s Can manipulate data fine through the shell and same issue after fixing the naming discrepancy"}, {"owner": {"reputation": 691, "user_id": 5562092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6794fb661ad63d244a9bb592352f6d93?s=128&d=identicon&r=PG&f=1", "display_name": "A H Bensiali", "link": "https://stackoverflow.com/users/5562092/a-h-bensiali"}, "reply_to_user": {"reputation": 126, "user_id": 8778044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b382743135578c2582d87156b6ea6e3e?s=128&d=identicon&r=PG", "display_name": "noes1s", "link": "https://stackoverflow.com/users/8778044/noes1s"}, "edited": false, "score": 0, "creation_date": 1508398664, "post_id": 46819866, "comment_id": 80597147, "body": "good catch @noes1s your template seems to be named wrong. Check you dont have the data being spit out on a differently named template. Code looks fine for python3"}], "answers": [{"comments": [{"owner": {"reputation": 126, "user_id": 8778044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b382743135578c2582d87156b6ea6e3e?s=128&d=identicon&r=PG", "display_name": "noes1s", "link": "https://stackoverflow.com/users/8778044/noes1s"}, "reply_to_user": {"reputation": 21, "user_id": 4779104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abe9c86f0aac7a3900a5cb9c76f5b1bf?s=128&d=identicon&r=PG&f=1", "display_name": "Hinchy", "link": "https://stackoverflow.com/users/4779104/hinchy"}, "edited": false, "score": 0, "creation_date": 1508382793, "post_id": 46820096, "comment_id": 80592006, "body": "Please update your question with views.py and urls.py"}, {"owner": {"reputation": 21, "user_id": 4779104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abe9c86f0aac7a3900a5cb9c76f5b1bf?s=128&d=identicon&r=PG&f=1", "display_name": "Hinchy", "link": "https://stackoverflow.com/users/4779104/hinchy"}, "edited": false, "score": 0, "creation_date": 1508383909, "post_id": 46820096, "comment_id": 80592274, "body": "The relevant view was always there but added the relevant url"}], "tags": [], "owner": {"reputation": 126, "user_id": 8778044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b382743135578c2582d87156b6ea6e3e?s=128&d=identicon&r=PG", "display_name": "noes1s", "link": "https://stackoverflow.com/users/8778044/noes1s"}, "is_accepted": false, "score": 0, "last_activity_date": 1508366578, "last_edit_date": 1508366578, "creation_date": 1508365057, "answer_id": 46820096, "question_id": 46819866, "link": "https://stackoverflow.com/questions/46819866/django-displaying-data-from-database-in-template/46820096#46820096", "title": "Django displaying data from database in template", "body": "<p>Try changing <code>views.py</code> to the following:</p>\n\n<pre><code>def itemget(request):\n    data = CityInfo.objects.all()\n    context={\n      'data': data\n    }\n    return render(request, \"CityApp/infopage.html\", context)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5226, "user_id": 7473847, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/iZysq.png?s=128&g=1", "display_name": "Essex", "link": "https://stackoverflow.com/users/7473847/essex"}, "is_accepted": false, "score": 0, "last_activity_date": 1508398133, "last_edit_date": 1508398133, "creation_date": 1508366269, "answer_id": 46820299, "question_id": 46819866, "link": "https://stackoverflow.com/questions/46819866/django-displaying-data-from-database-in-template/46820299#46820299", "title": "Django displaying data from database in template", "body": "<p>Try this  : </p>\n\n<pre><code>def __str__(self):\n    return \"%s\"  %  self.name\n</code></pre>\n\n<p>I'm not sure because I'm on my old smartphone.</p>\n\n<p>Otherwise, your <code>def __str__</code>  is well indented in your class  ? </p>\n\n<p>Are you using Python 2 or Python 3  ?  <code>str</code> if for Python 3. Else you have to use <code>__unicode__</code></p>\n\n<p><strong>EDIT :</strong></p>\n\n<p>From you urls.py file, you have :</p>\n\n<pre><code>url(r'itemget/$',views.itemget,{'template_name': 'CityApp/info_page.html'},name='itemget'),\n</code></pre>\n\n<p>Remove your <code>template_name part</code> which is already in your view and don't forget to add <code>^</code> before <code>itemget</code></p>\n\n<pre><code>url(r'^itemget/$',views.itemget ,name='itemget'),\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 4779104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abe9c86f0aac7a3900a5cb9c76f5b1bf?s=128&d=identicon&r=PG&f=1", "display_name": "Hinchy", "link": "https://stackoverflow.com/users/4779104/hinchy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2353, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1508398133, "creation_date": 1508363676, "last_edit_date": 1508383873, "question_id": 46819866, "link": "https://stackoverflow.com/questions/46819866/django-displaying-data-from-database-in-template", "title": "Django displaying data from database in template", "body": "<p>I'm having some trouble displaying data from my database on the template in django</p>\n\n<p>model:</p>\n\n<pre><code>class CityInfo (models.Model):\n    id = models.AutoField(primary_key=True)\n    name = models.CharField(max_length=200)\n    landmark_type = models.CharField(blank=True, max_length=30)\n\n    business = 'Business'\n    student = 'Student'\n    tourist = 'Tourist'\n\n    def __str__(self):\n        return self.name\n</code></pre>\n\n<p>relevant view:</p>\n\n<pre><code>def itemget(request):\n    data=CityInfo.objects.all()\n    return render(request,'CityApp/infopage.html', {'data': data})  \n</code></pre>\n\n<p>relevant url:</p>\n\n<pre><code>url(r'itemget/$',views.itemget,{'template_name': 'CityApp/info_page.html'},name='itemget'),\n</code></pre>\n\n<p>infopage.html:</p>\n\n<pre><code>&lt;ul&gt;\n    {% for item in data %}\n    &lt;li&gt;      \n        &lt;h1&gt;{{ item.name }}&lt;/h1&gt;\n     &lt;/li&gt;\n    {% endfor %}\n&lt;ul&gt;  \n</code></pre>\n\n<p>The above html results in a blank list and I have no idea why.</p>\n"}, {"tags": ["python", "pandas", "pandas-groupby"], "answers": [{"comments": [{"owner": {"reputation": 1273, "user_id": 4713504, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2ee302f694cc906a9266531ba866ac5e?s=128&d=identicon&r=PG&f=1", "display_name": "Pylander", "link": "https://stackoverflow.com/users/4713504/pylander"}, "edited": false, "score": 0, "creation_date": 1508372117, "post_id": 46819964, "comment_id": 80589603, "body": "Second is perfect.  I see what I had been doing wrong with the lambda function previously."}, {"owner": {"reputation": 1273, "user_id": 4713504, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2ee302f694cc906a9266531ba866ac5e?s=128&d=identicon&r=PG&f=1", "display_name": "Pylander", "link": "https://stackoverflow.com/users/4713504/pylander"}, "edited": false, "score": 0, "creation_date": 1508876641, "post_id": 46819964, "comment_id": 80786215, "body": "One last question if you don&#39;t mind?  Does the mode lambda in this case ignore np.nan values for ATTRIBUTE?  I would want it to only find the mode of the non-null values."}], "tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": true, "score": 2, "last_activity_date": 1508364174, "creation_date": 1508364174, "answer_id": 46819964, "question_id": 46819820, "link": "https://stackoverflow.com/questions/46819820/python-pandas-reindex-dataframegroupby-object-to-dataframe-error/46819964#46819964", "title": "Python PANDAS: Reindex DataFrameGroupBy Object to Dataframe Error", "body": "<p>IIUC:</p>\n\n<pre><code>In [203]: df.groupby('ID')['ATTRIBUTE'] \\\n            .agg(lambda x: x.mode()[0] if len(x.mode()) == 1 else 'multithing')\nOut[203]:\nID\n1        thing3\n2        thing7\n3    multithing\nName: ATTRIBUTE, dtype: object\n</code></pre>\n\n<p>or</p>\n\n<pre><code>In [205]: df.groupby('ID', as_index=False)['ATTRIBUTE'] \\\n     ...:   .agg(lambda x: x.mode()[0] if len(x.mode()) == 1 else 'multithing')\nOut[205]:\n   ID   ATTRIBUTE\n0   1      thing3\n1   2      thing7\n2   3  multithing\n</code></pre>\n"}], "owner": {"reputation": 1273, "user_id": 4713504, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2ee302f694cc906a9266531ba866ac5e?s=128&d=identicon&r=PG&f=1", "display_name": "Pylander", "link": "https://stackoverflow.com/users/4713504/pylander"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 298, "favorite_count": 0, "accepted_answer_id": 46819964, "answer_count": 1, "score": 1, "last_activity_date": 1508364174, "creation_date": 1508363458, "question_id": 46819820, "link": "https://stackoverflow.com/questions/46819820/python-pandas-reindex-dataframegroupby-object-to-dataframe-error", "title": "Python PANDAS: Reindex DataFrameGroupBy Object to Dataframe Error", "body": "<p>I have a simple initial dataframe:</p>\n\n<pre><code>ID, ATTRIBUTE\n1, thing2\n1, thing3\n1, thing3\n2, thing7\n2, thing7\n2, thing2\n3, thing1\n3, thing2\n</code></pre>\n\n<p>I have a simple groupby object I want to create where I get the mode of ATTRIBUTE (if it is multimodal I call the result 'multithing'):</p>\n\n<pre><code>mode = lambda x: x.mode() if len(x) &gt; 2 else 'multithing'\ndf_grouped = df.groupby(['ID'], as_index=False)['ATTRIBUTE].agg(mode)\n</code></pre>\n\n<p>I am trying to get a result after reindexing that looks like this:</p>\n\n<pre><code>ID, ATTRIBUTE\n1, thing3\n2, thing7\n3, multithing\n</code></pre>\n\n<p>So I can use it like a regular dataframe again and do things like this:</p>\n\n<pre><code>df_final.groupby('ATTRIBUTE')['ID'].count()\n</code></pre>\n"}, {"tags": ["python", "django", "django-rest-framework"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1508363370, "post_id": 46819746, "comment_id": 80587084, "body": "<a href=\"https://github.com/encode/django-rest-framework/issues/2763\" rel=\"nofollow noreferrer\">That doesn&#39;t exist any more.</a>"}, {"owner": {"reputation": 443, "user_id": 3541909, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7367db02c616e5101691cd873a36e8fd?s=128&d=identicon&r=PG&f=1", "display_name": "unpaid-intern", "link": "https://stackoverflow.com/users/3541909/unpaid-intern"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1508365055, "post_id": 46819746, "comment_id": 80587695, "body": "I see that now, but I am not using wsgi.STATUS_CODE_TEXT anywhere in my code(on purpose)... where can I look for references to it?"}], "answers": [{"comments": [{"owner": {"reputation": 443, "user_id": 3541909, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7367db02c616e5101691cd873a36e8fd?s=128&d=identicon&r=PG&f=1", "display_name": "unpaid-intern", "link": "https://stackoverflow.com/users/3541909/unpaid-intern"}, "edited": false, "score": 0, "creation_date": 1508364681, "post_id": 46819814, "comment_id": 80587586, "body": "Great thanks! ...again I am very new to this framework. How do I go about using stdlib instead of wsgi?  do I just modify the settings.py to point to httplib.responses?"}, {"owner": {"reputation": 443, "user_id": 3541909, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7367db02c616e5101691cd873a36e8fd?s=128&d=identicon&r=PG&f=1", "display_name": "unpaid-intern", "link": "https://stackoverflow.com/users/3541909/unpaid-intern"}, "edited": false, "score": 0, "creation_date": 1508366567, "post_id": 46819814, "comment_id": 80588138, "body": "I am not calling django.core.handlers.wsgi.STATUS_CODE_TEXT anywhere explicitly in my code, how can I find references to it in the project? Or am not on the right track?"}, {"owner": {"reputation": 8411, "user_id": 2399775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29a2523b23d09e0bfc15d3a77e505271?s=128&d=identicon&r=PG", "display_name": "wpercy", "link": "https://stackoverflow.com/users/2399775/wpercy"}, "reply_to_user": {"reputation": 443, "user_id": 3541909, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7367db02c616e5101691cd873a36e8fd?s=128&d=identicon&r=PG&f=1", "display_name": "unpaid-intern", "link": "https://stackoverflow.com/users/3541909/unpaid-intern"}, "edited": false, "score": 0, "creation_date": 1508377268, "post_id": 46819814, "comment_id": 80590737, "body": "@SumGuy the traceback will tell you which file the import statement is in. Please post the entire traceback."}, {"owner": {"reputation": 443, "user_id": 3541909, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7367db02c616e5101691cd873a36e8fd?s=128&d=identicon&r=PG&f=1", "display_name": "unpaid-intern", "link": "https://stackoverflow.com/users/3541909/unpaid-intern"}, "edited": false, "score": 0, "creation_date": 1508428722, "post_id": 46819814, "comment_id": 80615795, "body": "Ah ok... I can&#39;t really follow the thread of the error messages, help interpreting them would be Great!  I edited the post to include the entire traceback."}, {"owner": {"reputation": 443, "user_id": 3541909, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7367db02c616e5101691cd873a36e8fd?s=128&d=identicon&r=PG&f=1", "display_name": "unpaid-intern", "link": "https://stackoverflow.com/users/3541909/unpaid-intern"}, "edited": false, "score": 0, "creation_date": 1508429963, "post_id": 46819814, "comment_id": 80616564, "body": "I have updated my original question to include where I found the call to STATUS_CODE_TEXT.  But how do I go about fixing this? Thanks again."}, {"owner": {"reputation": 443, "user_id": 3541909, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7367db02c616e5101691cd873a36e8fd?s=128&d=identicon&r=PG&f=1", "display_name": "unpaid-intern", "link": "https://stackoverflow.com/users/3541909/unpaid-intern"}, "edited": false, "score": 0, "creation_date": 1508442370, "post_id": 46819814, "comment_id": 80623055, "body": "I have marked another response as the answer, because while this response is correct, it does not address the root issue, and doesn&#39;t instruct one on how to fix it.  Thanks for your time though!"}], "tags": [], "owner": {"reputation": 8411, "user_id": 2399775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29a2523b23d09e0bfc15d3a77e505271?s=128&d=identicon&r=PG", "display_name": "wpercy", "link": "https://stackoverflow.com/users/2399775/wpercy"}, "is_accepted": false, "score": 1, "last_activity_date": 1508363437, "creation_date": 1508363437, "answer_id": 46819814, "question_id": 46819746, "link": "https://stackoverflow.com/questions/46819746/import-error-from-django-core-handlers-wsgi-import-status-code-text/46819814#46819814", "title": "Import Error : from django.core.handlers.wsgi import STATUS_CODE_TEXT", "body": "<p><code>django.core.handlers.wsgi.STATUS_CODE_TEXT</code> was removed in Django 1.9.</p>\n\n<p>From the <a href=\"https://docs.djangoproject.com/en/1.11/releases/1.9/#miscellaneous\" rel=\"nofollow noreferrer\">Django 1.9 release notes</a>:</p>\n\n<blockquote>\n  <p>django.http.responses.REASON_PHRASES and django.core.handlers.wsgi.STATUS_CODE_TEXT have been removed. Use Python\u2019s stdlib instead: http.client.responses for Python 3 and httplib.responses for Python 2.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 443, "user_id": 3541909, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7367db02c616e5101691cd873a36e8fd?s=128&d=identicon&r=PG&f=1", "display_name": "unpaid-intern", "link": "https://stackoverflow.com/users/3541909/unpaid-intern"}, "edited": false, "score": 0, "creation_date": 1508442590, "post_id": 46837700, "comment_id": 80623187, "body": "Thanks again @anupsabraham! This was driving me crazy!"}, {"owner": {"reputation": 2171, "user_id": 1666143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccf9b10bcf3d5759cedc2a482a6cbd05?s=128&d=identicon&r=PG", "display_name": "anupsabraham", "link": "https://stackoverflow.com/users/1666143/anupsabraham"}, "reply_to_user": {"reputation": 443, "user_id": 3541909, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7367db02c616e5101691cd873a36e8fd?s=128&d=identicon&r=PG&f=1", "display_name": "unpaid-intern", "link": "https://stackoverflow.com/users/3541909/unpaid-intern"}, "edited": false, "score": 0, "creation_date": 1508442632, "post_id": 46837700, "comment_id": 80623213, "body": "Cool. Glad I am able to help. :)"}], "tags": [], "owner": {"reputation": 2171, "user_id": 1666143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccf9b10bcf3d5759cedc2a482a6cbd05?s=128&d=identicon&r=PG", "display_name": "anupsabraham", "link": "https://stackoverflow.com/users/1666143/anupsabraham"}, "is_accepted": true, "score": 3, "last_activity_date": 1508442158, "creation_date": 1508442158, "answer_id": 46837700, "question_id": 46819746, "link": "https://stackoverflow.com/questions/46819746/import-error-from-django-core-handlers-wsgi-import-status-code-text/46837700#46837700", "title": "Import Error : from django.core.handlers.wsgi import STATUS_CODE_TEXT", "body": "<p>This error is because the <code>django-rest-framework</code> version you're using(v3.1.1) doesn't support Django version 1.11. <a href=\"http://www.django-rest-framework.org/topics/3.7-announcement/#django-20-support\" rel=\"nofollow noreferrer\">Support for Django v1.11 was not added in <code>django-rest-framework</code> until version 3.7</a>.</p>\n\n<p>Upgrade <code>django-rest-framework</code> using pip: <code>pip install -U djangorestframework</code></p>\n"}], "owner": {"reputation": 443, "user_id": 3541909, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7367db02c616e5101691cd873a36e8fd?s=128&d=identicon&r=PG&f=1", "display_name": "unpaid-intern", "link": "https://stackoverflow.com/users/3541909/unpaid-intern"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 825, "favorite_count": 0, "accepted_answer_id": 46837700, "answer_count": 2, "score": 1, "last_activity_date": 1508442479, "creation_date": 1508363072, "last_edit_date": 1508442479, "question_id": 46819746, "link": "https://stackoverflow.com/questions/46819746/import-error-from-django-core-handlers-wsgi-import-status-code-text", "title": "Import Error : from django.core.handlers.wsgi import STATUS_CODE_TEXT", "body": "<p>I am super new with django and python and I'm having trouble getting the django rest framework integrated into my project.</p>\n\n<p>I've got my model, serializer, and api in order, I think but when I attempt to run the server I get a string of errors:</p>\n\n<p>(pyDev) C:\\Users\\pyDev\\smrt>python manage.py run server\nPerforming system checks...</p>\n\n<pre><code>    Unhandled exception in thread started by &lt;function wrapper at 0x0000000003FFD278\n    &gt;\n    Traceback (most recent call last):\n...\n      File \"C:\\Python27\\Lib\\site-packages\\rest_framework\\generics.py\", line 8, in &lt;m\n    odule&gt;\n        from rest_framework import views, mixins\n      File \"C:\\Python27\\Lib\\site-packages\\rest_framework\\views.py\", line 14, in &lt;mod\n    ule&gt;\n        from rest_framework.response import Response\n      File \"C:\\Python27\\Lib\\site-packages\\rest_framework\\response.py\", line 8, in &lt;m\n    odule&gt;\n        from django.core.handlers.wsgi import STATUS_CODE_TEXT\n    ImportError: cannot import name STATUS_CODE_TEXT\n</code></pre>\n\n<p>Anyone have an idea of how to fix this or what I am doing wrong?  Thanks!</p>\n\n<ul>\n<li>python: 2.7.14</li>\n<li>django: 1.11.6</li>\n<li>rest framework: 3.1.1</li>\n<li>virtualenv: 12.1.1 </li>\n</ul>\n\n<p>wpercy correctly points out that STATUS_CODE_TEXT has been removed from django, but I am not explicitly calling it from anywhere in my code. I guess that means it's somewhere in the rest_framework.generics code?</p>\n\n<p>Is it possible that I'm using the rest_framework incorrectly and need to update my approach?</p>\n\n<p>EDIT: I built a brand new project from scratch following the django rest framework tutorial, and I am able to return JSON objects just fine without the errors described here...</p>\n\n<p>EDIT: This specifically appears to be the result of a call to include:</p>\n\n<pre><code>rest_framework.generics import ListAPIView\n</code></pre>\n\n<p>EDIT:\nBased on wpercy's advice I looked through the traceback more carefully and realized that the reference was pointing at my root python27\\Lib\\site-packages\\rest_framework\\response.py on line 8 as indicated above, I found:</p>\n\n<pre><code>from django.core.handlers.wsgi import STATUS_CODE_TEXT\n</code></pre>\n\n<p>and then on line 81: </p>\n\n<pre><code>return STATUS_CODE_TEXT.get(self.status_code, '')\n</code></pre>\n\n<p>How can I fix this?</p>\n\n<p>EDIT:\nI found on the link that wpercy &amp; commenter below posted</p>\n\n<p><a href=\"https://code.djangoproject.com/ticket/24137\" rel=\"nofollow noreferrer\">Link to relevant ticket</a>. Jpadilla wrote:</p>\n\n<p>In summary we should probably be able to do something like in response.py:</p>\n\n<pre><code>from django.utils.six.moves.http_client import responses\n</code></pre>\n\n<p>...</p>\n\n<pre><code>return responses.get(self.status_code, '')\n</code></pre>\n\n<p>I dropped in that suggestion which is a closed item on github:</p>\n\n<p><a href=\"https://github.com/maryokhin/django-rest-framework/commit/80c40fcf082d451b474647b6ce693bb5479783be\" rel=\"nofollow noreferrer\">ticket for django-rest-framework Status code</a></p>\n\n<p>and the server will now run. I'm not sure how I ended up with this older code? Perhaps I should uninstall and reinstall django-rest-framework to ensure that I have the latest, but dropping this code in did fix the issue.</p>\n\n<p>EDIT:\nBased on an answer I received from another question: <a href=\"https://stackoverflow.com/questions/46837068/options-object-has-no-attribute-get-all-related-objects-but-im-already-usin?noredirect=1#comment80622172_46837068\">'Options' object has no attribute 'get_all_related_objects' but I'm already using Django 1.11</a>\nit turns out that I was using an old version of the rest framework with a new version of django. See Answer marked below</p>\n"}, {"tags": ["python", "validation", "neural-network", "classification", "training-data"], "comments": [{"owner": {"reputation": 2884, "user_id": 3658166, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/X8dHk.png?s=128&g=1", "display_name": "ninesalt", "link": "https://stackoverflow.com/users/3658166/ninesalt"}, "edited": false, "score": 1, "creation_date": 1508363286, "post_id": 46819731, "comment_id": 80587048, "body": "The 80/20 split isn&#39;t optimal in all cases. It depends on your data. It would help to test your hypothesis a few times again but shuffle the dataset this time."}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 2, "creation_date": 1508363287, "post_id": 46819731, "comment_id": 80587049, "body": "Unfortunately, questions like this do not a clear cut answer, especially without access to your data."}, {"owner": {"reputation": 1680, "user_id": 6772171, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/bc07c67f42651f77624694bfd9ad6923?s=128&d=identicon&r=PG&f=1", "display_name": "Evan Weissburg", "link": "https://stackoverflow.com/users/6772171/evan-weissburg"}, "edited": false, "score": 0, "creation_date": 1508366025, "post_id": 46819731, "comment_id": 80587993, "body": "Coldspeed, I&#39;ve provided a dataset (edited). Swailem95, the dataset is shuffled at each epoch and (I believe) before splitting (see <a href=\"http://scikit-learn.org/stable/modules/generated/sklearn.model_selection.train_test_split.html\" rel=\"nofollow noreferrer\">scikit-learn.org/stable/modules/generated/&hellip;</a>)"}, {"owner": {"reputation": 1680, "user_id": 6772171, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/bc07c67f42651f77624694bfd9ad6923?s=128&d=identicon&r=PG&f=1", "display_name": "Evan Weissburg", "link": "https://stackoverflow.com/users/6772171/evan-weissburg"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1508368766, "post_id": 46819731, "comment_id": 80588742, "body": "@c\u1d0f\u029f\u1d05s\u1d18\u1d07\u1d07\u1d05 see above (not sure if editing a comment tags correctly."}], "answers": [{"tags": [], "owner": {"reputation": 8750, "user_id": 8505817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53eb392d7acc9829ca94ef2bb495ab7f?s=128&d=identicon&r=PG&f=1", "display_name": "igrinis", "link": "https://stackoverflow.com/users/8505817/igrinis"}, "is_accepted": true, "score": 3, "last_activity_date": 1508744035, "last_edit_date": 1508744035, "creation_date": 1508741258, "answer_id": 46883407, "question_id": 46819731, "link": "https://stackoverflow.com/questions/46819731/why-does-a-50-50-train-test-split-work-best-for-a-data-set-of-178-observations-w/46883407#46883407", "title": "Why does a 50-50 train/test split work best for a data-set of 178 observations with this neural network?", "body": "<p>1) The sample size is very small. You have 13 dimensions and only 178 samples. As your need to train parameters of your 5-layer NN, no matter how you split, there are just not enough data. So you model is too complex for the amount of data you have, which will lead to overfitting. This means, that your model does not generalize well, and will not provide you good results in general case, and will not provide stable results. </p>\n\n<p>2) You always will have some differences between training and testing dataset. In your case, because of the small sample size, the consistency between statistics of your testing and training data is mostly random. </p>\n\n<p>3) When you split 90-10, your test set is only 17 samples. You can't get much value out of just 17 trials. It can hardly can be called \"statistics\". Try a different split, and your results will also change (you have already seen that phenomena, as I've mentioned above about robustness)</p>\n\n<p>4) Always compare you classifier to the random classifier performance. In your case of 3 classes, you should get at least better than 33%.</p>\n\n<p>5) Read about cross-validation and leave-one-out.</p>\n"}], "owner": {"reputation": 1680, "user_id": 6772171, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/bc07c67f42651f77624694bfd9ad6923?s=128&d=identicon&r=PG&f=1", "display_name": "Evan Weissburg", "link": "https://stackoverflow.com/users/6772171/evan-weissburg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1012, "favorite_count": 0, "accepted_answer_id": 46883407, "answer_count": 1, "score": -1, "last_activity_date": 1508744035, "creation_date": 1508363001, "last_edit_date": 1508604646, "question_id": 46819731, "link": "https://stackoverflow.com/questions/46819731/why-does-a-50-50-train-test-split-work-best-for-a-data-set-of-178-observations-w", "title": "Why does a 50-50 train/test split work best for a data-set of 178 observations with this neural network?", "body": "<p><strong>Dataset source</strong>: <a href=\"https://archive.ics.uci.edu/ml/datasets/wine\" rel=\"nofollow noreferrer\">https://archive.ics.uci.edu/ml/datasets/wine</a></p>\n\n<p><strong>Full Source Code (requires NumPy, Python 3)</strong>: <a href=\"https://github.com/nave01314/NNClassifier\" rel=\"nofollow noreferrer\">https://github.com/nave01314/NNClassifier</a></p>\n\n<p>From what I've read, it appears that a split of around 80% training 20% va\nvalidation data is close to optimal. As the size of the testing dataset increases, the variance of the validation results should go down at the cost of less effective training (lower validation accuracy).</p>\n\n<p>Therefore, I am confused as to the following results which seemed to show optimal accuracy and low variance with a <code>TEST_SIZE=0.5</code> (each trial ran multiple times and one trial was selected to represent the different testing sizes).</p>\n\n<p><code>TEST_SIZE=0.1</code>, this should work effectively due to large training size but have a larger variance (5 trials varied between 16% and 50% accuracy).</p>\n\n<pre><code>Epoch     0, Loss 0.021541, Targets [ 1.  0.  0.], Outputs [ 0.979  0.011  0.01 ], Inputs [ 0.086  0.052  0.08   0.062  0.101  0.093  0.107  0.058  0.108  0.08   0.084  0.115  0.104]\nEpoch   100, Loss 0.001154, Targets [ 0.  0.  1.], Outputs [ 0.     0.001  0.999], Inputs [ 0.083  0.099  0.084  0.079  0.085  0.061  0.02   0.103  0.038  0.083  0.078  0.053  0.067]\nEpoch   200, Loss 0.000015, Targets [ 0.  0.  1.], Outputs [ 0.  0.  1.], Inputs [ 0.076  0.092  0.087  0.107  0.077  0.063  0.02   0.13   0.054  0.106  0.054  0.051  0.086]\nTarget Class 0, Predicted Class 0\nTarget Class 0, Predicted Class 0\nTarget Class 1, Predicted Class 0\nTarget Class 1, Predicted Class 0\nTarget Class 1, Predicted Class 0\nTarget Class 0, Predicted Class 0\nTarget Class 1, Predicted Class 0\nTarget Class 1, Predicted Class 0\nTarget Class 1, Predicted Class 0\nTarget Class 1, Predicted Class 0\nTarget Class 0, Predicted Class 0\nTarget Class 0, Predicted Class 0\nTarget Class 1, Predicted Class 0\nTarget Class 0, Predicted Class 0\nTarget Class 2, Predicted Class 2\nTarget Class 1, Predicted Class 0\nTarget Class 0, Predicted Class 0\nTarget Class 2, Predicted Class 2\n50.0% overall accuracy for validation set.\n</code></pre>\n\n<p><code>TEST_SIZE=0.5</code>, this should work okay (accuracy between the other two cases) - 5 trials varied between 92 and 97% accuracy <em>for some reason</em>.</p>\n\n<pre><code>Epoch     0, Loss 0.547218, Targets [ 1.  0.  0.], Outputs [ 0.579  0.087  0.334], Inputs [ 0.106  0.08   0.142  0.133  0.129  0.115  0.127  0.13   0.12   0.068  0.123  0.126  0.11 ]\nEpoch   100, Loss 0.002716, Targets [ 0.  1.  0.], Outputs [ 0.003  0.997  0.   ], Inputs [ 0.09   0.059  0.097  0.114  0.088  0.108  0.102  0.144  0.125  0.036  0.186  0.113  0.054]\nEpoch   200, Loss 0.002874, Targets [ 0.  1.  0.], Outputs [ 0.003  0.997  0.   ], Inputs [ 0.102  0.067  0.088  0.109  0.088  0.097  0.091  0.088  0.092  0.056  0.113  0.141  0.089]\nTarget Class 1, Predicted Class 1\nTarget Class 0, Predicted Class 0\nTarget Class 2, Predicted Class 2\nTarget Class 1, Predicted Class 1\nTarget Class 2, Predicted Class 2\nTarget Class 2, Predicted Class 2\nTarget Class 2, Predicted Class 2\nTarget Class 1, Predicted Class 1\nTarget Class 0, Predicted Class 0\nTarget Class 0, Predicted Class 0\nTarget Class 0, Predicted Class 0\nTarget Class 0, Predicted Class 0\nTarget Class 0, Predicted Class 0\nTarget Class 0, Predicted Class 0\nTarget Class 1, Predicted Class 0\nTarget Class 2, Predicted Class 2\nTarget Class 1, Predicted Class 1\nTarget Class 1, Predicted Class 1\nTarget Class 1, Predicted Class 1\nTarget Class 0, Predicted Class 0\nTarget Class 2, Predicted Class 2\nTarget Class 1, Predicted Class 1\nTarget Class 0, Predicted Class 0\nTarget Class 1, Predicted Class 1\nTarget Class 2, Predicted Class 2\nTarget Class 1, Predicted Class 1\nTarget Class 1, Predicted Class 1\nTarget Class 1, Predicted Class 1\nTarget Class 2, Predicted Class 1\nTarget Class 2, Predicted Class 2\nTarget Class 0, Predicted Class 0\nTarget Class 1, Predicted Class 1\nTarget Class 0, Predicted Class 0\nTarget Class 1, Predicted Class 1\nTarget Class 1, Predicted Class 1\nTarget Class 0, Predicted Class 0\nTarget Class 2, Predicted Class 2\nTarget Class 0, Predicted Class 0\nTarget Class 0, Predicted Class 0\nTarget Class 1, Predicted Class 1\nTarget Class 1, Predicted Class 1\nTarget Class 0, Predicted Class 0\nTarget Class 1, Predicted Class 1\nTarget Class 0, Predicted Class 0\nTarget Class 0, Predicted Class 0\nTarget Class 1, Predicted Class 1\nTarget Class 2, Predicted Class 2\nTarget Class 2, Predicted Class 2\nTarget Class 1, Predicted Class 1\nTarget Class 0, Predicted Class 0\nTarget Class 1, Predicted Class 1\nTarget Class 2, Predicted Class 2\nTarget Class 1, Predicted Class 1\nTarget Class 2, Predicted Class 2\nTarget Class 1, Predicted Class 1\nTarget Class 0, Predicted Class 0\nTarget Class 1, Predicted Class 1\nTarget Class 0, Predicted Class 0\nTarget Class 2, Predicted Class 2\nTarget Class 2, Predicted Class 2\nTarget Class 1, Predicted Class 1\nTarget Class 0, Predicted Class 0\nTarget Class 2, Predicted Class 2\nTarget Class 2, Predicted Class 2\nTarget Class 0, Predicted Class 0\nTarget Class 0, Predicted Class 0\nTarget Class 1, Predicted Class 1\nTarget Class 0, Predicted Class 0\nTarget Class 1, Predicted Class 1\nTarget Class 1, Predicted Class 1\nTarget Class 1, Predicted Class 1\nTarget Class 0, Predicted Class 0\nTarget Class 1, Predicted Class 1\nTarget Class 0, Predicted Class 0\nTarget Class 2, Predicted Class 2\nTarget Class 1, Predicted Class 1\nTarget Class 1, Predicted Class 1\nTarget Class 0, Predicted Class 0\nTarget Class 1, Predicted Class 1\nTarget Class 0, Predicted Class 0\nTarget Class 2, Predicted Class 2\nTarget Class 2, Predicted Class 2\nTarget Class 1, Predicted Class 1\nTarget Class 1, Predicted Class 1\nTarget Class 2, Predicted Class 2\nTarget Class 2, Predicted Class 2\nTarget Class 1, Predicted Class 1\nTarget Class 0, Predicted Class 0\nTarget Class 1, Predicted Class 1\n97.75280898876404% overall accuracy for validation set.\n</code></pre>\n\n<p><code>TEST_SIZE=0.9</code>, this should generalize poorly due to small training sample - 5 trials varied between 38% and 54% accuracy.</p>\n\n<pre><code>Epoch     0, Loss 2.448474, Targets [ 0.  0.  1.], Outputs [ 0.707  0.206  0.086], Inputs [ 0.229  0.421  0.266  0.267  0.223  0.15   0.057  0.33   0.134  0.148  0.191  0.12   0.24 ]\nEpoch   100, Loss 0.017506, Targets [ 1.  0.  0.], Outputs [ 0.983  0.017  0.   ], Inputs [ 0.252  0.162  0.274  0.255  0.241  0.275  0.314  0.175  0.278  0.135  0.286  0.36   0.281]\nEpoch   200, Loss 0.001819, Targets [ 0.  0.  1.], Outputs [ 0.002  0.     0.998], Inputs [ 0.245  0.348  0.248  0.274  0.284  0.153  0.167  0.212  0.191  0.362  0.145  0.125  0.183]\nTarget Class 2, Predicted Class 2\nTarget Class 2, Predicted Class 2\nTarget Class 1, Predicted Class 1\nTarget Class 1, Predicted Class 1\nTarget Class 0, Predicted Class 1\nTarget Class 1, Predicted Class 1\nTarget Class 1, Predicted Class 2\nTarget Class 1, Predicted Class 1\nTarget Class 1, Predicted Class 1\nTarget Class 2, Predicted Class 2\nTarget Class 0, Predicted Class 1\nTarget Class 1, Predicted Class 1\nTarget Class 1, Predicted Class 1\nTarget Class 2, Predicted Class 2\nTarget Class 0, Predicted Class 1\nTarget Class 2, Predicted Class 2\nTarget Class 1, Predicted Class 1\nTarget Class 2, Predicted Class 2\nTarget Class 2, Predicted Class 2\nTarget Class 0, Predicted Class 1\nTarget Class 2, Predicted Class 2\nTarget Class 2, Predicted Class 2\nTarget Class 1, Predicted Class 1\nTarget Class 1, Predicted Class 1\nTarget Class 1, Predicted Class 1\nTarget Class 2, Predicted Class 2\nTarget Class 1, Predicted Class 1\nTarget Class 1, Predicted Class 1\nTarget Class 1, Predicted Class 1\nTarget Class 2, Predicted Class 2\nTarget Class 0, Predicted Class 1\nTarget Class 2, Predicted Class 2\nTarget Class 2, Predicted Class 2\nTarget Class 1, Predicted Class 1\nTarget Class 0, Predicted Class 1\nTarget Class 0, Predicted Class 1\nTarget Class 1, Predicted Class 1\nTarget Class 1, Predicted Class 1\nTarget Class 0, Predicted Class 1\nTarget Class 0, Predicted Class 1\nTarget Class 0, Predicted Class 1\nTarget Class 0, Predicted Class 1\nTarget Class 2, Predicted Class 2\nTarget Class 0, Predicted Class 1\nTarget Class 2, Predicted Class 2\nTarget Class 0, Predicted Class 1\nTarget Class 0, Predicted Class 1\nTarget Class 0, Predicted Class 1\nTarget Class 1, Predicted Class 2\nTarget Class 2, Predicted Class 2\nTarget Class 2, Predicted Class 2\nTarget Class 1, Predicted Class 1\nTarget Class 1, Predicted Class 1\nTarget Class 1, Predicted Class 1\nTarget Class 2, Predicted Class 2\nTarget Class 0, Predicted Class 1\nTarget Class 2, Predicted Class 2\nTarget Class 2, Predicted Class 2\nTarget Class 1, Predicted Class 1\nTarget Class 1, Predicted Class 1\nTarget Class 0, Predicted Class 1\nTarget Class 0, Predicted Class 1\nTarget Class 0, Predicted Class 1\nTarget Class 2, Predicted Class 2\nTarget Class 0, Predicted Class 1\nTarget Class 0, Predicted Class 1\nTarget Class 1, Predicted Class 1\nTarget Class 2, Predicted Class 2\nTarget Class 0, Predicted Class 1\nTarget Class 1, Predicted Class 1\nTarget Class 0, Predicted Class 1\nTarget Class 1, Predicted Class 1\nTarget Class 1, Predicted Class 1\nTarget Class 1, Predicted Class 1\nTarget Class 0, Predicted Class 1\nTarget Class 0, Predicted Class 1\nTarget Class 2, Predicted Class 2\nTarget Class 1, Predicted Class 1\nTarget Class 2, Predicted Class 2\nTarget Class 0, Predicted Class 1\nTarget Class 0, Predicted Class 1\nTarget Class 2, Predicted Class 2\nTarget Class 1, Predicted Class 1\nTarget Class 1, Predicted Class 1\nTarget Class 0, Predicted Class 1\nTarget Class 2, Predicted Class 2\nTarget Class 1, Predicted Class 1\nTarget Class 0, Predicted Class 1\nTarget Class 0, Predicted Class 1\nTarget Class 1, Predicted Class 1\nTarget Class 1, Predicted Class 1\nTarget Class 2, Predicted Class 2\nTarget Class 0, Predicted Class 1\nTarget Class 0, Predicted Class 1\nTarget Class 0, Predicted Class 1\nTarget Class 2, Predicted Class 2\nTarget Class 2, Predicted Class 2\nTarget Class 0, Predicted Class 1\nTarget Class 1, Predicted Class 1\nTarget Class 1, Predicted Class 1\nTarget Class 0, Predicted Class 1\nTarget Class 0, Predicted Class 1\nTarget Class 1, Predicted Class 1\nTarget Class 2, Predicted Class 2\nTarget Class 1, Predicted Class 1\nTarget Class 1, Predicted Class 1\nTarget Class 2, Predicted Class 2\nTarget Class 0, Predicted Class 1\nTarget Class 0, Predicted Class 1\nTarget Class 2, Predicted Class 2\nTarget Class 0, Predicted Class 1\nTarget Class 1, Predicted Class 1\nTarget Class 0, Predicted Class 1\nTarget Class 1, Predicted Class 1\nTarget Class 1, Predicted Class 1\nTarget Class 2, Predicted Class 2\nTarget Class 1, Predicted Class 1\nTarget Class 0, Predicted Class 1\nTarget Class 2, Predicted Class 2\nTarget Class 0, Predicted Class 1\nTarget Class 1, Predicted Class 1\nTarget Class 1, Predicted Class 1\nTarget Class 1, Predicted Class 1\nTarget Class 0, Predicted Class 1\nTarget Class 2, Predicted Class 2\nTarget Class 0, Predicted Class 1\nTarget Class 1, Predicted Class 1\nTarget Class 0, Predicted Class 1\nTarget Class 1, Predicted Class 1\nTarget Class 2, Predicted Class 2\nTarget Class 0, Predicted Class 1\nTarget Class 1, Predicted Class 1\nTarget Class 1, Predicted Class 2\nTarget Class 1, Predicted Class 1\nTarget Class 0, Predicted Class 1\nTarget Class 0, Predicted Class 1\nTarget Class 1, Predicted Class 1\nTarget Class 1, Predicted Class 1\nTarget Class 1, Predicted Class 1\nTarget Class 0, Predicted Class 1\nTarget Class 1, Predicted Class 1\nTarget Class 1, Predicted Class 1\nTarget Class 1, Predicted Class 1\nTarget Class 2, Predicted Class 2\nTarget Class 1, Predicted Class 1\nTarget Class 1, Predicted Class 1\nTarget Class 1, Predicted Class 1\nTarget Class 1, Predicted Class 1\nTarget Class 0, Predicted Class 1\nTarget Class 0, Predicted Class 1\nTarget Class 1, Predicted Class 1\nTarget Class 1, Predicted Class 1\nTarget Class 2, Predicted Class 2\nTarget Class 2, Predicted Class 2\nTarget Class 2, Predicted Class 2\nTarget Class 0, Predicted Class 1\nTarget Class 0, Predicted Class 1\nTarget Class 1, Predicted Class 1\nTarget Class 0, Predicted Class 1\nTarget Class 1, Predicted Class 1\nTarget Class 2, Predicted Class 2\n64.59627329192547% overall accuracy for validation set.\n</code></pre>\n\n<ul>\n<li><strong>Key function snippets below:</strong></li>\n</ul>\n\n<p><strong>Importing and splitting dataset</strong></p>\n\n<pre><code>import numpy as np\nfrom sklearn.preprocessing import normalize\nfrom sklearn.model_selection import train_test_split\n\n\n    def readInput(filename, delimiter, inputlen, outputlen, categories, test_size):\n        def onehot(num, categories):\n            arr = np.zeros(categories)\n            arr[int(num[0])-1] = 1\n            return arr\n\n        with open(filename) as file:\n            inputs = list()\n            outputs = list()\n            for line in file:\n                assert(len(line.split(delimiter)) == inputlen+outputlen)\n                outputs.append(onehot(list(map(lambda x: float(x), line.split(delimiter)))[:outputlen], categories))\n                inputs.append(list(map(lambda x: float(x), line.split(delimiter)))[outputlen:outputlen+inputlen])\n        inputs = np.array(inputs)\n        outputs = np.array(outputs)\n\n        inputs_train, inputs_val, outputs_train, outputs_val = train_test_split(inputs, outputs, test_size=test_size)\n        assert len(inputs_train) &gt; 0\n        assert len(inputs_val) &gt; 0\n\n        return normalize(inputs_train, axis=0), outputs_train, normalize(inputs_val, axis=0), outputs_val\n</code></pre>\n\n<p><strong>Some parameters</strong></p>\n\n<pre><code>import numpy as np\nimport helper\n\nFILE_NAME = 'data2.csv'\nDATA_DELIM = ','\nACTIVATION_FUNC = 'tanh'\nTESTING_FREQ = 100\nEPOCHS = 200\nLEARNING_RATE = 0.2\nTEST_SIZE = 0.9\n\nINPUT_SIZE = 13\nHIDDEN_LAYERS = [5]\nOUTPUT_SIZE = 3\n</code></pre>\n\n<p><strong>The main program flow</strong></p>\n\n<pre><code>    def step(self, x, targets, lrate):\n        self.forward_propagate(x)\n        self.backpropagate_errors(targets)\n        self.adjust_weights(x, lrate)\n\n    def test(self, epoch, x, target):\n        predictions = self.forward_propagate(x)\n        print('Epoch %5i, Loss %2f, Targets %s, Outputs %s, Inputs %s' % (epoch, helper.crossentropy(target, predictions), target, predictions, x))\n\n    def train(self, inputs, targets, epochs, testfreq, lrate):\n        xindices = [i for i in range(len(inputs))]\n        for epoch in range(epochs):\n            np.random.shuffle(xindices)\n            if epoch % testfreq == 0:\n                self.test(epoch, inputs[xindices[0]], targets[xindices[0]])\n            for i in xindices:\n                self.step(inputs[i], targets[i], lrate)\n        self.test(epochs, inputs[xindices[0]], targets[xindices[0]])\n\n    def validate(self, inputs, targets):\n        correct = 0\n        targets = np.argmax(targets, axis=1)\n        for i in range(len(inputs)):\n            prediction = np.argmax(self.forward_propagate(inputs[i]))\n            if prediction == targets[i]: correct += 1\n            print('Target Class %s, Predicted Class %s' % (targets[i], prediction))\n        print('%s%% overall accuracy for validation set.' % (correct/len(inputs)*100))\n\n\nnp.random.seed()\n\ninputs_train, outputs_train, inputs_val, outputs_val = helper.readInput(FILE_NAME, DATA_DELIM, inputlen=INPUT_SIZE, outputlen=1, categories=OUTPUT_SIZE, test_size=TEST_SIZE)\nnn = Classifier([INPUT_SIZE] + HIDDEN_LAYERS + [OUTPUT_SIZE], ACTIVATION_FUNC)\n\nnn.train(inputs_train, outputs_train, EPOCHS, TESTING_FREQ, LEARNING_RATE)\n\nnn.validate(inputs_val, outputs_val)\n</code></pre>\n"}, {"tags": ["python", "loops", "variables", "import"], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 5708537, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh6.googleusercontent.com/-SMnxQAAtJaI/AAAAAAAAAAI/AAAAAAAAAfM/CDWWP8QgFk0/photo.jpg?sz=128", "display_name": "Taapsa", "link": "https://stackoverflow.com/users/5708537/taapsa"}, "edited": false, "score": 0, "creation_date": 1508386195, "post_id": 46819948, "comment_id": 80592756, "body": "Yes I know that, but I wanna keep things separated."}], "tags": [], "owner": {"reputation": 677, "user_id": 8779237, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5e7a79f09b0a155e41c88f16525d9f35?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Khan", "link": "https://stackoverflow.com/users/8779237/muhammad-khan"}, "is_accepted": false, "score": 0, "last_activity_date": 1513600348, "last_edit_date": 1513600348, "creation_date": 1508364105, "answer_id": 46819948, "question_id": 46819728, "link": "https://stackoverflow.com/questions/46819728/importing-a-same-variable-from-multiple-libraries-from-different-folder/46819948#46819948", "title": "Importing a same variable from multiple libraries from different folder", "body": "<p>If you want to import your own <code>.py</code>, just place them in the same directory as the program that is calling it. For example:</p>\n\n<p><code>from mymodule import *</code></p>\n\n<p>This lets you run all functions and methods in that file. </p>\n"}], "owner": {"reputation": 39, "user_id": 5708537, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh6.googleusercontent.com/-SMnxQAAtJaI/AAAAAAAAAAI/AAAAAAAAAfM/CDWWP8QgFk0/photo.jpg?sz=128", "display_name": "Taapsa", "link": "https://stackoverflow.com/users/5708537/taapsa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1513600348, "creation_date": 1508362985, "last_edit_date": 1508499082, "question_id": 46819728, "link": "https://stackoverflow.com/questions/46819728/importing-a-same-variable-from-multiple-libraries-from-different-folder", "title": "Importing a same variable from multiple libraries from different folder", "body": "<p>I have a folder which contains .py scripts and each contains a same variable which I need in other script if that certain script is used from that folder. </p>\n\n<ul>\n<li>folder_x\n\n<ul>\n<li>main.py</li>\n<li>folder_y\n\n<ul>\n<li>script1.py</li>\n<li>script2.py</li>\n<li>script3.py</li>\n</ul></li>\n</ul></li>\n</ul>\n\n<p>So all the scripts are not used at the same time just one of them.</p>\n\n<p>I found this solution <a href=\"https://stackoverflow.com/a/35524184/5708537\">https://stackoverflow.com/a/35524184/5708537</a>\nAnd it works well but I have to list all the scripts manually.\nI thought that I automate this and make a list of the files, and strip down the .py ending:</p>\n\n<pre><code>path = '/home/folder_x/folder_y'\nfiles = os.listdir(path)\nmodule_list = [i for i in files if i.endswith('.py')]\nmodule_list = [os.path.splitext(x)[0] for x in module_list]\n</code></pre>\n\n<p>Works like a charm.</p>\n\n<p>But this part of the code still thinks that the scripts are in folder_x</p>\n\n<pre><code>variables = {}\nfor mod_name in module_list:\nmod = import_module(mod_name)\nvariables[mod_name] = getattr(mod, 'var')\n</code></pre>\n\n<p>So how can I tell to that the scripts are in folder_y and take that variable from those? </p>\n\n<p>Or is there a better way to list scripts/modules from another folder, and get a variable from each of those?</p>\n"}, {"tags": ["python", "matplotlib", "machine-learning"], "answers": [{"tags": [], "owner": {"reputation": 14106, "user_id": 1391671, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f24419d9b9d95de452c5df62728fae28?s=128&d=identicon&r=PG", "display_name": "Igor Raush", "link": "https://stackoverflow.com/users/1391671/igor-raush"}, "is_accepted": true, "score": 8, "last_activity_date": 1508366333, "creation_date": 1508366333, "answer_id": 46820314, "question_id": 46819664, "link": "https://stackoverflow.com/questions/46819664/how-to-add-labels-to-t-sne-in-python/46820314#46820314", "title": "How to add labels to t-SNE in python", "body": "<p>You can plot each category separately on the same axes, and let Matplotlib generate the colors and legend:</p>\n\n<pre><code>fig, ax = plt.subplots()\n\ngroups = pd.DataFrame(X_tsne, columns=['x', 'y']).assign(category=y).groupby('category')\nfor name, points in groups:\n    ax.scatter(points.x, points.y, label=name)\n\nax.legend()\n</code></pre>\n\n<p>For randomly generated <code>X</code>, this gives</p>\n\n<p><a href=\"https://i.stack.imgur.com/INeNr.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/INeNr.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 6193, "user_id": 4544413, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e76680e93b59e0f38238f5a0c47d1ca3?s=128&d=identicon&r=PG&f=1", "display_name": "Luis Ramon Ramirez Rodriguez", "link": "https://stackoverflow.com/users/4544413/luis-ramon-ramirez-rodriguez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4289, "favorite_count": 1, "accepted_answer_id": 46820314, "answer_count": 1, "score": 5, "last_activity_date": 1508428429, "creation_date": 1508362679, "last_edit_date": 1508428429, "question_id": 46819664, "link": "https://stackoverflow.com/questions/46819664/how-to-add-labels-to-t-sne-in-python", "title": "How to add labels to t-SNE in python", "body": "<p>I'm using t-SNE to searching for relations on a dataset which have seven features.</p>\n\n<p><a href=\"https://i.stack.imgur.com/JTG4T.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/JTG4T.png\" alt=\"enter image description here\"></a></p>\n\n<p>I'm using a dictionary to assing colors to the <code>y</code> labels on the plot:</p>\n\n<pre><code>encoding = {'d0': 0, 'd1': 1, 'd2': 2, 'd3': 3, 'd4': 4, 'd5': 5, 'd6': 6, 'd7': 7}\n\nplt.scatter(X_tsne[:, 0], X_tsne[:, 1], c=y['label'].apply(lambda x: city_encoding[x]))\nplt.show()\n</code></pre>\n\n<p>The problem here is that is not clear which color corresponds to which label. The dataset actually has over 100 labels, so it's not something I'd like to handle manually.</p>\n\n<p><a href=\"https://i.stack.imgur.com/ufAnu.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/ufAnu.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "antlr", "antlr4"], "answers": [{"tags": [], "owner": {"reputation": 252, "user_id": 3840400, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/45f4f51b158b4781fcf678b30c807c78?s=128&d=identicon&r=PG&f=1", "display_name": "Jehandad", "link": "https://stackoverflow.com/users/3840400/jehandad"}, "is_accepted": false, "score": 3, "last_activity_date": 1508460441, "last_edit_date": 1508460441, "creation_date": 1508362344, "answer_id": 46819595, "question_id": 46819594, "link": "https://stackoverflow.com/questions/46819594/error-in-antlr4-generated-python-code/46819595#46819595", "title": "Error in ANTLR4 generated Python code", "body": "<p>The buggy code is a result of poor symbol choice in the ANTLR grammar. Since the generated python code uses the variable name <code>state</code> therefore if the grammar also contains the word <code>state</code> the generated code will have the above problem. The solution is to rename the term in your grammar.</p>\n"}], "owner": {"reputation": 252, "user_id": 3840400, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/45f4f51b158b4781fcf678b30c807c78?s=128&d=identicon&r=PG&f=1", "display_name": "Jehandad", "link": "https://stackoverflow.com/users/3840400/jehandad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1508460441, "creation_date": 1508362344, "question_id": 46819594, "link": "https://stackoverflow.com/questions/46819594/error-in-antlr4-generated-python-code", "title": "Error in ANTLR4 generated Python code", "body": "<p>Python (both 2/3) generated from ANTLR4 grammar results in the following lines of code in the grammar's parser python module:</p>\n\n<pre><code>self.state = 79\nself.state()\n</code></pre>\n\n<p>As expected this results in the following error:</p>\n\n<pre><code>TypeError: 'int' object is not callable\n</code></pre>\n"}, {"tags": ["python", "amazon-web-services", "amazon-s3", "boto3"], "comments": [{"owner": {"reputation": 1633, "user_id": 6502500, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/EnuRp.png?s=128&g=1", "display_name": "Mangohero1", "link": "https://stackoverflow.com/users/6502500/mangohero1"}, "edited": false, "score": 0, "creation_date": 1508362544, "post_id": 46819590, "comment_id": 80586734, "body": "<code>delete_objects</code> <i>should</i> let you delete objects regardless of the version. I&#39;m not 100% sure"}, {"owner": {"reputation": 291, "user_id": 7938494, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8uyA2.png?s=128&g=1", "display_name": "rooscous", "link": "https://stackoverflow.com/users/7938494/rooscous"}, "reply_to_user": {"reputation": 1633, "user_id": 6502500, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/EnuRp.png?s=128&g=1", "display_name": "Mangohero1", "link": "https://stackoverflow.com/users/6502500/mangohero1"}, "edited": false, "score": 1, "creation_date": 1508363382, "post_id": 46819590, "comment_id": 80587088, "body": "ok, I will have to test this. It has an optional <code>VersionId</code> parameter, so that makes me think that if I do not explicitly provide the version id for each object, it will just perform a soft delete (delete marker only)."}, {"owner": {"reputation": 1633, "user_id": 6502500, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/EnuRp.png?s=128&g=1", "display_name": "Mangohero1", "link": "https://stackoverflow.com/users/6502500/mangohero1"}, "edited": false, "score": 0, "creation_date": 1508363443, "post_id": 46819590, "comment_id": 80587107, "body": "Nope.. just tried it. thought it would just delete all of them if I didn&#39;t specify the <code>VersionId</code> parameter, but just did the latest one"}, {"owner": {"reputation": 291, "user_id": 7938494, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8uyA2.png?s=128&g=1", "display_name": "rooscous", "link": "https://stackoverflow.com/users/7938494/rooscous"}, "reply_to_user": {"reputation": 1633, "user_id": 6502500, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/EnuRp.png?s=128&g=1", "display_name": "Mangohero1", "link": "https://stackoverflow.com/users/6502500/mangohero1"}, "edited": false, "score": 0, "creation_date": 1508363471, "post_id": 46819590, "comment_id": 80587123, "body": "If I have to provide each version id explicitly, then I will have to get the list of version ids and iterate over each one individually. Really don&#39;t want to have to do that."}, {"owner": {"reputation": 291, "user_id": 7938494, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8uyA2.png?s=128&g=1", "display_name": "rooscous", "link": "https://stackoverflow.com/users/7938494/rooscous"}, "reply_to_user": {"reputation": 1633, "user_id": 6502500, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/EnuRp.png?s=128&g=1", "display_name": "Mangohero1", "link": "https://stackoverflow.com/users/6502500/mangohero1"}, "edited": false, "score": 0, "creation_date": 1508363531, "post_id": 46819590, "comment_id": 80587143, "body": "Was it a delete marker added? Or was it a hard delete of the latest version?"}, {"owner": {"reputation": 1633, "user_id": 6502500, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/EnuRp.png?s=128&g=1", "display_name": "Mangohero1", "link": "https://stackoverflow.com/users/6502500/mangohero1"}, "edited": false, "score": 0, "creation_date": 1508363745, "post_id": 46819590, "comment_id": 80587227, "body": "When I first did it it was a delete marker. I never provided the version Id, just kept running it over and over again then discovered it actually got permanently deleted. Though looking at the response, I can&#39;t tell when it actually gets to hard deleting"}, {"owner": {"reputation": 45894, "user_id": 271415, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8648256cc53b261c5e1d266380a256fc?s=128&d=identicon&r=PG", "display_name": "jarmod", "link": "https://stackoverflow.com/users/271415/jarmod"}, "edited": false, "score": 1, "creation_date": 1508363870, "post_id": 46819590, "comment_id": 80587272, "body": "I highly recommend the documentation: <a href=\"http://docs.aws.amazon.com/AmazonS3/latest/dev/DeletingObjectVersions.html\" rel=\"nofollow noreferrer\">docs.aws.amazon.com/AmazonS3/latest/dev/&hellip;</a>."}, {"owner": {"reputation": 1633, "user_id": 6502500, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/EnuRp.png?s=128&g=1", "display_name": "Mangohero1", "link": "https://stackoverflow.com/users/6502500/mangohero1"}, "reply_to_user": {"reputation": 45894, "user_id": 271415, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8648256cc53b261c5e1d266380a256fc?s=128&d=identicon&r=PG", "display_name": "jarmod", "link": "https://stackoverflow.com/users/271415/jarmod"}, "edited": false, "score": 0, "creation_date": 1508363989, "post_id": 46819590, "comment_id": 80587326, "body": "@jarmod, good point. I also read in the <a href=\"https://boto3.readthedocs.io/en/latest/reference/services/s3.html#S3.Client.delete_object\" rel=\"nofollow noreferrer\"><code>boto3</code> documentation</a> it won&#39;t delete the object if you don&#39;t provide Version ID there either.."}, {"owner": {"reputation": 1633, "user_id": 6502500, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/EnuRp.png?s=128&g=1", "display_name": "Mangohero1", "link": "https://stackoverflow.com/users/6502500/mangohero1"}, "edited": false, "score": 0, "creation_date": 1508364253, "post_id": 46819590, "comment_id": 80587412, "body": "Guess you can&#39;t really do it without iterating over all versions. But is there a way to get the versions if they have a delete marker on them?"}], "answers": [{"comments": [{"owner": {"reputation": 291, "user_id": 7938494, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8uyA2.png?s=128&g=1", "display_name": "rooscous", "link": "https://stackoverflow.com/users/7938494/rooscous"}, "edited": false, "score": 0, "creation_date": 1508431137, "post_id": 46820207, "comment_id": 80617212, "body": "Hi jarmod. Thanks for the response -- I did read the documentation, but I wanted to know if this is really the only way to do it (i.e. get a list of all versions of the object and delete each one iteratively)."}, {"owner": {"reputation": 3373, "user_id": 340236, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/3Fwjr.jpg?s=128&g=1", "display_name": "San", "link": "https://stackoverflow.com/users/340236/san"}, "edited": false, "score": 1, "creation_date": 1555345055, "post_id": 46820207, "comment_id": 98069500, "body": "This should really be upvoted more as it sheds light on the actual workings through documentation."}], "tags": [], "owner": {"reputation": 45894, "user_id": 271415, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8648256cc53b261c5e1d266380a256fc?s=128&d=identicon&r=PG", "display_name": "jarmod", "link": "https://stackoverflow.com/users/271415/jarmod"}, "is_accepted": false, "score": 3, "last_activity_date": 1508365699, "creation_date": 1508365699, "answer_id": 46820207, "question_id": 46819590, "link": "https://stackoverflow.com/questions/46819590/delete-all-versions-of-an-object-in-s3-using-python/46820207#46820207", "title": "Delete all versions of an object in S3 using python?", "body": "<p>The <a href=\"http://docs.aws.amazon.com/AmazonS3/latest/dev/DeletingObjectVersions.html\" rel=\"nofollow noreferrer\">documentation</a> is helpful here:</p>\n\n<ol>\n<li>When versioning is enabled in an S3 bucket, a simple DeleteObject request cannot permanently delete an object from that bucket. Instead, Amazon S3 inserts a delete marker (which is effectively a new version of the object with its own version ID).</li>\n<li>When you try to GET an object whose current version is a delete marker, S3 behaves as if the object has been deleted (even though it has not) and returns a 404 error.</li>\n<li>To permanently delete an object from a versioned bucket, use DeleteObject, with the relevant version ID, for each and every version of the object (and that includes the <a href=\"http://docs.aws.amazon.com/AmazonS3/latest/dev/RemDelMarker.html\" rel=\"nofollow noreferrer\">delete markers</a>).</li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 1598, "user_id": 168874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a64b864ee678be35beb122245f72d72?s=128&d=identicon&r=PG", "display_name": "gene_wood", "link": "https://stackoverflow.com/users/168874/gene-wood"}, "edited": false, "score": 1, "creation_date": 1545322938, "post_id": 46820344, "comment_id": 94592067, "body": "If your file doesn&#39;t have a <code>DeleteMarker</code> this solution will throw an exception. I added <a href=\"https://stackoverflow.com/a/53872419/168874\">a solution here</a> that accounts for the case where a file does or doesn&#39;t have a <code>DeleteMarker</code>"}], "tags": [], "owner": {"reputation": 1633, "user_id": 6502500, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/EnuRp.png?s=128&g=1", "display_name": "Mangohero1", "link": "https://stackoverflow.com/users/6502500/mangohero1"}, "is_accepted": true, "score": 3, "last_activity_date": 1508366560, "creation_date": 1508366560, "answer_id": 46820344, "question_id": 46819590, "link": "https://stackoverflow.com/questions/46819590/delete-all-versions-of-an-object-in-s3-using-python/46820344#46820344", "title": "Delete all versions of an object in S3 using python?", "body": "<p>As a supplement to <a href=\"https://stackoverflow.com/users/271415/jarmod\">@jarmod</a>'s answer, here is a way I developed a workaround to \"hard deleting\" an object (with delete markered objects included);</p>\n\n<pre><code>def get_all_versions(bucket, filename):\n    s3 = boto3.client('s3')\n    keys = [\"Versions\", \"DeleteMarkers\"]\n    results = []\n    for k in keys:\n        response = s3.list_object_versions(Bucket=bucket)[k]\n        to_delete = [r[\"VersionId\"] for r in response if r[\"Key\"] == filename]\n    results.extend(to_delete)\n    return results\n\nbucket = \"YOUR BUCKET NAME\"\nfile = \"YOUR FILE\"\n\nfor version in get_all_versions(bucket, file):\n    s3.delete_object(Bucket=bucket, Key=file, VersionId=version)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1598, "user_id": 168874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a64b864ee678be35beb122245f72d72?s=128&d=identicon&r=PG", "display_name": "gene_wood", "link": "https://stackoverflow.com/users/168874/gene-wood"}, "edited": false, "score": 0, "creation_date": 1545323035, "post_id": 50188717, "comment_id": 94592112, "body": "This solution doesn&#39;t delete <code>DeleteMarker</code>s. I added <a href=\"https://stackoverflow.com/a/53872419/168874\">a solution here</a> that accounts for the case where a file does or doesn&#39;t have a <code>DeleteMarker</code>"}], "tags": [], "owner": {"reputation": 470, "user_id": 9472702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89634be52063699282167b4c6ba2055f?s=128&d=identicon&r=PG", "display_name": "Mahesh Mogal", "link": "https://stackoverflow.com/users/9472702/mahesh-mogal"}, "is_accepted": false, "score": 0, "last_activity_date": 1525518333, "creation_date": 1525518333, "answer_id": 50188717, "question_id": 46819590, "link": "https://stackoverflow.com/questions/46819590/delete-all-versions-of-an-object-in-s3-using-python/50188717#50188717", "title": "Delete all versions of an object in S3 using python?", "body": "<p>You can delete an object with all of its versions using following code</p>\n\n<pre><code>session = boto3.Session(aws_access_key_id, aws_secret_access_key)\n\nbucket_name = 'bucket_name'\nobject_name = 'object_name'\n\ns3 = session.client('s3')\n\nversions = s3.list_object_versions (Bucket = bucket_name, Prefix = object_name)\nversion_list = versions.get('Versions')\nfor version in version_list:\n    versionId = version.get('VersionId')\n    s3.delete_object(Bucket = bucket_name, Key= object_name, VersionId = versionId)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1598, "user_id": 168874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a64b864ee678be35beb122245f72d72?s=128&d=identicon&r=PG", "display_name": "gene_wood", "link": "https://stackoverflow.com/users/168874/gene-wood"}, "edited": false, "score": 1, "creation_date": 1545322991, "post_id": 53287749, "comment_id": 94592090, "body": "I added <a href=\"https://stackoverflow.com/a/53872419/168874\">a solution here</a> that uses a paginator to page through the results instead of repeating the call 10 times."}, {"owner": {"reputation": 467, "user_id": 4590025, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f1669a5d939c6987ad0ca0053b2516c3?s=128&d=identicon&r=PG&f=1", "display_name": "DJ_Stuffy_K", "link": "https://stackoverflow.com/users/4590025/dj-stuffy-k"}, "edited": false, "score": 0, "creation_date": 1610656145, "post_id": 53287749, "comment_id": 116208972, "body": "@Hari can you modify answer to work with s3 = session.resource(&#39;s3&#39;) bucket = s3.Bucket(BUCKET)"}], "tags": [], "owner": {"reputation": 21, "user_id": 10647972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ff63455a193667e4ce6358b976ac3b2?s=128&d=identicon&r=PG&f=1", "display_name": "Hari", "link": "https://stackoverflow.com/users/10647972/hari"}, "is_accepted": false, "score": 2, "last_activity_date": 1542135248, "creation_date": 1542135248, "answer_id": 53287749, "question_id": 46819590, "link": "https://stackoverflow.com/questions/46819590/delete-all-versions-of-an-object-in-s3-using-python/53287749#53287749", "title": "Delete all versions of an object in S3 using python?", "body": "<p>This post was super helpful without this we would have spent tremendous amount of time cleaning up our S3 folders.  </p>\n\n<p>We had a requirement to clean up specific folders only.  So I tried the following code and it worked like a charm.  Also note that I am iterating through the 10 times to delete more than 1000 objects limit that function has.  Feel free to modify the limit as you wish.  </p>\n\n<pre><code>import boto3\nsession = boto3.Session(aws_access_key_id='&lt;YOUR ACCESS KEY&gt;',aws_secret_access_key='&lt;YOUR SECRET KEY&gt;')\n\nbucket_name = '&lt;BUCKET NAME&gt;'\nobject_name = '&lt;KEY NAME&gt;'\n\ns3 = session.client('s3')\n\nfor i in range(10):\n   versions = s3.list_object_versions (Bucket = bucket_name, Prefix = object_name)\n#print (versions)\n   version_list = versions.get('Versions')\n   for version in version_list:\n      keyName = version.get('Key')\n      versionId = version.get('VersionId')\n      print (keyName + ':' + versionId)\n      s3.delete_object(Bucket = bucket_name, Key= keyName, VersionId = versionId)\n   marker_list = versions.get('DeleteMarkers')\n#print(marker_list)\n   for marker in marker_list:\n      keyName1 = marker.get('Key')\n      versionId1 = marker.get('VersionId')\n      print (keyName1 + ':' + versionId1)\n      s3.delete_object(Bucket = bucket_name, Key= keyName1, VersionId = versionId1)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 401, "user_id": 1051674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f013ac2048f2317e7796cf53b11af28?s=128&d=identicon&r=PG", "display_name": "Igor Kryltsov", "link": "https://stackoverflow.com/users/1051674/igor-kryltsov"}, "edited": false, "score": 0, "creation_date": 1587642135, "post_id": 53872419, "comment_id": 108594427, "body": "Can you extend it to delete all files and all delete markers, please? Basically a version that will, when completed, allow deleting a bucket that will be empty."}, {"owner": {"reputation": 1598, "user_id": 168874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a64b864ee678be35beb122245f72d72?s=128&d=identicon&r=PG", "display_name": "gene_wood", "link": "https://stackoverflow.com/users/168874/gene-wood"}, "reply_to_user": {"reputation": 401, "user_id": 1051674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f013ac2048f2317e7796cf53b11af28?s=128&d=identicon&r=PG", "display_name": "Igor Kryltsov", "link": "https://stackoverflow.com/users/1051674/igor-kryltsov"}, "edited": false, "score": 0, "creation_date": 1587738013, "post_id": 53872419, "comment_id": 108635268, "body": "@IgorKryltsov It should delete DeleteMarkers. The line that says `    versions.extend(response.get(&#39;DeleteMarkers&#39;, []))` is meant to iterate over DeleteMarkers as well and delete them. When you run it does it not do that?"}, {"owner": {"reputation": 401, "user_id": 1051674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f013ac2048f2317e7796cf53b11af28?s=128&d=identicon&r=PG", "display_name": "Igor Kryltsov", "link": "https://stackoverflow.com/users/1051674/igor-kryltsov"}, "edited": false, "score": 0, "creation_date": 1587874465, "post_id": 53872419, "comment_id": 108678390, "body": "It is probably outside of the scope of this question, sorry. I want to empty versioned bucket, including delete markers, so I can drop this bucket."}, {"owner": {"reputation": 1598, "user_id": 168874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a64b864ee678be35beb122245f72d72?s=128&d=identicon&r=PG", "display_name": "gene_wood", "link": "https://stackoverflow.com/users/168874/gene-wood"}, "reply_to_user": {"reputation": 401, "user_id": 1051674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f013ac2048f2317e7796cf53b11af28?s=128&d=identicon&r=PG", "display_name": "Igor Kryltsov", "link": "https://stackoverflow.com/users/1051674/igor-kryltsov"}, "edited": false, "score": 0, "creation_date": 1587877766, "post_id": 53872419, "comment_id": 108679005, "body": "@IgorKryltsov Indeed, the code above should empty a versioned bucket, including delete markers. When you run it does it not do this?"}, {"owner": {"reputation": 467, "user_id": 4590025, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f1669a5d939c6987ad0ca0053b2516c3?s=128&d=identicon&r=PG&f=1", "display_name": "DJ_Stuffy_K", "link": "https://stackoverflow.com/users/4590025/dj-stuffy-k"}, "edited": false, "score": 0, "creation_date": 1610656162, "post_id": 53872419, "comment_id": 116208979, "body": "how do I use it via <code>s3 = session.resource(&#39;s3&#39;) bucket = s3.Bucket(BUCKET)</code>"}], "tags": [], "owner": {"reputation": 1598, "user_id": 168874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a64b864ee678be35beb122245f72d72?s=128&d=identicon&r=PG", "display_name": "gene_wood", "link": "https://stackoverflow.com/users/168874/gene-wood"}, "is_accepted": false, "score": 8, "last_activity_date": 1545322861, "creation_date": 1545322861, "answer_id": 53872419, "question_id": 46819590, "link": "https://stackoverflow.com/questions/46819590/delete-all-versions-of-an-object-in-s3-using-python/53872419#53872419", "title": "Delete all versions of an object in S3 using python?", "body": "<p>I had trouble using the other solutions to this question so here's mine.</p>\n\n<pre><code>import boto3\nbucket = \"bucket name goes here\"\nfilename = \"filename goes here\"\n\nclient = boto3.client('s3')\npaginator = client.get_paginator('list_object_versions')\nresponse_iterator = paginator.paginate(Bucket=bucket)\nfor response in response_iterator:\n    versions = response.get('Versions', [])\n    versions.extend(response.get('DeleteMarkers', []))\n    for version_id in [x['VersionId'] for x in versions\n                       if x['Key'] == filename and x['VersionId'] != 'null']:\n        print('Deleting {} version {}'.format(filename, version_id))\n        client.delete_object(Bucket=bucket, Key=filename, VersionId=version_id)\n</code></pre>\n\n<p>This code deals with the cases where</p>\n\n<ul>\n<li>object versioning isn't actually turned on</li>\n<li>there are <a href=\"https://docs.aws.amazon.com/AmazonS3/latest/dev/DeleteMarker.html\" rel=\"noreferrer\">DeleteMarker</a>s</li>\n<li>there are no DeleteMarkers</li>\n<li>there are more versions of a given file than fit in a single API response</li>\n</ul>\n\n<p><a href=\"https://stackoverflow.com/a/50188717/168874\">Mahesh Mogal's answer</a> doesn't delete <code>DeleteMarker</code>s. <a href=\"https://stackoverflow.com/a/46820344/168874\">Mangohero1's answer</a> fails if the object is missing a <code>DeleteMarker</code>. <a href=\"https://stackoverflow.com/a/53287749/168874\">Hari's answer</a> repeats 10 times (to workaround missing pagination logic).</p>\n"}, {"comments": [{"owner": {"reputation": 1598, "user_id": 168874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a64b864ee678be35beb122245f72d72?s=128&d=identicon&r=PG", "display_name": "gene_wood", "link": "https://stackoverflow.com/users/168874/gene-wood"}, "edited": false, "score": 2, "creation_date": 1546928104, "post_id": 54081535, "comment_id": 95005101, "body": "Excellent, I didn&#39;t know about <a href=\"https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/s3.html#S3.Client.delete_objects\" rel=\"nofollow noreferrer\"><code>delete_objects</code></a>. Out of curiosity, why do you build the two lists, <code>delete_marker_list</code> and <code>version_list</code> independently and then iterate over them independently? Would it work to just build one list combining all versions and delete markers, then iterate over that single list in steps of 1000?"}, {"owner": {"reputation": 115, "user_id": 3704443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec05d53df6e258dbc0a8c05da7eef80e?s=128&d=identicon&r=PG&f=1", "display_name": "AndrewC", "link": "https://stackoverflow.com/users/3704443/andrewc"}, "reply_to_user": {"reputation": 1598, "user_id": 168874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a64b864ee678be35beb122245f72d72?s=128&d=identicon&r=PG", "display_name": "gene_wood", "link": "https://stackoverflow.com/users/168874/gene-wood"}, "edited": false, "score": 3, "creation_date": 1546979638, "post_id": 54081535, "comment_id": 95031408, "body": "Just for clarity."}, {"owner": {"reputation": 1842, "user_id": 472153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8769b1ed68930f7adee6b6ed3425f2e?s=128&d=identicon&r=PG", "display_name": "Evgeny Goldin", "link": "https://stackoverflow.com/users/472153/evgeny-goldin"}, "edited": false, "score": 0, "creation_date": 1581536488, "post_id": 54081535, "comment_id": 106471665, "body": "Thanks a lot! Used it to nuke all not latest versions (not version[&#39;IsLatest&#39;]) after disabling bucket versioning."}, {"owner": {"reputation": 465, "user_id": 8419892, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XcwAf.jpg?s=128&g=1", "display_name": "EmmaYang", "link": "https://stackoverflow.com/users/8419892/emmayang"}, "edited": false, "score": 0, "creation_date": 1585954857, "post_id": 54081535, "comment_id": 107957102, "body": "This is really great example . Thank you"}], "tags": [], "owner": {"reputation": 115, "user_id": 3704443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec05d53df6e258dbc0a8c05da7eef80e?s=128&d=identicon&r=PG&f=1", "display_name": "AndrewC", "link": "https://stackoverflow.com/users/3704443/andrewc"}, "is_accepted": false, "score": 9, "last_activity_date": 1546893522, "creation_date": 1546893522, "answer_id": 54081535, "question_id": 46819590, "link": "https://stackoverflow.com/questions/46819590/delete-all-versions-of-an-object-in-s3-using-python/54081535#54081535", "title": "Delete all versions of an object in S3 using python?", "body": "<p>The other answers delete objects individually. It is more efficient to use the <strong>delete_objects</strong> boto3 call and batch process your delete. See the code below for a function which collects all objects and deletes in batches of 1000:</p>\n\n<pre><code>bucket = 'bucket-name'\ns3_client = boto3.client('s3')\nobject_response_paginator = s3_client.get_paginator('list_object_versions')\n\ndelete_marker_list = []\nversion_list = []\n\nfor object_response_itr in object_response_paginator.paginate(Bucket=bucket):\n    if 'DeleteMarkers' in object_response_itr:\n        for delete_marker in object_response_itr['DeleteMarkers']:\n            delete_marker_list.append({'Key': delete_marker['Key'], 'VersionId': delete_marker['VersionId']})\n\n    if 'Versions' in object_response_itr:\n        for version in object_response_itr['Versions']:\n            version_list.append({'Key': version['Key'], 'VersionId': version['VersionId']})\n\nfor i in range(0, len(delete_marker_list), 1000):\n    response = s3_client.delete_objects(\n        Bucket=bucket,\n        Delete={\n            'Objects': delete_marker_list[i:i+1000],\n            'Quiet': True\n        }\n    )\n    print(response)\n\nfor i in range(0, len(version_list), 1000):\n    response = s3_client.delete_objects(\n        Bucket=bucket,\n        Delete={\n            'Objects': version_list[i:i+1000],\n            'Quiet': True\n        }\n    )\n    print(response)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 12596097, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-VYGCfcXjRfk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfTgYl_wRcyO3rTHkP-g5Kc_pNnXA/photo.jpg?sz=128", "display_name": "\u05d9\u05d5\u05d1\u05dc \u05de\u05d5\u05e0\u05d3", "link": "https://stackoverflow.com/users/12596097/%d7%99%d7%95%d7%91%d7%9c-%d7%9e%d7%95%d7%a0%d7%93"}, "is_accepted": false, "score": 0, "last_activity_date": 1591096905, "creation_date": 1591096905, "answer_id": 62150860, "question_id": 46819590, "link": "https://stackoverflow.com/questions/46819590/delete-all-versions-of-an-object-in-s3-using-python/62150860#62150860", "title": "Delete all versions of an object in S3 using python?", "body": "<p>this script will delete all version of all object with prefix - </p>\n\n<pre><code>s3 = boto3.resource(\"s3\")\nclient = boto3.client(\"s3\")\ns3_bucket = s3.Bucket(bucket_name)\nfor obj in s3_bucket.objects.filter(Prefix=\"\"):\n\n    response = client.list_object_versions(Bucket=bucket_name, Prefix=obj.key)\n\n    while \"Versions\" in response:\n        to_delete = [\n            {\"Key\": ver[\"Key\"], \"VersionId\": ver[\"VersionId\"]}\n            for ver in response[\"Versions\"]\n        ]\n\n        delete = {\"Objects\": to_delete}\n\n        client.delete_objects(Bucket=bucket_name, Delete=delete)\n        response = client.list_object_versions(Bucket=bucket_name, Prefix=obj.key)\n\n    client.delete_object(Bucket=bucket_name, Key=obj.key)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8455, "user_id": 850326, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/cd6f8a1a0f5957695e1d9625868d2642?s=128&d=identicon&r=PG", "display_name": "djhaskin987", "link": "https://stackoverflow.com/users/850326/djhaskin987"}, "edited": false, "score": 0, "creation_date": 1597939955, "post_id": 62990350, "comment_id": 112302976, "body": "Saved my bacon!"}], "tags": [], "owner": {"reputation": 261, "user_id": 10619957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91c5a834751a73966ec23528e8433c18?s=128&d=identicon&r=PG&f=1", "display_name": "yk125", "link": "https://stackoverflow.com/users/10619957/yk125"}, "is_accepted": false, "score": 2, "last_activity_date": 1595229451, "creation_date": 1595229451, "answer_id": 62990350, "question_id": 46819590, "link": "https://stackoverflow.com/questions/46819590/delete-all-versions-of-an-object-in-s3-using-python/62990350#62990350", "title": "Delete all versions of an object in S3 using python?", "body": "<p>Fewer line solution.</p>\n<pre><code>import boto3\n\ndef delete_versions(bucket, objects=None): # `objects` is either list of str or None\n  bucket = boto3.resource('s3').Bucket(bucket)\n  if objects: # delete specified objects\n    [version.delete() for version in bucket.object_versions.all() if version.object_key in objects]\n  else: # or delete all objects in `bucket`\n    [version.delete() for version in bucket.object_versions.all()]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7061, "user_id": 839338, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/12639eb17fa99d25a271a54f031feb67?s=128&d=identicon&r=PG", "display_name": "Dan-Dev", "link": "https://stackoverflow.com/users/839338/dan-dev"}, "is_accepted": false, "score": 1, "last_activity_date": 1596635017, "creation_date": 1596635017, "answer_id": 63266533, "question_id": 46819590, "link": "https://stackoverflow.com/questions/46819590/delete-all-versions-of-an-object-in-s3-using-python/63266533#63266533", "title": "Delete all versions of an object in S3 using python?", "body": "<p>You can use object_versions.</p>\n<pre><code>def delete_all_versions(bucket_name: str, prefix: str):\n    s3 = boto3.resource('s3')\n    bucket = s3.Bucket(bucket_name)\n    if prefix is None:\n        bucket.object_versions.delete()\n    else:\n        bucket.object_versions.filter(Prefix=prefix).delete()\n\ndelete_all_versions(&quot;my_bucket&quot;, None) # empties the entire bucket\ndelete_all_versions(&quot;my_bucket&quot;, &quot;my_prefix/&quot;) # deletes all objects matching the prefix (can be only one if only one matches)\n</code></pre>\n"}], "owner": {"reputation": 291, "user_id": 7938494, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8uyA2.png?s=128&g=1", "display_name": "rooscous", "link": "https://stackoverflow.com/users/7938494/rooscous"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13326, "favorite_count": 6, "accepted_answer_id": 46820344, "answer_count": 9, "score": 13, "last_activity_date": 1596635017, "creation_date": 1508362328, "last_edit_date": 1508363207, "question_id": 46819590, "link": "https://stackoverflow.com/questions/46819590/delete-all-versions-of-an-object-in-s3-using-python", "title": "Delete all versions of an object in S3 using python?", "body": "<p>I have a versioned bucket and would like to delete the object (and all of its versions) from the bucket. However, when I try to delete the object from the console, S3 simply adds a delete marker but does not perform a hard delete. </p>\n\n<p>Is it possible to delete all versions of the object (hard delete) with a particular key?:</p>\n\n<pre><code>s3resource = boto3.resource('s3')\nbucket = s3resource.Bucket('my_bucket')\nobj = bucket.Object('my_object_key')\n\n# I would like to delete all versions for the object like so:\nobj.delete_all_versions()\n\n# or delete all versions for all objects like so:\nbucket.objects.delete_all_versions()\n</code></pre>\n"}, {"tags": ["python", "list", "split"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 2728, "user_id": 1996842, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/4b2d8d038befbed92f3df1eef9da821d?s=128&d=identicon&r=PG&f=1", "display_name": "utengr", "link": "https://stackoverflow.com/users/1996842/utengr"}, "edited": false, "score": 0, "creation_date": 1508363471, "post_id": 46819586, "comment_id": 80587122, "body": "@engr_s It&#39;s the second element of the result: <code>(&#39;fairly persistent&#39;)</code>"}, {"owner": {"reputation": 180853, "user_id": 424499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc2071afd499daef001e75e14d7f9cce?s=128&d=identicon&r=PG", "display_name": "Raymond Hettinger", "link": "https://stackoverflow.com/users/424499/raymond-hettinger"}, "edited": false, "score": 0, "creation_date": 1508365545, "post_id": 46819586, "comment_id": 80587836, "body": "Try using itertools.dropwhile() and itertools.takewhile()."}], "answers": [{"tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 0, "last_activity_date": 1508363980, "creation_date": 1508363980, "answer_id": 46819933, "question_id": 46819586, "link": "https://stackoverflow.com/questions/46819586/concatenate-list-elements-that-fall-between-list-elements-of-certain-value/46819933#46819933", "title": "Concatenate list elements that fall between list elements of certain value", "body": "<p>Here's some pseudo-code and real code:</p>\n\n<pre><code>while elements remain in mylist:\n    # Find the next \"DT\" element\n    look at next element\n    while element[1] is not \"DT\":\n        look at next element\n\n    # Watch for \"IN\"; concatenate elements in the meantime.\n    result = []\n    look at next element\n    while element[1] is not \"IN\":\n        result.append(element[0])\n\n    # result is a list of the words you want\n    result_conc = ' '.join(result)\n</code></pre>\n\n<p>Does that get you moving?</p>\n"}, {"comments": [{"owner": {"reputation": 7292, "user_id": 1268941, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d27dc0d604e075ad3281aeb013a419c7?s=128&d=identicon&r=PG&f=1", "display_name": "brucezepplin", "link": "https://stackoverflow.com/users/1268941/brucezepplin"}, "edited": false, "score": 0, "creation_date": 1508399878, "post_id": 46820112, "comment_id": 80597821, "body": "fantastic - works for me and can easy to add in new split tags. thanks."}], "tags": [], "owner": {"reputation": 2728, "user_id": 1996842, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/4b2d8d038befbed92f3df1eef9da821d?s=128&d=identicon&r=PG&f=1", "display_name": "utengr", "link": "https://stackoverflow.com/users/1996842/utengr"}, "is_accepted": true, "score": 1, "last_activity_date": 1508365647, "last_edit_date": 1508365647, "creation_date": 1508365129, "answer_id": 46820112, "question_id": 46819586, "link": "https://stackoverflow.com/questions/46819586/concatenate-list-elements-that-fall-between-list-elements-of-certain-value/46820112#46820112", "title": "Concatenate list elements that fall between list elements of certain value", "body": "<p>Here is one which shall give you the desired result. Maybe you need to optimize it a bit.</p>\n\n<pre><code>my_list = ([('a', u'DT'),\n            ('Satisfactory', u'JJ'),\n            ('tracing', u'VBG'),\n            ('with', u'IN'),\n            ('a', u'DT'),\n            ('fairly', u'RB'),\n            ('persistent', u'JJ'),\n            ('with', u'IN')])\n\nsequence_enable = False\nnew_list = []\nfor i in my_list:\n    if i[1] == 'DT' or i[1] == 'IN':\n        if not sequence_enable: # Start reading values \n            sequence_enable = True\n            temp_str = []\n        else: # stop reading values\n            new_list.append(' '.join(temp_str)) \n            sequence_enable = False\n\n        continue\n    else: # store values\n        if sequence_enable:\n            temp_str.append(i[0])\n\nprint(new_list)\n# output: ['Satisfactory tracing', 'fairly persistent']\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7292, "user_id": 1268941, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d27dc0d604e075ad3281aeb013a419c7?s=128&d=identicon&r=PG&f=1", "display_name": "brucezepplin", "link": "https://stackoverflow.com/users/1268941/brucezepplin"}, "edited": false, "score": 0, "creation_date": 1508399767, "post_id": 46820133, "comment_id": 80597777, "body": "thanks for this. The last command to create new_list complains about list index being out of range. I think this is because <code>temp_list</code> contains mostly empty elements. I can see that you wanted <code>temp_list</code> to pick up elements asis from <code>mylist</code> but this hasn&#39;t happened and I think this causes the error."}, {"owner": {"reputation": 3203, "user_id": 2763915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b53d3b3f8b36383de69ab29d9633251?s=128&d=identicon&r=PG&f=1", "display_name": "atru", "link": "https://stackoverflow.com/users/2763915/atru"}, "reply_to_user": {"reputation": 7292, "user_id": 1268941, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d27dc0d604e075ad3281aeb013a419c7?s=128&d=identicon&r=PG&f=1", "display_name": "brucezepplin", "link": "https://stackoverflow.com/users/1268941/brucezepplin"}, "edited": false, "score": 0, "creation_date": 1508426683, "post_id": 46820133, "comment_id": 80614440, "body": "Glad to help. There was no error for me - all this was checked with the exact example that you provided. Can you post the example that causes the error? Also <code>temp_list</code> is not empty at all."}, {"owner": {"reputation": 3203, "user_id": 2763915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b53d3b3f8b36383de69ab29d9633251?s=128&d=identicon&r=PG&f=1", "display_name": "atru", "link": "https://stackoverflow.com/users/2763915/atru"}, "reply_to_user": {"reputation": 7292, "user_id": 1268941, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d27dc0d604e075ad3281aeb013a419c7?s=128&d=identicon&r=PG&f=1", "display_name": "brucezepplin", "link": "https://stackoverflow.com/users/1268941/brucezepplin"}, "edited": false, "score": 0, "creation_date": 1508428377, "post_id": 46820133, "comment_id": 80615573, "body": "I guess this will only be valid when there are two elements between <code>DT</code> and <code>IN</code>."}, {"owner": {"reputation": 3203, "user_id": 2763915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b53d3b3f8b36383de69ab29d9633251?s=128&d=identicon&r=PG&f=1", "display_name": "atru", "link": "https://stackoverflow.com/users/2763915/atru"}, "reply_to_user": {"reputation": 7292, "user_id": 1268941, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d27dc0d604e075ad3281aeb013a419c7?s=128&d=identicon&r=PG&f=1", "display_name": "brucezepplin", "link": "https://stackoverflow.com/users/1268941/brucezepplin"}, "edited": false, "score": 0, "creation_date": 1508432128, "post_id": 46820133, "comment_id": 80617754, "body": "Edited - now it can handle any number of strings between <code>DT</code> and <code>IN</code>."}], "tags": [], "owner": {"reputation": 3203, "user_id": 2763915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b53d3b3f8b36383de69ab29d9633251?s=128&d=identicon&r=PG&f=1", "display_name": "atru", "link": "https://stackoverflow.com/users/2763915/atru"}, "is_accepted": false, "score": 1, "last_activity_date": 1508432097, "last_edit_date": 1508432097, "creation_date": 1508365207, "answer_id": 46820133, "question_id": 46819586, "link": "https://stackoverflow.com/questions/46819586/concatenate-list-elements-that-fall-between-list-elements-of-certain-value/46820133#46820133", "title": "Concatenate list elements that fall between list elements of certain value", "body": "<p>This is one solution:</p>\n\n<pre><code>idt = [item for item in range(len(mylist)) if mylist[item][1] == u'DT']\njdt = [item for item in range(len(mylist)) if mylist[item][1] == u'IN']\n\nij = zip(idt,jdt)\n\ntemp_list = [mylist[i[0]+1:i[1]] for i in ij]\n\nnew_list = [str(elem[0][0]+ ' ' + elem[1][0]) for elem in temp_list]\n</code></pre>\n\n<p>It first finds the indices of <code>u'DT'</code> and <code>u'IN'</code> in <code>mylist</code>, then it zips them together into a list of tuples, <code>ij</code>. Each tuple is the beginning and end of the interval from which the program is supposed to extract values. The values are first extracted as they appear in <code>mylist</code> into <code>temp_list</code>. Last step forms the target <code>new_list</code> that joins and processes extracted values stored in <code>temp_list</code>.</p>\n\n<p>This solution does not give you values within brackets <code>( )</code> - it seems that to achieve this, elements of <code>new_list</code> would either have to be turned into tuples, i.e. <code>('Satisfactory tracing',)</code> or the bracket would have to be part of the string <code>'(Satisfactory tracing)'</code>.</p>\n\n<p>Edit - solution for any number of strings between <code>DT</code> and <code>IN</code> - everything until <code>new_list</code> is the same, <code>new_list</code> is formed by extracting first element from each element in the sublist of <code>temp_list</code> and joining them into one string,</p>\n\n<pre><code>new_list = [((' ').join(map(lambda x: x[0], sub_el))) for sub_el in temp_list]\n</code></pre>\n\n<p>Testing with</p>\n\n<pre><code>mylist = [('a', u'DT'), ('Satisfactory', u'JJ'), ('Satisfactory', u'JJ'), \n('tracing', u'VBG'),('with', u'IN'),('a', u'DT'),('fairly', u'RB'),\n('persistent', u'JJ'),('with', u'IN'), ('a', u'DT'),('persistent', u'JJ'),\n('with', u'IN')]\n</code></pre>\n\n<p>yields</p>\n\n<pre><code>['Satisfactory Satisfactory tracing', 'fairly persistent', 'persistent']\n</code></pre>\n"}], "owner": {"reputation": 7292, "user_id": 1268941, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d27dc0d604e075ad3281aeb013a419c7?s=128&d=identicon&r=PG&f=1", "display_name": "brucezepplin", "link": "https://stackoverflow.com/users/1268941/brucezepplin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 46820112, "answer_count": 3, "score": -1, "last_activity_date": 1508432097, "creation_date": 1508362304, "last_edit_date": 1508368221, "question_id": 46819586, "link": "https://stackoverflow.com/questions/46819586/concatenate-list-elements-that-fall-between-list-elements-of-certain-value", "title": "Concatenate list elements that fall between list elements of certain value", "body": "<p>Imagine I have the following list:</p>\n\n<pre><code>&gt;&gt;&gt; mylist\n\n[('a', u'DT'),\n ('Satisfactory', u'JJ'),\n ('tracing', u'VBG'),\n ('with', u'IN'),\n ('a', u'DT'),\n ('fairly', u'RB'),\n ('persistent', u'JJ'),\n ('with', u'IN')]\n</code></pre>\n\n<p>How do I concatenate list items that fall between elements that contain <code>u'IN'</code> or <code>u'DT'</code> and return only the concatenated elements i.e:</p>\n\n<pre><code>[('Satisfactory tracing'),\n ('fairly persistent')]\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "shuffle"], "comments": [{"owner": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "edited": false, "score": 0, "creation_date": 1508362603, "post_id": 46819565, "comment_id": 80586759, "body": "<code>list(zin)</code> splits the string into individual letters, then you need to join the letters after the shuffle with <code>print (&#39;&#39;.join(lijst))</code>"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 3, "creation_date": 1508362622, "post_id": 46819565, "comment_id": 80586769, "body": "&quot;it doesn&#39;t work&quot; isn&#39;t an adequate problem specification. <i>How exactly</i> does it not work? What was the output you were expecting, and how does it differ from what you are getting?"}], "answers": [{"tags": [], "owner": {"reputation": 1212, "user_id": 1410394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934e41726f7c81f093332d6ee39dd47c?s=128&d=identicon&r=PG", "display_name": "Ananth Rao", "link": "https://stackoverflow.com/users/1410394/ananth-rao"}, "is_accepted": true, "score": 0, "last_activity_date": 1508362688, "creation_date": 1508362688, "answer_id": 46819667, "question_id": 46819565, "link": "https://stackoverflow.com/questions/46819565/i-need-to-perform-a-shuffle-but-i-cant-seem-to-let-it-work/46819667#46819667", "title": "I need to perform a shuffle but I can&#39;t seem to let it work", "body": "<p>I'm assuming the issue is that this is sorting letters overall rather than simply sorting the words. Rather than converting the string <code>zin</code> to a list by using the built-in <code>list</code> function, what you could do instead would be to split the string by spaces, using the <code>.split()</code> function of the string type. Then, after shuffling, for printing neatly, you could rejoin these words into a single string using the <code>.join()</code> function of the string type.</p>\n\n<p>So something like this:</p>\n\n<pre><code>def swap_lower_upper(zin):\n    print(zin.swapcase())\n\ndef shuffle(zin):\n    import random\n    lijst = zin.split(\" \")\n    random.shuffle(lijst)\n    print (\" \".join(lijst))\n\nswap_lower_upper('Dit IS een test')\nshuffle('Dit IS een test')\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 8798142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66b8d7110c3d283caba88681d8b89c03?s=128&d=identicon&r=PG&f=1", "display_name": "X.Feliers", "link": "https://stackoverflow.com/users/8798142/x-feliers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "closed_date": 1508365180, "accepted_answer_id": 46819667, "answer_count": 1, "score": 0, "last_activity_date": 1508362688, "creation_date": 1508362193, "last_edit_date": 1508362517, "question_id": 46819565, "link": "https://stackoverflow.com/questions/46819565/i-need-to-perform-a-shuffle-but-i-cant-seem-to-let-it-work", "closed_reason": "Not suitable for this site", "title": "I need to perform a shuffle but I can&#39;t seem to let it work", "body": "<p>I am very new to python, and want to make a program that swaps the lower and upper case. </p>\n\n<p>That is no problem, but I am having trouble with shuffling the words.</p>\n\n<p>This is my code:</p>\n\n<pre><code>def swap_lower_upper(zin):\n    print(zin.swapcase())\ndef shuffle(zin):\n    import random\n    lijst = list(zin)\n    random.shuffle(lijst)\n    print (lijst)\nswap_lower_upper('Dit IS een test')\nshuffle('Dit IS een test')\n</code></pre>\n\n<p>I've tried many things but I can't seem to let the shuffle work.</p>\n\n<p>I would greatly appreciate your help!</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["python", "unit-testing", "serialization", "package", "factory-pattern"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1508443687, "post_id": 46819547, "comment_id": 80623795, "body": "Why have you written your <code>try_deserialize</code> in a way that depends on what modules Python has loaded? It sounds like that&#39;s the root problem here."}], "answers": [{"tags": [], "owner": {"reputation": 40991, "user_id": 4794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/f90cd356f2945b284946d5743467d850?s=128&d=identicon&r=PG", "display_name": "Don Kirkby", "link": "https://stackoverflow.com/users/4794/don-kirkby"}, "is_accepted": false, "score": 0, "last_activity_date": 1508554164, "creation_date": 1508554164, "answer_id": 46859594, "question_id": 46819547, "link": "https://stackoverflow.com/questions/46819547/how-to-unit-test-this-python-class/46859594#46859594", "title": "How to unit test this python class?", "body": "<p>The code is hard to test, because the list of token providers is <em>implicit</em>. It depends on which modules have been loaded. I suggest you at least give the <em>option</em> of an explicit list of token providers. Either require the token providers to be registered at start up, or provide an optional parameter for the list of token providers.</p>\n\n<p>Here's the simplest change I can think of:</p>\n\n<pre><code>class AuthenticationToken(object):\n\n    @classmethod\n    def try_deserialize(cls, spec: str, token_providers=None):\n        if token_providers is None:\n            token_providers = cls.__subclasses__()\n        for subclass in token_providers:\n            token = subclass.try_deserialize(spec)\n            if token:\n                return token\n        return None\n</code></pre>\n\n<p>Now your regular code is unchanged, and your test can look like this\uff1a</p>\n\n<pre><code>    def test_bad_case(self):\n        should_be_none = AuthenticationToken.try_deserialize(\n            \"Keyfile\",\n            token_providers=[TestSubclass])\n        self.assertIsNone(should_be_none)\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 8797996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc4b6f946d33c2041d704156eac74ae0?s=128&d=identicon&r=PG&f=1", "display_name": "Refneg Shcrab", "link": "https://stackoverflow.com/users/8797996/refneg-shcrab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 230, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1508554164, "creation_date": 1508362115, "last_edit_date": 1508443430, "question_id": 46819547, "link": "https://stackoverflow.com/questions/46819547/how-to-unit-test-this-python-class", "title": "How to unit test this python class?", "body": "<p>I'm having an issue with the testability of my code. This is related to my class layout and my python package layout.</p>\n\n<p>I hope for one of the following outcomes for this question:</p>\n\n<ol>\n<li>a suggestion to change the class layout, or</li>\n<li>a suggestion to change the package layout, or</li>\n<li>a hint how to test this stuff without layout changes</li>\n</ol>\n\n<h2>The class hierarchy</h2>\n\n<p>The base class is <code>AuthenticationToken</code>. The two classes <code>HardwareToken</code> and <code>Keyfile</code> inherit from it.</p>\n\n<p><code>AuthenticationToken</code>s can be serialized into a string and vice versa. This is how I implement deserialization:</p>\n\n<pre><code>class AuthenticationToken(object):\n\n    @classmethod\n    def try_deserialize(cls, spec: str):\n        for subclass in cls.__subclasses__():\n            token = subclass.try_deserialize(spec)\n            if token:\n                return token\n        return None\n</code></pre>\n\n<h2>The python package layout</h2>\n\n<p>I have one file per class and put them into a package directory</p>\n\n<pre><code>package\n+-- __init__.py\n+-- authentication_token.py\n+-- hardware_token.py\n+-- keyfile.py\n</code></pre>\n\n<p>Now I prefer to reference a class like <code>package.Keyfile</code> instead of <code>package.keyfile.Keyfile</code>. Also all subclass definitions of Authentication token have be seen by python before I can use the <code>try_derialize</code> method. This is why I import all classes in <code>__init__.py</code>:</p>\n\n<pre><code>from .authentication_token import AuthenticationToken\nfrom .hardware_token import HardwareToken\nfrom .keyfile import Keyfile\n</code></pre>\n\n<h2>The testability issue</h2>\n\n<p>Now I would like to unit test the <code>AuthenticationToken</code> class without referencing its subclasses. The idea is to write a <code>TestAutheticationToken</code> class and use it as single subclass during the test:</p>\n\n<pre><code>import unittest\nfrom package import AuthenticationToken\n\nclass TestSubclass(AuthenticationToken):\n    pass\n\nclass TestAuthenticationToken(unittest.TestCase):\n\n    # This test fails\n    def test_bad_case(self):\n        should_be_none = AuthenticationToken.try_deserialize(\"Keyfile\")\n        self.assertIsNone(should_be_none)\n\nif __name__ == '__main__':\n    unittest.main()\n</code></pre>\n\n<p>This test fails because <code>try_deserialize</code> creates an object of type <code>Keyfile</code>. This is because <code>__init__.py</code> is evaluated. This is also the case if I import <code>AuthenticationToken</code> directly from the module:</p>\n\n<pre><code>from package.authentication_token import AuthenticationToken\n</code></pre>\n\n<h2>The question</h2>\n\n<p>So the question is: how can I prevent the classes <code>Keyfile</code> and <code>HardwareToken</code> from being imported when testing <code>AuthenticationToken</code>?</p>\n\n<p>Or otherwise how do I change the class and/or package layout so I can import all classes independtly from each other while still preserving the benefits mentioned above?</p>\n"}, {"tags": ["python", "bit-manipulation", "bitwise-operators"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1508362586, "post_id": 46819546, "comment_id": 80586748, "body": "Why not <code>1110</code>? Do the 1 and 0 have to be adjacent?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1508362946, "post_id": 46819546, "comment_id": 80586926, "body": "You can locate adjacent 1s and 0s by XORing your number with a 1-bit bitwise rotation of your number, and swap an adjacent 1 and 0 by XORing those bits with 11 (appropriately aligned)."}, {"owner": {"reputation": 2736, "user_id": 7124013, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/10153838224557381/picture?type=large", "display_name": "Mason", "link": "https://stackoverflow.com/users/7124013/mason"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1508364103, "post_id": 46819546, "comment_id": 80587365, "body": "Hm, this works when there are only two possible outputs ie. like with <code>1011</code> but it doesn&#39;t and can&#39;t work with <code>1010</code> which should give <code>[1100, 0011, 1001, 0110]</code>"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1508364519, "post_id": 46819546, "comment_id": 80587527, "body": "Sounds like you&#39;re not going through all detections."}, {"owner": {"reputation": 2736, "user_id": 7124013, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/10153838224557381/picture?type=large", "display_name": "Mason", "link": "https://stackoverflow.com/users/7124013/mason"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1508365059, "post_id": 46819546, "comment_id": 80587696, "body": "I&#39;m not sure what you mean by detections. Perhaps I misunderstood your previous comment but the only two possible variations I see of your algorithm are <code>(n^rotate_right(n,4))^n</code> and <code>(n^rotate_left(n,4))^n</code>. Both of these for <code>n=1010</code> give <code>0101</code> which is not a valid output."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1508365257, "post_id": 46819546, "comment_id": 80587759, "body": "Yup, you misunderstood. The 1 bits of <code>n^rotate_right(n,4)</code> (or <code>n^rotate_left(n,4)</code>, either works) tell you where 1s and 0s were adjacent in the original number. XORing that with <code>n</code> doesn&#39;t make any sense."}, {"owner": {"reputation": 2736, "user_id": 7124013, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/10153838224557381/picture?type=large", "display_name": "Mason", "link": "https://stackoverflow.com/users/7124013/mason"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1508365873, "post_id": 46819546, "comment_id": 80587944, "body": "Hm, I see. It was a coincidence that my nonsense worked <code>1011</code>."}, {"owner": {"reputation": 2736, "user_id": 7124013, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/10153838224557381/picture?type=large", "display_name": "Mason", "link": "https://stackoverflow.com/users/7124013/mason"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1508367115, "post_id": 46819546, "comment_id": 80588300, "body": "Alright, it seems that I&#39;ve figured it out. Thanks for the help!"}], "answers": [{"comments": [{"owner": {"reputation": 2736, "user_id": 7124013, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/10153838224557381/picture?type=large", "display_name": "Mason", "link": "https://stackoverflow.com/users/7124013/mason"}, "edited": false, "score": 0, "creation_date": 1508376428, "post_id": 46820603, "comment_id": 80590555, "body": "Yep, this is a very nice, elegant solution!"}], "tags": [], "owner": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "is_accepted": true, "score": 2, "last_activity_date": 1508368545, "creation_date": 1508368545, "answer_id": 46820603, "question_id": 46819546, "link": "https://stackoverflow.com/questions/46819546/finding-the-set-of-n-bit-integers-related-to-a-given-integer-by-single-bit-hopp/46820603#46820603", "title": "Finding the set of n-bit integers related to a given integer by single bit &#39;hopping&#39;", "body": "<p>To do this directly in binary, you have to notice a couple of things about the algorithm. First it always deals with adjacent bits, except for looping around from the first bit to the last. Second those bits must be different, if they're the same swapping them wouldn't do anything.</p>\n\n<p>This code walks a 2-bit mask around the value and tests to see if the bits are different, then uses exclusive-or to swap them.</p>\n\n<pre><code>def bit_hop(x, n):\n    for i in range(n-1):\n        mask = 3 &lt;&lt; i\n        if x &amp; mask != 0 and x &amp; mask != mask:\n            yield x ^ mask\n    mask = (1 &lt;&lt; (n-1)) | 1\n    if x &amp; mask != 0 and x &amp; mask != mask:\n        yield x ^ mask\n</code></pre>\n"}], "owner": {"reputation": 2736, "user_id": 7124013, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/10153838224557381/picture?type=large", "display_name": "Mason", "link": "https://stackoverflow.com/users/7124013/mason"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 46820603, "answer_count": 1, "score": 0, "last_activity_date": 1508368545, "creation_date": 1508362115, "last_edit_date": 1508363882, "question_id": 46819546, "link": "https://stackoverflow.com/questions/46819546/finding-the-set-of-n-bit-integers-related-to-a-given-integer-by-single-bit-hopp", "title": "Finding the set of n-bit integers related to a given integer by single bit &#39;hopping&#39;", "body": "<p>Given an n-bit integer, I want to find the set of n-bit integers which are related to my original integer by the interchange of a single 1 by a single 0 where the interchanged 1 and 0 must be adjacent</p>\n\n<p>So what I want is to find some function such that for example, if I gave it the binary <code>1011</code> (11 in base 10) it returns <code>0111</code> and <code>1101</code> (7 and 13 in base 10) \nie. so this would look like:</p>\n\n<pre><code>&gt;&gt;&gt; bit_hop(11, n=4)\n[7, 13]\n</code></pre>\n\n<p>It's important that this function knows how many bits the number is because my other constraint is that I need this to have periodic boundary conditions such that for example <code>0111</code> would return not only <code>1011</code> but also <code>1110</code>, ie. the edges of the binary number should be adjacent.</p>\n\n<p>Also, as said, only one swapping should be allowed per hop. This means that <code>bit_hop(1010)</code> should return <code>[1100, 0011, 1001, 0110]</code></p>\n\n<p>Does anyone have any ideas on how one might go about doing this? I know that this should involve some clever usage of the <code>&gt;&gt;</code>, <code>&lt;&lt;</code> and <code>^</code> operations but I'm having trouble seeing the synthesis.</p>\n"}, {"tags": ["python", "input", "raw-input"], "comments": [{"owner": {"reputation": 10158, "user_id": 1209921, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZxrGg.gif?s=128&g=1", "display_name": "Matthias", "link": "https://stackoverflow.com/users/1209921/matthias"}, "edited": false, "score": 2, "creation_date": 1508362279, "post_id": 46819494, "comment_id": 80586604, "body": "Looks like Python 2 code on a Python 3 system. On the other hand <code>print &quot;How old are you?&quot;,</code> seems to work and that&#39;s Python 2 syntax. There&#39;s something fishy here."}, {"owner": {"reputation": 1633, "user_id": 6502500, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/EnuRp.png?s=128&g=1", "display_name": "Mangohero1", "link": "https://stackoverflow.com/users/6502500/mangohero1"}, "edited": false, "score": 0, "creation_date": 1508362319, "post_id": 46819494, "comment_id": 80586622, "body": "print should be print(). that&#39;s another difference between Py2 and Py3"}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1508362330, "post_id": 46819494, "comment_id": 80586631, "body": "Maybe related to this? <a href=\"https://stackoverflow.com/q/17675925/10077\">stackoverflow.com/q/17675925/10077</a>"}], "answers": [{"tags": [], "owner": {"reputation": 57, "user_id": 8426329, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q0mKi.jpg?s=128&g=1", "display_name": "Michael Angel", "link": "https://stackoverflow.com/users/8426329/michael-angel"}, "is_accepted": false, "score": -1, "last_activity_date": 1508362108, "creation_date": 1508362108, "answer_id": 46819544, "question_id": 46819494, "link": "https://stackoverflow.com/questions/46819494/raw-input-python-learn-python-the-hard-way-exercise-11/46819544#46819544", "title": "Raw_input() Python (Learn Python the Hard Way Exercise 11)", "body": "<p>For Python 3 try replacing all of your \"raw_input()\" with simply \"input()\" which has replaced \"raw_input()\"</p>\n"}, {"comments": [{"owner": {"reputation": 25, "user_id": 8798075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8c43ba272a1b06f7c030063af727d09?s=128&d=identicon&r=PG&f=1", "display_name": "ViktorM", "link": "https://stackoverflow.com/users/8798075/viktorm"}, "edited": false, "score": 0, "creation_date": 1508363129, "post_id": 46819648, "comment_id": 80586983, "body": "I do a:  print(&quot;How old are you?&quot;,)  age = input(&quot;How old are you?&quot;)  and get:  How old are you?  How old are you?  Traceback (most recent call last):   File &quot;script.py&quot;, line 2, in &lt;module&gt;     age = input(&quot;How old are you?&quot;) EOFError: EOF when reading a line"}, {"owner": {"reputation": 718, "user_id": 2990052, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ttvup.jpg?s=128&g=1", "display_name": "PeterH", "link": "https://stackoverflow.com/users/2990052/peterh"}, "reply_to_user": {"reputation": 25, "user_id": 8798075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8c43ba272a1b06f7c030063af727d09?s=128&d=identicon&r=PG&f=1", "display_name": "ViktorM", "link": "https://stackoverflow.com/users/8798075/viktorm"}, "edited": false, "score": 0, "creation_date": 1508363349, "post_id": 46819648, "comment_id": 80587071, "body": "Can you confirm what version of python you are using? Also you don&#39;t have to <code>print(&quot;How old are you?&quot;)</code> before the input. The input will automatically print &quot;How old are you?&quot; to the terminal before getting the users input."}, {"owner": {"reputation": 533, "user_id": 8786919, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/58abf3624c1b2eab24b8c46bc2217cf6?s=128&d=identicon&r=PG&f=1", "display_name": "OmO Walker", "link": "https://stackoverflow.com/users/8786919/omo-walker"}, "edited": false, "score": 0, "creation_date": 1508364950, "post_id": 46819648, "comment_id": 80587658, "body": "Hello, it doesn&#39;t matter which version of python he&#39;s using, the code you did will work for both python2.xx and python3.xx"}, {"owner": {"reputation": 718, "user_id": 2990052, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ttvup.jpg?s=128&g=1", "display_name": "PeterH", "link": "https://stackoverflow.com/users/2990052/peterh"}, "edited": false, "score": 0, "creation_date": 1508365168, "post_id": 46819648, "comment_id": 80587728, "body": "Not quite true. If you use a <code>print &quot;something&quot;</code> in python3 it will give you a <code>SyntaxError: invalid syntax</code>. You have to use <code>print(&#39;something&#39;)</code>. That is why I am confused. He stated he was using python3 but is using python 2 print syntax."}], "tags": [], "owner": {"reputation": 718, "user_id": 2990052, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ttvup.jpg?s=128&g=1", "display_name": "PeterH", "link": "https://stackoverflow.com/users/2990052/peterh"}, "is_accepted": false, "score": 1, "last_activity_date": 1508362600, "creation_date": 1508362600, "answer_id": 46819648, "question_id": 46819494, "link": "https://stackoverflow.com/questions/46819494/raw-input-python-learn-python-the-hard-way-exercise-11/46819648#46819648", "title": "Raw_input() Python (Learn Python the Hard Way Exercise 11)", "body": "<p>It looks like the code you have is python 2 code. Here is a revised version with python 3 syntax.</p>\n\n<p><a href=\"https://www.digitalocean.com/community/tutorials/how-to-use-string-formatters-in-python-3\" rel=\"nofollow noreferrer\">Here</a> is some reading about the <code>.format()</code> call in the last line. I think the .format method is a lot easier to understand. </p>\n\n<p>And <a href=\"https://www.python-course.eu/python3_input.php\" rel=\"nofollow noreferrer\">here</a> is some reading for the <code>input()</code> function in python 3</p>\n\n<pre><code>age = input(\"How old are you?\")\n\nheight = input(\"How tall are you?\")\n\nweight = input(\"How much do you weigh?\")\n\nprint(\"So, you're {} old, {} tall and {} heavy.\".format(age, height, weight))\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 8798075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8c43ba272a1b06f7c030063af727d09?s=128&d=identicon&r=PG&f=1", "display_name": "ViktorM", "link": "https://stackoverflow.com/users/8798075/viktorm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 471, "favorite_count": 0, "closed_date": 1508365664, "answer_count": 2, "score": 0, "last_activity_date": 1508363375, "creation_date": 1508361874, "last_edit_date": 1508363375, "question_id": 46819494, "link": "https://stackoverflow.com/questions/46819494/raw-input-python-learn-python-the-hard-way-exercise-11", "closed_reason": "Not suitable for this site", "title": "Raw_input() Python (Learn Python the Hard Way Exercise 11)", "body": "<p>I am doing the Asking Questions exercise from \"Learn Python the Hard Way\" 3rd edition by Zed Shaw where my code looks like:</p>\n\n<pre><code>print \"How old are you?\",\n\nage = raw_input()\n\nprint \"How tall are you?\",\n\nheight = raw_input()\n\nprint \"How much do you weigh?\",\n\nweight = raw_input()\n\nprint \"So, you're %r old, %r tall and %r heavy.\" % (age, height, weight)\n</code></pre>\n\n<p>and output should look like:</p>\n\n<pre><code>How old are you? 38\n\nHow tall are you? 6'2\"\n\nHow much do you weigh? 180lbs\n\nSo, you're '38' old, '6\\'2\"' tall and '180lbs' heavy.\n</code></pre>\n\n<p>However, because I am using Python 3, output initially looks like:</p>\n\n<pre><code>How old are you?\nTraceback (most recent call last):\n  File \"script.py\", line 2, in &lt;module&gt;\n    age = raw_input()\nNameError: name 'raw_input' is not defined\n</code></pre>\n\n<p>and then like once I replace raw_input() with input():</p>\n\n<pre><code>How old are you?\nTraceback (most recent call last):\n  File \"script.py\", line 2, in &lt;module&gt;\n    age = input()\nEOFError: EOF when reading a line\n</code></pre>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 14106, "user_id": 1391671, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f24419d9b9d95de452c5df62728fae28?s=128&d=identicon&r=PG", "display_name": "Igor Raush", "link": "https://stackoverflow.com/users/1391671/igor-raush"}, "is_accepted": false, "score": 1, "last_activity_date": 1508363393, "creation_date": 1508363393, "answer_id": 46819806, "question_id": 46819490, "link": "https://stackoverflow.com/questions/46819490/create-blocks-in-pandas-for-deduplication/46819806#46819806", "title": "Create blocks in pandas for deduplication", "body": "<p>You should use <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.groupby.html\" rel=\"nofollow noreferrer\"><code>DataFrame.groupby</code></a> with some sort of aggregation function. One option is</p>\n\n<pre><code>def aggregate(rows):\n    result = {}\n    for index, dict_ in enumerate(rows.apply(dict, 1)):\n        result.update({'{}{}'.format(key, index + 1): value for key, value in dict_.iteritems()})\n    return pd.Series(result)\n\ndf.groupby('Name').filter(lambda g: len(g) &gt; 1).groupby('Name').apply(aggregate).reset_index(drop=True)\n</code></pre>\n\n<pre class=\"lang-none prettyprint-override\"><code>  City1 City2      Name1      Name2  Phone1  Phone2\n0     c     e  Christian  Christian     700     500\n1     a     d        Sam        Sam     900     600\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": true, "score": 3, "last_activity_date": 1508366958, "last_edit_date": 1508366958, "creation_date": 1508363570, "answer_id": 46819839, "question_id": 46819490, "link": "https://stackoverflow.com/questions/46819490/create-blocks-in-pandas-for-deduplication/46819839#46819839", "title": "Create blocks in pandas for deduplication", "body": "<p>Hope it helps </p>\n\n<pre><code>pd.concat([df1[1].reset_index(drop=True).add_suffix(i+1) for i,df1 in enumerate(df[df.duplicated('Name',keep=False)].groupby('Name',as_index=False))],axis=1)\nOut[218]: \n  City1      Name1  Phone1 City2 Name2  Phone2\n0     c  Christian     700     a   Sam     900\n1     e  Christian     500     d   Sam     600\n</code></pre>\n\n<p><strong><em>EDIT: This seems like what you want</em></strong> </p>\n\n<pre><code>df1=df[df.duplicated('Name',keep=False)]\ndf1['G']=df1.groupby('Name').cumcount().add(1)\npd.concat([df1.reset_index(drop=True).drop('G',1).add_suffix(i) for i,df1 in df1.groupby('G')],axis=1)\n\n\nOut[308]: \n  City1      Name1  Phone1 City2      Name2  Phone2\n0     a        Sam     900     d        Sam     600\n1     c  Christian     700     e  Christian     500\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 303, "user_id": 8021550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e91560c7a5347e174dce3636a9da87f?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan H", "link": "https://stackoverflow.com/users/8021550/nathan-h"}, "is_accepted": false, "score": 0, "last_activity_date": 1508363962, "creation_date": 1508363962, "answer_id": 46819928, "question_id": 46819490, "link": "https://stackoverflow.com/questions/46819490/create-blocks-in-pandas-for-deduplication/46819928#46819928", "title": "Create blocks in pandas for deduplication", "body": "<pre><code>duplicates = pd.DataFrame()\nfor row in df.itertuples():\n\n    possible_dups = df[(df.Name == row.Name) &amp; (df.index &gt; row.Index)]\n    duplicates = duplicates.append(pd.merge(possible_dups,df.loc[[row.Index],:],on='Name'))\n\nduplicates\n\nCity_x  Name        Phone_x City_y  Phone_y\n0   d   Sam         600     a       900\n0   e   Christian   500     c       700\n</code></pre>\n\n<p>My inefficient solution - Loop through the rows, find the rows of duplicates (where index is greater and name is same), merge the row, and then append it to a df that was created.</p>\n"}], "owner": {"reputation": 482, "user_id": 5599884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-3oRJygU_8wo/AAAAAAAAAAI/AAAAAAAASro/Cgk9BoJSPQk/photo.jpg?sz=128", "display_name": "Prasanth Regupathy", "link": "https://stackoverflow.com/users/5599884/prasanth-regupathy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 0, "accepted_answer_id": 46819839, "answer_count": 3, "score": 0, "last_activity_date": 1508366958, "creation_date": 1508361857, "question_id": 46819490, "link": "https://stackoverflow.com/questions/46819490/create-blocks-in-pandas-for-deduplication", "title": "Create blocks in pandas for deduplication", "body": "<p>I am working on a data de-duplication problem and would like to compare different rows that have some fields in common.</p>\n\n<p>For Example,</p>\n\n<pre><code>import pandas as pd\n\nd = {\n         'Name': ['Sam', 'John', 'Christian', 'Sam', 'Christian'],\n         'Phone': [900, 800, 700, 600, 500],\n         'City': ['a', 'b', 'c', 'd', 'e']\n    }\ndf = pd.DataFrame(d)\n\ndf\n</code></pre>\n\n<hr>\n\n<pre><code>City    Name        Phone\na       Sam         900\nb       John        800\nc       Christian   700\nd       Sam         600\ne       Christian   500\n</code></pre>\n\n<p>In this dataframe, rows (1,4) and (3,5) have same name and are my potential duplicates. How do I make pairs of rows for which the 'Name' matches?</p>\n\n<p>Expected output</p>\n\n<pre><code>Name1      City1 Phone1 Name2      City2 Phone2\nSam        a     900    Sam        d     600\nChristian  c     700    Christian  e     500\n</code></pre>\n"}, {"tags": ["python", "neural-network", "keras", "classification", "lstm"], "comments": [{"owner": {"reputation": 2324, "user_id": 6144626, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/w5zgz.jpg?s=128&g=1", "display_name": "Ari Cooper-Davis", "link": "https://stackoverflow.com/users/6144626/ari-cooper-davis"}, "edited": false, "score": 0, "creation_date": 1508362642, "post_id": 46819455, "comment_id": 80586776, "body": "<a href=\"https://stats.stackexchange.com/\">Cross validated</a> might be the place for this :)"}, {"owner": {"reputation": 43, "user_id": 8798063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e92c3d63078d2aed922de4a334275859?s=128&d=identicon&r=PG&f=1", "display_name": "user402843", "link": "https://stackoverflow.com/users/8798063/user402843"}, "reply_to_user": {"reputation": 2324, "user_id": 6144626, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/w5zgz.jpg?s=128&g=1", "display_name": "Ari Cooper-Davis", "link": "https://stackoverflow.com/users/6144626/ari-cooper-davis"}, "edited": false, "score": 0, "creation_date": 1508403488, "post_id": 46819455, "comment_id": 80599872, "body": "<a href=\"https://stats.stackexchange.com/questions/308773/classify-the-main-semantic-relation-of-a-sentence-using-keras\">Done</a>, I hope someone will answer there, even if it is quite desolate..."}], "owner": {"reputation": 43, "user_id": 8798063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e92c3d63078d2aed922de4a334275859?s=128&d=identicon&r=PG&f=1", "display_name": "user402843", "link": "https://stackoverflow.com/users/8798063/user402843"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 1, "closed_date": 1508364782, "answer_count": 0, "score": 2, "last_activity_date": 1508361690, "creation_date": 1508361690, "question_id": 46819455, "link": "https://stackoverflow.com/questions/46819455/classify-the-main-semantic-relation-of-a-sentence-using-keras", "closed_reason": "Needs more focus", "title": "Classify the main semantic relation of a sentence using keras", "body": "<p>I have a big dataset like this:</p>\n\n<pre><code>RELATION&lt;tab&gt;SENTENCE\ncolor&lt;tab&gt;The cat is black\ncolor&lt;tab&gt;My dog is white\nplace&lt;tab&gt;Des Moines is in Iowa\nplace&lt;tab&gt;Des Moines is the capital of Iowa\nis-a&lt;tab&gt;Des Moines is a city\nis-a&lt;tab&gt;3D printer is a type of printer\nis-a&lt;tab&gt;New Beetle was a car by Volkswagen\n...\n</code></pre>\n\n<p>I need to build a classifier that, given a sentence, returns a relation as accurately as possible.</p>\n\n<p>I have already programmed something with keras (python), but in this case I really don't know where to start from. For the moment I only realized that an important feature could be the order of the words in the sentence, but I don't know how to explot this.</p>\n\n<p>Do you have some hint? E.g. about features, embeddings, hidden layers. May LSTM be a good NN? Why?</p>\n\n<p>I hope this is not too broad, but I just need some hint, not to write code for me.</p>\n"}, {"tags": ["python", "html", "arrays", "web-scraping"], "comments": [{"owner": {"reputation": 1633, "user_id": 6502500, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/EnuRp.png?s=128&g=1", "display_name": "Mangohero1", "link": "https://stackoverflow.com/users/6502500/mangohero1"}, "edited": false, "score": 0, "creation_date": 1508361740, "post_id": 46819433, "comment_id": 80586331, "body": "<a href=\"https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags\">Advice on parsing HTML with a regex</a>"}], "answers": [{"comments": [{"owner": {"reputation": 115, "user_id": 7351159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c951d23dde6a8c7a7b56ef5ddef6409?s=128&d=identicon&r=PG&f=1", "display_name": "weston6142", "link": "https://stackoverflow.com/users/7351159/weston6142"}, "edited": false, "score": 0, "creation_date": 1508362616, "post_id": 46819514, "comment_id": 80586766, "body": "It will show positive or negative depending on the particular odds so either is possible.  Also, I am using beautiful soup as you probably expected and am very new to python so I&#39;m still having a little trouble comprehending this.  If this array was called &quot;odds&quot; how would you exactly incorporate the code above you wrote?  Lastly, would I have to write some more code to delete the &lt;/b&gt;?  I really appreciate your help!"}, {"owner": {"reputation": 498, "user_id": 8396562, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-wYKbnoTMUkA/AAAAAAAAAAI/AAAAAAAAG2Y/fUDsBs07yHQ/photo.jpg?sz=128", "display_name": "Samantha", "link": "https://stackoverflow.com/users/8396562/samantha"}, "reply_to_user": {"reputation": 115, "user_id": 7351159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c951d23dde6a8c7a7b56ef5ddef6409?s=128&d=identicon&r=PG&f=1", "display_name": "weston6142", "link": "https://stackoverflow.com/users/7351159/weston6142"}, "edited": false, "score": 0, "creation_date": 1508363139, "post_id": 46819514, "comment_id": 80586988, "body": "Refer to my edit. I don&#39;t know what beautiful soup is but I hope this code works. You don&#39;t need to add more code to delete the &lt;/b&gt;, because in regex you can extract the contents inside round brackets."}, {"owner": {"reputation": 115, "user_id": 7351159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c951d23dde6a8c7a7b56ef5ddef6409?s=128&d=identicon&r=PG&f=1", "display_name": "weston6142", "link": "https://stackoverflow.com/users/7351159/weston6142"}, "edited": false, "score": 0, "creation_date": 1508364586, "post_id": 46819514, "comment_id": 80587555, "body": "I haven&#39;t got it quite yet I will mess with it later tonight and see if I can get it to work.  Thanks for the help!!"}, {"owner": {"reputation": 498, "user_id": 8396562, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-wYKbnoTMUkA/AAAAAAAAAAI/AAAAAAAAG2Y/fUDsBs07yHQ/photo.jpg?sz=128", "display_name": "Samantha", "link": "https://stackoverflow.com/users/8396562/samantha"}, "reply_to_user": {"reputation": 115, "user_id": 7351159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c951d23dde6a8c7a7b56ef5ddef6409?s=128&d=identicon&r=PG&f=1", "display_name": "weston6142", "link": "https://stackoverflow.com/users/7351159/weston6142"}, "edited": false, "score": 0, "creation_date": 1508364639, "post_id": 46819514, "comment_id": 80587574, "body": "let me know how it goes :)"}], "tags": [], "owner": {"reputation": 498, "user_id": 8396562, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-wYKbnoTMUkA/AAAAAAAAAAI/AAAAAAAAG2Y/fUDsBs07yHQ/photo.jpg?sz=128", "display_name": "Samantha", "link": "https://stackoverflow.com/users/8396562/samantha"}, "is_accepted": false, "score": 0, "last_activity_date": 1508363063, "last_edit_date": 1508363063, "creation_date": 1508361946, "answer_id": 46819514, "question_id": 46819433, "link": "https://stackoverflow.com/questions/46819433/extracting-4-characters-out-of-an-html-array-python/46819514#46819514", "title": "Extracting 4 characters out of an HTML Array, Python", "body": "<p>regex will work depending on if this is the only format the numbers are in. </p>\n\n<p>Also, do you know if the positive sign is shown or it only shows negative?</p>\n\n<p>If it does show positive...</p>\n\n<pre><code>([+-][\\d]{3})&lt;\\/b&gt;\n</code></pre>\n\n<p>If it doesn't show positive use...</p>\n\n<pre><code>([+-]?[\\d]{3})&lt;\\/b&gt;\n</code></pre>\n\n<p><a href=\"http://regexr.com/3h08d\" rel=\"nofollow noreferrer\">http://regexr.com/3h08d</a></p>\n\n<p>You should be able to extract the contents inside the round brackets. </p>\n\n<p>Edit: you probably want to do something like below. This code will get each string from the list and then do a regex search on the string. It will append the result to the nums list. The result will be a 3 digit number with the sign in front, since it extracts the first group inside the round brackets. </p>\n\n<pre><code>import re\n\nnums = []\n\nfor line in odds:\n\n    result = re.search(('[+-][\\d]{3})&lt;\\/b&gt;',line)\n\n    nums.append(result.group(1)))\n\nprint (nums)\n</code></pre>\n"}], "owner": {"reputation": 115, "user_id": 7351159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c951d23dde6a8c7a7b56ef5ddef6409?s=128&d=identicon&r=PG&f=1", "display_name": "weston6142", "link": "https://stackoverflow.com/users/7351159/weston6142"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1508363063, "creation_date": 1508361578, "question_id": 46819433, "link": "https://stackoverflow.com/questions/46819433/extracting-4-characters-out-of-an-html-array-python", "title": "Extracting 4 characters out of an HTML Array, Python", "body": "<p>I am working on scraping a betting website for odds as my first web-scraping project. I have successfully scraped what I want so far and now have an array like this </p>\n\n<pre><code>[&lt;b&gt;+5\\xbd\\xa0-110&lt;/b&gt;, &lt;b&gt;-5\\xbd\\xa0-110&lt;/b&gt;]\n[&lt;b&gt;+6\\xa0-115&lt;/b&gt;, &lt;b&gt;-6\\xa0-105&lt;/b&gt;]\n[&lt;b&gt;+6\\xa0-115&lt;/b&gt;, &lt;b&gt;-6\\xa0-105&lt;/b&gt;]\n</code></pre>\n\n<p>Is there a way I can just pull out the -105/110/115?  The numbers I am looking for are those 3 to the left of the <code>&lt;/b&gt;</code> and I also need to include the positive or negative sign to the left of the three numbers.  Do I need to use a regular expression?\nThanks a lot!</p>\n\n<p>Weston   </p>\n"}, {"tags": ["python", "dataframe", "pyspark"], "comments": [{"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1508361672, "post_id": 46819405, "comment_id": 80586297, "body": "maybe <code>df.columns</code> ?"}], "answers": [{"tags": [], "owner": {"reputation": 6696, "user_id": 8467558, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tqOGB.jpg?s=128&g=1", "display_name": "MaFF", "link": "https://stackoverflow.com/users/8467558/maff"}, "is_accepted": true, "score": 19, "last_activity_date": 1614131945, "last_edit_date": 1614131945, "creation_date": 1508364864, "answer_id": 46820066, "question_id": 46819405, "link": "https://stackoverflow.com/questions/46819405/how-to-get-the-name-of-column-with-maximum-value-in-pyspark-dataframe/46820066#46820066", "title": "how to get the name of column with maximum value in pyspark dataframe", "body": "<p>You can chain conditions to find which columns is equal to the maximum value:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>cond = &quot;psf.when&quot; + &quot;.when&quot;.join([&quot;(psf.col('&quot; + c + &quot;') == psf.col('max_value'), psf.lit('&quot; + c + &quot;'))&quot; for c in df.columns])\nimport pyspark.sql.functions as psf\ndf.withColumn(&quot;max_value&quot;, psf.greatest(*df.columns))\\\n    .withColumn(&quot;MAX&quot;, eval(cond))\\\n    .show()\n\n    +-----+--------+----+-----+---------+--------+\n    |Alice|Eleonora|Mike|Helen|max_value|     MAX|\n    +-----+--------+----+-----+---------+--------+\n    |    2|       7|   8|    6|        8|    Mike|\n    |   11|       5|   9|    4|       11|   Alice|\n    |    6|      15|  12|    3|       15|Eleonora|\n    |    5|       3|   7|    8|        8|   Helen|\n    +-----+--------+----+-----+---------+--------+\n</code></pre>\n<p><strong>OR:</strong> explode and filter</p>\n<pre class=\"lang-py prettyprint-override\"><code>from itertools import chain\ndf.withColumn(&quot;max_value&quot;, psf.greatest(*df.columns))\\\n    .select(&quot;*&quot;, psf.posexplode(psf.create_map(list(chain(*[(psf.lit(c), psf.col(c)) for c in df.columns])))))\\\n    .filter(&quot;max_value = value&quot;)\\\n    .select(df.columns + [psf.col(&quot;key&quot;).alias(&quot;MAX&quot;)])\\\n    .show()\n</code></pre>\n<p><strong>OR:</strong> using a <code>UDF</code> on a dictionary:</p>\n<pre class=\"lang-py prettyprint-override\"><code>from pyspark.sql.types import *\nargmax_udf = psf.udf(lambda m: max(m, key=m.get), StringType())\ndf.withColumn(&quot;map&quot;, psf.create_map(list(chain(*[(psf.lit(c), psf.col(c)) for c in df.columns]))))\\\n    .withColumn(&quot;MAX&quot;, argmax_udf(&quot;map&quot;))\\\n    .drop(&quot;map&quot;)\\\n    .show()\n</code></pre>\n<p><strong>OR:</strong> using a <code>UDF</code> with a parameter:</p>\n<pre class=\"lang-py prettyprint-override\"><code>from pyspark.sql.types import *\ndef argmax(cols, *args):\n    return [c for c, v in zip(cols, args) if v == max(args)][0]\nargmax_udf = lambda cols: psf.udf(lambda *args: argmax(cols, *args), StringType())\ndf.withColumn(&quot;MAX&quot;, argmax_udf(df.columns)(*df.columns))\\\n    .show()\n</code></pre>\n"}], "owner": {"reputation": 153, "user_id": 8798088, "user_type": "registered", "profile_image": "https://graph.facebook.com/1509394389142516/picture?type=large", "display_name": "Vikas Bishnoi", "link": "https://stackoverflow.com/users/8798088/vikas-bishnoi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3765, "favorite_count": 8, "accepted_answer_id": 46820066, "answer_count": 1, "score": 15, "last_activity_date": 1614131945, "creation_date": 1508361452, "last_edit_date": 1508361634, "question_id": 46819405, "link": "https://stackoverflow.com/questions/46819405/how-to-get-the-name-of-column-with-maximum-value-in-pyspark-dataframe", "title": "how to get the name of column with maximum value in pyspark dataframe", "body": "<p>How do we get the name of the column pyspark dataframe ?</p>\n\n<pre><code>   Alice  Eleonora  Mike  Helen       MAX\n0      2         7     8      6      Mike\n1     11         5     9      4     Alice\n2      6        15    12      3  Eleonora\n3      5         3     7      8     Helen\n</code></pre>\n\n<p>I need something like this. name of the columns no the max values, i am able to get the max values, i need the name </p>\n"}, {"tags": ["python", "python-2.7"], "comments": [{"owner": {"reputation": 169, "user_id": 3532367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3ff5bd296341f3a6ad61dc8ccad8371?s=128&d=identicon&r=PG&f=1", "display_name": "Mariusz", "link": "https://stackoverflow.com/users/3532367/mariusz"}, "edited": false, "score": 1, "creation_date": 1508361455, "post_id": 46819308, "comment_id": 80586158, "body": "It looks like you are setting path to this module. What do you think about use virtualenv? I think that it should solve your problem."}, {"owner": {"reputation": 18194, "user_id": 1513933, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/0ozBK.jpg?s=128&g=1", "display_name": "Laurent LAPORTE", "link": "https://stackoverflow.com/users/1513933/laurent-laporte"}, "edited": false, "score": 0, "creation_date": 1508361725, "post_id": 46819308, "comment_id": 80586326, "body": "What is the purpose of <code>.profile</code> script here?"}, {"owner": {"reputation": 799, "user_id": 2828958, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/32c7e439e062b1961b744c80c92765e3?s=128&d=identicon&r=PG&f=1", "display_name": "npatel", "link": "https://stackoverflow.com/users/2828958/npatel"}, "edited": false, "score": 0, "creation_date": 1508371029, "post_id": 46819308, "comment_id": 80589297, "body": ".profile has some environment variable and export statements, but looks like sourcing that also wont work?"}], "answers": [{"comments": [{"owner": {"reputation": 799, "user_id": 2828958, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/32c7e439e062b1961b744c80c92765e3?s=128&d=identicon&r=PG&f=1", "display_name": "npatel", "link": "https://stackoverflow.com/users/2828958/npatel"}, "edited": false, "score": 0, "creation_date": 1508371111, "post_id": 46819450, "comment_id": 80589314, "body": "even after setting all environment variables this way, I couldn&#39;t import the module, if I enter into <code>python</code> with <code>pexpect.spawn</code>, I am able to import but not outside <code>python</code>, not sure what is still missing."}, {"owner": {"reputation": 18194, "user_id": 1513933, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/0ozBK.jpg?s=128&g=1", "display_name": "Laurent LAPORTE", "link": "https://stackoverflow.com/users/1513933/laurent-laporte"}, "reply_to_user": {"reputation": 799, "user_id": 2828958, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/32c7e439e062b1961b744c80c92765e3?s=128&d=identicon&r=PG&f=1", "display_name": "npatel", "link": "https://stackoverflow.com/users/2828958/npatel"}, "edited": false, "score": 0, "creation_date": 1508388858, "post_id": 46819450, "comment_id": 80593358, "body": "Your <code>.profile</code> activate a virtualenv or change your Python path. To call this script you need to use the right Python executable by giving the full path to the Python executable."}, {"owner": {"reputation": 799, "user_id": 2828958, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/32c7e439e062b1961b744c80c92765e3?s=128&d=identicon&r=PG&f=1", "display_name": "npatel", "link": "https://stackoverflow.com/users/2828958/npatel"}, "edited": false, "score": 0, "creation_date": 1508398162, "post_id": 46819450, "comment_id": 80596852, "body": "I do need to change <code>PYTHONPATH</code> in order to import the module. Can you please let me know how exactly I can source it?"}, {"owner": {"reputation": 18194, "user_id": 1513933, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/0ozBK.jpg?s=128&g=1", "display_name": "Laurent LAPORTE", "link": "https://stackoverflow.com/users/1513933/laurent-laporte"}, "reply_to_user": {"reputation": 799, "user_id": 2828958, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/32c7e439e062b1961b744c80c92765e3?s=128&d=identicon&r=PG&f=1", "display_name": "npatel", "link": "https://stackoverflow.com/users/2828958/npatel"}, "edited": false, "score": 0, "creation_date": 1508406474, "post_id": 46819450, "comment_id": 80601605, "body": "No, there is no need to &quot;source&quot; a Python script. You need to know the path to the Python executable and call it like this: <code>&#47;path&#47;to&#47;python your_script.py</code>."}], "tags": [], "owner": {"reputation": 18194, "user_id": 1513933, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/0ozBK.jpg?s=128&g=1", "display_name": "Laurent LAPORTE", "link": "https://stackoverflow.com/users/1513933/laurent-laporte"}, "is_accepted": true, "score": 1, "last_activity_date": 1508361660, "creation_date": 1508361660, "answer_id": 46819450, "question_id": 46819308, "link": "https://stackoverflow.com/questions/46819308/how-to-import-ixiatcl-module-after-executing-dependent-bash-commands-in-a-python/46819450#46819450", "title": "How to import ixiatcl module after executing dependent bash commands in a python script", "body": "<p>To update the Python path, you can insert the value of the <code>IX_PY</code> environment variable in the <code>sys.path</code> like this:</p>\n\n<pre><code>import sys\nimport os\n\nIX_PY = os.environ['IX_PY']\nsys.path.insert(0, IX_PY)\n\nfrom ixiatcl import IxiaTcl\n</code></pre>\n"}], "owner": {"reputation": 799, "user_id": 2828958, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/32c7e439e062b1961b744c80c92765e3?s=128&d=identicon&r=PG&f=1", "display_name": "npatel", "link": "https://stackoverflow.com/users/2828958/npatel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 254, "favorite_count": 0, "accepted_answer_id": 46819450, "answer_count": 1, "score": 0, "last_activity_date": 1508361660, "creation_date": 1508361067, "question_id": 46819308, "link": "https://stackoverflow.com/questions/46819308/how-to-import-ixiatcl-module-after-executing-dependent-bash-commands-in-a-python", "title": "How to import ixiatcl module after executing dependent bash commands in a python script", "body": "<p>I have dependency on 2 bash commands before importing modules.\nWhen I execute below 2 commands on bash and then enter into python, I am able to import the module without any error.</p>\n\n<pre><code>-bash-4.2$ source /root/.profile \n-bash-4.2$ export PYTHONPATH=$IX_PY:$PYTHONPATH\n-bash-4.2$ python\nPython 2.7.5 (default, Nov  3 2016, 22:05:29) \n[GCC 4.8.5 20150623 (Red Hat 4.8.5-11)] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; from ixiatcl import IxiaTcl\n&gt;&gt;&gt; \n</code></pre>\n\n<p>But when I am trying to keep exact above things in my script, it doesn't work:</p>\n\n<pre><code>#!/usr/bin/python\nprint commands.getoutput(\"source /root/ixia/.profile\")\nprint commands.getoutput(\"export PYTHONPATH=$IX_PY:$PYTHONPATH\")\nfrom ixiatcl import IxiaTcl\n</code></pre>\n\n<p>I am getting this error:</p>\n\n<pre><code>ImportError: No module named ixiatcl\n</code></pre>\n\n<p>Can someone please suggest me a way to import this module considering dependency on 2 bash commands in a script?</p>\n"}, {"tags": ["python", "python-3.x", "winapi", "active-directory"], "owner": {"reputation": 24093, "user_id": 51167, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/144ac0e81f73797307e5179df6ecd1f4?s=128&d=identicon&r=PG", "display_name": "vy32", "link": "https://stackoverflow.com/users/51167/vy32"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1508361020, "creation_date": 1508361020, "question_id": 46819300, "link": "https://stackoverflow.com/questions/46819300/list-the-members-of-an-activedirectory-group-using-python-and-win32", "title": "List the members of an ActiveDirectory group using Python and win32", "body": "<p>I can list the members of a Windows Active Directory group by clicking on \"Network\" in the Windows File Browser, then clicking \"Search Active Directory,\" typing in the name of the group, finding it, and then paging through the names.</p>\n\n<p>I would like to do the same thing from the command line using Python. I would ideally like to print the Windows username of each person, their full name, and the date that they were added to the group.</p>\n\n<p>This should be possible to do, but I don't have a clue of which API to use. I would also be okay doing it from the windows command line. I do not have access to the commandline of the active directory server; I need to do this with the API. Using \"wmic\" has been fruitless, and the \"ad\" commands are not installed on my computer.</p>\n"}, {"tags": ["python", "algorithm", "python-3.x", "karatsuba"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1508361525, "post_id": 46819292, "comment_id": 80586206, "body": "Why are you calculating <code>x</code> like that? <code>x</code> can end up substantially greater than either of the inputs."}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1508362334, "post_id": 46819292, "comment_id": 80586632, "body": "Do some basic debugging. Look at high1, low1, hight2, low2 at each step of a test case, for example 123 * 55555. You do not ensure that the next recursive call is a smaller problem. I get the first subproblem z0 = karatsuba(123, 55555) at each step, repeat to infinity."}, {"owner": {"reputation": 55, "user_id": 8554438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26e154a640fe2c46641752c05fd1fb08?s=128&d=identicon&r=PG&f=1", "display_name": "ankuselfie", "link": "https://stackoverflow.com/users/8554438/ankuselfie"}, "reply_to_user": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1508362675, "post_id": 46819292, "comment_id": 80586800, "body": "@KennyOstrom I&#39;ve changed the program and it&#39;s working fine with big numbers but still run time error on SPOJ"}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1508362892, "post_id": 46819292, "comment_id": 80586899, "body": "SPOJ?  Online judge? Have you tried writing some of your own test cases, like 123 * 55555 (which no longer gives infinite recursion but still gives the wrong answer)?"}, {"owner": {"reputation": 55, "user_id": 8554438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26e154a640fe2c46641752c05fd1fb08?s=128&d=identicon&r=PG&f=1", "display_name": "ankuselfie", "link": "https://stackoverflow.com/users/8554438/ankuselfie"}, "edited": false, "score": 0, "creation_date": 1508363365, "post_id": 46819292, "comment_id": 80587080, "body": "yes. thank you got it :)"}, {"owner": {"reputation": 2026, "user_id": 3789665, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/38983281a7926f50843153d9e0788cdf?s=128&d=identicon&r=PG&f=1", "display_name": "greybeard", "link": "https://stackoverflow.com/users/3789665/greybeard"}, "edited": false, "score": 0, "creation_date": 1514832089, "post_id": 46819292, "comment_id": 83076555, "body": "<code>thank you got it</code> You should answer your own question - or delete it."}], "owner": {"reputation": 55, "user_id": 8554438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26e154a640fe2c46641752c05fd1fb08?s=128&d=identicon&r=PG&f=1", "display_name": "ankuselfie", "link": "https://stackoverflow.com/users/8554438/ankuselfie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 248, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1508362199, "creation_date": 1508360985, "last_edit_date": 1508362199, "question_id": 46819292, "link": "https://stackoverflow.com/questions/46819292/runtime-error-maximum-recursion-depth-exceeded-in-comparison", "title": "runtime error:- maximum recursion depth exceeded in comparison", "body": "<p>I know these kind of questions have already  been asked but I'm stuck with this long integer multiplication problem.<br>\n<strong>for large input size.</strong></p>\n\n<pre><code>import math\nimport sys\n\ndef karatsuba(num1,num2):\n    y = 10\n    if num1&lt;y or num2&lt;y :\n        return num1*num2\n    m1 = int(math.log10(num1))+1\n    m2 = int(math.log10(num2))+1\n    m = max(m1,m2)\n    m1 = m/2\n    x = y**m1\n    high1 = num1//x\n    low1 = num1%x\n    high2 = num2//x\n    low2 = num2%x\n    z0 = karatsuba(low1,low2)\n    z1 = karatsuba((high1+low1),(high2+low2))\n    z2 = karatsuba(high1,high2)\n    return((z2*(y**m))+((z1-z2-z0)*x)+z0)\n\n\n\nn = int(input())\nwhile n&gt;0:\n    n -= 1\n    num1,num2 = map(int,input().split())\n    print(karatsuba(num1,num2))\n</code></pre>\n"}, {"tags": ["python", "django", "datefield"], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 8715909, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a56fdc8e05a13f5a2194a29a1f49efed?s=128&d=identicon&r=PG&f=1", "display_name": "alexeyk0", "link": "https://stackoverflow.com/users/8715909/alexeyk0"}, "edited": false, "score": 1, "creation_date": 1508365742, "post_id": 46819371, "comment_id": 80587897, "body": "Great! and the following way works too: <code>from datetime import date</code>"}], "tags": [], "owner": {"reputation": 8411, "user_id": 2399775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29a2523b23d09e0bfc15d3a77e505271?s=128&d=identicon&r=PG", "display_name": "wpercy", "link": "https://stackoverflow.com/users/2399775/wpercy"}, "is_accepted": true, "score": 5, "last_activity_date": 1587499029, "last_edit_date": 1587499029, "creation_date": 1508361332, "answer_id": 46819371, "question_id": 46819289, "link": "https://stackoverflow.com/questions/46819289/datefield-doesnt-take-date-today-as-default/46819371#46819371", "title": "DateField doesn&#39;t take date.today as default", "body": "<p><code>date</code> is a submodule of the <code>datetime</code> module. You never import a module called <code>date</code>, so you get a NameError when you try to call it. It should be </p>\n\n<pre><code>import datetime\n\nDate = models.DateField(default=datetime.date.today)\n</code></pre>\n\n<p>or</p>\n\n<pre><code>from datetime import date\n\nDate = models.DateField(default=date.today)\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 8715909, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a56fdc8e05a13f5a2194a29a1f49efed?s=128&d=identicon&r=PG&f=1", "display_name": "alexeyk0", "link": "https://stackoverflow.com/users/8715909/alexeyk0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2653, "favorite_count": 0, "accepted_answer_id": 46819371, "answer_count": 1, "score": 3, "last_activity_date": 1587499029, "creation_date": 1508360964, "question_id": 46819289, "link": "https://stackoverflow.com/questions/46819289/datefield-doesnt-take-date-today-as-default", "title": "DateField doesn&#39;t take date.today as default", "body": "<p>Python version 2.7</p>\n\n<p>Django version 1.11</p>\n\n<p>Trying to make my first Django app saving documents, here the part of <strong>models.py</strong></p>\n\n<pre><code>class Docs(models.Model):\n    FacilityRef = models.ForeignKey(Facility)\n    Date = models.DateField(default=date.today)\n    Type = models.CharField(max_length=50)\n    Link = models.FileField(upload_to='Docs/%Y/%m/%d')\n</code></pre>\n\n<p>When making migration got the following error:</p>\n\n<blockquote>\n  <p>Date = models.DateField(default=date.today) NameError: name 'date'\n  is not defined</p>\n</blockquote>\n\n<p>Part of <strong>views.py</strong>:</p>\n\n<pre><code>    from django.http import HttpResponse\n    import datetime\n</code></pre>\n\n<p>Part of <strong>models.py</strong></p>\n\n<pre><code>    from django.db import models\n    import datetime\n</code></pre>\n\n<p>Tried to insert the following strings in <strong>views.py</strong> and <strong>models.py</strong> as it mentioned in \n<a href=\"https://stackoverflow.com/questions/25329589/python-global-name-date-is-not-defined\">here</a>\n<a href=\"https://stackoverflow.com/questions/19934248/nameerror-name-datetime-is-not-defined\">and here</a>\nit didn't help</p>\n\n<pre><code>from django.utils import timezone\nfrom datetime import datetime\n</code></pre>\n\n<p>What kind of import should I do to make this function work?</p>\n"}, {"tags": ["python", "function", "pandas", "filter"], "comments": [{"owner": {"reputation": 130, "user_id": 7823013, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6bf9eeb06cc9586ce397895ea617a6b1?s=128&d=identicon&r=PG&f=1", "display_name": "Lufy", "link": "https://stackoverflow.com/users/7823013/lufy"}, "edited": false, "score": 0, "creation_date": 1548865100, "post_id": 46819260, "comment_id": 95699096, "body": "Thanks @EHB for the implementation. I have used it and it really worked for me in most cases. But I found it failed to find spikes if they are at the end of the time series. Is there any way to modify the filter to find the spikes if they are at the end?"}, {"owner": {"reputation": 845, "user_id": 6710738, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b67ccb7730afd3d569c307f241faa768?s=128&d=identicon&r=PG&f=1", "display_name": "EHB", "link": "https://stackoverflow.com/users/6710738/ehb"}, "reply_to_user": {"reputation": 130, "user_id": 7823013, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6bf9eeb06cc9586ce397895ea617a6b1?s=128&d=identicon&r=PG&f=1", "display_name": "Lufy", "link": "https://stackoverflow.com/users/7823013/lufy"}, "edited": false, "score": 0, "creation_date": 1548970566, "post_id": 46819260, "comment_id": 95747007, "body": "@ Lufy, maybe just eliminate the last few measurements in your series if they&#39;re not strictly needed? If you find a good answer add it here :)"}], "answers": [{"comments": [{"owner": {"reputation": 842, "user_id": 11738630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WSoVi.png?s=128&g=1", "display_name": "baccandr", "link": "https://stackoverflow.com/users/11738630/baccandr"}, "edited": false, "score": 1, "creation_date": 1571759267, "post_id": 46940319, "comment_id": 103343868, "body": "I agree with @EduardoOsorio this implementation is nor correct. You should edit the calculation of <code>median_abs_deviation</code> in your solution."}], "tags": [], "owner": {"reputation": 845, "user_id": 6710738, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b67ccb7730afd3d569c307f241faa768?s=128&d=identicon&r=PG&f=1", "display_name": "EHB", "link": "https://stackoverflow.com/users/6710738/ehb"}, "is_accepted": true, "score": 2, "last_activity_date": 1509057831, "last_edit_date": 1509057831, "creation_date": 1508958610, "answer_id": 46940319, "question_id": 46819260, "link": "https://stackoverflow.com/questions/46819260/filtering-outliers-how-to-make-median-based-hampel-function-faster/46940319#46940319", "title": "Filtering Outliers - how to make median-based Hampel Function faster?", "body": "<p>A Pandas solution is several orders of magnitude faster:</p>\n\n<pre><code>def hampel(vals_orig, k=7, t0=3):\n    '''\n    vals: pandas series of values from which to remove outliers\n    k: size of window (including the sample; 7 is equal to 3 on either side of value)\n    '''\n    #Make copy so original not edited\n    vals=vals_orig.copy()    \n    #Hampel Filter\n    L= 1.4826\n    rolling_median=vals.rolling(k).median()\n    difference=np.abs(rolling_median-vals)\n    median_abs_deviation=difference.rolling(k).median()\n    threshold= t0 *L * median_abs_deviation\n    outlier_idx=difference&gt;threshold\n    vals[outlier_idx]=np.nan\n    return(vals)\n</code></pre>\n\n<p>Timing this gives 11 ms vs 15 seconds; vast improvement.</p>\n\n<p>I found a solution for a similar filter in <a href=\"https://ocefpaf.github.io/python4oceanographers/blog/2015/03/16/outlier_detection/\" rel=\"nofollow noreferrer\">this post.</a></p>\n"}, {"tags": [], "owner": {"reputation": 81, "user_id": 4175064, "user_type": "registered", "profile_image": "https://graph.facebook.com/8835099/picture?type=large", "display_name": "Eduardo Osorio", "link": "https://stackoverflow.com/users/4175064/eduardo-osorio"}, "is_accepted": false, "score": 8, "last_activity_date": 1606290538, "last_edit_date": 1606290538, "creation_date": 1533658735, "answer_id": 51731332, "question_id": 46819260, "link": "https://stackoverflow.com/questions/46819260/filtering-outliers-how-to-make-median-based-hampel-function-faster/51731332#51731332", "title": "Filtering Outliers - how to make median-based Hampel Function faster?", "body": "<p>Solution by @EHB above is helpful, but it is incorrect. Specifically, the rolling median calculated in <em>median_abs_deviation</em> is of <em>difference</em>, which itself is the difference between each data point and the rolling median calculated in <em>rolling_median</em>, but it should be the median of differences between the data in the rolling window and the median over the window. I took the code above and modified it:</p>\n<pre><code>def hampel(vals_orig, k=7, t0=3):\n    '''\n    vals: pandas series of values from which to remove outliers\n    k: size of window (including the sample; 7 is equal to 3 on either side of value)\n    '''\n    \n    #Make copy so original not edited\n    vals = vals_orig.copy()\n    \n    #Hampel Filter\n    L = 1.4826\n    rolling_median = vals.rolling(window=k, center=True).median()\n    MAD = lambda x: np.median(np.abs(x - np.median(x)))\n    rolling_MAD = vals.rolling(window=k, center=True).apply(MAD)\n    threshold = t0 * L * rolling_MAD\n    difference = np.abs(vals - rolling_median)\n    \n    '''\n    Perhaps a condition should be added here in the case that the threshold value\n    is 0.0; maybe do not mark as outlier. MAD may be 0.0 without the original values\n    being equal. See differences between MAD vs SDV.\n    '''\n    \n    outlier_idx = difference &gt; threshold\n    vals[outlier_idx] = rolling_median[outlier_idx] \n    return(vals)\n</code></pre>\n"}], "owner": {"reputation": 845, "user_id": 6710738, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b67ccb7730afd3d569c307f241faa768?s=128&d=identicon&r=PG&f=1", "display_name": "EHB", "link": "https://stackoverflow.com/users/6710738/ehb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7122, "favorite_count": 2, "accepted_answer_id": 46940319, "answer_count": 2, "score": 11, "last_activity_date": 1606290538, "creation_date": 1508360876, "last_edit_date": 1508956933, "question_id": 46819260, "link": "https://stackoverflow.com/questions/46819260/filtering-outliers-how-to-make-median-based-hampel-function-faster", "title": "Filtering Outliers - how to make median-based Hampel Function faster?", "body": "<p>I need to use a Hampel filter on my data, stripping outliers.</p>\n\n<p>I haven't been able to find an existing one in Python; only in Matlab and R.</p>\n\n<p>[Matlab function description][1]</p>\n\n<p>[Stats Exchange discussion of Matlab Hampel function][2]</p>\n\n<p>[R pracma package vignette; contains hampel function][3]</p>\n\n<p>I've written the following function, modeling it off the function in the R pracma package; however, it is far far slower than the Matlab version. This is not ideal; would appreciate input on how to speed it up.</p>\n\n<p>The function is shown below-</p>\n\n<pre><code>def hampel(x,k, t0=3):\n    '''adapted from hampel function in R package pracma\n    x= 1-d numpy array of numbers to be filtered\n    k= number of items in window/2 (# forward and backward wanted to capture in median filter)\n    t0= number of standard deviations to use; 3 is default\n    '''\n    n = len(x)\n    y = x #y is the corrected series\n    L = 1.4826\n    for i in range((k + 1),(n - k)):\n        if np.isnan(x[(i - k):(i + k+1)]).all():\n            continue\n        x0 = np.nanmedian(x[(i - k):(i + k+1)])\n        S0 = L * np.nanmedian(np.abs(x[(i - k):(i + k+1)] - x0))\n        if (np.abs(x[i] - x0) &gt; t0 * S0):\n            y[i] = x0\n    return(y)\n</code></pre>\n\n<p>The R implementation in \"pracma\" package, which I am using as a model:</p>\n\n<pre><code>function (x, k, t0 = 3) \n{\n    n &lt;- length(x)\n    y &lt;- x\n    ind &lt;- c()\n    L &lt;- 1.4826\n    for (i in (k + 1):(n - k)) {\n        x0 &lt;- median(x[(i - k):(i + k)])\n        S0 &lt;- L * median(abs(x[(i - k):(i + k)] - x0))\n        if (abs(x[i] - x0) &gt; t0 * S0) {\n            y[i] &lt;- x0\n            ind &lt;- c(ind, i)\n        }\n    }\n    list(y = y, ind = ind)\n}\n</code></pre>\n\n<p>Any help in making function more efficient, or a pointer to an existing implementation in an existing Python module would be much appreciated. Example data below; %%timeit cell magic in Jupyter indicates it currently takes 15 seconds to run:</p>\n\n<pre><code>vals=np.random.randn(250000)\nvals[3000]=100\nvals[200]=-9000\nvals[-300]=8922273\n%%timeit\nhampel(vals, k=6)\n</code></pre>\n\n<p>[1]: <a href=\"https://www.mathworks.com/help/signal/ref/hampel.html\" rel=\"noreferrer\">https://www.mathworks.com/help/signal/ref/hampel.html</a>   [2]: <a href=\"https://dsp.stackexchange.com/questions/26552/what-is-a-hampel-filter-and-how-does-it-work\">https://dsp.stackexchange.com/questions/26552/what-is-a-hampel-filter-and-how-does-it-work</a> [3]: <a href=\"https://cran.r-project.org/web/packages/pracma/pracma.pdf\" rel=\"noreferrer\">https://cran.r-project.org/web/packages/pracma/pracma.pdf</a></p>\n"}, {"tags": ["python", "flask", "flask-sqlalchemy"], "answers": [{"comments": [{"owner": {"reputation": 1901, "user_id": 7553746, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c33eb4018f5c310329504e451e6aa361?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny John Boy", "link": "https://stackoverflow.com/users/7553746/johnny-john-boy"}, "edited": false, "score": 0, "creation_date": 1508361803, "post_id": 46819438, "comment_id": 80586367, "body": "TypeError: filter_by() takes 1 positional argument but 2 were given is the new error.  I amended the link to remove the _by and just use filter csv_list = csvTable.query.filter_by(file_uuid=file_uuid)\\     .filter(or_(status == &quot;Validated&quot;, status == &quot;Also Validated&quot;)) and it works.  Thank you.  Can you update your answer and I will accept."}, {"owner": {"reputation": 1901, "user_id": 7553746, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c33eb4018f5c310329504e451e6aa361?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny John Boy", "link": "https://stackoverflow.com/users/7553746/johnny-john-boy"}, "edited": false, "score": 0, "creation_date": 1508361965, "post_id": 46819438, "comment_id": 80586460, "body": "Thanks wpercy, was knocking my head against a wall then!"}], "tags": [], "owner": {"reputation": 8411, "user_id": 2399775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29a2523b23d09e0bfc15d3a77e505271?s=128&d=identicon&r=PG", "display_name": "wpercy", "link": "https://stackoverflow.com/users/2399775/wpercy"}, "is_accepted": true, "score": 2, "last_activity_date": 1508361923, "last_edit_date": 1508361923, "creation_date": 1508361600, "answer_id": 46819438, "question_id": 46819254, "link": "https://stackoverflow.com/questions/46819254/using-or-with-python-flask-sqlalchemy-doesnt-work/46819438#46819438", "title": "Using or with Python Flask SQLAlchemy doesn&#39;t work", "body": "<p>Your column names shouldn't be keyword arguments here, it should be a boolean check like this:</p>\n\n<pre><code>csv_list = csvTable.query.filter_by(file_uuid=file_uuid)\\\n    .filter(or_(status == \"Validated\", status == \"Also Validated\"))\n</code></pre>\n"}], "owner": {"reputation": 1901, "user_id": 7553746, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c33eb4018f5c310329504e451e6aa361?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny John Boy", "link": "https://stackoverflow.com/users/7553746/johnny-john-boy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 243, "favorite_count": 0, "accepted_answer_id": 46819438, "answer_count": 1, "score": 0, "last_activity_date": 1508361923, "creation_date": 1508360856, "question_id": 46819254, "link": "https://stackoverflow.com/questions/46819254/using-or-with-python-flask-sqlalchemy-doesnt-work", "title": "Using or with Python Flask SQLAlchemy doesn&#39;t work", "body": "<p>I've got a Flask app and I'm trying to get a SQLalchemy query using OR to return two different status like this but in one query:</p>\n\n<pre><code>        csv_list_1 = csvTable.query.filter_by(file_uuid=file_uuid).filter_by(status=\"Validated\")\n\n        csv_list_2 = csvTable.query.filter_by(file_uuid=file_uuid).filter_by(status=\"Also Validated\")\n</code></pre>\n\n<p>I've found a couple of answers on stack overflow but trying the following:</p>\n\n<pre><code>from sqlalchemy import or_\ncsv_list = csvTable.query.filter_by(file_uuid=file_uuid).filter_by(or_(status=\"Validated\", status=\"Also Validated\"))\n</code></pre>\n\n<p>I get:</p>\n\n<blockquote>\n  <p>SyntaxError: keyword argument repeated</p>\n</blockquote>\n\n<p>I'm not sure where to go from here.</p>\n"}, {"tags": ["python", "string", "python-3.x", "list", "split"], "comments": [{"owner": {"reputation": 1, "user_id": 8783048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/128d9569b616b895d8d794d612b799c9?s=128&d=identicon&r=PG&f=1", "display_name": "labed AbdelJalil", "link": "https://stackoverflow.com/users/8783048/labed-abdeljalil"}, "edited": false, "score": 0, "creation_date": 1508361193, "post_id": 46819239, "comment_id": 80586016, "body": "<a href=\"https://stackoverflow.com/questions/4998629/python-split-string-with-multiple-delimiters\">enter link description here</a> Take a look, I think it&#39;s helpful."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 8797259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d26d48b51e8411ad2fc5592e340c976?s=128&d=identicon&r=PG&f=1", "display_name": "TaariqHassan", "link": "https://stackoverflow.com/users/8797259/taariqhassan"}, "edited": false, "score": 0, "creation_date": 1508363156, "post_id": 46819414, "comment_id": 80586998, "body": "Thanks! This seems to work well without making any assumptions about the input. I guess I need to start learning some regex. I can&#39;t seem to upvote since my reputation score is too low."}], "tags": [], "owner": {"reputation": 206726, "user_id": 5459839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iehrR.jpg?s=128&g=1", "display_name": "trincot", "link": "https://stackoverflow.com/users/5459839/trincot"}, "is_accepted": true, "score": 0, "last_activity_date": 1508361477, "creation_date": 1508361477, "answer_id": 46819414, "question_id": 46819239, "link": "https://stackoverflow.com/questions/46819239/how-to-split-a-string-on-multiple-conditions/46819414#46819414", "title": "How to split a string on multiple conditions", "body": "<p>You could indeed use a regular expression. I would suggest one that matches any series or digits, or any series of letters:</p>\n\n<pre><code>import re \nlst = re.findall(r\"\\d+|[a-z]+\", \"AA-JAN17\", re.I)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2290, "user_id": 5468953, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FWcKeItq2a4/AAAAAAAAAAI/AAAAAAAAAEE/WQokFUs5ZIg/photo.jpg?sz=128", "display_name": "Izaak van Dongen", "link": "https://stackoverflow.com/users/5468953/izaak-van-dongen"}, "is_accepted": false, "score": 1, "last_activity_date": 1508361712, "creation_date": 1508361712, "answer_id": 46819458, "question_id": 46819239, "link": "https://stackoverflow.com/questions/46819239/how-to-split-a-string-on-multiple-conditions/46819458#46819458", "title": "How to split a string on multiple conditions", "body": "<p>I'd recommend a regex something like this:</p>\n\n<pre><code>import re\n\nsamples = ['AA-JAN17',\n           'AA- JAN 17',\n           'AA-JAN-17',\n           'AA - JAN - 17',\n           'AA - 01 - 2017',\n           \"AA0117\"]\n\ninput_pat = re.compile(r\"([a-z]{2})[- ]*([a-z]{3}|[0-9]{2})[- ]*([0-9]*)\", re.I)\n\nfor sample in samples:\n    print(input_pat.match(sample).groups())\n</code></pre>\n\n<p>This will have the following output:</p>\n\n<pre><code>('AA', 'JAN', '17')\n('AA', 'JAN', '17')\n('AA', 'JAN', '17')\n('AA', 'JAN', '17')\n('AA', '01', '2017')\n('AA', '01', '17')\n</code></pre>\n\n<p>It makes a couple of assumptions (initials will be exactly 2 characters, month will be three letters or two digits), which you could modify.</p>\n"}, {"tags": [], "owner": {"reputation": 5041, "user_id": 523144, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/111055402ae29758a8e32ce797380e23?s=128&d=identicon&r=PG&f=1", "display_name": "PeterE", "link": "https://stackoverflow.com/users/523144/petere"}, "is_accepted": false, "score": 0, "last_activity_date": 1508361906, "creation_date": 1508361906, "answer_id": 46819504, "question_id": 46819239, "link": "https://stackoverflow.com/questions/46819239/how-to-split-a-string-on-multiple-conditions/46819504#46819504", "title": "How to split a string on multiple conditions", "body": "<p>I would recommend using a regular expression for this. Depending on how structured (or not) your input is you might have to spend some effort on finding an expression that correctly handles all cases. My for all cases that have been mentioned so far would be:</p>\n\n<pre><code>r\"(?P&lt;initials&gt;\\w+)\\s*-?\\s*(?P&lt;month&gt;\\d{1,2}|JAN\\w*)\\s*-?\\s*(?P&lt;year&gt;\\d{2,4})\"\n</code></pre>\n\n<p>You can study the effect with any number of online regex evaluators. I use <a href=\"https://regex101.com/r/FJVshE/5\" rel=\"nofollow noreferrer\">this one</a>.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user6535501"}, "is_accepted": false, "score": 1, "last_activity_date": 1508362255, "creation_date": 1508362255, "answer_id": 46819581, "question_id": 46819239, "link": "https://stackoverflow.com/questions/46819239/how-to-split-a-string-on-multiple-conditions/46819581#46819581", "title": "How to split a string on multiple conditions", "body": "<p>This should give you what you're looking for</p>\n\n<pre><code>string = 'AA - 01 - 2017'\nstring = string.replace(' ', '')\nstring = string.replace('-', '')\nstring = string.replace('20', '')\ndate_list = [string[0] + string[1], str(string[2]) + str(string[3]),  str(string[4]) + str(string[5])]\nprint(date_list)\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8797259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d26d48b51e8411ad2fc5592e340c976?s=128&d=identicon&r=PG&f=1", "display_name": "TaariqHassan", "link": "https://stackoverflow.com/users/8797259/taariqhassan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 545, "favorite_count": 0, "accepted_answer_id": 46819414, "answer_count": 4, "score": 0, "last_activity_date": 1508362255, "creation_date": 1508360785, "question_id": 46819239, "link": "https://stackoverflow.com/questions/46819239/how-to-split-a-string-on-multiple-conditions", "title": "How to split a string on multiple conditions", "body": "<p>I have a bunch of strings of the format \"Initials - Month - Year\" which i want to split. However, the exact format is not consistent due to user input. Some examples:</p>\n\n<pre><code>'AA-JAN17'\n'AA- JAN 17'\n'AA-JAN-17'\n'AA - JAN - 17'\n'AA - 01 - 2017'\n</code></pre>\n\n<p>What I want is <code>['AA', 'JAN', '17']</code>. Converting 01 to JAN or 2017 to 17 is trivial.</p>\n\n<p>I can split on a hyphen and remove spaces by doing</p>\n\n<pre><code>st = 'AA-JAN-17'\nlist = [s.strip() for s in st.split('-')]\n</code></pre>\n\n<p>which will work, except for the first and second example where there is no hyphen between month and year. I could probably split on both letters/numbers and on the hyphen but I'm not sure how to do this. This could probably be done with regex but I'm not familiar with that at all.</p>\n\n<p>I accept that there are any number of ways the string could be entered but if there's something that can work for all the examples above then that will be good enough for most cases.</p>\n"}, {"tags": ["python", "r", "h5py"], "comments": [{"owner": {"reputation": 610, "user_id": 2491120, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/93846018e355d7d54dd31ead374b79c8?s=128&d=identicon&r=PG", "display_name": "Athos", "link": "https://stackoverflow.com/users/2491120/athos"}, "edited": false, "score": 0, "creation_date": 1519863749, "post_id": 46819212, "comment_id": 85086902, "body": "are you using anaconda? I had this problem once and I solved by pip installing h5py inside (r-tensorflow) environment."}], "answers": [{"comments": [{"owner": {"reputation": 14265, "user_id": 4808122, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/T2JjI.jpg?s=128&g=1", "display_name": "Marmite Bomber", "link": "https://stackoverflow.com/users/4808122/marmite-bomber"}, "edited": false, "score": 1, "creation_date": 1547813250, "post_id": 46820701, "comment_id": 95331312, "body": "<code>install.packages(&quot;h5py&quot;)</code> is wrong  - there is no R package <code>h5py</code>, it is a <b>Python package</b>."}], "tags": [], "owner": {"reputation": 2852, "user_id": 6886345, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UHv0F.jpg?s=128&g=1", "display_name": "Kim", "link": "https://stackoverflow.com/users/6886345/kim"}, "is_accepted": false, "score": 2, "last_activity_date": 1508369166, "creation_date": 1508369166, "answer_id": 46820701, "question_id": 46819212, "link": "https://stackoverflow.com/questions/46819212/error-in-r-the-h5py-python-package-is-required-to-save-and-load-models/46820701#46820701", "title": "Error in R: The h5py Python package is required to save and load models", "body": "<p>I've never installed these packages before, but I proceeded as follows and succeeded! It took a bit of time, too, because it gave me a variety of errors besides what you reported.</p>\n\n<p>Finally, I came up with this: in terminal,</p>\n\n<pre><code>pip uninstall h5py\npip install h5py\npip uninstall keras\npip install keras\n</code></pre>\n\n<p>I checked in Python that <code>import h5py</code> runs true (the first time, it gave me a DLL failure.) Then in R, after restarting, </p>\n\n<pre><code>install.packages(\"reticulate\")\ninstall.packages(\"tensorflow\")\ninstall.packages(\"keras\")\ninstall.packages(\"h5py\")\ndevtools::install_github(\"decryptr/decryptr\")\ndevtools::install_github(\"decryptr/decryptrModels\")\n\nlibrary(keras)\ninstall_keras()\n\n# Check where Python's looked for\nreticulate::py_config() \n\nlibrary(decryptr)\nlibrary(decryptrModels)\n\ncaptcha &lt;- captcha_download_tjmg(dest = 'img')\nkeras_tjmg &lt;- read_model('tjmg')\n</code></pre>\n\n<p>My <code>sessionInfo()</code> is as follows:</p>\n\n<pre><code>R version 3.4.1 (2017-06-30)\nPlatform: x86_64-w64-mingw32/x64 (64-bit)\nRunning under: Windows &gt;= 8 x64 (build 9200)\nMatrix products: default\nlocale:\n[1] LC_COLLATE=English_United States.1252 \n[2] LC_CTYPE=English_United States.1252   \n[3] LC_MONETARY=English_United States.1252\n[4] LC_NUMERIC=C                          \n[5] LC_TIME=English_United States.1252    \nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \nother attached packages:\n[1] decryptrModels_0.0.0.9000 decryptr_0.0.1.9000      \n[3] keras_2.0.8.9001         \nloaded via a namespace (and not attached):\n [1] Rcpp_0.12.13          prettyunits_1.0.2     assertthat_0.2.0     \n [4] R6_2.2.2              jsonlite_1.5          magrittr_1.5         \n [7] httr_1.3.1            tfruns_1.0            rlang_0.1.2          \n[10] progress_1.1.2        curl_2.8.1            whisker_0.3-2        \n[13] reticulate_1.2.0.9005 tools_3.4.1           purrr_0.2.3          \n[16] compiler_3.4.1        base64enc_0.1-3       tensorflow_1.4.0.9003\n</code></pre>\n\n<p>Let me know if this works out. </p>\n"}, {"tags": [], "owner": {"reputation": 201, "user_id": 11284988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8e18fdd6c357160e7cb84762bef52a0?s=128&d=identicon&r=PG", "display_name": "MrMuretto", "link": "https://stackoverflow.com/users/11284988/mrmuretto"}, "is_accepted": false, "score": 0, "last_activity_date": 1604332706, "creation_date": 1604332706, "answer_id": 64648966, "question_id": 46819212, "link": "https://stackoverflow.com/questions/46819212/error-in-r-the-h5py-python-package-is-required-to-save-and-load-models/64648966#64648966", "title": "Error in R: The h5py Python package is required to save and load models", "body": "<p>Even though my response is a few years late, I could fix the issue in Ubuntu 18.04 by installing libpython-dev. It seems reticulate needs this library for Keras/Tensorflow in R:</p>\n<blockquote>\n<p>sudo apt-get update -qq <br />\nsudo apt-get install -qq -y\n--no-install-recommends libpython-dev</p>\n</blockquote>\n"}], "owner": {"reputation": 1373, "user_id": 5937519, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/3b96b8dd7e5c77682f718faea41e6507?s=128&d=identicon&r=PG&f=1", "display_name": "Mislav", "link": "https://stackoverflow.com/users/5937519/mislav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3492, "favorite_count": 2, "answer_count": 2, "score": 6, "last_activity_date": 1604365370, "creation_date": 1508360634, "last_edit_date": 1604365370, "question_id": 46819212, "link": "https://stackoverflow.com/questions/46819212/error-in-r-the-h5py-python-package-is-required-to-save-and-load-models", "title": "Error in R: The h5py Python package is required to save and load models", "body": "<p>I am using R 3.4.2. I am following example from <code>decryptr</code> <a href=\"https://github.com/decryptr/decryptr\" rel=\"noreferrer\">package</a></p>\n\n<pre><code>library(decryptr)\n\n# Download captchas\ncaptcha &lt;- download_tjmg(dest = 'img')\nkeras_tjmg &lt;- decryptrModels::read_model('tjmg')\n</code></pre>\n\n<p>Last line of code produce an error</p>\n\n<pre><code>Error in keras::load_model_hdf5(file_path) : \n  The h5py Python package is required to save and load models\n</code></pre>\n\n<p>I have tried to reinstall h5py package from terminal. I have also installed <code>keras</code> package. I can import h5py package in pyrthon, but Rstudio doesn't recognize it somehow.</p>\n"}, {"tags": ["python", "performance", "numpy", "cython", "numba"], "comments": [{"owner": {"reputation": 18194, "user_id": 1513933, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/0ozBK.jpg?s=128&g=1", "display_name": "Laurent LAPORTE", "link": "https://stackoverflow.com/users/1513933/laurent-laporte"}, "edited": false, "score": 0, "creation_date": 1508361163, "post_id": 46819188, "comment_id": 80585998, "body": "Why do you think that 12,5 seconds is not acceptable? If it does the job\u2026 Are you over optimizing?"}, {"owner": {"reputation": 19, "user_id": 8785329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab8175910ca81008796f35b173e88ccb?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Polizzi", "link": "https://stackoverflow.com/users/8785329/nick-polizzi"}, "reply_to_user": {"reputation": 18194, "user_id": 1513933, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/0ozBK.jpg?s=128&g=1", "display_name": "Laurent LAPORTE", "link": "https://stackoverflow.com/users/1513933/laurent-laporte"}, "edited": false, "score": 0, "creation_date": 1508361499, "post_id": 46819188, "comment_id": 80586189, "body": "Sorry for the confusion, that&#39;s just for benchmarking.  I am using the function for input rows/cols of len &gt; 20,000,000, where the function takes hours to execute once."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1508361830, "post_id": 46819188, "comment_id": 80586388, "body": "You seem to be making the same <code>in1d</code> calls twice inside the loop."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1508361922, "post_id": 46819188, "comment_id": 80586436, "body": "What are you trying to do here? Repeatedly find the highest-degree node in a graph, delete it, and repeat with the remaining subgraph?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1508362083, "post_id": 46819188, "comment_id": 80586512, "body": "or... no, delete its <i>neighbors</i>?"}, {"owner": {"reputation": 19, "user_id": 8785329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab8175910ca81008796f35b173e88ccb?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Polizzi", "link": "https://stackoverflow.com/users/8785329/nick-polizzi"}, "edited": false, "score": 0, "creation_date": 1508362656, "post_id": 46819188, "comment_id": 80586786, "body": "It&#39;s a greedy clustering algorithm.  It is equivalent to the following: take a distance matrix, find the column (centroid) with the largest number of components less than some distance cutoff, store the indices of those components in a list (members), remove every column and row with those indices from the distance matrix, and repeat the above for the smaller distance matrix, until there is no distance matrix remaining.  The resulting clusters share no members. The posted implementation gives the same results but can work much faster than using the full distance matrix.  But, it&#39;s still slow."}, {"owner": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1508495888, "post_id": 46819188, "comment_id": 80642012, "body": "What is <code>member</code>? It doesn&#39;t look like the code posted here would actually work... Also, have you profiled it to see which Numpy function is using most time?"}, {"owner": {"reputation": 19, "user_id": 8785329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab8175910ca81008796f35b173e88ccb?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Polizzi", "link": "https://stackoverflow.com/users/8785329/nick-polizzi"}, "reply_to_user": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1508513371, "post_id": 46819188, "comment_id": 80652180, "body": "@DavidW, Thanks for the suggestion.  You were right, there was a code typo (that&#39;s what I get by typing it from memory...).  I fixed the typo and profiled the code.  Looks like the most expensive function is argsort.  Any suggestions on how to get this working in Cython or Numba?  Would really like to C compile this."}, {"owner": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1508519743, "post_id": 46819188, "comment_id": 80655606, "body": "@NickPolizzi You&#39;re not going to write a better version of argsort in Cython/Numba. You should see if you can change your algorithm to avoid <code>argsort</code> - I think it&#39;s probably in <code>unique</code>. Maybe try sorting <code>cols</code> once at the start, and then seeing if you can write/find a faster version of <code>unique</code> that works on sorted arrays"}], "owner": {"reputation": 19, "user_id": 8785329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab8175910ca81008796f35b173e88ccb?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Polizzi", "link": "https://stackoverflow.com/users/8785329/nick-polizzi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 111, "favorite_count": 0, "closed_date": 1508534690, "answer_count": 0, "score": 1, "last_activity_date": 1508513237, "creation_date": 1508360564, "last_edit_date": 1508513237, "question_id": 46819188, "link": "https://stackoverflow.com/questions/46819188/python-while-loop-execution-speed-up", "closed_reason": "Duplicate", "title": "Python while loop execution speed up", "body": "<p>Update: Does anyone know how to write the While loop below in Cython? I need it to be very fast.  I'm not experienced with Cython but from what I can gather I would need to replace the NumPy calls with code that can be compiled in C.  </p>\n\n<hr>\n\n<p>Is there a way to make the following code much faster, for example, by replacing the NumPy functions so that Numba can compile the while loop in nopython mode?  The input variables, (rows, cols), are 1D lists/arrays of integers.</p>\n\n<pre><code>import numpy as np\n\ndef cluster(rows, cols):\n    member_sets = []\n    centroids = []\n    while cols.any():\n        un, coun = np.unique(cols, return_counts=True)\n        centroid = un[np.argmax(coun)]\n        centroids.append(centroid)\n        member_set = rows[cols == centroid]\n        member_sets.append(member_set)\n        rows = rows[np.in1d(cols, member_set, invert=True)]\n        cols = cols[np.in1d(cols, member_set, invert=True)]\n        cols = cols[np.in1d(rows, member_set, invert=True)]\n        rows = rows[np.in1d(rows, member_set, invert=True)]\n    return member_sets, centroids\n</code></pre>\n\n<p>One can benchmark on the following dataset:</p>\n\n<pre><code>from sklearn.neighbors import NearestNeighbors\nfrom sklearn.datasets import make_blobs\nX, y = make_blobs(1000, random_state=1)\nnbrs = NearestNeighbors(metric='euclidean', radius=3)\nnbrs.fit(X)\nadj_mat = nbrs.radius_neighbors_graph(X)\nrows = adj_mat.nonzero()[0]\ncols = adj_mat.nonzero()[1]\n</code></pre>\n\n<p>What I am getting on my laptop:</p>\n\n<pre><code>import timeit\ntimeit.timeit(\"cluster(rows, cols)\", globals=globals(), number=100)\nOutput: 12.490656665991992\n</code></pre>\n\n<p>Is it possible to increase the speed by an order of magnitude (&lt; 1 sec) or better? </p>\n\n<p>Here are the results from profiling, with a dataset size of 10,000.  It looks like the most expensive NumPy call is to argsort.</p>\n\n<pre><code>   import cProfile\n\n   cProfile.run('m,c = cluster(rows, cols)')\n         1423 function calls in 78.965 seconds\n\n   Ordered by: standard name\n\n   ncalls  tottime  percall  cumtime  percall filename:lineno(function)\n        1    1.214    1.214   78.965   78.965 &lt;ipython-input-1-44e1e663f585&gt;:3(cluster)\n        1    0.000    0.000   78.965   78.965 &lt;string&gt;:1(&lt;module&gt;)\n       14    0.000    0.000    0.064    0.005 _methods.py:37(_any)\n       49    1.161    0.024   76.805    1.567 arraysetops.py:113(unique)\n       49   11.946    0.244   75.644    1.544 arraysetops.py:250(_unique1d)\n       52    0.879    0.017   68.924    1.325 arraysetops.py:385(in1d)\n       13    0.000    0.000    0.014    0.001 fromnumeric.py:1487(nonzero)\n       16    0.000    0.000    3.447    0.215 fromnumeric.py:2053(cumsum)\n       42    0.000    0.000    3.461    0.082 fromnumeric.py:55(_wrapfunc)\n       13    0.000    0.000    0.000    0.000 fromnumeric.py:910(argmax)\n       13    0.000    0.000    0.000    0.000 function_base.py:1843(diff)\n       34    0.000    0.000    0.000    0.000 numeric.py:150(ones)\n      104    0.000    0.000    0.000    0.000 numeric.py:463(asarray)\n      111    0.000    0.000    0.000    0.000 numeric.py:534(asanyarray)\n        1    0.000    0.000   78.965   78.965 {built-in method builtins.exec}\n       42    0.000    0.000    0.000    0.000 {built-in method builtins.getattr}\n      138    0.000    0.000    0.000    0.000 {built-in method builtins.len}\n      215    0.000    0.000    0.000    0.000 {built-in method numpy.core.multiarray.array}\n       96    0.112    0.001    0.112    0.001 {built-in method numpy.core.multiarray.concatenate}\n       34    0.000    0.000    0.000    0.000 {built-in method numpy.core.multiarray.copyto}\n       70    0.056    0.001    0.056    0.001 {built-in method numpy.core.multiarray.empty}\n       14    0.000    0.000    0.064    0.005 {method 'any' of 'numpy.ndarray' objects}\n       26    0.000    0.000    0.000    0.000 {method 'append' of 'list' objects}\n       13    0.000    0.000    0.000    0.000 {method 'argmax' of 'numpy.ndarray' objects}\n       34   51.303    1.509   51.303    1.509 {method 'argsort' of 'numpy.ndarray' objects}\n       16    3.447    0.215    3.447    0.215 {method 'cumsum' of 'numpy.ndarray' objects}\n        1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}\n       49    0.493    0.010    0.493    0.010 {method 'flatten' of 'numpy.ndarray' objects}\n       13    0.013    0.001    0.013    0.001 {method 'nonzero' of 'numpy.ndarray' objects}\n      104    0.000    0.000    0.000    0.000 {method 'ravel' of 'numpy.ndarray' objects}\n       14    0.064    0.005    0.064    0.005 {method 'reduce' of 'numpy.ufunc' objects}\n       31    8.276    0.267    8.276    0.267 {method 'sort' of 'numpy.ndarray' objects}\n</code></pre>\n"}, {"tags": ["python", "django", "django-oscar"], "answers": [{"tags": [], "owner": {"reputation": 11236, "user_id": 2689986, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3Y7wX.jpg?s=128&g=1", "display_name": "shad0w_wa1k3r", "link": "https://stackoverflow.com/users/2689986/shad0w-wa1k3r"}, "is_accepted": false, "score": 0, "last_activity_date": 1523176484, "creation_date": 1523176484, "answer_id": 49716002, "question_id": 46819126, "link": "https://stackoverflow.com/questions/46819126/custom-urls-and-views-in-oscar/49716002#49716002", "title": "custom urls and views in oscar", "body": "<p>You need to extend the existing urls list, not replace it. That is mostly why you get no reverse match errors because the default urls that oscar might have, don't exist anymore. For any other non-oscar-forked app, this would have been okay (just your own urls and nothing else).</p>\n\n<pre><code>class DashboardApplication(DashboardApplication):\n\n    def get_urls(self):\n        my_urls = [\n            url(r'^someurl/', HomeViews.dosomething, name=\"hi\"),\n        ]\n        default_urls = super(DashboardApplication, self).get_urls()\n        return self.post_process_urls(my_urls) + default_urls\n</code></pre>\n"}], "owner": {"reputation": 1141, "user_id": 3232194, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/e9d620c17e153d59c1fb6ead2b345b11?s=128&d=identicon&r=PG&f=1", "display_name": "jaimers", "link": "https://stackoverflow.com/users/3232194/jaimers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 298, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1523176484, "creation_date": 1508360314, "question_id": 46819126, "link": "https://stackoverflow.com/questions/46819126/custom-urls-and-views-in-oscar", "title": "custom urls and views in oscar", "body": "<p>I can't seem to get the urls to match in oscar. My oscar app is a subapp in my main app. My understanding is to create views and urls in the <code>app.py</code> in the sub modules in oscar.It keeps throwing <code>NoReverseMatch</code>. Oscar pages all loads, just not my custom views</p>\n\n<p>in myapp/shop/dashboard/app.py</p>\n\n<pre><code>from django.contrib.auth import views as auth_views\nfrom django.contrib.auth.forms import AuthenticationForm\nfrom django.conf.urls import include, url\nfrom oscar.core.application import DashboardApplication\nfrom oscar.core.loading import get_class\nfrom views import HomeViews\nclass DashboardApplication(DashboardApplication):\n\n    def get_urls(self):\n        urls = [\n            url(r'^someurl/', HomeViews.dosomething, name=\"hi\"),\n        ]\n        return self.post_process_urls(urls)\n\napplication = DashboardApplication()\n</code></pre>\n\n<p>in myapp/shop/dashboard/views.py</p>\n\n<pre><code>from django.conf import settings\nfrom django.db.models import User\nfrom oscar.app.partner.models import Partner\nfrom django.middleware.csrf import get_token\nfrom oscar.apps.dashboard.views import HomeView as CoreHomeView\n\nclass HomeView(CoreHomeView):\n    def dosomething(request):\n        return HttpResponse(\"hello\")\n</code></pre>\n\n<p>in my main app, I registered the shop in my settings.py</p>\n\n<pre><code>INSTALLED_APPS =[\n...\n]] + get_core_apps(['shop'])\n</code></pre>\n\n<p>and in my main app url I have included oscar urls</p>\n\n<pre><code>from shop.app import application as shop_app\nurlpatterns = i18n_patterns(\n    url(r'^shop/', include(shop_app.urls)),\n</code></pre>\n"}, {"tags": ["python", "file", "text"], "comments": [{"owner": {"reputation": 92827, "user_id": 369, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DHcF2.png?s=128&g=1", "display_name": "Blorgbeard", "link": "https://stackoverflow.com/users/369/blorgbeard"}, "edited": false, "score": 1, "creation_date": 1508360342, "post_id": 46819094, "comment_id": 80585606, "body": "You can use <code>file.seek</code>, hints available here: <a href=\"https://stackoverflow.com/questions/2301789/read-a-file-in-reverse-order-using-python\" title=\"read a file in reverse order using python\">stackoverflow.com/questions/2301789/&hellip;</a>"}, {"owner": {"reputation": 3514, "user_id": 1506850, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/529adde7e6c422b0ab9b990d9b09e8da?s=128&d=identicon&r=PG&f=1", "display_name": "00__00__00", "link": "https://stackoverflow.com/users/1506850/00-00-00"}, "reply_to_user": {"reputation": 92827, "user_id": 369, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DHcF2.png?s=128&g=1", "display_name": "Blorgbeard", "link": "https://stackoverflow.com/users/369/blorgbeard"}, "edited": false, "score": 0, "creation_date": 1508360408, "post_id": 46819094, "comment_id": 80585639, "body": "the float may have arbitrary length though"}, {"owner": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 1, "creation_date": 1508360505, "post_id": 46819094, "comment_id": 80585684, "body": "@Liborio arbitrary length shouldn&#39;t matter as long as you know the <i>maximum</i> length. Just read a bunch of characters at the end of the file, then search backwards for the point where the number begins."}, {"owner": {"reputation": 3514, "user_id": 1506850, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/529adde7e6c422b0ab9b990d9b09e8da?s=128&d=identicon&r=PG&f=1", "display_name": "00__00__00", "link": "https://stackoverflow.com/users/1506850/00-00-00"}, "edited": false, "score": 0, "creation_date": 1508360564, "post_id": 46819094, "comment_id": 80585715, "body": "fair enough. but what if I didnt have the maximum length"}, {"owner": {"reputation": 92827, "user_id": 369, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DHcF2.png?s=128&g=1", "display_name": "Blorgbeard", "link": "https://stackoverflow.com/users/369/blorgbeard"}, "edited": false, "score": 1, "creation_date": 1508360571, "post_id": 46819094, "comment_id": 80585720, "body": "uh, how arbitrary? There&#39;s a maximum, right? I guess you could just keep reading chunks until you hit something that&#39;s not digits or a <code>.</code>."}, {"owner": {"reputation": 3514, "user_id": 1506850, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/529adde7e6c422b0ab9b990d9b09e8da?s=128&d=identicon&r=PG&f=1", "display_name": "00__00__00", "link": "https://stackoverflow.com/users/1506850/00-00-00"}, "edited": false, "score": 0, "creation_date": 1508360684, "post_id": 46819094, "comment_id": 80585771, "body": "at very large scale it is a waste to read  even 1 byte extra per file..."}, {"owner": {"reputation": 92827, "user_id": 369, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DHcF2.png?s=128&g=1", "display_name": "Blorgbeard", "link": "https://stackoverflow.com/users/369/blorgbeard"}, "edited": false, "score": 0, "creation_date": 1508360963, "post_id": 46819094, "comment_id": 80585902, "body": "That is not true. However, nothing stops you from using a chunk size of 1."}, {"owner": {"reputation": 59346, "user_id": 444036, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/My2AZ.jpg?s=128&g=1", "display_name": "Paulo Scardine", "link": "https://stackoverflow.com/users/444036/paulo-scardine"}, "edited": false, "score": 3, "creation_date": 1508360964, "post_id": 46819094, "comment_id": 80585903, "body": "It is likely to be false, I/O is buffered and 1 extra byte probably won&#39;t matter as much as you think because the OS already reads in larger chunks."}], "answers": [{"comments": [{"owner": {"reputation": 3514, "user_id": 1506850, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/529adde7e6c422b0ab9b990d9b09e8da?s=128&d=identicon&r=PG&f=1", "display_name": "00__00__00", "link": "https://stackoverflow.com/users/1506850/00-00-00"}, "edited": false, "score": 0, "creation_date": 1508446088, "post_id": 46819249, "comment_id": 80625017, "body": "I think this is the answer after all...the over end of reading 100 bytes is insignificant as suggested by @Paulo Scardine"}], "tags": [], "owner": {"reputation": 59346, "user_id": 444036, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/My2AZ.jpg?s=128&g=1", "display_name": "Paulo Scardine", "link": "https://stackoverflow.com/users/444036/paulo-scardine"}, "is_accepted": true, "score": 2, "last_activity_date": 1508361195, "last_edit_date": 1508361195, "creation_date": 1508360821, "answer_id": 46819249, "question_id": 46819094, "link": "https://stackoverflow.com/questions/46819094/read-a-number-at-the-end-of-a-file/46819249#46819249", "title": "read a number at the end of a file", "body": "<p>Just read the last few bytes and use a regular expression in order to extract the float number.</p>\n\n<p>Untested:</p>\n\n<pre><code>import re\n\nwith open('/path/to/file.txt') as input_file:\n    input_file.seek(-100, 2)\n    last_100_bytes = input_file.read()\n    match = re.search(r'\\D(\\d+\\.\\d+)$', last_100_bytes)\n    if match:\n        print('The float is {}'.format(match.group(0)))\n    else:\n        print('no float found at the end of the file')\n</code></pre>\n"}], "owner": {"reputation": 3514, "user_id": 1506850, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/529adde7e6c422b0ab9b990d9b09e8da?s=128&d=identicon&r=PG&f=1", "display_name": "00__00__00", "link": "https://stackoverflow.com/users/1506850/00-00-00"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 46819249, "answer_count": 1, "score": 0, "last_activity_date": 1508361195, "creation_date": 1508360207, "last_edit_date": 1508360593, "question_id": 46819094, "link": "https://stackoverflow.com/questions/46819094/read-a-number-at-the-end-of-a-file", "title": "read a number at the end of a file", "body": "<p>I have a series of textfiles.\nThey all end with a float, without a preceding whitespace\n<code>...foo123.456</code>. The float has an unbounded number of digits.</p>\n\n<p>the files are large so I would like to avoid reading them completely in memory.\nThey have also different sizes.</p>\n\n<p>How to avoid readgin the entire file?</p>\n"}, {"tags": ["python", "csv", "dictionary"], "comments": [{"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1508360448, "post_id": 46819090, "comment_id": 80585661, "body": "You probably have a blank line at the end of your CSV, or a line somewhere with only one column."}, {"owner": {"reputation": 3, "user_id": 8797886, "user_type": "registered", "profile_image": "https://graph.facebook.com/880299568806111/picture?type=large", "display_name": "Siem", "link": "https://stackoverflow.com/users/8797886/siem"}, "reply_to_user": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1508360684, "post_id": 46819090, "comment_id": 80585773, "body": "The users.csv file is exactly the file used in test.py, @DanielRoseman. So every line has 2 columns and there&#39;s no last blank line"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 8797886, "user_type": "registered", "profile_image": "https://graph.facebook.com/880299568806111/picture?type=large", "display_name": "Siem", "link": "https://stackoverflow.com/users/8797886/siem"}, "edited": false, "score": 0, "creation_date": 1508361207, "post_id": 46819208, "comment_id": 80586025, "body": "Thanks for this in depth answer, @Mandraenke. adding <code>if len(row)==2:</code> fixed the problem. The weird thing is that there&#39;s <i>not</i> a newline at the end. Checked numerous times... Maybe it got something to do with the Python version. I don&#39;t know..."}], "tags": [], "owner": {"reputation": 2600, "user_id": 4940826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39e3585ec184399307633434c4660c91?s=128&d=identicon&r=PG&f=1", "display_name": "Mandraenke", "link": "https://stackoverflow.com/users/4940826/mandraenke"}, "is_accepted": true, "score": 0, "last_activity_date": 1508360617, "creation_date": 1508360617, "answer_id": 46819208, "question_id": 46819090, "link": "https://stackoverflow.com/questions/46819090/why-does-this-csv-to-python-dictionary-code-give-an-indexerror/46819208#46819208", "title": "Why does this CSV to Python dictionary code give an IndexError?", "body": "<p>You should check the length and type of <code>rows</code>. Tried your example:</p>\n\n<pre><code>$cat t.py\nimport csv\nglobal users\nusers = {}\nwith open('users.csv', mode='r') as readuserfile:\n    readusers = csv.reader(readuserfile, delimiter=',')\n    next(readusers)\n    for rows in readusers:\n        users[rows[0]] = float(rows[1])\n\nprint users\n$cat users.csv\nname,money_in_pocket\nsiem,10\nbart,10\nivar,10\n$python t.py\n{'ivar': 10.0, 'bart': 10.0, 'siem': 10.0}\n$\n</code></pre>\n\n<p>Works fine. But if there is a newline at the end it fails:</p>\n\n<pre><code>$cat &gt;&gt; users.csv\n\n$python t.py\nTraceback (most recent call last):\n  File \"t.py\", line 8, in &lt;module&gt;\n    users[rows[0]] = float(rows[1])\nIndexError: list index out of range\n$\n</code></pre>\n\n<p>Adding a simple check helps:</p>\n\n<pre><code>$cat t.py\n...\n    for rows in readusers:\n        if len(rows)==2:\n          users[rows[0]] = float(rows[1])\n...\n$python t.py\n{'ivar': 10.0, 'bart': 10.0, 'siem': 10.0}\n$\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 8797886, "user_type": "registered", "profile_image": "https://graph.facebook.com/880299568806111/picture?type=large", "display_name": "Siem", "link": "https://stackoverflow.com/users/8797886/siem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 46819208, "answer_count": 1, "score": 0, "last_activity_date": 1508360617, "creation_date": 1508360183, "question_id": 46819090, "link": "https://stackoverflow.com/questions/46819090/why-does-this-csv-to-python-dictionary-code-give-an-indexerror", "title": "Why does this CSV to Python dictionary code give an IndexError?", "body": "<p>I'm writing code to make a global dictionary from a CSV-file in Python. The code doesn't do what I expect.</p>\n\n<p>users.csv</p>\n\n<pre><code>name,money_in_pocket\nsiem,10\nbart,10\nivar,10\n</code></pre>\n\n<p>test.py</p>\n\n<pre><code>import csv\nglobal users\nusers = {}   \nwith open('users.csv', mode='r') as readuserfile:\n    readusers = csv.reader(readuserfile, delimiter=',')\n    next(readusers)\n    for rows in readusers:\n        users[rows[0]] = float(rows[1])\n</code></pre>\n\n<p>After running this piece of code, I expect the following to happen in the Shell:</p>\n\n<pre><code>&gt;&gt;&gt;print(dict)\n{'siem': 10, 'bart': 10, 'ivar': 10}\n</code></pre>\n\n<p>Instead, running test.py throws the next error:</p>\n\n<blockquote>\n  <p>Traceback (most recent call last):<br />\n  ----File \"C:\\Users\\siemd\\Desktop\\test.py\", line 8, in <br />\n  --------users[rows[0]] = float(rows[1])<br />\n  IndexError: list index out of range</p>\n</blockquote>\n\n<p>If I understand this right, then the <code>rows[0]</code> and <code>rows[1]</code> cannot return a value, because they're out of the range of the 'list' (which is a read csv file).<br />\nBut they should... Right?</p>\n"}, {"tags": ["python", "tensorflow", "deep-learning"], "answers": [{"tags": [], "owner": {"reputation": 56500, "user_id": 2658050, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yPuAp.jpg?s=128&g=1", "display_name": "lejlot", "link": "https://stackoverflow.com/users/2658050/lejlot"}, "is_accepted": true, "score": 2, "last_activity_date": 1508369539, "creation_date": 1508369539, "answer_id": 46820757, "question_id": 46819088, "link": "https://stackoverflow.com/questions/46819088/overcome-graphdef-cannot-be-larger-than-2gb-in-tensorflow-image-transformatio/46820757#46820757", "title": "overcome Graphdef cannot be larger than 2GB in tensorflow -- Image transformations with tf", "body": "<p>This is not how TF should be used. </p>\n\n<ol>\n<li>You should create graph <strong>once</strong>.</li>\n<li>You should create session <strong>once</strong>.</li>\n</ol>\n\n<p>Your current code does both things in a loop, thus causing slowness and memory issues. The problem lies in the fact that TF is not imperative language, so </p>\n\n<pre><code>new_img =tf.image.adjust_brightness(image, .4)  #image transformation\n</code></pre>\n\n<p>is not application of a function on the image.This creates an operation in a graph, and stores reference to this operation in new_img. So each time you call this function, your graph grows.</p>\n\n<p>So in pseudo code it should be:</p>\n\n<pre><code>create placeholder for image name\ncreate transformed image op - new_img\ncreate session\nfor each image\n  call in a session new_img op, providing path to the placehodler using feed_dict\n</code></pre>\n"}], "owner": {"reputation": 3628, "user_id": 6802252, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/93aac7d4f79b7275d62dc21cfe248ac2?s=128&d=identicon&r=PG&f=1", "display_name": "Moondra", "link": "https://stackoverflow.com/users/6802252/moondra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 379, "favorite_count": 0, "accepted_answer_id": 46820757, "answer_count": 1, "score": 0, "last_activity_date": 1508369539, "creation_date": 1508360176, "question_id": 46819088, "link": "https://stackoverflow.com/questions/46819088/overcome-graphdef-cannot-be-larger-than-2gb-in-tensorflow-image-transformatio", "title": "overcome Graphdef cannot be larger than 2GB in tensorflow -- Image transformations with tf", "body": "<p>I've referred to this question, but I don't quite understand the\nsecond method provided by Mr.mrry. </p>\n\n<p><a href=\"https://stackoverflow.com/questions/36349049/overcome-graphdef-cannot-be-larger-than-2gb-in-tensorflow\">overcome Graphdef cannot be larger than 2GB in tensorflow</a></p>\n\n<p>Basically, I'm trying to use tf's built in image transformation methods on images. I'm running into the error provided in the title. \nAlso, do I need to keep creating a new session for each iteration?\nCurrently, this process is a little slow and am not sure how to speed it up. </p>\n\n<pre><code>import tensorflow as tf\nimport os\nfrom scipy.ndimage import imread\nfrom scipy.misc import imresize, imshow\nimport matplotlib.pyplot as plt\n\n\nfor fish in Fishes:\n    fish_images = os.listdir(os.path.join('C:\\\\Users\\\\Moondra\\\\Desktop\\\\Fishes', fish))  # get the image files\n    os.makedirs(SAVE_DIR + fish, exist_ok = True)\n    for num, fish_image in enumerate(fish_images):\n        image =imread(os.path.join('C:\\\\Users\\\\Moondra\\\\Desktop\\\\Fishes', fish, fish_image))\n        new_img =tf.image.adjust_brightness(image, .4)  #image transformation\n        with tf.Session() as sess:\n\n            new_image =sess.run(new_img)\n            imsave(os.path.join(SAVE_DIR, fish, fish +str(num)+'.jpg'), new_image)\n</code></pre>\n"}, {"tags": ["python", "linux", "bash", "shell", "grep"], "comments": [{"owner": {"reputation": 72748, "user_id": 3185459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PBjxg.jpg?s=128&g=1", "display_name": "RomanPerekhrest", "link": "https://stackoverflow.com/users/3185459/romanperekhrest"}, "edited": false, "score": 0, "creation_date": 1508361942, "post_id": 46819085, "comment_id": 80586448, "body": "use xml parsers for such cases"}, {"owner": {"reputation": 551, "user_id": 495307, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7CUf8.jpg?s=128&g=1", "display_name": "MostWanted", "link": "https://stackoverflow.com/users/495307/mostwanted"}, "edited": false, "score": 0, "creation_date": 1508363133, "post_id": 46819085, "comment_id": 80586984, "body": "awk.. store the message then substring the value of typeN in to a hashmap with a counter.. if any of the values in the hashmap are greater than 1 then print out the message.."}, {"owner": {"reputation": 72748, "user_id": 3185459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PBjxg.jpg?s=128&g=1", "display_name": "RomanPerekhrest", "link": "https://stackoverflow.com/users/3185459/romanperekhrest"}, "edited": false, "score": 0, "creation_date": 1508365952, "post_id": 46819085, "comment_id": 80587969, "body": "are you able t install <code>xmlstarlet</code>. Let me know"}], "owner": {"reputation": 119, "user_id": 5940797, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/5b8e82c031250dd784ec3c172c01e002?s=128&d=identicon&r=PG&f=1", "display_name": "Gans", "link": "https://stackoverflow.com/users/5940797/gans"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1508360146, "creation_date": 1508360146, "question_id": 46819085, "link": "https://stackoverflow.com/questions/46819085/extract-string-between-two-tags-if-it-repeats-more-than-once", "title": "Extract string between two tags if it repeats more than once", "body": "<p>I have a xml log like below and I want to extract the value 1234656 if a string \"Some Text\"  repeats twice.</p>\n\n<pre><code>&lt;Message  extract_id =\"123456\"&gt;\n  &lt;Tag1&gt;\n    &lt;Type1&gt;Some Text&lt;/Type1&gt;\n    &lt;Type2&gt;a&lt;/Type2&gt;\n    &lt;Type3&gt;b&lt;/Type3&gt;\n                .\n                .\n                .\n                .\n    &lt;TypeN&gt;Some Text&lt;/TypeN&gt;\n &lt;/Tag1&gt;\n&lt;/Message&gt;\n</code></pre>\n\n<p>Note : This xml is inside log file.</p>\n\n<p>Can someone please help me with the grep or any other script ?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 1392, "user_id": 5509598, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E6UIR.jpg?s=128&g=1", "display_name": "mondieki", "link": "https://stackoverflow.com/users/5509598/mondieki"}, "edited": false, "score": 1, "creation_date": 1508360208, "post_id": 46819070, "comment_id": 80585548, "body": "This feels like a class assignment. What have you attempted so far?"}, {"owner": {"reputation": 1, "user_id": 8798058, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-8lgTEEvGmAI/AAAAAAAAAAI/AAAAAAAAAEk/1Il87cC24cc/photo.jpg?sz=128", "display_name": "OpTiiMiizE", "link": "https://stackoverflow.com/users/8798058/optiimiize"}, "reply_to_user": {"reputation": 1392, "user_id": 5509598, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E6UIR.jpg?s=128&g=1", "display_name": "mondieki", "link": "https://stackoverflow.com/users/5509598/mondieki"}, "edited": false, "score": 0, "creation_date": 1508360442, "post_id": 46819070, "comment_id": 80585656, "body": "I have gotten everything write apart from the writing to file I have got the code working so it ask the user for their name age and year group 5 times and prints their username now I need to write these usernames to a file?"}, {"owner": {"reputation": 6608, "user_id": 867889, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/766cbf5cffe9872f58f00c994cd34a3f?s=128&d=identicon&r=PG", "display_name": "y.selivonchyk", "link": "https://stackoverflow.com/users/867889/y-selivonchyk"}, "edited": false, "score": 0, "creation_date": 1508361961, "post_id": 46819070, "comment_id": 80586458, "body": "first you have to open a file hander <code>output_file= open(&quot;.&#47;usernames.txt&quot;, &quot;w&quot;)</code> and then instead of using simple <code>print(username)</code> use <code>print(&quot;test&quot;, file=output)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8798058, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-8lgTEEvGmAI/AAAAAAAAAAI/AAAAAAAAAEk/1Il87cC24cc/photo.jpg?sz=128", "display_name": "OpTiiMiizE", "link": "https://stackoverflow.com/users/8798058/optiimiize"}, "edited": false, "score": 0, "creation_date": 1508395721, "post_id": 46819477, "comment_id": 80595571, "body": "Thank you everyone very much"}], "tags": [], "owner": {"reputation": 1071, "user_id": 8685423, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kMQax.png?s=128&g=1", "display_name": "Erick Shepherd", "link": "https://stackoverflow.com/users/8685423/erick-shepherd"}, "is_accepted": false, "score": 0, "last_activity_date": 1508361804, "creation_date": 1508361804, "answer_id": 46819477, "question_id": 46819070, "link": "https://stackoverflow.com/questions/46819070/writing-a-loop-to-a-file/46819477#46819477", "title": "Writing a loop to a file", "body": "<p>You can save data to a file in Python by opening a <code>file</code> object in write mode. To do this, you would use the built-in <code>open()</code> function, which returns a file object. The <code>open()</code> function accepts a number of possible arguments, but the two you are interested in are the filename and mode. As an example of the usage:</p>\n\n<pre><code>file = open(\"your_filename_here.txt\", \"w\")\n</code></pre>\n\n<p>This opens a file object named <code>your_filename_here.txt</code> in <em>write mode</em>, indicated by passing <code>\"w\"</code> as the second argument of the function. From here, you can write the usernames to this file using the <code>write()</code> function of the <code>file</code> object:</p>\n\n<pre><code>username = \"your_username_here\"\nfile.write(username + \"\\n\")\n</code></pre>\n\n<p>Where the <code>\\n</code> newline character at the end ensures that each username is assigned to its own line within the text file.</p>\n\n<p>This call to the <code>write()</code> function can then be put into your <code>for</code> loop to write each username to the file. Once the loop completes, you can then call the <code>close()</code> function of the <code>file</code> object to close the file.</p>\n\n<pre><code>file.close()\n</code></pre>\n\n<p>As a prototype from your description of the program, the whole process would look something like this:</p>\n\n<pre><code># Opens a new or existing file named \"usernames.txt\".\nfile = open(\"usernames.txt\", \"w\")\n\n# Assigns the number of users.\nusers = 5\n\n# Loops once for each user.\nfor user in range(users):\n\n    # Collects user's name, year group, and age.\n    name = input(\"Enter your name:       \")\n    year = input(\"Enter your year group: \")\n    age  = input(\"Enter your age:        \")\n\n    # Creates a username for the user.\n    username = name[0:3] + year + age\n\n    # Prints the username.\n    print(\"Username: \" + username + \"\\n\")\n\n    # Writes the username to the file.\n    file.write(username + \"\\n\")\n\n# Closes the file.\nfile.close()\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8798058, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-8lgTEEvGmAI/AAAAAAAAAAI/AAAAAAAAAEk/1Il87cC24cc/photo.jpg?sz=128", "display_name": "OpTiiMiizE", "link": "https://stackoverflow.com/users/8798058/optiimiize"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1508361804, "creation_date": 1508360057, "question_id": 46819070, "link": "https://stackoverflow.com/questions/46819070/writing-a-loop-to-a-file", "title": "Writing a loop to a file", "body": "<p>Hey guys I am new to python I\u2019m in year 11 so I\u2019m still learning I wrote a code that loops the questions of asking what the useres name is their age and year group and then prints out a username containing their first 3 letters of their name and their year group then age ? \nI was wondering how I could write all of these usernames into a file I use a for loop to repeat the question 5 times to ask 5 different users and now I want to know how to store their user names into a file I know how to store an input but not this type of problem </p>\n"}, {"tags": ["python", "dataframe"], "comments": [{"owner": {"reputation": 66, "user_id": 5675658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8be8cc780e1d5c1c8804a040ed3c753d?s=128&d=identicon&r=PG&f=1", "display_name": "Sumit Deshmukh", "link": "https://stackoverflow.com/users/5675658/sumit-deshmukh"}, "edited": false, "score": 0, "creation_date": 1508360529, "post_id": 46819035, "comment_id": 80585697, "body": "unrelated: You don&#39;t need to close the file at the last <code>f.close()</code>. &#39;with ..&#39; context would do that for you.  Can you explain how are you iterating between different text files? I see you are opening the file in append mode. That would seek to the end of file and may consume a lot of time if the size of the file grows huge."}, {"owner": {"reputation": 479, "user_id": 6060707, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/04b71eedc00413936f9a84722af23b2f?s=128&d=identicon&r=PG&f=1", "display_name": "BingbongKim", "link": "https://stackoverflow.com/users/6060707/bingbongkim"}, "reply_to_user": {"reputation": 66, "user_id": 5675658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8be8cc780e1d5c1c8804a040ed3c753d?s=128&d=identicon&r=PG&f=1", "display_name": "Sumit Deshmukh", "link": "https://stackoverflow.com/users/5675658/sumit-deshmukh"}, "edited": false, "score": 0, "creation_date": 1508361728, "post_id": 46819035, "comment_id": 80586328, "body": "@Sumit Deshmukh Thank you for the advice. And I found that my code has a big problem. the comments goes to the end of the txt file. Is it because of the append mode? I updates the code. I don&#39;t know how to solve it."}, {"owner": {"reputation": 479, "user_id": 6060707, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/04b71eedc00413936f9a84722af23b2f?s=128&d=identicon&r=PG&f=1", "display_name": "BingbongKim", "link": "https://stackoverflow.com/users/6060707/bingbongkim"}, "reply_to_user": {"reputation": 66, "user_id": 5675658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8be8cc780e1d5c1c8804a040ed3c753d?s=128&d=identicon&r=PG&f=1", "display_name": "Sumit Deshmukh", "link": "https://stackoverflow.com/users/5675658/sumit-deshmukh"}, "edited": false, "score": 0, "creation_date": 1508363325, "post_id": 46819035, "comment_id": 80587065, "body": "now it works good."}, {"owner": {"reputation": 22993, "user_id": 1394393, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mSjIL.jpg?s=128&g=1", "display_name": "jpmc26", "link": "https://stackoverflow.com/users/1394393/jpmc26"}, "edited": false, "score": 0, "creation_date": 1508365337, "post_id": 46819035, "comment_id": 80587785, "body": "That does not appear to be a TSV file (tab separated value file). It has some kind of customization that gives it sections and embeds data in the TSV format inside one of them."}], "owner": {"reputation": 479, "user_id": 6060707, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/04b71eedc00413936f9a84722af23b2f?s=128&d=identicon&r=PG&f=1", "display_name": "BingbongKim", "link": "https://stackoverflow.com/users/6060707/bingbongkim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 247, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1508363278, "creation_date": 1508359890, "last_edit_date": 1508363278, "question_id": 46819035, "link": "https://stackoverflow.com/questions/46819035/python-add-comment-and-a-column-to-txt-tsv-file", "title": "Python - Add comment and a column to txt (tsv) file", "body": "<p>There is a txt file (tap separated) with comments like:</p>\n\n<pre><code>[header]\nThis file is generated by Bingbong Kim\nuser name : user\nuser gender : male\nuser age : 45\n[data]\nuser_item        color        price\nitem1            red          10\nitem2            black        20\nitem3            green        10\nitem4            blue         15\n</code></pre>\n\n<p>I would like to add one more comment(#user country) and insert a new column that all values are same like:</p>\n\n<pre><code>[header]\nThis file is generated by Bingbong Kim\nuser name : user\nuser gender : male\nuser age : 45\nuser country : US\n[data]\nuser_item        color        price        check\nitem1            red          10           true\nitem2            black        20           true\nitem3            green        10           true\nitem4            blue         15           true\n</code></pre>\n\n<p>Now I did :</p>\n\n<pre><code>import pandas as pd\n\n# save the comments in a list\nheader_list = []\ntemp_report = open('report.txt')\nfor i, line in enumerate(temp_report):\n    header_list.append(line)\n    if i == 7:\n        temp_report.close()\n        break\n\n# create a dataframe without the comments\nreport = pd.read_csv('report.txt', skiprows=6, sep='\\t')\n\n# insert a column to the dataframe\nreport['check'] = \"true\"    #all values are same\n\n# write the comment first and then write the changed dataframe\nf = open('new_report.txt', 'a')\nfor comment in header_list:\n    f.write(comment)\nreport.to_csv(f, sep='\\t', index=False)\nf.close()\n</code></pre>\n\n<p>I think there seems to be another good way. It takes about 50 second per a txt file because the txt file is too big. How can I improve it?</p>\n"}, {"tags": ["python", "django", "django-queryset", "models"], "comments": [{"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1508359972, "post_id": 46819024, "comment_id": 80585444, "body": "You cannot do this. A queryset by definition is a set of objects from a single model."}], "answers": [{"tags": [], "owner": {"reputation": 2759, "user_id": 2217516, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/a535610ddfa849990fc141d4ac5600fe?s=128&d=identicon&r=PG", "display_name": "Robert Townley", "link": "https://stackoverflow.com/users/2217516/robert-townley"}, "is_accepted": true, "score": 5, "last_activity_date": 1508361694, "last_edit_date": 1508361694, "creation_date": 1508361268, "answer_id": 46819354, "question_id": 46819024, "link": "https://stackoverflow.com/questions/46819024/how-to-combine-two-querysets-into-one-from-different-models/46819354#46819354", "title": "How to combine two Querysets into one from different models?", "body": "<p>You can't do it at the database or queryset level unfortunately because those two things don't exist in the same database table. You can do it on the python side (though it's slower and more computationally intensive).</p>\n\n<p>Assuming that both Cars and Horses have a \"date\" attribute, you can do this:</p>\n\n<pre><code>cars = Cars.objects.all().filter(color='red')\nhorses = Horses.objects.all()\nall_things = list(cars) + list(horses)\nsorted_things = sorted(all_things, key=lambda x: x.date)\n</code></pre>\n\n<p>Another option (which is inefficient on the database level) would be to make them all inherit from the same non-abstract model.</p>\n\n<pre><code>class Item(models.Model):\n    date = models.DateTimeFiedl()\n    item_type = models.CharField(max_length=255)\n\n    def get_instance(self):\n        if self.item_type = 'car':\n            return Car.objects.get(id=self.id)\n        elif self.item_type == 'horse':\n            return Horse.objects.get(id=self.id)\n\nclass Car(Item):\n    color = models.CharField(max_length=12)\n\n    def save(self, *args, **kwargs):\n        self.item_type = 'car'\n        super(Car, self).save(*args, **kwargs)\n\nclass Horse(Item):\n    breed = models.CharField(max_length=25)\n\n    def save(self, *args, **kwargs):\n        self.item_type = 'horse'\n        super(Horse, self).save(*args, **kwargs)\n</code></pre>\n\n<p>With that, you can do</p>\n\n<pre><code>items = Item.objects.all().order_by('date')\nfor item in items:\n    print(type(item))  # Always \"Item\"\n    actual_item = item.get_instance()\n    if type(actual_item) == Car:\n        print(\"I am a car\")\n    else:\n        print(\"I am a horse\")\n</code></pre>\n\n<p>While iterating through them grab each specific item as needed (similar to how Wagtail handles pages, you make a convenience method for grabbing an object based on its parent class)</p>\n"}, {"comments": [{"owner": {"reputation": 121, "user_id": 6632168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1e3c75ab25b4017f95e8fcf0ee736e7?s=128&d=identicon&r=PG&f=1", "display_name": "White", "link": "https://stackoverflow.com/users/6632168/white"}, "edited": false, "score": 0, "creation_date": 1508392311, "post_id": 46820163, "comment_id": 80594366, "body": "What you mean, I think, is called Database Normalization: <a href=\"https://en.wikipedia.org/wiki/Database_normalization\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Database_normalization</a>"}, {"owner": {"reputation": 301, "user_id": 5734457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586747394d8400b2143e9d4ecebbd7ad?s=128&d=identicon&r=PG&f=1", "display_name": "davecaputo", "link": "https://stackoverflow.com/users/5734457/davecaputo"}, "reply_to_user": {"reputation": 121, "user_id": 6632168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1e3c75ab25b4017f95e8fcf0ee736e7?s=128&d=identicon&r=PG&f=1", "display_name": "White", "link": "https://stackoverflow.com/users/6632168/white"}, "edited": false, "score": 0, "creation_date": 1508398623, "post_id": 46820163, "comment_id": 80597129, "body": "Correct! That&#39;s exactly it."}, {"owner": {"reputation": 603, "user_id": 7776359, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/297a02485d9f658795c2735ca75f63cb?s=128&d=identicon&r=PG&f=1", "display_name": "Pablo Viacheslav", "link": "https://stackoverflow.com/users/7776359/pablo-viacheslav"}, "edited": false, "score": 0, "creation_date": 1508428843, "post_id": 46820163, "comment_id": 80615868, "body": "My solution was a mix of the approach you are suggesting and using list. But your comment is right, the project evolved in a rather oddly way in terms of code organization."}], "tags": [], "owner": {"reputation": 301, "user_id": 5734457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586747394d8400b2143e9d4ecebbd7ad?s=128&d=identicon&r=PG&f=1", "display_name": "davecaputo", "link": "https://stackoverflow.com/users/5734457/davecaputo"}, "is_accepted": false, "score": 3, "last_activity_date": 1508365372, "creation_date": 1508365372, "answer_id": 46820163, "question_id": 46819024, "link": "https://stackoverflow.com/questions/46819024/how-to-combine-two-querysets-into-one-from-different-models/46820163#46820163", "title": "How to combine two Querysets into one from different models?", "body": "<p>If you really need such queryset, this could be a symptom that the models are incorrectly designed, with the risk that any quick fix would probably be more tedious to maintain than reworking your models. My suggestion is to set up a single model which replaces both Car and Horse (even if some fields will remain empty for the instances of each case), with a separate field to allow you identify the two easily. For example:</p>\n\n<pre><code>class Vehicle(models.Model):\n    category = models.IntegerField(\n        choices=[(10, 'Horse'), (20, 'Car'), (30, 'Bicycle')]\n    )\n    # other fields here...\n</code></pre>\n"}], "owner": {"reputation": 603, "user_id": 7776359, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/297a02485d9f658795c2735ca75f63cb?s=128&d=identicon&r=PG&f=1", "display_name": "Pablo Viacheslav", "link": "https://stackoverflow.com/users/7776359/pablo-viacheslav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4063, "favorite_count": 2, "accepted_answer_id": 46819354, "answer_count": 2, "score": 0, "last_activity_date": 1508365372, "creation_date": 1508359833, "question_id": 46819024, "link": "https://stackoverflow.com/questions/46819024/how-to-combine-two-querysets-into-one-from-different-models", "title": "How to combine two Querysets into one from different models?", "body": "<p>I need to combine two Querysets from different models into one. The most suggested solutions I've found online are: </p>\n\n<p>To use <code>|</code> and <code>&amp;</code>, but this works only in querysets from the same model</p>\n\n<p>To use <code>chain</code> and <code>list</code>, but this takes away some of the queryset methods, and because of the way the code in my project is structured I cannot change that. I tried it and didn't work.</p>\n\n<p>I read about <a href=\"https://docs.djangoproject.com/en/dev/topics/db/queries/#complex-lookups-with-q\" rel=\"nofollow noreferrer\">Q</a>, but it's not clear to me how I can apply it to accomplish what I need.</p>\n\n<p>Basically I need to combine two querysets from different models into a third queryset, not a list. They share some fields names, perhaps that's useful with <code>Q</code>. In example:</p>\n\n<pre><code>queryset_1 = Cars.objects.all().filter(color='red')\nqueryset_2 = Horses.objects.all()\n\nqueryset_3 = queryset_1 + queryset_2\n\nqueryset_3.order_by('date')\n</code></pre>\n"}, {"tags": ["javascript", "python"], "comments": [{"owner": {"reputation": 1284, "user_id": 3889006, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/eef61d4e5c2c2b4deb071d281b7af84d?s=128&d=identicon&r=PG&f=1", "display_name": "Sailesh Kotha", "link": "https://stackoverflow.com/users/3889006/sailesh-kotha"}, "edited": false, "score": 0, "creation_date": 1508360803, "post_id": 46819013, "comment_id": 80585820, "body": "<code>&quot;&quot;.join(sorted((set(&quot;cbacdcbc&quot;))))</code>   You can use one line in python to remove duplicates"}, {"owner": {"reputation": 14807, "user_id": 6870228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13425c63b585e3bba05d30509e9e2b00?s=128&d=identicon&r=PG&f=1", "display_name": "Keith", "link": "https://stackoverflow.com/users/6870228/keith"}, "reply_to_user": {"reputation": 1284, "user_id": 3889006, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/eef61d4e5c2c2b4deb071d281b7af84d?s=128&d=identicon&r=PG&f=1", "display_name": "Sailesh Kotha", "link": "https://stackoverflow.com/users/3889006/sailesh-kotha"}, "edited": false, "score": 2, "creation_date": 1508361945, "post_id": 46819013, "comment_id": 80586452, "body": "@sailesh  I believe there is more to this question than just removing duplicate letters.   Otherwise the JS could just be -&gt; <code>Array.from(new Set(&quot;cbacdcbc&quot;.split(&quot;&quot;))).sort().join(&#39;&#39;)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 603, "user_id": 5104526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d7968c8f8f4a0f1bc966f2773e514bb?s=128&d=identicon&r=PG&f=1", "display_name": "Austin Ezell", "link": "https://stackoverflow.com/users/5104526/austin-ezell"}, "is_accepted": true, "score": 1, "last_activity_date": 1508362655, "creation_date": 1508362655, "answer_id": 46819659, "question_id": 46819013, "link": "https://stackoverflow.com/questions/46819013/how-to-translate-this-python-code-to-javascript-involves-sets/46819659#46819659", "title": "How to translate this Python code to JavaScript? (involves Sets)", "body": "<p>JavaScript <code>replace</code> does not happen globally. It will only replace the first occurrence. Change the JavaScript to be \n<code>.replace(new RegExp(c, 'g'), '')</code>. </p>\n"}], "owner": {"reputation": 6083, "user_id": 1736601, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/898ece53307a59a16aae6fe549c5283d?s=128&d=identicon&r=PG", "display_name": "atkayla", "link": "https://stackoverflow.com/users/1736601/atkayla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 46819659, "answer_count": 1, "score": 3, "last_activity_date": 1508362655, "creation_date": 1508359767, "last_edit_date": 1508362558, "question_id": 46819013, "link": "https://stackoverflow.com/questions/46819013/how-to-translate-this-python-code-to-javascript-involves-sets", "title": "How to translate this Python code to JavaScript? (involves Sets)", "body": "<p><a href=\"https://leetcode.com/problems/remove-duplicate-letters/description\" rel=\"nofollow noreferrer\">https://leetcode.com/problems/remove-duplicate-letters/description</a></p>\n\n<blockquote>\n  <p>Given a string which contains only lowercase letters, remove duplicate\n  letters so that every letter appear once and only once. You must make\n  sure your result is the smallest in lexicographical order among all\n  possible results.</p>\n  \n  <p>Example:</p>\n  \n  <p>Given <code>\"bcabc\"</code>\n  Return <code>\"abc\"</code></p>\n  \n  <p>Given <code>\"cbacdcbc\"</code> Return <code>\"acdb\"</code></p>\n</blockquote>\n\n<p>Python:</p>\n\n<pre><code>def removeDuplicateLetters(self, s):\n    for c in sorted(set(s)):\n        suffix = s[s.index(c):]\n        if set(suffix) == set(s):\n            return c + self.removeDuplicateLetters(suffix.replace(c, ''))\n    return ''\n</code></pre>\n\n<p>The above is the correct solution, so I tried converting it to JavaScript.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>var removeDuplicateLetters = function(s) {\r\n  for (var c of new Set(s.split('').sort())) {\r\n    var suffix = s.substring(s.indexOf(c));\r\n    if (setsAreEqual(new Set(suffix), new Set(s))) {\r\n      return c + removeDuplicateLetters(suffix.replace(c, ''));\r\n    }\r\n  }\r\n  return '';\r\n};\r\n\r\nconst setsAreEqual = (a, b) =&gt; a.size === b.size &amp;&amp; [...a].every(x =&gt; b.has(x));\r\n\r\nconsole.log(removeDuplicateLetters(\"cbacdcbc\"));</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Which gives the wrong answer <code>acdbc</code> instead of <code>acdb</code>.</p>\n\n<p>Where is the error in my translation?</p>\n"}, {"tags": ["python", "matlab", "scipy", "sparse-matrix", "diagonal"], "answers": [{"comments": [{"owner": {"reputation": 161, "user_id": 8092075, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4f2ac3e8fbdfa6b2f4af793ace2ccb57?s=128&d=identicon&r=PG&f=1", "display_name": "user11", "link": "https://stackoverflow.com/users/8092075/user11"}, "edited": false, "score": 0, "creation_date": 1508363779, "post_id": 46819720, "comment_id": 80587240, "body": "Can you suggest how to make it work when added at the end like following because it doesn&#39;t work when concatenated at the end? <code>A = np.concatenate(your_solved_matrix, \\               sp.sparse.spdiags(diagA_innerPts, np.r_[0:2 + 1], 49, 51).toarray(), \\               your_solved_matrix               ), axis=0)</code>"}, {"owner": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "reply_to_user": {"reputation": 161, "user_id": 8092075, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4f2ac3e8fbdfa6b2f4af793ace2ccb57?s=128&d=identicon&r=PG&f=1", "display_name": "user11", "link": "https://stackoverflow.com/users/8092075/user11"}, "edited": false, "score": 0, "creation_date": 1508364169, "post_id": 46819720, "comment_id": 80587388, "body": "Can&#39;t follow you exactly, but you are calling numpy&#39;s concatenate (for dense numpy-arrays), while you probably want scipy&#39;s <code>sparse.hstack</code> or <code>sparse.vstack</code> Be careful when mixing those two very different types."}, {"owner": {"reputation": 161, "user_id": 8092075, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4f2ac3e8fbdfa6b2f4af793ace2ccb57?s=128&d=identicon&r=PG&f=1", "display_name": "user11", "link": "https://stackoverflow.com/users/8092075/user11"}, "edited": false, "score": 0, "creation_date": 1508375495, "post_id": 46819720, "comment_id": 80590337, "body": "Please let me know if you still need some more clarification. Thanks."}, {"owner": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "reply_to_user": {"reputation": 161, "user_id": 8092075, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4f2ac3e8fbdfa6b2f4af793ace2ccb57?s=128&d=identicon&r=PG&f=1", "display_name": "user11", "link": "https://stackoverflow.com/users/8092075/user11"}, "edited": false, "score": 0, "creation_date": 1508375584, "post_id": 46819720, "comment_id": 80590358, "body": "@user11 To be honest... the general design of your matrix is unclear to me. Try to be more formal within your edit. I&#39;m not sure if that&#39;s something for this question or a new one... I won&#39;t look at it today, maybe tomorrow. But especially the cropped example-output is not enough."}, {"owner": {"reputation": 161, "user_id": 8092075, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4f2ac3e8fbdfa6b2f4af793ace2ccb57?s=128&d=identicon&r=PG&f=1", "display_name": "user11", "link": "https://stackoverflow.com/users/8092075/user11"}, "edited": false, "score": 0, "creation_date": 1508376302, "post_id": 46819720, "comment_id": 80590527, "body": "Please see the edit now. I have added more clarification and you can just reproduce the matrix <code>A</code> by copying and running those few lines of code under the edit."}], "tags": [], "owner": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "is_accepted": false, "score": 1, "last_activity_date": 1508363462, "last_edit_date": 1508363462, "creation_date": 1508362951, "answer_id": 46819720, "question_id": 46819003, "link": "https://stackoverflow.com/questions/46819003/spdiags-function-not-working-as-expected-in-python/46819720#46819720", "title": "spdiags() function not working as expected in Python", "body": "<p>I have no explanation for your observation (not much of a matlab-user; but i can confirm that octave is doing it like you said), but following scipy's <a href=\"https://docs.scipy.org/doc/scipy-0.14.0/reference/generated/scipy.sparse.spdiags.html#scipy.sparse.spdiags\" rel=\"nofollow noreferrer\">example-usage</a>, you can achieve this result using:</p>\n\n<pre><code>import numpy as np\nimport scipy.sparse as sp\n\ndata = np.tile(np.array([-8037.5, 50., -12.5]), (3,1))\nx = sp.spdiags(data, np.arange(3), 1, 51)\n\nprint(x)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>(0, 0)        -8037.5\n(0, 1)        50.0\n(0, 2)        -12.5\n</code></pre>\n\n<p>The tile-step builds:</p>\n\n<pre><code>[[-8037.5    50.    -12.5]\n [-8037.5    50.    -12.5]\n [-8037.5    50.    -12.5]]\n</code></pre>\n\n<p>and of course everything is 0-indexing based.</p>\n"}, {"comments": [{"owner": {"reputation": 161, "user_id": 8092075, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4f2ac3e8fbdfa6b2f4af793ace2ccb57?s=128&d=identicon&r=PG&f=1", "display_name": "user11", "link": "https://stackoverflow.com/users/8092075/user11"}, "edited": false, "score": 0, "creation_date": 1508376415, "post_id": 46821546, "comment_id": 80590552, "body": "Thanks. Can you please take a look at why matrix <code>A</code>, as described under the edit, is not giving correct output as expected?"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "reply_to_user": {"reputation": 161, "user_id": 8092075, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4f2ac3e8fbdfa6b2f4af793ace2ccb57?s=128&d=identicon&r=PG&f=1", "display_name": "user11", "link": "https://stackoverflow.com/users/8092075/user11"}, "edited": false, "score": 1, "creation_date": 1508378907, "post_id": 46821546, "comment_id": 80591100, "body": "<code>sparse.diags</code> is probably the function that you want to use, not <code>spdiags</code>."}, {"owner": {"reputation": 161, "user_id": 8092075, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4f2ac3e8fbdfa6b2f4af793ace2ccb57?s=128&d=identicon&r=PG&f=1", "display_name": "user11", "link": "https://stackoverflow.com/users/8092075/user11"}, "edited": false, "score": 0, "creation_date": 1508418745, "post_id": 46821546, "comment_id": 80608704, "body": "Yes, <code>sp.sparse.diags</code> works well as suggested. Thanks."}], "tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": true, "score": 3, "last_activity_date": 1508378869, "last_edit_date": 1508378869, "creation_date": 1508376163, "answer_id": 46821546, "question_id": 46819003, "link": "https://stackoverflow.com/questions/46819003/spdiags-function-not-working-as-expected-in-python/46821546#46821546", "title": "spdiags() function not working as expected in Python", "body": "<p>This makes a sparse matrix (51,1), with a value down each row:</p>\n\n<pre><code>In [5]: sparse.spdiags(data,[0,-1,-2],51,1)\nOut[5]: \n&lt;51x1 sparse matrix of type '&lt;class 'numpy.float64'&gt;'\n    with 3 stored elements (3 diagonals) in DIAgonal format&gt;\nIn [6]: print(_)\n  (0, 0)    -8037.5\n  (1, 0)    50.0\n  (2, 0)    -12.5\n</code></pre>\n\n<p>Notice that the <code>spdiags</code> definition:</p>\n\n<blockquote>\n  <p>data : array_like\n      matrix diagonals stored row-wise</p>\n</blockquote>\n\n<p>Sparse <code>diagonal format</code> stores its data in a matrix, part of which can be 'off-the-screen'.  So it's a little tricky to use.  I usually create matrices with the <code>coo</code> style of input.</p>\n\n<pre><code>In [27]: M =sparse.spdiags(data,[0,-1,-2],3,3)\nIn [28]: M.A\nOut[28]: \narray([[-8037.5,     0. ,     0. ],\n       [   50. ,     0. ,     0. ],\n       [  -12.5,     0. ,     0. ]])\nIn [29]: M.data\nOut[29]: \narray([[-8037.5],\n       [   50. ],\n       [  -12.5]])\nIn [30]: M.offsets\nOut[30]: array([ 0, -1, -2], dtype=int32)\n</code></pre>\n\n<p>What you want is its transpose (maybe)</p>\n\n<pre><code>In [32]: Mt = M.T\nIn [33]: Mt.A\nOut[33]: \narray([[-8037.5,    50. ,   -12.5],\n       [    0. ,     0. ,     0. ],\n       [    0. ,     0. ,     0. ]])\nIn [34]: Mt.data\nOut[34]: \narray([[-8037.5,     0. ,     0. ],\n       [    0. ,    50. ,     0. ],\n       [    0. ,     0. ,   -12.5]])\nIn [35]: Mt.offsets\nOut[35]: array([0, 1, 2], dtype=int32)\n</code></pre>\n\n<p>So we can recreate <code>Mt</code> with:</p>\n\n<pre><code>sparse.spdiags(Mt.data, Mt.offsets, 3,3)\n</code></pre>\n\n<hr>\n\n<p>If I save the Octave matrix and load it I get:</p>\n\n<pre><code>In [40]: loadmat('diags')\nOut[40]: \n{'__globals__': [],\n '__header__': b'MATLAB 5.0 MAT-file, written by Octave 4.0.0, 2017-10-19 01:24:58 UTC',\n '__version__': '1.0',\n 'x': &lt;1x51 sparse matrix of type '&lt;class 'numpy.float64'&gt;'\n    with 3 stored elements in Compressed Sparse Column format&gt;}\nIn [42]: X=_['x']\nIn [43]: print(X)\n  (0, 0)    -8037.5\n  (0, 1)    50.0\n  (0, 2)    -12.5\n</code></pre>\n\n<p>And if I convert it to the <code>dia</code> format I get something like <code>Mt</code>:</p>\n\n<pre><code>In [48]: sparse.dia_matrix(X)\nOut[48]: \n&lt;1x51 sparse matrix of type '&lt;class 'numpy.float64'&gt;'\n    with 3 stored elements (3 diagonals) in DIAgonal format&gt;\nIn [49]: print(_)\n  (0, 0)    -8037.5\n  (0, 1)    50.0\n  (0, 2)    -12.5\nIn [50]: _.data, _.offsets\nOut[50]: \n(array([[-8037.5,     0. ,     0. ],\n        [    0. ,    50. ,     0. ],\n        [    0. ,     0. ,   -12.5]]), array([0, 1, 2]))\n</code></pre>\n\n<p>The <code>sparse.diags</code> function might be more intuitive:</p>\n\n<pre><code>In [92]: sparse.diags(data, [0,1,2],(1,3))\nOut[92]: \n&lt;1x3 sparse matrix of type '&lt;class 'numpy.float64'&gt;'\n    with 3 stored elements (3 diagonals) in DIAgonal format&gt;\nIn [93]: _.A\nOut[93]: array([[-8037.5,    50. ,   -12.5]])\nIn [94]: print(__)\n  (0, 0)    -8037.5\n  (0, 1)    50.0\n  (0, 2)    -12.5\n</code></pre>\n\n<hr>\n\n<pre><code>In [56]: sp1 = sparse.spdiags(A_diag1, np.r_[0:2 + 1], 1, 51)\nIn [57]: sp2 = sparse.spdiags(A_diag2, np.r_[0:2 + 1], 49, 51)\nIn [58]: sp3 = sparse.spdiags(A_diag3, np.r_[48:50 + 1], 1, 51)\n</code></pre>\n\n<p>(the <code>r_</code> expressions could also be <code>np.arange(0,3)</code> and <code>np.arange(48,51)</code>)</p>\n\n<p>These can joined with <code>sparse.vstack</code> (which combines the <code>coo</code> format attributes)</p>\n\n<pre><code>    In [69]: B = sparse.vstack((sp1,sp2,sp3))\n    In [72]: B\n    Out[72]: \n    &lt;51x51 sparse matrix of type '&lt;class 'numpy.float64'&gt;'\n        with 147 stored elements in COOrdinate format&gt;\n\nIn [75]: B.tocsr()[45:, 46:].A\nOut[75]: \narray([[  1250.,      0.,      0.,      0.,      0.],\n       [-18505.,   1250.,      0.,      0.,      0.],\n       [  1250., -18505.,   1250.,      0.,      0.],\n       [     0.,   1250., -18505.,      0.,      0.],\n       [     0.,      0.,   1250.,      0.,      0.],\n       [     0.,      0.,      0.,      0.,      0.]])\n</code></pre>\n\n<p>matches your snapshot.  (I still need to figure out what you are trying to create).</p>\n\n<p><code>sparse.spdiags(data, diags, m, n)</code> is just another way of calling <code>sparse.dia_matrix((data, diags), shape=(m,n))</code></p>\n\n<p>Going back to <code>sparse.diags</code>, if you want 3 diagonals, each filled with a value from <code>data</code> we can use:</p>\n\n<pre><code>In [111]: B = sparse.diags(data,[0,1,2],(51,51))\nIn [112]: B\nOut[112]: \n&lt;51x51 sparse matrix of type '&lt;class 'numpy.float64'&gt;'\n    with 150 stored elements (3 diagonals) in DIAgonal format&gt;\n\nIn [114]: B.tocsr()[:5,:5].A\nOut[114]: \narray([[-8037.5,    50. ,   -12.5,     0. ,     0. ],\n       [    0. , -8037.5,    50. ,   -12.5,     0. ],\n       [    0. ,     0. , -8037.5,    50. ,   -12.5],\n       [    0. ,     0. ,     0. , -8037.5,    50. ],\n       [    0. ,     0. ,     0. ,     0. , -8037.5]])\n\nIn [115]: B.tocsr()[45:, 46:].A\nOut[115]: \narray([[   50. ,   -12.5,     0. ,     0. ,     0. ],\n       [-8037.5,    50. ,   -12.5,     0. ,     0. ],\n       [    0. , -8037.5,    50. ,   -12.5,     0. ],\n       [    0. ,     0. , -8037.5,    50. ,   -12.5],\n       [    0. ,     0. ,     0. , -8037.5,    50. ],\n       [    0. ,     0. ,     0. ,     0. , -8037.5]])\n</code></pre>\n\n<p>So the <code>sp1</code> would have to look like</p>\n\n<pre><code>In [117]: B.tocsr()[0,:].todia().data\nOut[117]: \narray([[-8037.5,     0. ,     0. ],\n       [    0. ,    50. ,     0. ],\n       [    0. ,     0. ,   -12.5]])\n</code></pre>\n"}], "owner": {"reputation": 161, "user_id": 8092075, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4f2ac3e8fbdfa6b2f4af793ace2ccb57?s=128&d=identicon&r=PG&f=1", "display_name": "user11", "link": "https://stackoverflow.com/users/8092075/user11"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 628, "favorite_count": 0, "accepted_answer_id": 46821546, "answer_count": 2, "score": 2, "last_activity_date": 1508418634, "creation_date": 1508359727, "last_edit_date": 1508418634, "question_id": 46819003, "link": "https://stackoverflow.com/questions/46819003/spdiags-function-not-working-as-expected-in-python", "title": "spdiags() function not working as expected in Python", "body": "<p>In Matlab/Octave, <code>spdiags([-8037.500     50.000    -12.500], 0:2, 1, 51)</code> gives following output:</p>\n\n<pre><code>(1, 1) -&gt; -8037.5\n(1, 2) -&gt;  50\n(1, 3) -&gt; -12.500\n</code></pre>\n\n<p>However, when I use the following in Python, it does not produce a similar result as in Matlab/Octave:</p>\n\n<pre><code>import numpy as np\nimport scipy as sp\ndata = array([[-8037.5],\n       [   50. ],\n       [  -12.5]])\nsp.sparse.spdiags(data, np.r_[0:2 + 1].T, 1, 51).toarray()\n</code></pre>\n\n<p>Python's <a href=\"https://docs.scipy.org/doc/scipy-0.14.0/reference/generated/scipy.sparse.diags.html\" rel=\"nofollow noreferrer\">spdiags()</a> produce following output, which is missing the <code>50</code> and <code>-12.5</code> terms at 1st and 2nd indices:</p>\n\n<pre><code>array([[-8037.5,     0. ,     0. ,     0. ,     0. ,     0. ,     0. ,\n            0. ,     0. ,     0. ,     0. ,     0. ,     0. ,     0. ,\n            0. ,     0. ,     0. ,     0. ,     0. ,     0. ,     0. ,\n            0. ,     0. ,     0. ,     0. ,     0. ,     0. ,     0. ,\n            0. ,     0. ,     0. ,     0. ,     0. ,     0. ,     0. ,\n            0. ,     0. ,     0. ,     0. ,     0. ,     0. ,     0. ,\n            0. ,     0. ,     0. ,     0. ,     0. ,     0. ,     0. ,\n            0. ,     0. ]])\n</code></pre>\n\n<p>I took a look at <a href=\"https://stackoverflow.com/a/31900194/8092075\">this</a> answer to a similar question, but I am not sure where I am going wrong.</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>I am trying to build a matrix <code>A</code> that is made of <code>A_diag1</code>, <code>A_diag2</code>, and <code>A_diag3</code> as shown below. I have defined <code>A_diag1</code> and <code>A_diag3</code> as suggested in the answer. </p>\n\n<pre><code>import numpy as np\nimport scipy as sp\nA_diag1 = np.tile(np.array([-8037.500, 50, -12.5]), (3,1))\nA_diag2 = np.reshape(np.repeat([1250, -18505, 1250], 49), (3, 49))\nA_diag3 = np.tile(np.array([12.5, -50, 8037.500]), (3,1))\nA = np.concatenate((sp.sparse.spdiags(A_diag1, np.r_[0:2 + 1], 1, 51).toarray(), \\\n              sp.sparse.spdiags(A_diag2, np.r_[0:2 + 1], 49, 51).toarray(), \\\n              sp.sparse.spdiags(A_diag3, np.r_[48:50 + 1], 1, 51).toarray()), axis=0)\n</code></pre>\n\n<p>However, five highlighted cells in last 3 rows and columns of <code>A</code> are showing up as zeros/singular as shown in the snapshot below. I expect those highlighted cells, currently showing as zeros, to be non-zero. [<strong><em>You can just copy and paste the above piece of code to reproduce <code>A</code> matrix from which the snapshot shown below is taken.</em></strong>]</p>\n\n<p><a href=\"https://i.stack.imgur.com/C6vcX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/C6vcX.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>EDIT2:</strong></p>\n\n<p>Following code that uses <code>sp.sparse.diags()</code> works as expected. Unlike <code>sp.sparse.spdiags</code>, input argument for the shape of the result (array dimensions) when using <code>sp.sparse.diags()</code> must be in a list.</p>\n\n<pre><code>import numpy as np\nimport scipy as sp\nA_diag1 = np.array([[-8037.500], [50], [-12.5]])\nA_diag2 = np.reshape(np.repeat([1250, -18505, 1250], 49), (3, 49))\nA_diag3 = np.array([[12.5], [-50], [8037.500]])\nA = np.concatenate((sp.sparse.diags(A_diag1, np.arange(0, 2 + 1), [1, 51]).toarray(), \\\nsp.sparse.diags(A_diag2, np.arange(0, 2 + 1), [49, 51]).toarray(), \\\nsp.sparse.diags(A_diag3, np.arange(48, 50 + 1), [1, 51]).toarray()), axis=0)\n</code></pre>\n"}, {"tags": ["python", "windows", "exe", "pyinstaller", "theano"], "answers": [{"tags": [], "owner": {"reputation": 4829, "user_id": 5181181, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/j8M6A.jpg?s=128&g=1", "display_name": "Nickpick", "link": "https://stackoverflow.com/users/5181181/nickpick"}, "is_accepted": true, "score": 2, "last_activity_date": 1511865414, "creation_date": 1511865414, "answer_id": 47529408, "question_id": 46818993, "link": "https://stackoverflow.com/questions/46818993/need-help-to-compile-python-with-pyinstaller/47529408#47529408", "title": "need help to compile python with pyinstaller", "body": "<p>I think I have a better solution for you: Use nsis in conjunction with pyinstaller.</p>\n\n<p>Here the answers in more detail:</p>\n\n<ol>\n<li>The file is that big because it contains the full python environment. I don't think there's much you can do about it, except creating a virtual environment that contains less files and using less packages in your code.</li>\n<li>Running the exe takes a long time because you have chosen the --onefile option. As a result it will unzip the exe, save it to a temporarary directory, and then run the script. When using --onefile it's actually not really an executable, but just a zip file that unzips and then starts itself. A better option might be:</li>\n<li>(and 4.). Instead of using the --onefile option, just package it normally with pyinstaller, and then create a script on top of it with <a href=\"http://nsis.sourceforge.net/Simple_tutorials\" rel=\"nofollow noreferrer\">nsis</a>. That way the user can run the installer, which will have packaged all the files you put in the nsis script (including all the files created by pyinstaller) and also any additional files you would like. There will be a nice setup interface that will also create a shortcut to the .exe.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 11066716, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-DqUGfUSt7CI/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNMNi2cwf_lrZ2qGZ3UYSxAJl-i4g/mo/photo.jpg?sz=128", "display_name": "Leonardo674", "link": "https://stackoverflow.com/users/11066716/leonardo674"}, "is_accepted": false, "score": 1, "last_activity_date": 1575384486, "creation_date": 1575384486, "answer_id": 59159679, "question_id": 46818993, "link": "https://stackoverflow.com/questions/46818993/need-help-to-compile-python-with-pyinstaller/59159679#59159679", "title": "need help to compile python with pyinstaller", "body": "<p>A little too late but, incase someone stumbles here later on, you can use 'auto-py-to-exe' package to remove the hassle of using CMD. It provides a nice GUI with all the options of 'pyinstaller'.</p>\n\n<p>It can be installed using 'pip install auto-py-to-exe' and Can be used with 'auto-py-to-exe' at terminal.</p>\n\n<p>GitHub link : <a href=\"https://github.com/brentvollebregt/auto-py-to-exe\" rel=\"nofollow noreferrer\">https://github.com/brentvollebregt/auto-py-to-exe</a></p>\n"}], "owner": {"reputation": 1243, "user_id": 6140421, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1xND1.jpg?s=128&g=1", "display_name": "St&#233;phane", "link": "https://stackoverflow.com/users/6140421/st%c3%a9phane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1153, "favorite_count": 0, "accepted_answer_id": 47529408, "answer_count": 2, "score": 2, "last_activity_date": 1592851305, "creation_date": 1508359692, "last_edit_date": 1592851305, "question_id": 46818993, "link": "https://stackoverflow.com/questions/46818993/need-help-to-compile-python-with-pyinstaller", "title": "need help to compile python with pyinstaller", "body": "<p>I want to distribute my python code on machines running windows 7+. It consists of a couple of .py files with the main in <code>cprofiles_lmfit.py</code>, together with a file <code>cprofiles.ui</code> to describe the GUI and a .pdf for the doc.</p>\n\n<p>I had a hard time (see <a href=\"https://stackoverflow.com/questions/45750676/build-a-exe-for-windows-from-a-python-3-script-importing-theano-with-pyinstalle\">build a .exe for Windows from a python 3 script importing theano with pyinstaller</a> for instance) but eventually made a suitable binary using pyinstaller with the command line:</p>\n\n<pre><code>pyinstaller --noupx --onefile --add-data=\"cprofiles.ui;.\" cprofiles_lmfit.py\n</code></pre>\n\n<p>beside a problem with the <code>theano</code> module described in the above link, the binary still have a few problems:</p>\n\n<ul>\n<li><p>the .exe is 220MB big; I would like reducing the size.</p></li>\n<li><p>when running the .exe a console opens and waits ~20 seconds before opening the GUI. Once the GUI is opened, closing the console kills the GUI... I would like avoiding this console and skip the ~20s.</p></li>\n<li><p>the ui file must be distributed together with the exe (in the same directory); I had hoped this shouldn't be the case with the 'add-data' option. I would like including it.</p></li>\n<li><p>the \u2018platforms\u2019 directory from the \u2018Library/plugin\u2019 directory of the python environment must also be distributed along with the exe. Otherwise there is an error message when running the exe \u2018this application has failed to start because it could not find the qt platform plugin windows\u2019 (but there is no error message from pyinstaller when building !). I would like getting rid of this 'platforms' game.</p></li>\n</ul>\n\n<p>Do you know how to address one these points ?</p>\n\n<hr>\n\n<p>update nov 28, 2017:\nno one ? please if you can contribute to one of these points, give me a clue.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 8450, "user_id": 3462319, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/89268869f7b0ba2846aecad61a51b458?s=128&d=identicon&r=PG&f=1", "display_name": "depperm", "link": "https://stackoverflow.com/users/3462319/depperm"}, "edited": false, "score": 1, "creation_date": 1508359721, "post_id": 46818977, "comment_id": 80585317, "body": "<code>answer=&#39;&#39;  while answer==&#39;&#39;: answer=input(&quot;blah&quot;).upper()</code>"}], "answers": [{"tags": [], "owner": {"reputation": 536, "user_id": 8767168, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/Tthwq.jpg?s=128&g=1", "display_name": "Austin A", "link": "https://stackoverflow.com/users/8767168/austin-a"}, "is_accepted": false, "score": -1, "last_activity_date": 1508359788, "creation_date": 1508359788, "answer_id": 46819017, "question_id": 46818977, "link": "https://stackoverflow.com/questions/46818977/while-nothing-is-entered/46819017#46819017", "title": "While nothing is entered", "body": "<p>Prompt for input again in a loop:</p>\n\n<pre><code>print()\nprint(\"Question 2\")\nprint(\"What is the currency of Spain?\")\nprint()\nprint(\"A  Euro\")\nprint(\"B  Dollar\")\nprint(\"C  Yen\")\nprint(\"D  Krona\")\n\nanswer = input(\"What is your choice: \").upper()\n\nwhile answer == \"\":\n    answer = input(\"What is your choice: \").upper()\nif answer == \"A\":\n       print(\"Correct!\")\n       score = score + 1\n       correct = True\nelse:\n       print(\"Sorry, the correct answer was A\")\n</code></pre>\n"}], "owner": {"reputation": 155, "user_id": 8435959, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/9c4cb10bf30cc1b5d4c2123cde718ae0?s=128&d=identicon&r=PG&f=1", "display_name": "user8435959", "link": "https://stackoverflow.com/users/8435959/user8435959"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1508359788, "creation_date": 1508359615, "question_id": 46818977, "link": "https://stackoverflow.com/questions/46818977/while-nothing-is-entered", "title": "While nothing is entered", "body": "<p>What do I need to add to force the user to enter something before moving on.</p>\n\n<pre><code>print()\nprint(\"Question 2\")\nprint(\"What is the currency of Spain?\")\nprint()\nprint(\"A  Euro\")\nprint(\"B  Dollar\")\nprint(\"C  Yen\")\nprint(\"D  Krona\")\nanswer = input(\"What is your choice: \").upper()\n\nwhile answer is none #keep asking\nif answer == \"A\":\n       print(\"Correct!\")\n       score = score + 1\nelse:\n       print(\"Sorry, the correct answer was A\")\n</code></pre>\n"}, {"tags": ["python", "pickle"], "comments": [{"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1508359863, "post_id": 46818937, "comment_id": 80585394, "body": "If you get the same behavior with <code>r</code>, <b>show us</b>, don&#39;t just assert it in the text. The failure with <code>w</code> is utterly unsurprising -- it&#39;s what one can/should expect."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 7224123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb398d7e906880777d293826f1aba628?s=128&d=identicon&r=PG&f=1", "display_name": "Dave", "link": "https://stackoverflow.com/users/7224123/dave"}, "edited": false, "score": 0, "creation_date": 1508360017, "post_id": 46818990, "comment_id": 80585474, "body": "I didnt know that it truncates the file. I replaces mode to <code>rb+</code> for pickle .dump and pickle.load and it works. thanks"}], "tags": [], "owner": {"reputation": 45741, "user_id": 744178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3193139ea494c45e63752504f5ff1f2?s=128&d=identicon&r=PG", "display_name": "jwodder", "link": "https://stackoverflow.com/users/744178/jwodder"}, "is_accepted": false, "score": 2, "last_activity_date": 1508359685, "creation_date": 1508359685, "answer_id": 46818990, "question_id": 46818937, "link": "https://stackoverflow.com/questions/46818937/cannot-do-pickle-load/46818990#46818990", "title": "Cannot do pickle.load", "body": "<p>The filehandle you're trying to load (<code>p</code>) was opened with mode <code>wb+</code>.  This truncates the file to length zero upon opening, and so there's nothing for <code>pickle.load</code> to unpickle, hence the <code>EOFError</code>.  Perhaps you meant to use <code>rb+</code> instead?</p>\n"}], "owner": {"reputation": 11, "user_id": 7224123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb398d7e906880777d293826f1aba628?s=128&d=identicon&r=PG&f=1", "display_name": "Dave", "link": "https://stackoverflow.com/users/7224123/dave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 769, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1579010803, "creation_date": 1508359468, "last_edit_date": 1508360282, "question_id": 46818937, "link": "https://stackoverflow.com/questions/46818937/cannot-do-pickle-load", "title": "Cannot do pickle.load", "body": "<p>I am not able to do a simpe pickle load on my VM.\nHere is simple  demo code of that.</p>\n\n<pre><code>root@bn18-6:~# python\nPython 2.7.12 (default, Nov 19 2016, 06:48:10)\n[GCC 5.4.0 20160609] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; import pickle\n&gt;&gt;&gt; x = {1:2 }\n&gt;&gt;&gt; f = open ('demo', 'wb+')\n&gt;&gt;&gt; f\n&lt;open file 'demo', mode 'wb+' at 0x7fae71b44660&gt;\n&gt;&gt;&gt; pickle.dump(x, f)\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt; f.close ()\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt; p = open('demo', 'wb+')\n&gt;&gt;&gt; p\n&lt;open file 'demo', mode 'wb+' at 0x7fae71b446f0&gt;\n&gt;&gt;&gt; a = pickle.load (p)\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"/usr/lib/python2.7/pickle.py\", line 1384, in load\n    return Unpickler(file).load()\n  File \"/usr/lib/python2.7/pickle.py\", line 864, in load\n    dispatch[key](self)\n  File \"/usr/lib/python2.7/pickle.py\", line 886, in load_eof\n    raise EOFError\nEOFError\n</code></pre>\n\n<p>I have used pickling and unpickling several times before for larger data but didnt encounter this problem.</p>\n\n<p>I have tried with <code>'r+'</code>,<code>'w+'</code> too.</p>\n\n<p>I have found <a href=\"https://stackoverflow.com/questions/10263564/python-pickling-dictionary-eoferror\">This</a> relevent but the solution involves increasing the RAM which is not possible in my case,</p>\n\n<p>Also there are several questions dealing with pickle errors but most of them had problems with file open mode. </p>\n"}, {"tags": ["python", "anaconda", "jupyter-notebook"], "answers": [{"comments": [{"owner": {"reputation": 257, "user_id": 4403927, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3ff3676a971cc3fd244d79ada43f76a5?s=128&d=identicon&r=PG&f=1", "display_name": "Drocchio", "link": "https://stackoverflow.com/users/4403927/drocchio"}, "edited": false, "score": 0, "creation_date": 1508709593, "post_id": 46819264, "comment_id": 80706298, "body": "thanks accepted, pity cannot upvote you because I do not have enough reputation"}], "tags": [], "owner": {"reputation": 498, "user_id": 8396562, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-wYKbnoTMUkA/AAAAAAAAAAI/AAAAAAAAG2Y/fUDsBs07yHQ/photo.jpg?sz=128", "display_name": "Samantha", "link": "https://stackoverflow.com/users/8396562/samantha"}, "is_accepted": true, "score": 3, "last_activity_date": 1508360893, "creation_date": 1508360893, "answer_id": 46819264, "question_id": 46818932, "link": "https://stackoverflow.com/questions/46818932/pd-not-recognized-although-declared/46819264#46819264", "title": "pd not recognized, although declared", "body": "<p>Are those lines of code in separate cells? Make sure you run the cell with <code>import pandas as pd</code> before you run the code that requires pandas. This seems like a basic fix but I can't tell what else you could have done wrong. </p>\n\n<p>Also, try and do a clean run so kernal -> clear output</p>\n"}], "owner": {"reputation": 257, "user_id": 4403927, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3ff3676a971cc3fd244d79ada43f76a5?s=128&d=identicon&r=PG&f=1", "display_name": "Drocchio", "link": "https://stackoverflow.com/users/4403927/drocchio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1609, "favorite_count": 0, "accepted_answer_id": 46819264, "answer_count": 1, "score": 1, "last_activity_date": 1508360893, "creation_date": 1508359447, "question_id": 46818932, "link": "https://stackoverflow.com/questions/46818932/pd-not-recognized-although-declared", "title": "pd not recognized, although declared", "body": "<p>I declared pd as follow:</p>\n\n<pre><code># import our packages\nimport pandas as pd\n%matplotlib inline\n</code></pre>\n\n<p>so far so good, but  then when I run this line( or better I scroll to the next cell with shift+enter)</p>\n\n<pre><code>myExploratoryData=pd.read_csv(\"~/Downloads/Ex_Files_Data_Science_Of_Marketing/02_03/exploratory-py.cvs\")\n</code></pre>\n\n<p>I get this error. I tried to reset and restart as was indicated on  a similar stackoverflow post, but does not work. I do not get I defined/imported 'pd'. I am running python 3 on linux with Anaconda and Jupyter</p>\n\n<pre><code>---------------------------------------------------------------------------\nNameError                                 Traceback (most recent call last)\n&lt;ipython-input-1-e1875e3c3f52&gt; in &lt;module&gt;()\n      1 # connect to our data\n----&gt; 2 myExploratoryData=pd.read_csv(\"~/Downloads/Ex_Files_Data_Science_Of_Marketing/02_03/exploratory-py.cvs\")\n\nNameError: name 'pd' is not defined \n</code></pre>\n"}, {"tags": ["python", "html", "django"], "comments": [{"owner": {"reputation": 2171, "user_id": 1666143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccf9b10bcf3d5759cedc2a482a6cbd05?s=128&d=identicon&r=PG", "display_name": "anupsabraham", "link": "https://stackoverflow.com/users/1666143/anupsabraham"}, "edited": false, "score": 2, "creation_date": 1508359359, "post_id": 46818891, "comment_id": 80585142, "body": "what error are you getting?"}, {"owner": {"reputation": 15, "user_id": 8798002, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2e6e08ac1780e6da4f71bda3ad6a0509?s=128&d=identicon&r=PG&f=1", "display_name": "eliadesign", "link": "https://stackoverflow.com/users/8798002/eliadesign"}, "reply_to_user": {"reputation": 2171, "user_id": 1666143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccf9b10bcf3d5759cedc2a482a6cbd05?s=128&d=identicon&r=PG", "display_name": "anupsabraham", "link": "https://stackoverflow.com/users/1666143/anupsabraham"}, "edited": false, "score": 1, "creation_date": 1508359610, "post_id": 46818891, "comment_id": 80585265, "body": "oh sorry, I added the error !"}, {"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 2, "creation_date": 1508359861, "post_id": 46818891, "comment_id": 80585391, "body": "Not related to your problem, but you&#39;re doing a lot of unnecessary work in that view. Rather than looping through all the user&#39;s albums and then getting each song ID then querying for them all, you can just do <code>Song.objects.filter(album__user=request.user)</code>."}, {"owner": {"reputation": 15, "user_id": 8798002, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2e6e08ac1780e6da4f71bda3ad6a0509?s=128&d=identicon&r=PG&f=1", "display_name": "eliadesign", "link": "https://stackoverflow.com/users/8798002/eliadesign"}, "edited": false, "score": 0, "creation_date": 1508360729, "post_id": 46818891, "comment_id": 80585794, "body": "yes you&#39;re right (y)"}], "owner": {"reputation": 15, "user_id": 8798002, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2e6e08ac1780e6da4f71bda3ad6a0509?s=128&d=identicon&r=PG&f=1", "display_name": "eliadesign", "link": "https://stackoverflow.com/users/8798002/eliadesign"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1508360416, "creation_date": 1508359275, "last_edit_date": 1508360416, "question_id": 46818891, "link": "https://stackoverflow.com/questions/46818891/django-audio-html-error", "title": "Django (audio) html error", "body": "<p>I have this project with django, everything working fine.\nBut when I go to a page where songs will be showen, and also the user have the option to play the songs, I get an error even if everything is working fine.\nIn the html page, when I remove the audio option \" &lt;'audio'>...&lt;'/audio'>\nI get no errors, but once I get it back, the error back with it, so the problem is with the &lt;'audio'> tag I guess</p>\n\n<p>The view :</p>\n\n<pre><code>@login_required()\ndef songs(request, filter_by=None):\n\n    song_ids = []\n    for album in Album.objects.filter(user=request.user):\n        for song in album.song_set.all():\n            song_ids.append(song.pk)\n    users_songs = Song.objects.filter(pk__in=song_ids)\n\n    if filter_by == 'favorites':\n        users_songs = users_songs.filter(is_favorite=True)\n\n    return render(request, 'music/songs.html', {\n        'song_list': users_songs,\n        'filter_by': filter_by,\n    })\n</code></pre>\n\n<p>the bit of code of html page:</p>\n\n<pre><code>&lt;td&gt;\n  &lt;audio controls controlsList=\"nodownload\"&gt;\n         Your browser does not support the &lt;code&gt;audio&lt;/code&gt; element.\n   &lt;source src=\"{{ song.audio_file.url }}\" type=\"audio/wav\"&gt;\n &lt;/audio&gt;\n&lt;/td&gt;\n</code></pre>\n\n<p>and this is the error :</p>\n\n<blockquote>\n<pre><code>Traceback (most recent call last):   File\n \"C:\\Users\\elmou\\AppData\\Local\\Programs\\Python\\Python36-    32\\lib\\wsgiref\\handlers.py\",\n line 141, in run\n      self.handle_error()   File   \"C:\\Users\\elmou\\AppData\\Local\\Programs\\Python\\Python36-32\\lib\\site-   packages\\django\\core\\servers\\basehttp.py\",\n  line 88, in handle_error\n     super(ServerHandler, self).handle_error()   File   \"C:\\Users\\elmou\\AppData\\Local\\Programs\\Python\\Python36-  32\\lib\\wsgiref\\handlers.py\",\n  line 368, in handle_error\n    self.finish_response()   File   \"C:\\Users\\elmou\\AppData\\Local\\Programs\\Python\\Python36-  32\\lib\\wsgiref\\handlers.py\",\n  line 180, in finish_response\n      self.write(data)   File     \"C:\\Users\\elmou\\AppData\\Local\\Programs\\Python\\Python36-   32\\lib\\wsgiref\\handlers.py\",\n  line 274, in write\n     self.send_headers()   File   \"C:\\Users\\elmou\\AppData\\Local\\Programs\\Python\\Python36-  32\\lib\\wsgiref\\handlers.py\",\n line 331, in send_headers\n    if not self.origin_server or self.client_is_modern():   File   \"C:\\Users\\elmou\\AppData\\Local\\Programs\\Python\\Python36-  32\\lib\\wsgiref\\handlers.py\",\n  line 344, in client_is_modern\n    return self.environ['SERVER_PROTOCOL'].upper() != 'HTTP/0.9' TypeError: 'NoneType' object is not subscriptable\n\n During handling of the above exception, another exception occurred:\n\n  Traceback (most recent call last):   File\n  \"C:\\Users\\elmou\\AppData\\Local\\Programs\\Python\\Python36-  32\\lib\\socketserver.py\",\n  line 639, in process_request_thread\n self.finish_request(request, client_address)   File      \"C:\\Users\\elmou\\AppData\\Local\\Programs\\Python\\Python36-  32\\lib\\socketserver.py\",\n  line 361, in finish_request\n      self.RequestHandlerClass(request, client_address, self)   File    \"C:\\Users\\elmou\\AppData\\Local\\Programs\\Python\\Python36-   32\\lib\\socketserver.py\",\nline 696, in __init__\n    self.handle()   File \"C:\\Users\\elmou\\AppData\\Local\\Programs\\Python\\Python36-32\\lib\\site-packages\\django\\core\\servers\\basehttp.py\",\nline 155, in handle\nhandler.run(self.server.get_app())   File   \"C:\\Users\\elmou\\AppData\\Local\\Programs\\Python\\Python36-   32\\lib\\wsgiref\\handlers.py\",\n line 144, in run\n     self.close()   File   \"C:\\Users\\elmou\\AppData\\Local\\Programs\\Python\\Python36-  32\\lib\\wsgiref\\simple_server.py\",\n line 35, in close\n     self.status.split(' ',1)[0], self.bytes_sent AttributeError: '     NoneType' object has no attribute 'split'\n</code></pre>\n</blockquote>\n\n<p>the error is so long, but it s the same over and over again</p>\n"}, {"tags": ["python", "time-series", "keras", "lstm"], "answers": [{"comments": [{"owner": {"reputation": 692, "user_id": 3789716, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/H6gk9.png?s=128&g=1", "display_name": "Alessandro", "link": "https://stackoverflow.com/users/3789716/alessandro"}, "edited": false, "score": 0, "creation_date": 1508419311, "post_id": 46830731, "comment_id": 80609120, "body": "I do, but it is related to signals dependencies?"}, {"owner": {"reputation": 73682, "user_id": 2097240, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/JskU5.jpg?s=128&g=1", "display_name": "Daniel M&#246;ller", "link": "https://stackoverflow.com/users/2097240/daniel-m%c3%b6ller"}, "reply_to_user": {"reputation": 692, "user_id": 3789716, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/H6gk9.png?s=128&g=1", "display_name": "Alessandro", "link": "https://stackoverflow.com/users/3789716/alessandro"}, "edited": false, "score": 0, "creation_date": 1508419363, "post_id": 46830731, "comment_id": 80609159, "body": "I don&#39;t understand your question."}, {"owner": {"reputation": 692, "user_id": 3789716, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/H6gk9.png?s=128&g=1", "display_name": "Alessandro", "link": "https://stackoverflow.com/users/3789716/alessandro"}, "edited": false, "score": 0, "creation_date": 1508419680, "post_id": 46830731, "comment_id": 80609408, "body": "Ok, I try to explain it better. Also if I do what you wrote above, it seems the network doesn&#39;t takes into account with dependencies between signal A and signal B. For instance I can&#39;t use a regression algorithm on B (or A), because they are correlated."}, {"owner": {"reputation": 73682, "user_id": 2097240, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/JskU5.jpg?s=128&g=1", "display_name": "Daniel M&#246;ller", "link": "https://stackoverflow.com/users/2097240/daniel-m%c3%b6ller"}, "reply_to_user": {"reputation": 692, "user_id": 3789716, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/H6gk9.png?s=128&g=1", "display_name": "Alessandro", "link": "https://stackoverflow.com/users/3789716/alessandro"}, "edited": false, "score": 0, "creation_date": 1508420047, "post_id": 46830731, "comment_id": 80609684, "body": "This approach treats A and B as the left and right channels of an audio signal, for instance. When you put them together (as the input) like that, they will be together until the end of the model. You can use any regression algorithm, and this regression will work on both sequences at the same time."}], "tags": [], "owner": {"reputation": 73682, "user_id": 2097240, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/JskU5.jpg?s=128&g=1", "display_name": "Daniel M&#246;ller", "link": "https://stackoverflow.com/users/2097240/daniel-m%c3%b6ller"}, "is_accepted": true, "score": 1, "last_activity_date": 1508419414, "last_edit_date": 1508419414, "creation_date": 1508418753, "answer_id": 46830731, "question_id": 46818865, "link": "https://stackoverflow.com/questions/46818865/force-lstm-keras-to-use-time-series-dependencies/46830731#46830731", "title": "Force LSTM Keras to use time series dependencies", "body": "<p>You should have only one series with two features.</p>\n\n<p>If A and B are lists (not numpy arrays):</p>\n\n<pre><code>fullSeq = np.array(A + B)\n#this shape is (lenA + lenB,)\n\nfullSeq = fullSeq.reshape((2,len(A)))\nfullSeq = fullSeq.swapaxes(0,1).reshape((1,len(A),2))\n\n#make sure that the resulting array is something like [[[1,0],[2,0],[3,1],...]]\n</code></pre>\n\n<p>Now you have a single sequence with <code>num_features=2</code>. A and B get totally dependent now. </p>\n"}], "owner": {"reputation": 692, "user_id": 3789716, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/H6gk9.png?s=128&g=1", "display_name": "Alessandro", "link": "https://stackoverflow.com/users/3789716/alessandro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 178, "favorite_count": 1, "accepted_answer_id": 46830731, "answer_count": 1, "score": 1, "last_activity_date": 1508419414, "creation_date": 1508359157, "question_id": 46818865, "link": "https://stackoverflow.com/questions/46818865/force-lstm-keras-to-use-time-series-dependencies", "title": "Force LSTM Keras to use time series dependencies", "body": "<p>I have two time series A and B:</p>\n\n<pre><code>A: 1,2,3,1,2,3,3,3,1,2,3,3,3  \nB: 0,0,1,0,0,1,1,1,0,0,1,1,1\n</code></pre>\n\n<p>This simple training set says that signal B is correlated to A. In fact each time A is equal to 3, at the same time stamp, in B, the value is 1.</p>\n\n<p>I introduced the example above just to explain my problem. When I forecast data by using LSTM with Keras, I want the model understands this kind of dependencies from series.</p>\n\n<p>Now I use this configuration:</p>\n\n<pre><code>model.add(keras.layers.LSTM(hidden_nodes, activation='sigmoid', input_dim=num_features, input_length=window, consume_less=\"mem\"))\nmodel.add(keras.layers.Dense(num_features, activation='sigmoid'))\n\noptimizer = keras.optimizers.SGD(lr=learning_rate, decay=1e-6, momentum=0.9, nesterov=True)\n</code></pre>\n\n<p>But I see LSTM forecasts value without apparently use dependences between time series. If I make a prediction with a window of 5, in order to forecast the next point:</p>\n\n<pre><code>A: [1,2,3,1,2]\nB: [0,0,1,0,0]\n</code></pre>\n\n<p>I expect that LSTM gives me value 3 for A and 1 for B, because the training set below says that.</p>\n\n<p>The problem is that my net seems use the signals without give the right weight to signals dependencies. </p>\n"}, {"tags": ["python", "postgresql", "enums", "sqlalchemy"], "comments": [{"owner": {"reputation": 13849, "user_id": 4201810, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-y_UkutO0V_M/AAAAAAAAAAI/AAAAAAAAAjQ/PK7PzkynAm0/photo.jpg?sz=128", "display_name": "georgexsh", "link": "https://stackoverflow.com/users/4201810/georgexsh"}, "edited": false, "score": 0, "creation_date": 1508384247, "post_id": 46818858, "comment_id": 80592366, "body": "python2 dont have builtin enum type, are you using enum34 package?"}, {"owner": {"reputation": 61, "user_id": 8797686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c9b410b00804a793b08eca01059cb32?s=128&d=identicon&r=PG&f=1", "display_name": "TazMainiac", "link": "https://stackoverflow.com/users/8797686/tazmainiac"}, "reply_to_user": {"reputation": 13849, "user_id": 4201810, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-y_UkutO0V_M/AAAAAAAAAAI/AAAAAAAAAjQ/PK7PzkynAm0/photo.jpg?sz=128", "display_name": "georgexsh", "link": "https://stackoverflow.com/users/4201810/georgexsh"}, "edited": false, "score": 0, "creation_date": 1508420779, "post_id": 46818858, "comment_id": 80610234, "body": "yes, this is enum34."}], "answers": [{"tags": [], "owner": {"reputation": 61, "user_id": 8797686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c9b410b00804a793b08eca01059cb32?s=128&d=identicon&r=PG&f=1", "display_name": "TazMainiac", "link": "https://stackoverflow.com/users/8797686/tazmainiac"}, "is_accepted": false, "score": 3, "last_activity_date": 1508509798, "creation_date": 1508509798, "answer_id": 46851352, "question_id": 46818858, "link": "https://stackoverflow.com/questions/46818858/sqlalchemy-enum-in-external-file/46851352#46851352", "title": "SQLAlchemy enum in external file", "body": "<p>I posted this question to the SQL Alchemy mailing list and got an answer.  <a href=\"https://groups.google.com/forum/#!topic/sqlalchemy/16vZm8iBmdU\" rel=\"nofollow noreferrer\">Link to thread</a></p>\n\n<p>Turns out this one of those \"gotcha's\" about python and has nothing really to do with SQL Alchemy.  Here's a reference: <a href=\"http://python-notes.curiousefficiency.org/en/latest/python_concepts/import_traps.html#executing-the-main-module-twice\" rel=\"nofollow noreferrer\" title=\"Executing Main Module Twice\">Executing Main Module Twice</a>.</p>\n\n<p>In this particular case, when I executed my script, the MyStatus was created with a particular id (python handle on the type).  But when myoper_test imported MyStatus from myoper, it was created AGAIN with a different id. </p>\n\n<p>So when the extCheckOper assigned a MyStatus value to the status field, it was a <em>different</em> MyStatus than SQL Alchemy created the DB mapping with, so when SQL Alchemy tried to save it to the DB, the \" is \" operator failed, since the (external) MyStatus was different than (original) MyStatus.</p>\n\n<p>There are a couple of different workarounds.  One way is to not run the code as main (after moving exiting <strong>main</strong> code into main() function):</p>\n\n<pre><code>$ python -c \"from myoper import main; import sys; main(*sys.argv[1:])\" ext_check 1\n</code></pre>\n\n<p>The better solution is to avoid this problem entirely - move the code that calls out externally to an internal test script.  The code in <strong>main</strong> stays within mainly within the main script (sorry, couldn't resist... :-) ).</p>\n"}], "owner": {"reputation": 61, "user_id": 8797686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c9b410b00804a793b08eca01059cb32?s=128&d=identicon&r=PG&f=1", "display_name": "TazMainiac", "link": "https://stackoverflow.com/users/8797686/tazmainiac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 530, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1508509798, "creation_date": 1508359130, "question_id": 46818858, "link": "https://stackoverflow.com/questions/46818858/sqlalchemy-enum-in-external-file", "title": "SQLAlchemy enum in external file", "body": "<p>I have Postgres DB with a table of pending operations.  One column in the operation in an enum with the status of the enum.  I used the standard python (2.7) enum, with AutoNumber (myenum.py):</p>\n\n<pre><code>class AutoNumber(enum.Enum):\n    def __new__(cls):\n        value = len(cls.__members__) + 1\n        obj = object.__new__(cls)\n        obj._value_ = value\n        return obj\n\nclass MyStatus(AutoNumber):\n\n    INITIAL = ()\n    ACCEPTED = ()\n    DENIED = ()\n    ACK_PENDING = ()\n    AUTHORIZED = ()\n    ACTIVE = ()\n    END = ()\n    DELETED = ()\n# end enum\n</code></pre>\n\n<p>The table looks like (also in myenum.py):</p>\n\n<pre><code>Base = declarative_base()\n\nclass MyOperation(Base):\n\n    __tablename__ = 'operations'\n\n    id  = Column( Integer, primary_key=True )\n\n    status = Column( Enum(MyStatus) )\n    status_message = Column( String )\n    status_time = Column( DateTime )\n\n    def __repr__(self):\n        return \"&lt;MyOperation(%s, %s, %s, %s)&gt;\" % \\\n            ( self.id, self.status, self.status_time, self.status_message )\n# end class\n</code></pre>\n\n<p>Generally this works fine.  In the SAME FILE that defines MyStatus (myoper.py), I can change the status and save it back to the DB and it works fine:</p>\n\n<pre><code>def checkOper( oper ):\n    oper.status = MyStatus.DENIED\n    oper.status_message = \"failed check (internal)\"\n    oper.status_time = datetime.datetime.utcnow()\n</code></pre>\n\n<p>Here's how I call it (within myoper.py)</p>\n\n<pre><code>    checkOper( oper )\n    session.add(oper)\n    session.commit()\n</code></pre>\n\n<p>This is all in the same file (myoper.py).</p>\n\n<p>However, if I pass an oper object to an external function, and IT changes the status, then I get a sqlalchemy.exc.StatementError.</p>\n\n<p>Here's the external function (myoper_test.py):</p>\n\n<pre><code>import datetime\nfrom myoper import MyStatus\n\ndef extCheckOper( oper ):\n    oper.status = MyStatus.DENIED\n    oper.status_message = \"failed check (external)\"\n    oper.status_time = datetime.datetime.utcnow()\n</code></pre>\n\n<p>Here's how I call it (from myoper.py):</p>\n\n<pre><code>    from myoper_test import extCheckOper\n    extCheckOper( oper )\n    session.add(oper)\n    session.commit()\n</code></pre>\n\n<p>Here's the stack trace:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"./myoper.py\", line 120, in &lt;module&gt;\n    session.commit()\n  File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/session.py\", line 906, in commit\n    self.transaction.commit()\n  File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/session.py\", line 461, in commit\n    self._prepare_impl()\n  File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/session.py\", line 441, in _prepare_impl\n    self.session.flush()\n  File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/session.py\", line 2177, in flush\n    self._flush(objects)\n  File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/session.py\", line 2297, in _flush\n    transaction.rollback(_capture_exception=True)\n  File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/util/langhelpers.py\", line 66, in __exit__\n    compat.reraise(exc_type, exc_value, exc_tb)\n  File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/session.py\", line 2261, in _flush\n    flush_context.execute()\n  File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/unitofwork.py\", line 389, in execute\n    rec.execute(self)\n  File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/unitofwork.py\", line 548, in execute\n    uow\n  File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/persistence.py\", line 177, in save_obj\n    mapper, table, update)\n  File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/orm/persistence.py\", line 737, in _emit_update_statements\n    execute(statement, multiparams)\n  File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 945, in execute\n    return meth(self, multiparams, params)\n  File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/sql/elements.py\", line 263, in _execute_on_connection\n    return connection._execute_clauseelement(self, multiparams, params)\n  File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 1053, in _execute_clauseelement\n    compiled_sql, distilled_params\n  File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 1121, in _execute_context\n    None, None)\n  File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 1402, in _handle_dbapi_exception\n    exc_info\n  File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/util/compat.py\", line 203, in raise_from_cause\n    reraise(type(exception), exception, tb=exc_tb, cause=cause)\n  File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/base.py\", line 1116, in _execute_context\n    context = constructor(dialect, self, conn, *args)\n  File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/default.py\", line 639, in _init_compiled\n    for key in compiled_params\n  File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/engine/default.py\", line 639, in &lt;genexpr&gt;\n    for key in compiled_params\n  File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/sql/sqltypes.py\", line 1446, in process\n    value = self._db_value_for_elem(value)\n  File \"/usr/local/lib/python2.7/dist-packages/sqlalchemy/sql/sqltypes.py\", line 1354, in _db_value_for_elem\n    '\"%s\" is not among the defined enum values' % elem)\nsqlalchemy.exc.StatementError: (exceptions.LookupError) \"MyStatus.DENIED\" is not among the defined enum values [SQL: u'UPDATE operations SET status=%(status)s, status_message=%(status_message)s, status_time=%(status_time)s WHERE operations.id = %(operations_id)s'] [parameters: [{'status': &lt;MyStatus.DENIED: 6&gt;, 'status_time': datetime.datetime(2017, 10, 18, 20, 22, 44, 350035), 'status_message': 'failed check (external)', 'operations_id': 3}]]\n</code></pre>\n\n<p>I've tried inspecting the type both in the internal file, and external file, but it's ways listed as <code>&lt;enum 'MyStatus'&gt;</code>.</p>\n\n<p>I have found, that if I assign the oper.status to the enum .name, then that DOES work:</p>\n\n<pre><code>def extCheckOper( oper ):\n    oper.status = MyStatus.AUTHORIZED.name\n    oper.status_message = \"authorized check (external)\"\n    oper.status_time = datetime.datetime.utcnow()\n</code></pre>\n\n<p>But that's obviously pretty ugly.</p>\n\n<p>So - what am I doing wrong?  What is different about MyStatus in the file it's defined in, vs an external file that screws up SQL Alchemy?</p>\n"}, {"tags": ["python", "regex", "string", "python-2.7"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 1, "creation_date": 1508359050, "post_id": 46818732, "comment_id": 80584997, "body": "If you&#39;re trying for a <i>best</i> match, rather than <i>exact</i> match, I suggest the standard &quot;cosine similarity&quot; function.  You could also break the phrase into words and try matching individual words (exact, then cosine) to identify which portions will serve your needs."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8767766"}, "reply_to_user": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1508359321, "post_id": 46818732, "comment_id": 80585123, "body": "@Prune Not certain that I&#39;ve ever seen a &quot;cosine similarity&quot; function in python, and I&#39;ve never used one before. If you have time can you whip up a short example as an answer to my question?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1508359521, "post_id": 46818732, "comment_id": 80585221, "body": "You&#39;re only matching the keywords, what do you mean by returns <code>&#39;S INFORMATION Manufacturer Name HAYWARD LABORATORIES</code> ?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8767766"}, "edited": false, "score": 0, "creation_date": 1508359960, "post_id": 46818732, "comment_id": 80585439, "body": "@sln When I run my program that is the current result I&#39;m getting for one of the incorrect matches"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1508363234, "post_id": 46818732, "comment_id": 80587028, "body": "@Worker: merely look up &quot;cosine similarity&quot;.  No, I will not provide custom code; that&#39;s your task (along with the basic research)."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8767766"}, "edited": false, "score": 0, "creation_date": 1508359446, "post_id": 46818867, "comment_id": 80585184, "body": "They are not all the same, I could post a few more examples. The only similarities between the strings are the words I am currently using in the re.search. So far it works 75%ish of the time. Thanks for an answer though"}, {"owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "edited": false, "score": 0, "creation_date": 1508359575, "post_id": 46818867, "comment_id": 80585243, "body": "@Worker as of now, you are using a number of company identifiers in an attempt to match the name. Is there anything else in the data that you could use to find the company name? Also, please post a larger sample of the strings you are using."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8767766"}, "edited": false, "score": 0, "creation_date": 1508359881, "post_id": 46818867, "comment_id": 80585402, "body": "There is nothing else to identify the company besides the identifiers I have right now. The data I&#39;m getting is unstructured and I&#39;m using words that show up right before the data I need to extract as Identifiers"}], "tags": [], "owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "is_accepted": false, "score": 0, "last_activity_date": 1508359159, "creation_date": 1508359159, "answer_id": 46818867, "question_id": 46818732, "link": "https://stackoverflow.com/questions/46818732/compare-multiple-strings-to-find-best-match/46818867#46818867", "title": "Compare multiple strings to find best match", "body": "<p>If all of your sections are the same in terms of the pattern <code>Name FACTORY NAME</code>, then you can try this:</p>\n\n<pre><code>import re\ns = \"SECTION 1 - MANUFACTURER'S INFORMATION Manufacturer Name HAYWARD LABORATORIES Emergency\"\nfinal_data = re.findall(\"(?&lt;=Name\\s)[A-Z]+\\s[A-Z]+\", s)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>['HAYWARD LABORATORIES']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1846, "user_id": 7424634, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ooAaa.jpg?s=128&g=1", "display_name": "rachid el kedmiri", "link": "https://stackoverflow.com/users/7424634/rachid-el-kedmiri"}, "is_accepted": false, "score": 0, "last_activity_date": 1508491017, "last_edit_date": 1508491017, "creation_date": 1508362850, "answer_id": 46819700, "question_id": 46818732, "link": "https://stackoverflow.com/questions/46818732/compare-multiple-strings-to-find-best-match/46819700#46819700", "title": "Compare multiple strings to find best match", "body": "<p>you could use the fuzzywuzzy module to achieve some sort of fuzzy matching, basically you would calculate the distance between two strings, the smaller the distance the most closer thoses strings are.</p>\n\n<p>for example, let's say you have a list of strings that you are searching for the closest match you would go as follow:</p>\n\n<pre><code>from fuzzywuzzy import fuzz\n\nstring_to_be_matched = 'string_sth'\nlist_of_strings = ['string_1', 'string_2',.., 'string_n']\n\n# we will store the index , plus the distance for each string in list_of_strings\nresult = [ (i, fuzz.ratio(string_to_be_matched, x)) for x, i in enumerate(list_of_strings) ]\n</code></pre>\n\n<p>for more information about the fuzzywuzzy module refer to <a href=\"http://chairnerd.seatgeek.com/fuzzywuzzy-fuzzy-string-matching-in-python/\" rel=\"nofollow noreferrer\">link</a></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8767766"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 624, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1508491017, "creation_date": 1508358627, "last_edit_date": 1508360588, "question_id": 46818732, "link": "https://stackoverflow.com/questions/46818732/compare-multiple-strings-to-find-best-match", "title": "Compare multiple strings to find best match", "body": "<p>So what I want to be able to do is compare a string with a lot of other strings to see which of those strings has a better match</p>\n\n<p>Currently I'm using re.search to get the matching strings, which I then use to split the string and take the half I want</p>\n\n<pre><code>company = re.search(\"Supplier Address:?|Supplier Identification:?|Supplier \nName:?|Supplier:?|Company Information:?|Company's Name:?|Manufacturer's \nName|Manufacturer:?|MANUFACTURER:?|Manufacturer Name:?\", arg)\n</code></pre>\n\n<p>But this isn't really working out that well especially because I have a couple strings like this</p>\n\n<pre><code>\"SECTION 1 - MANUFACTURER'S INFORMATION Manufacturer Name HAYWARD \n LABORATORIES Emergency\"\n</code></pre>\n\n<p>I want</p>\n\n<pre><code>HAYWARD LABORATORIES \n</code></pre>\n\n<p>out of this string, they way I'm doing it now, it matches with MANUFACTURER currently getting: </p>\n\n<pre><code>'S INFORMATION Manufacturer Name HAYWARD LABORATORIES \n</code></pre>\n\n<p>How do I fix this? And Is there a better way to do this?\nThanks</p>\n\n<p><strong>EDIT:</strong>\nSome more strings I'm dealing with:</p>\n\n<pre><code>\"Identification of the company Lutex Company Limited 20/F., \"\n</code></pre>\n\n<p>Lutex Company Limited</p>\n\n<pre><code>\"Product and Company Information Product Name: Lip Balm Base Product Code: A462-BALM Client Code: 900 Company: Ni Hau Industrial Co., Ltd. Company Address:\"\n</code></pre>\n\n<p>Ni Hau Industrial Co., Ltd.</p>\n"}, {"tags": ["javascript", "python", "node.js", "child-process"], "answers": [{"comments": [{"owner": {"reputation": 2622, "user_id": 6653602, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/308958dfcf4e6e51275ac0a387a24363?s=128&d=identicon&r=PG&f=1", "display_name": "Alex T", "link": "https://stackoverflow.com/users/6653602/alex-t"}, "edited": false, "score": 0, "creation_date": 1508360569, "post_id": 46818847, "comment_id": 80585719, "body": "It sort of works however concatenating results in one line of code not a dataframe form (so every value received from python is on a separate line) as in this: <code>onecolumn second third 0 pyvar 1 a 1 pyvar 2 b 2 pyvar 3 c 3 pyvar 4 d 4 pyvar 5 e</code> but still I would prefer it to be displayed in similar way like on the console"}, {"owner": {"reputation": 2622, "user_id": 6653602, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/308958dfcf4e6e51275ac0a387a24363?s=128&d=identicon&r=PG&f=1", "display_name": "Alex T", "link": "https://stackoverflow.com/users/6653602/alex-t"}, "edited": false, "score": 0, "creation_date": 1508403011, "post_id": 46818847, "comment_id": 80599562, "body": "Hmm I did it another way- converted dataframe to html file then rendered it within node. Not exactly what I wanted but seems to be the best solution now."}], "tags": [], "owner": {"reputation": 1544, "user_id": 3598519, "user_type": "registered", "accept_rate": 29, "profile_image": "https://graph.facebook.com/1312410247/picture?type=large", "display_name": "Sam Bobel", "link": "https://stackoverflow.com/users/3598519/sam-bobel"}, "is_accepted": false, "score": 2, "last_activity_date": 1508359077, "creation_date": 1508359077, "answer_id": 46818847, "question_id": 46818711, "link": "https://stackoverflow.com/questions/46818711/sending-dataframe-from-python-to-node-js-app/46818847#46818847", "title": "Sending dataframe from python to node.js app", "body": "<p>The <code>pyshell.on('message', function(message){})</code>  part of this is the problem. Every time it gets a message, it is replacing it replaces jsondata with the value it receives. It's most likely receiving data from the python program line-by-line.</p>\n\n<p>Instead, you're going to want to concatenate whatever you're getting from pyshell.</p>\n\n<pre><code>var jsonData = \"\"\npyshell.on(\"messsage\", function(message){\n    jsonData += message;\n});\n\npyshell.end(function(err){\n    console.log(jsonData);\n});\n</code></pre>\n"}], "owner": {"reputation": 2622, "user_id": 6653602, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/308958dfcf4e6e51275ac0a387a24363?s=128&d=identicon&r=PG&f=1", "display_name": "Alex T", "link": "https://stackoverflow.com/users/6653602/alex-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 770, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1508359077, "creation_date": 1508358564, "question_id": 46818711, "link": "https://stackoverflow.com/questions/46818711/sending-dataframe-from-python-to-node-js-app", "title": "Sending dataframe from python to node.js app", "body": "<p>Im using python-shell in order to communicate between node app and python script\nFirstly I send a variable to the python script. Based on it i create a dataframe.\nThen I want to send back the resulting dataframe to the node.js app and finally display it on the page. So the problem is that while in the console it prints the whole dataframe, it renders only last line on the webpage. \nHere I include the code</p>\n\n<p>node.js code:</p>\n\n<pre><code>            var pyvar = data[\"Search\"][0][\"imdbID\"]\n            console.log(pyvar)\n\n            var pyshell = new PythonShell('script3.py');\n\n            pyshell.send(JSON.stringify(pyvar))\n\n            pyshell.on('message', function (message) {\n            jsondata = message\n            console.log(message);\n            });\n\n            pyshell.end(function (err) {\n             if (err){\n                throw err;\n                };\n\n            console.log('finished');\n            });\n\napp.get(\"/data\", function(req, res) {\n      res.render(\"data\", {data: jsondata} )\n       })\n</code></pre>\n\n<p>EJS:</p>\n\n<pre><code>&lt;h1&gt; Table &lt;/h1&gt;\n\n\n&lt;%=data%&gt;\n</code></pre>\n\n<p>python script3.py</p>\n\n<pre><code>import sys, json\nimport pandas as pd\n\n\ndef read_in():\n    lines = sys.stdin.readlines()\n    return json.loads(lines[0])\n\ndef main():\n    lines = read_in()\n    array1=[1,2,3,4,5]\n    array2=[\"a\",\"b\",\"c\",\"d\",\"e\"]\n\n    df=pd.DataFrame({\"onecolumn\": lines,\n    \"second\":array1,\n    \"third\": array2\n    })\n\n    print (df)\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n\n<p>In the console I get:</p>\n\n<pre><code>onecolumn  second third\n0  pyvar       1     a\n1  pyvar       2     b\n2  pyvar       3     c\n3  pyvar       4     d\n4  pyvar       5     e\nfinished\n</code></pre>\n\n<p>However /data displays:</p>\n\n<pre><code>Table\n\n4 pyvar 5 e\n</code></pre>\n"}, {"tags": ["python", "mysql", "flask"], "comments": [{"owner": {"reputation": 1043, "user_id": 6035703, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3252ceecff3c6283bca24f59e72eca21?s=128&d=identicon&r=PG&f=1", "display_name": "0TTT0", "link": "https://stackoverflow.com/users/6035703/0ttt0"}, "edited": false, "score": 0, "creation_date": 1508359440, "post_id": 46818700, "comment_id": 80585183, "body": "Please edit your post to include the error printout"}, {"owner": {"reputation": 69, "user_id": 8307676, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4b9939e4c924044dc6d68c177052deaa?s=128&d=identicon&r=PG&f=1", "display_name": "ShwSvn", "link": "https://stackoverflow.com/users/8307676/shwsvn"}, "reply_to_user": {"reputation": 1043, "user_id": 6035703, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3252ceecff3c6283bca24f59e72eca21?s=128&d=identicon&r=PG&f=1", "display_name": "0TTT0", "link": "https://stackoverflow.com/users/6035703/0ttt0"}, "edited": false, "score": 0, "creation_date": 1508360082, "post_id": 46818700, "comment_id": 80585501, "body": "@0TTT0 I add it now, thanks"}, {"owner": {"reputation": 2171, "user_id": 1666143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccf9b10bcf3d5759cedc2a482a6cbd05?s=128&d=identicon&r=PG", "display_name": "anupsabraham", "link": "https://stackoverflow.com/users/1666143/anupsabraham"}, "edited": false, "score": 0, "creation_date": 1508362265, "post_id": 46818700, "comment_id": 80586594, "body": "@ShwSvn you&#39;re trying to call the api using a different script and you&#39;re posting the trace back of that script. Please post the trace back from your original program."}, {"owner": {"reputation": 2171, "user_id": 1666143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccf9b10bcf3d5759cedc2a482a6cbd05?s=128&d=identicon&r=PG", "display_name": "anupsabraham", "link": "https://stackoverflow.com/users/1666143/anupsabraham"}, "edited": false, "score": 0, "creation_date": 1508362327, "post_id": 46818700, "comment_id": 80586627, "body": "The traceback you&#39;ve posted says that you&#39;re trying to json decode the response you&#39;re getting from the API. When your API isn&#39;t returning you a json object at all."}, {"owner": {"reputation": 69, "user_id": 8307676, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4b9939e4c924044dc6d68c177052deaa?s=128&d=identicon&r=PG&f=1", "display_name": "ShwSvn", "link": "https://stackoverflow.com/users/8307676/shwsvn"}, "reply_to_user": {"reputation": 2171, "user_id": 1666143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccf9b10bcf3d5759cedc2a482a6cbd05?s=128&d=identicon&r=PG", "display_name": "anupsabraham", "link": "https://stackoverflow.com/users/1666143/anupsabraham"}, "edited": false, "score": 0, "creation_date": 1508362340, "post_id": 46818700, "comment_id": 80586633, "body": "@anupsabraham you are rigth, I&#39;m sorry, I updated it"}, {"owner": {"reputation": 59735, "user_id": 1350899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a42186174515a63b8058100a736252f?s=128&d=identicon&r=PG", "display_name": "mata", "link": "https://stackoverflow.com/users/1350899/mata"}, "edited": false, "score": 1, "creation_date": 1508363958, "post_id": 46818700, "comment_id": 80587313, "body": "The error seems to happen during the <code>mysql.connector.connect()</code> call. Do you perhaps have any unicode characters in the hostname? This seems to be an encoding error that happens while processing a failed connection attempt."}, {"owner": {"reputation": 69, "user_id": 8307676, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4b9939e4c924044dc6d68c177052deaa?s=128&d=identicon&r=PG&f=1", "display_name": "ShwSvn", "link": "https://stackoverflow.com/users/8307676/shwsvn"}, "reply_to_user": {"reputation": 59735, "user_id": 1350899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a42186174515a63b8058100a736252f?s=128&d=identicon&r=PG", "display_name": "mata", "link": "https://stackoverflow.com/users/1350899/mata"}, "edited": false, "score": 0, "creation_date": 1508364428, "post_id": 46818700, "comment_id": 80587497, "body": "@mata I don&#39;t think that I have"}], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 8307676, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4b9939e4c924044dc6d68c177052deaa?s=128&d=identicon&r=PG&f=1", "display_name": "ShwSvn", "link": "https://stackoverflow.com/users/8307676/shwsvn"}, "edited": false, "score": 0, "creation_date": 1508362164, "post_id": 46819464, "comment_id": 80586540, "body": "Like that? I changed the post But know I&#39;m getting the other error that I posted  UnicodeDecodeError UnicodeDecodeError: &#39;ascii&#39; codec can&#39;t decode byte 0xe3 in position 46: ordinal not in range(128)"}, {"owner": {"reputation": 2171, "user_id": 1666143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccf9b10bcf3d5759cedc2a482a6cbd05?s=128&d=identicon&r=PG", "display_name": "anupsabraham", "link": "https://stackoverflow.com/users/1666143/anupsabraham"}, "reply_to_user": {"reputation": 69, "user_id": 8307676, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4b9939e4c924044dc6d68c177052deaa?s=128&d=identicon&r=PG&f=1", "display_name": "ShwSvn", "link": "https://stackoverflow.com/users/8307676/shwsvn"}, "edited": false, "score": 0, "creation_date": 1508363398, "post_id": 46819464, "comment_id": 80587094, "body": "@ShwSvn Please read this to have a better understanding of your current problem. <a href=\"https://stackoverflow.com/a/35444608/1666143\">stackoverflow.com/a/35444608/1666143</a>"}, {"owner": {"reputation": 59735, "user_id": 1350899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a42186174515a63b8058100a736252f?s=128&d=identicon&r=PG", "display_name": "mata", "link": "https://stackoverflow.com/users/1350899/mata"}, "edited": false, "score": 1, "creation_date": 1508363729, "post_id": 46819464, "comment_id": 80587219, "body": "No, the stack trace shows that the error doesn&#39;t happen when getting the results but during <code>connect()</code>"}, {"owner": {"reputation": 69, "user_id": 8307676, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4b9939e4c924044dc6d68c177052deaa?s=128&d=identicon&r=PG&f=1", "display_name": "ShwSvn", "link": "https://stackoverflow.com/users/8307676/shwsvn"}, "edited": false, "score": 0, "creation_date": 1508364565, "post_id": 46819464, "comment_id": 80587543, "body": "I don&#39;t know, I restarted the pycharm and it was fixed with this change of row[0] Thanks a lot to everyone"}], "tags": [], "owner": {"reputation": 2171, "user_id": 1666143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccf9b10bcf3d5759cedc2a482a6cbd05?s=128&d=identicon&r=PG", "display_name": "anupsabraham", "link": "https://stackoverflow.com/users/1666143/anupsabraham"}, "is_accepted": true, "score": 1, "last_activity_date": 1508363178, "last_edit_date": 1508363178, "creation_date": 1508361734, "answer_id": 46819464, "question_id": 46818700, "link": "https://stackoverflow.com/questions/46818700/python-flask-and-mysql/46819464#46819464", "title": "python, flask and mysql", "body": "<p><code>.fetchall()</code> function returns a list of tuple. So <code>row</code> is a tuple and you can't do <code>row['hash']</code>. That is why you're getting the error <code>tuple indices must be integers, not str</code>. </p>\n\n<p>To access the values in the tuple, you need to use index: <code>row[0]</code></p>\n\n<p><strong>Edit:</strong></p>\n\n<p>For fixing the decode error, you need to <a href=\"https://stackoverflow.com/a/35444608/1666143\">read this</a>. Since it is a long answer to post here and someone else has answered it very well, I'm not typing it all here.</p>\n"}], "owner": {"reputation": 69, "user_id": 8307676, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4b9939e4c924044dc6d68c177052deaa?s=128&d=identicon&r=PG&f=1", "display_name": "ShwSvn", "link": "https://stackoverflow.com/users/8307676/shwsvn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 46819464, "answer_count": 1, "score": 0, "last_activity_date": 1508363178, "creation_date": 1508358513, "last_edit_date": 1508362477, "question_id": 46818700, "link": "https://stackoverflow.com/questions/46818700/python-flask-and-mysql", "title": "python, flask and mysql", "body": "<p>I would like help in just one thing</p>\n\n<pre><code>@app.route('/getdata', methods =['GET', 'POST'])\n#@requires_auth\ndef get_data():\n\n    config = {\n        'user': 'user',\n        'password': 'password.',\n        'host': '127.0.0.1',\n        'database': 'database',\n        'raise_on_warnings': True,\n        'use_pure': False,\n    }\n\n    cnx = mysql.connector.connect(**config)\n\n    cur = cnx.cursor()\n\n    cur.execute(\"SELECT hash FROM hash_files\")\n\n\n     rows = cur.fetchall()\n     response = [row[0] for row in rows]\n\n    return jsonify(response)\n\n\n    cnx.close()\n</code></pre>\n\n<p>I get this error \"tuple indices must be integers, not str\" can someone help me please?</p>\n\n<p>I got that error before, but now I have this one</p>\n\n<pre><code>      Traceback (most recent call last):\n  File \"C:\\Python27\\lib\\site-packages\\flask\\app.py\", line 1997, in __call__\n    return self.wsgi_app(environ, start_response)\n  File \"C:\\Python27\\lib\\site-packages\\flask\\app.py\", line 1985, in wsgi_app\n    response = self.handle_exception(e)\n  File \"C:\\Python27\\lib\\site-packages\\flask\\app.py\", line 1540, in handle_exception\n    reraise(exc_type, exc_value, tb)\n  File \"C:\\Python27\\lib\\site-packages\\flask\\app.py\", line 1982, in wsgi_app\n    response = self.full_dispatch_request()\n  File \"C:\\Python27\\lib\\site-packages\\flask\\app.py\", line 1614, in full_dispatch_request\n    rv = self.handle_user_exception(e)\n  File \"C:\\Python27\\lib\\site-packages\\flask\\app.py\", line 1517, in handle_user_exception\n    reraise(exc_type, exc_value, tb)\n  File \"C:\\Python27\\lib\\site-packages\\flask\\app.py\", line 1612, in full_dispatch_request\n    rv = self.dispatch_request()\n  File \"C:\\Python27\\lib\\site-packages\\flask\\app.py\", line 1598, in dispatch_request\n    return self.view_functions[rule.endpoint](**req.view_args)\n  File \"C:\\Python27\\webapi\\venv\\webapi.py\", line 59, in get_data\n    cnx = mysql.connector.connect(**config)\n  File \"C:\\Python27\\lib\\site-packages\\mysql\\connector\\__init__.py\", line 179, in connect\n    return MySQLConnection(*args, **kwargs)\n  File \"C:\\Python27\\lib\\site-packages\\mysql\\connector\\connection.py\", line 98, in __init__\n    self.close()\n  File \"C:\\Python27\\lib\\site-packages\\mysql\\connector\\connection.py\", line 252, in close\n    self.cmd_quit()\n  File \"C:\\Python27\\lib\\site-packages\\mysql\\connector\\connection.py\", line 581, in cmd_quit\n    self._socket.send(packet, 0, 0)\n  File \"C:\\Python27\\lib\\site-packages\\mysql\\connector\\network.py\", line 143, in send_plain\n    errno=2055, values=(self.get_address(), _strioerror(err)))\n  File \"C:\\Python27\\lib\\site-packages\\mysql\\connector\\errors.py\", line 185, in __init__\n    self.msg = self.msg % values\nUnicodeDecodeError: 'ascii' codec can't decode byte 0xe3 in position 46: ordinal not in range(128)\n</code></pre>\n\n<p>Sorry for the long error, I didin't knew if you need it all so I send like this</p>\n\n<p>I had de program working with sqlite3 but I needed to use mysql so to get all the data on the web api and the other program getting the data to an array and it's not working now</p>\n"}, {"tags": ["python", "pyodbc"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 1, "creation_date": 1508358760, "post_id": 46818653, "comment_id": 80584861, "body": "<code>set ? = </code> can&#39;t work because your can&#39;t parameterize column names. You&#39;ll need to <code>format</code> the column names in."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 1, "creation_date": 1508358965, "post_id": 46818653, "comment_id": 80584957, "body": "<code>cur.execute(&quot;update PG set {} = (?)&quot;.format(col), (price,))</code>. If <code>col</code> comes from outside, you&#39;ll have to sanitise it yourself to stop SQL injection."}, {"owner": {"reputation": 97598, "user_id": 2144390, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6QjmY.jpg?s=128&g=1", "display_name": "Gord Thompson", "link": "https://stackoverflow.com/users/2144390/gord-thompson"}, "edited": false, "score": 0, "creation_date": 1508364302, "post_id": 46818653, "comment_id": 80587432, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/q/21858012/2144390\">pyodbc column name as variable</a>"}], "owner": {"reputation": 693, "user_id": 8383850, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/08d164ea04180377780d9d255f57810b?s=128&d=identicon&r=PG&f=1", "display_name": "MathiasRa", "link": "https://stackoverflow.com/users/8383850/mathiasra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 377, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1508364385, "creation_date": 1508358310, "last_edit_date": 1508364385, "question_id": 46818653, "link": "https://stackoverflow.com/questions/46818653/pyodbc-cannot-update-table-using-string-variables-for-column-name-and-value", "title": "pyodbc: cannot update table using string variables for column name and value", "body": "<p>I am trying to update an SQL table where the column name and the actual are \"unknown\"/strings. I get the column names from quandl and use the same names in the SQL table.</p>\n\n<p>The code below should show an example of what I am trying to do:</p>\n\n<pre><code>data = quandl.get(\"EOD/PG\", trim_start = \"2011-12-12\", trim_end = \"2017-10-15\", authtoken=quandl.ApiConfig.api_key)\n\ndata = data.reset_index()\nda = list(data.columns.values)\nfor row in data.itertuples():\n    i = 2\n    while i &lt; len(da):\n        price = row[i:i+1]\n        price, = price\n        col = da[i]\n        i += 1\n        cur.execute(\"update PG set ? = (?)\", (col, price))\n</code></pre>\n\n<p>However, apparently the \"price\" isn't working and I get the following error:</p>\n\n<blockquote>\n  <p>pyodbc.DataError: ('22003', '[22003] [Microsoft][ODBC SQL Server\n  Driver][SQL Server]Arithmetic overflow error converting expression to\n  data type nvarchar. (8115) (SQLExecDirectW)')</p>\n</blockquote>\n\n<p>If I manually set the price = 55 then the table updates. That confuses me because when when I print the price (using my code) I get a float value. </p>\n\n<p>So I am not sure how to fix this. Any help would be welcommed. </p>\n"}, {"tags": ["python", "python-3.x", "class", "web-scraping"], "answers": [{"comments": [{"owner": {"reputation": 19801, "user_id": 9189799, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/U2hEg.jpg?s=128&g=1", "display_name": "SIM", "link": "https://stackoverflow.com/users/9189799/sim"}, "edited": false, "score": 0, "creation_date": 1508360893, "post_id": 46819092, "comment_id": 80585870, "body": "Thanks sir Jonathan, it works now. Gonna accept it as an answer soon. Please don&#39;t ignore giving the advice as to how I can execute the scraper without calling <code>fetch_url()</code>. This is what I tried in the first place. Thanks and much obliged."}, {"owner": {"reputation": 7448, "user_id": 554903, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/6fyv9.jpg?s=128&g=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/554903/jonathan"}, "reply_to_user": {"reputation": 19801, "user_id": 9189799, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/U2hEg.jpg?s=128&g=1", "display_name": "SIM", "link": "https://stackoverflow.com/users/9189799/sim"}, "edited": false, "score": 0, "creation_date": 1508401388, "post_id": 46819092, "comment_id": 80598597, "body": "Well, you could call fetch_url in the function get_text."}, {"owner": {"reputation": 19801, "user_id": 9189799, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/U2hEg.jpg?s=128&g=1", "display_name": "SIM", "link": "https://stackoverflow.com/users/9189799/sim"}, "edited": false, "score": 0, "creation_date": 1508407679, "post_id": 46819092, "comment_id": 80602243, "body": "Thanks a lot. This was it."}], "tags": [], "owner": {"reputation": 7448, "user_id": 554903, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/6fyv9.jpg?s=128&g=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/554903/jonathan"}, "is_accepted": true, "score": 1, "last_activity_date": 1508401469, "last_edit_date": 1508401469, "creation_date": 1508360196, "answer_id": 46819092, "question_id": 46818622, "link": "https://stackoverflow.com/questions/46818622/trouble-executing-my-class-crawler/46819092#46819092", "title": "Trouble executing my class crawler", "body": "<p>You're executing the following two lines</p>\n\n<pre><code>item = TextParser()\nitem.get_text()\n</code></pre>\n\n<p>When you initialize <code>TextParser</code>, <code>self.storage</code> is equal to None. When you execute the function get_text() it's still equal to None. So that's why you get that error. </p>\n\n<p>However, if you change it to the following. <code>self.storage</code> should get populated with a string rather than being none. </p>\n\n<pre><code>item = TextParser()\nitem.fetch_url()\nitem.get_text()\n</code></pre>\n\n<p>If you want to call the function get_text without calling fetch_url you can do it this way. </p>\n\n<pre><code>def get_text(self):\n    self.fetch_url()\n    root = fromstring(self.storage)\n    for post in root.cssselect('a'):\n        print(post.text)\n</code></pre>\n"}], "owner": {"reputation": 19801, "user_id": 9189799, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/U2hEg.jpg?s=128&g=1", "display_name": "SIM", "link": "https://stackoverflow.com/users/9189799/sim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 46819092, "answer_count": 1, "score": 0, "last_activity_date": 1508401469, "creation_date": 1508358185, "question_id": 46818622, "link": "https://stackoverflow.com/questions/46818622/trouble-executing-my-class-crawler", "title": "Trouble executing my class crawler", "body": "<p>I'm completely newbie to python when it comes to scrape any web data using class. So, apology in advance for any serious mistake. I've written a script to parse the text using <code>a</code> tag from wikipedia web site. I tried to write the code accurately from my level best but for some reason when i execute the code it throws error. The code and the error I'm having are given below for your kind consideration.</p>\n\n<p>The script:</p>\n\n<pre><code>import requests\nfrom lxml.html import fromstring\n\nclass TextParser(object):\n\n    def __init__(self):\n        self.link = 'https://en.wikipedia.org/wiki/Main_Page'\n        self.storage = None\n\n    def fetch_url(self):\n        self.storage = requests.get(self.link).text\n\n    def get_text(self):\n        root = fromstring(self.storage)\n        for post in root.cssselect('a'):\n            print(post.text)\n\nitem = TextParser()\nitem.get_text()\n</code></pre>\n\n<p>The error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"C:\\Users\\mth\\AppData\\Local\\Programs\\Python\\Python35-32\\testmatch.py\", line 38, in &lt;module&gt;\n    item.get_text()\n  File \"C:\\Users\\mth\\AppData\\Local\\Programs\\Python\\Python35-32\\testmatch.py\", line 33, in get_text\n    root = fromstring(self.storage)\n  File \"C:\\Users\\mth\\AppData\\Local\\Programs\\Python\\Python35-32\\lib\\site-packages\\lxml\\html\\__init__.py\", line 875, in fromstring\n    is_full_html = _looks_like_full_html_unicode(html)\nTypeError: expected string or bytes-like object\n</code></pre>\n"}]