[{"tags": ["python", "pandas", "bar-chart"], "comments": [{"owner": {"reputation": 7529, "user_id": 8008776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NZFTW.jpg?s=128&g=1", "display_name": "Peter Leimbigler", "link": "https://stackoverflow.com/users/8008776/peter-leimbigler"}, "edited": false, "score": 0, "creation_date": 1553128709, "post_id": 55271873, "comment_id": 97275452, "body": "Welcome to Stack Overflow! In what environment are you running the code? If you&#39;re using a Jupyter Notebook, try running <code>%matplotlib inline</code> in a separate cell first."}, {"owner": {"reputation": 11, "user_id": 11234927, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cCxuwF0vLts/AAAAAAAAAAI/AAAAAAAAAqE/1VmdUrhsEa4/photo.jpg?sz=128", "display_name": "Crystal Chan", "link": "https://stackoverflow.com/users/11234927/crystal-chan"}, "reply_to_user": {"reputation": 7529, "user_id": 8008776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NZFTW.jpg?s=128&g=1", "display_name": "Peter Leimbigler", "link": "https://stackoverflow.com/users/8008776/peter-leimbigler"}, "edited": false, "score": 0, "creation_date": 1553131430, "post_id": 55271873, "comment_id": 97276014, "body": "@PeterLeimbigler Hi! I&#39;m using repl.it."}], "owner": {"reputation": 11, "user_id": 11234927, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cCxuwF0vLts/AAAAAAAAAAI/AAAAAAAAAqE/1VmdUrhsEa4/photo.jpg?sz=128", "display_name": "Crystal Chan", "link": "https://stackoverflow.com/users/11234927/crystal-chan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1553126349, "creation_date": 1553126349, "question_id": 55271873, "link": "https://stackoverflow.com/questions/55271873/bar-plot-with-webscraped-data-in-python", "title": "Bar plot with webscraped data in python", "body": "<p>For some reason no output is coming up from my code.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>import requests\r\nimport bs4\r\nimport pandas\r\nimport matplotlib.pyplot as plt\r\n\r\nres = requests.get('https://www.imdb.com/search/title?title_type=feature,documentary,short&amp;release_date=2018-01-01,2018-12-31')\r\nres.raise_for_status()\r\nsoup = bs4.BeautifulSoup(res.text, 'html.parser')\r\n\r\nmoviecontainers = soup.find_all('div', class_ = 'lister-item mode-advanced')\r\n\r\ntitles = []\r\nratings = []\r\nmetascores = []\r\n\r\nfor container in moviecontainers:\r\n  if container.find('div', class_ = 'ratings-metascore'):\r\n    name = container.h3.a.text\r\n    titles.append(name)\r\n\r\n    rating = float(container.strong.text)\r\n    ratings.append(rating)\r\n\r\n    metascore = container.find('span', class_ = 'metascore').text\r\n    metascores.append(metascore)\r\n\r\nmovies = pandas.DataFrame({'movie title': titles,\r\n          'imdb ratings': ratings,\r\n          'metascore': metascores\r\n})\r\n\r\nax = movies[['imdb ratings','metascore']].plot(kind='bar', title =\"Rating comp\", figsize=(15, 10), legend=True)\r\nax.set_xlabel(\"Movie Titiles\")\r\nax.set_ylabel(\"Ratings\")\r\nplt.show()</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Can anyone tell me what is wrong? I think it mostly the graph part because I've tried running it without the code for the bar plot.</p>\n"}, {"tags": ["python", "pandas", "one-hot-encoding"], "answers": [{"comments": [{"owner": {"reputation": 820, "user_id": 7862558, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1JLiD.jpg?s=128&g=1", "display_name": "Sagar Dawda", "link": "https://stackoverflow.com/users/7862558/sagar-dawda"}, "edited": false, "score": 1, "creation_date": 1559833543, "post_id": 55271908, "comment_id": 99551152, "body": "I get the output as int. But it wouldnt convert to float. Have you faced a simlar situation too?"}, {"owner": {"reputation": 627, "user_id": 1549844, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eecf7892ecdfe26d3879859e78949d73?s=128&d=identicon&r=PG", "display_name": "KLDavenport", "link": "https://stackoverflow.com/users/1549844/kldavenport"}, "edited": false, "score": 0, "creation_date": 1600999268, "post_id": 55271908, "comment_id": 113273592, "body": "You are trying to get a float? <code>dataframe_obj.rename(lambda col: col.replace(&#39;.0&#39;, &#39;&#39;), axis=&#39;columns&#39;)</code> Is that what you need?"}], "tags": [], "owner": {"reputation": 16300, "user_id": 11015427, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JsY7F.jpg?s=128&g=1", "display_name": "gmds", "link": "https://stackoverflow.com/users/11015427/gmds"}, "is_accepted": true, "score": 7, "last_activity_date": 1553126606, "creation_date": 1553126606, "answer_id": 55271908, "question_id": 55271858, "link": "https://stackoverflow.com/questions/55271858/pandas-get-dummies-with-value-from-another-column/55271908#55271908", "title": "Pandas - get_dummies with value from another column", "body": "<p>Do it in two steps:</p>\n\n<pre><code>dummies = pd.get_dummies(df['Mfr Number'])\ndummies.values[dummies != 0] = df['Quantity']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": false, "score": 2, "last_activity_date": 1553126877, "creation_date": 1553126877, "answer_id": 55271936, "question_id": 55271858, "link": "https://stackoverflow.com/questions/55271858/pandas-get-dummies-with-value-from-another-column/55271936#55271936", "title": "Pandas - get_dummies with value from another column", "body": "<p>Check with <code>str.get_dummies</code> and <code>mul</code></p>\n\n<pre><code>df.Number.str.get_dummies().mul(df.quantity,0)\n   40.50699.0095  40.50699.0100    ...      MWS0460MB  TM-120-6X\n0              0              0    ...              1          0\n1              0              0    ...              0          3\n2              5              0    ...              0          0\n3              0              1    ...              0          0\n4              0              0    ...              0          0\n[5 rows x 5 columns]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 101, "user_id": 10510046, "user_type": "registered", "profile_image": "https://graph.facebook.com/2280886092135230/picture?type=large", "display_name": "Alexandr  Kosolapov", "link": "https://stackoverflow.com/users/10510046/alexandr-kosolapov"}, "is_accepted": false, "score": 0, "last_activity_date": 1557059898, "creation_date": 1557059898, "answer_id": 55992017, "question_id": 55271858, "link": "https://stackoverflow.com/questions/55271858/pandas-get-dummies-with-value-from-another-column/55992017#55992017", "title": "Pandas - get_dummies with value from another column", "body": "<pre><code>df = pd.get_dummies(df, columns = ['Mfr Number'])\nfor col in df.columns[2:]:\n    df[col] = df[col]*df['quantity']\n</code></pre>\n"}], "owner": {"reputation": 855, "user_id": 10119785, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XoQuz.jpg?s=128&g=1", "display_name": "55thSwiss", "link": "https://stackoverflow.com/users/10119785/55thswiss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1759, "favorite_count": 2, "accepted_answer_id": 55271908, "answer_count": 3, "score": 2, "last_activity_date": 1557059898, "creation_date": 1553126206, "question_id": 55271858, "link": "https://stackoverflow.com/questions/55271858/pandas-get-dummies-with-value-from-another-column", "title": "Pandas - get_dummies with value from another column", "body": "<p>I have a dataframe like below. The column <code>Mfr Number</code> is a categorical data type. I'd like to preform <code>get_dummies</code> or one hot encoding on it, but instead of filling in the new column with a 1 if it's from that row, I want it to fill in the value from the <code>quantity</code> column. All the other new 'dummies' should remain a 0 on that row. Is this possible?</p>\n\n<pre><code>    Datetime            Mfr Number                quantity\n0   2016-03-15 07:02:00 MWS0460MB                 1\n1   2016-03-15 07:03:00 TM-120-6X                 3\n2   2016-03-15 08:33:00 40.50699.0095             5\n3   2016-03-15 08:42:00 40.50699.0100             1\n4   2016-03-15 08:46:00 CXS-04T098-00-0703R-1025  10\n</code></pre>\n"}, {"tags": ["python", "tensorflow", "tensorflow-serving"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 9016494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e05134b2f59f5bba70654f92757400f?s=128&d=identicon&r=PG", "display_name": "Zerta", "link": "https://stackoverflow.com/users/9016494/zerta"}, "edited": false, "score": 0, "creation_date": 1554927443, "post_id": 55595605, "comment_id": 97934345, "body": "Thanks for the help! This was exactly what I needed"}, {"owner": {"reputation": 768, "user_id": 2565184, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/KMfMP.jpg?s=128&g=1", "display_name": "SNEH PANDYA", "link": "https://stackoverflow.com/users/2565184/sneh-pandya"}, "edited": false, "score": 0, "creation_date": 1599006381, "post_id": 55595605, "comment_id": 112637465, "body": "Is there any way we can customize serving input receiver to get json input instead of tf.example?"}], "tags": [], "owner": {"reputation": 432, "user_id": 2912207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dec44ab33b442ccf0ab7eae18fa9b80a?s=128&d=identicon&r=PG&f=1", "display_name": "Happy Gene", "link": "https://stackoverflow.com/users/2912207/happy-gene"}, "is_accepted": true, "score": 0, "last_activity_date": 1554821341, "creation_date": 1554821341, "answer_id": 55595605, "question_id": 55271842, "link": "https://stackoverflow.com/questions/55271842/tensorflow-serving-transform-data-from-input-function/55595605#55595605", "title": "Tensorflow Serving Transform data from input function", "body": "<p>tf.one_hot provide the one hot encoding. </p>\n\n<p>However, more broadly, you need to coordinate the training and serving to use the same index. Tensorflow Transform provides the way to do many transformations (one-hot, scale, bucketize), including one-hot encoding, at training data processing phase, and save the transformation as part of the model graph, therefore automatically re-apply the same transformation at the serving time, saving you the manual work. Check out their example with the link below:</p>\n\n<p>Example: <a href=\"https://www.tensorflow.org/tfx/transform/tutorials/TFT_simple_example\" rel=\"nofollow noreferrer\">https://www.tensorflow.org/tfx/transform/tutorials/TFT_simple_example</a></p>\n\n<p>Example 2: <a href=\"https://github.com/tensorflow/transform/blob/master/examples/sentiment_example.py\" rel=\"nofollow noreferrer\">https://github.com/tensorflow/transform/blob/master/examples/sentiment_example.py</a></p>\n\n<p>The Full Python API: <a href=\"https://www.tensorflow.org/tfx/transform/api_docs/python/tft\" rel=\"nofollow noreferrer\">https://www.tensorflow.org/tfx/transform/api_docs/python/tft</a></p>\n\n<p>The function you look for there is tft.compute_and_apply_vocabulary.</p>\n"}], "owner": {"reputation": 13, "user_id": 9016494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e05134b2f59f5bba70654f92757400f?s=128&d=identicon&r=PG", "display_name": "Zerta", "link": "https://stackoverflow.com/users/9016494/zerta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 454, "favorite_count": 0, "accepted_answer_id": 55595605, "answer_count": 1, "score": 0, "last_activity_date": 1554821341, "creation_date": 1553126103, "question_id": 55271842, "link": "https://stackoverflow.com/questions/55271842/tensorflow-serving-transform-data-from-input-function", "title": "Tensorflow Serving Transform data from input function", "body": "<p>Currently I am working on a tensorflow model. This model classifies a situation based on 2 string and a number. So my placeholders look as follows:</p>\n\n<pre><code>Input1 = tf.placeholder(\"string\", shape=None, name=\"string1\")\nInput2 = tf.placeholder(\"string\", shape=None, name=\"string2\")\nInput3 = tf.placeholder(\"float\", shape=None, name=\"distance\")\nlabel = tf.placeholder(\"int64\", shape=None, name=\"output\")\n</code></pre>\n\n<p>I want to serve this model with Tensorflow Serving with this code:</p>\n\n<pre><code>    signature_definition = tf.saved_model.signature_def_utils.build_signature_def(\n        inputs={'input1': model_input1, 'input2': model_input2, 'input3': model_input3},\n        outputs={'outputs': model_output},\n        method_name=tf.saved_model.signature_constants.PREDICT_METHOD_NAME)\n\n    builder = tf.saved_model.builder.SavedModelBuilder(SERVE_PATH)\n\n    builder.add_meta_graph_and_variables(\n        sess, [tf.saved_model.tag_constants.SERVING],\n        signature_def_map={\n            tf.saved_model.signature_constants.DEFAULT_SERVING_SIGNATURE_DEF_KEY:\n                signature_definition\n        }) \n</code></pre>\n\n<p>But the model I wrote want the strings as one_hot coded input. Does someone knows how to transform the input tensors to one_hot coded ones, and feed those to my model?\nWhile training my model, I just transformed them with a function before feeding them. This seems not possible while serving because I can only define a input function, not the flow of the inputdata.</p>\n"}, {"tags": ["python", "python-3.x", "beautifulsoup"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 11234632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96c098bb697dde6c75def2860c1384bb?s=128&d=identicon&r=PG&f=1", "display_name": "sag", "link": "https://stackoverflow.com/users/11234632/sag"}, "edited": false, "score": 0, "creation_date": 1553131626, "post_id": 55271985, "comment_id": 97276066, "body": "It works, can you explain why? If I understand correctly, it&#39;s because HTML parsing is not supported by newest versions of BeautifulSoup library, but I&#39;m not sure."}, {"owner": {"reputation": 3907, "user_id": 8306666, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/2f20237f2695cc2f6951fb562493cd7f?s=128&d=identicon&r=PG&f=1", "display_name": "Nazim Kerimbekov", "link": "https://stackoverflow.com/users/8306666/nazim-kerimbekov"}, "reply_to_user": {"reputation": 3, "user_id": 11234632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96c098bb697dde6c75def2860c1384bb?s=128&d=identicon&r=PG&f=1", "display_name": "sag", "link": "https://stackoverflow.com/users/11234632/sag"}, "edited": false, "score": 0, "creation_date": 1553155367, "post_id": 55271985, "comment_id": 97282081, "body": "I\u2019m not 100% sure of the reason but as far as I know your supposition is correct. (As a rule of thumb I always use lxml)"}], "tags": [], "owner": {"reputation": 3907, "user_id": 8306666, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/2f20237f2695cc2f6951fb562493cd7f?s=128&d=identicon&r=PG&f=1", "display_name": "Nazim Kerimbekov", "link": "https://stackoverflow.com/users/8306666/nazim-kerimbekov"}, "is_accepted": true, "score": 0, "last_activity_date": 1553127389, "creation_date": 1553127389, "answer_id": 55271985, "question_id": 55271786, "link": "https://stackoverflow.com/questions/55271786/beautifulsoup-class-searching-no-results/55271985#55271985", "title": "BeautifulSoup class searching, no results", "body": "<p>the problem you are facing is linked to the way you are parsing <code>page.content</code>.</p>\n\n<p><em>replace:</em></p>\n\n<pre><code>soup = BeautifulSoup(page.content, 'html.parser')\n</code></pre>\n\n<p><em>with:</em></p>\n\n<pre><code>soup = BeautifulSoup(page.content, 'lxml')\n</code></pre>\n\n<p>hope this helps.</p>\n"}], "owner": {"reputation": 3, "user_id": 11234632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96c098bb697dde6c75def2860c1384bb?s=128&d=identicon&r=PG&f=1", "display_name": "sag", "link": "https://stackoverflow.com/users/11234632/sag"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 344, "favorite_count": 0, "accepted_answer_id": 55271985, "answer_count": 1, "score": 0, "last_activity_date": 1553129713, "creation_date": 1553125743, "last_edit_date": 1592644375, "question_id": 55271786, "link": "https://stackoverflow.com/questions/55271786/beautifulsoup-class-searching-no-results", "title": "BeautifulSoup class searching, no results", "body": "<p>I'm using BeautifulSoup to parse code of <a href=\"https://www.awf.edu.pl/pracownik/wyszukiwarka-pracownikow?result_5251_result_page=3&amp;queries_search_query=&amp;category_kategorie=wydzia_wychowania_fizycznego&amp;search_page_5251_submit_button=Szukaj&amp;current_result_page=1&amp;results_per_page=20&amp;submitted_search_category=&amp;mode=results\" rel=\"nofollow noreferrer\">this</a> site and extract URL of the results. But when using <code>find_all</code> command I get an empty list as output. I checked manually the HTML code that I download from the site, and it contains the appropriate class.\nIf somebody could point out where I make a mistake or show a better solution I would be grateful!</p>\n<pre><code>from bs4 import BeautifulSoup\nimport requests\n\n\npage = requests.get(&quot;https://www.awf.edu.pl/pracownik/wyszukiwarka-pracownikow?result_5251_result_page=3&amp;queries_search_query=&amp;category_kategorie=wydzia_wychowania_fizycznego&amp;search_page_5251_submit_button=Szukaj&amp;current_result_page=1&amp;results_per_page=20&amp;submitted_search_category=&amp;mode=results&quot;)\n\nsoup = BeautifulSoup(page.content, 'html.parser')\n\nresults = soup.find_all('div', class_ = 'search-item photo')\n</code></pre>\n<p>`</p>\n<p>I've also tried to use this code below to just find all links on the site and then separate that what I need, but in this instance, I get only parent tag. if in tag 'a' is nested another tag 'a' it is skipped, and from documentation, I thought it also would be included in the output.</p>\n<pre><code>from bs4 import BeautifulSoup\nimport requests\n\n\npage = requests.get(&quot;https://www.awf.edu.pl/pracownik/wyszukiwarka-pracownikow?result_5251_result_page=3&amp;queries_search_query=&amp;category_kategorie=wydzia_wychowania_fizycznego&amp;search_page_5251_submit_button=Szukaj&amp;current_result_page=1&amp;results_per_page=20&amp;submitted_search_category=&amp;mode=results&quot;)\n\nsoup = BeautifulSoup(page.content, 'html.parser')\n\nresults = soup.find_all('a')\n</code></pre>\n<p><a href=\"https://stackoverflow.com/questions/52408701/beautifulsoup-cant-find-class-that-exists-on-webpage\">BeautifulSoup can&#39;t find class that exists on webpage?</a></p>\n<p>I found this answer to a similar question, but in my case, I can see the HTML code that I want to find in my console when I use <code>print(soup.prettify())</code></p>\n"}, {"tags": ["python", "csv"], "comments": [{"owner": {"reputation": 1858, "user_id": 7197281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17c04810ea8f251cdc6e82d9f05144da?s=128&d=identicon&r=PG&f=1", "display_name": "CloC", "link": "https://stackoverflow.com/users/7197281/cloc"}, "edited": false, "score": 4, "creation_date": 1553125858, "post_id": 55271784, "comment_id": 97274782, "body": "Sharing your research helps everyone. Tell us what you&#39;ve tried and why it didn\u2019t meet your needs. This demonstrates that you\u2019ve taken the time to try to help yourself, it saves us from reiterating obvious answers, and most of all it helps you get a more specific and relevant answer! See also: <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>"}], "answers": [{"tags": [], "owner": {"reputation": 171, "user_id": 9397882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/681da978620c83808d40975066912ad0?s=128&d=identicon&r=PG&f=1", "display_name": "Russ Brown", "link": "https://stackoverflow.com/users/9397882/russ-brown"}, "is_accepted": false, "score": 0, "last_activity_date": 1553126623, "last_edit_date": 1553126623, "creation_date": 1553126252, "answer_id": 55271864, "question_id": 55271784, "link": "https://stackoverflow.com/questions/55271784/import-csv-file-and-make-each-column-its-own-list/55271864#55271864", "title": "Import CSV file and make each column its own list", "body": "<p>This will give you a list of columns, each column being a list of items.</p>\n\n<pre><code>import pandas as pd\n\ndef get_columns(csv_file):\n    df = pd.read_csv(your.csv)\n\n    columns = []\n    for column in df:\n        columns += column\n    return columns\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5007, "user_id": 10924296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/483c21a8a3f03bbf92cb99539ec97dbc?s=128&d=identicon&r=PG&f=1", "display_name": "Reedinationer", "link": "https://stackoverflow.com/users/10924296/reedinationer"}, "is_accepted": false, "score": 0, "last_activity_date": 1553126261, "creation_date": 1553126261, "answer_id": 55271865, "question_id": 55271784, "link": "https://stackoverflow.com/questions/55271784/import-csv-file-and-make-each-column-its-own-list/55271865#55271865", "title": "Import CSV file and make each column its own list", "body": "<p>You can use the built in <code>csv</code> module standard with every python installation.</p>\n\n<pre><code>import csv\nheader1 = []\nheader2 = []\n# so on\nwith open('file.csv') as csvfile:\n    reader = csv.DictReader(csvfile, fieldnames=['header1', 'header2', 'header3', 'header4', 'header5'])\n    for row in reader:\n        header1.append(row['header1'])\n        header2.append(row['header2'])\n        # so on\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11234914, "user_type": "registered", "profile_image": "https://graph.facebook.com/2311179535761192/picture?type=large", "display_name": "PJ Crann", "link": "https://stackoverflow.com/users/11234914/pj-crann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 1, "answer_count": 2, "score": -3, "last_activity_date": 1553126623, "creation_date": 1553125716, "last_edit_date": 1553125792, "question_id": 55271784, "link": "https://stackoverflow.com/questions/55271784/import-csv-file-and-make-each-column-its-own-list", "title": "Import CSV file and make each column its own list", "body": "<p>I have a csv file that contains data like this with a lot of rows:</p>\n\n<pre><code>2017, UNC (1), Gonzaga (1), Oregon (3), South Carolina (7)\n2016, Villanova, (2), UNC (1), Oklahoma (2), Syracuse (10)\n</code></pre>\n\n<p>I am trying to import the file and make each column into its own list in the easiest way possible in python.</p>\n"}, {"tags": ["python", "plot", "astronomy"], "comments": [{"owner": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "edited": false, "score": 0, "creation_date": 1553125641, "post_id": 55271757, "comment_id": 97274730, "body": "What&#39;s a &quot;corner plot&quot;?"}, {"owner": {"reputation": 2152, "user_id": 1306026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d117a6182330066d4771187f93e7e98e?s=128&d=identicon&r=PG", "display_name": "Joshua R.", "link": "https://stackoverflow.com/users/1306026/joshua-r"}, "edited": false, "score": 0, "creation_date": 1553130032, "post_id": 55271757, "comment_id": 97275714, "body": "What&#39;s the result of <code>samples.shape</code>? -- never mind, it&#39;s in your output."}, {"owner": {"reputation": 2152, "user_id": 1306026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d117a6182330066d4771187f93e7e98e?s=128&d=identicon&r=PG", "display_name": "Joshua R.", "link": "https://stackoverflow.com/users/1306026/joshua-r"}, "edited": false, "score": 0, "creation_date": 1553130608, "post_id": 55271757, "comment_id": 97275841, "body": "What does it do if you pass in <code>samples.T</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 8126005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a601c5a39393ebf01b462d829e8e3707?s=128&d=identicon&r=PG&f=1", "display_name": "Hannah", "link": "https://stackoverflow.com/users/8126005/hannah"}, "is_accepted": false, "score": 0, "last_activity_date": 1553130847, "creation_date": 1553130847, "answer_id": 55272394, "question_id": 55271757, "link": "https://stackoverflow.com/questions/55271757/corner-plot-more-dimensions-than-samples-error/55272394#55272394", "title": "Corner plot: &quot;more dimensions than samples&quot; error", "body": "<p>figure = corner.corner(samples.T)</p>\n"}], "owner": {"reputation": 1, "user_id": 8126005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a601c5a39393ebf01b462d829e8e3707?s=128&d=identicon&r=PG&f=1", "display_name": "Hannah", "link": "https://stackoverflow.com/users/8126005/hannah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 270, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1553130847, "creation_date": 1553125551, "last_edit_date": 1553130730, "question_id": 55271757, "link": "https://stackoverflow.com/questions/55271757/corner-plot-more-dimensions-than-samples-error", "title": "Corner plot: &quot;more dimensions than samples&quot; error", "body": "<p>I am trying to make a corner plot with 5 labels. Each label is an array with 1713 values. It appears I have 2 dimensions but only 1 sample. How do I increase the number of samples?</p>\n\n<p>Input:</p>\n\n<pre><code># Labels: Teff, logg, [Fe/H], [Mg/Fe], and [Si/Fe]\n\nimport corner\nimport numpy as np\nfrom astropy.io import fits\n\nhdu1 = fits.open('partb_ASPCAP&amp;cuts.fits')\ndata = hdu1[1].data\n\nsamples = np.vstack([data['Teff'],data['logg'],data['FE_H'],data['MG_FE'],data['SI_FE']])\nprint(len(samples.shape))\nprint(samples.T.shape)\n\nfigure = corner.corner(samples)\n</code></pre>\n\n<p>Output:\n<a href=\"https://i.stack.imgur.com/7YSuW.png\" rel=\"nofollow noreferrer\">error</a></p>\n\n<p>A corner plot, aka triangle plot, has histograms along the outer diagonal (each with an x-axis of Teff or another label and with y-axis of probability). The inner plots are contour plots (each with an x-axis of one label and a y-axis of a different label).\n<a href=\"https://i.stack.imgur.com/jOIrq.png\" rel=\"nofollow noreferrer\">example of corner plot with 4 labels</a></p>\n\n<p>The corner function: <a href=\"https://corner.readthedocs.io/en/latest/api.html\" rel=\"nofollow noreferrer\">https://corner.readthedocs.io/en/latest/api.html</a></p>\n"}, {"tags": ["python", "tensorflow", "google-cloud-platform", "tpu"], "answers": [{"tags": [], "owner": {"reputation": 1811, "user_id": 2664496, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0dsnA.jpg?s=128&g=1", "display_name": "mingaleg", "link": "https://stackoverflow.com/users/2664496/mingaleg"}, "is_accepted": true, "score": 1, "last_activity_date": 1553130064, "creation_date": 1553130064, "answer_id": 55272296, "question_id": 55271748, "link": "https://stackoverflow.com/questions/55271748/gcp-unable-to-connect-to-cloud-tpu/55272296#55272296", "title": "GCP: Unable to connect to cloud TPU", "body": "<p><code>ctpu</code> passes this name to the Compute Engine VM as an environment variable (<code>TPU_NAME</code>), but <code>gcloud</code> doesn't.</p>\n\n<p>Specify your TPU explicitly: use <code>--tpu=my-tpu</code> instead of <code>--tpu=$TPU_NAME</code></p>\n"}], "owner": {"reputation": 1021, "user_id": 2204131, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/e33e679c7498832162a02207e103ad05?s=128&d=identicon&r=PG", "display_name": "ramesh", "link": "https://stackoverflow.com/users/2204131/ramesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1342, "favorite_count": 0, "accepted_answer_id": 55272296, "answer_count": 1, "score": 1, "last_activity_date": 1553130064, "creation_date": 1553125512, "question_id": 55271748, "link": "https://stackoverflow.com/questions/55271748/gcp-unable-to-connect-to-cloud-tpu", "title": "GCP: Unable to connect to cloud TPU", "body": "<p>I started an instance with TPU by following <a href=\"https://cloud.google.com/tpu/docs/quickstart\" rel=\"nofollow noreferrer\">this quick start tutorial</a> using <code>ctpu up</code> command and I was able to run MNIST tutorial successfully. I logged out of cloud shell and logged into my vm connected to TPU using SSH console as explained <a href=\"https://cloud.google.com/compute/docs/instances/connecting-to-instance\" rel=\"nofollow noreferrer\">here</a>, when I run MNIST tutorial again I'm getting </p>\n\n<pre><code>RuntimeError: Cannot find any TPU cores in the system. Please double check Tensorflow master address and TPU worker(s).\n</code></pre>\n\n<p>When I run <code>ctpu ls</code>, I get </p>\n\n<pre><code>#       Flock Name      Status\n0:      my-tpu(*)  running\n</code></pre>\n\n<p><code>ctpu status</code> command gives</p>\n\n<pre><code>Your cluster is running!\nCompute Engine VM:  RUNNING\nCloud TPU:          RUNNING\n</code></pre>\n\n<p>Am I missing something basic here? </p>\n"}, {"tags": ["python", "pandas", "datetime", "dataframe"], "comments": [{"owner": {"reputation": 2966, "user_id": 3014199, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/72332b0ac6ee78bc829c378c6c747e0e?s=128&d=identicon&r=PG", "display_name": "peer", "link": "https://stackoverflow.com/users/3014199/peer"}, "edited": false, "score": 1, "creation_date": 1553125966, "post_id": 55271735, "comment_id": 97274827, "body": "could you provide code that generates the example dataset? That will make it easier for us to help you."}, {"owner": {"reputation": 395, "user_id": 5908119, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/10153896720569059/picture?type=large", "display_name": "Aquiles P&#225;ez", "link": "https://stackoverflow.com/users/5908119/aquiles-p%c3%a1ez"}, "reply_to_user": {"reputation": 2966, "user_id": 3014199, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/72332b0ac6ee78bc829c378c6c747e0e?s=128&d=identicon&r=PG", "display_name": "peer", "link": "https://stackoverflow.com/users/3014199/peer"}, "edited": false, "score": 0, "creation_date": 1553126362, "post_id": 55271735, "comment_id": 97274925, "body": "Hi @peer, I&#39;m uploading this data from a .csv file, this is just a very small sample of the whole set. All I have done so far is converting timezones from UTC to EST and changing the dtype of the datetime column from object to proper datetime.   I&#39;ll post an edit anyways with it. But in the snapshots I only left relevant information, didn&#39;t even changed the proper timezone in there."}, {"owner": {"reputation": 31306, "user_id": 9081267, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1knzv.jpg?s=128&g=1", "display_name": "Erfan", "link": "https://stackoverflow.com/users/9081267/erfan"}, "edited": false, "score": 0, "creation_date": 1553126649, "post_id": 55271735, "comment_id": 97274991, "body": "@AquilesP&#225;ez what he means, is that we cannot copy your screenshots. Is it possible to <code>print()</code> these samples you show in the screenshot and paste the output in your question so we can copy it."}, {"owner": {"reputation": 1807, "user_id": 6947349, "user_type": "registered", "profile_image": "https://graph.facebook.com/1682570098663073/picture?type=large", "display_name": "Samuel Nde", "link": "https://stackoverflow.com/users/6947349/samuel-nde"}, "edited": false, "score": 0, "creation_date": 1553126847, "post_id": 55271735, "comment_id": 97275046, "body": "Man it is going to be a pain trying to get this done without a sample dataframe. I suggest you upload a small csv file on github and share a link to it so we can get data to work with."}, {"owner": {"reputation": 395, "user_id": 5908119, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/10153896720569059/picture?type=large", "display_name": "Aquiles P&#225;ez", "link": "https://stackoverflow.com/users/5908119/aquiles-p%c3%a1ez"}, "reply_to_user": {"reputation": 31306, "user_id": 9081267, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1knzv.jpg?s=128&g=1", "display_name": "Erfan", "link": "https://stackoverflow.com/users/9081267/erfan"}, "edited": false, "score": 0, "creation_date": 1553127380, "post_id": 55271735, "comment_id": 97275171, "body": "@Erfan sorry, done!"}, {"owner": {"reputation": 395, "user_id": 5908119, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/10153896720569059/picture?type=large", "display_name": "Aquiles P&#225;ez", "link": "https://stackoverflow.com/users/5908119/aquiles-p%c3%a1ez"}, "reply_to_user": {"reputation": 1807, "user_id": 6947349, "user_type": "registered", "profile_image": "https://graph.facebook.com/1682570098663073/picture?type=large", "display_name": "Samuel Nde", "link": "https://stackoverflow.com/users/6947349/samuel-nde"}, "edited": false, "score": 0, "creation_date": 1553127435, "post_id": 55271735, "comment_id": 97275184, "body": "@SamuelNde yes, my bad. Changed it there."}], "answers": [{"comments": [{"owner": {"reputation": 395, "user_id": 5908119, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/10153896720569059/picture?type=large", "display_name": "Aquiles P&#225;ez", "link": "https://stackoverflow.com/users/5908119/aquiles-p%c3%a1ez"}, "edited": false, "score": 0, "creation_date": 1553129177, "post_id": 55272043, "comment_id": 97275552, "body": "Thanks for your contribution! Ok, I can use this to do some indexing although is not exactly what I want."}], "tags": [], "owner": {"reputation": 53, "user_id": 11226248, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DeNGS.png?s=128&g=1", "display_name": "katbarahona", "link": "https://stackoverflow.com/users/11226248/katbarahona"}, "is_accepted": false, "score": 1, "last_activity_date": 1553127945, "creation_date": 1553127945, "answer_id": 55272043, "question_id": 55271735, "link": "https://stackoverflow.com/questions/55271735/pandas-finding-start-end-values-of-consecutive-indexes-in-a-pandas-dataframe/55272043#55272043", "title": "Pandas: finding start-end values of consecutive indexes in a Pandas dataframe", "body": "<p>based on the information that you included, I did something like this:</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\ndf = pd.DataFrame({\"index\":[2,3,4,5,6,11,12,13],\"value\": [0,0,0,0,0,0,0,0]})\ndf[\"prev_index\"] = df[\"index\"].shift(1)\ndf[\"next_index\"] = df[\"index\"].shift(-1)\n\ndf[\"include\"] = df.apply(lambda row: True if np.isnan(row.next_index) or np.isnan(row.prev_index)\n         else (True if abs(row[\"index\"]-row.next_index) != 1 \n               or abs(row[\"index\"] - row.prev_index) != 1 else False),axis=1)\ndf[df[\"include\"]][[\"index\",\"value\"]]\n</code></pre>\n\n<p>I created a simple dataframe from the sample you gave, so my idea is just shifting the dataset in order to obtain the previous and next index, based on both columns, I just created a boolean to know if the index is the one I'm looking for. \nHope it helps!</p>\n"}, {"comments": [{"owner": {"reputation": 395, "user_id": 5908119, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/10153896720569059/picture?type=large", "display_name": "Aquiles P&#225;ez", "link": "https://stackoverflow.com/users/5908119/aquiles-p%c3%a1ez"}, "edited": false, "score": 0, "creation_date": 1553130065, "post_id": 55272170, "comment_id": 97275725, "body": "This is perfect and elegant. Truly, I didn&#39;t knew this was possible, although Pandas is well renown for being powerful for data manipulation. I was doing something with for/if cycles before I decided to post this question, glad I did. And yeah, I need to gain more depth with Pandas.  Thanks a lot Erfan! :)"}, {"owner": {"reputation": 31306, "user_id": 9081267, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1knzv.jpg?s=128&g=1", "display_name": "Erfan", "link": "https://stackoverflow.com/users/9081267/erfan"}, "reply_to_user": {"reputation": 395, "user_id": 5908119, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/10153896720569059/picture?type=large", "display_name": "Aquiles P&#225;ez", "link": "https://stackoverflow.com/users/5908119/aquiles-p%c3%a1ez"}, "edited": false, "score": 0, "creation_date": 1553130183, "post_id": 55272170, "comment_id": 97275748, "body": "Glad I could help :) and yeah I agree about pandas being elegant and powerful. Happy coding @AquilesP&#225;ez"}], "tags": [], "owner": {"reputation": 31306, "user_id": 9081267, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1knzv.jpg?s=128&g=1", "display_name": "Erfan", "link": "https://stackoverflow.com/users/9081267/erfan"}, "is_accepted": true, "score": 4, "last_activity_date": 1553129012, "creation_date": 1553129012, "answer_id": 55272170, "question_id": 55271735, "link": "https://stackoverflow.com/questions/55271735/pandas-finding-start-end-values-of-consecutive-indexes-in-a-pandas-dataframe/55272170#55272170", "title": "Pandas: finding start-end values of consecutive indexes in a Pandas dataframe", "body": "<p>Your expected <code>t_diff</code> seems not be correct, but here's a solution using <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.ptp.html\" rel=\"nofollow noreferrer\"><code>np.ptp</code></a> which takes the <code>maximum - minimum</code> over a range and <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.cumsum.html\" rel=\"nofollow noreferrer\"><code>pandas.Series.cumsum</code></a></p>\n\n<p>I used <code>cumsum</code> because this way we can find the rows which are <code>0</code></p>\n\n<pre><code>df['cumsum'] = df.value.cumsum()\n\ndf['t_diff'] = df.groupby('cumsum').created_at.transform(np.ptp)\ndf.drop('cumsum', axis=1, inplace=True)\n\nprint(df)\n    Index      value          created_at   t_diff\n0       0  18.930542 2019-03-04 02:43:08 00:00:00\n1       1  18.895210 2019-03-04 02:44:09 00:05:04\n2       2   0.000000 2019-03-04 02:45:09 00:05:04\n3       3   0.000000 2019-03-04 02:46:10 00:05:04\n4       4   0.000000 2019-03-04 02:47:11 00:05:04\n5       5   0.000000 2019-03-04 02:48:12 00:05:04\n6       6   0.000000 2019-03-04 02:49:13 00:05:04\n7       7  18.857025 2019-03-04 02:50:14 00:00:00\n8       8  18.857025 2019-03-04 02:51:14 00:00:00\n9       9  18.847290 2019-03-04 02:52:15 00:00:00\n10     10  18.847290 2019-03-04 02:53:17 00:03:02\n11     11   0.000000 2019-03-04 02:54:17 00:03:02\n12     12   0.000000 2019-03-04 02:55:19 00:03:02\n13     13   0.000000 2019-03-04 02:56:19 00:03:02\n14     14  18.837677 2019-03-04 02:57:20 00:00:00\n</code></pre>\n\n<p><strong>note</strong> in this case I transform to get the difference next to each row in the group.</p>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 5223143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b55e10cfcc078d8d733831c28838d218?s=128&d=identicon&r=PG&f=1", "display_name": "Nick W", "link": "https://stackoverflow.com/users/5223143/nick-w"}, "is_accepted": false, "score": 0, "last_activity_date": 1597134141, "creation_date": 1597134141, "answer_id": 63354272, "question_id": 55271735, "link": "https://stackoverflow.com/questions/55271735/pandas-finding-start-end-values-of-consecutive-indexes-in-a-pandas-dataframe/63354272#63354272", "title": "Pandas: finding start-end values of consecutive indexes in a Pandas dataframe", "body": "<p>A little late to the game here, but I'd like to offer my solution to find the start and end using filtering of the value and the diff of the value:</p>\n<pre><code>aux_df2 = main_df[\n(main_df['value'] == 0) &amp;\n(\n    (main_df['value'].diff() != 0)\n    | main_df['value'].diff().shift(-1) != 0\n)]\n</code></pre>\n<p>This gives:</p>\n<pre><code>      value              created_at\n2     0.0 2019-03-04 02:45:09+00:00\n6     0.0 2019-03-04 02:49:13+00:00\n11    0.0 2019-03-04 02:54:17+00:00\n13    0.0 2019-03-04 02:56:19+00:00\n</code></pre>\n<p>I can't think of an elegant way to get t_diff, though.</p>\n"}], "owner": {"reputation": 395, "user_id": 5908119, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/10153896720569059/picture?type=large", "display_name": "Aquiles P&#225;ez", "link": "https://stackoverflow.com/users/5908119/aquiles-p%c3%a1ez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 948, "favorite_count": 1, "accepted_answer_id": 55272170, "answer_count": 3, "score": 1, "last_activity_date": 1597134141, "creation_date": 1553125415, "last_edit_date": 1553127251, "question_id": 55271735, "link": "https://stackoverflow.com/questions/55271735/pandas-finding-start-end-values-of-consecutive-indexes-in-a-pandas-dataframe", "title": "Pandas: finding start-end values of consecutive indexes in a Pandas dataframe", "body": "<p>I have a dataframe that looks like this (<strong>main_df</strong>): </p>\n\n<pre><code>           value               created_at\n0   18.930542  2019-03-04 02:43:08 UTC\n1   18.895210  2019-03-04 02:44:09 UTC\n2    0.000000  2019-03-04 02:45:09 UTC\n3    0.000000  2019-03-04 02:46:10 UTC\n4    0.000000  2019-03-04 02:47:11 UTC\n5    0.000000  2019-03-04 02:48:12 UTC\n6    0.000000  2019-03-04 02:49:13 UTC\n7   18.857025  2019-03-04 02:50:14 UTC\n8   18.857025  2019-03-04 02:51:14 UTC\n9   18.847290  2019-03-04 02:52:15 UTC\n10  18.847290  2019-03-04 02:53:17 UTC\n11   0.000000  2019-03-04 02:54:17 UTC\n12   0.000000  2019-03-04 02:55:19 UTC\n13   0.000000  2019-03-04 02:56:19 UTC\n14  18.837677  2019-03-04 02:57:20 UTC\n</code></pre>\n\n<p>I want to locate segments of repeated zero values inside the column \"value\". I know how to locate zeros, by just doing this:</p>\n\n<pre><code>zeros_df=main_df.loc[main_df['value'] == 0]\n</code></pre>\n\n<p>Which would leave me the following dataframe (<strong>aux_df1</strong>): \n<a href=\"https://i.stack.imgur.com/XT9Ho.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XT9Ho.png\" alt=\"aux_df1\"></a></p>\n\n<p>Now, what I would like to get, and I don't have an idea how, is to keep only the start and beginning of each consecutive index series into a new dataframe named <strong>aux_df2</strong>, and compute the time difference between the beginning and the end of each series of consecutive values in minutes. I intend to do the last part with this (although I'd like to compute the difference just in pairs, between every start-end pair):</p>\n\n<pre><code>aux_df2['t_diff'] = ['temp_index'].diff().astype('timedelta64[m]')\n</code></pre>\n\n<p>But the first part I don't know how to do it. What I'm looking for is to make <strong>aux_df2</strong> to look like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/AWVWw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AWVWw.png\" alt=\"aux_df2\"></a></p>\n\n<p>Can someone help me please? Thanks in advance. </p>\n\n<p>Edit: in reply to @peer, this is how I'm generating the dataframe. Note that the snapshots above doesn't reflect the timezone change from UTC to EST. </p>\n\n<pre><code>import pandas as pd\n\nfilepath=r'C:\\Users\\myfile.csv'\nmain_df=pd.read_csv(filepath)\nmain_df['created_at']=main_df['created_at'].apply(pd.to_datetime)\nmain_df['created_at'] = main_df['created_at'].dt.tz_localize('UTC').dt.tz_convert('EST')\n</code></pre>\n"}, {"tags": ["python", "go", "exec", "low-latency"], "comments": [{"owner": {"reputation": 740, "user_id": 7315159, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-wLttyc9kcd4/AAAAAAAAAAI/AAAAAAAAAj4/ypMqEHWkiOM/photo.jpg?sz=128", "display_name": "Niayesh Isky", "link": "https://stackoverflow.com/users/7315159/niayesh-isky"}, "edited": false, "score": 0, "creation_date": 1553131165, "post_id": 55271734, "comment_id": 97275965, "body": "I don&#39;t know much about Golang, but does it have support for opening a pipe to a command and keeping it open? That way, you could have only one instance of the python script stay running and listen on stdin, which is probably faster than the HTTP version."}, {"owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 0, "creation_date": 1553163577, "post_id": 55271734, "comment_id": 97286221, "body": "Transpile your Python code to Go with grumpy. Or use a Python interpreter in your Go code or call out to C-Python directly via github.com/sbinet/go-python"}, {"owner": {"reputation": 21, "user_id": 7681939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11f7d5d6b6ba20863d6b28ffa0b47b1?s=128&d=identicon&r=PG&f=1", "display_name": "user7681939", "link": "https://stackoverflow.com/users/7681939/user7681939"}, "reply_to_user": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 0, "creation_date": 1553183254, "post_id": 55271734, "comment_id": 97298409, "body": "@Volker Thanks for the suggestion.  Unfortunately, I can&#39;t do this. I mentioned Python but in reality the other process could be one of many (Python2.7, Python3.5, nodeJS, JS, Go itself, Java, Ruby, etc.)"}, {"owner": {"reputation": 21, "user_id": 7681939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11f7d5d6b6ba20863d6b28ffa0b47b1?s=128&d=identicon&r=PG&f=1", "display_name": "user7681939", "link": "https://stackoverflow.com/users/7681939/user7681939"}, "reply_to_user": {"reputation": 740, "user_id": 7315159, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-wLttyc9kcd4/AAAAAAAAAAI/AAAAAAAAAj4/ypMqEHWkiOM/photo.jpg?sz=128", "display_name": "Niayesh Isky", "link": "https://stackoverflow.com/users/7315159/niayesh-isky"}, "edited": false, "score": 0, "creation_date": 1553288514, "post_id": 55271734, "comment_id": 97343653, "body": "@Niayesh Thanks for suggesting pipes. The Golang program that spawns the python process needs to collect three things from the python process (stdout and stderr logs and most important a response).  The response is most important and needs lowest latency. The logs can be collected slowly.  How can I do this using pipes?  I can create a bidirectional pipe and redirect stdout and stderr but how do I also get a response back from python to go.  E.g. The Golang process spawns a python process (python test.py). test.py is a user function that has stdout and stderr and returns a json response."}], "answers": [{"tags": [], "owner": {"reputation": 602, "user_id": 6863654, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VaBUN.png?s=128&g=1", "display_name": "beiping96", "link": "https://stackoverflow.com/users/6863654/beiping96"}, "is_accepted": false, "score": 0, "last_activity_date": 1553135744, "creation_date": 1553135744, "answer_id": 55272973, "question_id": 55271734, "link": "https://stackoverflow.com/questions/55271734/speed-up-access-to-python-programs-from-golangs-exec-packaqe/55272973#55272973", "title": "Speed up access to python programs from Golang&#39;s exec packaqe", "body": "<p>Approach 1: Simple HTTP server and client</p>\n\n<p>Approach 2: Local socket or pipe</p>\n\n<p>Approach 3: Shared memory</p>\n\n<p>Approach 4: GRPC server and client</p>\n\n<p>In fact, I prefer the GRPC method by stream way, it will hold the connection (because of HTTP/2), it's easy, fast and secure. And it's easy moving python node to another machine.</p>\n"}], "owner": {"reputation": 21, "user_id": 7681939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11f7d5d6b6ba20863d6b28ffa0b47b1?s=128&d=identicon&r=PG&f=1", "display_name": "user7681939", "link": "https://stackoverflow.com/users/7681939/user7681939"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 130, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1553135744, "creation_date": 1553125413, "last_edit_date": 1553125775, "question_id": 55271734, "link": "https://stackoverflow.com/questions/55271734/speed-up-access-to-python-programs-from-golangs-exec-packaqe", "title": "Speed up access to python programs from Golang&#39;s exec packaqe", "body": "<p>I need suggestions on how to speed up access to python programs when called from Golang.  I really need fast access time (very low latency).</p>\n\n<p>Approach 1:<br>\nfunc main() {<br>\n...<br>\n...<br>\n        cmd = exec.Command(\"python\", \"test.py\")<br>\n        o, err = cmd.CombinedOutput()<br>\n...<br>\n}</p>\n\n<p>If my test.py file is a basic print \"HelloWorld\" program, the execution time is over 50ms.  I assume most of the time is for loading the shell and python in memory.</p>\n\n<p>Approach 2:\nThe above approach can be speeded up substantially by having python start a HTTP server and then gaving the Go code POST a HTTP request and get the response from the HTTP server (python).  Speeds up response times to less than 5ms.\nI guess the main reason for this is probably because the python interpretor is already loaded and warm in memory.</p>\n\n<p>Are there other approaches I can use similar to approach 2 (shared memory, etc.) which could speed up the response from my python code?.  Our application requires extremely low latency and the 50 ms I am currently seeing from using Golang's exec package is not going to cut it.</p>\n\n<p>thanks,</p>\n"}, {"tags": ["python", "file", "dictionary", "analysis"], "comments": [{"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 1, "creation_date": 1553125995, "post_id": 55271728, "comment_id": 97274838, "body": "Welcome to SO. Please take the time to read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>. It will help you craft solid questions that will hopefully get useful answers. And please...no screeenshots.  Lastly, you need to demonstrate the code you&#39;ve written to address your specific problem."}], "answers": [{"tags": [], "owner": {"reputation": 612, "user_id": 7064043, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xzi00.jpg?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/7064043/tom"}, "is_accepted": false, "score": 0, "last_activity_date": 1553126907, "last_edit_date": 1553126907, "creation_date": 1553126121, "answer_id": 55271846, "question_id": 55271728, "link": "https://stackoverflow.com/questions/55271728/how-to-convert-a-multiple-column-table-into-a-dictionary-in-python/55271846#55271846", "title": "How to convert a multiple column table into a dictionary in python", "body": "<p>Solution using regular expression groups    </p>\n\n<pre><code>import re\n\n# Read File into variable \nfile = \"Name Age Grade Jacob 10 60 John 11 75 Matt 13 81\"\n\n# Match Name, age, Grade\npattern = re.compile(r'([A-z]+)\\s([0-9]+)\\s([0-9]+)')\n\n# Create Dictionary Placeholder\ndictionary = {}\n\n# For each match split groups into separate vars\nfor name, age, grade in re.findall(pattern, file):\n\n    # Add To Dictionary\n    dictionary[name] = {\n        'Age':age,\n        'Grade':grade\n    }\n\nprint(dictionary)\n</code></pre>\n\n<p>Outputs</p>\n\n<pre><code>{'Jacob': {'Age': '10', 'Grade': '60'}, 'John': {'Age': '11', 'Grade': '75'}, 'Matt': {'Age': '13', 'Grade': '81'}}\n</code></pre>\n\n<p>To read text into variable</p>\n\n<pre><code>file = open('textdocument.txt', 'r').read()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 418, "user_id": 6246834, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f57de0f12e63d48466fc6610efa6c2cf?s=128&d=identicon&r=PG", "display_name": "dwagon", "link": "https://stackoverflow.com/users/6246834/dwagon"}, "is_accepted": false, "score": 0, "last_activity_date": 1553126169, "creation_date": 1553126169, "answer_id": 55271851, "question_id": 55271728, "link": "https://stackoverflow.com/questions/55271728/how-to-convert-a-multiple-column-table-into-a-dictionary-in-python/55271851#55271851", "title": "How to convert a multiple column table into a dictionary in python", "body": "<p>The part you are probably missing is the splitting of lines based on whitespace.</p>\n\n<pre><code>data = {}\nwith open('textfile') as fh:\n    for line in fh:\n        name, age, grade = line.split()\n        data[name] = { 'age': age, 'grade': grade}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 11234888, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Rr_ij1B6jxE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf0GRRHzTXChoQYOJprrpczDyBqTw/mo/photo.jpg?sz=128", "display_name": "noclue", "link": "https://stackoverflow.com/users/11234888/noclue"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 100, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1553126907, "creation_date": 1553125356, "last_edit_date": 1553126032, "question_id": 55271728, "link": "https://stackoverflow.com/questions/55271728/how-to-convert-a-multiple-column-table-into-a-dictionary-in-python", "title": "How to convert a multiple column table into a dictionary in python", "body": "<p>Name    Age    Grade</p>\n\n<p>Jacob    10    60</p>\n\n<p>John     11    75</p>\n\n<p>Matt     13    81</p>\n\n<p>If the above were a text file in notepad, how would I convert this into a dictionary of the form: </p>\n\n<pre><code>{'Jacob':{ 'Age': '10', 'Grade': 60}, 'John':{'Age': '11', 'Grade': 75}, 'Matt': {'Age': '13', 'Grade': 81}}\n</code></pre>\n\n<p>In python? </p>\n"}, {"tags": ["python", "psycopg2", "pipfile"], "answers": [{"tags": [], "owner": {"reputation": 171, "user_id": 9397882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/681da978620c83808d40975066912ad0?s=128&d=identicon&r=PG&f=1", "display_name": "Russ Brown", "link": "https://stackoverflow.com/users/9397882/russ-brown"}, "is_accepted": false, "score": 2, "last_activity_date": 1553125733, "creation_date": 1553125733, "answer_id": 55271785, "question_id": 55271712, "link": "https://stackoverflow.com/questions/55271712/why-psycopg2-quoted-in-a-pipfile/55271785#55271785", "title": "Why psycopg2 quoted in a Pipfile", "body": "<p>Any packages that have numbers in them get put in double-quotes.</p>\n"}, {"tags": [], "owner": {"reputation": 195, "user_id": 1612802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7476577bec75b5bd59507e36969dbf1e?s=128&d=identicon&r=PG", "display_name": "Walter Schweitzer", "link": "https://stackoverflow.com/users/1612802/walter-schweitzer"}, "is_accepted": true, "score": 3, "last_activity_date": 1553125749, "creation_date": 1553125749, "answer_id": 55271787, "question_id": 55271712, "link": "https://stackoverflow.com/questions/55271712/why-psycopg2-quoted-in-a-pipfile/55271787#55271787", "title": "Why psycopg2 quoted in a Pipfile", "body": "<p>If this file was generated with:</p>\n\n<pre><code>pipenv\n</code></pre>\n\n<p>Any keys with numbers are quoted.  It doesn't make a functional difference you can remove the quotes if you want to be consistent. </p>\n"}], "owner": {"reputation": 28, "user_id": 5282100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fd528c47b0b9e9c92b68a7fc59d5dbe?s=128&d=identicon&r=PG", "display_name": "Dotty", "link": "https://stackoverflow.com/users/5282100/dotty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "accepted_answer_id": 55271787, "answer_count": 2, "score": 1, "last_activity_date": 1553153610, "creation_date": 1553125272, "last_edit_date": 1553153610, "question_id": 55271712, "link": "https://stackoverflow.com/questions/55271712/why-psycopg2-quoted-in-a-pipfile", "title": "Why psycopg2 quoted in a Pipfile", "body": "<p>my Pipfile looks like </p>\n\n<pre><code>[[source]]\nurl = \"https://pypi.python.org/simple\"\nverify_ssl = true\nname = \"pypi\"\n\n\n[packages]\nDjango = \"*\"\ngunicorn = \"*\"\n\"psycopg2\" = \"*\"\n\n\n[requires]\n# our Dockerfile is based on Python 3.7\npython_version = \"3.7\"\n</code></pre>\n\n<p>it's working well but I have a question concerning the double quotes around \"psycopg2\" that are not present for Django on gunicorn.</p>\n\n<p>Why are they here ?</p>\n\n<p>Thanks for the answer.</p>\n"}, {"tags": ["python", "list", "nested", "list-comprehension", "flatten"], "answers": [{"comments": [{"owner": {"reputation": 9070, "user_id": 6817835, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/8GBAa.jpg?s=128&g=1", "display_name": "gold_cy", "link": "https://stackoverflow.com/users/6817835/gold-cy"}, "edited": false, "score": 0, "creation_date": 1553127201, "post_id": 55271869, "comment_id": 97275131, "body": "this assumes they are ordered in a certain way"}], "tags": [], "owner": {"reputation": 105, "user_id": 9797927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73c7a6cf8897adb82ebadd633c2decbf?s=128&d=identicon&r=PG&f=1", "display_name": "asultan904", "link": "https://stackoverflow.com/users/9797927/asultan904"}, "is_accepted": false, "score": 1, "last_activity_date": 1553126315, "creation_date": 1553126315, "answer_id": 55271869, "question_id": 55271708, "link": "https://stackoverflow.com/questions/55271708/python-keep-outer-list-when-flattening-inner-list/55271869#55271869", "title": "Python: Keep outer list when flattening inner list", "body": "<p>UPDATE:</p>\n\n<pre><code>newlist = [[x[0]] + x[1] if len(x) &gt;= 2 else x for x in final_file]\n</code></pre>\n\n<p>This works</p>\n"}, {"tags": [], "owner": {"reputation": 9070, "user_id": 6817835, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/8GBAa.jpg?s=128&g=1", "display_name": "gold_cy", "link": "https://stackoverflow.com/users/6817835/gold-cy"}, "is_accepted": false, "score": 3, "last_activity_date": 1553127289, "creation_date": 1553127289, "answer_id": 55271974, "question_id": 55271708, "link": "https://stackoverflow.com/questions/55271708/python-keep-outer-list-when-flattening-inner-list/55271974#55271974", "title": "Python: Keep outer list when flattening inner list", "body": "<p>Here is a simple <em>for-loop</em> approach to give you a generic approach.</p>\n\n<pre><code>def unpacker(lists):\n    for list_ in lists:\n        o = []\n        for item in list_:\n            if isinstance(item, list):\n                for i in item:\n                    o.append(i)\n            else:\n                o.append(item)\n        yield o\n</code></pre>\n\n<p>Then you call it --> <code>list(unpacker(l))</code></p>\n"}, {"tags": [], "owner": {"reputation": 322, "user_id": 9214614, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/b1e7C.jpg?s=128&g=1", "display_name": "Bibek Bhandari", "link": "https://stackoverflow.com/users/9214614/bibek-bhandari"}, "is_accepted": false, "score": 0, "last_activity_date": 1553127809, "creation_date": 1553127809, "answer_id": 55272027, "question_id": 55271708, "link": "https://stackoverflow.com/questions/55271708/python-keep-outer-list-when-flattening-inner-list/55272027#55272027", "title": "Python: Keep outer list when flattening inner list", "body": "<pre><code>newlist = ['104', ['YYY', 'LDA', 'BE', 'A &lt;- (m..m+2)']]\n\n\nfinal = []\nfor n in newlist:\n    if type(n) == list:\n        for i in n:\n            final.append(i)\n    else:\n        final.append(n)\n\nprint(final)\n</code></pre>\n\n<p>You can check if the type of the element is list, if yes then use another loop to unpack it and append it to a new list.</p>\n"}, {"tags": [], "owner": {"reputation": 81, "user_id": 10793171, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-udYGnLLYAUg/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gai7pM506MkTsHc_AnPImUArk5JA/mo/photo.jpg?sz=128", "display_name": "smitsy", "link": "https://stackoverflow.com/users/10793171/smitsy"}, "is_accepted": false, "score": 1, "last_activity_date": 1553130458, "creation_date": 1553130458, "answer_id": 55272351, "question_id": 55271708, "link": "https://stackoverflow.com/questions/55271708/python-keep-outer-list-when-flattening-inner-list/55272351#55272351", "title": "Python: Keep outer list when flattening inner list", "body": "<p>If the list in question is;</p>\n\n<pre><code>a = [\n['100', ['ADDRESS', 'START', '100']],\n['. TESTS PC FORWARD ADDRESSING'],\n['. TESTS BASE ADDRESSING'],\n['. TESTS PC BACKWARD ADDRESSING'],\n['100', ['NOW', '+LDB', '#BEGIN', 'load base register']],\n['104', ['XXX', 'BASE', 'BEGIN', 'tell assembler']],\n['104', ['YYY', 'LDA', 'BE', 'A &lt;- (m..m+2)']],\n['107', ['EN', 'RESW', '4']],\n['113', ['BE', 'WORD', '2']],\n['116', ['BEGIN', 'RESW', '1']],\n['119', ['JUNK', 'RESW', '2200']],\n['1ae1', ['THERE', 'RESW', '1']],\n['1ae4', ['ZZZ', 'LDA', 'JUNK']],\n['1ae7', ['MMM', 'STA', 'THERE']],\n['1aea', ['', 'END', 'NOW']],\n]\n</code></pre>\n\n<p>A one-liner:</p>\n\n<pre><code>[sum([sub if isinstance(sub, list) else [sub] for sub in x], []) for x in a]\n</code></pre>\n\n<p>If you want it for just the individual lists, then remove the outer loop;</p>\n\n<pre><code>sum([sub if isinstance(sub, list) else [sub] for sub in a[0]], [])\n</code></pre>\n"}], "owner": {"reputation": 105, "user_id": 9797927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73c7a6cf8897adb82ebadd633c2decbf?s=128&d=identicon&r=PG&f=1", "display_name": "asultan904", "link": "https://stackoverflow.com/users/9797927/asultan904"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 338, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1553130458, "creation_date": 1553125258, "question_id": 55271708, "link": "https://stackoverflow.com/questions/55271708/python-keep-outer-list-when-flattening-inner-list", "title": "Python: Keep outer list when flattening inner list", "body": "<p>I have a list of lists that looks like this. I would like to remove the inner list, and keep the outer list. I do NOT want to flatten the entire thing into a giant list of elements.</p>\n\n<pre><code>['100', ['ADDRESS', 'START', '100']]\n['. TESTS PC FORWARD ADDRESSING']\n['. TESTS BASE ADDRESSING']\n['. TESTS PC BACKWARD ADDRESSING']\n['100', ['NOW', '+LDB', '#BEGIN', 'load base register']]\n['104', ['XXX', 'BASE', 'BEGIN', 'tell assembler']]\n['104', ['YYY', 'LDA', 'BE', 'A &lt;- (m..m+2)']]\n['107', ['EN', 'RESW', '4']]\n['113', ['BE', 'WORD', '2']]\n['116', ['BEGIN', 'RESW', '1']]\n['119', ['JUNK', 'RESW', '2200']]\n['1ae1', ['THERE', 'RESW', '1']]\n['1ae4', ['ZZZ', 'LDA', 'JUNK']]\n['1ae7', ['MMM', 'STA', 'THERE']]\n['1aea', ['', 'END', 'NOW']]\n</code></pre>\n\n<p>What I want is this:</p>\n\n<pre><code>['100', 'ADDRESS', 'START', '100']\n['. TESTS PC FORWARD ADDRESSING']\n['. TESTS BASE ADDRESSING']\n['. TESTS PC BACKWARD ADDRESSING']\n['100', 'NOW', '+LDB', '#BEGIN', 'load base register']\n['104', 'XXX', 'BASE', 'BEGIN', 'tell assembler']\n['104', 'YYY', 'LDA', 'BE', 'A &lt;- (m..m+2)']\n['107', 'EN', 'RESW', '4']\n['113', 'BE', 'WORD', '2']\n['116', 'BEGIN', 'RESW', '1']\n['119', 'JUNK', 'RESW', '2200']\n['1ae1', 'THERE', 'RESW', '1']\n['1ae4', 'ZZZ', 'LDA', 'JUNK']\n['1ae7', 'MMM', 'STA', 'THERE']\n['1aea', '', 'END', 'NOW']\n</code></pre>\n\n<p>My code:\n<code>newlist = [str(sublist[0]) + str(sublist[1:]) for sublist in final_file]\n</code></p>\n\n<p>This code gives me this output, not exactly what I want:</p>\n\n<pre><code>100[['ADDRESS', 'START', '100']]\n. TESTS PC FORWARD ADDRESSING[]\n. TESTS BASE ADDRESSING[]\n. TESTS PC BACKWARD ADDRESSING[]\n100[['NOW', '+LDB', '#BEGIN', 'load base register']]\n104[['XXX', 'BASE', 'BEGIN', 'tell assembler']]\n104[['YYY', 'LDA', 'BE', 'A &lt;- (m..m+2)']]\n107[['EN', 'RESW', '4']]\n113[['BE', 'WORD', '2']]\n116[['BEGIN', 'RESW', '1']]\n119[['JUNK', 'RESW', '2200']]\n1ae1[['THERE', 'RESW', '1']]\n1ae4[['ZZZ', 'LDA', 'JUNK']]\n1ae7[['MMM', 'STA', 'THERE']]\n1aea[['', 'END', 'NOW']]\n</code></pre>\n"}, {"tags": ["python", "visualization", "random-forest"], "answers": [{"tags": [], "owner": {"reputation": 15138, "user_id": 10886420, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bOSxh.png?s=128&g=1", "display_name": "Szymon Maszke", "link": "https://stackoverflow.com/users/10886420/szymon-maszke"}, "is_accepted": false, "score": 0, "last_activity_date": 1553125267, "creation_date": 1553125267, "answer_id": 55271711, "question_id": 55271689, "link": "https://stackoverflow.com/questions/55271689/random-forest-classifier-visualization/55271711#55271711", "title": "random forest classifier visualization", "body": "<p>Your model has to be trained in order to have any representation.</p>\n\n<p>You can do this by issuing <code>fit</code> method like this (substitute your data):</p>\n\n<pre><code>X, y = make_classification(n_samples=1000, n_features=4,\n                           n_informative=2, n_redundant=0,\n                           random_state=0, shuffle=False)\nclf = RandomForestClassifier(n_estimators=100, max_depth=2,\n                             random_state=0)\nclf.fit(X, y)\n</code></pre>\n\n<p>After fitting you can save it as graph</p>\n"}], "owner": {"reputation": 13, "user_id": 9194527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b58bc48996aa2e3ef9f9b899fadde9fb?s=128&d=identicon&r=PG&f=1", "display_name": "RyanB", "link": "https://stackoverflow.com/users/9194527/ryanb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 123, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1553190124, "creation_date": 1553125106, "last_edit_date": 1553190124, "question_id": 55271689, "link": "https://stackoverflow.com/questions/55271689/random-forest-classifier-visualization", "title": "random forest classifier visualization", "body": "<p>i'm trying to visualize the results of my RandomForestClassifier</p>\n\n<p>help me figure out this error</p>\n\n<p>my model is already trained so i don't understand why i'm getting this.</p>\n\n<pre><code>rfc = RandomForestClassifier(n_estimators = 1000)\nfit_rfc = rfc.fit(train_x, train_y)\ndot_data = StringIO()\nexport_graphviz(fit_rfc, out_file = dot_data, feature_names = features, \nfilled = True, rounded=True)\n\ngraph = pydot.graph_from_dot_data(dot_data.getvalue())\nImage(graph[0].create_png())\n\n\nNotFittedError                            Traceback (most recent call last)\n&lt;ipython-input-101-5b7775a2ce71&gt; in &lt;module&gt;\n  1 dot_data = StringIO()\n----&gt; 2 export_graphviz(fit_rfc, out_file = dot_data, feature_names = features, filled = True, rounded=True)\n  3 \n  4 graph = pydot.graph_from_dot_data(dot_data.getvalue())\n  5 Image(graph[0].create_png())\n\n~\\Documents\\Python\\Anaconda\\lib\\site-packages\\sklearn\\tree\\export.py in export_graphviz(decision_tree, out_file, max_depth, feature_names, class_names, label, filled, leaves_parallel, impurity, node_ids, proportion, rotate, rounded, special_characters, precision)\n394                 out_file.write('%d -&gt; %d ;\\n' % (parent, node_id))\n395 \n--&gt; 396     check_is_fitted(decision_tree, 'tree_')\n397     own_file = False\n398     return_string = False\n\n~\\Documents\\Python\\Anaconda\\lib\\site-packages\\sklearn\\utils\\validation.py in check_is_fitted(estimator, attributes, msg, all_or_any)\n949 \n950     if not all_or_any([hasattr(estimator, attr) for attr in attributes]):\n--&gt; 951         raise NotFittedError(msg % {'name': type(estimator).__name__})\n952 \n953 \n\nNotFittedError: This RandomForestClassifier instance is not fitted yet. Call 'fit' with appropriate arguments before using this method.\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "string", "binary"], "comments": [{"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1553125054, "post_id": 55271657, "comment_id": 97274576, "body": "How is that number stored? As a regular int?"}, {"owner": {"reputation": 12260, "user_id": 1730895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6abb0b52473d614852289b49ccf3c3c?s=128&d=identicon&r=PG", "display_name": "Kingsley", "link": "https://stackoverflow.com/users/1730895/kingsley"}, "edited": false, "score": 0, "creation_date": 1553125092, "post_id": 55271657, "comment_id": 97274583, "body": "Your question is confused, <code>str()</code> of <code>00001011</code> will give &quot;1011&quot; not &quot;11&quot;.  Is this a typo?  Anyway, your number is not what you think it is.  If you wish to preserve those leading zeroes, the number needs to be kept in a string representation."}, {"owner": {"reputation": 9, "user_id": 10838245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f14f32998ef9ed9a231a83e8543cfff9?s=128&d=identicon&r=PG&f=1", "display_name": "Zero", "link": "https://stackoverflow.com/users/10838245/zero"}, "edited": false, "score": 0, "creation_date": 1553125222, "post_id": 55271657, "comment_id": 97274630, "body": "I do not want to preserve zeros. I want to count the number of  &#39;1&#39;s for a given number, which in this case, is input as a binary number. And yes, I checked it a number of times, str(num) gives &quot;11&quot; instead of &quot;1011&quot; . Also, the binary number is given as an integer."}, {"owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "reply_to_user": {"reputation": 12260, "user_id": 1730895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6abb0b52473d614852289b49ccf3c3c?s=128&d=identicon&r=PG", "display_name": "Kingsley", "link": "https://stackoverflow.com/users/1730895/kingsley"}, "edited": false, "score": 0, "creation_date": 1553125230, "post_id": 55271657, "comment_id": 97274632, "body": "@Kingsley Actually <code>str(00001011)</code> will give <code>&#39;521&#39;</code> due to it being an octal number literal."}, {"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 1, "creation_date": 1553125289, "post_id": 55271657, "comment_id": 97274648, "body": "@blsing Python 3 doesn&#39;t seem to support octal literals, so this would actually give an error if it was in a context where octals were involved afaik. Unless that&#39;s just my version of Python."}, {"owner": {"reputation": 273, "user_id": 8893637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7b1148e19a6ae1eb8c9b45e91bbab0b?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Reder", "link": "https://stackoverflow.com/users/8893637/erik-reder"}, "edited": false, "score": 0, "creation_date": 1553125362, "post_id": 55271657, "comment_id": 97274668, "body": "1011 is the binary representation of 11 as decimal. Probably the str() implicitly converts the binary number to a decimal first. Why not just declare the whole value as String literal initially, like &#39;xxxxxx&#39;?!"}, {"owner": {"reputation": 12260, "user_id": 1730895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6abb0b52473d614852289b49ccf3c3c?s=128&d=identicon&r=PG", "display_name": "Kingsley", "link": "https://stackoverflow.com/users/1730895/kingsley"}, "reply_to_user": {"reputation": 273, "user_id": 8893637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7b1148e19a6ae1eb8c9b45e91bbab0b?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Reder", "link": "https://stackoverflow.com/users/8893637/erik-reder"}, "edited": false, "score": 0, "creation_date": 1553125509, "post_id": 55271657, "comment_id": 97274702, "body": "@ErikReder - Yes, that&#39;s it.  The OP should state: <code>0b000000000000001011</code>."}, {"owner": {"reputation": 12260, "user_id": 1730895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6abb0b52473d614852289b49ccf3c3c?s=128&d=identicon&r=PG", "display_name": "Kingsley", "link": "https://stackoverflow.com/users/1730895/kingsley"}, "reply_to_user": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "edited": false, "score": 0, "creation_date": 1553125568, "post_id": 55271657, "comment_id": 97274714, "body": "@blhsing - Good point, this is a valid Python 2.x octal literal."}], "answers": [{"tags": [], "owner": {"reputation": 12260, "user_id": 1730895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6abb0b52473d614852289b49ccf3c3c?s=128&d=identicon&r=PG", "display_name": "Kingsley", "link": "https://stackoverflow.com/users/1730895/kingsley"}, "is_accepted": false, "score": 0, "last_activity_date": 1553127117, "last_edit_date": 1553127117, "creation_date": 1553126815, "answer_id": 55271931, "question_id": 55271657, "link": "https://stackoverflow.com/questions/55271657/why-does-strnum-for-binary-number-return-only-specific-digits-as-string/55271931#55271931", "title": "Why does str(num) for binary number return only specific digits as string?", "body": "<p>There's a couple of things at play here.</p>\n\n<p>First, when the number is input, it is converted from string to integer format with the number-system specified (or that's my understanding from the question anyway):</p>\n\n<pre><code>number = int( user_input_str, 2 )  # user_input_str given in binary\n</code></pre>\n\n<p>But once it's stored internally, extraneous digits (for all intents and purposes) are now gone.</p>\n\n<p>To iterate over the digits, you'd need to convert it back to a binary string:</p>\n\n<pre><code>number_str = '{0:b}'.format( number ).zfill( 18 )\n</code></pre>\n\n<p>or without leading zeros:</p>\n\n<pre><code>number_str = '{0:b}'.format( number )\n</code></pre>\n\n<p>This can then be iterated over easily:</p>\n\n<pre><code>for digit in number_str:\n    # do whatever with each digit\n</code></pre>\n\n<p>Failing all that, just iterate over the user's input without the in-between conversion steps.</p>\n"}], "owner": {"reputation": 9, "user_id": 10838245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f14f32998ef9ed9a231a83e8543cfff9?s=128&d=identicon&r=PG&f=1", "display_name": "Zero", "link": "https://stackoverflow.com/users/10838245/zero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1553149099, "creation_date": 1553124845, "last_edit_date": 1553149099, "question_id": 55271657, "link": "https://stackoverflow.com/questions/55271657/why-does-strnum-for-binary-number-return-only-specific-digits-as-string", "title": "Why does str(num) for binary number return only specific digits as string?", "body": "<p>I have a number 000000000000001011 and I want to iterate over this. I used str(num) to iterate over it but it returns '11' as output string. Why does this happen?</p>\n"}, {"tags": ["python", "pygame"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 11234866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ef2729cf6e2f9889c5cf3b3bc2e5678?s=128&d=identicon&r=PG&f=1", "display_name": "JayMBH", "link": "https://stackoverflow.com/users/11234866/jaymbh"}, "edited": false, "score": 0, "creation_date": 1553188362, "post_id": 55271716, "comment_id": 97301528, "body": "That just responded with the error: introLoop() argument after * must be an iterable, not bool"}], "tags": [], "owner": {"reputation": 495, "user_id": 8303150, "user_type": "registered", "profile_image": "https://graph.facebook.com/1647258158642306/picture?type=large", "display_name": "Jack Walsh", "link": "https://stackoverflow.com/users/8303150/jack-walsh"}, "is_accepted": false, "score": 0, "last_activity_date": 1553125299, "creation_date": 1553125299, "answer_id": 55271716, "question_id": 55271655, "link": "https://stackoverflow.com/questions/55271655/why-is-this-pygame-program-not-working-so-when-i-hover-over-the-computer-screen/55271716#55271716", "title": "Why is this pygame program not working so when I hover over the computer screen it turns blue?", "body": "<p>Try passing intro directly into the <code>introLoop</code> function. Pass arguments into the thread with the <code>args</code> parameter...</p>\n\n<pre><code>introThread = threading.Thread(target=introLoop, args=(intro))\n</code></pre>\n\n<p>You will also have to redefine the function as well:</p>\n\n<pre><code>def introLoop(intro):\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "is_accepted": false, "score": 1, "last_activity_date": 1553194053, "creation_date": 1553194053, "answer_id": 55287336, "question_id": 55271655, "link": "https://stackoverflow.com/questions/55271655/why-is-this-pygame-program-not-working-so-when-i-hover-over-the-computer-screen/55287336#55287336", "title": "Why is this pygame program not working so when I hover over the computer screen it turns blue?", "body": "<p>To use multithreading in PyGame, you've to consider 2 things:</p>\n\n<ol>\n<li><p>Process an event loop in the main thread</p></li>\n<li><p>Do all the drawing on and the update of the window in a single thread. If there is an \"intro\" thread and a \"game\" thread, then the \"intro\" thread has to terminate first, before the \"game\" thread can start.</p></li>\n</ol>\n\n<p>In the main thread (program) you've to declare the threads and to initialize the control (state) variables. Start the \"intro\" thread immediately and run the event loop.<br>\nI recommend to implement at least the <code>pygame.QUIT</code>, which signals that the program has to be terminated (<code>run = False</code>).<br>\nFurther it can be continuously checked if the mouse is in the start area (<code>inStartRect = startRectArea.collidepoint(*pygame.mouse.get_pos())</code>):</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>introThread = threading.Thread(target = introLoop)\ngameThread = threading.Thread(target = gameLoop)\n\nrun = True\nintro = True\ninStartRect = False\nstartRectArea = pygame.Rect(279, 276, 220, 128) \n\nintroThread.start()\n\nwhile run:\n    if intro:\n        inStartRect = startRectArea.collidepoint(*pygame.mouse.get_pos())\n    for event in pygame.event.get():\n        if event.type == pygame.QUIT:\n            run = False\n        elif event.type == pygame.MOUSEBUTTONDOWN and inStartRect:\n            intro = False\n</code></pre>\n\n<p>In the intro thread the entire intro screen has to be drawn, including the background and the blue start area. If the intro is finished (the game is started), then at the end of the intro thread the main game loop is started: </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def introLoop():\n\n    i = 0\n    while run and intro:\n        clock.tick(8)\n\n        filename = \"introScreen/\" + str(i) + \".gif\"\n        i = i+1 if i &lt; 26 else 0\n\n        introScreen = pygame.image.load(filename)\n        introScreen = pygame.transform.scale(introScreen, (width, height))\n\n        screen.blit(introScreen, (30, 30))\n        if inStartRect:\n            pygame.draw.rect(screen, blue, (279, 276, 220, 128), 0)\n        pygame.display.flip()\n\n    gameThread.start()\n</code></pre>\n\n<p>The game thread starts, when the intro thread terminates. So the game thread can do the drawing of the game scene:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def gameLoop(): \n\n    while run:\n        clock.tick(60)\n\n        screen.fill(red)\n\n        # [...]\n\n        pygame.display.flip()\n        clock.tick(60)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 8797080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41736a6ec56c9829242a1f292fc2b421?s=128&d=identicon&r=PG&f=1", "display_name": "P3tray", "link": "https://stackoverflow.com/users/8797080/p3tray"}, "is_accepted": false, "score": 0, "last_activity_date": 1553290902, "last_edit_date": 1553290902, "creation_date": 1553284745, "answer_id": 55307007, "question_id": 55271655, "link": "https://stackoverflow.com/questions/55271655/why-is-this-pygame-program-not-working-so-when-i-hover-over-the-computer-screen/55307007#55307007", "title": "Why is this pygame program not working so when I hover over the computer screen it turns blue?", "body": "<p>Try converting the images you want to load with <code>.convert()</code></p>\n\n<pre><code>pygame.image.load(\"image file path\").convert()\n</code></pre>\n\n<p>Or try converting the image to an image with <code>.convert_alpha()</code></p>\n\n<pre><code>pygame.image.load(\"image file path\").convert_alpha()\n</code></pre>\n\n<p>Pygame finds it MUCH easier and faster to load images that are converted with <code>.convert()</code>, and with <code>.convert_alpha()</code> it converts the images with their alpha layers (E.G. Transparency...) Hope this helps!</p>\n\n<p>for more information, see these google results:</p>\n\n<p><a href=\"https://www.google.com/search?q=pygame.image.load%20alpha&amp;rlz=1C1CHBF_enGB824GB824&amp;oq=pygame.image.load%20alpha&amp;aqs=chrome..69i57.6455j0j7&amp;sourceid=chrome&amp;ie=UTF-8\" rel=\"nofollow noreferrer\">I recommend the first link, although this link is pretty pointless</a></p>\n"}], "owner": {"reputation": 11, "user_id": 11234866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ef2729cf6e2f9889c5cf3b3bc2e5678?s=128&d=identicon&r=PG&f=1", "display_name": "JayMBH", "link": "https://stackoverflow.com/users/11234866/jaymbh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1553290902, "creation_date": 1553124811, "question_id": 55271655, "link": "https://stackoverflow.com/questions/55271655/why-is-this-pygame-program-not-working-so-when-i-hover-over-the-computer-screen", "title": "Why is this pygame program not working so when I hover over the computer screen it turns blue?", "body": "<p>Hello I am quite new to pygame and I am trying to make an intro for a game where the user hovers over the computer screen and the screen then turns blue so indicate that when you press it the game will start. However, the blue rect simply isn't showing up?\nBy the way, the introScreen is a like a gif but constructed from many different frames.</p>\n\n<p>This is my code:</p>\n\n<pre><code>import pygame\nimport pygame.gfxdraw\nimport threading\n\npygame.init()\n\nwidth = 800\nheight = 600\nfps = 30\nclock = pygame.time.Clock()\n\nwhite = (255, 255, 255)\nblack = (0, 0, 0)\nred = (255, 0, 0)\ngreen = (0, 255, 0)\nblue = (0, 0, 255)\n\nscreen = pygame.display.set_mode((width, height))\n\ndef introLoop():\n\n    while intro:\n\n        for i in range(0, 26):\n\n            clock.tick(8)\n\n            i = str(i)\n\n            introScreen = pygame.image.load(\"introScreen/\" + i + \".gif\")\n            introScreen = pygame.transform.scale(introScreen, (width, height))\n\n            screen.blit(introScreen, (30, 30))\n\n            pygame.display.flip()\n\ndef gameLoop(): \n\n    while intro:\n\n        mouseX, mouseY = pygame.mouse.get_pos()\n        startRectArea = pygame.Rect(279, 276, 220, 128) \n\n        if startRectArea.collidepoint(mouseX, mouseY):\n\n            StartRect = pygame.draw.rect(screen, blue, (279, 276, 220, 128), 0)\n\n            pygame.display.update()\n\n    for event in pygame.event.get():\n\n        holder = 0\n\n\n\nintroThread = threading.Thread(target = introLoop)\ngameThread = threading.Thread(target = gameLoop)\n\nintro = True\n\nintroThread.start()\ngameThread.start()\n</code></pre>\n\n<p>There is no error message it just doesn't display the blue rect?\nPlease help as I need this for a school project.</p>\n"}, {"tags": ["python", "google-oauth", "google-photos"], "comments": [{"owner": {"reputation": 744, "user_id": 7370834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Kkm5n.jpg?s=128&g=1", "display_name": "Dmitrii", "link": "https://stackoverflow.com/users/7370834/dmitrii"}, "edited": false, "score": 0, "creation_date": 1553124970, "post_id": 55271652, "comment_id": 97274556, "body": "You can read it here: <a href=\"https://stackoverflow.com/questions/55224403/how-to-convert-postman-oauth-2-0-to-python/55224873#55224873\" title=\"how to convert postman oauth 2 0 to python\">stackoverflow.com/questions/55224403/&hellip;</a>"}, {"owner": {"reputation": 744, "user_id": 7370834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Kkm5n.jpg?s=128&g=1", "display_name": "Dmitrii", "link": "https://stackoverflow.com/users/7370834/dmitrii"}, "edited": false, "score": 0, "creation_date": 1553125221, "post_id": 55271652, "comment_id": 97274629, "body": "Redirect uses in apps, when they use google to auth clients. OAuth2 provides an option to obtain token manually, that is what u need."}, {"owner": {"reputation": 18863, "user_id": 1000753, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/23634e7a38e353cca12bb72a4205615b?s=128&d=identicon&r=PG", "display_name": "pinoyyid", "link": "https://stackoverflow.com/users/1000753/pinoyyid"}, "edited": false, "score": 0, "creation_date": 1553132682, "post_id": 55271652, "comment_id": 97276298, "body": "if you only want to upload to your own Photos account, then there is no need to write any code to perform the auth flow. You can obtain a Refresh Token using the OAuth playground. See <a href=\"https://stackoverflow.com/questions/19766912/how-do-i-authorise-an-app-web-or-installed-without-user-intervention\" title=\"how do i authorise an app web or installed without user intervention\">stackoverflow.com/questions/19766912/&hellip;</a>"}], "owner": {"reputation": 56, "user_id": 11234824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5995e8b142ee59d489c94ec353adb2dc?s=128&d=identicon&r=PG&f=1", "display_name": "Dorish", "link": "https://stackoverflow.com/users/11234824/dorish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 276, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1554475020, "creation_date": 1553124787, "last_edit_date": 1554475020, "question_id": 55271652, "link": "https://stackoverflow.com/questions/55271652/uploading-to-google-photos-using-oauth2-in-python", "title": "Uploading to google photos using OAuth2 in python", "body": "<p>First post in SO. Sorry if I ask dumb questions.</p>\n\n<p>I want to upload photos from my computer to google photos.</p>\n\n<p>Alas, I cannot find my feet and hands in the API. The <a href=\"https://developers.google.com/api-client-library/python/guide/aaa_oauth\" rel=\"nofollow noreferrer\">OAuth 2.0 help page</a> suggest to do it with a json, like so: </p>\n\n<pre><code>from oauth2client.client import flow_from_clientsecrets\n\nflow = flow_from_clientsecrets('path_to_directory/client_secrets.json',\n        scope='https://www.googleapis.com/auth/calendar', \n        redirect_uri='http://example.com/auth_return')\n</code></pre>\n\n<p>And I understand it demands to open a browser and get the reply in the redirection (which of course doesn't happen in my case)</p>\n\n<p>My questions:</p>\n\n<ol>\n<li>Is there a way to do it in a headless machine?</li>\n<li>Assuming all I want is to use my local machine, and I don't own a DNS, what address should I use for the redirection?</li>\n<li>Does anyone have a reference code to use? </li>\n</ol>\n\n<p><strong>++++ Edit ++++</strong></p>\n\n<p>Thanks for the good people and their good answers, I managed to go half the way :-)</p>\n\n<p>I can run <a href=\"https://developers.google.com/drive/api/v3/quickstart/python\" rel=\"nofollow noreferrer\">this</a> example, and list my 10 first files in drive.\nThe problem appears when I call the build command.\nOriginal line says:</p>\n\n<pre><code>from googleapiclient.discovery import build\nservice = build('drive', 'v3', credentials=creds)\n</code></pre>\n\n<p>And <a href=\"https://developers.google.com/api-client-library/python/apis/\" rel=\"nofollow noreferrer\">this</a> page lists all kind of APIs, missing the photos / picasa / whatever to make the photos be uploaded :-\\</p>\n\n<p>Any idea ?</p>\n"}, {"tags": ["python", "loops", "for-loop"], "comments": [{"owner": {"reputation": 17, "user_id": 10587604, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-WJ_jgtrk6KM/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAl2V5bzAhalOc_EpwXc6XxtpElBg/mo/photo.jpg?sz=128", "display_name": "Kernel Pource", "link": "https://stackoverflow.com/users/10587604/kernel-pource"}, "reply_to_user": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1553125050, "post_id": 55271650, "comment_id": 97274575, "body": "@Carcigenicate Exactly what I was looking for, thanks!"}, {"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1553125089, "post_id": 55271650, "comment_id": 97274582, "body": "Then see the answer. I only posted a comment because I wasn&#39;t sure if that&#39;s what you were asking. They give more detail."}], "answers": [{"tags": [], "owner": {"reputation": 12014, "user_id": 1658617, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/ba6gt.jpg?s=128&g=1", "display_name": "Bharel", "link": "https://stackoverflow.com/users/1658617/bharel"}, "is_accepted": false, "score": 1, "last_activity_date": 1553124959, "creation_date": 1553124959, "answer_id": 55271675, "question_id": 55271650, "link": "https://stackoverflow.com/questions/55271650/ranges-in-for-loop-off-by-1/55271675#55271675", "title": "Ranges in for loop off by 1?", "body": "<p><a href=\"https://docs.python.org/3/library/functions.html#len\" rel=\"nofollow noreferrer\"><code>len()</code></a> returns the actual length of the string. Think of it, a string with length 0 (<code>\"\"</code>) also exists.</p>\n\n<p>The last value of <a href=\"https://docs.python.org/3/library/functions.html#func-range\" rel=\"nofollow noreferrer\"><code>range(start, end)</code></a> is <code>end-1</code>. The number 2 is in the range of <code>1-3</code> and the number 3 in the range of <code>3-5</code>. Inclusive bottom and exclusive upper bound.</p>\n"}, {"tags": [], "owner": {"reputation": 409, "user_id": 1575387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec974a7a058d9524031a227c1b596db4?s=128&d=identicon&r=PG", "display_name": "Bridgette", "link": "https://stackoverflow.com/users/1575387/bridgette"}, "is_accepted": false, "score": 1, "last_activity_date": 1553125490, "creation_date": 1553125490, "answer_id": 55271744, "question_id": 55271650, "link": "https://stackoverflow.com/questions/55271650/ranges-in-for-loop-off-by-1/55271744#55271744", "title": "Ranges in for loop off by 1?", "body": "<p>It's best to separate the concepts of <em>indexes</em> (the positions of objects in a list) and <em>length</em> (how many there are). Here's the doc of <a href=\"https://docs.python.org/3/library/functions.html#len\" rel=\"nofollow noreferrer\">len(s)</a> in Python.</p>\n\n<p><a href=\"https://docs.python.org/3/library/stdtypes.html#typesseq-range\" rel=\"nofollow noreferrer\">range(start, stop)</a> in Python includes the start and excludes the stop parameter. In mathematical notation, [start, stop). Therefore range(0,3) will check 0, 1, 2.</p>\n"}, {"tags": [], "owner": {"reputation": 171, "user_id": 9397882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/681da978620c83808d40975066912ad0?s=128&d=identicon&r=PG&f=1", "display_name": "Russ Brown", "link": "https://stackoverflow.com/users/9397882/russ-brown"}, "is_accepted": false, "score": 0, "last_activity_date": 1553125504, "creation_date": 1553125504, "answer_id": 55271746, "question_id": 55271650, "link": "https://stackoverflow.com/questions/55271650/ranges-in-for-loop-off-by-1/55271746#55271746", "title": "Ranges in for loop off by 1?", "body": "<p>The <code>len</code> function returns the number of objects in a list.\ni.e. </p>\n\n<pre><code>&gt;&gt;&gt; len([1, 2, 3])\n3\n</code></pre>\n\n<p><code>range(0, 3)</code> produces 0, 1, 2 and hence only checks the first three numbers.</p>\n\n<pre><code>&gt;&gt;&gt; for i in range(0, 3):\n...     print(i)\n... \n0\n1\n2\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3047, "user_id": 10388629, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/My8T3.png?s=128&g=1", "display_name": "Pika the Master of the Whales", "link": "https://stackoverflow.com/users/10388629/pika-the-master-of-the-whales"}, "is_accepted": false, "score": 0, "last_activity_date": 1553127144, "creation_date": 1553127144, "answer_id": 55271960, "question_id": 55271650, "link": "https://stackoverflow.com/questions/55271650/ranges-in-for-loop-off-by-1/55271960#55271960", "title": "Ranges in for loop off by 1?", "body": "<p>You're getting list indexing, the <code>len</code> function, and the <code>range</code> function confused.</p>\n\n<p>List indexing starts at 0 and increases for each element. The 13th element in a list is at index 12, and would be accessed with <code>text[12]</code>.</p>\n\n<p>The <code>len</code> function, on the other hand, returns the actual length of the list. The length of a 2-element is, of course, 2, and that's what <code>len</code> would return. In your example, the text is 13 characters long. <code>len</code> returns 13, but the last index of the text would be at <code>text[12]</code>.</p>\n\n<p>The <code>range</code> function is <em>inclusive</em> of the starting value and <em>exclusive</em> of the ending value. In your example of <code>range(0, 3)</code>, it checks the items at locations 0, 1, and 2, <em>not</em> 0, 1, 2, and 3. If you want to check the first four numbers, use <code>range(0, 4)</code> instead, which will check the elements at list indexes 0, 1, 2, and 3, which are also the first, second, third, and fourth elements in the string.</p>\n"}], "owner": {"reputation": 17, "user_id": 10587604, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-WJ_jgtrk6KM/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAl2V5bzAhalOc_EpwXc6XxtpElBg/mo/photo.jpg?sz=128", "display_name": "Kernel Pource", "link": "https://stackoverflow.com/users/10587604/kernel-pource"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1553127144, "creation_date": 1553124780, "question_id": 55271650, "link": "https://stackoverflow.com/questions/55271650/ranges-in-for-loop-off-by-1", "title": "Ranges in for loop off by 1?", "body": "<p>I'm working through the book automating the boring stuff with python and came across this code he wrote to find phone numbers within a document.</p>\n\n<p>The format of phone numbers is (12 characters): 123-456-7890</p>\n\n<p>Why does the code check if length of text is 12? but doesn't python count from 0 and so it'll look for a length of 13?</p>\n\n<p>Similarly,\nhe wants to check if the first three digits are numbers but he uses a range(0, 3). Doesn't this check the first 4 digits including a hyphen which is not a number?</p>\n\n<p>Thanks for the help.</p>\n\n<pre><code>def isPhoneNumber(text):\n    if len(text) != 12:\n        return False\n    for i in range(0, 3):\n        if not text[i].isdecimal():\n            return False\n    if text[3] != '-':\n        return False\n    for i in range(4, 7):\n        if not text[i].isdecimal():\n            return False\n    if text[7] != '-':\n        return False\n    for i in range(8, 12):\n        if not text[i].isdecimal():\n           return False\n    return True\n</code></pre>\n"}, {"tags": ["python", "pandas", "pivot-table"], "owner": {"reputation": 13, "user_id": 9169957, "user_type": "registered", "profile_image": "https://graph.facebook.com/1159760174059649/picture?type=large", "display_name": "Diego Meira", "link": "https://stackoverflow.com/users/9169957/diego-meira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1553124750, "creation_date": 1553124750, "question_id": 55271642, "link": "https://stackoverflow.com/questions/55271642/pandas-pivot-table-with-link-in-each-column-and-row-to-html", "title": "Pandas Pivot_Table with link in each column and row (to_html)", "body": "<p>I would like create links for each column/row of a pandas pivot_table that I return from Flask with to_html funcion.</p>\n\n<p>For example:</p>\n\n<p><a href=\"https://i.stack.imgur.com/zeTYZ.png\" rel=\"nofollow noreferrer\">In each column/row I need a link with the month and branch to return the details</a></p>\n\n<p>My code:</p>\n\n<pre><code> dfResult = pd.pivot_table(df1, \n                        #columns=['Branch'],\n                        values=['Vessels Count'],\n                        columns=['Branch'],\n                        index=['Month'], \n                        aggfunc=np.sum,\n                        margins=True,\n                        margins_name='Total',                        \n                        fill_value=0).astype(np.float64).round(2).T\n\n    return(dfResult.to_html(classes='mystyle'))\n</code></pre>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["python", "arrays", "numpy"], "comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1553134109, "post_id": 55271636, "comment_id": 97276596, "body": "If all the arrays in the list have the same shape, then <code>stack</code> will work.  But since they differ, it&#39;s impossible to create a 2d array from them.  I&#39;d advise checking the shapes, <code>[a.shape for a in yourlist]</code> to see which differ.  Is that difference intentional, or an accident."}, {"owner": {"reputation": 13, "user_id": 11234829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fedd8e7f8e905243cac58c8f23c46626?s=128&d=identicon&r=PG&f=1", "display_name": "applecidar", "link": "https://stackoverflow.com/users/11234829/applecidar"}, "reply_to_user": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1553162309, "post_id": 55271636, "comment_id": 97285515, "body": "Thanks one element in an array was a nan."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 11234829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fedd8e7f8e905243cac58c8f23c46626?s=128&d=identicon&r=PG&f=1", "display_name": "applecidar", "link": "https://stackoverflow.com/users/11234829/applecidar"}, "edited": false, "score": 0, "creation_date": 1553125297, "post_id": 55271683, "comment_id": 97274651, "body": "Actually I tried np.stack, it didn&#39;t work either. Please see my edited question. Thanks"}, {"owner": {"reputation": 8342, "user_id": 6942527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d97c46958116a2a923d03f109876355?s=128&d=identicon&r=PG&f=1", "display_name": "busybear", "link": "https://stackoverflow.com/users/6942527/busybear"}, "edited": false, "score": 0, "creation_date": 1553125937, "post_id": 55271683, "comment_id": 97274820, "body": "This solution works in my hands given the list of two arrays you provide."}, {"owner": {"reputation": 13, "user_id": 11234829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fedd8e7f8e905243cac58c8f23c46626?s=128&d=identicon&r=PG&f=1", "display_name": "applecidar", "link": "https://stackoverflow.com/users/11234829/applecidar"}, "edited": false, "score": 0, "creation_date": 1553162342, "post_id": 55271683, "comment_id": 97285539, "body": "Thank you one element in an array was a nan. It worked after I removed it."}], "tags": [], "owner": {"reputation": 56, "user_id": 11234824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5995e8b142ee59d489c94ec353adb2dc?s=128&d=identicon&r=PG&f=1", "display_name": "Dorish", "link": "https://stackoverflow.com/users/11234824/dorish"}, "is_accepted": true, "score": 1, "last_activity_date": 1553125042, "creation_date": 1553125042, "answer_id": 55271683, "question_id": 55271636, "link": "https://stackoverflow.com/questions/55271636/python-convert-list-of-numpy-array-to-2d-array/55271683#55271683", "title": "Python convert list of numpy array to 2d array", "body": "<p>Not sure if this is what you ask for, but let's try [iPython]:</p>\n\n<pre><code>In [1]: import numpy as np\n   ...: a = np.stack([np.array([1,2,3]), np.array([11,12,13])])\n   ...: print a.shape\n   ...: print a\n   ...: \n(2, 3)\n[[ 1  2  3]\n [11 12 13]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 35, "user_id": 7982622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1b61dcaec1b1a3c2f84607e7bc691a8?s=128&d=identicon&r=PG&f=1", "display_name": "Reuel Dsilva", "link": "https://stackoverflow.com/users/7982622/reuel-dsilva"}, "is_accepted": false, "score": 0, "last_activity_date": 1553125310, "creation_date": 1553125310, "answer_id": 55271718, "question_id": 55271636, "link": "https://stackoverflow.com/questions/55271636/python-convert-list-of-numpy-array-to-2d-array/55271718#55271718", "title": "Python convert list of numpy array to 2d array", "body": "<p>You can try to use <code>np.asarray()</code></p>\n\n<p>Here's an example:</p>\n\n<pre><code>&gt;&gt;&gt; import numpy as np\n&gt;&gt;&gt; a = np.arange(6) + 10\n&gt;&gt;&gt; a\narray([10, 11, 12, 13, 14, 15])\n&gt;&gt;&gt; b = np.arange(6) + 20\n&gt;&gt;&gt; b\narray([20, 21, 22, 23, 24, 25])\n&gt;&gt;&gt; c = [a, b]\n&gt;&gt;&gt; c\n[array([10, 11, 12, 13, 14, 15]), array([20, 21, 22, 23, 24, 25])]\n&gt;&gt;&gt; e = np.asarray(c)\n&gt;&gt;&gt; e\narray([[10, 11, 12, 13, 14, 15],\n       [20, 21, 22, 23, 24, 25]])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1807, "user_id": 6947349, "user_type": "registered", "profile_image": "https://graph.facebook.com/1682570098663073/picture?type=large", "display_name": "Samuel Nde", "link": "https://stackoverflow.com/users/6947349/samuel-nde"}, "is_accepted": false, "score": 0, "last_activity_date": 1553126704, "last_edit_date": 1553126704, "creation_date": 1553125535, "answer_id": 55271756, "question_id": 55271636, "link": "https://stackoverflow.com/questions/55271636/python-convert-list-of-numpy-array-to-2d-array/55271756#55271756", "title": "Python convert list of numpy array to 2d array", "body": "<p>Let us define <code>u</code> as follows:</p>\n\n<pre><code>import numpy as np\nu = [np.array(range(24)),np.array(range(24))]\nu\n&gt;&gt;&gt;[array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10]), array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9])]\n</code></pre>\n\n<p>I would then use <code>list comprehension</code> to convert u to a list of list as follows.</p>\n\n<pre><code>v = [val.tolist() for val in u]\n\nprint(v)\n\n&gt;&gt;&gt; [[0, 1, 2, 3, 4, 5, 6, 7, 8, 9], [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 131, "user_id": 11229511, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-6YJnZkPkOD0/AAAAAAAAAAI/AAAAAAAAAAA/YjfCCww7H30/photo.jpg?sz=128", "display_name": "Hugo Delahaye", "link": "https://stackoverflow.com/users/11229511/hugo-delahaye"}, "is_accepted": false, "score": 0, "last_activity_date": 1553125818, "creation_date": 1553125818, "answer_id": 55271802, "question_id": 55271636, "link": "https://stackoverflow.com/questions/55271636/python-convert-list-of-numpy-array-to-2d-array/55271802#55271802", "title": "Python convert list of numpy array to 2d array", "body": "<p>If I get what you're saying you have a list</p>\n\n<pre><code>l  = [np.array([ 0.33007796, 0.10620873, -0.03484848, -0.168602 , 0.4564025 , 0.11370123, -0.37691383, -0.10863657, -0.16251889, 0.02544368, -0.03327211, 0.23185516, -0.32642304, -0.15969283, 0.45812119, 0.24997875, 0.13897375, 0.01468147, -0.15773412, -0.53704494, -0.06121204, 0.19579619, 0.30438485, 0.05908984, 0.29759387, -1.61107886, -0.55878418, 0.06553798, 0.37648846, -0.35247216, 3.33212613, 0.22318645, -0.21187862, -0.39089783, 0.05294092, -0.0413471 , 0.02179677, 0.25394103, 0.01980207, -0.22377998, -0.08718371, 0.02940335, 0.02797039, 0.34935868, -0.05733391, 0.07754561, -0.0972822 , 0.05259355, -0.0562219 , 0.15573672]),\n      np.array([ 0.20259871, 0.12458311, -0.20787658, -0.16353745, 0.40842594, 0.25567385, -0.2703993 , -0.15097566, -0.13328776, -0.0331789 , 0.02034447, 0.07318579, -0.22284479, -0.19045474, 0.23279801, 0.11366921, 0.11914298, -0.09647366, -0.20951753, -0.22698855, -0.045307 , 0.11098107, 0.0524313 , -0.0424848 , 0.11007177, -1.51343118, -0.36741486, -0.05812052, 0.13435007, -0.09786326, 2.84255649, 0.00325309, -0.27484909, -0.47422259, -0.03957974, -0.13663797, -0.03203189, 0.0155929 , -0.06982855, -0.08388657, -0.16572997, 0.04573543, -0.00667479, 0.21973781, -0.14895521, 0.1210014 , -0.21911705, -0.05924631, -0.07265716, -0.10153842])]\n</code></pre>\n\n<p>Then this should convert it to the format you want :</p>\n\n<pre><code>new_l = [list(i) for i in l]\n</code></pre>\n\n<p>I think that what you're doing wrong is that <code>X_transform</code> is not the full list, but only one of the numpy arrays inside the list, so its elements are floats, not numpy arrays, hence the error raised.</p>\n"}], "owner": {"reputation": 13, "user_id": 11234829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fedd8e7f8e905243cac58c8f23c46626?s=128&d=identicon&r=PG&f=1", "display_name": "applecidar", "link": "https://stackoverflow.com/users/11234829/applecidar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 55271683, "answer_count": 4, "score": 1, "last_activity_date": 1553126704, "creation_date": 1553124720, "last_edit_date": 1553125257, "question_id": 55271636, "link": "https://stackoverflow.com/questions/55271636/python-convert-list-of-numpy-array-to-2d-array", "title": "Python convert list of numpy array to 2d array", "body": "<p>This is my list of numpy array:</p>\n\n<blockquote>\n  <p>[array([ 0.33007796,  0.10620873, -0.03484848, -0.168602  ,  0.4564025\n  ,\n          0.11370123, -0.37691383, -0.10863657, -0.16251889,  0.02544368,\n         -0.03327211,  0.23185516, -0.32642304, -0.15969283,  0.45812119,\n          0.24997875,  0.13897375,  0.01468147, -0.15773412, -0.53704494,\n         -0.06121204,  0.19579619,  0.30438485,  0.05908984,  0.29759387,\n         -1.61107886, -0.55878418,  0.06553798,  0.37648846, -0.35247216,\n          3.33212613,  0.22318645, -0.21187862, -0.39089783,  0.05294092,\n         -0.0413471 ,  0.02179677,  0.25394103,  0.01980207, -0.22377998,\n         -0.08718371,  0.02940335,  0.02797039,  0.34935868, -0.05733391,\n          0.07754561, -0.0972822 ,  0.05259355, -0.0562219 ,  0.15573672])</p>\n  \n  <p>array([ 0.20259871,  0.12458311, -0.20787658, -0.16353745, \n  0.40842594,\n          0.25567385, -0.2703993 , -0.15097566, -0.13328776, -0.0331789 ,\n          0.02034447,  0.07318579, -0.22284479, -0.19045474,  0.23279801,\n          0.11366921,  0.11914298, -0.09647366, -0.20951753, -0.22698855,\n         -0.045307  ,  0.11098107,  0.0524313 , -0.0424848 ,  0.11007177,\n         -1.51343118, -0.36741486, -0.05812052,  0.13435007, -0.09786326,\n          2.84255649,  0.00325309, -0.27484909, -0.47422259, -0.03957974,\n         -0.13663797, -0.03203189,  0.0155929 , -0.06982855, -0.08388657,\n         -0.16572997,  0.04573543, -0.00667479,  0.21973781, -0.14895521,\n          0.1210014 , -0.21911705, -0.05924631, -0.07265716, -0.10153842])]</p>\n</blockquote>\n\n<p>However I want this:</p>\n\n<blockquote>\n  <p>[[ 0.33007796,  0.10620873, -0.03484848, -0.168602  ,  0.4564025\n  ,\n          0.11370123, -0.37691383, -0.10863657, -0.16251889,  0.02544368,\n         -0.03327211,  0.23185516, -0.32642304, -0.15969283,  0.45812119,\n          0.24997875,  0.13897375,  0.01468147, -0.15773412, -0.53704494,\n         -0.06121204,  0.19579619,  0.30438485,  0.05908984,  0.29759387,\n         -1.61107886, -0.55878418,  0.06553798,  0.37648846, -0.35247216,\n          3.33212613,  0.22318645, -0.21187862, -0.39089783,  0.05294092,\n         -0.0413471 ,  0.02179677,  0.25394103,  0.01980207, -0.22377998,\n         -0.08718371,  0.02940335,  0.02797039,  0.34935868, -0.05733391,\n          0.07754561, -0.0972822 ,  0.05259355, -0.0562219 ,  0.15573672]</p>\n  \n  <p>[ 0.20259871,  0.12458311, -0.20787658, -0.16353745, \n  0.40842594,\n          0.25567385, -0.2703993 , -0.15097566, -0.13328776, -0.0331789 ,\n          0.02034447,  0.07318579, -0.22284479, -0.19045474,  0.23279801,\n          0.11366921,  0.11914298, -0.09647366, -0.20951753, -0.22698855,\n         -0.045307  ,  0.11098107,  0.0524313 , -0.0424848 ,  0.11007177,\n         -1.51343118, -0.36741486, -0.05812052,  0.13435007, -0.09786326,\n          2.84255649,  0.00325309, -0.27484909, -0.47422259, -0.03957974,\n         -0.13663797, -0.03203189,  0.0155929 , -0.06982855, -0.08388657,\n         -0.16572997,  0.04573543, -0.00667479,  0.21973781, -0.14895521,\n          0.1210014 , -0.21911705, -0.05924631, -0.07265716, -0.10153842]]</p>\n</blockquote>\n\n<p>What I tried:</p>\n\n<pre><code>X_transform = [list(x) for x in X_transform]\n</code></pre>\n\n<p>But it unfortunately throws: <code>TypeError: 'numpy.float64' object is not iterable</code></p>\n\n<p>I also tried <code>X_transform.tolist()</code> it gives(Not quite what I want):</p>\n\n<blockquote>\n  <p>[array([ 0.33007796,  0.10620873, -0.03484848, -0.168602  ,  0.4564025\n  ,\n          0.11370123, -0.37691383, -0.10863657, -0.16251889,  0.02544368,\n         -0.03327211,  0.23185516, -0.32642304, -0.15969283,  0.45812119,\n          0.24997875,  0.13897375,  0.01468147, -0.15773412, -0.53704494,\n         -0.06121204,  0.19579619,  0.30438485,  0.05908984,  0.29759387,\n         -1.61107886, -0.55878418,  0.06553798,  0.37648846, -0.35247216,\n          3.33212613,  0.22318645, -0.21187862, -0.39089783,  0.05294092,\n         -0.0413471 ,  0.02179677,  0.25394103,  0.01980207, -0.22377998,\n         -0.08718371,  0.02940335,  0.02797039,  0.34935868, -0.05733391,\n          0.07754561, -0.0972822 ,  0.05259355, -0.0562219 ,  0.15573672]),</p>\n  \n  <p>array([ 0.20259871,  0.12458311, -0.20787658, -0.16353745, \n  0.40842594,\n          0.25567385, -0.2703993 , -0.15097566, -0.13328776, -0.0331789 ,\n          0.02034447,  0.07318579, -0.22284479, -0.19045474,  0.23279801,\n          0.11366921,  0.11914298, -0.09647366, -0.20951753, -0.22698855,\n         -0.045307  ,  0.11098107,  0.0524313 , -0.0424848 ,  0.11007177,\n         -1.51343118, -0.36741486, -0.05812052,  0.13435007, -0.09786326,\n          2.84255649,  0.00325309, -0.27484909, -0.47422259, -0.03957974,\n         -0.13663797, -0.03203189,  0.0155929 , -0.06982855, -0.08388657,\n         -0.16572997,  0.04573543, -0.00667479,  0.21973781, -0.14895521,\n          0.1210014 , -0.21911705, -0.05924631, -0.07265716, -0.10153842])]</p>\n</blockquote>\n\n<p>I also tried:</p>\n\n<pre><code>a = []\nfor i in range(1000):\n    a.append([X_transform[i][0]])\n</code></pre>\n\n<p>But it throws <code>IndexError: invalid index to scalar variable.</code></p>\n\n<p>Finally I tried:</p>\n\n<pre><code>X_transform = np.stack(X_transform)\n</code></pre>\n\n<p>It throws: <code>ValueError: all input arrays must have the same shape</code></p>\n"}, {"tags": ["python", "database", "oracle", "insert", "oracle18c"], "comments": [{"owner": {"reputation": 502, "user_id": 5971808, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HB9lF.jpg?s=128&g=1", "display_name": "MAhsan", "link": "https://stackoverflow.com/users/5971808/mahsan"}, "edited": false, "score": 0, "creation_date": 1553124792, "post_id": 55271615, "comment_id": 97274497, "body": "what about pandas and dataframes?"}, {"owner": {"reputation": 9070, "user_id": 6817835, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/8GBAa.jpg?s=128&g=1", "display_name": "gold_cy", "link": "https://stackoverflow.com/users/6817835/gold-cy"}, "edited": false, "score": 2, "creation_date": 1553124843, "post_id": 55271615, "comment_id": 97274516, "body": "this is what you want --&gt; <a href=\"https://cx-oracle.readthedocs.io/en/latest/cursor.html#Cursor.executemany\" rel=\"nofollow noreferrer\">cx-oracle.readthedocs.io/en/latest/&hellip;</a> also never never never never use string interpolation when inserting data"}, {"owner": {"reputation": 1417, "user_id": 6560773, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/rUJo3.png?s=128&g=1", "display_name": "MattSom", "link": "https://stackoverflow.com/users/6560773/mattsom"}, "reply_to_user": {"reputation": 502, "user_id": 5971808, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HB9lF.jpg?s=128&g=1", "display_name": "MAhsan", "link": "https://stackoverflow.com/users/5971808/mahsan"}, "edited": false, "score": 0, "creation_date": 1553168000, "post_id": 55271615, "comment_id": 97288750, "body": "@MAhsan  Sadly I don&#39;t know pandas. I&#39;m reading from a CSV file, should I focus on a pandas implementation?"}, {"owner": {"reputation": 502, "user_id": 5971808, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HB9lF.jpg?s=128&g=1", "display_name": "MAhsan", "link": "https://stackoverflow.com/users/5971808/mahsan"}, "edited": false, "score": 1, "creation_date": 1553180865, "post_id": 55271615, "comment_id": 97296851, "body": "No harm in trying it, it has an easy to use read_csv method. Then a to_sql method, this requires setting up the engine for which you could use cx_Oracle. Of course, if you have 100k+ rows, it will take a bit of time but could do it all in one go. Here is a handy link for creating the engine connection <a href=\"https://gist.github.com/DGrady/7fb5c2214f247dcff2cb5dd99e231483\" rel=\"nofollow noreferrer\">gist.github.com/DGrady/7fb5c2214f247dcff2cb5dd99e231483</a>"}], "answers": [{"comments": [{"owner": {"reputation": 13026, "user_id": 23669, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9f6b4d78bc77193a4130c4bbbcc1760a?s=128&d=identicon&r=PG", "display_name": "eaolson", "link": "https://stackoverflow.com/users/23669/eaolson"}, "reply_to_user": {"reputation": 1417, "user_id": 6560773, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/rUJo3.png?s=128&g=1", "display_name": "MattSom", "link": "https://stackoverflow.com/users/6560773/mattsom"}, "edited": false, "score": 0, "creation_date": 1553209553, "post_id": 55272064, "comment_id": 97310276, "body": "Then Data Loader would probably be the best way to load your data."}, {"owner": {"reputation": 3517, "user_id": 7355859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b735c4402205b6cd7fbe9715f69fb772?s=128&d=identicon&r=PG", "display_name": "BobC", "link": "https://stackoverflow.com/users/7355859/bobc"}, "edited": false, "score": 0, "creation_date": 1553224478, "post_id": 55272064, "comment_id": 97313499, "body": "SQL Loader would be the 2nd best option"}], "tags": [], "owner": {"reputation": 13026, "user_id": 23669, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9f6b4d78bc77193a4130c4bbbcc1760a?s=128&d=identicon&r=PG", "display_name": "eaolson", "link": "https://stackoverflow.com/users/23669/eaolson"}, "is_accepted": false, "score": 2, "last_activity_date": 1553128152, "creation_date": 1553128152, "answer_id": 55272064, "question_id": 55271615, "link": "https://stackoverflow.com/questions/55271615/how-to-insert-1-million-rows-into-oracle-database-with-python/55272064#55272064", "title": "How to insert 1 million rows into Oracle database with Python?", "body": "<p>I don't know what format you have the data in, but <a href=\"https://www.oracle.com/technetwork/database/enterprise-edition/sql-loader-overview-095816.html\" rel=\"nofollow noreferrer\">SQL Data Loader</a> is a command line utility specifically created for adding large amounts of data to Oracle.</p>\n"}, {"comments": [{"owner": {"reputation": 1417, "user_id": 6560773, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/rUJo3.png?s=128&g=1", "display_name": "MattSom", "link": "https://stackoverflow.com/users/6560773/mattsom"}, "edited": false, "score": 0, "creation_date": 1553168680, "post_id": 55272374, "comment_id": 97289137, "body": "Thank you for the information! I&#39;m reading from a CSV, and I have it on my disk. What&#39;s the difference between SQL*Loader and Data Pump?"}, {"owner": {"reputation": 2685, "user_id": 5732537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a429e4952893bd0879ed0217e1f39ad?s=128&d=identicon&r=PG&f=1", "display_name": "EdStevens", "link": "https://stackoverflow.com/users/5732537/edstevens"}, "edited": false, "score": 1, "creation_date": 1553180800, "post_id": 55272374, "comment_id": 97296806, "body": "sqlldr reads data from csv files and inserts it into a table.  Exactly what you want.  DataPump is a generic term for the &#39;expdp&#39; and &#39;impdp&#39; utilites.  expdp &#39;exports data and metadata (essentially a bunch of CREATE and INSERT commands) and writes it to a propriatary binary file.  impdp reads that binary file and executes the CREATE and INSERT commands to import the data and metadata into a database.  Both are fully documented at <a href=\"https://docs.oracle.com/database/121/SUTIL/toc.htm\" rel=\"nofollow noreferrer\">docs.oracle.com/database/121/SUTIL/toc.htm</a>"}], "tags": [], "owner": {"reputation": 6003, "user_id": 4799035, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tuyZM.jpg?s=128&g=1", "display_name": "Christopher Jones", "link": "https://stackoverflow.com/users/4799035/christopher-jones"}, "is_accepted": true, "score": 1, "last_activity_date": 1600683039, "last_edit_date": 1600683039, "creation_date": 1553130636, "answer_id": 55272374, "question_id": 55271615, "link": "https://stackoverflow.com/questions/55271615/how-to-insert-1-million-rows-into-oracle-database-with-python/55272374#55272374", "title": "How to insert 1 million rows into Oracle database with Python?", "body": "<p>If your data is already in Python, then use <a href=\"http://cx-oracle.readthedocs.io/en/latest/cursor.html#Cursor.executemany\" rel=\"nofollow noreferrer\"><code>executemany()</code></a>.  In your case with so many rows, you probably would still execute multiple calls to insert batches of records.  See <a href=\"https://blogs.oracle.com/opal/efficient-and-scalable-batch-statement-execution-in-python-cx_oracle\" rel=\"nofollow noreferrer\">https://blogs.oracle.com/opal/efficient-and-scalable-batch-statement-execution-in-python-cx_oracle</a></p>\n<p>Update: see the new cx_Oracle documentation <a href=\"https://cx-oracle.readthedocs.io/en/latest/user_guide/batch_statement.html\" rel=\"nofollow noreferrer\">Batch Statement Execution and Bulk Loading</a>.</p>\n<pre><code>data = [\n    (60, &quot;Parent 60&quot;),\n    (70, &quot;Parent 70&quot;),\n    (80, &quot;Parent 80&quot;),\n    (90, &quot;Parent 90&quot;),\n    (100, &quot;Parent 100&quot;)\n]\n \ncursor.executemany(&quot;&quot;&quot;\n        insert into ParentTable (ParentId, Description)\n        values (:1, :2)&quot;&quot;&quot;, data)\n</code></pre>\n<p>As pointed out by others</p>\n<ul>\n<li>Avoid using string interpolation in statements because it is a security risk.\nIt is also generally a scalability problem.  Use bind variables.  Where you need to use string interpolation for things like column names, make sure you santize any values.</li>\n<li>If the data is already on disk, then using something like SQL*Loader or Data Pump will be better than reading it into cx_Oracle and then sending it to the DB.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 3517, "user_id": 7355859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b735c4402205b6cd7fbe9715f69fb772?s=128&d=identicon&r=PG", "display_name": "BobC", "link": "https://stackoverflow.com/users/7355859/bobc"}, "is_accepted": false, "score": 1, "last_activity_date": 1553209986, "creation_date": 1553209986, "answer_id": 55290585, "question_id": 55271615, "link": "https://stackoverflow.com/questions/55271615/how-to-insert-1-million-rows-into-oracle-database-with-python/55290585#55290585", "title": "How to insert 1 million rows into Oracle database with Python?", "body": "<p>The most optimal way in terms of performance and easy would be to create an External Table over your CSV file and then use SQL do the insert.</p>\n"}], "owner": {"reputation": 1417, "user_id": 6560773, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/rUJo3.png?s=128&g=1", "display_name": "MattSom", "link": "https://stackoverflow.com/users/6560773/mattsom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3313, "favorite_count": 1, "accepted_answer_id": 55272374, "answer_count": 3, "score": 1, "last_activity_date": 1600683039, "creation_date": 1553124563, "last_edit_date": 1553167384, "question_id": 55271615, "link": "https://stackoverflow.com/questions/55271615/how-to-insert-1-million-rows-into-oracle-database-with-python", "title": "How to insert 1 million rows into Oracle database with Python?", "body": "<p>I have ~100,000 to 1,000,000 rows to insert into an Oracle18c database. I'm quite new with Oracle and this order of magnitude of data. I reckon there must be some optimal way to do it, but for now I've only managed to implement a line by line insertion:</p>\n\n<pre><code>def insertLines(connection, tableName, column_names, rows):\n    cursor = connection.cursor()\n    if tableExists(connection, tableName):\n        for row in rows:\n            sql = 'INSERT INTO {} ({}) VALUES ({})'.format(tableName, column_names, row)\n            cursor.execute(sql)\n    cursor.close()\n</code></pre>\n\n<p>Is there some clear way in Oracle to bulk the rows to reach higher effectivity using cx_Oracle (the python Oracle library)?</p>\n\n<p>EDIT: I read the data from a CSV file.</p>\n"}, {"tags": ["python", "python-3.x", "matrix", "scipy", "ode"], "comments": [{"owner": {"reputation": 3471, "user_id": 2127008, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/MIRMI.jpg?s=128&g=1", "display_name": "Wrzlprmft", "link": "https://stackoverflow.com/users/2127008/wrzlprmft"}, "edited": false, "score": 0, "creation_date": 1554314713, "post_id": 55271609, "comment_id": 97709506, "body": "Since you are using symbols anyway, you may want to take a look at <a href=\"https://github.com/neurophysik/jitcode/\" rel=\"nofollow noreferrer\">this module of mine</a>, which uses symbolic input and can generate an (exact) function for the Jacobian completely automatically using symbolic derivation. Solve IVP is one of the possible back-ends. It may also give you a relevant speed boost."}, {"owner": {"reputation": 60, "user_id": 10344473, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OzBJ2Tr8cR8/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaPURbyYMVuBLSbR7w_eh639CGwRPw/mo/photo.jpg?sz=128", "display_name": "Travis Czechorski", "link": "https://stackoverflow.com/users/10344473/travis-czechorski"}, "reply_to_user": {"reputation": 3471, "user_id": 2127008, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/MIRMI.jpg?s=128&g=1", "display_name": "Wrzlprmft", "link": "https://stackoverflow.com/users/2127008/wrzlprmft"}, "edited": false, "score": 0, "creation_date": 1554320744, "post_id": 55271609, "comment_id": 97712517, "body": "Thank you so much, ill get on this and hopefully it will work."}], "answers": [{"comments": [{"owner": {"reputation": 3471, "user_id": 2127008, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/MIRMI.jpg?s=128&g=1", "display_name": "Wrzlprmft", "link": "https://stackoverflow.com/users/2127008/wrzlprmft"}, "edited": false, "score": 0, "creation_date": 1554314347, "post_id": 55498940, "comment_id": 97709316, "body": "You seem to be approximating the Jacobian using finite differences. This is unnecessary as Solve IVP will do this by itself when you do not provide a Jacobian."}, {"owner": {"reputation": 60, "user_id": 10344473, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OzBJ2Tr8cR8/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaPURbyYMVuBLSbR7w_eh639CGwRPw/mo/photo.jpg?sz=128", "display_name": "Travis Czechorski", "link": "https://stackoverflow.com/users/10344473/travis-czechorski"}, "reply_to_user": {"reputation": 3471, "user_id": 2127008, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/MIRMI.jpg?s=128&g=1", "display_name": "Wrzlprmft", "link": "https://stackoverflow.com/users/2127008/wrzlprmft"}, "edited": false, "score": 0, "creation_date": 1554320666, "post_id": 55498940, "comment_id": 97712488, "body": "Care to go into more detail on how to calculate the jacobian? I seem to really be stuck and no way of calculating it seems to work. I found this method on math exchange and it worked so i just assumed it to be correct. Edit: Also the jacobian method i use in the question seems to work, but i can&#39;t get it to work with solve_ivp. Do you know why this is?"}, {"owner": {"reputation": 3471, "user_id": 2127008, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/MIRMI.jpg?s=128&g=1", "display_name": "Wrzlprmft", "link": "https://stackoverflow.com/users/2127008/wrzlprmft"}, "edited": false, "score": 1, "creation_date": 1554354542, "post_id": 55498940, "comment_id": 97721786, "body": "Your method is not incorrect (AFAICT), just superfluous. The Jacobian is a <a href=\"https://en.wikipedia.org/wiki/Jacobian_matrix_and_determinant\" rel=\"nofollow noreferrer\">clearly defined thing</a> based on partial derivatives of your right-hand side. You can compute it either on paper (which I do not recommend given the complexity of your problem), symbolically with a computer (which makes sense since you are using symbols anyway), or numerically estimate it using <a href=\"https://en.wikipedia.org/wiki/Finite_difference\" rel=\"nofollow noreferrer\">finite differences</a>. You are doing the latter here, but that\u2019s also what Solve IVP does on its own anyway."}, {"owner": {"reputation": 60, "user_id": 10344473, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OzBJ2Tr8cR8/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaPURbyYMVuBLSbR7w_eh639CGwRPw/mo/photo.jpg?sz=128", "display_name": "Travis Czechorski", "link": "https://stackoverflow.com/users/10344473/travis-czechorski"}, "reply_to_user": {"reputation": 3471, "user_id": 2127008, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/MIRMI.jpg?s=128&g=1", "display_name": "Wrzlprmft", "link": "https://stackoverflow.com/users/2127008/wrzlprmft"}, "edited": false, "score": 0, "creation_date": 1554378117, "post_id": 55498940, "comment_id": 97734788, "body": "Ok thanks, i had a small inclination that was the case  when i saw the epsilon value but I wasn&#39;t completely sure of anything. When i use &#39;J =  X.jacobian(Y)&#39; it seems to calculate it symbolically, but i am unable to figure out how to get it to work. I will download you module when i get back to work and post the results if i can get it to work. Thanks for your help!"}, {"owner": {"reputation": 60, "user_id": 10344473, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OzBJ2Tr8cR8/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaPURbyYMVuBLSbR7w_eh639CGwRPw/mo/photo.jpg?sz=128", "display_name": "Travis Czechorski", "link": "https://stackoverflow.com/users/10344473/travis-czechorski"}, "reply_to_user": {"reputation": 3471, "user_id": 2127008, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/MIRMI.jpg?s=128&g=1", "display_name": "Wrzlprmft", "link": "https://stackoverflow.com/users/2127008/wrzlprmft"}, "edited": false, "score": 0, "creation_date": 1554467487, "post_id": 55498940, "comment_id": 97774137, "body": "EDIT: It seems simply lambidifying the Matrix allowed it to be used. I&#39;m still not 100% sure everything is correct but this seems much more plausible. I found a guide on this website <a href=\"https://www.sympy.org/scipy-2017-codegen-tutorial/notebooks/32-chemical-kinetics-symbolic-construction.html\" rel=\"nofollow noreferrer\">link</a>"}], "tags": [], "owner": {"reputation": 60, "user_id": 10344473, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OzBJ2Tr8cR8/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaPURbyYMVuBLSbR7w_eh639CGwRPw/mo/photo.jpg?sz=128", "display_name": "Travis Czechorski", "link": "https://stackoverflow.com/users/10344473/travis-czechorski"}, "is_accepted": true, "score": 1, "last_activity_date": 1559781358, "last_edit_date": 1559781358, "creation_date": 1554305485, "answer_id": 55498940, "question_id": 55271609, "link": "https://stackoverflow.com/questions/55271609/computing-and-using-jacobian-for-solve-ivp-method/55498940#55498940", "title": "Computing and using Jacobian for solve_ivp method", "body": "<p><strong>EDIT:</strong> I think I solved it using lambdify as follows:</p>\n\n<pre><code>C1 = sp.symbols('C[0], C[1], C[2], C[3], C[4], C[5], C[6], C[7], C[8], C[9], C[10], C[11], C[12], C[13], C[14], C[15], C[16], C[17]') \nt1 = sp.symbols('t1') \nydot = rhs(t1, C1) \nJ = sp.Matrix(ydot).jacobian(C1) \nJ_func = sp.lambdify((t1,C1), J)\n</code></pre>\n\n<p>J_func can then be used in the solve_ivp method as follows.</p>\n\n<pre><code>Y0 = [0.9999999999929631, 1.8518729652310317e-12, 3.7964305690400015e-12, 4.3194364603720453e-32, 8.840289274135903e-29, 7.58855704948555e-17, 3.747886894978005e-21, 7.443392243056976e-25, 2.713933190549257e-19, 1.3888890038089627e-12, 3.778455148948492e-26, 1.3426298908781515e-12, 4.630881200895968e-13, 2.823935453386071e-12, 9.7200025431433e-13, 3.024125323625077e-19, 1.7428556044758935e-25, 2.314889117721353e-12]\n\nres = solve_ivp(rhs, (0, 30), Y0 , method = 'Radau', jac = J_func)\n</code></pre>\n\n<p><strong>EDIT 2</strong>:\nHeres a cleaner code that generates the same thing.</p>\n\n<pre><code>def jacob(x, C):\n  ydot = rhs(x,C)\n  J =  sp.Matrix(ydot).jacobian(C)\n  J_func = sp.lambdify((x,C) , J)\n  return J_func\n</code></pre>\n"}], "owner": {"reputation": 60, "user_id": 10344473, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OzBJ2Tr8cR8/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaPURbyYMVuBLSbR7w_eh639CGwRPw/mo/photo.jpg?sz=128", "display_name": "Travis Czechorski", "link": "https://stackoverflow.com/users/10344473/travis-czechorski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 279, "favorite_count": 2, "accepted_answer_id": 55498940, "answer_count": 1, "score": 0, "last_activity_date": 1559781358, "creation_date": 1553124530, "last_edit_date": 1553126445, "question_id": 55271609, "link": "https://stackoverflow.com/questions/55271609/computing-and-using-jacobian-for-solve-ivp-method", "title": "Computing and using Jacobian for solve_ivp method", "body": "<p>I'm trying to compute the Jacobian of a large system of first-order ODE's. I need the Jacobian for use in my solve_ivp code.</p>\n\n<p>Heres how I attempt to compute the jacobian.</p>\n\n<pre><code>C1 = sp.symbols('C[0], C[1], C[2], C[3], C[4], C[5], C[6], C[7], C[8], C[9], C[10], C[11], C[12], C[13], C[14], C[15], C[16], C[17]')\n\nX = sp.Matrix([[-1.0*final_kcm[0]*C1[0] - final_kcm[1]*C1[0]*C1[11] - final_kcm[2]*C1[0]*C1[12] - final_kcm[3]*C1[0]*C1[14] - final_kcm[4]*C1[0]*C1[15] - final_kcm[5]*C1[0]*C1[16],\n       final_kcm[2]*C1[0]*C1[12] - final_kcm[8]*C1[1]*C1[11] + final_kcm[13]*C1[17]*C1[12],\n       final_kcm[1]*C1[0]*C1[11] + final_kcm[6]*C1[12]*C1[11] + final_kcm[7]*C1[11]*C1[13] + final_kcm[8]*C1[11]*C1[1] + final_kcm[9]*C1[11]*C1[9] + final_kcm[10]*C1[11]*C1[10] +  final_kcm[12]*C1[11]*C1[17] + 2*final_kcm[20]*C1[11]*C1[8],\n       2*final_kcm[20]*C1[12]*C1[8],\n       final_kcm[15]*C1[15]*C1[17],\n       final_kcm[7]*C1[11]*C1[13] - final_kcm[18]*C1[5]*C1[11],\n       final_kcm[14]*C1[17]*C1[13],\n       final_kcm[19]*C1[15]*C1[8],\n       final_kcm[17]*C1[15] - 2*final_kcm[19]*C1[12]*C1[8] - final_kcm[20]*C1[12]*C1[8],\n       final_kcm[3]*C1[0]*C1[14] - final_kcm[9]*C1[11]*C1[9],\n       final_kcm[5]*C1[0]*C1[16] - final_kcm[10]*C1[11]*C1[10],\n       final_kcm[0]*C1[0] - final_kcm[1]*C1[0]*C1[11] - final_kcm[6]*C1[12]*C1[11] - final_kcm[7]*C1[11]*C1[13] - final_kcm[8]*C1[11]*C1[1] - final_kcm[9]*C1[11]*C1[9] - final_kcm[10]*C1[11]*C1[10] - final_kcm[11]*C1[11]*C1[10] - final_kcm[12]*C1[11]*C1[17] + final_kcm[14]*C1[17]*C1[14] + final_kcm[15]*C1[15]*C1[17] + final_kcm[16]*C1[13] - final_kcm[18]*C1[5]*C1[11] + final_kcm[19]*C1[12]*C1[8] - 2*final_kcm[20]*C1[12]*C1[8],\n       final_kcm[0]*C1[0] - final_kcm[2]*C1[0]*C1[12] - final_kcm[6]*C1[12]*C1[11] + final_kcm[8]*C1[11]*C1[1] - final_kcm[13]*C1[17]*C1[12],\n       final_kcm[1]*C1[0]*C1[11] + final_kcm[2]*C1[0]*C1[12] + final_kcm[3]*C1[0]*C1[14] + final_kcm[4]*C1[0]*C1[15] + final_kcm[5]*C1[0]*C1[16] - final_kcm[7]*C1[11]*C1[13] - final_kcm[16]*C1[13],\n       -1.0*final_kcm[3]*C1[0]*C1[14] + final_kcm[9]*C1[11]*C1[9] + final_kcm[11]*C1[11]*C1[10] - final_kcm[14]*C1[17]*C1[14],\n       -1.0*final_kcm[4]*C1[0]*C1[15] + final_kcm[12]*C1[11]*C1[17] + final_kcm[13]*C1[17]*C1[12] - final_kcm[15]*C1[15]*C1[17] - final_kcm[17]*C1[15] - final_kcm[19]*C1[15]*C1[8],\n       -1.0*final_kcm[5]*C1[0]*C1[16] + final_kcm[10]*C1[11]*C1[10] + final_kcm[18]*C1[5]*C1[11],\n       final_kcm[4]*C1[0]*C1[15] + final_kcm[6]*C1[12]*C1[11] - final_kcm[11]*C1[11]*C1[10] - final_kcm[12]*C1[11]*C1[17] - final_kcm[13]*C1[17]*C1[12] - final_kcm[14]*C1[17]*C1[13] - final_kcm[15]*C1[15]*C1[17] + final_kcm[16]*C1[13]]])\nY = sp.Matrix(C1)\nJ =  X.jacobian(Y)\n</code></pre>\n\n<p>This returns a Matrix element like <code>Matrix([[..]....])</code>.</p>\n\n<p>How can I transform this into what I need to use it in my <code>solve_ivp</code> problem?</p>\n\n<p>Here's my code for my <code>solve_ivp</code>  problem.</p>\n\n<pre><code>Temperature = 500.0\n\nTemp_K = Temperature + 273.15\nr = 8.314459848 #J/K*mol\nR = r/1000.0 #kJ/K*mol\n\nEa = [342,7,42,45,34,48,13,12,4,6,15,0,56,31,30,61,84,90,70,20,70]\n\nk_0 =[5.9 * (10**15), 1.3 * (10**13), 1.0 * (10**12), 5.0 * (10**11), 1.2 * (10**13), 2.0 * (10**11), 1.0 * (10**13), 1.0 * (10**13), 1.7 * (10**13), 1.2 * (10**13), 1.7 * (10**13), 9.1 * (10**10), 1.2 * (10**14), 5.0 * (10**11), 2.0 * (10**10), 3.0 * (10**11), 2.1 * (10**14), 5.0 * (10**14), 2.0 * (10**13), 1.0 * (10**14), 1.6 * (10**14)]\n\n\n\nfk1 = [mp.exp((-1.0 * x)/(R*Temp_K)) for x in Ea]\nfinal_k = [fk1*k_0 for fk1,k_0 in zip(fk1,k_0)]\nfinal_kcm = [mpf(x) for x in final_k]\n\ndef rhs(t, C):\nreturn[(-1.0*final_kcm[0]*C[0]) - final_kcm[1]*C[0]*C[11] - final_kcm[2]*C[0]*C[12] - final_kcm[3]*C[0]*C[14] - final_kcm[4]*C[0]*C[15] - final_kcm[5]*C[0]*C[16],\n       final_kcm[2]*C[0]*C[12] - final_kcm[8]*C[1]*C[11] + final_kcm[13]*C[17]*C[12],\n       final_kcm[1]*C[0]*C[11] + final_kcm[6]*C[12]*C[11] + final_kcm[7]*C[11]*C[13] + final_kcm[8]*C[11]*C[1] + final_kcm[9]*C[11]*C[9] + final_kcm[10]*C[11]*C[10] +  final_kcm[12]*C[11]*C[17] + 2*final_kcm[20]*C[11]*C[8],\n       2*final_kcm[20]*C[12]*C[8],\n       final_kcm[15]*C[15]*C[17],\n       final_kcm[7]*C[11]*C[13] - final_kcm[18]*C[5]*C[11],\n       final_kcm[14]*C[17]*C[13],\n       final_kcm[19]*C[15]*C[8],\n       final_kcm[17]*C[15] - 2*final_kcm[19]*C[12]*C[8] - final_kcm[20]*C[12]*C[8],\n       final_kcm[3]*C[0]*C[14] - final_kcm[9]*C[11]*C[9],\n       final_kcm[5]*C[0]*C[16] - final_kcm[10]*C[11]*C[10],\n       final_kcm[0]*C[0] - final_kcm[1]*C[0]*C[11] - final_kcm[6]*C[12]*C[11] - final_kcm[7]*C[11]*C[13] - final_kcm[8]*C[11]*C[1] - final_kcm[9]*C[11]*C[9] - final_kcm[10]*C[11]*C[10] - final_kcm[11]*C[11]*C[10] - final_kcm[12]*C[11]*C[17] + final_kcm[14]*C[17]*C[14] + final_kcm[15]*C[15]*C[17] + final_kcm[16]*C[13] - final_kcm[18]*C[5]*C[11] + final_kcm[19]*C[12]*C[8] - 2*final_kcm[20]*C[12]*C[8],\n       final_kcm[0]*C[0] - final_kcm[2]*C[0]*C[12] - final_kcm[6]*C[12]*C[11] + final_kcm[8]*C[11]*C[1] - final_kcm[13]*C[17]*C[12],\n       final_kcm[1]*C[0]*C[11] + final_kcm[2]*C[0]*C[12] + final_kcm[3]*C[0]*C[14] + final_kcm[4]*C[0]*C[15] + final_kcm[5]*C[0]*C[16] - final_kcm[7]*C[11]*C[13] - final_kcm[16]*C[13],\n       (-1.0*final_kcm[3]*C[0]*C[14]) + final_kcm[9]*C[11]*C[9] + final_kcm[11]*C[11]*C[10] - final_kcm[14]*C[17]*C[14],\n       (-1.0*final_kcm[4]*C[0]*C[15]) + final_kcm[12]*C[11]*C[17] + final_kcm[13]*C[17]*C[12] - final_kcm[15]*C[15]*C[17] - final_kcm[17]*C[15] - final_kcm[19]*C[15]*C[8],\n       (-1.0*final_kcm[5]*C[0]*C[16]) + final_kcm[10]*C[11]*C[10] + final_kcm[18]*C[5]*C[11],\n       final_kcm[4]*C[0]*C[15] + final_kcm[6]*C[12]*C[11] - final_kcm[11]*C[11]*C[10] - final_kcm[12]*C[11]*C[17] - final_kcm[13]*C[17]*C[12] - final_kcm[14]*C[17]*C[13] - final_kcm[15]*C[15]*C[17] + final_kcm[16]*C[13]]\nres = solve_ivp(rhs, (0, 3), [0.9999999999929631, 1.8518729652310317e-12, 3.7964305690400015e-12, 4.3194364603720453e-32, 8.840289274135903e-29, 7.58855704948555e-17, 3.747886894978005e-21, 7.443392243056976e-25, 2.713933190549257e-19, 1.3888890038089627e-12, 3.778455148948492e-26, 1.3426298908781515e-12, 4.630881200895968e-13, 2.823935453386071e-12, 9.7200025431433e-13, 3.024125323625077e-19, 1.7428556044758935e-25, 2.314889117721353e-12],  method = 'Radau', jac = J)   \n</code></pre>\n\n<p>When I run the code I get the following error as a result.</p>\n\n<pre><code>TypeError: __array__() takes 1 positional argument but 2 were given\n</code></pre>\n\n<p>What should I do?</p>\n"}, {"tags": ["python", "random", "integer", "sample", "uniform"], "comments": [{"owner": {"reputation": 9070, "user_id": 6817835, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/8GBAa.jpg?s=128&g=1", "display_name": "gold_cy", "link": "https://stackoverflow.com/users/6817835/gold-cy"}, "edited": false, "score": 2, "creation_date": 1553124638, "post_id": 55271601, "comment_id": 97274447, "body": "I&#39;m confused, your code is not even valid Python. What&#39;s wrong with simply <code>random.uniform(-2, 2)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 8761, "user_id": 1192111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/578c0836635d7d63abf64daaafb3ffa6?s=128&d=identicon&r=PG", "display_name": "Francisco C", "link": "https://stackoverflow.com/users/1192111/francisco-c"}, "is_accepted": false, "score": 0, "last_activity_date": 1553124703, "creation_date": 1553124703, "answer_id": 55271633, "question_id": 55271601, "link": "https://stackoverflow.com/questions/55271601/list-of-10-random-points-between-2-and-2-with-uniform-distribution/55271633#55271633", "title": "List of 10 random points between -2 and 2 with uniform distribution", "body": "<p><code>random.uniform</code> takes two parameters, a minimum and a maximum,</p>\n\n<p>So you can use a list comprehension to get 10 random numbers:</p>\n\n<pre><code>[random.uniform(-2, 2) for _ in range(10)]\n</code></pre>\n\n<p>And here's an example output:</p>\n\n<pre><code>[-1.372898354215351, 0.7685608600440506, -0.6975671872462357, -0.3631270499386905, -0.36208667438256414, 0.2822971553695144, 1.427192211459123, -0.9077597437164586, -0.8081649192178384, -1.6619848742793604]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9070, "user_id": 6817835, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/8GBAa.jpg?s=128&g=1", "display_name": "gold_cy", "link": "https://stackoverflow.com/users/6817835/gold-cy"}, "is_accepted": false, "score": 0, "last_activity_date": 1553124718, "creation_date": 1553124718, "answer_id": 55271635, "question_id": 55271601, "link": "https://stackoverflow.com/questions/55271601/list-of-10-random-points-between-2-and-2-with-uniform-distribution/55271635#55271635", "title": "List of 10 random points between -2 and 2 with uniform distribution", "body": "<p>If I understand correctly this is what you want.</p>\n\n<pre><code>l = []\n\nfor _ in range(10):\n    l.append(random.uniform(-2, 2))\n\nprint(l)\n\n[1.6348754396814087,\n 1.8481047445800565,\n -0.125676526622843,\n -0.7042785180355264,\n 1.2117300078323434,\n 1.2910590071566834,\n -1.939559252995089,\n 1.458643196526031,\n 1.83268811338445,\n 0.03584910568687105]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8342, "user_id": 6942527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d97c46958116a2a923d03f109876355?s=128&d=identicon&r=PG&f=1", "display_name": "busybear", "link": "https://stackoverflow.com/users/6942527/busybear"}, "is_accepted": false, "score": 1, "last_activity_date": 1553124739, "creation_date": 1553124739, "answer_id": 55271640, "question_id": 55271601, "link": "https://stackoverflow.com/questions/55271601/list-of-10-random-points-between-2-and-2-with-uniform-distribution/55271640#55271640", "title": "List of 10 random points between -2 and 2 with uniform distribution", "body": "<p><code>random.uniform</code> only takes 2 arguments: the lower and upper bounds. So you need to call this 10 times:</p>\n\n<pre><code>[random.uniform(-2, 2) for _ in range(10)]\n</code></pre>\n\n<p>You can also use Numpy's version. Here you can specify the number of elements:</p>\n\n<pre><code>np.random.uniform(-2, 2, 10)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5007, "user_id": 10924296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/483c21a8a3f03bbf92cb99539ec97dbc?s=128&d=identicon&r=PG&f=1", "display_name": "Reedinationer", "link": "https://stackoverflow.com/users/10924296/reedinationer"}, "is_accepted": false, "score": 0, "last_activity_date": 1553124760, "creation_date": 1553124760, "answer_id": 55271643, "question_id": 55271601, "link": "https://stackoverflow.com/questions/55271601/list-of-10-random-points-between-2-and-2-with-uniform-distribution/55271643#55271643", "title": "List of 10 random points between -2 and 2 with uniform distribution", "body": "<p>I think you are trying to do:</p>\n\n<pre><code>import random\nmy_random_numbers = [] # initialize list\nfor i in range(10): # you need 10 numbers\n    my_random_num = random.uniform(-2, 2) # they should be between -2, 2\n    print(my_random_num) # make sure numbers meet satisfaction\n    my_random_numbers.append(my_random_num) # add to our list\n</code></pre>\n\n<p>Outputs:</p>\n\n<pre><code>1.6876915611870968\n-0.8178893369346687\n0.3262903557811643\n0.6888991431631117\n-1.9753672418552077\n0.463925233718546\n-0.44685838294827285\n-1.1500656906098317\n-0.8825768728082863\n-1.0350040728799694\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3694, "user_id": 1117029, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b063c47d4413f3409e3f13c65833661c?s=128&d=identicon&r=PG", "display_name": "r2DoesInc", "link": "https://stackoverflow.com/users/1117029/r2doesinc"}, "edited": false, "score": 3, "creation_date": 1553129516, "post_id": 55271788, "comment_id": 97275617, "body": "Please provide an explanation when posting a solution."}], "tags": [], "owner": {"reputation": 51, "user_id": 9943872, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b42924ac55175f5c7943a23259c0f19?s=128&d=identicon&r=PG&f=1", "display_name": "Hank Moody", "link": "https://stackoverflow.com/users/9943872/hank-moody"}, "is_accepted": false, "score": 0, "last_activity_date": 1553125754, "creation_date": 1553125754, "answer_id": 55271788, "question_id": 55271601, "link": "https://stackoverflow.com/questions/55271601/list-of-10-random-points-between-2-and-2-with-uniform-distribution/55271788#55271788", "title": "List of 10 random points between -2 and 2 with uniform distribution", "body": "<p>Do this:</p>\n\n<pre><code>np.random.uniform(-2, 2, 10)\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11031414"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 688, "favorite_count": 0, "answer_count": 5, "score": 0, "last_activity_date": 1553125754, "creation_date": 1553124437, "last_edit_date": 1553124455, "question_id": 55271601, "link": "https://stackoverflow.com/questions/55271601/list-of-10-random-points-between-2-and-2-with-uniform-distribution", "title": "List of 10 random points between -2 and 2 with uniform distribution", "body": "<p>How do I make a list of 10 random points between -2 and 2 with a uniform distribution? Python keeps telling me that the range is negative or too small</p>\n\n<p>This is what I have so far: </p>\n\n<pre><code>import random\nrandint = random.uniform((1, 10),10)\nprint (randint)\n</code></pre>\n"}, {"tags": ["python", "pandas", "dataframe"], "answers": [{"tags": [], "owner": {"reputation": 81, "user_id": 10793171, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-udYGnLLYAUg/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gai7pM506MkTsHc_AnPImUArk5JA/mo/photo.jpg?sz=128", "display_name": "smitsy", "link": "https://stackoverflow.com/users/10793171/smitsy"}, "is_accepted": true, "score": 1, "last_activity_date": 1553127213, "creation_date": 1553127213, "answer_id": 55271967, "question_id": 55271574, "link": "https://stackoverflow.com/questions/55271574/dataframe-replace-by-nested-dict/55271967#55271967", "title": "DataFrame.replace by nested dict", "body": "<p>There might be a more pythonic way, but this code works for me;</p>\n\n<pre><code>for col in your_dict.keys():\n    df[col].replace(your_dict[col], inplace=True)\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 10386891, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kfjHd.jpg?s=128&g=1", "display_name": "Maxi K&#246;hler", "link": "https://stackoverflow.com/users/10386891/maxi-k%c3%b6hler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 235, "favorite_count": 1, "accepted_answer_id": 55271967, "answer_count": 1, "score": 2, "last_activity_date": 1553127213, "creation_date": 1553124248, "question_id": 55271574, "link": "https://stackoverflow.com/questions/55271574/dataframe-replace-by-nested-dict", "title": "DataFrame.replace by nested dict", "body": "<p>I have a huge Dataframe, where a lot of entries needs to be changed. So, I've created a translation dict, which has the following structure:</p>\n\n<pre><code>{'Data.Bar Layer': {'1': 0,\n  '1.E': 21,\n  '2': 13,\n  '2.E': 22,\n  '3': 14,\n  '3.E': 24,\n  '4': 15,\n  '4.E': 23,\n  'B': 16,\n  'CL1': 1,\n  'CL2': 2,\n  'CL2a': 6,\n  'CL3': 3,\n  'CL3a': 4,\n  'CL4': 5,\n  'E': 18,\n  'L1': 7,\n  'L2': 8,\n  'L2a': 12,\n  'L3': 9,\n  'L3a': 10,\n  'L4': 11,\n  'T': 17,\n  'T&amp;B': 19,\n  'T+B': 20},\n 'Data.Bar Type': {'N': 0, 'R': 1},\n 'Data.Defined No. Bars': {'No': 0, 'Yes': 1},\n 'Data.Design Option': {'-1': 0, 'Main Model': 1},...}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/DowYs.png\" rel=\"nofollow noreferrer\">screenshot of the dictionaries print representation</a></p>\n\n<p>The first key corresponds to the dataframe column and the second key to the value that needs to be changed, e.g. in column <code>Data.Bar Layer</code> all <code>'1'</code> should be 0. <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.replace.html\" rel=\"nofollow noreferrer\">This is how the documentation of pandas.dataframe.replace states the dictionary to look like</a>\nHowever, same values have to be exchanged multiple times, which (I guess) leads to the error: </p>\n\n<blockquote>\n  <p>Replacement not allowed with overlapping keys and values</p>\n</blockquote>\n\n<p><a href=\"https://i.stack.imgur.com/Q3Vyi.png\" rel=\"nofollow noreferrer\">Here is a snippet of the Dataframe.</a> Is there any work around to avoid this error? I tried some approaches with apply and map, but they didn't work, unfortunately.</p>\n\n<p>Thanks in advance and kind regards,\nMax</p>\n"}, {"tags": ["python", "pandas", "numpy", "dataframe", "where"], "answers": [{"comments": [{"owner": {"reputation": 143, "user_id": 10981808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/730f3e45d8380e419812ed09366b19e2?s=128&d=identicon&r=PG&f=1", "display_name": "bbk611", "link": "https://stackoverflow.com/users/10981808/bbk611"}, "edited": false, "score": 0, "creation_date": 1553124276, "post_id": 55271543, "comment_id": 97274340, "body": "this is great. I&#39;ll check mark this when I&#39;m allowed to. Do you know why the for loop doesn&#39;t work in this case? I include <code>dog</code>, <code>cat</code>, and <code>gerbil</code> in the <code>pets</code> list, so I thought iterating over that list would work fine."}, {"owner": {"reputation": 8342, "user_id": 6942527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d97c46958116a2a923d03f109876355?s=128&d=identicon&r=PG&f=1", "display_name": "busybear", "link": "https://stackoverflow.com/users/6942527/busybear"}, "reply_to_user": {"reputation": 143, "user_id": 10981808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/730f3e45d8380e419812ed09366b19e2?s=128&d=identicon&r=PG&f=1", "display_name": "bbk611", "link": "https://stackoverflow.com/users/10981808/bbk611"}, "edited": false, "score": 0, "creation_date": 1553124441, "post_id": 55271543, "comment_id": 97274396, "body": "I updated my post with more detail. The idea is the last iteration overwrites everything from before so you are essentially just checking for values that are equal to <code>gerbil</code>."}], "tags": [], "owner": {"reputation": 8342, "user_id": 6942527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d97c46958116a2a923d03f109876355?s=128&d=identicon&r=PG&f=1", "display_name": "busybear", "link": "https://stackoverflow.com/users/6942527/busybear"}, "is_accepted": true, "score": 1, "last_activity_date": 1553124404, "last_edit_date": 1553124404, "creation_date": 1553124092, "answer_id": 55271543, "question_id": 55271517, "link": "https://stackoverflow.com/questions/55271517/for-loop-using-np-where/55271543#55271543", "title": "For loop using np.where", "body": "<p>You are setting all non gerbil to <code>0</code> in your last loop iteration. That is, when <code>pet</code> is <code>gerbil</code> in your last iteration, ALL entries that are not equal to <code>gerbil</code> will correspond to <code>0</code>. This includes entries that are <code>dog</code> or <code>cat</code>. You should check all values in <code>pets</code> at once. Try this:</p>\n\n<pre><code>df['domesticated'] = df['creature'].apply(lambda x: 1 if x in pets else 0)\n</code></pre>\n\n<p>If you want to stick with <code>np.where</code>:</p>\n\n<pre><code>df['domesticated'] = np.where(df['creature'].isin(pets), 1, 0)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9070, "user_id": 6817835, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/8GBAa.jpg?s=128&g=1", "display_name": "gold_cy", "link": "https://stackoverflow.com/users/6817835/gold-cy"}, "is_accepted": false, "score": 1, "last_activity_date": 1553124205, "creation_date": 1553124205, "answer_id": 55271566, "question_id": 55271517, "link": "https://stackoverflow.com/questions/55271517/for-loop-using-np-where/55271566#55271566", "title": "For loop using np.where", "body": "<p>The problem is every loop resets your results.</p>\n\n<pre><code>df['domesticated'] = df.isin(pets).astype(int)\n\n  creature  domesticated\n0      dog             1\n1      cat             1\n2   gerbil             1\n3    mouse             0\n4   donkey             0\n</code></pre>\n"}], "owner": {"reputation": 143, "user_id": 10981808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/730f3e45d8380e419812ed09366b19e2?s=128&d=identicon&r=PG&f=1", "display_name": "bbk611", "link": "https://stackoverflow.com/users/10981808/bbk611"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1178, "favorite_count": 0, "accepted_answer_id": 55271543, "answer_count": 2, "score": 0, "last_activity_date": 1553129255, "creation_date": 1553123878, "last_edit_date": 1553129255, "question_id": 55271517, "link": "https://stackoverflow.com/questions/55271517/for-loop-using-np-where", "title": "For loop using np.where", "body": "<p>I'm trying to create a new column in a dataframe that labels animals that are domesticated with a 1. I'm using a for loop, but for some reason, the loop only picks up the last item in the <code>pets</code> list. <code>dog</code>, <code>cat</code>, and <code>gerbil</code> should all be assigned a 1 under the <code>domesticated</code> column. Anyone have a fix for this or a better approach?</p>\n\n<pre><code>df = pd.DataFrame(\n    {'creature': ['dog', 'cat', 'gerbil', 'mouse', 'donkey']\n    })\n\npets = ['dog', 'cat', 'gerbil']\n\nfor pet in pets:\n    df['domesticated'] = np.where(df['creature']==pet, 1, 0)\n\ndf\n</code></pre>\n"}, {"tags": ["python", "matplotlib", "scatter"], "answers": [{"comments": [{"owner": {"reputation": 135, "user_id": 9443671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/402f4ec4ce4e3362108cb129f7e9632f?s=128&d=identicon&r=PG&f=1", "display_name": "skidjoe", "link": "https://stackoverflow.com/users/9443671/skidjoe"}, "edited": false, "score": 0, "creation_date": 1553126120, "post_id": 55271561, "comment_id": 97274861, "body": "I keep getting for some reason index tuple out range error, do you know why this may happen?"}, {"owner": {"reputation": 131, "user_id": 11229511, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-6YJnZkPkOD0/AAAAAAAAAAI/AAAAAAAAAAA/YjfCCww7H30/photo.jpg?sz=128", "display_name": "Hugo Delahaye", "link": "https://stackoverflow.com/users/11229511/hugo-delahaye"}, "reply_to_user": {"reputation": 135, "user_id": 9443671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/402f4ec4ce4e3362108cb129f7e9632f?s=128&d=identicon&r=PG&f=1", "display_name": "skidjoe", "link": "https://stackoverflow.com/users/9443671/skidjoe"}, "edited": false, "score": 0, "creation_date": 1553126376, "post_id": 55271561, "comment_id": 97274932, "body": "The three lists x,y and z need to be of the same length, check if it is the case by printing <code>len(x),len(y),len(z)</code>"}, {"owner": {"reputation": 135, "user_id": 9443671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/402f4ec4ce4e3362108cb129f7e9632f?s=128&d=identicon&r=PG&f=1", "display_name": "skidjoe", "link": "https://stackoverflow.com/users/9443671/skidjoe"}, "edited": false, "score": 0, "creation_date": 1553129132, "post_id": 55271561, "comment_id": 97275540, "body": "In this case they&#39;re all ints? So I&#39;m trying to do a while loop (with n as an int counter) inside a for loop (with i as an int counter) and train a model and plot the n and the i  on the axis and have the score in the background, however I keep getting index tuple out of range error. Any ideas? Thank you"}, {"owner": {"reputation": 131, "user_id": 11229511, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-6YJnZkPkOD0/AAAAAAAAAAI/AAAAAAAAAAA/YjfCCww7H30/photo.jpg?sz=128", "display_name": "Hugo Delahaye", "link": "https://stackoverflow.com/users/11229511/hugo-delahaye"}, "reply_to_user": {"reputation": 135, "user_id": 9443671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/402f4ec4ce4e3362108cb129f7e9632f?s=128&d=identicon&r=PG&f=1", "display_name": "skidjoe", "link": "https://stackoverflow.com/users/9443671/skidjoe"}, "edited": false, "score": 0, "creation_date": 1553129339, "post_id": 55271561, "comment_id": 97275577, "body": "Can you udpate your question with the current relevant code ? It&#39;s not clear what your problem is from this comment alone"}, {"owner": {"reputation": 135, "user_id": 9443671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/402f4ec4ce4e3362108cb129f7e9632f?s=128&d=identicon&r=PG&f=1", "display_name": "skidjoe", "link": "https://stackoverflow.com/users/9443671/skidjoe"}, "edited": false, "score": 0, "creation_date": 1553185330, "post_id": 55271561, "comment_id": 97299751, "body": "Any ideas as to why I keep getting index tuple out of range?"}, {"owner": {"reputation": 131, "user_id": 11229511, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-6YJnZkPkOD0/AAAAAAAAAAI/AAAAAAAAAAA/YjfCCww7H30/photo.jpg?sz=128", "display_name": "Hugo Delahaye", "link": "https://stackoverflow.com/users/11229511/hugo-delahaye"}, "reply_to_user": {"reputation": 135, "user_id": 9443671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/402f4ec4ce4e3362108cb129f7e9632f?s=128&d=identicon&r=PG&f=1", "display_name": "skidjoe", "link": "https://stackoverflow.com/users/9443671/skidjoe"}, "edited": false, "score": 0, "creation_date": 1553190397, "post_id": 55271561, "comment_id": 97302575, "body": "try replacing it with ax.scatter([n], [i], c=score1)"}], "tags": [], "owner": {"reputation": 131, "user_id": 11229511, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-6YJnZkPkOD0/AAAAAAAAAAI/AAAAAAAAAAA/YjfCCww7H30/photo.jpg?sz=128", "display_name": "Hugo Delahaye", "link": "https://stackoverflow.com/users/11229511/hugo-delahaye"}, "is_accepted": false, "score": 2, "last_activity_date": 1553183193, "last_edit_date": 1553183193, "creation_date": 1553124146, "answer_id": 55271561, "question_id": 55271471, "link": "https://stackoverflow.com/questions/55271471/plotting-some-third-variable-against-x-and-y-in-matplotlib-scatter/55271561#55271561", "title": "Plotting some third variable against x and y in matplotlib scatter?", "body": "<p>You can use color to plot a third value. Here is a very minimal example :</p>\n\n<pre><code>import matplotlib.pyplot as plt\nimport matplotlib.cm as cm\nimport numpy as np\n\nx = np.random.rand(100)\ny = np.random.rand(100)\nz = np.random.rand(100)\nplt.scatter(x,y, c=z, s=5, cmap=cm.hsv)\ncbar= plt.colorbar()\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/c8tIv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/c8tIv.png\" alt=\"enter image description here\"></a></p>\n\n<hr>\n\n<p><strong>Edit</strong></p>\n\n<p>You could also use the size of markers, their transparency, hue or rgb values to depict even more information. Here is an example with marker size, alpha level and color on a perceptually uniform colormap.</p>\n\n<pre><code>import matplotlib.pyplot as plt\nimport numpy as np\nimport matplotlib.colors as colors\nimport matplotlib.cm as cmx\n\nx = np.random.rand(100)\ny = np.random.rand(100)\nz = np.random.rand(100)\nt = np.random.rand(100)\nw = np.random.rand(100)\nfig, ax = plt.subplots(1, 1)\ncmap = plt.get_cmap('plasma')\ncNorm  = colors.Normalize(vmin=0, vmax=max(z))\nscalarMap = cmx.ScalarMappable(norm=cNorm, cmap=cmap)\nfor i in range(100):\n    ax.scatter(x[i],y[i], c=scalarMap.to_rgba(z[i]), s=t[i]*100, cmap=cmx.plasma, alpha=w[i], edgecolor='none')\nscalarMap.set_array([])\nfig.colorbar(scalarMap,ax=ax)\nfor a in [0.1, 0.5, 0.9]:\n    ax.scatter([], [], c='k', alpha=0.5, s=a*100, label=str(a), edgecolors='none')\nl1 = ax.legend(scatterpoints=1, frameon=True, loc='lower left' ,markerscale=1)\nfor b in [0.25, 0.5, 0.75]:\n    ax.scatter([], [], c='k', alpha=b, s=50, label=str(b), edgecolors='none')\nax.legend(scatterpoints=1, frameon=True, loc='lower right' ,markerscale=1)\nfig.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/MSysJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MSysJ.png\" alt=\"enter image description here\"></a></p>\n"}, {"comments": [{"owner": {"reputation": 135, "user_id": 9443671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/402f4ec4ce4e3362108cb129f7e9632f?s=128&d=identicon&r=PG&f=1", "display_name": "skidjoe", "link": "https://stackoverflow.com/users/9443671/skidjoe"}, "edited": false, "score": 0, "creation_date": 1553185311, "post_id": 55271588, "comment_id": 97299741, "body": "Do you know why I keep getting index tuple out of range error whenever I try to run the code above?"}], "tags": [], "owner": {"reputation": 16300, "user_id": 11015427, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JsY7F.jpg?s=128&g=1", "display_name": "gmds", "link": "https://stackoverflow.com/users/11015427/gmds"}, "is_accepted": false, "score": 1, "last_activity_date": 1553171306, "last_edit_date": 1553171306, "creation_date": 1553124343, "answer_id": 55271588, "question_id": 55271471, "link": "https://stackoverflow.com/questions/55271471/plotting-some-third-variable-against-x-and-y-in-matplotlib-scatter/55271588#55271588", "title": "Plotting some third variable against x and y in matplotlib scatter?", "body": "<p>At face value, that question doesn't <em>really</em> make sense because a conventional scatterplot has only two axes, and of course you can't plot points with three dimensions (x, y  and accuracy).</p>\n\n<p>However, there are alternative ways to do so.</p>\n\n<ol>\n<li>Use colours</li>\n</ol>\n\n<pre><code>import numpy as np\nfrom matplotlib import pyplot as plt\n\nx = np.random.rand(200)\ny = np.random.rand(200)\n\nfig, ax = plt.subplots(figsize=(5, 5))\nax.scatter(x, y, c=(x + y), cmap='RdPu')\n</code></pre>\n\n<p><code>scatter</code> takes a <code>c</code> argument, which can be a numeric value, as well as a <code>cmap</code> argument, which can be a string referencing a <code>colormap</code>.</p>\n\n<p>The <code>colormap</code> object translates the numbers provided in <code>c</code> into points along a colour mapping, which you can think of as a gradient bar. </p>\n\n<ol start=\"2\">\n<li>Use 3D axes</li>\n</ol>\n\n<pre><code>from mpl_toolkits.mplot3d import Axes3D\n\nfig = plt.figure(figsize=(5, 5))\nax = Axes3D(fig)\n\nax.scatter(x, y, (x + y))\n</code></pre>\n\n<p>This turns your 3rd dimension, accuracy, into an ordinary spatial dimension.</p>\n\n<ol start=\"3\">\n<li>Use size of the markers</li>\n</ol>\n\n<p>Very similar to the color option in the first part, you can change the size of the scatter markers (given you have some idea about the scale of the values). So based on the first example, you can also do;</p>\n\n<pre><code>import numpy as np\nfrom matplotlib import pyplot as plt\n\nx = np.random.rand(200)\ny = np.random.rand(200)\n\nfig, ax = plt.subplots(figsize=(5, 5))\nax.scatter(x, y, c='k', s=5*(x + y), cmap='RdPu')\n</code></pre>\n\n<p><code>scatter</code> takes also the <code>s</code> argument, that changes the size of the markers.</p>\n"}], "owner": {"reputation": 135, "user_id": 9443671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/402f4ec4ce4e3362108cb129f7e9632f?s=128&d=identicon&r=PG&f=1", "display_name": "skidjoe", "link": "https://stackoverflow.com/users/9443671/skidjoe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1718, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1553192053, "creation_date": 1553123563, "last_edit_date": 1553192053, "question_id": 55271471, "link": "https://stackoverflow.com/questions/55271471/plotting-some-third-variable-against-x-and-y-in-matplotlib-scatter", "title": "Plotting some third variable against x and y in matplotlib scatter?", "body": "<p>I'm fairly new to scatter plots and python in general. I am trying to plot a third variable against an x and a y, however, I'm not quite sure how to about specifying that argument? So I would have X values which are ints, y values which are also ints and then on the graph itself I want the model scores to show. Is there any way to do this sort of thing?</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["python", "django", "serialization"], "comments": [{"owner": {"reputation": 54482, "user_id": 8283848, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/YiHgN.jpg?s=128&g=1", "display_name": "JPG", "link": "https://stackoverflow.com/users/8283848/jpg"}, "edited": false, "score": 0, "creation_date": 1553140088, "post_id": 55271443, "comment_id": 97277863, "body": "The key error raised because you didn&#39;t provided <code>duration</code> data on your post payload"}, {"owner": {"reputation": 103, "user_id": 10841685, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8Kdi-Ov9kSA/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZtzz0JOB9Pv9zTALjAU-YxVfcdZA/mo/photo.jpg?sz=128", "display_name": "Banks", "link": "https://stackoverflow.com/users/10841685/banks"}, "reply_to_user": {"reputation": 54482, "user_id": 8283848, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/YiHgN.jpg?s=128&g=1", "display_name": "JPG", "link": "https://stackoverflow.com/users/8283848/jpg"}, "edited": false, "score": 0, "creation_date": 1553140309, "post_id": 55271443, "comment_id": 97277897, "body": "I did it in my payload, I have uploaded the payload"}], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 10841685, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8Kdi-Ov9kSA/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZtzz0JOB9Pv9zTALjAU-YxVfcdZA/mo/photo.jpg?sz=128", "display_name": "Banks", "link": "https://stackoverflow.com/users/10841685/banks"}, "edited": false, "score": 0, "creation_date": 1553133132, "post_id": 55272546, "comment_id": 97276396, "body": "But there is a field named <code>duration</code>. It is in my model, I have put it in the question. And I think I am already doing what you are recommending."}, {"owner": {"reputation": 547, "user_id": 1084033, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bToTX.png?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/1084033/daniel"}, "reply_to_user": {"reputation": 103, "user_id": 10841685, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8Kdi-Ov9kSA/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZtzz0JOB9Pv9zTALjAU-YxVfcdZA/mo/photo.jpg?sz=128", "display_name": "Banks", "link": "https://stackoverflow.com/users/10841685/banks"}, "edited": false, "score": 0, "creation_date": 1553178323, "post_id": 55272546, "comment_id": 97295086, "body": "JPG got it. After your edit it became clear that the problem was you were accessing the wrong key..."}], "tags": [], "owner": {"reputation": 547, "user_id": 1084033, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bToTX.png?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/1084033/daniel"}, "is_accepted": false, "score": 0, "last_activity_date": 1553132054, "creation_date": 1553132054, "answer_id": 55272546, "question_id": 55271443, "link": "https://stackoverflow.com/questions/55271443/how-to-solve-key-error-in-nested-representation-of-a-model-in-django/55272546#55272546", "title": "How to solve key error in nested representation of a model in django", "body": "<p>The error doesn't seem to have anything to do with your model structure. Since it's a <code>KeyError</code>, the problem is that there is no value in <code>request.data</code> associated with the key <code>duration</code>.</p>\n\n<p>In other words, you must be calling your API without a field named <code>durantion</code> in the request body.</p>\n\n<p>Make sure you to call the API endpoint including in the request body all the field you try to access in the your code and this error should disapear.</p>\n"}, {"tags": [], "owner": {"reputation": 54482, "user_id": 8283848, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/YiHgN.jpg?s=128&g=1", "display_name": "JPG", "link": "https://stackoverflow.com/users/8283848/jpg"}, "is_accepted": true, "score": 2, "last_activity_date": 1553140573, "creation_date": 1553140573, "answer_id": 55273539, "question_id": 55271443, "link": "https://stackoverflow.com/questions/55271443/how-to-solve-key-error-in-nested-representation-of-a-model-in-django/55273539#55273539", "title": "How to solve key error in nested representation of a model in django", "body": "<p>Try this snippet,</p>\n\n<pre><code>class RegisterValues(generics.ListCreateAPIView):\n    ''' GET/POST  urltemp/{ID = pk}'''\n    queryset = MyModel.objects.all()\n    serializer_class = OriginalSerializer\n\n    def post(self, request, *args, **kwargs):\n        s1 = OtherModel.objects.get(mRID=kwargs[\"pk\"])\n        a_temp = MyModel.objects.create(\n            ID=s1,\n            value=request.data[\"value\"],\n            <b>duration=request.data[\"timePeriod\"][\"duration\"],\n            start=request.data[\"timePeriod\"][\"start\"], )</b>\n        return Response(data=OriginalSerializer(a_temp).data)</code></pre>\n"}], "owner": {"reputation": 103, "user_id": 10841685, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8Kdi-Ov9kSA/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZtzz0JOB9Pv9zTALjAU-YxVfcdZA/mo/photo.jpg?sz=128", "display_name": "Banks", "link": "https://stackoverflow.com/users/10841685/banks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 55273539, "answer_count": 2, "score": 0, "last_activity_date": 1553140573, "creation_date": 1553123294, "last_edit_date": 1553140285, "question_id": 55271443, "link": "https://stackoverflow.com/questions/55271443/how-to-solve-key-error-in-nested-representation-of-a-model-in-django", "title": "How to solve key error in nested representation of a model in django", "body": "<p>This is my model:</p>\n\n<pre><code>class MyModel(models.Model):\n    ID = models.ForeignKey(OtherModel,related_name='NewModel', on_delete=models.CASCADE)\n    start = models.BigIntegerField()\n    duration = models.BigIntegerField(default= 30)\n    value = models.IntegerField()\n</code></pre>\n\n<p>where OtherModel has 2 fields, biginteger and foreignkey. I am trying to create an instance of the MyModel and it gives me a key error. The serializer is as below: </p>\n\n<pre><code>class ModifyReadingSerializer(serializers.Serializer):\n    duration =  serializers.IntegerField()\n    start =  serializers.IntegerField()\n\nclass OriginalSerializer(serializers.ModelSerializer):\n    timePeriod = ModifyReadingSerializer(source = '*')\n    class Meta:\n        model = MyModel\n        fields = ('timePeriod', 'value',)\n</code></pre>\n\n<p>And the view to create it shown below:</p>\n\n<pre><code>class RegisterValues(generics.ListCreateAPIView):\n    ''' GET/POST  urltemp/{ID = pk}'''\n    queryset = MyModel.objects.all()\n    serializer_class = OriginalSerializer\n\n    def post(self, request, *args, **kwargs):\n        s1 = OtherModel.objects.get(mRID=kwargs[\"pk\"])\n        a_temp = MyModel.objects.create(\n            ID=s1,\n            value=request.data[\"value\"],\n            duration=request.data[\"duration\"],\n            start=request.data[\"start\"],)\n        return Response(data=OriginalSerializer(a_temp).data)\n</code></pre>\n\n<p>I get the following error KeyError at <code>/urltemp/1  'duration'</code>. I understand why I am getting the error but not sure how to fix it while maintaining the nested representation. And I can see the error is in the line where I am creating duration (I can see it in the terminal).</p>\n\n<p><strong>EDIT: ADDED THE PAYLOAD</strong></p>\n\n<pre><code>{\n    \"timePeriod\": {\n        \"duration\": 30,\n        \"start\": 24\n    },\n    \"value\": 34,\n}\n</code></pre>\n"}, {"tags": ["python", "unit-testing", "selenium", "attributeerror"], "comments": [{"owner": {"reputation": 155, "user_id": 3948832, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/4f56fb7a85b1ea099e7c3ffa4dbb4a48?s=128&d=identicon&r=PG&f=1", "display_name": "Kipi", "link": "https://stackoverflow.com/users/3948832/kipi"}, "edited": false, "score": 0, "creation_date": 1553123467, "post_id": 55271398, "comment_id": 97274111, "body": "Your &quot;setup&quot; function should be called &quot;setUp&quot; in order to be invoke first"}, {"owner": {"reputation": 1, "user_id": 10332550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12717e8d3aa5a87aa00c40da0d152551?s=128&d=identicon&r=PG&f=1", "display_name": "S-Iran", "link": "https://stackoverflow.com/users/10332550/s-iran"}, "reply_to_user": {"reputation": 155, "user_id": 3948832, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/4f56fb7a85b1ea099e7c3ffa4dbb4a48?s=128&d=identicon&r=PG&f=1", "display_name": "Kipi", "link": "https://stackoverflow.com/users/3948832/kipi"}, "edited": false, "score": 0, "creation_date": 1553124662, "post_id": 55271398, "comment_id": 97274458, "body": "Thank you so much! Did you notice that from the errors? Or Just off reading the method?  Now I have different errors. I inspected the elements on Google and they still have the correct names so I&#39;m not sure why they can&#39;t be found.  NoSuchElementException: Message: no such element: Unable to locate element: {&quot;method&quot;:&quot;name&quot;,&quot;selector&quot;:&quot;btnk&quot;}"}, {"owner": {"reputation": 155, "user_id": 3948832, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/4f56fb7a85b1ea099e7c3ffa4dbb4a48?s=128&d=identicon&r=PG&f=1", "display_name": "Kipi", "link": "https://stackoverflow.com/users/3948832/kipi"}, "edited": false, "score": 0, "creation_date": 1553124766, "post_id": 55271398, "comment_id": 97274489, "body": "Please update your question"}, {"owner": {"reputation": 1, "user_id": 10332550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12717e8d3aa5a87aa00c40da0d152551?s=128&d=identicon&r=PG&f=1", "display_name": "S-Iran", "link": "https://stackoverflow.com/users/10332550/s-iran"}, "reply_to_user": {"reputation": 155, "user_id": 3948832, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/4f56fb7a85b1ea099e7c3ffa4dbb4a48?s=128&d=identicon&r=PG&f=1", "display_name": "Kipi", "link": "https://stackoverflow.com/users/3948832/kipi"}, "edited": false, "score": 0, "creation_date": 1553124968, "post_id": 55271398, "comment_id": 97274554, "body": "Question updated."}, {"owner": {"reputation": 155, "user_id": 3948832, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/4f56fb7a85b1ea099e7c3ffa4dbb4a48?s=128&d=identicon&r=PG&f=1", "display_name": "Kipi", "link": "https://stackoverflow.com/users/3948832/kipi"}, "edited": false, "score": 0, "creation_date": 1553125781, "post_id": 55271398, "comment_id": 97274762, "body": "In your html there is no element named &quot;btnk&quot;, it is pretty straight forward"}, {"owner": {"reputation": 1, "user_id": 10332550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12717e8d3aa5a87aa00c40da0d152551?s=128&d=identicon&r=PG&f=1", "display_name": "S-Iran", "link": "https://stackoverflow.com/users/10332550/s-iran"}, "reply_to_user": {"reputation": 155, "user_id": 3948832, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/4f56fb7a85b1ea099e7c3ffa4dbb4a48?s=128&d=identicon&r=PG&f=1", "display_name": "Kipi", "link": "https://stackoverflow.com/users/3948832/kipi"}, "edited": false, "score": 0, "creation_date": 1553205251, "post_id": 55271398, "comment_id": 97308863, "body": "I understand what you&#39;re saying. My question is why is it saying that. When I go to google right now and inspect the search button the name is &quot;btnk&quot;. As I said, I&#39;m following a Udemy video step by step so I don&#39;t understand why it&#39;s working for him and not me. I don&#39;t care if I use a different selector and it works. I just want to know why I need to do that and he doesn&#39;t."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10332550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12717e8d3aa5a87aa00c40da0d152551?s=128&d=identicon&r=PG&f=1", "display_name": "S-Iran", "link": "https://stackoverflow.com/users/10332550/s-iran"}, "edited": false, "score": 0, "creation_date": 1553205314, "post_id": 55272727, "comment_id": 97308887, "body": "Thank you. Is this the preferred method?"}, {"owner": {"reputation": 26505, "user_id": 10885684, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66b93ef11f20d07cf796af83ae1ffe83?s=128&d=identicon&r=PG&f=1", "display_name": "KunduK", "link": "https://stackoverflow.com/users/10885684/kunduk"}, "reply_to_user": {"reputation": 1, "user_id": 10332550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12717e8d3aa5a87aa00c40da0d152551?s=128&d=identicon&r=PG&f=1", "display_name": "S-Iran", "link": "https://stackoverflow.com/users/10332550/s-iran"}, "edited": false, "score": 0, "creation_date": 1553206515, "post_id": 55272727, "comment_id": 97309287, "body": "Yes.Can you accept my answer by clicking accept to my code message."}], "tags": [], "owner": {"reputation": 26505, "user_id": 10885684, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66b93ef11f20d07cf796af83ae1ffe83?s=128&d=identicon&r=PG&f=1", "display_name": "KunduK", "link": "https://stackoverflow.com/users/10885684/kunduk"}, "is_accepted": false, "score": 1, "last_activity_date": 1553133522, "creation_date": 1553133522, "answer_id": 55272727, "question_id": 55271398, "link": "https://stackoverflow.com/questions/55271398/udemy-selenium-tutorial-no-such-element-unable-to-locate-element-method/55272727#55272727", "title": "Udemy Selenium Tutorial - no such element: Unable to locate element: {&quot;method&quot;:&quot;name&quot;,&quot;selector&quot;:&quot;btnk&quot;}", "body": "<p>Instead of click on button which is not present when you do <code>sendKeys</code> you can use <code>element.submit()</code></p>\n\n<p>Instead of this.</p>\n\n<pre><code>self.driver.get(\"http://www.google.com\")\n  self.driver.find_element_by_name(\"q\").send_keys(\"Automation step by step\")\n  self.driver.find_element_by_name(\"btnk\").click()\n</code></pre>\n\n<p>Try this.</p>\n\n<pre><code>element=self.driver.find_element_by_name(\"q\")\nelement.send_keys(\"Automation step by step\")\nelement.submit()\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10332550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12717e8d3aa5a87aa00c40da0d152551?s=128&d=identicon&r=PG&f=1", "display_name": "S-Iran", "link": "https://stackoverflow.com/users/10332550/s-iran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 204, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1553133522, "creation_date": 1553122985, "last_edit_date": 1553125506, "question_id": 55271398, "link": "https://stackoverflow.com/questions/55271398/udemy-selenium-tutorial-no-such-element-unable-to-locate-element-method", "title": "Udemy Selenium Tutorial - no such element: Unable to locate element: {&quot;method&quot;:&quot;name&quot;,&quot;selector&quot;:&quot;btnk&quot;}", "body": "<p>I have EXACTLY (character, spacing indentation) what the instructor has in the Udemy tutorial. His test is running fine but mine is getting errors. Please review below. Thanks!</p>\n\n<pre><code>import unittest\nfrom selenium import webdriver\n\n\nclass MyTestCase(unittest.TestCase):\n\n    def setup(self):\n        self.driver = webdriver.Chrome(executable_path=\"../Drivers/chromedriver.exe\")\n        self.driver.implicitly_wait(10)\n        self.driver.maximize_window()\n\n    def test_search(self):\n        self.driver.get(\"http://www.google.com\")\n        self.driver.find_element_by_name(\"q\").send_keys(\"Automation step by step\")\n        self.driver.find_element_by_name(\"btnk\").click()\n        x = self.driver.title\n        print(x)\n        self.assertEqual(x, \"Automation step by step\")\n\n    def tearDown(self):\n        self.driver.close()\n        self.driver.quit()\n</code></pre>\n\n<p>Error\nTraceback (most recent call last):\n  File \"C:\\Python27\\Lib\\unittest\\case.py\", line 329, in run\n    testMethod()</p>\n\n<p>File \"C:\\Users\\S-Iran\\PycharmProjects\\Demo\\Demo_1\\utest1.py\", line 15, in test_search\n    self.driver.find_element_by_name(\"btnk\").click()</p>\n\n<p>File \"C:\\Users\\S-Iran\\PycharmProjects\\Demo\\venv\\lib\\site-packages\\selenium\\webdriver\\remote\\webdriver.py\", line 496, in find_element_by_name\n    return self.find_element(by=By.NAME, value=name)</p>\n\n<p>File \"C:\\Users\\S-Iran\\PycharmProjects\\Demo\\venv\\lib\\site-packages\\selenium\\webdriver\\remote\\webdriver.py\", line 978, in find_element\n    'value': value})['value']</p>\n\n<p>File \"C:\\Users\\S-Iran\\PycharmProjects\\Demo\\venv\\lib\\site-packages\\selenium\\webdriver\\remote\\webdriver.py\", line 321, in execute\n    self.error_handler.check_response(response)</p>\n\n<p>File \"C:\\Users\\S-Iran\\PycharmProjects\\Demo\\venv\\lib\\site-packages\\selenium\\webdriver\\remote\\errorhandler.py\", line 242, in check_response\n    raise exception_class(message, screen, stacktrace)</p>\n\n<p>NoSuchElementException: Message: no such element: Unable to locate element: {\"method\":\"name\",\"selector\":\"btnk\"}\n  (Session info: chrome=72.0.3626.121)\n  (Driver info: chromedriver=2.45.615291 (ec3682e3c9061c10f26ea9e5cdcf3c53f3f74387),platform=Windows NT 10.0.17134 x86_64)</p>\n"}, {"tags": ["python", "pandas", "csv"], "comments": [{"owner": {"reputation": 23213, "user_id": 7131757, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wvEUE.jpg?s=128&g=1", "display_name": "Giorgos Myrianthous", "link": "https://stackoverflow.com/users/7131757/giorgos-myrianthous"}, "edited": false, "score": 1, "creation_date": 1553122855, "post_id": 55271352, "comment_id": 97273924, "body": "You need to provide some sample data."}, {"owner": {"reputation": 1807, "user_id": 6947349, "user_type": "registered", "profile_image": "https://graph.facebook.com/1682570098663073/picture?type=large", "display_name": "Samuel Nde", "link": "https://stackoverflow.com/users/6947349/samuel-nde"}, "edited": false, "score": 0, "creation_date": 1553124509, "post_id": 55271352, "comment_id": 97274420, "body": "@johnbowen did you check my answer below?"}], "answers": [{"comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1553123825, "post_id": 55271395, "comment_id": 97274215, "body": "It really shouldn&#39;t. That is not an in-place change to a dataframe. What version of pandas?"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1553123961, "post_id": 55271395, "comment_id": 97274259, "body": "Well, your edit now shows the problem. <code>print()</code> does <i>not</i> reflect in-place changes to dataframes. I posted a link proving it, you can&#39;t run this in REPL; your code does not affect the original df"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1553124037, "post_id": 55271395, "comment_id": 97274275, "body": "And your further edit continues the issue. <code>print()</code> is throw-away. Nothing is assigned back to a name that exists in the program so it&#39;s as though it never happened."}, {"owner": {"reputation": 23213, "user_id": 7131757, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wvEUE.jpg?s=128&g=1", "display_name": "Giorgos Myrianthous", "link": "https://stackoverflow.com/users/7131757/giorgos-myrianthous"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1553124234, "post_id": 55271395, "comment_id": 97274328, "body": "@roganjosh This was just an example. The OP does not ask for any in-place changes. Anyway, I&#39;ve edited my answer to assign the output of the operation to a variable."}], "tags": [], "owner": {"reputation": 23213, "user_id": 7131757, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wvEUE.jpg?s=128&g=1", "display_name": "Giorgos Myrianthous", "link": "https://stackoverflow.com/users/7131757/giorgos-myrianthous"}, "is_accepted": false, "score": 1, "last_activity_date": 1553124106, "last_edit_date": 1553124106, "creation_date": 1553122973, "answer_id": 55271395, "question_id": 55271352, "link": "https://stackoverflow.com/questions/55271352/return-sum-for-single-day-using-pandas/55271395#55271395", "title": "Return Sum for Single Day using Pandas", "body": "<pre><code>total_money = df.loc[df['day'] == '20/03/2019', 'money'].sum()\n</code></pre>\n\n<p>should do the trick. </p>\n\n<p>For example, </p>\n\n<pre><code>import pandas as pd\n\ndf = pd.DataFrame({'day': ['20/03/2019', '21/03/2019', '20/03/2019'],\n                   'money': [1, 5, 7]})\nprint(df)\n\nprint('Total money for 20/03/2019: ' + str(df.loc[df['day'] == '20/03/2019', 'money'].sum()))\n</code></pre>\n\n<p>should give the desired output </p>\n\n<pre><code>          day  money\n0  20/03/2019      1\n1  21/03/2019      5\n2  20/03/2019      7\nTotal money for 20/03/2019: 8\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1807, "user_id": 6947349, "user_type": "registered", "profile_image": "https://graph.facebook.com/1682570098663073/picture?type=large", "display_name": "Samuel Nde", "link": "https://stackoverflow.com/users/6947349/samuel-nde"}, "is_accepted": true, "score": 0, "last_activity_date": 1553124183, "last_edit_date": 1553124183, "creation_date": 1553123812, "answer_id": 55271505, "question_id": 55271352, "link": "https://stackoverflow.com/questions/55271352/return-sum-for-single-day-using-pandas/55271505#55271505", "title": "Return Sum for Single Day using Pandas", "body": "<p>Let us define <code>df</code> as follows:</p>\n\n<pre><code>import pandas as pd\ndf = pd.DataFrame(data = [['day1', 2900, 3000], ['day2', 3300, 3350], ['day3', 3200, 3150], ['day1', 3200, 3050]], columns = 'day, money, close'.split(', '))\n</code></pre>\n\n<p>Here is what <code>df</code> looks like.</p>\n\n<pre><code>df\n&gt;&gt;&gt;\n     day    money   close\n0   day1    2900    3000\n1   day2    3300    3350\n2   day3    3200    3150\n3   day1    3200    3050\n</code></pre>\n\n<p>Suppose I want to get the <code>sum</code> of <strong>money</strong> for <code>day</code> which we can easily see to be 6100, I would do the following.</p>\n\n<pre><code>df[df.day == 'day1']['money'].sum()\n&gt;&gt;&gt;6100\n</code></pre>\n"}], "owner": {"reputation": 121, "user_id": 4957577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4657c9619136a25fdc117347b5a1c6a3?s=128&d=identicon&r=PG&f=1", "display_name": "johnbowen", "link": "https://stackoverflow.com/users/4957577/johnbowen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 55271505, "answer_count": 2, "score": 0, "last_activity_date": 1553124183, "creation_date": 1553122665, "last_edit_date": 1553123891, "question_id": 55271352, "link": "https://stackoverflow.com/questions/55271352/return-sum-for-single-day-using-pandas", "title": "Return Sum for Single Day using Pandas", "body": "<p>I am working with a CSV file and I need to return the sum of data for a specific day. Thus far I have been able to break the code into this:</p>\n\n<pre><code>import panda as pd\ndf = pd.read_csv (r'C:Users\\ern\\Downloads\\evergreen.csv')\nsum_imps = df['money'].sum() #sum the total of the money column\nsumimps_byday = df.groupby(['day'])[[\"money\"]].sum() #groups the sum of the money column by day\n</code></pre>\n\n<p>Now all i need is to be able to take it one step further and rerun the sum of money for a a specific day of my choosing. I don't think this is too hard, just drawing a blank.</p>\n"}, {"tags": ["javascript", "python", "cookies", "flask"], "comments": [{"owner": {"reputation": 155, "user_id": 3948832, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/4f56fb7a85b1ea099e7c3ffa4dbb4a48?s=128&d=identicon&r=PG&f=1", "display_name": "Kipi", "link": "https://stackoverflow.com/users/3948832/kipi"}, "edited": false, "score": 0, "creation_date": 1553123724, "post_id": 55271295, "comment_id": 97274186, "body": "You forget that cookies stored by domain try to set the cookie from the same domain resp.set_cookie(&quot;cacheValue&quot;, &quot;&quot;, domain=&quot;same domain set by the client&quot;)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10432832"}, "reply_to_user": {"reputation": 155, "user_id": 3948832, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/4f56fb7a85b1ea099e7c3ffa4dbb4a48?s=128&d=identicon&r=PG&f=1", "display_name": "Kipi", "link": "https://stackoverflow.com/users/3948832/kipi"}, "edited": false, "score": 0, "creation_date": 1553124456, "post_id": 55271295, "comment_id": 97274400, "body": "I changed each of the set_cookie functions to <code>resp.set_cookie(&quot;cachedOffset&quot;, &quot;&quot;, domain=&quot;localhost&quot;)</code> . I based this off the cookies in Google inspector but it still is not clearing them. The image is now attached."}, {"owner": {"reputation": 155, "user_id": 3948832, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/4f56fb7a85b1ea099e7c3ffa4dbb4a48?s=128&d=identicon&r=PG&f=1", "display_name": "Kipi", "link": "https://stackoverflow.com/users/3948832/kipi"}, "edited": false, "score": 0, "creation_date": 1553124582, "post_id": 55271295, "comment_id": 97274440, "body": "Do you see that the return cookie on the client has beed changed?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10432832"}, "reply_to_user": {"reputation": 155, "user_id": 3948832, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/4f56fb7a85b1ea099e7c3ffa4dbb4a48?s=128&d=identicon&r=PG&f=1", "display_name": "Kipi", "link": "https://stackoverflow.com/users/3948832/kipi"}, "edited": false, "score": 0, "creation_date": 1553125042, "post_id": 55271295, "comment_id": 97274570, "body": "It has not changed anything. The values have not been set to <code>&quot;&quot;</code>."}, {"owner": {"reputation": 155, "user_id": 3948832, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/4f56fb7a85b1ea099e7c3ffa4dbb4a48?s=128&d=identicon&r=PG&f=1", "display_name": "Kipi", "link": "https://stackoverflow.com/users/3948832/kipi"}, "edited": false, "score": 0, "creation_date": 1553125114, "post_id": 55271295, "comment_id": 97274591, "body": "On js side use cookie.setDomain(&#39;127.0.0.1&#39;) and in the server side as the domain for the set cookie function"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10432832"}, "reply_to_user": {"reputation": 155, "user_id": 3948832, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/4f56fb7a85b1ea099e7c3ffa4dbb4a48?s=128&d=identicon&r=PG&f=1", "display_name": "Kipi", "link": "https://stackoverflow.com/users/3948832/kipi"}, "edited": false, "score": 0, "creation_date": 1553125538, "post_id": 55271295, "comment_id": 97274708, "body": "Still nothing. I don&#39;t think that would make a difference anyway if the domain is already set to localhost in the inspector. It is very strange that I am able to retrieve these cookies, but not modify the cookies in any way."}, {"owner": {"reputation": 155, "user_id": 3948832, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/4f56fb7a85b1ea099e7c3ffa4dbb4a48?s=128&d=identicon&r=PG&f=1", "display_name": "Kipi", "link": "https://stackoverflow.com/users/3948832/kipi"}, "edited": false, "score": 0, "creation_date": 1553126058, "post_id": 55271295, "comment_id": 97274851, "body": "Try this changing flask app.run(&#39;localhost&#39;), and the without changing the js cookie to 127.0.0.1 <a href=\"https://stackoverflow.com/questions/27254013/why-does-the-session-cookie-work-when-serving-from-a-domain-but-not-when-using-a\" title=\"why does the session cookie work when serving from a domain but not when using a\">stackoverflow.com/questions/27254013/&hellip;</a>"}], "owner": {"user_type": "does_not_exist", "display_name": "user10432832"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 592, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1553124478, "creation_date": 1553122252, "last_edit_date": 1553124478, "question_id": 55271295, "link": "https://stackoverflow.com/questions/55271295/how-to-clear-specific-cookies-using-flask", "title": "How to clear specific cookies using Flask", "body": "<p>I create cookies with Java Script and refresh the page like so...</p>\n\n<pre><code>document.cookie = \"driveValue=\" + \"Runner\"\ndocument.cookie = \"cachedOffset=\" + \"56\"\nlocation.reload()\n</code></pre>\n\n<p>I then retrieve a dictionary of the cookies with Python Flask showed below...</p>\n\n<pre><code>@app.route('/config', methods=('GET', 'POST'))\ndef config():\ncookie = request.cookies\ncookieItems = cookie.items()\n</code></pre>\n\n<p>Now that I have a dictionary mapping the name to the values, i want to clear those specific cookies (or change the value to an empty string). How do I go about doing this. So far, I have tried this example listed below...</p>\n\n<pre><code>resp = make_response(render_template('master.html', form=form, cookieItems=cookieItems)\nresp.set_cookie(\"cachedOffset\", \"\", expires=0)\nresp.set_cookie(\"driveValue\", \"\", expires=0)\nreturn resp\n</code></pre>\n\n<p>I thought this would work but it is not changing any of the cookies to an empty space.</p>\n\n<p>Here is where the cookies are located that I would like to change. <a href=\"https://i.stack.imgur.com/7ob46.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7ob46.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "flask", "sqlalchemy", "flask-sqlalchemy"], "answers": [{"comments": [{"owner": {"reputation": 675, "user_id": 9183027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7c8a5ea9b56a1f1fc9776b0225433c9?s=128&d=identicon&r=PG&f=1", "display_name": "Kay", "link": "https://stackoverflow.com/users/9183027/kay"}, "edited": false, "score": 1, "creation_date": 1553316559, "post_id": 55309845, "comment_id": 97348849, "body": "Hi polymath, before I saw your answer, I tried adding the new column in the table definition class, and in the initialization function, I wrote code to check if the field exist in the database.  If it does not exist, it adds the field to the table in the database with default value to make sure the table definition class matches with the database.  It works fine.  Now, I am wondering why migration would be better option in this case.  I understand making work and doing things in proper way are two different things.  I really want to learn.  Thanks for your help."}, {"owner": {"reputation": 679, "user_id": 8165283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d81daac9c269c34b6fc40b66d278236a?s=128&d=identicon&r=PG&f=1", "display_name": "polymath", "link": "https://stackoverflow.com/users/8165283/polymath"}, "reply_to_user": {"reputation": 675, "user_id": 9183027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7c8a5ea9b56a1f1fc9776b0225433c9?s=128&d=identicon&r=PG&f=1", "display_name": "Kay", "link": "https://stackoverflow.com/users/9183027/kay"}, "edited": false, "score": 1, "creation_date": 1553317563, "post_id": 55309845, "comment_id": 97348978, "body": "In my opinion, database migrations are very important for a few reasons. Firstly, they standardise changes across databases (ie your development database, your production database etc) which reduces the risk of errors. Secondly, it provides versioning of your database so you can revert back if you do make mistakes (which we all do). And finally it can be automated so it&#39;s easier for you to update next time."}], "tags": [], "owner": {"reputation": 679, "user_id": 8165283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d81daac9c269c34b6fc40b66d278236a?s=128&d=identicon&r=PG&f=1", "display_name": "polymath", "link": "https://stackoverflow.com/users/8165283/polymath"}, "is_accepted": true, "score": 10, "last_activity_date": 1614298044, "last_edit_date": 1614298044, "creation_date": 1553305661, "answer_id": 55309845, "question_id": 55271239, "link": "https://stackoverflow.com/questions/55271239/sqlalchemy-how-to-add-column-to-existing-table/55309845#55309845", "title": "SQLAlchemy: How to add column to existing table?", "body": "<h2>TL;DR</h2>\n<p>Install flask-migrate with <code>pip</code> or in your <code>requirements.txt</code>, then once you add your new column in your models:</p>\n<pre><code>flask db init\nflask db migrate -m &quot;Adding column x.&quot;\nflask db upgrade\n</code></pre>\n<h2>Flask-Migrate</h2>\n<p>What you\u2019re looking for is called a <strong>database migration</strong>. Using something like <a href=\"https://flask-migrate.readthedocs.io/en/latest/\" rel=\"nofollow noreferrer\">Flask-Migrate</a> allows you to change the database schema - adding or deleting columns - without losing your data. It also versions these database migrations so you can revert back if necessary.</p>\n<p>Flask-Migrate uses the Alembic module so they both have the same functionality, Flask-Migrate is used to correctly setup alembic with your Flask and SQL-Alchemy application.</p>\n<h2>If your app is pre-production:</h2>\n<p>Here is a great video by <a href=\"https://youtu.be/BAOfjPuVby0\" rel=\"nofollow noreferrer\">Pretty Printed</a> for setting up Flask-Migrate. Note that Flask-Migrate is intended for Flask applications that are using SQL-Alchemy as the ORM.</p>\n<h2>If your app is post-production:</h2>\n<p>You have two options.</p>\n<ol>\n<li>If you only want to track database migrations going forward (easier option)</li>\n</ol>\n<p>Run <code>flask db init</code>, to create the migration repository.\nAdd the new column to your database model.</p>\n<p>Run <code>flask db migrate</code>, to generate a migration. The migration script will only have the new column in it.</p>\n<p>Run <code>flask db upgrade</code> to apply the new migration to your database.</p>\n<p>At this point your database should have the new column, and you can continue working. Repeat the above steps any time you need to make additional changes.</p>\n<p>Note that with this approach, you cannot recreate the entire database from scratch. You have to have a way to initialize the database to the schema you had on Day 1, and then you can apply the migration history to that to upgrade it to your current schema.</p>\n<ol start=\"2\">\n<li>If you want to keep track of the entire migration history, including the schema on the day you are adding Flask-Migrate to your application.</li>\n</ol>\n<p>Start with <code>flask db init</code>, to create the migration repository.\nNext, you need to trick Flask-Migrate into thinking your database is empty. You can do this by renaming your actual db, and creating a new db with the same name that has no tables in it.</p>\n<p>In that state, run <code>flask db migrate</code>. This will generate a migration that contains the entire schema of your database.\nOnce you have that initial migration, restore your database to the correct state.</p>\n<p>Run <code>flask db stamp head</code> to mark the database as updated.\nAdd the new column to your database model.</p>\n<p>Run <code>flask db migrate</code> again, to generate a second migration. The migration script will only have the new column in it.</p>\n<p>Run <code>flask db upgrade</code> to apply the new migration to your database.</p>\n"}, {"tags": [], "owner": {"reputation": 739, "user_id": 10000206, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EfyLX.jpg?s=128&g=1", "display_name": "Rishabh Jhalani", "link": "https://stackoverflow.com/users/10000206/rishabh-jhalani"}, "is_accepted": false, "score": 2, "last_activity_date": 1608016824, "creation_date": 1608016824, "answer_id": 65301554, "question_id": 55271239, "link": "https://stackoverflow.com/questions/55271239/sqlalchemy-how-to-add-column-to-existing-table/65301554#65301554", "title": "SQLAlchemy: How to add column to existing table?", "body": "<p>You can simply add a column in your model and then run the following commands.</p>\n<pre><code>flask db migrate -m &quot;Your Message.&quot;\n</code></pre>\n<p>Then Run:</p>\n<pre><code>flask db upgrade\n</code></pre>\n<p>Now check your database.\nAlso, you can take reference from <a href=\"https://flask-migrate.readthedocs.io/en/latest/\" rel=\"nofollow noreferrer\">Here</a></p>\n"}], "owner": {"reputation": 675, "user_id": 9183027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7c8a5ea9b56a1f1fc9776b0225433c9?s=128&d=identicon&r=PG&f=1", "display_name": "Kay", "link": "https://stackoverflow.com/users/9183027/kay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10708, "favorite_count": 0, "accepted_answer_id": 55309845, "answer_count": 2, "score": 6, "last_activity_date": 1614298044, "creation_date": 1553121877, "last_edit_date": 1553198587, "question_id": 55271239, "link": "https://stackoverflow.com/questions/55271239/sqlalchemy-how-to-add-column-to-existing-table", "title": "SQLAlchemy: How to add column to existing table?", "body": "<p>I am trying to add a field or column to an existing table using SQLAchemy.</p>\n\n<p>Below is the table class</p>\n\n<pre><code>class ReleaseVersion(Base):\n\n    __tablename__ = 'versions'\n\n    id = Column(Integer, primary_key=True, autoincrement=True)\n    release = Column(String(128), nullable=False, unique=True)\n\n\n    def __init__(self,release, id=None):\n\n        if(id):\n            self.id = id\n\n        self.release = release\n</code></pre>\n\n<p>I initialized the table using following line</p>\n\n<pre><code>myDB.ReleaseVersion.__table__.create(bind=self.engine, checkfirst=True)\n</code></pre>\n\n<p>After using the DB for some time, I need to add a boolean field, 'is_currentversion' while keeping all the existing content of the table, but I am not so sure how to do this.</p>\n\n<p>Should I manually create the field to the table an update the class?\nAlternatively, add the field in the table class and add column if it does not exist in the initialization function?</p>\n"}, {"tags": ["python", "docx"], "comments": [{"owner": {"reputation": 15297, "user_id": 7631480, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zcBMm.png?s=128&g=1", "display_name": "CryptoFool", "link": "https://stackoverflow.com/users/7631480/cryptofool"}, "edited": false, "score": 0, "creation_date": 1553122605, "post_id": 55271227, "comment_id": 97273851, "body": "I don&#39;t know about the use of these modules specifically, but it seems like you are: 1) reading raw.docx, 2) adding a paragraph to the end of it, and 3) randomly adding stuff to that paragraph.  Where do you see this code doing any editing in place? - the fact that you are reading the same file twice seems suspect."}], "answers": [{"tags": [], "owner": {"reputation": 5007, "user_id": 10924296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/483c21a8a3f03bbf92cb99539ec97dbc?s=128&d=identicon&r=PG&f=1", "display_name": "Reedinationer", "link": "https://stackoverflow.com/users/10924296/reedinationer"}, "is_accepted": false, "score": 0, "last_activity_date": 1553122719, "creation_date": 1553122719, "answer_id": 55271357, "question_id": 55271227, "link": "https://stackoverflow.com/questions/55271227/when-ran-the-program-adds-a-large-section-of-highlighted-text-at-the-end/55271357#55271357", "title": "When ran, the program adds a large section of highlighted text at the end?", "body": "<p>The sentences are being added at the end because you call</p>\n\n<pre><code>p = doc.add_paragraph()\n</code></pre>\n\n<p>Which is adding a paragraph to the <strong>end</strong> of the document, and then you are calling</p>\n\n<pre><code>p.add_run()\n</code></pre>\n\n<p>Which adds a run to the <strong>end</strong> of the paragraph you previously created.</p>\n\n<p>Instead you will need to access the paragraphs <strong>already created</strong> within the document instead of creating your own. Like posted at <a href=\"https://python-docx.readthedocs.io/en/latest/api/document.html#docx.document.Document.paragraphs\" rel=\"nofollow noreferrer\">https://python-docx.readthedocs.io/en/latest/api/document.html#docx.document.Document.paragraphs</a> you access these like (for example):</p>\n\n<pre><code>for paragraph in doc.paragraphs:\n    # process paragraph in place\n</code></pre>\n\n<p>I imagine you would like to use the information at <a href=\"https://python-docx.readthedocs.io/en/latest/api/text.html#paragraph-objects\" rel=\"nofollow noreferrer\">https://python-docx.readthedocs.io/en/latest/api/text.html#paragraph-objects</a></p>\n\n<p>Specifically:</p>\n\n<pre><code>for paragraph in doc.paragraphs:\n    text_being_read = paragraph.text\n    # process text\n    paragraph.clear()\n    paragraph.text = \"New stuff\"\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11234588, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GFS8e-xiJNw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcfaSwoJm65s63sgfHTHMwCW7LGsw/mo/photo.jpg?sz=128", "display_name": "Wolf Flores", "link": "https://stackoverflow.com/users/11234588/wolf-flores"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1553122719, "creation_date": 1553121802, "last_edit_date": 1553121997, "question_id": 55271227, "link": "https://stackoverflow.com/questions/55271227/when-ran-the-program-adds-a-large-section-of-highlighted-text-at-the-end", "title": "When ran, the program adds a large section of highlighted text at the end?", "body": "<p>The point of the script is to break a block of text into sentences, and then generate a random number to see if the sentence gets highlighted or not. When the code below is run it cuts out all the individual sentences and pastes them at the end of the document. I am looking for the sentences to be replaced instead of added on at the end.</p>\n\n<pre><code>from docx import Document\nimport re\nfrom nltk import tokenize\nimport Funtion\nimport random\nfrom docx.enum.text import WD_COLOR_INDEX\n\ndoc = Document('raw.docx')\n\nrawdata = (Funtion.gettext('raw.docx'))\n\nsen = tokenize.sent_tokenize(rawdata)\n\nsenlen = len(sen)\n\np = doc.add_paragraph()\n\nfor indsen in sen:\n    rng = random.randint(1,11)\n    if rng == 8:\n        p.add_run(indsen).font.highlight_color = WD_COLOR_INDEX.YELLOW\n\n\n\ndoc.save('TTTCH.docx')   \n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 92827, "user_id": 369, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DHcF2.png?s=128&g=1", "display_name": "Blorgbeard", "link": "https://stackoverflow.com/users/369/blorgbeard"}, "edited": false, "score": 2, "creation_date": 1553122051, "post_id": 55271226, "comment_id": 97273702, "body": "You changed the length of <code>list</code> inside the loop."}, {"owner": {"reputation": 4323, "user_id": 1720199, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cODPq.jpg?s=128&g=1", "display_name": "cglacet", "link": "https://stackoverflow.com/users/1720199/cglacet"}, "edited": false, "score": 2, "creation_date": 1553122113, "post_id": 55271226, "comment_id": 97273718, "body": "The problem is that you modify your list while iterating over it. Since you delete items from it, then at some point your list is shorter than what <code>len(list)</code> used to be."}, {"owner": {"reputation": 343, "user_id": 9710966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6988b8628d3cfb280d0c2b42831b18cf?s=128&d=identicon&r=PG&f=1", "display_name": "Isaac Seo", "link": "https://stackoverflow.com/users/9710966/isaac-seo"}, "edited": false, "score": 0, "creation_date": 1553122242, "post_id": 55271226, "comment_id": 97273746, "body": "Aha, I see... I get it now... Thank you!!"}], "answers": [{"tags": [], "owner": {"reputation": 16300, "user_id": 11015427, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JsY7F.jpg?s=128&g=1", "display_name": "gmds", "link": "https://stackoverflow.com/users/11015427/gmds"}, "is_accepted": true, "score": 8, "last_activity_date": 1553122403, "last_edit_date": 1553122403, "creation_date": 1553122039, "answer_id": 55271262, "question_id": 55271226, "link": "https://stackoverflow.com/questions/55271226/deleting-a-desired-list-in-a-2d-list/55271262#55271262", "title": "Deleting a desired list in a 2d list", "body": "<p>Use a <em><code>list</code> comprehension</em>:</p>\n\n<pre><code>&gt;&gt;&gt; l = [[1, 2, 3], [\"a\", 5, 6], [7, 8, 9], [10, 11, 12]]\n&gt;&gt;&gt; new_l = [sublist for sublist in l if sublist[0] != 'a']\n&gt;&gt;&gt; new_l\n[[1, 2, 3], [7, 8, 9], [10, 11, 12]]\n</code></pre>\n\n<p>In general, it is not a good idea to name your variables after inbuilts (<code>list</code>) since you will shadow those inbuilts.</p>\n\n<p>Also, as others have noted, your original problem was mutating the <code>list</code> while iterating over it.</p>\n"}, {"tags": [], "owner": {"reputation": 171, "user_id": 9397882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/681da978620c83808d40975066912ad0?s=128&d=identicon&r=PG&f=1", "display_name": "Russ Brown", "link": "https://stackoverflow.com/users/9397882/russ-brown"}, "is_accepted": false, "score": 1, "last_activity_date": 1553123518, "last_edit_date": 1553123518, "creation_date": 1553122255, "answer_id": 55271297, "question_id": 55271226, "link": "https://stackoverflow.com/questions/55271226/deleting-a-desired-list-in-a-2d-list/55271297#55271297", "title": "Deleting a desired list in a 2d list", "body": "<p>Use a <code>list</code> comprehension:</p>\n\n<pre><code>[x for x in my_list if x[0] != 'a']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 69, "user_id": 2023842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af86524df9c61026416b7c76320e1203?s=128&d=identicon&r=PG", "display_name": "S-eagle", "link": "https://stackoverflow.com/users/2023842/s-eagle"}, "is_accepted": false, "score": 1, "last_activity_date": 1561658339, "last_edit_date": 1561658339, "creation_date": 1553123228, "answer_id": 55271434, "question_id": 55271226, "link": "https://stackoverflow.com/questions/55271226/deleting-a-desired-list-in-a-2d-list/55271434#55271434", "title": "Deleting a desired list in a 2d list", "body": "<p>What's happening is that your list length gets shorter as you delete items from it. It will still try to loop at <code>i = 3</code>. </p>\n\n<p>You could use a <code>while</code> loop instead since it checks every time. Also since you're not using the popped value, use <code>del</code></p>\n\n<pre><code>list = [[1, 2, 3], [\"a\", 5, 6], [7, 8, 9], [10, 11, 12]]\ni = 0\nwhile i &lt; len(list):\n    if list[i][0] == \"a\":\n        del list[i]\n    else:\n        i += 1\n</code></pre>\n\n<p>Related: <a href=\"https://stackoverflow.com/questions/11520492/difference-between-del-remove-and-pop-on-lists/11520540\">Difference between del, remove and pop on lists</a></p>\n"}, {"tags": [], "owner": {"reputation": 9070, "user_id": 6817835, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/8GBAa.jpg?s=128&g=1", "display_name": "gold_cy", "link": "https://stackoverflow.com/users/6817835/gold-cy"}, "is_accepted": false, "score": 0, "last_activity_date": 1553123508, "creation_date": 1553123508, "answer_id": 55271461, "question_id": 55271226, "link": "https://stackoverflow.com/questions/55271226/deleting-a-desired-list-in-a-2d-list/55271461#55271461", "title": "Deleting a desired list in a 2d list", "body": "<p>How about an approach using filter? Also I renamed your list to <code>l</code> so you don't overwrite the built-in data type.</p>\n\n<pre><code>from operator import itemgetter\n\nf = itemgetter(0)\n\ndef test(sublist):\n    return f(sublist) != 'a'\n\nlist(filter(test, l))\n\n[[1, 2, 3], [7, 8, 9], [10, 11, 12]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19276, "user_id": 8591431, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-AqHwnjWu2tM/AAAAAAAAAAI/AAAAAAAAFrE/DVc4w4e1pDc/photo.jpg?sz=128", "display_name": "Devesh Kumar Singh", "link": "https://stackoverflow.com/users/8591431/devesh-kumar-singh"}, "is_accepted": false, "score": 1, "last_activity_date": 1556640456, "last_edit_date": 1556640456, "creation_date": 1556639438, "answer_id": 55924614, "question_id": 55271226, "link": "https://stackoverflow.com/questions/55271226/deleting-a-desired-list-in-a-2d-list/55924614#55924614", "title": "Deleting a desired list in a 2d list", "body": "<p>You can also use <a href=\"https://docs.python.org/3/library/functions.html#filter\" rel=\"nofollow noreferrer\">filter</a> for this!</p>\n\n<pre><code>li = [[1, 2, 3], [\"a\", 5, 6], [7, 8, 9], [10, 11, 12]]\n\n#Filter on first element not being equal to a\nres = filter(lambda x: x[0] != 'a', li)\n\n#Print the result\nprint(list(res))\n#[[1, 2, 3], [7, 8, 9], [10, 11, 12]]\n</code></pre>\n"}], "owner": {"reputation": 343, "user_id": 9710966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6988b8628d3cfb280d0c2b42831b18cf?s=128&d=identicon&r=PG&f=1", "display_name": "Isaac Seo", "link": "https://stackoverflow.com/users/9710966/isaac-seo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "accepted_answer_id": 55271262, "answer_count": 5, "score": 2, "last_activity_date": 1561658339, "creation_date": 1553121797, "last_edit_date": 1553122087, "question_id": 55271226, "link": "https://stackoverflow.com/questions/55271226/deleting-a-desired-list-in-a-2d-list", "title": "Deleting a desired list in a 2d list", "body": "<p>Say I have a 2d list like this:</p>\n\n<p><code>list = [[1, 2, 3], [\"a\", 5, 6], [7, 8, 9], [10, 11, 12]]</code></p>\n\n<p>and I want to delete a list that starts with <code>a</code>. Here is what I tried:</p>\n\n<pre><code>for i in range(0, len(list)):\n     if list[i][0] == \"a\":\n          list.pop(i)\n</code></pre>\n\n<p>Here, I am trying to delete a list that starts with <code>a</code>. However, it gives me an error saying </p>\n\n<blockquote>\n  <p>IndexError: list index out of range</p>\n</blockquote>\n\n<p>I am not sure what the problem is here. It's weird because when I try <code>print(list[i])</code>, it prints the matching line, which is `[\"a\", 2, 3].</p>\n\n<p>I am expecting <code>list = [[1, 2, 3], [7, 8, 9], [10, 11, 12]]</code> as my final list. </p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1553124205, "post_id": 55271212, "comment_id": 97274319, "body": "<code>getopt</code> was never really intended for new code, but as an aid to porting existing programs that used the <code>getopt</code> library. You should use <code>argparse</code> for handling command-line options."}], "answers": [{"tags": [], "owner": {"reputation": 12260, "user_id": 1730895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6abb0b52473d614852289b49ccf3c3c?s=128&d=identicon&r=PG", "display_name": "Kingsley", "link": "https://stackoverflow.com/users/1730895/kingsley"}, "is_accepted": false, "score": 2, "last_activity_date": 1553122196, "creation_date": 1553122196, "answer_id": 55271283, "question_id": 55271212, "link": "https://stackoverflow.com/questions/55271212/what-is-the-purpose-of-this-for-loop/55271283#55271283", "title": "What is the purpose of this for loop?", "body": "<p>If you look at the <a href=\"https://docs.python.org/3.5/library/getopt.html\" rel=\"nofollow noreferrer\">documentation page for python getopt</a>, there is an example that demonstrates this:</p>\n\n<pre><code>&gt;&gt;&gt; import getopt\n&gt;&gt;&gt; args = '-a -b -cfoo -d bar a1 a2'.split()\n&gt;&gt;&gt; args\n['-a', '-b', '-cfoo', '-d', 'bar', 'a1', 'a2']\n&gt;&gt;&gt; optlist, args = getopt.getopt(args, 'abc:d:')\n&gt;&gt;&gt; optlist\n[('-a', ''), ('-b', ''), ('-c', 'foo'), ('-d', 'bar')]  # &lt;--- HERE\n&gt;&gt;&gt; args\n['a1', 'a2']\n</code></pre>\n\n<p>The <code>opts</code> (in your question) corresponds to the <code>optlist</code> in the example above.</p>\n\n<p><code>getopt</code> returns a list of tuples as the first return value (and a list as the second), so by using <code>for o,a in opts</code>, the code splits those tuples up during each loop iteration.</p>\n"}, {"comments": [{"owner": {"reputation": 31, "user_id": 11234711, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ELQqn.jpg?s=128&g=1", "display_name": "Sidley", "link": "https://stackoverflow.com/users/11234711/sidley"}, "edited": false, "score": 1, "creation_date": 1553122692, "post_id": 55271293, "comment_id": 97273871, "body": "yeah, I was wondering why the options &#39;o&#39; and &#39;a&#39; were used. does &#39;o&#39; signify something within getopt?"}, {"owner": {"reputation": 2152, "user_id": 1306026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d117a6182330066d4771187f93e7e98e?s=128&d=identicon&r=PG", "display_name": "Joshua R.", "link": "https://stackoverflow.com/users/1306026/joshua-r"}, "reply_to_user": {"reputation": 31, "user_id": 11234711, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ELQqn.jpg?s=128&g=1", "display_name": "Sidley", "link": "https://stackoverflow.com/users/11234711/sidley"}, "edited": false, "score": 1, "creation_date": 1553122825, "post_id": 55271293, "comment_id": 97273913, "body": "Ah, <code>o</code> and <code>a</code> are arbitrary variable names in the loop construct; they could just as well be <code>x</code> and <code>y</code>.  The important thing is that the <code>for</code> loop is assigning the two items from each 2-tuple in opts to them.  (opts is just a list of 2-tuples corresponding to option:value pairs as @Kingsley demonstrated above)"}], "tags": [], "owner": {"reputation": 2152, "user_id": 1306026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d117a6182330066d4771187f93e7e98e?s=128&d=identicon&r=PG", "display_name": "Joshua R.", "link": "https://stackoverflow.com/users/1306026/joshua-r"}, "is_accepted": false, "score": 1, "last_activity_date": 1553122243, "creation_date": 1553122243, "answer_id": 55271293, "question_id": 55271212, "link": "https://stackoverflow.com/questions/55271212/what-is-the-purpose-of-this-for-loop/55271293#55271293", "title": "What is the purpose of this for loop?", "body": "<p><code>opts</code> is a list of option, value pairs.  See the <a href=\"https://docs.python.org/3.1/library/getopt.html\" rel=\"nofollow noreferrer\">docs</a>:</p>\n\n<blockquote>\n  <p>The return value consists of two elements: the first is a list of (option, value) pairs; the second is the list of program arguments left after the option list was stripped (this is a trailing slice of args). Each option-and-value pair returned has the option as its first element, prefixed with a hyphen for short options (e.g., '-x') or two hyphens for long options (e.g., '--long-option'), and the option argument as its second element, or an empty string if the option has no argument. The options occur in the list in the same order in which they were found, thus allowing multiple occurrences. Long and short options may be mixed.</p>\n</blockquote>\n\n<p>So the for loop is processing each of the command line arguments, i.e. option, value pairs at a time.  The number of arguments can vary in number.</p>\n\n<p>Are you interested in something more specific?</p>\n"}], "owner": {"reputation": 31, "user_id": 11234711, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ELQqn.jpg?s=128&g=1", "display_name": "Sidley", "link": "https://stackoverflow.com/users/11234711/sidley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 1, "answer_count": 2, "score": 3, "last_activity_date": 1553122243, "creation_date": 1553121636, "last_edit_date": 1553121980, "question_id": 55271212, "link": "https://stackoverflow.com/questions/55271212/what-is-the-purpose-of-this-for-loop", "title": "What is the purpose of this for loop?", "body": "<p>I'm following along with the book 'Black Hat Python' and the current activity is to build a netcat replacement. To set options, 'getopt' is used. I was confused as to why <code>o,a</code> is used in the for loop to check the options?   </p>\n\n<pre><code>  if not len(sys.argv[1:]):\n        usage()\n\n    # read the command line options\n    try:\n\n           opts, args = getopt.getopt(sys.argv[1:],\"hle:t:p:cu:\", \\\n           [\"help\", \"listen\", \"execute\", \"target\", \"port\", \"command\", \"upload\"])\n    except getopt.GetoptError as err:\n           print(str(err))\n           usage()\n\n    for o,a in opts:\n            if o in (\"-h\",\"--help\"):\n                    usage()\n            elif o in (\"-l\", \"--listen\"):\n                    listen = True\n            elif o in (\"-e\", \"--execute\"):\n                    execute = a\n            elif o in (\"-c\", \"--commandshell\"):\n                    command = True\n            elif o in (\"-u\", \"--upload\"):\n                    upload_destinaton = a\n            elif o in (\"-t\", \"--target\"):\n                    target = a\n            elif o in (\"-p\", \"--port\"):\n                    port = int(a)\n            else:\n                    assert False,\"Unhandled Option\"\n</code></pre>\n"}, {"tags": ["python", "attributeerror"], "comments": [{"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 1, "creation_date": 1553121693, "post_id": 55271199, "comment_id": 97273592, "body": "Because <code>split()</code> splits the line into a list of words, so<code>words</code>is a list. You would need to call <code>rstrip</code> on <i>each word in the list</i>, not on the list itself."}], "answers": [{"comments": [{"owner": {"reputation": 16300, "user_id": 11015427, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JsY7F.jpg?s=128&g=1", "display_name": "gmds", "link": "https://stackoverflow.com/users/11015427/gmds"}, "edited": false, "score": 1, "creation_date": 1553122567, "post_id": 55271325, "comment_id": 97273841, "body": "This wouldn&#39;t do anything apart from reassigning to the loop variable."}, {"owner": {"reputation": 2323, "user_id": 579123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5681309a3b72965a9e5e4651fd38416b?s=128&d=identicon&r=PG&f=1", "display_name": "ItsPete", "link": "https://stackoverflow.com/users/579123/itspete"}, "reply_to_user": {"reputation": 16300, "user_id": 11015427, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JsY7F.jpg?s=128&g=1", "display_name": "gmds", "link": "https://stackoverflow.com/users/11015427/gmds"}, "edited": false, "score": 0, "creation_date": 1553122751, "post_id": 55271325, "comment_id": 97273885, "body": "@MarcusLim They would still need to perform their actions required on <code>word</code>, but it should fix the error that they are currently having?"}, {"owner": {"reputation": 2323, "user_id": 579123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5681309a3b72965a9e5e4651fd38416b?s=128&d=identicon&r=PG&f=1", "display_name": "ItsPete", "link": "https://stackoverflow.com/users/579123/itspete"}, "reply_to_user": {"reputation": 16300, "user_id": 11015427, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JsY7F.jpg?s=128&g=1", "display_name": "gmds", "link": "https://stackoverflow.com/users/11015427/gmds"}, "edited": false, "score": 1, "creation_date": 1553123680, "post_id": 55271325, "comment_id": 97274171, "body": "@AmandeepPasricha You need to perform it on each word. I&#39;ve edited the answer to show an example of why it&#39;s needed."}, {"owner": {"reputation": 39, "user_id": 11151085, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-VTeCe-bhQjE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcELPSFf3GpLxYemvPdGl3cZqc50w/mo/photo.jpg?sz=128", "display_name": "Amandeep Pasricha", "link": "https://stackoverflow.com/users/11151085/amandeep-pasricha"}, "edited": false, "score": 0, "creation_date": 1553123876, "post_id": 55271325, "comment_id": 97274234, "body": "@ItsPete oh okay I get. However, can you explain why even though if I fix the error and do it this way, this would have no effect on the words themselves? Someone was explaining this in another comment."}, {"owner": {"reputation": 2323, "user_id": 579123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5681309a3b72965a9e5e4651fd38416b?s=128&d=identicon&r=PG&f=1", "display_name": "ItsPete", "link": "https://stackoverflow.com/users/579123/itspete"}, "reply_to_user": {"reputation": 39, "user_id": 11151085, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-VTeCe-bhQjE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcELPSFf3GpLxYemvPdGl3cZqc50w/mo/photo.jpg?sz=128", "display_name": "Amandeep Pasricha", "link": "https://stackoverflow.com/users/11151085/amandeep-pasricha"}, "edited": false, "score": 0, "creation_date": 1553124165, "post_id": 55271325, "comment_id": 97274311, "body": "@AmandeepPasricha It has an effect on the word during that iteration of the loop, but I didn&#39;t put any code in to use the word. I&#39;ve only fixed the problem that you were having with not being able to call <code>rstrip</code>. Marcus Lim was saying that my code doesn&#39;t perform any other actions on it."}], "tags": [], "owner": {"reputation": 2323, "user_id": 579123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5681309a3b72965a9e5e4651fd38416b?s=128&d=identicon&r=PG&f=1", "display_name": "ItsPete", "link": "https://stackoverflow.com/users/579123/itspete"}, "is_accepted": false, "score": 0, "last_activity_date": 1553123654, "last_edit_date": 1592644375, "creation_date": 1553122401, "answer_id": 55271325, "question_id": 55271199, "link": "https://stackoverflow.com/questions/55271199/why-am-i-getting-an-attributeerror-message/55271325#55271325", "title": "Why am I getting an AttributeError message?", "body": "<p><code>split</code> splits the string into a list. You are trying to perform <code>rstrip</code> on the actual list when you need to call it on each word.</p>\n<p>You can loop through the list to achieve this:</p>\n<pre><code>for line in infile:  \n    line=line.rstrip()  \n    for word in line.split():\n        word=word.rstrip(&quot;,&quot;)\n</code></pre>\n<p>Alternatively, you can split it like you already do &amp; access the words you want via the index.</p>\n<p>For clarification:</p>\n<p>In your code, <code>split()</code> turns <code>word</code> into:</p>\n<blockquote>\n<p>[&quot;[38.809954939999997,&quot;,</p>\n<p>&quot;-77.125144050000003]&quot;,</p>\n<p>&quot;6&quot;,</p>\n<p>&quot;2011-08-28 19:07:05&quot;,</p>\n<p>&quot;I&quot;,</p>\n<p>&quot;just&quot;,</p>\n<p>&quot;put&quot;,</p>\n<p>&quot;my&quot;,</p>\n<p>&quot;life&quot;,</p>\n<p>&quot;in&quot;,</p>\n<p>&quot;like&quot;,</p>\n<p>&quot;5&quot;,</p>\n<p>&quot;suitcases&quot;]</p>\n</blockquote>\n<p>You are trying to perform one <code>rstrip</code> on that, rather than the words themselves. Looping through the list accesses each word &amp; allows you to use <code>rstrip</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 4541, "user_id": 3427252, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/phvBb.png?s=128&g=1", "display_name": "Ramy M. Mousa", "link": "https://stackoverflow.com/users/3427252/ramy-m-mousa"}, "reply_to_user": {"reputation": 39, "user_id": 11151085, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-VTeCe-bhQjE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcELPSFf3GpLxYemvPdGl3cZqc50w/mo/photo.jpg?sz=128", "display_name": "Amandeep Pasricha", "link": "https://stackoverflow.com/users/11151085/amandeep-pasricha"}, "edited": false, "score": 0, "creation_date": 1553123217, "post_id": 55271400, "comment_id": 97274037, "body": "@AmandeepPasricha I edited my answer to clarify this, you used rstrip after split, rstrip requires a string, while split returns a list"}, {"owner": {"reputation": 39, "user_id": 11151085, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-VTeCe-bhQjE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcELPSFf3GpLxYemvPdGl3cZqc50w/mo/photo.jpg?sz=128", "display_name": "Amandeep Pasricha", "link": "https://stackoverflow.com/users/11151085/amandeep-pasricha"}, "edited": false, "score": 0, "creation_date": 1553125648, "post_id": 55271400, "comment_id": 97274732, "body": "Could you explain this line: coordinates_cleaned = coordinates_string[1:]. I don&#39;t quite understand what was done here."}, {"owner": {"reputation": 4541, "user_id": 3427252, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/phvBb.png?s=128&g=1", "display_name": "Ramy M. Mousa", "link": "https://stackoverflow.com/users/3427252/ramy-m-mousa"}, "reply_to_user": {"reputation": 39, "user_id": 11151085, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-VTeCe-bhQjE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcELPSFf3GpLxYemvPdGl3cZqc50w/mo/photo.jpg?sz=128", "display_name": "Amandeep Pasricha", "link": "https://stackoverflow.com/users/11151085/amandeep-pasricha"}, "edited": false, "score": 0, "creation_date": 1553126105, "post_id": 55271400, "comment_id": 97274859, "body": "The string part of the coordinates contained [ in the beginning and you want to remove it so you can use the numbers without causing corversion errors"}], "tags": [], "owner": {"reputation": 4541, "user_id": 3427252, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/phvBb.png?s=128&g=1", "display_name": "Ramy M. Mousa", "link": "https://stackoverflow.com/users/3427252/ramy-m-mousa"}, "is_accepted": false, "score": 0, "last_activity_date": 1553123530, "last_edit_date": 1553123530, "creation_date": 1553122993, "answer_id": 55271400, "question_id": 55271199, "link": "https://stackoverflow.com/questions/55271199/why-am-i-getting-an-attributeerror-message/55271400#55271400", "title": "Why am I getting an AttributeError message?", "body": "<p>The <code>split()</code> function returns a list that you cannot perform <code>string</code> functions on.\nThe problem is in using those 2 lines in sequence</p>\n\n<pre><code>word=line.split()  #this will actually return a list of words not just a word\nword=word.rstrip(\",\")\n</code></pre>\n\n<p>In your case, if you're sure of this exact format, You can do this:</p>\n\n<pre><code>tweetfile=input(\"Enter name of tweet file: \")  \ninfile=open(tweetfile,\"r\",encoding=\"utf-8\")  \nfor line in infile:  \n    line=line.rstrip()  \n    coordinates_string=line.split(']')\n    coordinates_cleaned = coordinates_string[1:] #removes the [\n    lat_lon_string = coordinates_cleaned.split(',') #split lat lon\n    lat = lat_lon_string[0].strip()\n    lon = lat_lon_string[1].strip()\n    # convert to float if you would like then after\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 39, "user_id": 11151085, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-VTeCe-bhQjE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcELPSFf3GpLxYemvPdGl3cZqc50w/mo/photo.jpg?sz=128", "display_name": "Amandeep Pasricha", "link": "https://stackoverflow.com/users/11151085/amandeep-pasricha"}, "edited": false, "score": 0, "creation_date": 1553123740, "post_id": 55271474, "comment_id": 97274194, "body": "Hey thanks I actually get it better now. I&#39;m still a little confused when you say &quot;Lastly, iterating through the text read from the file in this way and reassigning to the word variable will not change that text inplace, but only what the word variable points to, so you won&#39;t actually see any effects&quot;.  I don&#39;t understand why I wouldn&#39;t see any effects?"}, {"owner": {"reputation": 39, "user_id": 11151085, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-VTeCe-bhQjE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcELPSFf3GpLxYemvPdGl3cZqc50w/mo/photo.jpg?sz=128", "display_name": "Amandeep Pasricha", "link": "https://stackoverflow.com/users/11151085/amandeep-pasricha"}, "edited": false, "score": 0, "creation_date": 1553124648, "post_id": 55271474, "comment_id": 97274449, "body": "Hey thanks I get it better. You&#39;re saying that you are only editing the word variable (which is basically i), correct? Okay. So it doesn&#39;t change the actual code in the line itself? It only changes it in that loop, correct?"}], "tags": [], "owner": {"reputation": 16300, "user_id": 11015427, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JsY7F.jpg?s=128&g=1", "display_name": "gmds", "link": "https://stackoverflow.com/users/11015427/gmds"}, "is_accepted": false, "score": 0, "last_activity_date": 1553124076, "last_edit_date": 1553124076, "creation_date": 1553123579, "answer_id": 55271474, "question_id": 55271199, "link": "https://stackoverflow.com/questions/55271199/why-am-i-getting-an-attributeerror-message/55271474#55271474", "title": "Why am I getting an AttributeError message?", "body": "<p>There are a few things wrong with your code.</p>\n\n<p>First, in general, prefer using <code>with</code> to open files to <code>open</code>. You do not close your file object, so the OS thinks it's still open (in use) until you close Python.</p>\n\n<p>Second, <code>split</code>, when run on a string, <em>splits</em> it into a <code>list</code> of strings. You want to strip commas from all such substrings, so you need to iterate through the resultant <code>list</code> - it doesn't make sense to run <code>strip</code> on the <code>list</code>, since it's not a string.</p>\n\n<p>Lastly, iterating through the text read from the file in this way and reassigning to the <code>word</code> variable will not change that text inplace, but only what the <code>word</code> variable points to, so you won't actually see any effects.</p>\n\n<p>Example:</p>\n\n<pre><code>&gt;&gt;&gt; numbers = [1, 2, 3, 4, 5]\n&gt;&gt;&gt; for i in numbers:\n...     i += 1\n...\n&gt;&gt;&gt; numbers\n[1, 2, 3, 4, 5]\n</code></pre>\n\n<p>The reason is that <code>i</code> points to the integers from 1 to 5 in succession. When you execute <code>+=</code> on it, what you are doing is <em>changing what <code>i</code> points to</em>, rather than <em>taking the object that <code>i</code> points to and changing it</em>.</p>\n\n<p>As an analogy: it is the difference between following a signpost to a house and mowing the lawn there, and moving the signpost to point to a different house.</p>\n\n<p>Try this:</p>\n\n<pre><code>tweet_path = input(\"Enter name of tweet file: \")\nwith open(tweet_path, \"r\", encoding='utf-8') as f:\n    coordinates = [line.split()[:2] for line in f]\n\ncleaned_coordinates = [(lat[1:-1], lon) for lat, lon in coordinates]\n</code></pre>\n\n<p><em>Really</em> lastly, as a note: the latitude and longitude are <code>float</code>, not <code>int</code>, and you can convert them accordingly if necessary.</p>\n"}], "owner": {"reputation": 39, "user_id": 11151085, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-VTeCe-bhQjE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcELPSFf3GpLxYemvPdGl3cZqc50w/mo/photo.jpg?sz=128", "display_name": "Amandeep Pasricha", "link": "https://stackoverflow.com/users/11151085/amandeep-pasricha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1553124076, "creation_date": 1553121512, "last_edit_date": 1553122576, "question_id": 55271199, "link": "https://stackoverflow.com/questions/55271199/why-am-i-getting-an-attributeerror-message", "title": "Why am I getting an AttributeError message?", "body": "<p>I have a file named tweets.txt. Each line is in the format:</p>\n\n<blockquote>\n  <p>[latitude, longitude] value date time text</p>\n</blockquote>\n\n<p>An example of the data contained in the file:</p>\n\n<blockquote>\n  <p>[41.298669629999999, -81.915329330000006] 6 2011-08-28 19:02:36 Work needs to fly by ... I'm so excited to see Spy Kids 4 with then love of my life ... ARREIC<br>\n  [33.702900329999999, -117.95095704000001] 6 2011-08-28 19:03:13 Today is going to be the greatest day of my life. Hired to take pictures at my best friend's gparents 50th anniversary. 60 old people. Woo.<br>\n  [38.809954939999997, -77.125144050000003] 6 2011-08-28 19:07:05 I just put my life in like 5 suitcases  </p>\n</blockquote>\n\n<p>My assignment requires me to extract the first and second index of each line (latitude and longitude, which are integers). The problem is that these have characters such as \"[\",\",\" and \"]\" and I want to remove these.</p>\n\n<pre><code>tweetfile=input(\"Enter name of tweet file: \")  \ninfile=open(tweetfile,\"r\",encoding=\"utf-8\")  \nfor line in infile:  \n    line=line.rstrip()  \n    word=line.split()  \n    word=word.rstrip(\",\") \n</code></pre>\n\n<p>As you can see, whenever I input an argument into the wordstrip line above, whether it be [, a comma, or [, I keep getting an error message saying:</p>\n\n<blockquote>\n  <p>AttributeError: 'list' object has no attribute 'rstrip'</p>\n</blockquote>\n\n<p>Why am I getting this message? I thought I was doing the right thing. What would be the right way of doing this?</p>\n"}, {"tags": ["python", "numpy", "matrix", "tuples"], "comments": [{"owner": {"reputation": 1486, "user_id": 6828711, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/G2j21.png?s=128&g=1", "display_name": "NaN", "link": "https://stackoverflow.com/users/6828711/nan"}, "edited": false, "score": 2, "creation_date": 1553123926, "post_id": 55271162, "comment_id": 97274253, "body": "does the data form a variant of a lower or upper triangulation (ie np.triu, np.tril) ? columns a, b, c... c = np.array(raw_data)[:, 2]"}, {"owner": {"reputation": 362, "user_id": 8191028, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-q0m2ZK_XoXs/AAAAAAAAAAI/AAAAAAAAEiU/Dw_8rtwZ3E0/photo.jpg?sz=128", "display_name": "Tedo Vrbanec", "link": "https://stackoverflow.com/users/8191028/tedo-vrbanec"}, "reply_to_user": {"reputation": 1486, "user_id": 6828711, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/G2j21.png?s=128&g=1", "display_name": "NaN", "link": "https://stackoverflow.com/users/6828711/nan"}, "edited": false, "score": 0, "creation_date": 1553262552, "post_id": 55271162, "comment_id": 97330546, "body": "@NaN Yes, actually those indexes form an upper triangle of whole clean_data. But that is second phase for me: to take those upper triangle values, transposed it and sum it without diagonale into full clean_data list. Do you have an idea to merge those steps into one?"}], "answers": [{"comments": [{"owner": {"reputation": 362, "user_id": 8191028, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-q0m2ZK_XoXs/AAAAAAAAAAI/AAAAAAAAEiU/Dw_8rtwZ3E0/photo.jpg?sz=128", "display_name": "Tedo Vrbanec", "link": "https://stackoverflow.com/users/8191028/tedo-vrbanec"}, "edited": false, "score": 0, "creation_date": 1553377468, "post_id": 55271868, "comment_id": 97364206, "body": "result[rows,cols] = vals; TypeError: list indices must be integers, not tuple"}, {"owner": {"reputation": 362, "user_id": 8191028, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-q0m2ZK_XoXs/AAAAAAAAAAI/AAAAAAAAEiU/Dw_8rtwZ3E0/photo.jpg?sz=128", "display_name": "Tedo Vrbanec", "link": "https://stackoverflow.com/users/8191028/tedo-vrbanec"}, "edited": false, "score": 0, "creation_date": 1553377716, "post_id": 55271868, "comment_id": 97364272, "body": "Regardless of this little mistake, the process takes a long time on the overall set of data, so unfortunately, that is not what I need. Thanks anyway!"}, {"owner": {"reputation": 1036, "user_id": 9987623, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W12Vh.jpg?s=128&g=1", "display_name": "AlexK", "link": "https://stackoverflow.com/users/9987623/alexk"}, "reply_to_user": {"reputation": 362, "user_id": 8191028, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-q0m2ZK_XoXs/AAAAAAAAAAI/AAAAAAAAEiU/Dw_8rtwZ3E0/photo.jpg?sz=128", "display_name": "Tedo Vrbanec", "link": "https://stackoverflow.com/users/8191028/tedo-vrbanec"}, "edited": false, "score": 0, "creation_date": 1553378422, "post_id": 55271868, "comment_id": 97364420, "body": "It was not a mistake in my code, because &quot;result&quot; is not a list in my code.  My code converts it to list at the end of the process, if needed, as you can see from the last comment in the code."}], "tags": [], "owner": {"reputation": 1036, "user_id": 9987623, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W12Vh.jpg?s=128&g=1", "display_name": "AlexK", "link": "https://stackoverflow.com/users/9987623/alexk"}, "is_accepted": false, "score": 2, "last_activity_date": 1553126295, "creation_date": 1553126295, "answer_id": 55271868, "question_id": 55271162, "link": "https://stackoverflow.com/questions/55271162/python-efficient-extracting-data-from-list-of-tuples-to-another-list/55271868#55271868", "title": "Python - Efficient extracting data from list of tuples to another list", "body": "<p>Not sure if this is faster, but here is a solution using Numpy that produces a two-dimensional Numpy array filled with values.  It initializes a zero-filled array with the shape based on the maximum values of the first and second elements of your tuples, respectively.  And some of the values remain as 0's in this solution, since in your example there is not a value for every possible combination of x and y.  You said your clean_data is already initialized, so you can update this code (or ask for follow-up in comments if necessary).</p>\n\n<pre><code>import numpy as np\n\n#initialize zero-filled two-dimensional array\nresult = np.zeros((int(np.amax(np.array(raw_data)[:,:1]))+1,int(np.amax(np.array(raw_data)[:,1:2]))+1))\n\n#parse raw_data to get just the values and indices\nvals = [np.array(raw_data)[:,2]]\npos = np.array(raw_data, dtype=int)[:,:2]\nrows, cols = pos[:,0], pos[:,1]\n\n#update result array with values\nresult[rows,cols] = vals\n\nresult\n\narray([[1.        , 0.8006689 , 0.7255615 , 0.78850532, 0.92785633,\n        0.84815192, 0.58084786, 0.77294624, 0.48462158, 0.66341865],\n       [0.        , 1.        , 0.94371283, 0.96557826, 0.80948037,\n        0.74616098, 0.63278979, 0.78133017, 0.55113804, 0.72307152],\n       [0.        , 0.        , 1.        , 0.94961578, 0.69080144,\n        0.64503139, 0.51084542, 0.69146907, 0.4440484 , 0.60071796],\n       [0.        , 0.        , 0.        , 1.        , 0.7783469 ,\n        0.73362792, 0.6183328 , 0.74256104, 0.49541488, 0.68519866],\n       [0.        , 0.        , 0.        , 0.        , 1.00000012,\n        0.91675973, 0.67290193, 0.85515952, 0.48037794, 0.76065695],\n       [0.        , 0.        , 0.        , 0.        , 0.        ,\n        0.99999988, 0.722745  , 0.83011991, 0.47183749, 0.76387125],\n       [0.        , 0.        , 0.        , 0.        , 0.        ,\n        0.        , 1.        , 0.83554745, 0.50891209, 0.86701804],\n       [0.        , 0.        , 0.        , 0.        , 0.        ,\n        0.        , 0.        , 1.00000012, 0.44816101, 0.92986429],\n       [0.        , 0.        , 0.        , 0.        , 0.        ,\n        0.        , 0.        , 0.        , 0.99999994, 0.4345997 ],\n       [0.        , 0.        , 0.        , 0.        , 0.        ,\n        0.        , 0.        , 0.        , 0.        , 0.99999988]])\n\n#If needed, you can convert this array to list, e.g., result.tolist().\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 362, "user_id": 8191028, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-q0m2ZK_XoXs/AAAAAAAAAAI/AAAAAAAAEiU/Dw_8rtwZ3E0/photo.jpg?sz=128", "display_name": "Tedo Vrbanec", "link": "https://stackoverflow.com/users/8191028/tedo-vrbanec"}, "is_accepted": true, "score": 0, "last_activity_date": 1553524781, "last_edit_date": 1553524781, "creation_date": 1553524416, "answer_id": 55340196, "question_id": 55271162, "link": "https://stackoverflow.com/questions/55271162/python-efficient-extracting-data-from-list-of-tuples-to-another-list/55340196#55340196", "title": "Python - Efficient extracting data from list of tuples to another list", "body": "<p>On the end, I decided not to return indexes with results from multiprocessing function. So, having nothing but results, with ideas from @Nan and @AlexK (thanks guys!), I put those results into upper triangle matrix, and using numpy functions create symmetric matrix of results.</p>\n\n<pre><code>clean_data[np.triu_indices(dim)] = raw_data # Upper triangle with diagonale\nclean_data += clean_data.T - np.diag(clean_data.diagonal()) # Full matrix\n</code></pre>\n\n<p>where dim is dimension of clean_data matrix. Now I get results very, very, very fast.</p>\n"}], "owner": {"reputation": 362, "user_id": 8191028, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-q0m2ZK_XoXs/AAAAAAAAAAI/AAAAAAAAEiU/Dw_8rtwZ3E0/photo.jpg?sz=128", "display_name": "Tedo Vrbanec", "link": "https://stackoverflow.com/users/8191028/tedo-vrbanec"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 325, "favorite_count": 0, "accepted_answer_id": 55340196, "answer_count": 2, "score": 1, "last_activity_date": 1553524781, "creation_date": 1553121279, "question_id": 55271162, "link": "https://stackoverflow.com/questions/55271162/python-efficient-extracting-data-from-list-of-tuples-to-another-list", "title": "Python - Efficient extracting data from list of tuples to another list", "body": "<p>Multiprocessing called function generates raw_data list containing tuples (index_i, index_j, some_result). It is normally quite a large list, but here is some short example:</p>\n\n<pre><code>raw_data = [(0, 0, 1.0),\n(0, 1, 0.8006688952445984),\n(0, 2, 0.7255614995956421),\n(0, 3, 0.7885053157806396),\n(0, 4, 0.9278563261032104),\n(0, 5, 0.8481519222259521),\n(0, 6, 0.5808478593826294),\n(0, 7, 0.7729462385177612),\n(0, 8, 0.4846215844154358),\n(0, 9, 0.6634186506271362),\n(1, 1, 1.0), \n(1, 2, 0.9437128305435181), \n(1, 3, 0.9655782580375671), \n(1, 4, 0.8094803690910339), \n(1, 5, 0.7461609840393066), \n(1, 6, 0.6327897906303406), \n(1, 7, 0.7813301682472229), \n(1, 8, 0.5511380434036255), \n(1, 9, 0.7230715155601501), \n(2, 2, 1.0), \n(2, 3, 0.9496157765388489), \n(2, 4, 0.6908014416694641), \n(2, 5, 0.6450313925743103), \n(2, 6, 0.510845422744751), \n(2, 7, 0.6914690732955933), \n(2, 8, 0.4440484046936035), \n(2, 9, 0.6007179617881775), \n(3, 3, 1.0), \n(3, 4, 0.7783468961715698), \n(3, 5, 0.7336279153823853), \n(3, 6, 0.6183328032493591), \n(3, 7, 0.7425610423088074), \n(3, 8, 0.4954148828983307), \n(3, 9, 0.6851986646652222), \n(4, 4, 1.0000001192092896), \n(4, 5, 0.916759729385376), \n(4, 6, 0.6729019284248352), \n(4, 7, 0.8551595211029053), \n(4, 8, 0.4803779423236847), \n(4, 9, 0.7606569528579712), \n(5, 5, 0.9999998807907104), \n(5, 6, 0.7227450013160706), \n(5, 7, 0.8301199078559875), \n(5, 8, 0.47183749079704285), \n(5, 9, 0.7638712525367737), \n(6, 6, 1.0), \n(6, 7, 0.8355474472045898), \n(6, 8, 0.5089120864868164), \n(6, 9, 0.8670180439949036), \n(7, 7, 1.0000001192092896), \n(7, 8, 0.4481610059738159), \n(7, 9, 0.9298642873764038), \n(8, 8, 0.9999999403953552), \n(8, 9, 0.43459969758987427), \n(9, 9, 0.9999998807907104)]\n</code></pre>\n\n<p>Now I need to transform raw_data into clean_data (clean_data is already initialized) taking first two values from tuples as an indexes of elements in clean_list and third value as an values of those elements:</p>\n\n<pre><code>for item in raw_data:\n    clean_data[item[0]][item[1]] = item[2]\n</code></pre>\n\n<p>This is working but it is taking to much time. I am sure it could be done in much more efficient way, maybe with numpy.take or numpy.choose, but I did not manage to figure it how. :-(</p>\n"}, {"tags": ["python", "deep-learning", "lstm", "pytorch", "recurrent-neural-network"], "comments": [{"owner": {"reputation": 2824, "user_id": 874380, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/8D8Yc.jpg?s=128&g=1", "display_name": "Christian", "link": "https://stackoverflow.com/users/874380/christian"}, "edited": false, "score": 0, "creation_date": 1553131120, "post_id": 55271151, "comment_id": 97275956, "body": "Just for testing, have you tried using <code>LSTM</code> and not <code>LSTMCell</code>. I don&#39;t see any special operations that would require the loop in your <code>forward</code> method."}, {"owner": {"reputation": 6042, "user_id": 3607203, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/pfnRx.jpg?s=128&g=1", "display_name": "dennlinger", "link": "https://stackoverflow.com/users/3607203/dennlinger"}, "edited": false, "score": 0, "creation_date": 1553161453, "post_id": 55271151, "comment_id": 97285049, "body": "Also, your training cycle certainly looks correct to me. You might want to use decaying learning rates if you insist on completely overfitting, but even then there is no guarantee of finding a global minimum. That&#39;s the whole point of having a non-convex optimization problem after all."}], "owner": {"reputation": 291, "user_id": 3182044, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/95cc2b89e8e9644d303d5447d82c89f7?s=128&d=identicon&r=PG&f=1", "display_name": "dba", "link": "https://stackoverflow.com/users/3182044/dba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 291, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1553121234, "creation_date": 1553121234, "question_id": 55271151, "link": "https://stackoverflow.com/questions/55271151/pytorch-lstm-does-not-overfit-single-sample", "title": "pytorch LSTM does not overfit single sample", "body": "<p>I try to overfit a single time series. Meaning, I try to perform the training on a single <code>(X,Y)</code> pair over and over again. I do this to get an impression of the capabilities of the hyperparameters. But it does not converge. This is the loss plot showing the MSE per iteration after about 800 iterations:</p>\n\n<p><a href=\"https://i.stack.imgur.com/1a3RU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1a3RU.png\" alt=\"enter image description here\"></a></p>\n\n<p>I hoped that the error completely vanishes, but it gets stuck on the plateau, where it still is, as I write this.\nThe time series has the length <code>29600</code> and the RNN maps a single value onto another single value. It consists of an LSTM-Cell with <code>1</code> input,<code>200</code> hidden units and a fully connected Layer mapping onto a single value</p>\n\n<p>My feeling tells me that the model may be not complex enough to fit the sample. But before I try to increase the complexity of the RNN, I have to be sure that my implementation of the training is correct. Maybe I did did not get the usage of autograd correctly. Since this is the first time, I ever tried to train a Neural network, I dont know, how long it should take.</p>\n\n<pre><code>import torch\nimport torch.nn as nn\nimport torch.optim as optim\nfrom torch.autograd import Variable    \nimport numpy as np\n\n# the class containing the LSTM\nclass Sequence(nn.Module):\n    def __init__(self):\n        self.hidden_state_len = 200\n        super(Sequence, self).__init__()\n        self.lstm1 = nn.LSTMCell(1, self.hidden_state_len)        \n        self.linear = nn.Linear(self.hidden_state_len, 1)\n        h_t = torch\n\n\n    def forward(self, input):\n        outputs = []\n        h_t = torch.zeros(input.size(0), self.hidden_state_len, dtype=torch.double).cuda()\n        c_t = torch.zeros(input.size(0), self.hidden_state_len, dtype=torch.double).cuda()\n\n        for i, input_t in enumerate(input.chunk(input.size(1), dim=1)):            \n            h_t, c_t = self.lstm1(input_t, (h_t, c_t))\n            output = self.linear(h_t)\n            outputs += [output]\n\n        return torch.cat(outputs, dim=1)\n\n\nx1 = torch.load(\"/floyd/input/wav/x1.pt\").double().cuda()[0][7400:37000].reshape(1,-1)\ny1 = torch.load(\"/floyd/input/wav/y1.pt\").double().cuda()[0][7400:37000].reshape(1,-1)\n\nseq = Sequence()\nseq.double()\n\ncriterion = nn.MSELoss()\nseq = seq.cuda()\ndevice = torch.device(\"cuda:0\")\nseq = seq.to(device)\n\noptimizer = optim.Adam(seq.parameters())\nstarttime = datetime.datetime.now()\ni = -1\n\n# training for 4 hours on cloud GPU\nwhile((datetime.datetime.now() - starttime).total_seconds() &lt; 60*60*4) :\n    i+=1\n    optimizer.zero_grad()\n    input = Variable(x1)\n    target = Variable(y1)\n    out = seq(input)    \n    loss = criterion(out, target)\n    loss.backward()    \n    optimizer.step()\n</code></pre>\n"}, {"tags": ["python", "tkinter", "pycharm"], "comments": [{"owner": {"reputation": 13209, "user_id": 7414759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b272ce66c7c245c6cbe9a830691daddc?s=128&d=identicon&r=PG&f=1", "display_name": "stovfl", "link": "https://stackoverflow.com/users/7414759/stovfl"}, "edited": false, "score": 0, "creation_date": 1553122938, "post_id": 55271099, "comment_id": 97273946, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/31669945/tkinter-import-filedialog-error\">Tkinter import filedialog error</a>"}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1553124207, "post_id": 55271099, "comment_id": 97274322, "body": "You definitely should not be importing <code>_tkinter</code>. Please <a href=\"https://stackoverflow.com/posts/55271099/edit\">edit</a> your question to include the actual error and traceback."}], "owner": {"reputation": 21, "user_id": 7818408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c509b5886d44a3abf8fa13cfbbc6e1a?s=128&d=identicon&r=PG&f=1", "display_name": "Sena", "link": "https://stackoverflow.com/users/7818408/sena"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1553120911, "creation_date": 1553120911, "question_id": 55271099, "link": "https://stackoverflow.com/questions/55271099/how-to-use-tkinter-and-askopenfilename-in-pycharm-edu", "title": "How to use tkinter and askopenfilename in PyCharm Edu?", "body": "<p>I have a code that works in another computer but doesn't in my computer. The part below gives error:</p>\n\n<pre><code>from tkinter import Tk\nfrom tkinter.filedialog import askopenfilename\n</code></pre>\n\n<p>It says 'unresolved reference'. With some researches and from the suggestions in PyCharm I wrote it as:</p>\n\n<pre><code>import _tkinter as Tk\nfrom _tkinter.filedialog import askopenfilename\n</code></pre>\n\n<p>It only accepts _tkinter. But I still cannot import askopenfilename. It says 'unresolved reference'. Should I have done anything else before to import tkinter?</p>\n\n<p>By the way, we have different IDE's. I have PyCharm Edu. Can that be the reason?</p>\n"}, {"tags": ["python", "loops", "aggregation"], "comments": [{"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 3, "creation_date": 1553121097, "post_id": 55271084, "comment_id": 97273417, "body": "A rather large hint: you need a dictionary."}, {"owner": {"reputation": 43, "user_id": 4212467, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-aWkq0heMn9w/AAAAAAAAAAI/AAAAAAAAAsY/9iSRL4yRi88/photo.jpg?sz=128", "display_name": "Chetan Karkhanis", "link": "https://stackoverflow.com/users/4212467/chetan-karkhanis"}, "reply_to_user": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1553121101, "post_id": 55271084, "comment_id": 97273419, "body": "The dollar amount for the second element is incorrect as shown. It should be 251.52 + 263.16 = 514.68"}, {"owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "reply_to_user": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1553123200, "post_id": 55271084, "comment_id": 97274032, "body": "@DanielRoseman No you don&#39;t need a dictionary since the OP states that the given list is already sorted."}, {"owner": {"reputation": 43, "user_id": 4212467, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-aWkq0heMn9w/AAAAAAAAAAI/AAAAAAAAAsY/9iSRL4yRi88/photo.jpg?sz=128", "display_name": "Chetan Karkhanis", "link": "https://stackoverflow.com/users/4212467/chetan-karkhanis"}, "edited": false, "score": 0, "creation_date": 1553123229, "post_id": 55271084, "comment_id": 97274041, "body": "hmmm...not sure how a dictionary would do the trick. The key in the dict, being unique, the dict would not hold the repeating drugname, right? Unless it is used to store the final product i guess.."}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 4212467, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-aWkq0heMn9w/AAAAAAAAAAI/AAAAAAAAAsY/9iSRL4yRi88/photo.jpg?sz=128", "display_name": "Chetan Karkhanis", "link": "https://stackoverflow.com/users/4212467/chetan-karkhanis"}, "edited": false, "score": 1, "creation_date": 1553124401, "post_id": 55271407, "comment_id": 97274380, "body": "Whoa! I was not aware of the &#39;last&#39; variable element of a list. Thank you!"}, {"owner": {"reputation": 43, "user_id": 4212467, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-aWkq0heMn9w/AAAAAAAAAAI/AAAAAAAAAsY/9iSRL4yRi88/photo.jpg?sz=128", "display_name": "Chetan Karkhanis", "link": "https://stackoverflow.com/users/4212467/chetan-karkhanis"}, "edited": false, "score": 0, "creation_date": 1553130942, "post_id": 55271407, "comment_id": 97275914, "body": "Actually, after adding the set code, the results are not as expected.  It shows [&#39;CIPROFLOXACIN HCL&#39;, 1, 506] and [&#39;HYDROCODONE-ACETAMINOPHEN&#39;, 1, 515] for the two drugs that should have a doctor_id count of 2. In fact, for all the drugs, the doctor_id count is always showing 1. The previous iteration was giving the right results."}, {"owner": {"reputation": 43, "user_id": 4212467, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-aWkq0heMn9w/AAAAAAAAAAI/AAAAAAAAAsY/9iSRL4yRi88/photo.jpg?sz=128", "display_name": "Chetan Karkhanis", "link": "https://stackoverflow.com/users/4212467/chetan-karkhanis"}, "edited": false, "score": 0, "creation_date": 1553132619, "post_id": 55271407, "comment_id": 97276289, "body": "output = [] last = None for name, id, amount in sorted_new_list:     if name != last:         output.append([name, 0, 0])         last = name         ids = set()     if id not in ids:         ids.add(id)     output[-1][1] += 1     output[-1][2] += amount    Made a little tweak to the above code. Now it works."}, {"owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "reply_to_user": {"reputation": 43, "user_id": 4212467, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-aWkq0heMn9w/AAAAAAAAAAI/AAAAAAAAAsY/9iSRL4yRi88/photo.jpg?sz=128", "display_name": "Chetan Karkhanis", "link": "https://stackoverflow.com/users/4212467/chetan-karkhanis"}, "edited": false, "score": 0, "creation_date": 1553133491, "post_id": 55271407, "comment_id": 97276466, "body": "I don&#39;t see how my code wouldn&#39;t work. Please see a demo here: <a href=\"https://ideone.com/htRNXk\" rel=\"nofollow noreferrer\">ideone.com/htRNXk</a> Also, I don&#39;t see how your tweaked code is any different from mine. You simply swapped the execution of <code>output[-1][1] += 1</code> and <code>ids.add(id)</code>, in which the order does not matter."}, {"owner": {"reputation": 43, "user_id": 4212467, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-aWkq0heMn9w/AAAAAAAAAAI/AAAAAAAAAsY/9iSRL4yRi88/photo.jpg?sz=128", "display_name": "Chetan Karkhanis", "link": "https://stackoverflow.com/users/4212467/chetan-karkhanis"}, "edited": false, "score": 0, "creation_date": 1553136185, "post_id": 55271407, "comment_id": 97277032, "body": "Hi...I looked at the link you provided and for [&#39;CIPROFLOXACIN HCL&#39;, 1801093968, 61.49],    [&#39;CIPROFLOXACIN HCL&#39;, 1588763981, 445.23],    [&#39;CIPROFLOXACIN HCL&#39;, 1588763981, 123], where you have three elements, the doctor_id shows as 2 in your stdout. My original set had two elements only for this drug as seen in my desired output snippet."}, {"owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "reply_to_user": {"reputation": 43, "user_id": 4212467, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-aWkq0heMn9w/AAAAAAAAAAI/AAAAAAAAAsY/9iSRL4yRi88/photo.jpg?sz=128", "display_name": "Chetan Karkhanis", "link": "https://stackoverflow.com/users/4212467/chetan-karkhanis"}, "edited": false, "score": 0, "creation_date": 1553136343, "post_id": 55271407, "comment_id": 97277073, "body": "I added that extra entry just to show you that it only counts unique doctor IDs, which for <code>CIPROFLOXACIN HCL</code> is correctly 2. Feel free to remove that entry and re-run it."}, {"owner": {"reputation": 43, "user_id": 4212467, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-aWkq0heMn9w/AAAAAAAAAAI/AAAAAAAAAsY/9iSRL4yRi88/photo.jpg?sz=128", "display_name": "Chetan Karkhanis", "link": "https://stackoverflow.com/users/4212467/chetan-karkhanis"}, "edited": false, "score": 1, "creation_date": 1553136490, "post_id": 55271407, "comment_id": 97277114, "body": "Thanks again. I think I got the solution now. Appreciate it!"}], "tags": [], "owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "is_accepted": true, "score": 2, "last_activity_date": 1553124275, "last_edit_date": 1553124275, "creation_date": 1553123017, "answer_id": 55271407, "question_id": 55271084, "link": "https://stackoverflow.com/questions/55271084/python-aggregation-without-pandas/55271407#55271407", "title": "Python Aggregation without PANDAS", "body": "<p>Since the list is already sorted you can simply iterate through the list (named <code>l</code> in the example below) and keep track of the name of the last iteration, and if the name of the current iteration is different from the last, insert a new entry to the output. Use a set to keep track of the doctor IDs already seen for the current drug, and only increment the the second item of the last entry of the output by 1 if the doctor ID is not seen. And increment the third item of the last entry of the output by the amount of the current iteration:</p>\n\n<pre><code>output = []\nlast = None\nfor name, id, amount in l:\n    if name != last:\n        output.append([name, 0, 0])\n        last = name\n        ids = set()\n    if id not in ids:\n        output[-1][1] += 1\n        ids.add(id)\n    output[-1][2] += amount\n</code></pre>\n\n<p><code>output</code> becomes:</p>\n\n<pre><code>[['CIPROFLOXACIN HCL', 2, 506.72],\n ['HYDROCODONE-ACETAMINOPHEN', 2, 514.6800000000001],\n ['HYDROXYZINE HCL', 1, 945.5],\n ['IBUPROFEN', 1, 67.06],\n ['INVEGA SUSTENNA', 1, 75345.68]]\n</code></pre>\n\n<p>Note that decimal floating points are approximated in the binary system that the computer uses (please read <a href=\"https://stackoverflow.com/questions/588004/is-floating-point-math-broken\">Is floating point math broken?</a>), so some minor errors are inevitable as seen in the sum of the second entry above.</p>\n"}, {"tags": [], "owner": {"reputation": 1168, "user_id": 8593338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d52b142a7c677195e5f55a06afbe4fd6?s=128&d=identicon&r=PG&f=1", "display_name": "abcdaire", "link": "https://stackoverflow.com/users/8593338/abcdaire"}, "is_accepted": false, "score": 0, "last_activity_date": 1553124528, "creation_date": 1553124528, "answer_id": 55271608, "question_id": 55271084, "link": "https://stackoverflow.com/questions/55271084/python-aggregation-without-pandas/55271608#55271608", "title": "Python Aggregation without PANDAS", "body": "<p>Here is a solution with a focus on readability, it doesn't consider that the entries in your original list are sorted by drug name.</p>\n\n<p>It does one pass on all the entries of your data , then a pass on the number of unique drugs.</p>\n\n<p>To do only a single pass on all the entries of your sorted data, see @blhsing solution </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from collections import defaultdict, namedtuple\nEntry = namedtuple('Entry',['doctors', 'prices'])\nprocessed_data = defaultdict(lambda: Entry(doctors=set(), prices=[]))\n\nfor entry in data:\n    drug_name, doctor_id, price = entry\n    processed_data[drug_name].doctors.add(doctor_id)\n    processed_data[drug_name].prices.append(price)\n\nstat_list = [[drug_name, len(entry.doctors), sum(entry.prices)] for drug_name, entry in processed_data.items()]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 3859622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/604a03491c36f42307c194f535abba81?s=128&d=identicon&r=PG&f=1", "display_name": "user3859622", "link": "https://stackoverflow.com/users/3859622/user3859622"}, "is_accepted": false, "score": 0, "last_activity_date": 1616271338, "last_edit_date": 1616271338, "creation_date": 1616167558, "answer_id": 66711030, "question_id": 55271084, "link": "https://stackoverflow.com/questions/55271084/python-aggregation-without-pandas/66711030#66711030", "title": "Python Aggregation without PANDAS", "body": "<p>Without Pandas or defaultdict:</p>\n<pre class=\"lang-py prettyprint-override\"><code>    d={}\n\n    for row in l:\n\n       if row[0] in d:\n           d[row[0]].append(row[1])\n           d[row[0]].append(row[2])\n       else:\n           d[row[0]]=[row[1]]\n           d[row[0]].append(row[2])\n\n    return [[key, len(set(val[0::2])), sum(val[1::2])] for key, val in d.items()]\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 4212467, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-aWkq0heMn9w/AAAAAAAAAAI/AAAAAAAAAsY/9iSRL4yRi88/photo.jpg?sz=128", "display_name": "Chetan Karkhanis", "link": "https://stackoverflow.com/users/4212467/chetan-karkhanis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2135, "favorite_count": 0, "accepted_answer_id": 55271407, "answer_count": 3, "score": 3, "last_activity_date": 1616271338, "creation_date": 1553120838, "last_edit_date": 1553121406, "question_id": 55271084, "link": "https://stackoverflow.com/questions/55271084/python-aggregation-without-pandas", "title": "Python Aggregation without PANDAS", "body": "<p>I have a sorted and nested list. Each element in the list has 3 sub-elements; 'Drugname', Doctor_id, Amount. For a given drugname (which repeats) the doctor ids are different and so are the amounts. See sample list below..</p>\n\n<p>I need an output where, for each drugname, I need to count the total UNIQUE doctor ids and the sum of the dollar amount for that drug. For ex, for the list snippet below..</p>\n\n<pre><code>[\n   ['CIPROFLOXACIN HCL', 1801093968, 61.49],\n   ['CIPROFLOXACIN HCL', 1588763981, 445.23],\n   ['HYDROCODONE-ACETAMINOPHEN', 1801093968, 251.52],\n   ['HYDROCODONE-ACETAMINOPHEN', 1588763981, 263.16],\n   ['HYDROXYZINE HCL', 1952310666, 945.5],\n   ['IBUPROFEN', 1801093968, 67.06],\n   ['INVEGA SUSTENNA', 1952310666, 75345.68]\n]\n</code></pre>\n\n<p>The desired output is as below.</p>\n\n<pre><code>[\n   ['CIPROFLOXACIN HCL', 2, 516.72],\n   ['HYDROCODONE-ACETAMINOPHEN', 2, 514.68]\n   ['HYDROXYZINE HCL', 1, 945.5]\n   ['IBUPROFEN', 1, 67.06]\n   ['INVEGA SUSTENNA', 1, 75345.68]\n]\n</code></pre>\n\n<p>In a database world this is the easiest thing with a simple GROUP BY on drugname. In Python, I am not allowed to use PANDAS, NumPy etc. Just the basic building blocks of Python. I tried the below code but I am unable to reset the count variable to count doctor ids and amounts. This commented code is one of several attempts. Not sure if I need to use a nested for loop or a for loop-while loop combo. </p>\n\n<p>All help is appreciated!</p>\n\n<pre><code>aggr_list = []\ntemp_drug_name = ''\ndoc_count = 0\namount = 0\nfor list_element in sorted_new_list:\n    temp_drug_name = list_element[0]\n    if temp_drug_name == list_element[0]:\n        amount += float(amount)\n        doc_count += 1\n\n    aggr_list.append([temp_drug_name, doc_count, amount])\n\nprint(aggr_list)\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "rest", "gmail-api"], "comments": [{"owner": {"reputation": 2374, "user_id": 10105321, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/X354S.gif?s=128&g=1", "display_name": "jess", "link": "https://stackoverflow.com/users/10105321/jess"}, "edited": false, "score": 0, "creation_date": 1553182914, "post_id": 55271064, "comment_id": 97298220, "body": "When sending a message with multiple attachments varies on the MIME message using the Google APIs client libraries for various languages. You could probably check this <a href=\"https://stackoverflow.com/questions/52628676/gmail-api-sender-not-sending-multiple-attachments\">SO post</a> for the flow and structure of the MIME message parts."}, {"owner": {"reputation": 46, "user_id": 9969512, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-U6IbMS1HmRQ/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq2ZXEBN65emeGBvcUcisvDZ4LrQlQ/mo/photo.jpg?sz=128", "display_name": "constdoc constdoc", "link": "https://stackoverflow.com/users/9969512/constdoc-constdoc"}, "reply_to_user": {"reputation": 2374, "user_id": 10105321, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/X354S.gif?s=128&g=1", "display_name": "jess", "link": "https://stackoverflow.com/users/10105321/jess"}, "edited": false, "score": 0, "creation_date": 1553800112, "post_id": 55271064, "comment_id": 97530929, "body": "Thanks for responding, Jess. Per the title, I am interested only in the python client library."}], "answers": [{"tags": [], "owner": {"reputation": 544, "user_id": 3372006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73892eb672f05f8d2773cff6fa0b5980?s=128&d=identicon&r=PG&f=1", "display_name": "xiaxio", "link": "https://stackoverflow.com/users/3372006/xiaxio"}, "is_accepted": false, "score": 1, "last_activity_date": 1561398168, "last_edit_date": 1561398168, "creation_date": 1561393985, "answer_id": 56740681, "question_id": 55271064, "link": "https://stackoverflow.com/questions/55271064/using-python-and-gmail-api-how-can-i-send-messages-with-multiple-attachements/56740681#56740681", "title": "Using Python and gmail API, how can I send messages with multiple attachements?", "body": "<p>With this function, you can send to one or multiple recipient emails, and also you can attach zero, one or more files. Coding improvement recommendations are welcome, however the way it is now, it works.</p>\n\n<p>Python v3.7</p>\n\n<p>smtplib from <a href=\"https://github.com/python/cpython/blob/3.7/Lib/smtplib.py\" rel=\"nofollow noreferrer\">https://github.com/python/cpython/blob/3.7/Lib/smtplib.py</a> (download the code and create the smtplib.py on your project folder)</p>\n\n<pre><code>def send_email(se_from, se_pwd, se_to, se_subject, se_plain_text='', se_html_text='', se_attachments=[]):\n    \"\"\" Send an email with the specifications in parameters\n\n    The following youtube channel helped me a lot to build this function:\n    https://www.youtube.com/watch?v=JRCJ6RtE3xU\n    How to Send Emails Using Python - Plain Text, Adding Attachments, HTML Emails, and More\n    Corey Schafer youtube channel\n\n    Input:\n        se_from : email address that will send the email\n        se_pwd : password for authentication (uses SMTP.SSL for authentication)\n        se_to : destination email. For various emails, use ['email1@example.com', 'email2@example.com']\n        se_subject : email subject line\n        se_plain_text : body text in plain format, in case html is not supported\n        se_html_text : body text in html format\n        se_attachments : list of attachments. For various attachments, use ['path1\\file1.ext1', 'path2\\file2.ext2', 'path3\\file3.ext3']. Follow your OS guidelines for directory paths. Empty list ([]) if no attachments\n\n    Returns\n    -------\n        se_error_code : returns True if email was successful (still need to incorporate exception handling routines)\n    \"\"\"\n\n    import smtplib\n    from email.message import EmailMessage\n\n    # Join email parts following smtp structure\n    msg = EmailMessage()\n    msg['From'] = se_from\n    msg['To'] = se_to\n    msg['Subject'] = se_subject\n    msg.set_content(se_plain_text)\n    # Adds the html text only if there is one\n    if se_html_text != '':\n        msg.add_alternative(\"\"\"{}\"\"\".format(se_html_text), subtype='html')\n\n    # Checks if there are files to be sent in the email\n    if len(se_attachments) &gt; 0:\n        # Goes through every file in files list\n        for file in se_attachments:\n            with open(file, 'rb') as f:\n                file_data = f.read()\n                file_name = f.name\n            # Attaches the file to the message. Leaves google to detect the application to open it\n            msg.add_attachment(file_data, maintype='application', subtype='octet-stream', filename=file_name)\n\n    # Sends the email that has been built\n    with smtplib.SMTP_SSL('smtp.gmail.com', 465) as smtp:\n        smtp.login(se_from, se_pwd)\n        smtp.send_message(msg)\n\n    return True\n</code></pre>\n\n<p>Don't forget to activate less secure apps on your google account (<a href=\"https://myaccount.google.com/lesssecureapps\" rel=\"nofollow noreferrer\">https://myaccount.google.com/lesssecureapps</a>) for this code to work.</p>\n\n<p>Hope this helps</p>\n"}], "owner": {"reputation": 46, "user_id": 9969512, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-U6IbMS1HmRQ/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq2ZXEBN65emeGBvcUcisvDZ4LrQlQ/mo/photo.jpg?sz=128", "display_name": "constdoc constdoc", "link": "https://stackoverflow.com/users/9969512/constdoc-constdoc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 403, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1561398168, "creation_date": 1553120750, "question_id": 55271064, "link": "https://stackoverflow.com/questions/55271064/using-python-and-gmail-api-how-can-i-send-messages-with-multiple-attachements", "title": "Using Python and gmail API, how can I send messages with multiple attachements?", "body": "<p>Looking to create and send messages with multiple files attached. <a href=\"https://developers.google.com/gmail/api/guides/sending#creating_messages_with_attachments\" rel=\"nofollow noreferrer\">Per the online gmail api documentation,</a> there is a function for building messages with an attachment but no documentation for howto use it to create a message with multiple attachments.</p>\n\n<p>Can I use the gmail API to send messages with multiple attachments programmatically? How might one do this?</p>\n"}, {"tags": ["python", "python-3.x", "pip", "argparse"], "comments": [{"owner": {"reputation": 415, "user_id": 4351853, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-vkWUFa95dLo/AAAAAAAAAAI/AAAAAAAAAAA/IfuSA4kxIWI/photo.jpg?sz=128", "display_name": "Nidal", "link": "https://stackoverflow.com/users/4351853/nidal"}, "edited": false, "score": 0, "creation_date": 1553121248, "post_id": 55271050, "comment_id": 97273469, "body": "Consider using a tool like py2exe (for Windows deployments). Auto installing Python packages is not a trivial problem."}, {"owner": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "edited": false, "score": 0, "creation_date": 1553128092, "post_id": 55271050, "comment_id": 97275327, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/5458048/how-to-make-a-python-script-standalone-executable-to-run-without-any-dependency\">How to make a Python script standalone executable to run without ANY dependency?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 111, "user_id": 6110285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/623ca758384b10de0ed493e35fe856b5?s=128&d=identicon&r=PG&f=1", "display_name": "pittix", "link": "https://stackoverflow.com/users/6110285/pittix"}, "is_accepted": false, "score": 1, "last_activity_date": 1553121189, "creation_date": 1553121189, "answer_id": 55271143, "question_id": 55271050, "link": "https://stackoverflow.com/questions/55271050/how-do-i-package-a-single-python-script-which-takes-command-line-arguments-and-a/55271143#55271143", "title": "How do I package a single python script which takes command line arguments and also has dependencies?", "body": "<p>I found a good article today that explains quite well the procedure: <a href=\"https://medium.com/dreamcatcher-its-blog/making-an-stand-alone-executable-from-a-python-script-using-pyinstaller-d1df9170e263\" rel=\"nofollow noreferrer\">https://medium.com/dreamcatcher-its-blog/making-an-stand-alone-executable-from-a-python-script-using-pyinstaller-d1df9170e263</a></p>\n\n<p><code>pyinstaller --onefile &lt;script.py&gt;</code> is the tl;dr on linux. On windows you need also <code>py32exe</code></p>\n"}, {"tags": [], "owner": {"reputation": 418, "user_id": 6246834, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f57de0f12e63d48466fc6610efa6c2cf?s=128&d=identicon&r=PG", "display_name": "dwagon", "link": "https://stackoverflow.com/users/6246834/dwagon"}, "is_accepted": false, "score": 0, "last_activity_date": 1553121320, "creation_date": 1553121320, "answer_id": 55271169, "question_id": 55271050, "link": "https://stackoverflow.com/questions/55271050/how-do-i-package-a-single-python-script-which-takes-command-line-arguments-and-a/55271169#55271169", "title": "How do I package a single python script which takes command line arguments and also has dependencies?", "body": "<p>Have a look at pex (<a href=\"https://pex.readthedocs.io/en/stable/\" rel=\"nofollow noreferrer\">https://pex.readthedocs.io/en/stable/</a>). It wraps up your python scripts, files, dependencies, etc into a single executable. You still need the python interpreter installed, but it includes everything else.</p>\n"}, {"tags": [], "owner": {"reputation": 116, "user_id": 7000054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e65b67cf3387a44f61c11c80b3fc094?s=128&d=identicon&r=PG", "display_name": "user368604", "link": "https://stackoverflow.com/users/7000054/user368604"}, "is_accepted": false, "score": 1, "last_activity_date": 1553124800, "creation_date": 1553124800, "answer_id": 55271654, "question_id": 55271050, "link": "https://stackoverflow.com/questions/55271050/how-do-i-package-a-single-python-script-which-takes-command-line-arguments-and-a/55271654#55271654", "title": "How do I package a single python script which takes command line arguments and also has dependencies?", "body": "<p>If you can rely on a base install of python being present already.</p>\n\n<p>Then it's worth looking at Python's zipapp module introduced in Python3.5  <a href=\"https://docs.python.org/3/library/zipapp.html#creating-standalone-applications-with-zipapp\" rel=\"nofollow noreferrer\">https://docs.python.org/3/library/zipapp.html#creating-standalone-applications-with-zipapp</a> For background info PEP441 <a href=\"https://www.python.org/dev/peps/pep-0441/\" rel=\"nofollow noreferrer\">https://www.python.org/dev/peps/pep-0441/</a></p>\n\n<p>Also there is a project called Shiv which adds some extra abilities to the zipapp module bundled in python3.5</p>\n\n<p><a href=\"https://shiv.readthedocs.io/en/latest/\" rel=\"nofollow noreferrer\">https://shiv.readthedocs.io/en/latest/</a></p>\n"}], "owner": {"reputation": 33, "user_id": 11042683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd09b8e1019a5518787dc126c31d3735?s=128&d=identicon&r=PG&f=1", "display_name": "J Doe", "link": "https://stackoverflow.com/users/11042683/j-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 832, "favorite_count": 1, "answer_count": 3, "score": 2, "last_activity_date": 1607470261, "creation_date": 1553120625, "last_edit_date": 1583261415, "question_id": 55271050, "link": "https://stackoverflow.com/questions/55271050/how-do-i-package-a-single-python-script-which-takes-command-line-arguments-and-a", "title": "How do I package a single python script which takes command line arguments and also has dependencies?", "body": "<p>I have a single Python file which is supposed to take in a bunch of inputs during the command.</p>\n\n<p>For eg: <code>python script.py \"string_1\" \"string_2\"</code></p>\n\n<p>I also have a bunch of dependencies including pandas, datetime and even Python3.</p>\n\n<p>I want to package all this code in a manner that anyone can install the package along with the dependencies as well (in a directory or so) and then just call the script/module : in the above manner. Without having to actually go into a Python interpreter.</p>\n\n<p>I tried using the <a href=\"https://python-packaging.readthedocs.io/\" rel=\"nofollow noreferrer\">python-packaging</a> resource, but with that I would need to go into the interpreter, right ?</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 55, "user_id": 11082310, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-aeYxFUYVIzM/AAAAAAAAAAI/AAAAAAAAFt8/Eoi_ZWH39CQ/photo.jpg?sz=128", "display_name": "Rocko Bishop", "link": "https://stackoverflow.com/users/11082310/rocko-bishop"}, "reply_to_user": {"reputation": 299, "user_id": 7705108, "user_type": "registered", "profile_image": "https://graph.facebook.com/1486935251349133/picture?type=large", "display_name": "ananvodo", "link": "https://stackoverflow.com/users/7705108/ananvodo"}, "edited": false, "score": 0, "creation_date": 1553121060, "post_id": 55271005, "comment_id": 97273403, "body": "@ananvodo Thank you! That link was exactly what I needed.  I couldn&#39;t find a duplicate anywhere."}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1553121085, "post_id": 55271005, "comment_id": 97273413, "body": "@RockoBishop ok , so I close this as dup, is that ok ?"}, {"owner": {"reputation": 55, "user_id": 11082310, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-aeYxFUYVIzM/AAAAAAAAAAI/AAAAAAAAFt8/Eoi_ZWH39CQ/photo.jpg?sz=128", "display_name": "Rocko Bishop", "link": "https://stackoverflow.com/users/11082310/rocko-bishop"}, "reply_to_user": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1553121858, "post_id": 55271005, "comment_id": 97273644, "body": "That&#39;s perfectly fine."}], "answers": [{"tags": [], "owner": {"reputation": 415, "user_id": 4351853, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-vkWUFa95dLo/AAAAAAAAAAI/AAAAAAAAAAA/IfuSA4kxIWI/photo.jpg?sz=128", "display_name": "Nidal", "link": "https://stackoverflow.com/users/4351853/nidal"}, "is_accepted": true, "score": 0, "last_activity_date": 1553120787, "creation_date": 1553120787, "answer_id": 55271072, "question_id": 55271005, "link": "https://stackoverflow.com/questions/55271005/count-values-in-dataframe-column-that-include-specific-parameters/55271072#55271072", "title": "Count values in dataframe column that include specific parameters", "body": "<pre><code>salaries['JobTitle'].str.contains('chief').sum()\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 11082310, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-aeYxFUYVIzM/AAAAAAAAAAI/AAAAAAAAFt8/Eoi_ZWH39CQ/photo.jpg?sz=128", "display_name": "Rocko Bishop", "link": "https://stackoverflow.com/users/11082310/rocko-bishop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "closed_date": 1553121180, "accepted_answer_id": 55271072, "answer_count": 1, "score": 2, "last_activity_date": 1553120787, "creation_date": 1553120395, "question_id": 55271005, "link": "https://stackoverflow.com/questions/55271005/count-values-in-dataframe-column-that-include-specific-parameters", "closed_reason": "Duplicate", "title": "Count values in dataframe column that include specific parameters", "body": "<p>I have a dataframe with ~150k columns:</p>\n\n<p><a href=\"https://i.stack.imgur.com/gvuxa.png\" rel=\"nofollow noreferrer\">Dataframe: Information about Salaries and Employees</a>\nI need to count specific values in the <code>Job Title</code> column of the dataframe, but it has to be a count of the values that include <code>'chief'</code> somewhere within the job title. </p>\n\n<p>I tried bringing up all the unique job titles up with <code>value_counts</code>, but there are too many still for me to count.</p>\n\n<pre><code>print(\"%s employees have 'chief' in their job title.\" % salaries['JobTitle'].value_counts())\n</code></pre>\n\n<p>How can I create the specific condition I need to count the values correctly?</p>\n"}, {"tags": ["python", "beautifulsoup"], "answers": [{"tags": [], "owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "is_accepted": true, "score": 3, "last_activity_date": 1553120500, "creation_date": 1553120500, "answer_id": 55271028, "question_id": 55270986, "link": "https://stackoverflow.com/questions/55270986/how-do-i-get-the-second-table-class/55271028#55271028", "title": "How do I get the second table class?", "body": "<p>You can use <code>soup.find_all</code> and access the last table. Since there are only two <code>table</code> tags with <code>wikitable sortable</code> as its class, the last element in the resulting list will be the \"Recent Changes\" table:</p>\n\n<pre><code>soup.find_all(\"table\", {\"class\":\"wikitable sortable\"})[-1]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 71123, "user_id": 6241235, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/dCxzx.png?s=128&g=1", "display_name": "QHarr", "link": "https://stackoverflow.com/users/6241235/qharr"}, "is_accepted": false, "score": 2, "last_activity_date": 1553170100, "creation_date": 1553170100, "answer_id": 55280112, "question_id": 55270986, "link": "https://stackoverflow.com/questions/55270986/how-do-i-get-the-second-table-class/55280112#55280112", "title": "How do I get the second table class?", "body": "<p>You could use an nth-of-type css selector to specify the second matching table</p>\n\n<pre><code>import bs4 as bs\nimport requests\n\nurl = 'https://en.wikipedia.org/wiki/List_of_S%26P_500_companies'\nr = requests.get(url)\nurl = r.content\nsoup = bs.BeautifulSoup(url,'lxml')\n\ntab = soup.select_one(\"table.wikitable.sortable:nth-of-type(2)\")\nprint(tab)\n</code></pre>\n"}], "owner": {"reputation": 514, "user_id": 9008162, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/173472de06313d25656f7f91bc143a86?s=128&d=identicon&r=PG&f=1", "display_name": "saga", "link": "https://stackoverflow.com/users/9008162/saga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 55271028, "answer_count": 2, "score": 1, "last_activity_date": 1553170100, "creation_date": 1553120292, "question_id": 55270986, "link": "https://stackoverflow.com/questions/55270986/how-do-i-get-the-second-table-class", "title": "How do I get the second table class?", "body": "<p>I am trying to find a table in a Wikipedia page using BeautifulSoup. I know how to get the first table, but how do I get the second table (Recent changes to the list of S&amp;P 500 Components) with the same class <code>wikitable sortable</code>?</p>\n\n<p>my code:</p>\n\n<pre><code>import bs4 as bs\nimport requests\n\nurl='https://en.wikipedia.org/wiki/List_of_S%26P_500_companies'\nr=requests.get(url)\nurl=r.content\nsoup = bs.BeautifulSoup(url,'html.parser')\n\ntab = soup.find(\"table\",{\"class\":\"wikitable sortable\"})\n</code></pre>\n\n<p><a href=\"https://en.wikipedia.org/wiki/List_of_S%26P_500_companies\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/List_of_S%26P_500_companies</a></p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 3, "creation_date": 1553120292, "post_id": 55270969, "comment_id": 97273166, "body": "Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. What is your input, and what would be the corresponding expected output?"}, {"owner": {"reputation": 4323, "user_id": 1720199, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cODPq.jpg?s=128&g=1", "display_name": "cglacet", "link": "https://stackoverflow.com/users/1720199/cglacet"}, "edited": false, "score": 0, "creation_date": 1553121383, "post_id": 55270969, "comment_id": 97273515, "body": "It sounds like you want this <code>Counter(chain.from_iterable(e.items() for e in card_dict))</code>."}], "answers": [{"comments": [{"owner": {"reputation": 159, "user_id": 3549729, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/daf6fbe33803488e12b99aa59b6e1cdb?s=128&d=identicon&r=PG&f=1", "display_name": "MixedBeans", "link": "https://stackoverflow.com/users/3549729/mixedbeans"}, "edited": false, "score": 0, "creation_date": 1553122039, "post_id": 55271223, "comment_id": 97273699, "body": "Hmm. Still get <code>TypeError: unhashable type: &#39;list&#39;</code> but I think that is because I may  have oversimplified the json. The full json does have nested lists and dictionaries and that may causing the issue?"}, {"owner": {"reputation": 4323, "user_id": 1720199, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cODPq.jpg?s=128&g=1", "display_name": "cglacet", "link": "https://stackoverflow.com/users/1720199/cglacet"}, "reply_to_user": {"reputation": 159, "user_id": 3549729, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/daf6fbe33803488e12b99aa59b6e1cdb?s=128&d=identicon&r=PG&f=1", "display_name": "MixedBeans", "link": "https://stackoverflow.com/users/3549729/mixedbeans"}, "edited": false, "score": 0, "creation_date": 1553122707, "post_id": 55271223, "comment_id": 97273876, "body": "To be more specific, if one of the value is a list, this will fail. On the other hand there are solutions to this, we just the details to discuss them."}, {"owner": {"reputation": 159, "user_id": 3549729, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/daf6fbe33803488e12b99aa59b6e1cdb?s=128&d=identicon&r=PG&f=1", "display_name": "MixedBeans", "link": "https://stackoverflow.com/users/3549729/mixedbeans"}, "edited": false, "score": 0, "creation_date": 1553124920, "post_id": 55271223, "comment_id": 97274540, "body": "Updated the list of dictionaries to include an idea of what the nested list and dictionaries look like. They are only nest one level lower."}, {"owner": {"reputation": 4323, "user_id": 1720199, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cODPq.jpg?s=128&g=1", "display_name": "cglacet", "link": "https://stackoverflow.com/users/1720199/cglacet"}, "reply_to_user": {"reputation": 159, "user_id": 3549729, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/daf6fbe33803488e12b99aa59b6e1cdb?s=128&d=identicon&r=PG&f=1", "display_name": "MixedBeans", "link": "https://stackoverflow.com/users/3549729/mixedbeans"}, "edited": false, "score": 0, "creation_date": 1553125608, "post_id": 55271223, "comment_id": 97274722, "body": "If your input data is representative, then that should work."}, {"owner": {"reputation": 159, "user_id": 3549729, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/daf6fbe33803488e12b99aa59b6e1cdb?s=128&d=identicon&r=PG&f=1", "display_name": "MixedBeans", "link": "https://stackoverflow.com/users/3549729/mixedbeans"}, "edited": false, "score": 0, "creation_date": 1553128312, "post_id": 55271223, "comment_id": 97275375, "body": "I used the second block of code you posted and that seems to execute fine but the counter fails. <code>TypeError: unhashable type: &#39;dict&#39;</code>. Were you able to get it to work with my sample data?"}, {"owner": {"reputation": 159, "user_id": 3549729, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/daf6fbe33803488e12b99aa59b6e1cdb?s=128&d=identicon&r=PG&f=1", "display_name": "MixedBeans", "link": "https://stackoverflow.com/users/3549729/mixedbeans"}, "edited": false, "score": 0, "creation_date": 1553130773, "post_id": 55271223, "comment_id": 97275886, "body": "What if I did this? language = [d[&#39;language&#39;] for d in card_dict]. That will be just the language and I should be able to do a count on each unique value right?"}, {"owner": {"reputation": 159, "user_id": 3549729, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/daf6fbe33803488e12b99aa59b6e1cdb?s=128&d=identicon&r=PG&f=1", "display_name": "MixedBeans", "link": "https://stackoverflow.com/users/3549729/mixedbeans"}, "edited": false, "score": 0, "creation_date": 1553131599, "post_id": 55271223, "comment_id": 97276058, "body": "i think a simple hack is to push that list I created in my previous comment to a pandas df and then use <code>df.columnname.unique()</code>. Good enough for me."}], "tags": [], "owner": {"reputation": 4323, "user_id": 1720199, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cODPq.jpg?s=128&g=1", "display_name": "cglacet", "link": "https://stackoverflow.com/users/1720199/cglacet"}, "is_accepted": false, "score": 0, "last_activity_date": 1553125571, "last_edit_date": 1553125571, "creation_date": 1553121772, "answer_id": 55271223, "question_id": 55270969, "link": "https://stackoverflow.com/questions/55270969/how-do-i-get-a-count-of-a-unique-value-in-a-list-of-dictionaries/55271223#55271223", "title": "How do I get a count of a unique value in a list of dictionaries?", "body": "<p>In python, tuples are hashable, therefore you can use tuples as keys in a dictionary, moreover <code>dict.items()</code> returns <code>(key, value)</code> tuples. Using these two remarks, if you change your <code>count</code> to: </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>counts = Counter(chain.from_iterable(e.items() for e in card_dict))\n</code></pre>\n\n<p>If some values are actually list of values or simple (non-nested) dictionaries, then you can transform them to tuples before building the <code>Counter</code>:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def tuplify(card):\n    if isinstance(card, list):\n        return tuple(card)\n    if isinstance(card, dict):\n        return tuple(card.items())\n    return card\n\ncard_dict = [{k: tuplify(v) for k, v in card.items()} for card in card_dict]\n</code></pre>\n"}], "owner": {"reputation": 159, "user_id": 3549729, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/daf6fbe33803488e12b99aa59b6e1cdb?s=128&d=identicon&r=PG&f=1", "display_name": "MixedBeans", "link": "https://stackoverflow.com/users/3549729/mixedbeans"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1553125571, "creation_date": 1553120218, "last_edit_date": 1553124872, "question_id": 55270969, "link": "https://stackoverflow.com/questions/55270969/how-do-i-get-a-count-of-a-unique-value-in-a-list-of-dictionaries", "title": "How do I get a count of a unique value in a list of dictionaries?", "body": "<p>Here is a a shortened example of what my json (list of dictionaries) looks like:</p>\n\n<pre><code>[\n  {\n    \"product_type\": \"widget\",\n    \"id\": \"1744556-ghh56h-4633\",\n    \"manufacture_id\": \"AAB4567\",\n    \"language\": \"en\",\n    \"store_ids\": [\n      416835,\n      456145\n    ],\n    \"name\": \"Best Widget\",\n    \"origin\": \"US\",\n    \"manufactured\": \"2018-08-26\",\n    \"uri\": \"https://bobswidgets.com/best_widget\",\n    \"image_uris\": {\n      \"small\": \"https://bobswidgets.com/small/best_widget_sm.jpg\",\n      \"normal\": \"https://bobswidgets.com/medium/best_widget_md.jpg\",\n      \"large\": \"https://bobswidgets.com/large/best_widget_lg.jpg\"\n    },\n    \"manufacture_cost\": \"12.50\"\n  },\n  {\n    \"product_type\": \"widget\",\n    \"id\": \"0956786-dje596-3904\",\n    \"manufacture_id\": \"BCD13D\",\n    \"language\": \"en\",\n    \"store_ids\": [\n      \"014329\",\n      \"40123\"\n    ],\n    \"name\": \"Best Widget2\",\n    \"origin\": \"US\",\n    \"manufactured\": \"2018-10-03\",\n    \"uri\": \"https://bobswidgets.com/best_widget_2\",\n    \"image_uris\": {\n      \"small\": \"https://bobswidgets.com/small/best_widget2_sm.jpg\",\n      \"normal\": \"https://bobswidgets.com/medium/best_widget2_md.jpg\",\n      \"large\": \"https://bobswidgets.com/large/best_widget2_lg.jpg\"\n    },\n    \"manufacture_cost\": \"13.33\"\n  }\n]\n</code></pre>\n\n<p>I'm trying to get a count of the unique values for a few key:value pairs. I've tried this code and it does a great job of giving the counts for each key but that is  pretty useless since the counts are all nearly the same. </p>\n\n<pre><code>from collections import Counter\nfrom itertools import chain\n\ncounts = Counter(chain.from_iterable(e.keys() for e in card_dict))\nfor key, count in counts.most_common():\n    print('{}: {}'.format(key, count))\n</code></pre>\n\n<p>I tried this to get values instead of keys but get an error. <code>TypeError: unhashable type: 'list'</code> It's also pretty useless since I have ids in the json file and they are unique.</p>\n\n<pre><code>counts = Counter(chain.from_iterable(e.values() for e in card_dict))\nfor value, count in counts.most_common():\n    print('{}: {}'.format(value, count))\n</code></pre>\n\n<p>What I want to be able to do is zero in on a handful of keys. For example the language key:value. I'd like to get a count of those that are or are not \"en\".</p>\n\n<p>The output would be something like:\n\"The  entities not in English are:\"\nlanguage : 12345</p>\n"}, {"tags": ["python", "genetic-algorithm"], "owner": {"reputation": 717, "user_id": 7092686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f7e3add588a1ace4bfb5114a6e148d4?s=128&d=identicon&r=PG&f=1", "display_name": "MarkAlanFrank", "link": "https://stackoverflow.com/users/7092686/markalanfrank"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1553120145, "creation_date": 1553120145, "question_id": 55270958, "link": "https://stackoverflow.com/questions/55270958/genetic-algorithm-problem-with-inheritance", "title": "Genetic algorithm - problem with inheritance", "body": "<p>I have implemented a genetic algorithm to fit polynomial that should divide 2 sets of points. I generate first random population and results seem to be as desired, but the problem starts to grow when I cross population. I think I messed something up with crossovers or with 'fitness function'. In the first run, the program finds good solutions, but every iteration it gets worst. </p>\n\n<p>Example of 1 iteration:\n<a href=\"https://i.stack.imgur.com/JSSQx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JSSQx.png\" alt=\"enter image description here\"></a></p>\n\n<p>Example of last iteration:\n<a href=\"https://i.stack.imgur.com/spQnw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/spQnw.png\" alt=\"enter image description here\"></a></p>\n\n<p>The function that I use to check how good polynomial is.</p>\n\n<pre><code>def evaluation_mutation(points, population, degree):\n    temp = convert_to_dec(population, degree)\n    result = []\n    counter = []\n    counter2 = []\n\n    for inx2 in range(len(temp)):\n        counter.append([])\n        counter2.append([])\n        for i in range(len(points[0])):\n            if (np.polyval(temp[inx2], points[0][i, 0]) &lt; points[0][i, 0]) and points[1][i]:\n                if not counter[inx2]:\n                    counter[inx2] = 1\n                else:\n                    counter[inx2] = counter[inx2] + 1\n\n            elif (np.polyval(temp[inx2], points[0][i, 0]) &gt; points[0][i, 0]) and not points[1][i]:\n                if not counter2[inx2]:\n                    counter2[inx2] = 1\n                else:\n                    counter2[inx2] = counter2[inx2] + 1\n\n        if counter2[inx2] and counter[inx2]:\n            result.append([counter[inx2], counter2[inx2]])\n        else:\n            result.append([])\n\n    return result\n</code></pre>\n\n<p>Complete code : <a href=\"https://pastebin.com/u5rr62QV\" rel=\"nofollow noreferrer\">https://pastebin.com/u5rr62QV</a></p>\n"}, {"tags": ["python", "dataframe", "matrix"], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 11149197, "user_type": "registered", "profile_image": "https://graph.facebook.com/395558314580113/picture?type=large", "display_name": "Ben Aawf", "link": "https://stackoverflow.com/users/11149197/ben-aawf"}, "edited": false, "score": 0, "creation_date": 1553130128, "post_id": 55271224, "comment_id": 97275740, "body": "by the way its great script ....please how i can remove Symptom_ befor s name jut displas s1 or s4...ect name without Symptom_thanks"}, {"owner": {"reputation": 116, "user_id": 10964825, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sZtaP4dYrZQ/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbfIaB9TLF2fbKuRWcBOD4BpyCbkg/mo/photo.jpg?sz=128", "display_name": "Sri Raghu Malireddi", "link": "https://stackoverflow.com/users/10964825/sri-raghu-malireddi"}, "reply_to_user": {"reputation": 5, "user_id": 11149197, "user_type": "registered", "profile_image": "https://graph.facebook.com/395558314580113/picture?type=large", "display_name": "Ben Aawf", "link": "https://stackoverflow.com/users/11149197/ben-aawf"}, "edited": false, "score": 0, "creation_date": 1553189535, "post_id": 55271224, "comment_id": 97302120, "body": "Hi, You can do it by passing the custom parameters to <code>prefix</code> and <code>prefix_sep</code>. Replace the code to generate <code>df_g</code> with the following <code>df_g = pd.get_dummies(df,columns=[&#39;Symptom&#39;], prefix=[&#39;&#39;], prefix_sep=&#39;&#39;)</code>. This should give you the desired result. The documentation links provided in the answer should help with the explanations."}, {"owner": {"reputation": 5, "user_id": 11149197, "user_type": "registered", "profile_image": "https://graph.facebook.com/395558314580113/picture?type=large", "display_name": "Ben Aawf", "link": "https://stackoverflow.com/users/11149197/ben-aawf"}, "edited": false, "score": 0, "creation_date": 1553201961, "post_id": 55271224, "comment_id": 97307674, "body": "thank you very much its working%...#Sri Raghu Malireddi"}], "tags": [], "owner": {"reputation": 116, "user_id": 10964825, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sZtaP4dYrZQ/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbfIaB9TLF2fbKuRWcBOD4BpyCbkg/mo/photo.jpg?sz=128", "display_name": "Sri Raghu Malireddi", "link": "https://stackoverflow.com/users/10964825/sri-raghu-malireddi"}, "is_accepted": false, "score": 0, "last_activity_date": 1553121780, "creation_date": 1553121780, "answer_id": 55271224, "question_id": 55270929, "link": "https://stackoverflow.com/questions/55270929/creating-a-matrix-from-panda-df-to-display-prediction-between-disease-symptom/55271224#55271224", "title": "Creating a matrix from panda df to display prediction between Disease_Symptom", "body": "<p>You can get it by a combination of <a href=\"http://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.get_dummies.html\" rel=\"nofollow noreferrer\">pandas.get_dummies</a> and <a href=\"http://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.groupby.html#pandas.DataFrame.groupby\" rel=\"nofollow noreferrer\">pandas.DataFrame.groupby</a>.</p>\n\n<p>For simplicity, I am creating my initial data-frame as follows:</p>\n\n<pre><code>&gt;&gt;&gt; df\n  Disease Symptom\n0      d1      s1\n1      d1      s4\n2      d1      s7\n3      d3      s2\n4      d3      s4\n5      d3      s7\n</code></pre>\n\n<p>I can use <code>pd.get_dummies()</code> method to generate dummy columns for the Symptoms feature.</p>\n\n<pre><code>&gt;&gt;&gt; df_g = pd.get_dummies(df,columns=['Symptom'])\n&gt;&gt;&gt; df_g\n  Disease  Symptom_s1  Symptom_s2  Symptom_s4  Symptom_s7\n0      d1           1           0           0           0\n1      d1           0           0           1           0\n2      d1           0           0           0           1\n3      d3           0           1           0           0\n4      d3           0           0           1           0\n5      d3           0           0           0           1\n</code></pre>\n\n<p>Now, I can pack multiple rows using <code>df.groupby()</code> as per the column value of <code>Disease</code> and sum those one-hot encoded vectors to get the final desired result.</p>\n\n<pre><code>&gt;&gt;&gt; df_gg = df_g.groupby(['Disease'], as_index=False).sum()\n&gt;&gt;&gt; df_gg\n  Disease  Symptom_s1  Symptom_s2  Symptom_s4  Symptom_s7\n0      d1           1           0           1           1\n1      d3           0           1           1           1\n</code></pre>\n\n<p>The <code>Symptom_s3</code> and <code>Symptom_s5</code> are simple zero columns and can be appended later. My example <code>df</code> doesn't have <code>s6</code> to get the column through <code>get_dummies()</code>.</p>\n"}], "owner": {"reputation": 5, "user_id": 11149197, "user_type": "registered", "profile_image": "https://graph.facebook.com/395558314580113/picture?type=large", "display_name": "Ben Aawf", "link": "https://stackoverflow.com/users/11149197/ben-aawf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1553121780, "creation_date": 1553119954, "question_id": 55270929, "link": "https://stackoverflow.com/questions/55270929/creating-a-matrix-from-panda-df-to-display-prediction-between-disease-symptom", "title": "Creating a matrix from panda df to display prediction between Disease_Symptom", "body": "<p>hello all i'm begginer in python datafram ::</p>\n\n<p>i have my dataframe in pandas like the following format\nheader[Disease, Symptom]</p>\n\n<pre><code>    Disease     Symptom\n   0 di1         sy1\n   1 di1         sy4\n   2 di1         sy7\n   3 di3         sy2\n   4 di3         sy4\n   5 di3         sy7 \n</code></pre>\n\n<p>##di = disease, sy =symptom</p>\n\n<p>i want to study the prediction to each disease associated to symptom, i would like if some one can help me to create the matrix script\nprovide information if each disease associate to symptom..</p>\n\n<pre><code>ID  s1 s2 s3 s4 s5 s6 s7\ndi1  1  0  0  1  0  0  0\ndi2  0  1  0  0  0  1  1\ndi3  0  1  0  1  0  0  0\ndi4  0  0  0  0  0  0  1\ndi5  0  1  0  1  0  0  0\n</code></pre>\n\n<p>the idea is if one disease across to symptom in matrix print 1 if not associated to that symptom print 0</p>\n\n<p>if anyone help me much appreciate! thanks.</p>\n"}, {"tags": ["python", "user-interface", "tkinter", "python-imaging-library"], "comments": [{"owner": {"reputation": 13209, "user_id": 7414759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b272ce66c7c245c6cbe9a830691daddc?s=128&d=identicon&r=PG&f=1", "display_name": "stovfl", "link": "https://stackoverflow.com/users/7414759/stovfl"}, "edited": false, "score": 0, "creation_date": 1553122807, "post_id": 55270907, "comment_id": 97273903, "body": "<i>&quot;through configure()&quot;</i>: It&#39;s the same: <code>.label4.configure(image=controller.img2)</code>."}, {"owner": {"reputation": 85, "user_id": 9347662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fa178d8575f6e8d9bd56b381638f6f3?s=128&d=identicon&r=PG&f=1", "display_name": "Rudy Montoya", "link": "https://stackoverflow.com/users/9347662/rudy-montoya"}, "reply_to_user": {"reputation": 13209, "user_id": 7414759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b272ce66c7c245c6cbe9a830691daddc?s=128&d=identicon&r=PG&f=1", "display_name": "stovfl", "link": "https://stackoverflow.com/users/7414759/stovfl"}, "edited": false, "score": 0, "creation_date": 1553125950, "post_id": 55270907, "comment_id": 97274824, "body": "Yea, I meant <code>label4.configure(image=controller.img2)</code>. But I was wondering if there   is a way for me to do the changing outside of class <code>StartPage</code> automatically(without pressing a button and calling a class function)"}, {"owner": {"reputation": 17763, "user_id": 5317403, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8TwWN.png?s=128&g=1", "display_name": "acw1668", "link": "https://stackoverflow.com/users/5317403/acw1668"}, "edited": false, "score": 0, "creation_date": 1553128940, "post_id": 55270907, "comment_id": 97275495, "body": "Can you change <code>foo</code> to <code>BooleanVar</code>? If yes, then you can use <code>foo.trace(&#39;w&#39;, callback)</code> to call the <code>callback</code> whenever <code>foo</code> is updated.  Inside <code>callback</code> you can then update the image of <code>Label4</code> based on the value of <code>foo</code>."}, {"owner": {"reputation": 85, "user_id": 9347662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fa178d8575f6e8d9bd56b381638f6f3?s=128&d=identicon&r=PG&f=1", "display_name": "Rudy Montoya", "link": "https://stackoverflow.com/users/9347662/rudy-montoya"}, "edited": false, "score": 0, "creation_date": 1553135729, "post_id": 55270907, "comment_id": 97276940, "body": "Ok, so if I understand you correctly, I create a <code>BooleanVar()</code>, say <code>ColourVar</code> within my <code>Gui()</code> class, which is then passed to my <code>StartPage()</code> class. I write within my <code>StartPage()</code> class the variable trace and the <code>callback</code> function. I can just then update the <code>ColourVar</code> with a <code>Tk.after()</code> command. When I did this, it would just give me a generic error of <code>NoneType</code> object being not callable. The <code>callback</code> seems to run only once before the error would occur."}, {"owner": {"reputation": 17763, "user_id": 5317403, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8TwWN.png?s=128&g=1", "display_name": "acw1668", "link": "https://stackoverflow.com/users/5317403/acw1668"}, "edited": false, "score": 0, "creation_date": 1553148877, "post_id": 55270907, "comment_id": 97279794, "body": "You passed the result of <code>self.IdkChief(controller)</code> as the callback parameter of <code>trace()</code>, so callback is None."}], "answers": [{"tags": [], "owner": {"reputation": 17763, "user_id": 5317403, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8TwWN.png?s=128&g=1", "display_name": "acw1668", "link": "https://stackoverflow.com/users/5317403/acw1668"}, "is_accepted": true, "score": 0, "last_activity_date": 1553148766, "creation_date": 1553148766, "answer_id": 55274676, "question_id": 55270907, "link": "https://stackoverflow.com/questions/55270907/tkinter-updating-images-in-labels-that-arent-directly-accessible/55274676#55274676", "title": "Tkinter: Updating Images in labels that aren&#39;t directly accessible", "body": "<p>You can use tkinter variable <code>trace</code> function to set up a callback function to be executed whenever the variable is updated.  Inside the callback function, you can then update the label based on the value of the variable.</p>\n\n<p>Below is sample code blocks (based on your posted code design) to achieve your goal:</p>\n\n<pre><code>class Gui:\n    def __init__(self, *args, **kwargs):\n        ...\n        self.ColorVar = DoubleVar()\n        ...\n\nclass StartPage(Frame):\n    def __init__(self, parent, controller):\n        ...\n        # register a callback to be executed whenever variable is modified\n        controller.ColorVar.trace('w', lambda *args: self.IdkChief(controller))\n\n    def IdkChief(self, controller):\n        img = controller.img1 if controller.ColorVar.get() &lt; 2.5 else controller.img2\n        self.label4.config(image=img)\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 9347662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fa178d8575f6e8d9bd56b381638f6f3?s=128&d=identicon&r=PG&f=1", "display_name": "Rudy Montoya", "link": "https://stackoverflow.com/users/9347662/rudy-montoya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 55274676, "answer_count": 1, "score": 0, "last_activity_date": 1553148766, "creation_date": 1553119858, "last_edit_date": 1553142184, "question_id": 55270907, "link": "https://stackoverflow.com/questions/55270907/tkinter-updating-images-in-labels-that-arent-directly-accessible", "title": "Tkinter: Updating Images in labels that aren&#39;t directly accessible", "body": "<p>In my GUI, i wanted to display an image that changes depending on some value. The image would change between <code>self.img1</code> and <code>self.img2</code>. I created separate classes for the container and the pages. The container is defined as such:</p>\n\n<pre><code>class Gui(Tk):\n    def __init__(self, *args, **kwargs):\n        Tk.__init__(self, *args, **kwargs)\n        container = Frame(self)\n        container.pack(side=\"top\", fill = \"both\", expand = TRUE)\n        container.grid_rowconfigure(0, weight = 1)\n\n\n        self.MyReading = StringVar()\n\n        self.redpic = Image.open(\"red.png\")\n        self.redpic = self.redpic.resize((100,100), Image.ANTIALIAS)\n        self.greenpic = Image.open(\"green.png\")\n        self.greenpic = self.greenpic.resize((100,100), Image.ANTIALIAS)\n        self.img1 = ImageTk.PhotoImage(self.redpic)\n        self.img2 = ImageTk.PhotoImage(self.greenpic)\n\n        self.frames={}\n\n        for F in (StartPage, PageOne):\n            frame = F(container, self)\n            self.frames[F] = frame\n            frame.grid(row = 0, column = 0, sticky = \"nsew\")\n\n        self.show_frame(StartPage)\n\n\n    def show_frame(self, cont):\n        frame = self.frames[cont]\n        frame.tkraise()\n</code></pre>\n\n<p>And the page displaying the image:</p>\n\n<pre><code>class StartPage(Frame):\n    def __init__(self, parent, controller):\n        Frame.__init__(self,parent)\n\n        label = Label(self, text=\"StartPage\")\n        label.grid()\n        label1 = Label(self, textvariable = controller.MyReading)\n        label1.grid();\n\n        self.label4 = Label(self, image = controller.img1)\n        self.label4.grid();\n        self.label4.image = controller.img1\n\n        button1 = Button (self, text = \"Show PageOne\", command = lambda: controller.show_frame(PageOne))\n        button1.grid()\n</code></pre>\n\n<p>It is currently displaying <code>img1</code>. Now, to instantiate the GUI:</p>\n\n<pre><code>root = Gui()\nupdate_reading()\nroot.mainloop()\n</code></pre>\n\n<p><code>update_reading()</code> updates my other labels defined with <code>StringVar()</code>. I was wondering how would I go about updating <code>label4</code> (which shows the image) if I can only instantiate/get access to <code>Gui()</code>? I only know that I could change the <code>label4</code> through <code>configure()</code>. Is there a <code>textvariable</code> equivalent for images?</p>\n\n<p><strong>EDIT</strong>: I forgot to put the logic that I wanted to implement. It is basically:</p>\n\n<pre><code>If foo == TRUE:\n  --change the image to img1--\nelse:\n  --change the image to img2--\n</code></pre>\n\n<p>for some <code>foo</code> that exists outside of <code>Gui</code>.</p>\n\n<p><strong>EDIT2</strong>: Following through a previous comment's logic, I made some small changes to the code In the <code>Gui</code>:</p>\n\n<pre><code>class Gui(Tk):\n  def __init__(self, *args, **kwargs):\n    self.ColorVar = DoubleVar()\n</code></pre>\n\n<p>And within <code>StartPage()</code>, the changes are:</p>\n\n<pre><code>class StartPage(Frame):\n  def __init__(self, parent, controller):\n    controller.ColorVar.trace(\"w\",self.IdkChief(controller))\n\n  def IdkChief(self, controller):\n        global val1\n        if float(val1) &lt; 2.50 :\n            self.label4.configure(image = controller.img2)\n            self.label4.image = controller.img2\n        else:\n            self.label4.configure(image = controller.img1)\n            self.label4.image = controller.img1\n</code></pre>\n\n<p>Then the changes on <code>ColorVar</code> is defined in <code>update_reading()</code>as such:</p>\n\n<pre><code>def update_reading():\n    global val1\n    root.ColorVar.set(val1)\n    root.after(100,update_reading)\n</code></pre>\n\n<p>Where <code>val1</code> is a changing float value. I decided to change it from a boolean logic to a float one to increase flexibility. It would then throw me a generic error</p>\n\n<blockquote>\n  <p>Exception in Tkinter callback Traceback (most recent call last):<br>\n  File\n  \"C:\\Users\\AppData\\Local\\Programs\\Python\\Python37\\lib\\tkinter__init__.py\",\n  line 1705, in <strong>call</strong>\n      return self.func(*args) TypeError: 'NoneType' object is not callable</p>\n</blockquote>\n\n<p>This error would repeat until the GUI is closed. </p>\n"}, {"tags": ["python", "mysql", "python-3.x", "pymysql"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1553120735, "post_id": 55270877, "comment_id": 97273313, "body": "This type of problem often happens when you try to reuse a generator that you think is a list. It&#39;s hard to tell where that might be happening here, there&#39;s so much code missing. Like what is <code>ResultData()</code>?"}, {"owner": {"reputation": 2120, "user_id": 676490, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/1630c60605bbea32c9508e6e20a0354a?s=128&d=identicon&r=PG", "display_name": "Jos&#233; Carlos", "link": "https://stackoverflow.com/users/676490/jos%c3%a9-carlos"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1553121073, "post_id": 55270877, "comment_id": 97273409, "body": "Hi @Barmar. Thank you for your answer!!! I&#39;ve updated my original post with the code of ResultData object."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1553121259, "post_id": 55270877, "comment_id": 97273474, "body": "What does <code>print(shots)</code> show?"}, {"owner": {"reputation": 2120, "user_id": 676490, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/1630c60605bbea32c9508e6e20a0354a?s=128&d=identicon&r=PG", "display_name": "Jos&#233; Carlos", "link": "https://stackoverflow.com/users/676490/jos%c3%a9-carlos"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1553121645, "post_id": 55270877, "comment_id": 97273583, "body": "The first time, when the query works returns me: shots: [{&#39;id&#39;: 417, &#39;id_game&#39;: 4, &#39;line&#39;: 64, &#39;id_fiba&#39;: 155997, &#39;name&#39;: &#39;M. Xargay&#39;, &#39;quarter&#39;: &#39;Q1&#39;, &#39;m&#39;: 0, &#39;x&#39;: Decimal(&#39;384.00&#39;), &#39;y&#39;: Decimal(&#39;36.00&#39;), &#39;team&#39;: 1, &#39;date_insert&#39;: datetime.datetime(2018, 12, 22, 11, 56, 31)}, {&#39;id&#39;: 419, &#39;id_game&#39;: 4, &#39;line&#39;: 66, &#39;id_fiba&#39;: 155997, &#39;name&#39;: &#39;M. Xargay&#39;, &#39;quarter&#39;: &#39;Q1&#39;, &#39;m&#39;: 1, &#39;x&#39;: Decimal(&#39;350.50&#39;), &#39;y&#39;: Decimal(&#39;132.50&#39;), &#39;team&#39;: 1, &#39;date_insert&#39;: datetime.datetime(2018, 12, 22, 11, 56, 31)}] The other times, I have got nothing because the query returns zero rows"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1553123172, "post_id": 55270877, "comment_id": 97274020, "body": "Is <code>self.connection.cursor()</code> returning a new cursor, or caching the cursor object and returning that?"}, {"owner": {"reputation": 2120, "user_id": 676490, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/1630c60605bbea32c9508e6e20a0354a?s=128&d=identicon&r=PG", "display_name": "Jos&#233; Carlos", "link": "https://stackoverflow.com/users/676490/jos%c3%a9-carlos"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1553123406, "post_id": 55270877, "comment_id": 97274092, "body": "self.connection is created on the constructor of the object SearchDataFIBA. This object, SearchDataFIBA is created each time inside of for loop"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1553123552, "post_id": 55270877, "comment_id": 97274135, "body": "Something is being reused instead of starting fresh, but I can&#39;t see it in any of the code you&#39;ve shown or described."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1553123615, "post_id": 55270877, "comment_id": 97274150, "body": "Are you sure you&#39;re passing the correct parameters to <code>query()</code> each time?"}, {"owner": {"reputation": 2120, "user_id": 676490, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/1630c60605bbea32c9508e6e20a0354a?s=128&d=identicon&r=PG", "display_name": "Jos&#233; Carlos", "link": "https://stackoverflow.com/users/676490/jos%c3%a9-carlos"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1553123851, "post_id": 55270877, "comment_id": 97274224, "body": "Yes, always passing the correct params to the query. For example, this query is well defined after passed params to it: select sc.* from tbl030_shots_chart sc, tbl006_player_team pt, tbl007_game g, tbl004_jornada j, tbl012_competition c where pt.id = 67 and pt.id_player_feb = sc.id_fiba and sc.id_game = g.id and g.id_jornada = j.id and j.id_competition = c.id and c.id = 3 This query returns rows in mysql but returns nothing with my code :("}, {"owner": {"reputation": 2120, "user_id": 676490, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/1630c60605bbea32c9508e6e20a0354a?s=128&d=identicon&r=PG", "display_name": "Jos&#233; Carlos", "link": "https://stackoverflow.com/users/676490/jos%c3%a9-carlos"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1553123906, "post_id": 55270877, "comment_id": 97274242, "body": "Is possible that the destructor is not called at the end of the for loop and don&#39;t close the connection?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1553124028, "post_id": 55270877, "comment_id": 97274272, "body": "<code>with</code> is supposed to do that. But even if it didn&#39;t, that shouldn&#39;t affect a different connection and cursor."}, {"owner": {"reputation": 2120, "user_id": 676490, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/1630c60605bbea32c9508e6e20a0354a?s=128&d=identicon&r=PG", "display_name": "Jos&#233; Carlos", "link": "https://stackoverflow.com/users/676490/jos%c3%a9-carlos"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1553124471, "post_id": 55270877, "comment_id": 97274407, "body": "I have checked if I close the connection before to open another one and I close the connection before to close it :( I don&#39;t know what happen :("}, {"owner": {"reputation": 2120, "user_id": 676490, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/1630c60605bbea32c9508e6e20a0354a?s=128&d=identicon&r=PG", "display_name": "Jos&#233; Carlos", "link": "https://stackoverflow.com/users/676490/jos%c3%a9-carlos"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1553125070, "post_id": 55270877, "comment_id": 97274580, "body": "@Barmar, I have added more information to my original post"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1553125194, "post_id": 55270877, "comment_id": 97274618, "body": "You&#39;ve really complicated things by creating your own DAL, and it&#39;s really hard for us to debug a module that we can&#39;t see and try ourselves."}, {"owner": {"reputation": 2120, "user_id": 676490, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/1630c60605bbea32c9508e6e20a0354a?s=128&d=identicon&r=PG", "display_name": "Jos&#233; Carlos", "link": "https://stackoverflow.com/users/676490/jos%c3%a9-carlos"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1553125501, "post_id": 55270877, "comment_id": 97274697, "body": "OK. Thanks for your appreciated help @Barmar. I&#39;m going to put all the code in a function to simplify the search of the mistake."}, {"owner": {"reputation": 2120, "user_id": 676490, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/1630c60605bbea32c9508e6e20a0354a?s=128&d=identicon&r=PG", "display_name": "Jos&#233; Carlos", "link": "https://stackoverflow.com/users/676490/jos%c3%a9-carlos"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1553131663, "post_id": 55270877, "comment_id": 97276072, "body": "Hi @Barmar!!! Sorry If I&#39;m disturbing you with my problem. But I have updated my original post and simplified and I&#39;m still getting the same error. :("}, {"owner": {"user_type": "does_not_exist", "display_name": "user10677470"}, "edited": false, "score": 0, "creation_date": 1553131937, "post_id": 55270877, "comment_id": 97276133, "body": "Step Debuggers exist for a reason!"}], "owner": {"reputation": 2120, "user_id": 676490, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/1630c60605bbea32c9508e6e20a0354a?s=128&d=identicon&r=PG", "display_name": "Jos&#233; Carlos", "link": "https://stackoverflow.com/users/676490/jos%c3%a9-carlos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 109, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1553132562, "creation_date": 1553119676, "last_edit_date": 1553132562, "question_id": 55270877, "link": "https://stackoverflow.com/questions/55270877/mysql-doesnt-return-any-row-from-second-query-onwards", "title": "MySQL doesn&#39;t return any row from second query onwards", "body": "<p>I've got an object which interacts with MySQL where the first time that I use, works fine and give me all the data from a query, but when I try to re-use I've got zero rows when the query is well done and returns data in mysql. I'm using MySQL 8.0</p>\n\n<p>This is the code:</p>\n\n<pre><code>tcm = FIBAColourMap()\nfor p in players:\n    args = [p[\"id\"], id_competition]\n    print(\"id player: {}\".format(p[\"id\"]))\n    search = SearchDataFIBA(args, \"player.shots.by.competition=\")\n    if search.get_result().getTotalRows() &gt; 0:\n        shots = search.get_result().getData()\n        for s in shots:\n            x = float(FIBASCReport.adjust_x(s[\"x\"]))\n            y = float(FIBASCReport.adjust_y(s[\"y\"]))\n            print(\"x: {} - y: {}\".format(x, y))\n            color = tcm.image.getpixel((x,y))\n            color = (\"#%02x%02x%02x\" % color).upper()\n            if tcm.exists_color(color):\n                if int(s[\"m\"]) == 0:\n                    tcm.set_scored_shots(color, 1)\n                else:\n                    tcm.set_failed_shots(color, 1)\n            else:\n                if int(s[\"m\"]) == 0:\n                    tcm.set_scored_shots(\"OTROS\", 1)\n                else:\n                    tcm.set_failed_shots(\"OTROS\", 1)\n    else:\n        print(\"Jugadora con id: {} NO ha realizado ning\u00fan tiro en competicion: {}\".format(p[\"id\"], id_competition))\nreturn tcm\n</code></pre>\n\n<p>Here, I've got a search object called SearchDataFIBA which works fine the first time. But when it executes a second time, because are inside a for loop, this object doesn't return anything and I don't know why :(</p>\n\n<p>This object, internally calls this method to execute the query:</p>\n\n<pre><code>def query(self, sql, data):\n    \"\"\"Returns a ResultData object\"\"\"\n    # try:\n    with self.connection.cursor() as cursor:\n        totalRows = cursor.execute(sql, data)\n        print(\"Total Rows: \" + str(totalRows))\n        print(\"Ultima query: \" + cursor.mogrify(sql, data))\n        data = cursor.fetchall()\n        if totalRows &gt; 0:\n            result = ResultData(RESULT.RESULT_OK, data, totalRows)\n        else:\n            result = ResultData(RESULT.RESULT_OK, None, totalRows)\n        return result\n</code></pre>\n\n<p>The first excution of this code print the query executed and the total rows returned. Always return a query well defined which works in mysql but from second time execution this querys doesn't return any row when it have to returns rows.</p>\n\n<p>What am I doing wrong?</p>\n\n<p><strong>Edit I:</strong></p>\n\n<p><em>ResultData object</em></p>\n\n<pre><code>class ResultData(object):\n    \"\"\"Objeto que contendr\u00e1 el resultado de una consulta\"\"\"\n    def __init__(self, result, data, totalRows):\n        self.setResult(result)\n        self.setTotalRows(totalRows)\n        self.setData(data)\n\n\n    \"\"\"Setters &amp; Getters\"\"\"\n    def setResult(self, result):\n        self.result = result\n\n    def getResult(self):\n        return self.result\n\n    def setTotalRows(self, tr):\n        if tr != None:\n            self.totalRows = int(tr)\n        else:\n            self.totalRows = None\n\n    def getTotalRows(self):\n        return self.totalRows\n\n    def setData(self, data):\n        \"\"\"Diccionario que contiene los datos devueltos desde la BBDD\"\"\"\n        if self.getTotalRows() != None and data != None:\n            self.data = data.copy()\n        else:\n            self.data = None\n\n    def getData(self):\n        return self.data\n</code></pre>\n\n<p><strong>Edit II:</strong></p>\n\n<p>I have found something weird. First time I'm inside the for loop I call SearchDataFIBA object and I open the connection and make the query. This query returns correctly the data, so return to the beginnig of the for loop, but I don't close the connection (don't write a message writed for the destructor function). I make another query well defined with correct values, like this, for example:</p>\n\n<p>select sc.* from tbl030_shots_chart sc, tbl006_player_team pt, tbl007_game g, tbl004_jornada j, tbl012_competition c where pt.id = 67 and pt.id_player_feb = sc.id_fiba and sc.id_game = g.id and g.id_jornada = j.id and j.id_competition = c.id and c.id = 3</p>\n\n<p>Here is the return of this query in mysql:</p>\n\n<p><a href=\"https://i.stack.imgur.com/JLqLR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JLqLR.png\" alt=\"enter image description here\"></a></p>\n\n<p>But this query in my code doesn't return anything and at the end of the for loop, before to return, it's called the destructor and closed my connection:</p>\n\n<p><a href=\"https://i.stack.imgur.com/fzWGK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fzWGK.png\" alt=\"enter image description here\"></a></p>\n\n<p>Then, I start from the beginning of the for loop again and go on. </p>\n\n<p><strong>Edit III:</strong></p>\n\n<p>I create the connection with this code:</p>\n\n<pre><code>    self.connection = pymysql.connect(host = DDBB.DDBB_FIBA_HOST,\n                                  user = DDBB.DDBB_FIBA_USER,\n                                  password = DDBB.DDBB_FIBA_PSWD,\n                                  db = DDBB.DDBB_FIBA_NAME,\n                                  charset = DDBB.DDBB_FIBA_CHARSET,\n                                  cursorclass=pymysql.cursors.DictCursor)\n</code></pre>\n\n<p>And the problem is produced in the line <em>totalRows = cursor.execute(sql, data)</em> of this code:</p>\n\n<pre><code>def query(self, sql, data):\n    \"\"\"M\u00e9todo que devuelve un objeto ResultData con el resultado de la consulta\"\"\"\n    # try:\n    with self.connection.cursor() as cursor:\n        print(\"sql: {} - data: {}\".format(sql, data))\n        totalRows = cursor.execute(sql, data)\n        print(\"Total Rows: \" + str(totalRows))\n        print(\"Ultima query: \" + cursor.mogrify(sql, data))\n        data = cursor.fetchall()\n        if totalRows &gt; 0:\n            result = ResultData(RESULT.RESULT_OK, data, totalRows)\n        else:\n            result = ResultData(RESULT.RESULT_OK, None, totalRows)\n        return result\n</code></pre>\n\n<p>When I call this function, always the values of variables sql and data are correct. But when is executed <em>totalRows = cursor.execute(sql, data)</em> the first time returns data but second time and nexts doesn't return anything when sql and data variables are correct. The connection is closed at the end of the for loop.</p>\n\n<p><strong>Edit IV:</strong></p>\n\n<p>I have updated my code, simplify and put together to test it. This code executes the same query but with different parameters n-times. The first time, the execution of the query returns data, th second time and nexts doesn't return any data when if execute the query in mysql returns data.</p>\n\n<p>This is the code:</p>\n\n<pre><code>def get_team_colour_map(self, players, id_competition):\n    tcm = FIBAColourMap()\n    for p in players:\n        args = [p[\"id\"], id_competition]\n        print(\"id player: {}\".format(p[\"id\"]))\n        conn = pymysql.Connect(host = DDBB.DDBB_FIBA_HOST,\n                                      user = DDBB.DDBB_FIBA_USER,\n                                      password = DDBB.DDBB_FIBA_PSWD,\n                                      db = DDBB.DDBB_FIBA_NAME,\n                                      charset = DDBB.DDBB_FIBA_CHARSET,\n                                      cursorclass=pymysql.cursors.DictCursor)\n        with conn.cursor() as cursor:\n            print(\"args: {}\".format(args))\n            cursor.execute(\"select sc.* from tbl030_shots_chart sc, tbl006_player_team pt, tbl007_game g, tbl004_jornada j, tbl012_competition c where pt.id = %s and pt.id_player_feb = sc.id_fiba and sc.id_game = g.id and g.id_jornada = j.id and j.id_competition = c.id and c.id = %s\", args)\n            data = cursor.fetchall()\n            print(\"Total rows: {}\".format(cursor.rowcount))\n            if cursor.rowcount &gt; 0:\n                for s in data:\n                    x = float(FIBASCReport.adjust_x(s[\"x\"]))\n                    y = float(FIBASCReport.adjust_y(s[\"y\"]))\n                    color = tcm.image.getpixel((x,y))\n                    color = (\"#%02x%02x%02x\" % color).upper()\n                    if tcm.exists_color(color):\n                        if int(s[\"m\"]) == 0:\n                            tcm.set_scored_shots(color, 1)\n                        else:\n                            tcm.set_failed_shots(color, 1)\n                    else:\n                        if int(s[\"m\"]) == 0:\n                            tcm.set_scored_shots(\"OTROS\", 1)\n                        else:\n                            tcm.set_failed_shots(\"OTROS\", 1)\n            else:\n                #tcm = None\n                print(\"Jugadora con id: {} NO ha realizado ning\u00fan tiro en competici\u00f3n: {}\".format(p[\"id\"], id_competition))\n    return tcm\n</code></pre>\n\n<p>Inside the for loop we print the id player and the arguments that I pass to the query with the instrucctions </p>\n\n<pre><code>print(\"id player: {}\".format(p[\"id\"]))\nprint(\"args: {}\".format(args))\n</code></pre>\n\n<p>This code, the first time returns me:</p>\n\n<p><a href=\"https://i.stack.imgur.com/g2uNc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/g2uNc.png\" alt=\"enter image description here\"></a></p>\n\n<p>And the query returns me data. You can check it because Total Rows returns a number > 0.</p>\n\n<p>The second time the for loop is executed. The values are:</p>\n\n<p><a href=\"https://i.stack.imgur.com/t8zA2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/t8zA2.png\" alt=\"enter image description here\"></a></p>\n\n<p>How you can see, the code returns 0 rows, but If I execute the query in mysql, I've got data:</p>\n\n<p><a href=\"https://i.stack.imgur.com/UTCg0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UTCg0.png\" alt=\"enter image description here\"></a></p>\n\n<p>So, what are happen to don't get data the second time that I make a query. Why I don't get rows from my query? Why cursor.fetchall() returns empty data?</p>\n\n<p>Here you can see how returns empty data and the query is correctly defined.</p>\n\n<p><a href=\"https://i.stack.imgur.com/jxrv3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jxrv3.png\" alt=\"enter image description here\"></a></p>\n\n<p>I don't understand anything :( </p>\n"}, {"tags": ["python", "html", "python-requests", "radio-button", "robobrowser"], "comments": [{"owner": {"reputation": 3907, "user_id": 8306666, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/2f20237f2695cc2f6951fb562493cd7f?s=128&d=identicon&r=PG&f=1", "display_name": "Nazim Kerimbekov", "link": "https://stackoverflow.com/users/8306666/nazim-kerimbekov"}, "edited": false, "score": 0, "creation_date": 1553126989, "post_id": 55270852, "comment_id": 97275087, "body": "So is it a problem with the decoding or the <a href=\"http://docs.python-requests.org/en/master/\" rel=\"nofollow noreferrer\">requests library</a>?"}, {"owner": {"reputation": 1885, "user_id": 5319738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f84315d92eb583e0744ab6990ca65b?s=128&d=identicon&r=PG&f=1", "display_name": "Kamal", "link": "https://stackoverflow.com/users/5319738/kamal"}, "edited": false, "score": 0, "creation_date": 1553244165, "post_id": 55270852, "comment_id": 97319804, "body": "I guess you found the XHR request from browser tools, there you can also see the response of the request received by the browser. You can check and confirm if this is the output you should expect from this request or not. If the response is not matching, then it is possible that you missed some important header/payload data."}], "owner": {"reputation": 35, "user_id": 9269936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff939fe1b2c5f9286dcf41ea356d094c?s=128&d=identicon&r=PG&f=1", "display_name": "ap3x", "link": "https://stackoverflow.com/users/9269936/ap3x"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 200, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1553241664, "creation_date": 1553119500, "last_edit_date": 1553241664, "question_id": 55270852, "link": "https://stackoverflow.com/questions/55270852/handle-radiobuttons-with-requests", "title": "Handle radiobuttons with requests", "body": "<p>I want to trigger radio button with python-requests.</p>\n\n<p>Currently I am looking what is happening when radio button is manually selected:</p>\n\n<p>XHR to: <a href=\"http://exmp-url/admin-ajax.php\" rel=\"nofollow noreferrer\">http://exmp-url/admin-ajax.php</a></p>\n\n<p>HEADERS:</p>\n\n<pre><code>'Accept': '*/*',\n'Accept-Encoding': 'gzip, deflate',\n'Accept-Language': 'pl-PL,pl;q=0.9,en-US;q=0.8,en;q=0.7,de;q=0.6',\n'Connection': 'keep-alive',\n'Content-Length': '110',\n'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8',\n'X-Requested-With': 'XMLHttpRequest'\n</code></pre>\n\n<p>Payload:</p>\n\n<pre><code>'operacja': 'ShowRezerwacjeTable',\n'action': 'ShowRezerwacjeTable',\n'data': '2019-03-19',\n'obiekt_typ': 'badminton',\n'godz_od': '',\n'godz_do': ''\n</code></pre>\n\n<p>I am trying to mimic and send data with the same payload and headers:</p>\n\n<pre><code>with Session() as c:\n    c.post(login_page, data=payload)\n    # Getting page content after logging in.\n    response = c.get(reservation_page)\n\n    content = response.content\n    c.headers.update(headers)\n    resp = c.post('http://http://exmp-url/admin-ajax.php', data=payload2)\n    # Getting new content that should have altered HTML after radio button is checked.\n    new_content = codecs.decode(resp.content, encoding=\"utf-8-sig\")\n</code></pre>\n\n<p>The response's status code is 200 while content is b'\\xef\\xbb\\xbf' and after decoding it's empty.</p>\n\n<p>What am I doing wrong? Maybe I should switch approach and instead try to click on the button itself. I would prefer not to use selenium. Is robobrowser perferred here without the visible form element?</p>\n\n<p>Checked radio button's HTML:</p>\n\n<pre><code>&lt;input type=\"radio\" id=\"rez_obiekt_typ_t\" name=\"obiekt_typ\" data-obiekt_typ=\"tenis\" checked=\"\" value=\"tenis\" class=\"ui-helper-hidden-accessible\"&gt;\n</code></pre>\n"}, {"tags": ["python", "selenium", "beautifulsoup"], "comments": [{"owner": {"reputation": 652, "user_id": 1317713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cd0dbe57ed107fdf0b871ecbb22759e?s=128&d=identicon&r=PG", "display_name": "Leonid", "link": "https://stackoverflow.com/users/1317713/leonid"}, "edited": false, "score": 0, "creation_date": 1553119630, "post_id": 55270849, "comment_id": 97272941, "body": "You need to provide a sample html file or at least a relevant subset of it that is still valid HTML."}], "answers": [{"comments": [{"owner": {"reputation": 121, "user_id": 11041433, "user_type": "registered", "profile_image": "https://graph.facebook.com/443579399513462/picture?type=large", "display_name": "Muhammad Faisal", "link": "https://stackoverflow.com/users/11041433/muhammad-faisal"}, "edited": false, "score": 0, "creation_date": 1553120543, "post_id": 55270895, "comment_id": 97273246, "body": "this does not work,  class name is s-result-item so how it is going to find it"}, {"owner": {"reputation": 26505, "user_id": 10885684, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66b93ef11f20d07cf796af83ae1ffe83?s=128&d=identicon&r=PG&f=1", "display_name": "KunduK", "link": "https://stackoverflow.com/users/10885684/kunduk"}, "reply_to_user": {"reputation": 121, "user_id": 11041433, "user_type": "registered", "profile_image": "https://graph.facebook.com/443579399513462/picture?type=large", "display_name": "Muhammad Faisal", "link": "https://stackoverflow.com/users/11041433/muhammad-faisal"}, "edited": false, "score": 0, "creation_date": 1553120651, "post_id": 55270895, "comment_id": 97273286, "body": "@MuhammadFaisal : you have mentioned in your post you have two class such as <code>s-result-item celwidget</code> and   <code>s-result-item aok-hidden</code> right. And you want  to get <code>s-result-item celwidget</code> this class right."}, {"owner": {"reputation": 26505, "user_id": 10885684, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66b93ef11f20d07cf796af83ae1ffe83?s=128&d=identicon&r=PG&f=1", "display_name": "KunduK", "link": "https://stackoverflow.com/users/10885684/kunduk"}, "reply_to_user": {"reputation": 121, "user_id": 11041433, "user_type": "registered", "profile_image": "https://graph.facebook.com/443579399513462/picture?type=large", "display_name": "Muhammad Faisal", "link": "https://stackoverflow.com/users/11041433/muhammad-faisal"}, "edited": false, "score": 0, "creation_date": 1553120994, "post_id": 55270895, "comment_id": 97273383, "body": "@MuhammadFaisal : see the second answer"}], "tags": [], "owner": {"reputation": 26505, "user_id": 10885684, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66b93ef11f20d07cf796af83ae1ffe83?s=128&d=identicon&r=PG&f=1", "display_name": "KunduK", "link": "https://stackoverflow.com/users/10885684/kunduk"}, "is_accepted": true, "score": 0, "last_activity_date": 1553121303, "last_edit_date": 1553121303, "creation_date": 1553119780, "answer_id": 55270895, "question_id": 55270849, "link": "https://stackoverflow.com/questions/55270849/how-do-i-scrape-class-with-specific-name/55270895#55270895", "title": "how do i scrape class with specific name", "body": "<p>Using re module you can find.</p>\n\n<pre><code>import re\nall_posts = soup.findAll(class_=re.compile(\"celwidget\"))\n</code></pre>\n\n<p>For example:</p>\n\n<pre><code>from bs4 import BeautifulSoup\nimport re\ndata='''&lt;html&gt;\n&lt;div class=\"s-result-item celwidget\"&gt;Text1&lt;/div&gt;\n&lt;div class=\"s-result-item aok-hidden\"&gt;Text2&lt;/div&gt;\n&lt;/html&gt;'''\nsoup=BeautifulSoup(data,\"html.parser\")\nall_posts = soup.findAll(class_=re.compile('celwidget'))\nfor post in all_posts:\n  print(post.text)\n</code></pre>\n\n<p><strong>Option 2</strong>:</p>\n\n<pre><code>from bs4 import BeautifulSoup\ndata='''&lt;html&gt;\n&lt;div class=\"s-result-item celwidget\"&gt;Text1&lt;/div&gt;\n&lt;div class=\"s-result-item aok-hidden\"&gt;Text2&lt;/div&gt;\n&lt;/html&gt;'''\nsoup=BeautifulSoup(data,\"html.parser\")\nall_posts = soup.find_all(class_=\"s-result-item\")\nprint(all_posts[0].text)\n</code></pre>\n\n<p><strong>option 3:</strong> Use select_one</p>\n\n<pre><code>from bs4 import BeautifulSoup\ndata='''&lt;html&gt;\n&lt;div class=\"s-result-item celwidget\"&gt;Text1&lt;/div&gt;\n&lt;div class=\"s-result-item aok-hidden\"&gt;Text2&lt;/div&gt;\n&lt;/html&gt;'''\nsoup=BeautifulSoup(data,\"html.parser\")\nall_posts = soup.select_one('.s-result-item.celwidget')\nprint(all_posts.text)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 71123, "user_id": 6241235, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/dCxzx.png?s=128&g=1", "display_name": "QHarr", "link": "https://stackoverflow.com/users/6241235/qharr"}, "edited": false, "score": 0, "creation_date": 1553328719, "post_id": 55280031, "comment_id": 97350836, "body": "Did you try this? It should be faster"}], "tags": [], "owner": {"reputation": 71123, "user_id": 6241235, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/dCxzx.png?s=128&g=1", "display_name": "QHarr", "link": "https://stackoverflow.com/users/6241235/qharr"}, "is_accepted": false, "score": 0, "last_activity_date": 1553169866, "creation_date": 1553169866, "answer_id": 55280031, "question_id": 55270849, "link": "https://stackoverflow.com/questions/55270849/how-do-i-scrape-class-with-specific-name/55280031#55280031", "title": "how do i scrape class with specific name", "body": "<p>You want to match multiple cases of that compound class. If using css selectors you need to use <code>select</code>, not <code>select_one</code>, as <code>select_one</code> will only return first match</p>\n\n<pre><code>soup=BeautifulSoup(data,\"lxml\")\nall_posts = soup.select('.s-result-item.celwidget')\n</code></pre>\n\n<p>Note that compound classes are joined by \".\"</p>\n"}], "owner": {"reputation": 121, "user_id": 11041433, "user_type": "registered", "profile_image": "https://graph.facebook.com/443579399513462/picture?type=large", "display_name": "Muhammad Faisal", "link": "https://stackoverflow.com/users/11041433/muhammad-faisal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 55270895, "answer_count": 2, "score": 0, "last_activity_date": 1553169866, "creation_date": 1553119480, "last_edit_date": 1553119636, "question_id": 55270849, "link": "https://stackoverflow.com/questions/55270849/how-do-i-scrape-class-with-specific-name", "title": "how do i scrape class with specific name", "body": "<p>I am trying to scrape all classes with name</p>\n\n<pre><code>all_posts = soup.findAll(class_='s-result-item celwidget')\n</code></pre>\n\n<p>but the problem is it come out as null.</p>\n\n<p>And if i remove celwidget and try this</p>\n\n<pre><code>all_posts = soup.findAll(class_='s-result-item')\n</code></pre>\n\n<p>it comes with a result but then it includes both classes</p>\n\n<pre><code>s-result-item celwidget\n\ns-result-item aok-hidden\n</code></pre>\n\n<p>i only need <code>s-result-item celwidget</code> data</p>\n\n<p>please someone help</p>\n"}, {"tags": ["python", "python-3.x", "numpy", "tensorflow", "neural-network"], "comments": [{"owner": {"reputation": 886, "user_id": 7059474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d70ffbd01743fa7d1e43f373034049e?s=128&d=identicon&r=PG&f=1", "display_name": "tomkot", "link": "https://stackoverflow.com/users/7059474/tomkot"}, "edited": false, "score": 0, "creation_date": 1553155512, "post_id": 55270826, "comment_id": 97282144, "body": "In your next_batch function, should <code>Y.append(label)</code> be  <code>Y.append(label[i])</code>?"}, {"owner": {"reputation": 29, "user_id": 6273578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41f01ee019ab507176173042d06e116c?s=128&d=identicon&r=PG&f=1", "display_name": "FreddyGump", "link": "https://stackoverflow.com/users/6273578/freddygump"}, "reply_to_user": {"reputation": 886, "user_id": 7059474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d70ffbd01743fa7d1e43f373034049e?s=128&d=identicon&r=PG&f=1", "display_name": "tomkot", "link": "https://stackoverflow.com/users/7059474/tomkot"}, "edited": false, "score": 0, "creation_date": 1553162401, "post_id": 55270826, "comment_id": 97285567, "body": "hi @tomkot, currently I&#39;m only training with this 1 label so that&#39;s why I&#39;m passing in the vector of that label. I checked how it&#39;s done in MNIST and it seems to be in the same manner."}, {"owner": {"reputation": 886, "user_id": 7059474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d70ffbd01743fa7d1e43f373034049e?s=128&d=identicon&r=PG&f=1", "display_name": "tomkot", "link": "https://stackoverflow.com/users/7059474/tomkot"}, "edited": false, "score": 0, "creation_date": 1553162835, "post_id": 55270826, "comment_id": 97285810, "body": "ah, ok, I misunderstood"}], "owner": {"reputation": 29, "user_id": 6273578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41f01ee019ab507176173042d06e116c?s=128&d=identicon&r=PG&f=1", "display_name": "FreddyGump", "link": "https://stackoverflow.com/users/6273578/freddygump"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 165, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1553119352, "creation_date": 1553119352, "question_id": 55270826, "link": "https://stackoverflow.com/questions/55270826/valueerror-setting-an-array-element-with-a-sequence-tensorflow-and-numpy", "title": "ValueError: setting an array element with a sequence Tensorflow and numpy", "body": "<p>Trying to run this code, which is a function I wrote myself:</p>\n\n<pre><code>def next_batch(batch_size):\nlabel = [0, 1, 0, 0, 0]\nX = []\nY = []\nfor i in range(0, batch_size):\n    rand = random.choice(os.listdir(mnist))\n    rand = mnist + rand\n    img = cv2.imread(str(rand), 0)\n    img = np.array(img)\n    img = img.ravel()\n    X.append(img)\n    Y.append(label)\nX = np.array(X)\nY = np.array(Y)\nreturn X, Y\n</code></pre>\n\n<p>Then I want to use the X and Y array for training purpose of my network. \nI run it with this code: (Mainly the bottom part of <em>def train(train_model) is where it all goes down</em></p>\n\n<pre><code>def train(train_model=True):\n\"\"\"\nUsed to train the autoencoder by passing in the necessary inputs.\n:param train_model: True -&gt; Train the model, False -&gt; Load the latest trained model and show the image grid.\n:return: does not return anything\n\"\"\"\nwith tf.variable_scope(tf.get_variable_scope()):\n    encoder_output = encoder(x_input)\n    # Concat class label and the encoder output\n    decoder_input = tf.concat([y_input, encoder_output], 1)\n    decoder_output = decoder(decoder_input)\n\nwith tf.variable_scope(tf.get_variable_scope()):\n    d_real = discriminator(real_distribution)\n    d_fake = discriminator(encoder_output, reuse=True)\n\nwith tf.variable_scope(tf.get_variable_scope()):\n    decoder_image = decoder(manual_decoder_input, reuse=True)\n\n# Autoencoder loss\nautoencoder_loss = tf.reduce_mean(tf.square(x_target - decoder_output))\n\n# Discriminator Loss\ndc_loss_real = tf.reduce_mean(tf.nn.sigmoid_cross_entropy_with_logits(labels=tf.ones_like(d_real), logits=d_real))\ndc_loss_fake = tf.reduce_mean(tf.nn.sigmoid_cross_entropy_with_logits(labels=tf.zeros_like(d_fake), logits=d_fake))\ndc_loss = dc_loss_fake + dc_loss_real\n\n# Generator loss\ngenerator_loss = tf.reduce_mean(\n    tf.nn.sigmoid_cross_entropy_with_logits(labels=tf.ones_like(d_fake), logits=d_fake))\n\nall_variables = tf.trainable_variables()\ndc_var = [var for var in all_variables if 'dc_' in var.name]\nen_var = [var for var in all_variables if 'e_' in var.name]\n\n# Optimizers\nautoencoder_optimizer = tf.train.AdamOptimizer(learning_rate=learning_rate,\n                                               beta1=beta1).minimize(autoencoder_loss)\ndiscriminator_optimizer = tf.train.AdamOptimizer(learning_rate=learning_rate,\n                                                 beta1=beta1).minimize(dc_loss, var_list=dc_var)\ngenerator_optimizer = tf.train.AdamOptimizer(learning_rate=learning_rate,\n                                             beta1=beta1).minimize(generator_loss, var_list=en_var)\n\ninit = tf.global_variables_initializer()\n\n# Reshape images to display them\ninput_images = tf.reshape(x_input, [-1, 368, 432, 1])\ngenerated_images = tf.reshape(decoder_output, [-1, 368, 432, 1])\n\n# Tensorboard visualization\ntf.summary.scalar(name='Autoencoder Loss', tensor=autoencoder_loss)\ntf.summary.scalar(name='Discriminator Loss', tensor=dc_loss)\ntf.summary.scalar(name='Generator Loss', tensor=generator_loss)\ntf.summary.histogram(name='Encoder Distribution', values=encoder_output)\ntf.summary.histogram(name='Real Distribution', values=real_distribution)\ntf.summary.image(name='Input Images', tensor=input_images, max_outputs=10)\ntf.summary.image(name='Generated Images', tensor=generated_images, max_outputs=10)\nsummary_op = tf.summary.merge_all()\n\n# Saving the model\nsaver = tf.train.Saver()\nstep = 0\nwith tf.Session() as sess:\n    if train_model:\n        tensorboard_path, saved_model_path, log_path = form_results()\n        sess.run(init)\n        writer = tf.summary.FileWriter(logdir=tensorboard_path, graph=sess.graph)\n        for i in range(n_epochs):\n            # print(n_epochs)\n            n_batches = int(10000 / batch_size)\n            print(\"------------------Epoch {}/{}------------------\".format(i, n_epochs))\n            for b in range(1, n_batches+1):\n                # print(\"In the loop\")\n                z_real_dist = np.random.randn(batch_size, z_dim) * 5.\n                batch_x, batch_y = next_batch(batch_size)\n                # print(\"Created the batches\")\n                sess.run(autoencoder_optimizer, feed_dict={x_input: batch_x, x_target: batch_x, y_input: batch_y})\n                print(\"batch_x\", batch_x)\n                print(\"x_input:\", x_input)\n                print(\"x_target:\", x_target)\n                print(\"y_input:\", y_input)\n                sess.run(discriminator_optimizer,\n                         feed_dict={x_input: batch_x, x_target: batch_x, real_distribution: z_real_dist})\n                sess.run(generator_optimizer, feed_dict={x_input: batch_x, x_target: batch_x})\n                # print(\"setup the session\")\n                if b % 50 == 0:\n                    a_loss, d_loss, g_loss, summary = sess.run(\n                        [autoencoder_loss, dc_loss, generator_loss, summary_op],\n                        feed_dict={x_input: batch_x, x_target: batch_x,\n                                   real_distribution: z_real_dist, y_input: batch_y})\n                    writer.add_summary(summary, global_step=step)\n                    print(\"Epoch: {}, iteration: {}\".format(i, b))\n                    print(\"Autoencoder Loss: {}\".format(a_loss))\n                    print(\"Discriminator Loss: {}\".format(d_loss))\n                    print(\"Generator Loss: {}\".format(g_loss))\n                    with open(log_path + '/log.txt', 'a') as log:\n                        log.write(\"Epoch: {}, iteration: {}\\n\".format(i, b))\n                        log.write(\"Autoencoder Loss: {}\\n\".format(a_loss))\n                        log.write(\"Discriminator Loss: {}\\n\".format(d_loss))\n                        log.write(\"Generator Loss: {}\\n\".format(g_loss))\n                step += 1\n\n            saver.save(sess, save_path=saved_model_path, global_step=step)\n    else:\n        # Get the latest results folder\n        all_results = os.listdir(results_path)\n        all_results.sort()\n        saver.restore(sess, save_path=tf.train.latest_checkpoint(results_path + '/' +\n                                                                 all_results[-1] + '/Saved_models/'))\n        generate_image_grid(sess, op=decoder_image)\n\n\nif __name__ == '__main__':\n    parser = argparse.ArgumentParser(description=\"Autoencoder Train Parameter\")\n    parser.add_argument('--train', '-t', type=bool, default=True,\n                        help='Set to True to train a new model, False to load weights and display image grid')\n    args = parser.parse_args()\n    train(train_model=args.train)\n</code></pre>\n\n<p>Getting this error message:</p>\n\n<blockquote>\n  <p>Traceback (most recent call last):\n    File \"/Users/frederikcalsius/Desktop/adv/supervised_adversarial_autoencoder.py\", line 290, in \n      train(train_model=args.train)\n    File \"/Users/frederikcalsius/Desktop/adv/supervised_adversarial_autoencoder.py\", line 249, in train\n      sess.run(autoencoder_optimizer, feed_dict={x_input: batch_x, x_target: batch_x, y_input: batch_y})\n    File \"/Users/frederikcalsius/Library/Python/3.7/lib/python/site-packages/tensorflow/python/client/session.py\", line 929, in run\n      run_metadata_ptr)\n    File \"/Users/frederikcalsius/Library/Python/3.7/lib/python/site-packages/tensorflow/python/client/session.py\", line 1121, in _run\n      np_val = np.asarray(subfeed_val, dtype=subfeed_dtype)\n    File \"/Users/frederikcalsius/Library/Python/3.7/lib/python/site-packages/numpy/core/numeric.py\", line 538, in asarray\n      return array(a, dtype, copy=False, order=order)</p>\n  \n  <p>ValueError: setting an array element with a sequence.</p>\n  \n  <p>Process finished with exit code 1</p>\n</blockquote>\n\n<p>I really don't get this error. Can somebody help me out with this?</p>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1553119432, "post_id": 55270824, "comment_id": 97272866, "body": "Use either a dictionary instead of plain variables (if this is a template system) or use a function instead of a string."}], "answers": [{"comments": [{"owner": {"reputation": 12014, "user_id": 1658617, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/ba6gt.jpg?s=128&g=1", "display_name": "Bharel", "link": "https://stackoverflow.com/users/1658617/bharel"}, "edited": false, "score": 1, "creation_date": 1553119614, "post_id": 55270856, "comment_id": 97272930, "body": "I believe a dictionary is the better and less hacky way but this will work equally well :-)"}, {"owner": {"reputation": 192865, "user_id": 989121, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/1Cvf7.png?s=128&g=1", "display_name": "georg", "link": "https://stackoverflow.com/users/989121/georg"}, "reply_to_user": {"reputation": 12014, "user_id": 1658617, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/ba6gt.jpg?s=128&g=1", "display_name": "Bharel", "link": "https://stackoverflow.com/users/1658617/bharel"}, "edited": false, "score": 1, "creation_date": 1553119698, "post_id": 55270856, "comment_id": 97272965, "body": "@Bharel: sure, added a note about that."}, {"owner": {"reputation": 149, "user_id": 7020129, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/23e6fc565d79438e5df7df9dc1aeef1a?s=128&d=identicon&r=PG&f=1", "display_name": "tmn103", "link": "https://stackoverflow.com/users/7020129/tmn103"}, "edited": false, "score": 0, "creation_date": 1553120128, "post_id": 55270856, "comment_id": 97273114, "body": "This works to print the appropriate sentence outside of the function, but I can&#39;t set the value (new_text) within (var1 is set outside of the function so locals() isn&#39;t appropriate)"}, {"owner": {"reputation": 192865, "user_id": 989121, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/1Cvf7.png?s=128&g=1", "display_name": "georg", "link": "https://stackoverflow.com/users/989121/georg"}, "edited": false, "score": 0, "creation_date": 1553120438, "post_id": 55270856, "comment_id": 97273218, "body": "That&#39;s why you should use a dict for this, not variables. Of course, there&#39;s always <code>eval</code>, but I hope this is out of consideration."}, {"owner": {"reputation": 149, "user_id": 7020129, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/23e6fc565d79438e5df7df9dc1aeef1a?s=128&d=identicon&r=PG&f=1", "display_name": "tmn103", "link": "https://stackoverflow.com/users/7020129/tmn103"}, "edited": false, "score": 0, "creation_date": 1553120790, "post_id": 55270856, "comment_id": 97273327, "body": "How would I use a dict for it? If it makes any difference the variables are from a Class in reality (I&#39;ve edited the question to show this)"}, {"owner": {"reputation": 149, "user_id": 7020129, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/23e6fc565d79438e5df7df9dc1aeef1a?s=128&d=identicon&r=PG&f=1", "display_name": "tmn103", "link": "https://stackoverflow.com/users/7020129/tmn103"}, "edited": false, "score": 0, "creation_date": 1553121596, "post_id": 55270856, "comment_id": 97273568, "body": "@georg: that made it easier!"}], "tags": [], "owner": {"reputation": 192865, "user_id": 989121, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/1Cvf7.png?s=128&g=1", "display_name": "georg", "link": "https://stackoverflow.com/users/989121/georg"}, "is_accepted": true, "score": 2, "last_activity_date": 1553120831, "last_edit_date": 1553120831, "creation_date": 1553119547, "answer_id": 55270856, "question_id": 55270824, "link": "https://stackoverflow.com/questions/55270824/finding-the-name-of-a-variable-in-a-string-and-then-replacing-the-variable-name/55270856#55270856", "title": "Finding the name of a variable in a string and then replacing the variable name with the variable value", "body": "<p>This stuff is built-in in python:</p>\n\n<pre><code>var1 = \"testentry1\"\nprint(\"this is the text to change {var1}\".format(**locals()))\n</code></pre>\n\n<p>Note that it's usually better to use a dictionary to carry the context, rather than bare variables.</p>\n\n<p>In case your strings are static (that is, you use them in the context where all variables are known beforehand), you can simply prepend a string with <code>f</code> (python 3.6+):</p>\n\n<pre><code>var1 = \"testentry1\"\nprint(f\"this is the text to change {var1}\")\n</code></pre>\n\n<p>If you really feel like reinventing wheels though, you can do the same with re's too:</p>\n\n<pre><code>def my_format(s, vars):\n    return re.sub(r'{(\\w+)}', lambda m: vars[m.group(1)], s)\n\n\nprint(my_format(\"this is the text to change {var1}\", locals()))\n</code></pre>\n\n<p>\"Automagic\" replacement out-of-context (nonlocal) variables is also possible, but in a very hacky way:</p>\n\n<pre><code># do NOT do that!\n\nimport re\nimport sys\n\nvar1 = \"testentry1\"\n\n\ndef my_format2(s):\n    return re.sub(r'{(\\w+)}', lambda m: eval(m.group(1)), s)\n\n\ndef get_var(name):\n    f = sys._getframe()\n    while f:\n        if name in f.f_locals:\n            return f.f_locals[name]\n        f = f.f_back\n\n\ndef my_format3(s):\n    return re.sub(r'{(\\w+)}', lambda m: get_var(m.group(1)), s)\n\n\nprint(my_format2(\"this is the text to change {var1}\"))\nprint(my_format3(\"this is the text to change {var1}\"))\n</code></pre>\n\n<p>In response to your update, it's easy to use <code>format</code> with the class dict:</p>\n\n<pre><code>class TestClass:\n    def __init__(self):\n        self.var1 = \"testentry1\"\n        self.var2 = \"testentry2\"\n\n    def convert_text(self, original_text):\n        return original_text.format(**vars(self))\n\n\nTC = TestClass()\n\nprint(TC.convert_text(\"this is the text to change {var1}\"))\nprint(TC.convert_text(\"this is the text to change {var2}\"))\n</code></pre>\n"}], "owner": {"reputation": 149, "user_id": 7020129, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/23e6fc565d79438e5df7df9dc1aeef1a?s=128&d=identicon&r=PG&f=1", "display_name": "tmn103", "link": "https://stackoverflow.com/users/7020129/tmn103"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 55270856, "answer_count": 1, "score": 0, "last_activity_date": 1553120831, "creation_date": 1553119323, "last_edit_date": 1553120824, "question_id": 55270824, "link": "https://stackoverflow.com/questions/55270824/finding-the-name-of-a-variable-in-a-string-and-then-replacing-the-variable-name", "title": "Finding the name of a variable in a string and then replacing the variable name with the variable value", "body": "<p>I'm trying to find a reference to a variable in a string (here: variable is var1)</p>\n\n<p>I want to find <code>{var1}</code> in the sentence and replace it with the value for var1 (\"testentry1\")</p>\n\n<p>Referring to var1 allows the desired string to be set</p>\n\n<p>However, I can't do the same thing when referring to var_name</p>\n\n<p>I will have a number of variable names <em>(e.g. <code>{var1}</code>, <code>{var2}</code>)</em> which will be in sentences and I'd like a way of substituting the appropriate word into the string.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>class TestClass:\n    def __init__(self):\n        self.var1 = \"testentry1\"\n        self.var2 = \"testentry2\"\n\n\n    def convert_text(self, original_text):\n        #find the variable name of interest (here: {var1})\n        found_text = re.findall('\\{([^{}]*)\\}', original_text)\n        var_name = found_text[0]\n        #replace {var1} with the value for var1\n        search_str = \"{\"+var_name+\"}\"\n        new_text = original_text.replace(search_str, self.var_name)\n        new_text2 = original_text.replace(search_str, self.var1)\n\n        print(\"output1 is (not desired result):\", new_text)\n        print(\"output2 is (desired result):\", new_text2)\n        return new_text2\n\nTC = TestClass()\n\n\n\nTC.convert_text(\"this is the text to change {var1}\")\nTC.convert_text(\"this is the text to change {var2}\")\n</code></pre>\n"}, {"tags": ["python", "event-handling", "turtle-graphics"], "answers": [{"tags": [], "owner": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "is_accepted": true, "score": 2, "last_activity_date": 1606883877, "last_edit_date": 1606883877, "creation_date": 1553184216, "answer_id": 55284630, "question_id": 55270812, "link": "https://stackoverflow.com/questions/55270812/problem-with-onkeypress-and-listen-in-python-turtle/55284630#55284630", "title": "Problem with onkeypress() and listen() in Python Turtle", "body": "<p>This is a common beginner's error when setting event handlers:</p>\n<pre><code>window.onkeypress(paletka_1.paddle_a_up(), &quot;w&quot;)\n</code></pre>\n<p>You don't want to <em>call</em> <code>paddle_a_up</code>, you want to <em>pass</em> it on for some other code to call when the event happens:</p>\n<pre><code>window.onkeypress(paletka_1.paddle_a_up, &quot;w&quot;)\n</code></pre>\n<p>Try that to see if it works better for you.  As far as the rest of your code goes, I've some suggestions:</p>\n<pre><code>window.tracer(0)\n</code></pre>\n<p>Avoid <code>tracer()</code> and <code>update()</code> until your program is working otherwise it'll just complicate the development and debug process.  Only add them back if you need them -- if the program works to your satisfaction, leave them out.</p>\n<pre><code>while True:\n    window.update()\n</code></pre>\n<p>This loop really should instead be a call to <code>mainloop()</code> to turn control over to tkinter's event handler:</p>\n<pre><code>window.mainloop()\n</code></pre>\n<p>Having member variables and instance methods with the same name is a bad idea:</p>\n<pre><code>self.ball = turtle.Turtle()\n...\ndef ball(self):\n</code></pre>\n<p>Like the rest of Python, one overwrites the other and bad things happen.  My reworked versions of your code:</p>\n<p>main.py</p>\n<pre><code>from turtle import Screen\nimport elements\n\n# Windows settings\n\nwindow = Screen()\nwindow.title(&quot;Pong game by Kosa&quot;)\nwindow.bgcolor('black')\nwindow.setup(width=800, height=600)\n\npaletka_1 = elements.Objects()\n\nwindow.onkeypress(paletka_1.paddle_a_up, &quot;w&quot;)\n\nwindow.listen()\nwindow.mainloop()\n</code></pre>\n<p>elements.py</p>\n<pre><code>from turtle import Turtle\n\nclass Objects:\n\n    def __init__(self):\n        # Paddle A\n        self.paddle_a = Turtle(&quot;square&quot;)\n        self.init_paddle_a()\n\n        # Paddle B\n        self.paddle_b = Turtle(&quot;square&quot;)\n        self.init_paddle_b()\n\n        # Ball\n        self.ball = Turtle(&quot;square&quot;)\n        self.init_ball()\n\n    def init_paddle_a(self):\n\n        paddle_a_x = -350\n\n        self.paddle_a.speed('fastest')\n        self.paddle_a.shapesize(stretch_wid=5, stretch_len=1)\n        self.paddle_a.color('green')\n        self.paddle_a.penup()\n        self.paddle_a.setx(paddle_a_x)\n\n    def init_paddle_b(self):\n        paddle_b_x = 350\n\n        self.paddle_b.speed('fastest')\n        self.paddle_b.shapesize(stretch_wid=5, stretch_len=1)\n        self.paddle_b.color('red')\n        self.paddle_b.penup()\n        self.paddle_b.setx(paddle_b_x)\n\n    def init_ball(self):\n        self.ball.speed('fastest')\n        self.ball.color('white')\n        self.ball.penup()\n        self.ball.home()\n\n    def paddle_a_up(self):\n        y = self.paddle_a.ycor() + 20\n        self.paddle_a.sety(y)\n\n    def paddle_b_up(self):\n        y = self.paddle_b.ycor() + 20\n        self.paddle_b.sety(y)\n</code></pre>\n<p>This should now put up a window with paddles on the left and right and a ball in the middle.  Click on the window and after you can press &quot;w&quot; to make the left paddle rise up.  Now finish the program!</p>\n<p><a href=\"https://i.stack.imgur.com/mu48x.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mu48x.png\" alt=\"enter image description here\" /></a></p>\n"}], "owner": {"reputation": 25, "user_id": 11234545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d8affbcd0ab88496ffd07fe0a680fed?s=128&d=identicon&r=PG&f=1", "display_name": "Ith", "link": "https://stackoverflow.com/users/11234545/ith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1436, "favorite_count": 0, "accepted_answer_id": 55284630, "answer_count": 1, "score": 1, "last_activity_date": 1607171904, "creation_date": 1553119228, "last_edit_date": 1607171904, "question_id": 55270812, "link": "https://stackoverflow.com/questions/55270812/problem-with-onkeypress-and-listen-in-python-turtle", "title": "Problem with onkeypress() and listen() in Python Turtle", "body": "<p>I have a problem with one function. I use Python 3.7, and when I try to use the <code>onkeypress()</code> function, nothing happens. I try to check it, but the turtle module doesn't react when I press keys.</p>\n<p>I try to move my paddle up using the 'w' key. But it doesn't work.\nBelow are my *.py files:</p>\n<p>main.py</p>\n<pre><code>import elements\nimport turtle\n\n\n#Windows settings\n\nwindow = turtle.Screen()\nwindow.title(&quot;Pong game by Kosa&quot;)\nwindow.bgcolor('black')\nwindow.setup(width=800, height=600)\nwindow.tracer(0)\n\npaletka_1 = elements.Objects()\npaletka_1.paddle_a()\n    \nwindow.onkeypress(paletka_1.paddle_a_up(), &quot;w&quot;)\nwindow.listen()\nwhile True:\n    window.update()\n</code></pre>\n<p>elements.py</p>\n<pre><code>import turtle\n\nclass Objects:\n\n    def __init__(self):\n        #Paddle A\n\n        #self.paddle_b = turtle.Turtle()\n\n\n        # #Paddle B\n\n        #Ball\n        self.ball = turtle.Turtle()\n\n    def paddle_a(self):\n\n        paddle_a_x = -350\n        #paddle_a_y = 0\n        self.paddle_a = turtle.Turtle()\n        self.paddle_a.speed(0)\n        self.paddle_a.shape(&quot;square&quot;)\n        self.paddle_a.shapesize(stretch_wid=5, stretch_len=1)\n        self.paddle_a.color('green')\n        self.paddle_a.penup()\n        self.paddle_a.goto(paddle_a_x, 0)\n\n    def paddle_b(self):\n        paddle_b_x = -350\n        paddle_b_y = 0\n\n        self.paddle_b.speed(0)\n        self.paddle_b.shape(&quot;square&quot;)\n        self.paddle_b.shapesize(stretch_wid=5, stretch_len=1)\n        self.paddle_b.color('green')\n        self.paddle_b.penup()\n        self.paddle_b.goto(paddle_b_x, paddle_b_y)\n\n    def ball(self):\n        self.ball.speed(0)\n        self.ball.shape(&quot;square&quot;)\n        self.ball.color('white')\n        self.ball.penup()\n        self.ball.goto(0, 0)\n\n    def paddle_a_up(self):\n        y = self.paddle_a.ycor()\n        y += 20\n        self.paddle_a.sety(y)\n        print(y)\n\n    def paddle_b_up(self):\n        y = self.paddle_b.ycor()\n        y += 20\n        self.paddle_b.sety(y)\n</code></pre>\n<p>What I get when program starts: I can push keys, but no change in my paddle. Can you find my mistake? I added <code>print(y)</code> in <code>paddle_a_up()</code> just to make sure, that its works. I get the result of <code>print()</code>.</p>\n<p>It's strange, because there is no error.</p>\n<p><img src=\"https://i.stack.imgur.com/IYiGl.png\" alt=\"enter image description here\" /></p>\n"}, {"tags": ["python", "pandas", "dataframe", "indexing", "append"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 1, "creation_date": 1553119315, "post_id": 55270808, "comment_id": 97272826, "body": "&quot;I want to iterate through df[&#39;name&#39;]&quot; no you probably do not. That is thinking in regular Python and not how pandas is intended to be used. You want a mask that gives you the indices"}], "answers": [{"tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 5, "last_activity_date": 1553119354, "creation_date": 1553119354, "answer_id": 55270831, "question_id": 55270808, "link": "https://stackoverflow.com/questions/55270808/get-the-index-of-the-values-matching-a-condition-using-pandas/55270831#55270831", "title": "Get the index of the values matching a condition using pandas", "body": "<ul>\n<li>No iteration needed.</li>\n<li>Use <code>Series.isin</code> for membership checks on Series</li>\n<li>Use the resultant mask to index into <code>df.index</code> and <a href=\"https://stackoverflow.com/a/54324513/4909087\">convert the result to a list.</a></li>\n</ul>\n\n<p></p>\n\n<pre><code>i_list = df.index[df['name'].isin(wrong_names)].tolist()\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 10891590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2115ebd16896f7888130d08b1907d3c?s=128&d=identicon&r=PG&f=1", "display_name": "a2fet", "link": "https://stackoverflow.com/users/10891590/a2fet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1377, "favorite_count": 1, "accepted_answer_id": 55270831, "answer_count": 1, "score": 2, "last_activity_date": 1553119519, "creation_date": 1553119205, "last_edit_date": 1553119519, "question_id": 55270808, "link": "https://stackoverflow.com/questions/55270808/get-the-index-of-the-values-matching-a-condition-using-pandas", "title": "Get the index of the values matching a condition using pandas", "body": "<p>I have a dictionary <code>wrong_names</code>, a pandas series <code>df['name']</code>, and an empty list <code>i_list</code>.</p>\n\n<p>I want to iterate through <code>df['name']</code>, and if the name is in <code>wrong_names.keys()</code>, I want to append the index of that element in <code>df</code> to <code>i_list</code>. Here is what I have so far:</p>\n\n<pre><code>i_list = []\nfor pup in df['name']:\n    if pup in wrong_names.keys():\n    i_list.append(df.index.get_loc(pup))\ni_list\n</code></pre>\n\n<p>I have already looked at .get_loc documentation (is pup the right argument?), as well as these S.O. questions:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/17244049/finding-label-location-in-a-dataframe-index\">Finding label location in a DataFrame Index</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/18327624/find-elements-index-in-pandas-series/18327852\">Find element&#39;s index in pandas Series</a></p>\n\n<p>The code works fine when all I ask it to do is append <code>pup</code> to <code>i_list</code>, by all indications the loop correctly identifies when the <code>pup</code> is also a key in the dictionary, </p>\n\n<pre><code>i_list = []\nfor pup in df['name']:\n    if pup in wrong_names.keys():\n    i_list.append(pup)\ni_list\n</code></pre>\n\n<p>but I can't get a list of the indices, which is what I need for the next step. Thanks in advance.</p>\n"}, {"tags": ["python", "conv-neural-network"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1553119581, "post_id": 55270799, "comment_id": 97272922, "body": "I think every computer program is effectively equivalent to a mathematical formula, although they can be arbitrarily complex, like millions of terms."}, {"owner": {"reputation": 428, "user_id": 11180560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a11d081384346b89f9a85d12993e60c6?s=128&d=identicon&r=PG&f=1", "display_name": "SerAlejo", "link": "https://stackoverflow.com/users/11180560/seralejo"}, "edited": false, "score": 0, "creation_date": 1553119624, "post_id": 55270799, "comment_id": 97272938, "body": "Yes this question fits better into datascience.stackexchange.com. For the calculation you can look at this page: <a href=\"http://cs231n.github.io/convolutional-networks/\" rel=\"nofollow noreferrer\">cs231n.github.io/convolutional-networks</a> it gives a nice visualization over the matrix multiplication that is used in CNNs"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1553119632, "post_id": 55270799, "comment_id": 97272942, "body": "Either <a href=\"https://cs.stackexchange.com\">Computer Science</a> or <a href=\"https://datascience.stackexchange.com\">Data Science</a> would probably be better places."}], "answers": [{"tags": [], "owner": {"reputation": 724, "user_id": 558254, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/80a95b8f45a1ecf04e61017cc1c597ea?s=128&d=identicon&r=PG&f=1", "display_name": "penkovsky", "link": "https://stackoverflow.com/users/558254/penkovsky"}, "is_accepted": false, "score": 0, "last_activity_date": 1553234194, "creation_date": 1553234194, "answer_id": 55293683, "question_id": 55270799, "link": "https://stackoverflow.com/questions/55270799/can-convolutional-neural-networks-cnn-be-represented-by-a-mathematical-formula/55293683#55293683", "title": "Can Convolutional Neural Networks (CNN) be represented by a Mathematical formula?", "body": "<p>If you can sacrifice some memory, you can certainly <a href=\"https://github.com/Yangqing/caffe/wiki/Convolution-in-Caffe:-a-memo\" rel=\"nofollow noreferrer\">convert a convolution into a matrix multiplication</a>.</p>\n\n<blockquote>\n  <p>It turns out to have its own pros (faster than any trivial\n  implementation unless you optimize really seriously) and cons (large\n  memory consumption).</p>\n</blockquote>\n"}], "owner": {"reputation": 487, "user_id": 8079611, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/416023792086916/picture?type=large", "display_name": "Fabio Soares", "link": "https://stackoverflow.com/users/8079611/fabio-soares"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 138, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1553234194, "creation_date": 1553119116, "question_id": 55270799, "link": "https://stackoverflow.com/questions/55270799/can-convolutional-neural-networks-cnn-be-represented-by-a-mathematical-formula", "title": "Can Convolutional Neural Networks (CNN) be represented by a Mathematical formula?", "body": "<p>Please, let me know if this question should be posted in a differnt stack such as the <a href=\"https://datascience.stackexchange.com/\">https://datascience.stackexchange.com/</a>.</p>\n\n<p>Let's say that I already trained my CNN. Is there anyway of my ouput to be represented as a formula just like a perceptron can (x1w1 + x2w2 + ... = PREDICTION). </p>\n\n<p>It does not matter if the formula is more complicated than the perceptron one, but in general would it be possible to train a CNN in Python or Matlab, get the weights and create an arithmetic, exponential, whatever formula made with those acquired weights?</p>\n\n<p>I want to do this because I am trying classify in a PIC32 (a low cost microchip) which I think that does not have the capacity to perform a CNN within itself. </p>\n\n<p>Or, for example, should I pursue the idea of some sort of \"C library\" that can do CNNs?</p>\n"}, {"tags": ["python", "flask", "python-click"], "answers": [{"comments": [{"owner": {"reputation": 323, "user_id": 713980, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a87afa4696e7f2d7a37b5f1684b6567?s=128&d=identicon&r=PG", "display_name": "ewels", "link": "https://stackoverflow.com/users/713980/ewels"}, "edited": false, "score": 0, "creation_date": 1553150557, "post_id": 55272314, "comment_id": 97280312, "body": "Amazing, thank you! Note that I had to additionally specify a <code>flask.cli.load_dotenv()</code> command to get this working, but this had the added benefit that I could tidy the new <code>.flaskenv</code> file away in the subdirectory with the flask code. I also used a relative path for <code>FLASK_APP</code> so that it will work for all users.  A little annoyed with myself that I didn&#39;t figure this out myself - I had seen the <a href=\"http://flask.pocoo.org/docs/1.0/cli/#environment-variables-from-dotenv\" rel=\"nofollow noreferrer\">flask docs</a> about <code>python-dotenv</code>, but hadn&#39;t put 2+2 together to realise that this would solve my problem. Thank you!"}, {"owner": {"reputation": 323, "user_id": 713980, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a87afa4696e7f2d7a37b5f1684b6567?s=128&d=identicon&r=PG", "display_name": "ewels", "link": "https://stackoverflow.com/users/713980/ewels"}, "edited": false, "score": 1, "creation_date": 1553150659, "post_id": 55272314, "comment_id": 97280354, "body": "I updated the minimal solution on GitHub to help future readers: <a href=\"https://github.com/ewels/flask-subcommand-issue\" rel=\"nofollow noreferrer\">github.com/ewels/flask-subcommand-issue</a>"}, {"owner": {"reputation": 323, "user_id": 713980, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a87afa4696e7f2d7a37b5f1684b6567?s=128&d=identicon&r=PG", "display_name": "ewels", "link": "https://stackoverflow.com/users/713980/ewels"}, "edited": false, "score": 0, "creation_date": 1553150992, "post_id": 55272314, "comment_id": 97280481, "body": "Damn, I spoke too soon. The relative path doesn&#39;t work when you launch from other working directories. Any ideas how to make <code>FLASK_APP</code> work for any user?"}, {"owner": {"reputation": 7730, "user_id": 5511849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ggmzY.png?s=128&g=1", "display_name": "Grey Li", "link": "https://stackoverflow.com/users/5511849/grey-li"}, "reply_to_user": {"reputation": 323, "user_id": 713980, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a87afa4696e7f2d7a37b5f1684b6567?s=128&d=identicon&r=PG", "display_name": "ewels", "link": "https://stackoverflow.com/users/713980/ewels"}, "edited": false, "score": 0, "creation_date": 1553177374, "post_id": 55272314, "comment_id": 97294458, "body": "You are welcome! Maybe you can just pass module import path, check the updated answer."}, {"owner": {"reputation": 323, "user_id": 713980, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a87afa4696e7f2d7a37b5f1684b6567?s=128&d=identicon&r=PG", "display_name": "ewels", "link": "https://stackoverflow.com/users/713980/ewels"}, "edited": false, "score": 0, "creation_date": 1553261952, "post_id": 55272314, "comment_id": 97330159, "body": "I don&#39;t think that this works sadly (I tried that). At least, not if you are not in the correct working directory. From the Flask docs: <i>Directories are scanned upwards from the directory you call <code>flask</code> from to locate the files. The current working directory will be set to the location of the file, with the assumption that that is the top level project directory.</i>"}, {"owner": {"reputation": 7730, "user_id": 5511849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ggmzY.png?s=128&g=1", "display_name": "Grey Li", "link": "https://stackoverflow.com/users/5511849/grey-li"}, "reply_to_user": {"reputation": 323, "user_id": 713980, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a87afa4696e7f2d7a37b5f1684b6567?s=128&d=identicon&r=PG", "display_name": "ewels", "link": "https://stackoverflow.com/users/713980/ewels"}, "edited": false, "score": 1, "creation_date": 1553265592, "post_id": 55272314, "comment_id": 97332560, "body": "Yes, with this setting, you have to excute the command from project root. Your solution looks good for your need, just up vote :)"}], "tags": [], "owner": {"reputation": 7730, "user_id": 5511849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ggmzY.png?s=128&g=1", "display_name": "Grey Li", "link": "https://stackoverflow.com/users/5511849/grey-li"}, "is_accepted": false, "score": 2, "last_activity_date": 1553177314, "last_edit_date": 1553177314, "creation_date": 1553130187, "answer_id": 55272314, "question_id": 55270786, "link": "https://stackoverflow.com/questions/55270786/how-to-run-flask-app-by-flask-run-or-custom-command-without-set-flask-app-manual/55272314#55272314", "title": "How to run Flask app by flask run or custom command without set FLASK_APP manually", "body": "<p>Create a file named <code>.flaskenv</code> under the root of your project, put this content into it:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>FLASK_APP=fsksc.server.app:create_fsksc_app\n</code></pre>\n\n<p>then install python-dotenv:</p>\n\n<pre><code>$ pip install python-dotenv\n</code></pre>\n\n<p>Now the env var should be set automatically when you excute your run command.</p>\n"}, {"tags": [], "owner": {"reputation": 323, "user_id": 713980, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a87afa4696e7f2d7a37b5f1684b6567?s=128&d=identicon&r=PG", "display_name": "ewels", "link": "https://stackoverflow.com/users/713980/ewels"}, "is_accepted": true, "score": 1, "last_activity_date": 1553153333, "creation_date": 1553153333, "answer_id": 55275551, "question_id": 55270786, "link": "https://stackoverflow.com/questions/55270786/how-to-run-flask-app-by-flask-run-or-custom-command-without-set-flask-app-manual/55275551#55275551", "title": "How to run Flask app by flask run or custom command without set FLASK_APP manually", "body": "<p>Ok, so <a href=\"https://stackoverflow.com/a/55272314/713980\">Grey's answer</a> put me on the right track..</p>\n\n<p>Unfortunately, because of how flask uses the <code>.flaskenv</code> files, paths have to either be absolute, or relative to the current working directory of the user. Neither of these approaches will work for other users installing the package.</p>\n\n<p>However, when playing with this I found that doing a simple <code>os.environ['FLASK_APP']</code> works! It just has to be very early on in the script execution. Then the path can be set dynamically based on the location of the installed script, and I think everything seems to work:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>flaskenv_app_path = os.path.join(os.path.dirname(os.path.dirname(__file__)), 'fsksc', 'server', 'app.py')\nflaskenv_app_func = '{}:create_fsksc_app'.format(flaskenv_app_path)\nos.environ['FLASK_APP'] = flaskenv_app_func\n</code></pre>\n\n<p>I've updated the minimal example code with this here: <a href=\"https://github.com/ewels/flask-subcommand-issue\" rel=\"nofollow noreferrer\">https://github.com/ewels/flask-subcommand-issue</a></p>\n\n<p>Thank you for your help <a href=\"https://stackoverflow.com/users/5511849/grey-li\">Grey Li</a>!</p>\n"}], "owner": {"reputation": 323, "user_id": 713980, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a87afa4696e7f2d7a37b5f1684b6567?s=128&d=identicon&r=PG", "display_name": "ewels", "link": "https://stackoverflow.com/users/713980/ewels"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7277, "favorite_count": 1, "accepted_answer_id": 55275551, "answer_count": 2, "score": 4, "last_activity_date": 1553177314, "creation_date": 1553119054, "last_edit_date": 1553130439, "question_id": 55270786, "link": "https://stackoverflow.com/questions/55270786/how-to-run-flask-app-by-flask-run-or-custom-command-without-set-flask-app-manual", "title": "How to run Flask app by flask run or custom command without set FLASK_APP manually", "body": "<h2>Use case</h2>\n\n<p>I have a python package using a <code>click</code> group to have multiple command line subcommands.\nIn addition to this, I would like to have a small flask application.</p>\n\n<p>The other subcommands are the primary function of the package - <em>not</em> the flask application.\nAs such, I would like the flask commands to be nested under their own group.</p>\n\n<h2>Example</h2>\n\n<p>I made a minimal example to demonstrate my problem - it's on GitHub here: <a href=\"https://github.com/ewels/flask-subcommand-issue\" rel=\"nofollow noreferrer\">https://github.com/ewels/flask-subcommand-issue</a></p>\n\n<h3>What works</h3>\n\n<p>In the minimal example, I set up a mini flask installation that runs with the <code>fsksc_server</code> command.\nThis is thanks to a setuptools <code>console_scripts</code> entry point hook in <code>setup.py</code>.</p>\n\n<p>The command works perfectly, exactly as you would expect:</p>\n\n<pre><code>$ fsksc_server --help\n\nUsage: fsksc_server [OPTIONS] COMMAND [ARGS]...\n\n  Run the fsksc server flask app\n\nOptions:\n  --version  Show the flask version\n  --help     Show this message and exit.\n\nCommands:\n  routes  Show the routes for the app.\n  run     Runs a development server.\n  shell   Runs a shell in the app context.\n</code></pre>\n\n<pre><code>$ fsksc_server run\n\n * Environment: production\n   WARNING: Do not use the development server in a production environment.\n   Use a production WSGI server instead.\n * Debug mode: off\n * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)\n</code></pre>\n\n<p><em>(I haven't set up any routes, so visiting the URL throws a 404, but the server is running fine..)</em></p>\n\n<p>To get the flask commands in a click subcommand I have used flask <code>add_command</code> with the flask group.\nThis main command is <code>fsksc</code>. The flask subcommand should be <code>shell</code>.\nThe intention is to make <code>fsksc shell run</code> launch the development server.</p>\n\n<p>The commands show up properly, so this part seems to work:</p>\n\n<pre><code>$ fsksc --help\n\nUsage: fsksc [OPTIONS] COMMAND [ARGS]...\n\nOptions:\n  --help  Show this message and exit.\n\nCommands:\n  cmd1\n  cmd2\n  server  Run the fsksc server flask app\n</code></pre>\n\n<h3>What doesn't work</h3>\n\n<p>When doing anything under the <code>server</code> subcommand, I get a warning message about a <code>NoAppException</code> exception:</p>\n\n<pre><code>$ fsksc server --help\n\nTraceback (most recent call last):\n  File \"/Users/ewels/miniconda2/envs/work/lib/python2.7/site-packages/Flask-1.0.2-py2.7.egg/flask/cli.py\", line 529, in list_commands\n    rv.update(info.load_app().cli.list_commands(ctx))\n  File \"/Users/ewels/miniconda2/envs/work/lib/python2.7/site-packages/Flask-1.0.2-py2.7.egg/flask/cli.py\", line 384, in load_app\n    'Could not locate a Flask application. You did not provide '\nNoAppException: Could not locate a Flask application. You did not provide the \"FLASK_APP\" environment variable, and a \"wsgi.py\" or \"app.py\" module was not found in the current directory.\nUsage: fsksc server [OPTIONS] COMMAND [ARGS]...\n\n  Run the fsksc server flask app\n\nOptions:\n  --version  Show the flask version\n  --help     Show this message and exit.\n\nCommands:\n  routes  Show the routes for the app.\n  run     Runs a development server.\n  shell   Runs a shell in the app context.\n</code></pre>\n\n<p>Trying to run the server gives a similar error:</p>\n\n<pre><code>$ fsksc server run\n\n * Environment: production\n   WARNING: Do not use the development server in a production environment.\n   Use a production WSGI server instead.\n * Debug mode: off\nUsage: fsksc server run [OPTIONS]\n\nError: Could not locate a Flask application. You did not provide the \"FLASK_APP\" environment variable, and a \"wsgi.py\" or \"app.py\" module was not found in the current directory.\n</code></pre>\n\n<h3>Crappy workaround</h3>\n\n<p>I can fix this by defining the <code>FLASK_APP</code> environment variable correctly.\nThen <code>flask run</code> works as expected:</p>\n\n<pre><code>$ export FLASK_APP=/Users/ewels/GitHub/flask-subcommand-issue/fsksc/server/app.py:create_fsksc_app\n\n$ fsksc server run\n\n * Serving Flask app \"/Users/ewels/GitHub/flask-subcommand-issue/fsksc/server/app.py:create_fsksc_app\"\n * Environment: production\n   WARNING: Do not use the development server in a production environment.\n   Use a production WSGI server instead.\n * Debug mode: off\n * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)\n</code></pre>\n\n<p><code>flask run</code> also works.</p>\n\n<p><em>But</em> - I don't want to have to get my users to do this!\nI also don't want to pollute my main command group with the flask subcommands\n(in reality I have a lot more subcommands in the main group).</p>\n\n<h3>The question</h3>\n\n<p>What do I need to do to make this work as I intend, without having to define <code>FLASK_APP</code> and as a nested group in click?</p>\n\n<p>Thank you in advance for any help!</p>\n"}, {"tags": ["python", "splinter"], "answers": [{"tags": [], "owner": {"reputation": 41, "user_id": 7552200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/831efd2cd37f33aa4c32a844c99df64b?s=128&d=identicon&r=PG&f=1", "display_name": "obby", "link": "https://stackoverflow.com/users/7552200/obby"}, "is_accepted": false, "score": 0, "last_activity_date": 1553123028, "creation_date": 1553123028, "answer_id": 55271408, "question_id": 55270767, "link": "https://stackoverflow.com/questions/55270767/using-splinter-how-can-i-click-this-link-button/55271408#55271408", "title": "Using splinter how can I click this link / button", "body": "<p>newButton = browser.find_by_id('postalischeAdressenPflegen').click()\nI had to find another element and click the element.</p>\n"}], "owner": {"reputation": 41, "user_id": 7552200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/831efd2cd37f33aa4c32a844c99df64b?s=128&d=identicon&r=PG&f=1", "display_name": "obby", "link": "https://stackoverflow.com/users/7552200/obby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 23, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1553123028, "creation_date": 1553118953, "last_edit_date": 1553119255, "question_id": 55270767, "link": "https://stackoverflow.com/questions/55270767/using-splinter-how-can-i-click-this-link-button", "title": "Using splinter how can I click this link / button", "body": "<p>The HTML on the page has a button formatted like this:</p>\n\n<pre><code>    &lt;span class=\"v-button-caption\"&gt;\u00c4ndern&lt;/span&gt;\n</code></pre>\n\n<p>I have been googling around and looking at other posts on here and none helped :/</p>\n\n<p>Any tips? Thanks!</p>\n\n<p>Can provide more info if need be. </p>\n\n<p><a href=\"https://i.imgur.com/tZ8LVCG.png\" rel=\"nofollow noreferrer\">https://i.imgur.com/tZ8LVCG.png</a></p>\n\n<p>Sorry couldnt figure out how to include pictures here a tad confusing!</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 3, "creation_date": 1553118933, "post_id": 55270742, "comment_id": 97272695, "body": "Use an OUTER JOIN: <a href=\"https://stackoverflow.com/questions/53645882/pandas-merging-101\">stackoverflow.com/questions/53645882/pandas-merging-101</a>"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1553118954, "post_id": 55270742, "comment_id": 97272703, "body": "<code>result = df1.merge(df2, on=&#39;id&#39;, how=&#39;outer&#39;)</code>"}, {"owner": {"reputation": 45, "user_id": 5738483, "user_type": "registered", "profile_image": "https://graph.facebook.com/1127222520644979/picture?type=large", "display_name": "Andy Ho", "link": "https://stackoverflow.com/users/5738483/andy-ho"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1553119113, "post_id": 55270742, "comment_id": 97272756, "body": "@coldspeed Thank you!!"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1553119204, "post_id": 55270742, "comment_id": 97272784, "body": "You are welcome to upvote the post I&#39;ve linked you to, if you found it helpful. Thanks."}], "answers": [{"tags": [], "owner": {"reputation": 23213, "user_id": 7131757, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wvEUE.jpg?s=128&g=1", "display_name": "Giorgos Myrianthous", "link": "https://stackoverflow.com/users/7131757/giorgos-myrianthous"}, "is_accepted": true, "score": 0, "last_activity_date": 1553119269, "creation_date": 1553119269, "answer_id": 55270816, "question_id": 55270742, "link": "https://stackoverflow.com/questions/55270742/merge-dataframes-based-on-specific-value-of-a-column/55270816#55270816", "title": "Merge Dataframes based on specific value of a column", "body": "<pre><code>import pandas as pd\nimport numpy as np\n\ndf1 = pd.DataFrame(np.array([\n    ['A', 0],\n    ['B', 2],\n    ['C', 1]]),\n    columns=['id', 'val1'])\ndf2 = pd.DataFrame(np.array([\n    ['A', 5],\n    ['D', 2]]),\n    columns=['id', 'val2'])\n\nprint(pd.merge(df1, df2, on='id', how='outer'))\n</code></pre>\n\n<p>should give the desired output: </p>\n\n<pre><code>  id val1 val2\n0  A    0    5\n1  B    2  NaN\n2  C    1  NaN\n3  D  NaN    2\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 5738483, "user_type": "registered", "profile_image": "https://graph.facebook.com/1127222520644979/picture?type=large", "display_name": "Andy Ho", "link": "https://stackoverflow.com/users/5738483/andy-ho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27, "favorite_count": 0, "closed_date": 1553118939, "accepted_answer_id": 55270816, "answer_count": 1, "score": 0, "last_activity_date": 1553119269, "creation_date": 1553118780, "question_id": 55270742, "link": "https://stackoverflow.com/questions/55270742/merge-dataframes-based-on-specific-value-of-a-column", "closed_reason": "Duplicate", "title": "Merge Dataframes based on specific value of a column", "body": "<p>I know it might be super easy but I am new to dataframe operations. I have <strong>17</strong> dataframes in total and I need to merge them into a single one. For example:</p>\n\n<p>DF1:</p>\n\n<pre><code>| id    | val_1    |\n|-------|----------|\n| A     |        0 |\n| B     |        2 |\n| C     |        1 |\n</code></pre>\n\n<p>DF2:</p>\n\n<pre><code>| id    | val_2    |\n|-------|----------|\n| A     |        5 |\n| D     |        2 |\n</code></pre>\n\n<p>The desire result should be:</p>\n\n<pre><code>| id    | val_1    | val_2    |\n|-------|----------|----------|\n| A     |        0 |        5 |\n| B     |        2 |      N/A |\n| C     |        1 |      N/A |\n| D     |      N/A |        2 |\n</code></pre>\n\n<p>What should be the correct method to use, <code>merge</code> or <code>concate</code>?\nThank you!</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 9542, "user_id": 8068625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4spqa.png?s=128&g=1", "display_name": "Henry Woody", "link": "https://stackoverflow.com/users/8068625/henry-woody"}, "edited": false, "score": 0, "creation_date": 1553118898, "post_id": 55270726, "comment_id": 97272686, "body": "Can you include a small sample of your desired output?"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1553119026, "post_id": 55270726, "comment_id": 97272733, "body": "Please fix your code so it can be copy-pasted into a terminal. There are extra line breaks there."}], "answers": [{"tags": [], "owner": {"reputation": 9542, "user_id": 8068625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4spqa.png?s=128&g=1", "display_name": "Henry Woody", "link": "https://stackoverflow.com/users/8068625/henry-woody"}, "is_accepted": true, "score": 0, "last_activity_date": 1553119045, "creation_date": 1553119045, "answer_id": 55270785, "question_id": 55270726, "link": "https://stackoverflow.com/questions/55270726/how-to-zip-together-lists-of-unequal-length-into-a-dictionary/55270785#55270785", "title": "How to zip together lists of unequal length into a dictionary?", "body": "<p>You can do this with nested <code>for</code> loop, looping over the authors and the zipped coauthors and frequencies. Like so:</p>\n\n<pre><code>authors = ['mccoy.robert']\ncoauthors = [\n    'hola.lubica', 'kundu.subiman', 'ntantu.ibula', \n    'fletcher.peter', 'jain.tanvi', 'jindal.varun', 'bankston.paul',\n    'di-maio.giuseppe', 'dickman.raymond-f-jun', 'holy.dusan',\n    'slover.rebecca', 'curtis.douglas-w', 'duvall.paul-f', 'fogelgren.j-r',\n    'hammer.s-t', 'haworth.r-c', 'lutzer.david-j', 'okuyama.akihiro', \n    'pelant.jan', 'porter.jack-ray', 'raha.asit-baran', 'rubin.leonard-roy',\n    'santoro.grazia', 'smith.jerome-c', 'todd.aaron-r'\n]\nfrequencies = [\n    '10', '8', '6', '5', '3', '3', '2', '2', '2', '2', '2', \n    '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1'\n]\n\ncombined = []\n\nfor author in authors:\n    for coauthor, frequency in zip(coauthors, frequencies):\n        combined.append((author, coauthor, frequency))\n</code></pre>\n\n<p>With Output:</p>\n\n<pre><code>[\n    ('mccoy.robert', 'hola.lubica', '10'), ('mccoy.robert', 'kundu.subiman', '8'), ('mccoy.robert', 'ntantu.ibula', '6'),\n    ('mccoy.robert', 'fletcher.peter', '5'), ('mccoy.robert', 'jain.tanvi', '3'), ('mccoy.robert', 'jindal.varun', '3'),\n    ('mccoy.robert', 'bankston.paul', '2'), ('mccoy.robert', 'di-maio.giuseppe', '2'), ('mccoy.robert', 'dickman.raymond-f-jun', '2'),\n    ('mccoy.robert', 'holy.dusan', '2'), ('mccoy.robert', 'slover.rebecca', '2'), ('mccoy.robert', 'curtis.douglas-w', '1'),\n    ('mccoy.robert', 'duvall.paul-f', '1'), ('mccoy.robert', 'fogelgren.j-r', '1'), ('mccoy.robert', 'hammer.s-t', '1'),\n    ('mccoy.robert', 'haworth.r-c', '1'), ('mccoy.robert', 'lutzer.david-j', '1'), ('mccoy.robert', 'okuyama.akihiro', '1'),\n    ('mccoy.robert', 'pelant.jan', '1'), ('mccoy.robert', 'porter.jack-ray', '1'), ('mccoy.robert', 'raha.asit-baran', '1'),\n    ('mccoy.robert', 'rubin.leonard-roy', '1'), ('mccoy.robert', 'santoro.grazia', '1'), ('mccoy.robert', 'smith.jerome-c', '1'),\n    ('mccoy.robert', 'todd.aaron-r', '1')\n]\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 11163173, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-nlAXnKG25so/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfiC2lwbIoisAaDHo5po0sILsrbyg/mo/photo.jpg?sz=128", "display_name": "neophyte1", "link": "https://stackoverflow.com/users/11163173/neophyte1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 21, "favorite_count": 0, "accepted_answer_id": 55270785, "answer_count": 1, "score": 0, "last_activity_date": 1553119071, "creation_date": 1553118731, "last_edit_date": 1553119071, "question_id": 55270726, "link": "https://stackoverflow.com/questions/55270726/how-to-zip-together-lists-of-unequal-length-into-a-dictionary", "title": "How to zip together lists of unequal length into a dictionary?", "body": "<p>I have three lists.  </p>\n\n<pre><code>import pandas as pd\n\nauthor = ['mccoy.robert']\ncoauthors = [\n    'hola.lubica', 'kundu.subiman', 'ntantu.ibula', \n    'fletcher.peter', 'jain.tanvi', 'jindal.varun', 'bankston.paul',\n    'di-maio.giuseppe', 'dickman.raymond-f-jun', 'holy.dusan',\n    'slover.rebecca', 'curtis.douglas-w', 'duvall.paul-f', 'fogelgren.j-r',\n    'hammer.s-t', 'haworth.r-c', 'lutzer.david-j', 'okuyama.akihiro', \n    'pelant.jan', 'porter.jack-ray', 'raha.asit-baran', 'rubin.leonard-roy',\n    'santoro.grazia', 'smith.jerome-c', 'todd.aaron-r'\n]\nfrequency = [\n    '10', '8', '6', '5', '3', '3', '2', '2', '2', '2', '2', \n    '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1'\n]\n</code></pre>\n\n<p>I'd like to make these lists into a dataframe in which each row is the author paired with each coauthor and the frequency of collaborations.  Basically if I could zip these three lists together, with the list 'author' replicated over and over in each row, this would be great.</p>\n\n<p>This seems like a fairly simple pandas task... but I'd love some help on it!</p>\n"}, {"tags": ["python", "json", "apache-spark", "hadoop", "pyspark"], "comments": [{"owner": {"reputation": 192865, "user_id": 989121, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/1Cvf7.png?s=128&g=1", "display_name": "georg", "link": "https://stackoverflow.com/users/989121/georg"}, "edited": false, "score": 0, "creation_date": 1553121165, "post_id": 55270723, "comment_id": 97273440, "body": "If the offending prefix/trailer are always the same, you could just strip them like <code>loads(bad_json[14:-3])</code>. Better yet, convince the lazy devops to fix that - that&#39;s clearly their fault."}, {"owner": {"reputation": 13, "user_id": 11199718, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-FMrWGtn-CxA/AAAAAAAAAAI/AAAAAAAAAEw/pV0Nfu4kkSg/photo.jpg?sz=128", "display_name": "Guy", "link": "https://stackoverflow.com/users/11199718/guy"}, "reply_to_user": {"reputation": 192865, "user_id": 989121, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/1Cvf7.png?s=128&g=1", "display_name": "georg", "link": "https://stackoverflow.com/users/989121/georg"}, "edited": false, "score": 0, "creation_date": 1553282964, "post_id": 55270723, "comment_id": 97341469, "body": "Using the strip method was definitely my first go to but not all the JSON strings are the same length or have the same number of attributes."}], "answers": [{"tags": [], "owner": {"reputation": 21440, "user_id": 225020, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/6ae07ec5b34fce5a6c5437fbdab9f079?s=128&d=identicon&r=PG", "display_name": "Jab", "link": "https://stackoverflow.com/users/225020/jab"}, "is_accepted": true, "score": 1, "last_activity_date": 1576687548, "last_edit_date": 1576687548, "creation_date": 1553122731, "answer_id": 55271358, "question_id": 55270723, "link": "https://stackoverflow.com/questions/55270723/trying-to-correct-an-improperly-formatted-json-string-using-python/55271358#55271358", "title": "Trying to correct an improperly formatted JSON string using python", "body": "<p>For the string offered I do suggest you stick with <code>re</code> a regex such as:</p>\n\n<pre><code>'(?&lt;=:|\\})(\")(?=\\}|\\{)'\n</code></pre>\n\n<p>Should do the trick. Since the double quotes that are not needed follow closing blackets or a colon and preced opening or closing brackets.</p>\n\n<pre><code>import re\nimport json\n\nstring = '{\"json_data\":\"{\"table\":\"TEST.FUBAR\",\"op_type\":\"I\",\"op_ts\":\"2019-03-14 15:33:50.031848\",\"current_ts\":\"2019-03-14T15:33:57.479002\",\"pos\":\"1111\",\"after\":{\"COL1\":949494949494949494,\"COL2\":99,\"COL3\":2,\"COL4\":\"            99999\",\"COL5\":9999999,\"COL6\":90,\"COL7\":42478,\"COL8\":\"I\",\"COL9\":null,\"COL10\":\"2019-03-14 15:33:49\",\"COL11\":null,\"COL12\":null,\"COL13\":null,\"COL14\":\"x222263 \",\"COL15\":\"2019-03-14 15:33:49\",\"COL16\":\"x222263 \",\"COL17\":\"2019-03-14 15:33:49\",\"COL18\":\"2020-09-10 00:00:00\",\"COL19\":\"A\",\"COL20\":\"A\",\"COL21\":0,\"COL22\":null,\"COL23\":\"2019-03-14 15:33:47\",\"COL24\":2,\"COL25\":2,\"COL26\":\"R\",\"COL27\":\"2019-03-14 15:33:49\",\"COL28\":\"  \",\"COL29\":\"PBU67H   \",\"COL30\":\"            20000\",\"COL31\":2,\"COL32\":null}\"}}'\n\ntrimmed_string = re.sub('(?&lt;=:|\\})(\")(?=\\}|\\{)', '', string)\n\ndata = json.loads(trimmed_string)\n</code></pre>\n\n<p>Results:</p>\n\n<pre><code>{'json_data': {'table': 'TEST.FUBAR', 'op_type': 'I', 'op_ts': '2019-03-14 15:33:50.031848','current_ts': '2019-03-14T15:33:57.479002', 'pos': '1111', 'after': {'COL1': 949494949494949494, 'COL2': 99, 'COL3': 2, 'COL4': '            99999', 'COL5': 9999999, 'COL6': 90, 'COL7':42478, 'COL8': 'I', 'COL9': None, 'COL10': '2019-03-14 15:33:49', 'COL11': None, 'COL12': None, 'COL13': None, 'COL14': 'x222263 ', 'COL15': '2019-03-14 15:33:49', 'COL16': 'x222263 ', 'COL17': '2019-03-14 15:33:49', 'COL18': '2020-09-10 00:00:00', 'COL19': 'A', 'COL20': 'A', 'COL21': 0, 'COL22': None, 'COL23': '2019-03-14 15:33:47', 'COL24': 2, 'COL25': 2, 'COL26': 'R', 'COL27': '2019-03-14 15:33:49', 'COL28': '  ', 'COL29': 'PBU67H   ', 'COL30': '20000', 'COL31': 2, 'COL32': None}}}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 11199718, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-FMrWGtn-CxA/AAAAAAAAAAI/AAAAAAAAAEw/pV0Nfu4kkSg/photo.jpg?sz=128", "display_name": "Guy", "link": "https://stackoverflow.com/users/11199718/guy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 2, "accepted_answer_id": 55271358, "answer_count": 1, "score": -2, "last_activity_date": 1576687548, "creation_date": 1553118710, "question_id": 55270723, "link": "https://stackoverflow.com/questions/55270723/trying-to-correct-an-improperly-formatted-json-string-using-python", "title": "Trying to correct an improperly formatted JSON string using python", "body": "<p>I'm trying to use any combination of the <strong>Python</strong> \"<strong>re</strong>\" library and python slice to correct this improperly formatted JSON string that Kafka is giving us on HDFS using Cloudera's Hadoop distribution.</p>\n\n<p>incorrect json:</p>\n\n<pre><code>{\"json_data\":\"{\"table\":\"TEST.FUBAR\",\"op_type\":\"I\",\"op_ts\":\"2019-03-14 15:33:50.031848\",\"current_ts\":\"2019-03-14T15:33:57.479002\",\"pos\":\"1111\",\"after\":{\"COL1\":949494949494949494,\"COL2\":99,\"COL3\":2,\"COL4\":\"            99999\",\"COL5\":9999999,\"COL6\":90,\"COL7\":42478,\"COL8\":\"I\",\"COL9\":null,\"COL10\":\"2019-03-14 15:33:49\",\"COL11\":null,\"COL12\":null,\"COL13\":null,\"COL14\":\"x222263 \",\"COL15\":\"2019-03-14 15:33:49\",\"COL16\":\"x222263 \",\"COL17\":\"2019-03-14 15:33:49\",\"COL18\":\"2020-09-10 00:00:00\",\"COL19\":\"A\",\"COL20\":\"A\",\"COL21\":0,\"COL22\":null,\"COL23\":\"2019-03-14 15:33:47\",\"COL24\":2,\"COL25\":2,\"COL26\":\"R\",\"COL27\":\"2019-03-14 15:33:49\",\"COL28\":\"  \",\"COL29\":\"PBU67H   \",\"COL30\":\"            20000\",\"COL31\":2,\"COL32\":null}}\"}\n</code></pre>\n\n<p><strong>NOTE:</strong> the double quotes near the beginning tag \"<strong>json_data</strong>\":<strong><em>\"</em></strong>{ and the double quotes near the end on \"<strong>null</strong>}}<strong>\"</strong>} are actually the only things wrong that need to be removed (I've tested it without the extra quotes)</p>\n\n<p>valid and correct json:</p>\n\n<pre><code>{\"json_data\":{\"table\":\"TEST.FUBAR\",\"op_type\":\"I\",\"op_ts\":\"2019-03-14 15:33:50.031848\",\"current_ts\":\"2019-03-14T15:33:57.479002\",\"pos\":\"1111\",\"after\":{\"COL1\":949494949494949494,\"COL2\":99,\"COL3\":2,\"COL4\":\"            99999\",\"COL5\":9999999,\"COL6\":90,\"COL7\":42478,\"COL8\":\"I\",\"COL9\":null,\"COL10\":\"2019-03-14 15:33:49\",\"COL11\":null,\"COL12\":null,\"COL13\":null,\"COL14\":\"x222263 \",\"COL15\":\"2019-03-14 15:33:49\",\"COL16\":\"x222263 \",\"COL17\":\"2019-03-14 15:33:49\",\"COL18\":\"2020-09-10 00:00:00\",\"COL19\":\"A\",\"COL20\":\"A\",\"COL21\":0,\"COL22\":null,\"COL23\":\"2019-03-14 15:33:47\",\"COL24\":2,\"COL25\":2,\"COL26\":\"R\",\"COL27\":\"2019-03-14 15:33:49\",\"COL28\":\"  \",\"COL29\":\"PBU67H   \",\"COL30\":\"            20000\",\"COL31\":2,\"COL32\":null}}}\n</code></pre>\n\n<p>I have between <strong>40,000 to 60,000 records</strong> I would need to read thru per hour using Pyspark and the Infrastructure team says it's on me to fix. </p>\n\n<p>Is there a quick and dirty way using python to read all the strings and remove the double quotes near the beginning and near the end? </p>\n"}, {"tags": ["python", "windows-10", "registry"], "comments": [{"owner": {"reputation": 652, "user_id": 1317713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cd0dbe57ed107fdf0b871ecbb22759e?s=128&d=identicon&r=PG", "display_name": "Leonid", "link": "https://stackoverflow.com/users/1317713/leonid"}, "edited": false, "score": 1, "creation_date": 1553118901, "post_id": 55270697, "comment_id": 97272687, "body": "Popen is messy plus it is reinventing the wheel.  Why not use <a href=\"https://docs.python.org/3.5/library/winreg.html\" rel=\"nofollow noreferrer\">docs.python.org/3.5/library/winreg.html</a> (chage the url to match your version of Python)?  Are you trying to find all keys that match a prefix?"}, {"owner": {"reputation": 28, "user_id": 10595797, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2Tz6M.png?s=128&g=1", "display_name": "Don Jhoe", "link": "https://stackoverflow.com/users/10595797/don-jhoe"}, "reply_to_user": {"reputation": 652, "user_id": 1317713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cd0dbe57ed107fdf0b871ecbb22759e?s=128&d=identicon&r=PG", "display_name": "Leonid", "link": "https://stackoverflow.com/users/1317713/leonid"}, "edited": false, "score": 0, "creation_date": 1553119259, "post_id": 55270697, "comment_id": 97272803, "body": "I&#39;m looking for a way to find the key after HKEY_USERS and before SOFTWARE. It happens again after Group Policy Objects. I&#39;m wondering what they are and how to find them so I can modify a key. But since it&#39;s not a static path, there is no way I can get away with hardcoding it. Thanks for the tip on the winreg."}, {"owner": {"reputation": 652, "user_id": 1317713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cd0dbe57ed107fdf0b871ecbb22759e?s=128&d=identicon&r=PG", "display_name": "Leonid", "link": "https://stackoverflow.com/users/1317713/leonid"}, "edited": false, "score": 0, "creation_date": 1553119538, "post_id": 55270697, "comment_id": 97272906, "body": "Ok, looks like this will require a linear search. Find the most specific static parent key, then iterate all subkeys and hold on to the keys that match a regex. You can find an example here: <a href=\"https://www.programcreek.com/python/example/53858/winreg.HKEY_LOCAL_MACHINE\" rel=\"nofollow noreferrer\">programcreek.com/python/example/53858/winreg.HKEY_LOCAL_MACH&zwnj;&#8203;INE</a>   Search for <code>regex</code>. Takes a little bit of effort to figure this out but it&#39;s not too bad."}, {"owner": {"reputation": 28, "user_id": 10595797, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2Tz6M.png?s=128&g=1", "display_name": "Don Jhoe", "link": "https://stackoverflow.com/users/10595797/don-jhoe"}, "reply_to_user": {"reputation": 652, "user_id": 1317713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cd0dbe57ed107fdf0b871ecbb22759e?s=128&d=identicon&r=PG", "display_name": "Leonid", "link": "https://stackoverflow.com/users/1317713/leonid"}, "edited": false, "score": 0, "creation_date": 1553120311, "post_id": 55270697, "comment_id": 97273176, "body": "Oh this is gonna take some time with python :P. I think I&#39;ll simply omit the changing of this value then. I still wonder what those random numbers are."}], "owner": {"reputation": 28, "user_id": 10595797, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2Tz6M.png?s=128&g=1", "display_name": "Don Jhoe", "link": "https://stackoverflow.com/users/10595797/don-jhoe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 15, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1553118537, "creation_date": 1553118537, "question_id": 55270697, "link": "https://stackoverflow.com/questions/55270697/are-these-unique-identifiers-in-the-registry-if-so-how-can-i-detect-them", "title": "Are these unique identifiers in the registry? If so, how can I detect them?", "body": "<p><a href=\"https://i.stack.imgur.com/XPK0b.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XPK0b.png\" alt=\"Screenshot of the registry path\"></a></p>\n\n<p>I'm developing a script that will automatize performance tweaks according to the user's choice when running it.\nThen I came accross this path in the registry and I'm wondering how I would possibly find this path automatically considering that it is formed by random strings of numbers and characters.</p>\n\n<p>It seems that these are unique IDs of some sort.\nThe programming language I'm scripting it is Python 3 and reg.exe is being used along with Popen to strip unecessary bloat from the registry.</p>\n"}, {"tags": ["python", "pandas", "numpy"], "comments": [{"owner": {"reputation": 3919, "user_id": 3132718, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Dv45L.png?s=128&g=1", "display_name": "Al.G.", "link": "https://stackoverflow.com/users/3132718/al-g"}, "edited": false, "score": 1, "creation_date": 1553118587, "post_id": 55270683, "comment_id": 97272601, "body": "I don&#39;t know how it&#39;s done in Python, but the concept is known as &quot;fold&quot;, &quot;reduce&quot; or &quot;accumulate&quot;. Look for similar functions in the python std."}, {"owner": {"reputation": 93, "user_id": 5994782, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207969063406461/picture?type=large", "display_name": "Henry Dashwood", "link": "https://stackoverflow.com/users/5994782/henry-dashwood"}, "reply_to_user": {"reputation": 3919, "user_id": 3132718, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Dv45L.png?s=128&g=1", "display_name": "Al.G.", "link": "https://stackoverflow.com/users/3132718/al-g"}, "edited": false, "score": 0, "creation_date": 1553119628, "post_id": 55270683, "comment_id": 97272940, "body": "Haha googling is much easier when you know the term! Many thanks"}], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 5994782, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207969063406461/picture?type=large", "display_name": "Henry Dashwood", "link": "https://stackoverflow.com/users/5994782/henry-dashwood"}, "edited": false, "score": 1, "creation_date": 1553119787, "post_id": 55270711, "comment_id": 97272997, "body": "I went for the other answer as I&#39;m working in numpy. Your solution looks good too though and I&#39;ll bare it in mind next time I&#39;m not using np!"}], "tags": [], "owner": {"reputation": 5488, "user_id": 3015734, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/31ccee0370328a7c894902c0a70373f7?s=128&d=identicon&r=PG", "display_name": "Tgsmith61591", "link": "https://stackoverflow.com/users/3015734/tgsmith61591"}, "is_accepted": false, "score": 5, "last_activity_date": 1553118625, "creation_date": 1553118625, "answer_id": 55270711, "question_id": 55270683, "link": "https://stackoverflow.com/questions/55270683/perform-logical-or-operation-on-multiple-numpy-arrays/55270711#55270711", "title": "Perform logical OR operation on multiple NumPy arrays", "body": "<p>You could use <code>reduce</code> with the <code>operator.or_</code>:</p>\n\n<pre><code>import operator\nfrom functools import reduce\n\nreduce(operator.or_, [array1, array2])\n# array([1, 1, 1, 0])\n</code></pre>\n\n<p>Note that in Python 3, <a href=\"https://docs.python.org/3.0/whatsnew/3.0.html#builtins\" rel=\"noreferrer\"><code>reduce</code> was moved</a> to the <code>functools</code> library, but in Python 2, it's a built-in.</p>\n"}, {"comments": [{"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 2, "creation_date": 1553119791, "post_id": 55270740, "comment_id": 97273001, "body": "I am thinking about <code>np.any([array1,array2],axis=0)</code> may work here?"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 1, "creation_date": 1553119849, "post_id": 55270740, "comment_id": 97273021, "body": "@Wen-Ben Yup. But <code>any</code> still has to convert the list <code>[array1,array2]</code> into a new array. It is about the same as column_stack, maybe slightly faster... perhaps we might learn more from the timings :)"}], "tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 4, "last_activity_date": 1553118772, "creation_date": 1553118772, "answer_id": 55270740, "question_id": 55270683, "link": "https://stackoverflow.com/questions/55270683/perform-logical-or-operation-on-multiple-numpy-arrays/55270740#55270740", "title": "Perform logical OR operation on multiple NumPy arrays", "body": "<p>I would stick to NumPy here, but there are a few ways of doing it. Here's using <code>logical_or.reduce</code>.</p>\n\n<pre><code>np.logical_or.reduce([array1, array2])\n# array([ True,  True,  True, False])\n</code></pre>\n\n<hr>\n\n<p>Another variant is using  using <code>column_stack</code> and <code>any</code>:</p>\n\n<pre><code>np.column_stack([array1, array2]).any(axis=1)\n# array([ True,  True,  True, False])\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93, "user_id": 5994782, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207969063406461/picture?type=large", "display_name": "Henry Dashwood", "link": "https://stackoverflow.com/users/5994782/henry-dashwood"}, "edited": false, "score": 0, "creation_date": 1553120025, "post_id": 55270866, "comment_id": 97273084, "body": "Oh wow. I was actually asking in order to incorporate this into something I&#39;m doing in pandas so this is great. Thank you!"}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "reply_to_user": {"reputation": 93, "user_id": 5994782, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207969063406461/picture?type=large", "display_name": "Henry Dashwood", "link": "https://stackoverflow.com/users/5994782/henry-dashwood"}, "edited": false, "score": 0, "creation_date": 1553120066, "post_id": 55270866, "comment_id": 97273097, "body": "@HenryDashwood ha , happy coding :-)"}], "tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": false, "score": 3, "last_activity_date": 1553119593, "creation_date": 1553119593, "answer_id": 55270866, "question_id": 55270683, "link": "https://stackoverflow.com/questions/55270683/perform-logical-or-operation-on-multiple-numpy-arrays/55270866#55270866", "title": "Perform logical OR operation on multiple NumPy arrays", "body": "<p>Since you tag <code>pandas</code> one way of using <code>any</code> for <code>|</code> , if you need <code>&amp;</code> try with <code>all</code> </p>\n\n<pre><code>pd.DataFrame([array1,array2]).any(1).values\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "is_accepted": false, "score": 1, "last_activity_date": 1553130897, "creation_date": 1553130897, "answer_id": 55272401, "question_id": 55270683, "link": "https://stackoverflow.com/questions/55270683/perform-logical-or-operation-on-multiple-numpy-arrays/55272401#55272401", "title": "Perform logical OR operation on multiple NumPy arrays", "body": "<p>You can also sum up the two arrays. If either of the elements is 1, the sum will be 1. If both are 1, the sum will be 2 in which case you reassign the value of 1 using <code>np.where</code> as</p>\n\n<pre><code>array3 = np.where(array1+array2==2, 1, array1+array2)\n# array([1, 1, 1, 0])\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 5994782, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207969063406461/picture?type=large", "display_name": "Henry Dashwood", "link": "https://stackoverflow.com/users/5994782/henry-dashwood"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "accepted_answer_id": 55270740, "answer_count": 4, "score": 2, "last_activity_date": 1553130897, "creation_date": 1553118462, "last_edit_date": 1553119738, "question_id": 55270683, "link": "https://stackoverflow.com/questions/55270683/perform-logical-or-operation-on-multiple-numpy-arrays", "title": "Perform logical OR operation on multiple NumPy arrays", "body": "<p>I have the following code:</p>\n\n<pre><code>array1 = np.array([1,0,1,0])\narray2 = np.array([1,1,0,0])\n\narray3 = array1 | array2\n</code></pre>\n\n<p>array3 will be:</p>\n\n<pre><code>[1 1 1 0]\n</code></pre>\n\n<p>This code works fine but I would like to extend it to more arrays without writing out <code>array1 | array2 | array3 | etc</code>.</p>\n\n<p>Anyone know an efficient way of doing this? Possibly using .any()?</p>\n"}, {"tags": ["python", "pyqt"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 1, "creation_date": 1553118416, "post_id": 55270648, "comment_id": 97272533, "body": "change <code>mb.show()</code> to <code>mb.exec_()</code>"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 1, "creation_date": 1553118519, "post_id": 55270648, "comment_id": 97272569, "body": "plus: change <code>self.ImportMapButton.clicked.connect(lambda: self.import_map())         self.ExceptButton.clicked.connect(lambda: self.except_file())</code> to <code>self.ImportMapButton.clicked.connect(self.import_map)         self.ExceptButton.clicked.connect(self.except_file)</code>"}, {"owner": {"reputation": 155, "user_id": 8803595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa880fbc42995dae55a771801145856d?s=128&d=identicon&r=PG&f=1", "display_name": "maxutil", "link": "https://stackoverflow.com/users/8803595/maxutil"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1553118675, "post_id": 55270648, "comment_id": 97272631, "body": "eyllanesc, thank you very much. Any tips on where I can learn these little details? I Google lots of solutions and this is the first time I&#39;ve seen the exec_ recommended over show."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 1, "creation_date": 1553118835, "post_id": 55270648, "comment_id": 97272671, "body": "Read the documentation of Qt, if you do not understand C++ then you do not pay attention to the implementation but in the explanation of the function, for example the explanation of the difference between exec_() and show() is in <a href=\"https://doc.qt.io/qt-5/qdialog.html#modal-dialogs\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5/qdialog.html#modal-dialogs</a>"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1553118946, "post_id": 55270648, "comment_id": 97272699, "body": "Qt uses intensively OOP and especially the inheritance, so if you analyze a class you should also read the base class, for example QMessageBox inherits from QDialog, and as you see the solution is in the base class."}], "owner": {"reputation": 155, "user_id": 8803595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa880fbc42995dae55a771801145856d?s=128&d=identicon&r=PG&f=1", "display_name": "maxutil", "link": "https://stackoverflow.com/users/8803595/maxutil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 9, "favorite_count": 0, "closed_date": 1553118443, "answer_count": 0, "score": 0, "last_activity_date": 1553118287, "creation_date": 1553118287, "question_id": 55270648, "link": "https://stackoverflow.com/questions/55270648/pyqt5-messagebox-closes-immediately", "closed_reason": "Duplicate", "title": "PyQt5 Messagebox closes immediately", "body": "<p>Here is my code:</p>\n\n<pre><code>import sys\nfrom PyQt5 import QtCore, QtGui, QtWidgets\nfrom PyQt5.QtWidgets import QFileDialog, QMessageBox\nfrom config_assign_ui import Ui_ConfigAssign\nimport pyodbc\nimport pandas as pd\n\nclass Main(QtWidgets.QMainWindow, Ui_ConfigAssign):\n    def __init__(self):\n        QtWidgets.QMainWindow.__init__(self)\n        self.setupUi(self)\n        self.combo_list()\n        self.ImportMapButton.clicked.connect(lambda: self.import_map())\n        self.ExceptButton.clicked.connect(lambda: self.except_file())\n\n    def except_file(self):\n        if self.ExceptCheckBox.isChecked():\n            print('will do stuff')\n        else:\n            mb = QMessageBox()\n            mb.setWindowTitle('Error')\n            mb.setText('Please check exception box first')\n            mb.setStandardButtons(QMessageBox.Ok)\n            mb.show()\n\nif __name__ == '__main__':\n    app = QtWidgets.QApplication(sys.argv)\n    window = Main()\n    window.show()\n    sys.exit(app.exec_())\n</code></pre>\n\n<p>The message box opens but closes immediately when I press the button. From my research, this message box is out of scope at the end of the <code>__init__</code>, but I'm not sure what this means. I tried changing one of the lines to:</p>\n\n<pre><code>mb = self.QMessageBox()\n</code></pre>\n\n<p>But that results in AttributeError: 'Main' object has no attribute 'QMessageBox'. Help is always appreciated. Thanks.</p>\n"}, {"tags": ["python", "list", "comparison"], "comments": [{"owner": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "edited": false, "score": 1, "creation_date": 1553118294, "post_id": 55270594, "comment_id": 97272492, "body": "Is there some reason these are wrapped in a redundant list? Also, is the order relevant?"}, {"owner": {"reputation": 24576, "user_id": 3767239, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f7cdefb47f96069d7add1222c70f3f70?s=128&d=identicon&r=PG&f=1", "display_name": "a_guest", "link": "https://stackoverflow.com/users/3767239/a-guest"}, "edited": false, "score": 0, "creation_date": 1553118925, "post_id": 55270594, "comment_id": 97272692, "body": "Now in your example <code>list_2</code> is not a subset of <code>list_1</code> but <code>list_2[0]</code> is a subset of <code>list_1[0]</code>. Is that intended?"}, {"owner": {"reputation": 3199, "user_id": 2005490, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/60f7a105be69d2445655481949141f7f?s=128&d=identicon&r=PG&f=1", "display_name": "Atihska", "link": "https://stackoverflow.com/users/2005490/atihska"}, "reply_to_user": {"reputation": 24576, "user_id": 3767239, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f7cdefb47f96069d7add1222c70f3f70?s=128&d=identicon&r=PG&f=1", "display_name": "a_guest", "link": "https://stackoverflow.com/users/3767239/a-guest"}, "edited": false, "score": 0, "creation_date": 1553122257, "post_id": 55270594, "comment_id": 97273751, "body": "@a_guest So list_1 has 2 elements and its second element matches the first element in list_2 so list_2 is a subset of list_1."}, {"owner": {"reputation": 24576, "user_id": 3767239, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f7cdefb47f96069d7add1222c70f3f70?s=128&d=identicon&r=PG&f=1", "display_name": "a_guest", "link": "https://stackoverflow.com/users/3767239/a-guest"}, "edited": false, "score": 0, "creation_date": 1553154476, "post_id": 55270594, "comment_id": 97281742, "body": "@Atihska Okay then, after this update to your example, <a href=\"https://stackoverflow.com/a/55270652/3767239\">my answer</a> is what you are looking for."}], "answers": [{"comments": [{"owner": {"reputation": 3199, "user_id": 2005490, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/60f7a105be69d2445655481949141f7f?s=128&d=identicon&r=PG&f=1", "display_name": "Atihska", "link": "https://stackoverflow.com/users/2005490/atihska"}, "edited": false, "score": 0, "creation_date": 1553118822, "post_id": 55270652, "comment_id": 97272665, "body": "It was an auto correct I believe that did not had list&lt;list&lt;list&gt;&gt; but something else. Please check my edits."}], "tags": [], "owner": {"reputation": 24576, "user_id": 3767239, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f7cdefb47f96069d7add1222c70f3f70?s=128&d=identicon&r=PG&f=1", "display_name": "a_guest", "link": "https://stackoverflow.com/users/3767239/a-guest"}, "is_accepted": true, "score": 3, "last_activity_date": 1553154697, "last_edit_date": 1553154697, "creation_date": 1553118300, "answer_id": 55270652, "question_id": 55270594, "link": "https://stackoverflow.com/questions/55270594/how-to-check-if-a-nested-list-is-a-subset-of-another-nested-list/55270652#55270652", "title": "How to check if a nested list is a subset of another nested list", "body": "<p>You can iterate over <code>list_2</code> and check whether its elements are contained in <code>list_1</code>:</p>\n\n<pre><code>list_1 = [[[1, 2], [2, 3]], [[3, 4], [5, 6]]]\nlist_2 = [[[3, 4], [5, 6]]]\n\nall(x in list_1 for x in list_2)  # Option 1.\nall(map(list_1.__contains__, list_2))  # Option 2.\n</code></pre>\n\n<p>The second version works for lists (and other types) but <code>a in b</code> is more general since it falls back on <code>b.__iter__</code> if <code>b.__contains__</code> is not defined.</p>\n"}, {"tags": [], "owner": {"reputation": 305833, "user_id": 68587, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7d9fd158e03cbde94f7e0b33b78222af?s=128&d=identicon&r=PG", "display_name": "John Kugelman", "link": "https://stackoverflow.com/users/68587/john-kugelman"}, "is_accepted": false, "score": 0, "last_activity_date": 1553118744, "creation_date": 1553118744, "answer_id": 55270733, "question_id": 55270594, "link": "https://stackoverflow.com/questions/55270594/how-to-check-if-a-nested-list-is-a-subset-of-another-nested-list/55270733#55270733", "title": "How to check if a nested list is a subset of another nested list", "body": "<p>Sets can't hold lists because sets rely on their elements being immutable and lists are mutable. If you switch the lists to tuples it'll work:</p>\n\n<pre><code>list_1 = [(1,2), (2,3), (3,4)]\nlist_2 = [(2,3), (3,4)]\n</code></pre>\n\n<pre><code>set(list_2) &lt; set(list_1)\n</code></pre>\n\n<p>You could also change the outer lists to tuples, but I left them as lists to make it clear which ones ought to be tuples.</p>\n"}, {"tags": [], "owner": {"reputation": 131, "user_id": 11229511, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-6YJnZkPkOD0/AAAAAAAAAAI/AAAAAAAAAAA/YjfCCww7H30/photo.jpg?sz=128", "display_name": "Hugo Delahaye", "link": "https://stackoverflow.com/users/11229511/hugo-delahaye"}, "is_accepted": false, "score": 0, "last_activity_date": 1553118872, "creation_date": 1553118872, "answer_id": 55270755, "question_id": 55270594, "link": "https://stackoverflow.com/questions/55270594/how-to-check-if-a-nested-list-is-a-subset-of-another-nested-list/55270755#55270755", "title": "How to check if a nested list is a subset of another nested list", "body": "<p>You have nested lists so a simple comparison won't work. Here is a function that checks if l2 is a subset of l1 :</p>\n\n<pre><code>list_1 = [[[1,2],[2,3],[3,4]]]\nlist_2 = [[[2,3],[3,4]]]\n\ndef comparison_nested_lists(l1,l2):\n    l1,l2 = l1[0],l2[0]\n    l2_in_l1 = True\n    for i in l2:\n        if i not in l1:\n            l2_in_l1 = False\n    return l2_in_l1\n\nprint comparison_nested_lists(list_1,list_2)  \n</code></pre>\n"}], "owner": {"reputation": 3199, "user_id": 2005490, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/60f7a105be69d2445655481949141f7f?s=128&d=identicon&r=PG&f=1", "display_name": "Atihska", "link": "https://stackoverflow.com/users/2005490/atihska"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "accepted_answer_id": 55270652, "answer_count": 3, "score": 0, "last_activity_date": 1553154697, "creation_date": 1553117979, "last_edit_date": 1553122750, "question_id": 55270594, "link": "https://stackoverflow.com/questions/55270594/how-to-check-if-a-nested-list-is-a-subset-of-another-nested-list", "title": "How to check if a nested list is a subset of another nested list", "body": "<p>I have 2 lists as <code>list&lt;list&lt;list&gt;&gt;</code> lists where I want to check if one of them is a subset of the other.</p>\n\n<pre><code>list_1 = [\n           [\n             [1,2],[2,3]\n           ],\n           [\n             [3,4],[5,6]\n           ]\n         ]\nlist_2 = [\n           [\n             [3,4], [5, 6]\n           ]\n         ]\n</code></pre>\n\n<p>So expected output is that as list2 has [[[3,4]]] which is a part of list_1 so it should be a subset.</p>\n\n<p>list_1 has 2 elements and its second element matches the first element in list_2 so list_2 is a subset of list_1. </p>\n\n<p>The comparison is not at the element level but at list level.</p>\n\n<p>I tried <code>set(list_2) &lt; set(list_1)</code> but results in <code>unhashable type: list</code>. How can I achieve the above comparison then?</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 21440, "user_id": 225020, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/6ae07ec5b34fce5a6c5437fbdab9f079?s=128&d=identicon&r=PG", "display_name": "Jab", "link": "https://stackoverflow.com/users/225020/jab"}, "edited": false, "score": 0, "creation_date": 1553118017, "post_id": 55270582, "comment_id": 97272400, "body": "Create a <code>__str()__</code> method for <code>Coupon</code>. Right now Python doesn&#39;t know how you want a Coupon formatted."}, {"owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 0, "creation_date": 1553118051, "post_id": 55270582, "comment_id": 97272412, "body": "Your <code>__repr__</code> contains an error. It fails to return a string representation of the object."}, {"owner": {"reputation": 24576, "user_id": 3767239, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f7cdefb47f96069d7add1222c70f3f70?s=128&d=identicon&r=PG&f=1", "display_name": "a_guest", "link": "https://stackoverflow.com/users/3767239/a-guest"}, "edited": false, "score": 2, "creation_date": 1553118060, "post_id": 55270582, "comment_id": 97272419, "body": "<code>__repr__</code> should return a string not print something. Also <code>Coupon</code> apparently lacks a <code>__str__</code> or <code>__repr__</code> method."}, {"owner": {"reputation": 495, "user_id": 7248145, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GSHZs.png?s=128&g=1", "display_name": "christk", "link": "https://stackoverflow.com/users/7248145/christk"}, "edited": false, "score": 0, "creation_date": 1553118182, "post_id": 55270582, "comment_id": 97272453, "body": "thats it , the Coupon class THANK YOU!!"}], "answers": [{"tags": [], "owner": {"reputation": 21440, "user_id": 225020, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/6ae07ec5b34fce5a6c5437fbdab9f079?s=128&d=identicon&r=PG", "display_name": "Jab", "link": "https://stackoverflow.com/users/225020/jab"}, "is_accepted": false, "score": 1, "last_activity_date": 1553118428, "creation_date": 1553118428, "answer_id": 55270677, "question_id": 55270582, "link": "https://stackoverflow.com/questions/55270582/get-objects-name-field-inside-a-list-inside-a-class/55270677#55270677", "title": "Get object&#39;s name field inside a list inside a class", "body": "<p>You need to return a string not print strings in <code>__repr__</code>.</p>\n\n<p>In Shopping cart your repr should be something like:</p>\n\n<pre><code>def __repr__(self):\n    return '\\n'.join(self.coupon_list)\n</code></pre>\n\n<p>And, I also suggest in <code>Coupon</code> making a <code>__str__</code> function to format what it prints, this is minimal but up to you:</p>\n\n<pre><code>def __str__(self):\n    return f\"ID: {self.cid} | Name: {self.cn} | Discount: {self.dis}\"\n</code></pre>\n"}], "owner": {"reputation": 495, "user_id": 7248145, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GSHZs.png?s=128&g=1", "display_name": "christk", "link": "https://stackoverflow.com/users/7248145/christk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1553118428, "creation_date": 1553117910, "question_id": 55270582, "link": "https://stackoverflow.com/questions/55270582/get-objects-name-field-inside-a-list-inside-a-class", "title": "Get object&#39;s name field inside a list inside a class", "body": "<p>i cant print the 'name' field of a custom object inside a list which is inside a class.</p>\n\n<p>from main i create the object:</p>\n\n<pre><code>SC = Shopping_Cart()\ncn = input(\"Give coupon name:\")\ncid = random.randint(0, 100)\ndis = input(\"Give discount:\")\ncp = Coupon(cid, cn, dis)\nSC.createCoupon(cp)\nSC.__repr__()\n</code></pre>\n\n<p>inside Shopping_Cart i have:</p>\n\n<pre><code>def __init__(self):\nself.cash = 500.0\nself.item_list = []\nself.coupon_list = []\nself.generic_discount = 0\n\ndef createCoupon(self, coupon):\n    self.coupon_list.append(coupon)\n\ndef __repr__(self):\n    for i in self.coupon_list:\n        print(str(i))\n</code></pre>\n\n<p>and what it prints is:\n&lt;<strong>main</strong>.Coupon object at 0x7faf20683e48></p>\n"}, {"tags": ["python", "excel", "python-3.x", "pandas"], "comments": [{"owner": {"reputation": 2995, "user_id": 667913, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/e038b48be307830687c8a71ff716ba07?s=128&d=identicon&r=PG", "display_name": "patrick", "link": "https://stackoverflow.com/users/667913/patrick"}, "edited": false, "score": 0, "creation_date": 1553118468, "post_id": 55270578, "comment_id": 97272551, "body": "Can you specify 1) what is the input 2) what is expected v current output?"}, {"owner": {"reputation": 438, "user_id": 578204, "user_type": "registered", "accept_rate": 36, "profile_image": "https://graph.facebook.com/1131441492/picture?type=large", "display_name": "Viral Parmar", "link": "https://stackoverflow.com/users/578204/viral-parmar"}, "reply_to_user": {"reputation": 2995, "user_id": 667913, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/e038b48be307830687c8a71ff716ba07?s=128&d=identicon&r=PG", "display_name": "patrick", "link": "https://stackoverflow.com/users/667913/patrick"}, "edited": false, "score": 0, "creation_date": 1553118666, "post_id": 55270578, "comment_id": 97272628, "body": "@patrick Answer -1 ) Input is multiple csv files and I am iterating over each at a time. Answer - 2 ) I want the data from every csv file into one excel file. But header should be written only once into my Excel file as each of my csv file is having header/ column name and I don&#39;t want those column names again and again into my excel file. I hope you got my point ?"}, {"owner": {"reputation": 2995, "user_id": 667913, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/e038b48be307830687c8a71ff716ba07?s=128&d=identicon&r=PG", "display_name": "patrick", "link": "https://stackoverflow.com/users/667913/patrick"}, "edited": false, "score": 0, "creation_date": 1553119596, "post_id": 55270578, "comment_id": 97272927, "body": "viral, thanks makes sense. let me think"}, {"owner": {"reputation": 438, "user_id": 578204, "user_type": "registered", "accept_rate": 36, "profile_image": "https://graph.facebook.com/1131441492/picture?type=large", "display_name": "Viral Parmar", "link": "https://stackoverflow.com/users/578204/viral-parmar"}, "reply_to_user": {"reputation": 2995, "user_id": 667913, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/e038b48be307830687c8a71ff716ba07?s=128&d=identicon&r=PG", "display_name": "patrick", "link": "https://stackoverflow.com/users/667913/patrick"}, "edited": false, "score": 0, "creation_date": 1553119783, "post_id": 55270578, "comment_id": 97272995, "body": "I tried this but didn&#39;t worked :  if ((pd.read_excel(filename).column) is None):             # write out the new sheet                          df.to_excel(writer, sheet_name, startrow=startrow, **to_excel_kwargs)         else:             df.to_excel(writer, sheet_name, startrow=startrow, **to_excel_kwargs, header=None)"}], "answers": [{"comments": [{"owner": {"reputation": 438, "user_id": 578204, "user_type": "registered", "accept_rate": 36, "profile_image": "https://graph.facebook.com/1131441492/picture?type=large", "display_name": "Viral Parmar", "link": "https://stackoverflow.com/users/578204/viral-parmar"}, "edited": false, "score": 0, "creation_date": 1553120762, "post_id": 55270960, "comment_id": 97273320, "body": "Code Posted into my Original Post"}, {"owner": {"reputation": 438, "user_id": 578204, "user_type": "registered", "accept_rate": 36, "profile_image": "https://graph.facebook.com/1131441492/picture?type=large", "display_name": "Viral Parmar", "link": "https://stackoverflow.com/users/578204/viral-parmar"}, "edited": false, "score": 0, "creation_date": 1553251676, "post_id": 55270960, "comment_id": 97324229, "body": "Code is now available !"}], "tags": [], "owner": {"reputation": 2995, "user_id": 667913, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/e038b48be307830687c8a71ff716ba07?s=128&d=identicon&r=PG", "display_name": "patrick", "link": "https://stackoverflow.com/users/667913/patrick"}, "is_accepted": false, "score": 0, "last_activity_date": 1553120154, "creation_date": 1553120154, "answer_id": 55270960, "question_id": 55270578, "link": "https://stackoverflow.com/questions/55270578/check-for-header-column-name-in-excel-file/55270960#55270960", "title": "Check for Header/Column name in Excel file", "body": "<p>The information is somewhat limited, but the below would do the trick. Instead of  manually setting up the <code>csv1</code>, <code>csv2</code> dataframes, you would obviously read them e.g. with <code>read_csv</code>. </p>\n\n<p>If this is not what you are looking for, pls post your current code for more info.</p>\n\n<pre><code>import pandas\n\ncols = [\"colname1\", \"colname2\", \"colname3\"]\nvals1 = [[1],[2],[3]]\nvals2 = [[1000, 10000],[2000, 6000],[3000, 4000]]\ncsv1 = pandas.DataFrame({k:v for k,v in zip(cols, vals1)})\nprint(csv1)\ncsv2 = pandas.DataFrame({k:v for k,v in zip(cols, vals2)})\nprint(csv2)\noutputdf = pandas.concat([csv1, csv2])\nprint(outputdf)\noutputdf.to_excel(\"test.xlsx\")\n</code></pre>\n\n<p>Output</p>\n\n<p><a href=\"https://i.stack.imgur.com/BZRmx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BZRmx.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 438, "user_id": 578204, "user_type": "registered", "accept_rate": 36, "profile_image": "https://graph.facebook.com/1131441492/picture?type=large", "display_name": "Viral Parmar", "link": "https://stackoverflow.com/users/578204/viral-parmar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 687, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1553120727, "creation_date": 1553117884, "last_edit_date": 1553120727, "question_id": 55270578, "link": "https://stackoverflow.com/questions/55270578/check-for-header-column-name-in-excel-file", "title": "Check for Header/Column name in Excel file", "body": "<p>I am iterating over many CSV files having header/ Column name in each and every CSV file,  and then putting data into a single Excel file . But every time the header / Column name gets copied in to Excel file although it gets copied in new line only, but the thing is, I only need header / Column Name only once into excel file.  </p>\n\n<p>FYI I am using Pandas to_excel() function to put data into the Excel file.</p>\n\n<p>Thanks in Advance.</p>\n\n<p>This is my Code:</p>\n\n<pre><code>import time\nfrom watchdog.observers import Observer\nfrom watchdog.events import FileSystemEventHandler\nimport pandas as pd\nfrom openpyxl import load_workbook\n\nclass Watcher:\n    DIRECTORY_TO_WATCH = \"/home/viral/Testing\"\ndef __init__(self):\n    self.observer = Observer()\n\ndef run(self):\n    event_handler = Handler()\n    self.observer.schedule(event_handler, self.DIRECTORY_TO_WATCH, recursive=True)\n    self.observer.start()\n    try:\n        while True:\n            time.sleep(5)\n    except:\n        self.observer.stop()\n        print(\"Error\")\n\n    self.observer.join()\n\n\nclass Handler(FileSystemEventHandler):\n\n@staticmethod\ndef on_any_event(event):\n    if event.is_directory:\n        return None\n\n    elif event.event_type == 'created':\n        # Take any action here when a file is first created.\n        print(\"Received created event - %s.\" % event.src_path)\n        df = pd.read_csv(event.src_path, header=0)\n        append_df_to_excel('/home/viral/myfile.xlsx', df, index = False)\n        # all_data = pd.read_excel('/home/viral/myfile.xls')\n        # combined = all_data.append(new_data)\n        # combined.to_excel('myfile.xlsx', header = False)\n\n    elif event.event_type == 'modified':\n        # Taken any action here when a file is modified.\n        print(\"Received modified event - %s.\" % event.src_path)\n\n@staticmethod\ndef append_df_to_excel(filename, df, sheet_name='Sheet1', startrow=None,\n                   truncate_sheet=False,\n                   **to_excel_kwargs):\n                   # ignore [engine] parameter if it was passed\n    if 'engine' in to_excel_kwargs:\n        to_excel_kwargs.pop('engine')\n\n    writer = pd.ExcelWriter(filename, engine='openpyxl')\n\n# Python 2.x: define [FileNotFoundError] exception if it doesn't exist\n    try:\n        FileNotFoundError\n    except NameError:\n        FileNotFoundError = IOError\n\n\n    try:\n        # try to open an existing workbook\n        writer.book = load_workbook(filename)\n\n        # get the last row in the existing Excel sheet\n        # if it was not specified explicitly\n        if startrow is None and sheet_name in writer.book.sheetnames:\n            startrow = writer.book[sheet_name].max_row\n\n        # truncate sheet\n        if truncate_sheet and sheet_name in writer.book.sheetnames:\n            # index of [sheet_name] sheet\n            idx = writer.book.sheetnames.index(sheet_name)\n            # remove [sheet_name]\n            writer.book.remove(writer.book.worksheets[idx])\n            # create an empty sheet [sheet_name] using old index\n            writer.book.create_sheet(sheet_name, idx)\n\n        # copy existing sheets\n        writer.sheets = {ws.title:ws for ws in writer.book.worksheets}\n    except FileNotFoundError:\n    # file does not exist yet, we will create it\n        pass\n\n    if startrow is None:\n        startrow = 0\n    #if ((pd.read_excel(filename).column) is None):\n        # write out the new sheet\n\n        df.to_excel(writer, sheet_name, startrow=startrow, **to_excel_kwargs)\n    #else:\n        #df.to_excel(writer, sheet_name, startrow=startrow, **to_excel_kwargs, header=None)\n\n    # save the workbook\n    writer.save()\n\nif __name__ == '__main__':\n    w = Watcher()\n    w.run()\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "matplotlib", "animation"], "answers": [{"tags": [], "owner": {"reputation": 67, "user_id": 8089710, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsilD.jpg?s=128&g=1", "display_name": "Tim_h11", "link": "https://stackoverflow.com/users/8089710/tim-h11"}, "is_accepted": true, "score": 0, "last_activity_date": 1553178544, "creation_date": 1553178544, "answer_id": 55282741, "question_id": 55270574, "link": "https://stackoverflow.com/questions/55270574/how-do-i-animate-a-function-with-a-nested-loop/55282741#55282741", "title": "How do I animate a function with a nested loop?", "body": "<p>I untimely just changed the nested loop for an array. Hence, I essentially just made the first for loop that controlled time to an array of time and it works for the animation plot. If anyone else encounters this problem, I have the solution that works down below.</p>\n\n<pre><code>style.use('seaborn-dark')\n\nfig = plt.figure()\n\nax = fig.add_subplot(111)\n\nax.legend(prop=dict(size=6))\npsi_xt_real, = ax.plot([], [], c='r')\npsi_xt_imag, = ax.plot([], [], c='b')\npsi_xt_abs, = ax.plot([], [], c='y')\nleft_wall_line = ax.axvline(0, c='k', linewidth=2)\nright_well_line = ax.axvline(x[-1], c='k', linewidth=2)\n\nx_min = min(Schrodinger.x[:,0]-5)\nx_max = max(Schrodinger.x[:,0]+5)\npsi_min = -A\npsi_max = A\nplt.xlim((x_min, x_max))\nplt.ylim((psi_min, psi_max))\n\ntitle = ax.set_title('')\nax.legend(prop=dict(size=12))\nax.set_xlabel('$x$')\nax.set_ylabel(r'$|\\psi(x)|$')\n\n######################################################################\n# Animate and save the plot\n\ndef init():\n    psi_xt_real.set_data([], [])\n    psi_xt_imag.set_data([], [])\n    psi_xt_abs.set_data([], [])\n\n    title.set_text('')\n\n\ndef animate(i):\n\n    time = np.linspace(0,total_time,dt).astype(complex)\n    psi_xt = np.zeros((len(x),1),dtype=complex).reshape(len(x),1)\n\n    for k in range(0, quantum_number):\n\n        psi_xt[:,0] = psi_xt[:,0] + (Schrodinger.Cn[0,k] *\n            Schrodinger.phi[:,k] * (np.exp((-1j *\n                Schrodinger.En[0,k] * i)/hbar)))\n\n        psi_xt_real.set_data(x, np.real(psi_xt))\n        psi_xt_imag.set_data(x, np.imag(psi_xt))\n        psi_xt_abs.set_data(x, np.abs(psi_xt))\n        title.set_text('t = %1' %time)\n\n\nani = matplotlib.animation.FuncAnimation(fig, animate,\ninit_func=init, frames=100)\n#ani.save('animation.gif', writer='imagemagick', fps=30)\n\nplt.show()\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 8089710, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsilD.jpg?s=128&g=1", "display_name": "Tim_h11", "link": "https://stackoverflow.com/users/8089710/tim-h11"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 167, "favorite_count": 0, "accepted_answer_id": 55282741, "answer_count": 1, "score": 1, "last_activity_date": 1553178544, "creation_date": 1553117861, "last_edit_date": 1553163507, "question_id": 55270574, "link": "https://stackoverflow.com/questions/55270574/how-do-i-animate-a-function-with-a-nested-loop", "title": "How do I animate a function with a nested loop?", "body": "<p>My current code will plot and then update the plot with the <code>plt.draw</code> command. It also erases the previous update with <code>plt.clf</code>. I want to turn this into an animation and save it as a video. However, all the examples online have the function <code>animate(i)</code>, but the function I define has already looped through everything. I think there is an easier way to go about this but I'm unable to see it. I have my attempt down below. </p>\n\n<pre><code>def schrodinger_equation(self, total_time):\n    count = 0\n    for j in range(0, total_time, dt):\n\n        time = j\n        self.psi_xt = np.zeros((len(x),1),dtype=complex).reshape(len(x),1)\n\n        for k in range(0, quantum_number):\n\n            self.psi_xt[:,0] = self.psi_xt[:,0] + (self.Cn[0,k]\n                * self.phi[:,k] * (np.exp((-1j * self.En[0,k] * time)/hbar)))\n\n            count += 1\n\n        style.use('seaborn-dark')\n\n        plt.plot(x, np.real(self.psi_xt),'r',\n            label='real' r'$\\psi(x,t)$', linewidth = 0.75)\n        plt.plot(x, np.imag(self.psi_xt),'b',\n            label=r'$imag \\psi(x,t)$', linewidth = 0.75)\n        plt.plot(x, np.abs(self.psi_xt),'y',\n            label=r'$|\\psi(x,t)|$', linewidth = 0.75)\n\n        x_min = min(self.x[:,0]-5)\n        x_max = max(self.x[:,0]+5)\n        psi_min = -A\n        psi_max = A\n        plt.xlim((x_min, x_max))\n        plt.ylim((psi_min, psi_max))\n\n        plt.legend(prop=dict(size=6))\n        psi_x_line, = plt.plot([], [], c='r')\n        V_x_line, = plt.plot([], [], c='k')\n        left_wall_line = plt.axvline(0, c='k', linewidth=2)\n        right_well_line = plt.axvline(x[-1], c='k', linewidth=2)\n\n        plt.pause(0.01)\n        plt.draw()\n        plt.clf()\n        plt.cla()\n\n    print('The number of iterations: ' + str(count))\n</code></pre>\n\n<p>My attempt </p>\n\n<pre><code>style.use('seaborn-dark')\n\nfig = plt.figure()\n\nax = fig.add_subplot(111)\n\nax.legend(prop=dict(size=6))\npsi_xt_real, = ax.plot([], [], c='r')\npsi_xt_imag, = ax.plot([], [], c='b')\npsi_xt_abs, = ax.plot([], [], c='y')\nleft_wall_line = ax.axvline(0, c='k', linewidth=2)\nright_well_line = ax.axvline(x[-1], c='k', linewidth=2)\n\ntitle = ax.set_title(\"\")\nax.legend(prop=dict(size=12))\nax.set_xlabel('$x$')\nax.set_ylabel(r'$|\\psi(x)|$')\n\ndef init():\n    psi_xt_real.set_data([], [])\n    psi_xt_imag.set_data([], [])\n    psi_xt_abs.set_data([], [])\n    return psi_xt_real,\n\ndef animate(i):\n\n    psi_xt_real.set_data(Schrodinger.x, np.real(Schrodinger.psi_xt))\n    psi_xt_imag.set_data(Schrodinger.x, np.imag(Schrodinger.psi_xt))\n    psi_xt_abs.set_data(Schrodinger.x, np.abs(Schrodinger.psi_xt))\n\n    return psi_xt_real,\n\nani = matplotlib.animation.FuncAnimation(fig,Schrodinger.schrodinger_equation, init_func=init, frames=10)\n#ani.save('animation.gif', writer='imagemagick', fps=30)\n\nplt.show()\n</code></pre>\n"}, {"tags": ["python", "anaconda"], "comments": [{"owner": {"reputation": 3115, "user_id": 2887760, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dcfc142aa3e67502448a0f91e40d08df?s=128&d=identicon&r=PG&f=1", "display_name": "Athena", "link": "https://stackoverflow.com/users/2887760/athena"}, "edited": false, "score": 0, "creation_date": 1553117874, "post_id": 55270552, "comment_id": 97272347, "body": "What happens when you open an Ancaonda Prompt and do <code>conda create -n your_env_name python=2.7 anaconda</code>?"}, {"owner": {"reputation": 254, "user_id": 6406875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a920c6e84ab675062a989f711d86819?s=128&d=identicon&r=PG&f=1", "display_name": "MBA Coder", "link": "https://stackoverflow.com/users/6406875/mba-coder"}, "reply_to_user": {"reputation": 3115, "user_id": 2887760, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dcfc142aa3e67502448a0f91e40d08df?s=128&d=identicon&r=PG&f=1", "display_name": "Athena", "link": "https://stackoverflow.com/users/2887760/athena"}, "edited": false, "score": 0, "creation_date": 1553173931, "post_id": 55270552, "comment_id": 97292198, "body": "@Ares It says &quot;CondaError: Solving environment: failed    &lt;new line&gt;    No writable package cache directories found in (&#39;...mypath\\\\Continuum\\\\anaconda3\\\\pkgs&#39;, &#39;...mypath\\\\conda\\\\conda\\\\pkgs&#39;)"}], "answers": [{"comments": [{"owner": {"reputation": 860, "user_id": 6500048, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/5634eef5de3ac3efe45ebd7aa4461650?s=128&d=identicon&r=PG&f=1", "display_name": "iFunction", "link": "https://stackoverflow.com/users/6500048/ifunction"}, "edited": false, "score": 1, "creation_date": 1567165647, "post_id": 55343650, "comment_id": 101892414, "body": "I disagree, this is not solved, I can&#39;t create new environments on a fresh install."}], "tags": [], "owner": {"reputation": 254, "user_id": 6406875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a920c6e84ab675062a989f711d86819?s=128&d=identicon&r=PG&f=1", "display_name": "MBA Coder", "link": "https://stackoverflow.com/users/6406875/mba-coder"}, "is_accepted": true, "score": 0, "last_activity_date": 1553535729, "creation_date": 1553535729, "answer_id": 55343650, "question_id": 55270552, "link": "https://stackoverflow.com/questions/55270552/anaconda-navigator-cannot-create-new-environment/55343650#55343650", "title": "Anaconda Navigator cannot create new environment", "body": "<p>The issue is somewhat resolved. I had two versions installed, so I uninstalled both of them and reinstalled Anaconda once. Now I can create new environments from the command line using the code from @Ares, but Anaconda Navigator won't even open. This is good enough for me for now.</p>\n"}, {"tags": [], "owner": {"reputation": 4236, "user_id": 702846, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/ad589b0712b73d8b534d9a7bf5e2f40d?s=128&d=identicon&r=PG", "display_name": "user702846", "link": "https://stackoverflow.com/users/702846/user702846"}, "is_accepted": false, "score": 7, "last_activity_date": 1571053848, "creation_date": 1571053848, "answer_id": 58376177, "question_id": 55270552, "link": "https://stackoverflow.com/questions/55270552/anaconda-navigator-cannot-create-new-environment/58376177#58376177", "title": "Anaconda Navigator cannot create new environment", "body": "<p>I also had a fresh anaconda-navigator installation on my mac which was not creating a new environment. The following solved the problem </p>\n\n<pre><code>conda update anaconda-navigator\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 10038036, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-c5mRqWqFKUk/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq1Kn5-nWwCXGPPdELoIYFK8tXBKWQ/mo/photo.jpg?sz=128", "display_name": "Thomas M&#252;ller", "link": "https://stackoverflow.com/users/10038036/thomas-m%c3%bcller"}, "is_accepted": false, "score": 1, "last_activity_date": 1593010837, "creation_date": 1593010837, "answer_id": 62558035, "question_id": 55270552, "link": "https://stackoverflow.com/questions/55270552/anaconda-navigator-cannot-create-new-environment/62558035#62558035", "title": "Anaconda Navigator cannot create new environment", "body": "<p>Might be late to the party, but for me it helped to run Anaconda Navigator as administrator (in windows 10).</p>\n"}, {"tags": [], "owner": {"reputation": 91, "user_id": 7704855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e23037a738aa7142c6f6535aab73331?s=128&d=identicon&r=PG&f=1", "display_name": "Trond.H.H", "link": "https://stackoverflow.com/users/7704855/trond-h-h"}, "is_accepted": false, "score": 1, "last_activity_date": 1593209655, "creation_date": 1593209655, "answer_id": 62603511, "question_id": 55270552, "link": "https://stackoverflow.com/questions/55270552/anaconda-navigator-cannot-create-new-environment/62603511#62603511", "title": "Anaconda Navigator cannot create new environment", "body": "<p>I had the same problem.\nI had created a new environment which I called wells, but removed it with &quot;Anaconda Navigator&quot; (wanted to learn more before continuing).\nTrying to re-create wells with Navigator failed.</p>\n<p>Testing using the command &quot;conda create --name wells&quot; from a powershell gave the error message:\nWARNING: A directory already exists at the target location\n'C:..my path..\\Anaconda3\\envs\\wells'\nbut it is not a conda environment.\nContinue creating environment (y/[n])?\nI responded &quot;n&quot; and removed manually the directory - this to check the Navigator.\nThat solved my Navigator - create environment - problem.\n(i.e. apparently a bug in the Navigator's remove environment function).</p>\n<p>Trond</p>\n"}], "owner": {"reputation": 254, "user_id": 6406875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a920c6e84ab675062a989f711d86819?s=128&d=identicon&r=PG&f=1", "display_name": "MBA Coder", "link": "https://stackoverflow.com/users/6406875/mba-coder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8643, "favorite_count": 0, "accepted_answer_id": 55343650, "answer_count": 4, "score": 5, "last_activity_date": 1593209655, "creation_date": 1553117711, "question_id": 55270552, "link": "https://stackoverflow.com/questions/55270552/anaconda-navigator-cannot-create-new-environment", "title": "Anaconda Navigator cannot create new environment", "body": "<p>I need to use Python at work and just installed Anaconda Navigator today. I am able to open the Navigator GUI without any problems. I am able to open the Create new environment prompt. I fill out the details and hit ok.</p>\n\n<p>Navigator creates a New tab for the environment I requested under the base(root) tab. At the bottom it says: \"Creating environment\" and there is a blue progress bar and a cancel button. It does this for a while then the new tab disappears and it no longer says creating environment at the bottom and the progress bar is gone.</p>\n\n<p>In the new environment prompt, it tells me where it will save the environment. I have gone to that folder and there is nothing there after the tab disappears.</p>\n\n<p>I am using Anaconda Navigator 1.9.2 on Windows 7 Enterprise. Since I am on my work computer, this is the only version of Anaconda we are allowed to use, so I can't update to the newest version. Although I need python version 2.7, I have tried creating a new environment for version 2.7, 3.5, 3.6 and 3.7(which are all of my options) just to see if it works for any of them and it does not. One time the creating environment didn't disappear, but it just kept going for an hour and nothing happened, I was trying python 3.6 at the time.</p>\n\n<p>I was able to load <a href=\"https://api.anaconda.org/\" rel=\"noreferrer\">https://api.anaconda.org/</a>, so I don't think my company is blocking the api. It returned this:</p>\n\n<pre><code>{\n\"api_docs_url\": \"https://api.anaconda.org/docs\", \n\"brand\": \"Anaconda Cloud\", \n\"conda_url\": \"https://conda.anaconda.org/\", \n\"main_url\": \"https://anaconda.org/\", \n\"ok\": 1, \n\"pypi_url\": \"https://pypi.anaconda.org/\", \n\"swagger_url\": \"https://api.anaconda.org/swagger.json\"\n}\n</code></pre>\n"}, {"tags": ["python", "arrays"], "comments": [{"owner": {"reputation": 2650, "user_id": 9803111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5be0dea611f7de0ed9d56cb97d2afa24?s=128&d=identicon&r=PG&f=1", "display_name": "Nathaniel", "link": "https://stackoverflow.com/users/9803111/nathaniel"}, "edited": false, "score": 0, "creation_date": 1553117862, "post_id": 55270526, "comment_id": 97272342, "body": "Can you post your data as text instead of in an image?"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 3132687, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000151518109/picture?type=large", "display_name": "fightclub", "link": "https://stackoverflow.com/users/3132687/fightclub"}, "edited": false, "score": 0, "creation_date": 1553177271, "post_id": 55270690, "comment_id": 97294394, "body": "Thank you Juan, your code helped me to rename the columns dynamically by month name."}], "tags": [], "owner": {"reputation": 3962, "user_id": 9462829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dd68e18954cab2275b2cc02845a37d9?s=128&d=identicon&r=PG&f=1", "display_name": "Juan C", "link": "https://stackoverflow.com/users/9462829/juan-c"}, "is_accepted": false, "score": 0, "last_activity_date": 1553118481, "creation_date": 1553118481, "answer_id": 55270690, "question_id": 55270526, "link": "https://stackoverflow.com/questions/55270526/how-to-unpivot-columns-in-pandas-and-name-the-months-dynamically/55270690#55270690", "title": "How to unpivot columns in pandas and name the months dynamically?", "body": "<p>This should do:</p>\n\n<pre><code>import datetime as dt\nimport calendar\n\nthis_month=dt.datetime.now().month\ndemand_columns=[i for i in df.columns if 'Demand' in i]\nmonth_list=[calendar.month_name[this_month+i] for i in range(len(demand_columns))]\ndic_month={col:month for col,month in zip(demand_columns,month_list)}\ndf.rename(columns=dic_month)\n</code></pre>\n\n<p>Line 1 extracts current month</p>\n\n<p>Line 2 extracts every column that has 'Demand' in its name</p>\n\n<p>Line 3 creates a list of Months from today's month to your last column's month and turns month as an integer into its month's name</p>\n\n<p>Line 4 maps columns to months</p>\n\n<p>Line 5 renames your columns.</p>\n\n<p>Edit: added answer with month name instead of number</p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 3132687, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000151518109/picture?type=large", "display_name": "fightclub", "link": "https://stackoverflow.com/users/3132687/fightclub"}, "edited": false, "score": 0, "creation_date": 1553177550, "post_id": 55271359, "comment_id": 97294567, "body": "Thank you Serge. There was an error at the &#39;months&#39; line. But the second part of your code helped me to unpivot the data. I may missed something here but thanks a ton."}], "tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": true, "score": 0, "last_activity_date": 1553122736, "creation_date": 1553122736, "answer_id": 55271359, "question_id": 55270526, "link": "https://stackoverflow.com/questions/55270526/how-to-unpivot-columns-in-pandas-and-name-the-months-dynamically/55271359#55271359", "title": "How to unpivot columns in pandas and name the months dynamically?", "body": "<p><code>pd.DateOffset</code> is nice to compute next months, and <code>stack</code> can convert columns to rows.</p>\n\n<p>So code could be:</p>\n\n<pre><code># compute month names:\ncols = [x for x in df.columns if x.startswith('Demand')]\ntoday = pd.Timestamp.now()\nmonths=[(today+pd.DateOffset(months=i)).month_name()\n        for i in range(len(cols))]\n\n# rename columns and stack:\ndf2 = pd.DataFrame(df.rename(columns=dict(zip(cols, months)))\n                   .set_index('StockCode').stack()).reset_index()\ndf2.columns = ['StockCode', 'Month', 'Value']\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 3132687, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000151518109/picture?type=large", "display_name": "fightclub", "link": "https://stackoverflow.com/users/3132687/fightclub"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 165, "favorite_count": 0, "accepted_answer_id": 55271359, "answer_count": 2, "score": -1, "last_activity_date": 1553122736, "creation_date": 1553117588, "question_id": 55270526, "link": "https://stackoverflow.com/questions/55270526/how-to-unpivot-columns-in-pandas-and-name-the-months-dynamically", "title": "How to unpivot columns in pandas and name the months dynamically?", "body": "<p>I need some help in converting the columns to rows and name the columns dynamically by month.</p>\n\n<p>Please see the attached <a href=\"https://i.stack.imgur.com/tRKwf.png\" rel=\"nofollow noreferrer\">raw_data image</a> </p>\n\n<p>For example: Let say the current month is March, the Demand00 month name would be March, Demand01 would be April and so on. If I run this same code in April, Demand00 column name should be named as April and Demand01 should be named as May and so on. </p>\n\n<p>This is my first post, I hope I gave you the relevant information to seek help, if i had missed anything please let me know. </p>\n\n<p>Thank you in advance for your help.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1553118025, "post_id": 55270525, "comment_id": 97272404, "body": "use <code>def replace(L, old_obj, new_obj):     for i, v in enumerate(L):     \tif v == old_obj:             L[i] = new_obj</code>"}, {"owner": {"reputation": 27625, "user_id": 32538, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/u8ueG.png?s=128&g=1", "display_name": "Kirk Strauser", "link": "https://stackoverflow.com/users/32538/kirk-strauser"}, "edited": false, "score": 0, "creation_date": 1553118320, "post_id": 55270525, "comment_id": 97272496, "body": "I don&#39;t think this is the same question as what it was marked as a duplicate of."}], "answers": [{"tags": [], "owner": {"reputation": 27625, "user_id": 32538, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/u8ueG.png?s=128&g=1", "display_name": "Kirk Strauser", "link": "https://stackoverflow.com/users/32538/kirk-strauser"}, "is_accepted": true, "score": 1, "last_activity_date": 1553119115, "creation_date": 1553119115, "answer_id": 55270798, "question_id": 55270525, "link": "https://stackoverflow.com/questions/55270525/ive-been-trying-to-do-replacel-old-obj-new-obj-but-i-can-figure-out-why-it/55270798#55270798", "title": "I&#39;ve been trying to do replace(L, old_obj, new_obj) but i can figure out why it wont return the correct code", "body": "<p>I think the first line of your function:</p>\n\n<pre><code>L=[]\n</code></pre>\n\n<p>is the first problem you're running into, and one that will mask the other errors here. Python isn't either call-by-value or call-by-reference - it's <a href=\"https://robertheaton.com/2014/02/09/pythons-pass-by-object-reference-as-explained-by-philip-k-dick/\" rel=\"nofollow noreferrer\">call-by-object-reference</a> which is subtly (but importantly) different. Even though you're passing in the <code>L</code> object as the first argument of your function, <code>L=[]</code> doesn't change that object. It creates a <em>new</em> empty list object and assigns the name <code>L</code> to that object. After that moment, whatever you happen to do to <code>L</code> will be lost forever as soon as the function returns. Even if you got the rest of your function working, you'd never know because the fruits of your labor would be lost.</p>\n\n<p>I'd suggest one of two approaches here:</p>\n\n<p>1: Mutate the <code>L</code> object in place.</p>\n\n<pre><code>def mutate_list(L, old_obj, new_obj):\n    for i, value in enumerate(L):\n        if value == old_obj:\n            L[i] = new_obj\n</code></pre>\n\n<p>Better in my opinion is:</p>\n\n<ol start=\"2\">\n<li>Build and return a new list object.</li>\n</ol>\n\n<pre><code>def return_new_list(L, old_obj, new_obj):\n    new_list = []\n    for value in L:\n        if value == old_obj:\n            new_list.append(new_obj)\n        else:\n            new_list.append(value)\n    return new_list\n</code></pre>\n\n<p>Once you become really comfortable with Python, you'd probably write that more like:</p>\n\n<pre><code>new_list = [value if value != old_obj else new_obj for value in L]\n</code></pre>\n\n<p>...but that's for another day.</p>\n"}], "owner": {"reputation": 3, "user_id": 11214630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835dbd82beef0f101dc0219bb68dd620?s=128&d=identicon&r=PG&f=1", "display_name": "OwtaCtrl321", "link": "https://stackoverflow.com/users/11214630/owtactrl321"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 55270798, "answer_count": 1, "score": -2, "last_activity_date": 1553126443, "creation_date": 1553117576, "last_edit_date": 1553126443, "question_id": 55270525, "link": "https://stackoverflow.com/questions/55270525/ive-been-trying-to-do-replacel-old-obj-new-obj-but-i-can-figure-out-why-it", "title": "I&#39;ve been trying to do replace(L, old_obj, new_obj) but i can figure out why it wont return the correct code", "body": "<pre><code>def replace(L, old_obj, new_obj):\n    L=[]\n    for i in enumerate(L):\n        if i ==old_obj:\n            L.replace(old_obj, new_obj)\n    return\n</code></pre>\n\n<p>I can't figure out what to do to make this code work. Am I missing something important that would allow this code to change? I want to make a list in L, then have a new object replace one in the list. for example <code>L=[1,2,1,2,3]. replace(L, 2, 'a')</code>. <code>L=[1,'a',1,'a',3]</code></p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 21440, "user_id": 225020, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/6ae07ec5b34fce5a6c5437fbdab9f079?s=128&d=identicon&r=PG", "display_name": "Jab", "link": "https://stackoverflow.com/users/225020/jab"}, "edited": false, "score": 0, "creation_date": 1553117608, "post_id": 55270507, "comment_id": 97272236, "body": "What output are you currently getting vs expected output?"}, {"owner": {"reputation": 10781, "user_id": 447901, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/11ea5dd4ad290e75422e32e1e340772e?s=128&d=identicon&r=PG", "display_name": "lit", "link": "https://stackoverflow.com/users/447901/lit"}, "edited": false, "score": 0, "creation_date": 1553117822, "post_id": 55270507, "comment_id": 97272325, "body": "Are you setting <code>newline</code> to a zero-length string?"}, {"owner": {"reputation": 162, "user_id": 3775661, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100006220543615/picture?type=large", "display_name": "Ben2014", "link": "https://stackoverflow.com/users/3775661/ben2014"}, "edited": false, "score": 0, "creation_date": 1553119288, "post_id": 55270507, "comment_id": 97272817, "body": "I expected a as a tuple, since it returned [lastname, fistname], when I print(a). However only a[0] is available which is the lastname. When I tried to print(a[1], it threw error saying index out of range."}], "answers": [{"tags": [], "owner": {"reputation": 2650, "user_id": 9803111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5be0dea611f7de0ed9d56cb97d2afa24?s=128&d=identicon&r=PG&f=1", "display_name": "Nathaniel", "link": "https://stackoverflow.com/users/9803111/nathaniel"}, "is_accepted": false, "score": 1, "last_activity_date": 1553117670, "creation_date": 1553117670, "answer_id": 55270541, "question_id": 55270507, "link": "https://stackoverflow.com/questions/55270507/how-to-read-csv-field-with-comma-and-split-string-in-the-field-to-a-list/55270541#55270541", "title": "How to read csv field with comma and split string in the field to a list?", "body": "<p>You might try this:</p>\n\n<pre><code>import pandas as pd\n\ndf = pd.read_csv('testfile.csv')\n</code></pre>\n\n<p>This will read in your csv file into a data frame, and you can access the columns and convert them to lists like this:</p>\n\n<pre><code>df['Full Name'].tolist()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 162, "user_id": 3775661, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100006220543615/picture?type=large", "display_name": "Ben2014", "link": "https://stackoverflow.com/users/3775661/ben2014"}, "edited": false, "score": 0, "creation_date": 1553118743, "post_id": 55270577, "comment_id": 97272648, "body": "I tried print(row[2]) it returned &#39;lastname, firstname&#39; which is correct. What I am trying to do is to split row[2] into tuple or list. When I print(row[2].split(sep=&#39;, &#39;) it returned [lastname, firstname] which is as expected either. Any idea?"}, {"owner": {"reputation": 428, "user_id": 11180560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a11d081384346b89f9a85d12993e60c6?s=128&d=identicon&r=PG&f=1", "display_name": "SerAlejo", "link": "https://stackoverflow.com/users/11180560/seralejo"}, "reply_to_user": {"reputation": 162, "user_id": 3775661, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100006220543615/picture?type=large", "display_name": "Ben2014", "link": "https://stackoverflow.com/users/3775661/ben2014"}, "edited": false, "score": 0, "creation_date": 1553119181, "post_id": 55270577, "comment_id": 97272777, "body": "I don&#39;t understand exactly what you are expecting. How should the output of a[2] look like? What you have to do for sure is skipping the header line by using &quot;next(reader, None)&quot; directly after you created your reader"}], "tags": [], "owner": {"reputation": 428, "user_id": 11180560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a11d081384346b89f9a85d12993e60c6?s=128&d=identicon&r=PG&f=1", "display_name": "SerAlejo", "link": "https://stackoverflow.com/users/11180560/seralejo"}, "is_accepted": false, "score": 0, "last_activity_date": 1553117881, "creation_date": 1553117881, "answer_id": 55270577, "question_id": 55270507, "link": "https://stackoverflow.com/questions/55270507/how-to-read-csv-field-with-comma-and-split-string-in-the-field-to-a-list/55270577#55270577", "title": "How to read csv field with comma and split string in the field to a list?", "body": "<p>The problem is your are using \",\" as a delimiter, but your \"Last First Name\" Column also contains commas.</p>\n\n<p>In this line of code:</p>\n\n<pre><code>a = row[2].split(sep=\", \")\n</code></pre>\n\n<p>you are trying to separate the first name from the last name and assume it returns a tuple which you are trying to display here:\n    print(a[1])</p>\n\n<p><strong>The Problem</strong> is a will not be a tuple, because of the comma thats inside of this column. Instead there will be a row[3], in your case \"Smith\" will be in row[2] and \"John\" in row[3]. <strong>To avoid this, use a different delimiter</strong>.</p>\n"}, {"comments": [{"owner": {"reputation": 2650, "user_id": 9803111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5be0dea611f7de0ed9d56cb97d2afa24?s=128&d=identicon&r=PG&f=1", "display_name": "Nathaniel", "link": "https://stackoverflow.com/users/9803111/nathaniel"}, "edited": false, "score": 0, "creation_date": 1553190291, "post_id": 55283553, "comment_id": 97302511, "body": "No problem! Feel free to accept the answer if it helped you."}], "tags": [], "owner": {"reputation": 162, "user_id": 3775661, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100006220543615/picture?type=large", "display_name": "Ben2014", "link": "https://stackoverflow.com/users/3775661/ben2014"}, "is_accepted": true, "score": 0, "last_activity_date": 1553180875, "creation_date": 1553180875, "answer_id": 55283553, "question_id": 55270507, "link": "https://stackoverflow.com/questions/55270507/how-to-read-csv-field-with-comma-and-split-string-in-the-field-to-a-list/55283553#55283553", "title": "How to read csv field with comma and split string in the field to a list?", "body": "<p>Using pandas the same way I coded with csv works very well. Thanks Nathaniel.</p>\n\n<pre><code>import pandas as pd\ndf = pd.read_csv('testfile.csv')\na = df['Last First Name'].tolist()\nfor row in a:\n    b = row.split(', ')\n    print(b[1])\n</code></pre>\n"}], "owner": {"reputation": 162, "user_id": 3775661, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100006220543615/picture?type=large", "display_name": "Ben2014", "link": "https://stackoverflow.com/users/3775661/ben2014"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 55283553, "answer_count": 3, "score": -1, "last_activity_date": 1553181048, "creation_date": 1553117505, "last_edit_date": 1553181048, "question_id": 55270507, "link": "https://stackoverflow.com/questions/55270507/how-to-read-csv-field-with-comma-and-split-string-in-the-field-to-a-list", "title": "How to read csv field with comma and split string in the field to a list?", "body": "<p>I am trying to read csv and split some output string with delimiter into a list, but when I tried to read the list using array, it threw error saying \"list index out of range\". The list should have 2 elements. Please, see attached codes. Please, kindly help me pointing out what was wrong with the code. The index 0 works just fine.</p>\n\n<p>The csv file look like this:\nID, Full Name, Last First Name</p>\n\n<p>1, John Smith, \"Smith, Jonh\"</p>\n\n<p>2, Camil Johnson, \"Johnson, Camil\"</p>\n\n<p>3, Bang Dong, \"Dong, Bang\"</p>\n\n<p>4, Charles Simpson, \"Simpson, Charles\"</p>\n\n<pre><code>import csv\nwith open('testfile.csv', 'r', newline='') as f:\n    reader = csv.reader(f, delimiter=',')\n    for row in reader:\n        # print(row)\n        # print (row[2])\n        a = row[2].split(sep=\", \")\n        print(a[1])\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/HIDw7.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HIDw7.jpg\" alt=\"Sample csv file\"></a></p>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1553117889, "post_id": 55270503, "comment_id": 97272354, "body": "Something like <code>arr = np.meshgrid(range(31), np.ones(51)); print(arr[0]*arr[1])</code> as a starting point, you&#39;ll need to work out how to get the increments in 2&#39;s"}, {"owner": {"reputation": 2288, "user_id": 8408080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b487ee532f07476aea6610f459b3fdaf?s=128&d=identicon&r=PG&f=1", "display_name": "user8408080", "link": "https://stackoverflow.com/users/8408080/user8408080"}, "edited": false, "score": 0, "creation_date": 1553118020, "post_id": 55270503, "comment_id": 97272401, "body": "The shape of this array is 31x51, not 30x50"}], "answers": [{"tags": [], "owner": {"reputation": 627, "user_id": 5458298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ab18e73f8e98d0204bcf08281df0740?s=128&d=identicon&r=PG&f=1", "display_name": "Ardweaden", "link": "https://stackoverflow.com/users/5458298/ardweaden"}, "is_accepted": false, "score": 0, "last_activity_date": 1553119501, "last_edit_date": 1553119501, "creation_date": 1553117925, "answer_id": 55270585, "question_id": 55270503, "link": "https://stackoverflow.com/questions/55270503/assigning-values-to-matrix/55270585#55270585", "title": "Assigning values to matrix", "body": "<pre><code>ij_array = np.repeat(2*np.arange(51)[np.newaxis,:],31,axis=0)\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 8303799, "user_type": "registered", "profile_image": "https://graph.facebook.com/3543665671318/picture?type=large", "display_name": "fallfish", "link": "https://stackoverflow.com/users/8303799/fallfish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1553119913, "creation_date": 1553117468, "last_edit_date": 1553119913, "question_id": 55270503, "link": "https://stackoverflow.com/questions/55270503/assigning-values-to-matrix", "title": "Assigning values to matrix", "body": "<p>I have created a 31x51 matrix using:</p>\n\n<pre><code>ij_array = np.zeros((31,51))\n</code></pre>\n\n<p>I would like to assign values to each of the matrix positions based on the value of the column. For example, I would like it to be 2*(column value) which goes from 0 to 50. So the first column would be full of 0s, second would be 2s, third would be 4s, etc. </p>\n\n<p>Is there a way to do this in Python?</p>\n"}, {"tags": ["python", "python-3.x", "discord.py", "discord.py-rewrite"], "answers": [{"tags": [], "owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "is_accepted": false, "score": 3, "last_activity_date": 1553124817, "creation_date": 1553124817, "answer_id": 55271656, "question_id": 55270496, "link": "https://stackoverflow.com/questions/55270496/how-to-convert-a-string-to-a-user-discord-py/55271656#55271656", "title": "How to convert a string to a user discord.py", "body": "<p>When the <code>command</code> decorator sees an annotation on one of the arguments to the decorated coroutine, it knows to either use the correct <a href=\"https://discordpy.readthedocs.io/en/rewrite/ext/commands/commands.html#converters\" rel=\"nofollow noreferrer\">converter</a> or directly apply the annotation as a callable before the argument is passed to the underlying coroutine. </p>\n\n<p>You can create your own <a href=\"https://discordpy.readthedocs.io/en/rewrite/ext/commands/api.html#discord.ext.commands.MemberConverter\" rel=\"nofollow noreferrer\"><code>MemberConverter</code></a> objects and use them to convert strings to <code>Member</code>s by using their <code>convert</code> coroutines:</p>\n\n<pre><code>from discord.ext.commands import MemberConverter\n\n...\n\nconverter = MemberConverter()\nmember = await converter.convert(ctx, file[1:])\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11234527, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-kkfHbpqpFH8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rekbhwcgjdGiBclxnviUj3t87Ajtg/mo/photo.jpg?sz=128", "display_name": " kxpoor", "link": "https://stackoverflow.com/users/11234527/kxpoor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3086, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1553124817, "creation_date": 1553117422, "last_edit_date": 1553124172, "question_id": 55270496, "link": "https://stackoverflow.com/questions/55270496/how-to-convert-a-string-to-a-user-discord-py", "title": "How to convert a string to a user discord.py", "body": "<p>I'm trying to convert a string to a user so I can dm them. Here's my current code:</p>\n\n<pre><code>    @bot.command(pass_context=True)\nasync def partnerwarn(ctx):\nfile_names = glob.glob(\"p*\")\nfor file in file_names:\n    f = open(file, 'r')\n    content = f.read()\n    f.close()\n    member = file[1:]      \n    await bot.send_message(member : discord.User, \"You've had under 7 partners! This is a warning, please make sure you actively partner!\")\n    print(\"Warned!\")\n    await bot.reply(\"**\" + file[1:] + \" was warned!**\")\n</code></pre>\n\n<p>It doesn't work because <code>member : discord.User</code> is invalid syntax where it currently is. How should I fix this?</p>\n"}, {"tags": ["python", "pandas", "xlsxwriter"], "answers": [{"tags": [], "owner": {"reputation": 642, "user_id": 5022051, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/E313s.jpg?s=128&g=1", "display_name": "Teddy", "link": "https://stackoverflow.com/users/5022051/teddy"}, "is_accepted": true, "score": 1, "last_activity_date": 1553119331, "creation_date": 1553119331, "answer_id": 55270825, "question_id": 55270475, "link": "https://stackoverflow.com/questions/55270475/xlsxwriter-write-data-frame-starting-from-specific-cell/55270825#55270825", "title": "XlsxWriter write data frame starting from specific cell", "body": "<p>You need to shift things around. I would also recommend to read the <a href=\"https://xlsxwriter.readthedocs.io/working_with_pandas.html\" rel=\"nofollow noreferrer\">XlsWritter documentation</a> on how to use it with pandas.</p>\n\n<pre><code>writer = pd.ExcelWriter('Test.xlsx', engine='xlsxwriter')\n\nworkbook = writer.book\n\nresult.to_excel(writer, sheet_name='Sheet1', index=False, startrow=6, startcol=3) # Start from D7.\n\nworksheet = writer.sheets['Sheet1']\n\ndatetime_format = workbook.add_format({\n    'font_size': 12\n})\nworksheet.write('C2', datetime.datetime.now().strftime(\"%Y-%m-%d %H:%M\"), datetime_format)\n\nwriter.save()\n</code></pre>\n\n<p>First, we create our writer object using <code>pd.ExcelWriter()</code> and passing <code>xlswriter</code> as the engine. Once we have our writer we can access our workbook using the <code>.book</code> class vriable. At this time, we can write our data into our workbook using <code>df.to_excel()</code>. We will use the <code>sheet_name</code> argument of <code>to_excel</code> to create and name our worksheet. At this point we can acess our worksheet using the <code>.sheets</code> class variable and passing our sheetname as a key - in our case <code>Sheet1</code>.</p>\n\n<p>From there you can write additional values to your sheet with or without using a pandas object - as shown in the code below.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9128740"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 382, "favorite_count": 0, "accepted_answer_id": 55270825, "answer_count": 1, "score": 0, "last_activity_date": 1553119331, "creation_date": 1553117343, "question_id": 55270475, "link": "https://stackoverflow.com/questions/55270475/xlsxwriter-write-data-frame-starting-from-specific-cell", "title": "XlsxWriter write data frame starting from specific cell", "body": "<p>I'm using <code>xlsxwriter</code> to create an Excel file. Currently, I'm doing something like this:</p>\n\n<pre><code>import datetime\nimport pandas as pd\nimport xlsxwriter\n\nworkbook = xlsxwriter.Workbook('Test.xlsx')\nworksheet = workbook.add_worksheet()\n\ndatetime_format = workbook.add_format({\n    'font_size': 12\n})\nworksheet.write('C2', datetime.datetime.now().strftime(\"%Y-%m-%d %H:%M\"), datetime_format)\n\n# Rest removed for brevity. I simply have many stuff that \n# I manually write to make the design as I want.\n\nworkbook.close()\n\nwriter = pd.ExcelWriter('Test.xlsx', engine='xlsxwriter')\nresult.to_excel(writer, startrow=6, startcol=3) # Start from D7.\nwriter.save()\n</code></pre>\n\n<p>Now, this seems to rewrite everything that I previously wrote manually using <code>xlsxwriter</code>. Also, I noticed that <code>xlsxwriter</code> does not have support by default to write data frames, am I right? How can I combine <code>xlsxwriter</code> and <code>pandas</code> to manually write some stuff to do Excel sheet, and then later to write all the data frame stuff starting from the specific cell?</p>\n"}, {"tags": ["python", "tensorflow", "gamma", "srgb"], "comments": [{"owner": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1553139193, "post_id": 55270462, "comment_id": 97277688, "body": "You can approximate it very closely with <code>x^(1&#47;2.2)</code> without needing any conditionals."}], "answers": [{"tags": [], "owner": {"reputation": 5550, "user_id": 7389608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QKeuI.jpg?s=128&g=1", "display_name": "giser_yugang", "link": "https://stackoverflow.com/users/7389608/giser-yugang"}, "is_accepted": false, "score": 1, "last_activity_date": 1553135486, "creation_date": 1553135486, "answer_id": 55272940, "question_id": 55270462, "link": "https://stackoverflow.com/questions/55270462/srgb-gamma-curve-implement-in-tensorflow/55272940#55272940", "title": "sRGB gamma curve implement in tensorflow", "body": "<p>Maybe you need <code>tf.where()</code> and <code>tf.greater()</code>. For example:</p>\n\n<pre><code>import tensorflow as tf\nimport numpy as np\n\nimage = np.random.random_sample(size=(2,3,3,1))/100\nprint(image)\n\nimage_tf = tf.placeholder(shape=(None,3,3,1),dtype=tf.float32)\n\nnew_image = tf.where(tf.greater(image_tf,0.0031308)\n                     ,1.055*tf.pow(image_tf,1/2.4) - 0.055\n                     ,image_tf*12.95)\n\nwith tf.Session() as sess:\n    print(sess.run(new_image,feed_dict={image_tf:image}))\n# image\n[[[[0.0048715 ]\n   [0.00472688]\n   [0.00138391]]\n\n  [[0.00848472]\n   [0.00055767]\n   [0.00835372]]\n\n  [[0.00872362]\n   [0.00390934]\n   [0.00795842]]]\n\n\n [[[0.00756143]\n   [0.00494474]\n   [0.00201968]]\n\n  [[0.00350234]\n   [0.0056558 ]\n   [0.00602147]]\n\n  [[0.00692543]\n   [0.0045199 ]\n   [0.00012196]]]]\n# new image\n[[[[0.05975685]\n   [0.05832487]\n   [0.01792167]]\n\n  [[0.08960549]\n   [0.0072218 ]\n   [0.08867098]]\n\n  [[0.09128823]\n   [0.04970375]\n   [0.08579818]]]\n\n\n [[[0.08282798]\n   [0.06047264]\n   [0.02615486]]\n\n  [[0.04501574]\n   [0.06712133]\n   [0.07035124]]\n\n  [[0.07787357]\n   [0.05623017]\n   [0.00157937]]]]\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 10332319, "user_type": "registered", "profile_image": "https://graph.facebook.com/1153782184666447/picture?type=large", "display_name": "Jiaju Orange Yue", "link": "https://stackoverflow.com/users/10332319/jiaju-orange-yue"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1553135486, "creation_date": 1553117266, "question_id": 55270462, "link": "https://stackoverflow.com/questions/55270462/srgb-gamma-curve-implement-in-tensorflow", "title": "sRGB gamma curve implement in tensorflow", "body": "<p>I need to implement sRGB gamma curve in tensorflow. But I can not compute the element wise condition in tensorflow. </p>\n\n<p>In sRGB curve, if the value is less or equal than 0.0031308, it is a linear operation: x*12.95\nIf the value is greater than 0.0031308, it is a gamma correction:\n1.055*x^(1/2.4) - 0.055</p>\n\n<p>I tried to use tf.cond(image > 0.0031308, function1, function2) but it returned error. I appreciate very much if anyone can help me out!!!  </p>\n"}, {"tags": ["python", "apache-spark", "pyspark", "apache-spark-sql"], "comments": [{"owner": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "edited": false, "score": 0, "creation_date": 1553120989, "post_id": 55270447, "comment_id": 97273381, "body": "You could union a row to dataframe returned by describe. Something like: <code>df.describe().union(df.select(lit(&quot;cust_stat1&quot;).alias(&quot;summa&zwnj;&#8203;ry&quot;), *[myCustomerFunction(c).alias(c) for c in df.columns])</code>. Hard to say more without a <a href=\"https://stackoverflow.com/questions/48427185/how-to-make-good-reproducible-apache-spark-examples\">reproducible example</a> that shows exactly what types of custom stats you want to compute."}, {"owner": {"reputation": 1382, "user_id": 1857125, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/247ee5061b93a3cfd724b862e6a0590f?s=128&d=identicon&r=PG", "display_name": "Kenny", "link": "https://stackoverflow.com/users/1857125/kenny"}, "reply_to_user": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "edited": false, "score": 0, "creation_date": 1553137213, "post_id": 55270447, "comment_id": 97277255, "body": "@Pault: Just add some info to my question. I am not sure your approach will parallellize the column processing. <i>for</i> gives that away. The parallel processing is crucial,"}, {"owner": {"reputation": 88, "user_id": 10532103, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UYZSJggNnKs/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbCMXGVcubTCtTvy2TLgKAG4Zr7DfQ/mo/photo.jpg?sz=128", "display_name": "ookboy24", "link": "https://stackoverflow.com/users/10532103/ookboy24"}, "edited": false, "score": 0, "creation_date": 1553143953, "post_id": 55270447, "comment_id": 97278616, "body": "df.describe takes a list of the stats you want it to return and empty argument returns all stats. To get aggregate stats in parallel fashion use UDAFs, finally you can union the two dataframes to get a dataframe in the format you want"}, {"owner": {"reputation": 1382, "user_id": 1857125, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/247ee5061b93a3cfd724b862e6a0590f?s=128&d=identicon&r=PG", "display_name": "Kenny", "link": "https://stackoverflow.com/users/1857125/kenny"}, "edited": false, "score": 0, "creation_date": 1553267675, "post_id": 55270447, "comment_id": 97333787, "body": "How would you simulate panda_udf in Spark&lt;=2.2 (due to company&#39;s infra). I would like to parallel process columns, and in each column make use of Spark to parallel process rows. Let&#39;s say I have certain stat that I want to apply per column. collect_list gives list, is it efficient to convert to new Spark DF ? def myFunc(d_list): sdf = spark.createDataframe(d_list); return sdf.map(...).reduceByKey(...); and called on two columns df.agg(collect_list(&#39;col1&#39;).alias(&#39;col1&#39;),collect_list(&#39;col2&zwnj;&#8203;&#39;).alias(&#39;col2&#39;) ) .withColumn(&#39;col1_&#39;, myUdf(&#39;col1&#39;)).withColumn(&#39;col2_&#39;, myUdf(&#39;col2&#39;))"}], "owner": {"reputation": 1382, "user_id": 1857125, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/247ee5061b93a3cfd724b862e6a0590f?s=128&d=identicon&r=PG", "display_name": "Kenny", "link": "https://stackoverflow.com/users/1857125/kenny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 433, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1553137133, "creation_date": 1553117208, "last_edit_date": 1553137133, "question_id": 55270447, "link": "https://stackoverflow.com/questions/55270447/pyspark-apply-parallel-summary-function-to-all-columns", "title": "Pyspark apply parallel summary function to all columns", "body": "<p>I would like to apply summary and customized stats functions to all columns, independently and <em>in parallel</em>. </p>\n\n<pre><code>from pyspark.sql.functions import rand, randn\ndf = sqlContext.range(0, 10).withColumn('uniform', rand(seed=10)).withColumn('normal', randn(seed=27))\n</code></pre>\n\n<p>I have tried to look for answers such as <a href=\"https://stackoverflow.com/questions/50414300/efficient-column-processing-in-pyspark\">here</a> and <a href=\"https://changhsinlee.com/pyspark-udf/\" rel=\"nofollow noreferrer\">here</a>, but they seem to be giving one value for each row. It seems that <code>udf</code> and <code>withColumns</code> are solutions, but I am not sure how to put together to achieve something similar to this :  </p>\n\n<pre><code>df.describe().show()\n+-------+------------------+-------------------+--------------------+\n|summary|                id|            uniform|              normal|\n+-------+------------------+-------------------+--------------------+\n|  count|                10|                 10|                  10|\n|   mean|               4.5| 0.5215336029384192|-0.01309370117407197|\n| stddev|2.8722813232690143|  0.229328162820653|  0.5756058014772729|\n|    min|                 0|0.19657711634539565| -0.7195024130068081|\n|    max|                 9| 0.9970412477032209|  1.0900096472044518|\n+-------+------------------+-------------------+--------------------+\n</code></pre>\n\n<p>Let's say we have a couple of dummy functions for summary</p>\n\n<pre><code>def mySummary1(df_1_col_only):\n   return mean(df_1_col_only)*second_largest(df_1_col_only)\n\ndef mySummary2(df_1_col_only):\n   return 10th_decile(df_1_col_only)/median(df_1_col_only)\n</code></pre>\n\n<p>so that when applying in parallel to all columns </p>\n\n<pre><code>df.something_that_allow_spark_parallel_processing_all_columns(column_list, [mean, mySummary1, mySummary2]) \n</code></pre>\n\n<p>and produce (preferably the following, or the transposed)</p>\n\n<pre><code>+-------+------------------+-------------------+--------------------+\n    |col_name|            mean|       mySummary1|            mySummary2|\n    +-------+------------------+-------------------+--------------------+\n    |  id|                10|                 10|                  10|\n    |uniform|               4.5| 0.5215336029384192|-0.01309370117407197|\n    | normal|2.8722813232690143|  0.229328162820653|  0.5756058014772729|\n     +-------+------------------+-------------------+--------------------+\n</code></pre>\n\n<p>I would want to utilize the parallel power of Spark to parallelize in both columns list and inside each <em>mySummaryxxx</em> functions.</p>\n\n<p>Another question is what should my df_1_col_only be like for efficiency ? 1-column Spark dataframe ? Is there a way of not copying of duplicating the original dataframe into a bunch of 1-column dataframe ?</p>\n"}, {"tags": ["python", "machine-learning", "scikit-learn", "cross-validation"], "answers": [{"tags": [], "owner": {"reputation": 12519, "user_id": 423926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65539c07af4918433a89bcb298d75ca7?s=128&d=identicon&r=PG", "display_name": "mujjiga", "link": "https://stackoverflow.com/users/423926/mujjiga"}, "is_accepted": false, "score": 4, "last_activity_date": 1553145817, "last_edit_date": 1553145817, "creation_date": 1553118188, "answer_id": 55270628, "question_id": 55270431, "link": "https://stackoverflow.com/questions/55270431/how-to-correctly-perform-cross-validation-in-scikit-learn/55270628#55270628", "title": "How to correctly perform cross validation in scikit-learn?", "body": "<p><code>model_1</code> is correct. </p>\n\n<p><a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.model_selection.cross_validate.html\" rel=\"nofollow noreferrer\">https://scikit-learn.org/stable/modules/generated/sklearn.model_selection.cross_validate.html</a></p>\n\n<p><code>cross_validate(estimator, X, y=None, groups=None, scoring=None, cv=\u2019warn\u2019, n_jobs=None, verbose=0, fit_params=None, pre_dispatch=\u20182*n_jobs\u2019, return_train_score=\u2019warn\u2019, return_estimator=False, error_score=\u2019raise-deprecating\u2019)</code></p>\n\n<p>where </p>\n\n<p><code>estimator</code> is an object implementing \u2018fit\u2019. It will be called to fit the model on the train folds. </p>\n\n<p><code>cv</code>: is a cross-validation generator that is used to generated train and test splits.</p>\n\n<p>If you follow the example in the sklearn docs</p>\n\n<p><code>cv_results = cross_validate(lasso, X, y, cv=3, return_train_score=False)\ncv_results['test_score']\narray([0.33150734, 0.08022311, 0.03531764])</code></p>\n\n<p>You can see that the model <code>lasso</code> is fitted 3 times once for each fold on train splits and also validated 3 times on test splits. You can see that the test score on validation data are reported. </p>\n\n<h1>Cross validation of Keras models</h1>\n\n<p>Keras provides wrapper which makes the keras models compatible with sklearn cross_validatation method. You have to wrap the keras model using <code>KerasClassifier</code></p>\n\n<pre><code>from keras.wrappers.scikit_learn import KerasClassifier\nfrom sklearn.model_selection import KFold, cross_validate\nfrom keras.models import Sequential\nfrom keras.layers import Dense\nimport numpy as np\n\ndef get_model():\n    model = Sequential()\n    model.add(Dense(2, input_dim=2, activation='relu')) \n    model.add(Dense(1, activation='sigmoid'))\n    model.compile(loss='binary_crossentropy', optimizer='adam', metrics=['accuracy'])\n    return model\n\nmodel = KerasClassifier(build_fn=get_model, epochs=10, batch_size=8, verbose=0)\nkf = KFold(n_splits=3, shuffle=True)\n\nX = np.random.rand(10,2)\ny = np.random.rand(10,1)\n\ncv_results = cross_validate(model, X, y, cv=kf, return_train_score=False)\n\nprint (cv_results)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 565, "user_id": 4534063, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/63e5295560cbfe10f3377f895279c3c2?s=128&d=identicon&r=PG&f=1", "display_name": "learner", "link": "https://stackoverflow.com/users/4534063/learner"}, "edited": false, "score": 0, "creation_date": 1553122004, "post_id": 55270782, "comment_id": 97273687, "body": "If I want to display confusion matrix for each fold, how would you do that as in my case I am using cross_validate so I don&#39;t have access to <code>confusion_matrix(y[val_index], pred))</code> as shown in your link. Because cross_validate is creating fold."}, {"owner": {"reputation": 45172, "user_id": 4685471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/327dc718c142e3ea70e5db4b38050a36?s=128&d=identicon&r=PG", "display_name": "desertnaut", "link": "https://stackoverflow.com/users/4685471/desertnaut"}, "reply_to_user": {"reputation": 565, "user_id": 4534063, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/63e5295560cbfe10f3377f895279c3c2?s=128&d=identicon&r=PG&f=1", "display_name": "learner", "link": "https://stackoverflow.com/users/4534063/learner"}, "edited": false, "score": 2, "creation_date": 1553123098, "post_id": 55270782, "comment_id": 97273993, "body": "@learner you mean you are <i>bounded</i> in using <code>cross_validate</code>? Because the linked answer is the most straightforward way to do so, and you don&#39;t &quot;lose&quot; anything (scores etc) compared to your current approach - it is actually a (correct) modification of your <code>model_2</code> approach; in any case, you could check <a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.model_selection.cross_val_predict.html\" rel=\"nofollow noreferrer\"><code>cross_val_predict</code></a>"}], "tags": [], "owner": {"reputation": 45172, "user_id": 4685471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/327dc718c142e3ea70e5db4b38050a36?s=128&d=identicon&r=PG", "display_name": "desertnaut", "link": "https://stackoverflow.com/users/4685471/desertnaut"}, "is_accepted": true, "score": 6, "last_activity_date": 1553120453, "last_edit_date": 1553120453, "creation_date": 1553119031, "answer_id": 55270782, "question_id": 55270431, "link": "https://stackoverflow.com/questions/55270431/how-to-correctly-perform-cross-validation-in-scikit-learn/55270782#55270782", "title": "How to correctly perform cross validation in scikit-learn?", "body": "<p>The <a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.model_selection.cross_validate.html\" rel=\"noreferrer\">documentation</a> is arguably your best friend in such questions; from the simple example there it should be apparent that you should use neither a <code>for</code> loop nor a call to <code>fit</code>. Adapting the example to use <code>KFold</code> as you do:</p>\n\n<pre><code>from sklearn.model_selection import KFold, cross_validate\nfrom sklearn.datasets import load_boston\nfrom sklearn.tree import DecisionTreeRegressor\n\nX, y = load_boston(return_X_y=True)\nn_splits = 5\nkf = KFold(n_splits=n_splits, shuffle=True)\n\nmodel = DecisionTreeRegressor()\nscoring=('r2', 'neg_mean_squared_error')\n\ncv_results = cross_validate(model, X, y, cv=kf, scoring=scoring, return_train_score=False)\ncv_results\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>{'fit_time': array([0.00901461, 0.00563478, 0.00539804, 0.00529385, 0.00638533]),\n 'score_time': array([0.00132656, 0.00214362, 0.00134897, 0.00134444, 0.00176597]),\n 'test_neg_mean_squared_error': array([-11.15872549, -30.1549505 , -25.51841584, -16.39346535,\n        -15.63425743]),\n 'test_r2': array([0.7765484 , 0.68106786, 0.73327311, 0.83008371, 0.79572363])}\n</code></pre>\n\n<blockquote>\n  <p>how can I create confusion matrix? Do I need to create it for each fold</p>\n</blockquote>\n\n<p>No one can tell you if you <em>need</em> to create a confusion matrix for each fold - it is your choice. If you choose to do so, it may be better to skip <code>cross_validate</code> and do the procedure \"manually\" - see my answer in <a href=\"https://stackoverflow.com/questions/53531167/how-to-display-confusion-matrix-and-report-recall-precision-fmeasure-for-eac/55050146#55050146\">How to display confusion matrix and report (recall, precision, fmeasure) for each cross validation fold</a>.</p>\n\n<blockquote>\n  <p>if yes, how can the final/average confusion matrix be calculated? </p>\n</blockquote>\n\n<p>There is no \"final/average\" confusion matrix; if you want to calculate anything further than the <code>k</code> ones (one for each k-fold) as described in the linked answer, you need to have available a separate validation set... </p>\n"}], "owner": {"reputation": 565, "user_id": 4534063, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/63e5295560cbfe10f3377f895279c3c2?s=128&d=identicon&r=PG&f=1", "display_name": "learner", "link": "https://stackoverflow.com/users/4534063/learner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2800, "favorite_count": 1, "accepted_answer_id": 55270782, "answer_count": 2, "score": 4, "last_activity_date": 1570993376, "creation_date": 1553117100, "last_edit_date": 1570993376, "question_id": 55270431, "link": "https://stackoverflow.com/questions/55270431/how-to-correctly-perform-cross-validation-in-scikit-learn", "title": "How to correctly perform cross validation in scikit-learn?", "body": "<p>I am trying to do a cross validation on a k-nn classifier and I am confused about which of the following two methods below conducts cross validation correctly.</p>\n\n<pre><code>training_scores = defaultdict(list)\nvalidation_f1_scores = defaultdict(list)\nvalidation_precision_scores = defaultdict(list)\nvalidation_recall_scores = defaultdict(list)\nvalidation_scores = defaultdict(list)\n\ndef model_1(seed, X, Y):\n    np.random.seed(seed)\n    scoring = ['accuracy', 'f1_macro', 'precision_macro', 'recall_macro']\n    model = KNeighborsClassifier(n_neighbors=13)\n\n    kfold = StratifiedKFold(n_splits=2, shuffle=True, random_state=seed)\n    scores = model_selection.cross_validate(model, X, Y, cv=kfold, scoring=scoring, return_train_score=True)\n    print(scores['train_accuracy'])\n    training_scores['KNeighbour'].append(scores['train_accuracy'])\n    print(scores['test_f1_macro'])\n    validation_f1_scores['KNeighbour'].append(scores['test_f1_macro'])\n    print(scores['test_precision_macro'])\n    validation_precision_scores['KNeighbour'].append(scores['test_precision_macro'])\n    print(scores['test_recall_macro'])\n    validation_recall_scores['KNeighbour'].append(scores['test_recall_macro'])\n    print(scores['test_accuracy'])\n    validation_scores['KNeighbour'].append(scores['test_accuracy'])\n\n    print(np.mean(training_scores['KNeighbour']))\n    print(np.std(training_scores['KNeighbour']))\n    #rest of print statments\n</code></pre>\n\n<p>It seems that for loop in the second model is redundant.</p>\n\n<pre><code>def model_2(seed, X, Y):\n    np.random.seed(seed)\n    scoring = ['accuracy', 'f1_macro', 'precision_macro', 'recall_macro']\n    model = KNeighborsClassifier(n_neighbors=13)\n\n    kfold = StratifiedKFold(n_splits=2, shuffle=True, random_state=seed)\n    for train, test in kfold.split(X, Y):\n        scores = model_selection.cross_validate(model, X[train], Y[train], cv=kfold, scoring=scoring, return_train_score=True)\n        print(scores['train_accuracy'])\n        training_scores['KNeighbour'].append(scores['train_accuracy'])\n        print(scores['test_f1_macro'])\n        validation_f1_scores['KNeighbour'].append(scores['test_f1_macro'])\n        print(scores['test_precision_macro'])\n        validation_precision_scores['KNeighbour'].append(scores['test_precision_macro'])\n        print(scores['test_recall_macro'])\n        validation_recall_scores['KNeighbour'].append(scores['test_recall_macro'])\n        print(scores['test_accuracy'])\n        validation_scores['KNeighbour'].append(scores['test_accuracy'])\n\n    print(np.mean(training_scores['KNeighbour']))\n    print(np.std(training_scores['KNeighbour']))\n    # rest of print statments\n</code></pre>\n\n<p>I am using <code>StratifiedKFold</code> and I am not sure if I need for loop as in model_2 function or does <code>cross_validate</code> function already use the split as we are passing <code>cv=kfold</code> as an argument.</p>\n\n<p>I am not calling <code>fit</code> method, is this OK? Does <code>cross_validate</code> calls that automatically or do I need to call <code>fit</code> before calling <code>cross_validate</code>?</p>\n\n<p>Finally, how can I create confusion matrix? Do I need to create it for each fold, if yes, how can the final/average confusion matrix be calculated? </p>\n"}, {"tags": ["python", "python-3.x", "python-2.7", "selenium", "selenium-webdriver"], "comments": [{"owner": {"reputation": 13104, "user_id": 621690, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6edc5dbf6a1b8cef7db25355aba35a1c?s=128&d=identicon&r=PG", "display_name": "Risadinha", "link": "https://stackoverflow.com/users/621690/risadinha"}, "edited": false, "score": 1, "creation_date": 1553117444, "post_id": 55270424, "comment_id": 97272157, "body": "Would you even <i>want</i> this to work? You are talking about your real bank account here?"}, {"owner": {"reputation": 12118, "user_id": 4714829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1b66c22707be26afda19fe995e17ea?s=128&d=identicon&r=PG&f=1", "display_name": "supputuri", "link": "https://stackoverflow.com/users/4714829/supputuri"}, "edited": false, "score": 0, "creation_date": 1553118481, "post_id": 55270424, "comment_id": 97272556, "body": "check the bank policy, it&#39;s not allowed to perform in most of the cases. If you really need this to be done, check if any API is available."}, {"owner": {"reputation": 1606, "user_id": 278938, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/1b508d92972c0f6d2d8d4f1ab3694a90?s=128&d=identicon&r=PG", "display_name": "robin bajaj", "link": "https://stackoverflow.com/users/278938/robin-bajaj"}, "edited": false, "score": 0, "creation_date": 1553198817, "post_id": 55270424, "comment_id": 97306360, "body": "no api available.. i checked.. i must be missing some request headers.. will check.. this should work. i tried the same code against another utility company and it works fine with them.."}, {"owner": {"reputation": 148, "user_id": 13386385, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h1M2U.jpg?s=128&g=1", "display_name": "jis0324", "link": "https://stackoverflow.com/users/13386385/jis0324"}, "edited": false, "score": 0, "creation_date": 1605722834, "post_id": 55270424, "comment_id": 114741143, "body": "Hi, robin bajaj. Did you solve your problem and can you login using selenium web browser?"}, {"owner": {"reputation": 1606, "user_id": 278938, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/1b508d92972c0f6d2d8d4f1ab3694a90?s=128&d=identicon&r=PG", "display_name": "robin bajaj", "link": "https://stackoverflow.com/users/278938/robin-bajaj"}, "edited": false, "score": 0, "creation_date": 1605912177, "post_id": 55270424, "comment_id": 114808253, "body": "nah man.. i wish i could.. i think they are blocking it from their side.."}], "owner": {"reputation": 1606, "user_id": 278938, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/1b508d92972c0f6d2d8d4f1ab3694a90?s=128&d=identicon&r=PG", "display_name": "robin bajaj", "link": "https://stackoverflow.com/users/278938/robin-bajaj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 333, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1553117072, "creation_date": 1553117072, "question_id": 55270424, "link": "https://stackoverflow.com/questions/55270424/python-selenium-webdriver-getting-httpstatuscode-503-when-logging-in-to-website", "title": "python selenium webdriver getting httpStatusCode 503 when logging in to website", "body": "<p>I am working on a personal project to scrape my personal transactions off of my bank website to build some analytics off it. \nI am using python with selenium web driver. \nI can almost login to the my bank site, but right when the form gets submitted i am getting error in chrome console\n(I was earlier getting CORS errors, but they are circumvented by using --disable-web-security option)</p>\n\n<pre><code>Failed to load resource: the server responded with a status of 503 (Service Unavailable: Back-end server is at capacity)\n</code></pre>\n\n<p>I am pretty sure, the real reason is something else, I can login to the bank site without using selenium webdriver - without issues. </p>\n\n<pre><code>from selenium.webdriver import Chrome\nfrom selenium.webdriver.chrome.options import Options\nfrom selenium.webdriver.common.keys import Keys\nfrom selenium.webdriver.common.by import By\nfrom selenium.webdriver.support.ui import WebDriverWait\nfrom selenium.webdriver.support import expected_conditions as EC\nimport time \n\nopts = Options()\nopts.headless = False\nopts.add_argument(\"test-type\")\nopts.add_argument(\"--disable-web-security\")\nopts.add_argument(\"--allow-running-insecure-content\")\n\n# assert opts.headless  # Operating in headless mode\nbrowser = Chrome(options=opts)\n\nwait = WebDriverWait(browser, 10)\n\nbrowser.get('https://authentication.td.com/uap-ui/index.html?consumer=easyweb&amp;locale=en_CA#/login/easyweb-getting-started/')\nuser_name_field = wait.until(EC.visibility_of_element_located((By.NAME, \"username\")))\npassword_field = wait.until(EC.visibility_of_element_located((By.ID, \"password\")))\nuser_name_field.send_keys('my-card-number')\npassword_field.send_keys('my-password')\npassword_field.send_keys(Keys.RETURN)\nprint('submission done')\nprint(browser.current_url)\nbanking_hr_field_results = wait.until(EC.visibility_of_element_located((By.XPATH, \"//a[contains(text(), 'TD ALL-INCLUSIVE')]\")))\nprint(browser.current_url)\n\nbrowser.close()\nquit()\n</code></pre>\n"}, {"tags": ["python", "for-loop", "random"], "comments": [{"owner": {"reputation": 427, "user_id": 8843390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2b78ac6a5f9b01957bd550fceeec515?s=128&d=identicon&r=PG&f=1", "display_name": "Alakazam", "link": "https://stackoverflow.com/users/8843390/alakazam"}, "edited": false, "score": 1, "creation_date": 1553116898, "post_id": 55270357, "comment_id": 97271936, "body": "Why not sorting the list?"}, {"owner": {"reputation": 7, "user_id": 9477073, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YcnQxY3Ugo4/AAAAAAAAAAI/AAAAAAAAAHM/B0vX3NvCUWs/photo.jpg?sz=128", "display_name": "javax", "link": "https://stackoverflow.com/users/9477073/javax"}, "reply_to_user": {"reputation": 427, "user_id": 8843390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2b78ac6a5f9b01957bd550fceeec515?s=128&d=identicon&r=PG&f=1", "display_name": "Alakazam", "link": "https://stackoverflow.com/users/8843390/alakazam"}, "edited": false, "score": 0, "creation_date": 1553117045, "post_id": 55270357, "comment_id": 97271995, "body": "All other values must stay in their order"}], "answers": [{"tags": [], "owner": {"reputation": 627, "user_id": 5458298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ab18e73f8e98d0204bcf08281df0740?s=128&d=identicon&r=PG&f=1", "display_name": "Ardweaden", "link": "https://stackoverflow.com/users/5458298/ardweaden"}, "is_accepted": false, "score": 1, "last_activity_date": 1553116904, "creation_date": 1553116904, "answer_id": 55270390, "question_id": 55270357, "link": "https://stackoverflow.com/questions/55270357/create-a-list-of-random-integers-and-then-put-all-numbers-that-are-the-same-righ/55270390#55270390", "title": "Create a list of random integers and then put all numbers that are the same right beside eachother", "body": "<p>Perhaps just sort the list:</p>\n\n<p><code>lst = sorted(lst)</code></p>\n"}, {"tags": [], "owner": {"reputation": 5380, "user_id": 10618540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Od4aq.jpg?s=128&g=1", "display_name": "Paritosh Singh", "link": "https://stackoverflow.com/users/10618540/paritosh-singh"}, "is_accepted": false, "score": 2, "last_activity_date": 1553117451, "creation_date": 1553117451, "answer_id": 55270500, "question_id": 55270357, "link": "https://stackoverflow.com/questions/55270357/create-a-list-of-random-integers-and-then-put-all-numbers-that-are-the-same-righ/55270500#55270500", "title": "Create a list of random integers and then put all numbers that are the same right beside eachother", "body": "<p>You can build your own sorting criteria using indexes for the <code>key</code> argument.</p>\n\n<pre><code>import random\n\ndef run():\n    lst=[]\n    for i in range(0,20):\n        ran = random.randint(1,10)\n        lst.append(ran)\n    return lst\n\nlst = run()\nprint(lst) \n#[5, 10, 5, 1, 8, 10, 10, 6, 4, 9, 3, 9, 6, 9, 2, 9, 9, 1, 7, 8]\nresult = sorted(lst, key = lambda x: lst.index(x))\nprint(result)\n#[5, 5, 10, 10, 10, 1, 1, 8, 8, 6, 6, 4, 9, 9, 9, 9, 9, 3, 2, 7]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7, "user_id": 9477073, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YcnQxY3Ugo4/AAAAAAAAAAI/AAAAAAAAAHM/B0vX3NvCUWs/photo.jpg?sz=128", "display_name": "javax", "link": "https://stackoverflow.com/users/9477073/javax"}, "edited": false, "score": 0, "creation_date": 1553118380, "post_id": 55270538, "comment_id": 97272519, "body": "any clue on how to put parenthesis around the values that are repeated in a print statement?"}, {"owner": {"reputation": 7, "user_id": 9477073, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YcnQxY3Ugo4/AAAAAAAAAAI/AAAAAAAAAHM/B0vX3NvCUWs/photo.jpg?sz=128", "display_name": "javax", "link": "https://stackoverflow.com/users/9477073/javax"}, "edited": false, "score": 0, "creation_date": 1553118418, "post_id": 55270538, "comment_id": 97272536, "body": "ex. 1 2 5 (4 4 4) 3 2 (6 6) 2 (1 1)"}, {"owner": {"reputation": 427, "user_id": 8843390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2b78ac6a5f9b01957bd550fceeec515?s=128&d=identicon&r=PG&f=1", "display_name": "Alakazam", "link": "https://stackoverflow.com/users/8843390/alakazam"}, "reply_to_user": {"reputation": 7, "user_id": 9477073, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YcnQxY3Ugo4/AAAAAAAAAAI/AAAAAAAAAHM/B0vX3NvCUWs/photo.jpg?sz=128", "display_name": "javax", "link": "https://stackoverflow.com/users/9477073/javax"}, "edited": false, "score": 0, "creation_date": 1553118856, "post_id": 55270538, "comment_id": 97272676, "body": "Do a <code>for n in unsorted_set</code> and <code>print(&quot;({})&quot;.format(&#39; &#39;.join([n for _ in range(lst.count(n))])), end=&#39; &#39;)</code>"}], "tags": [], "owner": {"reputation": 427, "user_id": 8843390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2b78ac6a5f9b01957bd550fceeec515?s=128&d=identicon&r=PG&f=1", "display_name": "Alakazam", "link": "https://stackoverflow.com/users/8843390/alakazam"}, "is_accepted": false, "score": 0, "last_activity_date": 1553117660, "creation_date": 1553117660, "answer_id": 55270538, "question_id": 55270357, "link": "https://stackoverflow.com/questions/55270357/create-a-list-of-random-integers-and-then-put-all-numbers-that-are-the-same-righ/55270538#55270538", "title": "Create a list of random integers and then put all numbers that are the same right beside eachother", "body": "<p>First let's create another list to keep the order of the unique numbers (like a <code>set</code>, but not sorted).<br></p>\n\n<pre><code>unsorted_set = []\nfor nb in lst:\n    if nb not in unsorted_set:\n        unsorted_set.append(nb)\n</code></pre>\n\n<p>Now that we got this list, let's create a final list that will continue that list but each number will be repeated n times, n is the occurences of the number in the first list. We will do this with <code>lst.count()</code></p>\n\n<pre><code>final_list = []\nfor nb in unsorted_set: \n    for _ in range(lst.count(nb)):\n        final_list.append(nb)\n</code></pre>\n\n<blockquote>\n  <p>Note that this code can be simplified a lot with <em>List Comprehension</em>.<br></p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 116, "user_id": 11132550, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-APl4WqPKNUw/AAAAAAAAAAI/AAAAAAAAAGk/hTdb221XazQ/photo.jpg?sz=128", "display_name": "Samuel Giftson", "link": "https://stackoverflow.com/users/11132550/samuel-giftson"}, "is_accepted": true, "score": 0, "last_activity_date": 1553187221, "last_edit_date": 1553187221, "creation_date": 1553125802, "answer_id": 55271801, "question_id": 55270357, "link": "https://stackoverflow.com/questions/55270357/create-a-list-of-random-integers-and-then-put-all-numbers-that-are-the-same-righ/55271801#55271801", "title": "Create a list of random integers and then put all numbers that are the same right beside eachother", "body": "<pre><code>import random\n\n#this is the function you gave with little edits, to see the changes it make\n# after the process\n\ndef run():\n    lst=[]\n    for i in range(0,20):\n        ran = random.randint(1,10)\n        lst.append(ran)\n    print(lst)\n    swap(lst)\n    print(lst)\n    return lst\n\n#this uses indexes of every element, and checks every other element of the list.\n#this swap function works for lists with element made up of strings as well.\n\ndef swap(lst):\n    for i in range(len(lst)):\n        nu_m=lst[i]\n        x=i+1\n        while x&lt;len(lst):\n            dump=i+1\n            acc=lst[i+1]\n            if(lst[i]==lst[x]):\n                lst[dump]=lst[x]\n                lst[x]=acc\n            x=x+1\nx=run()\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 9477073, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YcnQxY3Ugo4/AAAAAAAAAAI/AAAAAAAAAHM/B0vX3NvCUWs/photo.jpg?sz=128", "display_name": "javax", "link": "https://stackoverflow.com/users/9477073/javax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 55271801, "answer_count": 4, "score": 0, "last_activity_date": 1553187221, "creation_date": 1553116712, "question_id": 55270357, "link": "https://stackoverflow.com/questions/55270357/create-a-list-of-random-integers-and-then-put-all-numbers-that-are-the-same-righ", "title": "Create a list of random integers and then put all numbers that are the same right beside eachother", "body": "<pre><code>def run():\n    lst=[]\n    for i in range(0,20):\n        ran = random.randint(1,10)\n        lst.append(ran)\nreturn lst\n</code></pre>\n\n<p>So far I have created a list of random integers from 1 to 9 with 20 values, however how can I incorporate a swapping method so that values that are the same but not next to eachother will be next to eachother?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "dataframe", "matplotlib", "scipy", "data-fitting"], "comments": [{"owner": {"reputation": 2939, "user_id": 803359, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/pnuDZ.jpg?s=128&g=1", "display_name": "mikuszefski", "link": "https://stackoverflow.com/users/803359/mikuszefski"}, "edited": false, "score": 0, "creation_date": 1553509952, "post_id": 55270346, "comment_id": 97396664, "body": "Can you provide some data?! What is it actually that you want to fit. If <code>min(T)</code> and <code>max(T)</code> are clear, and so are dwell time and ramp, you only need to &quot;fit&quot; the time offset, right?"}, {"owner": {"reputation": 2939, "user_id": 803359, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/pnuDZ.jpg?s=128&g=1", "display_name": "mikuszefski", "link": "https://stackoverflow.com/users/803359/mikuszefski"}, "edited": false, "score": 0, "creation_date": 1553510053, "post_id": 55270346, "comment_id": 97396720, "body": "Are you sure there are no points on the ramp? The lower valley is 30 min as well, making a period 62 minutes?"}, {"owner": {"reputation": 821, "user_id": 10452700, "user_type": "registered", "profile_image": "https://graph.facebook.com/2172245999723325/picture?type=large", "display_name": "Mario", "link": "https://stackoverflow.com/users/10452700/mario"}, "reply_to_user": {"reputation": 2939, "user_id": 803359, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/pnuDZ.jpg?s=128&g=1", "display_name": "mikuszefski", "link": "https://stackoverflow.com/users/803359/mikuszefski"}, "edited": false, "score": 0, "creation_date": 1553534390, "post_id": 55270346, "comment_id": 97411407, "body": "@mikuszefski exactly those features you mentioned in your first comment are clear and I just need to fit &quot;Measurement points&quot; on Thermal profile as you can seen like red star for High temperature and blue star in Low temperature based on data and the point is I don&#39;t have directly time in my dataset instead I have number of measurement points which each takes 16 mins so I can calculate easily total time by [Number of MP *((2*30)+(3*1))]. Regarding your 2nd comment each ramps takes <b>1min</b> so each period would be <b>63mins</b> not 62mins according to standard Thermal profile I updated the pic."}, {"owner": {"reputation": 821, "user_id": 10452700, "user_type": "registered", "profile_image": "https://graph.facebook.com/2172245999723325/picture?type=large", "display_name": "Mario", "link": "https://stackoverflow.com/users/10452700/mario"}, "reply_to_user": {"reputation": 2939, "user_id": 803359, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/pnuDZ.jpg?s=128&g=1", "display_name": "mikuszefski", "link": "https://stackoverflow.com/users/803359/mikuszefski"}, "edited": false, "score": 0, "creation_date": 1553534986, "post_id": 55270346, "comment_id": 97411711, "body": "@mikuszefski  Also Regarding your second comment as I mentioned in note since T0 is not clear and there is some low possibility that some measurements happened in ramp duration ! and I want to plot them so that i can follow them or count them for example how often happens? I was wondering  to have some kind of a formula or/and a graph which best describes the data I measured."}, {"owner": {"reputation": 2939, "user_id": 803359, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/pnuDZ.jpg?s=128&g=1", "display_name": "mikuszefski", "link": "https://stackoverflow.com/users/803359/mikuszefski"}, "edited": false, "score": 0, "creation_date": 1553586445, "post_id": 55270346, "comment_id": 97428009, "body": "Doesn&#39;t seem to difficult. Any tries from your side so far? Would be a good idea to post those as well. P.S. Your first image suggest 62. (30 low +1 up + 30 high + 1 down...repeat)"}, {"owner": {"reputation": 821, "user_id": 10452700, "user_type": "registered", "profile_image": "https://graph.facebook.com/2172245999723325/picture?type=large", "display_name": "Mario", "link": "https://stackoverflow.com/users/10452700/mario"}, "reply_to_user": {"reputation": 2939, "user_id": 803359, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/pnuDZ.jpg?s=128&g=1", "display_name": "mikuszefski", "link": "https://stackoverflow.com/users/803359/mikuszefski"}, "edited": false, "score": 0, "creation_date": 1553617374, "post_id": 55270346, "comment_id": 97447635, "body": "I&#39;ve just updated my tried code which is nothing since I&#39;m unfamiliar with <code>fit_curve</code> and not sure how I can pass the <b>mean</b> of Temperature column from <code>DaraFrame</code> to fitting process  that&#39;s why I asked this question. As standard thermal profile represents time period would be 63 mins (1up + 30High + 1down + 30low + 1up) nevertheless you&#39;re right 1st pic was unclear in term of periodic time."}, {"owner": {"reputation": 2939, "user_id": 803359, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/pnuDZ.jpg?s=128&g=1", "display_name": "mikuszefski", "link": "https://stackoverflow.com/users/803359/mikuszefski"}, "edited": false, "score": 0, "creation_date": 1553618138, "post_id": 55270346, "comment_id": 97448144, "body": "...but then you have 1up twice: in the beginning and at the end of the period. That does not make sense, does it?"}, {"owner": {"reputation": 821, "user_id": 10452700, "user_type": "registered", "profile_image": "https://graph.facebook.com/2172245999723325/picture?type=large", "display_name": "Mario", "link": "https://stackoverflow.com/users/10452700/mario"}, "reply_to_user": {"reputation": 2939, "user_id": 803359, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/pnuDZ.jpg?s=128&g=1", "display_name": "mikuszefski", "link": "https://stackoverflow.com/users/803359/mikuszefski"}, "edited": false, "score": 0, "creation_date": 1553620780, "post_id": 55270346, "comment_id": 97449672, "body": "@mikuszefski our cycle begins at one point and ends at the same point based on what I know like eg. Sin begins at 0 and ends at 0 again. Based on on our profile we begins at the High point and we end at the High point nevertheless your point of view is also correct we can assume like that as well however it doesn&#39;t matter."}, {"owner": {"reputation": 2939, "user_id": 803359, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/pnuDZ.jpg?s=128&g=1", "display_name": "mikuszefski", "link": "https://stackoverflow.com/users/803359/mikuszefski"}, "edited": false, "score": 0, "creation_date": 1553673386, "post_id": 55270346, "comment_id": 97466740, "body": "Ok, lets forget about periodicity then. Can you once again write what information you actually want to subtract. Is it just the two temperature levels?"}, {"owner": {"reputation": 821, "user_id": 10452700, "user_type": "registered", "profile_image": "https://graph.facebook.com/2172245999723325/picture?type=large", "display_name": "Mario", "link": "https://stackoverflow.com/users/10452700/mario"}, "reply_to_user": {"reputation": 2939, "user_id": 803359, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/pnuDZ.jpg?s=128&g=1", "display_name": "mikuszefski", "link": "https://stackoverflow.com/users/803359/mikuszefski"}, "edited": false, "score": 0, "creation_date": 1553710829, "post_id": 55270346, "comment_id": 97490067, "body": "@mikuszefski No I&#39;m interested in mapping MPs on Thermal profile by like your first answer so that I can get <b>pattern</b> by <code>fit_curve</code> like you provided for 1st answer in the end by printing. Actually  I&#39;m looking forward to extracting pattern so that in case that I have some <b>missing data</b> in my dataset I can fix them by replacing High or Low values !"}, {"owner": {"reputation": 821, "user_id": 10452700, "user_type": "registered", "profile_image": "https://graph.facebook.com/2172245999723325/picture?type=large", "display_name": "Mario", "link": "https://stackoverflow.com/users/10452700/mario"}, "reply_to_user": {"reputation": 2939, "user_id": 803359, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/pnuDZ.jpg?s=128&g=1", "display_name": "mikuszefski", "link": "https://stackoverflow.com/users/803359/mikuszefski"}, "edited": false, "score": 0, "creation_date": 1553711186, "post_id": 55270346, "comment_id": 97490249, "body": "@mikuszefski  So To make it easy I updated the Data sample and show expected result in the end of my post. I liked the way you find some non-plateau by using gaussian distribution function but In the end I would like to have some kind of a formula or/and a graph which best describes the data I measured. I would like to observe how often MPs happen in ramp-time which takes 1 min. PS: in your second answer I get value error <code>inData= np.loadtxt()</code> could not convert string to float:"}, {"owner": {"reputation": 2939, "user_id": 803359, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/pnuDZ.jpg?s=128&g=1", "display_name": "mikuszefski", "link": "https://stackoverflow.com/users/803359/mikuszefski"}, "edited": false, "score": 0, "creation_date": 1553763444, "post_id": 55270346, "comment_id": 97507523, "body": "Ok. for me it works with both, SOF.csv and SOF2.csv. I guess you need to debug that yourself. I was playing with your data and it doesn&#39;t fit well if I assume equidistant measurements. Your (handmade?) expectation image already suggests that this is not going to work as you have chosen a variable distance as well. You do not have a time stamp? How sure are you about the 16 minutes between measurements?"}, {"owner": {"reputation": 821, "user_id": 10452700, "user_type": "registered", "profile_image": "https://graph.facebook.com/2172245999723325/picture?type=large", "display_name": "Mario", "link": "https://stackoverflow.com/users/10452700/mario"}, "reply_to_user": {"reputation": 2939, "user_id": 803359, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/pnuDZ.jpg?s=128&g=1", "display_name": "mikuszefski", "link": "https://stackoverflow.com/users/803359/mikuszefski"}, "edited": false, "score": 0, "creation_date": 1553785391, "post_id": 55270346, "comment_id": 97522183, "body": "I don&#39;t have time stamp directly but considering each MP takes 16 mins I can find number of measurement points by <code>MP = int(len(df[&#39;Temperature&#39;])&#47;480)</code> and multiply it by 16 mins. Man this measurements have done by Raspberry Pi and thermal shock has done by air thermal chamber.If you look at SOF it contains 11 MP (0-10) and I just modified SOF2 to make it periodic during those measurements and left one measurement which is 8th MP(MP=9) around 0 so that we can map or fit it in ramp-time and I&#39;m looking for extracting pattern for MPs in High &amp; Low and especially during ramp-time which is 1min."}, {"owner": {"reputation": 2939, "user_id": 803359, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/pnuDZ.jpg?s=128&g=1", "display_name": "mikuszefski", "link": "https://stackoverflow.com/users/803359/mikuszefski"}, "edited": false, "score": 0, "creation_date": 1553841387, "post_id": 55270346, "comment_id": 97542975, "body": "Well, I have been fitting data for a long time now. And yes, I tried the ` x * 16` for the positions in time. And no, it doesn&#39;t work. There is no reasonable ramp 1 period 63 solution to that data with the assumed time steps. I can post what I tried, but I am not sure if it helps you. Highly recommended: next time make a column for time as well."}, {"owner": {"reputation": 821, "user_id": 10452700, "user_type": "registered", "profile_image": "https://graph.facebook.com/2172245999723325/picture?type=large", "display_name": "Mario", "link": "https://stackoverflow.com/users/10452700/mario"}, "reply_to_user": {"reputation": 2939, "user_id": 803359, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/pnuDZ.jpg?s=128&g=1", "display_name": "mikuszefski", "link": "https://stackoverflow.com/users/803359/mikuszefski"}, "edited": false, "score": 0, "creation_date": 1554194212, "post_id": 55270346, "comment_id": 97651479, "body": "@mikuszefski man I would like appreciate you for trying to fit and I also conclude that without initial time it&#39;s not scientific su cha fit and find equation but at least is there any nice way to <b>map</b> the measurements points on high and low regim on thermal profile and map non-plateau data on ramp like you implement in your first answer. My aim is to visually control how many measurement points happen in average in high and low and how often it happens in ramp time if we assume  1st measurement point happened in t0=0. It would be nice if call  and pass data via <code>Pandas.DataFrame</code>. Thanks"}, {"owner": {"reputation": 821, "user_id": 10452700, "user_type": "registered", "profile_image": "https://graph.facebook.com/2172245999723325/picture?type=large", "display_name": "Mario", "link": "https://stackoverflow.com/users/10452700/mario"}, "reply_to_user": {"reputation": 2939, "user_id": 803359, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/pnuDZ.jpg?s=128&g=1", "display_name": "mikuszefski", "link": "https://stackoverflow.com/users/803359/mikuszefski"}, "edited": false, "score": 0, "creation_date": 1554240341, "post_id": 55270346, "comment_id": 97677201, "body": "@mikuszefski Thanks for leaving your codes in <b>Edit</b> part. I just had two problems: Idk why the first picture is shown <b>blank</b> for me but I tried to at least plot it via <code>for x,y in zip(inData[:,5], inData[:,2]):</code> to have X-axis based on** MP numbers** which is 6th column in SOF2.csv from [0-10] totally 11 MPs. Another issue I would like to mark temperature around 150 and around -40 by blue color and rest between like [0,100] by red color via combination of <code>x</code>&amp;<code>o</code>  like 2nd picture of 1st answer but I didn&#39;t understand how did you do it, are you plotting 2 times?"}, {"owner": {"reputation": 821, "user_id": 10452700, "user_type": "registered", "profile_image": "https://graph.facebook.com/2172245999723325/picture?type=large", "display_name": "Mario", "link": "https://stackoverflow.com/users/10452700/mario"}, "reply_to_user": {"reputation": 2939, "user_id": 803359, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/pnuDZ.jpg?s=128&g=1", "display_name": "mikuszefski", "link": "https://stackoverflow.com/users/803359/mikuszefski"}, "edited": false, "score": 0, "creation_date": 1554240436, "post_id": 55270346, "comment_id": 97677236, "body": "@mikuszefski May I ask also shortly what are <code>def partition</code> and <code>def chi2</code> for?"}, {"owner": {"reputation": 2939, "user_id": 803359, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/pnuDZ.jpg?s=128&g=1", "display_name": "mikuszefski", "link": "https://stackoverflow.com/users/803359/mikuszefski"}, "edited": false, "score": 0, "creation_date": 1554270883, "post_id": 55270346, "comment_id": 97684135, "body": "Hi, for the first part, I can&#39;t help without having detailed code on how you are plotting what. For the second question: yes. see my code for the multiple plot commands. Finally, partition also could have been <code>numpy.reshape( 11, 480 )</code>. It is, hence, only to split the data into blocks of 480 measurements, i.e. your MPs. I also introduced my own chi square function to use the <code>scipy.optimize.minimize</code>."}, {"owner": {"reputation": 821, "user_id": 10452700, "user_type": "registered", "profile_image": "https://graph.facebook.com/2172245999723325/picture?type=large", "display_name": "Mario", "link": "https://stackoverflow.com/users/10452700/mario"}, "reply_to_user": {"reputation": 2939, "user_id": 803359, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/pnuDZ.jpg?s=128&g=1", "display_name": "mikuszefski", "link": "https://stackoverflow.com/users/803359/mikuszefski"}, "edited": false, "score": 0, "creation_date": 1555017282, "post_id": 55270346, "comment_id": 97972969, "body": "@mikuszefski Hi , I was wondering if you have nice idea regarding this <a href=\"https://stackoverflow.com/questions/55639267/how-can-display-differences-of-two-matrices-by-subtraction-via-heatmap-in-python\">question</a> . Have a nice weekend"}, {"owner": {"reputation": 2939, "user_id": 803359, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/pnuDZ.jpg?s=128&g=1", "display_name": "mikuszefski", "link": "https://stackoverflow.com/users/803359/mikuszefski"}, "edited": false, "score": 0, "creation_date": 1555052534, "post_id": 55270346, "comment_id": 97981655, "body": "Well, I have plenty, but I&#39;d need more data and especially more knowledge about its acquisition. The main problem/question remains: how sure are you that the measurement period is reliable over the full measurement time. Even in the small data set you gave me, the data is incompatible with this assumption. If by any means possible, repeat the measurement and put a time stamp."}, {"owner": {"reputation": 821, "user_id": 10452700, "user_type": "registered", "profile_image": "https://graph.facebook.com/2172245999723325/picture?type=large", "display_name": "Mario", "link": "https://stackoverflow.com/users/10452700/mario"}, "reply_to_user": {"reputation": 2939, "user_id": 803359, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/pnuDZ.jpg?s=128&g=1", "display_name": "mikuszefski", "link": "https://stackoverflow.com/users/803359/mikuszefski"}, "edited": false, "score": 0, "creation_date": 1555237946, "post_id": 55270346, "comment_id": 98033889, "body": "@mikuszefski sure thing I will repeat the measurements and let you know. Kindly I wanted to ask you for having a look at this <a href=\"https://stackoverflow.com/questions/55639267/how-can-display-differences-of-two-matrices-by-subtraction-via-heatmap-in-python\">question</a> if you had free time. thanks"}, {"owner": {"reputation": 821, "user_id": 10452700, "user_type": "registered", "profile_image": "https://graph.facebook.com/2172245999723325/picture?type=large", "display_name": "Mario", "link": "https://stackoverflow.com/users/10452700/mario"}, "reply_to_user": {"reputation": 2939, "user_id": 803359, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/pnuDZ.jpg?s=128&g=1", "display_name": "mikuszefski", "link": "https://stackoverflow.com/users/803359/mikuszefski"}, "edited": false, "score": 0, "creation_date": 1564319219, "post_id": 55270346, "comment_id": 100983587, "body": "@mikuszefski Hi dear may I ask you to have a look to this <a href=\"https://stackoverflow.com/questions/57233218/how-can-color-up-or-highlighted-outliers-in-scatter-plot-by-using-customized-ran\">question</a> urgently."}, {"owner": {"reputation": 821, "user_id": 10452700, "user_type": "registered", "profile_image": "https://graph.facebook.com/2172245999723325/picture?type=large", "display_name": "Mario", "link": "https://stackoverflow.com/users/10452700/mario"}, "reply_to_user": {"reputation": 2939, "user_id": 803359, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/pnuDZ.jpg?s=128&g=1", "display_name": "mikuszefski", "link": "https://stackoverflow.com/users/803359/mikuszefski"}, "edited": false, "score": 0, "creation_date": 1567341898, "post_id": 55270346, "comment_id": 101929935, "body": "@mikuszefski Would you do me a favor and have a look to this urgent <a href=\"https://stackoverflow.com/questions/57741001/how-can-optmize-fitting-data-on-thermal-profile-properly\">question</a>"}], "answers": [{"comments": [{"owner": {"reputation": 821, "user_id": 10452700, "user_type": "registered", "profile_image": "https://graph.facebook.com/2172245999723325/picture?type=large", "display_name": "Mario", "link": "https://stackoverflow.com/users/10452700/mario"}, "edited": false, "score": 0, "creation_date": 1553616798, "post_id": 55354251, "comment_id": 97447285, "body": "Firstly thanks for your try and you&#39;re right about that it would be better when ramp-time &lt; dwell-time. Honestly considering I provided sample data I would expect that to see real data-sample fit and how you pass them <code>curve_fit</code>. Due to there are 480 values for each measurement point we could calculate <code>mean</code> of every 480 can be considered as right temperature and pass them from <code>DataFrame</code> to fit by <code>for-loop</code> : <code>np.mean(df[&#39; &#39;].iloc[j:j+480])</code>or <code>df.groupby(&#39; &#39;).mean()</code> based on structure of data-sample. I was also wondering if we could exclude Thermal profile features for further changes."}, {"owner": {"reputation": 2939, "user_id": 803359, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/pnuDZ.jpg?s=128&g=1", "display_name": "mikuszefski", "link": "https://stackoverflow.com/users/803359/mikuszefski"}, "reply_to_user": {"reputation": 821, "user_id": 10452700, "user_type": "registered", "profile_image": "https://graph.facebook.com/2172245999723325/picture?type=large", "display_name": "Mario", "link": "https://stackoverflow.com/users/10452700/mario"}, "edited": false, "score": 0, "creation_date": 1553618023, "post_id": 55354251, "comment_id": 97448050, "body": "@Mario Sorry, but your sample data contains just a single jump, so there is no period to fit. Taking averages shouldn&#39;t be a problem unless the time taking the samples is in the range of ramping time, in which case you might hide important information. I don&#39;t get the &quot;Thermal profile&quot;-thing, though. What do you mean?"}, {"owner": {"reputation": 2939, "user_id": 803359, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/pnuDZ.jpg?s=128&g=1", "display_name": "mikuszefski", "link": "https://stackoverflow.com/users/803359/mikuszefski"}, "reply_to_user": {"reputation": 821, "user_id": 10452700, "user_type": "registered", "profile_image": "https://graph.facebook.com/2172245999723325/picture?type=large", "display_name": "Mario", "link": "https://stackoverflow.com/users/10452700/mario"}, "edited": false, "score": 0, "creation_date": 1553618581, "post_id": 55354251, "comment_id": 97448407, "body": "@Mario ...but then it is not the period that you need to know, right? What is it that you actually want to know?"}, {"owner": {"reputation": 821, "user_id": 10452700, "user_type": "registered", "profile_image": "https://graph.facebook.com/2172245999723325/picture?type=large", "display_name": "Mario", "link": "https://stackoverflow.com/users/10452700/mario"}, "edited": false, "score": 0, "creation_date": 1553624167, "post_id": 55354251, "comment_id": 97451463, "body": "I completely agree with you and you already programmed the thermal profile but it&#39;s based on the data you generated . my question is how can I pass the data from <code>DataFrame</code> to the <code>curve_fit</code> so that we can extract a pattern from raw data. I noticed that you&#39;ve defined some values like <code>fit_func</code> <code>time1List</code>  <code>tempList</code>  <code>[ -40(Low), +150(High), 63(Period), 10(?), 0(?) ]</code> manually however I want the function to extract these values from my dataset. Thanks for your consideration in details."}, {"owner": {"reputation": 2939, "user_id": 803359, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/pnuDZ.jpg?s=128&g=1", "display_name": "mikuszefski", "link": "https://stackoverflow.com/users/803359/mikuszefski"}, "reply_to_user": {"reputation": 821, "user_id": 10452700, "user_type": "registered", "profile_image": "https://graph.facebook.com/2172245999723325/picture?type=large", "display_name": "Mario", "link": "https://stackoverflow.com/users/10452700/mario"}, "edited": false, "score": 0, "creation_date": 1553673105, "post_id": 55354251, "comment_id": 97466624, "body": "@Mario The thermal profile and especially the fit function I use are non-linear functions that I am going to fit to same generic data with noise. In principle <code>curve_fit</code> can just find the parameters, but can get stuck in local minima or even not converge. One can avoid this by giving reasonable start values for the parameters. That is what I have done. The <code>10</code> is a parameter describing the flatness of the plateau and the slope of the ramp. So it is not so important. The <code>0</code> is just the starting guess for the time offset, chosen wrong on purpose."}, {"owner": {"reputation": 821, "user_id": 10452700, "user_type": "registered", "profile_image": "https://graph.facebook.com/2172245999723325/picture?type=large", "display_name": "Mario", "link": "https://stackoverflow.com/users/10452700/mario"}, "edited": false, "score": 0, "creation_date": 1567097415, "post_id": 55354251, "comment_id": 101871271, "body": "Hi, after a long time still your fitting solution is so vague for me with excellent output. Man, may I kindly ask you to let me know how can increase the measurement points to 3-4 in high and low thermal regimes in the thermal profile with the orange color which are highlighted with &#39;x&#39; inside of &#39;o&#39; perfectly? Which parameter corresponds to that?"}, {"owner": {"reputation": 2939, "user_id": 803359, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/pnuDZ.jpg?s=128&g=1", "display_name": "mikuszefski", "link": "https://stackoverflow.com/users/803359/mikuszefski"}, "reply_to_user": {"reputation": 821, "user_id": 10452700, "user_type": "registered", "profile_image": "https://graph.facebook.com/2172245999723325/picture?type=large", "display_name": "Mario", "link": "https://stackoverflow.com/users/10452700/mario"}, "edited": false, "score": 0, "creation_date": 1567502643, "post_id": 55354251, "comment_id": 101972577, "body": "@Mario I&#39;d like to help, but have to say that I don&#39;t understand your question. Can you be more precise? (also....I have to read everything from the beginning again to see what this was all about) Cheers."}, {"owner": {"reputation": 821, "user_id": 10452700, "user_type": "registered", "profile_image": "https://graph.facebook.com/2172245999723325/picture?type=large", "display_name": "Mario", "link": "https://stackoverflow.com/users/10452700/mario"}, "edited": false, "score": 0, "creation_date": 1596191018, "post_id": 55354251, "comment_id": 111739695, "body": "Hi I hope this message finds you well. I was wondering if you are kind enough to check this <a href=\"https://stackoverflow.com/questions/63175802/how-can-generate-impulse-as-outliers-on-periodic-or-sequenced-based-data-for-doi\">question</a>. Merci"}], "tags": [], "owner": {"reputation": 2939, "user_id": 803359, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/pnuDZ.jpg?s=128&g=1", "display_name": "mikuszefski", "link": "https://stackoverflow.com/users/803359/mikuszefski"}, "is_accepted": false, "score": 1, "last_activity_date": 1554210886, "last_edit_date": 1554210886, "creation_date": 1553594260, "answer_id": 55354251, "question_id": 55270346, "link": "https://stackoverflow.com/questions/55270346/how-can-fit-the-data-on-temperature-thermal-profile/55354251#55354251", "title": "How can fit the data on temperature/thermal profile?", "body": "<p>This would be my starting point:</p>\n\n<pre><code>import matplotlib.pyplot as plt\nimport numpy as np\nfrom scipy.optimize import curve_fit\n\n### to generate test data\ndef temp( t , low, high, period, ramp ):\n    tRed = t % period\n    dwell = period / 2. - ramp\n    if tRed &lt; dwell:\n        out = high\n    elif tRed &lt; dwell + ramp:\n        out = high - ( tRed - dwell ) / ramp * ( high - low )\n    elif tRed &lt; 2 * dwell + ramp:\n        out = low\n    elif tRed &lt;= period:\n        out = low + ( tRed - 2 * dwell - ramp)/ramp * ( high -low )\n    else:\n        assert 0\n    return out + np.random.normal() \n\n### A continuous function that somewhat fits the data\n### but definitively gets the period and levels. \n### The ramp is less well defined\ndef fit_func( t, low, high, period, s,  delta):\n    return  ( high + low ) / 2. + ( high - low )/2. * np.tanh( s * np.sin( 2 * np.pi * ( t - delta ) / period ) )\n\n\n\ntime1List = np.arange( 300 ) * 16\ntime2List = np.linspace( 0, 300 * 16, 7213 )\ntempList = np.fromiter( ( temp(t - 6.3 , 41, 155, 63.3, 2.05 ) for t in time1List ), np.float )\nfuncList = np.fromiter( ( fit_func(t , 41, 155, 63.3, 10., 0 ) for t in time2List ), np.float )\n\nsol, err = curve_fit( fit_func, time1List, tempList, [ 40, 150, 63, 10, 0 ] )\nprint sol\n\nfittedLow, fittedHigh, fittedPeriod, fittedS, fittedOff = sol\nrealHigh = fit_func( fittedPeriod / 4., *sol)\nrealLow = fit_func( 3 / 4. * fittedPeriod, *sol)\nprint \"high, low : \", [ realHigh, realLow ]\nprint \"apprx ramp: \", fittedPeriod/( 2 * np.pi * fittedS ) * 2\n\nrealAmp = realHigh - realLow\nrampX, rampY = zip( *[ [ t, d ] for t, d in zip( time1List, tempList ) if ( ( d &lt; realHigh - 0.05 * realAmp ) and ( d &gt; realLow + 0.05 * realAmp ) ) ] )\ntopX, topY = zip( *[ [ t, d ] for t, d in zip( time1List, tempList ) if ( ( d &gt; realHigh - 0.05 * realAmp ) ) ] )\nbotX, botY = zip( *[ [ t, d ] for t, d in zip( time1List, tempList ) if ( ( d &lt; realLow + 0.05 * realAmp ) ) ] )\n\nfig = plt.figure()\nax = fig.add_subplot( 2, 1, 1 )\nbx = fig.add_subplot( 2, 1, 2 )\n\nax.plot( time1List, tempList, marker='x', linestyle='', zorder=100 )\nax.plot( time2List, fit_func( time2List, *sol ), zorder=0 )\n\nbx.plot( time1List, tempList, marker='x', linestyle='' )\nbx.plot( time2List, fit_func( time2List, *sol ) )\nbx.plot( rampX, rampY, linestyle='', marker='o', markersize=10, fillstyle='none', color='r')\nbx.plot( topX, topY, linestyle='', marker='o', markersize=10, fillstyle='none', color='#00FFAA')\nbx.plot( botX, botY, linestyle='', marker='o', markersize=10, fillstyle='none', color='#80DD00')\nbx.set_xlim( [ 0, 800 ] )\nplt.show()\n</code></pre>\n\n<p>providing:</p>\n\n<pre><code>&gt;&gt; [155.0445024   40.7417905   63.29983807  13.07677546 -26.36945489]\n&gt;&gt; high, low :  [155.04450237880076, 40.741790521444436]\n&gt;&gt; apprx ramp:  1.540820542195840\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/LYWVz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LYWVz.png\" alt=\"Test data and fit + zoom \"></a></p>\n\n<p>There is a few things to note. My fit function works better if the ramp is small compared to the dwell time. Moreover, one will find several posts here where the fitting of step functions is discussed. In general, as fitting requires a meaningful derivative, discrete functions are a problem. There are at least two solutions. a) make a continuous version, fit, and make the result discrete to your liking or b) provide a discrete function and a manual continuous derivative.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>So here is what I get working with your newly posted data set:</p>\n\n<pre><code>import matplotlib.pyplot as plt\nimport numpy as np\nfrom scipy.optimize import curve_fit, minimize\n\ndef partition( inList, n ):\n    return zip( *[ iter( inList ) ] * n )\n\ndef temp( t, low, high, period, ramp, off ):\n    tRed = (t - off ) % period\n    dwell = period / 2. - ramp\n    if tRed &lt; dwell:\n        out = high\n    elif tRed &lt; dwell + ramp:\n        out = high - ( tRed - dwell ) / ramp * ( high - low )\n    elif tRed &lt; 2 * dwell + ramp:\n        out = low\n    elif tRed &lt;= period:\n        out = low + ( tRed - 2 * dwell - ramp)/ramp * ( high -low )\n    else:\n        assert 0\n    return out\n\ndef chi2( params, xData=None, yData=None, verbose=False ):\n    low, high, period, ramp, off = params\n    th = np.fromiter( ( temp( t, low, high, period, ramp, off ) for t in xData ), np.float )\n    diff = ( th - yData )\n    diff2 = diff**2\n    out = np.sum( diff2 )\n    if verbose:\n        print '-----------'\n        print th\n        print diff\n        print diff2\n        print '-----------'\n    return out\n    # ~ return th\n\ndef fit_func( t, low, high, period, s,  delta):\n    return  ( high + low ) / 2. + ( high - low )/2. * np.tanh( s * np.sin( 2 * np.pi * ( t - delta ) / period ) )\n\n\ninData = np.loadtxt('SOF2.csv', skiprows=1, delimiter=',' )\ninData2 = inData[ :, 2 ]\nxList = np.arange( len(inData2) )\ninData480 = partition( inData2, 480 )\nxList480 = partition( xList, 480 )\ninDataMean = np.fromiter( (np.mean( x ) for x in inData480 ), np.float )\nxMean = np.arange( len( inDataMean) ) * 16\ntime1List = np.linspace( 0, 16 * len(inDataMean), 500 )\n\nsol, err = curve_fit( fit_func, xMean, inDataMean, [ -40, 150, 60, 10, 10 ] )\nprint sol\n\n# ~ print chi2([-49,155,62.5,1 , 8.6], xMean, inDataMean )\nres = minimize( chi2, [-44.12, 150.0, 62.0,  8.015,  12.3 ], args=( xMean, inDataMean ), method='nelder-mead' )\n# ~ print res\nprint res.x\n\n# ~ print chi2( res.x, xMean, inDataMean, verbose=True )\n# ~ print chi2( [-44.12, 150.0, 62.0,  8.015,  6.3], xMean, inDataMean, verbose=True )\n\nfig = plt.figure()\nax = fig.add_subplot( 2, 1, 1 )\nbx = fig.add_subplot( 2, 1, 2 )\n\nfor x,y in zip( xList480, inData480):\n    ax.plot( x, y, marker='x', linestyle='', zorder=100 )\n\nbx.plot( xMean, inDataMean , marker='x', linestyle='' )\nbx.plot( time1List, fit_func( time1List, *sol ) )\n\nbx.plot( time1List, np.fromiter( ( temp( t , *res.x ) for t in time1List ), np.float) )\nbx.plot( time1List, np.fromiter( ( temp( t , -44.12, 150.0, 62.0,  8.015,  12.3 ) for t in time1List ), np.float) )\n\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/RxEVc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RxEVc.png\" alt=\"new fit\"></a></p>\n\n<pre><code>&gt;&gt; [-49.53569904 166.92138068  62.56131027   1.8547409    8.75673747]\n&gt;&gt; [-34.12188737 150.02194584  63.81464913   8.26491754  13.88344623]\n</code></pre>\n\n<p>As you can see, the data point on the ramp does not fit in. So, it might be that the 16 min time is not that constant? That would be a problem as this is not a local x-error but an accumulating effect. </p>\n"}, {"tags": [], "owner": {"reputation": 2939, "user_id": 803359, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/pnuDZ.jpg?s=128&g=1", "display_name": "mikuszefski", "link": "https://stackoverflow.com/users/803359/mikuszefski"}, "is_accepted": false, "score": 1, "last_activity_date": 1553678048, "creation_date": 1553678048, "answer_id": 55373470, "question_id": 55270346, "link": "https://stackoverflow.com/questions/55270346/how-can-fit-the-data-on-temperature-thermal-profile/55373470#55373470", "title": "How can fit the data on temperature/thermal profile?", "body": "<p>If you are only interested in the two temperature levels, this might be useful:</p>\n\n<pre><code>import matplotlib.pyplot as plt\nimport numpy as np\nfrom scipy.optimize import curve_fit\n\ninData = np.loadtxt('SOF.csv', skiprows=1, delimiter=',' )\n\ndef gauss( x, s ):\n    return 1. / np.sqrt( 2. * np.pi * s**2 ) * np.exp( -x**2 / ( 2. * s**2 ) )\n\ndef two_peak( x , a1, mu1, s1, a2, mu2, s2 ):\n    return a1 * gauss( x - mu1, s1 ) + a2 * gauss( x - mu2, s2 )\n\nfList = inData[ :, 2 ]\n\nnBins = 2 * int( max( fList ) - min( fList ) )\nfig = plt.figure()\n\nax = fig.add_subplot( 2, 1 , 1 )\nax.plot( fList , marker='x' )\nbx = fig.add_subplot( 2, 1 , 2 )\nhistogram, binEdges, _ = bx.hist( fList, bins=nBins )\n\nbinCentre = np.fromiter( (  ( a + b ) / 2. for a,b in zip( binEdges[ 1: ], binEdges[ :-1 ] ) ) , np.float )\nsol, err = curve_fit( two_peak, binCentre, histogram, [ 120, min( fList ), 1 ] + [ 500, max( fList ), 1 ] )\nprint sol[1], sol[4]\nprint sol[2], sol[5]\nbx.plot( binCentre, two_peak( binCentre, *sol ) )\nbx.set_yscale( 'log' )\nbx.set_ylim( [ 1e-0, 5e3] )\nplt.show()\n</code></pre>\n\n<p>providing:</p>\n\n<pre><code>&gt;&gt; -46.01513424923528 150.06381412858244\n&gt;&gt; 1.8737971845243133 0.6964990809008554\n</code></pre>\n\n<p>and </p>\n\n<p><a href=\"https://i.stack.imgur.com/ChFkm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ChFkm.png\" alt=\"Histogram fit\"></a></p>\n\n<p>Interestingly your non-plateau data is all around zero, so that's probably not due to the ramp, but a different effect.</p>\n"}], "owner": {"reputation": 821, "user_id": 10452700, "user_type": "registered", "profile_image": "https://graph.facebook.com/2172245999723325/picture?type=large", "display_name": "Mario", "link": "https://stackoverflow.com/users/10452700/mario"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 385, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1554210886, "creation_date": 1553116655, "last_edit_date": 1553709890, "question_id": 55270346, "link": "https://stackoverflow.com/questions/55270346/how-can-fit-the-data-on-temperature-thermal-profile", "title": "How can fit the data on temperature/thermal profile?", "body": "<p>I have a dataset consisting of a certain temperature profile and I wanna fit or map the measurement points on temperature profile which is following:</p>\n\n<p><strong>Dwell-time:</strong> 30 mins</p>\n\n<p><strong>Ramp-time:</strong> 1 min</p>\n\n<p><strong>Number of periods:</strong> 1000 cycles</p>\n\n<p><strong>Measure points period:</strong> 16 mins</p>\n\n<p>Measure points can be happened in either in high regim +150 or low regim -40 </p>\n\n<p><strong>Note:</strong> The T0 (initial time) is not clear so time reference is not clear eg. T0=0 .</p>\n\n<p><img src=\"https://i.imgur.com/f7WxJKY.jpg\" alt=\"img\"></p>\n\n<p>I already fetched the data in Pandas DataFrame:</p>\n\n<pre><code>import numpy as np\nimport pandas as pd\nfrom scipy.optimize import curve_fit\n\ndf = pd.read_csv('D:\\SOF.csv', header=None)\ndata = {'A': A[:,0], 'B': B[:,0], 'Temperature': Temperature[:,0],\n        'S':S, 'C':C , 'Measurement_Points':MP}\ndff = pd.DataFrame(data, columns=['A','B','Temperature','S','C','MP'], index = id_set[:,0])\n# Temperature's range is [-40,+150]\n# MP's range is [0-3000] from 1st MP till last one\nMP = int(len(dff)/480) # calculate number of measurement points \nprint(MP)\nfor cycle in range(MP):             \n    j = cycle * 480\n    #use mean or average of each 480 values from temperature column of DataFrame to pass for fit on Thermal profile\n    Mean_temp = np.mean(df['Temperature'].iloc[j:j+480]) # by using Mean from numpy\n    #Mean_temp = df.groupby('Temperature').mean() #by using groupby \n</code></pre>\n\n<p>So far I just find <code>curve_fit</code> from <code>scipy.optimize</code> based on this <a href=\"https://stackoverflow.com/a/11448050/10452700\">answer</a> and this <a href=\"https://stackoverflow.com/questions/46228031/python-clipping-out-data-to-fit-profiles\">post</a>\n but I am wondering how the fitting process could work right here in the other hand I would like Temperature values <strong>round only to the nearest</strong> either <strong>-40</strong> or <strong>+150</strong> .\nI would be nice if someone can help me!</p>\n\n<p><strong>Update:</strong> Standard periodic Thermal profile pic is following:\n<img src=\"https://i.imgur.com/tFzKtRy.jpg\" alt=\"img\"></p>\n\n<p><strong>expected result:</strong>\n<img src=\"https://i.imgur.com/zr1D8Ku.jpg\" alt=\"img\"></p>\n\n<p><strong>updated Data sample:</strong> <a href=\"https://drive.google.com/file/d/1Kg89VoHGUQLo8yliQiTlVFt7Jbx0lXB8/view?usp=sharing\" rel=\"nofollow noreferrer\">data</a></p>\n"}, {"tags": ["python", "json", "python-requests"], "comments": [{"owner": {"reputation": 652, "user_id": 1317713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cd0dbe57ed107fdf0b871ecbb22759e?s=128&d=identicon&r=PG", "display_name": "Leonid", "link": "https://stackoverflow.com/users/1317713/leonid"}, "edited": false, "score": 0, "creation_date": 1553116778, "post_id": 55270317, "comment_id": 97271892, "body": "I would not build json text in code. I would build a Python data structure and then convert that using the json library. See this answer for an example: <a href=\"https://stackoverflow.com/a/9952774/1317713\">stackoverflow.com/a/9952774/1317713</a>  <a href=\"https://docs.python.org/3/library/json.html\" rel=\"nofollow noreferrer\">docs.python.org/3/library/json.html</a>"}, {"owner": {"reputation": 12516, "user_id": 302268, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c3985dffcdc646b67ed0699a364639e2?s=128&d=identicon&r=PG", "display_name": "Mad Wombat", "link": "https://stackoverflow.com/users/302268/mad-wombat"}, "edited": false, "score": 1, "creation_date": 1553117214, "post_id": 55270317, "comment_id": 97272058, "body": "Eh... your code says <code>&#39; &#39;.join(</code> so you are joining all your entries into a single string. And that string ends up quoted because, well, it is a string. And you have <code>[printcorrectly]</code> so you end up with a string inside a list. And that is exactly the value you get. What do you expect to get?"}, {"owner": {"reputation": 11, "user_id": 11234396, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-t9LAq-m7-8Q/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdbb4vTfXr1qFcoqkZQxV0YgOFPXw/mo/photo.jpg?sz=128", "display_name": "Vuotto", "link": "https://stackoverflow.com/users/11234396/vuotto"}, "edited": false, "score": 0, "creation_date": 1553121634, "post_id": 55270317, "comment_id": 97273581, "body": "Converting it to a string was, to my knowledge, the only way for it to retain the format necessary to pass to the API. I&#39;m not fluent in Python, but I was under the impression that there would be way to further format the string within the for loop."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 11234396, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-t9LAq-m7-8Q/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdbb4vTfXr1qFcoqkZQxV0YgOFPXw/mo/photo.jpg?sz=128", "display_name": "Vuotto", "link": "https://stackoverflow.com/users/11234396/vuotto"}, "edited": false, "score": 0, "creation_date": 1553121519, "post_id": 55270620, "comment_id": 97273548, "body": "Thank you for your insight, I do appreciate the help! I did originally have it without the brackets, but doing so still prints the payload with the quotes, and without the brackets. The brackets are necessary for the structure of the payload. It&#39;s just the single quotes outside of the curly braces, and I can&#39;t seem to figure it out."}], "tags": [], "owner": {"reputation": 1025, "user_id": 11115679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W9WGZ.png?s=128&g=1", "display_name": "Granny Aching", "link": "https://stackoverflow.com/users/11115679/granny-aching"}, "is_accepted": false, "score": 0, "last_activity_date": 1553118124, "creation_date": 1553118124, "answer_id": 55270620, "question_id": 55270317, "link": "https://stackoverflow.com/questions/55270317/python-requests-body-automatically-adds-single-quotes/55270620#55270620", "title": "Python Requests Body Automatically Adds Single Quotes", "body": "<p>Your code:</p>\n\n<pre><code>for item in domain_list_formatted_tuple:\n   printcorrectly = ' '.join(map(str, (domain_list_formatted_tuple)))   \n   payload[\"threatInfo\"][\"threatEntries\"] = [printcorrectly]\n</code></pre>\n\n<p>should probably be:</p>\n\n<pre><code>for item in domain_list_formatted_tuple:\n   printcorrectly = ' '.join(map(str, (domain_list_formatted_tuple)))   \n   payload[\"threatInfo\"][\"threatEntries\"] = printcorrectly\n</code></pre>\n\n<p>without the brackets around <code>printcorrectly</code></p>\n\n<p>If you have :</p>\n\n<pre><code>a = ['xxx']\nprint(a)\n</code></pre>\n\n<p>You will get output <code>['xxx']</code> with brackets and quotation marks.</p>\n"}], "owner": {"reputation": 11, "user_id": 11234396, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-t9LAq-m7-8Q/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdbb4vTfXr1qFcoqkZQxV0YgOFPXw/mo/photo.jpg?sz=128", "display_name": "Vuotto", "link": "https://stackoverflow.com/users/11234396/vuotto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 394, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1553118124, "creation_date": 1553116529, "question_id": 55270317, "link": "https://stackoverflow.com/questions/55270317/python-requests-body-automatically-adds-single-quotes", "title": "Python Requests Body Automatically Adds Single Quotes", "body": "<p>In my python script, I'm trying to loop through a text file containing domain names, and fill them to my JSON request body. The correct format required for the API call is</p>\n\n<pre><code>payload =   {\n\"threatInfo\": { \n  \"threatEntries\": [\n   {\"url\": \"http://malware.wicar.org/\"}, {\"url\": \"http://urltocheck2.org\"},\n\n  ]\n}\n}\n</code></pre>\n\n<p>The variable I'm using to replicate this is called mystring</p>\n\n<pre><code>domain_list_formatted = []\n\nfor item in domain_list:\n    domain_list_formatted.append(\"\"\"{\"url\": \"\"\" + '\"{}\"'.format(item) + \"},\")\n\ndomain_list_formatted_tuple= tuple(domain_list_formatted)\n\nmystring = ' '.join(map(str, (domain_list_formatted_tuple)))\n</code></pre>\n\n<p>Printing mystring gets me the results I need to pass to the payload variable</p>\n\n<pre><code>{\"url\": \"http://malware.wicar.org/\"},\n{\"url\": \"http://www.urltocheck2.org/\"},\n</code></pre>\n\n<p>However, I want to loop this, so I add the following loop</p>\n\n<pre><code>for item in domain_list_formatted_tuple:\n   printcorrectly = ' '.join(map(str, (domain_list_formatted_tuple)))   \n   payload[\"threatInfo\"][\"threatEntries\"] = [printcorrectly]\n</code></pre>\n\n<p>And this is the result:</p>\n\n<pre><code>['{\"url\": \"http://malware.wicar.org/\"}, {\"url\": \"http://www.urltocheck2.org/\"}']\n</code></pre>\n\n<p>The single quotes on the outside of the bracket completely throw it off. How is the for loop modifying or encoding the payload in a way that's creating this issue? Your help would be greatly appreciated.</p>\n"}, {"tags": ["python", "oop"], "answers": [{"comments": [{"owner": {"reputation": 21440, "user_id": 225020, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/6ae07ec5b34fce5a6c5437fbdab9f079?s=128&d=identicon&r=PG", "display_name": "Jab", "link": "https://stackoverflow.com/users/225020/jab"}, "edited": false, "score": 0, "creation_date": 1553117485, "post_id": 55270369, "comment_id": 97272169, "body": "Dang you beat me to it! If I remember correctly you had it as a list originally so I started writing this then you edited haha nice though!"}, {"owner": {"reputation": 2995, "user_id": 667913, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/e038b48be307830687c8a71ff716ba07?s=128&d=identicon&r=PG", "display_name": "patrick", "link": "https://stackoverflow.com/users/667913/patrick"}, "edited": false, "score": 0, "creation_date": 1553117539, "post_id": 55270369, "comment_id": 97272192, "body": "nice one, nitpick that OP wanted to return <code>return the name and cost of that particular book</code>, not the entire book object, e.g. by returning list or tuple."}, {"owner": {"reputation": 4323, "user_id": 1720199, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cODPq.jpg?s=128&g=1", "display_name": "cglacet", "link": "https://stackoverflow.com/users/1720199/cglacet"}, "edited": false, "score": 0, "creation_date": 1553117997, "post_id": 55270369, "comment_id": 97272390, "body": "Now that I think about it, I think (giving the name of the method) that the goal was to call <code>.show()</code> on a given book using its <code>ID</code>, let me know if that&#39;s not the case."}], "tags": [], "owner": {"reputation": 4323, "user_id": 1720199, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cODPq.jpg?s=128&g=1", "display_name": "cglacet", "link": "https://stackoverflow.com/users/1720199/cglacet"}, "is_accepted": false, "score": 2, "last_activity_date": 1553117935, "last_edit_date": 1553117935, "creation_date": 1553116808, "answer_id": 55270369, "question_id": 55270305, "link": "https://stackoverflow.com/questions/55270305/searching-for-an-id-in-a-list-of-books/55270369#55270369", "title": "Searching for an ID in a list of books", "body": "<p>I think the simplest idea if you need <code>ID</code> indexing is to use a <a href=\"https://docs.python.org/3/tutorial/datastructures.html?highlight=dictionary#dictionaries\" rel=\"nofollow noreferrer\">dictionary</a>:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>class Library:\n    def __init__(self):\n        self.books = dict()\n\n    def add_book(self, Book):\n        self.books[Book.ID] = Book\n\n    def remove_book(self, Book):\n        del self.books[Book.ID]\n\n    def get_book(self, ID):\n        return self.books[ID]\n\n    def show_id(self, ID):\n        self.get_book(ID).show()\n\n    def show_all(self):\n        for Book in self.books.values():\n            Book.show()\n</code></pre>\n\n<p>You could even rename <code>get_book</code> to <a href=\"https://docs.python.org/3/reference/datamodel.html#object.__getitem__\" rel=\"nofollow noreferrer\"><code>__getitem__</code></a>, this second name is special in python, it's called a dunder method (or magic method). Implementing it will allow you to write <code>lib[id]</code> instead of <code>lib.show_id(id)</code> (I'm not saying that you should, but that's an option). There are many other dunder methods that you can try using for fun, you can find some of them in the <a href=\"https://docs.python.org/3/reference/datamodel.html\" rel=\"nofollow noreferrer\">python data model</a>. </p>\n\n<p>I think that you should post your code on <a href=\"https://codereview.stackexchange.com\"><strong>codereview</strong></a> as you may use broader advices on your code. </p>\n"}, {"tags": [], "owner": {"reputation": 427, "user_id": 8843390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2b78ac6a5f9b01957bd550fceeec515?s=128&d=identicon&r=PG&f=1", "display_name": "Alakazam", "link": "https://stackoverflow.com/users/8843390/alakazam"}, "is_accepted": false, "score": -1, "last_activity_date": 1553117312, "creation_date": 1553117312, "answer_id": 55270468, "question_id": 55270305, "link": "https://stackoverflow.com/questions/55270305/searching-for-an-id-in-a-list-of-books/55270468#55270468", "title": "Searching for an ID in a list of books", "body": "<p>Even if this method is not really optimized, you can go through them with a for loop.<br></p>\n\n<pre><code>for book in lib.books:\n    if book.id == searched_id:\n        searched_book = book\n        break\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2995, "user_id": 667913, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/e038b48be307830687c8a71ff716ba07?s=128&d=identicon&r=PG", "display_name": "patrick", "link": "https://stackoverflow.com/users/667913/patrick"}, "is_accepted": false, "score": 0, "last_activity_date": 1553117725, "last_edit_date": 1553117725, "creation_date": 1553117333, "answer_id": 55270471, "question_id": 55270305, "link": "https://stackoverflow.com/questions/55270305/searching-for-an-id-in-a-list-of-books/55270471#55270471", "title": "Searching for an ID in a list of books", "body": "<p>As  noted above, there might be better implementations, but using your current code, you can do the below where I have adapted your <code>show_id</code> function according to requirements. It relies on a <a href=\"https://www.programiz.com/python-programming/list-comprehension\" rel=\"nofollow noreferrer\">list comprehension</a> to identify the correct IDs. </p>\n\n<p>Hope this helps!</p>\n\n<pre><code>class Book:\n\n    def __init__(self, ID, name, price):\n        self.ID = ID\n        self.name = name\n        self.price = price\n\n    def show(self):\n        print(self.ID, self.name, self.price)\n\n    def get_attribute_string(self):\n        print(str(self.ID) + '_' + str(self.name) + '_' + str(self.price))\n\n    def get_id(self):\n        print(self.ID)\n\n    def get_name(self):\n        print(self.name)\n\n    def get_price(self):\n        print(self.price)\n\n\nclass Library:\n    def __init__(self):\n        self.books = []\n\n    def add_book(self, Book):\n        self.books.append(Book)\n\n    def remove_book(self, Book):\n        self.books.remove(Book)\n\n    def show_id(self, ID):\n        # simple list comprehension to filter; note that you might need to make sure that e.g. all IDs are int, or str\n        matching_ids = [book for book in self.books if book.ID == ID]\n        # return name, price tuple for all matching books as requested -- note that this will return a list of all matches\n        # if the IDs are truly unique, you can return e.g. a single tuple or Book object here\n        # if nothing found, will return empty list\n        return [(book.name, book.price) for book in matching_ids]\n\n\n    def show_all(self):\n        for Book in self.books:\n            Book.show()\n\n\n\nif __name__ == '__main__':\n    lib = Library()\n    book1 = Book(1, 'Bookname1', \"$30\")\n    book2 = Book(2, 'Bookname2', \"$10\")\n    book3 = Book(3, 'Bookname3', \"$40\")\n    #1.show_id\n    lib.add_book(book1)\n    lib.add_book(book2)\n    lib.add_book(book3)\n    lib.remove_book(book2)\n    lib.show_all()\n    print(lib.show_id(1))\n\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 10580070, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ljySSUIikM4/AAAAAAAAAAI/AAAAAAAAAjA/S3A_OJQu0Ag/photo.jpg?sz=128", "display_name": "daanneek", "link": "https://stackoverflow.com/users/10580070/daanneek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1553117935, "creation_date": 1553116483, "question_id": 55270305, "link": "https://stackoverflow.com/questions/55270305/searching-for-an-id-in-a-list-of-books", "title": "Searching for an ID in a list of books", "body": "<p>I've made a simple library system which stores books with an ID, name and cost. My question is rather simple but my limited knowledge of python has let me down. </p>\n\n<p>I've created a class that stores books in the library, they are created like this;</p>\n\n<pre><code>if __name__ == '__main__':\n    lib = Library()\n    book1 = Book(1, 'Bookname1', \"$30\")\n    book2 = Book(2, 'Bookname2', \"$10\")\n    book3 = Book(3, 'Bookname3', \"$40\")\n</code></pre>\n\n<p>I have to make a function that searches for a book by its ID, by making a function in my library class. I tried to make it like in the code below, but it didn't work. basically, I want to give my function an ID, and it should return the name and cost of that particular book, but only if the ID is present in the list.   </p>\n\n<pre><code>class Book:\n\n    def __init__(self, ID, name, price):\n        self.ID = ID\n        self.name = name\n        self.price = price\n\n    def show(self):\n        print(self.ID, self.name, self.price)\n\n    def get_attribute_string(self):\n        print(str(self.ID) + '_' + str(self.name) + '_' + str(self.price))\n\n    def get_id(self):\n        print(self.ID)\n\n    def get_name(self):\n        print(self.name)\n\n    def get_price(self):\n        print(self.price)\n\n\nclass Library:\n    def __init__(self):\n        self.books = []\n\n    def add_book(self, Book):\n        self.books.append(Book)\n\n    def remove_book(self, Book):\n        self.books.remove(Book)\n\n    #def show_id(self, ID):\n    #    if ID in lib:\n    #        return self.books\n\n    def show_all(self):\n        for Book in self.books:\n            Book.show()\n\n\n\nif __name__ == '__main__':\n    lib = Library()\n    book1 = Book(1, 'Bookname1', \"$30\")\n    book2 = Book(2, 'Bookname2', \"$10\")\n    book3 = Book(3, 'Bookname3', \"$40\")\n    #1.show_id\n    lib.add_book(book1)\n    lib.add_book(book2)\n    lib.add_book(book3)\n    lib.remove_book(book2)\n    lib.show_all()\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 3962, "user_id": 9462829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dd68e18954cab2275b2cc02845a37d9?s=128&d=identicon&r=PG&f=1", "display_name": "Juan C", "link": "https://stackoverflow.com/users/9462829/juan-c"}, "edited": false, "score": 1, "creation_date": 1553116662, "post_id": 55270269, "comment_id": 97271827, "body": "Hey Josh, why does <code>determine_grade</code> use five arguments if you only use the <code>a</code> variable in it? You should probably call that function five times instead of writing unused arguments"}], "answers": [{"tags": [], "owner": {"reputation": 3962, "user_id": 9462829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dd68e18954cab2275b2cc02845a37d9?s=128&d=identicon&r=PG&f=1", "display_name": "Juan C", "link": "https://stackoverflow.com/users/9462829/juan-c"}, "is_accepted": false, "score": 0, "last_activity_date": 1553117421, "creation_date": 1553117421, "answer_id": 55270495, "question_id": 55270269, "link": "https://stackoverflow.com/questions/55270269/why-is-each-grade-inputted-the-same-no-matter-what-the-program-defines-including/55270495#55270495", "title": "Why is each grade inputted the same no matter what the program defines including the average?", "body": "<p>Okay, so there's some things to talk about here. First, I suggest that you experiment a bit more with simpler functions to properly get used to them. When you define <code>determine_grade(a,b,c,d,e)</code> your function will expect to find a,b,c,d,e arguments inside the function, but if you read it again, you'll notice that you only mention <code>a</code>. This means when you call <code>grade=determine_grade(a,b,c,d,e)</code> you're only calculating a's grade, and that's why you have the same grade for everyone (if you type <code>grade</code> with your code you'll notice it will output <code>'A'</code>.</p>\n\n<p>Another way to write a function that does exactly what you're looking for is this:</p>\n\n<pre><code>def determine_grade(score):\n    num=score\n    if(num&lt;=100 and num&gt;=90):\n        grade='A'\n    elif(num&lt;=89 and num&gt;=80):\n        grade='B'\n    elif(num&lt;=79 and num&gt;=70):\n        grade='C'\n    elif(num&lt;=69 and num&gt;=60):\n        grade='D'\n    else:\n        grade='F'\n    return grade\n</code></pre>\n\n<p>You input a score (that can be a,b,c,d or e) and it calculates a grade. If you want to get everyone's grade, then you can do something like this:</p>\n\n<pre><code>grades=[]\nfor i in [a,b,c,d,e]:\n    grades.append(determine_grade(i))\n</code></pre>\n\n<p>This will bring a list with all grades.</p>\n\n<p>Then, if you want the average grade, it's better to calculate the average score, so you can use your same function to get the grade: </p>\n\n<pre><code>mean_score=np.array([a,b,c]).mean()\nmean_grade(determine_grade(mean_score)\n</code></pre>\n\n<p>Doing this you'll have all the information you need with way less lines of code (And you can make it even more efficient using list comprehensions, but that's a bit more advanced).</p>\n"}, {"tags": [], "owner": {"reputation": 5007, "user_id": 10924296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/483c21a8a3f03bbf92cb99539ec97dbc?s=128&d=identicon&r=PG&f=1", "display_name": "Reedinationer", "link": "https://stackoverflow.com/users/10924296/reedinationer"}, "is_accepted": false, "score": 0, "last_activity_date": 1553119048, "last_edit_date": 1553119048, "creation_date": 1553118705, "answer_id": 55270722, "question_id": 55270269, "link": "https://stackoverflow.com/questions/55270269/why-is-each-grade-inputted-the-same-no-matter-what-the-program-defines-including/55270722#55270722", "title": "Why is each grade inputted the same no matter what the program defines including the average?", "body": "<p>To answer your question, your functions should be rewritten to accept a single input and then called several times. Also, your program is a classic case of something that should be DRYed up (Don't Repeat Yourself). Instead of manually typing <code>a = input()</code>, <code>b = input()</code> why not consider just tossing all these inputs into a list (perhaps with some string formatting on your prompt like my code). Below is a program that can easily be adjusted to accept arbitrary amounts of inputs:</p>\n\n<pre><code>input_scores = [] # make our list\nscores_input = 5 # tell the program we have 5 scores to record\nfor input_count in range(1, scores_input + 1):\n    input_scores.append(float(input(\"Enter score {}:\".format(input_count))))\n\ndef determine_grade(percent): # single input\n    if 90 &lt;= percent &lt;= 100:\n        grade = 'A'\n    elif 80 &lt;= percent &lt;= 89:\n        grade = 'B'\n    elif 70 &lt;= percent &lt;= 79:\n        grade = 'C'\n    elif 60 &lt;= percent &lt;= 69:\n        grade = 'D'\n    else:\n        grade = 'F'\n    return grade # single output\n\ndef calc_average(local_score_list): # expects the list we made earlier (many inputs)\n    mean = sum(local_score_list) // len(local_score_list)\n    if 90 &lt;= mean &lt;= 100:\n        average_grade = 'A'\n    elif 80 &lt;= mean &lt;= 89:\n        average_grade = 'B'\n    elif 70 &lt;= mean &lt;= 79:\n        average_grade = 'C'\n    elif 60 &lt;= mean &lt;= 69:\n        average_grade = 'D'\n    else:\n        average_grade = 'F'\n    return mean, average_grade # have our function return both values, since it calculated them both anyways\n\ncompiled_scores = []\nfor test_score in input_scores:\n    letter_grade = determine_grade(test_score) # calling our single input/output function many times in a for loop\n    compiled_scores.append((test_score, letter_grade)) # creating a tuple so each letter and percent is stored together\n\nmean_percent, mean_letter_grade = calc_average(input_scores) # decompile both values from our function\nprint(\"Score           Numeric Grade   Letter Grade\")\nprint(\"--------------------------------------------\")\n# now we iterate through all the scores made and print them\nfor count, result_tuple in enumerate(compiled_scores, 1): # just print the scores in a loop\n    print(\"Score {}:         \".format(count), result_tuple[0], \"            \", result_tuple[1])\n\nprint(\"--------------------------------------------\")\nprint(\"Average Score:   \", mean_percent, \"            \", mean_letter_grade)\n</code></pre>\n\n<p>You can see that we condensed our <code>input()</code> lines -> a single line, and condensed the print statements as well! Now our program can take, say, 30 scores and work just as well!!! (This is huge)!! And all that is required to change is the number <code>5</code> at the top of our script -> <code>30</code>. No longer will we have to type <code>print('this')</code> or <code>input('that')</code>! Our script will automatically adjust because we made it able to scale with our list.</p>\n\n<p>My test case (using same numbers from your post):</p>\n\n<pre><code>Enter score 1:90\nEnter score 2:88\nEnter score 3:76\nEnter score 4:68\nEnter score 5:40\nScore           Numeric Grade   Letter Grade\n--------------------------------------------\nScore 1:          90.0              A\nScore 2:          88.0              B\nScore 3:          76.0              C\nScore 4:          68.0              D\nScore 5:          40.0              F\n--------------------------------------------\nAverage Score:    72.4              C\n</code></pre>\n\n<p>Let me know if you need further clarification on something I posted!</p>\n"}], "owner": {"reputation": 37, "user_id": 11182122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0134be6f02d7f337a461d738ee7ceaa0?s=128&d=identicon&r=PG&f=1", "display_name": "Josh S", "link": "https://stackoverflow.com/users/11182122/josh-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 24, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1553119048, "creation_date": 1553116341, "question_id": 55270269, "link": "https://stackoverflow.com/questions/55270269/why-is-each-grade-inputted-the-same-no-matter-what-the-program-defines-including", "title": "Why is each grade inputted the same no matter what the program defines including the average?", "body": "<p>The program is as follows: Write a program that asks the user to input 5 test scores. The program should display a letter grade for each score and the average test score.</p>\n\n<p>I am having issues with my output showing me a letter grade of the first inputted grade for every grade including the average. My numeric average is also being outputted as a letter grade, but it gives the correct average letter for that rather than the correct numeric result for the grade. I am in a low level coding class, therefore the program must be written in this format.</p>\n\n<p>Here is the code:</p>\n\n<pre><code>a=float(input(\"Enter score 1:\"))\nb=float(input(\"Enter score 2:\"))\nc=float(input(\"Enter score 3:\"))\nd=float(input(\"Enter score 4:\"))\ne=float(input(\"Enter score 5:\"))\ndef determine_grade(a,b,c,d,e):\n    num=a\n    if(num&lt;=100 and num&gt;=90):\n        grade='A'\n    elif(num&lt;=89 and num&gt;=80):\n        grade='B'\n    elif(num&lt;=79 and num&gt;=70):\n        grade='C'\n    elif(num&lt;=69 and num&gt;=60):\n        grade='D'\n    else:\n        grade='F'\n    return grade\n\ndef calc_average(a,b,c,d,e):\n    mean=(a+b+c+d+e)//5\n    if mean&lt;=100 and mean&gt;=90:\n        avggrade='A'\n    elif(mean&lt;=89 and mean&gt;=80):\n        avggrade='B'\n    elif(mean&lt;=79 and mean&gt;=70):\n        avggrade='C'\n    elif(mean&lt;=69 and mean&gt;=60):\n        avggrade='D'\n    else:\n        avggrade='F'\n    return avggrade\n\ngrade=determine_grade(a,b,c,d,e)\navggrade=determine_grade(a,b,c,d,e)\nmean=calc_average(a,b,c,d,e)\ndetermine_grade(a,b,c,d,e)\ncalc_average(a,b,c,d,e)\nprint(\"Score           Numeric Grade   Letter Grade\")\nprint(\"--------------------------------------------\")\nprint(\"Score 1:         \",a,\"            \",grade)\nprint(\"Score 2:         \",b,\"            \",grade)\nprint(\"Score 3:         \",c,\"            \",grade)\nprint(\"Score 4:         \",d,\"            \",grade)\nprint(\"Score 5:         \",e,\"            \",grade)\nprint(\"--------------------------------------------\")\nprint(\"Average Score:   \",mean,\"            \",avggrade)\n</code></pre>\n\n<p>Whenever I put in (a):</p>\n\n<pre><code>num=a,b,c,d,e\n</code></pre>\n\n<p>in place of what is shown in the code, I get a syntax error saying:</p>\n\n<pre><code>TypeError: '&lt;=' not supported between instances of 'tuple' and 'int'\n</code></pre>\n\n<p>If I don't do what has been shown in (a), my output is this:</p>\n\n<pre><code>Enter score 1:90\nEnter score 2:88\nEnter score 3:76\nEnter score 4:68\nEnter score 5:40\nScore           Numeric Grade   Letter Grade\n--------------------------------------------\nScore 1:          90.0              A\nScore 2:          88.0              A\nScore 3:          76.0              A\nScore 4:          68.0              A\nScore 5:          40.0              A\n--------------------------------------------\nAverage Score:    C              A\n</code></pre>\n"}, {"tags": ["python", "django", "django-models", "django-rest-framework", "django-views"], "comments": [{"owner": {"reputation": 38630, "user_id": 1324033, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/PaonW.png?s=128&g=1", "display_name": "Sayse", "link": "https://stackoverflow.com/users/1324033/sayse"}, "edited": false, "score": 0, "creation_date": 1553118328, "post_id": 55270243, "comment_id": 97272501, "body": "Please make an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1553119107, "post_id": 55270243, "comment_id": 97272753, "body": "and post the full traceback."}], "owner": {"reputation": 31, "user_id": 11097251, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Sjoa8RGF5IA/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQO3gPBA_4LkIHNzNrnF3pb8gksSaA/mo/photo.jpg?sz=128", "display_name": "Jaxson Mansouri", "link": "https://stackoverflow.com/users/11097251/jaxson-mansouri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1553116226, "creation_date": 1553116226, "question_id": 55270243, "link": "https://stackoverflow.com/questions/55270243/pass-queryset-object-id-to-model-to-get-self", "title": "Pass QuerySet object id to model to get self", "body": "<p>I am trying to trigger a method in my models to run by hitting a url.When it hits it returns and error saying \"unsupported operand type(s) for -: 'datetime.datetime' and 'NoneType'\".</p>\n\n<hr>\n\n<p><code>views.py</code></p>\n\n<pre><code>from django.shortcuts import render\nfrom rest_framework import viewsets\nfrom .serializers import EntrySerializer\nfrom .models import Entry\n\nclass EntryView(viewsets.ModelViewSet):\n  serializer_class = EntrySerializer\n  queryset = Entry.objects.all()\n\nentryId = Entry.objects.filter(end_time__isnull=True).values('id')\n# returns &lt;QuerySet [{'id': 8}]&gt;\nfor id in entryId:\n    entryIdNum = id['id']\n    #returns 8 \nentry = Entry()\n\ndef ToggleView(request):\n  entry.toggle_paused()\n  entry.save()\n</code></pre>\n\n<hr>\n\n<p><code>models.py</code></p>\n\n<pre><code>from django.db import models\nfrom django.db.models import F, ExpressionWrapper, fields\nfrom django.utils import timezone\nfrom dateutil.relativedelta import relativedelta\nfrom decimal import Decimal\n\nclass Entry(models.Model):\n  start_time = models.DateTimeField()\n  end_time = models.DateTimeField(blank=True, null=True, db_index=True)\n  seconds_paused = models.PositiveIntegerField(default=0)\n  pause_time = models.DateTimeField(blank=True, null=True)\n  comments = models.TextField(blank=True)\n  date_updated = models.DateTimeField(auto_now=True)\n  hours = models.DecimalField(max_digits=11, decimal_places=5, default=0)\n\ndef _str_(self):\n    return self.TUID\n\n@property\ndef total_hours(self):\n    \"\"\"\n    Determined the total number of hours worked in this entry\n    \"\"\"\n    total = self.get_total_seconds() / 3600.0\n\n    # in case seconds paused are greater than the elapsed time\n    if total &lt; 0:\n        total = 0\n    return total\n\n@property\ndef is_paused(self):\n    \"\"\"\n    Determine whether or not this entry is paused\n    \"\"\"\n    return bool(self.pause_time)\n\ndef pause(self):\n    \"\"\"\n    If this entry is not paused, pause it.\n    \"\"\"\n    print('Pause Hit')\n\n    if not self.is_paused:\n        self.pause_time = timezone.now()\n\ndef pause_all(self):\n    \"\"\"\n    Pause all open entries\n    \"\"\"\n    entries = self.user.timepiece_entries.filter(end_time__isnull=True)\n    for entry in entries:\n        entry.pause()\n        entry.save()\n\ndef unpause(self, date=None):\n    print('Unpause Hit')\n    if self.is_paused:\n        if not date:\n            date = timezone.now()\n        delta = date - self.pause_time\n        self.seconds_paused += delta.seconds\n        self.pause_time = None\n\ndef toggle_paused(self):\n    \"\"\"\n    Toggle the paused state of this entry.  If the entry is already paused,\n    it will be unpaused; if it is not paused, it will be paused.\n    \"\"\"\n    print('Toggle Pause Hit')\n    if self.is_paused:\n        self.unpause()\n    else:\n        self.pause()\n\n\ndef check_overlap(self, entry_b, **kwargs):\n    \"\"\"Return True if the two entries overlap.\"\"\"\n    consider_pause = kwargs.get('pause', True)\n    entry_a = self\n    # if entries are open, consider them to be closed right now\n    if not entry_a.end_time or not entry_b.end_time:\n        return False\n    # Check the two entries against each other\n    start_inside = entry_a.start_time &gt; entry_b.start_time \\\n        and entry_a.start_time &lt; entry_b.end_time\n    end_inside = entry_a.end_time &gt; entry_b.start_time \\\n        and entry_a.end_time &lt; entry_b.end_time\n    a_is_inside = entry_a.start_time &gt; entry_b.start_time \\\n        and entry_a.end_time &lt; entry_b.end_time\n    b_is_inside = entry_a.start_time &lt; entry_b.start_time \\\n        and entry_a.end_time &gt; entry_b.end_time\n    overlap = start_inside or end_inside or a_is_inside or b_is_inside\n    if not consider_pause:\n        return overlap\n    else:\n        if overlap:\n            max_end = max(entry_a.end_time, entry_b.end_time)\n            min_start = min(entry_a.start_time, entry_b.start_time)\n            diff = max_end - min_start\n            diff = diff.seconds + diff.days * 86400\n            total = entry_a.get_total_seconds() + entry_b.get_total_seconds() - 1\n            if total &gt;= diff:\n                return True\n        return False\n\ndef is_overlapping(self):\n    if self.start_time and self.end_time:\n        entries = self.user.timepiece_entries.filter(\n            Q(end_time__range=(self.start_time, self.end_time)) |\n            Q(start_time__range=(self.start_time, self.end_time)) |\n            Q(start_time__lte=self.start_time, end_time__gte=self.end_time)\n        )\n\n        totals = entries.aggregate(max=Max('end_time'), min=Min('start_time'))\n\n        totals['total'] = 0\n        for entry in entries:\n            totals['total'] = totals['total'] + entry.get_total_seconds()\n\n        totals['diff'] = totals['max'] - totals['min']\n        totals['diff'] = totals['diff'].seconds + \\\n            totals['diff'].days * 86400\n\n        if totals['total'] &gt; totals['diff']:\n            return True\n        else:\n            return False\n    else:\n        return None\n\ndef save(self, *args, **kwargs):\n    self.hours = Decimal('%.5f' % round(self.total_hours, 5))\n    super(Entry, self).save(*args, **kwargs)\n\ndef get_total_seconds(self):\n    \"\"\"\n    Determines the total number of seconds between the starting and\n    ending times of this entry. If the entry is paused, the end_time is\n    assumed to be the pause time. If the entry is active but not paused,\n    the end_time is assumed to be now.\n    \"\"\"\n    start = self.start_time\n    end = self.end_time\n    if not end:\n        if self.is_paused:\n            end = self.pause_time\n            print(end)\n            print('------------------')\n        else:\n            end = timezone.now()\n    delta = end - start\n    if self.is_paused:\n        # get_paused_seconds() takes elapsed time into account, which we do not want\n        # in this case, so subtract seconds_paused instead to account for previous pauses\n        seconds = delta.seconds - self.seconds_paused\n    else:\n        seconds = delta.seconds - self.get_paused_seconds()\n    return seconds + (delta.days * 86400)\n</code></pre>\n\n<p>I know the error is comming from the method get_total_seconds(). When self.start_time is called it returns Entry object (None). How can I pass entryIdNum or entryId from views to the model so it knows what self is?</p>\n"}, {"tags": ["python", "trading", "algorithmic-trading", "zipline", "quantopian"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10417531"}, "edited": false, "score": 0, "creation_date": 1559323357, "post_id": 55270231, "comment_id": 99397130, "body": "can you share the part of code where you calculate the stop price ?"}, {"owner": {"reputation": 51, "user_id": 11102698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faf086d57341c8561dc66ea6cc8e3723?s=128&d=identicon&r=PG&f=1", "display_name": "cristianc", "link": "https://stackoverflow.com/users/11102698/cristianc"}, "edited": false, "score": 0, "creation_date": 1559485852, "post_id": 55270231, "comment_id": 99427811, "body": "Yes. The following code intends to have the orderlogic run only once per day, since I need only one run per day to check if the condition to open a trade is meet.  The handle_data function is intended to run every minute checking if the stop loss or profit target is triggered."}], "owner": {"reputation": 51, "user_id": 11102698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faf086d57341c8561dc66ea6cc8e3723?s=128&d=identicon&r=PG&f=1", "display_name": "cristianc", "link": "https://stackoverflow.com/users/11102698/cristianc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 588, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1559683512, "creation_date": 1553116161, "last_edit_date": 1559683512, "question_id": 55270231, "link": "https://stackoverflow.com/questions/55270231/stop-loss-and-take-profit-question-in-quantopian", "title": "Stop loss and Take profit question in Quantopian", "body": "<p>I need to set a stop loss and take profit to every trade I make in Quantopian. This is the code I have at the moment but it's not working as intended.\nThe order logic (to enter a short or long trade) is scheduled only once per day while the take profit or stop loss should be checked every minute.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import talib as ta  \nimport pandas  \nrisk_per_trade = 500  \nfactor_tp = 2  \nfactor_sl = 2  \nBars_count = 60\n\ndef initialize(context):  \n    context.stocks = [sid(4265), sid(5061)]  \n    schedule_function(orderlogic,date_rules.every_day(),   time_rules.market_open(hours=0, minutes=10))  \ndef orderlogic(context, data):  \n    hist = data.history(context.stocks,['price','high','low','close','open'],                                 bar_count=Bars_count, frequency='1d')  \n    for stock in context.stocks:  \n        atr = ta.ATR(hist['high'][stock],hist['low'][stock],hist['close'][stock],timeperiod=14)  \n        sma_20 = ta.SMA(hist['close'][stock], timeperiod=20)  \n        stop_size = factor_sl * atr[-1]  \n        amount_shares = round(risk_per_trade / stop_size)  \n        open_orders = get_open_orders()  \n        LongCondition = hist['price'][stock][-1] &lt; sma_20[-1]  \n        SellCondition = hist['price'][stock][-1] &gt; sma_20[-1]  \n        if LongCondition and stock not in open_orders and context.portfolio.positions[stock].amount ==0:  \n            order(stock, amount_shares)  \n        elif SellCondition and stock not in open_orders and context.portfolio.positions[stock].amount ==0:  \n            order(stock, -1 * amount_shares)  \ndef handle_data(context,data):  \n#    record(leverage=context.account.leverage)  \n    for axion in context.stocks:  \n        current_price = data.current(axion, 'price')  \n        position = context.portfolio.positions[axion].amount  \n        price_position = context.portfolio.positions[axion].cost_basis  \n        pnl = ( current_price - price_position ) * position  \n        if position &gt; 0 and current_price &gt; price_position:  \n            if pnl &gt;= factor_tp * risk_per_trade:  \n                order_target_percent(axion, 0)  \n                log.info(\"Buy with Take Profit hit \" + str(axion.symbol))  \n        if position &gt; 0 and current_price &lt; price_position:  \n            if pnl &lt;= -risk_per_trade:  \n                order_target_percent(axion, 0)  \n                log.info(\"Buy with Stop Loss hit \" + str(axion.symbol))  \n        if position &lt; 0 and current_price &lt; price_position:  \n            if -pnl &gt;= factor_tp * risk_per_trade:  \n                order_target_percent(axion, 0)  \n                log.info(\"Sell with Take Profit hit \" + str(axion.symbol))  \n        if position &lt; 0 and current_price &gt; price_position:  \n            if pnl &gt;= risk_per_trade:  \n                order_target_percent(axion, 0)  \n                log.info(\"Sell with Stop Loss hit \" + str(axion.symbol))\n</code></pre>\n"}, {"tags": ["python", "pandas", "matplotlib"], "comments": [{"owner": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "edited": false, "score": 1, "creation_date": 1553116291, "post_id": 55270208, "comment_id": 97271657, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/16417496/matplotlib-fill-between-multiple-lines\">Matplotlib fill between multiple lines</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1711, "user_id": 515088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/089ca6c4026359bd27c6318ed15f026b?s=128&d=identicon&r=PG", "display_name": "John Sloper", "link": "https://stackoverflow.com/users/515088/john-sloper"}, "is_accepted": true, "score": 2, "last_activity_date": 1553116359, "creation_date": 1553116359, "answer_id": 55270273, "question_id": 55270208, "link": "https://stackoverflow.com/questions/55270208/matplotlib-draw-a-box-on-axes/55270273#55270273", "title": "matplotlib: draw a box on axes", "body": "<p>If you have a fixed area you want to fill and you want to do it across the entire chart, you are probably better off using <code>axvspan</code>. E.g.</p>\n\n<pre><code>ax.axvspan(75, 90, facecolor='red')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 12519, "user_id": 423926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65539c07af4918433a89bcb298d75ca7?s=128&d=identicon&r=PG", "display_name": "mujjiga", "link": "https://stackoverflow.com/users/423926/mujjiga"}, "is_accepted": false, "score": 1, "last_activity_date": 1553116659, "creation_date": 1553116659, "answer_id": 55270347, "question_id": 55270208, "link": "https://stackoverflow.com/questions/55270208/matplotlib-draw-a-box-on-axes/55270347#55270347", "title": "matplotlib: draw a box on axes", "body": "<pre><code>plt.fill_between(plt.xlim(),[75,75],[90,90])\n</code></pre>\n\n<ul>\n<li>plt.xlim() : Returns start and end of xaxis</li>\n<li>At starting of x axis start filling the color starting from 75 and ending at 90 of y axis</li>\n<li>Continue filling till the end of x axis again  starting from 75 ending at 90 of y axis</li>\n</ul>\n\n<p>You will not need to plot a Rectangle</p>\n"}], "owner": {"reputation": 6464, "user_id": 1233751, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d7668f8a10585e919858f544ccb77b7d?s=128&d=identicon&r=PG", "display_name": "DmitrySemenov", "link": "https://stackoverflow.com/users/1233751/dmitrysemenov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 55270273, "answer_count": 2, "score": 2, "last_activity_date": 1553116659, "creation_date": 1553116009, "question_id": 55270208, "link": "https://stackoverflow.com/questions/55270208/matplotlib-draw-a-box-on-axes", "title": "matplotlib: draw a box on axes", "body": "<pre><code>import matplotlib.patches as patches\n\ndf2 = pd.melt(\n    data2.query('worktype_id!=38')[['period','worktype', 'utilization_billable', 'utilization' ]], \n    id_vars=['period', 'worktype']).sort_values(['period', 'variable'], ascending=[True, True])\ng = sns.relplot(x='period', y='value', \n            hue='variable', data=df2, col='worktype', kind='line', col_wrap=4, \n            )\nfor ax in g.axes:\n    ax.axhline(y=75, color='g', linestyle='--')\n    ax.axhline(y=90, color='r', linestyle='--')\n    rect = plt.Rectangle((10,10),10,10,linewidth=3,edgecolor='r',facecolor='red', alpha=1)\n    ax.add_patch(rect)\n</code></pre>\n\n<p>I want to draw the box between y=75 and 90 (green and red lines on the chart), but nothing is shown up when I do <strong>ax.add_patch</strong></p>\n\n<p><strong>this is the image I get:</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/26sTR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/26sTR.png\" alt=\"enter image description here\"></a></p>\n\n<p>So How do I fill out the area between red and green horizontal lines?</p>\n"}, {"tags": ["python", "arrays", "string", "text", "split"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 11234329, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mV0mDuwU8Mo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcyzUmVkp-AKNjA-K7W2Z9CJfFNnQ/mo/photo.jpg?sz=128", "display_name": "Philip", "link": "https://stackoverflow.com/users/11234329/philip"}, "edited": false, "score": 0, "creation_date": 1553117564, "post_id": 55270406, "comment_id": 97272207, "body": "I knew I needed a nested for loop, just didn&#39;t know what else so thanks!"}, {"owner": {"reputation": 3, "user_id": 11234329, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mV0mDuwU8Mo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcyzUmVkp-AKNjA-K7W2Z9CJfFNnQ/mo/photo.jpg?sz=128", "display_name": "Philip", "link": "https://stackoverflow.com/users/11234329/philip"}, "edited": false, "score": 0, "creation_date": 1553117861, "post_id": 55270406, "comment_id": 97272341, "body": "If I wanted to add a delay between each 6 element string so that the person has time to read the braille, how would I go about that? I&#39;m guessing there&#39;s a way to make the for loop pause in between each string?"}, {"owner": {"reputation": 3, "user_id": 11234329, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mV0mDuwU8Mo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcyzUmVkp-AKNjA-K7W2Z9CJfFNnQ/mo/photo.jpg?sz=128", "display_name": "Philip", "link": "https://stackoverflow.com/users/11234329/philip"}, "edited": false, "score": 0, "creation_date": 1553118085, "post_id": 55270406, "comment_id": 97272432, "body": "Never mind! I imported time and added &quot;time.sleep(1)&quot; above the &quot;for char in word:&quot; and that works"}, {"owner": {"reputation": 1039, "user_id": 7443101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f96d09d90a71a8e256883f1f1576cf01?s=128&d=identicon&r=PG&f=1", "display_name": "Merig", "link": "https://stackoverflow.com/users/7443101/merig"}, "reply_to_user": {"reputation": 3, "user_id": 11234329, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mV0mDuwU8Mo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcyzUmVkp-AKNjA-K7W2Z9CJfFNnQ/mo/photo.jpg?sz=128", "display_name": "Philip", "link": "https://stackoverflow.com/users/11234329/philip"}, "edited": false, "score": 0, "creation_date": 1553118120, "post_id": 55270406, "comment_id": 97272440, "body": "@Philip you can either use <code>time.sleep(x)</code>, with x being the amount of seconds you want the loop to stop for, or <code>input()</code> to pause the loop  until enter is pressed"}, {"owner": {"reputation": 3, "user_id": 11234329, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mV0mDuwU8Mo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcyzUmVkp-AKNjA-K7W2Z9CJfFNnQ/mo/photo.jpg?sz=128", "display_name": "Philip", "link": "https://stackoverflow.com/users/11234329/philip"}, "edited": false, "score": 0, "creation_date": 1553118185, "post_id": 55270406, "comment_id": 97272457, "body": "I posted my reply at the same time you replied but I used exactly that and it works, thanks!"}], "tags": [], "owner": {"reputation": 1039, "user_id": 7443101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f96d09d90a71a8e256883f1f1576cf01?s=128&d=identicon&r=PG&f=1", "display_name": "Merig", "link": "https://stackoverflow.com/users/7443101/merig"}, "is_accepted": true, "score": 1, "last_activity_date": 1553116982, "creation_date": 1553116982, "answer_id": 55270406, "question_id": 55270196, "link": "https://stackoverflow.com/questions/55270196/how-do-you-scan-characters-in-multi-character-multi-string-arrays-in-python/55270406#55270406", "title": "How do you scan characters in multi-character multi-string arrays in Python?", "body": "<p>A dictionary should do the trick:</p>\n\n<pre><code>punctuation = {\n    ' ': 'a space',\n    ',': 'a comma',\n    \"'\": 'an apostrophes',\n    '.': 'a period'\n}\n\nfor word in arr6elem:\n    for char in word:\n        print('This is {}'.format(punctuation.get(char, char)))\n</code></pre>\n\n<p>Once you've built your punctuation dict with all the items you need, the loop will either get the corresponding value from it, or default to the actual char.</p>\n\n<pre><code>Output:\n# This is T\n# This is h\n# This is e\n# This is a space\n# This is q\n# This is u\n# This is i\n# This is c\n# This is k\n# This is a space\n# This is b\n# This is r\n# This is o\n# This is w\n# This is n\n# This is a space\n# This is f\n# ...\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 11234329, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mV0mDuwU8Mo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcyzUmVkp-AKNjA-K7W2Z9CJfFNnQ/mo/photo.jpg?sz=128", "display_name": "Philip", "link": "https://stackoverflow.com/users/11234329/philip"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 230, "favorite_count": 1, "accepted_answer_id": 55270406, "answer_count": 1, "score": 0, "last_activity_date": 1553116982, "creation_date": 1553115961, "last_edit_date": 1553116266, "question_id": 55270196, "link": "https://stackoverflow.com/questions/55270196/how-do-you-scan-characters-in-multi-character-multi-string-arrays-in-python", "title": "How do you scan characters in multi-character multi-string arrays in Python?", "body": "<p>I'm working on my first Python project for a device that reads a string from OCR and outputs braille. The braille device can only output 6 letters at a time. I'm stuck trying to scan each character in the 6 character long multi-string array.</p>\n\n<p>For simplicity's sake, for now I only want to print \"this is (insert character)\" for every character in the multi-string array. In reality, the output would be to run the code that tells the first two motors to create the character in braille, and then do it for the remaining 5 characters with the 10 remaining motors with a short delay between each 6 character long string. How do I scan each 6 character long string and loop it for the rest of the strings in the array?</p>\n\n<p>Here's where I'm at so far:</p>\n\n<pre><code>from PIL import Image\nimport pytesseract\n\n\nimg = Image.open('img file path')\ntext = [item for item in (pytesseract.image_to_string(img, lang='eng', config='--psm 6')).split('\\n')]\noneLineStr = ' '.join(text)\n# displays: The quick brown fox jumps over the lazy dog.\nprint(oneLineStr)\n\narr6elem = []\nfor idx in range(0, len(oneLineStr), 6):\n    arr6elem.append(oneLineStr[idx:idx + 6])\n# displays: ['The qu', 'ick br', 'own fo', 'x jump', 's over', ' the l', 'azy do', 'g.']\nprint(arr6elem)\n\n# Don't know what to do from this point\n# Want to scan each 6-element string in list and for each string, see which elements it consists of\n# (capital/lower case characters, numbers, spaces, commas, apostrophes, periods, etc.)\n# Then, print \"this is a\" for letter a, or \"this is a colon\" for :, etc.\n# So that output looks like:\n# [\"'this is T', 'this is h', 'this is e', this is a space', 'this is q', 'this is u'\", \"'this is i', 'this is c'...]\n</code></pre>\n"}, {"tags": ["c#", "python", "wpf", "ipc"], "comments": [{"owner": {"reputation": 4119, "user_id": 10839105, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c5b19eba5c32ea65bb432a004aad5e3?s=128&d=identicon&r=PG", "display_name": "Manoj Choudhari", "link": "https://stackoverflow.com/users/10839105/manoj-choudhari"}, "edited": false, "score": 0, "creation_date": 1553116098, "post_id": 55270190, "comment_id": 97271569, "body": "Why cant you use websocket or similar thing?  You can check this question&#39;s program for inspiration.  <a href=\"https://stackoverflow.com/questions/42680413/connecting-python-socketserver-with-c-sharp-client\" title=\"connecting python socketserver with c sharp client\">stackoverflow.com/questions/42680413/&hellip;</a>"}, {"owner": {"reputation": 652, "user_id": 1317713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cd0dbe57ed107fdf0b871ecbb22759e?s=128&d=identicon&r=PG", "display_name": "Leonid", "link": "https://stackoverflow.com/users/1317713/leonid"}, "edited": false, "score": 0, "creation_date": 1553116631, "post_id": 55270190, "comment_id": 97271811, "body": "Why throw regular Python into this Mix? I would stick with IronPython - <a href=\"https://stackoverflow.com/questions/7053172/how-can-i-call-ironpython-code-from-a-c-sharp-app\" title=\"how can i call ironpython code from a c sharp app\">stackoverflow.com/questions/7053172/&hellip;</a>"}, {"owner": {"reputation": 75, "user_id": 9797162, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Ben Jenney", "link": "https://stackoverflow.com/users/9797162/ben-jenney"}, "edited": false, "score": 0, "creation_date": 1553118391, "post_id": 55270190, "comment_id": 97272525, "body": "I see that IronPython seems to allow for the writing of python inside of .net, and that it can execute python scripts, I just can&#39;t find an example that seems to show how to update parameters as they are being read by a separate python script and that could keep reading those updated values on each new iteration. Would I have to execute the script every iteration? I&#39;ve been having a hard time finding a good resource I could use to figure out IronPython&#39;s functionality."}, {"owner": {"reputation": 13507, "user_id": 2846483, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/X2Bfs.jpg?s=128&g=1", "display_name": "dymanoid", "link": "https://stackoverflow.com/users/2846483/dymanoid"}, "edited": false, "score": 0, "creation_date": 1553121197, "post_id": 55270190, "comment_id": 97273455, "body": "Please consider providing a concrete example, not pseudo-code."}], "owner": {"reputation": 75, "user_id": 9797162, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Ben Jenney", "link": "https://stackoverflow.com/users/9797162/ben-jenney"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1553116196, "creation_date": 1553115939, "last_edit_date": 1553116196, "question_id": 55270190, "link": "https://stackoverflow.com/questions/55270190/passing-data-from-wpf-program-to-python-script-on-local-machine-within-an-iterat", "title": "passing data from Wpf program to python script on local machine within an iterative process", "body": "<p>I am curious as to the best way to share data from a WPF program with a python script from within a loop where the values are continuously being updated.\nHere is a psuedo-codish example that expresses the kind of functionality I'm hoping for.</p>\n\n<h1>Wpf example:</h1>\n\n<pre><code>    while(true)\n{\nvar x = arbitraryNumber0;\nvar y = arbitraryNumber1;\nvar z = arbitraryNumber2;\n\nsendToPython(arbitraryNumber0, arbitraryNumber1, arbitraryNumber2);\n\narbitraryNumber0++;\narbitraryNumber1++;\narbitraryNumber2++;\n}\n</code></pre>\n\n<h1>Python script example:</h1>\n\n<pre><code>  #stream in x, y, z From WPF \n  product = arbNumFromWPF0 * arbNumFromWPF1 * arbNumFromWPF2\n  #do stuff with product\n</code></pre>\n\n<p>I have tried using c# process's but the problem was that it would need to start the python shell on every new iteration. Which would cause my system to crash.\nI have looked into ironpython, pipes, and sockets but can not find an example similar to what I'm trying to do, and am wondering what method I should use to achieve this functionality. Any help would be greatly appreciated. </p>\n"}, {"tags": ["python", "list", "csv"], "comments": [{"owner": {"reputation": 4323, "user_id": 1720199, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cODPq.jpg?s=128&g=1", "display_name": "cglacet", "link": "https://stackoverflow.com/users/1720199/cglacet"}, "edited": false, "score": 0, "creation_date": 1553116025, "post_id": 55270184, "comment_id": 97271546, "body": "That&#39;s because you append row and rows are lists."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 1, "creation_date": 1553116045, "post_id": 55270184, "comment_id": 97271552, "body": "Because the <code>csv</code> module represents rows as lists. Since you have a single row, you get a single list appended to your outer list. If you are sure you only ever have one row and you&#39;re happy with that, don&#39;t append <code>row</code> to anything and use it directly"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1553116276, "post_id": 55270184, "comment_id": 97271651, "body": "Usually a CSV file has multiple lines, and each line represents a collection of related data. You probably should be putting each tweet on its own line, not as a field in one line."}, {"owner": {"reputation": 486, "user_id": 9052957, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-scgJ6Rw-MLA/AAAAAAAAAAI/AAAAAAAAAFI/iRxDiNU28TM/photo.jpg?sz=128", "display_name": "thelaw", "link": "https://stackoverflow.com/users/9052957/thelaw"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1553116464, "post_id": 55270184, "comment_id": 97271720, "body": "@roganjosh thank u that solved it!"}, {"owner": {"reputation": 486, "user_id": 9052957, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-scgJ6Rw-MLA/AAAAAAAAAAI/AAAAAAAAAFI/iRxDiNU28TM/photo.jpg?sz=128", "display_name": "thelaw", "link": "https://stackoverflow.com/users/9052957/thelaw"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1553116494, "post_id": 55270184, "comment_id": 97271739, "body": "@Barmar you mean that I should change the data I have in the saved file?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1553117021, "post_id": 55270184, "comment_id": 97271989, "body": "Yes, that&#39;s what I&#39;m suggesting. It doesn&#39;t need to be CSV if you&#39;re not saving sets of related data."}, {"owner": {"reputation": 486, "user_id": 9052957, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-scgJ6Rw-MLA/AAAAAAAAAAI/AAAAAAAAAFI/iRxDiNU28TM/photo.jpg?sz=128", "display_name": "thelaw", "link": "https://stackoverflow.com/users/9052957/thelaw"}, "edited": false, "score": 0, "creation_date": 1553117200, "post_id": 55270184, "comment_id": 97272055, "body": "My data is coming from a 1d list called X and so I use <code>wr.writerow(X)</code> to write them all in the csv file. Is there a way to put each tweet in a different line?"}, {"owner": {"reputation": 652, "user_id": 1317713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cd0dbe57ed107fdf0b871ecbb22759e?s=128&d=identicon&r=PG", "display_name": "Leonid", "link": "https://stackoverflow.com/users/1317713/leonid"}, "edited": false, "score": 0, "creation_date": 1553117426, "post_id": 55270184, "comment_id": 97272150, "body": "Related but not exactly a dupe I think: <a href=\"https://stackoverflow.com/a/24662707/1317713\">stackoverflow.com/a/24662707/1317713</a>"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1553120246, "post_id": 55270184, "comment_id": 97273148, "body": "There is <i>nothing inherently wrong</i> with saving data as a single line CSV. It is not a cumbersome file format, it does not require any external dependencies and is transferable virtually anywhere. Unless you have pressures for concurrent writes or anything else, I really think the discussion about changing formats is only going to push you off-course"}], "answers": [{"comments": [{"owner": {"reputation": 652, "user_id": 1317713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cd0dbe57ed107fdf0b871ecbb22759e?s=128&d=identicon&r=PG", "display_name": "Leonid", "link": "https://stackoverflow.com/users/1317713/leonid"}, "edited": false, "score": 0, "creation_date": 1553117322, "post_id": 55270267, "comment_id": 97272105, "body": "I have not checked but <code>X_new = list(reader)</code> would probably work - it would be shorter and probably faster.    Update: <a href=\"https://stackoverflow.com/a/24662707/1317713\">stackoverflow.com/a/24662707/1317713</a>"}], "tags": [], "owner": {"reputation": 427, "user_id": 8843390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2b78ac6a5f9b01957bd550fceeec515?s=128&d=identicon&r=PG&f=1", "display_name": "Alakazam", "link": "https://stackoverflow.com/users/8843390/alakazam"}, "is_accepted": false, "score": 1, "last_activity_date": 1553116331, "creation_date": 1553116331, "answer_id": 55270267, "question_id": 55270184, "link": "https://stackoverflow.com/questions/55270184/read-files-from-a-csv-file-separated-by-commas-and-pass-to-1d-list-in-python/55270267#55270267", "title": "Read files from a csv file separated by commas and pass to 1d list in python", "body": "<p>A row is a list, you are trying to append a row, instead of this, try to extend your original list with the row.</p>\n\n<pre><code>X_new = []\nfilename = 'output.csv'\nwith open(filename, 'r') as f:\n    reader = csv.reader(f)\n    for row in reader:\n       X_new.extend(row)\n\nprint(X_new)\n</code></pre>\n"}], "owner": {"reputation": 486, "user_id": 9052957, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-scgJ6Rw-MLA/AAAAAAAAAAI/AAAAAAAAAFI/iRxDiNU28TM/photo.jpg?sz=128", "display_name": "thelaw", "link": "https://stackoverflow.com/users/9052957/thelaw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 243, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1553116331, "creation_date": 1553115920, "question_id": 55270184, "link": "https://stackoverflow.com/questions/55270184/read-files-from-a-csv-file-separated-by-commas-and-pass-to-1d-list-in-python", "title": "Read files from a csv file separated by commas and pass to 1d list in python", "body": "<p>I am trying to read strings of processed tweets that I have saved in a csv file in this format : </p>\n\n<pre><code>rt mayasolovely woman complain cleaning house amp man always take trash,momma said pussy cats inside doghouse,addicted2guys simplyaddictedtoguys http co 1jl4hi8zmf woof woof hot scally lad,allaboutmanfeet http co 3gzupfumev woof woof hot soles\n</code></pre>\n\n<p>Each tweet is separated by a comma and I want to pass them all to a 1d list of strings. I tried the following code:</p>\n\n<pre><code>X_new = []\nfilename = 'output.csv'\nwith open(filename, 'r') as f:\n    reader = csv.reader(f)\n    for row in reader:\n       X_new.append(row)\n\nprint(X_new)\n</code></pre>\n\n<p>And the result I get is the following.</p>\n\n<pre><code>[['rt mayasolovely woman complain cleaning house amp man always take trash', 'momma said pussy cats inside doghouse', 'addicted2guys simplyaddictedtoguys http co 1jl4hi8zmf woof woof hot scally lad', 'allaboutmanfeet http co 3gzupfumev woof woof hot soles']]\n</code></pre>\n\n<p>I don't understand why it gives me a 2d string. I wanted it to be able to return this : </p>\n\n<pre><code>['rt mayasolovely woman complain cleaning house amp man always take trash', 'momma said pussy cats inside doghouse', 'addicted2guys simplyaddictedtoguys http co 1jl4hi8zmf woof woof hot scally lad', 'allaboutmanfeet http co 3gzupfumev woof woof hot soles']\n</code></pre>\n\n<p>What is going wrong here, thank you in advance!</p>\n"}, {"tags": ["python", "pandas", "geopy"], "answers": [{"comments": [{"owner": {"reputation": 999, "user_id": 4884530, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/5a3b941d17c4141fa7d058fc8452aed5?s=128&d=identicon&r=PG&f=1", "display_name": "hmmmbob", "link": "https://stackoverflow.com/users/4884530/hmmmbob"}, "edited": false, "score": 0, "creation_date": 1553128030, "post_id": 55270965, "comment_id": 97275315, "body": "Times out on me, I presume by calling too quickly ?! Do not know how to build a time delay into this construction :("}, {"owner": {"reputation": 8369, "user_id": 4057186, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/87142ebe8244548dc01c3406b0ef2802?s=128&d=identicon&r=PG&f=1", "display_name": "edesz", "link": "https://stackoverflow.com/users/4057186/edesz"}, "reply_to_user": {"reputation": 999, "user_id": 4884530, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/5a3b941d17c4141fa7d058fc8452aed5?s=128&d=identicon&r=PG&f=1", "display_name": "hmmmbob", "link": "https://stackoverflow.com/users/4884530/hmmmbob"}, "edited": false, "score": 0, "creation_date": 1553131951, "post_id": 55270965, "comment_id": 97276138, "body": "@hmmmbob use <code>timeout=10</code> in the <code>apply</code> for <code>geocode</code>. See example usage <a href=\"https://stackoverflow.com/a/27914845/4057186\">here</a>. This would set the timeout on the geocode call to 10seconds."}, {"owner": {"reputation": 999, "user_id": 4884530, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/5a3b941d17c4141fa7d058fc8452aed5?s=128&d=identicon&r=PG&f=1", "display_name": "hmmmbob", "link": "https://stackoverflow.com/users/4884530/hmmmbob"}, "edited": false, "score": 0, "creation_date": 1553304933, "post_id": 55270965, "comment_id": 97347401, "body": "Unfortunately I have yet to learn this apply structure, I do not know where to place the timeout, In the link you provided( thank you for that) it is put in the form geocode(query, timeout=10), which unfortunately looks very different to me."}, {"owner": {"reputation": 8369, "user_id": 4057186, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/87142ebe8244548dc01c3406b0ef2802?s=128&d=identicon&r=PG&f=1", "display_name": "edesz", "link": "https://stackoverflow.com/users/4057186/edesz"}, "reply_to_user": {"reputation": 999, "user_id": 4884530, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/5a3b941d17c4141fa7d058fc8452aed5?s=128&d=identicon&r=PG&f=1", "display_name": "hmmmbob", "link": "https://stackoverflow.com/users/4884530/hmmmbob"}, "edited": false, "score": 0, "creation_date": 1553972835, "post_id": 55270965, "comment_id": 97586981, "body": "@hmmmbob, please see the updated answer if this is what you&#39;re after."}], "tags": [], "owner": {"reputation": 8369, "user_id": 4057186, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/87142ebe8244548dc01c3406b0ef2802?s=128&d=identicon&r=PG&f=1", "display_name": "edesz", "link": "https://stackoverflow.com/users/4057186/edesz"}, "is_accepted": false, "score": 0, "last_activity_date": 1553972844, "last_edit_date": 1553972844, "creation_date": 1553120176, "answer_id": 55270965, "question_id": 55270124, "link": "https://stackoverflow.com/questions/55270124/geopy-checking-cities-avoiding-duplicates-pandas/55270965#55270965", "title": "Geopy, checking cities, avoiding duplicates, pandas", "body": "<p>Imports</p>\n\n<ul>\n<li>see <a href=\"https://geopy.readthedocs.io/en/stable/#nominatim\" rel=\"nofollow noreferrer\">geopy</a> documentation for how to instantiate the <code>Nominatum</code> geoencoder</li>\n</ul>\n\n<pre><code>import pandas as pd\nfrom geopy.geocoders import Nominatim\ngeolocator = Nominatim(user_agent=\"specify_your_app_name_here\") # specify your application name\n</code></pre>\n\n<p>Generate some data with locations</p>\n\n<pre><code>d = ['New York, NY', 'Seattle, WA', 'Philadelphia, PA',\n    'Richardson, TX', 'Plano, TX', 'Wylie, TX',\n    'Waxahachie, TX', 'Washington, DC']\ndf = pd.DataFrame(d, columns=['Location'])\n\nprint(df)\n           Location\n0      New York, NY\n1       Seattle, WA\n2  Philadelphia, PA\n3    Richardson, TX\n4         Plano, TX\n5         Wylie, TX\n6    Waxahachie, TX\n7    Washington, DC\n</code></pre>\n\n<p>Use a dict to geoencode <strong>only</strong> the unique <code>Location</code>s per <a href=\"https://stackoverflow.com/a/31414616/4057186\">this SO post</a></p>\n\n<ul>\n<li>extract all parameters simultaneously\n\n<ul>\n<li>first, get <code>lat</code> and <code>lon</code> in same step (as tuples in a single column of the <code>DataFrame</code>)</li>\n<li>second, <a href=\"https://stackoverflow.com/a/29550458/4057186\">split the column of tuples into separate columns</a></li>\n</ul></li>\n</ul>\n\n<pre><code>locations = df['Location'].unique()\n\n# Create dict of geoencodings\nd = (\n    dict(zip(locations, pd.Series(locations)\n        .apply(geolocator.geocode, args=(10,))\n        .apply(lambda x: (x.latitude, x.longitude)) # get tuple of latitude and longitude\n            )\n        )\n    )\n\n# Map dict to `Location` column\ndf['city_coord'] = df['Location'].map(d)\n\n# Split single column of tuples into multiple (2) columns\ndf[['lat','lon']] = pd.DataFrame(df['city_coord'].tolist(), index=df.index)\n\nprint(df)\n           Location                  city_coord        lat         lon\n0      New York, NY   (40.7308619, -73.9871558)  40.730862  -73.987156\n1       Seattle, WA  (47.6038321, -122.3300624)  47.603832 -122.330062\n2  Philadelphia, PA   (39.9524152, -75.1635755)  39.952415  -75.163575\n3    Richardson, TX   (32.9481789, -96.7297206)  32.948179  -96.729721\n4         Plano, TX   (33.0136764, -96.6925096)  33.013676  -96.692510\n5         Wylie, TX   (33.0151201, -96.5388789)  33.015120  -96.538879\n6    Waxahachie, TX   (32.3865312, -96.8483311)  32.386531  -96.848331\n7    Washington, DC   (38.8950092, -77.0365625)  38.895009  -77.036563\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 560, "user_id": 8884513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7392863bd217afb8b630a19b76dfcd4f?s=128&d=identicon&r=PG", "display_name": "KostyaEsmukov", "link": "https://stackoverflow.com/users/8884513/kostyaesmukov"}, "is_accepted": false, "score": 0, "last_activity_date": 1553340950, "last_edit_date": 1553340950, "creation_date": 1553340612, "answer_id": 55313272, "question_id": 55270124, "link": "https://stackoverflow.com/questions/55270124/geopy-checking-cities-avoiding-duplicates-pandas/55313272#55313272", "title": "Geopy, checking cities, avoiding duplicates, pandas", "body": "<p>Prepare the initial dataframe:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import pandas as pd\n\ndf = pd.DataFrame({\n    'some_meta': [1, 2, 3, 4],\n    'city': ['london', 'paris', 'London', 'moscow'],\n})\n\ndf['city_lower'] = df['city'].str.lower()\ndf\n</code></pre>\n\n<pre><code>Out[1]:\n   some_meta    city city_lower\n0          1  london     london\n1          2   paris      paris\n2          3  London     london\n3          4  moscow     moscow\n</code></pre>\n\n<p>Create a new DataFrame with unique cities:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>df_uniq_cities = df['city_lower'].drop_duplicates().to_frame()\ndf_uniq_cities\n</code></pre>\n\n<pre><code>Out[2]:\n  city_lower\n0     london\n1      paris\n3     moscow\n</code></pre>\n\n<p>Run geopy's geocode on that new DataFrame:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from geopy.geocoders import Nominatim\ngeolocator = Nominatim(user_agent=\"specify_your_app_name_here\")\n\nfrom geopy.extra.rate_limiter import RateLimiter\ngeocode = RateLimiter(geolocator.geocode, min_delay_seconds=1)\n\ndf_uniq_cities['location'] = df_uniq_cities['city_lower'].apply(geocode)\n# Or, instead, do this to get a nice progress bar:\n# from tqdm import tqdm\n# tqdm.pandas()\n# df_uniq_cities['location'] = df_uniq_cities['city_lower'].progress_apply(geocode)\n\ndf_uniq_cities\n</code></pre>\n\n<pre><code>Out[3]:\n  city_lower                                           location\n0     london  (London, Greater London, England, SW1A 2DU, UK...\n1      paris  (Paris, \u00cele-de-France, France m\u00e9tropolitaine, ...\n3     moscow  (\u041c\u043e\u0441\u043a\u0432\u0430, \u0426\u0435\u043d\u0442\u0440\u0430\u043b\u044c\u043d\u044b\u0439 \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u043e\u043a\u0440\u0443\u0433, \u041c...\n</code></pre>\n\n<p>Merge the initial DataFrame with the new one:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>df_final = pd.merge(df, df_uniq_cities, on='city_lower', how='left')\ndf_final['lat'] = df_final['location'].apply(lambda location: location.latitude if location is not None else None)\ndf_final['long'] = df_final['location'].apply(lambda location: location.longitude if location is not None else None)\ndf_final\n</code></pre>\n\n<pre><code>Out[4]:\n   some_meta    city city_lower                                           location        lat       long\n0          1  london     london  (London, Greater London, England, SW1A 2DU, UK...  51.507322  -0.127647\n1          2   paris      paris  (Paris, \u00cele-de-France, France m\u00e9tropolitaine, ...  48.856610   2.351499\n2          3  London     london  (London, Greater London, England, SW1A 2DU, UK...  51.507322  -0.127647\n3          4  moscow     moscow  (\u041c\u043e\u0441\u043a\u0432\u0430, \u0426\u0435\u043d\u0442\u0440\u0430\u043b\u044c\u043d\u044b\u0439 \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u043e\u043a\u0440\u0443\u0433, \u041c...  55.750446  37.617494\n</code></pre>\n\n<p>The key to resolving your issue with timeouts is the geopy's <code>RateLimiter</code> class. Check out the docs for more details: <a href=\"https://geopy.readthedocs.io/en/1.18.1/#usage-with-pandas\" rel=\"nofollow noreferrer\">https://geopy.readthedocs.io/en/1.18.1/#usage-with-pandas</a></p>\n"}], "owner": {"reputation": 999, "user_id": 4884530, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/5a3b941d17c4141fa7d058fc8452aed5?s=128&d=identicon&r=PG&f=1", "display_name": "hmmmbob", "link": "https://stackoverflow.com/users/4884530/hmmmbob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 231, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1574767560, "creation_date": 1553115680, "last_edit_date": 1574767560, "question_id": 55270124, "link": "https://stackoverflow.com/questions/55270124/geopy-checking-cities-avoiding-duplicates-pandas", "title": "Geopy, checking cities, avoiding duplicates, pandas", "body": "<p>I want to get the lat of ~ 100 k entries in a pandas dataframe. Since I can query geopy only with a second delay, I want to make sure I do not query duplicates (most should be duplicates since there are not that many cities)</p>\n\n<pre><code>from geopy.geocoders import Nominatim\ngeolocator = Nominatim(user_agent=\"xxx\")\ndf['loc']=0\n    for x in range(1,len(df):\n            for y in range(1,x):\n                if df['Location'][y]==df['Location'][x]:\n                    df['lat'][x]=df['lat'][y]\n                else:\n                    location = geolocator.geocode(df['Location'][x])\n                    time.sleep(1.2)\n                    df.at[x,'lat']=location.latitude\n</code></pre>\n\n<p>The idea is to check if the location is already in the list, and only if not query geopy. Somehow it is painfully slow and seems not to be doing what I intended. Any help or tip is appreciated. </p>\n"}, {"tags": ["python", "pandas", "tensorflow", "masking", "zero-padding"], "comments": [{"owner": {"reputation": 4403, "user_id": 3987085, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iORQY.jpg?s=128&g=1", "display_name": "gorjan", "link": "https://stackoverflow.com/users/3987085/gorjan"}, "edited": false, "score": 1, "creation_date": 1553121329, "post_id": 55270074, "comment_id": 97273496, "body": "What do you want to do with the mask and the padded vector afterwards?"}, {"owner": {"reputation": 4116, "user_id": 9039646, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/t6Slz.jpg?s=128&g=1", "display_name": "DINA TAKLIT", "link": "https://stackoverflow.com/users/9039646/dina-taklit"}, "reply_to_user": {"reputation": 4403, "user_id": 3987085, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iORQY.jpg?s=128&g=1", "display_name": "gorjan", "link": "https://stackoverflow.com/users/3987085/gorjan"}, "edited": false, "score": 0, "creation_date": 1553178454, "post_id": 55270074, "comment_id": 97295195, "body": "@gorjan, I have variable length inputs, so to fix this I&#39;m using padding to fill up NaN values with Zero and I want to use masking to ignore  the padded."}], "answers": [{"comments": [{"owner": {"reputation": 4116, "user_id": 9039646, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/t6Slz.jpg?s=128&g=1", "display_name": "DINA TAKLIT", "link": "https://stackoverflow.com/users/9039646/dina-taklit"}, "edited": false, "score": 0, "creation_date": 1553262242, "post_id": 55300605, "comment_id": 97330335, "body": "what you are saying right now is very important. Please please can we discuss on fb: <a href=\"https://web.facebook.com/zina.taklit.58\" rel=\"nofollow noreferrer\">web.facebook.com/zina.taklit.58</a> . I really want to omit all those ambiguities i have about padding and masking concept."}, {"owner": {"reputation": 4116, "user_id": 9039646, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/t6Slz.jpg?s=128&g=1", "display_name": "DINA TAKLIT", "link": "https://stackoverflow.com/users/9039646/dina-taklit"}, "edited": false, "score": 0, "creation_date": 1553443986, "post_id": 55300605, "comment_id": 97377575, "body": "thank you. for you answer. I will do as we discuss. see the answer below."}], "tags": [], "owner": {"reputation": 1890, "user_id": 9305450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/decdafaf6acf910b0d89462f50d59b6e?s=128&d=identicon&r=PG&f=1", "display_name": "dennis-w", "link": "https://stackoverflow.com/users/9305450/dennis-w"}, "is_accepted": true, "score": 1, "last_activity_date": 1553261036, "creation_date": 1553261036, "answer_id": 55300605, "question_id": 55270074, "link": "https://stackoverflow.com/questions/55270074/tensor-flow-how-to-use-padding-and-masking-layer-in-case-of-mlps/55300605#55300605", "title": "Tensor-flow how to use padding and masking layer in case of MLPs?", "body": "<p>You cannot ignore a single Features in an MLP.  Mathematically we are talking about a matrix multiplication. The only dimensions you can \"ignore\" are time dimensions in recurrent layers since the number of weights does not scale with the dimension of time and so a single layer can take different sizes in the time dimension. </p>\n\n<p>If you are only using Dense layers you cannot skip anything because your only dimension (besides the batch dimensions) scales directly with the number of weights.</p>\n"}, {"tags": [], "owner": {"reputation": 4116, "user_id": 9039646, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/t6Slz.jpg?s=128&g=1", "display_name": "DINA TAKLIT", "link": "https://stackoverflow.com/users/9039646/dina-taklit"}, "is_accepted": false, "score": 0, "last_activity_date": 1553443084, "creation_date": 1553443084, "answer_id": 55325666, "question_id": 55270074, "link": "https://stackoverflow.com/questions/55270074/tensor-flow-how-to-use-padding-and-masking-layer-in-case-of-mlps/55325666#55325666", "title": "Tensor-flow how to use padding and masking layer in case of MLPs?", "body": "<p>Thank you @dennis-ec your answer is very precise. I wanna just add this: </p>\n\n<p>We can ignore all time steps for a given feature.This is is supported in <strong>Keras with LSTMs</strong>, <strong>but not Dense layers</strong> (We cannot ignore a single Features in an MLP)</p>\n\n<p>we can suffice with padding (Zero padding or  specify a value to use, e.g. -1) and see the performance.  </p>\n"}], "owner": {"reputation": 4116, "user_id": 9039646, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/t6Slz.jpg?s=128&g=1", "display_name": "DINA TAKLIT", "link": "https://stackoverflow.com/users/9039646/dina-taklit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 439, "favorite_count": 0, "accepted_answer_id": 55300605, "answer_count": 2, "score": 1, "last_activity_date": 1602765996, "creation_date": 1553115503, "last_edit_date": 1602765996, "question_id": 55270074, "link": "https://stackoverflow.com/questions/55270074/tensor-flow-how-to-use-padding-and-masking-layer-in-case-of-mlps", "title": "Tensor-flow how to use padding and masking layer in case of MLPs?", "body": "<p>I want to use MLPs to solve regression problem.</p>\n\n<p>I have inputs with variable length to fix this I want to use <strong>Zero-padding</strong> with <strong>masking layer</strong>. </p>\n\n<p>I read the inputs from <strong>csv</strong> file using <strong>pandas</strong> library. Here is how my data look like.</p>\n\n<p><a href=\"https://i.stack.imgur.com/m5app.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/m5app.png\" alt=\" image1: how train data look like  on my csv \"></a></p>\n\n<p>I know only how to fill NaN values with 0 using this command <code>x_train.fillna(0.0).values</code></p>\n\n<p>Like the first row :</p>\n\n<pre><code>[4, 0, 0, 512, 1.0, 0.0, 1.0, 0.0, 128.0 , NaN]\n</code></pre>\n\n<p>After padding :</p>\n\n<pre><code>[4, 0, 0, 512, 1.0, 0.0, 1.0, 0.0, 128.0 , 0.0]\n</code></pre>\n\n<p>The mask should be like this :</p>\n\n<pre><code>[1, 1, 1, 1, 1, 1, 1, 1, 1, 0]\n</code></pre>\n\n<p>But I do not know how to add the mask layer and feed them into my MLPs.</p>\n\n<p>If i have fixed input length. My program will look like this</p>\n\n<pre><code>...\nn_input = 10 #number og inputs\n\ntrain_X = pd.read_csv('x_train.csv')\ntrain_Y = pd.read_csv('y_train.csv')\n\n\nX = tf.placeholder(\"float\", [None, n_input])\nY = tf.placeholder(\"float\", [None, n_output])\n\n...\ny_pred = multilayer_perceptron(X)\n...\n\nwith tf.Session() as sess:\n    sess.run(init)\n\n            _, c = sess.run([train, loss], feed_dict={X: train_X,\n                                                      Y: train_Y})\n          ...\n</code></pre>\n\n<p>I do not know how to combine between Zero padding and masking layer?</p>\n"}, {"tags": ["python", "opencv"], "comments": [{"owner": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "edited": false, "score": 0, "creation_date": 1553115725, "post_id": 55270063, "comment_id": 97271391, "body": "Do you want exact similarity or some threshold-based comparison? If you want exact similarity, you could just do <code>np.all(img == white)</code>, using the <code>==</code> operator instead of <code>is</code>, since <code>is</code> checks that they are the same <i>object</i> instead of the same <i>values</i>. If you want threshold-based, then just take the absolute difference or the square difference with the color you want and sum that over the whole image. I.e. <code>np.sum(cv2.absdiff(img, white))</code> --- you can normalize by the number of pixels by dividing by <code>img.size</code>."}, {"owner": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "edited": false, "score": 0, "creation_date": 1553116071, "post_id": 55270063, "comment_id": 97271557, "body": "In the second case with <code>cv2.absdiff()</code>, the <code>white</code> argument would need to be the same size. You can of course do this with numpy directly instead of OpenCV to allow broadcasting, just be careful and make sure you&#39;re not overflowing."}], "owner": {"reputation": 5, "user_id": 10651373, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c634bfeba20cfb5381b8ed350523698?s=128&d=identicon&r=PG", "display_name": "Felix92", "link": "https://stackoverflow.com/users/10651373/felix92"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 402, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1553115452, "creation_date": 1553115452, "question_id": 55270063, "link": "https://stackoverflow.com/questions/55270063/opencv-how-can-i-check-the-color-of-a-roi", "title": "OpenCV: How can i check the color of a roi?", "body": "<p>I have a picture from which a region of interest is selected. Now I want to check if the color values \u200b\u200bof the pixels are similar in both black and white and BGR. Return value should be true if and if not similar. How can I implement this with opencv in python?</p>\n\n<pre><code>def test(file, y1, y2, x1, x2):\n\n    img = cv2.imread(file, cv2.IMREAD_GRAYSCALE)\n    white = (255, 255)  \n    print(img.shape) \n    roi = img[y1:y2, x1:x2]\n\n    print(np.all(video_place is white))\n    cv2.imshow('image', roi)\n    cv2.waitKey()\n    cv2.destroyAllWindows\n</code></pre>\n\n<p>MfG Felix</p>\n"}, {"tags": ["python", "scikit-learn", "classification", "text-classification", "countvectorizer"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 11234334, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b6918093720810f552a0663e3b9da08?s=128&d=identicon&r=PG&f=1", "display_name": "Tallen86", "link": "https://stackoverflow.com/users/11234334/tallen86"}, "edited": false, "score": 1, "creation_date": 1553358132, "post_id": 55291738, "comment_id": 97358607, "body": "thank you very much! Managed to get it working. also needed to cast the dataframe to int but everything else was spot on"}, {"owner": {"reputation": 3213, "user_id": 10956606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b72e8de2912e894bba967bf023e1826?s=128&d=identicon&r=PG&f=1", "display_name": "MaximeKan", "link": "https://stackoverflow.com/users/10956606/maximekan"}, "reply_to_user": {"reputation": 13, "user_id": 11234334, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b6918093720810f552a0663e3b9da08?s=128&d=identicon&r=PG&f=1", "display_name": "Tallen86", "link": "https://stackoverflow.com/users/11234334/tallen86"}, "edited": false, "score": 0, "creation_date": 1553365021, "post_id": 55291738, "comment_id": 97360805, "body": "Glad it helped!"}], "tags": [], "owner": {"reputation": 3213, "user_id": 10956606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b72e8de2912e894bba967bf023e1826?s=128&d=identicon&r=PG&f=1", "display_name": "MaximeKan", "link": "https://stackoverflow.com/users/10956606/maximekan"}, "is_accepted": true, "score": 0, "last_activity_date": 1553219196, "creation_date": 1553219196, "answer_id": 55291738, "question_id": 55270053, "link": "https://stackoverflow.com/questions/55270053/countvectorizer-values-work-alone-in-classifier-cannot-get-working-when-adding/55291738#55291738", "title": "CountVectorizer values work alone in classifier, cannot get working when adding other features", "body": "<p>I would do this the other way around and add your features to your vectorization. Here is what I mean with a toy example:</p>\n\n<pre><code>from sklearn.feature_extraction.text import CountVectorizer\nfrom sklearn.ensemble import RandomForestClassifier\nimport pandas as pd\nimport numpy as np\nfrom scipy.sparse import hstack, csr_matrix\n</code></pre>\n\n<p>Suppose now you have you features in a dataframe called <code>df</code> and your labels in <code>y_train</code>:</p>\n\n<pre><code>df = pd.DataFrame({\"a\":[1,2],\"b\":[2,3],\"c\":['we love cars', 'we love cakes']})\ny_train = np.array([0,1])\n</code></pre>\n\n<p>You want to perform a text vectorization on column <code>c</code> and add the features <code>a</code> and <code>b</code> to your vectorization.</p>\n\n<pre><code>vectorizer = CountVectorizer()\nCountVecTest = vectorizer.fit_transform(df.c)\n\nCountVecTest.toarray()\n</code></pre>\n\n<p>This will return:</p>\n\n<pre><code>array([[0, 1, 1, 1],\n       [1, 0, 1, 1]], dtype=int64)\n</code></pre>\n\n<p>But <code>CountVecTest</code> now is a scipy sparse matrix. So what you need to do is add your features to this matrix. Like this:</p>\n\n<pre><code>X_train = hstack([CountVecTest, csr_matrix(df[['a','b']])])\n\nX_train.toarray()\n</code></pre>\n\n<p>This will return, as expected:</p>\n\n<pre><code>array([[0, 1, 1, 1, 1, 2],\n       [1, 0, 1, 1, 2, 3]], dtype=int64)\n</code></pre>\n\n<p>Then you can train your random forest:</p>\n\n<pre><code>rf = RandomForestClassifier(criterion='entropy', min_samples_leaf=10, min_samples_split=20)\nrf.fit(X_train, y_train)\n</code></pre>\n\n<p>NB: In the code snippet you provided, you passed the label info (the \"bot\" column) to the training features, which you should obviously not do.</p>\n"}], "owner": {"reputation": 13, "user_id": 11234334, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b6918093720810f552a0663e3b9da08?s=128&d=identicon&r=PG&f=1", "display_name": "Tallen86", "link": "https://stackoverflow.com/users/11234334/tallen86"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "accepted_answer_id": 55291738, "answer_count": 1, "score": 1, "last_activity_date": 1553219196, "creation_date": 1553115415, "question_id": 55270053, "link": "https://stackoverflow.com/questions/55270053/countvectorizer-values-work-alone-in-classifier-cannot-get-working-when-adding", "title": "CountVectorizer values work alone in classifier, cannot get working when adding other features", "body": "<p>I have a CSV of twitter profile data, containing: name, description, followers count, following count, bot (class I want to predict)</p>\n\n<p>I have successfully executed a classification model when using just the CountVectorizer values (xtrain) and Bot (ytrain). But have not been able to add this feature to my set of other features.</p>\n\n<pre><code>vectorizer = CountVectorizer()\nCountVecTest = vectorizer.fit_transform(training_data.description.values.astype('U'))\nCountVecTest = CountVecTest.toarray()\narr = sparse.coo_matrix(CountVecTest)\ntraining_data[\"NewCol\"] = arr.toarray().tolist()\n\nrf = RandomForestClassifier(criterion='entropy', min_samples_leaf=10, min_samples_split=20)\nrf = rf.fit(training_data[[\"followers_count\",\"friends_count\",\"NewCol\",\"bot\"]], training_data.bot)\n</code></pre>\n\n<p>ERROR:</p>\n\n<pre><code>---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n&lt;ipython-input-54-7d67a6586592&gt; in &lt;module&gt;()\n      1 rf = RandomForestClassifier(criterion='entropy', min_samples_leaf=10, min_samples_split=20)\n----&gt; 2 rf = rf.fit(training_data[[\"followers_count\",\"friends_count\",\"NewCol\",\"bot\"]], training_data.bot)\n\nD:\\0_MyFiles\\0_Libraries\\Documents\\Anaconda3\\lib\\site-packages\\sklearn\\ensemble\\forest.py in fit(self, X, y, sample_weight)\n    245         \"\"\"\n    246         # Validate or convert input data\n--&gt; 247         X = check_array(X, accept_sparse=\"csc\", dtype=DTYPE)\n    248         y = check_array(y, accept_sparse='csc', ensure_2d=False, dtype=None)\n    249         if sample_weight is not None:\n\nD:\\0_MyFiles\\0_Libraries\\Documents\\Anaconda3\\lib\\site-packages\\sklearn\\utils\\validation.py in check_array(array, accept_sparse, dtype, order, copy, force_all_finite, ensure_2d, allow_nd, ensure_min_samples, ensure_min_features, warn_on_dtype, estimator)\n    431                                       force_all_finite)\n    432     else:\n--&gt; 433         array = np.array(array, dtype=dtype, order=order, copy=copy)\n    434 \n    435         if ensure_2d:\n\nValueError: setting an array element with a sequence.\n</code></pre>\n\n<p>I did some debugging:</p>\n\n<pre><code>print(type(training_data.NewCol))\nprint(type(training_data.NewCol[0]))\n&gt;&gt;&gt; &lt;class 'pandas.core.series.Series'&gt;\n&gt;&gt;&gt; &lt;class 'numpy.ndarray'&gt;\n</code></pre>\n\n<p>Any help would be appreciated. </p>\n"}, {"tags": ["python", "arrays", "sorting"], "comments": [{"owner": {"reputation": 3243, "user_id": 5454400, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/50623f5ea714bc6271f9c34b13b090ab?s=128&d=identicon&r=PG&f=1", "display_name": "peachykeen", "link": "https://stackoverflow.com/users/5454400/peachykeen"}, "edited": false, "score": 0, "creation_date": 1553115520, "post_id": 55270023, "comment_id": 97271293, "body": "What have you tried so far? Any idea about relevant functions to use etc.? Try breaking the problem down into two parts: reading the data from a file and formatting the data."}], "answers": [{"comments": [{"owner": {"reputation": 7468, "user_id": 2695448, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/074d0d3f1001c26d04edefb317f03059?s=128&d=identicon&r=PG&f=1", "display_name": "mad_", "link": "https://stackoverflow.com/users/2695448/mad"}, "edited": false, "score": 0, "creation_date": 1553115712, "post_id": 55270080, "comment_id": 97271383, "body": "You can simply reduce the <code>split</code> calls from 2 to 1 by splitting on <code>l</code>"}], "tags": [], "owner": {"reputation": 8927, "user_id": 873237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a65e45868133e22844e788803e1773b?s=128&d=identicon&r=PG", "display_name": "JBirdVegas", "link": "https://stackoverflow.com/users/873237/jbirdvegas"}, "is_accepted": false, "score": -1, "last_activity_date": 1553115522, "creation_date": 1553115522, "answer_id": 55270080, "question_id": 55270023, "link": "https://stackoverflow.com/questions/55270023/reading-from-text-file-and-storing-in-array/55270080#55270080", "title": "Reading from text file and storing in array", "body": "<pre><code>with open('blah.txt', 'r') as file:\n    a=[[l.split(' ')[0], l.split(' ')[1] for l in file.readlines() ]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3885, "user_id": 652528, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a580420b66f89e76e1fb9a368f785b3f?s=128&d=identicon&r=PG", "display_name": "geckos", "link": "https://stackoverflow.com/users/652528/geckos"}, "is_accepted": false, "score": 0, "last_activity_date": 1553115993, "last_edit_date": 1553115993, "creation_date": 1553115564, "answer_id": 55270091, "question_id": 55270023, "link": "https://stackoverflow.com/questions/55270023/reading-from-text-file-and-storing-in-array/55270091#55270091", "title": "Reading from text file and storing in array", "body": "<p>This should work, </p>\n\n<pre><code>with open('filepath') as f:\n    array = [line.split() for line in f.readlines()]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 440, "user_id": 6047557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f95e6e714cdc9f1c7d1df1d9398cad0e?s=128&d=identicon&r=PG&f=1", "display_name": "perennial_noob", "link": "https://stackoverflow.com/users/6047557/perennial-noob"}, "is_accepted": false, "score": 0, "last_activity_date": 1553115601, "creation_date": 1553115601, "answer_id": 55270104, "question_id": 55270023, "link": "https://stackoverflow.com/questions/55270023/reading-from-text-file-and-storing-in-array/55270104#55270104", "title": "Reading from text file and storing in array", "body": "<p>Approach:\nHave a result list = <code>[]</code>\nSplit the text by newlines <code>\\n</code>.\nNow in a for-loop\n   split each line by a space char <code></code> and assign to a tuple\n   append tuple to the result list\nI'm refraining from writing code here to let you work it out.</p>\n"}, {"comments": [{"owner": {"reputation": 3885, "user_id": 652528, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a580420b66f89e76e1fb9a368f785b3f?s=128&d=identicon&r=PG", "display_name": "geckos", "link": "https://stackoverflow.com/users/652528/geckos"}, "edited": false, "score": 0, "creation_date": 1553115940, "post_id": 55270105, "comment_id": 97271507, "body": "This is the right answer :)"}, {"owner": {"reputation": 7468, "user_id": 2695448, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/074d0d3f1001c26d04edefb317f03059?s=128&d=identicon&r=PG&f=1", "display_name": "mad_", "link": "https://stackoverflow.com/users/2695448/mad"}, "edited": false, "score": 0, "creation_date": 1553116207, "post_id": 55270105, "comment_id": 97271618, "body": "Can use<code>map</code> to improve readablity"}], "tags": [], "owner": {"reputation": 23213, "user_id": 7131757, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wvEUE.jpg?s=128&g=1", "display_name": "Giorgos Myrianthous", "link": "https://stackoverflow.com/users/7131757/giorgos-myrianthous"}, "is_accepted": false, "score": 1, "last_activity_date": 1553116067, "last_edit_date": 1553116067, "creation_date": 1553115611, "answer_id": 55270105, "question_id": 55270023, "link": "https://stackoverflow.com/questions/55270023/reading-from-text-file-and-storing-in-array/55270105#55270105", "title": "Reading from text file and storing in array", "body": "<pre><code>with open('test.txt', 'r') as file:\n    output = [ line.strip().split(' ') for line in file.readlines()]\n\n# Cast strings to floats\noutput = [[float(j) for j in i] for i in output]    \nprint(output)\n</code></pre>\n\n<p>should give the desired output: </p>\n\n<pre><code>[[5.07878, 5.078993], [7.633073, 7.63318], [2.919274, 2.919369], [3.410284, 3.410314]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3962, "user_id": 9462829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dd68e18954cab2275b2cc02845a37d9?s=128&d=identicon&r=PG&f=1", "display_name": "Juan C", "link": "https://stackoverflow.com/users/9462829/juan-c"}, "is_accepted": false, "score": 0, "last_activity_date": 1553115656, "creation_date": 1553115656, "answer_id": 55270115, "question_id": 55270023, "link": "https://stackoverflow.com/questions/55270023/reading-from-text-file-and-storing-in-array/55270115#55270115", "title": "Reading from text file and storing in array", "body": "<p>This should do</p>\n\n<pre><code>with open (\"data.txt\", \"r\") as myfile:\n    data=myfile.readlines()\n\nfor i in range(len(data)):\n    data[i]=data[i].split()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4323, "user_id": 1720199, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cODPq.jpg?s=128&g=1", "display_name": "cglacet", "link": "https://stackoverflow.com/users/1720199/cglacet"}, "is_accepted": false, "score": 0, "last_activity_date": 1553116050, "last_edit_date": 1553116050, "creation_date": 1553115747, "answer_id": 55270139, "question_id": 55270023, "link": "https://stackoverflow.com/questions/55270023/reading-from-text-file-and-storing-in-array/55270139#55270139", "title": "Reading from text file and storing in array", "body": "<p>Python provides the perfect module for this, it's called <a href=\"https://docs.python.org/3.5/library/csv.html#csv.reader\" rel=\"nofollow noreferrer\"><code>csv</code></a>:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import csv\n\ndef csv_to_array(file_name, **kwargs):\n    with open(file_name) as csvfile:\n        reader = csv.reader(csvfile, **kwargs)\n        return [list(map(float, row)) for row in reader]\n\n\nprint(csv_to_array('test.csv'))\n</code></pre>\n\n<p>If you later have a file with a different field separator, say \";\", then you'll just have to change the call to: </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>print(csv_to_array('test.csv', delimiter=';'))\n</code></pre>\n\n<p>Note that if you don't care about importing <code>numpy</code> then <a href=\"https://stackoverflow.com/a/3519314/1720199\">this solution</a> is even better.</p>\n"}, {"tags": [], "owner": {"reputation": 427, "user_id": 8843390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2b78ac6a5f9b01957bd550fceeec515?s=128&d=identicon&r=PG&f=1", "display_name": "Alakazam", "link": "https://stackoverflow.com/users/8843390/alakazam"}, "is_accepted": false, "score": 0, "last_activity_date": 1553115795, "creation_date": 1553115795, "answer_id": 55270152, "question_id": 55270023, "link": "https://stackoverflow.com/questions/55270023/reading-from-text-file-and-storing-in-array/55270152#55270152", "title": "Reading from text file and storing in array", "body": "<p>You first want to retrieve the file content in an array of string (each string is one line of the file)<br></p>\n\n<p>with open(\"myfile.txt\", 'r') as f:\n    file_content = f.readlines()</p>\n\n<p><em>Refer to open doc for more: <a href=\"https://docs.python.org/3/library/functions.html#open_\" rel=\"nofollow noreferrer\">https://docs.python.org/3/library/functions.html#open</em></a></p>\n\n<p>Then you want to create a list</p>\n\n<pre><code>content_list = []\n</code></pre>\n\n<p>And then you want to fill it with each string, when each string should be split with a space(using <code>split()</code> function) which make a list with the two values and add it to <code>content_list</code>, use a for loop !</p>\n\n<pre><code>for line in file_content:\n    values = line.split(' ') # split the line at the space\n    content_list.append(values)\n</code></pre>\n\n<p>By the way, this can be simplified with a <em>List Comprehension</em>:</p>\n\n<pre><code>content_list = [s.split(' ') for s in file_content]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 131, "user_id": 11229511, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-6YJnZkPkOD0/AAAAAAAAAAI/AAAAAAAAAAA/YjfCCww7H30/photo.jpg?sz=128", "display_name": "Hugo Delahaye", "link": "https://stackoverflow.com/users/11229511/hugo-delahaye"}, "is_accepted": false, "score": 0, "last_activity_date": 1553117377, "creation_date": 1553117377, "answer_id": 55270489, "question_id": 55270023, "link": "https://stackoverflow.com/questions/55270023/reading-from-text-file-and-storing-in-array/55270489#55270489", "title": "Reading from text file and storing in array", "body": "<p>To convert to this exact format :</p>\n\n<pre><code>with open('filepath', 'r') as f:\n    raw = f.read()\n\narr = [[float(j) for j in i.split(' ')] for i in raw.splitlines()]\nprint arr\n</code></pre>\n\n<p>outputs :</p>\n\n<pre><code>[[5.07878, 5.078993], [7.633073, 7.63318], [2.919274, 2.919369], [3.410284, 3.410314]]\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8816435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d4f8b271458c19420b25abd413759c4?s=128&d=identicon&r=PG&f=1", "display_name": "user373336", "link": "https://stackoverflow.com/users/8816435/user373336"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "closed_date": 1553122849, "answer_count": 8, "score": 0, "last_activity_date": 1553122880, "creation_date": 1553115262, "last_edit_date": 1553115331, "question_id": 55270023, "link": "https://stackoverflow.com/questions/55270023/reading-from-text-file-and-storing-in-array", "closed_reason": "Duplicate", "title": "Reading from text file and storing in array", "body": "<p>If I have a text file containing the following numbers:</p>\n\n<pre><code>5.078780 5.078993\n7.633073 7.633180\n2.919274 2.919369\n3.410284 3.410314\n</code></pre>\n\n<p>How can read it and store it in an array, so that it becomes:</p>\n\n<pre><code>[[5.078780,5.078993],[7.633073,7.633180],[2.919274,2.919369],[3.410284,3.410314]]\n</code></pre>\n"}, {"tags": ["python", "django", "tinymce"], "owner": {"reputation": 330, "user_id": 7355857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6c88203da4ee7e6f4f9458a0795c63b?s=128&d=identicon&r=PG&f=1", "display_name": "Max Loyd", "link": "https://stackoverflow.com/users/7355857/max-loyd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 518, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1553121762, "creation_date": 1553115261, "question_id": 55270022, "link": "https://stackoverflow.com/questions/55270022/tinymce-an-invalid-form-control-with-name-text-is-not-focusable", "title": "Tinymce - An invalid form control with name=&#39;text&#39; is not focusable", "body": "<p>When submitting a form in Django I get: <code>An invalid form control with name='text' is not focusable.</code></p>\n\n<p>The reason it isn't working is because 'Chrome wants to focus on a control that is required but still empty so that it can pop up the message 'Please fill out this field'. However, if the control is hidden at the point that Chrome wants to pop up the message, that is at the time of form submission, Chrome can't focus on the control because it is hidden, therefore the form won't submit.' - <a href=\"https://stackoverflow.com/questions/22148080/an-invalid-form-control-with-name-is-not-focusable\">An invalid form control with name=&#39;&#39; is not focusable</a></p>\n\n<p>But I am really not sure how to do this in TinyMCE or Django and was wondering if anyone knew.</p>\n\n<p>HTML:</p>\n\n<pre><code>{% block content %}\n    &lt;div class=\"container\"&gt;\n        &lt;div class=\"form-create\"&gt;\n            &lt;form method=\"post\" enctype=\"multipart/form-data\"&gt;\n                {% csrf_token %}\n                {{ form|crispy }}\n                &lt;input type=\"submit\" class=\"btn btn-success\" value=\"Publish\"&gt;\n            &lt;/form&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n{% endblock %}\n\n\n{% block script %}\n        tinyMCE.init({\n            selector: '#id_text',\n        });\n{% endblock %}\n</code></pre>\n\n<p>Views:</p>\n\n<pre><code>class PostCreateView(LoginRequiredMixin, PostEdit, CreateView):\n    fields = ['title', 'text', 'category', 'image', 'sub_description']\n\n    def form_valid(self, form):\n        form.instance.author = self.request.user\n        return super().form_valid(form)\n</code></pre>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 4244, "user_id": 3348112, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ab4cd9458f5debd780353a5554b718d8?s=128&d=identicon&r=PG&f=1", "display_name": "CAustin", "link": "https://stackoverflow.com/users/3348112/caustin"}, "edited": false, "score": 1, "creation_date": 1553116970, "post_id": 55270021, "comment_id": 97271964, "body": "I would suggest using an HTML parser."}], "answers": [{"comments": [{"owner": {"reputation": 475, "user_id": 1748553, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/75014e533a5e7f6b1ab8f8cf2ac73910?s=128&d=identicon&r=PG", "display_name": "Neil Aggarwal", "link": "https://stackoverflow.com/users/1748553/neil-aggarwal"}, "edited": false, "score": 0, "creation_date": 1553117282, "post_id": 55270189, "comment_id": 97272089, "body": "Merig.  Thank you.  Great answer.  But, for my very specific purposes, that won&#39;t solve my problem.  Any way to get the text between the li tags out using regex alone (not resorting to other python functions)?"}], "tags": [], "owner": {"reputation": 1039, "user_id": 7443101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f96d09d90a71a8e256883f1f1576cf01?s=128&d=identicon&r=PG&f=1", "display_name": "Merig", "link": "https://stackoverflow.com/users/7443101/merig"}, "is_accepted": false, "score": 4, "last_activity_date": 1553115937, "creation_date": 1553115937, "answer_id": 55270189, "question_id": 55270021, "link": "https://stackoverflow.com/questions/55270021/match-text-within-parenthesis-multiple-times/55270189#55270189", "title": "Match Text Within Parenthesis Multiple Times", "body": "<p>This should work:</p>\n\n<pre><code>import re\n\nsource = '&lt;p&gt;Joe likes &lt;ul&gt;&lt;li&gt;pizza&lt;/li&gt;, &lt;li&gt;burgers&lt;/li&gt;, and &lt;li&gt;fries&lt;/li&gt;&lt;/ul&gt;&lt;/p&gt;'\nres = ''.join(re.findall('&lt;li&gt;[^&lt;]*&lt;/li&gt;', source))\n# &lt;li&gt;pizza&lt;/li&gt;&lt;li&gt;burgers&lt;/li&gt;&lt;li&gt;fries&lt;/li&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1711, "user_id": 515088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/089ca6c4026359bd27c6318ed15f026b?s=128&d=identicon&r=PG", "display_name": "John Sloper", "link": "https://stackoverflow.com/users/515088/john-sloper"}, "is_accepted": false, "score": 2, "last_activity_date": 1553115970, "creation_date": 1553115970, "answer_id": 55270198, "question_id": 55270021, "link": "https://stackoverflow.com/questions/55270021/match-text-within-parenthesis-multiple-times/55270198#55270198", "title": "Match Text Within Parenthesis Multiple Times", "body": "<p>Assuming you have already extracted the example string you state you can do:</p>\n\n<pre><code>import re\ns = \"&lt;p&gt;Joe likes &lt;ul&gt;&lt;li&gt;pizza&lt;/li&gt;, &lt;li&gt;burgers&lt;/li&gt;, and &lt;li&gt;fries&lt;/li&gt;&lt;/ul&gt;&lt;/p&gt;\"\nre.findall(\"&lt;li&gt;.+?&lt;/li&gt;\", s)\n\nOutput:\n['&lt;li&gt;pizza&lt;/li&gt;', '&lt;li&gt;burgers&lt;/li&gt;', '&lt;li&gt;fries&lt;/li&gt;']\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 475, "user_id": 1748553, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/75014e533a5e7f6b1ab8f8cf2ac73910?s=128&d=identicon&r=PG", "display_name": "Neil Aggarwal", "link": "https://stackoverflow.com/users/1748553/neil-aggarwal"}, "edited": false, "score": 0, "creation_date": 1553117168, "post_id": 55270310, "comment_id": 97272041, "body": "Hey Hugo.  &lt;p&gt; tags are necessary because I am assuming that this sentence is part of a much larger page with many &lt;li&gt;.  The &lt;p&gt; tag is just an example tag that would illustrate how I might isolate the specific sentence I am trying to extract info from."}, {"owner": {"reputation": 475, "user_id": 1748553, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/75014e533a5e7f6b1ab8f8cf2ac73910?s=128&d=identicon&r=PG", "display_name": "Neil Aggarwal", "link": "https://stackoverflow.com/users/1748553/neil-aggarwal"}, "edited": false, "score": 0, "creation_date": 1553117202, "post_id": 55270310, "comment_id": 97272056, "body": "Am looking for a way to do this without the &quot;findall,&quot;  I would like to get all the text out as a single match using findone."}], "tags": [], "owner": {"reputation": 131, "user_id": 11229511, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-6YJnZkPkOD0/AAAAAAAAAAI/AAAAAAAAAAA/YjfCCww7H30/photo.jpg?sz=128", "display_name": "Hugo Delahaye", "link": "https://stackoverflow.com/users/11229511/hugo-delahaye"}, "is_accepted": false, "score": 1, "last_activity_date": 1553119885, "last_edit_date": 1553119885, "creation_date": 1553116491, "answer_id": 55270310, "question_id": 55270021, "link": "https://stackoverflow.com/questions/55270021/match-text-within-parenthesis-multiple-times/55270310#55270310", "title": "Match Text Within Parenthesis Multiple Times", "body": "<p>Why do you need the <code>&lt;p&gt;</code> tags ?</p>\n\n<pre><code>import re\n\nsource = '&lt;p&gt;Joe likes &lt;ul&gt;&lt;li&gt;pizza&lt;/li&gt;, &lt;li&gt;burgers&lt;/li&gt;, and &lt;li&gt;fries&lt;/li&gt;&lt;/ul&gt;&lt;/p&gt;'\n\nm = re.findall('(&lt;li&gt;.+?&lt;/li&gt;)',source)\nprint m\n</code></pre>\n\n<p>returns want you want.</p>\n\n<p><strong>Edit</strong></p>\n\n<p>If you only want text that is between <code>&lt;p&gt;</code> tags you can do it in two steps :</p>\n\n<pre><code>import re\n\nsource = '&lt;p&gt;Joe likes &lt;ul&gt;&lt;li&gt;pizza&lt;/li&gt;, &lt;li&gt;burgers&lt;/li&gt;, and &lt;li&gt;fries&lt;/li&gt;&lt;/ul&gt;&lt;/p&gt; and also &lt;li&gt;coke&lt;/li&gt;'\n\nss = re.findall('&lt;p&gt;(.+?)&lt;/p&gt;',source)\n\nfor s in ss:\n    m = re.findall('(&lt;li&gt;.+?&lt;/li&gt;)',s)\n    print m\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 463, "user_id": 3282554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f2a267f9cd81add2ea1693cb2e07b67?s=128&d=identicon&r=PG&f=1", "display_name": "sanooj", "link": "https://stackoverflow.com/users/3282554/sanooj"}, "is_accepted": false, "score": 0, "last_activity_date": 1553135092, "creation_date": 1553135092, "answer_id": 55272901, "question_id": 55270021, "link": "https://stackoverflow.com/questions/55270021/match-text-within-parenthesis-multiple-times/55272901#55272901", "title": "Match Text Within Parenthesis Multiple Times", "body": "<p>Try this regex with re.findall()</p>\n\n<p>To get text: <code>&lt;li&gt;([^&lt;]*)&lt;/li&gt;</code> , To get tags: <code>&lt;li&gt;[^&lt;]*&lt;/li&gt;</code></p>\n\n<pre><code>&gt;&gt;&gt; import re\n&gt;&gt;&gt; s = \"&lt;p&gt;Joe likes &lt;ul&gt;&lt;li&gt;pizza&lt;/li&gt;, &lt;li&gt;burgers&lt;/li&gt;, and &lt;li&gt;fries&lt;/li&gt;&lt;/ul&gt;&lt;/p&gt;\"\n&gt;&gt;&gt; text=re.findall(\"&lt;li&gt;([^&lt;]*)&lt;/li&gt;\", s)\n&gt;&gt;&gt; tag=re.findall(\"&lt;li&gt;[^&lt;]*&lt;/li&gt;\", s)\n&gt;&gt;&gt; text\n['pizza', 'burgers', 'fries']\n&gt;&gt;&gt; tag\n['&lt;li&gt;pizza&lt;/li&gt;', '&lt;li&gt;burgers&lt;/li&gt;', '&lt;li&gt;fries&lt;/li&gt;']\n&gt;&gt;&gt; \n</code></pre>\n"}], "owner": {"reputation": 475, "user_id": 1748553, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/75014e533a5e7f6b1ab8f8cf2ac73910?s=128&d=identicon&r=PG", "display_name": "Neil Aggarwal", "link": "https://stackoverflow.com/users/1748553/neil-aggarwal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1553135092, "creation_date": 1553115257, "question_id": 55270021, "link": "https://stackoverflow.com/questions/55270021/match-text-within-parenthesis-multiple-times", "title": "Match Text Within Parenthesis Multiple Times", "body": "<p>Assume I have text like this:</p>\n\n<pre><code>&lt;p&gt;Joe likes &lt;ul&gt;&lt;li&gt;pizza&lt;/li&gt;, &lt;li&gt;burgers&lt;/li&gt;, and &lt;li&gt;fries&lt;/li&gt;&lt;/ul&gt;&lt;/p&gt;\n</code></pre>\n\n<p>I want to use a single regex to extract all of the text between the <code>&lt;li&gt;</code>/list tags using python.</p>\n\n<pre><code>regexp = &lt;p&gt;.+?(&lt;li&gt;.+?&lt;/li&gt;).+?&lt;/p&gt;\n</code></pre>\n\n<p>This only returns the first item in the list surrounded by the <code>&lt;li&gt;</code>/list tags:</p>\n\n<pre><code>&lt;li&gt;pizza&lt;/li&gt;\n</code></pre>\n\n<p>Is there a way for me to grab all of the items between the <code>&lt;li&gt;</code>/list tags so my output would look like:</p>\n\n<pre><code>&lt;li&gt;pizza&lt;/li&gt;&lt;li&gt;burgers&lt;/li&gt;&lt;li&gt;fries&lt;/li&gt;\n</code></pre>\n"}, {"tags": ["python", "django", "qr-code"], "answers": [{"tags": [], "owner": {"reputation": 2335, "user_id": 6657098, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/571d38df0ecf7797079379672cb75612?s=128&d=identicon&r=PG&f=1", "display_name": "cullzie", "link": "https://stackoverflow.com/users/6657098/cullzie"}, "is_accepted": true, "score": 0, "last_activity_date": 1553122437, "creation_date": 1553122437, "answer_id": 55271326, "question_id": 55269996, "link": "https://stackoverflow.com/questions/55269996/python-how-to-generate-qrcode/55271326#55271326", "title": "Python how to generate qrcode", "body": "<p>Have a look at <a href=\"https://pypi.org/project/qrcode/\" rel=\"nofollow noreferrer\">qrcode</a> library. It should be able to do everything you need.</p>\n\n<p>Here's a code snippet to get started:   </p>\n\n<pre><code>import qrcode\n\nqr_image = qrcode.make('cullzie')\nqr_image.save('user_data_qr.png')\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11228947, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-EZiGnsUCSmc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd_YgmP2OdMRZdItDyt15IEaUSX8w/mo/photo.jpg?sz=128", "display_name": "Sabin Kabamba", "link": "https://stackoverflow.com/users/11228947/sabin-kabamba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 471, "favorite_count": 1, "accepted_answer_id": 55271326, "answer_count": 1, "score": -2, "last_activity_date": 1553122437, "creation_date": 1553115191, "question_id": 55269996, "link": "https://stackoverflow.com/questions/55269996/python-how-to-generate-qrcode", "title": "Python how to generate qrcode", "body": "<p>I'd like to generate a qr-code which will contain all informations concerning a user with django.</p>\n\n<p>can you help me please....even with a link or a code...or with a github project ;)</p>\n\n<p>thanks</p>\n"}, {"tags": ["python", "python-3.x", "code-coverage", "pytest", "coverage.py"], "comments": [{"owner": {"reputation": 1412, "user_id": 3809561, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RTS59.jpg?s=128&g=1", "display_name": "yyny", "link": "https://stackoverflow.com/users/3809561/yyny"}, "edited": false, "score": 6, "creation_date": 1553115363, "post_id": 55269982, "comment_id": 97271218, "body": "What&#39;s the point? Why would you want to test that condition? You should really ask yourself what you&#39;re trying to achieve by improving test coverage."}, {"owner": {"reputation": 156, "user_id": 7938152, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1wcjiGwSFuc/AAAAAAAAAAI/AAAAAAAAH7Y/5AzDJ9WQ44s/photo.jpg?sz=128", "display_name": "Nicolas Berthier", "link": "https://stackoverflow.com/users/7938152/nicolas-berthier"}, "reply_to_user": {"reputation": 1412, "user_id": 3809561, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RTS59.jpg?s=128&g=1", "display_name": "yyny", "link": "https://stackoverflow.com/users/3809561/yyny"}, "edited": false, "score": 0, "creation_date": 1553115455, "post_id": 55269982, "comment_id": 97271264, "body": "@yoyoyonny, I agree with you, just being a bit anal with 100% test code coverage. And this question picked my curiosity."}, {"owner": {"reputation": 1812, "user_id": 5945883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17f8de79f057abb63afb9ce7bee0ca51?s=128&d=identicon&r=PG&f=1", "display_name": "R2RT", "link": "https://stackoverflow.com/users/5945883/r2rt"}, "edited": false, "score": 1, "creation_date": 1553116458, "post_id": 55269982, "comment_id": 97271716, "body": "Well, the simplest way to get 100% is to remove <code>if __name__ == &quot;__main__&quot;</code> code"}, {"owner": {"reputation": 178, "user_id": 3366563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wpWwe.jpg?s=128&g=1", "display_name": "hotenov", "link": "https://stackoverflow.com/users/3366563/hotenov"}, "edited": false, "score": 0, "creation_date": 1619252394, "post_id": 55269982, "comment_id": 118852760, "body": "or add comment <code># pragma: no cover</code> for these lines of code. If you 100% confident, of course :)"}], "answers": [{"comments": [{"owner": {"reputation": 5646, "user_id": 6238076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B6N6D.png?s=128&g=1", "display_name": "gdlmx", "link": "https://stackoverflow.com/users/6238076/gdlmx"}, "edited": false, "score": 3, "creation_date": 1553115959, "post_id": 55270052, "comment_id": 97271516, "body": "This doesn&#39;t answer the question, which is about &quot;if I run my test through coverage.py, I see that the code under <code>if __name__ == &quot;__main__&quot;:</code> is not tested. Is there a way to achieve that?&quot;."}], "tags": [], "owner": {"reputation": 450, "user_id": 10813463, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--RByWNItLv0/AAAAAAAAAAI/AAAAAAAAAGg/n1O8RqzoTQU/photo.jpg?sz=128", "display_name": "Nick Vitha", "link": "https://stackoverflow.com/users/10813463/nick-vitha"}, "is_accepted": false, "score": -2, "last_activity_date": 1553116148, "last_edit_date": 1553116148, "creation_date": 1553115415, "answer_id": 55270052, "question_id": 55269982, "link": "https://stackoverflow.com/questions/55269982/test-if-name-main-with-click-and-pytest/55270052#55270052", "title": "Test if __name__ == &quot;__main__&quot;: with click and pytest", "body": "<p><code>__name__ != \"__main__\"</code> <a href=\"https://www.geeksforgeeks.org/__name__-special-variable-python/\" rel=\"nofollow noreferrer\">if you're calling this from a different module.</a></p>\n\n<p>What <em>should</em> work is:</p>\n\n<pre><code>import click\n\n@click.command()\n@click.option('--text', default='hello world', help='Text to display.')\ndef say(text):\n\n    print(text)\n\nsay()\n</code></pre>\n\n<p>See this other SO answer if you don't want to do it this way.:\n<a href=\"https://stackoverflow.com/a/5850364/10813463\">https://stackoverflow.com/a/5850364/10813463</a></p>\n"}, {"tags": [], "owner": {"reputation": 5646, "user_id": 6238076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B6N6D.png?s=128&g=1", "display_name": "gdlmx", "link": "https://stackoverflow.com/users/6238076/gdlmx"}, "is_accepted": false, "score": 1, "last_activity_date": 1553118157, "last_edit_date": 1553118157, "creation_date": 1553117157, "answer_id": 55270438, "question_id": 55269982, "link": "https://stackoverflow.com/questions/55269982/test-if-name-main-with-click-and-pytest/55270438#55270438", "title": "Test if __name__ == &quot;__main__&quot;: with click and pytest", "body": "<p>Maybe you didn't realize that the codes below <code>__name__ == \"__main__\"</code> was never invoked  by your test code</p>\n\n<pre><code>result = runner.invoke(test.say, ['--text=blablabla'])\n</code></pre>\n\n<p>Even if you modify the \"test.py\" like this, your test will not complain.</p>\n\n<pre><code>if __name__ == \"__main__\":\n    raise RuntimeError(\"Something is wrong\")\n    say()\n</code></pre>\n\n<p>The reason is that <code>__name__ == \"__main__\"</code> will be false if the module file \"test.py\" is imported. So any codes inside the <code>if</code> clause will be ignored.</p>\n\n<p>To get 100% coverage, run the command directly</p>\n\n<pre><code>$ coverage run test.py --text=blablabla\n  blablabla\n$ coverage report\n  Name      Stmts   Miss  Cover                                                                                                             \n  -----------------------------                                                                                                             \n  test.py       6      0   100%  \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 966, "user_id": 324449, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2176ef875c25c8653329e175a7e084cb?s=128&d=identicon&r=PG", "display_name": "Max Gasner", "link": "https://stackoverflow.com/users/324449/max-gasner"}, "is_accepted": false, "score": 1, "last_activity_date": 1593292979, "creation_date": 1593292979, "answer_id": 62615700, "question_id": 55269982, "link": "https://stackoverflow.com/questions/55269982/test-if-name-main-with-click-and-pytest/62615700#62615700", "title": "Test if __name__ == &quot;__main__&quot;: with click and pytest", "body": "<p>This is what the standard library module <code>runpy</code> is for. See: <a href=\"https://docs.python.org/3/library/runpy.html#runpy.run_module\" rel=\"nofollow noreferrer\">https://docs.python.org/3/library/runpy.html#runpy.run_module</a></p>\n"}], "owner": {"reputation": 156, "user_id": 7938152, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1wcjiGwSFuc/AAAAAAAAAAI/AAAAAAAAH7Y/5AzDJ9WQ44s/photo.jpg?sz=128", "display_name": "Nicolas Berthier", "link": "https://stackoverflow.com/users/7938152/nicolas-berthier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3917, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1593292979, "creation_date": 1553115086, "question_id": 55269982, "link": "https://stackoverflow.com/questions/55269982/test-if-name-main-with-click-and-pytest", "title": "Test if __name__ == &quot;__main__&quot;: with click and pytest", "body": "<p>I have the following code in <code>test.py</code>:</p>\n\n<pre><code>import click\n\n@click.command()\n@click.option('--text', default='hello world', help='Text to display.')\ndef say(text):\n\n    print(text)\n\n\nif __name__ == \"__main__\":\n\n    say()\n</code></pre>\n\n<p>If I call this in the command line, it works:</p>\n\n<pre><code>python test.py --text=hi!\n&gt;&gt;hi!\n</code></pre>\n\n<p>If I want to test my code, I would use:</p>\n\n<pre><code>from click.testing import CliRunner\n\n\nrunner = CliRunner()\nresult = runner.invoke(test.say, ['--text=blablabla'])\n\nassert result.output == 'blablabla\n</code></pre>\n\n<p>This works too.</p>\n\n<p>However, if I run my test through coverage.py, I see that the code under <code>if __name__ == \"__main__\":</code> is not tested. Is there a way to achieve that?</p>\n"}, {"tags": ["python", "django", "django-rest-framework"], "answers": [{"tags": [], "owner": {"reputation": 1228, "user_id": 5594008, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/05617707e2d7092fc6e202cdcf38c629?s=128&d=identicon&r=PG&f=1", "display_name": "Headmaster", "link": "https://stackoverflow.com/users/5594008/headmaster"}, "is_accepted": false, "score": 1, "last_activity_date": 1553153345, "creation_date": 1553153345, "answer_id": 55275553, "question_id": 55269957, "link": "https://stackoverflow.com/questions/55269957/return-data-format-like-default-drf/55275553#55275553", "title": "Return data format like default DRF", "body": "<p>You can serialize you Model (<code>MyModel</code>), where you can specify how the object in the response will look like.</p>\n\n<p>Check the <a href=\"https://www.django-rest-framework.org/api-guide/serializers/\" rel=\"nofollow noreferrer\">docs</a></p>\n"}, {"tags": [], "owner": {"reputation": 55, "user_id": 7851361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dd92651d5be87dd8fd5513604118d6c?s=128&d=identicon&r=PG&f=1", "display_name": "phamj88", "link": "https://stackoverflow.com/users/7851361/phamj88"}, "is_accepted": true, "score": 0, "last_activity_date": 1553522900, "creation_date": 1553522900, "answer_id": 55339708, "question_id": 55269957, "link": "https://stackoverflow.com/questions/55269957/return-data-format-like-default-drf/55339708#55339708", "title": "Return data format like default DRF", "body": "<p>serializers.serialize formats the object in this pk,fields format.\nThe issue was I needed to use self.get_serializers to get the proper serializer class </p>\n"}], "owner": {"reputation": 55, "user_id": 7851361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dd92651d5be87dd8fd5513604118d6c?s=128&d=identicon&r=PG&f=1", "display_name": "phamj88", "link": "https://stackoverflow.com/users/7851361/phamj88"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 55339708, "answer_count": 2, "score": 0, "last_activity_date": 1553522900, "creation_date": 1553114989, "question_id": 55269957, "link": "https://stackoverflow.com/questions/55269957/return-data-format-like-default-drf", "title": "Return data format like default DRF", "body": "<p>I have spent too much time trying to figure out how to format a queryset and have drf return it like how its default GET request looks like.</p>\n\n<p>ex. get request looks like, a list of objects:</p>\n\n<pre><code>[{\n        \"id\": 1093,\n        \"manytomanyrelation\": [\n            108793,\n            108792,\n            108791\n        ],\n        \"count\": 3,\n},\n{\n        \"id\": 1092,\n        \"manytomanyrelation\": [\n            108793,\n        ],\n        \"count\": 5,\n}]\n</code></pre>\n\n<p>My post request which needs to return a list of objects just like above:\ncode:</p>\n\n<pre><code>@list_route(methods=['post'])\ndef mymethod(self, request, *args, **kwargs):\n    data = MyModel.objects.filter(**params)\n    response = serializers.serialize('json', list(data))\n    return HttpResponse(response, content_type='application/json')\n</code></pre>\n\n<p>But this returns objects with pk, model, fields format:</p>\n\n<pre><code>[{\n    fields:{\n            \"manytomanyrelation\": [\n                108793,\n                108792,\n                108791\n            ],\n            \"count\": 3,\n    }\n    model: \"app.mymodel\"\n    pk: 1093\n},\n{\n    fields:{\n            \"manytomanyrelation\": [\n                108793,\n            ],\n            \"count\": 5,\n    }\n    model: \"app.mymodel\"\n    pk: 1092\n}]\n</code></pre>\n\n<p>I stripped some fields and names so sorry if there something inconsistent in the data.</p>\n\n<p>Is there any way to format the response object to look like the drf default GET?</p>\n"}, {"tags": ["python", "python-3.x", "opencv", "ffmpeg"], "comments": [{"owner": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "edited": false, "score": 1, "creation_date": 1553117418, "post_id": 55269943, "comment_id": 97272144, "body": "I would suggest rewording your question---all zeros is not an empty frame, but a completely black frame. An &quot;empty&quot; frame would be more akin to getting <code>None</code> for your <code>frame</code>, instead of a black image. Are you getting this for every frame? How are you opening the video capture device? You&#39;ve left that part of your code out."}, {"owner": {"reputation": 328, "user_id": 8414454, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-rEJ6wpSY5_k/AAAAAAAAAAI/AAAAAAAAAIw/paPqUdlmWAA/photo.jpg?sz=128", "display_name": "Ikechukwu Anude", "link": "https://stackoverflow.com/users/8414454/ikechukwu-anude"}, "reply_to_user": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "edited": false, "score": 0, "creation_date": 1553141208, "post_id": 55269943, "comment_id": 97278074, "body": "@AlexanderReynolds That first part is correct and I will reword it. But this is the extent of the code that I wrote for this project. I do not know much about what is going on in the backend."}, {"owner": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "edited": false, "score": 0, "creation_date": 1553192383, "post_id": 55269943, "comment_id": 97303507, "body": "Sorry, your code section scrolls for like 3 lines and I didn&#39;t realize it scrolled, thought you left the top bit out. Are you sure that <code>0</code> corresponds to your webcam? If you have multiple cameras connected to your computer, it might be <code>1</code> or <code>2</code>...etc. Otherwise, be sure that you can grab webcam feed on your computer outside of OpenCV and that it looks correct. If everything is fine but OpenCV just has black images, I would look into re-installing OpenCV, building from source if possible."}, {"owner": {"reputation": 328, "user_id": 8414454, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-rEJ6wpSY5_k/AAAAAAAAAAI/AAAAAAAAAIw/paPqUdlmWAA/photo.jpg?sz=128", "display_name": "Ikechukwu Anude", "link": "https://stackoverflow.com/users/8414454/ikechukwu-anude"}, "reply_to_user": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "edited": false, "score": 0, "creation_date": 1553315902, "post_id": 55269943, "comment_id": 97348788, "body": "@AlexanderReynolds I think it does because when I run my code, it opens up the front facing in built camera."}], "answers": [{"comments": [{"owner": {"reputation": 328, "user_id": 8414454, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-rEJ6wpSY5_k/AAAAAAAAAAI/AAAAAAAAAIw/paPqUdlmWAA/photo.jpg?sz=128", "display_name": "Ikechukwu Anude", "link": "https://stackoverflow.com/users/8414454/ikechukwu-anude"}, "edited": false, "score": 0, "creation_date": 1553141623, "post_id": 55270049, "comment_id": 97278165, "body": "It seems like the image cannot be read. I am not sure why this is."}, {"owner": {"reputation": 427, "user_id": 8843390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2b78ac6a5f9b01957bd550fceeec515?s=128&d=identicon&r=PG&f=1", "display_name": "Alakazam", "link": "https://stackoverflow.com/users/8843390/alakazam"}, "reply_to_user": {"reputation": 328, "user_id": 8414454, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-rEJ6wpSY5_k/AAAAAAAAAAI/AAAAAAAAAIw/paPqUdlmWAA/photo.jpg?sz=128", "display_name": "Ikechukwu Anude", "link": "https://stackoverflow.com/users/8414454/ikechukwu-anude"}, "edited": false, "score": 0, "creation_date": 1553156069, "post_id": 55270049, "comment_id": 97282368, "body": "Do you get only empty frames ?"}, {"owner": {"reputation": 328, "user_id": 8414454, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-rEJ6wpSY5_k/AAAAAAAAAAI/AAAAAAAAAIw/paPqUdlmWAA/photo.jpg?sz=128", "display_name": "Ikechukwu Anude", "link": "https://stackoverflow.com/users/8414454/ikechukwu-anude"}, "edited": false, "score": 0, "creation_date": 1553173968, "post_id": 55270049, "comment_id": 97292217, "body": "Yes I only get those empty frames.@Alakazam"}], "tags": [], "owner": {"reputation": 427, "user_id": 8843390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2b78ac6a5f9b01957bd550fceeec515?s=128&d=identicon&r=PG&f=1", "display_name": "Alakazam", "link": "https://stackoverflow.com/users/8843390/alakazam"}, "is_accepted": false, "score": 2, "last_activity_date": 1553115400, "creation_date": 1553115400, "answer_id": 55270049, "question_id": 55269943, "link": "https://stackoverflow.com/questions/55269943/opencv-returns-an-array-of-all-zeros-on-video-read/55270049#55270049", "title": "OpenCV returns an Array of All Zeros on video.read", "body": "<p>Sometimes the image cannot be read, so cv2 return an empty matrix, you need to make sure that the frame isn't empty.<br></p>\n\n<pre><code>...\nwhile True:\n    a += 1\n    check, frame = video.read()\n    if not check or frame.empty():\n        continue\n    ...\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 328, "user_id": 8414454, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-rEJ6wpSY5_k/AAAAAAAAAAI/AAAAAAAAAIw/paPqUdlmWAA/photo.jpg?sz=128", "display_name": "Ikechukwu Anude", "link": "https://stackoverflow.com/users/8414454/ikechukwu-anude"}, "edited": false, "score": 0, "creation_date": 1553549173, "post_id": 55306522, "comment_id": 97418042, "body": "I am able to connect to the camera, it just seems to not be reading the frames"}], "tags": [], "owner": {"reputation": 25800, "user_id": 11162165, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t5kgh.png?s=128&g=1", "display_name": "nathancy", "link": "https://stackoverflow.com/users/11162165/nathancy"}, "is_accepted": false, "score": 1, "last_activity_date": 1553282545, "creation_date": 1553282545, "answer_id": 55306522, "question_id": 55269943, "link": "https://stackoverflow.com/questions/55269943/opencv-returns-an-array-of-all-zeros-on-video-read/55306522#55306522", "title": "OpenCV returns an Array of All Zeros on video.read", "body": "<p>Ensure that you are able to connect to the camera</p>\n\n<pre><code>...\nwhile True:\n    a = a + 1\n    if video.isOpened():\n        check, frame = video.read()\n        print(frame)\n    ...\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 791, "user_id": 5233367, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/60dc3184f9d77e7d07bfa556739d55fc?s=128&d=identicon&r=PG&f=1", "display_name": "Brydenr", "link": "https://stackoverflow.com/users/5233367/brydenr"}, "edited": false, "score": 1, "creation_date": 1576606529, "post_id": 59379935, "comment_id": 104951887, "body": "Can you add some explanation to your answer?"}, {"owner": {"reputation": 21, "user_id": 12448891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e176021722036dbac1fbd2d0b41c95f6?s=128&d=identicon&r=PG&f=1", "display_name": "EduL", "link": "https://stackoverflow.com/users/12448891/edul"}, "reply_to_user": {"reputation": 791, "user_id": 5233367, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/60dc3184f9d77e7d07bfa556739d55fc?s=128&d=identicon&r=PG&f=1", "display_name": "Brydenr", "link": "https://stackoverflow.com/users/5233367/brydenr"}, "edited": false, "score": 0, "creation_date": 1576627545, "post_id": 59379935, "comment_id": 104959379, "body": "According to the documentation cv2.CAP_DSHOW refers to Direct Show which is a multimedia framework and API to perform various operations with media files or streams."}], "tags": [], "owner": {"reputation": 21, "user_id": 12448891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e176021722036dbac1fbd2d0b41c95f6?s=128&d=identicon&r=PG&f=1", "display_name": "EduL", "link": "https://stackoverflow.com/users/12448891/edul"}, "is_accepted": false, "score": 2, "last_activity_date": 1576684987, "last_edit_date": 1576684987, "creation_date": 1576606484, "answer_id": 59379935, "question_id": 55269943, "link": "https://stackoverflow.com/questions/55269943/opencv-returns-an-array-of-all-zeros-on-video-read/59379935#59379935", "title": "OpenCV returns an Array of All Zeros on video.read", "body": "<p>It seems that this happens if you are using Windows <br>\nI came up with the solution after having this warning <br></p>\n\n<pre><code>[ WARN:0] global C:\\projects\\opencv-python\\opencv\\modules\\videoio\\src\\cap_msmf.cpp (674) SourceReaderCB::~SourceReaderCB terminating async callback\n</code></pre>\n\n<p>I found the answer <a href=\"https://stackoverflow.com/questions/53888878/cv2-warn0-terminating-async-callback-when-attempting-to-take-a-picture\">here</a></p>\n\n<pre><code>video = cv.VideoCapture(0, cv2.CAP_DSHOW)\n</code></pre>\n\n<p>According to the documentation cv2.CAP_DSHOW refers to Direct Show which is a multimedia framework and API to perform various operations with media files or streams.</p>\n\n<p>There's an example in the <a href=\"https://docs.opencv.org/3.4/d0/da7/videoio_overview.html\" rel=\"nofollow noreferrer\">documentation</a></p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 12742474, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/f3e7af588507da6d7f95d1bbbe17bf47?s=128&d=identicon&r=PG", "display_name": "Mayur", "link": "https://stackoverflow.com/users/12742474/mayur"}, "is_accepted": false, "score": 0, "last_activity_date": 1579444077, "creation_date": 1579444077, "answer_id": 59810975, "question_id": 55269943, "link": "https://stackoverflow.com/questions/55269943/opencv-returns-an-array-of-all-zeros-on-video-read/59810975#59810975", "title": "OpenCV returns an Array of All Zeros on video.read", "body": "<p>I think this due to the Antivirus. Try disabling it.</p>\n"}], "owner": {"reputation": 328, "user_id": 8414454, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-rEJ6wpSY5_k/AAAAAAAAAAI/AAAAAAAAAIw/paPqUdlmWAA/photo.jpg?sz=128", "display_name": "Ikechukwu Anude", "link": "https://stackoverflow.com/users/8414454/ikechukwu-anude"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1310, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1579444077, "creation_date": 1553114939, "last_edit_date": 1553163890, "question_id": 55269943, "link": "https://stackoverflow.com/questions/55269943/opencv-returns-an-array-of-all-zeros-on-video-read", "title": "OpenCV returns an Array of All Zeros on video.read", "body": "<p>Below is the relevant code</p>\n\n<pre><code>import cv2 as cv\nimport numpy as np\n\nvideo = cv.VideoCapture(0) #tells obj to use built in camera\\\n\n#create a face cascade object \nface_cascade  = \ncv.CascadeClassifier(r\"C:\\Users\\xxxxxxx\\AppData\\Roaming\\Python\\Python36\\site- \npackages\\cv2\\data\\haarcascade_frontalcatface.xml\")\n\na = 1\n#create loop to display a video\nwhile True:\n    a = a + 1\n    check, frame = video.read()\n    print(frame)\n\n    #converts to a gray scale img\n    gray = cv.cvtColor(frame, cv.COLOR_BGR2GRAY)\n\n    #create the faces\n    faces = face_cascade.detectMultiScale(gray, scaleFactor=1.5, minNeighbors=5)\n\n    for(x, y, w, h) in faces:\n        print(x, y, w, h)\n\n    #show the image\n    cv.imshow('capturing', gray)\n\n    key = cv.waitKey(1) #gen a new frame every 1ms\n\n    if key == ord('q'): #once you enter 'q' the loop will be exited\n        break\n\nprint(a) #this will print the number of frames\n\n#captures the first frame\nvideo.release() #end the web cam\n\n#destroys the windows when you are not defined\ncv.destroyAllWindows()\n</code></pre>\n\n<p>The code displays a video captured from my webcam camera. Despite that, OpevCV doesn't seem to be processing any frames as all the frames look like this</p>\n\n<pre><code> [[0 0 0]\n  [0 0 0]\n  [0 0 0]\n  ...\n  [0 0 0]\n  [0 0 0]\n  [0 0 0]]]\n</code></pre>\n\n<p>which I assume means that they are empty. </p>\n\n<p>This I believe is preventing the algorithm from being able to detect my face in the frame. I have a feeling that the issue lies in the ffmpeg codec, but I'm not entirely sure how to proceed even if that is the case.</p>\n\n<p>OS: Windows 10\nLanguage: Python</p>\n\n<p>EDIT: The Frame is not empty but all the values in the array seem to be '0'</p>\n\n<p>Why is the frame empty and how can I get OpenCV to detect my face in the frame?</p>\n"}, {"tags": ["python", "python-3.x", "python-2.7"], "comments": [{"owner": {"reputation": 450, "user_id": 10813463, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--RByWNItLv0/AAAAAAAAAAI/AAAAAAAAAGg/n1O8RqzoTQU/photo.jpg?sz=128", "display_name": "Nick Vitha", "link": "https://stackoverflow.com/users/10813463/nick-vitha"}, "edited": false, "score": 0, "creation_date": 1553115139, "post_id": 55269926, "comment_id": 97271098, "body": "You might want to look into using something like Ansible instead if this isn&#39;t the only thing you&#39;re gonna do on all these machines: <a href=\"https://docs.ansible.com/ansible/latest/index.html\" rel=\"nofollow noreferrer\">docs.ansible.com/ansible/latest/index.html</a>"}, {"owner": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 0, "creation_date": 1553117944, "post_id": 55269926, "comment_id": 97272368, "body": "Stackoverflow is not a place to request code - you should help yourself by first <i>trying</i> to write some code to solve your problem: you will learn far more by trying - and you never know, you might succeed - than if someone in need of reputation points gifts you some code."}, {"owner": {"reputation": 418, "user_id": 6246834, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f57de0f12e63d48466fc6610efa6c2cf?s=128&d=identicon&r=PG", "display_name": "dwagon", "link": "https://stackoverflow.com/users/6246834/dwagon"}, "edited": false, "score": 0, "creation_date": 1553129055, "post_id": 55269926, "comment_id": 97275519, "body": "Have a look at <a href=\"http://www.fabfile.org/\" rel=\"nofollow noreferrer\">fabfile.org</a> - it allows you to python script up connections to remote servers via ssh and to do all sorts of stuff."}], "owner": {"reputation": 257, "user_id": 5530643, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/M5lpf.png?s=128&g=1", "display_name": "Lasagna Cat", "link": "https://stackoverflow.com/users/5530643/lasagna-cat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 18, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1553114884, "creation_date": 1553114884, "question_id": 55269926, "link": "https://stackoverflow.com/questions/55269926/python-script-that-automates-ssh-ing-into-server-telnets-into-printer-via-port", "title": "Python script that automates SSH-ing into server, telnets into printer via port 9100, runs two commands and rinses and repeats?", "body": "<p>My goal is to remote into an array of networked devices and change a timeout setting to \"10\". I believe this can be automated via Python.</p>\n\n<p>Can someone help me get started with a python script that does the following workflow:</p>\n\n<ol>\n<li>SSH into server that is local to the networked devices in question.</li>\n<li>Telnet into networked devices on 9100 port <code>telnet &lt;ip address&gt; 9100</code>.</li>\n<li>Run command <code>getvar timeout value</code></li>\n<li>Expect output value of <code>\"10\"</code>.</li>\n<li>If expected output value isn't <code>\"10\"</code>, run command <code>setvar timeout value 10</code></li>\n<li>Run command <code>getvar timeout value</code> again.</li>\n<li>If expected output value continues to not be <code>\"10\"</code>, rinse and repeat steps 5-7.</li>\n<li>If expected output value is <code>\"10\"</code>, log out of networked device.</li>\n<li>Move onto next IP address of next networked device in array and repeat steps 1-9.</li>\n</ol>\n"}]