[{"tags": ["python", "syntax-error", "kivy", "kivy-language"], "comments": [{"owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 3, "creation_date": 1470269297, "post_id": 38755439, "comment_id": 64884719, "body": "Yes, that&#39;s invalid syntax. You can&#39;t have a colon inside a tuple. Did you perhaps mean to define a dictionary? Those use <code>{</code> and <code>}</code>."}, {"owner": {"reputation": 49, "user_id": 6249012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c80a8fc8f2d82f141420f5d0170a77c5?s=128&d=identicon&r=PG&f=1", "display_name": "Bill", "link": "https://stackoverflow.com/users/6249012/bill"}, "reply_to_user": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 0, "creation_date": 1470338362, "post_id": 38755439, "comment_id": 64922813, "body": "That worked, thanks"}], "answers": [{"comments": [{"owner": {"reputation": 2354, "user_id": 2730024, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f388ccdbbf7e31ac1b5399d99feed97e?s=128&d=identicon&r=PG&f=1", "display_name": "mba12", "link": "https://stackoverflow.com/users/2730024/mba12"}, "edited": false, "score": 0, "creation_date": 1539293262, "post_id": 52768889, "comment_id": 92461043, "body": "Can I suggest you format the code you are trying to share to make it more readable?"}, {"owner": {"reputation": 13, "user_id": 10492028, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MsSl0f41IGk/AAAAAAAAAAI/AAAAAAAAAPM/bT6hslz7Dkk/photo.jpg?sz=128", "display_name": "Arthur Gonnet", "link": "https://stackoverflow.com/users/10492028/arthur-gonnet"}, "reply_to_user": {"reputation": 2354, "user_id": 2730024, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f388ccdbbf7e31ac1b5399d99feed97e?s=128&d=identicon&r=PG&f=1", "display_name": "mba12", "link": "https://stackoverflow.com/users/2730024/mba12"}, "edited": false, "score": 0, "creation_date": 1539357640, "post_id": 52768889, "comment_id": 92486488, "body": "Thanks, I&#39;m on smartphone and I can&#39;t make code area."}], "tags": [], "owner": {"reputation": 13, "user_id": 10492028, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MsSl0f41IGk/AAAAAAAAAAI/AAAAAAAAAPM/bT6hslz7Dkk/photo.jpg?sz=128", "display_name": "Arthur Gonnet", "link": "https://stackoverflow.com/users/10492028/arthur-gonnet"}, "is_accepted": false, "score": 0, "last_activity_date": 1539357841, "last_edit_date": 1539357841, "creation_date": 1539291824, "answer_id": 52768889, "question_id": 38755439, "link": "https://stackoverflow.com/questions/38755439/kivy-syntaxerror-invalid-syntax/52768889#52768889", "title": "(Kivy) SyntaxError: invalid syntax", "body": "<p>First, I think, but I'm not sure, you need to make a class in Python for the <code>floatlayout</code> and the <code>button</code>:</p>\n\n<pre><code>class FloatLayout(FloatLayout):\n    pass\n</code></pre>\n\n<p>And don't forget if you do it, to import FloatLayout. And for the error, it is <code>pos_hint: {'x' : 0, 'top' : 1}</code> and same for the other, and not <code>pos_hint: ('x'...)</code></p>\n"}], "owner": {"reputation": 49, "user_id": 6249012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c80a8fc8f2d82f141420f5d0170a77c5?s=128&d=identicon&r=PG&f=1", "display_name": "Bill", "link": "https://stackoverflow.com/users/6249012/bill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 948, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1539357841, "creation_date": 1470268501, "question_id": 38755439, "link": "https://stackoverflow.com/questions/38755439/kivy-syntaxerror-invalid-syntax", "title": "(Kivy) SyntaxError: invalid syntax", "body": "<p>I'm watching a tutorial, by Sentdex, on Kivy. An error appeared when i ran the code. It won't let me make a map and says the colon is invalid syntax.</p>\n\n<pre><code>from kivy.app import App\n#kivy.require(\"1.9.1\")\nfrom kivy.uix.floatlayout import FloatLayout\n\n\nclass SimpleKivy(App):\n    def build(self):\n        return  FloatLayout()\n\nif __name__ == \"__main__\":\n    SimpleKivy().run()\n</code></pre>\n\n<p>and</p>\n\n<pre><code># file name: tutorialApp\n# Kivy 1.9.1\n\n&lt;Button&gt;:\n    font_size: 40\n    color: 0,1,0,1\n    size_hint: 0.3, 0.2\n\n\n&lt;FloatLayout&gt;:\n    Button:\n        text: \"Kivy\"\n        pos_hint: ('x' : 0, 'top' : 1)\n\n\n    Button:\n        text: \"Tutorials\"\n        pos_hint: (\"right\" : 1, 'top' : 1)\n</code></pre>\n\n<p>the error showed</p>\n\n<pre><code>   File \"&lt;string&gt;\", line 1\n ('x' : 0, 'top' : 1)\n      ^\n SyntaxError: invalid syntax\n</code></pre>\n"}, {"tags": ["python", "list", "indexoutofboundsexception", "iterable"], "answers": [{"tags": [], "owner": {"reputation": 801, "user_id": 4645599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4de546dd50ee3d94a9aa98230c8275cc?s=128&d=identicon&r=PG", "display_name": "Jose Raul Barreras", "link": "https://stackoverflow.com/users/4645599/jose-raul-barreras"}, "is_accepted": false, "score": 1, "last_activity_date": 1470269511, "last_edit_date": 1470269511, "creation_date": 1470269055, "answer_id": 38755525, "question_id": 38755425, "link": "https://stackoverflow.com/questions/38755425/python-indexerror-when-scanning-files/38755525#38755525", "title": "Python IndexError when Scanning Files", "body": "<p>You are trying to access an invalid position.</p>\n\n<pre><code>for t in range(len(paths)):\n    print(paths)\n    print(t)\n    list = self.scanFolder(paths[t])\n</code></pre>\n\n<p>The valid list indexes are 0..len(path)-1</p>\n\n<p>You should access the list elements in a more pythonic form:</p>\n\n<pre><code>for path in paths:\n    list = self.scanFolder(path)\n</code></pre>\n\n<p>If you need change some list element, you should use <a href=\"https://docs.python.org/3/library/functions.html\" rel=\"nofollow\">enumerate()</a>:</p>\n\n<pre><code>for pos, path in enumerate(paths):\n    print (\"paths[%s] = %s\" %(pos, path))\n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 4932815, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/d0a56336ef9dbe88d7d97f8ea0ae5f2a?s=128&d=identicon&r=PG&f=1", "display_name": "silentcallz", "link": "https://stackoverflow.com/users/4932815/silentcallz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1470275226, "creation_date": 1470268402, "last_edit_date": 1470275226, "question_id": 38755425, "link": "https://stackoverflow.com/questions/38755425/python-indexerror-when-scanning-files", "title": "Python IndexError when Scanning Files", "body": "<p>I'm trying to scan/search files and it throws:</p>\n\n<blockquote>\n  <p>IndexError: list index out of range on the line \"list = self.scanFolder(path[t])\"</p>\n</blockquote>\n\n<p>This is an Object and has some methods/functions that aren't shown here since they are not relevant to this code. </p>\n\n<pre><code>def scanFolder(self, path):\n    try:\n        return os.listdir(path)\n    except WindowsError:\n        return \"%access-denied%\"\n\ndef separate(self, files):\n    #Give Param of Files with exact path\n    file = []\n    dir = []\n    for x in range(len(files)):\n\n        if os.path.isfile(files[x]):\n\n            file.append(files[x])\n\n    for x in range(len(files)):\n        if os.path.isdir(files[x]):\n            dir.append(files[x])\n    return file, dir\n\n   def startScan(self):\n    driveLetters = self.getDrives()\n    matches = []\n    paths = []\n    paths2 = []\n    path = \"C:/\"\n    list = self.scanFolder(path)\n\n    if list != \"%access-denied%\":\n        for i in range(len(list)):\n            list[i] = os.path.join(path, list[i])\n\n        files, dirs = self.separate(list)\n        paths2.extend(dirs)\n        for i in range(len(files)):\n            if files[i].lower() in self.keyword.lower():\n                matches.append(files[i])\n\n        paths = []\n        paths = paths2\n        paths2 = []\n    while paths != []:\n        for t in range(len(paths)):\n\n            print(paths)\n            print(t)\n            list = self.scanFolder(paths[t])\n            if list != \"%access-denied%\":\n                for i in range(len(list)):\n                    list[i] = os.path.join(paths[t], list[i])\n\n                files, dirs = self.separate(list)\n                if dirs != []:\n                    paths2.extend(dirs)\n                for i in range(len(files)):\n                    if files[i].lower() in self.keyword.lower():\n                        matches.append(files[t])\n\n                paths = paths2\n                paths2 = []\n\n    return matches\n</code></pre>\n"}, {"tags": ["python", "replace", "strip"], "comments": [{"owner": {"reputation": 10312, "user_id": 1681480, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/0wsSK.jpg?s=128&g=1", "display_name": "beroe", "link": "https://stackoverflow.com/users/1681480/beroe"}, "edited": false, "score": 0, "creation_date": 1470268761, "post_id": 38755412, "comment_id": 64884604, "body": "Just an aside, lists can span multiple lines, so <code>[&#39;a&#39;,</code> can end several lines later with <code>&#39;just&#39;]</code>  without all the <code>+=</code>"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 6674578, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mSoIa0RdCSk/AAAAAAAAAAI/AAAAAAAAADg/B8Y_6P5B4L0/photo.jpg?sz=128", "display_name": "Shane Fraley", "link": "https://stackoverflow.com/users/6674578/shane-fraley"}, "edited": false, "score": 0, "creation_date": 1470324104, "post_id": 38755502, "comment_id": 64914207, "body": "Thank You for your help. @beroe but Im still having the issue of having iphone and iphone&#39;s in my list. I have cleaned up my code like you suggested and fixed some of the words."}, {"owner": {"reputation": 10312, "user_id": 1681480, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/0wsSK.jpg?s=128&g=1", "display_name": "beroe", "link": "https://stackoverflow.com/users/1681480/beroe"}, "reply_to_user": {"reputation": 11, "user_id": 6674578, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mSoIa0RdCSk/AAAAAAAAAAI/AAAAAAAAADg/B8Y_6P5B4L0/photo.jpg?sz=128", "display_name": "Shane Fraley", "link": "https://stackoverflow.com/users/6674578/shane-fraley"}, "edited": false, "score": 0, "creation_date": 1470326065, "post_id": 38755502, "comment_id": 64915589, "body": "The apostrophe in your list is a &quot;curly quote&quot;. You will need to replace that too, which may require Unicode strings."}, {"owner": {"reputation": 10312, "user_id": 1681480, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/0wsSK.jpg?s=128&g=1", "display_name": "beroe", "link": "https://stackoverflow.com/users/1681480/beroe"}, "reply_to_user": {"reputation": 11, "user_id": 6674578, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mSoIa0RdCSk/AAAAAAAAAAI/AAAAAAAAADg/B8Y_6P5B4L0/photo.jpg?sz=128", "display_name": "Shane Fraley", "link": "https://stackoverflow.com/users/6674578/shane-fraley"}, "edited": false, "score": 0, "creation_date": 1470338694, "post_id": 38755502, "comment_id": 64923012, "body": "I think I edited my answer to replace the apostrophe but doing it on iPhone so can&#39;t tell for sure."}], "tags": [], "owner": {"reputation": 10312, "user_id": 1681480, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/0wsSK.jpg?s=128&g=1", "display_name": "beroe", "link": "https://stackoverflow.com/users/1681480/beroe"}, "is_accepted": false, "score": 0, "last_activity_date": 1470338629, "last_edit_date": 1470338629, "creation_date": 1470268904, "answer_id": 38755502, "question_id": 38755412, "link": "https://stackoverflow.com/questions/38755412/stripping-punctuation-from-text-file-including-s-and-commas/38755502#38755502", "title": "Stripping punctuation from text file including &#39;s and commas", "body": "<p>You need to say <code>for i in words:</code> not <code>for i in d:</code> \nYou are iterating through an empty dictionary during the replacement steps, so nothing is changing. Just remove that loop and move the replacement steps to the top of the <code>for w in words:</code> loop, so you only have to make one pass through.</p>\n\n<p>I would redo that whole section thusly:</p>\n\n<pre><code>for w in words:\n    w = w.replace('.','').replace(',','').replace('\\'','').replace(\"\u2019\",\"\")\n    d[w] = d.get(w,0) + 1\n</code></pre>\n\n<p>As it is now, you are also trying to split <code>i</code> before appending to the dictionary. It has already been split. Also, you need a key:value for the dictionary. Just give it a value of zero at that point?, so later you can count occurrences w/o testing?</p>\n\n<p>Instead of testing <code>if w in d:</code> it will be hundreds (even thousands of times faster) to use <code>.get()</code> with a default value of zero (returned if <code>w</code> is not found), as shown above.</p>\n"}], "owner": {"reputation": 11, "user_id": 6674578, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mSoIa0RdCSk/AAAAAAAAAAI/AAAAAAAAADg/B8Y_6P5B4L0/photo.jpg?sz=128", "display_name": "Shane Fraley", "link": "https://stackoverflow.com/users/6674578/shane-fraley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 929, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1470338629, "creation_date": 1470268335, "last_edit_date": 1470268657, "question_id": 38755412, "link": "https://stackoverflow.com/questions/38755412/stripping-punctuation-from-text-file-including-s-and-commas", "title": "Stripping punctuation from text file including &#39;s and commas", "body": "<p>I am creating a list of most frequent words in a text file. But I keep getting words and their possessive versions. Like iphone and iphone's. I also need to strip the commas after words like iphone and iphone, in my results. I want to count those words together as one entity. \nHere is my entire code.</p>\n\n<pre><code># Prompuser for text file to analyze\nfilename = input(\"Enter a valid text file to analyze: \")\n\n# Open file and read it line by line\ns = open(filename, 'r').read().lower()\n\n# List of stop words that are not inportant to the meaning of the content\n# These words will not be counted in the number of characters, or words.\nstopwords = ['a', 'about', 'above', 'across', 'after', 'afterwards']\nstopwords += ['again', 'against', 'all', 'almost', 'alone', 'along']\nstopwords += ['already', 'also', 'although', 'always', 'am', 'among']\nstopwords += ['amongst', 'amoungst', 'amount', 'an', 'and', 'another']\nstopwords += ['any', 'anyhow', 'anyone', 'anything', 'anyway', 'anywhere']\nstopwords += ['are', 'around', 'as', 'at', 'back', 'be', 'became']\nstopwords += ['because', 'become', 'becomes', 'becoming', 'been']\nstopwords += ['before', 'beforehand', 'behind', 'being', 'below']\nstopwords += ['beside', 'besides', 'between', 'beyond', 'bill', 'both']\nstopwords += ['bottom', 'but', 'by', 'call', 'can', 'cannot', 'cant']\nstopwords += ['co', 'computer', 'con', 'could', 'couldnt', 'cry', 'de']\nstopwords += ['describe', 'detail', 'did', 'do', 'done', 'down', 'due']\nstopwords += ['during', 'each', 'eg', 'eight', 'either', 'eleven', 'else']\nstopwords += ['elsewhere', 'empty', 'enough', 'etc', 'even', 'ever']\nstopwords += ['every', 'everyone', 'everything', 'everywhere', 'except']\nstopwords += ['few', 'fifteen', 'fifty', 'fill', 'find', 'fire']\nstopwords += ['five', 'for', 'former', 'formerly', 'forty', 'found']\nstopwords += ['four', 'from', 'front', 'full', 'further', 'get', 'give']\nstopwords += ['go', 'had', 'has', 'hasnt', 'have', 'he', 'hence', 'her']\nstopwords += ['here', 'hereafter', 'hereby', 'herein', 'hereupon', 'hers']\nstopwords += ['herself', 'him', 'himself', 'his', 'how', 'however']\nstopwords += ['hundred', 'i', 'ie', 'if', 'in', 'inc', 'indeed']\nstopwords += ['interest', 'into', 'is', 'it', 'its', 'itself', 'keep']\nstopwords += ['last', 'latter', 'latterly', 'least', 'less', 'ltd', 'made']\nstopwords += ['many', 'may', 'me', 'meanwhile', 'might', 'mill', 'mine']\nstopwords += ['more', 'moreover', 'most', 'mostly', 'move', 'much']\nstopwords += ['must', 'my', 'myself', 'name', 'namely', 'neither', 'never']\nstopwords += ['nevertheless', 'next', 'nine', 'no', 'nobody', 'none']\nstopwords += ['noone', 'nor', 'not', 'nothing', 'now', 'nowhere', 'of']\nstopwords += ['off', 'often', 'on','once', 'one', 'only', 'onto', 'or']\nstopwords += ['other', 'others', 'otherwise', 'our', 'ours', 'ourselves']\nstopwords += ['out', 'over', 'own', 'part', 'per', 'perhaps', 'please']\nstopwords += ['put', 'rather', 're', 's', 'same', 'see', 'seem', 'seemed']\nstopwords += ['seeming', 'seems', 'serious', 'several', 'she', 'should']\nstopwords += ['show', 'side', 'since', 'sincere', 'six', 'sixty', 'so']\nstopwords += ['some', 'somehow', 'someone', 'something', 'sometime']\nstopwords += ['sometimes', 'somewhere', 'still', 'such', 'take']\nstopwords += ['ten', 'than', 'that', 'the', 'their', 'them', 'themselves']\nstopwords += ['then', 'thence', 'there', 'thereafter', 'thereby']\nstopwords += ['therefore', 'therein', 'thereupon', 'these', 'they']\nstopwords += ['thick', 'thin', 'third', 'this', 'those', 'though', 'three']\nstopwords += ['three', 'through', 'throughout', 'thru', 'thus', 'to']\nstopwords += ['together', 'too', 'top', 'toward', 'towards', 'twelve']\nstopwords += ['twenty', 'two', 'un', 'under', 'until', 'up', 'upon']\nstopwords += ['us', 'very', 'via', 'was', 'we', 'well', 'were', 'what']\nstopwords += ['whatever', 'when', 'whence', 'whenever', 'where']\nstopwords += ['whereafter', 'whereas', 'whereby', 'wherein', 'whereupon']\nstopwords += ['wherever', 'whether', 'which', 'while', 'whither', 'who']\nstopwords += ['whoever', 'whole', 'whom', 'whose', 'why', 'will', 'with']\nstopwords += ['within', 'without', 'would', 'yet', 'you', 'your']\nstopwords += ['yours', 'yourself', 'the', '\u2014', 'The', '9', '5', 'just']\n# count characters \nnum_chars = len(s)\n\n# count lines \nnum_lines = s.count('\\n')\n\n# Split the words in the file\nwords = s.split()\n\n# Create empty dictionary\nd = {}\n\nfor i in d:\n    i = i.replace('.','')\n    i = i.replace(',','')\n    i = i.replace('\\'','')\n    d.append(i.split())\n\n# Add words to dictionary if they are not in it already.\n\nfor w in words:\n    if w in d:\n\n#increase the count of each word added to the dictionary by 1 each time it appears\n       d[w] += 1\n    else:\n       d[w] = 1\n\n# Find the sum of each word's count in the dictionary. Drop the stopwords.\nnum_words = sum(d[w] for w in d if w not in stopwords)\n\n# Create a list of words and their counts from file\n# in the form number of occurrence   word count   word\nlst = [(d[w], w) for w in d if w not in stopwords]\n\n# Sort the list of words by the count of the word\nlst.sort()\n\n# Sort the word list from greatest to least\nlst.reverse()\n\n# Print number of characters, number of lines rea, then number of words\n# that were counted minus the stop words.\nprint('Your input file has characters = ' + str(num_chars))\nprint('Your input file has num_lines = ' + str(num_lines))\nprint('Your input file has num_words = ' + str(num_words))\n\n# Print the top 30 most frequent words\nprint('\\n The 30 most frequent words are \\n')\n\n# Start list at 1, the most most frequent word\ni = 1\n\n# Create list for the first 30 frequent words\nfor count, word in lst[:30]:\n\n# Create list with the number of occurrence the word count then the word\n    print('%2s.  %4s %s' % (i, count, word))\n# Increase the list number by 1 after each entry\n    i += 1\n</code></pre>\n\n<p>Here are some of my results.</p>\n\n<pre><code> 1.    40 iphone\n\n 2.    15 users\n\n 3.    12 iphone\u2019s\n\n 4.     9 music\n\n 5.     9 apple\n\n 6.     8 web\n\n 7.     7 new\n</code></pre>\n\n<p>Any help would be greatly appreciated. Thank You</p>\n"}, {"tags": ["python", "set"], "comments": [{"owner": {"reputation": 18975, "user_id": 1539655, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/epO1x.jpg?s=128&g=1", "display_name": "levi", "link": "https://stackoverflow.com/users/1539655/levi"}, "edited": false, "score": 1, "creation_date": 1470268320, "post_id": 38755358, "comment_id": 64884489, "body": "they are <code>Keys views</code>  = <code>set-like</code> not a <code>set</code> itself. If you want to perform sets operations, transform your keys view into a set."}, {"owner": {"reputation": 3016, "user_id": 1610910, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/916d4e1be163c456c999966cb8dd8c5d?s=128&d=identicon&r=PG", "display_name": "DurgaDatta", "link": "https://stackoverflow.com/users/1610910/durgadatta"}, "reply_to_user": {"reputation": 18975, "user_id": 1539655, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/epO1x.jpg?s=128&g=1", "display_name": "levi", "link": "https://stackoverflow.com/users/1539655/levi"}, "edited": false, "score": 0, "creation_date": 1470269234, "post_id": 38755358, "comment_id": 64884700, "body": "@levi on what basic are some, and not other, of the set-operations selected?"}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1470270383, "post_id": 38755358, "comment_id": 64885008, "body": "<code>issubsert</code> isn&#39;t <code>issubset</code>."}, {"owner": {"reputation": 3016, "user_id": 1610910, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/916d4e1be163c456c999966cb8dd8c5d?s=128&d=identicon&r=PG", "display_name": "DurgaDatta", "link": "https://stackoverflow.com/users/1610910/durgadatta"}, "edited": false, "score": 0, "creation_date": 1470275540, "post_id": 38755358, "comment_id": 64887062, "body": "corrected the typo."}], "answers": [{"comments": [{"owner": {"reputation": 3016, "user_id": 1610910, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/916d4e1be163c456c999966cb8dd8c5d?s=128&d=identicon&r=PG", "display_name": "DurgaDatta", "link": "https://stackoverflow.com/users/1610910/durgadatta"}, "edited": false, "score": 1, "creation_date": 1470269305, "post_id": 38755413, "comment_id": 64884722, "body": "Is there any reason why superset/subset testing operations are not available in method form?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 3016, "user_id": 1610910, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/916d4e1be163c456c999966cb8dd8c5d?s=128&d=identicon&r=PG", "display_name": "DurgaDatta", "link": "https://stackoverflow.com/users/1610910/durgadatta"}, "edited": false, "score": 0, "creation_date": 1470269706, "post_id": 38755413, "comment_id": 64884831, "body": "@DurgaDatta: I dunno. The <a href=\"https://www.python.org/dev/peps/pep-3106/\" rel=\"nofollow noreferrer\">dict view PEP</a> proposed implementing the method forms, but at some point, they decided not to. There&#39;s probably a conversation about it buried somewhere like the Python-Dev mailing list or the issue tracker."}], "tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": false, "score": 6, "last_activity_date": 1470268346, "creation_date": 1470268346, "answer_id": 38755413, "question_id": 38755358, "link": "https://stackoverflow.com/questions/38755358/restricted-set-operations-on-python-dictionary-key-views/38755413#38755413", "title": "Restricted set operations on python dictionary key views", "body": "<blockquote>\n  <p>Why, for example, are not side-effect free operation like <code>issuperset</code> or <code>issubset</code> operation not permitted?</p>\n</blockquote>\n\n<p>They are; you just have to use the <code>&gt;=</code> and <code>&lt;=</code> operators:</p>\n\n<pre><code>print(keys &lt;= {1, 2, 3})\n</code></pre>\n\n<p>They also support <code>isdisjoint</code> in method form, since there's no operator for it:</p>\n\n<pre><code>print(keys.isdisjoint({1, 2, 3}))\n</code></pre>\n"}], "owner": {"reputation": 3016, "user_id": 1610910, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/916d4e1be163c456c999966cb8dd8c5d?s=128&d=identicon&r=PG", "display_name": "DurgaDatta", "link": "https://stackoverflow.com/users/1610910/durgadatta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 204, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1470270823, "creation_date": 1470267914, "last_edit_date": 1470270823, "question_id": 38755358, "link": "https://stackoverflow.com/questions/38755358/restricted-set-operations-on-python-dictionary-key-views", "title": "Restricted set operations on python dictionary key views", "body": "<p>Lets see the code snippet below:</p>\n\n<pre><code>d = {1:1}\nkeys = d.keys()\n\nprint(keys &amp; {1,2,3})# {1}\nd[2] = 2\nprint(keys &amp; {1,2,3}) # {1,2} # keys() is a view/reference\nprint({1,2}.issubset({1,2,3})) # True\nprint(keys.issubset({1,2,3})) # 'dict_keys' object has no attribute 'issubset'\n</code></pre>\n\n<p>It is mentioned in the official documents on <a href=\"https://docs.python.org/3.0/library/stdtypes.html#dictionary-view-objects\" rel=\"nofollow\">dictionary view objects</a>:</p>\n\n<blockquote>\n  <p>Keys views are set-like since their entries are unique and hashable.\n  ..  Then these set operations are available (\u201cother\u201d refers either to\n  another view or a set): [&amp;,|, ^, ^]</p>\n</blockquote>\n\n<p>If the keys are set-like, why are the set operation on them restricted to those four infix operations. Why, for example, side-effect free operation like <code>issuperset</code> or <code>issubset</code> not permitted?</p>\n"}, {"tags": ["python", "optimization", "interpreter"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 6, "creation_date": 1470268024, "post_id": 38755305, "comment_id": 64884426, "body": "If <code>if condition</code> and <code>if condition == True</code> were actually equivalent in Python, it would be quite straightforward for the peephole optimizer to convert one to the other. Such a conversion is not performed, because those code snippets are not equivalent. For one thing, you get the exact same problem you&#39;d get if you tried that in C; plenty of values that don&#39;t equal <code>True</code> are considered true."}, {"owner": {"reputation": 8998, "user_id": 3314143, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/RpemN.png?s=128&g=1", "display_name": "daniel451", "link": "https://stackoverflow.com/users/3314143/daniel451"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1470268534, "post_id": 38755305, "comment_id": 64884544, "body": "Can you elaborate on which values aren&#39;t equal <code>True</code> but are considered? I thought in languages like C/C++, Java, ..., <code>== True</code> would just be optimized."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 3, "creation_date": 1470268847, "post_id": 38755305, "comment_id": 64884626, "body": "@ascenator consider <code>if 2 == True: ...</code> vs <code>if 2: ...</code>"}, {"owner": {"reputation": 8998, "user_id": 3314143, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/RpemN.png?s=128&g=1", "display_name": "daniel451", "link": "https://stackoverflow.com/users/3314143/daniel451"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1470269047, "post_id": 38755305, "comment_id": 64884665, "body": "@juanpa.arrivillaga yes, but this is just the case for dynamic languages, isn&#39;t it? I mean in C for example the condition normally would be some returned value where the return type of the returning function is specified as a boolean. Therefore the compiler would know that the comparison is <code>boolean == True</code> rather than <code>something-to-evaluate == True</code> at compile time? Or am I wrong?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1470269379, "post_id": 38755305, "comment_id": 64884743, "body": "C only gained a built-in boolean type in C99. There&#39;s still plenty of code using other types in <code>if</code> statements, or which does something like <code>#DEFINE BOOL char</code>, and even <code>&lt;stdbool.h&gt;</code> defines <code>true</code> as <code>1</code>."}, {"owner": {"reputation": 10709, "user_id": 3212865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B6qLg.jpg?s=128&g=1", "display_name": "spectras", "link": "https://stackoverflow.com/users/3212865/spectras"}, "edited": false, "score": 0, "creation_date": 1470269501, "post_id": 38755305, "comment_id": 64884780, "body": "Okay, I really must ask: why does it even matter? If you&#39;re running interpreted code, why do you care about opcode-level optimizations?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1470269919, "post_id": 38755305, "comment_id": 64884893, "body": "@Qlstudio: Because the question is extremely broad, and the information is subject to change at any time. It&#39;s not a good question for the Stack Overflow format."}, {"owner": {"reputation": 8998, "user_id": 3314143, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/RpemN.png?s=128&g=1", "display_name": "daniel451", "link": "https://stackoverflow.com/users/3314143/daniel451"}, "reply_to_user": {"reputation": 10709, "user_id": 3212865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B6qLg.jpg?s=128&g=1", "display_name": "spectras", "link": "https://stackoverflow.com/users/3212865/spectras"}, "edited": false, "score": 0, "creation_date": 1470273371, "post_id": 38755305, "comment_id": 64886658, "body": "@spectras I don&#39;t <i>care</i> about this, if you mean &quot;need to know for current projects&quot; by <i>care</i>. I&#39;m just interested in learning as much as possible. Since I am mostly developing scientific software, optimization is often not needed (because we have quite potent machines), but it&#39;s always a nice feature. I think a deeper knowledge about Python&#39;s interpreter would enable one to avoid some pitfalls, which eventually can save some computation time. I don&#39;t want to over-optimize code, but I always try to write clean, fast code."}], "answers": [{"tags": [], "owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "is_accepted": true, "score": 6, "last_activity_date": 1470270578, "last_edit_date": 1470270578, "creation_date": 1470268637, "answer_id": 38755465, "question_id": 38755305, "link": "https://stackoverflow.com/questions/38755305/which-things-can-the-python-interpreter-optimize/38755465#38755465", "title": "Which things can the Python interpreter optimize?", "body": "<p>It's not much compilation per se (CPython does compile to bytecode), but the extremely dynamic nature of the language hampers \"traditional\" optimizations, which are guided by invariants which are difficult to check at compile time in Python, because the semantics of the language is such that most information about what the code is actually supposed to do is only available at runtime. </p>\n\n<p>Your <code>if condition == True:</code> example is a good one: that comparison could be optimized only if the compiler could prove that <code>condition</code> is always a boolean, which is a non-trivial task if it derives from anything but literals in the current scope - and if it could prove that, at runtime, nobody managed to overwrite <code>True</code> with something else (possible only in Python 2 IIRC). </p>\n\n<p>Mind you, some type inference is possible, and it's actually how code completion tools like Jedi work; however, Jedi can take some shortcuts and assume e.g. some kind of standard environment, while the interpreter has to cope with the most bizarre modifications to the globals that the language do allow. </p>\n\n<p>So, in general CPython does not try very hard to optimize anything -  actually, it doesn't seem to do any kind of \"smart\" code analysis, AFAICT they mostly try to build an efficient but \"mostly vanilla\" interpreter. So, expect to pay almost exactly for what you write, there's no optimizer to save sloppy code.</p>\n\n<p>By the way, your <code>and</code> example is not an optimization done by the interpreter, it's just how the semantic of the operator is defined (and it's quite crucial that it's specified that <code>and</code> and <code>or</code> do short circuit evaluation and it's not an optional \"optimization\", since it could alter the observable behavior of the program if the right hand operand had side effects). </p>\n\n<p>A better approach for a language <em>that</em> dynamic is instead that of a <em>tracing JIT</em> - the interpreter lets the code run for a while, and observes the invariants that seem to hold well (for example, <code>condition</code> seems to always be a boolean, <code>True</code> is always <code>True</code>, some variable is always an integer, ...), and then uses this information to compile to machine code an optimized version of the code. This is let run as long as the invariants above do hold - but as soon as one of the premises used to compile the optimized version is broken, the execution goes back into interpreted mode, and tracing begins again to find out if a new optimized version can be built. </p>\n\n<p>Thus, the typical case is optimized well, applying the usual optimization techniques, but whenever something bizarre (but allowed by the language) happens, the runtime can fallback to the regular \"literal\" bytecode interpretation. </p>\n\n<p>This is the approach used to squeeze good performance from most dynamic languages (most modern JavaScript engines use some variation of this basic approach), and in Python is used in PyPy. </p>\n"}], "owner": {"reputation": 8998, "user_id": 3314143, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/RpemN.png?s=128&g=1", "display_name": "daniel451", "link": "https://stackoverflow.com/users/3314143/daniel451"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2419, "favorite_count": 1, "closed_date": 1470269929, "accepted_answer_id": 38755465, "answer_count": 1, "score": 2, "last_activity_date": 1470270578, "creation_date": 1470267551, "question_id": 38755305, "link": "https://stackoverflow.com/questions/38755305/which-things-can-the-python-interpreter-optimize", "closed_reason": "Needs more focus", "title": "Which things can the Python interpreter optimize?", "body": "<p>I think due to <em>lazy evaluation</em> statements like:</p>\n\n<pre><code>if True and True (...):\n    # do something\n</code></pre>\n\n<p>...should be skipped right after the <code>True and</code> part by the Python interpreter. However, in contrast to compiled Code, I think the Python interpreter can not optimize <em>bad style</em> like explicit boolean comparisions, right?</p>\n\n<pre><code>if condition == True:\n    # do something\n</code></pre>\n\n<p>A compiler would optimize this and delete the <code>== True</code> part, but the interpreter <em>always</em> has to evaluate which statements wait after the <code>condition ==</code> part, thus doing the unnecessary comparison of <code>== True</code> every time the code is executed?!</p>\n\n<p>Do more of such pitfalls exist, where the interpreter can not optimize code? I know this last question is quite open, but I guess some popular examples do exist?</p>\n"}, {"tags": ["python", "python-3.x", "csv", "encoding", "utf-8"], "comments": [{"owner": {"reputation": 6026, "user_id": 3991125, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/wbRqp.png?s=128&g=1", "display_name": "albert", "link": "https://stackoverflow.com/users/3991125/albert"}, "edited": false, "score": 0, "creation_date": 1470267747, "post_id": 38755277, "comment_id": 64884352, "body": "This might occur due to the encoding of the input file / data. Are you sure the data is given as <code>utf-8</code>? In addition, you can find a complete list of all encodings here: <a href=\"https://docs.python.org/3.5/library/codecs.html#standard-encodings\" rel=\"nofollow noreferrer\">docs.python.org/3.5/library/codecs.html#standard-encodings</a> I would suggest trying <code>iso-8859-1</code> or to use <code>chardet</code> module to try to auto-detect file encoding."}, {"owner": {"reputation": 13, "user_id": 6674525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd2e9f6bc974cae5621e617e7e9fbae3?s=128&d=identicon&r=PG&f=1", "display_name": "Martin_v", "link": "https://stackoverflow.com/users/6674525/martin-v"}, "reply_to_user": {"reputation": 6026, "user_id": 3991125, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/wbRqp.png?s=128&g=1", "display_name": "albert", "link": "https://stackoverflow.com/users/3991125/albert"}, "edited": false, "score": 0, "creation_date": 1470267983, "post_id": 38755277, "comment_id": 64884413, "body": "in the example set, problems occur only in the word D&#252;sseldorf in the &#252;, eveything else is fine"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 1, "creation_date": 1470268364, "post_id": 38755277, "comment_id": 64884505, "body": "Your issue is the windows cmd you are running the code from, not because of python"}, {"owner": {"reputation": 13, "user_id": 6674525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd2e9f6bc974cae5621e617e7e9fbae3?s=128&d=identicon&r=PG&f=1", "display_name": "Martin_v", "link": "https://stackoverflow.com/users/6674525/martin-v"}, "edited": false, "score": 0, "creation_date": 1470268544, "post_id": 38755277, "comment_id": 64884547, "body": "how can I fix it ?"}, {"owner": {"reputation": 18468, "user_id": 5249307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c640cd731ca8e455d79860519b6b208?s=128&d=identicon&r=PG", "display_name": "donkopotamus", "link": "https://stackoverflow.com/users/5249307/donkopotamus"}, "edited": false, "score": 0, "creation_date": 1470268607, "post_id": 38755277, "comment_id": 64884563, "body": "Try changing your code page to UTF8 before running ... <code>CHCP 65001</code>"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1470268610, "post_id": 38755277, "comment_id": 64884564, "body": "Use something like cygwin that has proper utf-8 support or a decent ide like pycharm, cmd is to put it bluntly, is crap."}, {"owner": {"reputation": 13, "user_id": 6674525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd2e9f6bc974cae5621e617e7e9fbae3?s=128&d=identicon&r=PG&f=1", "display_name": "Martin_v", "link": "https://stackoverflow.com/users/6674525/martin-v"}, "edited": false, "score": 0, "creation_date": 1470268795, "post_id": 38755277, "comment_id": 64884613, "body": "ok, it works, write an answer"}, {"owner": {"reputation": 443, "user_id": 3413121, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0278d7178ac664efd3bc4c8b28a83fde?s=128&d=identicon&r=PG", "display_name": "toucanb", "link": "https://stackoverflow.com/users/3413121/toucanb"}, "edited": false, "score": 0, "creation_date": 1470270382, "post_id": 38755277, "comment_id": 64885007, "body": "Once your cmd codepage is fixed, you won&#39;t need to encode the output of print, as python3 is already using utf-8. The default encoding argument for open() is platform dependent, so you may want to keep that one."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1470270918, "post_id": 38755277, "comment_id": 64885136, "body": "Off-topic: What your code is doing could be accomplished a lot more easily if you used a <a href=\"https://docs.python.org/3/library/csv.html#csv.DictReader\" rel=\"nofollow noreferrer\"><code>csv.DictReader</code></a>."}], "answers": [{"tags": [], "owner": {"reputation": 18468, "user_id": 5249307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c640cd731ca8e455d79860519b6b208?s=128&d=identicon&r=PG", "display_name": "donkopotamus", "link": "https://stackoverflow.com/users/5249307/donkopotamus"}, "is_accepted": true, "score": 0, "last_activity_date": 1470268968, "creation_date": 1470268968, "answer_id": 38755510, "question_id": 38755277, "link": "https://stackoverflow.com/questions/38755277/encoding-csv-files-on-opening-with-python/38755510#38755510", "title": "Encoding csv files on opening with Python", "body": "<p>The issue here is that when python writes to a stream, it attempts to write text in a fashion that is compatible with the encoding or character set of that stream.</p>\n\n<p>In this case, it appears you are running the command in a Windows console that is set to display Cyrillic text (CP866).  The Cyrillic codepage does not contain a corresponding character for <code>\u00fc</code> and thus the string cannot be decoded to an appropriate character for output.</p>\n\n<p>Changing the active codepage of your windows cmd console to <code>utf-8</code> should help:</p>\n\n<pre><code>$ CHCP 65001\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 6674525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd2e9f6bc974cae5621e617e7e9fbae3?s=128&d=identicon&r=PG&f=1", "display_name": "Martin_v", "link": "https://stackoverflow.com/users/6674525/martin-v"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 187, "favorite_count": 0, "accepted_answer_id": 38755510, "answer_count": 1, "score": 1, "last_activity_date": 1470270467, "creation_date": 1470267426, "last_edit_date": 1470270467, "question_id": 38755277, "link": "https://stackoverflow.com/questions/38755277/encoding-csv-files-on-opening-with-python", "title": "Encoding csv files on opening with Python", "body": "<p>So i have this csv which has rows like these:</p>\n\n<pre><code>\"41975\",\"IT\",\"Catania\",\"2016-01-12T10:57:50+01:00\",409.58\n\"538352\",\"DE\",\"D\u00fcsseldorf\",\"2015-12-18T20:50:21+01:00\",95.03\n\"V22211\",\"GB\",\"Nottingham\",\"2015-12-31T11:17:59+00:00\",872\n</code></pre>\n\n<p>In the current example the first and the third word are working fine but the program crashes when it prints <code>D\u00fcsseldorf</code>, the <code>\u00fc</code> is problematic</p>\n\n<p>I want to be able to get the information from this csv file and to be able to <code>print</code> it. Here is my code:</p>\n\n<pre><code>def load_sales(file_name):\n    SALES_ID = 0\n    SALES_COUNTRY = 1\n    SALES_CITY = 2\n    SALES_DATE = 3\n    SALES_PRICE =4\n    with open(file_name,  'r', newline='', encoding='utf8') as r:\n        reader = csv.reader(r)\n        result=[]\n        for row in reader:\n            sale={}\n            sale[\"id\"]=row[SALES_ID]\n            sale[\"country\"]=row[SALES_COUNTRY]\n            sale[\"city\"]=row[SALES_CITY]\n            sale[\"date\"]=row[SALES_DATE]\n            sale[\"price\"]=float(row[SALES_PRICE])\n            result.append(sale)\n</code></pre>\n\n<p>when I print I print the <code>result</code> I get:</p>\n\n<pre><code>  File \"C:\\Anaconda3\\lib\\encodings\\cp866.py\", line 19, in encode                                                   \n    return codecs.charmap_encode(input,self.errors,encoding_map)[0]                                                \nUnicodeEncodeError: 'charmap' codec can't encode character '\\xfc' in position 384: character maps to &lt;undefined&gt; \n</code></pre>\n\n<p>So far I have tried: changing the <code>encoding</code> value in the open function with <code>utf-8</code>, <code>UTF8</code> etc., making a print function:</p>\n\n<pre><code>def write_uft8(data):\n    print(data).encode('utf-8')\n</code></pre>\n\n<p>But this is not a viable way when you have to print list of dictionaries.</p>\n\n<p>Someone told me that the problem is that my python is not set to encode to these messages to utf-8, is that true and how do I change it ?   </p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 29444, "user_id": 3072788, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/220a45c2fcff7e7358d144551b116205?s=128&d=identicon&r=PG&f=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/3072788/alec"}, "edited": false, "score": 0, "creation_date": 1470267451, "post_id": 38755263, "comment_id": 64884278, "body": "How do you store the chunks?"}, {"owner": {"reputation": 440, "user_id": 2150169, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/e5f960d8aefd946f8892c3d5a79d2436?s=128&d=identicon&r=PG", "display_name": "Process1", "link": "https://stackoverflow.com/users/2150169/process1"}, "edited": false, "score": 0, "creation_date": 1470267489, "post_id": 38755263, "comment_id": 64884296, "body": "First I did chunk=file.readlines(size) and then stored the chunk in a defaultdict and just sum their values per record."}, {"owner": {"reputation": 6026, "user_id": 3991125, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/wbRqp.png?s=128&g=1", "display_name": "albert", "link": "https://stackoverflow.com/users/3991125/albert"}, "edited": false, "score": 0, "creation_date": 1470267528, "post_id": 38755263, "comment_id": 64884303, "body": "You might take a look at so called <code>Counter</code> which are provided by the <code>collections</code> module."}, {"owner": {"reputation": 440, "user_id": 2150169, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/e5f960d8aefd946f8892c3d5a79d2436?s=128&d=identicon&r=PG", "display_name": "Process1", "link": "https://stackoverflow.com/users/2150169/process1"}, "edited": false, "score": 0, "creation_date": 1470267663, "post_id": 38755263, "comment_id": 64884333, "body": "Thanks but I am trying to sum the values per record, not count the frequency of a record."}, {"owner": {"reputation": 41280, "user_id": 344286, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/3827b2facd01ed6a64a96df00d4b877a?s=128&d=identicon&r=PG", "display_name": "Wayne Werner", "link": "https://stackoverflow.com/users/344286/wayne-werner"}, "edited": false, "score": 0, "creation_date": 1470268004, "post_id": 38755263, "comment_id": 64884422, "body": "<code>Counter</code> can count anything that you want... <i>count of a missing element is zero</i>"}, {"owner": {"reputation": 440, "user_id": 2150169, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/e5f960d8aefd946f8892c3d5a79d2436?s=128&d=identicon&r=PG", "display_name": "Process1", "link": "https://stackoverflow.com/users/2150169/process1"}, "edited": false, "score": 0, "creation_date": 1470268599, "post_id": 38755263, "comment_id": 64884562, "body": "Yes but my file is &gt;20 GB and it lot more records that Counter can handle, aka Memory error."}, {"owner": {"reputation": 41280, "user_id": 344286, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/3827b2facd01ed6a64a96df00d4b877a?s=128&d=identicon&r=PG", "display_name": "Wayne Werner", "link": "https://stackoverflow.com/users/344286/wayne-werner"}, "edited": false, "score": 0, "creation_date": 1470275852, "post_id": 38755263, "comment_id": 64887138, "body": "How many distinct <code>KN</code> values do you have?"}, {"owner": {"reputation": 440, "user_id": 2150169, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/e5f960d8aefd946f8892c3d5a79d2436?s=128&d=identicon&r=PG", "display_name": "Process1", "link": "https://stackoverflow.com/users/2150169/process1"}, "edited": false, "score": 0, "creation_date": 1470277908, "post_id": 38755263, "comment_id": 64887630, "body": "Probably 4 million"}, {"owner": {"reputation": 41280, "user_id": 344286, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/3827b2facd01ed6a64a96df00d4b877a?s=128&d=identicon&r=PG", "display_name": "Wayne Werner", "link": "https://stackoverflow.com/users/344286/wayne-werner"}, "edited": false, "score": 1, "creation_date": 1470279655, "post_id": 38755263, "comment_id": 64888082, "body": "So... apparently you didn&#39;t bother trying this, right? Because I just did <code>from collections import Counter; c = Counter; for num in range(5000000): c[num] += 42</code> (actually I used <code>randint</code> but I can&#39;t be bothered to press backspace) and it uses less than 1GB of RAM. Not only that, but I thought well <i>maybe</i> strings just take up way more memory, so I did the same thing but with <code>c[str(num)] = randint(1, 1000000)</code>, and Mac&#39;s activity monitor reports 1.17GB. So, you <i>didn&#39;t actually try it</i>, did you?"}, {"owner": {"reputation": 440, "user_id": 2150169, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/e5f960d8aefd946f8892c3d5a79d2436?s=128&d=identicon&r=PG", "display_name": "Process1", "link": "https://stackoverflow.com/users/2150169/process1"}, "edited": false, "score": 0, "creation_date": 1470323810, "post_id": 38755263, "comment_id": 64913980, "body": "Thanks Wayne for this demo. I appreciate it. You are right Counter works for this specific file. But I am not looking to solve this problem with Counter or defaultdict. I am looking for an efficient solution that can work with files close to 80GB or even 100 GB where I have records &gt;=160 million. I tried defaultdict and Counter and I got memory error for those files. Hence, I decided to post my problem here."}, {"owner": {"reputation": 41280, "user_id": 344286, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/3827b2facd01ed6a64a96df00d4b877a?s=128&d=identicon&r=PG", "display_name": "Wayne Werner", "link": "https://stackoverflow.com/users/344286/wayne-werner"}, "edited": false, "score": 0, "creation_date": 1470329076, "post_id": 38755263, "comment_id": 64917612, "body": "Then <i>that&#39;s</i> the question that you should have asked, along with mentioning the fact that you tried with both defaultdict <i>and</i> counter. Which would probably take about 32GB of RAM. At that point I probably would use a sqlite DB for the counter."}], "answers": [{"comments": [{"owner": {"reputation": 41280, "user_id": 344286, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/3827b2facd01ed6a64a96df00d4b877a?s=128&d=identicon&r=PG", "display_name": "Wayne Werner", "link": "https://stackoverflow.com/users/344286/wayne-werner"}, "edited": false, "score": 1, "creation_date": 1470268251, "post_id": 38755383, "comment_id": 64884471, "body": "You could use <code>collections.Counter</code> for this and then you could skip the <code>key in output</code> part"}, {"owner": {"reputation": 2841, "user_id": 6119465, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/btWkX.png?s=128&g=1", "display_name": "2Cubed", "link": "https://stackoverflow.com/users/6119465/2cubed"}, "reply_to_user": {"reputation": 41280, "user_id": 344286, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/3827b2facd01ed6a64a96df00d4b877a?s=128&d=identicon&r=PG", "display_name": "Wayne Werner", "link": "https://stackoverflow.com/users/344286/wayne-werner"}, "edited": false, "score": 0, "creation_date": 1470268431, "post_id": 38755383, "comment_id": 64884523, "body": "@WayneWerner True. I updated my answer to use a <code>defaultdict</code>, though, as it has a cleaner solution here."}, {"owner": {"reputation": 41280, "user_id": 344286, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/3827b2facd01ed6a64a96df00d4b877a?s=128&d=identicon&r=PG", "display_name": "Wayne Werner", "link": "https://stackoverflow.com/users/344286/wayne-werner"}, "edited": false, "score": 2, "creation_date": 1470268507, "post_id": 38755383, "comment_id": 64884539, "body": "<code>Counter()</code> is just <code>defaultdict(int)</code>. With a couple of other fancy methods."}, {"owner": {"reputation": 2841, "user_id": 6119465, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/btWkX.png?s=128&g=1", "display_name": "2Cubed", "link": "https://stackoverflow.com/users/6119465/2cubed"}, "reply_to_user": {"reputation": 41280, "user_id": 344286, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/3827b2facd01ed6a64a96df00d4b877a?s=128&d=identicon&r=PG", "display_name": "Wayne Werner", "link": "https://stackoverflow.com/users/344286/wayne-werner"}, "edited": false, "score": 0, "creation_date": 1470269052, "post_id": 38755383, "comment_id": 64884666, "body": "@WayneWerner Interesting. Updated. :)"}], "tags": [], "owner": {"reputation": 2841, "user_id": 6119465, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/btWkX.png?s=128&g=1", "display_name": "2Cubed", "link": "https://stackoverflow.com/users/6119465/2cubed"}, "is_accepted": false, "score": 1, "last_activity_date": 1470269042, "last_edit_date": 1470269042, "creation_date": 1470268139, "answer_id": 38755383, "question_id": 38755263, "link": "https://stackoverflow.com/questions/38755263/access-similar-lines-from-a-file-and-apply-a-function/38755383#38755383", "title": "Access similar lines from a file and apply a function", "body": "<p>The following should accomplish the desired functionality.</p>\n\n<pre><code>from collections import Counter\n\noutput = Counter()\n\nwith open(\"input.txt\") as file:\n    for line in file.read().split('\\n'):\n        if line:\n            key, value = line.split()\n\n            output[key] += int(value)\n\nwith open(\"output.txt\", 'w+') as file:\n    for key, value in output.items():\n        file.write(\"{key} {value}\\n\".format(key=key, value=value))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 38676, "user_id": 227884, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/L7EG1.png?s=128&g=1", "display_name": "UltraInstinct", "link": "https://stackoverflow.com/users/227884/ultrainstinct"}, "is_accepted": false, "score": 0, "last_activity_date": 1470268992, "last_edit_date": 1470268992, "creation_date": 1470268450, "answer_id": 38755433, "question_id": 38755263, "link": "https://stackoverflow.com/questions/38755263/access-similar-lines-from-a-file-and-apply-a-function/38755433#38755433", "title": "Access similar lines from a file and apply a function", "body": "<blockquote>\n  <p>It is a big text file >20GB. So I cannot store the whole thing into memory at once.</p>\n</blockquote>\n\n<ol>\n<li>It does not matter how big the file is. What matters is how many unique records are there because you will be keeping only unique records.</li>\n<li>Python <code>Counter</code> would still be keeping it in memory. That is not going to do any good to you if you are running in a constrained environment.</li>\n</ol>\n\n<hr>\n\n<p>My suggestion:</p>\n\n<ul>\n<li>Sort the file in the alphabetical order. I would just send it via unix <code>sort</code>. (I am assuming you have space on your FS)</li>\n<li>Iterate over lines. Extract the first portion of the current record. Iterate while the first portion of the record is the same -- while summing up the second part.</li>\n<li>When the record type changes -- write one line to the file -- with the sum you have been holding in your memory until now.</li>\n<li>Repeat.</li>\n</ul>\n"}], "owner": {"reputation": 440, "user_id": 2150169, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/e5f960d8aefd946f8892c3d5a79d2436?s=128&d=identicon&r=PG", "display_name": "Process1", "link": "https://stackoverflow.com/users/2150169/process1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1470269042, "creation_date": 1470267341, "last_edit_date": 1470268260, "question_id": 38755263, "link": "https://stackoverflow.com/questions/38755263/access-similar-lines-from-a-file-and-apply-a-function", "title": "Access similar lines from a file and apply a function", "body": "<p>I am trying to access similar lines from a file and then apply a sum on their values.</p>\n\n<p>Here is my input file format:</p>\n\n<pre><code>K1 20\nK2 23\nK3 24\nK3 14\nK3 10\nK2 5\n</code></pre>\n\n<p>So, my goal is to create an output file that creates a sum of values per record:</p>\n\n<pre><code>K1 20\nK2 28\nK3 48\n</code></pre>\n\n<ul>\n<li>It is a big text file >20GB. So I cannot store the whole thing into memory at once.      </li>\n<li>I was successful in reading the file in to chunks and do the sums per record for those chunks, now I want to merge these output chunks.</li>\n</ul>\n\n<p>For example first chunk</p>\n\n<pre><code>K1 20\nK2 23\nK3 24\n</code></pre>\n\n<p>second chunk</p>\n\n<pre><code>K3 24\nK2 5\n</code></pre>\n\n<p>Now I am lost at how do I merge them all and keep updating the records with their new values.</p>\n\n<p>New values after merging will be </p>\n\n<p>K1 20</p>\n\n<p>K2 28</p>\n\n<p>K3 48</p>\n"}, {"tags": ["python", "windows", "git", "raspberry-pi"], "comments": [{"owner": {"reputation": 7154, "user_id": 1470749, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wyXz0.jpg?s=128&g=1", "display_name": "101", "link": "https://stackoverflow.com/users/1470749/101"}, "edited": false, "score": 0, "creation_date": 1470267245, "post_id": 38755220, "comment_id": 64884239, "body": "If you&#39;re just editing Python files, then sure you can. You could network share a folder on the Pi or in Windows and edit/run the files from the networked location."}, {"owner": {"reputation": 117, "user_id": 1058786, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/104b92d974a54a65c5045b636845a9fc?s=128&d=identicon&r=PG", "display_name": "karra", "link": "https://stackoverflow.com/users/1058786/karra"}, "reply_to_user": {"reputation": 7154, "user_id": 1470749, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wyXz0.jpg?s=128&g=1", "display_name": "101", "link": "https://stackoverflow.com/users/1470749/101"}, "edited": false, "score": 0, "creation_date": 1470267586, "post_id": 38755220, "comment_id": 64884310, "body": "I&#39;m mostly editing python, html and java script-files. Is it something like this? <a href=\"http://raspberrywebserver.com/serveradmin/share-your-raspberry-pis-files-and-folders-across-a-network.html\" rel=\"nofollow noreferrer\">raspberrywebserver.com/serveradmin/&hellip;</a>"}, {"owner": {"reputation": 7154, "user_id": 1470749, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wyXz0.jpg?s=128&g=1", "display_name": "101", "link": "https://stackoverflow.com/users/1470749/101"}, "edited": false, "score": 0, "creation_date": 1470276602, "post_id": 38755220, "comment_id": 64887307, "body": "Yep, just like that. You may also find it useful to use a program like PuTTY to SSH into the RPi and run the files <i>on</i> the RPi but from your PC. That way your RPi doesn&#39;t need a keyboard, monitor, etc."}], "answers": [{"tags": [], "owner": {"reputation": 522, "user_id": 1822723, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f1de5f650cd759d9731fa1417268eabb?s=128&d=identicon&r=PG", "display_name": "willcwf", "link": "https://stackoverflow.com/users/1822723/willcwf"}, "is_accepted": false, "score": 1, "last_activity_date": 1470267393, "creation_date": 1470267393, "answer_id": 38755272, "question_id": 38755220, "link": "https://stackoverflow.com/questions/38755220/develop-raspberry-apps-from-windows/38755272#38755272", "title": "Develop Raspberry apps from windows", "body": "<p>Why not just set up a VM on your windows machine with rasbian running? Something like this will get you started: <a href=\"http://www.makeuseof.com/tag/emulate-raspberry-pi-pc/\" rel=\"nofollow\">http://www.makeuseof.com/tag/emulate-raspberry-pi-pc/</a></p>\n\n<p>Otherwise - set up a network share between the two, edit files on your windows computer, &amp; run from the pi.</p>\n"}, {"tags": [], "owner": {"reputation": 5024, "user_id": 4439794, "user_type": "registered", "accept_rate": 39, "profile_image": "https://i.stack.imgur.com/ogyE1.png?s=128&g=1", "display_name": "Trevor", "link": "https://stackoverflow.com/users/4439794/trevor"}, "is_accepted": false, "score": 2, "last_activity_date": 1470288937, "creation_date": 1470288937, "answer_id": 38759185, "question_id": 38755220, "link": "https://stackoverflow.com/questions/38755220/develop-raspberry-apps-from-windows/38759185#38759185", "title": "Develop Raspberry apps from windows", "body": "<p>Sure. I go through many ways and I found one of the best way is using <a href=\"https://winscp.net/eng/download.php\" rel=\"nofollow\">WinSCP</a>. </p>\n\n<p>It's very easy for you to edit and update file with notepad++ right in the Windows.</p>\n"}, {"tags": [], "owner": {"reputation": 56, "user_id": 6672715, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210193383936626/picture?type=large", "display_name": "Mike", "link": "https://stackoverflow.com/users/6672715/mike"}, "is_accepted": true, "score": 2, "last_activity_date": 1470293267, "creation_date": 1470293267, "answer_id": 38760276, "question_id": 38755220, "link": "https://stackoverflow.com/questions/38755220/develop-raspberry-apps-from-windows/38760276#38760276", "title": "Develop Raspberry apps from windows", "body": "<p>You can run a SAMBA server on your Raspberry Pi, set your python project folder as a network disk. Then you can use any windows IDE you like, just open the file which is on the network disk.</p>\n\n<p>Currently I am using VS2015 + Python Tools for Visual Studio for remote debugging purpose.</p>\n"}], "owner": {"reputation": 117, "user_id": 1058786, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/104b92d974a54a65c5045b636845a9fc?s=128&d=identicon&r=PG", "display_name": "karra", "link": "https://stackoverflow.com/users/1058786/karra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 550, "favorite_count": 0, "accepted_answer_id": 38760276, "answer_count": 3, "score": 1, "last_activity_date": 1470293267, "creation_date": 1470266965, "question_id": 38755220, "link": "https://stackoverflow.com/questions/38755220/develop-raspberry-apps-from-windows", "title": "Develop Raspberry apps from windows", "body": "<p>Is it possible to open files from a Raspberry pi in windows for editing (using for example notepad++)?</p>\n\n<p>I am currently using the built in python IDE in Raspbian but i feel that it would speed up the development process if i could use a windows IDE for development. I have also tried using a git repo to share files between the PI and Windows but it is a bit cumbersome to.</p>\n\n<p>Or does anyone have any other ideas about workflow between Windows and Raspberry?</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 26041, "user_id": 3339965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ac89d084d3bc5dc083bad3ea5518f11?s=128&d=identicon&r=PG&f=1", "display_name": "root", "link": "https://stackoverflow.com/users/3339965/root"}, "edited": false, "score": 1, "creation_date": 1470267195, "post_id": 38755233, "comment_id": 64884228, "body": "Pandas allows date comparisons with strings, so you could even just do <code>df.index &gt; &#39;2016-08-04&#39;</code>."}, {"owner": {"reputation": 56440, "user_id": 2285236, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ac8c2e0f71dbd8cf4543039bebf2ab3?s=128&d=identicon&r=PG&f=1", "display_name": "ayhan", "link": "https://stackoverflow.com/users/2285236/ayhan"}, "reply_to_user": {"reputation": 26041, "user_id": 3339965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ac89d084d3bc5dc083bad3ea5518f11?s=128&d=identicon&r=PG&f=1", "display_name": "root", "link": "https://stackoverflow.com/users/3339965/root"}, "edited": false, "score": 0, "creation_date": 1470267589, "post_id": 38755233, "comment_id": 64884311, "body": "@root much better. Thanks."}, {"owner": {"reputation": 2229, "user_id": 720877, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/0b220fa4c0b59e883f360979ee745d63?s=128&d=identicon&r=PG", "display_name": "Croad Langshan", "link": "https://stackoverflow.com/users/720877/croad-langshan"}, "edited": false, "score": 0, "creation_date": 1470298058, "post_id": 38755233, "comment_id": 64895409, "body": "In my full code I already have a DateTimeIndex (I forgot this writing the question), using pandas.read_table with the <code>date_parser</code> argument.  It was just the <code>.loc</code> usage I hadn&#39;t got right somehow."}], "tags": [], "owner": {"reputation": 56440, "user_id": 2285236, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ac8c2e0f71dbd8cf4543039bebf2ab3?s=128&d=identicon&r=PG&f=1", "display_name": "ayhan", "link": "https://stackoverflow.com/users/2285236/ayhan"}, "is_accepted": true, "score": 3, "last_activity_date": 1470267579, "last_edit_date": 1470267579, "creation_date": 1470267105, "answer_id": 38755233, "question_id": 38755143, "link": "https://stackoverflow.com/questions/38755143/how-to-add-a-number-to-an-index-range-of-a-pandas-array/38755233#38755233", "title": "How to add a number to an index range of a pandas array", "body": "<p>If you convert the index to a DateTimeIndex it becomes easier:</p>\n\n<pre><code>df.index = pd.to_datetime(df.index)\ndf.loc[df.index &gt; '2016-08-04', 'y'] += 1\ndf\nOut: \n              x    y\n2016-08-04  1.2  234\n2016-08-05  3.3  433\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2841, "user_id": 6119465, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/btWkX.png?s=128&g=1", "display_name": "2Cubed", "link": "https://stackoverflow.com/users/6119465/2cubed"}, "is_accepted": false, "score": 0, "last_activity_date": 1470267327, "creation_date": 1470267327, "answer_id": 38755262, "question_id": 38755143, "link": "https://stackoverflow.com/questions/38755143/how-to-add-a-number-to-an-index-range-of-a-pandas-array/38755262#38755262", "title": "How to add a number to an index range of a pandas array", "body": "<p>You can use the <code>.where</code> method on the <code>y</code> column.</p>\n\n<pre><code>df.y = df.y.where(df.index &lt; datetime.date(2016, 8, 4), lambda k: k + 1)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11191, "user_id": 5224926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f280a3c82415bdba68680536e277e19b?s=128&d=identicon&r=PG&f=1", "display_name": "Randy", "link": "https://stackoverflow.com/users/5224926/randy"}, "is_accepted": false, "score": 1, "last_activity_date": 1470267372, "creation_date": 1470267372, "answer_id": 38755269, "question_id": 38755143, "link": "https://stackoverflow.com/questions/38755143/how-to-add-a-number-to-an-index-range-of-a-pandas-array/38755269#38755269", "title": "How to add a number to an index range of a pandas array", "body": "<p>As a non-inplace alternative, you can use <code>df.add</code>:</p>\n\n<pre><code>df.add(df.index &gt; pd.to_datetime('2016-08-04'), axis=0, level=\"y\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15126, "user_id": 1953800, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4173076e5187c82e74379de9aeb00aa4?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1953800/alex"}, "is_accepted": false, "score": 1, "last_activity_date": 1470269731, "creation_date": 1470269731, "answer_id": 38755614, "question_id": 38755143, "link": "https://stackoverflow.com/questions/38755143/how-to-add-a-number-to-an-index-range-of-a-pandas-array/38755614#38755614", "title": "How to add a number to an index range of a pandas array", "body": "<p>Checkout <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DatetimeIndex.html\" rel=\"nofollow\">the docs</a> for <code>DatetimeIndex</code> or <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.date_range.html\" rel=\"nofollow\">the docs</a> for the convenience function <code>date_range</code>. Either will allow you to set a <code>DatetimeIndex</code> that is natural to work with.</p>\n\n<pre><code>df = pandas.DataFrame(\n    [[1.2, 234], [3.3, 432]],\n    index=pd.DatetimeIndex(start='today', periods=2, freq='D', normalize=True),\n    columns=['x', 'y'])\n\ndf.loc[df.index &gt; '2016-08-04', 'y'] += 1\n</code></pre>\n"}], "owner": {"reputation": 2229, "user_id": 720877, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/0b220fa4c0b59e883f360979ee745d63?s=128&d=identicon&r=PG", "display_name": "Croad Langshan", "link": "https://stackoverflow.com/users/720877/croad-langshan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 708, "favorite_count": 0, "accepted_answer_id": 38755233, "answer_count": 4, "score": 2, "last_activity_date": 1470269731, "creation_date": 1470266395, "question_id": 38755143, "link": "https://stackoverflow.com/questions/38755143/how-to-add-a-number-to-an-index-range-of-a-pandas-array", "title": "How to add a number to an index range of a pandas array", "body": "<p>In pandas, how can I operate on a subset of rows in a column, selected by index?</p>\n\n<p>In particular, how can I add 1.0 to column y here, only where the date is greater than 2016-08-04?</p>\n\n<pre><code>&gt;&gt;&gt; pandas.DataFrame(\n... index=[datetime.date.today(), datetime.date.today() + datetime.timedelta(1)],\n... data=[[1.2, 234], [3.3, 432]],\n... columns=['x', 'y'])\n              x    y\n2016-08-04  1.2  234\n2016-08-05  3.3  432\n\n[2 rows x 2 columns]\n</code></pre>\n\n<p>I don't mind whether this is in-place or returns a new dataframe.</p>\n\n<p>The answer in this case should be:</p>\n\n<pre><code>              x    y\n2016-08-04  1.2  234\n2016-08-05  3.3  433\n</code></pre>\n"}, {"tags": ["python", "io"], "answers": [{"tags": [], "owner": {"reputation": 5908, "user_id": 2442613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c872ea7055801788bec55c7703b96d88?s=128&d=identicon&r=PG", "display_name": "Paul Cornelius", "link": "https://stackoverflow.com/users/2442613/paul-cornelius"}, "is_accepted": false, "score": 0, "last_activity_date": 1470267735, "creation_date": 1470267735, "answer_id": 38755334, "question_id": 38755111, "link": "https://stackoverflow.com/questions/38755111/dividing-a-large-file-into-several-smaller-stochastic-writing-to-multiple-files/38755334#38755334", "title": "Dividing a large file into several smaller, stochastic writing to multiple files", "body": "<p>Idea: define a class named, say, Pattern.  In here are several member variables: one is the <code>\"&lt;some pattern&gt;\"</code> that you have already; another is the filename; a third is the mode to use for the next call to open() on that file.  The mode would be \"w\" the first time (creating a new file) and then your code would change that to \"w+\" so you would append any later writes.  Instances of this class go into the \"cats\" dictionary as the values.  This addresses your objection to using more than one dictionary - all the information you need to deal with one category is kept in one object. It also allows you to avoid creating empty files. </p>\n\n<p>Perhaps the OS will deal well enough with the problem of doing a lot of small appends to several files.  If that's a performance bottleneck you will have some more work to do (maybe you can cache a few updates in a list before your write them out in one step).</p>\n"}], "owner": {"reputation": 6166, "user_id": 328725, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/XWh3b.jpg?s=128&g=1", "display_name": "posdef", "link": "https://stackoverflow.com/users/328725/posdef"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1470267735, "creation_date": 1470266157, "question_id": 38755111, "link": "https://stackoverflow.com/questions/38755111/dividing-a-large-file-into-several-smaller-stochastic-writing-to-multiple-files", "title": "Dividing a large file into several smaller, stochastic writing to multiple files", "body": "<p>It's a bit embarrassing but I having a bit of a difficulty with a rather simple (at least it should be) task: </p>\n\n<p>I want to have a script that takes a large text file (several GBs) and divides into smaller pieces. This partitioning however is supposed to happen not on the order of lines but based on matching string patterns, such that each line/entry is supposed to be categorized based on the starting characters. So the algorithm looks something like this:</p>\n\n<ol>\n<li>define categories in a dict {key : pattern}</li>\n<li>define the matching/categorizing function</li>\n<li>open the input file and begin to iterate entries</li>\n<li>classify each entry</li>\n<li>write entry out to the appropriate file</li>\n</ol>\n\n<p>The problem I'm having is with the output files, specifically:</p>\n\n<ul>\n<li><p>do I declare them in advance? THe number of categories may change from instance to instance, so I technically don't know how many files to open. Also, there is no guarantee that each category is represented in the input data, hence it would be silly to create files that have no content. </p>\n\n<ul>\n<li><p>if I iterate over the categories in the dict, and open a bunch of files; how do I keep track of which file is for which key? Having another dict i.e. <code>dict2 {key : file}</code> feels like overkill and not particularly pretty either...</p></li>\n<li><p>If I don't open the files in advance, and open/close a new io channel every time I need to write to a file, there will be significant overhead I think. </p></li>\n</ul></li>\n</ul>\n\n<p>Another complication with opening the files only when needed is the following; every time I run the script I want to overwrite the resultant files. But if I have the file access inside the main loop, I will need to open the file for appending. </p>\n\n<p>Below is the test code I have so far: </p>\n\n<pre><code>from itertools import islice\nimport random, sys, os\n\ncats = {\n    \"key1\" : \"&lt;some pattern&gt;\",\n    \"key2\" : \"&lt;some other pattern&gt;\",\n    \"key3\" : \"&lt;yet another pattern&gt;\"}\n\ndef delta(x, s):\n    return sum([int(c0 != c1) for c0,c1 in zip(x,s)])\n\ndef categorize_str(x, cats):\n    d = {cat : delta(x,tag) for cat,tag in cats.items()}\n    return min(d, key=d.get)\n\ndef main():\n    file = sys.argv[1]\n    nseq = None if len(sys.argv) &lt; 3 else int(sys.argv[2])\n\n    path = os.path.dirname(file)\n    base = os.path.basename(file))\n    (name,ext) = os.path.splitext(base)\n    for k in cats.keys():  # &lt;----\n        outfile = os.path.join(path, ''.join([name, \"_\", k, ext])\n        # what do I do with outfile now???\n\n    read = ... # library call to that opens input file and returns an iterator\n    for rec in islice(read,nseq):\n        c = categorize_str(rec, cats)\n        # depending on c, write to one of the \"outfile\"s\n\nif __name__ == \"__main__\":\n    main()\n</code></pre>\n"}, {"tags": ["python", "linux", "android-studio", "bluetooth", "bluetooth-lowenergy"], "comments": [{"owner": {"reputation": 973, "user_id": 6428475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2f6c0e5f78816c053d62b3b4ed9600b?s=128&d=identicon&r=PG&f=1", "display_name": "Guo Xingmin", "link": "https://stackoverflow.com/users/6428475/guo-xingmin"}, "edited": false, "score": 0, "creation_date": 1470291953, "post_id": 38755087, "comment_id": 64891885, "body": "Did you write your apps on Linux? I understand that you just created your app on your mobile phone. You should define your service/characteristic(here can be your four virtual button) above csr8510 and your mobile phone app need search the service then write the characteristic, i.e. the four button value, push down or up."}], "answers": [{"tags": [], "owner": {"reputation": 103, "user_id": 6644672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3e1bfe9150e32e38856bfe42fb3142a?s=128&d=identicon&r=PG&f=1", "display_name": "HallMark", "link": "https://stackoverflow.com/users/6644672/hallmark"}, "is_accepted": false, "score": 0, "last_activity_date": 1470281300, "creation_date": 1470281300, "answer_id": 38758013, "question_id": 38755087, "link": "https://stackoverflow.com/questions/38755087/reading-bluetooth-low-energy-data-from-a-custom-app-to-a-ble-donglecsr8510/38758013#38758013", "title": "Reading bluetooth low energy data from a custom app to a ble dongle(csr8510)", "body": "<p>I am also looking forward for something similar application where Android application sends some button command to Linux Application via Bluetooth and nearest similar example I get from github.</p>\n\n<p>Here is <a href=\"https://gist.github.com/dvas0004/8209b67ff556cb18651d#file-aquapi-py\" rel=\"nofollow\">Python application</a> code for Linux side this is using Bluetooth RFCOMM communication.</p>\n\n<p>And here is <a href=\"https://gist.github.com/dvas0004/3b9128d94c0ecd50588a#file-aquariumdroid-java\" rel=\"nofollow\">Android application</a> main activity code you have to make sure to put your Bluetooth name in android application and also make sure UUID is same on both python and android application.</p>\n\n<p>Give it a try and then you can modify both your application for multiple buttons.</p>\n\n<p>Make sure you have paired your bluetooth with android first before you run application.</p>\n"}], "owner": {"reputation": 1, "user_id": 6557968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80e8773d8170f03b80d91a5239738581?s=128&d=identicon&r=PG&f=1", "display_name": "Musclemania05", "link": "https://stackoverflow.com/users/6557968/musclemania05"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 337, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1470281300, "creation_date": 1470265962, "question_id": 38755087, "link": "https://stackoverflow.com/questions/38755087/reading-bluetooth-low-energy-data-from-a-custom-app-to-a-ble-donglecsr8510", "title": "Reading bluetooth low energy data from a custom app to a ble dongle(csr8510)", "body": "<p>I am having a problem connecting and sending Bluetooth low energy data from a custom built app I created in android studio to a BLE dongle. The app I created has 4 virtual push buttons and every time I press one these buttons its send a 4bit number letting the Bluetooth dongle( peripheral) know. The problem is that when I use \"hcidump\" in Linux I cant read anything. which I figured is how I can view this data.</p>\n\n<p>One of the problems I believe I am having is that I need to advertise some command that lets the app know what information I want. If this is the case I'm unsure what to send, to notify the app that I want to read the states of the virtual pushbuttons.</p>\n\n<p>I am able to bring up the ble dongle in Linux and the app is able to discovery the ble dongle as well they will connect for a short period then disconnect cause as I said the app is waiting for some kind of characteristic/service or so is what I believe?</p>\n"}, {"tags": ["python", "random"], "comments": [{"owner": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 1, "creation_date": 1470265400, "post_id": 38754990, "comment_id": 64883762, "body": "Just overwrite present with <code>random.choice(chars)</code> in your empty else-clause."}, {"owner": {"reputation": 3966, "user_id": 469072, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/13ce453eb105a974aea64b2461cfc200?s=128&d=identicon&r=PG", "display_name": "joel goldstick", "link": "https://stackoverflow.com/users/469072/joel-goldstick"}, "edited": false, "score": 1, "creation_date": 1470265606, "post_id": 38754990, "comment_id": 64883819, "body": "Your question is unclear.  Do you want the user to continue to guess until successful, then create a new random value to guess?  Or just give him one chance before you change the mystery number?"}, {"owner": {"reputation": 19, "user_id": 6655543, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f2be3006fe1a660536e03b79804554ff?s=128&d=identicon&r=PG&f=1", "display_name": "Rubyist", "link": "https://stackoverflow.com/users/6655543/rubyist"}, "reply_to_user": {"reputation": 3966, "user_id": 469072, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/13ce453eb105a974aea64b2461cfc200?s=128&d=identicon&r=PG", "display_name": "joel goldstick", "link": "https://stackoverflow.com/users/469072/joel-goldstick"}, "edited": false, "score": 0, "creation_date": 1470265677, "post_id": 38754990, "comment_id": 64883844, "body": "@joelgoldstick Continue to guess until they have succeeded."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1470265741, "post_id": 38754990, "comment_id": 64883862, "body": "Then why would you put the code to change the mystery character in the code path that only executes if the user guesses <i>wrong</i>?"}], "answers": [{"tags": [], "owner": {"reputation": 3966, "user_id": 469072, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/13ce453eb105a974aea64b2461cfc200?s=128&d=identicon&r=PG", "display_name": "joel goldstick", "link": "https://stackoverflow.com/users/469072/joel-goldstick"}, "is_accepted": true, "score": 1, "last_activity_date": 1470266010, "last_edit_date": 1470266010, "creation_date": 1470265413, "answer_id": 38755008, "question_id": 38754990, "link": "https://stackoverflow.com/questions/38754990/how-to-randomly-select-a-character-everytime-its-needed/38755008#38755008", "title": "How to randomly select a character everytime it&#39;s needed", "body": "<pre><code>import random\n\ndef user_input():\n    chars = 'abcdefghijklmnopqrstuvwxyz'\n    present = random.choice(chars)\n    while True:\n        print present\n        to_eval = raw_input('Enter key: ')\n        if to_eval == present:\n            print 'Correct!'\n            present = random.choice(chars)\n\nuser_input()\n</code></pre>\n\n<p>This will keep asking until correct.  Then pick a new value and continue to loop.  To end you would have to type ctl-c</p>\n"}, {"tags": [], "owner": {"reputation": 812, "user_id": 2867076, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/100003035657402/picture?type=large", "display_name": "Hannes Karppila", "link": "https://stackoverflow.com/users/2867076/hannes-karppila"}, "is_accepted": false, "score": 0, "last_activity_date": 1470265429, "creation_date": 1470265429, "answer_id": 38755011, "question_id": 38754990, "link": "https://stackoverflow.com/questions/38754990/how-to-randomly-select-a-character-everytime-its-needed/38755011#38755011", "title": "How to randomly select a character everytime it&#39;s needed", "body": "<p>It think this is what you want:</p>\n\n<pre><code>import random\n\ndef user_input():\n    while True:\n        chars = 'abcdefghijklmnopqrstuvwxyz'\n        present = random.choice(chars)\n        print present\n        to_eval = raw_input('Enter key: ')\n        if to_eval == present:\n            print 'Correct!'\n            break\n\nuser_input()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14155, "user_id": 632088, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/4b02313659bcb668d49a0075c2de0bc1?s=128&d=identicon&r=PG", "display_name": "robert king", "link": "https://stackoverflow.com/users/632088/robert-king"}, "is_accepted": false, "score": 0, "last_activity_date": 1470265935, "last_edit_date": 1495542156, "creation_date": 1470265935, "answer_id": 38755081, "question_id": 38754990, "link": "https://stackoverflow.com/questions/38754990/how-to-randomly-select-a-character-everytime-its-needed/38755081#38755081", "title": "How to randomly select a character everytime it&#39;s needed", "body": "<p>you could play with <a href=\"https://stackoverflow.com/questions/231767/what-does-the-yield-keyword-do-in-python\">yield</a> to try simplify your code too:</p>\n\n<pre><code>import random\n\ndef guesses():\n    chars = 'abcd..'\n    while True:\n        yield random.choice(chars) == raw_input('Enter Key: ').strip()\n\ndef play():\n    for guess in guesses():\n        if guess:\n            print 'Correct!'\n            break\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 6655543, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f2be3006fe1a660536e03b79804554ff?s=128&d=identicon&r=PG&f=1", "display_name": "Rubyist", "link": "https://stackoverflow.com/users/6655543/rubyist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 38755008, "answer_count": 3, "score": 0, "last_activity_date": 1470266010, "creation_date": 1470265265, "question_id": 38754990, "link": "https://stackoverflow.com/questions/38754990/how-to-randomly-select-a-character-everytime-its-needed", "title": "How to randomly select a character everytime it&#39;s needed", "body": "<p>How do I randomly select a character from a string of characters every time I want it to be changed, for example:</p>\n\n<pre><code>import random\n\ndef user_input():\n    chars = 'abcdefghijklmnopqrstuvwxyz'\n    present = random.choice(chars)\n    while True:\n        print present\n        to_eval = raw_input('Enter key: ')\n        if to_eval == present:\n            print 'Correct!'\n            break\n        else:\n            # change the key and ask again\n\nuser_input()\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 191222, "user_id": 147356, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b9506717d24256a090524dd5505d3207?s=128&d=identicon&r=PG", "display_name": "larsks", "link": "https://stackoverflow.com/users/147356/larsks"}, "edited": false, "score": 0, "creation_date": 1470266715, "post_id": 38754974, "comment_id": 64884112, "body": "The above doesn&#39;t say &quot;not in&quot; anything; it says &quot;TypeError: unhashable type: &#39;set&#39;&quot;, which would hopefully point you in the right direction."}, {"owner": {"reputation": 15387, "user_id": 2588818, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/0PpNx.jpg?s=128&g=1", "display_name": "Two-Bit Alchemist", "link": "https://stackoverflow.com/users/2588818/two-bit-alchemist"}, "edited": false, "score": 0, "creation_date": 1470270088, "post_id": 38754974, "comment_id": 64884943, "body": "Why are you doing this? This is not the way to check variables in Python. Initialize it to <code>None</code> then check if it has been set to something else."}, {"owner": {"reputation": 134, "user_id": 6627929, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-gYr3akmdVpU/AAAAAAAAAAI/AAAAAAAAARs/uynONmJMmI0/photo.jpg?sz=128", "display_name": "Hisham Ragheb", "link": "https://stackoverflow.com/users/6627929/hisham-ragheb"}, "reply_to_user": {"reputation": 15387, "user_id": 2588818, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/0PpNx.jpg?s=128&g=1", "display_name": "Two-Bit Alchemist", "link": "https://stackoverflow.com/users/2588818/two-bit-alchemist"}, "edited": false, "score": 0, "creation_date": 1470272538, "post_id": 38754974, "comment_id": 64886502, "body": "@Two-Bit Alchemist, I am very new to python and adjusting from java to python is still weird to me"}, {"owner": {"reputation": 15387, "user_id": 2588818, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/0PpNx.jpg?s=128&g=1", "display_name": "Two-Bit Alchemist", "link": "https://stackoverflow.com/users/2588818/two-bit-alchemist"}, "edited": false, "score": 0, "creation_date": 1470280723, "post_id": 38754974, "comment_id": 64888349, "body": "@HishamRaghep It&#39;s not the right way in Java either. You would still initialize it to <code>null</code> and then check if the value had changed..."}, {"owner": {"reputation": 134, "user_id": 6627929, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-gYr3akmdVpU/AAAAAAAAAAI/AAAAAAAAARs/uynONmJMmI0/photo.jpg?sz=128", "display_name": "Hisham Ragheb", "link": "https://stackoverflow.com/users/6627929/hisham-ragheb"}, "reply_to_user": {"reputation": 15387, "user_id": 2588818, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/0PpNx.jpg?s=128&g=1", "display_name": "Two-Bit Alchemist", "link": "https://stackoverflow.com/users/2588818/two-bit-alchemist"}, "edited": false, "score": 0, "creation_date": 1470301316, "post_id": 38754974, "comment_id": 64897561, "body": "@Two-Bit Alchemist, Really!!...have you seen that line in the code above &quot;my_set = set()&quot; before posting comments??"}, {"owner": {"reputation": 15387, "user_id": 2588818, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/0PpNx.jpg?s=128&g=1", "display_name": "Two-Bit Alchemist", "link": "https://stackoverflow.com/users/2588818/two-bit-alchemist"}, "edited": false, "score": 0, "creation_date": 1470312282, "post_id": 38754974, "comment_id": 64904820, "body": "What does that have to do with inspecting the running state of the program to &quot;check if (something) is available in scope&quot;? This is what I do not recommend in any language."}], "answers": [{"tags": [], "owner": {"reputation": 62800, "user_id": 391161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/fb76d8bcc69144a3ee4c893ece7fc588?s=128&d=identicon&r=PG&f=1", "display_name": "merlin2011", "link": "https://stackoverflow.com/users/391161/merlin2011"}, "is_accepted": true, "score": 6, "last_activity_date": 1470265363, "creation_date": 1470265363, "answer_id": 38755002, "question_id": 38754974, "link": "https://stackoverflow.com/questions/38754974/why-set-is-not-in-locals-globals-or-vars-dictionaries/38755002#38755002", "title": "Why set is not in locals, globals or vars dictionaries", "body": "<p>You need to quote the name when checking.</p>\n\n<pre><code>&gt;&gt;&gt; my_set = set()\n&gt;&gt;&gt; locals\n&lt;built-in function locals&gt;\n&gt;&gt;&gt; locals()\n{'__builtins__': &lt;module '__builtin__' (built-in)&gt;, '__name__': '__main__', 'my_set': set([]), '__doc__': None, '__package__': None}\n&gt;&gt;&gt; 'my_set' in locals()\nTrue\n&gt;&gt;&gt; \n</code></pre>\n"}], "owner": {"reputation": 134, "user_id": 6627929, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-gYr3akmdVpU/AAAAAAAAAAI/AAAAAAAAARs/uynONmJMmI0/photo.jpg?sz=128", "display_name": "Hisham Ragheb", "link": "https://stackoverflow.com/users/6627929/hisham-ragheb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "accepted_answer_id": 38755002, "answer_count": 1, "score": 0, "last_activity_date": 1470265363, "creation_date": 1470265151, "question_id": 38754974, "link": "https://stackoverflow.com/questions/38754974/why-set-is-not-in-locals-globals-or-vars-dictionaries", "title": "Why set is not in locals, globals or vars dictionaries", "body": "<p>When I try to check if a set is available in current local scope, or in global scope, I always get the below error.</p>\n\n<pre><code>&gt;&gt;my_set = set()\n\n&gt;&gt;my_set in locals()\n&gt;&gt;Traceback (most recent call last):\n\n  File \"&lt;ipython-input-22-47b6756e3345&gt;\", line 1, in &lt;module&gt;\n    my_set in locals()\n\nTypeError: unhashable type: 'set'\n&gt;&gt;my_set in globals()\n&gt;&gt;Traceback (most recent call last):\n\n  File \"&lt;ipython-input-22-47b6755f5503&gt;\", line 1, in &lt;module&gt;\n    my_set in globals()\n\nTypeError: unhashable type: 'set'\n&gt;&gt;my_set in vars()\n&gt;&gt;Traceback (most recent call last):\n\n  File \"&lt;ipython-input-22-47b6755f9947&gt;\", line 1, in &lt;module&gt;\n    my_set in vars()\n\nTypeError: unhashable type: 'set'\n</code></pre>\n\n<p>If set is not in any of these dictionaries (locals, globals or vars), where can I check if a set is defined?</p>\n"}, {"tags": ["python", "pillow"], "answers": [{"comments": [{"owner": {"reputation": 693, "user_id": 2182710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b7bf4e51b8fd7a025687950412e581b?s=128&d=identicon&r=PG", "display_name": "Sr.PEDRO", "link": "https://stackoverflow.com/users/2182710/sr-pedro"}, "edited": false, "score": 1, "creation_date": 1504457612, "post_id": 38754958, "comment_id": 79010850, "body": "you are missing a parentesis on <code>bg = Image.new(&quot;RGBA&quot;, image.size, (0,0,0,255)</code> other than that whits worked great"}, {"owner": {"reputation": 884, "user_id": 380247, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7ba8cab2eb1a3727d54aaf5f3f40d144?s=128&d=identicon&r=PG", "display_name": "Igor Mikushkin", "link": "https://stackoverflow.com/users/380247/igor-mikushkin"}, "edited": false, "score": 0, "creation_date": 1610075862, "post_id": 38754958, "comment_id": 116024160, "body": "For me this produces incorrect results if I use this mask later in SVG. It happens because of differences in the interpretation of alpha and colors. Gamma correction certainly is always applied to colors but should it be applied to alpha? Following produces correct result if you are going to use this mask in SVG: <code>bg = Image.new(&quot;L&quot;, img.size)</code> and then <code>bg.paste(alpha)</code>"}], "tags": [], "owner": {"reputation": 7129, "user_id": 145976, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ff3f0e2ec877feb3800049999f289021?s=128&d=identicon&r=PG", "display_name": "Charlie", "link": "https://stackoverflow.com/users/145976/charlie"}, "is_accepted": true, "score": 4, "last_activity_date": 1504469393, "last_edit_date": 1504469393, "creation_date": 1470265089, "answer_id": 38754958, "question_id": 38754957, "link": "https://stackoverflow.com/questions/38754957/how-does-one-extract-the-alpha-channel-from-an-image-using-pillow/38754958#38754958", "title": "How does one extract the alpha channel from an image using Pillow", "body": "<pre><code># Open the image and convert it to RGBA, just in case it was indexed\nimage = Image.open(image_path).convert('RGBA')\n\n# Extract just the alpha channel\nalpha = image.split()[-1]\n\n# Unfortunately the alpha channel is still treated as such and can't be dumped\n# as-is\n\n# Create a new image with an opaque black background\nbg = Image.new(\"RGBA\", image.size, (0,0,0,255))\n\n# Copy the alpha channel to the new image using itself as the mask\nbg.paste(alpha, mask=alpha)\n\n# Since the bg image started as RGBA, we can save some space by converting it\n# to grayscale ('L') Optionally, we can convert the image to be indexed which\n# saves some more space ('P') In my experience, converting directly to 'P'\n# produces both the Gray channel and an Alpha channel when viewed in GIMP,\n# althogh the file sizes is about the same\nbg.convert('L').convert('P', palette=Image.ADAPTIVE, colors=8).save(\n                                                                mask_path,\n                                                                optimize=True)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 61, "user_id": 8481154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae2a49c741d72a086280a9e5e6e04a71?s=128&d=identicon&r=PG&f=1", "display_name": "Durgan", "link": "https://stackoverflow.com/users/8481154/durgan"}, "is_accepted": false, "score": 1, "last_activity_date": 1610650110, "creation_date": 1610650110, "answer_id": 65725148, "question_id": 38754957, "link": "https://stackoverflow.com/questions/38754957/how-does-one-extract-the-alpha-channel-from-an-image-using-pillow/65725148#65725148", "title": "How does one extract the alpha channel from an image using Pillow", "body": "<p>If you only need one channel, there's a newer, more efficient method for this: image<a href=\"https://pillow.readthedocs.io/en/5.1.x/reference/Image.html#PIL.Image.Image.getchannel\" rel=\"nofollow noreferrer\">.getchannel()</a></p>\n<p>This also returns a new image, of mode &quot;L&quot;, which cuts down on several extra steps for saving.</p>\n<p>For example:</p>\n<pre><code>image = Image.open( inputImagePath ).convert( 'RGBA' )\nalphaChannelImage = image.getchannel( 'A' ) # Mode 'L'\n\n# If you want a paletted image to save space (optional line)\nalphaChannelImage.convert( 'P', palette=Image.ADAPTIVE )\n\nalphaChannelImage.save( outputImagePath )\n</code></pre>\n"}], "owner": {"reputation": 7129, "user_id": 145976, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ff3f0e2ec877feb3800049999f289021?s=128&d=identicon&r=PG", "display_name": "Charlie", "link": "https://stackoverflow.com/users/145976/charlie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3476, "favorite_count": 0, "accepted_answer_id": 38754958, "answer_count": 2, "score": 1, "last_activity_date": 1610650110, "creation_date": 1470265089, "question_id": 38754957, "link": "https://stackoverflow.com/questions/38754957/how-does-one-extract-the-alpha-channel-from-an-image-using-pillow", "title": "How does one extract the alpha channel from an image using Pillow", "body": "<p>How does one export just an alpha mask from a PNG using Pillow?</p>\n\n<p>Ideally, the result would be a grayscale image that represents the alpha channel.</p>\n"}, {"tags": ["python", "html", "beautifulsoup"], "answers": [{"comments": [{"owner": {"reputation": 3252, "user_id": 5121448, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/d03ec9caa5409449cb47f21db2c7c2aa?s=128&d=identicon&r=PG&f=1", "display_name": "carl", "link": "https://stackoverflow.com/users/5121448/carl"}, "edited": false, "score": 0, "creation_date": 1470266292, "post_id": 38754999, "comment_id": 64884006, "body": "yes I tried this, but I get AttributeError: &#39;NavigableString&#39; object has no attribute &#39;next_sibling&#39;"}, {"owner": {"reputation": 10697, "user_id": 2445864, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/jSfSO.jpg?s=128&g=1", "display_name": "Hubert Grzeskowiak", "link": "https://stackoverflow.com/users/2445864/hubert-grzeskowiak"}, "reply_to_user": {"reputation": 3252, "user_id": 5121448, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/d03ec9caa5409449cb47f21db2c7c2aa?s=128&d=identicon&r=PG&f=1", "display_name": "carl", "link": "https://stackoverflow.com/users/5121448/carl"}, "edited": false, "score": 0, "creation_date": 1470267471, "post_id": 38754999, "comment_id": 64884285, "body": "Are you sure you called this on the found element? NavigableString is how BeautifulSoup calls TextNodes. Please check the type of b_el."}, {"owner": {"reputation": 3252, "user_id": 5121448, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/d03ec9caa5409449cb47f21db2c7c2aa?s=128&d=identicon&r=PG&f=1", "display_name": "carl", "link": "https://stackoverflow.com/users/5121448/carl"}, "edited": false, "score": 0, "creation_date": 1470301845, "post_id": 38754999, "comment_id": 64897950, "body": "I included the ouput above"}], "tags": [], "owner": {"reputation": 10697, "user_id": 2445864, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/jSfSO.jpg?s=128&g=1", "display_name": "Hubert Grzeskowiak", "link": "https://stackoverflow.com/users/2445864/hubert-grzeskowiak"}, "is_accepted": true, "score": 21, "last_activity_date": 1470265348, "creation_date": 1470265348, "answer_id": 38754999, "question_id": 38754940, "link": "https://stackoverflow.com/questions/38754940/get-text-after-specific-tag-with-beautiful-soup/38754999#38754999", "title": "get text after specific tag with beautiful soup", "body": "<p>Referring to <a href=\"https://www.crummy.com/software/BeautifulSoup/bs4/doc/#going-sideways\" rel=\"noreferrer\">the docs</a> you might want to use the <code>next_sibling</code> of your <code>b_el</code>:</p>\n\n<pre><code>b_el.next_sibling    # contains \" Test title\"\n</code></pre>\n\n<p>\"Sibling\" in this context is the next node, not the next element/tag. Your element's next node is a text node, so you get the text you want.</p>\n"}], "owner": {"reputation": 3252, "user_id": 5121448, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/d03ec9caa5409449cb47f21db2c7c2aa?s=128&d=identicon&r=PG&f=1", "display_name": "carl", "link": "https://stackoverflow.com/users/5121448/carl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 19825, "favorite_count": 4, "accepted_answer_id": 38754999, "answer_count": 1, "score": 14, "last_activity_date": 1587244701, "creation_date": 1470264999, "last_edit_date": 1587244701, "question_id": 38754940, "link": "https://stackoverflow.com/questions/38754940/get-text-after-specific-tag-with-beautiful-soup", "title": "get text after specific tag with beautiful soup", "body": "<p>I have a text like</p>\n\n<pre><code>page.content = \"&lt;body&gt;&lt;b&gt;Title:&lt;/b&gt; Test title&lt;/body&gt;\"\n</code></pre>\n\n<p>I can get the Title tag with </p>\n\n<pre><code>soup = BeautifulSoup(page.content)\nrecord_el = soup('body')[0]\nb_el = record_el.find('b',text='Title:')\n</code></pre>\n\n<p>but how can I get the text after the b tag? I would like to get the text after the element containing \"Title:\" by referring to that element, and not the body element.</p>\n"}, {"tags": ["python", "numpy", "scipy", "scientific-computing"], "answers": [{"tags": [], "owner": {"reputation": 1103, "user_id": 3223145, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BVTav.jpg?s=128&g=1", "display_name": "Andi", "link": "https://stackoverflow.com/users/3223145/andi"}, "is_accepted": false, "score": 0, "last_activity_date": 1470304542, "creation_date": 1470304542, "answer_id": 38764129, "question_id": 38754937, "link": "https://stackoverflow.com/questions/38754937/why-am-i-getting-valueerror-setting-an-array-element-with-a-sequence-when-us/38764129#38764129", "title": "Why am I getting &quot;ValueError: setting an array element with a sequence.&quot; when using the brute function from Scipy.optimization?", "body": "<p>The <code>scipy.optimize</code> routines call the function with a vector of parameters to be optimized. Your function is thus called as <code>min_params(x, *params)</code>, where the <code>*params</code> are your custom arguments to the function that you supplied to the function using the keyword argument <code>args</code>. The way you define your function <code>x</code> will end up as the first elements of <code>params</code> inside the function.</p>\n\n<p>Assuming that <code>max_pool</code>, <code>r_prob</code>, <code>tau_recov</code> are what you want to optimize over here is how to fix things:</p>\n\n<pre><code>def min_params(params):\n    ...\ny = optimize.brute(min_params, rranges)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6674427, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qSQqN_MlWLQ/AAAAAAAAAAI/AAAAAAAADHE/_5flWO2ztHo/photo.jpg?sz=128", "display_name": "brennan mulligan", "link": "https://stackoverflow.com/users/6674427/brennan-mulligan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 95, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1470304542, "creation_date": 1470264996, "question_id": 38754937, "link": "https://stackoverflow.com/questions/38754937/why-am-i-getting-valueerror-setting-an-array-element-with-a-sequence-when-us", "title": "Why am I getting &quot;ValueError: setting an array element with a sequence.&quot; when using the brute function from Scipy.optimization?", "body": "<p>Working on a model to predict electrophysiological data given a set of parameters. This script is trying to find values for those parameters that give predictions closest to experimental data. I'm running Python 2.7, Scipy 0.17.0, and Numpy 1.10.4. The script is attached below. The line that is getting the error is <code>epsc_sims[n,1] = r_prob*poolsize</code>.</p>\n\n<p>Here is the script:</p>\n\n<pre><code>import scipy.optimize as optimize\nimport numpy as np\nimport math\n\ndef min_params(*params):\n    std_err = 0\n    epsc_exp = np.loadtxt('sample.txt')\n    max_pool = params[0]\n    r_prob = params[1]\n    tau_recov = params[2]\n    poolsize = epsc_exp[0,1]/r_prob\n    epsc_sims = np.copy(epsc_exp)\n    count = epsc_exp.size\n\n    for n in xrange(1 , count/2):\n        poolsize = poolsize - epsc_sims[n-1, 1]\n        poolsize = max_pool + (poolsize - max_pool) * math.exp((epsc_sims[n-1, 0] - epsc_sims[n,0]) / tau_recov)\n        epsc_sims[n,1] = r_prob*poolsize\n        std_err += (epsc_exp[n,1] - epsc_sims[n,1])**2\n\n    std_err /= count\n    return std_err\n\nparams = (1e-8, 0.2, 0.5)\nrranges = (slice(5e-9,5e-8,1e-9), slice(0.1, 0.3, 0.01), slice(0.3, 0.4, 0.01))\ny = optimize.brute(min_params, rranges, args = params)\nprint y\n</code></pre>\n\n<p>And here is the Traceback (most recent call last):</p>\n\n<pre><code>Traceback (most recent call last):\n\n  File \"&lt;ipython-input-25-21d343f36a44&gt;\", line 1, in &lt;module&gt;\n    runfile('C:/Users/brennan/Google Drive/Python Scripts/Inhibitory Model/brute.py', wdir='C:/Users/brennan/Google Drive/Python Scripts/Inhibitory Model')\n\n  File \"D:\\Python\\Anaconda2\\lib\\site-packages\\spyderlib\\widgets\\externalshell\\sitecustomize.py\", line 699, in runfile\n    execfile(filename, namespace)\n\n  File \"D:\\Python\\Anaconda2\\lib\\site-packages\\spyderlib\\widgets\\externalshell\\sitecustomize.py\", line 74, in execfile\n    exec(compile(scripttext, filename, 'exec'), glob, loc)\n\n  File \"C:/Users/brennan/Google Drive/Python Scripts/Inhibitory Model/brute.py\", line 33, in &lt;module&gt;\n    y = optimize.brute(min_params, rranges, args = params)\n\n  File \"D:\\Python\\Anaconda2\\lib\\site-packages\\scipy\\optimize\\optimize.py\", line 2604, in brute\n    Jout = vecfunc(*grid)\n\n  File \"D:\\Python\\Anaconda2\\lib\\site-packages\\numpy\\lib\\function_base.py\", line 1811, in __call__\n    return self._vectorize_call(func=func, args=vargs)\n\n  File \"D:\\Python\\Anaconda2\\lib\\site-packages\\numpy\\lib\\function_base.py\", line 1874, in _vectorize_call\n    ufunc, otypes = self._get_ufunc_and_otypes(func=func, args=args)\n\n  File \"D:\\Python\\Anaconda2\\lib\\site-packages\\numpy\\lib\\function_base.py\", line 1836, in _get_ufunc_and_otypes\n    outputs = func(*inputs)\n\n  File \"D:\\Python\\Anaconda2\\lib\\site-packages\\scipy\\optimize\\optimize.py\", line 2598, in _scalarfunc\n    return func(params, *args)\n\n  File \"C:/Users/brennan/Google Drive/Python Scripts/Inhibitory Model/brute.py\", line 25, in min_params\n    epsc_sims[n,1] = r_prob*poolsize\n\nValueError: setting an array element with a sequence.\n</code></pre>\n\n<p>The text file I use for <code>spikes = np.loadtxt('sample.txt')</code> is formatted as follows with ~3,000 lines:</p>\n\n<pre><code>0.01108 1.223896e-08\n0.03124 6.909375e-09\n0.074   6.2475e-09\n0.07718 3.895625e-09\n</code></pre>\n\n<p>This is my first post on here so please let me know if I need to change anything or provide more info!</p>\n"}, {"tags": ["python", "sorting", "python-3.x"], "comments": [{"owner": {"reputation": 115587, "user_id": 56541, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/Wm7Xg.png?s=128&g=1", "display_name": "David Z", "link": "https://stackoverflow.com/users/56541/david-z"}, "edited": false, "score": 0, "creation_date": 1470264768, "post_id": 38754884, "comment_id": 64883557, "body": "What&#39;s your question, exactly? I can&#39;t tell what you&#39;re asking. (I&#39;m also not entirely clear on the meaning of the first code block you posted. Some of the names appear multiple times, so it doesn&#39;t make sense as an order, unless some of the people are supposed to be contacted multiple times.)"}, {"owner": {"reputation": 14809, "user_id": 53185, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/021d0d3a0676561486d5ec92339e3bb4?s=128&d=identicon&r=PG", "display_name": "mamcx", "link": "https://stackoverflow.com/users/53185/mamcx"}, "reply_to_user": {"reputation": 115587, "user_id": 56541, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/Wm7Xg.png?s=128&g=1", "display_name": "David Z", "link": "https://stackoverflow.com/users/56541/david-z"}, "edited": false, "score": 0, "creation_date": 1470265501, "post_id": 38754884, "comment_id": 64883792, "body": "Each block is a different list. Is necessary to check each value to each column and output the order according I show in the example."}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1470265842, "post_id": 38754884, "comment_id": 64883892, "body": "How many partial lists are there, and how large are they?"}, {"owner": {"reputation": 14809, "user_id": 53185, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/021d0d3a0676561486d5ec92339e3bb4?s=128&d=identicon&r=PG", "display_name": "mamcx", "link": "https://stackoverflow.com/users/53185/mamcx"}, "edited": false, "score": 0, "creation_date": 1470321095, "post_id": 38754884, "comment_id": 64911755, "body": "It vary. The first set are 8."}, {"owner": {"reputation": 14809, "user_id": 53185, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/021d0d3a0676561486d5ec92339e3bb4?s=128&d=identicon&r=PG", "display_name": "mamcx", "link": "https://stackoverflow.com/users/53185/mamcx"}, "edited": false, "score": 0, "creation_date": 1470327338, "post_id": 38754884, "comment_id": 64916491, "body": "What is unclear with this question?"}], "answers": [{"comments": [{"owner": {"reputation": 14809, "user_id": 53185, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/021d0d3a0676561486d5ec92339e3bb4?s=128&d=identicon&r=PG", "display_name": "mamcx", "link": "https://stackoverflow.com/users/53185/mamcx"}, "edited": false, "score": 0, "creation_date": 1470413425, "post_id": 38755079, "comment_id": 64957493, "body": "I try this but the toposort package give a error about Cyclic dependencies."}, {"owner": {"reputation": 115587, "user_id": 56541, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/Wm7Xg.png?s=128&g=1", "display_name": "David Z", "link": "https://stackoverflow.com/users/56541/david-z"}, "reply_to_user": {"reputation": 14809, "user_id": 53185, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/021d0d3a0676561486d5ec92339e3bb4?s=128&d=identicon&r=PG", "display_name": "mamcx", "link": "https://stackoverflow.com/users/53185/mamcx"}, "edited": false, "score": 0, "creation_date": 1470415747, "post_id": 38755079, "comment_id": 64958649, "body": "That means there is no solution to the problem you&#39;re described."}], "tags": [], "owner": {"reputation": 115587, "user_id": 56541, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/Wm7Xg.png?s=128&g=1", "display_name": "David Z", "link": "https://stackoverflow.com/users/56541/david-z"}, "is_accepted": false, "score": 1, "last_activity_date": 1470265930, "creation_date": 1470265930, "answer_id": 38755079, "question_id": 38754884, "link": "https://stackoverflow.com/questions/38754884/merge-and-join-kist-of-list-that-already-sorted-but-with-gaps-in-data-in-python/38755079#38755079", "title": "Merge and join kist of list that already sorted, but with gaps in data in python", "body": "<p>The algorithm you're looking for is <a href=\"https://en.wikipedia.org/wiki/Topological_sorting\" rel=\"nofollow\">topological sorting</a>. Each of your columns defines a dependency relationship among names, and you can put all those dependencies into a graph: each name is a node, and for each pair of consecutive items in a list, there is a directed edge from the first name to the second name (or vice versa, depending on which implementation you use). Just go through each list and create those nodes and edges as you go, then once you're done, run a topological sort algorithm on the resulting graph.</p>\n\n<p>The <a href=\"https://pypi.python.org/pypi/toposort/1.0\" rel=\"nofollow\">toposort package</a> includes a topological sort implementation which is compatible with Python 3 (and 2). It expects a dictionary of sets giving the relationships, which you could construct something like this:</p>\n\n<pre><code>graph = collections.defaultdict(set)\nfor column in columns:\n    for first, second in pairwise(column)\n        graph[second].add(first)\n</code></pre>\n\n<p><code>pairwise</code> is one of the <code>itertools</code> recipies, which you can copy into your code from the package's documentation, or you can use the implementation in the <a href=\"https://pypi.python.org/pypi/more-itertools/\" rel=\"nofollow\"><code>more-itertools</code> package</a>. Once you've constructed the graph, use <code>toposort.toposort_flatten(graph)</code> to get the names in order.</p>\n\n<p>Note that the output may not be entirely deterministic, because there could be some names with no dependency relationship specified - in other words, there's nothing to tell which one should go first.</p>\n"}], "owner": {"reputation": 14809, "user_id": 53185, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/021d0d3a0676561486d5ec92339e3bb4?s=128&d=identicon&r=PG", "display_name": "mamcx", "link": "https://stackoverflow.com/users/53185/mamcx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "closed_date": 1470299197, "answer_count": 1, "score": 0, "last_activity_date": 1470265930, "creation_date": 1470264587, "last_edit_date": 1470265428, "question_id": 38754884, "link": "https://stackoverflow.com/questions/38754884/merge-and-join-kist-of-list-that-already-sorted-but-with-gaps-in-data-in-python", "closed_reason": "Needs details or clarity", "title": "Merge and join kist of list that already sorted, but with gaps in data in python", "body": "<p>I have a weird data import task, where I need to reconstruct the original order of some data based in partial list of it (generated in files from a ancient list with no posibility of get to the inner datastore), where all is in columns:</p>\n\n<p>This represent the order in what each person must be contacted.</p>\n\n<pre><code>COLUMN1\n\nMARTHA LOPES PEREZ\nLEIMAR CONEO BELTRAN \nADALGISA CONEO BELTRAN\nYESMIS LUZ DEDOLLA\nELIJIO ARROYO DIAZ\n\nCOLUMN2\n\nROBERTO MANUEL VILLEGAS\nMARTHA LOPES PEREZ\nLUDIS GUERRA CORONADO\nPATRICIA FABRA MEDINA\nLEIMAR CONEO BELTRAN \nADALGISA CONEO BELTRAN\nYESMIS LUZ DEDOLLA\nELIJIO ARROYO DIAZ\nTEOBALDO MONTIEL SALGADO\n\nCOLUMN3\nLUDIS GUERRA CORONADO\nANDRES ORTEGA DIAZ\nPATRICIA FABRA MEDINA\nLEIMAR CONEO BELTRAN \nELIJIO ARROYO DIAZ\nTEOBALDO MONTIEL SALGADO\nYENIS MONTES ROMEROS\nSANTA PEREZ GAVIRIA\n</code></pre>\n\n<p>With this, I need to re-generate the order of it. This is the desired output:</p>\n\n<pre><code>ROBERTO MANUEL VILLEGAS (Because is before MARTHA)\nMARTHA LOPES PEREZ (Because nobody is behind him)\nLUDIS GUERRA CORONADO (Because is after MARTHA)\nANDRES ORTEGA DIAZ\nPATRICIA FABRA MEDINA\nLEIMAR CONEO BELTRAN \nADALGISA CONEO BELTRAN\nYESMIS LUZ DEDOLLA\nELIJIO ARROYO DIAZ\n....\n....\n</code></pre>\n\n<p>So the value is compared with the all the columns.</p>\n\n<p>I think this is the sort-merge-join as show on:</p>\n\n<p><a href=\"http://sqlity.net/en/1480/a-join-a-day-the-sort-merge-join/\" rel=\"nofollow\">http://sqlity.net/en/1480/a-join-a-day-the-sort-merge-join/</a></p>\n\n<p>I don't need a efficient version, this is only a one-off task.</p>\n"}, {"tags": ["python", "python-2.7", "pyinstaller"], "comments": [{"owner": {"reputation": 5662, "user_id": 5781248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/712de4f2f811d1a400d3311c9cdd5836?s=128&d=identicon&r=PG&f=1", "display_name": "J.J. Hakala", "link": "https://stackoverflow.com/users/5781248/j-j-hakala"}, "edited": false, "score": 1, "creation_date": 1470370233, "post_id": 38754847, "comment_id": 64933017, "body": "Line &quot;Using Python library /lib64/libpython2.7.so.1.0&quot; might indicate a problem if the python installation is located in /opt/python and has the corresponding library in /opt/python/lib or something similar."}, {"owner": {"reputation": 754, "user_id": 2813198, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/0D773.jpg?s=128&g=1", "display_name": "Hec", "link": "https://stackoverflow.com/users/2813198/hec"}, "reply_to_user": {"reputation": 5662, "user_id": 5781248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/712de4f2f811d1a400d3311c9cdd5836?s=128&d=identicon&r=PG&f=1", "display_name": "J.J. Hakala", "link": "https://stackoverflow.com/users/5781248/j-j-hakala"}, "edited": false, "score": 0, "creation_date": 1470372688, "post_id": 38754847, "comment_id": 64933659, "body": "You are right! It&#39;s a library path issue."}], "answers": [{"tags": [], "owner": {"reputation": 754, "user_id": 2813198, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/0D773.jpg?s=128&g=1", "display_name": "Hec", "link": "https://stackoverflow.com/users/2813198/hec"}, "is_accepted": true, "score": 2, "last_activity_date": 1470372972, "creation_date": 1470372972, "answer_id": 38781390, "question_id": 38754847, "link": "https://stackoverflow.com/questions/38754847/getting-module-import-error-while-running-pyinstaller-generated-binary/38781390#38781390", "title": "getting module import error while running PyInstaller generated binary", "body": "<p>PyInstaller needs python to be compiled with <code>--enable-shared and LDFLAGS=-Wl,-rpath=&lt;path to python lib&gt;</code>.</p>\n\n<p>In my case:</p>\n\n<blockquote>\n  <p>./configure --enable-shared --prefix=/opt/python\n  LDFLAGS=-Wl,-rpath=/opt/python/lib</p>\n</blockquote>\n\n<p>Additional reference:\n<a href=\"https://bugs.python.org/issue27685\" rel=\"nofollow\">https://bugs.python.org/issue27685</a></p>\n"}], "owner": {"reputation": 754, "user_id": 2813198, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/0D773.jpg?s=128&g=1", "display_name": "Hec", "link": "https://stackoverflow.com/users/2813198/hec"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1487, "favorite_count": 0, "accepted_answer_id": 38781390, "answer_count": 1, "score": 2, "last_activity_date": 1470372972, "creation_date": 1470264342, "last_edit_date": 1470265261, "question_id": 38754847, "link": "https://stackoverflow.com/questions/38754847/getting-module-import-error-while-running-pyinstaller-generated-binary", "title": "getting module import error while running PyInstaller generated binary", "body": "<p>I'm getting an error while trying to a simple hello.py using PyInstaller on RHEL X64.</p>\n\n<p>Python 2.7.12 is alt installed in /opt/python</p>\n\n<p>Compilation Output:</p>\n\n<pre><code>[root@myrig CommandManager]# pyinstaller Hello.py\n21 INFO: PyInstaller: 3.2\n21 INFO: Python: 2.7.12\n22 INFO: Platform: Linux-3.10.0-327.22.2.el7.x86_64-x86_64-with-redhat-7.2-Maipo\n62 INFO: wrote /home/myuser/CommandManager/Hello.spec\n66 INFO: UPX is not available.\n107 INFO: Extending PYTHONPATH with paths\n['/home/myuser/CommandManager', '/home/myuser/CommandManager']\n107 INFO: checking Analysis\n108 INFO: Building Analysis because out00-Analysis.toc is non existent\n108 INFO: Initializing module dependency graph...\n110 INFO: Initializing module graph hooks...\n148 INFO: running Analysis out00-Analysis.toc\n155 INFO: Caching module hooks...\n158 INFO: Analyzing /home/myuser/CommandManager/Hello.py\n160 INFO: Loading module hooks...\n161 INFO: Loading module hook \"hook-encodings.py\"...\n1493 INFO: Looking for ctypes DLLs\n1493 INFO: Analyzing run-time hooks ...\n1500 INFO: Looking for dynamic libraries\n1801 INFO: Looking for eggs\n1801 INFO: Python library not in binary depedencies. Doing additional searching...\n1827 INFO: Using Python library /lib64/libpython2.7.so.1.0\n1899 INFO: Warnings written to /home/myuser/CommandManager/build/Hello/warnHello.txt\n1983 INFO: checking PYZ\n1983 INFO: Building PYZ because out00-PYZ.toc is non existent\n1983 INFO: Building PYZ (ZlibArchive) /home/myuser/CommandManager/build/Hello/out00-PYZ.pyz\n2465 INFO: checking PKG\n2465 INFO: Building PKG because out00-PKG.toc is non existent\n2465 INFO: Building PKG (CArchive) out00-PKG.pkg\n2648 INFO: Bootloader /opt/python/lib/python2.7/site-packages/PyInstaller/bootloader/Linux-64bit/run\n2648 INFO: checking EXE\n2649 INFO: Building EXE because out00-EXE.toc is non existent\n2649 INFO: Building EXE from out00-EXE.toc\n2690 INFO: Appending archive to ELF section in EXE /home/myuser/CommandManager/build/Hello/Hello\n2991 INFO: checking COLLECT\n2992 INFO: Building COLLECT because out00-COLLECT.toc is non existent\n2993 INFO: Building COLLECT out00-COLLECT.toc\n</code></pre>\n\n<p>Hello.py:</p>\n\n<pre><code>print(\"Hello\")\n</code></pre>\n\n<p>This is the error I'm getting:</p>\n\n<pre><code>mod is NULL - structTraceback (most recent call last):\n  File \"/opt/python/lib/python2.7/struct.py\", line 1, in &lt;module&gt;\n    from _struct import *\nImportError: /home/myuser/CommandManager/dist/Hello/_struct.so: undefined symbol: PyUnicodeUCS2_AsEncodedString\nmod is NULL - pyimod02_archiveTraceback (most recent call last):\n  File \"/tmp/pip-build-xDjNbD/pyinstaller/PyInstaller/loader/pyimod02_archive.py\", line 28, in &lt;module&gt;\nImportError: No module named struct\nmod is NULL - pyimod03_importersTraceback (most recent call last):\n  File \"/tmp/pip-build-xDjNbD/pyinstaller/PyInstaller/loader/pyimod03_importers.py\", line 24, in &lt;module&gt;\nImportError: No module named pyimod02_archive\nTraceback (most recent call last):\n  File \"site-packages/PyInstaller/loader/pyiboot01_bootstrap.py\", line 15, in &lt;module&gt;\nImportError: No module named pyimod03_importers\nFailed to execute script pyiboot01_bootstrap\n</code></pre>\n\n<p>Any clue what may be causing this?</p>\n\n<p>The auto-generated Hello.spec file looks like this:</p>\n\n<pre><code># -*- mode: python -*-\n\nblock_cipher = None\n\n\na = Analysis(['Hello.py'],\n             pathex=['/home/myuser/CommandManager'],\n             binaries=None,\n             datas=None,\n             hiddenimports=[],\n             hookspath=[],\n             runtime_hooks=[],\n             excludes=[],\n             win_no_prefer_redirects=False,\n             win_private_assemblies=False,\n             cipher=block_cipher)\npyz = PYZ(a.pure, a.zipped_data,\n             cipher=block_cipher)\nexe = EXE(pyz,\n          a.scripts,\n          exclude_binaries=True,\n          name='Hello',\n          debug=False,\n          strip=False,\n          upx=True,\n          console=True )\ncoll = COLLECT(exe,\n               a.binaries,\n               a.zipfiles,\n               a.datas,\n               strip=False,\n               upx=True,\n               name='Hello')\n</code></pre>\n"}, {"tags": ["python", "shell", "amazon-ec2", "boto3"], "answers": [{"tags": [], "owner": {"reputation": 11362, "user_id": 5017586, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b6cf237e6b3b0f4e8ed76d138336bed4?s=128&d=identicon&r=PG&f=1", "display_name": "error2007s", "link": "https://stackoverflow.com/users/5017586/error2007s"}, "is_accepted": true, "score": 1, "last_activity_date": 1470271361, "creation_date": 1470271361, "answer_id": 38755787, "question_id": 38754839, "link": "https://stackoverflow.com/questions/38754839/boto3-create-execute-shell-command-terminate-on-ec2-instance/38755787#38755787", "title": "Boto3: create, execute shell command, terminate on ec2 instance", "body": "<p>The boto.manage.cmdshell module can be used to do this.  To use it, you must have the paramiko package installed.  A simple example of it's use:</p>\n\n<pre><code>import boto.ec2\nfrom boto.manage.cmdshell import sshclient_from_instance\n\n# Connect to your region of choice\nconn = boto.ec2.connect_to_region('us-west-2')\n\n# Find the instance object related to my instanceId\ninstance = conn.get_all_instances(['i-12345678'])[0].instances[0]\n\n# Create an SSH client for our instance\n#    key_path is the path to the SSH private key associated with instance\n#    user_name is the user to login as on the instance (e.g. ubuntu, ec2-user, etc.)\nssh_client = sshclient_from_instance(instance,\n                                     '&lt;path to SSH keyfile&gt;',\n                                     user_name='ec2-user')\n# Run the command. Returns a tuple consisting of:\n#    The integer status of the command\n#    A string containing the output of the command\n#    A string containing the stderr output of the command\nstatus, stdout, stderr = ssh_client.run('ls -al')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2608, "user_id": 3556110, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/8Lat5.jpg?s=128&g=1", "display_name": "thclark", "link": "https://stackoverflow.com/users/3556110/thclark"}, "is_accepted": false, "score": 1, "last_activity_date": 1499955928, "creation_date": 1499955928, "answer_id": 45083547, "question_id": 38754839, "link": "https://stackoverflow.com/questions/38754839/boto3-create-execute-shell-command-terminate-on-ec2-instance/45083547#45083547", "title": "Boto3: create, execute shell command, terminate on ec2 instance", "body": "<p>There's a difference between Boto and Boto3. The question specifies boto, but the question title says Boto3.</p>\n\n<p>The accepted answer is correct for boto. But, for boto3, this question is answered <a href=\"https://stackoverflow.com/questions/42645196/how-to-ssh-and-run-commands-in-ec2-using-boto3/45083322#45083322\">here</a> :)</p>\n"}], "owner": {"reputation": 85, "user_id": 1242133, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/0095ab5f29e09153b53068385f7a989d?s=128&d=identicon&r=PG", "display_name": "Ashish Bhumkar", "link": "https://stackoverflow.com/users/1242133/ashish-bhumkar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2544, "favorite_count": 0, "accepted_answer_id": 38755787, "answer_count": 2, "score": 0, "last_activity_date": 1499955928, "creation_date": 1470264291, "question_id": 38754839, "link": "https://stackoverflow.com/questions/38754839/boto3-create-execute-shell-command-terminate-on-ec2-instance", "title": "Boto3: create, execute shell command, terminate on ec2 instance", "body": "<p>I am newbie to <strong>EC2</strong> and <strong>boto</strong>. I have to create an EC2 running instance, where I can send a command with S3 file and execute a shell script. </p>\n\n<p>I searched a lot and found a way with <strong>boto</strong> and <strong>paramiko</strong>. I don't know, whether it is possible to run a shell script in ec2 instance using boto3. Any clue or example in this reference will be a great help.</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["python", "random", "sqlalchemy", "unique", "identifier"], "comments": [{"owner": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 1, "creation_date": 1470265131, "post_id": 38754816, "comment_id": 64883681, "body": "Access it&#39;s int-attribute: <code>uuid.uuid4().int</code> as described in the <a href=\"https://docs.python.org/2/library/uuid.html\" rel=\"nofollow noreferrer\">docs</a>."}, {"owner": {"reputation": 191222, "user_id": 147356, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b9506717d24256a090524dd5505d3207?s=128&d=identicon&r=PG", "display_name": "larsks", "link": "https://stackoverflow.com/users/147356/larsks"}, "edited": false, "score": 0, "creation_date": 1470266826, "post_id": 38754816, "comment_id": 64884133, "body": "Or just use a sequence, which will give you unique integers that just happen to be ordered but who&#39;s to say they weren&#39;t generated randomly and you were just lucky?"}, {"owner": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "reply_to_user": {"reputation": 191222, "user_id": 147356, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b9506717d24256a090524dd5505d3207?s=128&d=identicon&r=PG", "display_name": "larsks", "link": "https://stackoverflow.com/users/147356/larsks"}, "edited": false, "score": 1, "creation_date": 1470267022, "post_id": 38754816, "comment_id": 64884192, "body": "@larsks Try to explain this to some safety-consultant when checking your code :-)"}], "answers": [{"tags": [], "owner": {"reputation": 327, "user_id": 3720614, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HlY6M.jpg?s=128&g=1", "display_name": "talhasch", "link": "https://stackoverflow.com/users/3720614/talhasch"}, "is_accepted": false, "score": 5, "last_activity_date": 1470266793, "creation_date": 1470266793, "answer_id": 38755193, "question_id": 38754816, "link": "https://stackoverflow.com/questions/38754816/sqlalchemy-random-unique-integer/38755193#38755193", "title": "SQLAlchemy : random Unique integer?", "body": "<pre><code>from random import randint \n\ndef random_integer():\n    min_ = 100\n    max_ = 1000000000\n    rand = randint(min_, max_)\n\n    # possibility of same random number is very low.\n    # but if you want to make sure, here you can check id exists in database.\n    from sqlalchemy.orm import sessionmaker\n    db_session_maker = sessionmaker(bind=your_db_engine)\n    db_session = db_session_maker()\n    while db_session.query(Table).filter(uuid == rand).limit(1).first() is not None:\n        rand = randint(min_, max_)\n\n    return rand\n\nclass Table(Base):\n    uuid = Column(String,  default=random_integer, unique=True)\n</code></pre>\n"}], "owner": {"reputation": 5193, "user_id": 1019129, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/357b7f0f0ca6e2c0f0ebccbec9b1a87b?s=128&d=identicon&r=PG", "display_name": "sten", "link": "https://stackoverflow.com/users/1019129/sten"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3442, "favorite_count": 2, "answer_count": 1, "score": 4, "last_activity_date": 1470280898, "creation_date": 1470264126, "last_edit_date": 1470280898, "question_id": 38754816, "link": "https://stackoverflow.com/questions/38754816/sqlalchemy-random-unique-integer", "title": "SQLAlchemy : random Unique integer?", "body": "<p>I can do this to set column type to be unique string :</p>\n\n<pre><code>    uuid = Column(String,  default=lambda: str(uuid.uuid4()), unique=True)\n</code></pre>\n\n<p>but I want to generate <strong>random-unique-integer</strong>, not random-unique-string.</p>\n\n<p>any idea how to do that ?</p>\n\n<hr>\n\n<p>uuid.uuid4().int</p>\n\n<p>thanks. If I can respecify :) is there a way to fit it into DB Integer type.</p>\n"}, {"tags": ["python", "tensorflow", "placeholder", "lstm"], "comments": [{"owner": {"reputation": 53055, "user_id": 419116, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/RmTuo.jpg?s=128&g=1", "display_name": "Yaroslav Bulatov", "link": "https://stackoverflow.com/users/419116/yaroslav-bulatov"}, "edited": false, "score": 0, "creation_date": 1470263746, "post_id": 38754724, "comment_id": 64883234, "body": "Modifying graph between session runs calls give a significant performance penalty, what about creating all of the placeholders ahead of time using <code>tf.placeholder_with_default</code> and only feeding some of them?"}, {"owner": {"reputation": 13, "user_id": 6241618, "user_type": "registered", "profile_image": "https://graph.facebook.com/1233535500008344/picture?type=large", "display_name": "Marek Polewczyk", "link": "https://stackoverflow.com/users/6241618/marek-polewczyk"}, "reply_to_user": {"reputation": 53055, "user_id": 419116, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/RmTuo.jpg?s=128&g=1", "display_name": "Yaroslav Bulatov", "link": "https://stackoverflow.com/users/419116/yaroslav-bulatov"}, "edited": false, "score": 0, "creation_date": 1470264426, "post_id": 38754724, "comment_id": 64883451, "body": "How exactly would &#39;tf.placeholder_with_default&#39; work in my case? I wrote my implementation of LSTM cell. For now I define number of unrollings and feed data for example only for 20 unrollings. I would like to feed the whole batch at once but batches have different lengths. After that I will be able to perform different operations. Theoretically I could append to batches specific number and make them of equal size but then I need to create some mask, moreover multiplication in that case would be a big waste."}, {"owner": {"reputation": 13, "user_id": 6241618, "user_type": "registered", "profile_image": "https://graph.facebook.com/1233535500008344/picture?type=large", "display_name": "Marek Polewczyk", "link": "https://stackoverflow.com/users/6241618/marek-polewczyk"}, "reply_to_user": {"reputation": 53055, "user_id": 419116, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/RmTuo.jpg?s=128&g=1", "display_name": "Yaroslav Bulatov", "link": "https://stackoverflow.com/users/419116/yaroslav-bulatov"}, "edited": false, "score": 0, "creation_date": 1470264738, "post_id": 38754724, "comment_id": 64883546, "body": "Let&#39;s say that I created a list of &#39;tf.placeholder_with_default&#39;. How do I extract then in the graph the placeholders for which the value was feed, not default."}], "owner": {"reputation": 13, "user_id": 6241618, "user_type": "registered", "profile_image": "https://graph.facebook.com/1233535500008344/picture?type=large", "display_name": "Marek Polewczyk", "link": "https://stackoverflow.com/users/6241618/marek-polewczyk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 232, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1470263763, "creation_date": 1470263571, "last_edit_date": 1470263763, "question_id": 38754724, "link": "https://stackoverflow.com/questions/38754724/tensorflow-dynamically-extending-list-of-placeholders", "title": "tensorflow dynamically extending list of placeholders", "body": "<p>I would like to dynamically extend list of placeholders at every iteration of the graph. At the time of graph creation I have to define variable_length which is used in the for loop and then I can accordingly feed the data to the placeholders. I tried to use <code>tf.while_loop</code> and I could extend the list of placeholders, however the feeding process is done before this <code>tf.while_loop</code> and an error occurs:</p>\n\n<pre><code>Error: \"list index is out of range\" \n</code></pre>\n\n<p>code:</p>\n\n<pre><code>   self._train_data = []\n    for _ in range( variable_length ):\n        placeholder_input = tf.placeholder(tf.float32, shape=[self._batch_size, self._input_size])    \n        self._train_data.append(placeholder_input)\n</code></pre>\n\n<p>The execution and feeding is done as below</p>\n\n<pre><code>feed_dict = dict()\nfor i in range(self._num_unrollings + 1):\n   feed_dict[self._train_data[i]] = batches[i]\n\n_, loss_reduced = self._session.run([ self._optimizer, self._loss_reduced], feed_dict=feed_dict)\n</code></pre>\n"}, {"tags": ["python", "3d", "geometry", "computer-vision", "point-clouds"], "comments": [{"owner": {"reputation": 10628, "user_id": 4565947, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e5b166ea39cc61a22e0c04a67ef53bd7?s=128&d=identicon&r=PG&f=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/4565947/julien"}, "edited": false, "score": 0, "creation_date": 1470263973, "post_id": 38754668, "comment_id": 64883306, "body": "You can add the constraint that (a,b,c) must be normed."}, {"owner": {"reputation": 374, "user_id": 4110223, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/b15cae528c5bf1b72f17cf5f9c63150f?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/4110223/tom"}, "reply_to_user": {"reputation": 10628, "user_id": 4565947, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e5b166ea39cc61a22e0c04a67ef53bd7?s=128&d=identicon&r=PG&f=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/4565947/julien"}, "edited": false, "score": 0, "creation_date": 1470264567, "post_id": 38754668, "comment_id": 64883490, "body": "Thanks, could you explain more about how to apply the constraint?"}, {"owner": {"reputation": 10628, "user_id": 4565947, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e5b166ea39cc61a22e0c04a67ef53bd7?s=128&d=identicon&r=PG&f=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/4565947/julien"}, "edited": false, "score": 0, "creation_date": 1470269940, "post_id": 38754668, "comment_id": 64884900, "body": "I don&#39;t have never used sklearn but I&#39;m sure it should have the option somewhere. Otherwise I know scipy.optimize has some good routines that will do it."}, {"owner": {"reputation": 10628, "user_id": 4565947, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e5b166ea39cc61a22e0c04a67ef53bd7?s=128&d=identicon&r=PG&f=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/4565947/julien"}, "edited": false, "score": 1, "creation_date": 1470270074, "post_id": 38754668, "comment_id": 64884936, "body": "Or you can directly plug norm = 1 by using polar angles, i.e. (a,b,c) = (cos theta, sin theta * cos phi, sin theta * sin phi) and fit over (theta, phi, d)."}, {"owner": {"reputation": 3109, "user_id": 6631236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6047c372917941f6961251e7d6967576?s=128&d=identicon&r=PG&f=1", "display_name": "Amitay Nachmani", "link": "https://stackoverflow.com/users/6631236/amitay-nachmani"}, "edited": false, "score": 0, "creation_date": 1470310279, "post_id": 38754668, "comment_id": 64903527, "body": "If you just need a solution you can ran the fit twice. First normally like you did til now and second while changing the axis between Z and X for example and run again. In the second time if you would get a plane through the x axis it will mean that really in your original data you had a plane thorough the z axis. This is not elegant but should work."}, {"owner": {"reputation": 2105, "user_id": 6076911, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-uN56dPJT9f4/AAAAAAAAAAI/AAAAAAAAALM/o4JOjdOOzQQ/photo.jpg?sz=128", "display_name": "David de la Iglesia", "link": "https://stackoverflow.com/users/6076911/david-de-la-iglesia"}, "edited": false, "score": 0, "creation_date": 1470318922, "post_id": 38754668, "comment_id": 64909881, "body": "Hi Tom! Ist the fact of perform the fitting using linear regression a must??. Because you can easily fit the plane to the 3D points using <a href=\"https://en.wikipedia.org/wiki/Principal_component_analysis\" rel=\"nofollow noreferrer\">P.C.A</a>."}, {"owner": {"reputation": 910, "user_id": 5465739, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/5medg.jpg?s=128&g=1", "display_name": "formatkaka", "link": "https://stackoverflow.com/users/5465739/formatkaka"}, "edited": false, "score": 0, "creation_date": 1472148786, "post_id": 38754668, "comment_id": 65647738, "body": "@Tom Hey, what approach did you use to do fitting using RANSAC ?"}], "answers": [{"comments": [{"owner": {"reputation": 111, "user_id": 6652293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0a1f867b3cfbc51abb4504987b2ae53?s=128&d=identicon&r=PG&f=1", "display_name": "AL-ROBOT", "link": "https://stackoverflow.com/users/6652293/al-robot"}, "edited": false, "score": 0, "creation_date": 1532899367, "post_id": 38770513, "comment_id": 90134844, "body": "hi so you wrote: is_floor = cloud.add_scalar_field(&quot;plane_fit&quot;) assuming that you only have 1 plane in the point cloud, right? what if you had several planes? for example, if you had the two dinosaurs in a box/room etc. you would have 6 planes.  Could you write the corresponding code to extract the 6 planes?"}, {"owner": {"reputation": 904, "user_id": 4314223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38be888908e8837e369463870aad12c5?s=128&d=identicon&r=PG&f=1", "display_name": "wafflecat", "link": "https://stackoverflow.com/users/4314223/wafflecat"}, "edited": false, "score": 0, "creation_date": 1576131395, "post_id": 38770513, "comment_id": 104800948, "body": "Is that Three.js in Jupyter notebook?"}], "tags": [], "owner": {"reputation": 2105, "user_id": 6076911, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-uN56dPJT9f4/AAAAAAAAAAI/AAAAAAAAALM/o4JOjdOOzQQ/photo.jpg?sz=128", "display_name": "David de la Iglesia", "link": "https://stackoverflow.com/users/6076911/david-de-la-iglesia"}, "is_accepted": true, "score": 16, "last_activity_date": 1519631248, "last_edit_date": 1592644375, "creation_date": 1470321725, "answer_id": 38770513, "question_id": 38754668, "link": "https://stackoverflow.com/questions/38754668/plane-fitting-in-a-3d-point-cloud/38770513#38770513", "title": "Plane fitting in a 3d point cloud", "body": "<h1>Update</h1>\n<p>This functionality is now integrated in <a href=\"https://github.com/daavoo/pyntcloud\" rel=\"noreferrer\">https://github.com/daavoo/pyntcloud</a> and makes the plane fitting process much simplier:</p>\n<p>Given a point cloud:</p>\n<p><a href=\"https://i.stack.imgur.com/9Ohka.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/9Ohka.png\" alt=\"enter image description here\" /></a></p>\n<p>You just need to add a scalar field like this:</p>\n<pre><code>is_floor = cloud.add_scalar_field(&quot;plane_fit&quot;)\n</code></pre>\n<p>Wich will add a new column with value 1 for the points of the plane fitted.</p>\n<p>You can visualize the scalar field:</p>\n<p><a href=\"https://i.stack.imgur.com/GddK3.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/GddK3.png\" alt=\"enter image description here\" /></a></p>\n<hr />\n<h1>Old answer</h1>\n<p>I think that you could easily use <a href=\"https://en.wikipedia.org/wiki/Principal_component_analysis\" rel=\"noreferrer\">PCA</a> to fit the plane to the 3D points instead of regression.</p>\n<p>Here is a simple PCA implementation:</p>\n<pre><code>def PCA(data, correlation = False, sort = True):\n&quot;&quot;&quot; Applies Principal Component Analysis to the data\n\nParameters\n----------        \ndata: array\n    The array containing the data. The array must have NxM dimensions, where each\n    of the N rows represents a different individual record and each of the M columns\n    represents a different variable recorded for that individual record.\n        array([\n        [V11, ... , V1m],\n        ...,\n        [Vn1, ... , Vnm]])\n\ncorrelation(Optional) : bool\n        Set the type of matrix to be computed (see Notes):\n            If True compute the correlation matrix.\n            If False(Default) compute the covariance matrix. \n            \nsort(Optional) : bool\n        Set the order that the eigenvalues/vectors will have\n            If True(Default) they will be sorted (from higher value to less).\n            If False they won't.   \nReturns\n-------\neigenvalues: (1,M) array\n    The eigenvalues of the corresponding matrix.\n    \neigenvector: (M,M) array\n    The eigenvectors of the corresponding matrix.\n\nNotes\n-----\nThe correlation matrix is a better choice when there are different magnitudes\nrepresenting the M variables. Use covariance matrix in other cases.\n\n&quot;&quot;&quot;\n\nmean = np.mean(data, axis=0)\n\ndata_adjust = data - mean\n\n#: the data is transposed due to np.cov/corrcoef syntax\nif correlation:\n    \n    matrix = np.corrcoef(data_adjust.T)\n    \nelse:\n    matrix = np.cov(data_adjust.T) \n\neigenvalues, eigenvectors = np.linalg.eig(matrix)\n\nif sort:\n    #: sort eigenvalues and eigenvectors\n    sort = eigenvalues.argsort()[::-1]\n    eigenvalues = eigenvalues[sort]\n    eigenvectors = eigenvectors[:,sort]\n\nreturn eigenvalues, eigenvectors\n</code></pre>\n<p>And here is how you could fit the points to a plane:</p>\n<pre><code>def best_fitting_plane(points, equation=False):\n&quot;&quot;&quot; Computes the best fitting plane of the given points\n\nParameters\n----------        \npoints: array\n    The x,y,z coordinates corresponding to the points from which we want\n    to define the best fitting plane. Expected format:\n        array([\n        [x1,y1,z1],\n        ...,\n        [xn,yn,zn]])\n        \nequation(Optional) : bool\n        Set the oputput plane format:\n            If True return the a,b,c,d coefficients of the plane.\n            If False(Default) return 1 Point and 1 Normal vector.    \nReturns\n-------\na, b, c, d : float\n    The coefficients solving the plane equation.\n\nor\n\npoint, normal: array\n    The plane defined by 1 Point and 1 Normal vector. With format:\n    array([Px,Py,Pz]), array([Nx,Ny,Nz])\n    \n&quot;&quot;&quot;\n\nw, v = PCA(points)\n\n#: the normal of the plane is the last eigenvector\nnormal = v[:,2]\n   \n#: get a point from the plane\npoint = np.mean(points, axis=0)\n\n\nif equation:\n    a, b, c = normal\n    d = -(np.dot(normal, point))\n    return a, b, c, d\n    \nelse:\n    return point, normal    \n</code></pre>\n<p>However as this method is sensitive to outliers you could use <a href=\"https://en.wikipedia.org/wiki/RANSAC\" rel=\"noreferrer\">RANSAC</a> to make the fit robust to outliers.</p>\n<p>There is a Python implementation of ransac <a href=\"http://scipy.github.io/old-wiki/pages/Cookbook/RANSAC\" rel=\"noreferrer\">here</a>.</p>\n<p>And you should only need to define a Plane Model class in order to use it for fitting planes to 3D points.</p>\n<p>In any case if you can clean the 3D points from outliers (maybe you could use a KD-Tree S.O.R filter to that) you should get pretty good results with PCA.</p>\n<p>Here is an implementation of an <a href=\"http://pointclouds.org/documentation/tutorials/statistical_outlier.php\" rel=\"noreferrer\">S.O.R</a>:</p>\n<pre><code>def statistical_outilier_removal(kdtree, k=8, z_max=2 ):\n&quot;&quot;&quot; Compute a Statistical Outlier Removal filter on the given KDTree.\n\nParameters\n----------                        \nkdtree: scipy's KDTree instance\n    The KDTree's structure which will be used to\n    compute the filter.\n    \nk(Optional): int\n    The number of nearest neighbors wich will be used to estimate the \n    mean distance from each point to his nearest neighbors.\n    Default : 8\n    \nz_max(Optional): int\n    The maximum Z score wich determines if the point is an outlier or \n    not.\n    \nReturns\n-------\nsor_filter : boolean array\n    The boolean mask indicating wherever a point should be keeped or not.\n    The size of the boolean mask will be the same as the number of points\n    in the KDTree.\n    \nNotes\n-----    \nThe 2 optional parameters (k and z_max) should be used in order to adjust\nthe filter to the desired result.\n\nA HIGHER 'k' value will result(normally) in a HIGHER number of points trimmed.\n\nA LOWER 'z_max' value will result(normally) in a HIGHER number of points trimmed.\n\n&quot;&quot;&quot;\n\ndistances, i = kdtree.query(kdtree.data, k=k, n_jobs=-1) \n\nz_distances = stats.zscore(np.mean(distances, axis=1))\n\nsor_filter = abs(z_distances) &lt; z_max\n\nreturn sor_filter\n</code></pre>\n<p>You could feed the function with a KDtree of your 3D points computed maybe using <a href=\"http://docs.scipy.org/doc/scipy/reference/generated/scipy.spatial.cKDTree.html\" rel=\"noreferrer\">this implementation</a></p>\n"}, {"tags": [], "owner": {"reputation": 1063, "user_id": 674726, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad86a6fd3700c9637781b2b0d4c049ab?s=128&d=identicon&r=PG", "display_name": "Mehdi", "link": "https://stackoverflow.com/users/674726/mehdi"}, "is_accepted": false, "score": 1, "last_activity_date": 1544445554, "creation_date": 1544445554, "answer_id": 53705836, "question_id": 38754668, "link": "https://stackoverflow.com/questions/38754668/plane-fitting-in-a-3d-point-cloud/53705836#53705836", "title": "Plane fitting in a 3d point cloud", "body": "<pre><code>import pcl\ncloud = pcl.PointCloud()\ncloud.from_array(points)\nseg = cloud.make_segmenter_normals(ksearch=50)\nseg.set_optimize_coefficients(True)\nseg.set_model_type(pcl.SACMODEL_PLANE)\nseg.set_normal_distance_weight(0.05)\nseg.set_method_type(pcl.SAC_RANSAC)\nseg.set_max_iterations(100)\nseg.set_distance_threshold(0.005)\ninliers, model = seg.segment()\n</code></pre>\n\n<p>you need to install <a href=\"https://github.com/strawlab/python-pcl\" rel=\"nofollow noreferrer\">python-pcl</a> first. Feel free to play with the parameters. points here is a nx3 numpy array with n 3d points. Model will be [a, b, c, d] such that ax + by + cz + d = 0</p>\n"}], "owner": {"reputation": 374, "user_id": 4110223, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/b15cae528c5bf1b72f17cf5f9c63150f?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/4110223/tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 20806, "favorite_count": 8, "accepted_answer_id": 38770513, "answer_count": 2, "score": 10, "last_activity_date": 1599482185, "creation_date": 1470263219, "question_id": 38754668, "link": "https://stackoverflow.com/questions/38754668/plane-fitting-in-a-3d-point-cloud", "title": "Plane fitting in a 3d point cloud", "body": "<p>I am trying to find planes in a 3d point cloud, using the regression formula <a href=\"https://en.wikipedia.org/wiki/Plane_(geometry)\" rel=\"noreferrer\">Z= a<em>X + b</em>Y +C</a> </p>\n\n<p>I implemented least squares and ransac solutions,\n but the 3 parameters equation limits the plane fitting to 2.5D- the formula can not be applied on planes parallel to the Z-axis.</p>\n\n<p>My question is <strong>how can I generalize the plane fitting to full 3d</strong>?\nI want to add the fourth parameter in order to get the full equation\n a<em>X +b</em>Y +c*Z + d \nhow can I avoid the trivial (0,0,0,0) solution?</p>\n\n<p>Thanks!</p>\n\n<p>The Code I'm using:</p>\n\n<pre><code>from sklearn import linear_model\n\ndef local_regression_plane_ransac(neighborhood):\n    \"\"\"\n    Computes parameters for a local regression plane using RANSAC\n    \"\"\"\n\n    XY = neighborhood[:,:2]\n    Z  = neighborhood[:,2]\n    ransac = linear_model.RANSACRegressor(\n                                          linear_model.LinearRegression(),\n                                          residual_threshold=0.1\n                                         )\n    ransac.fit(XY, Z)\n\n    inlier_mask = ransac.inlier_mask_\n    coeff = model_ransac.estimator_.coef_\n    intercept = model_ransac.estimator_.intercept_\n</code></pre>\n"}, {"tags": ["python", "sql", "impala"], "comments": [{"owner": {"reputation": 1261, "user_id": 3137702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90f22baaf5a8cbb8ff1db92aef5ec5cb?s=128&d=identicon&r=PG&f=1", "display_name": "alzee", "link": "https://stackoverflow.com/users/3137702/alzee"}, "edited": false, "score": 0, "creation_date": 1470263754, "post_id": 38754667, "comment_id": 64883237, "body": "Why not just run them separately to begin with, into separate csv files?"}, {"owner": {"reputation": 3, "user_id": 6674429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af964bc79dbff1fc50093b2aaf9fe58d?s=128&d=identicon&r=PG&f=1", "display_name": "Lian Bleu", "link": "https://stackoverflow.com/users/6674429/lian-bleu"}, "reply_to_user": {"reputation": 1261, "user_id": 3137702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90f22baaf5a8cbb8ff1db92aef5ec5cb?s=128&d=identicon&r=PG&f=1", "display_name": "alzee", "link": "https://stackoverflow.com/users/3137702/alzee"}, "edited": false, "score": 0, "creation_date": 1470264783, "post_id": 38754667, "comment_id": 64883565, "body": "I am not too informed about is so correct me if I am wrong, but I was under the impression that running them as one multiple query instead of a bunch of them separately would have some performance benefit.  I will also need to rejoin the separate CSV files in order to make some joins on their results with other query results."}, {"owner": {"reputation": 1261, "user_id": 3137702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90f22baaf5a8cbb8ff1db92aef5ec5cb?s=128&d=identicon&r=PG&f=1", "display_name": "alzee", "link": "https://stackoverflow.com/users/3137702/alzee"}, "edited": false, "score": 0, "creation_date": 1470264935, "post_id": 38754667, "comment_id": 64883613, "body": "Some potential but negligible performance benefit is pointless if the solution doesn&#39;t work to begin with.  Preemptive tuning is usually a bad idea.  Get it working first, then optimize."}, {"owner": {"reputation": 3, "user_id": 6674429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af964bc79dbff1fc50093b2aaf9fe58d?s=128&d=identicon&r=PG&f=1", "display_name": "Lian Bleu", "link": "https://stackoverflow.com/users/6674429/lian-bleu"}, "reply_to_user": {"reputation": 1261, "user_id": 3137702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90f22baaf5a8cbb8ff1db92aef5ec5cb?s=128&d=identicon&r=PG&f=1", "display_name": "alzee", "link": "https://stackoverflow.com/users/3137702/alzee"}, "edited": false, "score": 0, "creation_date": 1470265833, "post_id": 38754667, "comment_id": 64883888, "body": "Agreed on optimization last but that&#39;s what this is, I have a working version that does it individually as you suggested.   I am a student; after showing the professors that I am creating this for, they wanted me to bundle them all together and run them in a batch and I assumed the reason was efficiency. Thanks for the help so far though."}], "answers": [{"tags": [], "owner": {"reputation": 2462, "user_id": 5613485, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/T9eFC.png?s=128&g=1", "display_name": "Zoltan", "link": "https://stackoverflow.com/users/5613485/zoltan"}, "is_accepted": false, "score": 0, "last_activity_date": 1473433585, "last_edit_date": 1473433585, "creation_date": 1472747259, "answer_id": 39276579, "question_id": 38754667, "link": "https://stackoverflow.com/questions/38754667/separating-multiple-query-results/39276579#39276579", "title": "Separating multiple query results", "body": "<p>You could insert your own separators by issuing some extra queries, for example <code>select '-----';</code> between the real queries.</p>\n\n<p>Writing results of individual queries to local files is not yet possible, but there is already a feature request for it (<a href=\"https://issues.cloudera.org/browse/IMPALA-2073\" rel=\"nofollow\">IMPALA-2073</a>). You can, however, easily save query results into HDFS as CSV files. You just have to create a new table to store the results specifying <code>row format delimited fields terminated by ','</code>, then use <code>insert into table [...] select [...]</code> to populate it. Please refer to the documentation sections <a href=\"http://www.cloudera.com/documentation/enterprise/latest/topics/impala_txtfile.html\" rel=\"nofollow\">Using Text Data Files with Impala Tables</a> and <a href=\"http://www.cloudera.com/documentation/enterprise/latest/topics/impala_insert.html\" rel=\"nofollow\">INSERT Statement</a> for details.</p>\n\n<p>One comment suggested running the individual queries as separate commands and saving their results into separate CSV files. If you choose this solution, please be aware that DDL statements like <code>create table</code> are only guaranteed to take immediate effect in the connection in which they were issued. This means that creating a table and then immediately querying it in another impala shell is prone to failure. Even if you find that it works correctly, it may fail the next time you run it. On the other hand, running such queries one after the other in the same shell is always okay.</p>\n"}], "owner": {"reputation": 3, "user_id": 6674429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af964bc79dbff1fc50093b2aaf9fe58d?s=128&d=identicon&r=PG&f=1", "display_name": "Lian Bleu", "link": "https://stackoverflow.com/users/6674429/lian-bleu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 484, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1473433585, "creation_date": 1470263202, "question_id": 38754667, "link": "https://stackoverflow.com/questions/38754667/separating-multiple-query-results", "title": "Separating multiple query results", "body": "<p>I am running multiple (about 60) queries in impala using impala shell from a file and outputting to a file. I am using :</p>\n\n<pre><code>impala-shell -q \"query_here; query_here; etc;\" -o output_path.csv -B --output_delimiter=','\n</code></pre>\n\n<p>The issue is that they are not separated between queries, so query 2 would be directly appended as a new row right onto the bottom of query 1. I need to separate the results to math them up with each query, however I do not know where each query's results are done and another begins because it is a continuous CSV file.</p>\n\n<p>Is there a way to run multiple queries like this and leave some type of space or delimiter between query results or any way to separate the results by which query they came from? </p>\n\n<p>Thanks.</p>\n"}, {"tags": ["python", "twitter"], "owner": {"reputation": 171, "user_id": 2804064, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/89968a1a021ba7d17e106b5db427ec8d?s=128&d=identicon&r=PG&f=1", "display_name": "user2804064", "link": "https://stackoverflow.com/users/2804064/user2804064"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 288, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1470262905, "creation_date": 1470262905, "question_id": 38754615, "link": "https://stackoverflow.com/questions/38754615/tweets-streaming-how-to-set-tweets-number-limit", "title": "Tweets streaming: How to set tweets number limit?", "body": "<p>I used a python script to stream tweets and store them in a Mongodb database using tweepy. Everything was working just fine, but when I tried to set a limit for the number of tweets, tweets are no longer retrieved, I can't see the error, could you please help?</p>\n\n<p><code>class MyListener(StreamListener):</code></p>\n\n<pre><code>  def __init__(self, num_tweets, max_tweets=60):\n        self.numTweets = num_tweets\n        self.limit = max_tweets\n\ndef on_data(self, data):\n    print(\"tweet\")\n     while self.numTweets &lt; self.limit:\n        #self.numTweets+=1\n        try:\n            client = MongoClient()\n            db = client['twitter1_db']\n            collection = db['twitter1_collection']\n            tweet = json.loads(data)\n            collection.insert_one(tweet)\n            print(tweet)\n            self.numTweets= self.numTweets+ 1\n            return True\n        except BaseException as e:\n            print(\"Error on_data: %s\" % str(e))\n        return True\n\ndef on_error(self, status):\n    print(status)`\n</code></pre>\n\n<p><code>twitter_stream = Stream(auth, MyListener(num_tweets, max_tweets))\ntwitter_stream.filter(track=Keywords_list)</code>  </p>\n"}, {"tags": ["python", "amazon-web-services", "import", "pymysql"], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 6674428, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ehfTv.jpg?s=128&g=1", "display_name": "Darth Vadr", "link": "https://stackoverflow.com/users/6674428/darth-vadr"}, "edited": false, "score": 0, "creation_date": 1470345887, "post_id": 38754838, "comment_id": 64926720, "body": "Thanks for this. It worked! Now I have to figure out why its failing on pymysql.connect. But that will be a separate question ;)"}], "tags": [], "owner": {"reputation": 2348, "user_id": 553029, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f0c0e9df094021d5625b3707c54714?s=128&d=identicon&r=PG", "display_name": "Yasel", "link": "https://stackoverflow.com/users/553029/yasel"}, "is_accepted": false, "score": 4, "last_activity_date": 1470264279, "last_edit_date": 1592644375, "creation_date": 1470264279, "answer_id": 38754838, "question_id": 38754595, "link": "https://stackoverflow.com/questions/38754595/aws-unable-to-import-module-app-no-module-named-pymysql/38754838#38754838", "title": "AWS Unable to import module &#39;app&#39; : no module named Pymysql", "body": "<p>You must package all your  project dependency in your deployment.</p>\n<ol>\n<li><p>Copy from your virtual environment the package PyMysql, to the\nroot of directory where your code lives.</p>\n</li>\n<li><p>Create a zip, and upload it to lambda function</p>\n<p>See the <a href=\"http://docs.aws.amazon.com/es_es/lambda/latest/dg/lambda-python-how-to-create-deployment-package.html\" rel=\"nofollow noreferrer\">docs</a></p>\n</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 535, "user_id": 3356424, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/ad19a78db7079b72dfc59549608e934a?s=128&d=identicon&r=PG&f=1", "display_name": "khanna", "link": "https://stackoverflow.com/users/3356424/khanna"}, "is_accepted": false, "score": 0, "last_activity_date": 1584981714, "creation_date": 1584981714, "answer_id": 60817861, "question_id": 38754595, "link": "https://stackoverflow.com/questions/38754595/aws-unable-to-import-module-app-no-module-named-pymysql/60817861#60817861", "title": "AWS Unable to import module &#39;app&#39; : no module named Pymysql", "body": "<ol>\n<li><code>mkdir pymysql-layer/</code> </li>\n<li><code>cd pymysql-layer/</code></li>\n<li><p>put in the following files:</p>\n\n<ul>\n<li><strong>get_layer_packages.sh</strong></li>\n</ul>\n\n<p>export PKG_DIR=\"python\"</p>\n\n<p>rm -rf ${PKG_DIR} &amp;&amp; mkdir -p ${PKG_DIR}</p>\n\n<p>docker run --rm -v $(pwd):/foo -w /foo lambci/lambda:build-python3.6 \\\n    pip install -r requirements.txt --no-deps -t ${PKG_DIR}</p>\n\n<ul>\n<li><strong>requirements.txt</strong></li>\n</ul>\n\n<p>pymysql</p>\n\n<p>sqlalchemy</p></li>\n<li><p>then run : <code>chmod +x get_layer_packages.sh</code></p></li>\n<li>then run : <code>./get_layer_packages.sh</code></li>\n<li>finally, run <code>'zip -r mysql.zip .</code></li>\n</ol>\n\n<p>Prefer uploading to S3 and then import <code>s3:// path</code>  into the lambda layer while creating it</p>\n"}], "owner": {"reputation": 71, "user_id": 6674428, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ehfTv.jpg?s=128&g=1", "display_name": "Darth Vadr", "link": "https://stackoverflow.com/users/6674428/darth-vadr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11786, "favorite_count": 1, "answer_count": 2, "score": 6, "last_activity_date": 1584981714, "creation_date": 1470262796, "last_edit_date": 1470264110, "question_id": 38754595, "link": "https://stackoverflow.com/questions/38754595/aws-unable-to-import-module-app-no-module-named-pymysql", "title": "AWS Unable to import module &#39;app&#39; : no module named Pymysql", "body": "<p>I am using the AWS Console and trying to add data to a MySQL table using a Lambda function. Whenever I try to test the function, I get the following error: </p>\n\n<blockquote>\n  <p>Unable to import module 'app' : no module named pymysql</p>\n</blockquote>\n\n<p>Its acting like pymysql is not in the path. I went into the microEC2 instance and pip'ed pymysql. But it still doesn't work. I have tried zipping my code into a file and uploading and also copying and pasting the code into the console and running it. Neither works. Any help would be greatly appreciated.</p>\n\n<p>Here is a code snippet:</p>\n\n<pre><code>import sys\n\nimport logging\n\nimport pymysql\n\ndef main(event, context):\n</code></pre>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 1854, "user_id": 6539544, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0075a1be0f17b9ac03dbb0b9b27d5aab?s=128&d=identicon&r=PG&f=1", "display_name": "Vaibhav Bajaj", "link": "https://stackoverflow.com/users/6539544/vaibhav-bajaj"}, "edited": false, "score": 4, "creation_date": 1470262538, "post_id": 38754537, "comment_id": 64882861, "body": "Indent your <code>else</code> statement to fix the error!"}, {"owner": {"reputation": 5307, "user_id": 2372812, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/atrZ9.jpg?s=128&g=1", "display_name": "Tom Dalton", "link": "https://stackoverflow.com/users/2372812/tom-dalton"}, "edited": false, "score": 1, "creation_date": 1470262864, "post_id": 38754537, "comment_id": 64882974, "body": "I&#39;m surprised the empty <code>else:</code> clause (without a <code>pass</code>) didn&#39;t trigger a syntax error."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1470263744, "post_id": 38754537, "comment_id": 64883233, "body": "Sounds like you screwed up your indentation even further when you posted your code here, and your <code>else</code> was originally attached to the <code>for</code> instead of the <code>if</code>."}, {"owner": {"reputation": 1, "user_id": 6674420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7070c14fd3cb2bfef3dda6910b0fcb2?s=128&d=identicon&r=PG&f=1", "display_name": "ACoolGuy", "link": "https://stackoverflow.com/users/6674420/acoolguy"}, "edited": false, "score": 0, "creation_date": 1470264035, "post_id": 38754537, "comment_id": 64883324, "body": "The same effect is produced despite amending the previously incorrect indentation of the &#39;else&#39; statement."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1470264544, "post_id": 38754537, "comment_id": 64883479, "body": "&quot;Extraordinary claims require extraordinary evidence&quot;. Executing both the <code>if</code> and <code>else</code> clauses is exactly what you could expect to occur if your <code>else</code> clause were aligned with the <code>for</code> block, whereas it would require more code than is given in your question to reproduce absent such an error."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1470264612, "post_id": 38754537, "comment_id": 64883508, "body": "If you <b>really can</b> come up with a standalone reproducer that creates the bug even with fixed indentation, by all means post it (editing your post will put it in the queue for re-opening) -- but make sure that it really <i>is</i> a standalone reproducer, as the claim being made is extraordinary enough to put the onus on you to prove your case."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1470264702, "post_id": 38754537, "comment_id": 64883533, "body": "See  <a href=\"http://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a> for guidance -- being a fully standalone reproducer ideally means you have no <code>input</code> or <code>raw_input</code> commands, and no dependency on variables not established, but rather hardcode constant values that will create the problem you&#39;re trying to show 100% of the time when copied-and-pasted from your question (and have trimmed any code not absolutely necessary to showcase that problem)."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 1, "creation_date": 1470265023, "post_id": 38754537, "comment_id": 64883640, "body": "BTW -- editing a question or answer in a manner that makes its content inaccessible is considered vandalism."}], "answers": [{"comments": [{"owner": {"reputation": 1854, "user_id": 6539544, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0075a1be0f17b9ac03dbb0b9b27d5aab?s=128&d=identicon&r=PG&f=1", "display_name": "Vaibhav Bajaj", "link": "https://stackoverflow.com/users/6539544/vaibhav-bajaj"}, "edited": false, "score": 2, "creation_date": 1470262573, "post_id": 38754551, "comment_id": 64882879, "body": "A comment would suffice"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1470263798, "post_id": 38754551, "comment_id": 64883252, "body": "This just produces a <i>different</i> wrong result."}, {"owner": {"reputation": 1, "user_id": 6674420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7070c14fd3cb2bfef3dda6910b0fcb2?s=128&d=identicon&r=PG&f=1", "display_name": "ACoolGuy", "link": "https://stackoverflow.com/users/6674420/acoolguy"}, "edited": false, "score": 0, "creation_date": 1470263876, "post_id": 38754551, "comment_id": 64883280, "body": "Even so, the same effect is produced."}], "tags": [], "owner": {"reputation": 6004, "user_id": 6471538, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Robert Columbia", "link": "https://stackoverflow.com/users/6471538/robert-columbia"}, "is_accepted": false, "score": 1, "last_activity_date": 1470262556, "creation_date": 1470262556, "answer_id": 38754551, "question_id": 38754537, "link": "https://stackoverflow.com/questions/38754537/my-python-script-seems-to-be-executing-an-if-and-else-statement-simultaneous/38754551#38754551", "title": "My Python script seems to be executing an &#39;if&#39; and &#39;else&#39; statement simultaneous, resulting in an incorrect output. Any way to resolve this issue?", "body": "<p>You missed some whitespace.</p>\n\n<pre><code>for (i, word) in enumerate(words):\n    if (word == keyword): \n        print(\"Your key word,'\",keyword,\"'appears in positions '\",(i+1), \"of your inputted sentence.\")\n    else:\n        print(\"Your entered word\",keyword,\"is not present in the sentence you entered.\")\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6674420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7070c14fd3cb2bfef3dda6910b0fcb2?s=128&d=identicon&r=PG&f=1", "display_name": "ACoolGuy", "link": "https://stackoverflow.com/users/6674420/acoolguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "closed_date": 1470264421, "answer_count": 1, "score": -1, "last_activity_date": 1470264985, "creation_date": 1470262469, "last_edit_date": 1470264985, "question_id": 38754537, "link": "https://stackoverflow.com/questions/38754537/my-python-script-seems-to-be-executing-an-if-and-else-statement-simultaneous", "closed_reason": "Not suitable for this site", "title": "My Python script seems to be executing an &#39;if&#39; and &#39;else&#39; statement simultaneous, resulting in an incorrect output. Any way to resolve this issue?", "body": "<p>I am currently coding a script that is able to list the relative position(s) of a word inputted by a user in a sentence that has also been user-inputted. </p>\n\n<p>For example, the user may input the sentence: \"I love Stockoverflow and I love it with a passion\".</p>\n\n<p>If the user was to subsequently input the word 'love' when prompted, the system would automatically scan through the inputted sentence for the word 'love'. If in the inputted sentence, the position(s) to which the word composes the sentence are outputted, in this case: 'Love' appears in positions 2 and 5 in the sentence.</p>\n\n<p>Despite this, the system outputs 'Word could not be found' AS WELL AS the relative positions of the word.</p>\n\n<p>Any help? The system would appear to execute the 'if' and 'else' statement despite either one of the statements being inapplicable to the context of the inputted word.</p>\n\n<p>My code is as follows:</p>\n\n<pre><code>sentence= input(\"Please enter a sentence: \")\nkeyword= input(\"Input a keyword from the sentence: \").lower()\nwords = sentence.lower()\nwords = sentence.split()\nfor (i, word) in enumerate(words):\n    if (word == keyword): \n        print(\"Your key word,'\",keyword,\"'appears in positions '\",(i+1), \"of your inputted sentence.\")\n    else:\n    print(\"Your entered word\",keyword,\"is not present in the sentence you entered.\")\n</code></pre>\n\n<p>Its typical outputs:</p>\n\n<pre><code>Python 3.5.1 (default, Dec 2015, 13:05:11)\n[GCC 4.8.2] on linux\n\nPlease enter a sentence:  Is Stockoverflow this.\nInput a keyword from the sentence:  This\nYour key word,' this 'appears in positions ' 3 'of your inputted sentence.\nYour entered word this is not present in the sentence you entered.\n=&gt; None\n</code></pre>\n\n<p>Any help would be greatly appreciated!</p>\n"}, {"tags": ["python", "matplotlib"], "owner": {"reputation": 1395, "user_id": 6359147, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/7a72bf7b3d8598739568189ccd448ecc?s=128&d=identicon&r=PG&f=1", "display_name": "vandelay", "link": "https://stackoverflow.com/users/6359147/vandelay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 277, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1470262302, "creation_date": 1470262302, "question_id": 38754510, "link": "https://stackoverflow.com/questions/38754510/matplotlib-candlestick-ochl-and-pandas-dataframe", "title": "Matplotlib candlestick_ochl and pandas dataframe", "body": "<p>I'm trying to plot candlestick in matplotlib. But it just shows an empty graph(see pic). I'm not getting any errors in my console. And wondering what may be wrong?</p>\n\n<pre><code>print(df.head(5))\n\n             Open   High    Low  Close    Volume\nDate                                            \n2013-11-19  274.9  275.0  268.5  270.3  671065.0\n2013-11-20  270.0  273.0  267.5  269.5  381580.0\n2013-11-21  268.0  273.0  265.5  271.5  313084.0\n2013-11-22  272.5  272.5  266.2  267.5  486462.0\n2013-11-25  269.5  274.7  269.5  273.7  412056.0\n\nimport pandas as pd\nimport matplotlib.pyplot as plt\nfrom matplotlib.finance import candlestick_ochl\n\nfig = plt.figure()\nax1 = plt.subplot2grid((4,4), (0,0), rowspan=3, colspan=4)\n\ncandlestick_ochl(ax1, \n                [date2num(df.index.tolist()), df['Open'], df['Close'], df['High'], df['Low']], \n                width=1, \n                colorup='g', \n                colordown='r')\n\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/ntHes.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ntHes.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "memory-leaks", "openni"], "owner": {"reputation": 41, "user_id": 4778464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01741f8d6cd709a2b3b4ad568516aa8a?s=128&d=identicon&r=PG&f=1", "display_name": "qwerty123", "link": "https://stackoverflow.com/users/4778464/qwerty123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 128, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1559030754, "creation_date": 1470262284, "question_id": 38754503, "link": "https://stackoverflow.com/questions/38754503/openni-read-frame-memory-leak", "title": "OpenNI read_frame() Memory Leak", "body": "<p>Each time stream.read_frame() is called, memory is leaked. Even if I manually gc.collect(), it still leaks. If the code below runs for a few hours, it runs out of memory and crashes with python out of memory exception.</p>\n\n<p>I can't dereference depth_stream in the start function, because then there will be nothing to read from. Is there either another way to handle this through python or a built in way in the OpenNI2 library?</p>\n\n<pre><code>from primesense import openni2\nfrom memory_profiler import profile\nimport gc\n\ndef start():\n    openni2.initialize()\n    dev = openni2.Device.open_any()\n    depth_stream = dev.create_depth_stream()\n    depth_stream.start()\n    while True:\n        frame_stuff(depth_stream)\n    depth_stream.stop()\n    openni2.unload()\n\n@profile   \ndef frame_stuff(stream):\n    frame = stream.read_frame()\n    frame_data = frame.get_buffer_as_uint16()\n    del frame\n    del frame_data\n    gc.collect()\n    return 0\n</code></pre>\n\n<p>================================================</p>\n\n<pre><code>15     46.4 MiB      0.0 MiB   @profile\n16                             def frame_stuff(stream):\n17     46.5 MiB      0.1 MiB       frame = stream.read_frame()\n18     46.5 MiB      0.0 MiB       frame_data = frame.get_buffer_as_uint16()\n19     46.5 MiB      0.0 MiB       del frame\n20     46.5 MiB      0.0 MiB       del frame_data\n21     46.5 MiB      0.0 MiB       gc.collect()\n22     46.5 MiB      0.0 MiB       return 0 \n</code></pre>\n"}, {"tags": ["python", "pandas", "numpy", "resampling"], "comments": [{"owner": {"reputation": 107245, "user_id": 644898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2833d485728ee2f603802242ebc9826?s=128&d=identicon&r=PG", "display_name": "Jeff", "link": "https://stackoverflow.com/users/644898/jeff"}, "edited": false, "score": 0, "creation_date": 1470269542, "post_id": 38754493, "comment_id": 64884788, "body": "you can now do this directory in 0.19.0 (coming soon); <a href=\"http://pandas-docs.github.io/pandas-docs-travis/whatsnew.html#whatsnew-0190-enhancements-rolling-ts\" rel=\"nofollow noreferrer\">pandas-docs.github.io/pandas-docs-travis/&hellip;</a> and see linked docs"}, {"owner": {"reputation": 73072, "user_id": 283296, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/ilsZ4.jpg?s=128&g=1", "display_name": "Amelio Vazquez-Reina", "link": "https://stackoverflow.com/users/283296/amelio-vazquez-reina"}, "reply_to_user": {"reputation": 107245, "user_id": 644898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2833d485728ee2f603802242ebc9826?s=128&d=identicon&r=PG", "display_name": "Jeff", "link": "https://stackoverflow.com/users/644898/jeff"}, "edited": false, "score": 0, "creation_date": 1470272748, "post_id": 38754493, "comment_id": 64886536, "body": "Thanks @Jeff ! I can use the version in <code>master</code>. How exactly would you solve this problem with <code>rolling</code> (or some other method?)"}], "answers": [{"tags": [], "owner": {"reputation": 26041, "user_id": 3339965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ac89d084d3bc5dc083bad3ea5518f11?s=128&d=identicon&r=PG&f=1", "display_name": "root", "link": "https://stackoverflow.com/users/3339965/root"}, "is_accepted": false, "score": 1, "last_activity_date": 1470264691, "last_edit_date": 1470264691, "creation_date": 1470263839, "answer_id": 38754772, "question_id": 38754493, "link": "https://stackoverflow.com/questions/38754493/efficient-data-sampling-with-sparse-timestamps-on-a-pre-defined-date-range/38754772#38754772", "title": "Efficient data sampling with sparse timestamps on a pre-defined date range", "body": "<p>You can do a <code>groupby</code> on <code>'item_id'</code> and call <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.reindex.html\" rel=\"nofollow\"><code>reindex</code></a> on each group:</p>\n\n<pre><code># Define the new time interval.\nnew_dates = pd.date_range('2016-07-15', '2016-07-31', name='date')\n\n# Set the current time stamp as the index and perform the groupby.\ndf = df.set_index(['tstamp'])\ndf = df.groupby('item_id').apply(lambda grp: grp['budget'].reindex(new_dates, method='ffill').to_frame())\n\n# Reset the index to remove 'item_id' and 'date' from the index.\ndf = df.reset_index()\n</code></pre>\n\n<p>Another option is to <code>pivot</code>, <code>reindex</code>, and <code>unstack</code>:</p>\n\n<pre><code># Define the new time interval.\nnew_dates = pd.date_range('2016-07-15', '2016-07-31', name='date')\n\n# Pivot to have 'item_id' columns with 'budget' values.\ndf = df.pivot(index='tstamp', columns='item_id', values='budget').ffill()\n\n# Reindex with the new dates.\ndf = df.reindex(new_dates, method='ffill')\n\n# Unstack and reset the index to return to the original format.\ndf = df.unstack().reset_index().rename(columns={0:'budget'})\n</code></pre>\n"}], "owner": {"reputation": 73072, "user_id": 283296, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/ilsZ4.jpg?s=128&g=1", "display_name": "Amelio Vazquez-Reina", "link": "https://stackoverflow.com/users/283296/amelio-vazquez-reina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 263, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1470283098, "creation_date": 1470262233, "last_edit_date": 1470283098, "question_id": 38754493, "link": "https://stackoverflow.com/questions/38754493/efficient-data-sampling-with-sparse-timestamps-on-a-pre-defined-date-range", "title": "Efficient data sampling with sparse timestamps on a pre-defined date range", "body": "<p>Consider a dataframe with sparse temporal data. The timestamps can be very old (e.g. years ago) or very recent.</p>\n\n<p>As an example, let's take the following dataframe:</p>\n\n<pre><code>                    tstamp     item_id   budget\n2016-07-01 14:56:51.882649  0Szr8SuNbY  5000.00\n2016-07-20 14:57:23.856878  0Szr8SuNbY  5700.00\n2016-07-17 16:32:27.838435  0Lzu1xOM87   303.51\n2016-07-30 21:50:03.655102  0Lzu1xOM87    94.79\n2016-08-01 14:56:31.081140  0HzuoujTsN   100.00\n</code></pre>\n\n<p>Say we need to <strong>resample</strong> this dataframe <strong>for each <code>item_id</code></strong> so that we get a <strong>dense</strong> dataframe that has one data point for every day for a <strong>pre-defined date range</strong>, using a <strong>forward fill</strong>.</p>\n\n<p>In other words, if I resample the above for the time interval </p>\n\n<pre><code>pd.date_range(date(2016,7,15), date(2016,7,31)\n</code></pre>\n\n<p>I should get:</p>\n\n<pre><code>        date     item_id   budget\n  2016-07-15  0Szr8SuNbY  5000.00\n  2016-07-16  0Szr8SuNbY  5000.00\n  2016-07-17  0Szr8SuNbY  5000.00\n  ...\n  2016-07-31  0Szr8SuNbY  5000.00\n  2016-07-15  0Lzu1xOM87      NaN\n  2016-07-16  0Lzu1xOM87      NaN\n  2016-07-17  0Lzu1xOM87   303.51\n  ...\n  2016-07-31  0Lzu1xOM87    94.79\n  2016-07-15  0HzuoujTsN      NaN\n  2016-07-16  0HzuoujTsN      NaN\n  2016-07-17  0HzuoujTsN      NaN\n  ...\n  2016-07-31  0HzuoujTsN      NaN\n</code></pre>\n\n<p>Note that the original dataframe contains sparse timestamps and a potentially very <strong>high number</strong> of unique <code>item_id</code>s. In other words, I am hoping to find a <strong>computational efficient</strong> way of resampling this data with daily frequency on a pre-defined time period of consideration.</p>\n\n<p>What's the best we can do in Pandas, numpy, or Python in general?</p>\n"}, {"tags": ["python", "list", "python-3.x", "indexing", "tuples"], "answers": [{"comments": [{"owner": {"reputation": 267, "user_id": 6221173, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b29bffc5296e941623c334d4d842f647?s=128&d=identicon&r=PG&f=1", "display_name": "RonB7", "link": "https://stackoverflow.com/users/6221173/ronb7"}, "edited": false, "score": 0, "creation_date": 1470263049, "post_id": 38754582, "comment_id": 64883032, "body": "Yes you are indeed correct, 27501 outputs nothing, but 27499 outputs as expected, how would I fix this?"}, {"owner": {"reputation": 480, "user_id": 6553638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83c8ec251e9c4ac2f7df4db4a7767fa1?s=128&d=identicon&r=PG&f=1", "display_name": "Noam", "link": "https://stackoverflow.com/users/6553638/noam"}, "reply_to_user": {"reputation": 267, "user_id": 6221173, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b29bffc5296e941623c334d4d842f647?s=128&d=identicon&r=PG&f=1", "display_name": "RonB7", "link": "https://stackoverflow.com/users/6221173/ronb7"}, "edited": false, "score": 0, "creation_date": 1470263279, "post_id": 38754582, "comment_id": 64883097, "body": "See above edit. Though, if you want to keep your code closer to what you started with, just put the &#39;if querFound == false&#39; outside of the while loop."}], "tags": [], "owner": {"reputation": 480, "user_id": 6553638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83c8ec251e9c4ac2f7df4db4a7767fa1?s=128&d=identicon&r=PG&f=1", "display_name": "Noam", "link": "https://stackoverflow.com/users/6553638/noam"}, "is_accepted": true, "score": 1, "last_activity_date": 1470263271, "last_edit_date": 1470263271, "creation_date": 1470262743, "answer_id": 38754582, "question_id": 38754478, "link": "https://stackoverflow.com/questions/38754478/program-output-is-not-as-expected-searching-for-int-values-in-a-list-of-tuples/38754582#38754582", "title": "Program output is not as expected - Searching for int values in a list of tuples", "body": "<p>I think your program exits after the first tuple is processed. Is the first tuple outside of the salary range? If so, it skips the if statement and goes to the elif. querFound is still false and x is still 0, so it prints and exits.</p>\n\n<hr>\n\n<p>My suggestion is to replace your entire while loop with this for loop:</p>\n\n<pre><code>for t in editTup:\n    sal = int(t[2])\n    if sal &gt; salMin and sal &lt; salMax:\n        print(t[4] + \" \" + t[3])\n        querFound = True\nif not querFound:\n    print('No results found')\n</code></pre>\n"}], "owner": {"reputation": 267, "user_id": 6221173, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b29bffc5296e941623c334d4d842f647?s=128&d=identicon&r=PG&f=1", "display_name": "RonB7", "link": "https://stackoverflow.com/users/6221173/ronb7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 20, "favorite_count": 0, "accepted_answer_id": 38754582, "answer_count": 1, "score": 0, "last_activity_date": 1470271614, "creation_date": 1470262191, "last_edit_date": 1470271614, "question_id": 38754478, "link": "https://stackoverflow.com/questions/38754478/program-output-is-not-as-expected-searching-for-int-values-in-a-list-of-tuples", "title": "Program output is not as expected - Searching for int values in a list of tuples", "body": "<p>I am coding a function which takes a search enquiry for a list of tuples (Employee records) and then outputs based on the enquiry parameters. For example, in my problem I am searching a salary range with a minimum of 30000 and a maximum of 100000, I would expect this to output the names of staff members within this salary range, however it instead give the output of no results found, which is incorrect as there are many staff members within this salary range.</p>\n\n<p>As a comparison, a minimum of 0 and a maximum of 100000 would output all of the records which is correct, however when putting the minimum above 30000 it always outputs no result found which is infact correct as there are many staff salaries in the list of tuples which are over 30000.</p>\n\n<p>Below is the part of the code which I believe is causing the problem (Not posting the whole code as this is a coursework project and I dont want to encourage plagiarism on my work):</p>\n\n<p>This should actually output results as there are employees within this salary range, but it is apparent that something is wrong in the code, and I cannot see what this is!</p>\n\n<p>I hope someone can help, this has been bothering me for a while and I really cant seem to find the solution to this! </p>\n"}, {"tags": ["python", "logging", "pip"], "comments": [{"owner": {"reputation": 22993, "user_id": 1394393, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mSjIL.jpg?s=128&g=1", "display_name": "jpmc26", "link": "https://stackoverflow.com/users/1394393/jpmc26"}, "edited": false, "score": 0, "creation_date": 1470345660, "post_id": 38754432, "comment_id": 64926613, "body": "Why are you calling <code>pip.main</code> in your code? That is an extraordinarily strange thing to do."}, {"owner": {"reputation": 2773, "user_id": 1003288, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/b7c2d49748426791dc98b8214dfac9d1?s=128&d=identicon&r=PG", "display_name": "Jacob Tomlinson", "link": "https://stackoverflow.com/users/1003288/jacob-tomlinson"}, "reply_to_user": {"reputation": 22993, "user_id": 1394393, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mSjIL.jpg?s=128&g=1", "display_name": "jpmc26", "link": "https://stackoverflow.com/users/1394393/jpmc26"}, "edited": false, "score": 0, "creation_date": 1470473190, "post_id": 38754432, "comment_id": 64973837, "body": "My project includes a plugin manager which installs using pip."}, {"owner": {"reputation": 84127, "user_id": 118903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7094252405dd3dd5f798b132834d39b2?s=128&d=identicon&r=PG", "display_name": "Vinay Sajip", "link": "https://stackoverflow.com/users/118903/vinay-sajip"}, "edited": false, "score": 0, "creation_date": 1470501022, "post_id": 38754432, "comment_id": 64981240, "body": "It may not be acceptable functionality for <code>pip</code>, but it is what it is. IMO I&#39;ve answered your question."}], "answers": [{"comments": [{"owner": {"reputation": 2773, "user_id": 1003288, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/b7c2d49748426791dc98b8214dfac9d1?s=128&d=identicon&r=PG", "display_name": "Jacob Tomlinson", "link": "https://stackoverflow.com/users/1003288/jacob-tomlinson"}, "edited": false, "score": 0, "creation_date": 1470344832, "post_id": 38774175, "comment_id": 64926221, "body": "Thanks but this is not acceptable functionality for a module."}, {"owner": {"reputation": 22993, "user_id": 1394393, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mSjIL.jpg?s=128&g=1", "display_name": "jpmc26", "link": "https://stackoverflow.com/users/1394393/jpmc26"}, "reply_to_user": {"reputation": 2773, "user_id": 1003288, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/b7c2d49748426791dc98b8214dfac9d1?s=128&d=identicon&r=PG", "display_name": "Jacob Tomlinson", "link": "https://stackoverflow.com/users/1003288/jacob-tomlinson"}, "edited": false, "score": 0, "creation_date": 1470346861, "post_id": 38774175, "comment_id": 64927104, "body": "@JacobTomlinson It is <i>completely</i> appropriate for a function designed to be triggered be a command line tool instead of being called directly to set up logging."}, {"owner": {"reputation": 2773, "user_id": 1003288, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/b7c2d49748426791dc98b8214dfac9d1?s=128&d=identicon&r=PG", "display_name": "Jacob Tomlinson", "link": "https://stackoverflow.com/users/1003288/jacob-tomlinson"}, "reply_to_user": {"reputation": 22993, "user_id": 1394393, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mSjIL.jpg?s=128&g=1", "display_name": "jpmc26", "link": "https://stackoverflow.com/users/1394393/jpmc26"}, "edited": false, "score": 0, "creation_date": 1470473168, "post_id": 38774175, "comment_id": 64973834, "body": "@jpmc26 I agree with that, but the project maintainers have also agreed that in the situation where it is imported it shouldn&#39;t change the root logging"}], "tags": [], "owner": {"reputation": 84127, "user_id": 118903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7094252405dd3dd5f798b132834d39b2?s=128&d=identicon&r=PG", "display_name": "Vinay Sajip", "link": "https://stackoverflow.com/users/118903/vinay-sajip"}, "is_accepted": false, "score": 0, "last_activity_date": 1470332946, "creation_date": 1470332946, "answer_id": 38774175, "question_id": 38754432, "link": "https://stackoverflow.com/questions/38754432/pip-main-resetting-logging-settings-in-python/38774175#38774175", "title": "pip.main() resetting logging settings in python", "body": "<p>The <code>install</code> command of <code>pip</code> overwrites the logging configuration. You need to reset the configuration yourself afterwards, e.g. by doing</p>\n\n<pre><code>logger.setLevel(logging.DEBUG)\n</code></pre>\n\n<p>again after the <code>pip.main()</code> call. Note that you may also have to add handlers, if the ones added by <code>pip</code> aren't what you want.</p>\n"}, {"tags": [], "owner": {"reputation": 2773, "user_id": 1003288, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/b7c2d49748426791dc98b8214dfac9d1?s=128&d=identicon&r=PG", "display_name": "Jacob Tomlinson", "link": "https://stackoverflow.com/users/1003288/jacob-tomlinson"}, "is_accepted": true, "score": 2, "last_activity_date": 1470345218, "creation_date": 1470345218, "answer_id": 38777502, "question_id": 38754432, "link": "https://stackoverflow.com/questions/38754432/pip-main-resetting-logging-settings-in-python/38777502#38777502", "title": "pip.main() resetting logging settings in python", "body": "<p>It turns out that this is a <a href=\"https://github.com/pypa/pip/issues/3043#issuecomment-237476013\" rel=\"nofollow\">known issue</a> in the <a href=\"https://github.com/pypa/pip\" rel=\"nofollow\">pip module</a>. </p>\n\n<p>This is because when pip was created it was not intended to be imported into other programs, therefore considerations like changing root logging config were not thought about.</p>\n\n<p>The work around suggested by the project maintainers is to use the <code>subprocess</code> module to call pip itself. They are open to pull requests to resolve this but it would require a large amount of work on the project.</p>\n\n<p>Therefore my code now looks like</p>\n\n<pre><code>import logging\nimport subprocess\n\nlogger = logging.getLogger()\nlogger.setLevel(logging.DEBUG)\n\nlogging.debug(\"Test\")\n# prints 'DEBUG:root:Test'\n\nprocess = subprocess.Popen([\"pip\", \"install\", \"requests\"], \n                           shell=False,\n                           stdout=subprocess.PIPE,\n                           stderr=subprocess.PIPE)\nprocess.wait()\n# prints pip output\n\nlogging.debug(\"Test\")\n# prints 'DEBUG:root:Test'\n</code></pre>\n"}], "owner": {"reputation": 2773, "user_id": 1003288, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/b7c2d49748426791dc98b8214dfac9d1?s=128&d=identicon&r=PG", "display_name": "Jacob Tomlinson", "link": "https://stackoverflow.com/users/1003288/jacob-tomlinson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 509, "favorite_count": 0, "accepted_answer_id": 38777502, "answer_count": 2, "score": 1, "last_activity_date": 1470345218, "creation_date": 1470261991, "last_edit_date": 1470293547, "question_id": 38754432, "link": "https://stackoverflow.com/questions/38754432/pip-main-resetting-logging-settings-in-python", "title": "pip.main() resetting logging settings in python", "body": "<p>It seems that if I call <code>pip.main()</code> in my code my logging settings get reset.</p>\n\n<p>Working example:</p>\n\n<pre><code>import logging\nimport pip\n\nlogger = logging.getLogger()\nlogger.setLevel(logging.DEBUG)\n\nlogging.debug(\"Test\")\n# prints 'DEBUG:root:Test'\n\npip.main([\"install\", \"requests\"])\n# prints pip output\n\nlogging.debug(\"Test\")\n# doesn't print anything\n</code></pre>\n\n<p>Any ideas how I can avoid this?</p>\n"}, {"tags": ["python", "numpy", "random", "scipy", "scientific-computing"], "comments": [{"owner": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 0, "creation_date": 1470262274, "post_id": 38754423, "comment_id": 64882775, "body": "What means <i>npts</i>? Do i understand correctly, that you just want samples of the parameterized normal dist? If so, why not using the numpy approach?"}, {"owner": {"reputation": 1435, "user_id": 3808639, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6d124ecc383d53e4c03eacb79669a2c9?s=128&d=identicon&r=PG&f=1", "display_name": "aph", "link": "https://stackoverflow.com/users/3808639/aph"}, "reply_to_user": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 0, "creation_date": 1470262405, "post_id": 38754423, "comment_id": 64882820, "body": "My use case requires starting from <i>u</i>."}, {"owner": {"reputation": 1435, "user_id": 3808639, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6d124ecc383d53e4c03eacb79669a2c9?s=128&d=identicon&r=PG&f=1", "display_name": "aph", "link": "https://stackoverflow.com/users/3808639/aph"}, "reply_to_user": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 0, "creation_date": 1470262421, "post_id": 38754423, "comment_id": 64882826, "body": "npts is just the number of times to draw from the distribution"}, {"owner": {"reputation": 62045, "user_id": 1461210, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fa93b9461ed24899945403cae69e02ee?s=128&d=identicon&r=PG", "display_name": "ali_m", "link": "https://stackoverflow.com/users/1461210/ali-m"}, "edited": false, "score": 0, "creation_date": 1470263909, "post_id": 38754423, "comment_id": 64883293, "body": "<i>&quot;My use case requires starting from u.&quot;</i> Could you explain a bit more about your motivation?"}, {"owner": {"reputation": 1435, "user_id": 3808639, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6d124ecc383d53e4c03eacb79669a2c9?s=128&d=identicon&r=PG&f=1", "display_name": "aph", "link": "https://stackoverflow.com/users/3808639/aph"}, "edited": false, "score": 0, "creation_date": 1470267485, "post_id": 38754423, "comment_id": 64884295, "body": "Sure, ali_m. I will be using the percentile of a x, a physical quantity of interest in my model, as the array u. The gaussian variable is the distribution of the modeled quantity y. In this way, x and y are in monotonic correspondence, and y is a gaussian."}], "answers": [{"comments": [{"owner": {"reputation": 1435, "user_id": 3808639, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6d124ecc383d53e4c03eacb79669a2c9?s=128&d=identicon&r=PG&f=1", "display_name": "aph", "link": "https://stackoverflow.com/users/3808639/aph"}, "edited": false, "score": 0, "creation_date": 1470267669, "post_id": 38754558, "comment_id": 64884335, "body": "Thanks sascha. This is an interesting solution, but a little less clear than the transparent erfinv method, and ~3x slower for very large arrays."}, {"owner": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "reply_to_user": {"reputation": 1435, "user_id": 3808639, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6d124ecc383d53e4c03eacb79669a2c9?s=128&d=identicon&r=PG&f=1", "display_name": "aph", "link": "https://stackoverflow.com/users/3808639/aph"}, "edited": false, "score": 1, "creation_date": 1470267923, "post_id": 38754558, "comment_id": 64884400, "body": "@aph In my opinion this is much clearer. It&#39;s just inverse-transform sampling with  the ppf-function (using the distribution you want to sample from). I also think, that if erfinv can do this with a linear-transformation, it&#39;s inverse-function is also not representable in closed-form and needs approximation too (internally). One of the above algorithms, implemented in a few lines should be 100x faster if done right (there is a reason they are used by all fast rng-libs). But i accept, that ayhan answers your question more precise as you wanted some erfinv-based method. :-)"}, {"owner": {"reputation": 1435, "user_id": 3808639, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6d124ecc383d53e4c03eacb79669a2c9?s=128&d=identicon&r=PG&f=1", "display_name": "aph", "link": "https://stackoverflow.com/users/3808639/aph"}, "edited": false, "score": 0, "creation_date": 1470269406, "post_id": 38754558, "comment_id": 64884752, "body": "Ok sascha, I will check the links you suggested and try to adapt them before checking the accepted answer. I only prefer the erfinv-based answer because the connection to inverse transformation sampling is plain and explicit directly at the syntax level."}, {"owner": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "reply_to_user": {"reputation": 1435, "user_id": 3808639, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6d124ecc383d53e4c03eacb79669a2c9?s=128&d=identicon&r=PG&f=1", "display_name": "aph", "link": "https://stackoverflow.com/users/3808639/aph"}, "edited": false, "score": 0, "creation_date": 1470269722, "post_id": 38754558, "comment_id": 64884838, "body": "I&#39;m cool with accepting ayhan&#39;s answer. And i think, you should go first with one of these two simple approaches. Only implement one of the above (or grab some numpy/scipy internals) if speed is too slow for you."}], "tags": [], "owner": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "is_accepted": false, "score": 2, "last_activity_date": 1470263340, "last_edit_date": 1470263340, "creation_date": 1470262578, "answer_id": 38754558, "question_id": 38754423, "link": "https://stackoverflow.com/questions/38754423/drawing-gaussian-random-variables-using-scipy-erfinv/38754558#38754558", "title": "drawing gaussian random variables using scipy erfinv", "body": "<p>The best approach would probably be an own implementation of highly-optimized gaussian-samplers like:</p>\n\n<ul>\n<li><a href=\"https://en.wikipedia.org/wiki/Marsaglia_polar_method\" rel=\"nofollow\">polar-method</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/Ziggurat_algorithm\" rel=\"nofollow\">ziggurat</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/Box%E2%80%93Muller_transform\" rel=\"nofollow\">box-muller</a></li>\n</ul>\n\n<p>But here is something simple (which i saw a long time ago <a href=\"https://pythonhosted.org/pyDOE/randomized.html\" rel=\"nofollow\">here</a>). This will be less efficient than the approaches above (as it's using the quantile function / percent point function which has no closed-form representation for the normal-distribution and will be approximated):</p>\n\n<pre><code>import numpy as np\nfrom scipy.stats.distributions import norm\n\nuniform_samples = np.random.rand(100000)\ngaussian_samples = norm(loc=0, scale=1).ppf(uniform_samples)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1435, "user_id": 3808639, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6d124ecc383d53e4c03eacb79669a2c9?s=128&d=identicon&r=PG&f=1", "display_name": "aph", "link": "https://stackoverflow.com/users/3808639/aph"}, "edited": false, "score": 0, "creation_date": 1470267574, "post_id": 38754777, "comment_id": 64884309, "body": "Perfect answer: exactly what I needed, and very fast even for large arrays."}], "tags": [], "owner": {"reputation": 56440, "user_id": 2285236, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ac8c2e0f71dbd8cf4543039bebf2ab3?s=128&d=identicon&r=PG&f=1", "display_name": "ayhan", "link": "https://stackoverflow.com/users/2285236/ayhan"}, "is_accepted": true, "score": 6, "last_activity_date": 1470264532, "last_edit_date": 1470264532, "creation_date": 1470263879, "answer_id": 38754777, "question_id": 38754423, "link": "https://stackoverflow.com/questions/38754423/drawing-gaussian-random-variables-using-scipy-erfinv/38754777#38754777", "title": "drawing gaussian random variables using scipy erfinv", "body": "<p>Try this:</p>\n\n<pre><code>mean = 100\nsigma = 7\nx = mean + 2**0.5 * sigma * erfinv(np.random.uniform(size=10**5) * 2 - 1)\nx.mean(), x.std()\nOut: (99.965915366042381, 7.0062395839075107)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/t3ow5.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/t3ow5.png\" alt=\"enter image description here\"></a></p>\n\n<p>The conversion from erf to normal distribution is from <a href=\"http://www.johndcook.com/blog/2008/03/15/error-function-and-the-normal-distribution/\" rel=\"noreferrer\">John D. Cook's blog</a>.</p>\n"}], "owner": {"reputation": 1435, "user_id": 3808639, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6d124ecc383d53e4c03eacb79669a2c9?s=128&d=identicon&r=PG&f=1", "display_name": "aph", "link": "https://stackoverflow.com/users/3808639/aph"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 453, "favorite_count": 1, "accepted_answer_id": 38754777, "answer_count": 2, "score": 0, "last_activity_date": 1470264860, "creation_date": 1470261957, "last_edit_date": 1470264860, "question_id": 38754423, "link": "https://stackoverflow.com/questions/38754423/drawing-gaussian-random-variables-using-scipy-erfinv", "title": "drawing gaussian random variables using scipy erfinv", "body": "<p>I would like to draw <em>npts</em> random variables distributed as a gaussian with mean <em>mu</em> and dispersion <em>sigma</em>. I know how to do this in Numpy:</p>\n\n<pre><code>x = np.random.normal(loc=mu, scale=sigma, size=npts)\nprint(np.std(x), np.mean(x))\n0.1998, 0.3997\n</code></pre>\n\n<p>This should also be possible to do using scipy.special.erfinv via inverse transforms, beginning from a uniform distribution:</p>\n\n<pre><code>u = np.random.uniform(0, 1, npts)\n</code></pre>\n\n<p>However, I can't figure out how to get the scaling correct. Has anyone done this before?</p>\n"}, {"tags": ["python", "math", "rotation"], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 6586342, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/fe6ad65da7460b1edad5db2b1c4bded2?s=128&d=identicon&r=PG&f=1", "display_name": "Kenny", "link": "https://stackoverflow.com/users/6586342/kenny"}, "edited": false, "score": 0, "creation_date": 1470265032, "post_id": 38754866, "comment_id": 64883647, "body": "There appears to be a syntax error in result, a missing comma before v perhaps? And I think v needs to be v1"}, {"owner": {"reputation": 1242, "user_id": 6657815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d9530b27299d0248df63719d13977f6?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav Dhama", "link": "https://stackoverflow.com/users/6657815/gaurav-dhama"}, "reply_to_user": {"reputation": 47, "user_id": 6586342, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/fe6ad65da7460b1edad5db2b1c4bded2?s=128&d=identicon&r=PG&f=1", "display_name": "Kenny", "link": "https://stackoverflow.com/users/6586342/kenny"}, "edited": false, "score": 0, "creation_date": 1470265187, "post_id": 38754866, "comment_id": 64883700, "body": "There was a minus sign missing, corrected it. try the new program"}, {"owner": {"reputation": 47, "user_id": 6586342, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/fe6ad65da7460b1edad5db2b1c4bded2?s=128&d=identicon&r=PG&f=1", "display_name": "Kenny", "link": "https://stackoverflow.com/users/6586342/kenny"}, "edited": false, "score": 0, "creation_date": 1470323697, "post_id": 38754866, "comment_id": 64913904, "body": "It appears to work.. but the follow up question, what can I do with the rotated vector?  The second edge (-1,1),(-3,3)  should rotate 90 degrees to match the first edge (1,1),(-2,-2) and its new values should be (-1,3),(-3,1)"}], "tags": [], "owner": {"reputation": 1242, "user_id": 6657815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d9530b27299d0248df63719d13977f6?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav Dhama", "link": "https://stackoverflow.com/users/6657815/gaurav-dhama"}, "is_accepted": false, "score": 0, "last_activity_date": 1470265169, "last_edit_date": 1470265169, "creation_date": 1470264456, "answer_id": 38754866, "question_id": 38754184, "link": "https://stackoverflow.com/questions/38754184/changing-edges-to-match-angles/38754866#38754866", "title": "Changing Edges to match angles", "body": "<p>Define a new function called rotate:</p>\n\n<pre><code>def rotate(v,ang):\n    result =[v[0]*math.cos(ang)-v[1]*math.sin(ang),v[0]*math.sin(ang)+v[1]*math.cos(ang)]\n    return result\n\n# So to rotate a given vector,lets take your example\np1,p2 = (1,1),(-2,-2)\np3,p4 = (-1,1),(-3,3)\n\np1,p2 = (1,1),(-2,-2)\np3,p4 = (-1,1),(-3,3)\n\ndir = direction(p1,p2)\ndir2 = direction(p3,p4)\n\ndir_n = normalize(dir)\nprint (\"Direction1\")\nprint (dir_n)\ndir2_n = normalize(dir2)\nprint (\"Direction2\")\nprint (dir2_n)\ndotProduct = dot(dir_n, dir2_n)\nang1 = math.degrees(math.acos(dotProduct))\n\n#Rotate dir2_n in direction of dir_n\nnew_vec = rotate(dir2_n,math.radians(ang1))\nprint (\"rotated_vector\")\nprint (new_vec)\n\nOutput:\nDirection1\n[-0.7071067811865476, -0.7071067811865476]\nDirection2\n[-0.7071067811865475, 0.7071067811865475]\nrotated_vector\n[-0.7071067811865475, -0.7071067811865475]\n</code></pre>\n\n<p>Rotated vector should be the same as dir_1. Let me know if this solves your problem</p>\n"}], "owner": {"reputation": 47, "user_id": 6586342, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/fe6ad65da7460b1edad5db2b1c4bded2?s=128&d=identicon&r=PG&f=1", "display_name": "Kenny", "link": "https://stackoverflow.com/users/6586342/kenny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1470265169, "creation_date": 1470260889, "question_id": 38754184, "link": "https://stackoverflow.com/questions/38754184/changing-edges-to-match-angles", "title": "Changing Edges to match angles", "body": "<p>I'm scripting in python and I'm very new to this, and don't have a lot of experience with vector math, I can get dot product, length, and angle of two vectors, and I've managed to get the angle of difference between the two points (an edge), but I'm not sure about the math/process of actually modifying the second set of points to match the angle of the first.  What I'm trying to do is rotate the second set of points to match the first set, regardless of its current location. For example:</p>\n\n<pre><code>#python\nimport math\ndef dot (v1, v2):\n    return (v1[0]*v2[0] + v1[1]*v2[1])\ndef length (v):\n    return math.sqrt(dot(v,v))\ndef normalize (v):\n    r = [0.0] * 2\n    v_len = length (v)\n    if v_len &gt; 0.0:\n            v_invLen = 1.0 / v_len\n            r[0] = v[0] * v_invLen\n            r[1] = v[1] * v_invLen                \n    return r\ndef direction (v1, v2):\n    return (v2[0]-v1[0], v2[1]-v1[1])\ndef angle(dotProduct):\n    return math.degrees(math.acos(dotProduct))\n\np1,p2 = (0,0),(0,1) &lt;--- first edge\np3,p4 = (0,0),(2,2) &lt;--- second edge\ndir = direction(p1,p2)\ndir2 = direction(p3,p4)\ndir_n = normalize(dir)\ndir2_n = normalize(dir2)\ndotProduct = dot(dir_n, dir2_n)\nang1 = math.degrees(math.acos(dotProduct))\nprint ang1  \n</code></pre>\n\n<p>This gives me a 45 degree angle, what I'm trying to do is now rotate the second edge p2 to match the angle of p1 regardless of its location in world space so p1 might be (1,1),(-2,-2) and p2 might be (-1,1),(-3,3) with a 90 degree rotation required </p>\n"}, {"tags": ["python", "windows", "python-3.x"], "comments": [{"owner": {"reputation": 1242, "user_id": 6657815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d9530b27299d0248df63719d13977f6?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav Dhama", "link": "https://stackoverflow.com/users/6657815/gaurav-dhama"}, "edited": false, "score": 0, "creation_date": 1470261197, "post_id": 38754175, "comment_id": 64882370, "body": "Please refer this question:<a href=\"http://stackoverflow.com/questions/13564851/generate-keyboard-events\" title=\"generate keyboard events\">stackoverflow.com/questions/13564851/generate-keybo&zwnj;&#8203;ard-events</a>"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 1, "creation_date": 1470261650, "post_id": 38754175, "comment_id": 64882560, "body": "@GaurabDhama: Completely unrelated. This question is asking, how to <b>receive</b> input. The question you linked to explains, how to <b>generate</b> input."}, {"owner": {"reputation": 11, "user_id": 6674257, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-6EOUo1-m9Vs/AAAAAAAAAAI/AAAAAAAAFLw/LANH8jcRfho/photo.jpg?sz=128", "display_name": "Sid", "link": "https://stackoverflow.com/users/6674257/sid"}, "reply_to_user": {"reputation": 1242, "user_id": 6657815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d9530b27299d0248df63719d13977f6?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav Dhama", "link": "https://stackoverflow.com/users/6657815/gaurav-dhama"}, "edited": false, "score": 1, "creation_date": 1470261730, "post_id": 38754175, "comment_id": 64882591, "body": "@GauravDhama I&#39;ve looked at that question, and it explains ways of <i>generating</i> keyboard events, whereas I&#39;m looking for ways to get keyboard events as <i>inputs</i>."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 6674257, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-6EOUo1-m9Vs/AAAAAAAAAAI/AAAAAAAAFLw/LANH8jcRfho/photo.jpg?sz=128", "display_name": "Sid", "link": "https://stackoverflow.com/users/6674257/sid"}, "edited": false, "score": 0, "creation_date": 1470326347, "post_id": 38754863, "comment_id": 64915797, "body": "This took a while for me to implement, but it worked successfully. Thank You! By the way, if you know any Python command that can turn off (and later turn back on) the Windows key repeat mechanism, can you please tell me?"}, {"owner": {"reputation": 41280, "user_id": 344286, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/3827b2facd01ed6a64a96df00d4b877a?s=128&d=identicon&r=PG", "display_name": "Wayne Werner", "link": "https://stackoverflow.com/users/344286/wayne-werner"}, "reply_to_user": {"reputation": 11, "user_id": 6674257, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-6EOUo1-m9Vs/AAAAAAAAAAI/AAAAAAAAFLw/LANH8jcRfho/photo.jpg?sz=128", "display_name": "Sid", "link": "https://stackoverflow.com/users/6674257/sid"}, "edited": false, "score": 0, "creation_date": 1470326847, "post_id": 38754863, "comment_id": 64916163, "body": "Excellent! I doubt you would be able to turn off repeat keys - I suspect that&#39;s a function of the keyboard (though I could totally be wrong there). Otherwise, I&#39;d try digging through the google results for &quot;Windows turn off repeat keys&quot;. I know you <i>could</i> do the accessibility thing, where you hold down left shift forever and then it takes about 3-5 seconds per letter that you type... not sure if that would do what you want, but it might!"}, {"owner": {"reputation": 11, "user_id": 6674257, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-6EOUo1-m9Vs/AAAAAAAAAAI/AAAAAAAAFLw/LANH8jcRfho/photo.jpg?sz=128", "display_name": "Sid", "link": "https://stackoverflow.com/users/6674257/sid"}, "edited": false, "score": 1, "creation_date": 1470429207, "post_id": 38754863, "comment_id": 64965040, "body": "Actually, I just found the pyHook module isn&#39;t even necessary; on Windows, the win32api and win32con modules are sufficient for this purpose: The win32api.GetAsyncKeyState() function satisfies the requirements. It works with pyHook too, but it&#39;s not required."}, {"owner": {"reputation": 41280, "user_id": 344286, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/3827b2facd01ed6a64a96df00d4b877a?s=128&d=identicon&r=PG", "display_name": "Wayne Werner", "link": "https://stackoverflow.com/users/344286/wayne-werner"}, "reply_to_user": {"reputation": 11, "user_id": 6674257, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-6EOUo1-m9Vs/AAAAAAAAAAI/AAAAAAAAFLw/LANH8jcRfho/photo.jpg?sz=128", "display_name": "Sid", "link": "https://stackoverflow.com/users/6674257/sid"}, "edited": false, "score": 0, "creation_date": 1470429474, "post_id": 38754863, "comment_id": 64965169, "body": "I thought it might be, but I wasn&#39;t sure and the only examples I found in my search used pyhook. Great to know, though!"}], "tags": [], "owner": {"reputation": 41280, "user_id": 344286, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/3827b2facd01ed6a64a96df00d4b877a?s=128&d=identicon&r=PG", "display_name": "Wayne Werner", "link": "https://stackoverflow.com/users/344286/wayne-werner"}, "is_accepted": true, "score": 0, "last_activity_date": 1470264438, "creation_date": 1470264438, "answer_id": 38754863, "question_id": 38754175, "link": "https://stackoverflow.com/questions/38754175/python-keyboard-events-without-gui-non-blocking/38754863#38754863", "title": "Python keyboard events without GUI (non-blocking)", "body": "<p>It looks like what you want to do is get <a href=\"https://pypi.python.org/pypi/pyHook\" rel=\"nofollow\">pyhook</a>. I believe it depends on the <a href=\"https://sourceforge.net/projects/pywin32/files/pywin32/Build%20220/\" rel=\"nofollow\">pywin32</a> library.</p>\n\n<p>Basically what you want to do is look for creating a keylogger. That will give you non-blocking keyboard events. Of course you may want to use the win32 api to make sure that when the key is pressed it's <em>your</em> window that's in focus, if that matters to you.</p>\n\n<p>I don't have my windows box accessible, or I'd be able to give you more code samples, but that should at least point you in the right direction.</p>\n"}], "owner": {"reputation": 11, "user_id": 6674257, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-6EOUo1-m9Vs/AAAAAAAAAAI/AAAAAAAAFLw/LANH8jcRfho/photo.jpg?sz=128", "display_name": "Sid", "link": "https://stackoverflow.com/users/6674257/sid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 836, "favorite_count": 0, "accepted_answer_id": 38754863, "answer_count": 1, "score": 0, "last_activity_date": 1470264438, "creation_date": 1470260856, "question_id": 38754175, "link": "https://stackoverflow.com/questions/38754175/python-keyboard-events-without-gui-non-blocking", "title": "Python keyboard events without GUI (non-blocking)", "body": "<p>I am trying to find a way to get KeyDown and KeyUp events in Python. With Pygame, this is easily done with <code>pygame.KEYDOWN</code> and <code>pygame.KEYUP</code>, but I am trying to find a way to do it without using a GUI.</p>\n\n<p>Ideally, I would like to be able to define a function <code>isKeyDown(key)</code>, which would return <code>True</code> if <code>key</code> is currently being held down, or return <code>False</code> if it isn't, but either way, it would move on with the code (it would be non-blocking). For example:</p>\n\n<pre><code>while True:\n    if not isKeyDown(\"a\"): #If 'a' isn't currently being pressed\n         print (\"You are not pressing 'a'\")\n    elif isKeyDown(\"a\"): #If 'a' is being held down when this is run\n         print (\"You are pressing 'a'\")\n         print (\"This is the end of this program\")\n         break\n</code></pre>\n\n<p>I've tried <code>msvcrt.getch()</code>, but that has two problems:</p>\n\n<p>1) It stops the program until something is pressed, and</p>\n\n<p>2) It doesn't really tell you if the key is being held down; it simply returns if the key is being pressed at the time. This can sometimes coincide since Windows repeats key presses when they are held down, but it is unlikely to happen when the <code>while</code> loop is being run at maximum speed.</p>\n\n<p>I've also used <code>msvcrt.kbhit()</code>, but it sets itself to <code>1</code> if any key has been pressed and not read by <code>msvcrt.getch()</code>, and so that still runs into the problems of <code>msvcrt.getch()</code> and doesn't really return whether a key is actually currently being held down.</p>\n\n<p>I am using Windows, so the <code>curses</code> module that many people have used to answer similar questions isn't available.</p>\n\n<p>Is there a way to define such a <code>isKeyDown()</code> function in Windows without a GUI, preferably only using built-in modules? If this is not possible with the built-in Python modules, third-party modules would be okay, as long as they don't require a GUI.</p>\n\n<p>Even using Pygame or Tkinter would be fine, as long as a way to turn off their GUIs.</p>\n\n<p>If this is not possible, please tell me why, so I can stop looking for a solution (I have been trying to do little else for the past few days).</p>\n\n<p>I am using Python 3.5.2 on a 64-bit Windows 10 laptop.</p>\n"}, {"tags": ["python", "csv"], "comments": [{"owner": {"reputation": 2933, "user_id": 1168680, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/EgYGV.jpg?s=128&g=1", "display_name": "RAVI", "link": "https://stackoverflow.com/users/1168680/ravi"}, "edited": false, "score": 1, "creation_date": 1470261240, "post_id": 38754163, "comment_id": 64882390, "body": "Try to write code on your own. We will help you with errors but we will not write complete code for you."}], "answers": [{"tags": [], "owner": {"reputation": 812, "user_id": 2867076, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/100003035657402/picture?type=large", "display_name": "Hannes Karppila", "link": "https://stackoverflow.com/users/2867076/hannes-karppila"}, "is_accepted": false, "score": -1, "last_activity_date": 1470265688, "creation_date": 1470265688, "answer_id": 38755048, "question_id": 38754163, "link": "https://stackoverflow.com/questions/38754163/sort-csv-data-with-python/38755048#38755048", "title": "Sort CSV data with Python", "body": "<p>You should look at the built-in <a href=\"https://docs.python.org/2/library/csv.html\" rel=\"nofollow\">csv module</a> to load the csv data, and then just loop through the lines and filter out the ones you want.</p>\n"}], "owner": {"reputation": 1, "user_id": 6641286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00e5e5122262ac8e3647dc1d65d2f155?s=128&d=identicon&r=PG&f=1", "display_name": "iRocku", "link": "https://stackoverflow.com/users/6641286/irocku"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1470265688, "creation_date": 1470260791, "last_edit_date": 1470261114, "question_id": 38754163, "link": "https://stackoverflow.com/questions/38754163/sort-csv-data-with-python", "title": "Sort CSV data with Python", "body": "<p>I have a CSV that have this example format (there will be many rows like this format):</p>\n\n<pre><code>1131,01/06/15,PROFI ROM FOOD SRL,290.7,,\n\n1131,,,,,\n\n3811861,01/12/15,CENTRUL TERITORIAL DE CALCUL,141.36,,\n\n3811861,,ELECTRONIC SA,,,\n\n49171,01/15/15,AUTOGLOBUS 2000 SRL,\"1,138.10\",,\n\n49171,,,,,\n\n2024194PJ,01/08/15,SOCIETATEA NATIONALA DE,\"2,088.17\",,\n\n2024194PJ,,RADIOCOMUNICATII SA,,,\n</code></pre>\n\n<p>My desired output after the sort should by like this :</p>\n\n<pre><code>1131,01/06/15,PROFI ROM FOOD SRL,290.7,,\n\n3811861,01/12/15,CENTRUL TERITORIAL DE CALCUL ELECTRONIC SA,141.36,,\n\n49171,01/15/15,AUTOGLOBUS 2000 SRL,\"1,138.10\",,\n\n2024194PJ,01/08/15,SOCIETATEA NATIONALA DE RADIOCOMUNICATII SA,\"2,088.17\",,\n</code></pre>\n\n<p>When script is detecting a row with a number and nothing after that like this (1131,,,,,) it should delete that row, when he detects a number 2 spaces(can be more than 2 sometime, but usually 2) like this (3811861,,ELECTRONIC SA,,,) he should get that string (ELECTRONIC SA) and append it to above row at index 2 like this (CENTRUL TERITORIAL DE CALCUL ELECTRONIC SA).</p>\n\n<p>What I'm thinking is that I should make a list of lists for each row, do a for loop and append what I need (maybe a regex sort?) and ignore the rows that I don't need, but I don't know how exactly is the best way to do it? Can anyone help with a easy script, thanks a lot for your time! </p>\n"}, {"tags": ["python", "c++", "cython", "ucs2", "ucs-4"], "comments": [{"owner": {"reputation": 695068, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 0, "creation_date": 1470261086, "post_id": 38754156, "comment_id": 64882327, "body": "Did you remember to link against Python?"}, {"owner": {"reputation": 1, "user_id": 6674325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8080f2b208d6c94d8dc966b96b3204ab?s=128&d=identicon&r=PG&f=1", "display_name": "someoneGeorge", "link": "https://stackoverflow.com/users/6674325/someonegeorge"}, "reply_to_user": {"reputation": 695068, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 0, "creation_date": 1470262042, "post_id": 38754156, "comment_id": 64882703, "body": "I include the python-config --cflags and python-config --ldflags in my CFLAGS and LDFLAGS respectively in my makefile."}, {"owner": {"reputation": 5662, "user_id": 5781248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/712de4f2f811d1a400d3311c9cdd5836?s=128&d=identicon&r=PG&f=1", "display_name": "J.J. Hakala", "link": "https://stackoverflow.com/users/5781248/j-j-hakala"}, "edited": false, "score": 0, "creation_date": 1470303600, "post_id": 38754156, "comment_id": 64899193, "body": "I was not able to reproduce this problem. A <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> with complete details of gcc (g++) compile and link arguments should be included."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 6674325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8080f2b208d6c94d8dc966b96b3204ab?s=128&d=identicon&r=PG&f=1", "display_name": "someoneGeorge", "link": "https://stackoverflow.com/users/6674325/someonegeorge"}, "is_accepted": false, "score": 0, "last_activity_date": 1470348513, "creation_date": 1470348513, "answer_id": 38778201, "question_id": 38754156, "link": "https://stackoverflow.com/questions/38754156/embedded-cython-ucs2-ucs4-issue/38778201#38778201", "title": "Embedded Cython UCS2 UCS4 issue", "body": "<p>It turns out I had two different installations of python on my system and I was linking the wrong one.</p>\n"}], "owner": {"reputation": 1, "user_id": 6674325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8080f2b208d6c94d8dc966b96b3204ab?s=128&d=identicon&r=PG&f=1", "display_name": "someoneGeorge", "link": "https://stackoverflow.com/users/6674325/someonegeorge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 239, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1470348513, "creation_date": 1470260755, "question_id": 38754156, "link": "https://stackoverflow.com/questions/38754156/embedded-cython-ucs2-ucs4-issue", "title": "Embedded Cython UCS2 UCS4 issue", "body": "<p>I have some python code I am trying to embed within c++ code using the cython api construct. For testing purposes I have been working off of:\n<a href=\"https://stackoverflow.com/questions/34480973/example-program-of-cython-as-python-to-c-converter\">Example program of Cython as Python to C Converter</a></p>\n\n<p>With the slightly modified code:</p>\n\n<pre><code>#foo.pyx\ncdef public foo(double* x):\n    x[0] = 0.0\n\n//file.cpp\n#include \"Python.h\"\n#include \"foo.h\"\n#include &lt;iostream&gt;\n\nint main(int argc, const char * argv[])\n{\n    double arr[2] = {1,2};\n    foo(arr);\n    std::cout &lt;&lt; arr[0] &lt;&lt; std::endl;\n    std::cout &lt;&lt; arr[1] &lt;&lt; std::endl;\n}   \n</code></pre>\n\n<p>After running</p>\n\n<pre><code>cython foo.pyx\n</code></pre>\n\n<p>I attempt to compile receiving the error message:</p>\n\n<pre><code>foo.c:(.text+0x387): undefined reference to 'PyUnicodeUCS4_DecodeUTF8'\n</code></pre>\n\n<p>I have seen other questions regarding the matter, such as <a href=\"https://stackoverflow.com/questions/19888104/an-ucs2-ucs4-incompatibility-import-failure-of-a-cythnized-pure-python-module\">An UCS2-UCS4 incompatibility import failure of a Cythnized pure-Python module</a>, and when I run:</p>\n\n<pre><code>import sys; sys.maxunicode\n</code></pre>\n\n<p>I get 1114111 which is in line with UCS4.  So what I am wondering is how to I resolve this undefined reference, when my python version seems to be line with the proper UCS there, but not elsewhere.</p>\n"}, {"tags": ["python", "pandas", "linear-interpolation"], "comments": [{"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1470263600, "post_id": 38754132, "comment_id": 64883190, "body": "Sample data is only Datetime, lat, lon... where is z?"}], "answers": [{"comments": [{"owner": {"reputation": 2445, "user_id": 5020803, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-w1adMH7HR84/AAAAAAAAAAI/AAAAAAAAAC8/fUhQfhwg4SQ/photo.jpg?sz=128", "display_name": "BenT", "link": "https://stackoverflow.com/users/5020803/bent"}, "edited": false, "score": 0, "creation_date": 1470331351, "post_id": 38755716, "comment_id": 64918918, "body": "So this works assuming the the lat/lon have the datetime index to begin with. But what if the original index is 1-3 and the time is in the first column labeled &#39;A&#39;?"}, {"owner": {"reputation": 15126, "user_id": 1953800, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4173076e5187c82e74379de9aeb00aa4?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1953800/alex"}, "reply_to_user": {"reputation": 2445, "user_id": 5020803, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-w1adMH7HR84/AAAAAAAAAAI/AAAAAAAAAC8/fUhQfhwg4SQ/photo.jpg?sz=128", "display_name": "BenT", "link": "https://stackoverflow.com/users/5020803/bent"}, "edited": false, "score": 1, "creation_date": 1470331863, "post_id": 38755716, "comment_id": 64919214, "body": "You can use <code>set_index</code> (<a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.set_index.html\" rel=\"nofollow noreferrer\">docs</a>) to use that column as an index."}], "tags": [], "owner": {"reputation": 15126, "user_id": 1953800, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4173076e5187c82e74379de9aeb00aa4?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1953800/alex"}, "is_accepted": true, "score": 2, "last_activity_date": 1470270637, "creation_date": 1470270637, "answer_id": 38755716, "question_id": 38754132, "link": "https://stackoverflow.com/questions/38754132/pandas-interpolate-dataframe-with-new-length/38755716#38755716", "title": "Pandas Interpolate dataframe with new length", "body": "<pre><code>i = pd.DatetimeIndex(start=df.index.min(), end=df.index.max(), freq='H')\ndf = df.reindex(i).interpolate()\nprint(df)\n</code></pre>\n\n<p>outputs</p>\n\n<pre><code>2010-09-13 18:00:00  16.300000 -78.500000\n2010-09-13 19:00:00  16.350000 -78.716667\n2010-09-13 20:00:00  16.400000 -78.933333\n2010-09-13 21:00:00  16.450000 -79.150000\n2010-09-13 22:00:00  16.500000 -79.366667\n</code></pre>\n\n<ol>\n<li><p>Create a new index with the desired frequency using <code>DatetimeIndex</code> (<a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DatetimeIndex.html\" rel=\"nofollow\">docs</a>).</p></li>\n<li><p><code>reindex</code> (<a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.reindex.html\" rel=\"nofollow\">docs</a>) with this new index. By default values for new indices will be <code>np.nan</code>.</p></li>\n<li><p><code>interpolate</code> (<a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.interpolate.html\" rel=\"nofollow\">docs</a>) to fill in these missing values. You can supply the <code>method</code> kwarg to determine how interpolation is done.</p></li>\n</ol>\n"}], "owner": {"reputation": 2445, "user_id": 5020803, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-w1adMH7HR84/AAAAAAAAAAI/AAAAAAAAAC8/fUhQfhwg4SQ/photo.jpg?sz=128", "display_name": "BenT", "link": "https://stackoverflow.com/users/5020803/bent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1323, "favorite_count": 0, "accepted_answer_id": 38755716, "answer_count": 1, "score": 4, "last_activity_date": 1470414296, "creation_date": 1470260638, "last_edit_date": 1470414296, "question_id": 38754132, "link": "https://stackoverflow.com/questions/38754132/pandas-interpolate-dataframe-with-new-length", "title": "Pandas Interpolate dataframe with new length", "body": "<p>I have a dataframe with columns of Datetime, lat, lon, z. I am reading the data in from a csv file so setting the period for the datetimes do not work. The times are in 6 hour intervals but I want to linearly interpolate the data to hourly intervals. </p>\n\n<p>Go from</p>\n\n<pre><code>       'A'              'B'    'C'   'D'\n0   2010-09-13 18:00:00 16.3 -78.5    1\n1   2010-09-14 00:00:00 16.6 -79.8    6 \n2   2010-09-14 06:00:00 17.0 -81.1    12\n</code></pre>\n\n<p>To</p>\n\n<pre><code>       'A'              'B'    'C'   'D'\n1   2010-09-13 18:00:00 16.3  -78.5   1      \n2   2010-09-13 19:00:00 16.35 -78.7   2\n3   2010-09-13 20:00:00 16.4  -78.9   3\n4   2010-09-13 21:00:00 16.45 -79.1   4\n5   2010-09-13 22:00:00 16.5  -79.3   5\n....\n</code></pre>\n\n<p>I have tried using the interpolate command but there are no arguments for a new length of the dataframe. </p>\n\n<pre><code>df.interpolate(method='linear')\n</code></pre>\n\n<p>I was thinking that I could use .loc to include 5 rows of NANs between  each line in the data frame and then use the interpolation function but that seems like a bad workaround.</p>\n\n<p><strong>Solution</strong>\nUsing DatetimeIndex eliminates the association with the other columns if your initial column was not imported as datetime.</p>\n\n<pre><code>i = pd.DatetimeIndex(start=df['A'].min(), end=df['A'].max(),    freq='H')\ndf = df.reindex(i).interpolate()\nprint(df)\n</code></pre>\n\n<p>Gives the correct answer.</p>\n"}, {"tags": ["python", "python-2.7", "iterator"], "answers": [{"tags": [], "owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "is_accepted": true, "score": 3, "last_activity_date": 1470297899, "last_edit_date": 1470297899, "creation_date": 1470296642, "answer_id": 38761356, "question_id": 38754118, "link": "https://stackoverflow.com/questions/38754118/making-next-compatible-with-both-python-2-and-3/38761356#38761356", "title": "Making .next() compatible with both python 2 and 3", "body": "<p>Don't call the <code>.next()</code> method directly. Use the <a href=\"https://docs.python.org/2/library/functions.html#next\" rel=\"nofollow\"><code>next()</code> <em>function</em></a> on an iterator instead:</p>\n\n<pre><code>for u in up:\n    head = next(u)[1:].strip()\n    q = \"\".join(s.strip() for s in next(u))\n</code></pre>\n\n<p>The <code>next()</code> function will invoke the correct hook on both Python 2 and 3.</p>\n\n<p>However, the error message you see from <code>futurize</code> indicates that you may <em>also</em> have bound the name <code>next</code> elsewhere in your code.</p>\n\n<p>If you have something like:</p>\n\n<pre><code>next = some_expression\n</code></pre>\n\n<p>or</p>\n\n<pre><code>def next(...):\n    # some function\n</code></pre>\n\n<p>as a global, then you are <em>shadowing</em> the built-in <code>next()</code> function. Rename any other use of <code>next</code> as a global in that module to avoid issues.</p>\n\n<p>For example, the following demo code throws the message you see:</p>\n\n<pre><code>$ cat demo.py\ndef next(): pass\nn = g.next()\n$ bin/futurize demo.py\nRefactoringTool: Skipping optional fixer: idioms\nRefactoringTool: Skipping optional fixer: ws_comma\nRefactoringTool: Refactored demo.py\n--- demo.py (original)\n+++ demo.py (refactored)\n@@ -1,2 +1,2 @@\n def next(): pass\n-n = g.next()\n+n = g.__next__()\nRefactoringTool: Files that need to be modified:\nRefactoringTool: demo.py\nRefactoringTool: Warnings/messages while refactoring:\nRefactoringTool: ### In file demo.py ###\nRefactoringTool: Line 1: Calls to builtin next() possibly shadowed by global binding\nRefactoringTool: ### In file demo.py ###\nRefactoringTool: Line 1: Calls to builtin next() possibly shadowed by global binding\n</code></pre>\n\n<p>Note how the tool then used <code>g.__next__()</code> instead of <code>g.next()</code>, to avoid using <code>next()</code> as a function.</p>\n\n<p>Removing the <code>next</code> function from that code results in:</p>\n\n<pre><code>$ cat demo.py\n# def next(): pass\nn = g.next()\n$ bin/futurize demo.py\nRefactoringTool: Skipping optional fixer: idioms\nRefactoringTool: Skipping optional fixer: ws_comma\nRefactoringTool: Refactored demo.py\n--- demo.py (original)\n+++ demo.py (refactored)\n@@ -1,2 +1,2 @@\n # def next(): pass\n-n = g.next()\n+n = next(g)\nRefactoringTool: Files that need to be modified:\nRefactoringTool: demo.py\n</code></pre>\n"}], "owner": {"reputation": 651, "user_id": 3698773, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/aadf4058dc9d61fa047d4ad27d074395?s=128&d=identicon&r=PG&f=1", "display_name": "user3698773", "link": "https://stackoverflow.com/users/3698773/user3698773"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 689, "favorite_count": 0, "accepted_answer_id": 38761356, "answer_count": 1, "score": 0, "last_activity_date": 1470297899, "creation_date": 1470260575, "last_edit_date": 1470296900, "question_id": 38754118, "link": "https://stackoverflow.com/questions/38754118/making-next-compatible-with-both-python-2-and-3", "title": "Making .next() compatible with both python 2 and 3", "body": "<p>I have written code in python 2.7 that I  want to make it compatible with\n Python 3.x. So far I have tried the <code>futurize</code> and <code>modernize</code> python packages as well as <code>2to3</code>, and everything seems fine.</p>\n\n<p>But I'm stuck with python 2.7's <code>.next()</code> method. And I get warning with both the <code>futurize</code> and <code>2to3</code> packages, like: </p>\n\n<pre><code>RefactoringTool: Line 34: Calls to builtin next() possibly shadowed by global binding\n</code></pre>\n\n<p>And when I run actual code in python 3.x it gives me this warning:</p>\n\n<pre><code>AttributeError: 'itertools._grouper' object has no attribute 'next'\n</code></pre>\n\n<p>The relevant code in python 2.7 is as follows:</p>\n\n<pre><code>with open('file.txt', 'rU') as f:\n    l = f.readlines()[2:]\n    up = (x[1] for x in groupby(l, lambda line: line[0] == \"&gt;\"))\n    for u in up:\n        head = u.next()[1:].strip()\n        q = \"\".join(s.strip() for s in u.next())\n        # do something\n</code></pre>\n"}, {"tags": ["python", "matplotlib", "ipython-notebook", "jupyter-notebook"], "comments": [{"owner": {"reputation": 765, "user_id": 795201, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cccb688a4c22ab4802cdf844e0484289?s=128&d=identicon&r=PG", "display_name": "Liang", "link": "https://stackoverflow.com/users/795201/liang"}, "edited": false, "score": 0, "creation_date": 1546455943, "post_id": 38754107, "comment_id": 94860300, "body": "Sorry for digging out this question. My workaround is to call <code>fig.savefig</code> in the new cell to save to an image file and open the image in a viewer (e.g., EyeOfGnome) that refreshes automatically to show the current copy. I still don&#39;t know how to show the figure in a new notebook cell. I think it might have something to do with Jupyter internals, particularly the <code>%matplotlib inline</code> directive. Maybe it will work in some backend."}, {"owner": {"reputation": 765, "user_id": 795201, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cccb688a4c22ab4802cdf844e0484289?s=128&d=identicon&r=PG", "display_name": "Liang", "link": "https://stackoverflow.com/users/795201/liang"}, "edited": false, "score": 0, "creation_date": 1546456738, "post_id": 38754107, "comment_id": 94860650, "body": "Another workaround is to use the interactive backend: <code>%matplotlib notebook</code>. A new plotting command will udpate the original canvas. But I believe this is still not quite what is intended."}], "answers": [{"comments": [{"owner": {"reputation": 851, "user_id": 260261, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/iAXqh.png?s=128&g=1", "display_name": "mbadawi23", "link": "https://stackoverflow.com/users/260261/mbadawi23"}, "edited": false, "score": 0, "creation_date": 1470332896, "post_id": 38768002, "comment_id": 64919763, "body": "If I go this rout, I&#39;d be creating <code>scatter</code> plot every time I call <code>ax.scatter()</code>. Still that did not work as expected in my notebook."}], "tags": [], "owner": {"reputation": 524, "user_id": 3364066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4ef70f45871160ab6b41a8abd0fbdbd?s=128&d=identicon&r=PG&f=1", "display_name": "Suganya", "link": "https://stackoverflow.com/users/3364066/suganya"}, "is_accepted": false, "score": -1, "last_activity_date": 1470315431, "creation_date": 1470315431, "answer_id": 38768002, "question_id": 38754107, "link": "https://stackoverflow.com/questions/38754107/ipython-how-to-show-the-same-plot-in-different-cells/38768002#38768002", "title": "IPython: How to show the same plot in different cells?", "body": "<p>Try the object-oriented interface of matplotlib  - <a href=\"http://matplotlib.org/api/figure_api.html#matplotlib.figure.Figure\" rel=\"nofollow\">matplotlib.figure</a>; you can use the reference of the Figure object created, as required. </p>\n\n<ul>\n<li>Create a figure object - <code>fig = plt.figure()</code></li>\n<li>Add axes to it - <code>ax = fig.add_axes([0.025, 0.025, 0.95, 0.95])</code></li>\n<li>Plot on the axis created - <code>ax.plot(X, Y)</code></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 916, "user_id": 5616591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e939e7d16afe12f5eb0a3bca57cf33d4?s=128&d=identicon&r=PG&f=1", "display_name": "Romeo Valentin", "link": "https://stackoverflow.com/users/5616591/romeo-valentin"}, "is_accepted": true, "score": 6, "last_activity_date": 1555997058, "creation_date": 1555997058, "answer_id": 55804817, "question_id": 38754107, "link": "https://stackoverflow.com/questions/38754107/ipython-how-to-show-the-same-plot-in-different-cells/55804817#55804817", "title": "IPython: How to show the same plot in different cells?", "body": "<p>I have found a solution! Basically you create a figure and the axis with <code>fig, ax = plt.subplots()</code> and then use the <code>ax</code> variable to draw (potentially in multiple cells). In any of the cells you want to replot the figure, just write <code>fig</code> as the last line of the cell, resulting in the cell using the updated figure as output.<br>\nSee my answer <a href=\"https://stackoverflow.com/a/55804777/5616591\">here</a> for more details.</p>\n"}], "owner": {"reputation": 851, "user_id": 260261, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/iAXqh.png?s=128&g=1", "display_name": "mbadawi23", "link": "https://stackoverflow.com/users/260261/mbadawi23"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2053, "favorite_count": 2, "accepted_answer_id": 55804817, "answer_count": 2, "score": 6, "last_activity_date": 1555997058, "creation_date": 1470260519, "question_id": 38754107, "link": "https://stackoverflow.com/questions/38754107/ipython-how-to-show-the-same-plot-in-different-cells", "title": "IPython: How to show the same plot in different cells?", "body": "<p>I'm still new to IPython Notebooks, Jupyter, and Python in general.</p>\n\n<p>I'm creating a scatter plot in a Jupyter notebook using the following code:</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\n\nn = 1024\nX = np.random.normal(0, 1, n)\nY = np.random.normal(0, 1, n)\nplt.axes([0.025, 0.025, 0.95, 0.95])\nplt.scatter(X, Y, s=50)\n\nplt.show()\n</code></pre>\n\n<p>My question is, how can I get a reference to the plot object so I can use it in a different cell later on in the notebook? Additionally, I may need to modify the plot before showing it again.</p>\n\n<p>Also, I have <code>%matplotlib inline</code> at the top of my notebook.</p>\n\n<p>Here are some info about my environment:</p>\n\n<ul>\n<li><strong>Python:</strong> 3.5.2 64bit [MSC v.1900 64 bit (AMD64)]</li>\n<li><strong>IPython:</strong> 4.2.0</li>\n<li><strong>numpy:</strong> 1.11.1</li>\n<li><strong>scipy:</strong> 0.17.1</li>\n<li><strong>matplotlib:</strong> 1.5.1</li>\n<li><strong>sympy:</strong> 1.0</li>\n<li><strong>OS:</strong> Windows 7 6.1.7601 SP1</li>\n</ul>\n"}, {"tags": ["python", "arrays", "indexing"], "answers": [{"tags": [], "owner": {"reputation": 51, "user_id": 4904137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08728166b462b2585b71d90198928ff1?s=128&d=identicon&r=PG&f=1", "display_name": "Joel Sampson", "link": "https://stackoverflow.com/users/4904137/joel-sampson"}, "is_accepted": true, "score": 0, "last_activity_date": 1470261184, "creation_date": 1470261184, "answer_id": 38754255, "question_id": 38754079, "link": "https://stackoverflow.com/questions/38754079/how-do-i-subset-a-2d-grid-from-another-2d-grid-in-python/38754255#38754255", "title": "How do I subset a 2D grid from another 2D grid in python?", "body": "<p>Edub,</p>\n\n<p>I suggest looking on at numpy's matrix indexing documentation, specifically <a href=\"http://docs.scipy.org/doc/numpy-1.10.1/user/basics.indexing.html#other-indexing-options\" rel=\"nofollow\">http://docs.scipy.org/doc/numpy-1.10.1/user/basics.indexing.html#other-indexing-options</a> .  Currently, you are providing two dimensions for indexing, but no slicing information (resulting in only receiving one dimensional results). I hope this proves useful!</p>\n"}], "owner": {"reputation": 507, "user_id": 4544147, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh6.googleusercontent.com/-LsNf2tVvOrQ/AAAAAAAAAAI/AAAAAAAAAYQ/xn2uI__3Xf0/photo.jpg?sz=128", "display_name": "edub", "link": "https://stackoverflow.com/users/4544147/edub"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "accepted_answer_id": 38754255, "answer_count": 1, "score": 0, "last_activity_date": 1470261184, "creation_date": 1470260368, "question_id": 38754079, "link": "https://stackoverflow.com/questions/38754079/how-do-i-subset-a-2d-grid-from-another-2d-grid-in-python", "title": "How do I subset a 2D grid from another 2D grid in python?", "body": "<p>I have gridded data over the contiguous United States and I'm trying to select a chunk of it over a specific area.</p>\n\n<pre><code>import numpy as np\nfrom netCDF4 import Dataset\nimport matplotlib.pyplot as plt\n\nfilename = '/Users/me/myfile.nc'\nfull_data = Dataset(filename,'r')\nlatitudes = full_data.variables['latitude'][0,:,:] \nlongitudes = full_data.variables['longitude'][0,:,:]\ntemperature = full_data.variables['temperature'][0,:,:]\n</code></pre>\n\n<p>All three variables are 2-dimensional matrices of shape (337,451). I'm trying to do the following to get a sub-selection of the data over a specific region.</p>\n\n<pre><code>index = (latitudes&gt;=44.0)&amp;(latitudes&lt;=45.0)&amp;(longitudes&gt;=-91.0)&amp;(longitudes&lt;=-89.0)\ntemp_subset = temperature[index]\nlat_subset = latitudes[index]\nlon_subset = longitudes[index]\n</code></pre>\n\n<p>I would expect all three of these variables to be 2-dimensional, but instead they all return a flattened array with a shape of (102,). I've tried another approach:</p>\n\n<pre><code>index2 = np.where((latitudes&gt;=44.0)&amp;(latitudes&lt;=45.0)&amp;(longitudes&gt;=-91.0)&amp;(longitudes&lt;=-89.0))\ntemp = temperatures[index2[0],:]\ntemp2 = temp[:,index2[1]]\nplt.imshow(temp2,origin='lower')\nplt.colobar()\n</code></pre>\n\n<p>But my data looks quite incorrect. Is there a better way to get a 2D subset grid from a larger grid?</p>\n\n<p><a href=\"https://i.stack.imgur.com/smavb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/smavb.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "python-3.x", "split"], "comments": [{"owner": {"reputation": 84731, "user_id": 510937, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/70b13a9ae1aae1ca1aa6ac8dab4643f2?s=128&d=identicon&r=PG", "display_name": "Bakuriu", "link": "https://stackoverflow.com/users/510937/bakuriu"}, "edited": false, "score": 0, "creation_date": 1470260794, "post_id": 38754072, "comment_id": 64882194, "body": "You can&#39;t do this only using <code>str.split</code>. Either use the <code>re</code> module or just join the strings afterwards."}], "answers": [{"comments": [{"owner": {"reputation": 935, "user_id": 6312416, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8f49f352cf3013c58d36c09051a76e6a?s=128&d=identicon&r=PG&f=1", "display_name": "nedla2004", "link": "https://stackoverflow.com/users/6312416/nedla2004"}, "edited": false, "score": 0, "creation_date": 1470264139, "post_id": 38754167, "comment_id": 64883360, "body": "This answer will work, but is not as concise as @Haifeng Zhang&#39;s answer. Also if for example a was input form the user, if someone was trying to break the code they could by typing &#39;###&#39;. Thanks for the answer though!"}], "tags": [], "owner": {"reputation": 23980, "user_id": 1735756, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SloZJ.jpg?s=128&g=1", "display_name": "Haifeng Zhang", "link": "https://stackoverflow.com/users/1735756/haifeng-zhang"}, "is_accepted": false, "score": 0, "last_activity_date": 1470260822, "creation_date": 1470260822, "answer_id": 38754167, "question_id": 38754072, "link": "https://stackoverflow.com/questions/38754072/python-split-unless-next-character-is-something/38754167#38754167", "title": "Python Split Unless Next Character Is Something", "body": "<p>You can repalce <code>\\n_</code> with some characters and then split the string with delimiter <code>\\n</code></p>\n\n<pre><code>&gt;&gt;&gt; a = '''red\n... yellow\n... green\n... _surprise!\n... blue'''\n&gt;&gt;&gt; a\n'red\\nyellow\\ngreen\\n_surprise!\\nblue'\n</code></pre>\n\n<p>Either:</p>\n\n<pre><code>&gt;&gt;&gt; [x.replace(\"###\", \"\\n_\") for x in a.replace(\"\\n_\", \"###\").split()]\n['red', 'yellow', 'green\\n_surprise!', 'blue']\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>&gt;&gt;&gt; [x.replace(\"###\", \"\\n_\") for x in a.replace(\"\\n_\", \"###\").splitlines()]\n['red', 'yellow', 'green\\n_surprise!', 'blue']\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 23980, "user_id": 1735756, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SloZJ.jpg?s=128&g=1", "display_name": "Haifeng Zhang", "link": "https://stackoverflow.com/users/1735756/haifeng-zhang"}, "edited": false, "score": 0, "creation_date": 1470260963, "post_id": 38754180, "comment_id": 64882271, "body": "it&#39;s quite easy and neat, +1!"}], "tags": [], "owner": {"reputation": 12837, "user_id": 2184364, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fe15cfa3ec22be57f1762ba905c8eb70?s=128&d=identicon&r=PG", "display_name": "Julien Spronck", "link": "https://stackoverflow.com/users/2184364/julien-spronck"}, "is_accepted": true, "score": 3, "last_activity_date": 1470260973, "last_edit_date": 1470260973, "creation_date": 1470260874, "answer_id": 38754180, "question_id": 38754072, "link": "https://stackoverflow.com/questions/38754072/python-split-unless-next-character-is-something/38754180#38754180", "title": "Python Split Unless Next Character Is Something", "body": "<p>It's pretty easy using regular expressions:</p>\n\n<pre><code>import re\nre.split('\\n(?!_)', a)\n# ['red', 'yellow', 'green\\n_surprise!', 'blue']\n</code></pre>\n\n<p>This regex litterally means <code>split by \\n not followed by _</code>.</p>\n"}], "owner": {"reputation": 935, "user_id": 6312416, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8f49f352cf3013c58d36c09051a76e6a?s=128&d=identicon&r=PG&f=1", "display_name": "nedla2004", "link": "https://stackoverflow.com/users/6312416/nedla2004"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 193, "favorite_count": 0, "accepted_answer_id": 38754180, "answer_count": 2, "score": -3, "last_activity_date": 1470260973, "creation_date": 1470260348, "question_id": 38754072, "link": "https://stackoverflow.com/questions/38754072/python-split-unless-next-character-is-something", "title": "Python Split Unless Next Character Is Something", "body": "<p>I am using Python 3.5, and I would like to split a string by the character <code>\\n</code>, or new line. however if the line starts with a underscore, for example, it should put that line with the one above it. I need the solution to work for all characters, not just underscore. It should work like this:</p>\n\n<pre><code>a = '''red\nyellow\ngreen\n_surprise!\nblue'''\n\nprint(a.split('\\n')\n</code></pre>\n\n<p>and should result in:</p>\n\n<pre><code>['red', 'yellow', 'green\\n_surprise', 'blue']\n</code></pre>\n\n<p>Thanks for any help!</p>\n"}, {"tags": ["python", "json", "regex"], "answers": [{"comments": [{"owner": {"reputation": 2966, "user_id": 3022310, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7f10ec2b45320ee843e539d705c31d08?s=128&d=identicon&r=PG", "display_name": "turbulencetoo", "link": "https://stackoverflow.com/users/3022310/turbulencetoo"}, "edited": false, "score": 0, "creation_date": 1470260782, "post_id": 38754114, "comment_id": 64882187, "body": "what does the second replace in each do? It seems to me that once we&#39;ve replaced all the &lt;CR&gt; characters, there won&#39;t be any sequences of <code>\\\\\\r</code> == <code>&lt;backslash&gt;&lt;CR&gt;</code> left"}, {"owner": {"reputation": 67, "user_id": 5045173, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/96f6a438c562cb61c6aa0098fb9c19e3?s=128&d=identicon&r=PG&f=1", "display_name": "Kayla Jin", "link": "https://stackoverflow.com/users/5045173/kayla-jin"}, "edited": false, "score": 0, "creation_date": 1470261233, "post_id": 38754114, "comment_id": 64882387, "body": "the initial answer worked fine! Thanks! I will try the regex version"}, {"owner": {"reputation": 2966, "user_id": 3022310, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7f10ec2b45320ee843e539d705c31d08?s=128&d=identicon&r=PG", "display_name": "turbulencetoo", "link": "https://stackoverflow.com/users/3022310/turbulencetoo"}, "edited": false, "score": 0, "creation_date": 1470261300, "post_id": 38754114, "comment_id": 64882414, "body": "from my test with your string, the double replace isn&#39;t neccessary, see <a href=\"http://pastebin.com/v9DTn0hp\" rel=\"nofollow noreferrer\">pastebin.com/v9DTn0hp</a> . Its because your first replace, which affects only ASCII 13 carriage returns doesn&#39;t affect anything that is a literal backslash (ASCII 92) followed by a literal r (ASCII 114)"}, {"owner": {"reputation": 3809, "user_id": 365796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SJK3v.png?s=128&g=1", "display_name": "vimist", "link": "https://stackoverflow.com/users/365796/vimist"}, "reply_to_user": {"reputation": 2966, "user_id": 3022310, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7f10ec2b45320ee843e539d705c31d08?s=128&d=identicon&r=PG", "display_name": "turbulencetoo", "link": "https://stackoverflow.com/users/3022310/turbulencetoo"}, "edited": false, "score": 0, "creation_date": 1470261572, "post_id": 38754114, "comment_id": 64882515, "body": "@turbulencetoo You&#39;re right, I&#39;d overlooked that. I&#39;ll make an edit. Thanks"}], "tags": [], "owner": {"reputation": 3809, "user_id": 365796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SJK3v.png?s=128&g=1", "display_name": "vimist", "link": "https://stackoverflow.com/users/365796/vimist"}, "is_accepted": true, "score": 3, "last_activity_date": 1470261588, "last_edit_date": 1470261588, "creation_date": 1470260550, "answer_id": 38754114, "question_id": 38754038, "link": "https://stackoverflow.com/questions/38754038/python-regex-escape-illegal-characters-only-if-its-not-escaped-already/38754114#38754114", "title": "python regex: escape illegal characters only if it&#39;s not escaped already", "body": "<p>You could do it like this using RegEx:</p>\n\n<pre><code>import re                                    \n\ndata = 'Hello\\r\\nWorld\\\\r\\\\n'                \nprint(data)                                  \n\nprint('-'*20)                                \n\ndata = re.sub(r'([^\\\\])\\r', '\\\\1\\\\\\\\r', data)\ndata = re.sub(r'([^\\\\])\\n', '\\\\1\\\\\\\\n', data)\nprint(data) \n</code></pre>\n\n<p><strong>Outputs:</strong></p>\n\n<pre><code>Hello               \nWorld\\r\\n           \n--------------------\nHello\\r\\nWorld\\r\\n  \n</code></pre>\n\n<p>Or, a slightly different approach would be to do it like this:</p>\n\n<pre><code>data = 'Hello\\r\\nWorld\\\\r\\\\n'                          \nprint(data)                                            \n\nprint('-'*20)                                          \n\ndata = data.replace('\\r', '\\\\r')\ndata = data.replace('\\n', '\\\\n')\nprint(data)  \n</code></pre>\n\n<p><strong>Outputs:</strong></p>\n\n<pre><code>Hello               \nWorld\\r\\n           \n--------------------\nHello\\r\\nWorld\\r\\n  \n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 5045173, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/96f6a438c562cb61c6aa0098fb9c19e3?s=128&d=identicon&r=PG&f=1", "display_name": "Kayla Jin", "link": "https://stackoverflow.com/users/5045173/kayla-jin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 176, "favorite_count": 0, "accepted_answer_id": 38754114, "answer_count": 1, "score": 0, "last_activity_date": 1470261588, "creation_date": 1470260191, "question_id": 38754038, "link": "https://stackoverflow.com/questions/38754038/python-regex-escape-illegal-characters-only-if-its-not-escaped-already", "title": "python regex: escape illegal characters only if it&#39;s not escaped already", "body": "<p>Right now I'm taking in files as string and formatting them into json. The file contains \\r, \\n characters that I want to escape, but there are json objects in the files which already has those illegal characters escaped, like \\\\r and \\\\n. So right now I want to replace \\r \\n characters with \\\\r \\\\n only if it's not preceded by one \\</p>\n\n<p>I have tried this below.. but I'm not sure why it doesn't work</p>\n\n<pre><code>re.sub(r'[^\\][\\n]', r'\\\\\\\\n', s)\n</code></pre>\n\n<p>any suggestion would be appreciated!</p>\n"}, {"tags": ["python", "file", "upload", "python-requests", "ironpython"], "comments": [{"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1470260272, "post_id": 38754028, "comment_id": 64881978, "body": "Quoting from the dupe: <i>There is an additional problem with requests, an issue with supported encodings (<a href=\"https://ironpython.codeplex.com/workitem/4565\" rel=\"nofollow noreferrer\">ironpython.codeplex.com/workitem/4565</a>) prevents that from working. The issue has been open for ages.</i>"}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1470260328, "post_id": 38754028, "comment_id": 64881998, "body": "Not that I can be certain that that is your issue still; please update the question with a <i>full</i> traceback so we can diagnose better."}, {"owner": {"reputation": 1149, "user_id": 3708175, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/17131040/picture?type=large", "display_name": "sramalingam24", "link": "https://stackoverflow.com/users/3708175/sramalingam24"}, "reply_to_user": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1470262222, "post_id": 38754028, "comment_id": 64882759, "body": "i can not post the stack trace as it is has sensitive info. And i see the issue you mention is closed. Is there any other module in ironpython i can use to do this easily? Thanks"}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1470293033, "post_id": 38754028, "comment_id": 64892414, "body": "Surely you can just create a sample file makes the same call and produces the same traceback, without any sensitive info? If not, what is different between the two situations to produce a traceback?"}], "owner": {"reputation": 1149, "user_id": 3708175, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/17131040/picture?type=large", "display_name": "sramalingam24", "link": "https://stackoverflow.com/users/3708175/sramalingam24"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 115, "favorite_count": 0, "closed_date": 1470260243, "answer_count": 0, "score": 0, "last_activity_date": 1471469938, "creation_date": 1470260133, "last_edit_date": 1471469938, "question_id": 38754028, "link": "https://stackoverflow.com/questions/38754028/upload-file-with-requests-module-in-ironpython", "closed_reason": "Duplicate", "title": "Upload file with requests module in IronPython", "body": "<p>I am trying to upload a file with the following call in IronPython</p>\n\n<pre><code>file={'uploadfile': ('data.csv', open(\"C:/Users/s/Desktop/data.csv\",'rb'))}   \nprint(file) \nres = requests.post(url, files=file) \n</code></pre>\n\n<p>This works in regular Python but in IronPython2.7.5 this throws an error</p>\n\n<pre><code>\"expected str, got bytes\"\n</code></pre>\n\n<p>Any ideas why? thanks!</p>\n\n<p>NeverMind, Used Poster module to perform the upload</p>\n\n<pre><code>from poster.encode import multipart_encode, MultipartParam\nfrom poster.streaminghttp import register_openers\nimport urllib2\n\nregister_openers()\nitems=[]\nitems.append(MultipartParam.from_file(\"upfile\",   \"c:/Users/s/Desktop/data.csv\"))    \ndatagen, headers = multipart_encode(items)\n#print(\"\".join(datagen))\nreq=urllib2.Request(url, datagen, headers)\nres=urllib2.urlopen(req)\n</code></pre>\n\n<p>This seems to have a problem with poster not closing the file correctly, so another approach</p>\n\n<pre><code>register_openers()\nfileObj=open(dataFileLoc, 'rb')\nfileData=MultipartParam(name=kfileUpload,filename=fileName,fileobj=fileObj)        \nitems={kfileUpload: fileData}\ndatagen, headers = multipart_encode(items)    \n\nreq=urllib2.Request(url, datagen, headers)    \nres=urllib2.urlopen(req)\nfileObj.close()\n</code></pre>\n"}, {"tags": ["python", "dictionary", "keyerror"], "comments": [{"owner": {"reputation": 12837, "user_id": 2184364, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fe15cfa3ec22be57f1762ba905c8eb70?s=128&d=identicon&r=PG", "display_name": "Julien Spronck", "link": "https://stackoverflow.com/users/2184364/julien-spronck"}, "edited": false, "score": 0, "creation_date": 1470260320, "post_id": 38754024, "comment_id": 64881997, "body": "<code>story</code> is not equal to 1 when you get the error"}, {"owner": {"reputation": 12837, "user_id": 2184364, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fe15cfa3ec22be57f1762ba905c8eb70?s=128&d=identicon&r=PG", "display_name": "Julien Spronck", "link": "https://stackoverflow.com/users/2184364/julien-spronck"}, "edited": false, "score": 1, "creation_date": 1470260455, "post_id": 38754024, "comment_id": 64882053, "body": "try this: <code>for story in My2Ddict: print &#39;title&#39; in My2Ddict[story]</code>. If one of them is False, you&#39;ll get this error."}, {"owner": {"reputation": 35, "user_id": 5597956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb4bc10424a09d7b7d855c2c40a65aaf?s=128&d=identicon&r=PG&f=1", "display_name": "DebNa", "link": "https://stackoverflow.com/users/5597956/debna"}, "reply_to_user": {"reputation": 12837, "user_id": 2184364, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fe15cfa3ec22be57f1762ba905c8eb70?s=128&d=identicon&r=PG", "display_name": "Julien Spronck", "link": "https://stackoverflow.com/users/2184364/julien-spronck"}, "edited": false, "score": 0, "creation_date": 1470268710, "post_id": 38754024, "comment_id": 64884590, "body": "Thanks @Julien Spronck! This helped troubleshooting the error. It was in fact an indexing issue since My2Ddict is indexed from 1 by row_index but later, story starts from 0."}], "owner": {"reputation": 35, "user_id": 5597956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb4bc10424a09d7b7d855c2c40a65aaf?s=128&d=identicon&r=PG&f=1", "display_name": "DebNa", "link": "https://stackoverflow.com/users/5597956/debna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1517723784, "creation_date": 1470260119, "last_edit_date": 1517723784, "question_id": 38754024, "link": "https://stackoverflow.com/questions/38754024/keyerror-for-2d-dictionary-when-called-in-a-loop-but-very-same-code-works-outsid", "title": "KeyError for 2D dictionary when called in a loop but very same code works outside the loop", "body": "<p>I'm populating a 2D dictionary by looping over its elements. This is the initialization of the dictionary:</p>\n\n<pre><code>    My2Ddict = defaultdict(dict)\n    row_index = 0\n    with open('/Path/To/CSVFile.csv', 'rb') as f:\n        next(f) # skip header line\n        reader = csv.reader(f, delimiter=',')\n        for row in reader:\n        row_index += 1\n        My2Ddict[row_index]['title'] = row[2]\n</code></pre>\n\n<p>Then I try to add a new key-values to each item in ''My2Ddict'':</p>\n\n<pre><code>    for story in My2Ddict:\n        My2Ddict[story]['title_length'] = len(My2Ddict[story]['title'])\n</code></pre>\n\n<p>Here I get the error:</p>\n\n<pre><code>    KeyError: 'title'\n</code></pre>\n\n<p>But if I run the following command outside the loop, it works fine and returns a numeric value: </p>\n\n<pre><code>    print \"len(My2Ddict[1]['title']): %n\" %len(My2Ddict[1]['title'])\n</code></pre>\n\n<p>I have checked and this does not seem to be an indexing issue. Have got no clue how to proceed... </p>\n"}, {"tags": ["python", "visa"], "answers": [{"tags": [], "owner": {"reputation": 3575, "user_id": 5334188, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5174dfb78299414039e19e27ce37efde?s=128&d=identicon&r=PG&f=1", "display_name": "be_good_do_good", "link": "https://stackoverflow.com/users/5334188/be-good-do-good"}, "is_accepted": false, "score": 2, "last_activity_date": 1470261077, "creation_date": 1470261077, "answer_id": 38754231, "question_id": 38754007, "link": "https://stackoverflow.com/questions/38754007/python3-4-import-visa-fails-this-worked-under-python3-5/38754231#38754231", "title": "python3.4 import visa fails, this worked under python3.5", "body": "<p>If you have installed pyvisa by using below command:</p>\n\n<pre><code>pip install pyvisa\n</code></pre>\n\n<p>Then it gets installed in site packages of python 3.5 (or) site packages of that specific python version (whichever python that is serving at that point of time)</p>\n\n<p>If you want that to be available for all python versions, install it to separate folder and add that path as value  to PYTHONPATH (system variable). If there is no such variable, create one. Command to install it to separate folder is:</p>\n\n<pre><code>pip install pyvisa -t c:\\external\n</code></pre>\n\n<p>(Or)</p>\n\n<p>Re-install it using pip from specific python version</p>\n\n<pre><code>C:\\Python34\\python.exe -m pip install pyvisa\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 6674339, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208515780990039/picture?type=large", "display_name": "David Miller", "link": "https://stackoverflow.com/users/6674339/david-miller"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 728, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1470261077, "creation_date": 1470260000, "question_id": 38754007, "link": "https://stackoverflow.com/questions/38754007/python3-4-import-visa-fails-this-worked-under-python3-5", "title": "python3.4 import visa fails, this worked under python3.5", "body": "<p>OK, I loaded Python 3.5 PYVISA, and set up my path variables in Windows, and import visa worked!  Yay!</p>\n\n<p>Now I want to create an executable, using cx_Freeze.  I try running it, and it says it wants to see Python 3.4.</p>\n\n<p>OK, I load Python 3.4. I add python34 paths to Windows and start up idle, load my script, and try to import visa, no module named visa.</p>\n\n<p>What do I have to do to get the script to run under Python 3.4?</p>\n\n<p>thank you</p>\n"}, {"tags": ["python", "background-color", "yt-project"], "answers": [{"comments": [{"owner": {"reputation": 819, "user_id": 4936409, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/455864806ee3a86bd59707bfd347cea3?s=128&d=identicon&r=PG&f=1", "display_name": "bhjghjh", "link": "https://stackoverflow.com/users/4936409/bhjghjh"}, "edited": false, "score": 0, "creation_date": 1470269560, "post_id": 38754068, "comment_id": 64884798, "body": "thanks @nathan12343, but I get this AttributeError: &#39;module&#39; object has no attribute &#39;viridis&#39;, yt and matplotlib are imported. does it need another mudule to import ?"}, {"owner": {"reputation": 4758, "user_id": 1382869, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/a96J8.jpg?s=128&g=1", "display_name": "ngoldbaum", "link": "https://stackoverflow.com/users/1382869/ngoldbaum"}, "reply_to_user": {"reputation": 819, "user_id": 4936409, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/455864806ee3a86bd59707bfd347cea3?s=128&d=identicon&r=PG&f=1", "display_name": "bhjghjh", "link": "https://stackoverflow.com/users/4936409/bhjghjh"}, "edited": false, "score": 0, "creation_date": 1470271947, "post_id": 38754068, "comment_id": 64885399, "body": "Viridis is a new colormap that comes in matplotlib 1.5.0 and newer. You can use any matplotlib colormap you want, although you could also update matplotlib to get viridis."}, {"owner": {"reputation": 819, "user_id": 4936409, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/455864806ee3a86bd59707bfd347cea3?s=128&d=identicon&r=PG&f=1", "display_name": "bhjghjh", "link": "https://stackoverflow.com/users/4936409/bhjghjh"}, "edited": false, "score": 0, "creation_date": 1470274682, "post_id": 38754068, "comment_id": 64886902, "body": "at this point, I think it would be enough if I just set the background color to be white,  I will get rid of unbound material through that, can you show me the code to set background color white for this plot?"}, {"owner": {"reputation": 4758, "user_id": 1382869, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/a96J8.jpg?s=128&g=1", "display_name": "ngoldbaum", "link": "https://stackoverflow.com/users/1382869/ngoldbaum"}, "reply_to_user": {"reputation": 819, "user_id": 4936409, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/455864806ee3a86bd59707bfd347cea3?s=128&d=identicon&r=PG&f=1", "display_name": "bhjghjh", "link": "https://stackoverflow.com/users/4936409/bhjghjh"}, "edited": false, "score": 0, "creation_date": 1470274924, "post_id": 38754068, "comment_id": 64886948, "body": "I&#39;m confused - it&#39;s already white in the version of the plot in your question."}, {"owner": {"reputation": 819, "user_id": 4936409, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/455864806ee3a86bd59707bfd347cea3?s=128&d=identicon&r=PG&f=1", "display_name": "bhjghjh", "link": "https://stackoverflow.com/users/4936409/bhjghjh"}, "edited": false, "score": 0, "creation_date": 1470275279, "post_id": 38754068, "comment_id": 64887010, "body": "The white part in my figure denotes the unbound material, but I don&#39;t want to show that, I thought if I could set my figure in a complete white background then the unbound part will blend completely with the background and it will not be prominent anymore"}, {"owner": {"reputation": 4758, "user_id": 1382869, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/a96J8.jpg?s=128&g=1", "display_name": "ngoldbaum", "link": "https://stackoverflow.com/users/1382869/ngoldbaum"}, "reply_to_user": {"reputation": 819, "user_id": 4936409, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/455864806ee3a86bd59707bfd347cea3?s=128&d=identicon&r=PG&f=1", "display_name": "bhjghjh", "link": "https://stackoverflow.com/users/4936409/bhjghjh"}, "edited": false, "score": 0, "creation_date": 1470275688, "post_id": 38754068, "comment_id": 64887096, "body": "I still think the easiest way to do this is to pick a background color that matches the bottom color of your colormap. I&#39;ll update my answer with something that should work with your version of matplotlib."}], "tags": [], "owner": {"reputation": 4758, "user_id": 1382869, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/a96J8.jpg?s=128&g=1", "display_name": "ngoldbaum", "link": "https://stackoverflow.com/users/1382869/ngoldbaum"}, "is_accepted": true, "score": 1, "last_activity_date": 1470276067, "last_edit_date": 1470276067, "creation_date": 1470260337, "answer_id": 38754068, "question_id": 38753964, "link": "https://stackoverflow.com/questions/38753964/sliceplot-for-bound-material-in-yt-without-showing-unbound/38754068#38754068", "title": "sliceplot for bound material in yt without showing unbound", "body": "<p>Here's an example that shows how to manipulate the colorbar so the background color matches the color at the bottom of the colorbar:</p>\n\n<p><a href=\"https://gist.github.com/4d07fc6475becd18b793e15ae2f00dff\" rel=\"nofollow\">https://gist.github.com/4d07fc6475becd18b793e15ae2f00dff</a></p>\n"}], "owner": {"reputation": 819, "user_id": 4936409, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/455864806ee3a86bd59707bfd347cea3?s=128&d=identicon&r=PG&f=1", "display_name": "bhjghjh", "link": "https://stackoverflow.com/users/4936409/bhjghjh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 38754068, "answer_count": 1, "score": 2, "last_activity_date": 1470276067, "creation_date": 1470259790, "question_id": 38753964, "link": "https://stackoverflow.com/questions/38753964/sliceplot-for-bound-material-in-yt-without-showing-unbound", "title": "sliceplot for bound material in yt without showing unbound", "body": "<p>I am trying to mask out the bound density of a system with the masking field </p>\n\n<pre><code>@derived_field(name = \"bound_density\", units = \"g/cm**3\")\ndef _get_ejected_density(field, data):\n        E = 0.5* data[\"cell_mass\"]* (data[\"velx\"]**2+data[\"vely\"]**2+data[\"velz\"]**2)+ data[\"gpot\"]*data[\"cell_mass\"]\n        return ((np.array(E)&lt;0)*1)*data[\"density\"]\n</code></pre>\n\n<p>It also returns the unbound density with the white color bars along with the bound density, but I don't want to show the unbound things here. </p>\n\n<p>I was wondering if there is a way I can only show the bound material in this plot. \nAlso another solution would be setting the unbound density color bar matching to the floor bar, hence 1.0e0, so that while the plot still shows the unbound density, it exactly matches the lowest density color bar in the plot and thus cannot be distinguished.</p>\n\n<p><a href=\"https://i.stack.imgur.com/0AtCH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0AtCH.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "python-2.7", "variables", "global-variables", "global"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1470260395, "post_id": 38753914, "comment_id": 64882031, "body": "Pretty much never rely on imported mutable global variables, and <b><i>never</i></b> import a mutable global with a <code>from</code> import. This is what happens when you do."}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 3251933, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a7b3a54c92b1ed7a6bd326faf6e87138?s=128&d=identicon&r=PG&f=1", "display_name": "ankur", "link": "https://stackoverflow.com/users/3251933/ankur"}, "edited": false, "score": 0, "creation_date": 1470260759, "post_id": 38754017, "comment_id": 64882174, "body": "Thanks joel. So is there no way we can modify a global variable inside a.py and use that &quot;updated&quot; variable in b.py, without calling any function? I mean is there any way in python, that we can modify a global variable and its updated value persists when we import it in a different file?"}, {"owner": {"reputation": 3966, "user_id": 469072, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/13ce453eb105a974aea64b2461cfc200?s=128&d=identicon&r=PG", "display_name": "joel goldstick", "link": "https://stackoverflow.com/users/469072/joel-goldstick"}, "reply_to_user": {"reputation": 5, "user_id": 3251933, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a7b3a54c92b1ed7a6bd326faf6e87138?s=128&d=identicon&r=PG&f=1", "display_name": "ankur", "link": "https://stackoverflow.com/users/3251933/ankur"}, "edited": false, "score": 0, "creation_date": 1470261107, "post_id": 38754017, "comment_id": 64882333, "body": "You should not use globals.  They will get you in trouble.  But you don&#39;t need <code>main()</code>.  See updated answer"}, {"owner": {"reputation": 5, "user_id": 3251933, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a7b3a54c92b1ed7a6bd326faf6e87138?s=128&d=identicon&r=PG&f=1", "display_name": "ankur", "link": "https://stackoverflow.com/users/3251933/ankur"}, "edited": false, "score": 0, "creation_date": 1470271734, "post_id": 38754017, "comment_id": 64885346, "body": "I understood the error in my code, but what I intend to do is not call main() again and make modifications to the &quot;Test&quot; variable based on a argument passed to the main hence I want those modifications to persist whenever I use &quot;Test&quot; in any other file. Is it possible to do so without calling main() again?"}], "tags": [], "owner": {"reputation": 3966, "user_id": 469072, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/13ce453eb105a974aea64b2461cfc200?s=128&d=identicon&r=PG", "display_name": "joel goldstick", "link": "https://stackoverflow.com/users/469072/joel-goldstick"}, "is_accepted": false, "score": 1, "last_activity_date": 1470261170, "last_edit_date": 1470261170, "creation_date": 1470260060, "answer_id": 38754017, "question_id": 38753914, "link": "https://stackoverflow.com/questions/38753914/sharing-global-variables-in-python/38754017#38754017", "title": "Sharing Global variables in python", "body": "<pre><code>import a\na.main()\nprint a.Test\na.Test = \"new Value\"\nprint a.Text\n</code></pre>\n\n<p>You never invoke the main function.  When you import a module, <code>__name__</code> is not <code>\"__main__\"</code>, so your main() never runs.  When you run a.py directly it will run main()</p>\n"}, {"comments": [{"owner": {"reputation": 5, "user_id": 3251933, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a7b3a54c92b1ed7a6bd326faf6e87138?s=128&d=identicon&r=PG&f=1", "display_name": "ankur", "link": "https://stackoverflow.com/users/3251933/ankur"}, "edited": false, "score": 0, "creation_date": 1470271752, "post_id": 38754246, "comment_id": 64885352, "body": "Thanks for the reply. I understood the error in my code, but what I intend to do is not call main() again and make modifications to the &quot;Test&quot; variable based on a argument passed to the main hence I want those modifications to persist whenever I use &quot;Test&quot; in any other file. Is it possible to do so without calling main() again?"}, {"owner": {"reputation": 74, "user_id": 6672390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50980e5a1d0b0e467b305b91f11256b6?s=128&d=identicon&r=PG&f=1", "display_name": "Neil Crossley", "link": "https://stackoverflow.com/users/6672390/neil-crossley"}, "reply_to_user": {"reputation": 5, "user_id": 3251933, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a7b3a54c92b1ed7a6bd326faf6e87138?s=128&d=identicon&r=PG&f=1", "display_name": "ankur", "link": "https://stackoverflow.com/users/3251933/ankur"}, "edited": false, "score": 0, "creation_date": 1470293007, "post_id": 38754246, "comment_id": 64892394, "body": "I changed my answer to reflect these questions."}, {"owner": {"reputation": 5, "user_id": 3251933, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a7b3a54c92b1ed7a6bd326faf6e87138?s=128&d=identicon&r=PG&f=1", "display_name": "ankur", "link": "https://stackoverflow.com/users/3251933/ankur"}, "edited": false, "score": 0, "creation_date": 1470330467, "post_id": 38754246, "comment_id": 64918422, "body": "Thanks a lot for the detailed explanation. I think I understood where the problem is."}], "tags": [], "owner": {"reputation": 74, "user_id": 6672390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50980e5a1d0b0e467b305b91f11256b6?s=128&d=identicon&r=PG&f=1", "display_name": "Neil Crossley", "link": "https://stackoverflow.com/users/6672390/neil-crossley"}, "is_accepted": true, "score": 0, "last_activity_date": 1470292985, "last_edit_date": 1470292985, "creation_date": 1470261141, "answer_id": 38754246, "question_id": 38753914, "link": "https://stackoverflow.com/questions/38753914/sharing-global-variables-in-python/38754246#38754246", "title": "Sharing Global variables in python", "body": "<h2>Added due to question edit:</h2>\n\n<p>You need to consider the ordering of the imports execution. Consider these working files.</p>\n\n<p>a.py</p>\n\n<pre><code>print(\"Entering a\")\nimport argparse\n\nimport b\nTest=\"abc\"\nprint(\"Id of Test: \", id(Test))\n\ndef main(args):\n  global Test\n  if args.target==\"this\":\n     Test=\"klm\"\n  b.fun()\n  #rest of the body which I intend to execute only once\n  #hence I cannot call main() again\nif __name__ == \"__main__\":\n  #some arguments are parsed\n  print('Entering main')\n  parser = argparse.ArgumentParser()\n  parser.add_argument('--target', dest='target', type=str)\n  args = parser.parse_args()\n  main(args)\n</code></pre>\n\n<p>b.py</p>\n\n<pre><code>print(\"Entering b\")\nimport a\nprint a.Test\n\ndef fun():\n    pass\n</code></pre>\n\n<p>The console produces the following:</p>\n\n<pre><code>$ python a.py\nEntering a\nEntering b\nEntering a\n('Id of Test: ', 40012016L)\nabc\n('Id of Test: ', 40012016L)\nEntering main\n</code></pre>\n\n<p>The problem is, when you import a python module/file, you will immediately execute all the statements in that module. As such, you have a problem with your dependencies (aka imports), because b is importing a before the value of Test is 'corrected' and then immediately acting on this.</p>\n\n<p>Consider two changes. First, introduce a third file <code>config.py</code> that contains this configuration information and that b does not import a. Second, move all your statements that require this config in b into functions that are called/bootstrapped by a, as obviously intended.</p>\n\n<h2>Previous answer:</h2>\n\n<p>I have a solution demonstrating the issue, by only modifying b.py</p>\n\n<pre><code>def fun():  # Added because your main calls this. An error?\n    pass\n\nfrom a import Test, main\nimport a\nprint Test    # prints 'abc'\nprint a.Test  # prints 'abc'\nmain()\nprint Test    # prints 'abc'\nprint a.Test  # prints 'klm'\n</code></pre>\n\n<p>Within the python interpretor, I can produce the following:</p>\n\n<pre><code>&gt;&gt;&gt; import b\nabc\nabc\nabc\nklm\n</code></pre>\n\n<p>In your code, you create a new variable called <code>Test</code> with the command <code>from a import Test</code> that points to the original string object. You actually want to access the <code>Test</code> variable owned by the module <code>a</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 5, "user_id": 3251933, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a7b3a54c92b1ed7a6bd326faf6e87138?s=128&d=identicon&r=PG&f=1", "display_name": "ankur", "link": "https://stackoverflow.com/users/3251933/ankur"}, "edited": false, "score": 0, "creation_date": 1470271762, "post_id": 38754333, "comment_id": 64885356, "body": "Thanks for the reply. I understood the error in my code, but what I intend to do is not call main() again and make modifications to the &quot;Test&quot; variable based on a argument passed to the main hence I want those modifications to persist whenever I use &quot;Test&quot; in any other file. Is it possible to do so without calling main() again?"}, {"owner": {"reputation": 26, "user_id": 6674419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bae95f9ddffae1ac3ca59ca387b6e6d?s=128&d=identicon&r=PG&f=1", "display_name": "Dullvampire", "link": "https://stackoverflow.com/users/6674419/dullvampire"}, "reply_to_user": {"reputation": 5, "user_id": 3251933, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a7b3a54c92b1ed7a6bd326faf6e87138?s=128&d=identicon&r=PG&f=1", "display_name": "ankur", "link": "https://stackoverflow.com/users/3251933/ankur"}, "edited": false, "score": 0, "creation_date": 1470273368, "post_id": 38754333, "comment_id": 64886657, "body": "As I said you could remove the if statement in the module and it will run main()."}], "tags": [], "owner": {"reputation": 26, "user_id": 6674419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bae95f9ddffae1ac3ca59ca387b6e6d?s=128&d=identicon&r=PG&f=1", "display_name": "Dullvampire", "link": "https://stackoverflow.com/users/6674419/dullvampire"}, "is_accepted": false, "score": 0, "last_activity_date": 1470261533, "creation_date": 1470261533, "answer_id": 38754333, "question_id": 38753914, "link": "https://stackoverflow.com/questions/38753914/sharing-global-variables-in-python/38754333#38754333", "title": "Sharing Global variables in python", "body": "<p>In a.py you run main in the if statement:</p>\n\n<pre><code>if __name__ == \"__main__\":\n     main()\n</code></pre>\n\n<p>Only executes main() if that is the main script. When you import the module all the code in the if block is not run because it is not the main script. To have the main method be called remove the if statement or just call main in b.py.</p>\n"}], "owner": {"reputation": 5, "user_id": 3251933, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a7b3a54c92b1ed7a6bd326faf6e87138?s=128&d=identicon&r=PG&f=1", "display_name": "ankur", "link": "https://stackoverflow.com/users/3251933/ankur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 38754246, "answer_count": 3, "score": -1, "last_activity_date": 1470292985, "creation_date": 1470259553, "last_edit_date": 1470271484, "question_id": 38753914, "link": "https://stackoverflow.com/questions/38753914/sharing-global-variables-in-python", "title": "Sharing Global variables in python", "body": "<p>I have 2 files a.py and b.py as follows:</p>\n\n<p>a.py</p>\n\n<pre><code>import b.py\nTest=\"abc\"\ndef main(args):\n  global Test\n  if args.target==\"this\":\n     Test=\"klm\"\n  b.fun()\n  #rest of the body which I intend to execute only once\n  #hence I cannot call main() again\nif __name__ == \"__main__\":\n  #some arguments are parsed\n  args = parser.parse_args()\n  main(args)\n</code></pre>\n\n<p>b.py</p>\n\n<pre><code>import a\nprint a.Test\n</code></pre>\n\n<p>EDIT: Output:</p>\n\n<pre><code>python a.py\nabc\n</code></pre>\n\n<p>So basically my question is why is the Test variable not getting updated in b.py and how can I make this work? Thanks.</p>\n"}, {"tags": ["python", "regex", "beautifulsoup"], "comments": [{"owner": {"reputation": 658058, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "edited": false, "score": 0, "creation_date": 1470259856, "post_id": 38753904, "comment_id": 64881763, "body": "Why do you have <code>&gt;</code> also as delimiter?"}], "answers": [{"tags": [], "owner": {"reputation": 3809, "user_id": 365796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SJK3v.png?s=128&g=1", "display_name": "vimist", "link": "https://stackoverflow.com/users/365796/vimist"}, "is_accepted": false, "score": 0, "last_activity_date": 1470259937, "creation_date": 1470259937, "answer_id": 38753997, "question_id": 38753904, "link": "https://stackoverflow.com/questions/38753904/extracting-a-string-between-2-chracters-using-python/38753997#38753997", "title": "Extracting a string between 2 chracters using python", "body": "<p>As long as you're parsing out the HTML correctly with BeautifulSoup and are just left with the contents of the span, then you should just be able to use this as a RegEx:</p>\n\n<pre><code>import re\n\ntarget = ' ~~~~ AAA ^ BBB ^ CCC &gt; DDD ^  '\n\nmatchObj = re.findall('(\\w{3})', target)\n\nprint(matchObj)\n</code></pre>\n\n<p><strong>Outputs:</strong></p>\n\n<pre><code>['AAA', 'BBB', 'CCC', 'DDD']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 12837, "user_id": 2184364, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fe15cfa3ec22be57f1762ba905c8eb70?s=128&d=identicon&r=PG", "display_name": "Julien Spronck", "link": "https://stackoverflow.com/users/2184364/julien-spronck"}, "is_accepted": false, "score": 0, "last_activity_date": 1470260030, "creation_date": 1470260030, "answer_id": 38754011, "question_id": 38753904, "link": "https://stackoverflow.com/questions/38753904/extracting-a-string-between-2-chracters-using-python/38754011#38754011", "title": "Extracting a string between 2 chracters using python", "body": "<p>You could do this:</p>\n\n<pre><code>[x.strip('~ ') for x in re.split(' *[\\^\\&gt;] *', s) if x]\n# ['AAA', 'BBB', 'CCC', 'DDD']\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 6629959, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/32e165afe168ced8ffd9e49d0f9d6dfb?s=128&d=identicon&r=PG&f=1", "display_name": "dragon", "link": "https://stackoverflow.com/users/6629959/dragon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "closed_date": 1470259925, "answer_count": 2, "score": -1, "last_activity_date": 1470261277, "creation_date": 1470259518, "last_edit_date": 1470261277, "question_id": 38753904, "link": "https://stackoverflow.com/questions/38753904/extracting-a-string-between-2-chracters-using-python", "closed_reason": "Duplicate", "title": "Extracting a string between 2 chracters using python", "body": "<p>I need a Python regex to give me all the strings between <code>~</code> and <code>^</code> from a string like this:</p>\n\n<pre><code>~~~~ AAA ^ BBB ^ CCC &gt; DDD ^ \n</code></pre>\n\n<p>I've tried this:</p>\n\n<pre><code>import re\ntarget = ' ~~~~ AAA &gt; ^ BBB ^ CCC &gt; DDD ^  '\nmatchObj = re.findall(r'~(.*?)\\^', target)\nprint matchObj \n</code></pre>\n\n<p>But the result is:</p>\n\n<pre><code>['~~~ ABC ']\n</code></pre>\n\n<p>What I expect is:</p>\n\n<pre><code>['AAA', 'BBB', 'CCC', 'DDD']\n</code></pre>\n\n<p>or</p>\n\n<pre><code>['^AAA', '^BBB', '^CCC', 'DDD']\n</code></pre>\n\n<p>I want to do this because I am trying to extract text from an HTML page like this:</p>\n\n<pre><code> &lt;td class=\"cell-1\"&gt;\n    &lt;div&gt;&lt;span class=\"value-frame\"&gt;&amp;nbsp;~~~~ ABC ^ DEF ^ HGK &gt; LMN ^&lt;/span&gt;&lt;/div&gt;\n&lt;/td&gt;\n</code></pre>\n"}, {"tags": ["python", "datetime", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 307, "user_id": 6530451, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Calaa.jpg?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/6530451/justin"}, "edited": false, "score": 0, "creation_date": 1470262249, "post_id": 38754106, "comment_id": 64882766, "body": "Thanks for the response - I understand your solution and confirmed your example works. Though when I try to apply it to my scenario I get a TypeError: unhashable type. I&#39;ll update my question with my attempted solution, maybe you can help to see where I&#39;ve went wrong."}], "tags": [], "owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "is_accepted": false, "score": 2, "last_activity_date": 1470260501, "creation_date": 1470260501, "answer_id": 38754106, "question_id": 38753823, "link": "https://stackoverflow.com/questions/38753823/how-to-identify-consecutive-dates/38754106#38754106", "title": "How to identify consecutive dates", "body": "<p>Once you have the ordinal numbers it's a trivial task, here I'm using numpy arrays to propose one alternative</p>\n\n<pre><code>a=np.array([1,2,4,6,7,10,12,13,14,20])\nd=a[1:]-a[:-1]                                            # compute delta\nind=np.logical_or(np.insert(d,0,0)==1,np.append(d,0)==1)  # at least one side matches\na[ind]                                                    # get matching entries\n</code></pre>\n\n<p>gives you the numbers where there is a consecutive number</p>\n\n<pre><code>array([ 1,  2,  6,  7, 12, 13, 14])\n</code></pre>\n\n<p>namely 4, 10 and 20 are removed.</p>\n"}, {"comments": [{"owner": {"reputation": 307, "user_id": 6530451, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Calaa.jpg?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/6530451/justin"}, "edited": false, "score": 0, "creation_date": 1470264026, "post_id": 38754698, "comment_id": 64883320, "body": "wow - thank you so much. I&#39;ve been working all day to figure this out and that worked great! Appreciate it a lot."}], "tags": [], "owner": {"reputation": 859, "user_id": 5937075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e51c074a03e45165f026cbd8d5042e6e?s=128&d=identicon&r=PG&f=1", "display_name": "SO44", "link": "https://stackoverflow.com/users/5937075/so44"}, "is_accepted": true, "score": 4, "last_activity_date": 1470263385, "creation_date": 1470263385, "answer_id": 38754698, "question_id": 38753823, "link": "https://stackoverflow.com/questions/38753823/how-to-identify-consecutive-dates/38754698#38754698", "title": "How to identify consecutive dates", "body": "<p>You can use .shift(-1) or .shift(1) to compare consecutive entries:</p>\n\n<pre><code>df.loc[df['DATE_INT'].shift(-1) - df['DATE_INT'] == 1, 'CONSECUTIVE_DAY'] = True\n</code></pre>\n\n<p>Will set CONSECUTIVE_DAY to TRUE if the previous entry is the previous day</p>\n\n<pre><code>df.loc[(df['DATE_INT'].shift(-1) - df['DATE_INT'] == 1) | (df['DATE_INT'].shift(1) - df['DATE_INT'] == -1), 'CONSECUTIVE_DAY'] = True\n</code></pre>\n\n<p>Will set CONSECUTIVE_DAY to TRUE if the entry is preceeded by or followed by a consecutive date.</p>\n"}], "owner": {"reputation": 307, "user_id": 6530451, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Calaa.jpg?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/6530451/justin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1196, "favorite_count": 1, "accepted_answer_id": 38754698, "answer_count": 2, "score": 4, "last_activity_date": 1470263385, "creation_date": 1470259131, "last_edit_date": 1470263032, "question_id": 38753823, "link": "https://stackoverflow.com/questions/38753823/how-to-identify-consecutive-dates", "title": "How to identify consecutive dates", "body": "<p>I would like to identify dates in a dataframe which are consecutive, that is there exists either an immediate predecessor or successor. I would then like to mark which dates are and are not consecutive in a new column. Additionally I would like to do this operation within particular subsets of my data. </p>\n\n<p>First I create a new variable where I'd identify True of False for Consecutive Days.</p>\n\n<pre><code>weatherFile['CONSECUTIVE_DAY'] = 'NA'   \n</code></pre>\n\n<p>I've converted dates into datetime objects then to ordinal ones:</p>\n\n<pre><code>weatherFile['DATE_OBJ'] = [datetime.strptime(d, '%Y%m%d') for d in weatherFile['DATE']]\nweatherFile['DATE_INT'] = list([d.toordinal() for d in weatherFile['DATE_OBJ']])\n</code></pre>\n\n<p>Now I would like to identify consecutive dates in the following groups:</p>\n\n<pre><code>weatherFile.groupby(['COUNTY_GEOID_YEAR', 'TEMPBIN'])\n</code></pre>\n\n<p>I am thinking to loop through the groups and applying an operation that will identify which days are consecutive and which are not, within unique county, tempbin subsets. </p>\n\n<p>I'm rather new to programming and python, is this a good approach so far, if so how can I progress?</p>\n\n<p>Thank you - Let me know if I should provide additional information.  </p>\n\n<p>Update:</p>\n\n<p>Using @karakfa advice I tried the following:</p>\n\n<pre><code>weatherFile.groupby(['COUNTY_GEOID_YEAR', 'TEMPBIN'])\nweatherFile['DISTANCE'] = weatherFile[1:, 'DATE_INT'] - weatherFile[:-1,'DATE_INT']\nweatherFile['CONSECUTIVE?'] = np.logical_or(np.insert((weatherFile['DISTANCE']),0,0) == 1, np.append((weatherFile['DISTANCE']),0) == 1)\n</code></pre>\n\n<p>This resulting in a TypeError: unhashable type. Traceback happened in the second line. weatherFile['DATE_INT'] is dtype: int64. </p>\n"}, {"tags": ["python", "python-2.7", "mypy"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1470259500, "post_id": 38753817, "comment_id": 64881572, "body": "See if declaring the return type as <code>bytes</code> helps."}, {"owner": {"reputation": 5900, "user_id": 931154, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/bTrZd.jpg?s=128&g=1", "display_name": "Gregory Nisbet", "link": "https://stackoverflow.com/users/931154/gregory-nisbet"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1470261627, "post_id": 38753817, "comment_id": 64882552, "body": "@user2357112 it appears not to."}], "answers": [{"tags": [], "owner": {"reputation": 40179, "user_id": 646543, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/a6xF2.jpg?s=128&g=1", "display_name": "Michael0x2a", "link": "https://stackoverflow.com/users/646543/michael0x2a"}, "is_accepted": true, "score": 2, "last_activity_date": 1472749491, "last_edit_date": 1472749491, "creation_date": 1470338652, "answer_id": 38775762, "question_id": 38753817, "link": "https://stackoverflow.com/questions/38753817/mypy-python-2-insist-on-unicode-value-not-string-value/38775762#38775762", "title": "Mypy Python 2 insist on unicode value not string value", "body": "<p>This is, unfortunately, an ongoing and currently unresolved issue -- see <a href=\"https://github.com/python/mypy/issues/1141\" rel=\"nofollow\">https://github.com/python/mypy/issues/1141</a> and <a href=\"https://github.com/python/typing/issues/208\" rel=\"nofollow\">https://github.com/python/typing/issues/208</a>.</p>\n\n<p>A partial fix is to use <code>typing.Text</code> which is (unfortunately) currently undocumented (I'll work on fixing that though). It's aliased to <code>str</code> in Python 3 and to <code>unicode</code> in Python 2. It won't resolve your actual issue or cause the second function to fail to typecheck, but it <em>does</em> make it a bit easier to write types compatible with both Python 2 and Python 3.</p>\n\n<p>In the meantime, you can hack together a partial workaround by using the recently-implemented <a href=\"https://docs.python.org/3/library/typing.html#newtype\" rel=\"nofollow\"><code>NewType</code> feature</a> -- it lets you define a psuedo-subclass with minimal runtime cost, which you can use to approximate the functionality you're looking for:</p>\n\n<pre><code>from typing import NewType, Text\n\n# Tell mypy to treat 'Unicode' as a subtype of `Text`, which is\n# aliased to 'unicode' in Python 2 and 'str' (aka unicode) in Python 3\nUnicode = NewType('Unicode', Text)\n\ndef unicode_not_str(a: Unicode) -&gt; Unicode:\n    return a\n\n# my_unicode is still the original string at runtime, but Mypy\n# treats it as having a distinct type from `str` and `unicode`.\nmy_unicode = Unicode(u\"some string\")\n\nunicode_not_str(my_unicode)      # typechecks\nunicode_not_str(\"foo\")           # fails\nunicode_not_str(u\"foo\")          # fails, unfortunately\nunicode_not_str(Unicode(\"bar\"))  # works, unfortunately\n</code></pre>\n\n<p>It's not perfect, but if you're principled about when you elevate a string into being treated as being of your custom <code>Unicode</code> type, you can get something approximating the type safety you're looking for with minimal runtime cost until the bytes/str/unicode issue is settled.</p>\n\n<p><s>Note that you'll need to install mypy from the master branch on Github to use <code>NewType</code>.</s></p>\n\n<p>Note that NewType was added as of <a href=\"http://mypy-lang.blogspot.co.uk/2016/08/mypy-044-released.html\" rel=\"nofollow\">mypy version 0.4.4</a>.</p>\n"}], "owner": {"reputation": 5900, "user_id": 931154, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/bTrZd.jpg?s=128&g=1", "display_name": "Gregory Nisbet", "link": "https://stackoverflow.com/users/931154/gregory-nisbet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 557, "favorite_count": 1, "accepted_answer_id": 38775762, "answer_count": 1, "score": 3, "last_activity_date": 1492427801, "creation_date": 1470259104, "last_edit_date": 1492427801, "question_id": 38753817, "link": "https://stackoverflow.com/questions/38753817/mypy-python-2-insist-on-unicode-value-not-string-value", "title": "Mypy Python 2 insist on unicode value not string value", "body": "<p>Python 2 will implicitly convert <code>str</code> to <code>unicode</code> in some circumstances. This conversion will sometimes throw a <code>UnicodeError</code> depending on what you try to do with the resulting value. I don't know the exact semantics, but it's something I'd like to avoid.</p>\n\n<p>Is it possible to use another type besides <code>unicode</code> or a command-line argument similar to <code>--strict-optional</code> (<a href=\"http://mypy-lang.blogspot.co.uk/2016/07/mypy-043-released.html\" rel=\"nofollow noreferrer\">http://mypy-lang.blogspot.co.uk/2016/07/mypy-043-released.html</a>) to cause programs using this implicit conversion to fail to type check?</p>\n\n<pre><code>def returns_string_not_unicode():\n    # type: () -&gt; str\n    return u\"a\"\n\ndef returns_unicode_not_string():\n    # type: () -&gt; unicode\n    return \"a\"\n</code></pre>\n\n<p>In this example, only the function <code>returns_string_not_unicode</code> fails to type check.</p>\n\n<pre><code>$ mypy --py2 unicode.py\nunicode.py: note: In function \"returns_string_not_unicode\":\nunicode.py:3: error: Incompatible return value type (got \"unicode\", expected \"str\")\n</code></pre>\n\n<p>I would like both of them to fail to typecheck.</p>\n\n<p>EDIT:</p>\n\n<p><code>type: () -&gt; byte</code> seems to be treated the same way as <code>str</code></p>\n\n<pre><code>def returns_string_not_unicode():\n    # type: () -&gt; bytes\n    return u\"a\"\n</code></pre>\n"}, {"tags": ["python", "matplotlib", "plot"], "answers": [{"tags": [], "owner": {"reputation": 12837, "user_id": 2184364, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fe15cfa3ec22be57f1762ba905c8eb70?s=128&d=identicon&r=PG", "display_name": "Julien Spronck", "link": "https://stackoverflow.com/users/2184364/julien-spronck"}, "is_accepted": true, "score": 3, "last_activity_date": 1470259603, "creation_date": 1470259603, "answer_id": 38753925, "question_id": 38753766, "link": "https://stackoverflow.com/questions/38753766/python-matplotlib-plotting-many-subfigures-with-the-same-parameters/38753925#38753925", "title": "python matplotlib plotting many subfigures with the same parameters", "body": "<p>You could do this:</p>\n\n<pre><code>fig = plt.figure(figsize=(7,3))                                               \nax1 = fig.add_subplot(1,3,1)                                                  \nax2 = fig.add_subplot(1,3,2)                                                  \nax3 = fig.add_subplot(1,3,3)\n\nxs = [x11, x12, x21, x22, x31, x32]\nys = [y11, y12, y21, y22, y31, y32]\ncs = ['orange', 'blue']\nms = 'os'\n\nfor j in xrange(len(xs)):\n    ax1.scatter(xs[j], ys[j], s=50, alpha=0.5, c=cs[j % 2], marker=ms[j % 2])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 12860, "user_id": 1168043, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IBdCH.jpg?s=128&g=1", "display_name": "cphlewis", "link": "https://stackoverflow.com/users/1168043/cphlewis"}, "is_accepted": false, "score": 1, "last_activity_date": 1470301596, "last_edit_date": 1470301596, "creation_date": 1470292385, "answer_id": 38760016, "question_id": 38753766, "link": "https://stackoverflow.com/questions/38753766/python-matplotlib-plotting-many-subfigures-with-the-same-parameters/38760016#38760016", "title": "python matplotlib plotting many subfigures with the same parameters", "body": "<p>I like organizing the data and styles, and then using that to organize the plotting. Generating some random data to make a runnable example: </p>\n\n<pre><code>import matplotlib.pyplot as plt\nfrom numpy.random import random\n\nfig, axs = plt.subplots(3, figsize=(7,3))  #axs is an array of axes                                              \n\norange_styles = {'c':\"orange\", 'marker':'o'}\nblue_styles = {'c':\"blue\", 'marker':'s'}\n\npts = []\nfor i in range(12):\n    pts.append(random(4))\n\norange_x = pts[0:3] # organized data is lists of lists\norange_y = pts[3:6]\n\nblue_x = pts[6:10]\nblue_y = pts[10:12]\n\nfor ax, x, y in zip(axs, orange_x, orange_y):  #all the orange cases\n    ax.scatter(x, y, s=50, alpha=0.5, **orange_styles) # **kwds \n\nfor ax, x, y in zip(axs, blue_x, blue_y):\n    ax.scatter(x, y, s=50, alpha=0.5, **blue_styles)\n</code></pre>\n"}], "owner": {"reputation": 16093, "user_id": 534298, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4ba32c06ed067564a6c6512de5217657?s=128&d=identicon&r=PG", "display_name": "nos", "link": "https://stackoverflow.com/users/534298/nos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 38753925, "answer_count": 2, "score": 2, "last_activity_date": 1470301596, "creation_date": 1470258930, "question_id": 38753766, "link": "https://stackoverflow.com/questions/38753766/python-matplotlib-plotting-many-subfigures-with-the-same-parameters", "title": "python matplotlib plotting many subfigures with the same parameters", "body": "<p>My plot is like the following </p>\n\n<pre><code>fig = plt.figure(figsize=(7,3))                                               \nax1 = fig.add_subplot(1,3,1)                                                  \nax2 = fig.add_subplot(1,3,2)                                                  \nax3 = fig.add_subplot(1,3,3)\nax1.scatter(x11, y11, s=50, alpha=0.5, c='orange', marker='o')  \nax1.scatter(x12, y12, s=50, alpha=0.5, c='blue', marker='s') \nax2.scatter(x21, y21, s=50, alpha=0.5, c='orange', marker='o')  \nax2.scatter(x22, y22, s=50, alpha=0.5, c='blue', marker='s')\nax3.scatter(x31, y31, s=50, alpha=0.5, c='orange', marker='o')  \nax3.scatter(x32, y32, s=50, alpha=0.5, c='blue', marker='s')\n</code></pre>\n\n<p>It seems kinda redundant to set <code>s=50, alpha=0.5</code> over and over. Is there a way to set them once for all? Also for color and marker, is there a way to write them in one place so it's easier to modify?</p>\n"}, {"tags": ["python", "excel", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 6217, "user_id": 1257953, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/afb18b489df58f20beabaa5dc268a8cb?s=128&d=identicon&r=PG", "display_name": "nitin", "link": "https://stackoverflow.com/users/1257953/nitin"}, "is_accepted": false, "score": 0, "last_activity_date": 1470276469, "creation_date": 1470276469, "answer_id": 38757389, "question_id": 38753750, "link": "https://stackoverflow.com/questions/38753750/write-to-excel-file-with-pandas-module/38757389#38757389", "title": "Write to Excel File with Pandas Module", "body": "<p>Yes you will need to use 'to_excel'. The one line code below creates a list, converts it to a series, then converts it to a dataframe and creates and excel file</p>\n\n<pre><code>pd.Series([ i for i in range(10)]).to_frame().to_excel('test.xlsx')\n</code></pre>\n"}], "owner": {"reputation": 1046, "user_id": 3708219, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3f25dc94a4bfc8f628a30bb81de5faba?s=128&d=identicon&r=PG&f=1", "display_name": "pHorseSpec", "link": "https://stackoverflow.com/users/3708219/phorsespec"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 197, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1470276469, "creation_date": 1470258857, "last_edit_date": 1470261484, "question_id": 38753750, "link": "https://stackoverflow.com/questions/38753750/write-to-excel-file-with-pandas-module", "title": "Write to Excel File with Pandas Module", "body": "<p>How could I write  a list of items <code>[1,2,3,4,5]</code> to an excel file in a specific tab starting at a specific row and column location using the <code>Pandas</code> module? Does it involve the <code>pandas.DataFrame.to_excel</code> function, and do I need to convert my <code>list</code> into a <code>dataframe</code> before writing it to the excel file?</p>\n\n<p>Would I make the list into a series first, and then convert the series into a dataframe, and then write the dataframe to the excel file?</p>\n"}, {"tags": ["python", "function", "merge", "scrapy"], "answers": [{"comments": [{"owner": {"reputation": 874, "user_id": 2663156, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/dddea28cb396561be0dec8b89e34d124?s=128&d=identicon&r=PG", "display_name": "Philip", "link": "https://stackoverflow.com/users/2663156/philip"}, "edited": false, "score": 0, "creation_date": 1470259969, "post_id": 38753888, "comment_id": 64881824, "body": "Thanks! So in my case I have about 109 fields in the first request, are all of these carried in the meta={&#39;item&#39;:item}, and how do I send different classes this way?"}, {"owner": {"reputation": 16919, "user_id": 3737009, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/1A6EG.png?s=128&g=1", "display_name": "Granitosaurus", "link": "https://stackoverflow.com/users/3737009/granitosaurus"}, "reply_to_user": {"reputation": 874, "user_id": 2663156, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/dddea28cb396561be0dec8b89e34d124?s=128&d=identicon&r=PG", "display_name": "Philip", "link": "https://stackoverflow.com/users/2663156/philip"}, "edited": false, "score": 0, "creation_date": 1470297167, "post_id": 38753888, "comment_id": 64894858, "body": "@PhilipHoyos You can carry any object or reference in the request meta, however some more complex object types and classes can cause some issues like memory leaks etc, so you probably want to stick with basic python types when possible (scrapy.Item is pretty much just python dict btw, so it&#39;s completely safe)"}, {"owner": {"reputation": 1331, "user_id": 2354685, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/00d76750e1dceb7aae4c77125ddd6791?s=128&d=identicon&r=PG", "display_name": "Malik A. Rumi", "link": "https://stackoverflow.com/users/2354685/malik-a-rumi"}, "edited": false, "score": 0, "creation_date": 1501611370, "post_id": 38753888, "comment_id": 77850840, "body": "@Granitosaurus Gotta take a minute and 1+ you for the cleanest, simplest, direct and to the point explanation of request.meta I&#39;ve ever seen. No gobbledygook, just &#39;here it is, here&#39;s what it does, here&#39;s how to make it work for you&#39;. Bravo!"}], "tags": [], "owner": {"reputation": 16919, "user_id": 3737009, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/1A6EG.png?s=128&g=1", "display_name": "Granitosaurus", "link": "https://stackoverflow.com/users/3737009/granitosaurus"}, "is_accepted": true, "score": 5, "last_activity_date": 1470259432, "creation_date": 1470259432, "answer_id": 38753888, "question_id": 38753743, "link": "https://stackoverflow.com/questions/38753743/scrapy-merge-subsite-item-with-site-item/38753888#38753888", "title": "Scrapy merge subsite-item with site-item", "body": "<p>What you are looking here is called request chaining. Your problem is - yield one item from several requests. A solution to this is to chain requests while carrying your item in requests <code>meta</code> attribute.<br>\nExample:</p>\n\n<pre><code>def parse(self, response):\n    item = MyItem()\n    item['name'] = response.xpath(\"//div[@id='name']/text()\").extract()\n    more_page = # some page that offers more details\n    # go to more page and take your item with you.\n    yield Request(more_page, \n                  self.parse_more,\n                  meta={'item':item})  \n\n\ndef parse_more(self, response):\n    # get your item from the meta\n    item = response.meta['item']\n    # fill it in with more data and yield!\n    item['last_name'] = response.xpath(\"//div[@id='lastname']/text()\").extract()\n    yield item \n</code></pre>\n"}], "owner": {"reputation": 874, "user_id": 2663156, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/dddea28cb396561be0dec8b89e34d124?s=128&d=identicon&r=PG", "display_name": "Philip", "link": "https://stackoverflow.com/users/2663156/philip"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1258, "favorite_count": 1, "accepted_answer_id": 38753888, "answer_count": 1, "score": 1, "last_activity_date": 1470259432, "creation_date": 1470258823, "last_edit_date": 1495540859, "question_id": 38753743, "link": "https://stackoverflow.com/questions/38753743/scrapy-merge-subsite-item-with-site-item", "title": "Scrapy merge subsite-item with site-item", "body": "<p>Im trying to <strong>scrape details from a subsite and merge with the details scraped with site</strong>. I've been researching through stackoverflow, as well as documentation. However, I still cant get my code to work. It seems that my function to extract additional details from the subsite does not work. If anyone could take a look I would be very grateful.</p>\n\n<pre><code># -*- coding: utf-8 -*-\nfrom scrapy.spiders import Spider\nfrom scrapy.selector import Selector\nfrom scrapeInfo.items import infoItem\nimport pyodbc\n\n\nclass scrapeInfo(Spider):\n    name = \"info\"\n    allowed_domains = [\"http://www.nevermind.com\"]\n    start_urls = []\n\n    def start_requests(self):\n\n        #Get infoID and Type from database\n        self.conn = pyodbc.connect('DRIVER={SQL Server};SERVER=server;DATABASE=dbname;UID=user;PWD=password')\n        self.cursor = self.conn.cursor()\n        self.cursor.execute(\"SELECT InfoID, category FROM dbo.StageItem\")\n\n        rows = self.cursor.fetchall()\n\n        for row in rows:\n            url = 'http://www.nevermind.com/info/'\n            InfoID = row[0]\n            category = row[1]\n            yield self.make_requests_from_url(url+InfoID, InfoID, category, self.parse)\n\n    def make_requests_from_url(self, url, InfoID, category, callback):\n        request = Request(url, callback)\n        request.meta['InfoID'] = InfoID\n        request.meta['category'] = category\n        return request\n\n    def parse(self, response):\n        hxs = Selector(response)\n        infodata = hxs.xpath('div[2]/div[2]')  # input item path\n\n        itemPool = []\n\n        InfoID = response.meta['InfoID']\n        category = response.meta['category']\n\n        for info in infodata:\n            item = infoItem()\n            item_cur, item_hist = InfoItemSubSite()\n\n            # Stem Details\n            item['id'] = InfoID\n            item['field'] = info.xpath('tr[1]/td[2]/p/b/text()').extract()\n            item['field2'] = info.xpath('tr[2]/td[2]/p/b/text()').extract()\n            item['field3'] = info.xpath('tr[3]/td[2]/p/b/text()').extract()\n            item_cur['field4'] = info.xpath('tr[4]/td[2]/p/b/text()').extract()\n            item_cur['field5'] = info.xpath('tr[5]/td[2]/p/b/text()').extract()\n            item_cur['field6'] = info.xpath('tr[6]/td[2]/p/b/@href').extract()\n\n            # Extract additional information about item_cur from refering site\n            # This part does not work\n            if item_cur['field6'] = info.xpath('tr[6]/td[2]/p/b/@href').extract():\n                url = 'http://www.nevermind.com/info/sub/' + item_cur['field6'] = info.xpath('tr[6]/td[2]/p/b/@href').extract()[0]\n                request = Request(url, housingtype, self.parse_item_sub)\n                request.meta['category'] = category\n                yield self.parse_item_sub(url, category)\n            item_his['field5'] = info.xpath('tr[5]/td[2]/p/b/text()').extract()\n            item_his['field6'] = info.xpath('tr[6]/td[2]/p/b/text()').extract()\n            item_his['field7'] = info.xpath('tr[7]/td[2]/p/b/@href').extract()      \n\n            item['subsite_dic'] = [dict(item_cur), dict(item_his)]\n\n            itemPool.append(item)\n            yield item\n        pass\n\n        # Function to extract additional info from the subsite, and return it to the original item.\n        def parse_item_sub(self, response, category):\n            hxs = Selector(response)\n            subsite = hxs.xpath('div/div[2]')  # input base path\n\n            category = response.meta['category']\n\n            for i in subsite:        \n                item = InfoItemSubSite()    \n                if (category == 'first'):\n                    item['subsite_field1'] = i.xpath('/td[2]/span/@title').extract()            \n                    item['subsite_field2'] = i.xpath('/tr[4]/td[2]/text()').extract()\n                    item['subsite_field3'] = i.xpath('/div[5]/a[1]/@href').extract()\n                else:\n                    item['subsite_field1'] = i.xpath('/tr[10]/td[3]/span/@title').extract()            \n                    item['subsite_field2'] = i.xpath('/tr[4]/td[1]/text()').extract()\n                    item['subsite_field3'] = i.xpath('/div[7]/a[1]/@href').extract()\n                return item\n            pass\n</code></pre>\n\n<p>I've been looking at these examples together with a lot of other examples (stackoverflow is great for that!), as well as scrapy documentation, but still unable to understand how I get details send from one function and merged with the scraped items from the original function.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/8467700/how-do-i-merge-results-from-target-page-to-current-page-in-scrapy\">how do i merge results from target page to current page in scrapy?</a>\n<a href=\"https://stackoverflow.com/questions/13910357/how-can-i-use-multiple-requests-and-pass-items-in-between-them-in-scrapy-python/25571270#25571270\">How can i use multiple requests and pass items in between them in scrapy python</a></p>\n"}, {"tags": ["python", "sqlite", "python-3.x", "numpy", "python-db-api"], "comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 2, "creation_date": 1470264672, "post_id": 38753737, "comment_id": 64883524, "body": "A  numpy integer type isn&#39;t just the byte representation of the number (it&#39;s <code>.item()</code> value); is an object, almost the same as a single element, 0d, array.  So I don&#39;t think you can save it, in all of its numpy glory, in a database.  You could save its integer value, or a some byte equivalent, but not the full numpy object.  Is there anything in <code>sqlite3</code> about saving a user defined object instance?"}, {"owner": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 0, "creation_date": 1470266134, "post_id": 38753737, "comment_id": 64883974, "body": "There is always the scary pickle-approach (targeting TEXT type), or something more modern and binary-based like <a href=\"http://msgpack.org/\" rel=\"nofollow noreferrer\">MessagePack</a> (targeting BLOB type)."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1470268164, "post_id": 38753737, "comment_id": 64884452, "body": "What&#39;s the advantage to saving <code>np.int64(100)</code> instead of <code>100</code>?  Is there some useful information that you couldn&#39;t recover during a fetch?  You might look at how modules like SQLAlchemy handle the sql-object interface."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1470268690, "post_id": 38753737, "comment_id": 64884580, "body": "<a href=\"http://stackoverflow.com/questions/18621513/python-insert-numpy-array-into-sqlite3-database\" title=\"python insert numpy array into sqlite3 database\">stackoverflow.com/questions/18621513/&hellip;</a> is an example of previous SO questions.  The solution there to saving a whole array is to write <code>np.save</code> to a byteString and saving that as a custom type in the database.  Search <code>sqlite3</code> and <code>numpy</code>."}, {"owner": {"reputation": 20637, "user_id": 14167, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HYgOI.jpg?s=128&g=1", "display_name": "David Nehme", "link": "https://stackoverflow.com/users/14167/david-nehme"}, "reply_to_user": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1470287050, "post_id": 38753737, "comment_id": 64890018, "body": "@hpaulj I&#39;m creating the np.int64 explicitly as an example.  I&#39;m not trying to save the int64 objects into the database, just their integer representation."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1470311604, "post_id": 38753737, "comment_id": 64904378, "body": "OK, I glossed over the py2 v py3 difference.  If you&#39;d tried to save an element of an array I might have gone off on another rabbit track. <code>item()</code> will strip off the <code>numpy</code> object wrapper. I don&#39;t have <code>numpy</code> installed on py2 to test that side of the problem."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 1, "creation_date": 1470312932, "post_id": 38753737, "comment_id": 64905208, "body": "Py3 removed the distinction between integer and long. So some numpy integer dtypes no longer subclass <code>integer</code>.  Floats still subclass.  Can you still save an element of a float array?"}, {"owner": {"reputation": 20637, "user_id": 14167, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HYgOI.jpg?s=128&g=1", "display_name": "David Nehme", "link": "https://stackoverflow.com/users/14167/david-nehme"}, "reply_to_user": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1470326602, "post_id": 38753737, "comment_id": 64915989, "body": "@hpaulj Yes, apparently you can insert np.floatXXX types."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1470524642, "post_id": 38753737, "comment_id": 64987122, "body": "In testing a structured array to sqlite3 write for <a href=\"http://stackoverflow.com/questions/38798033/fast-query-in-formatted-data/38808983\" title=\"fast query in formatted data\">stackoverflow.com/questions/38798033/&hellip;</a>, I found that <code>tolist()</code> handles this <code>integer</code> issue nicely: <code>c.executemany(exec_string, data.tolist())</code>"}], "answers": [{"tags": [], "owner": {"reputation": 884, "user_id": 1992836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95ddc462019dbd23076e11f3c079ef5f?s=128&d=identicon&r=PG", "display_name": "tck", "link": "https://stackoverflow.com/users/1992836/tck"}, "is_accepted": true, "score": 10, "last_activity_date": 1471969311, "creation_date": 1471969311, "answer_id": 39106289, "question_id": 38753737, "link": "https://stackoverflow.com/questions/38753737/inserting-numpy-integer-types-into-sqlite-with-python3/39106289#39106289", "title": "inserting numpy integer types into sqlite with python3", "body": "<p>According to sqlite3 docs:</p>\n\n<blockquote>\n  <p>To use other Python types with SQLite, you must adapt them to one of the sqlite3 module\u2019s supported types for SQLite: one of NoneType, int, float, str, bytes.</p>\n</blockquote>\n\n<p>So you can <strong>adapt</strong> <em>np.int64</em> type. You should do something like this:</p>\n\n<pre><code>import numpy as np\nimport sqlite3\n\nsqlite3.register_adapter(np.int64, lambda val: int(val))\nconn = sqlite3.connect(\":memory:\")\nconn.execute(\"CREATE TABLE foo (id INTEGER NOT NULL, primary key (id))\")\nconn.execute(\"insert into foo values(?)\", (np.int64(100),))\n</code></pre>\n\n<p><a href=\"https://docs.python.org/3.5/library/sqlite3.html#registering-an-adapter-callable\" rel=\"noreferrer\">Docs</a></p>\n"}, {"tags": [], "owner": {"reputation": 113, "user_id": 9028448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6c02389859cf211e246834d71165986?s=128&d=identicon&r=PG&f=1", "display_name": "Will", "link": "https://stackoverflow.com/users/9028448/will"}, "is_accepted": false, "score": 5, "last_activity_date": 1543183529, "creation_date": 1543183529, "answer_id": 53472474, "question_id": 38753737, "link": "https://stackoverflow.com/questions/38753737/inserting-numpy-integer-types-into-sqlite-with-python3/53472474#53472474", "title": "inserting numpy integer types into sqlite with python3", "body": "<p>Rather than:</p>\n\n<pre><code>sqlite3.register_adapter(np.int64, lambda val: int(val))\n</code></pre>\n\n<p>You can use:</p>\n\n<pre><code>sqlite3.register_adapter(np.int64, int)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1470, "user_id": 511809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f1d2b20ea1892dd184367d3850a920?s=128&d=identicon&r=PG", "display_name": "natbusa", "link": "https://stackoverflow.com/users/511809/natbusa"}, "is_accepted": false, "score": -1, "last_activity_date": 1615778581, "creation_date": 1615778581, "answer_id": 66631973, "question_id": 38753737, "link": "https://stackoverflow.com/questions/38753737/inserting-numpy-integer-types-into-sqlite-with-python3/66631973#66631973", "title": "inserting numpy integer types into sqlite with python3", "body": "<p>Use the .item() method.</p>\n<pre><code>np.int64(100).item()\n</code></pre>\n<p>The advantage of this solution is that is portable and not sqlite3 specific.</p>\n<p>For reference about numpy type conversions with the .item() method, refer to <a href=\"https://numpy.org/doc/stable/reference/generated/numpy.ndarray.item.html#numpy.ndarray.item\" rel=\"nofollow noreferrer\">https://numpy.org/doc/stable/reference/generated/numpy.ndarray.item.html#numpy.ndarray.item</a></p>\n"}], "owner": {"reputation": 20637, "user_id": 14167, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HYgOI.jpg?s=128&g=1", "display_name": "David Nehme", "link": "https://stackoverflow.com/users/14167/david-nehme"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2470, "favorite_count": 3, "accepted_answer_id": 39106289, "answer_count": 3, "score": 10, "last_activity_date": 1615778581, "creation_date": 1470258804, "last_edit_date": 1470326528, "question_id": 38753737, "link": "https://stackoverflow.com/questions/38753737/inserting-numpy-integer-types-into-sqlite-with-python3", "title": "inserting numpy integer types into sqlite with python3", "body": "<p>What is the correct way to insert the values of numpy integer objects into databases in python 3?  In python 2.7 numpy numeric datatypes insert cleanly into sqlite, but they don't in python 3</p>\n\n<pre><code>import numpy as np\nimport sqlite3\nconn = sqlite3.connect(\":memory:\")\nconn.execute(\"CREATE TABLE foo (id INTEGER NOT NULL, primary key (id))\")\nconn.execute(\"insert into foo values(?)\", (np.int64(100),)) # &lt;-- Fails in 3\n</code></pre>\n\n<p>The np.float types seem to still work just fine in both 2 and 3.</p>\n\n<pre><code>    conn.execute(\"insert into foo values(?)\", (np.float64(101),))\n</code></pre>\n\n<p>In python 2, the numpy scalar integer datatypes are no longer instances of int, even converting integer-valued floating point numbers to ints.</p>\n\n<pre><code>   isinstance(np.int64(1), int)  # &lt;- true for 2, false for python 3\n</code></pre>\n\n<p>Is this why the dbapi no longer works seamlessly with numpy?</p>\n"}, {"tags": ["python", "pandas", "dataframe", "format", "series"], "answers": [{"comments": [{"owner": {"reputation": 1512, "user_id": 1974919, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/43e23c461cc56c2d5aca32366bfddff4?s=128&d=identicon&r=PG", "display_name": "MEhsan", "link": "https://stackoverflow.com/users/1974919/mehsan"}, "edited": false, "score": 0, "creation_date": 1470260266, "post_id": 38753767, "comment_id": 64881972, "body": "This gives an error ... <code>TypeError: cannot concatenate a non-NDFrame object</code>  @Gaurav Dhama"}, {"owner": {"reputation": 1242, "user_id": 6657815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d9530b27299d0248df63719d13977f6?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav Dhama", "link": "https://stackoverflow.com/users/6657815/gaurav-dhama"}, "reply_to_user": {"reputation": 1512, "user_id": 1974919, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/43e23c461cc56c2d5aca32366bfddff4?s=128&d=identicon&r=PG", "display_name": "MEhsan", "link": "https://stackoverflow.com/users/1974919/mehsan"}, "edited": false, "score": 0, "creation_date": 1470260600, "post_id": 38753767, "comment_id": 64882108, "body": "Sorry i forgot that unique() gives an ndarray not a dataframe. Have changed the answer to reflect this."}], "tags": [], "owner": {"reputation": 1242, "user_id": 6657815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d9530b27299d0248df63719d13977f6?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav Dhama", "link": "https://stackoverflow.com/users/6657815/gaurav-dhama"}, "is_accepted": false, "score": 0, "last_activity_date": 1470260561, "last_edit_date": 1470260561, "creation_date": 1470258939, "answer_id": 38753767, "question_id": 38753631, "link": "https://stackoverflow.com/questions/38753631/how-to-modify-the-dataframe-so-each-row-stores-all-the-data-of-its-duplicate-row/38753767#38753767", "title": "How to Modify the Dataframe so Each Row Stores All the Data of its Duplicate Rows?", "body": "<p>You can use concat after using Alex's solution :</p>\n\n<pre><code>df1 = df.groupby('ID')['key'].apply(\nlambda s: pd.Series(s.values, index=['key_%s' % i for i in range(s.shape[0])])).unstack(-1)\n\ndf2 = df.groupby('ID')['word'].apply(\nlambda s: pd.Series(s.values, index=['word_%s' % i for i in range(s.shape[0])])).unstack(-1)\n\ndf3 = pd.DataFrame({'ID':df['ID'].unique()})\n\ndf_new = pd.concat([df1,df2,df3],axis=1)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": true, "score": 1, "last_activity_date": 1470261124, "creation_date": 1470261124, "answer_id": 38754244, "question_id": 38753631, "link": "https://stackoverflow.com/questions/38753631/how-to-modify-the-dataframe-so-each-row-stores-all-the-data-of-its-duplicate-row/38754244#38754244", "title": "How to Modify the Dataframe so Each Row Stores All the Data of its Duplicate Rows?", "body": "<pre><code>df2 = df.set_index('ID').groupby(level=0).apply(lambda df: df.reset_index(drop=True)).unstack()\ndf2.columns = df2.columns.set_levels((df2.columns.levels[1]).astype(str), level=1)\ndf2.columns = df2.columns.to_series().str.join('_')\ndf2\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/w3bvQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/w3bvQ.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 619481, "user_id": 2901002, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/hMDvl.jpg?s=128&g=1", "display_name": "jezrael", "link": "https://stackoverflow.com/users/2901002/jezrael"}, "is_accepted": false, "score": 0, "last_activity_date": 1470290979, "creation_date": 1470290979, "answer_id": 38759655, "question_id": 38753631, "link": "https://stackoverflow.com/questions/38753631/how-to-modify-the-dataframe-so-each-row-stores-all-the-data-of-its-duplicate-row/38759655#38759655", "title": "How to Modify the Dataframe so Each Row Stores All the Data of its Duplicate Rows?", "body": "<p>Another solution with <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.pivot_table.html\" rel=\"nofollow\"><code>pivot_table</code></a>:</p>\n\n<pre><code>df['cols'] = df.groupby('ID')['ID'].cumcount().astype(str)\ndf1 = df.pivot_table(index='ID', columns='cols', values=['key','word'], aggfunc=''.join)\ndf1.columns = ['_'.join(col) for col in df1.columns]\nprint (df1)\n   key_0 key_1 key_2 word_0     word_1 word_2\nID                                           \n1      A     B  None  Apple        Bug   None\n2      C  None  None    Cat       None   None\n3      D     E     E    Dog  Exogenous    Egg\n</code></pre>\n"}], "owner": {"reputation": 1512, "user_id": 1974919, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/43e23c461cc56c2d5aca32366bfddff4?s=128&d=identicon&r=PG", "display_name": "MEhsan", "link": "https://stackoverflow.com/users/1974919/mehsan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 38754244, "answer_count": 3, "score": 1, "last_activity_date": 1470290979, "creation_date": 1470258368, "last_edit_date": 1495542776, "question_id": 38753631, "link": "https://stackoverflow.com/questions/38753631/how-to-modify-the-dataframe-so-each-row-stores-all-the-data-of-its-duplicate-row", "title": "How to Modify the Dataframe so Each Row Stores All the Data of its Duplicate Rows?", "body": "<p>I have this dataframe with three columns (<code>ID</code>,<code>key</code>, and <code>word</code>)</p>\n\n<pre><code>   ID  key   word\n0   1    A  Apple\n1   1    B  Bug\n2   2    C  Cat\n3   3    D  Dog\n4   3    E  Exogenous\n5   3    E  Egg\n</code></pre>\n\n<p>I want to create additional <code>key</code> and <code>word</code> columns -as necessary- to store the data in the <code>key</code> and <code>word</code> columns when there are rows with duplicate <code>IDs</code></p>\n\n<p>This is a snippet of the output</p>\n\n<pre><code>   ID  key_0  key_1   word_0   word_1  \n0   1      A      B    Apple      Bug \n</code></pre>\n\n<p><strong>Note:</strong> in the output above, the <code>ID</code>#<code>1</code> appeared twice in the dataframe, so the <code>\"key\"</code> value <code>\"B\"</code> associated with the duplicate <code>ID</code> will be stored in the new column <code>\"key_1\"</code>.  The word <code>Bug</code> found in the duplicate <code>ID</code>#<code>1</code> will be stored in the new column <code>word_1</code> as well.  </p>\n\n<p>The complete output should like the following: </p>\n\n<pre><code>    ID  key_0  key_1   key_2   word_0        word_1    word_2\n0   1       A      B     NaN    Apple           Bug       NaN\n1   2       C    NaN     NaN      Cat           NaN       NaN\n2   3       D      E       E      Dog     Exogenous       Egg \n</code></pre>\n\n<p>Notice in the complete output, the <code>ID</code>#<code>3</code> has repeated three times.  The <code>key</code> of the second repeat <code>\"E\"</code> will be stored under the <code>\"key_1\"</code> column and the third repeat <code>\"E\"</code> will be stored in the new column <code>\"key_2\"</code>.  This applies to the words <code>\"Exogenous\"</code> and <code>\"Egg\"</code> in the same mannar.</p>\n\n<p>I found <a href=\"https://stackoverflow.com/a/38734358/1974919\">Alex's</a> solution useful, but it only works for the <code>key</code> column:</p>\n\n<pre><code>df.groupby('ID')['key'].apply(\nlambda s: pd.Series(s.values, index=['key_%s' % i for i in range(s.shape[0])])).unstack(-1)\n</code></pre>\n\n<p>Any idea how can I make the lambda function works for both the <code>key</code> and <code>word</code> columns? </p>\n\n<p>Thank you,</p>\n"}, {"tags": ["python", "objective-c", "arrays", "json"], "answers": [{"tags": [], "owner": {"reputation": 1854, "user_id": 6539544, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0075a1be0f17b9ac03dbb0b9b27d5aab?s=128&d=identicon&r=PG&f=1", "display_name": "Vaibhav Bajaj", "link": "https://stackoverflow.com/users/6539544/vaibhav-bajaj"}, "is_accepted": false, "score": -1, "last_activity_date": 1470262826, "last_edit_date": 1470262826, "creation_date": 1470258478, "answer_id": 38753654, "question_id": 38753599, "link": "https://stackoverflow.com/questions/38753599/what-does-typeerror-1-2-3-is-not-json-serializable-mean/38753654#38753654", "title": "What does &quot;TypeError : (1,2,3) is not JSON serializable&quot; mean?", "body": "<p>A <code>dict()</code> object or in this case, a JSON object requires a key followed by a value.</p>\n\n<p>Thus, you are getting a <code>TypeError</code> as you are trying to convert an array to JSON.\nAdding some keys to this array will fix the error.</p>\n\n<p>Sample Code:</p>\n\n<pre><code>json_payload = {\n'0': 5850,\n'1': 5500,\n'2': 5170,\n'3': 2500,\n'4': 2400,\n'5': 2400,\n'6': 2400,\n}\n</code></pre>\n\n<p>If instead you wish to create a python <code>list</code> object, try this:</p>\n\n<pre><code>nums = [ 5850, 5500, 5170, 2500, 2400, 2400, 2400]\n</code></pre>\n\n<p><code>nums</code> can then be sent as a json object.</p>\n"}, {"tags": [], "owner": {"reputation": 96, "user_id": 4449935, "user_type": "registered", "profile_image": "https://graph.facebook.com/837986932933954/picture?type=large", "display_name": "Random Integer", "link": "https://stackoverflow.com/users/4449935/random-integer"}, "is_accepted": false, "score": 2, "last_activity_date": 1470258957, "creation_date": 1470258957, "answer_id": 38753776, "question_id": 38753599, "link": "https://stackoverflow.com/questions/38753599/what-does-typeerror-1-2-3-is-not-json-serializable-mean/38753776#38753776", "title": "What does &quot;TypeError : (1,2,3) is not JSON serializable&quot; mean?", "body": "<p>You want a Python array object, i.e. a <code>list()</code> object. There's no sense in using a <code>dict()</code>, unless you want a dictionary.</p>\n\n<p>Use <code>list(1,2,3..,n)</code> or <code>[1, 2, 3..., n ]</code>to make a Python list object. You'll then access elements by their respective indices.</p>\n\n<p>A Python <code>list()</code> object qualifies as a JSON array/object.</p>\n"}], "owner": {"reputation": 169, "user_id": 5357235, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/40143abf6904787af3e9d22ea5c757bd?s=128&d=identicon&r=PG&f=1", "display_name": "Jon", "link": "https://stackoverflow.com/users/5357235/jon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 195, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1470262826, "creation_date": 1470258223, "last_edit_date": 1470258407, "question_id": 38753599, "link": "https://stackoverflow.com/questions/38753599/what-does-typeerror-1-2-3-is-not-json-serializable-mean", "title": "What does &quot;TypeError : (1,2,3) is not JSON serializable&quot; mean?", "body": "<p>I'm trying to pull an array from Objective-C into my Python code, and when I do, I get the following error:</p>\n\n<pre><code>TypeError: (\n5850,\n5500,\n5170,\n2500,\n2400,\n2400,\n2400,\n2500,\n5170,\n5500,\n5850\n) is not JSON serializable\n</code></pre>\n\n<p>I've tried to put a dict() method around my Objective-C wrapper call to turn it into a dictionary, and that doesn't work either (and probably isn't what I want anyways, as I want a Python array object containing these values). How do I fix this error? I did some searching, and most past questions ask about DJango methods giving a similar issue, but isn't quite what I need.</p>\n"}, {"tags": ["python", "os.system"], "comments": [{"owner": {"reputation": 3420, "user_id": 1530134, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d6b1b610a6302fd94ff9f8971a4f1899?s=128&d=identicon&r=PG", "display_name": "Alyssa Haroldsen", "link": "https://stackoverflow.com/users/1530134/alyssa-haroldsen"}, "edited": false, "score": 0, "creation_date": 1470258623, "post_id": 38753553, "comment_id": 64881168, "body": "Take a look into the <a href=\"https://docs.python.org/3/library/subprocess.html\" rel=\"nofollow noreferrer\"><code>subprocess</code></a> module for more flexible process creation."}, {"owner": {"reputation": 782, "user_id": 3712761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1aPMK.png?s=128&g=1", "display_name": "dashiell", "link": "https://stackoverflow.com/users/3712761/dashiell"}, "edited": false, "score": 0, "creation_date": 1470258624, "post_id": 38753553, "comment_id": 64881171, "body": "I just ran <code>os.system(&#39;subl test.txt&#39;)</code> and it opened the GUI just like normal. Running Python 3.5.1 on Windows 10, for reference. Though I may be misunderstanding the question."}], "answers": [{"tags": [], "owner": {"reputation": 2128, "user_id": 2673238, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/kkOrV.png?s=128&g=1", "display_name": "user2673238", "link": "https://stackoverflow.com/users/2673238/user2673238"}, "is_accepted": false, "score": 0, "last_activity_date": 1470258929, "creation_date": 1470258929, "answer_id": 38753764, "question_id": 38753553, "link": "https://stackoverflow.com/questions/38753553/using-os-system-in-python-is-open-a-program-cant-see-window-of-launched-prog/38753764#38753764", "title": "Using os.system() in Python is open a program, can&#39;t see window of launched program", "body": "<p>Here is a solution using <code>subprocess</code></p>\n\n<pre><code>import subprocess\n\nsubprocess.Popen(\"notepad.exe\")\n</code></pre>\n\n<p>Or if you want to run a python program with a specific interpreter:</p>\n\n<pre><code>subprocess.Popen('{0} {1}'.format(PythonInterpreterPath,PythonFilePath.py))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1160, "user_id": 3826115, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/64deaa69ef71ef12623f3ced55f16d2d?s=128&d=identicon&r=PG&f=1", "display_name": "hm8", "link": "https://stackoverflow.com/users/3826115/hm8"}, "edited": false, "score": 0, "creation_date": 1470265732, "post_id": 38753886, "comment_id": 64883859, "body": "Looks like this may be related to a larger (more scary) problem, as suddenly I can&#39;t load the program at all (among other important problems, such as not being able to any new files or load nautilus). Thanks though, I&#39;ll know it should work now!"}], "tags": [], "owner": {"reputation": 3809, "user_id": 365796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SJK3v.png?s=128&g=1", "display_name": "vimist", "link": "https://stackoverflow.com/users/365796/vimist"}, "is_accepted": true, "score": 1, "last_activity_date": 1470259420, "creation_date": 1470259420, "answer_id": 38753886, "question_id": 38753553, "link": "https://stackoverflow.com/questions/38753553/using-os-system-in-python-is-open-a-program-cant-see-window-of-launched-prog/38753886#38753886", "title": "Using os.system() in Python is open a program, can&#39;t see window of launched program", "body": "<p>From the <a href=\"https://docs.python.org/3/library/os.html#os.system\" rel=\"nofollow\">Python manual</a>:</p>\n\n<blockquote>\n  <p>[<a href=\"https://docs.python.org/3/library/os.html#os.system\" rel=\"nofollow\"><code>os.system</code></a>] is implemented by calling the Standard C function\n  <a href=\"http://linux.die.net/man/3/system\" rel=\"nofollow\"><code>system()</code></a></p>\n</blockquote>\n\n<p>That being said, you shouldn't have any problems launching a GUI application with <a href=\"https://docs.python.org/3/library/os.html#os.system\" rel=\"nofollow\"><code>os.system</code></a>. I've just tried it myself and it works fine.</p>\n\n<p>It also mentions in the manual that:</p>\n\n<blockquote>\n  <p>The <a href=\"https://docs.python.org/3/library/subprocess.html\" rel=\"nofollow\">subprocess</a> module provides more powerful facilities for spawning\n  new processes and retrieving their results; using that module is\n  preferable to using this function.</p>\n</blockquote>\n\n<p>Maybe that's worth a try. Do any other GUI applications work when you spawn them with <a href=\"https://docs.python.org/3/library/os.html#os.system\" rel=\"nofollow\"><code>os.system</code></a>?</p>\n"}], "owner": {"reputation": 1160, "user_id": 3826115, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/64deaa69ef71ef12623f3ced55f16d2d?s=128&d=identicon&r=PG&f=1", "display_name": "hm8", "link": "https://stackoverflow.com/users/3826115/hm8"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1517, "favorite_count": 0, "accepted_answer_id": 38753886, "answer_count": 2, "score": 1, "last_activity_date": 1470259420, "creation_date": 1470258067, "last_edit_date": 1470258454, "question_id": 38753553, "link": "https://stackoverflow.com/questions/38753553/using-os-system-in-python-is-open-a-program-cant-see-window-of-launched-prog", "title": "Using os.system() in Python is open a program, can&#39;t see window of launched program", "body": "<p>I am trying to launch a program/GUI from within a python code.</p>\n\n<p>From the terminal, I can get the program to launch by simply typing the program name. A few lines get outputted to the terminal, and then a separate window opens with the GUI. </p>\n\n<p>I tried to emulate this in python by running</p>\n\n<pre><code>os.system(\"&lt;program name&gt;\")\n</code></pre>\n\n<p>The typical output lines, as mentioned above, get printed to the console, but no window opens up with the GUI.</p>\n\n<p>Can os.system() be used to execute programs that have their own separate window?</p>\n"}, {"tags": ["python", "fuse"], "answers": [{"tags": [], "owner": {"reputation": 3076, "user_id": 598905, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/aN7V8.jpg?s=128&g=1", "display_name": "ensonic", "link": "https://stackoverflow.com/users/598905/ensonic"}, "is_accepted": false, "score": 0, "last_activity_date": 1470300369, "creation_date": 1470300369, "answer_id": 38762579, "question_id": 38753522, "link": "https://stackoverflow.com/questions/38753522/double-read-calls-in-python-fuse-leading-to-einval/38762579#38762579", "title": "double read calls in python fuse leading to EINVAL", "body": "<p>Turns out it is related to the tricky handling of encoding in python 2 (there is no python-fuse for py3).</p>\n\n<p>Returning bytes(buf) in read() fixes it. The fuse code uses EINVAL also when things look wrong it received from the python side.</p>\n"}], "owner": {"reputation": 3076, "user_id": 598905, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/aN7V8.jpg?s=128&g=1", "display_name": "ensonic", "link": "https://stackoverflow.com/users/598905/ensonic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 132, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1470300369, "creation_date": 1470257957, "question_id": 38753522, "link": "https://stackoverflow.com/questions/38753522/double-read-calls-in-python-fuse-leading-to-einval", "title": "double read calls in python fuse leading to EINVAL", "body": "<p>I am having trouble with python-fuse. Here is a standalone example of the issue: <a href=\"https://gist.github.com/ensonic/87e4108a7be64412d1c5a553b7e01f88\" rel=\"nofollow\">https://gist.github.com/ensonic/87e4108a7be64412d1c5a553b7e01f88</a></p>\n\n<p>When mounting the fake-in-memory file system, I can list the contents , but I can read the files:</p>\n\n<pre><code>&gt; ls -al ~/temp/mount/\ntotal 1\n-r--r--r-- 1 user group 34 Aug  3 22:44 test.txt\n&gt; cat ~/temp/mount/test.txt \ncat: /home/user/temp/mount/test.txt: Invalid argument\n</code></pre>\n\n<p>When I run the fuse fs in the forground (-d), I get this debug info:</p>\n\n<pre><code>LOOKUP /test.txt\ngetattr /test.txt\n   NODEID: 2\n   unique: 120, success, outsize: 144\nunique: 121, opcode: OPEN (14), nodeid: 2, insize: 48, pid: 10342\nopen flags: 0x8000 /test.txt\n   open[0] flags: 0x8000 /test.txt\n   unique: 121, success, outsize: 32\nunique: 122, opcode: READ (15), nodeid: 2, insize: 80, pid: 10342\nread[0] 4096 bytes from 0 flags: 0x8000\n   unique: 122, error: -22 (Invalid argument), outsize: 16\nunique: 123, opcode: READ (15), nodeid: 2, insize: 80, pid: 10342\nread[0] 4096 bytes from 0 flags: 0x8000\n   unique: 123, error: -22 (Invalid argument), outsize: 16\nunique: 124, opcode: FLUSH (25), nodeid: 2, insize: 64, pid: 10342\n   unique: 124, error: -38 (Function not implemented), outsize: 16\nunique: 125, opcode: RELEASE (18), nodeid: 2, insize: 64, pid: 0\nrelease[0] flags: 0x8000\n   unique: 125, success, outsize: 16\n</code></pre>\n\n<p>and my logfile has:</p>\n\n<pre><code>INFO:fakefs:open fake file /test.txt\nINFO:fakefs:read from /test.txt, offs 0, size 4096, len 34\nINFO:fakefs:read remainder\nINFO:fakefs:read() = 34 bytes\nINFO:fakefs:read from /test.txt, offs 0, size 4096, len 34\nINFO:fakefs:read remainder\nINFO:fakefs:read() = 34 bytes\nINFO:fakefs:released(/test.txt) = 0\n</code></pre>\n\n<p>What I wonder is:\n1) why is the read done twice (read[0] 4096 bytes from 0 flags: 0x8000)\n2) why does it return EINVAL? I return the data - there is no single EINVAL in my code.</p>\n\n<p>In the actual example I am implementing the rest of the fs functions too, this is not the issue.</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 26041, "user_id": 3339965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ac89d084d3bc5dc083bad3ea5518f11?s=128&d=identicon&r=PG&f=1", "display_name": "root", "link": "https://stackoverflow.com/users/3339965/root"}, "is_accepted": false, "score": 4, "last_activity_date": 1470260580, "last_edit_date": 1470260580, "creation_date": 1470258716, "answer_id": 38753716, "question_id": 38753515, "link": "https://stackoverflow.com/questions/38753515/pandas-drop-rows-based-on-duplicated-values-in-a-list/38753716#38753716", "title": "Pandas: drop rows based on duplicated values in a list", "body": "<p>You can combine <code>str.split</code> with <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.duplicated.html\" rel=\"nofollow\"><code>duplicated</code></a> to get a Boolean indexer:</p>\n\n<pre><code># Get a Boolean indexer for duplicates.\ndupe_rows = df1['Col1'].str.split('-', expand=True)\ndupe_rows = dupe_rows.apply(lambda row: row.duplicated().any(), axis=1)\n\n# Remove the duplicates.\ndf1 = df1[~dupe_rows]\n</code></pre>\n\n<p><strong>Edit</strong></p>\n\n<p>Another option is to use <a href=\"http://toolz.readthedocs.io/en/latest/api.html#toolz.itertoolz.isdistinct\" rel=\"nofollow\"><code>toolz.isdistinct</code></a> in a similar manner as the other answers:</p>\n\n<pre><code>import toolz\n\ndf1[df1.Col1.str.split('-').apply(toolz.isdistinct)]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": false, "score": 3, "last_activity_date": 1470260213, "last_edit_date": 1470260213, "creation_date": 1470258902, "answer_id": 38753754, "question_id": 38753515, "link": "https://stackoverflow.com/questions/38753515/pandas-drop-rows-based-on-duplicated-values-in-a-list/38753754#38753754", "title": "Pandas: drop rows based on duplicated values in a list", "body": "<p><code>split</code> <code>'Col1'</code> and apply a repeat checker using an efficient <code>numpy</code> algorithm.</p>\n\n<pre><code>def nerpt(lst):\n    ti = np.triu_indices(len(lst), 1)\n    a = np.array(lst)\n    return (a[ti[0]] == a[ti[1]]).any()\n\ndf1[~df1.Col1.str.split('-').apply(nerpt)]\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/WnDn8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WnDn8.png\" alt=\"enter image description here\"></a></p>\n\n<hr>\n\n<h3>Timings</h3>\n\n<p>Pretty clear using <code>set</code> is most efficient.  This is reflective of @Luis's answer</p>\n\n<p>Using <code>pd.concat([df1 for _ in range(10000)])</code></p>\n\n<pre><code>rpt1 = lambda lst: not pd.Index(lst).is_unique\nrpt2 = lambda lst: len(lst) != len(set(lst))\nrpt3 = nerpt\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/H3Y9E.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/H3Y9E.png\" alt=\"enter image description here\"></a></p>\n"}, {"comments": [{"owner": {"reputation": 175, "user_id": 6575121, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fa373e55e0bccd81657798f76c619450?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/6575121/mike"}, "edited": false, "score": 1, "creation_date": 1470261453, "post_id": 38753833, "comment_id": 64882477, "body": "I like this approach.  I actually modified it to fit my overall coding.  Instead of a lambda function, I had just made a conditional statement using <code>df1[&#39;Col1&#39;].str.split(&#39;-&#39;).apply(set).apply(len) == df1[&#39;Col1&#39;].str.split(&#39;-&#39;).apply(len)</code>.  Thanks for your input, appreciate it!"}], "tags": [], "owner": {"reputation": 2647, "user_id": 776515, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/IrXxz.png?s=128&g=1", "display_name": "Luis", "link": "https://stackoverflow.com/users/776515/luis"}, "is_accepted": true, "score": 4, "last_activity_date": 1470259604, "last_edit_date": 1470259604, "creation_date": 1470259178, "answer_id": 38753833, "question_id": 38753515, "link": "https://stackoverflow.com/questions/38753515/pandas-drop-rows-based-on-duplicated-values-in-a-list/38753833#38753833", "title": "Pandas: drop rows based on duplicated values in a list", "body": "<p>Here is another option, using <code>set</code> and <code>len</code>:</p>\n\n<pre><code>df1 = pd.DataFrame({'Col1' : ['abc-def-ghi-jkl', 'jkl-ghi-jkl-mno'],})\n\ndf1['length'] = df1['Col1'].str.split('-').apply(set).apply(len)\n\nprint( df1 )\n\n              Col1  length\n0  abc-def-ghi-jkl       4\n1  jkl-ghi-jkl-mno       3\n\ndf1 = df1.loc[ df1['length'] &lt; 4 ]\n\nprint(df1)\n\n              Col1  length\n1  jkl-ghi-jkl-mno       3\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4316, "user_id": 6005451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b5d2854ebcf1678d4fab4f7bedd6b9f?s=128&d=identicon&r=PG&f=1", "display_name": "EoinS", "link": "https://stackoverflow.com/users/6005451/eoins"}, "is_accepted": false, "score": 1, "last_activity_date": 1470260643, "creation_date": 1470260643, "answer_id": 38754134, "question_id": 38753515, "link": "https://stackoverflow.com/questions/38753515/pandas-drop-rows-based-on-duplicated-values-in-a-list/38754134#38754134", "title": "Pandas: drop rows based on duplicated values in a list", "body": "<p>I went the same route you did, but instead kept everything in one dataframe; used  <code>apply()</code> and indexed to get what I needed:</p>\n\n<pre><code>[in]:\ngf1 = df1\ngf1['Col2'] = gf1['Col1'].str.split('-')  #keep lists in same DF\ngf1['Col3'] = gf1['Col2'].apply(set).apply(len) == gf1['Col2'].apply(len)\ndf1 = gf1['Col1'].loc[gf1['Col3'] == True]\ndf1\n[Out]: \n0 abc-def-ghi-jkl\nName: Col1, dtype: object\n</code></pre>\n"}], "owner": {"reputation": 175, "user_id": 6575121, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fa373e55e0bccd81657798f76c619450?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/6575121/mike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1006, "favorite_count": 0, "accepted_answer_id": 38753833, "answer_count": 4, "score": 6, "last_activity_date": 1470260643, "creation_date": 1470257947, "last_edit_date": 1470258404, "question_id": 38753515, "link": "https://stackoverflow.com/questions/38753515/pandas-drop-rows-based-on-duplicated-values-in-a-list", "title": "Pandas: drop rows based on duplicated values in a list", "body": "<p>I would like to drop rows within my dataframe based on if a piece of a string is duplicated within that string.  For example, if the string is jkl-ghi-jkl, I would drop this row because jkl is repeated twice.  I figured that creating a list and checking the list for duplicates would be the ideal approach.</p>\n\n<p>My dataframe for this example consist of 1 column and two data points:</p>\n\n<pre><code>    df1 = pd.DataFrame({'Col1' : ['abc-def-ghi-jkl', 'jkl-ghi-jkl-mno'],})\n</code></pre>\n\n<p>My first step I take is to apply a split to my data, and split of \"-\"</p>\n\n<pre><code>    List = df1['Col1].str.split('-')\n    List\n</code></pre>\n\n<p>Which is yields the output:</p>\n\n<pre><code>    0     [abc, def, ghi, jkl]\n    1     [jkl, ghi, jkl, mno]\n    Name: Col1, dtype: object\n</code></pre>\n\n<p>My second step I take is to convert my output into lists:</p>\n\n<pre><code>    List = List.tolist()\n</code></pre>\n\n<p>Which yields:</p>\n\n<pre><code>    [['abc', 'def', 'ghi', 'jkl'], ['jkl', 'ghi', 'jkl', 'mno']]\n</code></pre>\n\n<p>My last step I wish to accomplish is to compare a full list with a distinct list of unique values:</p>\n\n<pre><code>    len(List) &gt; len(set(List))\n</code></pre>\n\n<p>Which yields the error:</p>\n\n<pre><code>    TypeError: unhashable type: 'list'\n</code></pre>\n\n<p>I am aware that my .tolist() creates a list of 2 series.  Is there a way to convert these series into a list in order to test for duplicates?  I wish to use this piece of code:</p>\n\n<pre><code>    len(List) &gt; len(set(List)\n</code></pre>\n\n<p>with a drop in order to drop all rows with a duplicated value within each cell.  </p>\n\n<p>Is this the correct way of approaching, or is there a simpler way?</p>\n\n<p>My end output should look like:</p>\n\n<pre><code>     Col1\n     abc-def-ghi-jkl\n</code></pre>\n\n<p>Because string jkl-ghi-jkl-mno gets dropped due to \"jkl\" repeating twice</p>\n"}, {"tags": ["python", "django"], "answers": [{"tags": [], "owner": {"reputation": 2472, "user_id": 603819, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/zYtBs.png?s=128&g=1", "display_name": "Bobort", "link": "https://stackoverflow.com/users/603819/bobort"}, "is_accepted": true, "score": 1, "last_activity_date": 1591929581, "last_edit_date": 1591929581, "creation_date": 1470258841, "answer_id": 38753749, "question_id": 38753458, "link": "https://stackoverflow.com/questions/38753458/how-do-you-negate-an-annotated-field-in-django/38753749#38753749", "title": "How do you negate an annotated field in django?", "body": "<p>In Django 2.1, negation was added as a <a href=\"https://docs.djangoproject.com/en/2.1/ref/models/expressions/\" rel=\"nofollow noreferrer\">feature</a>.\nThis works in current versions:</p>\n\n<p><code>Model.objects.all().annotate(total=-Sum('qty'))</code></p>\n\n<p>In older versions, we can use F objects like this:</p>\n\n<p><code>Model.objects.all().annotate(total=Sum(F('qty')*-1))</code></p>\n"}], "owner": {"reputation": 2472, "user_id": 603819, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/zYtBs.png?s=128&g=1", "display_name": "Bobort", "link": "https://stackoverflow.com/users/603819/bobort"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "accepted_answer_id": 38753749, "answer_count": 1, "score": 1, "last_activity_date": 1591929581, "creation_date": 1470257727, "last_edit_date": 1470258824, "question_id": 38753458, "link": "https://stackoverflow.com/questions/38753458/how-do-you-negate-an-annotated-field-in-django", "title": "How do you negate an annotated field in django?", "body": "<p>I have an annotated queryset in which I am annotating the sum of numbers.  However, I want the result to be the negative of that sum.  I can't seem to do it like this:</p>\n\n<p><code>Model.objects.all().annotate(total=-Sum('qty'))</code></p>\n"}, {"tags": ["python", "mysql", "django", "database"], "comments": [{"owner": {"reputation": 241, "user_id": 6673578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b43b04c3f83bf4f338135e4f525b4911?s=128&d=identicon&r=PG&f=1", "display_name": "Konowau", "link": "https://stackoverflow.com/users/6673578/konowau"}, "edited": false, "score": 0, "creation_date": 1470393050, "post_id": 38753431, "comment_id": 64944143, "body": "For the record -- I haven&#39;t found any solution to this whatsoever. Decided to use <code>peewee</code> and do the read-only access without Django."}], "answers": [{"tags": [], "owner": {"reputation": 183, "user_id": 2591242, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PYIVw.png?s=128&g=1", "display_name": "rwms", "link": "https://stackoverflow.com/users/2591242/rwms"}, "is_accepted": false, "score": 2, "last_activity_date": 1474385614, "creation_date": 1474385614, "answer_id": 39598235, "question_id": 38753431, "link": "https://stackoverflow.com/questions/38753431/django-and-read-only-database-connections/39598235#39598235", "title": "Django and read-only database connections", "body": "<p>Had the same problem.\nDjango is trying to create the 'django_migrations' table in all DBs.\nThis happens even if there are no models associated with the read-only DB\nand all routers are pointing a different DB.</p>\n\n<p>I also ended up using peewee.</p>\n"}, {"tags": [], "owner": {"reputation": 151, "user_id": 5613434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f1e6e34fffb1daca56f915fbf1fc8b1?s=128&d=identicon&r=PG&f=1", "display_name": "SirSteavis", "link": "https://stackoverflow.com/users/5613434/sirsteavis"}, "is_accepted": false, "score": 15, "last_activity_date": 1492814564, "creation_date": 1492814564, "answer_id": 43553063, "question_id": 38753431, "link": "https://stackoverflow.com/questions/38753431/django-and-read-only-database-connections/43553063#43553063", "title": "Django and read-only database connections", "body": "<p>I encountered the same issue (using Django 1.11) and this question was at the top of my Google results for it. </p>\n\n<p>Your initial solution is only missing one critical piece. You need to tell Django what database models 'C' and 'D' are using.  What worked for me:</p>\n\n<pre><code>class ExternalModel(models.Model):\n    class Meta:\n        managed = False\n        abstract = True    \n        app_label = 'support'\n</code></pre>\n\n<p>Then tell your database router how to behave when it encounters that app_label in the allow_migrate() section:</p>\n\n<pre><code>    def allow_migrate(self, db, app_label, model_name=None, **hints):\n        if app_label == 'support':\n            return False\n        return (db == 'default')\n</code></pre>\n\n<p>I'm not sure that is the most-correct-solution in the eyes of the Django team, but effect is allow_migrate() returning False for any models defined with that app_label attribute value.  </p>\n\n<p>The Django <a href=\"https://docs.djangoproject.com/en/1.11/topics/db/multi-db/#database-routers\" rel=\"noreferrer\">documentation on routers</a> doesn't mention this explicitly (or, at least with model code samples that make it clear how the ORM passes the value for 'db' to allow_migrate()), but between the 'app_label' and 'managed' attributes you can get it to work*.</p>\n\n<p>* In my case the default is postgres and the read-only database is Oracle 12 via cx_Oracle. </p>\n"}, {"comments": [{"owner": {"reputation": 179, "user_id": 3687274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dvAJ1.jpg?s=128&g=1", "display_name": "Carl Marshall", "link": "https://stackoverflow.com/users/3687274/carl-marshall"}, "edited": false, "score": 0, "creation_date": 1550600530, "post_id": 47357817, "comment_id": 96325394, "body": "This has been a very handy hint (belatedly - after I&#39;d gone through the pain of working through all the testing code to work out where the issues with read only were occurring!). I&#39;ve ended up doing steps 1 &amp; 2, but hadn&#39;t thought to try 3 &amp; 4 yet. I have, however, modified my Test Runner to use some overridden util functions that remove databases with CREATE_DB=False set in their Test Settings (these read only DBs happen to be Oracle). So far, things are working again..."}, {"owner": {"reputation": 15112, "user_id": 623735, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/8eb2d80a35122171463f423eeec7bfa4?s=128&d=identicon&r=PG", "display_name": "hobs", "link": "https://stackoverflow.com/users/623735/hobs"}, "edited": false, "score": 0, "creation_date": 1567101304, "post_id": 47357817, "comment_id": 101872912, "body": "Could you share your router code as a pastebin or gist or a link to your blog?"}], "tags": [], "owner": {"reputation": 91, "user_id": 8958456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40f1c85069dbb3693e43265551f2da74?s=128&d=identicon&r=PG", "display_name": "Roger Masse", "link": "https://stackoverflow.com/users/8958456/roger-masse"}, "is_accepted": false, "score": 9, "last_activity_date": 1587290282, "last_edit_date": 1587290282, "creation_date": 1510946385, "answer_id": 47357817, "question_id": 38753431, "link": "https://stackoverflow.com/questions/38753431/django-and-read-only-database-connections/47357817#47357817", "title": "Django and read-only database connections", "body": "<p>It seems around the Django 1.10.1 timeframe, Tim Graham (the primary Django maintainer), accepted a patch that suppressed this specific exception but later withdrew the patch in favor of (roughly) the following method to work around this issue and to support read-only databases using the Django ORM.</p>\n\n<ol>\n<li><p>Define a database router as described in the <a href=\"https://docs.djangoproject.com/en/1.11/topics/db/multi-db/#database-routers\" rel=\"nofollow noreferrer\">Django documentation\non routers</a> I've attached an example router below that routes to a\ndifferent database based on an 'app' flag in the model meta.</p></li>\n<li><p>In your routers allow_migrations method, return False for any db argument\nthat corresponds to a read-only database. This prevents the migration of\nthe model tables regardless of where they would be routed to.</p></li>\n<li><p>This next part is a little weird but where the rubber hits the road and\nactually answers the original question. To keep <em>makemigrations</em> from\nattempting to create the <em>django_migrations</em> table in your read-only\ndatabase, the database traffic should not be routed. In the example\nrouter, that means 'read_only' is <strong>not</strong> in DATABASE_APPS_MAPPING.</p></li>\n<li><p>So, instead, Read-only databases are accessed explicitly with \"using\" (e.g. MyReadOnlyModel.objects.using('read_only').all()</p></li>\n</ol>\n\n<p><a href=\"https://i.stack.imgur.com/7yVgI.png\" rel=\"nofollow noreferrer\">Django database apps router</a></p>\n"}], "owner": {"reputation": 241, "user_id": 6673578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b43b04c3f83bf4f338135e4f525b4911?s=128&d=identicon&r=PG&f=1", "display_name": "Konowau", "link": "https://stackoverflow.com/users/6673578/konowau"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11698, "favorite_count": 15, "answer_count": 3, "score": 24, "last_activity_date": 1587290282, "creation_date": 1470257643, "last_edit_date": 1470259795, "question_id": 38753431, "link": "https://stackoverflow.com/questions/38753431/django-and-read-only-database-connections", "title": "Django and read-only database connections", "body": "<p>Assume a Django application which is supposed to use two MySQL databases:</p>\n\n<ul>\n<li><code>default</code> - for storing data represented by models <code>A</code> and <code>B</code> (read-write access)</li>\n<li><code>support</code> - for importing data represented by models <code>C</code> and <code>D</code> (read-only access)</li>\n</ul>\n\n<p>The <code>support</code> database is a part of an external application and <strong>cannot</strong> be modified.</p>\n\n<p>Since the Django application uses the built-in ORM for models <code>A</code> and <code>B</code> I figured it should use the very same ORM for models <code>C</code> and <code>D</code>, even though they map to tables in an external database (<code>support</code>.)</p>\n\n<p>In order to achieve that I defined the models <code>C</code> and <code>D</code> as follows:</p>\n\n\n\n<pre class=\"lang-python prettyprint-override\"><code>from django.db import models\n\n\nclass ExternalModel(models.Model):\n    class Meta:\n        managed = False\n        abstract = True\n\n\nclass ModelC(ExternalModel):\n    some_field = models.TextField(db_column='some_field')\n\n    class Meta(ExternalModel.Meta):\n        db_table = 'some_table_c'\n\n\nclass ModelD(ExternalModel):\n    some_other_field = models.TextField(db_column='some_other_field')\n\n    class Meta(ExternalModel.Meta):\n        db_table = 'some_table_d'\n</code></pre>\n\n<p>Then I defined a database router:</p>\n\n<pre class=\"lang-python prettyprint-override\"><code>from myapp.myapp.models import ExternalModel\n\n\nclass DatabaseRouter(object):\n    def db_for_read(self, model, **hints):\n        if issubclass(model, ExternalModel):\n            return 'support'\n\n        return 'default'\n\n    def db_for_write(self, model, **hints):\n        if issubclass(model, ExternalModel):\n            return None\n\n        return 'default'\n\n    def allow_relation(self, obj1, obj2, **hints):\n        return (isinstance(obj1, ExternalModel) == isinstance(obj2, ExternalModel))\n\n    def allow_migrate(self, db, app_label, model_name=None, **hints):\n        return (db == 'default')\n</code></pre>\n\n<p>And finally adjusted <code>settings.py</code>:</p>\n\n<pre class=\"lang-python prettyprint-override\"><code># (...)\n\nDATABASES = {\n    'default': {\n        'ENGINE': 'django.db.backends.mysql',\n        'OPTIONS': {\n            'read_default_file': os.path.join(BASE_DIR, 'resources', 'default.cnf'),\n        },\n    },\n    'support': {\n        'ENGINE': 'django.db.backends.mysql',\n        'OPTIONS': {\n            'read_default_file': os.path.join(BASE_DIR, 'resources', 'support.cnf'),\n        },\n    },\n}\n\nDATABASE_ROUTERS = ['myapp.database_router.DatabaseRouter']\n\n# (...)\n</code></pre>\n\n<p>The user specified in <code>support.conf</code> for the <code>support</code> database has been assigned read-only privileges.</p>\n\n<p>But when I run <code>python manage.py makemigrations</code> it fails with the following output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>    Traceback (most recent call last):\n  File \"/Users/username/Development/stuff/myapp/lib/python3.5/site-packages/django/db/backends/utils.py\", line 62, in execute\n    return self.cursor.execute(sql)\n  File \"/Users/username/Development/stuff/myapp/lib/python3.5/site-packages/django/db/backends/mysql/base.py\", line 112, in execute\n    return self.cursor.execute(query, args)\n  File \"/Users/username/Development/stuff/myapp/lib/python3.5/site-packages/MySQLdb/cursors.py\", line 226, in execute\n    self.errorhandler(self, exc, value)\n  File \"/Users/username/Development/stuff/myapp/lib/python3.5/site-packages/MySQLdb/connections.py\", line 36, in defaulterrorhandler\n    raise errorvalue\n  File \"/Users/username/Development/stuff/myapp/lib/python3.5/site-packages/MySQLdb/cursors.py\", line 217, in execute\n    res = self._query(query)\n  File \"/Users/username/Development/stuff/myapp/lib/python3.5/site-packages/MySQLdb/cursors.py\", line 378, in _query\n    rowcount = self._do_query(q)\n  File \"/Users/username/Development/stuff/myapp/lib/python3.5/site-packages/MySQLdb/cursors.py\", line 341, in _do_query\n    db.query(q)\n  File \"/Users/username/Development/stuff/myapp/lib/python3.5/site-packages/MySQLdb/connections.py\", line 280, in query\n    _mysql.connection.query(self, query)\n_mysql_exceptions.OperationalError: (1142, \"CREATE command denied to user 'somedbuser'@'somehost' for table 'django_migrations'\")\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/username/Development/stuff/myapp/lib/python3.5/site-packages/django/db/migrations/recorder.py\", line 57, in ensure_schema\n    editor.create_model(self.Migration)\n  File \"/Users/username/Development/stuff/myapp/lib/python3.5/site-packages/django/db/backends/base/schema.py\", line 295, in create_model\n    self.execute(sql, params or None)\n  File \"/Users/username/Development/stuff/myapp/lib/python3.5/site-packages/django/db/backends/base/schema.py\", line 112, in execute\n    cursor.execute(sql, params)\n  File \"/Users/username/Development/stuff/myapp/lib/python3.5/site-packages/django/db/backends/utils.py\", line 79, in execute\n    return super(CursorDebugWrapper, self).execute(sql, params)\n  File \"/Users/username/Development/stuff/myapp/lib/python3.5/site-packages/django/db/backends/utils.py\", line 64, in execute\n    return self.cursor.execute(sql, params)\n  File \"/Users/username/Development/stuff/myapp/lib/python3.5/site-packages/django/db/utils.py\", line 94, in __exit__\n    six.reraise(dj_exc_type, dj_exc_value, traceback)\n  File \"/Users/username/Development/stuff/myapp/lib/python3.5/site-packages/django/utils/six.py\", line 685, in reraise\n    raise value.with_traceback(tb)\n  File \"/Users/username/Development/stuff/myapp/lib/python3.5/site-packages/django/db/backends/utils.py\", line 62, in execute\n    return self.cursor.execute(sql)\n  File \"/Users/username/Development/stuff/myapp/lib/python3.5/site-packages/django/db/backends/mysql/base.py\", line 112, in execute\n    return self.cursor.execute(query, args)\n  File \"/Users/username/Development/stuff/myapp/lib/python3.5/site-packages/MySQLdb/cursors.py\", line 226, in execute\n    self.errorhandler(self, exc, value)\n  File \"/Users/username/Development/stuff/myapp/lib/python3.5/site-packages/MySQLdb/connections.py\", line 36, in defaulterrorhandler\n    raise errorvalue\n  File \"/Users/username/Development/stuff/myapp/lib/python3.5/site-packages/MySQLdb/cursors.py\", line 217, in execute\n    res = self._query(query)\n  File \"/Users/username/Development/stuff/myapp/lib/python3.5/site-packages/MySQLdb/cursors.py\", line 378, in _query\n    rowcount = self._do_query(q)\n  File \"/Users/username/Development/stuff/myapp/lib/python3.5/site-packages/MySQLdb/cursors.py\", line 341, in _do_query\n    db.query(q)\n  File \"/Users/username/Development/stuff/myapp/lib/python3.5/site-packages/MySQLdb/connections.py\", line 280, in query\n    _mysql.connection.query(self, query)\ndjango.db.utils.OperationalError: (1142, \"CREATE command denied to user 'somedbuser'@'somehost' for table 'django_migrations'\")\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"manage.py\", line 22, in &lt;module&gt;\n    execute_from_command_line(sys.argv)\n  File \"/Users/username/Development/stuff/myapp/lib/python3.5/site-packages/django/core/management/__init__.py\", line 367, in execute_from_command_line\n    utility.execute()\n  File \"/Users/username/Development/stuff/myapp/lib/python3.5/site-packages/django/core/management/__init__.py\", line 359, in execute\n    self.fetch_command(subcommand).run_from_argv(self.argv)\n  File \"/Users/username/Development/stuff/myapp/lib/python3.5/site-packages/django/core/management/base.py\", line 305, in run_from_argv\n    self.execute(*args, **cmd_options)\n  File \"/Users/username/Development/stuff/myapp/lib/python3.5/site-packages/django/core/management/base.py\", line 356, in execute\n    output = self.handle(*args, **options)\n  File \"/Users/username/Development/stuff/myapp/lib/python3.5/site-packages/django/core/management/commands/makemigrations.py\", line 100, in handle\n    loader.check_consistent_history(connection)\n  File \"/Users/username/Development/stuff/myapp/lib/python3.5/site-packages/django/db/migrations/loader.py\", line 276, in check_consistent_history\n    applied = recorder.applied_migrations()\n  File \"/Users/username/Development/stuff/myapp/lib/python3.5/site-packages/django/db/migrations/recorder.py\", line 65, in applied_migrations\n    self.ensure_schema()\n  File \"/Users/username/Development/stuff/myapp/lib/python3.5/site-packages/django/db/migrations/recorder.py\", line 59, in ensure_schema\n    raise MigrationSchemaMissing(\"Unable to create the django_migrations table (%s)\" % exc)\ndjango.db.migrations.exceptions.MigrationSchemaMissing: Unable to create the django_migrations table ((1142, \"CREATE command denied to user 'somedbuser'@'somehost' for table 'django_migrations'\"))\n</code></pre>\n\n<p>It appears that Django tries to create the <code>django_migrations</code> table in the read-only database <code>support</code> nevertheless.</p>\n\n<p>Is there any clean way to prevent the migrations mechanism from attempting that? Or do I have to employ another ORM library for this read-only access to the <code>support</code> database?</p>\n"}, {"tags": ["python", "html", "django", "django-forms", "django-templates"], "answers": [{"comments": [{"owner": {"reputation": 575, "user_id": 6519019, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/461127ba6aea886155559406923004ce?s=128&d=identicon&r=PG&f=1", "display_name": "Written", "link": "https://stackoverflow.com/users/6519019/written"}, "edited": false, "score": 0, "creation_date": 1470273636, "post_id": 38754218, "comment_id": 64886702, "body": "Thats what I tried originally, but that always defaulted to display &#39;&lt;input&#39; instead of nothing. Any reason why it might be doing that?"}, {"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "reply_to_user": {"reputation": 575, "user_id": 6519019, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/461127ba6aea886155559406923004ce?s=128&d=identicon&r=PG&f=1", "display_name": "Written", "link": "https://stackoverflow.com/users/6519019/written"}, "edited": false, "score": 0, "creation_date": 1470298720, "post_id": 38754218, "comment_id": 64895813, "body": "I meant you should use that instead of the whole <code>input</code> tag. You can add the extra html class in the form definition itself."}], "tags": [], "owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "is_accepted": true, "score": 0, "last_activity_date": 1470261020, "creation_date": 1470261020, "answer_id": 38754218, "question_id": 38753345, "link": "https://stackoverflow.com/questions/38753345/why-is-my-django-form-template-removing-all-data-after-a-space/38754218#38754218", "title": "Why is my Django form template removing all data after a space?", "body": "<p>Django is not doing this, your browser is. You need to put the value variable in quotes:</p>\n\n<pre><code>value=\"{{ field.data|default_if_none:\"\" }}\"\n</code></pre>\n\n<p>But really, your shouldn't output fields like this: use Django to do it properly, with just <code>{{ field }}</code>.</p>\n"}], "owner": {"reputation": 575, "user_id": 6519019, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/461127ba6aea886155559406923004ce?s=128&d=identicon&r=PG&f=1", "display_name": "Written", "link": "https://stackoverflow.com/users/6519019/written"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 38754218, "answer_count": 1, "score": 0, "last_activity_date": 1470261020, "creation_date": 1470257316, "last_edit_date": 1470258080, "question_id": 38753345, "link": "https://stackoverflow.com/questions/38753345/why-is-my-django-form-template-removing-all-data-after-a-space", "title": "Why is my Django form template removing all data after a space?", "body": "<p>I am using a Django Form to validate a specific sign up page. The Form is set up as so:</p>\n\n<pre><code>class MemberForm(forms.Form):\n    email = forms.EmailField(label='Email', required=True)\n    password = forms.RegexField(label='Password', widget=forms.PasswordInput, required=True, regex=r'^(?=.*[A-Za-z])(?=.*\\d)[\\S]{8,}$')\n    confirm_password = forms.CharField(label='Confirm Password', widget=forms.PasswordInput, required=True)\n    full_name = forms.CharField(label='Full Name', required=True)\n    pref_name = forms.CharField(label='Preferred Name', required=False)\n    phone = forms.RegexField(label='Phone', regex=r'^\\+?1?\\d{9,15}$', required=True)\n    address = forms.CharField(label='Address', required=True)\n    city = forms.CharField(label='City', required=True)\n    provinces = forms.ChoiceField(label='Provinces', choices=PROVINCE_CHOICES, required=True)\n    postal_code = forms.RegexField(label='Postal Code', regex=r'^([A-Z][0-9][A-Z]\\s[0-9][A-Z][0-9])$')\n    dob = forms.DateField(label='Birthday', required=True)\n    occupation = forms.CharField(label='Occupation', required=True)\n</code></pre>\n\n<p>Everything is working fine in this regard, the form accepts everything it should and rejects everything it should. If the form is invalid, I render it again. This is all done in the following view:</p>\n\n<pre><code>def create_member(request):\n    form = forms.MemberForm(request.POST or None)\n\n    if request.method == 'POST':\n        if form.is_valid():\n            #redirect\n\n    provinces = Provinces.objects.all()\n    return render(request, 'party/adminCreateAccount2.html', {'form': form, 'provinces': provinces, 'today': str(now_date())})\n</code></pre>\n\n<p>So, if the form is not valid, I simply stay on the page and reuse the current form. However, when the form reloads, for some reason, all data that has a space will erase everything after the space when it is shown. </p>\n\n<p>For example, if I use 'Test Test' as my full name, then leave everything else blank, when the page reloads, I will only see 'Test'.</p>\n\n<p>My form is displayed using the following custom template:</p>\n\n<pre><code>{% for field in form %}\n    &lt;div class=\"form-row grp-row grp-cells-1 {{ field.html_name }}\"&gt;\n        &lt;div class=\"field-box l-2c-fluid l-d-4\"&gt;\n            &lt;div class=\"c-1\"&gt;\n                &lt;label {% if field.field.required %} class=\"required\" {% endif %} for={{ field.html_name }}&gt;{{ field.label }}&lt;/label&gt;\n            &lt;/div&gt;\n\n            &lt;div class=\"c-2\"&gt;\n                &lt;input class=\"vTextField\" type=\"text\" name={{ field.html_name }} id={{ field.html_name }} value={{ field.data|default_if_none:\"\" }}&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n{% endfor %}\n</code></pre>\n\n<p>I tried outputting <code>{{ field.data|default_if_none:\"\" }}</code> right beside the input and it displayed the entire string ('Test test' in our example) so I am completely stumped because I know the correct data is getting passed through. Any idea why its being changed for the input value?</p>\n"}, {"tags": ["python", "coroutine", "python-asyncio"], "comments": [{"owner": {"reputation": 15081, "user_id": 978961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9562cbc3556ac68f081dfda387a9f4ab?s=128&d=identicon&r=PG", "display_name": "dirn", "link": "https://stackoverflow.com/users/978961/dirn"}, "edited": false, "score": 1, "creation_date": 1470268343, "post_id": 38753312, "comment_id": 64884495, "body": "You are importing a module named <code>await</code> and shadowing the keyword. Remove the import."}], "answers": [{"comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 12459, "user_id": 316082, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/a18baaf9417df189af31b53af03adb1c?s=128&d=identicon&r=PG", "display_name": "liv2hak", "link": "https://stackoverflow.com/users/316082/liv2hak"}, "edited": false, "score": 0, "creation_date": 1470258470, "post_id": 38753417, "comment_id": 64881093, "body": "@liv2hak: You&#39;ve probably installed multiple Python interpreters and gotten mixed up about which one you&#39;re using."}, {"owner": {"reputation": 10796, "user_id": 1105249, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/083d54b8327a76a1dcf57df507ab7b34?s=128&d=identicon&r=PG", "display_name": "Luis Masuelli", "link": "https://stackoverflow.com/users/1105249/luis-masuelli"}, "edited": false, "score": 1, "creation_date": 1470258571, "post_id": 38753417, "comment_id": 64881145, "body": "Edited. Check the version when you run an interative interpreter"}, {"owner": {"reputation": 12459, "user_id": 316082, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/a18baaf9417df189af31b53af03adb1c?s=128&d=identicon&r=PG", "display_name": "liv2hak", "link": "https://stackoverflow.com/users/316082/liv2hak"}, "edited": false, "score": 0, "creation_date": 1470258776, "post_id": 38753417, "comment_id": 64881249, "body": "@LuisMasuelli - I have updated above. I also get the same result."}], "tags": [], "owner": {"reputation": 10796, "user_id": 1105249, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/083d54b8327a76a1dcf57df507ab7b34?s=128&d=identicon&r=PG", "display_name": "Luis Masuelli", "link": "https://stackoverflow.com/users/1105249/luis-masuelli"}, "is_accepted": false, "score": 2, "last_activity_date": 1470258543, "last_edit_date": 1470258543, "creation_date": 1470257590, "answer_id": 38753417, "question_id": 38753312, "link": "https://stackoverflow.com/questions/38753312/await-asyncio-waitcoroutines-invalid-syntax/38753417#38753417", "title": "await asyncio.wait(coroutines) invalid syntax", "body": "<p>Your article says:</p>\n\n<blockquote>\n  <p>The async and await keywords were added in Python 3.5 to define a native coroutine and make them a distinct type when compared with a generator based coroutine. If you\u2019d like an in-depth description of async and await, you will want to check out PEP 492.</p>\n</blockquote>\n\n<p>This means those kws are not valid in Python 3.4.</p>\n\n<p>I installed right now python 3.5 and tried the <code>python</code> interpreter</p>\n\n<pre><code>foo@foo-host:~$ python3.5  \nPython 3.5.0+ (default, Oct 11 2015, 09:05:38)  \n[GCC 5.2.1 20151010] on linux  \nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.  \n&gt;&gt;&gt; async def foo():  \n...     await bar  \n...   \n&gt;&gt;&gt;   \n</code></pre>\n\n<p>Got no syntax error.</p>\n"}, {"tags": [], "owner": {"reputation": 2841, "user_id": 6119465, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/btWkX.png?s=128&g=1", "display_name": "2Cubed", "link": "https://stackoverflow.com/users/6119465/2cubed"}, "is_accepted": false, "score": 9, "last_activity_date": 1470270911, "creation_date": 1470270911, "answer_id": 38755741, "question_id": 38753312, "link": "https://stackoverflow.com/questions/38753312/await-asyncio-waitcoroutines-invalid-syntax/38755741#38755741", "title": "await asyncio.wait(coroutines) invalid syntax", "body": "<p><code>await</code> will raise a <code>SyntaxError</code> when used anywhere other than inside of a function defined using the <code>async</code> keyword, regardless of whether or not it has been made a coroutine using the <code>@asyncio.coroutine</code> decorator.</p>\n\n<pre><code>import asyncio\n\nasync def test():\n    pass\n\n\nasync def foo():\n    await test()  # No exception raised.\n\n@asyncio.coroutine\ndef bar():\n    await test()  # Exception raised.\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 78, "user_id": 682646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a6fc5629bcd31363feef34553eae0b4?s=128&d=identicon&r=PG", "display_name": "mgwilliams", "link": "https://stackoverflow.com/users/682646/mgwilliams"}, "is_accepted": false, "score": 1, "last_activity_date": 1514370111, "last_edit_date": 1514370111, "creation_date": 1472869393, "answer_id": 39302678, "question_id": 38753312, "link": "https://stackoverflow.com/questions/38753312/await-asyncio-waitcoroutines-invalid-syntax/39302678#39302678", "title": "await asyncio.wait(coroutines) invalid syntax", "body": "<p>You have two different issues here. </p>\n\n<ol>\n<li><p>As mentioned by <a href=\"https://stackoverflow.com/users/978961/dirn\">dirn</a> in his comment, you should not be importing <code>await</code>. <code>await</code> is a built in keyword in Python 3.5. So, remove <code>import await</code>.</p></li>\n<li><p>You've mixed the <code>@asyncio.coroutine</code> decorator and <code>await</code> keyword (as <a href=\"https://stackoverflow.com/users/6119465/2cubed\">2Cubed</a> mentions). Instead of the decorator, use <code>async def</code> as shown in the <a href=\"http://www.blog.pythonlibrary.org/2016/07/26/python-3-an-intro-to-asyncio/\" rel=\"nofollow noreferrer\">example</a> you linked to. In other words, instead of:</p></li>\n</ol>\n\n<pre>\n@asyncio.coroutine\ndef download_coroutine(url):\n</pre>\n\n<p>use:</p>\n\n<pre><code>async def download_coroutine(url):\n</code></pre>\n\n<p>Do the same for <code>main</code>.</p>\n\n<p>If you make these changes, your code should run under Python 3.5.</p>\n"}], "owner": {"reputation": 12459, "user_id": 316082, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/a18baaf9417df189af31b53af03adb1c?s=128&d=identicon&r=PG", "display_name": "liv2hak", "link": "https://stackoverflow.com/users/316082/liv2hak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8995, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1514370111, "creation_date": 1470257191, "last_edit_date": 1470258749, "question_id": 38753312, "link": "https://stackoverflow.com/questions/38753312/await-asyncio-waitcoroutines-invalid-syntax", "title": "await asyncio.wait(coroutines) invalid syntax", "body": "<p>I have a python program that uses <code>asyncio</code> and <code>await</code> modules. This is an example program that I have taken from \n<a href=\"http://www.blog.pythonlibrary.org/2016/07/26/python-3-an-intro-to-asyncio/\" rel=\"nofollow\">here</a>. </p>\n\n<pre><code>import asyncio\nimport os\nimport urllib.request\nimport await\n\n@asyncio.coroutine\ndef download_coroutine(url):\n    \"\"\"\n    A coroutine to download the specified url\n    \"\"\"\n    request = urllib.request.urlopen(url)\n    filename = os.path.basename(url)\n\n    with open(filename, 'wb') as file_handle:\n        while True:\n            chunk = request.read(1024)\n            if not chunk:\n                break\n            file_handle.write(chunk)\n    msg = 'Finished downloading {filename}'.format(filename=filename)\n    return msg\n\n@asyncio.coroutine\ndef main(urls):\n    \"\"\"\n    Creates a group of coroutines and waits for them to finish\n    \"\"\"\n    coroutines = [download_coroutine(url) for url in urls]\n    completed, pending = await asyncio.wait(coroutines)\n    for item in completed:\n        print(item.result())\n\n\nif __name__ == '__main__':\n    urls = [\"http://www.irs.gov/pub/irs-pdf/f1040.pdf\",\n            \"http://www.irs.gov/pub/irs-pdf/f1040a.pdf\",\n            \"http://www.irs.gov/pub/irs-pdf/f1040ez.pdf\",\n            \"http://www.irs.gov/pub/irs-pdf/f1040es.pdf\",\n            \"http://www.irs.gov/pub/irs-pdf/f1040sb.pdf\"]\n\n    event_loop = asyncio.get_event_loop()\n    try:\n        event_loop.run_until_complete(main(urls))\n    finally:\n        event_loop.close()\n</code></pre>\n\n<p>I am using <code>python 3.5.1</code>.</p>\n\n<pre><code>C:\\Anaconda3\\python.exe \"C:\\Users\\XXXXXXS\\AppData\\Roaming\\JetBrains\\PyCharm Community Edition 2016.1\\helpers\\pydev\\pydevconsole.py\" 49950 49951\nPython 3.5.1 |Anaconda 2.4.0 (64-bit)| (default, Jun 15 2016, 15:29:36) [MSC v.1900 64 bit (AMD64)]\nType \"copyright\", \"credits\" or \"license\" for more information.\n</code></pre>\n\n<p>When I try to run it I get the following error.</p>\n\n<pre><code>  File \"C:/Cubic/playpen/python/concepts/advanced/coroutines.py\", line 29\n    completed, pending = await asyncio.wait(coroutines)\n                                     ^\nSyntaxError: invalid syntax\n</code></pre>\n\n<p>I have both asyncio and await installed.</p>\n\n<p>I have tried the same thing and I don't get any syntax error either.</p>\n\n<pre><code>C:\\playpen\\python&gt;python\nPython 3.5.1 |Anaconda 2.4.0 (64-bit)| (default, Jun 15 2016, 15:29:36) [MSC v.1900 64 bit (AMD64)] on win32\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; async def foo():\n...   await bar\n...\n</code></pre>\n"}, {"tags": ["python", "html", "parsing", "beautifulsoup"], "comments": [{"owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "edited": false, "score": 1, "creation_date": 1470257552, "post_id": 38753246, "comment_id": 64880685, "body": "How is <code>rows</code> defined?"}, {"owner": {"reputation": 43, "user_id": 6674192, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3e285fe580430a89850787949dd460b?s=128&d=identicon&r=PG&f=1", "display_name": "AD233", "link": "https://stackoverflow.com/users/6674192/ad233"}, "reply_to_user": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "edited": false, "score": 0, "creation_date": 1470258781, "post_id": 38753246, "comment_id": 64881252, "body": "Thanks! More detail provided about the table &amp; codes."}, {"owner": {"reputation": 1391, "user_id": 3826759, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/e7a732492ee414b03e4439b8ec50d38e?s=128&d=identicon&r=PG&f=1", "display_name": "double_j", "link": "https://stackoverflow.com/users/3826759/double-j"}, "edited": false, "score": 0, "creation_date": 1470258805, "post_id": 38753246, "comment_id": 64881260, "body": "It&#39;s doing exactly what your asking it to do. Are you trying to get all the <code>td</code>&#39;s?"}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 6674192, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3e285fe580430a89850787949dd460b?s=128&d=identicon&r=PG&f=1", "display_name": "AD233", "link": "https://stackoverflow.com/users/6674192/ad233"}, "edited": false, "score": 0, "creation_date": 1470260069, "post_id": 38753740, "comment_id": 64881872, "body": "Thanks! This gets it a lot closer to my goal! Actually what I&#39;d like to do is to  export this table into a typical CSV format with the &quot;Name&quot; and the html link as separate columns. Is there a way to do this with the &quot;extend&quot; method you just suggested? Thanks!"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 43, "user_id": 6674192, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3e285fe580430a89850787949dd460b?s=128&d=identicon&r=PG&f=1", "display_name": "AD233", "link": "https://stackoverflow.com/users/6674192/ad233"}, "edited": false, "score": 0, "creation_date": 1470260252, "post_id": 38753740, "comment_id": 64881965, "body": "@AD233, so you basically want to recreate the table in a csv?"}, {"owner": {"reputation": 43, "user_id": 6674192, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3e285fe580430a89850787949dd460b?s=128&d=identicon&r=PG&f=1", "display_name": "AD233", "link": "https://stackoverflow.com/users/6674192/ad233"}, "edited": false, "score": 0, "creation_date": 1470260436, "post_id": 38753740, "comment_id": 64882045, "body": "That is correct, except I&#39;d like to extract the href link as a separate column. Thanks!"}, {"owner": {"reputation": 43, "user_id": 6674192, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3e285fe580430a89850787949dd460b?s=128&d=identicon&r=PG&f=1", "display_name": "AD233", "link": "https://stackoverflow.com/users/6674192/ad233"}, "edited": false, "score": 0, "creation_date": 1470271152, "post_id": 38753740, "comment_id": 64885200, "body": "Fantastic! Thanks for the help! This is quite fun indeed"}], "tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": true, "score": 0, "last_activity_date": 1470262276, "last_edit_date": 1470262276, "creation_date": 1470258812, "answer_id": 38753740, "question_id": 38753246, "link": "https://stackoverflow.com/questions/38753246/beautifulsoup-html-table-parsing-only-able-to-get-the-last-row/38753740#38753740", "title": "Beautifulsoup HTML table parsing--only able to get the last row?", "body": "<p>You need to extend if you want all the th tags in a single list, you just keep reassigning <code>cells = row.find_all('th')</code> so when your print cells outside the loop you will only see what it was last assigned to i.e the last th in the last tr:</p>\n\n<pre><code>cells = []\nfor row in rows:\n cells.extend(row.find_all('th'))\n</code></pre>\n\n<p>Also since there is only one table you can just use <em>find</em>:</p>\n\n<pre><code>soup = BeautifulSoup(html)\n\ntable = soup.find(\"table\", class_=\"participants-table\")\n</code></pre>\n\n<p>If you want to skip the thead row you can use a <em>css selector</em>:</p>\n\n<pre><code>from bs4 import BeautifulSoup\n\nsoup = BeautifulSoup(html)\n\nrows = soup.select(\"table.participants-table  thead ~ tr\")\n\ncells = [tr.th for tr in rows]\nprint(cells)\n</code></pre>\n\n<p>cells will give you:</p>\n\n<pre><code>[&lt;th class=\"name\"&gt;&lt;a href=\"/what-is-gc/participants/4479-Grontmij\"&gt;Grontmij&lt;/a&gt;&lt;/th&gt;, &lt;th class=\"name\"&gt;&lt;a href=\"/what-is-gc/participants/4492-Groupe-Bial\"&gt;Groupe Bial&lt;/a&gt;&lt;/th&gt;]\n</code></pre>\n\n<p>To write the whole table to csv:</p>\n\n<pre><code>import csv\n\nsoup = BeautifulSoup(html, \"html.parser\")\n\nrows = soup.select(\"table.participants-table tr\")\n\nwith open(\"data.csv\", \"w\") as out:\n    wr = csv.writer(out)\n    wr.writerow([th.text for th in rows[0].find_all(\"th\")] + [\"URL\"])\n\n    for row in rows[1:]:\n        wr.writerow([tag.text for tag in row.find_all()] + [row.th.a[\"href\"]])\n</code></pre>\n\n<p>which for you sample will give you:</p>\n\n<pre><code>Name,Type,Sector,Country,Joined On,URL\nGrontmij,Company,General Industrials,Netherlands,2000-09-20,/what-is-gc/participants/4479-Grontmij\nGroupe Bial,Company,Pharmaceuticals &amp; Biotechnology,Portugal,2004-02-19,/what-is-gc/participants/4492-Groupe-Bial\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 6674192, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3e285fe580430a89850787949dd460b?s=128&d=identicon&r=PG&f=1", "display_name": "AD233", "link": "https://stackoverflow.com/users/6674192/ad233"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 985, "favorite_count": 0, "accepted_answer_id": 38753740, "answer_count": 1, "score": 2, "last_activity_date": 1470262276, "creation_date": 1470256931, "last_edit_date": 1470258930, "question_id": 38753246, "link": "https://stackoverflow.com/questions/38753246/beautifulsoup-html-table-parsing-only-able-to-get-the-last-row", "title": "Beautifulsoup HTML table parsing--only able to get the last row?", "body": "<p>I have a simple HTML table to parse but somehow Beautifulsoup is only able to get me results from the last row. I'm wondering if anyone would take a look at that and see what's wrong. So I already created the rows object from the HTML table:</p>\n\n<pre><code> &lt;table class='participants-table'&gt;\n    &lt;thead&gt;\n      &lt;tr&gt;\n          &lt;th data-field=\"name\" class=\"sort-direction-toggle name\"&gt;Name&lt;/th&gt;\n          &lt;th data-field=\"type\" class=\"sort-direction-toggle type active-sort asc\"&gt;Type&lt;/th&gt;\n          &lt;th data-field=\"sector\" class=\"sort-direction-toggle sector\"&gt;Sector&lt;/th&gt;\n          &lt;th data-field=\"country\" class=\"sort-direction-toggle country\"&gt;Country&lt;/th&gt;\n          &lt;th data-field=\"joined_on\" class=\"sort-direction-toggle joined-on\"&gt;Joined On&lt;/th&gt;\n      &lt;/tr&gt;\n    &lt;/thead&gt;\n    &lt;tbody&gt;\n        &lt;tr&gt;\n          &lt;th class='name'&gt;&lt;a href=\"/what-is-gc/participants/4479-Grontmij\"&gt;Grontmij&lt;/a&gt;&lt;/th&gt;\n          &lt;td class='type'&gt;Company&lt;/td&gt;\n          &lt;td class='sector'&gt;General Industrials&lt;/td&gt;\n          &lt;td class='country'&gt;Netherlands&lt;/td&gt;\n          &lt;td class='joined-on'&gt;2000-09-20&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;th class='name'&gt;&lt;a href=\"/what-is-gc/participants/4492-Groupe-Bial\"&gt;Groupe Bial&lt;/a&gt;&lt;/th&gt;\n          &lt;td class='type'&gt;Company&lt;/td&gt;\n          &lt;td class='sector'&gt;Pharmaceuticals &amp;amp; Biotechnology&lt;/td&gt;\n          &lt;td class='country'&gt;Portugal&lt;/td&gt;\n          &lt;td class='joined-on'&gt;2004-02-19&lt;/td&gt;\n        &lt;/tr&gt;\n    &lt;/tbody&gt;\n  &lt;/table&gt;\n</code></pre>\n\n<p>I use the following codes to get the rows: </p>\n\n<pre><code>table=soup.find_all(\"table\", class_=\"participants-table\")\ntable1=table[0]\nrows=table1.find_all('tr')\nrows=rows[1:]\n</code></pre>\n\n<p>This gets:</p>\n\n<pre><code>rows=[&lt;tr&gt;\n &lt;th class=\"name\"&gt;&lt;a href=\"/what-is-gc/participants/4479-Grontmij\"&gt;Grontmij&lt;/a&gt;&lt;/th&gt;\n &lt;td class=\"type\"&gt;Company&lt;/td&gt;\n &lt;td class=\"sector\"&gt;General Industrials&lt;/td&gt;\n &lt;td class=\"country\"&gt;Netherlands&lt;/td&gt;\n &lt;td class=\"joined-on\"&gt;2000-09-20&lt;/td&gt;\n &lt;/tr&gt;, &lt;tr&gt;\n &lt;th class=\"name\"&gt;&lt;a href=\"/what-is-gc/participants/4492-Groupe-Bial\"&gt;Groupe Bial&lt;/a&gt;&lt;/th&gt;\n &lt;td class=\"type\"&gt;Company&lt;/td&gt;\n &lt;td class=\"sector\"&gt;Pharmaceuticals &amp;amp; Biotechnology&lt;/td&gt;\n &lt;td class=\"country\"&gt;Portugal&lt;/td&gt;\n &lt;td class=\"joined-on\"&gt;2004-02-19&lt;/td&gt;\n &lt;/tr&gt;]\n</code></pre>\n\n<p>As expected, it looks like. However, if I continue:</p>\n\n<pre><code>for row in rows:\n    cells = row.find_all('th')\n</code></pre>\n\n<p>I'm only able to get the last entry! </p>\n\n<pre><code>cells=[&lt;th class=\"name\"&gt;&lt;a href=\"/what-is-gc/participants/4492-Groupe-Bial\"&gt;Groupe Bial&lt;/a&gt;&lt;/th&gt;]\n</code></pre>\n\n<p>What is going on? This is my first time using beautifulsoup, and what I'd like to do is to export this table into CSV. Any help is greatly appreciated! Thanks</p>\n"}, {"tags": ["python", "eclipse", "python-3.x", "scripting"], "answers": [{"tags": [], "owner": {"reputation": 421, "user_id": 3642304, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f79bdbc49e15165aba9b94addcab951e?s=128&d=identicon&r=PG&f=1", "display_name": "mban", "link": "https://stackoverflow.com/users/3642304/mban"}, "is_accepted": true, "score": 1, "last_activity_date": 1496166620, "creation_date": 1496166620, "answer_id": 44268760, "question_id": 38753236, "link": "https://stackoverflow.com/questions/38753236/project-variables-in-eclipse-post-build-script/44268760#44268760", "title": "Project Variables in Eclipse Post-Build Script", "body": "<p>I figured out a solution and wanted to post an answer in case others would like to do something similar.</p>\n\n<p>As long as the Python executable location and script location are in your system environment path variable, you can simply add <code>cmd.exe /c MyScript.py</code> in the Eclipse Post-build steps command field located in properties under <code>C/C++ Build -&gt; Settings -&gt; Build Steps</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 151, "user_id": 7036941, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0rUXGxfmRkM/AAAAAAAAAAI/AAAAAAAADzA/UQAMXlyJtqg/photo.jpg?sz=128", "display_name": "Joel Santos Rico", "link": "https://stackoverflow.com/users/7036941/joel-santos-rico"}, "is_accepted": false, "score": 2, "last_activity_date": 1520869168, "last_edit_date": 1520869168, "creation_date": 1520606076, "answer_id": 49196021, "question_id": 38753236, "link": "https://stackoverflow.com/questions/38753236/project-variables-in-eclipse-post-build-script/49196021#49196021", "title": "Project Variables in Eclipse Post-Build Script", "body": "<p>I've been struggling with this one too, not understanding why Eclipse would not translate that environment variable, but I think that the right one to use, or at least it worked for me, is this one:</p>\n\n<p><code>${ProjDirPath}</code></p>\n\n<p>I had a similar issue, with the <code>PROJECT_LOC</code> environment variable not working. I noticed that the command had <code>${BuildArtifactFileBaseName}</code> as a parameter at the end of my line, something that was not defined in my list of variables. I searched a bit and found a lot of macros in this <a href=\"http://processors.wiki.ti.com/index.php/Project_Macros\" rel=\"nofollow noreferrer\">Texas Instruments page</a>, and that's how I found <code>$ProjDirPath</code></p>\n"}], "owner": {"reputation": 421, "user_id": 3642304, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f79bdbc49e15165aba9b94addcab951e?s=128&d=identicon&r=PG&f=1", "display_name": "mban", "link": "https://stackoverflow.com/users/3642304/mban"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1799, "favorite_count": 0, "accepted_answer_id": 44268760, "answer_count": 2, "score": 1, "last_activity_date": 1520869168, "creation_date": 1470256902, "question_id": 38753236, "link": "https://stackoverflow.com/questions/38753236/project-variables-in-eclipse-post-build-script", "title": "Project Variables in Eclipse Post-Build Script", "body": "<p>I'm trying to run a post-build python script in Eclipse. By explicitly naming the path to the python script, I am able to get it to run correctly. However, when I attempt to use the Eclipse project variable <code>${PROJECT_LOC}</code>, it's unable to resolve the correct path. </p>\n\n<p>What I've tried entering, with no success, into the post-build script section of Eclipse's build settings: </p>\n\n<pre><code>python.exe ${PROJECT_LOC}\\script.py\nResults: can't open file '\\script.py: [Errno 2] No such file or directory` \n\npython.exe PROJECT_LOC\\script.py\nResults: can't open file 'PROJECT_LOC\\script.py: [Errno 2] No such file or directory\n</code></pre>\n\n<p>Again, it works when I explicitly define the path to the script like so:</p>\n\n<pre><code>python.exe C:\\somepath\\script.py\n</code></pre>\n\n<p>It seems to not register the eclipse <code>PROJECT_LOC</code> variable. Is it possible to use Eclipse's variables when calling a pre/post-build command?</p>\n"}, {"tags": ["python", "list", "numpy", "matplotlib", "bytearray"], "answers": [{"tags": [], "owner": {"reputation": 61, "user_id": 6435759, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/15Z5y.png?s=128&g=1", "display_name": "mdev", "link": "https://stackoverflow.com/users/6435759/mdev"}, "is_accepted": false, "score": 1, "last_activity_date": 1470257559, "last_edit_date": 1495541206, "creation_date": 1470257559, "answer_id": 38753409, "question_id": 38753205, "link": "https://stackoverflow.com/questions/38753205/how-to-plot-a-list-of-byte-data-with-matplotlib/38753409#38753409", "title": "how to plot a list of byte data with matplotlib", "body": "<p>to read your items, two at a time (x1, y1), try this: <a href=\"https://stackoverflow.com/questions/16789776/iterating-over-two-values-of-a-list-at-a-time-in-python\">iterating over two values of a list at a time in python</a></p>\n\n<p>and then (divide and conquer style), deal with the scientific notation separately.</p>\n\n<p>Once you've got two lists of numbers, then the matplotlib documentation can take it from there. </p>\n\n<p>That may not be a complete answer, but it should get you a start.</p>\n"}, {"comments": [{"owner": {"reputation": 981, "user_id": 3033594, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/qgRRk.jpg?s=128&g=1", "display_name": "testname123", "link": "https://stackoverflow.com/users/3033594/testname123"}, "edited": false, "score": 0, "creation_date": 1470318225, "post_id": 38753491, "comment_id": 64909304, "body": "This produces an error:  <code>TypeError: a bytes-like object is required, not &#39;str&#39;</code>....This is strange because <code>type(data)</code> returns <code>bytes</code>, not <code>str</code>."}, {"owner": {"reputation": 1516, "user_id": 2768172, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c0aa1896ab14d2afa69d0e13d1bcad2b?s=128&d=identicon&r=PG&f=1", "display_name": "pathoren", "link": "https://stackoverflow.com/users/2768172/pathoren"}, "reply_to_user": {"reputation": 981, "user_id": 3033594, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/qgRRk.jpg?s=128&g=1", "display_name": "testname123", "link": "https://stackoverflow.com/users/3033594/testname123"}, "edited": false, "score": 0, "creation_date": 1470333897, "post_id": 38753491, "comment_id": 64920316, "body": "It works flawlessly for me in iPython, so Im afraid I cannot reproduce your problem.  What python version are you using?"}, {"owner": {"reputation": 981, "user_id": 3033594, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/qgRRk.jpg?s=128&g=1", "display_name": "testname123", "link": "https://stackoverflow.com/users/3033594/testname123"}, "edited": false, "score": 0, "creation_date": 1470335410, "post_id": 38753491, "comment_id": 64921166, "body": "3.0...I resorted to converting it to a string and then stuffing that into a numpy array...The rest of the code works as described, thank you."}], "tags": [], "owner": {"reputation": 1516, "user_id": 2768172, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c0aa1896ab14d2afa69d0e13d1bcad2b?s=128&d=identicon&r=PG&f=1", "display_name": "pathoren", "link": "https://stackoverflow.com/users/2768172/pathoren"}, "is_accepted": true, "score": 4, "last_activity_date": 1470257828, "creation_date": 1470257828, "answer_id": 38753491, "question_id": 38753205, "link": "https://stackoverflow.com/questions/38753205/how-to-plot-a-list-of-byte-data-with-matplotlib/38753491#38753491", "title": "how to plot a list of byte data with matplotlib", "body": "<p>First convert your data to numbers with for example:</p>\n\n<pre><code>data = b'3.00000000E+007,-5.26880000E+001,+3.09700000E+007,-5.75940000E+001'\nnumbers = map(float, data.split(','))\n</code></pre>\n\n<p>Now slice the array to get x and y-data seperately and plot it with matplotlib</p>\n\n<pre><code>x = numbers[::2]\ny = numbers[1::2]\n\nimport matplotlib.pyplot as plt\nplt.plot(x, y)\nplt.show()\n</code></pre>\n"}], "owner": {"reputation": 981, "user_id": 3033594, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/qgRRk.jpg?s=128&g=1", "display_name": "testname123", "link": "https://stackoverflow.com/users/3033594/testname123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2765, "favorite_count": 0, "accepted_answer_id": 38753491, "answer_count": 2, "score": 1, "last_activity_date": 1586869114, "creation_date": 1470256786, "question_id": 38753205, "link": "https://stackoverflow.com/questions/38753205/how-to-plot-a-list-of-byte-data-with-matplotlib", "title": "how to plot a list of byte data with matplotlib", "body": "<p>I've got a bunch of data that I read in from a telnet machine...It's x, y data, but it's just comma separated like <code>x1,y1,x2,y2,x3,y3,...</code></p>\n\n<p>Here's a sample:</p>\n\n<pre><code>In[28] data[1:500]\nOut[28]  b'3.00000000E+007,-5.26880000E+001,+3.09700000E+007,-5.75940000E+001,+3.19400000E+007,-5.56250000E+001,+3.29100000E+007,-5.69380000E+001,+3.38800000E+007,-5.40630000E+001,+3.48500000E+007,-5.36560000E+001,+3.58200000E+007,-5.67190000E+001,+3.67900000E+007,-5.51720000E+001,+3.77600000E+007,-5.99840000E+001,+3.87300000E+007,-5.58910000E+001,+3.97000000E+007,-5.35160000E+001,+4.06700000E+007,-5.48130000E+001,+4.16400000E+007,-5.52810000E+001,+4.26100000E+007,-5.64690000E+001,+4.35800000E+007,-5.3938'\n</code></pre>\n\n<p>I want to plot this as a line graph with matplot lib.  I've tried the <code>struct</code> package for converting this into a list of doubles instead of bytes, but I ran into so many problems with that...Then there's the issue of what to do with the scientific notation...I want to obviously perserve the magnitude that it's trying to convey, but I can't just do that by naively swapping the byte encodings to what they would mean with a double encoding.</p>\n\n<p>I'm trying all sorts of things that I would normally try with C, but I can't help but think there's a better way with Python!</p>\n\n<p>I think I need to get the <code>x's</code> and <code>y's</code> into a numpy array and do so without losing any of the exponential notation...</p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1470258662, "post_id": 38753198, "comment_id": 64881187, "body": "Use <code>numpy.isnan</code> to test the first element of of each row.  Combine that with <code>numpy.where</code> to return the rows you want."}], "answers": [{"tags": [], "owner": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "is_accepted": true, "score": 2, "last_activity_date": 1470259419, "creation_date": 1470259419, "answer_id": 38753885, "question_id": 38753198, "link": "https://stackoverflow.com/questions/38753198/how-can-i-remove-rows-from-a-numpy-array-that-have-nan-as-the-first-element/38753885#38753885", "title": "How can I remove rows from a numpy array that have NaN as the first element?", "body": "<p>If x is the original array, the following puts the valid rows into y:</p>\n\n<pre><code>y = x[~np.isnan(x[:, 0])]\n</code></pre>\n"}], "owner": {"reputation": 349, "user_id": 795221, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mdYy3.jpg?s=128&g=1", "display_name": "imichaeldotorg", "link": "https://stackoverflow.com/users/795221/imichaeldotorg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 833, "favorite_count": 0, "accepted_answer_id": 38753885, "answer_count": 1, "score": 0, "last_activity_date": 1470259419, "creation_date": 1470256749, "question_id": 38753198, "link": "https://stackoverflow.com/questions/38753198/how-can-i-remove-rows-from-a-numpy-array-that-have-nan-as-the-first-element", "title": "How can I remove rows from a numpy array that have NaN as the first element?", "body": "<p>I have a numpy array that looks like this:</p>\n\n<pre><code> [[nan 0 0 ..., 0.0 0.053526738 0.068421053]\n [nan 0 0 ..., 0.0 0.059653990999999996 0.068421053]\n [nan 0 0 ..., 1.0 0.912542592 0.068421053]\n ..., \n [1 0 0 ..., 0.0 0.126523399 0.193548387]\n [nan 0 0 ..., 0.0 0.034388807 0.068421053]\n [4 0 0 ..., 0.0 0.02250561 0.068421053]]\n</code></pre>\n\n<p>How do I remove all rows from the array where nan is the first element?</p>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 14231, "user_id": 1218980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75c6b54df38abce7b1c35f499a1d4a67?s=128&d=identicon&r=PG", "display_name": "Emile Bergeron", "link": "https://stackoverflow.com/users/1218980/emile-bergeron"}, "edited": false, "score": 0, "creation_date": 1470256905, "post_id": 38753183, "comment_id": 64880346, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/7296159/django-session-database-table-cleanup\">Django: session database table cleanup</a>"}, {"owner": {"reputation": 36561, "user_id": 2395796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8786484468219bcf403bbdce5eb37c8d?s=128&d=identicon&r=PG", "display_name": "Kevin Christopher Henry", "link": "https://stackoverflow.com/users/2395796/kevin-christopher-henry"}, "edited": false, "score": 4, "creation_date": 1470261200, "post_id": 38753183, "comment_id": 64882372, "body": "No, <code>clearsessions</code> only clears expired sessions."}, {"owner": {"reputation": 47988, "user_id": 267540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2v58W.jpg?s=128&g=1", "display_name": "e4c5", "link": "https://stackoverflow.com/users/267540/e4c5"}, "edited": false, "score": 0, "creation_date": 1470268746, "post_id": 38753183, "comment_id": 64884597, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/30864711/delete-session-key-from-all-users\">Delete session key from all users</a>"}], "answers": [{"comments": [{"owner": {"reputation": 682, "user_id": 5256798, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/ee0d6c875e27c27b77195923b0fcbc29?s=128&d=identicon&r=PG&f=1", "display_name": "sachsure", "link": "https://stackoverflow.com/users/5256798/sachsure"}, "edited": false, "score": 0, "creation_date": 1470257577, "post_id": 38753254, "comment_id": 64880698, "body": "this is okay!..but doing this will log out all logged in users..right?"}, {"owner": {"reputation": 14231, "user_id": 1218980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75c6b54df38abce7b1c35f499a1d4a67?s=128&d=identicon&r=PG", "display_name": "Emile Bergeron", "link": "https://stackoverflow.com/users/1218980/emile-bergeron"}, "reply_to_user": {"reputation": 682, "user_id": 5256798, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/ee0d6c875e27c27b77195923b0fcbc29?s=128&d=identicon&r=PG&f=1", "display_name": "sachsure", "link": "https://stackoverflow.com/users/5256798/sachsure"}, "edited": false, "score": 0, "creation_date": 1470270070, "post_id": 38753254, "comment_id": 64884933, "body": "@sachsure I updated the answer with more info from the doc."}, {"owner": {"reputation": 384, "user_id": 4414938, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/613780639/picture?type=large", "display_name": "Adrian Chrostowski", "link": "https://stackoverflow.com/users/4414938/adrian-chrostowski"}, "edited": false, "score": 0, "creation_date": 1528274451, "post_id": 38753254, "comment_id": 88440327, "body": "@EmileBergeron, do you know if the clearsessions command can possibly return any result, so the log of the cron job has actually any trace of the partivular run?"}, {"owner": {"reputation": 14231, "user_id": 1218980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75c6b54df38abce7b1c35f499a1d4a67?s=128&d=identicon&r=PG", "display_name": "Emile Bergeron", "link": "https://stackoverflow.com/users/1218980/emile-bergeron"}, "reply_to_user": {"reputation": 384, "user_id": 4414938, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/613780639/picture?type=large", "display_name": "Adrian Chrostowski", "link": "https://stackoverflow.com/users/4414938/adrian-chrostowski"}, "edited": false, "score": 0, "creation_date": 1528294276, "post_id": 38753254, "comment_id": 88453461, "body": "@AdrianChrostowski not sure since I can&#39;t test it right now, but I think django commands will return an error code if they fail."}, {"owner": {"reputation": 5382, "user_id": 1939376, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2ffa22b59cff0924c83b5d8835fa9abf?s=128&d=identicon&r=PG&f=1", "display_name": "jobima", "link": "https://stackoverflow.com/users/1939376/jobima"}, "edited": false, "score": 0, "creation_date": 1535372191, "post_id": 38753254, "comment_id": 91028572, "body": "Why is that SLOW?. Since it boiles down to simple SQL, why is that slow?"}, {"owner": {"reputation": 14231, "user_id": 1218980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75c6b54df38abce7b1c35f499a1d4a67?s=128&d=identicon&r=PG", "display_name": "Emile Bergeron", "link": "https://stackoverflow.com/users/1218980/emile-bergeron"}, "reply_to_user": {"reputation": 5382, "user_id": 1939376, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2ffa22b59cff0924c83b5d8835fa9abf?s=128&d=identicon&r=PG&f=1", "display_name": "jobima", "link": "https://stackoverflow.com/users/1939376/jobima"}, "edited": false, "score": 0, "creation_date": 1535387839, "post_id": 38753254, "comment_id": 91037979, "body": "@jobima What do you mean? Running the command on your project is slow for you right now?"}, {"owner": {"reputation": 5382, "user_id": 1939376, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2ffa22b59cff0924c83b5d8835fa9abf?s=128&d=identicon&r=PG&f=1", "display_name": "jobima", "link": "https://stackoverflow.com/users/1939376/jobima"}, "edited": false, "score": 0, "creation_date": 1535546701, "post_id": 38753254, "comment_id": 91105313, "body": "@EmileBergeron exactly. It takes a few minutes. Isn&#39;t it wierd? I want to use it on production site but I am worried it somehow blocks the other SQL petitions from the web."}, {"owner": {"reputation": 14231, "user_id": 1218980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75c6b54df38abce7b1c35f499a1d4a67?s=128&d=identicon&r=PG", "display_name": "Emile Bergeron", "link": "https://stackoverflow.com/users/1218980/emile-bergeron"}, "reply_to_user": {"reputation": 5382, "user_id": 1939376, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2ffa22b59cff0924c83b5d8835fa9abf?s=128&d=identicon&r=PG&f=1", "display_name": "jobima", "link": "https://stackoverflow.com/users/1939376/jobima"}, "edited": false, "score": 0, "creation_date": 1535552614, "post_id": 38753254, "comment_id": 91109557, "body": "@jobima it depends on the size of the database (lots of expired sessions?) and the spec of the server it runs on. That&#39;s why it&#39;s best to be clear sessions as a nightly cron job."}], "tags": [], "owner": {"reputation": 14231, "user_id": 1218980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75c6b54df38abce7b1c35f499a1d4a67?s=128&d=identicon&r=PG", "display_name": "Emile Bergeron", "link": "https://stackoverflow.com/users/1218980/emile-bergeron"}, "is_accepted": true, "score": 15, "last_activity_date": 1559741326, "last_edit_date": 1559741326, "creation_date": 1470256970, "answer_id": 38753254, "question_id": 38753183, "link": "https://stackoverflow.com/questions/38753183/clearing-sessions-in-django-session-table-without-logging-out-current-users/38753254#38753254", "title": "Clearing sessions in django_session table without logging out current users", "body": "<p>The Django <a href=\"https://docs.djangoproject.com/en/2.2/topics/http/sessions/#clearing-the-session-store\" rel=\"noreferrer\">documentation</a> states (emphasis from me):</p>\n\n<blockquote>\n  <h1>Clearing the session store</h1>\n  \n  <p>As users create new sessions on your website, session data can\n  accumulate in your session store. If you\u2019re using the database\n  backend, the <code>django_session</code> database table will grow. If you\u2019re using\n  the file backend, your temporary directory will contain an increasing\n  number of files.</p>\n  \n  <p>To understand this problem, consider what happens with the database\n  backend. When a user logs in, Django adds a row to the <code>django_session</code>\n  database table. Django updates this row each time the session data\n  changes. If the user logs out manually, Django deletes the row. But if\n  the user does not log out, the row never gets deleted. A similar\n  process happens with the file backend.</p>\n  \n  <p>Django does not provide automatic purging of expired sessions.\n  Therefore, <strong>it\u2019s your job to purge expired sessions</strong> on a regular basis.\n  Django provides a clean-up management command for this purpose:\n  <code>clearsessions</code>. It\u2019s recommended to call this command on a regular\n  basis, for example as <strong>a daily cron job</strong>.</p>\n  \n  <p>Note that the cache backend isn\u2019t vulnerable to this problem, because\n  caches automatically delete stale data. Neither is the cookie backend,\n  because the session data is stored by the users\u2019 browsers.</p>\n</blockquote>\n\n<p>Found this link in <a href=\"https://stackoverflow.com/a/7296233/1218980\">Abid A's answer</a>.</p>\n\n<h1>The <a href=\"https://docs.djangoproject.com/en/2.2/ref/django-admin/#django-contrib-sessions\" rel=\"noreferrer\"><code>clearsessions</code></a> command</h1>\n\n<blockquote>\n  <p>Can be run as a cron job or directly to clean out expired sessions.</p>\n</blockquote>\n\n<p>So it won't log off every user.</p>\n\n<p>As mentioned by  Kevin Christopher Henry in a <a href=\"https://stackoverflow.com/questions/38753183/django-clearing-sessions-in-django-session-table/38753254?noredirect=1#comment64882372_38753183\">comment</a> and in the other <a href=\"https://stackoverflow.com/a/37221549/1218980\">possible duplicate</a> of your question <a href=\"https://stackoverflow.com/questions/38753183/django-clearing-sessions-in-django-session-table/38753254?noredirect=1#comment64884597_38753183\">flagged by e4c5</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 932, "user_id": 2516892, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/a78c2843e4352a71a47af54c43ecaae1?s=128&d=identicon&r=PG", "display_name": "Qohelet", "link": "https://stackoverflow.com/users/2516892/qohelet"}, "edited": false, "score": 0, "creation_date": 1574703253, "post_id": 46617034, "comment_id": 104317346, "body": "Getting a <code>&#39;WSGIRequest&#39; object has no attribute &#39;data&#39;</code> in line <code>session_key = request.data[&#39;sessionKey&#39;]</code>"}, {"owner": {"reputation": 14513, "user_id": 64911, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fdba1dde11dc7b4f62a912ad88379379?s=128&d=identicon&r=PG", "display_name": "mlissner", "link": "https://stackoverflow.com/users/64911/mlissner"}, "edited": false, "score": 0, "creation_date": 1606947266, "post_id": 46617034, "comment_id": 115121580, "body": "There&#39;s a logout() function for the fifth one above that does a bit more than your version (like sending signals)."}], "tags": [], "owner": {"reputation": 1517, "user_id": 2925052, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/KGZeH.jpg?s=128&g=1", "display_name": "Roshan Bagdiya", "link": "https://stackoverflow.com/users/2925052/roshan-bagdiya"}, "is_accepted": false, "score": 8, "last_activity_date": 1593524141, "last_edit_date": 1593524141, "creation_date": 1507354630, "answer_id": 46617034, "question_id": 38753183, "link": "https://stackoverflow.com/questions/38753183/clearing-sessions-in-django-session-table-without-logging-out-current-users/46617034#46617034", "title": "Clearing sessions in django_session table without logging out current users", "body": "<ol>\n<li><p>Django 1.6 or Above</p>\n<p><code>python manage.py clearsessions</code></p>\n</li>\n<li><p>Django 1.5 or lower</p>\n<p><code>python manage.py cleanup</code></p>\n</li>\n<li><p>From Django Shell</p>\n<pre class=\"lang-py prettyprint-override\"><code>from django.contrib.sessions.models import Session\nSession.objects.all().delete()\n</code></pre>\n</li>\n<li><p>django-session-cleanup\n<a href=\"https://github.com/sandersnewmedia/django-session-cleanup/tree/master/session_cleanup\" rel=\"nofollow noreferrer\"><strong>cronJob</strong></a></p>\n</li>\n<li><p>clearing session in logout( based on session key present in request)</p>\n</li>\n</ol>\n<pre class=\"lang-py prettyprint-override\"><code>from django.contrib.sessions.models import Session  \nsession_key = request.data['sessionKey']\nsession = Session.objects.get(session_key=session_key)\nSession.objects.filter(session_key=session).delete()\nSession.objects.all().delete()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 629, "user_id": 3325322, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JcNTR.jpg?s=128&g=1", "display_name": "guival", "link": "https://stackoverflow.com/users/3325322/guival"}, "edited": false, "score": 1, "creation_date": 1580724437, "post_id": 56229512, "comment_id": 106177910, "body": "Could you specify which are &quot;the newer versions&quot;?"}, {"owner": {"reputation": 14231, "user_id": 1218980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75c6b54df38abce7b1c35f499a1d4a67?s=128&d=identicon&r=PG", "display_name": "Emile Bergeron", "link": "https://stackoverflow.com/users/1218980/emile-bergeron"}, "edited": false, "score": 0, "creation_date": 1590161994, "post_id": 56229512, "comment_id": 109584810, "body": "This just clears the data in the current session dictionary, it doesn&#39;t answer the question at all. And it was already available a long time ago (since 1.8 at least), so it&#39;s not even new."}], "tags": [], "owner": {"reputation": 7, "user_id": 11210770, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-NoCINNydNdU/AAAAAAAAAAI/AAAAAAAAAAc/9P3-4E1XGyI/photo.jpg?sz=128", "display_name": "Andrew Skinner", "link": "https://stackoverflow.com/users/11210770/andrew-skinner"}, "is_accepted": false, "score": -1, "last_activity_date": 1593523657, "last_edit_date": 1593523657, "creation_date": 1558396746, "answer_id": 56229512, "question_id": 38753183, "link": "https://stackoverflow.com/questions/38753183/clearing-sessions-in-django-session-table-without-logging-out-current-users/56229512#56229512", "title": "Clearing sessions in django_session table without logging out current users", "body": "<p>The newer versions of Django allow:</p>\n<pre class=\"lang-py prettyprint-override\"><code>request.session.clear()\n</code></pre>\n"}], "owner": {"reputation": 682, "user_id": 5256798, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/ee0d6c875e27c27b77195923b0fcbc29?s=128&d=identicon&r=PG&f=1", "display_name": "sachsure", "link": "https://stackoverflow.com/users/5256798/sachsure"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 14334, "favorite_count": 4, "accepted_answer_id": 38753254, "answer_count": 3, "score": 11, "last_activity_date": 1593524141, "creation_date": 1470256674, "last_edit_date": 1590161986, "question_id": 38753183, "link": "https://stackoverflow.com/questions/38753183/clearing-sessions-in-django-session-table-without-logging-out-current-users", "title": "Clearing sessions in django_session table without logging out current users", "body": "<p>I am working on sessions in Django.</p>\n\n<p>By default, django stores sessions in <code>django_session</code>, I found out there is no way to purge sessions.</p>\n\n<p>Though <code>clearsessions</code> can be used to delete rows. It is also recommended to run this as a cron job. But doing this means logging out all logged-in users, right? </p>\n\n<p>Is this the right way to do it?</p>\n"}, {"tags": ["python", "selenium", "selenium-webdriver", "google-chrome-extension", "selenium-chromedriver"], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 6249824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49536fb8f5518326819c2df82a557aa9?s=128&d=identicon&r=PG&f=1", "display_name": "beeeliu", "link": "https://stackoverflow.com/users/6249824/beeeliu"}, "edited": false, "score": 1, "creation_date": 1470268584, "post_id": 38753490, "comment_id": 64884558, "body": "The problem is, the compiler doesn&#39;t even get past the second line."}], "tags": [], "owner": {"reputation": 2965, "user_id": 2058844, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/12ysy.jpg?s=128&g=1", "display_name": "Paras", "link": "https://stackoverflow.com/users/2058844/paras"}, "is_accepted": false, "score": 4, "last_activity_date": 1470257824, "creation_date": 1470257824, "answer_id": 38753490, "question_id": 38753173, "link": "https://stackoverflow.com/questions/38753173/selenium-webdriver-importing-options-giving-me-an-importerror/38753490#38753490", "title": "selenium webdriver importing Options giving me an ImportError", "body": "<p>Seems like there is an issue with below statement:-</p>\n\n<pre><code>chop = webdriver.ChromeOptions()\n</code></pre>\n\n<p>Try:-</p>\n\n<pre><code>from selenium import webdriver\nfrom selenium.webdriver.chrome.options import Options\nchop = Options()\nchop.add_extension('Adblock-Plus_v1.4.1.crx')\ndriver = webdriver.Chrome(chrome_options=chop)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 51, "user_id": 6249824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49536fb8f5518326819c2df82a557aa9?s=128&d=identicon&r=PG&f=1", "display_name": "beeeliu", "link": "https://stackoverflow.com/users/6249824/beeeliu"}, "is_accepted": false, "score": 1, "last_activity_date": 1470271650, "creation_date": 1470271650, "answer_id": 38755825, "question_id": 38753173, "link": "https://stackoverflow.com/questions/38753173/selenium-webdriver-importing-options-giving-me-an-importerror/38755825#38755825", "title": "selenium webdriver importing Options giving me an ImportError", "body": "<p>I fixed the problem, there was no options.py in the selenium2.7 version for some unusual reason.</p>\n\n<p>All I did was update using terminal for mac osx, but you can't just update it, you have to delete all the pre existing paths first. So go find where your selenium is installed using</p>\n\n<pre><code>import sys\nprint sys.path\n</code></pre>\n\n<p>Find your selenium path, cd into the path using terminal and delete every folder or file with selenium attached to it.</p>\n\n<p>In your terminal, type</p>\n\n<pre><code>sudo easy_install selenium\n</code></pre>\n\n<p>The problem I had where this problem didn't go away was I called sudo easy_install without deleting the folder. For some reason, the hickup was gone after I deleted everything and did a fresh install.</p>\n"}, {"tags": [], "owner": {"reputation": 385, "user_id": 7466782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d675fc11ff49deae7279d0b64af8dfd6?s=128&d=identicon&r=PG", "display_name": "Madhusudan chowdary", "link": "https://stackoverflow.com/users/7466782/madhusudan-chowdary"}, "is_accepted": false, "score": 0, "last_activity_date": 1561109508, "creation_date": 1561109508, "answer_id": 56700656, "question_id": 38753173, "link": "https://stackoverflow.com/questions/38753173/selenium-webdriver-importing-options-giving-me-an-importerror/56700656#56700656", "title": "selenium webdriver importing Options giving me an ImportError", "body": "<p>Most probably you may have installed different version\nselenium 2.X do not have the options module.\nYour code works fine with selenium 3.x</p>\n\n<p>Try installing <code>pip install selenium</code> in virtual environment and run you code</p>\n"}], "owner": {"reputation": 51, "user_id": 6249824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49536fb8f5518326819c2df82a557aa9?s=128&d=identicon&r=PG&f=1", "display_name": "beeeliu", "link": "https://stackoverflow.com/users/6249824/beeeliu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6253, "favorite_count": 0, "answer_count": 3, "score": 4, "last_activity_date": 1561109508, "creation_date": 1470256614, "last_edit_date": 1495542156, "question_id": 38753173, "link": "https://stackoverflow.com/questions/38753173/selenium-webdriver-importing-options-giving-me-an-importerror", "title": "selenium webdriver importing Options giving me an ImportError", "body": "<p>Link to the original code I'm trying to implement into my code.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/16800689/running-selenium-webdriver-using-python-with-extensions-crx-files\">Running Selenium WebDriver using Python with extensions (.crx files)</a></p>\n\n<pre><code>from selenium import webdriver\nfrom selenium.webdriver.chrome.options import Options\n\nchop = webdriver.ChromeOptions()\nchop.add_extension('Adblock-Plus_v1.4.1.crx')\ndriver = webdriver.Chrome(chrome_options = chop)\n</code></pre>\n\n<p>I tried incorporating the code, but the 2nd line,</p>\n\n<pre><code>from selenium.webdriver.chrome.options import Options\n</code></pre>\n\n<p>is tossing out an error</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"&lt;pyshell#6&gt;\", line 1, in &lt;module&gt;\n    from selenium.webdriver.chrome.options import Options\nImportError: No module named options\n</code></pre>\n\n<p>I updated selenium, updated chromedriver, and this problem doesn't go away. I checked stackoverflow and nothing seems to be related to my problem where the module is found.</p>\n"}, {"tags": ["python", "beautifulsoup", "bs4"], "comments": [{"owner": {"reputation": 528, "user_id": 5153946, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J4cXX.jpg?s=128&g=1", "display_name": "George Bou", "link": "https://stackoverflow.com/users/5153946/george-bou"}, "edited": false, "score": 0, "creation_date": 1470256828, "post_id": 38753155, "comment_id": 64880295, "body": "Try changing this: <code>soup = BeautifulSoup(prodpage.text, &quot;html.parser&quot;)</code>, it&#39;s not an answer to your question but newer python 3 versions ask for it"}], "answers": [{"comments": [{"owner": {"reputation": 88, "user_id": 6669476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oEfDd.jpg?s=128&g=1", "display_name": "ChE", "link": "https://stackoverflow.com/users/6669476/che"}, "reply_to_user": {"reputation": 15, "user_id": 5722154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ef991edde2b507b768603c93902fe56?s=128&d=identicon&r=PG&f=1", "display_name": "Tperry", "link": "https://stackoverflow.com/users/5722154/tperry"}, "edited": false, "score": 0, "creation_date": 1470890190, "post_id": 38753299, "comment_id": 65135215, "body": "Hi TPerry  Nice to hear that, so can you please mark it as solved! Thanks!"}], "tags": [], "owner": {"reputation": 88, "user_id": 6669476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oEfDd.jpg?s=128&g=1", "display_name": "ChE", "link": "https://stackoverflow.com/users/6669476/che"}, "is_accepted": false, "score": 0, "last_activity_date": 1470257144, "creation_date": 1470257144, "answer_id": 38753299, "question_id": 38753155, "link": "https://stackoverflow.com/questions/38753155/how-to-search-for-text-in-beautiful-soup/38753299#38753299", "title": "How to search for text in Beautiful Soup", "body": "<p>I think BeautifulSoup is not the optimal way to go. It looks more like json-formated data. BeautifulSoup is mainly a parser for HTML/XML.\nSo my suggestion is to go for</p>\n\n<pre><code>import requests\nimport json\n\nprodpage=requests.get('http://www.adidas.com/on/demandware.store/Sites-adidas-US-Site/en_US/Product-GetVariants?pid=S32145', headers={'User-Agent': 'Mozilla/5.0'} )\ndata = json.loads(prodpage.text)\n</code></pre>\n\n<p>and then looking for ATS in the dict structure i.e.</p>\n\n<pre><code>for variant in data['variations']['variants']:\n   print(variant['ATS'])\n</code></pre>\n\n<p>This returns for me</p>\n\n<pre><code>0\n0\n12.0\n0\n8.0\n0\n7.0\n0.0\n6.0\n0.0\n17.0\n12.0\n18.0\n2.0\n9.0\n3.0\n7.0\n0\n7.0\n0\n5.0\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 5722154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ef991edde2b507b768603c93902fe56?s=128&d=identicon&r=PG&f=1", "display_name": "Tperry", "link": "https://stackoverflow.com/users/5722154/tperry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 296, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1470257859, "creation_date": 1470256535, "last_edit_date": 1470257859, "question_id": 38753155, "link": "https://stackoverflow.com/questions/38753155/how-to-search-for-text-in-beautiful-soup", "title": "How to search for text in Beautiful Soup", "body": "<p>Im trying to create a script that checks the stock of items on a website, im trying to locate every line that has \"ATS\" in it including the number after the colon. I then want to print all the values of \"ATS\" (one value for each size) Here is the script that I have so far:</p>\n\n<pre><code>import requests\nfrom bs4 import BeautifulSoup\n\nprodpage=requests.get('http://www.adidas.com/on/demandware.store/Sites-adidas-US-Site/en_US/Product-GetVariants?pid=S32145', headers={'User-Agent': 'Mozilla/5.0'} )\n\nsoup = BeautifulSoup(prodpage.text)\n\nprint (soup)\n</code></pre>\n\n<p><strong>which returns this:</strong></p>\n\n<pre><code>{\"id\": \"S32145_590\", \"attributes\": {\n\"size\":\"7\"\n},\n\"articleNo\": \"S32145\",\n\"onlineFrom\": 1.4667516E12,\n\"customBadges\": \"~\",\n\"pricing\": {\"standard\": \"140.0\", \"sale\": \"140.0\", \"isPromoPrice\": false, \"quantities\": [\n{\"unit\": \"PIECE\", \"value\": \"1.0\"}\n]}\n,\n\"avStatusQuantity\": 1.0,\n\"avStatus\": \"IN_STOCK\",\n\"inStock\": true,\n\"avLevels\": {\"IN_STOCK\": 1.0,\n\"PREORDER\": 0.0,\n\"BACKORDER\": 0.0,\n\"NOT_AVAILABLE\": 0.0,\n\"PREVIEW\": 0.0},\n\"ATS\": 7.0,\n\"inStockDate\": \"\"\n},\n</code></pre>\n"}, {"tags": ["python", "qt", "user-interface", "animation", "pyqt"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 3627191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b9a137648e851aa7b59b082ae5fbb20?s=128&d=identicon&r=PG&f=1", "display_name": "user3627191", "link": "https://stackoverflow.com/users/3627191/user3627191"}, "edited": false, "score": 0, "creation_date": 1470327853, "post_id": 38765868, "comment_id": 64916843, "body": "Thanks! that  documentation was exactly what I saw earlier to prompt this question. Issue is as it says, both methods erase then redraw the whole widget, but I really don&#39;t need that as only a small component of all my objects need to change. In Tkinter, for example (which is what im migrating my GUI from), I can create a canvas but just use a self.object.move() method to move only what I need animated. Thanks again!"}, {"owner": {"reputation": 9987, "user_id": 3809375, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/EA10l.png?s=128&g=1", "display_name": "BPL", "link": "https://stackoverflow.com/users/3809375/bpl"}, "reply_to_user": {"reputation": 3, "user_id": 3627191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b9a137648e851aa7b59b082ae5fbb20?s=128&d=identicon&r=PG&f=1", "display_name": "user3627191", "link": "https://stackoverflow.com/users/3627191/user3627191"}, "edited": false, "score": 0, "creation_date": 1470338950, "post_id": 38765868, "comment_id": 64923165, "body": "@user3627191 You&#39;re welcome, but you haven&#39;t marked the answer as accepted, anything else is still unclear to you?"}, {"owner": {"reputation": 3, "user_id": 3627191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b9a137648e851aa7b59b082ae5fbb20?s=128&d=identicon&r=PG&f=1", "display_name": "user3627191", "link": "https://stackoverflow.com/users/3627191/user3627191"}, "edited": false, "score": 0, "creation_date": 1470341716, "post_id": 38765868, "comment_id": 64924713, "body": "my bad - upvoted but didn&#39;t realize I needed to click the checkmark as well :)"}], "tags": [], "owner": {"reputation": 9987, "user_id": 3809375, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/EA10l.png?s=128&g=1", "display_name": "BPL", "link": "https://stackoverflow.com/users/3809375/bpl"}, "is_accepted": true, "score": 0, "last_activity_date": 1470309401, "creation_date": 1470309401, "answer_id": 38765868, "question_id": 38753131, "link": "https://stackoverflow.com/questions/38753131/pyqt-animations-without-redrawing-everything/38765868#38765868", "title": "PyQt - Animations without redrawing everything?", "body": "<p>The Qt's documentation about QWidget repaint slot says:</p>\n\n<p><em>Repaints the widget directly by calling paintEvent() immediately, unless updates are disabled or the widget is hidden.\nWe suggest only using repaint() if you need an immediate repaint, for example during animation. In almost all circumstances update() is better, as it permits Qt to optimize for speed and minimize flicker.\nWarning: If you call repaint() in a function which may itself be called from paintEvent(), you may get infinite recursion. The update() function never causes recursion.</em></p>\n\n<p>That should give you an answer about when to use or not repaint or update slots.</p>\n\n<p>About making animations I'd suggest you also to take a look to the <a href=\"http://doc.qt.io/qt-4.8/animation-overview.html\" rel=\"nofollow\">Qt4's animation framework</a> or <a href=\"http://doc.qt.io/qt-5/animation-overview.html\" rel=\"nofollow\">Qt5's animation framework</a>, which is a really powerful way to animate widgets on Qt.</p>\n"}], "owner": {"reputation": 3, "user_id": 3627191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b9a137648e851aa7b59b082ae5fbb20?s=128&d=identicon&r=PG&f=1", "display_name": "user3627191", "link": "https://stackoverflow.com/users/3627191/user3627191"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2468, "favorite_count": 0, "accepted_answer_id": 38765868, "answer_count": 1, "score": 0, "last_activity_date": 1470309401, "creation_date": 1470256460, "last_edit_date": 1470256794, "question_id": 38753131, "link": "https://stackoverflow.com/questions/38753131/pyqt-animations-without-redrawing-everything", "title": "PyQt - Animations without redrawing everything?", "body": "<p>So I'm trying to learn animations in PyQt and throughout all the examples I can find online, they all seem to use the <code>self.update()</code> or <code>self.repaint()</code> methods to increment the animations. This means basically the code has to erase then redraw the entire widget for every frame, even though much of what I intend to animate is static.</p>\n\n<p>For example the code below, this generates a circular progress pie. The important bit is the <code>paint()</code> method under <code>ProgressMeter</code> (first class): for every frame in the animation this example paints the background, the actual progress pie, and the percentage indicator. </p>\n\n<p>If I change the code to something like:</p>\n\n<pre><code>if self.angle &gt; 120:\n    # do not draw background\n</code></pre>\n\n<p>then after 120 frames, the background does not get drawn anymore.</p>\n\n<p>This seems terribly inefficient because (logically) the background should only be drawn once, no? </p>\n\n<p>What would you recommend for animations like these?</p>\n\n<p>Addendum: I have lurked a lot on this site to steal examples and code, but haven't posted for a long time. Please let me know about proper etiquette etc if I am not following it properly.</p>\n\n<pre><code>import sys\nfrom PyQt4 import QtGui, QtCore\n\n\nclass ProgressMeter(QtGui.QGraphicsItem):\n    def __init__(self, parent):\n        super(ProgressMeter, self).__init__()\n\n        self.parent = parent\n\n        self.angle = 0\n        self.per = 0\n\n    def boundingRect(self):\n\n        return QtCore.QRectF(0, 0, self.parent.width(),\n                             self.parent.height())\n\n    def increment(self):\n\n        self.angle += 1\n        self.per = int(self.angle / 3.6)\n\n        if self.angle &gt; 360:\n            return False\n        else:\n            return True\n\n    def paint(self, painter, option, widget):\n\n        self.drawBackground(painter, widget)\n        self.drawMeter(painter, widget)\n        self.drawText(painter)\n\n    def drawBackground(self, painter, widget):\n\n        painter.setRenderHint(QtGui.QPainter.Antialiasing)\n        painter.setPen(QtCore.Qt.NoPen)\n\n        p1 = QtCore.QPointF(80, 80)\n        g = QtGui.QRadialGradient(p1 * 0.2, 80 * 1.1)\n\n        g.setColorAt(0.0, widget.palette().light().color())\n        g.setColorAt(1.0, widget.palette().dark().color())\n        painter.setBrush(g)\n        painter.drawEllipse(0, 0, 80, 80)\n\n        p2 = QtCore.QPointF(40, 40)\n        g = QtGui.QRadialGradient(p2, 70 * 1.3)\n\n        g.setColorAt(0.0, widget.palette().midlight().color())\n        g.setColorAt(1.0, widget.palette().dark().color())\n        painter.setBrush(g)\n        painter.drawEllipse(7.5, 7.5, 65, 65)\n\n    def drawMeter(self, painter, widget):\n\n        painter.setPen(QtCore.Qt.NoPen)\n        painter.setBrush(widget.palette().highlight().color())\n        painter.drawPie(7.5, 7.5, 65, 65, 0, -self.angle * 16)\n\n    def drawText(self, painter):\n\n        text = \"%d%%\" % self.per\n\n        font = painter.font()\n        font.setPixelSize(11)\n        painter.setFont(font)\n        brush = QtGui.QBrush(QtGui.QColor(\"#000000\"))\n        pen = QtGui.QPen(brush, 1)\n        painter.setPen(pen)\n        # size = painter.fontMetrics().size(QtCore.Qt.TextSingleLine, text)\n        painter.drawText(0, 0, 80, 80,\n                         QtCore.Qt.AlignCenter, text)\n\n\nclass MyView(QtGui.QGraphicsView):\n    def __init__(self):\n        super(MyView, self).__init__()\n\n        self.initView()\n        self.setupScene()\n        self.setupAnimation()\n\n        self.setGeometry(300, 150, 250, 250)\n\n    def initView(self):\n        self.setWindowTitle(\"Progress meter\")\n        self.setRenderHint(QtGui.QPainter.Antialiasing)\n\n        policy = QtCore.Qt.ScrollBarAlwaysOff\n        self.setVerticalScrollBarPolicy(policy)\n        self.setHorizontalScrollBarPolicy(policy)\n\n        self.setBackgroundBrush(self.palette().window())\n\n        self.pm = ProgressMeter(self)\n        self.pm.setPos(55, 55)\n\n    def setupScene(self):\n        self.scene = QtGui.QGraphicsScene(self)\n        self.scene.setSceneRect(0, 0, 250, 250)\n        self.scene.addItem(self.pm)\n\n        self.setScene(self.scene)\n\n    def setupAnimation(self):\n        self.timer = QtCore.QTimeLine()\n        self.timer.setLoopCount(0)\n        self.timer.setFrameRange(0, 100)\n\n        self.animation = QtGui.QGraphicsItemAnimation()\n        self.animation.setItem(self.pm)\n        self.animation.setTimeLine(self.timer)\n\n        self.timer.frameChanged[int].connect(self.doStep)\n        self.timer.start()\n\n    def doStep(self, i):\n        if not self.pm.increment():\n            self.timer.stop()\n\n        self.pm.update()\n\n\napp = QtGui.QApplication([])\nview = MyView()\nview.show()\nsys.exit(app.exec_())\n</code></pre>\n"}, {"tags": ["python", "pygtk"], "owner": {"reputation": 62902, "user_id": 90511, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/nmOPo.png?s=128&g=1", "display_name": "hugomg", "link": "https://stackoverflow.com/users/90511/hugomg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1470256454, "creation_date": 1470256454, "question_id": 38753130, "link": "https://stackoverflow.com/questions/38753130/in-pygtk-why-does-importing-the-gtk-module-change-my-locale-settings", "title": "In pygtk, why does importing the gtk module change my locale settings?", "body": "<p>I was surprised to find out that in a Pygtk program, merely importing the gtk module will change the currently loaded locale. If I run the following test program I get two different results in the print statements:</p>\n\n<pre><code>import locale\nimport pygtk\n\nprint \"Locale before:\", locale.setlocale(locale.LC_ALL, None)\nimport gtk\nprint \"Locale after:\", locale.setlocale(locale.LC_ALL, None)\n</code></pre>\n\n<p>The output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Locale before: C\nLocale after: LC_CTYPE=pt_BR.UTF-8;LC_NUMERIC=en_US.utf8;LC_TIME=en_US.utf8;LC_COLLATE=en_US.utf8;LC_MONETARY=en_US.utf8;LC_MESSAGES=en_US.utf8;LC_PAPER=en_US.utf8;LC_NAME=en_US.utf8;LC_ADDRESS=en_US.utf8;LC_TELEPHONE=en_US.utf8;LC_MEASUREMENT=en_US.utf8;LC_IDENTIFICATION=en_US.utf8\n</code></pre>\n\n<p>After the <code>import gtk</code> line the locale is configured according to my <code>LC_xxx</code> environment variables, as if someone had called <code>locale.setlocale(locale.LC_ALL, \"\")</code>. Is this intentional behavior from pygtk or gtk? Is it documented somewhere?</p>\n\n<p>If I do not want to use the locale settings from the <code>LC_xxx</code> family of environment variables, where should I be calling <code>locale.setlocale</code>? I want to be sure that the locale I set in my program will not be overwritten by by one of the libraries that I am using.</p>\n"}, {"tags": ["python", "gradient", "numerical-methods"], "comments": [{"owner": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 0, "creation_date": 1470260969, "post_id": 38753066, "comment_id": 64882276, "body": "An alternative to the excellent theano mentioned by @Mehdi: <a href=\"https://github.com/HIPS/autograd\" rel=\"nofollow noreferrer\">autograd</a>."}], "answers": [{"comments": [{"owner": {"reputation": 221, "user_id": 2333803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b96e954d17fc586d79a83aea634708e1?s=128&d=identicon&r=PG", "display_name": "gastro", "link": "https://stackoverflow.com/users/2333803/gastro"}, "edited": false, "score": 1, "creation_date": 1470311226, "post_id": 38753582, "comment_id": 64904123, "body": "It looks very convenient! I guess the theano users would not be motived to write all the high-order differentiation themes."}], "tags": [], "owner": {"reputation": 640, "user_id": 5495024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f175c5d07f7522dd6caee95208f3eb7?s=128&d=identicon&r=PG&f=1", "display_name": "Mehdi", "link": "https://stackoverflow.com/users/5495024/mehdi"}, "is_accepted": false, "score": 2, "last_activity_date": 1470258175, "creation_date": 1470258175, "answer_id": 38753582, "question_id": 38753066, "link": "https://stackoverflow.com/questions/38753066/alternative-to-numpy-gradient/38753582#38753582", "title": "alternative to numpy.gradient", "body": "<p>I would suggest using the symbolic library called <em>Theano</em> (<a href=\"http://deeplearning.net/software/theano/\" rel=\"nofollow\">http://deeplearning.net/software/theano/</a>). It is primarily designed for neural networks and deep learning stuff, yet quite nicely fits what you want. </p>\n\n<p>After installing theano, here is a simple code for computing the gradient of a 1-d vector. You can extend it to 3-d yourself.</p>\n\n<pre><code>    import numpy as np\n    import theano\n    import theano.tensor as T\n\n    x = T.dvector('x')\n    J, updates = theano.scan(lambda i, x : (x[i+1] - x[i])/2, sequences=T.arange(x.shape[0] - 1), non_sequences=[x])\n    f = theano.function([x], J, updates=updates)\n\n    f(np.array([1, 2, 4, 7, 11, 16], dtype='float32'))\n    f(np.array([1, 2, 4, 7.12345, 11, 16], dtype='float32'))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 221, "user_id": 2333803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b96e954d17fc586d79a83aea634708e1?s=128&d=identicon&r=PG", "display_name": "gastro", "link": "https://stackoverflow.com/users/2333803/gastro"}, "is_accepted": false, "score": 3, "last_activity_date": 1470311440, "creation_date": 1470311440, "answer_id": 38766576, "question_id": 38753066, "link": "https://stackoverflow.com/questions/38753066/alternative-to-numpy-gradient/38766576#38766576", "title": "alternative to numpy.gradient", "body": "<p>Finally I found this: 4th order gradient. \nWish numpy would integrate this, too...</p>\n\n<p><a href=\"https://gist.github.com/deeplycloudy/1b9fa46d5290314d9be02a5156b48741\" rel=\"nofollow\">https://gist.github.com/deeplycloudy/1b9fa46d5290314d9be02a5156b48741</a></p>\n\n<pre><code>def gradientO4(f, *varargs):\n\"\"\"Calculate the fourth-order-accurate gradient of an N-dimensional scalar function.\nUses central differences on the interior and first differences on boundaries\nto give the same shape.\nInputs:\n  f -- An N-dimensional array giving samples of a scalar function\n  varargs -- 0, 1, or N scalars giving the sample distances in each direction\nOutputs:\n  N arrays of the same shape as f giving the derivative of f with respect\n   to each dimension.\n\"\"\"\nN = len(f.shape)  # number of dimensions\nn = len(varargs)\nif n == 0:\n    dx = [1.0]*N\nelif n == 1:\n    dx = [varargs[0]]*N\nelif n == N:\n    dx = list(varargs)\nelse:\n    raise SyntaxError, \"invalid number of arguments\"\n\n# use central differences on interior and first differences on endpoints\n\n#print dx\noutvals = []\n\n# create slice objects --- initially all are [:, :, ..., :]\nslice0 = [slice(None)]*N\nslice1 = [slice(None)]*N\nslice2 = [slice(None)]*N\nslice3 = [slice(None)]*N\nslice4 = [slice(None)]*N\n\notype = f.dtype.char\nif otype not in ['f', 'd', 'F', 'D']:\n    otype = 'd'\n\nfor axis in range(N):       \n    # select out appropriate parts for this dimension\n    out = np.zeros(f.shape, f.dtype.char)\n\n    slice0[axis] = slice(2, -2)\n    slice1[axis] = slice(None, -4)\n    slice2[axis] = slice(1, -3)\n    slice3[axis] = slice(3, -1)\n    slice4[axis] = slice(4, None)\n    # 1D equivalent -- out[2:-2] = (f[:4] - 8*f[1:-3] + 8*f[3:-1] - f[4:])/12.0\n    out[slice0] = (f[slice1] - 8.0*f[slice2] + 8.0*f[slice3] - f[slice4])/12.0\n\n    slice0[axis] = slice(None, 2)\n    slice1[axis] = slice(1, 3)\n    slice2[axis] = slice(None, 2)\n    # 1D equivalent -- out[0:2] = (f[1:3] - f[0:2])\n    out[slice0] = (f[slice1] - f[slice2])\n\n    slice0[axis] = slice(-2, None)\n    slice1[axis] = slice(-2, None)\n    slice2[axis] = slice(-3, -1)\n    ## 1D equivalent -- out[-2:] = (f[-2:] - f[-3:-1])\n    out[slice0] = (f[slice1] - f[slice2])\n\n\n    # divide by step size\n    outvals.append(out / dx[axis])\n\n    # reset the slice object in this dimension to \":\"\n    slice0[axis] = slice(None)\n    slice1[axis] = slice(None)\n    slice2[axis] = slice(None)\n    slice3[axis] = slice(None)\n    slice4[axis] = slice(None)\n\nif N == 1:\n    return outvals[0]\nelse:\n    return outvals\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 221, "user_id": 2333803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b96e954d17fc586d79a83aea634708e1?s=128&d=identicon&r=PG", "display_name": "gastro", "link": "https://stackoverflow.com/users/2333803/gastro"}, "is_accepted": false, "score": 0, "last_activity_date": 1617243213, "creation_date": 1617243213, "answer_id": 66897606, "question_id": 38753066, "link": "https://stackoverflow.com/questions/38753066/alternative-to-numpy-gradient/66897606#66897606", "title": "alternative to numpy.gradient", "body": "<p>I found this: FINDIFF -- A Python package for finite difference numerical derivatives and partial differential equations in any number of dimensions.</p>\n<p><a href=\"https://github.com/maroba/findiff\" rel=\"nofollow noreferrer\">https://github.com/maroba/findiff</a></p>\n<p>Cheers!</p>\n"}], "owner": {"reputation": 221, "user_id": 2333803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b96e954d17fc586d79a83aea634708e1?s=128&d=identicon&r=PG", "display_name": "gastro", "link": "https://stackoverflow.com/users/2333803/gastro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 990, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1617243213, "creation_date": 1470256206, "question_id": 38753066, "link": "https://stackoverflow.com/questions/38753066/alternative-to-numpy-gradient", "title": "alternative to numpy.gradient", "body": "<p>I have been struggling to find a robust function to compute gradient for a 3D array. numpy.gradient supports up to 2nd order accuracy. Is there any alternative way to compute the gradient with a better accuracy? thanks.</p>\n"}, {"tags": ["python", "datetime", "pandas", "conditional"], "answers": [{"tags": [], "owner": {"reputation": 1242, "user_id": 6657815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d9530b27299d0248df63719d13977f6?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav Dhama", "link": "https://stackoverflow.com/users/6657815/gaurav-dhama"}, "is_accepted": false, "score": 1, "last_activity_date": 1470257450, "creation_date": 1470257450, "answer_id": 38753381, "question_id": 38753047, "link": "https://stackoverflow.com/questions/38753047/pandas-date-conditional-calculation/38753381#38753381", "title": "Pandas Date Conditional Calculation", "body": "<p>Do it like this :</p>\n\n<pre><code>group_df['Age'] = group_df.apply(lambda row:defect_age(row), axis=1)\n</code></pre>\n\n<p>This is because you want to apply the function to each row not to the whole dataframe at once.</p>\n\n<p><code>df['Status'] == 'R'</code> will give a list of booleans if applied on a dataframe and u cant put a list of booleans in an if expression</p>\n"}, {"comments": [{"owner": {"reputation": 324, "user_id": 5839942, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/8f2086f1819843b4917461ef97170b31?s=128&d=identicon&r=PG&f=1", "display_name": "anshanno", "link": "https://stackoverflow.com/users/5839942/anshanno"}, "edited": false, "score": 0, "creation_date": 1470310206, "post_id": 38753438, "comment_id": 64903497, "body": "Fantastic!  Thanks.  Your answer is exactly what I was trying to figure out.  I&#39;ve got a bunch more statuses that I&#39;m gonna add now :)"}], "tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": true, "score": 2, "last_activity_date": 1470257653, "creation_date": 1470257653, "answer_id": 38753438, "question_id": 38753047, "link": "https://stackoverflow.com/questions/38753047/pandas-date-conditional-calculation/38753438#38753438", "title": "Pandas Date Conditional Calculation", "body": "<p>Try using this definition of <code>defect_age</code></p>\n\n<pre><code>def defect_age(df):\n    resolved = pd.to_datetime(df.resolved_on, errors='coerce')\n    submitted = pd.to_datetime(df.submitted_on)\n    r = (resolved - submitted) / np.timedelta64(1, 'D')\n    return np.where(df.Status == 'R', r, np.nan)\n</code></pre>\n\n<p>The error was coming from <code>if df['Status'] == 'R'</code></p>\n\n<p>This would have been a series of boolean values and not a single boolean value that <code>if</code> needs.  You still want to run this over the whole series at once.  I hope I've given you something that does the trick.</p>\n"}], "owner": {"reputation": 324, "user_id": 5839942, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/8f2086f1819843b4917461ef97170b31?s=128&d=identicon&r=PG&f=1", "display_name": "anshanno", "link": "https://stackoverflow.com/users/5839942/anshanno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 997, "favorite_count": 0, "accepted_answer_id": 38753438, "answer_count": 2, "score": 2, "last_activity_date": 1529993506, "creation_date": 1470256110, "last_edit_date": 1529993506, "question_id": 38753047, "link": "https://stackoverflow.com/questions/38753047/pandas-date-conditional-calculation", "title": "Pandas Date Conditional Calculation", "body": "<p>I am trying to create a column in Pandas based off of a conditional statement that calculates time between two events.  I was able to work out the day calculation but when plugged into my conditional statement:</p>\n\n<pre><code>def defect_age(df):\n    if df['Status'] == 'R':\n        return (pd.to_datetime(df['resolved_on'], errors='coerce') \n            - pd.to_datetime(df['submitted_on'])) / np.timedelta64(1, 'D')\n    else:\n        return 'null'\n</code></pre>\n\n<p>And then later called by the column:</p>\n\n<pre><code>group_df['Age'] = group_df.apply(defect_age(group_df), axis=0)\n</code></pre>\n\n<p>I am getting the following error:</p>\n\n<pre><code>ValueError: The truth value of a Series is ambiguous. Use a.empty, a.bool(), a.item(), a.any() or a.all().\n</code></pre>\n\n<p>I tried to base mine on the question asked <a href=\"https://stackoverflow.com/questions/27041724/using-conditional-to-generate-new-column-in-pandas-dataframe\">HERE</a>... But I am not having much success. Any help is appreciated!</p>\n"}, {"tags": ["python", "tkinter", "render"], "comments": [{"owner": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 0, "creation_date": 1470256415, "post_id": 38752923, "comment_id": 64880090, "body": "I&#39;ve changed the title of the question to reflect what you want fixed instead of what you think is required to fix it.  Mostly because I think it would be the other way around: I&#39;d think that rendering everything would make it really slow when first displaying it but make scrolling really fast (since it is done all the rendering already) but having to re-render every time it scrolls would slow it down."}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1470256703, "post_id": 38752923, "comment_id": 64880234, "body": "Some of the indentation is broken in your code."}, {"owner": {"reputation": 81, "user_id": 6673830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aacf9540027c67aae3dbb0c5092bd3d6?s=128&d=identicon&r=PG&f=1", "display_name": "T. Anserson", "link": "https://stackoverflow.com/users/6673830/t-anserson"}, "edited": false, "score": 0, "creation_date": 1470257180, "post_id": 38752923, "comment_id": 64880490, "body": "Thank you Tadhg, I am a very inexperienced programmer and probably don&#39;t realise what I really want. :)  Thanks Bryan, I think I have fixed the errors."}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1470257208, "post_id": 38752923, "comment_id": 64880504, "body": "When I run this code on a 10,000 line file (where is line is &lt; 100  characters long), the scrolling is extremely fast. Even with 100,000 lines, scrolling is just fine."}, {"owner": {"reputation": 81, "user_id": 6673830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aacf9540027c67aae3dbb0c5092bd3d6?s=128&d=identicon&r=PG&f=1", "display_name": "T. Anserson", "link": "https://stackoverflow.com/users/6673830/t-anserson"}, "edited": false, "score": 0, "creation_date": 1470257687, "post_id": 38752923, "comment_id": 64880741, "body": "Maybe it is just my computer then... Whilst holding down, it slows to maybe just 2 or 3 lines per second. :/"}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 1, "creation_date": 1470258727, "post_id": 38752923, "comment_id": 64881219, "body": "<i>&quot;whilst hold down, it slows to maybe just 2 or 3 lines per second&quot;</i> - with only the <i>exact</i> code you posted in the question?  Also, is each line in the file long? I get maybe 40-50 lines per second."}, {"owner": {"reputation": 81, "user_id": 6673830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aacf9540027c67aae3dbb0c5092bd3d6?s=128&d=identicon&r=PG&f=1", "display_name": "T. Anserson", "link": "https://stackoverflow.com/users/6673830/t-anserson"}, "edited": false, "score": 0, "creation_date": 1470259128, "post_id": 38752923, "comment_id": 64881392, "body": "Yes, I&#39;ve copied and pasted the above code to 100% confirm it is the same code and have tried with multiple input files to check if the behaviour is consistent depending on input; it is. The lines aren&#39;t long - maybe 20 characters max. I will attach an example data file in my original post, if that is any use."}, {"owner": {"reputation": 41280, "user_id": 344286, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/3827b2facd01ed6a64a96df00d4b877a?s=128&d=identicon&r=PG", "display_name": "Wayne Werner", "link": "https://stackoverflow.com/users/344286/wayne-werner"}, "edited": false, "score": 0, "creation_date": 1470259595, "post_id": 38752923, "comment_id": 64881621, "body": "How slow/old is your computer??? Mine isn&#39;t spectacular and I don&#39;t notice any kind of sluggishness when scrolling through this data."}, {"owner": {"reputation": 81, "user_id": 6673830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aacf9540027c67aae3dbb0c5092bd3d6?s=128&d=identicon&r=PG&f=1", "display_name": "T. Anserson", "link": "https://stackoverflow.com/users/6673830/t-anserson"}, "edited": false, "score": 0, "creation_date": 1470259877, "post_id": 38752923, "comment_id": 64881773, "body": "Not even 6 months old laptop - i5, 8GB RAM. Using Spyder python xy on win 10 if that could effect anything..."}, {"owner": {"reputation": 41280, "user_id": 344286, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/3827b2facd01ed6a64a96df00d4b877a?s=128&d=identicon&r=PG", "display_name": "Wayne Werner", "link": "https://stackoverflow.com/users/344286/wayne-werner"}, "edited": false, "score": 0, "creation_date": 1470259909, "post_id": 38752923, "comment_id": 64881793, "body": "That&#39;s at least on par with mine. How are you scrolling?"}, {"owner": {"reputation": 81, "user_id": 6673830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aacf9540027c67aae3dbb0c5092bd3d6?s=128&d=identicon&r=PG&f=1", "display_name": "T. Anserson", "link": "https://stackoverflow.com/users/6673830/t-anserson"}, "edited": false, "score": 0, "creation_date": 1470259950, "post_id": 38752923, "comment_id": 64881810, "body": "Scrolling by holding the down arrow key."}, {"owner": {"reputation": 41280, "user_id": 344286, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/3827b2facd01ed6a64a96df00d4b877a?s=128&d=identicon&r=PG", "display_name": "Wayne Werner", "link": "https://stackoverflow.com/users/344286/wayne-werner"}, "edited": false, "score": 1, "creation_date": 1470260580, "post_id": 38752923, "comment_id": 64882094, "body": "I suspect you have some OS setting that&#39;s limiting that - can you scroll faster with a mousewheel?"}, {"owner": {"reputation": 81, "user_id": 6673830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aacf9540027c67aae3dbb0c5092bd3d6?s=128&d=identicon&r=PG&f=1", "display_name": "T. Anserson", "link": "https://stackoverflow.com/users/6673830/t-anserson"}, "edited": false, "score": 0, "creation_date": 1470260817, "post_id": 38752923, "comment_id": 64882207, "body": "Hi Wayne, using a mousewheel to &#39;drag&#39; the output seems to move it very fast. When using the arrow keys, it starts off at a reasonable speed, but slows down  - which lead me to think it was some speed issue. However that may not be the case."}, {"owner": {"reputation": 41280, "user_id": 344286, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/3827b2facd01ed6a64a96df00d4b877a?s=128&d=identicon&r=PG", "display_name": "Wayne Werner", "link": "https://stackoverflow.com/users/344286/wayne-werner"}, "edited": false, "score": 1, "creation_date": 1470263566, "post_id": 38752923, "comment_id": 64883183, "body": "I took a <a href=\"http://imgur.com/a/7jeN1\" rel=\"nofollow noreferrer\">quick screencap</a> of my scrolling. I start off scrolling with the mousewheel, but then I change to scrolling with the arrow keys."}, {"owner": {"reputation": 714, "user_id": 9231492, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HXIcc.jpg?s=128&g=1", "display_name": "Hippolippo", "link": "https://stackoverflow.com/users/9231492/hippolippo"}, "edited": false, "score": 0, "creation_date": 1516654955, "post_id": 38752923, "comment_id": 83768192, "body": "@T.Anserson I thought this question should get answered so I put a bounty on it"}, {"owner": {"reputation": 429, "user_id": 7705970, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-CYjltJRzxyQ/AAAAAAAAAAI/AAAAAAAABc0/r1waxXf8NWY/photo.jpg?sz=128", "display_name": "Michael Ilie", "link": "https://stackoverflow.com/users/7705970/michael-ilie"}, "edited": false, "score": 0, "creation_date": 1516677978, "post_id": 38752923, "comment_id": 83775121, "body": "Check out my answer, I edited it; it should work now"}], "answers": [{"comments": [{"owner": {"reputation": 429, "user_id": 7705970, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-CYjltJRzxyQ/AAAAAAAAAAI/AAAAAAAABc0/r1waxXf8NWY/photo.jpg?sz=128", "display_name": "Michael Ilie", "link": "https://stackoverflow.com/users/7705970/michael-ilie"}, "edited": false, "score": 0, "creation_date": 1516672543, "post_id": 48393023, "comment_id": 83773874, "body": "also, remember that when using global vars in multi threaded, declare them as global"}, {"owner": {"reputation": 429, "user_id": 7705970, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-CYjltJRzxyQ/AAAAAAAAAAI/AAAAAAAABc0/r1waxXf8NWY/photo.jpg?sz=128", "display_name": "Michael Ilie", "link": "https://stackoverflow.com/users/7705970/michael-ilie"}, "edited": false, "score": 0, "creation_date": 1516672568, "post_id": 48393023, "comment_id": 83773883, "body": "I suggest threading the <code>t.insert</code> and the <code>search</code> parts of your code"}], "tags": [], "owner": {"reputation": 429, "user_id": 7705970, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-CYjltJRzxyQ/AAAAAAAAAAI/AAAAAAAABc0/r1waxXf8NWY/photo.jpg?sz=128", "display_name": "Michael Ilie", "link": "https://stackoverflow.com/users/7705970/michael-ilie"}, "is_accepted": false, "score": 0, "last_activity_date": 1516672459, "creation_date": 1516672459, "answer_id": 48393023, "question_id": 38752923, "link": "https://stackoverflow.com/questions/38752923/how-to-speed-up-scrolling-responsiveness-when-displaying-lots-of-text/48393023#48393023", "title": "How to speed up scrolling responsiveness when displaying lots of text", "body": "<p>So this is solved by something called multi threading. A computer can do multiple tasks at once, otherwise, your web experience wouldn't be the same. Here is a simple function that demonstrates mulit-threading</p>\n\n<pre><code>from threading import Thread\n\ndef execOnDifferentThread(funct=print, params=(\"hello world\",)):\n    t = Thread(target=funct, args=params)\n    t.start()\n</code></pre>\n\n<p>Now note, this might not be the best example, but all you have to do to run a function in parallel now, is <code>execOnDifferentThread(funct=A, params=B)</code> where A is a function name, and B is a <strong>tuple</strong>  of arguments that will be passed on  to your function. Now, I don't want to write your code for you, but using this function, you can <code>multi-thread</code> certain parts of your code to make it faster. If you are truly stuck, just comment where and ill help. But please try on your own first, now that you have the power of multi-threading on your hands</p>\n"}, {"comments": [{"owner": {"reputation": 714, "user_id": 9231492, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HXIcc.jpg?s=128&g=1", "display_name": "Hippolippo", "link": "https://stackoverflow.com/users/9231492/hippolippo"}, "edited": false, "score": 0, "creation_date": 1516724753, "post_id": 48396160, "comment_id": 83801661, "body": "It says i can give the bounty in 1 hour"}], "tags": [], "owner": {"reputation": 10223, "user_id": 7032856, "user_type": "registered", "accept_rate": 81, "profile_image": "https://lh6.googleusercontent.com/-v2P-pqI1pww/AAAAAAAAAAI/AAAAAAAAABg/BHOFSOpQ0BM/photo.jpg?sz=128", "display_name": "Nae", "link": "https://stackoverflow.com/users/7032856/nae"}, "is_accepted": false, "score": 1, "last_activity_date": 1516691933, "creation_date": 1516691933, "answer_id": 48396160, "question_id": 38752923, "link": "https://stackoverflow.com/questions/38752923/how-to-speed-up-scrolling-responsiveness-when-displaying-lots-of-text/48396160#48396160", "title": "How to speed up scrolling responsiveness when displaying lots of text", "body": "<p>Assuming MCVE is the following:</p>\n\n<pre><code>import tkinter as tk\n\n\ndef create_text(text_len):\n    _text = list()\n    for _ in range(text_len):\n        _text.append(\"{}\\n\".format(_))\n    _text = \"\".join(_text)\n    return _text\n\n\nif __name__ == '__main__':\n    root = tk.Tk()\n    txt = tk.Text(root)\n\n    txt.text = create_text(10000)\n    txt.insert('end', txt.text)\n\n    txt.pack()\n    root.mainloop()\n</code></pre>\n\n<h1>Analysis</h1>\n\n<p>Based on <a href=\"https://imgur.com/a/7jeN1\" rel=\"nofollow noreferrer\">this</a> I don't think it is a rendering issue. I think it's an issue with having a <a href=\"https://superuser.com/q/1077223/810934\">fixed rate of registering <code>&lt;KeyPress&gt;</code> events</a>. Meaning that the number of events registered per second is fixed, even though the hardware may be capable of registering at a faster rate. A similar regulation should be true also for the mouse-scroll event.</p>\n\n<hr>\n\n<h1>Solutions for rendering</h1>\n\n<p>Perhaps slicing text for a buffer proportion of <code>txt['height']</code> would help. But isn't that how Tk supposed to be rendering anyway?</p>\n\n<hr>\n\n<h1>Solutions for rendering unrelated issue</h1>\n\n<p>If a step would be defined as the cursor's movement to the previous or the next line, for every registered event of <kbd>Up</kbd> or <kbd>Down</kbd>; then <code>scrolling_speed = step * event_register_frequency</code>.</p>\n\n<hr>\n\n<p><strong>By increasing the step size</strong></p>\n\n<p>An easy workaround would be to simply increase the step size, as in increasing the number of lines to jump, for each registration of the key bind.</p>\n\n<p>But there's already such default behavior, assuming the page length > 1 line, <kbd>Page Up</kbd> or <kbd>Page Down</kbd> has a step size of a page. Which makes the scrolling speed increase, even though the event registration rate remains the same.</p>\n\n<p>Alternatively, a new event handler with a greater step size may be defined to call multiple cursor movements for each registration of <kbd>Up</kbd> and <kbd>Down</kbd>, such as:</p>\n\n<pre><code>import tkinter as tk\n\n\ndef create_text(text_len):\n    _text = list()\n    for _ in range(text_len):\n        _text.append(\"{}\\n\".format(_))\n    _text = \"\".join(_text)\n    return _text\n\n\ndef step(event):\n    if txt._step_size != 1:\n        _no_of_lines_to_jump = txt._step_size\n        if event.keysym == 'Up':\n            _no_of_lines_to_jump *= -1\n\n        _position = root.tk.call('tk::TextUpDownLine', txt, _no_of_lines_to_jump)\n        root.tk.call('tk::TextSetCursor', txt, _position)\n        return \"break\"\n\nif __name__ == '__main__':\n    root = tk.Tk()\n    txt = tk.Text(root)\n\n    txt.text = create_text(10000)\n    txt.insert('end', txt.text)\n\n    txt._step_size = 12\n    txt.bind(\"&lt;Up&gt;\", step)\n    txt.bind(\"&lt;Down&gt;\", step)\n\n    txt.pack()\n    root.mainloop()\n</code></pre>\n\n<p><strong>By mimicking keypress event registry rate increase</strong>:</p>\n\n<p>As mentioned in <a href=\"https://stackoverflow.com/a/12995346/7032856\">here</a> actually modifying keypress registry rate is out of scope of Tk. Instead, it can be mimicked:</p>\n\n<pre><code>import tkinter as tk\n\n\ndef create_text(text_len):\n    _text = list()\n    for _ in range(text_len):\n        _text.append(\"{}\\n\".format(_))\n    _text = \"\".join(_text)\n    return _text\n\n\ndef step_up(*event):\n    _position = root.tk.call('tk::TextUpDownLine', txt, -1)\n    root.tk.call('tk::TextSetCursor', txt, _position)\n\n    if txt._repeat_on:\n        root.after(txt._repeat_freq, step_up)\n    return \"break\"\n\n\ndef step_down(*event):\n    _position = root.tk.call('tk::TextUpDownLine', txt, 1)\n    root.tk.call('tk::TextSetCursor', txt, _position)\n\n    if txt._repeat_on:\n        root.after(txt._repeat_freq, step_down)\n    return \"break\"\n\n\ndef stop(*event):\n    if txt._repeat_on:\n        txt._repeat_on = False\n        root.after(txt._repeat_freq + 1, stop)\n    else:\n        txt._repeat_on = True\n\nif __name__ == '__main__':\n\n    root = tk.Tk()\n\n    txt = tk.Text(root)\n\n    txt.text = create_text(10000)\n    txt.insert('end', txt.text)\n    txt._repeat_freq = 100\n    txt._repeat_on = True\n\n    txt.bind(\"&lt;KeyPress-Up&gt;\", step_up)\n    txt.bind(\"&lt;KeyRelease-Up&gt;\", stop)\n    txt.bind(\"&lt;KeyPress-Down&gt;\", step_down)\n    txt.bind(\"&lt;KeyRelease-Down&gt;\", stop)\n\n    txt.pack()\n    root.mainloop()\n</code></pre>\n\n<p><strong>By both increasing step-size and mimicking registry rate increase</strong></p>\n\n<pre><code>import tkinter as tk\n\n\ndef create_text(text_len):\n    _text = list()\n    for _ in range(text_len):\n        _text.append(\"{}\\n\".format(_))\n    _text = \"\".join(_text)\n    return _text\n\n\ndef step_up(*event):\n    _no_of_lines_to_jump = -txt._step_size\n    _position = root.tk.call('tk::TextUpDownLine', txt, _no_of_lines_to_jump)\n    root.tk.call('tk::TextSetCursor', txt, _position)\n\n    if txt._repeat_on:\n        root.after(txt._repeat_freq, step_up)\n    return \"break\"\n\n\ndef step_down(*event):\n    _no_of_lines_to_jump = txt._step_size\n    _position = root.tk.call('tk::TextUpDownLine', txt, _no_of_lines_to_jump)\n    root.tk.call('tk::TextSetCursor', txt, _position)\n\n    if txt._repeat_on:\n        root.after(txt._repeat_freq, step_down)\n    return \"break\"\n\n\ndef stop(*event):\n    if txt._repeat_on:\n        txt._repeat_on = False\n        root.after(txt._repeat_freq + 1, stop)\n    else:\n        txt._repeat_on = True\n\nif __name__ == '__main__':\n\n    root = tk.Tk()\n\n    txt = tk.Text(root)\n\n    txt.text = create_text(10000)\n    txt.insert('end', txt.text)\n    txt._step_size = 1\n    txt._repeat_freq = 100\n    txt._repeat_on = True\n\n    txt.bind(\"&lt;KeyPress-Up&gt;\", step_up)\n    txt.bind(\"&lt;KeyRelease-Up&gt;\", stop)\n    txt.bind(\"&lt;KeyPress-Down&gt;\", step_down)\n    txt.bind(\"&lt;KeyRelease-Down&gt;\", stop)\n\n    txt.pack()\n    root.mainloop()\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 6673830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aacf9540027c67aae3dbb0c5092bd3d6?s=128&d=identicon&r=PG&f=1", "display_name": "T. Anserson", "link": "https://stackoverflow.com/users/6673830/t-anserson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 636, "favorite_count": 2, "answer_count": 2, "score": 7, "last_activity_date": 1516691933, "creation_date": 1470255634, "last_edit_date": 1470259279, "question_id": 38752923, "link": "https://stackoverflow.com/questions/38752923/how-to-speed-up-scrolling-responsiveness-when-displaying-lots-of-text", "title": "How to speed up scrolling responsiveness when displaying lots of text", "body": "<p>I am trying to create a Python script to highlight specific patterns in a .txt file. To do this, I have altered a script which used Tkinter to highlight a given set of data. However, the files I tend to get it to process are around 10000 lines, which results in slow scrolling as I <em>think</em> it renders everything - whether it is on the screen or not (correct me if I'm wrong). Is it possible to alter my code such that it renders the output in a more efficient way? I have tried searching for a means to do this, but have not found anything myself.</p>\n\n<p>My code is as follows:</p>\n\n<pre><code>from Tkinter import *\n\nclass FullScreenApp(object):\n    def __init__(self, master, **kwargs):\n        self.master=master\n        pad=3\n        self._geom='200x200+0+0'\n        master.geometry(\"{0}x{1}+0+0\".format(\n            master.winfo_screenwidth()-pad, master.winfo_screenheight()-pad))\n        master.bind('&lt;Escape&gt;',self.toggle_geom)            \n    def toggle_geom(self,event):\n        geom=self.master.winfo_geometry()\n        print(geom,self._geom)\n        self.master.geometry(self._geom)\n        self._geom=geom\n\nroot = Tk()\napp = FullScreenApp(root)\nt = Text(root)\nt.pack()\n\n#Import file\nwith open('data.txt') as f:\n    for line in f:\n        t.insert(END, line)\n\n#Search terms - Leave blank if not required       \nsearch_term0 = '0xCAFE'\nsearch_term1 = '0x0011'\nsearch_term2 = '0x961E'\nsearch_term3 = '0x0000'\nsearch_term4 = ''\n\n#Assigns highlighted colours for terms not blank\nt.tag_config(search_term0, background='red')\nif search_term1 != '':\n    t.tag_config(search_term1, background='red')\nif search_term2 != '':    \n    t.tag_config(search_term2, background='red')\nif search_term3 != '':\n    t.tag_config(search_term3, background='red')\nif search_term4 != '':\n    t.tag_config(search_term4, background='red')\n\n#Define search\n#Requires text widget, the keyword, and a tag\ndef search(text_widget, keyword, tag):\n    pos = '1.0'\n    while True:\n        idx = text_widget.search(keyword, pos, END)\n        if not idx:\n            break\n        pos = '{}+{}c'.format(idx, len(keyword))\n        text_widget.tag_add(tag, idx, pos)\n\n#Search for terms that are not blank\nsearch(t, search_term0, search_term0)\nif search_term1 != '':\n    search(t, search_term1, search_term1)\nif search_term2 != '':\n    search(t, search_term2, search_term2)\nif search_term3 != '':\n    search(t, search_term3, search_term3)\nif search_term4 != '':\n    search(t, search_term4, search_term3)\n\nroot.mainloop()\n</code></pre>\n\n<p>An example of the data in a file is given in the following link: <a href=\"http://pastebin.com/vqC5viw2\" rel=\"noreferrer\">here</a></p>\n\n<p>Many thanks for your time, it is really appreciated.</p>\n"}, {"tags": ["python", "matplotlib", "heatmap"], "comments": [{"owner": {"reputation": 1516, "user_id": 2768172, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c0aa1896ab14d2afa69d0e13d1bcad2b?s=128&d=identicon&r=PG&f=1", "display_name": "pathoren", "link": "https://stackoverflow.com/users/2768172/pathoren"}, "edited": false, "score": 0, "creation_date": 1470255618, "post_id": 38752844, "comment_id": 64879723, "body": "Try to move your <code>invert_yaxis</code> to the bottom of the set-ticks-axis-stuff-thing.  Maybe <code>set_yticks</code> or the other commands are screwing your inversion up?"}, {"owner": {"reputation": 113, "user_id": 4373654, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5vPaM.jpg?s=128&g=1", "display_name": "Dave&#39;o-Telephone", "link": "https://stackoverflow.com/users/4373654/daveo-telephone"}, "reply_to_user": {"reputation": 1516, "user_id": 2768172, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c0aa1896ab14d2afa69d0e13d1bcad2b?s=128&d=identicon&r=PG&f=1", "display_name": "pathoren", "link": "https://stackoverflow.com/users/2768172/pathoren"}, "edited": false, "score": 0, "creation_date": 1470255759, "post_id": 38752844, "comment_id": 64879792, "body": "Just had a go at what you suggested and it still didn&#39;t work I&#39;m afraid!"}, {"owner": {"reputation": 1516, "user_id": 2768172, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c0aa1896ab14d2afa69d0e13d1bcad2b?s=128&d=identicon&r=PG&f=1", "display_name": "pathoren", "link": "https://stackoverflow.com/users/2768172/pathoren"}, "edited": false, "score": 0, "creation_date": 1470255947, "post_id": 38752844, "comment_id": 64879874, "body": "For clarity: you want to flip the DATA not the yaxis?  Maybe I misunderstood you first"}, {"owner": {"reputation": 113, "user_id": 4373654, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5vPaM.jpg?s=128&g=1", "display_name": "Dave&#39;o-Telephone", "link": "https://stackoverflow.com/users/4373654/daveo-telephone"}, "reply_to_user": {"reputation": 1516, "user_id": 2768172, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c0aa1896ab14d2afa69d0e13d1bcad2b?s=128&d=identicon&r=PG&f=1", "display_name": "pathoren", "link": "https://stackoverflow.com/users/2768172/pathoren"}, "edited": false, "score": 0, "creation_date": 1470256198, "post_id": 38752844, "comment_id": 64879997, "body": "Basically the y-axis labels the condition. Heat maps usually (and in this case) plot it like d, c, b, a whereas I want the order to be a, b, c, d. If I plot each one on its own (i.e. without subplots) it does it in the right order... which is what&#39;s confusing me"}, {"owner": {"reputation": 1545, "user_id": 1872234, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ebaa7e51aa78b438266d08deb48fcfc4?s=128&d=identicon&r=PG", "display_name": "Wajahat", "link": "https://stackoverflow.com/users/1872234/wajahat"}, "edited": false, "score": 0, "creation_date": 1470256559, "post_id": 38752844, "comment_id": 64880168, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/11777381/invert-an-axis-in-a-matplotlib-grafic\">Invert an axis in a matplotlib grafic</a>"}, {"owner": {"reputation": 113, "user_id": 4373654, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5vPaM.jpg?s=128&g=1", "display_name": "Dave&#39;o-Telephone", "link": "https://stackoverflow.com/users/4373654/daveo-telephone"}, "edited": false, "score": 0, "creation_date": 1470256977, "post_id": 38752844, "comment_id": 64880378, "body": "Thanks for the link (I hadn&#39;t seen that), but <code>ax[i].set_ylim(ax[i].get_ylim()[::-1])</code> doesn&#39;t work either."}, {"owner": {"reputation": 1516, "user_id": 2768172, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c0aa1896ab14d2afa69d0e13d1bcad2b?s=128&d=identicon&r=PG&f=1", "display_name": "pathoren", "link": "https://stackoverflow.com/users/2768172/pathoren"}, "edited": false, "score": 0, "creation_date": 1470257089, "post_id": 38752844, "comment_id": 64880440, "body": "A quickfix might be to either swap the label-list or flip the data up-down (with <code>numpy.flipud</code> for example)."}, {"owner": {"reputation": 1516, "user_id": 2768172, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c0aa1896ab14d2afa69d0e13d1bcad2b?s=128&d=identicon&r=PG&f=1", "display_name": "pathoren", "link": "https://stackoverflow.com/users/2768172/pathoren"}, "edited": false, "score": 0, "creation_date": 1470257115, "post_id": 38752844, "comment_id": 64880459, "body": "Can you provide a runnable example of your problem?"}, {"owner": {"reputation": 113, "user_id": 4373654, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5vPaM.jpg?s=128&g=1", "display_name": "Dave&#39;o-Telephone", "link": "https://stackoverflow.com/users/4373654/daveo-telephone"}, "edited": false, "score": 0, "creation_date": 1470257424, "post_id": 38752844, "comment_id": 64880623, "body": "Sorted it! I just moved the <code>ax[i].invert_yaxis()</code> to after the for loop and now it works for some reason."}], "answers": [{"tags": [], "owner": {"reputation": 113, "user_id": 4373654, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5vPaM.jpg?s=128&g=1", "display_name": "Dave&#39;o-Telephone", "link": "https://stackoverflow.com/users/4373654/daveo-telephone"}, "is_accepted": false, "score": 0, "last_activity_date": 1470257336, "creation_date": 1470257336, "answer_id": 38753354, "question_id": 38752844, "link": "https://stackoverflow.com/questions/38752844/y-axis-of-heat-map-not-inverting-in-python/38753354#38753354", "title": "y axis of heat map not inverting in Python", "body": "<p>Aha. I have solved it. I removed <code>ax[i].invert_yaxis()</code> from within the <code>for</code> loop and stuck it at the end. It now works:</p>\n\n<pre><code>for i, v in enumerate(everything):\n\n    heatmap = ax[i].pcolor(v, cmap=plt.cm.Blues)\n\n    ax[i].xaxis.tick_top()\n    ax[i].set_xticks(np.arange(v.shape[1])+0.5, minor=False)\n    ax[i].set_xticklabels(column_labels, minor=False)\n    ax[i].set_yticks(np.arange(v.shape[0])+0.5, minor=False)\n    ax[i].set_yticklabels(row_labels, minor=False, fontproperties = titlefont)\n    ax[i].set_xticklabels(column_labels, minor=False, fontproperties = titlefont)\n\n    cb = fig.colorbar(heatmap, orientation='horizontal', pad=0.02, ax = ax[i])\n    cb.set_label(label = legend[i], fontproperties = titlefont)\n    cb.outline.set_linewidth(2)\n\nax[0].invert_yaxis()\n</code></pre>\n"}], "owner": {"reputation": 113, "user_id": 4373654, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5vPaM.jpg?s=128&g=1", "display_name": "Dave&#39;o-Telephone", "link": "https://stackoverflow.com/users/4373654/daveo-telephone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 957, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1470257336, "creation_date": 1470255356, "question_id": 38752844, "link": "https://stackoverflow.com/questions/38752844/y-axis-of-heat-map-not-inverting-in-python", "title": "y axis of heat map not inverting in Python", "body": "<p>I'm generating 4 heat maps using subplots and want the y-axis inverted. I'm using <code>ax[i].invert_yaxis()</code> but it doesn't seem to be working. An example of the code is below:</p>\n\n<pre><code>everything = [data_y_axis, data_length, data_roundness, data_y_SDev]\nlegend = ['title1', 'title2', 'title3', 'title4']\n\nfig, ax = plt.subplots(nrows = 1, ncols = 4, sharex = False, sharey = True, figsize = (13,3))\n\nax = ax.flatten()\n\nfor i, v in enumerate(everything):\n\n    heatmap = ax[i].pcolor(v, cmap=plt.cm.Blues)\n\n    ax[i].invert_yaxis()\n    ax[i].xaxis.tick_top()\n    ax[i].set_xticks(np.arange(v.shape[1])+0.5, minor=False)\n    ax[i].set_xticklabels(column_labels, minor=False)\n    ax[i].set_yticks(np.arange(v.shape[0])+0.5, minor=False)\n    ax[i].set_yticklabels(row_labels, minor=False, fontproperties = titlefont)\n    ax[i].set_xticklabels(column_labels, minor=False, fontproperties = titlefont)\n\n    cb = fig.colorbar(heatmap, orientation='horizontal', pad=0.02, ax = ax[i])\n    cb.set_label(label = legend[i], fontproperties = titlefont)\n    cb.outline.set_linewidth(2)\n</code></pre>\n\n<p>The items in <code>everything</code> are just np.arrays, all of which have the same shape of (4, 6).</p>\n\n<p>It's currently producing maps like this:<a href=\"https://i.stack.imgur.com/wJg78.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wJg78.png\" alt=\"enter image description here\"></a> and should look like this: <a href=\"https://i.stack.imgur.com/08URE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/08URE.png\" alt=\"enter image description here\"></a>.</p>\n\n<p>Have I done something obviously wrong?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 13285, "user_id": 157770, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/870524e51f7b2cf270f9053abea676d5?s=128&d=identicon&r=PG", "display_name": "AlG", "link": "https://stackoverflow.com/users/157770/alg"}, "edited": false, "score": 1, "creation_date": 1470255629, "post_id": 38752837, "comment_id": 64879732, "body": "Might be worth using <code>cron</code>, <code>Task Scheduler</code>, or a similar tool if available. Plenty of things that already schedule for you."}, {"owner": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 1, "creation_date": 1470255921, "post_id": 38752837, "comment_id": 64879862, "body": "&quot;but it always prints the entire week.&quot; well yeah, That&#39;s what I&#39;d expect <code>..thisweek + timedelta(days=d))) for d in range(7)</code> to do.  the function itself does return a boolean every time, you are just calling it 7 times for each week."}], "answers": [{"tags": [], "owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "is_accepted": true, "score": 0, "last_activity_date": 1470256625, "last_edit_date": 1470256625, "creation_date": 1470255778, "answer_id": 38752960, "question_id": 38752837, "link": "https://stackoverflow.com/questions/38752837/return-true-every-other-weekend-return-false-any-other-day/38752960#38752960", "title": "Return True every other weekend, return False any other day", "body": "<p>As stated in the comments, there are better alternatives to scheduling tasks. </p>\n\n<p>Is this what you want?</p>\n\n<pre><code>def check_date(d):\n    return not schedule[abs(d - reference_monday).days / 7 % 2][d.weekday()]\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>week of 2012-06-04 : False,False,False,False,False,False,False\nweek of 2012-06-11 : False,False,False,False,False,True,True\nweek of 2012-06-18 : False,False,False,False,False,False,False\nweek of 2012-06-25 : False,False,False,False,False,True,True\nweek of 2012-07-02 : False,False,False,False,False,False,False\nweek of 2012-07-09 : False,False,False,False,False,True,True\n</code></pre>\n\n<blockquote>\n  <p>I would like it to return either true or false, depending on that current day</p>\n</blockquote>\n\n<pre><code>start = date(2012, 6, 4)\nfor w in range(6):\n    thisweek = start + timedelta(weeks=w)\n    print 'week of', thisweek, ':',\n\n    # Only Saturday and Sunday\n    run_sat = check_date(thisweek + timedelta(days=5))\n    run_sun = check_date(thisweek + timedelta(days=6))\n\n    print \"{:5} | {:5}\".format(str(run_sat), str(run_sun))\n</code></pre>\n\n<p>Outputs</p>\n\n<pre><code>week of 2012-06-04 : False | False\nweek of 2012-06-11 : True  | True \nweek of 2012-06-18 : False | False\nweek of 2012-06-25 : True  | True \nweek of 2012-07-02 : False | False\nweek of 2012-07-09 : True  | True \n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 6674113, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YKM31.jpg?s=128&g=1", "display_name": "DaGeek", "link": "https://stackoverflow.com/users/6674113/dageek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 38752960, "answer_count": 1, "score": 1, "last_activity_date": 1470256625, "creation_date": 1470255338, "question_id": 38752837, "link": "https://stackoverflow.com/questions/38752837/return-true-every-other-weekend-return-false-any-other-day", "title": "Return True every other weekend, return False any other day", "body": "<p>I'm trying to make a script that will run every other weekend, I've tried using datetime for that (a solution I found on the internet, likewise), but it always prints the entire week.</p>\n\n<pre><code>from datetime import date, timedelta\nreference_monday = date(2016, 1, 8)        # any monday of a \"week one\"\n\nschedule = [[True, True, True, True, True, True, True],\n            [True, True, True, True, True, False, False]]\n\ndef check_date(d):\n    return schedule[abs(d - reference_monday).days / 7 % 2][d.weekday()]\n\nstart = date(2012, 6, 4)\n\nfor w in range(6):\n    thisweek = start + timedelta(weeks=w)\n    print 'week of', thisweek, ':',\n    print ','.join(str(check_date(thisweek + timedelta(days=d))) for d in range(7))\n</code></pre>\n\n<p>it returns</p>\n\n<pre><code>week of 2012-06-04 : True,True,True,True,True,True,True\nweek of 2012-06-11 : True,True,True,True,True,False,False\nweek of 2012-06-18 : True,True,True,True,True,True,True\nweek of 2012-06-25 : True,True,True,True,True,False,False\nweek of 2012-07-02 : True,True,True,True,True,True,True\nweek of 2012-07-09 : True,True,True,True,True,False,False\n</code></pre>\n\n<p>I would like it to return either true or false, depending on that current day.</p>\n"}, {"tags": ["python", "d3.js", "nested-loops"], "comments": [{"owner": {"reputation": 66318, "user_id": 3510736, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/kVtHP.jpg?s=128&g=1", "display_name": "Ami Tavory", "link": "https://stackoverflow.com/users/3510736/ami-tavory"}, "edited": false, "score": 0, "creation_date": 1470255646, "post_id": 38752756, "comment_id": 64879741, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/19798112/convert-pandas-dataframe-to-a-nested-dict\">Convert pandas DataFrame to a nested dict</a>"}], "answers": [{"comments": [{"owner": {"reputation": 918, "user_id": 1196358, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/c6a9bec30355b7d5d293fa176cd800b0?s=128&d=identicon&r=PG", "display_name": "ghukill", "link": "https://stackoverflow.com/users/1196358/ghukill"}, "edited": false, "score": 0, "creation_date": 1470257829, "post_id": 38753169, "comment_id": 64880803, "body": "THANK YOU.  This is awesome, and works perfectly.  For my own sanity, it&#39;s nice to know I was close, but clearly not quite there.  Much appreciated."}], "tags": [], "owner": {"reputation": 3809, "user_id": 365796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SJK3v.png?s=128&g=1", "display_name": "vimist", "link": "https://stackoverflow.com/users/365796/vimist"}, "is_accepted": true, "score": 1, "last_activity_date": 1470256598, "creation_date": 1470256598, "answer_id": 38753169, "question_id": 38752756, "link": "https://stackoverflow.com/questions/38752756/convert-spreadsheet-to-nested-dictionary-form-for-d3/38753169#38753169", "title": "Convert spreadsheet to nested dictionary form for D3", "body": "<p>This should do it:</p>\n\n<pre><code>def convert_data(data):                                     \n    out = {'name': 'root', 'children': []}           \n\n    for row in data:                                 \n        out['children'].append({})                   \n        current = out['children']                    \n        for value in row:                            \n            current[-1]['name'] = value              \n            current[-1]['children'] = [{}]           \n\n            current = current[-1]['children']        \n\n    return out                                       \n\ndata = (('A1','A2','A3','A4'), ('B1','B2','B3','B4'))\n\nnew_structure = convert_data(data)\n</code></pre>\n\n<p>You can obviously use something like <a href=\"https://docs.python.org/3/library/json.html#json.dumps\" rel=\"nofollow\"><code>json.dumps</code></a> to output it as a JSON string.</p>\n"}], "owner": {"reputation": 918, "user_id": 1196358, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/c6a9bec30355b7d5d293fa176cd800b0?s=128&d=identicon&r=PG", "display_name": "ghukill", "link": "https://stackoverflow.com/users/1196358/ghukill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "accepted_answer_id": 38753169, "answer_count": 1, "score": 0, "last_activity_date": 1470256598, "creation_date": 1470255045, "question_id": 38752756, "link": "https://stackoverflow.com/questions/38752756/convert-spreadsheet-to-nested-dictionary-form-for-d3", "title": "Convert spreadsheet to nested dictionary form for D3", "body": "<p>Having trouble with this one.  Feel as though I've whipped through similar transformations of data, but this one is throwing me for a <em>loop</em>.</p>\n\n<p>Looking to convert a spreadsheet data into a nested JSON that will be used for a D3 visualization, seen it referred to as \"<a href=\"https://gist.github.com/mbostock/1093025\" rel=\"nofollow\">flare.json</a>\".</p>\n\n<p>The target JSON would look something like this (where, obviously, a dictionary would be just as good):</p>\n\n<pre><code>{\n  \"name\": \"root\",\n  \"children\": [\n    { \n      \"name\": \"A1\",\n      \"children\": [\n        { \n          \"name\": \"A2\",\n          \"children\": [\n            { \n              \"name\": \"A3\",\n              \"children\": [\n                { \n                  \"name\": \"A4\",\n                  \"children\": [\n                  ] \n                }\n              ]\n            }\n          ] \n        }\n      ]\n    },\n    { \n      \"name\": \"B1\",\n      \"children\": [\n        { \n          \"name\": \"B2\",\n          \"children\": [\n            { \n              \"name\": \"B3\",\n              \"children\": [\n                { \n                  \"name\": \"B4\",\n                  \"children\": [\n                  ] \n                }\n              ]\n            }\n          ] \n        }\n      ]\n    }  \n  ]\n}\n</code></pre>\n\n<p>I'm pulling data from a spreadsheet with <a href=\"https://openpyxl.readthedocs.io/en/default/\" rel=\"nofollow\">openpyxl</a> that provides a root tuple that contains tuples of each column value.</p>\n\n<p>e.g.</p>\n\n<pre><code>(\n  ('A1','A2','A3','A4'),\n  ('B1','B2','B3','B4'),\n)\n</code></pre>\n\n<p>I know there are 101 different ways to do this, considered using dataframes from <a href=\"http://pandas.pydata.org/\" rel=\"nofollow\">pandas</a>, and I'm sure <a href=\"https://openpyxl.readthedocs.io/en/default/\" rel=\"nofollow\">openpyxl</a> has a myriad of methods and conversions for this kind of thing.  But for whatever reason, having a hard time envisioning this process today.  Thanks in advance.</p>\n"}, {"tags": ["python", "python-3.x", "tkinter", "scrollbar", "ttk"], "comments": [{"owner": {"reputation": 15789, "user_id": 722804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3qBY9.png?s=128&g=1", "display_name": "Terry Jan Reedy", "link": "https://stackoverflow.com/users/722804/terry-jan-reedy"}, "edited": false, "score": 1, "creation_date": 1470264721, "post_id": 38752689, "comment_id": 64883542, "body": "You can direct add a scrollbar only to Canvas, Text, and Listbox.  For anything else, you have to use a Canvas and put the widget on the canvas.  For instance, a &#39;scrolled frame&#39; is a frame on a scrolled canvas.  It is tricky to get a scrolled widget-on-canvas right."}, {"owner": {"reputation": 100, "user_id": 5243378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/688d472d5adbf30150e6ea15a085e808?s=128&d=identicon&r=PG&f=1", "display_name": "Snowman", "link": "https://stackoverflow.com/users/5243378/snowman"}, "reply_to_user": {"reputation": 15789, "user_id": 722804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3qBY9.png?s=128&g=1", "display_name": "Terry Jan Reedy", "link": "https://stackoverflow.com/users/722804/terry-jan-reedy"}, "edited": false, "score": 0, "creation_date": 1470318636, "post_id": 38752689, "comment_id": 64909657, "body": "I used a Listbox with a scrollbar, and I am just adding to that it works perfectly thank you"}], "owner": {"reputation": 100, "user_id": 5243378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/688d472d5adbf30150e6ea15a085e808?s=128&d=identicon&r=PG&f=1", "display_name": "Snowman", "link": "https://stackoverflow.com/users/5243378/snowman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 920, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1470254771, "creation_date": 1470254771, "question_id": 38752689, "link": "https://stackoverflow.com/questions/38752689/how-to-add-scroll-bar-to-tkinter-ttk-notebook", "title": "How to add scroll bar to tkinter ttk notebook?", "body": "<p>I've been using tkinter and ttk with python for a little while, but still rather new. I have a piece of code that generates a tkinter window. In that window I placed a notebook object, I plan on adding many labels into that notebook, and was wondering if there is a way to add a scroll bar to the notebook. </p>\n\n<p>This is my code so far:</p>\n\n<pre><code>from tkinter.filedialog import askopenfilename\nimport tkinter as tk \nfrom tkinter import ttk\nimport sys\nimport time\n\ndef browseL():\n        filename=askopenfilename()\n        ent1.insert(0,filename)\n\ndef browseR():\n    filename=askopenfilename()\n    ent2.insert(0,filename)\n\n\nroot=tk.Tk()\nroot.config(width=1350,height=550, bg='grey')\nbutton=ttk.Button(root,text='Browse',command=browseL) \nbutton.place(x=500,y=130)\nbutton2=ttk.Button(root,text='Browse',command=browseR) \nbutton2.place(x=700,y=130)\n\nent1=ttk.Entry(root)\nent2=ttk.Entry(root)\nent1.place(x=480,y=100)\nent2.place(x=680,y=100)\n\nlab1=ttk.Label(root, text='Enter path to settings file #1', background='white')\nlab2=ttk.Label(root, text='Enter path to settings file #2', background='white')\nlab1.place(x=470,y=80)\nlab2.place(x=670,y=80)\n\nnotebook=ttk.Notebook(root) \nnotebook.place(x=1000,y=100) \n\ntab1=tk.Frame(root) \ntab1.config(width=100,height=100,background='white') \nnotebook.add(tab1,text='tab1') \n\nroot.mainloop()\n</code></pre>\n\n<p>Notice the notepad with one tab, that would be what I want to add a scroll bar to if it is possible.</p>\n\n<p>And I am using python 3.4 if that helps</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["python", "user-interface", "tkinter", "calculator", "operator-keyword"], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 6586319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f15d102fcdbf4911670d84fdeec9c113?s=128&d=identicon&r=PG&f=1", "display_name": "NuktukHotS", "link": "https://stackoverflow.com/users/6586319/nuktukhots"}, "edited": false, "score": 0, "creation_date": 1470256782, "post_id": 38753030, "comment_id": 64880277, "body": "That&#39;s perfectly fine, Ted. I was not expecting a simple copy and paste. Thank you for giving your insight on this issue!"}], "tags": [], "owner": {"reputation": 7155, "user_id": 6486738, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10205523648805608/picture?type=large", "display_name": "Ted Klein Bergman", "link": "https://stackoverflow.com/users/6486738/ted-klein-bergman"}, "is_accepted": false, "score": 0, "last_activity_date": 1470256047, "creation_date": 1470256047, "answer_id": 38753030, "question_id": 38752665, "link": "https://stackoverflow.com/questions/38752665/python-tkinter-gui-calculator/38753030#38753030", "title": "Python Tkinter GUI Calculator", "body": "<p>What you could do is <em>bind</em> all buttons to a method that identifies the button and append a string to a list or evaluate the expression. This list could then be displayed in the label.</p>\n\n<pre><code>def button_press(self, event):\n    widget = event.widget\n    text = widget[\"text\"]\n    if text != \"AC\" and text != \"=\":\n        self.operations.append(text)\n    elif text == \"AC\":\n        self.operations = []  # Clear the list.\n    elif text == \"=\":\n        self.evaluate()\n    self.label[\"text\"] = \"\".join(self.operations)\n\ndef evaluate(self):\n    try:\n        self.operations = [str(eval(\"\".join(self.operations)))]\n    except (ArithmeticError, SyntaxError, TypeError, NameError):\n        self.operations = [\"ERROR\"]\n</code></pre>\n\n<p>This code cannot just be pasted in to your program, it's just to demonstrate how you could solve the problem.</p>\n"}], "owner": {"reputation": 9, "user_id": 6586319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f15d102fcdbf4911670d84fdeec9c113?s=128&d=identicon&r=PG&f=1", "display_name": "NuktukHotS", "link": "https://stackoverflow.com/users/6586319/nuktukhots"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 763, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1470256047, "creation_date": 1470254674, "question_id": 38752665, "link": "https://stackoverflow.com/questions/38752665/python-tkinter-gui-calculator", "title": "Python Tkinter GUI Calculator", "body": "<p>So I am currently in the process of making a GUI Calculator, but am unsure on how to write code that will perform the operations of the calculator. Right now I currently have setup the window, entry box, and calculator buttons, but none of them actually do anything at the moment. </p>\n\n<p>I am just confused on how these buttons are represented in code and so I am not sure how to write a block of code that will be able to read in these button inputs and perform addition,subtraction, etc. </p>\n\n<p>Here is my code so far </p>\n\n<pre><code>class Calculator(Frame):\ndef __init__(self,master):\n    Frame.__init__(self,master)\n    self.grid()\n\n    self.dataEnt = Entry(self)\n    self.dataEnt.grid(row = 0, column = 1, columnspan = 4)\n\n    labels =[['AC','%','/'],\n         ['7','8','9','*'],\n         ['4','5','6','-'],\n         ['1','2','3','+'],\n         ['0','.','=']]\n    label = Button(self,relief = RAISED, padx = 10, text = labels[0][0]) #AC\n    label.grid(row = 1, column = 0, columnspan = 2)\n    label = Button(self,relief = RAISED, padx = 10, text = labels[0][1]) # %\n    label.grid(row = 1, column = 3)\n    label = Button(self,relief = RAISED, padx = 10, text = labels[0][2]) # /\n    label.grid(row = 1, column = 4)\n    for r in range(1,4):\n        for c in range(4):\n            #create label for row r and column c \n            label = Button(self,relief = RAISED,\n                          padx = 10,\n                          text = labels[r][c]) # 789* 456- 123+ \n            # place label in row r and column c\n            label.grid(row = r+1, column = c+1)\n\n    label = Button(self,relief = RAISED, padx = 10, text = labels[4][0]) #0\n    label.grid(row = 5, column = 0, columnspan = 2)\n    label = Button(self,relief = RAISED, padx = 10, text = labels[4][1]) # .\n    label.grid(row = 5, column = 3)\n    label = Button(self,relief = RAISED, padx = 10, text = labels[4][2]) # =\n    label.grid(row = 5, column = 4)\n\n  def operations(self,num ):\n\ndef main():\n    root = Tk()\n    root.title('Calculator')\n    obj = Calculator(root)\n    root.mainloop()            \n</code></pre>\n\n<p><a href=\"http://i.stack.imgur.com/Oq7sV.png\" rel=\"nofollow\">and here is what the calculator looks like so far</a></p>\n\n<p>My guess is that I need to somehow be able to read the input as a string and then have python evaluate that string as a mathematical expression but I am not sure how to go about it. </p>\n\n<p>Thanks for any help!</p>\n"}, {"tags": ["python", "regex", "pandas", "merge", "fuzzy"], "comments": [{"owner": {"reputation": 1242, "user_id": 6657815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d9530b27299d0248df63719d13977f6?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav Dhama", "link": "https://stackoverflow.com/users/6657815/gaurav-dhama"}, "edited": false, "score": 0, "creation_date": 1470254866, "post_id": 38752653, "comment_id": 64879341, "body": "pre-process ID and ID2 to keep only 6 characters, wont that work!!"}, {"owner": {"reputation": 2996, "user_id": 3553228, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b48e7a43f7c3cca4a3826be398b8e32a?s=128&d=identicon&r=PG&f=1", "display_name": "Lisa", "link": "https://stackoverflow.com/users/3553228/lisa"}, "reply_to_user": {"reputation": 1242, "user_id": 6657815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d9530b27299d0248df63719d13977f6?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav Dhama", "link": "https://stackoverflow.com/users/6657815/gaurav-dhama"}, "edited": false, "score": 0, "creation_date": 1470254960, "post_id": 38752653, "comment_id": 64879395, "body": "@GauravDhama  it won&#39;t handle all of my situations. updated the question"}, {"owner": {"reputation": 24467, "user_id": 6207849, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb9d1a7dcb20c04510d19271281354b1?s=128&d=identicon&r=PG", "display_name": "Nickil Maveli", "link": "https://stackoverflow.com/users/6207849/nickil-maveli"}, "edited": false, "score": 0, "creation_date": 1470256154, "post_id": 38752653, "comment_id": 64879978, "body": "So, you want to slice both <code>ID</code> and <code>ID2</code> to contain 6 digits and if there&#39;s a match, then merge the two dataframes?"}], "answers": [{"comments": [{"owner": {"reputation": 2996, "user_id": 3553228, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b48e7a43f7c3cca4a3826be398b8e32a?s=128&d=identicon&r=PG&f=1", "display_name": "Lisa", "link": "https://stackoverflow.com/users/3553228/lisa"}, "edited": false, "score": 0, "creation_date": 1470255072, "post_id": 38752724, "comment_id": 64879464, "body": "Thanks @Noobie would you please post a sample code?"}, {"owner": {"reputation": 15196, "user_id": 1609428, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/TnnKE.jpg?s=128&g=1", "display_name": "\u2115\u0298\u0298\u1e06\u1e3d\u1e18", "link": "https://stackoverflow.com/users/1609428/%e2%84%95%ca%98%ca%98%e1%b8%86%e1%b8%bd%e1%b8%98"}, "reply_to_user": {"reputation": 2996, "user_id": 3553228, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b48e7a43f7c3cca4a3826be398b8e32a?s=128&d=identicon&r=PG&f=1", "display_name": "Lisa", "link": "https://stackoverflow.com/users/3553228/lisa"}, "edited": false, "score": 0, "creation_date": 1470256545, "post_id": 38752724, "comment_id": 64880161, "body": "sure look here <a href=\"http://stackoverflow.com/questions/37979167/how-to-parallelize-many-fuzzy-string-comparisons-using-apply-in-pandas\" title=\"how to parallelize many fuzzy string comparisons using apply in pandas\">stackoverflow.com/questions/37979167/&hellip;</a>. if you are satisfied you can accept. thanks!"}], "tags": [], "owner": {"reputation": 15196, "user_id": 1609428, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/TnnKE.jpg?s=128&g=1", "display_name": "\u2115\u0298\u0298\u1e06\u1e3d\u1e18", "link": "https://stackoverflow.com/users/1609428/%e2%84%95%ca%98%ca%98%e1%b8%86%e1%b8%bd%e1%b8%98"}, "is_accepted": true, "score": 3, "last_activity_date": 1470254897, "creation_date": 1470254897, "answer_id": 38752724, "question_id": 38752653, "link": "https://stackoverflow.com/questions/38752653/merge-dataframe-by-regular-expression-or-fuzzy-match/38752724#38752724", "title": "Merge Dataframe by regular expression or fuzzy match", "body": "<p>dude,</p>\n\n<p>I have had the same problem and the only solution is to use other python packages. Have a look at <code>fuzzywuzzy</code> for instance. Its very good.</p>\n\n<p>The general idea is that, for every row in d1, you will look for the row in d2 that has the highest fuzzy matching score.</p>\n"}], "owner": {"reputation": 2996, "user_id": 3553228, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b48e7a43f7c3cca4a3826be398b8e32a?s=128&d=identicon&r=PG&f=1", "display_name": "Lisa", "link": "https://stackoverflow.com/users/3553228/lisa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1215, "favorite_count": 0, "accepted_answer_id": 38752724, "answer_count": 1, "score": 3, "last_activity_date": 1470257398, "creation_date": 1470254625, "last_edit_date": 1470255050, "question_id": 38752653, "link": "https://stackoverflow.com/questions/38752653/merge-dataframe-by-regular-expression-or-fuzzy-match", "title": "Merge Dataframe by regular expression or fuzzy match", "body": "<p>I have d1 and d2 and I want to merge the two by ID column.\nHowever, the ID and ID2 are not exactly match. Instead, ID is the first 8 digit of ID2 (sometimes it can be the first 6 digit, or sometimes it can be one or two digit different).</p>\n\n<p>I understand that I can pre-process ID2 to keep only the first 8 digit. However, I cannot handle all the situations.</p>\n\n<p>I wonder is there an advanced way to merge through regular expression for fuzzy match? say, if the first 6 digits match, then merge?</p>\n\n<pre><code>d1=pd.DataFrame({'ID':['00846U10','01381710'],\n                      'count':[100,200]})\nd2=pd.DataFrame({'ID2':['00846U101','013817101','02376R102'],\n                'value':[1,5,6]})\n</code></pre>\n"}, {"tags": ["python", "django", "django-models"], "comments": [{"owner": {"reputation": 47988, "user_id": 267540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2v58W.jpg?s=128&g=1", "display_name": "e4c5", "link": "https://stackoverflow.com/users/267540/e4c5"}, "edited": false, "score": 1, "creation_date": 1470268627, "post_id": 38752611, "comment_id": 64884567, "body": "why don&#39;t you try posting on elance?"}], "owner": {"reputation": 359, "user_id": 3152844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7412d2846cd254ab8a30c5ef33e278ce?s=128&d=identicon&r=PG", "display_name": "osmay88", "link": "https://stackoverflow.com/users/3152844/osmay88"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 158, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1470257635, "creation_date": 1470254471, "last_edit_date": 1470257635, "question_id": 38752611, "link": "https://stackoverflow.com/questions/38752611/how-to-create-a-new-database-at-runtime-in-django", "title": "How to create a new database at runtime in django", "body": "<p>I\u00b4m writing an app in Django and I have this specific requirement that every user should have their own independent database using the existing models in the app. The flow should be like this:</p>\n\n<p>1(register new user) -> 2(Create the new database) -> 3(register Django DB list).</p>\n\n<p>Until now I have managed to solve the 1st and 3rd part but the second is causing me some troubles.What should be the better(right) approach to solve this problem?</p>\n\n<p>P.S Sorry for my awful English. </p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1470254604, "post_id": 38752592, "comment_id": 64879208, "body": "giving me error: which error?"}, {"owner": {"reputation": 1924, "user_id": 5516874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ioXgB.jpg?s=128&g=1", "display_name": "Jessica", "link": "https://stackoverflow.com/users/5516874/jessica"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1470254813, "post_id": 38752592, "comment_id": 64879311, "body": "please see my &#39;edit&#39; @Jean-Fran&#231;ois Fabre"}, {"owner": {"reputation": 56440, "user_id": 2285236, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ac8c2e0f71dbd8cf4543039bebf2ab3?s=128&d=identicon&r=PG&f=1", "display_name": "ayhan", "link": "https://stackoverflow.com/users/2285236/ayhan"}, "edited": false, "score": 0, "creation_date": 1470255030, "post_id": 38752592, "comment_id": 64879435, "body": "Why don&#39;t you use a regular loop instead of apply?"}, {"owner": {"reputation": 1924, "user_id": 5516874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ioXgB.jpg?s=128&g=1", "display_name": "Jessica", "link": "https://stackoverflow.com/users/5516874/jessica"}, "reply_to_user": {"reputation": 56440, "user_id": 2285236, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ac8c2e0f71dbd8cf4543039bebf2ab3?s=128&d=identicon&r=PG&f=1", "display_name": "ayhan", "link": "https://stackoverflow.com/users/2285236/ayhan"}, "edited": false, "score": 0, "creation_date": 1470255084, "post_id": 38752592, "comment_id": 64879472, "body": "i can use a regular loop but what goes in the place of &#39;&#39;{}.txt&#39;.format(gp.VG.name)&#39; ?   it is obviously not giving me the names of the VG values.  @ayhan"}, {"owner": {"reputation": 26041, "user_id": 3339965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ac89d084d3bc5dc083bad3ea5518f11?s=128&d=identicon&r=PG&f=1", "display_name": "root", "link": "https://stackoverflow.com/users/3339965/root"}, "edited": false, "score": 0, "creation_date": 1470255247, "post_id": 38752592, "comment_id": 64879542, "body": "Use <code>gp.VG.iloc[0]</code> instead of <code>gp.VG.name</code> if you want the VG value."}, {"owner": {"reputation": 1924, "user_id": 5516874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ioXgB.jpg?s=128&g=1", "display_name": "Jessica", "link": "https://stackoverflow.com/users/5516874/jessica"}, "reply_to_user": {"reputation": 26041, "user_id": 3339965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ac89d084d3bc5dc083bad3ea5518f11?s=128&d=identicon&r=PG&f=1", "display_name": "root", "link": "https://stackoverflow.com/users/3339965/root"}, "edited": false, "score": 0, "creation_date": 1470255365, "post_id": 38752592, "comment_id": 64879606, "body": "@root  error says  AtributeError: &#39;str&#39; object has no attribute &#39;name&#39;"}, {"owner": {"reputation": 56440, "user_id": 2285236, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ac8c2e0f71dbd8cf4543039bebf2ab3?s=128&d=identicon&r=PG&f=1", "display_name": "ayhan", "link": "https://stackoverflow.com/users/2285236/ayhan"}, "edited": false, "score": 0, "creation_date": 1470255385, "post_id": 38752592, "comment_id": 64879612, "body": "If you iterate over a regular loop than it will return a tuple, that tuples first element will be for VG. <code>grp[0][1]</code>"}, {"owner": {"reputation": 1924, "user_id": 5516874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ioXgB.jpg?s=128&g=1", "display_name": "Jessica", "link": "https://stackoverflow.com/users/5516874/jessica"}, "reply_to_user": {"reputation": 56440, "user_id": 2285236, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ac8c2e0f71dbd8cf4543039bebf2ab3?s=128&d=identicon&r=PG&f=1", "display_name": "ayhan", "link": "https://stackoverflow.com/users/2285236/ayhan"}, "edited": false, "score": 0, "creation_date": 1470255627, "post_id": 38752592, "comment_id": 64879730, "body": "@ayhan  can you write an answer? i am a beginner and i&#39;m not very good at syntax, i tried  for g in dp.group:     g.to_cvs(&#39;{}.txt&#39;.format(g[0][1].name), sep=&#39;\\t&#39;, index=False))   which failed."}, {"owner": {"reputation": 26041, "user_id": 3339965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ac89d084d3bc5dc083bad3ea5518f11?s=128&d=identicon&r=PG&f=1", "display_name": "root", "link": "https://stackoverflow.com/users/3339965/root"}, "edited": false, "score": 0, "creation_date": 1470255676, "post_id": 38752592, "comment_id": 64879749, "body": "@Jessica: Do you still have a <code>.name</code> on there?  It should just end in <code>.iloc[0]</code> with no <code>.name</code>.  With just <code>.iloc[0]</code> it works for me, and the error you mentioned doesn&#39;t make sense otherwise."}], "answers": [{"comments": [{"owner": {"reputation": 1924, "user_id": 5516874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ioXgB.jpg?s=128&g=1", "display_name": "Jessica", "link": "https://stackoverflow.com/users/5516874/jessica"}, "edited": false, "score": 0, "creation_date": 1470254720, "post_id": 38752660, "comment_id": 64879266, "body": "my actual file contains 1 millions lines with millions of combinations for the groupby"}, {"owner": {"reputation": 12837, "user_id": 2184364, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fe15cfa3ec22be57f1762ba905c8eb70?s=128&d=identicon&r=PG", "display_name": "Julien Spronck", "link": "https://stackoverflow.com/users/2184364/julien-spronck"}, "reply_to_user": {"reputation": 1924, "user_id": 5516874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ioXgB.jpg?s=128&g=1", "display_name": "Jessica", "link": "https://stackoverflow.com/users/5516874/jessica"}, "edited": false, "score": 0, "creation_date": 1470254797, "post_id": 38752660, "comment_id": 64879304, "body": "ah i see, that would be a problem :-)"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1470255284, "post_id": 38752660, "comment_id": 64879565, "body": "can you actually open a file containing <code>*</code> ?"}, {"owner": {"reputation": 12837, "user_id": 2184364, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fe15cfa3ec22be57f1762ba905c8eb70?s=128&d=identicon&r=PG", "display_name": "Julien Spronck", "link": "https://stackoverflow.com/users/2184364/julien-spronck"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1470255395, "post_id": 38752660, "comment_id": 64879617, "body": "@Jean-Fran&#231;oisFabre Yes it is possible"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1470255505, "post_id": 38752660, "comment_id": 64879667, "body": "Not on windows it&#39;s not."}, {"owner": {"reputation": 12837, "user_id": 2184364, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fe15cfa3ec22be57f1762ba905c8eb70?s=128&d=identicon&r=PG", "display_name": "Julien Spronck", "link": "https://stackoverflow.com/users/2184364/julien-spronck"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1470255556, "post_id": 38752660, "comment_id": 64879692, "body": "@Jean-Fran&#231;oisFabre ah that might be true, it works on mac."}], "tags": [], "owner": {"reputation": 12837, "user_id": 2184364, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fe15cfa3ec22be57f1762ba905c8eb70?s=128&d=identicon&r=PG", "display_name": "Julien Spronck", "link": "https://stackoverflow.com/users/2184364/julien-spronck"}, "is_accepted": false, "score": 0, "last_activity_date": 1470254765, "last_edit_date": 1470254765, "creation_date": 1470254663, "answer_id": 38752660, "question_id": 38752592, "link": "https://stackoverflow.com/questions/38752592/output-file-with-names-from-groupby-results-pandas-python/38752660#38752660", "title": "output file with names from groupby results pandas python", "body": "<p>You don't need groupby, you can just select the rows you need and convert them to text file.</p>\n\n<pre><code>import pandas as pd\ndf = {'READID': [1,1,1  ,1,1    ,5,5    ,5,5],\n  'VG': ['LV5-F*01','LV5-F*01'  ,'LV5-F*01','LV5-F*01','LV5-F*01','LV5-A*01','LV5-A*01','LV5-A*01','LV5-A*01'],\n  'Pro': [1,1,1,1,1,2,2,2,2]}\ndf = pd.DataFrame(df)\n\nwith open('LV5-F*01.txt', 'w') as fil:\n    fil.write(df[df['VG'] == 'LV5-F*01'].to_string())\n\nwith open('LV5-A*01.txt', 'w') as fil:\n    fil.write(df[df['VG'] == 'LV5-A*01'].to_string())\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 56440, "user_id": 2285236, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ac8c2e0f71dbd8cf4543039bebf2ab3?s=128&d=identicon&r=PG&f=1", "display_name": "ayhan", "link": "https://stackoverflow.com/users/2285236/ayhan"}, "is_accepted": true, "score": 0, "last_activity_date": 1470255761, "creation_date": 1470255761, "answer_id": 38752953, "question_id": 38752592, "link": "https://stackoverflow.com/questions/38752592/output-file-with-names-from-groupby-results-pandas-python/38752953#38752953", "title": "output file with names from groupby results pandas python", "body": "<pre><code>g = df.groupby(['READID','VG','Pro'])\nfor group in g:\n    group[1].to_csv('{}.txt'.format(group[0][1]), sep='\\t', index=False)\n</code></pre>\n\n<p>You might want to strip <code>*</code> character if it causes problems.</p>\n\n<p>Also note that you group on three keys but using only one key as the file name. It may overwrite other files with the same key.</p>\n"}], "owner": {"reputation": 1924, "user_id": 5516874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ioXgB.jpg?s=128&g=1", "display_name": "Jessica", "link": "https://stackoverflow.com/users/5516874/jessica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 173, "favorite_count": 0, "accepted_answer_id": 38752953, "answer_count": 2, "score": 1, "last_activity_date": 1470255761, "creation_date": 1470254419, "last_edit_date": 1470255260, "question_id": 38752592, "link": "https://stackoverflow.com/questions/38752592/output-file-with-names-from-groupby-results-pandas-python", "title": "output file with names from groupby results pandas python", "body": "<p>i have a sample dataset:</p>\n\n<pre><code>import pandas as pd\n\n\ndf = {'READID': [1,1,1  ,1,1    ,5,5    ,5,5],\n  'VG': ['LV5-F*01','LV5-F*01'  ,'LV5-F*01','LV5-F*01','LV5-F*01','LV5-A*01','LV5-A*01','LV5-A*01','LV5-A*01'],\n  'Pro': [1,1,1,1,1,2,2,2,2]}\n\ndf = pd.DataFrame(df)\n</code></pre>\n\n<p>it looks like :</p>\n\n<pre><code>df\nOut[23]: \n     Pro  READID     VG\n0    1       1   LV5-F*01\n1    1       1   LV5-F*01\n2    1       1   LV5-F*01\n3    1       1   LV5-F*01\n4    1       1   LV5-F*01\n5    2       5   LV5-A*01\n6    2       5   LV5-A*01\n7    2       5   LV5-A*01\n8    2       5   LV5-A*01\n</code></pre>\n\n<p>This is a sample dataset, the actual dataset contains many more columns and many many more rows with different combinations for the groupby, i want to groupby the 3 columns and output individual separate files with the VG as part of its name:</p>\n\n<p>desired output:</p>\n\n<pre><code>'LV5-F*01.txt':\n\n     Pro  READID     VG\n0    1       1   LV5-F*01\n1    1       1   LV5-F*01\n2    1       1   LV5-F*01\n3    1       1   LV5-F*01\n4    1       1   LV5-F*01\n\n'LV5-A*01.txt':\n\n    Pro  READID     VG\n5    2       5   LV5-A*01\n6    2       5   LV5-A*01\n7    2       5   LV5-A*01\n8    2       5   LV5-A*01\n</code></pre>\n\n<p>My attempt:</p>\n\n<pre><code>(df.groupby(['READID','VG','Pro'])\n.apply(lambda gp: gp.to_csv('{}.txt'.format(gp.VG.name), sep='\\t', index=False))\n )\n</code></pre>\n\n<p>however, the </p>\n\n<pre><code>  '{}.txt'.format(gp.VG.name) \n</code></pre>\n\n<p>part only produced a file named 'VG.txt' containing only 1 line which is not what i want. </p>\n"}, {"tags": ["python", "django", "security", "cookies"], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 5451310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00b02cda54337e97b3e0a06b1f3a82e3?s=128&d=identicon&r=PG&f=1", "display_name": "videodima", "link": "https://stackoverflow.com/users/5451310/videodima"}, "edited": false, "score": 0, "creation_date": 1470425472, "post_id": 38752679, "comment_id": 64963427, "body": "Excellent! I think that&#39;s exactly what I need, I&#39;ll fix that and run the security scan again. Would that fix the caching problem too since it has no age?"}, {"owner": {"reputation": 33207, "user_id": 1399491, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a1cb3dec3a6f3411ce3460276e44b292?s=128&d=identicon&r=PG", "display_name": "Alex W", "link": "https://stackoverflow.com/users/1399491/alex-w"}, "reply_to_user": {"reputation": 43, "user_id": 5451310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00b02cda54337e97b3e0a06b1f3a82e3?s=128&d=identicon&r=PG&f=1", "display_name": "videodima", "link": "https://stackoverflow.com/users/5451310/videodima"}, "edited": false, "score": 0, "creation_date": 1470693248, "post_id": 38752679, "comment_id": 65043824, "body": "I believe it should fix the caching issue as well"}], "tags": [], "owner": {"reputation": 33207, "user_id": 1399491, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a1cb3dec3a6f3411ce3460276e44b292?s=128&d=identicon&r=PG", "display_name": "Alex W", "link": "https://stackoverflow.com/users/1399491/alex-w"}, "is_accepted": false, "score": 5, "last_activity_date": 1470255088, "last_edit_date": 1470255088, "creation_date": 1470254728, "answer_id": 38752679, "question_id": 38752546, "link": "https://stackoverflow.com/questions/38752546/csrf-token-cookie-vulnerabilities-during-security-scan/38752679#38752679", "title": "CSRF token cookie vulnerabilities during security scan", "body": "<p>It sounds like you want to change the <a href=\"https://docs.djangoproject.com/en/1.9/ref/settings/#csrf-cookie-age\"><code>CSRF_COOKIE_AGE</code></a> setting to <code>None</code>:</p>\n\n<blockquote>\n  <p>Default: <strong>31449600</strong> (approximately 1 year, in seconds)</p>\n  \n  <p>The age of CSRF cookies, in seconds.</p>\n  \n  <p>The reason for setting a long-lived expiration time is to avoid\n  problems in the case of a user closing a browser or bookmarking a page\n  and then loading that page from a browser cache. Without persistent\n  cookies, the form submission would fail in this case.</p>\n  \n  <p>Some browsers (specifically Internet Explorer) can disallow the use of\n  persistent cookies or can have the indexes to the cookie jar corrupted\n  on disk, thereby causing CSRF protection checks to (sometimes\n  intermittently) fail. <em>Change this setting to <strong>None</strong> to use session-based\n  CSRF cookies, which keep the cookies in-memory instead of on\n  persistent storage.</em></p>\n</blockquote>\n\n<p>That will cause it to be a session cookie instead of a persistent cookie.  Session cookies don't have an expiration date so the browser holds them in memory for the current browser session only and then deletes them when the session is over.</p>\n\n<p>You can find info on how to change the Django setting <a href=\"https://docs.djangoproject.com/en/1.9/topics/settings/\">here</a>.</p>\n"}], "owner": {"reputation": 43, "user_id": 5451310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00b02cda54337e97b3e0a06b1f3a82e3?s=128&d=identicon&r=PG&f=1", "display_name": "videodima", "link": "https://stackoverflow.com/users/5451310/videodima"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 377, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1470323292, "creation_date": 1470254236, "last_edit_date": 1470323292, "question_id": 38752546, "link": "https://stackoverflow.com/questions/38752546/csrf-token-cookie-vulnerabilities-during-security-scan", "title": "CSRF token cookie vulnerabilities during security scan", "body": "<p>I am making a simple website for my employer using Django, and I had to run the code through a security scan to test for vulnerabilities. One of the issues is cookie vulnerabilities that I can find documentation to find for.</p>\n\n<p>The cookie vulnerabilities are raised when logging in to my website.</p>\n\n<p>Here is the error - the scan is run by OCIO-Internet-Scan</p>\n\n<blockquote>\n  <p>CVSS: 5.0 Message: csrftoken Cookie has problem(s) <code>csrftoken =</code>\n  <code>J4S6ZO7ssz4TUIlRNv9d95mCFomAbXO1; Host = [removed] Path = /</code></p>\n  \n  <ol>\n  <li>Cookie can be cached.</li>\n  <li>Cookie is persistent. Cookie expires at : Wed, 07 Jun 2017</li>\n  </ol>\n  \n  <p>Persistent session-handling cookies: When a session-handling cookie is\n  set persistently, it allows the cookie to be valid even after a user\n  terminates a session. Therefore an attacker can use a session cookie\n  stored as a text file by the browser to access restricted information.\n  Cacheable cookies: A cachable cookie could be cached at a proxy or a\n  gateway. It can result in serving a cookie value that is out of date\n  or stale. An attacker may also steal such cookies if he has\n  compromised that proxy or gateway.</p>\n</blockquote>\n\n<p>My question is, where exactly can I make changes to the csrftoken behavior for this? I can't find it using google, and I cannot bring the website up until this is fixed. Am I even able to change how csrf acts to accommodate these errors?</p>\n"}, {"tags": ["python", "dataframe", "series"], "comments": [{"owner": {"reputation": 56440, "user_id": 2285236, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ac8c2e0f71dbd8cf4543039bebf2ab3?s=128&d=identicon&r=PG&f=1", "display_name": "ayhan", "link": "https://stackoverflow.com/users/2285236/ayhan"}, "edited": false, "score": 0, "creation_date": 1470254381, "post_id": 38752444, "comment_id": 64879081, "body": "I don&#39;t think it is related to your problem but you calculate the standard deviation in the code, not the mean."}, {"owner": {"reputation": 1657, "user_id": 3974476, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/88f06daddc0d94f9e85e71b20c294cf3?s=128&d=identicon&r=PG&f=1", "display_name": "AMisra", "link": "https://stackoverflow.com/users/3974476/amisra"}, "reply_to_user": {"reputation": 56440, "user_id": 2285236, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ac8c2e0f71dbd8cf4543039bebf2ab3?s=128&d=identicon&r=PG&f=1", "display_name": "ayhan", "link": "https://stackoverflow.com/users/2285236/ayhan"}, "edited": false, "score": 0, "creation_date": 1470256008, "post_id": 38752444, "comment_id": 64879905, "body": "Thanks, I updated the code with  mean"}], "answers": [{"tags": [], "owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "is_accepted": true, "score": 2, "last_activity_date": 1470255369, "creation_date": 1470255369, "answer_id": 38752851, "question_id": 38752444, "link": "https://stackoverflow.com/questions/38752444/get-mean-for-all-columns-in-a-dataframe-and-create-a-new-dataframe/38752851#38752851", "title": "get mean for all columns in a dataframe and create a new dataframe", "body": "<p>Your question implies that you want a new DataFrame with a single row.</p>\n\n<pre><code>In [10]: df.head(10)\nOut[10]: \n                            0         1         2         3\n2011-01-01 00:00:00  0.182481  0.523784  0.718124  0.063792\n2011-01-01 01:00:00  0.321362  0.404686  0.481889  0.524521\n2011-01-01 02:00:00  0.514426  0.735809  0.433758  0.392824\n2011-01-01 03:00:00  0.616802  0.149099  0.217199  0.155990\n2011-01-01 04:00:00  0.525465  0.439633  0.641974  0.270364\n2011-01-01 05:00:00  0.749662  0.151958  0.200913  0.219916\n2011-01-01 06:00:00  0.665164  0.396595  0.980862  0.560119\n2011-01-01 07:00:00  0.797803  0.377273  0.273724  0.220965\n2011-01-01 08:00:00  0.651989  0.553929  0.769008  0.545288\n2011-01-01 09:00:00  0.692169  0.261194  0.400704  0.118335\n\nIn [11]: df.tail()\nOut[11]: \n                            0         1         2         3\n2011-01-03 19:00:00  0.247211  0.539330  0.734206  0.781125\n2011-01-03 20:00:00  0.278550  0.534943  0.804949  0.137291\n2011-01-03 21:00:00  0.602246  0.108791  0.987120  0.455887\n2011-01-03 22:00:00  0.003097  0.436435  0.987877  0.046066\n2011-01-03 23:00:00  0.604916  0.670532  0.513927  0.610775\n\n\nIn [12]: df.mean()\nOut[12]: \n0    0.495307\n1    0.477509\n2    0.562590\n3    0.447997\ndtype: float64\n\nIn [13]: new_df = pd.DataFrame(df.mean().to_dict(),index=[df.index.values[-1]])\n\nIn [14]: new_df\nOut[14]: \n                            0         1        2         3\n2011-01-03 23:00:00  0.495307  0.477509  0.56259  0.447997\n\nIn [15]: new_df.rename(columns=lambda c: \"mean_\"+str(c))\nOut[15]: \n                       mean_0    mean_1   mean_2    mean_3\n2011-01-03 23:00:00  0.495307  0.477509  0.56259  0.447997\n</code></pre>\n"}], "owner": {"reputation": 1657, "user_id": 3974476, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/88f06daddc0d94f9e85e71b20c294cf3?s=128&d=identicon&r=PG&f=1", "display_name": "AMisra", "link": "https://stackoverflow.com/users/3974476/amisra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3451, "favorite_count": 0, "accepted_answer_id": 38752851, "answer_count": 1, "score": 1, "last_activity_date": 1470255951, "creation_date": 1470253823, "last_edit_date": 1470255951, "question_id": 38752444, "link": "https://stackoverflow.com/questions/38752444/get-mean-for-all-columns-in-a-dataframe-and-create-a-new-dataframe", "title": "get mean for all columns in a dataframe and create a new dataframe", "body": "<p>I have a  dataframe with only numeric values and I want to calculate the mean for every column and create a new dataframe.<br>\nThe original dataframe is indexed by a datetimefield. The new dataframe should be indexed by the same field as original dataframe with a value equal to last row index of original dataframe.</p>\n\n<p>Code so far</p>\n\n<pre><code>mean_series=df.mean()     \ndf_mean= pd.DataFrame(stddev_series)\ndf_mean.rename(columns=lambda x: 'std_dev_'+ x, inplace=True)\n</code></pre>\n\n<p>but this gives an error</p>\n\n<pre><code>df_mean.rename(columns=lambda x: 'std_mean_'+ x, inplace=True)\nTypeError: ufunc 'add' did not contain a loop with signature matching types dtype('S21') dtype('S21') dtype('S21')\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 10604, "user_id": 5230901, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/85fb790721ad6b8004cbcb9c9d35c24c?s=128&d=identicon&r=PG&f=1", "display_name": "Pythonista", "link": "https://stackoverflow.com/users/5230901/pythonista"}, "edited": false, "score": 0, "creation_date": 1470253956, "post_id": 38752431, "comment_id": 64878868, "body": "<code>edl_loading</code> in <code>edl_flashing</code> is local to that function."}], "answers": [{"comments": [{"owner": {"reputation": 3601, "user_id": 4786305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dWJCM.png?s=128&g=1", "display_name": "Erba Aitbayev", "link": "https://stackoverflow.com/users/4786305/erba-aitbayev"}, "edited": false, "score": 0, "creation_date": 1474987774, "post_id": 38752484, "comment_id": 66753001, "body": "If this answer or any other one solved your issue, please mark it as accepted. Not only for the question, but for any other questions that you would ask in future."}], "tags": [], "owner": {"reputation": 42750, "user_id": 189134, "user_type": "moderator", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jFsyb.png?s=128&g=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/189134/andy"}, "is_accepted": false, "score": 1, "last_activity_date": 1470254011, "creation_date": 1470254011, "answer_id": 38752484, "question_id": 38752431, "link": "https://stackoverflow.com/questions/38752431/how-do-i-set-a-global-variable-via-function-call/38752484#38752484", "title": "How do I set a global variable via function call?", "body": "<p>You need to use the <code>global</code> in both of your functions - <code>main</code> and <code>edl_flashing</code></p>\n\n<pre><code>def edl_flashing():\n    global edl_loading\n    edl_loading = True\n    print edl_loading\n</code></pre>\n\n<p>Without the global declaration in the function, the variable name is local to the function.</p>\n\n<p>The above change prints out</p>\n\n<pre><code>False\nTrue\nTrue\n</code></pre>\n"}], "owner": {"reputation": 881, "user_id": 6645845, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3a2fb114750ce2d34e3e07b594feed5e?s=128&d=identicon&r=PG&f=1", "display_name": "Ritz", "link": "https://stackoverflow.com/users/6645845/ritz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1470254011, "creation_date": 1470253750, "question_id": 38752431, "link": "https://stackoverflow.com/questions/38752431/how-do-i-set-a-global-variable-via-function-call", "title": "How do I set a global variable via function call?", "body": "<p>I am trying to change the value of global variable <code>edl_loading</code> to <code>True</code> in function <code>edl_flashing</code> ,somehow it doesn't work?can anyone help understand why does <code>print edl_loading</code> prints <code>False</code> after call to <code>edl_flashing</code> in which I change the value to <code>True</code></p>\n\n<pre><code>def edl_flashing():\n    edl_loading = True\n    print edl_loading\n\n\ndef main ():\n    global edl_loading\n    edl_loading = False\n    print edl_loading\n    edl_flashing()\n    print edl_loading #Why this prints as False\nif __name__ == '__main__':\n    main()\n</code></pre>\n\n<p>OUTPUT:-</p>\n\n<pre><code>False\nTrue\nFalse\n</code></pre>\n"}, {"tags": ["python", "matplotlib"], "answers": [{"comments": [{"owner": {"reputation": 1395, "user_id": 6359147, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/7a72bf7b3d8598739568189ccd448ecc?s=128&d=identicon&r=PG&f=1", "display_name": "vandelay", "link": "https://stackoverflow.com/users/6359147/vandelay"}, "edited": false, "score": 0, "creation_date": 1470255942, "post_id": 38752824, "comment_id": 64879873, "body": "Thanks for pointing out cfg. I found out I could give a number to the figures as I instantiate them. self.figure1 = plt.figure(1) and then set the cfg with plt.figure(1)."}, {"owner": {"reputation": 1516, "user_id": 2768172, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c0aa1896ab14d2afa69d0e13d1bcad2b?s=128&d=identicon&r=PG&f=1", "display_name": "pathoren", "link": "https://stackoverflow.com/users/2768172/pathoren"}, "reply_to_user": {"reputation": 1395, "user_id": 6359147, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/7a72bf7b3d8598739568189ccd448ecc?s=128&d=identicon&r=PG&f=1", "display_name": "vandelay", "link": "https://stackoverflow.com/users/6359147/vandelay"}, "edited": false, "score": 1, "creation_date": 1470256174, "post_id": 38752824, "comment_id": 64879986, "body": "You are right!  I think I overdid it a bit, it should indeed be better to just update the current figure.  The a look at this previous answer <a href=\"http://stackoverflow.com/questions/7986567/matplotlib-how-to-set-the-current-figure\" title=\"matplotlib how to set the current figure\">stackoverflow.com/questions/7986567/&hellip;</a> .   It suggest that you can even call your figures by a string and not just <code>figure(1)</code>."}], "tags": [], "owner": {"reputation": 1516, "user_id": 2768172, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c0aa1896ab14d2afa69d0e13d1bcad2b?s=128&d=identicon&r=PG&f=1", "display_name": "pathoren", "link": "https://stackoverflow.com/users/2768172/pathoren"}, "is_accepted": true, "score": 2, "last_activity_date": 1470255288, "creation_date": 1470255288, "answer_id": 38752824, "question_id": 38752242, "link": "https://stackoverflow.com/questions/38752242/dynamicly-add-a-new-subplot2grid-to-a-figure/38752824#38752824", "title": "Dynamicly add a new subplot2grid to a figure", "body": "<p>Looking into the source code of <code>matplotlib</code>, the <code>subplot2grid</code>-function is defined in the following way:</p>\n\n<pre><code>def subplot2grid(shape, loc, rowspan=1, colspan=1, **kwargs):\n    \"\"\"\n    Create a subplot in a grid.  The grid is specified by *shape*, at\n    location of *loc*, spanning *rowspan*, *colspan* cells in each\n    direction.  The index for loc is 0-based. ::\n\n      subplot2grid(shape, loc, rowspan=1, colspan=1)\n\n    is identical to ::\n\n      gridspec=GridSpec(shape[0], shape[2])\n      subplotspec=gridspec.new_subplotspec(loc, rowspan, colspan)\n      subplot(subplotspec)\n    \"\"\"\n\n    fig = gcf()  #  &lt;-------- HERE\n    s1, s2 = shape\n    subplotspec = GridSpec(s1, s2).new_subplotspec(loc,\n                                                   rowspan=rowspan,\n                                                   colspan=colspan)\n    a = fig.add_subplot(subplotspec, **kwargs)\n    bbox = a.bbox\n    byebye = []\n    for other in fig.axes:\n        if other==a: continue\n        if bbox.fully_overlaps(other.bbox):\n            byebye.append(other)\n    for ax in byebye: delaxes(ax)\n\n    draw_if_interactive()\n    return a\n</code></pre>\n\n<p>As you can see from my comment \"HERE\" in the code snippet, it is only using the active figure, i.e. <code>fig = gcf()</code> (gcf is short for \"get current figure\").</p>\n\n<p>Achieving your goal should be easily done by modifying the function slightly and put it into your script.</p>\n\n<pre><code>from matplotlib.gridspec import GridSpec\nfrom matplotlib.backends import pylab_setup\n_backend_mod, new_figure_manager, draw_if_interactive, _show = pylab_setup()\n\ndef my_subplot2grid(fig, shape, loc, rowspan=1, colspan=1, **kwargs):\n\n    s1, s2 = shape\n    subplotspec = GridSpec(s1, s2).new_subplotspec(loc,\n                                                   rowspan=rowspan,\n                                                   colspan=colspan)\n    a = fig.add_subplot(subplotspec, **kwargs)\n    bbox = a.bbox\n    byebye = []\n    for other in fig.axes:\n        if other==a: continue\n        if bbox.fully_overlaps(other.bbox):\n            byebye.append(other)\n    for ax in byebye: delaxes(ax)\n\n    draw_if_interactive()\n    return a\n</code></pre>\n\n<p>Now it should be possible to do your thing, with a modification to your function call as</p>\n\n<pre><code>ax = plt.my_subplot2grid(self.figure1, (4,4), (0,0), rowspan=3, colspan=4)\n</code></pre>\n\n<p>Hope it helps!</p>\n"}], "owner": {"reputation": 1395, "user_id": 6359147, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/7a72bf7b3d8598739568189ccd448ecc?s=128&d=identicon&r=PG&f=1", "display_name": "vandelay", "link": "https://stackoverflow.com/users/6359147/vandelay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 527, "favorite_count": 0, "accepted_answer_id": 38752824, "answer_count": 1, "score": 0, "last_activity_date": 1470255288, "creation_date": 1470253016, "last_edit_date": 1470254031, "question_id": 38752242, "link": "https://stackoverflow.com/questions/38752242/dynamicly-add-a-new-subplot2grid-to-a-figure", "title": "Dynamicly add a new subplot2grid to a figure", "body": "<p>I have an application that have 3 figures, and dynamicaly change them. For now it's been working fine by using <code>add_subplot()</code> to the figure. But now I have to make my graphs more complex, and need to use <code>subplot2grid()</code></p>\n\n<pre><code>self.figure1 = plt.figure()\nself.canvas1 = FigureCanvas(self.figure1)\nself.graphtoolbar1 = NavigationToolbar(self.canvas1, frameGraph1)\n\nself.figure3 = plt.figure()\nself.canvas3 = FigureCanvas(self.figure3)\nself.graphtoolbar3 = NavigationToolbar(self.canvas3, frameGraph3)\n\nself.figure4 = plt.figure()\nself.canvas4 = FigureCanvas(self.figure4)\nself.graphtoolbar4 = NavigationToolbar(self.canvas4, frameGraph4)\n</code></pre>\n\n<p>And here's the code that adds it, and what I've got so far.</p>\n\n<pre><code>#ax = self.figure1.add_subplot(2,1,1) &lt;---- What I used to do\n\nfig = self.figure1\nax = plt.subplot2grid((4,4), (0,0), rowspan=3, colspan=4) # &lt;--- what I'm trying to do\n\nax.hold(False)\nax.plot(df['Close'], 'b-')\nax.legend(loc=0)\nax.set_xlabel(\"Date\")\nax.set_ylabel(\"Price\")\nax.grid(True)\n\nfor tick in ax.get_xticklabels():\n     tick.set_rotation(20)            \n\nself.canvas1.draw()\n</code></pre>\n\n<p>The above adds it to figure 4. Probably because that's the latest instantiated by plt. But I'd like the above to add a subplot2grid to <code>self.figure1</code>, while still having the dynamicly abilities as before.</p>\n"}, {"tags": ["python", "newline"], "comments": [{"owner": {"reputation": 5127, "user_id": 5323213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c231bca62d8fc45d54fa169950c3701?s=128&d=identicon&r=PG&f=1", "display_name": "R Nar", "link": "https://stackoverflow.com/users/5323213/r-nar"}, "edited": false, "score": 0, "creation_date": 1470253027, "post_id": 38752220, "comment_id": 64878401, "body": "change <code>&quot;%s\\n\\n&quot;</code> to <code>&quot;%s\\n&quot;</code> in your <code>listwrite</code> function"}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user1440897"}, "is_accepted": true, "score": 2, "last_activity_date": 1470253105, "creation_date": 1470253105, "answer_id": 38752272, "question_id": 38752220, "link": "https://stackoverflow.com/questions/38752220/remove-extra-newline-when-writing-to-a-file/38752272#38752272", "title": "remove extra newline when writing to a file", "body": "<pre><code>def listwrite(output_file,thelist):\n    for item in thelist:\n        item.encode('utf-8')\n        output_file.write(\"%s\\n\\n\" % item)\n</code></pre>\n\n<p>In the code, listwrite is defined as a function. For every <code>item</code> in <code>thelist</code>, it writes the <code>item</code>, followed by two newline characters. To remove the extra line, simply remove one of the <code>\\n</code>s.</p>\n\n<pre><code>def listwrite(output_file,thelist):\n    for item in thelist:\n        item.encode('utf-8')\n        output_file.write(\"%s\\n\" % item)\n</code></pre>\n"}], "owner": {"reputation": 1019, "user_id": 1024200, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/4d495e479ed7de5feb00d15a30e99262?s=128&d=identicon&r=PG", "display_name": "Fred Zimmerman", "link": "https://stackoverflow.com/users/1024200/fred-zimmerman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 871, "favorite_count": 0, "accepted_answer_id": 38752272, "answer_count": 1, "score": -2, "last_activity_date": 1470253128, "creation_date": 1470252910, "question_id": 38752220, "link": "https://stackoverflow.com/questions/38752220/remove-extra-newline-when-writing-to-a-file", "title": "remove extra newline when writing to a file", "body": "<p>This little script writes keywords to a file, but adds an extra newline between each keyword. How do I make it stop? I.e. instead of</p>\n\n<pre><code>Apple\n\nBanana\n\nCrayon \n</code></pre>\n\n<p>I want </p>\n\n<pre><code>Apple\nBanana\nCrayon\n</code></pre>\n\n<p>I tried Googling \"listwrite\" but didn't help.</p>\n\n<p>I am sure this is a very simple thing but I can't figure it out.</p>\n\n<pre><code>#!/usr/local/bin/python\n###################################################\n# nerv3.py\n# Goal: Named entity recognition script to pull names/place from text\n# called as python nerv3.py text_path_or_file \n#\n# Inputs:\n# path - text file or directory containing text files\n# output - output file name \n# uuid\n# Outputs:\n# Output file written\n# People, Places, Others files\n#\n###################################################\n\n#gonna need to install AlchemyAPI\nimport AlchemyAPI\nimport argparse\nimport xml.etree.ElementTree as ET\nimport collections\nimport codecs\nimport os\n#from IPython import embed \n#=================================================\ndef listwrite(output_file,thelist):\n    for item in thelist:\n        item.encode('utf-8')\n        output_file.write(\"%s\\n\\n\" % item)\n\n#=================================================\n\ndef main():\n\n    tmpdir = \"/tmp/pagekicker\"\n\n    #personal api key saved as api_key.txt\n    parser = argparse.ArgumentParser()\n    parser.add_argument('path', help = \"target file or directory for NER\")\n    parser.add_argument('output', help = \"target file for output\")\n    parser.add_argument('uuid', help = \"uuid\")\n    args = parser.parse_args()\n\n    in_file = args.path\n    out_file = args.output\n    uuid = args.uuid\n    folder = os.path.join(tmpdir, uuid)\n    print folder    \n    cwd = os.getcwd()\n    apikey_location = os.path.join(cwd, \"api_key.txt\")\n\n    with open(in_file) as f:\n        text = f.read()\n\n    alchemyObj = AlchemyAPI.AlchemyAPI()\n    alchemyObj.loadAPIKey(apikey_location)\n\n    result = alchemyObj.TextGetRankedNamedEntities(text)\n\n    root = ET.fromstring(result)\n\n    place_list = ['City', 'Continent', 'Country', 'Facility', 'GeographicFeature',\\\n    'Region', 'StateOrCounty']\n    People = {}\n    Places = {}\n    Other = {}\n\n    for entity in root.getiterator('entity'):\n        if entity[0].text == 'Person':\n            People[entity[3].text]=[entity[1].text, entity[2].text]\n        elif entity[0].text in place_list:\n            Places[entity[3].text] = [entity[1].text, entity[2].text]\n        else:\n            Other[entity[3].text] = [entity[1].text, entity[2].text]\n\n    #print lists ordered by relevance\n    Places_s = sorted(Places, key = Places.get, reverse = True)\n    People_s = sorted(People, key = People.get, reverse = True)\n    Other_s = sorted(Other, key = Other.get, reverse = True)\n\n# here is where things seem to go awry\n    with codecs.open(out_file, mode = 'w', encoding='utf-8') as o:\n        listwrite(o, People_s)\n        listwrite(o, Places_s)\n        listwrite(o, Other_s)\n    out_file = os.path.join(folder, 'People')\n    with codecs.open(out_file, mode= 'w', encoding='utf-8') as o:\n          listwrite(o, People_s)\n    out_file = os.path.join(folder, 'Places')\n        with codecs.open(out_file, mode= 'w', encoding='utf-8') as o:\n         listwrite(o, Places_s)\n    out_file = os.path.join(folder, 'Other')\n    with codecs.open(out_file, mode= 'w', encoding='utf-8') as o:\n          listwrite(o, Other_s)\n#=================================================\nif __name__ == '__main__':\n    main()\n</code></pre>\n"}, {"tags": ["python", "django", "django-rest-framework"], "answers": [{"tags": [], "owner": {"reputation": 907, "user_id": 1920391, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b844b572e4a3fcb07b132bbad4a90c37?s=128&d=identicon&r=PG", "display_name": "Titus P", "link": "https://stackoverflow.com/users/1920391/titus-p"}, "is_accepted": true, "score": 2, "last_activity_date": 1470253116, "creation_date": 1470253116, "answer_id": 38752275, "question_id": 38752198, "link": "https://stackoverflow.com/questions/38752198/in-drfdjango-rest-framework-if-model-has-two-foreignkeyfield-is-it-possible/38752275#38752275", "title": "In DRF(django-rest-framework), If model has two foreignkeyfield, is it possible to serialize?", "body": "<p>There is nothing wrong, you are just accessing the wrong attributes. If you look at your models, you define a related name to posts:</p>\n\n<p><code>post = models.ForeignKey('blog.Post', related_name='related_comments')</code></p>\n\n<p>So, when you write your serializer, the \"field\" you should be accessing should be the related name instead of comments. Change the serializer to:</p>\n\n<pre><code>class PostSerializer(serializers.ModelSerializer):\n    related_comments = serializers.PrimaryKeyRelatedField(many=True, read_only=True)\n    class Meta:\n        model = Post\n        fields = ('id', 'author', 'title', 'text', 'point', 'related_comments')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2088, "user_id": 6077223, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ui0Lc.jpg?s=128&g=1", "display_name": "M.Void", "link": "https://stackoverflow.com/users/6077223/m-void"}, "is_accepted": false, "score": 1, "last_activity_date": 1470255331, "creation_date": 1470255331, "answer_id": 38752835, "question_id": 38752198, "link": "https://stackoverflow.com/questions/38752198/in-drfdjango-rest-framework-if-model-has-two-foreignkeyfield-is-it-possible/38752835#38752835", "title": "In DRF(django-rest-framework), If model has two foreignkeyfield, is it possible to serialize?", "body": "<p>You can use <a href=\"http://www.django-rest-framework.org/api-guide/relations/#nested-relationships\" rel=\"nofollow\">Nested relationships</a></p>\n"}], "owner": {"reputation": 1462, "user_id": 6426449, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/ba2a99ff4a644cd839f842bf6efc7089?s=128&d=identicon&r=PG&f=1", "display_name": "touchingtwist", "link": "https://stackoverflow.com/users/6426449/touchingtwist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 38752275, "answer_count": 2, "score": 0, "last_activity_date": 1470255331, "creation_date": 1470252822, "question_id": 38752198, "link": "https://stackoverflow.com/questions/38752198/in-drfdjango-rest-framework-if-model-has-two-foreignkeyfield-is-it-possible", "title": "In DRF(django-rest-framework), If model has two foreignkeyfield, is it possible to serialize?", "body": "<p>I made django project through DRF.</p>\n\n<p>On my struggling with DRF, I getting wonder that it is possible to serializing these models.</p>\n\n<p><strong>models.py</strong></p>\n\n<pre><code>class Post(models.Model):\n    author = models.ForeignKey(User, related_name='related_postwriter')\n    title = models.CharField(max_length=200, blank = False)\n    text = models.TextField(blank = True)\n    created_date = models.DateTimeField(\n        default=timezone.now\n        )\n    point = models.PointField(null=False, blank=True)\n\n    def __str__(self):              # __unicode__ on Python 2\n        return self.title\n\nclass Comment(models.Model):\n    post = models.ForeignKey('blog.Post', related_name='related_comments')\n    author = models.ForeignKey(User, related_name='related_commentwriter')\n    text = models.TextField(max_length=500)\n    created_date = models.DateTimeField(default=timezone.now)\n\n    def __str__(self):\n        return self.text\n</code></pre>\n\n<p>There are two ForeignKey field in Comment model, i think it is maybe the reason serializer.py is very hard to deal with.</p>\n\n<p><strong>serializers.py</strong></p>\n\n<pre><code>class UserSerializer(serializers.ModelSerializer):\n    posts = serializers.PrimaryKeyRelatedField(many=True, read_only=True)\n    comments = serializers.PrimaryKeyRelatedField(many=True, read_only=True)\n    class Meta:\n        model = User\n        fields = ('id', 'username', 'email', 'posts')\n\nclass PostSerializer(serializers.ModelSerializer):\n    class Meta:\n        model = Post\n        fields = ('id', 'author', 'title', 'text', 'point')\n    def create(self, validated_data):\n        validated_data['author'] = self.context['request'].user\n        return super(PostSerializer, self).create(validated_data)\n\n\nclass CommentSerializer(serializers.ModelSerializer):\n    class Meta:\n        model = Comment\n        fields = ('id', 'post', 'author', 'text')\n    def create(self, validated_data):\n        validated_data['author'] = self.context['request'].user\n        return super(CommentSerializer, self).create(validated_data)\n</code></pre>\n\n<p>I thought <code>comments = serializers.PrimaryKeyRelatedField(many=True, read_only=True)</code>\nhave to be placed in <code>class PostSerializer(serializers.ModelSerializer):</code> also, but when i placed as i thought, there comes error <code>AssertionError at /posts/\nThe field 'comments' was declared on serializer PostSerializer, but has not been included in the 'fields' option.</code> so when i put 'comments' in ther field like </p>\n\n<pre><code>class PostSerializer(serializers.ModelSerializer):\n    comments = serializers.PrimaryKeyRelatedField(many=True, read_only=True)\n    class Meta:\n        model = Post\n        fields = ('id', 'author', 'title', 'text', 'point', 'comments')\n</code></pre>\n\n<p>then, -> <code>AttributeError at /posts/\n'Post' object has no attribute 'comments'</code> is occurred.</p>\n\n<p>What is my fault? </p>\n\n<p>Because I want make android app that user can read a post and comments 'related with the post' at the same time(like almost community websites, reddit, facebook...), <strong>serializers.py</strong> i posted is not enough. <strong>serializers.py</strong> i posted is not seems to be sufficient for reflecting relation between post and comment.</p>\n\n<p>Are there problem with comment model? Or am i wrong?</p>\n\n<p>I'm new, novice at programming, Please teach me. </p>\n\n<p>Thanks for reading.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 96714, "user_id": 198633, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5b9c04999233026354268c2ee4237e04?s=128&d=identicon&r=PG", "display_name": "inspectorG4dget", "link": "https://stackoverflow.com/users/198633/inspectorg4dget"}, "edited": false, "score": 3, "creation_date": 1470252869, "post_id": 38752193, "comment_id": 64878299, "body": "Was there a <code>__getitem__</code> defined in this class? We can&#39;t answer your question without seeing what the <code>__getitem__</code> does"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1470252933, "post_id": 38752193, "comment_id": 64878337, "body": "Also <code>__setitem__</code>, which is invoked for item assignment instead of item retrieval."}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1470253048, "post_id": 38752193, "comment_id": 64878411, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/20356401/setitem-and-getitem-python\">setitem and getitem -- python</a>"}, {"owner": {"reputation": 197, "user_id": 2536356, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/eac196ee6dfae24ba21e135406e85dff?s=128&d=identicon&r=PG", "display_name": "Rahul Sarma", "link": "https://stackoverflow.com/users/2536356/rahul-sarma"}, "edited": false, "score": 0, "creation_date": 1470253049, "post_id": 38752193, "comment_id": 64878412, "body": "Updated full code. Thanks mod"}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1470253105, "post_id": 38752193, "comment_id": 64878437, "body": "<code>self</code> is just a Tree, <code>self.__nodes</code> is a dictionary. <code>self[&#39;value&#39;]</code> uses that <code>__getitem__</code>"}], "answers": [{"comments": [{"owner": {"reputation": 197, "user_id": 2536356, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/eac196ee6dfae24ba21e135406e85dff?s=128&d=identicon&r=PG", "display_name": "Rahul Sarma", "link": "https://stackoverflow.com/users/2536356/rahul-sarma"}, "edited": false, "score": 0, "creation_date": 1470253277, "post_id": 38752271, "comment_id": 64878547, "body": "Okaayy...had never worked with Objects as dictionary in that way so overlooked that part. Thanks!"}], "tags": [], "owner": {"reputation": 9435, "user_id": 2626000, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/j8GY0.jpg?s=128&g=1", "display_name": "Aaron Christiansen", "link": "https://stackoverflow.com/users/2626000/aaron-christiansen"}, "is_accepted": true, "score": 3, "last_activity_date": 1470253104, "creation_date": 1470253104, "answer_id": 38752271, "question_id": 38752193, "link": "https://stackoverflow.com/questions/38752193/what-does-selfidentifier-some-value-do-in-this-code/38752271#38752271", "title": "What does self[identifier] = some_value do in this code?", "body": "<p>In the full example code, this is the important bit:</p>\n\n<pre><code>def __getitem__(self, key):\n    return self.__nodes[key]\n\ndef __setitem__(self, key, item):\n    self.__nodes[key] = item\n</code></pre>\n\n<p>These two 'magic methods', <code>__getitem__</code> and <code>__setitem__</code>, allow the class to be accessed like a list or dictionary would be, using the <code>foo[key]</code> syntax.</p>\n\n<p>So, in your case, if <code>foo</code> was a <code>Tree</code> instance, <code>foo[\"a\"] = \"b\"</code> would execute <code>__setitem__</code> with <code>key</code> as <code>\"a\"</code> and <code>item</code> as <code>\"b\"</code>, consequently mapping <code>key</code> to <code>item</code> in the <code>self.__nodes</code> dictionary.</p>\n"}, {"tags": [], "owner": {"reputation": 801, "user_id": 4645599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4de546dd50ee3d94a9aa98230c8275cc?s=128&d=identicon&r=PG", "display_name": "Jose Raul Barreras", "link": "https://stackoverflow.com/users/4645599/jose-raul-barreras"}, "is_accepted": false, "score": 1, "last_activity_date": 1470254300, "creation_date": 1470254300, "answer_id": 38752558, "question_id": 38752193, "link": "https://stackoverflow.com/questions/38752193/what-does-selfidentifier-some-value-do-in-this-code/38752558#38752558", "title": "What does self[identifier] = some_value do in this code?", "body": "<p>They are using the <code>__getitem__</code> magic method. This method is used in a class to allow its instances to use [] (indexer) operators for list indexing, dictionary lookups, or accessing ranges of values.</p>\n\n<p>In the fallowing sample, we have a list with some extra functionality like head and tail. Example taken from <a href=\"http://www.rafekettler.com/magicmethods.html\" rel=\"nofollow\">here</a>:</p>\n\n<pre><code>class FunctionalList:\n    '''A class wrapping a list with some extra functional magic, like head,\n    tail, init, last, drop, and take.'''\n\n    def __init__(self, values=None):\n        if values is None:\n            self.values = []\n        else:\n            self.values = values\n\n    def __len__(self):\n        return len(self.values)\n\n    def __getitem__(self, key):\n        # if key is of invalid type or value, the list values will raise the error\n        return self.values[key]\n\n    def __setitem__(self, key, value):\n        self.values[key] = value\n\n    def __delitem__(self, key):\n        del self.values[key]\n\n    def __iter__(self):\n        return iter(self.values)\n\n    def __reversed__(self):\n        return FunctionalList(reversed(self.values))\n\n    def append(self, value):\n        self.values.append(value)\n    def head(self):\n        # get the first element\n        return self.values[0]\n    def tail(self):\n        # get all elements after the first\n        return self.values[1:]\n    def init(self):\n        # get elements up to the last\n        return self.values[:-1]\n    def last(self):\n        # get last element\n        return self.values[-1]\n    def drop(self, n):\n        # get all elements except first n\n        return self.values[n:]\n    def take(self, n):\n        # get first n elements\n        return self.values[:n]\n</code></pre>\n"}], "owner": {"reputation": 197, "user_id": 2536356, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/eac196ee6dfae24ba21e135406e85dff?s=128&d=identicon&r=PG", "display_name": "Rahul Sarma", "link": "https://stackoverflow.com/users/2536356/rahul-sarma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 175, "favorite_count": 0, "accepted_answer_id": 38752271, "answer_count": 2, "score": 6, "last_activity_date": 1470254300, "creation_date": 1470252802, "last_edit_date": 1470253165, "question_id": 38752193, "link": "https://stackoverflow.com/questions/38752193/what-does-selfidentifier-some-value-do-in-this-code", "title": "What does self[identifier] = some_value do in this code?", "body": "<p>I was just trying to learn K-ary tree implementation in Python and came across this link:\n<a href=\"http://www.quesucede.com/page/show/id/python-3-tree-implementation\">http://www.quesucede.com/page/show/id/python-3-tree-implementation</a></p>\n\n<p>In the tree.py file, there is a section of code like this:</p>\n\n<pre><code>class Tree:\n\n    def __init__(self):\n        self.__nodes = {}\n\n    @property\n    def nodes(self):\n        return self.__nodes\n\n    def add_node(self, identifier, parent=None):\n        node = Node(identifier)\n        self[identifier] = node\n\n        if parent is not None:\n            self[parent].add_child(identifier)\n\n        return node\n\n    # ... ...\n\n    def __getitem__(self, key):\n        return self.__nodes[key]\n\n    def __setitem__(self, key, item):\n        self.__nodes[key] = item\n</code></pre>\n\n<p>What is <code>self[identifier]</code>? Is it a list? This is really confusing.\nCan someone explain and/or point me to some documentation of using self as a list?</p>\n"}, {"tags": ["python", "python-2.7", "pandas", "split", "multiple-columns"], "comments": [{"owner": {"reputation": 56440, "user_id": 2285236, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ac8c2e0f71dbd8cf4543039bebf2ab3?s=128&d=identicon&r=PG&f=1", "display_name": "ayhan", "link": "https://stackoverflow.com/users/2285236/ayhan"}, "edited": false, "score": 0, "creation_date": 1470254783, "post_id": 38752135, "comment_id": 64879289, "body": "Please don&#39;t use images to share data."}], "answers": [{"comments": [{"owner": {"reputation": 203, "user_id": 6581368, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/8c17e5a40a8fb608606e733f91485791?s=128&d=identicon&r=PG&f=1", "display_name": "yusuke0426", "link": "https://stackoverflow.com/users/6581368/yusuke0426"}, "edited": false, "score": 0, "creation_date": 1470258365, "post_id": 38752306, "comment_id": 64881051, "body": "Hi @bgporter ! Thank you so much for the advice! As for the suggested equation; s = &#39;&#39;&#39;{&quot;activities&quot;:[&quot;Tour&quot;],~} , do you think if I can make equation with dataframe with specific column? Since Json format is in info column in the pandas dataframe, I wanted to do something like s = dframe[&#39;info&#39;]  to extract all row in info column but it did not work..."}], "tags": [], "owner": {"reputation": 30464, "user_id": 203568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/914a7c50b970346e442b3e4b0a7e73f8?s=128&d=identicon&r=PG", "display_name": "bgporter", "link": "https://stackoverflow.com/users/203568/bgporter"}, "is_accepted": false, "score": 0, "last_activity_date": 1470253245, "creation_date": 1470253245, "answer_id": 38752306, "question_id": 38752135, "link": "https://stackoverflow.com/questions/38752135/python2-7-how-to-split-a-column-into-multiple-column-based-on-special-strings-l/38752306#38752306", "title": "Python2.7: How to split a column into multiple column based on special strings like this?", "body": "<p>It looks like the content of the <code>info</code> column is JSON-formatted, so you can parse that into a dict object easily:</p>\n\n<pre><code>&gt;&gt;&gt; import json\n&gt;&gt;&gt; s = '''{\"activities\": [\"Tour\"], \"locations\": [\"Tokyo\"], \"groups\": []}'''\n&gt;&gt;&gt; j = json.loads(s)\n&gt;&gt;&gt; j\n{u'activities': [u'Tour'], u'locations': [u'Tokyo'], u'groups': []}\n</code></pre>\n\n<p>Once you have the data as a dict, you can do whatever you like with it. </p>\n"}, {"comments": [{"owner": {"reputation": 1242, "user_id": 6657815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d9530b27299d0248df63719d13977f6?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav Dhama", "link": "https://stackoverflow.com/users/6657815/gaurav-dhama"}, "edited": false, "score": 0, "creation_date": 1470257675, "post_id": 38752523, "comment_id": 64880734, "body": "Actually you dont need json since you already have a dictionary, sorry for overlooking. I have edited the code, please check if you get the right answer"}, {"owner": {"reputation": 203, "user_id": 6581368, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/8c17e5a40a8fb608606e733f91485791?s=128&d=identicon&r=PG&f=1", "display_name": "yusuke0426", "link": "https://stackoverflow.com/users/6581368/yusuke0426"}, "edited": false, "score": 0, "creation_date": 1470257677, "post_id": 38752523, "comment_id": 64880735, "body": "Thanks for the advice! I run the code and I got an error.. It says &quot;TypeError: cannot convert the series to &lt;type &#39;int&#39;&gt;&quot;. I am not sure what is causing this error, but I think for loop is causing the problem.. There is an arrow pointing for loop in error output. Do you have any idea how to solve the problem? @Gaurav Dhama"}, {"owner": {"reputation": 203, "user_id": 6581368, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/8c17e5a40a8fb608606e733f91485791?s=128&d=identicon&r=PG&f=1", "display_name": "yusuke0426", "link": "https://stackoverflow.com/users/6581368/yusuke0426"}, "edited": false, "score": 0, "creation_date": 1470257894, "post_id": 38752523, "comment_id": 64880834, "body": "Hi! Thanks for providing the revised version! I tried it and still get the error, which says &quot;TypeError: cannot convert the series to &lt;type &#39;int&#39;&gt;&quot;... I would appreciate if you could provide any insight on this:)"}, {"owner": {"reputation": 1242, "user_id": 6657815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d9530b27299d0248df63719d13977f6?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav Dhama", "link": "https://stackoverflow.com/users/6657815/gaurav-dhama"}, "reply_to_user": {"reputation": 203, "user_id": 6581368, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/8c17e5a40a8fb608606e733f91485791?s=128&d=identicon&r=PG&f=1", "display_name": "yusuke0426", "link": "https://stackoverflow.com/users/6581368/yusuke0426"}, "edited": false, "score": 0, "creation_date": 1470258416, "post_id": 38752523, "comment_id": 64881069, "body": "Can you post the output of print(df[&#39;info&#39;])"}, {"owner": {"reputation": 203, "user_id": 6581368, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/8c17e5a40a8fb608606e733f91485791?s=128&d=identicon&r=PG&f=1", "display_name": "yusuke0426", "link": "https://stackoverflow.com/users/6581368/yusuke0426"}, "edited": false, "score": 0, "creation_date": 1470258929, "post_id": 38752523, "comment_id": 64881320, "body": "I could not figure out how to attach image here,  but print[&#39;info&#39;] shows like this. 0        {&quot;activities&quot;:[&quot;174::Sailing&quot;],&quot;locations&quot;:[],... 1        {&quot;activities&quot;:[&quot;239::Archaeological Exploratio... 2        {&quot;activities&quot;:[&quot;239::Mayan Ruin&quot;],&quot;locations&quot;:... 3        {&quot;activities&quot;:[&quot;190::Wildlife Safari&quot;],&quot;locati... 4        {&quot;activities&quot;:[],&quot;locations&quot;:[],&quot;groups&quot;:[],&quot;s... 5        {&quot;activities&quot;:[],&quot;locations&quot;:[],&quot;groups&quot;:[],&quot;s..."}, {"owner": {"reputation": 203, "user_id": 6581368, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/8c17e5a40a8fb608606e733f91485791?s=128&d=identicon&r=PG&f=1", "display_name": "yusuke0426", "link": "https://stackoverflow.com/users/6581368/yusuke0426"}, "edited": false, "score": 0, "creation_date": 1470259225, "post_id": 38752523, "comment_id": 64881435, "body": "I uploaded a screenshot:)"}, {"owner": {"reputation": 1242, "user_id": 6657815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d9530b27299d0248df63719d13977f6?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav Dhama", "link": "https://stackoverflow.com/users/6657815/gaurav-dhama"}, "reply_to_user": {"reputation": 203, "user_id": 6581368, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/8c17e5a40a8fb608606e733f91485791?s=128&d=identicon&r=PG&f=1", "display_name": "yusuke0426", "link": "https://stackoverflow.com/users/6581368/yusuke0426"}, "edited": false, "score": 0, "creation_date": 1470260813, "post_id": 38752523, "comment_id": 64882202, "body": "I have changed the code, the info column has strings basically which i did not realize earlier. Please try the code and let me know what happens"}], "tags": [], "owner": {"reputation": 1242, "user_id": 6657815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d9530b27299d0248df63719d13977f6?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav Dhama", "link": "https://stackoverflow.com/users/6657815/gaurav-dhama"}, "is_accepted": false, "score": 0, "last_activity_date": 1470260325, "last_edit_date": 1470260325, "creation_date": 1470254151, "answer_id": 38752523, "question_id": 38752135, "link": "https://stackoverflow.com/questions/38752135/python2-7-how-to-split-a-column-into-multiple-column-based-on-special-strings-l/38752523#38752523", "title": "Python2.7: How to split a column into multiple column based on special strings like this?", "body": "<p>Ok, here is how to do it :</p>\n\n<pre><code>import pandas as pd\nimport ast\n\n#Initial Dataframe is df\nmylist = list(df['info'])\nmynewlist = []\n\nfor l in mylist:\n    mynewlist.append(ast.literal_eval(l))\n\ndf_info = pd.DataFrame(mynewlist)\n\n#Add columns of decoded info to the initial dataset\ndf_new = pd.concat([df,df_info],axis=1)\n\n#Remove the column info\ndel df_new['info']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9, "user_id": 8364025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f6da516ec9a0ef737f77b494dc20780?s=128&d=identicon&r=PG&f=1", "display_name": "Da Silva Lionel", "link": "https://stackoverflow.com/users/8364025/da-silva-lionel"}, "is_accepted": false, "score": -1, "last_activity_date": 1551993404, "last_edit_date": 1551993404, "creation_date": 1547743247, "answer_id": 54240487, "question_id": 38752135, "link": "https://stackoverflow.com/questions/38752135/python2-7-how-to-split-a-column-into-multiple-column-based-on-special-strings-l/54240487#54240487", "title": "Python2.7: How to split a column into multiple column based on special strings like this?", "body": "<p>You can use the json library to do that.</p>\n\n<p>1) import the json libray </p>\n\n<pre><code>import json\n</code></pre>\n\n<p>2) Turn into string all the rows of that column and then Apply the json.loads function to all of them. Insert the result in an object</p>\n\n<pre><code>jsonO = df['info'].map(str).apply(json.loads)\n</code></pre>\n\n<p>3)The Json object is now a json dataframe in which you can navigate. For each columns of your Json dataframe, create a column in your final dataframe</p>\n\n<pre><code>df['Activities'] = jsonO.apply(lambda x: x['Activities'])\n</code></pre>\n\n<p>Here for one column of your json dataframe  each 'rows' is dump in the new column of your final dataframe df</p>\n\n<p>4) Re-do 3 for all the columns you're interested in </p>\n"}], "owner": {"reputation": 203, "user_id": 6581368, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/8c17e5a40a8fb608606e733f91485791?s=128&d=identicon&r=PG&f=1", "display_name": "yusuke0426", "link": "https://stackoverflow.com/users/6581368/yusuke0426"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 990, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1551993404, "creation_date": 1470252582, "last_edit_date": 1470259157, "question_id": 38752135, "link": "https://stackoverflow.com/questions/38752135/python2-7-how-to-split-a-column-into-multiple-column-based-on-special-strings-l", "title": "Python2.7: How to split a column into multiple column based on special strings like this?", "body": "<p>I'm a newbie for programming and python, so I would appreciate your advice!</p>\n\n<p>I have a dataframe like this.\n<a href=\"https://i.stack.imgur.com/33lcM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/33lcM.png\" alt=\"enter image description here\"></a>\nIn 'info' column, there are 7 different categories: activities, locations, groups, skills, sights, types and other. and each categories have unique values within <strong>[ ]</strong>.(ie,\"activities\":<strong>[\"Tour\"]</strong>)\nI would like to split 'info' column into 7 different columns based on each category as shown below.</p>\n\n<p><a href=\"https://i.stack.imgur.com/m8L7G.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/m8L7G.png\" alt=\"enter image description here\"></a></p>\n\n<p>I would like to allocate appropriate column names and also put corresponding unique strings within [ ] to each row.</p>\n\n<p>Is there any easy way to split dataframe like that?\nI was thinking to use str.split functions to split into pieces and merge everthing later. But not sure that is the best way to go and I wanted to see if there is more sophisticated way to make a dataframe like this.</p>\n\n<p>Any advice is appreciated!</p>\n\n<p>--<strong>UPDATE</strong>--</p>\n\n<p>When print(dframe['info']), it shows like this.\n<a href=\"https://i.stack.imgur.com/LN2vp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LN2vp.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "django"], "answers": [{"tags": [], "owner": {"reputation": 359, "user_id": 3152844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7412d2846cd254ab8a30c5ef33e278ce?s=128&d=identicon&r=PG", "display_name": "osmay88", "link": "https://stackoverflow.com/users/3152844/osmay88"}, "is_accepted": true, "score": 3, "last_activity_date": 1470258722, "creation_date": 1470258722, "answer_id": 38753719, "question_id": 38752121, "link": "https://stackoverflow.com/questions/38752121/how-to-run-python-file-from-django/38753719#38753719", "title": "How to run python file from django", "body": "<p>If I understand well you want to run some function inside of your view that is stored in and external file. If so just put the file in your app root directory and import it in your views.py</p>\n\n<pre><code>from your_app.your_file import your_method\n</code></pre>\n"}], "owner": {"reputation": 373, "user_id": 2837890, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/77021f47110957cec8cb30880a95058a?s=128&d=identicon&r=PG&f=1", "display_name": "Anshik", "link": "https://stackoverflow.com/users/2837890/anshik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1782, "favorite_count": 0, "accepted_answer_id": 38753719, "answer_count": 1, "score": -1, "last_activity_date": 1470258722, "creation_date": 1470252543, "question_id": 38752121, "link": "https://stackoverflow.com/questions/38752121/how-to-run-python-file-from-django", "title": "How to run python file from django", "body": "<p>How I can run python file, or django file from django view.\nI'm trying to make like ipython notebook, but use just text editor.</p>\n\n<p>I have create view, in this view I'm simply add python(django) text.</p>\n\n<p>Then when smb requests some view, wich process this python(django) file, I should send response with result.</p>\n\n<p>For example, print result of query set.</p>\n\n<p>In create view, I've added text:</p>\n\n<pre><code>from main.models import User\n\nfor i in User.objects.all()\n   print(i)\n</code></pre>\n\n<p>And in view I get request and send response with result of execution of code above.</p>\n"}, {"tags": ["python", "count", "nltk"], "answers": [{"tags": [], "owner": {"reputation": 1347, "user_id": 5488275, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/iOOq8.jpg?s=128&g=1", "display_name": "Nander Speerstra", "link": "https://stackoverflow.com/users/5488275/nander-speerstra"}, "is_accepted": true, "score": 1, "last_activity_date": 1470294282, "last_edit_date": 1495542785, "creation_date": 1470294282, "answer_id": 38760578, "question_id": 38752101, "link": "https://stackoverflow.com/questions/38752101/finding-specific-bigram-using-nltk-python-3/38760578#38760578", "title": "Finding specific Bigram using NLTK Python 3", "body": "<p>You could try to count unigram and bigram without NLTK and using regular expressions (<code>re</code>). Now you do not need two separate calculations, but you can do it in one go with <code>re.findall()</code>:</p>\n\n<pre><code>import re\nimport codecs\n\n# List of words and a sentence\nl = ['cow', 'dog', 'hot dog', 'pet candy']\ns = 'since the opening of the bla and hot dog in the hot dog cow'\n\n# Make your own fdist\nfdist = {}\nfor m in l:\n    # Find all occurrences of m in l and store the frequency in fdist[m]\n    fdist[m] = len(re.findall(m, s))\n\n# Write the wordcounts for each word to a file (if fdist[m] &gt; 0)\nwith codecs.open('nltk1.txt', 'w', encoding='utf8') as out:\n    for m in l:\n        if fdist[m] &gt; 0:\n            out.write('{}:\\t{}\\n'.format( m, fdist[m] ) )\n</code></pre>\n\n<p>Content of nltk1.txt:</p>\n\n<pre><code>cow:    1\ndog:    2\nhot dog:    2\n</code></pre>\n\n<p>Note: If you want to use NLTK, <a href=\"https://stackoverflow.com/a/27094326/5488275\">this answer might fulfill your needs</a>.</p>\n"}], "owner": {"reputation": 203, "user_id": 4874506, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/86446152b5aa8d08c806fd630a838624?s=128&d=identicon&r=PG&f=1", "display_name": "Vedad", "link": "https://stackoverflow.com/users/4874506/vedad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 795, "favorite_count": 0, "accepted_answer_id": 38760578, "answer_count": 1, "score": 0, "last_activity_date": 1470294282, "creation_date": 1470252466, "last_edit_date": 1495535318, "question_id": 38752101, "link": "https://stackoverflow.com/questions/38752101/finding-specific-bigram-using-nltk-python-3", "title": "Finding specific Bigram using NLTK Python 3", "body": "<p>I have a Problem that should actually be very easy solve with NLTK. I found a solution to my problem, but there they don't use NLTK:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/36707617/how-can-i-count-the-specific-bigram-words\">how can I count the specific bigram words?</a></p>\n\n<p>Is it possible to do that with a NLTK function?</p>\n\n<p>Here is my code:</p>\n\n<pre><code>food = open(\"food_low.txt\")\nlines = food.read().split(',')[:-1]\n\nraw = wordlists.words(\"cleaned2.txt\")\nfdist = nltk.FreqDist(w.lower() for w in raw)\n\nwith io.open('nltk1.txt', 'w', encoding=\"utf-8\") as h:\n    for m in lines:\n        if fdist[m] &gt; 0:\n            print(m + ':', fdist[m], end=' ', file = h)\n</code></pre>\n\n<p>I am counting how often the words from the <code>food_low.txt</code> appear in the <code>cleaned2.txt</code>. My problem is that I have some bigram words in <code>food_low.txt</code> and they are not counted. How can I make it that it also counts the bigrams?</p>\n"}, {"tags": ["python", "dictionary", "python-requests"], "answers": [{"comments": [{"owner": {"reputation": 501, "user_id": 1487931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e742cb24217e5e0c06f54d30e2f5092c?s=128&d=identicon&r=PG", "display_name": "Michael Lukin", "link": "https://stackoverflow.com/users/1487931/michael-lukin"}, "edited": false, "score": 0, "creation_date": 1470322479, "post_id": 38752460, "comment_id": 64912885, "body": "Yes, this approach is working but I want to understand data location in POST and PUT requests. I did not find Dictionary limitations in documentations."}, {"owner": {"reputation": 5433, "user_id": 841339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0c6d669eb872c414d81490f00a2e626?s=128&d=identicon&r=PG", "display_name": "Mauro Baraldi", "link": "https://stackoverflow.com/users/841339/mauro-baraldi"}, "reply_to_user": {"reputation": 501, "user_id": 1487931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e742cb24217e5e0c06f54d30e2f5092c?s=128&d=identicon&r=PG", "display_name": "Michael Lukin", "link": "https://stackoverflow.com/users/1487931/michael-lukin"}, "edited": false, "score": 0, "creation_date": 1470338670, "post_id": 38752460, "comment_id": 64923001, "body": "The limitation is not about the dictionaries. it&#39;s data here is to map a key x value as a param=value from HTTP request."}, {"owner": {"reputation": 501, "user_id": 1487931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e742cb24217e5e0c06f54d30e2f5092c?s=128&d=identicon&r=PG", "display_name": "Michael Lukin", "link": "https://stackoverflow.com/users/1487931/michael-lukin"}, "edited": false, "score": 0, "creation_date": 1470423144, "post_id": 38752460, "comment_id": 64962337, "body": "Does it means that parameters in location &quot;data&quot; can have only basic types?"}, {"owner": {"reputation": 5433, "user_id": 841339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0c6d669eb872c414d81490f00a2e626?s=128&d=identicon&r=PG", "display_name": "Mauro Baraldi", "link": "https://stackoverflow.com/users/841339/mauro-baraldi"}, "reply_to_user": {"reputation": 501, "user_id": 1487931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e742cb24217e5e0c06f54d30e2f5092c?s=128&d=identicon&r=PG", "display_name": "Michael Lukin", "link": "https://stackoverflow.com/users/1487931/michael-lukin"}, "edited": false, "score": 0, "creation_date": 1470426514, "post_id": 38752460, "comment_id": 64963923, "body": "Exactly what you found!"}], "tags": [], "owner": {"reputation": 5433, "user_id": 841339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0c6d669eb872c414d81490f00a2e626?s=128&d=identicon&r=PG", "display_name": "Mauro Baraldi", "link": "https://stackoverflow.com/users/841339/mauro-baraldi"}, "is_accepted": false, "score": 0, "last_activity_date": 1470253899, "creation_date": 1470253899, "answer_id": 38752460, "question_id": 38752091, "link": "https://stackoverflow.com/questions/38752091/put-dictionary-in-dictionary-in-python-requests/38752460#38752460", "title": "PUT dictionary in dictionary in Python requests", "body": "<p>In official doc you found a topic called <a href=\"http://docs.python-requests.org/en/master/user/quickstart/#more-complicated-post-requests\" rel=\"nofollow\">More complicated POST requests</a></p>\n\n<blockquote>\n  <p>There are many times that you want to send data that is not form-encoded. If you pass in a string instead of a dict, that data will be posted directly.</p>\n</blockquote>\n\n<pre><code>&gt;&gt;&gt; import json\n\n&gt;&gt;&gt; url = 'https://api.github.com/some/endpoint'\n&gt;&gt;&gt; payload = {'some': 'data'}\n\n&gt;&gt;&gt; r = requests.post(url, data=json.dumps(payload))\n</code></pre>\n\n<p>Maybe convert your data to JSON could be a good approach.</p>\n\n<pre><code>import json\n\ndef check_id():\n    id = request.form['id']\n    res = logic.is_id_valid(id)\n\n    file_uuid = request.form['file_id']\n    url = 'http://localhost:8050/firmwares'\n    payload = {'body' : {'version': id, 'file_id': str(file_uuid)}}\n    r = requests.put(url=url, data=json.dumps(payload))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9564, "user_id": 743188, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/gPyaY.jpg?s=128&g=1", "display_name": "Tommy", "link": "https://stackoverflow.com/users/743188/tommy"}, "is_accepted": true, "score": 9, "last_activity_date": 1474385531, "creation_date": 1474385531, "answer_id": 39598206, "question_id": 38752091, "link": "https://stackoverflow.com/questions/38752091/put-dictionary-in-dictionary-in-python-requests/39598206#39598206", "title": "PUT dictionary in dictionary in Python requests", "body": "<p>Use <code>json=</code> instead of <code>data=</code> when doing <code>requests.put</code> and <code>headers = {'content-type':'application/json'}</code>:</p>\n\n<pre><code> r = requests.put(url = url, \n                 json = {'body' : {'version': id, 'file_id': str(file_uuid)}}, \n                 headers = {'content-type':'application/json'})\n</code></pre>\n"}], "owner": {"reputation": 501, "user_id": 1487931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e742cb24217e5e0c06f54d30e2f5092c?s=128&d=identicon&r=PG", "display_name": "Michael Lukin", "link": "https://stackoverflow.com/users/1487931/michael-lukin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8310, "favorite_count": 2, "accepted_answer_id": 39598206, "answer_count": 2, "score": 5, "last_activity_date": 1474385531, "creation_date": 1470252423, "question_id": 38752091, "link": "https://stackoverflow.com/questions/38752091/put-dictionary-in-dictionary-in-python-requests", "title": "PUT dictionary in dictionary in Python requests", "body": "<p>I want to send a PUT request with the following data structure:</p>\n\n<pre><code>{ body : { version: integer, file_id: string }}\n</code></pre>\n\n<p>Here is the client code:</p>\n\n<pre><code>def check_id():\n    id = request.form['id']\n    res = logic.is_id_valid(id)\n\n    file_uuid = request.form['file_id']\n    url = 'http://localhost:8050/firmwares'\n    r = requests.put(url = url, data = {'body' : {'version': id, 'file_id': str(file_uuid)}})\n</code></pre>\n\n<p>Here is the server code:</p>\n\n<pre><code>api.add_resource(resources.FirmwareNewVerUpload, '/firmwares')\n\nclass FirmwareNewVerUpload(rest.Resource):\n    def put(self):\n        try:\n            args = parser.parse_args()\n        except:\n            print traceback.format_exc()\n\n        print 'data: ', str(args['body']), ' type: ', type(args['body'])\n\n        return\n</code></pre>\n\n<p>The server prints:</p>\n\n<pre><code>data:  version  type:  &lt;type 'unicode'&gt;\n</code></pre>\n\n<p>And this result is not what I want. Instead of inner dictionary I got a string with name of one dictionary key. If I change 'version' to 'ver'</p>\n\n<pre><code>    r = requests.put(url = url, data = {'body' : {'ver': id, 'file_id': str(file_uuid)}})\n</code></pre>\n\n<p>server prints</p>\n\n<pre><code>data:  ver  type:  &lt;type 'unicode'&gt;\n</code></pre>\n\n<p>How to send a dictionary with inner dictionary?</p>\n"}, {"tags": ["python", "arduino", "pyserial"], "answers": [{"tags": [], "owner": {"reputation": 37, "user_id": 4205043, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mQDBp.png?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/4205043/mike"}, "is_accepted": false, "score": 0, "last_activity_date": 1470302275, "creation_date": 1470302275, "answer_id": 38763286, "question_id": 38752081, "link": "https://stackoverflow.com/questions/38752081/communication-from-python-to-arduino-over-usb/38763286#38763286", "title": "Communication from Python to Arduino over USB", "body": "<p>Changing the baudrate to 9600 has fixed the communication</p>\n"}], "owner": {"reputation": 37, "user_id": 4205043, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mQDBp.png?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/4205043/mike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 110, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1470302275, "creation_date": 1470252386, "last_edit_date": 1470262268, "question_id": 38752081, "link": "https://stackoverflow.com/questions/38752081/communication-from-python-to-arduino-over-usb", "title": "Communication from Python to Arduino over USB", "body": "<p>I am trying to communicate with an Arduino. I use python and pyserial for communication over USB. As you can see in the source code below, I am trying to send a bytearray, which contains some information for two ledstrips, to the Arduino. But the Arduino does not receive the right information. It looks like the bytearray is transformed or information is getting lost. </p>\n\n<p>I searched the whole day for a solution, but nothing has worked. Hopefully one of you can help me with this problem.</p>\n\n<p>Thanks in advance.</p>\n\n<p><strong>Python Code</strong></p>\n\n<pre><code>import sys\nimport serial\nimport time\n\nHEADER_BYTE_1 = 0xBA\nHEADER_BYTE_2 = 0xBE\n\n\ndef main():\n    ser = serial.Serial('/dev/ttyUSB0', 57600)\n    message = { 'header': [None]*2, 'colors': [None]*6, 'checksum': 0x00 }\n    message['header'][0] = HEADER_BYTE_1\n    message['header'][1] = HEADER_BYTE_2\n    # first led\n    message['colors'][0] = 0xFF\n    message['colors'][1] = 0xFF\n    message['colors'][2] = 0xFF\n\n    # second led\n    message['colors'][3] = 0x00\n    message['colors'][4] = 0x00\n    message['colors'][5] = 0x00\n\n    # create checksum\n    for color in message['colors']:\n        for bit in bytes(color):\n            message['checksum'] ^= bit\n\n    # write message to arduino\n    cmd = convert_message_to_protocol(message)\n    ser.write(cmd)\n    print(cmd)\n\n    time.sleep(5)\n    # read response from arduino\n    while True:\n        response = ser.readline()\n        print(response)\n\n\ndef convert_message_to_protocol(message):\n    cmd = bytearray()\n    for header in message['header']:\n        cmd.append(header)\n\n    for color in message['colors']:\n        cmd.append(color)\n\n    cmd.append(message['checksum'])\n\n    return cmd\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n\n<p><strong>Arduino Code</strong></p>\n\n<pre><code>const int kChannel1FirstPin = 3;\nconst int kChannel1SecondPin = 5;\nconst int kChannel1ThirdPin = 6;\n\nconst int kChannel2FirstPin = 9;\nconst int kChannel2SecondPin = 10;\nconst int kChannel2ThirdPin = 11;\n\n// Protocol details (two header bytes, 6 value bytes, checksum)\n\nconst int kProtocolHeaderFirstByte = 0xBA;\nconst int kProtocolHeaderSecondByte = 0xBE;\n\nconst int kProtocolHeaderLength = 2;\nconst int kProtocolBodyLength = 6;\nconst int kProtocolChecksumLength = 1;\n\n// Buffers and state\n\nbool appearToHaveValidMessage;\nbyte receivedMessage[6];\n\nvoid setup() {\n  // set pins 2 through 13 as outputs:\n  pinMode(kChannel1FirstPin, OUTPUT);\n  pinMode(kChannel1SecondPin, OUTPUT);\n  pinMode(kChannel1ThirdPin, OUTPUT);\n\n  pinMode(kChannel2FirstPin, OUTPUT);\n  pinMode(kChannel2SecondPin, OUTPUT);\n  pinMode(kChannel2ThirdPin, OUTPUT);\n\n  analogWrite(kChannel1FirstPin, 255);\n  analogWrite(kChannel1SecondPin, 255);\n  analogWrite(kChannel1ThirdPin, 255);\n\n  analogWrite(kChannel2FirstPin, 255);\n  analogWrite(kChannel2SecondPin, 255);\n  analogWrite(kChannel2ThirdPin, 255);\n\n  appearToHaveValidMessage = false;\n\n  // initialize the serial communication:\n  Serial.begin(57600);\n}\n\n\nvoid loop () {\n\n  int availableBytes = Serial.available();\n\n  Serial.println(availableBytes);\n\n  if (!appearToHaveValidMessage) {\n    // If we haven't found a header yet, look for one.\n    if (availableBytes &gt;= kProtocolHeaderLength) {\n      Serial.println(\"right size\");\n      // Read then peek in case we're only one byte away from the header.\n      byte firstByte = Serial.read();\n      byte secondByte = Serial.peek();\n\n      if (firstByte == kProtocolHeaderFirstByte &amp;&amp;\n          secondByte == kProtocolHeaderSecondByte) {\n\n          Serial.println(\"Right Header\");\n          // We have a valid header. We might have a valid message!\n          appearToHaveValidMessage = true;\n\n          // Read the second header byte out of the buffer and refresh the buffer count.\n          Serial.read();\n          availableBytes = Serial.available();\n      }\n    }\n  }\n\n  if (availableBytes &gt;= (kProtocolBodyLength + kProtocolChecksumLength) &amp;&amp; appearToHaveValidMessage) {\n\n    // Read in the body, calculating the checksum as we go.\n    byte calculatedChecksum = 0;\n\n    for (int i = 0; i &lt; kProtocolBodyLength; i++) {\n      receivedMessage[i] = Serial.read();\n      calculatedChecksum ^= receivedMessage[i];\n    }\n\n    byte receivedChecksum = Serial.read();\n\n    if (receivedChecksum == calculatedChecksum) {\n      // Hooray! Push the values to the output pins.\n\n      analogWrite(kChannel1FirstPin, receivedMessage[0]);\n      analogWrite(kChannel1SecondPin, receivedMessage[1]);\n      analogWrite(kChannel1ThirdPin, receivedMessage[2]);\n\n      analogWrite(kChannel2FirstPin, receivedMessage[3]);\n      analogWrite(kChannel2SecondPin, receivedMessage[4]);\n      analogWrite(kChannel2ThirdPin, receivedMessage[5]);\n\n\n      Serial.print(\"OK\");\n      Serial.write(byte(10));\n\n    } else {\n\n      Serial.print(\"FAIL\");\n      Serial.write(byte(10));\n    }\n\n    appearToHaveValidMessage = false;\n  }\n}\n</code></pre>\n\n<p><strong>Example</strong> </p>\n\n<p>Generated Bytes in Python: <code>b'\\xba\\xbe\\xff\\xff\\xff\\x00\\x00\\x00\\x00'</code></p>\n\n<p>Received Bytes on the Arduino: <code>b'L\\xc30\\r\\n'</code></p>\n"}, {"tags": ["python", "netcdf", "moving-average", "file-moving"], "comments": [{"owner": {"reputation": 4123, "user_id": 1757464, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/FTcq2.jpg?s=128&g=1", "display_name": "jhamman", "link": "https://stackoverflow.com/users/1757464/jhamman"}, "edited": false, "score": 0, "creation_date": 1470264841, "post_id": 38752029, "comment_id": 64883581, "body": "Can you please clarify what you are trying to do and what your question is?  As far as I can tell, this has nothing to do with the <code>netcdf</code> tag."}, {"owner": {"reputation": 13, "user_id": 6641401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78bc10642f028d260557aa1e389e09c9?s=128&d=identicon&r=PG&f=1", "display_name": "A.A", "link": "https://stackoverflow.com/users/6641401/a-a"}, "reply_to_user": {"reputation": 4123, "user_id": 1757464, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/FTcq2.jpg?s=128&g=1", "display_name": "jhamman", "link": "https://stackoverflow.com/users/1757464/jhamman"}, "edited": false, "score": 0, "creation_date": 1470274994, "post_id": 38752029, "comment_id": 64886959, "body": "correct, im working with netcdf files, and sometimes they tend to include multidimemsion time series thats the only reason why i tag it as netcdf file but back to my question"}, {"owner": {"reputation": 13, "user_id": 6641401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78bc10642f028d260557aa1e389e09c9?s=128&d=identicon&r=PG&f=1", "display_name": "A.A", "link": "https://stackoverflow.com/users/6641401/a-a"}, "reply_to_user": {"reputation": 4123, "user_id": 1757464, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/FTcq2.jpg?s=128&g=1", "display_name": "jhamman", "link": "https://stackoverflow.com/users/1757464/jhamman"}, "edited": false, "score": 0, "creation_date": 1470276482, "post_id": 38752029, "comment_id": 64887279, "body": "correct, im working with NetCDF files, and sometimes they tend to include multidimensional time series thats the only reason why i tag it as netcdf file but back to my question  i want to group these files by 4 then move to the next four ----- example grab file name from 1_xxx_xxx.nc to file 4_xxx_xxx.nc then move to the next window filename 2_xxx_xxx.nc to 5_xxx_xxx.nc then to next window 3_xxx_xxx.nc to 6_xxx_xxx.nc so on so fort to the end of my files roughly 20000 files--- in the end i want to create folders for each four files that i grab... please let me know if i clarified my question-"}], "owner": {"reputation": 13, "user_id": 6641401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78bc10642f028d260557aa1e389e09c9?s=128&d=identicon&r=PG&f=1", "display_name": "A.A", "link": "https://stackoverflow.com/users/6641401/a-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1470253023, "creation_date": 1470252185, "last_edit_date": 1470253023, "question_id": 38752029, "link": "https://stackoverflow.com/questions/38752029/moving-window-to-grab-hourly-reading-netcdf-file-python", "title": "Moving window to grab hourly reading, netcdf file, python", "body": "<p>moving window to grab hourly reading, netcdf file, python\n what am i doing wrong here i want to grab 4 files then move to the<br>\n     next 4 files?\nwhat i want to do i grab the first 4 then move to the next 4 as below.. im trying to match it with the file naming structure.  # in the front of the filename</p>\n\n<pre><code>as in  \n1  \n2  \n3  \n4\n\n2  \n3  \n4  \n5 \n</code></pre>\n\n<p>filenaming structure \n     1_NLDAS_NOAH0125_H.A19871017.2100.002.2016198135018.pss.nc<br>\n    2_<br>\n    3_<br>\n    to\n    xxxx_</p>\n\n<pre><code>import os\nimport shutil\nimport re, glob\n\npart1 = (r\"C:\\test\\year198666\")\n\ndef Iteration_4():\n\n    rearrange1_file_list = os.listdir(part1)\n    saved_path = os.getcwd()\n    print(\"Current Working Directory os \"+saved_path)\n    os.chdir(part1)\n    i = 1 #starting at day 1 plus 3 files\n\n\n    a = i\n    print 'grabing file',(a)\n    b = i+1\n    print 'grabing file',(b)\n    c = i+2\n    print 'grabing file',(c)\n    d = i+3\n    print 'grabing file',(d)\n    while i &lt; 10:\n        for oldnames3 in rearrange1_file_list:\n            rearrange1_file_list.sort()\n            num3 = oldnames3.split(\"_\")                              \n            xyz = (num3[0])\n            #print (xyz)\n            if xyz == (a):\n                print(a)\n            elif xyz == (b):\n                print(b)\n            elif xyz == (c):\n                print(c)\n            elif xyz == (d):\n                print(d)\n         #   for letter in i:          \nIteration_4()\nprint 'done'\n</code></pre>\n"}, {"tags": ["python", "django", "ubuntu", "deployment"], "comments": [{"owner": {"reputation": 20414, "user_id": 2532070, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/XA5Jn.jpg?s=128&g=1", "display_name": "YPCrumble", "link": "https://stackoverflow.com/users/2532070/ypcrumble"}, "edited": false, "score": 0, "creation_date": 1470269651, "post_id": 38752015, "comment_id": 64884816, "body": "I&#39;m assuming your typo seetings.py is not the error? Is Web-Interaction-APP a folder (it should be and should include your <code>settings.py</code> file)."}, {"owner": {"reputation": 4714, "user_id": 3555000, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/145762f352604453bb4ba60e8d5738d7?s=128&d=identicon&r=PG&f=1", "display_name": "Enamul Hassan", "link": "https://stackoverflow.com/users/3555000/enamul-hassan"}, "edited": false, "score": 0, "creation_date": 1470440975, "post_id": 38752015, "comment_id": 64968476, "body": "Welcome to Stack Overflow! I edited your question as far as I could guess your problem. However, add code and description so that more people with knowledge of the subject will see it. Please edit in the specific error-message you&#39;re encountering in case that&#39;s necessary to identify the specific problem. Good Luck!"}], "answers": [{"comments": [{"owner": {"reputation": 869, "user_id": 4586457, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f15736bd8db855a35fc0db3cafc92499?s=128&d=identicon&r=PG&f=1", "display_name": "KKlalala", "link": "https://stackoverflow.com/users/4586457/kklalala"}, "edited": false, "score": 0, "creation_date": 1470323430, "post_id": 38755630, "comment_id": 64913694, "body": "I tried this. But it does not fix my issue. It said can&#39;t find Web-Interaction-APP.settings"}, {"owner": {"reputation": 20414, "user_id": 2532070, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/XA5Jn.jpg?s=128&g=1", "display_name": "YPCrumble", "link": "https://stackoverflow.com/users/2532070/ypcrumble"}, "reply_to_user": {"reputation": 869, "user_id": 4586457, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f15736bd8db855a35fc0db3cafc92499?s=128&d=identicon&r=PG&f=1", "display_name": "KKlalala", "link": "https://stackoverflow.com/users/4586457/kklalala"}, "edited": false, "score": 0, "creation_date": 1470323933, "post_id": 38755630, "comment_id": 64914074, "body": "@FrancicaZhao did you see my comment? Is Web-Interaction-APP a folder that includes a settings.py file? Does that settings.py file import your base settings.py file if that exists? Where is your regular settings.py file in the directory? Does one of your settings.py files include a <code>SECRET_KEY</code> setting?"}, {"owner": {"reputation": 869, "user_id": 4586457, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f15736bd8db855a35fc0db3cafc92499?s=128&d=identicon&r=PG&f=1", "display_name": "KKlalala", "link": "https://stackoverflow.com/users/4586457/kklalala"}, "edited": false, "score": 0, "creation_date": 1470326541, "post_id": 38755630, "comment_id": 64915944, "body": "Web-Interaction-APP IS a folder that includes a settings.py file. And it is the base setting.py. it also include SECRET_KEY. The folder works fine on windows and not working with apache and ubuntu. Do you think it&#39;s a problem of the system config instead of the program itself?"}, {"owner": {"reputation": 20414, "user_id": 2532070, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/XA5Jn.jpg?s=128&g=1", "display_name": "YPCrumble", "link": "https://stackoverflow.com/users/2532070/ypcrumble"}, "reply_to_user": {"reputation": 869, "user_id": 4586457, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f15736bd8db855a35fc0db3cafc92499?s=128&d=identicon&r=PG&f=1", "display_name": "KKlalala", "link": "https://stackoverflow.com/users/4586457/kklalala"}, "edited": false, "score": 0, "creation_date": 1470326887, "post_id": 38755630, "comment_id": 64916188, "body": "@FrancicaZhao so has the error changed to say ` can&#39;t find Web-Interaction-APP.settings`? If so post that error."}, {"owner": {"reputation": 1290, "user_id": 241135, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6a6fdfc0f91794b2201799d691edf726?s=128&d=identicon&r=PG", "display_name": "Daniel Werner", "link": "https://stackoverflow.com/users/241135/daniel-werner"}, "edited": false, "score": 0, "creation_date": 1559583364, "post_id": 38755630, "comment_id": 99458695, "body": "I made a related mistake. In the shell I was using, I <code>source</code>d the file containing all environment variables (including <code>DJANGO_SETTINGS_MODULE</code>), but then had to actually execute <code>export DJANGO_SETTINGS_MODULE</code> for it to be passed on to <code>python manage.py</code>."}], "tags": [], "owner": {"reputation": 20414, "user_id": 2532070, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/XA5Jn.jpg?s=128&g=1", "display_name": "YPCrumble", "link": "https://stackoverflow.com/users/2532070/ypcrumble"}, "is_accepted": false, "score": 1, "last_activity_date": 1470269879, "last_edit_date": 1495542316, "creation_date": 1470269879, "answer_id": 38755630, "question_id": 38752015, "link": "https://stackoverflow.com/questions/38752015/django-deploy-improperlyconfigured-the-secret-key-setting-must-not-be-empty/38755630#38755630", "title": "django deploy- ImproperlyConfigured: The SECRET_KEY setting must not be empty", "body": "<p>This error is common when your <a href=\"https://stackoverflow.com/a/20646241/2532070\"><code>DJANGO_SETTINGS_MODULE</code> path is incorrect</a>.</p>\n\n<p>When you run <code>python manage.py runserver 8000</code> you are using <code>manage.py</code> which is settings your <code>DJANGO_SETTINGS_MODULE</code> to <code>settings</code>. It doesn't appear that you have a <code>settings.py</code> in your root directory, so this line in <code>manage.py</code>:</p>\n\n<pre><code>os.environ.setdefault(\"DJANGO_SETTINGS_MODULE\", \"settings\")\n</code></pre>\n\n<p>should become:</p>\n\n<pre><code>os.environ.setdefault(\"DJANGO_SETTINGS_MODULE\", \"Web-Interaction-APP.settings\")\n</code></pre>\n\n<p>as you have in your <code>wsgi.py</code> file.</p>\n"}, {"tags": [], "owner": {"reputation": 18975, "user_id": 1539655, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/epO1x.jpg?s=128&g=1", "display_name": "levi", "link": "https://stackoverflow.com/users/1539655/levi"}, "is_accepted": false, "score": 2, "last_activity_date": 1470270032, "creation_date": 1470270032, "answer_id": 38755646, "question_id": 38752015, "link": "https://stackoverflow.com/questions/38752015/django-deploy-improperlyconfigured-the-secret-key-setting-must-not-be-empty/38755646#38755646", "title": "django deploy- ImproperlyConfigured: The SECRET_KEY setting must not be empty", "body": "<p>Maybe in your settings file, you are setting the <code>SECRET_KEY</code> using a <code>ENV</code> variable, open a shell and just:</p>\n\n<pre><code> export SECRET_KEY='test_key'\n</code></pre>\n\n<p>Then, try to run your server again. </p>\n"}], "owner": {"reputation": 869, "user_id": 4586457, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f15736bd8db855a35fc0db3cafc92499?s=128&d=identicon&r=PG&f=1", "display_name": "KKlalala", "link": "https://stackoverflow.com/users/4586457/kklalala"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5017, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1470440975, "creation_date": 1470252104, "last_edit_date": 1470440975, "question_id": 38752015, "link": "https://stackoverflow.com/questions/38752015/django-deploy-improperlyconfigured-the-secret-key-setting-must-not-be-empty", "title": "django deploy- ImproperlyConfigured: The SECRET_KEY setting must not be empty", "body": "<p>The project worked fine on windows pycharm.</p>\n\n<p>Now i am putting it on ubuntu14.04 and apache2.</p>\n\n<p>When i run <code>python manage.py runserver 8000</code></p>\n\n<pre><code>Traceback (most recent call last):   File \"manage.py\", line 14, in &lt;module&gt;\n    execute_from_command_line(sys.argv)   File \"/usr/local/lib/python2.7/dist-packages/Django-1.9-py2.7.egg/django/core/management/__init__.py\", line 350, in execute_from_command_line\n    utility.execute()   File \"/usr/local/lib/python2.7/dist-packages/Django-1.9-py2.7.egg/django/core/management/__init__.py\", line 342, in execute\n    self.fetch_command(subcommand).run_from_argv(self.argv)   File \"/usr/local/lib/python2.7/dist-packages/Django-1.9-py2.7.egg/django/core/management/__init__.py\", line 195, in fetch_command\n    klass = load_command_class(app_name, subcommand)   File \"/usr/local/lib/python2.7/dist-packages/Django-1.9-py2.7.egg/django/core/management/__init__.py\", line 39, in load_command_class\n    module = import_module('%s.management.commands.%s' % (app_name, name))   File \"/usr/lib/python2.7/importlib/__init__.py\", line 37, in import_module\n    __import__(name)   File \"/usr/local/lib/python2.7/dist-packages/Django-1.9-py2.7.egg/django/core/management/commands/runserver.py\", line 16, in &lt;module&gt;\n    from django.db.migrations.executor import MigrationExecutor   File \"/usr/local/lib/python2.7/dist-packages/Django-1.9-py2.7.egg/django/db/migrations/executor.py\", line 7, in &lt;module&gt;\n    from .loader import MigrationLoader   File \"/usr/local/lib/python2.7/dist-packages/Django-1.9-py2.7.egg/django/db/migrations/loader.py\", line 10, in &lt;module&gt;\n    from django.db.migrations.recorder import MigrationRecorder   File \"/usr/local/lib/python2.7/dist-packages/Django-1.9-py2.7.egg/django/db/migrations/recorder.py\", line 12, in &lt;module&gt;\n    class MigrationRecorder(object):   File \"/usr/local/lib/python2.7/dist-packages/Django-1.9-py2.7.egg/django/db/migrations/recorder.py\", line 26, in MigrationRecorder\n    class Migration(models.Model):   File \"/usr/local/lib/python2.7/dist-packages/Django-1.9-py2.7.egg/django/db/migrations/recorder.py\", line 27, in Migration\n    app = models.CharField(max_length=255)   File \"/usr/local/lib/python2.7/dist-packages/Django-1.9-py2.7.egg/django/db/models/fields/__init__.py\", line 1072, in __init__\n    super(CharField, self).__init__(*args, **kwargs)   File \"/usr/local/lib/python2.7/dist-packages/Django-1.9-py2.7.egg/django/db/models/fields/__init__.py\", line 166, in __init__\n    self.db_tablespace = db_tablespace or settings.DEFAULT_INDEX_TABLESPACE   File \"/usr/local/lib/python2.7/dist-packages/Django-1.9-py2.7.egg/django/conf/__init__.py\", line 55, in __getattr__\n    self._setup(name)   File \"/usr/local/lib/python2.7/dist-packages/Django-1.9-py2.7.egg/django/conf/__init__.py\", line 43, in _setup\n    self._wrapped = Settings(settings_module)   File \"/usr/local/lib/python2.7/dist-packages/Django-1.9-py2.7.egg/django/conf/__init__.py\", line 99, in __init__\n    mod = importlib.import_module(self.SETTINGS_MODULE)   File \"/usr/lib/python2.7/importlib/__init__.py\", line 37, in import_module\n    __import__(name)   File \"/var/www/Web-Interaction-APP/settings.py\", line 8, in &lt;module&gt;\n    application = get_wsgi_application()   File \"/usr/local/lib/python2.7/dist-packages/Django-1.9-py2.7.egg/django/core/wsgi.py\", line 13, in get_wsgi_application\n    django.setup()   File \"/usr/local/lib/python2.7/dist-packages/Django-1.9-py2.7.egg/django/__init__.py\", line 17, in setup\n    configure_logging(settings.LOGGING_CONFIG, settings.LOGGING)   File \"/usr/local/lib/python2.7/dist-packages/Django-1.9-py2.7.egg/django/conf/__init__.py\", line 55, in __getattr__\n    self._setup(name)   File \"/usr/local/lib/python2.7/dist-packages/Django-1.9-py2.7.egg/django/conf/__init__.py\", line 43, in _setup\n    self._wrapped = Settings(settings_module)   File \"/usr/local/lib/python2.7/dist-packages/Django-1.9-py2.7.egg/django/conf/__init__.py\", line 120, in __init__\n    raise ImproperlyConfigured(\"The SECRET_KEY setting must not be empty.\") django.core.exceptions.ImproperlyConfigured: The SECRET_KEY setting must not be empty.\n</code></pre>\n\n<p>I have also tried to change my <code>manage.py</code> and <code>wsgi.py</code>. My folder is:</p>\n\n<pre><code>Web-Interaction-APP\n\n-manage.py  \n\n-seetings.py\n\n*apache(folder)\n\n       -wsgi.py\n\n *project(folder)\n</code></pre>\n\n<p>in my manage.py:</p>\n\n<pre><code>#!/usr/bin/env python\n#This file runs the server for this application from command line.\nimport os, sys\n\n#Executes the code in the following condition if the program is run directly. \n#(Source: http://stackoverflow.com/questions/419163/what-does-if-name-main-do)\nif __name__ == \"__main__\":\n    #Refers to the path of this django project's settings module.\n    #(DJANGO_SETTINGS_MODULE is an environment variable to module import path.)\n    os.environ.setdefault(\"DJANGO_SETTINGS_MODULE\", \"settings\")\n\n    from django.core.management import execute_from_command_line\n    #Executes the django project.\n    execute_from_command_line(sys.argv)\n</code></pre>\n\n<p>In my wsgi.py:</p>\n\n<pre><code>import os, sys\n# Calculate the path based on the location of the WSGI script.\napache_configuration= os.path.dirname(__file__)\nproject = os.path.dirname(apache_configuration)\nworkspace = os.path.dirname(project)\nsys.path.append(workspace)\nsys.path.append(project)\nos.environ.setdefault(\"DJANGO_SETTINGS_MODULE\", \"Web-Interaction-APP.settings\")\n\n\n# Add the path to 3rd party django application and to django itself.\nsys.path.append('/home/zhaojf1')\nos.environ['DJANGO_SETTINGS_MODULE'] = '10.231.52.XX.apache.override'\nimport django.core.handlers.wsgi\napplication = django.core.handlers.wsgi.WSGIHandler()\n</code></pre>\n"}, {"tags": ["python", "file", "pyqt4", "yaml", "config"], "comments": [{"owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "edited": false, "score": 0, "creation_date": 1470264751, "post_id": 38752011, "comment_id": 64883553, "body": "What&#39;s the point in using yaml? It would be much simpler to use <a href=\"http://doc.qt.io/qt-4.8/qsettings.html\" rel=\"nofollow noreferrer\">QSettings</a>."}, {"owner": {"reputation": 113, "user_id": 6520469, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/e81069c5ff979b222cb96453af6ccb49?s=128&d=identicon&r=PG&f=1", "display_name": "camerausb", "link": "https://stackoverflow.com/users/6520469/camerausb"}, "reply_to_user": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "edited": false, "score": 0, "creation_date": 1470271755, "post_id": 38752011, "comment_id": 64885354, "body": "Why doesn&#39;t my method work?"}], "answers": [{"tags": [], "owner": {"reputation": 23530, "user_id": 347964, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/bE90m.png?s=128&g=1", "display_name": "flyx", "link": "https://stackoverflow.com/users/347964/flyx"}, "is_accepted": false, "score": 0, "last_activity_date": 1470311625, "creation_date": 1470311625, "answer_id": 38766629, "question_id": 38752011, "link": "https://stackoverflow.com/questions/38752011/overwrite-yaml-config-file-in-gui-python/38766629#38766629", "title": "Overwrite yaml config file in GUI (python)", "body": "<p>You probably do not update the values <code>MIN_VOLTAGE</code>. <code>MAX_VOLTAGE</code> and <code>MAX_CURR</code> after writing the YAML file, but you do not show enough code to identify the problem.</p>\n\n<p>You code loads the YAML file once (probably at application startup), and the values are populated thereafter. If you overwrite your YAML file, the values in your application will not automatically change unless you either manually modify them or reload the YAML file into those values.</p>\n\n<p>A sane approach would be to store the configuration values in a class which has a <code>save</code> and <code>load</code> method, then use the values from there and also update them there when the user changes configuration. Invoke <code>save</code> after modification, and <code>load</code> at application startup.</p>\n"}], "owner": {"reputation": 113, "user_id": 6520469, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/e81069c5ff979b222cb96453af6ccb49?s=128&d=identicon&r=PG&f=1", "display_name": "camerausb", "link": "https://stackoverflow.com/users/6520469/camerausb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 713, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1470311625, "creation_date": 1470252080, "last_edit_date": 1470260560, "question_id": 38752011, "link": "https://stackoverflow.com/questions/38752011/overwrite-yaml-config-file-in-gui-python", "title": "Overwrite yaml config file in GUI (python)", "body": "<p>I have implemented a GUI interface using PyQt4. In my GUI interface I have a configuration tab where users can make changes to the config file (with line edits). I am able to overwrite the yaml config file in the GUI with these inputted values (I have buttons for load, save, and overwrite), but when these variables are actually being used in other modules, it reads from the original config values. This is how I am reading my config file in the modules that use the variables:</p>\n\n<pre><code>with open(\"config.yaml\", \"r\") as f:\n    config = yaml.safe_load(f)\n\nMIN_VOLTAGE = config['test1']['minVolt']\nMAX_VOLTAGE = config['test1']['maxVolt']\nMAX_CURR = config['test1']['maxCurr']\n</code></pre>\n\n<p>My config file looks like this:</p>\n\n<pre><code>test1:\n  maxCurr: 5\n  maxVolt: 5\n  minVolt: -5\ntest2:\n  maxVolt: 8\n  setCurr: 3\n</code></pre>\n\n<p>How will I be able to use the new config values without exiting out of the GUI?</p>\n"}, {"tags": ["python", "python-2.7", "pandas"], "comments": [{"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1470252571, "post_id": 38752010, "comment_id": 64878132, "body": "Look at this <a href=\"http://stackoverflow.com/a/38511805/2336654\">stackoverflow.com/a/38511805/2336654</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2819, "user_id": 1451311, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/ee722dcd3d2b6473cb2d26584288fa62?s=128&d=identicon&r=PG&f=1", "display_name": "mgilbert", "link": "https://stackoverflow.com/users/1451311/mgilbert"}, "reply_to_user": {"reputation": 19255, "user_id": 428862, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7041b76f657ac8e8d32a72f1b8b5b4bb?s=128&d=identicon&r=PG", "display_name": "Merlin", "link": "https://stackoverflow.com/users/428862/merlin"}, "edited": false, "score": 0, "creation_date": 1470270014, "post_id": 38752335, "comment_id": 64884920, "body": "@Merlin Yes I generally do that, although since this is rendering in a notebook (to get the html highlighting) it is a bit difficult. I guess I could have copied the code separately but for this short snippet it seemed unecessary"}], "tags": [], "owner": {"reputation": 2819, "user_id": 1451311, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/ee722dcd3d2b6473cb2d26584288fa62?s=128&d=identicon&r=PG&f=1", "display_name": "mgilbert", "link": "https://stackoverflow.com/users/1451311/mgilbert"}, "is_accepted": false, "score": 4, "last_activity_date": 1470253716, "last_edit_date": 1470253716, "creation_date": 1470253334, "answer_id": 38752335, "question_id": 38752010, "link": "https://stackoverflow.com/questions/38752010/color-numbers-in-pandas-dataframe/38752335#38752335", "title": "Color numbers in pandas dataframe", "body": "<p>In addition to the answer @piRSquared provided which gives great ability for granular control, it appears <code>pandas</code> has added a <a href=\"http://pandas.pydata.org/pandas-docs/stable/style.html\" rel=\"nofollow noreferrer\">style</a> feature as of <code>0.17.1</code> for addressing this exact issue. Here is a slightly modified version of the example provided in the linked documentation.</p>\n\n<p><a href=\"https://i.stack.imgur.com/xDv75.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xDv75.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 21, "user_id": 6651878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c6c195c6f1aee9d22c7f3c476ade825?s=128&d=identicon&r=PG&f=1", "display_name": "C.Schmidt", "link": "https://stackoverflow.com/users/6651878/c-schmidt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1628, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1470253716, "creation_date": 1470252078, "question_id": 38752010, "link": "https://stackoverflow.com/questions/38752010/color-numbers-in-pandas-dataframe", "title": "Color numbers in pandas dataframe", "body": "<p>Is there a way to print some numbers in a dataframe in a different color?\nSo for instance if I wanted to have the 1 in the following table in red. How can I do that?</p>\n\n<pre><code>import pandas as pd\nA=pd.DataFrame({'A':[1,2], 'B':[3,4]})\n</code></pre>\n\n<p>I found libraries like termcolor. But there I can only print normal text in various colors.</p>\n"}, {"tags": ["python", "routes", "url-routing", "url-redirection"], "answers": [{"tags": [], "owner": {"reputation": 315, "user_id": 773641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5d02a5a089db5dbd4aba1750539fa86?s=128&d=identicon&r=PG", "display_name": "Severian", "link": "https://stackoverflow.com/users/773641/severian"}, "is_accepted": true, "score": 0, "last_activity_date": 1470330696, "creation_date": 1470330696, "answer_id": 38773565, "question_id": 38751932, "link": "https://stackoverflow.com/questions/38751932/mapping-url-arguments-in-python-requests-redirect/38773565#38773565", "title": "mapping URL arguments in Python Requests redirect", "body": "<p>I ended up implementing it as follows:</p>\n\n<pre><code>def _map_redirects( app ):\n    \"\"\"\n    Add redirect to the Routes mapper and forward the received query string.\n    Subsequently when the redirect is triggered in Routes middleware the request\n    will not even reach the webapp.\n    \"\"\"\n    def forward_qs(environ, result):\n        qs_dict = urlparse.parse_qs(environ['QUERY_STRING'])\n        for qs in qs_dict:\n            result[ qs ] = qs_dict[ qs ]\n        return True\n\n    app.mapper.redirect( \"/repository/status_for_installed_repository\", \"/api/repositories/check_updates/\", _redirect_code=\"301 Moved Permanently\", conditions=dict( function=forward_qs ) )\n    return app\n</code></pre>\n"}], "owner": {"reputation": 315, "user_id": 773641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5d02a5a089db5dbd4aba1750539fa86?s=128&d=identicon&r=PG", "display_name": "Severian", "link": "https://stackoverflow.com/users/773641/severian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 178, "favorite_count": 0, "accepted_answer_id": 38773565, "answer_count": 1, "score": 0, "last_activity_date": 1470330696, "creation_date": 1470251786, "question_id": 38751932, "link": "https://stackoverflow.com/questions/38751932/mapping-url-arguments-in-python-requests-redirect", "title": "mapping URL arguments in Python Requests redirect", "body": "<p>While using the <a href=\"http://routes.readthedocs.io/en/latest/\" rel=\"nofollow\">Routes</a> library I want to <a href=\"http://routes.readthedocs.io/en/latest/uni_redirect_rest.html#redirect-routes\" rel=\"nofollow\">redirect</a> certain URLs. The documentation says it can be achieved like this:</p>\n\n<pre><code>map.redirect(\"/legacyapp/archives/{url:.*}\", \"/archives/{url}\")\n</code></pre>\n\n<p>And I am indeed able to redirect to a URL this way. However I am unable to map/parse the URL arguments from the request to the redirect. My code looks like this:</p>\n\n<pre><code>app.mapper.redirect( \"/repository/status_for_installed_repository{url:.*}\", \"/api/repositories/check_updates/{url}\" )\n</code></pre>\n\n<p>and if the app is passed this:</p>\n\n<pre><code>curl -L 'FQDN/repository/status_for_installed_repository?owner=qqqqqq&amp;changeset_revision=e5f6ced3e91f&amp;name=asdsadsadas'\n</code></pre>\n\n<p>it redirects me to </p>\n\n<pre><code>GET /api/repositories/check_updates\n</code></pre>\n\n<p>but I cannot find a way how to obtain the values of <code>owner</code> <code>name</code> and <code>changeset_revision</code>.</p>\n\n<p>I expect this to be a common use case as generally you do not want to lose arguments when redirecting?</p>\n\n<p>Any help is much appreciated. Thanks.</p>\n"}]