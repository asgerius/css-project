[{"tags": ["python", "python-3.x", "nested-lists"], "answers": [{"comments": [{"owner": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "edited": false, "score": 0, "creation_date": 1552523491, "post_id": 55152945, "comment_id": 97046643, "body": "You should try running your code before you post it as a solution. It should be <code>==</code> and not <code>=</code>."}, {"owner": {"reputation": 2454, "user_id": 8784938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/753bb55c80a644f950a41ae11cfbe48c?s=128&d=identicon&r=PG&f=1", "display_name": "SuperStew", "link": "https://stackoverflow.com/users/8784938/superstew"}, "reply_to_user": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "edited": false, "score": 0, "creation_date": 1552575023, "post_id": 55152945, "comment_id": 97070268, "body": "@Bazingaa yes how sloppy of me. fixed"}], "tags": [], "owner": {"reputation": 2454, "user_id": 8784938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/753bb55c80a644f950a41ae11cfbe48c?s=128&d=identicon&r=PG&f=1", "display_name": "SuperStew", "link": "https://stackoverflow.com/users/8784938/superstew"}, "is_accepted": true, "score": 2, "last_activity_date": 1552575006, "last_edit_date": 1552575006, "creation_date": 1552521834, "answer_id": 55152945, "question_id": 55152913, "link": "https://stackoverflow.com/questions/55152913/selecting-lists-within-a-list-that-are-of-a-certain-length/55152945#55152945", "title": "Selecting lists within a list that are of a certain length", "body": "<p>list comprehensions</p>\n\n<pre><code>#don't call lists \"list\" as a variable \nl=[[1,2],[1,2,3],[1,2],[1,2,3,4],[1,2,3]]\n\n#for len 2\nl_2=[x for x in l if len(x)==2]\n\n#for len 3\nl_3=[x for x in l if len(x)==3]\n</code></pre>\n\n<p>etc</p>\n"}, {"tags": [], "owner": {"reputation": 119, "user_id": 10523808, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CtWLk.jpg?s=128&g=1", "display_name": "Leo_Liu_MJ", "link": "https://stackoverflow.com/users/10523808/leo-liu-mj"}, "is_accepted": false, "score": 1, "last_activity_date": 1552522010, "creation_date": 1552522010, "answer_id": 55152973, "question_id": 55152913, "link": "https://stackoverflow.com/questions/55152913/selecting-lists-within-a-list-that-are-of-a-certain-length/55152973#55152973", "title": "Selecting lists within a list that are of a certain length", "body": "<p>It's simple with Len() function which can tell you the lengths of list</p>\n\n<pre><code>origal_list=[[1,2],[1,2,3],[1,2],[1,2,3,4],[1,2,3]]\n\nlength2_list=[]\n\nlength3_list=[]\n\nlength4_list=[]\n\n\nfor lst in origal_list:\n    if len(lst) == 2:\n        length2_list.append(lst)\n    if len(lst) == 3:\n        length3_list.append(lst)\n    if len(lst) == 4:\n        length4_list.append(lst)\n\nprint(length2_list)\nprint(length3_list)\nprint(length4_list)\n\n</code></pre>\n\n<p>result: </p>\n\n<pre><code>[[1, 2], [1, 2]]\n[[1, 2, 3], [1, 2, 3]]\n[[1, 2, 3, 4]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 486, "user_id": 6383564, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Kg2rH6F9KNk/AAAAAAAAAAI/AAAAAAAAAA8/HYz7LSjQxPg/photo.jpg?sz=128", "display_name": "akrantz", "link": "https://stackoverflow.com/users/6383564/akrantz"}, "is_accepted": false, "score": 0, "last_activity_date": 1552522141, "creation_date": 1552522141, "answer_id": 55152988, "question_id": 55152913, "link": "https://stackoverflow.com/questions/55152913/selecting-lists-within-a-list-that-are-of-a-certain-length/55152988#55152988", "title": "Selecting lists within a list that are of a certain length", "body": "<p>Try something like this, it will work for n lists of n length:</p>\n\n<pre><code>lists = {}\nlist = [[1, 2], [1, 2, 3], [1, 2], [1, 2, 3, 4], [1, 2, 3]]\n\nfor l in list:\n    length = len(l)\n    if lists.get(length) is None:\n        lists[length] = []\n    lists[length].append(l)\n</code></pre>\n\n<p>This creates a dictionary that will have the length as the key for a list of lists. It then iterates over the original list and appends it to the correct key.</p>\n\n<p>It will output something like this: <code>{2: [[1, 2], [1, 2]], 3: [[1, 2, 3], [1, 2, 3]], 4: [[1, 2, 3, 4]]}</code></p>\n"}], "owner": {"reputation": 83, "user_id": 10942869, "user_type": "registered", "profile_image": "https://graph.facebook.com/2345126402166962/picture?type=large", "display_name": "Mandie Driskill", "link": "https://stackoverflow.com/users/10942869/mandie-driskill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 55152945, "answer_count": 3, "score": 0, "last_activity_date": 1552575006, "creation_date": 1552521584, "last_edit_date": 1552522099, "question_id": 55152913, "link": "https://stackoverflow.com/questions/55152913/selecting-lists-within-a-list-that-are-of-a-certain-length", "title": "Selecting lists within a list that are of a certain length", "body": "<p>This is what I have:</p>\n\n<p><code>original_list=[[1,2],[1,2,3],[1,2],[1,2,3,4],[1,2,3]]</code></p>\n\n<p>I would like to find lists within my list that are of lengths 2, 3, 4, etc.:</p>\n\n<p><code>length2_list=[[1,2],[1,2]]</code></p>\n\n<p><code>length3_list=[[1,2,3],[1,2,3]]</code></p>\n\n<p><code>length4_list=[[1,2,3,4]]</code></p>\n\n<p>How might I do this?</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1552521810, "post_id": 55152874, "comment_id": 97046224, "body": "This was a poorly named metaclass. Just use <code>isinstance(typing.Optional[int], type(typing.Union))</code>"}, {"owner": {"reputation": 1678, "user_id": 6750211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tmOvh.gif?s=128&g=1", "display_name": "Kevin Fang", "link": "https://stackoverflow.com/users/6750211/kevin-fang"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1552522570, "post_id": 55152874, "comment_id": 97046424, "body": "@juanpa.arrivillaga thanks, it is really helpful!"}, {"owner": {"reputation": 1061, "user_id": 5212919, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2712f5c8f3001145e67d144594a9044f?s=128&d=identicon&r=PG", "display_name": "Tekill", "link": "https://stackoverflow.com/users/5212919/tekill"}, "edited": false, "score": 3, "creation_date": 1580402665, "post_id": 55152874, "comment_id": 106094645, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/56832881/check-if-a-field-is-typing-optional\">Check if a field is typing.Optional</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1061, "user_id": 5212919, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2712f5c8f3001145e67d144594a9044f?s=128&d=identicon&r=PG", "display_name": "Tekill", "link": "https://stackoverflow.com/users/5212919/tekill"}, "is_accepted": true, "score": 4, "last_activity_date": 1580402629, "creation_date": 1580402629, "answer_id": 59990655, "question_id": 55152874, "link": "https://stackoverflow.com/questions/55152874/python-what-is-the-type-of-typing-optional/59990655#59990655", "title": "python what is the type of typing.Optional", "body": "<p>I believe this is being answered in this post <a href=\"https://stackoverflow.com/questions/56832881/check-if-a-field-is-typing-optional\">Check if a field is typing.Optional</a>. </p>\n\n<p>I also pasted it below:</p>\n\n<p><code>Optional[X]</code> is equivalent to <code>Union[X, None]</code>. So you could do,</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>    import re\n    from typing import Optional\n\n    from dataclasses import dataclass, fields\n\n\n    @dataclass(frozen=True)\n    class TestClass:\n        required_field_1: str\n        required_field_2: int\n        optional_field: Optional[str]\n\n\n    def get_optional_fields(klass):\n        class_fields = fields(klass)\n        for field in class_fields:\n            if (\n                hasattr(field.type, \"__args__\")\n                and len(field.type.__args__) == 2\n                and field.type.__args__[-1] is type(None)\n            ):\n                # Check if exactly two arguments exists and one of them are None type\n                yield field.name\n\n\n    print(list(get_optional_fields(TestClass)))\n</code></pre>\n"}], "owner": {"reputation": 1678, "user_id": 6750211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tmOvh.gif?s=128&g=1", "display_name": "Kevin Fang", "link": "https://stackoverflow.com/users/6750211/kevin-fang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2730, "favorite_count": 0, "closed_date": 1580409922, "accepted_answer_id": 59990655, "answer_count": 1, "score": 5, "last_activity_date": 1580402629, "creation_date": 1552521195, "last_edit_date": 1552532154, "question_id": 55152874, "link": "https://stackoverflow.com/questions/55152874/python-what-is-the-type-of-typing-optional", "closed_reason": "Duplicate", "title": "python what is the type of typing.Optional", "body": "<p>I would like to use typing's <code>get_type_hints</code> method to get argument annotations. However I encountered this problem in <strong>Python3.6.8</strong></p>\n\n<pre><code>a = typing.Optional[int]\ntype(a)\nOut[13]: typing.Union\ntype(a) == typing.Union\nOut[14]: False\ntype(a) == type(typing.Optional)\nOut[23]: False\ntype(a) == type(typing.Optional[int])\nOut[24]: True\nrepr(type(a))\nOut[25]: 'typing.Union'\nrepr(typing.Union)\nOut[26]: 'typing.Union'\n</code></pre>\n\n<p>It seems that there's no generic way to judge whether a type is <code>typing.Optional</code> or not beside comparing the <code>repr</code> which is not very pythonic. Is there a hack to it?</p>\n\n<p>P.S. in 3.7 there's <code>typing._GenericAlias</code> and it works perfectly fine.</p>\n"}, {"tags": ["python", "loops", "recursion"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1552521380, "post_id": 55152853, "comment_id": 97046118, "body": "But <code>new_n_minus2 = n_minus1</code> and then you append to <code>n_minus1</code>..."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1552521409, "post_id": 55152853, "comment_id": 97046130, "body": "<code>new_n_minus2 = n_minus1</code> does not make a copy of the list. Both variables refer to the same list, so appending to one appends to the other."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1552521446, "post_id": 55152853, "comment_id": 97046144, "body": "Read the following: <a href=\"https://nedbatchelder.com/text/names.html\" rel=\"nofollow noreferrer\">nedbatchelder.com/text/names.html</a>"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1552521534, "post_id": 55152853, "comment_id": 97046167, "body": "<code>new_n_minus2 = n_minus1</code> does not copy the <code>n_minus1</code> list, it just gives it another variable name. Try using <code>new_n_minus2 = n_minus1.copy()</code>."}, {"owner": {"reputation": 35, "user_id": 11200038, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Pp28OOdP1ew/AAAAAAAAAAI/AAAAAAAAAAc/hGx2L9-RTDU/photo.jpg?sz=128", "display_name": "Ethan Peck", "link": "https://stackoverflow.com/users/11200038/ethan-peck"}, "edited": false, "score": 0, "creation_date": 1552522253, "post_id": 55152853, "comment_id": 97046339, "body": ".copy() did not work because it is a nested list but the copy module and copy.deepcopy() did work."}], "owner": {"reputation": 35, "user_id": 11200038, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Pp28OOdP1ew/AAAAAAAAAAI/AAAAAAAAAAc/hGx2L9-RTDU/photo.jpg?sz=128", "display_name": "Ethan Peck", "link": "https://stackoverflow.com/users/11200038/ethan-peck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "closed_date": 1552521415, "answer_count": 0, "score": 0, "last_activity_date": 1552521254, "creation_date": 1552521049, "last_edit_date": 1552521254, "question_id": 55152853, "link": "https://stackoverflow.com/questions/55152853/list-is-being-added-to-despite-not-using-append", "closed_reason": "Duplicate", "title": "List is being added to despite not using append()", "body": "<p>I am currently trying to make a recursive function that solves and returns every possible path that can be taken in the <a href=\"https://www.geeksforgeeks.org/count-ways-reach-nth-stair/\" rel=\"nofollow noreferrer\">staircase problem</a>.  The code for my example so far is:</p>\n\n<pre><code>num_input = int(input(\"How many stairs are there? \"))\n\ndef num_ways(num=2, n_minus2=None, n_minus1=None):\n\n    if n_minus2 is None:\n        n_minus2 = [[0]]\n        n_minus1 = [[0, 1]]\n\n    if num_input == 0:\n        return n_minus2\n    elif num_input == 1 or num &gt; num_input:\n        return n_minus1\n    else:\n        new_n_minus2 = n_minus1\n\n        for i in n_minus1:\n            i.append(num)\n\n        for a in n_minus2:\n            a.append(num)\n\n        new_n_minus1 = n_minus2 + n_minus1\n\n        num += 1\n        return num_ways(num, new_n_minus2, new_n_minus1)\n\nprint(num_ways())\n</code></pre>\n\n<p>Currently, if I input 3 as the number of stairs my code returns this:</p>\n\n<pre><code>[[0, 1, 2, 3, 3], [0, 2, 3], [0, 1, 2, 3, 3]]\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>[[0, 1, 2, 3], [0, 2, 3], [0, 1, 3]]\n</code></pre>\n\n<p>After running through the code multiple times I can determine that the new_n_minus2 variable is having num appended to it despite the fact that I never explicitly call that method on it.  I'm sure I am just missing something silly with scope or the for loops but as of right now I am stuck.</p>\n"}, {"tags": ["python", "keras", "neural-network", "deep-learning"], "answers": [{"comments": [{"owner": {"reputation": 287, "user_id": 7715504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b632a54294e62b00a97dafe32d40734?s=128&d=identicon&r=PG&f=1", "display_name": "CSH", "link": "https://stackoverflow.com/users/7715504/csh"}, "edited": false, "score": 0, "creation_date": 1552523383, "post_id": 55153051, "comment_id": 97046625, "body": "Is it possible to use a custom function g instead of addition and multiplication?"}, {"owner": {"reputation": 124, "user_id": 3675625, "user_type": "registered", "profile_image": "https://graph.facebook.com/1260403541/picture?type=large", "display_name": "Abhimanyu", "link": "https://stackoverflow.com/users/3675625/abhimanyu"}, "reply_to_user": {"reputation": 287, "user_id": 7715504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b632a54294e62b00a97dafe32d40734?s=128&d=identicon&r=PG&f=1", "display_name": "CSH", "link": "https://stackoverflow.com/users/7715504/csh"}, "edited": false, "score": 0, "creation_date": 1552523445, "post_id": 55153051, "comment_id": 97046637, "body": "Yeah, you just need to be able to define the function G with keras backend or tensorflow ops"}, {"owner": {"reputation": 287, "user_id": 7715504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b632a54294e62b00a97dafe32d40734?s=128&d=identicon&r=PG&f=1", "display_name": "CSH", "link": "https://stackoverflow.com/users/7715504/csh"}, "edited": false, "score": 0, "creation_date": 1552523520, "post_id": 55153051, "comment_id": 97046649, "body": "Oh I got it. Thank you!"}, {"owner": {"reputation": 287, "user_id": 7715504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b632a54294e62b00a97dafe32d40734?s=128&d=identicon&r=PG&f=1", "display_name": "CSH", "link": "https://stackoverflow.com/users/7715504/csh"}, "edited": false, "score": 0, "creation_date": 1552527050, "post_id": 55153051, "comment_id": 97047543, "body": "I think 3*x*logits+x is not supported because the result is not a layer. Instead, we should use  keras.layers.Add() keras.layers.Multiply() please check this."}, {"owner": {"reputation": 124, "user_id": 3675625, "user_type": "registered", "profile_image": "https://graph.facebook.com/1260403541/picture?type=large", "display_name": "Abhimanyu", "link": "https://stackoverflow.com/users/3675625/abhimanyu"}, "reply_to_user": {"reputation": 287, "user_id": 7715504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b632a54294e62b00a97dafe32d40734?s=128&d=identicon&r=PG&f=1", "display_name": "CSH", "link": "https://stackoverflow.com/users/7715504/csh"}, "edited": false, "score": 0, "creation_date": 1552532248, "post_id": 55153051, "comment_id": 97048649, "body": "Doesn&#39;t need to be a layer; in the functional API you just manipulate tensors with TF ops. The issue can be that shapes don&#39;t work out as I pointed out. You can&#39;t multiply x with f(x) unless they are of the same shape"}, {"owner": {"reputation": 287, "user_id": 7715504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b632a54294e62b00a97dafe32d40734?s=128&d=identicon&r=PG&f=1", "display_name": "CSH", "link": "https://stackoverflow.com/users/7715504/csh"}, "edited": false, "score": 0, "creation_date": 1552533673, "post_id": 55153051, "comment_id": 97048939, "body": "An error occurs when set Model(inputs=x, outputs=logits)"}, {"owner": {"reputation": 287, "user_id": 7715504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b632a54294e62b00a97dafe32d40734?s=128&d=identicon&r=PG&f=1", "display_name": "CSH", "link": "https://stackoverflow.com/users/7715504/csh"}, "edited": false, "score": 0, "creation_date": 1552536102, "post_id": 55153051, "comment_id": 97049505, "body": "Well, I found Lambda in keras API. keras.layers.lambda will resolve this!"}, {"owner": {"reputation": 124, "user_id": 3675625, "user_type": "registered", "profile_image": "https://graph.facebook.com/1260403541/picture?type=large", "display_name": "Abhimanyu", "link": "https://stackoverflow.com/users/3675625/abhimanyu"}, "reply_to_user": {"reputation": 287, "user_id": 7715504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b632a54294e62b00a97dafe32d40734?s=128&d=identicon&r=PG&f=1", "display_name": "CSH", "link": "https://stackoverflow.com/users/7715504/csh"}, "edited": false, "score": 0, "creation_date": 1552537311, "post_id": 55153051, "comment_id": 97049750, "body": "Yes, you&#39;re right we can&#39;t have pure TF tensors as the output . For this we need to use Keras layers add and multiply and not just treat them as pure TF tensors. Updated the code; checked that it works now"}], "tags": [], "owner": {"reputation": 124, "user_id": 3675625, "user_type": "registered", "profile_image": "https://graph.facebook.com/1260403541/picture?type=large", "display_name": "Abhimanyu", "link": "https://stackoverflow.com/users/3675625/abhimanyu"}, "is_accepted": true, "score": 1, "last_activity_date": 1552537241, "last_edit_date": 1552537241, "creation_date": 1552522603, "answer_id": 55153051, "question_id": 55152843, "link": "https://stackoverflow.com/questions/55152843/how-do-i-deal-with-a-function-of-a-neural-network/55153051#55153051", "title": "How do I deal with a function of a neural network?", "body": "<p>Yes, you can using the Keras functional API to define your model and using the Keras backend to call functions to multiply tensors. Make sure that x and F(x) are of the same shape so that you can multiply them. You might to define Lambda layers to ensure that your output is a Keras layer. </p>\n\n<p>For example lets say our function F(x) = Sin((x-1)^2); and we want to calculate x*F(x)+x</p>\n\n<p>Define:</p>\n\n<pre><code>from keras.layers import Input,Lambda\nfrom keras.models import Model\nimport keras.backend as K\n\ndef custom_function(x):\n    return K.sin((x-1)*(x-1))+x\n\n\n\ndef create_model(shape=(10,10,10)):\n    x=Input(shape)\n    logits=Lambda(custom_function)(x)\n    logits= keras.layers.multiply([x,logits])\n    logits = keras.layers.add([logits,x])\n    model = Model(inputs=x, outputs=logits)\n    return model\n</code></pre>\n\n<p>All you need to do is to ensure that the shapes are consistent so that we can add them and multiply them. </p>\n\n<p>For some more info on the functional API look at this: <a href=\"https://keras.io/models/model/\" rel=\"nofollow noreferrer\">https://keras.io/models/model/</a></p>\n"}], "owner": {"reputation": 287, "user_id": 7715504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b632a54294e62b00a97dafe32d40734?s=128&d=identicon&r=PG&f=1", "display_name": "CSH", "link": "https://stackoverflow.com/users/7715504/csh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 55153051, "answer_count": 1, "score": 0, "last_activity_date": 1552537241, "creation_date": 1552520958, "question_id": 55152843, "link": "https://stackoverflow.com/questions/55152843/how-do-i-deal-with-a-function-of-a-neural-network", "title": "How do I deal with a function of a neural network?", "body": "<p>I'm a novice for deep learning, and I use keras with tensorflow backend. </p>\n\n<p>Anyway, I have a training set with <em>N</em> inputs and outputs (<em>x_i, y_i</em>). My model first construct a neural network, say <em>F</em>, then use a function <em>g</em> to get <em>y</em>. In other words, <em>y=g(F(x))</em> where <em>F</em> is a neural network and <em>g</em> is a function, possibly not invertible.</p>\n\n<p>Is there a way to construct such model using keras? To simplify, let <em>y=3xF(x)+x</em>. I want to train such model without change training outputs like <em>(y_i-x_i)/(3x_i)</em>.</p>\n"}, {"tags": ["python", "python-3.x", "pandas", "regression"], "comments": [{"owner": {"reputation": 725, "user_id": 5116356, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e5944bca6cd85b6ba84cd1997699aa40?s=128&d=identicon&r=PG&f=1", "display_name": "luca.vercelli", "link": "https://stackoverflow.com/users/5116356/luca-vercelli"}, "edited": false, "score": 0, "creation_date": 1552551977, "post_id": 55152838, "comment_id": 97054927, "body": "Excuse me, I don&#39;t see a &quot;Return&quot; column in your sheet"}, {"owner": {"reputation": 11, "user_id": 11200018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c55d9c3990f647370f1a70e3b2a2ebb4?s=128&d=identicon&r=PG&f=1", "display_name": "Gonko", "link": "https://stackoverflow.com/users/11200018/gonko"}, "reply_to_user": {"reputation": 725, "user_id": 5116356, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e5944bca6cd85b6ba84cd1997699aa40?s=128&d=identicon&r=PG&f=1", "display_name": "luca.vercelli", "link": "https://stackoverflow.com/users/5116356/luca-vercelli"}, "edited": false, "score": 0, "creation_date": 1552552402, "post_id": 55152838, "comment_id": 97055144, "body": "Return column is at the very end of the sheet, above is just a small snippet, I fix that right away, see for the link"}, {"owner": {"reputation": 19091, "user_id": 6246044, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YMZMd.jpg?s=128&g=1", "display_name": "Rory Daulton", "link": "https://stackoverflow.com/users/6246044/rory-daulton"}, "edited": false, "score": 0, "creation_date": 1552552874, "post_id": 55152838, "comment_id": 97055387, "body": "Please show us your Excel file in text form, not as a graphic, so we can try your code and data for ourselves."}, {"owner": {"reputation": 11, "user_id": 11200018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c55d9c3990f647370f1a70e3b2a2ebb4?s=128&d=identicon&r=PG&f=1", "display_name": "Gonko", "link": "https://stackoverflow.com/users/11200018/gonko"}, "edited": false, "score": 0, "creation_date": 1552553679, "post_id": 55152838, "comment_id": 97055848, "body": "<a href=\"https://github.com/GonkoPilo/RegressionData\" rel=\"nofollow noreferrer\">github.com/GonkoPilo/RegressionData</a>"}, {"owner": {"reputation": 11, "user_id": 11200018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c55d9c3990f647370f1a70e3b2a2ebb4?s=128&d=identicon&r=PG&f=1", "display_name": "Gonko", "link": "https://stackoverflow.com/users/11200018/gonko"}, "edited": false, "score": 0, "creation_date": 1552553809, "post_id": 55152838, "comment_id": 97055928, "body": "Thank you for your remark! Above you can get the file, it contains numerous variables for different firms (RIC) over different years. (It does appear I (yet) cannot directly upload files here, there github)"}, {"owner": {"reputation": 725, "user_id": 5116356, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e5944bca6cd85b6ba84cd1997699aa40?s=128&d=identicon&r=PG&f=1", "display_name": "luca.vercelli", "link": "https://stackoverflow.com/users/5116356/luca-vercelli"}, "edited": false, "score": 0, "creation_date": 1552555069, "post_id": 55152838, "comment_id": 97056697, "body": "argument name should be exog, not exogen, <a href=\"https://www.statsmodels.org/dev/generated/statsmodels.regression.linear_model.OLS.html\" rel=\"nofollow noreferrer\">statsmodels.org/dev/generated/&hellip;</a>"}, {"owner": {"reputation": 11, "user_id": 11200018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c55d9c3990f647370f1a70e3b2a2ebb4?s=128&d=identicon&r=PG&f=1", "display_name": "Gonko", "link": "https://stackoverflow.com/users/11200018/gonko"}, "edited": false, "score": 0, "creation_date": 1552555428, "post_id": 55152838, "comment_id": 97056910, "body": "Thank you so much! That is a stupid mistake, but I&#39;m more than glad you found it, stranger on the internet, you helped me really, very much!"}], "owner": {"reputation": 11, "user_id": 11200018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c55d9c3990f647370f1a70e3b2a2ebb4?s=128&d=identicon&r=PG&f=1", "display_name": "Gonko", "link": "https://stackoverflow.com/users/11200018/gonko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1552552912, "creation_date": 1552520944, "last_edit_date": 1552552912, "question_id": 55152838, "link": "https://stackoverflow.com/questions/55152838/run-random-effects-model-in-python-3-7-2-from-excel-file-data", "title": "Run random effects model in python 3.7.2 from excel file data", "body": "<p>I'm trying to undertake a regression using random effects with data I pulled togehter via excel.</p>\n\n<p>Below is my code so far:</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\nimport statsmodels.api as sm\nimport csv\nimport matplotlib.pyplot as plt\n\nxl = pd.ExcelFile(r\"C:\\Users\\Documents\\Studium\\PythonDataSet_6.xlsx\")\ndx1 = xl.parse('PythonData')\n\nreg1 = sm.OLS(endog=dx1['UE'], exogen=dx1['Return'])\ntype(reg1)`  \n</code></pre>\n\n<p>The regression part is the one which fails and gives me the following error:</p>\n\n<hr>\n\n<pre><code>AttributeError                            Traceback (most recent call last)\n&lt;ipython-input-15-5a9bf21b4b87&gt; in &lt;module&gt;\n----&gt; 1 reg1 = sm.OLS(endog=dx1['UE'], exogen=dx1['Return'])\n      2 type(reg1)\n\n c:\\users\\python37\\lib\\site-packages\\statsmodels\\regression\\linear_model.py \nin __init__(self, endog, exog, missing, hasconst, **kwargs)\n    815                  **kwargs):\n    816         super(OLS, self).__init__(endog, exog, missing=missing,    \n--&gt; 817                                   hasconst=hasconst, **kwargs)\n    818         if \"weights\" in self._init_keys:\n    819             self._init_keys.remove(\"weights\")\n\nc:\\users\\python37\\lib\\site-packages\\statsmodels\\regression\\linear_model.py \nin __init__(self, endog, exog, weights, missing, hasconst, **kwargs)\n    661             weights = weights.squeeze()\n    662         super(WLS, self).__init__(endog, exog, missing=missing,\n--&gt; 663                                   weights=weights, hasconst=hasconst, \n**kwargs)\n    664         nobs = self.exog.shape[0]\n    665         weights = self.weights\n\nc:\\users\\python37\\lib\\site-packages\\statsmodels\\regression\\linear_model.py in __init__(self, endog, exog, **kwargs)\n    177     \"\"\"\n    178     def __init__(self, endog, exog, **kwargs):\n--&gt; 179         super(RegressionModel, self).__init__(endog, exog, **kwargs)\n    180         self._data_attr.extend(['pinv_wexog', 'wendog', 'wexog', 'weights'])\n    181 \n\nc:\\users\\python37\\lib\\site-packages\\statsmodels\\base\\model.py in __init__(self, endog, exog, **kwargs)\n    211     def __init__(self, endog, exog=None, **kwargs):\n    212         super(LikelihoodModel, self).__init__(endog, exog, **kwargs)\n--&gt; 213         self.initialize()\n    214 \n    215     def initialize(self):\n\nc:\\users\\python37\\lib\\site-packages\\statsmodels\\regression\\linear_model.py in initialize(self)\n    184         self.wendog = self.whiten(self.endog)\n    185         # overwrite nobs from class Model:\n--&gt; 186         self.nobs = float(self.wexog.shape[0])\n    187 \n    188         self._df_model = None\n\nAttributeError: 'NoneType' object has no attribute 'shape'\n</code></pre>\n\n<p>The excel file which I am using looks like below:</p>\n\n<p><a href=\"https://i.stack.imgur.com/ojdBb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ojdBb.png\" alt=\"enter image description here\"></a></p>\n\n<p>I hope these are all the information needed for an advice, where my problem could be, otherwise I'll be glad to upload more!</p>\n\n<p><a href=\"https://i.stack.imgur.com/NYwIs.png\" rel=\"nofollow noreferrer\">Extended File</a></p>\n"}, {"tags": ["python", "python-3.x"], "answers": [{"comments": [{"owner": {"reputation": 2205, "user_id": 2237467, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/elovN.png?s=128&g=1", "display_name": "Snackoverflow", "link": "https://stackoverflow.com/users/2237467/snackoverflow"}, "edited": false, "score": 0, "creation_date": 1552522517, "post_id": 55152963, "comment_id": 97046413, "body": "Google these keywords: <code>python flask custom response</code> if you want to just send a message without redirecting."}], "tags": [], "owner": {"reputation": 2205, "user_id": 2237467, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/elovN.png?s=128&g=1", "display_name": "Snackoverflow", "link": "https://stackoverflow.com/users/2237467/snackoverflow"}, "is_accepted": false, "score": 1, "last_activity_date": 1557399469, "last_edit_date": 1557399469, "creation_date": 1552521969, "answer_id": 55152963, "question_id": 55152766, "link": "https://stackoverflow.com/questions/55152766/verify-if-the-user-already-exists/55152963#55152963", "title": "Verify if the user already exists", "body": "<p>Before using the <code>INSERT INTO</code> SQL query, you could check if the user exists with a <code>SELECT FROM</code> SQL query.</p>\n\n<pre><code>cur.execute(\"SELECT 1 FROM users WHERE name=%s AND email=%s AND code=%s\", (name,email,code))\n</code></pre>\n\n<p>If one of the fields (name, email or code) is a primary key, then you do not even need to check the other values and make the query simpler be only using the primary key field, e.g.</p>\n\n<pre><code>cur.execute(\"SELECT 1 FROM users WHERE code=%s\", (code,))\n</code></pre>\n\n<p>Nevertheless, if the response contains a row, the user exists, if it does not contain any rows, the user does not exist.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>if cur.rowcount == 1:\n  return redirect(url_for('user_already_exists')) # Send a response redirecting to a page saying the user already exists, if you have a page for that\n</code></pre>\n\n<p>If you are asking about how to write SQL queries (which it seems), then I suggest you read SQL tutorials first, for example from <a href=\"https://www.w3schools.com/sql/\" rel=\"nofollow noreferrer\">W3Schools</a>.</p>\n"}], "owner": {"reputation": 51, "user_id": 7659789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2d5ba539d07fbc90f8a7d62b6638f5c?s=128&d=identicon&r=PG&f=1", "display_name": "Saul Salcedo", "link": "https://stackoverflow.com/users/7659789/saul-salcedo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 380, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1557399469, "creation_date": 1552520401, "last_edit_date": 1552520749, "question_id": 55152766, "link": "https://stackoverflow.com/questions/55152766/verify-if-the-user-already-exists", "title": "Verify if the user already exists", "body": "<p>I'm doing a login in python flask, and when registering a new user I would like to search in the database.  If the user is already registered, the code should send a message that the user already exists.</p>\n\n<p><strong>This is my registration code:</strong></p>\n\n<pre><code>@app.route('/register', methods=[\"GET\", \"POST\"])\ndef register():\n    if request.method == 'GET':\n        return render_template(\"register.html\")\n    else:\n        name = request.form['name']\n        email = request.form['email']\n        code = request.form['code']\n        password = request.form['password'].encode('utf-8')\n        hash_password = bcrypt.hashpw(password, bcrypt.gensalt())\n\n        cur = mysql.connection.cursor()\n        cur.execute(\"INSERT INTO users (name, email, code, password) VALUES (%s,%s,%s,%s)\",(name,email,code,hash_password,))\n        mysql.connection.commit()\n        session['name'] = request.form['name']\n        session['email'] = request.form['email']\n        session['code'] = request.form['code']\n        return redirect(url_for('home'))\n</code></pre>\n\n<p>How would you do that?</p>\n"}, {"tags": ["python", "eventlet"], "answers": [{"tags": [], "owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "is_accepted": false, "score": 5, "last_activity_date": 1554235117, "last_edit_date": 1554235117, "creation_date": 1554229590, "answer_id": 55481339, "question_id": 55152733, "link": "https://stackoverflow.com/questions/55152733/eventlet-importerror-no-module-named-dnskeybase/55481339#55481339", "title": "Eventlet - ImportError: No module named dnskeybase", "body": "<p>Your local <code>dnspython</code> package installation is broken, or being masked by an incomplete <code>dns.rdtypes</code> package in a different location. It is missing (at least) the <code>dns.rdtypes.dnskeybase</code> module; it's just another <a href=\"https://github.com/rthalley/dnspython/blob/master/dns/rdtypes/dnskeybase.py\" rel=\"noreferrer\">pure-Python module</a>, nothing special.</p>\n\n<p>The exception message may look a little confusing, because it doesn't name the full path. The moral equivalent of the following Python expression is being executed:</p>\n\n<pre><code>module_name = 'dns.rdtypes.dnskeybase'\n__import__(module_name, {}, {}, module_name.split('.')[:-1])\n</code></pre>\n\n<p>which uses the <a href=\"https://docs.python.org/2/library/functions.html#__import__\" rel=\"noreferrer\"><code>__import__</code> function</a> to dynamically import the <code>dnskeybase</code> module from the <code>dns.rdtypes</code> package. When it is missing, however, the <code>ImportError: No module named dnskeybase</code> exception raised doesn't include the <code>dns.rdtypes</code> component, even though that's the only location that the import was attempted from. The <code>eventlet.support.greendns</code> module has, by this stage, already imported <code>dns.rdtypes</code> itself, so we know that for your installation, that package at least is present and importable.</p>\n\n<p>A normal full install of the package adds a <code>site-packages/dns</code> directory with the following files (plus corresponding <code>.pyc</code> byte-cache files):</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>lib/python2.7/site-packages/dns\n\u251c\u2500\u2500 __init__.py\n\u251c\u2500\u2500 _compat.py\n\u251c\u2500\u2500 dnssec.py\n\u251c\u2500\u2500 e164.py\n\u251c\u2500\u2500 edns.py\n\u251c\u2500\u2500 entropy.py\n\u251c\u2500\u2500 exception.py\n\u251c\u2500\u2500 flags.py\n\u251c\u2500\u2500 grange.py\n\u251c\u2500\u2500 hash.py\n\u251c\u2500\u2500 inet.py\n\u251c\u2500\u2500 ipv4.py\n\u251c\u2500\u2500 ipv6.py\n\u251c\u2500\u2500 message.py\n\u251c\u2500\u2500 name.py\n\u251c\u2500\u2500 namedict.py\n\u251c\u2500\u2500 node.py\n\u251c\u2500\u2500 opcode.py\n\u251c\u2500\u2500 py.typed\n\u251c\u2500\u2500 query.py\n\u251c\u2500\u2500 rcode.py\n\u251c\u2500\u2500 rdata.py\n\u251c\u2500\u2500 rdataclass.py\n\u251c\u2500\u2500 rdataset.py\n\u251c\u2500\u2500 rdatatype.py\n\u251c\u2500\u2500 rdtypes\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 ANY\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 AFSDB.py\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 AVC.py\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 CAA.py\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 CDNSKEY.py\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 CDS.py\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 CERT.py\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 CNAME.py\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 CSYNC.py\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 DLV.py\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 DNAME.py\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 DNSKEY.py\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 DS.py\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 EUI48.py\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 EUI64.py\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 GPOS.py\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 HINFO.py\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 HIP.py\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 ISDN.py\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 LOC.py\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 MX.py\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 NS.py\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 NSEC.py\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 NSEC3.py\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 NSEC3PARAM.py\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 OPENPGPKEY.py\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 PTR.py\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 RP.py\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 RRSIG.py\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 RT.py\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 SOA.py\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 SPF.py\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 SSHFP.py\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 TLSA.py\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 TXT.py\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 URI.py\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 X25.py\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 __init__.py\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 CH\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 A.py\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 __init__.py\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 IN\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 A.py\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 AAAA.py\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 APL.py\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 DHCID.py\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 IPSECKEY.py\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 KX.py\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 NAPTR.py\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 NSAP.py\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 NSAP_PTR.py\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 PX.py\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 SRV.py\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 WKS.py\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 __init__.py\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 __init__.py\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 dnskeybase.py\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 dsbase.py\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 euibase.py\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 mxbase.py\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 nsbase.py\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 txtbase.py\n\u251c\u2500\u2500 renderer.py\n\u251c\u2500\u2500 resolver.py\n\u251c\u2500\u2500 reversename.py\n\u251c\u2500\u2500 rrset.py\n\u251c\u2500\u2500 set.py\n\u251c\u2500\u2500 tokenizer.py\n\u251c\u2500\u2500 tsig.py\n\u251c\u2500\u2500 tsigkeyring.py\n\u251c\u2500\u2500 ttl.py\n\u251c\u2500\u2500 update.py\n\u251c\u2500\u2500 version.py\n\u251c\u2500\u2500 wiredata.py\n\u2514\u2500\u2500 zone.py\n</code></pre>\n\n<p>A properly installed <code>dnspython</code> version 1.16.0 produces the following MD5 checksum for the Python source files in the file tree:</p>\n\n<pre><code>$ ( cd /lib/python2.7/site-packages/dns; export LC_ALL=C; find . -name \\*.py -exec md5sum {} \\; | sort -k 2 | md5sum )\n28e20d8474f4f07287c305dbd5dae8b8  -\n</code></pre>\n\n<p>If you run the same command and you get a different output then your local installation is incomplete.</p>\n\n<p>I recommend you <em>reinstall</em> the package; this is trivially done with <code>pip install --ignore-installed</code>:</p>\n\n<pre><code>$ pip install --ignore-installed dnspython\nDEPRECATION: Python 2.7 will reach the end of its life on January 1st, 2020. Please upgrade your Python as Python 2.7 won't be maintained after that date. A future version of pip will drop support for Python 2.7.\nCollecting dnspython\n  Using cached https://files.pythonhosted.org/packages/ec/d3/3aa0e7213ef72b8585747aa0e271a9523e713813b9a20177ebe1e939deb0/dnspython-1.16.0-py2.py3-none-any.whl\nInstalling collected packages: dnspython\nSuccessfully installed dnspython-1.16.0\n</code></pre>\n\n<p>If you still experience issues even after reinstalling, or you got the same MD5 checksum of the file tree, then you have a <em>different</em> <code>dns.rdtypes</code> package on your python module search path that is masking the proper version.</p>\n\n<p>You can find that package by adding:</p>\n\n<pre><code>import dns.rdtypes\nprint(dns.rdtypes.__file__)\n</code></pre>\n\n<p>at the top of your <code>scraper.py</code> script, before the <code>import eventlet</code> line. Feel free to use <code>import sys; sys.exit()</code> right after to prevent the full traceback. The file printed should tell you where to look for the rogue package that is interfering. Once you find it, rename that <code>dns</code> directory, or adjust your <code>PYTHONPATH</code> environment variable to not include the directory that the <code>dns</code> directory is located in, or delete it entirely.</p>\n"}], "owner": {"reputation": 20382, "user_id": 2199852, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/609a8dbb58ae54662d89367894520a5e?s=128&d=identicon&r=PG&f=1", "display_name": "User", "link": "https://stackoverflow.com/users/2199852/user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 631, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1554235117, "creation_date": 1552520081, "last_edit_date": 1552524461, "question_id": 55152733, "link": "https://stackoverflow.com/questions/55152733/eventlet-importerror-no-module-named-dnskeybase", "title": "Eventlet - ImportError: No module named dnskeybase", "body": "<p>I can't import eventlet on my production system. It's saying no module named dnskeybase.</p>\n\n<pre><code># python scraper.py \nTraceback (most recent call last):\n  File \"scraper.py\", line 7, in &lt;module&gt;\n    import eventlet\n  File \"/usr/lib/python2.7/site-packages/eventlet/__init__.py\", line 10, in &lt;module&gt;\n    from eventlet import convenience\n  File \"/usr/lib/python2.7/site-packages/eventlet/convenience.py\", line 7, in &lt;module&gt;\n    from eventlet.green import socket\n  File \"/usr/lib/python2.7/site-packages/eventlet/green/socket.py\", line 21, in &lt;module&gt;\n    from eventlet.support import greendns\n  File \"/usr/lib/python2.7/site-packages/eventlet/support/greendns.py\", line 67, in &lt;module&gt;\n    setattr(dns.rdtypes, pkg, import_patched('dns.rdtypes.' + pkg))\n  File \"/usr/lib/python2.7/site-packages/eventlet/support/greendns.py\", line 59, in import_patched\n    return patcher.import_patched(module_name, **modules)\n  File \"/usr/lib/python2.7/site-packages/eventlet/patcher.py\", line 120, in import_patched\n    *additional_modules + tuple(kw_additional_modules.items()))\n  File \"/usr/lib/python2.7/site-packages/eventlet/patcher.py\", line 94, in inject\n    module = __import__(module_name, {}, {}, module_name.split('.')[:-1])\nImportError: No module named dnskeybase\n</code></pre>\n\n<p>So I tried to install it...</p>\n\n<pre><code># pip install dnskeybase\nDEPRECATION: Python 2.7 will reach the end of its life on January 1st, 2020. Please upgrade your Python as Python 2.7 won't be maintained after that date. A future version of pip will drop support for Python 2.7.\nCollecting dnskeybase\n  Could not find a version that satisfies the requirement dnskeybase (from versions: )\nNo matching distribution found for dnskeybase\n</code></pre>\n\n<p>and:</p>\n\n<pre><code># pip install dnspython\nDEPRECATION: Python 2.7 will reach the end of its life on January 1st, 2020. Please upgrade your Python as Python 2.7 won't be maintained after that date. A future version of pip will drop support for Python 2.7.\nRequirement already satisfied: dnspython in /usr/lib/python2.7/site-packages (1.16.0)\n</code></pre>\n\n<p>and the eventlet version/installation:</p>\n\n<pre><code># pip install eventlet\nDEPRECATION: Python 2.7 will reach the end of its life on January 1st, 2020. Please upgrade your Python as Python 2.7 won't be maintained after that date. A future version of pip will drop support for Python 2.7.\nCollecting eventlet\n  Using cached https://files.pythonhosted.org/packages/86/7e/96e1412f96eeb2f2eca9342dcc4d5bc9305880a448b603b0a8e54439b71c/eventlet-0.24.1-py2.py3-none-any.whl\nRequirement already satisfied: monotonic&gt;=1.4 in /usr/lib/python2.7/site-packages (from eventlet) (1.5)\nRequirement already satisfied: six&gt;=1.10.0 in /usr/lib/python2.7/site-packages (from eventlet) (1.12.0)\nRequirement already satisfied: dnspython&gt;=1.15.0 in /usr/lib/python2.7/site-packages (from eventlet) (1.16.0)\nRequirement already satisfied: greenlet&gt;=0.3 in /usr/lib64/python2.7/site-packages (from eventlet) (0.4.15)\nRequirement already satisfied: enum34; python_version &lt; \"3.4\" in /usr/lib/python2.7/site-packages (from eventlet) (1.1.6)\nInstalling collected packages: eventlet\nSuccessfully installed eventlet-0.24.1\n</code></pre>\n\n<p>Any idea?</p>\n"}, {"tags": ["python", "ggplot2", "graph", "data-analysis", "plotnine"], "comments": [{"owner": {"reputation": 1174, "user_id": 8998310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/620a41a51c7a40164675ceae1c0b6548?s=128&d=identicon&r=PG&f=1", "display_name": "josemz", "link": "https://stackoverflow.com/users/8998310/josemz"}, "edited": false, "score": 0, "creation_date": 1552522215, "post_id": 55152621, "comment_id": 97046330, "body": "Can&#39;t really replicate without some data but I think it has something to do with the type of your class column. In R class would have to be a factor (categorical), there is a category type in pandas, so maybe <code>df[&#39;class&#39;] = df[&#39;class&#39;].astype(&#39;category&#39;)</code> might help."}, {"owner": {"reputation": 3, "user_id": 8175057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9bc8153f8c75bb11d85477f03133ac3?s=128&d=identicon&r=PG&f=1", "display_name": "Vladislav Gusak", "link": "https://stackoverflow.com/users/8175057/vladislav-gusak"}, "reply_to_user": {"reputation": 1174, "user_id": 8998310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/620a41a51c7a40164675ceae1c0b6548?s=128&d=identicon&r=PG&f=1", "display_name": "josemz", "link": "https://stackoverflow.com/users/8998310/josemz"}, "edited": false, "score": 1, "creation_date": 1552542355, "post_id": 55152621, "comment_id": 97051018, "body": "This doesn&#39;t help."}, {"owner": {"reputation": 3, "user_id": 8175057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9bc8153f8c75bb11d85477f03133ac3?s=128&d=identicon&r=PG&f=1", "display_name": "Vladislav Gusak", "link": "https://stackoverflow.com/users/8175057/vladislav-gusak"}, "reply_to_user": {"reputation": 1174, "user_id": 8998310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/620a41a51c7a40164675ceae1c0b6548?s=128&d=identicon&r=PG&f=1", "display_name": "josemz", "link": "https://stackoverflow.com/users/8998310/josemz"}, "edited": false, "score": 0, "creation_date": 1552542426, "post_id": 55152621, "comment_id": 97051039, "body": "@josemz I have updated post, there is link to data in the end of text."}, {"owner": {"reputation": 1174, "user_id": 8998310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/620a41a51c7a40164675ceae1c0b6548?s=128&d=identicon&r=PG&f=1", "display_name": "josemz", "link": "https://stackoverflow.com/users/8998310/josemz"}, "edited": false, "score": 0, "creation_date": 1552577815, "post_id": 55152621, "comment_id": 97072337, "body": "Are you sure? I just replicated the problem with simulated data and changing the column to category fixed it."}, {"owner": {"reputation": 3, "user_id": 8175057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9bc8153f8c75bb11d85477f03133ac3?s=128&d=identicon&r=PG&f=1", "display_name": "Vladislav Gusak", "link": "https://stackoverflow.com/users/8175057/vladislav-gusak"}, "reply_to_user": {"reputation": 1174, "user_id": 8998310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/620a41a51c7a40164675ceae1c0b6548?s=128&d=identicon&r=PG&f=1", "display_name": "josemz", "link": "https://stackoverflow.com/users/8998310/josemz"}, "edited": false, "score": 0, "creation_date": 1552578561, "post_id": 55152621, "comment_id": 97072853, "body": "@josemz could you please share your results(with screenshot) and code in &quot;answer&quot;  block? I copy-pasted line that you attached but there weren&#39;t changes. Maybe there is any troubles in libraries versions or something else."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 8175057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9bc8153f8c75bb11d85477f03133ac3?s=128&d=identicon&r=PG&f=1", "display_name": "Vladislav Gusak", "link": "https://stackoverflow.com/users/8175057/vladislav-gusak"}, "edited": false, "score": 0, "creation_date": 1552583444, "post_id": 55166848, "comment_id": 97076058, "body": "It works! Thanks! Don&#39;t know what was not correct when I tried before."}, {"owner": {"reputation": 181, "user_id": 8677393, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GjvUf.jpg?s=128&g=1", "display_name": "L.Yang", "link": "https://stackoverflow.com/users/8677393/l-yang"}, "edited": false, "score": 0, "creation_date": 1596145727, "post_id": 55166848, "comment_id": 111726309, "body": "To change it to category type does not help fix the same issue in my plot though =("}], "tags": [], "owner": {"reputation": 1174, "user_id": 8998310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/620a41a51c7a40164675ceae1c0b6548?s=128&d=identicon&r=PG&f=1", "display_name": "josemz", "link": "https://stackoverflow.com/users/8998310/josemz"}, "is_accepted": true, "score": 0, "last_activity_date": 1552578696, "creation_date": 1552578696, "answer_id": 55166848, "question_id": 55152621, "link": "https://stackoverflow.com/questions/55152621/multiclass-plotnine-geom-density-graph-doesnt-work/55166848#55166848", "title": "Multiclass plotnine geom_density graph doesn&#39;t work", "body": "<p>Sorry I can't download your data but here's the solution with simulated data.</p>\n\n<pre><code>import numpy as np\nimport pandas as pd\nfrom plotnine import *\n\nnp.random.seed(0)\n\ndf = pd.DataFrame({'x': np.hstack((\n                        np.random.normal(size=1000), \n                        np.random.normal(10, 2, size=1000), \n                        np.random.normal(-10, 2, size=1000))), \n                   'c': [0]*1000 + [1]*1000 + [2]*1000})\n\n(ggplot(df, aes('x', color='c', fill='c')) + geom_density(alpha=0.7))\n</code></pre>\n\n<p>Yields this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/G8ekZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/G8ekZ.png\" alt=\"\"></a></p>\n\n<p>Taking the first 1,000 rows (corresponding to <code>c == 0</code>):</p>\n\n<pre><code>(ggplot(df[:1000], aes('x', color='c', fill='c')) + geom_density(alpha=0.7))\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/UL3fq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UL3fq.png\" alt=\"\"></a></p>\n\n<p>Now creating a categorical variable:</p>\n\n<pre><code>df['cat'] = df['c'].astype('category')\n(ggplot(df, aes('x', color='cat', fill='cat')) + geom_density(alpha=0.7))\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/Rr6h8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Rr6h8.png\" alt=\"\"></a></p>\n"}], "owner": {"reputation": 3, "user_id": 8175057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9bc8153f8c75bb11d85477f03133ac3?s=128&d=identicon&r=PG&f=1", "display_name": "Vladislav Gusak", "link": "https://stackoverflow.com/users/8175057/vladislav-gusak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 473, "favorite_count": 0, "accepted_answer_id": 55166848, "answer_count": 1, "score": 0, "last_activity_date": 1552578696, "creation_date": 1552519283, "last_edit_date": 1552551983, "question_id": 55152621, "link": "https://stackoverflow.com/questions/55152621/multiclass-plotnine-geom-density-graph-doesnt-work", "title": "Multiclass plotnine geom_density graph doesn&#39;t work", "body": "<p>I have trouble using plotnine: I can't make graphic with 3 classes in(separated by color).</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\n\nfrom plotnine import *\n\npath = '/home/punkproger/workspace/MyWorkPython/TestWork/galaxy_identificator/data/train.csv'\n\ndf = pd.read_csv(path)\n\nmy_plot = ggplot(data=df[:30000], mapping=aes(x='ra', fill='class', color='class')) + geom_density( alpha=0.7)\nprint(my_plot)\n</code></pre>\n\n<p>There is new 'class'(0-2) in each 10k samples.</p>\n\n<p>Result will be:</p>\n\n<p><a href=\"https://i.stack.imgur.com/6E2Bc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6E2Bc.png\" alt=\"this graph\"></a></p>\n\n<p>But If I change number of samples to 10k(there is only 1 class):</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\n\nfrom plotnine import *\n\npath = '/home/punkproger/workspace/MyWorkPython/TestWork/galaxy_identificator/data/train.csv'\n\ndf = pd.read_csv(path)\n\nmy_plot = ggplot(data=df[:10000], mapping=aes(x='ra', fill='class', color='class')) + geom_density( alpha=0.7)\nprint(my_plot)\n</code></pre>\n\n<p>Result is:</p>\n\n<p><a href=\"https://i.stack.imgur.com/YAGns.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YAGns.png\" alt=\"this graph\"></a></p>\n\n<p>Now this one has tittle of class and color.\nI want to make 3 graphs in one plane, like: </p>\n\n<p><a href=\"https://i.stack.imgur.com/DJ2MH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DJ2MH.png\" alt=\"this one\"></a></p>\n\n<p>I am newbee at plotnine and don't see what is wrong. Spent a lot of time trying to google and to solve this problem. </p>\n\n<p>Here you can download data : <a href=\"https://drive.google.com/file/d/1IMK1YtXG8Zl1lY8JJ12RtzDpHn65vQKi/view\" rel=\"nofollow noreferrer\">https://drive.google.com/file/d/1IMK1YtXG8Zl1lY8JJ12RtzDpHn65vQKi/view</a></p>\n"}, {"tags": ["python", "pandas", "pandas-groupby"], "answers": [{"tags": [], "owner": {"reputation": 21903, "user_id": 9274732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2713715b9156a66c16d7c1331528dce8?s=128&d=identicon&r=PG&f=1", "display_name": "Ben.T", "link": "https://stackoverflow.com/users/9274732/ben-t"}, "is_accepted": false, "score": 2, "last_activity_date": 1552519564, "creation_date": 1552519564, "answer_id": 55152653, "question_id": 55152600, "link": "https://stackoverflow.com/questions/55152600/pandas-grouby-indexing-discard-entire-group-if-condition-is-not-met/55152653#55152653", "title": "Pandas grouby indexing : discard entire group if condition is not met", "body": "<p>You can use <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.core.groupby.DataFrameGroupBy.filter.html\" rel=\"nofollow noreferrer\"><code>groupby.filter</code></a> such as:</p>\n\n<pre><code>print (df.groupby('alpha').filter(lambda x: (x.beta &gt;1).all()))\n  alpha  beta\n2     b     3\n3     b     4\n</code></pre>\n\n<p>For the <code>lambda</code>, I understood that you want that <code>all</code> the value of the group in <code>beta</code> should be over 1 according to your expected output.</p>\n"}, {"tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": true, "score": 3, "last_activity_date": 1552522272, "creation_date": 1552522272, "answer_id": 55153006, "question_id": 55152600, "link": "https://stackoverflow.com/questions/55152600/pandas-grouby-indexing-discard-entire-group-if-condition-is-not-met/55153006#55153006", "title": "Pandas grouby indexing : discard entire group if condition is not met", "body": "<p>Try not using <code>groupby</code> , <code>isin</code> </p>\n\n<pre><code>df.loc[~df.alpha.isin(df.loc[df.beta&lt;=1,'alpha'])]\nOut[316]: \n  alpha  beta\n2     b     3\n3     b     4\n</code></pre>\n\n<p>If do want groupby , you can using <code>transform</code> , since this is more efficient than pass <code>lambda</code> </p>\n\n<pre><code>df[df.beta.gt(1).groupby(df.alpha).transform('all')]\nOut[317]: \n  alpha  beta\n2     b     3\n3     b     4\n</code></pre>\n\n<hr>\n\n<p>Timing </p>\n\n<pre><code>%timeit df.groupby('alpha').filter(lambda x: (x.beta &gt;1).all())\n100 loops, best of 3: 2.53 ms per loop\n%timeit df.loc[~df.alpha.isin(df.loc[df.beta&lt;=1,'alpha'])]\n1000 loops, best of 3: 874 \u00b5s per loop\n%timeit df[df.beta.gt(1).groupby(df.alpha).transform('all')]\n100 loops, best of 3: 2.04 ms per loop\n</code></pre>\n"}], "owner": {"reputation": 319, "user_id": 4193922, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/014ad153df47c1a33dd6630e789c21dc?s=128&d=identicon&r=PG&f=1", "display_name": "Mehtab Pathan", "link": "https://stackoverflow.com/users/4193922/mehtab-pathan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 55153006, "answer_count": 2, "score": 2, "last_activity_date": 1594411125, "creation_date": 1552519161, "last_edit_date": 1594411125, "question_id": 55152600, "link": "https://stackoverflow.com/questions/55152600/pandas-grouby-indexing-discard-entire-group-if-condition-is-not-met", "title": "Pandas grouby indexing : discard entire group if condition is not met", "body": "<p>I have a pandas dataframe as follows:</p>\n\n<pre><code>df = pd.DataFrame({'alpha':['a','a','b','b'],'beta':[1,2,3,4]})\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/VOC43.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VOC43.png\" alt=\"enter image description here\"></a></p>\n\n<p>The idea is to only return groups where certain condition is met on column <code>beta</code>, otherwise discard the entire group</p>\n\n<p>The outcome I want is:</p>\n\n<p><a href=\"https://i.stack.imgur.com/A3PoQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/A3PoQ.png\" alt=\"enter image description here\"></a></p>\n\n<p>However, something like for eg.</p>\n\n<pre><code>df.groupby('alpha').apply(lambda x: x.beta&gt;1) \n</code></pre>\n\n<p>doesn't work. </p>\n"}, {"tags": ["python", "python-3.7"], "comments": [{"owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 0, "creation_date": 1552519234, "post_id": 55152576, "comment_id": 97045576, "body": "macOS? Are you sure? That error message appears to reference a Windows build of Python."}, {"owner": {"reputation": 216, "user_id": 5270951, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/912e784fefa1d9205673924a82d8dc1b?s=128&d=identicon&r=PG", "display_name": "jimmytt", "link": "https://stackoverflow.com/users/5270951/jimmytt"}, "reply_to_user": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 0, "creation_date": 1552519399, "post_id": 55152576, "comment_id": 97045622, "body": "Yep, I&#39;m running this from my Macbook Pro Retina, though, maybe it&#39;s cuz I&#39;m running this from Visual Studio Code?"}, {"owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 0, "creation_date": 1552525094, "post_id": 55152576, "comment_id": 97047057, "body": "No, that wouldn&#39;t explain it. Are you <i>really sure</i> this is the exact error message you&#39;re seeing?"}, {"owner": {"reputation": 216, "user_id": 5270951, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/912e784fefa1d9205673924a82d8dc1b?s=128&d=identicon&r=PG", "display_name": "jimmytt", "link": "https://stackoverflow.com/users/5270951/jimmytt"}, "reply_to_user": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 0, "creation_date": 1552542577, "post_id": 55152576, "comment_id": 97051091, "body": "I amended the error message above. I also tried changing the import line from: &#39;from turtle import *&#39; --&gt; &#39;from turtle, import *&#39; and it gave me a simpler error: &#39;  File &quot;SquareSpiral1.py&quot;, line 2     from turtle, import *                ^ SyntaxError: invalid syntax&#39;"}], "answers": [{"comments": [{"owner": {"reputation": 216, "user_id": 5270951, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/912e784fefa1d9205673924a82d8dc1b?s=128&d=identicon&r=PG", "display_name": "jimmytt", "link": "https://stackoverflow.com/users/5270951/jimmytt"}, "edited": false, "score": 0, "creation_date": 1552543253, "post_id": 55155757, "comment_id": 97051303, "body": "When I import turtle into my Python 3.7.2 shell, it works, though this is not ideal for me."}, {"owner": {"reputation": 216, "user_id": 5270951, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/912e784fefa1d9205673924a82d8dc1b?s=128&d=identicon&r=PG", "display_name": "jimmytt", "link": "https://stackoverflow.com/users/5270951/jimmytt"}, "edited": false, "score": 0, "creation_date": 1552543357, "post_id": 55155757, "comment_id": 97051346, "body": "Tried &quot;from turtle import turtle&quot;, but giving me the same error message."}, {"owner": {"reputation": 540, "user_id": 10152102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a9d50c21d212c60e894131fb6730528?s=128&d=identicon&r=PG&f=1", "display_name": "renny", "link": "https://stackoverflow.com/users/10152102/renny"}, "reply_to_user": {"reputation": 216, "user_id": 5270951, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/912e784fefa1d9205673924a82d8dc1b?s=128&d=identicon&r=PG", "display_name": "jimmytt", "link": "https://stackoverflow.com/users/5270951/jimmytt"}, "edited": false, "score": 0, "creation_date": 1552543511, "post_id": 55155757, "comment_id": 97051406, "body": "Does your installed python has Tk support?  or check the name of the turtle file in src directory of turtle.  It should be turtle.py"}, {"owner": {"reputation": 216, "user_id": 5270951, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/912e784fefa1d9205673924a82d8dc1b?s=128&d=identicon&r=PG", "display_name": "jimmytt", "link": "https://stackoverflow.com/users/5270951/jimmytt"}, "edited": false, "score": 0, "creation_date": 1552544243, "post_id": 55155757, "comment_id": 97051678, "body": "I tried &#39;brew install python3-tk&#39; and got:  &quot;Error: No available formula with the name &quot;python3-tk&quot;"}], "tags": [], "owner": {"reputation": 540, "user_id": 10152102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a9d50c21d212c60e894131fb6730528?s=128&d=identicon&r=PG&f=1", "display_name": "renny", "link": "https://stackoverflow.com/users/10152102/renny"}, "is_accepted": false, "score": 1, "last_activity_date": 1552543022, "last_edit_date": 1552543022, "creation_date": 1552542613, "answer_id": 55155757, "question_id": 55152576, "link": "https://stackoverflow.com/questions/55152576/cant-import-turtle-on-mac-os-mojave-version-10-14-2/55155757#55155757", "title": "Can&#39;t import turtle on Mac OS Mojave (version 10.14.2)", "body": "<p>The turtle module provides turtle graphics primitives, in both object-oriented and procedure-oriented ways. Because it uses tkinter for the underlying graphics, it needs a version of Python installed with Tk support.</p>\n\n<p>Also, try this.</p>\n\n<pre><code>from turtle import Turtle\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 216, "user_id": 5270951, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/912e784fefa1d9205673924a82d8dc1b?s=128&d=identicon&r=PG", "display_name": "jimmytt", "link": "https://stackoverflow.com/users/5270951/jimmytt"}, "edited": false, "score": 0, "creation_date": 1552575624, "post_id": 55157075, "comment_id": 97070696, "body": "Deleted that turtle.py file, and it worked! (It was a saved session from IDLE 3.7.2: &quot;Python 3.7.2 (tags/v3.7.2:9a3ffc0492, Dec 23 2018, 22:20:52) [MSC v.1916 32 bit (Intel)] on win32&quot;)"}], "tags": [], "owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": true, "score": 1, "last_activity_date": 1552548638, "creation_date": 1552548638, "answer_id": 55157075, "question_id": 55152576, "link": "https://stackoverflow.com/questions/55152576/cant-import-turtle-on-mac-os-mojave-version-10-14-2/55157075#55157075", "title": "Can&#39;t import turtle on Mac OS Mojave (version 10.14.2)", "body": "<p>You have somehow saved a file of Python <em>output</em> -- from a Windows computer! -- to a file named <code>turtle.py</code> on your desktop.</p>\n\n<p>Delete or rename this file. It's conflicting with the <code>turtle</code> module built into Python.</p>\n"}], "owner": {"reputation": 216, "user_id": 5270951, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/912e784fefa1d9205673924a82d8dc1b?s=128&d=identicon&r=PG", "display_name": "jimmytt", "link": "https://stackoverflow.com/users/5270951/jimmytt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 655, "favorite_count": 0, "accepted_answer_id": 55157075, "answer_count": 2, "score": 0, "last_activity_date": 1552548638, "creation_date": 1552518992, "last_edit_date": 1552542423, "question_id": 55152576, "link": "https://stackoverflow.com/questions/55152576/cant-import-turtle-on-mac-os-mojave-version-10-14-2", "title": "Can&#39;t import turtle on Mac OS Mojave (version 10.14.2)", "body": "<p>Trying to simply import turtle to run some lines, but my macOS Mojave (version 10.14.2) can't run it.</p>\n\n<pre><code>Mac @ ~/Desktop - [master] $ python3 SquareSpiral1.py\nTraceback (most recent call last):\n  File \"SquareSpiral1.py\", line 2, in &lt;module&gt;\n    import turtle\n  File \"/Users/Mac/Desktop/turtle.py\", line 1\n    Python 3.7.2 (tags/v3.7.2:9a3ffc0492, Dec 23 2018, 22:20:52) [MSC v.1916 32 bit (Intel)] on win32\n             ^\nSyntaxError: invalid syntax\n</code></pre>\n"}, {"tags": ["python", "sftp", "paramiko", "pysftp"], "comments": [{"owner": {"reputation": 144837, "user_id": 850848, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c287735beca76400cb9b6d08bf591cb9?s=128&d=identicon&r=PG", "display_name": "Martin Prikryl", "link": "https://stackoverflow.com/users/850848/martin-prikryl"}, "edited": false, "score": 0, "creation_date": 1552549113, "post_id": 55152565, "comment_id": 97053572, "body": "So your &quot;keyboard interactive&quot; authentication is only asking for a simple password? Nothing fancy?"}, {"owner": {"reputation": 23, "user_id": 7116536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e764e264ce2735b9f9ae628295097490?s=128&d=identicon&r=PG&f=1", "display_name": "tka3214", "link": "https://stackoverflow.com/users/7116536/tka3214"}, "reply_to_user": {"reputation": 144837, "user_id": 850848, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c287735beca76400cb9b6d08bf591cb9?s=128&d=identicon&r=PG", "display_name": "Martin Prikryl", "link": "https://stackoverflow.com/users/850848/martin-prikryl"}, "edited": false, "score": 0, "creation_date": 1552578178, "post_id": 55152565, "comment_id": 97072595, "body": "Yep, keyboard interactive is only asking for a simple password. Hence why I&#39;m able to do that in cmd line (sftp), but weirdly not pysftp"}, {"owner": {"reputation": 144837, "user_id": 850848, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c287735beca76400cb9b6d08bf591cb9?s=128&d=identicon&r=PG", "display_name": "Martin Prikryl", "link": "https://stackoverflow.com/users/850848/martin-prikryl"}, "edited": false, "score": 0, "creation_date": 1552629929, "post_id": 55152565, "comment_id": 97091272, "body": "What version of Paramiko and pysftp are you using? + Show us <code>ssh -vvv user@host</code> output."}], "answers": [{"tags": [], "owner": {"reputation": 356, "user_id": 1220224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52b66522c751feb207f2fdb6a8c5426?s=128&d=identicon&r=PG", "display_name": "AzMoo", "link": "https://stackoverflow.com/users/1220224/azmoo"}, "is_accepted": false, "score": 0, "last_activity_date": 1552520044, "creation_date": 1552520044, "answer_id": 55152728, "question_id": 55152565, "link": "https://stackoverflow.com/questions/55152565/how-to-enable-keyboard-interactive-authentication-in-python-with-pysftp-paramiko/55152728#55152728", "title": "How to enable keyboard-interactive authentication in python with pysftp/paramiko?", "body": "<p>Paramiko since version 1.5 will attempt keyboard-interactive mode by default. Documentation (<a href=\"http://docs.paramiko.org/en/2.4/api/transport.html#paramiko.transport.Transport.connect\" rel=\"nofollow noreferrer\">http://docs.paramiko.org/en/2.4/api/transport.html#paramiko.transport.Transport.connect</a>) states:</p>\n\n<blockquote>\n  <p>Since 1.5, if no event is passed and fallback is True (the default), if the server doesn\u2019t support plain password authentication but does support so-called \u201ckeyboard-interactive\u201d mode, an attempt will be made to authenticate using this interactive mode. </p>\n</blockquote>\n\n<p>You can see in the output that it is actually attempting keyboard-interactive mode and failing:</p>\n\n<blockquote>\n  <p>INFO:paramiko.transport:Authentication (keyboard-interactive) failed.</p>\n</blockquote>\n\n<p>So I suspect there is a problem with the username or password being passed to pysftp.Connection. Is it the username? You've got that set as <code>###USER</code> on <code>SERVER2</code>.</p>\n"}], "owner": {"reputation": 23, "user_id": 7116536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e764e264ce2735b9f9ae628295097490?s=128&d=identicon&r=PG&f=1", "display_name": "tka3214", "link": "https://stackoverflow.com/users/7116536/tka3214"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1303, "favorite_count": 1, "closed_date": 1617113385, "answer_count": 1, "score": -1, "last_activity_date": 1552520044, "creation_date": 1552518929, "last_edit_date": 1592644375, "question_id": 55152565, "link": "https://stackoverflow.com/questions/55152565/how-to-enable-keyboard-interactive-authentication-in-python-with-pysftp-paramiko", "closed_reason": "Duplicate", "title": "How to enable keyboard-interactive authentication in python with pysftp/paramiko?", "body": "<p>I am able to sftp into both SERVER1 and SERVER2 (specified above). I can use the <em>command line</em> to sftp into both SERVER1 and SERVER2, no problem.</p>\n<p>However, when I attempt to use python 3.7 (pysftp) to connect to SERVER2 I get back</p>\n<blockquote>\n<p>DEBUG:paramiko.transport:Attempting password auth...</p>\n<p>DEBUG:paramiko.transport:userauth is OK</p>\n<p>DEBUG:paramiko.transport:Authentication type (password) not permitted.</p>\n<p>DEBUG:paramiko.transport:Allowed methods: ['publickey', 'keyboard-interactive']</p>\n<p>DEBUG:paramiko.transport:userauth is OK</p>\n<p>INFO:paramiko.transport:Authentication (keyboard-interactive) failed.</p>\n</blockquote>\n<p>Rather than run an extract using the command line, and some ETL processes in python, I would like to keep everything in one program - preferably python 3.7 and not use any public/private keys.</p>\n<p>Any tips to have paramiko/pysftp initiate the keyboard-interactive?</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>import pysftp\nimport getpass\n\n\nquestion = input (\"Do you want to: A) Connect to SERVER1  B) Connect to SERVER2. [A/B]? : \")\n# Decide whether SERVER 1 or SERVER 2\nif question == \"A\":\n    hostname=\"SERVER1\"\n    username='TESTUSER'\nelif question == \"B\": # STILL CANNOT FIGURE OUT HOW TO PROPERLY CONNECT TO SIS SFTP\n    hostname=\"SERVER2\"\n    username='###USER'\nelse:\n    print(\"Not permitted\")\n\n# Get security clearances, don't want to hardcode any passwords right now\ntkpass = getpass.getpass(\"Password:\")\n\n# DEBUGGER HERE\nimport sys\nimport logging\n\nlogging.basicConfig(stream=sys.stderr, level=logging.DEBUG)\n\n# Make the connection to the server\nsrv = pysftp.Connection(host=hostname, username=username,\npassword=tkpass)\n# Get the directory and file listing\ndata = srv.listdir()\n\n# Closes the connection\nsrv.close()\n\n# Prints out the directories and files, line by line\nfor i in data:\n    print(i)</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["python", "solver", "odeint"], "answers": [{"comments": [{"owner": {"reputation": 644, "user_id": 10458964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/079fde805d5f0749b32ba382cc4612d2?s=128&d=identicon&r=PG&f=1", "display_name": "Ma Y", "link": "https://stackoverflow.com/users/10458964/ma-y"}, "edited": false, "score": 0, "creation_date": 1552588420, "post_id": 55152880, "comment_id": 97078749, "body": "So, <code>solve_ivp</code> is better to solve the ODEs, but is slower than <code>ODEINT</code>."}, {"owner": {"reputation": 1392, "user_id": 4607153, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4tlcK.jpg?s=128&g=1", "display_name": "Diego Gallegos", "link": "https://stackoverflow.com/users/4607153/diego-gallegos"}, "reply_to_user": {"reputation": 644, "user_id": 10458964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/079fde805d5f0749b32ba382cc4612d2?s=128&d=identicon&r=PG&f=1", "display_name": "Ma Y", "link": "https://stackoverflow.com/users/10458964/ma-y"}, "edited": false, "score": 0, "creation_date": 1552596039, "post_id": 55152880, "comment_id": 97082515, "body": "Read this: <a href=\"https://github.com/scipy/scipy/issues/8257#issuecomment-359182872\" rel=\"nofollow noreferrer\">github.com/scipy/scipy/issues/8257#issuecomment-359182872</a>. I suppose not noticeable for most problems."}, {"owner": {"reputation": 5993, "user_id": 1609514, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1e62d27c486199ea834abd203fbb841b?s=128&d=identicon&r=PG", "display_name": "Bill", "link": "https://stackoverflow.com/users/1609514/bill"}, "edited": false, "score": 0, "creation_date": 1574110402, "post_id": 55152880, "comment_id": 104106888, "body": "I am getting similar performance differences.  <code>solve_ivp</code> with <code>method=&#39;LSODA&#39;</code> takes 1.11s.  <code>odeint</code> takes 0.21s.  Maximum difference between solutions is about <code>5e-06</code>"}], "tags": [], "owner": {"reputation": 1392, "user_id": 4607153, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4tlcK.jpg?s=128&g=1", "display_name": "Diego Gallegos", "link": "https://stackoverflow.com/users/4607153/diego-gallegos"}, "is_accepted": true, "score": 8, "last_activity_date": 1552521256, "creation_date": 1552521256, "answer_id": 55152880, "question_id": 55152516, "link": "https://stackoverflow.com/questions/55152516/differences-between-two-ode-solvers/55152880#55152880", "title": "Differences between two ODE solvers", "body": "<p>Well the main difference is the following: </p>\n\n<ol>\n<li><code>odeint</code> came first and is uses <strong>lsoda</strong> from the FORTRAN package <a href=\"https://computation.llnl.gov/casc/odepack/\" rel=\"noreferrer\">odepack</a> to solve ODEs.</li>\n<li><code>solve_ivp</code> is a more general solution that lets use decide which integrator to use to solve ODEs. If you define the <code>method</code> param as <code>method='LSODA'</code> then this will use the same integrator as <code>odeint</code>. Additionally you can choose other methods such as <strong>BDF</strong> and <strong>RK25</strong>. </li>\n</ol>\n\n<p>Regarding performance, there is a ticket that indicate that <code>solve_ivp</code> is slower. This maybe because its written in Python. </p>\n\n<blockquote>\n  <p><a href=\"https://github.com/scipy/scipy/issues/8257\" rel=\"noreferrer\">https://github.com/scipy/scipy/issues/8257</a></p>\n</blockquote>\n\n<p>Check the docs for both of them in scipy:</p>\n\n<blockquote>\n  <p><a href=\"https://docs.scipy.org/doc/scipy-1.2.1/reference/generated/scipy.integrate.odeint.html\" rel=\"noreferrer\">https://docs.scipy.org/doc/scipy-1.2.1/reference/generated/scipy.integrate.odeint.html</a>\n  <a href=\"https://docs.scipy.org/doc/scipy-1.2.1/reference/generated/scipy.integrate.solve_ivp.html\" rel=\"noreferrer\">https://docs.scipy.org/doc/scipy-1.2.1/reference/generated/scipy.integrate.solve_ivp.html</a></p>\n</blockquote>\n"}], "owner": {"reputation": 644, "user_id": 10458964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/079fde805d5f0749b32ba382cc4612d2?s=128&d=identicon&r=PG&f=1", "display_name": "Ma Y", "link": "https://stackoverflow.com/users/10458964/ma-y"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2674, "favorite_count": 0, "accepted_answer_id": 55152880, "answer_count": 1, "score": 3, "last_activity_date": 1552521256, "creation_date": 1552518589, "question_id": 55152516, "link": "https://stackoverflow.com/questions/55152516/differences-between-two-ode-solvers", "title": "Differences between two ODE solvers", "body": "<p>I am wondering, what are the differences between <code>ODEINT</code> and <code>solve_ivp</code> for solving a differential equation. What could be advantages and disadvantages between them?</p>\n\n<pre><code>f1 = solve_ivp(f, [0,1], y0) #y0 is the initial point\nf2 = odeint(f, y0, [0, 1], args=(a, b)) # a and b are arguments of function f\n</code></pre>\n\n<p>Thank you</p>\n"}, {"tags": ["python", "python-requests"], "comments": [{"owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 1, "creation_date": 1552518696, "post_id": 55152499, "comment_id": 97045424, "body": "&quot;Requests is lying about they can to send headers in order?&quot; Wat?"}, {"owner": {"reputation": 53073, "user_id": 16148, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/XTzm1.jpg?s=128&g=1", "display_name": "Corey Goldberg", "link": "https://stackoverflow.com/users/16148/corey-goldberg"}, "edited": false, "score": 0, "creation_date": 1552519020, "post_id": 55152499, "comment_id": 97045510, "body": "What is the question you are asking?"}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 2, "creation_date": 1552519202, "post_id": 55152499, "comment_id": 97045566, "body": "The snippet of the docs you&#39;ve linked to is very clear that the <a href=\"https://github.com/kennethreitz/requests/blob/master/requests/utils.py#L802\" rel=\"nofollow noreferrer\">default headers</a> requests sets will keep their original order unless overridden by the session. If you&#39;ve tried to do that, give a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Otherwise, this is a rant that has no place here; raise a bug or \ud83d\udc4d an existing one. Don&#39;t expect to be taken too seriously if you use <a href=\"https://github.com/kennethreitz/requests/issues/5014\" rel=\"nofollow noreferrer\">a burner account</a>, though."}, {"owner": {"reputation": 17, "user_id": 11199957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81c454ff72e4433adfa188cdd49112ab?s=128&d=identicon&r=PG&f=1", "display_name": "JohnSmithFreeStaff", "link": "https://stackoverflow.com/users/11199957/johnsmithfreestaff"}, "edited": false, "score": 0, "creation_date": 1552519537, "post_id": 55152499, "comment_id": 97045658, "body": "They said they can send headers in order here: <a href=\"http://docs.python-requests.org/en/master/user/advanced/#header-ordering\" rel=\"nofollow noreferrer\">docs.python-requests.org/en/master/user/advanced/&hellip;</a> But in reality there is no evidence they can."}, {"owner": {"reputation": 17, "user_id": 11199957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81c454ff72e4433adfa188cdd49112ab?s=128&d=identicon&r=PG&f=1", "display_name": "JohnSmithFreeStaff", "link": "https://stackoverflow.com/users/11199957/johnsmithfreestaff"}, "edited": false, "score": 0, "creation_date": 1552519565, "post_id": 55152499, "comment_id": 97045665, "body": "I tired both with session and without."}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1552519784, "post_id": 55152499, "comment_id": 97045714, "body": "Well you&#39;ve shown neither in the question, so I&#39;d recommend reading <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and the other material in the <a href=\"https://stackoverflow.com/help\">help center</a>."}, {"owner": {"reputation": 17, "user_id": 11199957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81c454ff72e4433adfa188cdd49112ab?s=128&d=identicon&r=PG&f=1", "display_name": "JohnSmithFreeStaff", "link": "https://stackoverflow.com/users/11199957/johnsmithfreestaff"}, "edited": false, "score": 0, "creation_date": 1552520273, "post_id": 55152499, "comment_id": 97045851, "body": "they are there now."}, {"owner": {"reputation": 5521, "user_id": 755851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1bb0ef4d5aebec860f85f7c76b894fd?s=128&d=identicon&r=PG", "display_name": "Foon", "link": "https://stackoverflow.com/users/755851/foon"}, "edited": false, "score": 0, "creation_date": 1552520308, "post_id": 55152499, "comment_id": 97045861, "body": "See my answer below; pip freeze indicates requests==2.20.1 in case you want to check versions"}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1552520427, "post_id": 55152499, "comment_id": 97045896, "body": "We can all see that they <i>aren&#39;t</i> there now."}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 11199957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81c454ff72e4433adfa188cdd49112ab?s=128&d=identicon&r=PG&f=1", "display_name": "JohnSmithFreeStaff", "link": "https://stackoverflow.com/users/11199957/johnsmithfreestaff"}, "edited": false, "score": 0, "creation_date": 1552520197, "post_id": 55152668, "comment_id": 97045827, "body": "Basically you mean request do lying about they can send headers in order and I should just live with it. But I do want warning others about that (which I&#39;m not be convinced it is ture)."}, {"owner": {"reputation": 12197, "user_id": 4390160, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-ZHp9yDMYiGI/AAAAAAAAAAI/AAAAAAAAEsg/B9aVO59CDXU/photo.jpg?sz=128", "display_name": "Grismar", "link": "https://stackoverflow.com/users/4390160/grismar"}, "reply_to_user": {"reputation": 17, "user_id": 11199957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81c454ff72e4433adfa188cdd49112ab?s=128&d=identicon&r=PG&f=1", "display_name": "JohnSmithFreeStaff", "link": "https://stackoverflow.com/users/11199957/johnsmithfreestaff"}, "edited": false, "score": 0, "creation_date": 1552520340, "post_id": 55152668, "comment_id": 97045867, "body": "I think you need to read the entire section in the documentation though - or provide a code example that demonstrates the problem for us to be able to answer the question if your concern is correct. The documentation clearly specifies that the ordering will only be maintained under certain conditions - please provide a complete and verifiable example."}, {"owner": {"reputation": 12197, "user_id": 4390160, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-ZHp9yDMYiGI/AAAAAAAAAAI/AAAAAAAAEsg/B9aVO59CDXU/photo.jpg?sz=128", "display_name": "Grismar", "link": "https://stackoverflow.com/users/4390160/grismar"}, "reply_to_user": {"reputation": 17, "user_id": 11199957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81c454ff72e4433adfa188cdd49112ab?s=128&d=identicon&r=PG&f=1", "display_name": "JohnSmithFreeStaff", "link": "https://stackoverflow.com/users/11199957/johnsmithfreestaff"}, "edited": false, "score": 0, "creation_date": 1552520402, "post_id": 55152668, "comment_id": 97045888, "body": "Also, if that is the case and you turn out to be correct in the sense that the documentation is flawed (&#39;lying&#39; is a bit silly) - your feedback is out of place and you should probably contact the maintainers of the library or its documentation to correct the mistake."}], "tags": [], "owner": {"reputation": 12197, "user_id": 4390160, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-ZHp9yDMYiGI/AAAAAAAAAAI/AAAAAAAAEsg/B9aVO59CDXU/photo.jpg?sz=128", "display_name": "Grismar", "link": "https://stackoverflow.com/users/4390160/grismar"}, "is_accepted": false, "score": 0, "last_activity_date": 1552519677, "creation_date": 1552519677, "answer_id": 55152668, "question_id": 55152499, "link": "https://stackoverflow.com/questions/55152499/how-to-send-headers-in-order-using-requests/55152668#55152668", "title": "How to send headers in order using requests?", "body": "<p>You are in fact wrong: header order does not matter, not according to the standards anyway <a href=\"https://tools.ietf.org/html/rfc2616\" rel=\"nofollow noreferrer\">https://tools.ietf.org/html/rfc2616</a></p>\n\n<p>The point you are trying to make (i.e. why it does matter) is that browsers can (somewhat unreliably) be identified by fingerprinting based on the header order they happen to use. This is fine, but it is by no means a reason for a Python library to implement specific ordering.</p>\n\n<p>That you're disappointed you won't be able to use this library to impersonate some browser or to get accurately finger-printed by this type of software is too bad, but it hardly justified the tone of the question.</p>\n\n<p>The best suggestion here would be to find an alternative http request library that does allow specific header ordering and guarantees maintaining the order you provide.</p>\n"}, {"tags": [], "owner": {"reputation": 5521, "user_id": 755851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1bb0ef4d5aebec860f85f7c76b894fd?s=128&d=identicon&r=PG", "display_name": "Foon", "link": "https://stackoverflow.com/users/755851/foon"}, "is_accepted": false, "score": 1, "last_activity_date": 1552520208, "creation_date": 1552520208, "answer_id": 55152744, "question_id": 55152499, "link": "https://stackoverflow.com/questions/55152499/how-to-send-headers-in-order-using-requests/55152744#55152744", "title": "How to send headers in order using requests?", "body": "<p>If you read the documentation page you linked, it does indicate the limitation of default headers and the workaround...</p>\n\n<p>Running this code:</p>\n\n<pre><code>import requests\nfrom collection import OrderedDict\nheaders = OrderedDict([(\"Connection\", \"close\"), (\"Upgrade-Insecure-Requests\", \"1\"), (\"User-Agent\", \"SomeAgent\"), (\"Accept\", \"text/html,application/xhtml+xml,applic\nation/xml;q=0.9,image/webp,image/apng,/;q=0.8\"), (\"Accept-Encoding\", \"gzip, deflate\"), (\"Accept-Language\", \"Some Language\")])\ns = requests.Session()\ns.headers = headers\nr = s.get(http://localhost:6000/foo)\n</code></pre>\n\n<p>Sends:</p>\n\n<pre><code>GET /foo HTTP/1.1\\r\\nHost: localhost:6000\\r\\nConnection: close\\r\\nUpgrade-Insecure-Requests: 1\\r\\nUser-Agent: SomeAgent\\r\\nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,/;q=0.8\\r\\nAccept-Encoding:\n gzip, deflate\\r\\nAccept-Language: Some Language\\r\\n\\r\\n\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 11199957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81c454ff72e4433adfa188cdd49112ab?s=128&d=identicon&r=PG&f=1", "display_name": "JohnSmithFreeStaff", "link": "https://stackoverflow.com/users/11199957/johnsmithfreestaff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 470, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1552520649, "creation_date": 1552518497, "last_edit_date": 1552520649, "question_id": 55152499, "link": "https://stackoverflow.com/questions/55152499/how-to-send-headers-in-order-using-requests", "title": "How to send headers in order using requests?", "body": "<p>They said they can send headers in order here:\n<a href=\"http://docs.python-requests.org/en/master/user/advanced/#header-ordering\" rel=\"nofollow noreferrer\">http://docs.python-requests.org/en/master/user/advanced/#header-ordering</a></p>\n\n<p>But for some unknown reason requests never sends headers in order. </p>\n\n<p>Example code:</p>\n\n<pre><code>headers01 = OrderedDict([(\"Connection\", \"close\"), (\"Upgrade-Insecure-Requests\", \"1\"), (\"User-Agent\", \"SomeAgent\"), (\"Accept\", \"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,/;q=0.8\"), (\"Accept-Encoding\", \"gzip, deflate\"), (\"Accept-Language\", \"Some Language\")])\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>Connection: close\n\nAccept-Encoding: gzip, deflate\n\nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,/;q=0.8\n\nUser-Agent: Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1; WOW64; Trident/4.0; SLCC2; .NET CLR 2.0.50727; InfoPath.2)\n\nAccept-Language: en-US,en;q=0.5\n\nUpgrade-Insecure-Requests: 1\n</code></pre>\n\n<p>My request is already sent by sessions and it also not working if it's not sent by session.</p>\n"}, {"tags": ["python", "sql-server", "python-3.x", "sql-update", "pyodbc"], "comments": [{"owner": {"reputation": 97598, "user_id": 2144390, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6QjmY.jpg?s=128&g=1", "display_name": "Gord Thompson", "link": "https://stackoverflow.com/users/2144390/gord-thompson"}, "edited": false, "score": 2, "creation_date": 1552521901, "post_id": 55152478, "comment_id": 97046251, "body": "<a href=\"https://docs.microsoft.com/en-us/sql/t-sql/data-types/datetime-transact-sql?view=sql-server-2017\" rel=\"nofollow noreferrer\">DATETIME</a> is a reserved word in T-SQL, so if you are using that as a column name you may have to enclose it in square brackets."}, {"owner": {"reputation": 35, "user_id": 11092824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d2c0b56db576e1c6c7785ddfb784e34?s=128&d=identicon&r=PG&f=1", "display_name": "Crn", "link": "https://stackoverflow.com/users/11092824/crn"}, "reply_to_user": {"reputation": 97598, "user_id": 2144390, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6QjmY.jpg?s=128&g=1", "display_name": "Gord Thompson", "link": "https://stackoverflow.com/users/2144390/gord-thompson"}, "edited": false, "score": 0, "creation_date": 1552525661, "post_id": 55152478, "comment_id": 97047186, "body": "Thank you! @GordThompson. On the other hand, the program still doesnt work."}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 11092824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d2c0b56db576e1c6c7785ddfb784e34?s=128&d=identicon&r=PG&f=1", "display_name": "Crn", "link": "https://stackoverflow.com/users/11092824/crn"}, "edited": false, "score": 0, "creation_date": 1552542938, "post_id": 55154909, "comment_id": 97051210, "body": "Thanks! yes, sorry i did not include the full code on the question because i am afraid it is going to be too long and confusing. And as for the [], if you could help me, do i write it like where [DATETIME] =? or DATETIME[]=?, appreciate it :) thankyou"}, {"owner": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "reply_to_user": {"reputation": 35, "user_id": 11092824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d2c0b56db576e1c6c7785ddfb784e34?s=128&d=identicon&r=PG&f=1", "display_name": "Crn", "link": "https://stackoverflow.com/users/11092824/crn"}, "edited": false, "score": 1, "creation_date": 1552611254, "post_id": 55154909, "comment_id": 97087094, "body": "@r-can Based on this post <a href=\"https://stackoverflow.com/questions/285775/how-to-deal-with-sql-column-names-that-look-like-sql-keywords\">How to deal with SQL column names that look like SQL keywords?</a> it probably should be <code>[DATETIME]=?</code>: <code>&quot;&quot;&quot;UPDATE Table SET P=? WHERE [DATETIME]=?&quot;&quot;&quot;</code>"}], "tags": [], "owner": {"reputation": 15100, "user_id": 5212614, "user_type": "registered", "accept_rate": 32, "profile_image": "https://i.stack.imgur.com/tITr9.jpg?s=128&g=1", "display_name": "ASH", "link": "https://stackoverflow.com/users/5212614/ash"}, "is_accepted": true, "score": 1, "last_activity_date": 1552621816, "last_edit_date": 1552621816, "creation_date": 1552537307, "answer_id": 55154909, "question_id": 55152478, "link": "https://stackoverflow.com/questions/55152478/cannot-find-data-type-readonly-error-on-update-to-sql-server/55154909#55154909", "title": "&quot;Cannot find data type READONLY&quot; error on UPDATE to SQL Server", "body": "<p>Hummm, I would have guessed that Gord was right.  That's certainly the first thing I'd look at.  Ok, here is a small sample of how I do updates in MS Access, from Python.  </p>\n\n<pre><code>#import pypyodbc\nimport pyodbc\n\n# MS ACCESS DB CONNECTION\npyodbc.lowercase = False\nconn = pyodbc.connect(\n    r\"Driver={Microsoft Access Driver (*.mdb, *.accdb)};\" +\n    r\"Dbq=C:\\\\path_here\\\\Northwind.mdb;\")\n\n# OPEN CURSOR AND EXECUTE SQL\ncur = conn.cursor()\n\n# Option 1 - no error and no update\ncur.execute(\"UPDATE dbo_test SET Location = 'New York' Where Status = 'Scheduled'\");\nconn.commit()\n\n\ncur.close()\nconn.close()\n</code></pre>\n\n<p>Can you adapt this to your specific scenario?</p>\n"}], "owner": {"reputation": 35, "user_id": 11092824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d2c0b56db576e1c6c7785ddfb784e34?s=128&d=identicon&r=PG&f=1", "display_name": "Crn", "link": "https://stackoverflow.com/users/11092824/crn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1395, "favorite_count": 0, "accepted_answer_id": 55154909, "answer_count": 1, "score": -1, "last_activity_date": 1552621816, "creation_date": 1552518361, "last_edit_date": 1552521616, "question_id": 55152478, "link": "https://stackoverflow.com/questions/55152478/cannot-find-data-type-readonly-error-on-update-to-sql-server", "title": "&quot;Cannot find data type READONLY&quot; error on UPDATE to SQL Server", "body": "<p>I've been stuck in this problem for a long time, i hope somebody could enlighten me. I have a sql database i would like to update. Here are some pieces of the code. I extracted data from sql to Python, then apply function hex_to_string &amp; slicing bin and I plan to update the SQL database. I don't have any ID in the database, but I have the DATETIME which differentiates the entry. </p>\n\n<pre><code>query = \"\"\" select P from Table \"\"\"\n\ncnxn = pyodbc.connect(conn_str)\ncnxn.add_output_converter(pyodbc.SQL_VARBINARY, hexToString)\ncursor: object = cnxn.cursor()\n\ncursor.execute(query)\ndtbs= cursor.fetchall()\nrow_list=[]\nln = len(dtbs)\n\n cursor.execute(query)\n\nfor i in range(ln):\n    row=cursor.fetchval()\n    result=slicing_bin(row)\n    result_float = [float(\"{0:.2f}\".format(i)) for i in result]\n    row_list.append(result_float)\n\ncrsr = cnxn.cursor()\ncrsr.execute(query)\naList = [item[0] for item in crsr.fetchall()]\nfor aValue in aList:\n    crsr.execute(\"\"\"UPDATE Table SET P=? WHERE DATETIME=?\"\"\", (row_list, aValue))\ncrsr.close()\ncnxn.commit()\n</code></pre>\n\n<p>When I run this code, I got an error message,</p>\n\n<blockquote>\n  <p>File\n  \"C:/Users/r/.PyCharmCE2018.3/config/scratches/Finalcombined2.py\",\n  line 64, in \n      crsr.execute(\"\"\"UPDATE Access.dbo.M_PWA SET P_PULSES=? WHERE DATETIME=?\"\"\", (row_list, aValue)) pyodbc.ProgrammingError: ('42000',\n  \"[42000] [Microsoft][ODBC Driver 11 for SQL Server][SQL Server]Column,\n  parameter, or variable #1: Cannot find data type READONLY. (2715)\n  (SQLExecDirectW); [42000] [Microsoft][ODBC Driver 11 for SQL\n  Server][SQL Server]Statement(s) could not be prepared. (8180); [42000]\n  [Microsoft][ODBC Driver 11 for SQL Server][SQL Server]Parameter or\n  variable '@P1' has an invalid data type. (2724)\")</p>\n</blockquote>\n\n<p>Please Help, thanks. </p>\n"}, {"tags": ["python", "django", "python-3.x", "django-forms", "django-1.11"], "comments": [{"owner": {"reputation": 743, "user_id": 4028977, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qu3hd.jpg?s=128&g=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/4028977/rob"}, "edited": false, "score": 1, "creation_date": 1553562978, "post_id": 55152450, "comment_id": 97421754, "body": "I have written out a complete solution to this problem here: <a href=\"https://stackoverflow.com/questions/673199/disabled-option-for-choicefield-django/55348111#55348111\" title=\"disabled option for choicefield django\">stackoverflow.com/questions/673199/&hellip;</a>"}], "owner": {"reputation": 688, "user_id": 1193487, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d5de3e47ec1a1d37eed65be9d8c352ad?s=128&d=identicon&r=PG", "display_name": "Ewanw", "link": "https://stackoverflow.com/users/1193487/ewanw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 407, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1552518173, "creation_date": 1552518173, "last_edit_date": 1592644375, "question_id": 55152450, "link": "https://stackoverflow.com/questions/55152450/disabled-option-in-django-select-widget-using-modelchoicefield", "title": "Disabled option in Django Select Widget using ModelChoiceField", "body": "<p>I am trying to show inactive users as &quot;disabled&quot; in my form's Select widget.</p>\n<p>I have a worker who is a django user model.</p>\n<h2>models.py</h2>\n<pre><code>class Task(models.Model):\n    worker = models.ForeignKey(settings.AUTH_USER_MODEL, models.DO_NOTHING, blank=True, null=True,related_name='worker')\n</code></pre>\n<p>It is represented by a ModelForm, using a subclass to display the full name of the user.</p>\n<h2>forms.py</h2>\n<pre><code>class UserModelChoiceField(forms.ModelChoiceField):\n    def label_from_instance(self, obj):\n         return obj.get_full_name()\n\nclass TaskForm(forms.ModelForm):\n    worker = UserModelChoiceField(queryset=User.objects.filter(is_active=1).order_by('first_name'),widget=forms.Select(attrs={'class':'form-control'}),required=False)\n    class Meta:\n        model = Task\n        fields = ['worker']\n</code></pre>\n<p>Currently, the filter is_active=1 means that inactive users simply don't show in the list and where they've already been selected it appears as &quot;---&quot;.</p>\n<p>My ideal would be they appear but are greyed out so they are presented but can't be selected.</p>\n<p>From reviewing <a href=\"https://djangosnippets.org/snippets/2453/\" rel=\"nofollow noreferrer\">https://djangosnippets.org/snippets/2453/</a></p>\n<p>Which I found in\n<a href=\"https://stackoverflow.com/questions/673199/disabled-option-for-choicefield-django\">&quot;Disabled&quot; option for choiceField - Django</a></p>\n<p>I was able to conclude that the subclass of the select should work. However I can't tell how to get between the queryset and the widget in order to achieve the expected result. Reading suggests the render method on the widget might be the way but I couldn't find examples of how to pass the information or exactly where create_option is invoked.</p>\n"}, {"tags": ["python", "django", "python-3.x", "transactions", "django-admin"], "answers": [{"tags": [], "owner": {"reputation": 21358, "user_id": 1977620, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/lvWfj.jpg?s=128&g=1", "display_name": "Max Malysh", "link": "https://stackoverflow.com/users/1977620/max-malysh"}, "is_accepted": false, "score": 0, "last_activity_date": 1552524597, "creation_date": 1552524597, "answer_id": 55153310, "question_id": 55152447, "link": "https://stackoverflow.com/questions/55152447/duplicated-models-with-django-admin/55153310#55153310", "title": "Duplicated models with Django admin", "body": "<p>You have to block rows for updates explicitly. Use <code>transaction.atomic()</code> and <code>select_for_update()</code>. Here is an example:</p>\n\n<pre><code>@transaction.atomic\ndef update_bank_account():\n    # Another call to update_bank_account will block until the first one is finished\n    account = BankAccount.objects.select_for_update().get(id=123)\n    sleep(120)\n    account.usd += 100\n    account.save()\n</code></pre>\n\n<p>Docs: </p>\n\n<ul>\n<li><a href=\"https://docs.djangoproject.com/en/2.1/topics/db/transactions/\" rel=\"nofollow noreferrer\">https://docs.djangoproject.com/en/2.1/topics/db/transactions/</a></li>\n<li><a href=\"https://docs.djangoproject.com/en/2.1/ref/models/querysets/#select-for-update\" rel=\"nofollow noreferrer\">https://docs.djangoproject.com/en/2.1/ref/models/querysets/#select-for-update</a></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 73, "user_id": 8301983, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Y_2wE6O8CpQ/AAAAAAAAAAI/AAAAAAAAC28/poxdYOGqGOE/photo.jpg?sz=128", "display_name": "JayTurnr", "link": "https://stackoverflow.com/users/8301983/jayturnr"}, "is_accepted": false, "score": -1, "last_activity_date": 1552526324, "creation_date": 1552526324, "answer_id": 55153526, "question_id": 55152447, "link": "https://stackoverflow.com/questions/55152447/duplicated-models-with-django-admin/55153526#55153526", "title": "Duplicated models with Django admin", "body": "<blockquote>\n  <p>Into my clean validation I implemented a check to avoid similar\n  models; Sometime he can create model duplicated.</p>\n</blockquote>\n\n<p>This sounds like an issue I had. Make sure <code>save()</code> isn't being called from within your <code>clean</code> function.</p>\n"}], "owner": {"reputation": 9698, "user_id": 534218, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/05708634a76195e829ce6dd077e45039?s=128&d=identicon&r=PG", "display_name": "Safari", "link": "https://stackoverflow.com/users/534218/safari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 104, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1591945755, "creation_date": 1552518151, "last_edit_date": 1591945755, "question_id": 55152447, "link": "https://stackoverflow.com/questions/55152447/duplicated-models-with-django-admin", "title": "Duplicated models with Django admin", "body": "<p>For a specific model I use Django admin interface.\nI implemented custom validation (clean methods) and save method.</p>\n\n<p>So, I have something like this:</p>\n\n<pre><code>class DailyActivitiesAdmin(admin.ModelAdmin):\nform= MyCustomFormForm\n\n    def save_model(self, request, obj, form, change):\n     .... my custom save ....\n\nclass MyCustomFormForm(forms.ModelForm):\n\n    ....\n    def clean(self):\n      ... my custom validation ...\n\n    def clean_my_field(self):\n      ... my custom field validation ...\n</code></pre>\n\n<p>My question is:</p>\n\n<p>Have I to manage explicitly the transaction from validation to save model or the atomicity is already managed in Django admin?</p>\n\n<p>A my customer reported me a bug about it:</p>\n\n<p>Into my clean validation I implemented a check to avoid similar models;\nSometime he can create model duplicated. I think that probably he make more click on save button and probably he had a slowly internet connection.</p>\n\n<p>It is a possible scenario? Can I void it? For example, Can I disable the save buttons during the save requests?</p>\n\n<p>Can I guarantee atomicity in some way if it is not already managed?</p>\n\n<p>PS: I use Python 3, Djnago 2 and Postgres </p>\n"}, {"tags": ["python", "tensorflow"], "answers": [{"tags": [], "owner": {"reputation": 144, "user_id": 11185338, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xIDdQ.png?s=128&g=1", "display_name": "Rusty Shackelford", "link": "https://stackoverflow.com/users/11185338/rusty-shackelford"}, "is_accepted": false, "score": 1, "last_activity_date": 1552519006, "creation_date": 1552519006, "answer_id": 55152577, "question_id": 55152424, "link": "https://stackoverflow.com/questions/55152424/valueerror-cannot-feed-value-of-shape-1-1-25-for-tensor-placeholder-240/55152577#55152577", "title": "ValueError: Cannot feed value of shape (1, 1, 25) for Tensor &#39;Placeholder_24:0&#39;, which has shape &#39;(?, 25)&#39;", "body": "<blockquote>\n  <p>The <a href=\"https://www.tensorflow.org/api_docs/python/tf/reshape\" rel=\"nofollow noreferrer\"><code>reshape</code></a> method is for this purpose.</p>\n</blockquote>\n\n<p>Try <code>reshape(you_tensor, [-1, 25])</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 199, "user_id": 4942590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44173ee096dfcde1bc78ea32b32ac149?s=128&d=identicon&r=PG&f=1", "display_name": "JShen", "link": "https://stackoverflow.com/users/4942590/jshen"}, "is_accepted": false, "score": 0, "last_activity_date": 1552522401, "creation_date": 1552522401, "answer_id": 55153029, "question_id": 55152424, "link": "https://stackoverflow.com/questions/55152424/valueerror-cannot-feed-value-of-shape-1-1-25-for-tensor-placeholder-240/55153029#55153029", "title": "ValueError: Cannot feed value of shape (1, 1, 25) for Tensor &#39;Placeholder_24:0&#39;, which has shape &#39;(?, 25)&#39;", "body": "<p>You can use <a href=\"https://www.tensorflow.org/api_docs/python/tf/squeeze\" rel=\"nofollow noreferrer\">tf.squeeze</a>:</p>\n\n<p><code>tf.squeeze(your_tensor, axis=1)</code>   </p>\n"}], "owner": {"reputation": 63, "user_id": 11199956, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5JO7p.jpg?s=128&g=1", "display_name": "Rayna Levy", "link": "https://stackoverflow.com/users/11199956/rayna-levy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1552522401, "creation_date": 1552518003, "question_id": 55152424, "link": "https://stackoverflow.com/questions/55152424/valueerror-cannot-feed-value-of-shape-1-1-25-for-tensor-placeholder-240", "title": "ValueError: Cannot feed value of shape (1, 1, 25) for Tensor &#39;Placeholder_24:0&#39;, which has shape &#39;(?, 25)&#39;", "body": "<p>I'm not sure how to reshape my Tensor to be (1, 25) instead of (1, 1, 25). I coded this in Python. I think it's reshape, but can't quite get it.</p>\n"}, {"tags": ["python", "json", "anaconda", "exe", "pyinstaller"], "comments": [{"owner": {"reputation": 308, "user_id": 10767018, "user_type": "registered", "profile_image": "https://graph.facebook.com/1971257202964936/picture?type=large", "display_name": "Alisson Correa", "link": "https://stackoverflow.com/users/10767018/alisson-correa"}, "edited": false, "score": 0, "creation_date": 1552529820, "post_id": 55152404, "comment_id": 97048145, "body": "You should provide some code. I would help."}], "answers": [{"tags": [], "owner": {"reputation": 129, "user_id": 4495722, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/16f9d2dc86ec7d4c42e5480347738fae?s=128&d=identicon&r=PG&f=1", "display_name": "skrhee", "link": "https://stackoverflow.com/users/4495722/skrhee"}, "is_accepted": true, "score": 0, "last_activity_date": 1552592736, "creation_date": 1552592736, "answer_id": 55170866, "question_id": 55152404, "link": "https://stackoverflow.com/questions/55152404/pyinstaller-exe-filenotfounderror-no-such-file-or-directory-c-users-my-nam/55170866#55170866", "title": "Pyinstaller EXE: FileNotFoundError: No such file or directory &#39;C:\\\\Users\\\\my.name\\\\Desktop\\\\EPE 2.0\\\\dist\\\\main\\\\timezonefinder\\\\timezone_names.json&#39;", "body": "<p>It looks like there is a bug with the conda-forge version of pyinstaller, updating to the development version will help with other problems and manually copying the timezonefinder folder from the virtual enviroment to the dist folder will fix this issue.</p>\n"}], "owner": {"reputation": 129, "user_id": 4495722, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/16f9d2dc86ec7d4c42e5480347738fae?s=128&d=identicon&r=PG&f=1", "display_name": "skrhee", "link": "https://stackoverflow.com/users/4495722/skrhee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 0, "accepted_answer_id": 55170866, "answer_count": 1, "score": 0, "last_activity_date": 1552592736, "creation_date": 1552517903, "question_id": 55152404, "link": "https://stackoverflow.com/questions/55152404/pyinstaller-exe-filenotfounderror-no-such-file-or-directory-c-users-my-nam", "title": "Pyinstaller EXE: FileNotFoundError: No such file or directory &#39;C:\\\\Users\\\\my.name\\\\Desktop\\\\EPE 2.0\\\\dist\\\\main\\\\timezonefinder\\\\timezone_names.json&#39;", "body": "<p>When I try to run my exe created by pyinstaller (newest development version, python v3.6 in an anaconda environment) I get the following error:</p>\n\n<pre><code>File \"site-packages\\timezonefinder\\timezonefinder.py\", line 27, in &lt;module&gt;\nFileNotFoundError: [Errno 2] No such file or directory: \n'C:\\\\Users\\\\simon.rhee\\\\Desktop\\\\EPE \n2.0\\\\dist\\\\main\\\\timezonefinder\\\\timezone_names.json'\n[8984] Failed to execute script main\n</code></pre>\n\n<p>Thank you for your help, please let me know if I can provide more information which will make helping me out easier or more informative for those that may have the same question.</p>\n"}, {"tags": ["python", "python-3.x", "flask", "pip"], "comments": [{"owner": {"reputation": 4510, "user_id": 2644759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f291980e5706c49b03f3fa3d74951d02?s=128&d=identicon&r=PG", "display_name": "Philip Tzou", "link": "https://stackoverflow.com/users/2644759/philip-tzou"}, "edited": false, "score": 0, "creation_date": 1552518114, "post_id": 55152316, "comment_id": 97045263, "body": "Check if you have another service running on localhost:5000? The easy way is to use another port number and check if it works."}, {"owner": {"reputation": 4685, "user_id": 3067485, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/mpI7N.png?s=128&g=1", "display_name": "jlandercy", "link": "https://stackoverflow.com/users/3067485/jlandercy"}, "edited": false, "score": 0, "creation_date": 1552518168, "post_id": 55152316, "comment_id": 97045279, "body": "Your code run fine on flask <code>1.0.2</code>. You are shadowing <code>app</code> imported from <code>test</code> (not related to your issue). There is no root, thus <code>http:&#47;&#47;127.0.0.1:5000</code> indeed returns <code>404</code>."}, {"owner": {"reputation": 41, "user_id": 10632787, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-1t5AjtoC2_Y/AAAAAAAAAAI/AAAAAAAAFEA/_YaJQFkwTVM/photo.jpg?sz=128", "display_name": "MEHUL SOLANKI", "link": "https://stackoverflow.com/users/10632787/mehul-solanki"}, "reply_to_user": {"reputation": 4510, "user_id": 2644759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f291980e5706c49b03f3fa3d74951d02?s=128&d=identicon&r=PG", "display_name": "Philip Tzou", "link": "https://stackoverflow.com/users/2644759/philip-tzou"}, "edited": false, "score": 0, "creation_date": 1552544267, "post_id": 55152316, "comment_id": 97051683, "body": "@Philip Tzou There is no other program running on port 5000."}, {"owner": {"reputation": 41, "user_id": 10632787, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-1t5AjtoC2_Y/AAAAAAAAAAI/AAAAAAAAFEA/_YaJQFkwTVM/photo.jpg?sz=128", "display_name": "MEHUL SOLANKI", "link": "https://stackoverflow.com/users/10632787/mehul-solanki"}, "reply_to_user": {"reputation": 4685, "user_id": 3067485, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/mpI7N.png?s=128&g=1", "display_name": "jlandercy", "link": "https://stackoverflow.com/users/3067485/jlandercy"}, "edited": false, "score": 0, "creation_date": 1552544460, "post_id": 55152316, "comment_id": 97051755, "body": "@jlandercy  I didn&#39;t get your answer. Can you please elaborate more?"}, {"owner": {"reputation": 4685, "user_id": 3067485, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/mpI7N.png?s=128&g=1", "display_name": "jlandercy", "link": "https://stackoverflow.com/users/3067485/jlandercy"}, "edited": false, "score": 0, "creation_date": 1552555432, "post_id": 55152316, "comment_id": 97056913, "body": "Your code works on higher version. The line <code>from test import app</code> is useless since you are shadowing the <code>app</code> variable (but it is unlikely related to your problem). Because you have not added route for root <code>@app.route(&#39;&#47;&#39;)</code> the base url <code>http:&#47;&#47;127.0.0.1:5000</code> does return <code>404</code> (are you sure you tried the right url?). My advice update your flask version, comment out the second import. Then run and check out the correct url. Also add a root, it is somehow helpful."}, {"owner": {"reputation": 4685, "user_id": 3067485, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/mpI7N.png?s=128&g=1", "display_name": "jlandercy", "link": "https://stackoverflow.com/users/3067485/jlandercy"}, "edited": false, "score": 0, "creation_date": 1552640979, "post_id": 55152316, "comment_id": 97095942, "body": "Have you solved your problem? If so, would you mind to share your answer. Thank you"}, {"owner": {"reputation": 41, "user_id": 10632787, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-1t5AjtoC2_Y/AAAAAAAAAAI/AAAAAAAAFEA/_YaJQFkwTVM/photo.jpg?sz=128", "display_name": "MEHUL SOLANKI", "link": "https://stackoverflow.com/users/10632787/mehul-solanki"}, "reply_to_user": {"reputation": 4685, "user_id": 3067485, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/mpI7N.png?s=128&g=1", "display_name": "jlandercy", "link": "https://stackoverflow.com/users/3067485/jlandercy"}, "edited": false, "score": 0, "creation_date": 1552829382, "post_id": 55152316, "comment_id": 97151084, "body": "@jlandercy Not yet solved, I didn&#39;t get time to update it, today I checked it by updating the flask version and pip version but still getting 404 error. I will update the screenshot and the output above."}, {"owner": {"reputation": 4685, "user_id": 3067485, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/mpI7N.png?s=128&g=1", "display_name": "jlandercy", "link": "https://stackoverflow.com/users/3067485/jlandercy"}, "edited": false, "score": 0, "creation_date": 1552837784, "post_id": 55152316, "comment_id": 97153785, "body": "Please avoid screenshot, they are not helpful. Copy paste instead."}], "answers": [{"tags": [], "owner": {"reputation": 9377, "user_id": 8431111, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GteAE.jpg?s=128&g=1", "display_name": "J_H", "link": "https://stackoverflow.com/users/8431111/j-h"}, "is_accepted": false, "score": 2, "last_activity_date": 1552835229, "creation_date": 1552835229, "answer_id": 55208497, "question_id": 55152316, "link": "https://stackoverflow.com/questions/55152316/not-able-to-reach-flask-webserver/55208497#55208497", "title": "Not able to reach Flask webserver", "body": "<p><a href=\"http://flask.pocoo.org/docs/1.0/api/#flask.Flask.run\" rel=\"nofollow noreferrer\">The docs</a> suggest that you should verify that .env &amp; .flaskenv files are not interfering. (Likely they are not.)</p>\n\n<h1>shadowing</h1>\n\n<p>You really need to avoid shadowing one symbol with another.</p>\n\n<p>Please don't name your module <code>test</code>, as python ships with a system library with that name. You might use <code>test1</code> instead, to avoid the needless possibility of confusion.</p>\n\n<p>Please rename your global variable to <code>app_</code>, since your module has an <code>app.py</code> file.</p>\n\n<h1>root URL</h1>\n\n<p>Please add a <code>/</code> slash route, even though it's not strictly necessary.\nYou will find that it aids debugging.</p>\n\n<pre><code>@app_.route('/')\ndef root():\n    return '&lt;h1&gt;top level&lt;/h1&gt;'\n</code></pre>\n\n<h1>version</h1>\n\n<p>Run a <a href=\"https://pypi.org/project/Flask/1.0.2/\" rel=\"nofollow noreferrer\">current version</a> of flask, please.\nIt's much better to report problems with current rather than downrev code.</p>\n\n<h1>execution</h1>\n\n<p>Rather than having python directly call <code>app_.run(...)</code>, please run <code>flask</code> instead. Use <code>export</code> or <code>env</code>, whichever you prefer:</p>\n\n<pre><code>$ export FLASK_APP=test1 FLASK_ENV=development\n$ env    FLASK_APP=test1 FLASK_ENV=development flask run --port=5000\n</code></pre>\n\n<p>This enables debug mode, which should help you get to the bottom of your routing issues.\nPlus, reloading after edits is quite convenient.\nThe key is that rather than running <code>python</code>, you run <code>flask</code> which in turn runs <code>python</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 10632787, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-1t5AjtoC2_Y/AAAAAAAAAAI/AAAAAAAAFEA/_YaJQFkwTVM/photo.jpg?sz=128", "display_name": "MEHUL SOLANKI", "link": "https://stackoverflow.com/users/10632787/mehul-solanki"}, "is_accepted": false, "score": 0, "last_activity_date": 1554439770, "creation_date": 1554439770, "answer_id": 55528433, "question_id": 55152316, "link": "https://stackoverflow.com/questions/55152316/not-able-to-reach-flask-webserver/55528433#55528433", "title": "Not able to reach Flask webserver", "body": "<p>While I was troubleshooting, I noticed that the above same code works in raspberry Pi zero module with same python and flask version. But it is still not working in visual studio on windows 7. Probably there might be some issue with my visual studio. I will uninstall it reinstall it again. But yes my issue is solved for now. Thanks everyone for answering.</p>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 7968068, "user_type": "registered", "profile_image": "https://graph.facebook.com/10202697046183580/picture?type=large", "display_name": "Dimitar Petkov", "link": "https://stackoverflow.com/users/7968068/dimitar-petkov"}, "is_accepted": false, "score": 0, "last_activity_date": 1595751500, "creation_date": 1595751500, "answer_id": 63097743, "question_id": 55152316, "link": "https://stackoverflow.com/questions/55152316/not-able-to-reach-flask-webserver/63097743#63097743", "title": "Not able to reach Flask webserver", "body": "<p>I had the same issue running VS Code on Ubuntu 19.10. The problem was returned string from route view function.</p>\n<pre><code>@app.route('/')\n@app.route('/index')\ndef index():\n\n    return 'Hello World!'\n</code></pre>\n<p>gives error 404. But when I changed to :</p>\n<pre><code>@app.route('/')\n@app.route('/index')\ndef index():\n\n    return '&lt;h1&gt;Hello World!&lt;/h1&gt;'\n</code></pre>\n<p>everything was just fine.</p>\n"}], "owner": {"reputation": 41, "user_id": 10632787, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-1t5AjtoC2_Y/AAAAAAAAAAI/AAAAAAAAFEA/_YaJQFkwTVM/photo.jpg?sz=128", "display_name": "MEHUL SOLANKI", "link": "https://stackoverflow.com/users/10632787/mehul-solanki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 624, "favorite_count": 2, "answer_count": 3, "score": 0, "last_activity_date": 1595751500, "creation_date": 1552517447, "last_edit_date": 1552829984, "question_id": 55152316, "link": "https://stackoverflow.com/questions/55152316/not-able-to-reach-flask-webserver", "title": "Not able to reach Flask webserver", "body": "<p>This is my test code running on Visual studio 2017, file name is test:</p>\n\n<pre><code>from flask import Flask, request      #import main Flask class and request object\nfrom test import app\n\napp = Flask(__name__) #create the Flask app\n\n@app.route('/query-example')\ndef query_example():\n    return 'Todo...'\n\n@app.route('/form-example')\ndef formexample():\n    return 'Todo...'\n\n@app.route('/json-example')\ndef jsonexample():\n    return 'Todo...'\n\nif __name__ == '__main__':\n    app.run(debug=True, port=5000) #run app in debug mode on port 5000\n</code></pre>\n\n<p>But when I run it in Visual studio 2017 and I enter this route \"<a href=\"http://127.0.0.1:5000/json-example\" rel=\"nofollow noreferrer\">http://127.0.0.1:5000/json-example</a>\" in Chrome Browser I always get this error message.</p>\n\n<blockquote>\n  <p>\"404 Not Found\"\n  The requested URL was not found on the server. If you entered the URL\n  manually please check your spelling and try again.</p>\n</blockquote>\n\n<p>I am a learner, tried following this article:\n<a href=\"https://scotch.io/bar-talk/processing-incoming-request-data-in-flask\" rel=\"nofollow noreferrer\">https://scotch.io/bar-talk/processing-incoming-request-data-in-flask</a></p>\n\n<ul>\n<li>Python: 3.6 </li>\n<li>Flask: 0.12.4</li>\n<li>pip: 18.1</li>\n</ul>\n\n<p>Earlier I used to get the return message with the same code but after updating the flask to 0.12.4, its not working, I think something has changed. I am not able to debug the exact issue.</p>\n\n<p>--Update--</p>\n\n<p>Ok, after updating the flask version to 1.0.2, but still not able to reach the webserver from the url: <a href=\"http://127.0.0.1:5000/json-example\" rel=\"nofollow noreferrer\">http://127.0.0.1:5000/json-example</a>. Please check out the screenshot below.</p>\n\n<p><a href=\"https://i.stack.imgur.com/J39IK.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/J39IK.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>I get 404 error not found:</p>\n\n<blockquote>\n  <p>Not Found</p>\n  \n  <p>The requested URL was not found on the server. If you entered the URL\n  manually please check your spelling and try again.</p>\n</blockquote>\n"}, {"tags": ["python", "tensorflow", "crop"], "answers": [{"comments": [{"owner": {"reputation": 144, "user_id": 5396787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58441839f2c3367608a892b6491993a1?s=128&d=identicon&r=PG&f=1", "display_name": "skmth", "link": "https://stackoverflow.com/users/5396787/skmth"}, "edited": false, "score": 0, "creation_date": 1552542976, "post_id": 55153684, "comment_id": 97051221, "body": "Thanks @edkevekeh . This would make the masking part more compact. But I&#39;d still have to loop over the num_boxes since each box will have different before(after)_axis_0(1) values. I was looking for something like tf.image.crop_and_resize which takes boxes [num_boxes, 4] as input, but I couldn&#39;t figure out how tensorflow slices the boxes."}, {"owner": {"reputation": 14633, "user_id": 5069957, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/597577c2765adaa190e4524d3a3860fe?s=128&d=identicon&r=PG&f=1", "display_name": "edkeveked", "link": "https://stackoverflow.com/users/5069957/edkeveked"}, "reply_to_user": {"reputation": 144, "user_id": 5396787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58441839f2c3367608a892b6491993a1?s=128&d=identicon&r=PG&f=1", "display_name": "skmth", "link": "https://stackoverflow.com/users/5396787/skmth"}, "edited": false, "score": 0, "creation_date": 1552557760, "post_id": 55153684, "comment_id": 97058381, "body": "Since you are to generate a mask for each image you would like to extract, I think that there are no other ways than looping over <code>num_boxes</code> and use each box coordinates to generate the <code>before_axis</code> and <code>after_axis</code>. See my edited answer"}], "tags": [], "owner": {"reputation": 14633, "user_id": 5069957, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/597577c2765adaa190e4524d3a3860fe?s=128&d=identicon&r=PG&f=1", "display_name": "edkeveked", "link": "https://stackoverflow.com/users/5069957/edkeveked"}, "is_accepted": false, "score": 0, "last_activity_date": 1552557718, "last_edit_date": 1552557718, "creation_date": 1552527488, "answer_id": 55153684, "question_id": 55152315, "link": "https://stackoverflow.com/questions/55152315/extract-rectangular-boxes-with-padding/55153684#55153684", "title": "Extract rectangular boxes with padding", "body": "<p>The mask can be created using <code>tf.pad</code>. </p>\n\n<pre><code> crop = tf.ones([3, 3])\n # \"before_axis_x\" how many padding will be added before cropping zone over the axis x\n # \"after_axis_x\" how many padding will be added after cropping zone over the axis x\n mask = tf.pad(crop, [[before_axis_0, after_axis_0], [before_axis_1, after_axis_1]]\n\n tf.mask(image, mask) # creates the extracted image\n</code></pre>\n\n<p>To have the same behavior as tf.image.crop_and_resize, here is a function that will take an array of boxes and will return an array of extracted images with padding.</p>\n\n<pre><code>def extract_with_padding(image, boxes):\n  \"\"\"\n   boxes: tensor of shape [num_boxes, 4]. \n          boxes are the coordinates of the extracted part\n          box is an array [y1, x1, y2, x2] \n          where [y1, x1] (respectively [y2, x2]) are the coordinates \n          of the top left (respectively bottom right ) part of the image\n   image: tensor containing the initial image\n  \"\"\"\n  extracted = []\n  shape = tf.shape(image)\n  for b in boxes:\n    crop = tf.ones([3, 3])\n\n    mask = tf.pad(crop, [[b[0], shape[0] - b[2]], [b[1] , shape[1] - b[3]]])\n    extracted.append(tf.boolean_mask(image, mask))\n\n  return extracted\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 144, "user_id": 5396787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58441839f2c3367608a892b6491993a1?s=128&d=identicon&r=PG&f=1", "display_name": "skmth", "link": "https://stackoverflow.com/users/5396787/skmth"}, "is_accepted": false, "score": 1, "last_activity_date": 1552682952, "creation_date": 1552682952, "answer_id": 55190493, "question_id": 55152315, "link": "https://stackoverflow.com/questions/55152315/extract-rectangular-boxes-with-padding/55190493#55190493", "title": "Extract rectangular boxes with padding", "body": "<p>Thanks for that really nice function @edkevekeh. I've had to modify it slightly to get it to do what I want. One, I couldn't iterate over boxes which is a Tensor object. Plus, the crop size is determined by the box and not always 3x3. Also, tf.boolean_mask returns the crop, but I want to keep the crop, but replace outside the crop with 0. So I replaced the tf.boolean_mask with multiplication.</p>\n\n<p>For my use case num_boxes can be large, so I wanted to know if there was a more efficient way than a for loop, guess not. My modified version of @edkevekeh's solution if anyone else needs it.</p>\n\n<pre><code>def extract_with_padding(image, boxes):\n    \"\"\"\n    boxes: tensor of shape [num_boxes, 4]. \n          boxes are the coordinates of the extracted part\n          box is an array [y1, x1, y2, x2] \n          where [y1, x1] (respectively [y2, x2]) are the coordinates \n          of the top left (respectively bottom right ) part of the image\n    image: tensor containing the initial image\n    \"\"\"\n    extracted = []\n    shape = tf.shape(image)\n    for i in range(boxes.shape[0]):\n        b = boxes[i]\n        crop = tf.ones([b[2] - b[0], b[3] - b[1]])\n        mask = tf.pad(crop, [[b[0], shape[0] - b[2]], [b[1] , shape[1] - b[3]]])\n        extracted.append(image*mask)\n    return extracted \n</code></pre>\n"}], "owner": {"reputation": 144, "user_id": 5396787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58441839f2c3367608a892b6491993a1?s=128&d=identicon&r=PG&f=1", "display_name": "skmth", "link": "https://stackoverflow.com/users/5396787/skmth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 424, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1552682952, "creation_date": 1552517446, "last_edit_date": 1552554236, "question_id": 55152315, "link": "https://stackoverflow.com/questions/55152315/extract-rectangular-boxes-with-padding", "title": "Extract rectangular boxes with padding", "body": "<p>I'm trying to extract values From a 2d Tensor inside multiple rectangular regions. I want to crop rectangular regions while setting all values outside the box to zero. </p>\n\n<p>For example from the 9 x 9 image I want to get two separate images with values inside the two rectangular red boxes, while setting the rest of the values to zero. Is there a convenient way to do this with tensorflow slicing?\n<a href=\"https://i.stack.imgur.com/YVtuC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YVtuC.png\" alt=\"extract values inside rectangles\"></a></p>\n\n<p>One way I thought of approaching this is defining a mask array that is 1 inside the box and 0 outside and multiply it with the input array. But this requires looping over the number of boxes, each time changing which values of the mask are set to 0. Is there a faster and more efficient way to do this without using for loops? Is there an equivalent of crop and replace function in tensorflow? Here's the code I have with the for loop. Appreciate any input  on this. Thanks</p>\n\n<pre><code>import tensorflow as tf\nimport matplotlib.pyplot as plt\nimport matplotlib.patches as patches\n\ntf.reset_default_graph()\n\nsize = 9 # size of input image\nnum_boxes = 2 # number of rectangular boxes\n\n\ndef get_cutout(X, bboxs):\n    \"\"\"Returns copies of X with values only inside bboxs\"\"\"\n    out = []\n    for i in range(num_boxes):\n        bbox = bboxs[i] # get rectangular box coordinates\n        Y = tf.Variable(np.zeros((size, size)), dtype=tf.float32) # define temporary mask\n        # set values of mask inside box to 1\n        t = [Y[bbox[0]:bbox[2], bbox[2]:bbox[3]].assign(\n            tf.ones((bbox[2]-bbox[0], bbox[3]-bbox[2])))]\n        with tf.control_dependencies(t):\n            mask = tf.identity(Y) \n        out.append(X * mask) # get values inside rectangular box\n    return out, X\n\n#define a 9x9 input image X and convert to tensor\nin_x = np.eye(size)\nin_x[0:3]=np.random.rand(3,9)\nX = tf.constant(in_x , dtype=tf.float32)\n\nbboxs = tf.placeholder(tf.int32, [None, 4]) # placeholder for rectangular box\n\nX_outs = get_cutout(X, bboxs)\n\n# coordintes of box ((bottom left x, bottom left y, top right x, top right y))\nin_bbox = [[1,3,3,6], [4,3,7,8]] \nfeed_dict = {bboxs: in_bbox}\n\nwith tf.Session() as sess:\n    sess.run(tf.global_variables_initializer())\n    x_out= sess.run(X_outs, feed_dict=feed_dict)\n\n# plot results\nvmin = np.min(x_out[2])\nvmax = np.max(x_out[2])\nfig, ax = plt.subplots(nrows=1, ncols=1+len(in_bbox),figsize=(10,2))\nim = ax[0].imshow(x_out[2], vmin=vmin, vmax=vmax, origin='lower')\nplt.colorbar(im, ax=ax[0])\nax[0].set_title(\"input X\")\nfor i, bbox in enumerate(in_bbox):\n    bottom_left = (bbox[2]-0.5, bbox[0]-0.5)\n    width = bbox[3]-bbox[2]\n    height = bbox[2]- bbox[0]\n    rect = patches.Rectangle(bottom_left, width, height,\n                             linewidth=1,edgecolor='r',facecolor='none')\n    ax[0].add_patch(rect)\n    ax[i+1].set_title(\"extract values in box {}\".format(i+1))\n    im = ax[i + 1].imshow(x_out[0][i], vmin=vmin, vmax=vmax, origin='lower')\n    plt.colorbar(im,ax=ax[i+1])\n</code></pre>\n"}, {"tags": ["python", "bioinformatics", "biopython", "genome"], "answers": [{"tags": [], "owner": {"reputation": 1202, "user_id": 11180598, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-CQQlL-TIm5I/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reMSINDmzGm99-d9N4GKHMrOIt41g/mo/photo.jpg?sz=128", "display_name": "Oka", "link": "https://stackoverflow.com/users/11180598/oka"}, "is_accepted": false, "score": 0, "last_activity_date": 1552527789, "last_edit_date": 1552527789, "creation_date": 1552522344, "answer_id": 55153018, "question_id": 55152308, "link": "https://stackoverflow.com/questions/55152308/get-genome-from-ncbi-with-biopython/55153018#55153018", "title": "Get genome from NCBI with biopython", "body": "<p>I get a response with your code: </p>\n\n<pre><code>def surf_entrez():\n    from Bio import Entrez\n    from Bio import SeqIO\n\n    Entrez.email = \"me@alsome.org\"\n    handle = Entrez.efetch(db=\"nuccore\", id=\"NC_007779.1\", rettype=\"gb\", retmode=\"text\")\n    genome = SeqIO.read(handle, \"genbank\")\n    print(genome)\n\nsurf_entrez()\n\n# RESULT\n#/sequence_version=1\n#/organism=Escherichia coli str. K-12 substr. W3110\n#/data_file_division=CON\n#/structured_comment=OrderedDict([('Genome-Annotation-Data', OrderedDict([('Annotation #Provider', 'NCBI'), ('Annotation Date', '02/22/2017 01:34:58'), ('Annotation Pipeline', #'NCBI Prokaryotic Genome'), ('Annotation Method', 'Best-placed reference protein'), ('Annotation Software revision', '4.1'), ('Features Annotated', 'Gene; CDS; rRNA; tRNA; ncRNA;'), ('Genes (total)', '4,793'), ('CDS (total)', '4,671'), ('Genes (coding)', '4,471'), ('CDS (coding)', '4,471'), ('Genes (RNA)', '122'), ('rRNAs', '8, 7, 7 (5S, 16S, 23S)'), ('complete rRNAs', '8, 7, 7 (5S, 16S, 23S)'), ('tRNAs', '87'), ('ncRNAs', '13'), ('Pseudo Genes (total)', '200'), ('Pseudo Genes (ambiguous residues)', '0 of 200'), ('Pseudo Genes (frameshifted)', '99 of 200'), ('Pseudo Genes (incomplete)', '77 of 200'), #('Pseudo Genes (internal stop)', '66 of 200'), ('Pseudo Genes (multiple problems)', '38 #of 200'), ('CRISPR Arrays', '2')]))])\n#/date=22-FEB-2017\n#/topology=circular\n#/taxonomy=['Bacteria', 'Proteobacteria', 'Gammaproteobacteria', 'Enterobacterales', \n#'Enterobacteriaceae', 'Escherichia']\n#/keywords=['RefSeq']\n#/contig=join(AP009048.1:1..4646332)\n#/accessions=['NC_007779', 'NZ_AB001340', 'NZ_D10483', 'NZ_D26562', 'NZ_D83536', \n#'NZ_D90699-D90711', 'NZ_D90713-D90754', 'NZ_D90756-D90878', 'NZ_D90880-D90897']\n#UnknownSeq(4646332, alphabet=IUPACAmbiguousDNA(), character='N')\n</code></pre>\n\n<p>Does it look correct?</p>\n\n<p>You can also use <code>SeqIO.parse</code>:</p>\n\n<pre><code>handle = Entrez.efetch(db=\"nuccore\", id=\"U49845\", rettype=\"gb\", retmode=\"text\")\ngenome = SeqIO.parse(handle, \"genbank\")\nfor record in genome:\n    print(record.id, len(record))\n    print(record)\n</code></pre>\n\n<p>It looks similar to <a href=\"https://www.ncbi.nlm.nih.gov/Sitemap/samplerecord.html\" rel=\"nofollow noreferrer\">GenBank file format</a>.</p>\n"}], "owner": {"reputation": 21, "user_id": 11161885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34e8a69d2f94f2f60297435c636bb8eb?s=128&d=identicon&r=PG&f=1", "display_name": "Voronin_10", "link": "https://stackoverflow.com/users/11161885/voronin-10"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 423, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1552569471, "creation_date": 1552517410, "last_edit_date": 1552569471, "question_id": 55152308, "link": "https://stackoverflow.com/questions/55152308/get-genome-from-ncbi-with-biopython", "title": "Get genome from NCBI with biopython", "body": "<p>Python newby here. I want to download the genome sequence for genome (NC_007779.1) using BioPython packages Entrez and SeqIO. So far, I have this code:</p>\n\n<pre><code>from Bio import Entrez\nfrom Bio import SeqIO\nEntrez.email = \"me@alsome.org\"\nhandle = Entrez.efetch(db=\"nuccore\", id=\"NC_007779.1\", rettype=\"gb\", retmode=\"text\")\ngenome = SeqIO.read(handle, \"genbank\")\nprint(genome)\n</code></pre>\n\n<p>But I am getting nothing. Any help will be appreciated.</p>\n\n<p>Thank you in advance!</p>\n"}, {"tags": ["python", "polygon", "shapes"], "answers": [{"tags": [], "owner": {"reputation": 6583, "user_id": 10426037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6723e3123b9a13d6360d1ee755f8728?s=128&d=identicon&r=PG&f=1", "display_name": "Valentino", "link": "https://stackoverflow.com/users/10426037/valentino"}, "is_accepted": false, "score": 0, "last_activity_date": 1552566730, "last_edit_date": 1552566730, "creation_date": 1552526936, "answer_id": 55153602, "question_id": 55152260, "link": "https://stackoverflow.com/questions/55152260/making-a-triacontagon-in-python/55153602#55153602", "title": "Making a Triacontagon in Python", "body": "<p>If I understand correctly what is happening, you are misunderstanding the use of <a href=\"https://docs.python.org/3/library/functions.html#input\" rel=\"nofollow noreferrer\">input()</a>.</p>\n\n<p><code>input()</code> ask the user for input at runtime. Let say in the code you have <code>x = int(input(\"Please type number of sides: \"))</code>, then the user is asked for input, typically to be typed in the terminal, and the input is saved in the variable <code>x</code>. The string argument of <code>input()</code> is shown in the terminal just before the user typing: it's intent is to provide information to the user on what he/she have to type.</p>\n\n<p>In your case, if you want to draw a triacontagon you could just edit your code this way:</p>\n\n<pre><code>numberOfSides = 30\nlengthOfSide = 5\n</code></pre>\n\n<p>You do not need <code>input()</code> to assign to a variable a known value.</p>\n\n<p>But your code is more general, it can draw any regular polygon. To make it more clear, try to edit it this way:</p>\n\n<pre><code>numberOfSides = int(input(\"Please type number of sides: \"))\nlengthOfSide = int(input(\"Please type length of sides: \"))\n</code></pre>\n\n<p>It will draw a regular polygon according to the numbers you give him each time you execute the code (if you type 4 and 10 for example, the code draws a square whose each side is of length 10).</p>\n\n<p>Remember to add at the end of the script:</p>\n\n<pre><code>turtle.done()\n</code></pre>\n\n<p>otherwise the window is closed immediately.</p>\n"}, {"comments": [{"owner": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "edited": false, "score": 0, "creation_date": 1553288031, "post_id": 55173906, "comment_id": 97343482, "body": "This doesn&#39;t have 30 sides, it has 72.  Why should the OP type this code?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user11093202"}, "reply_to_user": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "edited": false, "score": 0, "creation_date": 1553749421, "post_id": 55173906, "comment_id": 97502046, "body": "@cdlane have you ran the code? Also, if you do the math, it goes left 5 degrees. A circle is 360 degrees, and 72*5 is 360. Also, if you run the code, you will see that it has close to 30 spokes"}, {"owner": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "edited": false, "score": 0, "creation_date": 1553752264, "post_id": 55173906, "comment_id": 97502880, "body": "Yes, I ran the code.  You just confirmed what I said, it has 72 sides, not 30.  But in your answer you wrote &quot;but if you see the code, it is a tricantagon. 30 sides!!!&quot;  I see the code.  72 sides.  Not a triacontagon."}, {"owner": {"user_type": "does_not_exist", "display_name": "user11093202"}, "reply_to_user": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "edited": false, "score": 0, "creation_date": 1553836925, "post_id": 55173906, "comment_id": 97541674, "body": "@cdlane My mistake I mixed this up with a different question I answered"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user11093202"}, "is_accepted": false, "score": 0, "last_activity_date": 1552609582, "creation_date": 1552609582, "answer_id": 55173906, "question_id": 55152260, "link": "https://stackoverflow.com/questions/55152260/making-a-triacontagon-in-python/55173906#55173906", "title": "Making a Triacontagon in Python", "body": "<p>You can do it manually, it will be long, but it will be SO much easier.</p>\n\n<p>Here is the code you should type:\nBy the way, this tricantagon won't look exactly like a tricantagon, more like a circle, but if you see the code, it is a tricantagon. 30 sides!!</p>\n\n<pre><code>from turtle import *\nspeed(1)\npenup()\nsetpos(-250, 0)\ndown()\nfor i in range(72):\n    fd(10)\n    left(5)\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 11127914, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-LVNCxF2gC_Y/AAAAAAAAAAI/AAAAAAAAFc8/U90ODMmbohU/photo.jpg?sz=128", "display_name": "monica bach", "link": "https://stackoverflow.com/users/11127914/monica-bach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 146, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1552609582, "creation_date": 1552517091, "last_edit_date": 1552519349, "question_id": 55152260, "link": "https://stackoverflow.com/questions/55152260/making-a-triacontagon-in-python", "title": "Making a Triacontagon in Python", "body": "<p>I have code to make a triacontagon (30 sided polygon) but when i let it run, it only provides an answer in the shell and not an actual program. It may be due to what I put beside int, but I'm not sure. Thanks!</p>\n\n<p><strong>the code</strong></p>\n\n<pre><code>import turtle\n\nnumberOfSides = int(input('30'))\nlengthOfSide = int(input('5'))\nexteriorAngle = 360/numberOfSides\nfor i in range(numberOfSides):\n    turtle.forward(lengthOfSide)\n    turtle.right(exteriorAngle)\n</code></pre>\n"}, {"tags": ["python", "encoding", "scikit-learn", "one-hot-encoding", "imputation"], "comments": [{"owner": {"reputation": 3213, "user_id": 10956606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b72e8de2912e894bba967bf023e1826?s=128&d=identicon&r=PG&f=1", "display_name": "MaximeKan", "link": "https://stackoverflow.com/users/10956606/maximekan"}, "edited": false, "score": 0, "creation_date": 1552523438, "post_id": 55152256, "comment_id": 97046635, "body": "My 2 cents on this is that if you have y values you need to impute, then you should rather discard them from your training set and that&#39;s it. What&#39;s the point of training a model against imputed values? Most likely, this will only harm your model in the end."}, {"owner": {"reputation": 661, "user_id": 4123749, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c9b1c84914176fbdf0a0a835ca7420c9?s=128&d=identicon&r=PG&f=1", "display_name": "Odisseo", "link": "https://stackoverflow.com/users/4123749/odisseo"}, "reply_to_user": {"reputation": 3213, "user_id": 10956606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b72e8de2912e894bba967bf023e1826?s=128&d=identicon&r=PG&f=1", "display_name": "MaximeKan", "link": "https://stackoverflow.com/users/10956606/maximekan"}, "edited": false, "score": 0, "creation_date": 1552527931, "post_id": 55152256, "comment_id": 97047750, "body": "That is a very good point! I only have two rows with null target var so I will definitely do that. Just out of curiosity, what if I had many more nulls in y? Like 50% of the dataset. What would you do in that situation?"}, {"owner": {"reputation": 3213, "user_id": 10956606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b72e8de2912e894bba967bf023e1826?s=128&d=identicon&r=PG&f=1", "display_name": "MaximeKan", "link": "https://stackoverflow.com/users/10956606/maximekan"}, "edited": false, "score": 0, "creation_date": 1552528105, "post_id": 55152256, "comment_id": 97047784, "body": "I would still discard the missing data. If you really have very little data that is labeled, then you could start thinking about semi-supervised learning, but this is a totally different way of proceeding."}, {"owner": {"reputation": 3213, "user_id": 10956606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b72e8de2912e894bba967bf023e1826?s=128&d=identicon&r=PG&f=1", "display_name": "MaximeKan", "link": "https://stackoverflow.com/users/10956606/maximekan"}, "edited": false, "score": 0, "creation_date": 1552528861, "post_id": 55152256, "comment_id": 97047924, "body": "Glad it helped! :)"}], "owner": {"reputation": 661, "user_id": 4123749, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c9b1c84914176fbdf0a0a835ca7420c9?s=128&d=identicon&r=PG&f=1", "display_name": "Odisseo", "link": "https://stackoverflow.com/users/4123749/odisseo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 157, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1552517041, "creation_date": 1552517041, "question_id": 55152256, "link": "https://stackoverflow.com/questions/55152256/using-pipeline-to-avoid-data-leakage-both-for-x-and-y", "title": "Using Pipeline to Avoid Data Leakage both for X and y", "body": "<p>I followed the example at this link very closely: <a href=\"https://scikit-learn.org/stable/auto_examples/compose/plot_column_transformer_mixed_types.html\" rel=\"nofollow noreferrer\">https://scikit-learn.org/stable/auto_examples/compose/plot_column_transformer_mixed_types.html</a>\nbut used a different dataset (found here: <a href=\"https://archive.ics.uci.edu/ml/datasets/Adult\" rel=\"nofollow noreferrer\">https://archive.ics.uci.edu/ml/datasets/Adult</a>)</p>\n\n<p>Unlike the example dataset, my dataset contains a couple of nulls in the y (aka 'target') column as well. I am wondering how I would build a pipeline similar to the one in the sklearn documentation that both transforms columns in X and y rather than just in X. This is what I have tried but of course it doesn't work because the 'target' feature has been dropped from X in order to allow for train_test_split:</p>\n\n<pre><code>import os\nimport pandas as pd\nimport numpy as np\n\nos.listdir()\n\ndf_train = pd.read_csv('data_train.txt', header=None)\ndf_test = pd.read_csv('data_test.txt', header=None)\n\nnames = ['age', 'workclass', 'fnlwgt', 'education', 'education-num', 'marital-status', \n        'occupation', 'relationship', 'race', 'sex', 'capital-sign', 'capital-loss', \n        'hours-per-week', 'native-country', 'target']\n\ndf = pd.concat([df_train, df_test], axis=0)\n\ndf.head()\n\ndf.columns = names\n\nData Leakage Example - Preprocessing is done on the entire dataset\n\ndf_leakage = df.copy()\n\n#Exploring nulls: \ndf_leakage[df_leakage.isnull().any(axis=1)]\n\nThere are only two nulls so it would be safe to discard them but for the purposes of this demo we will impute values \n\nfrom sklearn.compose import ColumnTransformer\nfrom sklearn.pipeline import Pipeline\nfrom sklearn.impute import SimpleImputer\nfrom sklearn.preprocessing import StandardScaler, OneHotEncoder, OrdinalEncoder, LabelEncoder\nfrom sklearn.linear_model import LogisticRegression\nfrom sklearn.model_selection import train_test_split\n\n#Defining numeric features and the transformations we will apply to them\nnumeric_features = ['capital-sign', 'capital-loss', 'hours-per-week', 'education-num']\nnumeric_transformer = Pipeline(steps=[\n    ('imputer', SimpleImputer(strategy='mean')),\n    ('scaler', StandardScaler())])\n\n#Defining categorical features and the transformations we will apply to them\ncategorical_features = ['marital-status', 'occupation', 'relationship', 'race', 'sex', 'native-country']\ncategorical_transformer = Pipeline(steps=[\n    ('imputer', SimpleImputer(strategy='most_frequent')),\n    ('onehot', OneHotEncoder(handle_unknown='ignore'))])\n\n#Defining categorical ordinal features and the transformations we will apply to them\n#Note: we already have a education-continuous feature available but we will demo how to apply an ordinal transformation:\nordinal_features = ['education']\nordinal_transformer = Pipeline(steps=[\n    ('imputer', SimpleImputer(strategy='most_frequent')),\n    ('ordinal', OrdinalEncoder())])\n\n#Defining categorical ordinal features and the transformations we will apply to them\n#Note: we already have a education-continuous feature available but we will demo how to apply an ordinal transformation:\nordinal_features = ['education']\nlabel_transformer = Pipeline(steps=[\n    ('imputer', SimpleImputer(strategy='most_frequent')),\n    ('label', LabelEncoder())])\n\npreprocessor = ColumnTransformer(\n    transformers=[\n        ('num', numeric_transformer, numeric_features),\n        ('cat', categorical_transformer, categorical_features),\n        ('ord', ordinal_transformer, ordinal_features),\n        ('lab', label_transformer, label_features),\n    ])\n\n# Append classifier to preprocessing pipeline.\n# Now we have a full prediction pipeline.\nclf = Pipeline(steps=[('preprocessor', preprocessor),\n                      ('classifier', LogisticRegression(solver='lbfgs'))])\n\nX = df_leakage.drop('target', axis=1)\ny = df_leakage['target']\n\nX_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.2)\n\nclf.fit(X_train, y_train)\nprint(\"model score: %.3f\" % clf.score(X_test, y_test))\n\nError log (partial):\n    658             columns = list(key)\n    659 \n--&gt; 660         return [all_columns.index(col) for col in columns]\n    661 \n    662     elif hasattr(key, 'dtype') and np.issubdtype(key.dtype, np.bool_):\n\nValueError: 'y' is not in list\n</code></pre>\n\n<p>Obviously, I could easily apply the transformation to y separately, before any of these other transformations take place. I think it would be fine to handle character strings errors e.g. \".&lt;=50K\" vs \"&lt;=50K\". But if I want to impute the value of y with its mean, the value imputed would depend on the specific choice of y_train -- thus causing some data leakage. </p>\n\n<p>How would I be able to use the pipeline library to do this effectively?</p>\n"}, {"tags": ["python", "pandas", "numpy", "matplotlib", "jupyter-notebook"], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 3525572, "user_type": "registered", "profile_image": "https://graph.facebook.com/612617923/picture?type=large", "display_name": "DylanG1991", "link": "https://stackoverflow.com/users/3525572/dylang1991"}, "edited": false, "score": 0, "creation_date": 1552517972, "post_id": 55152381, "comment_id": 97045215, "body": "Sorry, I should say it needs to be a line plot with two lines, the first being the number of packets in the queue and the second being the number of packets dropped."}], "tags": [], "owner": {"reputation": 12519, "user_id": 423926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65539c07af4918433a89bcb298d75ca7?s=128&d=identicon&r=PG", "display_name": "mujjiga", "link": "https://stackoverflow.com/users/423926/mujjiga"}, "is_accepted": false, "score": 1, "last_activity_date": 1552520034, "last_edit_date": 1552520034, "creation_date": 1552517783, "answer_id": 55152381, "question_id": 55152251, "link": "https://stackoverflow.com/questions/55152251/how-to-make-readable-a-line-plot-using-a-dataframe-with-a-large-number-of-rows/55152381#55152381", "title": "How to make readable a line plot using a DataFrame with a large number of rows", "body": "<p>Try histogram </p>\n\n<pre><code>from matplotlib.pyplot import hist\nimport pandas as pd\ndf = pd.DataFrame()\ndf['x'] = np.random.rand(1000000)\nhist(df.index, weights=df.x, bins=1000)\nplt.show()\n</code></pre>\n\n<h1>Method 2 line plots</h1>\n\n<pre><code>df['x'] = np.random.rand(1000000)\ndf['y'] = np.random.rand(1000000)\nw = 1000\nv1 = df['x'].rolling(min_periods=1, window=w).sum()[[i*w for i in range(1, int(len(df)/w))]]/w\nv2 = df['y'].rolling(min_periods=1, window=w).sum()[[i*w for i in range(1, int(len(df)/w))]]/w\nplt.plot(np.arange(len(v1)),v1, c='b')\nplt.plot(np.arange(len(v1)),v2, c='r')\nplt.show()\n</code></pre>\n\n<p>We are calculating the mean of w=1000 points i.e averaging w values together and plotting them. </p>\n\n<p>Looks like below when 1000000 points are bucked at every 1000 interval </p>\n\n<p><a href=\"https://i.stack.imgur.com/ZY2sC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZY2sC.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 2650, "user_id": 9803111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5be0dea611f7de0ed9d56cb97d2afa24?s=128&d=identicon&r=PG&f=1", "display_name": "Nathaniel", "link": "https://stackoverflow.com/users/9803111/nathaniel"}, "is_accepted": true, "score": 1, "last_activity_date": 1552523156, "creation_date": 1552523156, "answer_id": 55153121, "question_id": 55152251, "link": "https://stackoverflow.com/questions/55152251/how-to-make-readable-a-line-plot-using-a-dataframe-with-a-large-number-of-rows/55153121#55153121", "title": "How to make readable a line plot using a DataFrame with a large number of rows", "body": "<p>With a million data points it will require a lot of effort and zooming in to see them in fine detail. <a href=\"https://plot.ly/python/\" rel=\"nofollow noreferrer\">Plotly</a> has some nice tools for zooming in and out of plots as well as sliding your data window along the x-axis. </p>\n\n<p>If you're okay with some averaging, you can plot a moving average and get close to a hundred thousand points. You can stack two subplots on each other to see both columns of data in reasonable detail. You can of course average them more, but you lose the ability to see fine details. </p>\n\n<pre><code>import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\n\ndef moving_avg(x, N=30):\n    return np.convolve(x, np.ones((N,))/N, mode='valid')\n\nplt.figure(figsize = (16,12))\n\nplt.subplot(3,1,1)\nx = np.random.random(1000)\nplt.plot(x, linewidth = 1, alpha = 0.5, label = 'linewidth = 1')\nplt.plot(moving_avg(x, 10), 'C0', label = 'moving average, N = 10')\nplt.xlim(0,len(x))\nplt.legend(loc=2)\n\nplt.subplot(3,1,2)\nx = np.random.random(10000)\nplt.plot(x, linewidth = 0.2, alpha = 0.5, label = 'linewidth = 0.2')\nplt.plot(moving_avg(x, 100), 'C0', label = 'moving average, N = 100')\nplt.xlim(0,len(x))\nplt.legend(loc=2)\n\nplt.subplot(3,1,3)\nx = np.random.random(100000)\nplt.plot(x, linewidth = 0.05, alpha = 0.5, label = 'linewidth = 0.05')\nplt.plot(moving_avg(x, 500), 'C0', label = 'moving average, N = 500')\nplt.xlim(0,len(x))\nplt.legend(loc=2)\n\nplt.tight_layout()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/BCSMw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BCSMw.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 81, "user_id": 3525572, "user_type": "registered", "profile_image": "https://graph.facebook.com/612617923/picture?type=large", "display_name": "DylanG1991", "link": "https://stackoverflow.com/users/3525572/dylang1991"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 233, "favorite_count": 1, "accepted_answer_id": 55153121, "answer_count": 2, "score": 1, "last_activity_date": 1552523156, "creation_date": 1552516992, "last_edit_date": 1552518025, "question_id": 55152251, "link": "https://stackoverflow.com/questions/55152251/how-to-make-readable-a-line-plot-using-a-dataframe-with-a-large-number-of-rows", "title": "How to make readable a line plot using a DataFrame with a large number of rows", "body": "<p>I have a 1,000,000 x 2 DataFrame object consisting of data I'm trying to understand visually.  Its basically a simulation of 1,000,000 events where a packet traveling along a network is either queued or dropped depending on the buffer's size.  So, the two column values are Packets in Queue and Packets Dropped.  </p>\n\n<p>I'm trying to make a line plot using Python, Matplotlib and Jupyter Notebooks that has the ID of the event on the x-axis and the number of packets in the queue at a specific ID point on the y-axis. There should be two lines, the first representing the number of packets in the queue and the second representing the number of packets dropped.  However, given that there are over 1,000,000 simulations, the graph isn't intelligible. The values are too squished together. Is it possible to make a readable graph with 1,000,000 event instances or do I need to dramatically trim the number of events?</p>\n"}, {"tags": ["python", "pandas", "xlsxwriter"], "comments": [{"owner": {"reputation": 1830, "user_id": 3343753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aY4qS.jpg?s=128&g=1", "display_name": "Pedro Rodrigues", "link": "https://stackoverflow.com/users/3343753/pedro-rodrigues"}, "edited": false, "score": 0, "creation_date": 1552517044, "post_id": 55152218, "comment_id": 97044952, "body": "one first thing is move the lambda to a first class function, does that help significantly?"}, {"owner": {"reputation": 1830, "user_id": 3343753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aY4qS.jpg?s=128&g=1", "display_name": "Pedro Rodrigues", "link": "https://stackoverflow.com/users/3343753/pedro-rodrigues"}, "edited": false, "score": 0, "creation_date": 1552517157, "post_id": 55152218, "comment_id": 97044988, "body": "otherwise, I would do this with zip and comprehensions, rather than <code>map</code>, I find it confusing."}, {"owner": {"reputation": 169, "user_id": 4386691, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/862dd6e0f0a133e5d68ecf118d7e888d?s=128&d=identicon&r=PG", "display_name": "azpiuser", "link": "https://stackoverflow.com/users/4386691/azpiuser"}, "reply_to_user": {"reputation": 1830, "user_id": 3343753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aY4qS.jpg?s=128&g=1", "display_name": "Pedro Rodrigues", "link": "https://stackoverflow.com/users/3343753/pedro-rodrigues"}, "edited": false, "score": 0, "creation_date": 1552517242, "post_id": 55152218, "comment_id": 97045018, "body": "Could you elaborate on your suggestions. I&#39;m functional with python, but not an expert by any means. Thanks!"}, {"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 1, "creation_date": 1552517317, "post_id": 55152218, "comment_id": 97045034, "body": "[dict(x) for x in zip([&quot;header&quot;,]*len(cols),cols)] ... maybe"}, {"owner": {"reputation": 1830, "user_id": 3343753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aY4qS.jpg?s=128&g=1", "display_name": "Pedro Rodrigues", "link": "https://stackoverflow.com/users/3343753/pedro-rodrigues"}, "edited": false, "score": 0, "creation_date": 1552517585, "post_id": 55152218, "comment_id": 97045109, "body": "try and post a <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable</a> example. Specifically the complete part, just not with the 18 thousand records, but some example."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1552517661, "post_id": 55152218, "comment_id": 97045126, "body": "If we could see a small portion of the data you&#39;re trying to write in a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> then I have a feeling this could be given an answer very quickly but, as it stands, I&#39;m trying to imagine what you&#39;re doing from a function, and the 10 min run time means that something has gone catastrophically wrong (I&#39;d expect maybe a couple of seconds <i>maximum</i>)"}], "answers": [{"comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1552517843, "post_id": 55152374, "comment_id": 97045178, "body": "That doesn&#39;t make any sense. This just writes a list of column headers and no data at all."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1552517975, "post_id": 55152374, "comment_id": 97045216, "body": "The dictionaries should contain the values that <i>belong under each header</i>, not a list of dictionaries stating the header name"}, {"owner": {"reputation": 169, "user_id": 4386691, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/862dd6e0f0a133e5d68ecf118d7e888d?s=128&d=identicon&r=PG", "display_name": "azpiuser", "link": "https://stackoverflow.com/users/4386691/azpiuser"}, "edited": false, "score": 1, "creation_date": 1552518279, "post_id": 55152374, "comment_id": 97045315, "body": "This works - went from minutes to less than a second :) I suck at python obviously :)   Really appreciate everyone chipping in so soon. Thanks Konrad."}, {"owner": {"reputation": 169, "user_id": 4386691, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/862dd6e0f0a133e5d68ecf118d7e888d?s=128&d=identicon&r=PG", "display_name": "azpiuser", "link": "https://stackoverflow.com/users/4386691/azpiuser"}, "edited": false, "score": 0, "creation_date": 1552518341, "post_id": 55152374, "comment_id": 97045330, "body": "FYI, on the [dict(x) for x in...]  I got : ValueError: dictionary update sequence element #0 has length 6; 2 is required"}, {"owner": {"reputation": 797, "user_id": 10397317, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LGVBG-_4e0U/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq2Kxbv4YCFKUQMz9FjXkYyHHTvdyw/mo/photo.jpg?sz=128", "display_name": "Konrad", "link": "https://stackoverflow.com/users/10397317/konrad"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1552518487, "post_id": 55152374, "comment_id": 97045367, "body": "@roganjosh in the examples in docs there is one with this type of initialization of column names and data goes as separate arg."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1552518722, "post_id": 55152374, "comment_id": 97045431, "body": "You will have to show me the specific example. I&#39;m pretty certain this answer does not address what the OP is trying to do; the list of dictionaries should contain k, v pairs where the <code>k</code> is the column name and <code>v</code> is the data to be written to that column. The output of your example code would not give a useful file."}, {"owner": {"reputation": 797, "user_id": 10397317, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LGVBG-_4e0U/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq2Kxbv4YCFKUQMz9FjXkYyHHTvdyw/mo/photo.jpg?sz=128", "display_name": "Konrad", "link": "https://stackoverflow.com/users/10397317/konrad"}, "edited": false, "score": 0, "creation_date": 1552518897, "post_id": 55152374, "comment_id": 97045474, "body": "Example 7 in link of the question"}, {"owner": {"reputation": 169, "user_id": 4386691, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/862dd6e0f0a133e5d68ecf118d7e888d?s=128&d=identicon&r=PG", "display_name": "azpiuser", "link": "https://stackoverflow.com/users/4386691/azpiuser"}, "edited": false, "score": 0, "creation_date": 1552519180, "post_id": 55152374, "comment_id": 97045562, "body": "Sorry to have unintentionally misled everyone - looks like the map/lambda version also runs fast. So, I really don&#39;t know what&#39;s going on. The same case sometimes runs fast, and sometimes not. That being said, the list comprehension version is more readable than what I originally had, so I do appreciate that.."}], "tags": [], "owner": {"reputation": 797, "user_id": 10397317, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LGVBG-_4e0U/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq2Kxbv4YCFKUQMz9FjXkYyHHTvdyw/mo/photo.jpg?sz=128", "display_name": "Konrad", "link": "https://stackoverflow.com/users/10397317/konrad"}, "is_accepted": true, "score": 1, "last_activity_date": 1552519097, "last_edit_date": 1552519097, "creation_date": 1552517745, "answer_id": 55152374, "question_id": 55152218, "link": "https://stackoverflow.com/questions/55152218/building-list-of-dicts-with-map-and-lambda-runs-very-slow/55152374#55152374", "title": "Building list of dicts with map and lambda runs very slow", "body": "<p>To create object like:</p>\n\n<pre><code>[{'header': 'A'},\n {'header': 'B'},\n {'header': 'C'}]\n</code></pre>\n\n<p>From </p>\n\n<pre><code>names = [\"A\",\"B\",\"C\"]\n</code></pre>\n\n<p>You can use list comprehension:</p>\n\n<pre><code>[{\"header\": x} for x in names]\n</code></pre>\n"}], "owner": {"reputation": 169, "user_id": 4386691, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/862dd6e0f0a133e5d68ecf118d7e888d?s=128&d=identicon&r=PG", "display_name": "azpiuser", "link": "https://stackoverflow.com/users/4386691/azpiuser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 55152374, "answer_count": 1, "score": 0, "last_activity_date": 1552519240, "creation_date": 1552516760, "last_edit_date": 1552519240, "question_id": 55152218, "link": "https://stackoverflow.com/questions/55152218/building-list-of-dicts-with-map-and-lambda-runs-very-slow", "title": "Building list of dicts with map and lambda runs very slow", "body": "<p>I'm writing out an xlsx with XlsxWriter and the sheet includes a table.\nFor creating the table, you have to supply a list of dicts (ref : Eg. 7 : <a href=\"https://xlsxwriter.readthedocs.io/example_tables.html#ex-tables\" rel=\"nofollow noreferrer\">https://xlsxwriter.readthedocs.io/example_tables.html#ex-tables</a> )</p>\n\n<p>I have the header names in a list, and now, to build the list of dicts for the add_table function, I use</p>\n\n<pre><code>headers = list( map( lambda x : { 'header' : x } , cols ) )  \n</code></pre>\n\n<p>This one does not seem to scale well - with 18000 entries, it takes on the order of 10 minutes.</p>\n\n<p>Any insight/improvement would be super. Thanks!</p>\n"}, {"tags": ["python", "numpy", "raspberry-pi"], "answers": [{"comments": [{"owner": {"reputation": 6194, "user_id": 773210, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/b2cf058543966b93b0b15acb631eb527?s=128&d=identicon&r=PG", "display_name": "Oved D", "link": "https://stackoverflow.com/users/773210/oved-d"}, "edited": false, "score": 0, "creation_date": 1552518652, "post_id": 55152270, "comment_id": 97045410, "body": "thanks, this would be clearer with something non 3x3 as its confusing what the 3rd dimension is.  Could you please update with lets say a 4x5 image?"}, {"owner": {"reputation": 21, "user_id": 9081585, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-U8HP4TK_tMY/AAAAAAAAAAI/AAAAAAAAGC4/CkDaf0pmRlU/photo.jpg?sz=128", "display_name": "Christian Moreno Calladito me", "link": "https://stackoverflow.com/users/9081585/christian-moreno-calladito-me"}, "reply_to_user": {"reputation": 6194, "user_id": 773210, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/b2cf058543966b93b0b15acb631eb527?s=128&d=identicon&r=PG", "display_name": "Oved D", "link": "https://stackoverflow.com/users/773210/oved-d"}, "edited": false, "score": 0, "creation_date": 1552527926, "post_id": 55152270, "comment_id": 97047746, "body": "@OvedD Check again the answer."}], "tags": [], "owner": {"reputation": 21, "user_id": 9081585, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-U8HP4TK_tMY/AAAAAAAAAAI/AAAAAAAAGC4/CkDaf0pmRlU/photo.jpg?sz=128", "display_name": "Christian Moreno Calladito me", "link": "https://stackoverflow.com/users/9081585/christian-moreno-calladito-me"}, "is_accepted": false, "score": 2, "last_activity_date": 1552527905, "last_edit_date": 1552527905, "creation_date": 1552517175, "answer_id": 55152270, "question_id": 55152201, "link": "https://stackoverflow.com/questions/55152201/rasberry-pi-capture-resize-results-in-rounded-up-dimensions-how-do-i-slice-the/55152270#55152270", "title": "rasberry pi capture resize results in rounded up dimensions - how do i slice the result using numpy?", "body": "<p>Maybe this can help you</p>\n\n<pre><code>import numpy as np\n# This is your iamge, for example.\nexample_image = np.array([1,1,1,2,2,2,3,3,3])  \nprint(example_image)\n# this is gonna be the same image but in other shape\nexample_image = np.reshape(example_image,(3,3)) \nprint(example_image)\n</code></pre>\n\n<blockquote>\n  <p>This code do this:</p>\n</blockquote>\n\n<pre><code># first print\n[1 1 1 2 2 2 3 3 3]\n# second print\n[[1 1 1]\n [2 2 2]\n [3 3 3]]\n</code></pre>\n\n<p>ok lets try whit some non squared matrix like this:</p>\n\n<pre><code>import numpy as np\n# This is your iamge, for example.\nexample_image = np.array([1,1,1,1,2,2,2,2,3,3,3,3])  \nprint(example_image)\n# this is gonna be the same image but in other shape\n# 3 Row, 4 Columns\nexample_image = np.reshape(example_image,(3,4)) \nprint(example_image,\"\\n\")\n# or maybe this...\nexample_image = np.array([1,1,1,1,2,2,2,2,3,3,3,3])  \n# 3 layers, 2 Row, 2 Columns\nexample_image = np.reshape(example_image,(3,2,2))   \nprint(example_image[0], \"\\n\\n\" ,example_image[1], \"\\n\\n\" ,example_image[2])\n</code></pre>\n\n<blockquote>\n  <p>Results:</p>\n</blockquote>\n\n<pre><code>#original\n[1 1 1 1 2 2 2 2 3 3 3 3]\n\n#First reshape\n[[1 1 1 1]\n [2 2 2 2]\n [3 3 3 3]] \n\n# Second Reshape\n[[1 1]\n [1 1]] \n\n [[2 2]\n [2 2]] \n\n [[3 3]\n [3 3]]\n</code></pre>\n"}], "owner": {"reputation": 6194, "user_id": 773210, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/b2cf058543966b93b0b15acb631eb527?s=128&d=identicon&r=PG", "display_name": "Oved D", "link": "https://stackoverflow.com/users/773210/oved-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 538, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1552527905, "creation_date": 1552516645, "question_id": 55152201, "link": "https://stackoverflow.com/questions/55152201/rasberry-pi-capture-resize-results-in-rounded-up-dimensions-how-do-i-slice-the", "title": "rasberry pi capture resize results in rounded up dimensions - how do i slice the result using numpy?", "body": "<p>I'm trying to do a video capture in rasberry pi, requesting a specific width and height of 300x300.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>  # Open image.\n  with picamera.PiCamera() as camera:\n    camera.resolution = (640, 480)\n    camera.framerate = 30\n\n    camera.start_preview()\n\n    try:\n      stream = io.BytesIO()\n      for foo in camera.capture_continuous(stream,\n              format='rgb',\n              use_video_port=True,\n              resize=(300, 300)):\n        stream.truncate()\n        stream.seek(0)\n        input = np.frombuffer(stream.getvalue(), dtype=np.uint8)\n</code></pre>\n\n<p>However, when this code is run I get a warning message:</p>\n\n<blockquote>\n  <p>/usr/lib/python3/dist-packages/picamera/encoders.py:544:\n  PiCameraResolutionRounded: frame size rounded up from 300x300 to\n  320x304   width, height, fwidth, fheight)))</p>\n</blockquote>\n\n<p>The resulting tensor is in 1d, and I need it as a 1d for the remainder of the code.</p>\n\n<p>How can I resize this 1d tensor to 3d, slice it to 300x300 then flatten it back to 1d?</p>\n"}, {"tags": ["python", "function", "parameters"], "comments": [{"owner": {"reputation": 1057, "user_id": 8206522, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u8mRt.jpg?s=128&g=1", "display_name": "Kacper Floria\u0144ski", "link": "https://stackoverflow.com/users/8206522/kacper-floria%c5%84ski"}, "edited": false, "score": 1, "creation_date": 1552517185, "post_id": 55152194, "comment_id": 97044999, "body": "Can you reduce your problem to be <i>minimal</i>? And generally there&#39;s nothing against moving your code into a single module (or a function)."}, {"owner": {"reputation": 87, "user_id": 5552675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b8ce2de4a0fa43bc368a981a9c0b4d0?s=128&d=identicon&r=PG&f=1", "display_name": "compscistudent", "link": "https://stackoverflow.com/users/5552675/compscistudent"}, "reply_to_user": {"reputation": 1057, "user_id": 8206522, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u8mRt.jpg?s=128&g=1", "display_name": "Kacper Floria\u0144ski", "link": "https://stackoverflow.com/users/8206522/kacper-floria%c5%84ski"}, "edited": false, "score": 0, "creation_date": 1552517357, "post_id": 55152194, "comment_id": 97045046, "body": "Sorry, I don&#39;t understand your question - could you please explain what you mean?"}, {"owner": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "edited": false, "score": 2, "creation_date": 1552517597, "post_id": 55152194, "comment_id": 97045113, "body": "see <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> &quot;\u2026Minimal \u2013 Use as little code as possible that still produces the same problem&quot;"}, {"owner": {"reputation": 87, "user_id": 5552675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b8ce2de4a0fa43bc368a981a9c0b4d0?s=128&d=identicon&r=PG&f=1", "display_name": "compscistudent", "link": "https://stackoverflow.com/users/5552675/compscistudent"}, "edited": false, "score": 0, "creation_date": 1552517957, "post_id": 55152194, "comment_id": 97045210, "body": "I believe I have changed the code in accordance with the Minimal example, apologies for that - I&#39;ve only just started to learn how to program using python so I&#39;m still not sure how to implement functions"}], "answers": [{"tags": [], "owner": {"reputation": 236, "user_id": 11185651, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-7NppXrFBuDA/AAAAAAAAAAI/AAAAAAAAACo/Xx7FCjJ3f0Q/photo.jpg?sz=128", "display_name": "scratchpad", "link": "https://stackoverflow.com/users/11185651/scratchpad"}, "is_accepted": true, "score": 0, "last_activity_date": 1552517898, "creation_date": 1552517898, "answer_id": 55152403, "question_id": 55152194, "link": "https://stackoverflow.com/questions/55152194/calling-one-def-inside-another-python/55152403#55152403", "title": "Calling one def inside another Python", "body": "<p>I might set it up like this:</p>\n\n<p>One class that does the perceptron learning and plotting that you initiate with the epoch, learning_rate, target_accuracy, and data. Then the individual modules can define their specific values and instantiate an instance of the class.</p>\n\n<p>Here's a fairly basic wrapping of your implementation. I return the (weights, accuracy, accuracy_progression) tuple so you can process it further in your individual modules if desired. You can of course, refactor further:</p>\n\n<pre><code>import matplotlib.pyplot as plt\nimport matplotlib.patches as mpatches\nimport Perceptron as nn\n\n\nclass PPlotter:\n    def __init__(self, epochs, learning_rate, target_accuracy, data):\n        self.epochs = epochs\n        self.learning_rate = learning_rate\n        self.target_accuracy = target_accuracy\n        self.data = data\n\n    def plot_accuracy_progression(self):\n        (weights, accuracy, accuracy_progression) = nn.perceptronLearning(self.data, self.epochs, self.learning_rate, self.target_accuracy)\n\n        (tp,tn,fp,fn) = p.confusionMatrix(weigths,self.data)\n\n        print('weights: ', weights)\n        print('accuracy: ', accuracy)\n\n        print('true positive: %d    true negative: %d',(tp,tn))\n        print('false positive: %d   false negative: %d',(fp,fn))\n\n        title = \"%d_iterations_lambda=%f\" %    (len(accuracy_progression),learning_rate)\n        path = \"./Plots/%s.png\" %(title)\n        plt.title(title)\n        plt.ylabel('accuracy (%)')\n        plt.xlabel('iteration')\n        plt.plot(accuracy_progression)\n        plt.show()\n\n        return (weights, accuracy, accuracy_progression)\n</code></pre>\n\n<p>Then here's an example of how train_Lion.py might look:</p>\n\n<pre><code>import numpy as np\nimport PPlotter\n\ndef Lion (cat):\n    if cat == b'Cat-lion':\n        return 1\n    else:\n        return 0\n\nfilename = 'cat.data'\ndata = np.loadtxt(filename,delimiter=',',converters={4:lion})\nnp.random.shuffle(data)\n\nepochs = 30\nlearning_rate = 0.1\ntarget_accuracy = 100\n\nplotter = PPlotter(epochs, learning_rate, target_accuracy, data)\n\n(weights, accuracy, accuracy_progression) = plotter.plot_accuracy_progression()\n</code></pre>\n"}], "owner": {"reputation": 87, "user_id": 5552675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b8ce2de4a0fa43bc368a981a9c0b4d0?s=128&d=identicon&r=PG&f=1", "display_name": "compscistudent", "link": "https://stackoverflow.com/users/5552675/compscistudent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 176, "favorite_count": 0, "accepted_answer_id": 55152403, "answer_count": 1, "score": 0, "last_activity_date": 1552517898, "creation_date": 1552516600, "last_edit_date": 1552517845, "question_id": 55152194, "link": "https://stackoverflow.com/questions/55152194/calling-one-def-inside-another-python", "title": "Calling one def inside another Python", "body": "<p>I am attempting to train a perceptron in Python which has 3 different classes of cats: Tigers, Lions, and Cheetahs. In order to do so, I wish to create a plot of the accuracy progression of the perceptron. Initially, I created 3 python files with the purpose of each file being to train the perceptron for each class. The code below is common to each file - is there a way in python that I could combine the three files and implement the code below as a def?</p>\n\n<p>Common code:</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\nimport matplotlib.patches as mpatches\nimport Perceptron as nn\n\ndef commonCode(!WHAT PARAMETERS SHOULD GO HERE?!):\n</code></pre>\n\n<p>Ideally, I wish to call the functions Lion and Tiger (see below) here, however I'm not sure what parameters I need to call, nor how to implement this.</p>\n\n<pre><code>(weigths, accuracy, accuracy_progression) = nn.perceptronLearning(data,epochs,learning_rate, target_accuracy)\n\n(tp,tn,fp,fn) = p.confusionMatrix(weigths,data)\n\nprint('weigths: ', weigths)\nprint('accuracy: ', accuracy)\n\nprint('true positive: %d    true negative: %d',(tp,tn))\nprint('false positive: %d   false negative: %d',(fp,fn))\n\ntitle = \"%d_iterations_lambda=%f\" %(len(accuracy_progression),learning_rate)\npath = \"./Plots/%s.png\" %(title)\n\nplt.title(title)\nplt.ylabel('accuracy (%)')\nplt.xlabel('iteration')\nplt.plot(accuracy_progression)\nplt.show()\n</code></pre>\n\n<p>train_Lion.py file:</p>\n\n<pre><code>def Lion (cat): \n    if cat == b'Cat-lion':\n        return 1\n    else:\n        return 0\n\nfilename = 'cat.data'\ndata = np.loadtxt(filename,delimiter=',',converters={4:lion})\nnp.random.shuffle(data)\n\nepochs = 30\nlearning_rate = 0.1\ntarget_accuracy = 100\n</code></pre>\n\n<p>train_Tiger.py file:</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\nimport matplotlib.patches as mpatches\nimport Perceptron as nn\ndef Tiger (cat): \n    if cat == b'Cat-tiger':\n        return 1\n    else:\n        return 0\n\nfilename = 'cat.data'\ndata = np.loadtxt(filename,delimiter=',',converters={4:tiger})\nnp.random.shuffle(data)\n\nepochs = 30\nlearning_rate = 0.2\ntarget_accuracy = 95\n</code></pre>\n\n<p>etc. The learning rate and the target accuracy vary between the classes, therefore I am not sure whether these have to be passed as parameters? Any advice would be greatly appreciated!</p>\n"}, {"tags": ["python", "class"], "comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1552516914, "post_id": 55152192, "comment_id": 97044911, "body": "<code>self.b</code> <i>would</i> change if the deque originally pointed to by <code>self.a</code> (now referenced by <code>self.c</code>) changed. You should probably read <a href=\"https://nedbatchelder.com/text/names.html\" rel=\"nofollow noreferrer\">nedbatchelder.com/text/names.html</a> to understand what all these assignments actually mean."}, {"owner": {"reputation": 535, "user_id": 3862109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27127dd6d7b0b3d971f7637f002bb52e?s=128&d=identicon&r=PG&f=1", "display_name": "AAA", "link": "https://stackoverflow.com/users/3862109/aaa"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1552574058, "post_id": 55152192, "comment_id": 97069546, "body": "thank you for your answer. i just found another website which could visualize python codes. I find it extremely helpful to understand this type of question like mine."}, {"owner": {"reputation": 535, "user_id": 3862109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27127dd6d7b0b3d971f7637f002bb52e?s=128&d=identicon&r=PG&f=1", "display_name": "AAA", "link": "https://stackoverflow.com/users/3862109/aaa"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1552587812, "post_id": 55152192, "comment_id": 97078464, "body": "forgot to add the link. The website mentioned above is <a href=\"http://pythontutor.com/visualize.html\" rel=\"nofollow noreferrer\">pythontutor.com/visualize.html</a>"}], "answers": [{"comments": [{"owner": {"reputation": 535, "user_id": 3862109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27127dd6d7b0b3d971f7637f002bb52e?s=128&d=identicon&r=PG&f=1", "display_name": "AAA", "link": "https://stackoverflow.com/users/3862109/aaa"}, "edited": false, "score": 0, "creation_date": 1552523574, "post_id": 55152414, "comment_id": 97046665, "body": "thank you for your explanation. I think i get what you say, but still want to confirm with you about one thing. After the first assignment in <code>testFunc2</code>, both <code>self.a</code> and <code>self.b</code> refers to <code>d2</code>. <code>self.a.append(10)</code> will add 10 to <code>d2</code>, but it will return <code>None</code>. Hence,  the second assignment <code>self.a = self.a.append(10)</code> will make <code>self.a</code> point to a different object (which is <code>None</code>). At the same time, <code>self.b</code> still points to <code>d2</code> (which is just added by <code>10</code>). Is my understanding correct? Thanks again!"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "reply_to_user": {"reputation": 535, "user_id": 3862109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27127dd6d7b0b3d971f7637f002bb52e?s=128&d=identicon&r=PG&f=1", "display_name": "AAA", "link": "https://stackoverflow.com/users/3862109/aaa"}, "edited": false, "score": 0, "creation_date": 1552528784, "post_id": 55152414, "comment_id": 97047906, "body": "That\u2019s it exactly."}, {"owner": {"reputation": 535, "user_id": 3862109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27127dd6d7b0b3d971f7637f002bb52e?s=128&d=identicon&r=PG&f=1", "display_name": "AAA", "link": "https://stackoverflow.com/users/3862109/aaa"}, "edited": false, "score": 0, "creation_date": 1552570991, "post_id": 55152414, "comment_id": 97067201, "body": "Great! Thank you!"}], "tags": [], "owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": true, "score": 0, "last_activity_date": 1552517942, "creation_date": 1552517942, "answer_id": 55152414, "question_id": 55152192, "link": "https://stackoverflow.com/questions/55152192/deque-as-an-attribute-in-class-in-python/55152414#55152414", "title": "deque as an attribute in class in python", "body": "<p>The key is to know which <code>deque</code> each attribute refers to after each assignment.</p>\n\n<p>After <code>__init__</code> runs, you have two deques; let's say that <code>self.a</code> refers to <code>d1</code> and <code>self.c</code> refers to <code>d2</code>. Then <code>d1</code> contains the number 1 and <code>d2</code> contains the number 2.</p>\n\n<p>When <code>testFunc1</code> is called, <code>self.b</code> is made to refer to <code>d1</code>. Then <code>self.a</code> is changed to refer to <code>d2</code>, and then <code>self.c</code> is made to refer to <code>d1</code>. The last line removes the value from <code>d1</code> and prints it, outputting 1.</p>\n\n<p>When <code>testFunc2</code> runs, <code>self.a</code> still refers to <code>d2</code> and <code>self.b</code> and <code>self.c</code> both refer to <code>d1</code>. The first assignment makes <code>self.b</code> refer to <code>d2</code>. The next assignment adds 10 to <code>d2</code>, but then makes <code>self.a</code> refer to <code>None</code>, as that is what <code>deque.append</code> returns (<em>not</em> the updated <code>deque</code> itself). <code>self.b.pop()</code> immediately removes the 10 we just added to <code>d2</code>, and that value is printed.</p>\n"}, {"tags": [], "owner": {"reputation": 199, "user_id": 4942590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44173ee096dfcde1bc78ea32b32ac149?s=128&d=identicon&r=PG&f=1", "display_name": "JShen", "link": "https://stackoverflow.com/users/4942590/jshen"}, "is_accepted": false, "score": 0, "last_activity_date": 1552518969, "creation_date": 1552518969, "answer_id": 55152571, "question_id": 55152192, "link": "https://stackoverflow.com/questions/55152192/deque-as-an-attribute-in-class-in-python/55152571#55152571", "title": "deque as an attribute in class in python", "body": "<p>The problem is <code>self.b = self.a</code>.  By using = operator you think that this creates a new object; actually it doesn\u2019t. It only creates a new variable that shares the reference of the original object. When you change <code>self.a</code> by appending another element, <code>self.b</code> changes as well, because they point to the same thing. Use copy() or deepcopy() depending on what you need. For this example, I think copy() is enough.</p>\n\n<p>change <code>self.b = self.a</code> to <code>self.b = copy.copy(self.a)</code>, you will get what you expect. Please don't forget to <code>import copy</code>.</p>\n\n<p>Read <a href=\"https://www.geeksforgeeks.org/copy-python-deep-copy-shallow-copy/\" rel=\"nofollow noreferrer\">copy in Python</a> for details.</p>\n"}], "owner": {"reputation": 535, "user_id": 3862109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27127dd6d7b0b3d971f7637f002bb52e?s=128&d=identicon&r=PG&f=1", "display_name": "AAA", "link": "https://stackoverflow.com/users/3862109/aaa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "accepted_answer_id": 55152414, "answer_count": 2, "score": 0, "last_activity_date": 1552518969, "creation_date": 1552516594, "question_id": 55152192, "link": "https://stackoverflow.com/questions/55152192/deque-as-an-attribute-in-class-in-python", "title": "deque as an attribute in class in python", "body": "<pre><code>from collections import deque\nclass testClass:\n  def __init__(self):\n    self.a = deque()\n    self.c = deque()\n    self.a.append(1)\n    self.c.append(2)\n\n  def testFunc1(self):\n    self.b = self.a\n    self.a = self.c\n    self.c = self.b\n    print(self.b.pop())\n\n  def testFunc2(self):\n    self.b = self.a\n    self.a = self.a.append(10)\n    print(self.b.pop())\n\nTestInstance = testClass()\nTestInstance.testFunc1() #answer will be 1\nTestInstance.testFunc2() #answer will be 10\n</code></pre>\n\n<p>I just dont understand why the two answers are different. Both functions first assign <code>self.a</code> to <code>self.b</code>. From the results, we can see that if we look at <code>testFunc2</code>, <code>self.b</code> <strong>will change</strong> if <code>self.a</code> changes. However, if we look at <code>testFunc1</code>, <code>self.b</code> <strong>will not change</strong> if <code>self.a</code> changes. Why this happened? Could anyone explain to me?</p>\n"}, {"tags": ["python", "node.js", "express", "raspberry-pi", "gpio"], "comments": [{"owner": {"reputation": 2069, "user_id": 629506, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/c9GtL.jpg?s=128&g=1", "display_name": "sigmus", "link": "https://stackoverflow.com/users/629506/sigmus"}, "edited": false, "score": 1, "creation_date": 1552516445, "post_id": 55152156, "comment_id": 97044781, "body": "Can you provide more details when you try to run? Are you getting any errors at all?"}, {"owner": {"reputation": 21, "user_id": 9727771, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "pablo escriva", "link": "https://stackoverflow.com/users/9727771/pablo-escriva"}, "reply_to_user": {"reputation": 2069, "user_id": 629506, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/c9GtL.jpg?s=128&g=1", "display_name": "sigmus", "link": "https://stackoverflow.com/users/629506/sigmus"}, "edited": false, "score": 0, "creation_date": 1552518147, "post_id": 55152156, "comment_id": 97045272, "body": "There&#39;s 3 python scripts in my public/python directory, one per each LED connected to the RPi. The scripts work if I run them manually, however if I try to run them with the above code it won&#39;t show anything and just return a 304 responde, LED not lighting up"}, {"owner": {"reputation": 2069, "user_id": 629506, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/c9GtL.jpg?s=128&g=1", "display_name": "sigmus", "link": "https://stackoverflow.com/users/629506/sigmus"}, "edited": false, "score": 0, "creation_date": 1552554762, "post_id": 55152156, "comment_id": 97056505, "body": "Try first running a very simple python script (hello world) from the expressjs app and see if that works."}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 9727771, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "pablo escriva", "link": "https://stackoverflow.com/users/9727771/pablo-escriva"}, "is_accepted": true, "score": 0, "last_activity_date": 1552769539, "creation_date": 1552769539, "answer_id": 55201380, "question_id": 55152156, "link": "https://stackoverflow.com/questions/55152156/im-not-able-to-execute-python-script-from-an-express-app/55201380#55201380", "title": "I&#39;m not able to execute python script from an express app", "body": "<p>I managed to fix it by using <code>exec</code> instead of <code>spawn</code>. This is my router file now:</p>\n\n<pre><code>var express = require('express')\nvar router = express.Router()\n\nvar exec = require('child_process').exec\n\n/* GET home page. */\nrouter.get('/', function(req, res, next) {\n    res.render('index')\n})\n\nrouter.get('/green', green)\nrouter.get('/yellow', yellow)\nrouter.get('/red', red)\nrouter.get('/auto', auto)\n\nmodule.exports = router\n\nfunction green(req, res) {\n    console.log('Turning on green led...')\n    var child = exec('python ./public/python/green_led.py')\n    child.stdout.on('data', function(data) {\n        console.log('stdout: ' + data)\n    })\n    child.stderr.on('data', function(data) {\n        console.log('stdout: ' + data)\n    })\n    child.on('close', function(code) {\n        console.log('closing code: ' + code)\n    })\n    res.redirect('/')\n}\n\nfunction yellow(req, res) {\n    console.log('Turning on yellow led...')\n    var child = exec('python ./public/python/yellow_led.py')\n    child.stdout.on('data', function(data) {\n        console.log('stdout: ' + data)\n    })\n    child.stderr.on('data', function(data) {\n        console.log('stdout: ' + data)\n    })\n    child.on('close', function(code) {\n        console.log('closing code: ' + code)\n    })\n    res.redirect('/')\n}\n\nfunction red(req, res) {\n    console.log('Turning on red led...')\n    var child = exec('python ./public/python/red_led.py')\n    child.stdout.on('data', function(data) {\n        console.log('stdout: ' + data)\n    })\n    child.stderr.on('data', function(data) {\n        console.log('stdout: ' + data)\n    })\n    child.on('close', function(code) {\n        console.log('closing code: ' + code)\n    })\n    res.redirect('/')\n}\n\nfunction auto(req, res) {\n    console.log('Turning on auto led...')\n    var child = exec('python ./public/python/loop_led.py')\n    child.stdout.on('data', function(data) {\n        console.log('stdout: ' + data)\n    })\n    child.stderr.on('data', function(data) {\n        console.log('stdout: ' + data)\n    })\n    child.on('close', function(code) {\n        console.log('closing code: ' + code)\n    })\n    res.redirect('/')\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 9727771, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "pablo escriva", "link": "https://stackoverflow.com/users/9727771/pablo-escriva"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 223, "favorite_count": 1, "accepted_answer_id": 55201380, "answer_count": 1, "score": 2, "last_activity_date": 1552769539, "creation_date": 1552516345, "question_id": 55152156, "link": "https://stackoverflow.com/questions/55152156/im-not-able-to-execute-python-script-from-an-express-app", "title": "I&#39;m not able to execute python script from an express app", "body": "<p>I'm trying to execute a python script when I click on a button from an express app. The script is just turning on an LED in my Raspberry Pi.\nI have tested the scripts and they work, however when I try to execute them from the server it doesn't work at all.\nI am using \"spawn\" to create a child process and then write through stdin to execfile the script.</p>\n\n<p>This is my router file:</p>\n\n<pre><code>var express = require('express')\nvar router = express.Router()\n\nvar python = require('child_process').spawn('python', [ '-i' ])\n//python.setEncoding('utf-8')\npython.stdout.pipe(process.stdout)\n\n/* GET home page. */\nrouter.get('/', function(req, res, next) {\n    res.render('index')\n})\n\nrouter.get('/green', green)\nrouter.get('/yellow', yellow)\nrouter.get('/red', red)\n\nmodule.exports = router\n\nfunction green(req, res) {\n    console.log('Turning on green led...')\n    python.stdin.write(\"execfile('./public/python/green_led.py')\")\n    res.redirect('/')\n}\n\nfunction yellow(req, res) {\n    console.log('Turning on yellow led...')\n    python.stdin.write(\"execfile('./public/python/yellow_led.py')\")\n    res.redirect('/')\n}\n\nfunction red(req, res) {\n    console.log('Turning on red led...')\n    python.stdin.write(\"execfile('./public/python/red_led.py')\")\n    res.redirect('/')\n}\n</code></pre>\n\n<p>You can check out the Github repo <a href=\"https://github.com/pabloegpf1/GPIO-Express/blob/master/routes/index.js\" rel=\"nofollow noreferrer\">Here</a></p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "pyqt", "pyqt5"], "answers": [{"tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 3, "last_activity_date": 1552517182, "creation_date": 1552517182, "answer_id": 55152271, "question_id": 55152144, "link": "https://stackoverflow.com/questions/55152144/pyqt5-how-to-make-image-toggle-button-with-qabstractbutton/55152271#55152271", "title": "PyQt5, how to make image toggle button with QAbstractButton", "body": "<p>QAbstractButton has a <a href=\"https://doc.qt.io/qt-5/qabstractbutton.html#checkable-prop\" rel=\"nofollow noreferrer\">checkable</a> property that allows you to implement the logic you want:</p>\n\n<pre><code>class PicButton(QAbstractButton):\n    def __init__(self, pixmap, pixmap_hover, pixmap_pressed, parent=None):\n        super(PicButton, self).__init__(parent)\n        self.pixmap = pixmap\n        self.pixmap_hover = pixmap_hover\n        self.pixmap_pressed = pixmap_pressed\n        self.setCheckable(True)\n\n    def paintEvent(self, event):\n        pix = self.pixmap_hover if self.underMouse() else self.pixmap\n        if self.isChecked():\n            pix = self.pixmap_pressed\n        painter = QPainter(self)\n        painter.drawPixmap(event.rect(), pix)\n\n    def enterEvent(self, event):\n        self.update()\n\n    def leaveEvent(self, event):\n        self.update()\n\n    def sizeHint(self):\n        return self.pixmap.size()\n</code></pre>\n"}], "owner": {"reputation": 2159, "user_id": 4930109, "user_type": "registered", "accept_rate": 63, "profile_image": "https://graph.facebook.com/10153361027378708/picture?type=large", "display_name": "J_yang", "link": "https://stackoverflow.com/users/4930109/j-yang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 206, "favorite_count": 0, "accepted_answer_id": 55152271, "answer_count": 1, "score": 1, "last_activity_date": 1552517182, "creation_date": 1552516286, "question_id": 55152144, "link": "https://stackoverflow.com/questions/55152144/pyqt5-how-to-make-image-toggle-button-with-qabstractbutton", "title": "PyQt5, how to make image toggle button with QAbstractButton", "body": "<p>I have a PicButton class based on QAbtractButton that has the normal, hover and pressed. However, when clicked the button only changed to the pixmap_pressed briefly and then switch back to standard. </p>\n\n<p>How can I make it behaves like a toggle button so that the pressed pixmap will stay after pressed?</p>\n\n<pre><code>import numpy as np\nimport time, sys\nfrom PyQt5.QtGui import *\nfrom PyQt5.QtWidgets import *\nfrom PyQt5.QtCore import *\nfrom PyQt5.QtWidgets import QMainWindow\n\nclass PicButton(QAbstractButton):\n    def __init__(self, pixmap, pixmap_hover, pixmap_pressed, parent=None):\n        super(PicButton, self).__init__(parent)\n        self.pixmap = pixmap\n        self.pixmap_hover = pixmap_hover\n        self.pixmap_pressed = pixmap_pressed\n\n        self.pressed.connect(self.update)\n        # self.released.connect(self.update)\n\n    def paintEvent(self, event):\n        pix = self.pixmap_hover if self.underMouse() else self.pixmap\n        if self.isDown():\n            pix = self.pixmap_pressed\n        painter = QPainter(self)\n        painter.drawPixmap(event.rect(), pix)\n\n    def enterEvent(self, event):\n        self.update()\n\n    def leaveEvent(self, event):\n        self.update()\n\n    def sizeHint(self):\n        return self.pixmap.size()\n\nclass App(QMainWindow):\n    def __init__(self):\n        super().__init__()\n        self.left = 0\n        self.top = 0\n        self.width = 800\n        self.height = 800\n        self.initUI()\n\n    def initUI(self):\n        self.setGeometry(self.left, self.top, self.width, self.height)\n        self.recBtn = PicButton(QPixmap('./img/playrecstop/rec_512.png'),QPixmap('./img/playrecstop/recHL_512.png'),\\\n            QPixmap('./img/playrecstop/recActive_512.png'))\n        self.recBtn.setText(\"rec\")\n        self.recBtn.clicked.connect(self.controlButtons)\n\n        self.stopBtn = PicButton(QPixmap('./img/playrecstop/stop_512.png'), QPixmap('./img/playrecstop/stopHL_512.png'),\\\n            QPixmap('./img/playrecstop/stopActive_512.png'))\n        self.stopBtn.setText(\"stop\")\n        self.stopBtn.clicked.connect(self.controlButtons)\n\n        self.leftLayout = QHBoxLayout()\n        self.rightLayout = QHBoxLayout()\n\n        self.rightLayout.addWidget(self.recBtn)\n        self.rightLayout.addWidget(self.stopBtn)\n\n        self.mainLayout = QHBoxLayout()\n        self.mainLayout.addLayout(self.leftLayout)\n        self.mainLayout.addLayout(self.rightLayout)\n\n        self.setCentralWidget(QWidget(self))\n        self.centralWidget().setLayout(self.mainLayout)\n        self.show()\n\n\n    def controlButtons(self):\n        sender = self.sender()\n        if (sender.text() == 'stop'):\n            print (\"Stop\")\n        elif (sender.text() == 'rec'):\n            print (\"REC...\")\n\n\nif __name__ == '__main__':\n    app = QApplication(sys.argv)\n    ex = App()\n    sys.exit(app.exec_()) \n</code></pre>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "r", "markov-models"], "comments": [{"owner": {"reputation": 919, "user_id": 3367799, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Vyx3C.jpg?s=128&g=1", "display_name": "JJJ", "link": "https://stackoverflow.com/users/3367799/jjj"}, "edited": false, "score": 0, "creation_date": 1552516344, "post_id": 55152121, "comment_id": 97044746, "body": "Please add your current code as an example."}], "answers": [{"tags": [], "owner": {"reputation": 43, "user_id": 11161918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5144b5b85d80fbffdf896a2319cf2a58?s=128&d=identicon&r=PG&f=1", "display_name": "GeorgiosStrat", "link": "https://stackoverflow.com/users/11161918/georgiosstrat"}, "is_accepted": false, "score": 1, "last_activity_date": 1573829016, "creation_date": 1573829016, "answer_id": 58879353, "question_id": 55152121, "link": "https://stackoverflow.com/questions/55152121/regime-switching-multivariate-garch/58879353#58879353", "title": "regime switching multivariate garch", "body": "<p>In Matlab, there is available the <a href=\"https://github.com/msperlin/MS_Regress-Matlab\" rel=\"nofollow noreferrer\">MS_Regress-Matlab</a>, which can be connected to the </p>\n\n<p>MFE toolbox of Sheppard for more functionalities.</p>\n\n<p>Let me know if this helps, or if you have found any other way.</p>\n"}, {"tags": [], "owner": {"reputation": 81, "user_id": 10671507, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16af896ea8aae05f7f6ad3fb1723ea94?s=128&d=identicon&r=PG&f=1", "display_name": "Ameer", "link": "https://stackoverflow.com/users/10671507/ameer"}, "is_accepted": false, "score": 1, "last_activity_date": 1588989381, "creation_date": 1588989381, "answer_id": 61690834, "question_id": 55152121, "link": "https://stackoverflow.com/questions/55152121/regime-switching-multivariate-garch/61690834#61690834", "title": "regime switching multivariate garch", "body": "<p>There is a MATLAB code developed recently to handle the multivariate MS GARCH model, check this <a href=\"https://codeocean.com/capsule/9016375/tree/v1\" rel=\"nofollow noreferrer\">link</a></p>\n"}], "owner": {"reputation": 1, "user_id": 11198601, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3Uvdu2tbU5M/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaO9qO2GYzRBipQlV-0zW6VHzMNdXQ/mo/photo.jpg?sz=128", "display_name": "pulsar", "link": "https://stackoverflow.com/users/11198601/pulsar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 307, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1588989381, "creation_date": 1552516177, "question_id": 55152121, "link": "https://stackoverflow.com/questions/55152121/regime-switching-multivariate-garch", "title": "regime switching multivariate garch", "body": "<p>I have a regression with 4 independent variables and a dependent variable. I want to implement a Regime switching GARCH model but have been unable to find a package in R,Python or Matlab. MSGARCH package available in R is for uni-variate series series, apart from this I haven't come across any available packages. \nIs there any available package?</p>\n"}, {"tags": ["python", "importerror"], "owner": {"reputation": 21, "user_id": 11192726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a995b99083579bb270d1027eae8a76ad?s=128&d=identicon&r=PG&f=1", "display_name": "Bgong", "link": "https://stackoverflow.com/users/11192726/bgong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1579050191, "creation_date": 1552516102, "last_edit_date": 1579050191, "question_id": 55152110, "link": "https://stackoverflow.com/questions/55152110/importerror-no-module-named-citations", "title": "ImportError: No module named citations", "body": "<p>I use tethne package for my research of network analysis.\nBut, I hit the snag after getting error in it.</p>\n\n<p>This is my input script</p>\n\n<pre><code>import tethne \nimport tethne.readers as rd\nfrom tethne.readers import wos\npapers = rd.wos.read(\"/Users/Documents/AI_Edu/savedrecs/savedrecs (1).txt\")\npapers[0]\nimport tethne.networks as nt\nBC = nt.citations.bibliographic_coupling(papers)\nBC\n</code></pre>\n\n<p>and this is what i got </p>\n\n<p><code>Traceback (most recent call last): \n    File \"/Users/PycharmProjects/network2/network2.py\", line 7, in &lt;module&gt;<br>\n    import citations as citations\n    ImportError: No module named citations</code></p>\n\n<p>It seems like there is no module names \"citations\" but, I downloaded the full package and the procedure was exact copy I was guided by this package developers, though it was long time ago and no more updates on it.</p>\n\n<p>What is wrong with it?</p>\n"}, {"tags": ["python", "matplotlib", "plot", "random-forest"], "answers": [{"comments": [{"owner": {"reputation": 398, "user_id": 11014826, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--wscPXgIgss/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPf8vPoIQtmJJCSjoqNhjzja1AArg/mo/photo.jpg?sz=128", "display_name": "CFD", "link": "https://stackoverflow.com/users/11014826/cfd"}, "edited": false, "score": 0, "creation_date": 1552516608, "post_id": 55152157, "comment_id": 97044827, "body": "NameError: name &#39;feature_importances_&#39; is not defined"}, {"owner": {"reputation": 12519, "user_id": 423926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65539c07af4918433a89bcb298d75ca7?s=128&d=identicon&r=PG", "display_name": "mujjiga", "link": "https://stackoverflow.com/users/423926/mujjiga"}, "reply_to_user": {"reputation": 398, "user_id": 11014826, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--wscPXgIgss/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPf8vPoIQtmJJCSjoqNhjzja1AArg/mo/photo.jpg?sz=128", "display_name": "CFD", "link": "https://stackoverflow.com/users/11014826/cfd"}, "edited": false, "score": 0, "creation_date": 1552516910, "post_id": 55152157, "comment_id": 97044907, "body": "@CFD Normally  feature_importances_ is a member of tree/forest based classifiers. Check if it is member of sel in your case i.e sel.feature_importances_"}, {"owner": {"reputation": 398, "user_id": 11014826, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--wscPXgIgss/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPf8vPoIQtmJJCSjoqNhjzja1AArg/mo/photo.jpg?sz=128", "display_name": "CFD", "link": "https://stackoverflow.com/users/11014826/cfd"}, "edited": false, "score": 0, "creation_date": 1552517890, "post_id": 55152157, "comment_id": 97045194, "body": "It isn&#39;t. with sel.feature_importances_ is received this error: AttributeError: &#39;SelectFromModel&#39; object has no attribute &#39;feature_importances_"}, {"owner": {"reputation": 12519, "user_id": 423926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65539c07af4918433a89bcb298d75ca7?s=128&d=identicon&r=PG", "display_name": "mujjiga", "link": "https://stackoverflow.com/users/423926/mujjiga"}, "reply_to_user": {"reputation": 398, "user_id": 11014826, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--wscPXgIgss/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPf8vPoIQtmJJCSjoqNhjzja1AArg/mo/photo.jpg?sz=128", "display_name": "CFD", "link": "https://stackoverflow.com/users/11014826/cfd"}, "edited": false, "score": 0, "creation_date": 1552518548, "post_id": 55152157, "comment_id": 97045381, "body": "@CFD I have corrected it now, the website from where you based your code did very bad proof reading :( Dont forget to use plt.show() to render the histogram"}, {"owner": {"reputation": 398, "user_id": 11014826, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--wscPXgIgss/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPf8vPoIQtmJJCSjoqNhjzja1AArg/mo/photo.jpg?sz=128", "display_name": "CFD", "link": "https://stackoverflow.com/users/11014826/cfd"}, "edited": false, "score": 0, "creation_date": 1552518841, "post_id": 55152157, "comment_id": 97045461, "body": "Thanks it worked. But this plot doesn&#39;t show anything special!  (updated the question with a picture of plot)"}], "tags": [], "owner": {"reputation": 12519, "user_id": 423926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65539c07af4918433a89bcb298d75ca7?s=128&d=identicon&r=PG", "display_name": "mujjiga", "link": "https://stackoverflow.com/users/423926/mujjiga"}, "is_accepted": true, "score": 2, "last_activity_date": 1552520713, "last_edit_date": 1552520713, "creation_date": 1552516348, "answer_id": 55152157, "question_id": 55152081, "link": "https://stackoverflow.com/questions/55152081/distribution-plot-of-feature-importances/55152157#55152157", "title": "distribution plot of feature importances", "body": "<pre><code>pd.Series(sel.estimator_.feature_importances_.ravel()).hist()\n</code></pre>\n\n<p>It is \"Series\" not \"series\"</p>\n\n<p><a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.hist.html\" rel=\"nofollow noreferrer\">https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.hist.html</a></p>\n\n<h2>Plotting Feature importance</h2>\n\n<pre><code>importances = sel.estimator_.feature_importances_\nindices = np.argsort(importances)[::-1]\n# X is the train data used to fit the model \nplt.figure()\nplt.title(\"Feature importances\")\nplt.bar(range(X.shape[1]), importances[indices],\n       color=\"r\", align=\"center\")\nplt.xticks(range(X.shape[1]), indices)\nplt.xlim([-1, X.shape[1]])\nplt.show()\n</code></pre>\n\n<p>This should render a bar graph like below where x-axis is the feature indexes and y axis is the feature importance. The features are sorted in the order of importance.\n<a href=\"https://i.stack.imgur.com/Od0Ty.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Od0Ty.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 398, "user_id": 11014826, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--wscPXgIgss/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPf8vPoIQtmJJCSjoqNhjzja1AArg/mo/photo.jpg?sz=128", "display_name": "CFD", "link": "https://stackoverflow.com/users/11014826/cfd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1187, "favorite_count": 0, "accepted_answer_id": 55152157, "answer_count": 1, "score": 0, "last_activity_date": 1552520713, "creation_date": 1552515913, "last_edit_date": 1552518770, "question_id": 55152081, "link": "https://stackoverflow.com/questions/55152081/distribution-plot-of-feature-importances", "title": "distribution plot of feature importances", "body": "<p>I have done a feature selection in my data frame based on this:\n<a href=\"https://towardsdatascience.com/feature-selection-using-random-forest-26d7b747597f\" rel=\"nofollow noreferrer\">https://towardsdatascience.com/feature-selection-using-random-forest-26d7b747597f</a></p>\n\n<p>on part 7, for ploting distrubution of importance, provides this code:</p>\n\n<pre><code>pd.series(sel.estimator_,feature_importances_,.ravel()).hist()\n</code></pre>\n\n<p>which I think it should be like this to not have syntax error:</p>\n\n<pre><code>pd.series(sel.estimator_,feature_importances_.ravel()).hist()\n</code></pre>\n\n<p>and I received this error:</p>\n\n<p>AttributeError: module 'pandas' has no attribute 'series'</p>\n\n<p>and I think estimator_ and feature_importances_ are not defined too.\nIs there any way to debug this line of code?\n<a href=\"https://i.stack.imgur.com/a7Vn7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/a7Vn7.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "python-2.7", "dictionary", "for-loop", "iteration"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1552516105, "post_id": 55152074, "comment_id": 97044657, "body": "posible duplicate of <a href=\"https://stackoverflow.com/questions/2928686/how-to-print-unsorted-dictionary-in-python\">How to print unsorted dictionary in python?</a>"}, {"owner": {"reputation": 26832, "user_id": 799163, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/QGcz9.jpg?s=128&g=1", "display_name": "RemcoGerlich", "link": "https://stackoverflow.com/users/799163/remcogerlich"}, "edited": false, "score": 0, "creation_date": 1552516633, "post_id": 55152074, "comment_id": 97044836, "body": "If you&#39;re new to Python, please forget about Python 2 and start with 3. Python 3 came out in <i>2008</i> and 2&#39;s final end of support is january 1, 2020 -- less than ten months from now."}], "answers": [{"comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 4, "creation_date": 1552516116, "post_id": 55152098, "comment_id": 97044660, "body": "In Python 3.7 the order is guaranteed, and in 3.6 it&#39;s an implementation detail. The question is tagged 2.7 so this post is not incorrect in that context, but a lot of people seem to think this holds for <i>all</i> CPython dictionaries and that has now changed."}, {"owner": {"reputation": 780, "user_id": 4119906, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/q3PG3.jpg?s=128&g=1", "display_name": "Shay Nehmad", "link": "https://stackoverflow.com/users/4119906/shay-nehmad"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 1, "creation_date": 1552516339, "post_id": 55152098, "comment_id": 97044744, "body": "Thanks dude, updated my answer and learned something new. Awesome :)"}], "tags": [], "owner": {"reputation": 780, "user_id": 4119906, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/q3PG3.jpg?s=128&g=1", "display_name": "Shay Nehmad", "link": "https://stackoverflow.com/users/4119906/shay-nehmad"}, "is_accepted": true, "score": 2, "last_activity_date": 1552516306, "last_edit_date": 1552516306, "creation_date": 1552516033, "answer_id": 55152098, "question_id": 55152074, "link": "https://stackoverflow.com/questions/55152074/when-running-for-loop-on-dictionary-in-python2/55152098#55152098", "title": "when running for loop on dictionary in Python2", "body": "<p>In Python 2.7, Iterating over a dictionary does not guarantee the order the keys or values will be returned in.</p>\n\n<p>You can use <a href=\"https://docs.python.org/2/library/collections.html#collections.OrderedDict\" rel=\"nofollow noreferrer\">OrderedDict</a> if you need it.</p>\n\n<p>In Python 3.7 the order is apparently <a href=\"https://mail.python.org/pipermail/python-dev/2017-December/151283.html\" rel=\"nofollow noreferrer\">guaranteed</a> but to be honest I would use OrderedDict just to make sure it's explicitly stated for readability's sake, again if you need it.</p>\n"}, {"comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1552517775, "post_id": 55152310, "comment_id": 97045164, "body": "This is no different than what was suggested nearly half an hour ago, and makes a blanket claim that was already clarified in that answer"}], "tags": [], "owner": {"reputation": 316, "user_id": 11106166, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b8fe12765c8daf73b39e990241d9152?s=128&d=identicon&r=PG&f=1", "display_name": "data.dude", "link": "https://stackoverflow.com/users/11106166/data-dude"}, "is_accepted": false, "score": 0, "last_activity_date": 1552517422, "creation_date": 1552517422, "answer_id": 55152310, "question_id": 55152074, "link": "https://stackoverflow.com/questions/55152074/when-running-for-loop-on-dictionary-in-python2/55152310#55152310", "title": "when running for loop on dictionary in Python2", "body": "<p>A dictionary does not remember the order in which elements are inserted. This is why when you iterate over it, the order is arbitrary. OrderedDict, on the other hand, keeps track of said order. The syntax is identical to using a regular dictionary and you will need to import the <code>collections</code> module. In your case</p>\n\n<pre><code>from collections import OrderedDict\n\nprice = OrderedDict()\n\nprice['banana'] = 3\nprice['apple'] = 2\nprice['strawberry'] = 6\n\nfor i in price:\n   print(i)\n</code></pre>\n\n<p>should give you the desired result. </p>\n\n<p>Note that even though you can create a regular dictionary and pass it as a parameter to the <code>OrderedDict()</code> constructor, the order will not be guaranteed. </p>\n"}], "owner": {"reputation": 41, "user_id": 9778882, "user_type": "registered", "profile_image": "https://graph.facebook.com/10213962923920519/picture?type=large", "display_name": "jvsper", "link": "https://stackoverflow.com/users/9778882/jvsper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 159, "favorite_count": 0, "accepted_answer_id": 55152098, "answer_count": 2, "score": 0, "last_activity_date": 1552517422, "creation_date": 1552515878, "last_edit_date": 1552516005, "question_id": 55152074, "link": "https://stackoverflow.com/questions/55152074/when-running-for-loop-on-dictionary-in-python2", "title": "when running for loop on dictionary in Python2", "body": "<p>I am pretty new to python coming from C++ as my first language. \nLet say I have a dictionary as the following :</p>\n\n<pre><code> price = {\n 'banana' : 3,\n 'apple' : 2,\n 'strawberry' : 6\n }\n</code></pre>\n\n<p>and when I run for loop as the following :</p>\n\n<pre><code> for i in price:\n   print i\n</code></pre>\n\n<p>my output comes out to be in this order:</p>\n\n<pre><code> strawberry, banana, apple\n</code></pre>\n\n<p>I thought for loop iterates an array or list in order. Does this not apply for dictionary? I expected the outcome to be \"banana, apple, strawberry\" since banana is the first key and strawberry is the last key in my dictionary. </p>\n\n<p>What's going on in python2 that I do not understand?</p>\n"}, {"tags": ["python", "dictionary"], "comments": [{"owner": {"reputation": 11552, "user_id": 8112138, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f3b1ddf31abbf37d5fe71ad387e2772c?s=128&d=identicon&r=PG&f=1", "display_name": "Primusa", "link": "https://stackoverflow.com/users/8112138/primusa"}, "edited": false, "score": 0, "creation_date": 1552515662, "post_id": 55151991, "comment_id": 97044497, "body": "<code>x</code> remains the same <code>Potato()</code> object, you&#39;re modifying the <code>potahto</code> attribute of the same object each time. <code>mydict</code> stores a reference to ONE <code>Potato()</code> object and doesn&#39;t clone it when you use <code>x</code> multiple times."}, {"owner": {"reputation": 2956, "user_id": 2207924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d97be4271939adcd1eec201cd777f57?s=128&d=identicon&r=PG", "display_name": "JeffUK", "link": "https://stackoverflow.com/users/2207924/jeffuk"}, "edited": false, "score": 0, "creation_date": 1552515743, "post_id": 55151991, "comment_id": 97044525, "body": "potatoDictMasher(y,Potato()) would do what you expect. Also, why on God&#39;s Green Earth are you putting x and y in that order.  It is an abomination unto all things holy."}, {"owner": {"reputation": 1, "user_id": 11155972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26aa8ef0488fddbe069fb6248c77ce17?s=128&d=identicon&r=PG&f=1", "display_name": "Axel H", "link": "https://stackoverflow.com/users/11155972/axel-h"}, "edited": false, "score": 0, "creation_date": 1552516021, "post_id": 55151991, "comment_id": 97044622, "body": "Will you take brainfart as an answer? :) I think your solution is best suited to what I was looking for, Thanks!"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1552520334, "post_id": 55151991, "comment_id": 97045865, "body": "Yes, you can change the attributes of objects in a dictionary. Side note: You misspelled <code>__init__()</code> when defining the <code>Potato</code> class, so it&#39;s never got called when you create an instance. However, if you fix that, then a <code>NameError: name &#39;potahto&#39; is not defined</code> error occurs at runtime. You should define a parameter to function to hold the value and pass what you want it to be as an argument when you create instances."}], "owner": {"reputation": 1, "user_id": 11155972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26aa8ef0488fddbe069fb6248c77ce17?s=128&d=identicon&r=PG&f=1", "display_name": "Axel H", "link": "https://stackoverflow.com/users/11155972/axel-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1552515439, "creation_date": 1552515439, "question_id": 55151991, "link": "https://stackoverflow.com/questions/55151991/possibility-of-changing-attributes-of-objects-in-dictionary", "title": "Possibility of changing attributes of objects in Dictionary", "body": "<p>I think I found a part of my issue with the program I'm working on.\nLet's say I have this.</p>\n\n<pre><code>mydict = {}\n\ndef potatoDictMasher(name,value):\n    mydict[name] = value\n\n\nclass Potato(object):\n    def __init_(self):\n        self.potahto = potahto\n\n\n\nx = Potato()        \ny = \"Golden\"\npotatoDictMasher(y,x)\n\nmydict[\"Golden\"].potahto = \"tomato\"\nprint(mydict[\"Golden\"].potahto)\n</code></pre>\n\n<p>If let's say I go on like this and add another key with another object.</p>\n\n<pre><code>y = \"Red\"\npotatoDictMasher(y,x)\n</code></pre>\n\n<p>And want to call the dictionary to update the new key.</p>\n\n<pre><code>mydict[\"Red\"].potahto = \"eggplant\"\n</code></pre>\n\n<p>It seems that the first key's attribute changed as well.</p>\n\n<pre><code>print(mydict[\"Golden\"].potahto)\n</code></pre>\n\n<p>Will give \"eggplant\".</p>\n\n<p>My question is : is there a possible way of changing the attributes of an object specified at a certain key without changing the attributes of all the objects? Or is it just not possible at all and I should scrap that?</p>\n"}, {"tags": ["python", "pandas", "dataframe", "join"], "answers": [{"tags": [], "owner": {"reputation": 16731, "user_id": 10201580, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/awLHs.png?s=128&g=1", "display_name": "Chris A", "link": "https://stackoverflow.com/users/10201580/chris-a"}, "is_accepted": false, "score": 2, "last_activity_date": 1552515001, "creation_date": 1552515001, "answer_id": 55151928, "question_id": 55151875, "link": "https://stackoverflow.com/questions/55151875/how-to-join-string-values-of-list-in-columns-pandas-dataframe/55151928#55151928", "title": "how to join string values of list in columns pandas dataframe", "body": "<p>If your using pandas version 0.23.1 or higher, you can use:</p>\n\n<pre><code>df['val'] = df['val'].str.join(' ')\n</code></pre>\n\n<p>[out]</p>\n\n<pre><code>  id                val\n0  a        word1 word2\n1  b  word3 word4 word5\n2  c  word6 word6 word7\n</code></pre>\n"}], "owner": {"reputation": 139, "user_id": 10528434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/252213e3f229fe1f481f9ee88a828913?s=128&d=identicon&r=PG&f=1", "display_name": "Vladimir Sazonov", "link": "https://stackoverflow.com/users/10528434/vladimir-sazonov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1552515001, "creation_date": 1552514659, "question_id": 55151875, "link": "https://stackoverflow.com/questions/55151875/how-to-join-string-values-of-list-in-columns-pandas-dataframe", "title": "how to join string values of list in columns pandas dataframe", "body": "<p>I have a dataframe:</p>\n\n<pre><code>  id                val\n0  a  ['word1', 'word2']\n1  b  ['word3','word4','word5']\n2  c  ['word6', 'word6','word7']\n</code></pre>\n\n<p>How can I get such dataframe:</p>\n\n<pre><code>  id                val\n0  a  word1 word2\n1  b  word3 word4 word5\n2  c  word6 word6 word7\n</code></pre>\n\n<p>I tried do this with many ways of <code>str.join()</code>, but it doesn't work,\nand I'm out of ideas.</p>\n\n<p>Thanks for any suggestions.</p>\n"}, {"tags": ["python", "pandas", "dataframe", "dictionary"], "comments": [{"owner": {"reputation": 17765, "user_id": 9375102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8yBw3.jpg?s=128&g=1", "display_name": "Umar.H", "link": "https://stackoverflow.com/users/9375102/umar-h"}, "edited": false, "score": 0, "creation_date": 1552515733, "post_id": 55151867, "comment_id": 97044520, "body": "You could use a simple dictionary comprehension to parse this starting with a concat statement <code>pd.concat({k: pd.DataFrame(v).T for k, v in yourDict.items()}, axis=0)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": false, "score": 0, "last_activity_date": 1552515789, "creation_date": 1552515789, "answer_id": 55152058, "question_id": 55151867, "link": "https://stackoverflow.com/questions/55151867/create-a-tall-formatted-dataframe-from-nested-dictionaries/55152058#55152058", "title": "Create a Tall formatted Dataframe from nested dictionaries", "body": "<p>A rather simple way would be to convert the dictionnary to a list of lists and feed the dataframe with that:</p>\n\n<pre><code>data = [[x, y, z] for x,v in d.items() for y, z in v.items()]\ndf = pd.DataFrame(data, columns=['Column' + str(i) for i in range(1,4)])\n</code></pre>\n\n<p>It gives:</p>\n\n<pre><code>  Column1                 Column2  Column3\n0    Jill  Avenger: Age of Ultron      7.0\n1    Jill        Django Unchained      6.5\n2    Jill               Gone Girl      9.0\n3    Jill      Kill the Messenger      8.0\n4    Toby  Avenger: Age of Ultron      8.5\n5    Toby        Django Unchained      9.0\n6    Toby               Zoolander      2.0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5732, "user_id": 5496433, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/05803febf5f3ccac3dc093fba5fc30fb?s=128&d=identicon&r=PG&f=1", "display_name": "BallpointBen", "link": "https://stackoverflow.com/users/5496433/ballpointben"}, "is_accepted": false, "score": 0, "last_activity_date": 1552515808, "creation_date": 1552515808, "answer_id": 55152062, "question_id": 55151867, "link": "https://stackoverflow.com/questions/55151867/create-a-tall-formatted-dataframe-from-nested-dictionaries/55152062#55152062", "title": "Create a Tall formatted Dataframe from nested dictionaries", "body": "<pre><code>ratings = {'Jill': {'Avenger: Age of Ultron': 7.0,\n                    'Django Unchained': 6.5,\n                    'Gone Girl': 9.0,\n                    'Kill the Messenger': 8.0},\n           'Toby': {'Avenger: Age of Ultron': 8.5,\n                    'Django Unchained': 9.0,\n                    'Zoolander': 2.0}}\nvalues = [[name, movie, rating] for name, r in ratings.items() for movie, rating in r.items()] \ndf = pd.dataframe(values)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": false, "score": 0, "last_activity_date": 1552516016, "creation_date": 1552516016, "answer_id": 55152095, "question_id": 55151867, "link": "https://stackoverflow.com/questions/55151867/create-a-tall-formatted-dataframe-from-nested-dictionaries/55152095#55152095", "title": "Create a Tall formatted Dataframe from nested dictionaries", "body": "<p>Just pass to the <code>DataFrame</code> , all the rest we handle in <code>pandas</code></p>\n\n<pre><code>pd.DataFrame(ratings).reset_index().melt('index').dropna()\nOut[118]: \n                    index variable  value\n0  Avenger: Age of Ultron     Jill    7.0\n1        Django Unchained     Jill    6.5\n2               Gone Girl     Jill    9.0\n3      Kill the Messenger     Jill    8.0\n5  Avenger: Age of Ultron     Toby    8.5\n6        Django Unchained     Toby    9.0\n9               Zoolander     Toby    2.0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16731, "user_id": 10201580, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/awLHs.png?s=128&g=1", "display_name": "Chris A", "link": "https://stackoverflow.com/users/10201580/chris-a"}, "is_accepted": false, "score": 0, "last_activity_date": 1552516030, "creation_date": 1552516030, "answer_id": 55152097, "question_id": 55151867, "link": "https://stackoverflow.com/questions/55151867/create-a-tall-formatted-dataframe-from-nested-dictionaries/55152097#55152097", "title": "Create a Tall formatted Dataframe from nested dictionaries", "body": "<p>Another approach, using the <code>pandas.DataFrame</code> constructor on the <code>dict</code> as is, then <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.stack.html\" rel=\"nofollow noreferrer\">stacking</a>, <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.rename.html\" rel=\"nofollow noreferrer\">renaming</a> and sorting the <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.sort_index.html\" rel=\"nofollow noreferrer\">axis</a> and <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.sort_values.html\" rel=\"nofollow noreferrer\">columns</a>:</p>\n\n<pre><code>df = (pd.DataFrame(d)\n      .stack()\n      .reset_index()\n      .rename({'level_0': 'Column2', 'level_1': 'Column1', 0: 'Column3'}, axis=1)\n      .sort_index(1).sort_values('Column1'))\n\nprint(df)\n\n\n  Column1                 Column2  Column3\n0    Jill  Avenger: Age of Ultron      7.0\n2    Jill        Django Unchained      6.5\n4    Jill               Gone Girl      9.0\n5    Jill      Kill the Messenger      8.0\n1    Toby  Avenger: Age of Ultron      8.5\n3    Toby        Django Unchained      9.0\n6    Toby               Zoolander      2.0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 12519, "user_id": 423926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65539c07af4918433a89bcb298d75ca7?s=128&d=identicon&r=PG", "display_name": "mujjiga", "link": "https://stackoverflow.com/users/423926/mujjiga"}, "is_accepted": true, "score": 2, "last_activity_date": 1552516102, "creation_date": 1552516102, "answer_id": 55152109, "question_id": 55151867, "link": "https://stackoverflow.com/questions/55151867/create-a-tall-formatted-dataframe-from-nested-dictionaries/55152109#55152109", "title": "Create a Tall formatted Dataframe from nested dictionaries", "body": "<pre><code>d = {'Jill': {'Avenger: Age of Ultron': 7.0,\n                            'Django Unchained': 6.5,\n                            'Gone Girl': 9.0,\n                            'Kill the Messenger': 8.0},\n'Toby': {'Avenger: Age of Ultron': 8.5,\n                                'Django Unchained': 9.0,\n                                'Zoolander': 2.0}}\n\ndf = pd.DataFrame.from_dict(d).reset_index()\ndf = pd.melt(df, id_vars=[\"index\"], \n                  var_name=\"By\", value_name=\"Score\").dropna()\n</code></pre>\n"}], "owner": {"reputation": 419, "user_id": 10360845, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-S5socgsgDdw/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOUvNYK86DGflX2rZtBL3PL8z4WBw/mo/photo.jpg?sz=128", "display_name": "Vamsi Nimmala", "link": "https://stackoverflow.com/users/10360845/vamsi-nimmala"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "closed_date": 1552587710, "accepted_answer_id": 55152109, "answer_count": 5, "score": 3, "last_activity_date": 1552532894, "creation_date": 1552514622, "last_edit_date": 1552532894, "question_id": 55151867, "link": "https://stackoverflow.com/questions/55151867/create-a-tall-formatted-dataframe-from-nested-dictionaries", "closed_reason": "Duplicate", "title": "Create a Tall formatted Dataframe from nested dictionaries", "body": "<p>Hi I have a dictionary of dictionaries as shown (copied example). I would like to convert it into a tall <code>DataFrame</code>.</p>\n\n<p>Example dictionary:</p>\n\n<pre><code>{'Jill': {'Avenger: Age of Ultron': 7.0,\n         'Django Unchained': 6.5,\n         'Gone Girl': 9.0,\n         'Kill the Messenger': 8.0},\n 'Toby': {'Avenger: Age of Ultron': 8.5,\n          'Django Unchained': 9.0,\n          'Zoolander': 2.0}}\n</code></pre>\n\n<p>Expected tall dataframe look like below:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>   Column1        Column2              Column3\n    Jill     Avenger: Age of Ultron      7.0\n    Jill     Django Unchained            6.5\n    Jill     Gone Girl                   9.0\n    Jill     Kill the Messenger          8.0\n    Toby     Avenger: Age of Ultron      8.5\n    Toby     Django Unchained            9.0\n    Toby     Zoolander                   2.0\n</code></pre>\n\n<p>I tried the below, it gives me main keys of dictionaries as first column, but couldn't make it as tall dataframe:</p>\n\n<pre><code>pd.DataFrame.from_dict(d, orient='index')\n</code></pre>\n"}, {"tags": ["python", "numpy", "tensorflow"], "answers": [{"comments": [{"owner": {"reputation": 767, "user_id": 1212320, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b9195f72bf77345e1c920eefaa014d73?s=128&d=identicon&r=PG&f=1", "display_name": "MasterWizard", "link": "https://stackoverflow.com/users/1212320/masterwizard"}, "edited": false, "score": 0, "creation_date": 1552555871, "post_id": 55152302, "comment_id": 97057195, "body": "I considered this way, but the problem is as I stated, I want it to work with any shape."}, {"owner": {"reputation": 767, "user_id": 1212320, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b9195f72bf77345e1c920eefaa014d73?s=128&d=identicon&r=PG&f=1", "display_name": "MasterWizard", "link": "https://stackoverflow.com/users/1212320/masterwizard"}, "edited": false, "score": 0, "creation_date": 1552568835, "post_id": 55152302, "comment_id": 97065561, "body": "and to pick any column."}], "tags": [], "owner": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "is_accepted": false, "score": 0, "last_activity_date": 1552517379, "creation_date": 1552517379, "answer_id": 55152302, "question_id": 55151864, "link": "https://stackoverflow.com/questions/55151864/update-a-slice-or-column-in-tensor/55152302#55152302", "title": "Update a slice or column in tensor", "body": "<p>If you don't mind creating a new tensor, you could try:</p>\n\n<pre><code>import tensorflow as tf\n\nt = tf.Variable(tf.ones((5,5)))\ns0, s1, s2 = tf.split(t, [2, 1, 2], axis=1)\ns = tf.concat([s0,tf.zeros((5,1)),s2], axis=1)\n\nwith tf.Session() as sess:\n    sess.run(tf.global_variables_initializer())\n    y = sess.run(s)\n    print(y)\n</code></pre>\n"}], "owner": {"reputation": 767, "user_id": 1212320, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b9195f72bf77345e1c920eefaa014d73?s=128&d=identicon&r=PG&f=1", "display_name": "MasterWizard", "link": "https://stackoverflow.com/users/1212320/masterwizard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1552568869, "creation_date": 1552514607, "last_edit_date": 1552568869, "question_id": 55151864, "link": "https://stackoverflow.com/questions/55151864/update-a-slice-or-column-in-tensor", "title": "Update a slice or column in tensor", "body": "<p>I am trying to update a whole column no matter the shape of the tensor, also the index of the column can be anything within the shape range.</p>\n\n<pre><code> tensor = tf.Variable(tf.ones((5,5)))\n</code></pre>\n\n<p>I am trying to achieve this numpy operation:</p>\n\n<pre><code> tensor[:,2] = 0\n\n [ 1 1 0 1 1 ]\n [ 1 1 0 1 1 ]\n [ 1 1 0 1 1 ]\n [ 1 1 0 1 1 ]\n [ 1 1 0 1 1 ]\n</code></pre>\n\n<p>I tried using tf.scatter_update but no luck.</p>\n"}, {"tags": ["python", "django", "logging"], "comments": [{"owner": {"reputation": 3667, "user_id": 6789321, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-B5oSDMyNAyc/AAAAAAAAAAI/AAAAAAAAT6s/i6ZRf_boOu4/photo.jpg?sz=128", "display_name": "accdias", "link": "https://stackoverflow.com/users/6789321/accdias"}, "edited": false, "score": 0, "creation_date": 1552523321, "post_id": 55151848, "comment_id": 97046616, "body": "Shouldn&#39;t that dictionary be <code>DEFAULT_LOGGING</code> instead?"}, {"owner": {"reputation": 2446, "user_id": 5359531, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/b7636325b68a8f82a8f7b30fdfff251a?s=128&d=identicon&r=PG&f=1", "display_name": "user5359531", "link": "https://stackoverflow.com/users/5359531/user5359531"}, "reply_to_user": {"reputation": 3667, "user_id": 6789321, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-B5oSDMyNAyc/AAAAAAAAAAI/AAAAAAAAT6s/i6ZRf_boOu4/photo.jpg?sz=128", "display_name": "accdias", "link": "https://stackoverflow.com/users/6789321/accdias"}, "edited": false, "score": 0, "creation_date": 1552523724, "post_id": 55151848, "comment_id": 97046703, "body": "changing it to <code>DEFAULT_LOGGING</code> does not appear to make a difference for this"}], "answers": [{"tags": [], "owner": {"reputation": 36561, "user_id": 2395796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8786484468219bcf403bbdce5eb37c8d?s=128&d=identicon&r=PG", "display_name": "Kevin Christopher Henry", "link": "https://stackoverflow.com/users/2395796/kevin-christopher-henry"}, "is_accepted": true, "score": 4, "last_activity_date": 1552547705, "creation_date": 1552547705, "answer_id": 55156857, "question_id": 55151848, "link": "https://stackoverflow.com/questions/55151848/how-to-change-date-format-for-django-logging/55156857#55156857", "title": "How to change date format for Django logging?", "body": "<p>That was a good, detailed investigation. Make sure that your research includes the Django ticket tracker. The first hit on a search for <code>site:code.djangoproject.com datefmt</code> reveals that this is a <a href=\"https://code.djangoproject.com/ticket/29329\" rel=\"nofollow noreferrer\">known bug</a>.</p>\n\n<p>That ticket shows a possible workaround\u2014use <code>asctime</code> instead of <code>server_time</code>.</p>\n"}], "owner": {"reputation": 2446, "user_id": 5359531, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/b7636325b68a8f82a8f7b30fdfff251a?s=128&d=identicon&r=PG&f=1", "display_name": "user5359531", "link": "https://stackoverflow.com/users/5359531/user5359531"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1274, "favorite_count": 1, "accepted_answer_id": 55156857, "answer_count": 1, "score": 5, "last_activity_date": 1552547705, "creation_date": 1552514528, "last_edit_date": 1552523012, "question_id": 55151848, "link": "https://stackoverflow.com/questions/55151848/how-to-change-date-format-for-django-logging", "title": "How to change date format for Django logging?", "body": "<p>The comments in the answer <a href=\"https://stackoverflow.com/a/3220312/5359531\">here</a> say that you should be able to customize the date format for logging in Django:</p>\n\n<blockquote>\n  <p>Note that if you're using the dictConfig method of configuring logging (e.g. if you're using Django), you can set this using the 'datefmt' dict key for a formatter. See: Django Logging Configuration , logging module: Dictionary Schema Details</p>\n</blockquote>\n\n<p>However, it does not work:</p>\n\n<pre><code># settings.py\nLOGGING = {\n    'version': 1,\n    'disable_existing_loggers': False,\n    'formatters': {\n        'django.server': { # duplicate of default for django.server\n            '()': 'django.utils.log.ServerFormatter',\n            'format': '[{server_time}] {message}',\n            'style': '{',\n            'datefmt' : '%Y-%m-%d %H:%M:%S'\n            }\n}\n</code></pre>\n\n<p>This does not work either:</p>\n\n<pre><code># settings.py\nLOGGING = {\n    'version': 1,\n    'disable_existing_loggers': False,\n    'formatters': {\n        'default': {\n            'datefmt' : '%Y-%m-%d %H:%M:%S'\n            },\n}\n</code></pre>\n\n<p>In both cases, I still get the default logging date format:</p>\n\n<pre><code>[13/Mar/2019 21:53:05] \"GET / HTTP/1.1\" 200 16808\n</code></pre>\n\n<p>Note that in the source code, the <code>datefmt</code> should have been passed on and used, but it appears that this is not the case:</p>\n\n<p><a href=\"https://github.com/django/django/blob/782d85b6dfa191e67c0f1d572641d8236c79174c/django/utils/log.py#L190\" rel=\"nofollow noreferrer\">https://github.com/django/django/blob/782d85b6dfa191e67c0f1d572641d8236c79174c/django/utils/log.py#L190</a></p>\n\n<p>Using Python 3.6 and Django 2.1</p>\n\n<hr>\n\n<p>Update:</p>\n\n<p>When I include this in my <code>settings.py</code> as described:</p>\n\n<pre><code>LOGGING = {\n    'version': 1,\n    'disable_existing_loggers': False,\n    'formatters': {\n        'django.server': {\n            '()': 'django.utils.log.ServerFormatter',\n            'format': '[{server_time}] {message}',\n            'datefmt' : '%Y-%m-%d %H:%M:%S',\n            'style': '{',\n        }\n}\n</code></pre>\n\n<p>And then edit the file <code>conda//lib/python3.6/site-packages/django/utils/log.py</code> like this:</p>\n\n<pre><code>class ServerFormatter(logging.Formatter):\n    def __init__(self, *args, **kwargs):\n        self.style = color_style()\n        super().__init__(*args, **kwargs)\n        print(\"self.datefmt\", self.datefmt)\n</code></pre>\n\n<p>I get messages in my console that look like this, indicating that I actually am propagating the <code>datefmt</code> correctly:</p>\n\n<pre><code>$ python manage.py runserver\nself.datefmt %Y-%m-%d %H:%M:%S\nself.datefmt %Y-%m-%d %H:%M:%S\nPerforming system checks...\n\nSystem check identified no issues (0 silenced).\nMarch 13, 2019 - 23:43:50\nDjango version 2.1.2, using settings 'webapp.settings'\nStarting development server at http://127.0.0.1:8000/\nQuit the server with CONTROL-C.\n[13/Mar/2019 23:45:14] \"GET / HTTP/1.1\" 200 16808\n</code></pre>\n\n<p>Maybe the error has to do with this line in <code>django/utils/log.py</code>?</p>\n\n<pre><code>if self.uses_server_time() and not hasattr(record, 'server_time'):\n            record.server_time = self.formatTime(record, self.datefmt)\n</code></pre>\n\n<p>^ No matter what I do, it appears that this check never gets tripped, because <code>not hasattr(record, 'server_time')</code> always evaluates to <code>False</code>, because <code>record</code> already has <code>server_time</code> by default, and it appears to come from this section of Django code in <code>django/core/servers/basehttp.py</code>:</p>\n\n<pre><code>class WSGIRequestHandler(simple_server.WSGIRequestHandler):\n...\n...\n    def log_message(self, format, *args):\n        extra = {\n            'request': self.request,\n            'server_time': self.log_date_time_string(),\n        }\n</code></pre>\n\n<p>Where <code>simple_server.WSGIRequestHandler.log_date_time_string()</code> is coming from the <code>wsgiref</code> package. However, that package does not contain any reference to the function <code>log_date_time_string()</code>, it appears to be coming directly from the Python builtin <code>http</code> library (<code>conda//lib/python3.6/http/server.py</code>):</p>\n\n<pre><code>def log_date_time_string(self):\n    \"\"\"Return the current time formatted for logging.\"\"\"\n    now = time.time()\n    year, month, day, hh, mm, ss, x, y, z = time.localtime(now)\n    s = \"%02d/%3s/%04d %02d:%02d:%02d\" % (\n            day, self.monthname[month], year, hh, mm, ss)\n    return s\n</code></pre>\n\n<p>^ The date format here is hard-coded into the library, does not appear to be changeable.</p>\n\n<p>So... how is any of this supposed to work? Am I missing something? Is this some sort of bug in Django? Unless I am mistaken there is no way to override this <code>datefmt</code> based on this?</p>\n"}, {"tags": ["python", "python-3.x", "math", "nonetype", "collatz"], "comments": [{"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 5, "creation_date": 1552514527, "post_id": 55151787, "comment_id": 97044113, "body": "Your function does not return anything explicitly. Any such function implicitly returns <code>None</code>."}, {"owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 1, "creation_date": 1552515322, "post_id": 55151787, "comment_id": 97044386, "body": "You&#39;re printing the return value of <code>collatz()</code>, which is <code>None.</code>. The function itself prints information, so there is no need to print its result."}, {"owner": {"reputation": 27, "user_id": 10365774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/448393ee98871fc234084acd08c03233?s=128&d=identicon&r=PG&f=1", "display_name": "Philomath", "link": "https://stackoverflow.com/users/10365774/philomath"}, "edited": false, "score": 0, "creation_date": 1552610158, "post_id": 55151787, "comment_id": 97086843, "body": "Got it! Thank you."}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 10365774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/448393ee98871fc234084acd08c03233?s=128&d=identicon&r=PG&f=1", "display_name": "Philomath", "link": "https://stackoverflow.com/users/10365774/philomath"}, "edited": false, "score": 0, "creation_date": 1552610344, "post_id": 55152831, "comment_id": 97086881, "body": "Thanks. This is helpful. The reason I used float, is if someone types 5.5, then I get an error if &#39;int&#39; is used. So, wanted to convert the input and then round it so there are no errors, no matter what number type the user types."}, {"owner": {"reputation": 140, "user_id": 4038300, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p8U1D.png?s=128&g=1", "display_name": "whiterock", "link": "https://stackoverflow.com/users/4038300/whiterock"}, "reply_to_user": {"reputation": 27, "user_id": 10365774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/448393ee98871fc234084acd08c03233?s=128&d=identicon&r=PG&f=1", "display_name": "Philomath", "link": "https://stackoverflow.com/users/10365774/philomath"}, "edited": false, "score": 0, "creation_date": 1565533605, "post_id": 55152831, "comment_id": 101376585, "body": "@Philomath Would you mind giving me an upvote if you say you found it useful? :)"}, {"owner": {"reputation": 27, "user_id": 10365774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/448393ee98871fc234084acd08c03233?s=128&d=identicon&r=PG&f=1", "display_name": "Philomath", "link": "https://stackoverflow.com/users/10365774/philomath"}, "edited": false, "score": 1, "creation_date": 1565708093, "post_id": 55152831, "comment_id": 101432321, "body": "Already did. It says &#39;Thanks for the feedback! Votes cast by those with less than 15 reputation are recorded, but do not change the publicly displayed post score&#39;"}], "tags": [], "owner": {"reputation": 140, "user_id": 4038300, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p8U1D.png?s=128&g=1", "display_name": "whiterock", "link": "https://stackoverflow.com/users/4038300/whiterock"}, "is_accepted": true, "score": 1, "last_activity_date": 1552520896, "creation_date": 1552520896, "answer_id": 55152831, "question_id": 55151787, "link": "https://stackoverflow.com/questions/55151787/collatz-sequence-getting-a-none-at-the-end/55152831#55152831", "title": "Collatz Sequence - getting a None at the end", "body": "<p>As was already pointed out in the comments, your function returns <code>None</code>. I thought I'd take your function and make it a generator which you can iterate over and print the values that way. This has several advantages like making your code much more flexible and reusable:</p>\n\n<pre><code>def collatz (p):\n    while p != 1:\n        if p % 2 == 0:\n           p = p / 2 # You don't need the double slash here because of the if before it\n        else:\n           p = (3*p) + 1\n\n        yield p \n\nprint('Select a number between 1 and 10')\nnumber = int(input()) # You really want int here I think and leave out the rounding\n\nif 1 &lt;= number &lt;= 10: # Slightly more pythonic\n   for sequence_item in collatz(number):\n       print(sequence_item)\nelse:\n   print('Your selection must between 1 and 10. Please try again')\n</code></pre>\n\n<p>Feel free to ask anything or correct me on possibly wrong assumptions! :)</p>\n"}], "owner": {"reputation": 27, "user_id": 10365774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/448393ee98871fc234084acd08c03233?s=128&d=identicon&r=PG&f=1", "display_name": "Philomath", "link": "https://stackoverflow.com/users/10365774/philomath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "closed_date": 1552587720, "accepted_answer_id": 55152831, "answer_count": 1, "score": 2, "last_activity_date": 1552520896, "creation_date": 1552514148, "last_edit_date": 1552515331, "question_id": 55151787, "link": "https://stackoverflow.com/questions/55151787/collatz-sequence-getting-a-none-at-the-end", "closed_reason": "Duplicate", "title": "Collatz Sequence - getting a None at the end", "body": "<p>Learning from \"Automate The Boring Stuff\" by Al Sweigart. At the end of Chapter 3, the Collatz Sequence is given as practice. The output seems correct, but the last row has a 'None' in it. In the code below, I am guessing that when p = 1, it gets out of the while loop, and then there is nothing to print, so it gives a None (?). Can someone point me in the right direction of why the None is added, and how to fix it? </p>\n\n<p>See code right below and example results further down:</p>\n\n<pre><code>def collatz (p):\n    while p != 1:\n        if p % 2 ==0:\n           p = (p//2)\n           print(p)\n        else:\n           p = ((3*p) + 1)\n           print(p) \n\nprint ('Select a number between 1 and 10')\nentry = float(input())\nnumber = round(entry)\nif number &gt;10 or number &lt;1:\n   print('Your selection must between 1 and 10. Please try again')\nelse:       \n   Program = collatz(number)\n   print (Program)\n</code></pre>\n\n<p>**\nExample results:\nIf I input number as 3, I get:</p>\n\n<pre><code>3\n10\n5\n16\n8\n4\n2\n1\nNone\n</code></pre>\n"}, {"tags": ["python", "django", "django-rest-framework", "django-filters"], "comments": [{"owner": {"reputation": 7231, "user_id": 4915798, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bb8af3ae95300addb5dfa2e6cb5940c3?s=128&d=identicon&r=PG&f=1", "display_name": "afonso", "link": "https://stackoverflow.com/users/4915798/afonso"}, "edited": false, "score": 1, "creation_date": 1552558867, "post_id": 55151762, "comment_id": 97059099, "body": "Not related to django-filter, but you will first need to add a <code>ForeignKey</code> field to your <code>Note</code> model to be able to filter those objects by user..."}, {"owner": {"reputation": 61, "user_id": 912512, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/933cae6d8202add5abee54ca46b66294?s=128&d=identicon&r=PG", "display_name": "owad", "link": "https://stackoverflow.com/users/912512/owad"}, "reply_to_user": {"reputation": 7231, "user_id": 4915798, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bb8af3ae95300addb5dfa2e6cb5940c3?s=128&d=identicon&r=PG&f=1", "display_name": "afonso", "link": "https://stackoverflow.com/users/4915798/afonso"}, "edited": false, "score": 1, "creation_date": 1552558978, "post_id": 55151762, "comment_id": 97059168, "body": "Yes, sorry. It is there. The code I shared is just to illustrate the issue. I&#39;ve correct it. Thanks!"}], "owner": {"reputation": 61, "user_id": 912512, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/933cae6d8202add5abee54ca46b66294?s=128&d=identicon&r=PG", "display_name": "owad", "link": "https://stackoverflow.com/users/912512/owad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1552559068, "creation_date": 1552514021, "last_edit_date": 1552559068, "question_id": 55151762, "link": "https://stackoverflow.com/questions/55151762/drf-and-django-filters-filter-releated-objects", "title": "DRF and Django Filters - filter releated objects", "body": "<p>I've got two models: </p>\n\n<pre><code>class User(models.Model):\n    name = models.CharField(max_length=255)\n\nclass Note(models.Model):\n    timestamp = models.DateTimeField()\n    user = models.ForeignKey(User)\n</code></pre>\n\n<p>Both have serializers:</p>\n\n<pre><code>class NoteSerializer(ModelSerializer):\n    class Meta:\n        model = User\n        fields = '__all__'\n\nclass UserSerializer(ModelSerializer):\n    class Meta:\n        model = Note\n        fields = '__all__'\n\n    notes = NoteSerializer(\n        many=True,\n        read_only=True,\n    )\n</code></pre>\n\n<p>Now, I need to an endpoint that will return a JSON with the list of users with related notes for each one of them.</p>\n\n<p>The trick here is to be able to filter those notes by a date range. I imagine the URL would look like this: </p>\n\n<pre><code>/api/clients/?range=month&amp;date=2019-03\n</code></pre>\n\n<p>This translates to: \"give me a list of all users with their related notes with  timestamp between 2019-03-01 and 2019-04-1. </p>\n\n<p>And the question is: what's the best approach to accomplish that using Django Filters? </p>\n"}, {"tags": ["python", "pandas", "valueerror", "dummy-variable"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1552514004, "post_id": 55151734, "comment_id": 97043917, "body": "Did you look at the output of <code>country_cols = wine_dummies.loc[:, &#39;country_Chile&#39;:&#39;country_US&#39;]</code>?"}, {"owner": {"reputation": 55, "user_id": 9201666, "user_type": "registered", "profile_image": "https://graph.facebook.com/1779423345686736/picture?type=large", "display_name": "GuyGuyGuy", "link": "https://stackoverflow.com/users/9201666/guyguyguy"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1552514126, "post_id": 55151734, "comment_id": 97043962, "body": "yes, it outputs a dataframe that includes those columns with a uint8 dtype"}, {"owner": {"reputation": 55, "user_id": 9201666, "user_type": "registered", "profile_image": "https://graph.facebook.com/1779423345686736/picture?type=large", "display_name": "GuyGuyGuy", "link": "https://stackoverflow.com/users/9201666/guyguyguy"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1552514230, "post_id": 55151734, "comment_id": 97044008, "body": "columns: &#39;country_Chile\tcountry_France\tcountry_Germany\tcountry_Italy\t&zwnj;&#8203;country_Portugal\tcou&zwnj;&#8203;ntry_Spain\tcountry_U&zwnj;&#8203;S&#39; Row 1:    &#39;1\t0\t0\t0\t0\t1\t0\t0&#39;"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1552514305, "post_id": 55151734, "comment_id": 97044037, "body": "Exactly, so when you do <code>X = wine[feature_cols_1]</code> you&#39;re actually doing <code>X = wine[&#39;price&#39;, a_full_df, a full_df, &#39;year&#39;]</code>. That doesn&#39;t make sense, and that&#39;s what the error is telling you about."}, {"owner": {"reputation": 55, "user_id": 9201666, "user_type": "registered", "profile_image": "https://graph.facebook.com/1779423345686736/picture?type=large", "display_name": "GuyGuyGuy", "link": "https://stackoverflow.com/users/9201666/guyguyguy"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1552514464, "post_id": 55151734, "comment_id": 97044099, "body": "thanks, do you know how I can adjust my code so that &quot;feature_cols_1&quot; includes all of the columns in &quot;country_cols, variety_cols, and pricecat_cols?&quot; I&#39;m really just doing this so I don&#39;t have to type each column name into the &quot;feature_cols_1&quot; variable"}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1552516099, "post_id": 55151734, "comment_id": 97044653, "body": "It would be easier to help you if you provided a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>..."}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 9201666, "user_type": "registered", "profile_image": "https://graph.facebook.com/1779423345686736/picture?type=large", "display_name": "GuyGuyGuy", "link": "https://stackoverflow.com/users/9201666/guyguyguy"}, "edited": false, "score": 0, "creation_date": 1552516578, "post_id": 55151978, "comment_id": 97044822, "body": "Thanks, I think you&#39;re leading me in the right direction. Almost there. I apologize for all of the follow up questions: I used your code, but now I&#39;m getting this error &quot;unhashable type: &#39;Index&#39;&quot; am i doing something wrong?"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "reply_to_user": {"reputation": 55, "user_id": 9201666, "user_type": "registered", "profile_image": "https://graph.facebook.com/1779423345686736/picture?type=large", "display_name": "GuyGuyGuy", "link": "https://stackoverflow.com/users/9201666/guyguyguy"}, "edited": false, "score": 0, "creation_date": 1552516746, "post_id": 55151978, "comment_id": 97044863, "body": "That sounds almost certainly like a mistranslation of my approach. At a guess, you&#39;re missing a <code>get_loc</code> but I really can&#39;t know how that error comes about"}, {"owner": {"reputation": 55, "user_id": 9201666, "user_type": "registered", "profile_image": "https://graph.facebook.com/1779423345686736/picture?type=large", "display_name": "GuyGuyGuy", "link": "https://stackoverflow.com/users/9201666/guyguyguy"}, "edited": false, "score": 0, "creation_date": 1552518170, "post_id": 55151978, "comment_id": 97045280, "body": "This worked! Thank you! Yes, it was a mistranslation. I didn&#39;t unpack using *."}], "tags": [], "owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "is_accepted": true, "score": 0, "last_activity_date": 1552515792, "last_edit_date": 1552515792, "creation_date": 1552515335, "answer_id": 55151978, "question_id": 55151734, "link": "https://stackoverflow.com/questions/55151734/valueerror-setting-an-array-element-with-a-sequence/55151978#55151978", "title": "ValueError: setting an array element with a sequence?", "body": "<p>This is actually quite cumbersome, so it's only going to be useful if you have lots of columns between <code>'country_Chile':'country_US'</code>. In the below example, I'm deliberately dropping the <code>a</code> column in <code>middle_columns</code> by taking the column indices.</p>\n\n<p>This is using <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Index.get_loc.html\" rel=\"nofollow noreferrer\"><code>pandas.Index.get_loc</code></a> to find the indices of the start and end columns, which can then be used as a slice on the full list of dataframe columns. Then it unpacks that list using <code>*</code> into the final list of columns.</p>\n\n<pre><code>import pandas as pd\n\ndf = pd.DataFrame({'a': [1, 2, 3], 'b': [2, 3, 4], 'c': [3, 4, 5], \n                   'd': [4, 5, 6], 'wine': ['happy', 'drunk', 'sad'],\n                   'year': [2002, 2003, 2019]})\n\nmiddle_columns = df.columns[df.columns.get_loc('b'):df.columns.get_loc('d')+1]\nall_cols = ['wine', *middle_columns, 'year']\nX = df[all_cols]\n</code></pre>\n\n<p>The reason your current approach doesn't work is that <code>feature_cols_1 = ['price', country_cols, variety_cols, 'year']</code> returns a list of strings <em>and</em> dataframes, that you then try to use as columns to a second dataframe.</p>\n"}], "owner": {"reputation": 55, "user_id": 9201666, "user_type": "registered", "profile_image": "https://graph.facebook.com/1779423345686736/picture?type=large", "display_name": "GuyGuyGuy", "link": "https://stackoverflow.com/users/9201666/guyguyguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 55151978, "answer_count": 1, "score": -1, "last_activity_date": 1552515792, "creation_date": 1552513899, "question_id": 55151734, "link": "https://stackoverflow.com/questions/55151734/valueerror-setting-an-array-element-with-a-sequence", "title": "ValueError: setting an array element with a sequence?", "body": "<p>Why am i getting this error message? </p>\n\n<p>Here are the variables that are included in my code. The columns they include are all dummy variables:</p>\n\n<pre><code>country_cols = wine_dummies.loc[:, 'country_Chile':'country_US']\nvariety_cols = wine_dummies.loc[:, 'variety_Cabernet \nSauvignon':'variety_Zinfandel']\npricecat_cols = wine_dummies.loc[:, 'price_category_low':]\n</code></pre>\n\n<p>Here is the code that is throwing the error (it is throwing the error at \"X = wine[feature_cols_1]\":</p>\n\n<pre><code>feature_cols_1 = ['price', country_cols, variety_cols, 'year']\nfeature_cols_2 = [pricecat_cols, country_cols, variety_cols, 'year']\n\nX = wine[feature_cols_1] &lt;---ERROR\ny = wine['points']\n</code></pre>\n\n<p>Here is the head of my dataframe:</p>\n\n<pre><code>country designation points  price   province    variety      year   ... variety_Riesling    variety_Ros\u00e9    variety_Sangiovese  variety_Sauvignon Blanc variety_Syrah   variety_Tempranillo variety_White Blend variety_Zinfandel   price_category_low  price_category_med\nPortugal    Avidagos    87  15.0    Douro   Portuguese Red  2011.0  ... 0  0    0   0   0   0   0   0   1 0    \n</code></pre>\n\n<p>^ each dummy variable (0s and 1s) after \"...\" corresponds to each column after \"...\"</p>\n"}, {"tags": ["python", "pandas", "data-visualization"], "answers": [{"tags": [], "owner": {"reputation": 16731, "user_id": 10201580, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/awLHs.png?s=128&g=1", "display_name": "Chris A", "link": "https://stackoverflow.com/users/10201580/chris-a"}, "is_accepted": true, "score": 6, "last_activity_date": 1552514367, "creation_date": 1552514367, "answer_id": 55151820, "question_id": 55151699, "link": "https://stackoverflow.com/questions/55151699/plotting-categorical-variable-as-stacked-bar-plot/55151820#55151820", "title": "Plotting categorical variable as stacked bar plot", "body": "<p>Use:</p>\n\n<pre><code>pd.crosstab(df['Purpose'], df['LoanStatus']).plot(kind='bar', stacked=True)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/YBVyT.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/YBVyT.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 91, "user_id": 6355971, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SMxzdetQlV4/AAAAAAAAAAI/AAAAAAAAC9M/SYZSSr4jw9s/photo.jpg?sz=128", "display_name": "sajak upadhyaya", "link": "https://stackoverflow.com/users/6355971/sajak-upadhyaya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1388, "favorite_count": 1, "accepted_answer_id": 55151820, "answer_count": 1, "score": 2, "last_activity_date": 1552514367, "creation_date": 1552513739, "question_id": 55151699, "link": "https://stackoverflow.com/questions/55151699/plotting-categorical-variable-as-stacked-bar-plot", "title": "Plotting categorical variable as stacked bar plot", "body": "<p>I have a Pandas dataframe which looks like this:</p>\n\n<pre>\nPurpose            LoanStatus  \nBusiness Loan           0  \nBusiness Loan           1  \nBuy House               0  \nBuy House               1  \nBusiness Loan           1  \nBuy a Car               0  \nBuy House               0  \nWedding                 1  \nBusiness Loan           0  \n\n</pre>\n\n<p>I am trying to make a stacked bar plot with each category being the X-axis and count of 0 and 1 as their two stacks. </p>\n\n<p>How do I do this? do I have to make manual counts for each category or is there a smarter way to do this?</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 2454, "user_id": 8784938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/753bb55c80a644f950a41ae11cfbe48c?s=128&d=identicon&r=PG&f=1", "display_name": "SuperStew", "link": "https://stackoverflow.com/users/8784938/superstew"}, "edited": false, "score": 0, "creation_date": 1552513807, "post_id": 55151684, "comment_id": 97043846, "body": "I&#39;m a bit confused, but i think you can just load in a class from your module and make different instances of that class"}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1552514676, "post_id": 55151684, "comment_id": 97044152, "body": "Do the versions have different names? If they do, just import them as if they were different modules. If not, they should."}, {"owner": {"reputation": 1214, "user_id": 2029276, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/05f5ae7c009416c6cb07373eba31441f?s=128&d=identicon&r=PG", "display_name": "Shadow", "link": "https://stackoverflow.com/users/2029276/shadow"}, "edited": false, "score": 0, "creation_date": 1552516011, "post_id": 55151684, "comment_id": 97044617, "body": "They do not have different names. This is just one module in dozens of versions, that need to be evaluated (machine learning models)."}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1552516289, "post_id": 55151684, "comment_id": 97044729, "body": "Why not give them different names? Say, add suffixes for version numbers."}, {"owner": {"reputation": 1214, "user_id": 2029276, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/05f5ae7c009416c6cb07373eba31441f?s=128&d=identicon&r=PG", "display_name": "Shadow", "link": "https://stackoverflow.com/users/2029276/shadow"}, "edited": false, "score": 0, "creation_date": 1552579637, "post_id": 55151684, "comment_id": 97073669, "body": "Module has dozens of files, renaming all classes would be pointless."}], "owner": {"reputation": 1214, "user_id": 2029276, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/05f5ae7c009416c6cb07373eba31441f?s=128&d=identicon&r=PG", "display_name": "Shadow", "link": "https://stackoverflow.com/users/2029276/shadow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1552513624, "creation_date": 1552513624, "question_id": 55151684, "link": "https://stackoverflow.com/questions/55151684/loading-multiple-versions-of-python-module-like-dlls", "title": "Loading multiple versions of python module - like dlls", "body": "<p>I have python program that evaluates experiments. So there are several versions of module with some changes, my program needs to start each one and get some data from it. In C world, I would just load 10 different dlls and I'd be happy, however in python You cannot unload module. Reload works, but just for single files, so I would need to keep track of what is imported inside modules (impossible because of conditional imports).</p>\n\n<p>What is pythonic way of dealing with this problem (other than separate interfaces).</p>\n"}, {"tags": ["python", "article"], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 11199696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qad0m.jpg?s=128&g=1", "display_name": "poplar06", "link": "https://stackoverflow.com/users/11199696/poplar06"}, "edited": false, "score": 1, "creation_date": 1552573999, "post_id": 55153071, "comment_id": 97069511, "body": "You&#39;ve been very helpful to me, Thank you:) Only it didn&#39;t work in Mac osx, so I tried it with the geckodriver. It works smoothly right now :))"}], "tags": [], "owner": {"reputation": 89, "user_id": 10887962, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-zSDhcAxnxq8/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYAbUWRJU6JPlta8nfD0SvVwW6ezA/mo/photo.jpg?sz=128", "display_name": "Ibaboiii", "link": "https://stackoverflow.com/users/10887962/ibaboiii"}, "is_accepted": false, "score": 1, "last_activity_date": 1552523864, "last_edit_date": 1552523864, "creation_date": 1552522739, "answer_id": 55153071, "question_id": 55151678, "link": "https://stackoverflow.com/questions/55151678/key-words-search-in-articles-on-website-with-python/55153071#55153071", "title": "Key Words search in articles on website with python", "body": "<p>You should check out <a href=\"https://selenium-python.readthedocs.io/index.html\" rel=\"nofollow noreferrer\">Selenium</a></p>\n\n<pre><code>pip install selenium\n</code></pre>\n\n<p>I provided a sample code of what it can do you should test this out.</p>\n\n<p>Sample Code:</p>\n\n<pre><code>from selenium import webdriver\nfrom selenium.webdriver.common.desired_capabilities import DesiredCapabilities\nfrom selenium.webdriver.common.by import By\nfrom selenium.common.exceptions import NoSuchElementException\n\n\ncaps = DesiredCapabilities().CHROME\ncaps[\"pageLoadStrategy\"] = \"normal\"  \ndriver = webdriver.Chrome(desired_capabilities=caps, executable_path=r'C:\\Users\\My-PC-Name\\AppData\\Local\\Programs\\Python\\Python37-32\\Scripts\\chromedriver.exe')\n\n\nurl = \"http://aeconf.com/may2000.htm\" #Link\ndriver.get(url)\nlinks = [x.get_attribute('href') for x in driver.find_elements_by_link_text('View Abstract')]\nhtmls = []\n\nfor link in links:\n   driver.get(link)\n   Keyword = [y.text for y in driver.find_elements_by_xpath(\"//font[2]/span[@style = 'mso-bidi-font-size: 1.0pt']\")]\n   if not Keyword: #If link is a dead link\n     continue\n   print(Keyword[0])\n   htmls.append(driver.page_source)\n</code></pre>\n\n<p>In this example I changed the url to <a href=\"http://aeconf.com/may2000.htm\" rel=\"nofollow noreferrer\">http://aeconf.com/may2000.htm</a> The code I provided mostly get the \"Key Words\" you need but there are certain cases in which the index position of the \"Key Words\" changes depending on the links in the said Url. </p>\n\n<p>Output of 'changed' link:</p>\n\n<pre><code>Fiscal decentralization; Corruption; Tax evasion.\nIncentive mechanism design; Walrasian allocations; Implementation.\nDebt and equity flows; Asymmetric information; Bankruptcy cost; Market failures; \nCorrective taxation.\nTransitory volatility; Price formation; Exogenous liquidity demand.\nInvestment horizon; Beta; Size; Book-to-market equity; CAPM.\nG11, G13.                         #At This part you can see that the 'Key Words' printed are not correct\nPortfolio constraints; Stochastic income; Relaxation-projection methods.\nForeign aid; Foreign borrowing; Capital accumulation.\nEntrepreneurial ability; Asymmetric information; Liquidity constraints.\nContract; Human capital; Labor.\nEndogenous structure of the division of labor; Dual economy; Endogenous trade policy regime.\n</code></pre>\n\n<p>If we changed the 'url' variable in my Sample Code to your original <a href=\"http://aeconf.com/may2013.htm\" rel=\"nofollow noreferrer\">link</a> there are more cases in which the index position is changed even the first link is a dead link. As a challenge I'll let you figure it out yourself :-) \nThere are more modules that can do the same thing like Selenium. Hope this gives you more interest on Browser Automation, Web Scraping and many more (Web Crawler etc.).</p>\n\n<p><em>Just a tip (probably not a tip) You'll just have to change the index position of the 'Keyword' variable to get the desired \"Key Word\".</em></p>\n"}], "owner": {"reputation": 71, "user_id": 11199696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qad0m.jpg?s=128&g=1", "display_name": "poplar06", "link": "https://stackoverflow.com/users/11199696/poplar06"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 410, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1552541060, "creation_date": 1552513585, "last_edit_date": 1552541060, "question_id": 55151678, "link": "https://stackoverflow.com/questions/55151678/key-words-search-in-articles-on-website-with-python", "title": "Key Words search in articles on website with python", "body": "<p>I just joined you, and it's been 1 month since I started learning python. I would like to search keyword from this site with Python (<a href=\"http://aeconf.com/may2013.htm\" rel=\"nofollow noreferrer\">http://aeconf.com/may2013.htm</a>). </p>\n\n<p>Normally I manually click on the view abtsract and search for words after the \"Key Words:\". How can I do this with python automatically? Im so sorry for my bad english:(</p>\n"}, {"tags": ["python", "python-2.7", "web-scraping", "beautifulsoup"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1552514208, "post_id": 55151672, "comment_id": 97044000, "body": "Your clue is in the method name <code>csv_writer.writerow([department_name, contact_name, position, first_phones])</code>. <code>writerow</code> writes a single row, and you call it once. The value <code>department_name</code>, for example, has gone through every incarnation it could have, with no writes, in <code>for department in soup.find_all(&quot;div&quot;, class_=&quot;view-content&quot;):</code> and all you&#39;re left with is its last incarnation."}], "answers": [{"tags": [], "owner": {"reputation": 83, "user_id": 11199750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1652b846d65cb8ec234024e89c19139?s=128&d=identicon&r=PG&f=1", "display_name": "Babr", "link": "https://stackoverflow.com/users/11199750/babr"}, "is_accepted": false, "score": 2, "last_activity_date": 1552518304, "creation_date": 1552518304, "answer_id": 55152470, "question_id": 55151672, "link": "https://stackoverflow.com/questions/55151672/multiple-for-loops-and-csv-files/55152470#55152470", "title": "Multiple for loops and csv files", "body": "<p>Thanks Thomas,\nActually I tweaked my code a little bit by thinking how I can make it simpler (four for loops are too much, no?) so with the following code I solved my problem(dropped the 'department' and 'phones' because some other issues):</p>\n\n<pre><code>import requests\nfrom bs4 import BeautifulSoup\nimport csv\n\nurl = 'https://www.tamarackgc.com/club-contacts'\nsource = requests.get(url).text\nsoup = BeautifulSoup (source, 'lxml')\n\n\n\nf = open(\"contactslot.csv\", \"w+\")\n\ncsv_writer = csv.writer (f)\ncsv_writer.writerow([\"Name\", \"Position\"])\n\ninfomation = soup.find_all(\"div\", class_=\"well profile\")\ninfo = information[0]\n\nfor info in information:\n    contact_name = info.find_all(\"div\", class_=\"col-md-7 col-xs-10\")\n    names = contact_name[0].strong\n    name = names.text\n    print (name)\n\n\n    position_name = info.find_all(\"div\", class_=\"field-content\")\n    position = position_name[0].text\n    print(position)\n    print(\"\")\n    csv_writer.writerow([name, position])\n\nf.close()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 119, "user_id": 10523808, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CtWLk.jpg?s=128&g=1", "display_name": "Leo_Liu_MJ", "link": "https://stackoverflow.com/users/10523808/leo-liu-mj"}, "is_accepted": false, "score": 1, "last_activity_date": 1552520734, "creation_date": 1552520734, "answer_id": 55152807, "question_id": 55151672, "link": "https://stackoverflow.com/questions/55151672/multiple-for-loops-and-csv-files/55152807#55152807", "title": "Multiple for loops and csv files", "body": "<p>Hi Babr welcome to use python. Your answer is good and here is one more little thing you may can do better.</p>\n\n<p>use <code>find</code> replace <code>find_all</code> if you just want one element</p>\n\n<pre><code>import requests\nfrom bs4 import BeautifulSoup\nimport csv\n\nurl = 'https://www.tamarackgc.com/club-contacts'\nsource = requests.get(url).text\nsoup = BeautifulSoup(source, 'lxml')\n\nf = open(\"/Users/mingjunliu/Downloads/contacts.csv\", \"w+\")\n\ncsv_writer = csv.writer(f)\ncsv_writer.writerow([\"Name\", \"Position\"])\n\nfor info in soup.find_all(\"div\", class_=\"well profile\"):\n    contact_name = info.find(\"div\", class_=\"col-md-7 col-xs-10\")\n    names = contact_name.strong\n    name = names.text\n    print(name)\n\n    position_name = info.find(\"div\", class_=\"field-content\")\n    position = position_name.text\n    print(position)\n    print(\"\")\n    csv_writer.writerow([name, position])\n\nf.close()\n</code></pre>\n\n<p>And the reason you need to drop phone and department is because of the bad website structure. It's not your fault.</p>\n"}], "owner": {"reputation": 83, "user_id": 11199750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1652b846d65cb8ec234024e89c19139?s=128&d=identicon&r=PG&f=1", "display_name": "Babr", "link": "https://stackoverflow.com/users/11199750/babr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1552520734, "creation_date": 1552513548, "last_edit_date": 1552513878, "question_id": 55151672, "link": "https://stackoverflow.com/questions/55151672/multiple-for-loops-and-csv-files", "title": "Multiple for loops and csv files", "body": "<p>I am new here and newbie with python and currently learning some basic stuff, mostly scraping and I encountered a problem that I hope you can help me to solve.</p>\n\n<p>I'm trying to scrape few details from a website and writing them into a CSV file but I'm able to write only the last results into my CSV, apparently my script just overwrite the data.</p>\n\n<p>Also if you find any mistakes on my code or any room for improvement (which I'm sure there are) I'd be glad if you will point them out as well.</p>\n\n<p>Also2, any recommendation for videos/tutorials that can help me improve my python and scraping skills would be appreciated. </p>\n\n<pre><code>import requests\nfrom bs4 import BeautifulSoup\nimport csv\n\nurl = 'https://www.tamarackgc.com/club-contacts'\nsource = requests.get(url).text\nsoup = BeautifulSoup (source, 'lxml')\n\ncsv_file = open('contacts.csv', 'w')\ncsv_writer = csv.writer (csv_file)\ncsv_writer.writerow([\"department\", \"name\", \"position\", \"phone\"])\n\nfor department in soup.find_all(\"div\", class_=\"view-content\"):\n    department_name = department.h3\n    print (department_name.text)\n\nfor contacts in soup.find_all(\"div\", class_=\"col-md-7 col-xs-10\"):\n    contact_name = contacts.strong\n    print(contact_name.text)\n\nfor position in soup.find_all(\"div\", class_=\"field-content\"):\n    print(position.text)\n\nfor phone in soup.find_all(\"div\", class_=\"modal-content\"):\n    first_phone = phone.h3\n    first_phones = first_phone\n    print(first_phones)\n\ncsv_writer.writerow([department_name, contact_name, position, first_phones])\n\ncsv_file.close()\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "python-asyncio"], "comments": [{"owner": {"reputation": 969, "user_id": 1043122, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8a2e18068f5cd5e441e7f7086bbc6240?s=128&d=identicon&r=PG", "display_name": "RnD", "link": "https://stackoverflow.com/users/1043122/rnd"}, "edited": false, "score": 0, "creation_date": 1552513692, "post_id": 55151635, "comment_id": 97043791, "body": "having a <code>while True</code> is bad in general, what you should do instead is when you add something to the queue (using a method) you should call another method to take an element from the queue, do its things and at the end check the queue again for more elements, if there arent any, terminate it is also easier to use threads for stuff like this"}, {"owner": {"reputation": 2931, "user_id": 1342257, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xitxS.jpg?s=128&g=1", "display_name": "Nikolas Stevenson-Molnar", "link": "https://stackoverflow.com/users/1342257/nikolas-stevenson-molnar"}, "edited": false, "score": 0, "creation_date": 1552514249, "post_id": 55151635, "comment_id": 97044016, "body": "I&#39;m not clear on what you&#39;re trying to do. Your method <i>does</i> appear to be synchronous, though of course <code>loop.run_until_complete()</code> <i>will</i> block. I don&#39;t see where messages are being put <i>into</i> the queue except at the top. You mention feeding messages in manually... what does that mean?"}, {"owner": {"reputation": 602, "user_id": 6067848, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bbdbf33d547c68c612b905912455dd4c?s=128&d=identicon&r=PG&f=1", "display_name": "Josh D", "link": "https://stackoverflow.com/users/6067848/josh-d"}, "reply_to_user": {"reputation": 2931, "user_id": 1342257, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xitxS.jpg?s=128&g=1", "display_name": "Nikolas Stevenson-Molnar", "link": "https://stackoverflow.com/users/1342257/nikolas-stevenson-molnar"}, "edited": false, "score": 0, "creation_date": 1552517468, "post_id": 55151635, "comment_id": 97045075, "body": "@NikolasStevenson-Molnar I have another Thread that polls an external network resource for data (I/O intensive) and dumps the incoming messages into this thread. This is the handler to receive the incoming data."}, {"owner": {"reputation": 2931, "user_id": 1342257, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xitxS.jpg?s=128&g=1", "display_name": "Nikolas Stevenson-Molnar", "link": "https://stackoverflow.com/users/1342257/nikolas-stevenson-molnar"}, "edited": false, "score": 0, "creation_date": 1552520090, "post_id": 55151635, "comment_id": 97045796, "body": "In that case, it seems like you&#39;re using asyncio in the wrong place. It&#39;s awesome for network I/O, but doesn&#39;t seem to be doing any good in your use here (at least from what&#39;s shown in your code example); you&#39;ve basically constructed an async routine that essentially acts like a <i>synchronous</i> one."}], "answers": [{"comments": [{"owner": {"reputation": 602, "user_id": 6067848, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bbdbf33d547c68c612b905912455dd4c?s=128&d=identicon&r=PG&f=1", "display_name": "Josh D", "link": "https://stackoverflow.com/users/6067848/josh-d"}, "edited": false, "score": 0, "creation_date": 1552524238, "post_id": 55152984, "comment_id": 97046826, "body": "Thanks, but my <code>get_item_from_network()</code> is not <code>awaitable</code> - it&#39;s a call to Azure Storage Queue Python SDK to get messages from the queue, and I believe it&#39;s built on top of <code>requests</code> which is blocking. So that&#39;s why I run the code that gets those messages in a separate thread and transfer to a <code>queue.Queue</code>"}], "tags": [], "owner": {"reputation": 1325, "user_id": 10840818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba257cfc7b141c2e2ceaa123a2f29b91?s=128&d=identicon&r=PG&f=1", "display_name": "MarkReedZ", "link": "https://stackoverflow.com/users/10840818/markreedz"}, "is_accepted": false, "score": 2, "last_activity_date": 1552522117, "creation_date": 1552522117, "answer_id": 55152984, "question_id": 55151635, "link": "https://stackoverflow.com/questions/55151635/python-event-handler-with-async-non-blocking-while-loop/55152984#55152984", "title": "Python event handler with Async (non-blocking while loop)", "body": "<p>This is not an async queue.  You need to use <a href=\"https://docs.python.org/3/library/asyncio-queue.html\" rel=\"nofollow noreferrer\">asyncio.Queue</a></p>\n\n<pre><code>qq = queue.Queue()\n</code></pre>\n\n<p>Async is an event loop.  You call the loop transferring control to it and it loops until your function is complete which never happens:</p>\n\n<pre><code>loop.run_until_complete(a.listen_for_orders())\n</code></pre>\n\n<p>You commented:</p>\n\n<blockquote>\n  <p>I have another Thread that polls an external network resource for data (I/O intensive) and dumps the incoming messages into this thread. </p>\n</blockquote>\n\n<p>Write that code async - so you'd have:</p>\n\n<pre><code>async def run():\n    while 1:\n        item = await get_item_from_network()\n        process_item(item)\n\nloop = asyncio.get_event_loop()\nloop.run_until_complete( run() )\n</code></pre>\n\n<p>If you don't want to do that what you can do is step through the loop though you don't want to do this.  </p>\n\n<pre><code>import asyncio\n\n\ndef run_once(loop):\n    loop.call_soon(loop.stop)\n    loop.run_forever()\n\n\nloop = asyncio.get_event_loop()\n\nfor x in range(100):\n    print(x)\n    run_once(loop)\n</code></pre>\n\n<p>Then you simply call your async function and each time you call run_once it will check your (asyncio queue) and pass control to your listen for orders function if the queue has an item in it. </p>\n"}, {"comments": [{"owner": {"reputation": 602, "user_id": 6067848, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bbdbf33d547c68c612b905912455dd4c?s=128&d=identicon&r=PG&f=1", "display_name": "Josh D", "link": "https://stackoverflow.com/users/6067848/josh-d"}, "edited": false, "score": 0, "creation_date": 1552937415, "post_id": 55164709, "comment_id": 97192046, "body": "This is good, but when I call <code>loop.run_until_complete(a.listen_for_orders()) </code> it blocks me from inputting more commands into the python console. I need it to not block"}, {"owner": {"reputation": 102109, "user_id": 1600898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/01377f8b31f24b0265854666b29d0c03?s=128&d=identicon&r=PG", "display_name": "user4815162342", "link": "https://stackoverflow.com/users/1600898/user4815162342"}, "reply_to_user": {"reputation": 602, "user_id": 6067848, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bbdbf33d547c68c612b905912455dd4c?s=128&d=identicon&r=PG&f=1", "display_name": "Josh D", "link": "https://stackoverflow.com/users/6067848/josh-d"}, "edited": false, "score": 0, "creation_date": 1552937857, "post_id": 55164709, "comment_id": 97192242, "body": "@JoshD Then run <code>run_until_complete</code> in an background thread, and read from the console in the main thread. The code should work regardless of which thread the event loop is run in, as long as you use <code>call_soon_threadsafe</code> to add stuff to the queue."}, {"owner": {"reputation": 602, "user_id": 6067848, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bbdbf33d547c68c612b905912455dd4c?s=128&d=identicon&r=PG&f=1", "display_name": "Josh D", "link": "https://stackoverflow.com/users/6067848/josh-d"}, "edited": false, "score": 0, "creation_date": 1552938760, "post_id": 55164709, "comment_id": 97192661, "body": "Thanks. It&#39;s not exactly solving my problem though, I suspect I have something wrong with my overall architecture if I&#39;m combining threads and async. I see from your other answers that you have a great grasp of async, would you mind if I contacted you offline for assistance with this? Are you available? Thanks."}], "tags": [], "owner": {"reputation": 102109, "user_id": 1600898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/01377f8b31f24b0265854666b29d0c03?s=128&d=identicon&r=PG", "display_name": "user4815162342", "link": "https://stackoverflow.com/users/1600898/user4815162342"}, "is_accepted": true, "score": 3, "last_activity_date": 1552572757, "creation_date": 1552572757, "answer_id": 55164709, "question_id": 55151635, "link": "https://stackoverflow.com/questions/55151635/python-event-handler-with-async-non-blocking-while-loop/55164709#55164709", "title": "Python event handler with Async (non-blocking while loop)", "body": "<p>You need to make your queue an <code>asyncio.Queue</code>, and add things to the queue in a thread-safe manner. For example:</p>\n\n<pre><code>qq = asyncio.Queue()\n\nclass MyApp():\n    def __init__(self, q):\n        self._queue = q\n\n    def _process_item(self, item):\n        print(f'Processing this item: {item}')\n\n    async def get_item(self):\n        item = await self._queue.get()\n        self._process_item(item)\n\n    async def listen_for_orders(self):  \n        '''\n        Asynchronously check the orders queue for new incoming orders\n        '''\n        while True:\n            await self.get_item()\n\na = MyApp(qq)\n\nloop = asyncio.get_event_loop()\n\nloop.run_until_complete(a.listen_for_orders())\n</code></pre>\n\n<p>Your other thread must put stuff in the queue like this:</p>\n\n<pre><code>loop.call_soon_threadsafe(qq.put_nowait, &lt;item&gt;)\n</code></pre>\n\n<p><code>call_soon_threadsafe</code> will ensure correct locking, and also that the event loop is woken up when a new queue item is ready.</p>\n"}], "owner": {"reputation": 602, "user_id": 6067848, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bbdbf33d547c68c612b905912455dd4c?s=128&d=identicon&r=PG&f=1", "display_name": "Josh D", "link": "https://stackoverflow.com/users/6067848/josh-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3364, "favorite_count": 1, "accepted_answer_id": 55164709, "answer_count": 2, "score": 5, "last_activity_date": 1552572757, "creation_date": 1552513374, "question_id": 55151635, "link": "https://stackoverflow.com/questions/55151635/python-event-handler-with-async-non-blocking-while-loop", "title": "Python event handler with Async (non-blocking while loop)", "body": "<pre><code>import queue\n\nqq = queue.Queue()\nqq.put('hi')\n\nclass MyApp():\n\n    def __init__(self, q):\n        self._queue = q\n\n    def _process_item(self, item):\n        print(f'Processing this item: {item}')\n\n    def get_item(self):\n        try:\n            item = self._queue.get_nowait()\n            self._process_item(item)\n        except queue.Empty:\n            pass\n\n    async def listen_for_orders(self):  \n        '''\n        Asynchronously check the orders queue for new incoming orders\n        '''\n        while True:\n            self.get_item()\n            await asyncio.sleep(0)      \n\na = MyApp(qq)\n\nloop = asyncio.get_event_loop()\n\nloop.run_until_complete(a.listen_for_orders())\n</code></pre>\n\n<p>Using Python 3.6.</p>\n\n<p>I'm trying to write an event handler that constantly listens for messages in the <code>queue</code>, and processes them (prints them in this case). But it must be <strong>asynchronous</strong> - I need to be able to run it in a terminal (IPython) and manually feed things to the <code>queue</code> (at least initially, for testing).</p>\n\n<p>This code does not work - it blocks forever.</p>\n\n<p>How do I make this run forever but return control after each iteration of the <code>while</code> loop?</p>\n\n<p>Thanks.</p>\n\n<p><em>side note:</em>\nTo make the event loop work with IPython (version 7.2), I'm using <a href=\"https://github.com/erdewit/ib_insync/blob/master/ib_insync/util.py#L372\" rel=\"noreferrer\">this</a> code from the <code>ib_insync</code> library, I'm using this library for the real-world problem in the example above.</p>\n"}, {"tags": ["python", "json", "pretty-print"], "answers": [{"tags": [], "owner": {"reputation": 24576, "user_id": 3767239, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f7cdefb47f96069d7add1222c70f3f70?s=128&d=identicon&r=PG&f=1", "display_name": "a_guest", "link": "https://stackoverflow.com/users/3767239/a-guest"}, "is_accepted": true, "score": 1, "last_activity_date": 1552519064, "last_edit_date": 1552519064, "creation_date": 1552514752, "answer_id": 55151894, "question_id": 55151617, "link": "https://stackoverflow.com/questions/55151617/is-it-possible-to-skip-outputting-specific-key-and-associated-values-in-python-j/55151894#55151894", "title": "Is it possible to skip outputting specific key and associated values in python json.dumps?", "body": "<p>You can create a temporary copy and remove these keys from it:</p>\n\n<pre><code>from functools import reduce\nimport operator as op\n\ndef toJSON(self, skip=()):\n    obj = self._container.copy()\n    for path in skip:\n        del reduce(op.getitem, path[:-1], obj)[path[-1]]\n    return json.dumps(obj, default=lambda o: o.__dict__,\n                      sort_keys=True, indent=4)\n</code></pre>\n\n<p>Then you can specify the keys as a path:</p>\n\n<pre><code>foo.toJSON(skip=[('1', 'longValueList')])\n</code></pre>\n\n<p>This also works with list indices:</p>\n\n<pre><code>foo.toJSON(skip=[('1', 'longValueList', 2)])\n</code></pre>\n\n<p>As a modification you could also use path separators for example (does not work with list indices though):</p>\n\n<pre><code>from functools import reduce\nimport operator as op\n\ndef toJSON(self, skip=()):\n    obj = self._container.copy()\n    for path in skip:\n        path = path.split('/')\n        del reduce(op.getitem, path[:-1], obj)[path[-1]]\n    return json.dumps(obj, default=lambda o: o.__dict__,\n                      sort_keys=True, indent=4)\n\nfoo.toJSON(skip=['1/longValueList'])\n</code></pre>\n"}], "owner": {"reputation": 342, "user_id": 1787331, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/57a894ec42f77af09f8da79d60edfaef?s=128&d=identicon&r=PG", "display_name": "user1787331", "link": "https://stackoverflow.com/users/1787331/user1787331"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 887, "favorite_count": 0, "accepted_answer_id": 55151894, "answer_count": 1, "score": 0, "last_activity_date": 1552519064, "creation_date": 1552513194, "last_edit_date": 1552513390, "question_id": 55151617, "link": "https://stackoverflow.com/questions/55151617/is-it-possible-to-skip-outputting-specific-key-and-associated-values-in-python-j", "title": "Is it possible to skip outputting specific key and associated values in python json.dumps?", "body": "<p>Using json.dumps I have the following output.</p>\n\n<pre><code>{\n\"1\": {\n    \"fooBar\": {\n        \"_foo\": \"foo\",\n        \"_bar\": \"bar\",\n        \"_id\": \"1\"\n\n    },\n    \"longValueList\": [\n        [\n            1,\n            2,\n            ...\n            n,\n\n        ],\n...\n</code></pre>\n\n<p>The above output is generated using this class object function.</p>\n\n<pre><code>def toJSON(self):\n    return json.dumps(self._container, default=lambda o: o.__dict__,\n                      sort_keys=True, indent=4)\n</code></pre>\n\n<p>The key <code>longValueList</code> is associated with really long value list and I do not need it printed when doing these specific json prints.  How can prevent pythons json.dumps from printing the key and values?  Looking at the documentation for python json.dumps I could not see any options in the constructor that skip specific keys by name when calling json.dumps </p>\n"}, {"tags": ["python", "python-3.x", "pandas", "python-2.7", "xlsxwriter"], "comments": [{"owner": {"reputation": 3206, "user_id": 3823815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fd8Kt.jpg?s=128&g=1", "display_name": "louis_guitton", "link": "https://stackoverflow.com/users/3823815/louis-guitton"}, "edited": false, "score": 0, "creation_date": 1556800438, "post_id": 55151606, "comment_id": 98557005, "body": "Could you provide a minimal code sample to reproduce your error ? It s not clear what library you use to interact with excel sheets. Is it openpyxl or another one ??!"}], "owner": {"reputation": 1747, "user_id": 2088886, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/4254f4feeee792a65ea10391f8a4e74f?s=128&d=identicon&r=PG", "display_name": "David Yang", "link": "https://stackoverflow.com/users/2088886/david-yang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 134, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1556799489, "creation_date": 1552513123, "last_edit_date": 1556799489, "question_id": 55151606, "link": "https://stackoverflow.com/questions/55151606/how-do-i-turn-off-default-header-styles", "title": "How do I turn off Default header styles?", "body": "<p>I'm trying to migrate some code from Python 2.7 to 3.6</p>\n\n<p>I noticed that some (not all) of my excel formatting doesn't work when running my code using a Python 3.6 virtualenv.</p>\n\n<p>Specifically, this format is acting strangely:</p>\n\n<pre><code>format1 = workbook.add_format({\n    'bold': True, \n    'font_color': 'white',\n    'bg_color':'#004C99',\n    'align':'center','valign':'vcenter',\n    'text_wrap':'True','border':1\n    })\n\nworksheet.set_row(0,30,format1)\n</code></pre>\n\n<p>When ran in Python 2.7, the output looks like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/1E7nD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1E7nD.png\" alt=\"enter image description here\"></a></p>\n\n<p>When ran in Python 3.6 using a virtualenv, the output look like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/GiCFg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GiCFg.png\" alt=\"enter image description here\"></a></p>\n\n<p>It looks like what's causing this is Pandas 0.24 header default styles. My previous line to set the default style to none are as follows:</p>\n\n<pre><code>import pandas.io.formats.excel\npandas.io.formats.excel.header_style = None\n</code></pre>\n\n<p>I'm not sure how to accomplish this same thing in Pandas 0.24</p>\n\n<p>What do you guys think?</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 4, "creation_date": 1552513167, "post_id": 55151593, "comment_id": 97043605, "body": "<code>df_loan_tape[&#39;Trade&#39;] = np.where(df_loan_tape[&#39;QTY&#39;] &gt; 0, &#39;Buy_Code&#39;, &#39;Sell_Code&#39;)</code>. Don&#39;t iterate the rows for a simple binary choice, this is vectorized and much faster"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 1, "creation_date": 1552513279, "post_id": 55151593, "comment_id": 97043647, "body": "<code>apply</code> works row-wise in a Python loop (hence being slower) but without the explicit <code>for</code> loop syntax. Here you&#39;re <code>apply</code>ing a function that <i>itself</i> then iterates through the rows. That&#39;s a double iteration of the array."}, {"owner": {"reputation": 37, "user_id": 11162667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c59b9553e504147ff9667f4e881790c1?s=128&d=identicon&r=PG&f=1", "display_name": "jrass", "link": "https://stackoverflow.com/users/11162667/jrass"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1552513851, "post_id": 55151593, "comment_id": 97043863, "body": "Thanks this worked well"}], "owner": {"reputation": 37, "user_id": 11162667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c59b9553e504147ff9667f4e881790c1?s=128&d=identicon&r=PG&f=1", "display_name": "jrass", "link": "https://stackoverflow.com/users/11162667/jrass"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1552513022, "creation_date": 1552513022, "question_id": 55151593, "link": "https://stackoverflow.com/questions/55151593/using-a-function-with-apply-python", "title": "Using a function with apply Python", "body": "<p>I have a column within my dataframe that I want to analyze and return a specific value to a new column called \"Trade\". Data in the column being analyzed looks like this:</p>\n\n<pre><code> QTY \n (1.00)\n1,418,999.89 \n 328,536.93 \n-100\n</code></pre>\n\n<p>If the value in the quantity column in greater than 0 I want to return \"Buy_Code\", if not, return \"Sell_Code\"</p>\n\n<p>I tried to create a function to loop through the dataframe and then use that function within apply but it's not working right. I know there is a ton of info out there on this topic, but I am struggling to grasp how this should be written. Thanks for the help</p>\n\n<pre><code>def trade_type():\nfor index,row in df_loan_tape.iterrows():\n    if row['QTY'] &gt; 0:\n        df_loan_tape['Trade'] = 'Buy_Code'\n    else:\n        df_loan_tape['Trade'] = 'Sell_Code'\n\ndf_loan_tape['Trade'] = df_loan_tape['QTY'].apply(trade_type)\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "selenium", "chromium-tabs"], "comments": [{"owner": {"reputation": 1472, "user_id": 3007613, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/ItK90.png?s=128&g=1", "display_name": "prithajnath", "link": "https://stackoverflow.com/users/3007613/prithajnath"}, "edited": false, "score": 0, "creation_date": 1552513902, "post_id": 55151578, "comment_id": 97043886, "body": "Can you show what you have tried so far?"}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1552513916, "post_id": 55151578, "comment_id": 97043889, "body": "Are you asking about automating chrome with selenium? If so, you should probably add the <code>selenium</code> tag."}, {"owner": {"reputation": 9, "user_id": 11193320, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Heu8zDbVIwk/AAAAAAAAAAI/AAAAAAAABaM/b0z6J5VQJWs/photo.jpg?sz=128", "display_name": "Felipe", "link": "https://stackoverflow.com/users/11193320/felipe"}, "edited": false, "score": 0, "creation_date": 1552514262, "post_id": 55151578, "comment_id": 97044019, "body": "I tried to run Selenium, but I can&#39;t find the driver from Chromium. On Firefox SER I couldn&#39;t make it work neater, even with the Firefox driver."}, {"owner": {"reputation": 9, "user_id": 11193320, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Heu8zDbVIwk/AAAAAAAAAAI/AAAAAAAABaM/b0z6J5VQJWs/photo.jpg?sz=128", "display_name": "Felipe", "link": "https://stackoverflow.com/users/11193320/felipe"}, "edited": false, "score": 0, "creation_date": 1552514358, "post_id": 55151578, "comment_id": 97044053, "body": "That&#39;s why I am looking for an alternative way"}, {"owner": {"reputation": 18006, "user_id": 2386774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea7da142cb7e85d5d5a8576e2625431?s=128&d=identicon&r=PG", "display_name": "JeffC", "link": "https://stackoverflow.com/users/2386774/jeffc"}, "edited": false, "score": 0, "creation_date": 1552528750, "post_id": 55151578, "comment_id": 97047900, "body": "Welcome to Stack Overflow! See: <a href=\"https://meta.stackoverflow.com/questions/253069/whats-the-appropriate-new-current-close-reason-for-how-do-i-do-x\">How do I do X?</a> The expectation on SO is that the user asking a question not only does research to answer their own question but also shares that research, code attempts, and results. This demonstrates that you\u2019ve taken the time to try to help yourself, it saves us from reiterating obvious answers, and most of all it helps you get a more specific and relevant answer! See also: <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>"}, {"owner": {"reputation": 12118, "user_id": 4714829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1b66c22707be26afda19fe995e17ea?s=128&d=identicon&r=PG&f=1", "display_name": "supputuri", "link": "https://stackoverflow.com/users/4714829/supputuri"}, "edited": false, "score": 0, "creation_date": 1552533720, "post_id": 55151578, "comment_id": 97048952, "body": "@Felipe if you are asking how to switch between different windows, then please refer to my response <a href=\"https://stackoverflow.com/questions/55153468/cant-open-a-new-firefox-tab-with-python-and-selenium\">here</a>"}, {"owner": {"reputation": 9, "user_id": 11193320, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Heu8zDbVIwk/AAAAAAAAAAI/AAAAAAAABaM/b0z6J5VQJWs/photo.jpg?sz=128", "display_name": "Felipe", "link": "https://stackoverflow.com/users/11193320/felipe"}, "reply_to_user": {"reputation": 18006, "user_id": 2386774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea7da142cb7e85d5d5a8576e2625431?s=128&d=identicon&r=PG", "display_name": "JeffC", "link": "https://stackoverflow.com/users/2386774/jeffc"}, "edited": false, "score": 0, "creation_date": 1552559596, "post_id": 55151578, "comment_id": 97059565, "body": "Ok. @JeffC I will try to reformulate the question. Sorry"}], "owner": {"reputation": 9, "user_id": 11193320, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Heu8zDbVIwk/AAAAAAAAAAI/AAAAAAAABaM/b0z6J5VQJWs/photo.jpg?sz=128", "display_name": "Felipe", "link": "https://stackoverflow.com/users/11193320/felipe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "closed_date": 1552552207, "answer_count": 0, "score": 0, "last_activity_date": 1552519268, "creation_date": 1552512970, "last_edit_date": 1552518730, "question_id": 55151578, "link": "https://stackoverflow.com/questions/55151578/how-can-i-manage-browser-tabs-with-python", "closed_reason": "Duplicate", "title": "How can I manage browser tabs with Python?", "body": "<p>I've some tabs open in Chromium and I need them to take focus in order. Is there any way to do it in Python? The script will run in a Raspberry Pi and Selenium it's not working. \nI tried to run Selenium, but I can't find the driver from Chromium. On Firefox ESR I couldn't make it work neater, even with the Firefox driver. That's why I am looking for an alternative. \nHelp please! </p>\n"}, {"tags": ["python", "flask", "redis", "celery"], "answers": [{"comments": [{"owner": {"reputation": 169, "user_id": 10953921, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-o-RljwkJ3Yc/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPbsZrBYDWniiTuDsvEFRc8AwV9_g/mo/photo.jpg?sz=128", "display_name": "Panda", "link": "https://stackoverflow.com/users/10953921/panda"}, "edited": false, "score": 0, "creation_date": 1552782559, "post_id": 55156137, "comment_id": 97142610, "body": "Thanks, I ended up using Flower and it gave me majority of the information I needed."}], "tags": [], "owner": {"reputation": 8101, "user_id": 5832540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sy8es.jpg?s=128&g=1", "display_name": "Tom&#225;\u0161 Linhart", "link": "https://stackoverflow.com/users/5832540/tom%c3%a1%c5%a1-linhart"}, "is_accepted": false, "score": 1, "last_activity_date": 1552544555, "creation_date": 1552544555, "answer_id": 55156137, "question_id": 55151530, "link": "https://stackoverflow.com/questions/55151530/reading-redis-messages-submitted-by-celery/55156137#55156137", "title": "Reading Redis messages submitted by Celery", "body": "<p>There's a <a href=\"http://docs.celeryproject.org/en/latest/userguide/monitoring.html#redis\" rel=\"nofollow noreferrer\">chapter</a> in Celery Monitoring and Management Guide about Redis as a broker. You can use <code>redis-cli</code> to inspect the queues and read the messages. Or, you can use <a href=\"http://docs.celeryproject.org/en/latest/userguide/monitoring.html#flower-real-time-celery-web-monitor\" rel=\"nofollow noreferrer\">Flower</a> as a higher-level tool for monitoring.</p>\n"}], "owner": {"reputation": 169, "user_id": 10953921, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-o-RljwkJ3Yc/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPbsZrBYDWniiTuDsvEFRc8AwV9_g/mo/photo.jpg?sz=128", "display_name": "Panda", "link": "https://stackoverflow.com/users/10953921/panda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 235, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1552544555, "creation_date": 1552512717, "question_id": 55151530, "link": "https://stackoverflow.com/questions/55151530/reading-redis-messages-submitted-by-celery", "title": "Reading Redis messages submitted by Celery", "body": "<p>I've just started using Celery in a Flask App with a Redis broker and backend. The Redis instance is on AWS. How can I read the messages sent by my app to redis and then received by the celery workers?</p>\n\n<p>Even though i've got it working - i'm not super comfortable with what's really going on. Where can i read more about how the message is published to redis, and how the celery workers read the messages.</p>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "edited": false, "score": 0, "creation_date": 1552514114, "post_id": 55151526, "comment_id": 97043956, "body": "What are you actually trying to do? <code>np.where()</code> <i>does</i> sort the elements, by row, then column. So, I&#39;m not sure what the goal here is. Edit: ah, wait so you want to order by the template matching image <i>values</i>. Is that correct? My original question still stands on <i>why</i> you&#39;d want to do this as this seems extremely slow for no reason. Do you actually need <i>every</i> pixel? Or just some subset?"}, {"owner": {"reputation": 9914, "user_id": 2463948, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/7910cce4e4104e1db9b42e54381ebd62?s=128&d=identicon&r=PG", "display_name": "Flash Thunder", "link": "https://stackoverflow.com/users/2463948/flash-thunder"}, "reply_to_user": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "edited": false, "score": 0, "creation_date": 1552515020, "post_id": 55151526, "comment_id": 97044279, "body": "That doesn&#39;t seem to work slow. I need a subset of found values greater than threshold. Then sort them by value. Then iterate through it. I&#39;m not really the best in Python :("}, {"owner": {"reputation": 3274, "user_id": 8561957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cabfd05dd1bbfeeb280df76df374948?s=128&d=identicon&r=PG&f=1", "display_name": "fountainhead", "link": "https://stackoverflow.com/users/8561957/fountainhead"}, "edited": false, "score": 0, "creation_date": 1552515051, "post_id": 55151526, "comment_id": 97044293, "body": "(a)Is <code>found</code> a 2d array of bools ? (b) By <code>found[x][y]</code>, do you actually mean <code>found[x,y]</code>? <b>(c)</b> What do you mean by &quot;lowest to highest value in <code>found[x][y]</code>, especially if <code>found</code> has only bools?"}, {"owner": {"reputation": 9914, "user_id": 2463948, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/7910cce4e4104e1db9b42e54381ebd62?s=128&d=identicon&r=PG", "display_name": "Flash Thunder", "link": "https://stackoverflow.com/users/2463948/flash-thunder"}, "edited": false, "score": 0, "creation_date": 1552515160, "post_id": 55151526, "comment_id": 97044344, "body": "<code>found[x][y]</code> has value, that can be a bigint, from <code>cv2.matchTemplate()</code>"}, {"owner": {"reputation": 3274, "user_id": 8561957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cabfd05dd1bbfeeb280df76df374948?s=128&d=identicon&r=PG&f=1", "display_name": "fountainhead", "link": "https://stackoverflow.com/users/8561957/fountainhead"}, "edited": false, "score": 0, "creation_date": 1552515895, "post_id": 55151526, "comment_id": 97044577, "body": "Your &quot;EDIT to be clear&quot; seems to make it even less clear. It introduces <code>loc</code>, and your statement of requirement doesn&#39;t mention <code>loc</code> at all"}, {"owner": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "edited": false, "score": 0, "creation_date": 1552515924, "post_id": 55151526, "comment_id": 97044586, "body": "And what are you doing with the sorted values? The reason I&#39;m asking is there may be a better way to achieve what you want without sorting said values and using some functions directly."}, {"owner": {"reputation": 9914, "user_id": 2463948, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/7910cce4e4104e1db9b42e54381ebd62?s=128&d=identicon&r=PG", "display_name": "Flash Thunder", "link": "https://stackoverflow.com/users/2463948/flash-thunder"}, "edited": false, "score": 0, "creation_date": 1552515928, "post_id": 55151526, "comment_id": 97044587, "body": "<code>loc</code> is only a selected threshold above some value"}, {"owner": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "edited": false, "score": 0, "creation_date": 1552515979, "post_id": 55151526, "comment_id": 97044609, "body": "Also, what should the sort order be if there&#39;s a tie? Does it matter?"}, {"owner": {"reputation": 9914, "user_id": 2463948, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/7910cce4e4104e1db9b42e54381ebd62?s=128&d=identicon&r=PG", "display_name": "Flash Thunder", "link": "https://stackoverflow.com/users/2463948/flash-thunder"}, "reply_to_user": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "edited": false, "score": 0, "creation_date": 1552516000, "post_id": 55151526, "comment_id": 97044614, "body": "@AlexanderReynolds I need to mark found patters on the image, but so they wouldn&#39;t cross eachother, so want to start drawing from the most accurate one. Sort order doesn&#39;t matter. I added <code>-</code> to value so it would sort the right way."}, {"owner": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "edited": false, "score": 0, "creation_date": 1552516102, "post_id": 55151526, "comment_id": 97044655, "body": "You said you wanted it sorted min to max, but you want it the other way IIUC. The best matches first."}, {"owner": {"reputation": 9914, "user_id": 2463948, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/7910cce4e4104e1db9b42e54381ebd62?s=128&d=identicon&r=PG", "display_name": "Flash Thunder", "link": "https://stackoverflow.com/users/2463948/flash-thunder"}, "reply_to_user": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "edited": false, "score": 0, "creation_date": 1552516163, "post_id": 55151526, "comment_id": 97044683, "body": "@AlexanderReynolds yes, that&#39;s why <code>found[y][x] = -res[y][x]</code> &lt;--- negative, so would order from lowest to highest still be fine"}], "answers": [{"comments": [{"owner": {"reputation": 9914, "user_id": 2463948, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/7910cce4e4104e1db9b42e54381ebd62?s=128&d=identicon&r=PG", "display_name": "Flash Thunder", "link": "https://stackoverflow.com/users/2463948/flash-thunder"}, "edited": false, "score": 0, "creation_date": 1552515300, "post_id": 55151945, "comment_id": 97044382, "body": "I edited my question to point out what is <code>found</code>, I still need the iteration code, as I iterate through <code>found2</code>, not <code>found</code>, but maybe I understand it wrong"}, {"owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "reply_to_user": {"reputation": 9914, "user_id": 2463948, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/7910cce4e4104e1db9b42e54381ebd62?s=128&d=identicon&r=PG", "display_name": "Flash Thunder", "link": "https://stackoverflow.com/users/2463948/flash-thunder"}, "edited": false, "score": 0, "creation_date": 1552515783, "post_id": 55151945, "comment_id": 97044544, "body": "@FlashThunder <code>(y, x)</code> is the same as <code>found2</code> only reordered. You can assign it back <code>found2 = y, x</code> and use your loop unchanged."}, {"owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "reply_to_user": {"reputation": 9914, "user_id": 2463948, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/7910cce4e4104e1db9b42e54381ebd62?s=128&d=identicon&r=PG", "display_name": "Flash Thunder", "link": "https://stackoverflow.com/users/2463948/flash-thunder"}, "edited": false, "score": 0, "creation_date": 1552516388, "post_id": 55151945, "comment_id": 97044756, "body": "@FlashThunder Sorry, I don&#39;t understand the question. Once you have defined <code>found2</code> in your code you insert the line starting with <code>order =</code> and the next line and the line I wrote in my last comment <code>found2 = y, x</code> and that should be all you need to do."}], "tags": [], "owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "is_accepted": true, "score": 1, "last_activity_date": 1552515119, "creation_date": 1552515119, "answer_id": 55151945, "question_id": 55151526, "link": "https://stackoverflow.com/questions/55151526/sort-array-of-points-in-numpy/55151945#55151945", "title": "Sort array of points in numpy", "body": "<p>Not sure I understand you correctly, but do you want something like:</p>\n\n<pre><code>found = np.random.randint(0, 10, (3, 4))\nfound2 = np.where(found)\nfound\n# array([[5, 6, 8, 6],\n#        [0, 7, 7, 3],\n#        [7, 6, 0, 5]])\nfound2\n# (array([0, 0, 0, 0, 1, 1, 1, 2, 2, 2]), array([0, 1, 2, 3, 1, 2, 3, 0, 1, 3]))\n\norder = found[found2].argsort()\nx, y = found2[1][order], found2[0][order]\nfound[y, x]\n# array([3, 5, 5, 6, 6, 6, 7, 7, 7, 8])\n</code></pre>\n\n<p>This sorts the 2d indices in <code>found2</code> by the values at the points in <code>found</code> they reference.</p>\n"}, {"comments": [{"owner": {"reputation": 9914, "user_id": 2463948, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/7910cce4e4104e1db9b42e54381ebd62?s=128&d=identicon&r=PG", "display_name": "Flash Thunder", "link": "https://stackoverflow.com/users/2463948/flash-thunder"}, "edited": false, "score": 0, "creation_date": 1560384576, "post_id": 55152325, "comment_id": 99722255, "body": "thanx! that explained a lot"}], "tags": [], "owner": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "is_accepted": false, "score": 2, "last_activity_date": 1552518127, "last_edit_date": 1552518127, "creation_date": 1552517504, "answer_id": 55152325, "question_id": 55151526, "link": "https://stackoverflow.com/questions/55151526/sort-array-of-points-in-numpy/55152325#55152325", "title": "Sort array of points in numpy", "body": "<pre class=\"lang-py prettyprint-override\"><code>res = cv2.matchTemplate(img_gray, tmpl, cv2.TM_CCOEFF)\ncount = np.sum(res &gt; 230000)\ny, x = np.unravel_index((-res).argsort(None), res.shape)\nfor row, col in zip(y[:count], x[:count]):\n    print(res[row, col], (row, col))\n</code></pre>\n\n<hr>\n\n<p>Explanation for each line:</p>\n\n<pre><code>count = np.sum(res &gt; 230000)\n</code></pre>\n\n<p>gets the total number of values you want to iterate over.</p>\n\n<pre><code>y, x = np.unravel_index((-res).argsort(None), res.shape)\n</code></pre>\n\n<p>Here, <code>argsort(None)</code> will return the linear indices into the array which sorts it. We want the (row, column) indices though, not linear ones, so we use <code>np.unravel_index()</code> to get 2d indices out. Using the negative of the result to sort from max to min, like you did in the OP.</p>\n\n<p>Then finally, we can iterate through the points:</p>\n\n<pre><code>for row, col in zip(y[:count], x[:count]):\n    print(res[row, col], (row, col))\n</code></pre>\n\n<p>Printing is just to show indeed we are getting the highest values first, and showing the (row, column) index for those corresponding values.</p>\n\n<hr>\n\n<p>Example:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>&gt;&gt;&gt; import cv2\n&gt;&gt;&gt; import numpy as np\n&gt;&gt;&gt; img = np.uint8(255*np.random.rand(100, 100))\n&gt;&gt;&gt; tmp = np.uint8(255*np.random.rand(10, 10))\n&gt;&gt;&gt; res = cv2.matchTemplate(img, tmp, cv2.TM_CCOEFF)\n&gt;&gt;&gt; count = np.sum(res &gt; 100000)\n&gt;&gt;&gt; y, x = np.unravel_index((-res).argsort(None), res.shape)\n&gt;&gt;&gt; for row, col in zip(y[:count], x[:count]):\n&gt;&gt;&gt;     print(res[row, col], (row, col))\n206337.11 (19, 12)\n177079.31 (76, 9)\n173258.67 (63, 15)\n...\n100202.44 (56, 1)\n100098.41 (0, 48)\n100089.09 (68, 47)\n</code></pre>\n\n<hr>\n\n<p>Note that these final values are in (row, column) order, that is, opposite from (x, y) point order, so feel free to swap as needed.</p>\n"}, {"comments": [{"owner": {"reputation": 9914, "user_id": 2463948, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/7910cce4e4104e1db9b42e54381ebd62?s=128&d=identicon&r=PG", "display_name": "Flash Thunder", "link": "https://stackoverflow.com/users/2463948/flash-thunder"}, "edited": false, "score": 0, "creation_date": 1560384545, "post_id": 55152349, "comment_id": 99722250, "body": "sorry for not accepting that, but I can&#39;t accept two answers, was a nice answer tho&#39;! thank you!"}], "tags": [], "owner": {"reputation": 3274, "user_id": 8561957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cabfd05dd1bbfeeb280df76df374948?s=128&d=identicon&r=PG&f=1", "display_name": "fountainhead", "link": "https://stackoverflow.com/users/8561957/fountainhead"}, "is_accepted": false, "score": 1, "last_activity_date": 1552520790, "last_edit_date": 1552520790, "creation_date": 1552517652, "answer_id": 55152349, "question_id": 55151526, "link": "https://stackoverflow.com/questions/55151526/sort-array-of-points-in-numpy/55152349#55152349", "title": "Sort array of points in numpy", "body": "<p><strong>Solution:</strong></p>\n\n<pre><code>sorted_pts = sorted(zip(*loc), key=lambda t:res[t])\nprint (sorted_pts)\n</code></pre>\n\n<p><strong>Try it out with sample data:</strong></p>\n\n<p>Let's take some sample data on a smaller scale (taking <code>res</code> as just a shape <code>(3,4)</code> array, and <code>4</code> as the <code>threshold</code>):</p>\n\n<pre><code>import numpy as np\n\nres = np.arange(12).reshape(3,4)\nprint (res)\n\nloc = np.where(res &gt; 4)  # Dummy threshold == 4\n\nsorted_pts = sorted(zip(*loc), key=lambda t:res[t[0],t[1]])\nprint (sorted_pts)\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>[[ 0  1  2  3]   # res\n [ 4  5  6  7]\n [ 8  9 10 11]]\n# sorted_pts\n[(1, 1), (2, 1), (3, 1), (0, 2), (1, 2), (2, 2), (3, 2)]\n</code></pre>\n\n<p><strong>Note:</strong>\n(Verifying that the points are sorted according to the values in <code>res</code>)</p>\n\n<pre><code>[(1, 1), (2, 1), (3, 1), (0, 2), (1, 2), (2, 2), (3, 2)]\n   |       |       |        |       |       |       |\n   |       |       |        |       |       |       |\n   V       V       V        V       V       V       V\n   5       6       7        8       9       10      11\n</code></pre>\n"}], "owner": {"reputation": 9914, "user_id": 2463948, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/7910cce4e4104e1db9b42e54381ebd62?s=128&d=identicon&r=PG", "display_name": "Flash Thunder", "link": "https://stackoverflow.com/users/2463948/flash-thunder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 345, "favorite_count": 0, "accepted_answer_id": 55151945, "answer_count": 3, "score": 0, "last_activity_date": 1552520790, "creation_date": 1552512711, "last_edit_date": 1552515259, "question_id": 55151526, "link": "https://stackoverflow.com/questions/55151526/sort-array-of-points-in-numpy", "title": "Sort array of points in numpy", "body": "<p>I got an array of points declared like this:</p>\n\n<pre><code>found = np.empty(img_rgb.shape[:2])\n</code></pre>\n\n<p>It represents values from OpenCV template matching.\nAs I kept only the points that had desired values from the matching, I've rewritten it before iterating:</p>\n\n<pre><code>found2 = np.where(found)\n</code></pre>\n\n<p>Now I iterate through it like this:</p>\n\n<pre><code>for pt in zip(*found2[::-1]):\n    (x, y) = pt\n</code></pre>\n\n<p>But how do I sort it so it would iterate from the lowest to highest value in <code>found[x][y]</code> array?</p>\n\n<p>I tried <code>np.argsort()</code> but doesn't seem to keep a proper x,y indexes. In fact it doesn't sort by values at all I guess.</p>\n\n<p>EDIT: To be clear:</p>\n\n<pre><code>img_rgb = cv2.imread(os.path.join(DATA_DIR, 'some.png'))\n\n(...)\n\nres = cv2.matchTemplate(img_gray, tmpl, cv2.TM_CCOEFF)\nloc = np.where(res &gt; 230000)\nfor pt in zip(*loc[::-1]):\n   (x, y) = pt\n   found[y][x] = -res[y][x]\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "windows", "python-2.7", "cmd"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 2, "creation_date": 1552512661, "post_id": 55151495, "comment_id": 97043350, "body": "It would be better to not open the window in the first place: <a href=\"https://stackoverflow.com/questions/9705982/pythonw-exe-or-python-exe\" title=\"pythonw exe or python exe\">stackoverflow.com/questions/9705982/pythonw-exe-or-python-ex&zwnj;&#8203;e</a>"}, {"owner": {"reputation": 186, "user_id": 11047851, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/43f607b763e211a8674c232e03b56400?s=128&d=identicon&r=PG", "display_name": "Noodles", "link": "https://stackoverflow.com/users/11047851/noodles"}, "edited": false, "score": 0, "creation_date": 1552512747, "post_id": 55151495, "comment_id": 97043390, "body": "You need to take over the default control handlers. In VB you would write function and use <code>AddressOf</code> to pass it to Windows. <a href=\"https://docs.microsoft.com/en-us/windows/console/console-control-handlers\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/windows/console/&hellip;</a>"}, {"owner": {"reputation": 21, "user_id": 11199715, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-yygZCYLsWDQ/AAAAAAAAAAI/AAAAAAAAAME/nqVR6jbT64s/photo.jpg?sz=128", "display_name": "hazem gamal", "link": "https://stackoverflow.com/users/11199715/hazem-gamal"}, "edited": false, "score": 0, "creation_date": 1552512866, "post_id": 55151495, "comment_id": 97043457, "body": "unfortunately, I need to open the window"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1552513329, "post_id": 55151495, "comment_id": 97043667, "body": "open a custom wx or QT console you&#39;re writing into, and disable the close gadget."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 11199738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/H0Fjv.jpg?s=128&g=1", "display_name": "shroud", "link": "https://stackoverflow.com/users/11199738/shroud"}, "is_accepted": false, "score": 0, "last_activity_date": 1552513072, "creation_date": 1552513072, "answer_id": 55151598, "question_id": 55151495, "link": "https://stackoverflow.com/questions/55151495/how-can-i-prevent-the-user-from-closing-my-cmd-window-in-a-python-script-on-wind/55151598#55151598", "title": "how can i prevent the user from closing my cmd window in a python script on windows", "body": "<p>I dont think its possible, what you can do instead is to not display the cmd window (backgroundworker) and make it into a hidden process with system rights so that it cant be shutdown until it finishes.</p>\n"}], "owner": {"reputation": 21, "user_id": 11199715, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-yygZCYLsWDQ/AAAAAAAAAAI/AAAAAAAAAME/nqVR6jbT64s/photo.jpg?sz=128", "display_name": "hazem gamal", "link": "https://stackoverflow.com/users/11199715/hazem-gamal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 189, "favorite_count": 0, "closed_date": 1552587395, "answer_count": 1, "score": 2, "last_activity_date": 1552513072, "creation_date": 1552512545, "question_id": 55151495, "link": "https://stackoverflow.com/questions/55151495/how-can-i-prevent-the-user-from-closing-my-cmd-window-in-a-python-script-on-wind", "closed_reason": "Not suitable for this site", "title": "how can i prevent the user from closing my cmd window in a python script on windows", "body": "<p>is there any way to prevent the user from closing the cmd window of a python script on windows or maybe just disable the (X) close button ?? I have looked for answers already but i couldn't find anything that would help me </p>\n"}, {"tags": ["python", "selenium", "safari", "circleci", "safaridriver"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 11199408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/879913cb41ec2d79668b918cf834a1f8?s=128&d=identicon&r=PG", "display_name": "Snatcher", "link": "https://stackoverflow.com/users/11199408/snatcher"}, "is_accepted": false, "score": 0, "last_activity_date": 1563809032, "creation_date": 1563809032, "answer_id": 57149152, "question_id": 55151456, "link": "https://stackoverflow.com/questions/55151456/webdriverexception-usr-bin-safaridriver-unexpectedly-exited-error-when-running/57149152#57149152", "title": "WebDriverException: /usr/bin/safaridriver unexpectedly exited error when running in CircleCI container", "body": "<p>Seems that Safari can't be triggered remotely directly with pytest command. I solved this building and executing a mac app with pytest command inside.</p>\n"}], "owner": {"reputation": 1, "user_id": 11199408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/879913cb41ec2d79668b918cf834a1f8?s=128&d=identicon&r=PG", "display_name": "Snatcher", "link": "https://stackoverflow.com/users/11199408/snatcher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 437, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1563809032, "creation_date": 1552512332, "last_edit_date": 1552578870, "question_id": 55151456, "link": "https://stackoverflow.com/questions/55151456/webdriverexception-usr-bin-safaridriver-unexpectedly-exited-error-when-running", "title": "WebDriverException: /usr/bin/safaridriver unexpectedly exited error when running in CircleCI container", "body": "<p>I'm using Selenium + Python 2.7 to run automated tests in CircleCI without any problem but when I try to run them using Safari browser I get following error and tests inmediately exit:</p>\n\n<pre><code>WebDriverException: Message: Service /usr/bin/safaridriver unexpectedly exited. Status code was: 1\n</code></pre>\n\n<p>These are the commands I'm sending to the build:</p>\n\n<pre><code>xcodebuild -version\npip install -U selenium\npip install --upgrade pip\npip install -U webium\npip install pytest==4.0.2\npip install -U pytest-allure-adaptor\npip install pytest-html\npip install pyperclip==1.5.27\npip install seleniumwrapper\npip install pycrypto\npip install requests\nbrew install pigz\npython -c \"import selenium; print(selenium.__version__)\"\nbrew install qatools/formulas/allure-commandline\nsudo /usr/bin/safaridriver --enable\n</code></pre>\n\n<p>Apparently build is ok, issue is with safaridriver. I've read many similar posts here and in other forums but didn't find proper solution to this specific issue. Also safaridriver error seems pretty common for many situations that's why I'm raising my particular case with CircleCI.</p>\n\n<p>Notes: I don't have a mac, circleci container runs in an actual mac with Safari installed (that's what I was told), so I can't make any manual step before launching tests.</p>\n\n<p>Container build uses:\nPython 2.7.15; \nSafari 12; \nSelenium 3.14</p>\n\n<p>Any help will be very much appreciated!</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 1097, "user_id": 9703830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d48ed2a2cf0e75c7355e044c71385202?s=128&d=identicon&r=PG&f=1", "display_name": "dedObed", "link": "https://stackoverflow.com/users/9703830/dedobed"}, "edited": false, "score": 1, "creation_date": 1552512485, "post_id": 55151442, "comment_id": 97043267, "body": "Depends on what you actually in the triangular matrix, but a simple <code>A = A.T</code> might do ;-)"}], "answers": [{"tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 0, "last_activity_date": 1552519693, "creation_date": 1552519693, "answer_id": 55152671, "question_id": 55151442, "link": "https://stackoverflow.com/questions/55151442/upper-triangular-matrix-code-to-lower-triangular/55152671#55152671", "title": "Upper triangular matrix code to lower triangular", "body": "<p>Yes, you can alter the given code.  Think of the mathematical underpinnings of this.  What defines \"upper triangular\"?  The critical property is that for every non-zero entry <code>A[i, j]</code>, you have <code>i &lt;= j</code>.</p>\n\n<p>To make this generate a lower triangle, you need to invert that logic, such that you're working with <code>i &gt;= j</code>.  Try switching your indices into <code>A</code>; where does that get you?</p>\n\n<p>Try writing that alteration.  <em>That</em> is the effort we would like to see as you next question posted.  Better yet, <em>not</em> see it posted, because you get it working without needing us.</p>\n"}], "owner": {"reputation": 27, "user_id": 11041569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e670a0fe6d0fa39f7ca9a0163fe1303c?s=128&d=identicon&r=PG&f=1", "display_name": "m0729", "link": "https://stackoverflow.com/users/11041569/m0729"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1552519693, "creation_date": 1552512252, "question_id": 55151442, "link": "https://stackoverflow.com/questions/55151442/upper-triangular-matrix-code-to-lower-triangular", "title": "Upper triangular matrix code to lower triangular", "body": "<p>I have a piece of code as follows to create an upper triangular matrix from a random N by N matrix for a given value of N and was just wondering if I could make changes to the ranges etc to allow it to give a lower triangular matrix or if I would just have to write a new piece of code altogether?</p>\n\n<pre><code>N = 3\nA = np.random.rand(N, N)\nfor row in range(0, N-1):\n    for i in range(row+1, n):\n        factor = A[i, row] / A[row, row]\n        for j in range(row, n):\n            A[i, j] = A[i, j] - factor * A[row, j]\nprint(A)\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "csv", "dictionary"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1552512448, "post_id": 55151434, "comment_id": 97043250, "body": "What was your attempt? Where did it go wrong?"}], "answers": [{"tags": [], "owner": {"reputation": 5277, "user_id": 2237916, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/074db60f1ec6161c996e9c08bf71f5bd?s=128&d=identicon&r=PG", "display_name": "silgon", "link": "https://stackoverflow.com/users/2237916/silgon"}, "is_accepted": false, "score": 0, "last_activity_date": 1552512916, "creation_date": 1552512916, "answer_id": 55151568, "question_id": 55151434, "link": "https://stackoverflow.com/questions/55151434/how-do-i-write-this-dictionary-of-lists-to-a-csv-file-in-this-format/55151568#55151568", "title": "How do I write this dictionary of lists to a csv file in this format", "body": "<pre><code>import csv\nstudents = {\"Ola\":[\"elizabethy\",\"beale/cambray\",\"st_hildas\"],\"Evie\":[\"st_hildas\",\"beale/cambray\",\"elizabethn\"],\"Lorna\":[\"beale/cambray\",\"elizabethn\",\"st_hildas\"],\"Morgan\":[\"st_hildas\",\"beale/cambray\",\"elizabethy\"],\"Ola1\":[\"beale/cambray\",\"elizabethn\",\"st_hildas\"],\"Lorna1\":[\"elizabethn\",\"beale/cambray\",\"st_hildas\"],\"Lorna2\":[\"beale/cambray\",\"elizabethn\",\"st_hildas\"],\"Evie1\":[\"st_hildas\",\"beale/cambray\",\"elizabethy\"],\"Evie3\":[\"st_hildas\",\"beale/cambray\",\"elizabethn\"]}\nmylist=[[k]+v for k,v in students.items()]\nwith open(\"mylist.csv\", 'w', newline='') as myfile:\n     wr = csv.writer(myfile, quoting=csv.QUOTE_ALL)\n     wr.writerows(mylist)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 976, "user_id": 2582369, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00c0ec1428066e55e4aa47ff975b33f3?s=128&d=identicon&r=PG", "display_name": "Renuka Deshmukh", "link": "https://stackoverflow.com/users/2582369/renuka-deshmukh"}, "reply_to_user": {"reputation": 2600, "user_id": 6914989, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fm2Ar.png?s=128&g=1", "display_name": "FabienP", "link": "https://stackoverflow.com/users/6914989/fabienp"}, "edited": false, "score": 0, "creation_date": 1552513630, "post_id": 55151587, "comment_id": 97043763, "body": "Updated the answer. Thank you!"}, {"owner": {"reputation": 421, "user_id": 10230584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8ac3ce03b4ba4932283af6255b4e6f2?s=128&d=identicon&r=PG&f=1", "display_name": "casualcoder", "link": "https://stackoverflow.com/users/10230584/casualcoder"}, "edited": false, "score": 0, "creation_date": 1552560647, "post_id": 55151587, "comment_id": 97060231, "body": "@RenukaDeshmukh How would I read the csv file back into the dictionary in the same format it left?"}], "tags": [], "owner": {"reputation": 976, "user_id": 2582369, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00c0ec1428066e55e4aa47ff975b33f3?s=128&d=identicon&r=PG", "display_name": "Renuka Deshmukh", "link": "https://stackoverflow.com/users/2582369/renuka-deshmukh"}, "is_accepted": false, "score": 0, "last_activity_date": 1552587059, "last_edit_date": 1552587059, "creation_date": 1552513008, "answer_id": 55151587, "question_id": 55151434, "link": "https://stackoverflow.com/questions/55151434/how-do-i-write-this-dictionary-of-lists-to-a-csv-file-in-this-format/55151587#55151587", "title": "How do I write this dictionary of lists to a csv file in this format", "body": "<p>To write to CSV (without importing any libraries)</p>\n\n<pre><code>students = {\n    \"Ola\":[\"elizabethy\",\"beale/cambray\",\"st_hildas\"],\n    \"Evie\":[\"st_hildas\",\"beale/cambray\",\"elizabethn\"],\n    \"Lorna\":[\"beale/cambray\",\"elizabethn\",\"st_hildas\"],\n    \"Morgan\":[\"st_hildas\",\"beale/cambray\",\"elizabethy\"],\n    \"Ola1\":[\"beale/cambray\",\"elizabethn\",\"st_hildas\"],\n    \"Lorna1\":[\"elizabethn\",\"beale/cambray\",\"st_hildas\"],\n    \"Lorna2\":[\"beale/cambray\",\"elizabethn\",\"st_hildas\"],\n    \"Evie1\":[\"st_hildas\",\"beale/cambray\",\"elizabethy\"],\n    \"Evie3\":[\"st_hildas\",\"beale/cambray\",\"elizabethn\"]}\n\nwith open('test.csv', 'w') as f:\n    for key in students.keys():\n        f.write(\"%s, %s\\n\"%(key,','.join(students[key])))\n</code></pre>\n\n<p>To read the CSV back into a dictionary:</p>\n\n<pre><code>students1 = dict()\nwith open('test.csv', 'r') as f:\n    for line in f:\n       key, value = line.strip().split(', ')\n       students1[key] = value.split(',')\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 421, "user_id": 10230584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8ac3ce03b4ba4932283af6255b4e6f2?s=128&d=identicon&r=PG&f=1", "display_name": "casualcoder", "link": "https://stackoverflow.com/users/10230584/casualcoder"}, "edited": false, "score": 0, "creation_date": 1552514223, "post_id": 55151609, "comment_id": 97044003, "body": "thank you this worked as well but gave me:&quot;0,1,2&quot; at the beginning"}, {"owner": {"reputation": 12519, "user_id": 423926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65539c07af4918433a89bcb298d75ca7?s=128&d=identicon&r=PG", "display_name": "mujjiga", "link": "https://stackoverflow.com/users/423926/mujjiga"}, "reply_to_user": {"reputation": 421, "user_id": 10230584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8ac3ce03b4ba4932283af6255b4e6f2?s=128&d=identicon&r=PG&f=1", "display_name": "casualcoder", "link": "https://stackoverflow.com/users/10230584/casualcoder"}, "edited": false, "score": 0, "creation_date": 1552514445, "post_id": 55151609, "comment_id": 97044097, "body": "@casualcoder use  <code>df.T.to_csv(&quot;test.csv&quot;, header=False)</code> to avoid the header (0,1,2)"}], "tags": [], "owner": {"reputation": 12519, "user_id": 423926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65539c07af4918433a89bcb298d75ca7?s=128&d=identicon&r=PG", "display_name": "mujjiga", "link": "https://stackoverflow.com/users/423926/mujjiga"}, "is_accepted": true, "score": 0, "last_activity_date": 1552513151, "creation_date": 1552513151, "answer_id": 55151609, "question_id": 55151434, "link": "https://stackoverflow.com/questions/55151434/how-do-i-write-this-dictionary-of-lists-to-a-csv-file-in-this-format/55151609#55151609", "title": "How do I write this dictionary of lists to a csv file in this format", "body": "<pre><code>import pandas as pd\nd = {\"Ola\":[\"elizabethy\",\"beale/cambray\",\"st_hildas\"],\"Evie\":[\"st_hildas\",\"beale/cambray\",\"elizabethn\"],\"Lorna\":[\"beale/cambray\",\"elizabethn\",\"st_hildas\"],\"Morgan\":[\"st_hildas\",\"beale/cambray\",\"elizabethy\"],\"Ola1\":[\"beale/cambray\",\"elizabethn\",\"st_hildas\"],\"Lorna1\":[\"elizabethn\",\"beale/cambray\",\"st_hildas\"],\"Lorna2\":[\"beale/cambray\",\"elizabethn\",\"st_hildas\"],\"Evie1\":[\"st_hildas\",\"beale/cambray\",\"elizabethy\"],\"Evie3\":[\"st_hildas\",\"beale/cambray\",\"elizabethn\"]}\n\ndf = pd.DataFrame.from_dict(d)\ndf.T.to_csv(\"test.csv\")\n</code></pre>\n"}], "owner": {"reputation": 421, "user_id": 10230584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8ac3ce03b4ba4932283af6255b4e6f2?s=128&d=identicon&r=PG&f=1", "display_name": "casualcoder", "link": "https://stackoverflow.com/users/10230584/casualcoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 55151609, "answer_count": 3, "score": 0, "last_activity_date": 1552587059, "creation_date": 1552512216, "last_edit_date": 1552512419, "question_id": 55151434, "link": "https://stackoverflow.com/questions/55151434/how-do-i-write-this-dictionary-of-lists-to-a-csv-file-in-this-format", "title": "How do I write this dictionary of lists to a csv file in this format", "body": "<p>I want to write this dictionary of lists to a csv file in this format using csv:</p>\n\n<pre><code>Ola, elizabethy, beale/cambray,st_hildas\nEvie, st_hildas,beale/cambray,elizabethn\nLorna,   beale/cambray,elizabethn,st_hildas\n</code></pre>\n\n<p>So that I can eventually write it to an excel file that appears like this:</p>\n\n<pre><code>Ola     elizabethy      beale/cambray    st_hildas\nEvie    st_hildas       beale/cambray    elizabethn\nLorna   beale/cambray   elizabethn       st_hildas\n</code></pre>\n\n<p>This is the way it looks in python.</p>\n\n<p><code>students = {\"Ola\":[\"elizabethy\",\"beale/cambray\",\"st_hildas\"],\"Evie\":[\"st_hildas\",\"beale/cambray\",\"elizabethn\"],\"Lorna\":[\"beale/cambray\",\"elizabethn\",\"st_hildas\"],\"Morgan\":[\"st_hildas\",\"beale/cambray\",\"elizabethy\"],\"Ola1\":[\"beale/cambray\",\"elizabethn\",\"st_hildas\"],\"Lorna1\":[\"elizabethn\",\"beale/cambray\",\"st_hildas\"],\"Lorna2\":[\"beale/cambray\",\"elizabethn\",\"st_hildas\"],\"Evie1\":[\"st_hildas\",\"beale/cambray\",\"elizabethy\"],\"Evie3\":[\"st_hildas\",\"beale/cambray\",\"elizabethn\"]}</code></p>\n"}, {"tags": ["python", "floating-point", "formatting", "jupyter-notebook", "ipython"], "owner": {"reputation": 1402, "user_id": 3210223, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/dacab77bed270628bc48c279474b41fb?s=128&d=identicon&r=PG&f=1", "display_name": "0x539", "link": "https://stackoverflow.com/users/3210223/0x539"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1552512104, "creation_date": 1552512104, "question_id": 55151401, "link": "https://stackoverflow.com/questions/55151401/control-when-ipython-jupyter-switches-to-exponential-notation-for-floating-point", "title": "Control when IPython/Jupyter switches to exponential notation for floating point numbers", "body": "<p>Sometimes the result of some calculation in IPython is some hard to read floating point number like <code>436132624031153.8</code>. I absolutely don't mind the 16 significant digits, my problem is that its very hard to see the order of magnitude of this number in one glance you need to count the number digits before the decimal point.</p>\n\n<p>I would prefer if IPython would switch to exponent notation for numbers larger than, let's say 10^7, but without showing fewer significant digits (like this: <code>4.361326240311538e14</code>. Alternatively something like grouping leading digits into groups of 3 with something like spaces (like this: <code>436 132 624 031 153.8</code>) could help too.</p>\n\n<p>Is there any way to achieve this in IPython (7.3) / Jupyter notebooks?</p>\n\n<p>I know about IPython's <code>%format</code> which lets you specify an old-style <code>%</code>-format string for formatting floating point output, but as far as I can see none of the possibilities does what I want.</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 3, "last_activity_date": 1552512404, "creation_date": 1552512404, "answer_id": 55151473, "question_id": 55151365, "link": "https://stackoverflow.com/questions/55151365/pandas-selecting-a-subset-of-rows-before-a-certain-value-occurs-in-another-colum/55151473#55151473", "title": "Pandas selecting a subset of rows before a certain value occurs in another column", "body": "<p>You can use <code>groupby</code> and <code>apply</code> with the <code>cumsum()</code>x2 trick:</p>\n\n<pre><code>df[df.groupby('X').Y.apply(lambda x: x.cumsum().cumsum()).le(1)]\n\n       X  Y   Z\nindex          \n0      A  0  56\n1      A  0  67\n2      A  1  66\n5      B  0  52\n6      B  1  66\n8      C  0  68\n9      C  0  72\n10     D  1  65\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1552513359, "post_id": 55151579, "comment_id": 97043675, "body": "Nice one! Works well when the index is numeric."}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 1, "creation_date": 1552513439, "post_id": 55151579, "comment_id": 97043699, "body": "@coldspeed yep , just about to mention that , also need unique index,"}], "tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": false, "score": 1, "last_activity_date": 1552512972, "creation_date": 1552512972, "answer_id": 55151579, "question_id": 55151365, "link": "https://stackoverflow.com/questions/55151365/pandas-selecting-a-subset-of-rows-before-a-certain-value-occurs-in-another-colum/55151579#55151579", "title": "Pandas selecting a subset of rows before a certain value occurs in another column", "body": "<p>Think in the different way <code>idxmax</code></p>\n\n<pre><code>df[df.index&lt;=df.groupby('X').Y.transform('idxmax')]\nOut[110]: \n       X  Y   Z\nindex          \n0      A  0  56\n1      A  0  67\n2      A  1  66\n5      B  0  52\n6      B  1  66\n8      C  0  68\n10     D  1  65\n</code></pre>\n"}], "owner": {"reputation": 229, "user_id": 4620853, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/df1886d1f1dcbd21188b322d8ac9307b?s=128&d=identicon&r=PG&f=1", "display_name": "Caesium95", "link": "https://stackoverflow.com/users/4620853/caesium95"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 55151473, "answer_count": 2, "score": 2, "last_activity_date": 1552512972, "creation_date": 1552511914, "question_id": 55151365, "link": "https://stackoverflow.com/questions/55151365/pandas-selecting-a-subset-of-rows-before-a-certain-value-occurs-in-another-colum", "title": "Pandas selecting a subset of rows before a certain value occurs in another column", "body": "<p>I want to extract a subset of rows from my data frame before a value occurs in column Y, groupby column X.</p>\n\n<p>For example, in this case, for each unique value in X, I want to extract all the rows before '1' occurs in Y, and the output should include the row where the first '1' encountered.</p>\n\n<pre><code>          X      Y      Z\n index \n 0        A      0     56\n 1        A      0     67\n 2        A      1     66\n 3        A      0     83\n 4        A      1     88\n 5        B      0     52\n 6        B      1     66\n 7        B      1     70\n 8        C      0     68\n 9        C      0     72\n 10       D      1     65\n</code></pre>\n\n<p>And my desired output is:</p>\n\n<pre><code>          X      Y      Z\n index \n 0        A      0     56\n 1        A      0     67\n 2        A      1     66\n 5        B      0     52\n 6        B      1     66\n 8        C      0     68\n 9        C      0     72\n 10       D      1     65\n</code></pre>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["python", "keras", "theano"], "comments": [{"owner": {"reputation": 2600, "user_id": 6914989, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fm2Ar.png?s=128&g=1", "display_name": "FabienP", "link": "https://stackoverflow.com/users/6914989/fabienp"}, "edited": false, "score": 0, "creation_date": 1552513919, "post_id": 55151323, "comment_id": 97043890, "body": "Try using <code>conda</code>, it will be way simpler. Start by installing <a href=\"https://docs.conda.io/en/latest/miniconda.html\" rel=\"nofollow noreferrer\">miniconda</a>."}, {"owner": {"reputation": 96, "user_id": 8063334, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7f16296c6796713ddae458bdc5c21c4?s=128&d=identicon&r=PG&f=1", "display_name": "Amit JS", "link": "https://stackoverflow.com/users/8063334/amit-js"}, "reply_to_user": {"reputation": 2600, "user_id": 6914989, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fm2Ar.png?s=128&g=1", "display_name": "FabienP", "link": "https://stackoverflow.com/users/6914989/fabienp"}, "edited": false, "score": 0, "creation_date": 1552557422, "post_id": 55151323, "comment_id": 97058174, "body": "&quot;Kereas version 0.1.0&quot; is not  in the installation list.                                                                I got this when tried with conda install-&gt;PackagesNotFoundError: The following packages are not available from current channels:"}], "owner": {"reputation": 96, "user_id": 8063334, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7f16296c6796713ddae458bdc5c21c4?s=128&d=identicon&r=PG&f=1", "display_name": "Amit JS", "link": "https://stackoverflow.com/users/8063334/amit-js"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 97, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1552542666, "creation_date": 1552511698, "last_edit_date": 1552542666, "question_id": 55151323, "link": "https://stackoverflow.com/questions/55151323/how-do-i-install-keras-version-0-1-0-with-theano-as-the-backend-on-ubuntu-in-20", "title": "How do I install Keras version 0.1.0 with Theano as the backend on Ubuntu (in 2019)?", "body": "<p>I tried with:</p>\n\n<pre><code>pip install -i https://test.pypi.org/simple/ Keras==0.1.0\n</code></pre>\n\n<p>But I'm getting error:</p>\n\n<pre><code>Looking in indexes: https://test.pypi.org/simple/\nCollecting Keras==0.1.0\n  Using cached https://test-files.pythonhosted.org/packages/c4/08/7f1c6bfaa86e69ccadadc552d6309f1685d779a93047d0a7c317b26a321e/Keras-0.1.0.tar.gz\n    Complete output from command python setup.py egg_info:\n    Traceback (most recent call last):\n      File \"&lt;string&gt;\", line 1, in &lt;module&gt;\n      File \"/tmp/pip-install-O0DpNQ/Keras/setup.py\", line 7, in &lt;module&gt;\n        long_description = open('README.md').read(),\n    IOError: [Errno 2] No such file or directory: 'README.md'\n\n   Command \"python setup.py egg_info\" failed with error code 1 in /tmp/pip-install-O0DpNQ/Keras/\n</code></pre>\n"}, {"tags": ["python", "pycharm"], "comments": [{"owner": {"reputation": 12197, "user_id": 4390160, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-ZHp9yDMYiGI/AAAAAAAAAAI/AAAAAAAAEsg/B9aVO59CDXU/photo.jpg?sz=128", "display_name": "Grismar", "link": "https://stackoverflow.com/users/4390160/grismar"}, "edited": false, "score": 0, "creation_date": 1552519169, "post_id": 55151319, "comment_id": 97045558, "body": "Does this happen for any new project you create, or just this one? Have you tried creating a new virtual environment and using that for a project?"}, {"owner": {"reputation": 2366, "user_id": 1112406, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/abd557d2593a8fa81511a817b83c8f4b?s=128&d=identicon&r=PG", "display_name": "RussAbbott", "link": "https://stackoverflow.com/users/1112406/russabbott"}, "reply_to_user": {"reputation": 12197, "user_id": 4390160, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-ZHp9yDMYiGI/AAAAAAAAAAI/AAAAAAAAEsg/B9aVO59CDXU/photo.jpg?sz=128", "display_name": "Grismar", "link": "https://stackoverflow.com/users/4390160/grismar"}, "edited": false, "score": 0, "creation_date": 1552622651, "post_id": 55151319, "comment_id": 97089472, "body": "That did it! I created a new project and the problem didn&#39;t re-appear. Thanks!"}, {"owner": {"reputation": 5827, "user_id": 2235698, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a6ccf1c11e604279c6cfafd490b724f2?s=128&d=identicon&r=PG", "display_name": "user2235698", "link": "https://stackoverflow.com/users/2235698/user2235698"}, "edited": false, "score": 0, "creation_date": 1552659756, "post_id": 55151319, "comment_id": 97107306, "body": "Please check that interpreters specified in <code>Run Configuration</code> and <code>File - Settings - Project Interpreter</code> are the same"}], "answers": [{"tags": [], "owner": {"reputation": 12197, "user_id": 4390160, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-ZHp9yDMYiGI/AAAAAAAAAAI/AAAAAAAAEsg/B9aVO59CDXU/photo.jpg?sz=128", "display_name": "Grismar", "link": "https://stackoverflow.com/users/4390160/grismar"}, "is_accepted": false, "score": 0, "last_activity_date": 1552865477, "creation_date": 1552865477, "answer_id": 55212974, "question_id": 55151319, "link": "https://stackoverflow.com/questions/55151319/standard-python-names-are-flagged-as-unresolved-in-pycharm-but-the-program-runs/55212974#55212974", "title": "Standard Python names are flagged as unresolved in PyCharm, but the program runs successfully", "body": "<p>When your program runs without error, but PyCharm is indicating that it doesn't know some of the modules and functions you're using, odds are that PyCharm isn't looking at the same environment that your script will have access to at runtime.</p>\n\n<p>There's a number of reasons why this situation can occur, but generally the best solution is one of these:</p>\n\n<ul>\n<li>If you typically like for your scripts to run in the global environment (the default), make sure the interpreter for the project is set to be the copy of Python you want to use. Check <code>File - Settings - Project Interpreter</code>.</li>\n<li>If you prefer your scripts to run in a separate environment, either shared among your PyCharm projects, or even one per project, create a new virtual environment for your project, install the modules and packages you need in it and assign it to your project.  Same location in the menus, but instead of selecting the existing environment, create a new one (note the little cog-icon next to the selection combo in the selection dialog), by selecting <code>Add...</code>.</li>\n</ul>\n"}], "owner": {"reputation": 2366, "user_id": 1112406, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/abd557d2593a8fa81511a817b83c8f4b?s=128&d=identicon&r=PG", "display_name": "RussAbbott", "link": "https://stackoverflow.com/users/1112406/russabbott"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1556027560, "creation_date": 1552511684, "last_edit_date": 1552519082, "question_id": 55151319, "link": "https://stackoverflow.com/questions/55151319/standard-python-names-are-flagged-as-unresolved-in-pycharm-but-the-program-runs", "title": "Standard Python names are flagged as unresolved in PyCharm, but the program runs successfully", "body": "<p>Please see attached screenshots. </p>\n\n<p>PyCharm says that the red underscores indicate unresolved names. Yet, the program runs successfully and produces this output: <code>[0, 1, 4, 9, 16, 25], 15</code>.</p>\n\n<p>It seems that the names not flagged as unresolved are those defined in the script itself. The ones that are defined as errors are defined outside the script. Even <code>reduce</code> and <code>add</code> are flagged as errors when first mentioned, but are not flagged as errors when used.</p>\n\n<p><a href=\"https://i.stack.imgur.com/gL7AI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gL7AI.png\" alt=\"Screenshot of code with error markings\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/Nv2z2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Nv2z2.png\" alt=\"Configuration\"></a> </p>\n"}, {"tags": ["python", "string", "list", "named-entity-recognition", "ner"], "comments": [{"owner": {"reputation": 3298, "user_id": 8928024, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/75f4b1f5d87975964979ce2718af1ae9?s=128&d=identicon&r=PG&f=1", "display_name": "ZF007", "link": "https://stackoverflow.com/users/8928024/zf007"}, "edited": false, "score": 0, "creation_date": 1552515887, "post_id": 55151240, "comment_id": 97044575, "body": "Is &quot;listOfNEsAndTags &quot; how you obtain your text in the first place? Its not clear from how you have written your question."}, {"owner": {"reputation": 13, "user_id": 11199472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5504b1453007c03f7e12e79109cd6dae?s=128&d=identicon&r=PG&f=1", "display_name": "pannetje", "link": "https://stackoverflow.com/users/11199472/pannetje"}, "reply_to_user": {"reputation": 3298, "user_id": 8928024, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/75f4b1f5d87975964979ce2718af1ae9?s=128&d=identicon&r=PG&f=1", "display_name": "ZF007", "link": "https://stackoverflow.com/users/8928024/zf007"}, "edited": false, "score": 0, "creation_date": 1552561634, "post_id": 55151240, "comment_id": 97060869, "body": "I added a bit of information on how I got the text."}, {"owner": {"reputation": 616, "user_id": 8005143, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c7663462a2ff4344b2715e808f088c2b?s=128&d=identicon&r=PG&f=1", "display_name": "Kevinj22", "link": "https://stackoverflow.com/users/8005143/kevinj22"}, "edited": false, "score": 0, "creation_date": 1552561893, "post_id": 55151240, "comment_id": 97061025, "body": "I think your missing a bracket for your regex grouping."}, {"owner": {"reputation": 13, "user_id": 11199472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5504b1453007c03f7e12e79109cd6dae?s=128&d=identicon&r=PG&f=1", "display_name": "pannetje", "link": "https://stackoverflow.com/users/11199472/pannetje"}, "edited": false, "score": 0, "creation_date": 1552562014, "post_id": 55151240, "comment_id": 97061111, "body": "Thank you, fixed it. Made a mistake with copy-pasting my code."}, {"owner": {"reputation": 616, "user_id": 8005143, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c7663462a2ff4344b2715e808f088c2b?s=128&d=identicon&r=PG&f=1", "display_name": "Kevinj22", "link": "https://stackoverflow.com/users/8005143/kevinj22"}, "edited": false, "score": 0, "creation_date": 1552562169, "post_id": 55151240, "comment_id": 97061209, "body": "Are you the one who formatted listOfNEsAndTags? It might be easier to use a dictionary (hash table) to map each named entity to it&#39;s type."}, {"owner": {"reputation": 3298, "user_id": 8928024, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/75f4b1f5d87975964979ce2718af1ae9?s=128&d=identicon&r=PG&f=1", "display_name": "ZF007", "link": "https://stackoverflow.com/users/8928024/zf007"}, "edited": false, "score": 0, "creation_date": 1552563307, "post_id": 55151240, "comment_id": 97061919, "body": "If I boil it down to its core you&#39;re asking how to write either a word discriminator (requires language recognition and sentence structure-analysis capabilities) that fits within <code>for line in wpl:          output.append(line + \u201d O&quot;) </code> or deep text extraction (this includes the Wikipedia referrals that fits at the <code>I get text through Wikipedia API and since links are placed between [[]] in the output</code> which is not provided with your above code, right?"}], "answers": [{"tags": [], "owner": {"reputation": 1281, "user_id": 4984282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1f908652b699b40d26e6829376cce8d?s=128&d=identicon&r=PG", "display_name": "TheOnlyError", "link": "https://stackoverflow.com/users/4984282/theonlyerror"}, "is_accepted": true, "score": 0, "last_activity_date": 1552575748, "creation_date": 1552575748, "answer_id": 55165818, "question_id": 55151240, "link": "https://stackoverflow.com/questions/55151240/text-to-word-per-line-named-entity-tag-in-python/55165818#55165818", "title": "Text to word per line + named entity tag in Python", "body": "<p>This could work, replacing the print with something else and refinement of the regex is needed, but it's a good start.</p>\n\n<pre><code>text = \"[[Hidden test Figures]] is, a 2016 [[American]] biographical drama film directed by [[Theodore Melfi]] and written by [[Melfi]] and [[Allison Schroeder]].\"\n\ntags = {\"Hidden test Figures\": \"PRO\", \"American\": \"LOC\", 'Theodore Melfi': \"PER\", 'Melfi': \"PER\", 'Allison Schroeder': \"PER\"}\n\ntext = re.sub(r\"([?!,.]+)\", r\" \\1\", text)\n\nsearch = \"\"\ninTag = False\n\nfor w in text.split(\" \"):\n    outTag = False\n\n    rest = w\n\n    if rest[:2] == \"[[\":\n        rest = rest[2:]\n        inTag = True\n    if rest[-2:] == \"]]\":\n        rest = rest[:-2]\n        outTag = True\n\n    if inTag:\n        search += rest\n        if outTag:\n            val = tags[search]\n            for word in search.split():\n                print(word + \": \" + val)\n            inTag = False\n            search = \"\"\n        else:\n            search += \" \"\n    else:\n        print(rest + \": O\")\n</code></pre>\n\n<p>Input:</p>\n\n<pre><code>[[Hidden test Figures]] is, a 2016 [[American]] biographical drama film directed by [[Theodore Melfi]] and written by [[Melfi]] and [[Allison Schroeder]].\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Hidden: PRO\ntest: PRO\nFigures: PRO\nis: O\n,: O\na: O\n2016: O\nAmerican: LOC\nbiographical: O\ndrama: O\nfilm: O\ndirected: O\nby: O\nTheodore: PER\nMelfi: PER\nand: O\nwritten: O\nby: O\nMelfi: PER\nand: O\nAllison: PER\nSchroeder: PER\n.: O\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 11199472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5504b1453007c03f7e12e79109cd6dae?s=128&d=identicon&r=PG&f=1", "display_name": "pannetje", "link": "https://stackoverflow.com/users/11199472/pannetje"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 55165818, "answer_count": 1, "score": 1, "last_activity_date": 1553618216, "creation_date": 1552511326, "last_edit_date": 1553618216, "question_id": 55151240, "link": "https://stackoverflow.com/questions/55151240/text-to-word-per-line-named-entity-tag-in-python", "title": "Text to word per line + named entity tag in Python", "body": "<p>I\u2019m making a Named Entity Recognizer and I\u2019m struggling with putting data into the right format, using Python. What I have is a certain string and a list of the named entities in that text with belonging tags. For example:</p>\n\n<pre><code>text = \u201cHidden Figures is a 2016 American biographical drama film directed by Theodore Melfi and written by Melfi and Allison Schroeder.\u201d\n</code></pre>\n\n<p>This string can also be \u201c[[Hidden Figures]] is a 2016 [[American]] biographical drama film directed by [[Theodore Melfi]] and written by [[Melfi]] and [[Allison Schroeder]].\u201d if that makes it easier.<br></p>\n\n<pre><code>listOfNEsAndTags = [\u2018Hidden Figures PRO\u2019, 'American LOC\u2019, 'Theodore Melfi PER\u2019, 'Melfi PER\u2019, 'Allison Schroeder PER\u2019]\n</code></pre>\n\n<p>What I want as output is: </p>\n\n<pre><code>Hidden PRO\nFigures PRO\nis O\na O\n2016 O\nAmerican LOC\nbiographical O\ndrama O\nfilm O\ndirected O\nby O\nTheodore PER\nMelfi PER\nand O\nwritten O\nby O\nMelfi PER\nand O \nAllison PER\nSchroeder PER \n. O\n</code></pre>\n\n<p>So far I\u2019ve only gotten as far as the following function:</p>\n\n<pre><code>def wordPerLine(text, neplustags): \n    text = re.sub(r\"([?!,.]+)\", r\" \\1 \", text) \n    wpl = text.split() \n    output = [] \n    for line in wpl: \n        output.append(line + \u201d O\") \n    return output\n</code></pre>\n\n<p>Which gives every line the default tag O (which is the tag for non-named entities). How can I make it so that the named entities in the text get the right tag?</p>\n"}, {"tags": ["python", "pygame"], "comments": [{"owner": {"reputation": 3393, "user_id": 214143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61025b3df4700620a5d9099293f23a5d?s=128&d=identicon&r=PG", "display_name": "Jason Aller", "link": "https://stackoverflow.com/users/214143/jason-aller"}, "edited": false, "score": 0, "creation_date": 1552516148, "post_id": 55151206, "comment_id": 97044676, "body": "If when composing a question the editor provides feedback on requirements, please do not game the system to get around them. Those requirements are there to help you, not to make it more difficult to ask questions."}, {"owner": {"reputation": 74, "user_id": 11077513, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YOEEiSYXV4Q/AAAAAAAAAAI/AAAAAAAAAbo/Z0La5y_iH6c/photo.jpg?sz=128", "display_name": "clavlav12", "link": "https://stackoverflow.com/users/11077513/clavlav12"}, "reply_to_user": {"reputation": 3393, "user_id": 214143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61025b3df4700620a5d9099293f23a5d?s=128&d=identicon&r=PG", "display_name": "Jason Aller", "link": "https://stackoverflow.com/users/214143/jason-aller"}, "edited": false, "score": 0, "creation_date": 1552541948, "post_id": 55151206, "comment_id": 97050879, "body": "Ok. Can you help me?"}], "owner": {"reputation": 74, "user_id": 11077513, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YOEEiSYXV4Q/AAAAAAAAAAI/AAAAAAAAAbo/Z0La5y_iH6c/photo.jpg?sz=128", "display_name": "clavlav12", "link": "https://stackoverflow.com/users/11077513/clavlav12"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "closed_date": 1609082518, "answer_count": 0, "score": 1, "last_activity_date": 1609082555, "creation_date": 1552511203, "last_edit_date": 1552525896, "question_id": 55151206, "link": "https://stackoverflow.com/questions/55151206/jumping-creates-a-distance-between-man-and-the-floor-pygame", "closed_reason": "Duplicate", "title": "Jumping creates a distance between man and the floor Pygame", "body": "<p>The full code:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import glob\nimport pygame\nimport os\nos.environ['SDL_VIDEO_WINDOW_POS'] = \"%d,%d\" % (100, 40)\n\nclass Man(pygame.sprite.Sprite):\n    # just taking random image to get height and width after trans scale to be able to crop later (see lines 23/36)\n    idle_images_list = glob.glob(r\"C:\\Users\\aviro\\Desktop\\\u05de\u05d7\u05e9\u05d1\u05d9\u05dd\\python projects\\platform game\\animation\\fighter\\PNG\\PNG Sequences\\Firing\"+'\\*')\n    random_image = pygame.image.load(idle_images_list[0])\n    new_img_width = int(random_image.get_width()/2.5)\n    new_img_height = int(random_image.get_height()/2.5)\n    random_image_after_crop = random_image.subsurface((70, 35, new_img_width-125, new_img_height-45))\n    # to be able to use needed images indexes\n\n    # getting idle animations list\n    right_idle_list = []\n    left_idle_list = []\n    for images in idle_images_list:\n        img = pygame.image.load(images)\n        wid = img.get_width()\n        hei = img.get_height()\n        img = pygame.transform.scale(img, (int(wid/2.5), int(hei/2.5)))\n        img = img.subsurface((70, 35, new_img_width-125, new_img_height-45))\n        right_idle_list.append(img)\n        left_idle_list.append(pygame.transform.flip(img, True, False))\n\n    # getting movement animations list\n    walk_animation_list = glob.glob(r\"C:\\Users\\aviro\\Desktop\\\u05de\u05d7\u05e9\u05d1\u05d9\u05dd\\python projects\\platform game\\animation\\fighter\\PNG\\PNG Sequences\\Run Firing\"+'\\*')\n    walk_right_list = []\n    walk_left_list = []\n    for files in walk_animation_list:                          # setting the animation list\n        img = pygame.image.load(files)\n        wid = img.get_width()\n        hei = img.get_height()\n        img = pygame.transform.scale(img, (int(wid/2.5), int(hei/2.5)))     # chaging scale\n        img = img.subsurface((70, 35, new_img_width-125, new_img_height-45))\n        walk_right_list.append(img)\n        walk_left_list.append(pygame.transform.flip(img, True, False)) # mirror list\n\n    def __init__(self, x, y,):\n        super(Man, self).__init__()\n        self.walk_left_list = Man.walk_left_list\n        self.walk_right_list = Man.walk_right_list\n        self.width = Man.new_img_width\n        self.height = Man.new_img_height\n        self.hitbox = (x+55, y+35, self.width-125, self.height-45) # nothing special on those num, just Trial and error\n        self.rect = Man.random_image_after_crop.get_rect()\n        self.rect.x = x\n        self.rect.y = y\n\ndef game_redraw():   # print things in end for main loop\n    global right\n    global left\n    screen.blit(bg_image, (0, 0))\n    if right:\n        screen.blit(man.walk_right_list[frame_count//3], (man.rect.x, man.rect.y))\n    elif left:\n        screen.blit(man.walk_left_list[frame_count//3], (man.rect.x, man.rect.y))\n    else:\n        if last_action == \"right\":\n            screen.blit(man.right_idle_list[frame_count//13], (man.rect.x, man.rect.y))\n        if last_action == \"left\":\n            screen.blit(man.left_idle_list[frame_count//13], (man.rect.x, man.rect.y))\n        else:                                                                   # just for the first move\n            screen.blit(man.right_idle_list[frame_count//13], (man.rect.x, man.rect.y))\n    pygame.draw.rect(screen, RED, man.rect, 4)\n    pygame.display.flip()\n    right = False\n    left = False\n\ndef input_process(key):\n    global right\n    global left\n    global last_action\n    global man\n    global frame_count\n    global is_jump\n    global neg\n    global jump_count\n    #\n    if is_jump:\n        if jump_count &gt;= -10: # check if jumping\n            if jump_count &lt; 0:\n                neg = -1\n            man.rect.y -= (jump_count ** 2) * neg * 0.5\n            jump_count -= 1\n        else:\n            neg = 1\n            is_jump = False\n    #\n    if key[pygame.K_RIGHT] and man.rect.right + speed &lt; w:\n        if left:\n            frame_count = 0\n        right = True\n        left = False\n        last_action = \"right\"\n        man.rect.x += speed\n    #\n    if key[pygame.K_LEFT] and man.rect.left + speed &gt; 0:\n        if right:\n            frame_count = 0\n        right = False\n        left = True\n        last_action = \"left\"\n        man.rect.x -= speed\n    #\n    if not is_jump:\n        if key[pygame.K_UP]:\n            jump_count = 10\n            is_jump = True\n\nw = 1728\nh = 972\npygame.init()\nRED = (255, 0, 0)\nimages_folder = r'C:\\Users\\aviro\\Desktop\\\u05de\u05d7\u05e9\u05d1\u05d9\u05dd\\python projects\\platform game\\images'+'\\\\'\nbg_image = images_folder+\"background.png\"  # setting background image\nground_height = h-143    # the high of the image ground\nman = Man(200, ground_height)\nman.rect.bottom = ground_height\nclock = pygame.time.Clock()\nRefresh_Rate = 54\nspeed = 5\nright = False\nleft = False\nframe_count = 0\nfinish = False\nlast_action = \"\"\n# jumping ver\nis_jump = False\njump_count = 10\nneg = 1\n#\nscreen = pygame.display.set_mode((w, h))\nbg_image = pygame.image.load(bg_image).convert()    # can do convert only after setting surface.\n# main loop\nwhile not finish:\n    if frame_count &gt;= 51:\n        frame_count = 0\n    for events in pygame.event.get():\n        if events.type == pygame.QUIT:\n            finish = True\n    key = pygame.key.get_pressed()\n    input_process(key)\n    game_redraw()\n    frame_count += 1\n    clock.tick(Refresh_Rate)\n</code></pre>\n\n<p>I'm trying to create a simple shooting-platform game, using pygame module. Everything works fine except the jumping. See in line 88. The player is jumping like an x^2 parabola. I added the *0.5 at the end of the line to make the player jump slower and lower, but when I do it this is what happened. </p>\n\n<p>Before jumping:</p>\n\n<p><a href=\"https://i.stack.imgur.com/W2pxd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/W2pxd.png\" alt=\"enter image description here\"></a></p>\n\n<p>After jumping:</p>\n\n<p><a href=\"https://i.stack.imgur.com/aNVLE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/aNVLE.png\" alt=\"enter image description here\"></a></p>\n\n<p>Look in the second picture. There's a distance between the floor and the player. When I remove the *0.5 everything works fine. Why?</p>\n"}, {"tags": ["python", "class", "user-interface", "tkinter", "widget"], "comments": [{"owner": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "edited": false, "score": 1, "creation_date": 1552512226, "post_id": 55151133, "comment_id": 97043161, "body": "The exact error means that the &quot;self&quot; parameter isn&#39;t being passed to the <code>buttonLayout</code> function -- which happens implicitly when you call an instance method from an object.  Is <code>buttonLayout</code> supposed to be an instance method or static method?  It&#39;s defined as instance method but being called as a static method.  You should create an instance of <code>myButton</code> class and invoke the <code>buttonLayout</code> function from the instance."}, {"owner": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "edited": false, "score": 0, "creation_date": 1552512340, "post_id": 55151133, "comment_id": 97043204, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/625083/python-init-and-self-what-do-they-do\">Python __init__ and self what do they do?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 3670, "user_id": 7857466, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7OW0s.png?s=128&g=1", "display_name": "progmatico", "link": "https://stackoverflow.com/users/7857466/progmatico"}, "is_accepted": false, "score": 1, "last_activity_date": 1552513822, "last_edit_date": 1552513822, "creation_date": 1552512962, "answer_id": 55151576, "question_id": 55151133, "link": "https://stackoverflow.com/questions/55151133/create-a-class-for-tkinter-widgets-to-call-default-attributes/55151576#55151576", "title": "Create a class for tkinter widgets to call default attributes", "body": "<p>You get your error because of the <code>self</code>parameter.\nThere's also the problem of your code not creating an instance of the <code>MyButtons</code> class.</p>\n\n<p>Here is an example that inherits from <code>Button</code> and customizes <code>__init__</code> to setup some of your default values.</p>\n\n<pre><code>import tkinter\nimport tkinter.messagebox\n\nwindow = tkinter.Tk()    \n\n#create default values for buttons\n#frame and buttonText are the values passed to the class when making a new button\n\nclass MyButton(tkinter.Button):\n    def __init__(self, *args, **kwargs):\n        if not kwargs:\n            kwargs = dict()\n        kwargs['font'] = (\"Arial\", 16)\n        kwargs['width'] = 10,\n        kwargs['height'] = 10,\n        kwargs['fg'] = '#ffffff',\n        kwargs['bg'] = '#000000',\n        super().__init__(*args, **kwargs)\n\ntopFrame = tkinter.Frame(window)\ntopFrame.pack()\n\n#create new button here and place in the frame called topFrame with the text \"Cake\" on it\nbuttonCake = MyButton(topFrame, text=\"Cake\")\n#position the new button in a certain cell using grid in topFrame\nbuttonCake.grid(row=1, column=0)\n\nwindow.mainloop()\n</code></pre>\n\n<p>This forces your default values into the Button. You can add <code>if</code> statements to define them only if you don't pass them in the call by doing like this:</p>\n\n<pre><code>if not 'width' in kwargs:\n    kwargs['width'] = 10 \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 11199657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8212031a9aa88ba205ad560016833c6?s=128&d=identicon&r=PG&f=1", "display_name": "User54869", "link": "https://stackoverflow.com/users/11199657/user54869"}, "is_accepted": false, "score": 0, "last_activity_date": 1552513924, "creation_date": 1552513924, "answer_id": 55151739, "question_id": 55151133, "link": "https://stackoverflow.com/questions/55151133/create-a-class-for-tkinter-widgets-to-call-default-attributes/55151739#55151739", "title": "Create a class for tkinter widgets to call default attributes", "body": "<p>so I commented the code so you can learn a few things</p>\n\n<pre><code>from tkinter import * #in order not to have to writer \"tkinter.\" each time\n\nclass app: #we usually put the whole app in a class\n\n    def __init__(self,window): # so here you \"attach\" things to your instance represented by self\n        self.window=window\n        self.topFrame = Frame(window)\n        self.topFrame.pack()\n        self.ButtonList=[]  #because you wouldn't want to make 100 button with the same name\n\n    def buttonLayout(self, frame, buttonText): # here we create a method wich will be also \"attached\" to the instance\n\n        self.ButtonList.append(Button(frame, font=(\"Ariel\", 16),width=10, height=10, fg=\"#ffffff\", bg=\"#000000\", text=buttonText)) #adding a button to your list of buttons\n        self.lastButton=self.ButtonList[(len(self.ButtonList)-1)] #storing the last button to call grid outside the class\n\nwindow=Tk()\nanInstance=app(window)\nanInstance.buttonLayout(anInstance.topFrame, \"Cake\")\nanInstance.lastButton.grid(row=1,column=0)\nwindow.mainloop()\n</code></pre>\n\n<p>also if you do buttons you usually create them in <code>__init__</code> but you have there a nice buttonbuilder for your app, you can even make a Frame builder out of this.</p>\n"}, {"tags": [], "owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "is_accepted": true, "score": 0, "last_activity_date": 1552860557, "last_edit_date": 1552860557, "creation_date": 1552517635, "answer_id": 55152346, "question_id": 55151133, "link": "https://stackoverflow.com/questions/55151133/create-a-class-for-tkinter-widgets-to-call-default-attributes/55152346#55152346", "title": "Create a class for tkinter widgets to call default attributes", "body": "<p>You're not defining your class and using it correctly.<br>\nHere's a version with the corrections needed to make it work:</p>\n\n<pre><code>import tkinter\n\n\nclass MyButton:\n    \"\"\" Create Button with some default values. \"\"\"\n    def __init__(self, frame, buttonText):\n        self.newButton = tkinter.Button(frame, font=(\"Ariel\", 16),\n                                        width=10, height=10, fg='#ffffff',\n                                        bg='#000000', text=buttonText)\n\nwindow = tkinter.Tk()\ntopFrame = tkinter.Frame(window)\ntopFrame.pack()\n\n# Create new button here and place in the frame called topFrame with the text\n# \"Cake\" on it.\nbuttonCake = MyButton(topFrame, \"Cake\")\n\n# Position the new button in a certain cell in topFrame using grid().\nbuttonCake.newButton.grid(row=1, column=0)\n\nwindow.mainloop()\n</code></pre>\n\n<p><strong>Update</strong></p>\n\n<p>A more <a href=\"https://en.wikipedia.org/wiki/Object-oriented_programming\" rel=\"nofollow noreferrer\">object-oriented</a> approach would be be to derive your own <code>tkinter.Button</code> <a href=\"https://en.wikipedia.org/wiki/Inheritance_(object-oriented_programming)#Subclasses_and_superclasses\" rel=\"nofollow noreferrer\"><em>subclass</em></a> which would allow instances of it to be utilized exactly like those of the base class due to inheritance \u2014 i.e. so there would be no need to remember to reference its <code>newButton</code> attribute in the <code>grid()</code> call instead of the button itself, as would normally be required. </p>\n\n<p>The implementation shown below is also very flexible in the sense that you can easily override any of the defaults when creating one simply by supplying a different value for it via the usual associated keyword argument(s).</p>\n\n<pre><code>import tkinter\n\n\nclass MyButton(tkinter.Button):\n    \"\"\" Create Button with some default values. \"\"\"\n\n    # Default Button options (unless overridden).\n    defaults = dict(font=(\"Ariel\", 16), width=10, height=10,\n                    fg='#ffffff', bg='#000000')\n\n    def __init__(self, *args, **kwargs):\n        kwargs = dict(self.defaults, **kwargs)  # Allow defaults to be overridden.\n        super().__init__(*args, **kwargs)\n\n\nwindow = tkinter.Tk()\ntopFrame = tkinter.Frame(window)\ntopFrame.pack()\n\n# Create new button here and place in the frame called topFrame with the text\n# \"Cake\" on it.\nbuttonCake = MyButton(topFrame, text=\"Cake\")\n\n# Position the new button in a certain cell in topFrame using grid().\nbuttonCake.grid(row=1, column=0)\n\nwindow.mainloop()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 761, "user_id": 11211759, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-uirKHIF1DKc/AAAAAAAAAAI/AAAAAAAAACk/OnUrgiaW010/photo.jpg?sz=128", "display_name": "1966bc", "link": "https://stackoverflow.com/users/11211759/1966bc"}, "is_accepted": false, "score": 0, "last_activity_date": 1552856584, "creation_date": 1552856584, "answer_id": 55211907, "question_id": 55151133, "link": "https://stackoverflow.com/questions/55151133/create-a-class-for-tkinter-widgets-to-call-default-attributes/55211907#55211907", "title": "Create a class for tkinter widgets to call default attributes", "body": "<p>I'm use in my projects have a generic class, named Tools that have code like this</p>\n\n<pre><code>def get_button(self, container, text, row=None, col=None):\n\n    w = ttk.Button(container, text=text, underline=0)\n\n    if row is not None:\n        w.grid(row=row, column=col, sticky=tk.W+tk.E, padx=5, pady=5)\n    else:\n        w.pack(fill =tk.X, padx=5, pady=5)\n</code></pre>\n\n<p>calling as</p>\n\n<pre><code>    self.tools = Tools()\n\n    f = ttk.Frame()\n    bts = [('Reset', self.on_reset),\n           ('New', self.on_add),\n           ('Edit', self.on_edit),\n           ('Close', self.on_cancel)]\n\n    for btn in bts:\n        self.tools.get_button(f, btn[0] ).bind(\"&lt;Button-1&gt;\", btn[1])\n</code></pre>\n\n<p>you can easy expand this add style property.</p>\n"}], "owner": {"reputation": 29, "user_id": 11199415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bce8b99fd473033fbb03870c34d2c20?s=128&d=identicon&r=PG&f=1", "display_name": "SubwayToVenus22", "link": "https://stackoverflow.com/users/11199415/subwaytovenus22"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 171, "favorite_count": 0, "accepted_answer_id": 55152346, "answer_count": 4, "score": 1, "last_activity_date": 1552860557, "creation_date": 1552510908, "last_edit_date": 1552850170, "question_id": 55151133, "link": "https://stackoverflow.com/questions/55151133/create-a-class-for-tkinter-widgets-to-call-default-attributes", "title": "Create a class for tkinter widgets to call default attributes", "body": "<p>I'm trying to create a GUI using tkinter in Python3 which will have several buttons and I dont want to type the same attributes for all of them each time like this:</p>\n\n<pre><code>tkinter.Button(topFrame, font=(\"Ariel\", 16), width=10, height=10,\n               fg=\"#ffffff\", bg=\"#000000\", text=\"Cake\")\n</code></pre>\n\n<p>For example, <code>fg</code>, <code>bg</code> colour and <code>size</code> will all be the same on each button. The only things changing on each button will be the text and where on the screen to put them.</p>\n\n<p>I'm quite new to programming and Python and am trying to re-use code when I want to create a new button. I think I'm missing some understanding of classes which I'm not getting when I read up on it.</p>\n\n<p>I want to pass in different text for each button and a different frame in order to place it in a different location on the GUI and have everything else the same.</p>\n\n<p>My code so far:</p>\n\n<pre><code>import tkinter\nimport tkinter.messagebox\n\nwindow = tkinter.Tk()\n\n#create default values for buttons\n#frame and buttonText are the values passed to the class when making a new\n#button\nclass myButtons:\n     def buttonLayout(self, frame, buttonText):\n          self.newButton=tkinter.Button(frame, font=(\"Ariel\", 16),\n                                        width=10, height=10, fg=#ffffff,\n                                        bg=#000000, text=buttonText)\n\ntopFrame = tkinter.Frame(window)\ntopFrame.pack()\n\n#create new button here and place in the frame called topFrame with the text\n#\"Cake\" on it\nbuttonCake = myButtons.buttonLayout(topFrame, \"Cake\")\n#position the new button in a certain cell using grid in topFrame\nbuttonCake.grid(row=1, column=0)\n\nwindow.mainloop()\n</code></pre>\n\n<p>The error I get when I try to run it is:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>TypeError: buttonLayout() missing 1 required positional argument: 'buttonText'\n</code></pre>\n\n<p>I'm confused because I'm passing in <code>\"Cake\"</code> and the error says it's missing.</p>\n\n<p>Thank you for pointing out <strong>init</strong> I was not aware of how to use <strong>init</strong> for my problem, but that and the answers given here have helped. Thank you.</p>\n"}, {"tags": ["python", "google-app-engine", "google-cloud-platform", "gcloud"], "comments": [{"owner": {"reputation": 637, "user_id": 1532791, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5ec90903d94b483528e5f0caa63603d1?s=128&d=identicon&r=PG&f=1", "display_name": "Dewey", "link": "https://stackoverflow.com/users/1532791/dewey"}, "edited": false, "score": 1, "creation_date": 1552511126, "post_id": 55151062, "comment_id": 97042692, "body": "&quot;gcloud components restore&quot; got me running again but I&#39;m certain I can&#39;t live long that way so please tell me what to change"}, {"owner": {"reputation": 637, "user_id": 1532791, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5ec90903d94b483528e5f0caa63603d1?s=128&d=identicon&r=PG&f=1", "display_name": "Dewey", "link": "https://stackoverflow.com/users/1532791/dewey"}, "edited": false, "score": 0, "creation_date": 1552511289, "post_id": 55151062, "comment_id": 97042768, "body": "While I&#39;m at it, I should call your attention to a docs inconsistency ... most recent feedback on GCP groups &amp; other docs says to use virtualenv but the cloudendpoints/endpoints-python/ library specifically says you must use /lib vendoring"}, {"owner": {"reputation": 43265, "user_id": 8016720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bXsod.png?s=128&g=1", "display_name": "John Hanley", "link": "https://stackoverflow.com/users/8016720/john-hanley"}, "edited": false, "score": 0, "creation_date": 1552511900, "post_id": 55151062, "comment_id": 97043011, "body": "virtualenv is for running on your development machine."}, {"owner": {"reputation": 637, "user_id": 1532791, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5ec90903d94b483528e5f0caa63603d1?s=128&d=identicon&r=PG&f=1", "display_name": "Dewey", "link": "https://stackoverflow.com/users/1532791/dewey"}, "reply_to_user": {"reputation": 43265, "user_id": 8016720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bXsod.png?s=128&g=1", "display_name": "John Hanley", "link": "https://stackoverflow.com/users/8016720/john-hanley"}, "edited": false, "score": 0, "creation_date": 1552531676, "post_id": 55151062, "comment_id": 97048523, "body": "Thanks for the response.  Yes, I understand that venv is for local/dev use.   This problem IS happening on my local/dev environment.  So I&#39;m clearly not following your point?  Please clarify."}, {"owner": {"reputation": 43265, "user_id": 8016720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bXsod.png?s=128&g=1", "display_name": "John Hanley", "link": "https://stackoverflow.com/users/8016720/john-hanley"}, "edited": false, "score": 0, "creation_date": 1552532557, "post_id": 55151062, "comment_id": 97048711, "body": "You mentioned virtualenv and /lib in your comment. I was joint pointing out that virtualenv is for your development environment. /lib is in your deployment configuration file."}, {"owner": {"reputation": 637, "user_id": 1532791, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5ec90903d94b483528e5f0caa63603d1?s=128&d=identicon&r=PG&f=1", "display_name": "Dewey", "link": "https://stackoverflow.com/users/1532791/dewey"}, "reply_to_user": {"reputation": 43265, "user_id": 8016720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bXsod.png?s=128&g=1", "display_name": "John Hanley", "link": "https://stackoverflow.com/users/8016720/john-hanley"}, "edited": false, "score": 0, "creation_date": 1552541192, "post_id": 55151062, "comment_id": 97050651, "body": "Yes, I do understand all of that but as my comment says: endpoints-python/ library docs specifically says it is NOT COMPATIBLE with venv So I was pointing out that the general advice to use venv for local development may be inaccurate for people using that library  now that we&#39;ve cleared that up, do you have any tips for what broke i the latest GCloud??"}, {"owner": {"reputation": 512, "user_id": 4841805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0edd38c6b6e6c74f5ea09cc40754d0c8?s=128&d=identicon&r=PG&f=1", "display_name": "bscott", "link": "https://stackoverflow.com/users/4841805/bscott"}, "edited": false, "score": 0, "creation_date": 1552565554, "post_id": 55151062, "comment_id": 97063370, "body": "Also running into the same issue with my app trying to use the latest gcloud version (bumped)"}], "answers": [{"tags": [], "owner": {"reputation": 459, "user_id": 8210931, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207555656569550/picture?type=large", "display_name": "Enrique Del Valle", "link": "https://stackoverflow.com/users/8210931/enrique-del-valle"}, "is_accepted": false, "score": 0, "last_activity_date": 1556225119, "creation_date": 1556225119, "answer_id": 55857373, "question_id": 55151062, "link": "https://stackoverflow.com/questions/55151062/gcloud-update-broke-my-app-gcp-python-2-7/55857373#55857373", "title": "Gcloud update broke my app -- GCP Python 2.7", "body": "<p>reading you original questions,the first error indicates that the oauth2client.contrib.multistore_file module has been deprecated and is nos longer supported, so you have to replace it, in the link[1] you can find the reason why it has been deprecated and what is the replacement. </p>\n\n<p>[1]<a href=\"https://google-auth.readthedocs.io/en/latest/oauth2client-deprecation.html\" rel=\"nofollow noreferrer\">https://google-auth.readthedocs.io/en/latest/oauth2client-deprecation.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 2573001, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/410566806db90d07fd0bd1b563c4e3b3?s=128&d=identicon&r=PG", "display_name": "mr.radzio", "link": "https://stackoverflow.com/users/2573001/mr-radzio"}, "is_accepted": false, "score": 2, "last_activity_date": 1557386875, "creation_date": 1557386875, "answer_id": 56054248, "question_id": 55151062, "link": "https://stackoverflow.com/questions/55151062/gcloud-update-broke-my-app-gcp-python-2-7/56054248#56054248", "title": "Gcloud update broke my app -- GCP Python 2.7", "body": "<p>Google was notified about this case: <a href=\"https://issuetracker.google.com/issues/132240370\" rel=\"nofollow noreferrer\">https://issuetracker.google.com/issues/132240370</a> </p>\n\n<p>Please, star this issue if you also have this problem. </p>\n"}, {"tags": [], "owner": {"reputation": 1782, "user_id": 2035869, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0068be99f19b9c5737ff7cff6b5e0a03?s=128&d=identicon&r=PG", "display_name": "Codiak", "link": "https://stackoverflow.com/users/2035869/codiak"}, "is_accepted": false, "score": 0, "last_activity_date": 1562181900, "creation_date": 1562181900, "answer_id": 56876767, "question_id": 55151062, "link": "https://stackoverflow.com/questions/55151062/gcloud-update-broke-my-app-gcp-python-2-7/56876767#56876767", "title": "Gcloud update broke my app -- GCP Python 2.7", "body": "<p>This now appears to be fixed as of Google Cloud SDK 253.0.0.</p>\n\n<p>Run <code>gcloud components update</code> and you should be good to go!</p>\n"}], "owner": {"reputation": 637, "user_id": 1532791, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5ec90903d94b483528e5f0caa63603d1?s=128&d=identicon&r=PG&f=1", "display_name": "Dewey", "link": "https://stackoverflow.com/users/1532791/dewey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 458, "favorite_count": 3, "answer_count": 3, "score": 6, "last_activity_date": 1562181900, "creation_date": 1552510572, "last_edit_date": 1552609152, "question_id": 55151062, "link": "https://stackoverflow.com/questions/55151062/gcloud-update-broke-my-app-gcp-python-2-7", "title": "Gcloud update broke my app -- GCP Python 2.7", "body": "<p>I just upgraded GCloud and now I can't start my dev-env.</p>\n\n<p>gcloud --version</p>\n\n<ul>\n<li>Google Cloud SDK 238.0.0</li>\n<li>app-engine-go</li>\n<li>app-engine-python 1.9.84</li>\n<li>app-engine-python-extras 1.9.74 beta 2019.02.22</li>\n<li>bq 2.0.42</li>\n<li>cloud-datastore-emulator 2.1.0</li>\n<li>core 2019.03.08</li>\n<li>gsutil 4.37</li>\n</ul>\n\n<p>I don't understand these errors ... all feedback appreciated!</p>\n\n<pre><code>WARNING  2019-03-13 20:38:17,348 multistore_file.py:62] The oauth2client.contrib.multistore_file module has been deprecated and will be removed in the next release of oauth2client. Please migrate to multiprocess_file_storage.\nERROR    2019-03-13 20:38:17,586 wsgi.py:263] \nTraceback (most recent call last):\n  File \"/Users/dgaedcke/gcloud_tools/google-cloud-sdk/platform/google_appengine/google/appengine/runtime/wsgi.py\", line 240, in Handle\n    handler = _config_handle.add_wsgi_middleware(self._LoadHandler())\n  File \"/Users/dgaedcke/gcloud_tools/google-cloud-sdk/platform/google_appengine/google/appengine/runtime/wsgi.py\", line 299, in _LoadHandler\n    handler, path, err = LoadObject(self._handler)\n  File \"/Users/dgaedcke/gcloud_tools/google-cloud-sdk/platform/google_appengine/google/appengine/runtime/wsgi.py\", line 96, in LoadObject\n    __import__(cumulative_path)\n  File \"/Users/dgaedcke/dev/TouchstoneMicroservices/svcAdminApi/main.py\", line 8, in &lt;module&gt;\n    import endpoints as google_cloud_endpoints\n  File \"/Users/dgaedcke/dev/TouchstoneMicroservices/lib/endpoints/__init__.py\", line 33, in &lt;module&gt;\n    from .apiserving import *\n  File \"/Users/dgaedcke/dev/TouchstoneMicroservices/lib/endpoints/apiserving.py\", line 77, in &lt;module&gt;\n    from . import endpoints_dispatcher\n  File \"/Users/dgaedcke/dev/TouchstoneMicroservices/lib/endpoints/endpoints_dispatcher.py\", line 36, in &lt;module&gt;\n    import pkg_resources\n  File \"/Users/dgaedcke/dev/TouchstoneMicroservices/lib/pkg_resources/__init__.py\", line 959, in &lt;module&gt;\n    class Environment:\n  File \"/Users/dgaedcke/dev/TouchstoneMicroservices/lib/pkg_resources/__init__.py\", line 963, in Environment\n    self, search_path=None, platform=get_supported_platform(),\n  File \"/Users/dgaedcke/dev/TouchstoneMicroservices/lib/pkg_resources/__init__.py\", line 190, in get_supported_platform\n    plat = get_build_platform()\n  File \"/Users/dgaedcke/dev/TouchstoneMicroservices/lib/pkg_resources/__init__.py\", line 398, in get_build_platform\n    version = _macosx_vers()\n  File \"/Users/dgaedcke/dev/TouchstoneMicroservices/lib/pkg_resources/__init__.py\", line 369, in _macosx_vers\n    version = platform.mac_ver()[0]\n  File \"/usr/local/Cellar/python@2/2.7.15_1/Frameworks/Python.framework/Versions/2.7/lib/python2.7/platform.py\", line 764, in mac_ver\n    info = _mac_ver_xml()\n  File \"/usr/local/Cellar/python@2/2.7.15_1/Frameworks/Python.framework/Versions/2.7/lib/python2.7/platform.py\", line 741, in _mac_ver_xml\n    pl = plistlib.readPlist(fn)\n  File \"/usr/local/Cellar/python@2/2.7.15_1/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plistlib.py\", line 75, in readPlist\n    pathOrFile = open(pathOrFile)\n  File \"/Users/dgaedcke/gcloud_tools/google-cloud-sdk/platform/google_appengine/google/appengine/tools/devappserver2/python/runtime/stubs.py\", line 283, in __init__\n    raise IOError(errno.EACCES, 'file not accessible', filename)\nIOError: [Errno 13] file not accessible: '/System/Library/CoreServices/SystemVersion.plist'\nINFO     2019-03-13 20:38:17,610 module.py:861] adminapi: \"GET /index HTTP/1.1\" 500 -\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "vim", "turtle-graphics"], "comments": [{"owner": {"reputation": 3051, "user_id": 1606959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vmPEP.png?s=128&g=1", "display_name": "mhinz", "link": "https://stackoverflow.com/users/1606959/mhinz"}, "edited": false, "score": 0, "creation_date": 1552516696, "post_id": 55151033, "comment_id": 97044848, "body": "The path <code>&#47;usr&#47;lib&#47;python2.7&#47;lib-tk&#47;turtle.py</code> indicates the usage of Python 2 for code intended for Python 3. So, try <code>brew install python</code> and then in Vim <code>:w | !python3 %</code>."}, {"owner": {"reputation": 1, "user_id": 11159893, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yTD2-k6ZWEM/AAAAAAAAAAI/AAAAAAAAAEA/067m56nUvrw/photo.jpg?sz=128", "display_name": "Lawrance A. Schneider", "link": "https://stackoverflow.com/users/11159893/lawrance-a-schneider"}, "reply_to_user": {"reputation": 3051, "user_id": 1606959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vmPEP.png?s=128&g=1", "display_name": "mhinz", "link": "https://stackoverflow.com/users/1606959/mhinz"}, "edited": false, "score": 0, "creation_date": 1552517593, "post_id": 55151033, "comment_id": 97045111, "body": "I&#39;m not sure how to do this.  I tried using python3 and got the same problem.  I have the python installed by Apple + python 2.7, 3.1, 3.6 and 3.7. I don&#39;t know if I can delete any of them without effecting&#39; one of the others.  Through the terminal, I see &quot;ls /Library/Python/2.6&quot; and &quot;ls /Library/Python/2.7&quot;.  I think these were installed by Apple.  In &quot;Applications&quot; I have Python 2.7, 3.1, 3.6, 3.7 .  How I got all of them???  Occasionally my daughter asks to use my computer - perchance.  Can I use AppDelete to remove some?  Is the causing my problem?"}, {"owner": {"reputation": 1, "user_id": 11159893, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yTD2-k6ZWEM/AAAAAAAAAAI/AAAAAAAAAEA/067m56nUvrw/photo.jpg?sz=128", "display_name": "Lawrance A. Schneider", "link": "https://stackoverflow.com/users/11159893/lawrance-a-schneider"}, "reply_to_user": {"reputation": 3051, "user_id": 1606959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vmPEP.png?s=128&g=1", "display_name": "mhinz", "link": "https://stackoverflow.com/users/1606959/mhinz"}, "edited": false, "score": 0, "creation_date": 1552518159, "post_id": 55151033, "comment_id": 97045275, "body": "I just tried python3 on the RPi and I got a window!!!  I don&#39;t know why I only tried &#39;python3&#39; on the mac.  I did try it through ssh on the RPi.  i.e. Mac ------&gt; ssh -----RPi.  Thank you profusely!!!  I should have tried more...."}], "answers": [{"tags": [], "owner": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "is_accepted": false, "score": 1, "last_activity_date": 1552537058, "creation_date": 1552537058, "answer_id": 55154881, "question_id": 55151033, "link": "https://stackoverflow.com/questions/55151033/vim-python-turtle-window/55154881#55154881", "title": "vim python turtle window", "body": "<p>Even today, Apple's Mac OS X by default supplies multiple versions of Python 2 (invoked as <code>python</code> at the command line) and no versions of Python 3.  You should install your own Python 3 (typically invoked as <code>python3</code> at the command line.)</p>\n\n<p>You can also make code this basic insensitive to the difference:</p>\n\n<pre><code>import turtle  # Allows us to use turtles\n\nwn = turtle.Screen()  # Creates a playground for turtles\nalex = turtle.Turtle()  # Create a turtle, assign to alex\n\nalex.forward(50)  # Tell alex to move forward by 50 units\nalex.left(90)  # Tell alex to turn by 90 degrees\nalex.forward(30)  # Complete the second side of a rectangle\n\nwn.exitonclick()  # Wait for user to close (or click on) window\n</code></pre>\n\n<p>The above should run the same on either major version of Python.</p>\n"}], "owner": {"reputation": 1, "user_id": 11159893, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yTD2-k6ZWEM/AAAAAAAAAAI/AAAAAAAAAEA/067m56nUvrw/photo.jpg?sz=128", "display_name": "Lawrance A. Schneider", "link": "https://stackoverflow.com/users/11159893/lawrance-a-schneider"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 196, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1594271983, "creation_date": 1552510410, "last_edit_date": 1594271983, "question_id": 55151033, "link": "https://stackoverflow.com/questions/55151033/vim-python-turtle-window", "title": "vim python turtle window", "body": "<p>I'm on a Mac with macOS Mojave  v. 10.14.3 .\nI'm using vim per professors edict.\nI learning python as part of a unix class.\nMy first lines in vim are:</p>\n\n<pre><code>import turtle             # Allows us to use turtles\nwn = turtle.Screen()      # Creates a playground for turtles\nalex = turtle.Turtle()    # Create a turtle, assign to alex\n\nalex.forward(50)          # Tell alex to move forward by 50 units\nalex.left(90)             # Tell alex to turn by 90 degrees\nalex.forward(30)          # Complete the second side of a rectangle\n\nwn.mainloop()             # Wait for user to close window\n</code></pre>\n\n<p>These lines are copied from:\nHow to Think Like a Computer Scientist: Learning with Python 3</p>\n\n<p>Doing w | !python % on the command line yields:</p>\n\n<p>the window appears and immediately vanishes!</p>\n\n<p>with:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"turtle\", line 2, in &lt;module&gt;\n    wn = turtle.Screen()      # Creates a playground for turtles\n  File \"/usr/lib/python2.7/lib-tk/turtle.py\", line 3553, in Screen\n    Turtle._screen = _Screen()\n  File \"/usr/lib/python2.7/lib-tk/turtle.py\", line 3569, in __init__\n    _Screen._root = self._root = _Root()\n  File \"/usr/lib/python2.7/lib-tk/turtle.py\", line 458, in __init__\n    TK.Tk.__init__(self)\n  File \"/usr/lib/python2.7/lib-tk/Tkinter.py\", line 1823, in __init__\n    self.tk = _tkinter.create(screenName, baseName, className, interactive, wantobjects, useTk, sync, use)\n_tkinter.TclError: no display name and no $DISPLAY environment variable\n</code></pre>\n\n<p>I tried the same thing using ssh to my RPi (what we use for learning about the kernel) and got:</p>\n\n<p>the window appears and immediately disappears; as above.  I didn't copy the shell response; I wanted to try the following.</p>\n\n<p>I then tried logging directly into the RPi with full 'windows' regalia after shutdown and tried the same script and the same command line entry and got:</p>\n\n<p>The same window problem with the addition of what appeared to be drawing on the window before disappearing.  Further:</p>\n\n<pre><code>Traceback (most recent call):\n   File \"turtle\", line 9, in &lt;module&gt;\n     wn.mainloop()        # wait for user to close window\nAttributeError: '_screen' object has no attribute 'mainloop'\n</code></pre>\n\n<p>I hope I'm not too through.<br>\nI'll not see the professor for another 2 weeks and possibly longer as I'm to have shoulder surgery.</p>\n"}, {"tags": ["python", "parameters", "sqlite"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1552511214, "post_id": 55150929, "comment_id": 97042727, "body": "You should not use <code>format</code> to pass values to your query string, this is an SQL Injection risk. You want a hybrid of the two - you have no choice over the column names - they cannot be parameterized, but keep the <code>?</code> placeholders for the values"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 2, "creation_date": 1552511325, "post_id": 55150929, "comment_id": 97042780, "body": "Something like <code>&quot;INSERT INTO {0} ({1}, {2}, {3}, {4}, {5}) VALUES (?, ?, ?, ?, ?)&quot;.format(table, column1, column2, column3, column4, column5), (value1, value2, value3, value4, value5))</code>. If the variable column names are specified by an external user, you should check that the table name and the column/field names match the schema of the database before executing"}, {"owner": {"reputation": 13209, "user_id": 7414759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b272ce66c7c245c6cbe9a830691daddc?s=128&d=identicon&r=PG&f=1", "display_name": "stovfl", "link": "https://stackoverflow.com/users/7414759/stovfl"}, "edited": false, "score": 0, "creation_date": 1552512979, "post_id": 55150929, "comment_id": 97043511, "body": "<i>&quot;the columns ... are hardcoded&quot;</i>: The columns name are also hardcoded in your db table. Where did you see any benefit not to do so? You Second example are far from readable code."}], "answers": [{"tags": [], "owner": {"reputation": 3, "user_id": 11199537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v1wMd.jpg?s=128&g=1", "display_name": "FelixTheCat", "link": "https://stackoverflow.com/users/11199537/felixthecat"}, "is_accepted": false, "score": 0, "last_activity_date": 1552666002, "creation_date": 1552666002, "answer_id": 55186582, "question_id": 55150929, "link": "https://stackoverflow.com/questions/55150929/trying-to-build-sqlite3-parameters-using-variables-in-python/55186582#55186582", "title": "Trying to build sqlite3 parameters using variables in python", "body": "<p>Thank you for your comments, all helpful.\nI found a way to circumvent my little problem:\n1) columns remain hardcoded, they will not change anyway (I can't remember what I had in mind...)\n2) the table name remains harcoded too. The selection from the dropdown menu passes through a set of if conditions.\nProblem solved, .format dropped. I think it lacks elegance, but it works.</p>\n\n<pre><code>    try:\n\n        if table == 'table1':\n            self.cursor.execute(\"INSERT INTO table1 (TYPE, SITE, LOGIN, PW, COMMENTS1) VALUES (?, ?, ?, ?, ?)\", (value1, value2, value3, value4, value5))\n            self.cursor.execute(\"INSERT INTO complete (LIST) VALUES (?)\", (value4,))           \n        elif table == 'email':\n            self.cursor.execute(\"INSERT INTO email (TYPE, SITE, LOGIN, PW, COMMENTS1) VALUES (?, ?, ?, ?, ?)\", (value1, value2, value3, value4, value5))\n            self.cursor.execute(\"INSERT INTO complete (LIST) VALUES (?)\", (value4,))           \n\n        self.connection.commit()\n        print(\"done saving\") \n\n    except sqlite3.IntegrityError:\n        print('Record already exists')\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 11199537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v1wMd.jpg?s=128&g=1", "display_name": "FelixTheCat", "link": "https://stackoverflow.com/users/11199537/felixthecat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1552666002, "creation_date": 1552509906, "last_edit_date": 1552510223, "question_id": 55150929, "link": "https://stackoverflow.com/questions/55150929/trying-to-build-sqlite3-parameters-using-variables-in-python", "title": "Trying to build sqlite3 parameters using variables in python", "body": "<p>I am working on a password manager, using python and squlite3. I am new to DB.\nI need to pass parameters to the cursor, and I want to do that dynamically.  What I have now:</p>\n\n<pre><code>cursor.execute(\"\"\"INSERT INTO  Passwords (TYPE, SITE, LOGIN, MDP, COMMENTS1) VALUES (?,?,?,?,?);\"\"\",(value1, value2, value3, value4, value5))\n</code></pre>\n\n<p>It works well, but the table (Passwords) and the columns (TYPE, SITE, LOGIN, MDP, COMMENTS1) are hardcoded.\nI tried all the variations I have found on the web, but I have not been able to put variables to work.</p>\n\n<p>I wrote an alternative:</p>\n\n<pre><code>\"INSERT INTO {0} ({1}, {2}, {3}, {4}, {5}) VALUES ({6}, {7}, {8}, {9}, {10})\".format(table, column1, column2, column3, column4, column5, value1, value2, value3, value4, value5)\n</code></pre>\n\n<p>The snippet is nice and all, but returns an error with the variable containing the password (sqlite3.OperationalError: unrecognized token: \"4zMB5e$94t\"):</p>\n\n<p>I have been stuck for 2 days. Can anyone guide me?</p>\n"}, {"tags": ["python", "uuid"], "comments": [{"owner": {"reputation": 64597, "user_id": 1453822, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2c8db97d2ecdfe5e044cee4c470abb60?s=128&d=identicon&r=PG", "display_name": "DeepSpace", "link": "https://stackoverflow.com/users/1453822/deepspace"}, "edited": false, "score": 4, "creation_date": 1552509750, "post_id": 55150843, "comment_id": 97042045, "body": "&quot;shorter&quot; how? <code>str(...)</code> is only 5 characters"}, {"owner": {"reputation": 2400, "user_id": 5266746, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/cb43ae82055fed862c2ba3e6ed9c8e9f?s=128&d=identicon&r=PG&f=1", "display_name": "n1c9", "link": "https://stackoverflow.com/users/5266746/n1c9"}, "edited": false, "score": 0, "creation_date": 1552509794, "post_id": 55150843, "comment_id": 97042064, "body": "Funnily enough, UUID&#39;s documentation explicitly gives calling the <code>str()</code> function as the way to get a UUID string. (<a href=\"https://docs.python.org/3/library/uuid.html#uuid.UUID\" rel=\"nofollow noreferrer\">docs.python.org/3/library/uuid.html#uuid.UUID</a>)  Why don&#39;t you want to use the <code>str()</code> function, out of curiosity?"}, {"owner": {"reputation": 64597, "user_id": 1453822, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2c8db97d2ecdfe5e044cee4c470abb60?s=128&d=identicon&r=PG", "display_name": "DeepSpace", "link": "https://stackoverflow.com/users/1453822/deepspace"}, "edited": false, "score": 0, "creation_date": 1552509808, "post_id": 55150843, "comment_id": 97042074, "body": "Anyway, when I&#39;m doing <code>print(uuid.uuid4())</code> I&#39;m getting the UUID itself (which makes perfect sense, since <code>print</code> invokes <code>__str__</code>). I&#39;m using Python 3, so this may be a Python 2 vs 3 thing"}, {"owner": {"reputation": 6802, "user_id": 9609843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9ceb913f05e91861333b367e0379a8e?s=128&d=identicon&r=PG&f=1", "display_name": "sanyassh", "link": "https://stackoverflow.com/users/9609843/sanyassh"}, "edited": false, "score": 2, "creation_date": 1552509929, "post_id": 55150843, "comment_id": 97042129, "body": "<code>def u(): return str(uuid.uuid4())</code> and calling it with <code>u()</code> will be extremely short"}, {"owner": {"reputation": 64597, "user_id": 1453822, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2c8db97d2ecdfe5e044cee4c470abb60?s=128&d=identicon&r=PG", "display_name": "DeepSpace", "link": "https://stackoverflow.com/users/1453822/deepspace"}, "reply_to_user": {"reputation": 6802, "user_id": 9609843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9ceb913f05e91861333b367e0379a8e?s=128&d=identicon&r=PG&f=1", "display_name": "sanyassh", "link": "https://stackoverflow.com/users/9609843/sanyassh"}, "edited": false, "score": 1, "creation_date": 1552509988, "post_id": 55150843, "comment_id": 97042151, "body": "@Sanyash and needlessly &quot;convoluted&quot;."}, {"owner": {"reputation": 7468, "user_id": 2695448, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/074d0d3f1001c26d04edefb317f03059?s=128&d=identicon&r=PG&f=1", "display_name": "mad_", "link": "https://stackoverflow.com/users/2695448/mad"}, "edited": false, "score": 2, "creation_date": 1552511399, "post_id": 55150843, "comment_id": 97042804, "body": "Write your own uuid generator"}, {"owner": {"reputation": 64597, "user_id": 1453822, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2c8db97d2ecdfe5e044cee4c470abb60?s=128&d=identicon&r=PG", "display_name": "DeepSpace", "link": "https://stackoverflow.com/users/1453822/deepspace"}, "reply_to_user": {"reputation": 7468, "user_id": 2695448, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/074d0d3f1001c26d04edefb317f03059?s=128&d=identicon&r=PG&f=1", "display_name": "mad_", "link": "https://stackoverflow.com/users/2695448/mad"}, "edited": false, "score": 0, "creation_date": 1552511498, "post_id": 55150843, "comment_id": 97042840, "body": "@mad_ How will reinventing the wheel help solve a problem that doesn&#39;t really exist?"}, {"owner": {"reputation": 7468, "user_id": 2695448, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/074d0d3f1001c26d04edefb317f03059?s=128&d=identicon&r=PG&f=1", "display_name": "mad_", "link": "https://stackoverflow.com/users/2695448/mad"}, "reply_to_user": {"reputation": 64597, "user_id": 1453822, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2c8db97d2ecdfe5e044cee4c470abb60?s=128&d=identicon&r=PG", "display_name": "DeepSpace", "link": "https://stackoverflow.com/users/1453822/deepspace"}, "edited": false, "score": 1, "creation_date": 1552511568, "post_id": 55150843, "comment_id": 97042873, "body": "@DeepSpace That will at least give a sense of satisfaction"}, {"owner": {"reputation": 2400, "user_id": 5266746, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/cb43ae82055fed862c2ba3e6ed9c8e9f?s=128&d=identicon&r=PG&f=1", "display_name": "n1c9", "link": "https://stackoverflow.com/users/5266746/n1c9"}, "edited": false, "score": 0, "creation_date": 1552514955, "post_id": 55150843, "comment_id": 97044250, "body": "my mistake - thought you were the initial questioner. Will remove :-)"}], "answers": [{"comments": [{"owner": {"reputation": 286, "user_id": 1109440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/010f05028416c1402231e453d79433ba?s=128&d=identicon&r=PG", "display_name": "rkirmizi", "link": "https://stackoverflow.com/users/1109440/rkirmizi"}, "reply_to_user": {"reputation": 64597, "user_id": 1453822, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2c8db97d2ecdfe5e044cee4c470abb60?s=128&d=identicon&r=PG", "display_name": "DeepSpace", "link": "https://stackoverflow.com/users/1453822/deepspace"}, "edited": false, "score": 0, "creation_date": 1552580591, "post_id": 55154379, "comment_id": 97074325, "body": "Actually, it&#39;s not about saving one character. It&#39;s more about using the given functionality without calling an unnecessary method."}], "tags": [], "owner": {"reputation": 286, "user_id": 1109440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/010f05028416c1402231e453d79433ba?s=128&d=identicon&r=PG", "display_name": "rkirmizi", "link": "https://stackoverflow.com/users/1109440/rkirmizi"}, "is_accepted": false, "score": 3, "last_activity_date": 1552532998, "creation_date": 1552532998, "answer_id": 55154379, "question_id": 55150843, "link": "https://stackoverflow.com/questions/55150843/how-to-generate-uuid-string/55154379#55154379", "title": "How to generate uuid string", "body": "<p>You can use the <code>.hex</code> attribute to get the string value without <code>-</code> </p>\n\n<pre><code>In [1]: import uuid\n\nIn [2]: result = uuid.uuid4()\n\nIn [3]: result.hex\nOut[3]: '536bc225eb6d47589b1858f265b809b1'\n\nIn [4]: print(result.hex)\n536bc225eb6d47589b1858f265b809b1\n</code></pre>\n\n<p>Here is the related documentation:</p>\n\n<pre><code>UUIDs have these read-only attributes:\n\nbytes       the UUID as a 16-byte string (containing the six\n            integer fields in big-endian byte order)\n\nbytes_le    the UUID as a 16-byte string (with time_low, time_mid,\n            and time_hi_version in little-endian byte order)\n\nfields      a tuple of the six integer fields of the UUID,\n            which are also available as six individual attributes\n            and two derived attributes:\n\n        time_low                the first 32 bits of the UUID\n        time_mid                the next 16 bits of the UUID\n        time_hi_version         the next 16 bits of the UUID\n        clock_seq_hi_variant    the next 8 bits of the UUID\n        clock_seq_low           the next 8 bits of the UUID\n        node                    the last 48 bits of the UUID\n\n        time                    the 60-bit timestamp\n        clock_seq               the 14-bit sequence number\n\nhex         the UUID as a 32-character hexadecimal string\n\nint         the UUID as a 128-bit integer\n\nurn         the UUID as a URN as specified in RFC 4122\n\nvariant     the UUID variant (one of the constants RESERVED_NCS,\n            RFC_4122, RESERVED_MICROSOFT, or RESERVED_FUTURE)\n\nversion     the UUID version number (1 through 5, meaningful only\n            when the variant is RFC_4122)\n</code></pre>\n"}], "owner": {"reputation": 13543, "user_id": 1107049, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/8f94b3bb695b3bbd83be44eb151aa63e?s=128&d=identicon&r=PG", "display_name": "alphanumeric", "link": "https://stackoverflow.com/users/1107049/alphanumeric"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3861, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1552532998, "creation_date": 1552509566, "question_id": 55150843, "link": "https://stackoverflow.com/questions/55150843/how-to-generate-uuid-string", "title": "How to generate uuid string", "body": "<p>Using <code>uuid</code> module I can generate an unique string (such as <code>c389fa3c-3a5c-4d8d-ac92-9b70f2bbe0b5</code>) using:</p>\n\n<pre><code>import uuid\nresult = uuid.uuid4()\nprint result \n</code></pre>\n\n<p>which results to:</p>\n\n<pre><code>&lt;class 'uuid.UUID'&gt;\n</code></pre>\n\n<p>Now, in order to get a generated string I would need to call <code>str()</code> function:</p>\n\n<pre><code>uuid_string = str(result)\nprint uuid_string\n</code></pre>\n\n<p>which prints:</p>\n\n<pre><code>c389fa3c-3a5c-4d8d-ac92-9b70f2bbe0b5\n</code></pre>\n\n<p>I wonder if there is a shorter way of generating the uuid text string as a string (without a need to use <code>str()</code> function).</p>\n"}, {"tags": ["python", "django", "python-3.x", "validation", "django-models"], "comments": [{"owner": {"reputation": 11805, "user_id": 1637351, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CptWd.jpg?s=128&g=1", "display_name": "schillingt", "link": "https://stackoverflow.com/users/1637351/schillingt"}, "edited": false, "score": 0, "creation_date": 1552511908, "post_id": 55150839, "comment_id": 97043014, "body": "I&#39;m not sure handling this in the save method is different than handling it in a <code>pre_save</code> signal. They both give you access to the whole instance. If you wanted to actually implement the per field signal, you&#39;d to override <code>save_base</code> to iterate over the fields and send the signal per field. And take into account the <code>update_fields</code>."}, {"owner": {"reputation": 1433, "user_id": 7757415, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155125952958756/picture?type=large", "display_name": "Ali Y\u0131lmaz", "link": "https://stackoverflow.com/users/7757415/ali-y%c4%b1lmaz"}, "reply_to_user": {"reputation": 11805, "user_id": 1637351, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CptWd.jpg?s=128&g=1", "display_name": "schillingt", "link": "https://stackoverflow.com/users/1637351/schillingt"}, "edited": false, "score": 0, "creation_date": 1552512461, "post_id": 55150839, "comment_id": 97043256, "body": "@schillingt thank you for your response. I believe overriding <code>save_base</code> is really a big deal, since I work on a quite big project and lots of models use same save method. To put simply, I would like to implement the logic within <code>field</code> class and I would like to have no logic written in Model class, so that the solution is scalable for new Model classes to use this field without needing to implement boilerplace logic code."}, {"owner": {"reputation": 11805, "user_id": 1637351, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CptWd.jpg?s=128&g=1", "display_name": "schillingt", "link": "https://stackoverflow.com/users/1637351/schillingt"}, "edited": false, "score": 0, "creation_date": 1552512629, "post_id": 55150839, "comment_id": 97043337, "body": "Another alternative would be to create a handler for all <code>pre_save</code> senders and iterate over the fields of the instance triggering a new field specific signal."}], "answers": [{"comments": [{"owner": {"reputation": 1433, "user_id": 7757415, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155125952958756/picture?type=large", "display_name": "Ali Y\u0131lmaz", "link": "https://stackoverflow.com/users/7757415/ali-y%c4%b1lmaz"}, "edited": false, "score": 0, "creation_date": 1552511848, "post_id": 55151274, "comment_id": 97042985, "body": "First of all, thank you for your effort. I also thought about writing a mixin, but I have a question: What if my model class already inherits multiple mixins? Does the <code>save</code> method on <code>MyModel</code> propagate to all superclasses and invoke all of their <code>save</code>s?"}, {"owner": {"reputation": 128, "user_id": 6605556, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FnM8D.jpg?s=128&g=1", "display_name": "Art Vandelay", "link": "https://stackoverflow.com/users/6605556/art-vandelay"}, "reply_to_user": {"reputation": 1433, "user_id": 7757415, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155125952958756/picture?type=large", "display_name": "Ali Y\u0131lmaz", "link": "https://stackoverflow.com/users/7757415/ali-y%c4%b1lmaz"}, "edited": false, "score": 0, "creation_date": 1552512859, "post_id": 55151274, "comment_id": 97043451, "body": "That would make it tricky. Assuming that LimitedJSONField is a custom field, would overriding the deconstruct method help you out? You could put the extra logic in there to get the results you want. <a href=\"https://docs.djangoproject.com/en/2.1/howto/custom-model-fields/#field-deconstruction\" rel=\"nofollow noreferrer\">docs.djangoproject.com/en/2.1/howto/custom-model-fields/&hellip;</a>"}, {"owner": {"reputation": 1433, "user_id": 7757415, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155125952958756/picture?type=large", "display_name": "Ali Y\u0131lmaz", "link": "https://stackoverflow.com/users/7757415/ali-y%c4%b1lmaz"}, "edited": false, "score": 0, "creation_date": 1552512916, "post_id": 55151274, "comment_id": 97043475, "body": "How do you plan to invoke SpecialJsonModel&#39;s <code>save</code> method on the solution above?"}, {"owner": {"reputation": 128, "user_id": 6605556, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FnM8D.jpg?s=128&g=1", "display_name": "Art Vandelay", "link": "https://stackoverflow.com/users/6605556/art-vandelay"}, "reply_to_user": {"reputation": 1433, "user_id": 7757415, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155125952958756/picture?type=large", "display_name": "Ali Y\u0131lmaz", "link": "https://stackoverflow.com/users/7757415/ali-y%c4%b1lmaz"}, "edited": false, "score": 0, "creation_date": 1552513061, "post_id": 55151274, "comment_id": 97043551, "body": "Sorry, hit submit on my above comment too soon. Multiple save methods really won&#39;t work very easily. See: <a href=\"https://stackoverflow.com/questions/47583766/multiple-inheritance-from-abstract-classes-with-same-parent-but-different-child\" title=\"multiple inheritance from abstract classes with same parent but different child\">stackoverflow.com/questions/47583766/&hellip;</a>"}, {"owner": {"reputation": 1433, "user_id": 7757415, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155125952958756/picture?type=large", "display_name": "Ali Y\u0131lmaz", "link": "https://stackoverflow.com/users/7757415/ali-y%c4%b1lmaz"}, "edited": false, "score": 0, "creation_date": 1552513314, "post_id": 55151274, "comment_id": 97043659, "body": "No problems! Thank you again for your time. I&#39;ll check out <code>deconstruct</code> method and see if it helps. I&#39;ll be updating soon."}, {"owner": {"reputation": 1433, "user_id": 7757415, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155125952958756/picture?type=large", "display_name": "Ali Y\u0131lmaz", "link": "https://stackoverflow.com/users/7757415/ali-y%c4%b1lmaz"}, "edited": false, "score": 0, "creation_date": 1552552475, "post_id": 55151274, "comment_id": 97055189, "body": "Hello, could you elaborate on how can I use <code>deconstruct</code>? I checked it and I couldnt see how I could use it for my use-case."}], "tags": [], "owner": {"reputation": 128, "user_id": 6605556, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FnM8D.jpg?s=128&g=1", "display_name": "Art Vandelay", "link": "https://stackoverflow.com/users/6605556/art-vandelay"}, "is_accepted": false, "score": 1, "last_activity_date": 1552511459, "creation_date": 1552511459, "answer_id": 55151274, "question_id": 55150839, "link": "https://stackoverflow.com/questions/55150839/django-orm-implement-pre-save-for-a-field-instead-of-a-model/55151274#55151274", "title": "Django ORM: Implement Pre-save for a &quot;Field&quot; instead of a &quot;Model&quot;", "body": "<p>Could you make a parent class with a single save method and use it as a mixin that is inherited by all of your other models?</p>\n\n<p>Something like:</p>\n\n<pre><code>class SpecialJsonModel(models.model):\n    json_field = LimitedJSONField(default={})\n\n    def save(self, *args, **kwargs):\n        // Specific save logic goes here\n\nclass OtherModelA(SpecialJsonModel)\n    char_field = models.CharField(max_length=64)\n\nclass OtherModelB(SpecialJsonModel)\n    char_field = models.CharField(max_length=64)\n</code></pre>\n\n<p>Then you would only have to write one overridden save method.</p>\n"}], "owner": {"reputation": 1433, "user_id": 7757415, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155125952958756/picture?type=large", "display_name": "Ali Y\u0131lmaz", "link": "https://stackoverflow.com/users/7757415/ali-y%c4%b1lmaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1552512532, "creation_date": 1552509555, "last_edit_date": 1552512532, "question_id": 55150839, "link": "https://stackoverflow.com/questions/55150839/django-orm-implement-pre-save-for-a-field-instead-of-a-model", "title": "Django ORM: Implement Pre-save for a &quot;Field&quot; instead of a &quot;Model&quot;", "body": "<p>let's say I have this model:</p>\n\n<pre><code>class MyModel(models.Model):\n    char_field = models.CharField(max_length=64)\n    json_field = LimitedJSONField(default={})\n</code></pre>\n\n<p>where <code>LimitedJSONField</code> is a custom field for storing JSONStrings on DB.</p>\n\n<p>I would like to do pre-save check on <code>json_field</code> (e.g. truncate its length if exceeding). I have read about overriding <code>save</code> method for <code>MyModel</code>, I also know I can implement a <code>pre-save</code> signal but I would like to handle it on field-level. Because let's say I use <code>LimitedJSONField</code> on 500 models. Do I have to override <code>save</code> method for each of those 500 models? I implemented a <code>validate</code> method on <code>LimitedJSONField</code> but it does not get triggered on save (it's triggered only on form validation, i.e. <code>full_clean</code> routine).</p>\n\n<p>How can I implement a validator for <code>LimitedJSONField</code>, so that whatever <code>Model</code> uses it, this field gets validated with regards to one single business logic written inside <code>LimitedJSONField</code>?</p>\n\n<p>Put simply, I would like to implement the logic within <code>field</code> class and I would like to have no logic written in Model class, so that the solution is scalable for new Model classes to use this field without needing to implement boilerplace logic code.</p>\n\n<p>Thanks a lot for your time! </p>\n"}, {"tags": ["python", "django", "two-factor-authentication"], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 10290511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c53833521f6fd45a67f7c75670782209?s=128&d=identicon&r=PG&f=1", "display_name": "Jack022", "link": "https://stackoverflow.com/users/10290511/jack022"}, "edited": false, "score": 0, "creation_date": 1552512846, "post_id": 55151367, "comment_id": 97043444, "body": "Hey! I&#39;m sorry for the noob questions but i&#39;m fairly new to Django. Right now i already have a login form created by me, but the problem is that i don&#39;t know how to integrate the whole 2fa part into that one, that&#39;s why i asked this question. Would it be more difficult to integrate 2fa into my own login view or would it be better to add extra fields to their own view? And can you tell me where should i put those 2 pieces of code you mentioned? In my project? And in which files? Again, i&#39;m sorry but i&#39;m new to this. Thanks a lot for your help :)"}, {"owner": {"reputation": 5190, "user_id": 4547481, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/Xw8Bx.jpg?s=128&g=1", "display_name": "Nafees Anwar", "link": "https://stackoverflow.com/users/4547481/nafees-anwar"}, "reply_to_user": {"reputation": 73, "user_id": 10290511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c53833521f6fd45a67f7c75670782209?s=128&d=identicon&r=PG&f=1", "display_name": "Jack022", "link": "https://stackoverflow.com/users/10290511/jack022"}, "edited": false, "score": 0, "creation_date": 1552513270, "post_id": 55151367, "comment_id": 97043642, "body": "You are very welcome. I suggest you to use their authentication view with your form rather than using your  view with their two factor functionality. It would be relatively easy. You can put this code in any of your application , form in <code>forms.py</code> and view in <code>views.py</code>. Just take care of login functionality in form. It must should handle authentication and invalidate itself if username and password is wrong."}, {"owner": {"reputation": 73, "user_id": 10290511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c53833521f6fd45a67f7c75670782209?s=128&d=identicon&r=PG&f=1", "display_name": "Jack022", "link": "https://stackoverflow.com/users/10290511/jack022"}, "edited": false, "score": 0, "creation_date": 1552513496, "post_id": 55151367, "comment_id": 97043716, "body": "Ok! So the second block of code should go into my own login view, while the first one on forms.py? Thanks!"}], "tags": [], "owner": {"reputation": 5190, "user_id": 4547481, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/Xw8Bx.jpg?s=128&g=1", "display_name": "Nafees Anwar", "link": "https://stackoverflow.com/users/4547481/nafees-anwar"}, "is_accepted": true, "score": 1, "last_activity_date": 1552511918, "creation_date": 1552511918, "answer_id": 55151367, "question_id": 55150837, "link": "https://stackoverflow.com/questions/55150837/edit-a-django-login-form/55151367#55151367", "title": "Edit a django login form", "body": "<p>I have used this package in one of my projects and many complicated scenarios can come up with it. There can be a lot of ways you can customize this view. As you mentioned, you need extra fields in login form, here is one method you can use if you just want extra fields in login form.</p>\n\n<p><strong>Step 1 Create your own login form with extra fields</strong> </p>\n\n<p>You can create your own login form, inherit from django's builtin one or inherit from the form they are using for login. Add extra fields in it.</p>\n\n<pre><code>class YourLoginForm(AuthenticationForm):\n    pass\n    # your extra fields and functionality here \n</code></pre>\n\n<p><strong>Step 2 Inherit from login view from package and use your form</strong></p>\n\n<p>You have to create a login view inherited from package's builtin login view and add your login form along with other ones like this</p>\n\n<pre><code>from TWO_FACTOR_AUTU import LoginView\n\nclass YourLoginView(LoginView):\n    form_list = (\n        ('auth', YourLoginForm),\n        ('token', AuthenticationTokenForm),\n        ('backup', BackupTokenForm),\n    )\n</code></pre>\n\n<p>Use this view with appropriate routing for handling authentication.\nHope this helps</p>\n"}], "owner": {"reputation": 73, "user_id": 10290511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c53833521f6fd45a67f7c75670782209?s=128&d=identicon&r=PG&f=1", "display_name": "Jack022", "link": "https://stackoverflow.com/users/10290511/jack022"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 265, "favorite_count": 0, "accepted_answer_id": 55151367, "answer_count": 1, "score": 1, "last_activity_date": 1552511918, "creation_date": 1552509542, "question_id": 55150837, "link": "https://stackoverflow.com/questions/55150837/edit-a-django-login-form", "title": "Edit a django login form", "body": "<p>I am running an example django app from this library, <a href=\"https://github.com/Bouke/django-two-factor-auth/tree/master/example\" rel=\"nofollow noreferrer\">here is</a> the whole code.</p>\n\n<p>I would like to add the login part of this app, i want to add more fields to the login view but i really don't understand how to do that, because the app does not have it's own view, but it's just calling the module's own login view. But what if i would like to use this library for my own project? Would i be forced to use their login view? How can i edit it?</p>\n\n<p>Here is the login view that the example is calling to handle authentication:</p>\n\n<p><strong><a href=\"https://github.com/Bouke/django-two-factor-auth/blob/master/two_factor/views/core.py\" rel=\"nofollow noreferrer\">core.py</a></strong></p>\n\n<pre><code>@class_view_decorator(sensitive_post_parameters())\n@class_view_decorator(never_cache)\nclass LoginView(IdempotentSessionWizardView):\n    \"\"\"\n    View for handling the login process, including OTP verification.\n    The login process is composed like a wizard. The first step asks for the\n    user's credentials. If the credentials are correct, the wizard proceeds to\n    the OTP verification step. If the user has a default OTP device configured,\n    that device is asked to generate a token (send sms / call phone) and the\n    user is asked to provide the generated token. The backup devices are also\n    listed, allowing the user to select a backup device for verification.\n    \"\"\"\n    template_name = 'two_factor/core/login.html'\n    form_list = (\n        ('auth', AuthenticationForm),\n        ('token', AuthenticationTokenForm),\n        ('backup', BackupTokenForm),\n    )\n    idempotent_dict = {\n        'token': False,\n        'backup': False,\n    }\n\n    def has_token_step(self):\n        return default_device(self.get_user())\n\n    def has_backup_step(self):\n        return default_device(self.get_user()) and \\\n            'token' not in self.storage.validated_step_data\n\n    condition_dict = {\n        'token': has_token_step,\n        'backup': has_backup_step,\n    }\n    redirect_field_name = REDIRECT_FIELD_NAME\n\n    def __init__(self, **kwargs):\n        super(LoginView, self).__init__(**kwargs)\n        self.user_cache = None\n        self.device_cache = None\n\n    def post(self, *args, **kwargs):\n        \"\"\"\n        The user can select a particular device to challenge, being the backup\n        devices added to the account.\n        \"\"\"\n        # Generating a challenge doesn't require to validate the form.\n        if 'challenge_device' in self.request.POST:\n            return self.render_goto_step('token')\n\n        return super(LoginView, self).post(*args, **kwargs)\n\n    def done(self, form_list, **kwargs):\n        \"\"\"\n        Login the user and redirect to the desired page.\n        \"\"\"\n        login(self.request, self.get_user())\n\n        redirect_to = self.request.POST.get(\n            self.redirect_field_name,\n            self.request.GET.get(self.redirect_field_name, '')\n        )\n\n        if not is_safe_url(url=redirect_to, allowed_hosts=[self.request.get_host()]):\n            redirect_to = resolve_url(settings.LOGIN_REDIRECT_URL)\n\n        device = getattr(self.get_user(), 'otp_device', None)\n        if device:\n            signals.user_verified.send(sender=__name__, request=self.request,\n                                       user=self.get_user(), device=device)\n        return redirect(redirect_to)\n\n    def get_form_kwargs(self, step=None):\n        \"\"\"\n        AuthenticationTokenForm requires the user kwarg.\n        \"\"\"\n        if step == 'auth':\n            return {\n                'request': self.request\n            }\n        if step in ('token', 'backup'):\n            return {\n                'user': self.get_user(),\n                'initial_device': self.get_device(step),\n            }\n        return {}\n\n    def get_device(self, step=None):\n        \"\"\"\n        Returns the OTP device selected by the user, or his default device.\n        \"\"\"\n        if not self.device_cache:\n            challenge_device_id = self.request.POST.get('challenge_device', None)\n            if challenge_device_id:\n                for device in backup_phones(self.get_user()):\n                    if device.persistent_id == challenge_device_id:\n                        self.device_cache = device\n                        break\n            if step == 'backup':\n                try:\n                    self.device_cache = self.get_user().staticdevice_set.get(name='backup')\n                except StaticDevice.DoesNotExist:\n                    pass\n            if not self.device_cache:\n                self.device_cache = default_device(self.get_user())\n        return self.device_cache\n\n    def render(self, form=None, **kwargs):\n        \"\"\"\n        If the user selected a device, ask the device to generate a challenge;\n        either making a phone call or sending a text message.\n        \"\"\"\n        if self.steps.current == 'token':\n            self.get_device().generate_challenge()\n        return super(LoginView, self).render(form, **kwargs)\n\n    def get_user(self):\n        \"\"\"\n        Returns the user authenticated by the AuthenticationForm. Returns False\n        if not a valid user; see also issue #65.\n        \"\"\"\n        if not self.user_cache:\n            form_obj = self.get_form(step='auth',\n                                     data=self.storage.get_step_data('auth'))\n            self.user_cache = form_obj.is_valid() and form_obj.user_cache\n        return self.user_cache\n\n    def get_context_data(self, form, **kwargs):\n        \"\"\"\n        Adds user's default and backup OTP devices to the context.\n        \"\"\"\n        context = super(LoginView, self).get_context_data(form, **kwargs)\n        if self.steps.current == 'token':\n            context['device'] = self.get_device()\n            context['other_devices'] = [\n                phone for phone in backup_phones(self.get_user())\n                if phone != self.get_device()]\n            try:\n                context['backup_tokens'] = self.get_user().staticdevice_set\\\n                    .get(name='backup').token_set.count()\n            except StaticDevice.DoesNotExist:\n                context['backup_tokens'] = 0\n\n        if getattr(settings, 'LOGOUT_REDIRECT_URL', None):\n            context['cancel_url'] = resolve_url(settings.LOGOUT_REDIRECT_URL)\n        elif getattr(settings, 'LOGOUT_URL', None):\n            warnings.warn(\n                \"LOGOUT_URL has been replaced by LOGOUT_REDIRECT_URL, please \"\n                \"review the URL and update your settings.\",\n                DeprecationWarning)\n            context['cancel_url'] = resolve_url(settings.LOGOUT_URL)\n        return context\n</code></pre>\n"}, {"tags": ["python", "numpy", "python-3.6", "memmap"], "answers": [{"tags": [], "owner": {"reputation": 2352, "user_id": 5754992, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/953dd1892c726ceecc7f0240e982e11f?s=128&d=identicon&r=PG&f=1", "display_name": "user2699", "link": "https://stackoverflow.com/users/5754992/user2699"}, "is_accepted": true, "score": 2, "last_activity_date": 1552513910, "last_edit_date": 1552513910, "creation_date": 1552513475, "answer_id": 55151661, "question_id": 55150829, "link": "https://stackoverflow.com/questions/55150829/numpy-memmap-in-place-sort-of-a-large-matrix-by-column/55151661#55151661", "title": "Numpy memmap in-place sort of a large matrix by column", "body": "<p>The solution may be simple, using the order argument to an in place <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.sort.html#numpy.ndarray.sort\" rel=\"nofollow noreferrer\">sort</a>. Of course, <code>order</code> requires fieldnames, so those have to be added first.</p>\n\n<pre><code>d = x.dtype\nx = x.view(dtype=[(str(i), d) for i in range(x.shape[-1])])\narray([[(2, 10)],\n   [(1, 20)]], dtype=[('0', '&lt;i8'), ('1', '&lt;i8')])\n</code></pre>\n\n<p>The field names are strings, corresponding to the column indices.  Sorting can be done in place with</p>\n\n<pre><code>x.sort(order='0', axis=0)\n</code></pre>\n\n<p>Then convert back to a regular array with the original datatype</p>\n\n<pre><code>x.view(d)\narray([[ 1, 20],\n   [ 2, 10]])\n</code></pre>\n\n<p>That should work, although you may need to change how the view is taken depending on how the data is stored on disk, see <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.view.html\" rel=\"nofollow noreferrer\">the docs</a></p>\n\n<blockquote>\n  <p>For a.view(some_dtype), if some_dtype has a different number of bytes per entry than the previous dtype (for example, converting a regular array to a structured array), then the behavior of the view cannot be predicted just from the superficial appearance of a (shown by print(a)). It also depends on exactly how a is stored in memory. Therefore if a is C-ordered versus fortran-ordered, versus defined as a slice or transpose, etc., the view may give different results.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 25553, "user_id": 4790871, "user_type": "registered", "accept_rate": 99, "profile_image": "https://lh4.googleusercontent.com/-7sCm6Bl96nw/AAAAAAAAAAI/AAAAAAAAAH4/0LGbJtwJZd0/photo.jpg?sz=128", "display_name": "David Parks", "link": "https://stackoverflow.com/users/4790871/david-parks"}, "is_accepted": false, "score": 0, "last_activity_date": 1552515964, "last_edit_date": 1552515964, "creation_date": 1552515509, "answer_id": 55152007, "question_id": 55150829, "link": "https://stackoverflow.com/questions/55150829/numpy-memmap-in-place-sort-of-a-large-matrix-by-column/55152007#55152007", "title": "Numpy memmap in-place sort of a large matrix by column", "body": "<p>@user2699 answered the question beautifully. I'm adding this solution as a simplified example in case you don't mind keeping your data as a <a href=\"https://docs.scipy.org/doc/numpy-1.13.0/user/basics.rec.html\" rel=\"nofollow noreferrer\">structured array</a>, which does away with the view.</p>\n\n<pre><code>import numpy as np\n\nfilename = '/tmp/test'\nx = np.memmap(filename, dtype=[('index', '&lt;f2'),('other1', '&lt;f2'),('other2', '&lt;f2')], mode='w+', shape=(2,))\nx[0] = (2, 10, 30)\nx[1] = (1, 20, 20)\nprint(x.shape)\nprint(x)\nx.sort(order='index', axis=0, kind='heapsort')\nprint(x)\n\n(2,)\n[(2., 10., 30.) (1., 20., 20.)]\n[(1., 20., 20.) (2., 10., 30.)]\n</code></pre>\n\n<p>Also the dtype formats are <a href=\"https://docs.scipy.org/doc/numpy/reference/arrays.dtypes.html#arrays-dtypes-constructing\" rel=\"nofollow noreferrer\">documented here</a>.</p>\n"}], "owner": {"reputation": 25553, "user_id": 4790871, "user_type": "registered", "accept_rate": 99, "profile_image": "https://lh4.googleusercontent.com/-7sCm6Bl96nw/AAAAAAAAAAI/AAAAAAAAAH4/0LGbJtwJZd0/photo.jpg?sz=128", "display_name": "David Parks", "link": "https://stackoverflow.com/users/4790871/david-parks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "accepted_answer_id": 55151661, "answer_count": 2, "score": 0, "last_activity_date": 1552515964, "creation_date": 1552509507, "question_id": 55150829, "link": "https://stackoverflow.com/questions/55150829/numpy-memmap-in-place-sort-of-a-large-matrix-by-column", "title": "Numpy memmap in-place sort of a large matrix by column", "body": "<p>I'd like to sort a matrix of shape <code>(N, 2)</code> on the first column where <code>N</code> >> system memory.</p>\n\n<p>With in-memory numpy you can do:</p>\n\n<pre><code>x = np.array([[2, 10],[1, 20]])\nsortix = x[:,0].argsort()\nx = x[sortix]\n</code></pre>\n\n<p>But that appears to require that <code>x[:,0].argsort()</code> fit in memory, which won't work for memmap where <code>N</code> >> system memory (please correct me if this assumption is wrong).</p>\n\n<p>Can I achieve this sort in-place with numpy memmap?</p>\n\n<p>(assume heapsort is used for sorting and simple numeric data types are used)</p>\n"}, {"tags": ["python", "tensorflow", "deep-learning", "cudnn"], "comments": [{"owner": {"reputation": 1127, "user_id": 9546874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee21d1f7accfbf83abc5ea5663982ac7?s=128&d=identicon&r=PG&f=1", "display_name": "Recessive", "link": "https://stackoverflow.com/users/9546874/recessive"}, "edited": false, "score": 0, "creation_date": 1569220881, "post_id": 55150828, "comment_id": 102511007, "body": "I don&#39;t know what&#39;s going on, but I would imagine for those who do it&#39;s be helpful if you added what gpu, cpu and amount of RAM you have"}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 11575226, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-CzIAk6wbaTk/AAAAAAAAAAI/AAAAAAAAAAs/pw_EqSk_yQU/photo.jpg?sz=128", "display_name": "ziyi liu", "link": "https://stackoverflow.com/users/11575226/ziyi-liu"}, "is_accepted": false, "score": 1, "last_activity_date": 1603330551, "creation_date": 1603330551, "answer_id": 64473982, "question_id": 55150828, "link": "https://stackoverflow.com/questions/55150828/cudnn-launch-failure-tensorflow-gpu-cuda/64473982#64473982", "title": "cuDNN launch failure (tensorflow-gpu/CUDA)", "body": "<p>I met the same error. The reason for mine is that my GPU does not have enough memory for the process.</p>\n"}], "owner": {"reputation": 521, "user_id": 8111837, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/mwoa1.jpg?s=128&g=1", "display_name": "Alexander Hepburn", "link": "https://stackoverflow.com/users/8111837/alexander-hepburn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1674, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1603330551, "creation_date": 1552509501, "last_edit_date": 1552509865, "question_id": 55150828, "link": "https://stackoverflow.com/questions/55150828/cudnn-launch-failure-tensorflow-gpu-cuda", "title": "cuDNN launch failure (tensorflow-gpu/CUDA)", "body": "<pre><code>Traceback (most recent call last):\n  File \"/home/alex/anaconda3/envs/tensorflow/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 1322, in _do_call\n    return fn(*args)\n  File \"/home/alex/anaconda3/envs/tensorflow/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 1307, in _run_fn\n    options, feed_dict, fetch_list, target_list, run_metadata)\n  File \"/home/alex/anaconda3/envs/tensorflow/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 1409, in _call_tf_sessionrun\n    run_metadata)\ntensorflow.python.framework.errors_impl.InternalError: cuDNN launch failure : input shape ([202027,64,1,1])\n     [[Node: bn_fm_1/FusedBatchNorm = FusedBatchNorm[T=DT_FLOAT, data_format=\"NCHW\", epsilon=0.001, is_training=false, _device=\"/job:localhost/replica:0/task:0/device:GPU:0\"](bn_fm_1/FusedBatchNorm-0-TransposeNHWCToNCHW-LayoutOptimizer, bn_fm/gamma/read, bn_fm/beta/read, bn_fm/moving_mean/read, bn_fm/moving_variance/read)]]\n     [[Node: AddN/_31 = _Recv[client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/device:CPU:0\", send_device=\"/job:localhost/replica:0/task:0/device:GPU:0\", send_device_incarnation=1, tensor_name=\"edge_202_AddN\", tensor_type=DT_FLOAT, _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"]()]]\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"NeuralFM.py\", line 350, in &lt;module&gt;\n    model.train(data.Train_data, data.Validation_data, data.Test_data)\n  File \"NeuralFM.py\", line 266, in train\n    init_train = self.evaluate(Train_data)\n  File \"NeuralFM.py\", line 311, in evaluate\n    predictions = self.sess.run((self.out), feed_dict=feed_dict)\n  File \"/home/alex/anaconda3/envs/tensorflow/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 900, in run\n    run_metadata_ptr)\n  File \"/home/alex/anaconda3/envs/tensorflow/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 1135, in _run\n    feed_dict_tensor, options, run_metadata)\n  File \"/home/alex/anaconda3/envs/tensorflow/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 1316, in _do_run\n    run_metadata)\n  File \"/home/alex/anaconda3/envs/tensorflow/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 1335, in _do_call\n    raise type(e)(node_def, op, message)\ntensorflow.python.framework.errors_impl.InternalError: cuDNN launch failure : input shape ([202027,64,1,1])\n     [[Node: bn_fm_1/FusedBatchNorm = FusedBatchNorm[T=DT_FLOAT, data_format=\"NCHW\", epsilon=0.001, is_training=false, _device=\"/job:localhost/replica:0/task:0/device:GPU:0\"](bn_fm_1/FusedBatchNorm-0-TransposeNHWCToNCHW-LayoutOptimizer, bn_fm/gamma/read, bn_fm/beta/read, bn_fm/moving_mean/read, bn_fm/moving_variance/read)]]\n     [[Node: AddN/_31 = _Recv[client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/device:CPU:0\", send_device=\"/job:localhost/replica:0/task:0/device:GPU:0\", send_device_incarnation=1, tensor_name=\"edge_202_AddN\", tensor_type=DT_FLOAT, _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"]()]]\n\nCaused by op 'bn_fm_1/FusedBatchNorm', defined at:\n  File \"NeuralFM.py\", line 349, in &lt;module&gt;\n    model = NeuralFM(data.features_M, args.hidden_factor, eval(args.layers), args.loss_type, args.pretrain, args.epoch, args.batch_size, args.lr, args.lamda, eval(args.keep_prob), args.optimizer, args.batch_norm, activation_function, args.verbose, args.early_stop)\n  File \"NeuralFM.py\", line 89, in __init__\n    self._init_graph()\n  File \"NeuralFM.py\", line 123, in _init_graph\n    self.FM = self.batch_norm_layer(self.FM, train_phase=self.train_phase, scope_bn='bn_fm')\n  File \"NeuralFM.py\", line 224, in batch_norm_layer\n    is_training=False, reuse=True, trainable=True, scope=scope_bn)\n  File \"/home/alex/anaconda3/envs/tensorflow/lib/python3.6/site-packages/tensorflow/contrib/framework/python/ops/arg_scope.py\", line 183, in func_with_args\n    return func(*args, **current_args)\n  File \"/home/alex/anaconda3/envs/tensorflow/lib/python3.6/site-packages/tensorflow/contrib/layers/python/layers/layers.py\", line 596, in batch_norm\n    scope=scope)\n  File \"/home/alex/anaconda3/envs/tensorflow/lib/python3.6/site-packages/tensorflow/contrib/layers/python/layers/layers.py\", line 382, in _fused_batch_norm\n    is_training, _fused_batch_norm_training, _fused_batch_norm_inference)\n  File \"/home/alex/anaconda3/envs/tensorflow/lib/python3.6/site-packages/tensorflow/contrib/layers/python/layers/utils.py\", line 214, in smart_cond\n    return static_cond(pred_value, fn1, fn2)\n  File \"/home/alex/anaconda3/envs/tensorflow/lib/python3.6/site-packages/tensorflow/contrib/layers/python/layers/utils.py\", line 194, in static_cond\n    return fn2()\n  File \"/home/alex/anaconda3/envs/tensorflow/lib/python3.6/site-packages/tensorflow/contrib/layers/python/layers/layers.py\", line 379, in _fused_batch_norm_inference\n    data_format=data_format)\n  File \"/home/alex/anaconda3/envs/tensorflow/lib/python3.6/site-packages/tensorflow/python/ops/nn_impl.py\", line 906, in fused_batch_norm\n    name=name)\n  File \"/home/alex/anaconda3/envs/tensorflow/lib/python3.6/site-packages/tensorflow/python/ops/gen_nn_ops.py\", line 3465, in _fused_batch_norm\n    is_training=is_training, name=name)\n  File \"/home/alex/anaconda3/envs/tensorflow/lib/python3.6/site-packages/tensorflow/python/framework/op_def_library.py\", line 787, in _apply_op_helper\n    op_def=op_def)\n  File \"/home/alex/anaconda3/envs/tensorflow/lib/python3.6/site-packages/tensorflow/python/framework/ops.py\", line 3414, in create_op\n    op_def=op_def)\n  File \"/home/alex/anaconda3/envs/tensorflow/lib/python3.6/site-packages/tensorflow/python/framework/ops.py\", line 1740, in __init__\n    self._traceback = self._graph._extract_stack()  # pylint: disable=protected-access\n\nInternalError (see above for traceback): cuDNN launch failure : input shape ([202027,64,1,1])\n     [[Node: bn_fm_1/FusedBatchNorm = FusedBatchNorm[T=DT_FLOAT, data_format=\"NCHW\", epsilon=0.001, is_training=false, _device=\"/job:localhost/replica:0/task:0/device:GPU:0\"](bn_fm_1/FusedBatchNorm-0-TransposeNHWCToNCHW-LayoutOptimizer, bn_fm/gamma/read, bn_fm/beta/read, bn_fm/moving_mean/read, bn_fm/moving_variance/read)]]\n     [[Node: AddN/_31 = _Recv[client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/device:CPU:0\", send_device=\"/job:localhost/replica:0/task:0/device:GPU:0\", send_device_incarnation=1, tensor_name=\"edge_202_AddN\", tensor_type=DT_FLOAT, _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"]()]]\n</code></pre>\n\n<p>I keep getting this error, I've tried everything from downgrading CUDA, cuDNN, and tensorflow-gpu.</p>\n\n<p>I'm currently on CUDA 9.0, cuDNN v7.4.2 for CUDA 9.0, tensorflow-gpu 1.9 and nothing I do seems to help. I'm running out of ideas, I've got every dependency I could imagine.</p>\n\n<p>I'm trying to run this:\n<a href=\"https://github.com/hexiangnan/neural_factorization_machine\" rel=\"nofollow noreferrer\">https://github.com/hexiangnan/neural_factorization_machine</a></p>\n\n<p><strong>EDIT:</strong> I have a feeling this is connected to <a href=\"https://github.com/tensorflow/tensorflow/issues/8090\" rel=\"nofollow noreferrer\">https://github.com/tensorflow/tensorflow/issues/8090</a> but as I'm a little new to all this, I'm not sure if I'm right or how to address this.</p>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 67, "user_id": 8298304, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eBb1e.gif?s=128&g=1", "display_name": "Skylar", "link": "https://stackoverflow.com/users/8298304/skylar"}, "edited": false, "score": 0, "creation_date": 1552509960, "post_id": 55150814, "comment_id": 97042139, "body": "It&#39;s different from previously asked question, I also want to keep the single hyphen between words"}, {"owner": {"reputation": 481672, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1552510528, "post_id": 55150814, "comment_id": 97042420, "body": "Replace <code>-{2,}</code> as in the <a href=\"https://stackoverflow.com/a/23508715/3832970\">answer with more votes</a>  with an empty string and it will do the job."}, {"owner": {"reputation": 67, "user_id": 8298304, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eBb1e.gif?s=128&g=1", "display_name": "Skylar", "link": "https://stackoverflow.com/users/8298304/skylar"}, "reply_to_user": {"reputation": 481672, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1552512093, "post_id": 55150814, "comment_id": 97043106, "body": "Thanks! What if we want to replace &#39;word- &#39; to &#39;word - &#39;?"}, {"owner": {"reputation": 481672, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1552512701, "post_id": 55150814, "comment_id": 97043372, "body": "<code>re.sub(r&#39;(\\S)-&#39;, r&#39;\\1 -&#39;, s)</code>"}], "owner": {"reputation": 67, "user_id": 8298304, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eBb1e.gif?s=128&g=1", "display_name": "Skylar", "link": "https://stackoverflow.com/users/8298304/skylar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "closed_date": 1552509458, "answer_count": 0, "score": 0, "last_activity_date": 1552509885, "creation_date": 1552509422, "last_edit_date": 1552509885, "question_id": 55150814, "link": "https://stackoverflow.com/questions/55150814/how-to-remove-continuous-hypens-but-keep-single-hypen-between-words-in-python", "closed_reason": "Duplicate", "title": "How to remove continuous hypens but keep single hypen between words in python?", "body": "<p>For example, if there is something like:</p>\n\n<p>'wow, when I first saw your question--even before the answers, that was my first response.'</p>\n\n<p>I want to remove those hyphens, no matter that's '--', '---', or even more, but if there is a single hyphen between words, we want to keep it, like:\n're-directing','well-worn'</p>\n\n<p>Appreciate any help!</p>\n"}, {"tags": ["python", "tensorflow", "keras", "loss-function"], "comments": [{"owner": {"reputation": 3940, "user_id": 5786339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ffdd81c1ba86b86ddd3eddd4eb1f99a?s=128&d=identicon&r=PG&f=1", "display_name": "Sharky", "link": "https://stackoverflow.com/users/5786339/sharky"}, "edited": false, "score": 0, "creation_date": 1552509910, "post_id": 55150813, "comment_id": 97042119, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/55147714/custom-keras-loss-function-for-counting-non-zero-or-one-values\">custom keras loss function for counting non zero or one values</a>"}, {"owner": {"reputation": 247, "user_id": 4796617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZHDn1.jpg?s=128&g=1", "display_name": "Akshay Kumar", "link": "https://stackoverflow.com/users/4796617/akshay-kumar"}, "edited": false, "score": 0, "creation_date": 1552509995, "post_id": 55150813, "comment_id": 97042158, "body": "I think you should include the complete error trace for others to look up to the line number causing the issue"}, {"owner": {"reputation": 633, "user_id": 11013499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e69964f3ae46dceb9ad103afae2ac45?s=128&d=identicon&r=PG&f=1", "display_name": "david", "link": "https://stackoverflow.com/users/11013499/david"}, "edited": false, "score": 0, "creation_date": 1552513674, "post_id": 55150813, "comment_id": 97043782, "body": "Traceback (most recent call last):    File &quot;&lt;ipython-input-2-765145c4d6db&gt;&quot;, line 134, in &lt;module&gt;     if (pred_w(i,j)&gt;=0 &amp; pred_w(i,j)&lt;0.1)|(pred_w(i,j)&lt;=1 &amp; pred_w(i,j)&gt;=0.9):  TypeError: &#39;Tensor&#39; object is not callable"}, {"owner": {"reputation": 633, "user_id": 11013499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e69964f3ae46dceb9ad103afae2ac45?s=128&d=identicon&r=PG&f=1", "display_name": "david", "link": "https://stackoverflow.com/users/11013499/david"}, "edited": false, "score": 0, "creation_date": 1552513816, "post_id": 55150813, "comment_id": 97043850, "body": "this is the error that it produces. I do not know it is true to use count in this manner. I want during training this count decrese,but I am not sure this code can do it or not?"}], "answers": [{"comments": [{"owner": {"reputation": 633, "user_id": 11013499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e69964f3ae46dceb9ad103afae2ac45?s=128&d=identicon&r=PG&f=1", "display_name": "david", "link": "https://stackoverflow.com/users/11013499/david"}, "edited": false, "score": 0, "creation_date": 1552577900, "post_id": 55165376, "comment_id": 97072399, "body": "Thank you. I am a beginner and maybe sth I said is wrong. I like to add a term to my loss function that forces the values in the output to become 0 or 1 (or near them) I think by counting the values which have values different from 0 and 1 put it in loss function I force the network to decrease them.  could you please tell me this is true or not? what should I do for this?"}, {"owner": {"reputation": 633, "user_id": 11013499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e69964f3ae46dceb9ad103afae2ac45?s=128&d=identicon&r=PG&f=1", "display_name": "david", "link": "https://stackoverflow.com/users/11013499/david"}, "edited": false, "score": 0, "creation_date": 1552585340, "post_id": 55165376, "comment_id": 97077186, "body": "what is your suggestion for this issue? how can I add sth like this to loss function?"}, {"owner": {"reputation": 96, "user_id": 8411300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fff3bc3c5245d5c0e6bfe6a29b71236e?s=128&d=identicon&r=PG&f=1", "display_name": "Xenon", "link": "https://stackoverflow.com/users/8411300/xenon"}, "reply_to_user": {"reputation": 633, "user_id": 11013499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e69964f3ae46dceb9ad103afae2ac45?s=128&d=identicon&r=PG&f=1", "display_name": "david", "link": "https://stackoverflow.com/users/11013499/david"}, "edited": false, "score": 0, "creation_date": 1552588422, "post_id": 55165376, "comment_id": 97078750, "body": "I am not sure what you ask for. I give two examples of losses with similar aims in my answer: If you subtract (x-0.5)^N from your loss your loss gets smaller near 0 and 1 / far from 0.5 and you can optimize this. As I also say in my answer: The main thing the counts are missing is that they are not differentiable, i.e. they do not have a derivative with respect to the model output and the typical neural network optimizers cannot optimize this."}, {"owner": {"reputation": 633, "user_id": 11013499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e69964f3ae46dceb9ad103afae2ac45?s=128&d=identicon&r=PG&f=1", "display_name": "david", "link": "https://stackoverflow.com/users/11013499/david"}, "edited": false, "score": 0, "creation_date": 1552590856, "post_id": 55165376, "comment_id": 97079951, "body": "this means if I use the count it becomes zero in backpropagation because it is a number or you means it is not differentiable?"}, {"owner": {"reputation": 633, "user_id": 11013499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e69964f3ae46dceb9ad103afae2ac45?s=128&d=identicon&r=PG&f=1", "display_name": "david", "link": "https://stackoverflow.com/users/11013499/david"}, "edited": false, "score": 0, "creation_date": 1552591363, "post_id": 55165376, "comment_id": 97080208, "body": "I think I should explain more about things I need. my network has two inputs ( image and w which w is a 0 and 1 input) and two outputs one of them is the reconstructed image of input image and the second output is a reconstructed image but with value 0 or 1."}, {"owner": {"reputation": 633, "user_id": 11013499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e69964f3ae46dceb9ad103afae2ac45?s=128&d=identicon&r=PG&f=1", "display_name": "david", "link": "https://stackoverflow.com/users/11013499/david"}, "edited": false, "score": 0, "creation_date": 1552591368, "post_id": 55165376, "comment_id": 97080212, "body": "this network is an autoencoder. the reconstructed w has values between [0,1], but Iike to force it to send value between 0 ,1 toward 0 and 1 I thought by counting the number of value which are not 0 or 1 and putitng it in loss function I can decrease this balue in each iteration during learning, but you said I can use it for optimization? what should I do?"}, {"owner": {"reputation": 633, "user_id": 11013499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e69964f3ae46dceb9ad103afae2ac45?s=128&d=identicon&r=PG&f=1", "display_name": "david", "link": "https://stackoverflow.com/users/11013499/david"}, "edited": false, "score": 0, "creation_date": 1552591463, "post_id": 55165376, "comment_id": 97080262, "body": "I used MSE for first output and binary_crossentropy for second output but I need a third part in my loss to impower the second output."}, {"owner": {"reputation": 633, "user_id": 11013499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e69964f3ae46dceb9ad103afae2ac45?s=128&d=identicon&r=PG&f=1", "display_name": "david", "link": "https://stackoverflow.com/users/11013499/david"}, "edited": false, "score": 0, "creation_date": 1552622515, "post_id": 55165376, "comment_id": 97089435, "body": "could you please give me more explanation? I need your help. I appreciate every one help."}], "tags": [], "owner": {"reputation": 96, "user_id": 8411300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fff3bc3c5245d5c0e6bfe6a29b71236e?s=128&d=identicon&r=PG&f=1", "display_name": "Xenon", "link": "https://stackoverflow.com/users/8411300/xenon"}, "is_accepted": false, "score": 0, "last_activity_date": 1552574554, "creation_date": 1552574554, "answer_id": 55165376, "question_id": 55150813, "link": "https://stackoverflow.com/questions/55150813/custom-loss-function-with-multiple-output-and-using-add-loss/55165376#55165376", "title": "custom loss function with multiple output and using add_loss", "body": "<p>Technically the error just tells you that pred_w(i,j) should be pred_w[i,j] if you want to refer to an entry of the matrix. However, to make this code as you intend it to run requires quite a bit more rewrite. </p>\n\n<p>To actually optimize a loss the main thing would be that it needs to be differentiable with regard to the weights in the networks. Examples you could use in this case could be:</p>\n\n<ul>\n<li><p>(x-0.5)^N for a relatively high N </p></li>\n<li><p>or log-barriers, i.e. -log(x)-log(1-x) </p></li>\n</ul>\n\n<p>actually counting the numbers (which will not help for optimization) could be achieved with something like </p>\n\n<pre><code>count = tf.sum(pred_w&lt;=0.1) + tf.sum(predictions_w&gt;=0.9)\n</code></pre>\n\n<p>Maybe this is helpful to output how many numbers are in that range during training or something like this.</p>\n"}], "owner": {"reputation": 633, "user_id": 11013499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e69964f3ae46dceb9ad103afae2ac45?s=128&d=identicon&r=PG&f=1", "display_name": "david", "link": "https://stackoverflow.com/users/11013499/david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 348, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1552574554, "creation_date": 1552509422, "last_edit_date": 1552572632, "question_id": 55150813, "link": "https://stackoverflow.com/questions/55150813/custom-loss-function-with-multiple-output-and-using-add-loss", "title": "custom loss function with multiple output and using add_loss", "body": "<p>I have an autoencoder in keras and I need a loss function which is the combination of mse, a binary_crossentropy and third part that tries to make minimum the number of pixels of output that have a value different from 0 or 1. the final loss should be like this: a<em>mse+b</em>binary_crossentropy+c*L. I used the below code for this but it produces this error:</p>\n\n<blockquote>\n  <p>Traceback (most recent call last): File\n  \"\", line 134, in  if\n  (pred_w(i,j)>=0 &amp; pred_w(i,j)&lt;0.1)|(pred_w(i,j)&lt;=1 &amp;\n  pred_w(i,j)>=0.9): TypeError: 'Tensor' object is not callable</p>\n</blockquote>\n\n<p>could you please tell me what should I do to solve this problem? I appreciate your help.</p>\n\n<pre><code>wtm=Input((4,4,1))\nimage = Input((28, 28, 1))\nconv1 = Conv2D(64, (5, 5), activation='relu', padding='same', name='convl1e')(image)\nconv2 = Conv2D(64, (5, 5), activation='relu', padding='same', name='convl2e')(conv1)\nconv3 = Conv2D(64, (5, 5), activation='relu', padding='same', name='convl3e')(conv2)\n#conv3 = Conv2D(8, (3, 3), activation='relu', padding='same', name='convl3e', kernel_initializer='Orthogonal',bias_initializer='glorot_uniform')(conv2)\nBN=BatchNormalization()(conv3)\nencoded =  Conv2D(1, (5, 5), activation='relu', padding='same',name='encoded_I')(BN)\n\n#-----------------------adding w---------------------------------------   \n\nwpad=Kr.layers.Lambda(lambda xy: xy[0] + Kr.backend.spatial_2d_padding(xy[1], padding=((0, 24), (0, 24))))\nencoded_merged=wpad([encoded,wtm])\n\n#-----------------------decoder------------------------------------------------\n#------------------------------------------------------------------------------\ndeconv1 = Conv2D(64, (5, 5), activation='elu', padding='same', name='convl1d')(encoded_merged)\ndeconv2 = Conv2D(64, (5, 5), activation='elu', padding='same', name='convl2d')(deconv1)\ndeconv3 = Conv2D(64, (5, 5), activation='elu',padding='same', name='convl3d')(deconv2)\ndeconv4 = Conv2D(64, (5, 5), activation='elu',padding='same', name='convl4d')(deconv3)\nBNd=BatchNormalization()(deconv4)\n\ndecoded = Conv2D(1, (5, 5), activation='sigmoid', padding='same', name='decoder_output')(BNd)    \nmodel=Model(inputs=[image,wtm],outputs=decoded)\n\ndecoded_noise = GaussianNoise(0.5)(decoded)\n\n#----------------------w extraction------------------------------------\nconvw1 = Conv2D(64, (5,5), activation='relu', name='conl1w')(decoded_noise)#24\nconvw2 = Conv2D(64, (5,5), activation='relu', name='convl2w')(convw1)#20\nconvw3 = Conv2D(64, (5,5), activation='relu' ,name='conl3w')(convw2)#16\nconvw4 = Conv2D(64, (5,5), activation='relu' ,name='conl4w')(convw3)#12\nconvw5 = Conv2D(64, (5,5), activation='relu', name='conl5w')(convw4)#8\nconvw6 = Conv2D(64, (5,5), activation='relu', name='conl6w')(convw5)#4\nconvw7 = Conv2D(64, (5,5), activation='relu',padding='same', name='conl7w',dilation_rate=(2,2))(convw6)#4\nconvw8 = Conv2D(64, (5,5), activation='relu', padding='same',name='conl8w',dilation_rate=(2,2))(convw7)#4\nconvw9 = Conv2D(64, (5,5), activation='relu',padding='same', name='conl9w',dilation_rate=(2,2))(convw8)#4\nconvw10 = Conv2D(64, (5,5), activation='relu',padding='same', name='conl10w',dilation_rate=(2,2))(convw9)#4\nBNed=BatchNormalization()(convw10)\npred_w = Conv2D(1, (1, 1), activation='sigmoid', padding='same', name='reconstructed_W',dilation_rate=(2,2))(BNed)  \n\nw_extraction=Model(inputs=[image,wtm],outputs=[decoded,pred_w])\n\ncount=0\nfor i in range(28):\n    for j in range(28):\n        if (pred_w(i,j)&gt;=0 &amp; pred_w(i,j)&lt;0.1)|(pred_w(i,j)&lt;=1 &amp; pred_w(i,j)&gt;=0.9):\n            count+=1\n\nloss = K.sum(0.7*mse(decoded, image),binary_crossentropy(pred_w,wtm))+count\nw_extraction.add_loss(loss)\n</code></pre>\n"}, {"tags": ["python", "logging", "scope", "package", "rpy2"], "comments": [{"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 0, "creation_date": 1552509508, "post_id": 55150753, "comment_id": 97041935, "body": "All modules/packages get created and executed once when they are first imported, and have a single global scope (a dictionary) which is shared. You&#39;ll have to specify what you mean by &quot;have their scopes local to where they are imported&quot;. Ideally some sample code of the two different kinds of behaviour you&#39;re observing and what you expect might have happened differently."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 0, "creation_date": 1552509953, "post_id": 55150753, "comment_id": 97042137, "body": "@AlexHall Maybe he&#39;s talking about the problem in <a href=\"https://stackoverflow.com/questions/55147462/unknown-librarie-when-modularize-code-python\" title=\"unknown librarie when modularize code python\">stackoverflow.com/questions/55147462/&hellip;</a>"}, {"owner": {"reputation": 173, "user_id": 6195813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf97a4c7466713e29956d4d7f0157b64?s=128&d=identicon&r=PG&f=1", "display_name": "David Miller", "link": "https://stackoverflow.com/users/6195813/david-miller"}, "reply_to_user": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 0, "creation_date": 1552512396, "post_id": 55150753, "comment_id": 97043228, "body": "@AlexHall so for example when I load rpy2 I am essentially creating a SINGLE r environment that I can access from ANY module where I&#39;ve imported the rpy2 package. The rpy2 R environment seems to persist and keep variable names regardless of which module I import the package from. Same kind of behavior from logging package - once I load it, every place where it is imported accesses the same root information. This behavior is distinct from most all other packages I use where there does not appear to be any shared global values or root info."}, {"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 0, "creation_date": 1552512567, "post_id": 55150753, "comment_id": 97043307, "body": "I&#39;ve stated that all modules have the same behaviour where everything is shared, like you&#39;re seeing with logging. You&#39;ve pretty much just restated your question. Show a sample of things not being shared in other packages."}], "owner": {"reputation": 173, "user_id": 6195813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf97a4c7466713e29956d4d7f0157b64?s=128&d=identicon&r=PG&f=1", "display_name": "David Miller", "link": "https://stackoverflow.com/users/6195813/david-miller"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1552509153, "creation_date": 1552509153, "question_id": 55150753, "link": "https://stackoverflow.com/questions/55150753/are-some-python-packages-global-in-nature", "title": "Are some python packages global in nature?", "body": "<p>It seems like some python packages, for example logging and rpy2, once imported, have their scopes available across all modules that import them. Pretty much all the other packages I've worked with appear to only have their scopes local to where they are imported. </p>\n\n<p>I've tried googling / stack overflowing this question, but the common key words make that difficult. </p>\n\n<p>Can someone explain whether there is a difference in how some package scopes behave when imported? </p>\n"}, {"tags": ["python", "numpy", "tensorflow", "keras", "neural-network"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1552511167, "post_id": 55150730, "comment_id": 97042707, "body": "Even more telling, it returns a prediction of <code>1</code> for each of the training values."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1552511265, "post_id": 55150730, "comment_id": 97042759, "body": "Look at your loss function and accuracy: they never change.  Your model isn&#39;t learning anything.  I suggest that you return to the basic examples in your tutorial, and check your process for training a model.  If you&#39;re still having trouble, cite the source you&#39;re using."}, {"owner": {"reputation": 49730, "user_id": 349130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4efeebbf6994bb904738c4fb8922bf?s=128&d=identicon&r=PG", "display_name": "Dr. Snoopy", "link": "https://stackoverflow.com/users/349130/dr-snoopy"}, "edited": false, "score": 1, "creation_date": 1552513422, "post_id": 55150730, "comment_id": 97043692, "body": "Softmax with one neuron makes no sense, it will always produce output of 1.0"}, {"owner": {"reputation": 11552, "user_id": 8112138, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f3b1ddf31abbf37d5fe71ad387e2772c?s=128&d=identicon&r=PG&f=1", "display_name": "Primusa", "link": "https://stackoverflow.com/users/8112138/primusa"}, "edited": false, "score": 1, "creation_date": 1552515324, "post_id": 55150730, "comment_id": 97044387, "body": "use <code>relu</code> or <code>linear</code> for your activation function"}], "owner": {"reputation": 8380, "user_id": 778234, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/6a350b21fd58489ac951a72324548184?s=128&d=identicon&r=PG", "display_name": "NoBugs", "link": "https://stackoverflow.com/users/778234/nobugs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1552509079, "creation_date": 1552509079, "question_id": 55150730, "link": "https://stackoverflow.com/questions/55150730/trying-a-pi-day-nn-not-predicting-correctly", "title": "Trying a pi day nn, not predicting correctly", "body": "<p>I'm attempting to make a simple neural net to \"learn\" pi, and the odd thing is the prediction of this simple neural network is always one??</p>\n\n<p>I know this is not a great use case but I wanted to see if Neural net could find pi this way...</p>\n\n<pre><code>from keras.models import Sequential\nfrom keras.layers import Dense\nimport numpy as np\n\nmodel = Sequential()\nmodel.add(Dense(1, activation='softmax',input_dim=1))\ntrain_x = np.array([1,2,3,4,10])\ntrain_y = [x*3.14 for x in train_x]\nprint(train_y)\n\nmodel.compile(loss='mse',optimizer='adam', metrics=['accuracy'])\nmodel.fit(train_x, train_y, epochs=300, batch_size=10)\n\nprint( model.predict( np.array([.5])) )\nprint( model.predict( np.array([2.5])) )\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1552509262, "post_id": 55150723, "comment_id": 97041831, "body": "Why do you have <code>for value in d:</code> if you never use <code>value</code> in the loop?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1552509355, "post_id": 55150723, "comment_id": 97041870, "body": "Maybe the lines in your file have spaces at the end. Try using <code>line.strip()</code> instead of <code>line.strip(&quot;\\n&quot;)</code>. That will remove all surrounding whitespace."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 1, "creation_date": 1552509549, "post_id": 55150723, "comment_id": 97041956, "body": "<code>values()</code> will itself give a list, containing lists of <code>values</code>. In other words, you end up with a nested list. Your word will not compare equal to any of the sublists"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1552509679, "post_id": 55150723, "comment_id": 97042012, "body": "I&#39;m not sure exactly what you&#39;re trying to do, but it seems your dictionary is the wrong way around. Searching the values of a dictionary is grossly inefficient; they&#39;re a data structure that relies on searching for <i>keys</i>. Searching for keys is constant time, but searching the values will be proportional to how long, and nested, your values are."}, {"owner": {"reputation": 103, "user_id": 11199528, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D98fi.jpg?s=128&g=1", "display_name": "Keyk123", "link": "https://stackoverflow.com/users/11199528/keyk123"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1552510620, "post_id": 55150723, "comment_id": 97042462, "body": "@Barmar I thought value was a keyword, but now see it isn&#39;t. I replaced it with key and it still won&#39;t find a word"}, {"owner": {"reputation": 103, "user_id": 11199528, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D98fi.jpg?s=128&g=1", "display_name": "Keyk123", "link": "https://stackoverflow.com/users/11199528/keyk123"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1552510721, "post_id": 55150723, "comment_id": 97042510, "body": "@roganjosh I know that you&#39;re not supposed to set it up this way, but this is for an assignment and we have to find if a value exists in a dictionary"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1552510906, "post_id": 55150723, "comment_id": 97042604, "body": "&quot;Find if a value exists in a dictionary&quot; almost always means &quot;check to see if the &#39;value&#39; is a <i>key</i> in the dictionary&quot;. Maybe you are correct in the specifics of your task, but it&#39;s also worth double-checking because this exercise can only illustrate why you <i>wouldn&#39;t</i> want to set up a dictionary this way around."}, {"owner": {"reputation": 3667, "user_id": 6789321, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-B5oSDMyNAyc/AAAAAAAAAAI/AAAAAAAAT6s/i6ZRf_boOu4/photo.jpg?sz=128", "display_name": "accdias", "link": "https://stackoverflow.com/users/6789321/accdias"}, "edited": false, "score": 0, "creation_date": 1552512478, "post_id": 55150723, "comment_id": 97043261, "body": "Do you really want the first character of <code>line</code> (that&#39;s what <code>line[0]</code> will do) to be your dictionary key?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1552512548, "post_id": 55150723, "comment_id": 97043296, "body": "Can you show an example of what&#39;s in <code>input.txt</code> and what you&#39;re searching for?"}], "answers": [{"comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1552510802, "post_id": 55151063, "comment_id": 97042543, "body": "The issue is not substrings, it&#39;s trying to match strings against sublists"}, {"owner": {"reputation": 681, "user_id": 7579116, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ZAT8sPIj4Qo/AAAAAAAAAAI/AAAAAAAAAbw/ksITS9vX5do/photo.jpg?sz=128", "display_name": "Shailyn Ortiz", "link": "https://stackoverflow.com/users/7579116/shailyn-ortiz"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1552510873, "post_id": 55151063, "comment_id": 97042589, "body": "you are completely right @roganjosh, in my answer I fixed the issue with a second for, I should make it more clear, let me edit it, or would you like to edit my answer yourself ? Best regards"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1552511669, "post_id": 55151063, "comment_id": 97042920, "body": "The values in his dictionary are lists of strings, not lists of lists."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1552511690, "post_id": 55151063, "comment_id": 97042930, "body": "<code>d[key].append(line.strip(&quot;\\n&quot;))</code> appends a string to the list, it doesn&#39;t append a list."}, {"owner": {"reputation": 681, "user_id": 7579116, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ZAT8sPIj4Qo/AAAAAAAAAAI/AAAAAAAAAbw/ksITS9vX5do/photo.jpg?sz=128", "display_name": "Shailyn Ortiz", "link": "https://stackoverflow.com/users/7579116/shailyn-ortiz"}, "edited": false, "score": 0, "creation_date": 1552511959, "post_id": 55151063, "comment_id": 97043040, "body": "that&#39;s right, but if you call d.values() it returns a list of list that you iterate with the first for making each element a list"}, {"owner": {"reputation": 681, "user_id": 7579116, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ZAT8sPIj4Qo/AAAAAAAAAAI/AAAAAAAAAbw/ksITS9vX5do/photo.jpg?sz=128", "display_name": "Shailyn Ortiz", "link": "https://stackoverflow.com/users/7579116/shailyn-ortiz"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1552511980, "post_id": 55151063, "comment_id": 97043050, "body": "@Barmar dict_values([[&#39;la;slkalsklask&#39;, &quot;lg,vtlgekw &#39;sg&quot;], [&#39; sdksd&#39;, &#39; dsjaksdjkds qdwnqnqw&#39;, ...]]"}, {"owner": {"reputation": 681, "user_id": 7579116, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ZAT8sPIj4Qo/AAAAAAAAAAI/AAAAAAAAAbw/ksITS9vX5do/photo.jpg?sz=128", "display_name": "Shailyn Ortiz", "link": "https://stackoverflow.com/users/7579116/shailyn-ortiz"}, "edited": false, "score": 0, "creation_date": 1552512092, "post_id": 55151063, "comment_id": 97043103, "body": "let me rephrase my explanation"}], "tags": [], "owner": {"reputation": 681, "user_id": 7579116, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ZAT8sPIj4Qo/AAAAAAAAAAI/AAAAAAAAAbw/ksITS9vX5do/photo.jpg?sz=128", "display_name": "Shailyn Ortiz", "link": "https://stackoverflow.com/users/7579116/shailyn-ortiz"}, "is_accepted": false, "score": 0, "last_activity_date": 1552512153, "last_edit_date": 1552512153, "creation_date": 1552510579, "answer_id": 55151063, "question_id": 55150723, "link": "https://stackoverflow.com/questions/55150723/cant-find-if-a-value-exists-in-a-dictionary-from-input-in-python/55151063#55151063", "title": "Can&#39;t find if a value exists in a dictionary from input in Python", "body": "<p>This is actually what you are looking for</p>\n\n<pre><code>find_word = input(\"Search a word: \")\nfound = False\n\nfor _list in d.values():\n\n    for element in _list:\n\n        if element.find(find_word) != -1:\n\n            print('Found')\n            found = True\n            break\n\n    if found:\n        break\nelse:\n    print('Not found')\n</code></pre>\n\n<p>when you use the keyword <code>in</code> to perform a search it needs to be an exact match, therefore if you do <code>'test' in ['test2', 'test3']</code> it will evaluate to false as it's not an exact match, in top of this, the values in your dictionary keys are lists of lists instead of 1 level lists, such as:</p>\n\n<p><code>dict_values([['text'], .... ['textn']])</code> </p>\n\n<p>causing the condition to be:</p>\n\n<p><code>'word' in [[...], ..., [..]]</code></p>\n\n<p>This will never match.</p>\n\n<p>You need a secondary for to iterate among the sub lists combined with <code>find</code> that looks for sequence of strings inside another give string, because the items in the sub lists are complete lines, allowing partial match.</p>\n"}, {"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 28647, "user_id": 1422096, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/da3871bf5450fa726f20557fa3f18f51?s=128&d=identicon&r=PG", "display_name": "Basj", "link": "https://stackoverflow.com/users/1422096/basj"}, "edited": false, "score": 0, "creation_date": 1552511555, "post_id": 55151147, "comment_id": 97042865, "body": "That&#39;s intentional. Read what I wrote right after it."}, {"owner": {"reputation": 681, "user_id": 7579116, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ZAT8sPIj4Qo/AAAAAAAAAAI/AAAAAAAAAbw/ksITS9vX5do/photo.jpg?sz=128", "display_name": "Shailyn Ortiz", "link": "https://stackoverflow.com/users/7579116/shailyn-ortiz"}, "edited": false, "score": 0, "creation_date": 1552511722, "post_id": 55151147, "comment_id": 97042941, "body": "The variables name wordlist and word_list doesn&#39;t match, therefore causing and error"}, {"owner": {"reputation": 681, "user_id": 7579116, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ZAT8sPIj4Qo/AAAAAAAAAAI/AAAAAAAAAbw/ksITS9vX5do/photo.jpg?sz=128", "display_name": "Shailyn Ortiz", "link": "https://stackoverflow.com/users/7579116/shailyn-ortiz"}, "edited": false, "score": 0, "creation_date": 1552512079, "post_id": 55151147, "comment_id": 97043094, "body": "This doesn&#39;t find the words, I tried running it with a sample file on my local, when you get to if find_word in world_list it does an exact match but the values &quot;word_list&quot; at that point is not a list of words is a list of lines, unless he is looking for the whole line it won&#39;t work."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 681, "user_id": 7579116, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ZAT8sPIj4Qo/AAAAAAAAAAI/AAAAAAAAAbw/ksITS9vX5do/photo.jpg?sz=128", "display_name": "Shailyn Ortiz", "link": "https://stackoverflow.com/users/7579116/shailyn-ortiz"}, "edited": false, "score": 0, "creation_date": 1552512234, "post_id": 55151147, "comment_id": 97043163, "body": "@ShailynOrtiz I assumed the file is one word per line."}, {"owner": {"reputation": 681, "user_id": 7579116, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ZAT8sPIj4Qo/AAAAAAAAAAI/AAAAAAAAAbw/ksITS9vX5do/photo.jpg?sz=128", "display_name": "Shailyn Ortiz", "link": "https://stackoverflow.com/users/7579116/shailyn-ortiz"}, "edited": false, "score": 0, "creation_date": 1552512341, "post_id": 55151147, "comment_id": 97043205, "body": "&lt;&lt;In the face of ambiguity, refuse the temptation to guess.&gt;&gt;"}, {"owner": {"reputation": 3667, "user_id": 6789321, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-B5oSDMyNAyc/AAAAAAAAAAI/AAAAAAAAT6s/i6ZRf_boOu4/photo.jpg?sz=128", "display_name": "accdias", "link": "https://stackoverflow.com/users/6789321/accdias"}, "edited": false, "score": 0, "creation_date": 1552512349, "post_id": 55151147, "comment_id": 97043211, "body": "You don&#39;t need a <code>for</code> loop for that checking. A simple <code>if find_word in d.values()</code> will do the job."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1552512440, "post_id": 55151147, "comment_id": 97043247, "body": "No, because <code>d.values()</code> is a list of lists."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1552512486, "post_id": 55151147, "comment_id": 97043269, "body": "The question says &quot;if a value exists&quot;. It doesn&#39;t say &quot;if a value is a substring&quot;. So I look for exact matches."}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 0, "last_activity_date": 1552511753, "last_edit_date": 1552511753, "creation_date": 1552510951, "answer_id": 55151147, "question_id": 55150723, "link": "https://stackoverflow.com/questions/55150723/cant-find-if-a-value-exists-in-a-dictionary-from-input-in-python/55151147#55151147", "title": "Can&#39;t find if a value exists in a dictionary from input in Python", "body": "<p>You should be using <code>d.values()</code> as the list to iterate over in the <code>for</code> loop. Then test whether the search word is in each list.</p>\n\n<pre><code>for word_list in d.values():\n    if find_word in word_list:\n        print(\"Word is found\")\n        break\nelse:\n    print(\"Word is not found\")\n</code></pre>\n\n<p>Notice that the <code>else:</code> that prints that the word is not found should not be in the <code>if</code>, it should be in <code>for</code>. This way it prints the message only if none of the lists in the dictionary contains the word. The <code>else:</code> clause of a loop is executed if the loop finishes normally, rather than being exited with <code>break</code>.</p>\n\n<p>You can also use the <code>any()</code> function:</p>\n\n<pre><code>if any(find_word in word_list for word_list in d.values()):\n    print(\"Word is found\")\nelse:\n    print(\"Word is not found\")\n</code></pre>\n"}], "owner": {"reputation": 103, "user_id": 11199528, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D98fi.jpg?s=128&g=1", "display_name": "Keyk123", "link": "https://stackoverflow.com/users/11199528/keyk123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 229, "favorite_count": 0, "accepted_answer_id": 55151147, "answer_count": 2, "score": 0, "last_activity_date": 1552512153, "creation_date": 1552509064, "question_id": 55150723, "link": "https://stackoverflow.com/questions/55150723/cant-find-if-a-value-exists-in-a-dictionary-from-input-in-python", "title": "Can&#39;t find if a value exists in a dictionary from input in Python", "body": "<pre><code>my_file = open(\"input.txt\",'r')\nd = {}\nfor line in my_file:\n    key = line[0]\n    if key not in d:\n        d[key] = [line.strip(\"\\n\")]\n    else:\n        d[key].append(line.strip(\"\\n\"))\n\nfor key in d:\n    print(key,d[key])\nprint(\"\")\nfind_word = input(\"Search a word: \")\nfor value in d:\n    if find_word in d.values():\n       print(\"Word is found\")\n       break\n    else:\n        print(\"Word not found\")\n        break\n</code></pre>\n\n<p>I've seen some other questions about this question, but they seem to be more complex than mine. I'm a beginner, and my code always returns \"not found\".</p>\n"}, {"tags": ["python", "github", "github-api"], "owner": {"reputation": 31, "user_id": 10885995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/775bfb1790c36b255ba56b15f57a0e28?s=128&d=identicon&r=PG&f=1", "display_name": "rsa", "link": "https://stackoverflow.com/users/10885995/rsa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 2, "answer_count": 0, "score": 3, "last_activity_date": 1552509059, "creation_date": 1552509059, "question_id": 55150720, "link": "https://stackoverflow.com/questions/55150720/how-do-you-pull-child-and-parent-issues-using-the-github-api-or-pygithub", "title": "How do you pull child and parent issues using the GitHub API or PyGithub?", "body": "<p>In Github, you have the option of referencing issues within an issue. For example, I can make an epic which in turn acts as the parent of n number of child issues I create.</p>\n\n<p>Is there a way to pull linked issues using the <a href=\"https://developer.github.com/v3/issues/#list-issues\" rel=\"nofollow noreferrer\">Github API</a> or <a href=\"https://pygithub.readthedocs.io/en/latest/index.html\" rel=\"nofollow noreferrer\">PyGithub</a>?</p>\n\n<p>I am able to pull details such as title, state, login_name, issue number, etc. using the API, but cannot figure out how to pull linked issues without writing a complex script that parses through the content of the body. </p>\n"}, {"tags": ["python", "yaml", "pyyaml"], "answers": [{"comments": [{"owner": {"reputation": 149, "user_id": 8584758, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A1b8V.jpg?s=128&g=1", "display_name": "Jocomol", "link": "https://stackoverflow.com/users/8584758/jocomol"}, "edited": false, "score": 1, "creation_date": 1552584226, "post_id": 55152255, "comment_id": 97076502, "body": "Thank you that did it for me. also took your other tips into consideration."}], "tags": [], "owner": {"reputation": 50175, "user_id": 1307905, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a38a4f5f180194ac457cdc057f1be6e3?s=128&d=identicon&r=PG", "display_name": "Anthon", "link": "https://stackoverflow.com/users/1307905/anthon"}, "is_accepted": true, "score": 6, "last_activity_date": 1552569037, "last_edit_date": 1552569037, "creation_date": 1552517032, "answer_id": 55152255, "question_id": 55150710, "link": "https://stackoverflow.com/questions/55150710/python-iterate-through-yaml/55152255#55152255", "title": "Python iterate through YAML", "body": "<p>There are several problems here:</p>\n\n<ul>\n<li>Your YAML is invalid. The key <code>A3</code> does not align with <code>A2</code> (or <code>A2B</code>). I assume\nyou want it aligned with <code>A2</code></li>\n<li>the key in the root level mapping is <code>A</code> not <code>A1</code>, so you should start with\n<code>foobar['A']</code> to traverse the data structure.</li>\n<li>there is no such thing as <code>[*]</code> use <code>.items()</code> to get the key-value pairs, or <code>.values()</code> to\nonly get the values of the nested mapping/dict</li>\n<li>your <code>for</code> statement is incorrectly indented</li>\n<li>you are using PyYAML's <code>load()</code>  which is documented to be potentially unsafe, and there\nis no need to use it. Use <code>safe_load()</code>, or upgrade to <code>ruamel.yaml</code> which gives\nyou YAML 1.2 and much more (disclaimer: I am the author of ruamel.yaml)</li>\n</ul>\n\n<p>E.g. you can do:</p>\n\n<pre><code>import sys\nimport ruamel.yaml\n\n\nyaml = ruamel.yaml.YAML(typ='safe')\nwith open('foobar.yaml') as fp:\n  data = yaml.load(fp)\n\nend_value = 0\nfor one_value in  data['A']['A3']['A3A']['A3A1'].values():\n   end_value += one_value\n\nprint(end_value)\n</code></pre>\n\n<p>which gives:</p>\n\n<pre><code>300\n</code></pre>\n"}], "owner": {"reputation": 149, "user_id": 8584758, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A1b8V.jpg?s=128&g=1", "display_name": "Jocomol", "link": "https://stackoverflow.com/users/8584758/jocomol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3306, "favorite_count": 0, "accepted_answer_id": 55152255, "answer_count": 1, "score": 2, "last_activity_date": 1552569037, "creation_date": 1552509030, "last_edit_date": 1552517084, "question_id": 55150710, "link": "https://stackoverflow.com/questions/55150710/python-iterate-through-yaml", "title": "Python iterate through YAML", "body": "<p>How can one iterate through:</p>\n\n<pre><code>A:\n  A1: 1000\n  A2:\n    A2A:\n      A2A1: 100\n      A2A2: 250\n      A2A3: 250\n    A2B:\n      A2B1: 100\n      A2B2: 300\n   A3:\n     A3A:\n       A3A1:\n         A3A1A: 200\n         A3A1B: 100\n         # There could be more values\n</code></pre>\n\n<p>I want to add the values of <code>A3A1A</code> and <code>A3A1B</code> and other values in the same place</p>\n\n<p>I tried the following:</p>\n\n<pre><code>    with open(\"foobar.yml\", 'r') as stream:\n            foobar = yaml.load(stream)\n    end_value = 0\n        for one_value in foobar[\"A1\"][\"A3\"][\"A3A\"] [\"A3A1\"][*]:\n           end_value = end_value + one_value \n</code></pre>\n\n<p>but this doesn't work</p>\n"}, {"tags": ["python", "datetime"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1552509201, "post_id": 55150703, "comment_id": 97041805, "body": "What template language is this? It seems this logic would be better on the backend but try <code>{{(datetime.datetime.strptime(row[&#39;due_date&#39;], &quot;%Y-%m-%d&quot;).date() - cur_date.date()).days}}</code>"}, {"owner": {"reputation": 1036, "user_id": 9855588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef25aee783cab58b07adb188667fb051?s=128&d=identicon&r=PG&f=1", "display_name": "dataviews", "link": "https://stackoverflow.com/users/9855588/dataviews"}, "edited": false, "score": 0, "creation_date": 1552509303, "post_id": 55150703, "comment_id": 97041847, "body": "consider strftime ?"}, {"owner": {"reputation": 400, "user_id": 6635590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8863c93f917b2a5c69298eabb1b0c809?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler H", "link": "https://stackoverflow.com/users/6635590/tyler-h"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1552592182, "post_id": 55150703, "comment_id": 97080590, "body": "@roganjosh I am using the python bottle framework which uses <code>.tpl</code>"}], "answers": [{"comments": [{"owner": {"reputation": 170, "user_id": 10545803, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8RDv6ca5P2Q/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbCtxm9xDpnI65ps6PQWyrDatqWcMA/mo/photo.jpg?sz=128", "display_name": "Mehran Jalili", "link": "https://stackoverflow.com/users/10545803/mehran-jalili"}, "reply_to_user": {"reputation": 400, "user_id": 6635590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8863c93f917b2a5c69298eabb1b0c809?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler H", "link": "https://stackoverflow.com/users/6635590/tyler-h"}, "edited": false, "score": 0, "creation_date": 1552643295, "post_id": 55150940, "comment_id": 97097366, "body": "The last line is your answer."}, {"owner": {"reputation": 400, "user_id": 6635590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8863c93f917b2a5c69298eabb1b0c809?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler H", "link": "https://stackoverflow.com/users/6635590/tyler-h"}, "edited": false, "score": 0, "creation_date": 1552679190, "post_id": 55150940, "comment_id": 97117698, "body": "This works for anyone seeing but you will need to add own &quot;days&quot; or &quot;day left&quot;"}], "tags": [], "owner": {"reputation": 170, "user_id": 10545803, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8RDv6ca5P2Q/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbCtxm9xDpnI65ps6PQWyrDatqWcMA/mo/photo.jpg?sz=128", "display_name": "Mehran Jalili", "link": "https://stackoverflow.com/users/10545803/mehran-jalili"}, "is_accepted": true, "score": 2, "last_activity_date": 1552611271, "last_edit_date": 1552611271, "creation_date": 1552509950, "answer_id": 55150940, "question_id": 55150703, "link": "https://stackoverflow.com/questions/55150703/python-datetime-get-only-days-from-datetime-object/55150940#55150940", "title": "Python datetime get only days from datetime object", "body": "<p>This is a nice example for date comparison.</p>\n\n<pre><code>import datetime\n\n\nstr_date = \"2019-03-18\"\n\nprint(datetime.datetime.today().date())\n\nobject_date = datetime.datetime.strptime(str_date, '%Y-%m-%d')\nif datetime.datetime.today().date() &gt;= object_date.date():\n    print(True)\nelse:\n    print(False)\n\nprint((object_date.date() - datetime.datetime.today().date()).days)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 12814945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87dbc0a1a0518f170370a506ac4e189e?s=128&d=identicon&r=PG&f=1", "display_name": "HGalloway", "link": "https://stackoverflow.com/users/12814945/hgalloway"}, "is_accepted": false, "score": 0, "last_activity_date": 1617381311, "creation_date": 1617381311, "answer_id": 66922420, "question_id": 55150703, "link": "https://stackoverflow.com/questions/55150703/python-datetime-get-only-days-from-datetime-object/66922420#66922420", "title": "Python datetime get only days from datetime object", "body": "<pre><code>from datetime import date\n\nCurrentDay = date.today().day\nprint(CurrentDay)\n</code></pre>\n<p>CurrentDay is what you want. It just prints the day.</p>\n"}], "owner": {"reputation": 400, "user_id": 6635590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8863c93f917b2a5c69298eabb1b0c809?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler H", "link": "https://stackoverflow.com/users/6635590/tyler-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1998, "favorite_count": 0, "accepted_answer_id": 55150940, "answer_count": 2, "score": 0, "last_activity_date": 1617381311, "creation_date": 1552508990, "question_id": 55150703, "link": "https://stackoverflow.com/questions/55150703/python-datetime-get-only-days-from-datetime-object", "title": "Python datetime get only days from datetime object", "body": "<p>I am making a website and I want to compare the dates but then when I do that it gives me an extra <code>0:00:00</code> which I don't want this is my code: </p>\n\n<pre><code>% if (datetime.datetime.strptime(row['due_date'], \"%Y-%m-%d\") - cur_date).days &lt;= 0:\n      &lt;kbd style=\"background-color: #a52c2c;\"&gt;{{datetime.datetime.strptime(row['due_date'], \"%Y-%m-%d\").date() - cur_date.date()}}&lt;/kbd&gt;\n\n% elif (datetime.datetime.strptime(row['due_date'], \"%Y-%m-%d\") - cur_date).days &lt;= 2:\n      &lt;kbd style=\"background-color: #cc781e;\"&gt;{{datetime.datetime.strptime(row['due_date'], \"%Y-%m-%d\").date() - cur_date.date()}}&lt;/kbd&gt;\n\n% else:\n      &lt;kbd&gt;{{datetime.datetime.strptime(row['due_date'], \"%Y-%m-%d\").date() - cur_date.date()}}&lt;/kbd&gt;\n% end\n</code></pre>\n\n<p>I know it is messy but it works and it returns this: <code>3 days, 0:00:00</code> but I don't want the extra minutes etc. I know this might already be asked but I haven't seen anything</p>\n"}, {"tags": ["python", "dictionary", "for-loop", "optimization", "numba"], "comments": [{"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1552523083, "post_id": 55150687, "comment_id": 97046548, "body": "I can&#39;t help but notice your inner <code>defaultdict(list)</code> never seem to have more than one entry in each <code>list</code>. Are you sure you need a <code>list</code> at all there?"}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1552523465, "post_id": 55150687, "comment_id": 97046640, "body": "Also, why are the <code>patent_team</code> values a one element <code>list</code> containing a one-element <code>list</code> containing a single two-<code>tuple</code>? Can either the inner or outer <code>list</code> contain more than one element? Can the inner two-<code>tuple</code> have a different number of elements?"}, {"owner": {"reputation": 17, "user_id": 6323796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29a191f53ed82e447468e9c52ed1ca6a?s=128&d=identicon&r=PG&f=1", "display_name": "Balvaishwer Salaria", "link": "https://stackoverflow.com/users/6323796/balvaishwer-salaria"}, "reply_to_user": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1552524581, "post_id": 55150687, "comment_id": 97046912, "body": "@ShadowRanger, I initially tried making the defaultdict(int) but for keys which do not already exists it does not have an append method, hence I needed to add the extra code of lines to check if the key already exists and if not then initialize it to a list, in order to save myself from all of these I converted it to a list by default."}, {"owner": {"reputation": 17, "user_id": 6323796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29a191f53ed82e447468e9c52ed1ca6a?s=128&d=identicon&r=PG&f=1", "display_name": "Balvaishwer Salaria", "link": "https://stackoverflow.com/users/6323796/balvaishwer-salaria"}, "reply_to_user": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1552524649, "post_id": 55150687, "comment_id": 97046935, "body": "@ShadowRanger, yes the lists can contain more than one element in the list, I just printed out the few initial values for the reference. It can be like this. &#39;&#39;&#39; 3930857: [[(&#39;3930857-1&#39;, &#39;3930857-2&#39;), (&#39;3930857-1&#39;, &#39;3930857-3&#39;), (&#39;3930857-2&#39;, &#39;3930857-3&#39;)], [(&#39;3930857-1&#39;, &#39;3930857-2&#39;, &#39;3930857-3&#39;)]], &#39;&#39;&#39;"}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 6323796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29a191f53ed82e447468e9c52ed1ca6a?s=128&d=identicon&r=PG&f=1", "display_name": "Balvaishwer Salaria", "link": "https://stackoverflow.com/users/6323796/balvaishwer-salaria"}, "edited": false, "score": 0, "creation_date": 1552623117, "post_id": 55153178, "comment_id": 97089563, "body": "thank you so much for the solution, it was so simple yet so difficult. I tried the first one it worked perfectly fine. However, how do you suggest following the second approach, if you could elucidate it."}, {"owner": {"reputation": 6120, "user_id": 9214517, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uHHGLaUqJK4/AAAAAAAAAAI/AAAAAAAAAAA/EMWzo-f2N9c/photo.jpg?sz=128", "display_name": "adrtam", "link": "https://stackoverflow.com/users/9214517/adrtam"}, "reply_to_user": {"reputation": 17, "user_id": 6323796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29a191f53ed82e447468e9c52ed1ca6a?s=128&d=identicon&r=PG&f=1", "display_name": "Balvaishwer Salaria", "link": "https://stackoverflow.com/users/6323796/balvaishwer-salaria"}, "edited": false, "score": 0, "creation_date": 1552659328, "post_id": 55153178, "comment_id": 97107009, "body": "Depends on your problem. If I need to do it over and over again, or some more complicated operations will be done, a SQLite database or pandas DataFrame will be handy. Especially I can save them into a file and move around. Also it is much easier to peek at the data than a plain dict."}], "tags": [], "owner": {"reputation": 6120, "user_id": 9214517, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uHHGLaUqJK4/AAAAAAAAAAI/AAAAAAAAAAA/EMWzo-f2N9c/photo.jpg?sz=128", "display_name": "adrtam", "link": "https://stackoverflow.com/users/9214517/adrtam"}, "is_accepted": false, "score": 1, "last_activity_date": 1552523723, "creation_date": 1552523723, "answer_id": 55153178, "question_id": 55150687, "link": "https://stackoverflow.com/questions/55150687/iterate-and-compare-two-python-dictionaries-in-most-pythonic-way-for-fast-execut/55153178#55153178", "title": "Iterate and compare two python dictionaries in most pythonic way for fast execution", "body": "<p>Two ways to improve, see which one is convenient for you:</p>\n\n<p>First I would reverse the order of your loop:</p>\n\n<pre><code>for a,b in patent_team.items():\n    for i in b:\n        for k in i:\n            if k in teams_id:\n                for z in k:\n                    output_dict[a][z].append(teams_id[k])\n</code></pre>\n\n<p>because I would assume <code>patent_teams</code> is a smaller dict than <code>teams_id</code> and I can make use of the O(1) lookup on <code>teams_id</code>, instead of the O(n) iteration on each item.</p>\n\n<p>Second approach is to convert your data before combining. You can try iron out the two dictionaries into a tabular form and put it in pandas DataFrame or even save them into a database (SQLite in this case would be handy). The benefit of doing so is that you will probably offload your table join/DataFrame merge operation out of your Python interpreter. Thus faster.</p>\n"}, {"comments": [{"owner": {"reputation": 17, "user_id": 6323796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29a191f53ed82e447468e9c52ed1ca6a?s=128&d=identicon&r=PG&f=1", "display_name": "Balvaishwer Salaria", "link": "https://stackoverflow.com/users/6323796/balvaishwer-salaria"}, "edited": false, "score": 0, "creation_date": 1552623267, "post_id": 55153268, "comment_id": 97089592, "body": "thank you for the insightful answer, I tried running it, but gave me an exception, &quot;too many values to unpack (expected 1)&quot;. I tried fixing it, can you help me with that."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 17, "user_id": 6323796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29a191f53ed82e447468e9c52ed1ca6a?s=128&d=identicon&r=PG&f=1", "display_name": "Balvaishwer Salaria", "link": "https://stackoverflow.com/users/6323796/balvaishwer-salaria"}, "edited": false, "score": 0, "creation_date": 1552648636, "post_id": 55153268, "comment_id": 97100592, "body": "@BalvaishwerSalaria: Yeah, the unpacking assumed superfluous lists. Since it seems like only one layer of the <code>list</code> is superfluous (and it&#39;s the inner layer, so you can&#39;t just unpack the outer layer), I&#39;ve added an alternative."}, {"owner": {"reputation": 17, "user_id": 6323796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29a191f53ed82e447468e9c52ed1ca6a?s=128&d=identicon&r=PG&f=1", "display_name": "Balvaishwer Salaria", "link": "https://stackoverflow.com/users/6323796/balvaishwer-salaria"}, "edited": false, "score": 0, "creation_date": 1553063088, "post_id": 55153268, "comment_id": 97241260, "body": "your solution worked perfectly fine, thank you so much for your answers. It was a great insight which increased the execution speed manifolds. It was great to learn all the stuff. Thank you again."}], "tags": [], "owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "is_accepted": true, "score": 1, "last_activity_date": 1601076244, "last_edit_date": 1601076244, "creation_date": 1552524374, "answer_id": 55153268, "question_id": 55150687, "link": "https://stackoverflow.com/questions/55150687/iterate-and-compare-two-python-dictionaries-in-most-pythonic-way-for-fast-execut/55153268#55153268", "title": "Iterate and compare two python dictionaries in most pythonic way for fast execution", "body": "<p>If the list wrapping is really superfluous, and you ignore cases where the corresponding key isn't in <code>team_ids</code>, you can dramatically reduce the number of loops and membership tests here:</p>\n<pre><code>def formoutput(teams_id, patent_team):\n    &quot;&quot;&quot;\n    The function to compare team_id and patent_teams to form the default dictionary matching values\n    :param teams_id: {('3879797-2', '3930281-2'): 1, ('3930282-1', '3930282-2'): 2, ('3930288-1', '3930288-2'): 3, ... }\n    :param patent_team: {3930281: [[('3879797-2', '3930281-2')]], 3930282: [[('3930282-1', '3930282-2')]], 3930288: [[('3930288-1', '3930288-2')]], ... }\n    :return: defaultdict(&lt;function defaultdict.copy&gt;, {3930281: defaultdict(list, {'3879797-2': [1], '3930281-2': [1]}), 3930282: defaultdict(list, {'3930282-1': [2], '3930282-2': [2]}), 3930288: defaultdict(list, {'3930288-1': [3], '3930288-2': [3]}), 3930292: defaultdict(list, {'3861607-1': [4], '3861607-2': [4]}), ..}\n    ...:\n    &quot;&quot;&quot;\n    print(&quot;Forming Output&quot;)\n    print(&quot;Teams id =&quot;, teams_id)\n    print(&quot;Patent_team=&quot;, patent_team)\n    # I hate lambdas, and as it happens, we don't need'em;\n    # defaultdict(list).copy is cleaner and faster\n    output_dict = defaultdict(defaultdict(list).copy)\n    try:\n        # [[pvs]] unpacks the superfluous(?) lists wrapping the tuple we care about\n        for pk, [[pvs]] in patent_team.items():\n            # Get the value to set once up front\n            try:\n                v = teams_id[pvs]\n            except KeyError:\n                continue  # Don't have a value to set, so move to next\n            # Perform the first layer of dict lookup once since the key is the same\n            # each time to avoid cost of repeated lookup\n            pkdict = output_dict[pk]\n            for pv in pvs:\n                pkdict[pv].append(v)\n    except Exception as e:\n        print(e)\n    return output_dict\n</code></pre>\n<p>I inverted the loops, since <code>patent_teams</code> keys are the keys of the outer result <code>defaultdict</code>, it makes sense to loop over <code>patent_teams</code> first, avoiding repeated lookups into <code>output_dict</code> for each <code>patent_teams</code> key. It also means you can use the value from <code>patent_teams</code> to directly look up what you need from <code>teams_id</code>, rather than iterating through <code>teams_id</code> to search.</p>\n<p>If the <code>list</code> wrapping is not superfluous, replace:</p>\n<pre><code>for pk, [[pvs]] in patent_team.items():\n</code></pre>\n<p>with:</p>\n<pre><code>for pk, pvs_lists in patent_team.items():\n    for pvs in chain.from_iterable(pvs_lists):\n</code></pre>\n<p>making sure to include the import <code>from itertools import chain</code> at the top of your file.</p>\n"}], "owner": {"reputation": 17, "user_id": 6323796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29a191f53ed82e447468e9c52ed1ca6a?s=128&d=identicon&r=PG&f=1", "display_name": "Balvaishwer Salaria", "link": "https://stackoverflow.com/users/6323796/balvaishwer-salaria"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "accepted_answer_id": 55153268, "answer_count": 2, "score": 0, "last_activity_date": 1601076244, "creation_date": 1552508914, "last_edit_date": 1552522603, "question_id": 55150687, "link": "https://stackoverflow.com/questions/55150687/iterate-and-compare-two-python-dictionaries-in-most-pythonic-way-for-fast-execut", "title": "Iterate and compare two python dictionaries in most pythonic way for fast execution", "body": "<pre><code>def formoutput(teams_id, patent_team):\n    \"\"\"\n    The function to compare team_id and patent_teams to form the default dictionary matching values\n    :param teams_id: {('3879797-2', '3930281-2'): 1, ('3930282-1', '3930282-2'): 2, ('3930288-1', '3930288-2'): 3, ... }\n    :param patent_team: {3930281: [[('3879797-2', '3930281-2')]], 3930282: [[('3930282-1', '3930282-2')]], 3930288: [[('3930288-1', '3930288-2')]], ... }\n    :return: defaultdict(&lt;function formoutput.&lt;locals&gt;.&lt;lambda&gt; at 0x0000022A45228240&gt;, {3930281: defaultdict(&lt;class 'list'&gt;, {'3879797-2': [1], '3930281-2': [1]}), 3930282: defaultdict(&lt;class 'list'&gt;, {'3930282-1': [2], '3930282-2': [2]}), 3930288: defaultdict(&lt;class 'list'&gt;, {'3930288-1': [3], '3930288-2': [3]}), 3930292: defaultdict(&lt;class 'list'&gt;, {'3861607-1': [4], '3861607-2': [4]}), ..}\n\n    \"\"\"\n    print(\"Forming Output\")\n    print(\"Teams id =\", teams_id)\n    print(\"Patent_team=\", patent_team)\n    output_dict = defaultdict(lambda: defaultdict(list))\n    try:\n        for k,v in teams_id.items():\n            for a,b in patent_team.items():\n                for i in b:\n                    if k in i:\n                        for z in k:\n                            output_dict[a][z].append(v)\n    except Exception as e:\n        print(e)\n    return output_dict\n</code></pre>\n\n<p>I have a function to which I pass two arguments in the form of python dictionaries. The keys of the first dictionary occur as the values in the second one. I need to compare if for each key from the first dictionary there exists a value in the second dictionary then, use the key, value from the first dictionary and key from the second dictionary to append the value into a defaultdict. Please have a look at the code above, it will help in the better understanding of code.\nThe multiple nested loops are making the code very slow. I have over 50 million key-value pair in the first dictionary. And over 3 million keys in the second dictiinary with each key containing an average of 3 values.</p>\n\n<p>The entire idea behind the code is to find all the possible pairs of inventors that have ever worked on a patent in some combination and those are required as output with {patent_id: inventor_team, team_id}. Currently, it is taking hours to execute the same code. I ran it for 100,000 key value pairs and it took approximately 2000 seconds which is a lot of time.</p>\n\n<p>Kindly provide me with the best possible approach for the overall solution. Also, what is the best way to deal with such huge amount of data?</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1552520536, "post_id": 55150677, "comment_id": 97045910, "body": "please always use the generic [python] tag when asking Python questions"}, {"owner": {"reputation": 399, "user_id": 1109322, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3e7f0db6c2bd9f8df034d4569a70ae33?s=128&d=identicon&r=PG", "display_name": "Ivan", "link": "https://stackoverflow.com/users/1109322/ivan"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1552590240, "post_id": 55150677, "comment_id": 97079616, "body": "Sure, will do in the future!"}], "answers": [{"comments": [{"owner": {"reputation": 399, "user_id": 1109322, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3e7f0db6c2bd9f8df034d4569a70ae33?s=128&d=identicon&r=PG", "display_name": "Ivan", "link": "https://stackoverflow.com/users/1109322/ivan"}, "edited": false, "score": 0, "creation_date": 1552590516, "post_id": 55152053, "comment_id": 97079768, "body": "Thank you, this makes a lot of sense (and is in the documentation for the built-in <code>open</code> which I should probably pay closer attention to :-))"}], "tags": [], "owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "is_accepted": true, "score": 2, "last_activity_date": 1552515760, "creation_date": 1552515760, "answer_id": 55152053, "question_id": 55150677, "link": "https://stackoverflow.com/questions/55150677/converting-file-descriptor-pipe-to-file-object-in-python/55152053#55152053", "title": "Converting file descriptor (pipe) to file object in python", "body": "<p>You have a combination of two problems. First, a file object created by <code>os.fdopen</code> is buffered by default. Either make it unbuffered:</p>\n\n<pre><code>fr = os.fdopen(r, \"rb\", buffering=0)\nfw = os.fdopen(w, \"wb\", buffering=0)\n</code></pre>\n\n<p>Or flush the written data:</p>\n\n<pre><code>fw.write(b\"test\")\nfw.flush()\n</code></pre>\n\n<p>Second, function <code>fr.read()</code> when called without parameters reads to the end of file. In the case of a pipe, it means, until the pipe is closed. You should pass the number of bytes you want to read:</p>\n\n<pre><code>fr.read(4)\n&gt; b'test'\n</code></pre>\n\n<p>If you are not sure how much data will be written, read it piecewise, N bytes per call, and then recombine.</p>\n"}], "owner": {"reputation": 399, "user_id": 1109322, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3e7f0db6c2bd9f8df034d4569a70ae33?s=128&d=identicon&r=PG", "display_name": "Ivan", "link": "https://stackoverflow.com/users/1109322/ivan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 640, "favorite_count": 0, "accepted_answer_id": 55152053, "answer_count": 1, "score": 4, "last_activity_date": 1552520525, "creation_date": 1552508900, "last_edit_date": 1552520525, "question_id": 55150677, "link": "https://stackoverflow.com/questions/55150677/converting-file-descriptor-pipe-to-file-object-in-python", "title": "Converting file descriptor (pipe) to file object in python", "body": "<p>I'd like to use anonymous pipes to communicate pickled objects between two processes in linux. I don't want to use the <code>subprocess</code> module and instead manually create the necessary pipes and then call <code>pickle.dump</code> and <code>pickle.load</code>. The last two functions, however, require a file object. So, while testing things around, I was faced with the following problem. The following code works fine:</p>\n\n<pre><code>import os\nr, w = os.pipe()\nos.write(w, b\"test\")\nos.read(r, 1024)\n</code></pre>\n\n<p>but this code stalls at the read operation</p>\n\n<pre><code>import os\nr, w = os.pipe()\nfr = os.fdopen(r, \"rb\")\nfw = os.fdopen(w, \"wb\")\nfw.write(b\"test\")\nfr.read()\n</code></pre>\n\n<p>Additionally, <code>select.select([r],[],[],0)</code> shows the pipe is empty. My question: what is going on during file object creation and why doesn't it work for pipes? Is there a way to get a file object this way at all?</p>\n"}, {"tags": ["python", "python-3.x", "selenium", "web-scraping", "beautifulsoup"], "comments": [{"owner": {"reputation": 908, "user_id": 1526950, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/0713fdc57ba13d437d9e6b17734bc9fb?s=128&d=identicon&r=PG", "display_name": "mm_", "link": "https://stackoverflow.com/users/1526950/mm"}, "edited": false, "score": 0, "creation_date": 1552509180, "post_id": 55150623, "comment_id": 97041795, "body": "when I run your code, it returns 381."}, {"owner": {"reputation": 908, "user_id": 1526950, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/0713fdc57ba13d437d9e6b17734bc9fb?s=128&d=identicon&r=PG", "display_name": "mm_", "link": "https://stackoverflow.com/users/1526950/mm"}, "edited": false, "score": 0, "creation_date": 1552509231, "post_id": 55150623, "comment_id": 97041817, "body": "Try showmore=WebDriverWait(driver, 10).until(EC.presence_of_elements_located((By.CLASS_NAME,&#39;sh&zwnj;&#8203;owMore_17tx5ln&#39;)))         showmore[0].click()"}, {"owner": {"reputation": 908, "user_id": 1526950, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/0713fdc57ba13d437d9e6b17734bc9fb?s=128&d=identicon&r=PG", "display_name": "mm_", "link": "https://stackoverflow.com/users/1526950/mm"}, "edited": false, "score": 0, "creation_date": 1552509354, "post_id": 55150623, "comment_id": 97041869, "body": "Also, try waiting until the whole page is rendered after clicking, and the use BeautifulSoup to get the html code."}, {"owner": {"reputation": 403, "user_id": 10972294, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/orMTi.jpg?s=128&g=1", "display_name": "RobZ", "link": "https://stackoverflow.com/users/10972294/robz"}, "reply_to_user": {"reputation": 908, "user_id": 1526950, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/0713fdc57ba13d437d9e6b17734bc9fb?s=128&d=identicon&r=PG", "display_name": "mm_", "link": "https://stackoverflow.com/users/1526950/mm"}, "edited": false, "score": 0, "creation_date": 1552510172, "post_id": 55150623, "comment_id": 97042226, "body": "@mm_ I get this error mesasge <code>showmore_project[0].click() TypeError: &#39;WebElement&#39; object does not support indexing</code>"}, {"owner": {"reputation": 403, "user_id": 10972294, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/orMTi.jpg?s=128&g=1", "display_name": "RobZ", "link": "https://stackoverflow.com/users/10972294/robz"}, "reply_to_user": {"reputation": 908, "user_id": 1526950, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/0713fdc57ba13d437d9e6b17734bc9fb?s=128&d=identicon&r=PG", "display_name": "mm_", "link": "https://stackoverflow.com/users/1526950/mm"}, "edited": false, "score": 0, "creation_date": 1552510273, "post_id": 55150623, "comment_id": 97042272, "body": "@mm_ My problem is not the rendering time, but the clicking function, when I run my code it is clicking on show more button and then it clicks on a different link, thus beautiful soup is not parsing the page I wanted."}, {"owner": {"reputation": 908, "user_id": 1526950, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/0713fdc57ba13d437d9e6b17734bc9fb?s=128&d=identicon&r=PG", "display_name": "mm_", "link": "https://stackoverflow.com/users/1526950/mm"}, "edited": false, "score": 0, "creation_date": 1552512155, "post_id": 55150623, "comment_id": 97043127, "body": "@_RobZ Can replicate that behaviour."}], "answers": [{"comments": [{"owner": {"reputation": 403, "user_id": 10972294, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/orMTi.jpg?s=128&g=1", "display_name": "RobZ", "link": "https://stackoverflow.com/users/10972294/robz"}, "edited": false, "score": 0, "creation_date": 1552530372, "post_id": 55151018, "comment_id": 97048264, "body": "Thanks, it works for me. Now though can we have a way to make that script faster? it takes aproximatly 30 secondes to do it. The thing is I have many profiles like this one. How can we improve this script to make it run faster?"}], "tags": [], "owner": {"reputation": 19801, "user_id": 9189799, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/U2hEg.jpg?s=128&g=1", "display_name": "SIM", "link": "https://stackoverflow.com/users/9189799/sim"}, "is_accepted": true, "score": 1, "last_activity_date": 1552511134, "last_edit_date": 1552511134, "creation_date": 1552510347, "answer_id": 55151018, "question_id": 55150623, "link": "https://stackoverflow.com/questions/55150623/how-to-make-selenium-only-click-a-button-and-nothing-else-inconsistent-clicking/55151018#55151018", "title": "How to make Selenium only click a button and nothing else? Inconsistent clicking", "body": "<p>Check out the following implementation to get the desired behavior. When the script is running, take a closer look at the scroll bar to see the progress.</p>\n\n<pre><code>from selenium import webdriver\nfrom selenium.webdriver.common.by import By\nfrom selenium.webdriver.support.ui import WebDriverWait\nfrom selenium.webdriver.support import expected_conditions as EC\nfrom bs4 import BeautifulSoup\n\nwith webdriver.Chrome() as driver:\n    wait = WebDriverWait(driver,10)\n    driver.get('https://www.khanacademy.org/profile/trekcelt/projects')\n\n    while True:\n        try:\n            showmore = wait.until(EC.presence_of_element_located((By.CSS_SELECTOR,'[class^=\"showMore\"] &gt; a')))\n            driver.execute_script(\"arguments[0].click();\",showmore)\n        except Exception:\n            break\n\n    soup = BeautifulSoup(driver.page_source,'html.parser')\n    project = soup.find_all(class_='title_1usue9n')\n    print(len(project))\n</code></pre>\n\n<p>Another way would be:</p>\n\n<pre><code>while True:\n    try:\n        showmore = wait.until(EC.presence_of_element_located((By.CSS_SELECTOR,'[class^=\"showMore\"] &gt; a')))\n        showmore.location_once_scrolled_into_view\n        showmore.click()\n        wait.until(EC.invisibility_of_element_located((By.CSS_SELECTOR,'[class^=\"spinnerContainer\"] &gt; img[class^=\"loadingSpinner\"]')))\n    except Exception:\n        break\n</code></pre>\n\n<p>Output at this moment:</p>\n\n<pre><code>381\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1482, "user_id": 10446484, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-DPJNPwHB7j0/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DV7oUQVhckzmNOxsNU7IvVVMLlZ3Q/mo/photo.jpg?sz=128", "display_name": "Nic Laforge", "link": "https://stackoverflow.com/users/10446484/nic-laforge"}, "is_accepted": false, "score": 1, "last_activity_date": 1552536279, "creation_date": 1552536279, "answer_id": 55154802, "question_id": 55150623, "link": "https://stackoverflow.com/questions/55150623/how-to-make-selenium-only-click-a-button-and-nothing-else-inconsistent-clicking/55154802#55154802", "title": "How to make Selenium only click a button and nothing else? Inconsistent clicking", "body": "<p>I have modified the accepted answer to improve the performance of your script. Comment on how you can achieve it is in the code</p>\n\n<pre><code>from selenium import webdriver\nfrom selenium.webdriver.common.by import By\nfrom selenium.webdriver.support.ui import WebDriverWait\nfrom selenium.webdriver.support import expected_conditions as EC\nfrom selenium.common.exceptions import NoSuchElementException, StaleElementReferenceException\nfrom bs4 import BeautifulSoup\nimport time\nstart_time = time.time()\n# here is one example of a user\nwith webdriver.Chrome() as driver:\n    driver.get('https://www.khanacademy.org/profile/trekcelt/projects')\n    # This code will wait until the first Show More is displayed (After page loaded)\n    showmore_project = WebDriverWait(driver, 10).until(EC.presence_of_element_located((By.CLASS_NAME,\n                                                                                       'showMore_17tx5ln')))\n    showmore_project.click()\n    # to infinite click on show more button until there is none\n    while True:\n        try:\n            # We will retrieve and click until we do not find the element\n            # NoSuchElementException will be raised when we reach the button. This will save the wait time of 10 sec\n            showmore_project= driver.find_element_by_css_selector('.showMore_17tx5ln [role=\"button\"]')\n            # Using a JS to send the click will avoid Selenium to through an exception where the click would not be\n            # performed on the right element.\n            driver.execute_script(\"arguments[0].click();\", showmore_project)\n        except StaleElementReferenceException:\n            continue\n        except NoSuchElementException:\n            break\n\n    # parsing the profile\n    soup=BeautifulSoup(driver.page_source,'html.parser')\n\n# get a list of all the projects\nproject=soup.find_all(class_='title_1usue9n')\n\n# get the number of projects\nprint(len(project))\nprint(time.time() - start_time)\n</code></pre>\n\n<p>Execution Time1: 14.343502759933472<br>\nExecution Time2: 13.955228090286255<br><br>\nHope this help you!</p>\n"}], "owner": {"reputation": 403, "user_id": 10972294, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/orMTi.jpg?s=128&g=1", "display_name": "RobZ", "link": "https://stackoverflow.com/users/10972294/robz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "accepted_answer_id": 55151018, "answer_count": 2, "score": 0, "last_activity_date": 1552536279, "creation_date": 1552508701, "last_edit_date": 1552510452, "question_id": 55150623, "link": "https://stackoverflow.com/questions/55150623/how-to-make-selenium-only-click-a-button-and-nothing-else-inconsistent-clicking", "title": "How to make Selenium only click a button and nothing else? Inconsistent clicking", "body": "<p>My goal: to scrape the amount of projects done by a user on khan academy.</p>\n\n<p>To do so I need to parse the profile user page. But I need to click on <code>show more</code> to see all the project a user had done and then scrape them.</p>\n\n<pre><code>from selenium import webdriver\nfrom selenium.webdriver.common.by import By\nfrom selenium.webdriver.support.ui import WebDriverWait\nfrom selenium.webdriver.support import expected_conditions as EC\nfrom selenium.common.exceptions import TimeoutException,StaleElementReferenceException\nfrom bs4 import BeautifulSoup\n\n# here is one example of a user\ndriver = webdriver.Chrome()\ndriver.get('https://www.khanacademy.org/profile/trekcelt/projects')\n\n# to infinite click on show more button until there is none\nwhile True:\n    try:\n        showmore_project=WebDriverWait(driver, 10).until(EC.presence_of_element_located((By.CLASS_NAME,'showMore_17tx5ln')))\n        showmore_project.click()\n    except TimeoutException:\n        break\n    except StaleElementReferenceException:\n        break\n\n# parsing the profile\nsoup=BeautifulSoup(driver.page_source,'html.parser')\n\n# get a list of all the projects\nproject=soup.find_all(class_='title_1usue9n')\n\n# get the number of projects\nprint(len(project))\n</code></pre>\n\n<p>This code return <code>0</code> for <code>print(len(project))</code>. And that's not normal because when you manually check <code>https://www.khanacademy.org/profile/trekcelt/projects</code> you can see there that the amount of projects is definetly not <code>0</code>.</p>\n\n<p>The weird thing: at first, you can see (with the webdriver) that this code is working fine and then selenium clicks on something else than the <code>show more button</code>, it click on one of the project's link for example and thus change the page and that's why we get <code>0</code>.</p>\n\n<p>I don't understand how to correct my code so selenium is only clicking on the right button and nothing else.</p>\n"}, {"tags": ["python"], "answers": [{"tags": [], "owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "is_accepted": true, "score": 4, "last_activity_date": 1552508653, "creation_date": 1552508653, "answer_id": 55150611, "question_id": 55150582, "link": "https://stackoverflow.com/questions/55150582/why-do-python-list-with-a-single-entry-give-the-0th-element-for-1-index-and-0-i/55150611#55150611", "title": "Why do python list with a single entry give the 0th element for -1 index and 0 index?", "body": "<p>A negative index means <code>nth from the right</code>. The zero-index of a one-element list is the same as the negative one-index of a one-element list because the zeroeth element is the same as the first element from the right.</p>\n"}], "owner": {"reputation": 1425, "user_id": 1685480, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PLxYp.jpg?s=128&g=1", "display_name": "Siddharth Sharma", "link": "https://stackoverflow.com/users/1685480/siddharth-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "closed_date": 1552508683, "accepted_answer_id": 55150611, "answer_count": 1, "score": -1, "last_activity_date": 1552508653, "creation_date": 1552508492, "question_id": 55150582, "link": "https://stackoverflow.com/questions/55150582/why-do-python-list-with-a-single-entry-give-the-0th-element-for-1-index-and-0-i", "closed_reason": "Duplicate", "title": "Why do python list with a single entry give the 0th element for -1 index and 0 index?", "body": "<p>On creating a list in python with just one element, when I try to get the -1 index element instead of getting list index out range error it is giving the 0th element.</p>\n\n<pre><code>some = ['something']\nprint(some[0]) # prints something\nprint(some[-1]) # prints something\n</code></pre>\n\n<p>Here is a link to the same: \n<a href=\"https://repl.it/@hearsid/SuperiorProudShoutcast\" rel=\"nofollow noreferrer\">https://repl.it/@hearsid/SuperiorProudShoutcast</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/Ld2UH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Ld2UH.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "google-app-engine", "google-cloud-platform", "google-cloud-storage", "google-cloud-ml"], "answers": [{"comments": [{"owner": {"reputation": 2416, "user_id": 1902291, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/Wtz5E.png?s=128&g=1", "display_name": "opus111", "link": "https://stackoverflow.com/users/1902291/opus111"}, "edited": false, "score": 0, "creation_date": 1552569062, "post_id": 55154138, "comment_id": 97065748, "body": "Thank you Dan.  I already tried something like open(&quot;gs://bucketname/foo.bar&quot;) and the package google.cloud.storage does not seem to have an open() method.  I am surprised because I would expect a normal file-like interface to persistent storage.  I feel I myst be missing it"}, {"owner": {"reputation": 462, "user_id": 7438427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37b5e95f9a643b662a40238b8bc2fea7?s=128&d=identicon&r=PG&f=1", "display_name": "Guoqing Xu", "link": "https://stackoverflow.com/users/7438427/guoqing-xu"}, "edited": false, "score": 0, "creation_date": 1552585087, "post_id": 55154138, "comment_id": 97077019, "body": "You can use TensorFlow FileIO library to open GCS files. Please follow this link: <a href=\"https://stackoverflow.com/questions/42799117/google-cloud-ml-and-gcs-bucket-issues\" title=\"google cloud ml and gcs bucket issues\">stackoverflow.com/questions/42799117/&hellip;</a>"}, {"owner": {"reputation": 37127, "user_id": 4495081, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/OuWYd.jpg?s=128&g=1", "display_name": "Dan Cornilescu", "link": "https://stackoverflow.com/users/4495081/dan-cornilescu"}, "reply_to_user": {"reputation": 2416, "user_id": 1902291, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/Wtz5E.png?s=128&g=1", "display_name": "opus111", "link": "https://stackoverflow.com/users/1902291/opus111"}, "edited": false, "score": 0, "creation_date": 1552593311, "post_id": 55154138, "comment_id": 97081170, "body": "@user1902291 being an actual filesystem file (on which python&#39;s default <code>open()</code> works) and having a file-like handler obtained through some call other than python&#39;s <code>open()</code> are two different things..."}], "tags": [], "owner": {"reputation": 37127, "user_id": 4495081, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/OuWYd.jpg?s=128&g=1", "display_name": "Dan Cornilescu", "link": "https://stackoverflow.com/users/4495081/dan-cornilescu"}, "is_accepted": true, "score": 2, "last_activity_date": 1552531173, "creation_date": 1552531173, "answer_id": 55154138, "question_id": 55150560, "link": "https://stackoverflow.com/questions/55150560/google-ml-engine-cloud-storage-as-a-file/55154138#55154138", "title": "google ml-engine cloud storage as a file", "body": "<p>The only way to have Cloud Storage appear as a filesystem is to <a href=\"https://cloud.google.com/compute/docs/disks/gcs-buckets#mount_bucket\" rel=\"nofollow noreferrer\">mount a bucket as a file system</a>:</p>\n\n<blockquote>\n  <p>You can use the <a href=\"https://cloud.google.com/storage/docs/gcs-fuse\" rel=\"nofollow noreferrer\">Google Cloud Storage FUSE</a> tool to mount a Cloud\n  Storage bucket to your Compute Engine instance. The mounted bucket\n  behaves similarly to a <a href=\"https://cloud.google.com/compute/docs/disks#pdspecs\" rel=\"nofollow noreferrer\">persistent disk</a> even though Cloud Storage\n  buckets are object storage.</p>\n</blockquote>\n\n<p>But you cannot do that if you can't create and configure VMs. </p>\n\n<blockquote>\n  <p>Note that in ml-engine one does not create and configure VM instances.</p>\n</blockquote>\n\n<p>That's not entirely true. I see ML Engine supports <a href=\"https://cloud.google.com/ml-engine/docs/tensorflow/versioning#to_build_a_custom_container_beta\" rel=\"nofollow noreferrer\">building custom containers</a>, which is typically how one can install and configure OS-level dependencies. But only for the training area, so if your needs are in that area it may be worth a try.</p>\n\n<p>I assume you already checked that the library doesn't support access through an already open file-like handler (if not then maybe of interest would be <a href=\"https://stackoverflow.com/questions/53125515/how-to-restore-tensorflow-model-from-google-bucket-without-writing-to-filesystem/53132622#53132622\">How to restore Tensorflow model from Google bucket without writing to filesystem?</a>)</p>\n"}, {"tags": [], "owner": {"reputation": 2416, "user_id": 1902291, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/Wtz5E.png?s=128&g=1", "display_name": "opus111", "link": "https://stackoverflow.com/users/1902291/opus111"}, "is_accepted": false, "score": 2, "last_activity_date": 1552585967, "creation_date": 1552585967, "answer_id": 55169088, "question_id": 55150560, "link": "https://stackoverflow.com/questions/55150560/google-ml-engine-cloud-storage-as-a-file/55169088#55169088", "title": "google ml-engine cloud storage as a file", "body": "<p>For those that come after, here is the answer</p>\n\n<p><a href=\"https://stackoverflow.com/questions/42799117/google-cloud-ml-and-gcs-bucket-issues\">Google Cloud ML and GCS Bucket issues</a></p>\n\n<pre><code>from tensorflow.python.lib.io import file_io\n</code></pre>\n\n<p>Here is an example</p>\n\n<pre><code>with file_io.FileIO(\"gc://bucket_name/foobar.txt\",\"w\") as f:\n    f.write(\"FOO\")\n    f.flush()\n    print(\"Write foobar.txt\")\n\nwith file_io.FileIO(\"gc://bucket_name/foobar.txt\",\"r\") as f:\n    for line in f:\n        print(\"Read foobar.txt: \"+line)\n</code></pre>\n"}], "owner": {"reputation": 2416, "user_id": 1902291, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/Wtz5E.png?s=128&g=1", "display_name": "opus111", "link": "https://stackoverflow.com/users/1902291/opus111"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 224, "favorite_count": 0, "accepted_answer_id": 55154138, "answer_count": 2, "score": 1, "last_activity_date": 1552585967, "creation_date": 1552508388, "last_edit_date": 1552509720, "question_id": 55150560, "link": "https://stackoverflow.com/questions/55150560/google-ml-engine-cloud-storage-as-a-file", "title": "google ml-engine cloud storage as a file", "body": "<p>I am working in Python with Google Cloud ML-Engine.  The documentation I have found indicates that data storage should be done with Buckets and Blobs</p>\n\n<p><a href=\"https://cloud.google.com/ml-engine/docs/tensorflow/working-with-cloud-storage\" rel=\"nofollow noreferrer\">https://cloud.google.com/ml-engine/docs/tensorflow/working-with-cloud-storage</a></p>\n\n<p>However, much of my code, and the libraries it calls works with files.  Can I somehow treat Google Storage as a file system in my ml-engine code?</p>\n\n<p>I want my code to read like</p>\n\n<pre><code>with open(&lt;something&gt;) as f:\n   for line in f:\n      dosomething(line)\n</code></pre>\n\n<p>Note that in ml-engine one does not create and configure VM instances.  So I can not mount my own shared filesystem with Filestore. </p>\n"}, {"tags": ["python", "pymongo"], "comments": [{"owner": {"reputation": 6802, "user_id": 9609843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9ceb913f05e91861333b367e0379a8e?s=128&d=identicon&r=PG&f=1", "display_name": "sanyassh", "link": "https://stackoverflow.com/users/9609843/sanyassh"}, "edited": false, "score": 0, "creation_date": 1552508419, "post_id": 55150525, "comment_id": 97041453, "body": "Can you please provide an example of <code>insert_many</code> query that you are doing and its result with <code>_id</code>?"}, {"owner": {"reputation": 6893, "user_id": 5997596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46e957a1791225fee518cc14ff5553a5?s=128&d=identicon&r=PG", "display_name": "Azat Ibrakov", "link": "https://stackoverflow.com/users/5997596/azat-ibrakov"}, "edited": false, "score": 1, "creation_date": 1552508561, "post_id": 55150525, "comment_id": 97041527, "body": "you can start from <a href=\"https://docs.mongodb.com/manual/reference/glossary/#term-id\" rel=\"nofollow noreferrer\">docs</a>"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user11199427"}, "edited": false, "score": 1, "creation_date": 1552509088, "post_id": 55150655, "comment_id": 97041754, "body": "Thanks for explaining, but how would I avoid this behaviour of pymongo?"}], "tags": [], "owner": {"reputation": 1767, "user_id": 5413192, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fa5Ylkr5LJ8/AAAAAAAAAAI/AAAAAAAAADg/BbWT0keMH2c/photo.jpg?sz=128", "display_name": "Vikash Singh", "link": "https://stackoverflow.com/users/5413192/vikash-singh"}, "is_accepted": true, "score": 0, "last_activity_date": 1552508829, "creation_date": 1552508829, "answer_id": 55150655, "question_id": 55150525, "link": "https://stackoverflow.com/questions/55150525/pymongo-inserts-id-in-original-array-after-insert-many-how-to-avoid-insertion/55150655#55150655", "title": "Pymongo inserts _id in original array after insert_many .how to avoid insertion of _id?", "body": "<p>Pymongo driver explicitly inserts _id of type ObjectId into the original array and hence original array gets updated before inserting into mongo. This is the expected behaviour of pymongo for insertmany query as per my previous experiences. Hope this answers your question.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11199427"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 19, "favorite_count": 1, "accepted_answer_id": 55150655, "answer_count": 1, "score": 0, "last_activity_date": 1552508829, "creation_date": 1552508202, "question_id": 55150525, "link": "https://stackoverflow.com/questions/55150525/pymongo-inserts-id-in-original-array-after-insert-many-how-to-avoid-insertion", "title": "Pymongo inserts _id in original array after insert_many .how to avoid insertion of _id?", "body": "<p>Pymongo inserts _id in original array after insert_many .how to avoid insertion of _id ? And why original array is updated with _id? Please explain  with example, if anybody knows? Thanks in advance.</p>\n"}, {"tags": ["python"], "answers": [{"comments": [{"owner": {"reputation": 1429, "user_id": 5963631, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/4gxvE.png?s=128&g=1", "display_name": "Jonas", "link": "https://stackoverflow.com/users/5963631/jonas"}, "reply_to_user": {"reputation": 5, "user_id": 11199043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ab1c33b472253a162775d0436b25efd?s=128&d=identicon&r=PG&f=1", "display_name": "Xandrios", "link": "https://stackoverflow.com/users/11199043/xandrios"}, "edited": false, "score": 0, "creation_date": 1552509803, "post_id": 55150602, "comment_id": 97042070, "body": "you can also replace more characters in that line eg <code>return &#39;\\n&#39;.join([str(i) for i in output]).replace(&#39;\\&#39;&#39;,&#39;&#39;).replace(&#39;[&#39;,&#39;&#39;).replace(&#39;]&#39;,&#39;&#39;).re&zwnj;&#8203;place(&#39;,&#39;,&#39;&#39;)</code> that looks even cleaner"}], "tags": [], "owner": {"reputation": 1429, "user_id": 5963631, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/4gxvE.png?s=128&g=1", "display_name": "Jonas", "link": "https://stackoverflow.com/users/5963631/jonas"}, "is_accepted": true, "score": 0, "last_activity_date": 1552509222, "last_edit_date": 1552509222, "creation_date": 1552508598, "answer_id": 55150602, "question_id": 55150448, "link": "https://stackoverflow.com/questions/55150448/python-how-to-implement-a-zfill-on-a-nested-list/55150602#55150602", "title": "Python - How to implement a zfill on a nested list", "body": "<p>You are not using <code>j</code> after <code>j = j.zfill(2)</code>. You have to set the element in the list to that value:</p>\n\n<pre><code>import random\n\ndef random_2d_array(rows, columns):\n    output = []\n    iteration = 0\n    while iteration != rows:\n        i2 = 0\n        iteration += 1\n        output.append([])\n        while i2 != columns:\n            i2 += 1\n            num = random.randint(1, 10)\n            col = output[iteration - 1]\n            col.insert(i2 - 1, num)\n    for i in output:\n        for j in range(len(i)):\n            s = str(i[j])\n            i[j] = s.zfill(2)\n    return '\\n'.join([str(i) for i in output])\n\nprint(random_2d_array(10, 10))\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>['01', '03', '08', '03', '06', '03', '06', '10', '10', '08']\n['08', '08', '06', '04', '10', '03', '04', '06', '10', '06']\n['07', '04', '03', '02', '02', '04', '10', '04', '07', '06']\n['05', '10', '10', '04', '09', '09', '03', '10', '09', '09']\n['08', '09', '09', '10', '06', '04', '08', '09', '05', '05']\n['06', '02', '05', '01', '05', '07', '01', '06', '03', '08']\n['06', '06', '04', '09', '06', '01', '02', '10', '08', '01']\n['08', '10', '10', '05', '10', '10', '02', '06', '10', '09']\n['08', '07', '04', '08', '03', '03', '02', '08', '03', '10']\n['10', '07', '02', '07', '05', '05', '10', '04', '06', '08']\n</code></pre>\n\n<p><strong>Edit</strong>: If you want to remove the quotation marks use</p>\n\n<pre><code>return '\\n'.join([str(i) for i in output]).replace('\\'','')\n</code></pre>\n\n<p>as the last line of your function.</p>\n"}], "owner": {"reputation": 5, "user_id": 11199043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ab1c33b472253a162775d0436b25efd?s=128&d=identicon&r=PG&f=1", "display_name": "Xandrios", "link": "https://stackoverflow.com/users/11199043/xandrios"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 25, "favorite_count": 0, "accepted_answer_id": 55150602, "answer_count": 1, "score": 0, "last_activity_date": 1552509222, "creation_date": 1552507887, "question_id": 55150448, "link": "https://stackoverflow.com/questions/55150448/python-how-to-implement-a-zfill-on-a-nested-list", "title": "Python - How to implement a zfill on a nested list", "body": "<p>I have already posted about this code with a different question and while trying to further develop it, I have stumbled into an error. I want to make my nested list easier to visualize and the problem I bumped into this time is to do with zfill. When trying to change every element in my nested list to a 2 digit number to neaten things up a little, I have made an error. When i run the following code, the numbers are not 2 digits each - </p>\n\n<pre><code>import random\n\ndef random_2d_array(rows, columns):\n    output = []\n    iteration = 0\n    while iteration != rows:\n        i2 = 0\n        iteration += 1\n        output.append([])\n        while i2 != columns:\n            i2 += 1\n            num = random.randint(1, 10)\n            col = output[iteration - 1]\n            col.insert(i2 - 1, num)\n    for i in output:\n        for j in i:\n            j = str(j)\n            j = j.zfill(2)\n    return '\\n'.join([str(i) for i in output])\n\nprint(random_2d_array(10, 10))\n</code></pre>\n\n<p>Any help would be greatly appreciated.</p>\n"}, {"tags": ["python", "opencv", "computer-vision", "python-imaging-library"], "comments": [{"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 3, "creation_date": 1552510453, "post_id": 55150441, "comment_id": 97042374, "body": "Draw the polygon into a black image to create a mask, and then use the mask to blend the two images together."}, {"owner": {"reputation": 361, "user_id": 11199152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/477c89b8ad5f65f463211749db72fe81?s=128&d=identicon&r=PG&f=1", "display_name": "xnet", "link": "https://stackoverflow.com/users/11199152/xnet"}, "reply_to_user": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1552586545, "post_id": 55150441, "comment_id": 97077837, "body": "What function do you use to &quot;paste&quot; the cropped polygon on the target image?"}, {"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1552587805, "post_id": 55150441, "comment_id": 97078459, "body": "There are various different ways... using indexing like <a href=\"https://stackoverflow.com/a/22256245/3962537\">here</a>, <code>numpy.copyto</code>, <code>numpy.where</code>, or (if you draw with antialising) you can alpha blend like i show <a href=\"https://stackoverflow.com/a/37198079/3962537\">here</a>."}], "owner": {"reputation": 361, "user_id": 11199152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/477c89b8ad5f65f463211749db72fe81?s=128&d=identicon&r=PG&f=1", "display_name": "xnet", "link": "https://stackoverflow.com/users/11199152/xnet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 603, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1552586687, "creation_date": 1552507867, "last_edit_date": 1552586687, "question_id": 55150441, "link": "https://stackoverflow.com/questions/55150441/how-to-randomly-crop-a-polygon-from-image-a-and-paste-it-on-image-b-in-python", "title": "How to randomly crop a polygon from image A and paste it on image B in python?", "body": "<p>I'm trying to crop a random polygon from one image and pasting it on another. So far I know how to do this for a rectangular box.</p>\n\n<p>Is there a way to crop an n-shaped polygon and paste it onto another image? Thanks!</p>\n\n<pre><code>from PIL import Image\nimport random\n\nx_rand = random.randrange(0,1080)\ny_rand = random.randrange(0,1920)\nw_rand = random.randrange(0,min(1080, (1080-x_rand)))\nh_rand = random.randrange(0,min(1920, (1920-y_rand)))\n\n# tmp1 - source image path\n# tmp2 - target image path\n\nimage1 = Image.open(tmp1)\nx, y, w, h = (x_rand, y_rand, w_rand, h_rand)\nprint(x, y, w, h)\nbox = (x, y, x + w, y + h)\nregion = image1.crop(box)\nimage2 = Image.open(tmp2)\nimage2.paste(region, box)\n</code></pre>\n\n<p>Ok, I've figured how to cut a polygon image, how do I paste it?</p>\n\n<pre><code>import cv2\nimport numpy as np\n\nimage = cv2.imread(source)\nimage2 = cv2.imread(target)\n\n# Create white pixel mask\nmask = np.ones(image.shape, dtype=np.uint8)\nmask.fill(255)\n\n# Specify polyon and crop\nroi_corners = np.array([[(0, 300), (200, 300), (300, 400), (0, 400)]], dtype=np.int32)\ncv2.fillPoly(mask, roi_corners, 0)\n\n# Crop original image\nmasked_image = cv2.bitwise_or(image, mask)\n</code></pre>\n"}, {"tags": ["python", "python-2.7", "dictionary"], "comments": [{"owner": {"reputation": 387, "user_id": 3093032, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7041ae0faa331af8c0da4a1554fc35f3?s=128&d=identicon&r=PG&f=1", "display_name": "klex52s", "link": "https://stackoverflow.com/users/3093032/klex52s"}, "reply_to_user": {"reputation": 1612, "user_id": 7526786, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af8aa3d350ed791dd6de95b0ebe3fe06?s=128&d=identicon&r=PG&f=1", "display_name": "nicholishen", "link": "https://stackoverflow.com/users/7526786/nicholishen"}, "edited": false, "score": 0, "creation_date": 1552509428, "post_id": 55150419, "comment_id": 97041897, "body": "My data comes from a CSV file. I extracted the file name and time stamps and stored them in a dict. Is there another way to store them so that I can do a proper comparison?"}, {"owner": {"reputation": 1612, "user_id": 7526786, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af8aa3d350ed791dd6de95b0ebe3fe06?s=128&d=identicon&r=PG&f=1", "display_name": "nicholishen", "link": "https://stackoverflow.com/users/7526786/nicholishen"}, "edited": false, "score": 0, "creation_date": 1552509524, "post_id": 55150419, "comment_id": 97041947, "body": "Show your code."}, {"owner": {"reputation": 387, "user_id": 3093032, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7041ae0faa331af8c0da4a1554fc35f3?s=128&d=identicon&r=PG&f=1", "display_name": "klex52s", "link": "https://stackoverflow.com/users/3093032/klex52s"}, "reply_to_user": {"reputation": 1612, "user_id": 7526786, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af8aa3d350ed791dd6de95b0ebe3fe06?s=128&d=identicon&r=PG&f=1", "display_name": "nicholishen", "link": "https://stackoverflow.com/users/7526786/nicholishen"}, "edited": false, "score": 0, "creation_date": 1552514391, "post_id": 55150419, "comment_id": 97044072, "body": "@nicholishen Updated to include more code for how I&#39;m extracting data."}, {"owner": {"reputation": 12519, "user_id": 423926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65539c07af4918433a89bcb298d75ca7?s=128&d=identicon&r=PG", "display_name": "mujjiga", "link": "https://stackoverflow.com/users/423926/mujjiga"}, "reply_to_user": {"reputation": 1612, "user_id": 7526786, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af8aa3d350ed791dd6de95b0ebe3fe06?s=128&d=identicon&r=PG&f=1", "display_name": "nicholishen", "link": "https://stackoverflow.com/users/7526786/nicholishen"}, "edited": false, "score": 0, "creation_date": 1552514887, "post_id": 55150419, "comment_id": 97044228, "body": "@nicholishen check the output of <code>dict(zip([&#39;ABCDEF&#39;,&#39;ABCDEF&#39;],[&#39;12:39:00&#39;,&#39;15:45:00&#39;]))</code> a dict cannot have duplicate keys. The latest duplicate key will overwrite the old value. This is reason you only see the result of last one"}, {"owner": {"reputation": 27354, "user_id": 948550, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/YWVjs.jpg?s=128&g=1", "display_name": "Reut Sharabani", "link": "https://stackoverflow.com/users/948550/reut-sharabani"}, "edited": false, "score": 0, "creation_date": 1552514947, "post_id": 55150419, "comment_id": 97044247, "body": "@mujigga you could just say <code>{&#39;a&#39;: 1, &#39;a&#39;: 2}</code> :)"}, {"owner": {"reputation": 12519, "user_id": 423926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65539c07af4918433a89bcb298d75ca7?s=128&d=identicon&r=PG", "display_name": "mujjiga", "link": "https://stackoverflow.com/users/423926/mujjiga"}, "reply_to_user": {"reputation": 27354, "user_id": 948550, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/YWVjs.jpg?s=128&g=1", "display_name": "Reut Sharabani", "link": "https://stackoverflow.com/users/948550/reut-sharabani"}, "edited": false, "score": 0, "creation_date": 1552515038, "post_id": 55150419, "comment_id": 97044288, "body": "@ReutSharabani agree, just wanted to show the example in the question  :)"}], "answers": [{"tags": [], "owner": {"reputation": 34, "user_id": 3024022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88a7b5eceab3617c4e66d29900a10e9e?s=128&d=identicon&r=PG&f=1", "display_name": "Paul M.", "link": "https://stackoverflow.com/users/3024022/paul-m"}, "is_accepted": true, "score": 1, "last_activity_date": 1552515425, "creation_date": 1552515425, "answer_id": 55151990, "question_id": 55150419, "link": "https://stackoverflow.com/questions/55150419/comparing-values-in-dictionary-with-multiple-matching-keys/55151990#55151990", "title": "Comparing Values in Dictionary with Multiple Matching Keys", "body": "<p>As nicolishen commented, all keys in a dict must be unique.  For any given key, your dict will only include the last value added to the original pair of lists.</p>\n\n<p>You'll need a different data structure.  Consider a dict that contains a single entry for each product ID.  The value for that entry could be a pair of lists, each one containing time stamp info from one of the data files.</p>\n\n<pre><code>productids_timestamps = {'ABCDEF':\n  (('12:39:00','15:45:00','18:30:00'),  # File1.csv\n  ('10:02:00','16:40:00','20:22:00'))}  # File2.csv\n</code></pre>\n"}], "owner": {"reputation": 387, "user_id": 3093032, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7041ae0faa331af8c0da4a1554fc35f3?s=128&d=identicon&r=PG&f=1", "display_name": "klex52s", "link": "https://stackoverflow.com/users/3093032/klex52s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 55151990, "answer_count": 1, "score": 0, "last_activity_date": 1552515425, "creation_date": 1552507752, "last_edit_date": 1552514295, "question_id": 55150419, "link": "https://stackoverflow.com/questions/55150419/comparing-values-in-dictionary-with-multiple-matching-keys", "title": "Comparing Values in Dictionary with Multiple Matching Keys", "body": "<p>I have two dictionaries which store product ids as the key and timestamps as the value. The problem is that I have repeating keys with unique values. For example:</p>\n\n<pre><code>Dict1               |    Dict2\nABCDEF: 12:39:00    |    ABCDEF: 10:02:00         \nABCDEF: 15:45:00    |    ABCDEF: 16:40:00\nABCDEF: 18:30:00    |    ABCDEF: 20:22:00\n</code></pre>\n\n<p>(Not actually formatted this way, just a visual representation. My dictionaries consist of thousands of values.) I have compared them using this:</p>\n\n<pre><code>comparison = {x: dict1[x] - dict2[x] for x in dict1 if x in dict2}\n</code></pre>\n\n<p>But this only compares the last key, value that match in each dictionary. So I get a result of 01:52 (one hour, 52 minutes). How can I include the other keys, values?</p>\n\n<p>Edit: Updated to include more code.</p>\n\n<pre><code>dateList = []\nfilenameList = []\n\nwith open('File1.csv', 'r')as csvfile:\n    filereader = csv.reader(csvfile, delimiter=',')\n    next(filereader, None) #skip header row\n    for column in filereader:\n    # Extract the datetime info as a datetime object to use in timedelta\n        dateString = datetime.strptime(column[7], '%m/%d/%Y %H:%M').strftime('%Y-%m-%d %H:%M:%S') \n        dateObject = datetime.strptime(dateString, '%Y-%m-%d %H:%M:%S')\n        date1.append(dateObject)\n    # Extract filename\n        filename = column[1]\n        filenameList.append(filename)\n\n# Zip the filenames and datetimes into a dictionary\ncombinedList = dict(zip(filenameList,dateList))\n</code></pre>\n\n<p>I literally repeat all that for File2 and that's when the comparison comes in.</p>\n"}, {"tags": ["python", "boxplot"], "comments": [{"owner": {"reputation": 1111, "user_id": 9568847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57127396e2c5362bd0555a5348ee3944?s=128&d=identicon&r=PG&f=1", "display_name": "Niklas Mertsch", "link": "https://stackoverflow.com/users/9568847/niklas-mertsch"}, "edited": false, "score": 0, "creation_date": 1552509131, "post_id": 55150417, "comment_id": 97041779, "body": "It is the <code>xtick</code>. You can remove it by <code>plt.xticks([])</code>."}], "answers": [{"tags": [], "owner": {"reputation": 56, "user_id": 10027516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67aa5625ca16068c3a212840501e4e72?s=128&d=identicon&r=PG&f=1", "display_name": "Jallyfish", "link": "https://stackoverflow.com/users/10027516/jallyfish"}, "is_accepted": true, "score": 2, "last_activity_date": 1552510414, "last_edit_date": 1592644375, "creation_date": 1552510414, "answer_id": 55151035, "question_id": 55150417, "link": "https://stackoverflow.com/questions/55150417/removing-label-in-boxplot-in-python/55151035#55151035", "title": "Removing label in Boxplot in Python", "body": "<p>This is because here &quot;Age&quot; is not an axis label, instead it is a tick. So you can add something like this:</p>\n<pre class=\"lang-py prettyprint-override\"><code>     plt.xticks([1], [''])\n</code></pre>\n<p>to remove the first tick.\nAnd there are many other ways to remove or change ticks. For example, <a href=\"https://stackoverflow.com/questions/12998430/remove-xticks-in-a-matplotlib-plot\">this post</a> describes how to remove ticks on different axes.</p>\n"}], "owner": {"reputation": 23, "user_id": 11195149, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-qhfMMoQwuKo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdIC37fMZGgjoxAkt8vUVxLsILmiw/mo/photo.jpg?sz=128", "display_name": "Filip.Snailer", "link": "https://stackoverflow.com/users/11195149/filip-snailer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1666, "favorite_count": 0, "accepted_answer_id": 55151035, "answer_count": 1, "score": 1, "last_activity_date": 1552510414, "creation_date": 1552507747, "question_id": 55150417, "link": "https://stackoverflow.com/questions/55150417/removing-label-in-boxplot-in-python", "title": "Removing label in Boxplot in Python", "body": "<p>I'm unable to remove the label \"Age\" under each box plot shown below. Its autogenerated and can't get rid of it. Here is my code and output:</p>\n\n<pre><code>dataset.boxplot(column=['Age'], by=None, ax=None, fontsize=None, rot=0, \ngrid=True, figsize=None, layout=None, return_type=None)\nplt.suptitle('Attrition by Age')\nplt.xlabel('test')\nplt.title('test6')\nplt.subplot(121)\nplt.xlabel('test2')\nplt.title('test3')\nplt.ylabel('test5')\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/Lfrh9.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"}, {"tags": ["python", "flask", "sqlalchemy"], "comments": [{"owner": {"reputation": 21, "user_id": 6257789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c84659d7db363c717e20087e7d4e35a4?s=128&d=identicon&r=PG&f=1", "display_name": "getmeagatorade", "link": "https://stackoverflow.com/users/6257789/getmeagatorade"}, "edited": false, "score": 0, "creation_date": 1552586142, "post_id": 55150416, "comment_id": 97077627, "body": "Can you remove the duplicate tag? This is clearly streaming in a csv format and not a csv file."}, {"owner": {"reputation": 21, "user_id": 6257789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c84659d7db363c717e20087e7d4e35a4?s=128&d=identicon&r=PG&f=1", "display_name": "getmeagatorade", "link": "https://stackoverflow.com/users/6257789/getmeagatorade"}, "edited": false, "score": 0, "creation_date": 1552598708, "post_id": 55150416, "comment_id": 97083728, "body": "If this dude can remove the duplicate tag, I will answer my own question...."}], "owner": {"reputation": 21, "user_id": 6257789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c84659d7db363c717e20087e7d4e35a4?s=128&d=identicon&r=PG&f=1", "display_name": "getmeagatorade", "link": "https://stackoverflow.com/users/6257789/getmeagatorade"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "closed_date": 1552514875, "answer_count": 0, "score": 0, "last_activity_date": 1552598670, "creation_date": 1552507746, "last_edit_date": 1552598670, "question_id": 55150416, "link": "https://stackoverflow.com/questions/55150416/stream-sqlalchemy-reultproxy-as-comma-separated-values-without-building-a-csv-fi", "closed_reason": "Duplicate", "title": "Stream SQLAlchemy ReultProxy as comma separated values without building a CSV file in Flask?", "body": "<p>I do not want to create a csv file on the VM before sending to the server, I would rather just stream the data to the browser which will then create a file on the users computer.</p>\n\n<p>I am just wondering if you can modify how the data is returned from the SQLAlchemy execution. I want to stream data from my database as a csv without writing to a csv file. I would rather just transfer the data in chunks as a csv.</p>\n\n<p>An example would be:</p>\n\n<pre><code>@app.route('/users')\ndef get_users():\n    return conn.execution_options(stream_results=True).execute(\"SELECT * FROM User\")\n</code></pre>\n\n<p>This functionality has the streaming built in, but flask says that it can not return this because the <code>application must write bytes</code>. I am a little lost on how to stream the data in the form of a csv to the browser.</p>\n\n<p>How would I get the execution to stream results as comma separated values?</p>\n\n<p>It is very clear this is different from <a href=\"https://stackoverflow.com/questions/28011341/create-and-download-a-csv-file-from-a-flask-view\">Create and download a CSV file from a Flask view</a> since they want to build a CSV file and stream that instead of streaming the contents as comma separated values.</p>\n"}, {"tags": ["python", "object"], "answers": [{"tags": [], "owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": false, "score": 0, "last_activity_date": 1552508629, "last_edit_date": 1552508629, "creation_date": 1552508297, "answer_id": 55150540, "question_id": 55150376, "link": "https://stackoverflow.com/questions/55150376/how-to-make-minutes-attribute-in-a-time-class-between-0-and-59/55150540#55150540", "title": "how to make minutes attribute in a Time class between 0 and 59", "body": "<p>You want to get the quotient and remainder when dividing by 60; the quotient gets added to the hour, and the remainder is used as the number of minutes.</p>\n\n<pre><code>sum_of_time = Time(0,0)\nhours = time1.hours + time2.hours\nminutes = time1.minutes + time2.minutes\nq, r = divmod(minutes, 60)  # e.g. divmod(117, 60) == (1, 57)\nhours += q\nminutes = r\nsum_of_time.hours = hours\nsum_of_time.minutes = minutes\n</code></pre>\n\n<p>This is logic that should probably be implemented by methods of the <code>Time</code> class. For example:</p>\n\n<pre><code>class Time:\n    def __init__(self, h, m):\n        self.hours = 0\n        self.minutes = 0\n\n    # For simplicity here, assume other is an instance of Time\n    def __add__(self, other):\n        hours = self.hours + other.hours\n        minutes = self.minutes + other.minutes\n        q, r = divmod(minutes, 60)\n        return Time(hours + q, r)\n\nsum_of_time = time1 + time2\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1612, "user_id": 7526786, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af8aa3d350ed791dd6de95b0ebe3fe06?s=128&d=identicon&r=PG&f=1", "display_name": "nicholishen", "link": "https://stackoverflow.com/users/7526786/nicholishen"}, "is_accepted": false, "score": 1, "last_activity_date": 1552508498, "creation_date": 1552508498, "answer_id": 55150584, "question_id": 55150376, "link": "https://stackoverflow.com/questions/55150376/how-to-make-minutes-attribute-in-a-time-class-between-0-and-59/55150584#55150584", "title": "how to make minutes attribute in a Time class between 0 and 59", "body": "<p>This is what <a href=\"https://docs.python.org/3/library/datetime.html#available-types\" rel=\"nofollow noreferrer\">datetime.timedelta</a> is used for. </p>\n\n<pre><code>from datetime import timedelta\n\ndelta1 = timedelta(hours=1, minutes=30)\ndelta2 = timedelta(minutes=31)\nsum_time = delta1 + delta2\nprint(sum_time) #2:01:00\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 12519, "user_id": 423926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65539c07af4918433a89bcb298d75ca7?s=128&d=identicon&r=PG", "display_name": "mujjiga", "link": "https://stackoverflow.com/users/423926/mujjiga"}, "is_accepted": false, "score": 0, "last_activity_date": 1552508765, "creation_date": 1552508765, "answer_id": 55150637, "question_id": 55150376, "link": "https://stackoverflow.com/questions/55150376/how-to-make-minutes-attribute-in-a-time-class-between-0-and-59/55150637#55150637", "title": "how to make minutes attribute in a Time class between 0 and 59", "body": "<pre><code>class Time:\n    def __init__(self,h,m):\n        self.h = h\n        self.m = m\n        q, r = divmod(m, 60)\n        self.h += q\n        self.m = r\n\n    def __add__(self, o): \n        return Time(self.h+o.h,self.m+o.m)\n\n    def __str__(self):\n        return \"{0}:{1}\".format(self.h,self.m)\n\n\n\nt1 = Time(1,60)\nt2 = Time(1,60)\nprint (t1+t2)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11199450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddda8286e3ba6e2d88407b778722257b?s=128&d=identicon&r=PG&f=1", "display_name": "alexcode", "link": "https://stackoverflow.com/users/11199450/alexcode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1552512940, "creation_date": 1552507657, "last_edit_date": 1552512940, "question_id": 55150376, "link": "https://stackoverflow.com/questions/55150376/how-to-make-minutes-attribute-in-a-time-class-between-0-and-59", "title": "how to make minutes attribute in a Time class between 0 and 59", "body": "<p>So I defined a function such that it returns a sum of two <code>Time</code> objects as a new <code>Time</code> object, but the sum of the minutes in that resulting <code>Time</code> object cannot exceed 59 and I don't know how to implement that.</p>\n\n<p>Here's my code: </p>\n\n<pre><code>from timer import Time\n\nsum_of_time = Time(0, 0)\nsum_of_time.hours= time1.hours + time2.hours\nsum_of_time.minutes = time1.minutes + time2.minutes\n\nreturn sum_of_time\n\nif sum_of_time.minutes &gt;= 60: # where I try to make minutes within 0 to 59\n    sum_of_time.minutes = sum_of_time.minutes - 60\n    sum_of_time.hours = sum_of_time.hours + 1\n    return sum_of_time\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "python-2.7"], "comments": [{"owner": {"reputation": 142, "user_id": 10485873, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XzV03sSSGN4/AAAAAAAAAAI/AAAAAAAAAAU/IX5wvD_DNOI/photo.jpg?sz=128", "display_name": "Raman Saini", "link": "https://stackoverflow.com/users/10485873/raman-saini"}, "edited": false, "score": 0, "creation_date": 1552513885, "post_id": 55150369, "comment_id": 97043880, "body": "You can get the number of lines in a file using, <code>num_lines = sum(1 for line in open(&#39;FILE_PATH&#39;))</code>"}, {"owner": {"reputation": 13, "user_id": 11199238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/066838c65b6f9c88ab5987d935562ae8?s=128&d=identicon&r=PG&f=1", "display_name": "Kong", "link": "https://stackoverflow.com/users/11199238/kong"}, "reply_to_user": {"reputation": 142, "user_id": 10485873, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XzV03sSSGN4/AAAAAAAAAAI/AAAAAAAAAAU/IX5wvD_DNOI/photo.jpg?sz=128", "display_name": "Raman Saini", "link": "https://stackoverflow.com/users/10485873/raman-saini"}, "edited": false, "score": 0, "creation_date": 1552533679, "post_id": 55150369, "comment_id": 97048940, "body": "How to use for when second run to 59 and 60 is 00 again and minute is 01"}, {"owner": {"reputation": 142, "user_id": 10485873, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XzV03sSSGN4/AAAAAAAAAAI/AAAAAAAAAAU/IX5wvD_DNOI/photo.jpg?sz=128", "display_name": "Raman Saini", "link": "https://stackoverflow.com/users/10485873/raman-saini"}, "edited": false, "score": 0, "creation_date": 1552541892, "post_id": 55150369, "comment_id": 97050855, "body": "You can keep the current time from <code>datetime.now()</code> in a variable and then print the time difference you get every second passes using <code>datetime.now()</code> again and formatting it using <code>strftime()</code> into the required format."}, {"owner": {"reputation": 13, "user_id": 11199238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/066838c65b6f9c88ab5987d935562ae8?s=128&d=identicon&r=PG&f=1", "display_name": "Kong", "link": "https://stackoverflow.com/users/11199238/kong"}, "reply_to_user": {"reputation": 142, "user_id": 10485873, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XzV03sSSGN4/AAAAAAAAAAI/AAAAAAAAAAU/IX5wvD_DNOI/photo.jpg?sz=128", "display_name": "Raman Saini", "link": "https://stackoverflow.com/users/10485873/raman-saini"}, "edited": false, "score": 0, "creation_date": 1552564855, "post_id": 55150369, "comment_id": 97062928, "body": "I want to start at 00:00:00: When I use datetime.now() time is current time"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 11199238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/066838c65b6f9c88ab5987d935562ae8?s=128&d=identicon&r=PG&f=1", "display_name": "Kong", "link": "https://stackoverflow.com/users/11199238/kong"}, "edited": false, "score": 0, "creation_date": 1552625303, "post_id": 55165388, "comment_id": 97090040, "body": "How I use this form. ./append.py  gtest.txt  &gt; test.txt"}, {"owner": {"reputation": 142, "user_id": 10485873, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XzV03sSSGN4/AAAAAAAAAAI/AAAAAAAAAAU/IX5wvD_DNOI/photo.jpg?sz=128", "display_name": "Raman Saini", "link": "https://stackoverflow.com/users/10485873/raman-saini"}, "reply_to_user": {"reputation": 13, "user_id": 11199238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/066838c65b6f9c88ab5987d935562ae8?s=128&d=identicon&r=PG&f=1", "display_name": "Kong", "link": "https://stackoverflow.com/users/11199238/kong"}, "edited": false, "score": 0, "creation_date": 1552628697, "post_id": 55165388, "comment_id": 97090920, "body": "you can do this in the end: <code>with open(&#39;&#47;home&#47;pi&#47;gtest.txt&#39;, &#39;w&#39;) as the_file:     the_file.write(result)</code>"}], "tags": [], "owner": {"reputation": 142, "user_id": 10485873, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XzV03sSSGN4/AAAAAAAAAAI/AAAAAAAAAAU/IX5wvD_DNOI/photo.jpg?sz=128", "display_name": "Raman Saini", "link": "https://stackoverflow.com/users/10485873/raman-saini"}, "is_accepted": false, "score": 1, "last_activity_date": 1552628846, "last_edit_date": 1552628846, "creation_date": 1552574585, "answer_id": 55165388, "question_id": 55150369, "link": "https://stackoverflow.com/questions/55150369/writing-time-equal-number-of-line-in-file-text/55165388#55165388", "title": "writing time equal number of line in file text", "body": "<p>Try this:</p>\n\n<pre><code>import datetime\n\nstr(datetime.timedelta(seconds=666))\nresult = ''\ncountTime = 0\nfor line in open('/home/pi/gtest.txt'):\n    result = result + (str(datetime.timedelta(seconds=countTime)) + \":\"  + line) + '\\n'\n    countTime = countTime+1\nprint (result)\n</code></pre>\n\n<p>You can then just write the result to the file:</p>\n\n<pre><code>with open('/home/pi/gtest.txt', 'w') as the_file:\n    the_file.write(result)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 11199238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/066838c65b6f9c88ab5987d935562ae8?s=128&d=identicon&r=PG&f=1", "display_name": "Kong", "link": "https://stackoverflow.com/users/11199238/kong"}, "edited": false, "score": 0, "creation_date": 1552624304, "post_id": 55165518, "comment_id": 97089810, "body": "It&#39;s error at last line.  (end=&#39;&#39;)                      print(&#39;%02d:%02d:%02d:%s&#39; % (hours, minutes, seconds, line), end=&#39;&#39;)                                                                     ^ SyntaxError: invalid syntax Compilation failed."}, {"owner": {"reputation": 90691, "user_id": 51685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vVhK5.jpg?s=128&g=1", "display_name": "AKX", "link": "https://stackoverflow.com/users/51685/akx"}, "reply_to_user": {"reputation": 13, "user_id": 11199238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/066838c65b6f9c88ab5987d935562ae8?s=128&d=identicon&r=PG&f=1", "display_name": "Kong", "link": "https://stackoverflow.com/users/11199238/kong"}, "edited": false, "score": 0, "creation_date": 1552625092, "post_id": 55165518, "comment_id": 97089998, "body": "As said, this is Python 3. Use your Python 3 interpreter, e.g. <code>python3</code>."}, {"owner": {"reputation": 13, "user_id": 11199238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/066838c65b6f9c88ab5987d935562ae8?s=128&d=identicon&r=PG&f=1", "display_name": "Kong", "link": "https://stackoverflow.com/users/11199238/kong"}, "edited": false, "score": 0, "creation_date": 1552627237, "post_id": 55165518, "comment_id": 97090510, "body": "Ok I can run it. Can I ask one more question. How to use this form when I execute from terminal. $ python3 this-script.py myfilename.txt &gt; annotated.txt I use in shell script but files is change name every time not just gtest.txt."}, {"owner": {"reputation": 90691, "user_id": 51685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vVhK5.jpg?s=128&g=1", "display_name": "AKX", "link": "https://stackoverflow.com/users/51685/akx"}, "reply_to_user": {"reputation": 13, "user_id": 11199238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/066838c65b6f9c88ab5987d935562ae8?s=128&d=identicon&r=PG&f=1", "display_name": "Kong", "link": "https://stackoverflow.com/users/11199238/kong"}, "edited": false, "score": 0, "creation_date": 1552639673, "post_id": 55165518, "comment_id": 97095233, "body": "@Kong Let me augment it a little."}], "tags": [], "owner": {"reputation": 90691, "user_id": 51685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vVhK5.jpg?s=128&g=1", "display_name": "AKX", "link": "https://stackoverflow.com/users/51685/akx"}, "is_accepted": true, "score": 0, "last_activity_date": 1552639752, "last_edit_date": 1552639752, "creation_date": 1552574937, "answer_id": 55165518, "question_id": 55150369, "link": "https://stackoverflow.com/questions/55150369/writing-time-equal-number-of-line-in-file-text/55165518#55165518", "title": "writing time equal number of line in file text", "body": "<p>You can use the <code>enumerate()</code> function to get the line number and the line from a file when iterating, and <code>divmod()</code> to divide-and-remainder a number. Here we do it twice, first to get from just seconds (the line number) to minutes and seconds, then from minutes to hours and minutes.</p>\n\n<p>Then, we use regular <code>%</code> interpolation with the <code>%02d</code> specifier to turn the hours/minutes/seconds variables into zero-padded two-character-length strings, and glue them together with colons to the original line.</p>\n\n<p>For added meta points, this script annotates itself by default. :)</p>\n\n<p>To write the output to another file, it's easiest to just do it using the shell:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>$ python this-script.py &gt; annotated.txt\n</code></pre>\n\n<p>This is Python 3, by the way; the <code>print()</code> statement would look different on Python 2.</p>\n\n<p><em>EDIT:</em> Added argument parsing as per discussion in comments. The script now allows</p>\n\n<pre><code>$ python this-script.py inputfile.txt &gt; annotated.txt\n</code></pre>\n\n<hr>\n\n<pre class=\"lang-py prettyprint-override\"><code>import argparse\n\nap = argparse.ArgumentParser()\nap.add_argument('input', default=__file__)\nargs = ap.parse_args()\n\nwith open(args.input, 'r') as f:\n    for line_number, line in enumerate(f):\n        minutes, seconds = divmod(line_number, 60)\n        hours, minutes = divmod(minutes, 60)\n        print('%02d:%02d:%02d:%s' % (hours, minutes, seconds, line), end='')\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 11199238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/066838c65b6f9c88ab5987d935562ae8?s=128&d=identicon&r=PG&f=1", "display_name": "Kong", "link": "https://stackoverflow.com/users/11199238/kong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 55165518, "answer_count": 2, "score": 0, "last_activity_date": 1552639752, "creation_date": 1552507515, "last_edit_date": 1552568543, "question_id": 55150369, "link": "https://stackoverflow.com/questions/55150369/writing-time-equal-number-of-line-in-file-text", "title": "writing time equal number of line in file text", "body": "<p>I want to write time in every line in front of Text by check number of line in text file. Because I want to convert this text file to .srt file by this link.\n<a href=\"https://unix.stackexchange.com/questions/111024/how-to-convert-a-txt-subtitle-file-to-srt-format\">https://unix.stackexchange.com/questions/111024/how-to-convert-a-txt-subtitle-file-to-srt-format</a></p>\n\n<p>Every one line is 1 second.(start first line at 00:00:00:) My file has many line (500-1000 line up)\nfrom</p>\n\n<pre><code>.......Text......... (first line)\n.......Text......... (second line)\n.......Text......... (third line)\n    .\n    .\n    .\n.......Text......... (60 line)\n.......Text......... (61 line)\n    .\n    .\n.................... (3600 line)\n</code></pre>\n\n<p>to this</p>\n\n<pre><code>00:00:01:.......Text......... (first line)\n00:00:02:.......Text......... (second line)\n00:00:03:.......Text......... (third line)\n    .\n    .\n    .\n00:01:00:.......Text......... (60 line)\n00:01:01:.......Text......... (61 line)\n    .\n    .\n01:00:00:.................... (3600 line)\n</code></pre>\n\n<p>Now I can check number of line and write text in front of text every line.\nBut error when use code check numberline and open file write text.\nI don't know how to write for loop and compare number of line. I'm noob for this.</p>\n\n<pre><code>def numberline(fname):\n    with open(fname) as f:\n           for i, l in enumerate(f):\n                  pass\n    return i + 1\nnumberline(\"/home/pi/gtest.txt\")) \n\ndataFile = open(\"/home/pi/gtest.txt\", \"w\")\n    for line in range(numberline(\"/home/pi/gtest.txt\")):\ndataFile.write(\"00:00:%02d:\\n\" % line)\n    dataFile.close()\n</code></pre>\n\n<p>Please help me. Thankyou\nThis my project wait for this part because this is last part in python.\nNormally I use Rpi with linux command but not understand in python.</p>\n"}, {"tags": ["python", "subprocess", "version"], "comments": [{"owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "edited": false, "score": 0, "creation_date": 1552507577, "post_id": 55150301, "comment_id": 97041051, "body": "What is <code>pythonpath</code>?"}, {"owner": {"reputation": 795, "user_id": 9215267, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qs3PD.jpg?s=128&g=1", "display_name": "Siddharth Dushantha", "link": "https://stackoverflow.com/users/9215267/siddharth-dushantha"}, "reply_to_user": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "edited": false, "score": 0, "creation_date": 1552507770, "post_id": 55150301, "comment_id": 97041140, "body": "@Aran-Fey Since it is a variable, I belive it must be the path to one of his Python commands"}, {"owner": {"reputation": 1085, "user_id": 1690805, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/g5JiQ.jpg?s=128&g=1", "display_name": "Georg Pfolz", "link": "https://stackoverflow.com/users/1690805/georg-pfolz"}, "edited": false, "score": 0, "creation_date": 1552507840, "post_id": 55150301, "comment_id": 97041174, "body": "yes exactly, it&#39;s the path to one of the python executables"}, {"owner": {"reputation": 1085, "user_id": 1690805, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/g5JiQ.jpg?s=128&g=1", "display_name": "Georg Pfolz", "link": "https://stackoverflow.com/users/1690805/georg-pfolz"}, "edited": false, "score": 0, "creation_date": 1552507941, "post_id": 55150301, "comment_id": 97041230, "body": "In the meantime I found a workaround here: <a href=\"https://linuxconfig.org/check-python-version\" rel=\"nofollow noreferrer\">linuxconfig.org/check-python-version</a>. So the command is <code>&#47;path&#47;to&#47;python &#47;path&#47;to&#47;check_python_script.py</code>. With this command check_output works as expected."}], "answers": [{"comments": [{"owner": {"reputation": 1085, "user_id": 1690805, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/g5JiQ.jpg?s=128&g=1", "display_name": "Georg Pfolz", "link": "https://stackoverflow.com/users/1690805/georg-pfolz"}, "edited": false, "score": 0, "creation_date": 1552927579, "post_id": 55150531, "comment_id": 97187096, "body": "It doesn&#39;t work for me, same problem as with my own initial script: the result of <code>out = process.communicate()[0].splitlines()</code> is printed but the variable <b>out</b> is an empty list. Maybe it works on Python 3, I&#39;m working on 2.7.15."}], "tags": [], "owner": {"reputation": 744, "user_id": 7370834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Kkm5n.jpg?s=128&g=1", "display_name": "Dmitrii", "link": "https://stackoverflow.com/users/7370834/dmitrii"}, "is_accepted": true, "score": 1, "last_activity_date": 1578017869, "last_edit_date": 1578017869, "creation_date": 1552508252, "answer_id": 55150531, "question_id": 55150301, "link": "https://stackoverflow.com/questions/55150301/geting-version-of-python-executable-from-a-script/55150531#55150531", "title": "Geting version of python executable from a script", "body": "<p><strong>Code</strong>:</p>\n\n<pre><code>#!/usr/bin/python2\n# -*- coding: utf-8 -*-\n\nfrom subprocess import Popen, PIPE\n\nif __name__ == '__main__':\n\n    cmd = '/usr/local/bin/python2'\n    param = '-V'\n\n    process = Popen([cmd, param], stdout=PIPE, stderr=PIPE)\n    process.wait()\n\n    # be aware, the order should be out, err for shell tools, but python reply shows in err, out, i've no idea why\n\n    err, out = process.communicate()\n\n    print out\n</code></pre>\n\n<p><strong>Output</strong>:</p>\n\n<blockquote>\n  <p>Python 2.7.15</p>\n</blockquote>\n\n<p>You can see source code <a href=\"https://github.com/caa06d9c/Examples/blob/master/Python/tools/basic/get_python2_version/run.py\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 1085, "user_id": 1690805, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/g5JiQ.jpg?s=128&g=1", "display_name": "Georg Pfolz", "link": "https://stackoverflow.com/users/1690805/georg-pfolz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 55150531, "answer_count": 1, "score": 0, "last_activity_date": 1578017869, "creation_date": 1552507266, "question_id": 55150301, "link": "https://stackoverflow.com/questions/55150301/geting-version-of-python-executable-from-a-script", "title": "Geting version of python executable from a script", "body": "<p>I have different python versions installed (from source) on my server. Now I'd like to be able to get the version of a python executable from another python script (running another python version). </p>\n\n<p>I know I can do it from the shell with <code>path/to/python -V</code>. But I'd like to do it from a script, like:</p>\n\n<pre><code>command = ' '.join([pythonpath, '-V'])\noutput = subprocess.check_output( command, shell=True )\nprint output\n</code></pre>\n\n<p>But in this case <em>check_output</em> does not work as expected: the output is shown in the terminal but does not go into the variable <em>output</em>.</p>\n"}, {"tags": ["python", "list", "flatten"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1552509308, "post_id": 55150276, "comment_id": 97041849, "body": "If you search on the phrase &quot;Python flatten list&quot;, you\u2019ll find resources that can explain it much better than we can in an answer here.  Your problem is not the mixed types; rather, it&#39;s that you try to flatten things that are not lists."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11199411, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5411246a8dd9dd418b221b6dca40b9b?s=128&d=identicon&r=PG&f=1", "display_name": "mhsmustang1", "link": "https://stackoverflow.com/users/11199411/mhsmustang1"}, "edited": false, "score": 0, "creation_date": 1552507670, "post_id": 55150337, "comment_id": 97041089, "body": "thank you! upvoted you, but it says it doesnt display in public because i have less than 15 posts lol"}], "tags": [], "owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": false, "score": 0, "last_activity_date": 1552507461, "creation_date": 1552507461, "answer_id": 55150337, "question_id": 55150276, "link": "https://stackoverflow.com/questions/55150276/how-to-flatten-out-a-python-list-of-mixed-ints-and-strings/55150337#55150337", "title": "how to flatten out a python list of mixed ints and strings", "body": "<p>You should check that each item is a list before trying to flatten it.</p>\n\n<pre><code>def flatten(list_):\n    flat = []\n    for item in list_:\n        if isinstance(item, list):\n            flat.extend(flatten(item))\n        else:\n            flat.append(item)\n    return flat\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11199411, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5411246a8dd9dd418b221b6dca40b9b?s=128&d=identicon&r=PG&f=1", "display_name": "mhsmustang1", "link": "https://stackoverflow.com/users/11199411/mhsmustang1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "closed_date": 1552509580, "answer_count": 1, "score": -1, "last_activity_date": 1552507461, "creation_date": 1552507161, "last_edit_date": 1552507183, "question_id": 55150276, "link": "https://stackoverflow.com/questions/55150276/how-to-flatten-out-a-python-list-of-mixed-ints-and-strings", "closed_reason": "Duplicate", "title": "how to flatten out a python list of mixed ints and strings", "body": "<p>Im trying to flatten out the following list in python code. I keep running into an 'int is not iterable error' i know this is due to the list being both strings and ints. how do i account for this? sorry guys, first month of coding..... i know this is basic.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>list_1 = [1,2,[3,[4,5],6],7,8,['hardware'],[['software'], 'interface']]\n\n\ndef flatten (list):\n    flat = []\n    for sublist in list_1:\n        for item in sublist:\n            flat.append(item)\n\n    print(flat)\n    return\n\n\nflatten(list_1)\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "web-scraping"], "answers": [{"comments": [{"owner": {"reputation": 313, "user_id": 6628616, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/f67a1e2b1c0ef6a0ed0ada81072ecbe6?s=128&d=identicon&r=PG&f=1", "display_name": "Evridiki", "link": "https://stackoverflow.com/users/6628616/evridiki"}, "edited": false, "score": 0, "creation_date": 1552512607, "post_id": 55151461, "comment_id": 97043325, "body": "My first errors come on info.append(row[0])     info.append(price_text)     info.append(availability_text)"}, {"owner": {"reputation": 49973, "user_id": 46387, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/f21bda50069eba70879c3204a6788315?s=128&d=identicon&r=PG", "display_name": "Ben Blank", "link": "https://stackoverflow.com/users/46387/ben-blank"}, "reply_to_user": {"reputation": 313, "user_id": 6628616, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/f67a1e2b1c0ef6a0ed0ada81072ecbe6?s=128&d=identicon&r=PG&f=1", "display_name": "Evridiki", "link": "https://stackoverflow.com/users/6628616/evridiki"}, "edited": false, "score": 0, "creation_date": 1552512824, "post_id": 55151461, "comment_id": 97043429, "body": "@Evridiki \u2014 I&#39;ve added an example to my answer."}, {"owner": {"reputation": 313, "user_id": 6628616, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/f67a1e2b1c0ef6a0ed0ada81072ecbe6?s=128&d=identicon&r=PG&f=1", "display_name": "Evridiki", "link": "https://stackoverflow.com/users/6628616/evridiki"}, "edited": false, "score": 0, "creation_date": 1552512960, "post_id": 55151461, "comment_id": 97043500, "body": "The last part  logic is correct? I dont forget something ?"}, {"owner": {"reputation": 49973, "user_id": 46387, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/f21bda50069eba70879c3204a6788315?s=128&d=identicon&r=PG", "display_name": "Ben Blank", "link": "https://stackoverflow.com/users/46387/ben-blank"}, "reply_to_user": {"reputation": 313, "user_id": 6628616, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/f67a1e2b1c0ef6a0ed0ada81072ecbe6?s=128&d=identicon&r=PG&f=1", "display_name": "Evridiki", "link": "https://stackoverflow.com/users/6628616/evridiki"}, "edited": false, "score": 0, "creation_date": 1552513096, "post_id": 55151461, "comment_id": 97043568, "body": "@Evridiki \u2014 I&#39;m not familiar with the <code>Pool</code> API, but the rest of that block looks fine, aside from the indentation."}, {"owner": {"reputation": 313, "user_id": 6628616, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/f67a1e2b1c0ef6a0ed0ada81072ecbe6?s=128&d=identicon&r=PG&f=1", "display_name": "Evridiki", "link": "https://stackoverflow.com/users/6628616/evridiki"}, "edited": false, "score": 0, "creation_date": 1552513226, "post_id": 55151461, "comment_id": 97043625, "body": "I get a Invalid URL &#39;d&#39;: No schema supplied. Perhaps you meant http://d? error on info.append(availability_text) the indentation on visual studio looks ok it was running before I add pool API"}], "tags": [], "owner": {"reputation": 49973, "user_id": 46387, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/f21bda50069eba70879c3204a6788315?s=128&d=identicon&r=PG", "display_name": "Ben Blank", "link": "https://stackoverflow.com/users/46387/ben-blank"}, "is_accepted": false, "score": 1, "last_activity_date": 1552513005, "last_edit_date": 1552513005, "creation_date": 1552512349, "answer_id": 55151461, "question_id": 55150263, "link": "https://stackoverflow.com/questions/55150263/cannot-make-my-python-web-scraping-script-to-work-with-multiprocessing/55151461#55151461", "title": "Cannot make my python web scraping script to work with multiprocessing", "body": "<p>Start by double-checking your indentation.  It looks inconsistent in what you've pasted here, and if your <code>if len(records) &gt; 0:</code> line really <em>isn't</em> indented, you'll certainly get a NameError there.</p>\n\n<p>In order for a statement to be inside a block, it must have an indent equal to the other statements in the block, and greater than the line which opens the block.  In other words, everything inside an <code>if</code> statement should line up.  For example:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>if __name__ == \"__main__\":\n    with Pool(10) as p:\n        records = p.map(parse, contents)\n\n        if len(records) &gt; 0:\n            with open('output_websupplies.csv', 'a+') as f:\n                f.write('\\n'.join(records))\n</code></pre>\n"}], "owner": {"reputation": 313, "user_id": 6628616, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/f67a1e2b1c0ef6a0ed0ada81072ecbe6?s=128&d=identicon&r=PG&f=1", "display_name": "Evridiki", "link": "https://stackoverflow.com/users/6628616/evridiki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1552513005, "creation_date": 1552507107, "last_edit_date": 1552511883, "question_id": 55150263, "link": "https://stackoverflow.com/questions/55150263/cannot-make-my-python-web-scraping-script-to-work-with-multiprocessing", "title": "Cannot make my python web scraping script to work with multiprocessing", "body": "<p>I read my urls from a csv and I want at the end to export the results in a new csv. There are about 60 URLs I use the following</p>\n\n<pre><code>import csv\nfrom bs4 import BeautifulSoup \nimport requests \nfrom time import sleep\nfrom multiprocessing import Pool\n\ncontents = []\n\nwith open('websupplies2.csv') as csvf:\n reader = csv.reader(csvf, delimiter=\";\")\n for row in reader:\n    contents.append(row) # Add each url to list contents\n\n price_text='-'\n availability_text='-'\n\ndef parse(contents):\n  info = []\n  with open('output_websupplies.csv', mode='w') as f:\n  f_writer = csv.writer(f, delimiter=';', quotechar='\"', quoting=csv.QUOTE_MINIMAL)\n  f_writer.writerow(['SKU','Price','Availability'])\n\n  for row in contents:  # Parse through each url in the list.\n  sleep(3)\n  page = requests.get(row[1]).content\n  soup = BeautifulSoup(page, \"html.parser\")\n\n  price = soup.find('div', attrs={'class':'product-price'})\n  if price is not None:\n   price_text = price.text.strip()\n   print(price_text)\n  else:\n   price_text = \"0,00\"\n   print(price_text)\n\n  availability = soup.find('div', attrs={'class':'available-text'})\n  if availability is not None:\n   availability_text = availability.text.strip()\n   print(availability_text)\n  else:\n   availability_text = \"\u039c\u03b7 \u0394\u03b9\u03b1\u03b8\u03ad\u03c3\u03b9\u03bc\u03bf\"\n   print(availability_text)\n\n  info.append(row[0])\n  info.append(price_text)\n  info.append(availability_text)\n\nreturn ';'.join(info)     \n\nif __name__ == \"__main__\":\n with Pool(10) as p:\n records = p.map(parse, contents)\n\nif len(records) &gt; 0:\n with open('output_websupplies.csv', 'a+') as f:\n    f.write('\\n'.join(records))\n</code></pre>\n\n<p>But I get error messages like Name Error records is not defined. What should I change in order the script to  work?</p>\n"}, {"tags": ["python", "html", "beautifulsoup"], "answers": [{"tags": [], "owner": {"reputation": 2227, "user_id": 2437141, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PmnfV.jpg?s=128&g=1", "display_name": "Maaz", "link": "https://stackoverflow.com/users/2437141/maaz"}, "is_accepted": true, "score": 0, "last_activity_date": 1552508962, "last_edit_date": 1552508962, "creation_date": 1552508416, "answer_id": 55150565, "question_id": 55150258, "link": "https://stackoverflow.com/questions/55150258/avoiding-try-except-when-web-scraping-html/55150565#55150565", "title": "Avoiding try/except when web-scraping html", "body": "<p>Could you not just <code>try except</code>all your code catching multi exception? Like:</p>\n\n<pre><code>try:\n    # All your code\n    # For exemple \n    # if soup.find_all('p', {'class': \"Notice\"}):\n    #      ...\n    # else:\n    #      ...\nexcept (AttributeError, IndexError) as e:\n    continue\n</code></pre>\n\n<p>And for part where you are trying to get text, a simply test could be enough in my opinion</p>\n\n<p>Like:</p>\n\n<pre><code>if soup.find('p', {'class': \"ConsolidationPeriod-e\"}):\n    text = soup.find('p', {'class': \"ConsolidationPeriod-e\"}).get_text()\nelse:\n    text = soup.find('p', {'class': \"ConsolidationPeriod\"}).text\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>if soup.find('p', {'class': \"regnumber-e\"}):\n    reg_title = soup.find('p', {'class': \"regnumber-e\"}).get_text()\nelif soup.find('p', {'class': \"regtitle-e\"}):\n    reg_title = soup.find('p', {'class': \"regtitle-e\"}).get_text()\nelse:\n    reg_title = soup.find('p', {'class': \"Yregnumber-e\"}).get_text()\n</code></pre>\n"}], "owner": {"reputation": 397, "user_id": 8947889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbc34c8e1656da263b623c84238f8633?s=128&d=identicon&r=PG&f=1", "display_name": "Stephen Strosko", "link": "https://stackoverflow.com/users/8947889/stephen-strosko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 55150565, "answer_count": 1, "score": 0, "last_activity_date": 1612991725, "creation_date": 1552507094, "last_edit_date": 1612991725, "question_id": 55150258, "link": "https://stackoverflow.com/questions/55150258/avoiding-try-except-when-web-scraping-html", "title": "Avoiding try/except when web-scraping html", "body": "<p>I was recently writing a web-scraper, and I found myself nesting try/except loops and relying on errors to drive part of my code like the following two segments:</p>\n<pre><code>try:\n    reg_title = soup.find('p', {'class': &quot;regnumber-e&quot;}).text\nexcept AttributeError:\n    try:\n        reg_title = soup.find('p', {'class': &quot;regtitle-e&quot;}).text\n    except AttributeError:\n        reg_title = soup.find('p', {'class': &quot;Yregnumber-e&quot;}).text\n</code></pre>\n<p>and</p>\n<pre><code>if soup.find_all('p', {'class': &quot;Notice&quot;}):\n    try:\n        #More code\n    except IndexError:\n        #More code\n        continue\nelif (soup.find_all('p', {'class': &quot;ConsolidationPeriod-e&quot;}) or\n      soup.find_all('p', {'class': &quot;ConsolidationPeriod&quot;})):\n    try:\n        text = soup.find('p', {'class': &quot;ConsolidationPeriod-e&quot;}).text\n    except AttributeError:\n        text = soup.find('p', {'class': &quot;ConsolidationPeriod&quot;}).text\nelif soup.find('p', {'class': &quot;Notice-e&quot;}):\n    #More code\n    continue\nelse:\n    continue\n</code></pre>\n<p>Obviously I have cut out sections of code, but the specific code is irrelevant here. Generally, my poor coding sensors are going off and I feel like there has to be a better way to navigate differing html tags when web-scraping. Any thoughts?</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "edited": false, "score": 0, "creation_date": 1552507207, "post_id": 55150254, "comment_id": 97040901, "body": "The order of the columns should be irrelevant in your code whenever possible. Columns are named, so they&#39;re accessed by name, not order. Just rename them using a dictionary: <code>df = df.rename({&#39;property_1&#39;: &#39;P1&#39;, ...})</code>. If you want to reorder them, then you can simply use indexing: <code>df = df[reversed(df.columns)]</code>"}, {"owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 0, "creation_date": 1552507365, "post_id": 55150254, "comment_id": 97040959, "body": "the <code>columns</code> keyword in the <code>from_dict</code> method doesn&#39;t do what you think it does. It doesn&#39;t &quot;rename&quot; the columns in a specific order (after all, dictionaries are unordered by &quot;definition&quot;.. it only changed in python 3.7+ preserving insertion order), but rather &quot;looks&quot; for which keys to look up in the dictionary you&#39;re passing. So, first import your dictionary into a dataframe, and then reorder the columns however you feel more confortable with. Do not &quot;trust&quot; in ordering here; rather, use <code>rename</code> method and map with a dict the old names and new names"}, {"owner": {"reputation": 613, "user_id": 1703849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e0f523d83d3d5ce7619cba6105e36e29?s=128&d=identicon&r=PG", "display_name": "G.M", "link": "https://stackoverflow.com/users/1703849/g-m"}, "reply_to_user": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "edited": false, "score": 0, "creation_date": 1552507573, "post_id": 55150254, "comment_id": 97041049, "body": "I tried renaming as well as suggested by @AlexanderReynolds  but it doesn&#39;t change names. I&#39;ll edit my question"}, {"owner": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "edited": false, "score": 1, "creation_date": 1552507645, "post_id": 55150254, "comment_id": 97041080, "body": "You need to reassign back to the original dataframe. Note my comment says <code>df = df.rename(...)</code>. Presumably that&#39;s the issue, but we&#39;ll see with the updated post. Edit: post updated, I believe I&#39;m correct in my assumption."}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1552507688, "post_id": 55150254, "comment_id": 97041102, "body": "Re:edit see my answer on how to use <code>rename()</code> correctly."}, {"owner": {"reputation": 613, "user_id": 1703849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e0f523d83d3d5ce7619cba6105e36e29?s=128&d=identicon&r=PG", "display_name": "G.M", "link": "https://stackoverflow.com/users/1703849/g-m"}, "reply_to_user": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "edited": false, "score": 0, "creation_date": 1552507960, "post_id": 55150254, "comment_id": 97041242, "body": "@AlexanderReynolds you are, thank you."}], "answers": [{"comments": [{"owner": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "edited": false, "score": 1, "creation_date": 1552507729, "post_id": 55150313, "comment_id": 97041120, "body": "And if OP wants to keep a specific order, they can just index their dataframe in the column order they prefer and reassign."}, {"owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 1, "creation_date": 1552507934, "post_id": 55150313, "comment_id": 97041224, "body": "Just for the matter of this answer, <code>dictionaries inherently do not have ordering</code> might not be true for Python 3.7+, where dicts follow insertion order. (not my point to be annoying, just sharing the news haha)."}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 1, "creation_date": 1552508042, "post_id": 55150313, "comment_id": 97041284, "body": "@RafaelC No, you&#39;re right, it&#39;s an important point. For the purpose of discussion though, I did not want to bog down OP with specifics as they very well might not be using 3.6+ and it wouldn&#39;t be right to assume as such unless they mentioned it explicitly. Thanks for weighing in!"}, {"owner": {"reputation": 613, "user_id": 1703849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e0f523d83d3d5ce7619cba6105e36e29?s=128&d=identicon&r=PG", "display_name": "G.M", "link": "https://stackoverflow.com/users/1703849/g-m"}, "reply_to_user": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "edited": false, "score": 0, "creation_date": 1552508259, "post_id": 55150313, "comment_id": 97041382, "body": "Thanks for the answer, as @AlexanderReynolds noticed I&#39;ve missed reassignment part <code>df = df.rename(...)</code>. Thanks everyone for the input"}], "tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 4, "last_activity_date": 1552507339, "creation_date": 1552507339, "answer_id": 55150313, "question_id": 55150254, "link": "https://stackoverflow.com/questions/55150254/cant-change-column-names-in-pandas-data/55150313#55150313", "title": "Can&#39;t change column names in pandas data", "body": "<p>Unfortunately, the <code>columns</code> parameter in <code>to_dict</code> only specifies the columns you want to select. For example,</p>\n\n<pre><code>pd.DataFrame.from_dict(hits, orient='index', columns=['property_4'])\n\n        property_4\ncomp_1          24\ncomp_2          23\ncomp_3          24\n</code></pre>\n\n<p>Only selects the \"property_4\" column, ignoring everything else. Of course, this makes sense because dictionaries inherently do not have ordering. Your only option is to rename the keys or rename the columns using <code>DataFrame.rename()</code>.</p>\n\n<pre><code>cmap = {'property_1': 'P1', 'property_2': 'P2', 'property_3': 'P3', \n        'property_4': 'P4', 'missing': 'Missing'}\ndf = df.rename(columns=cmap)\ndf\n\n        P4  P2   P3  Missing  P1\ncomp_1  24  45  124       39  16\ncomp_2  23  49  126       38  16\ncomp_3  24  43  116       30  19\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "edited": false, "score": 1, "creation_date": 1552507815, "post_id": 55150390, "comment_id": 97041156, "body": "I would avoid using <code>inplace</code> arguments; they&#39;re likely to be deprecated in future versions of Pandas; and otherwise, this answer is the same as this one: <a href=\"https://stackoverflow.com/a/55150313/5087436\">stackoverflow.com/a/55150313/5087436</a>"}, {"owner": {"reputation": 36, "user_id": 11187245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b6764fac66c85965550c4d5449bffe5?s=128&d=identicon&r=PG&f=1", "display_name": "Subsum44", "link": "https://stackoverflow.com/users/11187245/subsum44"}, "reply_to_user": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "edited": false, "score": 0, "creation_date": 1552508060, "post_id": 55150390, "comment_id": 97041295, "body": "Good to know thanks, and I didn&#39;t see that one when I posted, but yea they&#39;re the same."}], "tags": [], "owner": {"reputation": 36, "user_id": 11187245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b6764fac66c85965550c4d5449bffe5?s=128&d=identicon&r=PG&f=1", "display_name": "Subsum44", "link": "https://stackoverflow.com/users/11187245/subsum44"}, "is_accepted": false, "score": 1, "last_activity_date": 1552507714, "creation_date": 1552507714, "answer_id": 55150390, "question_id": 55150254, "link": "https://stackoverflow.com/questions/55150254/cant-change-column-names-in-pandas-data/55150390#55150390", "title": "Can&#39;t change column names in pandas data", "body": "<p>You can provide a dict to replace the columns and give you 1:1 mapping.  Adding the in place flag will do it in the existing dataframe, omitting it will give you a new dataframe with a the new column names.</p>\n\n<pre><code>df.rename(columns = {\n    'property_1': 'P1',\n    'property_2': 'P2',\n    'property_3': 'P3',\n    'property_4': 'P4',\n    'missing': 'Missing'\n    }, inplace = True)\n</code></pre>\n"}], "owner": {"reputation": 613, "user_id": 1703849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e0f523d83d3d5ce7619cba6105e36e29?s=128&d=identicon&r=PG", "display_name": "G.M", "link": "https://stackoverflow.com/users/1703849/g-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3142, "favorite_count": 1, "accepted_answer_id": 55150313, "answer_count": 2, "score": 2, "last_activity_date": 1552507714, "creation_date": 1552507068, "last_edit_date": 1552507661, "question_id": 55150254, "link": "https://stackoverflow.com/questions/55150254/cant-change-column-names-in-pandas-data", "title": "Can&#39;t change column names in pandas data", "body": "<p>I have a python dictionary that looks like this:</p>\n\n<pre><code>d = {'comp_1': {'property_4': 24, 'property_2': 45, 'property_3': 124, 'missing': 39, 'property_1': 16}, \n 'comp_2': {'property_4': 23, 'property_2': 49, 'property_3': 126, 'property_1': 16, 'missing': 38}, \n 'comp_3': {'property_4': 24, 'property_2': 43, 'property_1': 19, 'missing': 30, 'property_3': 116}}\n</code></pre>\n\n<p>When I load it into panda dataframe and try to print it it looks as follows:</p>\n\n<pre><code>df = pd.DataFrame.from_dict(hits, orient='index')\nprint(df)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>        missing  property_1  property_2  property_3  property_4\ncomp_1       39          16          45         124          24\ncomp_2       38          16          49         126          23\ncomp_3       30          19          43         116          24\n</code></pre>\n\n<p>Now, I want to rename the columns, so I try:</p>\n\n<pre><code>df = pd.DataFrame.from_dict(hits, orient='index' columns=reversed(['Missing', 'P1', 'P2', 'P3', 'P4']))\n</code></pre>\n\n<p>which yields empty data frame (which I assume because these keys do not exist in dictionary?):</p>\n\n<pre><code>Empty DataFrame\nColumns: []\nIndex: []\n</code></pre>\n\n<p>If I try this instead:</p>\n\n<pre><code>df = pd.DataFrame.from_dict(hits, orient='index')\ncolumns = reversed(['Missing', 'P1', 'P2', 'P3', 'P4'])\ndf.columns=columns\n</code></pre>\n\n<p>columns are renamed by order is not preserved, so each time I run the code the number do not correspond to the column, e.g:</p>\n\n<pre><code>        P4  P3   P2  P1  Missing\ncomp_1  16  24  124  45       39\ncomp_2  16  23  126  49       38\ncomp_3  19  24  116  43       30\n</code></pre>\n\n<p>and:</p>\n\n<pre><code>        P4  P3  P2   P1  Missing\ncomp_1  24  16  39  124       45\ncomp_2  23  16  38  126       49\ncomp_3  24  19  30  116       43\n</code></pre>\n\n<p>I'm guessing I need to somehow provide keys from the nested dictioary when I load data into dataframe, but I'm not sure how to do it. Or is it something else I need to do?</p>\n\n<p><strong>Edit:</strong>\nI also tried renaming columns with dictionary as follows:</p>\n\n<pre><code>df.rename({'missing': 'Missing', 'property_1': 'P1', 'property_2': 'P2', 'property_3': 'P3',\n           'property_4': 'P4'})\n</code></pre>\n\n<p>but still old names are shown</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 1896, "user_id": 4226702, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-siukF5ObSUs/AAAAAAAAAAI/AAAAAAAAAEc/Qww5nEqBNDw/photo.jpg?sz=128", "display_name": "Alexander Dmitriev", "link": "https://stackoverflow.com/users/4226702/alexander-dmitriev"}, "edited": false, "score": 1, "creation_date": 1552507143, "post_id": 55150250, "comment_id": 97040862, "body": "Your first string iterates over the list of name. You should use an infinite loop instead."}, {"owner": {"reputation": 1036, "user_id": 9855588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef25aee783cab58b07adb188667fb051?s=128&d=identicon&r=PG&f=1", "display_name": "dataviews", "link": "https://stackoverflow.com/users/9855588/dataviews"}, "edited": false, "score": 0, "creation_date": 1552507384, "post_id": 55150250, "comment_id": 97040968, "body": "As mentioned above, you are using a for loop, which iterates over whatever data you intend to iterate over, but only once. A while loop could be used until some future condition is met. It stops after 5 because you only have 5 elements in your username list, and again the for loop iterates over everything in that list only once."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 11143018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FtS8l.png?s=128&g=1", "display_name": "Burak", "link": "https://stackoverflow.com/users/11143018/burak"}, "is_accepted": false, "score": 0, "last_activity_date": 1552507906, "creation_date": 1552507906, "answer_id": 55150455, "question_id": 55150250, "link": "https://stackoverflow.com/questions/55150250/how-to-loop-back-to-the-beginning-of-the-code-on-python-3-7/55150455#55150455", "title": "How to loop back to the beginning of the code on Python 3.7", "body": "<p>You can use infinity loop. This is an example.\n\"while True\" works forever.</p>\n\n<pre><code>username = ['admin','bill','kevin','mike','nick']  \nwhile True:\n    name = input(\"What's your nickname?\")\n    if(name in username):\n        print(\"Hello \" + name + \"! Thank you for logging in!\")\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 16, "user_id": 11189035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f299c7f14ce4280b409f7108e76569a?s=128&d=identicon&r=PG&f=1", "display_name": "purity ", "link": "https://stackoverflow.com/users/11189035/purity"}, "edited": false, "score": 0, "creation_date": 1552510626, "post_id": 55151030, "comment_id": 97042464, "body": "if you want the code to keep asking you to input a username regardless of the  printed statement just remove the two breaks ."}], "tags": [], "owner": {"reputation": 16, "user_id": 11189035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f299c7f14ce4280b409f7108e76569a?s=128&d=identicon&r=PG&f=1", "display_name": "purity ", "link": "https://stackoverflow.com/users/11189035/purity"}, "is_accepted": true, "score": 0, "last_activity_date": 1552510400, "creation_date": 1552510400, "answer_id": 55151030, "question_id": 55150250, "link": "https://stackoverflow.com/questions/55150250/how-to-loop-back-to-the-beginning-of-the-code-on-python-3-7/55151030#55151030", "title": "How to loop back to the beginning of the code on Python 3.7", "body": "<pre><code>username = ['admin','bill','Kevin','mike','nick']\nwhile True :\n\n    name =input(\"Please enter a username: \")\n    if name=='admin' :\n        print(\"Hello \"+ name + \" ,would you like to see a status report?\")\n        break\n    elif name in username :\n        print(\"Hello \" + name.title() + \" thank you for logging in!\")\n        break\n    else:\n        print(\"Who are you \" + name.title() + \" ? \")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 37, "user_id": 2375180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29e22568d03887865c2888379d5eb775?s=128&d=identicon&r=PG", "display_name": "user2375180", "link": "https://stackoverflow.com/users/2375180/user2375180"}, "is_accepted": false, "score": 0, "last_activity_date": 1552519916, "last_edit_date": 1552519916, "creation_date": 1552515413, "answer_id": 55151987, "question_id": 55150250, "link": "https://stackoverflow.com/questions/55150250/how-to-loop-back-to-the-beginning-of-the-code-on-python-3-7/55151987#55151987", "title": "How to loop back to the beginning of the code on Python 3.7", "body": "<p>I think you might be looking something like this:</p>\n\n<pre><code>username = ['admin','bill','Kevin','mike','nick']\nwhile True:\n    while True :\n    name = input(\"Please enter a username: \")\n    if name=='admin' :\n        print(\"Hello \"+ name + \" ,would you like to see a status report?\")\n        answer = input()\n        if answer == 'yes':\n            print('report')\n        break;\n\n    if name in username :\n        print(\"Hello \" + name.title() + \" thank you for logging in!\")\n        break;\n    else:\n        print(\"Who are you \" + name.title() + \" ? \")\n        break;\n</code></pre>\n\n<p>Use a while True loop inside another so whenever the second loop breaks,  will loop back to the first one.</p>\n\n<p>Hope this help.</p>\n"}], "owner": {"reputation": 5, "user_id": 11199398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0062ae215841d4566e15dc32e43526ee?s=128&d=identicon&r=PG&f=1", "display_name": "BillyBonky", "link": "https://stackoverflow.com/users/11199398/billybonky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 55151030, "answer_count": 3, "score": -3, "last_activity_date": 1552519916, "creation_date": 1552507031, "last_edit_date": 1552507491, "question_id": 55150250, "link": "https://stackoverflow.com/questions/55150250/how-to-loop-back-to-the-beginning-of-the-code-on-python-3-7", "title": "How to loop back to the beginning of the code on Python 3.7", "body": "<p>After I type 5 usernames, it stops itself. How can I prevent that.</p>\n\n<pre><code>username = ['admin','bill','kevin','mike','nick']\n\nfor user in username:\n name = input(\"Please enter a username: \")\n if name == 'admin':\n    print(\"Hello \"+ name.title() + \" ,would you like to see a status report?\")\n else:\n  if name in username:\n   print(\"Hello \" + name.title() + \" thank you for logging in!\")\n  else:\n      if name not in username:\n          print(\"Who are you \" + name.title() + \" ? \")\n</code></pre>\n"}, {"tags": ["python", "django", "django-rest-framework", "django-filter"], "answers": [{"tags": [], "owner": {"reputation": 4192, "user_id": 197681, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UP9gT.jpg?s=128&g=1", "display_name": "wmorrell", "link": "https://stackoverflow.com/users/197681/wmorrell"}, "is_accepted": false, "score": 0, "last_activity_date": 1552508152, "creation_date": 1552508152, "answer_id": 55150511, "question_id": 55150233, "link": "https://stackoverflow.com/questions/55150233/django-filters-empty-string-query-param-cause-validation-error/55150511#55150511", "title": "Django-Filters Empty String Query Param Cause Validation Error", "body": "<p>Why not set the default to an empty string, and use that as your guard value instead of <code>None</code>?</p>\n\n<pre><code>status = self.request.query_params.get(\"status\", \"\")\nsuccess = self.request.query_params.get(\"success\", \"\")\n# ...\nif status:\n    queryset = queryset.filter(status=status)\nif success:\n    queryset = queryset.filter(success=success)\n# ...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4530, "user_id": 1701240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525a094ce482e8b404cc199764c8816c?s=128&d=identicon&r=PG", "display_name": "Endre Both", "link": "https://stackoverflow.com/users/1701240/endre-both"}, "is_accepted": true, "score": 1, "last_activity_date": 1552508162, "creation_date": 1552508162, "answer_id": 55150513, "question_id": 55150233, "link": "https://stackoverflow.com/questions/55150233/django-filters-empty-string-query-param-cause-validation-error/55150513#55150513", "title": "Django-Filters Empty String Query Param Cause Validation Error", "body": "<p>If you use <code>if status:</code> instead of <code>if status is not None:</code>, both empty strings and <code>None</code> give <code>False</code>. This is dangerous with ints as <code>0</code> would return false, but that's not an issue here as all parameters are strings.</p>\n\n<p>You can also define <code>''</code> as the default, and then check for non-zero-length strings:</p>\n\n<pre><code>status = self.request.query_params.get('status', '')\n# ...\nif len(status):\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 33, "user_id": 4128036, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-kNDGUKys3PQ/AAAAAAAAAAI/AAAAAAAALz8/gA9cBiKk6JA/photo.jpg?sz=128", "display_name": "Sculley", "link": "https://stackoverflow.com/users/4128036/sculley"}, "is_accepted": false, "score": 0, "last_activity_date": 1552518492, "creation_date": 1552518492, "answer_id": 55152497, "question_id": 55150233, "link": "https://stackoverflow.com/questions/55150233/django-filters-empty-string-query-param-cause-validation-error/55152497#55152497", "title": "Django-Filters Empty String Query Param Cause Validation Error", "body": "<p>Thank you for your answers, I think they are valid approaches but they both are doing manual checks. I was looking for a built in way to convert the JSON native types that come in with the query_params to Python native types (false to False, null to None, etc). Hoping to avoid manually checking and converting each query_param.</p>\n\n<p>It actually blows my mind if such a thing isn't available in the Django Rest Framework. So I created a helper function that can do a simple one level deep conversion from query_params to Python dict. I hope this helps someone else, or if anyone knows of a similar convenience function in DRF, I'd appreciate it. Or if someone could tell me why this is a bad approach, I'd appreciate that too!</p>\n\n<pre><code>def query_params_parser(self, fields_list):\n\n        json_values_dict = {}\n\n        for field in fields_list:\n            value = '\"' + self.request.query_params.get(field) + '\"' if not self.query_params.get(field, '') == '' else 'null'\n            json_values_dict['\"' + field + '\"'] = value\n\n        json_string = '{'\n\n        for idx, (key, value) in enumerate(json_values_dict.items()):\n            json_string += f'{key}: {value}'\n\n            if idx &lt; len(json_values_dict) - 1:\n                json_string += ','\n\n        json_string += '}'\n\n        final_dict = json.loads(json_string)\n\n        return final_dict\n\n\ndef get_queryset(self):\n        \"\"\"\n        This view should return a list of all the purchases\n        for the currently authenticated user.\n        \"\"\"\n        queryset = Job.objects.all()\n\n        # parse json query_params\n        # query_params, list of fields\n        # returns dict\n\n        params_dict = self.query_params_parser(['status',\n                                                'success',\n                                                'worker_id',\n                                                'owner',\n                                                'job_type'])\n\n        status = params_dict['status']\n        success = params_dict['success']\n        worker_id = params_dict['worker_id']\n        owner = params_dict['owner']\n        job_type = params_dict['job_type']\n\n        if status is not None:\n            queryset = queryset.filter(status=status)\n        if success is not None:\n            queryset = queryset.filter(success=success)\n        if worker_id is not None:\n            queryset = queryset.filter(worker_id=worker_id)\n        if owner is not None:\n            queryset = queryset.filter(owner=owner)\n        if job_type is not None:\n            queryset = queryset.filter(job_type=job_type)\n\n        return queryset\n</code></pre>\n\n<p>The above function works under limited testing, so it probably has a lot of bugs.</p>\n"}], "owner": {"reputation": 33, "user_id": 4128036, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-kNDGUKys3PQ/AAAAAAAAAAI/AAAAAAAALz8/gA9cBiKk6JA/photo.jpg?sz=128", "display_name": "Sculley", "link": "https://stackoverflow.com/users/4128036/sculley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1875, "favorite_count": 2, "accepted_answer_id": 55150513, "answer_count": 3, "score": 2, "last_activity_date": 1552518492, "creation_date": 1552506970, "question_id": 55150233, "link": "https://stackoverflow.com/questions/55150233/django-filters-empty-string-query-param-cause-validation-error", "title": "Django-Filters Empty String Query Param Cause Validation Error", "body": "<p>When using django-filters with django rest framework, the default query filtering form will add all query params for all fields, and the empty fields end up as empty strings passed to the backend. Empty strings are not None, so the <code>status = self.request.query_params.get('status', None)</code> will still add the empty string to the variable, and this will make its way to the queryset.filter function. This is very bad when the field being filtered is not a string. </p>\n\n<p>So my question is am I doing something wrong? Is there a way to check for empty string params? I'm not sure if I'm even doing filtering right (I'm probably filtering twice for no reason, but I wanted django-filters in there because of the built in integration with django-rest-frameworks browseable API.</p>\n\n<p>My workaround is the ternary operator checking for the empty string after the call to <code>query_params.get</code></p>\n\n<p>Below is my view code for the API:</p>\n\n<pre><code>class JobList(generics.ListCreateAPIView):\n    serializer_class = JobCreateSerializer\n    permission_classes = (permissions.IsAuthenticatedOrReadOnly,)\n\n    filter_backends = (filters.OrderingFilter, DjangoFilterBackend)\n    filterset_fields = ('status', 'success', 'worker_id', 'owner', 'job_type')\n    ordering_fields = ('priority', 'submitted', 'assigned', 'completed')\n\n    def perform_create(self, serializer):\n        serializer.save(owner=self.request.user)\n\n    def get(self, request, format=None):\n        # IMPORTANT: use self.get_queryset() any place you want filtering to be enabled\n        # for built in filtering or ordering you must call self.filter_queryset\n        jobs = self.filter_queryset(self.get_queryset())\n        serializer = JobSerializer(jobs, context={'request': request}, many=True)\n\n        return Response(serializer.data)\n\n    def get_queryset(self):\n        \"\"\"\n        This view should return a list of all the purchases\n        for the currently authenticated user.\n        \"\"\"\n        queryset = Job.objects.all()\n\n        status = self.request.query_params.get('status', None)\n        status = status if not status == '' else None\n        success = self.request.query_params.get('success', None)\n        success = success if not success == '' else None\n        worker_id = self.request.query_params.get('worker_id', None)\n        worker_id = worker_id if not worker_id == '' else None\n        owner_id = self.request.query_params.get('owner', None)\n        owner_id = owner_id if not owner_id == '' else None\n        job_type = self.request.query_params.get('job_type', None)\n        job_type = job_type if not job_type == '' else None\n\n        if status is not None:\n            queryset = queryset.filter(status=status)\n        if success is not None:\n            queryset = queryset.filter(success=success)\n        if worker_id is not None:\n            queryset = queryset.filter(worker_id=worker_id)\n        if owner_id is not None:\n            queryset = queryset.filter(owner=owner_id)\n        if job_type is not None:\n            queryset = queryset.filter(job_type=job_type)\n\n        return queryset\n</code></pre>\n"}]