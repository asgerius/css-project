[{"tags": ["python", "django", "seaborn"], "answers": [{"tags": [], "owner": {"reputation": 673, "user_id": 8089660, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QkMJn.jpg?s=128&g=1", "display_name": "shimo", "link": "https://stackoverflow.com/users/8089660/shimo"}, "is_accepted": true, "score": 0, "last_activity_date": 1577843615, "creation_date": 1577843615, "answer_id": 59549548, "question_id": 59549191, "link": "https://stackoverflow.com/questions/59549191/django-save-axessubplot-via-seaborn-to-django-models-imagefield/59549548#59549548", "title": "Django - save AxesSubplot via seaborn to django models.ImageField", "body": "<p>It seems you're defining <code>figure</code> as empty bytesIO and put that in <code>image_file = ImageFile(...)</code>, so image_file returns None. Besides, <code>new.get_figure().savefig(...)</code> save png file separately.</p>\n\n<p>To save \"new\" heapmap object as django model.</p>\n\n<ol>\n<li><p><code>new.get_figure().savefig</code> save file as you like. </p></li>\n<li><p>Using that file path in <code>models.ImageField</code>, then a file will be uploaded to django.</p></li>\n</ol>\n\n<p>Ps: you need () as get_figure(), I think.</p>\n"}], "owner": {"reputation": 13, "user_id": 11721555, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-9QVg3Sw04Vk/AAAAAAAAAAI/AAAAAAAAAHc/YDQxBTiIgFw/photo.jpg?sz=128", "display_name": "Ava Lord", "link": "https://stackoverflow.com/users/11721555/ava-lord"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 417, "favorite_count": 0, "accepted_answer_id": 59549548, "answer_count": 1, "score": 0, "last_activity_date": 1577846260, "creation_date": 1577836268, "last_edit_date": 1577846260, "question_id": 59549191, "link": "https://stackoverflow.com/questions/59549191/django-save-axessubplot-via-seaborn-to-django-models-imagefield", "title": "Django - save AxesSubplot via seaborn to django models.ImageField", "body": "<p>I'm trying to save graph from seaborn module as <em>ImageField</em> to django model.</p>\n\n<p><strong>models.py</strong></p>\n\n<pre><code>class HeatmapFiles(models.Model):\n    username = models.ForeignKey(\n        'CustomUser',\n        verbose_name='Username',\n        on_delete=models.CASCADE,\n        blank=False\n    )\n    heatmap = models.ImageField(\n        verbose_name='Heatmap',\n        blank=False\n    )\n</code></pre>\n\n<p>I've tried to save via <em>ImageFile</em>:</p>\n\n<p><strong>example_file.py</strong></p>\n\n<pre><code>import io\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nfrom django.core.files.images import ImageFile\n\nsns.set()\nflights_long = sns.load_dataset(\"flights\")\nflights = flights_long.pivot(\"month\", \"year\", \"passengers\")\nf, ax = plt.subplots(figsize=(9, 6))\nnew = sns.heatmap(flights, annot=True, fmt=\"d\", linewidths=.5, ax=ax)\n\nfigure = io.BytesIO()\nnew.get_figure().savefig(figure, format='png')\nimage_file = ImageFile(figure.getvalue())\n</code></pre>\n\n<p>and <strong>image_file</strong> objects returns <strong>None</strong> here:</p>\n\n<pre><code>&lt;ImageFile: None&gt;\n</code></pre>\n\n<p>I can save it, but that doesn't make sense.\nHow to save <em>\"new\"</em> heatmap object as django model?</p>\n\n<p>UPD: \nafter <code>new.get_figure().savefig(figure, format='png')</code> <strong>figure.getvalue()</strong> actually <strong>HAS</strong> data <strong>\"b'\\x89PNG\\r\\n\\x1a\\n\\x00\\x00....\"</strong> inside.</p>\n"}, {"tags": ["python", "scikit-learn"], "answers": [{"tags": [], "owner": {"reputation": 7725, "user_id": 4889267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b86b65464f4070d38bbf2abdbd4f1610?s=128&d=identicon&r=PG&f=1", "display_name": "AK47", "link": "https://stackoverflow.com/users/4889267/ak47"}, "is_accepted": true, "score": 2, "last_activity_date": 1577836548, "creation_date": 1577836548, "answer_id": 59549206, "question_id": 59549177, "link": "https://stackoverflow.com/questions/59549177/difference-between-sklearn-preprocessing-quantile-transform-and-sklearn-preproce/59549206#59549206", "title": "difference between sklearn.preprocessing.quantile_transform and sklearn.preprocessing.QuantileTransformer?", "body": "<p>One of them is a function (<code>quantile_transform</code>):</p>\n\n<p><a href=\"https://github.com/scikit-learn/scikit-learn/blob/7e85a6d1f/sklearn/preprocessing/_data.py#L2541\" rel=\"nofollow noreferrer\">https://github.com/scikit-learn/scikit-learn/blob/7e85a6d1f/sklearn/preprocessing/_data.py#L2541</a></p>\n\n<p>and the other is a class (<code>QuantileTransformer</code>):</p>\n\n<p><a href=\"https://github.com/scikit-learn/scikit-learn/blob/7e85a6d1f/sklearn/preprocessing/_data.py#L2132\" rel=\"nofollow noreferrer\">https://github.com/scikit-learn/scikit-learn/blob/7e85a6d1f/sklearn/preprocessing/_data.py#L2132</a></p>\n"}], "owner": {"reputation": 313, "user_id": 3100723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eab0596ebcf557da66285cd848e6f4b0?s=128&d=identicon&r=PG", "display_name": "drg", "link": "https://stackoverflow.com/users/3100723/drg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 0, "accepted_answer_id": 59549206, "answer_count": 1, "score": 0, "last_activity_date": 1577836548, "creation_date": 1577836058, "question_id": 59549177, "link": "https://stackoverflow.com/questions/59549177/difference-between-sklearn-preprocessing-quantile-transform-and-sklearn-preproce", "title": "difference between sklearn.preprocessing.quantile_transform and sklearn.preprocessing.QuantileTransformer?", "body": "<p>I understand that the difference between these two preprocessing functionalities in sklearn is that the former doesn't have the estimator API, but what is the use case for one versus the other? I guess what I'm really asking is when do you need the API estimator capability? </p>\n"}, {"tags": ["python", "django", "http", "django-rest-framework", "postman"], "comments": [{"owner": {"reputation": 8696, "user_id": 10746224, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/znUL5.jpg?s=128&g=1", "display_name": "Lord Elrond", "link": "https://stackoverflow.com/users/10746224/lord-elrond"}, "edited": false, "score": 0, "creation_date": 1577836827, "post_id": 59549172, "comment_id": 105267532, "body": "Please show the full traceback, and the line that the error is thrown."}, {"owner": {"reputation": 45, "user_id": 8774510, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba9296aa1cf68b9a98be1052b2347d6c?s=128&d=identicon&r=PG&f=1", "display_name": "awild", "link": "https://stackoverflow.com/users/8774510/awild"}, "reply_to_user": {"reputation": 8696, "user_id": 10746224, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/znUL5.jpg?s=128&g=1", "display_name": "Lord Elrond", "link": "https://stackoverflow.com/users/10746224/lord-elrond"}, "edited": false, "score": 0, "creation_date": 1577837552, "post_id": 59549172, "comment_id": 105267598, "body": "@ReinstateMonica Done."}, {"owner": {"reputation": 27093, "user_id": 5189811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FzPWr.png?s=128&g=1", "display_name": "Oluwafemi Sule", "link": "https://stackoverflow.com/users/5189811/oluwafemi-sule"}, "edited": false, "score": 0, "creation_date": 1577837941, "post_id": 59549172, "comment_id": 105267642, "body": "Is the <code>POST</code> request made with Angular performed with the <code>Content-Type</code> header &quot;multipart/form-data&quot;?"}, {"owner": {"reputation": 45, "user_id": 8774510, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba9296aa1cf68b9a98be1052b2347d6c?s=128&d=identicon&r=PG&f=1", "display_name": "awild", "link": "https://stackoverflow.com/users/8774510/awild"}, "reply_to_user": {"reputation": 27093, "user_id": 5189811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FzPWr.png?s=128&g=1", "display_name": "Oluwafemi Sule", "link": "https://stackoverflow.com/users/5189811/oluwafemi-sule"}, "edited": false, "score": 0, "creation_date": 1577838977, "post_id": 59549172, "comment_id": 105267743, "body": "@OluwafemiSule yes it is.  <code>addProduct(status: number, item_type: number, name: string, description: string, price: number, stock: number, tags: string, categories: string, images: any) {     return this.http.post&lt;any&gt;(PRODUCTS_API_URL + &#39;&#47;add&#47;&#39;, {&#39;name&#39;: name, &#39;item_type&#39;: item_type, &#39;status&#39;: status, &#39;description&#39;: description, &#39;price&#39;: price, &#39;stock&#39;: stock, &#39;tags[eeeeee]&#39;: tags, &#39;categories[dasdsa]&#39;: categories, &#39;images[]&#39;: images}, {       headers: {&#39;Authorization&#39;: &#39;Bearer &#39; + localStorage.getItem(&#39;jwt&#39;), &#39;Content-Type&#39;: &#39;multipart&#47;form-data&#39;}     });   }</code>"}], "answers": [{"tags": [], "owner": {"reputation": 61, "user_id": 11811787, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-IfrUpjpOJGI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcOq8XnR6W0aEK8l-kqC9zdeQfnSQ/photo.jpg?sz=128", "display_name": "Shavaiz Hussain", "link": "https://stackoverflow.com/users/11811787/shavaiz-hussain"}, "is_accepted": false, "score": 0, "last_activity_date": 1578472324, "creation_date": 1578472324, "answer_id": 59642059, "question_id": 59549172, "link": "https://stackoverflow.com/questions/59549172/sending-post-request-through-postman-works-but-not-when-using-http/59642059#59642059", "title": "Sending post request through Postman works but not when using http", "body": "<p><strong>You should add enctype into your header instead of Content-Type. this is working for me.</strong></p>\n\n<pre><code> headers: new HttpHeaders({\n        'enctype': 'multipart/form-data',\n        'Authorization': 'Token ' + user.token\n      })\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 8774510, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba9296aa1cf68b9a98be1052b2347d6c?s=128&d=identicon&r=PG&f=1", "display_name": "awild", "link": "https://stackoverflow.com/users/8774510/awild"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1578472324, "creation_date": 1577835963, "last_edit_date": 1577837405, "question_id": 59549172, "link": "https://stackoverflow.com/questions/59549172/sending-post-request-through-postman-works-but-not-when-using-http", "title": "Sending post request through Postman works but not when using http", "body": "<p>I am working on uploading an image to my server (right now it is just localhost). Below is the part of the code in my <code>views.py</code> that is causing the problem.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>valid_extensions = ['jpg', 'jpeg', 'png', 'gif']\nimages = request.data.getlist('images[]') #Error here I believe\ndirectory = os.path.join(os.getcwd(), 'static', 'images', 'products')\n\nfor image in images:\n    extension = os.path.splitext(image.name)[1][1:].lower()\n    file_name = \"\".join(choice(ascii_lowercase) for i in range(16)) + \".\" + extension\n\n    if extension in valid_extensions:\n        file_path = os.path.join(directory, file_name)\n        with open(file_path, 'wb+') as destination:\n            for chunk in image.chunks():\n                destination.write(chunk)\n                ProductImage.objects.create(file_name=file_name, original_name=image.name, file_length=image.size, product=product, file_path=file_path.replace(os.getcwd(), '').replace('\\\\', '/'))\n    else:\n        data = {'full_messages': ['Image file type is not supported.']}\n        return Response(data, status=status.HTTP_422_UNPROCESSABLE_ENTITY)\n\ndata = {'full_messages': ['Product created successfully.']}\nreturn Response(data, status=status.HTTP_201_CREATED)\n</code></pre>\n\n<p>For some reason when I send my post request through Postman it successfully uploads the file, but when I send the same request through HTTP (Angular 8) I get errors in the console.</p>\n\n<p>It says <code>AttributeError: 'NoneType' object has no attribute 'decode'</code> and if I change the </p>\n\n<p>Below is the request when sending from http\n<a href=\"https://i.stack.imgur.com/BzcMN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BzcMN.png\" alt=\"the request when sending from http\"></a></p>\n\n<p>Below is the Postman request\n<a href=\"https://i.stack.imgur.com/Ijuwm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Ijuwm.png\" alt=\"the Postman request\"></a></p>\n\n<p>Edit (including traceback)</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"/usr/local/Cellar/python/3.7.4_1/Frameworks/Python.framework/Versions/3.7/lib/python3.7/wsgiref/handlers.py\", line 137, in run\n    self.result = application(self.environ, self.start_response)\n  File \"/Users/akwild/Desktop/project1/backend/env/lib/python3.7/site-packages/django/contrib/staticfiles/handlers.py\", line 65, in __call__\n    return self.application(environ, start_response)\n  File \"/Users/akwild/Desktop/project1/backend/env/lib/python3.7/site-packages/django/core/handlers/wsgi.py\", line 141, in __call__\n    response = self.get_response(request)\n  File \"/Users/akwild/Desktop/project1/backend/env/lib/python3.7/site-packages/django/core/handlers/base.py\", line 75, in get_response\n    response = self._middleware_chain(request)\n  File \"/Users/akwild/Desktop/project1/backend/env/lib/python3.7/site-packages/django/core/handlers/exception.py\", line 36, in inner\n    response = response_for_exception(request, exc)\n  File \"/Users/akwild/Desktop/project1/backend/env/lib/python3.7/site-packages/django/core/handlers/exception.py\", line 90, in response_for_exception\n    response = handle_uncaught_exception(request, get_resolver(get_urlconf()), sys.exc_info())\n  File \"/Users/akwild/Desktop/project1/backend/env/lib/python3.7/site-packages/django/core/handlers/exception.py\", line 125, in handle_uncaught_exception\n    return debug.technical_500_response(request, *exc_info)\n  File \"/Users/akwild/Desktop/project1/backend/env/lib/python3.7/site-packages/django/views/debug.py\", line 91, in technical_500_response\n    text = reporter.get_traceback_text()\n  File \"/Users/akwild/Desktop/project1/backend/env/lib/python3.7/site-packages/django/views/debug.py\", line 340, in get_traceback_text\n    c = Context(self.get_traceback_data(), autoescape=False, use_l10n=False)\n  File \"/Users/akwild/Desktop/project1/backend/env/lib/python3.7/site-packages/django/views/debug.py\", line 305, in get_traceback_data\n    'filtered_POST_items': list(self.filter.get_post_parameters(self.request).items()),\n  File \"/Users/akwild/Desktop/project1/backend/env/lib/python3.7/site-packages/django/views/debug.py\", line 177, in get_post_parameters\n    return request.POST\n  File \"/Users/akwild/Desktop/project1/backend/env/lib/python3.7/site-packages/django/core/handlers/wsgi.py\", line 110, in _get_post\n    self._load_post_and_files()\n  File \"/Users/akwild/Desktop/project1/backend/env/lib/python3.7/site-packages/django/http/request.py\", line 315, in _load_post_and_files\n    self._post, self._files = self.parse_file_upload(self.META, data)\n  File \"/Users/akwild/Desktop/project1/backend/env/lib/python3.7/site-packages/django/http/request.py\", line 274, in parse_file_upload\n    parser = MultiPartParser(META, post_data, self.upload_handlers, self.encoding)\n  File \"/Users/akwild/Desktop/project1/backend/env/lib/python3.7/site-packages/django/http/multipartparser.py\", line 72, in __init__\n    raise MultiPartParserError('Invalid boundary in multipart: %s' % boundary.decode())\nAttributeError: 'NoneType' object has no attribute 'decode'\n</code></pre>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 6295, "user_id": 11938023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cca4cf2bdd1880354bec8cbcd73f8189?s=128&d=identicon&r=PG&f=1", "display_name": "oppressionslayer", "link": "https://stackoverflow.com/users/11938023/oppressionslayer"}, "edited": false, "score": 0, "creation_date": 1577836438, "post_id": 59549155, "comment_id": 105267493, "body": "Actually i&#39;m updating it, it&#39;s a quick update. my question to update it a bit more, thanks for those who answered, a better/clearer version will be online soon"}, {"owner": {"reputation": 17765, "user_id": 9375102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8yBw3.jpg?s=128&g=1", "display_name": "Umar.H", "link": "https://stackoverflow.com/users/9375102/umar-h"}, "edited": false, "score": 0, "creation_date": 1577836469, "post_id": 59549155, "comment_id": 105267498, "body": "just edit this one it&#39;s fine"}, {"owner": {"reputation": 6295, "user_id": 11938023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cca4cf2bdd1880354bec8cbcd73f8189?s=128&d=identicon&r=PG&f=1", "display_name": "oppressionslayer", "link": "https://stackoverflow.com/users/11938023/oppressionslayer"}, "reply_to_user": {"reputation": 17765, "user_id": 9375102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8yBw3.jpg?s=128&g=1", "display_name": "Umar.H", "link": "https://stackoverflow.com/users/9375102/umar-h"}, "edited": false, "score": 0, "creation_date": 1577837199, "post_id": 59549155, "comment_id": 105267566, "body": "My apologies, i wanted to make the question more clear. I hope that when you groupby like this and modify the values it is retained in the rolling group. Any best practices for how to do this will be greatly appreciated.  I am using group one to update group 2. Then with group 2&#39;s new values, i&#39;m updating group 3&#39;s values. Then with group 3&#39;s new values, i&#39;m updating group 4&#39;s new values. I&#39;m hoping there is a way to groupby and transform so i can avoid for loops or splitting this without too much code"}, {"owner": {"reputation": 17765, "user_id": 9375102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8yBw3.jpg?s=128&g=1", "display_name": "Umar.H", "link": "https://stackoverflow.com/users/9375102/umar-h"}, "edited": false, "score": 0, "creation_date": 1577837775, "post_id": 59549155, "comment_id": 105267625, "body": "Like a rolling cumulative sum that only changes every four indices?"}, {"owner": {"reputation": 6295, "user_id": 11938023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cca4cf2bdd1880354bec8cbcd73f8189?s=128&d=identicon&r=PG&f=1", "display_name": "oppressionslayer", "link": "https://stackoverflow.com/users/11938023/oppressionslayer"}, "reply_to_user": {"reputation": 17765, "user_id": 9375102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8yBw3.jpg?s=128&g=1", "display_name": "Umar.H", "link": "https://stackoverflow.com/users/9375102/umar-h"}, "edited": false, "score": 0, "creation_date": 1577837975, "post_id": 59549155, "comment_id": 105267647, "body": "Like i use group 1 to make group 2&#39;s values. I solve in group 1 with a formula, and those answers go to group 2.  So then i need to take those new answers in group 2, apply the same formula and place the answers in group 3. Then i take my new group 3, apply a formula, and place those answers in group 4. That&#39;s the most important part to me then getting the answer right. I want to do something like df.groupby((1,2), (2,3), (3,4).transform( lambda x: take group 1 and do something and put them in group2. Then take those new group 2 answers do the same thing, and place them in group3, etc)"}], "answers": [{"comments": [{"owner": {"reputation": 17765, "user_id": 9375102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8yBw3.jpg?s=128&g=1", "display_name": "Umar.H", "link": "https://stackoverflow.com/users/9375102/umar-h"}, "edited": false, "score": 0, "creation_date": 1577836453, "post_id": 59549167, "comment_id": 105267494, "body": "happy new year mate =)"}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "reply_to_user": {"reputation": 17765, "user_id": 9375102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8yBw3.jpg?s=128&g=1", "display_name": "Umar.H", "link": "https://stackoverflow.com/users/9375102/umar-h"}, "edited": false, "score": 1, "creation_date": 1577837419, "post_id": 59549167, "comment_id": 105267589, "body": "@Datanovice happy new year :-)"}, {"owner": {"reputation": 6295, "user_id": 11938023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cca4cf2bdd1880354bec8cbcd73f8189?s=128&d=identicon&r=PG&f=1", "display_name": "oppressionslayer", "link": "https://stackoverflow.com/users/11938023/oppressionslayer"}, "edited": false, "score": 0, "creation_date": 1577837664, "post_id": 59549167, "comment_id": 105267611, "body": "I updated my answer a bit on what i&#39;m really trying to accomplish, can you take a look again, i appreciate your current answer"}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "reply_to_user": {"reputation": 6295, "user_id": 11938023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cca4cf2bdd1880354bec8cbcd73f8189?s=128&d=identicon&r=PG&f=1", "display_name": "oppressionslayer", "link": "https://stackoverflow.com/users/11938023/oppressionslayer"}, "edited": false, "score": 0, "creation_date": 1577838063, "post_id": 59549167, "comment_id": 105267658, "body": "@oppressionslayer check the update mate :-) and happy new year"}], "tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": false, "score": 3, "last_activity_date": 1577838045, "last_edit_date": 1577838045, "creation_date": 1577835873, "answer_id": 59549167, "question_id": 59549155, "link": "https://stackoverflow.com/questions/59549155/how-do-you-make-combined-rolling-groups-in-pandas/59549167#59549167", "title": "How do you make combined rolling groups in Pandas", "body": "<p>I will do </p>\n\n<pre><code>s=df.group.drop_duplicates()\nl=[df.loc[df.group.isin([x,y])]for x , y in zip(s.iloc[1:],s.shift().iloc[1:])]\n</code></pre>\n\n<p>Update </p>\n\n<pre><code>df['num']=df['num'].groupby(df.groupby('group').cumcount()).cumsum()\ns=df.group.drop_duplicates()\nl=[df.loc[df.group.isin([x,y])]for x , y in zip(s.iloc[1:],s.shift().iloc[1:])]\nl[0]\n   num  group\n0    1      1\n1    2      1\n2    2      1\n3    4      1\n4    6      2\n5    8      2\n6    9      2\n7   12      2\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6295, "user_id": 11938023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cca4cf2bdd1880354bec8cbcd73f8189?s=128&d=identicon&r=PG&f=1", "display_name": "oppressionslayer", "link": "https://stackoverflow.com/users/11938023/oppressionslayer"}, "edited": false, "score": 0, "creation_date": 1577837658, "post_id": 59549189, "comment_id": 105267608, "body": "I updated my answer a bit on what i&#39;m really trying to accomplish, can you take a look again, i appreciate your current answer"}], "tags": [], "owner": {"reputation": 17765, "user_id": 9375102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8yBw3.jpg?s=128&g=1", "display_name": "Umar.H", "link": "https://stackoverflow.com/users/9375102/umar-h"}, "is_accepted": false, "score": 2, "last_activity_date": 1577836233, "creation_date": 1577836233, "answer_id": 59549189, "question_id": 59549155, "link": "https://stackoverflow.com/questions/59549155/how-do-you-make-combined-rolling-groups-in-pandas/59549189#59549189", "title": "How do you make combined rolling groups in Pandas", "body": "<pre><code>df['grp'] = df.apply(lambda x : x.iloc[::4]).groupby('num').cumsum()\ndf['grp'] = df['grp'].ffill()\nprint(df)\n    num  group  grp\n0     1      1  1.0\n1     2      1  1.0\n2     3      1  1.0\n3     4      1  1.0\n4     5      2  2.0\n5     6      2  2.0\n6     7      2  2.0\n7     8      2  2.0\n8     9      3  3.0\n9    10      3  3.0\n10   11      3  3.0\n11   12      3  3.0\n12   13      4  4.0\n13   14      4  4.0\n14   15      4  4.0\n15   16      4  4.0\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6295, "user_id": 11938023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cca4cf2bdd1880354bec8cbcd73f8189?s=128&d=identicon&r=PG&f=1", "display_name": "oppressionslayer", "link": "https://stackoverflow.com/users/11938023/oppressionslayer"}, "edited": false, "score": 1, "creation_date": 1577837653, "post_id": 59549200, "comment_id": 105267607, "body": "I updated my answer a bit on what i&#39;m really trying to accomplish, can you take a look again, i appreciate your current answer"}, {"owner": {"reputation": 11442, "user_id": 11610186, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HKHsybo6y0o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdY2OjHwdlmaUkMBZsmKiCkkybzQw/mo/photo.jpg?sz=128", "display_name": "Grzegorz Skibinski", "link": "https://stackoverflow.com/users/11610186/grzegorz-skibinski"}, "reply_to_user": {"reputation": 6295, "user_id": 11938023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cca4cf2bdd1880354bec8cbcd73f8189?s=128&d=identicon&r=PG&f=1", "display_name": "oppressionslayer", "link": "https://stackoverflow.com/users/11938023/oppressionslayer"}, "edited": false, "score": 0, "creation_date": 1577840340, "post_id": 59549200, "comment_id": 105267900, "body": "I added prerequisites - let me know, if that&#39;s right direction. Will explore some more in the morning, happy new year ;)"}], "tags": [], "owner": {"reputation": 11442, "user_id": 11610186, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HKHsybo6y0o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdY2OjHwdlmaUkMBZsmKiCkkybzQw/mo/photo.jpg?sz=128", "display_name": "Grzegorz Skibinski", "link": "https://stackoverflow.com/users/11610186/grzegorz-skibinski"}, "is_accepted": false, "score": 2, "last_activity_date": 1577839997, "last_edit_date": 1577839997, "creation_date": 1577836390, "answer_id": 59549200, "question_id": 59549155, "link": "https://stackoverflow.com/questions/59549155/how-do-you-make-combined-rolling-groups-in-pandas/59549200#59549200", "title": "How do you make combined rolling groups in Pandas", "body": "<p>Prerequisites:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>df[\"group_sub\"]=df.groupby(\"group\").cumcount()\ndfprev=df[\"num\"]\nfor i in range(1, df.group.nunique()):\n    dfprev+=df[\"num\"].groupby(df[\"group_sub\"]).shift(i).fillna(0) \ndf.drop(\"group_sub\", axis=1, inplace=True)\n</code></pre>\n\n<p>You can do:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>df_series=[df.loc[df.group.isin(df.group.unique()[i:i+2])] for i in range(df.group.nunique()-1)]\n</code></pre>\n"}], "owner": {"reputation": 6295, "user_id": 11938023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cca4cf2bdd1880354bec8cbcd73f8189?s=128&d=identicon&r=PG&f=1", "display_name": "oppressionslayer", "link": "https://stackoverflow.com/users/11938023/oppressionslayer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 3, "answer_count": 3, "score": 2, "last_activity_date": 1577839997, "creation_date": 1577835647, "last_edit_date": 1577837780, "question_id": 59549155, "link": "https://stackoverflow.com/questions/59549155/how-do-you-make-combined-rolling-groups-in-pandas", "title": "How do you make combined rolling groups in Pandas", "body": "<p>How do you get rolling groups in Pandas I need the following group (1,2), then group (2,3), then group (3,4), etc. The best i can do is group (1,2), then group (3,4).  I take group 1, add the values to group 2. Then the next iteration is group (2,3). I take group 2's newly updated values, and add them to group 3's original values.  I then take those group 3 newly updated values, and add them to group 4's original values, so we get:</p>\n\n<p>The most important parts of this, don't get stuck on adding the values in the right order, really the most important thing is that i want to update a group, i want to update group 2, with group 1's values (my post is just an example) , then in the next transform, i want those new group values i updated in group2 to update the next group, which is 3. Then in the next transform or apply, I want those new group 3 values so i can update group4. I hope that makes sense</p>\n\n<pre><code>num group\n1       1\n2       1\n2       1\n4       1\n5       2\n6       2\n7       2\n8       2\n9       3\n10      3\n11      3\n12      3\n13      4\n14      4\n15      4\n16      4\n</code></pre>\n\n<pre><code>df=pd.read_clipboard()\n</code></pre>\n\n<p>I want my first group to be the following. group two has had it's values added by group 1:</p>\n\n<pre><code>1       1\n2       1\n3       1\n4       1\n6       2\n8       2\n10      2\n14      2\n</code></pre>\n\n<p>My second group will then hopefully be the new modified values due to adding group one to them. group 3 will have it's original values added by group 2's new values:</p>\n\n<pre><code>6       2\n8       2\n10      2\n14      2\n15      3\n18      3\n21      3\n26      3\n</code></pre>\n\n<p>My third group to be group 3's new values. and group four will be it's original values added by group 3 in order:</p>\n\n<pre><code>15      3\n18      3\n21      3\n26      3\n29      4\n33      4\n36      4\n42      4\n</code></pre>\n\n<p>I tried </p>\n\n<pre><code>df.groupby(np.arrange(len(df))//4))\n</code></pre>\n\n<p>, except it only splits it by groups (1,2) the then the next group is (3,4). I need (1,2), (2,3), (3,4). This is due to me processing group 1 to make group 2's values. I then use group 2 to create group 3's values. I then use group 3 to make group 4's values.  Any help on this would be appreciated. I made a simple example because I don't need help with what I'm doing with the groups, I just need to know how to group like that.</p>\n\n<p>Again, this is just an example, The most important parts of this, don't get stuck on adding the values in the right order, i'm not trying to test anyone.  really the most important thing is that i want to update a group, i want to update group 2, with group 1's values (my post is just an example) , then in the next transform, i want those new group values i updated in group2 to update the next group, which is 3. Then in the next transform or apply, I want those new group 3 values so i can update group4. I hope that makes sense</p>\n"}, {"tags": ["python", "dictionary", "jupyter-notebook", "line-plot"], "comments": [{"owner": {"reputation": 3662, "user_id": 10789207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b87a2607f665ca0317841884bf527ca?s=128&d=identicon&r=PG&f=1", "display_name": "AirSquid", "link": "https://stackoverflow.com/users/10789207/airsquid"}, "edited": false, "score": 1, "creation_date": 1577835997, "post_id": 59549154, "comment_id": 105267429, "body": "remember that a regular dictionary in python does NOT have any order to it, regardless of how you enter the data.  So when you are plotting points using <code>plt.plot()</code>, it is just going from (x, y) to next point in the order presented.  You want to make pairs of these key-values, probably by zipping them, and then sort them by the x coordinate.  You could probably pull the keys from the main dictionary and put them into labels for a legend pretty easily in your loop"}, {"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "reply_to_user": {"reputation": 3662, "user_id": 10789207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b87a2607f665ca0317841884bf527ca?s=128&d=identicon&r=PG&f=1", "display_name": "AirSquid", "link": "https://stackoverflow.com/users/10789207/airsquid"}, "edited": false, "score": 0, "creation_date": 1577836072, "post_id": 59549154, "comment_id": 105267436, "body": "@JeffH Alternatively sort <code>v.entries()</code> instead of zipping."}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 12098818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffcf52b62309344ed5c8d47760b76e66?s=128&d=identicon&r=PG&f=1", "display_name": "ting-c", "link": "https://stackoverflow.com/users/12098818/ting-c"}, "edited": false, "score": 0, "creation_date": 1577874433, "post_id": 59549174, "comment_id": 105272021, "body": "Thank you for your solution. I have received this error when I implemented your code.   TypeErrorTraceback (most recent call last) &lt;ipython-input-21-e10e7d10e316&gt; in &lt;module&gt;()       4 for k,v in k_rmse_values.items():       5     xs = list(v.keys()).sort() ----&gt; 6     ys = [v[x] for x in xs]       7        8     plt.plot(xs,ys)  TypeError: &#39;NoneType&#39; object is not iterable"}, {"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "reply_to_user": {"reputation": 19, "user_id": 12098818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffcf52b62309344ed5c8d47760b76e66?s=128&d=identicon&r=PG&f=1", "display_name": "ting-c", "link": "https://stackoverflow.com/users/12098818/ting-c"}, "edited": false, "score": 0, "creation_date": 1577983771, "post_id": 59549174, "comment_id": 105301848, "body": "@ting-c Please post a new question with a complete code example. This will allow you to format it correctly. Please be sure to include the error message as well."}], "tags": [], "owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "is_accepted": false, "score": 3, "last_activity_date": 1577835994, "creation_date": 1577835994, "answer_id": 59549174, "question_id": 59549154, "link": "https://stackoverflow.com/questions/59549154/python-how-can-i-plot-a-line-graph-properly-with-a-dictionary/59549174#59549174", "title": "Python - How can I plot a line graph properly with a dictionary?", "body": "<p>One solution is to sort the keys and get the matching values:</p>\n\n<pre><code>for k,v in k_rmse_values.items():\n  xs = list(v.keys()).sort()\n  ys = [v[x] for x in xs]\n\n# Note I renamed these arrays so following uses should be changed accordingly\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 12098818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffcf52b62309344ed5c8d47760b76e66?s=128&d=identicon&r=PG&f=1", "display_name": "ting-c", "link": "https://stackoverflow.com/users/12098818/ting-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 1, "answer_count": 1, "score": -2, "last_activity_date": 1577835994, "creation_date": 1577835645, "question_id": 59549154, "link": "https://stackoverflow.com/questions/59549154/python-how-can-i-plot-a-line-graph-properly-with-a-dictionary", "title": "Python - How can I plot a line graph properly with a dictionary?", "body": "<p>I am trying to plot a line graph to show the trends of each key of a dictionary in Jupyter Notebook with Python. This is what I have in the k_rmse_values variable as shown below:  </p>\n\n<blockquote>\n  <p>k_rmse_values = \n  {'bore': {1: 8423.759328233446,\n    3: 6501.928933614838,\n    5: 6807.187615513473,\n    7: 6900.29659028346,\n    9: 7134.8868708101645},\n   'city-mpg': {1: 4265.365592771621,\n    3: 3865.0178306330113,\n    5: 3720.409335758634,\n    7: 3819.183283405616,\n    9: 4219.677972675927},\n   'compression-rate': {1: 7016.906657495168,\n    3: 7319.354017489066,\n    5: 6301.624922763969,\n    7: 6133.006310754547,\n    9: 6417.253959732598},\n   'curb-weight': {1: 3950.9888180049306,\n    3: 4201.343428000144,\n    5: 4047.052502155118,\n    7: 3842.0974736649846,\n    9: 3943.9478256384205},\n   'engine-size': {1: 2853.7338453331627,\n    3: 2793.6254775629623,\n    5: 3123.320055069605,\n    7: 2941.73029681235,\n    9: 2931.996240628853},\n   'height': {1: 6330.178232877807,\n    3: 7049.500497198366,\n    5: 6869.570862695864,\n    7: 6738.641089739572,\n    9: 6344.062937760911},\n   'highway-mpg': {1: 4826.0580187146525,\n    3: 3510.253629329685,\n    5: 3379.2250123364083,\n    7: 4044.271135312068,\n    9: 4462.027046251678},\n   'horsepower': {1: 3623.6389886411143,\n    3: 4294.825669466819,\n    5: 4778.254807521257,\n    7: 4730.538701514935,\n    9: 4662.8601512508885},\n   'length': {1: 4952.798701744297,\n    3: 5403.624431188139,\n    5: 5500.731909846179,\n    7: 5103.4515274528885,\n    9: 4471.077661709427},\n   'normalized-losses': {1: 9604.929081466453,\n    3: 7494.820436511842,\n    5: 6391.912634697067,\n    7: 6699.853883298577,\n    9: 6861.6389834002875},\n   'peak-rpm': {1: 8041.2366213164005,\n    3: 7502.080095843049,\n    5: 6521.863037752326,\n    7: 6869.602542315512,\n    9: 6884.533017667794},\n   'stroke': {1: 10330.231237489314,\n    3: 8947.585146097614,\n    5: 6973.912792744113,\n    7: 7266.333478250421,\n    9: 7026.017456146411},\n   'wheel-base': {1: 2797.4144312203725,\n    3: 3392.8627620671928,\n    5: 4238.25624378706,\n    7: 4456.687059524217,\n    9: 4426.032222634904},\n   'width': {1: 2849.2691940215127,\n    3: 4076.59327053035,\n    5: 3979.9751617315405,\n    7: 3845.3326184519606,\n    9: 3687.926625900343}} </p>\n</blockquote>\n\n<p>When I used this code to plot </p>\n\n<pre><code>for k,v in k_rmse_values.items():\nx = list(v.keys())\ny = list(v.values())\n\nplt.plot(x,y)\nplt.xlabel('k value')\nplt.ylabel('RMSE')\n</code></pre>\n\n<p>and it doesn't plot from 1 to 9 in order; it gives this graph\n<a href=\"https://i.stack.imgur.com/oeVQ7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oeVQ7.png\" alt=\"enter image description here\"></a></p>\n\n<p>it plots in this k-value order 1, 3, 9 , 5, 7</p>\n\n<p>I have spent hours on this problem and still can't figure out a way to do it. Your help with this would be greatly appreciated.</p>\n"}, {"tags": ["python", "pygame"], "answers": [{"comments": [{"owner": {"reputation": 147, "user_id": 12615735, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g7d51.jpg?s=128&g=1", "display_name": "C-Gian", "link": "https://stackoverflow.com/users/12615735/c-gian"}, "edited": false, "score": 0, "creation_date": 1577880698, "post_id": 59552025, "comment_id": 105273292, "body": "It was more complicated than I thought. I don&#39;t know why but it was a bit inaccurate, I solved it by adding +15 to the height in the box variable. When I look up, down, right and left the laser is attached to the ship, when I&#39;m in a corner instead it detaches a bit, how can I make it always attached?   Here is what I mean:    <a href=\"https://imgur.com/a/UcoEp1A\" rel=\"nofollow noreferrer\">imgur.com/a/UcoEp1A</a>                                                                Thanks a lot anyway, you&#39;re really good!"}, {"owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "reply_to_user": {"reputation": 147, "user_id": 12615735, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g7d51.jpg?s=128&g=1", "display_name": "C-Gian", "link": "https://stackoverflow.com/users/12615735/c-gian"}, "edited": false, "score": 0, "creation_date": 1577883386, "post_id": 59552025, "comment_id": 105273874, "body": "@C-Gian The issue is not the laser, it is the spaceship. You&#39;ve to correct the location of the spaceship when it is rotated. See the answer. I&#39;ve done some corrections in <code>Laser.rotate</code>, too."}, {"owner": {"reputation": 147, "user_id": 12615735, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g7d51.jpg?s=128&g=1", "display_name": "C-Gian", "link": "https://stackoverflow.com/users/12615735/c-gian"}, "edited": false, "score": 0, "creation_date": 1577885231, "post_id": 59552025, "comment_id": 105274349, "body": "Sorry I don&#39;t know why but I totally ignored the central part of the answer, now I modified the codd and everything works perfectly, however I can&#39;t understand why the collisions are inaccurate, I edited the post to show the problem. Anyway thanks again! @Rabbid76"}, {"owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "reply_to_user": {"reputation": 147, "user_id": 12615735, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g7d51.jpg?s=128&g=1", "display_name": "C-Gian", "link": "https://stackoverflow.com/users/12615735/c-gian"}, "edited": false, "score": 0, "creation_date": 1577885405, "post_id": 59552025, "comment_id": 105274381, "body": "@C-Gian I added the middle part of the answer later. For the collision it would be better to create a new question. Note, a question should not be to broad. Each question should be about one specific topic. So 1 question for the rotation and a 2nd question for the collision. But note the rotated laser image still covers a axis aligned rectangle. If the laser is at 45&#176; then the start of the laser is in on corner of the image and the end is at the diagonally opposite corner."}], "tags": [], "owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "is_accepted": true, "score": 1, "last_activity_date": 1577885066, "last_edit_date": 1577885066, "creation_date": 1577877515, "answer_id": 59552025, "question_id": 59549149, "link": "https://stackoverflow.com/questions/59549149/pygame-move-drawn-rectnot-image-in-the-same-way-as-the-player-including-rotat/59552025#59552025", "title": "Pygame move drawn rect(not image) in the same way as the player, including rotation", "body": "<p>In the answer to <a href=\"https://stackoverflow.com/questions/4183208/how-do-i-rotate-an-image-around-its-center-using-pygame/54714144#54714144\">How do I rotate an image around its center using Pygame?</a> is presented an algorithm to rotate an image around a pivot.  </p>\n\n<p>Use the algorithm to implement the function <code>rotate</code> in the class <code>Laser</code>, dependent on the orientation and position of <code>player1</code></p>\n\n<pre class=\"lang-py prettyprint-override\"><code>class Laser:\n    # [...]\n\n    def rotate(self):\n\n        # get rectangle of player and laser, as if the angle would be 0 \n        player_rect = player1.original_player_image.get_rect(topleft = (player1.x, player1.y))\n        laser_rect  = self.original_image.get_rect(midbottom = player_rect.midtop)\n        self.angle  = player1.angle\n        pos         = player_rect.center\n        pivotPos    = [pos[0] - laser_rect.x, pos[1] - laser_rect.y]   \n\n        # calcaulate the axis aligned bounding box of the rotated image\n        w, h       = self.original_image.get_size()\n        box        = [pygame.math.Vector2(p) for p in [(0, 0), (w, 0), (w, -h), (0, -h)]]\n        box_rotate = [p.rotate(self.angle) for p in box]\n        min_box    = (min(box_rotate, key=lambda p: p[0])[0], min(box_rotate, key=lambda p: p[1])[1])\n        max_box    = (max(box_rotate, key=lambda p: p[0])[0], max(box_rotate, key=lambda p: p[1])[1])\n\n        # calculate the translation of the pivot \n        pivot        = pygame.math.Vector2(pivotPos[0], -pivotPos[1])\n        pivot_rotate = pivot.rotate(self.angle)\n        pivot_move   = pivot_rotate - pivot\n\n        # calculate the upper left origin of the rotated image\n        origin = (pos[0] - pivot[0] + min_box[0] - pivot_move[0], pos[1] + pivot[1] - max_box[1] + pivot_move[1])\n\n        # get a rotated image\n        self.new_image = pygame.transform.rotate(self.original_image, self.angle)\n\n        # get new rectangle\n        self.rect = self.new_image.get_rect(topleft = (round(origin[0]), round(origin[1])))\n</code></pre>\n\n<hr>\n\n<p>Further mote, you've to ensure that the rotated spaceship is correctly placed. Calculate the center of the un-rotated spaceship and apply the center to the rotated spaceship. Use the <code>.rect</code> attribute of the spaceship to <code>blit</code>:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>class Player:\n    # [...]\n\n    # rotate the player where the mouse is aiming\n    def rotate(self):\n        mouse_x, mouse_y = pygame.mouse.get_pos()\n        rel_x, rel_y = mouse_x - self.x, mouse_y - self.y\n        self.angle = (180 / math.pi) * -math.atan2(rel_y, rel_x) - 90\n        self.image = pygame.transform.rotate(self.original_player_image, int(self.angle))\n        orig_center = self.original_player_image.get_rect(topleft = (self.x, self.y)).center\n        self.rect = self.image.get_rect(center = orig_center)\n\n    # draw the player\n    def drawPlayer(self):\n        screen.blit(self.image, self.rect.topleft)     \n</code></pre>\n\n<hr>\n\n<p>Of course every time when the player is rotated, then the laser has to be rotated, too:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>player1.movePlayer()\nplayer1.rotate()\nlaser1.rotate()\n</code></pre>\n\n<hr>\n\n<p><a href=\"https://i.stack.imgur.com/ItYvA.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ItYvA.gif\" alt=\"\"></a></p>\n"}], "owner": {"reputation": 147, "user_id": 12615735, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g7d51.jpg?s=128&g=1", "display_name": "C-Gian", "link": "https://stackoverflow.com/users/12615735/c-gian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 2, "closed_date": 1602337698, "accepted_answer_id": 59552025, "answer_count": 1, "score": 4, "last_activity_date": 1602337718, "creation_date": 1577835557, "last_edit_date": 1577885721, "question_id": 59549149, "link": "https://stackoverflow.com/questions/59549149/pygame-move-drawn-rectnot-image-in-the-same-way-as-the-player-including-rotat", "closed_reason": "Duplicate", "title": "Pygame move drawn rect(not image) in the same way as the player, including rotation", "body": "<p>I'm trying to create a laser beam for my starship, this laser beam is a drawn rect and not an image, I move the starship with \"w-a-s-d\" and aim with the mouse, I created a class \"Laser\" and I've managed to make it aim in the same direction as the player.\nIn addition to rotating, the beam should also move to stay attached to the ship, but I can not understand how to do it.</p>\n\n<pre><code>class Player:\n#inizialize the player\ndef __init__(self, x, y, player):\n    self.x = x\n    self.y = y\n    self.image = player\n    self.is_shooting = False\n    self.original_player_image = player\n    self.angle = 0\n\n#move the player\ndef movePlayer(self):\n    if key[0]:\n        self.x -= 10\n    elif key[1]:\n        self.x += 10\n    if key[2]:\n        self.y -= 10\n    elif key[3]:\n        self.y += 10\n\n    #check borders\n    if self.x &lt;= 0:\n        self.x = 0\n    if self.x + rock_image.get_width() &gt;= display_width:\n        self.x = display_width - player_image.get_width()\n    if self.y &lt;= 0:\n        self.y = 0\n    if self.y + player_image.get_height() &gt;= display_height:\n        self.y = display_height - player_image.get_height()\n\n#rotate the player where the mouse is aiming\ndef rotate(self):\n    mouse_x, mouse_y = pygame.mouse.get_pos()\n    rel_x, rel_y = mouse_x - self.x, mouse_y - self.y\n    self.angle = (180 / math.pi) * -math.atan2(rel_y, rel_x) - 90\n    self.image = pygame.transform.rotate(self.original_player_image, int(self.angle))\n    self.rect = self.image.get_rect()\n\n#draw the player\ndef drawPlayer(self):\n    screen.blit(self.image, (self.x, self.y))\n\n\nclass Laser:\ndef __init__(self, player_x, player_y):\n    self.x = player_x\n    self.y = player_y\n    self.original_image = pygame.Surface((5, 150))\n    self.original_image.set_colorkey( (0,0,0) )\n    self.original_image.fill( (255,0,0) )\n    self.copy_image = self.original_image.copy()\n    self.copy_image.set_colorkey( (0,0,0) )\n    self.rect = self.copy_image.get_rect()\n    self.rect.center = self.x + player_image.get_width()//2, self.y - 75\n    self.new_image = pygame.Surface((5, 150))\n\ndef continueDrawLaser(self):\n    if laser_bool:\n        screen.blit(self.new_image, self.rect)\n\ndef rotate(self):\n    mouse_x, mouse_y = pygame.mouse.get_pos()\n    rel_x, rel_y = mouse_x - player1.x, mouse_y - player1.y\n    angle = (180 / math.pi) * -math.atan2(rel_y, rel_x) - 85\n    vel_x = math.cos(angle)\n    vel_y = math.sin(angle)\n    self.new_image = pygame.transform.rotate(self.original_image, angle)\n    self.rect = self.new_image.get_rect()\n    self.rect.center = player1.x + vel_x, player1.y + vel_y\n</code></pre>\n\n<p>First there is the Player class(starship)\nThe second one is the Laser class(laser beam)</p>\n\n<p>This is what I get:</p>\n\n<p><a href=\"https://i.stack.imgur.com/N9XjI.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/N9XjI.gif\" alt=\"enter image description here\"></a></p>\n\n<p>If you need the whole code I posted it here:</p>\n\n<p><a href=\"https://pastebin.com/jnYifErX\" rel=\"nofollow noreferrer\">https://pastebin.com/jnYifErX</a></p>\n\n<p>To let you test the code I have eliminated all the useless things and left only the player with the laser beam, so you have to download only the spaceship to test the code,here the shortened code:</p>\n\n<p><a href=\"https://pastebin.com/VTbuCZY4\" rel=\"nofollow noreferrer\">https://pastebin.com/VTbuCZY4</a></p>\n\n<p>Link to download the spaceship:</p>\n\n<p><a href=\"https://www.flaticon.com/free-icon/spaceship_1114780?term=space%20ship&amp;page=1&amp;position=57\" rel=\"nofollow noreferrer\">https://www.flaticon.com/free-icon/spaceship_1114780?term=space%20ship&amp;page=1&amp;position=57</a></p>\n"}, {"tags": ["python", "pandas", "scikit-learn", "cosine-similarity"], "answers": [{"tags": [], "owner": {"reputation": 10318, "user_id": 271641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a098ae2f1198ec5f649080470b136cc?s=128&d=identicon&r=PG", "display_name": "Marat", "link": "https://stackoverflow.com/users/271641/marat"}, "is_accepted": true, "score": 2, "last_activity_date": 1577838951, "creation_date": 1577838951, "answer_id": 59549325, "question_id": 59549132, "link": "https://stackoverflow.com/questions/59549132/cosine-similarity-between-2-pandas-df-column-to-get-cosine-distance/59549325#59549325", "title": "cosine_similarity between 2 pandas df column to get cosine distance", "body": "<p>TLDR:</p>\n\n<pre><code>df['cosine_similarity'] = df.apply(\n    lambda row: cosine_similarity([row['vector_a']], [row['vector_b']])[0][0],\n    axis=1)\n</code></pre>\n\n<p>Explanation:</p>\n\n<ul>\n<li><code>cosine_similarity</code> expects 2D np.array, or list of lists. It doesn't know how to interpret pd.Series of lists. However, even if we did convert it to list of lists, the next problem arises:</li>\n<li><code>cosine_similarity</code> returns all-vs-all similarity. So, let's limit to pairwise comparison, artificially creating second dimension (note the extra square brackets in <code>[row['vector_a']], [row['vector_b']]</code>), and then taking the only element of a 1x1 array (zeros at the end of <code>cosine_similarity(...)[0][0]</code>)</li>\n</ul>\n"}], "owner": {"reputation": 419, "user_id": 11188487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a5bb8a2deb6b5d3766b404e5c8e8d00?s=128&d=identicon&r=PG&f=1", "display_name": "atjw94", "link": "https://stackoverflow.com/users/11188487/atjw94"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 221, "favorite_count": 0, "accepted_answer_id": 59549325, "answer_count": 1, "score": 2, "last_activity_date": 1577941853, "creation_date": 1577835167, "last_edit_date": 1577941853, "question_id": 59549132, "link": "https://stackoverflow.com/questions/59549132/cosine-similarity-between-2-pandas-df-column-to-get-cosine-distance", "title": "cosine_similarity between 2 pandas df column to get cosine distance", "body": "<p>I have a dataframe as shown below:</p>\n\n<pre><code>vector_a            vector_b\n[1,2,3]             [2,5,6]\n[0,2,1]             [2,9,1]\n[4,7,1]             [1,7,4]\n</code></pre>\n\n<p>I would like to do sklearn's <code>cosine_similarity</code> between the columns vector_a and vector_b to get a new column called 'cosine_distance' in the same dataframe. Do note that vector_a and vector_b are pandas <code>df</code> columns of <code>list</code>.</p>\n\n<p>This is what I have attempted:</p>\n\n<pre><code>df['vector_a'] = df['vector_a'].apply(lambda x: np.asarray(x))\ndf['vector_b'] = df['vector_b'].apply(lambda x: np.asarray(x))\ndf['cosine_distance'] = cosine_similarity(df['vector_a'].apply(lambda x: np.transpose(x)), \n                                          df['vector_b'].apply(lambda x: np.transpose(x)))\n</code></pre>\n\n<p>And I got this error:</p>\n\n<pre><code>---&gt; 58         df['cosine_distance'] = cosine_similarity(df['vector_a'].apply(lambda x: np.transpose(x)), df['vector_b'].apply(lambda x: np.transpose(x)))\n\n~\\Anaconda3\\lib\\site-packages\\sklearn\\metrics\\pairwise.py in cosine_similarity(X, Y, dense_output)\n   1025     # to avoid recursive import\n   1026 \n-&gt; 1027     X, Y = check_pairwise_arrays(X, Y)\n   1028 \n   1029     X_normalized = normalize(X, copy=True)\n\n~\\Anaconda3\\lib\\site-packages\\sklearn\\metrics\\pairwise.py in check_pairwise_arrays(X, Y, precomputed, dtype)\n    110     else:\n    111         X = check_array(X, accept_sparse='csr', dtype=dtype,\n--&gt; 112                         estimator=estimator)\n    113         Y = check_array(Y, accept_sparse='csr', dtype=dtype,\n    114                         estimator=estimator)\n\n~\\Anaconda3\\lib\\site-packages\\sklearn\\utils\\validation.py in check_array(array, accept_sparse, accept_large_sparse, dtype, order, copy, force_all_finite, ensure_2d, allow_nd, ensure_min_samples, ensure_min_features, warn_on_dtype, estimator)\n    494             try:\n    495                 warnings.simplefilter('error', ComplexWarning)\n--&gt; 496                 array = np.asarray(array, dtype=dtype, order=order)\n    497             except ComplexWarning:\n    498                 raise ValueError(\"Complex data not supported\\n\"\n\n~\\Anaconda3\\lib\\site-packages\\numpy\\core\\numeric.py in asarray(a, dtype, order)\n    536 \n    537     \"\"\"\n--&gt; 538     return array(a, dtype, copy=False, order=order)\n    539 \n    540 \n\nValueError: setting an array element with a sequence.\n</code></pre>\n\n<p>Thank you in advance!</p>\n"}, {"tags": ["python", "windows", "pip", "python-3.8"], "answers": [{"comments": [{"owner": {"reputation": 36, "user_id": 12644778, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-9VoIa5pFJ3A/AAAAAAAAAAI/AAAAAAAAAKo/FfEPua3Ml48/photo.jpg?sz=128", "display_name": "DEVX75", "link": "https://stackoverflow.com/users/12644778/devx75"}, "edited": false, "score": 0, "creation_date": 1578033641, "post_id": 59574207, "comment_id": 105315460, "body": "Btw. There is not such a PIP version 3.8. Next time, you should add the output of PIP LIST command. It looks like this:  Package        Version -------------- ---------- altgraph       0.16.1 Click          7.0 future         0.18.2 pefile         2019.4.18 pip            19.3.1 PyInstaller    3.5 PyQt5          5.14.0 PyQt5-sip      12.7.0 pyqt5-tools    5.13.0.1.5 python-dotenv  0.10.3 pywin32-ctypes 0.2.0 setuptools     41.2.0"}], "tags": [], "owner": {"reputation": 36, "user_id": 12644778, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-9VoIa5pFJ3A/AAAAAAAAAAI/AAAAAAAAAKo/FfEPua3Ml48/photo.jpg?sz=128", "display_name": "DEVX75", "link": "https://stackoverflow.com/users/12644778/devx75"}, "is_accepted": true, "score": 0, "last_activity_date": 1578033492, "creation_date": 1578033492, "answer_id": 59574207, "question_id": 59549129, "link": "https://stackoverflow.com/questions/59549129/pip-fails-to-install-auto-py-to-exe/59574207#59574207", "title": "PIP fails to install auto-py-to-exe", "body": "<p>I will try to give you a short list of reasons for this failure.</p>\n\n<ol>\n<li>Auto Py To Exe uses (is based on) PyInstaller</li>\n<li>PyInstaller has no support for Python 3.8</li>\n<li>So, Auto Py To Exe doesn't work with Python 3.8.x but it does for Python : Python >= 2.7 ( including 3.7 \ud83c\udf89 ) <a href=\"https://pypi.org/project/auto-py-to-exe/\" rel=\"nofollow noreferrer\">Read here</a></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 12737677, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDbbR5q6zgGZGmtr6qxolc5KQHot6-fRRK7aFN8iA=k-s128", "display_name": "Anton", "link": "https://stackoverflow.com/users/12737677/anton"}, "is_accepted": false, "score": 0, "last_activity_date": 1585504702, "last_edit_date": 1585504702, "creation_date": 1585485945, "answer_id": 60914473, "question_id": 59549129, "link": "https://stackoverflow.com/questions/59549129/pip-fails-to-install-auto-py-to-exe/60914473#60914473", "title": "PIP fails to install auto-py-to-exe", "body": "<p>PyInstaller is not supported on Python 3.8 yet. This solution works:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>    pip uninstall pyinstaller\n    pip install https://github.com/pyinstaller/pyinstaller/archive/develop.zip\n    pip install -U gevent==1.5a3\n    pip install -U auto-py-to-exe\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 12634291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c59d0a7a1bcb315b461f6e22029282cd?s=128&d=identicon&r=PG&f=1", "display_name": "ElectricCarrot", "link": "https://stackoverflow.com/users/12634291/electriccarrot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1758, "favorite_count": 0, "accepted_answer_id": 59574207, "answer_count": 2, "score": 2, "last_activity_date": 1585504702, "creation_date": 1577835136, "last_edit_date": 1577835237, "question_id": 59549129, "link": "https://stackoverflow.com/questions/59549129/pip-fails-to-install-auto-py-to-exe", "title": "PIP fails to install auto-py-to-exe", "body": "<p>I have problem with PIP 3.8</p>\n\n<pre><code>C:\\Users\\iivoo\\PycharmProjects\\TEST\\venv\\Scripts&gt;pip install auto-py-to-exe\nCollecting auto-py-to-exe...\n\ndistutils.errors.DistutilsError: Setup script exited with error: command 'C:\\\\Program Files (x86)\\\\Microsoft Visual Studio 14.0\\\\VC\\\\BIN\\\\cl.exe' failed with exit status 2\n\n----------------------------------------\nCommand \"python setup.py egg_info\" failed with error code 1 in C:\\Users\\iivoo\\AppData\\Local\\Temp\\pip-install-gf4x4k83\\gevent\\\n</code></pre>\n\n<p>I don't know what is problem i have: latest visual studio c++ building tools, python 3.8, pip 3.8, latest pyinstaller, windows 10</p>\n\n<p>Pls help me thank you! </p>\n\n<p>Edit: Sorry bad english!</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 3225, "user_id": 9917694, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-eYLrricMNLQ/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq3U1NPjt3ei5L4we8FlqCJz7mWBlg/mo/photo.jpg?sz=128", "display_name": "N Chauhan", "link": "https://stackoverflow.com/users/9917694/n-chauhan"}, "edited": false, "score": 1, "creation_date": 1577835736, "post_id": 59549128, "comment_id": 105267402, "body": "Wouldn\u2019t you use a try/except with <code>NameError</code>? Anyhow, I don\u2019t think it signals a good piece of code if there is a doubt in whether variables are defined. I would expect them to be defined, but with a value of, say, <code>None</code>."}, {"owner": {"reputation": 15430, "user_id": 4518341, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eVuAv.png?s=128&g=1", "display_name": "wjandrea", "link": "https://stackoverflow.com/users/4518341/wjandrea"}, "edited": false, "score": 0, "creation_date": 1577835932, "post_id": 59549128, "comment_id": 105267422, "body": "Could you give an example use case? I can&#39;t think of a situation where you couldn&#39;t catch <code>NameError</code> instead of this."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1577836073, "post_id": 59549128, "comment_id": 105267437, "body": "See my <a href=\"https://stackoverflow.com/questions/3930188/how-to-convert-nonetype-to-int-or-string/3931746#3931746\">answer</a> to a question that addresses this subject."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 2, "creation_date": 1577836315, "post_id": 59549128, "comment_id": 105267476, "body": "I can&#39;t really think of a good reason why you&#39;d ever have to guess if a variable is defined. What is the use case, exactly? To me, this is major code smell."}, {"owner": {"reputation": 15430, "user_id": 4518341, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eVuAv.png?s=128&g=1", "display_name": "wjandrea", "link": "https://stackoverflow.com/users/4518341/wjandrea"}, "edited": false, "score": 0, "creation_date": 1577836583, "post_id": 59549128, "comment_id": 105267512, "body": "FWIW Pyflakes gives an error: <code>E0602 undefined name &#39;var&#39;</code>."}, {"owner": {"reputation": 73988, "user_id": 1639625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4224d1458a149d37b56a53115656f4df?s=128&d=identicon&r=PG", "display_name": "tobias_k", "link": "https://stackoverflow.com/users/1639625/tobias-k"}, "edited": false, "score": 1, "creation_date": 1577837297, "post_id": 59549128, "comment_id": 105267581, "body": "&quot;...instead of having to define the variable as None before the if statement.&quot; Wouldn&#39;t that be much cleaner and simpler, though?"}], "answers": [{"tags": [], "owner": {"reputation": 15430, "user_id": 4518341, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eVuAv.png?s=128&g=1", "display_name": "wjandrea", "link": "https://stackoverflow.com/users/4518341/wjandrea"}, "is_accepted": true, "score": 0, "last_activity_date": 1577837530, "last_edit_date": 1577837530, "creation_date": 1577837162, "answer_id": 59549232, "question_id": 59549128, "link": "https://stackoverflow.com/questions/59549128/practice-on-calling-an-object-that-may-or-may-not-be-defined/59549232#59549232", "title": "Practice on calling an object that may or may not be defined", "body": "<p>Yes it's bad practice. Regardless of whether it's practical, it mixes scopes, which is confusing. You check if <code>var</code> is defined in the <strong>global</strong> scope but then get its value from the <strong>current</strong> scope, whether that's global or not. For example:</p>\n\n<pre><code>def func():\n    var = 'Local'\n    var = var if 'var' in globals() else None\n    print(var)\n\nfunc()  # -&gt; None\nvar = 'Global'\nfunc()  # -&gt; Local\n</code></pre>\n\n<p>If you want to always look up <code>var</code> in the <strong>global</strong> scope, use <code>dict.get</code> with a default:</p>\n\n<pre><code>var = globals().get('var', None)\n</code></pre>\n\n<p>If you want to always look up <code>var</code> in the <strong>current</strong> scope, use a try-except catching a <code>NameError</code> like in <a href=\"https://stackoverflow.com/users/2875563/reblochon-masque\">Reblochon Masque</a>'s <a href=\"https://stackoverflow.com/a/59549188/4518341\">answer</a>:</p>\n\n<pre><code>try:\n    var = var\nexcept NameError:\n    var = None\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 96308, "user_id": 651174, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2e2d79b9350ef4ebf04ac0ad5816a5c3?s=128&d=identicon&r=PG", "display_name": "David542", "link": "https://stackoverflow.com/users/651174/david542"}, "edited": false, "score": 1, "creation_date": 1577839489, "post_id": 59549247, "comment_id": 105267803, "body": "I like the idea of logging it in that case."}], "tags": [], "owner": {"reputation": 2260, "user_id": 2755690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/157ff3ed242b300716dbb0fbdd1dc9ac?s=128&d=identicon&r=PG&f=1", "display_name": "antont", "link": "https://stackoverflow.com/users/2755690/antont"}, "is_accepted": false, "score": 3, "last_activity_date": 1578115699, "last_edit_date": 1578115699, "creation_date": 1577837419, "answer_id": 59549247, "question_id": 59549128, "link": "https://stackoverflow.com/questions/59549128/practice-on-calling-an-object-that-may-or-may-not-be-defined/59549247#59549247", "title": "Practice on calling an object that may or may not be defined", "body": "<p>Yes it is bad practice. Both by using globals() or except NameError. Instead simply define all the variables you will use. There is never the need to either have them defined or not.</p>\n\n<p>In your example:</p>\n\n<pre><code>obj = None\n\nif process == 'yes':\n    # 100 lines of code\n    obj = {...}\n\n#maybe log a warning in case obj is None still. or handle it in the caller\nreturn Response(obj)\n</code></pre>\n"}], "owner": {"reputation": 96308, "user_id": 651174, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2e2d79b9350ef4ebf04ac0ad5816a5c3?s=128&d=identicon&r=PG", "display_name": "David542", "link": "https://stackoverflow.com/users/651174/david542"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 59549232, "answer_count": 2, "score": -1, "last_activity_date": 1578115699, "creation_date": 1577835109, "last_edit_date": 1577839431, "question_id": 59549128, "link": "https://stackoverflow.com/questions/59549128/practice-on-calling-an-object-that-may-or-may-not-be-defined", "title": "Practice on calling an object that may or may not be defined", "body": "<p>Is the following considered bad practice:</p>\n\n<pre><code>var = var if 'var' in globals() else None    \n</code></pre>\n\n<p>In other words, if there is an <code>if</code> statement that defines a variable, and I may need to access that variable later, to use a construction such as the above, instead of having to define the variable as <code>None</code> before the <code>if</code> statement.</p>\n\n<p>Why or why not would the above construction be acceptable?</p>\n\n<p>An example would be like this:</p>\n\n<pre><code>if process == 'yes':\n    # 100 lines of code\n    obj = {...}\n\n\nreturn Response(obj)\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "linux", "gdb"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 8489569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8adec67c207ac14ddc56074a9e2a1924?s=128&d=identicon&r=PG&f=1", "display_name": "norbux", "link": "https://stackoverflow.com/users/8489569/norbux"}, "is_accepted": false, "score": 0, "last_activity_date": 1582001627, "creation_date": 1582001627, "answer_id": 60273956, "question_id": 59549127, "link": "https://stackoverflow.com/questions/59549127/python-gdb-support-path-to-checkout/60273956#60273956", "title": "Python gdb support - /path/to/checkout", "body": "<p>I think if you are running GDB v7 or above, you are already set. At least it worked for me on Raspbian 7.12</p>\n"}], "owner": {"reputation": 1471, "user_id": 8276973, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/96a6954bd630cf29b8529b41d9ce66fc?s=128&d=identicon&r=PG&f=1", "display_name": "RTC222", "link": "https://stackoverflow.com/users/8276973/rtc222"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 129, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1582001627, "creation_date": 1577835095, "question_id": 59549127, "link": "https://stackoverflow.com/questions/59549127/python-gdb-support-path-to-checkout", "title": "Python gdb support - /path/to/checkout", "body": "<p>I am enabling gdb for Python support with Python 3.6.9 and gdb 8.1.0 on Ubuntu 18.04.  </p>\n\n<p>In the document <a href=\"https://devguide.python.org/gdb/\" rel=\"nofollow noreferrer\">https://devguide.python.org/gdb/</a> it says, \"When CPython is built you will notice a python-gdb.py file in the root directory of your checkout.  Read the module docstring for details on how to use the file to enhance gdb for easier debugging of a CPython process. To activate support, you must add the directory containing python-gdb.py to GDB\u2019s \u201cauto-load-safe-path\u201d. Put this in your ~/.gdbinit file:  add-auto-load-safe-path /path/to/checkout\"</p>\n\n<p>On my distro (Ubuntu 18.04), gdb was installed by default, so I didn't build it from source with ./configure --with-python.  At the time of install I did not anticipate needing Python support.  When I search for  python-gdb.py using locate python-gdb.py it shows that  python-gdb.py does not exist.  </p>\n\n<p>My questions are:  </p>\n\n<ol>\n<li><p>Can I update my gdb installation to enable Python support?  </p></li>\n<li><p>What do I use for /path/to/checkout in the string \"add-auto-load-safe-path /path/to/checkout.\"  </p></li>\n</ol>\n\n<p>Thanks for any help.  </p>\n"}, {"tags": ["python", "csv", "pickle"], "comments": [{"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1577836189, "post_id": 59549118, "comment_id": 105267456, "body": "You&#39;re only dumping <code>a_list[0]</code> not the whole <code>a_list</code>, that&#39;s why."}, {"owner": {"reputation": 21, "user_id": 4061796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3f87765d8e8e723f0ab1ffbb9d07041?s=128&d=identicon&r=PG", "display_name": "OmnisCreative", "link": "https://stackoverflow.com/users/4061796/omniscreative"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1578118971, "post_id": 59549118, "comment_id": 105342857, "body": "@martineau great got it"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1578121479, "post_id": 59549118, "comment_id": 105343200, "body": "That&#39;s good to hear. BTW, you don&#39;t need to explicitly close files opened via a <code>with open(...) as</code> \u2014 it&#39;ll be done automatically even if there&#39;s an error."}], "owner": {"reputation": 21, "user_id": 4061796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3f87765d8e8e723f0ab1ffbb9d07041?s=128&d=identicon&r=PG", "display_name": "OmnisCreative", "link": "https://stackoverflow.com/users/4061796/omniscreative"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1713, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1577836336, "creation_date": 1577834934, "last_edit_date": 1577836336, "question_id": 59549118, "link": "https://stackoverflow.com/questions/59549118/convert-a-csv-to-pickle-simple", "title": "convert a .csv to pickle (simple)", "body": "<p>I'm embarrassed i have .csv file that I want to convert to a pickle\n problem is the file converts but only the first line of the .csv is written to the pickle file. My Embarrassment or awkwardness comes from not knowing how to get it to read the entire contents of the .csv file \nthe csv file consist of 1 column of 1000 rows suggestions</p>\n\n<pre><code>import csv\nimport pickle\n\n\nclass addresses:\n    def __init__(list):\n        list.addresses = addresses\n\n\n    def __str__(list):\n        return \"{}\".format(list.addresses)\n\n    def __iter__(list):\n        return iter([list.addresses])\n\n\na_list = []\n\nwith open(\"2.csv\", \"r\") as f:\n    reader = csv.reader(f)\n    for row in reader:\n        a_list.append((row[0]))\n\nwith open('2.pkl', 'wb') as output_file:\n    pickle.dump(a_list[0], output_file)\n    output_file.close()\n</code></pre>\n"}, {"tags": ["python", "node.js", "express", "ejs"], "answers": [{"comments": [{"owner": {"reputation": 390, "user_id": 11127541, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mcsaDH8wnZY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re9KnEdSI2st7JCr4Wk8lzwmGMEnQ/mo/photo.jpg?sz=128", "display_name": "Omar Omeiri", "link": "https://stackoverflow.com/users/11127541/omar-omeiri"}, "edited": false, "score": 1, "creation_date": 1577886373, "post_id": 59550669, "comment_id": 105274595, "body": "That worked! Since the listener is being triggered many times i only had to add <code>html = html + message;</code> and change the ejs placeholder to <code>&lt;%- table %&gt;</code> instead of <code>&lt;%= table %&gt;</code>. Thanks!"}], "tags": [], "owner": {"reputation": 563, "user_id": 12634779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MRHkG.png?s=128&g=1", "display_name": "MAS", "link": "https://stackoverflow.com/users/12634779/mas"}, "is_accepted": true, "score": 1, "last_activity_date": 1577863049, "creation_date": 1577863049, "answer_id": 59550669, "question_id": 59549113, "link": "https://stackoverflow.com/questions/59549113/render-html-table-from-csv-using-node-js-express-and-python/59550669#59550669", "title": "Render html table from csv using node.js, express and python", "body": "<p>Basically Express's <a href=\"http://expressjs.com/en/api.html#res.render\" rel=\"nofollow noreferrer\">res.render</a> ends the response; which means we can only use it once, and it seems like the listener <code>pyshell.on('message'...</code> is being triggered more than once.</p>\n\n<p>You will need to prepare the table then render it. Example:</p>\n\n<pre><code>const express = require('express');\nconst app = express();\nconst { PythonShell } = require('python-shell');\n\napp.set('view engine', 'ejs');\n\napp.get('/', function(req, res){\n  prepareHtmlTable(function(err, html) {\n    if (err) return res.sendStatus(500);\n    res.render('list', { table: html });\n  })\n});\n\nfunction prepareHtmlTable(callback) {\n  const pyshell = new PythonShell('excel_to_html.py');\n\n  pyshell.on('message', function (message) {\n    // prepare html table here\n    let html = message;\n\n    pyshell.end(function (err,code,signal) {\n      if (err) return callback(err);\n\n      callback(null, html);\n    });\n  });\n}\n\nconst port = 3000;\napp.listen(port, function(){\n  console.log('Server running on port ' + port)\n});\n</code></pre>\n"}], "owner": {"reputation": 390, "user_id": 11127541, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mcsaDH8wnZY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re9KnEdSI2st7JCr4Wk8lzwmGMEnQ/mo/photo.jpg?sz=128", "display_name": "Omar Omeiri", "link": "https://stackoverflow.com/users/11127541/omar-omeiri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 430, "favorite_count": 0, "accepted_answer_id": 59550669, "answer_count": 1, "score": 0, "last_activity_date": 1577863049, "creation_date": 1577834836, "question_id": 59549113, "link": "https://stackoverflow.com/questions/59549113/render-html-table-from-csv-using-node-js-express-and-python", "title": "Render html table from csv using node.js, express and python", "body": "<p>I have a simple csv file and want to render a html table from it using express and ejs.</p>\n\n<p>csv:</p>\n\n<pre><code>,Unnamed: 0,sign_type,r1,g1,b1,r2,g2,b2,r3,g3,b3,r4,g4,b4,r5,g5,b5,r6,g6,b6,r7,g7,b7,r8,g8,b8,r9,g9,b9,r10,g10,b10,r11,g11,b11,r12,g12,b12,r13,g13,b13,r14,g14,b14,r15,g15,b15,r16,g16,b16\n0,1,pedestrian,155,228,251,135,188,101,156,227,245,145,211,228,166,233,245,212,254,52,212,254,11,188,229,117,170,216,120,211,254,3,212,254,19,172,235,244,172,235,244,172,228,235,177,235,244,22,52,53\n1,2,pedestrian,142,217,242,166,204,44,142,217,242,147,219,242,164,228,229,84,116,17,217,254,26,155,203,128,213,253,51,217,255,21,217,255,21,158,225,237,164,227,237,182,228,143,171,228,196,164,227,237\n2,3,pedestrian,57,54,50,187,201,68,51,51,45,59,62,65,156,171,50,254,255,36,211,226,70,78,73,64,220,234,59,254,255,51,253,255,44,66,68,68,69,65,59,76,84,22,82,93,17,58,60,60\n3,4,pedestrian,22,35,41,171,178,26,19,27,29,19,27,29,42,37,3,217,228,19,221,235,20,181,183,73,237,234,44,251,254,2,235,243,12,19,27,29,20,29,34,64,61,4,211,222,78,19,27,29\n4,5,pedestrian,169,179,170,231,254,27,97,107,99,123,147,152,221,236,117,205,225,80,235,254,60,90,110,9,216,236,66,229,255,12,235,254,60,163,168,152,124,117,91,188,205,78,125,147,20,160,183,187\n</code></pre>\n\n<p>my .html file is as follows:</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=\"en\" dir=\"ltr\"&gt;\n\n&lt;head&gt;\n  &lt;meta charset=\"utf-8\"&gt;\n  &lt;title&gt;Table&lt;/title&gt;\n&lt;/head&gt;\n\n&lt;body&gt;\n    &lt;%= table %&gt;\n&lt;/body&gt;\n\n&lt;/html&gt;\n</code></pre>\n\n<p>my app.js is:</p>\n\n<pre><code>const express = require('express');\nconst app = express();\nconst bodyParser = require('body-parser');\nlet {PythonShell} = require('python-shell');\n\napp.set('view engine', 'ejs');\n\n\napp.get('/', function(req, res){\n  var pyshell = new PythonShell('excel_to_html.py');\n  pyshell.on('message', function (message) {\n\n      res.render('list', {table: message}) // ###### console.log(message);\n  });\n  });\n\nvar port = 3000;\napp.listen(port, function(){\n  console.log('Server running on port ' + port)\n});\n</code></pre>\n\n<p>and the python file which converts the .csv to html is:</p>\n\n<pre><code>import pandas as pd\n\ndef convert():\n    csv_file = pd.read_csv('test.csv')\n    html = csv_file.to_html()\n    return html\n\nif __name__ == '__main__':\n    var = convert()\n    print(var)\n</code></pre>\n\n<p>So summarizing:</p>\n\n<p>1) I have a csv file and using a .py file and pandas to convert the csv into html.</p>\n\n<p>2) I'm calling the python script inside the app.js file and getting the returned html.</p>\n\n<p>3) I want to render that html table in my index.html using ejs.</p>\n\n<p>If I replace the <code>res.render('list', {table: message})</code> with the commented part <code>console.log(message);</code> I'm able to see the html table in the terminal log.</p>\n\n<p>but when I try to render it using <code>res.render('list', {table: message})</code> i get a not infinite looping error like this:</p>\n\n<pre><code>Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client \n    at ServerResponse.setHeader (_http_outgoing.js:485:11)\n    at ServerResponse.header (E:\\Documents\\CODE\\WebDev\\todolist\\v1\\node_modules\\express\\lib\\response.js:771:10)\n    at ServerResponse.send (E:\\Documents\\CODE\\WebDev\\todolist\\v1\\node_modules\\express\\lib\\response.js:170:12)\n    at done (E:\\Documents\\CODE\\WebDev\\todolist\\v1\\node_modules\\express\\lib\\response.js:1008:10)\n    at tryHandleCache (E:\\Documents\\CODE\\WebDev\\todolist\\v1\\node_modules\\ejs\\lib\\ejs.js:260:5)\n    at View.exports.renderFile [as engine] (E:\\Documents\\CODE\\WebDev\\todolist\\v1\\node_modules\\ejs\\lib\\ejs.js:459:10)\n    at View.render (E:\\Documents\\CODE\\WebDev\\todolist\\v1\\node_modules\\express\\lib\\view.js:135:8)\n    at tryRender (E:\\Documents\\CODE\\WebDev\\todolist\\v1\\node_modules\\express\\lib\\application.js:640:10)\n    at Function.render (E:\\Documents\\CODE\\WebDev\\todolist\\v1\\node_modules\\express\\lib\\application.js:592:3)\n    at ServerResponse.render (E:\\Documents\\CODE\\WebDev\\todolist\\v1\\node_modules\\express\\lib\\response.js:1012:7)\n</code></pre>\n\n<p>And I get only this in the browser:</p>\n\n<pre><code>&lt;table border=\"1\" class=\"dataframe\"&gt;\n</code></pre>\n\n<p>how should I render this table? Is it easily possible?</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["python", "selenium-webdriver", "selenium-chromedriver"], "comments": [{"owner": {"reputation": 152, "user_id": 12369340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce662422dfd6b1152133d005aa4a7929?s=128&d=identicon&r=PG&f=1", "display_name": "Noah", "link": "https://stackoverflow.com/users/12369340/noah"}, "edited": false, "score": 0, "creation_date": 1577834187, "post_id": 59549053, "comment_id": 105267198, "body": "Are you sure all the xpaths are the same"}, {"owner": {"reputation": 79, "user_id": 9240773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a7fd90d8f55f1ef5bc2111c92868acd?s=128&d=identicon&r=PG&f=1", "display_name": "Julia12", "link": "https://stackoverflow.com/users/9240773/julia12"}, "reply_to_user": {"reputation": 152, "user_id": 12369340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce662422dfd6b1152133d005aa4a7929?s=128&d=identicon&r=PG&f=1", "display_name": "Noah", "link": "https://stackoverflow.com/users/12369340/noah"}, "edited": false, "score": 0, "creation_date": 1577835172, "post_id": 59549053, "comment_id": 105267339, "body": "@Noah im not sure"}, {"owner": {"reputation": 152, "user_id": 12369340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce662422dfd6b1152133d005aa4a7929?s=128&d=identicon&r=PG&f=1", "display_name": "Noah", "link": "https://stackoverflow.com/users/12369340/noah"}, "edited": false, "score": 0, "creation_date": 1577836949, "post_id": 59549053, "comment_id": 105267544, "body": "You need to check , often they change , which would make sense because you said it was only able to like 2, and they\u2019re appears to be nothing wrong with your code. Upvote comment if it helped"}], "owner": {"reputation": 79, "user_id": 9240773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a7fd90d8f55f1ef5bc2111c92868acd?s=128&d=identicon&r=PG&f=1", "display_name": "Julia12", "link": "https://stackoverflow.com/users/9240773/julia12"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 123, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1577833791, "creation_date": 1577833791, "question_id": 59549053, "link": "https://stackoverflow.com/questions/59549053/python-selenium-automation-instagram", "title": "python selenium automation instagram", "body": "<p>Im trying to login to my instagram and like pictures on my feed. I'm using selenium to automate the process. The function below will only like the first two pictures. When the home feed is loaded I see 4 \"article\" elements in the html. I want to loop through the article elements liking each picture but the code only likes the first 2 picture. How can I make it like all the pics.</p>\n\n<pre><code>def like_my_feed(self):\n\n        driver = self.driver\n        driver.get(\"https://www.instagram.com/?hl=en\")\n        time.sleep(2)\n\n        try:    \n\n            articles= driver.find_elements_by_tag_name(\"article\")\n            print(len(articles))\n            time.sleep(2)\n\n            for article in articles:\n               like= article.find_element_by_xpath('//span[@aria-label=\"Like\"]')\n               like.click()\n\n\n\n        except Exception as e:\n            print(e)\n</code></pre>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 1101, "user_id": 6460856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/348ceb4cfb329409b99e1805cef9e382?s=128&d=identicon&r=PG&f=1", "display_name": "Swetank Poddar", "link": "https://stackoverflow.com/users/6460856/swetank-poddar"}, "edited": false, "score": 2, "creation_date": 1577833646, "post_id": 59549034, "comment_id": 105267131, "body": "Why is the receiver inside the class of Employee? I think if you put it outside the class it will work fine."}, {"owner": {"reputation": 7155, "user_id": 6486738, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10205523648805608/picture?type=large", "display_name": "Ted Klein Bergman", "link": "https://stackoverflow.com/users/6486738/ted-klein-bergman"}, "edited": false, "score": 0, "creation_date": 1577833916, "post_id": 59549034, "comment_id": 105267164, "body": "You usually put all your receiver functions for an app in a file called <code>receivers.py</code>"}], "owner": {"reputation": 97, "user_id": 10600647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3769375c18b7e5014e12dc714cc317c7?s=128&d=identicon&r=PG&f=1", "display_name": "dc115", "link": "https://stackoverflow.com/users/10600647/dc115"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1577833453, "creation_date": 1577833453, "question_id": 59549034, "link": "https://stackoverflow.com/questions/59549034/what-to-put-as-sender-for-post-save-receiver", "title": "What to put as &quot;sender&quot; for post_save receiver?", "body": "<p>My <code>models.py</code> looks like this right now:</p>\n\n<pre><code>class Employee(models.Model):\n    user = models.OneToOneField(User, on_delete=models.CASCADE, primary_key=True)\n    restaurant = models.ForeignKey(Restaurant, on_delete=models.CASCADE)\n\n    @receiver(post_save, sender=Employee)\n    def set_perms(sender, instance=None, created=False, **kwargs):\n        if created:\n            restaurant = instance.restaurant\n            assign_perm(\"change_user\", instance, instance)\n            assign_perm(\"view_restaurant\", instance, restaurant)\n</code></pre>\n\n<p>I'm getting an error <code>NameError: name 'Employee' is not defined</code> which I'm not too surprised about. However, what should I put as the <code>sender</code> instead?</p>\n\n<p>Note: I know it's best practice for signals to be in another file completely but I just want to get things working for now.</p>\n"}, {"tags": ["python", "discord", "discord.py-rewrite"], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 12634243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06308d9e29645c086295e3f62886a759?s=128&d=identicon&r=PG&f=1", "display_name": "Exile", "link": "https://stackoverflow.com/users/12634243/exile"}, "edited": false, "score": 1, "creation_date": 1577888062, "post_id": 59550663, "comment_id": 105274954, "body": "Thanks so much this was just what i needed, for the life of me everything i tried i was hitting a brick wall. I have much more to learn. When run if a word is split into 2 it will come back with a Yes when it should be No. I&#39;ll try figure it out Thanks again."}], "tags": [], "owner": {"reputation": 322, "user_id": 8004214, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3Xijv.jpg?s=128&g=1", "display_name": "Mixno", "link": "https://stackoverflow.com/users/8004214/mixno"}, "is_accepted": true, "score": 1, "last_activity_date": 1577862941, "creation_date": 1577862941, "answer_id": 59550663, "question_id": 59549007, "link": "https://stackoverflow.com/questions/59549007/reading-a-text-file-in-discord-py-rewrite/59550663#59550663", "title": "Reading a text file in discord.py rewrite", "body": "<p>You can try to use <code>re</code> library to find word in each line.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import re\n\n\n\n@client.command()\nasync def Platoon(ctx, *, word: str):\n    await ctx.send('Checking File please stand by.')\n    with open(\"Platoon.txt\", \"r\") as f:\n        searching = re.compile(r'\\b({0})\\b'.format(word), flags=re.IGNORECASE).search\n        line = True\n        while line:\n            line = f.readline()\n            if not line:\n                break\n            if searching(line):\n                await ctx.send(\"Yes they are in platoon\")\n                return\n    await ctx.send(\"No they are not in platoon\")\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 12634243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06308d9e29645c086295e3f62886a759?s=128&d=identicon&r=PG&f=1", "display_name": "Exile", "link": "https://stackoverflow.com/users/12634243/exile"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1698, "favorite_count": 0, "accepted_answer_id": 59550663, "answer_count": 1, "score": -1, "last_activity_date": 1577924016, "creation_date": 1577833106, "last_edit_date": 1577924016, "question_id": 59549007, "link": "https://stackoverflow.com/questions/59549007/reading-a-text-file-in-discord-py-rewrite", "title": "Reading a text file in discord.py rewrite", "body": "<p>I'm in the middle of writing a bot I have most of it done but I've hit a wall. </p>\n\n<p>I have a text file and i want the bot to search the file to see if a word is on there, if it is then reply yes they are, if they are not reply no they are not</p>\n\n<p>I want it to work like this</p>\n\n<pre><code>!Platoon XXX (XXX= word from file)\n</code></pre>\n\n<p>Bot replies</p>\n\n<pre><code>Yes they are in platoon \n</code></pre>\n\n<p>or</p>\n\n<pre><code>No they are not in platoon\n</code></pre>\n\n<p>So far I have </p>\n\n<pre><code>@client.command()\nasync def Platoon(ctx):\n         await ctx.send('Checking File please stand by.')\n         f = open(\"Platoon.txt\", \"r\")\n</code></pre>\n"}, {"tags": ["python", "aws-lambda", "aws-api-gateway"], "answers": [{"comments": [{"owner": {"reputation": 5869, "user_id": 1448679, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f4efbb20b826ad4a24f9a46e83a3f448?s=128&d=identicon&r=PG&f=1", "display_name": "Arun K", "link": "https://stackoverflow.com/users/1448679/arun-k"}, "edited": false, "score": 0, "creation_date": 1577833592, "post_id": 59549033, "comment_id": 105267126, "body": "is that what you were looking for."}, {"owner": {"reputation": 320, "user_id": 8937074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8eac0b50c84c679bc9a00aad26c9aaf?s=128&d=identicon&r=PG&f=1", "display_name": "EnterPassword", "link": "https://stackoverflow.com/users/8937074/enterpassword"}, "edited": false, "score": 1, "creation_date": 1577838225, "post_id": 59549033, "comment_id": 105267669, "body": "That was it! You saved me from hours of not spotting such a glaringly obvious error. Really appreciate the help!"}, {"owner": {"reputation": 407, "user_id": 10477460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32d94138611c4c0dbc6fd1a5ab438631?s=128&d=identicon&r=PG", "display_name": "farp332", "link": "https://stackoverflow.com/users/10477460/farp332"}, "edited": false, "score": 1, "creation_date": 1602113779, "post_id": 59549033, "comment_id": 113621157, "body": "Solved my issue too."}], "tags": [], "owner": {"reputation": 5869, "user_id": 1448679, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f4efbb20b826ad4a24f9a46e83a3f448?s=128&d=identicon&r=PG&f=1", "display_name": "Arun K", "link": "https://stackoverflow.com/users/1448679/arun-k"}, "is_accepted": true, "score": 4, "last_activity_date": 1577833452, "creation_date": 1577833452, "answer_id": 59549033, "question_id": 59549006, "link": "https://stackoverflow.com/questions/59549006/malformed-lambda-proxy-response-python/59549033#59549033", "title": "Malformed Lambda proxy response - Python", "body": "<p>It's <code>statusCode</code>. And you should return a string for body.</p>\n\n<p>Here you go:</p>\n\n<pre><code>import json\nresponse = {\n  \"statusCode\": 200,\n  \"body\": json.dumps(result[\"Items\"])\n}\n</code></pre>\n"}], "owner": {"reputation": 320, "user_id": 8937074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8eac0b50c84c679bc9a00aad26c9aaf?s=128&d=identicon&r=PG&f=1", "display_name": "EnterPassword", "link": "https://stackoverflow.com/users/8937074/enterpassword"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 306, "favorite_count": 0, "accepted_answer_id": 59549033, "answer_count": 1, "score": 2, "last_activity_date": 1577833452, "creation_date": 1577833101, "question_id": 59549006, "link": "https://stackoverflow.com/questions/59549006/malformed-lambda-proxy-response-python", "title": "Malformed Lambda proxy response - Python", "body": "<p>I know this is a duplicate of multiple questions, but for some reason I've not been able to figure out how to apply those solutions to my problem. The function works fine in Lambda tests, but fails when testing it via API Gateway.</p>\n\n<pre><code>import boto3\nimport json\nimport decimal\nfrom boto3.dynamodb.conditions import Key, Attr\n\ndef lambda_handler(event, context):\n    dynamodb = boto3.resource('dynamodb')\n\n    table = dynamodb.Table('some_table')\n\n    result = table.scan()\n\n    response = {\n        \"status code\": 200,\n        \"body\": result[\"Items\"]\n    }\n\n    return response\n</code></pre>\n\n<p>Here's the error log</p>\n\n<pre><code>Execution log for request \nTue Dec 31 22:47:10 UTC 2019 : Starting execution for request: \nTue Dec 31 22:47:10 UTC 2019 : HTTP Method: GET, Resource Path: /notes\nTue Dec 31 22:47:10 UTC 2019 : Method request path: {}\nTue Dec 31 22:47:10 UTC 2019 : Method request query string: {}\nTue Dec 31 22:47:10 UTC 2019 : Method request headers: {}\nTue Dec 31 22:47:10 UTC 2019 : Method request body before transformations: \nTue Dec 31 22:47:10 UTC 2019 : Endpoint request URI: \nTue Dec 31 22:47:10 UTC 2019 : Endpoint request headers: {x-amzn-lambda-integration-tag=1c231f4e-97e9-405a-aadf-ce37b34ccccd, Authorization=*****************************************************************************************************************************************************************************************************************************************************************************************************************************25519d, X-Amz-Date=20191231T224710Z, x-amzn-apigateway-api-id=4tjnqn8083, X-Amz-Source-Arn=arn:aws:execute-api:561581028295:4tjnqn8083/test-invoke-stage/GET/notes, Accept=application/json, User-Agent=AmazonAPIGateway_4tjnqn8083, X-Amz-Security-Token=IQoJb3JpZ2luX2VjEI7//////////wEaDmFwLXNvdXRoZWFzdC0yIkcwRQIgWl5Cw0aOXcxA4tBC8730wNLqnDVeo98T4+nu23F0CH8CIQCfqC5gJ6U4/UaXtHMOc1riROnwTj7AbYIKs/PCGam00irHAwj3//////////8BEAIaDDc5ODM3NjExMzg1MyIM3wb8dOuNeahpJ6o1KpsDbq4XLSkUYzoiplWuxXWlXvC3sTNceGepB4Gzgwzq8Aw4KO4tcI0GXDBjaNDCTDUpI3HMfxboA6r4v2H84VJ6YiSyIfpqRrv/2DiBortTr4iTARMBIVQb+Nc1v [TRUNCATED]\nTue Dec 31 22:47:10 UTC 2019 : Endpoint request body after transformations: {\"resource\":\"/notes\",\"path\":\"/notes\",\"httpMethod\":\"GET\",\"headers\":null,\"multiValueHeaders\":null,\"queryStringParameters\":null,\"multiValueQueryStringParameters\":null,\"pathParameters\":null,\"stageVariables\":null,\"requestContext\":{\"resourceId\":\"wb2eow\",\"resourcePath\":\"/notes\",\"httpMethod\":\"GET\",\"extendedRequestId\":\"Fl1tQG5sywMF1tg=\",\"requestTime\":\"31/Dec/2019:22:47:10 +0000\",\"path\":\"/notes\",\"accountId\":\"34523452346\",\"protocol\":\"HTTP/1.1\",\"stage\":\"test-invoke-stage\",\"domainPrefix\":\"testPrefix\",\"requestTimeEpoch\":1577832430388,\"requestId\":\"1c231f4e-97e9-405a-aadf-ce37b34ccccd\",\"identity\":{\"cognitoIdentityPoolId\":null,\"cognitoIdentityId\":null,\"apiKey\":\"test-invoke-api-key\",\"principalOrgId\":null,\"cognitoAuthenticationType\":null,\"userArn\":\"arn:aws:iam::561581028295:user/sanjay\",\"apiKeyId\":\"test-invoke-api-key-id\",\"userAgent\":\"aws-internal/3 aws-sdk-java/1.11.690 Linux/4.9.184-0.1.ac.235.83.329.metal1.x86_64 OpenJDK_64-Bit_Server_VM/25.232-b09 java/1.8.0_232 vendor/Oracle_Co [TRUNCATED]\nTue Dec 31 22:47:10 UTC 2019 : Sending request to https://lambda.amazonaws.com/2015-03-31/functions/arn:aws:lambda:2:562534523452345:function:listMyNote/invocations\nTue Dec 31 22:47:11 UTC 2019 : Received response. Status: 200, Integration latency: 1393 ms\nTue Dec 31 22:47:11 UTC 2019 : Endpoint response headers: {Date=Tue, 31 Dec 2019 22:47:11 GMT, Content-Type=application/json, Content-Length=118, Connection=keep-alive, x-amzn-RequestId=ac66aba1-d4c3-45ec-add3-f436cf177da9, x-amzn-Remapped-Content-Length=0, X-Amz-Executed-Version=$LATEST, X-Amzn-Trace-Id=root=1-5e0bcfee-7c8dc2fff64742d811635106;sampled=0}\nTue Dec 31 22:47:11 UTC 2019 : Endpoint response body before transformations: {\"status code\": 200, \"body\": \"[{'id': '00f5fe2a-2c17-11ea-b5d9-dda84499b43e', 'text': 'Hello from the other side!'}]\"}\nTue Dec 31 22:47:11 UTC 2019 : Execution failed due to configuration error: Malformed Lambda proxy response\nTue Dec 31 22:47:11 UTC 2019 : Method completed with status: 502\n</code></pre>\n\n<p>I've read multiple posts talking about the response body needing to be a string and to follow some kind of predefined format, but I'm not sure what I'm missing. Any help would be greatly appreciated.</p>\n"}, {"tags": ["python", "pip"], "comments": [{"owner": {"reputation": 380, "user_id": 11104095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cc0018af5fc00eb65eaae5dcf4473e6?s=128&d=identicon&r=PG&f=1", "display_name": "K753", "link": "https://stackoverflow.com/users/11104095/k753"}, "edited": false, "score": 1, "creation_date": 1577833143, "post_id": 59548953, "comment_id": 105267074, "body": "The &quot;AppData&quot; folder is usually hidden by default. In the File Explorer in Windows click the Hidden Items checkbox under the &quot;Show/Hide&quot; section."}, {"owner": {"reputation": 1, "user_id": 12634226, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Fqg5n-4aVMk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc-SeOfDWuH3vR7Fa70TunfbnytoQ/photo.jpg?sz=128", "display_name": "V&#233;ronique Str&#246;der", "link": "https://stackoverflow.com/users/12634226/v%c3%a9ronique-str%c3%b6der"}, "reply_to_user": {"reputation": 380, "user_id": 11104095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cc0018af5fc00eb65eaae5dcf4473e6?s=128&d=identicon&r=PG&f=1", "display_name": "K753", "link": "https://stackoverflow.com/users/11104095/k753"}, "edited": false, "score": 0, "creation_date": 1577834107, "post_id": 59548953, "comment_id": 105267189, "body": "Thank you very much ! Is it normal though to not find my Python file in the AppData\\Local path, whereas is I can find it in another path ?"}, {"owner": {"reputation": 380, "user_id": 11104095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cc0018af5fc00eb65eaae5dcf4473e6?s=128&d=identicon&r=PG&f=1", "display_name": "K753", "link": "https://stackoverflow.com/users/11104095/k753"}, "edited": false, "score": 0, "creation_date": 1577976594, "post_id": 59548953, "comment_id": 105298355, "body": "It depends on where it was installed. The AppData folder is usually the default install location but if it was changed during the install then it would be located somewhere else. Here is some information on where to find the location and setting it in your PATH: <a href=\"https://projects.raspberrypi.org/en/projects/using-pip-on-windows/5\" rel=\"nofollow noreferrer\">link</a>"}], "answers": [{"tags": [], "owner": {"reputation": 152, "user_id": 12369340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce662422dfd6b1152133d005aa4a7929?s=128&d=identicon&r=PG&f=1", "display_name": "Noah", "link": "https://stackoverflow.com/users/12369340/noah"}, "is_accepted": false, "score": 0, "last_activity_date": 1577834664, "creation_date": 1577834664, "answer_id": 59549106, "question_id": 59548953, "link": "https://stackoverflow.com/questions/59548953/cant-find-the-appdata-file-in-order-to-set-up-properly-the-python-set-path/59549106#59549106", "title": "Can&#39;t find the AppData file in order to set up properly the Python Set Path", "body": "<p>App data file is hidden by default, it is normal so users cannot accidentally make changes important files, you can uncheck the hide files checkbox, as well as uncheck the hide system files</p>\n"}], "owner": {"reputation": 1, "user_id": 12634226, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Fqg5n-4aVMk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc-SeOfDWuH3vR7Fa70TunfbnytoQ/photo.jpg?sz=128", "display_name": "V&#233;ronique Str&#246;der", "link": "https://stackoverflow.com/users/12634226/v%c3%a9ronique-str%c3%b6der"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 226, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577840904, "creation_date": 1577832448, "last_edit_date": 1577840904, "question_id": 59548953, "link": "https://stackoverflow.com/questions/59548953/cant-find-the-appdata-file-in-order-to-set-up-properly-the-python-set-path", "title": "Can&#39;t find the AppData file in order to set up properly the Python Set Path", "body": "<p>I wanted to download PIP on windows and I apparently have to set up a path for python. It seems that I have the define the path within has the \"AppData\" folder, which I can't find. </p>\n"}, {"tags": ["python", "anaconda", "conda"], "comments": [{"owner": {"reputation": 673, "user_id": 8089660, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QkMJn.jpg?s=128&g=1", "display_name": "shimo", "link": "https://stackoverflow.com/users/8089660/shimo"}, "edited": false, "score": 0, "creation_date": 1577834358, "post_id": 59548932, "comment_id": 105267232, "body": "I&#39;m not sure what your conda version is. But <a href=\"https://github.com/conda/conda/issues/8612\" rel=\"nofollow noreferrer\">this</a> may help."}, {"owner": {"reputation": 2600, "user_id": 6914989, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fm2Ar.png?s=128&g=1", "display_name": "FabienP", "link": "https://stackoverflow.com/users/6914989/fabienp"}, "edited": false, "score": 1, "creation_date": 1577834505, "post_id": 59548932, "comment_id": 105267250, "body": "Likely temporary failure, bioconda is working for me. BTW, your channels are not set according to recommendations from conda-forge/bioconda, <code>defaults</code> should come last."}, {"owner": {"reputation": 35, "user_id": 11209338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84866715144067b8373d4a1ea8e1bf5b?s=128&d=identicon&r=PG&f=1", "display_name": "menten", "link": "https://stackoverflow.com/users/11209338/menten"}, "reply_to_user": {"reputation": 2600, "user_id": 6914989, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fm2Ar.png?s=128&g=1", "display_name": "FabienP", "link": "https://stackoverflow.com/users/6914989/fabienp"}, "edited": false, "score": 0, "creation_date": 1577835257, "post_id": 59548932, "comment_id": 105267345, "body": "@FabienP I did try with the list as recommended from conda-forge/bioconda. But it still gives same error"}, {"owner": {"reputation": 41290, "user_id": 570918, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/27ce5101af57acecf9a5fe563b6192b1?s=128&d=identicon&r=PG", "display_name": "merv", "link": "https://stackoverflow.com/users/570918/merv"}, "edited": false, "score": 0, "creation_date": 1577988090, "post_id": 59548932, "comment_id": 105303688, "body": "I can&#39;t replicate this problem. Is your machine offline? Can you visit the web address (i.e., <code>https:&#47;&#47;conda.anaconda.org&#47;bioconda</code>)?"}, {"owner": {"reputation": 35, "user_id": 11209338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84866715144067b8373d4a1ea8e1bf5b?s=128&d=identicon&r=PG&f=1", "display_name": "menten", "link": "https://stackoverflow.com/users/11209338/menten"}, "reply_to_user": {"reputation": 41290, "user_id": 570918, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/27ce5101af57acecf9a5fe563b6192b1?s=128&d=identicon&r=PG", "display_name": "merv", "link": "https://stackoverflow.com/users/570918/merv"}, "edited": false, "score": 0, "creation_date": 1578023505, "post_id": 59548932, "comment_id": 105313383, "body": "@merv yes the site is working fine"}], "owner": {"reputation": 35, "user_id": 11209338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84866715144067b8373d4a1ea8e1bf5b?s=128&d=identicon&r=PG&f=1", "display_name": "menten", "link": "https://stackoverflow.com/users/11209338/menten"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 725, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1577987896, "creation_date": 1577832273, "last_edit_date": 1577987896, "question_id": 59548932, "link": "https://stackoverflow.com/questions/59548932/conda-cannot-access-bioconda-channel", "title": "Conda cannot access Bioconda channel", "body": "<p>I tried to install packages in my anaconda3 environment using <code>conda install -c &lt;channel-name&gt; &lt;package-name&gt;</code> and only <code>conda install &lt;package-name&gt;</code> too but it fails everytime. \nThe error I receive is :</p>\n\n<pre><code>Collecting package metadata (current_repodata.json): failed\n\nUnavailableInvalidChannel: The channel is not accessible or is invalid.\n  channel name: bioconda\n  channel url: https://conda.anaconda.org/bioconda\n  error code: 404\n\nYou will need to adjust your conda configuration to proceed.\nUse `conda config --show channels` to view your configuration's current state,\nand use `conda config --show-sources` to view config file locations.\n</code></pre>\n\n<p>I have added bioconda, conda-forge and defaults as channels in conda config. I am getting this error no matter what package, and I know for sure the packages are present in the anaconda website under the given channel! </p>\n\n<p><code>conda config --show channels</code> gives me </p>\n\n<pre><code>  - defaults\n  - conda-forge\n  - bioconda\n</code></pre>\n\n<p>and</p>\n\n<p><code>conda config --show-sources</code>\ngives me</p>\n\n<pre><code>ssl_verify: False\nchannels:\n  - defaults\n  - conda-forge\n  - bioconda\n</code></pre>\n\n<p>Could anyone help in this please!</p>\n"}, {"tags": ["python", "django", "validation", "serialization", "django-rest-framework"], "comments": [{"owner": {"reputation": 673, "user_id": 8089660, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QkMJn.jpg?s=128&g=1", "display_name": "shimo", "link": "https://stackoverflow.com/users/8089660/shimo"}, "edited": false, "score": 0, "creation_date": 1577840794, "post_id": 59548910, "comment_id": 105267959, "body": "I couldn&#39;t reproduce your error (too many values to unpack). Raiseerror returns only  <code>ValidationError: [ErrorDetail(string=&#39;The following fields are required:  &#39;, code=&#39;invalid&#39;)]</code> django 3.0.1, djangoframework 3.11.0"}, {"owner": {"reputation": 497, "user_id": 6796652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa9a7592fcb19f38ca088a2cd811b57f?s=128&d=identicon&r=PG&f=1", "display_name": "Manuel Carrero", "link": "https://stackoverflow.com/users/6796652/manuel-carrero"}, "reply_to_user": {"reputation": 673, "user_id": 8089660, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QkMJn.jpg?s=128&g=1", "display_name": "shimo", "link": "https://stackoverflow.com/users/8089660/shimo"}, "edited": false, "score": 0, "creation_date": 1577903988, "post_id": 59548910, "comment_id": 105278790, "body": "I upgraded to <code>djangorestframework==3.11.0</code> but I received the same error. I updated my question adding the dict (data) that I receive from the DRF Api view"}], "answers": [{"comments": [{"owner": {"reputation": 497, "user_id": 6796652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa9a7592fcb19f38ca088a2cd811b57f?s=128&d=identicon&r=PG&f=1", "display_name": "Manuel Carrero", "link": "https://stackoverflow.com/users/6796652/manuel-carrero"}, "edited": false, "score": 0, "creation_date": 1578763999, "post_id": 59635388, "comment_id": 105548506, "body": "I tried with your answer but unfortunately I got the same result. I can&#39;t use just <code>required=True</code> because that validation does not force you to send the field if it is optional. At the end, I think that according with your answer, drf validators documentation needs an updated related with that error."}], "tags": [], "owner": {"reputation": 205, "user_id": 5086426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b843a04cf70ba61acc8236869cd1c3a?s=128&d=identicon&r=PG&f=1", "display_name": "Charlotte Mays", "link": "https://stackoverflow.com/users/5086426/charlotte-mays"}, "is_accepted": false, "score": 4, "last_activity_date": 1578427632, "creation_date": 1578427632, "answer_id": 59635388, "question_id": 59548910, "link": "https://stackoverflow.com/questions/59548910/error-too-many-values-to-unpack-expected-2-when-raise-error-with-serializers/59635388#59635388", "title": "Error: too many values to unpack (expected 2) when raise error with serializers.ValidationError", "body": "<p>The reason this happens is that <code>to_internal_value</code> collects all the validation errors and passes them up as a dictionary, so that the resulting <code>400</code> response can include all the errors that were found rather than just the first one it hits. This should work:</p>\n\n<pre><code>def to_internal_value(self, data):\n    missing = []\n    for k in ['comments']:\n        try:\n            if data[k] == '':\n                missing.append(k)\n        except Exception as e:\n            missing.append(k)\n        if len(missing):\n            raise serializers.ValidationError(\n                {\"The following fields are required\": missing}\n            )\n    return data\n</code></pre>\n\n<p>That said, if all you're doing is validating that something is present, I'd suggest declaring <code>required=True</code> on the field in your serializer instead, and then DRF will do this check for you.</p>\n"}, {"comments": [{"owner": {"reputation": 1078, "user_id": 4839355, "user_type": "registered", "profile_image": "https://graph.facebook.com/1310715/picture?type=large", "display_name": "madmanick", "link": "https://stackoverflow.com/users/4839355/madmanick"}, "edited": false, "score": 0, "creation_date": 1610412105, "post_id": 65502252, "comment_id": 116119605, "body": "This answer is absolutely correct. After fixing the data type going into ValidationError(dict) my issue was solved."}], "tags": [], "owner": {"reputation": 21, "user_id": 14911148, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-eLrmwK4zxPQ/AAAAAAAAAAI/AAAAAAAAAAA/AMZuucnbUUKxS3_I1EgAVYqtwaTYfdmdkA/s96-c/photo.jpg?sz=128", "display_name": "VsM", "link": "https://stackoverflow.com/users/14911148/vsm"}, "is_accepted": false, "score": 2, "last_activity_date": 1609304498, "creation_date": 1609304498, "answer_id": 65502252, "question_id": 59548910, "link": "https://stackoverflow.com/questions/59548910/error-too-many-values-to-unpack-expected-2-when-raise-error-with-serializers/65502252#65502252", "title": "Error: too many values to unpack (expected 2) when raise error with serializers.ValidationError", "body": "<p>The reason is that <code>ValidationError</code> raised inside <code>run_validation</code> should be created with dict, for example:</p>\n<pre><code>ValidationError(','.join(missing): &quot;These field are required&quot;)\n</code></pre>\n"}], "owner": {"reputation": 497, "user_id": 6796652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa9a7592fcb19f38ca088a2cd811b57f?s=128&d=identicon&r=PG&f=1", "display_name": "Manuel Carrero", "link": "https://stackoverflow.com/users/6796652/manuel-carrero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 839, "favorite_count": 1, "answer_count": 2, "score": 5, "last_activity_date": 1609304498, "creation_date": 1577831947, "last_edit_date": 1578705634, "question_id": 59548910, "link": "https://stackoverflow.com/questions/59548910/error-too-many-values-to-unpack-expected-2-when-raise-error-with-serializers", "title": "Error: too many values to unpack (expected 2) when raise error with serializers.ValidationError", "body": "<p>I'm trying to validate empty fields in an endpoint by overwriting <code>to_internal_value</code> function and displaying an error message with <a href=\"https://www.django-rest-framework.org/api-guide/validators/#writing-custom-validators\" rel=\"noreferrer\">ValidationError</a>, very similar as the following <a href=\"https://stackoverflow.com/a/46071064/6796652\">answer</a>:</p>\n\n<p>serializer.py</p>\n\n<pre><code>def to_internal_value(self, data):\n    missing = []\n    for k in ['comments']:\n        try:\n            if data[k] == '':\n                missing.append(k)\n        except Exception as e:\n            missing.append(k)\n        if len(missing):\n            raise serializers.ValidationError(\"The following fields are required: %s\" % ','.join(missing))\n    return data\n</code></pre>\n\n<p>The problem is that I get: <code>Error: too many values to unpack (expected 2)</code> when <code>raise serializers.ValidationError</code> instruction is executed and <code>data</code> is comming with comments field empty (''):</p>\n\n<pre><code>(Pdb) data\n&lt;QueryDict: {'csrfmiddlewaretoken': ['&lt;csrfmiddlewaretoken&gt;'], 'comments': [''], 'user': ['']}&gt;\n</code></pre>\n\n<p>Even testing with a simple string:</p>\n\n<p><code>raise serializers.ValidationError(\"The following fields are required: comments\")</code></p>\n\n<p>I receive the same error. In the python console, raise throw the error:</p>\n\n<pre><code>&gt;&gt;&gt; from rest_framework.serializers import ValidationError\n&gt;&gt;&gt; from rest_framework import serializers\n&gt;&gt;&gt; data={'comments': [''], 'user': ['']}\n&gt;&gt;&gt; missing=[]\n&gt;&gt;&gt; missing.append('comments')\n&gt;&gt;&gt; raise serializers.ValidationError(\"The following fields are required: %s\" % ','.join(missing))\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nrest_framework.exceptions.ValidationError: [ErrorDetail(string='The following fields are required: comments', code='invalid')]\n</code></pre>\n\n<p>Instead of <code>serializers.ValidationError()</code> I had to use <code>ValueError()</code> and It works good, but I guess that it's not the suggested way. </p>\n\n<p><strong>Edit</strong>\nI was using:</p>\n\n<pre><code>Django==2.2.4\ndjangorestframework==3.10.3\n</code></pre>\n\n<p>Then I upgraded to:</p>\n\n<pre><code>Django==2.2.9\ndjangorestframework==3.11.0\n</code></pre>\n\n<p>With the same results.</p>\n"}, {"tags": ["python", "python-3.x", "error-handling"], "comments": [{"owner": {"reputation": 46136, "user_id": 3890632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNkgF.png?s=128&g=1", "display_name": "khelwood", "link": "https://stackoverflow.com/users/3890632/khelwood"}, "edited": false, "score": 4, "creation_date": 1577831912, "post_id": 59548891, "comment_id": 105266859, "body": "Calling <code>pick_a_number</code> recursively does not alter the value of the variable <code>user_number</code>. You would be better off with a <code>while loop</code>. Recursion is not an appropriate way to approach this situation in Python. Also your function does not return anything."}, {"owner": {"reputation": 1380, "user_id": 3411556, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ff0dec229b9e82a5a37420bdbcef6266?s=128&d=identicon&r=PG&f=1", "display_name": "alamoot", "link": "https://stackoverflow.com/users/3411556/alamoot"}, "edited": false, "score": 0, "creation_date": 1577831962, "post_id": 59548891, "comment_id": 105266869, "body": "Lines after the <code>except</code> run if the input is not an int, after the <code>pick_a_number()</code> call finishes"}, {"owner": {"reputation": 21232, "user_id": 550094, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7CAou.jpg?s=128&g=1", "display_name": "Thierry Lathuille", "link": "https://stackoverflow.com/users/550094/thierry-lathuille"}, "edited": false, "score": 0, "creation_date": 1577831980, "post_id": 59548891, "comment_id": 105266871, "body": "See <a href=\"https://stackoverflow.com/questions/23294658/asking-the-user-for-input-until-they-give-a-valid-response\" title=\"asking the user for input until they give a valid response\">stackoverflow.com/questions/23294658/&hellip;</a>"}, {"owner": {"reputation": 6690, "user_id": 4225229, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/2YfJM.jpg?s=128&g=1", "display_name": "JacobIRR", "link": "https://stackoverflow.com/users/4225229/jacobirr"}, "edited": false, "score": 3, "creation_date": 1577832091, "post_id": 59548891, "comment_id": 105266888, "body": "The answer to &quot;Why does my code do X?&quot; is almost always: Add <code>print()</code> statements everywhere until it becomes clear."}, {"owner": {"reputation": 137098, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1577833006, "post_id": 59548891, "comment_id": 105267056, "body": "It has a section specifically about why to avoid the recursive approach you are attempting."}, {"owner": {"reputation": 4722, "user_id": 1170207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b71f9d5ae0b1574cbd07efb7ae926f8?s=128&d=identicon&r=PG", "display_name": "Jan Christoph Terasa", "link": "https://stackoverflow.com/users/1170207/jan-christoph-terasa"}, "edited": false, "score": 0, "creation_date": 1577839874, "post_id": 59548891, "comment_id": 105267850, "body": "You could also add a <code>return</code> to your <code>except</code> block, prohibiting further execution after calling the function again recursively."}], "answers": [{"comments": [{"owner": {"reputation": 2602, "user_id": 5565170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d110c1241538fcf7c1fd6b6ebfa6153f?s=128&d=identicon&r=PG&f=1", "display_name": "Stidgeon", "link": "https://stackoverflow.com/users/5565170/stidgeon"}, "edited": false, "score": 0, "creation_date": 1577832727, "post_id": 59548936, "comment_id": 105267014, "body": "I see what you&#39;re getting at here, but what I don&#39;t understand is why the error doesn&#39;t happen until later. When &#39;f&#39; is run through the function, it hits the exception and calls the function again, which then completes a few more rounds. It&#39;s only after the &#39;successful&#39; entry that the error gets thrown."}, {"owner": {"reputation": 6690, "user_id": 4225229, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/2YfJM.jpg?s=128&g=1", "display_name": "JacobIRR", "link": "https://stackoverflow.com/users/4225229/jacobirr"}, "reply_to_user": {"reputation": 2602, "user_id": 5565170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d110c1241538fcf7c1fd6b6ebfa6153f?s=128&d=identicon&r=PG&f=1", "display_name": "Stidgeon", "link": "https://stackoverflow.com/users/5565170/stidgeon"}, "edited": false, "score": 1, "creation_date": 1577832939, "post_id": 59548936, "comment_id": 105267045, "body": "Only in the success case does the recursive stack fully &quot;unwind&quot;. Add a print statement in every block so you know what is happening. Recursion is best understood visually. I can delete my answer since I mostly just wanted to show you the debugging technique I mentioned in my comment."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "reply_to_user": {"reputation": 2602, "user_id": 5565170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d110c1241538fcf7c1fd6b6ebfa6153f?s=128&d=identicon&r=PG&f=1", "display_name": "Stidgeon", "link": "https://stackoverflow.com/users/5565170/stidgeon"}, "edited": false, "score": 2, "creation_date": 1577833856, "post_id": 59548936, "comment_id": 105267155, "body": "@Stidgeon, ...the thing to keep in mind is that when you call something, that&#39;s not a &quot;goto&quot;, it&#39;s a <i>function call</i>; when the function returns, the code picks back up at the place things were at before the call was made. (The stack is a detail of how storage of local variables for different levels of the call tree is traditionally stored, along with parameters and return values)."}], "tags": [], "owner": {"reputation": 6690, "user_id": 4225229, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/2YfJM.jpg?s=128&g=1", "display_name": "JacobIRR", "link": "https://stackoverflow.com/users/4225229/jacobirr"}, "is_accepted": true, "score": 2, "last_activity_date": 1577832315, "creation_date": 1577832315, "answer_id": 59548936, "question_id": 59548891, "link": "https://stackoverflow.com/questions/59548891/why-does-this-code-throw-an-error-after-repeated-function-calls/59548936#59548936", "title": "Why does this code throw an error after repeated function calls?", "body": "<p>If you trap the exception you can print your vars to see what's wrong:</p>\n\n<pre><code>&gt;&gt;&gt; def pick_a_number():\n...     user_number = input(\"Pick a number from 5 to 10, inclusive. \")\n...     try:\n...         user_number = int(user_number)\n...     except:\n...         print(\"Not a valid entry. Try again. \")\n...         pick_a_number()\n...     try:\n...         if 5 &lt;= user_number &lt;= 10:\n...             print(\"You picked \" + str(user_number))\n...         else:\n...             print(\"Number out of range. Try again.\")\n...             pick_a_number()\n...     except:\n...         print(\"@@ user_number during failure is : {}\".format(user_number))\n...         print(\"@@ type(user_number) during failure is : {}\".format(type(user_number)))\n...\n&gt;&gt;&gt; pick_a_number()\nPick a number from 5 to 10, inclusive. 3\nNumber out of range. Try again.\nPick a number from 5 to 10, inclusive. 2\nNumber out of range. Try again.\nPick a number from 5 to 10, inclusive. f\nNot a valid entry. Try again.\nPick a number from 5 to 10, inclusive. 3\nNumber out of range. Try again.\nPick a number from 5 to 10, inclusive. 2\nNumber out of range. Try again.\nPick a number from 5 to 10, inclusive. 5\nYou picked 5\n@@ user_number during failure is : f\n@@ type(user_number) during failure is : &lt;class 'str'&gt;\n</code></pre>\n"}], "owner": {"reputation": 2602, "user_id": 5565170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d110c1241538fcf7c1fd6b6ebfa6153f?s=128&d=identicon&r=PG&f=1", "display_name": "Stidgeon", "link": "https://stackoverflow.com/users/5565170/stidgeon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "closed_date": 1577832644, "accepted_answer_id": 59548936, "answer_count": 1, "score": 0, "last_activity_date": 1577838870, "creation_date": 1577831767, "last_edit_date": 1577838870, "question_id": 59548891, "link": "https://stackoverflow.com/questions/59548891/why-does-this-code-throw-an-error-after-repeated-function-calls", "closed_reason": "Duplicate", "title": "Why does this code throw an error after repeated function calls?", "body": "<p>I have a piece of code to ask a user for a number within a certain range. I know what works, in part from looking at questions like this: <a href=\"https://stackoverflow.com/questions/19821273/limiting-user-input-to-a-range-in-python\">Limiting user input to a range in Python</a></p>\n\n<p>In playing with it, though, I made the function below, which works in all cases except when there's text entered at any point prior to a correct entry. For example, inputting <code>3, 2, f, 3, 2, 5</code> produces the following:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>TypeError: '&lt;=' not supported between instances of 'int' and 'str'\n</code></pre>\n\n<p>In all other cases the code works.</p>\n\n<p>Code:</p>\n\n<pre><code>def pick_a_number():\n    user_number = input(\"Pick a number from 5 to 10, inclusive. \")\n\n    try:\n        user_number = int(user_number)\n    except:\n        print(\"Not a valid entry. Try again. \")\n        pick_a_number()\n\n    if 5 &lt;= user_number &lt;= 10:\n        print(\"You picked \" + str(user_number))\n    else:\n        print(\"Number out of range. Try again.\")\n        pick_a_number()\n\npick_a_number()\n</code></pre>\n\n<p>Why does the code fail the way that it does? I think it's something to do with the repeated calls to the function within the function, but I'd like to understand what's happening.</p>\n"}, {"tags": ["python", "kivy", "tabular"], "comments": [{"owner": {"reputation": 20381, "user_id": 7254633, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XCPaMN6qzA0/AAAAAAAAAAI/AAAAAAAAADs/o9igiVGFyK0/photo.jpg?sz=128", "display_name": "John Anderson", "link": "https://stackoverflow.com/users/7254633/john-anderson"}, "edited": false, "score": 0, "creation_date": 1577831769, "post_id": 59548862, "comment_id": 105266826, "body": "Your information about <code>Popup</code> is wrong. You can put anything in a <code>Screen</code> or <code>Popup</code>"}, {"owner": {"reputation": 181, "user_id": 7944165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd52b803f3dd6f806ba6f023283faafa?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/7944165/john-doe"}, "reply_to_user": {"reputation": 20381, "user_id": 7254633, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XCPaMN6qzA0/AAAAAAAAAAI/AAAAAAAAADs/o9igiVGFyK0/photo.jpg?sz=128", "display_name": "John Anderson", "link": "https://stackoverflow.com/users/7254633/john-anderson"}, "edited": false, "score": 0, "creation_date": 1577832075, "post_id": 59548862, "comment_id": 105266885, "body": "@JohnAnderson Sorry I didn&#39;t write that part very clearly. I meant to say: the tutorials I have seen only show how to write on a Screen or Pop-up using label, which only seems to print text, not tables. I haven&#39;t seen how to add any other things to Screen or Popup"}, {"owner": {"reputation": 20381, "user_id": 7254633, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XCPaMN6qzA0/AAAAAAAAAAI/AAAAAAAAADs/o9igiVGFyK0/photo.jpg?sz=128", "display_name": "John Anderson", "link": "https://stackoverflow.com/users/7254633/john-anderson"}, "edited": false, "score": 0, "creation_date": 1577832166, "post_id": 59548862, "comment_id": 105266900, "body": "Doesn&#39;t <code>tabulate</code> just print text?"}, {"owner": {"reputation": 181, "user_id": 7944165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd52b803f3dd6f806ba6f023283faafa?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/7944165/john-doe"}, "reply_to_user": {"reputation": 20381, "user_id": 7254633, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XCPaMN6qzA0/AAAAAAAAAAI/AAAAAAAAADs/o9igiVGFyK0/photo.jpg?sz=128", "display_name": "John Anderson", "link": "https://stackoverflow.com/users/7254633/john-anderson"}, "edited": false, "score": 0, "creation_date": 1577832567, "post_id": 59548862, "comment_id": 105266981, "body": "@JohnAnderson I edited my question to show what I tried. I have imported tabulate in the python file, but I get an error message which says <code>NameError: name &#39;tabulate&#39; is not defined</code>."}, {"owner": {"reputation": 20381, "user_id": 7254633, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XCPaMN6qzA0/AAAAAAAAAAI/AAAAAAAAADs/o9igiVGFyK0/photo.jpg?sz=128", "display_name": "John Anderson", "link": "https://stackoverflow.com/users/7254633/john-anderson"}, "edited": false, "score": 1, "creation_date": 1577833115, "post_id": 59548862, "comment_id": 105267070, "body": "At the start of your <code>kv</code> file, add the line <code>#:import tabulate tabulate.tabulate</code>."}, {"owner": {"reputation": 20381, "user_id": 7254633, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XCPaMN6qzA0/AAAAAAAAAAI/AAAAAAAAADs/o9igiVGFyK0/photo.jpg?sz=128", "display_name": "John Anderson", "link": "https://stackoverflow.com/users/7254633/john-anderson"}, "edited": false, "score": 0, "creation_date": 1577833484, "post_id": 59548862, "comment_id": 105267110, "body": "And you will likely want to use a mono-space font to get the tables to look OK."}, {"owner": {"reputation": 181, "user_id": 7944165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd52b803f3dd6f806ba6f023283faafa?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/7944165/john-doe"}, "reply_to_user": {"reputation": 20381, "user_id": 7254633, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XCPaMN6qzA0/AAAAAAAAAAI/AAAAAAAAADs/o9igiVGFyK0/photo.jpg?sz=128", "display_name": "John Anderson", "link": "https://stackoverflow.com/users/7254633/john-anderson"}, "edited": false, "score": 0, "creation_date": 1577834371, "post_id": 59548862, "comment_id": 105267236, "body": "@JohnAnderson Great, that seems to work well, thanks so much! I have two further questions. (You can answer it in the answers so I can accept your answer): 1) How can I change the font to this mono-space font? And 2) I currently have it written in such a way that the table I want to print must be written in kivy, but when I want to use the program, the tabular data will be coming from the logic in the code. How can I get a variable from the python file to be printed in the kivy Label?"}], "answers": [{"tags": [], "owner": {"reputation": 20381, "user_id": 7254633, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XCPaMN6qzA0/AAAAAAAAAAI/AAAAAAAAADs/o9igiVGFyK0/photo.jpg?sz=128", "display_name": "John Anderson", "link": "https://stackoverflow.com/users/7254633/john-anderson"}, "is_accepted": true, "score": 2, "last_activity_date": 1577836165, "creation_date": 1577836165, "answer_id": 59549182, "question_id": 59548862, "link": "https://stackoverflow.com/questions/59548862/can-you-print-tables-on-a-popup-window-or-on-a-screen-in-kivy-python/59549182#59549182", "title": "Can you print tables on a popup window or on a screen in kivy (python)", "body": "<p>You can access the <code>Label</code> using <code>ids</code> that are set in the <code>kv</code> file. Also, if you access <code>tabulate</code> outside of the <code>kv</code> file, you no longer need that <code>import</code> inside the <code>kv</code> file. Here is a modified <code>kv</code> file that adds an <code>id</code> for the <code>Label</code> (and also adds a <code>Button</code> to trigger the table build):</p>\n\n<pre><code>WindowManager:\n    Screen1:\n\n&lt;Screen1&gt;\n    name: 'screen1'\n\n    Label:\n        id: table    # this is the id\n        font_name: 'DejaVuSansMono'\n        pos_hint: {'center_x':0.5, 'top':0.9}\n        size_hint: None, None\n        size: self.texture_size\n\n    Button:\n        text: 'Make Table'\n        pos_hint: {'center_x':0.5, 'y':0.1}\n        size_hint: None, None\n        size: self.texture_size\n        on_release: root.make_table()\n</code></pre>\n\n<p>The above code also assigns a mono-spaced font to the <code>Label</code>. I can't guarantee that your system will have that specific font. And then in your <code>Screen1</code> class, define the <code>make_table()</code> method:</p>\n\n<pre><code>class Screen1(Screen):\n    def make_table(self):\n        self.ids.table.text = tabulate([[1, 2, 3], [2, 4, 6]])\n</code></pre>\n"}], "owner": {"reputation": 181, "user_id": 7944165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd52b803f3dd6f806ba6f023283faafa?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/7944165/john-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 383, "favorite_count": 0, "accepted_answer_id": 59549182, "answer_count": 1, "score": 1, "last_activity_date": 1577836165, "creation_date": 1577831446, "last_edit_date": 1577832801, "question_id": 59548862, "link": "https://stackoverflow.com/questions/59548862/can-you-print-tables-on-a-popup-window-or-on-a-screen-in-kivy-python", "title": "Can you print tables on a popup window or on a screen in kivy (python)", "body": "<p>I have a program that scrapes information from a webpage and stores it in a list, then prints this using <code>tabulate.tabulate</code>. I am now trying to turn this program into a more usable GUI using kivy. However, the tutorials I have seen only show how to write on a Screen or Pop-up using <code>Label</code>, which only seems to print text, not tables. So I don't think I can print a table there (at least not using tabulate). </p>\n\n<p>So my question is, is what I am trying to do possible, and if so, how?</p>\n\n<p>Edit: What I have tried</p>\n\n<p>.kv file</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>WindowManager:\n    Screen1:\n\n&lt;Screen1&gt;\n    name: 'screen1'\n\n    Label:\n        text: tabulate([[1, 2, 3], [2, 4, 6]])\n</code></pre>\n\n<p>.py file</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from kivy.app import App\nfrom kivy.lang import Builder\nfrom kivy.uix.screenmanager import Screen, ScreenManager\nfrom tabulate import tabulate\n\nkv = Builder.load_file('my.kv')\n\n\nclass Screen1(Screen):\n    pass\n\n\nclass WindowManager(ScreenManager):\n    pass\n\n\nclass MyMainApp(App):\n    def build(self):\n        return kv\n\n\nif __name__ == '__main__':\n    MyMainApp().run()\n\n\n</code></pre>\n"}, {"tags": ["python", "exception", "bots", "discord.py"], "comments": [{"owner": {"reputation": 1092, "user_id": 1223946, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/GqtV3.png?s=128&g=1", "display_name": "Peter Moore", "link": "https://stackoverflow.com/users/1223946/peter-moore"}, "edited": false, "score": 0, "creation_date": 1577832975, "post_id": 59548853, "comment_id": 105267052, "body": "You should really add the code here instead of a png link. That way people can try out the snip."}], "answers": [{"tags": [], "owner": {"reputation": 2556, "user_id": 6191255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8492b3a307610a36b90f9862e1669167?s=128&d=identicon&r=PG", "display_name": "Harmon758", "link": "https://stackoverflow.com/users/6191255/harmon758"}, "is_accepted": true, "score": 1, "last_activity_date": 1577836572, "creation_date": 1577836572, "answer_id": 59549208, "question_id": 59548853, "link": "https://stackoverflow.com/questions/59548853/cant-catch-exception-for-an-invalid-image-url-in-discord-py/59549208#59549208", "title": "Can&#39;t catch exception for an invalid image URL in discord.py", "body": "<p>This is because you're including the closing quotation mark with <code>image_url[1:]</code>.<br>\nYou should use something like <code>image_url[1:-1]</code> instead.</p>\n\n<p>The reason your error handling isn't working is because setting the image URL isn't when it's erroring. discord.py itself doesn't check the URL. As the full traceback should have pointed out to you, this error is occurring when you attempt to send the embed. It's sent to Discord's API and the request responds with an error code when Discord attempts to use that URL.</p>\n\n<p>Also, you should try to avoid catching all exceptions rather than the specific exception that you're handling. Otherwise, you could mask other exceptions and make it more difficult to debug your code.<br>\nSee <a href=\"https://wiki.python.org/moin/HandlingExceptions\" rel=\"nofollow noreferrer\">https://wiki.python.org/moin/HandlingExceptions</a> and <a href=\"https://docs.python.org/3/tutorial/errors.html\" rel=\"nofollow noreferrer\">https://docs.python.org/3/tutorial/errors.html</a> for more details about avoiding the bad practice of this type of error handling.</p>\n"}], "owner": {"reputation": 3, "user_id": 12634159, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAmzdhDzkcvHuDsnO4C3sUR1GjLlCAVqnZyU7GC=k-s128", "display_name": "Cromme Dalesse", "link": "https://stackoverflow.com/users/12634159/cromme-dalesse"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 256, "favorite_count": 0, "accepted_answer_id": 59549208, "answer_count": 1, "score": 0, "last_activity_date": 1577862784, "creation_date": 1577831362, "last_edit_date": 1577862784, "question_id": 59548853, "link": "https://stackoverflow.com/questions/59548853/cant-catch-exception-for-an-invalid-image-url-in-discord-py", "title": "Can&#39;t catch exception for an invalid image URL in discord.py", "body": "<p>I have made an <code>embed_test</code> command in discord.py for my Discord bot, and I'm trying to make the bot say \"invalid url\" using a try ... except clause if the given image URL is invalid:</p>\n\n<p><a href=\"https://i.stack.imgur.com/78DNv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/78DNv.png\" alt=\"embed_test command\"></a></p>\n\n<pre class=\"lang-py prettyprint-override\"><code>@commands.command()\nasync def embed_test(sefl, ctx, *, image_url):\n\n    embed = discord.Embed(title = 'Very nice title', description = 'Interesting description', color = 0x00A900)\n\n    if (image_url[0], image_url[-1]) == ('\"', '\"'):\n\n        try: embed.set_image(url = image_url[1:])\n\n        except Exception: await ctx.send('invalid image url')\n\n    else: await ctx.send('please enter the url in \"quotation marks\"')\n\n    await ctx.send(embed = embed)\n</code></pre>\n\n<p>This works very well when the clause is not in an if ... else statement, but, as shown in the picture, I also want to make sure the user enters their URL in quotation marks. The problem is that when I run the command with an invalid URL in quotation marks, I get:</p>\n\n<pre><code>Command raised an exception: HTTPException: 400 BAD REQUEST (error code: 50035): Invalid Form Body\nIn embed.image.url: Not a well formed URL.\n</code></pre>\n\n<p>in my console even though I'm trying to catch the exception in my program.</p>\n"}, {"tags": ["python", "excel", "pandas", "function"], "comments": [{"owner": {"reputation": 3104, "user_id": 2558739, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/ygAg7.jpg?s=128&g=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/2558739/ben"}, "edited": false, "score": 0, "creation_date": 1577830701, "post_id": 59548785, "comment_id": 105266646, "body": "Are you getting an error message? What is it?"}, {"owner": {"reputation": 414, "user_id": 10816754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0gUNf.jpg?s=128&g=1", "display_name": "ahh_real_numbers", "link": "https://stackoverflow.com/users/10816754/ahh-real-numbers"}, "edited": false, "score": 0, "creation_date": 1577831231, "post_id": 59548785, "comment_id": 105266720, "body": "You&#39;re on your way. Next you&#39;ll probably want to feed the <code>file_name</code> and <code>sheet</code> variables into <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_excel.html\" rel=\"nofollow noreferrer\">pd.read_excel()</a>. Return the resulting DataFrame so you can do <code>df = process_data(&quot;Jan 10.xlsx&quot;, &quot;Seattle&quot;)</code>."}], "answers": [{"tags": [], "owner": {"reputation": 139, "user_id": 12000831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uht7a.jpg?s=128&g=1", "display_name": "Ayan Chowdhury", "link": "https://stackoverflow.com/users/12000831/ayan-chowdhury"}, "is_accepted": false, "score": 0, "last_activity_date": 1577835429, "last_edit_date": 1577835429, "creation_date": 1577832377, "answer_id": 59548941, "question_id": 59548785, "link": "https://stackoverflow.com/questions/59548785/python-function-to-import-filename-and-city-name/59548941#59548941", "title": "Python function to import filename and city name", "body": "<pre><code>pip install pandas # if pandas isn't installed \n\nImport pandas as pd #importing pandas \n\ndf_sheet = pd.read_excel('file_name', 'sheet_name) # creating dataframe \n</code></pre>\n\n<p>First parameter is for the file_name, and second parameter is for the\nSheet name from that excel file. Hope this helps.</p>\n\n<p>Here is the link for official Pandas <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_excel.html\" rel=\"nofollow noreferrer\">read_excel()</a></p>\n"}], "owner": {"reputation": 21, "user_id": 12633846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcab57cce567182128410f44abae403f?s=128&d=identicon&r=PG&f=1", "display_name": "user12633846", "link": "https://stackoverflow.com/users/12633846/user12633846"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 89, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1577835429, "creation_date": 1577830443, "question_id": 59548785, "link": "https://stackoverflow.com/questions/59548785/python-function-to-import-filename-and-city-name", "title": "Python function to import filename and city name", "body": "<p>Very new to python and trying my best to learn.  I understand the concept of functions and they don;t seem complicated but for some reason I have the worst time with them.</p>\n\n<p>I have an excel spreadsheet I need to open the file and read data in from a specific sheet w/in the file.</p>\n\n<p>I setup the function like so:</p>\n\n<pre><code>def process_data(file, city):\n    file_name =  \"../data/\" + file # path to file + file name\n    sheet = city # sheet name \n\n\nprocess_data(\"Jan 10.xlsx\", \"Seattle\")\n</code></pre>\n\n<p>but it doesn't work.  I ultimately want to read this into a panda dataframe so I can manipulate the data.  Can someone give a newbie a little guidance?</p>\n\n<p>All help is greatly appreciated....</p>\n"}, {"tags": ["python", "function"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1577830239, "post_id": 59548748, "comment_id": 105266566, "body": "Is the <code>return</code> statement really supposed to be inside the <code>for</code> loop? It will only process the first line of the file."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1577830280, "post_id": 59548748, "comment_id": 105266570, "body": "Also, <code>checking()</code> doesn&#39;t return anything. What is <code>return checking()</code> supposed to return?"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1577831516, "post_id": 59548748, "comment_id": 105266768, "body": "The given &quot;duplicate&quot; is a bit of overkill for this problem, but I hope it will resolve your problem, and several more you might have had."}], "answers": [{"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 1, "last_activity_date": 1577830195, "creation_date": 1577830195, "answer_id": 59548766, "question_id": 59548748, "link": "https://stackoverflow.com/questions/59548748/name-is-not-identified-when-returning-into-a-function-python/59548766#59548766", "title": "Name is not identified when returning into a function python", "body": "<p><code>word</code> is a local variable in <code>Mutiple()</code>. If you want to use it in <code>checking()</code>, you should pass it as a parameter.</p>\n\n<pre><code>def checking(word):\n\n  response2 = requests.get('https://www.nitrxgen.net/md5db/' + str(word[1])).text  \n\n  if response2:\n   print(Fore.GREEN + \"[\" + Fore.WHITE + strftime(\"%H:%M:%S\")+ Fore.GREEN + \"]\" + Fore.WHITE + \" |\" + Fore.GREEN + \" \u25a0 \" + Fore.WHITE +\n    \"Hash Found: \" + Fore.GREEN + response2 + Style.RESET_ALL + \"\\n\", end='')\n\n  else:\n   print(Fore.RED + \"[\" + Fore.WHITE + strftime(\"%H:%M:%S\")+ Fore.RED + \"]\" + Fore.WHITE + \" |\" + Fore.RED + \" \u25a0 \" + Fore.WHITE +\n    \"Hash Not Found\" + Style.RESET_ALL + \"\\n\", end='')\n\ndef Mutiple():\n\n  Tk().withdraw() \n  filename = askopenfilename(title='Choose a File', filetypes=[(\"Text Files\", \"*.txt\")])\n  clear = lambda: os.system('cls')\n  clear() \n  with open(filename, \"r\", encoding=\"utf8\") as file:  \n    for line in file:\n        word = line.strip()\n        word = word.split(\":\")\n        return checking(word)\n</code></pre>\n"}], "owner": {"reputation": 165, "user_id": 11996332, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-rNNrcwo_ucM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reGw3MypjQob_VazKa-rRacd83vhA/photo.jpg?sz=128", "display_name": "VRX", "link": "https://stackoverflow.com/users/11996332/vrx"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "closed_date": 1577831471, "accepted_answer_id": 59548766, "answer_count": 1, "score": -3, "last_activity_date": 1577830195, "creation_date": 1577829977, "last_edit_date": 1577830178, "question_id": 59548748, "link": "https://stackoverflow.com/questions/59548748/name-is-not-identified-when-returning-into-a-function-python", "closed_reason": "Duplicate", "title": "Name is not identified when returning into a function python", "body": "<p>This is my code: </p>\n\n<pre><code>def checking():\n\n  response2 = requests.get('https://www.nitrxgen.net/md5db/' + str(word[1])).text  \n\n  if response2:\n   print(Fore.GREEN + \"[\" + Fore.WHITE + strftime(\"%H:%M:%S\")+ Fore.GREEN + \"]\" + Fore.WHITE + \" |\" + Fore.GREEN + \" \u25a0 \" + Fore.WHITE +\n    \"Hash Found: \" + Fore.GREEN + response2 + Style.RESET_ALL + \"\\n\", end='')\n\n  else:\n   print(Fore.RED + \"[\" + Fore.WHITE + strftime(\"%H:%M:%S\")+ Fore.RED + \"]\" + Fore.WHITE + \" |\" + Fore.RED + \" \u25a0 \" + Fore.WHITE +\n    \"Hash Not Found\" + Style.RESET_ALL + \"\\n\", end='')\n\ndef Mutiple():\n\n  Tk().withdraw() \n  filename = askopenfilename(title='Choose a File', filetypes=[(\"Text Files\", \"*.txt\")])\n  clear = lambda: os.system('cls')\n  clear() \n  with open(filename, \"r\", encoding=\"utf8\") as file:  \n    for line in file:\n        word = line.strip()\n        word = word.split(\":\")\n        return checking()\n</code></pre>\n\n<p>And the error code is</p>\n\n<pre><code>Traceback (most recent call last):   \n  File \"C:\\Users\\tosun\\OneDrive\\Desktop\\Hashkiller\\Hashkiller.py\", line 111, in &lt;module&gt;\n    Mutiple()   \n  File \"C:\\Users\\tosun\\OneDrive\\Desktop\\Hashkiller\\Hashkiller.py\", line 40, in Mutiple\n    return checking()   \n  File \"C:\\Users\\tosun\\OneDrive\\Desktop\\Hashkiller\\Hashkiller.py\", line 18,  in checking\n    response2 = requests.get('https://www.nitrxgen.net/md5db/' + str(word[1])).text \nNameError: name 'word' is not defined\n</code></pre>\n"}, {"tags": ["javascript", "python", "react-native", "tcp", "tcpclient"], "owner": {"reputation": 149, "user_id": 10325843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07d42d907ed3260dfab991ba08c8f079?s=128&d=identicon&r=PG&f=1", "display_name": "imcze", "link": "https://stackoverflow.com/users/10325843/imcze"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 291, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1578753343, "creation_date": 1577829515, "question_id": 59548712, "link": "https://stackoverflow.com/questions/59548712/read-messages-from-client-tcp-ip-in-react-native", "title": "Read messages from client TCP IP in react-native", "body": "<p>I am facing one weird problem with my application I am able to make connection as a client to the TCP IP this is the code that I am using in Javascript:</p>\n\n<pre><code>const cn = TcpSocket.createConnection({\n  port: 27015,\n  host: '192.168.0.10',\n  localAddress: '192.168.0.11',\n});\ncn.on('data', res =&gt; {\n  cn.write('\\x80\\x00\\x00');\n});\ncn.on('error', function(error) {\n  console.log('imce error: ', error);\n});\ncn.on('close', function() {\n  console.log('Connection closed!');\n});\n</code></pre>\n\n<p>but the problem appears when I receive message from server and for each message I should send back acknowledgment like this <strong>cn.write('\\x80\\x00\\x00');</strong> and it goes till somewhere and then I don't receive messages from server, while weird part is here I made two other scripts that works very good one in Python and one in PHP both of them have same logic meaning make connection and then write data as a client but here the only difference is that when I read data I read it with infinite loop you can see both examples, now I am wondering does it have any chance this <strong>cn.on('data', with callback here)</strong> in Javascript to make it like in both examples to store it in one variable everytime that has new message and then to run infinite loop also in Javascript.</p>\n\n<p>Python example:</p>\n\n<pre><code>sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\nserver_address = ('192.168.0.15', 27015)\nprint(sys.stderr, 'connecting to %s port %s' % server_address)\nsock.connect(server_address)\nfull_msg = ''\ntry:\n    # Send data\n    message = '\\x06\\x01\\x0C\\x19\\x40\\x49\\x07\\x56\\x04\\x00\\x00\\x00\\x00\\x04\\x00'\n    print(sys.stderr, 'sending amount \"%s\"' % message)\n    sock.sendall(message)\n\n    while True:\n            msg = sock.recv(1024)\n            if len(msg) &lt;= 0:\n                    break\n            full_msg += msg\n            ackmsg = '\\x80\\x00\\x00'\n            print(sys.stderr, 'sending ack \"%s\"' % message)\n            sock.sendall(ackmsg)\nfinally:\n    print(sys.stderr, 'closing socket')\nsock.close()\n</code></pre>\n\n<p>PHP example:</p>\n\n<pre><code>$socket = socket_create(AF_INET, SOCK_STREAM, SOL_TCP);\n\nif(!is_resource($socket)) onSocketFailure(\"Failed to create socket\");\n\nsocket_connect($socket, \"192.168.0.10\", 27015) or onSocketFailure(\"Failed to connect to chat.stackoverflow.com:6667\", $socket);\n\nsocket_write($socket, \"\\x06\\x01\\x0C\\x19\\x40\\x49\\x07\\x56\\x04\\x00\\x00\\x00\\x00\\x04\\x00\");\n\nwhile(true) {\n    $line = socket_read($socket, 1024);\n    error_log(strlen($line));\n    if(strlen($line) &lt;= 0) {\n        break;\n    }\n    error_log($line);\n    socket_write($socket, \"\\x80\\x00\\x00\");\n\n}\n\nsocket_close($socket);\n</code></pre>\n"}, {"tags": ["python", "selenium", "selenium-webdriver", "css-selectors", "webdriver"], "comments": [{"owner": {"reputation": 72046, "user_id": 10035985, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1WgJ_2yA-78/AAAAAAAAAAI/AAAAAAAAAOA/0CBOlYqYe7M/photo.jpg?sz=128", "display_name": "Andrej Kesely", "link": "https://stackoverflow.com/users/10035985/andrej-kesely"}, "edited": false, "score": 1, "creation_date": 1577830543, "post_id": 59548700, "comment_id": 105266619, "body": "To locate first <code>&lt;a&gt;</code> tag you can use <code>:nth-of-type</code> instead: <code>&#39;div#iopoph a:nth-of-type(1)&#39;</code>"}, {"owner": {"reputation": 47898, "user_id": 966023, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/917fcb4327159076f752c0c3c3fddfbb?s=128&d=identicon&r=PG", "display_name": "pguardiario", "link": "https://stackoverflow.com/users/966023/pguardiario"}, "edited": false, "score": 0, "creation_date": 1577835736, "post_id": 59548700, "comment_id": 105267401, "body": "The first a is the third child, so a:nth-child(3)"}], "answers": [{"tags": [], "owner": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "is_accepted": false, "score": 1, "last_activity_date": 1577964133, "creation_date": 1577964133, "answer_id": 59562470, "question_id": 59548700, "link": "https://stackoverflow.com/questions/59548700/how-to-use-the-cssselector-nth-childn-to-locate-element-in-python-selenium/59562470#59562470", "title": "How to use the cssSelector :nth-child(n) to locate element in Python Selenium", "body": "<p>You were close but you need to consider a couple of things:</p>\n\n<ul>\n<li><p><code>div#iopoph</code> will identify the parent node, i.e.</p>\n\n<pre><code>&lt;div id=\"iopop\" style=\"\"&gt;\n</code></pre></li>\n<li><p>So you need to traverse to it's grand child node:</p>\n\n<pre><code>&lt;div id=\"iopoph\" class=\"animated zoomIn\" style=\" \"&gt;\n</code></pre></li>\n<li><p>To locate it's child elements you can use the following <a href=\"https://stackoverflow.com/questions/48369043/official-locator-strategies-for-the-webdriver/48376890#48376890\">Locator Strategies</a>:</p>\n\n<ul>\n<li><p>Locating <code>&lt;a iid=\"128-73\" class=\"itemsub lowend\" price=\"2.99\" name=\"FALAFEL (6)\" style=\"\"&gt;</code>:</p>\n\n<pre><code>div.animated.zoomIn#iopoph a:nth-of-type(1)\n</code></pre></li>\n<li><p>Locating <code>&lt;a iid=\"128-74\" class=\"itemsub lowend\" price=\"4.99\" name=\"FALAFEL (12)\" style=\"\"&gt;</code>:</p>\n\n<pre><code>div.animated.zoomIn#iopoph a:nth-of-type(2)\n</code></pre></li>\n</ul></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 49, "user_id": 10394581, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-EY-duUULeVs/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DXwhiLBCdGjHABrGP2ANSYEPZxdqQ/mo/photo.jpg?sz=128", "display_name": "Oleksiy Kyrylenko", "link": "https://stackoverflow.com/users/10394581/oleksiy-kyrylenko"}, "is_accepted": false, "score": 1, "last_activity_date": 1577978862, "creation_date": 1577978862, "answer_id": 59565859, "question_id": 59548700, "link": "https://stackoverflow.com/questions/59548700/how-to-use-the-cssselector-nth-childn-to-locate-element-in-python-selenium/59565859#59565859", "title": "How to use the cssSelector :nth-child(n) to locate element in Python Selenium", "body": "<p>you can use this locator a:nth-of-type(2)</p>\n"}, {"tags": [], "owner": {"reputation": 1250, "user_id": 4295595, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zBPNiEhjJA8/AAAAAAAAAAI/AAAAAAAAAGQ/UG2qTkgD0ME/photo.jpg?sz=128", "display_name": "Avinash Pande", "link": "https://stackoverflow.com/users/4295595/avinash-pande"}, "is_accepted": false, "score": 1, "last_activity_date": 1602505742, "creation_date": 1602505742, "answer_id": 64317936, "question_id": 59548700, "link": "https://stackoverflow.com/questions/59548700/how-to-use-the-cssselector-nth-childn-to-locate-element-in-python-selenium/64317936#64317936", "title": "How to use the cssSelector :nth-child(n) to locate element in Python Selenium", "body": "<p>In your case example-<br>\n<code>div#iopop a:nth-child(3) -&gt; returns first a &lt;anchor&gt; tag i.e. &lt;a iid=&quot;128-73&quot;</code></p>\n<p><code>div#iopop a:nth-child(4) -&gt; returns second a &lt;anchor&gt; tag i.e. &lt;a iid=&quot;128-74&quot; </code></p>\n<p><strong>nth-child(index):</strong><br>\nnth-child(index) method is used to select/get specified index child element.  But the specified index element should be same as mentioned before colon ( : ). <br><br> In your case-<br>\n<code>div#iopoph a:nth-child(2)</code>-&gt; It points to tag  and it is not same as the tag you mentioned before : (colon). so it returns NOSUCHELEMENTEXCEPTION</p>\n"}], "owner": {"reputation": 1402, "user_id": 7984318, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4bdbe511507924dda59497c425c04c4b?s=128&d=identicon&r=PG&f=1", "display_name": "William", "link": "https://stackoverflow.com/users/7984318/william"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1604, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1602505742, "creation_date": 1577829367, "last_edit_date": 1577964075, "question_id": 59548700, "link": "https://stackoverflow.com/questions/59548700/how-to-use-the-cssselector-nth-childn-to-locate-element-in-python-selenium", "title": "How to use the cssSelector :nth-child(n) to locate element in Python Selenium", "body": "<p>I'm using Python Selenium to locate element by using nth-child(n).</p>\n\n<p>Below is my html code:</p>\n\n<pre><code>&lt;div id=\"iopop\" style=\"\"&gt;\n &lt;div style=\"\" class=\"\"&gt;\n  &lt;div id=\"iopoph\" class=\"animated zoomIn\" style=\" \"&gt;\n      &lt;span style=\"\" class=\"gs_hover\"&gt;&lt;/span&gt;\n      &lt;b class=\"in\"&gt;FALAFEL&lt;/b&gt;\n      &lt;a iid=\"128-73\" class=\"itemsub lowend\" price=\"2.99\" name=\"FALAFEL (6)\" style=\"\"&gt;\n          &lt;b class=\"in\"&gt;(6)&lt;/b&gt;\n          &lt;b class=\"is\"&gt;&lt;/b&gt;\n          &lt;b class=\"ip\"&gt;2.99&lt;/b&gt;\n          &lt;b class=\"iq\"&gt;&lt;/b&gt;&lt;/a&gt;\n      &lt;a iid=\"128-74\" class=\"itemsub lowend\" price=\"4.99\" name=\"FALAFEL (12)\" style=\"\"&gt;\n          &lt;b class=\"in\"&gt;(12)&lt;/b&gt;\n          &lt;b class=\"is\"&gt;&lt;/b&gt;\n          &lt;b class=\"ip\"&gt;4.99&lt;/b&gt;\n          &lt;b class=\"iq\"&gt;&lt;/b&gt;\n      &lt;/a&gt;\n      &lt;b class=\"is\"&gt;&lt;/b&gt;\n      &lt;b class=\"ip\"&gt;&lt;/b&gt;\n      &lt;b class=\"iq\"&gt;&lt;/b&gt;\n  &lt;/div&gt;\n &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Now I want to locate the first <strong>a tag</strong> by using nth-child(n) so I tried:</p>\n\n<pre><code>driver.find_element_by_css_selector('div#iopoph a:nth-child(2)').click()\n</code></pre>\n\n<p>But there is an error says:</p>\n\n<pre><code>NoSuchElementException: no such element: Unable to locate element: {\"method\":\"css selector\",\"selector\":\"div#iopoph a:nth-child(2)\"}\n(Session info: chrome=79.0.3945.88)\n</code></pre>\n\n<p>Any friend can help?</p>\n"}, {"tags": ["python", "web-scraping", "beautifulsoup"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1577829584, "post_id": 59548678, "comment_id": 105266466, "body": "<code>soup.findAll(&#39;script&#39;)</code>? Then loop through the results until you get to the one you want."}], "answers": [{"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 0, "last_activity_date": 1577829781, "creation_date": 1577829781, "answer_id": 59548735, "question_id": 59548678, "link": "https://stackoverflow.com/questions/59548678/how-to-scrape-script-tag-with-beautiful-soup-bs4-python/59548735#59548735", "title": "How to Scrape &lt;Script&gt; tag with Beautiful Soup BS4 (Python)", "body": "<p>Find all the <code>&lt;script&gt;</code> tags, then search them for the one that contains <code>ZPG.trackData.ecommerce</code>.</p>\n\n<pre><code>ecommerce = None\nfor item in soup.findAll('script'):\n    if 'ZPG.trackData.ecommerce' in item.string:\n        ecommerce = item.string\n        break\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 72046, "user_id": 10035985, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1WgJ_2yA-78/AAAAAAAAAAI/AAAAAAAAAOA/0CBOlYqYe7M/photo.jpg?sz=128", "display_name": "Andrej Kesely", "link": "https://stackoverflow.com/users/10035985/andrej-kesely"}, "is_accepted": false, "score": 0, "last_activity_date": 1577830025, "creation_date": 1577830025, "answer_id": 59548755, "question_id": 59548678, "link": "https://stackoverflow.com/questions/59548678/how-to-scrape-script-tag-with-beautiful-soup-bs4-python/59548755#59548755", "title": "How to Scrape &lt;Script&gt; tag with Beautiful Soup BS4 (Python)", "body": "<p>This example will locate the <code>&lt;script&gt;</code> tag and parse some data from it:</p>\n\n<pre><code>import re\nimport json\nimport requests\nfrom bs4 import BeautifulSoup\n\nurl = 'https://www.zoopla.co.uk/for-sale/details/53818653?search_identifier=7e57533214fc2402ba53dd6c14b624f8'\n\n# locate the tag\nsoup = BeautifulSoup(requests.get(url).content, 'html.parser')\nscript = soup.select_one('script:contains(\"ZPG.trackData.taxonomy\")')\n\n# parse some data from script\ndata1 = re.findall(r'ZPG\\.trackData\\.ecommerce = ({.*?});', script.text, flags=re.S)[0]\ndata1 = json.loads( re.sub(r'([^\"\\s]+):\\s', r'\"\\1\": ', data1) )\n\ndata2 = re.findall(r'ZPG\\.trackData\\.taxonomy = ({.*?});', script.text, flags=re.S)[0]\ndata2 = json.loads( re.sub(r'([^\"\\s]+):\\s', r'\"\\1\": ', data2) )\n\n# print the data\nprint(json.dumps(data1, indent=4))\nprint(json.dumps(data2, indent=4))\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>{\n    \"detail\": {\n        \"products\": [\n            {\n                \"brand\": \"Walton and Allen Estate Agents Ltd\",\n                \"category\": \"for-sale/resi/agent/pre-owned/gb\",\n                \"id\": 53818653,\n                \"name\": \"FS_Contact\",\n                \"price\": 1,\n                \"quantity\": 1,\n                \"variant\": \"standard\"\n            }\n        ]\n    }\n}\n{\n    \"signed_in_status\": \"signed out\",\n    \"acorn\": 44,\n    \"acorn_type\": 44,\n    \"area_name\": \"Aspley, Nottingham\",\n    \"beds_max\": 3,\n    \"beds_min\": 3,\n    \"branch_id\": \"43168\",\n    \"branch_logo_url\": \"https://st.zoocdn.com/zoopla_static_agent_logo_(586192).png\",\n    \"branch_name\": \"Walton &amp; Allen Estate Agents\",\n    \"brand_name\": \"Walton and Allen Estate Agents Ltd\",\n    \"chain_free\": false,\n    \"company_id\": \"21619\",\n    \"country_code\": \"gb\",\n    \"county_area_name\": \"Nottingham\",\n    \"currency_code\": \"GBP\",\n    \"display_address\": \"Melbourne Road, Aspley, Nottingham NG8\",\n    \"furnished_state\": \"\",\n    \"group_id\": \"\",\n    \"has_epc\": false,\n    \"has_floorplan\": true,\n    \"incode\": \"5HN\",\n    \"is_retirement_home\": false,\n    \"is_shared_ownership\": false,\n    \"listing_condition\": \"pre-owned\",\n    \"listing_id\": 53818653,\n    \"listing_status\": \"for_sale\",\n    \"listings_category\": \"residential\",\n    \"location\": \"Aspley\",\n    \"member_type\": \"agent\",\n    \"num_baths\": 1,\n    \"num_beds\": 3,\n    \"num_images\": 15,\n    \"num_recepts\": 1,\n    \"outcode\": \"NG8\",\n    \"post_town_name\": \"Nottingham\",\n    \"postal_area\": \"NG\",\n    \"price\": 150000,\n    \"price_actual\": 150000,\n    \"price_max\": 150000,\n    \"price_min\": 150000,\n    \"price_qualifier\": \"guide_price\",\n    \"property_highlight\": \"\",\n    \"property_type\": \"semi_detached\",\n    \"region_name\": \"East Midlands\",\n    \"section\": \"for-sale\",\n    \"size_sq_feet\": \"\",\n    \"tenure\": \"\",\n    \"zindex\": \"129806\"\n}\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 7180600, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8d7a57fd7fe5d41189392ddb284a1365?s=128&d=identicon&r=PG&f=1", "display_name": "hello11", "link": "https://stackoverflow.com/users/7180600/hello11"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 143, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1577955356, "creation_date": 1577829057, "last_edit_date": 1577955356, "question_id": 59548678, "link": "https://stackoverflow.com/questions/59548678/how-to-scrape-script-tag-with-beautiful-soup-bs4-python", "title": "How to Scrape &lt;Script&gt; tag with Beautiful Soup BS4 (Python)", "body": "<p>If you do View Page source on the below link;</p>\n\n<pre><code>https://www.zoopla.co.uk/for-sale/details/53818653?search_identifier=7e57533214fc2402ba53dd6c14b624f8\n</code></pre>\n\n<p>Line 89 has the tag <code>&lt;script&gt;</code> with information under it up to line 164. I am trying to extract this with beautiful soup but am unable to. \nI can successfully extract other tags like \"h2\"/\"Div\" etc using the below:</p>\n\n<p>From line 1,028 of the page source.</p>\n\n<pre><code>for item_name in soup.findAll('h2', {'class': 'ui-property-summary__address'}):\n     ad = item_name.get_text(strip=True)\"\n</code></pre>\n\n<p>Can you please advise how I can extract the Script tag from line 89? \nThanks </p>\n"}, {"tags": ["python", "model-view-controller"], "comments": [{"owner": {"reputation": 791, "user_id": 5233367, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/60dc3184f9d77e7d07bfa556739d55fc?s=128&d=identicon&r=PG&f=1", "display_name": "Brydenr", "link": "https://stackoverflow.com/users/5233367/brydenr"}, "edited": false, "score": 2, "creation_date": 1577828752, "post_id": 59548650, "comment_id": 105266310, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/4534438/typeerror-module-object-is-not-callable\">TypeError: &#39;module&#39; object is not callable</a>"}, {"owner": {"reputation": 46136, "user_id": 3890632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNkgF.png?s=128&g=1", "display_name": "khelwood", "link": "https://stackoverflow.com/users/3890632/khelwood"}, "edited": false, "score": 2, "creation_date": 1577828807, "post_id": 59548650, "comment_id": 105266319, "body": "If your class is in a file called <code>Card.py</code>, then <code>Card</code> is a module, and the <code>Card</code> class is inside it."}, {"owner": {"reputation": 33, "user_id": 6055170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58d0a31d7372ff150af5404218f465d1?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/6055170/steve"}, "reply_to_user": {"reputation": 46136, "user_id": 3890632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNkgF.png?s=128&g=1", "display_name": "khelwood", "link": "https://stackoverflow.com/users/3890632/khelwood"}, "edited": false, "score": 0, "creation_date": 1577829124, "post_id": 59548650, "comment_id": 105266374, "body": "@khelwood I am not that proficient in python, but what does that mean? How can I create my Card class in my Deck class? Or am I approaching this incorrectly?"}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 6055170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58d0a31d7372ff150af5404218f465d1?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/6055170/steve"}, "edited": false, "score": 0, "creation_date": 1577832610, "post_id": 59548722, "comment_id": 105266990, "body": "The specific solution to my issue is:  from Models.Card import Card, this is because the Card module is inside a folder named Models"}], "tags": [], "owner": {"reputation": 505, "user_id": 9651079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a90f3857376317dfbe5f27f72d417c6a?s=128&d=identicon&r=PG", "display_name": "SafeDev", "link": "https://stackoverflow.com/users/9651079/safedev"}, "is_accepted": true, "score": 2, "last_activity_date": 1577829636, "creation_date": 1577829636, "answer_id": 59548722, "question_id": 59548650, "link": "https://stackoverflow.com/questions/59548650/how-to-call-a-class-from-a-different-file/59548722#59548722", "title": "How to call a class from a different file?", "body": "<p><strong>Method 1</strong></p>\n\n<p>Here's how you would do it.</p>\n\n<pre><code>from Card import Card\n\nCard()\n</code></pre>\n\n<p>The first Card represents the Card.py file while the second Card represents the Card class.</p>\n\n<p><strong>Method 2</strong></p>\n\n<p>You can also just import the Card file and call the card class from there on after such as so:</p>\n\n<pre><code>import Card\n\nCard.Card()\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 6055170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58d0a31d7372ff150af5404218f465d1?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/6055170/steve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 59548722, "answer_count": 1, "score": 0, "last_activity_date": 1577839054, "creation_date": 1577828636, "last_edit_date": 1577839054, "question_id": 59548650, "link": "https://stackoverflow.com/questions/59548650/how-to-call-a-class-from-a-different-file", "title": "How to call a class from a different file?", "body": "<p>I am trying to create a Blackjack project in Python.</p>\n\n<p>I am trying to create my <code>Card.p</code>y object into my <code>Deck.py</code> object, but using:</p>\n\n<pre><code>from Models import Card\n\n\nclass Deck:\n    # Global Properties of Deck\n    __cards = []\n\n    def __init__(self):\n        self.__set_deck()\n\n    # Get Methods\n    def get_cards(self):\n        return self.__cards\n\n    # Set Methods\n    def __set_deck(self):\n        test = Card(\"Three\", \"Clubs\")\n        self.__cards.append(test)\n\n\nobj = Deck()\n</code></pre>\n\n<p>with:</p>\n\n<pre><code>class Card:\n    # Global Properties of Card\n    __rank = ''\n    __suit = ''\n\n    # Constructor\n    def __init__(self, rank, suit):\n        self.__set_rank(rank)\n        self.__set_suit(suit)\n\n    # Get Methods\n    def get_rank(self):\n        return self.__rank\n\n    def get_suit(self):\n        return self.__suit\n\n    # Set Methods\n    def __set_rank(self, rank):\n        self.__rank = rank\n\n    def __set_suit(self, suit):\n        self.__suit = suit\n</code></pre>\n\n<p>gives me a <code>TypeError: 'module' object is not callable</code> where I am creating the <code>Card</code> object.</p>\n\n<p>Any suggestions? I don't know where to start looking.</p>\n"}, {"tags": ["python", "arrays", "matrix", "input"], "comments": [{"owner": {"reputation": 983, "user_id": 289379, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PnUjF.jpg?s=128&g=1", "display_name": "patemotter", "link": "https://stackoverflow.com/users/289379/patemotter"}, "edited": false, "score": 0, "creation_date": 1577832454, "post_id": 59548643, "comment_id": 105266959, "body": "Do you have any code to show what you have tried? It&#39;s a bit difficult to parse your question."}], "answers": [{"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1577829386, "post_id": 59548693, "comment_id": 105266420, "body": "This will append the list with <code>n</code> to <code>lis</code>. You should check for <code>n</code> <i>before</i> appending."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1577829908, "post_id": 59548693, "comment_id": 105266510, "body": "I generally recommend a style like <code>while True: x = input(...); if x == &#39;n&#39;: break; lis.append(x.split(&#39;,&#39;))</code>. This way you don&#39;t need to duplicate the input and split code before the loop, and don&#39;t need to pop."}, {"owner": {"reputation": 1, "user_id": 12020943, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDfvVYjzBVoHUFA1D753BKhCFI_6eridk_RUFTY=k-s128", "display_name": "k20 fodil", "link": "https://stackoverflow.com/users/12020943/k20-fodil"}, "edited": false, "score": 0, "creation_date": 1577829956, "post_id": 59548693, "comment_id": 105266522, "body": "so the comment line means that if the user enter &#39;n&#39; the loop will stop and the list will be completed am less frustrated now,but for exmple if we ask for a number of rows first and then we enter couples(x,y) until the last row: is it abt the len(list) or somthing like that so that i must forget abt the axis idea and focus on performing a list methods ?"}, {"owner": {"reputation": 505, "user_id": 9651079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a90f3857376317dfbe5f27f72d417c6a?s=128&d=identicon&r=PG", "display_name": "SafeDev", "link": "https://stackoverflow.com/users/9651079/safedev"}, "edited": false, "score": 0, "creation_date": 1577830348, "post_id": 59548693, "comment_id": 105266587, "body": "If you wanted that implementation you would just change to a for loop and write something like <code>for i in range(number_of_rows)</code> and then the same thing in the while loop would be in the for loop. Only change is that <code>x = input(...)</code> statement would come before the <code>val = x.split(&#39;,&#39;)</code>"}], "tags": [], "owner": {"reputation": 505, "user_id": 9651079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a90f3857376317dfbe5f27f72d417c6a?s=128&d=identicon&r=PG", "display_name": "SafeDev", "link": "https://stackoverflow.com/users/9651079/safedev"}, "is_accepted": true, "score": 0, "last_activity_date": 1577830193, "last_edit_date": 1577830193, "creation_date": 1577829251, "answer_id": 59548693, "question_id": 59548643, "link": "https://stackoverflow.com/questions/59548643/matrix-couple-input-from-a-user/59548693#59548693", "title": "matrix couple input from a user", "body": "<p>You could use a while loop that asks for user input until enough inputs have been passed through.</p>\n\n<pre><code>x = input('Enter x and y values (Ex. x,y): ')\nlis, val = [], []\n\nwhile 'n' not in x:\n    val = x.split(',')\n    lis.append(val)\n    x = input('Enter x and y values (Ex. x,y): ') # stop loop by typing n\n\nprint(lis)\n</code></pre>\n\n<p>To end the loop just type 'n'.</p>\n"}], "owner": {"reputation": 1, "user_id": 12020943, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDfvVYjzBVoHUFA1D753BKhCFI_6eridk_RUFTY=k-s128", "display_name": "k20 fodil", "link": "https://stackoverflow.com/users/12020943/k20-fodil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 59548693, "answer_count": 1, "score": -1, "last_activity_date": 1577830193, "creation_date": 1577828565, "question_id": 59548643, "link": "https://stackoverflow.com/questions/59548643/matrix-couple-input-from-a-user", "title": "matrix couple input from a user", "body": "<p>\"so i just started to learn python, now am against a real problem abt matrix i want to create a matrix by using an input from the user something like that : [[x,y],[x,y],[x,y],[x,y]],the first obvious solution is that to insert an array with 1D to a matrix on axis=0 but something went wrong with the dimensions on the console and also idk which function i use (like i said am new so looping through functions without knowing one of them really frustrated me)\nso if anyone know  how to do, and a speciallly the rules to append and insert to an array or a matrix without geeting some dimensional error would be very helpfull and thnx for ur time \" </p>\n"}, {"tags": ["python", "csv", "google-sheets"], "comments": [{"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1577829591, "post_id": 59548636, "comment_id": 105266469, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/16766643/convert-date-string-to-day-of-week\">Convert Date String to Day of Week</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1335, "user_id": 1037613, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f3YUq.png?s=128&g=1", "display_name": "Oded BD", "link": "https://stackoverflow.com/users/1037613/oded-bd"}, "is_accepted": false, "score": 1, "last_activity_date": 1577829177, "last_edit_date": 1577829177, "creation_date": 1577829007, "answer_id": 59548674, "question_id": 59548636, "link": "https://stackoverflow.com/questions/59548636/how-to-get-day-of-week-from-datetime-in-csv-y-m-d/59548674#59548674", "title": "how to get day of week from datetime in CSV (Y.M.D,)", "body": "<p>You need to convert your string into datetime obj like that:\nAnd then you will be able to export day [or any other date property]</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def date_to_week_day(date_time_str):\n  date_time_obj = datetime.datetime.strptime(date_time_str, '%Y-%m-%d')\n  logging.debug( date_time_obj.isoweekday())\n  return date_time_obj.isoweekday()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 10051, "user_id": 6031995, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KAcWh.png?s=128&g=1", "display_name": "Kenan", "link": "https://stackoverflow.com/users/6031995/kenan"}, "is_accepted": false, "score": 1, "last_activity_date": 1577829481, "last_edit_date": 1577829481, "creation_date": 1577829135, "answer_id": 59548685, "question_id": 59548636, "link": "https://stackoverflow.com/questions/59548636/how-to-get-day-of-week-from-datetime-in-csv-y-m-d/59548685#59548685", "title": "how to get day of week from datetime in CSV (Y.M.D,)", "body": "<p>In google-sheets</p>\n\n<p>Begin with <a href=\"https://support.google.com/docs/answer/62754?co=GENIE.Platform%3DDesktop&amp;hl=en\" rel=\"nofollow noreferrer\">search_replace</a> <code>.</code> with <code>-</code> for your date column\nthen run</p>\n\n<p><code>=CHOOSE( weekday(A1), \"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\")</code></p>\n"}, {"tags": [], "owner": {"reputation": 3, "user_id": 12486671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6581545d52328e72e97be9ea93f762ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jesse Young", "link": "https://stackoverflow.com/users/12486671/jesse-young"}, "is_accepted": false, "score": 0, "last_activity_date": 1577829836, "creation_date": 1577829836, "answer_id": 59548738, "question_id": 59548636, "link": "https://stackoverflow.com/questions/59548636/how-to-get-day-of-week-from-datetime-in-csv-y-m-d/59548738#59548738", "title": "how to get day of week from datetime in CSV (Y.M.D,)", "body": "<p>If you'd prefer to do this in Google Sheets and not modify the Day column, you can use the following formula to get the day of the week:</p>\n\n<pre><code>=TEXT(DATE(INDEX(SPLIT(A2, \".\"), 0, 1), INDEX(SPLIT(A2, \".\"), 0, 2), INDEX(SPLIT(A2, \".\"), 0, 3)), \"dddd\")\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 12561894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/948c5499ff6d02cf1b25cdadaa96e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "oz.vegas", "link": "https://stackoverflow.com/users/12561894/oz-vegas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1577838231, "creation_date": 1577828498, "last_edit_date": 1577838231, "question_id": 59548636, "link": "https://stackoverflow.com/questions/59548636/how-to-get-day-of-week-from-datetime-in-csv-y-m-d", "title": "how to get day of week from datetime in CSV (Y.M.D,)", "body": "<p>I am trying to figure out how to turn date time from a csv into the day of week equivelant,\ni have a column in a CSV with date format as listed below (Y.M.D) and i want to turn that into mon, tue, wed, thur, fri, sat, sun, instead.\n I have data corresponding to each date, \n I need a variable for each day of the 7 day week for an ML model. (Im trying to see if theres a correlation between my dependant variables and the specific day of the week)</p>\n\n<p>I want to turn this</p>\n\n<pre><code>Day\n2019.12.24\n2019.12.26\n2019.12.27\n2019.12.28\n2019.12.29\n2019.12.30\n2019.12.31\n</code></pre>\n\n<p>into this</p>\n\n<pre><code>Day\n'Wednesday'\n'Thursday'\n'Friday'\n'Saturday'\n'Sunday'\n'Monday'\n'Tuesday'\n</code></pre>\n\n<p>The data is In a CSV in google sheets if anyone knows how to do it in there (google sheets) that would be ideal, or in Python that would be good as well, any help is much appreciated.</p>\n"}, {"tags": ["python", "pandas", "matplotlib"], "answers": [{"comments": [{"owner": {"reputation": 941, "user_id": 1403791, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/2d6bcb66172d30b48c79d270851a1aa4?s=128&d=identicon&r=PG", "display_name": "David Folkner", "link": "https://stackoverflow.com/users/1403791/david-folkner"}, "edited": false, "score": 1, "creation_date": 1577829899, "post_id": 59548696, "comment_id": 105266507, "body": "That&#39;s useful to know!  I like using pandas directly as it allows me to do other wonky things.  Such as <code>df.groupby(&#39;A&#39;)[&#39;B&#39;].plot(style=&#39;o&#39;)</code> and color by groups in a single line.  I was trying to simplify my question to the basics of what wasn&#39;t working."}], "tags": [], "owner": {"reputation": 423, "user_id": 6067379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f384748200c5850b3e1bbb2828a8caa?s=128&d=identicon&r=PG&f=1", "display_name": "merit_2", "link": "https://stackoverflow.com/users/6067379/merit-2"}, "is_accepted": false, "score": 1, "last_activity_date": 1577829275, "creation_date": 1577829275, "answer_id": 59548696, "question_id": 59548623, "link": "https://stackoverflow.com/questions/59548623/pandas-time-series-dataframe-plotting-with-time-axis-control/59548696#59548696", "title": "Pandas Time Series DataFrame Plotting with Time Axis Control", "body": "<p>I don't think you asked this, but if you use matplotlib to plot instead of Pandas I get your expected result.   </p>\n\n<p>See my modifications to your code below,</p>\n\n<pre><code>import pandas as pd\nimport sys\nimport matplotlib\nimport matplotlib.pyplot as plt\nimport matplotlib.dates as mdates\nfrom matplotlib import ticker\n\nprint(f'System info: {sys.version}')\nprint(f'Pandas Version: {pd.__version__}')\nprint(f'Matplotlib Version: {matplotlib.__version__}')\n\nindex = pd.date_range(start='12/21/19 10:43:00', end='2019-12-21 10:47:00', freq= '10s')\n\ndata = {'A': [0., 0., 0., 0., 0., 0., 0., 0., 1., 1., 1., 1., 0., 0., 0., 0., 0.,\n              0., 0., 0., 0., 0., 0., 0., 0.],\n        'B': [2., 2., 2., 2., 2., 2., 2., 2., 2., 2., 2., 0., 0., 0., 0., 0., 0.,\n              0., 0., 0., 0., 0., 0., 0., 0.]}\ndf = pd.DataFrame(index=index, data=data)\n\n#ax = df.plot()\n</code></pre>\n\n<p>Here I plot your data using matplotlib</p>\n\n<pre><code>fig, ax = plt.subplots()\nax.plot(df.index, df['A'])\nax.plot(df.index, df['B'])\n\nax.xaxis.set_minor_locator(ticker.NullLocator())\nax.xaxis.set_major_locator(mdates.SecondLocator(interval=15))\nax.xaxis.set_major_formatter(mdates.DateFormatter('%H:%M'))\nplt.gcf().autofmt_xdate()\n# ax.get_figure().canvas.draw()\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/5WnX6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5WnX6.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 941, "user_id": 1403791, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/2d6bcb66172d30b48c79d270851a1aa4?s=128&d=identicon&r=PG", "display_name": "David Folkner", "link": "https://stackoverflow.com/users/1403791/david-folkner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 480, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577829275, "creation_date": 1577828372, "question_id": 59548623, "link": "https://stackoverflow.com/questions/59548623/pandas-time-series-dataframe-plotting-with-time-axis-control", "title": "Pandas Time Series DataFrame Plotting with Time Axis Control", "body": "<p>I see countless examples through blogs and on this site (see posts like <a href=\"https://stackoverflow.com/questions/45704366/modify-date-ticks-for-pandas-plot\">Modify date ticks for pandas plot</a>)  of being able to use <code>matplotlib.dates</code> to control plotting of <code>pandas</code> dataframe plotting.  I am struggling to get similar behaviour:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import pandas as pd\nimport sys\nimport matplotlib\nimport matplotlib.pyplot as plt\nimport matplotlib.dates as mdates\nfrom matplotlib import ticker\n\nprint(f'System info: {sys.version}')\nprint(f'Pandas Version: {pd.__version__}')\nprint(f'Matplotlib Version: {matplotlib.__version__}')\n\nindex = pd.date_range(start='12/21/19 10:43:00', end='2019-12-21 10:47:00', freq= '10s')\n\ndata = {'A': [0., 0., 0., 0., 0., 0., 0., 0., 1., 1., 1., 1., 0., 0., 0., 0., 0.,\n              0., 0., 0., 0., 0., 0., 0., 0.],\n        'B': [2., 2., 2., 2., 2., 2., 2., 2., 2., 2., 2., 0., 0., 0., 0., 0., 0.,\n              0., 0., 0., 0., 0., 0., 0., 0.]}\ndf = pd.DataFrame(index=index, data=data)\n\nax = df.plot()\n\nax.xaxis.set_minor_locator(ticker.NullLocator())\nax.xaxis.set_major_locator(mdates.SecondLocator(interval=15))\nax.xaxis.set_major_formatter(mdates.DateFormatter('%H:%M'))\nplt.gcf().autofmt_xdate()\n# ax.get_figure().canvas.draw()\nplt.show()\n</code></pre>\n\n<p>The output of  my terminal is:</p>\n\n<pre><code>System info: 3.7.4 (tags/v3.7.4:e09359112e, Jul  8 2019, 20:34:20) [MSC v.1916 64 bit (AMD64)]\nPandas Version: 0.25.3\nMatplotlib Version: 3.1.2\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/ZGT67.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZGT67.png\" alt=\"Output Plot\"></a></p>\n\n<p>I get no labels at all.  It seems as though <code>pandas</code> or <code>matplotlib</code> isn't converting to <code>datetime</code>, even though <code>date_range</code> produces <code>datetime</code> objects.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 2, "creation_date": 1577828563, "post_id": 59548592, "comment_id": 105266272, "body": "Did you try the original? <code>self.cls = self.job.im_class</code> instead? What is <code>DateRange</code>? What is <code>DateRange.getevents</code>? Do either have an <code>im_class</code> attribute?"}, {"owner": {"reputation": 4883, "user_id": 62138, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/65881e840f44a05c4f3b0aea257da42e?s=128&d=identicon&r=PG", "display_name": "salparadise", "link": "https://stackoverflow.com/users/62138/salparadise"}, "reply_to_user": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 1, "creation_date": 1577829366, "post_id": 59548592, "comment_id": 105266414, "body": "@wwii <code>im_class</code> is part of the data model for a bounded method in python2 <a href=\"https://docs.python.org/2/library/inspect.html\" rel=\"nofollow noreferrer\">docs.python.org/2/library/inspect.html</a>"}, {"owner": {"reputation": 2050, "user_id": 827174, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/56931560af6eb22d960389b6b9ff4391?s=128&d=identicon&r=PG", "display_name": "Casey", "link": "https://stackoverflow.com/users/827174/casey"}, "edited": false, "score": 0, "creation_date": 1577829526, "post_id": 59548592, "comment_id": 105266454, "body": "Yes I tried the original but got: <code>AttributeError: &#39;function&#39; object has no attribute &#39;im_class&#39;</code>. I will update the code with DateRange."}, {"owner": {"reputation": 4883, "user_id": 62138, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/65881e840f44a05c4f3b0aea257da42e?s=128&d=identicon&r=PG", "display_name": "salparadise", "link": "https://stackoverflow.com/users/62138/salparadise"}, "edited": false, "score": 0, "creation_date": 1577831168, "post_id": 59548592, "comment_id": 105266707, "body": "How do you call <code>UpdateDbQueue</code> and pass the <code>job</code> attribute? Based on your last update, it should be something like <code>UpdateDbQueue(job=DateRange().get_events)</code>"}, {"owner": {"reputation": 2050, "user_id": 827174, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/56931560af6eb22d960389b6b9ff4391?s=128&d=identicon&r=PG", "display_name": "Casey", "link": "https://stackoverflow.com/users/827174/casey"}, "edited": false, "score": 0, "creation_date": 1577831566, "post_id": 59548592, "comment_id": 105266782, "body": "It is called with <code>update_registry.register(UpdateDbQueue(     job=DateRange.get_events,     action_table=&quot;date_range&quot; ))</code>"}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1577834241, "post_id": 59548592, "comment_id": 105267208, "body": "Related: <a href=\"https://stackoverflow.com/a/25959545/2823755\">stackoverflow.com/a/25959545/2823755</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2050, "user_id": 827174, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/56931560af6eb22d960389b6b9ff4391?s=128&d=identicon&r=PG", "display_name": "Casey", "link": "https://stackoverflow.com/users/827174/casey"}, "edited": false, "score": 0, "creation_date": 1577832729, "post_id": 59548793, "comment_id": 105267015, "body": "The command is run with this: update_registry.register(UpdateDbQueue(     job=DateRange.get_events,     action_table=&quot;date_range&quot; ))."}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1577833217, "post_id": 59548793, "comment_id": 105267089, "body": "\u2026 I think <code>self.cls = self.job.__class__</code> would be correct then."}, {"owner": {"reputation": 4883, "user_id": 62138, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/65881e840f44a05c4f3b0aea257da42e?s=128&d=identicon&r=PG", "display_name": "salparadise", "link": "https://stackoverflow.com/users/62138/salparadise"}, "reply_to_user": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 1, "creation_date": 1577833559, "post_id": 59548793, "comment_id": 105267122, "body": "@wwii not because a plain function&#39;s (an unbounded method in py3)  <code>__class__</code> is <code>function</code> not <code>DateRange</code> as desired."}, {"owner": {"reputation": 4883, "user_id": 62138, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/65881e840f44a05c4f3b0aea257da42e?s=128&d=identicon&r=PG", "display_name": "salparadise", "link": "https://stackoverflow.com/users/62138/salparadise"}, "reply_to_user": {"reputation": 2050, "user_id": 827174, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/56931560af6eb22d960389b6b9ff4391?s=128&d=identicon&r=PG", "display_name": "Casey", "link": "https://stackoverflow.com/users/827174/casey"}, "edited": false, "score": 0, "creation_date": 1577833895, "post_id": 59548793, "comment_id": 105267161, "body": "@Casey can you change to calling the class like this <code>DateRane().get_events</code>"}], "tags": [], "owner": {"reputation": 4883, "user_id": 62138, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/65881e840f44a05c4f3b0aea257da42e?s=128&d=identicon&r=PG", "display_name": "salparadise", "link": "https://stackoverflow.com/users/62138/salparadise"}, "is_accepted": false, "score": 1, "last_activity_date": 1577831455, "last_edit_date": 1577831455, "creation_date": 1577830570, "answer_id": 59548793, "question_id": 59548592, "link": "https://stackoverflow.com/questions/59548592/converting-im-class-in-python-2-7-to-python-3-8/59548793#59548793", "title": "Converting im_class in python 2.7 to python 3.8", "body": "<p>Looks like <code>im_class</code> attribute is found in an <a href=\"https://stackoverflow.com/questions/11949808/what-is-the-difference-between-a-function-an-unbound-method-and-a-bound-method\">unbounded method</a> in python2:</p>\n\n<pre><code>&gt;&gt;&gt; sys.version\n'2.7.16 (default, Nov  9 2019, 05:55:08) \\n[GCC 4.2.1 Compatible Apple LLVM 11.0.0 (clang-1100.0.32.4) (-macos10.15-objc-s'\n&gt;&gt;&gt; class S:\n...    def f(s):\n...      pass\n...\n&gt;&gt;&gt; 'im_class' in dir(S.f)\nTrue\n</code></pre>\n\n<p>Since unbounded methods are not a thing in python3, this does not exist in this type of object anymore:</p>\n\n<pre><code>In [9]: sys.version\nOut[9]: '3.7.3 (default, Nov 15 2019, 04:04:52) \\n[Clang 11.0.0 (clang-1100.0.33.16)]'\n\nIn [10]: class S:\n    ...:     def f(s):\n    ...:         pass\n    ...:\n\nIn [11]: 'im_class' in dir(S.f)\nOut[11]: False\n</code></pre>\n\n<p>The python2to3 conversion tool seems to be assuming you have a <em>bounded</em> method in python3:</p>\n\n<pre><code>In [12]: sys.version\nOut[12]: '3.7.3 (default, Nov 15 2019, 04:04:52) \\n[Clang 11.0.0 (clang-1100.0.33.16)]'\n\nIn [13]: class S:\n    ...:     def f(s):\n    ...:         pass\n    ...:\n\nIn [14]: '__self__' in dir(S().f) ## bounded by S()\nOut[14]: True\n</code></pre>\n\n<p>However this does not look like a bounded method based on your information about <code>kwargs['job']</code> </p>\n\n<blockquote>\n  <p>Running a debugger shows that kwargs[\"job\"] equals <code>&lt;function DateRange.get_events at 0x112f84f80&gt;</code></p>\n</blockquote>\n\n<p>which is just a plain function, which is what unbounded methods are in python3. </p>\n\n<p>One thing to try is to bind the function to a local method using <a href=\"https://docs.python.org/3/library/types.html#types.MethodType\" rel=\"nofollow noreferrer\"><code>types</code></a> after assigning to an instance which could have been the intent:</p>\n\n<pre><code>import types\nclass UpdateDbQueue():\n    def __init__(self, **kwargs):\n        self.job = types.MethodType(kwargs['job'], self)\n</code></pre>\n\n<p>This way you have the necessary attributes:</p>\n\n<pre><code>In [26]: def f(s):\n    ...:     pass\n    ...:\n\nIn [27]: class S:\n    ...:     def __init__(self):\n    ...:         self.f = types.MethodType(f, self)\n    ...:         if '__self__' in dir(self.f):\n    ...:             print(\"I have __self__\")\n    ...:\n    ...:\n\nIn [28]: S()\nI have __self__\nOut[28]: &lt;__main__.S at 0x111711dd8&gt;\n</code></pre>\n\n<p>However <code>job</code> needs to expect to be called as a bounded method (so the instance is passed as the first argument, etc)</p>\n\n<h3>Edit:</h3>\n\n<p>Based on your question edit, seems that if you were calling this class with the appropriate bounded method, it should work, so how are you calling the <code>UpdateDbQueue</code> class? </p>\n"}], "owner": {"reputation": 2050, "user_id": 827174, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/56931560af6eb22d960389b6b9ff4391?s=128&d=identicon&r=PG", "display_name": "Casey", "link": "https://stackoverflow.com/users/827174/casey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 324, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577831455, "creation_date": 1577827953, "last_edit_date": 1577829662, "question_id": 59548592, "link": "https://stackoverflow.com/questions/59548592/converting-im-class-in-python-2-7-to-python-3-8", "title": "Converting im_class in python 2.7 to python 3.8", "body": "<p>I am converting some python 2.7 code to work with python 3.8. One thing I am stuck on is how to get a reference to im_class working. The original code looks like this:</p>\n\n<pre><code>class UpdateDbQueue():\n    def __init__(self, **kwargs):\n        self.job = kwargs[\"job\"]\n        self.method = self.job\n        self.cls = self.job.im_class\n        self.name = \"{}.{}\".format(self.cls.__name__, self.method.__name__)\n</code></pre>\n\n<p>Running a debugger shows that kwargs[\"job\"] equals <code>&lt;function DateRange.get_events at 0x112f84f80&gt;</code>. The python2to3 utility converted the code to this:</p>\n\n<pre><code>class UpdateDbQueue():\n    def __init__(self, **kwargs):\n        self.job = kwargs[\"job\"]\n        self.method = self.job\n        self.cls = self.job.__self__.__class__\n        self.name = \"{}.{}\".format(self.cls.__name__, self.method.__name__)\n</code></pre>\n\n<p>Which returns an error:  </p>\n\n<pre><code>self.cls = self.job.__self__.__class__\nAttributeError: 'function' object has no attribute '__self__'\n</code></pre>\n\n<p>Any idea on how to fix this? I tried changed it simple to self.job.<strong>class</strong> but got an error <code>KeyError: 'DateRange.get_events'</code>.</p>\n\n<p>Edit - this is a snipped of the DateRange class.</p>\n\n<p>class DateRange(db.Model):\n    id = db.Column(db.DateTime, primary_key=True)</p>\n\n<pre><code>def get_events(self, rows=10000):\n    # gets events from database\n\ndef __repr__(self):\n    return \"&lt;DateRange (starts: {})&gt;\".format(self.id)\n</code></pre>\n"}, {"tags": ["python", "arrays", "json", "python-3.x"], "comments": [{"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1577835655, "post_id": 59548568, "comment_id": 105267392, "body": "The bare <code>except:</code> clause may be hiding a problem. I strongly suggest you avoid doing that and explicitly list the exception(s) that might occur (or at least print or log which one has occurring \u2014 i.e. <code>except Exception as exc:</code>, then <code>print(exc)</code> indented beneath it."}], "answers": [{"tags": [], "owner": {"reputation": 46, "user_id": 11471969, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-qIzOO05EzSE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdyxV7474yLmLfjd3rXrZN-y_B-RQ/mo/photo.jpg?sz=128", "display_name": "Steve Bremer", "link": "https://stackoverflow.com/users/11471969/steve-bremer"}, "is_accepted": false, "score": 0, "last_activity_date": 1577839236, "creation_date": 1577839236, "answer_id": 59549345, "question_id": 59548568, "link": "https://stackoverflow.com/questions/59548568/how-to-modify-json-values-by-taking-text-file-content/59549345#59549345", "title": "How to modify JSON values by taking text file content?", "body": "<p>Your problem is with this code:</p>\n\n<pre><code>for xv in line_x:\n    for item in json_data['resources'][1:]:\n        item['ax'] = xv\n</code></pre>\n\n<p>You are taking the first line of your text file, assigning to <em>xv</em> and then replacing every <em>item['ax']</em> throughout the json file with that value. Then you get the next line of the text file and replace all the <em>item['ax']</em> in the json file with that new value, and so on, until they all have the value of the last item in the text file.</p>\n\n<p>Perhaps something like this would work better:</p>\n\n<pre><code>line_x = file.read().splitlines()\nxv = [line for line in line_x]\nfor item in json_data['resources'][1:]:\n    item['ax'] = xv.pop(0)\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 12481402, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCqLOFeWtrxDQ22p_rQAvJJgD5b6k1rM9tjsNuU=k-s128", "display_name": "Asaf AI Perets", "link": "https://stackoverflow.com/users/12481402/asaf-ai-perets"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1577839236, "creation_date": 1577827680, "last_edit_date": 1577835385, "question_id": 59548568, "link": "https://stackoverflow.com/questions/59548568/how-to-modify-json-values-by-taking-text-file-content", "title": "How to modify JSON values by taking text file content?", "body": "<p>I am trying to modify JSON values by taking content from text file but it write the value as the last value of txt file. What I want to do is to write every line from the text file as a value for <code>item['ax']</code>. (You can see it in the code.)</p>\n\n<pre><code>import json, os\n\nwith open('res.json', 'r') as file:\n    json_data = json.load(file)\n    try:\n        with open('x.txt', 'r') as file:\n            line_x = file.read().splitlines()\n            for xv in line_x:\n                for item in json_data['resources'][1:]:\n                    item['ax'] = xv\n    except:\n        continue\n    os.chdir('../')\n    with open('fixed.json', 'w') as out:\n        json.dump(json_data, out)\n</code></pre>\n\n<p>Here is a screenshot showing the wrong result:</p>\n\n<p><a href=\"https://i.stack.imgur.com/F9SAg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/F9SAg.png\" alt=\"screenshot showing wrong result\"></a></p>\n\n<p><code>449</code> is the last value in the text file.</p>\n"}, {"tags": ["python", "python-requests", "swagger"], "comments": [{"owner": {"reputation": 2668, "user_id": 1438906, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/p91dL.jpg?s=128&g=1", "display_name": "wombatonfire", "link": "https://stackoverflow.com/users/1438906/wombatonfire"}, "edited": false, "score": 0, "creation_date": 1577956808, "post_id": 59548547, "comment_id": 105289566, "body": "There seems to be 2 issues. See the updated answer."}], "answers": [{"comments": [{"owner": {"reputation": 373, "user_id": 12520046, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4DYPk.jpg?s=128&g=1", "display_name": "boog", "link": "https://stackoverflow.com/users/12520046/boog"}, "edited": false, "score": 0, "creation_date": 1577925634, "post_id": 59549707, "comment_id": 105282854, "body": "Thank you for the suggestion and tip- but still same [500] response... even when using postman!"}, {"owner": {"reputation": 2668, "user_id": 1438906, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/p91dL.jpg?s=128&g=1", "display_name": "wombatonfire", "link": "https://stackoverflow.com/users/1438906/wombatonfire"}, "reply_to_user": {"reputation": 373, "user_id": 12520046, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4DYPk.jpg?s=128&g=1", "display_name": "boog", "link": "https://stackoverflow.com/users/12520046/boog"}, "edited": false, "score": 0, "creation_date": 1577925915, "post_id": 59549707, "comment_id": 105282893, "body": "Well, it might be a different 500 :) Could you share the contents of the request and response objects to see what\u2019s going on under the hood?"}, {"owner": {"reputation": 373, "user_id": 12520046, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4DYPk.jpg?s=128&g=1", "display_name": "boog", "link": "https://stackoverflow.com/users/12520046/boog"}, "edited": false, "score": 0, "creation_date": 1577980023, "post_id": 59549707, "comment_id": 105300161, "body": "Working on getting you the actual response printed and saved from the python program sending the request.  When using postman to pass minimum required headers and parameters, the response is &quot;Content type &#39;application/json&#39; not supported&quot;.. however when trying the other content types, none of those seem to work either (same not supported error). Referring to the documentation, the example shows content type &quot;string&quot;, but that doesn&#39;t make sense to me. The text related content types don&#39;t work either. Let me know what you would like to see and I&#39;ll send it your way.  Thank you for your time!"}, {"owner": {"reputation": 2668, "user_id": 1438906, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/p91dL.jpg?s=128&g=1", "display_name": "wombatonfire", "link": "https://stackoverflow.com/users/1438906/wombatonfire"}, "reply_to_user": {"reputation": 373, "user_id": 12520046, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4DYPk.jpg?s=128&g=1", "display_name": "boog", "link": "https://stackoverflow.com/users/12520046/boog"}, "edited": false, "score": 0, "creation_date": 1577981608, "post_id": 59549707, "comment_id": 105300827, "body": "Oh, I missed the json content type. What happens if you replace <code>data</code> param with <code>json</code> param: <code>r=requests.post(url = API_URL, headers = headers, json = params</code>?"}, {"owner": {"reputation": 373, "user_id": 12520046, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4DYPk.jpg?s=128&g=1", "display_name": "boog", "link": "https://stackoverflow.com/users/12520046/boog"}, "edited": false, "score": 0, "creation_date": 1577985543, "post_id": 59549707, "comment_id": 105302693, "body": "I&#39;m also working with their support people to try to get this sorted out. They were able to tell me that the correct content type for this request is &quot;application/x-www-form-urlencoded&quot;... alas, still does not work in postman with that content type. so would there be an alternate param to use for application/x-www-form-urlencoded that might work?"}, {"owner": {"reputation": 373, "user_id": 12520046, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4DYPk.jpg?s=128&g=1", "display_name": "boog", "link": "https://stackoverflow.com/users/12520046/boog"}, "edited": false, "score": 0, "creation_date": 1577987758, "post_id": 59549707, "comment_id": 105303573, "body": "Thank you- very well done. I was able to get it working in postman, however not yet in python. To make it work in postman,  It is required that some parameters be passed up in the form-data section (messageBody, locationId). I&#39;m sure some research will lead me in the right direction to make the same correction in the python code.... but you were, overall, correct. Thank you!"}, {"owner": {"reputation": 2668, "user_id": 1438906, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/p91dL.jpg?s=128&g=1", "display_name": "wombatonfire", "link": "https://stackoverflow.com/users/1438906/wombatonfire"}, "reply_to_user": {"reputation": 373, "user_id": 12520046, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4DYPk.jpg?s=128&g=1", "display_name": "boog", "link": "https://stackoverflow.com/users/12520046/boog"}, "edited": false, "score": 0, "creation_date": 1577988563, "post_id": 59549707, "comment_id": 105303859, "body": "You are welcome. If you have a working set of headers and payload fields in Postman, they should work in Python Requests as well. You can check the <code>r.request.headers</code> and <code>r.request.body</code> to verify that what is being sent to the server is what you expect."}, {"owner": {"reputation": 373, "user_id": 12520046, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4DYPk.jpg?s=128&g=1", "display_name": "boog", "link": "https://stackoverflow.com/users/12520046/boog"}, "edited": false, "score": 0, "creation_date": 1578084256, "post_id": 59549707, "comment_id": 105336631, "body": "First let me say that I&#39;m a sys admin by trade, not a software dev... so forgive me for all of these questions (i&#39;m learning), but I&#39;ve been banging my head against the wall wondering why this won&#39;t work in my python program... in the comment below is the output when i print request.headers and request.body. Is there something I&#39;m missing here? Any last insights you might bestow upon me? :P The key to getting it to work in postman was to pass some parameters up in the body -&gt; form-data section. Does this have to be specifically declared in python (the form-data part)?"}, {"owner": {"reputation": 373, "user_id": 12520046, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4DYPk.jpg?s=128&g=1", "display_name": "boog", "link": "https://stackoverflow.com/users/12520046/boog"}, "edited": false, "score": 0, "creation_date": 1578084303, "post_id": 59549707, "comment_id": 105336648, "body": "{&#39;User-Agent&#39;: &#39;python-requests/2.21.0&#39;, &#39;Accept-Encoding&#39;: &#39;gzip, deflate&#39;, &#39;Accept&#39;: &#39;<i>/</i>&#39;, &#39;Connection&#39;: &#39;keep-alive&#39;, &#39;x-api-token&#39;: &#39;1130FxmIcc6uZWcq8OXoCZZPC***ODQo&#39;, &#39;x-api-key&#39;: &#39;pdwz0naW5hyCeG9SyJ3PpnOf26****28&#39;, &#39;content-type&#39;: &#39;application/x-www-form-urlencoded&#39;, &#39;Content-Length&#39;: &#39;61&#39;} contactPhone=1585739*3*5&amp;locationId=2045&amp;messageBody=test+sm&zwnj;&#8203;s &lt;Response [500]&gt;"}, {"owner": {"reputation": 2668, "user_id": 1438906, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/p91dL.jpg?s=128&g=1", "display_name": "wombatonfire", "link": "https://stackoverflow.com/users/1438906/wombatonfire"}, "reply_to_user": {"reputation": 373, "user_id": 12520046, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4DYPk.jpg?s=128&g=1", "display_name": "boog", "link": "https://stackoverflow.com/users/12520046/boog"}, "edited": false, "score": 0, "creation_date": 1578086090, "post_id": 59549707, "comment_id": 105337296, "body": "Headers and body look good to me. The format of the string in the payload is correct. The only thing I can think about is the content type header. Do you specify it yourself? I guess yes, because it is not capitalized. Could you remove it from the headers and try again? Requests will add it itself. Is there any difference?"}, {"owner": {"reputation": 373, "user_id": 12520046, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4DYPk.jpg?s=128&g=1", "display_name": "boog", "link": "https://stackoverflow.com/users/12520046/boog"}, "edited": false, "score": 0, "creation_date": 1578323354, "post_id": 59549707, "comment_id": 105392013, "body": "Nope, no difference when I remove the content type header"}, {"owner": {"reputation": 373, "user_id": 12520046, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4DYPk.jpg?s=128&g=1", "display_name": "boog", "link": "https://stackoverflow.com/users/12520046/boog"}, "edited": false, "score": 0, "creation_date": 1578337749, "post_id": 59549707, "comment_id": 105398621, "body": "So the problem was that I can&#39;t pass the data as json, needs to be sent as form data. Thanks again for all of your assistance."}], "tags": [], "owner": {"reputation": 2668, "user_id": 1438906, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/p91dL.jpg?s=128&g=1", "display_name": "wombatonfire", "link": "https://stackoverflow.com/users/1438906/wombatonfire"}, "is_accepted": true, "score": 0, "last_activity_date": 1577986864, "last_edit_date": 1577986864, "creation_date": 1577846699, "answer_id": 59549707, "question_id": 59548547, "link": "https://stackoverflow.com/questions/59548547/swagger-api-and-interaction-with-python-requests/59549707#59549707", "title": "Swagger API and interaction with python requests", "body": "<p>There seems to be 2 issues:</p>\n\n<ol>\n<li><p>Content type and payload encoding.</p>\n\n<p>You are using <code>params</code> parameter in the <code>post</code> method. <code>params</code> is used with <code>get</code> method for <a href=\"https://requests.readthedocs.io/en/master/user/quickstart/#passing-parameters-in-urls\" rel=\"nofollow noreferrer\">passing data in the URL's query string</a>.</p>\n\n<p>In the <code>post</code> method, depending on the required content type, you need to use either <code>data</code> parameter to <a href=\"https://requests.readthedocs.io/en/master/user/quickstart/#more-complicated-post-requests\" rel=\"nofollow noreferrer\">send form-encoded data</a>:</p>\n\n<p><code>r=requests.post(url = API_URL, headers = headers, data = params)</code></p>\n\n<p>or <code>json</code> parameter to send <code>application/json</code> payload:</p>\n\n<p><code>r=requests.post(url = API_URL, headers = headers, json = params)</code></p>\n\n<p>Remove the 'Content-Type' key from your <code>headers</code> dictionary. <code>data</code> and <code>json</code> parameters will set up correct content type automatically.</p></li>\n<li><p><code>outgoing</code> is not a valid request parameter for the <code>/v1/conversations/messages</code> resource. This field is from the response object, not the request one. Remove it from your payload.</p></li>\n</ol>\n\n<p>So to sum up, for form-encoded payload the code should look like this:</p>\n\n<pre><code>import requests\n\nAPI_URL = \"https://api.kenect.com/v1/conversations/messages\"\n\nheaders = {\n    'x-api-token': '****************',\n    'x-api-key': '*******************',\n}\n\nparams = {\n    'contactPhone': '158572968**',\n    'locationId': '2045',\n    'messageBody': 'test sms',       \n}\n\nr=requests.post(url = API_URL, headers = headers, data = params)\n</code></pre>\n"}], "owner": {"reputation": 373, "user_id": 12520046, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4DYPk.jpg?s=128&g=1", "display_name": "boog", "link": "https://stackoverflow.com/users/12520046/boog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1681, "favorite_count": 0, "accepted_answer_id": 59549707, "answer_count": 1, "score": 1, "last_activity_date": 1577986864, "creation_date": 1577827420, "last_edit_date": 1577827704, "question_id": 59548547, "link": "https://stackoverflow.com/questions/59548547/swagger-api-and-interaction-with-python-requests", "title": "Swagger API and interaction with python requests", "body": "<p>A  product was purchased to enable our users to send/receive SMS over HTTP. Now it's my job to build it into our current CMS platform &amp; database. It's got a swagger API.</p>\n\n<p>Here is the documentation for the specific POST request I am trying to send:\n<a href=\"https://api.kenect.com/swagger-ui.html#/Conversations-v1/sendMessageUsingPOST\" rel=\"nofollow noreferrer\">POST: Send an SMS Message</a></p>\n\n<p>Here is my simple python program to test the functionality. I get a generic 500 internal server error response. What am I doing incorrectly?</p>\n\n<pre><code>import requests\n\nAPI_URL = \"https://api.kenect.com/v1/conversations/messages\"\n\nheaders = {\n    'x-api-token': '****************',\n    'x-api-key': '*******************',\n    'Content-Type': 'application/json',\n}\n\nparams = {\n    'contactPhone': '158572968**',\n    'locationId': '2045',\n    'messageBody': 'test sms',\n    'outgoing': 'true',           \n}\n\nr=requests.post(url = API_URL, headers = headers, params = params)\n\nprint(r)\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "list"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 6, "creation_date": 1577827031, "post_id": 59548497, "comment_id": 105266015, "body": "What have you tried, and what exactly is the problem with it? <code>next(value for value in compare if value &gt; x)</code> would do it, for example. Given increasing order you could also consider a bisection search. For those specific values, there&#39;s an even faster numerical approach (square the integer larger than the square root of x)."}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 5, "creation_date": 1577827330, "post_id": 59548497, "comment_id": 105266076, "body": "What do you consider to be &quot;a bunch of if statements&quot;?  You only need one, inside a loop."}, {"owner": {"reputation": 45, "user_id": 12406841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d24e3b0d2cb9b924e89268c026e962f?s=128&d=identicon&r=PG&f=1", "display_name": "somethingvague", "link": "https://stackoverflow.com/users/12406841/somethingvague"}, "edited": false, "score": 0, "creation_date": 1577827409, "post_id": 59548497, "comment_id": 105266094, "body": "I did an element-wise comparison, so almost as many if-statements as there are elements. Pretty much the longest possible way to do it. Both of your methods work great. Thank you for your help."}, {"owner": {"reputation": 1302, "user_id": 2573309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1b3ecafafb19c7a9fa7dff2f6e584be?s=128&d=identicon&r=PG", "display_name": "LhasaDad", "link": "https://stackoverflow.com/users/2573309/lhasadad"}, "edited": false, "score": 0, "creation_date": 1577827425, "post_id": 59548497, "comment_id": 105266096, "body": "Guys this is a new person to the language.  I think what your looking for is a for loop and a comparison and the use of the break keyword when the comparison indicates the state your looking for."}, {"owner": {"reputation": 354, "user_id": 12412188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd5032ce60ff3e320c99febddca61c47?s=128&d=identicon&r=PG&f=1", "display_name": "facehugger", "link": "https://stackoverflow.com/users/12412188/facehugger"}, "edited": false, "score": 0, "creation_date": 1577827536, "post_id": 59548497, "comment_id": 105266122, "body": "<code>compare[bisect.bisect_left(compare, x)]</code> - and no &#39;if-statements&#39;. <a href=\"https://docs.python.org/3/library/bisect.html\" rel=\"nofollow noreferrer\">bisect</a>"}], "answers": [{"comments": [{"owner": {"reputation": 30387, "user_id": 6260170, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0caf9a0d28be362618ffc0223b301d6e?s=128&d=identicon&r=PG&f=1", "display_name": "Chris_Rands", "link": "https://stackoverflow.com/users/6260170/chris-rands"}, "edited": false, "score": 8, "creation_date": 1577828003, "post_id": 59548561, "comment_id": 105266187, "body": "sure it&#39;s a generator expression, but still a <code>for</code> loop really"}, {"owner": {"reputation": 191222, "user_id": 147356, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b9506717d24256a090524dd5505d3207?s=128&d=identicon&r=PG", "display_name": "larsks", "link": "https://stackoverflow.com/users/147356/larsks"}, "reply_to_user": {"reputation": 30387, "user_id": 6260170, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0caf9a0d28be362618ffc0223b301d6e?s=128&d=identicon&r=PG&f=1", "display_name": "Chris_Rands", "link": "https://stackoverflow.com/users/6260170/chris-rands"}, "edited": false, "score": 0, "creation_date": 1577828589, "post_id": 59548561, "comment_id": 105266281, "body": "I disagree. While it is still an iterative construct, it&#39;s not a for loop, and I think it&#39;s far more concise and expressive. Opinions vary, of course, and if you&#39;re not a fan of functional programming you may find a simple more loop more obvious."}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 7, "creation_date": 1577829000, "post_id": 59548561, "comment_id": 105266353, "body": "It&#39;s a for loop. It literally says <code>for</code>. Also it has the same time complexity."}, {"owner": {"reputation": 191222, "user_id": 147356, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b9506717d24256a090524dd5505d3207?s=128&d=identicon&r=PG", "display_name": "larsks", "link": "https://stackoverflow.com/users/147356/larsks"}, "edited": false, "score": 0, "creation_date": 1577838197, "post_id": 59548561, "comment_id": 105267668, "body": "You seem really attached to that theory. So, sure. It&#39;s <i>totally</i> the same thing."}], "tags": [], "owner": {"reputation": 191222, "user_id": 147356, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b9506717d24256a090524dd5505d3207?s=128&d=identicon&r=PG", "display_name": "larsks", "link": "https://stackoverflow.com/users/147356/larsks"}, "is_accepted": false, "score": 4, "last_activity_date": 1577827571, "creation_date": 1577827571, "answer_id": 59548561, "question_id": 59548497, "link": "https://stackoverflow.com/questions/59548497/first-number-in-list-a-variable-isnt-larger-than/59548561#59548561", "title": "First number in list a variable isn&#39;t larger than", "body": "<p>There's a short way of doing this that doesn't involve any <code>for</code> loop:</p>\n\n<pre><code>&gt;&gt;&gt; x = 50\n&gt;&gt;&gt; compare = [1, 4, 9, 16, 25, 36, 49, 64, 81]\n&gt;&gt;&gt; next(item for item in compare if item &gt;=x)\n64\n</code></pre>\n\n<p>This creates an <a href=\"https://docs.python.org/3/howto/functional.html#iterators\" rel=\"noreferrer\">iterator</a> of values that are <code>&gt;= x</code>, and then selects the first one.</p>\n"}, {"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 0, "last_activity_date": 1577827856, "last_edit_date": 1577827856, "creation_date": 1577827709, "answer_id": 59548575, "question_id": 59548497, "link": "https://stackoverflow.com/questions/59548497/first-number-in-list-a-variable-isnt-larger-than/59548575#59548575", "title": "First number in list a variable isn&#39;t larger than", "body": "<p>Use a loop. Test each element, and break out of the loop when you find what you're looking for.</p>\n\n<pre><code>result = None\nfor el in compare:\n    if x &lt; el:\n        result = el\n        break\nif result is not None:\n    print('Found', result)\nelse:\n    print('Not found')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 517, "user_id": 2946122, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/eb871cc21f3fe6f486eee8e15bf4f42a?s=128&d=identicon&r=PG&f=1", "display_name": "Kerem Zaman", "link": "https://stackoverflow.com/users/2946122/kerem-zaman"}, "is_accepted": false, "score": 0, "last_activity_date": 1577828841, "creation_date": 1577828841, "answer_id": 59548663, "question_id": 59548497, "link": "https://stackoverflow.com/questions/59548497/first-number-in-list-a-variable-isnt-larger-than/59548663#59548663", "title": "First number in list a variable isn&#39;t larger than", "body": "<p>Here is a solution with numpy:</p>\n\n<pre><code>import numpy as np\n\nx = 50\ncompare = np.array([1, 4, 9, 16, 25, 36, 49, 64, 81] )\n\ncompare[compare&gt;=x][0]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 332, "user_id": 11939397, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3lyUM.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/11939397/chris"}, "is_accepted": false, "score": 0, "last_activity_date": 1577830106, "creation_date": 1577830106, "answer_id": 59548762, "question_id": 59548497, "link": "https://stackoverflow.com/questions/59548497/first-number-in-list-a-variable-isnt-larger-than/59548762#59548762", "title": "First number in list a variable isn&#39;t larger than", "body": "<p>I would use a <code>while</code> loop:</p>\n\n<pre><code>count = 0\nwhile x &lt; compare[count]:\n    count += 1\nprint(compare[count])\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 12406841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d24e3b0d2cb9b924e89268c026e962f?s=128&d=identicon&r=PG&f=1", "display_name": "somethingvague", "link": "https://stackoverflow.com/users/12406841/somethingvague"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "closed_date": 1577833394, "answer_count": 4, "score": 2, "last_activity_date": 1577833051, "creation_date": 1577826980, "last_edit_date": 1577827043, "question_id": 59548497, "link": "https://stackoverflow.com/questions/59548497/first-number-in-list-a-variable-isnt-larger-than", "closed_reason": "Needs details or clarity", "title": "First number in list a variable isn&#39;t larger than", "body": "<p>Is there a quick way that doesn't involve a bunch of if-statements to get the first element in a list that my variable isn't bigger than? For example, if</p>\n\n<pre><code>x = 50\ncompare = [1, 4, 9, 16, 25, 36, 49, 64, 81]\n</code></pre>\n\n<p>I want this to return 64. My list will also be written in increasing order, so not every element in the list will need to be compared.</p>\n"}, {"tags": ["python", "classification"], "comments": [{"owner": {"reputation": 661, "user_id": 12538467, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rmRAM.jpg?s=128&g=1", "display_name": "Yacine Mahdid", "link": "https://stackoverflow.com/users/12538467/yacine-mahdid"}, "edited": false, "score": 0, "creation_date": 1577828667, "post_id": 59548489, "comment_id": 105266295, "body": "Print out the set of values in the y_true variable. From the error you are having its clear to me that you have only one label in y_true"}, {"owner": {"reputation": 43, "user_id": 10764616, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mgPx6C4TScI/AAAAAAAAAAI/AAAAAAAAAAA/k5KhQi5yIe4/photo.jpg?sz=128", "display_name": "Bob Hoyt", "link": "https://stackoverflow.com/users/10764616/bob-hoyt"}, "reply_to_user": {"reputation": 661, "user_id": 12538467, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rmRAM.jpg?s=128&g=1", "display_name": "Yacine Mahdid", "link": "https://stackoverflow.com/users/12538467/yacine-mahdid"}, "edited": false, "score": 1, "creation_date": 1577831174, "post_id": 59548489, "comment_id": 105266709, "body": "Thanks. print(y_true) does not generate any results"}, {"owner": {"reputation": 661, "user_id": 12538467, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rmRAM.jpg?s=128&g=1", "display_name": "Yacine Mahdid", "link": "https://stackoverflow.com/users/12538467/yacine-mahdid"}, "edited": false, "score": 0, "creation_date": 1577832698, "post_id": 59548489, "comment_id": 105267010, "body": "Print out Y instead of y_true! This is what you are using for doing cross_val_score"}, {"owner": {"reputation": 43, "user_id": 10764616, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mgPx6C4TScI/AAAAAAAAAAI/AAAAAAAAAAA/k5KhQi5yIe4/photo.jpg?sz=128", "display_name": "Bob Hoyt", "link": "https://stackoverflow.com/users/10764616/bob-hoyt"}, "reply_to_user": {"reputation": 661, "user_id": 12538467, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rmRAM.jpg?s=128&g=1", "display_name": "Yacine Mahdid", "link": "https://stackoverflow.com/users/12538467/yacine-mahdid"}, "edited": false, "score": 0, "creation_date": 1577882958, "post_id": 59548489, "comment_id": 105273767, "body": "That prompts the following error message ValueError: y_true contains only one label (0.0). Please provide the true labels explicitly through the labels argument. The y outcome is diabetes = 1 and no diabetes = 0. I&#39;m not sure why it says it onlly contains one label?"}, {"owner": {"reputation": 661, "user_id": 12538467, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rmRAM.jpg?s=128&g=1", "display_name": "Yacine Mahdid", "link": "https://stackoverflow.com/users/12538467/yacine-mahdid"}, "edited": false, "score": 0, "creation_date": 1577890459, "post_id": 59548489, "comment_id": 105275492, "body": "That&#39;s what I thought, print out your dataframe and check if the Y is actually what you meant to predict."}, {"owner": {"reputation": 43, "user_id": 10764616, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mgPx6C4TScI/AAAAAAAAAAI/AAAAAAAAAAA/k5KhQi5yIe4/photo.jpg?sz=128", "display_name": "Bob Hoyt", "link": "https://stackoverflow.com/users/10764616/bob-hoyt"}, "reply_to_user": {"reputation": 661, "user_id": 12538467, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rmRAM.jpg?s=128&g=1", "display_name": "Yacine Mahdid", "link": "https://stackoverflow.com/users/12538467/yacine-mahdid"}, "edited": false, "score": 1, "creation_date": 1577896661, "post_id": 59548489, "comment_id": 105276894, "body": "It has something to do with K fold =10. After reading some Stackflow posts I decided to decrease it to 3 and everything worked. I think because there is class imbalance it focused on the majority class = 0 and not the class = 1. Thanks"}, {"owner": {"reputation": 661, "user_id": 12538467, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rmRAM.jpg?s=128&g=1", "display_name": "Yacine Mahdid", "link": "https://stackoverflow.com/users/12538467/yacine-mahdid"}, "edited": false, "score": 0, "creation_date": 1577896974, "post_id": 59548489, "comment_id": 105276959, "body": "Right, I think in some of the fold you had only 0.0 classes which threw the error you saw"}], "owner": {"reputation": 43, "user_id": 10764616, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mgPx6C4TScI/AAAAAAAAAAI/AAAAAAAAAAA/k5KhQi5yIe4/photo.jpg?sz=128", "display_name": "Bob Hoyt", "link": "https://stackoverflow.com/users/10764616/bob-hoyt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1577826899, "creation_date": 1577826899, "question_id": 59548489, "link": "https://stackoverflow.com/questions/59548489/failure-to-generate-an-auc-result-for-a-classification-model-using-python-3-7-in", "title": "Failure to generate an AUC result for a classification model using Python 3.7 in Jupyter notebook", "body": "<p>Here is the error message I get when the Python code below is entered. This code came from a machine learning ebook and I simply altered it to match the data set <strong>ValueError: Only one class present in y_true. ROC AUC score is not defined in that case.</strong></p>\n\n<h1>Cross Validation Classification ROC AUC</h1>\n\n<pre><code>from pandas import read_csv\nfrom sklearn.model_selection import KFold\nfrom sklearn.model_selection import cross_val_score\nfrom sklearn.linear_model import LogisticRegression\ndf = pd.read_csv('Diabetes_Classification.csv')\narray = df.values\nX = array[:,0:14]\nY = array[:,14]\nkfold = KFold(n_splits=10, random_state=7)\nmodel = LogisticRegression(solver='liblinear')\nscoring = 'roc_auc'\nresults = cross_val_score(model, X, Y, cv=kfold, scoring=scoring)\nprint(\"AUC: %.3f (%.3f)\" % (results.mean(), results.std()))\n</code></pre>\n"}, {"tags": ["python", "pandas", "dataframe", "group-by"], "answers": [{"comments": [{"owner": {"reputation": 13671, "user_id": 1838763, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/T3Hdl.jpg?s=128&g=1", "display_name": "Steven Moseley", "link": "https://stackoverflow.com/users/1838763/steven-moseley"}, "edited": false, "score": 1, "creation_date": 1577826933, "post_id": 59548485, "comment_id": 105265998, "body": "Should probably show an example using <code>count()</code> as well, since that&#39;s a more reliable solution (even though it wasn&#39;t what was asked for)"}, {"owner": {"reputation": 592, "user_id": 5679285, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I1kkX.png?s=128&g=1", "display_name": "techytushar", "link": "https://stackoverflow.com/users/5679285/techytushar"}, "edited": false, "score": 1, "creation_date": 1577827174, "post_id": 59548485, "comment_id": 105266035, "body": "Thanks for this. Didn&#39;t knew that we can also use lambda functions inside <code>.loc[]</code> and also about the <code>.query()</code> function."}, {"owner": {"reputation": 13671, "user_id": 1838763, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/T3Hdl.jpg?s=128&g=1", "display_name": "Steven Moseley", "link": "https://stackoverflow.com/users/1838763/steven-moseley"}, "reply_to_user": {"reputation": 592, "user_id": 5679285, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I1kkX.png?s=128&g=1", "display_name": "techytushar", "link": "https://stackoverflow.com/users/5679285/techytushar"}, "edited": false, "score": 1, "creation_date": 1577829253, "post_id": 59548485, "comment_id": 105266394, "body": "@techytushar the benefit of going with <code>count</code> over <code>max</code> is that if you have bad data (e.g. a given user&#39;s order numbers go 1, 2, 4), you will still be able to match users with 3 distinct orders (<code>count()</code> for <code>[1,2,4]</code> is <code>3</code>)."}, {"owner": {"reputation": 592, "user_id": 5679285, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I1kkX.png?s=128&g=1", "display_name": "techytushar", "link": "https://stackoverflow.com/users/5679285/techytushar"}, "reply_to_user": {"reputation": 13671, "user_id": 1838763, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/T3Hdl.jpg?s=128&g=1", "display_name": "Steven Moseley", "link": "https://stackoverflow.com/users/1838763/steven-moseley"}, "edited": false, "score": 1, "creation_date": 1577829368, "post_id": 59548485, "comment_id": 105266416, "body": "Thank You @StevenMoseley for the insights, that is indeed true. I&#39;ll use <code>count()</code> then. I am working on the InstaCart dataset on Kaggle."}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 1, "creation_date": 1577833593, "post_id": 59548485, "comment_id": 105267127, "body": "Hold on , why not use value_counts ?~ :-)"}, {"owner": {"reputation": 62335, "user_id": 9840637, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QqY9S.png?s=128&g=1", "display_name": "anky", "link": "https://stackoverflow.com/users/9840637/anky"}, "reply_to_user": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 1, "creation_date": 1577857029, "post_id": 59548485, "comment_id": 105269385, "body": "@YOandBEN_W updated my answer. At the start this looked like how to do a <code>.loc[]</code> on groupby. Thanks for your suggestion. Happy New year :)"}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 1, "creation_date": 1577887750, "post_id": 59548485, "comment_id": 105274878, "body": "@anky_91 happy new year :-) \ud83c\udf86"}], "tags": [], "owner": {"reputation": 62335, "user_id": 9840637, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QqY9S.png?s=128&g=1", "display_name": "anky", "link": "https://stackoverflow.com/users/9840637/anky"}, "is_accepted": true, "score": 6, "last_activity_date": 1577856982, "last_edit_date": 1577856982, "creation_date": 1577826846, "answer_id": 59548485, "question_id": 59548468, "link": "https://stackoverflow.com/questions/59548468/select-users-with-specific-number-of-orders-pandas/59548485#59548485", "title": "Select users with specific number of orders pandas", "body": "<p>A general way of doing this is by using <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.loc.html\" rel=\"nofollow noreferrer\"><code>df.loc[]</code></a> or <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.query.html\" rel=\"nofollow noreferrer\"><code>df.query</code></a>:</p>\n\n<pre><code>df.groupby(['user_id'],as_index=False)['order_number'].max().query(\"order_number==3\")\n#or\ndf.groupby(['user_id'],as_index=False)['order_number'].max().loc[\n                                   lambda x: x['order_number']==3]\n</code></pre>\n\n<p>For this example you dont have to get max of another column, you can just count them, as @Steven suggests :</p>\n\n<pre><code>df.groupby('user_id',as_index=False).count().query(\"order_number==3\")\n</code></pre>\n\n<p>Or as @Wen suggests:</p>\n\n<pre><code>df['user_id'].value_counts().loc[lambda x: x==3]\n</code></pre>\n\n<hr>\n\n<pre><code>   user_id  order_number\n0        1             3\n2        3             3\n</code></pre>\n"}], "owner": {"reputation": 592, "user_id": 5679285, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I1kkX.png?s=128&g=1", "display_name": "techytushar", "link": "https://stackoverflow.com/users/5679285/techytushar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 59548485, "answer_count": 1, "score": 1, "last_activity_date": 1577856982, "creation_date": 1577826649, "question_id": 59548468, "link": "https://stackoverflow.com/questions/59548468/select-users-with-specific-number-of-orders-pandas", "title": "Select users with specific number of orders pandas", "body": "<p>I have a dataframe with <code>user_id</code> and <code>order_number</code> columns. <code>order_number</code> tells the nth order by a user. I want to select users who have done certain number of orders.</p>\n\n<p><strong>Sample DataFrame:</strong></p>\n\n<pre><code>user_id order_number\n0   1   1\n1   1   2\n2   1   3\n3   2   1\n4   2   2\n5   3   1\n6   3   2\n7   3   3\n</code></pre>\n\n<p><strong>Output:</strong> <code>[1,3]</code>\nOutput should be <code>user_id</code> <code>[1,3]</code> because they have done 3 orders but 2 have done only 2 orders.</p>\n\n<p>I am trying:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>(df.groupby(['user_id'])['order_number'].max()==3)\n</code></pre>\n\n<p>This gives me boolean series but how to select index with only True values?</p>\n"}, {"tags": ["python", "loops"], "comments": [{"owner": {"reputation": 661, "user_id": 12538467, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rmRAM.jpg?s=128&g=1", "display_name": "Yacine Mahdid", "link": "https://stackoverflow.com/users/12538467/yacine-mahdid"}, "edited": false, "score": 0, "creation_date": 1577828818, "post_id": 59548464, "comment_id": 105266321, "body": "what is the output if dataset[i]?"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1577835928, "post_id": 59548464, "comment_id": 105267420, "body": "What is the type of a &quot;dataset&quot;? There&#39;s no such thing in built in to Python. If you&#39;re using some framework, please tag your question accordingly."}], "answers": [{"comments": [{"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 4, "creation_date": 1577830400, "post_id": 59548515, "comment_id": 105266595, "body": "Probably should explain what <code>int(y != 0)</code> does because it isn&#39;t obvious."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1578071084, "post_id": 59548515, "comment_id": 105331300, "body": "The explanation of <code>int(y != 0)</code> is an improvement, but \u2014 sorry to be so pedantic \u2014 the formatting of some of the code snippets is missing and I&#39;m not sure what to make of those <code>\u2588</code> characters."}, {"owner": {"reputation": 13671, "user_id": 1838763, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/T3Hdl.jpg?s=128&g=1", "display_name": "Steven Moseley", "link": "https://stackoverflow.com/users/1838763/steven-moseley"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1578102136, "post_id": 59548515, "comment_id": 105340750, "body": "@martineau the block character is representing other code excluded from the portion being explained."}], "tags": [], "owner": {"reputation": 13671, "user_id": 1838763, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/T3Hdl.jpg?s=128&g=1", "display_name": "Steven Moseley", "link": "https://stackoverflow.com/users/1838763/steven-moseley"}, "is_accepted": false, "score": 1, "last_activity_date": 1578007372, "last_edit_date": 1578007372, "creation_date": 1577827130, "answer_id": 59548515, "question_id": 59548464, "link": "https://stackoverflow.com/questions/59548464/creating-a-loop-to-go-through-different-datasets-with-the-same-variable-names-to/59548515#59548515", "title": "creating a loop to go through different datasets with the same variable names to change values", "body": "<p>Try a using a comprehension to do this.</p>\n\n<p>Given your code above, there are two distinct cases for the structure of <code>dataset</code>:</p>\n\n<ol>\n<li><p>It's a list of lists, e.g.:</p>\n\n<p>dataset = [\n    [0,1,2,3], \n    [1,2,3,4], \n    [0,0,2,1], \n    [1,0,1,0]\n]</p></li>\n<li><p>It's a keyed dict of lists, e.g.:</p>\n\n<p>dataset = {\n    'cluster_1': [0,1,2,3],\n    'cluster_2': [1,2,3,4],\n    'cluster_3': [0,0,2,1],\n    'cluster_4': [1,0,1,0]\n}</p></li>\n</ol>\n\n<p><strong>CASE 1:</strong> If your dataset is a list of lists, you can do this with a list comprehension:</p>\n\n<pre><code>dataset = [[int(y != 0) for y in x] for x in dataset]\n</code></pre>\n\n<p>What this does is create a list of lists:</p>\n\n<ol>\n<li>The outer list comprehension <code>[\u2588 for x in dataset]</code> evaluates as a comprehension  each list <code>x</code> in <code>dataset</code>,</li>\n<li>The inner list comprehension <code>[\u2588 for y in x]</code> evaluates each value <code>y</code> in the list <code>x</code>.</li>\n<li>The expression <code>int(y != 0)</code> is a simplification of the ternary expression <code>y if y== 0 else 1</code>, because ternaries are clunky in Python. <code>y !=0</code> will result in a Boolean <code>False</code> if y == 0, else <code>True</code>.  Casting that to an <code>int()</code> will produce the same output as your ternary logic did (<code>0</code> if y is <code>0</code>, or <code>1</code> in all other cases).</li>\n</ol>\n\n<p>Full example:</p>\n\n<pre><code>dataset = [\n    [0,1,2,3], \n    [1,2,3,4], \n    [0,0,2,1], \n    [1,0,1,0]\n]\ndataset = [[int(y != 0) for y in x] for x in dataset]\nprint(dataset)\n</code></pre>\n\n<p>Yields:</p>\n\n<blockquote>\n  <p>[[0, 1, 1, 1], [1, 1, 1, 1]]</p>\n</blockquote>\n\n<p><strong>CASE 2:</strong> If <code>dataset</code> is a dict, you can use a dict comprehension:</p>\n\n<pre><code>dataset = {key: [int(y != 0) for y in val] for key, val in dataset.items()}\n</code></pre>\n\n<p>Full example:</p>\n\n<pre><code>dataset = {\n    'cluster_1': [0,1,2,3],\n    'cluster_2': [1,2,3,4],\n    'cluster_3': [0,0,2,1],\n    'cluster_4': [1,0,1,0]\n}\ndataset = {key: [int(y != 0) for y in val] for key, val in dataset.items()}\nprint(dataset)\n</code></pre>\n\n<p>Yields:</p>\n\n<blockquote>\n  <p>{'cluster_1': [0, 1, 1, 1], 'cluster_2': [1, 1, 1, 1], 'cluster_3': [0, 0, 1, 1], 'cluster_4': [1, 0, 1, 0]}</p>\n</blockquote>\n"}], "owner": {"reputation": 29, "user_id": 11370857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86e317131cb69534b77405279a8b676b?s=128&d=identicon&r=PG&f=1", "display_name": "Herpadurka", "link": "https://stackoverflow.com/users/11370857/herpadurka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1578007372, "creation_date": 1577826638, "question_id": 59548464, "link": "https://stackoverflow.com/questions/59548464/creating-a-loop-to-go-through-different-datasets-with-the-same-variable-names-to", "title": "creating a loop to go through different datasets with the same variable names to change values", "body": "<p>I have 4 datasets named cluster_1, cluster_2, cluster_3, cluster_4. I want to loop through all 4 and change the values of the variables to be binary, so if they are greater than or equal to 1 then it is just set to 1 and if it is 0 it is set to 0. All datasets have the same variable names. </p>\n\n<p>i keep getting the error 'float' object is not iterable when running the code. \nbinary is a list of the variable names and clusti is a list of the datasets.</p>\n\n<pre><code>    for i in binary:\n        print(dataset[i])\n        dataset[i] = dataset[i].apply(lambda x: [y if y== 0 else 1 for y in x]) ```\n\n\n</code></pre>\n"}, {"tags": ["python", "docker", "anaconda", "vtk", "mayavi"], "answers": [{"tags": [], "owner": {"reputation": 2539, "user_id": 3637404, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ff3SL.png?s=128&g=1", "display_name": "Felipe Lema", "link": "https://stackoverflow.com/users/3637404/felipe-lema"}, "is_accepted": false, "score": 0, "last_activity_date": 1579896753, "creation_date": 1579896753, "answer_id": 59903103, "question_id": 59548454, "link": "https://stackoverflow.com/questions/59548454/python3-mayavi-in-docker-not-installing/59903103#59903103", "title": "python3 mayavi in docker not installing", "body": "<p>you can take a look at <a href=\"https://github.com/FelipeLema/mne-binder\" rel=\"nofollow noreferrer\">my binder repo fork</a> in which you can load inline mayavi in jupyter notebooks.</p>\n\n<p>Pasting the <a href=\"https://github.com/FelipeLema/mne-binder/blob/master/Dockerfile\" rel=\"nofollow noreferrer\">Dockerfile</a> here for posterity:</p>\n\n<pre><code>FROM jupyter/minimal-notebook:65761486d5d3\n\nMAINTAINER Jean-Remi King &lt;jeanremi.king@gmail.com&gt;\n\n# Install core debian packages\nUSER root\nENV DEBIAN_FRONTEND noninteractive\nRUN apt-get update &amp;&amp; apt-get -yq dist-upgrade \\\n    &amp;&amp; apt-get install -yq --no-install-recommends \\\n    openssh-client \\\n    vim \\\n    curl \\\n    gcc \\\n    &amp;&amp; apt-get clean\n\n# Xvfb\nRUN apt-get install -yq --no-install-recommends \\\n    xvfb \\\n    x11-utils \\\n    libx11-dev \\\n    qt5-default \\\n    &amp;&amp; apt-get clean\n\nENV DISPLAY=:99\n\n# Switch to notebook user\nUSER $NB_UID\n\n# Upgrade the package managers\nRUN pip install --upgrade pip\nRUN npm i npm@latest -g\n\n# Install Python packages\nRUN pip install vtk &amp;&amp; \\\n    pip install boto &amp;&amp; \\\n    pip install h5py &amp;&amp; \\\n    pip install nose &amp;&amp; \\\n    pip install ipyevents &amp;&amp; \\\n    pip install ipywidgets &amp;&amp; \\\n    pip install mayavi &amp;&amp; \\\n    pip install nibabel &amp;&amp; \\\n    pip install numpy &amp;&amp; \\\n    pip install pillow &amp;&amp; \\\n    pip install pyqt5 &amp;&amp; \\\n    pip install scikit-learn &amp;&amp; \\\n    pip install scipy &amp;&amp; \\\n    pip install xvfbwrapper &amp;&amp; \\\n    pip install https://github.com/nipy/PySurfer/archive/master.zip\n\n# Install Jupyter notebook extensions\nRUN pip install RISE &amp;&amp; \\\n    jupyter nbextension install rise --py --sys-prefix &amp;&amp; \\\n    jupyter nbextension enable rise --py --sys-prefix &amp;&amp; \\\n    jupyter nbextension install mayavi --py --sys-prefix &amp;&amp; \\\n    jupyter nbextension enable mayavi --py --sys-prefix &amp;&amp; \\\n    npm cache clean --force\n\n# Try to decrease initial IPython kernel load times\nRUN ipython -c \"import matplotlib.pyplot as plt; print(plt)\"\n\n# Add an x-server to the entrypoint. This is needed by Mayavi\nENTRYPOINT [\"tini\", \"-g\", \"--\", \"xvfb-run\"]\n</code></pre>\n"}], "owner": {"reputation": 62, "user_id": 12081563, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1ea8e516dd5de4e926fbb8a5c636f64?s=128&d=identicon&r=PG&f=1", "display_name": "Qwaddles", "link": "https://stackoverflow.com/users/12081563/qwaddles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 504, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1579896753, "creation_date": 1577826534, "question_id": 59548454, "link": "https://stackoverflow.com/questions/59548454/python3-mayavi-in-docker-not-installing", "title": "python3 mayavi in docker not installing", "body": "<p>I am trying to get mayavi working inside a docker container and originally I was starting my Dockerfile from continuumio/anaconda3. I did a \"conda install mayavi\" it would appear to install but as soon as I tried to import it or vtk for that matter I would get:</p>\n\n<p>\"ModuleNotFoundError: No module named 'vtkRenderingOpenGL2Python'\"</p>\n\n<p>When I try installing it from pip3 it fails to install with \"ModuleNotFoundError: No module named 'vtkOpenGLKitPython'\"</p>\n\n<p>I have tried it starting from centos:7 and get the same issues. I guess its worth mentioning that a conda search or pip search of these modules comes up blank. However I can install it outside of docker and everything goes fine.</p>\n\n<p>If it helps, my current Dockerfile looks like:</p>\n\n<pre><code>FROM centos:7\nRUN yum install vim -y\nRUN yum install python3 -y\nRUN yum install python3-pip -y\nRUN yum install python3-devel -y\nRUN yum install gcc -y\n\n#RUN pip3 install mayavi\n#RUN pip3 install PyQt5\n\nRUN mkdir /home/working\nWORKDIR /home/working\n</code></pre>\n\n<p>I have been at this for some time now and any help would be appreciated.</p>\n"}, {"tags": ["python", "arrays", "numpy", "matplotlib", "plot"], "comments": [{"owner": {"reputation": 787, "user_id": 461201, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/1855065ded5988265e54572b2af3f139?s=128&d=identicon&r=PG", "display_name": "knk", "link": "https://stackoverflow.com/users/461201/knk"}, "edited": false, "score": 1, "creation_date": 1577827213, "post_id": 59548448, "comment_id": 105266047, "body": "I would advise you to add comments to the code or provide an explantation of the steps, not the math but the code. Also, please tell us the what you have discovered in the time spent debugging this code so we don&#39;t have to eliminate the same causes."}, {"owner": {"reputation": 787, "user_id": 461201, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/1855065ded5988265e54572b2af3f139?s=128&d=identicon&r=PG", "display_name": "knk", "link": "https://stackoverflow.com/users/461201/knk"}, "edited": false, "score": 1, "creation_date": 1577836024, "post_id": 59548448, "comment_id": 105267432, "body": "You should also provide details for executing the code and show the plots you speak of"}, {"owner": {"reputation": 41, "user_id": 12567706, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDtjfNMHaJPdyYTu2SXFh_Xkn4jQWts9NyvEDpA-Q=k-s128", "display_name": "zwolfgang", "link": "https://stackoverflow.com/users/12567706/zwolfgang"}, "reply_to_user": {"reputation": 787, "user_id": 461201, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/1855065ded5988265e54572b2af3f139?s=128&d=identicon&r=PG", "display_name": "knk", "link": "https://stackoverflow.com/users/461201/knk"}, "edited": false, "score": 0, "creation_date": 1577839458, "post_id": 59548448, "comment_id": 105267801, "body": "My bad, just added some comments and and the 2x3 plot. To execute, you just run it and it spits out the equation number, overall iteration number and y value at x = 10 to the console and opens a plot that auto-updates. Cheers, and Happy New Year!"}, {"owner": {"reputation": 787, "user_id": 461201, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/1855065ded5988265e54572b2af3f139?s=128&d=identicon&r=PG", "display_name": "knk", "link": "https://stackoverflow.com/users/461201/knk"}, "edited": false, "score": 0, "creation_date": 1577997284, "post_id": 59548448, "comment_id": 105307121, "body": "Happy new year! I think you may have an issue with shared memory in multiprocessing. The main thread has an array which is initialized to all zeros, the children are calculating values in their memory space but this memory space is not shared with the main thread. You could look into shared memory semantics."}], "owner": {"reputation": 41, "user_id": 12567706, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDtjfNMHaJPdyYTu2SXFh_Xkn4jQWts9NyvEDpA-Q=k-s128", "display_name": "zwolfgang", "link": "https://stackoverflow.com/users/12567706/zwolfgang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1577839621, "creation_date": 1577826460, "last_edit_date": 1577839621, "question_id": 59548448, "link": "https://stackoverflow.com/questions/59548448/after-running-through-my-algorithm-fine-my-array-returns-as-all-zeros", "title": "After running through my algorithm fine, my array returns as all zeros", "body": "<p>I've spent a long time finally getting my algorithm to invert Laplace transforms and live plot them to work, but unfortunately, although it seems to run fine within the function, it continuously just plots zeros!</p>\n\n<p><a href=\"https://i.stack.imgur.com/xRKtx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xRKtx.png\" alt=\"enter image description here\"></a></p>\n\n<p>I've wasted so much time getting this thing to work, and now I have no clue what could be wrong. So forgive me but I think I'll have to post the whole thing.</p>\n\n<p>The equation this is based on is a series-integral and it iterates until the series converges. However, it converges super slowly so I used Aitken's delta-squared method to speed the whole thing up. The goal is to populate array <code>y</code> with each Aitken's iteration from 0.000001 to 10 and then compare the estimation' integral with the previous iteration's if a random point in the former is close enough to the latter. This loops until the integrals have a difference of less than 0.01 or a set amount of iterations is reached (~30000).</p>\n\n<p>This happens for 6 equations simultaneously using parallel processing. The graph live plots all 6 (in blue) compared to each of the actual equations they're converging towards (in red) using matplotlib.</p>\n\n<p>For debugging, I basically tried putting a bunch of print statements everywhere in the <code>f_u</code> function to see what was going on. Everything looked like it was going fine. But in the <code>__main__</code> function and <code>plot</code> functions when I did the same, I was getting all zeros for the same array. I thought it was a local vs. global issue so I put <code>global y</code> in the <code>plot</code> and <code>f_u</code>, with no luck.</p>\n\n<p>To execute this, you're gonna need all the packages in the import statement, including numba. You can remove the <code>@jit</code> decorations on the Laplace functions if you don't want numba, but it will be sloooooow.</p>\n\n<p>Here it is:</p>\n\n<pre><code>import matplotlib.pyplot as plt\nfrom matplotlib import style\nfrom matplotlib import animation\nimport numpy as np\nfrom scipy.integrate import quad, simps\nfrom scipy.special import jv\nimport math\nimport random\nimport datetime\nimport multiprocessing as mp\nfrom numba import jit\n\nstart = datetime.datetime.now()     # Record time start\n\n# Initialize plot\nstyle.use('fivethirtyeight')\n\nfig, axes = plt.subplots(3, 2)\n((ax1, ax2), (ax3, ax4), (ax5, ax6)) = axes\n\nplt.autoscale(enable=True)\n\nfor ax in axes.flat:\n    ax.label_outer()\n\n# Initialize variables\ngamma = np.array([np.nan, 1, 1, 0, 1, 2, 1])    # Bromwich contour parameter for each equation\nnum = 6     # Number of equations to be processed in total\nn = 0   # Repetition constant for equation 3, set to either zero or 1 (diverges at 1)\nmax_count = 1000   # Number of data points in x and y\nepsilon = 10 ** -40     # Minimum number to divide by in Aitken's iteration\nerr = 10 ** -4    # Maximum difference in y to trigger comparison in closing()\nmax_err = 0.01    # Maximum difference in integrals computed in closing() to end iteration process\n\nx_0 = 0     # Set first integral to 0 for now\nresult = np.zeros(7)    # Vector to store Aitken's iteration for closing() comparison\nprevious = np.zeros(7)     # Vector to store iteration before Aitken's for closing() comparison\nend = np.zeros(7)     # Vector to store end conditions -- running = 0, ended = 1\n\nu, step = np.linspace(0.000001, 10, max_count, retstep=True)    # Initializing x values\n\ny = np.empty([num, 4, max_count])     # Initializing y values -- form is y[equation number][iteration in Aitken's][x value]\ny_denom = np.empty([num, max_count])    # Initializing array to store Aitken's denominator values for each equation\nx_iter = np.empty([num, max_count])    # Initializing array to store Aitken's iteration as starting point for next iteration\n\ndef printer(num, k):    # Prints the equation number, iteration and y value at 10\n    if num == 1:\n        print(str(num) + \"    \" + str(k) + \"    \" + str(y[0][3][max_count-1]) + \"\\n\")\n    elif num == 2:\n        print(str(num) + \"    \" + str(k) + \"    \" + str(y[1][3][max_count-1]) + \"\\n\")\n    elif num == 3:\n        print(str(num) + \"    \" + str(k) + \"    \" + str(y[2][3][max_count-1]) + \"\\n\")\n    elif num == 4:\n        print(str(num) + \"    \" + str(k) + \"    \" + str(y[3][3][max_count-1]) + \"\\n\")\n    elif num == 5:\n        print(str(num) + \"    \" + str(k) + \"    \" + str(y[4][3][max_count-1]) + \"\\n\")\n    elif num == 6:\n        print(str(num) + \"    \" + str(k) + \"    \" + str(y[5][3][max_count-1]) + \"\\n\")\n\ndef plot1():    # Plots estimation 1 (blue) and actual equation 1 (red)\n    global y\n    ax1.clear()\n    line1, = ax1.plot(u, y[0][3][0:max_count])\n    ax1.plot(u, np.sin(u), 'tab:red')\n    return line1,\n\ndef plot2():    # Plots estimation 2 (blue) and actual equation 2 (red)\n    global y\n    ax2.clear()\n    line2, = ax2.plot(u, y[1][3][0:max_count])\n    ax2.plot(u, np.heaviside(u, 1), 'tab:red')\n    return line2,\n\ndef plot3():    # Plots estimation 3 (blue) and actual equation 3 (red)\n    global y\n    ax3.clear()\n    line3, = ax3.plot(u, y[2][3][0:max_count])\n    ax3.plot(u, np.cos(2 * np.sqrt(u)) / np.sqrt(np.pi * u), 'tab:red')\n    return line3,\n\ndef plot4():    # Plots estimation 4 (blue) and actual equation 4 (red)\n    global y\n    ax4.clear()\n    line4, = ax4.plot(u, y[3][3][0:max_count])\n    ax4.plot(u, np.log(u), 'tab:red')\n    return line4,\n\ndef plot5():    # Plots estimation 5 (blue) and actual equation 5 (red)\n    global y\n    ax5.clear()\n    line5, = ax5.plot(u, y[4][3][0:max_count])\n    ax5.plot(u, np.heaviside(u - 1, 1) - np.heaviside(u - 2, 1), 'tab:red')\n    return line5,\n\ndef plot6():    # Plots estimation 6 (blue) and actual equation 6 (red)\n    global y\n    ax6.clear()\n    line6, = ax6.plot(u, y[5][3][0:max_count])\n    ax6.plot(u, jv(0, u), 'tab:red')\n    return line6,\n\ndef animate(i):     # Plots all equations, used to live-update graph\n    ln1, = plot1()\n    ln2, = plot2()\n    ln3, = plot3()\n    ln4, = plot4()\n    ln5, = plot5()\n    ln6, = plot6()\n    return ln1, ln2, ln3, ln4, ln5, ln6,\n\n@jit(nopython=True, cache=True)\ndef f_p1(omega, u, k):      # Equation 1, Laplace form\n    b = (omega + k * np.pi) / u\n    a = gamma[1]\n\n    f1 = a * (1 / (a ** 2 + (b + 1) ** 2) + 1 / (a ** 2 + (b - 1) ** 2)) * np.cos(omega)\n    return f1\n\n@jit(nopython=True, cache=True)\ndef f_p2(omega, u, k):      # Equation 2, Laplace form\n    b = (omega + k * np.pi) / u\n    a = gamma[2]\n\n    f2 = a / (a ** 2 + b ** 2) * np.cos(omega)\n    return f2\n\n@jit(nopython=True, cache=True)\ndef f_p3(omega, u, k):      # Equation 3, Laplace form\n    b = (omega + k * np.pi) / u\n    a = gamma[3]\n\n    f3 = np.e ** (-a / (a ** 2 + b ** 2)) * (a ** 2 + b ** 2) ** (1 / 4) * np.cos(\n        (math.atan2(b, a) + 2 * n * np.pi) / 2) * np.cos(b / (a ** 2 + b ** 2)) / (\n                np.sqrt(a ** 2 + b ** 2) * (np.cos((math.atan2(b, a) + 2 * n * np.pi) / 2) ** 2 + np.sin(\n                    (math.atan2(b, a) + 2 * n * np.pi) / 2))) * np.cos(omega)\n    return f3\n\n@jit(nopython=True, cache=True)\ndef f_p4(omega, u, k):      # Equation 4, Laplace form\n    b = (omega + k * np.pi) / u\n    a = gamma[4]\n\n    f4 = -(a * np.log(a ** 2 + b ** 2) + a * np.e) / (a ** 2 + b ** 2) * np.cos(omega)\n    return f4\n\n@jit(nopython=True, cache=True)\ndef f_p5(omega, u, k):      # Equation 5, Laplace form\n    b = (omega + k * np.pi) / u\n    a = gamma[5]\n\n    f5 = a * (np.e ** (-a) * np.cos(b) - np.e ** (-2 * a) * np.cos(2 * b)) / (a ** 2 + b ** 2) * np.cos(omega)\n    return f5\n\n@jit(nopython=True, cache=True)\ndef f_p6(omega, u, k):      # Equation 6, Laplace form\n    b = (omega + k * np.pi) / u\n    a = gamma[6]\n\n    f6 = np.sqrt((a ** 2 - b ** 2 + 1) ** 2 + (2 * a * b) ** 2) * np.cos(\n        (math.atan2(2 * a * b, a ** 2 - b ** 2 + 1) + 2 * n * np.pi) / 2) / (\n            ((a ** 2 - b ** 2 + 1) ** 2 + (2 * a * b) ** 2) * (\n                np.cos((math.atan2(2 * a * b, a ** 2 - b ** 2 + 1) + 2 * n * np.pi) / 2) ** 2 + np.sin(\n                    (math.atan2(2 * a * b, a ** 2 - b ** 2 + 1) + 2 * n * np.pi) / 2) ** 2)) * np.cos(omega)\n    return f6\n\ndef closing(result, previous, num, k):    # Checks for convergence. If so, adds each term to f_0 and ends process\n    if abs(result - previous) &lt; max_err:\n        diff = abs(result - previous)\n\n        print(\"Equation \" + str(num) + \" converges to \" + str(diff) + \" with \" + str(k) + \" iterations.\" + \"\\n\")\n\n        if num == 1:\n            for i in range(max_count):\n                y[0][3][i] += f_0(num)\n            end[1] += 1\n            return 1\n        elif num == 2:\n            for i in range(max_count):\n                y[1][3][i] += f_0(num)\n            end[2] += 1\n            return 1\n        elif num == 3:\n            for i in range(max_count):\n                y[2][3][i] += f_0(num)\n            end[3] += 1\n            return 1\n        elif num == 4:\n            for i in range(max_count):\n                y[3][3][i] += f_0(num)\n            end[4] += 1\n            return 1\n        elif num == 5:\n            for i in range(max_count):\n                y[4][3][i] += f_0(num)\n            end[5] += 1\n            return 1\n        elif num == 6:\n            for i in range(max_count):\n                y[5][3][i] += f_0(num)\n            end[6] += 1\n            return 1\n    else:\n        print(\"Equation \" + str(num) + \" has not yet converged.\\n\")\n        return 0\n\ndef f_0(num):     # Initial integral in the series. Added at end after closing() convergence test\n    for i in range(max_count):\n        if num == 1:\n            x_0 = 2 * np.e ** (gamma[num] * u[i]) / (np.pi * u[i]) * quad(\n                f_p1, 0, np.pi / 2, args=(u[i], 0))[0]\n        elif num == 2:\n            x_0 = 2 * np.e ** (gamma[num] * u[i]) / (np.pi * u[i]) * quad(\n                f_p2, 0, np.pi / 2, args=(u[i], 0))[0]\n        elif num == 3:\n            x_0 = 2 * np.e ** (gamma[num] * u[i]) / (np.pi * u[i]) * quad(\n                f_p3, 0, np.pi / 2, args=(u[i], 0))[0]\n        elif num == 4:\n            x_0 = 2 * np.e ** (gamma[num] * u[i]) / (np.pi * u[i]) * quad(\n                f_p4, 0, np.pi / 2, args=(u[i], 0))[0]\n        elif num == 5:\n            x_0 = 2 * np.e ** (gamma[num] * u[i]) / (np.pi * u[i]) * quad(\n                f_p5, 0, np.pi / 2, args=(u[i], 0))[0]\n        elif num == 6:\n            x_0 = 2 * np.e ** (gamma[num] * u[i]) / (np.pi * u[i]) * quad(\n                f_p6, 0, np.pi / 2, args=(u[i], 0))[0]\n\n    return x_0\n\ndef f_u(u, num):    # Main algorithm. Here, the summation integrals iterate\n    global y, result, previous    # Forces retrieval of from global of these arrays? (attempt to debug)\n    k = 1   # Number of iterations\n\n    for i in range(max_count):  # First overall series iteration (initial 1st)\n        if num == 1:\n            y[0][0][i] = 2 * np.e ** (gamma[num] * u[i]) / (np.pi * u[i]) * (-1) ** k * quad(\n                f_p1, -np.pi / 2, np.pi / 2, args=(u[i], k))[0]\n        elif num == 2:\n            y[1][0][i] = 2 * np.e ** (gamma[num] * u[i]) / (np.pi * u[i]) * (-1) ** k * quad(\n                f_p2, -np.pi / 2, np.pi / 2, args=(u[i], k))[0]\n        elif num == 3:\n            y[2][0][i] = 2 * np.e ** (gamma[num] * u[i]) / (np.pi * u[i]) * (-1) ** k * quad(\n                f_p3, -np.pi / 2, np.pi / 2, args=(u[i], k))[0]\n        elif num == 4:\n            y[3][0][i] = 2 * np.e ** (gamma[num] * u[i]) / (np.pi * u[i]) * (-1) ** k * quad(\n                f_p4, -np.pi / 2, np.pi / 2, args=(u[i], k))[0]\n        elif num == 5:\n            y[4][0][i] = 2 * np.e ** (gamma[num] * u[i]) / (np.pi * u[i]) * (-1) ** k * quad(\n                f_p5, -np.pi / 2, np.pi / 2, args=(u[i], k))[0]\n        elif num == 6:\n            y[5][0][i] = 2 * np.e ** (gamma[num] * u[i]) / (np.pi * u[i]) * (-1) ** k * quad(\n                f_p6, -np.pi / 2, np.pi / 2, args=(u[i], k))[0]\n\n    for j in range(10000):   # Iteration loop. Goes until closing() or k = ~6000 for each equation\n        if j &gt; 0:\n            for i in range(max_count):  # Sets the first iteration (out of 3 for Aitken's) equal to the previous Aitken's or the first iteration if j = 0 (1st)\n                if num == 1:\n                    y[0][0][i] = x_iter[0][i]\n                elif num == 2:\n                    y[1][0][i] = x_iter[1][i]\n                elif num == 3:\n                    y[2][0][i] = x_iter[2][i]\n                elif num == 4:\n                    y[3][0][i] = x_iter[3][i]\n                elif num == 5:\n                    y[4][0][i] = x_iter[4][i]\n                elif num == 6:\n                    y[5][0][i] = x_iter[5][i]\n            else:\n                k += 1\n\n        for i in range(max_count):  # Second iteration for Aitken's (2nd)\n            if num == 1:\n                y[0][1][i] = 2 * np.e ** (gamma[num] * u[i]) / (np.pi * u[i]) * (-1) ** k * quad(\n                    f_p1, -np.pi / 2, np.pi / 2, args=(u[i], k))[0]\n            elif num == 2:\n                y[1][1][i] = 2 * np.e ** (gamma[num] * u[i]) / (np.pi * u[i]) * (-1) ** k * quad(\n                    f_p2, -np.pi / 2, np.pi / 2, args=(u[i], k))[0]\n            elif num == 3:\n                y[2][1][i] = 2 * np.e ** (gamma[num] * u[i]) / (np.pi * u[i]) * (-1) ** k * quad(\n                    f_p3, -np.pi / 2, np.pi / 2, args=(u[i], k))[0]\n            elif num == 4:\n                y[3][1][i] = 2 * np.e ** (gamma[num] * u[i]) / (np.pi * u[i]) * (-1) ** k * quad(\n                    f_p4, -np.pi / 2, np.pi / 2, args=(u[i], k))[0]\n            elif num == 5:\n                y[4][1][i] = 2 * np.e ** (gamma[num] * u[i]) / (np.pi * u[i]) * (-1) ** k * quad(\n                    f_p5, -np.pi / 2, np.pi / 2, args=(u[i], k))[0]\n            elif num == 6:\n                y[5][1][i] = 2 * np.e ** (gamma[num] * u[i]) / (np.pi * u[i]) * (-1) ** k * quad(\n                    f_p6, -np.pi / 2, np.pi / 2, args=(u[i], k))[0]\n\n        k += 1\n\n        for i in range(max_count):  # Third iteration for Aitken's (3rd)\n            if num == 1:\n                y[0][2][i] = 2 * np.e ** (gamma[num] * u[i]) / (np.pi * u[i]) * (-1) ** k * quad(\n                    f_p1, -np.pi / 2, np.pi / 2, args=(u[i], k))[0]\n            elif num == 2:\n                y[1][2][i] = 2 * np.e ** (gamma[num] * u[i]) / (np.pi * u[i]) * (-1) ** k * quad(\n                    f_p2, -np.pi / 2, np.pi / 2, args=(u[i], k))[0]\n            elif num == 3:\n                y[2][2][i] = 2 * np.e ** (gamma[num] * u[i]) / (np.pi * u[i]) * (-1) ** k * quad(\n                    f_p3, -np.pi / 2, np.pi / 2, args=(u[i], k))[0]\n            elif num == 4:\n                y[3][2][i] = 2 * np.e ** (gamma[num] * u[i]) / (np.pi * u[i]) * (-1) ** k * quad(\n                    f_p4, -np.pi / 2, np.pi / 2, args=(u[i], k))[0]\n            elif num == 5:\n                y[4][2][i] = 2 * np.e ** (gamma[num] * u[i]) / (np.pi * u[i]) * (-1) ** k * quad(\n                    f_p5, -np.pi / 2, np.pi / 2, args=(u[i], k))[0]\n            elif num == 6:\n                y[5][2][i] = 2 * np.e ** (gamma[num] * u[i]) / (np.pi * u[i]) * (-1) ** k * quad(\n                    f_p6, -np.pi / 2, np.pi / 2, args=(u[i], k))[0]\n\n        k += 1\n\n        for i in range(max_count):  # Aitken's delta-squared method iteration using the previous 3 (4th)\n            if num == 1:\n                y_denom[0][i] = (y[0][2][i] - y[0][1][i]) - (y[0][1][i] - y[0][0][i])\n\n                if abs(y_denom[0][i]) &lt; epsilon:\n                    print(\"Denominator too small to calculate. Exiting...\\n\")\n                    return 9\n\n                y[0][3][i] = y[0][2][i] - ((y[0][2][i] - y[0][1][i]) ** 2) / y_denom[0][i]\n            elif num == 2:\n                y_denom[1][i] = (y[1][2][i] - y[1][1][i]) - (y[1][1][i] - y[1][0][i])\n\n                if abs(y_denom[1][i]) &lt; epsilon:\n                    print(\"Denominator too small to calculate. Exiting...\\n\")\n                    return 9\n\n                y[1][3][i] = y[1][2][i] - ((y[1][2][i] - y[1][1][i]) ** 2) / y_denom[1][i]\n            elif num == 3:\n                y_denom[2][i] = (y[2][2][i] - y[2][1][i]) - (y[2][1][i] - y[2][0][i])\n\n                if abs(y_denom[2][i]) &lt; epsilon:\n                    print(\"Denominator too small to calculate. Exiting...\\n\")\n                    return 9\n\n                y[2][3][i] = y[2][2][i] - ((y[2][2][i] - y[2][1][i]) ** 2) / y_denom[2][i]\n            elif num == 4:\n                y_denom[3][i] = (y[3][2][i] - y[3][1][i]) - (y[3][1][i] - y[3][0][i])\n\n                if abs(y_denom[3][i]) &lt; epsilon:\n                    print(\"Denominator too small to calculate. Exiting...\\n\")\n                    return 9\n\n                y[3][3][i] = y[3][2][i] - ((y[3][2][i] - y[3][1][i]) ** 2) / y_denom[3][i]\n            elif num == 5:\n                y_denom[4][i] = (y[4][2][i] - y[4][1][i]) - (y[4][1][i] - y[4][0][i])\n\n                if abs(y_denom[4][i]) &lt; epsilon:\n                    print(\"Denominator too small to calculate. Exiting...\\n\")\n                    return 9\n\n                y[4][3][i] = y[4][2][i] - ((y[4][2][i] - y[4][1][i]) ** 2) / y_denom[4][i]\n            elif num == 6:\n                y_denom[5][i] = (y[5][2][i] - y[5][1][i]) - (y[5][1][i] - y[5][0][i])\n\n                if abs(y_denom[5][i]) &lt; epsilon:\n                    print(\"Denominator too small to calculate. Exiting...\\n\")\n                    return 9\n\n                y[5][3][i] = y[5][2][i] - ((y[5][2][i] - y[5][1][i]) ** 2) / y_denom[5][i]\n\n        k += 1\n        printer(num, k)\n\n        rand = random.randrange(0, max_count)   # Setting random number for x value\n\n        # Comparison between y at random x in Aitken's vs the previous iteration. If close enough, triggers closing()\n        if num == 1:\n            if abs(y[0][3][rand] - y[0][2][rand]) &lt; err:\n                result[num] = simps(y[0][3][0:max_count], u, dx=step)   #Integrates Aitken's iteration (4th)\n                previous[num] = simps(y[0][2][0:max_count], u, dx=step)    #Integrates integration before Aitken's (3rd)\n                c1 = closing(result[num], previous[num], num, k)\n                if c1 == 1:\n                    break\n        elif num == 2:\n            if abs(y[1][3][rand] - y[1][2][rand]) &lt; err:\n                result[num] = simps(y[1][3][0:max_count], u, dx=step)\n                previous[num] = simps(y[1][2][0:max_count], u, dx=step)\n                c2 = closing(result[num], previous[num], num, k)\n                if c2 == 1:\n                    break\n        elif num == 3:\n            if abs(y[2][3][rand] - y[2][2][rand]) &lt; err:\n                result[num] = simps(y[2][3][0:max_count], u, dx=step)\n                previous[num] = simps(y[2][2][0:max_count], u, dx=step)\n                c3 = closing(result[num], previous[num], num, k)\n                if c3 == 1:\n                    break\n        elif num == 4:\n            if abs(y[3][3][rand] - y[3][2][rand]) &lt; err:\n                result[num] = simps(y[3][3][0:max_count], u, dx=step)\n                previous[num] = simps(y[3][2][0:max_count], u, dx=step)\n                c4 = closing(result[num], previous[num], num, k)\n                if c4 == 1:\n                    break\n        elif num == 5:\n            if abs(y[4][3][rand] - y[4][2][rand]) &lt; err:\n                result[num] = simps(y[4][3][0:max_count], u, dx=step)\n                previous[num] = simps(y[4][2][0:max_count], u, dx=step)\n                c5 = closing(result[num], previous[num], num, k)\n                if c5 == 1:\n                    break\n        elif num == 6:\n            if abs(y[5][3][rand] - y[5][2][rand]) &lt; err:\n                result[num] = simps(y[5][3][0:max_count], u, dx=step)\n                previous[num] = simps(y[5][2][0:max_count], u, dx=step)\n                c6 = closing(result[num], previous[num], num, k)\n                if c6 == 1:\n                    break\n\n        for i in range(max_count):  # Setting current Aitken's iteration to first iteration\n            if num == 1:\n                x_iter[0][i] = y[0][3][i]\n            elif num == 2:\n                x_iter[1][i] = y[1][3][i]\n            elif num == 3:\n                x_iter[2][i] = y[2][3][i]\n            elif num == 4:\n                x_iter[3][i] = y[3][3][i]\n            elif num == 5:\n                x_iter[4][i] = y[4][3][i]\n            elif num == 6:\n                x_iter[5][i] = y[5][3][i]\n\n    # If iteration limit reached, sets process closing condition to 1 and returns to main\n    end[num] = 1\n    return\n\nif __name__ == '__main__':\n    i = 0\n\n    # Define and begin processes, one for each equation\n    p1 = mp.Process(target=f_u, args=(u, 1))\n    p2 = mp.Process(target=f_u, args=(u, 2))\n    p3 = mp.Process(target=f_u, args=(u, 3))\n    p4 = mp.Process(target=f_u, args=(u, 4))\n    p5 = mp.Process(target=f_u, args=(u, 5))\n    p6 = mp.Process(target=f_u, args=(u, 6))\n\n    p1.start()\n    p2.start()\n    p3.start()\n    p4.start()\n    p5.start()\n    p6.start()\n\n    # While any equation is running, update and show the plot every second\n    while end[1] != 1 or end[2] != 1 or end[3] != 1 or end[4] != 1 or end[5] != 1 or end[6] != 1:\n        animation.FuncAnimation(fig, animate, interval=1000, blit=True)\n        plt.pause(1)\n        plt.show(block=False)\n        plt.pause(1)\n\n    # Joining and closing each process when complete\n    p1.join()\n    p1.terminate()\n    p2.join()\n    p2.terminate()\n    p3.join()\n    p3.terminate()\n    p4.join()\n    p4.terminate()\n    p5.join()\n    p5.terminate()\n    p6.join()\n    p6.terminate()\n\n    end = datetime.datetime.now()   # Record time end\n\n    print(\"Runtime: \" + str(end - start))\n\n    # Updates and plots final result\n    animate(i)\n    plt.show()\n\n    exit(0)\n</code></pre>\n\n<p>Hope you can help me out. Thanks in advance.</p>\n"}, {"tags": ["python", "django", "django-models"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1577826551, "post_id": 59548447, "comment_id": 105265928, "body": "No, since the update is done at the database side, and Django will not know how to &quot;encode&quot; <code>str_to_decimal</code> to an SQL expression."}, {"owner": {"reputation": 17762, "user_id": 548562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26587173d9156d8ec3114c8700d1b693?s=128&d=identicon&r=PG", "display_name": "Iain Shelvington", "link": "https://stackoverflow.com/users/548562/iain-shelvington"}, "edited": false, "score": 0, "creation_date": 1577826577, "post_id": 59548447, "comment_id": 105265932, "body": "Which version of Django are you using that doesn&#39;t have the update method?"}, {"owner": {"reputation": 169, "user_id": 994013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54f4042618f94ca3e571770545cbba5f?s=128&d=identicon&r=PG", "display_name": "user994013", "link": "https://stackoverflow.com/users/994013/user994013"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1577827800, "post_id": 59548447, "comment_id": 105266156, "body": "@WillemVanOnsem - OK that&#39;s what I thought, I just didn&#39;t know if there was anything else I could do. Thank you. @Iain Shlvington - Django doesn&#39;t have bulk_update before version 2.2. I could have at least updated my fields and used that instead of <code>save()</code>"}], "answers": [{"comments": [{"owner": {"reputation": 169, "user_id": 994013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54f4042618f94ca3e571770545cbba5f?s=128&d=identicon&r=PG", "display_name": "user994013", "link": "https://stackoverflow.com/users/994013/user994013"}, "edited": false, "score": 0, "creation_date": 1577827899, "post_id": 59548477, "comment_id": 105266173, "body": "Thanks. I can use Cast for some of them, but some are special characters that we need to handle separately from Cast. Thanks!"}, {"owner": {"reputation": 17762, "user_id": 548562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26587173d9156d8ec3114c8700d1b693?s=128&d=identicon&r=PG", "display_name": "Iain Shelvington", "link": "https://stackoverflow.com/users/548562/iain-shelvington"}, "reply_to_user": {"reputation": 169, "user_id": 994013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54f4042618f94ca3e571770545cbba5f?s=128&d=identicon&r=PG", "display_name": "user994013", "link": "https://stackoverflow.com/users/994013/user994013"}, "edited": false, "score": 0, "creation_date": 1577843668, "post_id": 59548477, "comment_id": 105268236, "body": "Give examples of the special characters and maybe I can suggest some other functions to use"}, {"owner": {"reputation": 169, "user_id": 994013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54f4042618f94ca3e571770545cbba5f?s=128&d=identicon&r=PG", "display_name": "user994013", "link": "https://stackoverflow.com/users/994013/user994013"}, "edited": false, "score": 0, "creation_date": 1577975123, "post_id": 59548477, "comment_id": 105297641, "body": "Sorry, I shouldn&#39;t have said characters. We have some string values like &#39;1-1/4&quot;&#39; that need converted to 1.25"}], "tags": [], "owner": {"reputation": 17762, "user_id": 548562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26587173d9156d8ec3114c8700d1b693?s=128&d=identicon&r=PG", "display_name": "Iain Shelvington", "link": "https://stackoverflow.com/users/548562/iain-shelvington"}, "is_accepted": false, "score": 0, "last_activity_date": 1577826726, "creation_date": 1577826726, "answer_id": 59548477, "question_id": 59548447, "link": "https://stackoverflow.com/questions/59548447/can-i-pass-an-f-expression-value-into-my-own-function-and-still-call-update-in/59548477#59548477", "title": "Can I pass an F() expression value into my own function and still call update in Django?", "body": "<p>You can use the <a href=\"https://docs.djangoproject.com/en/3.0/ref/models/database-functions/#cast\" rel=\"nofollow noreferrer\"><code>Cast</code></a> function to cast fields to another type</p>\n\n<pre><code>Foo.objects.update(\n   biz=Cast(models.F('bar'), output_field=models.DecimalField()),\n   bang=Cast(models.F('fizz'), output_field=models.DecimalField())\n)\n</code></pre>\n"}], "owner": {"reputation": 169, "user_id": 994013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54f4042618f94ca3e571770545cbba5f?s=128&d=identicon&r=PG", "display_name": "user994013", "link": "https://stackoverflow.com/users/994013/user994013"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 143, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577826726, "creation_date": 1577826457, "question_id": 59548447, "link": "https://stackoverflow.com/questions/59548447/can-i-pass-an-f-expression-value-into-my-own-function-and-still-call-update-in", "title": "Can I pass an F() expression value into my own function and still call update in Django?", "body": "<p>I need to convert a bunch of fields on a certain Django (1.9) model from string to decimals.  Instead of doing this:</p>\n\n<pre><code>for x in Foo.objects.all():\n    x.biz = str_to_decimal(x.bar)\n    x.bang = str_to_decimal(x.fizz)\n    ...\n    x.save()\n</code></pre>\n\n<p>I want to be able to do something like this:</p>\n\n<pre><code>fields = {\n    'biz': str_to_decimal(models.F('bar')),\n    'bang': str_to_decimal(models.F('fizz')),\n   }\n\nFoo.objects.update(**fields)\n</code></pre>\n\n<p>The bulk update functionality isn't available to me either since it's only in a later version of Django. Any thoughts? Thank you.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 9368, "user_id": 1390548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adee99f66a15a8e049467a0fca2b80eb?s=128&d=identicon&r=PG&f=1", "display_name": "Jawad", "link": "https://stackoverflow.com/users/1390548/jawad"}, "edited": false, "score": 0, "creation_date": 1577826361, "post_id": 59548434, "comment_id": 105265886, "body": "have you tried print() ? or how about ignoring the print statement via an if statement ?"}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1577826411, "post_id": 59548434, "comment_id": 105265893, "body": "Why do you need another way?"}, {"owner": {"reputation": 2454, "user_id": 8784938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/753bb55c80a644f950a41ae11cfbe48c?s=128&d=identicon&r=PG&f=1", "display_name": "SuperStew", "link": "https://stackoverflow.com/users/8784938/superstew"}, "edited": false, "score": 0, "creation_date": 1577826489, "post_id": 59548434, "comment_id": 105265915, "body": "why do you need python to print nothing?"}, {"owner": {"reputation": 13, "user_id": 11432525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FVhS8.gif?s=128&g=1", "display_name": "brajbliss", "link": "https://stackoverflow.com/users/11432525/brajbliss"}, "reply_to_user": {"reputation": 9368, "user_id": 1390548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adee99f66a15a8e049467a0fca2b80eb?s=128&d=identicon&r=PG&f=1", "display_name": "Jawad", "link": "https://stackoverflow.com/users/1390548/jawad"}, "edited": false, "score": 0, "creation_date": 1577826502, "post_id": 59548434, "comment_id": 105265919, "body": "@Jawad i did not get what you said in the latter, how via if statements?"}, {"owner": {"reputation": 2454, "user_id": 8784938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/753bb55c80a644f950a41ae11cfbe48c?s=128&d=identicon&r=PG&f=1", "display_name": "SuperStew", "link": "https://stackoverflow.com/users/8784938/superstew"}, "edited": false, "score": 0, "creation_date": 1577826503, "post_id": 59548434, "comment_id": 105265920, "body": "or do you mean literally <code>print(&#39;nothing&#39;)</code>"}, {"owner": {"reputation": 13, "user_id": 11432525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FVhS8.gif?s=128&g=1", "display_name": "brajbliss", "link": "https://stackoverflow.com/users/11432525/brajbliss"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1577826616, "post_id": 59548434, "comment_id": 105265941, "body": "@jonrsharpe &amp; SuperStew because i need it to print something if the condition is true but i want it to print nothing when the condition is false. but i have to use the else condition every time we use if, right?"}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 1, "creation_date": 1577826652, "post_id": 59548434, "comment_id": 105265948, "body": "No, you don&#39;t have to. If you don&#39;t want to do anything in the <code>else</code> block, you don&#39;t have to include it at all (or you can just <code>pass</code> in it)."}, {"owner": {"reputation": 2454, "user_id": 8784938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/753bb55c80a644f950a41ae11cfbe48c?s=128&d=identicon&r=PG&f=1", "display_name": "SuperStew", "link": "https://stackoverflow.com/users/8784938/superstew"}, "edited": false, "score": 0, "creation_date": 1577826725, "post_id": 59548434, "comment_id": 105265960, "body": "@TheAmayJain so just don&#39;t have an <code>else</code> ?"}, {"owner": {"reputation": 45894, "user_id": 271415, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8648256cc53b261c5e1d266380a256fc?s=128&d=identicon&r=PG", "display_name": "jarmod", "link": "https://stackoverflow.com/users/271415/jarmod"}, "edited": false, "score": 0, "creation_date": 1577827014, "post_id": 59548434, "comment_id": 105266013, "body": "You presumably do not want Python to &quot;print nothing&quot; but rather you want Python &quot;to not print&quot;. So simply don&#39;t execute print() at all in that case. If you actually have to execute code in that scenario, which is unlikely, then use <code>pass</code>."}], "answers": [{"tags": [], "owner": {"reputation": 3730, "user_id": 5616096, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PjKci.jpg?s=128&g=1", "display_name": "Matthew Gaiser", "link": "https://stackoverflow.com/users/5616096/matthew-gaiser"}, "is_accepted": false, "score": 2, "last_activity_date": 1577826538, "creation_date": 1577826538, "answer_id": 59548456, "question_id": 59548434, "link": "https://stackoverflow.com/questions/59548434/how-to-print-nothing-when-using-if-statements/59548456#59548456", "title": "How to print nothing when using if statements", "body": "<ol>\n<li>For else, you could use use <code>pass</code></li>\n</ol>\n\n<pre><code>else:\n   pass\n</code></pre>\n\n<ol start=\"2\">\n<li><p>Or just not have the else at all. </p></li>\n<li><p>Or use <code>print(\"\")</code> as stated.</p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 4011, "user_id": 3700738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LRutm.jpg?s=128&g=1", "display_name": "Ismael Padilla", "link": "https://stackoverflow.com/users/3700738/ismael-padilla"}, "is_accepted": true, "score": 0, "last_activity_date": 1577826648, "creation_date": 1577826648, "answer_id": 59548466, "question_id": 59548434, "link": "https://stackoverflow.com/questions/59548434/how-to-print-nothing-when-using-if-statements/59548466#59548466", "title": "How to print nothing when using if statements", "body": "<p><strong>Printint an empty string:</strong></p>\n\n<p>In Python 2.x, you can do:</p>\n\n<pre><code>print\n</code></pre>\n\n<p>In Python 3.x, you must do:</p>\n\n<pre><code>print()\n</code></pre>\n\n<p>Note that <code>print()</code> also works on Python 2.x, and so it is my recommendation that you go with this. It is functionally similar to <code>print(\"\")</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 7405, "user_id": 5735010, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/znAEN.jpg?s=128&g=1", "display_name": "abhiarora", "link": "https://stackoverflow.com/users/5735010/abhiarora"}, "is_accepted": false, "score": 0, "last_activity_date": 1577827215, "last_edit_date": 1577827215, "creation_date": 1577826830, "answer_id": 59548484, "question_id": 59548434, "link": "https://stackoverflow.com/questions/59548434/how-to-print-nothing-when-using-if-statements/59548484#59548484", "title": "How to print nothing when using if statements", "body": "<blockquote>\n  <p>because i need it to print something if the condition is true but i want it to print nothing when the condition is false. but i have to use the else condition every time we use if, right? \u2013</p>\n</blockquote>\n\n<p>No. That's not correct!</p>\n\n<p>An <code>if</code> block in Python can be followed by either of the following:</p>\n\n<ol>\n<li><code>else</code> block</li>\n<li><code>elif</code> block</li>\n<li>Or non-conditional block or may be a different conditional block</li>\n</ol>\n\n<p>So, an else block isn't necessary in python after every <code>if</code> block. You can skip that like below:</p>\n\n<pre><code>if x &gt; 3:\n    print(\"it is &gt; 3\")\nprint(\"Out of if block\")\n</code></pre>\n\n<p>Just for your information: If you need to know how to have a print call which doesn't dp anything. In Python 2.x, you can do:</p>\n\n<pre><code>print\n</code></pre>\n\n<p>And in Python 3.x,</p>\n\n<pre><code>print()\n</code></pre>\n\n<p>It's better not to have such a call. You can also use <a href=\"https://stackoverflow.com/questions/13886168/how-to-use-the-pass-statement\">pass</a> in Python. </p>\n\n<blockquote>\n  <p>Python has the syntactical requirement that code blocks (after if, except, def, class etc.) cannot be empty. Therefore, if nothing is supposed to happen in a code block, a pass is needed for such a block to not produce an IndentationError.</p>\n</blockquote>\n"}], "owner": {"reputation": 13, "user_id": 11432525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FVhS8.gif?s=128&g=1", "display_name": "brajbliss", "link": "https://stackoverflow.com/users/11432525/brajbliss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1524, "favorite_count": 0, "closed_date": 1577826975, "accepted_answer_id": 59548466, "answer_count": 3, "score": 0, "last_activity_date": 1577827215, "creation_date": 1577826310, "question_id": 59548434, "link": "https://stackoverflow.com/questions/59548434/how-to-print-nothing-when-using-if-statements", "closed_reason": "Needs details or clarity", "title": "How to print nothing when using if statements", "body": "<p>I have to print something on the screen if some condition is true but if the condition is wrong i need python to print nothing, how do i do that?\nI used the below code but is there any other way to do the same?</p>\n\n<pre><code>else:\n     print(\"\")\n</code></pre>\n"}, {"tags": ["python", "pysimplegui"], "comments": [{"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1577832510, "post_id": 59548393, "comment_id": 105266971, "body": "The PySimpleGUI version isn&#39;t reading and processing keystrokes the same way as the demo, so I start debugging that. Do all the keystrokes fail to work, or just <code>w</code> and <code>s</code> (I ask because the latter are processed differently than <code>&#39;Up.&#39;</code> and <code>&#39;Down&#39;</code>).. Seems like you could use the demo to figure-out what values to look for in the game."}, {"owner": {"reputation": 3307, "user_id": 8743099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MCygy.png?s=128&g=1", "display_name": "Mike from PSG", "link": "https://stackoverflow.com/users/8743099/mike-from-psg"}, "edited": false, "score": 0, "creation_date": 1577903828, "post_id": 59548393, "comment_id": 105278747, "body": "From what I recall of the PySimpleGUI demo, you press the keys to cause movement, not hold them down.  The demo should probably be reworked / revisited as it was posted a long time ago."}, {"owner": {"reputation": 2366, "user_id": 1112406, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/abd557d2593a8fa81511a817b83c8f4b?s=128&d=identicon&r=PG", "display_name": "RussAbbott", "link": "https://stackoverflow.com/users/1112406/russabbott"}, "edited": false, "score": 0, "creation_date": 1577938130, "post_id": 59548393, "comment_id": 105284686, "body": "Releasing a key doesn&#39;t create an event."}], "owner": {"reputation": 2366, "user_id": 1112406, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/abd557d2593a8fa81511a817b83c8f4b?s=128&d=identicon&r=PG", "display_name": "RussAbbott", "link": "https://stackoverflow.com/users/1112406/russabbott"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 246, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1577839033, "creation_date": 1577825854, "last_edit_date": 1577839033, "question_id": 59548393, "link": "https://stackoverflow.com/questions/59548393/why-cant-i-read-a-keystroke-in-pysimplegui", "title": "Why can&#39;t I read a keystroke in PySimpleGUI?", "body": "<p><a href=\"https://github.com/PySimpleGUI/PySimpleGUI/blob/master/DemoPrograms/Demo_Keyboard_Realtime.py\" rel=\"nofollow noreferrer\">This simple demo</a> shows how to read keystrokes in PySimpleGUI. But when I attempt to run the <a href=\"https://github.com/PySimpleGUI/PySimpleGUI/blob/master/DemoPrograms/Demo_Pong.py\" rel=\"nofollow noreferrer\">PySimpleGUI Pong demo</a>, my keystrokes are not noticed as events. Can someone explain why that is?  Thanks.</p>\n\n<p>P.S. Adding <code>use_default_focus=False</code> to the PySimpleGUI Pong demo doesn't help.</p>\n\n<p>UPDATE: I found the original Tkinter version of the game. It included</p>\n\n<pre><code>    self.canvas.bind_all('w', self.up)\n    self.canvas.bind_all('s', self.down)\n</code></pre>\n\n<p>and </p>\n\n<pre><code>    self.canvas.bind_all('w', self.up)\n    self.canvas.bind_all('s', self.down)\n</code></pre>\n\n<p>at the end of the <code>__init__</code> methods in the two <code>pongbat</code> classes. (This version doesn't use PySimpleGUI at all.) With this change the PySimpleGUI version version worked also. (But that shouldn't be necessary! It should be possible to get those keystrokes.) </p>\n"}, {"tags": ["python", "linear-regression"], "comments": [{"owner": {"reputation": 10051, "user_id": 6031995, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KAcWh.png?s=128&g=1", "display_name": "Kenan", "link": "https://stackoverflow.com/users/6031995/kenan"}, "edited": false, "score": 0, "creation_date": 1577829707, "post_id": 59548339, "comment_id": 105266484, "body": "have you tried with different lr?"}, {"owner": {"reputation": 3988, "user_id": 2436862, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4P7Vh.jpg?s=128&g=1", "display_name": "James Phillips", "link": "https://stackoverflow.com/users/2436862/james-phillips"}, "edited": false, "score": 0, "creation_date": 1577879148, "post_id": 59548339, "comment_id": 105273006, "body": "Simple gradient descent is like climbing down a mountain in the fog: because of the fog you can only see near your feet, so you look near your feet to see which direction goes down. You then move in that direction, and look again. If the mountainside is fairly smooth this can work well, but if the mountainside is rough you can get stuck in a low spot. Success can also depend on where you start. In this analogy the initial parameters are your starting point, the direction at your feet is the local gradient, and learning rate is how far you travel before looking near your feet again."}], "answers": [{"tags": [], "owner": {"reputation": 614, "user_id": 11968227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f56719c77ab7e0c014eb670e524136ee?s=128&d=identicon&r=PG&f=1", "display_name": "Denver", "link": "https://stackoverflow.com/users/11968227/denver"}, "is_accepted": true, "score": 1, "last_activity_date": 1577830930, "creation_date": 1577830930, "answer_id": 59548818, "question_id": 59548339, "link": "https://stackoverflow.com/questions/59548339/linear-regression-implementation-from-scratch/59548818#59548818", "title": "Linear regression implementation from scratch", "body": "<p>Not an expert, but I think you are currently experiencing the <code>exploding gradient</code> problem. If you step through your code you will notice that your weight value is swinging from positive to negative in increasing steps. I believe you cannot find the minimum because using mse for this dataset is causing you to jump back and forth never converging. Your x and y ranges to 100, so when you look at the cost it is just blowing up. </p>\n\n<p>If you want to use mse with your current x and y values you should normalize your data. You can do this by subtracting the mean and dividing by the standard deviation, or just normalize both x and y to 1. </p>\n\n<p>For example:</p>\n\n<pre><code>my_data.x = my_data.x.transform(lambda x: x / x.max())\nmy_data.y = my_data.y.transform(lambda x: x / x.max())\n</code></pre>\n\n<p>If you do this you should see your cost converge to ~0 with enough iterations. </p>\n"}], "owner": {"reputation": 765, "user_id": 4893421, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/940968279257885/picture?type=large", "display_name": "kaihami", "link": "https://stackoverflow.com/users/4893421/kaihami"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 59548818, "answer_count": 1, "score": 0, "last_activity_date": 1577830930, "creation_date": 1577825247, "question_id": 59548339, "link": "https://stackoverflow.com/questions/59548339/linear-regression-implementation-from-scratch", "title": "Linear regression implementation from scratch", "body": "<p>I'm trying to understand the gradient descent algorithm.</p>\n\n<p>Can someone please explain why I'm getting high MSE values using the following code, or if I missed some concept can you please clarify?</p>\n\n<pre><code>import numpy as np\nimport pandas as pd\n\nmy_data = pd.DataFrame({'x': np.arange(0,100),\n                       'y': np.arange(0,100)})\nX = my_data.iloc[:,0:1].values\ny = my_data.iloc[:,1].values\n\ndef gradientDescent(X, y, lr = 0.001, n = 1000):\n\n    n_samples, n_features = X.shape\n    cost = []\n    weight = np.zeros([n_features])\n    b = 0\n\n    for _ in range(n):\n        # predict\n        y_hat = np.dot(X, weight) + b # y = ax + b\n\n        residual =  y - y_hat\n        db = -(2/n_samples) * np.sum(residual)\n        dw = -(2/n_samples) * np.sum(X.T * residual, axis = 1)\n\n        # update weights\n\n        weight -= (lr * dw)\n        b -= (lr * db)\n\n        cost.append(((y-y_hat) **2).mean())\n\n    return weight, b, cost\n\ngradientDescent(X,y)\n</code></pre>\n"}, {"tags": ["python", "visual-studio-code", "pylint"], "comments": [{"owner": {"reputation": 17762, "user_id": 548562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26587173d9156d8ec3114c8700d1b693?s=128&d=identicon&r=PG", "display_name": "Iain Shelvington", "link": "https://stackoverflow.com/users/548562/iain-shelvington"}, "edited": false, "score": 0, "creation_date": 1577825279, "post_id": 59548326, "comment_id": 105265704, "body": "How are you &quot;shipping&quot; the code to users? Is your project designed to a package that the user installs or an application that the user runs?"}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 1, "creation_date": 1577825283, "post_id": 59548326, "comment_id": 105265706, "body": "&quot;If I want to ship my code to users now then I should create a requirements.txt&quot; is not a correct assumption in the first place.  The <code>requirements.txt</code> file is usually used for managing a deployment, it&#39;s sort of similar to what some other languages call a &quot;lock file&quot;. For specifying your dependencies, you want a <code>setup.py</code> file or a <code>pyproject.toml</code> file."}, {"owner": {"reputation": 347, "user_id": 5261890, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/42dd843f7e61ef0ecc939c6e581a4d6d?s=128&d=identicon&r=PG&f=1", "display_name": "Patze", "link": "https://stackoverflow.com/users/5261890/patze"}, "reply_to_user": {"reputation": 17762, "user_id": 548562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26587173d9156d8ec3114c8700d1b693?s=128&d=identicon&r=PG", "display_name": "Iain Shelvington", "link": "https://stackoverflow.com/users/548562/iain-shelvington"}, "edited": false, "score": 0, "creation_date": 1577825412, "post_id": 59548326, "comment_id": 105265728, "body": "@IainShelvington it is supposed to be an application that the user can run, like the user gets the script so he can run it on his system."}, {"owner": {"reputation": 347, "user_id": 5261890, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/42dd843f7e61ef0ecc939c6e581a4d6d?s=128&d=identicon&r=PG&f=1", "display_name": "Patze", "link": "https://stackoverflow.com/users/5261890/patze"}, "reply_to_user": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1577825601, "post_id": 59548326, "comment_id": 105265760, "body": "@wim As far as I have understood, if I write a script which requires package A to be installed, if I give this script to someone else and the person wants to run it, package A has to be installed first so the script can run properly. It seems I misunderstand something?"}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1577825718, "post_id": 59548326, "comment_id": 105265776, "body": "That is correct.  And the best/usual way to do that is by specifying your dependencies with package metadata.  Which is what <code>setup.py</code> (imperative) or <code>pyproject.toml</code> (declarative) does. Now when other user installs your code with pip, it will also collect and install the dependency A."}, {"owner": {"reputation": 347, "user_id": 5261890, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/42dd843f7e61ef0ecc939c6e581a4d6d?s=128&d=identicon&r=PG&f=1", "display_name": "Patze", "link": "https://stackoverflow.com/users/5261890/patze"}, "reply_to_user": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1577826199, "post_id": 59548326, "comment_id": 105265861, "body": "@wim &quot;when other user installs your code with pip&quot;...the user would not install but run it (single .py script). And to run it, should the user not install all packages with the requirements.txt? I am confused now, need to read more into what the difference between &quot;requirements.txt&quot; and setup.py is."}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1577827176, "post_id": 59548326, "comment_id": 105266036, "body": "If you have non-stdlib dependencies at all, then you probably don&#39;t want to be distributing a standalone .py script (since a single .py file is unable to specify its dependencies).  You can distribute a <a href=\"https://packaging.python.org/glossary/#term-distribution-package\" rel=\"nofollow noreferrer\">distribution</a>, and specify the <a href=\"https://python-packaging.readthedocs.io/en/latest/command-line-scripts.html#the-scripts-keyword-argument\" rel=\"nofollow noreferrer\">scripts or console_scripts entry points</a> for the distribution."}, {"owner": {"reputation": 27241, "user_id": 5320906, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NOdNo.jpg?s=128&g=1", "display_name": "snakecharmerb", "link": "https://stackoverflow.com/users/5320906/snakecharmerb"}, "edited": false, "score": 0, "creation_date": 1577878254, "post_id": 59548326, "comment_id": 105272856, "body": "Notwithstanding all the above comments, you could maintain two requirements files: <code>requirements.txt</code> for packages that your application needs, and a <code>requirements-dev.txt</code> for development-related packages."}, {"owner": {"reputation": 347, "user_id": 5261890, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/42dd843f7e61ef0ecc939c6e581a4d6d?s=128&d=identicon&r=PG&f=1", "display_name": "Patze", "link": "https://stackoverflow.com/users/5261890/patze"}, "reply_to_user": {"reputation": 27241, "user_id": 5320906, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NOdNo.jpg?s=128&g=1", "display_name": "snakecharmerb", "link": "https://stackoverflow.com/users/5320906/snakecharmerb"}, "edited": false, "score": 0, "creation_date": 1577895185, "post_id": 59548326, "comment_id": 105276524, "body": "@snakecharmerb the question is how to automatically create the requirements.txt? Normally, I would do pip freeze &gt; requirements.txt but that would result into the requirements-dev.txt. Manually removing certain packages from the list is too much work and not safe. My current apporach would be to install everything I need while coding, then after my code is finished, pip uninstall everything and install only those packages again for which I used an import in my code. After that, make the requirements.txt again."}], "answers": [{"comments": [{"owner": {"reputation": 1246, "user_id": 1529164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/623f25d2d07aa766aa54bcf1216e9c09?s=128&d=identicon&r=PG", "display_name": "Albert Tugushev", "link": "https://stackoverflow.com/users/1529164/albert-tugushev"}, "edited": false, "score": 0, "creation_date": 1578608175, "post_id": 59571025, "comment_id": 105504503, "body": "Thanks for mentioning pip-tools! FYI, you may found <code>-c requirements.txt</code> more convenient. See <a href=\"https://github.com/jazzband/pip-tools#workflow-for-layered-requirements\" rel=\"nofollow noreferrer\">github.com/jazzband/pip-tools#workflow-for-layered-requireme&zwnj;&#8203;nts</a> and discussion <a href=\"https://github.com/jazzband/pip-tools/issues/398#issuecomment-517972391\" rel=\"nofollow noreferrer\">github.com/jazzband/pip-tools/issues/398#issuecomment-517972&zwnj;&#8203;391</a>."}, {"owner": {"reputation": 9571, "user_id": 236574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8600d16ba667cc8d7f00ddc9f254340?s=128&d=identicon&r=PG", "display_name": "Brett Cannon", "link": "https://stackoverflow.com/users/236574/brett-cannon"}, "reply_to_user": {"reputation": 1246, "user_id": 1529164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/623f25d2d07aa766aa54bcf1216e9c09?s=128&d=identicon&r=PG", "display_name": "Albert Tugushev", "link": "https://stackoverflow.com/users/1529164/albert-tugushev"}, "edited": false, "score": 0, "creation_date": 1578690779, "post_id": 59571025, "comment_id": 105534777, "body": "@AlbertTugushev what&#39;s the difference then between the constraints file and using requirements.txt? I thought constraints were to just make sure a specific version requirement were met but didn&#39;t guarantee that something would end up being installed?"}, {"owner": {"reputation": 1246, "user_id": 1529164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/623f25d2d07aa766aa54bcf1216e9c09?s=128&d=identicon&r=PG", "display_name": "Albert Tugushev", "link": "https://stackoverflow.com/users/1529164/albert-tugushev"}, "edited": false, "score": 0, "creation_date": 1578759011, "post_id": 59571025, "comment_id": 105547181, "body": "This approach might be useful if you want to separate base and dev requirements. If you use <code>-r base-requirements.txt</code> you&#39;ll get in <code>dev-requirements.txt</code> all the pinned base and dev reqs. But if you use <code>-c base-requirements.txt</code> you&#39;ll get only dev reqs, and all dev sub-reqs which intersect with base reqs would respect pinned versions from <code>base-requirements.txt</code>. By this approach you should install reqs from both files for dev stage: <code>pip install -r base-requirements.txt -r dev-requirements.txt</code>. Works with pip-tools like a charm :)"}], "tags": [], "owner": {"reputation": 9571, "user_id": 236574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8600d16ba667cc8d7f00ddc9f254340?s=128&d=identicon&r=PG", "display_name": "Brett Cannon", "link": "https://stackoverflow.com/users/236574/brett-cannon"}, "is_accepted": false, "score": 2, "last_activity_date": 1578005339, "creation_date": 1578005339, "answer_id": 59571025, "question_id": 59548326, "link": "https://stackoverflow.com/questions/59548326/how-to-ship-requirements-txt-to-users-without-development-packages-such-as-pylin/59571025#59571025", "title": "How to ship requirements.txt to users without development-packages such as PyLint etc.?", "body": "<p>You should create a <code>requirements.txt</code> file that has exactly what you need to run the project and a <code>dev-requirements.txt</code> file that includes <code>requirements.txt</code> and your development dependencies. The easiest way I have found to manage this is to use a tool like <a href=\"https://github.com/jazzband/pip-tools\" rel=\"nofollow noreferrer\">pip-tools</a> or poetry.</p>\n\n<p>For the former, you would have a <code>requirements.in</code> which lists your execution dependencies unpinned. Then in your <code>dev-requirements.in</code> you would have:</p>\n\n<pre><code>-r requirements.txt\npylint\n</code></pre>\n\n<p>You can then use <code>pip-compile</code> to generate the <code>requirements.txt</code> file and the <code>dev-requirements.txt</code> files and <code>pip-sync</code> to make sure your packages installed in your environment matches what is specified in the requirements file.</p>\n"}], "owner": {"reputation": 347, "user_id": 5261890, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/42dd843f7e61ef0ecc939c6e581a4d6d?s=128&d=identicon&r=PG&f=1", "display_name": "Patze", "link": "https://stackoverflow.com/users/5261890/patze"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1872, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1578005339, "creation_date": 1577825095, "question_id": 59548326, "link": "https://stackoverflow.com/questions/59548326/how-to-ship-requirements-txt-to-users-without-development-packages-such-as-pylin", "title": "How to ship requirements.txt to users without development-packages such as PyLint etc.?", "body": "<p>I'm new to python. I use Visual Studio Code. </p>\n\n<p>My current understanding is as follows:</p>\n\n<p>For each project, I create a virtual environment. Now if I want to have some linter while coding, I need to install it with \"pip install pylint\" for example.\nIF I want to ship my code to users now then I should create a requirements.txt.\nHowever, after installing pylint, it looks like this:</p>\n\n<pre><code>astroid==2.3.3\ncolorama==0.4.3\nisort==4.3.21\nlazy-object-proxy==1.4.3\nmccabe==0.6.1\npylint==2.4.4\nsix==1.13.0\nwrapt==1.11.2\n</code></pre>\n\n<p>All these packages are actually not necessary for my code, they all come from pylint.</p>\n\n<ul>\n<li>How can I automatically create a requirements.txt which only include the packages relevant for my code (without pylint stuff)? What is the best/usual practice in python?</li>\n<li>Or is this actually the \"normal\" way to include everything and I should not worry about it that much?</li>\n</ul>\n"}, {"tags": ["python", "tensorflow", "keras"], "comments": [{"owner": {"reputation": 475, "user_id": 3068214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44c9a6b83588d65aa864c71acb46edc0?s=128&d=identicon&r=PG&f=1", "display_name": "velociraptor11", "link": "https://stackoverflow.com/users/3068214/velociraptor11"}, "edited": false, "score": 0, "creation_date": 1577825313, "post_id": 59548311, "comment_id": 105265713, "body": "Does this solve your problem? <a href=\"https://github.com/keras-team/keras/issues/12379\" rel=\"nofollow noreferrer\">github.com/keras-team/keras/issues/12379</a> Another duplicate: <a href=\"https://stackoverflow.com/questions/58143135/which-tensorflow-package-for-keras-2-3\" title=\"which tensorflow package for keras 2 3\">stackoverflow.com/questions/58143135/&hellip;</a>"}, {"owner": {"reputation": 1, "user_id": 12104264, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mB8aAKSEYaEHa2GGIsKFV2xGEsFuogqXk76MpOB=k-s128", "display_name": "Bilal Razzaq", "link": "https://stackoverflow.com/users/12104264/bilal-razzaq"}, "reply_to_user": {"reputation": 475, "user_id": 3068214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44c9a6b83588d65aa864c71acb46edc0?s=128&d=identicon&r=PG&f=1", "display_name": "velociraptor11", "link": "https://stackoverflow.com/users/3068214/velociraptor11"}, "edited": false, "score": 0, "creation_date": 1577827471, "post_id": 59548311, "comment_id": 105266107, "body": "No, not really."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 12104264, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mB8aAKSEYaEHa2GGIsKFV2xGEsFuogqXk76MpOB=k-s128", "display_name": "Bilal Razzaq", "link": "https://stackoverflow.com/users/12104264/bilal-razzaq"}, "edited": false, "score": 0, "creation_date": 1577828372, "post_id": 59548413, "comment_id": 105266238, "body": "# Splitting the dataset into the Training set and Test set from sklearn.model_selection import train_test_split X_train, X_test, y_train, y_test = train_test_split(X, y, test_size = 0.25, random_state = 0)  # Feature Scaling from sklearn.preprocessing import StandardScaler sc = StandardScaler() X_train = sc.fit_transform(X_train) X_test = sc.transform(X_test)  # Part 2: Let&#39;s make the ANN #Importing the keras library import keras from keras.models import Sequential from keras.layers import Dense  # Initialising the ANN classifier = Sequential()"}, {"owner": {"reputation": 583, "user_id": 9687785, "user_type": "registered", "profile_image": "https://graph.facebook.com/1749548925082454/picture?type=large", "display_name": "omoshiroiii", "link": "https://stackoverflow.com/users/9687785/omoshiroiii"}, "reply_to_user": {"reputation": 1, "user_id": 12104264, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mB8aAKSEYaEHa2GGIsKFV2xGEsFuogqXk76MpOB=k-s128", "display_name": "Bilal Razzaq", "link": "https://stackoverflow.com/users/12104264/bilal-razzaq"}, "edited": false, "score": 0, "creation_date": 1577828959, "post_id": 59548413, "comment_id": 105266350, "body": "Preferably by editing your original post, so that I can see more of it in a formatted way."}, {"owner": {"reputation": 583, "user_id": 9687785, "user_type": "registered", "profile_image": "https://graph.facebook.com/1749548925082454/picture?type=large", "display_name": "omoshiroiii", "link": "https://stackoverflow.com/users/9687785/omoshiroiii"}, "reply_to_user": {"reputation": 1, "user_id": 12104264, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mB8aAKSEYaEHa2GGIsKFV2xGEsFuogqXk76MpOB=k-s128", "display_name": "Bilal Razzaq", "link": "https://stackoverflow.com/users/12104264/bilal-razzaq"}, "edited": false, "score": 0, "creation_date": 1577829950, "post_id": 59548413, "comment_id": 105266520, "body": "&quot;I have tried installing and uninstalling keras&quot; Can you try uninstalling Keras and using the Keras that is bundled with Tensorflow? And then use the change above for your imports, e.g. tensorflow.keras? Update your original post under your current code with whatever new error occurs if it does. You might also try tensorflow.python.keras for your imports if the prior does not work."}, {"owner": {"reputation": 1, "user_id": 12104264, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mB8aAKSEYaEHa2GGIsKFV2xGEsFuogqXk76MpOB=k-s128", "display_name": "Bilal Razzaq", "link": "https://stackoverflow.com/users/12104264/bilal-razzaq"}, "edited": false, "score": 0, "creation_date": 1577831173, "post_id": 59548413, "comment_id": 105266708, "body": "Hi , tensorflow.python.keras for your imports this does work for sequential. but what about the &#39;dense&#39; import, any ideas for that."}, {"owner": {"reputation": 1, "user_id": 12104264, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mB8aAKSEYaEHa2GGIsKFV2xGEsFuogqXk76MpOB=k-s128", "display_name": "Bilal Razzaq", "link": "https://stackoverflow.com/users/12104264/bilal-razzaq"}, "edited": false, "score": 0, "creation_date": 1577831306, "post_id": 59548413, "comment_id": 105266729, "body": "This is the attribute error i am getting, i managed to check the path and found that this function does not exit. get_graph = tf_keras_backend.get_graph"}, {"owner": {"reputation": 1, "user_id": 12104264, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mB8aAKSEYaEHa2GGIsKFV2xGEsFuogqXk76MpOB=k-s128", "display_name": "Bilal Razzaq", "link": "https://stackoverflow.com/users/12104264/bilal-razzaq"}, "edited": false, "score": 0, "creation_date": 1577831495, "post_id": 59548413, "comment_id": 105266761, "body": "# Private TF Keras utils get_graph = tf_keras_backend.get_graph() # learning_phase_scope = tf_keras_backend.learning_phase_scope  # TODO name_scope = tf.name_scope"}, {"owner": {"reputation": 583, "user_id": 9687785, "user_type": "registered", "profile_image": "https://graph.facebook.com/1749548925082454/picture?type=large", "display_name": "omoshiroiii", "link": "https://stackoverflow.com/users/9687785/omoshiroiii"}, "reply_to_user": {"reputation": 1, "user_id": 12104264, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mB8aAKSEYaEHa2GGIsKFV2xGEsFuogqXk76MpOB=k-s128", "display_name": "Bilal Razzaq", "link": "https://stackoverflow.com/users/12104264/bilal-razzaq"}, "edited": false, "score": 0, "creation_date": 1577831784, "post_id": 59548413, "comment_id": 105266833, "body": "I am assuming you are using windows. Could you open your command prompt and type: python, import tensorflow.keras, tensorflow.keras.__version__ and then tell me what version it says?  The commas indicate separate commands. Would you also mind trying &#39;from tensorflow.keras import backend&#39; within your current code."}, {"owner": {"reputation": 583, "user_id": 9687785, "user_type": "registered", "profile_image": "https://graph.facebook.com/1749548925082454/picture?type=large", "display_name": "omoshiroiii", "link": "https://stackoverflow.com/users/9687785/omoshiroiii"}, "reply_to_user": {"reputation": 1, "user_id": 12104264, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mB8aAKSEYaEHa2GGIsKFV2xGEsFuogqXk76MpOB=k-s128", "display_name": "Bilal Razzaq", "link": "https://stackoverflow.com/users/12104264/bilal-razzaq"}, "edited": false, "score": 0, "creation_date": 1577832159, "post_id": 59548413, "comment_id": 105266898, "body": "I believe your problem can be solved by using keras version 2.2.4. If you are above the version, you may try the image_dim_ordering() function instead, which from what I can tell was the get_graph attribute&#39;s replacement."}, {"owner": {"reputation": 1, "user_id": 12104264, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mB8aAKSEYaEHa2GGIsKFV2xGEsFuogqXk76MpOB=k-s128", "display_name": "Bilal Razzaq", "link": "https://stackoverflow.com/users/12104264/bilal-razzaq"}, "edited": false, "score": 0, "creation_date": 1577832512, "post_id": 59548413, "comment_id": 105266972, "body": "Python version 3.6.4 and not sure how to chek the keras version 2.3.1"}, {"owner": {"reputation": 1, "user_id": 12104264, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mB8aAKSEYaEHa2GGIsKFV2xGEsFuogqXk76MpOB=k-s128", "display_name": "Bilal Razzaq", "link": "https://stackoverflow.com/users/12104264/bilal-razzaq"}, "edited": false, "score": 0, "creation_date": 1577832602, "post_id": 59548413, "comment_id": 105266988, "body": "No such function as image_dim_ordering(),"}, {"owner": {"reputation": 583, "user_id": 9687785, "user_type": "registered", "profile_image": "https://graph.facebook.com/1749548925082454/picture?type=large", "display_name": "omoshiroiii", "link": "https://stackoverflow.com/users/9687785/omoshiroiii"}, "reply_to_user": {"reputation": 1, "user_id": 12104264, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mB8aAKSEYaEHa2GGIsKFV2xGEsFuogqXk76MpOB=k-s128", "display_name": "Bilal Razzaq", "link": "https://stackoverflow.com/users/12104264/bilal-razzaq"}, "edited": false, "score": 0, "creation_date": 1577832783, "post_id": 59548413, "comment_id": 105267020, "body": "Alright, so just to reiterate: you have keras uninstalled right now. So what I would like you to do is perform a pip install for specific version of keras: pip install &#39;keras==2.2.4&#39;. From there, simply import from keras and not the tensorflow.keras bundle. Then try your get_graph attribute"}, {"owner": {"reputation": 1, "user_id": 12104264, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mB8aAKSEYaEHa2GGIsKFV2xGEsFuogqXk76MpOB=k-s128", "display_name": "Bilal Razzaq", "link": "https://stackoverflow.com/users/12104264/bilal-razzaq"}, "edited": false, "score": 0, "creation_date": 1577832796, "post_id": 59548413, "comment_id": 105267022, "body": "The version 2.2.4 solved the issue. Thanks a lot for your help, highly appreciated @omoshiroiiI"}, {"owner": {"reputation": 583, "user_id": 9687785, "user_type": "registered", "profile_image": "https://graph.facebook.com/1749548925082454/picture?type=large", "display_name": "omoshiroiii", "link": "https://stackoverflow.com/users/9687785/omoshiroiii"}, "reply_to_user": {"reputation": 1, "user_id": 12104264, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mB8aAKSEYaEHa2GGIsKFV2xGEsFuogqXk76MpOB=k-s128", "display_name": "Bilal Razzaq", "link": "https://stackoverflow.com/users/12104264/bilal-razzaq"}, "edited": false, "score": 0, "creation_date": 1577832839, "post_id": 59548413, "comment_id": 105267032, "body": "No problem. Please make this the chosen answer and Ill edit the post for anyone else encountering this problem."}, {"owner": {"reputation": 475, "user_id": 3068214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44c9a6b83588d65aa864c71acb46edc0?s=128&d=identicon&r=PG&f=1", "display_name": "velociraptor11", "link": "https://stackoverflow.com/users/3068214/velociraptor11"}, "edited": false, "score": 0, "creation_date": 1577848515, "post_id": 59548413, "comment_id": 105268633, "body": "By the way, in the first link that I sent. The solution is clearly highlighted there to use keras 2.2.4. Please next time, try solutions given first"}], "tags": [], "owner": {"reputation": 583, "user_id": 9687785, "user_type": "registered", "profile_image": "https://graph.facebook.com/1749548925082454/picture?type=large", "display_name": "omoshiroiii", "link": "https://stackoverflow.com/users/9687785/omoshiroiii"}, "is_accepted": false, "score": 0, "last_activity_date": 1577832920, "last_edit_date": 1577832920, "creation_date": 1577826027, "answer_id": 59548413, "question_id": 59548311, "link": "https://stackoverflow.com/questions/59548311/trouble-importing-keras/59548413#59548413", "title": "Trouble importing Keras", "body": "<blockquote>\n  <p>AttributeError: module 'tensorflow.python.keras.backend' has no attribute 'get_graph'</p>\n</blockquote>\n\n<p>Solution (as found in comments) was to install keras version 2.2.4 </p>\n\n<p>e.g:</p>\n\n<pre><code>pip install 'keras==2.2.4'\n</code></pre>\n\n<p>if you are above that version, you may try using this function instead:</p>\n\n<pre><code>keras.backend.image_data_format()\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12104264, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mB8aAKSEYaEHa2GGIsKFV2xGEsFuogqXk76MpOB=k-s128", "display_name": "Bilal Razzaq", "link": "https://stackoverflow.com/users/12104264/bilal-razzaq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1577832920, "creation_date": 1577824966, "last_edit_date": 1577829473, "question_id": 59548311, "link": "https://stackoverflow.com/questions/59548311/trouble-importing-keras", "title": "Trouble importing Keras", "body": "<p>Here is the complete code<br>\ntop part runs fine till i import keras. \nI have tried installing and uninstalling keras, however the error is still there</p>\n\n<h1>Classification template</h1>\n\n<pre><code># Importing the libraries\nimport numpy as my\nimport matplotlib.pyplot as plt\nimport pandas as pd\n\n# Importing the dataset\ndataset = pd.read_csv('Churn_Modelling.csv')\nX = dataset.iloc[:, 3:13].values\ny = dataset.iloc[:, 13].values\n\n# Encoding categorical data\nfrom sklearn.preprocessing import LabelEncoder, OneHotEncoder\nlabelencoder_X_1 = LabelEncoder()\nX[:, 1] = labelencoder_X_1.fit_transform(X[:, 1])\nlabelencoder_X_2 = LabelEncoder()\nX[:, 2] = labelencoder_X_2.fit_transform(X[:, 2])\nonehotencoder = OneHotEncoder(categorical_features = [1])\nX = onehotencoder.fit_transform(X).toarray()\n#Removing 1 Dummy Variable to avoid Dummy Variable Trap\nX = X[:, 1:]\n\n\n# Splitting the dataset into the Training set and Test set\nfrom sklearn.model_selection import train_test_split\nX_train, X_test, y_train, y_test = train_test_split(X, y, test_size = 0.25, random_state = 0)\n\n# Feature Scaling\nfrom sklearn.preprocessing import StandardScaler\nsc = StandardScaler()\nX_train = sc.fit_transform(X_train)\nX_test = sc.transform(X_test)\n\n# Part 2: Let's make the ANN\n#Importing the keras library\nimport keras.backend\nimport keras\nfrom keras.models import Sequential\nfrom keras.layers import Dense\n\n# Initialising the ANN\nclassifier = Sequential()\n</code></pre>\n"}, {"tags": ["python", "recursion", "search", "binary"], "comments": [{"owner": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "edited": false, "score": 0, "creation_date": 1577825077, "post_id": 59548306, "comment_id": 105265660, "body": "Is this supposed to be a normal binary search, or is there some extra functionality to it? This feels like a huge amount of code for what should be about half dozen lines and I&#39;m having trouble determining the intent. Sorting the list on every iteration basically renders the algorithm useless from a performance standpoint. Also, keep in mind that there&#39;s a <a href=\"https://docs.python.org/3/library/bisect.html\" rel=\"nofollow noreferrer\">builtin for this</a>."}, {"owner": {"reputation": 26796, "user_id": 4834, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/6a04e124482c3750617f8dacde3388ce?s=128&d=identicon&r=PG", "display_name": "quamrana", "link": "https://stackoverflow.com/users/4834/quamrana"}, "edited": false, "score": 0, "creation_date": 1577825406, "post_id": 59548306, "comment_id": 105265727, "body": "Your function has a hole in the bottom which lets <code>None</code> escape!"}, {"owner": {"reputation": 83, "user_id": 12027408, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207549188519608/picture?type=large", "display_name": "Rahel Miz", "link": "https://stackoverflow.com/users/12027408/rahel-miz"}, "reply_to_user": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "edited": false, "score": 0, "creation_date": 1577826417, "post_id": 59548306, "comment_id": 105265895, "body": "@ggorlen: yes, this is just a normal binary search. It\u2019s long because  of the   possibility  that \u201ckey\u201d might be repeated. The reason for the three nested if statements is me adjusting for various possibilities. But I am new to recursion so I do not know if it is unnecessary"}, {"owner": {"reputation": 83, "user_id": 12027408, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207549188519608/picture?type=large", "display_name": "Rahel Miz", "link": "https://stackoverflow.com/users/12027408/rahel-miz"}, "reply_to_user": {"reputation": 26796, "user_id": 4834, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/6a04e124482c3750617f8dacde3388ce?s=128&d=identicon&r=PG", "display_name": "quamrana", "link": "https://stackoverflow.com/users/4834/quamrana"}, "edited": false, "score": 0, "creation_date": 1577826637, "post_id": 59548306, "comment_id": 105265947, "body": "@quamrana: where is this hole? How do I let None escape?"}, {"owner": {"reputation": 26796, "user_id": 4834, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/6a04e124482c3750617f8dacde3388ce?s=128&d=identicon&r=PG", "display_name": "quamrana", "link": "https://stackoverflow.com/users/4834/quamrana"}, "edited": false, "score": 0, "creation_date": 1577828836, "post_id": 59548306, "comment_id": 105266326, "body": "The second half of your function is an <code>if &#47; elif</code> chain which has no <code>else</code>. I also see that some of your <code>elif</code>s don&#39;t return something, therefore the function can fall to the bottom and return <code>None</code> by default."}], "answers": [{"tags": [], "owner": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "is_accepted": true, "score": 1, "last_activity_date": 1577831526, "last_edit_date": 1577831526, "creation_date": 1577828655, "answer_id": 59548653, "question_id": 59548306, "link": "https://stackoverflow.com/questions/59548306/recursive-binary-search-algorithm-doesnt-stop-executing-after-condition-is-met/59548653#59548653", "title": "Recursive binary search algorithm doesn&#39;t stop executing after condition is met, returns a nonetype object", "body": "<p>This function is not a binary search. Binary search's time complexity should be O(log(n)) and works on pre-sorted lists, but the complexity of this algorithm is at least O(n log(n)) because it sorts its input parameter list for every recursive call. Even without the sorting, there are linear statements like <code>list(range(mid, i +1))</code> on each call, making the complexity quadratic. You'd be better off with a linear search using <a href=\"https://docs.python.org/3/tutorial/datastructures.html\" rel=\"nofollow noreferrer\"><code>list#index</code></a>.</p>\n\n<p>The function mutates its input parameter, which no search function should do (we want to search, not search <em>and</em> sort).</p>\n\n<p>Efficiencies and mutation aside, the logic is difficult to parse and is overkill in any circumstance. Not all nested conditionals lead to a <code>return</code>, so it's possible to <code>return None</code> by default.</p>\n\n<p>You can use the builtin <a href=\"https://docs.python.org/3/library/bisect.html\" rel=\"nofollow noreferrer\"><code>bisect</code></a> module:</p>\n\n<pre><code>&gt;&gt;&gt; from bisect import *\n&gt;&gt;&gt; bisect_left([1,2,2,2,2,3,4,4,4,4,5], 2)\n1\n&gt;&gt;&gt; bisect_left([1,2,2,2,2,3,4,4,4,4,5], 4)\n6\n&gt;&gt;&gt; bisect_right([1,2,2,2,2,3,4,4,4,4,5], 4)\n10\n&gt;&gt;&gt; bisect_right([1,2,2,2,2,3,4,4,4,4,5], 2)\n5\n&gt;&gt;&gt; bisect_right([1,2,2,2,2,3,4,4,4,4,5], 15)\n11\n&gt;&gt;&gt; bisect_right([1,2,5,6], 3)\n2\n</code></pre>\n\n<p>If you have to write this by hand as an exercise, start by looking at <code>bisect_left</code>'s <a href=\"https://github.com/python/cpython/blob/3c88199e0be352c0813f145d7c4c83af044268aa/Lib/bisect.py#L50\" rel=\"nofollow noreferrer\">source code</a>:</p>\n\n<pre><code>def bisect_left(a, x, lo=0, hi=None):\n    \"\"\"Return the index where to insert item x in list a, assuming a is sorted.\n    The return value i is such that all e in a[:i] have e &lt; x, and all e in\n    a[i:] have e &gt;= x.  So if x already appears in the list, a.insert(x) will\n    insert just before the leftmost x already there.\n    Optional args lo (default 0) and hi (default len(a)) bound the\n    slice of a to be searched.\n    \"\"\"\n\n    if lo &lt; 0:\n        raise ValueError('lo must be non-negative')\n    if hi is None:\n        hi = len(a)\n    while lo &lt; hi:\n        mid = (lo+hi)//2\n        # Use __lt__ to match the logic in list.sort() and in heapq\n        if a[mid] &lt; x: lo = mid+1\n        else: hi = mid\n</code></pre>\n\n<p>This is easy to implement recursively (if desired) and then test against the builtin:</p>\n\n<pre><code>def bisect_left(a, target, lo=0, hi=None):\n    if hi is None: hi = len(a)\n\n    mid = (hi + lo) // 2\n\n    if lo &gt;= hi: \n        return mid\n    elif a[mid] &lt; target:\n        return bisect_left(a, target, mid + 1, hi)\n\n    return bisect_left(a, target, lo, mid)\n\nif __name__ == \"__main__\":\n    from bisect import bisect_left as builtin_bisect_left\n    from random import choice, randint\n    from sys import exit\n\n    for _ in range(10000):\n        a = sorted(randint(0, 100) for _ in range(100))\n\n        if any(bisect_left(a, x) != builtin_bisect_left(a, x) for x in range(-1, 101)):\n            print(\"fail\")\n            exit(1)\n</code></pre>\n\n<p>Logically, for any call frame, there's only 3 possibilities:</p>\n\n<ul>\n<li>The <code>lo</code> and <code>hi</code> pointers have crossed, in which case we've either found the element or figured out where it should be if it were in the list; either way, return the midpoint.</li>\n<li>The element at the midpoint is less than the target, which guarantees that the target is in the tail half of the search space, if it exists.</li>\n<li>The element at the midpoint matches or is less than the target, which guarantees that the target is in the front half of the search space.</li>\n</ul>\n\n<p>Python doesn't overflow integers, so you can use the simplified midpoint test.</p>\n"}], "owner": {"reputation": 83, "user_id": 12027408, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207549188519608/picture?type=large", "display_name": "Rahel Miz", "link": "https://stackoverflow.com/users/12027408/rahel-miz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 59548653, "answer_count": 1, "score": 1, "last_activity_date": 1577832307, "creation_date": 1577824917, "last_edit_date": 1577832307, "question_id": 59548306, "link": "https://stackoverflow.com/questions/59548306/recursive-binary-search-algorithm-doesnt-stop-executing-after-condition-is-met", "title": "Recursive binary search algorithm doesn&#39;t stop executing after condition is met, returns a nonetype object", "body": "<p>I have made a binary search algorithm, biSearch(A, high, low, key). It takes in a sorted array and a key, and spits out the position of key in the array. High and low are the min and max of the search range. </p>\n\n<p>It almost works, save for one problem: </p>\n\n<p>On the second \"iteration\" (not sure what the recursive equivalent of that is), a condition is met and the algorithm should stop running and return \"index\". I commented where this happens. Instead, what ends up happening is that the code continues on to the next condition, even though the preceding condition is true. The correct result, 5, is then overridden and  the new result is a nonetype object. \nwithin my code, I have commented in caps the problems at the location in which they occur. Help is much appreciated, and I thank you in advance!</p>\n\n<pre><code>\"\"\"\nCreated on Sat Dec 28 18:40:06 2019\n\n\n\"\"\"\ndef biSearch(A, key, low = False, high = False):\n    if low == False: \n        low = 0\n\n    if high == False:\n        high = len(A)-1\n\n    if high == low: \n        return A[low]\n\n\n    mid = low + int((high -low)/ 2)\n\n                                                    # if key == A[mid] : two  cases\n    if key == A[mid] and high - low == 0:                           #case 1: key is in the last pos. SHOULD STOP RUNNING HERE  \n\n        index = mid \n        return index \n    elif key == A[mid] and (high - low) &gt; 0:                              \n        if A[mid] == A[mid + 1] and A[mid]==A[mid -1]:              #case 2: key isnt last and might be repeated\n            i = mid -1                                  \n            while A[i] == A[i+1]:\n                  i +=1\n                  index = list(range(mid- 1, i+1))\n\n        elif A[mid] == A[mid + 1]:\n            i = mid\n            while A[i]== A[i+1]:\n                i += 1\n                index = list(range(mid, i+1))\n\n\n        elif A[mid] == A[mid -1]:\n            i = mid -1\n            while A[i] == A[i +1]:\n                i += 1\n                index = list(range(mid, i +1))\n\n\n    elif key &gt; A[mid] and high - low &gt; 0:           # BUT CODE EXECTUES THIS LINE EVEN THOUGH PRECEDING IS ALREADY MET\n        index = biSearch(A, key, mid+1, high)\n\n\n\n    elif key &lt;  A[mid] and high - low &gt; 0:\n        index = biSearch(A, key, low, mid -1) \n\n        return index\n\n    elif A[mid] != key:                         # if key DNE in A\n        return -1\n\n\n\n\n#biSearch([1,3,5, 4, 7, 7,7,9], 1, 8, 7)\n#x = biSearch([1,3,5, 4, 7,9], 1, 6, 9)\n\n\nx = biSearch([1,3,5, 4, 7,9],9)\nprint(x)\n# x = search([1,3,5, 4, 7,9], 9)\n</code></pre>\n"}, {"tags": ["python", "image", "opencv", "image-processing", "computer-vision"], "comments": [{"owner": {"reputation": 1538, "user_id": 9159044, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Bc2F0.png?s=128&g=1", "display_name": "Vardan Agarwal", "link": "https://stackoverflow.com/users/9159044/vardan-agarwal"}, "edited": false, "score": 1, "creation_date": 1577824756, "post_id": 59548245, "comment_id": 105265600, "body": "Please add the original image as well without the green bounding box drawn over it."}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 1, "creation_date": 1577825242, "post_id": 59548245, "comment_id": 105265698, "body": "you could try to crop away some convexity defects before approPolyDp, but not sure about good heuristics for your case... <a href=\"https://stackoverflow.com/questions/35226993/how-to-crop-away-convexity-defects\" title=\"how to crop away convexity defects\">stackoverflow.com/questions/35226993/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1191, "user_id": 4391249, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fae5514791204ff859cb7c04adcef4df?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Soare", "link": "https://stackoverflow.com/users/4391249/alexander-soare"}, "edited": false, "score": 0, "creation_date": 1577903904, "post_id": 59548695, "comment_id": 105278770, "body": "Thank you. Not the first time you&#39;ve helped me out @nathancy. This was very useful for exploration, although in the end I chose a different path. See it here <a href=\"https://stackoverflow.com/a/59555105/4391249\">stackoverflow.com/a/59555105/4391249</a>"}], "tags": [], "owner": {"reputation": 25800, "user_id": 11162165, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t5kgh.png?s=128&g=1", "display_name": "nathancy", "link": "https://stackoverflow.com/users/11162165/nathancy"}, "is_accepted": false, "score": 2, "last_activity_date": 1577829264, "creation_date": 1577829264, "answer_id": 59548695, "question_id": 59548245, "link": "https://stackoverflow.com/questions/59548245/how-to-get-rectangular-box-contours-when-there-are-overlapping-distractions-usin/59548695#59548695", "title": "How to get rectangular box contours when there are overlapping distractions using OpenCV", "body": "<p>Here's a potential solution:</p>\n\n<ol>\n<li><p><strong>Obtain binary image.</strong> We load the image, convert to grayscale, apply a Gaussian blur, and then Otsu's threshold</p></li>\n<li><p><strong>Detect horizontal lines.</strong> We create a horizontal kernel and draw detected horizontal lines onto a mask</p></li>\n<li><p><strong>Detect vertical lines.</strong> We create a vertical kernel and draw detected vertical lines onto a mask</p></li>\n<li><p><strong>Perform morphological opening.</strong> We create a rectangular kernel and perform morph opening to smooth out noise and separate any connected contours</p></li>\n<li><p><strong>Find contours, draw rectangle, and extract ROI.</strong> We find contours and draw the bounding rectangle onto the image</p></li>\n</ol>\n\n<hr>\n\n<p>Here's a visualization of each step:</p>\n\n<p>Binary image</p>\n\n<p><a href=\"https://i.stack.imgur.com/lzPQ2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lzPQ2.png\" alt=\"enter image description here\"></a></p>\n\n<p>Detected horizontal and vertical lines drawn onto a mask</p>\n\n<p><a href=\"https://i.stack.imgur.com/WvQD8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WvQD8.png\" alt=\"enter image description here\"></a></p>\n\n<p>Morphological opening</p>\n\n<p><a href=\"https://i.stack.imgur.com/GlIcu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GlIcu.png\" alt=\"enter image description here\"></a></p>\n\n<p>Result</p>\n\n<p><a href=\"https://i.stack.imgur.com/jdF3T.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jdF3T.png\" alt=\"enter image description here\"></a></p>\n\n<p>Individual extracted saved ROI </p>\n\n<p><a href=\"https://i.stack.imgur.com/qggCl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qggCl.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Note:</strong> To extract only the hand written numbers/letters out of each ROI, take a look at a previous answer in <a href=\"https://stackoverflow.com/questions/58084229/remove-borders-from-image-but-keep-text-written-on-borders-preprocessing-before/58089157\">Remove borders from image but keep text written on borders (preprocessing before OCR)</a></p>\n\n<p>Code</p>\n\n<pre><code>import cv2\nimport numpy as np\n\n# Load image, grayscale, blur, Otsu's threshold\nimage = cv2.imread('1.png')\noriginal = image.copy()\nmask = np.zeros(image.shape, dtype=np.uint8)\ngray = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)\nblur = cv2.GaussianBlur(gray, (5,5), 0)\nthresh = cv2.threshold(blur, 0, 255, cv2.THRESH_BINARY_INV + cv2.THRESH_OTSU)[1]\n\n# Find horizontal lines\nhorizontal_kernel = cv2.getStructuringElement(cv2.MORPH_RECT, (50,1))\ndetect_horizontal = cv2.morphologyEx(thresh, cv2.MORPH_OPEN, horizontal_kernel, iterations=2)\ncnts = cv2.findContours(detect_horizontal, cv2.RETR_EXTERNAL, cv2.CHAIN_APPROX_SIMPLE)\ncnts = cnts[0] if len(cnts) == 2 else cnts[1]\nfor c in cnts:\n    cv2.drawContours(mask, [c], -1, (255,255,255), 3)\n\n# Find vertical lines\nvertical_kernel = cv2.getStructuringElement(cv2.MORPH_RECT, (1,50))\ndetect_vertical = cv2.morphologyEx(thresh, cv2.MORPH_OPEN, vertical_kernel, iterations=2)\ncnts = cv2.findContours(detect_vertical, cv2.RETR_EXTERNAL, cv2.CHAIN_APPROX_SIMPLE)\ncnts = cnts[0] if len(cnts) == 2 else cnts[1]\nfor c in cnts:\n    cv2.drawContours(mask, [c], -1, (255,255,255), 3)\n\n# Morph open\nmask = cv2.cvtColor(mask, cv2.COLOR_BGR2GRAY)\nkernel = cv2.getStructuringElement(cv2.MORPH_RECT, (7,7))\nopening = cv2.morphologyEx(mask, cv2.MORPH_OPEN, kernel, iterations=1)\n\n# Draw rectangle and save each ROI\nnumber = 0\ncnts = cv2.findContours(opening, cv2.RETR_EXTERNAL, cv2.CHAIN_APPROX_SIMPLE)\ncnts = cnts[0] if len(cnts) == 2 else cnts[1]\nfor c in cnts:\n    x,y,w,h = cv2.boundingRect(c)\n    cv2.rectangle(image, (x, y), (x + w, y + h), (36,255,12), 2)\n    ROI = original[y:y+h, x:x+w]\n    cv2.imwrite('ROI_{}.png'.format(number), ROI)\n    number += 1\n\ncv2.imshow('thresh', thresh)\ncv2.imshow('mask', mask)\ncv2.imshow('opening', opening)\ncv2.imshow('image', image)\ncv2.waitKey()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1191, "user_id": 4391249, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fae5514791204ff859cb7c04adcef4df?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Soare", "link": "https://stackoverflow.com/users/4391249/alexander-soare"}, "edited": false, "score": 0, "creation_date": 1577903861, "post_id": 59551577, "comment_id": 105278757, "body": "Thank you. This was very useful for exploration, although in the end I chose a different path. See it here <a href=\"https://stackoverflow.com/a/59555105/4391249\">stackoverflow.com/a/59555105/4391249</a>"}], "tags": [], "owner": {"reputation": 1527, "user_id": 5832272, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s7clX.png?s=128&g=1", "display_name": "MH304", "link": "https://stackoverflow.com/users/5832272/mh304"}, "is_accepted": false, "score": 2, "last_activity_date": 1577873357, "creation_date": 1577873357, "answer_id": 59551577, "question_id": 59548245, "link": "https://stackoverflow.com/questions/59548245/how-to-get-rectangular-box-contours-when-there-are-overlapping-distractions-usin/59551577#59551577", "title": "How to get rectangular box contours when there are overlapping distractions using OpenCV", "body": "<p>Since the squares have a quite straight lines, it's good to use Hough transform:</p>\n\n<p>1- Make the image grayscale, then do an Otsu threshold on it, then reverse the binary image</p>\n\n<p>2- Do Hough transform (<code>HoughLinesP</code>) and draw the lines on a new image</p>\n\n<p>3- With <code>findContours</code> and <code>drawContours</code>, make the 3 roi clean</p>\n\n<p>4- Erode the final image a little to make the boxes neater</p>\n\n<p><a href=\"https://i.stack.imgur.com/Oz1LQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Oz1LQ.png\" alt=\"enter image description here\"></a></p>\n\n<p>I wrote the code in C++, it's easily convertible to python:</p>\n\n<pre><code>Mat img = imread(\"D:/1.jpg\", 0);\nthreshold(img, img, 0, 255, THRESH_OTSU);\nimshow(\"Binary image\", img);\n\nimg = 255 - img;\nimshow(\"Reversed binary image\", img);\n\nMat img_1 = Mat::zeros(img.size(), CV_8U);\nMat img_2 = Mat::zeros(img.size(), CV_8U);\n\nvector&lt;Vec4i&gt; lines;\nHoughLinesP(img, lines, 1, 0.1, 95, 10, 1);\nfor (size_t i = 0; i &lt; lines.size(); i++)\n    line(img_1, Point(lines[i][0], lines[i][1]), Point(lines[i][2], lines[i][3]), \n        Scalar(255, 255, 255), 2, 8);\n\nimshow(\"Hough Lines\", img_1);\n\nvector&lt;vector&lt;Point&gt;&gt; contours;\nfindContours(img_1,contours, CV_RETR_EXTERNAL, CV_CHAIN_APPROX_NONE);\nfor (int i = 0; i&lt; contours.size(); i++)\n    drawContours(img_2, contours, i, Scalar(255, 255, 255), -1);\n\nimshow(\"final result after drawcontours\", img_2);    waitKey(0);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1191, "user_id": 4391249, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fae5514791204ff859cb7c04adcef4df?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Soare", "link": "https://stackoverflow.com/users/4391249/alexander-soare"}, "is_accepted": true, "score": 1, "last_activity_date": 1577903739, "creation_date": 1577903739, "answer_id": 59555105, "question_id": 59548245, "link": "https://stackoverflow.com/questions/59548245/how-to-get-rectangular-box-contours-when-there-are-overlapping-distractions-usin/59555105#59555105", "title": "How to get rectangular box contours when there are overlapping distractions using OpenCV", "body": "<p>Thank you to those who shared solutions. I ended up taking a slightly different path in the end.</p>\n\n<ol>\n<li>Grayscale, Gaussian Blur, Otsu threshold</li>\n<li>Get contours</li>\n<li>Filter contours by aspect ratio and extent</li>\n<li>Return the minimum upright bounding box of the contour.</li>\n<li>Remove any bounding boxes that encapsulate smaller bounding boxes (because you get two boxes, one for the inside contour, and one for the outside).</li>\n</ol>\n\n<p>Here's the code if anyone's interested (except for step 5 - that was just basic numpy manipulation)</p>\n\n<pre><code>orig_img = cv2.imread('example0.jpg')\n\nimg = np.copy(orig_img)\nimg = cv2.cvtColor(img, cv2.COLOR_RGB2GRAY)\nimg = cv2.GaussianBlur(img,(5,5),0)\n_, img = cv2.threshold(img,0,255,cv2.THRESH_BINARY+cv2.THRESH_OTSU)\n\ncontours, hierarchy = cv2.findContours(img, cv2.RETR_TREE, cv2.CHAIN_APPROX_SIMPLE)\n\nboxes = list()\n\nfor i, cnt in enumerate(contours):\n    x,y,w,h = cv2.boundingRect(cnt)\n    aspect_ratio = float(w)/h\n    area = cv2.contourArea(cnt)\n    rect_area = w*h\n    extent = float(area)/rect_area\n    if abs(aspect_ratio - 1) &lt; 0.1 and extent &gt; 0.7:\n        boxes.append((x,y,w,h))\n</code></pre>\n\n<p>And here's an example of what came out when cutting out the boundary boxes from the original image.</p>\n\n<p><a href=\"https://i.stack.imgur.com/AH6br.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AH6br.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 1191, "user_id": 4391249, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fae5514791204ff859cb7c04adcef4df?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Soare", "link": "https://stackoverflow.com/users/4391249/alexander-soare"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 331, "favorite_count": 1, "accepted_answer_id": 59555105, "answer_count": 3, "score": 3, "last_activity_date": 1577903739, "creation_date": 1577824270, "last_edit_date": 1577829255, "question_id": 59548245, "link": "https://stackoverflow.com/questions/59548245/how-to-get-rectangular-box-contours-when-there-are-overlapping-distractions-usin", "title": "How to get rectangular box contours when there are overlapping distractions using OpenCV", "body": "<p>I pieced together a quick algorithm in python to get the input boxes from a handwritten invoice.</p>\n\n<pre><code># some preprocessing\nimg = np.copy(orig_img)\nimg = cv2.cvtColor(img, cv2.COLOR_RGB2GRAY)\nimg = cv2.GaussianBlur(img,(5,5),0)\n_, img = cv2.threshold(img,0,255,cv2.THRESH_BINARY+cv2.THRESH_OTSU)\n\n# get contours\ncontours, hierarchy = cv2.findContours(img, cv2.RETR_TREE, cv2.CHAIN_APPROX_SIMPLE)\nfor i, cnt in enumerate(contours):\n    approx = cv2.approxPolyDP(cnt, 0.01*cv2.arcLength(cnt,True), True)\n    if len(approx) == 4:\n        cv2.drawContours(orig_img, contours, i, (0, 255, 0), 2)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/87Bjt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/87Bjt.png\" alt=\"enter image description here\"></a></p>\n\n<p>It fails to get the 2nd one in this example because the handwriting crosses the box boundary.</p>\n\n<p>Note that this picture could be taken with a mobile phone, so aspect ratios may be a little funny.</p>\n\n<p><strong>So, what are some neat recipes to get around my problem?</strong></p>\n\n<p>And as a <strong>bonus</strong>. These boxes are from an A4 page with a lot of other stuff going on. Would you recommend a whole different approach to getting the handwritten numbers out?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>This might be interesting. If I don't filter for 4 sided polys, I get the contours but they go all around the hand-drawn digit. Maybe there's a way to make contours have water-like cohesion so that they pinch off when they get close to themselves?</p>\n\n<p><a href=\"https://i.stack.imgur.com/n0gp1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/n0gp1.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>FURTHER EDIT</strong></p>\n\n<p>Here is the original image without bounding boxes drawn on</p>\n\n<p><a href=\"https://i.stack.imgur.com/BdR8e.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BdR8e.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "selenium", "selenium-webdriver", "web-scraping", "selenium-chromedriver"], "owner": {"reputation": 37, "user_id": 8800666, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-798B4BCVr4c/AAAAAAAAAAI/AAAAAAAAABI/BI7KBZtIO2s/photo.jpg?sz=128", "display_name": "Normandy", "link": "https://stackoverflow.com/users/8800666/normandy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1577824202, "creation_date": 1577824202, "question_id": 59548238, "link": "https://stackoverflow.com/questions/59548238/selenium-navigating-with-back-even-though-no-such-command-is-in-code", "title": "Selenium navigating with back even though no such command is in code", "body": "<p>I'm not sure what or how selenium is doing this but when I first started to run this code it was performing more or less as expected.  The only real issue was it would sometimes not click to go to a link and sometimes it would.  However, it would always close the current page and then open another page as this was the only work around I could find to not run into stale element reference (ie: just trying to click a link, going to link, then going back was not working).</p>\n\n<p>However, now all of a sudden selenium is doing some very strange things.  It completely ignores the go = False statement and somehow goes back to the search results page selects the next link in the list and clicks (even though before when I tried this I would get stale reference error).  I believe it started doing this after I was able to completely get through the list of sites and list of phones once.  Then it just started ignoring and going back.</p>\n\n<pre><code>class Searcher:\n    def __init__(self):\n        self.phones = [\"Google Pixel 3\", \"Google Pixel 4\"]\n        self.search_sites = [\"The Verge\", \"android central\", \"MacRumors\"]\n        self.text_finder = {\"The Verge\": [\"div\", {\"class\" : \"c-comments__cbody\"}], \"Android Central\":[\"div\", {\"class\": \"comment__content\"}], \"MacRumors\": [\"div\", {\"class\": \"bbWrapper\"}]}\n        self.timestamp_finder = {\"The Verge\": [\"a\", {\"data-ui\" : \"timestamp\"}], \"Android Central\": [\"footer\"], \"MacRumors\": [\"time\", {\"class\": \"u-dt\"}]}\n\n    def searching_site(self, site):\n        for i in site:\n            return site[i]\n    def searching_phones(self, phone):\n        for i in phone:\n            return phone[i]\n    def text_finding(self, dic):\n        for i in dic.values():\n            return(i)\n    '''def timestamp_finding(self, dic):\n        for i in dic.values():\n            return(i)'''\n</code></pre>\n\n<pre><code>import selenium\nfrom selenium import webdriver\nfrom selenium.webdriver.common.keys import Keys\nimport selenium.common.exceptions as selEx\nfrom selenium import webdriver \nfrom selenium.webdriver.common.by import By \nfrom selenium.webdriver.support.ui import WebDriverWait \nfrom selenium.webdriver.support import expected_conditions as EC \nfrom selenium.common.exceptions import TimeoutException\nimport datetime\nimport time\nimport io\nfrom bs4 import BeautifulSoup\nimport requests\nfrom requests import get\nfrom pattern.web import plaintext\nfrom selenium import webdriver\nfrom selenium.webdriver import ActionChains\nimport random\n\n#My modules\nfrom modules.searcher import Searcher\n\ndriver = webdriver.Chrome(r\"C:\\\\Users\\\\A\\\\Desktop\\\\op\\\\chromedriver.exe\")\n\nterm_search = Searcher()\nsites = term_search.search_sites\nphones = term_search.phones\nsites_found = [\"theverge.com\", \"androidcentral.com\", \"macrumors.com\"]\n\nphone_index = 0\nsite_index = 0\ncount = 0\nkeep_going = True\ncurrent_site_url = 0\ngiven_site_in_list_index = 0\n\n\nwhile(keep_going):\n\n\n    driver.get('https://www.Google.com')\n\n    search = driver.find_element_by_name('q')\n    search.send_keys( sites[site_index] + \" \" + phones[phone_index] +   \" review\" )\n    search.send_keys(Keys.RETURN)\n    time.sleep(4)\n    my_search_list = driver.find_elements_by_xpath(\"//div[@class='rc']\")\n\n    sites_list = []\n\n    for link in my_search_list:\n        print(\"this is curernt site url \", current_site_url)\n        if sites_found[current_site_url] in link.text:\n            sites_list.append(link)\n\n    go = True     \n    while (go):\n        print(\"this is len list \", len(sites_list))\n        print(\"this is index \", given_site_in_list_index)\n        time.sleep(4)\n        if (given_site_in_list_index &gt; len(sites_list)):\n            break\n        sites_list[given_site_in_list_index].click()\n        time.sleep(4)\n        go = False        \n        given_site_in_list_index +=1\n\n\n\n    #driver.find_element_by_partial_link_text(phones[phone_index]).click()\n    if(given_site_in_list_index == len(sites_list) or given_site_in_list_index &gt; len(sites_list)):\n        count +=1\n        current_site_url +=1\n        given_site_in_list_index = 0\n        print(\"WE ARE INSIDE THE FIRST IF\")\n        driver.close()\n        driver = webdriver.Chrome(r\"C:\\\\Users\\\\A\\\\Desktop\\\\op\\\\chromedriver.exe\")\n\n        site_index +=1\n        count = 0\n        if(site_index == len(sites)):\n            phone_index +=1\n            site_index = 0\n            current_site_url = 0\n        elif(phone_index == len(phones)):\n            keep_going = False\ndriver.close()\nprint(\"WE ARE AT THE BOTTOM\")\ndriver = webdriver.Chrome(r\"C:\\\\Users\\\\A\\\\Desktop\\\\op\\\\chromedriver.exe\")\n</code></pre>\n"}, {"tags": ["python", "beautifulsoup"], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 12075410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bf560e02fa14b7cbbd44f4aa05d7a92?s=128&d=identicon&r=PG", "display_name": "realblockhead", "link": "https://stackoverflow.com/users/12075410/realblockhead"}, "edited": false, "score": 0, "creation_date": 1577825034, "post_id": 59548263, "comment_id": 105265647, "body": "thanks,it worked. i am also facing issues with the pagination,should i start a new quuestion or shoot?"}, {"owner": {"reputation": 72046, "user_id": 10035985, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1WgJ_2yA-78/AAAAAAAAAAI/AAAAAAAAAOA/0CBOlYqYe7M/photo.jpg?sz=128", "display_name": "Andrej Kesely", "link": "https://stackoverflow.com/users/10035985/andrej-kesely"}, "reply_to_user": {"reputation": 47, "user_id": 12075410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bf560e02fa14b7cbbd44f4aa05d7a92?s=128&d=identicon&r=PG", "display_name": "realblockhead", "link": "https://stackoverflow.com/users/12075410/realblockhead"}, "edited": false, "score": 0, "creation_date": 1577825284, "post_id": 59548263, "comment_id": 105265707, "body": "@realblockhead See my edit. I added the script with pagination."}, {"owner": {"reputation": 47, "user_id": 12075410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bf560e02fa14b7cbbd44f4aa05d7a92?s=128&d=identicon&r=PG", "display_name": "realblockhead", "link": "https://stackoverflow.com/users/12075410/realblockhead"}, "edited": false, "score": 1, "creation_date": 1577825821, "post_id": 59548263, "comment_id": 105265798, "body": "thanks, it worked albeit complex as i am a noob. Nonetheless,i appreciate."}], "tags": [], "owner": {"reputation": 72046, "user_id": 10035985, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1WgJ_2yA-78/AAAAAAAAAAI/AAAAAAAAAOA/0CBOlYqYe7M/photo.jpg?sz=128", "display_name": "Andrej Kesely", "link": "https://stackoverflow.com/users/10035985/andrej-kesely"}, "is_accepted": false, "score": 0, "last_activity_date": 1577825262, "last_edit_date": 1577825262, "creation_date": 1577824488, "answer_id": 59548263, "question_id": 59548220, "link": "https://stackoverflow.com/questions/59548220/how-do-i-get-the-next-tag/59548263#59548263", "title": "how do i get the next tag", "body": "<p><code>soup.findAll()</code> returns a list (or <code>None</code>), so you cannot call <code>findNext()</code> on it. However, you can iterate the tags and call <code>find_next()</code> on each tag separately:</p>\n\n<pre><code>import requests\nfrom bs4 import BeautifulSoup\n\nr = requests.get(\"https://www.dailypost.ng/hot-news\")\nsoup = BeautifulSoup(r.content, \"html.parser\")\nmydivs = soup.findAll(\"span\", {\"class\": \"mvp-cd-date left relative\"})\nfor tag in mydivs:\n    print(tag.find_next('h2').get_text(strip=True))\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>BREAKING: Another federal lawmaker dies in Dubai hospital\nCross-Over Night: Enugu Govt bans burning of tyres on roads\nDadiyata: DSS breaks silence as Nigerian govt critic remains missing\nCAC: Nigerian govt appoints new Acting Registrar-General\nWhat Buhari told me \u2013 Dabiri-Erewa\nWhat soldiers should expect in 2020 \u2013 Buratai\nOnly earthquake can erase Amosun\u2019s legacies in Ogun \u2013 Akinlade\nCivil War: Militia leader sentenced to 20yrs in prison\n2020: Prophet Omale releases prophecies on Buhari, Aisha, Kyari, govs, coup plot\nBREAKING: EFCC arrests Shehu Sani\nArmed Forces Day: Yobe Governor Buni, donates N40 million for emblem appeal fund\nZamfara govt bans illegal gathering in the state\nAgbenu Kacholalo: Colours of culture at Idoma International Carnival 2019 [PHOTOS]\nMen of God are too fearful, weak to challenge government activities\n2020: Peter Obi sends message to Nigerians\nTETFUND: EFCC, ICPC asked to probe agency over alleged corruption\nTwo inmates regain freedom from Uyo prison\nBuhari meets President of AfDB, Adeshina at Aso Rock\nNew Kogi CP resumes office, promises crime free state\nNothing stops you from paying N30,000 minimum wage to workers \u2013 APC challenges Makinde\n</code></pre>\n\n<hr>\n\n<p>EDIT: This script will scrape headlines from several pages:</p>\n\n<pre><code>import requests\nfrom bs4 import BeautifulSoup\n\nurl = 'https://dailypost.ng/hot-news/page/{}/'\n\nfor page in range(1, 5):    # &lt;-- change how many pages do you want\n    print('Page no.{}'.format(page))\n    soup = BeautifulSoup(requests.get(url.format(page)).content, \"html.parser\")\n    mydivs = soup.findAll(\"span\", {\"class\": \"mvp-cd-date left relative\"})\n    for tag in mydivs:\n        print(tag.find_next('h2').get_text(strip=True))\n    print('-' * 80)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15659, "user_id": 9448090, "user_type": "registered", "profile_image": "https://graph.facebook.com/600951510246447/picture?type=large", "display_name": "Jack Fleeting", "link": "https://stackoverflow.com/users/9448090/jack-fleeting"}, "is_accepted": false, "score": 0, "last_activity_date": 1577824601, "creation_date": 1577824601, "answer_id": 59548272, "question_id": 59548220, "link": "https://stackoverflow.com/questions/59548220/how-do-i-get-the-next-tag/59548272#59548272", "title": "how do i get the next tag", "body": "<p>Try replacing the last 3 lines with:</p>\n\n<pre><code>for div in mydivs:\n    mytags = div.findNext('h2')\n    for tag in mytags:\n        print(tag.strip())\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3730, "user_id": 5616096, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PjKci.jpg?s=128&g=1", "display_name": "Matthew Gaiser", "link": "https://stackoverflow.com/users/5616096/matthew-gaiser"}, "is_accepted": true, "score": 0, "last_activity_date": 1577824837, "creation_date": 1577824837, "answer_id": 59548296, "question_id": 59548220, "link": "https://stackoverflow.com/questions/59548220/how-do-i-get-the-next-tag/59548296#59548296", "title": "how do i get the next tag", "body": "<p><strong>You must iterate through <code>mydivs</code> to use findNext()</strong></p>\n\n<p><code>mydivs</code> is a list of web elements. <code>findNext</code>only applies to a single web element. You must iterate through the divs and run <code>findNext</code> on each of them. </p>\n\n<p>Just add this line</p>\n\n<pre><code>for div in mydivs:\n</code></pre>\n\n<p>and put it before </p>\n\n<pre><code>mytags = div.findNext('h2')\n</code></pre>\n\n<p>Here is the full code for your working program: </p>\n\n<pre><code>from bs4 import BeautifulSoup\nimport requests\nr = requests.get(\"https://www.dailypost.ng/hot-news\")\nsoup = BeautifulSoup(r.content, \"html.parser\")\nmydivs = soup.findAll(\"span\", {\"class\": \"mvp-cd-date left relative\"})\nfor div in mydivs:\n    mytags = div.findNext('h2')\n    for tag in mytags:\n        print(tag.strip())\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 12075410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bf560e02fa14b7cbbd44f4aa05d7a92?s=128&d=identicon&r=PG", "display_name": "realblockhead", "link": "https://stackoverflow.com/users/12075410/realblockhead"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 59548296, "answer_count": 3, "score": 1, "last_activity_date": 1577825262, "creation_date": 1577824029, "question_id": 59548220, "link": "https://stackoverflow.com/questions/59548220/how-do-i-get-the-next-tag", "title": "how do i get the next tag", "body": "<p>I am trying to get the headlines that are in between a class. the headlines are wrapped around the h2 tag. headlines come after the tag.</p>\n\n<pre><code>from bs4 import BeautifulSoup\nimport requests\nr = requests.get(\"https://www.dailypost.ng/hot-news\")\nsoup = BeautifulSoup(r.content, \"html.parser\")\nmydivs = soup.findAll(\"span\", {\"class\": \"mvp-cd-date left relative\"})\nmytags = mydivs.findNext('h2')\nfor tag in mytags:\n    print(tag.text.strip())\n</code></pre>\n"}, {"tags": ["python", "gnuradio"], "answers": [{"tags": [], "owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "is_accepted": false, "score": 0, "last_activity_date": 1577827534, "creation_date": 1577827534, "answer_id": 59548558, "question_id": 59548204, "link": "https://stackoverflow.com/questions/59548204/gnuradio-logger-append-file-flag-not-working/59548558#59548558", "title": "GnuRadio logger append file flag not working?", "body": "<p>No, that's a bug. Please report it in full, including your GNU Radio version, under <a href=\"https://github.com/gnuradio/gnuradio/issues\" rel=\"nofollow noreferrer\">https://github.com/gnuradio/gnuradio/issues</a> .</p>\n"}], "owner": {"reputation": 530, "user_id": 6462301, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/86327da4f97cbb6b639de9b70ba6c933?s=128&d=identicon&r=PG&f=1", "display_name": "rhz", "link": "https://stackoverflow.com/users/6462301/rhz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 23, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577827534, "creation_date": 1577823875, "question_id": 59548204, "link": "https://stackoverflow.com/questions/59548204/gnuradio-logger-append-file-flag-not-working", "title": "GnuRadio logger append file flag not working?", "body": "<p>I am trying to log some information generated during the running of a flowgraph to a log file.  I am using the following commands:        </p>\n\n<pre><code>    log = gr.logger('log')\n    log.set_level(\"DEBUG\")\n    log_filename = config_prms['logging']['log_filename']  #full path to log file\n    log.add_file_appender(log_filename, False, \"%r :%p: %c{1} - %m%n\")\n</code></pre>\n\n<p>where the second argument, to the best of my understanding, determines whether the log file is to be overwritten or appended to (<a href=\"https://www.gnuradio.org/doc/doxygen/classgr_1_1logger.html#a59623c0e5e128b2d86c59b93240ba034\" rel=\"nofollow noreferrer\">https://www.gnuradio.org/doc/doxygen/classgr_1_1logger.html#a59623c0e5e128b2d86c59b93240ba034</a>).  It turns out that the log file is always appended to (irrespective of whether that flag is True or False).  Is this expected behavior?</p>\n"}, {"tags": ["python", "docker", "flask", "alpine", "python-3.8"], "comments": [{"owner": {"reputation": 4883, "user_id": 62138, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/65881e840f44a05c4f3b0aea257da42e?s=128&d=identicon&r=PG", "display_name": "salparadise", "link": "https://stackoverflow.com/users/62138/salparadise"}, "edited": false, "score": 1, "creation_date": 1577825144, "post_id": 59548188, "comment_id": 105265680, "body": "Try mounting the folder that contains all files instead of mounting each individual file in the volumes section."}, {"owner": {"reputation": 582, "user_id": 5294585, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-3VgMixOzzcU/AAAAAAAAAAI/AAAAAAAABQ4/SZLIhuGrVsk/photo.jpg?sz=128", "display_name": "David Scott", "link": "https://stackoverflow.com/users/5294585/david-scott"}, "reply_to_user": {"reputation": 4883, "user_id": 62138, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/65881e840f44a05c4f3b0aea257da42e?s=128&d=identicon&r=PG", "display_name": "salparadise", "link": "https://stackoverflow.com/users/62138/salparadise"}, "edited": false, "score": 0, "creation_date": 1577834819, "post_id": 59548188, "comment_id": 105267298, "body": "@salparadise, this workaround is working for me and will allow me to actively make changes to the project without restarting the container to see their impact. Thank you!"}], "answers": [{"comments": [{"owner": {"reputation": 64542, "user_id": 10008173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3ea5d6d5d63e054acb8cfa95a39240d?s=128&d=identicon&r=PG&f=1", "display_name": "David Maze", "link": "https://stackoverflow.com/users/10008173/david-maze"}, "edited": false, "score": 0, "creation_date": 1577829966, "post_id": 59548234, "comment_id": 105266525, "body": "If you do this (and I consider this a standard Docker workflow) you can delete the <code>volumes:</code> section in your <code>docker-compose.yml</code> file, it just hides files that are in your image build."}, {"owner": {"reputation": 582, "user_id": 5294585, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-3VgMixOzzcU/AAAAAAAAAAI/AAAAAAAABQ4/SZLIhuGrVsk/photo.jpg?sz=128", "display_name": "David Scott", "link": "https://stackoverflow.com/users/5294585/david-scott"}, "edited": false, "score": 0, "creation_date": 1577834683, "post_id": 59548234, "comment_id": 105267277, "body": "I appreciate the suggestion, and it&#39;s what I currently have to do until I find a solution, however, this requires adding nearly a minute of shutdown and startup time to see the impact of every change I make. Ideally I need a solution that allows me to use volumes and does not require restarting the container every time I update my project."}], "tags": [], "owner": {"reputation": 695, "user_id": 8661071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/182290d977f1f9fdaa010fe8a60f276e?s=128&d=identicon&r=PG&f=1", "display_name": "MasterOfTheHouse", "link": "https://stackoverflow.com/users/8661071/masterofthehouse"}, "is_accepted": false, "score": -1, "last_activity_date": 1577824128, "creation_date": 1577824128, "answer_id": 59548234, "question_id": 59548188, "link": "https://stackoverflow.com/questions/59548188/running-flask-in-docker-using-volumes-causes-error-on-reload/59548234#59548234", "title": "Running Flask in Docker Using Volumes Causes Error on Reload", "body": "<p>Try after you change your code to rebuild your docker.\nBefore making the change do</p>\n\n<pre><code>docker-compose stop\n</code></pre>\n\n<p>Then make the change by editing the line</p>\n\n<pre><code>return '&lt;h1&gt;Hello, {}, I made a small change to the text!&lt;/h1&gt;'.format(name)\n</code></pre>\n\n<p>after making  your change above, now  do</p>\n\n<pre><code>docker-compose build\n</code></pre>\n\n<p>And finally </p>\n\n<pre><code>docker-compose up\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 582, "user_id": 5294585, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-3VgMixOzzcU/AAAAAAAAAAI/AAAAAAAABQ4/SZLIhuGrVsk/photo.jpg?sz=128", "display_name": "David Scott", "link": "https://stackoverflow.com/users/5294585/david-scott"}, "is_accepted": true, "score": 3, "last_activity_date": 1577835753, "creation_date": 1577835753, "answer_id": 59549158, "question_id": 59548188, "link": "https://stackoverflow.com/questions/59548188/running-flask-in-docker-using-volumes-causes-error-on-reload/59549158#59549158", "title": "Running Flask in Docker Using Volumes Causes Error on Reload", "body": "<p>I don't know why the error is occurring, however it does appear to be caused by mounting a single file instead of a directory. By restructuring my app to mount only entire directories that include the files that need to be updated I was able to successfully use a workflow that allows for automatic Flask reload through Docker on file change.</p>\n\n<p>For whatever reason Docker does not accurately update individual files that are mounted if they are outside of a mounted directory.</p>\n"}], "owner": {"reputation": 582, "user_id": 5294585, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-3VgMixOzzcU/AAAAAAAAAAI/AAAAAAAABQ4/SZLIhuGrVsk/photo.jpg?sz=128", "display_name": "David Scott", "link": "https://stackoverflow.com/users/5294585/david-scott"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 824, "favorite_count": 0, "accepted_answer_id": 59549158, "answer_count": 2, "score": 1, "last_activity_date": 1577835753, "creation_date": 1577823719, "question_id": 59548188, "link": "https://stackoverflow.com/questions/59548188/running-flask-in-docker-using-volumes-causes-error-on-reload", "title": "Running Flask in Docker Using Volumes Causes Error on Reload", "body": "<p>I'm setting up my dev environment for a flask app in a docker container and during dev I want to be able to put Flask in development mode so that I can get live reloads when I change a file. I'm using volumes so that I can edit the files outside of docker. I am getting the desired behavior from Flask, on editing the flask test file it detects the file change, however, it appears to be attempting to serve trunkated files instead of the files as edited resulting in errors from the app.</p>\n\n<p>Dockerfile:</p>\n\n<pre><code>FROM python:3.8.1-alpine3.11\nRUN apk update &amp;&amp; apk upgrade &amp;&amp; apk add bash\n\n#Set ENV Variables\nENV FLASK_APP hello.py\n\n#Add user.\nRUN adduser -D eskimotv\nUSER eskimotv\n\n#Set Work directory\nWORKDIR /home/eskimotv\n\n#Install Dependencies\nCOPY requirements requirements\nRUN python -m venv venv\nRUN venv/bin/pip install --upgrade pip\nRUN venv/bin/pip install -r requirements/docker.txt\n\n#Copy project files\nCOPY frontend frontend\nCOPY migrations migrations\nCOPY boot.sh ./\n\n#Deploy Project\nEXPOSE 5000\n#ENTRYPOINT [\"./boot.sh\"]\n</code></pre>\n\n<p>Docker-compose.yml:</p>\n\n<pre><code>version: '3'\nservices:\n  frontend:\n    image: bentsea/eskimotv-frontend:latest\n    build:\n      dockerfile: frontend.dockerfile\n      context: .\n    ports:\n      - \"8000:5000\"\n    env_file: .env\n    volumes:\n      - './boot.sh:/home/eskimotv/boot.sh'\n      - './hello.py:/home/eskimotv/hello.py'\n      - './frontend:/home/eskimotv/frontend'\n    #entrypoint: ./boot.sh\n    restart: always\n</code></pre>\n\n<p>Simple flask app, hello.py:</p>\n\n<pre><code>from flask import Flask\napp = Flask(__name__)\n\n@app.route('/')\ndef index():\n    return '&lt;h1&gt;Hello World!&lt;/h1&gt;&lt;p&gt; Please work!&lt;/p&gt;'\n\n@app.route('/user/&lt;name&gt;')\ndef user(name):\n    return '&lt;h1&gt;Hello, {}!&lt;/h1&gt;'.format(name)\n</code></pre>\n\n<p>Environtment variable FLASK_ENV is set to development. When starting up the app for the first time all my changes are displayed correctly:</p>\n\n<p><a href=\"https://i.stack.imgur.com/woPJ5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/woPJ5.png\" alt=\"Working App Serving Correctly\"></a></p>\n\n<p>If I make a very simple edit, such as changing line 10 of hello.py with a cosmetic change, such as the following:</p>\n\n<pre><code>return '&lt;h1&gt;Hello, {}, I made a small change to the text!&lt;/h1&gt;'.format(name)\n</code></pre>\n\n<p>Flask will appropriately reload:</p>\n\n<pre><code> * Detected change in '/home/eskimotv/hello.py', reloading\n * Restarting with stat\n * Debugger is active!\n * Debugger PIN: 234-654-899\n172.21.0.1 - - [31/Dec/2019 20:00:20] \"GET /user/David HTTP/1.1\" 200 -\n * Detected change in '/home/eskimotv/hello.py', reloading\n * Restarting with stat\n * Debugger is active!\n * Debugger PIN: 234-654-899\n</code></pre>\n\n<p>However, the page will begin to produce an error rather than correctly display the page:</p>\n\n<p><a href=\"https://i.stack.imgur.com/hV1oY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hV1oY.png\" alt=\"Example of error generated after file reloads.\"></a></p>\n\n<p>Sometimes it's just an EOL error that indicates that the file is truncated, sometimes it indicates this null error. Either restarting the Flask server or undoing the edits made to the file resolves the issue and the app will function normally. Restarting the server every time I make an edit is the action I was wanting to avoid.</p>\n\n<p>Does anyone have any ideas what would cause the files in this volume configuration to load incorrectly and what I can do to resolve the issue to get the intended behavior of having the reload display the file as it is edited? </p>\n"}, {"tags": ["python", "python-3.x", "tkinter", "calculator"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1577823694, "post_id": 59548168, "comment_id": 105265374, "body": "First you need to fix your indentation, this is critical in Python."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1577823748, "post_id": 59548168, "comment_id": 105265383, "body": "<code>command=prod()</code> should be <code>command=prod</code>, and similar for all the other buttons."}, {"owner": {"reputation": 65, "user_id": 10941952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29d69e530ae13194e93e1531b9acc3f8?s=128&d=identicon&r=PG&f=1", "display_name": "Suren Grig", "link": "https://stackoverflow.com/users/10941952/suren-grig"}, "edited": false, "score": 1, "creation_date": 1577824177, "post_id": 59548168, "comment_id": 105265478, "body": "Are you confident that the numbers the user is entering have been converted to integers? If not, then they are within string form, based upon my examination of your program; convert the retrieved numbers to integers prior to multiplying them. this should work successfully. If you require assistance, provide further details and I may be able to help."}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1577825328, "post_id": 59548168, "comment_id": 105265715, "body": "@martineau: your comment is a bit confusing - you don&#39;t have to use <code>textvariable</code> in order to get data from an <code>Entry</code> widget. You can do that without a textvariable."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "reply_to_user": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1577825515, "post_id": 59548168, "comment_id": 105265746, "body": "@Bryan: I&#39;m sure you&#39;re right. I was just going by what <a href=\"https://web.archive.org/web/20190530085656id_/http://infohost.nmt.edu/tcc/help/pubs/tkinter/web/entry.html\" rel=\"nofollow noreferrer\">this documentation</a> says (see the part about the <code>textvariable</code> option). I will delete the misleading comment (although doing what is says would work)."}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1577826070, "post_id": 59548168, "comment_id": 105265837, "body": "@martineau: that documentation is wrong. The <code>Entry</code> widget has a documented <code>get</code> method for getting the data out of the widget. Usually that is sufficient. Using a textvariable is fine, but it adds an extra object to maintain with no real added value unless you&#39;re using some of the special features provided by the textvariable (tracing, and sharing between widgets)."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "reply_to_user": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1577829854, "post_id": 59548168, "comment_id": 105266503, "body": "@Bryan: Thanks for the clarification. You comments and answer are first rate. When&#39;s that book on tkinter programming you&#39;re writing coming out? <code>;&#172;)</code>"}, {"owner": {"reputation": 21, "user_id": 12633825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bef2edb8cb0464bea6ff953e60f8903e?s=128&d=identicon&r=PG&f=1", "display_name": "Nishef", "link": "https://stackoverflow.com/users/12633825/nishef"}, "edited": false, "score": 0, "creation_date": 1577863006, "post_id": 59548168, "comment_id": 105270129, "body": "Hi i have a question,what can i do for next project. which can improve my coding.Could you give an example or any suggestion?"}], "answers": [{"tags": [], "owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "is_accepted": true, "score": 1, "last_activity_date": 1577825964, "creation_date": 1577825964, "answer_id": 59548403, "question_id": 59548168, "link": "https://stackoverflow.com/questions/59548168/a-calculator-using-tkinter-library/59548403#59548403", "title": "A calculator using tkinter library", "body": "<p>In GUI programming, you need to get the value of widgets at the time you need them, not at the time you create them.</p>\n\n<p>Also, widgets return string values. If you are doing math on them, you need to convert them to numbers first. </p>\n\n<p>If you want to display the result in the window, you can update a label widget with the <code>configure</code> method</p>\n\n<p>For example, your <code>prod</code> definition could look something like this:</p>\n\n<pre><code>def prod():\n    x1 = int(e1.get())\n    x2 = int(e2.get())\n    result = x1 * x2\n    result_label.configure(text=str(result))\n</code></pre>\n\n<p>You then need to do two other things. First, you need to create the label for the result, and store the widget in a variable. To do that you must separate the creation of the widget from the layout since calling <code>grid</code> would cause the variable to be set to <code>None</code></p>\n\n<pre><code>result_label = tk.Label(calc,text=\"your result is:\")\nresult_label.grid(row=3)\n</code></pre>\n\n<p>Finally, your buttons need to be given a reference to the function. What you're currently doing is calling the function and assigning the result to the <code>command</code> attribute. </p>\n\n<p>Your button should look like the following. Notice that <code>prod</code> does not have <code>()</code> after it:</p>\n\n<pre><code>btn1 = tk.Button(calc, text=\"*\", command=prod)\n...\nbtn1.grid(row=0,column=2)\n</code></pre>\n\n<p>On a side note, I think that for all widgets with a common parent, grouping all widget creation code together and then all calls to <code>grid</code> or <code>pack</code> together makes the code easier to read, easier to maintain, and easier to visualize.</p>\n\n<p>For example:</p>\n\n<pre><code>btn1 = tk.Button(...)\nbtn2 = tk.Button(...)\nbtn3 = tk.Button(...)\nbtn4 = tk.Button(...)\n\nbtn1.grid(row=0,column=2)\nbtn2.grid(row=1,column=2)\nbtn3.grid(row=2,column=2)\nbtn4.grid(row=3,column=2)\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 12633825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bef2edb8cb0464bea6ff953e60f8903e?s=128&d=identicon&r=PG&f=1", "display_name": "Nishef", "link": "https://stackoverflow.com/users/12633825/nishef"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 614, "favorite_count": 1, "accepted_answer_id": 59548403, "answer_count": 1, "score": 1, "last_activity_date": 1585718035, "creation_date": 1577823517, "last_edit_date": 1585718035, "question_id": 59548168, "link": "https://stackoverflow.com/questions/59548168/a-calculator-using-tkinter-library", "title": "A calculator using tkinter library", "body": "<p>I want to have a calculator with 4 buttons and 2 entry. What is my problem? I don't know how to fix that it can't multiply sequence by non-int of type <code>str</code> nor can't multiply <code>entry * entry</code>. </p>\n\n<p>Also I don't know where is my output and how use that.</p>\n\n<pre><code>from tkinter import ttk\nfrom tkinter import *\nimport tkinter as tk\n\n#the environment\n\ncalc=tk.Tk()\ncalc.title(\"Calculator\")\n\n#-------------------------------------\n#lables and their data entry\ntk.Label(calc,text=\"enter your first number:\").grid(row=0)\ntk.Label(calc,text=\"enter your second number:\").grid(row=1)\ne1=tk.Entry(calc)\ne2=tk.Entry(calc)\ne1.grid(row=0, column=1)\ne2.grid(row=1, column=1)\nx1=e1.get()\nx2=e2.get()\ntk.Label(calc,text=\"your result is:\").grid(row=3)\n\n# a free variable for get output,is this really need?\nlbl=list()\n#---------------------------\n\n#the functions but my entry are entry type\ndef prod():\n    lbl=print(x1*x2)\n\ndef div():\n    lbl=print(x1/x2)\n\ndef sum():\n     lbl=print(x1+x2)\n\ndef min():\n    lbl=print(x1-x2)\n#-------------------------------\n\n\n#buttons and function in them as a command\n btn1=tk.Button(calc,text=\"*\",command=prod()).grid(row=0,column=2)\n btn2=tk.Button(calc,text=\"/\",command=div()).grid(row=1,column=2)\n btn3=tk.Button(calc,text=\"+\",command=sum()).grid(row=2,column=2)\n btn4=tk.Button(calc,text=\"-\",command=min()).grid(row=3,column=2)\n#--------------------------------------------------------------------\n\n#The answer which i need it\n print(\"your answer is:\")\n\n\n\n calc.mainloop()\n</code></pre>\n"}, {"tags": ["python", "linux", "azure", "docker"], "answers": [{"tags": [], "owner": {"reputation": 20467, "user_id": 4989676, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jP8H6.jpg?s=128&g=1", "display_name": "Peter Pan", "link": "https://stackoverflow.com/users/4989676/peter-pan"}, "is_accepted": false, "score": 3, "last_activity_date": 1577959952, "creation_date": 1577959952, "answer_id": 59561571, "question_id": 59548152, "link": "https://stackoverflow.com/questions/59548152/cant-open-lib-odbc-driver-17-for-sql-server-file-not-found/59561571#59561571", "title": "Can&#39;t open lib &#39;ODBC Driver 17 for SQL Server&#39; : file not found", "body": "<p>First, if you want to know what os release is in your docker, you can command <code>cat /etc/os-release</code> to get it, such as run it in my ubuntu as the figure below.</p>\n\n<p><a href=\"https://i.stack.imgur.com/MRzR6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MRzR6.png\" alt=\"enter image description here\"></a></p>\n\n<p>At here, I'm sure your web app os is Alpine Linux, due to the first line of your docker file <code>FROM tiangolo/uwsgi-nginx-flask:python3.6-alpine3.7</code>. Your base image is based on Alpine 3.7.</p>\n\n<p>Second, according to your error info <code>Error: ('01000', \"[01000] [unixODBC][Driver Manager]Can't open lib 'ODBC Driver 17 for SQL Server' : file not found (0) (SQLDriverConnect)\")</code> and the content of your docker file and <code>requirements.txt</code>, I think the issue was caused by missing MS SQL Server ODBC driver for Linux which not be installed in your docker image, but <code>pyodbc</code> required it to connect Azure SQL Database.</p>\n\n<p>However, for <code>ODBC Driver 17 for SQL Server</code>, the offical document <a href=\"https://docs.microsoft.com/en-us/sql/connect/odbc/linux-mac/installing-the-microsoft-odbc-driver-for-sql-server?view=sql-server-ver15#microsoft-odbc-driver-17-for-sql-server\" rel=\"nofollow noreferrer\"><code>Installing the Microsoft ODBC Driver for SQL Server on Linux and macOS</code></a> shows there is not a released v17 package for Alpine. So the workaround is to change your DockerHub base image from <code>tiangolo/uwsgi-nginx-flask:python3.6-alpine3.7</code> to <code>tiangolo/uwsgi-nginx-flask:python3.6</code> to use debian as OS, then you can easily install MS ODBC driver 17 for SQL Server in it.</p>\n\n<p>For your additional questions, as below.</p>\n\n<ol>\n<li><p>Except for using <code>pyodbc</code>, <code>pymssql</code> is the other one of Python SQL Driver, please see the offical document <a href=\"https://docs.microsoft.com/en-us/sql/connect/python/python-driver-for-sql-server?view=sql-server-ver15\" rel=\"nofollow noreferrer\"><code>Python SQL Driver</code></a>, but <a href=\"https://github.com/pymssql/pymssql\" rel=\"nofollow noreferrer\"><code>The Pymssql Project is Being Discontinued</code></a>. And <a href=\"https://docs.sqlalchemy.org/en/13/dialects/mssql.html\" rel=\"nofollow noreferrer\"><code>SQLAlchemy</code></a> as ORM framework can be used to connect Azure SQL Database, which also requires <code>pyodbc</code> or <code>pymssql</code>.</p></li>\n<li><p>Use MySQL or Azure SQL Database, it's up to you. I think the only difference is that MySQL may be installed easiler than Azure SQL DB in Alpine.</p></li>\n<li><p>The way to open <code>odbcinst.ini</code> file on webapp is to use vim over SSH to connect to your docker OS. Considering for the custom docker image you used, please see the section <a href=\"https://docs.microsoft.com/en-us/azure/app-service/containers/configure-custom-container#enable-ssh\" rel=\"nofollow noreferrer\"><code>Enable SSH</code></a> of the offical document <code>Configure a custom Linux container for Azure App Service</code> and replace the command <code>apk</code> with <code>apt</code> for Debian Linux.</p></li>\n</ol>\n"}], "owner": {"reputation": 21, "user_id": 12633682, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCDr7uw_hV8cn8yu0FThAymP9ddSnjTErsgCzxkTA=k-s128", "display_name": "user12633682", "link": "https://stackoverflow.com/users/12633682/user12633682"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6420, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1577961250, "creation_date": 1577823354, "last_edit_date": 1577961250, "question_id": 59548152, "link": "https://stackoverflow.com/questions/59548152/cant-open-lib-odbc-driver-17-for-sql-server-file-not-found", "title": "Can&#39;t open lib &#39;ODBC Driver 17 for SQL Server&#39; : file not found", "body": "<p>I am fairly new to Python and Azure web apps.  Any help is appreciated.</p>\n\n<p>My setup:</p>\n\n<ul>\n<li>Program: Visual Studio code</li>\n<li>Language: Python-Flask</li>\n<li>Cloud provider: Microsoft Azure</li>\n<li>Database: Azure SQL DB</li>\n<li>Deployment option: Docker image > Azure container registry > Deploy the image to the Web app</li>\n<li>Web App OS: Linux (I think Alpine?)</li>\n</ul>\n\n<p>In my code, I am using <code>pyodbc</code> to connect to the Azure SQL DB.  The code runs successfully locally in the terminal.  However, when it runs on the web, it encounters the following error:</p>\n\n<p><code>Error: ('01000', \"[01000] [unixODBC][Driver Manager]Can't open lib 'ODBC Driver 17 for SQL Server' : file not found (0) (SQLDriverConnect)\")</code></p>\n\n<p>I followed several troubleshooting posts, however, I have not been successful.  </p>\n\n<p>I tried using the $sudo ln to create a symbolic link that resulted in permission denied.  I think this is a known limitation of the Azure web app.  </p>\n\n<p>I tried to look for the driver in etc/odbcinst.ini to see if the driver name exists, however, I am pretty new to Azure / VS Code so I do not even know how to open the file that is in the, etc/ folder.  I do see it in the BASH command prompt when I navigate to the etc/ folder but not sure how to open the file.</p>\n\n<p>I ran the following command in the <code>BASH</code> to install <code>PYODBC</code>, but that didn't resolve the issue. </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>python -m pip install pyodbc\n</code></pre>\n\n<p>The result from <code>odbcinst -j</code></p>\n\n<pre><code>    unixODBC 2.3.4\n    DRIVERS............: /etc/odbcinst.ini\n    SYSTEM DATA SOURCES: /etc/odbc.ini\n    FILE DATA SOURCES..: /etc/ODBCDataSources\n    USER DATA SOURCES..: /home/a49d42b0d7b8ce200a4f7e74/.odbc.ini\n    SQLULEN Size.......: 8\n    SQLLEN Size........: 8\n    SQLSETPOSIROW Size.: 8\n</code></pre>\n\n<p>My dockerFile:</p>\n\n<pre><code># Pull a pre-built alpine docker image with nginx and python3 installed\nFROM tiangolo/uwsgi-nginx-flask:python3.6-alpine3.7\n\nENV LISTEN_PORT=8000\nEXPOSE 8000\n\nCOPY /app /app\n\n# Uncomment to install additional requirements from a requirements.txt file\nCOPY requirements.txt /\nRUN pip install --no-cache-dir -U pip\nRUN pip install --no-cache-dir -r /requirements.txt\n\nRUN apk add g++\nRUN apk add unixodbc-dev\nRUN pip install pyodbc\n</code></pre>\n\n<p>My requirements.txt.  I commented out <code>pyodbc</code>; I think that's okay since I am installing it in the docker file.</p>\n\n<pre><code>click==6.7\nFlask==0.12.2\nitsdangerous==0.24\nJinja2==2.10\nMarkupSafe==1.0\nWerkzeug==0.14.1\n#pyodbc==4.0.28\n</code></pre>\n\n<p>Additional questions:</p>\n\n<ol>\n<li>Should I be using PYODBC? or is there something better / more compatible I should be using?</li>\n<li>Should I use MYSQL instead of Azure SQL DB? </li>\n<li>Is there a way for me to open the <code>odbcinst.ini</code> file that is on the web app?</li>\n</ol>\n"}, {"tags": ["python", "pandas", "dataframe"], "answers": [{"tags": [], "owner": {"reputation": 2423, "user_id": 6007566, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2dc2e86664941a748f0dab92216d67c6?s=128&d=identicon&r=PG&f=1", "display_name": "Boendal", "link": "https://stackoverflow.com/users/6007566/boendal"}, "is_accepted": true, "score": 2, "last_activity_date": 1577879070, "last_edit_date": 1577879070, "creation_date": 1577824994, "answer_id": 59548315, "question_id": 59548114, "link": "https://stackoverflow.com/questions/59548114/segregate-repeat-column-values/59548315#59548315", "title": "Segregate Repeat Column Values", "body": "<p>You can do it with the help of a memory to remember on which step for each particular step you are. \nWith the use of apply you can then create a new column. </p>\n\n<pre><code>import pandas as pd\n\nraw_data = [{'Date': '1-10-19', 'Read': 1.1, 'Step': 1},\n            {'Date': '2-10-19', 'Read': 1.11, 'Step': 1},\n            {'Date': '3-10-19', 'Read': 10.1, 'Step': 2},\n            {'Date': '4-10-19', 'Read': 10.11, 'Step': 2},\n            {'Date': '5-10-19', 'Read': 1.2, 'Step': 1},\n            {'Date': '6-10-19', 'Read': 1.21, 'Step': 1},\n            {'Date': '7-10-19', 'Read': 10.2, 'Step': 2},\n            {'Date': '8-10-19', 'Read': 10.21, 'Step': 2}]\n\ndf = pd.DataFrame(raw_data)\n\nstep_memory = {}\nlast_step = -1\n\ndef calculate_new_step(row):\n    global last_step\n    step = row['Step']\n    output = str(step) + \".\"\n    if step == last_step:\n        output += str(step_memory[step])\n    else:\n        last_step = step\n        step_memory[step] = step_memory.get(step, 0) + 1\n        output += str(step_memory[step])\n    return float(output) #if you want it as a String delete float\n\ndf['Step_New'] = df.apply(calculate_new_step, axis=1)\nprint(df)\n</code></pre>\n\n<h1>Output:</h1>\n\n<pre><code>      Date   Read  Step  Step_New\n0  1-10-19   1.10     1       1.1\n1  2-10-19   1.11     1       1.1\n2  3-10-19  10.10     2       2.1\n3  4-10-19  10.11     2       2.1\n4  5-10-19   1.20     1       1.2\n5  6-10-19   1.21     1       1.2\n6  7-10-19  10.20     2       2.2\n7  8-10-19  10.21     2       2.2\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2423, "user_id": 6007566, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2dc2e86664941a748f0dab92216d67c6?s=128&d=identicon&r=PG&f=1", "display_name": "Boendal", "link": "https://stackoverflow.com/users/6007566/boendal"}, "edited": false, "score": 0, "creation_date": 1577826824, "post_id": 59548341, "comment_id": 105265986, "body": "your solution doesn&#39;t work as soon as you add another row of step 1 or step 3."}, {"owner": {"reputation": 2127, "user_id": 9377366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/885e8773aad4c9408787bfe8329b663f?s=128&d=identicon&r=PG&f=1", "display_name": "fsl", "link": "https://stackoverflow.com/users/9377366/fsl"}, "reply_to_user": {"reputation": 2423, "user_id": 6007566, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2dc2e86664941a748f0dab92216d67c6?s=128&d=identicon&r=PG&f=1", "display_name": "Boendal", "link": "https://stackoverflow.com/users/6007566/boendal"}, "edited": false, "score": 0, "creation_date": 1577828841, "post_id": 59548341, "comment_id": 105266330, "body": "Could you elaborate? Added both, seems to be holding."}, {"owner": {"reputation": 2423, "user_id": 6007566, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2dc2e86664941a748f0dab92216d67c6?s=128&d=identicon&r=PG&f=1", "display_name": "Boendal", "link": "https://stackoverflow.com/users/6007566/boendal"}, "edited": false, "score": 0, "creation_date": 1577829435, "post_id": 59548341, "comment_id": 105266433, "body": "use the test data from my post.  Also in your post row 10 has step_new 1.2 and row 11 1.3 but both should have Step_new 1.3"}, {"owner": {"reputation": 2127, "user_id": 9377366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/885e8773aad4c9408787bfe8329b663f?s=128&d=identicon&r=PG&f=1", "display_name": "fsl", "link": "https://stackoverflow.com/users/9377366/fsl"}, "reply_to_user": {"reputation": 2423, "user_id": 6007566, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2dc2e86664941a748f0dab92216d67c6?s=128&d=identicon&r=PG&f=1", "display_name": "Boendal", "link": "https://stackoverflow.com/users/6007566/boendal"}, "edited": false, "score": 0, "creation_date": 1577830331, "post_id": 59548341, "comment_id": 105266581, "body": "I guess we understood different things, from what I got row 10 with Read of 1.22 should still have a Step_New of 1.2, not 1.3. Anyhow..."}], "tags": [], "owner": {"reputation": 2127, "user_id": 9377366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/885e8773aad4c9408787bfe8329b663f?s=128&d=identicon&r=PG&f=1", "display_name": "fsl", "link": "https://stackoverflow.com/users/9377366/fsl"}, "is_accepted": false, "score": 2, "last_activity_date": 1577834137, "last_edit_date": 1577834137, "creation_date": 1577825264, "answer_id": 59548341, "question_id": 59548114, "link": "https://stackoverflow.com/questions/59548114/segregate-repeat-column-values/59548341#59548341", "title": "Segregate Repeat Column Values", "body": "<p>Here is an alternative tracking the decimal step for each Step group:</p>\n\n<pre><code>       Date    Read  Step\n0   1-10-19    1.10     1\n1   2-10-19    1.11     1\n2   3-10-19   10.10     2\n3   4-10-19   10.11     2\n4   5-10-19    1.20     1\n5   6-10-19    1.21     1\n6   7-10-19   10.20     2\n7   8-10-19   10.21     2\n8   8-10-19  100.10     3\n9   8-10-19  100.11     3\n10  6-10-19    1.22     1\n11  6-10-19    1.31     1\n\ndf[\"Step_New\"] = df.Step + df.groupby('Step')['Read'].apply(lambda x: round(x - x.astype(int), 1))                                                                                                 \n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>       Date    Read  Step  Step_New\n0   1-10-19    1.10     1       1.1\n1   2-10-19    1.11     1       1.1\n2   3-10-19   10.10     2       2.1\n3   4-10-19   10.11     2       2.1\n4   5-10-19    1.20     1       1.2\n5   6-10-19    1.21     1       1.2\n6   7-10-19   10.20     2       2.2\n7   8-10-19   10.21     2       2.2\n8   8-10-19  100.10     3       3.1\n9   8-10-19  100.11     3       3.1\n10  6-10-19    1.22     1       1.2\n11  6-10-19    1.31     1       1.3\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 11689962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a61a8be5a304a0cceafb491fee9d3df?s=128&d=identicon&r=PG&f=1", "display_name": "Huecool", "link": "https://stackoverflow.com/users/11689962/huecool"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 59548315, "answer_count": 2, "score": 2, "last_activity_date": 1577879070, "creation_date": 1577823045, "last_edit_date": 1577825334, "question_id": 59548114, "link": "https://stackoverflow.com/questions/59548114/segregate-repeat-column-values", "title": "Segregate Repeat Column Values", "body": "<p>This probably has been asked before...</p>\n\n<p>I have long files of recorded values such as Time, Temperature, etc. based on a certain step the input function is in. A 'Step' column records the current step, in this case 1 to 20 steps. The steps can repeat such as below (small portion of data):</p>\n\n<pre><code>import pandas as pd\n\nraw_data = [{'Date': '1-10-19', 'Read': 1.1, 'Step': 1},\n            {'Date': '2-10-19', 'Read': 1.11, 'Step': 1},\n            {'Date': '3-10-19', 'Read': 10.1, 'Step': 2},\n            {'Date': '4-10-19', 'Read': 10.11, 'Step': 2},\n            {'Date': '5-10-19', 'Read': 1.2, 'Step': 1},\n            {'Date': '6-10-19', 'Read': 1.21, 'Step': 1},\n            {'Date': '7-10-19', 'Read': 10.2, 'Step': 2},\n            {'Date': '8-10-19', 'Read': 10.21, 'Step': 2}]\n\ndf = pd.DataFrame(raw_data)\n</code></pre>\n\n<pre class=\"lang-none prettyprint-override\"><code>      Date   Read  Step\n0  1-10-19   1.10     1\n1  2-10-19   1.11     1\n2  3-10-19  10.10     2\n3  4-10-19  10.11     2\n4  5-10-19   1.20     1\n5  6-10-19   1.21     1\n6  7-10-19  10.20     2\n7  8-10-19  10.21     2\n</code></pre>\n\n<p>I need to keep track of the Step sequence groups over time such as below:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>      Date   Read  Step   Step_New\n0  1-10-19   1.10     1   1.1\n1  2-10-19   1.11     1   1.1\n2  3-10-19  10.10     2   2.1\n3  4-10-19  10.11     2   2.1\n4  5-10-19   1.20     1   1.2\n5  6-10-19   1.21     1   1.2\n6  7-10-19  10.20     2   2.2\n7  8-10-19  10.21     2   2.2\n</code></pre>\n\n<p>How should I add this new column? Eventually I'll <code>groupby</code> this column to perform some statistics on the new individual steps.</p>\n"}, {"tags": ["python", "python-3.x", "python-imaging-library"], "comments": [{"owner": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 2, "creation_date": 1577825387, "post_id": 59548103, "comment_id": 105265721, "body": "It&#39;s only a couple of lines with Numpy which is what you should be using with images since it has many algorithms and is very fast. So convert your PIL Image to Numpy array make a copy of the whole thing and invert it all. Then use <code>np.where()</code> to choose, for each pixel location whether to use the original image or the inverted one."}, {"owner": {"reputation": 21, "user_id": 12341475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FTi3m.png?s=128&g=1", "display_name": "sutterismine", "link": "https://stackoverflow.com/users/12341475/sutterismine"}, "reply_to_user": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1577825774, "post_id": 59548103, "comment_id": 105265790, "body": "@MarkSetchell thanks! I&#39;ll look into numpy."}, {"owner": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 1, "creation_date": 1577825793, "post_id": 59548103, "comment_id": 105265793, "body": "It should look like this pretty much... <a href=\"https://stackoverflow.com/a/59322460/2836621\">stackoverflow.com/a/59322460/2836621</a>"}, {"owner": {"reputation": 21, "user_id": 12341475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FTi3m.png?s=128&g=1", "display_name": "sutterismine", "link": "https://stackoverflow.com/users/12341475/sutterismine"}, "reply_to_user": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1577826067, "post_id": 59548103, "comment_id": 105265836, "body": "@MarkSetchell That was so helpful! Thank you!"}, {"owner": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 1, "creation_date": 1577827600, "post_id": 59548103, "comment_id": 105266129, "body": "Sorry I&#39;m not near a computer to help in more detail. If you work out how to do it, you can write it up as an answer for others to use and accept it as correct and bag the points. Good luck! Come back if you get stuck - questions are free\ud83d\ude0e"}, {"owner": {"reputation": 21, "user_id": 12341475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FTi3m.png?s=128&g=1", "display_name": "sutterismine", "link": "https://stackoverflow.com/users/12341475/sutterismine"}, "reply_to_user": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1577830959, "post_id": 59548103, "comment_id": 105266684, "body": "@MarkSetchell when I followed the advice in the linked answer I got the error:         AttributeError: &#39;bool&#39; object has no attribute &#39;all&#39;   <code>result = np.where((pastarray==[0, 0, 0]).all(axis=-1)[...,None], inverse, print(&#39;help&#39;))</code>"}, {"owner": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 1, "creation_date": 1577865910, "post_id": 59548103, "comment_id": 105270545, "body": "Keep trying! If you have some new code, click <code>edit</code> under your question and add it in!"}, {"owner": {"reputation": 21, "user_id": 12341475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FTi3m.png?s=128&g=1", "display_name": "sutterismine", "link": "https://stackoverflow.com/users/12341475/sutterismine"}, "reply_to_user": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1577898194, "post_id": 59548103, "comment_id": 105277251, "body": "@MarkSetchell I figured it out, thank you so much!"}], "answers": [{"tags": [], "owner": {"reputation": 629, "user_id": 6151549, "user_type": "registered", "profile_image": "https://graph.facebook.com/10101078968746712/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6151549/mark"}, "is_accepted": false, "score": 1, "last_activity_date": 1577902611, "last_edit_date": 1577902611, "creation_date": 1577900330, "answer_id": 59554678, "question_id": 59548103, "link": "https://stackoverflow.com/questions/59548103/is-there-way-to-invert-only-specific-pixels-with-pillow/59554678#59554678", "title": "Is there way to invert only specific pixels with Pillow?", "body": "<p>Many libraries allow you to import an image into Python as a numpy array. <code>PIL</code> or <code>opencv2</code> are well documented libraries for working with images:</p>\n\n<p><code>pip install opencv2</code></p>\n\n<p>Example numpy.where() selection, meeting a set criteria, in this case inverting all pixel values below <code>THRESHOLD</code>:</p>\n\n<pre><code>import cv2\nimport numpy as np\nimport matplotlib.pyplot as plt\n\n# cut off thereshold\nTHRESHOLD = 230\n\npixel_data = cv2.imread('filename.png')\npixel_data = np.where(pixel_data &lt; THRESHOLD, 1/pixel_data, pixel_data)\n\n# display the edited image using matplotlib\nplt.imshow(pixel_data)\n</code></pre>\n\n<p>The <code>numpy.where()</code> function applies a condition to your numpy array. More details available on the: <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.where.html\" rel=\"nofollow noreferrer\">numpy official documentation</a></p>\n"}], "owner": {"reputation": 21, "user_id": 12341475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FTi3m.png?s=128&g=1", "display_name": "sutterismine", "link": "https://stackoverflow.com/users/12341475/sutterismine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1577902611, "creation_date": 1577822884, "last_edit_date": 1577899678, "question_id": 59548103, "link": "https://stackoverflow.com/questions/59548103/is-there-way-to-invert-only-specific-pixels-with-pillow", "title": "Is there way to invert only specific pixels with Pillow?", "body": "<p>I am making a program where you can chose an image and a color and it will invert only the pixels that match that color. I've been surfing stackoverflow and reddit for solutions but so far no luck.</p>\n\n<p>I tried to do something like this first:</p>\n\n<pre><code>img = Image.open('past.png')\npixels = img.load()\nfor i in goodpixels:\n    ImageOps.invert(pixels[i])\n</code></pre>\n\n<p>AttributeError: 'tuple' object has no attribute 'mode'</p>\n\n<p>No luck with that because ImageOps.invert only inverts full images. Next I tried to use ImageOps.polarize but realized that I couldn't use it because it takes greyscale thresholds not rgb values.</p>\n\n<pre><code>img = Image.open('past.png')\npixels = img.load()\nfor i in goodpixels:\n    ImageOps.solarize(img, threshold=pixels[i])\n</code></pre>\n\n<p>TypeError: '&lt;' not supported between instances of 'int' and 'tuple'</p>\n\n<p>This is my issue, I don't know if this is even possible. If it takes too much work I will probably abandon the project anyways because I'm just keeping myself occupied, and this isn't for marks/job.</p>\n\n<p>Some more code:</p>\n\n<pre><code>def checkpixels():\n    img = Image.open('past.png')\n    height, width = img.size\n    img = img.convert('RGB')\n    targetcolor = input('What color do you want to search for, you can use RGB format or common names like \\'red\\', \\'black\\', e.t.c. Leave this blank to invert all pixels. ')\n    print('Processing image. This could take several minutes.')\n    isrgb = re.match(r'\\d+, \\d+, \\d+|\\(\\d+, \\d+, \\d+\\)', targetcolor)\n    if type(isrgb) == re.Match:\n        targetcolor = targetcolor.strip('()')\n        targetcolor = targetcolor.split(', ')\n        targetcolor = tuple(map(int, targetcolor))\n        print(str(targetcolor))\n        for x in range(width):\n            for y in range(height):\n                color = img.getpixel((y-1, x-1))\n                if color == targetcolor:\n                    goodpixels.append((y-1, x-1))\n    else:\n        try:\n            targetcolor = ImageColor.getcolor(targetcolor.lower(), 'RGB')\n            print(targetcolor)\n            for x in range(width):\n                for y in range(height):\n                    color = img.getpixel((y-1, x-1))\n                    if color == targetcolor:\n                        goodpixels.append((y-1, x-1))\n        except:\n            print('Not a valid color smh.')\n\n    return goodpixels\ngoodpixels = []\ngoodpixels = checkpixels()\n</code></pre>\n\n<p><strong>Edit</strong>: I figured it out! Thank you to Mark Setchell for his incredible brain! I ended up using numpy to convert the image and target color to arrays, making an inverted copy of the image, and using numpy.where() to decide whether or not to switch out the pixels. I also plan on making the target color a range so the chosen color doesn't have to be so specific. All in all my code looks like this:</p>\n\n<pre><code>goodpixels = []\ntargetcolor = inputcolor()\nimg = Image.open('past.png')\ninvertimage = img.copy().convert('RGB')\ninvertimage = ImageOps.invert(invertimage)\ninvertimage.save('invert.png')\npastarray = np.array(img)\ntargetcolorarray = np.array(targetcolor)\npixels = img.load()\ninverse = np.array(invertimage)\nresult = np.where((pastarray==targetcolorarray).all(axis=-1)[...,None], inverse, pastarray)\nImage.fromarray(result.astype(np.uint8)).save('result.png')\n</code></pre>\n\n<p>Of course, inputcolor() is a function offscreen which just decides if the input is a color name or rgb value. Also I used <code>import numpy as np</code> in this example.</p>\n\n<p>A problem that I had was that original my .where method looked like this:</p>\n\n<p><code>result = np.where((pastarray==[0, 0, 0]).all(axis=-1)[...,None], inverse, pastarray)</code></p>\n\n<p>This brought up the error: <code>AttributeError: 'bool' object has no attribute 'all'</code>\nIt turns out all I had to do was convert my color into an array!</p>\n"}, {"tags": ["python", "gnuradio"], "comments": [{"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1577994969, "post_id": 59548097, "comment_id": 105306274, "body": "so yeah, that sounds like <code>sub_dir</code> isn&#39;t a module. did you make it one?"}, {"owner": {"reputation": 530, "user_id": 6462301, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/86327da4f97cbb6b639de9b70ba6c933?s=128&d=identicon&r=PG&f=1", "display_name": "rhz", "link": "https://stackoverflow.com/users/6462301/rhz"}, "reply_to_user": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1578004073, "post_id": 59548097, "comment_id": 105309310, "body": "sub_dir is a directory.  By &quot;module,&quot; do you mean &quot;package&quot; (i.e., that the directory sub_dir contains a <b>init</b>.py file)?"}], "answers": [{"comments": [{"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "reply_to_user": {"reputation": 530, "user_id": 6462301, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/86327da4f97cbb6b639de9b70ba6c933?s=128&d=identicon&r=PG&f=1", "display_name": "rhz", "link": "https://stackoverflow.com/users/6462301/rhz"}, "edited": false, "score": 0, "creation_date": 1577876899, "post_id": 59548271, "comment_id": 105272568, "body": "please put all that information into your question instead of into a comment here!"}, {"owner": {"reputation": 530, "user_id": 6462301, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/86327da4f97cbb6b639de9b70ba6c933?s=128&d=identicon&r=PG&f=1", "display_name": "rhz", "link": "https://stackoverflow.com/users/6462301/rhz"}, "edited": false, "score": 0, "creation_date": 1577987180, "post_id": 59548271, "comment_id": 105303368, "body": "Done--Question details have been expanded."}, {"owner": {"reputation": 530, "user_id": 6462301, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/86327da4f97cbb6b639de9b70ba6c933?s=128&d=identicon&r=PG&f=1", "display_name": "rhz", "link": "https://stackoverflow.com/users/6462301/rhz"}, "edited": false, "score": 0, "creation_date": 1578010720, "post_id": 59548271, "comment_id": 105310986, "body": "Upon further experimentation, it seems that the following works: 1) create a new block via gr_modtool in the usual way 2) move the associated .py into the desired sub-directory under python/ 3) update the CMakeLists.txt file in the python/ directory to contain the sub-directory associated with the new .py file 4) install as usual"}], "tags": [], "owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "is_accepted": false, "score": 0, "last_activity_date": 1577824589, "creation_date": 1577824589, "answer_id": 59548271, "question_id": 59548097, "link": "https://stackoverflow.com/questions/59548097/gnuradio-organizing-oot-module-python-code-in-sub-directories/59548271#59548271", "title": "GnuRadio: organizing OOT module python code in sub-directories", "body": "<p>You're right, Python code resides under python/. Then, you should use <code>gr_modtool add</code> to add GNU Radio python blocks. That will also add them to the CMakeLists.txt, which will in turn make sure they get installed during installation.</p>\n\n<p>No, just putting files in subdirectories doesn't make them part of the installed module. That is not different than for any other python code. If you want things to be part of a module, you need to have them in an <code>__init__.py</code>. The python.org tutorial is your friend!</p>\n"}], "owner": {"reputation": 530, "user_id": 6462301, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/86327da4f97cbb6b639de9b70ba6c933?s=128&d=identicon&r=PG&f=1", "display_name": "rhz", "link": "https://stackoverflow.com/users/6462301/rhz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 170, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1577994941, "creation_date": 1577822839, "last_edit_date": 1577994941, "question_id": 59548097, "link": "https://stackoverflow.com/questions/59548097/gnuradio-organizing-oot-module-python-code-in-sub-directories", "title": "GnuRadio: organizing OOT module python code in sub-directories", "body": "<p>I have used gr_modtool to add custom blocks in python to an OOT module.  It appears that all the source python I write must reside in the gr-my_oot_module/python directory.\nI will be writing a lot of code spread over many python files.  I would like to organize those files into sub-directories (presumably) under gr-my_oot_module/python.  Simply creating those directories and putting code there does not lead to a successful installation.</p>\n\n<p>What is the correct approach to organizing the python files I write for this module into sub-directories?</p>\n\n<p>More specifically:</p>\n\n<ol>\n<li>I added a block via gr_modtool. The associated python file with put in the python directory.</li>\n<li>I then moved that .py file into a sub-directory (sub_dir) under python/.</li>\n<li>I modified init.py and CMakeLists.txt under the python directory to reflect the sub-directory location and then did the install.</li>\n</ol>\n\n<p>The block appears in GRC. When I try to use it, it complains </p>\n\n<pre><code>File \"/home/my_name/devel/gnuradio3_8/lib/python3.6/dist-packages/my_module/__init__.py\"\n from .sub_dir.sub_dir_test_blk import sub_dir_test_blk\n ModuleNotFoundError: No module named 'my_module.sub_dir' \u2013\n</code></pre>\n"}, {"tags": ["python", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 682, "user_id": 2592393, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FHY9C.jpg?s=128&g=1", "display_name": "jtweeder", "link": "https://stackoverflow.com/users/2592393/jtweeder"}, "edited": false, "score": 1, "creation_date": 1577827972, "post_id": 59548090, "comment_id": 105266185, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/24039023/add-column-with-constant-value-to-pandas-dataframe\">Add column with constant value to pandas dataframe</a>"}], "answers": [{"tags": [], "owner": {"reputation": 11442, "user_id": 11610186, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HKHsybo6y0o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdY2OjHwdlmaUkMBZsmKiCkkybzQw/mo/photo.jpg?sz=128", "display_name": "Grzegorz Skibinski", "link": "https://stackoverflow.com/users/11610186/grzegorz-skibinski"}, "is_accepted": false, "score": 0, "last_activity_date": 1577827789, "last_edit_date": 1577827789, "creation_date": 1577822943, "answer_id": 59548107, "question_id": 59548090, "link": "https://stackoverflow.com/questions/59548090/creating-a-column-in-dataframe/59548107#59548107", "title": "Creating a column in Dataframe", "body": "<p>After you instatiate dataframe (read file into pandas object). Just do:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>df[\"dt\"]=\"Jan 1\"\n</code></pre>\n\n<p>It will populate whole column with this 1 value, for all rows</p>\n"}], "owner": {"reputation": 21, "user_id": 12633846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcab57cce567182128410f44abae403f?s=128&d=identicon&r=PG&f=1", "display_name": "user12633846", "link": "https://stackoverflow.com/users/12633846/user12633846"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 1, "closed_date": 1577844266, "answer_count": 1, "score": 1, "last_activity_date": 1577827789, "creation_date": 1577822799, "question_id": 59548090, "link": "https://stackoverflow.com/questions/59548090/creating-a-column-in-dataframe", "closed_reason": "Duplicate", "title": "Creating a column in Dataframe", "body": "<p>Very, very new to python and have a question:</p>\n\n<p>Can someone tell me how to create a new date column that is the date this data was collected. For example, if this is from a Jan 1.xlsx file, this column should be full of Jan 1.</p>\n\n<p>I know how to create the column but how do I populate with Jan 1?  Right now I only have to do this with one file but I am going to have to do this for all 31 files for January.</p>\n\n<p>All help greatly appreciated...</p>\n"}, {"tags": ["python", "anaconda"], "comments": [{"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 2, "creation_date": 1577822861, "post_id": 59548083, "comment_id": 105265176, "body": "Why do you insist on using <code>os</code>, and not any other tool for the purpose? (In general, the preferred module for running external programs is <code>subprocess</code>)."}, {"owner": {"reputation": 37, "user_id": 10236753, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-a3wmz2aq_bQ/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNPLB1Yb02mI_groZXF2wFs8rJAnA/mo/photo.jpg?sz=128", "display_name": "Lots of errors", "link": "https://stackoverflow.com/users/10236753/lots-of-errors"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1577824013, "post_id": 59548083, "comment_id": 105265445, "body": "huh i never thought of that"}, {"owner": {"reputation": 37, "user_id": 10236753, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-a3wmz2aq_bQ/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNPLB1Yb02mI_groZXF2wFs8rJAnA/mo/photo.jpg?sz=128", "display_name": "Lots of errors", "link": "https://stackoverflow.com/users/10236753/lots-of-errors"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1577824026, "post_id": 59548083, "comment_id": 105265449, "body": "How would i use subprocess"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1577828047, "post_id": 59548083, "comment_id": 105266194, "body": "Depends on the details. Are you already running in a terminal window, or do you need to start one? Just which kind of &quot;Anaconda prompt&quot; are you talking about -- a Python REPL, or something else? (What would you do or type to open the kind of prompt you want if <i>not</i> from existing Python code?)"}, {"owner": {"reputation": 37, "user_id": 10236753, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-a3wmz2aq_bQ/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNPLB1Yb02mI_groZXF2wFs8rJAnA/mo/photo.jpg?sz=128", "display_name": "Lots of errors", "link": "https://stackoverflow.com/users/10236753/lots-of-errors"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1577894435, "post_id": 59548083, "comment_id": 105276334, "body": "I don&#39;t understand can you elaborate or give an example"}], "owner": {"reputation": 37, "user_id": 10236753, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-a3wmz2aq_bQ/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNPLB1Yb02mI_groZXF2wFs8rJAnA/mo/photo.jpg?sz=128", "display_name": "Lots of errors", "link": "https://stackoverflow.com/users/10236753/lots-of-errors"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1577896084, "creation_date": 1577822731, "last_edit_date": 1577896084, "question_id": 59548083, "link": "https://stackoverflow.com/questions/59548083/how-do-i-open-anaconda-prompt-using-the-python-library-os", "title": "How do I open Anaconda prompt using the python library os?", "body": "<p>I want to open Anaconda prompt using the python subprocess library, I also need to be able to enter commands in it.</p>\n\n<p>I ams using anaconda</p>\n\n<p>spyder 4</p>\n\n<p>python 3.7</p>\n\n<p>windows 10</p>\n"}, {"tags": ["python", "arrays", "numpy"], "comments": [{"owner": {"reputation": 6719, "user_id": 2945357, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/bd030641417e32d532056ed59e3340e3?s=128&d=identicon&r=PG", "display_name": "Andreas K.", "link": "https://stackoverflow.com/users/2945357/andreas-k"}, "edited": false, "score": 0, "creation_date": 1577824873, "post_id": 59548082, "comment_id": 105265610, "body": "What&#39;s the problem with initializing <code>a</code> as <code>a = np.array([0, 1, 2])</code>? And what exactly is the result that you want to achieve (maybe there is a better way to do it)?"}, {"owner": {"reputation": 45, "user_id": 8685968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80f549e6be3d8cf2a8c227f3571758de?s=128&d=identicon&r=PG&f=1", "display_name": "Mario A Bianchet", "link": "https://stackoverflow.com/users/8685968/mario-a-bianchet"}, "reply_to_user": {"reputation": 6719, "user_id": 2945357, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/bd030641417e32d532056ed59e3340e3?s=128&d=identicon&r=PG", "display_name": "Andreas K.", "link": "https://stackoverflow.com/users/2945357/andreas-k"}, "edited": false, "score": 0, "creation_date": 1577825492, "post_id": 59548082, "comment_id": 105265741, "body": "Hi Andreas K,  [0,1,2] represent a result of a calculation inside the loop then I cannot initialize it with that before start the loop. The output is the result that i am looking for. I am not a python expert and wondering if I miss a simpler way to do it.thanks"}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 8685968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80f549e6be3d8cf2a8c227f3571758de?s=128&d=identicon&r=PG&f=1", "display_name": "Mario A Bianchet", "link": "https://stackoverflow.com/users/8685968/mario-a-bianchet"}, "edited": false, "score": 0, "creation_date": 1577826268, "post_id": 59548370, "comment_id": 105265873, "body": "Yes, the last one...speed does not matter because in my program must built  a numpy array anyway.  I didn&#39;t know before your post how to initialize an numpy.array with (0,3) shape. Great thanks!."}], "tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": true, "score": 2, "last_activity_date": 1577825614, "creation_date": 1577825614, "answer_id": 59548370, "question_id": 59548082, "link": "https://stackoverflow.com/questions/59548082/is-there-a-better-way-to-vstack-a-numpy-array-from-an-empty-array-like-a-list-a/59548370#59548370", "title": "Is there a better way to vstack a numpy array from an empty array, like a list array?", "body": "<p>Your first use, with list append:</p>\n\n<pre><code>In [146]: alist=[]                                                              \nIn [147]: for i in range(4): \n     ...:     alist.append(np.arange(i,i+3)) \n     ...:                                                                       \nIn [148]: alist                                                                 \nOut[148]: [array([0, 1, 2]), array([1, 2, 3]), array([2, 3, 4]), array([3, 4, 5])]\n</code></pre>\n\n<p>and make the array:</p>\n\n<pre><code>In [149]: np.array(alist)                                                       \nOut[149]: \narray([[0, 1, 2],\n       [1, 2, 3],\n       [2, 3, 4],\n       [3, 4, 5]])\n</code></pre>\n\n<p>or since <code>vstack</code> is happy with a list of arrays:</p>\n\n<pre><code>In [150]: np.vstack(alist)                                                      \nOut[150]: \narray([[0, 1, 2],\n       [1, 2, 3],\n       [2, 3, 4],\n       [3, 4, 5]])\n</code></pre>\n\n<p>You could use <code>vstack</code> in the loop:</p>\n\n<pre><code>In [151]: arr = np.zeros((0,3),int)                                             \nIn [152]: for i in range(4): \n     ...:     arr = np.vstack((arr, np.arange(i,i+3))) \n     ...:                                                                       \nIn [153]: arr                                                                   \nOut[153]: \narray([[0, 1, 2],\n       [1, 2, 3],\n       [2, 3, 4],\n       [3, 4, 5]])\n</code></pre>\n\n<p>This has two problems:</p>\n\n<ul>\n<li><p>it is slower; list append operates in-place simply adding a pointer to the list.  <code>vstack</code> makes whole new array each time, with a full copy!</p></li>\n<li><p>it is harder to initialize, as you found out.  You actually have to understand array shapes, and what <code>concatenate</code> does when it combines 2 or more arrays.  Here I started with a (0,3) array.</p></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 6719, "user_id": 2945357, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/bd030641417e32d532056ed59e3340e3?s=128&d=identicon&r=PG", "display_name": "Andreas K.", "link": "https://stackoverflow.com/users/2945357/andreas-k"}, "is_accepted": false, "score": 0, "last_activity_date": 1577831163, "creation_date": 1577831163, "answer_id": 59548836, "question_id": 59548082, "link": "https://stackoverflow.com/questions/59548082/is-there-a-better-way-to-vstack-a-numpy-array-from-an-empty-array-like-a-list-a/59548836#59548836", "title": "Is there a better way to vstack a numpy array from an empty array, like a list array?", "body": "<pre><code>np.array([np.arange(i, i+3) for i in range(n)])\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 8685968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80f549e6be3d8cf2a8c227f3571758de?s=128&d=identicon&r=PG&f=1", "display_name": "Mario A Bianchet", "link": "https://stackoverflow.com/users/8685968/mario-a-bianchet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 59548370, "answer_count": 2, "score": 0, "last_activity_date": 1577831163, "creation_date": 1577822725, "question_id": 59548082, "link": "https://stackoverflow.com/questions/59548082/is-there-a-better-way-to-vstack-a-numpy-array-from-an-empty-array-like-a-list-a", "title": "Is there a better way to vstack a numpy array from an empty array, like a list array?", "body": "<p>I wish to <code>vstack</code> a <code>numpy.array</code> (like building a <code>list</code>) but, I cannot  initialize the <code>numpy.array</code> with the correct shape to use <code>numpy.append</code>(<code>numpy.empty/zero/like_empty</code>, etc. did not do the trick... anyway. Finally, I figure the two pieces of code below.  Is there someyhing more pythonic? I am using python 3.6.9</p>\n\n<pre><code>import numpy as np\na=[]\nn=4\nfor i in range(n):\n'''\nsome calculation resultinng for example in an numpy.array([[i,i+1,i+2]) \n'''\n        a.append(np.array([i,i+1,i+2])) \na=np.array(a).reshape(3,n)\nprint(a)\n</code></pre>\n\n<p>or because I prefer to mantain it as a numpy array inside the loop:</p>\n\n<pre><code>import numpy as np\na=np.array([])\nn=4\nfor i in range(n):\n'''\nsome calculation resultinng for example in an numpy.array [i,i+1,i+2]\n'''\n    if a.size == 0: \n        a=np.array([i,i+1,i+2]) \n    else:\n        a=np.vstack((a,np.array([i,i+1,i+2])))\nprint(a)\n</code></pre>\n\n<p>both output:</p>\n\n<pre><code>[[0 1 2]\n [1 2 3]\n [2 3 4]\n [3 4 5]]\n</code></pre>\n"}, {"tags": ["python", "virtualenv", "gnuradio", "gnuradio-companion"], "comments": [{"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1577994768, "post_id": 59548073, "comment_id": 105306202, "body": "so, there&#39;s no pandas in your environment, which has nothing to do with GNU Radio!"}, {"owner": {"reputation": 530, "user_id": 6462301, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/86327da4f97cbb6b639de9b70ba6c933?s=128&d=identicon&r=PG&f=1", "display_name": "rhz", "link": "https://stackoverflow.com/users/6462301/rhz"}, "reply_to_user": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1578009859, "post_id": 59548073, "comment_id": 105310773, "body": "I think pandas is in my environment.  If there were no pandas in my environment, how would my .py flowgraph (the one created by GRC) run when called from the command line (via python3 my_flowgraph.py) with the virtual environment activated?  Also, with the virtual environment deactivated running the flowgraph from the command line fails (as expected)."}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1578010343, "post_id": 59548073, "comment_id": 105310885, "body": "I&#39;m sorry, but this all has nothing to do with GNU Radio, but how your virtualenvs are set up, which I can&#39;t inspect from here."}, {"owner": {"reputation": 530, "user_id": 6462301, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/86327da4f97cbb6b639de9b70ba6c933?s=128&d=identicon&r=PG&f=1", "display_name": "rhz", "link": "https://stackoverflow.com/users/6462301/rhz"}, "reply_to_user": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 1, "creation_date": 1578696813, "post_id": 59548073, "comment_id": 105536552, "body": "I dug a little bit and think I can at least see part of why the virtual environment isn&#39;t used in when I run gnuradio-companion.   The gnuradio-companion script is a python file with a shebang line at the top: #!/usr/bin/python3  which is not the path to the VE interpreter."}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1578699337, "post_id": 59548073, "comment_id": 105537067, "body": "oh, interesting!"}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1578699562, "post_id": 59548073, "comment_id": 105537120, "body": "do you have a different version of python3 than 3.6 installed outside your virtual environment? Can you add the exact way you set up your virtual environment? Because every version of python respects exactly the same environment variables telling it where to look for packages (<code>$PYTHONPATH</code>), so that would be the only explanation."}, {"owner": {"reputation": 530, "user_id": 6462301, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/86327da4f97cbb6b639de9b70ba6c933?s=128&d=identicon&r=PG&f=1", "display_name": "rhz", "link": "https://stackoverflow.com/users/6462301/rhz"}, "reply_to_user": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1579554806, "post_id": 59548073, "comment_id": 105798239, "body": "It&#39;s 3.6 for everything.  If I modify the PYTHONPATH variable in the activate script for the virtual environment to include the path to the site-packages under the virtual environment, then those packages are found under the VE when running GRC.  However, it&#39;s still not using the python interpreter under the VE.  os.executable is /usr/bin/python3.6 when running under GRC and  /home/my_name/virtual_environments/my_ve/bin/python when running the .py from the command line."}], "answers": [{"comments": [{"owner": {"reputation": 530, "user_id": 6462301, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/86327da4f97cbb6b639de9b70ba6c933?s=128&d=identicon&r=PG&f=1", "display_name": "rhz", "link": "https://stackoverflow.com/users/6462301/rhz"}, "edited": false, "score": 0, "creation_date": 1577838544, "post_id": 59548564, "comment_id": 105267699, "body": "I have started GRC from the command line after having first activated the virtual environment."}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "reply_to_user": {"reputation": 530, "user_id": 6462301, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/86327da4f97cbb6b639de9b70ba6c933?s=128&d=identicon&r=PG&f=1", "display_name": "rhz", "link": "https://stackoverflow.com/users/6462301/rhz"}, "edited": false, "score": 0, "creation_date": 1577876825, "post_id": 59548564, "comment_id": 105272551, "body": "Are you sure there&#39;s a problem with Python <i>packages</i> not found, and not something else? Could you add the <i>verbatim</i> error message to your question?"}, {"owner": {"reputation": 530, "user_id": 6462301, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/86327da4f97cbb6b639de9b70ba6c933?s=128&d=identicon&r=PG&f=1", "display_name": "rhz", "link": "https://stackoverflow.com/users/6462301/rhz"}, "edited": false, "score": 0, "creation_date": 1577989934, "post_id": 59548564, "comment_id": 105304360, "body": "added to original question"}], "tags": [], "owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "is_accepted": false, "score": 0, "last_activity_date": 1577827607, "creation_date": 1577827607, "answer_id": 59548564, "question_id": 59548073, "link": "https://stackoverflow.com/questions/59548073/using-gnuradio-companion-under-a-virtual-environment/59548564#59548564", "title": "Using GnuRadio Companion under a virtual environment", "body": "<p>You have to realize that this is standard python under the hood. If you don't start gnuradio-companion from <strong>within</strong> your activated environment, Python can't find the modules therein. That's the whole idea of virtual environments.</p>\n"}], "owner": {"reputation": 530, "user_id": 6462301, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/86327da4f97cbb6b639de9b70ba6c933?s=128&d=identicon&r=PG&f=1", "display_name": "rhz", "link": "https://stackoverflow.com/users/6462301/rhz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 274, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1577989919, "creation_date": 1577822655, "last_edit_date": 1577989919, "question_id": 59548073, "link": "https://stackoverflow.com/questions/59548073/using-gnuradio-companion-under-a-virtual-environment", "title": "Using GnuRadio Companion under a virtual environment", "body": "<p>I have created a virtual environment containing packages I need for some python out of tree blocks.  When I activate the virtual environment and attempt to run the flowgraph from companion, it complains that the special packages I included in my virtual environment cannot be found.  </p>\n\n<p>Interestingly, I can successfully run from the command line the .py version of the flowgraph automatically generated by GnuRadio Companion.</p>\n\n<p>How can I get this to work under Gnu Radio Companion?</p>\n\n<p>As a specific example, I created a virtual environment containing the pandas package and attempted to import pandas in a no_block type custom python block originally created with gr_modtool.  I did the install with the virtual environment activated.  While running the flowgraph from the command line works fine, I get the following error when attempting to run the same flowgraph from GRC (which was opened from the command line with the virtual environment activated):</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"/home/my_name/devel/gr-my_oot_module/examples/my_flowgraph.py\", line 35, in &lt;module&gt;\n    import my_oot_module\n  File \"/home/my_name/devel/gnuradio3_8/lib/python3.6/dist-packages/my_oot_module/__init__.py\", line 39, in &lt;module&gt;\n    from .my_noblock_block import my_noblock_block\n  File \"/home/my_name/devel/gnuradio3_8/lib/python3.6/dist-packages/my_oot_module/my_noblock_block.py\", line 25, in &lt;module&gt;\n    import pandas\nModuleNotFoundError: No module named 'pandas'\n</code></pre>\n"}, {"tags": ["python", "flask", "gunicorn", "werkzeug"], "comments": [{"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 1, "creation_date": 1577822761, "post_id": 59548059, "comment_id": 105265151, "body": "Can you look in the Nginx logs for request URLs that produced 404s?"}, {"owner": {"reputation": 959, "user_id": 1715544, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/70bc546c5cb343d7f39d1e1ab1559273?s=128&d=identicon&r=PG", "display_name": "AmagicalFishy", "link": "https://stackoverflow.com/users/1715544/amagicalfishy"}, "reply_to_user": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1577823291, "post_id": 59548059, "comment_id": 105265261, "body": "@Ry- good idea! I checked, but ran into <a href=\"https://stackoverflow.com/questions/32299582/nginx-access-log-and-error-log-file-empty\">this</a> problem, so I&#39;ve got to wait &#39;til the error pops up again. :l"}], "owner": {"reputation": 959, "user_id": 1715544, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/70bc546c5cb343d7f39d1e1ab1559273?s=128&d=identicon&r=PG", "display_name": "AmagicalFishy", "link": "https://stackoverflow.com/users/1715544/amagicalfishy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 128, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1586645730, "creation_date": 1577822581, "last_edit_date": 1586645730, "question_id": 59548059, "link": "https://stackoverflow.com/questions/59548059/how-does-one-debug-an-unresponsive-nebulous-werkzeug-404-error", "title": "How does one debug an unresponsive, nebulous Werkzeug 404 Error?", "body": "<p>We're using a Flask app, served by gunicorn + Nginx in a docker container. Roughly once or twice every 24 ours, our logger displays the following message: </p>\n\n<pre><code>Dec 31 00:27:36 Computer logger: [12/31/2019 08:27:36] backend ERROR:   404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. Traceback (most recent call last):   File \"/usr/local/lib/python3.6/site-packages/flask/app.py\", line 1949, in full_dispatch_request     rv = self.dispatch_request()   File \"/usr/local/lib/python3.6/site-packages/flask/app.py\", line 1925, in dispatch_request     self.raise_routing_exception(req)   File \"/usr/local/lib/python3.6/site-packages/flask/app.py\", line 1907, in raise_routing_exception     raise request.routing_exception   File \"/usr/local/lib/python3.6/site-packages/flask/ctx.py\", line 350, in match_request     result = self.url_adapter.match(return_rule=True)   File \"/usr/local/lib/python3.6/site-packages/werkzeug/routing.py\", line 1799, in match     import pdb werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again. \n</code></pre>\n\n<p>What this affects or what it's caused by is totally mysterious, and the traceback is not helpful in the slightest. There is no noticeable change on the user-facing side. I've tried many things, including starting the app. in debug mode. My most recent attempt was to go into <code>/usr/local/lib/python3.6/site-packages/werkzeug/routing.py</code> itself and change the behavior of the error. What happens, though, is that above-logged message just prints out my code changes\u2014but doesn't seem to actually run the changes themselves. (i.e. - Everything looks to run exactly the same way, regardless of how I change that file. Instead, the changes themselves are logged [not the effects of running that changed code]). </p>\n\n<p>How does one debug an unresponsive Werkzeug 404 error like this? What options/settings/methods am I missing? Why would changes to the code of <code>routing.py</code> (for example) be ignored, but printed out to the screen (as if what Python is doing is just printing out code blocks between <code>line x</code> and <code>line y</code>).</p>\n"}, {"tags": ["python", "pandas", "list", "dataframe", "list-comprehension"], "answers": [{"tags": [], "owner": {"reputation": 62335, "user_id": 9840637, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QqY9S.png?s=128&g=1", "display_name": "anky", "link": "https://stackoverflow.com/users/9840637/anky"}, "is_accepted": true, "score": 1, "last_activity_date": 1577824484, "last_edit_date": 1577824484, "creation_date": 1577823069, "answer_id": 59548116, "question_id": 59548017, "link": "https://stackoverflow.com/questions/59548017/create-a-list-in-list-comprehension-and-then-create-another-list-from-that-list/59548116#59548116", "title": "Create a list in list comprehension and then create another list from that list inside the same list comprehension", "body": "<p>you can use a <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.dot.html\" rel=\"nofollow noreferrer\"><code>dot</code></a> product with a conditional statement , then zip and extract a tuple:</p>\n\n<pre><code>[(a,b) for a,b in zip(df.eq(1).dot(df.columns.str[0]),df.eq(1).dot(df.columns.str[0])[1:])]\n#same with .iloc -&gt; [(a,b) for a,b in zip(df.eq(1).dot(df.columns.str[0]),df.eq(1).dot(\n#                                          df.columns.str[0]).iloc[1:])]\n</code></pre>\n\n<hr>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>[(1, 1), (1, 1), (1, 2), (2, 3), (3, 4)]\n</code></pre>\n\n<p><strong>Full Working Code</strong>:</p>\n\n<pre><code>data = []\nfor i in range(0,6):\n    row = []\n    for j in range(0,6):\n        if i == j:\n            row.append(1)\n        else:\n            row.append(0)\n    data.append(row)\n\ncolnames = [(1,2),(1,3),(1,4),(2,1),(3,1),(4,1)]\ndf = pd.DataFrame(data, columns = colnames)\n[(a,b) for a,b in zip(df.eq(1).dot(df.columns.str[0]),df.eq(1).dot(df.columns.str[0])[1:])]\n#[(1, 1), (1, 1), (1, 2), (2, 3), (3, 4)]\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 12633730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/520ddfe88898ba28cd9aae4610a40f67?s=128&d=identicon&r=PG&f=1", "display_name": "freshestcereal", "link": "https://stackoverflow.com/users/12633730/freshestcereal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 59548116, "answer_count": 1, "score": 1, "last_activity_date": 1577841467, "creation_date": 1577822127, "last_edit_date": 1577841467, "question_id": 59548017, "link": "https://stackoverflow.com/questions/59548017/create-a-list-in-list-comprehension-and-then-create-another-list-from-that-list", "title": "Create a list in list comprehension and then create another list from that list inside the same list comprehension", "body": "<p>That title is a mouthful, so it may be easier to show what I am trying to achieve via code.</p>\n\n<pre><code>import pandas as pd\n\ndata = []\nfor i in range(0,6):\n    row = []\n    for j in range(0,6):\n        if i == j:\n            row.append(1)\n        else:\n            row.append(0)\n    data.append(row)\n\ncolnames = [(1,2),(1,3),(1,4),(2,1),(3,1),(4,1)]\ndf = pd.DataFrame(data, columns = colnames)\n</code></pre>\n\n<p>The above is not where I am having trouble with, but I wanted to provide as much context as possible.</p>\n\n<p>I am trying to iterate through the dataframe and retrieve the first element of the column name where the dataframe's element equals 1. I can do this using the following:</p>\n\n<pre><code>[col[0] for col in df if (df[col] == 1).any()]\n</code></pre>\n\n<p>This generates the first list I need to create:</p>\n\n<pre><code>[1, 1, 1, 2, 3, 4]\n</code></pre>\n\n<p>I can assign that output to a variable and perform another list comprehension to get my final output:</p>\n\n<pre><code>res = [col[0] for col in df if (df[col] == 1).any()]\n\n[(res[i], res[i+1]) for i in range(len(res)-1)]\n</code></pre>\n\n<p>This outputs my final list of:</p>\n\n<pre><code>[(1, 1), (1, 1), (1, 2), (2, 3), (3, 4)]\n</code></pre>\n\n<p>Is it possible to perform both of these inside the same list comprehension while only receiving that final list as the output?</p>\n\n<p>This is somewhat inelegant, but this is what it would look like in non-list comprehension:</p>\n\n<pre><code>x = []\ny = []\nfor i in range(0,1):\n    for col in df:\n        if df[col].any() == 1:\n            x.append(col[0])\n    for j in range(len(x)-1):\n        y.append((x[j],x[j+1]))\n</code></pre>\n\n<p>Thank you for taking the time to look this over!</p>\n"}, {"tags": ["python", "pyspark", "pyspark-dataframes"], "comments": [{"owner": {"reputation": 11518, "user_id": 9510729, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-HbuuPS6a5d4/AAAAAAAAAAI/AAAAAAAAAvQ/8hLG9Jvhyzc/photo.jpg?sz=128", "display_name": "jxc", "link": "https://stackoverflow.com/users/9510729/jxc"}, "edited": false, "score": 0, "creation_date": 1577823808, "post_id": 59548016, "comment_id": 105265395, "body": "just use <code>F.array_distinct()</code> to remove duplicates from the flattened list"}], "answers": [{"tags": [], "owner": {"reputation": 11442, "user_id": 11610186, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HKHsybo6y0o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdY2OjHwdlmaUkMBZsmKiCkkybzQw/mo/photo.jpg?sz=128", "display_name": "Grzegorz Skibinski", "link": "https://stackoverflow.com/users/11610186/grzegorz-skibinski"}, "is_accepted": true, "score": 2, "last_activity_date": 1577822664, "creation_date": 1577822664, "answer_id": 59548075, "question_id": 59548016, "link": "https://stackoverflow.com/questions/59548016/pyspark-group-by-column-and-collect-unique-set-of-values-from-a-column-of-arra/59548075#59548075", "title": "Pyspark - group by column and collect unique set of values from a column of arrays of integers", "body": "<p>This should do the trick - you need to <code>explode()</code> first, then <code>collect_set()</code>:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>df.select(\"group\", F.explode(F.col(\"col_list\")).alias(\"col_list\")).groupby(\"group\").agg(F.collect_set('col_list'))\n</code></pre>\n"}], "owner": {"reputation": 187, "user_id": 5387092, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0fb0b5019915a52e64b96f6b61c52f79?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/5387092/mike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 0, "accepted_answer_id": 59548075, "answer_count": 1, "score": 0, "last_activity_date": 1577822664, "creation_date": 1577822116, "question_id": 59548016, "link": "https://stackoverflow.com/questions/59548016/pyspark-group-by-column-and-collect-unique-set-of-values-from-a-column-of-arra", "title": "Pyspark - group by column and collect unique set of values from a column of arrays of integers", "body": "<p>I need some help with the following issue.</p>\n\n<p>I have a pyspark dataframe with two columns:</p>\n\n<pre><code>+----------------------+------+\n|             col_list | group|\n+----------------------+------+\n|[1, 2, 3, 4, 5, 6, 7] |group1|\n|            [6, 7, 8] |group1|\n|         [1, 2, 3, 4] |group2|\n|             [10, 11] |group2|\n+----------------------+------+\n</code></pre>\n\n<p>And I want to do a groupby the column named <code>group</code> and collect unique values only into one list from column <code>col_list</code>.</p>\n\n<p>I have tried this:</p>\n\n<pre><code>df.groupby(\"group\").agg(F.flatten(F.collect_set('col_list')))\n</code></pre>\n\n<p>and it responded with this answer:</p>\n\n<pre><code>+------+-------------------------------+\n| group|flatten(collect_set(col_list)) |\n+------+-------------------------------+\n|group1|          [1,2,3,4,5,6,7,6,7,8]|\n|group2|          [10, 11, 1, 2, 3, 4] |\n+------+-------------------------------+\n</code></pre>\n\n<p>The group1 flatten list has duplicates and I need some help with only returning unique values like:</p>\n\n<p><code>[1,2,3,4,5,6,7,8]</code></p>\n"}, {"tags": ["python", "anaconda", "virtualenv"], "comments": [{"owner": {"reputation": 6232, "user_id": 509977, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/DxOt0.jpg?s=128&g=1", "display_name": "Pitto", "link": "https://stackoverflow.com/users/509977/pitto"}, "edited": false, "score": 1, "creation_date": 1577821786, "post_id": 59547952, "comment_id": 105264967, "body": "The poor man solution is running your code, getting import error, using pip install to solve that error and move to the next. In the end you&#39;ll have a working venv that you can freeze and save its requirements.txt file."}, {"owner": {"reputation": 1568, "user_id": 1886237, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/waHap.jpg?s=128&g=1", "display_name": "Michael Szczepaniak", "link": "https://stackoverflow.com/users/1886237/michael-szczepaniak"}, "reply_to_user": {"reputation": 6232, "user_id": 509977, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/DxOt0.jpg?s=128&g=1", "display_name": "Pitto", "link": "https://stackoverflow.com/users/509977/pitto"}, "edited": false, "score": 0, "creation_date": 1577821916, "post_id": 59547952, "comment_id": 105264990, "body": "Ya, but something a little more direct and less time consuming would really be cool."}, {"owner": {"reputation": 6232, "user_id": 509977, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/DxOt0.jpg?s=128&g=1", "display_name": "Pitto", "link": "https://stackoverflow.com/users/509977/pitto"}, "edited": false, "score": 0, "creation_date": 1577822503, "post_id": 59547952, "comment_id": 105265092, "body": "The key part here is having an environment that contains all the requirements for your software. Anaconda just simplifies (well, it is not that different from pip) this process but it is still a 100% per case scenario. Having Anaconda env doesn&#39;t mean that your software will run. If your software needs a module you will have to install that module using Anaconda and then use the software. It is not different from using Pip, in the end."}, {"owner": {"reputation": 6232, "user_id": 509977, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/DxOt0.jpg?s=128&g=1", "display_name": "Pitto", "link": "https://stackoverflow.com/users/509977/pitto"}, "edited": false, "score": 0, "creation_date": 1577822646, "post_id": 59547952, "comment_id": 105265115, "body": "Wait, I had an idea..."}, {"owner": {"reputation": 4719, "user_id": 2958070, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/FtkjC.jpg?s=128&g=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/2958070/ben"}, "edited": false, "score": 0, "creation_date": 1577822881, "post_id": 59547952, "comment_id": 105265181, "body": "Miniconda is really quite easy to uninstall if you don&#39;t like it. Unless youre worried about its security (and I consider the base packages safe), consider trying it and uninstalling it after your class."}, {"owner": {"reputation": 1568, "user_id": 1886237, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/waHap.jpg?s=128&g=1", "display_name": "Michael Szczepaniak", "link": "https://stackoverflow.com/users/1886237/michael-szczepaniak"}, "edited": false, "score": 0, "creation_date": 1577825280, "post_id": 59547952, "comment_id": 105265705, "body": "If I understand <a href=\"https://stackoverflow.com/questions/45421163/anaconda-vs-miniconda\">this</a> link correctly, miniconda is just python, conda and the packages that conda uses.  Our workflow starts with a base vanilla python (currently 3.7.3). From there, we manage packages manually with pip.  There&#39;s no need for another python interpreter or conda. What I really need is a listing of those packages (preferable as a requirements file) so I can minimize the number of <code>pip install yet_another_package</code> commands I need to execute to get things working."}], "answers": [{"comments": [{"owner": {"reputation": 1568, "user_id": 1886237, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/waHap.jpg?s=128&g=1", "display_name": "Michael Szczepaniak", "link": "https://stackoverflow.com/users/1886237/michael-szczepaniak"}, "edited": false, "score": 1, "creation_date": 1577822753, "post_id": 59548069, "comment_id": 105265149, "body": "That&#39;s clever.  A little time consuming, but seems well worth it."}, {"owner": {"reputation": 927, "user_id": 1405543, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/530b04bd8f2e6e622bd841e503784f25?s=128&d=identicon&r=PG", "display_name": "jII", "link": "https://stackoverflow.com/users/1405543/jii"}, "edited": false, "score": 0, "creation_date": 1589868220, "post_id": 59548069, "comment_id": 109455500, "body": "There are many scenarios where a solution like this will fail.  For example, packages may be registered in Anaconda cloud that do no exist in PyPI.  Anaconda is also able to pin C dependencies and use correct versions for building certain libraries from source (a notable example is trying to build old versions of Pandas via pip)."}, {"owner": {"reputation": 6232, "user_id": 509977, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/DxOt0.jpg?s=128&g=1", "display_name": "Pitto", "link": "https://stackoverflow.com/users/509977/pitto"}, "reply_to_user": {"reputation": 927, "user_id": 1405543, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/530b04bd8f2e6e622bd841e503784f25?s=128&d=identicon&r=PG", "display_name": "jII", "link": "https://stackoverflow.com/users/1405543/jii"}, "edited": false, "score": 0, "creation_date": 1589896504, "post_id": 59548069, "comment_id": 109470576, "body": "Good point, @jII . I wrote my answer based on the question that states &quot;...with a few packages installed that are commonly used.&quot; and it worked well for the op."}], "tags": [], "owner": {"reputation": 6232, "user_id": 509977, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/DxOt0.jpg?s=128&g=1", "display_name": "Pitto", "link": "https://stackoverflow.com/users/509977/pitto"}, "is_accepted": true, "score": 0, "last_activity_date": 1577822635, "creation_date": 1577822635, "answer_id": 59548069, "question_id": 59547952, "link": "https://stackoverflow.com/questions/59547952/create-anaconda-environment-from-vanilla-python-without-installing-anaconda/59548069#59548069", "title": "Create Anaconda Environment from Vanilla Python Without Installing Anaconda", "body": "<p>My suggestion is to normally use Anaconda and, once your env is fully set prepare a requirements.txt with the following command:</p>\n\n<pre><code>conda list -e &gt; requirements.txt\n</code></pre>\n\n<p>This file can then be used with pip in a normal venv to install every requirement again:</p>\n\n<pre><code>pip install -r requirements.txt\n</code></pre>\n\n<p>If you really don't want to install Anaconda you can also use its minified version, miniconda.</p>\n"}], "owner": {"reputation": 1568, "user_id": 1886237, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/waHap.jpg?s=128&g=1", "display_name": "Michael Szczepaniak", "link": "https://stackoverflow.com/users/1886237/michael-szczepaniak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 225, "favorite_count": 0, "accepted_answer_id": 59548069, "answer_count": 1, "score": 0, "last_activity_date": 1577822635, "creation_date": 1577821522, "question_id": 59547952, "link": "https://stackoverflow.com/questions/59547952/create-anaconda-environment-from-vanilla-python-without-installing-anaconda", "title": "Create Anaconda Environment from Vanilla Python Without Installing Anaconda", "body": "<p>I'm currently running vanilla python 3.7.3 with a few packages installed that are commonly used.  Our group manages our projects by creating a new environment with <strong>virtualenv</strong> (<code>virtualenv name_of_env</code>), building out a project and then exporting that environment to a requirements file which is shared with anyone in our group.  The requirements files are then used to build <strong>ipykernels</strong> which are used in jupyter notebooks or building flask or dash apps.</p>\n\n<p>I'm currently taking a class that wants us to use Anaconda and would like to create a virtualenv with the Anaconda base install packages.  Is there anything like an \"Anaconda requirements\" file available that would allow me to install all the packages that the Anaconda base install uses without actually installing Anaconda?</p>\n\n<p>As implied earlier, my ultimate goal is to create a virtual environment which I can use to build an ipykernel which can then be used for my class assignments without having to install Anaconda.  I am aware that I can have multiple flavors or versions of python installed, but really don't want to do this unless it's necessary.</p>\n"}, {"tags": ["python", "python-3.x", "rdp"], "comments": [{"owner": {"reputation": 7691, "user_id": 152016, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/61e75a9dfee755b5a3d1104d4d3c104a?s=128&d=identicon&r=PG", "display_name": "Niloct", "link": "https://stackoverflow.com/users/152016/niloct"}, "edited": false, "score": 1, "creation_date": 1577821313, "post_id": 59547909, "comment_id": 105264867, "body": "Did you google <code>rdp python</code> ? This may be useful: <a href=\"https://pypi.org/project/rdpy/\" rel=\"nofollow noreferrer\">pypi.org/project/rdpy</a>"}, {"owner": {"reputation": 1335, "user_id": 1037613, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f3YUq.png?s=128&g=1", "display_name": "Oded BD", "link": "https://stackoverflow.com/users/1037613/oded-bd"}, "edited": false, "score": 1, "creation_date": 1577821512, "post_id": 59547909, "comment_id": 105267928, "body": "You can try with RDP but I would check WMI (Windows Management Instrumentation) first. You can see in this example this is easy to use: <a href=\"https://coreygoldberg.blogspot.com/2008/12/python-monitor-windows-remotely-with.html\" rel=\"nofollow noreferrer\">coreygoldberg.blogspot.com/2008/12/&hellip;</a>"}, {"owner": {"reputation": 75, "user_id": 11841990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e59f1bba04276ba3bd0c7a51defe3456?s=128&d=identicon&r=PG&f=1", "display_name": "coder_3476", "link": "https://stackoverflow.com/users/11841990/coder-3476"}, "reply_to_user": {"reputation": 1335, "user_id": 1037613, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f3YUq.png?s=128&g=1", "display_name": "Oded BD", "link": "https://stackoverflow.com/users/1037613/oded-bd"}, "edited": false, "score": 0, "creation_date": 1578173070, "post_id": 59547909, "comment_id": 105354918, "body": "@Oded BD This is great. Thank you. I will try it out."}, {"owner": {"reputation": 1335, "user_id": 1037613, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f3YUq.png?s=128&g=1", "display_name": "Oded BD", "link": "https://stackoverflow.com/users/1037613/oded-bd"}, "edited": false, "score": 0, "creation_date": 1578173843, "post_id": 59547909, "comment_id": 105355097, "body": "@coder_3476 let me know if it works for you, so I will post it as answer as well"}], "owner": {"reputation": 75, "user_id": 11841990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e59f1bba04276ba3bd0c7a51defe3456?s=128&d=identicon&r=PG&f=1", "display_name": "coder_3476", "link": "https://stackoverflow.com/users/11841990/coder-3476"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 232, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1577821512, "creation_date": 1577821170, "question_id": 59547909, "link": "https://stackoverflow.com/questions/59547909/how-to-rdp-using-python", "title": "How to RDP using python?", "body": "<p>I would like to run a python script from a local machine (win10 pc) to connect to one or multiple windows server 2016 machines, and get information such as disk space, CPU and memory usage, etc. Have been reading forums and but didn't quite get the right moodule to use. Does anyone have a similar program written or if anyone can help me with the base code using the right module to RDP to a windows server, I would really be grateful.</p>\n\n<p>TIA!</p>\n"}, {"tags": ["python", "c", "python-c-api"], "comments": [{"owner": {"reputation": 39425, "user_id": 812183, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/9639bd6ee5dfd07ff05fb848e67e9657?s=128&d=identicon&r=PG", "display_name": "Anthony Sottile", "link": "https://stackoverflow.com/users/812183/anthony-sottile"}, "edited": false, "score": 2, "creation_date": 1577827327, "post_id": 59547905, "comment_id": 105266072, "body": "not sure about the debugging tools on windows, but the bug in this case is you&#39;re looking up the Nth argument instead of the Nth element of the only argument"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1577873209, "post_id": 59547905, "comment_id": 105271762, "body": "The problem is <b>you</b>. You must check <b>each and every single return value</b> of <b>every C API function</b> and if they return a failure code, <b>your function must exit with <code>return NULL;</code> which will cause an exception be thrown in the Python side, with the error message as the description</b>."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1577873364, "post_id": 59547905, "comment_id": 105271794, "body": "And that every really means every, including <code>PyNumber_Multiply</code>, <code>PyTuple_GetItem</code>, <code>Py_BuildValue</code> and <code>PyTuple_New</code>. The <code>PyTuple_SET_ITEM</code> can&#39;t fail, but you can write out of bounds."}], "answers": [{"tags": [], "owner": {"reputation": 1774, "user_id": 1201456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b33a546c937f65ce7ef0f29ca0f6a84d?s=128&d=identicon&r=PG", "display_name": "nickelpro", "link": "https://stackoverflow.com/users/1201456/nickelpro"}, "is_accepted": false, "score": -1, "last_activity_date": 1577829729, "creation_date": 1577829729, "answer_id": 59548730, "question_id": 59547905, "link": "https://stackoverflow.com/questions/59547905/python-c-api-failing-silently/59548730#59548730", "title": "Python C Api failing silently", "body": "<p>The problem is this loop:</p>\n\n<pre><code>for (int c = 0; c &lt; 16; c++) {\n    PyObject *newValue = PyNumber_Multiply(PyTuple_GetItem(args, c), Py_BuildValue(\"%u\", (int)2));\n    PyTuple_SET_ITEM(ret, c, newValue);\n}\n</code></pre>\n\n<p>By calling <code>PyTuple_GetItem(args, c)</code> you're taking the <code>c</code>'th argument provided to your function, but you only provide a single argument. The tuple containing the floats. You probably meant to do something like this:</p>\n\n<pre><code>PyObject *input = PyTuple_GetItem(args, 0); \nfor (int c = 0; c &lt; 16; c++) {\n    PyObject *newValue = PyNumber_Multiply(PyTuple_GetItem(input, c), Py_BuildValue(\"%u\", (int)2));\n    PyTuple_SET_ITEM(ret, c, newValue);\n}\n</code></pre>\n"}], "owner": {"reputation": 306, "user_id": 6166724, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/265de70a8d7be78a0ff0fd7d0b9d6a2c?s=128&d=identicon&r=PG&f=1", "display_name": "XCode", "link": "https://stackoverflow.com/users/6166724/xcode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1577829729, "creation_date": 1577821166, "last_edit_date": 1577826721, "question_id": 59547905, "link": "https://stackoverflow.com/questions/59547905/python-c-api-failing-silently", "title": "Python C Api failing silently", "body": "<p>I'm trying to make a Python interface for my C-application, but when I run it the shell just resets and no error is printed. Here is my code:</p>\n\n<pre><code>#include &lt;Python.h&gt;\n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdbool.h&gt;\n\nstatic PyObject *method_doubletuple(self, args)\n    PyObject *self;\n    PyObject *args;\n{\n    PyObject *ret = PyTuple_New(16);\n    for (int c = 0; c &lt; 16; c++) {\n        PyObject *newValue = PyNumber_Multiply(PyTuple_GetItem(args, c), Py_BuildValue(\"%u\", (int)2));\n        PyTuple_SET_ITEM(ret, c, newValue);\n    }\n    return ret;\n}\n\nstatic PyMethodDef PyTestMethods[] = {\n    {\"system\", method_doubletuple, METH_VARARGS, \"Doubles the value of a tuple with 16 elements\"},\n    {NULL, NULL, 0, NULL}\n};\n\nstatic struct PyModuleDef pytestmodule = {\n    PyModuleDef_HEAD_INIT,\n    \"pytest\",\n    \"pytest\",\n    -1,\n    PyTestMethods\n};\n\nPyMODINIT_FUNC PyInit_pytest(void) {\n    return PyModule_Create(&amp;pytestmodule);\n}\n</code></pre>\n\n<pre><code>C:\\Users\\jotje\\Desktop\\Chess\\SampleCModule&gt;python setup.py install\nrunning install\nrunning build\nrunning build_ext\nbuilding 'pytest' extension\nC:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\VC\\Tools\\MSVC\\14.16.27023\\bin\\HostX86\\x64\\cl.exe /c /nologo /Ox /W3 /GL /DNDEBUG /MD -IC:\\Users\\jotje\\AppData\\Local\\Programs\\Python\\Python36\\include -IC:\\Users\\jotje\\AppData\\Local\\Programs\\Python\\Python36\\include \"-IC:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\VC\\Tools\\MSVC\\14.16.27023\\include\" \"-IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.16299.0\\ucrt\" \"-IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.16299.0\\shared\" \"-IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.16299.0\\um\" \"-IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.16299.0\\winrt\" \"-IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.16299.0\\cppwinrt\" /Tcaddarray.c /Fobuild\\temp.win-amd64-3.6\\Release\\addarray.obj\naddarray.c\naddarray.c(20): warning C4113: 'PyObject *(__cdecl *)()' differs in parameter lists from 'PyCFunction'\nC:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\VC\\Tools\\MSVC\\14.16.27023\\bin\\HostX86\\x64\\link.exe /nologo /INCREMENTAL:NO /LTCG /DLL /MANIFEST:EMBED,ID=2 /MANIFESTUAC:NO /LIBPATH:C:\\Users\\jotje\\AppData\\Local\\Programs\\Python\\Python36\\libs /LIBPATH:C:\\Users\\jotje\\AppData\\Local\\Programs\\Python\\Python36\\PCbuild\\amd64 \"/LIBPATH:C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\VC\\Tools\\MSVC\\14.16.27023\\lib\\x64\" \"/LIBPATH:C:\\Program Files (x86)\\Windows Kits\\10\\lib\\10.0.16299.0\\ucrt\\x64\" \"/LIBPATH:C:\\Program Files (x86)\\Windows Kits\\10\\lib\\10.0.16299.0\\um\\x64\" /EXPORT:PyInit_pytest build\\temp.win-amd64-3.6\\Release\\addarray.obj /OUT:build\\lib.win-amd64-3.6\\pytest.cp36-win_amd64.pyd /IMPLIB:build\\temp.win-amd64-3.6\\Release\\pytest.cp36-win_amd64.lib\n   Creating library build\\temp.win-amd64-3.6\\Release\\pytest.cp36-win_amd64.lib and object build\\temp.win-amd64-3.6\\Release\\pytest.cp36-win_amd64.exp\nGenerating code\nFinished generating code\nrunning install_lib\ncopying build\\lib.win-amd64-3.6\\pytest.cp36-win_amd64.pyd -&gt; C:\\Users\\jotje\\AppData\\Local\\Programs\\Python\\Python36\\Lib\\site-packages\nrunning install_egg_info\nRemoving C:\\Users\\jotje\\AppData\\Local\\Programs\\Python\\Python36\\Lib\\site-packages\\pytest-1.0.0-py3.6.egg-info\nWriting C:\\Users\\jotje\\AppData\\Local\\Programs\\Python\\Python36\\Lib\\site-packages\\pytest-1.0.0-py3.6.egg-info\n\nC:\\Users\\jotje\\Desktop\\Chess\\SampleCModule&gt;python\nPython 3.6.6 (v3.6.6:4cf1f54eb7, Jun 27 2018, 03:37:03) [MSC v.1900 64 bit (AMD64)] on win32\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; import pytest\n&gt;&gt;&gt; pytest.doubletuple((4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4))\n\nC:\\Users\\jotje\\Desktop\\Chess\\SampleCModule&gt;\n</code></pre>\n\n<p>If anyone knows how to get an error message or logs or something which would point out the problem, and maybe tell me what I'm doing wrong that would be great.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1577821365, "post_id": 59547897, "comment_id": 105264878, "body": "<code>chain.from_iterable</code> flattens it into 1 dimension, so you can&#39;t get the original indexes."}, {"owner": {"reputation": 161, "user_id": 10038165, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-EP0T--rFTL0/AAAAAAAAAAI/AAAAAAAAAIU/fi7JaGDZs1g/photo.jpg?sz=128", "display_name": "Jaime M", "link": "https://stackoverflow.com/users/10038165/jaime-m"}, "edited": false, "score": 0, "creation_date": 1577821391, "post_id": 59547897, "comment_id": 105264885, "body": "Side comment: it doesn&#39;t look like you&#39;ve set up a class, so you shouldn&#39;t be using the <code>self</code> parameter"}], "answers": [{"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 2, "last_activity_date": 1577821758, "creation_date": 1577821758, "answer_id": 59547976, "question_id": 59547897, "link": "https://stackoverflow.com/questions/59547897/python-searching-2d-arrays-and-returning-if-found-and-index-found-at/59547976#59547976", "title": "Python searching 2d arrays and returning if found and index found at", "body": "<p>Don't flatten the 2d list. Use nested loops with <code>enumerate()</code> so you can get the indexes.</p>\n\n<pre><code>def find_in_2d(lists, value):\n    for i, l in enumerate(lists):\n        for j, item in enumerate(l):\n            if item == value:\n                return i, j\n    return None, None\n\ni, j = find_in_2d(assets, element.get(\"asset\")\nif i is not None:\n    print(\"found updating\")\n    asset[i][j] = new_value\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 12616348, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mB-HvxZIoyw-W4nKW9RPEmVZRk0bth1fOT8tVbmsQ=k-s128", "display_name": "Super Sonic", "link": "https://stackoverflow.com/users/12616348/super-sonic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 59547976, "answer_count": 1, "score": 0, "last_activity_date": 1577821758, "creation_date": 1577821045, "question_id": 59547897, "link": "https://stackoverflow.com/questions/59547897/python-searching-2d-arrays-and-returning-if-found-and-index-found-at", "title": "Python searching 2d arrays and returning if found and index found at", "body": "<p>I have a 2d array which may or may not contain data. First I want to search for the index that contains specific data and if true then update the data in the array.</p>\n\n<p>So far I have managed to search the array and return a true or false statement if the index is found. But I also need to return the index value so I can then modify and update the data in the array.</p>\n\n<pre><code>from itertools import chain\nself.asset= [[]]\n\ndef findIn2dArray(self, arr, value):\n    return value in chain.from_iterable(arr)\n\nif self.findIn2dArray(self.asset, element.get(\"asset\")):\n     print(\"found updating\")\n     self.asset[???, 1] = new updated value\n</code></pre>\n\n<p>I know which columns I will need to change but I don't know the index location of the data, hope that makes sense. It would be good if the findIn2dArray function would also return the index number, thanks!</p>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 17762, "user_id": 548562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26587173d9156d8ec3114c8700d1b693?s=128&d=identicon&r=PG", "display_name": "Iain Shelvington", "link": "https://stackoverflow.com/users/548562/iain-shelvington"}, "edited": false, "score": 2, "creation_date": 1577822481, "post_id": 59547885, "comment_id": 105265087, "body": "Should the active method also filter by featured being true?"}, {"owner": {"reputation": 394, "user_id": 3112746, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5212X.jpg?s=128&g=1", "display_name": "ben jay hutton", "link": "https://stackoverflow.com/users/3112746/ben-jay-hutton"}, "reply_to_user": {"reputation": 17762, "user_id": 548562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26587173d9156d8ec3114c8700d1b693?s=128&d=identicon&r=PG", "display_name": "Iain Shelvington", "link": "https://stackoverflow.com/users/548562/iain-shelvington"}, "edited": false, "score": 0, "creation_date": 1577822893, "post_id": 59547885, "comment_id": 105265185, "body": "not all products will be featured, I tried adding Active=True and Featured=True. Sadly no joy"}, {"owner": {"reputation": 17762, "user_id": 548562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26587173d9156d8ec3114c8700d1b693?s=128&d=identicon&r=PG", "display_name": "Iain Shelvington", "link": "https://stackoverflow.com/users/548562/iain-shelvington"}, "edited": false, "score": 1, "creation_date": 1577823081, "post_id": 59547885, "comment_id": 105265222, "body": "No, I mean in <code>ProductQuerySet.active</code> you filter by both active and featured being true. You probably didn&#39;t mean this?"}, {"owner": {"reputation": 394, "user_id": 3112746, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5212X.jpg?s=128&g=1", "display_name": "ben jay hutton", "link": "https://stackoverflow.com/users/3112746/ben-jay-hutton"}, "reply_to_user": {"reputation": 17762, "user_id": 548562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26587173d9156d8ec3114c8700d1b693?s=128&d=identicon&r=PG", "display_name": "Iain Shelvington", "link": "https://stackoverflow.com/users/548562/iain-shelvington"}, "edited": false, "score": 0, "creation_date": 1577823220, "post_id": 59547885, "comment_id": 105265244, "body": "sorry my bad, I have removed it :)"}, {"owner": {"reputation": 394, "user_id": 3112746, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5212X.jpg?s=128&g=1", "display_name": "ben jay hutton", "link": "https://stackoverflow.com/users/3112746/ben-jay-hutton"}, "reply_to_user": {"reputation": 17762, "user_id": 548562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26587173d9156d8ec3114c8700d1b693?s=128&d=identicon&r=PG", "display_name": "Iain Shelvington", "link": "https://stackoverflow.com/users/548562/iain-shelvington"}, "edited": false, "score": 0, "creation_date": 1577823355, "post_id": 59547885, "comment_id": 105265279, "body": "it has worked, now when i run, get_queryset().active().search(query). I get a result"}, {"owner": {"reputation": 394, "user_id": 3112746, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5212X.jpg?s=128&g=1", "display_name": "ben jay hutton", "link": "https://stackoverflow.com/users/3112746/ben-jay-hutton"}, "reply_to_user": {"reputation": 17762, "user_id": 548562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26587173d9156d8ec3114c8700d1b693?s=128&d=identicon&r=PG", "display_name": "Iain Shelvington", "link": "https://stackoverflow.com/users/548562/iain-shelvington"}, "edited": false, "score": 0, "creation_date": 1577823401, "post_id": 59547885, "comment_id": 105265292, "body": "please put it as an answer so you can get some reputation for it. ^_^"}], "answers": [{"tags": [], "owner": {"reputation": 17762, "user_id": 548562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26587173d9156d8ec3114c8700d1b693?s=128&d=identicon&r=PG", "display_name": "Iain Shelvington", "link": "https://stackoverflow.com/users/548562/iain-shelvington"}, "is_accepted": true, "score": 1, "last_activity_date": 1577827681, "creation_date": 1577827681, "answer_id": 59548570, "question_id": 59547885, "link": "https://stackoverflow.com/questions/59547885/django-searching-with-custom-queryset-erroneously-returning-empty-object/59548570#59548570", "title": "Django, searching with custom QuerySet, erroneously returning empty object", "body": "<p>The active method should only filter by active being true and not on features being true</p>\n\n<pre><code>class ProductQuerySet(models.query.QuerySet):\n    def active(self):\n        return self.filter(active=True)\n</code></pre>\n"}], "owner": {"reputation": 394, "user_id": 3112746, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5212X.jpg?s=128&g=1", "display_name": "ben jay hutton", "link": "https://stackoverflow.com/users/3112746/ben-jay-hutton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 59548570, "answer_count": 1, "score": 0, "last_activity_date": 1577827681, "creation_date": 1577820948, "question_id": 59547885, "link": "https://stackoverflow.com/questions/59547885/django-searching-with-custom-queryset-erroneously-returning-empty-object", "title": "Django, searching with custom QuerySet, erroneously returning empty object", "body": "<p>forgive me if this has been answered before, I have searched Stackover flow and I haven't seen any questions/answers that my problem<br />\nIf you know one that matches please point me there</p>\n\n<p>I have a Django project set up (version 1.11)<br/>\nAlong with Python 3.5.3<br/><br/>\nI have an app called Product and I wish to search its database<br/>\nits model.py looks like this:</p>\n\n<pre><code>import random\nimport os\nfrom django.db import models\nfrom django.db.models import Q\nfrom django.db.models.signals import pre_save\nfrom django.core.urlresolvers import reverse\n\nfrom .utils import unique_slug_generator\n\n\ndef get_filename_ext(filepath):\n    base_name = os.path.basename(filepath)\n    name, ext = os.path.splitext(base_name)\n    return name, ext\n\ndef upload_image_path(instance, filename):\n    new_filename = random.randint(1, 1000000)\n    name, ext = get_filename_ext(filename)\n    final_filename = '{new_filename}{ext}'.format(new_filename=new_filename, ext=ext)\n    return \"products/{new_filename}/{final_filename}\".format(\n            new_filename=new_filename,\n            final_filename=final_filename\n            )\n\n\nclass ProductQuerySet(models.query.QuerySet):\n    def active(self):\n        return self.filter(featured=True, active=True)\n\n    def featured(self):\n        return self.filter(featured=True)\n\n    def search(self, query):\n        lookups = (Q(title__icontains=query) |\n                   Q(description__icontains=query)|\n                   Q(price__icontains=query))\n        result = self.filter(lookups).distinct()\n        print(result)\n        return self.filter(lookups).distinct()\n\n\nclass ProductManager(models.Manager):\n    def get_queryset(self):\n        return ProductQuerySet(self.model, using=self._db)\n\n    def all(self):\n        return self.get_queryset()\n\n    def featured(self):\n        return self.get_queryset().featured()\n\n    def get_by_id(self, id):\n        qs = self.get_queryset().filter(id=id) # Product.object\n        if qs.count() ==1:\n            return qs.first()\n        return None\n\n    def search(self, query):\n        return self.get_queryset().active().search(query)\n\n\n\nclass Product(models.Model):\n    title           = models.CharField(max_length=120)\n    slug            = models.SlugField(blank=True, unique=True)\n    description     = models.TextField()\n    price           = models.DecimalField(decimal_places=2, max_digits=10, default=39.99)\n    image           = models.ImageField(upload_to='products/', null=True, blank=True)\n    featured        = models.BooleanField(default=False)\n    active          = models.BooleanField(default=True)\n    timestamp       = models.DateTimeField(auto_now_add=True)\n\n    objects = ProductManager()\n\n    def get_absolute_url(self):\n        return reverse(\"products:detail\", kwargs={\"slug\": self.slug})\n\n    def __str__(self):\n        return  self.title\n\n\ndef product_pre_save_receiver(sender, instance, *args, **kwargs):\n    if not instance.slug:\n        instance.slug = unique_slug_generator(instance)\n\npre_save.connect(product_pre_save_receiver, sender=Product)\n</code></pre>\n\n<p>I have a search app which facilitates this search.<br/>\nits view.py looks like this:</p>\n\n<pre><code>from django.db.models import Q\nfrom django.shortcuts import render\nfrom django.views.generic import ListView\nfrom products.models import Product\n\nclass SearchProductView(ListView):\n    template_name=\"search/view.html\"\n\n    def get_context_data(self, *args, **kwargs):\n        context = super(SearchProductView, self).get_context_data(*args, **kwargs)\n        query = self.request.GET.get('q')\n        context['query'] = query\n        # SearchQuery.objects.create(query=query)\n        return context\n\n    def get_queryset(self, *args, **kwargs):\n        request = self.request\n        method_dict = request.GET\n        query = method_dict.get('q', None) # method_dict['q']\n        if query is not None:\n             return Product.objects.search(query)\n        return Product.objects.featured()\n</code></pre>\n\n<p>the situation is that in when I pass the value \"Hat\" to - def get_queryset() in Views.py\nI receive an empty object. I know there is an entry in the data base called \"hat\"</p>\n\n<p>it is only when I move the following code from ProductQuerySet:</p>\n\n<pre><code>lookups = (Q(title__icontains=query) |\n                   Q(description__icontains=query)|\n                   Q(price__icontains=query))\n        result = self.filter(lookups).distinct()\n</code></pre>\n\n<p>to replace </p>\n\n<pre><code>return Product.objects.search(query)\n</code></pre>\n\n<p>that i get a result.</p>\n\n<p>Any ideas as to why the code at the top is returning an empty object?</p>\n"}, {"tags": ["python", "cplex", "pyomo"], "answers": [{"tags": [], "owner": {"reputation": 5225, "user_id": 11260716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7a6570e104d267276655b7ca07e08a8?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Junglas", "link": "https://stackoverflow.com/users/11260716/daniel-junglas"}, "is_accepted": false, "score": 2, "last_activity_date": 1578292355, "creation_date": 1578292355, "answer_id": 59607635, "question_id": 59547875, "link": "https://stackoverflow.com/questions/59547875/what-is-the-default-location-for-saved-cplex-solutions/59607635#59607635", "title": "What is the default location for saved cplex solutions", "body": "<p>I don't know how exactly pyomo invokes CPLEX to store solutions on disk. The default behavior of CPLEX is to store solutions in the current working directory. The solution file will have a suffix of either <code>.sol</code> or <code>.mst</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 5699, "user_id": 3725596, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AOIAu.jpg?s=128&g=1", "display_name": "Alex Fleischer", "link": "https://stackoverflow.com/users/3725596/alex-fleischer"}, "is_accepted": false, "score": 0, "last_activity_date": 1578305724, "creation_date": 1578305724, "answer_id": 59610240, "question_id": 59547875, "link": "https://stackoverflow.com/questions/59547875/what-is-the-default-location-for-saved-cplex-solutions/59610240#59610240", "title": "What is the default location for saved cplex solutions", "body": "<p>by default pyomo generates a json file results.json in the directory where you call pyomo.</p>\n\n<p>Let me take the <a href=\"https://medium.com/@alexfleischer_84755/optimization-simply-do-more-with-less-zoo-buses-and-kids-66940178db6\" rel=\"nofollow noreferrer\">bus example</a> in pyomo:</p>\n\n<p>In the file pyomobus.py</p>\n\n<pre><code>from pyomo.environ import *\n\nmodel = ConcreteModel()\n\nmodel.nbBus = Var([40,30], domain=PositiveIntegers)\n\nmodel.OBJ = Objective(expr = 600*model.nbBus[40] + 480*model.nbBus[30])\n\nmodel.nbKids = Constraint(expr = 40*model.nbBus[40] + 30*model.nbBus[30] &gt;= 300)\n</code></pre>\n\n<p>then in that directory if you type</p>\n\n<pre><code>pyomo solve pyomobus.py  --solver=cplex\n</code></pre>\n\n<p>you will get a file results.json in that directory where you will read</p>\n\n<pre><code>\"Problem\": {},\n            \"Status\": \"optimal\",\n            \"Variable\": {\n                \"nbBus[30]\": {\n                    \"Value\": 2.0\n                },\n                \"nbBus[40]\": {\n                    \"Value\": 6.0\n                }\n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 10549044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3955a3599a8f04b38d9cf32bc2d157df?s=128&d=identicon&r=PG&f=1", "display_name": "ma7555", "link": "https://stackoverflow.com/users/10549044/ma7555"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1578305724, "creation_date": 1577820869, "question_id": 59547875, "link": "https://stackoverflow.com/questions/59547875/what-is-the-default-location-for-saved-cplex-solutions", "title": "What is the default location for saved cplex solutions", "body": "<p>Running cplex/pyomo the solver found a solution and it reported saved somewhere though I closed before taking note, can't find over the web where is it stored.</p>\n\n<p>running windows, anyone?</p>\n"}, {"tags": ["python", "python-3.x", "list", "sorting", "lambda"], "comments": [{"owner": {"reputation": 7004, "user_id": 6615163, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hSNqz.png?s=128&g=1", "display_name": "hygull", "link": "https://stackoverflow.com/users/6615163/hygull"}, "edited": false, "score": 2, "creation_date": 1577820939, "post_id": 59547860, "comment_id": 105264791, "body": "But <code>[...[&#39;b&#39;, 4], [&#39;b&#39;, 6]]</code> is not following what you mentioned. It should be <code>[...[&#39;b&#39;, 6], [&#39;b&#39;, 4]]</code>, right?"}, {"owner": {"reputation": 629, "user_id": 6151549, "user_type": "registered", "profile_image": "https://graph.facebook.com/10101078968746712/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6151549/mark"}, "edited": false, "score": 0, "creation_date": 1577820991, "post_id": 59547860, "comment_id": 105264805, "body": "The answer is in the documentation: <a href=\"https://wiki.python.org/moin/HowTo/Sorting\" rel=\"nofollow noreferrer\">wiki.python.org/moin/HowTo/Sorting</a> Hint: probably best to use a lambda function for readability"}, {"owner": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "edited": false, "score": 1, "creation_date": 1577820994, "post_id": 59547860, "comment_id": 105264808, "body": "<code>myList.sort(key=lambda x: (x[0],-x[1]))</code> should do it"}, {"owner": {"reputation": 172, "user_id": 4541715, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MC779.jpg?s=128&g=1", "display_name": "Sreenivas Shenoy", "link": "https://stackoverflow.com/users/4541715/sreenivas-shenoy"}, "reply_to_user": {"reputation": 7004, "user_id": 6615163, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hSNqz.png?s=128&g=1", "display_name": "hygull", "link": "https://stackoverflow.com/users/6615163/hygull"}, "edited": false, "score": 1, "creation_date": 1577821078, "post_id": 59547860, "comment_id": 105264818, "body": "@hygull Thanks for pointing out the mistake. I wanted it to be <code>[...[&#39;b&#39;, 6], [&#39;b&#39;, 4]]</code> Edited"}], "answers": [{"comments": [{"owner": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "edited": false, "score": 1, "creation_date": 1577821094, "post_id": 59547886, "comment_id": 105264821, "body": "The key is a lambda function that returns a tuple of the ordering. First the leftmost element is compared; if they&#39;re equal, the second, and so on. <code>-</code> makes the sort descending instead of ascending for a particular &quot;column&quot; of numbers."}], "tags": [], "owner": {"reputation": 1183, "user_id": 1107013, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/97ea15ef4a88c0cc807cf33f65d40df0?s=128&d=identicon&r=PG", "display_name": "Gavin Haynes", "link": "https://stackoverflow.com/users/1107013/gavin-haynes"}, "is_accepted": true, "score": 2, "last_activity_date": 1577820949, "creation_date": 1577820949, "answer_id": 59547886, "question_id": 59547860, "link": "https://stackoverflow.com/questions/59547860/sorting-key-in-python3/59547886#59547886", "title": "Sorting Key in Python3", "body": "<p>Use a tuple as a key:</p>\n\n<pre><code>myList.sort(key=lambda x:(x[0], -x[1]))\n\n# myList = [['a', 5], ['a', 1], ['b', 6], ['b', 4]]\n</code></pre>\n"}], "owner": {"reputation": 172, "user_id": 4541715, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MC779.jpg?s=128&g=1", "display_name": "Sreenivas Shenoy", "link": "https://stackoverflow.com/users/4541715/sreenivas-shenoy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "closed_date": 1577821260, "accepted_answer_id": 59547886, "answer_count": 1, "score": -3, "last_activity_date": 1577821197, "creation_date": 1577820710, "last_edit_date": 1577821197, "question_id": 59547860, "link": "https://stackoverflow.com/questions/59547860/sorting-key-in-python3", "closed_reason": "Duplicate", "title": "Sorting Key in Python3", "body": "<p>I have a list of lists as <code>myList = [['a',1],['b',4],['a',5], ['b',6]]</code>.I want to sort this list alphabetically with first element as the key which I can do as <code>myList.sort(key=lambda x:x[0])</code> which changes myList to <code>[['a', 1], ['a', 5], ['b', 4], ['b',6]]</code>. But if the first elements of the inner lists are the same, I want to sort it in descending order of the second element of the inner list and get the result as <code>[['a', 5], ['a', 1], ['b', 6], ['b',4]]</code>. What is the cleaner way to do it? I could have done this in Javascript as </p>\n\n<pre class=\"lang-js prettyprint-override\"><code>myList.sort((a,b) =&gt; {\n    if(a[0] == b[0]){\n        return b[1] &gt; a[1]\n    } else {\n        return b[0] &lt; a[0]\n    }\n})\n</code></pre>\n\n<p>How do I achieve this in python?</p>\n"}, {"tags": ["python", "python-3.x", "function"], "comments": [{"owner": {"reputation": 19199, "user_id": 131187, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/27eJi.jpg?s=128&g=1", "display_name": "Bill Bell", "link": "https://stackoverflow.com/users/131187/bill-bell"}, "edited": false, "score": 1, "creation_date": 1577822870, "post_id": 59547856, "comment_id": 105265178, "body": "The subject of calculations involving polynomials with computers has been heavily studied. Unless you are doing this as a school exercise, or something like that, may I suggest  that you use the facilities in a library such as sympy?"}, {"owner": {"reputation": 113, "user_id": 10559735, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DQYUS.jpg?s=128&g=1", "display_name": "Can \u0130lgu", "link": "https://stackoverflow.com/users/10559735/can-%c4%b0lgu"}, "reply_to_user": {"reputation": 19199, "user_id": 131187, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/27eJi.jpg?s=128&g=1", "display_name": "Bill Bell", "link": "https://stackoverflow.com/users/131187/bill-bell"}, "edited": false, "score": 0, "creation_date": 1577826105, "post_id": 59547856, "comment_id": 105265843, "body": "\u0131 know symppy thinks, you can  do some about polynomials.but \u0131 need this way, and also I&#39;ve done a lot of research about sympy but thank you."}], "answers": [{"tags": [], "owner": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "is_accepted": true, "score": 1, "last_activity_date": 1577822495, "last_edit_date": 1577822495, "creation_date": 1577821786, "answer_id": 59547978, "question_id": 59547856, "link": "https://stackoverflow.com/questions/59547856/how-can-i-create-or-change-polynomial-coefficients/59547978#59547978", "title": "How can I create or change polynomial coefficients", "body": "<p>Your code should work, you just need to present the correct input. For </p>\n\n<pre><code>p(x) = 5x^10 + 9x - 7x - 10\n</code></pre>\n\n<p>you should provide:</p>\n\n<pre><code>poly2 = [5, 0, 0, 0, 0, 0, 0, 0, 0, 9-7, 10]\n</code></pre>\n\n<p>Alternate pol - implementation:</p>\n\n<pre><code>def pol(poly, x):\n    n = len(poly) # no need to provide it at call\n\n    rp = poly[::-1]  # [-10, -1, 9, 5] so they correlate with range(n) as power\n\n    print(\"Poly:\",poly, \"for x =\",x) \n    result = 0\n    for i in range(n):\n        val = rp[i] * x**i\n        print(rp[i],' * x^', i, ' = ', val, sep='')  # debug output\n        result += val\n\n    return result\n\nx = 2  # 1 is a bad test candidate - no differences for 1**10 vs 1**2\n\n# 5x^3 + 9x^2 - x - 10 for x = 1\npoly = [5, 9, -1, -10]\nprint(\"Value of polynomial is: \", pol(poly, x))\n\n# p(x) = 5x^10 + 9x - 7x - 10\npoly2 = [5, 0, 0, 0, 0, 0, 0, 0, 0, 9-7, 10]\nprint(\"Value of polynomial is: \", pol(poly2, x))\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Poly: [5, 9, -1, -10] for x = 2\n-10 * x^0 = -10\n-1 * x^1 = -2\n9 * x^2 = 36\n5 * x^3 = 40\nValue of polynomial is:  64\n\nPoly: [5, 0, 0, 0, 0, 0, 0, 0, 0, 2, -10] for x = 2\n-10 * x^0 = -10\n2 * x^1 = 4\n0 * x^2 = 0\n0 * x^3 = 0\n0 * x^4 = 0\n0 * x^5 = 0\n0 * x^6 = 0\n0 * x^7 = 0\n0 * x^8 = 0\n0 * x^9 = 0\n5 * x^10 = 5120\nValue of polynomial is:  5114\n</code></pre>\n"}], "owner": {"reputation": 113, "user_id": 10559735, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DQYUS.jpg?s=128&g=1", "display_name": "Can \u0130lgu", "link": "https://stackoverflow.com/users/10559735/can-%c4%b0lgu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 59547978, "answer_count": 1, "score": -1, "last_activity_date": 1577822495, "creation_date": 1577820662, "last_edit_date": 1577820932, "question_id": 59547856, "link": "https://stackoverflow.com/questions/59547856/how-can-i-create-or-change-polynomial-coefficients", "title": "How can I create or change polynomial coefficients", "body": "<p>I have this code and I want to edit it to do something else:</p>\n\n<pre><code>def pol(poly, n, x):\n    result = poly[0]\n\n    #Using Horner's method\n    for i in range(1, n):\n       result = result * x + poly[i]\n\n    return result\n#Let us evaluate value of\n#ax^3 - bx^2 - x - 10 for x = 1\npoly = [5, 9, -1, -10]\nx = 1\nn = len(poly)\n\nprint(\"Value of polynomial is: \", pol(poly, n, x))\n</code></pre>\n\n<p>I wonder how can I can change the coefficients of the polynomial. And this code just calculates:</p>\n\n<pre><code>x^3 and x^2\n</code></pre>\n\n<p>How can I make this code calculate for example this polynomial:</p>\n\n<pre><code>p(x) = 5x^10 + 9x - 7x - 10\n</code></pre>\n\n<p>or any polynomial in Python?</p>\n"}, {"tags": ["python", "sqlite", "sql-delete"], "comments": [{"owner": {"reputation": 21232, "user_id": 550094, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7CAou.jpg?s=128&g=1", "display_name": "Thierry Lathuille", "link": "https://stackoverflow.com/users/550094/thierry-lathuille"}, "edited": false, "score": 0, "creation_date": 1577820847, "post_id": 59547851, "comment_id": 105264768, "body": "<code>(id_to_remove, )</code> is a tuple containing one item, <code>id_to_remove</code>."}, {"owner": {"reputation": 1719, "user_id": 2619479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/127aeef4e048febca4fd6560b465359d?s=128&d=identicon&r=PG", "display_name": "Marco", "link": "https://stackoverflow.com/users/2619479/marco"}, "edited": false, "score": 1, "creation_date": 1577820873, "post_id": 59547851, "comment_id": 105264776, "body": "That is because execute expects as second parameter an iterable (a list) and if you do not put the comma there  (id_to_remove) just between parentheses will transformed into an int."}, {"owner": {"reputation": 52680, "user_id": 1673391, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d0fdf8fc4fd7daa19b20cd3f76d2a1e0?s=128&d=identicon&r=PG", "display_name": "Grijesh Chauhan", "link": "https://stackoverflow.com/users/1673391/grijesh-chauhan"}, "edited": false, "score": 0, "creation_date": 1577820978, "post_id": 59547851, "comment_id": 105264800, "body": "Check <a href=\"https://wiki.python.org/moin/TupleSyntax\" rel=\"nofollow noreferrer\">One Element Tuples</a>, and/or <a href=\"https://stackoverflow.com/questions/12876177/how-to-create-a-tuple-with-only-one-element\">This</a>"}, {"owner": {"reputation": 23, "user_id": 12633747, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Lv_sGzJexD8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rerXbMClzFUh113CqaNjpWTNCl_nA/photo.jpg?sz=128", "display_name": "Ryan", "link": "https://stackoverflow.com/users/12633747/ryan"}, "edited": false, "score": 0, "creation_date": 1577821132, "post_id": 59547851, "comment_id": 105264831, "body": "Thank you so much, got some reading to do. :0)"}], "answers": [{"tags": [], "owner": {"reputation": 4072, "user_id": 9732470, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a7CB2.jpg?s=128&g=1", "display_name": "marcos", "link": "https://stackoverflow.com/users/9732470/marcos"}, "is_accepted": true, "score": 2, "last_activity_date": 1577820989, "creation_date": 1577820989, "answer_id": 59547890, "question_id": 59547851, "link": "https://stackoverflow.com/questions/59547851/why-is-there-a-comma-after-the-variable-in-this-sqlite-query/59547890#59547890", "title": "Why is there a comma after the variable in this sqlite query?", "body": "<p>Because it will replace all the <code>?</code> values with the ones in the <code>tuple</code>. If you don't put a comma then it is a single value, you need to add it to construct a single value <code>tuple</code>.</p>\n"}], "owner": {"reputation": 23, "user_id": 12633747, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Lv_sGzJexD8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rerXbMClzFUh113CqaNjpWTNCl_nA/photo.jpg?sz=128", "display_name": "Ryan", "link": "https://stackoverflow.com/users/12633747/ryan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "closed_date": 1577821843, "accepted_answer_id": 59547890, "answer_count": 1, "score": 2, "last_activity_date": 1577820989, "creation_date": 1577820615, "last_edit_date": 1577820671, "question_id": 59547851, "link": "https://stackoverflow.com/questions/59547851/why-is-there-a-comma-after-the-variable-in-this-sqlite-query", "closed_reason": "Duplicate", "title": "Why is there a comma after the variable in this sqlite query?", "body": "<p>I have the following code and it works, but I need to understand why there is a comma after the variable id_to_remove, can someone explain to me why that has to be there? (I bolded the part I don't understand)</p>\n\n<pre><code>def delete_user(id_to_remove):\n    sql = \"DELETE FROM USERS WHERE ID = ?\"\n    conn = create_connection()\n    cursor = conn.cursor()\n    **cursor.execute(sql, (id_to_remove, ))**\n    conn.commit()\n    conn.close()\n</code></pre>\n\n<p>So I don't know why its id_to_remove,  and not just cursor.execute(sql,(id_to_remove))</p>\n"}, {"tags": ["python", "tensorflow"], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 8618307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10677ffc800a94661866239c511eb314?s=128&d=identicon&r=PG&f=1", "display_name": "ozoubia", "link": "https://stackoverflow.com/users/8618307/ozoubia"}, "edited": false, "score": 0, "creation_date": 1577874834, "post_id": 59547870, "comment_id": 105272104, "body": "thank you for your reply, I&#39;m not sure how to this it inside the tensorflow&#39;s session, do you have any code or guidance to help me with."}, {"owner": {"reputation": 475, "user_id": 3068214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44c9a6b83588d65aa864c71acb46edc0?s=128&d=identicon&r=PG&f=1", "display_name": "velociraptor11", "link": "https://stackoverflow.com/users/3068214/velociraptor11"}, "reply_to_user": {"reputation": 15, "user_id": 8618307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10677ffc800a94661866239c511eb314?s=128&d=identicon&r=PG&f=1", "display_name": "ozoubia", "link": "https://stackoverflow.com/users/8618307/ozoubia"}, "edited": false, "score": 0, "creation_date": 1577892714, "post_id": 59547870, "comment_id": 105275933, "body": "Please take a look at this tutorial, it has everything exactly as you need link: <a href=\"https://github.com/tensorflow/docs/blob/master/site/en/tutorials/load_data/images.ipynb\" rel=\"nofollow noreferrer\">github.com/tensorflow/docs/blob/master/site/en/tutorials/&hellip;</a> , once you have the image_batch and label_batch you can just substitute it to your relative batch_x and batch_y"}, {"owner": {"reputation": 15, "user_id": 8618307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10677ffc800a94661866239c511eb314?s=128&d=identicon&r=PG&f=1", "display_name": "ozoubia", "link": "https://stackoverflow.com/users/8618307/ozoubia"}, "edited": false, "score": 0, "creation_date": 1577979574, "post_id": 59547870, "comment_id": 105299935, "body": "thnx i&#39;ll go with that answer"}], "tags": [], "owner": {"reputation": 475, "user_id": 3068214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44c9a6b83588d65aa864c71acb46edc0?s=128&d=identicon&r=PG&f=1", "display_name": "velociraptor11", "link": "https://stackoverflow.com/users/3068214/velociraptor11"}, "is_accepted": true, "score": 1, "last_activity_date": 1577821160, "last_edit_date": 1577821160, "creation_date": 1577820804, "answer_id": 59547870, "question_id": 59547836, "link": "https://stackoverflow.com/questions/59547836/best-method-to-load-a-large-dataset-in-cnn-using-tensoflow/59547870#59547870", "title": "Best method to load a large dataset in CNN using tensoflow", "body": "<p>Loading thousands of images into memory is not the right way to do it. </p>\n\n<p>Hence, that's why Tensorflow has built-in APIs for loading the proper data. You can find more information for loading images here: <a href=\"https://www.tensorflow.org/tutorials/load_data/images#load_using_tfdata\" rel=\"nofollow noreferrer\">https://www.tensorflow.org/tutorials/load_data/images#load_using_tfdata</a> </p>\n\n<p>Example taken from the link:</p>\n\n<ol>\n<li>Loading the training data generator, which returns an Iterator</li>\n</ol>\n\n<pre class=\"lang-py prettyprint-override\"><code>train_data_gen = image_generator.flow_from_directory(directory=str(data_dir),\n                                                     batch_size=BATCH_SIZE,\n                                                     shuffle=True,\n                                                     target_size=(IMG_HEIGHT, IMG_WIDTH),\n                                                     classes = list(CLASS_NAMES))\n</code></pre>\n\n<ol start=\"2\">\n<li>Get training batch</li>\n</ol>\n\n<pre class=\"lang-py prettyprint-override\"><code>image_batch, label_batch = next(train_data_gen)\n</code></pre>\n\n<p>Using this idea, you can make changes to your own code </p>\n"}], "owner": {"reputation": 15, "user_id": 8618307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10677ffc800a94661866239c511eb314?s=128&d=identicon&r=PG&f=1", "display_name": "ozoubia", "link": "https://stackoverflow.com/users/8618307/ozoubia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 59547870, "answer_count": 1, "score": 0, "last_activity_date": 1577831905, "creation_date": 1577820486, "last_edit_date": 1577831905, "question_id": 59547836, "link": "https://stackoverflow.com/questions/59547836/best-method-to-load-a-large-dataset-in-cnn-using-tensoflow", "title": "Best method to load a large dataset in CNN using tensoflow", "body": "<p>Good evening,\nI'm working on a Cat-Dog classification in CNN using tensorflow 1.4 and i want to know what is the best method to load the data into the CNN without having insufficient memory problems, knowing that the dataset is of size (8000 image for training, and 2000 image for testing). <br /> I have tried loading the data by reading it in opencv and converting it into numpy array and using that numpy array for training and testing but this method seems to have memory problems (the code can be seen below). I have also tried reducing the batch size but it doesn't seem to work, is there a way of loading the data from disc? so could you please guide me into a clear solution with an implementation or a code.\nHere is the code that I used for loading the data:\n<br />\nthis is a the function that labels the data</p>\n\n<pre><code># function that labels the data\ndef label_img(img):\n    word_label = img.split('.')[-3]\n    # DIY One hot encoder\n    if word_label == 'cat':\n        return [1, 0]\n    elif word_label == 'dog':\n        return [0, 1]\n</code></pre>\n\n<p><br />\nand here is a function that creates the train data, the same function is used for test data.</p>\n\n<pre><code>def create_train_data():\n    # Creating an empty list where we should store the training data\n    # after a little preprocessing of the data\n    training_data = []\n\n    # tqdm is only used for interactive loading\n    # loading the training data\n    for img in tqdm(os.listdir(TRAIN_DIR)):\n        # labeling the images\n        label = label_img(img)\n\n        path = os.path.join(TRAIN_DIR, img)\n\n        # loading the image from the path and then converting them into\n        # greyscale for easier covnet prob\n        img = cv2.imread(path)\n        img = cv2.resize(img, (256, 256))\n\n        training_data.append([np.array(img), np.array(label)])\n\n        # shuffling of the training data to preserve the random state of our data\n    random.seed(101)\n    random.shuffle(training_data)\n\n    return training_data\n\n</code></pre>\n\n<p><br />\nhere is the session code containing the batched images <br />\nhere the TrainX and TrainY are just nparrays containing the images and labels</p>\n\n<pre><code>with tf.Session() as sess:\n    sess.run(init)\n    train_loss = []\n    test_loss = []\n    train_accuracy = []\n    test_accuracy = []\n    for i in range(training_iters):\n        for batch in range(len(trainX)//batch_size):\n            batch_x = trainX[batch*batch_size:min((batch+1)*batch_size, len(trainX))]\n            batch_y = trainY[batch*batch_size:min((batch+1)*batch_size, len(trainY))]\n            # Run optimization op (backprop).\n            # Calculate batch loss and accuracy\n            opt = sess.run(optimizer, feed_dict={x: batch_x,\n                                                              y: batch_y})\n            loss, acc = sess.run([cost, accuracy], feed_dict={x: batch_x,\n                                                              y: batch_y})\n        print(\"Iter \" + str(i) + \", Loss= \" + \\\n                      \"{:.6f}\".format(loss) + \", Training Accuracy= \" + \\\n                      \"{:.5f}\".format(acc))\n        print(\"Optimization Finished!\")\n\n        # Calculate accuracy for all 10000 mnist test images\n        test_acc,valid_loss = sess.run([accuracy, cost], feed_dict={x: testX, y : testY})\n        train_loss.append(loss)\n        test_loss.append(valid_loss)\n        train_accuracy.append(acc)\n        test_accuracy.append(test_acc)\n        print(\"Testing Accuracy:\", \"{:.5f}\".format(test_acc))\n\n</code></pre>\n"}, {"tags": ["python"], "answers": [{"tags": [], "owner": {"reputation": 245, "user_id": 12373023, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mC-IAb47XepkBgIMF8r0RAeLx2XUizxQcMyq-bo=k-s128", "display_name": "Jananath Banuka", "link": "https://stackoverflow.com/users/12373023/jananath-banuka"}, "is_accepted": false, "score": 0, "last_activity_date": 1577823589, "creation_date": 1577823589, "answer_id": 59548173, "question_id": 59547834, "link": "https://stackoverflow.com/questions/59547834/unicodeencodeerror-ascii-codec-cant-encode-character-u-u25cf-in-position-2/59548173#59548173", "title": "UnicodeEncodeError: &#39;ascii&#39; codec can&#39;t encode character u&#39;\\u25cf&#39; in position 24: ordinal not in range(128) in Python 2.7", "body": "<p>This is how I could get rid of this exception.</p>\n\n<p>Just make the second string also a unicode string</p>\n\n<pre><code>print u\"{: ^71s}\".format(constants.ICON_BLACK_CIRCLE + \" - \" +errormsg)\n</code></pre>\n"}], "owner": {"reputation": 245, "user_id": 12373023, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mC-IAb47XepkBgIMF8r0RAeLx2XUizxQcMyq-bo=k-s128", "display_name": "Jananath Banuka", "link": "https://stackoverflow.com/users/12373023/jananath-banuka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1577823589, "creation_date": 1577820474, "question_id": 59547834, "link": "https://stackoverflow.com/questions/59547834/unicodeencodeerror-ascii-codec-cant-encode-character-u-u25cf-in-position-2", "title": "UnicodeEncodeError: &#39;ascii&#39; codec can&#39;t encode character u&#39;\\u25cf&#39; in position 24: ordinal not in range(128) in Python 2.7", "body": "<p>I am trying to print an <code>ascii</code> character along with <code>string</code> but I get this error:</p>\n\n<blockquote>\n  <p>UnicodeEncodeError: 'ascii' codec can't encode character u'\\u25cf' in position 24: ordinal not in range(128)</p>\n</blockquote>\n\n<p>This is my <code>constants.ICON_BLACK_CIRCLE</code></p>\n\n<pre><code>ICON_BLACK_CIRCLE = u'\\u25CF'\n</code></pre>\n\n<p>And here I am trying to print it <strong>with some other string</strong></p>\n\n<pre><code>print \"{: ^71s}\".format(constants.ICON_BLACK_CIRCLE + \" - \" + errormsg),    \ns = \"|    |\"\nprint(s)\n</code></pre>\n\n<p>How can I fix this error?</p>\n"}, {"tags": ["python", "tensorflow", "object-detection-api"], "comments": [{"owner": {"reputation": 1962, "user_id": 4582711, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/1838807151/picture?type=large", "display_name": "Vedanshu", "link": "https://stackoverflow.com/users/4582711/vedanshu"}, "edited": false, "score": 0, "creation_date": 1577853007, "post_id": 59547775, "comment_id": 105268979, "body": "What&#39;s the max no of detection you want ?"}, {"owner": {"reputation": 43, "user_id": 12312789, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukpqm.jpg?s=128&g=1", "display_name": "cd_warman", "link": "https://stackoverflow.com/users/12312789/cd-warman"}, "reply_to_user": {"reputation": 1962, "user_id": 4582711, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/1838807151/picture?type=large", "display_name": "Vedanshu", "link": "https://stackoverflow.com/users/4582711/vedanshu"}, "edited": false, "score": 0, "creation_date": 1577990062, "post_id": 59547775, "comment_id": 105304398, "body": "The max number of detections per image would probably be around 800 total objects, with the average number of detections per image at around 350-400 objects."}, {"owner": {"reputation": 1962, "user_id": 4582711, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/1838807151/picture?type=large", "display_name": "Vedanshu", "link": "https://stackoverflow.com/users/4582711/vedanshu"}, "edited": false, "score": 0, "creation_date": 1578070036, "post_id": 59547775, "comment_id": 105330786, "body": "make <code>max_proposals</code> and <code>max_total_detections</code> 800."}, {"owner": {"reputation": 43, "user_id": 12312789, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukpqm.jpg?s=128&g=1", "display_name": "cd_warman", "link": "https://stackoverflow.com/users/12312789/cd-warman"}, "reply_to_user": {"reputation": 1962, "user_id": 4582711, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/1838807151/picture?type=large", "display_name": "Vedanshu", "link": "https://stackoverflow.com/users/4582711/vedanshu"}, "edited": false, "score": 0, "creation_date": 1578356228, "post_id": 59547775, "comment_id": 105404682, "body": "The results are very similar with max_proposals and max_total_detections set to 800, with no objects detected in the bottom half of the example image and fewer objects detected on the bottom half in general."}, {"owner": {"reputation": 1962, "user_id": 4582711, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/1838807151/picture?type=large", "display_name": "Vedanshu", "link": "https://stackoverflow.com/users/4582711/vedanshu"}, "edited": false, "score": 0, "creation_date": 1578370617, "post_id": 59547775, "comment_id": 105407377, "body": "Can you remove <code>batch_non_max_suppression</code> from <code>second_stage_post_processing</code>."}, {"owner": {"reputation": 1962, "user_id": 4582711, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/1838807151/picture?type=large", "display_name": "Vedanshu", "link": "https://stackoverflow.com/users/4582711/vedanshu"}, "edited": false, "score": 0, "creation_date": 1578370640, "post_id": 59547775, "comment_id": 105407383, "body": "Anyway what exactly are you trying to detect ?"}, {"owner": {"reputation": 123, "user_id": 7028368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e9d1d4b1c7554aae319f0d78ee0e692?s=128&d=identicon&r=PG&f=1", "display_name": "gfkeith", "link": "https://stackoverflow.com/users/7028368/gfkeith"}, "edited": false, "score": 0, "creation_date": 1585099455, "post_id": 59547775, "comment_id": 107644739, "body": "Did you ever find a solution to this?"}, {"owner": {"reputation": 43, "user_id": 12312789, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukpqm.jpg?s=128&g=1", "display_name": "cd_warman", "link": "https://stackoverflow.com/users/12312789/cd-warman"}, "edited": false, "score": 1, "creation_date": 1585193943, "post_id": 59547775, "comment_id": 107678942, "body": "I never found a good solution. I ended up splitting the images (and training/annotations) into smaller images (each image into 3 sub-images) and running the training then testing on the sub-images. For the final output, I recombined the sub-images with some minor stuff to fix the bounding boxes along the edges. This worked well. I&#39;m writing a paper to be published soon, I&#39;ll leave it here once I&#39;m finished."}], "answers": [{"tags": [], "owner": {"reputation": 1297, "user_id": 1241606, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dc39880a07cb8ad95b80f7a727f871d2?s=128&d=identicon&r=PG", "display_name": "Nuntipat Narkthong", "link": "https://stackoverflow.com/users/1241606/nuntipat-narkthong"}, "is_accepted": false, "score": 0, "last_activity_date": 1595651433, "creation_date": 1595651433, "answer_id": 63084364, "question_id": 59547775, "link": "https://stackoverflow.com/questions/59547775/problem-detecting-large-number-of-objects-in-single-image-with-tensorflow-object/63084364#63084364", "title": "Problem detecting large number of objects in single image with Tensorflow Object Detection API", "body": "<p>Beside adjusting the <code>max_detections_per_class</code> and <code>max_total_detections</code>, you need to add <code>max_number_of_boxes</code> into the train_config, train_input_reader and eval_input_reader block and <code>max_num_boxes_to_visualize</code> to the eval_config block otherwise the ground truth box will be clipped from training and evaluation process. I've deployed a model to solve a similar problem to yours where we tried to detected many small objects and faster_rcnn_inception_resnet_v2_atrous_coco works quite well so that shouldn't be your problem.</p>\n"}], "owner": {"reputation": 43, "user_id": 12312789, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukpqm.jpg?s=128&g=1", "display_name": "cd_warman", "link": "https://stackoverflow.com/users/12312789/cd-warman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 552, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1595651433, "creation_date": 1577819949, "question_id": 59547775, "link": "https://stackoverflow.com/questions/59547775/problem-detecting-large-number-of-objects-in-single-image-with-tensorflow-object", "title": "Problem detecting large number of objects in single image with Tensorflow Object Detection API", "body": "<p>I need to detect large numbers of two classes of objects in a single image. I've had some success using the Tensorflow Object Detection API by retraining the faster_rcnn_inception_resnet_v2_atrous_coco network from the Object Detection Model Zoo using the following config file:</p>\n\n<pre><code>model {\n  faster_rcnn {\n    num_classes: 2\n    image_resizer {\n      keep_aspect_ratio_resizer {\n        min_dimension: 600\n        max_dimension: 1024\n      }\n    }\n    feature_extractor {\n      type: 'faster_rcnn_inception_resnet_v2'\n      first_stage_features_stride: 8\n    }\n    first_stage_anchor_generator {\n      grid_anchor_generator {\n        scales: [0.25, 0.5, 1.0, 2.0]\n        aspect_ratios: [0.5, 1.0, 2.0]\n        height_stride: 8\n        width_stride: 8\n      }\n    }\n    first_stage_atrous_rate: 2\n    first_stage_box_predictor_conv_hyperparams {\n      op: CONV\n      regularizer {\n        l2_regularizer {\n          weight: 0.0\n        }\n      }\n      initializer {\n        truncated_normal_initializer {\n          stddev: 0.01\n        }\n      }\n    }\n    first_stage_nms_score_threshold: 0.0\n    first_stage_nms_iou_threshold: 0.7\n    first_stage_max_proposals: 2000\n    first_stage_localization_loss_weight: 2.0\n    first_stage_objectness_loss_weight: 1.0\n    initial_crop_size: 17\n    maxpool_kernel_size: 1\n    maxpool_stride: 1\n    second_stage_box_predictor {\n      mask_rcnn_box_predictor {\n        use_dropout: false\n        dropout_keep_probability: 1.0\n        fc_hyperparams {\n          op: FC\n          regularizer {\n            l2_regularizer {\n              weight: 0.0\n            }\n          }\n          initializer {\n            variance_scaling_initializer {\n              factor: 1.0\n              uniform: true\n              mode: FAN_AVG\n            }\n          }\n        }\n      }\n    }\n    second_stage_post_processing {\n      batch_non_max_suppression {\n        score_threshold: 0.0\n        iou_threshold: 0.6\n        max_detections_per_class: 1000\n        max_total_detections: 1000\n      }\n      score_converter: SOFTMAX\n    }\n    second_stage_localization_loss_weight: 2.0\n    second_stage_classification_loss_weight: 1.0\n  }\n}\n\ntrain_config: {\n  batch_size: 1\n  optimizer {\n    momentum_optimizer: {\n      learning_rate: {\n        manual_step_learning_rate {\n          initial_learning_rate: 0.0003\n          schedule {\n            step: 900000\n            learning_rate: .00003\n          }\n          schedule {\n            step: 1200000\n            learning_rate: .000003\n          }\n        }\n      }\n      momentum_optimizer_value: 0.9\n    }\n    use_moving_average: false\n  }\n  gradient_clipping_by_norm: 10.0\n  fine_tune_checkpoint: \"/path/model.ckpt\"\n  from_detection_checkpoint: true\n  load_all_detection_checkpoint_vars: true\n  # Note: The below line limits the training process to 200K steps, which we\n  # empirically found to be sufficient enough to train the pets dataset. This\n  # effectively bypasses the learning rate schedule (the learning rate will\n  # never decay). Remove the below line to train indefinitely.\n  num_steps: 200000\n  data_augmentation_options {\n    random_horizontal_flip {\n    }\n  }\n}\n\ntrain_input_reader: {\n  tf_record_input_reader {\n    input_path: \"/path/train.record\"\n  }\n  label_map_path: \"/path/label_map.pbtxt\"\n}\n\neval_config: {\n  num_examples: 8000\n  # Note: The below line limits the evaluation process to 10 evaluations.\n  # Remove the below line to evaluate indefinitely.\n  max_evals: 10\n}\n\neval_input_reader: {\n  tf_record_input_reader {\n    input_path: \"/path/val.record\"\n  }\n  label_map_path: \"/path/label_map.pbtxt\"\n  shuffle: false\n  num_readers: 1\n}\n</code></pre>\n\n<p>However, using an Nvidia M10 with 8 GB memory, I'm only able to get detections on (roughly) the top half of the image:</p>\n\n<p><a href=\"https://i.stack.imgur.com/I0a6J.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/I0a6J.jpg\" alt=\"Object detection bounding boxes on only the top half of the image\"></a></p>\n\n<p>This pattern is consistent across many images, with some images having a few bounding boxes lower down on the image, but no images having bounding boxes accurately distributed throughout the image. My first thought was that it was a memory problem, so I tried running the detection on a GPU with more memory (Nvidia V100 with 32 GB memory). I changed the config file to raise the first_stage_max_proposals from 2000 to 4000 and the max_detections_per_class/max_total_detections from 1000 to 2000 (on the 8 GB GPU these settings led to an Aborted (core dumped) error). The results were only marginally better:</p>\n\n<p><a href=\"https://i.stack.imgur.com/lWHk1.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lWHk1.jpg\" alt=\"Object detection bounding boxes with bigger GPU (several more boxes)\"></a></p>\n\n<p>I tried raising the first_stage_max_proposals to 8000 and the max_detections_per_class/max_total_detections to 4000, but this led to an Aborted (core dumped) error on the 32 GB GPU.</p>\n\n<p>My questions are:</p>\n\n<p>1) Are these the best config settings for detecting large numbers of objects in a single image?</p>\n\n<p>2) Is there a better network than faster_rcnn_inception_resnet_v2_atrous_coco for this specific task?</p>\n\n<p>3) Is there an entirely different approach that's better suited to this problem?</p>\n\n<p>I've considered splitting the image up into smaller images and running it on those, but if possible I'd like to keep it as one image, as accurate counts of the objects are important to my application and splitting the objects along some dividing line might lead to inaccurate counts.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "versioning", "nixos"], "comments": [{"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1577820835, "post_id": 59547709, "comment_id": 105264764, "body": "When I&#39;ve done this successfully, it was using <code>pypi2nix</code> to generate a <code>requirements.nix</code> that could be imported. I&#39;m actually surprised that <code>&quot;requests==1.0.0&quot;</code> didn&#39;t outright cause an error -- wouldn&#39;t be surprised if you see that string being used as a path if you inspect the resulting derivation (insofar as derivations, coerced to strings, result in <code>&#47;nix&#47;store&#47;...</code> directory names, the only way I can see that the attempt <i>wouldn&#39;t</i> cause an error is if all the users just treat it as a path without doing any deeper inspection)."}, {"owner": {"reputation": 4232, "user_id": 428586, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yHNYS.jpg?s=128&g=1", "display_name": "Robert Hensing", "link": "https://stackoverflow.com/users/428586/robert-hensing"}, "edited": false, "score": 0, "creation_date": 1577954409, "post_id": 59547709, "comment_id": 105288696, "body": "Assuming you are setting up a development environment, I recommend to pin with a <code>shell.nix</code>, but otherwise it may be more convenient to manage it in your user profile: <a href=\"https://nixos.org/nixpkgs/manual/#sec-declarative-package-management\" rel=\"nofollow noreferrer\">nixos.org/nixpkgs/manual/#sec-declarative-package-management</a>  In general I recommend pinning dependencies close to your &quot;unit of deployment&quot;, which is typically not your NixOS installation. Usually this is an application repository."}], "owner": {"reputation": 567, "user_id": 5130800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1497fd8c4f126845db3774aab86f3058?s=128&d=identicon&r=PG&f=1", "display_name": "KoKlA", "link": "https://stackoverflow.com/users/5130800/kokla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 228, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1577819303, "creation_date": 1577819303, "question_id": 59547709, "link": "https://stackoverflow.com/questions/59547709/nixos-python-package-version-pinning-e-g-requests-1-0-0-in-etc-nixos-configur", "title": "NixOS python package version pinning (E.g requests 1.0.0) in /etc/nixos/configuration.nix", "body": "<p>I am currently playing around with nixos and python. I'm wondering how to pin python package versions in /etc/nixos/configuration.nix</p>\n\n<p>What i tried is the following:</p>\n\n<pre><code>let my-python-packages = python-packages: with python-packages; [\n    pandas \n    \"requests==1.0.0\"\n];\n</code></pre>\n\n<p><strong>Expected result</strong></p>\n\n<pre><code>[jane@nixos:~]$ python\nPython 2.7.17 (default, Oct 19 2019, 18:58:51) \n[GCC 8.3.0] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more \ninformation.\n&gt;&gt;&gt; import requests\n&gt;&gt;&gt; requests.__version__\n'1.0.0'\n</code></pre>\n\n<p><strong>Actual result</strong></p>\n\n<pre><code>Python 2.7.17 (default, Oct 19 2019, 18:58:51) \n[GCC 8.3.0] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more \ninformation.\n&gt;&gt;&gt; import requests\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nImportError: No module named requests\n</code></pre>\n\n<p>After that i tried this in <strong>configuration.nix</strong>: </p>\n\n<pre><code># and in the NixOS manual (accessible by running \u2018nixos-help\u2019).\n\n{ config, pkgs, ... }:\n\nlet nixpkgs.config.packageOverrides = super: {\n    python = super.python.override {\n    packageOverrides = python-self: python-super: {\n      requests = python-super.requests.overrideAttrs \n    (oldAttrs: {\n        src = super.fetchPypi {\n         pname = \"requests\";\n         # sha256 hash of requests 1.0.0 as on pypi\n         sha256 = \"f10d8fbcc02a58056ab44f79ff9b3f9fe78e410296527885250bbb36d15be8c6\";  \n         };\n      });\n    };\n  };\n};\n\n\nmy-python-packages = python-packages: with python-packages; \n[\n      pandas\n      requests\n  ];\n\n\n\n python-with-my-packages = pkgs.python2.withPackages my- \n python-packages;\n</code></pre>\n\n<p><strong>Actual result:</strong></p>\n\n<pre><code>[jane@nixos:~]$ python\nPython 2.7.17 (default, Oct 19 2019, 18:58:51) \n[GCC 8.3.0] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more \ninformation.\n&gt;&gt;&gt; import requests\n&gt;&gt;&gt; requests.__version__\n'2.22.0' # this should be 1.0.0\n</code></pre>\n\n<p>So how can i pin python packages to specific versions in /etc/nixos/configuration.nix ?</p>\n"}, {"tags": ["python", "arrays", "python-3.x", "sorting", "arraylist"], "comments": [{"owner": {"reputation": 4859, "user_id": 7431860, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/P6Jko.jpg?s=128&g=1", "display_name": "Nick Reed", "link": "https://stackoverflow.com/users/7431860/nick-reed"}, "edited": false, "score": 0, "creation_date": 1577819483, "post_id": 59547700, "comment_id": 105264481, "body": "How exactly do you define &quot;alphabetically&quot;? If you&#39;re given <code>&#246; \u1ed9 \u022d &#242;</code>, for example, what order are they supposed to come in?"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1577819906, "post_id": 59547700, "comment_id": 105264570, "body": "Since the letters are not defined in your desired &quot;alphabetical&quot; order, you need to define your own sort function, including the desired order."}, {"owner": {"reputation": 1, "user_id": 12633610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c1a24f3479a4c3e269bba5c9cbc5999?s=128&d=identicon&r=PG&f=1", "display_name": "cedricdef", "link": "https://stackoverflow.com/users/12633610/cedricdef"}, "edited": false, "score": 0, "creation_date": 1577819915, "post_id": 59547700, "comment_id": 105264572, "body": "A B C &#199; D E F G \u011e H I \u0130 J K L M N O &#214; P R S \u015e T U &#220; V Y Z"}, {"owner": {"reputation": 1, "user_id": 12633610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c1a24f3479a4c3e269bba5c9cbc5999?s=128&d=identicon&r=PG&f=1", "display_name": "cedricdef", "link": "https://stackoverflow.com/users/12633610/cedricdef"}, "edited": false, "score": 0, "creation_date": 1577820123, "post_id": 59547700, "comment_id": 105264628, "body": "Are there any sample code? I&#39;m working on this for 2 days. I have a homework but I don&#39;t have time\ud83d\ude4f."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 12633610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c1a24f3479a4c3e269bba5c9cbc5999?s=128&d=identicon&r=PG&f=1", "display_name": "cedricdef", "link": "https://stackoverflow.com/users/12633610/cedricdef"}, "edited": false, "score": 0, "creation_date": 1577821946, "post_id": 59547908, "comment_id": 105264993, "body": "Problem is that &quot;my alphabet is a, b, c, &#231;, d... but if I use sort method, &#231; will be last character(ascii)&quot;"}, {"owner": {"reputation": 963, "user_id": 8692977, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EEk4l.jpg?s=128&g=1", "display_name": "Marsilinou Zaky", "link": "https://stackoverflow.com/users/8692977/marsilinou-zaky"}, "reply_to_user": {"reputation": 1, "user_id": 12633610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c1a24f3479a4c3e269bba5c9cbc5999?s=128&d=identicon&r=PG&f=1", "display_name": "cedricdef", "link": "https://stackoverflow.com/users/12633610/cedricdef"}, "edited": false, "score": 0, "creation_date": 1577823335, "post_id": 59547908, "comment_id": 105265276, "body": "Just made some modifications to the code to account for that @cedricdef"}], "tags": [], "owner": {"reputation": 963, "user_id": 8692977, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EEk4l.jpg?s=128&g=1", "display_name": "Marsilinou Zaky", "link": "https://stackoverflow.com/users/8692977/marsilinou-zaky"}, "is_accepted": false, "score": 0, "last_activity_date": 1577823300, "last_edit_date": 1577823300, "creation_date": 1577821168, "answer_id": 59547908, "question_id": 59547700, "link": "https://stackoverflow.com/questions/59547700/sorting-non-english-characters-alphabetically%c3%a7-%c5%9f-%c3%b6-python-3x/59547908#59547908", "title": "Sorting Non-English Characters Alphabetically(&#231;, \u015f, &#246;) (Python-3x)", "body": "<p>Try using the sort method and specify the key as the first entry of every element in the list </p>\n\n<pre><code>import unicodedata \ndef strip_accents(text):\n    print(\"HIIIIIIII: %s\"%text)\n    return ''.join(char for char in\n                   unicodedata.normalize('NFKD', text)\n                   if unicodedata.category(char) != 'Mn')\n\nl=[['\u00e7', 2], ['\u00e7', 10], ['a', 3], ['b', 1], ['d', 7]]\nprint(sorted(l, key=lambda k: strip_accents(k[0])))\nprint(l)\n# [['a', 3], ['b', 1], ['\u00e7', 2], ['\u00e7', 10], ['d', 7]]\n</code></pre>\n\n<p>Refrences:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/8966538/syntax-behind-sortedkey-lambda\">Syntax behind sorted(key=lambda: ...)</a></p>\n\n<p><a href=\"https://stackoverflow.com/a/4512721/8692977\">https://stackoverflow.com/a/4512721/8692977</a></p>\n"}, {"tags": [], "owner": {"reputation": 307, "user_id": 8041632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/woFrZ.jpg?s=128&g=1", "display_name": "Albuquerque", "link": "https://stackoverflow.com/users/8041632/albuquerque"}, "is_accepted": false, "score": 0, "last_activity_date": 1577823710, "creation_date": 1577823710, "answer_id": 59548187, "question_id": 59547700, "link": "https://stackoverflow.com/questions/59547700/sorting-non-english-characters-alphabetically%c3%a7-%c5%9f-%c3%b6-python-3x/59548187#59548187", "title": "Sorting Non-English Characters Alphabetically(&#231;, \u015f, &#246;) (Python-3x)", "body": "<p>Usually characters such as <code>\u00e7</code> are alphabetically sorted after their non accentuated counterparts (<code>c</code>). In that sense, the encoding you are using may or may not help regarding sorting alphabetically.</p>\n\n<p>I would suggest first defining your order relation:</p>\n\n<p>[<code>a</code>, <code>\u00e1</code>, <code>\u00e0</code>, <code>b</code>, <code>c</code>, <code>\u00e7</code>, ...]</p>\n\n<p>Implementing a <code>&lt;</code> compare function based on that relation, and using one of the many available sorting methods to sort your list.</p>\n"}], "owner": {"reputation": 1, "user_id": 12633610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c1a24f3479a4c3e269bba5c9cbc5999?s=128&d=identicon&r=PG&f=1", "display_name": "cedricdef", "link": "https://stackoverflow.com/users/12633610/cedricdef"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 123, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1577823710, "creation_date": 1577819215, "question_id": 59547700, "link": "https://stackoverflow.com/questions/59547700/sorting-non-english-characters-alphabetically%c3%a7-%c5%9f-%c3%b6-python-3x", "title": "Sorting Non-English Characters Alphabetically(&#231;, \u015f, &#246;) (Python-3x)", "body": "<p>There is a array like that ---> [[text1, number1], [text2, number2]...]</p>\n\n<p>I want to sort to this array(by first elements(texts)). This texts contains different characters such as \u0131, \u00e7, \u00f6... I found to location method but i couldn't use it. Also I want to describe own function.</p>\n"}, {"tags": ["python", "tensorflow", "softmax"], "answers": [{"tags": [], "owner": {"reputation": 1430, "user_id": 12482432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cafa80cfdea86834b13118c14437c22b?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Snyder", "link": "https://stackoverflow.com/users/12482432/mark-snyder"}, "is_accepted": true, "score": 1, "last_activity_date": 1577820636, "creation_date": 1577820636, "answer_id": 59547852, "question_id": 59547689, "link": "https://stackoverflow.com/questions/59547689/how-to-see-accuracy-breakdown-by-class-in-tensorflow/59547852#59547852", "title": "How to see accuracy breakdown by class in tensorflow?", "body": "<p>Assuming you're content with finding class-level accuracy after training rather than during it,  you can simply <code>predict</code> your model's output on the test set and do the accuracy checking yourself by, e.g., storing hits and misses for each of the 26 classes in an array.</p>\n\n<p>If you prefer, you can also use <code>tf.math.confusion_matrix</code>. This will calculate more information than you're looking for (it categorizes all of the misclassifications in a neat way), and you can then process the information to generate percentages.</p>\n"}], "owner": {"reputation": 69, "user_id": 9583362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ccd93c538095fb8e3e04f8c88b024b8?s=128&d=identicon&r=PG&f=1", "display_name": "tiffanie", "link": "https://stackoverflow.com/users/9583362/tiffanie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 275, "favorite_count": 0, "accepted_answer_id": 59547852, "answer_count": 1, "score": 0, "last_activity_date": 1577820636, "creation_date": 1577819148, "question_id": 59547689, "link": "https://stackoverflow.com/questions/59547689/how-to-see-accuracy-breakdown-by-class-in-tensorflow", "title": "How to see accuracy breakdown by class in tensorflow?", "body": "<p>I am attempting to create a neural network using a softmax classifier with N=26 classes. Initial results seem promising, but I need to know the accuracy breakdown by class. After 150 epochs, the test accuracy is 71.1%, but that's the total of 26 classes. I am certain there are some classes doing really well and some doing really poorly, and I need to know which are which and what the accuracy is per each class.</p>\n\n<p>I have spent <em>days</em> searching and cannot figure out how to get that. It seems like this would be a basic, simple, <em>obvious</em> thing that someone would need, so I suspect I'm just missing something.</p>\n\n<p>I tried <code>print(tf.print(tf.compat.v1.metrics.mean_per_class_accuracy(labels, logits, n)))</code> but got </p>\n\n<pre><code>name: \"PrintV2\"\nop: \"PrintV2\"\ninput: \"StringFormat\"\nattr {\n  key: \"end\"\n  value {\n    s: \"\\n\"\n  }\n}\nattr {\n  key: \"output_stream\"\n  value {\n    s: \"stderr\"\n  }\n}\n</code></pre>\n\n<p>I tried removing the tf.print and tried <code>print(tf.compat.v1.metrics.mean_per_class_accuracy(labels, logits, n))</code> but got <code>(&lt;tf.Tensor 'mean_accuracy/mean_accuracy:0' shape=() dtype=float32&gt;, &lt;tf.Tensor 'mean_accuracy/update_op:0' shape=(27,) dtype=float32&gt;)</code>. Neither of which are errors, technically, but neither do they tell me what I need to know.</p>\n\n<p>I also tried <code>print(classification_report(labels, logits))</code> and <code>print(classification_report(labels, tf.argmax(logits)))</code>, both of which gave me the error <code>TypeError: object of type 'Tensor' has no len()</code>. Logits is the tensor. I've been unable to find a way to convert it to an array or vector, or even print the contents of it.</p>\n\n<p>How do I see the accuracy breakdown by class? (In case it isn't obvious what I mean by that, when 71% is the overall accuracy, I want it to tell me, for example: class 1 = 82%, ..., class N = 13%.)</p>\n"}, {"tags": ["python", "django", "pdf-parsing"], "comments": [{"owner": {"reputation": 11566, "user_id": 1262820, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mq3Cq.png?s=128&g=1", "display_name": "felipsmartins", "link": "https://stackoverflow.com/users/1262820/felipsmartins"}, "edited": false, "score": 0, "creation_date": 1577818666, "post_id": 59547593, "comment_id": 105264325, "body": "<code>response = HttpResponse(content_type=&#39;application&#47;pdf&#39;); response[&#39;Content-Disposition&#39;] = &#39;attachment; filename=&quot;somefilename.pdf&quot;&#39;</code>"}, {"owner": {"reputation": 17, "user_id": 11565688, "user_type": "registered", "profile_image": "https://graph.facebook.com/1309408589216422/picture?type=large", "display_name": "Mohd Abdul Raoof", "link": "https://stackoverflow.com/users/11565688/mohd-abdul-raoof"}, "reply_to_user": {"reputation": 11566, "user_id": 1262820, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mq3Cq.png?s=128&g=1", "display_name": "felipsmartins", "link": "https://stackoverflow.com/users/1262820/felipsmartins"}, "edited": false, "score": 0, "creation_date": 1577818790, "post_id": 59547593, "comment_id": 105264352, "body": "I didn&#39;t want http response.My question is if i print pdf1 it will give bytes no text i want the text present in pdf"}, {"owner": {"reputation": 32, "user_id": 10224558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9102903dd3195d42da68177caadeb7b0?s=128&d=identicon&r=PG", "display_name": "Ziad Abouelfarah", "link": "https://stackoverflow.com/users/10224558/ziad-abouelfarah"}, "edited": false, "score": 0, "creation_date": 1577818855, "post_id": 59547593, "comment_id": 105264372, "body": "You can use the following <a href=\"https://stackoverflow.com/a/26495057/10224558\">question</a> to solve your problem"}, {"owner": {"reputation": 11566, "user_id": 1262820, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mq3Cq.png?s=128&g=1", "display_name": "felipsmartins", "link": "https://stackoverflow.com/users/1262820/felipsmartins"}, "edited": false, "score": 0, "creation_date": 1577819088, "post_id": 59547593, "comment_id": 105264410, "body": "@MohdAbdulRaoof <b>if i print pdf1 it will give bytes no text i want the text present</b> - ??? it makes no sense. Now, if you want <i>PARSE</i> the PDF file in order to extract data, that&#39;s another question."}, {"owner": {"reputation": 17, "user_id": 11565688, "user_type": "registered", "profile_image": "https://graph.facebook.com/1309408589216422/picture?type=large", "display_name": "Mohd Abdul Raoof", "link": "https://stackoverflow.com/users/11565688/mohd-abdul-raoof"}, "edited": false, "score": 0, "creation_date": 1577847301, "post_id": 59547593, "comment_id": 105268534, "body": "You are right but i am giving file from djangoapp it will come in pdf variable.After that line pdf1 is having bytes"}], "owner": {"reputation": 17, "user_id": 11565688, "user_type": "registered", "profile_image": "https://graph.facebook.com/1309408589216422/picture?type=large", "display_name": "Mohd Abdul Raoof", "link": "https://stackoverflow.com/users/11565688/mohd-abdul-raoof"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 358, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1577818223, "creation_date": 1577818223, "question_id": 59547593, "link": "https://stackoverflow.com/questions/59547593/how-to-parse-pdf-from-django-inmemoryuploadedfile", "title": "How to Parse pdf from Django InMemoryUploadedFile?", "body": "<p>I want to read files dynamically As i am giving pdf  file from  django the type of file it is having class 'django.core.files.uploadedfile.TemporaryUploadedFile' if i read the file it will have only bytes which is not understandable. Below is my code</p>\n\n<pre><code>def file(request):\n    pdf = request.FILES['file']\n    pdf1 = (pdf.read())\n</code></pre>\n\n<p>if i print the question i am getting bytes which is not understandable.so how to read pdfs from django dynamically and get text by using django</p>\n"}, {"tags": ["python", "django", "pip", "django-3.0"], "comments": [{"owner": {"reputation": 11566, "user_id": 1262820, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mq3Cq.png?s=128&g=1", "display_name": "felipsmartins", "link": "https://stackoverflow.com/users/1262820/felipsmartins"}, "edited": false, "score": 1, "creation_date": 1577819400, "post_id": 59547543, "comment_id": 105264464, "body": "check this: <a href=\"https://github.com/pyca/bcrypt/issues/58\" rel=\"nofollow noreferrer\">github.com/pyca/bcrypt/issues/58</a>"}], "answers": [{"tags": [], "owner": {"reputation": 377, "user_id": 7800690, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ic_bVAa-UYo/AAAAAAAAAAI/AAAAAAAACiw/rFuWmdUiIR0/photo.jpg?sz=128", "display_name": "Hassan Fayyaz", "link": "https://stackoverflow.com/users/7800690/hassan-fayyaz"}, "is_accepted": true, "score": 2, "last_activity_date": 1577855509, "creation_date": 1577855509, "answer_id": 59550103, "question_id": 59547543, "link": "https://stackoverflow.com/questions/59547543/error-during-installing-this-library-pip-install-bcrypt-in-django/59550103#59550103", "title": "Error During installing this library &quot; pip install bcrypt&quot; in django", "body": "<p>Apply these three commands</p>\n\n<pre><code>pip uninstall  bcrypt cffi pycparser\npip install --user --upgrade cffi\npip install --user --upgrade bcrypt\n</code></pre>\n\n<p>if this error is show</p>\n\n<blockquote>\n  <p>microsoft visual c++ 14.0 is required</p>\n</blockquote>\n\n<p>then you have to download <strong>vs_buildtools</strong> after installing and\nenter these above commmands again    </p>\n"}], "owner": {"reputation": 77, "user_id": 12562951, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCjHLUtvz29KlTBdIUyoyLcY1odJbcUWvmha2CzPA=k-s128", "display_name": "Hassan Fayyaz", "link": "https://stackoverflow.com/users/12562951/hassan-fayyaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1539, "favorite_count": 0, "accepted_answer_id": 59550103, "answer_count": 1, "score": 2, "last_activity_date": 1577855509, "creation_date": 1577817827, "question_id": 59547543, "link": "https://stackoverflow.com/questions/59547543/error-during-installing-this-library-pip-install-bcrypt-in-django", "title": "Error During installing this library &quot; pip install bcrypt&quot; in django", "body": "<p>I got an error while installing bcrypt in Django</p>\n\n<blockquote>\n  <p>Command \"python setup.py egg_info\" failed with error code 1 in\n  C:\\Users\\Hassan\\AppData\\Local\\Temp\\pip-install-w128k6kc\\cffi\\</p>\n\n<pre><code>  ----------------------------------------\nCommand \"C:\\Users\\Hassan\\PycharmProjects\\django_level_5\\venv\\Scripts\\python.exe\n</code></pre>\n  \n  <p>C:\\Users\\Hassan\\PycharmProjects\\django_level_5\\venv\\lib\\site-packages\\pip-19.0.3-py\n      3.8.egg\\pip install --ignore-installed --no-user --prefix C:\\Users\\Hassan\\AppData\\Local\\Temp\\pip-build-env-ky7v9nxx\\overlay\n  --no-warn-script-location --no-binary :\n      none: --only-binary :none: -i <a href=\"https://pypi.org/simple\" rel=\"nofollow noreferrer\">https://pypi.org/simple</a> -- setuptools>=40.8.0 wheel \"cffi>=1.1; python_implementation != 'PyPy'\"\"\n  failed with error code 1 in None</p>\n</blockquote>\n"}, {"tags": ["python", "mysql", "python-3.x", "string"], "comments": [{"owner": {"reputation": 194, "user_id": 5089644, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/76e4553f0915c3f5721e4f0cc17b804e?s=128&d=identicon&r=PG&f=1", "display_name": "DVL", "link": "https://stackoverflow.com/users/5089644/dvl"}, "edited": false, "score": 1, "creation_date": 1577818229, "post_id": 59547540, "comment_id": 105264233, "body": "it doesnt appear that any &quot; are changed to &#39;. The quotes on the outside are not part of the string. It is just adding escape characters to the string. Can you provide the code where you use <code>temp</code>?"}, {"owner": {"reputation": 88, "user_id": 11087691, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wxIACMmqrZk/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQO05PiYyMqm2LvklLJCPr2jPFuKxg/mo/photo.jpg?sz=128", "display_name": "Rahul Reddy", "link": "https://stackoverflow.com/users/11087691/rahul-reddy"}, "reply_to_user": {"reputation": 194, "user_id": 5089644, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/76e4553f0915c3f5721e4f0cc17b804e?s=128&d=identicon&r=PG&f=1", "display_name": "DVL", "link": "https://stackoverflow.com/users/5089644/dvl"}, "edited": false, "score": 0, "creation_date": 1577818609, "post_id": 59547540, "comment_id": 105264310, "body": "@DVL updated the code"}, {"owner": {"reputation": 458695, "user_id": 20860, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/iavmP.jpg?s=128&g=1", "display_name": "Bill Karwin", "link": "https://stackoverflow.com/users/20860/bill-karwin"}, "edited": false, "score": 0, "creation_date": 1577818831, "post_id": 59547540, "comment_id": 105264362, "body": "The error you post has nothing to do with quotes, it means you haven&#39;t closed the cursor for the previous SQL statement, so the client thinks it still has more results to fetch. This is especially true after calling a stored procedure, because procedures return multiple result sets. See <a href=\"https://stackoverflow.com/questions/11583083/python-commands-out-of-sync-you-cant-run-this-command-now\" title=\"python commands out of sync you cant run this command now\">stackoverflow.com/questions/11583083/&hellip;</a>"}, {"owner": {"reputation": 88, "user_id": 11087691, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wxIACMmqrZk/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQO05PiYyMqm2LvklLJCPr2jPFuKxg/mo/photo.jpg?sz=128", "display_name": "Rahul Reddy", "link": "https://stackoverflow.com/users/11087691/rahul-reddy"}, "reply_to_user": {"reputation": 458695, "user_id": 20860, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/iavmP.jpg?s=128&g=1", "display_name": "Bill Karwin", "link": "https://stackoverflow.com/users/20860/bill-karwin"}, "edited": false, "score": 0, "creation_date": 1577819203, "post_id": 59547540, "comment_id": 105264427, "body": "@Bill Karwin, I stopped the application and after re-running the application, i still face the same error. and I am closing the cursor connections after doing the operations."}, {"owner": {"reputation": 458695, "user_id": 20860, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/iavmP.jpg?s=128&g=1", "display_name": "Bill Karwin", "link": "https://stackoverflow.com/users/20860/bill-karwin"}, "edited": false, "score": 0, "creation_date": 1577819673, "post_id": 59547540, "comment_id": 105264517, "body": "Are you using the mysql connection in multiple threads? <a href=\"https://stackoverflow.com/questions/32755572/why-still-has-commands-out-of-sync-you-cant-run-this-command-now-error\" title=\"why still has commands out of sync you cant run this command now error\">stackoverflow.com/questions/32755572/&hellip;</a>"}, {"owner": {"reputation": 458695, "user_id": 20860, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/iavmP.jpg?s=128&g=1", "display_name": "Bill Karwin", "link": "https://stackoverflow.com/users/20860/bill-karwin"}, "edited": false, "score": 1, "creation_date": 1577819765, "post_id": 59547540, "comment_id": 105264538, "body": "Another option: you should run the INSERT and the UPDATE separately. Don&#39;t try to combine them into one <code>execute()</code> call. <a href=\"https://stackoverflow.com/questions/51040054/commands-out-of-sync-you-cant-run-this-command-now\" title=\"commands out of sync you cant run this command now\">stackoverflow.com/questions/51040054/&hellip;</a>"}, {"owner": {"reputation": 88, "user_id": 11087691, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wxIACMmqrZk/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQO05PiYyMqm2LvklLJCPr2jPFuKxg/mo/photo.jpg?sz=128", "display_name": "Rahul Reddy", "link": "https://stackoverflow.com/users/11087691/rahul-reddy"}, "reply_to_user": {"reputation": 458695, "user_id": 20860, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/iavmP.jpg?s=128&g=1", "display_name": "Bill Karwin", "link": "https://stackoverflow.com/users/20860/bill-karwin"}, "edited": false, "score": 0, "creation_date": 1577820245, "post_id": 59547540, "comment_id": 105264651, "body": "Running Insert and update together caused the issue!!!Working now Thanks @Bill Karwin"}], "answers": [{"comments": [{"owner": {"reputation": 88, "user_id": 11087691, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wxIACMmqrZk/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQO05PiYyMqm2LvklLJCPr2jPFuKxg/mo/photo.jpg?sz=128", "display_name": "Rahul Reddy", "link": "https://stackoverflow.com/users/11087691/rahul-reddy"}, "edited": false, "score": 0, "creation_date": 1577978634, "post_id": 59547931, "comment_id": 105299432, "body": "I already tried with multi=True before posting this question, But that&#39;s not working even now, couldn&#39;t figure out why!! Only if I execute both as seperate queries.. Its working otherwise throwing me an <code>Error:Commands out of sync; you can&#39;t run this command now</code>"}, {"owner": {"reputation": 458695, "user_id": 20860, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/iavmP.jpg?s=128&g=1", "display_name": "Bill Karwin", "link": "https://stackoverflow.com/users/20860/bill-karwin"}, "reply_to_user": {"reputation": 88, "user_id": 11087691, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wxIACMmqrZk/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQO05PiYyMqm2LvklLJCPr2jPFuKxg/mo/photo.jpg?sz=128", "display_name": "Rahul Reddy", "link": "https://stackoverflow.com/users/11087691/rahul-reddy"}, "edited": false, "score": 0, "creation_date": 1577980537, "post_id": 59547931, "comment_id": 105300381, "body": "Then run the statements separately. That&#39;s what I do."}, {"owner": {"reputation": 88, "user_id": 11087691, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wxIACMmqrZk/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQO05PiYyMqm2LvklLJCPr2jPFuKxg/mo/photo.jpg?sz=128", "display_name": "Rahul Reddy", "link": "https://stackoverflow.com/users/11087691/rahul-reddy"}, "edited": false, "score": 0, "creation_date": 1577982944, "post_id": 59547931, "comment_id": 105301450, "body": "Yes @Bill Karwin !!"}], "tags": [], "owner": {"reputation": 458695, "user_id": 20860, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/iavmP.jpg?s=128&g=1", "display_name": "Bill Karwin", "link": "https://stackoverflow.com/users/20860/bill-karwin"}, "is_accepted": false, "score": 0, "last_activity_date": 1577821346, "creation_date": 1577821346, "answer_id": 59547931, "question_id": 59547540, "link": "https://stackoverflow.com/questions/59547540/python-errorcommands-out-of-sync-you-cant-run-this-command-now/59547931#59547931", "title": "Python Error:Commands out of sync; you can&#39;t run this command now", "body": "<p>Based on searching past Stack Overflow questions related to the error:</p>\n\n<blockquote>\n  <p>Commands out of sync; you can't run this command now</p>\n</blockquote>\n\n<p>This problem is caused by executing multiple SQL statements in the same call to <code>execute()</code>. You can't do that unless you pass the argument <code>multi=True</code>.</p>\n\n<p>This is the same solution as the one reported in <a href=\"https://stackoverflow.com/questions/51040054/commands-out-of-sync-you-cant-run-this-command-now\">Commands out of sync you can&#39;t run this command now</a></p>\n\n<p>But there is no reason to use multi-statements. It is easier and more clear to write your code to execute one SQL statement at a time.</p>\n\n<p>The former Engineering Manager for MySQL once told me, \"there is no reason for MySQL to support multi-statements.\" They just make writing code more difficult, and they don't give you any advantage to performance or anything else.</p>\n"}], "owner": {"reputation": 88, "user_id": 11087691, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wxIACMmqrZk/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQO05PiYyMqm2LvklLJCPr2jPFuKxg/mo/photo.jpg?sz=128", "display_name": "Rahul Reddy", "link": "https://stackoverflow.com/users/11087691/rahul-reddy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 115, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1577821346, "creation_date": 1577817812, "last_edit_date": 1577820606, "question_id": 59547540, "link": "https://stackoverflow.com/questions/59547540/python-errorcommands-out-of-sync-you-cant-run-this-command-now", "title": "Python Error:Commands out of sync; you can&#39;t run this command now", "body": "<p>Here is the scenario, \nI am facing the error </p>\n\n<pre><code>Error:Commands out of sync; you can't run this command now\n</code></pre>\n\n<p>I need to pass the string to MYSQL which is a mixture of double and Single quotes. But when the mysql parsing the string it couldnt process the parameters because Python converting <code>\"\"</code> to <code>''</code>.\nfor example </p>\n\n<pre><code>temp = \"users= JSON_ARRAY_APPEND(users, '$', 'user1'), users= JSON_ARRAY_APPEND(users, '$', 'user2')\"\n</code></pre>\n\n<p>converted to</p>\n\n<pre><code>temp = 'users= JSON_ARRAY_APPEND(users, \\'$\\', \\'user1\\'), users= JSON_ARRAY_APPEND(users, \\'$\\', \\'user2\\')'\n\n\n\nsql = \"Insert into User(internal_id, users) values(16, IFNULL(users-&gt;'$',JSON_ARRAY())); Update User SET \" + temp + \" where internal_id = 16;\"\n</code></pre>\n\n<p>How to hanndle this Scenario?\nThanks</p>\n"}, {"tags": ["python", "python-3.x", "tkinter", "openpyxl"], "comments": [{"owner": {"reputation": 1380, "user_id": 3411556, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ff0dec229b9e82a5a37420bdbcef6266?s=128&d=identicon&r=PG&f=1", "display_name": "alamoot", "link": "https://stackoverflow.com/users/3411556/alamoot"}, "edited": false, "score": 0, "creation_date": 1577817510, "post_id": 59547493, "comment_id": 105264059, "body": "Welcome to stackoverflow. Can you show us the code you&#39;ve written?"}, {"owner": {"reputation": 1, "user_id": 12633563, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAfcOmhrXZTE7Dc98BiMqhV6THLsb_8a7_LarZXlg=k-s128", "display_name": "MarTCM", "link": "https://stackoverflow.com/users/12633563/martcm"}, "reply_to_user": {"reputation": 1380, "user_id": 3411556, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ff0dec229b9e82a5a37420bdbcef6266?s=128&d=identicon&r=PG&f=1", "display_name": "alamoot", "link": "https://stackoverflow.com/users/3411556/alamoot"}, "edited": false, "score": 0, "creation_date": 1577817670, "post_id": 59547493, "comment_id": 105264106, "body": "it is pretty long... and I am new here I dont know how to upload my code."}, {"owner": {"reputation": 1, "user_id": 12633563, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAfcOmhrXZTE7Dc98BiMqhV6THLsb_8a7_LarZXlg=k-s128", "display_name": "MarTCM", "link": "https://stackoverflow.com/users/12633563/martcm"}, "reply_to_user": {"reputation": 1380, "user_id": 3411556, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ff0dec229b9e82a5a37420bdbcef6266?s=128&d=identicon&r=PG&f=1", "display_name": "alamoot", "link": "https://stackoverflow.com/users/3411556/alamoot"}, "edited": false, "score": 0, "creation_date": 1577817838, "post_id": 59547493, "comment_id": 105264140, "body": "here it is : <a href=\"https://pastebin.com/FdzWu1iD\" rel=\"nofollow noreferrer\">pastebin.com/FdzWu1iD</a>"}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1577818784, "post_id": 59547493, "comment_id": 105264351, "body": "We don&#39;t want all your code. We want you to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> directly in your question that has as few lines as possible to illustrate the problem. Show us where you&#39;re loading file and where you&#39;re saving the file."}, {"owner": {"reputation": 1, "user_id": 12633563, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAfcOmhrXZTE7Dc98BiMqhV6THLsb_8a7_LarZXlg=k-s128", "display_name": "MarTCM", "link": "https://stackoverflow.com/users/12633563/martcm"}, "edited": false, "score": 0, "creation_date": 1577819230, "post_id": 59547493, "comment_id": 105264431, "body": "<a href=\"https://pastebin.com/dPeWK4iu\" rel=\"nofollow noreferrer\">pastebin.com/dPeWK4iu</a> here it is!"}, {"owner": {"reputation": 1, "user_id": 12633563, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAfcOmhrXZTE7Dc98BiMqhV6THLsb_8a7_LarZXlg=k-s128", "display_name": "MarTCM", "link": "https://stackoverflow.com/users/12633563/martcm"}, "edited": false, "score": 0, "creation_date": 1577819266, "post_id": 59547493, "comment_id": 105264439, "body": "I am trying to modify a cell in an existing spreadsheet."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 12633563, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAfcOmhrXZTE7Dc98BiMqhV6THLsb_8a7_LarZXlg=k-s128", "display_name": "MarTCM", "link": "https://stackoverflow.com/users/12633563/martcm"}, "is_accepted": false, "score": -1, "last_activity_date": 1577820550, "creation_date": 1577820550, "answer_id": 59547842, "question_id": 59547493, "link": "https://stackoverflow.com/questions/59547493/cell-value-returns-to-original-state-after-closing-the-program/59547842#59547842", "title": "cell value returns to original state after closing the program", "body": "<p>To fix it I had to add this:\nwb.save(\"Products.xlsx\")\nThx Everyone!</p>\n"}], "owner": {"reputation": 1, "user_id": 12633563, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAfcOmhrXZTE7Dc98BiMqhV6THLsb_8a7_LarZXlg=k-s128", "display_name": "MarTCM", "link": "https://stackoverflow.com/users/12633563/martcm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 22, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1577820550, "creation_date": 1577817274, "question_id": 59547493, "link": "https://stackoverflow.com/questions/59547493/cell-value-returns-to-original-state-after-closing-the-program", "title": "cell value returns to original state after closing the program", "body": "<p>So I'm trying to make a program that can edit cell values but apparently when I edit a cell its value changes In the program but not in excel spreadsheet so basically when I reopen the program it returns to the previous value.</p>\n\n<p>Ex: if I change the value of a cell to 6 when I reopen the program it returns to its original one for example 2. </p>\n\n<p>Note: I am using openpyxl and Tkinter.</p>\n"}, {"tags": ["python", "terminal", "alpha-vantage"], "comments": [{"owner": {"reputation": 185, "user_id": 6226201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b1fe643279bcdb12775babdbfec6a8a?s=128&d=identicon&r=PG&f=1", "display_name": "Bailey Kocin", "link": "https://stackoverflow.com/users/6226201/bailey-kocin"}, "edited": false, "score": 0, "creation_date": 1577817352, "post_id": 59547486, "comment_id": 105264019, "body": "get_daily is an instance method so it has the &#39;self&#39; parameter. You need an instance (object) of type TimeSeries to call it."}], "answers": [{"tags": [], "owner": {"reputation": 1670, "user_id": 11969592, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBoOme-8LYvBpShhvFYE0mbPPJgN6oF6XbRDfPG=k-s128", "display_name": "Patrick Collins", "link": "https://stackoverflow.com/users/11969592/patrick-collins"}, "is_accepted": true, "score": 1, "last_activity_date": 1577822557, "creation_date": 1577822557, "answer_id": 59548055, "question_id": 59547486, "link": "https://stackoverflow.com/questions/59547486/alpha-vantage-daily-information-call-import-error/59548055#59548055", "title": "Alpha Vantage Daily Information Call Import Error", "body": "<p>Close, as Bailey Kocin mentioned, you have to create an instance of the TimeSeries object and then call the function on that instance.</p>\n\n<p>Try this instead:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>&gt;&gt;&gt; from alpha_vantage.timeseries import TimeSeries\n&gt;&gt;&gt; API_KEY = 'XXXXXXXX'\n&gt;&gt;&gt; import matplotlib.pyplot as plt\n&gt;&gt;&gt; ts = TimeSeries(key=API_KEY)\n&gt;&gt;&gt; ts.get_daily(symbol = 'MSFT', outputsize = 'full')\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 10941952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29d69e530ae13194e93e1531b9acc3f8?s=128&d=identicon&r=PG&f=1", "display_name": "Suren Grig", "link": "https://stackoverflow.com/users/10941952/suren-grig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 192, "favorite_count": 0, "accepted_answer_id": 59548055, "answer_count": 1, "score": 0, "last_activity_date": 1577822557, "creation_date": 1577817179, "question_id": 59547486, "link": "https://stackoverflow.com/questions/59547486/alpha-vantage-daily-information-call-import-error", "title": "Alpha Vantage Daily Information Call Import Error", "body": "<p>I have recently attempted to utilise Alpha Vantage, a financial API, to attain stock market information concerning a provided stock, Microsoft; in order to complete this, I have utilised the module information provided upon the official module documentation website, displayed below:</p>\n\n<p><a href=\"https://alpha-vantage.readthedocs.io/en/latest/source/alpha_vantage.html#module-alpha_vantage\" rel=\"nofollow noreferrer\">https://alpha-vantage.readthedocs.io/en/latest/source/alpha_vantage.html#module-alpha_vantage</a></p>\n\n<p>Within this particular website, the official standard reference to calling daily data for a particular stock is listed as the following:</p>\n\n<p>\"get_daily(*args, **kwargs)</p>\n\n<p>Return daily time series in two json objects as data and meta_data. It raises ValueError when problems arise</p>\n\n<p>Keyword Arguments:</p>\n\n<p>symbol \u2013 the symbol for the equity we want to get its data\noutputsize \u2013 The size of the call, supported values are \u2018compact\u2019 and \u2018full; the first returns the last 100 points in the data series, and \u2018full\u2019 returns the full-length daily times series, commonly above 1MB (default \u2018compact\u2019)\"</p>\n\n<p>In addition to this, I followed the previously referenced instructions upon the website, which mandated the establishment of an environmental or conditional variable for the placement of the API key one is utilising to access the Alpha Vantage API. With such a key, I entered the Python shell via the MacOS terminal, utilising the command 'python'. Following this, I wrote the following lines of code, utilising all conditional variables listed:</p>\n\n<pre><code>&gt;&gt;&gt; from alpha_vantage.timeseries import TimeSeries\n&gt;&gt;&gt; API_KEY = '9DE8M4Z80PTU2272'\n&gt;&gt;&gt; import matplotlib.pyplot as plt\n&gt;&gt;&gt; stock = TimeSeries.get_daily(key = API_KEY, symbol = 'MSFT', outputsize = 'full')\n</code></pre>\n\n<p>However, the shell within the terminal provided the following error message:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nTypeError: _format_wrapper() missing 1 required positional argument: 'self'\n</code></pre>\n\n<p>Having provided all necessary variables for the utilisation of the module, as stated upon the official website, I am unsure of the source of this error with regards to the aforementioned program. Would one happen to know why it is providing the following error? I am utilising the alpha_vantage library within the Python shell via the MacOS terminal. Thank you for your assistance.</p>\n"}, {"tags": ["python", "image-processing", "pytorch", "mask", "tensor"], "answers": [{"tags": [], "owner": {"reputation": 592, "user_id": 6676139, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ebd78d89c7ed1d0e9b56897a368185d7?s=128&d=identicon&r=PG&f=1", "display_name": "ProGamerGov", "link": "https://stackoverflow.com/users/6676139/progamergov"}, "is_accepted": true, "score": 0, "last_activity_date": 1577828466, "creation_date": 1577828466, "answer_id": 59548633, "question_id": 59547464, "link": "https://stackoverflow.com/questions/59547464/how-do-i-blend-together-tensors-in-patterns-other-than-2x2/59548633#59548633", "title": "How do I blend together tensors in patterns other than 2x2?", "body": "<p>The code now works with some changes:</p>\n\n<pre><code>import torch\nfrom PIL import Image\nimport torchvision.transforms as transforms\n\n\ndef preprocess(image_name, image_size):\n    image = Image.open(image_name).convert('RGB')\n    if type(image_size) is not tuple:\n        image_size = tuple([int((float(image_size) / max(image.size))*x) for x in (image.height, image.width)])\n    Loader = transforms.Compose([transforms.Resize(image_size), transforms.ToTensor()])\n    tensor = (Loader(image) * 256).unsqueeze(0)\n    return tensor\n\ndef deprocess(output_tensor):\n    output_tensor = output_tensor.clone().squeeze(0).cpu() / 256\n    output_tensor.clamp_(0, 1)\n    Image2PIL = transforms.ToPILImage()\n    image = Image2PIL(output_tensor.cpu())\n    return image\n\n\n\n\ndef prepare_tile(tile, overlap, side='both'):\n    h, w = tile.size(2), tile.size(3)\n    lin_mask_left = torch.linspace(0,1,overlap).repeat(h,1).repeat(3,1,1).unsqueeze(0)\n    lin_mask_right = torch.linspace(1,0,overlap).repeat(h,1).repeat(3,1,1).unsqueeze(0)\n    if side == 'both' or side == 'right':\n        tile[:,:,:,w-overlap:] = tile[:,:,:,w-overlap:] * lin_mask_right\n    if side == 'both' or side == 'left':\n        tile[:,:,:,:overlap] = tile[:,:,:,:overlap] * lin_mask_left \n    return tile\n\n\ndef calc_length(w, overlap, rows):\n    count = 0\n    l_max = w\n    for y in range(rows[0]):       \n        for x in range(rows[1]):        \n            if count % rows[1] != 0:\n                l_max += w-overlap\n                l_min = l_max - w\n            else:  \n                l_max = w\n            count+=1 \n    return l_max\n\ndef overlay_tiles(tile_list, rows, overlap):        \n    c = 1\n    f_tiles = []\n    base_length = 0\n    for i, tile in enumerate(tile_list):\n        if c == 1:    \n             f_tile = prepare_tile(tile.clone(), overlap, side='right')\n        elif c == rows[1]:\n             f_tile = prepare_tile(tile.clone(), overlap, side='left')\n        elif c &gt; 0 and c &lt; rows[1]:\n             f_tile = prepare_tile(tile.clone(), overlap, side='both')\n        f_tiles.append(f_tile)  \n        if c == rows[1]:\n             c = 0\n        c+=1\n\n    w = tile_list[0].size(3)\n    base_length = calc_length(w, overlap, rows)\n    base_tensor = torch.zeros(3, tile_list[0].size(2), base_length).unsqueeze(0)\n\n    row_list = []\n    for row in range(rows[0]):\n        row_list.append(base_tensor.clone())    \n\n    row_num, num_tiles = 0, 0\n    l_max = w\n    for y in range(rows[0]):       \n        for x in range(rows[1]):        \n            if num_tiles % rows[1] != 0:\n                l_max += w-overlap\n                l_min = l_max - w\n                print(num_tiles, l_max, l_min)\n                row_list[row_num][:, :, :, l_min:l_max] = row_list[row_num][:, :, :, l_min:l_max] + f_tiles[num_tiles]\n            else:\n                row_list[row_num][:, :, :, :w] = f_tiles[num_tiles]  \n                l_max = w\n            num_tiles+=1 \n        row_num+=1  \n    return row_list\n\n\ndef prepare_row(row_tensor, overlap, side='both'):\n    lin_mask_top = torch.linspace(0,1,overlap).repeat(row_tensor.size(3),1).rot90(3).repeat(3,1,1).unsqueeze(0)\n    lin_mask_bottom = torch.linspace(1,0,overlap).repeat(row_tensor.size(3),1).rot90(3).repeat(3,1,1).unsqueeze(0)\n    if side == 'both' or side == 'top':\n        row_tensor[:,:,:overlap,:] = row_tensor[:,:,:overlap,:]  * lin_mask_top\n    if side == 'both' or side == 'bottom':\n        row_tensor[:,:,overlap:,:] = row_tensor[:,:,overlap:,:] * lin_mask_bottom\n    return row_tensor\n\n\ndef calc_height(h, overlap, rows):\n    num_rows = 0\n    l_max = h\n    for y in range(rows[0]):        \n            if num_rows &gt; 0:\n                l_max += (h-overlap)\n                l_min = l_max - h\n            else: \n                l_max = h\n            num_rows+=1  \n    return l_max\n\ndef overlay_rows(row_list, rows, overlap):\n    c = 1\n    f_rows = []\n    base_height = 0\n    for i, row_tensor in enumerate(row_list):\n        if c == 1:    \n             f_row = prepare_row(row_tensor.clone(), overlap, side='bottom')\n        elif c == rows[0]:\n             f_row = prepare_row(row_tensor.clone(), overlap, side='top')\n        elif c &gt; 0 and c &lt; rows[0]:\n             f_row = prepare_row(row_tensor.clone(), overlap, side='both')\n        f_rows.append(f_row)    \n        if c == rows[0]:\n             c = 0\n        c+=1\n\n\n    h = row_list[0].size(2)\n    base_height = calc_height(h, overlap, rows)          \n    base_tensor = torch.zeros(3, base_height, row_list[0].size(3)).unsqueeze(0)\n\n    num_rows = 0\n    l_max = row_list[0].size(3)\n    for y in range(rows[0]):        \n            if num_rows &gt; 0:\n                l_max += (h-overlap)\n                l_min = l_max - h\n                base_tensor[:, :, l_min:l_max, :] = base_tensor[:, :, l_min:l_max, :] + f_rows[num_rows]\n            else:\n                base_tensor[:, :, :h, :] = f_rows[num_rows]  \n                l_max = h\n            num_rows+=1   \n    return base_tensor\n\n\ndef rebuild_image(tensor_list, rows, overlap_hw):\n    row_tensors = overlay_tiles(tensor_list, rows, overlap_hw[1])\n    full_tensor = overlay_rows(row_tensors, rows, overlap_hw[0])\n    return full_tensor\n\ntest_tensor_1 = preprocess('brad_pitt.jpg', (1080,720))\ntest_tensor_2 = preprocess('starry_night_google.jpg', (1080,720))\n\n\n\nprint(\"2x2 Test\")\ntensor_list = [test_tensor_1.clone(), test_tensor_2.clone(), test_tensor_1.clone(), test_tensor_2.clone()]\nrows = [2, 2]\noverlap = [540, 260]\ncomplete_tensor = rebuild_image(tensor_list, rows, overlap)\n\nft = deprocess(complete_tensor.clone())\nft.save('complete_tensor_2x2.png')\n\n\nprint(\"3x3 Test\")\ntensor_list = [test_tensor_1.clone(), test_tensor_2.clone(),test_tensor_1.clone(), \\\ntest_tensor_1.clone(), test_tensor_2.clone(),test_tensor_1.clone(), \\\ntest_tensor_1.clone(), test_tensor_2.clone(),test_tensor_1.clone(),]\nrows = [3, 3]\noverlap = [540, 540]\ncomplete_tensor = rebuild_image(tensor_list, rows, overlap)\n\nft = deprocess(complete_tensor.clone())\nft.save('complete_tensor_3x3.png')\n\nprint(\"3x4 Test\")\ntensor_list = [test_tensor_1.clone(), test_tensor_2.clone(), test_tensor_1.clone(), test_tensor_2.clone(), \\\ntest_tensor_1.clone(), test_tensor_2.clone(), test_tensor_1.clone(), test_tensor_2.clone(), \\\ntest_tensor_1.clone(), test_tensor_2.clone(), test_tensor_1.clone(), test_tensor_2.clone()]\nrows = [3, 4]\noverlap = [540, 260]\ncomplete_tensor = rebuild_image(tensor_list, rows, overlap)\n\nft = deprocess(complete_tensor.clone())\nft.save('complete_tensor_3x4.png')\n\n\nprint(\"4x3 Test\")\ntensor_list = [test_tensor_1.clone(), test_tensor_2.clone(), test_tensor_1.clone(), \\\ntest_tensor_1.clone(), test_tensor_2.clone(), test_tensor_1.clone(), \\\ntest_tensor_1.clone(), test_tensor_2.clone(), test_tensor_1.clone(), \\\ntest_tensor_1.clone(), test_tensor_2.clone(), test_tensor_1.clone()]\nrows = [4, 3]\noverlap = [540, 260]\ncomplete_tensor = rebuild_image(tensor_list, rows, overlap)\n\nft = deprocess(complete_tensor.clone())\nft.save('complete_tensor_4x3.png')\n\nprint(\"4x4 Test\")\ntensor_list = [test_tensor_1.clone(), test_tensor_2.clone(), test_tensor_1.clone(), test_tensor_2.clone(), \\\ntest_tensor_1.clone(), test_tensor_2.clone(), test_tensor_1.clone(), test_tensor_2.clone(), \\\ntest_tensor_1.clone(), test_tensor_2.clone(), test_tensor_1.clone(), test_tensor_2.clone(), \\\ntest_tensor_1.clone(), test_tensor_2.clone(), test_tensor_1.clone(), test_tensor_2.clone()]\nrows = [4, 4]\noverlap = [540, 260]\ncomplete_tensor = rebuild_image(tensor_list, rows, overlap)\n\nft = deprocess(complete_tensor.clone())\nft.save('complete_tensor_4x4.png')\n</code></pre>\n"}], "owner": {"reputation": 592, "user_id": 6676139, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ebd78d89c7ed1d0e9b56897a368185d7?s=128&d=identicon&r=PG&f=1", "display_name": "ProGamerGov", "link": "https://stackoverflow.com/users/6676139/progamergov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 59548633, "answer_count": 1, "score": 0, "last_activity_date": 1577828466, "creation_date": 1577816991, "last_edit_date": 1577822407, "question_id": 59547464, "link": "https://stackoverflow.com/questions/59547464/how-do-i-blend-together-tensors-in-patterns-other-than-2x2", "title": "How do I blend together tensors in patterns other than 2x2?", "body": "<p>I have created code that blends tensors together, by first blending them together into rows and then blending the rows together into the final output. It works well for 4 tensors in a 2x2 pattern, but it fails to do a 2x3 (6 tensors), 3x3 (9 tensors), 4x4 (16 tensors) pattern. </p>\n\n<p>The tensors are in the form of (B x C x H x W), where B is batch size, C is channels, H is height, and W is width.</p>\n\n<p>For both the tiles to rows (<code>tile_overlay()</code>), and rows to final image (<code>row_overlay()</code>), I create a base tensor that I add the tiles/rows to. I suspect the issue with my code lies either with how I get the base tensor's dimensions, how I track where to put the rows/tiles on the base tensor, or the issue with both of those things.</p>\n\n<pre><code>import torch\nfrom PIL import Image\nimport torchvision.transforms as transforms\n\n\ndef preprocess(image_name, image_size):\n    image = Image.open(image_name).convert('RGB')\n    if type(image_size) is not tuple:\n        image_size = tuple([int((float(image_size) / max(image.size))*x) for x in (image.height, image.width)])\n    Loader = transforms.Compose([transforms.Resize(image_size), transforms.ToTensor()])\n    tensor = (Loader(image) * 256).unsqueeze(0)\n    return tensor\n\ndef deprocess(output_tensor):\n    output_tensor = output_tensor.clone().squeeze(0).cpu() / 256\n    output_tensor.clamp_(0, 1)\n    Image2PIL = transforms.ToPILImage()\n    image = Image2PIL(output_tensor.cpu())\n    return image\n\n\n\n\ndef prepare_tile(tile, overlap, side='both'):\n    lin_mask_left = torch.linspace(0,1,overlap).repeat(tile.size(3),1).repeat(3,1,1).unsqueeze(0)\n    lin_mask_right = torch.linspace(1,0,overlap).repeat(tile.size(3),1).repeat(3,1,1).unsqueeze(0)\n    if side == 'both' or side == 'right':\n        tile[:,:,:,overlap:] = tile[:,:,:,overlap:] * lin_mask_right\n    if side == 'both' or side == 'left':\n        tile[:,:,:,:overlap] = tile[:,:,:,:overlap] * lin_mask_left \n    return tile\n\ndef overlay_tiles(tile_list, rows, overlap):        \n    c = 1\n    f_tiles = []\n    base_length = 0\n    for i, tile in enumerate(tile_list):\n        if c == 1:    \n             f_tile = prepare_tile(tile.clone(), overlap, side='right')\n             if i + 1&lt;= rows[1]:\n                 base_length += tile.clone().size(3) - overlap\n        elif c == rows[1]:\n             f_tile = prepare_tile(tile.clone(), overlap, side='left')\n             if i + 1&lt;= rows[1]:\n                 base_length += tile.size(3) - overlap\n        elif c &gt; 0 and c &lt; rows[1]:\n             f_tile = prepare_tile(tile.clone(), overlap, side='both')\n             if i + 1&lt;= rows[1]:\n                 base_length += tile.size(3) - (overlap*2)\n        f_tiles.append(f_tile)  \n        if c == rows[1]:\n             c = 0\n        c+=1\n\n    base_length += overlap           \n    base_tensor = torch.zeros(3, tile_list[0].size(2), base_length).unsqueeze(0)\n    row_list = []\n    for row in range(rows[1]):\n        row_list.append(base_tensor.clone())\n\n    row_val, num_tiles = 0, 0\n    l_max = tile_list[0].size(3)\n    for y in range(rows[0]):       \n        for x in range(rows[1]):        \n            if num_tiles % rows[1] != 0:\n                l_max += (f_tiles[num_tiles].size(3)-overlap)*x\n                l_min = l_max - f_tiles[num_tiles].size(3)\n                row_list[row_val][:, :, :, l_min:l_max] = row_list[row_val][:, :, :, l_min:l_max] + f_tiles[num_tiles]\n            else:\n                row_list[row_val][:, :, :, :f_tiles[num_tiles].size(3)] = f_tiles[num_tiles]  \n                l_max = tile_list[0].size(3)\n            num_tiles+=1 \n        row_val+=1  \n    return row_list\n\n\ndef prepare_row(row_tensor, overlap, side='both'):\n    lin_mask_top = torch.linspace(0,1,overlap).repeat(row_tensor.size(3),1).rot90(3).repeat(3,1,1).unsqueeze(0)\n    lin_mask_bottom = torch.linspace(1,0,overlap).repeat(row_tensor.size(3),1).rot90(3).repeat(3,1,1).unsqueeze(0)\n    if side == 'both' or side == 'top':\n        row_tensor[:,:,:overlap,:] = row_tensor[:,:,:overlap,:]  * lin_mask_top\n    if side == 'both' or side == 'bottom':\n        row_tensor[:,:,overlap:,:] = row_tensor[:,:,overlap:,:] * lin_mask_bottom   \n    return row_tensor\n\ndef overlay_rows(row_list, rows, overlap):\n    c = 1\n    f_rows = []\n    base_height = 0\n    for i, row_tensor in enumerate(row_list):\n        if c == 1:    \n             f_row = prepare_row(row_tensor.clone(), overlap, side='bottom')\n             if i + 1&lt;= rows[0]:\n                 base_height += row_tensor.size(2) - overlap\n        elif c == rows[1]:\n             f_row = prepare_row(row_tensor.clone(), overlap, side='top')\n             if i + 1&lt;= rows[0]:\n                 base_height += row_tensor.size(2) - overlap\n        elif c &gt; 0 and c &lt; rows[0]:\n             f_row = prepare_row(row_tensor.clone(), overlap, side='both')\n             if i + 1&lt;= rows[0]:\n                 base_height += tile.size(2) - (overlap*2)\n        f_rows.append(f_row)    \n        if c == rows[0]:\n             c = 0\n        c+=1\n\n    base_height += overlap           \n    base_tensor = torch.zeros(3, base_height, row_list[0].size(3)).unsqueeze(0)\n\n    num_rows = 0\n    l_max = row_list[0].size(3)\n    for y in range(rows[0]):        \n            if num_rows &gt; 0:\n                l_max += (f_rows[num_rows].size(2)-overlap)*y\n                l_min = l_max - f_rows[num_rows].size(2)\n                base_tensor[:, :, l_min:l_max, :] = base_tensor[:, :, l_min:l_max, :] + f_rows[num_rows]\n            else:\n                base_tensor[:, :, :f_rows[num_rows].size(2), :] = f_rows[num_rows]  \n                l_max = row_list[0].size(2)\n            num_rows+=1   \n    return base_tensor\n\n\ndef rebuild_image(tensor_list, rows, overlap_hw):\n    row_tensors = overlay_tiles(tensor_list, rows, overlap_hw[1])\n    full_tensor = overlay_rows(row_tensors, rows, overlap_hw[0])\n    return full_tensor\n\ntest_tensor_1 = preprocess('brad_pitt.jpg', (1080,1080))\ntest_tensor_2 = preprocess('starry_night_google.jpg', (1080,1080))\n\n\ntensor_list = [test_tensor_1.clone(), test_tensor_2.clone(), test_tensor_1.clone(), test_tensor_2.clone()]\nrows = [2, 2]\noverlap = [540, 540]\ncomplete_tensor = rebuild_image(tensor_list, rows, overlap)\n\nft = deprocess(complete_tensor.clone())\nft.save('complete_tensor_2x2.png')\n\n\ntensor_list = [test_tensor_1.clone(), test_tensor_2.clone(),test_tensor_1.clone(), \\\ntest_tensor_1.clone(), test_tensor_2.clone(),test_tensor_1.clone(), \\\ntest_tensor_1.clone(), test_tensor_2.clone(),test_tensor_1.clone(),]\nrows = [3, 3]\noverlap = [540, 540]\ncomplete_tensor = rebuild_image(tensor_list, rows, overlap)\n\nft = deprocess(complete_tensor.clone())\nft.save('complete_tensor_3x3.png')\n\n\n\ntensor_list = [test_tensor_1.clone(), test_tensor_2.clone(), test_tensor_1.clone(), test_tensor_2.clone(), \\\ntest_tensor_1.clone(), test_tensor_2.clone(), test_tensor_1.clone(), test_tensor_2.clone(), \\\ntest_tensor_1.clone(), test_tensor_2.clone(), test_tensor_1.clone(), test_tensor_2.clone(), \\\ntest_tensor_1.clone(), test_tensor_2.clone(), test_tensor_1.clone(), test_tensor_2.clone()]\nrows = [4, 4]\noverlap = [540, 540]\ncomplete_tensor = rebuild_image(tensor_list, rows, overlap)\n\nft = deprocess(complete_tensor.clone())\nft.save('complete_tensor_4x4.png')\n</code></pre>\n\n<p>Running the above code will result in this error message when trying to create the 3x3 output:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"t0.py\", line 148, in &lt;module&gt;\n    complete_tensor = rebuild_image(tensor_list, rows, overlap)\n  File \"t0.py\", line 126, in rebuild_image\n    row_tensors = overlay_tiles(tensor_list, rows, overlap_hw[1])\n  File \"t0.py\", line 68, in overlay_tiles\n    row_list[row_val][:, :, :, l_min:l_max] = row_list[row_val][:, :, :, l_min:l_max] + f_tiles[num_tiles]\nRuntimeError: The size of tensor a (0) must match the size of tensor b (1080) at non-singleton dimension 3\n</code></pre>\n\n<p>This is an example of what the 2x2 output looks like: </p>\n\n<p><a href=\"https://i.stack.imgur.com/avklL.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/avklL.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>And this is a visual diagram with two examples of what I am doing:</p>\n\n<p><img src=\"https://i.stack.imgur.com/qZFNx.png\" alt=\"\"></p>\n"}, {"tags": ["python", "apache-spark", "pyspark", "apache-kafka", "spark-structured-streaming"], "comments": [{"owner": {"reputation": 57, "user_id": 3953238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e125c4925ec454144efa38446dc060ff?s=128&d=identicon&r=PG&f=1", "display_name": "Raanan Ikar", "link": "https://stackoverflow.com/users/3953238/raanan-ikar"}, "edited": false, "score": 1, "creation_date": 1577821663, "post_id": 59547463, "comment_id": 105264941, "body": "This has been resolved. I had to enable DEBUG, and noticed there was a connection issue, so updating the above port to 9092 resolved the issue. I had used the same port that was expected for Spark Streaming, as I did for this exercise which is Structured Streaming."}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 3953238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e125c4925ec454144efa38446dc060ff?s=128&d=identicon&r=PG&f=1", "display_name": "Raanan Ikar", "link": "https://stackoverflow.com/users/3953238/raanan-ikar"}, "edited": false, "score": 0, "creation_date": 1577924835, "post_id": 59549842, "comment_id": 105282726, "body": "Hi Cricket, yes, after updating all these settings I begun writeStream confirming that I am able to see values &quot;the kafka topic messages in json encoding. However, it is when I create queries for json columns i which I provided the schema as you can see above, that I now get only null values. I am able to for example see velocity readings performing a query for the velocity column ... Do you have any ideas here?"}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "reply_to_user": {"reputation": 57, "user_id": 3953238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e125c4925ec454144efa38446dc060ff?s=128&d=identicon&r=PG&f=1", "display_name": "Raanan Ikar", "link": "https://stackoverflow.com/users/3953238/raanan-ikar"}, "edited": false, "score": 0, "creation_date": 1577940915, "post_id": 59549842, "comment_id": 105285107, "body": "You may want to accept this answer and post a new question with these issues and your new code. But typically your schema is wrong if you get nulls. You didn&#39;t show your messages in the question, so I&#39;m not sure what the solution would be"}], "tags": [], "owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "is_accepted": true, "score": 5, "last_activity_date": 1577849287, "creation_date": 1577849287, "answer_id": 59549842, "question_id": 59547463, "link": "https://stackoverflow.com/questions/59547463/pyspark-structured-streaming-from-kafka-does-not-output-to-console-for-debugging/59549842#59549842", "title": "pySpark Structured Streaming from Kafka does not output to console for debugging", "body": "<p><code>kafka.bootstrap.servers</code> is the <strong>Kafka broker</strong> address (default port 9092), not Zookeeper (port 2181)</p>\n\n<p>Also note your starting offsets are the latest, so you must produce data after starting the streaming application. </p>\n\n<p>If you want to see existing topic data, use the earliest offsets. </p>\n"}], "owner": {"reputation": 57, "user_id": 3953238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e125c4925ec454144efa38446dc060ff?s=128&d=identicon&r=PG&f=1", "display_name": "Raanan Ikar", "link": "https://stackoverflow.com/users/3953238/raanan-ikar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 787, "favorite_count": 0, "accepted_answer_id": 59549842, "answer_count": 1, "score": 4, "last_activity_date": 1577849345, "creation_date": 1577816989, "last_edit_date": 1577849345, "question_id": 59547463, "link": "https://stackoverflow.com/questions/59547463/pyspark-structured-streaming-from-kafka-does-not-output-to-console-for-debugging", "title": "pySpark Structured Streaming from Kafka does not output to console for debugging", "body": "<p>Below is my code. I have tried many different select variations, and yet the app runs, but without showing messages which are being written every second.  I have a Spark Streaming example which using pprint() confirms kafka is in fact getting messages every second. The messages in Kafka are JSON formatted, see the schema for the field/column labels:</p>\n\n<pre><code>from pyspark.sql.functions import *\nfrom pyspark.sql.types import *\nimport statistics\n\n\nKAFKA_TOPIC = \"vehicle_events_fast_testdata\"\nKAFKA_SERVER = \"10.2.0.6:2181\"\n\nif __name__ == \"__main__\":\n    print(\"NXB PySpark Structured Streaming with Kafka Demo Started\")\n\n    spark = SparkSession \\\n        .builder \\\n        .appName(\"PySpark Structured Streaming with Kafka Demo\") \\\n        .master(\"local[*]\") \\\n        .config(\"spark.jars\", \"/home/cldr/streams-dev/libs/spark-sql-kafka-0-10_2.11-2.4.4.jar,/home/cldr/streams-dev/libs/kafka-clients-2.0.0.jar\") \\\n        .config(\"spark.executor.extraClassPath\", \"/home/cldr/streams-dev/libs/spark-sql-kafka-0-10_2.11-2.4.4.jar:/home/cldr/streams-dev/libs/kafka-clients-2.0.0.jar\") \\\n        .config(\"spark.executor.extraLibrary\", \"/home/cldr/streams-dev/libs/spark-sql-kafka-0-10_2.11-2.4.4.jar:/home/cldr/streams-dev/libs/kafka-clients-2.0.0.jar\") \\\n        .config(\"spark.driver.extraClassPath\", \"/home/cldr/streams-dev/libs/spark-sql-kafka-0-10_2.11-2.4.4.jar:/home/cldr/streams-dev/libs/kafka-clients-2.0.0.jar\") \\\n        .getOrCreate()\n\n    spark.sparkContext.setLogLevel(\"ERROR\")\n\n    schema = StructType() \\\n        .add(\"WheelAngle\", IntegerType()) \\\n        .add(\"acceleration\", IntegerType()) \\\n        .add(\"heading\", IntegerType()) \\\n        .add(\"reading_time\", IntegerType()) \\\n        .add(\"tractionForce\", IntegerType()) \\\n        .add(\"vel_latitudinal\", IntegerType()) \\\n        .add(\"vel_longitudinal\", IntegerType()) \\\n        .add(\"velocity\", IntegerType()) \\\n        .add(\"x_pos\", IntegerType()) \\\n        .add(\"y_pos\", IntegerType()) \\\n        .add(\"yawrate\", IntegerType())\n\n\n # Construct a streaming DataFrame that reads from testtopic\n    trans_det_df = spark \\\n        .readStream \\\n        .format(\"kafka\") \\\n        .option(\"kafka.bootstrap.servers\", KAFKA_SERVER) \\\n        .option(\"subscribe\", KAFKA_TOPIC) \\\n        .option(\"startingOffsets\", \"latest\") \\\n        .load() \\\n        .selectExpr(\"CAST(value as STRING)\", \"CAST(timestamp as STRING)\",\"CAST(topic as STRING)\")\n\n\n#(from_json(col(\"value\").cast(\"string\"),schema))\n\n    #Q1 =  trans_det_df.select(from_json(col(\"value\"), schema).alias(\"parsed_value\"), \"timestamp\")\n    #Q2 =  trans_det_d.select(\"parsed_value*\", \"timestamp\")\n\n\n    query = trans_det_df.writeStream \\\n            .format(\"console\") \\\n            .option(\"truncate\",\"false\") \\\n            .start() \\\n            .awaitTermination()\n</code></pre>\n"}, {"tags": ["python", "django", "python-3.x", "django-rest-framework"], "answers": [{"comments": [{"owner": {"reputation": 2884, "user_id": 3658166, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/X8dHk.png?s=128&g=1", "display_name": "ninesalt", "link": "https://stackoverflow.com/users/3658166/ninesalt"}, "edited": false, "score": 0, "creation_date": 1577817487, "post_id": 59547506, "comment_id": 105264055, "body": "How come you&#39;re not sorting the article&#39;s order too?"}, {"owner": {"reputation": 2884, "user_id": 3658166, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/X8dHk.png?s=128&g=1", "display_name": "ninesalt", "link": "https://stackoverflow.com/users/3658166/ninesalt"}, "edited": false, "score": 0, "creation_date": 1577817532, "post_id": 59547506, "comment_id": 105264071, "body": "Why section_id?"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 2884, "user_id": 3658166, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/X8dHk.png?s=128&g=1", "display_name": "ninesalt", "link": "https://stackoverflow.com/users/3658166/ninesalt"}, "edited": false, "score": 0, "creation_date": 1577817620, "post_id": 59547506, "comment_id": 105264092, "body": "@ninesalt: because if two <code>section</code>s have the same <code>order</code>, we need to perform a tie-break, such that the sections occur in &quot;bursts&quot;. Otherwise the <code>groupby</code> will fail. <code>groupby</code> has as precondition that the stream of items should appear in &quot;packs&quot; to group them."}, {"owner": {"reputation": 2884, "user_id": 3658166, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/X8dHk.png?s=128&g=1", "display_name": "ninesalt", "link": "https://stackoverflow.com/users/3658166/ninesalt"}, "edited": false, "score": 0, "creation_date": 1577817663, "post_id": 59547506, "comment_id": 105264104, "body": "aha, thats very smart. Shouldnt the id be the last field we sort on though?"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 2884, "user_id": 3658166, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/X8dHk.png?s=128&g=1", "display_name": "ninesalt", "link": "https://stackoverflow.com/users/3658166/ninesalt"}, "edited": false, "score": 0, "creation_date": 1577817779, "post_id": 59547506, "comment_id": 105264129, "body": "@ninesalt: no, since otherwise if the <code>section</code> order is the same, and the <code>article</code> order is different it will appear in different &quot;packs&quot;. But these can still belong to the same <code>section</code>."}, {"owner": {"reputation": 2884, "user_id": 3658166, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/X8dHk.png?s=128&g=1", "display_name": "ninesalt", "link": "https://stackoverflow.com/users/3658166/ninesalt"}, "edited": false, "score": 0, "creation_date": 1577817993, "post_id": 59547506, "comment_id": 105264173, "body": "Ok cool. I believe you&#39;ve answered my question but do you have any idea how I can use this snippet with django rest framework? I have a serializer that serializes individual articles and I have a viewset around them, looks like this snippet is going to change everything I have."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 2884, "user_id": 3658166, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/X8dHk.png?s=128&g=1", "display_name": "ninesalt", "link": "https://stackoverflow.com/users/3658166/ninesalt"}, "edited": false, "score": 0, "creation_date": 1577818325, "post_id": 59547506, "comment_id": 105264260, "body": "@ninesalt: I think you will need to call the serializer on the <code>section</code> and <code>articles</code> in the dictionary comprehension."}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 0, "last_activity_date": 1577817570, "last_edit_date": 1577817570, "creation_date": 1577817426, "answer_id": 59547506, "question_id": 59547462, "link": "https://stackoverflow.com/questions/59547462/how-can-i-write-this-django-query/59547506#59547506", "title": "How can I write this django query?", "body": "<p>A query is normally \"flat\", as in it does not contain hierarchical structures. You can however post-process the objects yourself. We can do that with the <a href=\"https://docs.python.org/3/library/itertools.html#itertools.groupby\" rel=\"nofollow noreferrer\"><strong><code>groupby(..)</code></strong> function [python-doc]</a>:</p>\n\n<pre><code>from itertools import groupby\nfrom operator import attrgetter\n\nqs = Article.objects.select_related(\n    'section'\n).order_by('section__order', 'section_id', 'order')\n\nresult = {\n    section: list(articles)\n    for section, articles in groupby(qs, attrgetter('section'))\n}</code></pre>\n\n<p>Note that although Python dictionaries use insertion order (since <a href=\"/questions/tagged/python-3.7\" class=\"post-tag\" title=\"show questions tagged &#39;python-3.7&#39;\" rel=\"tag\">python-3.7</a>), if you use a different format like JSON, that will not per se respect the insertion order in a different environment (JavaScript, etc.).</p>\n"}, {"tags": [], "owner": {"reputation": 17762, "user_id": 548562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26587173d9156d8ec3114c8700d1b693?s=128&d=identicon&r=PG", "display_name": "Iain Shelvington", "link": "https://stackoverflow.com/users/548562/iain-shelvington"}, "is_accepted": false, "score": 0, "last_activity_date": 1577825790, "creation_date": 1577825790, "answer_id": 59548389, "question_id": 59547462, "link": "https://stackoverflow.com/questions/59547462/how-can-i-write-this-django-query/59548389#59548389", "title": "How can I write this django query?", "body": "<p>If btoth models will always be ordered by the same column then you can add a default ordering to each model's Meta</p>\n\n<pre><code>class ArticleSection(models.Model):\n    class Meta:\n        ordering = ['order']\n\nclass Article(models.Model):\n    class Meta:\n        ordering = ['order']\n</code></pre>\n"}], "owner": {"reputation": 2884, "user_id": 3658166, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/X8dHk.png?s=128&g=1", "display_name": "ninesalt", "link": "https://stackoverflow.com/users/3658166/ninesalt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 59547506, "answer_count": 2, "score": 1, "last_activity_date": 1577825790, "creation_date": 1577816988, "last_edit_date": 1577817374, "question_id": 59547462, "link": "https://stackoverflow.com/questions/59547462/how-can-i-write-this-django-query", "title": "How can I write this django query?", "body": "<p>I have the below models in django which represent articles and their sections. Articles have an order/index that represent the article's respective order in a section and sections have an order too so that they can also be sorted with other sections. </p>\n\n<pre><code>class ArticleSection(models.Model):\n    title = CharField(max_length=50)\n    order = PositiveIntegerField()  # the sections order with other sections\n\n    def __str__(self):\n        return self.title\n\n\nclass Article(models.Model):\n    section = models.ForeignKey(\n        ArticleSection, on_delete=models.CASCADE)\n    content = CharField(max_length=100)\n    order = PositiveIntegerField()  # the articles order in the section its in\n</code></pre>\n\n<p>What I want to do is get a list of articles, sorted by their article order, group them by section and then finally sort by section order. So I essentially the result should look something like this:</p>\n\n<pre><code>{\n    section4: [article1, article2, article20],\n    section8: [article1, article2, article3]\n    ... \n}\n</code></pre>\n\n<p>How can I do this?</p>\n"}, {"tags": ["python", "python-3.x", "pdf", "web-scraping", "download"], "owner": {"reputation": 732, "user_id": 9476628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/511e8edf6080a81b993eeb4f6fca89a4?s=128&d=identicon&r=PG&f=1", "display_name": "jippyjoe4", "link": "https://stackoverflow.com/users/9476628/jippyjoe4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1577816935, "creation_date": 1577816935, "question_id": 59547458, "link": "https://stackoverflow.com/questions/59547458/pdf-files-downloaded-using-urllib-request-urlretrieve-are-corrupted-python-3", "title": "PDF files downloaded using urllib.request.urlretrieve are corrupted (Python 3)", "body": "<p>I have the following HTML code stored in an \"info.txt\" file, which contains links to several PDF files that I want to automatically download:</p>\n\n<p><a href=\"https://drive.google.com/open?id=1_vHA0EO39C5qlaXoDlAR9DzpKMTJyXiz\" rel=\"nofollow noreferrer\">https://drive.google.com/open?id=1_vHA0EO39C5qlaXoDlAR9DzpKMTJyXiz</a></p>\n\n<p>(the HTML code comes from here: <a href=\"https://www.casact.org/admissions/studytools/index.cfm?fa=older\" rel=\"nofollow noreferrer\">https://www.casact.org/admissions/studytools/index.cfm?fa=older</a>)</p>\n\n<p>However, when I run the following Python 3.7 code:</p>\n\n<pre><code>data = open('info.txt').read()\n\nimport re\nimport urllib.request\nimport time\n\nexpr = r'href=\"(.*exam.*pdf)\" rel=\"noreferrer'\n\nfor ii, res in enumerate(re.finditer(expr, data)):\n  if ii &gt;= 2:\n    try:\n      fin = res.group(1)\n      print(fin)\n      path = \" \".join(res.group(1).replace(\"/\",\" \").split(\" \")[-2:])\n      print(path)\n\n      opener=urllib.request.build_opener()\n      opener.addheaders=[('User-Agent','Mozilla/4.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/36.0.1941.0 Safari/537.36')]\n      urllib.request.install_opener(opener)\n\n      urllib.request.urlretrieve(fin, path)\n      time.sleep(3)\n\n    except Exception as e:\n      print(\"failed for: \", fin)\n      print(e)\n</code></pre>\n\n<p>For some reason, the PDF files that it downloads seem to be corrupted (I am unable to view them in chrome or firefox). </p>\n\n<p><a href=\"https://i.stack.imgur.com/T9b9s.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/T9b9s.png\" alt=\"enter image description here\"></a></p>\n\n<p>Can somebody help me understand why these PDF files aren't being downloaded correctly, and what I need to do to fix it?</p>\n"}, {"tags": ["python", "json", "parsing", "design-patterns"], "comments": [{"owner": {"reputation": 10753, "user_id": 1371329, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/oqbUC.png?s=128&g=1", "display_name": "jaco0646", "link": "https://stackoverflow.com/users/1371329/jaco0646"}, "edited": false, "score": 0, "creation_date": 1577833211, "post_id": 59547423, "comment_id": 105267086, "body": "Have you looked at the Interpreter Pattern?"}, {"owner": {"reputation": 29, "user_id": 11251982, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f04282290962a795b02fb657099e991b?s=128&d=identicon&r=PG&f=1", "display_name": "zvikfir", "link": "https://stackoverflow.com/users/11251982/zvikfir"}, "reply_to_user": {"reputation": 10753, "user_id": 1371329, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/oqbUC.png?s=128&g=1", "display_name": "jaco0646", "link": "https://stackoverflow.com/users/1371329/jaco0646"}, "edited": false, "score": 0, "creation_date": 1577862587, "post_id": 59547423, "comment_id": 105270080, "body": "@jaco0646 I looked at it now. It doesn&#39;t seem to be of help. It is also apparently not suited for parsing according to <a href=\"https://sourcemaking.com/design_patterns/interpreter\" rel=\"nofollow noreferrer\">this</a>. &quot;The pattern doesn&#39;t address parsing. When the grammar is very complex, other techniques (such as a parser) are more appropriate.&quot;  Thanks though :)"}], "answers": [{"tags": [], "owner": {"reputation": 29, "user_id": 11251982, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f04282290962a795b02fb657099e991b?s=128&d=identicon&r=PG&f=1", "display_name": "zvikfir", "link": "https://stackoverflow.com/users/11251982/zvikfir"}, "is_accepted": false, "score": 0, "last_activity_date": 1578498870, "creation_date": 1578498870, "answer_id": 59649477, "question_id": 59547423, "link": "https://stackoverflow.com/questions/59547423/design-of-a-parser-of-a-complex-message-structure/59649477#59649477", "title": "Design of a parser of a complex message structure", "body": "<p>I ended up realizing that I made things more complicated than they are.</p>\n\n<p>I tried to build a parser for a complicated language like a programming language, while the format of the messages I'm trying to parse is a lot simpler.</p>\n\n<p>I separated the Message class hierarchy from the parsers, leaving only the get_json and get_txt methods in the messages' hierarchy. Then I built a Parser interface, leaving an option to build several kinds of parsers such as TxtParser, JSONParser, etc. </p>\n"}], "owner": {"reputation": 29, "user_id": 11251982, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f04282290962a795b02fb657099e991b?s=128&d=identicon&r=PG&f=1", "display_name": "zvikfir", "link": "https://stackoverflow.com/users/11251982/zvikfir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1578498870, "creation_date": 1577816714, "last_edit_date": 1577817313, "question_id": 59547423, "link": "https://stackoverflow.com/questions/59547423/design-of-a-parser-of-a-complex-message-structure", "title": "Design of a parser of a complex message structure", "body": "<p>I'm working on a parser that is supposed to convert 1 type of a message from string to JSON, and another type of message from JSON to string.</p>\n\n<p>The 2 types of messages can be expanded to more types further ahead, and have a common structure.</p>\n\n<p><a href=\"https://i.stack.imgur.com/kkuki.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kkuki.png\" alt=\"enter image description here\"></a></p>\n\n<p>So far I've built the structure of the messages using OOP approach. It gives me the flexibility to add more types of messages in the future, and divides the responsibility for each part of the message between the different classes.</p>\n\n<p>I created an interface called Parsable, which contains 2 static methods: json_build, and txt_build. The txt_build function takes a string as an argument, checks some of its format (the part which is relevant to the class), and returns an instance of the relevant class, with all the fields set to the contents of the message.</p>\n\n<p>For instance, if I have a message like this one:\n\"MESSAGE</p>\n\n<p>MESSAGE_TYPE A</p>\n\n<p>COMMON_FIELD1 SOME_VALUE</p>\n\n<p>COMMON FIELD2 SOME_OTHER_VALUE</p>\n\n<p>BODY</p>\n\n<p>STOP\"</p>\n\n<p>Then txt_build with the message as an argument would return a MessageA instance with common_field1, and common_field2 set to SOME_VALUE, and SOME_OTHER_VALUE respectively.</p>\n\n<p>The BODY contains fields which are unique to each type of message. I didn't mention it in order to simplify matters.</p>\n\n<p>In addition, I would like to have an option to convert a JSON object from JSON to txt using the json_build method.</p>\n\n<p>So that a json like this one:</p>\n\n<pre><code>{\n    \"type\": \"B\",\n    \"common_field1\": \"SOME_VALUE\",\n    \"common_field2\": \"SOME_OTHER_VALUE\"\n    \"body\": {\n         ...\n    }\n}\n</code></pre>\n\n<p>Would also give me a MessageB instance with the fields set as above.</p>\n\n<p>After having an instance of one class with all the fields set to their values, I can call the get_json(), or get_txt() methods in order to get the JSON representation or the string representation (according to some specified format I'm using) of the message.</p>\n\n<p>I started to implement the part which build MessageA instances by strings and the code looks somewhat like this:</p>\n\n<pre><code>class Message:\n\n@staticmethod\ndef txt_build(txt):\n    parsed = ...  # code that parses the message\n\n    common_field1, common_field2 = parsed['common_field1'], parsed['common_field2']\n\n    msg_dispatch = {\n        'A': MessageA,\n        'B': MessageB\n    }\n\n    return msg_dispatch[parsed['msg_type']](common_field1, common_field2, msg_body)\n\n\nclass MessageA:\n    def __init__(self, common_field1, common_field2, msg_body):\n        super(MessageA, self).__init__(common_field1, common_field2)\n        # code that parses the msg_body and init fields unique to MessageA\n\n\nclass MessageB:\n    pass\n</code></pre>\n\n<p>The code works well for parsing text and initializing the fields. The problem is that I use the constructor of the sub-classes in order to give the body of the message (which is the only relevant part for each subclass), so I can't use it again for parsing JSON objects, at least not in a pretty way.</p>\n\n<p>The only solution which I thought of, which answers good code practices (according to me, at least), is duplicating the entire message hierarchy so that the first one would parse JSON, and the other one would parse strings.</p>\n\n<p>I would like to know if you have any other solutions, which would simplify things. Maybe I haven't noticed a much simpler solution, or didn't think of using some design pattern which is suitable in this case. I feel like I've made things complicated unnecessarily, and I don't have anyone to consult with.</p>\n\n<p>I'd love to hear any suggestions or new ideas on how to do things differently, and I hope I made myself clear.</p>\n\n<p>Thanks a lot :)</p>\n"}, {"tags": ["python", "sql", "sqlite", "sql-insert"], "comments": [{"owner": {"reputation": 142796, "user_id": 42346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZikEw.jpg?s=128&g=1", "display_name": "mechanical_meat", "link": "https://stackoverflow.com/users/42346/mechanical-meat"}, "edited": false, "score": 2, "creation_date": 1577816812, "post_id": 59547421, "comment_id": 105263881, "body": "Also do <code>connection.commit()</code> after your INSERT statement."}], "answers": [{"tags": [], "owner": {"reputation": 249903, "user_id": 2422776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2353050223ebecb113741c29458de4b2?s=128&d=identicon&r=PG", "display_name": "Mureinik", "link": "https://stackoverflow.com/users/2422776/mureinik"}, "is_accepted": true, "score": 1, "last_activity_date": 1577816906, "creation_date": 1577816906, "answer_id": 59547452, "question_id": 59547421, "link": "https://stackoverflow.com/questions/59547421/issues-with-db-browser-and-insert-function-in-python/59547452#59547452", "title": "Issues with DB browser and INSERT function in python", "body": "<p>Creating the table is a DDL action, which doesn't need committing. Inserting data, on the other hand, is a DML operation, and you need to explicitly commit it after it completes:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>connection.commit()\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 12633533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29ca77c6289cc2701f3d7d56712faf12?s=128&d=identicon&r=PG&f=1", "display_name": "helplessprogrammer134", "link": "https://stackoverflow.com/users/12633533/helplessprogrammer134"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 59547452, "answer_count": 1, "score": 2, "last_activity_date": 1577817357, "creation_date": 1577816678, "last_edit_date": 1577817357, "question_id": 59547421, "link": "https://stackoverflow.com/questions/59547421/issues-with-db-browser-and-insert-function-in-python", "title": "Issues with DB browser and INSERT function in python", "body": "<p>I am attempting to use sqlite3 through python commands in Visual Code Studio. After importing sqlite3, here is my code:</p>\n\n<pre><code>connection = sqlite3.connect(\"test.db\")\ncrsr = connection.cursor()\ncrsr.execute(\"CREATE TABLE list (id INTEGER PRIMARY KEY, name TEXT);\")\ncrsr.execute(\"INSERT INTO list VALUES(1, 'value1');\")\n</code></pre>\n\n<p>The program runs fine with no errors. When I open the database in DB browser, I see that the table list has been successfully created with the columns I specified. But when I actually view the SQL data, no values are in the table.</p>\n\n<p>Clearly, I am successfully connecting to DB Browser since I'm able to make a table- but why is my data not inserting into it? </p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 249903, "user_id": 2422776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2353050223ebecb113741c29458de4b2?s=128&d=identicon&r=PG", "display_name": "Mureinik", "link": "https://stackoverflow.com/users/2422776/mureinik"}, "edited": false, "score": 2, "creation_date": 1577816607, "post_id": 59547397, "comment_id": 105263809, "body": "Help us help you - paste your code as text, not as a screenshot"}, {"owner": {"reputation": 27241, "user_id": 5320906, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NOdNo.jpg?s=128&g=1", "display_name": "snakecharmerb", "link": "https://stackoverflow.com/users/5320906/snakecharmerb"}, "edited": false, "score": 4, "creation_date": 1577816624, "post_id": 59547397, "comment_id": 105263819, "body": "Consider using the <a href=\"https://docs.python.org/3.9/library/textwrap.html\" rel=\"nofollow noreferrer\">textwrap</a> in the standard library."}, {"owner": {"reputation": 249903, "user_id": 2422776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2353050223ebecb113741c29458de4b2?s=128&d=identicon&r=PG", "display_name": "Mureinik", "link": "https://stackoverflow.com/users/2422776/mureinik"}, "edited": false, "score": 0, "creation_date": 1577816683, "post_id": 59547397, "comment_id": 105263845, "body": "Not exact duplicate, but this should help - <a href=\"https://stackoverflow.com/q/312443/2422776\">stackoverflow.com/q/312443/2422776</a>"}, {"owner": {"reputation": 1007, "user_id": 3946214, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b9fe2a4005f7867e8a0566ae266f371f?s=128&d=identicon&r=PG", "display_name": "Arya", "link": "https://stackoverflow.com/users/3946214/arya"}, "edited": false, "score": 2, "creation_date": 1577816872, "post_id": 59547397, "comment_id": 105263894, "body": "In general when learning to code, you want to master the art of debugging. In this case, where you have a loop, you want to see what is happening in each iteration of the loop."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 1, "creation_date": 1577817395, "post_id": 59547397, "comment_id": 105264029, "body": "Please read <a href=\"https://meta.stackoverflow.com/questions/303812/discourage-screenshots-of-code-and-or-errors\">Discourage screenshots of code and/or errors</a>."}], "answers": [{"tags": [], "owner": {"reputation": 4072, "user_id": 9732470, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a7CB2.jpg?s=128&g=1", "display_name": "marcos", "link": "https://stackoverflow.com/users/9732470/marcos"}, "is_accepted": false, "score": 0, "last_activity_date": 1577816741, "creation_date": 1577816741, "answer_id": 59547428, "question_id": 59547397, "link": "https://stackoverflow.com/questions/59547397/wrap-a-word-in-python/59547428#59547428", "title": "Wrap a word in python", "body": "<p>Just replace the <code>i+1</code> with <code>i</code> like this:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>string = string[:i] + \"\\n\" + string[i:]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 185, "user_id": 6226201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b1fe643279bcdb12775babdbfec6a8a?s=128&d=identicon&r=PG&f=1", "display_name": "Bailey Kocin", "link": "https://stackoverflow.com/users/6226201/bailey-kocin"}, "edited": false, "score": 0, "creation_date": 1577817601, "post_id": 59547434, "comment_id": 105264088, "body": "Or they could use the built in textwrap module and call textwrap.wrap()"}, {"owner": {"reputation": 392, "user_id": 10125230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f633c34c21e8aef80c33e104b1690e8?s=128&d=identicon&r=PG&f=1", "display_name": "3ddavies", "link": "https://stackoverflow.com/users/10125230/3ddavies"}, "reply_to_user": {"reputation": 185, "user_id": 6226201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b1fe643279bcdb12775babdbfec6a8a?s=128&d=identicon&r=PG&f=1", "display_name": "Bailey Kocin", "link": "https://stackoverflow.com/users/6226201/bailey-kocin"}, "edited": false, "score": 0, "creation_date": 1577817823, "post_id": 59547434, "comment_id": 105264138, "body": "True, but based on the question I thought that g3rno was trying to create their own wrap function."}], "tags": [], "owner": {"reputation": 392, "user_id": 10125230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f633c34c21e8aef80c33e104b1690e8?s=128&d=identicon&r=PG&f=1", "display_name": "3ddavies", "link": "https://stackoverflow.com/users/10125230/3ddavies"}, "is_accepted": false, "score": 2, "last_activity_date": 1577816785, "creation_date": 1577816785, "answer_id": 59547434, "question_id": 59547397, "link": "https://stackoverflow.com/questions/59547397/wrap-a-word-in-python/59547434#59547434", "title": "Wrap a word in python", "body": "<p>The following should work:</p>\n\n<pre><code>def wrap(string, max_width):\n    return '\\n'.join(string[i:i+max_width] for i in range(0,len(string),max_width))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7820, "user_id": 2125671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13a492143ab4a2575b5a1f500691193c?s=128&d=identicon&r=PG", "display_name": "Philippe", "link": "https://stackoverflow.com/users/2125671/philippe"}, "is_accepted": false, "score": 0, "last_activity_date": 1577818288, "creation_date": 1577818288, "answer_id": 59547603, "question_id": 59547397, "link": "https://stackoverflow.com/questions/59547397/wrap-a-word-in-python/59547603#59547603", "title": "Wrap a word in python", "body": "<p>Another try with regular expression:</p>\n\n<pre><code>def wrap(string, max_width):\n    return '\\n'.join(re.findall(f'.{{1,{max_width}}}',string))\n\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1680, "user_id": 8703284, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/etOWy.jpg?s=128&g=1", "display_name": "Dhaval Taunk", "link": "https://stackoverflow.com/users/8703284/dhaval-taunk"}, "is_accepted": true, "score": 1, "last_activity_date": 1577818607, "creation_date": 1577818607, "answer_id": 59547635, "question_id": 59547397, "link": "https://stackoverflow.com/questions/59547397/wrap-a-word-in-python/59547635#59547635", "title": "Wrap a word in python", "body": "<p>Try this:</p>\n\n<pre><code>string = 'ABCDEFGHIJKLIMNOQRSTUVWXYZ'\n\nfor i in range(0, len(string), 4):\n    print(string[i:i+4])\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>ABCD\nEFGH\nIJKL\nIMNO\nQRST\nUVWX\nYZ\n</code></pre>\n"}], "owner": {"reputation": 79, "user_id": 9361575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bf663412a55ecdec3ea1fdfb2a7d815?s=128&d=identicon&r=PG&f=1", "display_name": "g3rno", "link": "https://stackoverflow.com/users/9361575/g3rno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 1, "accepted_answer_id": 59547635, "answer_count": 4, "score": -1, "last_activity_date": 1577818906, "creation_date": 1577816503, "last_edit_date": 1577816923, "question_id": 59547397, "link": "https://stackoverflow.com/questions/59547397/wrap-a-word-in-python", "title": "Wrap a word in python", "body": "<p>I want to wrap the string below:</p>\n\n<pre><code>string = 'ABCDEFGHIJKLIMNOQRSTUVWXYZ'\n</code></pre>\n\n<p>With the max width as <strong>4</strong>, for instance I want this output:</p>\n\n<p><a href=\"https://i.stack.imgur.com/XttCs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XttCs.png\" alt=\"Output that I want\"></a></p>\n\n<p>I created this function:</p>\n\n<pre><code>def wrap(string, max_width):\n    i = max_width\n    while True:\n        string = string[:i] + '\\n' + string[i+1:]\n        if i &gt;= len(string):\n            break\n    return string\n\nif __name__=='__main__':\n    string = 'ABCDEFGHIJKLIMNOQRSTUVWXYZ'\n    print(wrap(string, 4))\n</code></pre>\n\n<p>But the outputs was:</p>\n\n<p><a href=\"https://i.stack.imgur.com/fkf74.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fkf74.png\" alt=\"My Output\"></a></p>\n\n<p>May you help me, please?</p>\n"}, {"tags": ["python", "matplotlib", "plot"], "comments": [{"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 1, "creation_date": 1577816783, "post_id": 59547389, "comment_id": 105263875, "body": "Look into formatters and locators"}, {"owner": {"reputation": 1315, "user_id": 5120502, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/cd207006b68684a91905b5e030a9e1a0?s=128&d=identicon&r=PG&f=1", "display_name": "RaviTej310", "link": "https://stackoverflow.com/users/5120502/ravitej310"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1577817044, "post_id": 59547389, "comment_id": 105263941, "body": "From a brief glance, these are for the ticker markers on the axis, and they don&#39;t change the scale on the axis. Please correct me if I am mistaken. I don&#39;t need to change the locations of the ticks. I need to change the scale so that the data is plotted differently."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 1, "creation_date": 1577818332, "post_id": 59547389, "comment_id": 105264263, "body": "It&#39;s &quot;fake&quot;, but if you scale the data yourself and apply the right ticks, you get the same net effect"}], "owner": {"reputation": 1315, "user_id": 5120502, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/cd207006b68684a91905b5e030a9e1a0?s=128&d=identicon&r=PG&f=1", "display_name": "RaviTej310", "link": "https://stackoverflow.com/users/5120502/ravitej310"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1577817501, "creation_date": 1577816451, "last_edit_date": 1577817501, "question_id": 59547389, "link": "https://stackoverflow.com/questions/59547389/matplotlib-axis-custom-intervals", "title": "Matplotlib axis custom intervals", "body": "<p>For a plot, I need the y-axis to be between -800 and +20 with evenly spaced intervals intervals for approximately the following ranges: </p>\n\n<p><code>-1000 to -100, -100 to -50, -50 to -20, -20 to 0, 0 to +20</code></p>\n\n<p>How can I do this? <code>plt.yscale</code> only allows using predefined scales like <code>linear</code>, <code>log</code> etc. as far as I know. I couldn't find how to create a custom scale.</p>\n\n<p>I'm fine with some flexibility in the division of the y-axis but need it to roughly respect that. I'm even okay with using purely the log base 10 scale with <code>plt.yscale('log',basey=10)</code>, but this doesn't allow me to get negative numbers on the axis. </p>\n\n<p>EDIT: using <code>plt.yscale('symlog',basey=10)</code> solves the problem of plotting negative log intervals. But if I did want to do it, how would I have a custom scale?</p>\n"}, {"tags": ["python", "heroku", "flask", "static", "blogs"], "answers": [{"comments": [{"owner": {"reputation": 411, "user_id": 3521629, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eh6Sg.jpg?s=128&g=1", "display_name": "col. slade", "link": "https://stackoverflow.com/users/3521629/col-slade"}, "edited": false, "score": 0, "creation_date": 1578247085, "post_id": 59595723, "comment_id": 105369342, "body": "Thanks for the suggestion. Does Heroku support that setup ?"}], "tags": [], "owner": {"reputation": 5256, "user_id": 2692595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89f68b5a82eb26defde97de80816f9fc?s=128&d=identicon&r=PG", "display_name": "hackerrdave", "link": "https://stackoverflow.com/users/2692595/hackerrdave"}, "is_accepted": false, "score": 2, "last_activity_date": 1578180392, "creation_date": 1578180392, "answer_id": 59595723, "question_id": 59547288, "link": "https://stackoverflow.com/questions/59547288/heroku-how-to-integrate-static-site-generation-with-python-flask/59595723#59595723", "title": "Heroku: How to integrate static site generation with Python / Flask", "body": "<p>Instead of relying on Flask to serve your static blog content, you can run a web server (such as nginx) that routes your traffic to either the Flask website or the static blog content. </p>\n\n<p>User Request -> <a href=\"https://example.org\" rel=\"nofollow noreferrer\">https://example.org</a> -> nginx -> flask</p>\n\n<p>User Request -> <a href=\"https://example.org/blog\" rel=\"nofollow noreferrer\">https://example.org/blog</a> -> nginx -> static content (hosted on nginx server or other location)</p>\n"}, {"tags": [], "owner": {"reputation": 25802, "user_id": 211960, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2826aed4813bf3e2b3eff1eb075d387a?s=128&d=identicon&r=PG", "display_name": "Daniel Hepper", "link": "https://stackoverflow.com/users/211960/daniel-hepper"}, "is_accepted": true, "score": 1, "last_activity_date": 1578306372, "creation_date": 1578306372, "answer_id": 59610398, "question_id": 59547288, "link": "https://stackoverflow.com/questions/59547288/heroku-how-to-integrate-static-site-generation-with-python-flask/59610398#59610398", "title": "Heroku: How to integrate static site generation with Python / Flask", "body": "<p>You can automate step 3 by adding a <a href=\"https://devcenter.heroku.com/articles/using-multiple-buildpacks-for-an-app\" rel=\"nofollow noreferrer\">Heroku Buildpack</a>. There are third party open-source buildpacks for Hugo available on Github, e.g. <a href=\"https://github.com/roperzh/heroku-buildpack-hugo\" rel=\"nofollow noreferrer\">roperzh/heroku-buildpack-hugo</a>. Alternatively, you could use a <a href=\"https://githooks.com/\" rel=\"nofollow noreferrer\">Git hook</a> to build the blog every time you commit any changes.</p>\n\n<p>You could probably avoid steps 4 and 5 by setting <code>baseURL</code> and <code>publishDir</code> <a href=\"https://gohugo.io/getting-started/configuration/#all-configuration-settings\" rel=\"nofollow noreferrer\">Hugo configuration settings</a>.</p>\n\n<p>I'm not sure what step 2 entails, but your overall setup (6. &amp; 7.) seems reasonable.</p>\n"}], "owner": {"reputation": 411, "user_id": 3521629, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eh6Sg.jpg?s=128&g=1", "display_name": "col. slade", "link": "https://stackoverflow.com/users/3521629/col-slade"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 350, "favorite_count": 1, "accepted_answer_id": 59610398, "answer_count": 2, "score": 5, "last_activity_date": 1578306372, "creation_date": 1577815635, "question_id": 59547288, "link": "https://stackoverflow.com/questions/59547288/heroku-how-to-integrate-static-site-generation-with-python-flask", "title": "Heroku: How to integrate static site generation with Python / Flask", "body": "<p>I'm running a Flask website <code>https://www.example.org</code> that is hosted on Heroku, with an attached static blog, <code>https://www.example.org/blog</code> which I generate through Hugo and I'm looking to make this process more efficient</p>\n\n<p>Based on my research, having the blog in a subdirectory is preferable for SEO reasons.</p>\n\n<p>My current workflow with maintaining the blog is as follows:</p>\n\n<ol>\n<li>Write Markdown post in Hugo</li>\n<li>Check to reconcile css etc between Hugo and Flask app</li>\n<li>Generate the static html code</li>\n<li>Fix link errors etc.</li>\n<li>Move static output from hugo/public folder to flask_app/static/blog folder</li>\n<li>I'm using <code>whitenoise</code> to access the static folder</li>\n<li>Deploy to Heroku --> <a href=\"https://www.example.org/blog\" rel=\"noreferrer\">https://www.example.org/blog</a> served via Flask</li>\n</ol>\n\n<p>I realize that serving static content via Flask is less computationally efficient (which is acceptable) but this is not a major problem right now. </p>\n\n<p>But I'm sure there must be a better way ?!</p>\n"}, {"tags": ["python", "pandas", "pyqt5", "qabstracttablemodel"], "answers": [{"comments": [{"owner": {"reputation": 18847, "user_id": 2001654, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/yERLj.jpg?s=128&g=1", "display_name": "musicamante", "link": "https://stackoverflow.com/users/2001654/musicamante"}, "edited": false, "score": 0, "creation_date": 1577906989, "post_id": 59549847, "comment_id": 105279445, "body": "Note that you should always return the base implementation from <code>data()</code> and <code>headerData()</code> if you&#39;re not managing it."}], "tags": [], "owner": {"reputation": 19, "user_id": 11155306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91c4e14391336ee5249e52439595fea6?s=128&d=identicon&r=PG&f=1", "display_name": "Drew M.", "link": "https://stackoverflow.com/users/11155306/drew-m"}, "is_accepted": true, "score": 0, "last_activity_date": 1577849435, "creation_date": 1577849435, "answer_id": 59549847, "question_id": 59547276, "link": "https://stackoverflow.com/questions/59547276/optimize-pyqt5-qabstractview-for-pandas-model/59549847#59549847", "title": "Optimize PyQt5 QAbstractView for Pandas Model", "body": "<p>Well I answered my own question. For those in the future that are running into an issue where you are trying to populate QTableViews using a QAbstractTableModel with large datasets...here you go:</p>\n\n<pre><code>class SQLConnection_PandasModel(QtCore.QAbstractTableModel):\n\n    def __init__(self, reason, df, parent=None):\n        QtCore.QAbstractTableModel.__init__(self, parent)\n        self._df = np.array(df.values)\n        self.original_df = df.copy()\n\n        self._cols = df.columns\n        self.r, self.c = np.shape(self._df)\n\n        self.reason = reason\n\n        # PyQt5 Slots and Signals\n        if self.reason == 'Read':\n            self.conSig = sqlWindow()\n            self.conSig.dataChanged.connect(self.conSig.sql_table_updated)\n        # set the shortcut ctrl+F for find in menu\n        self.find_list_row = []\n\n    def rowCount(self, parent=None):\n        return self.r\n\n    def columnCount(self, parent=None):\n        return self.c\n\n    def data(self, index, role=QtCore.Qt.DisplayRole):\n        if index.isValid():\n            if role == QtCore.Qt.DisplayRole:\n                if isinstance(self._df[index.row(), index.column()], bytes):\n                    row = self._df[index.row()][0] - 1\n                    col = self._df[index.column()][0] -1\n                    self._df[row, col] = '(BLOB)'\n                    return str('(BLOB)')\n\n                return str(self._df[index.row(),index.column()])\n        return None\n\n    def setData(self, index, value, role):\n        row = self._df[index.row()]\n        col = self._df[index.column()]\n\n        if hasattr(value, 'toPyObject'):\n            # PyQt4 gets a QVariant\n            value = value.toPyObject()\n        else:\n            # PySide gets an unicode\n            dtype = self._df.dtype\n            if dtype != object:\n                value = None if value == '' else dtype.type(value)\n        table_row = row[0]-1\n        table_col = col[0]-1\n        self._df[table_row, table_col] = value\n        # This is the signal to my RDB class that a cell has changed and to update the rdb_DF.\n        if role == QtCore.Qt.EditRole and self.reason == 'Read':\n            column_name = self.original_df.columns[table_col]\n            self.original_df.loc[table_row ,column_name] = value\n\n            my_df = pd.DataFrame(self._df)\n            my_df.columns = self.original_df.columns\n            self.conSig.dataChanged.emit(table_row, table_col, my_df)\n        return True\n\n    def headerData(self, p_int, orientation, role):\n        if role == QtCore.Qt.DisplayRole:\n            if orientation == QtCore.Qt.Horizontal:\n                return self._cols[p_int]\n            elif orientation == QtCore.Qt.Vertical:\n                return p_int\n        return None\n\n    def sort(self, column, order):\n        colname = self._df.columns.tolist()[column]\n        self.layoutAboutToBeChanged.emit()\n        self._df.sort_values(colname, ascending=order == QtCore.Qt.AscendingOrder, inplace=True)\n        self._df.reset_index(inplace=True, drop=True)\n        self.layoutChanged.emit()\n\n    def flags(self, index):\n        return Qt.ItemIsEnabled | Qt.ItemIsSelectable | Qt.ItemIsEditable\n</code></pre>\n\n<p>I converted the pandas df into a numpy array and that really sped it up. Finally, I convert the numpy back to pandas when I need to print out. This increased the speed drastically. </p>\n\n<p>Pandas loading time for 120k rows and 10 columns: ~280 seconds.\nNumpy loading time for 120k rows and 10 columns: 6.634 seconds.</p>\n"}], "owner": {"reputation": 19, "user_id": 11155306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91c4e14391336ee5249e52439595fea6?s=128&d=identicon&r=PG&f=1", "display_name": "Drew M.", "link": "https://stackoverflow.com/users/11155306/drew-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "accepted_answer_id": 59549847, "answer_count": 1, "score": 0, "last_activity_date": 1577849435, "creation_date": 1577815525, "question_id": 59547276, "link": "https://stackoverflow.com/questions/59547276/optimize-pyqt5-qabstractview-for-pandas-model", "title": "Optimize PyQt5 QAbstractView for Pandas Model", "body": "<p>I am currently writing a SQL query interface through Python. \nWhen writing the data into a QTableView, I am using a QAbstractTableModel to write the query result.</p>\n\n<p>This works fine for smaller queries, but becomes extremely slow when trying to present many rows and columns. Is there anyway to increase the speed that the dataframe is loaded into the QTableView?</p>\n\n<p>Here is the code for my QAbtractTableModel class:</p>\n\n<pre><code>class SQLConnection_PandasModel(QtCore.QAbstractTableModel):\n\n    def __init__(self, reason, df, parent=None):\n        QtCore.QAbstractTableModel.__init__(self, parent)\n        self._df = df.copy()\n        self.original_df = df\n\n        self.reason = reason\n\n        # PyQt5 Slots and Signals\n        if self.reason == 'Read':\n            self.conSig = sqlWindow()\n            self.conSig.dataChanged.connect(self.conSig.sql_table_updated)\n        # set the shortcut ctrl+F for find in menu\n        self.find_list_row = []\n        # setup menu options\n\n    def toDataFrame(self):\n        return self._df.copy()\n\n    def headerData(self, section, orientation, role=QtCore.Qt.DisplayRole):\n        if role != QtCore.Qt.DisplayRole:\n            return QtCore.QVariant()\n\n        if orientation == QtCore.Qt.Horizontal:\n            try:\n                return self._df.columns.tolist()[section]\n            except (IndexError,):\n                return QtCore.QVariant()\n        elif orientation == QtCore.Qt.Vertical:\n            try:\n                # return self.df.index.tolist()\n                return self._df.index.tolist()[section]\n            except (IndexError,):\n                return QtCore.QVariant()\n\n    def data(self, index, role=QtCore.Qt.DisplayRole):\n\n        if not index.isValid():\n            return QtCore.QVariant()\n        if role == QtCore.Qt.DisplayRole or role == QtCore.Qt.EditRole:\n            #print(type(self._df.iloc[index.row(), index.column()]))\n            if isinstance(self._df.iloc[index.row(), index.column()], bytes):\n\n                return QtCore.QVariant('(BLOB)')\n            else:\n\n                return QtCore.QVariant(str(self._df.iloc[index.row(), index.column()]))\n\n\n    def setData(self, index, value, role):\n        row = self._df.index[index.row()]\n        col = self._df.columns[index.column()]\n\n        if hasattr(value, 'toPyObject'):\n            # PyQt4 gets a QVariant\n            value = value.toPyObject()\n        else:\n            # PySide gets an unicode\n\n            dtype = self._df[col].dtype\n\n            if dtype != object:\n                if ((np.issubdtype(dtype, np.integer)) or isinstance(dtype, int)) and value.isnumeric():\n                    value = None if value == '' else dtype.type(value)\n                    self._df.loc[row, col] = value\n\n                    # This is the signal to my RDB class that a cell has changed and to update the rdb_DF.\n                    if role == QtCore.Qt.EditRole and self.reason == 'Read':\n                        #print('Emitting 1',row , col)\n                        self.conSig.dataChanged.emit(row, col, value)\n                    return True\n                elif ((np.issubdtype(dtype, np.integer)) or isinstance(dtype, int)) and not(value.isnumeric()):\n                    return False\n                else:\n\n                    value = None if value == '' else dtype.type(value)\n                    self._df.loc[row, col] = value\n\n                    # This is the signal to my RDB class that a cell has changed and to update the rdb_DF.\n                    if role == QtCore.Qt.EditRole and self.reason == 'Read':\n                        #print('Emitting 2', row, col)\n                        self.conSig.dataChanged.emit(row, col, value)\n                    return True\n            else:\n                self._df.loc[row, col] = value\n\n                # This is the signal to my RDB class that a cell has changed and to update the rdb_DF.\n                if role == QtCore.Qt.EditRole and self.reason == 'Read':\n                    #print('Emitting 3', row, col)\n                    self.original_df.at[row, col] = value\n                    #print(self.original_df)\n                    self.conSig.dataChanged.emit(row, col, self.original_df)\n                return True\n\n\n\n    def rowCount(self, parent=QtCore.QModelIndex()):\n        return len(self._df.index)\n\n    def columnCount(self, parent=QtCore.QModelIndex()):\n        return len(self._df.columns)\n\n    def sort(self, column, order):\n        colname = self._df.columns.tolist()[column]\n        self.layoutAboutToBeChanged.emit()\n        self._df.sort_values(colname, ascending=order == QtCore.Qt.AscendingOrder, inplace=True)\n        self._df.reset_index(inplace=True, drop=True)\n        self.layoutChanged.emit()\n\n    def flags(self, index):\n        return Qt.ItemIsEnabled | Qt.ItemIsSelectable | Qt.ItemIsEditable\n</code></pre>\n\n<p>I would appreciate any assistance I could get in increasing the speed that the dataframe is loaded.\nThank you.</p>\n"}, {"tags": ["python", "jupyter-notebook", "imagemagick", "jupyter", "wand"], "comments": [{"owner": {"reputation": 27168, "user_id": 7355741, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6CMNt.jpg?s=128&g=1", "display_name": "fmw42", "link": "https://stackoverflow.com/users/7355741/fmw42"}, "edited": false, "score": 0, "creation_date": 1577817478, "post_id": 59547267, "comment_id": 105264051, "body": "You can call one of the threshold methods to make it bilevel."}, {"owner": {"reputation": 20869, "user_id": 438117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dec2e8d45b1a0210065d1a4e3800f151?s=128&d=identicon&r=PG", "display_name": "emcconville", "link": "https://stackoverflow.com/users/438117/emcconville"}, "edited": false, "score": 0, "creation_date": 1577818782, "post_id": 59547267, "comment_id": 105264349, "body": "A resolution of <code>600</code> would be a massive raster of over 30M pixels (assuming US letter paper size). You may need to drop resolution down to 120, and then call <code>Image.transform_colorspace(&#39;gray&#39;)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 10452913, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JX0RO.jpg?s=128&g=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/10452913/brian"}, "edited": false, "score": 0, "creation_date": 1578933585, "post_id": 59549451, "comment_id": 105591826, "body": "This was very helpful! Thanks, fmw42!"}], "tags": [], "owner": {"reputation": 27168, "user_id": 7355741, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6CMNt.jpg?s=128&g=1", "display_name": "fmw42", "link": "https://stackoverflow.com/users/7355741/fmw42"}, "is_accepted": false, "score": 1, "last_activity_date": 1578004309, "last_edit_date": 1578004309, "creation_date": 1577841539, "answer_id": 59549451, "question_id": 59547267, "link": "https://stackoverflow.com/questions/59547267/using-wand-to-reduce-image-filesize-for-improved-ocr-performance/59549451#59549451", "title": "Using **wand** to reduce image filesize for improved OCR performance?", "body": "<p>The following are several methods of getting a bilevel output from Python Wand (0.5.7). The last needs IM 7 to work. One note in my testing is that in IM 7, the first two results are swapped in terms of dithering or not dithering. But I have reported this to the Python Wand developer.</p>\n\n<p>Input:</p>\n\n<p><a href=\"https://i.stack.imgur.com/6cXO5.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6cXO5.jpg\" alt=\"enter image description here\"></a></p>\n\n<pre><code>from wand.image import Image\nfrom wand.display import display\n\n# Using Wand 0.5.7, all images are not dithered in IM 6 and all images are dithered in IM 7\nwith Image(filename='lena.jpg') as img:\n    with img.clone() as img_copy1:\n        img_copy1.quantize(number_colors=2, colorspace_type='gray', treedepth=0, dither=False, measure_error=False)\n        img_copy1.auto_level()\n        img_copy1.save(filename='lena_monochrome_no_dither.jpg')\n        display(img_copy1)\n        with img.clone() as img_copy2:\n            img_copy2.quantize(number_colors=2, colorspace_type='gray', treedepth=0, dither=True, measure_error=False)\n            img_copy2.auto_level()\n            img_copy2.save(filename='lena_monochrome_dither.jpg')\n            display(img_copy2)\n            with img.clone() as img_copy3:\n                img_copy3.threshold(threshold=0.5)\n                img_copy3.save(filename='lena_threshold.jpg')\n                display(img_copy3)\n                # only works in IM 7\n                with img.clone() as img_copy4:\n                    img_copy4.auto_threshold(method='otsu')\n                    img_copy4.save(filename='lena_threshold_otsu.jpg')\n                    display(img_copy4)\n</code></pre>\n\n<p><br>\nFirst output using IM 6:</p>\n\n<p><a href=\"https://i.stack.imgur.com/0CQLX.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0CQLX.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>Second output using IM 7:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Owrxu.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Owrxu.jpg\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 37, "user_id": 10452913, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JX0RO.jpg?s=128&g=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/10452913/brian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1578004309, "creation_date": 1577815463, "question_id": 59547267, "link": "https://stackoverflow.com/questions/59547267/using-wand-to-reduce-image-filesize-for-improved-ocr-performance", "title": "Using **wand** to reduce image filesize for improved OCR performance?", "body": "<p>I'm trying to write use the <strong>wand</strong> simple MagickWand API binding for Python to extract pages from a PDF, stitch them together into a single longer (\"taller\") image, and pass that image to Google Cloud Vision for OCR Text Detection. I keep running up against Google Cloud Vision's 10MB filesize limit.</p>\n\n<p>I thought a good way to get the filesize down might be to eliminate all color channels and just feed Google a B&amp;W image. I figured out how to get grayscale, but how can I make my color image into a B&amp;W (\"bilevel\") one? I'm also open to other suggestions for getting the filesize down. Thanks in advance!</p>\n\n<pre><code>from wand.image import Image\n\nselected_pages = [0,1]\n\nimageFromPdf = Image(filename=pdf_filepath+str(selected_pages), resolution=600)\npages = len(imageFromPdf.sequence)\n\nimage = Image(\n    width=imageFromPdf.width,\n    height=imageFromPdf.height * pages\n    )\nfor i in range(pages):\n    image.composite(\n    imageFromPdf.sequence[i],\n    top=imageFromPdf.height * i,\n    left=0\n    )\n\nimage.colorspace = 'gray' \nimage.alpha_channel = False\nimage.format = 'png'\n\nimage\n</code></pre>\n"}, {"tags": ["python", "serial-port", "scheduler"], "comments": [{"owner": {"reputation": 4072, "user_id": 9732470, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a7CB2.jpg?s=128&g=1", "display_name": "marcos", "link": "https://stackoverflow.com/users/9732470/marcos"}, "edited": false, "score": 0, "creation_date": 1577815921, "post_id": 59547252, "comment_id": 105263617, "body": "i think the problem is that the <code>schedule</code> module runs the function in a way it doesn&#39;t let <code>g</code> be defined properly as a <code>global</code> variable. Which is not a good practice (using <code>global</code> variables)."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 12628161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/474eb254bebe5d126629c0924643fb25?s=128&d=identicon&r=PG&f=1", "display_name": "JacquesGodin", "link": "https://stackoverflow.com/users/12628161/jacquesgodin"}, "edited": false, "score": 0, "creation_date": 1577818120, "post_id": 59547368, "comment_id": 105264204, "body": "Thank you both for the comments. Having a global variable works."}, {"owner": {"reputation": 561, "user_id": 10252307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5LzP8.jpg?s=128&g=1", "display_name": "darkprinx", "link": "https://stackoverflow.com/users/10252307/darkprinx"}, "reply_to_user": {"reputation": 15, "user_id": 12628161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/474eb254bebe5d126629c0924643fb25?s=128&d=identicon&r=PG&f=1", "display_name": "JacquesGodin", "link": "https://stackoverflow.com/users/12628161/jacquesgodin"}, "edited": false, "score": 0, "creation_date": 1577855103, "post_id": 59547368, "comment_id": 105269165, "body": "Nice to know. Please accept the answer as it&#39;s working :)"}], "tags": [], "owner": {"reputation": 561, "user_id": 10252307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5LzP8.jpg?s=128&g=1", "display_name": "darkprinx", "link": "https://stackoverflow.com/users/10252307/darkprinx"}, "is_accepted": true, "score": 1, "last_activity_date": 1577816257, "creation_date": 1577816257, "answer_id": 59547368, "question_id": 59547252, "link": "https://stackoverflow.com/questions/59547252/using-a-scheduled-function-variable/59547368#59547368", "title": "Using a scheduled function variable", "body": "<p>You have to define the variable <strong>g</strong> outside of <strong>read_serial_port()</strong> function.\nSuch as - </p>\n\n<pre><code>g = None  # or something else\n\ndef read_serial_port():\n    global g    # global g here actually means, it is pointing to the variable out of the function and the manipulation will impact on g variable declared outside of the function \n    ser.flushInput()\n    x = ser.readline().decode(\"utf_8\").rstrip('\\n\\r')\n    g=float(x)\n    print(g)\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 12628161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/474eb254bebe5d126629c0924643fb25?s=128&d=identicon&r=PG&f=1", "display_name": "JacquesGodin", "link": "https://stackoverflow.com/users/12628161/jacquesgodin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 59547368, "answer_count": 1, "score": 0, "last_activity_date": 1577816257, "creation_date": 1577815329, "question_id": 59547252, "link": "https://stackoverflow.com/questions/59547252/using-a-scheduled-function-variable", "title": "Using a scheduled function variable", "body": "<p>I'm coding a script that uses a defined function scheduled to run every X seconds. The scheduled function works fine, the problem is that I'm not able to use it downstream, specifically in adding that variable <code>g</code> to a list called <code>numlist</code>. How can I do it?</p>\n\n<p>Code used:</p>\n\n<pre><code>import serial\nimport numpy as np\nimport time\nfrom random import randint\nimport matplotlib.pyplot as plt\nimport schedule\n\nser = serial.Serial('COM1', 115200)\n\ndef read_serial_port():\n    global g\n    ser.flushInput()\n    x = ser.readline().decode(\"utf_8\").rstrip('\\n\\r')\n    g=float(x)\n    print(g)\n\nrate_in_seconds = 0.5\nschedule.every(rate_in_seconds).seconds.do(read_serial_port)\n\nnumlist = [0]\n\nstart_time = int(round(time.time()))\ntimelist = [start_time]\n\nspeed = []\n\nwhile True:\n    schedule.run_pending()\n    time.sleep(1)\n\n    for x in range(0, 10):\n        elapsed_time = int(round(time.time() - start_time))\n        numlist.append(g)\n        print(numlist[-1])\n    # timelist.append(elapsed_time)\n        timelist.append(int(round(time.time())))\n\n        x = numlist[-1]\n        y = numlist[len(numlist)-2]\n        t1 = timelist[-1]\n        t2 = timelist[len(timelist)-2]\n\n    # speed calculation\n        kmh = abs((x-y)/(t2-t1))*3.6\n        speed.append(kmh)\n\n    # brake distance calculation\n        d = (kmh ** 2)/(250*0.8)\n        print('speed', speed[-1], 'km/h')\n        print('total distance:', numlist[-1], 'm')\n        print('breaking distance:', d, 'm')\n\n        if d &gt;= numlist[-1]:\n            print('run!')\n            print('\\n')\n\n\n#plt.plot(speed)\n#plt.show()\n</code></pre>\n\n<p>When I run it, it keeps saying that variable <code>g</code> does not exist:</p>\n\n<p><a href=\"https://i.stack.imgur.com/RtWvm.png\" rel=\"nofollow noreferrer\">Error message</a></p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "pandas", "text", "concatenation", "corpus"], "comments": [{"owner": {"reputation": 86481, "user_id": 2411802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/RA92x.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2411802/alexander"}, "edited": false, "score": 1, "creation_date": 1577815205, "post_id": 59547187, "comment_id": 105263413, "body": "<code>corpus.append(i.str.cat(sep=&quot;&quot;))</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 12633388, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OX9iZQ_ILAo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd-ag7l1VBmQASc-Je5KPuwI6EmhQ/photo.jpg?sz=128", "display_name": "ajsom", "link": "https://stackoverflow.com/users/12633388/ajsom"}, "edited": false, "score": 0, "creation_date": 1577916798, "post_id": 59547745, "comment_id": 105281439, "body": "Thanks for answering! Your approach will concatenate all of the rows across all of the dataframes. If I have 10 dataframes with 100 rows each, I will get one element in the list. However, I want to concatenate each dataframe separately, so I want 10 elements."}, {"owner": {"reputation": 161, "user_id": 10038165, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-EP0T--rFTL0/AAAAAAAAAAI/AAAAAAAAAIU/fi7JaGDZs1g/photo.jpg?sz=128", "display_name": "Jaime M", "link": "https://stackoverflow.com/users/10038165/jaime-m"}, "reply_to_user": {"reputation": 1, "user_id": 12633388, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OX9iZQ_ILAo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd-ag7l1VBmQASc-Je5KPuwI6EmhQ/photo.jpg?sz=128", "display_name": "ajsom", "link": "https://stackoverflow.com/users/12633388/ajsom"}, "edited": false, "score": 0, "creation_date": 1578013195, "post_id": 59547745, "comment_id": 105311594, "body": "I&#39;m not sure I completely follow what you&#39;re saying - but I don&#39;t see how it would change the fact that you can&#39;t index into a list using an item in that list. Do you understand my point about how the for loop works in python? If you want to iterate over both the indices and elements in a list, you could try <code>for i, element in enumerate(li): ...</code>"}, {"owner": {"reputation": 1, "user_id": 12633388, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OX9iZQ_ILAo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd-ag7l1VBmQASc-Je5KPuwI6EmhQ/photo.jpg?sz=128", "display_name": "ajsom", "link": "https://stackoverflow.com/users/12633388/ajsom"}, "edited": false, "score": 0, "creation_date": 1578014077, "post_id": 59547745, "comment_id": 105311790, "body": "Say I have 10 dataframes, each with 10 rows. I want to make 10 dataframes in which their respective rows are combined (i.e., 10 dataframes, each with 1 row). Then, I want to append the new dataframes to a list.The code you have provided combines all the rows across all the dataframes (i.e., there is 1 dataframe with 1 row). Truly sorry if this is confusing, I greatly appreciate your help!"}], "tags": [], "owner": {"reputation": 161, "user_id": 10038165, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-EP0T--rFTL0/AAAAAAAAAAI/AAAAAAAAAIU/fi7JaGDZs1g/photo.jpg?sz=128", "display_name": "Jaime M", "link": "https://stackoverflow.com/users/10038165/jaime-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1577819635, "creation_date": 1577819635, "answer_id": 59547745, "question_id": 59547187, "link": "https://stackoverflow.com/questions/59547187/weird-error-when-concatenating-series-data-using-pandas/59547745#59547745", "title": "Weird error when concatenating Series data using pandas", "body": "<p>It looks to me like you just have the wrong expectations about how the for loop syntax works:</p>\n\n<pre><code>for i in li:\n    corpus.append(li[i].str.cat(sep = \"\"))\n</code></pre>\n\n<p>When you use the syntax <code>for __ in __</code>, you should read this as <code>for item in list</code> not <code>for index in list</code>.</p>\n\n<p>Since <code>i</code> is already the item itself, not the index, it doesn't work to try to use <code>i</code> to index into <code>li</code> (where you've written <code>li[i]</code>). This is why you're getting an error about \"list indices\".</p>\n\n<p>Thus, this should work for you:</p>\n\n<pre><code>for i in li:\n    corpus.append(i.str.cat(sep = \"\"))\n</code></pre>\n\n<p>As a side note, I'd recommend using a variable other than <code>i</code> to avoid this confusion - maybe <code>e</code> for element, or better yet (IMO), just spell out exactly what the element is.</p>\n"}], "owner": {"reputation": 1, "user_id": 12633388, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OX9iZQ_ILAo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd-ag7l1VBmQASc-Je5KPuwI6EmhQ/photo.jpg?sz=128", "display_name": "ajsom", "link": "https://stackoverflow.com/users/12633388/ajsom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577819635, "creation_date": 1577814948, "question_id": 59547187, "link": "https://stackoverflow.com/questions/59547187/weird-error-when-concatenating-series-data-using-pandas", "title": "Weird error when concatenating Series data using pandas", "body": "<p>I have a bunch of dataframes with rows of text data. I imported a single column from each dataframe and appended them to a list like so:</p>\n\n<pre><code>import pandas as pd\nimport glob\n\npath = 'filepath' # use your path\nall_files = glob.glob(path + \"/*.csv\")\n\nli = []\n\nfor filename in all_files:\n    df = pd.read_csv(filename, index_col=None, header=0)\n    li.append(df['body']) \n</code></pre>\n\n<p>Now I am trying to create a corpus of documents, so I want to concatenate/merge/join (not sure which is a better approach) all the rows, so that each column becomes a single cell. So each element in the list should be a cell instead of rows of cells.  </p>\n\n<p>When I concatenate a single element in the list, it does what I want. For instance,</p>\n\n<pre><code>li[0].str.cat(sep = \"\")\n</code></pre>\n\n<p>creates a single cell of text.</p>\n\n<p>However, when I loop through the list like so:</p>\n\n<pre><code>corpus = []\n\nfor i in li:\n    corpus.append(li[i].str.cat(sep = \"\"))\n</code></pre>\n\n<p>I get the following error:</p>\n\n<pre><code>----&gt; 4     corpus.append(li[i].str.cat(sep = \"\"))\n\nTypeError: list indices must be integers or slices, not Series\n</code></pre>\n\n<p>I'm sure the problem is simple, but I haven't seen an answer posted here for this issue, and I do not know why this error occurs (since str.cat should work for Series data). Any help would be appreciated.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "django", "postgresql"], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 2333312, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3f99cff6d8425197d39b7643998c8b19?s=128&d=identicon&r=PG", "display_name": "user2333312", "link": "https://stackoverflow.com/users/2333312/user2333312"}, "edited": false, "score": 0, "creation_date": 1577817420, "post_id": 59547277, "comment_id": 105264036, "body": "That&#39;s good to know, thank you! I may have oversimplified the problem though.  I also have to pass the user id to the record.  There is a &quot;user&quot; column on the table that comes from the request.   Is there an easy way to set that?"}], "tags": [], "owner": {"reputation": 17762, "user_id": 548562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26587173d9156d8ec3114c8700d1b693?s=128&d=identicon&r=PG", "display_name": "Iain Shelvington", "link": "https://stackoverflow.com/users/548562/iain-shelvington"}, "is_accepted": false, "score": 0, "last_activity_date": 1577815531, "creation_date": 1577815531, "answer_id": 59547277, "question_id": 59547167, "link": "https://stackoverflow.com/questions/59547167/django-modelforms-how-to-set-default-values-for-junction-table/59547277#59547277", "title": "Django ModelForms - How to set default values for junction table", "body": "<p><code>PizzaToppingJunction.create_time</code> can have <a href=\"https://docs.djangoproject.com/en/3.0/ref/models/fields/#django.db.models.DateField.auto_now_add\" rel=\"nofollow noreferrer\"><code>auto_now_add=True</code></a> this will automatically set the value to the time the record was created</p>\n\n<pre><code>create_time = models.DateTimeField(auto_now_add=True)\n</code></pre>\n\n<p>Then you do not need to set any default values in the form</p>\n"}, {"tags": [], "owner": {"reputation": 71, "user_id": 2333312, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3f99cff6d8425197d39b7643998c8b19?s=128&d=identicon&r=PG", "display_name": "user2333312", "link": "https://stackoverflow.com/users/2333312/user2333312"}, "is_accepted": false, "score": 0, "last_activity_date": 1577844637, "creation_date": 1577844637, "answer_id": 59549611, "question_id": 59547167, "link": "https://stackoverflow.com/questions/59547167/django-modelforms-how-to-set-default-values-for-junction-table/59549611#59549611", "title": "Django ModelForms - How to set default values for junction table", "body": "<p>Modifying the extra fields in the junction records works if it's done during the \"m2m_changed\" signal processing.  I'm not sure this is the right way to do it, but so far it's the only thing I could come up with.  The code below needs to be cleaned up, but it is generally what worked for me.  </p>\n\n<p>Using the pizza scenario:</p>\n\n<pre><code>\n    def m2m_changed_signal (self, sender, **kwargs):\n        django.db.models.signals.m2m_changed.disconnect (self.m2m_changed_signal, sender=models.Pizza.toppings.through)\n\n        instance_time = django.utils.timezone.now()\n        instance_user = self.request.user.username\n\n        pizza = kwargs [\"instance\"]\n        pizza_id = pizza.pizza_id\n        topping_ids = []\n        for topping_id in kwargs [\"pk_set\"]:\n            topping = models.Topping.objects.filter (topping_id = topping_id) [0]\n            pizza.toppings.add ( topping, through_defaults = {\"create_user\": instance_user, \"create_time\": instance_time, \"update_user\": instance_user, \"update_time\":instance_time, \"deleted\": False})\n            topping_ids.append (topping_id)\n\n        for topping_id in topping_ids:\n            kwargs  [\"pk_set\"].remove (topping_id)\n\n</code></pre>\n\n<p>Removing the elements from pk_set was needed to avoid duplicate (with null values for the created_by, etc, columns) records.</p>\n\n<p>Any suggestions for improvements would be appreciated.</p>\n"}], "owner": {"reputation": 71, "user_id": 2333312, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3f99cff6d8425197d39b7643998c8b19?s=128&d=identicon&r=PG", "display_name": "user2333312", "link": "https://stackoverflow.com/users/2333312/user2333312"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 101, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1577844637, "creation_date": 1577814800, "last_edit_date": 1577817528, "question_id": 59547167, "link": "https://stackoverflow.com/questions/59547167/django-modelforms-how-to-set-default-values-for-junction-table", "title": "Django ModelForms - How to set default values for junction table", "body": "<p>I'm using ModelForms to populate two tables with a Many-to-Many relationship.  To simplify the problem description,  I'll use the typical example, where there is a Pizza table and a Toppings table, and a pizza can have many toppings and a topping can be on many pizzas.  The real application  has more  complicated tables, but I think it comes down to the relationships defined here:  <a href=\"https://docs.djangoproject.com/en/3.0/topics/db/models/#many-to-many-relationships\" rel=\"nofollow noreferrer\">https://docs.djangoproject.com/en/3.0/topics/db/models/#many-to-many-relationships</a></p>\n\n<p>A junction table, where each record consists of pizza_id and a topping_id and a create_time, ties the two tables together.  The application has a Modelform for the pizza and the toppings tables, but only a model (no ModelForm) for the junction table.  The junction table records are created automatically by django because of the Many-to-Many relationship between the tables.  The Pizza model has this \"field\" :</p>\n\n<pre><code>toppings=models.ManyToManyField (Topping, through=PizzaToppingJunction)\n</code></pre>\n\n<p>to define the ManyToMany relationship.</p>\n\n<p>In this example, the \"create_time field is required to be not null. (Note:  There are additional fields, i.e a user id field, and a \"deleted\" boolean that I need to set.  I'm using create_time as an example).</p>\n\n<p>When the Pizza record is saved, django tries to create the junction table but fails because it has no value for the required field.  I'm guessing I should use \"through_defaults\" but I have not been successful.</p>\n\n<p>I tried catching the m2m_changed signal and adding the relationships to pk_set: </p>\n\n<pre><code>(pizza.toppings.add ( topping, through_defaults = {\"create_time\": instance_time})\n</code></pre>\n\n<p>That (understandably) results in a recursion error.</p>\n\n<p>I tried manually creating them: </p>\n\n<pre><code>PizzaToppingsJunction.objects.create (create_time = instance_tine, pizza_id = pizza_id, topping_id = topping_id).\n</code></pre>\n\n<p>That doesn't seem to have any effect on downstream processing because django attempts to create junction table records that are missing the required field. I think the code clears that table after the m2m_changed signal, so that makes sense.</p>\n\n<p>Any guidance is appreciated.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["python", "raspberry-pi", "serial-port"], "comments": [{"owner": {"reputation": 6426, "user_id": 4471715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af5026f58744339680af12b163aad259?s=128&d=identicon&r=PG&f=1", "display_name": "A STEFANI", "link": "https://stackoverflow.com/users/4471715/a-stefani"}, "edited": false, "score": 0, "creation_date": 1577829367, "post_id": 59547160, "comment_id": 105266415, "body": "What is the question?"}, {"owner": {"reputation": 11, "user_id": 12365706, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAHoymtH4-1iGDF1NECTDjpO4eOYwv2RgCv3FmrUuo=k-s128", "display_name": "Sai kumar", "link": "https://stackoverflow.com/users/12365706/sai-kumar"}, "reply_to_user": {"reputation": 6426, "user_id": 4471715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af5026f58744339680af12b163aad259?s=128&d=identicon&r=PG&f=1", "display_name": "A STEFANI", "link": "https://stackoverflow.com/users/4471715/a-stefani"}, "edited": false, "score": 0, "creation_date": 1577866405, "post_id": 59547160, "comment_id": 105270617, "body": "need to configure relay with 8bit hex code  using raspberry pi so that relay will switch on and off"}], "owner": {"reputation": 11, "user_id": 12365706, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAHoymtH4-1iGDF1NECTDjpO4eOYwv2RgCv3FmrUuo=k-s128", "display_name": "Sai kumar", "link": "https://stackoverflow.com/users/12365706/sai-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1577956606, "creation_date": 1577814764, "last_edit_date": 1577956606, "question_id": 59547160, "link": "https://stackoverflow.com/questions/59547160/how-to-switch-on-off-relay-using-serial-port-on-raspberrry-pi", "title": "How to switch on/off relay using serial port on raspberrry pi?", "body": "<p>Inputs to relay must be a 8 bit number (something like <code>00000001</code> or <code>00000010</code>) which will be pass on the serial port communication to switch on and off the relays, but the following code is not working ...</p>\n\n<pre><code>import serial \nser = serial.Serial( port='/dev/ttyUSB0', baudrate=9600,\\parity=serial.PARITY_NONE,stopbits=serial.STOPBITS_ONE,bytesize=serial.EIGHTBITS, timeout=0)\nif ser.isOpen()==True:\n    print(\"device opened\")\n    print(\"connected to: \" + ser.portstr)\n    command = b'\\x1'\n    ser.read()\n    while True:\n        ser.write(command) \n</code></pre>\n"}, {"tags": ["python", "function"], "comments": [{"owner": {"reputation": 1331, "user_id": 2576153, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/d899b73ca8fb940c8ddf9a70a4285cf1?s=128&d=identicon&r=PG&f=1", "display_name": "pragman", "link": "https://stackoverflow.com/users/2576153/pragman"}, "edited": false, "score": 0, "creation_date": 1577816103, "post_id": 59547132, "comment_id": 105263678, "body": "Here&#39;s one way to do it:      from types import FunctionType     foo = FunctionType(compile(&quot;def foo(name): print(&#39;hello &#39;+name)&quot;, &#39;&#39;, &#39;exec&#39;), globals())()     foo(&quot;name&quot;)  Basically, you create a function that returns a function with arguments and use it.  Note the function call at the end of the <code>foo = FunctionType...</code> line"}], "owner": {"reputation": 207, "user_id": 7015406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faa36cfedf346568262deb80d11025c4?s=128&d=identicon&r=PG", "display_name": "DarklingArcher", "link": "https://stackoverflow.com/users/7015406/darklingarcher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "closed_date": 1577815291, "answer_count": 0, "score": 1, "last_activity_date": 1577814607, "creation_date": 1577814607, "question_id": 59547132, "link": "https://stackoverflow.com/questions/59547132/how-to-use-functiontype-to-define-a-function-that-takes-positional-arguments", "closed_reason": "Duplicate", "title": "How to use FunctionType to define a function that takes positional arguments?", "body": "<p>I'm practicing the alternative way of defining functions in Python, using FunctionType. I can create this way a simple function that prints <code>hello world</code>:</p>\n\n<pre><code>from types import FunctionType\n\nfoo = FunctionType(compile(\"print('hello world')\", '', 'exec'), globals())\n\nfoo()\n</code></pre>\n\n<p>This function does not take positional arguments:</p>\n\n<pre><code>from types import FunctionType\n\nfoo = FunctionType(compile(\"print('hello world')\", '', 'exec'), globals())\n\nfoo('bar')\n</code></pre>\n\n<pre><code>Traceback (most recent call last):\n  File \"C:/Users/M/AppData/Local/Programs/Python/Python37/test_FunctionType.py\", line 5, in &lt;module&gt;\n    foo('bar')\nTypeError: &lt;module&gt;() takes 0 positional arguments but 1 was given\n</code></pre>\n\n<p>How to use FunctionType to define a function that takes positional arguments?</p>\n"}]