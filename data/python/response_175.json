[{"tags": ["python", "dictionary", "input"], "comments": [{"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 8, "creation_date": 1526515186, "post_id": 50381530, "comment_id": 87779105, "body": "Something like <code>&#39;&#39;.join([myDict[c] for c in input_string])</code>"}, {"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 4, "creation_date": 1526515278, "post_id": 50381530, "comment_id": 87779130, "body": "Or if you&#39;re feeling frisky: <code>&#39;&#39;.join(map(myDict.get, input_string))</code>"}, {"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "reply_to_user": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 1, "creation_date": 1526515683, "post_id": 50381530, "comment_id": 87779220, "body": "@chrisz - You may have just triggered a <code>map</code> verses list comprehension war! ... and its <code>&#39;&#39;.join(myDict[c] for c in input_string)</code> (smile)."}, {"owner": {"reputation": 19411, "user_id": 6640099, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/tf1sO.jpg?s=128&g=1", "display_name": "Christian Dean", "link": "https://stackoverflow.com/users/6640099/christian-dean"}, "reply_to_user": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1526516312, "post_id": 50381530, "comment_id": 87779374, "body": "I&#39;d vote for the first option @chrisz. <a href=\"https://ideone.com/fLNB9y\" rel=\"nofollow noreferrer\">It seems to be a bit faster</a>."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 4, "creation_date": 1526516780, "post_id": 50381530, "comment_id": 87779473, "body": "Note, passing a <code>list</code> directly to <code>.join</code> is always faster in CPython, because non-sequences are converted to  list internally."}, {"owner": {"reputation": 31, "user_id": 9803187, "user_type": "registered", "profile_image": "https://graph.facebook.com/2102691156411876/picture?type=large", "display_name": "Trey Wessel", "link": "https://stackoverflow.com/users/9803187/trey-wessel"}, "edited": false, "score": 0, "creation_date": 1526523928, "post_id": 50381530, "comment_id": 87780702, "body": "what would we put in the parameters when we call it"}, {"owner": {"reputation": 1394, "user_id": 1771963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18964e9a56348e4001a9f2db0ecfd80b?s=128&d=identicon&r=PG", "display_name": "Ramon Medeiros", "link": "https://stackoverflow.com/users/1771963/ramon-medeiros"}, "edited": false, "score": 0, "creation_date": 1597859377, "post_id": 50381530, "comment_id": 112273455, "body": "Were you doing google foobar ?"}], "answers": [{"comments": [{"owner": {"reputation": 19411, "user_id": 6640099, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/tf1sO.jpg?s=128&g=1", "display_name": "Christian Dean", "link": "https://stackoverflow.com/users/6640099/christian-dean"}, "edited": false, "score": 0, "creation_date": 1526515808, "post_id": 50381592, "comment_id": 87779250, "body": "Why use an explicit <code>for</code> loop here?"}, {"owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 2, "creation_date": 1526515889, "post_id": 50381592, "comment_id": 87779272, "body": "This will create a bunch of intermediate memory products (partially finished strings) that the <code>&#39;&#39;.join</code> approach avoids."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 19411, "user_id": 6640099, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/tf1sO.jpg?s=128&g=1", "display_name": "Christian Dean", "link": "https://stackoverflow.com/users/6640099/christian-dean"}, "edited": false, "score": 1, "creation_date": 1526516727, "post_id": 50381592, "comment_id": 87779463, "body": "@ChristianDean nothing wrong with a for-loop, but definitely I would avoid the <code>+</code> string in a loop anti-pattern."}, {"owner": {"reputation": 19411, "user_id": 6640099, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/tf1sO.jpg?s=128&g=1", "display_name": "Christian Dean", "link": "https://stackoverflow.com/users/6640099/christian-dean"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1526517067, "post_id": 50381592, "comment_id": 87779512, "body": "I didn&#39;t say there was anything wrong with using a <code>for</code> loop per se, @juanpa.arrivillaga. I simply asked the OP why, in this case, he was using one, since there were better options."}, {"owner": {"reputation": 23, "user_id": 9803019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f843152290d064bd567c4d960aae2eb0?s=128&d=identicon&r=PG&f=1", "display_name": "antonwp", "link": "https://stackoverflow.com/users/9803019/antonwp"}, "edited": false, "score": 1, "creation_date": 1526518573, "post_id": 50381592, "comment_id": 87779774, "body": "It was my first approach to the question, I now know the join() method is a better solution. Thank you"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1526527665, "post_id": 50381592, "comment_id": 87781438, "body": "<code>join</code> is far, far superior to the <code>for</code> loop (which should be listed second, if not removed altogether)."}], "tags": [], "owner": {"reputation": 23, "user_id": 9803019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f843152290d064bd567c4d960aae2eb0?s=128&d=identicon&r=PG&f=1", "display_name": "antonwp", "link": "https://stackoverflow.com/users/9803019/antonwp"}, "is_accepted": false, "score": 2, "last_activity_date": 1526527857, "last_edit_date": 1526527857, "creation_date": 1526515725, "answer_id": 50381592, "question_id": 50381530, "link": "https://stackoverflow.com/questions/50381530/is-there-a-way-to-use-dictionaries-in-python-to-input-a-string-and-output-anothe/50381592#50381592", "title": "Is there a way to use dictionaries in python to input a string and output another string using the keys?", "body": "<p>A concise function is below using the join method suggested by @Patrick Haugh</p>\n\n<pre><code>def braille(string, brailleDict):\n    return ''.join(brailleDict[char] for char in string)\n</code></pre>\n\n<p>Use:</p>\n\n<pre><code>print braille('abcdefg', myDict)\n</code></pre>\n\n<p>Where myDict is the braille dictionary you have outlined.</p>\n"}], "owner": {"reputation": 31, "user_id": 9803187, "user_type": "registered", "profile_image": "https://graph.facebook.com/2102691156411876/picture?type=large", "display_name": "Trey Wessel", "link": "https://stackoverflow.com/users/9803187/trey-wessel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 217, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1526529785, "creation_date": 1526515150, "last_edit_date": 1526529785, "question_id": 50381530, "link": "https://stackoverflow.com/questions/50381530/is-there-a-way-to-use-dictionaries-in-python-to-input-a-string-and-output-anothe", "title": "Is there a way to use dictionaries in python to input a string and output another string using the keys?", "body": "<p>I'm trying to write a program that takes a string of letters and translates them into a sequence of braille, where 1 is a raised bump and 0 is a flat service. right now I have created a dictionary that has all of the letters of the alphabet translated into their braille letter.</p>\n\n<pre><code>myDict = {'a' : '100000','b': '110000','c': '100100','d': '100110','e': '100010','f': '110100','g': '110110','h':'110010','i': '010100','j':'010110','k': '101000','l': '111000','m':'101100','n': '101110','o': '101010','p': '111100','q': '111110','r': '111010','s':'011100', 't': '011110','u': '101001','v': '111001','w': '010111','x': '101101','y': '101111','z': '101011'}\n</code></pre>\n\n<p>now I'm wanting to see if there is a way that I could input a name like 'Steve' and have it output to its respective braille counterpart which would be 011100011110100010111001100010</p>\n\n<p>Edit: this is what i have now.</p>\n\n<pre><code>myDict = {'a' : '100000','b': '110000','c': '100100','d': '100110','e': '100010','f': '110100','g': '110110','h':'110010','i': '010100','j':'010110','k': '101000','l': '111000','m':'101100','n': '101110','o': '101010','p': '111100','q': '111110','r': '111010','s':'011100', 't': '011110','u': '101001','v': '111001','w': '010111','x': '101101','y': '101111','z': '101011'}\ndef braille(string, myDict):\n    a = ''\n    for char in string:\n        a.join(myDict[char])\n        return a\nchar = str(input())\nbraille(char, myDict)\n</code></pre>\n\n<p>I get what is going on I just don't know what I need to put in my parameters when I call it. Also, it seems like when I run it it's not returning anything</p>\n"}, {"tags": ["python", "python-webbrowser"], "comments": [{"owner": {"reputation": 19411, "user_id": 6640099, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/tf1sO.jpg?s=128&g=1", "display_name": "Christian Dean", "link": "https://stackoverflow.com/users/6640099/christian-dean"}, "edited": false, "score": 0, "creation_date": 1526515177, "post_id": 50381512, "comment_id": 87779103, "body": "<i>&quot;I think this may have something to do with the fact I am using an online IDE&quot;</i> - Yes, that&#39;s correct. Think about. You&#39;re running Python in an <i>online environment</i>, on a <i>remote</i> server. Would the code you&#39;re running affect your <i>local</i> machine?"}], "answers": [{"tags": [], "owner": {"reputation": 16, "user_id": 9900617, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Yev Barkalov", "link": "https://stackoverflow.com/users/9900617/yev-barkalov"}, "is_accepted": true, "score": 0, "last_activity_date": 1528252599, "creation_date": 1528252599, "answer_id": 50711509, "question_id": 50381512, "link": "https://stackoverflow.com/questions/50381512/issues-with-webbrowser-in-online-python-ide/50711509#50711509", "title": "Issues with webbrowser in online Python IDE", "body": "<p>Yev from Repl.it here, that would be returning false because webbrowser probably needs a browser to execute and, additionally, repl.it runs code on headless machines, meaning there is no gui to run browsers in</p>\n"}], "owner": {"reputation": 1312, "user_id": 9717184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3ad422fe492f8008ce2945c57c5148d?s=128&d=identicon&r=PG", "display_name": "connectyourcharger", "link": "https://stackoverflow.com/users/9717184/connectyourcharger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 50711509, "answer_count": 1, "score": -1, "last_activity_date": 1558392084, "creation_date": 1526515016, "last_edit_date": 1558392084, "question_id": 50381512, "link": "https://stackoverflow.com/questions/50381512/issues-with-webbrowser-in-online-python-ide", "title": "Issues with webbrowser in online Python IDE", "body": "<p>I am trying to use an online IDE called repl.it and use the webbrowser module to open a webpage. This is the code I use:</p>\n\n<pre><code>from webbrowser import *\nwebbrowser.open('https://reddit.com')\n</code></pre>\n\n<p>But the function returns <code>False</code> as indicated in the online console.</p>\n\n<p>Does this possibly have to do with the fact that the program runs in a remote server? If so, does <code>repl.it</code> have a hook between the server and the client to be able to perform web browser manipulations?</p>\n"}, {"tags": ["python", "tensorflow", "keras"], "comments": [{"owner": {"reputation": 745, "user_id": 1854664, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9c0f06a1f812b29bcbc267ae343f052b?s=128&d=identicon&r=PG", "display_name": "marcopah", "link": "https://stackoverflow.com/users/1854664/marcopah"}, "edited": false, "score": 0, "creation_date": 1526584871, "post_id": 50381504, "comment_id": 87813897, "body": "what is <code>train_dense</code>, <code>train_embed</code> and <code>ae_input</code>?"}, {"owner": {"reputation": 981, "user_id": 7292937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zduRq.jpg?s=128&g=1", "display_name": "liamhawkins", "link": "https://stackoverflow.com/users/7292937/liamhawkins"}, "reply_to_user": {"reputation": 745, "user_id": 1854664, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9c0f06a1f812b29bcbc267ae343f052b?s=128&d=identicon&r=PG", "display_name": "marcopah", "link": "https://stackoverflow.com/users/1854664/marcopah"}, "edited": false, "score": 0, "creation_date": 1526636468, "post_id": 50381504, "comment_id": 87832015, "body": "<code>train_dense_scaled</code> and <code>train_embed</code> are the training data matrices. <code>ae_input</code> is the concatenation layer as described above."}, {"owner": {"reputation": 745, "user_id": 1854664, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9c0f06a1f812b29bcbc267ae343f052b?s=128&d=identicon&r=PG", "display_name": "marcopah", "link": "https://stackoverflow.com/users/1854664/marcopah"}, "edited": false, "score": 0, "creation_date": 1526636581, "post_id": 50381504, "comment_id": 87832096, "body": "Are they all numpy arrays? It could look like one of them are Tensor objects."}, {"owner": {"reputation": 981, "user_id": 7292937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zduRq.jpg?s=128&g=1", "display_name": "liamhawkins", "link": "https://stackoverflow.com/users/7292937/liamhawkins"}, "reply_to_user": {"reputation": 745, "user_id": 1854664, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9c0f06a1f812b29bcbc267ae343f052b?s=128&d=identicon&r=PG", "display_name": "marcopah", "link": "https://stackoverflow.com/users/1854664/marcopah"}, "edited": false, "score": 0, "creation_date": 1526815618, "post_id": 50381504, "comment_id": 87882771, "body": "That is sort of the point. Instead of the usual way of feeding the graph numpy arrays, I am wondering if it is possible to use the output of an intermediate layer (a tensor) to fit the model."}], "owner": {"reputation": 981, "user_id": 7292937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zduRq.jpg?s=128&g=1", "display_name": "liamhawkins", "link": "https://stackoverflow.com/users/7292937/liamhawkins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 166, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1526815128, "creation_date": 1526514969, "last_edit_date": 1526815128, "question_id": 50381504, "link": "https://stackoverflow.com/questions/50381504/use-intermediate-layer-values-to-fit-model", "title": "Use intermediate layer values to fit model", "body": "<p>I am trying to train an autoencoder whose input is some dense features concatenated with the output of an embedding layer. I therefore want to use the output of the concatenation layer for both the input and the labels to train the autoencoder:</p>\n\n<pre><code># Inputs\ndense = Input(shape=(train_dense_scaled.shape[1],))\nsequences = Input(shape=(train_embed.shape[1],))\n\n# Embedding layer\nembed = Embedding(vocab_size, 20, input_length=num_embed_cols)(sequences)\nflatten = Flatten()(embed)\n\nae_input = concatenate([dense, flatten])    \n\n# Autoencoder\ne_128 = Dense(units=128, activation='relu', kernel_initializer=initializer)(ae_input)\ne_64 = Dense(units=64, activation='relu', kernel_initializer=initializer)(e_128)\ndecoded = Dense(units=128, activation='relu', kernel_initializer=initializer)(e_64)\n\nmodel = Model(inputs=[sequences,dense], outputs=decoded)\nmodel.compile(loss='mse', optimizer='adam')\nmodel.fit(x=[train_dense_scaled,train_embed], y=ae_input, epochs=200, batch_size=128)\n</code></pre>\n\n<p>I get the following error</p>\n\n<pre><code>AttributeError                            Traceback (most recent call last)\n&lt;ipython-input-25-f29037b9f7ab&gt; in &lt;module&gt;()\n---&gt; 50 model.fit(x=[train_dense_scaled,train_embed], y=ae_inputs, epochs=200, batch_size=128)\n...\nAttributeError: 'Tensor' object has no attribute 'ndim'\n</code></pre>\n\n<p>The output of the concatenation layer <code>ae_input</code> is the input into the autoencoder, and thus what I want to use as labels to train the model. I'm assuming this is where I'm going wrong and not properly feeding the output of this intermediate layer to the <code>model.fit()</code> method.</p>\n"}, {"tags": ["python"], "answers": [{"tags": [], "owner": {"reputation": 984, "user_id": 4368167, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Shdwef0HlGs/AAAAAAAAAAI/AAAAAAAAA4c/BTAay9UipAI/photo.jpg?sz=128", "display_name": "Guy Gangemi", "link": "https://stackoverflow.com/users/4368167/guy-gangemi"}, "is_accepted": true, "score": 0, "last_activity_date": 1528269046, "creation_date": 1528269046, "answer_id": 50714243, "question_id": 50381501, "link": "https://stackoverflow.com/questions/50381501/python-logging-handler-only-log-level-log-less-than-error/50714243#50714243", "title": "Python: Logging handler only log level log less than ERROR", "body": "<p>Draw back of your solution is that you'd have to subclass every handler you'd like to use.</p>\n\n<p>A context filter is much clearer in it's intent:</p>\n\n<pre><code>class MaxFilter:\n    def __init__(max_level):\n        self.max_level = max_level\n\n    def filter(self, record):\n        if record.levelno &lt; self.max_level:\n            return True\n</code></pre>\n\n<p>And can be applied to any handler as such:</p>\n\n<pre><code>any_concrete_handler.addFilter(MaxFilter(logging.INFO))\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 9803177, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "TheDude", "link": "https://stackoverflow.com/users/9803177/thedude"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 222, "favorite_count": 0, "accepted_answer_id": 50714243, "answer_count": 1, "score": 2, "last_activity_date": 1528269046, "creation_date": 1526514945, "question_id": 50381501, "link": "https://stackoverflow.com/questions/50381501/python-logging-handler-only-log-level-log-less-than-error", "title": "Python: Logging handler only log level log less than ERROR", "body": "<p>I need a way for a python logger to not log ERROR or above. Need it to only log less than ERROR.</p>\n\n<pre><code>import logging\nfrom logging import StreamHandler\n\ndef get_log_formatter():\n    datefmt = '%b %d %y %H:%M:%S'\n    formatter = logging.Formatter('%(asctime)s [%(module)s:%(levelname)s] %(message)s',\n                          datefmt=datefmt)\n    return formatter\n\nclass MyHandler(StreamHandler):\n    def __init__(self, max_level, *args, **kwargs):\n        super(MyHandler, self).__init__(*args, **kwargs)\n        self.max_level = max_level\n    def emit(self, record):\n        if record.levelno &gt;= self.max_level:\n            return\n        return super(MyHandler, self).emit(record)\n\nhandl = MyHandler(logging.ERROR)\nhandl.setLevel(logging.INFO)\nhandl.setFormatter(get_log_formatter())\nlogger = logging.getLogger(\"testing_logger\")\nlogger.addHandler(handl)\nlogger.setLevel(logging.INFO)\n</code></pre>\n\n<p>This seems to work, but does it make sense? Is there a better way to filter out the logline?</p>\n\n<pre><code>In [3]: logger_num = 0\n\nIn [4]: logger = remake()\n\nIn [5]: logger.info(\"Why\")\nMay 16 01 16:50:10 [&lt;ipython-input-5-c350362291ad&gt;:INFO] Why\n\nIn [6]: logger.warn(\"Why\")\nMay 16 01 16:50:13 [&lt;ipython-input-6-56809439d5a4&gt;:WARNING] Why\n\nIn [7]: logger.error(\"Why\")\n\nIn [8]:\n</code></pre>\n"}, {"tags": ["python", "django"], "answers": [{"tags": [], "owner": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "is_accepted": true, "score": 0, "last_activity_date": 1526516817, "creation_date": 1526516817, "answer_id": 50381714, "question_id": 50381491, "link": "https://stackoverflow.com/questions/50381491/have-a-foreignkey-with-multiple-values-proper-solution/50381714#50381714", "title": "Have a ForeignKey with multiple values? Proper solution?", "body": "<p>Foreign key relations allow multiple instances of <em>this</em> model to be associated with a single instance of the <em>other</em> model, i.e.</p>\n\n<pre><code>class Profile(models.Model):\n    ...\n    courses = models.ForeignKey(Course)\n</code></pre>\n\n<p>only allows one <code>Course</code> to be associated with a given <code>Profile</code> (but multiple <code>Profile</code>s can be associated with a single <code>Course</code>). You may think of it like a parent > child relation where <code>Course</code> is a parent and <code>Profile</code>s are children.</p>\n\n<p>If you need to associate multiple <code>Course</code>s to be associated with a <code>Profile</code> (and still be able to have multiple <code>Profile</code>s associated with a <code>Course</code>), you should use a <code>ManyToMany</code> relation, such as:</p>\n\n<pre><code>class Profile(models.Model):\n    ...\n    courses = models.ManyToMany(Course)\n</code></pre>\n\n<p>This effectively creates a third, hidden table (called a <code>through</code> table) which links both sides:</p>\n\n<p>This is an example of how that through table looks like. Note that you don't have to create this manually as normally there is no model (it is implicit) and the database table is automatically generated by Django:</p>\n\n<pre><code>class ProfileCourse(models.Model):\n    profile = models.ForeignKey(Profile)\n    course = models.ForeignKey(Profile)\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 8298221, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oAzqH.png?s=128&g=1", "display_name": "Macoryx", "link": "https://stackoverflow.com/users/8298221/macoryx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 50381714, "answer_count": 1, "score": 1, "last_activity_date": 1526516817, "creation_date": 1526514890, "question_id": 50381491, "link": "https://stackoverflow.com/questions/50381491/have-a-foreignkey-with-multiple-values-proper-solution", "title": "Have a ForeignKey with multiple values? Proper solution?", "body": "<p>I've decided to embark on the task of creating my own LMS in Django for a final project in my Advanced Python course, unfortunately, I have reached a wall in terms of progress.</p>\n\n<p>I have two models.</p>\n\n<ul>\n<li>Course model, consists of multiple members (ManyToMany field)</li>\n<li>Profile model, consists of several courses (ForeignKey field)</li>\n</ul>\n\n<p>My question is, how can I have the Profile model linked to multiple courses?</p>\n\n<p>Here is my code so far:</p>\n\n<pre><code>class Course(models.Model):\n    name = models.CharField(max_length=20)\n    members = models.ManyToManyField(User, related_name=(\"Members\"))\n    def __str__(self):\n        return str(self.name)\n\nclass Profile(models.Model):\n    role = models.CharField(max_length=1, choices=roles)\n    user = models.OneToOneField(User, on_delete=models.CASCADE)\n    courses = models.ForeignKey(Course)\n\n    USERNAME_FIELD = 'user'\n    REQUIRED_FIELDS = ['user', 'password', 'role']\n    def __str__(self):\n        return str(self.user)\n\n    @receiver(post_save, sender=User)\n    def create_or_update_user_profile(sender, instance, created, **kwargs):\n        if created:\n            Profile.objects.create(user=instance)\n        instance.profile.save\n</code></pre>\n"}, {"tags": ["python", "bash", "arguments", "sh", "quotes"], "answers": [{"tags": [], "owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": true, "score": 0, "last_activity_date": 1526528662, "creation_date": 1526528662, "answer_id": 50383013, "question_id": 50381489, "link": "https://stackoverflow.com/questions/50381489/how-to-edit-argument-format/50383013#50383013", "title": "How to edit argument format", "body": "<p>You just want to combine <code>$2</code> and <code>$3</code> in the same argument, no?</p>\n\n<pre><code>#!/bin/bash\n./script.py \"${1}\" \"${2} ${3}\"\n</code></pre>\n"}], "owner": {"reputation": 315, "user_id": 9494541, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-i38mCT2wEzs/AAAAAAAAAAI/AAAAAAAADSE/hdeDSZ6ElCA/photo.jpg?sz=128", "display_name": "Caucasian Malaysian", "link": "https://stackoverflow.com/users/9494541/caucasian-malaysian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27, "favorite_count": 1, "accepted_answer_id": 50383013, "answer_count": 1, "score": 0, "last_activity_date": 1526528662, "creation_date": 1526514874, "question_id": 50381489, "link": "https://stackoverflow.com/questions/50381489/how-to-edit-argument-format", "title": "How to edit argument format", "body": "<p>I have a python script...it gets called different then bash</p>\n\n<pre><code>./script.py 'arg1' 'arg2 stillarg2'\n</code></pre>\n\n<p>In the python script there is two arguments.</p>\n\n<p>Now I want to call that with a bash script</p>\n\n<pre><code>#!/bin/bash\n./script.py ${1} ${2} ${3}\n</code></pre>\n\n<p>I want to call the bash script by in this syntax</p>\n\n<pre><code>./script.sh arg1 arg2 stillarg2\n</code></pre>\n\n<p>In the Bash script there is 3 arguments and no quotes.</p>\n\n<p>So is there a way that by using a bash script, could call the python script with arguments. Without quotes and 3 arguments?.</p>\n\n<p>I've Tried:</p>\n\n<pre><code>#!/bin/bash\n./script.py \"'${1}'\" \"'${2} ${3}'\"\n</code></pre>\n\n<p>Outcome is: </p>\n\n<pre><code>operation not support\n</code></pre>\n"}, {"tags": ["python", "pandas", "merge", "outer-join"], "answers": [{"tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": true, "score": 2, "last_activity_date": 1526519605, "creation_date": 1526519605, "answer_id": 50381972, "question_id": 50381472, "link": "https://stackoverflow.com/questions/50381472/outer-join-adding-missing-values-from-right-as-zeroes-or-nan/50381972#50381972", "title": "Outer Join adding Missing Values from Right as Zeroes or NaN", "body": "<p>You can using <code>merge</code> with <code>unstack</code></p>\n\n<pre><code>s=df2.merge(df1,on='Name',how='outer')\ns.set_index(['Name','Color','Shape']).Value.unstack(-1,fill_value=0).stack().reset_index().sort_values(['Shape','Name'])\nOut[263]: \n     Name  Color     Shape  0\n0   Frank    Red    Circle  0\n3    John  Green    Circle  0\n6   Sarah    Red    Circle  1\n9     Tom   Blue    Circle  4\n1   Frank    Red    Square  0\n4    John  Green    Square  2\n7   Sarah    Red    Square  0\n10    Tom   Blue    Square  4\n2   Frank    Red  Triangle  7\n5    John  Green  Triangle  0\n8   Sarah    Red  Triangle  0\n11    Tom   Blue  Triangle  0\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 8679484, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f7b5c2398d62eba001e7bb97c970d358?s=128&d=identicon&r=PG&f=1", "display_name": "pacificdune", "link": "https://stackoverflow.com/users/8679484/pacificdune"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 50381972, "answer_count": 1, "score": 0, "last_activity_date": 1526519605, "creation_date": 1526514788, "last_edit_date": 1526516402, "question_id": 50381472, "link": "https://stackoverflow.com/questions/50381472/outer-join-adding-missing-values-from-right-as-zeroes-or-nan", "title": "Outer Join adding Missing Values from Right as Zeroes or NaN", "body": "<p>I am trying to merge two PANDAS df in a very specific way.</p>\n\n<p>DF1 =</p>\n\n<pre><code>Name    Color\nTom     Blue\nFrank   Red\nJohn    Green\nSarah   Red\n</code></pre>\n\n<p>DF2 = </p>\n\n<pre><code>Name    Shape   Value\nTom     Circle      4\nTom     Square      4\nFrank   Triangle    7\nJohn    Square      2\nSarah   Circle      1\n</code></pre>\n\n<p>Desired result = DFM =</p>\n\n<pre><code>Name    Color   Shape   Value\nTom     Blue    Circle      4\nFrank   Red     Circle      0\nJohn    Green   Circle      0\nSarah   Red     Circle      1\nTom     Blue    Square      4\nFrank   Red     Square      0\nJohn    Green   Square      2\nSarah   Red     Square      0\nTom     Blue    Triangle    0\nFrank   Red     Triangle    7\nJohn    Green   Triangle    0\nSarah   Red     Triangle    0\n</code></pre>\n\n<p>An outer join gives me most of what I want, but not the zeroes.  Looking for some insight on an elegant way to do this.  Zeroes or simply NaN is fine since I can just substitute NaN with zero.</p>\n"}, {"tags": ["python", "arrays", "python-3.x"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user3850"}, "edited": false, "score": 2, "creation_date": 1526514787, "post_id": 50381448, "comment_id": 87779024, "body": "It would be nice of you to put /some/ effort into your question. For example, your expected output is invalid. Also, in Python we call this &quot;list&quot; not &quot;array&quot;. You should also show us what you have tried so far and how it has failed instead of expecting us to do your work for you. (And I&#39;m even ignoring the fact that your input is very unlikely to occur unless you have some serious problems elsewhere in your code.)"}, {"owner": {"reputation": 2051, "user_id": 5560898, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4d86a35f823fa394efcde4f98dca7ed5?s=128&d=identicon&r=PG&f=1", "display_name": "LunchBox", "link": "https://stackoverflow.com/users/5560898/lunchbox"}, "edited": false, "score": 0, "creation_date": 1526514873, "post_id": 50381448, "comment_id": 87779034, "body": "I&#39;m sorry. I am new to Python. I have like 1 month of experience using it :)"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 5, "creation_date": 1526514923, "post_id": 50381448, "comment_id": 87779043, "body": "How did you get this list? It looks like there&#39;s some bad upstream processing that should be adjusted, like a <code>list</code> call on a string or a loop over individual characters."}, {"owner": {"reputation": 2051, "user_id": 5560898, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4d86a35f823fa394efcde4f98dca7ed5?s=128&d=identicon&r=PG&f=1", "display_name": "LunchBox", "link": "https://stackoverflow.com/users/5560898/lunchbox"}, "edited": false, "score": 0, "creation_date": 1526515015, "post_id": 50381448, "comment_id": 87779067, "body": "I am reading a book and that was one of the sample files provided."}, {"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1526515130, "post_id": 50381448, "comment_id": 87779092, "body": "Do you read in your string using something like <code>[character for character in your_string]</code>?  If so, you should instead use <code>your_string.split(&#39;\\n&#39;)</code> from the beginning to avoid have to <code>join</code> later."}, {"owner": {"reputation": 2051, "user_id": 5560898, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4d86a35f823fa394efcde4f98dca7ed5?s=128&d=identicon&r=PG&f=1", "display_name": "LunchBox", "link": "https://stackoverflow.com/users/5560898/lunchbox"}, "edited": false, "score": 0, "creation_date": 1526515320, "post_id": 50381448, "comment_id": 87779136, "body": "I edited my post to show how I got the original input into my list."}, {"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 1, "creation_date": 1526515458, "post_id": 50381448, "comment_id": 87779171, "body": "Ah yea, calling list on a string creates an list of each character, call <code>pyperclip.paste().split(&#39;\\n&#39;)</code>"}, {"owner": {"reputation": 2051, "user_id": 5560898, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4d86a35f823fa394efcde4f98dca7ed5?s=128&d=identicon&r=PG&f=1", "display_name": "LunchBox", "link": "https://stackoverflow.com/users/5560898/lunchbox"}, "edited": false, "score": 0, "creation_date": 1526515593, "post_id": 50381448, "comment_id": 87779197, "body": "so guest_list = pyperclip.paste().split(&#39;\\n&#39;) ? like that?"}, {"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 1, "creation_date": 1526515627, "post_id": 50381448, "comment_id": 87779205, "body": "Yes, that will work.  I&#39;m confused as to what the purpose of copying and pasting is here however, instead of just calling <code>split(&#39;\\n&#39;)</code> on <code>ogl.read()</code>  You could even use <code>ogl.read().splitlines()</code>"}, {"owner": {"reputation": 2051, "user_id": 5560898, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4d86a35f823fa394efcde4f98dca7ed5?s=128&d=identicon&r=PG&f=1", "display_name": "LunchBox", "link": "https://stackoverflow.com/users/5560898/lunchbox"}, "edited": false, "score": 0, "creation_date": 1526515704, "post_id": 50381448, "comment_id": 87779223, "body": "Oh, the task is to open a text document and paste into a word document."}, {"owner": {"reputation": 2051, "user_id": 5560898, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4d86a35f823fa394efcde4f98dca7ed5?s=128&d=identicon&r=PG&f=1", "display_name": "LunchBox", "link": "https://stackoverflow.com/users/5560898/lunchbox"}, "edited": false, "score": 0, "creation_date": 1526515857, "post_id": 50381448, "comment_id": 87779265, "body": "I am good now, thanks for the help everyone."}], "answers": [{"comments": [{"owner": {"reputation": 2051, "user_id": 5560898, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4d86a35f823fa394efcde4f98dca7ed5?s=128&d=identicon&r=PG&f=1", "display_name": "LunchBox", "link": "https://stackoverflow.com/users/5560898/lunchbox"}, "edited": false, "score": 0, "creation_date": 1526515639, "post_id": 50381462, "comment_id": 87779211, "body": "I am pasting into a word doc and I am very new to Python. I am importing a text and pasting into a word doc."}, {"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "reply_to_user": {"reputation": 2051, "user_id": 5560898, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4d86a35f823fa394efcde4f98dca7ed5?s=128&d=identicon&r=PG&f=1", "display_name": "LunchBox", "link": "https://stackoverflow.com/users/5560898/lunchbox"}, "edited": false, "score": 0, "creation_date": 1526515672, "post_id": 50381462, "comment_id": 87779219, "body": "Ah, alright, I&#39;m not familiar with the pyperclip library."}], "tags": [], "owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "is_accepted": true, "score": 6, "last_activity_date": 1526536755, "last_edit_date": 1526536755, "creation_date": 1526514687, "answer_id": 50381462, "question_id": 50381448, "link": "https://stackoverflow.com/questions/50381448/array-combining-values/50381462#50381462", "title": "Array Combining Values", "body": "<p>Simply use <a href=\"https://docs.python.org/3/library/stdtypes.html#str.join\" rel=\"nofollow noreferrer\"><code>str.join</code></a> and <a href=\"https://docs.python.org/3/library/stdtypes.html#str.split\" rel=\"nofollow noreferrer\"><code>str.split</code></a>:</p>\n\n<pre><code>&gt;&gt;&gt; ''.join(x).split('\\n')\n['Prof. Plum', 'Miss Scarlet', 'Col. Mustard', 'Al Sweigart', 'Robocop']\n</code></pre>\n\n<p>Since you've updated your question to show how you read in the file, here is what you really should be doing:</p>\n\n<pre><code>with open('guests.txt') as ogl:\n    pyperclip.copy(ogl.read())\n    guest_list = pyperclip.paste().split('\\n')\n</code></pre>\n\n<p>Or something along those lines, although I'm not sure why you are doing the copy/paste thing.</p>\n"}], "owner": {"reputation": 2051, "user_id": 5560898, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4d86a35f823fa394efcde4f98dca7ed5?s=128&d=identicon&r=PG&f=1", "display_name": "LunchBox", "link": "https://stackoverflow.com/users/5560898/lunchbox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 50381462, "answer_count": 1, "score": 1, "last_activity_date": 1526536755, "creation_date": 1526514540, "last_edit_date": 1526515290, "question_id": 50381448, "link": "https://stackoverflow.com/questions/50381448/array-combining-values", "title": "Array Combining Values", "body": "<p>I have an array that looks like this:</p>\n\n<pre><code>guest_list = ['P', 'r', 'o', 'f', '.', ' ', 'P', 'l', 'u', 'm', '\\n', 'M', 'i', 's', 's', ' ', 'S', 'c', 'a', 'r', 'l', 'e', 't', '\\n', 'C', 'o', 'l', '.', ' ', 'M', 'u', 's', 't', 'a', 'r', 'd', '\\n', 'A', 'l', ' ', 'S', 'w', 'e', 'i', 'g', 'a', 'r', 't', '\\n', 'R', 'o', 'b', 'o', 'c', 'o', 'p']\n</code></pre>\n\n<p>What I want is an array that looks like this:</p>\n\n<pre><code>guest_list = ['Prof.Plum', 'Miss Scarlet', 'Col. Mustard', 'Al Sweigart', 'Robocop']\n</code></pre>\n\n<p>In other words, until '\\n' appears, I want all of the string values to be combined into 1 value.</p>\n\n<p>Any suggestions?</p>\n\n<p>Edit #1:</p>\n\n<p>Here is part of my original code:</p>\n\n<pre><code>ogl = open('guests.txt') #open guest list\npyperclip.copy(ogl.read()) #open guest list copy\nguest_list = list(pyperclip.paste())\n</code></pre>\n"}, {"tags": ["python"], "answers": [{"tags": [], "owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "is_accepted": true, "score": 8, "last_activity_date": 1526519277, "last_edit_date": 1526519277, "creation_date": 1526514430, "answer_id": 50381436, "question_id": 50381415, "link": "https://stackoverflow.com/questions/50381415/pythonic-way-to-perform-or-operation-based-on-value-of-a-string/50381436#50381436", "title": "Pythonic way to perform &lt;,&gt;,==,&lt;=, or &gt;= operation based on value of a string?", "body": "<p>You can use <code>operator</code>:</p>\n\n<pre><code>import operator\noperations = {'&gt;':'gt', '&gt;=':'ge', '&lt;':'lt', '==':'eq', '!=':'ne', '&lt;=':'le'}\ndef doit(op, *vals):\n  return getattr(operator, operations[op])(*vals)\n</code></pre>\n\n<p>Using <code>getattr</code> is the equivalent of calling <code>operator.eq</code>, <code>operator.lt</code>, etc, except that the string name of the function to be called is passed to <code>getattr</code>.</p>\n\n<p><strong>Edit</strong>: An even shorter solution entails importing specific functions from <code>operator</code>:</p>\n\n<pre><code>from operator import gt, ge, lt, eq, ne, le\noperations = {'&gt;':gt, '&gt;=':ge, '&lt;':lt, '==':eq, '!=':ne, '&lt;=':le}\ndef doit(op, *vals):\n  return operations[op](*vals)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "is_accepted": false, "score": 3, "last_activity_date": 1526516056, "last_edit_date": 1526516056, "creation_date": 1526515383, "answer_id": 50381555, "question_id": 50381415, "link": "https://stackoverflow.com/questions/50381415/pythonic-way-to-perform-or-operation-based-on-value-of-a-string/50381555#50381555", "title": "Pythonic way to perform &lt;,&gt;,==,&lt;=, or &gt;= operation based on value of a string?", "body": "<p>The second version in <a href=\"https://stackoverflow.com/a/50381436/908494\">Ajax1234's answer</a> is probably what you actually want, but, just for fun, you can even dynamically pull the operators out of the <code>operator</code> functions:</p>\n\n<pre><code>import inspect\nimport operator\nimport re\n\nops = inspect.getmembers(operator, callable)\npubops = (op for opname, op in ops if not opname.startswith('_'))\nopmatches = ((op, re.search('ame as a\\s*(.*?)\\s*b\\.', op.__doc__)) for op in pubops)\noperations = {match.group(1): op for op, match in opmatches if match}\n</code></pre>\n\n<p>Now <code>operations</code> has not only the comparison operators, but <em>every</em> operator that can be overridden.</p>\n\n<p>I'm not sure what this is useful for.<sup>1</sup> (I did say you probably want Ajax's answer.) But it was fun to slap together.</p>\n\n<hr>\n\n<p><sub>1. Best I can come up with: With a few more lines of code (using <code>ast</code>), you could write an <code>opexpr_eval</code> that only allows parenthesized operator expressions of <code>literal_eval</code>-able values and nothing else, which would be no more dangerous than <code>literal_eval</code> itself. (Even then, I'm not sure what good the iops will do you. Or matmul, since numpy arrays aren't literal-eval-able. But you can have fun testing whether <code>(1, (2, 3)) is (1, (2, 3))</code>. :)</sub></p>\n"}], "owner": {"reputation": 523, "user_id": 3754314, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/1739665361/picture?type=large", "display_name": "mmnormyle", "link": "https://stackoverflow.com/users/3754314/mmnormyle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 1, "accepted_answer_id": 50381436, "answer_count": 2, "score": 1, "last_activity_date": 1526519277, "creation_date": 1526514214, "question_id": 50381415, "link": "https://stackoverflow.com/questions/50381415/pythonic-way-to-perform-or-operation-based-on-value-of-a-string", "title": "Pythonic way to perform &lt;,&gt;,==,&lt;=, or &gt;= operation based on value of a string?", "body": "<p>Supposed I have a string <code>op</code> that can be equal to &lt;, >, ==, &lt;=, or >=.</p>\n\n<p>I want to perform the associated operation on two values. Is there a more pythonic way to do that than the simple if/else approach shown below?</p>\n\n<pre><code>def doit(op, val1, val2):\n     if op == \"&gt;\":\n         return val1 &gt; val2\n     elif op == \"&lt;\":\n         return val1 &lt; val2\n     etc....\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "image", "python-imaging-library"], "comments": [{"owner": {"reputation": 4139, "user_id": 8898218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/82CEl.jpg?s=128&g=1", "display_name": "InAFlash", "link": "https://stackoverflow.com/users/8898218/inaflash"}, "edited": false, "score": 0, "creation_date": 1526513958, "post_id": 50381372, "comment_id": 87778848, "body": "please show us the actual error"}, {"owner": {"reputation": 41, "user_id": 4660632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70b276a9e40f7d42dbf3093b878be2fc?s=128&d=identicon&r=PG&f=1", "display_name": "maverik_akagami", "link": "https://stackoverflow.com/users/4660632/maverik-akagami"}, "reply_to_user": {"reputation": 4139, "user_id": 8898218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/82CEl.jpg?s=128&g=1", "display_name": "InAFlash", "link": "https://stackoverflow.com/users/8898218/inaflash"}, "edited": false, "score": 0, "creation_date": 1526514723, "post_id": 50381372, "comment_id": 87779002, "body": "@Kalyan edited to show the errors"}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 4660632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70b276a9e40f7d42dbf3093b878be2fc?s=128&d=identicon&r=PG&f=1", "display_name": "maverik_akagami", "link": "https://stackoverflow.com/users/4660632/maverik-akagami"}, "edited": false, "score": 0, "creation_date": 1526515657, "post_id": 50381513, "comment_id": 87779217, "body": "I&#39;ve already tried it."}], "tags": [], "owner": {"reputation": 21, "user_id": 9803113, "user_type": "registered", "profile_image": "https://graph.facebook.com/1727578123988654/picture?type=large", "display_name": "Raphael", "link": "https://stackoverflow.com/users/9803113/raphael"}, "is_accepted": false, "score": 0, "last_activity_date": 1526515017, "creation_date": 1526515017, "answer_id": 50381513, "question_id": 50381372, "link": "https://stackoverflow.com/questions/50381372/pil-5-1-not-working/50381513#50381513", "title": "PIL 5.1 not working", "body": "<p>try upgrading pip. Use pip install --upgrade pip</p>\n"}], "owner": {"reputation": 41, "user_id": 4660632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70b276a9e40f7d42dbf3093b878be2fc?s=128&d=identicon&r=PG&f=1", "display_name": "maverik_akagami", "link": "https://stackoverflow.com/users/4660632/maverik-akagami"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 161, "favorite_count": 0, "closed_date": 1526701700, "answer_count": 1, "score": -1, "last_activity_date": 1526515017, "creation_date": 1526513843, "last_edit_date": 1526514695, "question_id": 50381372, "link": "https://stackoverflow.com/questions/50381372/pil-5-1-not-working", "closed_reason": "Duplicate", "title": "PIL 5.1 not working", "body": "<pre><code>from PIL import Image\n\n&gt;&gt;&gt; from PIL import Image\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"D:\\appa\\Python\\miniconda\\lib\\site-packages\\PIL\\Image.py\", line 60, in &lt;module&gt;\n    from . import _imaging as core\nImportError: DLL load failed: The specified module could not be found\n</code></pre>\n\n<p>import image shows that there is no module to import</p>\n\n<pre><code>Import PIL\nPIL.Image\n&gt;&gt;&gt; import PIL\n&gt;&gt;&gt; PIL.Image\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nAttributeError: module 'PIL' has no attribute 'Image'\n</code></pre>\n\n<p>Also shows the same error</p>\n\n<hr>\n\n<p>I have used </p>\n\n<pre><code>conda install Pillow\n</code></pre>\n\n<p>and it has installed <strong>Pillow = 5.1.1</strong>, I have also tried downgrading to <strong>Pillow = 5.1.0</strong></p>\n\n<hr>\n\n<p>Any solutions? Do I downgrade it to a lower version for it to work or is there something I have missed during installation.</p>\n"}, {"tags": ["python", "python-requests", "recaptcha", "invisible-recaptcha"], "comments": [{"owner": {"reputation": 439, "user_id": 5879710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7160222c938d8acefe68b0f603196ba?s=128&d=identicon&r=PG&f=1", "display_name": "UCProgrammer", "link": "https://stackoverflow.com/users/5879710/ucprogrammer"}, "edited": false, "score": 1, "creation_date": 1537402610, "post_id": 50381369, "comment_id": 91775041, "body": "you ever figure this out? I&#39;m stuck on the same part for preme. A requests based bot would  likely be ineffective due to tohru js and pooky on preme&#39;s site so selenium is a better alternative but I&#39;m still curious how to do this via requests."}, {"owner": {"reputation": 211, "user_id": 9773648, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-KcT8TH4k8SY/AAAAAAAAAAI/AAAAAAAAAGk/ebwCTI_lEzY/photo.jpg?sz=128", "display_name": "lucky simon", "link": "https://stackoverflow.com/users/9773648/lucky-simon"}, "reply_to_user": {"reputation": 439, "user_id": 5879710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7160222c938d8acefe68b0f603196ba?s=128&d=identicon&r=PG&f=1", "display_name": "UCProgrammer", "link": "https://stackoverflow.com/users/5879710/ucprogrammer"}, "edited": false, "score": 0, "creation_date": 1537454198, "post_id": 50381369, "comment_id": 91798556, "body": "nop never... you can DM me on twitter if needed @lucky_simFR"}, {"owner": {"reputation": 439, "user_id": 5879710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7160222c938d8acefe68b0f603196ba?s=128&d=identicon&r=PG&f=1", "display_name": "UCProgrammer", "link": "https://stackoverflow.com/users/5879710/ucprogrammer"}, "edited": false, "score": 0, "creation_date": 1537454508, "post_id": 50381369, "comment_id": 91798762, "body": "Will do. Check out <a href=\"https://github.com/dzt/captcha-harvester\" rel=\"nofollow noreferrer\">github.com/dzt/captcha-harvester</a> and <a href=\"https://github.com/ryan9918/captcha-harvester\" rel=\"nofollow noreferrer\">github.com/ryan9918/captcha-harvester</a> . Unfortunately, I believe this is what needs to be done. I plan on getting starting with learning flask and more so following Ryan&#39;s today. Luckily, flask is supposedly really easy to learn"}], "owner": {"reputation": 211, "user_id": 9773648, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-KcT8TH4k8SY/AAAAAAAAAAI/AAAAAAAAAGk/ebwCTI_lEzY/photo.jpg?sz=128", "display_name": "lucky simon", "link": "https://stackoverflow.com/users/9773648/lucky-simon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1612, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1526513811, "creation_date": 1526513811, "question_id": 50381369, "link": "https://stackoverflow.com/questions/50381369/python-requests-form-recaptcha", "title": "python requests form recaptcha", "body": "<p>i've been trying to do a requests form using python but i'm blocked b the recaptcha.</p>\n\n<p>I need the g-recaptcha-response to fill the entire form but i have no idea of how to get it.</p>\n\n<p>I've been trying things but I have no clue of what i'm doing. I don't know anything about captcha.</p>\n\n<p>here is my code: </p>\n\n<pre><code>url = url_add_to_cart\nc.get(url)\nc.post(url, data=add_to_cart_FORM, headers={\"Refered\": link_article})\npage = c.get(link_article)\nif (page.status_code == requests.codes.ok):\n    print (\"ok\")\nelse:\n    print (\"not ok\")\n\nurl1 = \"https://www.supremenewyork.com/checkout.json\"\nc.get(url)\n\nt = requests.get('http://ip.42.pl/raw')\ntt = BeautifulSoup(t.text, 'html.parser')\nip = tt.text\nprint (ip)\n\npage = c.get(link_checkout)\nsoup = BeautifulSoup(page.text, 'html.parser')\nfind_class = soup.find(class_='g-recaptcha')\nget_captcha_token = find_class.get('data-sitekey')\ntry:\n    content = requests.post(\n        'https://www.google.com/recaptcha/api/siteverify',\n        data={\n            'secret': RECAPTCHA_SECRET,\n            'response': get_captcha_token,\n            'remoteip': ip\n        }\n    ).content\nexcept:\n    print (\"fail\")\nprint (get_captcha_token)\n\nc.post(url, data=payload_FORM, headers={\"Refered\": link_checkout})\npage = c.get(link_checkout)\n# page_to_print_for_test = BeautifulSoup(page.text, 'html.parser')\n# print (page_to_print_for_test.prettify())\nif (page.status_code == requests.codes.ok):\n    print (\"ok\")\nelse:\n    print (\"not ok\")\n</code></pre>\n\n<p>here is the source code of captcha: </p>\n\n<p><a href=\"https://i.stack.imgur.com/pWrTU.png\" rel=\"nofollow noreferrer\">image of the HTML code related to the captcha</a></p>\n\n<p>If you need more infos, I will add everything!\nthank you very much.</p>\n\n<p>it is one of the last thing to do to finish my code. (I need to code it properly ^^)</p>\n"}, {"tags": ["python", "django", "redis", "django-rq"], "comments": [{"owner": {"reputation": 2946, "user_id": 751621, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1c39aa04d169149a5f792167abcdbbbd?s=128&d=identicon&r=PG", "display_name": "craigcaulfield", "link": "https://stackoverflow.com/users/751621/craigcaulfield"}, "edited": false, "score": 0, "creation_date": 1526516818, "post_id": 50381338, "comment_id": 87779479, "body": "What behaviour were you expecting and what are you actually getting?"}, {"owner": {"reputation": 49, "user_id": 7392442, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49dae9d56956dc61846fbeee98002865?s=128&d=identicon&r=PG&f=1", "display_name": "takeiteasy", "link": "https://stackoverflow.com/users/7392442/takeiteasy"}, "reply_to_user": {"reputation": 2946, "user_id": 751621, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1c39aa04d169149a5f792167abcdbbbd?s=128&d=identicon&r=PG", "display_name": "craigcaulfield", "link": "https://stackoverflow.com/users/751621/craigcaulfield"}, "edited": false, "score": 0, "creation_date": 1526534495, "post_id": 50381338, "comment_id": 87783205, "body": "I want to display all the products that have the image, the images are taken from the dropbox storages and this process is very long, so I want to fix it via queue in django rq"}], "owner": {"reputation": 49, "user_id": 7392442, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49dae9d56956dc61846fbeee98002865?s=128&d=identicon&r=PG&f=1", "display_name": "takeiteasy", "link": "https://stackoverflow.com/users/7392442/takeiteasy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1526514342, "creation_date": 1526513464, "last_edit_date": 1526514342, "question_id": 50381338, "link": "https://stackoverflow.com/questions/50381338/how-to-use-django-rq-in-a-class-based-listview", "title": "How to use Django-RQ in a class based ListView?", "body": "<p>I can't figure out how to use Django-RQ in a sample queryset:</p>\n\n<pre><code>class PartnerCatalogueView(generic.ListView):\n    \"\"\"\n    Browse all products in the catalogue\n    \"\"\"\n    template_name = 'catalogue/partner.html'\n    paginate_by = 9\n    model = Product\n    context_object_name = 'prod'\n\n    def get_queryset(self, **kwargs):\n        queryset = super(PartnerCatalogueView, \n         self).get_queryset()\n        queryset = queryset.filter(stockrecords__partner__id=self.kwargs['pk'])\n         return queryset\n</code></pre>\n"}, {"tags": ["python", "pandas", "csv", "merge"], "answers": [{"tags": [], "owner": {"reputation": 785, "user_id": 8055932, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-H7J5tVWHAmc/AAAAAAAAAAI/AAAAAAAABco/2UxuTrYVxeQ/photo.jpg?sz=128", "display_name": "Ryan Tam", "link": "https://stackoverflow.com/users/8055932/ryan-tam"}, "is_accepted": true, "score": 2, "last_activity_date": 1526513547, "creation_date": 1526513547, "answer_id": 50381346, "question_id": 50381329, "link": "https://stackoverflow.com/questions/50381329/how-to-merge-2-csv-files-together-by-multiple-columns-in-python/50381346#50381346", "title": "How to merge 2 CSV files together by multiple columns in Python", "body": "<p>I believe you need to use <code>['Date', 'Ticker']</code> instead of just <code>'Date'</code>. Also you might need to specify the <code>how</code> argument depending on what you want.</p>\n"}, {"tags": [], "owner": {"reputation": 521, "user_id": 8624538, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/ed12631d92aa6e386fd69811b7c99b8a?s=128&d=identicon&r=PG&f=1", "display_name": "Humi", "link": "https://stackoverflow.com/users/8624538/humi"}, "is_accepted": false, "score": 0, "last_activity_date": 1526517356, "creation_date": 1526517356, "answer_id": 50381755, "question_id": 50381329, "link": "https://stackoverflow.com/questions/50381329/how-to-merge-2-csv-files-together-by-multiple-columns-in-python/50381755#50381755", "title": "How to merge 2 CSV files together by multiple columns in Python", "body": "<p>Try this:</p>\n\n<pre><code> merged=a.merge(b, how='left',on=['Ticker', 'Date'])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1376, "user_id": 6190930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dfbba9c5af37b4eb37bc508a355fda7?s=128&d=identicon&r=PG", "display_name": "pgngp", "link": "https://stackoverflow.com/users/6190930/pgngp"}, "is_accepted": false, "score": 0, "last_activity_date": 1526518663, "creation_date": 1526518663, "answer_id": 50381886, "question_id": 50381329, "link": "https://stackoverflow.com/questions/50381329/how-to-merge-2-csv-files-together-by-multiple-columns-in-python/50381886#50381886", "title": "How to merge 2 CSV files together by multiple columns in Python", "body": "<p>You can try the following code:</p>\n\n<pre><code>a = pd.read_csv(\"File1.csv\", \"\\t\")\nb = pd.read_csv(\"File2.csv\", \"\\t\")\nmerged = pd.merge(a, b, how='inner', on=['Ticker', 'Date'])\nprint merged\n</code></pre>\n\n<p>If <code>File1.csv</code> is:</p>\n\n<pre><code>Ticker  Date    Marketcap \nA   2002-03-14  600000\nA   2002-06-18  520000\nABB 2004-03-16  400000\nABB 2005-07-11  800000\nAD  2004-03-16  680000\n</code></pre>\n\n<p>And <code>File2.csv</code> is:</p>\n\n<pre><code>Ticker  Date    Open    Close\nA   2002-03-14  580000  500000\nABB 2004-03-16  500000  420000\nAD  2004-03-16  700000  670000\n</code></pre>\n\n<p>Then the output of the above code will be:</p>\n\n<pre><code>  Ticker        Date  Marketcap     Open   Close\n0      A  2002-03-14      600000  580000  500000\n1    ABB  2004-03-16      400000  500000  420000\n2     AD  2004-03-16      680000  700000  670000\n</code></pre>\n\n<p><hr>\nIf you want all rows from <code>File1.csv</code> and only matching rows from <code>File2.csv</code>, you can use this instead:</p>\n\n<pre><code>merged = pd.merge(a, b, how='left', on=['Ticker', 'Date'])\n</code></pre>\n\n<p>This will produce:</p>\n\n<pre><code>  Ticker        Date  Marketcap       Open     Close\n0      A  2002-03-14      600000  580000.0  500000.0\n1      A  2002-06-18      520000       NaN       NaN\n2    ABB  2004-03-16      400000  500000.0  420000.0\n3    ABB  2005-07-11      800000       NaN       NaN\n4     AD  2004-03-16      680000  700000.0  670000.0\n</code></pre>\n"}], "owner": {"reputation": 1553, "user_id": 8378885, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/10159144384065441/picture?type=large", "display_name": "HelloToEarth", "link": "https://stackoverflow.com/users/8378885/hellotoearth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2940, "favorite_count": 0, "accepted_answer_id": 50381346, "answer_count": 3, "score": 0, "last_activity_date": 1526518663, "creation_date": 1526513423, "question_id": 50381329, "link": "https://stackoverflow.com/questions/50381329/how-to-merge-2-csv-files-together-by-multiple-columns-in-python", "title": "How to merge 2 CSV files together by multiple columns in Python", "body": "<p>I have two CSV files. <strong>File 1</strong> that looks like:</p>\n\n<pre><code>Ticker  |    Date     |   Marketcap \n  A     |  2002-03-14 |    600000\n  A     |  2002-06-18 |    520000\n                   .\n                   .\n  ABB   |  2004-03-16 |    400000\n  ABB   |  2005-07-11 |    800000\n                   .\n                   .\n  AD    |  2004-03-16 |    680000\n                   .\n                   .\n</code></pre>\n\n<p><strong>File 2</strong> like:</p>\n\n<pre><code>Ticker  |    Date     |     Open    |    Close   |\n  A     |  2002-03-14 |    580000   |    500000  |\n  ABB   |  2002-03-14 |    500000   |    420000  |\n  AD    |  2002-03-16 |    700000   |    670000  |\n                          .\n                          .\n                          .\n                          .\n</code></pre>\n\n<p>The periods indicate that values continue on for a large number of entries for each ticker for both <strong>File 1</strong> and <strong>File 2</strong>. The first file has all values for every date and every ticker listed all in one line continuously whereas the second file has all values for every year and ticker listed one-by-one.</p>\n\n<p>What I want to do is merge files 1 and 2 based off both \"Ticker\" and \"Date\" to look like:</p>\n\n<pre><code>Ticker  |    Date     |   Marketcap |    Open     |    Close   |\n  A     |  2002-03-14 |    600000   |    580000   |    500000  |\n  ABB   |  2002-03-14 |    520000   |    500000   |    420000  |\n                                 .\n                                 .\n</code></pre>\n\n<p>I've tried merging files using something like:</p>\n\n<pre><code>a = pd.read_csv(\"File1.csv\")\nb = pd.read_csv(\"File2.csv\")\nmerged = a.merge(b, on='Date')\n</code></pre>\n\n<p>But I don't think this accounts for both Date and Ticker at once.</p>\n"}, {"tags": ["python", "csv"], "answers": [{"tags": [], "owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "is_accepted": true, "score": 1, "last_activity_date": 1526514934, "creation_date": 1526514934, "answer_id": 50381498, "question_id": 50381324, "link": "https://stackoverflow.com/questions/50381324/get-specific-column-from-csv-file-in-python/50381498#50381498", "title": "Get specific column from csv file in python", "body": "<p>You can build a sublist of the first three cells in the row then build floats as you create a new list from them.</p>\n\n<pre><code>firstList = []\nsecondList = []\n\nwith open('file.csv') as file:\n    fileReader = csv.reader(file, delimiter=',')\n    for row in fileReader:\n        firstList.append([float(cell) for cell in row[:3]])\n        secondList.append(row[4])\n</code></pre>\n"}], "owner": {"reputation": 149, "user_id": 9803118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85d6d63f1771556e54c662634ce867f9?s=128&d=identicon&r=PG&f=1", "display_name": "Horatiuw", "link": "https://stackoverflow.com/users/9803118/horatiuw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 50381498, "answer_count": 1, "score": 1, "last_activity_date": 1526515032, "creation_date": 1526513392, "question_id": 50381324, "link": "https://stackoverflow.com/questions/50381324/get-specific-column-from-csv-file-in-python", "title": "Get specific column from csv file in python", "body": "<p>I'm new in python programming and i have a question about reading from csv file.\nWhat am I trying to do is to split in 2 my csv file and save in two list.\nSo form my next csv file:</p>\n\n<pre><code>    5.1,3.5,1.5,0.2,setosa\n    4.9,3.0,1.4,0.2,setosa\n    4.6,3.1,1.5,0.2,setosa\n</code></pre>\n\n<p>I need my lists to look like:</p>\n\n<pre><code>firstList = [ [5.1, 3.5, 1.5, 0.2], [4.9, 3.0, 1.4, 0.2], [4.6, 3.1, 1.5, 0.2] ]\nsecondList = ['setosa', 'setosa', 'setosa']\n</code></pre>\n\n<p>I tried different time, but my closest result is the next one:</p>\n\n<pre><code>firstList = []\nsecondList = []\n\nwith open('file.csv') as file:\n    fileReader = csv.reader(file, delimiter=',')\n    for row in fileReader:\n        firstList.append(row)\n        secondList.append(row[4])\n</code></pre>\n\n<p>And the output for this one is:</p>\n\n<pre><code>firstList = [ ['5.1', '3.5', '1.5', '0.2', 'setosa'], ['4.9', '3.0', '1.4', '0.2', 'setosa'], ['4.6', '3.1', '1.5', '0.2', 'setosa'] ]\nsecondList = ['setosa', 'setosa', 'setosa']\n</code></pre>\n\n<p>I just want to get rid of string 'setosa' from my firstList and also convert everything else into int\nAny help would be grateful. \nThank you!</p>\n"}, {"tags": ["python", "django", "heroku"], "answers": [{"tags": [], "owner": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "is_accepted": true, "score": 3, "last_activity_date": 1526514978, "creation_date": 1526514978, "answer_id": 50381506, "question_id": 50381314, "link": "https://stackoverflow.com/questions/50381314/when-deploy-on-heroku-report-typeerror-expected-str-bytes-or-os-pathlike-obje/50381506#50381506", "title": "When deploy on Heroku, report TypeError: expected str, bytes or os.PathLike object, not tuple", "body": "<p>The error is in your <code>STATIC_ROOT</code> setting. As the error message states, you are passing a tuple instead of a path:</p>\n\n<pre><code>STATIC_ROOT = (BASE_DIR, \"staticfiles\")\n</code></pre>\n\n<p>change it to:</p>\n\n<pre><code>STATIC_ROOT = os.path.join(BASE_DIR, \"staticfiles\")\n</code></pre>\n"}], "owner": {"reputation": 13851, "user_id": 7301792, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/K6k1M.png?s=128&g=1", "display_name": "AbstProcDo", "link": "https://stackoverflow.com/users/7301792/abstprocdo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 974, "favorite_count": 0, "accepted_answer_id": 50381506, "answer_count": 1, "score": 3, "last_activity_date": 1600229853, "creation_date": 1526513305, "last_edit_date": 1526515096, "question_id": 50381314, "link": "https://stackoverflow.com/questions/50381314/when-deploy-on-heroku-report-typeerror-expected-str-bytes-or-os-pathlike-obje", "title": "When deploy on Heroku, report TypeError: expected str, bytes or os.PathLike object, not tuple", "body": "<p>I disable <code>collectstatic</code> with command </p>\n\n<pre><code>heroku config:set DISABLE_COLLECTSTATIC=1\n</code></pre>\n\n<p>After successfully push my project to Heroku, manually <code>collectstatic</code> as below:</p>\n\n<pre><code>$ heroku run python manage.py collectstatic\n</code></pre>\n\n<p>Unfortunately, Heroku report errors referring to <code>manage.py</code></p>\n\n<pre><code>Running python manage.py collectstatic on \u2b22 fierce-cove-94300... up, run.6296 (Free)\n/app/.heroku/python/lib/python3.6/site-packages/psycopg2/__init__.py:144: UserWarning: The psycopg2 wheel package will be renamed from release 2.8; in order to keep installing from binary please use \"pip install psycopg2-binary\" instead. For details see: &lt;http://initd.org/psycopg/docs/install.html#binary-install-from-pypi&gt;.\n  \"\"\")\nTraceback (most recent call last):\n  File \"manage.py\", line 22, in &lt;module&gt;\n    execute_from_command_line(sys.argv)\n  File \"/app/.heroku/python/lib/python3.6/site-packages/django/core/management/__init__.py\", line 364, in execute_from_command_line\n    utility.execute()\n  File \"/app/.heroku/python/lib/python3.6/site-packages/django/core/management/__init__.py\", line 356, in execute\n    self.fetch_command(subcommand).run_from_argv(self.argv)\n  File \"/app/.heroku/python/lib/python3.6/site-packages/django/core/management/base.py\", line 283, in run_from_argv\n    self.execute(*args, **cmd_options)\n  File \"/app/.heroku/python/lib/python3.6/site-packages/django/core/management/base.py\", line 330, in execute\n    output = self.handle(*args, **options)\n  File \"/app/.heroku/python/lib/python3.6/site-packages/django/contrib/staticfiles/management/commands/collectstatic.py\", line 173, in handle\n    if self.is_local_storage() and self.storage.location:\n  File \"/app/.heroku/python/lib/python3.6/site-packages/django/utils/functional.py\", line 239, in inner\n    return func(self._wrapped, *args)\n  File \"/app/.heroku/python/lib/python3.6/site-packages/django/utils/functional.py\", line 35, in __get__\n    res = instance.__dict__[self.name] = self.func(instance)\n  File \"/app/.heroku/python/lib/python3.6/site-packages/django/core/files/storage.py\", line 283, in location\n    return abspathu(self.base_location)\n  File \"/app/.heroku/python/lib/python3.6/posixpath.py\", line 371, in abspath\n    path = os.fspath(path)\nTypeError: expected str, bytes or os.PathLike object, not tuple\n</code></pre>\n\n<p><strong>settings.py</strong></p>\n\n<pre><code>#Heroku Setting\ncwd = os.getcwd()\nif cwd == \"/app\" or cwd[:4] == \"/tmp\":\n    import dj_database_url\n    DATABASES = { #DATABASES plurual\n        \"default\": dj_database_url.config(default=\"postgres://localhost\"),\n    }\n\n    #Honor the \"X-Forwarded-Proto\" header for request.is_secure().\n    SECURE_PROXY_SSL_HEADER = (\"HTTP_X_FORWARDED_PROTO\", 'https')\n\n    # Allow all host headers\n    ALLOWED_HOSTS = ['*']\n\n    #Static asset configuration\n    BASE_DIR = os.path.dirname(os.path.abspath(__file__))\n    STATIC_ROOT = (BASE_DIR, \"staticfiles\")\n    STATICFILES_DIRS = (\n        os.path.join(BASE_DIR, 'static'),\n    )\n</code></pre>\n\n<p>How to solve such a problem?</p>\n"}, {"tags": ["python", "django", "django-2.0"], "answers": [{"comments": [{"owner": {"reputation": 38834, "user_id": 3705840, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/a7ybc.png?s=128&g=1", "display_name": "lmiguelvargasf", "link": "https://stackoverflow.com/users/3705840/lmiguelvargasf"}, "edited": false, "score": 1, "creation_date": 1526513310, "post_id": 50381309, "comment_id": 87778687, "body": "omg, I cannot believe it, yes you are totally right. Thanks!!"}], "tags": [], "owner": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "is_accepted": true, "score": 2, "last_activity_date": 1526513260, "creation_date": 1526513260, "answer_id": 50381309, "question_id": 50381278, "link": "https://stackoverflow.com/questions/50381278/django-2-0-noreversematch-at-url-pledges-group-7/50381309#50381309", "title": "Django 2.0: NoReverseMatch at /url/ (/pledges/group/7/)", "body": "<p>The new syntax requires the use of <a href=\"https://docs.djangoproject.com/en/2.0/ref/urls/#django.urls.path\" rel=\"nofollow noreferrer\"><code>path</code></a> function. For example:</p>\n\n<pre><code>from django.urls import path\n\n...\npath('pledge/&lt;group_id&gt;/', views.pledge, name='pledge_by_group'),\n</code></pre>\n"}], "owner": {"reputation": 38834, "user_id": 3705840, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/a7ybc.png?s=128&g=1", "display_name": "lmiguelvargasf", "link": "https://stackoverflow.com/users/3705840/lmiguelvargasf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 348, "favorite_count": 1, "accepted_answer_id": 50381309, "answer_count": 1, "score": 2, "last_activity_date": 1583264538, "creation_date": 1526513068, "last_edit_date": 1583264538, "question_id": 50381278, "link": "https://stackoverflow.com/questions/50381278/django-2-0-noreversematch-at-url-pledges-group-7", "title": "Django 2.0: NoReverseMatch at /url/ (/pledges/group/7/)", "body": "<p>I just have upgraded from Django 1.11 to 2.0. These are the urls I have for one Django application:</p>\n\n<pre><code>urlpatterns = [\n    url(r'^logout/$', views.logout, name='logout'),\n    url(r'^$', views.home, name='home'),\n    url(r'^pledge/(?P&lt;group_id&gt;[0-9]+)/$',\n        views.pledge, name='pledge_by_group'),\n    # I have more urls, but I have omitted them since they are not relevant\n    url(r'^404/$', views.bad_request, name='404')\n]\n</code></pre>\n\n<p>After upgrading, I checked everything was fine. Then, I changed:</p>\n\n<pre><code>url(r'^pledge/(?P&lt;group_id&gt;[0-9]+)/$', views.pledge, name='pledge_by_group')\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>url('pledge/&lt;int:group_id&gt;/', views.pledge, name='pledge_by_group'),\n</code></pre>\n\n<p>in order to take advantage of <a href=\"https://docs.djangoproject.com/en/2.0/releases/2.0/#simplified-url-routing-syntax\" rel=\"nofollow noreferrer\">simplified URL routing syntax</a> in Django 2.0. However, I am getting the following error when I try to access <code>http://localhost:8000/pledges/group/7/</code>:</p>\n\n<blockquote>\n  <p>NoReverseMatch at /pledges/group/7/\n  Reverse for 'pledge_by_group' with keyword arguments '{'group_id': '7'}' not found. 1 pattern(s) tried: ['pledge//']</p>\n</blockquote>\n\n<p>This is my view:</p>\n\n<pre><code>@login_required(redirect_field_name='')\ndef group_pledge(request, group_id):\n    \"\"\"Some docstring...\"\"\"\n    # Some code that is not relevant to the problem\n\n    context = {\n        'pledge_url':  reverse('pledges:pledge_by_group',\n                        kwargs={'group_id': group_id}),\n    } # context has more values, but for practical reasons I don't include them\n\n    return render(request, 'pledges/home.html', context)\n</code></pre>\n\n<p>According to the error, the problem is in this line:</p>\n\n<pre><code>reverse('pledges:pledge_by_group', kwargs={'group_id': group_id})\n</code></pre>\n\n<p>Can somebody tell me what is going on and how to fix it?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 444, "user_id": 9796174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9dStb.jpg?s=128&g=1", "display_name": "Helium_1s2", "link": "https://stackoverflow.com/users/9796174/helium-1s2"}, "edited": false, "score": 0, "creation_date": 1526513054, "post_id": 50381267, "comment_id": 87778635, "body": "I&#39;m a little confused -- what would the expected output be? Would it be <code>[-1, -1, 1, 1, -1, ...]</code>? Or would it be <code>[train_00000.png, train_00001.png, ...]</code>? Or something completely different?"}, {"owner": {"reputation": 9302, "user_id": 8300135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eaa9ded8087b3af42dd463c95696733?s=128&d=identicon&r=PG&f=1", "display_name": "SpghttCd", "link": "https://stackoverflow.com/users/8300135/spghttcd"}, "edited": false, "score": 1, "creation_date": 1526513352, "post_id": 50381267, "comment_id": 87778696, "body": "pandas imports these kinds oft Text files in a very convenient way. You&#39;ll geht any columns you want as arrays. <code>import pandas as pd     df = pd.read_table(filename, sep=&#39; &#39;)</code> just habe a look at the docs, there are plenty oft keywords to adjust your import, e.g. <code>usecols=[0, 2]</code> would only import the Text columns of your file"}], "answers": [{"comments": [{"owner": {"reputation": 1170, "user_id": 6745924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6mm6L.png?s=128&g=1", "display_name": "machetazo", "link": "https://stackoverflow.com/users/6745924/machetazo"}, "edited": false, "score": 0, "creation_date": 1526514048, "post_id": 50381297, "comment_id": 87778874, "body": "the only problem I see with this solution is that the <code>1</code> from the name of the first file would also be removed"}, {"owner": {"reputation": 1304, "user_id": 5566217, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WDhzG.jpg?s=128&g=1", "display_name": "Preston Hager", "link": "https://stackoverflow.com/users/5566217/preston-hager"}, "reply_to_user": {"reputation": 1170, "user_id": 6745924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6mm6L.png?s=128&g=1", "display_name": "machetazo", "link": "https://stackoverflow.com/users/6745924/machetazo"}, "edited": false, "score": 1, "creation_date": 1526514140, "post_id": 50381297, "comment_id": 87778893, "body": "@machetazo It would not because Python only looks at the ends of the strings when stripping characters. So because it is &quot;padded&quot; with <code>.png</code> it will not delete any of the other characters."}, {"owner": {"reputation": 453, "user_id": 8577452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50ec0bc8483359f4abb8bb9841100571?s=128&d=identicon&r=PG&f=1", "display_name": "Steven Chan", "link": "https://stackoverflow.com/users/8577452/steven-chan"}, "edited": false, "score": 0, "creation_date": 1526517227, "post_id": 50381297, "comment_id": 87779539, "body": "@PrestonHager Thanks for your answer but I am looking for a new array that only contains -1&#39;s and 1&#39;s. Please refer to my edit and I will accept your answer if you can actually solve the problem. Sorry for my wording ambiguity!"}, {"owner": {"reputation": 1304, "user_id": 5566217, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WDhzG.jpg?s=128&g=1", "display_name": "Preston Hager", "link": "https://stackoverflow.com/users/5566217/preston-hager"}, "reply_to_user": {"reputation": 453, "user_id": 8577452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50ec0bc8483359f4abb8bb9841100571?s=128&d=identicon&r=PG&f=1", "display_name": "Steven Chan", "link": "https://stackoverflow.com/users/8577452/steven-chan"}, "edited": false, "score": 0, "creation_date": 1526517938, "post_id": 50381297, "comment_id": 87779658, "body": "@Steven, Ok! Check it out. I think my new edit will solve it."}], "tags": [], "owner": {"reputation": 1304, "user_id": 5566217, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WDhzG.jpg?s=128&g=1", "display_name": "Preston Hager", "link": "https://stackoverflow.com/users/5566217/preston-hager"}, "is_accepted": true, "score": 1, "last_activity_date": 1526518234, "last_edit_date": 1526518234, "creation_date": 1526513179, "answer_id": 50381297, "question_id": 50381267, "link": "https://stackoverflow.com/questions/50381267/how-to-extract-all-the-1s-and-1s-from-a-text-file-using-python/50381297#50381297", "title": "How to extract all the -1&#39;s and 1&#39;s from a text file using python", "body": "<p>Just get all the file contents and loop through it with the seperation whitespaces. </p>\n\n<pre><code>ones = []\nfor i in file_con.split():\n  try:\n    num = int(i)\n    ones.append(num)\n  except:\n    pass\n</code></pre>\n\n<p>This will get any entry that is a number. You can also use if statements if you just want the 1 or -1 to parse. Replace the try statement with:</p>\n\n<pre><code>if i == \"1\":\n  ones.append(1)\nif i == \"-1\":\n  ones.append(-1)\n</code></pre>\n\n<p>It is also probably possible to do this with pandas, but I don't know enough to give a good solution. If you go the pandas way I suggest reading a few tutorials on it and the documentation. </p>\n"}], "owner": {"reputation": 453, "user_id": 8577452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50ec0bc8483359f4abb8bb9841100571?s=128&d=identicon&r=PG&f=1", "display_name": "Steven Chan", "link": "https://stackoverflow.com/users/8577452/steven-chan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 50381297, "answer_count": 1, "score": 0, "last_activity_date": 1526518234, "creation_date": 1526512951, "last_edit_date": 1526517075, "question_id": 50381267, "link": "https://stackoverflow.com/questions/50381267/how-to-extract-all-the-1s-and-1s-from-a-text-file-using-python", "title": "How to extract all the -1&#39;s and 1&#39;s from a text file using python", "body": "<p>I have a text file that follows a pattern like this:</p>\n\n<blockquote>\n  <p>train_00000.png   -1\n  train_00001.png -1\n  train_00002.png 1\n  train_00003.png 1\n  train_00004.png -1\n  train_00005.png -1\n  train_00006.png 1\n  train_00007.png 1\n  train_00008.png -1\n  train_00009.png -1\n  train_00010.png -1\n  train_00011.png 1\n  train_00012.png -1\n  train_00013.png 1\n  train_00014.png -1\n  train_00015.png -1\n  train_00016.png -1\n  train_00017.png -1\n  train_00018.png -1\n  train_00019.png -1\n  train_00020.png -1\n  train_00021.png 1\n  train_00022.png 1\n  train_00023.png -1\n  train_00024.png 1\n  train_00025.png -1\n  train_00026.png 1\n  train_00027.png 1\n  train_00028.png 1\n  train_00029.png 1\n  train_00030.png -1\n  train_00031.png 1</p>\n</blockquote>\n\n<p>I am trying to extract all the -1's and 1's from this text file and then list them in an array using python. I am new to python and struggle in implementing a method to achieve this goal. Can anyone help me with this? Thanks in advance!</p>\n\n<p>Edit: Sorry for not making this question clear. My intent is to extract all the -1's and 1's from the text file(not the 1's contained in the image name, i.e., the 1 in \"train_00001.png\" should not be extracted) and put these -1's and 1's into a new array. So my output array should be [-1, -1, 1, 1, -1, -1...]. I do apologize for the ambiguity in my original question but really appreciate your answers!</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 444, "user_id": 9796174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9dStb.jpg?s=128&g=1", "display_name": "Helium_1s2", "link": "https://stackoverflow.com/users/9796174/helium-1s2"}, "edited": false, "score": 0, "creation_date": 1526512918, "post_id": 50381245, "comment_id": 87778612, "body": "Can you please post what the program currently outputs, as well as what you expect it to output?"}], "answers": [{"tags": [], "owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "is_accepted": false, "score": 0, "last_activity_date": 1526514262, "last_edit_date": 1526514262, "creation_date": 1526513828, "answer_id": 50381370, "question_id": 50381245, "link": "https://stackoverflow.com/questions/50381245/alternate-way-to-code-this-function-without-re-regular-expression-in-python/50381370#50381370", "title": "Alternate way to code this function without &#39;re&#39; (regular expression) in Python 3", "body": "<p>Your friend is using <a href=\"https://regex101.com/r/uWUeGS/1\" rel=\"nofollow noreferrer\">the regular expression <code>\\w+</code></a> to match all strings of \"word characters\". In <a href=\"https://docs.python.org/3/library/re.html\" rel=\"nofollow noreferrer\"><code>re</code></a>, \"word characters\" means:</p>\n\n<blockquote>\n  <p>Matches Unicode word characters; this includes most characters that can be part of a word in any language, as well as numbers and the underscore.</p>\n</blockquote>\n\n<p>Really, you probably don't want to include numbers and underscores, just letters. Your friend probably did this because\u2026 well, most regular expression solutions are \"quick &amp; dirty\" instead of precise; it's just shorter to specify <code>\\w</code> than what you actually want, and it works for your sample inputs, so that's what they did.</p>\n\n<p>So, for your first example, it'll match:</p>\n\n<pre><code>['Neill', 'and', 'Nathan', 'left', 'the', 'school']\n</code></pre>\n\n<p>For each one, it's calling that <code>hfunc</code>, and substituting the result in place of the original word. That's what <a href=\"https://docs.python.org/3/library/re.html#re.sub\" rel=\"nofollow noreferrer\"><code>re.sub</code></a> does.</p>\n\n<hr>\n\n<p>If you want to do the same thing without using <code>re</code>, you can group the words in the same way, and loop over the groups manually. For example, with <a href=\"https://docs.python.org/3/library/itertools.html#itertools.groupby\" rel=\"nofollow noreferrer\"><code>itertools.groupby</code></a>, to group characters by whether they're letters or not (without the hacky numbers-and-underscores bit):</p>\n\n<pre><code>for isletters, group in itertools.groupby(sentence, key=str.isalpha):\n    print(isletters, list(group))\n</code></pre>\n\n<p>If you run that and look at the output, you should be able to see what to do. First, we want to <code>join</code> each group back into a string. Then, for the ones where <code>isletters</code> is true, we want to call that <code>hfunc</code> (but let's rename it, and its parameter, to something more meaningful\u2026). Then <code>join</code> all the results back up. So:</p>\n\n<pre><code>def fixword(word): # was hfunc\n    if word.lower() == c.lower():\n        return b.upper()\n    elif word.lower() == b.lower():\n        return c.upper()\n    else:\n        return word\n\nnewsentence = []\nfor isletters, group in itertools.groupby(sentence, key=str.isalpha):\n    word = ''.join(group)\n    if isletters:\n        word = fixword(word)\n    newsentence.append(word)\nreturn ''.join(newsentence)\n</code></pre>\n\n<p>If you want to keep track of whether anything was changed, you can do that, as you go along:</p>\n\n<pre><code>foundb, foundc = False, False\n\ndef fixword(word): # was hfunc\n    nonlocal foundb, foundb\n    if word.lower() == c.lower():\n        foundc = True\n        return b.upper()\n    elif word.lower() == b.lower():\n        foundb = True\n        return c.upper()\n    else:\n        return word\n\nnewsentence = []\nfor isletters, group in itertools.groupby(sentence, key=str.isalpha):\n    word = ''.join(group)\n    if isletters:\n        word = fixword(word)\n        if word == \n    newsentence.append(word)\nif not foundb:\n    return f'Cannot be found: {b}'\nelif not foundc:\n    return f'Cannot be found: {c}'\nelse:\n    return ''.join(newsentence)\n</code></pre>\n\n<hr>\n\n<p>If you don't understand how that <code>groupby</code> works\u2026 well, the \"roughly equivalent\" code in the docs probably won't help you without a bit more study, but you can easily write something less flexible that gives the same output for this case. It's probably worth trying it. Here's a pseudocode framework to get your started:</p>\n\n<pre><code>currentword, isletters = [], True\nfor ch in sentence:\n    if ch.isalpha():\n        if isletters:\n            add the current word to newsentence\n            start a new letters word\n        else:\n            current_word.append(ch)\n    else:\n        if not isletters:\n            do the fixword logic above on the current word\n            add that to newsentence\n            start a new non-letters word\n        else:\n            current_word.append(ch)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5056, "user_id": 8472976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/808aa1971d8e50ab541e1f54a705afad?s=128&d=identicon&r=PG&f=1", "display_name": "MegaIng", "link": "https://stackoverflow.com/users/8472976/megaing"}, "is_accepted": false, "score": 0, "last_activity_date": 1526515681, "creation_date": 1526515681, "answer_id": 50381587, "question_id": 50381245, "link": "https://stackoverflow.com/questions/50381245/alternate-way-to-code-this-function-without-re-regular-expression-in-python/50381587#50381587", "title": "Alternate way to code this function without &#39;re&#39; (regular expression) in Python 3", "body": "<p>Here is a simple solution, that has only one flaw I found: It doesn't deal with punctuation correctly. If that is a problem, tell me.</p>\n\n<pre><code>def function(a, b, c):\n    # Give error messages\n    if b.lower() not in a.lower():\n        print(\"Cannot be found:\", repr(b))\n    if c.lower() not in a.lower():\n        print(\"Cannot be found:\", repr(c))\n\n    a = a.split(\" \")  # separates the words along spaces\n    output = []\n    for word in a:\n        if word.lower() == b.lower():  # is the word b?\n            output.append(c)  # add c\n        elif word.lower() == c.lower():  # is the word c?\n            output.append(b)  # add b\n        else:  # the word is neither a nor b\n            output.append(word)  # leave the word unchanged\n    return \" \".join(output)\n\n\nprint(function(\"Neill and Nathan left the school.\", \"neill\", \"nathan\"))\nprint(function(\"Neill and Nathan left the school.\", \"Nathan\", \"neILL\"))\nprint(function(\"and Bob work together.\", \"dylan\", \"bob\"))\nprint(function(\"Dylan and work together.\", \"DYLAN\", \"BoB\"))\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9803051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc7d86ab64c70f2129c5545951d8d900?s=128&d=identicon&r=PG&f=1", "display_name": "Parvesh D.", "link": "https://stackoverflow.com/users/9803051/parvesh-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1526515681, "creation_date": 1526512759, "last_edit_date": 1526513045, "question_id": 50381245, "link": "https://stackoverflow.com/questions/50381245/alternate-way-to-code-this-function-without-re-regular-expression-in-python", "title": "Alternate way to code this function without &#39;re&#39; (regular expression) in Python 3", "body": "<p>I asked my friend for assistance with a function that swaps characters in a string, and this is what he came up with:</p>\n\n<pre><code>import re           \n\ndef function(a, b, c):\n    def hfunc(y):\n        z = y.group(1).lower()\n        if z == c.lower():\n            return b.upper()\n\n        if z == b.lower():\n            return c.upper()\n\n        # The statements I commented out were supposed to print out if paramters \n        # 'b' or 'c' were not present in the string ('a')\n        #if b not in a:         \n             #print(\"Cannot be found: \", b)\n             #return\n        #if c not in a:\n             #print(\"Cannot be found: \", c)  \n             #return\n        else:\n            return y.group(1)\n\n    return re.sub(\"(\\w+)\", hfunc, a) \n\nprint(function(\"Neill and Nathan left the school.\", \"neill\", \"nathan\"))\nprint(function(\"Neill and Nathan left the school.\", \"Nathan\", \"neILL\"))\nprint(function(\"and Bob work together.\", \"dylan\", \"bob\"))\n# Cannot be found: \"dylan\" &lt;-- should be the output\nprint(function(\"Dylan and work together.\", \"DYLAN\", \"BoB\"))\n# Cannot be found: \"BoB\"  &lt;-- should be the output\n</code></pre>\n\n<p>The problem is I'm not familiar at all with the module that is being used. Is there another way to write this code (perhaps a little more beginner-friendly)? Thanks in advance.</p>\n\n<p>EDIT: These are the outputs right now </p>\n\n<pre><code>NATHAN and NEILL left the school. # correct\nNATHAN and NEILL left the school. # correct\nand DYLAN work together. # Cannot be found: \"dylan\" &lt;-- should be the output\nBOB and work together. # Cannot be found: \"BoB\"  &lt;-- should be the output\n</code></pre>\n"}, {"tags": ["python", "csv", "dictionary"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 1, "creation_date": 1526512582, "post_id": 50381203, "comment_id": 87778541, "body": "I&#39;d recommend pandas, if you have it."}, {"owner": {"reputation": 732, "user_id": 4854766, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/da0d92a989793b4a9f7fa9fd56b2cbb7?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler Cowan", "link": "https://stackoverflow.com/users/4854766/tyler-cowan"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1526512715, "post_id": 50381203, "comment_id": 87778576, "body": "I have pandas and will fall back to that but would like to understand the vanilla solution."}], "answers": [{"comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1526513557, "post_id": 50381259, "comment_id": 87778747, "body": "For clarity, you should also consider looping and calling writerow."}, {"owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1526513663, "post_id": 50381259, "comment_id": 87778772, "body": "@c\u1d0f\u029f\u1d05s\u1d18\u1d07\u1d07\u1d05 That is much cleaner. Please see my recent edit."}, {"owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1526513846, "post_id": 50381259, "comment_id": 87778813, "body": "@c\u1d0f\u029f\u1d05s\u1d18\u1d07\u1d07\u1d05 Thank you for the suggestion!"}, {"owner": {"reputation": 30101, "user_id": 783412, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/895a112c66d93cefcd06d2cf371219e6?s=128&d=identicon&r=PG", "display_name": "hd1", "link": "https://stackoverflow.com/users/783412/hd1"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1526513868, "post_id": 50381259, "comment_id": 87778820, "body": "Yes, but Im not, @c\u1d0f\u029f\u1d05s\u1d18\u1d07\u1d07\u1d05"}, {"owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "reply_to_user": {"reputation": 732, "user_id": 4854766, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/da0d92a989793b4a9f7fa9fd56b2cbb7?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler Cowan", "link": "https://stackoverflow.com/users/4854766/tyler-cowan"}, "edited": false, "score": 0, "creation_date": 1526572457, "post_id": 50381259, "comment_id": 87807286, "body": "@TylerCowan the last line creates a list containing the location string and header values. <code>dict.get</code> attempts to access a value in dictionary hashed to a given key, but if that key does not exist, an optional value can be returned instead. In this case, the line loops over all the header keys and either returns the corresponding value present at that iteration, or returns <code>0</code>."}], "tags": [], "owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "is_accepted": true, "score": 4, "last_activity_date": 1526572134, "last_edit_date": 1526572134, "creation_date": 1526512879, "answer_id": 50381259, "question_id": 50381203, "link": "https://stackoverflow.com/questions/50381203/writing-nested-dictionary-to-csv/50381259#50381259", "title": "Writing Nested Dictionary to csv", "body": "<p>A possibility is to create a <code>csv</code> header that contains, along with the location value, a full listing of all subdictionary keys. That way, all subdictionary values can be written under their proper \"key\" columns:</p>\n\n<pre><code>import csv\ndic = {\"Location1\":{\"a\":1,\"b\":2,\"c\":3},\"Location2\":{\"a\":4,\"b\":5,\"c\":6}, \"Location3\":{'e':7,'f':8, 'g':9, 'h':10}, \"Location4\":{'e': 2, 'f': 3, 'g': 4, 'h': 5}}\nheader = sorted(set(i for b in map(dict.keys, dic.values()) for i in b))\nwith open('filename.csv', 'w', newline=\"\") as f:\n  write = csv.writer(f)\n  write.writerow(['location', *header])\n  for a, b in dic.items():\n     write.writerow([a]+[b.get(i, '') for i in header])\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>location,a,b,c,e,f,g,h\nLocation1,1,2,3,,,,\nLocation2,4,5,6,,,,\nLocation3,,,,7,8,9,10\nLocation4,,,,2,3,4,5\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 6655054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6ce88bbcabe068cdea86127b1c198fd?s=128&d=identicon&r=PG&f=1", "display_name": "wcsit", "link": "https://stackoverflow.com/users/6655054/wcsit"}, "is_accepted": false, "score": 2, "last_activity_date": 1526514997, "creation_date": 1526514997, "answer_id": 50381508, "question_id": 50381203, "link": "https://stackoverflow.com/questions/50381203/writing-nested-dictionary-to-csv/50381508#50381508", "title": "Writing Nested Dictionary to csv", "body": "<p>You could just use pandas to do it.</p>\n\n<pre><code>import pandas as pd\ndic = {\"Location1\":{\"a\":1,\"b\":2,\"c\":3},\"Location2\":{\"a\":4,\"b\":5,\"c\":6}, \"Location3\":{'e':7,'f':8, 'g':9, 'h':10}, \"Location4\":{'e': 2, 'f': 3, 'g': 4, 'h': 5}}\npd.DataFrame.from_dict(dic, orient='index').to_csv('temp.csv')\n</code></pre>\n\n<p>output:</p>\n\n<pre><code> ,a,b,c,e,f,g,h\n Location1,1.0,2.0,3.0,,,,\n Location2,4.0,5.0,6.0,,,,\n Location3,,,,7.0,8.0,9.0,10.0\n Location4,,,,2.0,3.0,4.0,5.0\n</code></pre>\n"}], "owner": {"reputation": 732, "user_id": 4854766, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/da0d92a989793b4a9f7fa9fd56b2cbb7?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler Cowan", "link": "https://stackoverflow.com/users/4854766/tyler-cowan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2660, "favorite_count": 4, "accepted_answer_id": 50381259, "answer_count": 2, "score": 5, "last_activity_date": 1526572134, "creation_date": 1526512482, "question_id": 50381203, "link": "https://stackoverflow.com/questions/50381203/writing-nested-dictionary-to-csv", "title": "Writing Nested Dictionary to csv", "body": "<p>I have a dictionary:</p>\n\n<pre><code>dic = {\"Location1\":{\"a\":1,\"b\":2,\"c\":3},\"Location2\":{\"a\":4,\"b\":5,\"c\":6}}\n</code></pre>\n\n<p>I would like to tabulate this dictionary into a csv with the uppermost key being the leftmost column and the sub keys being headers on the uppermost row with each subsequent row being filled with the sub key values as such:</p>\n\n<pre><code>Location    a   b   c\nLocation1   1   2   3\nLocation2   4   5   6\n</code></pre>\n\n<p>Which I have successfully accomplished using the following script:</p>\n\n<pre><code>import csv\n\ndic = {\"Location1\":{\"a\":1,\"b\":2,\"c\":3},\"Location2\":{\"a\":4,\"b\":5,\"c\":6}}\nfields = [\"Location\",\"a\",\"b\",\"c\"]\n\nwith open(r\"C:\\Users\\tyler.cowan\\Desktop\\tabulated.csv\", \"w\", newline='') as f:\n    w = csv.DictWriter(f, extrasaction='ignore', fieldnames = fields)\n    w.writeheader()\n    for k in dic:\n        w.writerow({field: dic[k].get(field) or k for field in fields})\n</code></pre>\n\n<p>What is peculiar is that I write this test case into a real case, and end up with the equivalent of my location keys being distributed into other columns. Now my first thought was well I must have messed up building the dictionary but upon inspection I get the exact same format of dictionary with the exception of more key values. Yet with output like</p>\n\n<pre><code>Location    a   b   c   d           e   f   g   h\nLocation1   1   2   3   Location1   7   8   9   10\nLocation2   4   5   6   Location2   2   3   4   5\n</code></pre>\n\n<p>Below is my full script</p>\n\n<pre><code># -*- coding: utf-8 -*-\n\nimport os\nimport csv\n\n\ndef pretty(d, indent=0):\n    #prettify dict for visual Inspection\n   for key, value in d.items():\n      print('\\t' * indent + str(key))\n      if isinstance(value, dict):\n         pretty(value, indent+1)\n      else:\n         if value == \"\":\n             print(\"fubar\")\n         print('\\t' * (indent+1) + str(value))\n\n\n\ninFolder = \"Folder\"\ndirList = os.listdir(inFolder)\n\n#print(dirList)\nfields = [ 'Lat-Long']\nallData = {}\nfor file in dirList:\n    fname, ext = os.path.splitext(file)\n    if fname not in fields:\n        fields.append(fname)\n\n    #handle .dat in this block\n    if ext.lower() == \".dat\":\n        #print(\"found dat ext: \" + str(ext))\n        with open(os.path.join(inFolder,file), \"r\") as f:\n            for row in f:\n                try:\n                    row1 = row.split(\" \")\n                    if str(row1[0])+\"-\"+str(row1[1]) not in allData:\n                        allData[str(row1[0])+\"-\"+str(row1[1])] = {}\n                    else:\n                        allData[str(row1[0])+\"-\"+str(row1[1])][fname] = row1[2]\n\n                except IndexError:\n                    row2 = row.split(\"\\t\")\n                    if str(row2[0])+\"-\"+str(row2[1]) not in allData:\n                        allData[str(row2[0])+\"-\"+str(row2[1])] = {}\n                    else:\n                        allData[str(row2[0])+\"-\"+str(row2[1])][fname] = \"NA\"\n\n    elif ext.lower() == \".csv\":\n        with open(os.path.join(inFolder,file), \"r\") as f:\n            for row in f:\n                row1 = row.split(\",\")\n                if str(row1[0])+\"-\"+str(row1[1]) not in allData:\n                    allData[str(row1[0])+\"-\"+str(row1[1])] = {}\n                else:\n                    allData[str(row1[0])+\"-\"+str(row1[1])][fname] = row1[2]\n\n\n\npretty(allData)\n\nwith open(\"testBS.csv\", \"w\", newline='') as f:\n    w = csv.DictWriter(f, extrasaction='ignore', fieldnames = fields)\n    w.writeheader()\n    for k in allData:\n        w.writerow({field: allData[k].get(field) or k for field in fields})\n</code></pre>\n\n<p>and the input data is like:</p>\n\n<pre><code>\"example.dat\"\n\n32.1    101.3   65\n32.1    101.3   66\n32.1    101.3   67\n32.1    101.3   68\n32.1    101.3   69\n32.1    101.3   70\n32.1    101.3   71\n</code></pre>\n\n<p>I would like to figure out how to diagnose and resolve the behavior as I cant seem to figure out the difference between the test and real case.</p>\n"}, {"tags": ["python", "json", "function", "web-scraping", "scrapy"], "comments": [{"owner": {"reputation": 20427, "user_id": 2570261, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e71068b09fc539447a0cee3e99fc419d?s=128&d=identicon&r=PG&f=1", "display_name": "Haleemur Ali", "link": "https://stackoverflow.com/users/2570261/haleemur-ali"}, "edited": false, "score": 0, "creation_date": 1526513200, "post_id": 50381189, "comment_id": 87778666, "body": "what is <code>url</code> in <code>scrapy.Request(url=url, callback=self.parse)</code>. that code is not right because there is no variable called <code>url</code> in scope."}, {"owner": {"reputation": 1856, "user_id": 5968236, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/HfeyP.jpg?s=128&g=1", "display_name": "niloofar", "link": "https://stackoverflow.com/users/5968236/niloofar"}, "reply_to_user": {"reputation": 20427, "user_id": 2570261, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e71068b09fc539447a0cee3e99fc419d?s=128&d=identicon&r=PG&f=1", "display_name": "Haleemur Ali", "link": "https://stackoverflow.com/users/2570261/haleemur-ali"}, "edited": false, "score": 0, "creation_date": 1526513400, "post_id": 50381189, "comment_id": 87778703, "body": "I know my script is not correct for now."}, {"owner": {"reputation": 1856, "user_id": 5968236, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/HfeyP.jpg?s=128&g=1", "display_name": "niloofar", "link": "https://stackoverflow.com/users/5968236/niloofar"}, "reply_to_user": {"reputation": 20427, "user_id": 2570261, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e71068b09fc539447a0cee3e99fc419d?s=128&d=identicon&r=PG&f=1", "display_name": "Haleemur Ali", "link": "https://stackoverflow.com/users/2570261/haleemur-ali"}, "edited": false, "score": 0, "creation_date": 1526513495, "post_id": 50381189, "comment_id": 87778728, "body": "I just edited my script and removed that url part."}, {"owner": {"reputation": 232, "user_id": 5314295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7uPxC.jpg?s=128&g=1", "display_name": "Laerte", "link": "https://stackoverflow.com/users/5314295/laerte"}, "edited": false, "score": 0, "creation_date": 1526518721, "post_id": 50381189, "comment_id": 87779798, "body": "You want to pass values between functions and in the end return item with all properties collected?"}, {"owner": {"reputation": 1856, "user_id": 5968236, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/HfeyP.jpg?s=128&g=1", "display_name": "niloofar", "link": "https://stackoverflow.com/users/5968236/niloofar"}, "edited": false, "score": 0, "creation_date": 1526520607, "post_id": 50381189, "comment_id": 87780112, "body": "I want to scrap the url, find the title of the page and then write it to the json file, and after that, start the for loop to find all div tags with class &#39;m1&#39; and &#39;m2&#39; and write them into the json file. And then start to scrape the next url."}, {"owner": {"reputation": 232, "user_id": 5314295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7uPxC.jpg?s=128&g=1", "display_name": "Laerte", "link": "https://stackoverflow.com/users/5314295/laerte"}, "edited": false, "score": 1, "creation_date": 1526520872, "post_id": 50381189, "comment_id": 87780158, "body": "You can do all this inside one function, after all you will get title of the same page that have items, right?"}, {"owner": {"reputation": 1856, "user_id": 5968236, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/HfeyP.jpg?s=128&g=1", "display_name": "niloofar", "link": "https://stackoverflow.com/users/5968236/niloofar"}, "edited": false, "score": 0, "creation_date": 1526523458, "post_id": 50381189, "comment_id": 87780636, "body": "I don&#39;t get your question. look, there is a website that I want to scrape the first and the secned page of that. Each page has a different title, and some div elements with the same classnames that I should use for loop to collect them."}], "answers": [{"tags": [], "owner": {"reputation": 232, "user_id": 5314295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7uPxC.jpg?s=128&g=1", "display_name": "Laerte", "link": "https://stackoverflow.com/users/5314295/laerte"}, "is_accepted": false, "score": 1, "last_activity_date": 1526558105, "creation_date": 1526558105, "answer_id": 50390834, "question_id": 50381189, "link": "https://stackoverflow.com/questions/50381189/scrapy-add-data-to-the-json-file-from-different-functions/50390834#50390834", "title": "scrapy add data to the json file from different functions", "body": "<p>You don't need create new callback just to parse the title, you can create the structure that you want inside the <code>parse</code> function, what you need to do is simple create a object with the properties you want.</p>\n\n<pre><code># -*- coding: utf-8 -*-\nimport scrapy\n\nclass MoulaviSpider(scrapy.Spider):\n    name = 'moulavi'\n\n    def start_requests(self):\n\n        start_urls = [\n            'https://ganjoor.net/moulavi/masnavi/daftar1/sh1/',\n            'https://ganjoor.net/moulavi/masnavi/daftar1/sh2/',\n        ]\n\n        for url in start_urls:\n            yield scrapy.Request(url=url, callback=self.parse)\n\n    def parse(self, response):\n\n        item = dict(title=response.xpath('//title/text()').extract_first(),content=[])\n\n        for line in response.css('div.b'):\n            item['content'].append({\n                'right_column': line.css('div.m1').extract_first(),\n                'left_column': line.css('div.m2').extract_first()})\n\n        yield item\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 20427, "user_id": 2570261, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e71068b09fc539447a0cee3e99fc419d?s=128&d=identicon&r=PG&f=1", "display_name": "Haleemur Ali", "link": "https://stackoverflow.com/users/2570261/haleemur-ali"}, "is_accepted": false, "score": 1, "last_activity_date": 1526664433, "last_edit_date": 1526664433, "creation_date": 1526563822, "answer_id": 50392765, "question_id": 50381189, "link": "https://stackoverflow.com/questions/50381189/scrapy-add-data-to-the-json-file-from-different-functions/50392765#50392765", "title": "scrapy add data to the json file from different functions", "body": "<p>Usually, a single method would be responsible for parsing the contents of a page, and then <em>yielding</em> the parsed data. At the end, after yielding all the items, this method could yield more Requests to further pages to be parsed if needed.</p>\n\n<p>The parsed data would be used to create an instance of <a href=\"https://doc.scrapy.org/en/latest/topics/items.html\" rel=\"nofollow noreferrer\">Item</a>, and then then passed through an item pipeline for complex processing and persistence. Here, I'm sticking with yielding dictionaries to keep the example simpler.</p>\n\n<p>From the desired output you provided, <code>content</code> is a top-level key in the output json, and it's value is a list. The list's element is a dictionary with two keys <code>left_column</code> &amp; <code>right_column</code>, and the values are of type list.</p>\n\n<p>In this case, the <code>parse</code> method <em>could</em> look like this:</p>\n\n<pre><code>import scrapy\n\nclass MoulaviSpider(scrapy.Spider):\n    name = \"moulavi\"\n\n    def start_requests(self):\n        start_urls = [\n            'https://ganjoor.net/moulavi/masnavi/daftar1/sh1/',\n            'https://ganjoor.net/moulavi/masnavi/daftar1/sh2/',\n        ]\n\n        for url in start_urls:\n            yield scrapy.Request(url=url, callback=self.parse)\n\n    def parse(self, response):\n        # build up the content through a list comprehension\n        # consider using `extract_first` instead of `extract` for \n        # less nested output\n        content = [\n          {'right_column': line.css('div.m1').extract(),\n           'left_column': line.css('div.m2').extract()}\n          for line in response.css('div.b')\n        ]            \n        yield {'title': response.css('h2').extract_first(),\n               'content': content}\n</code></pre>\n\n<p>Note, that for extracting <code>title</code>, I used <code>extract_first</code> instead of extract. Consider using <code>extract_first</code> for the <code>left_column</code> &amp; <code>right_column</code> values as well, as they seem to be lists of 1 element.</p>\n"}], "owner": {"reputation": 1856, "user_id": 5968236, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/HfeyP.jpg?s=128&g=1", "display_name": "niloofar", "link": "https://stackoverflow.com/users/5968236/niloofar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1054, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1526664433, "creation_date": 1526512410, "last_edit_date": 1526525742, "question_id": 50381189, "link": "https://stackoverflow.com/questions/50381189/scrapy-add-data-to-the-json-file-from-different-functions", "title": "scrapy add data to the json file from different functions", "body": "<p>I'm new to both scrapy and json, and working on a scrapy project. this is my script:</p>\n\n<pre><code>import scrapy\n\nclass MoulaviSpider(scrapy.Spider):\n    name = \"moulavi\"\n\n    def start_requests(self):\n    start_urls = [\n        'https://ganjoor.net/moulavi/masnavi/daftar1/sh1/',\n        'https://ganjoor.net/moulavi/masnavi/daftar1/sh2/',\n    ]\n        for url in start_urls:\n            yield scrapy.Request(url=url, callback=self.title)\n\n    def title(self, response):\n        #'hetitle': response.css('h2').extract(), \n        return scrapy.Request(callback=self.parse)\n\n    def parse(self, response):\n        for line in response.css('div.b'):\n            yield {\n                'right_column': line.css('div.m1').extract(),\n                'left_column': line.css('div.m2').extract(),\n}\n</code></pre>\n\n<p>And I run that with <code>scrapy crawl moulavi -o moulavi.json</code>.</p>\n\n<p>I knom my scrpit is not correct for now.\nI want to add the title of each page to the json file inside the <strong>\"def title\"</strong> and then call the <strong>\"def parse\"</strong> to add the other data to the json file. But as I'm not very familiar with callback or yield, so don't know what to do.</p>\n\n<p>As you can see in my code, I have commented the line which is the spot I want the title be added into the json file, but don't know how to do that.</p>\n\n<p>So what I want to do is to scrap the url, find the title of the page and then write it to the json file, and after that, start the for loop to find all div tags with class 'm1' and 'm2' and write them into the json file. And then start to scrape the next url.</p>\n\n<p>I want to have output like this:  (not suro if the syntax is correct)</p>\n\n<pre><code>{\n\"title\":\"first page title\",\n\"content\":[\n    {\"right_column\": [\"&lt;div class=\\\"m1\\\"&gt;&lt;p&gt;\u0645\u0646 \u0686\u06af\u0648\u0646\u0647 \u0647\u0648\u0634 \u062f\u0627\u0631\u0645 \u067e\u06cc\u0634 \u0648 \u067e\u0633&lt;/p&gt;&lt;/div&gt;\"], \"left_column\": [\"&lt;div class=\\\"m2\\\"&gt;&lt;p&gt;\u0686\u0648\u0646 \u0646\u0628\u0627\u0634\u062f \u0646\u0648\u0631 \u06cc\u0627\u0631\u0645 \u067e\u06cc\u0634 \u0648 \u067e\u0633&lt;/p&gt;&lt;/div&gt;\"]},\n    {\"right_column\": [\"&lt;div class=\\\"m1\\\"&gt;&lt;p&gt;\u0639\u0634\u0642 \u062e\u0648\u0627\u0647\u062f \u06a9\u06cc\u0646 \u0633\u062e\u0646 \u0628\u06cc\u0631\u0648\u0646 \u0628\u0648\u062f&lt;/p&gt;&lt;/div&gt;\"], \"left_column\": [\"&lt;div class=\\\"m2\\\"&gt;&lt;p&gt;\u0622\u06cc\u0646\u0647 \u063a\u0645\u0627\u0632 \u0646\u0628\u0648\u062f \u0686\u0648\u0646 \u0628\u0648\u062f&lt;/p&gt;&lt;/div&gt;\"]},\n    {\"right_column\": [\"&lt;div class=\\\"m1\\\"&gt;&lt;p&gt;\u0622\u06cc\u0646\u062a \u062f\u0627\u0646\u06cc \u0686\u0631\u0627 \u063a\u0645\u0627\u0632 \u0646\u06cc\u0633\u062a&lt;/p&gt;&lt;/div&gt;\"], \"left_column\": [\"&lt;div class=\\\"m2\\\"&gt;&lt;p&gt;\u0632\u0627\u0646\u06a9 \u0632\u0646\u06af\u0627\u0631 \u0627\u0632 \u0631\u062e\u0634 \u0645\u0645\u062a\u0627\u0632 \u0646\u06cc\u0633\u062a&lt;/p&gt;&lt;/div&gt;\"]}\n]\n\"title\":\"second page title\",\n\"content\":[\n    {\"right_column\": [\"&lt;div class=\\\"m1\\\"&gt;&lt;p&gt;\u0628\u0634\u0646\u0648 \u0627\u06cc\u0646 \u0646\u06cc \u0686\u0648\u0646 \u0634\u06a9\u0627\u06cc\u062a \u0645\u06cc\u200c\u06a9\u0646\u062f&lt;/p&gt;&lt;/div&gt;\"], \"left_column\": [\"&lt;div class=\\\"m2\\\"&gt;&lt;p&gt;\u0627\u0632 \u062c\u062f\u0627\u06cc\u06cc\u0647\u0627 \u062d\u06a9\u0627\u06cc\u062a \u0645\u06cc\u200c\u06a9\u0646\u062f&lt;/p&gt;&lt;/div&gt;\"]},\n    {\"right_column\": [\"&lt;div class=\\\"m1\\\"&gt;&lt;p&gt;\u06a9\u0632 \u0646\u06cc\u0633\u062a\u0627\u0646 \u062a\u0627 \u0645\u0631\u0627 \u0628\u0628\u0631\u06cc\u062f\u0647\u200c\u0627\u0646\u062f&lt;/p&gt;&lt;/div&gt;\"], \"left_column\": [\"&lt;div class=\\\"m2\\\"&gt;&lt;p&gt;\u062f\u0631 \u0646\u0641\u06cc\u0631\u0645 \u0645\u0631\u062f \u0648 \u0632\u0646 \u0646\u0627\u0644\u06cc\u062f\u0647\u200c\u0627\u0646\u062f&lt;/p&gt;&lt;/div&gt;\"]},\n]}\n</code></pre>\n\n<p>Thank you in advance :)</p>\n"}, {"tags": ["python", "random"], "comments": [{"owner": {"reputation": 38158, "user_id": 2707792, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hjDjB.png?s=128&g=1", "display_name": "Andrey Tyukin", "link": "https://stackoverflow.com/users/2707792/andrey-tyukin"}, "edited": false, "score": 1, "creation_date": 1526513066, "post_id": 50381134, "comment_id": 87778639, "body": "Please add concrete input and full error message (with trace and line numbers). Consider re-reading <a href=\"https://stackoverflow.com/help/how-to-ask\">How to ask</a>."}, {"owner": {"reputation": 12557, "user_id": 1270789, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/FXwoB.png?s=128&g=1", "display_name": "Ken Y-N", "link": "https://stackoverflow.com/users/1270789/ken-y-n"}, "edited": false, "score": 0, "creation_date": 1526513410, "post_id": 50381134, "comment_id": 87778705, "body": "<code>for x in random.randrangec(chars,length):</code> There&#39;s no Python function called <code>randrangec()</code> as far as I am aware. Please explain what you want this to do - hint: even if it existed, you are very likely using it wrongly..."}, {"owner": {"reputation": 1, "user_id": 9803040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ac0438da84a761fc4946adede9cdde9?s=128&d=identicon&r=PG&f=1", "display_name": "thisllub", "link": "https://stackoverflow.com/users/9803040/thisllub"}, "edited": false, "score": 0, "creation_date": 1526518163, "post_id": 50381134, "comment_id": 87779693, "body": "just typed it wrong.. my bad.. edited it."}, {"owner": {"reputation": 21366, "user_id": 7553525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ua0kY.png?s=128&g=1", "display_name": "zwer", "link": "https://stackoverflow.com/users/7553525/zwer"}, "edited": false, "score": 0, "creation_date": 1526518679, "post_id": 50381134, "comment_id": 87779791, "body": "Start with not shadowing the built-ins like <code>string</code> and <code>file</code> - use your own variable names that are not already part of Python."}, {"owner": {"reputation": 1, "user_id": 9803040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ac0438da84a761fc4946adede9cdde9?s=128&d=identicon&r=PG&f=1", "display_name": "thisllub", "link": "https://stackoverflow.com/users/9803040/thisllub"}, "edited": false, "score": 0, "creation_date": 1526519769, "post_id": 50381134, "comment_id": 87779961, "body": "means i rename file to data, as example?"}], "owner": {"reputation": 1, "user_id": 9803040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ac0438da84a761fc4946adede9cdde9?s=128&d=identicon&r=PG&f=1", "display_name": "thisllub", "link": "https://stackoverflow.com/users/9803040/thisllub"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1526518135, "creation_date": 1526511916, "last_edit_date": 1526518135, "question_id": 50381134, "link": "https://stackoverflow.com/questions/50381134/generating-fixed-length-random-numbers", "title": "Generating fixed length random numbers", "body": "<p>Well, hello everybody. this is my very first piece of code i've ever written, but i am willing to learn. basically i want to generate random numbers/passwords. The script should ask at first some things (have not implemented all right now).</p>\n\n<ol>\n<li>length = length of generated passwords (fixed value)</li>\n<li>pmaximum = amount of generated passwords</li>\n<li><p>chars = which chars should be used for generating (i want to short this one so i can choose between LC, UC and numbers) \nChoosing between:</p>\n\n<p>string.letters[0:52] + string.digits + string.punctuation</p></li>\n</ol>\n\n<p>this is my code right now, generating a valueerror;</p>\n\n<pre><code>#! /usr/bin/python\n\nimport string, random\n\n#=============== Router Password Generator ==============\n\nprint 'Welcome to passwordlist generator'\n\nlength=input('length of generated passwords: ')\npmaximum=input('maximum amount of generated passwords: ')\nchars=raw_input('which chars to use: ')\n\nstring=''\n\nfilename = raw_input('assign wordlist name: ')\nf_extns = filename.split('.')\n\nfor count in xrange(0,pmaximum):\n    for x in random.sample(chars,length):\n        string+=x\n\nfile.write(string+'\\n')\n\nstring=''\n\nfile.close()\n\nprint 'Done'\n\n\n#================ RPG END ===============\n</code></pre>\n\n<p>i've wrote this using snippets from the web, i have a bit understanding of coding but i am here to learn, if someone could've explain some things i would be very happy so i can understand this code better if it works.</p>\n"}, {"tags": ["python", "django", "ipc", "rpc"], "comments": [{"owner": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "edited": false, "score": 0, "creation_date": 1526514065, "post_id": 50381129, "comment_id": 87778880, "body": "This question is too broad for StackOverflow format but the usual practice is to use Celery for asynchronous tasks such as this."}], "answers": [{"tags": [], "owner": {"reputation": 370, "user_id": 7860388, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/k3R3b.jpg?s=128&g=1", "display_name": "Woody Johnson", "link": "https://stackoverflow.com/users/7860388/woody-johnson"}, "is_accepted": false, "score": 0, "last_activity_date": 1526542715, "creation_date": 1526542715, "answer_id": 50385869, "question_id": 50381129, "link": "https://stackoverflow.com/questions/50381129/using-django-as-gui-for-long-running-python-process/50385869#50385869", "title": "Using Django as GUI for long running python process", "body": "<p>There's at least 2 possible ways to do this.</p>\n\n<ol>\n<li><p>Implement your data-refreshing function as a view and visit it by ajax(sync)+javascript timer.Since you visit your page that contains these js, it will fetch your data silently and update the page. However,this solution does not work well when you need to record all the data in a given frequency;the ajax/view only executes when the web page is open.</p></li>\n<li><p>Use messaging queue like selcuk suggests.Alongside celery, APscheduler is also a good choice because it's easier to install and use.You can implement a task(as modal) queue with status(queue/done/stoped/whatever as field) and check them at the frequency you wanted,save the date you retrieved and do all the other stuff.</p></li>\n</ol>\n"}], "owner": {"reputation": 3009, "user_id": 1563807, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1QLZ8.jpg?s=128&g=1", "display_name": "CodeSamurai777", "link": "https://stackoverflow.com/users/1563807/codesamurai777"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 122, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1526542715, "creation_date": 1526511869, "question_id": 50381129, "link": "https://stackoverflow.com/questions/50381129/using-django-as-gui-for-long-running-python-process", "title": "Using Django as GUI for long running python process", "body": "<p>This a question about architecture. Say I have a long running process on a server such as machine learning in a middle of a training. Now as this run on external machine I would like to have a tool to quickly see from time to time the results. So I thought the best way would be to have a website which quickly connects to the process for example using RPC to display the results as this allows me to always check in. Now the question is how should Django view gather the information from the server process:</p>\n\n<p>1) Using RPC calls such as rpyc directly in the views?</p>\n\n<p>2) Using some kind of messaging queue such as celery ?</p>\n\n<p>3) Or in a completely different way I am not seeing ?</p>\n"}, {"tags": ["python", "apache-spark", "pyspark"], "answers": [{"comments": [{"owner": {"reputation": 3448, "user_id": 6237241, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4310dc4cb526ad5ebdea99acfa742af2?s=128&d=identicon&r=PG&f=1", "display_name": "User12345", "link": "https://stackoverflow.com/users/6237241/user12345"}, "edited": false, "score": 0, "creation_date": 1526512890, "post_id": 50381139, "comment_id": 87778607, "body": "yes this is what I want. A small doubt when I divide <code>5&#47;3</code> I am getting <code>1.666667</code> Is there a way to round them to nearest number for exampl2 <code>5&#47;3</code> to <code>1.67</code> or may be <code>2</code> even better"}, {"owner": {"reputation": 785, "user_id": 8055932, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-H7J5tVWHAmc/AAAAAAAAAAI/AAAAAAAABco/2UxuTrYVxeQ/photo.jpg?sz=128", "display_name": "Ryan Tam", "link": "https://stackoverflow.com/users/8055932/ryan-tam"}, "reply_to_user": {"reputation": 3448, "user_id": 6237241, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4310dc4cb526ad5ebdea99acfa742af2?s=128&d=identicon&r=PG&f=1", "display_name": "User12345", "link": "https://stackoverflow.com/users/6237241/user12345"}, "edited": false, "score": 1, "creation_date": 1526513116, "post_id": 50381139, "comment_id": 87778647, "body": "<code>F.round(F.count(&#39;val&#39;) &#47; 3, 2)</code> instead of <code>F.count(&#39;val&#39;) &#47; 3</code>, you can consult <a href=\"http://spark.apache.org/docs/2.0.2/api/python/pyspark.sql.html#module-pyspark.sql.functions\" rel=\"nofollow noreferrer\">spark.apache.org/docs/2.0.2/api/python/&hellip;</a> for more details of the range of function you can use in spark"}], "tags": [], "owner": {"reputation": 785, "user_id": 8055932, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-H7J5tVWHAmc/AAAAAAAAAAI/AAAAAAAABco/2UxuTrYVxeQ/photo.jpg?sz=128", "display_name": "Ryan Tam", "link": "https://stackoverflow.com/users/8055932/ryan-tam"}, "is_accepted": true, "score": 3, "last_activity_date": 1526511960, "creation_date": 1526511960, "answer_id": 50381139, "question_id": 50381076, "link": "https://stackoverflow.com/questions/50381076/groupby-and-divide-count-of-grouped-elements-in-pyspark-data-frame/50381139#50381139", "title": "Groupby and divide count of grouped elements in pyspark data frame", "body": "<p>I believe what you want is </p>\n\n<pre><code>from pyspark.sql import functions as F\n\ndf.groupby('category').agg((F.count('val') / 3).alias('average'))\n</code></pre>\n"}], "owner": {"reputation": 3448, "user_id": 6237241, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4310dc4cb526ad5ebdea99acfa742af2?s=128&d=identicon&r=PG&f=1", "display_name": "User12345", "link": "https://stackoverflow.com/users/6237241/user12345"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2116, "favorite_count": 0, "accepted_answer_id": 50381139, "answer_count": 1, "score": 2, "last_activity_date": 1526511960, "creation_date": 1526511488, "question_id": 50381076, "link": "https://stackoverflow.com/questions/50381076/groupby-and-divide-count-of-grouped-elements-in-pyspark-data-frame", "title": "Groupby and divide count of grouped elements in pyspark data frame", "body": "<p>I have a data frame in <code>pyspark</code> like below. I want to do <code>groupby</code> and count of <code>category</code> column in <code>data frame</code></p>\n\n<pre><code>df.show()\n+--------+----+\n|category| val|\n+--------+----+\n|    cat1|  13|\n|    cat2|  12|\n|    cat2|  14|\n|    cat3|  23|\n|    cat1|  20|\n|    cat1|  10|\n|    cat2|  30|\n|    cat3|  11|\n|    cat1|   7|\n|    cat1|   8|\n+--------+----+\n\n\nres = df.groupBy('category').count()\n\nres.show()\n\n+--------+-----+\n|category|count|\n+--------+-----+\n|    cat2|    3|\n|    cat3|    2|\n|    cat1|    5|\n+--------+-----+\n</code></pre>\n\n<p>I am getting my desired result. Now I want to calculate the <code>average</code> of category. <code>data frame</code> has records for 3 days. I want to calculate average of count for these 3 days.</p>\n\n<p>The result I want is below. I basically want to do <code>count/no.of.days</code> </p>\n\n<pre><code>+--------+-----+\n|category|count|\n+--------+-----+\n|    cat2|    1|\n|    cat3|    1|\n|    cat1|    2|\n+--------+-----+\n</code></pre>\n\n<p>How can I do that?</p>\n"}, {"tags": ["python", "pandas", "performance", "greatest-n-per-group", "pandas-groupby"], "comments": [{"owner": {"reputation": 25595, "user_id": 202229, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6cc1d82c11563b440c57280ad587ee47?s=128&d=identicon&r=PG", "display_name": "smci", "link": "https://stackoverflow.com/users/202229/smci"}, "edited": false, "score": 0, "creation_date": 1537059631, "post_id": 50381064, "comment_id": 91645425, "body": "Related: <a href=\"https://stackoverflow.com/questions/52349507/how-do-i-find-is-the-first-non-nan-value-in-each-column-the-maximum-for-that-co\">How do I find: Is the first non-NaN value in each column the maximum for that column in a DataFrame?</a>. Would be nice to also see how those answers&#39; performance compares and scales."}], "answers": [{"comments": [{"owner": {"reputation": 619491, "user_id": 2901002, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/hMDvl.jpg?s=128&g=1", "display_name": "jezrael", "link": "https://stackoverflow.com/users/2901002/jezrael"}, "edited": false, "score": 2, "creation_date": 1526556137, "post_id": 50389889, "comment_id": 87795818, "body": "I once realised the fastest is <code>df = df.sort_values(by=[&#39;delta&#39;], ascending=False).drop_duplicates(&#39;Id&#39;)</code>, is possible add to timings?"}, {"owner": {"reputation": 705380, "user_id": 190597, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1", "display_name": "unutbu", "link": "https://stackoverflow.com/users/190597/unutbu"}, "reply_to_user": {"reputation": 619491, "user_id": 2901002, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/hMDvl.jpg?s=128&g=1", "display_name": "jezrael", "link": "https://stackoverflow.com/users/2901002/jezrael"}, "edited": false, "score": 1, "creation_date": 1526556578, "post_id": 50389889, "comment_id": 87796111, "body": "Sure. Running the benchmark now; will take some time."}, {"owner": {"reputation": 705380, "user_id": 190597, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1", "display_name": "unutbu", "link": "https://stackoverflow.com/users/190597/unutbu"}, "reply_to_user": {"reputation": 619491, "user_id": 2901002, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/hMDvl.jpg?s=128&g=1", "display_name": "jezrael", "link": "https://stackoverflow.com/users/2901002/jezrael"}, "edited": false, "score": 1, "creation_date": 1526574968, "post_id": 50389889, "comment_id": 87808731, "body": "@jezrael: Thanks for suggestion. Your approach (which I called <code>using_sort_drop</code> above) is indeed faster for moderately large DataFrames, especially if there are many small groups. But for very large DataFrames, <code>using_idxmax</code> will be faster."}, {"owner": {"reputation": 705380, "user_id": 190597, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1", "display_name": "unutbu", "link": "https://stackoverflow.com/users/190597/unutbu"}, "edited": false, "score": 1, "creation_date": 1526580999, "post_id": 50389889, "comment_id": 87811804, "body": "&quot;Moderately large&quot; depends on the number of groups. With very few groups, <code>using_sort_drop</code> is advantageous until around len(df) = 100K. But if there are many small groups, it might still be the winner with len(df) around 100M. Thus, it depends a lot on the nature of your DataFrame. It&#39;s best to install perfplot and/or IPython and do some benchmarking."}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1526595065, "post_id": 50389889, "comment_id": 87818189, "body": "Phew, you really know how to dish it out! Going to bookmark this, thanks."}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1530031670, "post_id": 50389889, "comment_id": 89086796, "body": "Also good to note, correct me if I&#39;m wrong, but sort stability may come in to play.  Wouldn&#39;t forcing sort to use <code>mergesort</code> be better than the default <code>quicksort</code>?"}, {"owner": {"reputation": 705380, "user_id": 190597, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1", "display_name": "unutbu", "link": "https://stackoverflow.com/users/190597/unutbu"}, "reply_to_user": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1530033479, "post_id": 50389889, "comment_id": 89087750, "body": "@piRSquared: I&#39;ve been having trouble installing numba, so unfortunately I&#39;m not able to add your method to the perfplot. But your %timeit result looks impressive."}, {"owner": {"reputation": 705380, "user_id": 190597, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1", "display_name": "unutbu", "link": "https://stackoverflow.com/users/190597/unutbu"}, "reply_to_user": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1530033522, "post_id": 50389889, "comment_id": 89087778, "body": "@piRSquared: Thanks very much for the correction regarding sort stability. I should have been using <code>mergesort</code>. (Correcting this now...)"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1530033617, "post_id": 50389889, "comment_id": 89087829, "body": "Thanks (-:  I like <code>perfplot</code> But I couldn&#39;t get a plot to appear in notebook.  I&#39;ll try harder."}, {"owner": {"reputation": 81, "user_id": 3843205, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3692d19659928aee533df91a998c4431?s=128&d=identicon&r=PG&f=1", "display_name": "trance_dude", "link": "https://stackoverflow.com/users/3843205/trance-dude"}, "edited": false, "score": 0, "creation_date": 1612921962, "post_id": 50389889, "comment_id": 116915967, "body": "Thanks for this - for me on a 20MM row df, sort / drop is absolutely trouncing the other methods."}], "tags": [], "owner": {"reputation": 705380, "user_id": 190597, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1", "display_name": "unutbu", "link": "https://stackoverflow.com/users/190597/unutbu"}, "is_accepted": true, "score": 10, "last_activity_date": 1530039415, "last_edit_date": 1530039415, "creation_date": 1526555084, "answer_id": 50389889, "question_id": 50381064, "link": "https://stackoverflow.com/questions/50381064/select-the-max-row-per-group-pandas-performance-issue/50389889#50389889", "title": "Select the max row per group - pandas performance issue", "body": "<p>The fastest option depends not only on length of the DataFrame (in this case, around 13M rows) but also on the number of groups. Below are perfplots which compare a number of ways of finding the maximum in each group:</p>\n\n<p>If there an only a <strong>few (large) groups</strong>, <code>using_idxmax</code> may be the fastest option:\n<a href=\"https://i.stack.imgur.com/0TrV3.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/0TrV3.png\" alt=\"enter image description here\"></a></p>\n\n<p>If there are <strong>many (small) groups and the DataFrame is not too large</strong>, <code>using_sort_drop</code> may be the fastest option:\n<a href=\"https://i.stack.imgur.com/LTopt.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/LTopt.png\" alt=\"enter image description here\"></a></p>\n\n<p>Keep in mind, however, that while <code>using_sort_drop</code>, <code>using_sort</code> and <code>using_rank</code> start out looking very fast, as <code>N = len(df)</code> increases, their speed relative to the other options disappears quickly. <strong>For large enough <code>N</code>, <code>using_idxmax</code> becomes the fastest option</strong>, even if there are many groups.</p>\n\n<p><code>using_sort_drop</code>, <code>using_sort</code> and <code>using_rank</code> sorts the DataFrame (or groups within the DataFrame). Sorting is <code>O(N * log(N))</code> on average, while the other methods use <code>O(N)</code> operations. This is why methods like <code>using_idxmax</code> beats <code>using_sort_drop</code> for very large DataFrames.</p>\n\n<p>Be aware that benchmark results may vary for a number of reasons, including machine specs, OS, and software versions. So it is important to run benchmarks on your own machine, and with test data tailored to your situation.</p>\n\n<p>Based on the perfplots above, <code>using_sort_drop</code> <em>may be</em> an option worth considering for your DataFrame of 13M rows, especially if it has many (small) groups. Otherwise, I would suspect <code>using_idxmax</code> to be the fastest option -- but again, it's important that you check benchmarks on your machine.</p>\n\n<hr>\n\n<p>Here is the setup I used to make the <a href=\"https://github.com/nschloe/perfplot\" rel=\"noreferrer\">perfplots</a>:</p>\n\n<pre><code>import numpy as np\nimport pandas as pd \nimport perfplot\n\ndef make_df(N):\n    # lots of small groups\n    df = pd.DataFrame(np.random.randint(N//10+1, size=(N, 2)), columns=['Id','delta'])\n    # few large groups\n    # df = pd.DataFrame(np.random.randint(10, size=(N, 2)), columns=['Id','delta'])\n    return df\n\n\ndef using_idxmax(df):\n    return df.loc[df.groupby(\"Id\")['delta'].idxmax()]\n\ndef max_mask(s):\n    i = np.asarray(s).argmax()\n    result = [False]*len(s)\n    result[i] = True\n    return result\n\ndef using_custom_mask(df):\n    mask = df.groupby(\"Id\")['delta'].transform(max_mask)\n    return df.loc[mask]\n\ndef using_isin(df):\n    idx = df.groupby(\"Id\")['delta'].idxmax()\n    mask = df.index.isin(idx)\n    return df.loc[mask]\n\ndef using_sort(df):\n    df = df.sort_values(by=['delta'], ascending=False, kind='mergesort')\n    return df.groupby('Id', as_index=False).first()\n\ndef using_rank(df):\n    mask = (df.groupby('Id')['delta'].rank(method='first', ascending=False) == 1)\n    return df.loc[mask]\n\ndef using_sort_drop(df):\n    # Thanks to jezrael\n    # https://stackoverflow.com/questions/50381064/select-the-max-row-per-group-pandas-performance-issue/50389889?noredirect=1#comment87795818_50389889\n    return df.sort_values(by=['delta'], ascending=False, kind='mergesort').drop_duplicates('Id')\n\ndef using_apply(df):\n    selected_idx = df.groupby(\"Id\").apply(lambda df: df.delta.argmax())\n    return df.loc[selected_idx]\n\ndef check(df1, df2):\n    df1 = df1.sort_values(by=['Id','delta'], kind='mergesort').reset_index(drop=True)\n    df2 = df2.sort_values(by=['Id','delta'], kind='mergesort').reset_index(drop=True)\n    return df1.equals(df2)\n\nperfplot.show(\n    setup=make_df,\n    kernels=[using_idxmax, using_custom_mask, using_isin, using_sort, \n             using_rank, using_apply, using_sort_drop],\n    n_range=[2**k for k in range(2, 20)],\n    logx=True,\n    logy=True,\n    xlabel='len(df)',\n    repeat=75,\n    equality_check=check)\n</code></pre>\n\n<hr>\n\n<p>Another way to benchmark is to use <a href=\"https://stackoverflow.com/a/29280612/190597\">IPython %timeit</a>: </p>\n\n<pre><code>In [55]:  df = make_df(2**20)\n\nIn [56]: %timeit using_sort_drop(df)\n1 loop, best of 3: 403 ms per loop\n\nIn [57]: %timeit using_rank(df)\n1 loop, best of 3: 1.04 s per loop\n\nIn [58]: %timeit using_idxmax(df)\n1 loop, best of 3: 15.8 s per loop\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1135, "user_id": 5831856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e49bfa0a7ca52a00f071552366eb6fd?s=128&d=identicon&r=PG&f=1", "display_name": "mathguy", "link": "https://stackoverflow.com/users/5831856/mathguy"}, "edited": false, "score": 0, "creation_date": 1545048386, "post_id": 51047693, "comment_id": 94477915, "body": "Can&#39;t thank you enough @piRSqured, your code made my code run more than 5x faster"}], "tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": false, "score": 5, "last_activity_date": 1530030963, "creation_date": 1530030963, "answer_id": 51047693, "question_id": 50381064, "link": "https://stackoverflow.com/questions/50381064/select-the-max-row-per-group-pandas-performance-issue/51047693#51047693", "title": "Select the max row per group - pandas performance issue", "body": "<h2>Using Numba's jit</h2>\n\n<pre><code>from numba import njit\nimport numpy as np\n\n@njit\ndef nidxmax(bins, k, weights):\n    out = np.zeros(k, np.int64)\n    trk = np.zeros(k)\n    for i, w in enumerate(weights - (weights.min() - 1)):\n        b = bins[i]\n        if w &gt; trk[b]:\n            trk[b] = w\n            out[b] = i\n    return np.sort(out)\n\ndef with_numba_idxmax(df):\n    f, u = pd.factorize(df.Id)\n    return df.iloc[nidxmax(f, len(u), df.delta.values)]\n</code></pre>\n\n<hr>\n\n<p>Borrowing from <a href=\"https://stackoverflow.com/a/50389889/2336654\">@unutbu</a></p>\n\n<pre><code>def make_df(N):\n    # lots of small groups\n    df = pd.DataFrame(np.random.randint(N//10+1, size=(N, 2)), columns=['Id','delta'])\n    # few large groups\n    # df = pd.DataFrame(np.random.randint(10, size=(N, 2)), columns=['Id','delta'])\n    return df\n</code></pre>\n\n<hr>\n\n<h2>Prime <code>jit</code></h2>\n\n<pre><code>with_numba_idxmax(make_df(10));\n</code></pre>\n\n<hr>\n\n<h2>Test</h2>\n\n<pre><code>df = make_df(2**20)\n\n\n%timeit with_numba_idxmax(df)\n%timeit using_sort_drop(df)\n\n47.4 ms \u00b1 99.8 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 10 loops each)\n194 ms \u00b1 451 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 10 loops each)\n</code></pre>\n"}], "owner": {"reputation": 12740, "user_id": 3907250, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/RIhjj.jpg?s=128&g=1", "display_name": "Aerin", "link": "https://stackoverflow.com/users/3907250/aerin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2175, "favorite_count": 6, "accepted_answer_id": 50389889, "answer_count": 2, "score": 6, "last_activity_date": 1537059495, "creation_date": 1526511404, "last_edit_date": 1537059495, "question_id": 50381064, "link": "https://stackoverflow.com/questions/50381064/select-the-max-row-per-group-pandas-performance-issue", "title": "Select the max row per group - pandas performance issue", "body": "<p>I'm selecting one max row per group and I'm using <code>groupby</code>/<code>agg</code> to return index values and select the rows using <code>loc</code>.</p>\n\n<p>For example, to group by <code>\"Id\"</code> and then select the row with the highest <code>\"delta\"</code> value:</p>\n\n<pre><code>selected_idx = df.groupby(\"Id\").apply(lambda df: df.delta.argmax())\nselected_rows = df.loc[selected_idx, :]\n</code></pre>\n\n<p>However, it's so slow this way. Actually, my i7/16G RAM laptop hangs when I'm using this query on 13 million rows.</p>\n\n<p>I have two questions for experts:</p>\n\n<ol>\n<li>How can I make this query run fast in pandas? What am I doing wrong?</li>\n<li>Why is this operation so expensive?</li>\n</ol>\n\n<hr>\n\n<p>[Update]\nThank you so much for @unutbu 's analysis!\n<code>sort_drop</code> it is! On my i7/32GRAM machine, groupby+idxmax hangs for nearly 14 hours (never return a thing) however <code>sort_drop</code> handled it LESS THAN A MINUTE!</p>\n\n<p>I still need to look at how pandas implements each method but problems solved for now! I love StackOverflow.</p>\n"}, {"tags": ["python", "neural-network", "keras"], "answers": [{"comments": [{"owner": {"reputation": 972, "user_id": 2410199, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/OgtO3.png?s=128&g=1", "display_name": "Mocas", "link": "https://stackoverflow.com/users/2410199/mocas"}, "edited": false, "score": 0, "creation_date": 1526513825, "post_id": 50381288, "comment_id": 87778807, "body": "Thanks for the answer. That kind of worked, but the output is now not helpful either, it seems as it is the same ration of the previous results, but they sum to 1, example [0.45, 0.05, 0.5]. Looks like needs more training"}, {"owner": {"reputation": 561, "user_id": 1827030, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/116ac4bd5aea3987086a889f233b2d23?s=128&d=identicon&r=PG", "display_name": "probaPerception", "link": "https://stackoverflow.com/users/1827030/probaperception"}, "edited": false, "score": 0, "creation_date": 1549556556, "post_id": 50381288, "comment_id": 95953022, "body": "Dear Mocas, according to your initial question the issue &quot;is that the output is not total to 1&quot;. I believe Bwood94&#39;s answer is correct to that regard. If you want better prediction results I would recommend you to test different parameters (for example using RELU instead of &#39;sigmoid&#39; for your second layer. But it&#39;s hard to know what would work without looking at the data. Others structures of networks may improve the prediction as well."}], "tags": [], "owner": {"reputation": 194, "user_id": 6373744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e592baae5c2d33a2e6bb4f44e495162?s=128&d=identicon&r=PG&f=1", "display_name": "Bwood94", "link": "https://stackoverflow.com/users/6373744/bwood94"}, "is_accepted": true, "score": 2, "last_activity_date": 1526513141, "creation_date": 1526513141, "answer_id": 50381288, "question_id": 50381050, "link": "https://stackoverflow.com/questions/50381050/how-to-optimize-my-neural-network/50381288#50381288", "title": "How to optimize my Neural Network?", "body": "<p>Typically if you want your output to sum to 1 you add a softmax layer as the last layer in your neural net, which outputs a sort of pseudo-probability measure. </p>\n\n<p>This should work:</p>\n\n<pre><code>model = Sequential([\n    Dense(32, input_shape=(100,), activation='sigmoid'),\n    Dense(64, activation='sigmoid'),\n    Dense(3, activation='softmax')\n])\nmodel.compile(Adam(lr=0.0001),loss='categorical_crossentropy', metrics = ['accuracy'])\nmodel.fit(bets, results, validation_split= 0.20, batch_size=10, epochs=200, shuffle=True, verbose=3)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 534, "user_id": 9512475, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152820241587113/picture?type=large", "display_name": "Y\u0131lmaz Durmaz", "link": "https://stackoverflow.com/users/9512475/y%c4%b1lmaz-durmaz"}, "is_accepted": false, "score": -1, "last_activity_date": 1526514200, "creation_date": 1526514200, "answer_id": 50381414, "question_id": 50381050, "link": "https://stackoverflow.com/questions/50381050/how-to-optimize-my-neural-network/50381414#50381414", "title": "How to optimize my Neural Network?", "body": "<p>A neural network, in normal conditions, will never give you a sum of possibilities, which means <code>P(a)</code> is not equal to <code>1-P(b)</code> in case of two outcomes. Instead, it gives you an approximated value close to that one after enough training, depending on the weighting function.</p>\n\n<p>Now, looking at your code, you probably train our NN with wrong logic. <code>[0.8, 0.2, 0.9]</code> looks like <code>[1, 0 ,1]</code> which is complementary of one of your desired outputs <code>[0, 1 ,0]</code>.</p>\n\n<p>Print all your outputs to see if this is the case, then act accordingly to shift the output.</p>\n\n<p>And one last thing: with your desired outputs, NN will give you something like <code>[0.06, 0.93, 0.15]</code>, two are close to <code>0</code>, and the other close to <code>1</code>. The values shall not sum to 1, if they are, then you are doing something wrong.</p>\n"}], "owner": {"reputation": 972, "user_id": 2410199, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/OgtO3.png?s=128&g=1", "display_name": "Mocas", "link": "https://stackoverflow.com/users/2410199/mocas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 50381288, "answer_count": 2, "score": -1, "last_activity_date": 1526514200, "creation_date": 1526511332, "question_id": 50381050, "link": "https://stackoverflow.com/questions/50381050/how-to-optimize-my-neural-network", "title": "How to optimize my Neural Network?", "body": "<p>I am new to neural networks, and watching lots of toturials manged to build my first one, but something is not right.</p>\n\n<p>The input consists of 100 inputs, all numbers between 0 and 100.\nThe output has three classes [x,y,z], where only one of them could be 1, and the others should be 0, so there is only 3 outcomes\n[1,0,0], [0,1,0] and [0,0,1]</p>\n\n<p>I am experimenting with the following setup</p>\n\n<pre><code>model = Sequential([\n    Dense(32, input_shape=(100,), activation='sigmoid'),\n    Dense(64, activation='sigmoid'),\n    Dense(3, activation='sigmoid')\n    ])\n\nmodel.compile(Adam(lr=0.0001),loss='categorical_crossentropy', metrics=['accuracy'])\nmodel.fit(bets, results, validation_split= 0.20, batch_size=10, epochs=200, shuffle=True, verbose=3)\n</code></pre>\n\n<p>The problem I am getting is that the output is not total to 1, so ideally I should be looking at</p>\n\n<p>for example [0.1, 0.3, 0.6] or [0.7, 0.2, 0.1] or [0.1, 0.8, 0.1]</p>\n\n<p>But when I run prediction, I am getting something like </p>\n\n<p>for example [0.8, 0.2, 0.9]</p>\n\n<p>Maybe the model needs to be trained for longer than 200 epochs, but not sure if my other configurations are correct for the values of my input and output.</p>\n\n<p>any ideas?</p>\n"}, {"tags": ["python", "pyqt", "pyqt5"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1526515720, "post_id": 50381025, "comment_id": 87779228, "body": "show analyzer.py file"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 9802973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10d0172cf41da6566c4080de25681fe9?s=128&d=identicon&r=PG&f=1", "display_name": "Rainier", "link": "https://stackoverflow.com/users/9802973/rainier"}, "edited": false, "score": 0, "creation_date": 1526577278, "post_id": 50381702, "comment_id": 87809913, "body": "Thank you very much! So let me see if I&#39;m an understanding this. So in the analyze function, are you recalling the Example window so that way you can display the information there? Also If you have to do that, then what the ex = Example() do at the bottom of the code?"}, {"owner": {"reputation": 10411, "user_id": 7767694, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DoPOp.png?s=128&g=1", "display_name": "S. Nick", "link": "https://stackoverflow.com/users/7767694/s-nick"}, "reply_to_user": {"reputation": 3, "user_id": 9802973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10d0172cf41da6566c4080de25681fe9?s=128&d=identicon&r=PG&f=1", "display_name": "Rainier", "link": "https://stackoverflow.com/users/9802973/rainier"}, "edited": false, "score": 0, "creation_date": 1526581060, "post_id": 50381702, "comment_id": 87811833, "body": "Yes, in class Second you do everything you need, including calling analyze. When you need to transfer data from the Second window to display and other calculations, you create the Example class constructor and pass the data to the desired method of this class for display or further processing."}], "tags": [], "owner": {"reputation": 10411, "user_id": 7767694, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DoPOp.png?s=128&g=1", "display_name": "S. Nick", "link": "https://stackoverflow.com/users/7767694/s-nick"}, "is_accepted": true, "score": 0, "last_activity_date": 1526516703, "creation_date": 1526516703, "answer_id": 50381702, "question_id": 50381025, "link": "https://stackoverflow.com/questions/50381025/how-to-get-information-from-one-main-window-to-another-main-window-after-running/50381702#50381702", "title": "How to get information from one Main Window to another Main Window after running a function PyQt?", "body": "<p>Try it: </p>\n\n<pre><code>from PyQt5.QtWidgets import (QMainWindow, QTextEdit, QAction, QFileDialog, \n        QApplication, QWidget, QDialog, QInputDialog, QLineEdit, QLabel, QGridLayout, QPushButton)\nfrom PyQt5.QtGui import QIcon\nfrom PyQt5.QtCore import Qt\nimport sys\n\n#import analyzer as AN\n\npathtoJSON = \"C:\\\\Tools\"\n\nclass Second(QMainWindow):\n\n    def __init__(self, parent=None):\n        super(Second, self).__init__(parent)\n        self.initUI()\n\n    def initUI(self):        \n        self.button = QPushButton('1', self)\n        self.button.clicked.connect(self.analyze)\n        self.button.resize(self.button.sizeHint())\n        self.button.move(167, 220)\n\n        self.text = \"2\".format(0, 0)\n        self.label = QLabel(self.text, self)\n        self.label.move(20,15)\n\n        self.textbox1 = QLineEdit(self)\n        self.textbox1.move(55, 20)\n        self.textbox1.resize(300,20)\n\n        self.text = \"3\".format(0, 0)\n        self.label = QLabel(self.text, self)\n        self.label.move(20,65)\n\n        self.textbox2 = QLineEdit(self)\n        self.textbox2.move(150, 70)\n        self.textbox2.resize(100,20)\n\n        self.text = \"4\".format(0, 0)\n        self.label = QLabel(self.text, self)\n        self.label.move(20,115)\n\n        self.textbox3 = QLineEdit(self)\n        self.textbox3.move(150, 120)\n        self.textbox3.resize(200,20)\n\n        self.text = \"5\".format(0, 0)\n        self.label = QLabel(self.text, self)\n        self.label.move(20,165)\n\n        self.textbox4 = QLineEdit(self)\n        self.textbox4.move(150, 170)\n        self.textbox4.resize(200, 20)\n\n        self.setGeometry(200, 200, 400, 260)\n        self.setFixedSize(self.size())\n        self.setWindowTitle('Settings')\n\n    def analyze(self):\n        #This command here generates a file from the following inputs from Second Window. This file appears at the following path in the variable pathtoJSON.\n#        AN.checkStream(self.textbox1.text(), self.textbox2.text(), self.textbox3.text(), self.textbox4.text())\n\n        global urlBox\n        urlBox = self.textbox1.text()\n\n        global durationBox\n        durationBox = self.textbox2.text()\n\n        global json_filename_box\n        json_filename_box = self.textbox3.text()\n\n        global playlistBox\n        playlistBox =  self.textbox4.text()\n\n        f = open(pathtoJSON + \"\\\\\" + str(self.textbox3.text()) + \".txt\")   \n\n        # +++\n        self.ex = Example()\n        self.ex.showFile(f)\n        self.ex.show()\n        self.close()          \n\n\n\nclass Example(QMainWindow):\n\n    def __init__(self):\n        super().__init__()\n        self.initUI()\n\n    def initUI(self): \n        #The file should be displayed in this textEdit box  \n        self.textEdit = QTextEdit()\n        self.setCentralWidget(self.textEdit)\n        self.statusBar()\n\n        #This action does nothing for now.\n        openFile = QAction(QIcon('open.png'), 'Run with configuration', self)\n        openFile.setShortcut('Ctrl+O')\n        openFile.setStatusTip('Run with file')\n        openFile.triggered.connect(self.showDialog)\n\n        #This is supposed to ask you for your settings of the file and then when you pressed the button. It analyzes the file with the analyzer script and is supposed to grab the file \n        singleURL = QAction('Input URL', self)\n        singleURL.setStatusTip('Analyze with a single URL')        \n        singleURL.triggered.connect(self.showSettings)\n\n        menubar = self.menuBar()\n        fileMenu = menubar.addMenu('&amp;File')\n        fileMenu.addAction(openFile)\n        fileMenu.addAction(singleURL)\n\n        self.runURL = Second(self)\n\n        self.setGeometry(300, 300, 350, 300)\n        self.setWindowTitle('HLS Automation')\n        self.showMaximized()\n\n    def showSettings(self):     \n        file = self.runURL.show()\n        self.hide()                                          # +++\n\n    def showDialog(self):\n        fname = QFileDialog.getOpenFileName(self, 'Open file', '/home')\n        if fname[0]:\n            f = open(fname[0], 'r')\n            with f:\n                data = f.read()\n                self.textEdit.setText(data)  \n\n    # +++\n    def showFile(self, f):    \n        with f:\n            data = f.read()\n            self.textEdit.setText(data)         \n\n\nif __name__ == '__main__':\n\n    app = QApplication(sys.argv)\n    ex = Example()\n    sys.exit(app.exec_())\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 9802973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10d0172cf41da6566c4080de25681fe9?s=128&d=identicon&r=PG&f=1", "display_name": "Rainier", "link": "https://stackoverflow.com/users/9802973/rainier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 50381702, "answer_count": 1, "score": 0, "last_activity_date": 1526516703, "creation_date": 1526511143, "question_id": 50381025, "link": "https://stackoverflow.com/questions/50381025/how-to-get-information-from-one-main-window-to-another-main-window-after-running", "title": "How to get information from one Main Window to another Main Window after running a function PyQt?", "body": "<p>I am having trouble trying to get a file from a different window after running a function. The end goal is to get a file from one window and display the entire file on the Main Window. I have textedit set up for displaying the file. The code is below:</p>\n\n<pre><code>from PyQt5.QtWidgets import (QMainWindow, QTextEdit, QAction, QFileDialog, QApplication, QWidget, QDialog, QInputDialog, QLineEdit, QLabel, QGridLayout, QPushButton)\nfrom PyQt5.QtGui import QIcon\nfrom PyQt5.QtCore import Qt\nimport sys\n\nimport analyzer as AN\n\npathtoJSON = \"C:\\\\Tools\"\n\nclass Second(QMainWindow):\n\n    def __init__(self, parent=None):\n        super(Second, self).__init__(parent)\n        self.initUI()\n\n    def initUI(self):        \n        self.button = QPushButton('1', self)\n        self.button.clicked.connect(self.analyze)\n        self.button.resize(self.button.sizeHint())\n        self.button.move(167, 220)\n\n        self.text = \"2\".format(0, 0)\n        self.label = QLabel(self.text, self)\n        self.label.move(20,15)\n\n        self.textbox1 = QLineEdit(self)\n        self.textbox1.move(55, 20)\n        self.textbox1.resize(300,20)\n\n        self.text = \"3\".format(0, 0)\n        self.label = QLabel(self.text, self)\n        self.label.move(20,65)\n\n        self.textbox2 = QLineEdit(self)\n        self.textbox2.move(150, 70)\n        self.textbox2.resize(100,20)\n\n        self.text = \"4\".format(0, 0)\n        self.label = QLabel(self.text, self)\n        self.label.move(20,115)\n\n        self.textbox3 = QLineEdit(self)\n        self.textbox3.move(150, 120)\n        self.textbox3.resize(200,20)\n\n        self.text = \"5\".format(0, 0)\n        self.label = QLabel(self.text, self)\n        self.label.move(20,165)\n\n        self.textbox4 = QLineEdit(self)\n        self.textbox4.move(150, 170)\n        self.textbox4.resize(200, 20)\n\n        self.setGeometry(200, 200, 400, 260)\n        self.setFixedSize(self.size())\n        self.setWindowTitle('Settings')\n\n    def analyze(self):\n        #This command here generates a file from the following inputs from Second Window. This file appears at the following path in the variable pathtoJSON.\n#        AN.checkStream(self.textbox1.text(), self.textbox2.text(), self.textbox3.text(), self.textbox4.text())\n\n        global urlBox\n        urlBox = self.textbox1.text()\n\n        global durationBox\n        durationBox = self.textbox2.text()\n\n        global json_filename_box\n        json_filename_box = self.textbox3.text()\n\n        global playlistBox\n        playlistBox =  self.textbox4.text()\n\n        f = open(pathtoJSON + \"\\\\\" + str(self.textbox3.text()) + \".txt\")   \n\nclass Example(QMainWindow):\n\n    def __init__(self):\n        super().__init__()\n        self.initUI()\n\n    def initUI(self): \n        #The file should be displayed in this textEdit box  \n        self.textEdit = QTextEdit()\n        self.setCentralWidget(self.textEdit)\n        self.statusBar()\n\n        #This action does nothing for now.\n        openFile = QAction(QIcon('open.png'), 'Run with configuration', self)\n        openFile.setShortcut('Ctrl+O')\n        openFile.setStatusTip('Run with file')\n        openFile.triggered.connect(self.showDialog)\n\n        #This is supposed to ask you for your settings of the file and then when you pressed the button. It analyzes the file with the analyzer script and is supposed to grab the file \n        singleURL = QAction('Input URL', self)\n        singleURL.setStatusTip('Analyze with a single URL')        \n        singleURL.triggered.connect(self.showSettings)\n\n        menubar = self.menuBar()\n        fileMenu = menubar.addMenu('&amp;File')\n        fileMenu.addAction(openFile)\n        fileMenu.addAction(singleURL)\n\n        self.runURL = Second(self)\n\n        self.setGeometry(300, 300, 350, 300)\n        self.setWindowTitle('HLS Automation')\n        self.showMaximized()\n\n    def showSettings(self):     \n        file = self.runURL.show()\n\n    def showDialog(self):\n        fname = QFileDialog.getOpenFileName(self, 'Open file', '/home')\n        if fname[0]:\n            f = open(fname[0], 'r')\n            with f:\n                data = f.read()\n                self.textEdit.setText(data)  \n\n\nif __name__ == '__main__':\n\n    app = QApplication(sys.argv)\n    ex = Example()\n    sys.exit(app.exec_())\n</code></pre>\n\n<p>There are two different windows. The Second Main Window is accessed by clicking on \"Input URL\". In this window, you can run the Analyzer (This script is was created by me). So the idea is to run the analyzer script. It generates a file after running and is stored in the directory indicated by pathtoJSON. It does that fine but so far I am only able to get the save the file into a variable. Also that variable is in the Second Main Window function. </p>\n\n<p>So can someone please explain to me how I can get the file from the Second Window and display it on the textEdit portion in Main Window? Am I doing something wrong in my code that prevents me from doing that?</p>\n"}, {"tags": ["python", "tensorflow", "neural-network", "artificial-intelligence", "2048"], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 4656299, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-Oa7V-qRyEDs/AAAAAAAAAAI/AAAAAAAAAIQ/Yu5jP61VcIM/photo.jpg?sz=128", "display_name": "Neywiny", "link": "https://stackoverflow.com/users/4656299/neywiny"}, "edited": false, "score": 0, "creation_date": 1526513312, "post_id": 50381176, "comment_id": 87778688, "body": "Okay thank you, I was wondering how something so trivial could be so elusive to my googling. So if I had 16 input neurons I would just make a dictionary of the 16 values and the variable &quot;result&quot; will just be the output neuron? This is very useful stuff, thank you."}, {"owner": {"reputation": 25553, "user_id": 4790871, "user_type": "registered", "accept_rate": 99, "profile_image": "https://lh4.googleusercontent.com/-7sCm6Bl96nw/AAAAAAAAAAI/AAAAAAAAAH4/0LGbJtwJZd0/photo.jpg?sz=128", "display_name": "David Parks", "link": "https://stackoverflow.com/users/4790871/david-parks"}, "reply_to_user": {"reputation": 81, "user_id": 4656299, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-Oa7V-qRyEDs/AAAAAAAAAAI/AAAAAAAAAIQ/Yu5jP61VcIM/photo.jpg?sz=128", "display_name": "Neywiny", "link": "https://stackoverflow.com/users/4656299/neywiny"}, "edited": false, "score": 0, "creation_date": 1526513483, "post_id": 50381176, "comment_id": 87778724, "body": "A simple numpy vector of 16 values is your input. The output will be a just 1 value, again numpy ndarray datatype. Input/output to/from tensorflow happens in numpy format."}, {"owner": {"reputation": 81, "user_id": 4656299, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-Oa7V-qRyEDs/AAAAAAAAAAI/AAAAAAAAAIQ/Yu5jP61VcIM/photo.jpg?sz=128", "display_name": "Neywiny", "link": "https://stackoverflow.com/users/4656299/neywiny"}, "edited": false, "score": 0, "creation_date": 1526513948, "post_id": 50381176, "comment_id": 87778846, "body": "right right, numpy. I&#39;ll give it a go when I can, thank you very much."}, {"owner": {"reputation": 81, "user_id": 4656299, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-Oa7V-qRyEDs/AAAAAAAAAAI/AAAAAAAAAIQ/Yu5jP61VcIM/photo.jpg?sz=128", "display_name": "Neywiny", "link": "https://stackoverflow.com/users/4656299/neywiny"}, "edited": false, "score": 0, "creation_date": 1526577984, "post_id": 50381176, "comment_id": 87810244, "body": "the optimizer is tripping me up. To my understanding that like of code should optimize the graph to get from input_data to labels, but I only have a score as the output, which is not dependent at all on the input data. I tried making a gradient descent minimizer with -1*score, but it keeps saying there&#39;s no gradients provided?"}, {"owner": {"reputation": 25553, "user_id": 4790871, "user_type": "registered", "accept_rate": 99, "profile_image": "https://lh4.googleusercontent.com/-7sCm6Bl96nw/AAAAAAAAAAI/AAAAAAAAAH4/0LGbJtwJZd0/photo.jpg?sz=128", "display_name": "David Parks", "link": "https://stackoverflow.com/users/4790871/david-parks"}, "reply_to_user": {"reputation": 81, "user_id": 4656299, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-Oa7V-qRyEDs/AAAAAAAAAAI/AAAAAAAAAIQ/Yu5jP61VcIM/photo.jpg?sz=128", "display_name": "Neywiny", "link": "https://stackoverflow.com/users/4656299/neywiny"}, "edited": false, "score": 0, "creation_date": 1526589944, "post_id": 50381176, "comment_id": 87816355, "body": "You need a loss function that compares the output that was produced by the network to the output you desired. That loss would be a function of both the networks output and your expected result. If you only have a score and not an expected output to compare against then you need to look into Reinforcement Learning. Check out the OpenAI Gym: <a href=\"https://gym.openai.com\" rel=\"nofollow noreferrer\">gym.openai.com</a>"}, {"owner": {"reputation": 81, "user_id": 4656299, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-Oa7V-qRyEDs/AAAAAAAAAAI/AAAAAAAAAIQ/Yu5jP61VcIM/photo.jpg?sz=128", "display_name": "Neywiny", "link": "https://stackoverflow.com/users/4656299/neywiny"}, "edited": false, "score": 0, "creation_date": 1526595037, "post_id": 50381176, "comment_id": 87818177, "body": "Thanks, I&#39;ll look into it."}], "tags": [], "owner": {"reputation": 25553, "user_id": 4790871, "user_type": "registered", "accept_rate": 99, "profile_image": "https://lh4.googleusercontent.com/-7sCm6Bl96nw/AAAAAAAAAAI/AAAAAAAAAH4/0LGbJtwJZd0/photo.jpg?sz=128", "display_name": "David Parks", "link": "https://stackoverflow.com/users/4790871/david-parks"}, "is_accepted": true, "score": 1, "last_activity_date": 1526512307, "creation_date": 1526512307, "answer_id": 50381176, "question_id": 50381004, "link": "https://stackoverflow.com/questions/50381004/tensorflow-neural-network-as-an-api/50381176#50381176", "title": "TensorFlow neural network as an API?", "body": "<p>This is certainly possible and trivial. You'll have to set up the model you want to use and I will assume that's been built.</p>\n\n<p>From the perspective of interacting with a tensorflow model you just need to marshal your data into numpy arrays to pass in via the <code>feed_dict</code> property of <code>sess.run</code>.</p>\n\n<p>To pass an input to tensorflow and get a result you would run something like this:</p>\n\n<pre><code>result = sess.run([logits], feed_dict={x:input_data})\n</code></pre>\n\n<p>This would perform a forward pass producing the output of the model without making any update. Now you'll take the <code>results</code> and use them to take the next step in the game.</p>\n\n<p>Now that you have the result of your action (e.g. labels) you can perform an update step:</p>\n\n<pre><code>sess.run([update_op], feed_dict={x:input_data, y:labels})\n</code></pre>\n\n<p>It's as simple as that. Notice that your model will have an optimizer defined (<code>update_op</code> in this example), but if you don't ask tensorflow to compute it (as in the first code sample) no updates will occur. Tensorflow is all about a dependency graph. The optimizer is dependent on the output <code>logits</code>, but computing <code>logits</code> is not dependent on the optimizer.</p>\n\n<p>Presumably you'll initialize this model randomly, so the first results will be randomly generated, but each step after that will benefit from the previous updates being applied.</p>\n\n<p>If you're using a reinforcement learning model then you would only produce a reward at some indeterminant time in the future and when you run the update would vary a little from this example, but the general nature of the problem remains the same.</p>\n"}], "owner": {"reputation": 81, "user_id": 4656299, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-Oa7V-qRyEDs/AAAAAAAAAAI/AAAAAAAAAIQ/Yu5jP61VcIM/photo.jpg?sz=128", "display_name": "Neywiny", "link": "https://stackoverflow.com/users/4656299/neywiny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 50381176, "answer_count": 1, "score": 2, "last_activity_date": 1526512307, "creation_date": 1526510996, "question_id": 50381004, "link": "https://stackoverflow.com/questions/50381004/tensorflow-neural-network-as-an-api", "title": "TensorFlow neural network as an API?", "body": "<p>I am in the process of writing an AI for the game 2048. At the moment, I can pull the game state from the browser and send moves to the game, but I don't know how to integrate that with TensorFlow. The nature of the project isn't conducive to training data, so I was wondering if it's possible to pass in the state of the game, have the network chuck out a move, run the move, repeat until the game is over, and then have it do the training?</p>\n"}, {"tags": ["python", "python-3.x", "ip", "cidr"], "answers": [{"tags": [], "owner": {"reputation": 15511, "user_id": 1044117, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/70c26ef03afcef7dd3f3418097b38d80?s=128&d=identicon&r=PG", "display_name": "fferri", "link": "https://stackoverflow.com/users/1044117/fferri"}, "is_accepted": true, "score": 4, "last_activity_date": 1526573016, "last_edit_date": 1526573016, "creation_date": 1526511618, "answer_id": 50381089, "question_id": 50380990, "link": "https://stackoverflow.com/questions/50380990/how-to-convert-cidr-to-ip-ranges-using-python3/50381089#50381089", "title": "How to convert CIDR to IP ranges using python3?", "body": "<p>Use the <a href=\"https://docs.python.org/3/library/ipaddress.html\" rel=\"nofollow noreferrer\"><code>ipaddress</code></a> builtin module:</p>\n\n<pre><code>&gt;&gt;&gt; import ipaddress\n\n&gt;&gt;&gt; net=ipaddress.ip_network('94.192.0.0/14')\nIPv4Network('94.192.0.0/14')\n\n&gt;&gt;&gt; '%s-%s' % (net[0], net[-1])\n'94.192.0.0-94.195.255.255'\n</code></pre>\n\n<p>&nbsp;</p>\n\n<p>With <code>for i in net</code> you can also enumerate <strong>all</strong> ip addresses in the network <code>net</code>.</p>\n"}], "owner": {"reputation": 43, "user_id": 9752470, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ig5C2WmyOa0/AAAAAAAAAAI/AAAAAAAAAFI/qmkNrtFUWYo/photo.jpg?sz=128", "display_name": "tellst1", "link": "https://stackoverflow.com/users/9752470/tellst1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2364, "favorite_count": 2, "accepted_answer_id": 50381089, "answer_count": 1, "score": 4, "last_activity_date": 1615510240, "creation_date": 1526510895, "last_edit_date": 1526511138, "question_id": 50380990, "link": "https://stackoverflow.com/questions/50380990/how-to-convert-cidr-to-ip-ranges-using-python3", "title": "How to convert CIDR to IP ranges using python3?", "body": "<p>How to convert list like:  </p>\n\n<pre><code>94.192.0.0/14  \n94.0.0.0/12  \n93.96.0.0/16 \n</code></pre>\n\n<p>To:  </p>\n\n<pre><code>94.192.0.0-94.195.255.255  \n94.0.0.0-94.15.255.255  \n93.96.0.0-93.96.255.255  \n</code></pre>\n\n<p>Using python3?</p>\n"}, {"tags": ["python", "bokeh"], "comments": [{"owner": {"reputation": 436, "user_id": 1247420, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AZFcV.png?s=128&g=1", "display_name": "diek", "link": "https://stackoverflow.com/users/1247420/diek"}, "edited": false, "score": 0, "creation_date": 1526534026, "post_id": 50380926, "comment_id": 87783039, "body": "Did you try this in a simple script, without a GUI to confirm that it is actually working?"}, {"owner": {"reputation": 920, "user_id": 8412027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/74QPv.png?s=128&g=1", "display_name": "Joris", "link": "https://stackoverflow.com/users/8412027/joris"}, "edited": false, "score": 1, "creation_date": 1526550997, "post_id": 50380926, "comment_id": 87792603, "body": "There are so many mistakes in your code.. to much to mention them all. Perhaps try first replicating some examples on the bokeh site. In any case (1) when you want to use the onclick() function as you do you need to declare this function before you call it (2) for truly dynamic pages you need to work with the bokeh server and the curdoc() method instead of the show()"}], "answers": [{"tags": [], "owner": {"reputation": 920, "user_id": 8412027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/74QPv.png?s=128&g=1", "display_name": "Joris", "link": "https://stackoverflow.com/users/8412027/joris"}, "is_accepted": false, "score": 0, "last_activity_date": 1526551519, "creation_date": 1526551519, "answer_id": 50388728, "question_id": 50380926, "link": "https://stackoverflow.com/questions/50380926/python-bokeh-my-button-wont-do-anything/50388728#50388728", "title": "Python, Bokeh - my button won&#39;t do ANYTHING", "body": "<p>There are many mistakes in your code.. to much to mention them all. First try this:\nsave the below script in a file script.py and\nopen a cmd in the directory where you saved the file and run \"bokeh serve script.py --show'</p>\n\n<pre><code>from bokeh.models.widgets import Button\nfrom bokeh.io import curdoc\n\ndef onclick():\n    print('somebody clicked the button and this can be read in the bokeh console')\nbutton = Button(label='Update', button_type='primary')\nbutton.on_click(onclick)\n\ncurdoc().add_root(button)\n</code></pre>\n"}], "owner": {"reputation": 125, "user_id": 9803003, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0abe0e0c8f3ff0f5ebac0536f5e3afc?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Klapperich", "link": "https://stackoverflow.com/users/9803003/christopher-klapperich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 364, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1526551519, "creation_date": 1526510554, "question_id": 50380926, "link": "https://stackoverflow.com/questions/50380926/python-bokeh-my-button-wont-do-anything", "title": "Python, Bokeh - my button won&#39;t do ANYTHING", "body": "<p>Python 3.6 and Bokeh 0.12.16.</p>\n\n<p>No matter what I change the body of the onclick() function to - it doesn't do anything! I can't even verify if it's being called or not. </p>\n\n<pre><code>button = Button(label='Update', button_type='primary')\nbutton.on_click(onclick)\n\np = Paragraph(text='aaaaaaa',\nwidth=200, height=100)\n\ndef onclick():\n    plot_layout.children[2]=Paragraph(text=\"test\")\n    show(plot_layout)\n\nplot_layout = layout([Laser_Dropdown,Section_Dropdown,p,button])\n\noutput_file(\"test.html\")\nshow(plot_layout)\n</code></pre>\n"}, {"tags": ["python", "pip", "packages", "pypi", "package-management"], "answers": [{"tags": [], "owner": {"reputation": 301, "user_id": 6581811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ebe3bf1090ff5d46167ec62f9341689?s=128&d=identicon&r=PG&f=1", "display_name": "makunha", "link": "https://stackoverflow.com/users/6581811/makunha"}, "is_accepted": false, "score": 3, "last_activity_date": 1530311741, "last_edit_date": 1530311741, "creation_date": 1526510680, "answer_id": 50380944, "question_id": 50380899, "link": "https://stackoverflow.com/questions/50380899/get-the-requirements-of-a-package-in-pypi-without-installing-it/50380944#50380944", "title": "Get the requirements of a package in PyPI without installing it?", "body": "<pre><code>pip show &lt;package_name&gt;\n</code></pre>\n\n<p>will list the dependencies in the \"Requires\" section. See <a href=\"https://pip.pypa.io/en/stable/reference/pip_show/\" rel=\"nofollow noreferrer\">documentation</a>. </p>\n\n<p><strong>Edit:</strong></p>\n\n<p><code>pip show</code> only works for installed packages. For uninstalled packages, PyPI has a <a href=\"https://wiki.python.org/moin/PyPIJSON\" rel=\"nofollow noreferrer\">JSON API</a>.</p>\n\n<p>For example:</p>\n\n<pre><code>import json\n\nimport requests\n\npackage_name = 'tensorflow'\nurl = 'https://pypi.python.org/pypi/' + str(package_name) + '/json'\ndata = requests.get(url).json()\n\nprint(data['info']['requires_dist'])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 192, "user_id": 2193308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83ec2808f90c1334796a7923a4ec6442?s=128&d=identicon&r=PG", "display_name": "djcrabhat", "link": "https://stackoverflow.com/users/2193308/djcrabhat"}, "is_accepted": false, "score": 0, "last_activity_date": 1526510970, "creation_date": 1526510970, "answer_id": 50381000, "question_id": 50380899, "link": "https://stackoverflow.com/questions/50380899/get-the-requirements-of-a-package-in-pypi-without-installing-it/50381000#50381000", "title": "Get the requirements of a package in PyPI without installing it?", "body": "<p>So there used to be a <code>--no-install</code> flag in older version of pip, <a href=\"https://github.com/pypa/pip/issues/1345\" rel=\"nofollow noreferrer\">but no longer</a>.  <code>pip show</code> will show you the \"Requires\" property, but only for packages installed in your environment (system or in your venv), where it seems you wanna check out requirements before you install.  So, sadly, I think there's not a nice way to accomplish what you're looking for.  </p>\n"}], "owner": {"reputation": 523, "user_id": 3754314, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/1739665361/picture?type=large", "display_name": "mmnormyle", "link": "https://stackoverflow.com/users/3754314/mmnormyle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1641, "favorite_count": 0, "closed_date": 1526701739, "answer_count": 2, "score": 4, "last_activity_date": 1530311741, "creation_date": 1526510376, "last_edit_date": 1526510949, "question_id": 50380899, "link": "https://stackoverflow.com/questions/50380899/get-the-requirements-of-a-package-in-pypi-without-installing-it", "closed_reason": "Duplicate", "title": "Get the requirements of a package in PyPI without installing it?", "body": "<p>I need something like the following:</p>\n\n<pre><code>pip showrequirements tensorflow\n</code></pre>\n\n<p>This would return something that allows me to parse the names of the required packages and the required versions:</p>\n\n<pre><code>astor&gt;0.6, tensorboard&gt;1.0.11, etc.\n</code></pre>\n\n<p>pip is getting this information in some form during the install and download command. I can see where it's happening in the code... but before I hack my way to using pip's internal code, is there any easy API or existing library that can do this? </p>\n\n<p>edit: I cannot install the package to see this, so pip show won't work. One (hacky) solution is parsing the output of pip download.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "gps", "coordinates", "haversine"], "comments": [{"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1526510519, "post_id": 50380860, "comment_id": 87777973, "body": "First, how are you reading that CSV in? A list of lists/tuples, dicts, or objects, a 2D numpy array, a pandas DataFrame, \u2026?"}, {"owner": {"reputation": 365, "user_id": 6540155, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d060b9594c65947b9ecbcf8484cee3c0?s=128&d=identicon&r=PG&f=1", "display_name": "user_01", "link": "https://stackoverflow.com/users/6540155/user-01"}, "reply_to_user": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1526510663, "post_id": 50380860, "comment_id": 87778019, "body": "I mean I want to read it as pandas dataframe and want to iterate over all three elements. But any way to read it is ok. I just do not know how to iterate correctly on them"}], "answers": [{"tags": [], "owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "is_accepted": true, "score": 2, "last_activity_date": 1526511290, "last_edit_date": 1526511290, "creation_date": 1526510772, "answer_id": 50380969, "question_id": 50380860, "link": "https://stackoverflow.com/questions/50380860/calculate-global-distance-between-several-locations/50380969#50380969", "title": "Calculate global distance between several locations", "body": "<p>Assuming you've read that CSV into some kind of sequence of sequences (e.g., <code>list(csv.reader(f))</code>), all you need to do is iterate over all combinations of locations. And that's exactly what <a href=\"https://docs.python.org/3/library/itertools.html#itertools.combinations\" rel=\"nofollow noreferrer\"><code>itertools.combinations</code></a> does:</p>\n\n<pre><code>&gt;&gt;&gt; locs = [('A', 55.322, -117.17), ('B', 57.316, -117.456), ('C', 54.275, 116.567)]\n&gt;&gt;&gt; for (loc1, lat1, lon1), (loc2, lat2, lon2) in itertools.combinations(locs, 2):\n...     print(loc1, loc2, global_distance((lat1, lon1), (lat2, lon2)))\nA B 222.42244003744995\nA C 122.66829007875741\nB C 342.67144769115316\n</code></pre>\n\n<p>While you're looking at the linked docs above, notice <code>combinations_with_replacement</code>, <code>permutations</code>, and <code>product</code>, which are often the answers to similar but slightly different problems.</p>\n\n<p>This should be easy to adapt to a sequence of dicts, or a dict of <code>Location</code> instances, etc. If, on the other hand, you have something like a 2D numpy array or a pandas DataFrame, you may want to do something different. (Although from a quick search, it looks like just making an array out the <code>itertools</code> combinations with <code>fromiter</code> isn't significantly slower than anything else, even if you want to trade of space for time to broadcast your <code>global_distance</code> function.)</p>\n"}, {"tags": [], "owner": {"reputation": 9302, "user_id": 8300135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eaa9ded8087b3af42dd463c95696733?s=128&d=identicon&r=PG&f=1", "display_name": "SpghttCd", "link": "https://stackoverflow.com/users/8300135/spghttcd"}, "is_accepted": false, "score": 1, "last_activity_date": 1526512189, "last_edit_date": 1526512189, "creation_date": 1526511537, "answer_id": 50381079, "question_id": 50380860, "link": "https://stackoverflow.com/questions/50380860/calculate-global-distance-between-several-locations/50381079#50381079", "title": "Calculate global distance between several locations", "body": "<p>I'd import the data from your file via pandas:</p>\n\n<pre><code>import pandas as pd\ndf = pd.read_table(filename, sep='\\s+', index_col=0)\n</code></pre>\n\n<p>Additionally, you can import itertools:</p>\n\n<pre><code>import itertools as it\n</code></pre>\n\n<p>With this you can get all combinations of a iterable like this, as an example with the indices of the dataframe here:</p>\n\n<pre><code>for i in it.combinations(df.index, 2): print(i)\n('A', 'B')\n('A', 'C')\n('B', 'C')\n</code></pre>\n\n<p>This shows, that you'll get the combinations you want.\nNow do the same with the data of your dataframe:</p>\n\n<pre><code>for i in it.combinations(df.values, 2): print(global_distance(i[0], i[1]))\n222.4224400374507\n122.66829007875636\n342.671447691153\n</code></pre>\n\n<p>And if you want to have the location names included in the output, you can leave away the <code>index_col=0</code> when importing, so that A, B and C is also part of the <code>df.values</code> and you could write:</p>\n\n<pre><code>for i in it.combinations(df.values, 2): print(i[0][0], '-', i[1][0], global_distance(i[0][1:], i[1][1:]))\nA - B 222.4224400374507\nA - C 122.66829007875636\nB - C 342.671447691153\n</code></pre>\n"}], "owner": {"reputation": 365, "user_id": 6540155, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d060b9594c65947b9ecbcf8484cee3c0?s=128&d=identicon&r=PG&f=1", "display_name": "user_01", "link": "https://stackoverflow.com/users/6540155/user-01"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 50380969, "answer_count": 2, "score": -1, "last_activity_date": 1526512189, "creation_date": 1526510091, "last_edit_date": 1526510153, "question_id": 50380860, "link": "https://stackoverflow.com/questions/50380860/calculate-global-distance-between-several-locations", "title": "Calculate global distance between several locations", "body": "<p>I am working on the calculation of the distance between two global positions based on their coordinates. When using only two locations, I get results:</p>\n\n<pre><code>def global_distance(location1, location2):\n    lat1, lon1 = location1\n    lat2, lon2 = location2\n    radius = 6371 # radius of the Earth\n\n    dlat = math.radians(lat2-lat1)\n    dlon = math.radians(lon2-lon1)\n    a = math.sin(dlat/2) * math.sin(dlat/2) + math.cos(math.radians(lat1)) \\\n        * math.cos(math.radians(lat2)) * math.sin(dlon/2) * math.sin(dlon/2)\n    c = 2 * math.atan2(math.sqrt(a), math.sqrt(1-a))\n    d = radius * c\n\n    return d\n\nlat1 = 55.32; lat2 = 54.276; long1 = -118.8634; long2 = -117.276\n\n\nprint( global_distance((lat1, long1), (lat2, long2)))\n</code></pre>\n\n<p>What if I want to calculate the distance between several locations? Assuming I have a CSV file containing three locations:</p>\n\n<pre><code>Location   Lat1      Long1      \n A         55.322    -117.17\n B         57.316    -117.456\n C         54.275    -116.567\n</code></pre>\n\n<p>How can I iterate over these two columns and produce distances between (A,B), (A,C) and (B,C)  ?  </p>\n"}, {"tags": ["python", "tensorflow", "machine-learning", "tensorflow-datasets"], "comments": [{"owner": {"reputation": 1342, "user_id": 8255399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5f3ed502249c865f332a18f61bb32e1?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/8255399/alex"}, "edited": false, "score": 0, "creation_date": 1526538914, "post_id": 50380844, "comment_id": 87785256, "body": "Are all combinations of labels possible or do they always arise in a specific combination (like it is shown in the portion of the training data)? Are only some specific numeric values for a label applicable or can it be any number between 0 and 1? As you said it might be already a very hard problem because you have so many lables and that few features. Maybe you put the values into meaningfull buckets [small, middle, large] ... , if that still solves your problem."}, {"owner": {"reputation": 137, "user_id": 9755419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c728e64f2681f1ac5e13ac94831fe8d5?s=128&d=identicon&r=PG&f=1", "display_name": "yuonger741", "link": "https://stackoverflow.com/users/9755419/yuonger741"}, "reply_to_user": {"reputation": 1342, "user_id": 8255399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5f3ed502249c865f332a18f61bb32e1?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/8255399/alex"}, "edited": false, "score": 0, "creation_date": 1526577096, "post_id": 50380844, "comment_id": 87809833, "body": "Hi @Alex, I think I can clarify more about the training data. For every 30(vgs)*10(vbs)*10(vds) features corresponds to 1 set of labels. That&#39;s why the labels from the portion I showed looks all the same."}, {"owner": {"reputation": 137, "user_id": 9755419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c728e64f2681f1ac5e13ac94831fe8d5?s=128&d=identicon&r=PG&f=1", "display_name": "yuonger741", "link": "https://stackoverflow.com/users/9755419/yuonger741"}, "reply_to_user": {"reputation": 1342, "user_id": 8255399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5f3ed502249c865f332a18f61bb32e1?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/8255399/alex"}, "edited": false, "score": 0, "creation_date": 1526577225, "post_id": 50380844, "comment_id": 87809889, "body": "So perhaps a more proper way to express my data is that I have a four dimension features [30, 10 ,10, current] that corresponds to 1 set of labels."}, {"owner": {"reputation": 1342, "user_id": 8255399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5f3ed502249c865f332a18f61bb32e1?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/8255399/alex"}, "edited": false, "score": 0, "creation_date": 1526582137, "post_id": 50380844, "comment_id": 87812408, "body": "How many sets of labels do you have? Would it make sense to reshape your data in the way that you have input = [30, 10 ,10, current] and label is just a single class [Set1,Set2,Set3...]"}, {"owner": {"reputation": 137, "user_id": 9755419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c728e64f2681f1ac5e13ac94831fe8d5?s=128&d=identicon&r=PG&f=1", "display_name": "yuonger741", "link": "https://stackoverflow.com/users/9755419/yuonger741"}, "reply_to_user": {"reputation": 1342, "user_id": 8255399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5f3ed502249c865f332a18f61bb32e1?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/8255399/alex"}, "edited": false, "score": 0, "creation_date": 1526582334, "post_id": 50380844, "comment_id": 87812518, "body": "Yes I am trying to do so right now. My problem now is that this code seems to take in 128 rows of data every time and I need to set it to 3000 so it can reshape it. But I have no idea where this number 128 is set."}, {"owner": {"reputation": 1342, "user_id": 8255399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5f3ed502249c865f332a18f61bb32e1?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/8255399/alex"}, "edited": false, "score": 0, "creation_date": 1526582805, "post_id": 50380844, "comment_id": 87812800, "body": "This is the default batch_size of the <a href=\"https://www.tensorflow.org/api_docs/python/tf/estimator/inputs/numpy_input_fn\" rel=\"nofollow noreferrer\">tf.estimator.inputs.numpy_input_fn</a> function. You might also turn shuffle off."}, {"owner": {"reputation": 137, "user_id": 9755419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c728e64f2681f1ac5e13ac94831fe8d5?s=128&d=identicon&r=PG&f=1", "display_name": "yuonger741", "link": "https://stackoverflow.com/users/9755419/yuonger741"}, "reply_to_user": {"reputation": 1342, "user_id": 8255399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5f3ed502249c865f332a18f61bb32e1?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/8255399/alex"}, "edited": false, "score": 0, "creation_date": 1526582931, "post_id": 50380844, "comment_id": 87812880, "body": "Oh I figured out. It should be the default batch_size value in numpy_input_fn."}, {"owner": {"reputation": 137, "user_id": 9755419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c728e64f2681f1ac5e13ac94831fe8d5?s=128&d=identicon&r=PG&f=1", "display_name": "yuonger741", "link": "https://stackoverflow.com/users/9755419/yuonger741"}, "reply_to_user": {"reputation": 1342, "user_id": 8255399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5f3ed502249c865f332a18f61bb32e1?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/8255399/alex"}, "edited": false, "score": 0, "creation_date": 1526667013, "post_id": 50380844, "comment_id": 87849669, "body": "@Alex now I add reshape the input layer by using tf.reshape(features[&quot;x&quot;], [10,10,30,4]) before it reaches the first hidden layer. Still it is not having the right results. Is simply reshaping the input enough? How do I let the flow know that it is kind of a (30*10*10) features to 1 labels relation?"}, {"owner": {"reputation": 90304, "user_id": 562769, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/e86681e49622d52817b36fd2a4c936b7?s=128&d=identicon&r=PG", "display_name": "Martin Thoma", "link": "https://stackoverflow.com/users/562769/martin-thoma"}, "edited": false, "score": 0, "creation_date": 1526729084, "post_id": 50380844, "comment_id": 87864236, "body": "<a href=\"https://arxiv.org/abs/1707.09725\" rel=\"nofollow noreferrer\">arxiv.org/abs/1707.09725</a> page 15"}, {"owner": {"reputation": 137, "user_id": 9755419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c728e64f2681f1ac5e13ac94831fe8d5?s=128&d=identicon&r=PG&f=1", "display_name": "yuonger741", "link": "https://stackoverflow.com/users/9755419/yuonger741"}, "reply_to_user": {"reputation": 90304, "user_id": 562769, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/e86681e49622d52817b36fd2a4c936b7?s=128&d=identicon&r=PG", "display_name": "Martin Thoma", "link": "https://stackoverflow.com/users/562769/martin-thoma"}, "edited": false, "score": 0, "creation_date": 1526923258, "post_id": 50380844, "comment_id": 87920675, "body": "@MartinThoma thanks for sharing your thesis. Are you suggesting me to utilize CNN in my project? There are resemblance of my case compared to image recognition and I&#39;ve tried CNN but it I failed. Do you have any more comments?"}, {"owner": {"reputation": 90304, "user_id": 562769, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/e86681e49622d52817b36fd2a4c936b7?s=128&d=identicon&r=PG", "display_name": "Martin Thoma", "link": "https://stackoverflow.com/users/562769/martin-thoma"}, "edited": false, "score": 0, "creation_date": 1526933551, "post_id": 50380844, "comment_id": 87925378, "body": "I was just pointing to that page because it lists all possible strategies to improve results. That was what the title of your question suggested is necessary. I didn&#39;t read the body of your question so I can&#39;t advise for/against CNNs."}], "answers": [{"comments": [{"owner": {"reputation": 137, "user_id": 9755419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c728e64f2681f1ac5e13ac94831fe8d5?s=128&d=identicon&r=PG&f=1", "display_name": "yuonger741", "link": "https://stackoverflow.com/users/9755419/yuonger741"}, "edited": false, "score": 0, "creation_date": 1526577397, "post_id": 50386214, "comment_id": 87809962, "body": "Hi @Ary, please see my comments above. I&#39;ll try to normalize my data after I do some reshape of my data. Please comment more if anything comes to your mind after seeing those additional information"}], "tags": [], "owner": {"reputation": 404, "user_id": 7994236, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dOV8y.jpg?s=128&g=1", "display_name": "Ary", "link": "https://stackoverflow.com/users/7994236/ary"}, "is_accepted": false, "score": 1, "last_activity_date": 1526543882, "creation_date": 1526543882, "answer_id": 50386214, "question_id": 50380844, "link": "https://stackoverflow.com/questions/50380844/tensorflow-not-predicting-accurate-enough-results/50386214#50386214", "title": "Tensorflow not predicting accurate enough results", "body": "<p>From what I can see in your code, you are not normalizing your features. Try normalizing them for example to have mean zero and std=1. Since your features are in a completely different range, this normalization might help. </p>\n\n<p>It would also be helpful to see other labels. The ones in the provided picture are all the same.</p>\n"}], "owner": {"reputation": 137, "user_id": 9755419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c728e64f2681f1ac5e13ac94831fe8d5?s=128&d=identicon&r=PG&f=1", "display_name": "yuonger741", "link": "https://stackoverflow.com/users/9755419/yuonger741"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 304, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1526671905, "creation_date": 1526509993, "last_edit_date": 1526671905, "question_id": 50380844, "link": "https://stackoverflow.com/questions/50380844/tensorflow-not-predicting-accurate-enough-results", "title": "Tensorflow not predicting accurate enough results", "body": "<p>I have some fundamental questions about the algorithms I picked in my Tensorflow project. I fed in around 1 million sets of training data and still couldn't get the accurate enough prediction results.</p>\n\n<p>The code I am using is based on an old Tensorflow example (<a href=\"https://github.com/tensorflow/tensorflow/blob/r1.3/tensorflow/examples/tutorials/estimators/abalone.py\" rel=\"nofollow noreferrer\">https://github.com/tensorflow/tensorflow/blob/r1.3/tensorflow/examples/tutorials/estimators/abalone.py</a>). The goal of this example is to predict the age of an abalone based on the training features provided.</p>\n\n<p>My purpose is very similar. The only difference is that I have more labels(6) compared to my features(4). Since the predictions after training are way off, the concern of the feasibility of this project is starting to raise some concerns. </p>\n\n<p>I am pretty new to Machine Learning and Tensorflow so I am not very sure if I have picked the proper methods for this project. I'd like to know if there are some ways to improve my current code to possibly improve the accuracy of the predictions, like more layers, different optimization methods, etc.</p>\n\n<p>Here is the code:</p>\n\n<pre><code>from __future__ import absolute_import\nfrom __future__ import division\nfrom __future__ import print_function\n\nimport argparse\nimport sys\nimport numpy as np\n\nimport pandas as pd\nimport tensorflow as tf\n\nLEARNING_RATE = 0.001\n\n\ndef model_fn(features, labels, mode, params):\n  \"\"\"Model function for Estimator.\"\"\"\n\n  first_hidden_layer = tf.layers.dense(features[\"x\"], 10, activation=tf.nn.relu)\n\n  # Connect the second hidden layer to first hidden layer with relu\n  second_hidden_layer = tf.layers.dense(\n      first_hidden_layer, 10, activation=tf.nn.relu)\n\n  # Connect the output layer to second hidden layer (no activation fn)\n  output_layer = tf.layers.dense(second_hidden_layer, 6)\n\n  # Reshape output layer to 1-dim Tensor to return predictions\n  predictions = tf.reshape(output_layer, [-1,6])\n\n  # Provide an estimator spec for `ModeKeys.PREDICT`.\n  if mode == tf.estimator.ModeKeys.PREDICT:\n    return tf.estimator.EstimatorSpec(\n        mode=mode,\n        predictions={\"ages\": predictions})\n\n  # Calculate loss using mean squared error\n  loss = tf.losses.mean_squared_error(labels, predictions)\n\n  optimizer = tf.train.GradientDescentOptimizer(\n      learning_rate=params[\"learning_rate\"])\n  train_op = optimizer.minimize(\n      loss=loss, global_step=tf.train.get_global_step())\n\n  # Calculate root mean squared error as additional eval metric\n  eval_metric_ops = {\n      \"rmse\": tf.metrics.root_mean_squared_error(\n          tf.cast(labels, tf.float64), predictions)\n  }\n\n  # Provide an estimator spec for `ModeKeys.EVAL` and `ModeKeys.TRAIN` modes.\n  return tf.estimator.EstimatorSpec(\n      mode=mode,\n      loss=loss,\n      train_op=train_op,\n      eval_metric_ops=eval_metric_ops)\n\n\ndef main(unused_argv):\n\n  train_file = \"training_data_mc1000.csv\"\n  test_file = \"test_data_mc1000.csv\"\n\n  train_features_interim = pd.read_csv(train_file, usecols=['vgs', 'vbs', 'vds', 'current'])\n  train_features_numpy = np.asarray(train_features_interim, dtype=np.float64)\n\n  train_labels_interim = pd.read_csv(train_file, usecols=['plo_tox', 'plo_dxl', 'plo_dxw', 'parl1', 'parl2', 'random_fn'])\n  train_labels_numpy = np.asarray(train_labels_interim, dtype=np.float64)\n\n  # Set model params\n  model_params = {\"learning_rate\": LEARNING_RATE}\n\n  # Instantiate Estimator\n  nn = tf.estimator.Estimator(model_fn=model_fn, params=model_params)\n\n  train_input_fn = tf.estimator.inputs.numpy_input_fn(\n      x={\"x\": train_features_numpy},\n      y=train_labels_numpy,\n      num_epochs=None,\n      shuffle=True)\n\n  # Train\n  nn.train(input_fn=train_input_fn, max_steps=1048576)\n\n  test_features_interim = pd.read_csv(test_file, usecols=['vgs', 'vbs', 'vds', 'current'])\n  test_features_numpy = np.asarray(test_features_interim, dtype=np.float64)\n\n  test_labels_interim = pd.read_csv(test_file, usecols=['plo_tox', 'plo_dxl', 'plo_dxw', 'parl1', 'parl2', 'random_fn'])\n  test_labels_numpy = np.asarray(test_labels_interim, dtype=np.float64)\n\n  # Score accuracy\n  test_input_fn = tf.estimator.inputs.numpy_input_fn(\n      x={\"x\": test_features_numpy},\n      y=test_labels_numpy,\n      num_epochs=1,\n      shuffle=False)\n\n  ev = nn.evaluate(input_fn=test_input_fn)\n  print(\"Loss: %s\" % ev[\"loss\"])\n  print(\"Root Mean Squared Error: %s\" % ev[\"rmse\"])\n\n  prediction_file = \"Tensorflow_prediction_data.csv\"\n\n  predict_features_interim = pd.read_csv(prediction_file, usecols=['vgs', 'vbs', 'vds', 'current'])\n  predict_features_numpy = np.asarray(predict_features_interim, dtype=np.float64)\n\n  # Print out predictions\n  predict_input_fn = tf.estimator.inputs.numpy_input_fn(\n      x= {\"x\": predict_features_numpy},\n      num_epochs=1,\n      shuffle=False)\n  predictions = nn.predict(input_fn=predict_input_fn)\n  for i, p in enumerate(predictions):\n    print(\"Prediction %s: %s\" % (i + 1, p[\"ages\"]))\n\n\nif __name__ == '__main__':\n  tf.logging.set_verbosity(tf.logging.INFO)\n  parser = argparse.ArgumentParser()\n  parser.register(\"type\", \"bool\", lambda v: v.lower() == \"true\")\n  parser.add_argument(\n      \"--train_data\", type=str, default=\"\", help=\"Path to the training data.\")\n  parser.add_argument(\n      \"--test_data\", type=str, default=\"\", help=\"Path to the test data.\")\n  parser.add_argument(\n      \"--predict_data\",\n      type=str,\n      default=\"\",\n      help=\"Path to the prediction data.\")\n  FLAGS, unparsed = parser.parse_known_args()\n  tf.app.run(main=main, argv=[sys.argv[0]] + unparsed)\n</code></pre>\n\n<p>And portion of the training and testing data looks like\n<a href=\"https://i.stack.imgur.com/2TsV3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2TsV3.png\" alt=\"enter image description here\"></a></p>\n\n<p>The last four columns are the features and the first six columns are the labels. Again, you can see that I am having more labels than features. My goal is to train a model that when I feed in new sets of features, it can predict accurate enough labels. </p>\n\n<p><strong><em>The following part is added for clarification of my data sets. Thanks for the first ones that commented my question that reminds me to put this up as well.</em></strong></p>\n\n<p><em>The relation between my features and labels are : every 30(vgs)X10(vbs)X10(vds) corresponds to 1 set of labels. Basically it is like a 3-D array with the first three features acting like coordinates and the last feature(current) as the value that is stored within each cells. That's why the labels from the portions I showed are all the same.</em></p>\n\n<p>Another question now is that I am expecting the loss should be getting smaller and smaller as the training progresses, but it is not. I think this should be another reason why the output is not accurate cuz the minimizing loss part isn't working. I don't really know why, though.</p>\n\n<p>Thanks for taking time looking at this and I'd love to have a discussion down below.</p>\n"}, {"tags": ["python", "list", "numbers", "int"], "comments": [{"owner": {"reputation": 189, "user_id": 6366079, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VEuOB.jpg?s=128&g=1", "display_name": "Jon Reinhold", "link": "https://stackoverflow.com/users/6366079/jon-reinhold"}, "edited": false, "score": 0, "creation_date": 1526509821, "post_id": 50380800, "comment_id": 87777786, "body": "What do you mean &quot;except two numbers&quot;? The lists only vary by two?"}, {"owner": {"reputation": 15511, "user_id": 1044117, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/70c26ef03afcef7dd3f3418097b38d80?s=128&d=identicon&r=PG", "display_name": "fferri", "link": "https://stackoverflow.com/users/1044117/fferri"}, "edited": false, "score": 0, "creation_date": 1526509850, "post_id": 50380800, "comment_id": 87777793, "body": "Can you provide an example?"}, {"owner": {"reputation": 41, "user_id": 9754558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b142e121d459ae49b59e282198210db?s=128&d=identicon&r=PG&f=1", "display_name": "teddy", "link": "https://stackoverflow.com/users/9754558/teddy"}, "edited": false, "score": 0, "creation_date": 1526509908, "post_id": 50380800, "comment_id": 87777809, "body": "for example, it will be true if first list will have 1,2,3,4,5 and the second 1,2,3,6,7"}, {"owner": {"reputation": 6370, "user_id": 8710265, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qn3JJ.png?s=128&g=1", "display_name": "Vasilis G.", "link": "https://stackoverflow.com/users/8710265/vasilis-g"}, "edited": false, "score": 0, "creation_date": 1526510039, "post_id": 50380800, "comment_id": 87777852, "body": "You can try this: <code>result = len([i for i in list1 if i not in list2]) == 2</code>"}, {"owner": {"reputation": 444, "user_id": 9796174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9dStb.jpg?s=128&g=1", "display_name": "Helium_1s2", "link": "https://stackoverflow.com/users/9796174/helium-1s2"}, "edited": false, "score": 0, "creation_date": 1526510374, "post_id": 50380800, "comment_id": 87777931, "body": "Can <code>list1</code> and <code>list2</code> contain duplicates?"}, {"owner": {"reputation": 41, "user_id": 9754558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b142e121d459ae49b59e282198210db?s=128&d=identicon&r=PG&f=1", "display_name": "teddy", "link": "https://stackoverflow.com/users/9754558/teddy"}, "reply_to_user": {"reputation": 444, "user_id": 9796174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9dStb.jpg?s=128&g=1", "display_name": "Helium_1s2", "link": "https://stackoverflow.com/users/9796174/helium-1s2"}, "edited": false, "score": 0, "creation_date": 1526510435, "post_id": 50380800, "comment_id": 87777950, "body": "@Helium_1s2 Yes"}, {"owner": {"reputation": 444, "user_id": 9796174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9dStb.jpg?s=128&g=1", "display_name": "Helium_1s2", "link": "https://stackoverflow.com/users/9796174/helium-1s2"}, "edited": false, "score": 0, "creation_date": 1526510671, "post_id": 50380800, "comment_id": 87778020, "body": "@teddy Just to make sure I understand correctly, the result for <code>list1 = [1,1,2,3,3]</code> and <code>list2=[1,2,2,2,3]</code> should be <code>True</code>, right?"}, {"owner": {"reputation": 41, "user_id": 9754558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b142e121d459ae49b59e282198210db?s=128&d=identicon&r=PG&f=1", "display_name": "teddy", "link": "https://stackoverflow.com/users/9754558/teddy"}, "reply_to_user": {"reputation": 444, "user_id": 9796174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9dStb.jpg?s=128&g=1", "display_name": "Helium_1s2", "link": "https://stackoverflow.com/users/9796174/helium-1s2"}, "edited": false, "score": 0, "creation_date": 1526546936, "post_id": 50380800, "comment_id": 87789779, "body": "@Helium_1s2 Right, correct :)"}], "answers": [{"tags": [], "owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "is_accepted": false, "score": 2, "last_activity_date": 1526509996, "creation_date": 1526509996, "answer_id": 50380845, "question_id": 50380800, "link": "https://stackoverflow.com/questions/50380800/pythonfind-if-all-elements-in-lists-are-the-same-except-exactly-2-numbers/50380845#50380845", "title": "Python:Find if all elements in lists are the same except exactly 2 numbers", "body": "<pre><code>def differ_by_two(l1, l2):\n    return sum(1 for i,j in zip(l1, l2) if i!=j) == 2\n</code></pre>\n\n<p>Example</p>\n\n<pre><code>&gt;&gt;&gt; differ_by_two([1,2,3],[1,4,5])\nTrue\n&gt;&gt;&gt; differ_by_two([1,2,3,4,5],[6,7,8,9,10])\nFalse\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 444, "user_id": 9796174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9dStb.jpg?s=128&g=1", "display_name": "Helium_1s2", "link": "https://stackoverflow.com/users/9796174/helium-1s2"}, "edited": false, "score": 0, "creation_date": 1526510516, "post_id": 50380853, "comment_id": 87777971, "body": "You could also use set union, although I&#39;m not sure if it would be any faster.<code>if len(set(list1) | set(list2)) == len(list1) + 2:</code>"}, {"owner": {"reputation": 444, "user_id": 9796174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9dStb.jpg?s=128&g=1", "display_name": "Helium_1s2", "link": "https://stackoverflow.com/users/9796174/helium-1s2"}, "edited": false, "score": 0, "creation_date": 1526510813, "post_id": 50380853, "comment_id": 87778061, "body": "Actually, the solutions using set would not work, since OP clarified that there can be repeated elements. You would have to use something like C++&#39;s multiset, but I don&#39;t think Python has that by default."}, {"owner": {"reputation": 15511, "user_id": 1044117, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/70c26ef03afcef7dd3f3418097b38d80?s=128&d=identicon&r=PG", "display_name": "fferri", "link": "https://stackoverflow.com/users/1044117/fferri"}, "reply_to_user": {"reputation": 444, "user_id": 9796174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9dStb.jpg?s=128&g=1", "display_name": "Helium_1s2", "link": "https://stackoverflow.com/users/9796174/helium-1s2"}, "edited": false, "score": 0, "creation_date": 1526510873, "post_id": 50380853, "comment_id": 87778082, "body": "@Helium_1s2 python&#39;s multiset is <a href=\"https://docs.python.org/3/library/collections.html#collections.Counter\" rel=\"nofollow noreferrer\"><code>collections.Counter</code></a>, however OP hasn&#39;t clarified if order is important or not"}, {"owner": {"reputation": 444, "user_id": 9796174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9dStb.jpg?s=128&g=1", "display_name": "Helium_1s2", "link": "https://stackoverflow.com/users/9796174/helium-1s2"}, "edited": false, "score": 0, "creation_date": 1526510945, "post_id": 50380853, "comment_id": 87778096, "body": "op has clarified that there can be repeated elements, so regular sets won&#39;t work in those cases. I&#39;m saying you need to use a multiset for the case where order is not important."}, {"owner": {"reputation": 15511, "user_id": 1044117, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/70c26ef03afcef7dd3f3418097b38d80?s=128&d=identicon&r=PG", "display_name": "fferri", "link": "https://stackoverflow.com/users/1044117/fferri"}, "reply_to_user": {"reputation": 444, "user_id": 9796174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9dStb.jpg?s=128&g=1", "display_name": "Helium_1s2", "link": "https://stackoverflow.com/users/9796174/helium-1s2"}, "edited": false, "score": 1, "creation_date": 1526511211, "post_id": 50380853, "comment_id": 87778177, "body": "@Helium_1s2 yes, I agree. I just wanted to point out that in either case (set or Counter) the order of elements would be disregarded."}], "tags": [], "owner": {"reputation": 15511, "user_id": 1044117, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/70c26ef03afcef7dd3f3418097b38d80?s=128&d=identicon&r=PG", "display_name": "fferri", "link": "https://stackoverflow.com/users/1044117/fferri"}, "is_accepted": true, "score": 2, "last_activity_date": 1526511002, "last_edit_date": 1526511002, "creation_date": 1526510034, "answer_id": 50380853, "question_id": 50380800, "link": "https://stackoverflow.com/questions/50380800/pythonfind-if-all-elements-in-lists-are-the-same-except-exactly-2-numbers/50380853#50380853", "title": "Python:Find if all elements in lists are the same except exactly 2 numbers", "body": "<p>If order of list elements is important, you can use something like this:</p>\n\n<pre><code>if sum(i != j for i, j in zip(list1, list2)) == 2:\n    # the two lists are equal except two elements\n</code></pre>\n\n<p>If order is not important, and repeated elements do not matter, you could also use set intersection (<code>&amp;</code>) and compare length:</p>\n\n<pre><code>if len(set(list1) &amp; set(list2)) == len(list1) - 2:\n    # the two list are equal except two elements\n</code></pre>\n\n<p>If order is not important, but repeated elements matter, use the same approach, but with <a href=\"https://docs.python.org/3/library/collections.html#collections.Counter\" rel=\"nofollow noreferrer\"><code>collections.Counter</code></a>:</p>\n\n<pre><code>from collections import Counter\nif len(Counter(list1) &amp; Counter(list2)) == len(list1) - 2:\n    # the two list are equal except two elements\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 23, "user_id": 9803019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f843152290d064bd567c4d960aae2eb0?s=128&d=identicon&r=PG&f=1", "display_name": "antonwp", "link": "https://stackoverflow.com/users/9803019/antonwp"}, "is_accepted": false, "score": 0, "last_activity_date": 1526511733, "last_edit_date": 1526511733, "creation_date": 1526510956, "answer_id": 50380998, "question_id": 50380800, "link": "https://stackoverflow.com/questions/50380800/pythonfind-if-all-elements-in-lists-are-the-same-except-exactly-2-numbers/50380998#50380998", "title": "Python:Find if all elements in lists are the same except exactly 2 numbers", "body": "<pre><code>def SameBarTwo(l1, l2):\n    a = len(l2)\n    for i in range(len(l2)):\n        if l2[i] in l1:\n            l1.remove(l2[i])\n            a -= 1\n    return a == 2\n</code></pre>\n\n<p>This will make accommodations for duplicate values, order is not taken into account.</p>\n"}], "owner": {"reputation": 41, "user_id": 9754558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b142e121d459ae49b59e282198210db?s=128&d=identicon&r=PG&f=1", "display_name": "teddy", "link": "https://stackoverflow.com/users/9754558/teddy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 231, "favorite_count": 0, "accepted_answer_id": 50380853, "answer_count": 3, "score": 1, "last_activity_date": 1526511733, "creation_date": 1526509732, "question_id": 50380800, "link": "https://stackoverflow.com/questions/50380800/pythonfind-if-all-elements-in-lists-are-the-same-except-exactly-2-numbers", "title": "Python:Find if all elements in lists are the same except exactly 2 numbers", "body": "<p>I wonder how to check if two lists of numbers are the same except exactly 2 numbers</p>\n\n<pre><code>if list1 == list2: # + except 2 numbers\n</code></pre>\n"}, {"tags": ["python", "python-2.7"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9802950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/add6dd1a8fb8caa97ac99ee14d659a85?s=128&d=identicon&r=PG&f=1", "display_name": "John Trevor", "link": "https://stackoverflow.com/users/9802950/john-trevor"}, "edited": false, "score": 0, "creation_date": 1526509832, "post_id": 50380804, "comment_id": 87777789, "body": "Unfortunatly, I am not very experienced with python. I don&#39;t know what a list or dict is."}, {"owner": {"reputation": 1, "user_id": 9802950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/add6dd1a8fb8caa97ac99ee14d659a85?s=128&d=identicon&r=PG&f=1", "display_name": "John Trevor", "link": "https://stackoverflow.com/users/9802950/john-trevor"}, "edited": false, "score": 0, "creation_date": 1526509846, "post_id": 50380804, "comment_id": 87777791, "body": "Could you please elaborate?"}, {"owner": {"reputation": 769, "user_id": 538016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f55fb36e4c4cc730bde64545c9fe33d6?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/538016/john"}, "reply_to_user": {"reputation": 1, "user_id": 9802950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/add6dd1a8fb8caa97ac99ee14d659a85?s=128&d=identicon&r=PG&f=1", "display_name": "John Trevor", "link": "https://stackoverflow.com/users/9802950/john-trevor"}, "edited": false, "score": 0, "creation_date": 1526509970, "post_id": 50380804, "comment_id": 87777826, "body": "list and dict are just python types. A list is a mutable array and a dict more closely resembles an associative array.  Would be good to check the docs on python types as it can enlighten you more on the language. <a href=\"https://docs.python.org/2/library/types.html\" rel=\"nofollow noreferrer\">docs.python.org/2/library/types.html</a>"}, {"owner": {"reputation": 8720, "user_id": 3846213, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/5PGh1.jpg?s=128&g=1", "display_name": "Eli Korvigo", "link": "https://stackoverflow.com/users/3846213/eli-korvigo"}, "reply_to_user": {"reputation": 1, "user_id": 9802950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/add6dd1a8fb8caa97ac99ee14d659a85?s=128&d=identicon&r=PG&f=1", "display_name": "John Trevor", "link": "https://stackoverflow.com/users/9802950/john-trevor"}, "edited": false, "score": 0, "creation_date": 1526510033, "post_id": 50380804, "comment_id": 87777850, "body": "@JohnTrevor this site is not meant to be a beginner&#39;s guide. You should get comfortable with Basic Python before posting here."}, {"owner": {"reputation": 8720, "user_id": 3846213, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/5PGh1.jpg?s=128&g=1", "display_name": "Eli Korvigo", "link": "https://stackoverflow.com/users/3846213/eli-korvigo"}, "edited": false, "score": 1, "creation_date": 1526510104, "post_id": 50380804, "comment_id": 87777866, "body": "This answer is worth no more than a comment, considering its size and completeness"}, {"owner": {"reputation": 769, "user_id": 538016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f55fb36e4c4cc730bde64545c9fe33d6?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/538016/john"}, "reply_to_user": {"reputation": 8720, "user_id": 3846213, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/5PGh1.jpg?s=128&g=1", "display_name": "Eli Korvigo", "link": "https://stackoverflow.com/users/3846213/eli-korvigo"}, "edited": false, "score": 0, "creation_date": 1526510231, "post_id": 50380804, "comment_id": 87777900, "body": "@EliKorvigo if what I posted offends you, you really need to lighten up"}, {"owner": {"reputation": 8720, "user_id": 3846213, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/5PGh1.jpg?s=128&g=1", "display_name": "Eli Korvigo", "link": "https://stackoverflow.com/users/3846213/eli-korvigo"}, "edited": false, "score": 1, "creation_date": 1526510311, "post_id": 50380804, "comment_id": 87777917, "body": "It does not offend me. I&#39;ve down-voted your answer and provided an explanation for my decision, so that you could improve your answer."}], "tags": [], "owner": {"reputation": 769, "user_id": 538016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f55fb36e4c4cc730bde64545c9fe33d6?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/538016/john"}, "is_accepted": false, "score": 0, "last_activity_date": 1526509740, "creation_date": 1526509740, "answer_id": 50380804, "question_id": 50380776, "link": "https://stackoverflow.com/questions/50380776/editing-a-string-without-python-commands-with-for-i-in-range/50380804#50380804", "title": "Editing a String without Python Commands (with &quot;for i in range&quot;)", "body": "<p>You can iterate through a string letter by letter like you would a list or dict</p>\n\n<pre><code>word='someword'\nfor letter in word:\n    print(letter)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 769, "user_id": 538016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f55fb36e4c4cc730bde64545c9fe33d6?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/538016/john"}, "edited": false, "score": 1, "creation_date": 1526510023, "post_id": 50380841, "comment_id": 87777845, "body": "you should get something for doing his homework.. ha! :-p"}], "tags": [], "owner": {"reputation": 21716, "user_id": 2401769, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/wkEbw.jpg?s=128&g=1", "display_name": "Matias Cicero", "link": "https://stackoverflow.com/users/2401769/matias-cicero"}, "is_accepted": false, "score": 1, "last_activity_date": 1526509988, "creation_date": 1526509988, "answer_id": 50380841, "question_id": 50380776, "link": "https://stackoverflow.com/questions/50380776/editing-a-string-without-python-commands-with-for-i-in-range/50380841#50380841", "title": "Editing a String without Python Commands (with &quot;for i in range&quot;)", "body": "<p>How about:</p>\n\n<pre><code>word = raw_input('Give me a word! ')\nletter = raw_input('Give me a letter! ')\ncleaned = ''\nfor i in range(len(word)):\n    if word[i] != letter:\n        cleaned += word[i]\nif cleaned:\n    print cleaned\nelse:\n    print 'There is no letters to replace in', word\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9802950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/add6dd1a8fb8caa97ac99ee14d659a85?s=128&d=identicon&r=PG&f=1", "display_name": "John Trevor", "link": "https://stackoverflow.com/users/9802950/john-trevor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1526509988, "creation_date": 1526509525, "question_id": 50380776, "link": "https://stackoverflow.com/questions/50380776/editing-a-string-without-python-commands-with-for-i-in-range", "title": "Editing a String without Python Commands (with &quot;for i in range&quot;)", "body": "<p>For an assignment, I need code that asks the user for a word and a letter. Then, it edits the word to not include the specific letter. It needs in include a \"for i in range\" statement. The code before works but doesn't use a for loop and uses a python command.</p>\n\n<pre><code>word1 = raw_input (\"Give me a word! \")\nletter1 = raw_input (\"Give me a letter! \")\nmodify = word1.replace(letter1,\"\")\ncheck = word1.find(letter1)\nif check == -1:\n     print \"There is no letters to replace in\", word1\n     check = 0\nif check &gt;= 1:\n     print modify\n</code></pre>\n"}, {"tags": ["python", "django", "autocomplete", "django-autocomplete-light"], "comments": [{"owner": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "edited": false, "score": 0, "creation_date": 1526514232, "post_id": 50380769, "comment_id": 87778916, "body": "It requires client side (i.e. Javascript) coding and Ajax. If you are not experienced with those, there are several Django packages for implementing autocomplete fields. A Google search might help."}, {"owner": {"reputation": 618, "user_id": 1949257, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/892c9d0277e1c889a78d49cbdb323a83?s=128&d=identicon&r=PG", "display_name": "Abilash Amarasekaran", "link": "https://stackoverflow.com/users/1949257/abilash-amarasekaran"}, "reply_to_user": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "edited": false, "score": 0, "creation_date": 1526558521, "post_id": 50380769, "comment_id": 87797397, "body": "Any idea which package is easy to learn from. Autocomolete-light made no sense for me"}], "answers": [{"comments": [{"owner": {"reputation": 123, "user_id": 7207981, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-h-dttLGqlf4/AAAAAAAAAAI/AAAAAAAAATU/8Zz8ql8vsgU/photo.jpg?sz=128", "display_name": "Travis N. Miller", "link": "https://stackoverflow.com/users/7207981/travis-n-miller"}, "edited": false, "score": 1, "creation_date": 1581633787, "post_id": 50613330, "comment_id": 106512708, "body": "I appreciate your sharing of this solution. I am trying to follow your example and am trying to mesh this with my class based view CreateView. Is there a way to do this? If so do i still need a separate url for the JsonResponce? I woudl be happy to share my code or if you could explain the views a little more I would appreciate it. I am piping in a separate list of expected text (not connected to my model instances) so I am less interested in creating the json object and more interested in how the view looks in general. Keeping in mind i am coming from the generic class based view. Many thanks"}, {"owner": {"reputation": 3997, "user_id": 401226, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c07266a320e66c7c220bd8c01759646d?s=128&d=identicon&r=PG", "display_name": "Tim Richardson", "link": "https://stackoverflow.com/users/401226/tim-richardson"}, "edited": false, "score": 0, "creation_date": 1597062979, "post_id": 50613330, "comment_id": 112002541, "body": "This is amazing. I was completely lost with django auto-complete-light."}, {"owner": {"reputation": 618, "user_id": 1949257, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/892c9d0277e1c889a78d49cbdb323a83?s=128&d=identicon&r=PG", "display_name": "Abilash Amarasekaran", "link": "https://stackoverflow.com/users/1949257/abilash-amarasekaran"}, "reply_to_user": {"reputation": 123, "user_id": 7207981, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-h-dttLGqlf4/AAAAAAAAAAI/AAAAAAAAATU/8Zz8ql8vsgU/photo.jpg?sz=128", "display_name": "Travis N. Miller", "link": "https://stackoverflow.com/users/7207981/travis-n-miller"}, "edited": false, "score": 0, "creation_date": 1597764371, "post_id": 50613330, "comment_id": 112237438, "body": "@TravisN.Miller sorry have not visited here in a while. Do you still need help."}, {"owner": {"reputation": 556, "user_id": 1601899, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/CZNOk.jpg?s=128&g=1", "display_name": "Fred", "link": "https://stackoverflow.com/users/1601899/fred"}, "edited": false, "score": 0, "creation_date": 1613717908, "post_id": 50613330, "comment_id": 117167150, "body": "Great post, way simpler and more robust than django-autocomplete-light, which I could not get to work in a modal..."}], "tags": [], "owner": {"reputation": 618, "user_id": 1949257, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/892c9d0277e1c889a78d49cbdb323a83?s=128&d=identicon&r=PG", "display_name": "Abilash Amarasekaran", "link": "https://stackoverflow.com/users/1949257/abilash-amarasekaran"}, "is_accepted": true, "score": 13, "last_activity_date": 1597062389, "last_edit_date": 1597062389, "creation_date": 1527714206, "answer_id": 50613330, "question_id": 50380769, "link": "https://stackoverflow.com/questions/50380769/how-to-create-a-autocomplete-input-field-in-a-form-using-django/50613330#50613330", "title": "how to create a autocomplete input field in a form using Django", "body": "<p>I finally got the autocomplete search working using the instructions found here</p>\n<p><a href=\"https://github.com/xcash/bootstrap-autocomplete\" rel=\"nofollow noreferrer\">https://github.com/xcash/bootstrap-autocomplete</a> <br>\n<a href=\"https://bootstrap-autocomplete.readthedocs.io/en/latest/\" rel=\"nofollow noreferrer\">https://bootstrap-autocomplete.readthedocs.io/en/latest/</a></p>\n<p>It is very simple to use and does not need to install any app in <code>settings.py</code> and it works for both bootstrap 3 and bootstrap 4</p>\n<p>There are lot of other packages available but this was simple and easy for my need.</p>\n<p>I am going to explain the code I used</p>\n<p><strong>page.html</strong></p>\n<pre><code>{% block script %}\n    &lt;script src=&quot;https://cdn.rawgit.com/xcash/bootstrap-autocomplete/3de7ad37/dist/latest/bootstrap-autocomplete.js&quot;&gt;&lt;/script&gt;\n    &lt;script&gt;\n        $('.basicAutoComplete').autoComplete(\n            {minLength: 1}\n        );\n        $('.dropdown-menu').css({'top': 'auto', 'left': 'auto'})\n\n    &lt;/script&gt;\n{% endblock %}\n.\n.\n.\n.\n.\n{% if field.name == &quot;from_email&quot; %}\n   {% render_field field class=&quot;basicAutoComplete form-control&quot; %}\n{% else %}\n   {% render_field field class=&quot;form-control&quot; %}\n{% endif %}\n</code></pre>\n<p><code>autoComplete</code> is the function called to perform the action and <code>minLength</code> specifies the minimum length of the text before performing the fetch action\nI added an extra CSS to fix the autocomplete dropdown otherwise it was weird.</p>\n<p>The Jinja render kept overwriting the class definition from views so I added an if check for it.</p>\n<p><strong>urls.py</strong></p>\n<pre><code>from . import views\n\nurlpatterns = [\n    .\n    .\n    .\n    path('email_autocomplete/', views.email_autocomplete, name='email_autocomplete')\n]\n</code></pre>\n<p>Added this line to <code>urls.py</code></p>\n<p><strong>forms.py</strong></p>\n<pre><code>class LeaveForm(forms.Form):\n    from_email = forms.EmailField(required=True, widget=forms.TextInput(\n        attrs={\n            'style': 'width: 400px',\n            'class': 'basicAutoComplete',\n            'data-url': &quot;/domain/email_autocomplete/&quot;\n        }))\n</code></pre>\n<p>The above is the code for the input field in <code>forms.py</code>. data-url points to where the JSON result would be generated.</p>\n<p><strong>views.py</strong></p>\n<pre><code>from django.http import HttpResponse, HttpResponseRedirect, JsonResponse\nfrom .models import model\n        \ndef email_autocomplete(request):\n    if request.GET.get('q'):\n        q = request.GET['q']\n        data = model.objects.using('legacy').filter(email__startswith=q).values_list('email',flat=True)\n        json = list(data)\n        return JsonResponse(json, safe=False)\n    else:\n        HttpResponse(&quot;No cookies&quot;)\n            \n</code></pre>\n<p>This was the most confusing part for me. The GET request is easy to understand but it took a while to convert the data from <code>model.objects</code> into a JSON formatted object. The trick was to use</p>\n<pre><code>values_list('columnName',flat=True)\n</code></pre>\n<p>when filtering the data from the database, then converting to a list using <code>list(data)</code> and finally use <code>JsonResponse</code> to convert it to JSON.</p>\n<p>Hope this will help any one who wants a simple autocomplete</p>\n"}], "owner": {"reputation": 618, "user_id": 1949257, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/892c9d0277e1c889a78d49cbdb323a83?s=128&d=identicon&r=PG", "display_name": "Abilash Amarasekaran", "link": "https://stackoverflow.com/users/1949257/abilash-amarasekaran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 14694, "favorite_count": 5, "accepted_answer_id": 50613330, "answer_count": 1, "score": 7, "last_activity_date": 1597062389, "creation_date": 1526509497, "last_edit_date": 1526602256, "question_id": 50380769, "link": "https://stackoverflow.com/questions/50380769/how-to-create-a-autocomplete-input-field-in-a-form-using-django", "title": "how to create a autocomplete input field in a form using Django", "body": "<p>I am pretty new to django and its ways. I am trying to create an autocomplete field for a form. My code is as below</p>\n\n<p><strong>forms.py</strong></p>\n\n<pre><code>from django import forms\n\nclass LeaveForm(forms.Form):\n    leave_list = (\n        ('Casual Leave', 'Casual Leave'),\n        ('Sick Leave', 'Sick Leave')\n    )\n    from_email = forms.EmailField(required=True, widget=forms.TextInput(attrs={'style': 'width: 400px'}))\n    start_date = end_date = forms.CharField(widget=forms.TextInput(attrs={'type': 'date', 'style': 'width: 175px'}))\n    leave_type = forms.ChoiceField(choices=leave_list, widget=forms.Select(attrs={'style': 'width: 400px'}))\n    comments = forms.CharField(required=True, widget=forms.Textarea(attrs={'style': 'width: 400px; height: 247px'}))\n\n    def clean_from_email(self):\n        data = self.cleaned_data['from_email']\n        if \"@testdomain.com\" not in data:\n            raise forms.ValidationError(\"Must be @testdomain.com\")\n        return data\n</code></pre>\n\n<p>What I want to achieve is that when an user types words into the <code>\"From Email\"</code> field the list of emails I have stored in an external DB should appear in the autocomplete list option.</p>\n\n<p><strong>models.py</strong></p>\n\n<pre><code>from django.db import models\n\n\nclass ListOfUsers(models.Model):\n    emp_number = models.CharField(db_column='Emp_Number', primary_key=True, max_length=50, unique=True)  # Field name made lowercase.\n    name = models.CharField(db_column='Name', max_length=40)  # Field name made lowercase.\n    supervisor = models.CharField(db_column='Supervisor', max_length=40)  # Field name made lowercase.\n    email = models.CharField(db_column='Email', max_length=50, blank=False, null=False, unique=True)  # Field name made lowercase.\n\n\n    class Meta:\n        managed = False\n        db_table = 'List of users'\n</code></pre>\n\n<p>Any idea how this can be done ?</p>\n\n<p><strong>Update :</strong></p>\n\n<p>I started messing around with django-autocomplete-light and now able to get a reply from the autocomplete url. It looks like this</p>\n\n<pre><code>{\"results\": [{\"id\": \"user1@mydomain.com\", \"text\": \"user1@mydomain.com\"}, {\"id\": \"user2@mydomain.com\", \"text\": \"user2@mydomain.com\"}, {\"id\": \"user3@mydomain.com\", \"text\": \"user3@mydomain.com\"}]}\n</code></pre>\n\n<p><strong>views.py</strong></p>\n\n<pre><code>class EmailAutocomplete(autocomplete.Select2ListView):\n    def get_list(self):\n        qs = ListOfUsers.objects.using('legacy')\n\n        if self.q:\n            qs = qs.filter(email__icontains=self.q).values_list('email', flat=True)\n\n        return qs\n</code></pre>\n\n<p>I still do not know how to get this data to appear in the field <code>\"from_email\"</code></p>\n"}, {"tags": ["python", "numpy", "cython"], "comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 3, "creation_date": 1526510799, "post_id": 50380692, "comment_id": 87778056, "body": "There&#39;s not much to optimize; <code>numpy</code> is already doing all the hard work, and it is already written in C. You&#39;re just adding a layer of overhead."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1526512608, "post_id": 50380692, "comment_id": 87778547, "body": "In addition to what chepner said, since you are already in the <code>numpy</code> world, consider using <code>numba</code>"}, {"owner": {"reputation": 5208, "user_id": 4045774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c23c0c730b6a9cb71d1ce17838f2beb7?s=128&d=identicon&r=PG&f=1", "display_name": "max9111", "link": "https://stackoverflow.com/users/4045774/max9111"}, "edited": false, "score": 1, "creation_date": 1526543237, "post_id": 50380692, "comment_id": 87787607, "body": "Are you measuring the random number generation with the function? I get 46.8&#181;s for the Python version and 3.11&#181;s for a simple Numba version(@numba.njit(fastmath=True). Are your arrays everytime that small (only 100 values)? If not parallelization would also be beneficial."}], "answers": [{"comments": [{"owner": {"reputation": 1289, "user_id": 1798097, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hb4ho.png?s=128&g=1", "display_name": "Anthony Lethuillier", "link": "https://stackoverflow.com/users/1798097/anthony-lethuillier"}, "edited": false, "score": 1, "creation_date": 1526574561, "post_id": 50383529, "comment_id": 87808502, "body": "Thank you so much for the very detailed answer, In this specific case Numba does seem to be the best option but your code will certainly be useful for other parts of the code. I learned a lot :)"}, {"owner": {"reputation": 2067, "user_id": 2588654, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c1227d97bdaa264abb9dc64cd71830a9?s=128&d=identicon&r=PG", "display_name": "CodeSurgeon", "link": "https://stackoverflow.com/users/2588654/codesurgeon"}, "reply_to_user": {"reputation": 1289, "user_id": 1798097, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hb4ho.png?s=128&g=1", "display_name": "Anthony Lethuillier", "link": "https://stackoverflow.com/users/1798097/anthony-lethuillier"}, "edited": false, "score": 0, "creation_date": 1526575530, "post_id": 50383529, "comment_id": 87809060, "body": "@AnthonyLethuillier Definitely agree with that, Numba is the cleanest, best bet for your problem. I think I will still try to add some more info to this answer so it is more complete for future readers anyways"}, {"owner": {"reputation": 5208, "user_id": 4045774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c23c0c730b6a9cb71d1ce17838f2beb7?s=128&d=identicon&r=PG&f=1", "display_name": "max9111", "link": "https://stackoverflow.com/users/4045774/max9111"}, "edited": false, "score": 1, "creation_date": 1526631021, "post_id": 50383529, "comment_id": 87828651, "body": "You are missing a quite significant point. I didn&#39;t kow it either until I read this excellent answer from @ead. You have to explicitly declare the input array as contignious to enable SIMD-vectorization. Numba recognizes this automaticlly at compile time without explicit type information, but doesn&#39;t if you declare the types explicitly. Take a look at <a href=\"https://stackoverflow.com/a/49059414/4045774\">stackoverflow.com/a/49059414/4045774</a> This can also be the reason why march-native doesn&#39;t show the expected speedup."}, {"owner": {"reputation": 5208, "user_id": 4045774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c23c0c730b6a9cb71d1ce17838f2beb7?s=128&d=identicon&r=PG&f=1", "display_name": "max9111", "link": "https://stackoverflow.com/users/4045774/max9111"}, "edited": false, "score": 1, "creation_date": 1526636048, "post_id": 50383529, "comment_id": 87831733, "body": "Testing with size = 1000000 gives me (9.3 ms for your version, 5.1 ms with declaring contigous arrays, 4.4ms with contigous arrays and march=native)"}, {"owner": {"reputation": 2067, "user_id": 2588654, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c1227d97bdaa264abb9dc64cd71830a9?s=128&d=identicon&r=PG", "display_name": "CodeSurgeon", "link": "https://stackoverflow.com/users/2588654/codesurgeon"}, "reply_to_user": {"reputation": 5208, "user_id": 4045774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c23c0c730b6a9cb71d1ce17838f2beb7?s=128&d=identicon&r=PG&f=1", "display_name": "max9111", "link": "https://stackoverflow.com/users/4045774/max9111"}, "edited": false, "score": 0, "creation_date": 1526644023, "post_id": 50383529, "comment_id": 87836561, "body": "@max9111 Thanks for this info, definitely did not know that! I guess I better add a second update :)"}], "tags": [], "owner": {"reputation": 2067, "user_id": 2588654, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c1227d97bdaa264abb9dc64cd71830a9?s=128&d=identicon&r=PG", "display_name": "CodeSurgeon", "link": "https://stackoverflow.com/users/2588654/codesurgeon"}, "is_accepted": false, "score": 3, "last_activity_date": 1526671972, "last_edit_date": 1526671972, "creation_date": 1526532623, "answer_id": 50383529, "question_id": 50380692, "link": "https://stackoverflow.com/questions/50380692/cython-function-taking-more-time-than-pure-python/50383529#50383529", "title": "Cython function taking more time than pure python", "body": "<p>I generally agree with the advice presented by @chepner and @juanpa.arrivillaga in the comments. Numpy is a performant library, and it is true that the underlying calculations it performs are written in C. Furthermore, the syntax is clean and it is trivial to apply scalar operations across all elements of a numpy array.</p>\n\n<p>However, there actually is a way to significantly improve the performance of your code with cython thanks to the way your particular algorithm is structured if we use the following assumptions (and can tolerate ugly code):</p>\n\n<ul>\n<li>Your arrays are all one-dimensional, making iterating over each item in an array extremely trivial. We do not need to replace more difficult numpy functions like <code>numpy.dot</code> for example as all operations in your code only combine scalars with matrices.</li>\n<li>While using a <code>for</code> loop in python would be unthinkable, iterating over every index is very feasible in cython. Additionally, each item in the final output depends only on the inputs that correspond to that item's index (i.e. the 0th item uses <code>u[0]</code>, <code>PorosityProfile[0]</code>, etc).</li>\n<li>You are not interested in any of the intermediate arrays, only in the final result returned in your <code>compute_python</code> function. Therefore, why waste time allocating memory for all of those intermediate numpy arrays?</li>\n<li>Using <code>x**y</code> syntax is surprisingly slow. I use a <code>gcc</code> compiler option, <code>--ffast-math</code> to improve this significantly. I also use several cython compiler directives to avoid python checks and overhead.</li>\n<li>Creating numpy arrays itself can have python overhead, so I use a combination of typed memoryviews (the preferred, newer syntax anyways) and malloc-ed pointers to create the output array without interacting with python very much (only two lines, getting the output size and the return statement show significant python interaction as seen in the cython annotation files).</li>\n</ul>\n\n<p>Taking all of these considerations into account, here is the modified code. It performs nearly an order of magnitude faster than the naive python version on my laptop.</p>\n\n<p><strong>sublimation.pyx</strong></p>\n\n<pre><code>from libc.stdlib cimport malloc, free\n\ndef compute_cython(float[:] u, float[:] porosity_profile, \n        float[:] density_ice_profile, float[:] density_dust_profile, \n        float[:] density_profile):    \n    cdef:\n        float dust_j, dust_f, dust_g, dust_h, dust_i\n        float ice_i, ice_c, ice_d, ice_e, ice_f, ice_g, ice_h\n        int size, i\n        float dt, result_dust, x, dust\n        float result_ice_numer, result_ice_denom, result_ice, ice\n        float* out\n\n    dust_j, dust_f, dust_g, dust_h, dust_i = \\\n        250.0, 633.0, 2.513, -2.2e-3, -2.8e-6\n    ice_i, ice_c, ice_d, ice_e, ice_f, ice_g, ice_h = \\\n        273.16, 1.843e5, 1.6357e8, 3.5519e9, 1.6670e2, 6.4650e4, 1.6935e6\n    size = len(u)\n    out = &lt;float *&gt;malloc(size * sizeof(float))\n\n    for i in range(size):\n        dt = u[i] - dust_j\n        result_dust = dust_f + (dust_g*dt) + (dust_h*dt**2) + (dust_i*dt**3)\n        x = u[i] / ice_i\n        result_ice_numer = x**3*(ice_c + ice_d*x**2 + ice_e*x**6)\n        result_ice_denom = 1 + ice_f*x**2 + ice_g*x**4 + ice_h*x**8\n        result_ice = result_ice_numer / result_ice_denom\n        ice = density_ice_profile[i]*result_ice\n        dust = density_dust_profile[i]*result_dust\n        out[i] = (dust + ice)/density_profile[i]\n    return &lt;float[:size]&gt;out\n</code></pre>\n\n<p><strong>setup.py</strong></p>\n\n<pre><code>from distutils.core import setup\nfrom Cython.Build import cythonize\nfrom distutils.core import Extension\n\ndef create_extension(ext_name):\n    global language, libs, args, link_args\n    path_parts = ext_name.split(\".\")\n    path = \"./{0}.pyx\".format(\"/\".join(path_parts))\n    ext = Extension(ext_name, sources=[path], libraries=libs, language=language,\n            extra_compile_args=args, extra_link_args=link_args)\n    return ext\n\nif __name__ == \"__main__\":\n    libs = []#no external c libraries in this case\n    language = \"c\"#chooses c rather than c++ since no c++ features were used\n    args = [\"-w\", \"-O3\", \"-ffast-math\"]#assumes gcc is the compiler\n    link_args = []#none here, could use -fopenmp for parallel code\n    annotate = True#autogenerates .html files per .pyx\n    directives = {#saves typing @cython decorators and applies them globally\n        \"boundscheck\": False,\n        \"wraparound\": False,\n        \"initializedcheck\": False,\n        \"cdivision\": True,\n        \"nonecheck\": False,\n    }\n\n    ext_names = [\n        \"sublimation\",\n    ]\n\n    extensions = [create_extension(ext_name) for ext_name in ext_names]\n    setup(ext_modules = cythonize(\n            extensions, \n            annotate=annotate, \n            compiler_directives=directives,\n        )\n    )\n</code></pre>\n\n<p><strong>main.py</strong></p>\n\n<pre><code>import numpy as np\nimport sublimation as sub\n\ndef compute_python(u, PorosityProfile, DensityIceProfile, DensityDustProfile, DensityProfile):\n    DustJ, DustF, DustG, DustH, DustI = 250.0, 633.0, 2.513, -2.2e-3, -2.8e-6   \n    IceI, IceC, IceD, IceE, IceF, IceG, IceH =  273.16, 1.843e5, 1.6357e8, 3.5519e9, 1.6670e2,  6.4650e4, 1.6935e6\n    delta = u-DustJ\n    result_dust = DustF+DustG*delta+DustH*delta**2+DustI*(delta**3)\n    x = u/IceI\n    result_ice = (x**3)*(IceC+IceD*(x**2)+IceE*(x**6))/(1+IceF*(x**2)+IceG*(x**4)+IceH*(x**8))\n    return (DensityIceProfile*result_ice+DensityDustProfile*result_dust)/DensityProfile\n\nsize = 100\nu = np.random.rand(size).astype(np.float32)\nporosity = np.random.rand(size).astype(np.float32)\nice = np.random.rand(size).astype(np.float32)\ndust = np.random.rand(size).astype(np.float32)\ndensity = np.random.rand(size).astype(np.float32)\n\n\"\"\"\nRun these from the terminal to out the performance!\npython3 -m timeit -s \"from main import compute_python, u, porosity, ice, dust, density\" \"compute_python(u, porosity, ice, dust, density)\"\npython3 -m timeit -s \"from main import sub, u, porosity, ice, dust, density\" \"sub.compute_cython(u, porosity, ice, dust, density)\"\npython3 -m timeit -s \"import numpy as np; from main import sub, u, porosity, ice, dust, density\" \"np.asarray(sub.compute_cython(u, porosity, ice, dust, density))\"\n\nThe first command tests the python version. (10000 loops, best of 3: 45.5 usec per loop)\nThe second command tests the cython version, but returns just a memoryview object. (100000 loops, best of 3: 4.63 usec per loop)\nThe third command tests the cython version, but converts the result to a ndarray (slower). (100000 loops, best of 3: 6.3 usec per loop)\n\"\"\"\n</code></pre>\n\n<p>Let me know if there are any unclear parts in my explanation for how this answer works, and I hope it helps!</p>\n\n<hr>\n\n<p><strong>Update 1:</strong></p>\n\n<p>Unfortunately, I was unable to get MSYS2 and numba (which depends on LLVM) to play nice with each other, so I could not do any direct comparisons. However, following @max9111's advice, I added <code>-march=native</code> to the <code>args</code> list in my <code>setup.py</code> file; however, the timings did not significantly differ from before. </p>\n\n<p>From <a href=\"https://stackoverflow.com/a/49804276\">this great answer</a>, it appears that there is some overhead in the automatic conversion between numpy arrays and typed memoryviews that goes on both in the initial function call (and in the return statement as well if you convert the result back). Reverting back to using a function signature like this:</p>\n\n<pre><code>ctypedef np.float32_t DTYPE_t\ndef compute_cython_np(\n        np.ndarray[DTYPE_t, ndim=1] u, \n        np.ndarray[DTYPE_t, ndim=1] porosity_profile, \n        np.ndarray[DTYPE_t, ndim=1] density_ice_profile, \n        np.ndarray[DTYPE_t, ndim=1] density_dust_profile, \n        np.ndarray[DTYPE_t, ndim=1] density_profile):\n</code></pre>\n\n<p>saves me about 1us per call, cutting it down to about 3.6us instead of 4.6us, which is somewhat significant, especially if the function is to be called many times. <strong>Of course, if you plan to call the function many times, it might be more efficient instead to just pass in two-dimensional numpy arrays instead, saving significant python function call overhead and amortizing the cost of <code>numpy array -&gt; typed memoryview</code> conversion.</strong> Furthermore, it might be interesting to use numpy structured arrays, which can be transformed in cython into a typed memoryview of structs, as this might put all of the data closer together in the cache and speed memory access times.</p>\n\n<p>As a final note as promised in the comments earlier, here is a version using <code>prange</code> that takes advantage of parallel processing. Note that this can only be used with typed memoryviews as python's GIL must be released within a prange loop (and compiled using the <code>-fopenmp</code> flag for <code>args</code> and <code>link_args</code>:</p>\n\n<pre><code>from cython.parallel import prange\nfrom libc.stdlib cimport malloc, free\ndef compute_cython_p(float[:] u, float[:] porosity_profile, \n        float[:] density_ice_profile, float[:] density_dust_profile, \n        float[:] density_profile):    \n    cdef:\n        float dust_j, dust_f, dust_g, dust_h, dust_i\n        float ice_i, ice_c, ice_d, ice_e, ice_f, ice_g, ice_h\n        int size, i\n        float dt, result_dust, x, dust\n        float result_ice_numer, result_ice_denom, result_ice, ice\n        float* out\n\n    dust_j, dust_f, dust_g, dust_h, dust_i = \\\n        250.0, 633.0, 2.513, -2.2e-3, -2.8e-6\n    ice_i, ice_c, ice_d, ice_e, ice_f, ice_g, ice_h = \\\n        273.16, 1.843e5, 1.6357e8, 3.5519e9, 1.6670e2, 6.4650e4, 1.6935e6\n    size = len(u)\n    out = &lt;float *&gt;malloc(size * sizeof(float))\n\n    for i in prange(size, nogil=True):\n        dt = u[i] - dust_j\n        result_dust = dust_f + (dust_g*dt) + (dust_h*dt**2) + (dust_i*dt**3)\n        x = u[i] / ice_i\n        result_ice_numer = x**3*(ice_c + ice_d*x**2 + ice_e*x**6)\n        result_ice_denom = 1 + ice_f*x**2 + ice_g*x**4 + ice_h*x**8\n        result_ice = result_ice_numer / result_ice_denom\n        ice = density_ice_profile[i]*result_ice\n        dust = density_dust_profile[i]*result_dust\n        out[i] = (dust + ice)/density_profile[i]\n    return &lt;float[:size]&gt;out\n</code></pre>\n\n<hr>\n\n<p><strong>Update 2:</strong></p>\n\n<p>Following the very useful additional advice from @max9111 in the comments, I switched over all of the <code>float[:]</code> declarations in my code to <code>float[::1]</code>. The significance of this is that it allows the data to be stored contiguously  and cython would not need to worry about the presence of a stride between elements. This allows SIMD Vectorization, which dramatically further optimizes the code. Below are the updated timings, which are generated using the following commands:</p>\n\n<pre><code>python3 -m timeit -s \"from main import compute_python, u, porosity, ice, dust, density\" \"compute_python(u, porosity, ice, dust, density)\"\npython3 -m timeit -s \"import numpy as np; from main import sub, u, porosity, ice, dust, density\" \"np.asarray(sub.compute_cython(u, porosity, ice, dust, density))\"\npython3 -m timeit -s \"import numpy as np; from main import sub, u, porosity, ice, dust, density\" \"np.asarray(sub.compute_cython_p(u, porosity, ice, dust, density))\"\n\nsize = 100\npython: 44.7 usec per loop\ncython serial: 4.44 usec per loop\ncython parallel: 111 usec per loop\ncython serial contiguous: 3.83 usec per loop\ncython parallel contiguous: 116 usec per loop\n\nsize = 1000\npython: 167 usec per loop\ncython serial: 16.4 usec per loop\ncython parallel: 115 usec per loop\ncython serial contiguous: 8.24 usec per loop\ncython parallel contiguous: 111 usec per loop\n\nsize = 10000\npython: 1.32 msec per loop\ncython serial: 128 usec per loop\ncython parallel: 142 usec per loop\ncython serial contiguous: 55.5 usec per loop\ncython parallel contiguous: 150 usec per loop\n\nsize = 100000\npython: 19.5 msec per loop\ncython serial: 1.21 msec per loop\ncython parallel: 691 usec per loop\ncython serial contiguous: 473 usec per loop\ncython parallel contiguous: 274 usec per loop\n\nsize = 1000000\npython: 211 msec per loop\ncython serial: 12.3 msec per loop\ncython parallel: 5.74 msec per loop\ncython serial contiguous: 4.82 msec per loop\ncython parallel contiguous: 1.99 msec per loop\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2067, "user_id": 2588654, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c1227d97bdaa264abb9dc64cd71830a9?s=128&d=identicon&r=PG", "display_name": "CodeSurgeon", "link": "https://stackoverflow.com/users/2588654/codesurgeon"}, "edited": false, "score": 0, "creation_date": 1526560031, "post_id": 50387858, "comment_id": 87798389, "body": "This looks exciting! I will try compiling my code with the <code>march=native</code> option when I get home as well as include a parallel version using cython&#39;s <code>prange</code>. Will also try to get numba set up on my weird build environment (running all of my code in msys2 on windows to use the convenient prebuilt packages provided by mingw)."}, {"owner": {"reputation": 1289, "user_id": 1798097, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hb4ho.png?s=128&g=1", "display_name": "Anthony Lethuillier", "link": "https://stackoverflow.com/users/1798097/anthony-lethuillier"}, "edited": false, "score": 0, "creation_date": 1526574591, "post_id": 50387858, "comment_id": 87808518, "body": "Thanks for the answer that was very helpful, I am generally using arrays that are size 100 hundred so the improved numba seems to be the best in this case but i&#39;ll keep in mind the parallel version for future reference :)"}], "tags": [], "owner": {"reputation": 5208, "user_id": 4045774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c23c0c730b6a9cb71d1ce17838f2beb7?s=128&d=identicon&r=PG&f=1", "display_name": "max9111", "link": "https://stackoverflow.com/users/4045774/max9111"}, "is_accepted": true, "score": 3, "last_activity_date": 1526642934, "last_edit_date": 1526642934, "creation_date": 1526549014, "answer_id": 50387858, "question_id": 50380692, "link": "https://stackoverflow.com/questions/50380692/cython-function-taking-more-time-than-pure-python/50387858#50387858", "title": "Cython function taking more time than pure python", "body": "<h2>A solution using Numba</h2>\n\n<p>CodeSurgeon already gave an excellent answer using Cython. In this answer I wan't to show an alternative way using Numba. </p>\n\n<p>I have created three versions. In <code>naive_numba</code> I only have added an function decorator. In <code>improved_Numba</code> I have manually combined the loops (every vectorized command is actually a loop). In <code>improved_Numba_p</code> I have parallelized the function. Please note that there is obviously a Bug not allowing to define constant values when using the pararallel accelerator. It has also be noted that the parallelized version is only beneficial for larger input arrays. But you can also add a small wrapper which calls the single threaded or the parallelized version according to the input array size.</p>\n\n<p><strong>Code dtype=float64</strong></p>\n\n<pre><code>import numba as nb\nimport numpy as np\nimport time\n\n\n\n@nb.njit(fastmath=True)\ndef naive_Numba(u, PorosityProfile, DensityIceProfile, DensityDustProfile, DensityProfile):\n  DustJ, DustF, DustG, DustH, DustI = 250.0, 633.0, 2.513, -2.2e-3, -2.8e-6   \n  IceI, IceC, IceD, IceE, IceF, IceG, IceH =  273.16, 1.843e5, 1.6357e8, 3.5519e9, 1.6670e2,  6.4650e4, 1.6935e6\n\n  delta = u-DustJ\n  result_dust = DustF+DustG*delta+DustH*delta**2+DustI*(delta**3);\n\n  x= u/IceI;\n  result_ice = (x**3)*(IceC+IceD*(x**2)+IceE*(x**6))/(1+IceF*(x**2)+IceG*(x**4)+IceH*(x**8))\n\n  return (DensityIceProfile*result_ice+DensityDustProfile*result_dust)/DensityProfile\n\n#error_model='numpy' sets divison by 0 to NaN instead of throwing a exception, this allows vectorization\n@nb.njit(fastmath=True,error_model='numpy')\ndef improved_Numba(u, PorosityProfile, DensityIceProfile, DensityDustProfile, DensityProfile):\n  DustJ, DustF, DustG, DustH, DustI = 250.0, 633.0, 2.513, -2.2e-3, -2.8e-6   \n  IceI, IceC, IceD, IceE, IceF, IceG, IceH =  273.16, 1.843e5, 1.6357e8, 3.5519e9, 1.6670e2,  6.4650e4, 1.6935e6\n  res=np.empty(u.shape[0],dtype=u.dtype)\n\n  for i in range(u.shape[0]):\n    delta = u[i]-DustJ\n    result_dust = DustF+DustG*delta+DustH*delta**2+DustI*(delta**3);\n\n    x= u[i]/IceI\n    result_ice = (x**3)*(IceC+IceD*(x**2)+IceE*(x**6))/(1+IceF*(x**2)+IceG*(x**4)+IceH*(x**8))\n\n    res[i]=(DensityIceProfile[i]*result_ice+DensityDustProfile[i]*result_dust)/DensityProfile[i]\n\n  return res\n\n#there is obviously a bug in Numba (declaring const values in the function)\n@nb.njit(fastmath=True,parallel=True,error_model='numpy')\ndef improved_Numba_p(u, PorosityProfile, DensityIceProfile, DensityDustProfile, DensityProfile,DustJ, DustF, DustG, DustH, DustI,IceI, IceC, IceD, IceE, IceF, IceG, IceH):\n  res=np.empty((u.shape[0]),dtype=u.dtype)\n\n  for i in nb.prange(u.shape[0]):\n    delta = u[i]-DustJ\n    result_dust = DustF+DustG*delta+DustH*delta**2+DustI*(delta**3);\n\n    x= u[i]/IceI\n    result_ice = (x**3)*(IceC+IceD*(x**2)+IceE*(x**6))/(1+IceF*(x**2)+IceG*(x**4)+IceH*(x**8))\n\n    res[i]=(DensityIceProfile[i]*result_ice+DensityDustProfile[i]*result_dust)/DensityProfile[i]\n\n  return res\n\nu=np.array(np.random.rand(1000000),dtype=np.float32)\nPorosityProfile=np.array(np.random.rand(1000000),dtype=np.float32)\nDensityIceProfile=np.array(np.random.rand(1000000),dtype=np.float32)\nDensityDustProfile=np.array(np.random.rand(1000000),dtype=np.float32)\nDensityProfile=np.array(np.random.rand(1000000),dtype=np.float32)\nDustJ, DustF, DustG, DustH, DustI = 250.0, 633.0, 2.513, -2.2e-3, -2.8e-6\nIceI, IceC, IceD, IceE, IceF, IceG, IceH =  273.16, 1.843e5, 1.6357e8, 3.5519e9, 1.6670e2,  6.4650e4, 1.6935e6\n\n#don't measure compilation overhead on first call\nres=improved_Numba_p(u, PorosityProfile, DensityIceProfile, DensityDustProfile, DensityProfile,DustJ, DustF, DustG, DustH, DustI,IceI, IceC, IceD, IceE, IceF, IceG, IceH) \nfor i in range(1000):\n  res=improved_Numba_p(u, PorosityProfile, DensityIceProfile, DensityDustProfile, DensityProfile,DustJ, DustF, DustG, DustH, DustI,IceI, IceC, IceD, IceE, IceF, IceG, IceH)\n\nprint(time.time()-t1)\nprint(time.time()-t1)\n</code></pre>\n\n<p><strong>Performance</strong></p>\n\n<pre><code>Arraysize np.random.rand(100)\nNumpy             46.8\u00b5s\nnaive Numba       3.1\u00b5s\nimproved Numba:   1.62\u00b5s\nimproved_Numba_p: 17.45\u00b5s\n\n\n#Arraysize np.random.rand(1000000)\nNumpy             255.8ms\nnaive Numba       18.6ms\nimproved Numba:   6.13ms\nimproved_Numba_p: 3.54ms\n</code></pre>\n\n<p><strong>Code dtype=np.float32</strong></p>\n\n<p>If np.float32 is sufficient you have to explicitly declare all constant values in the function to float32. Otherwise Numba will use float64.</p>\n\n<pre><code>@nb.njit(fastmath=True,error_model='numpy')\ndef improved_Numba(u, PorosityProfile, DensityIceProfile, DensityDustProfile, DensityProfile):\n  DustJ, DustF, DustG, DustH, DustI = nb.float32(250.0), nb.float32(633.0), nb.float32(2.513), nb.float32(-2.2e-3), nb.float32(-2.8e-6)\n  IceI, IceC, IceD, IceE, IceF, IceG, IceH =  nb.float32(273.16), nb.float32(1.843e5), nb.float32(1.6357e8), nb.float32(3.5519e9), nb.float32(1.6670e2),  nb.float32(6.4650e4), nb.float32(1.6935e6)\n  res=np.empty(u.shape[0],dtype=u.dtype)\n\n  for i in range(u.shape[0]):\n    delta = u[i]-DustJ\n    result_dust = DustF+DustG*delta+DustH*delta**2+DustI*(delta**3)\n\n    x= u[i]/IceI\n    result_ice = (x**3)*(IceC+IceD*(x**2)+IceE*(x**6))/(nb.float32(1)+IceF*(x**2)+IceG*(x**4)+IceH*(x**8))\n\n    res[i]=(DensityIceProfile[i]*result_ice+DensityDustProfile[i]*result_dust)/DensityProfile[i]\n\n  return res\n\n@nb.njit(fastmath=True,parallel=True,error_model='numpy')\ndef improved_Numba_p(u, PorosityProfile, DensityIceProfile, DensityDustProfile, DensityProfile):\n  res=np.empty((u.shape[0]),dtype=u.dtype)\n  DustJ, DustF, DustG, DustH, DustI = nb.float32(250.0), nb.float32(633.0), nb.float32(2.513), nb.float32(-2.2e-3), nb.float32(-2.8e-6)\n  IceI, IceC, IceD, IceE, IceF, IceG, IceH =  nb.float32(273.16), nb.float32(1.843e5), nb.float32(1.6357e8), nb.float32(3.5519e9), nb.float32(1.6670e2),  nb.float32(6.4650e4), nb.float32(1.6935e6)\n\n  for i in nb.prange(u.shape[0]):\n    delta = u[i]-DustJ\n    result_dust = DustF+DustG*delta+DustH*delta**2+DustI*(delta**3)\n\n    x= u[i]/IceI\n    result_ice = (x**3)*(IceC+IceD*(x**2)+IceE*(x**6))/(nb.float32(1)+IceF*(x**2)+IceG*(x**4)+IceH*(x**8))\n\n    res[i]=(DensityIceProfile[i]*result_ice+DensityDustProfile[i]*result_dust)/DensityProfile[i]\n\n  return res\n</code></pre>\n\n<p><strong>Performance</strong></p>\n\n<pre><code>Arraysize np.random.rand(100).astype(np.float32)\nNumpy             29.3\u00b5s\nimproved Numba:   1.33\u00b5s\nimproved_Numba_p: 18\u00b5s\n\n\nArraysize np.random.rand(1000000).astype(np.float32)\nNumpy             117ms\nimproved Numba:   2.46ms\nimproved_Numba_p: 1.56ms\n</code></pre>\n\n<p>The comparison to the Cython version provided by @CodeSurgeon isn't really fair because he didn't compile the function with enabled AVX2 and FMA3 instructions. Numba compiles by default with -march=native which enables AVX2 and FMA3 instructions on my Core i7-4xxx.</p>\n\n<p>But this makes sence if you wan't to distribute a compiled Cython version of your code, because it won't run by default on pre Haswell processors (or all Pentium and Celerons) if that optimizations are enabled. Compiling multiple code paths should be possible, but is compiler dependend and more work.</p>\n"}], "owner": {"reputation": 1289, "user_id": 1798097, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hb4ho.png?s=128&g=1", "display_name": "Anthony Lethuillier", "link": "https://stackoverflow.com/users/1798097/anthony-lethuillier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 418, "favorite_count": 1, "accepted_answer_id": 50387858, "answer_count": 2, "score": 3, "last_activity_date": 1526671972, "creation_date": 1526509056, "question_id": 50380692, "link": "https://stackoverflow.com/questions/50380692/cython-function-taking-more-time-than-pure-python", "title": "Cython function taking more time than pure python", "body": "<p>I am trying to accelerate my code and this part of it is giving me problems,</p>\n\n<p>I tried to use Cython and then followed the advise given <a href=\"http://cython.readthedocs.io/en/latest/src/tutorial/numpy.html\" rel=\"nofollow noreferrer\">here</a> but my pure python function performs better than both the cython and cython_optimized ones</p>\n\n<p>The cython code is the following:</p>\n\n<pre><code>import numpy as np\ncimport numpy as np\n\nDTYPE = np.float\nctypedef np.float_t DTYPE_t\n\ncimport cython\n@cython.boundscheck(False)\n@cython.wraparound(False) \n\ndef compute_cython(u, PorosityProfile, DensityIceProfile, DensityDustProfile, DensityProfile):\n\n    DustJ, DustF, DustG, DustH, DustI = 250.0, 633.0, 2.513, -2.2e-3, -2.8e-6   \n    IceI, IceC, IceD, IceE, IceF, IceG, IceH =  273.16, 1.843e5, 1.6357e8, 3.5519e9, 1.6670e2,  6.4650e4, 1.6935e6\n\n    delta = u-DustJ\n    result_dust = DustF+DustG*delta+DustH*delta**2+DustI*(delta**3);\n\n    x= u/IceI;\n    result_ice = (x**3)*(IceC+IceD*(x**2)+IceE*(x**6))/(1+IceF*(x**2)+IceG*(x**4)+IceH*(x**8))\n\n    return (DensityIceProfile*result_ice+DensityDustProfile*result_dust)/DensityProfile\n\n\ndef compute_cythonOptimized(np.ndarray[DTYPE_t, ndim=1] u, np.ndarray[DTYPE_t, ndim=1] PorosityProfile, np.ndarray[DTYPE_t, ndim=1] DensityIceProfile, np.ndarray[DTYPE_t, ndim=1] DensityDustProfile, np.ndarray DensityProfile):\n\n    assert u.dtype == DTYPE\n    assert PorosityProfile.dtype == DTYPE\n    assert DensityIceProfile.dtype == DTYPE\n    assert DensityDustProfile.dtype == DTYPE\n    assert DensityProfile.dtype == DTYPE\n\n    cdef float DustJ = 250.0\n    cdef float DustF = 633.0  \n    cdef float DustG = 2.513 \n    cdef float DustH = -2.2e-3   \n    cdef float DustI = -2.8e-6 \n    cdef float IceI =  273.16\n    cdef float IceC =  1.843e5 \n    cdef float IceD =  1.6357e8 \n    cdef float IceE =  3.5519e9 \n    cdef float IceF =  1.6670e2 \n    cdef float IceG =  6.4650e4\n    cdef float IceH =  1.6935e6\n\n    cdef np.ndarray[DTYPE_t, ndim=1] delta = u-DustJ\n    cdef np.ndarray[DTYPE_t, ndim=1] result_dust = DustF+DustG*delta+DustH*delta**2+DustI*(delta**3);\n\n    cdef np.ndarray[DTYPE_t, ndim=1] x= u/IceI;\n    cdef np.ndarray[DTYPE_t, ndim=1] result_ice = (x**3)*(IceC+IceD*(x**2)+IceE*(x**6))/(1+IceF*(x**2)+IceG*(x**4)+IceH*(x**8))\n\n    return (DensityIceProfile*result_ice+DensityDustProfile*result_dust)/DensityProfile\n</code></pre>\n\n<p>I then run the following commands:</p>\n\n<pre><code>def compute_python(u, PorosityProfile, DensityIceProfile, DensityDustProfile, DensityProfile):\n\n    DustJ, DustF, DustG, DustH, DustI = 250.0, 633.0, 2.513, -2.2e-3, -2.8e-6   \n    IceI, IceC, IceD, IceE, IceF, IceG, IceH =  273.16, 1.843e5, 1.6357e8, 3.5519e9, 1.6670e2,  6.4650e4, 1.6935e6\n\n    delta = u-DustJ\n    result_dust = DustF+DustG*delta+DustH*delta**2+DustI*(delta**3);\n\n    x= u/IceI;\n    result_ice = (x**3)*(IceC+IceD*(x**2)+IceE*(x**6))/(1+IceF*(x**2)+IceG*(x**4)+IceH*(x**8))\n\n    return (DensityIceProfile*result_ice+DensityDustProfile*result_dust)/DensityProfile\n\nimport sublimation\nimport numpy as np\n\n%timeit compute_python(np.random.rand(100),np.random.rand(100),np.random.rand(100),np.random.rand(100),np.random.rand(100))\n\n%timeit compute_cython(np.random.rand(100),np.random.rand(100),np.random.rand(100),np.random.rand(100),np.random.rand(100))\n\n%timeit compute_cythonOptimized(np.random.rand(100),np.random.rand(100),np.random.rand(100),np.random.rand(100),np.random.rand(100))\n</code></pre>\n\n<p>Which results in the following:</p>\n\n<p>For the pure python: <code>68.9 \u00b5s \u00b1 851 ns per loop (mean \u00b1 std. dev. of 7 runs, 10000 loops each)</code></p>\n\n<p>For the non optimized cython: <code>68.2 \u00b5s \u00b1 685 ns per loop (mean \u00b1 std. dev. of 7 runs, 10000 loops each)</code></p>\n\n<p>And for the optimized one: <code>72.7 \u00b5s \u00b1 416 ns per loop (mean \u00b1 std. dev. of 7 runs, 10000 loops each)</code></p>\n\n<p>What am I doing wrong ?</p>\n\n<p>Thanks for your help,</p>\n"}, {"tags": ["python", "python-3.x", "split"], "answers": [{"comments": [{"owner": {"reputation": 219, "user_id": 7043146, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7Ssmv.png?s=128&g=1", "display_name": "NULL.Dude", "link": "https://stackoverflow.com/users/7043146/null-dude"}, "edited": false, "score": 0, "creation_date": 1526510866, "post_id": 50380760, "comment_id": 87778079, "body": "this worked but left the &quot;.pdf&quot; suffix. I was able to use file_name.split(&quot;.&quot;)[0] to get the desired results.  thanks!"}], "tags": [], "owner": {"reputation": 21716, "user_id": 2401769, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/wkEbw.jpg?s=128&g=1", "display_name": "Matias Cicero", "link": "https://stackoverflow.com/users/2401769/matias-cicero"}, "is_accepted": true, "score": 4, "last_activity_date": 1526510703, "last_edit_date": 1526510703, "creation_date": 1526509440, "answer_id": 50380760, "question_id": 50380632, "link": "https://stackoverflow.com/questions/50380632/python-split-string-and-list-full-path-name/50380760#50380760", "title": "python split string and list full path name", "body": "<p>Actually, there is a <a href=\"https://docs.python.org/3/library/os.path.html#os.path.basename\" rel=\"nofollow noreferrer\">function</a> for this already:</p>\n\n<pre><code>for file in pdf_list:\n   file_name = os.path.basename(file)\n   upload.file(file_name)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 534, "user_id": 2881558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2be63c13544c3970196be2474d41839c?s=128&d=identicon&r=PG&f=1", "display_name": "A K", "link": "https://stackoverflow.com/users/2881558/a-k"}, "is_accepted": false, "score": 1, "last_activity_date": 1526510179, "creation_date": 1526510179, "answer_id": 50380871, "question_id": 50380632, "link": "https://stackoverflow.com/questions/50380632/python-split-string-and-list-full-path-name/50380871#50380871", "title": "python split string and list full path name", "body": "<p>You can use <a href=\"https://docs.python.org/3/library/pathlib.html\" rel=\"nofollow noreferrer\">pathlib</a>, for example:</p>\n\n<pre><code>from pathlib import Path\np = list(Path('C:/User/username/Desktop/pdf').glob('*.pdf'))\nfirst_filename = p[0].name\n</code></pre>\n"}], "owner": {"reputation": 219, "user_id": 7043146, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7Ssmv.png?s=128&g=1", "display_name": "NULL.Dude", "link": "https://stackoverflow.com/users/7043146/null-dude"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 228, "favorite_count": 0, "accepted_answer_id": 50380760, "answer_count": 2, "score": 3, "last_activity_date": 1526510703, "creation_date": 1526508716, "last_edit_date": 1526509311, "question_id": 50380632, "link": "https://stackoverflow.com/questions/50380632/python-split-string-and-list-full-path-name", "title": "python split string and list full path name", "body": "<p>I am using glob to get a list of all PDF files in a folder (I need full path names to upload file to cloud)</p>\n\n<p>also, during the upload I need to assign a \"title\" to the file which we be the items name in the cloud.</p>\n\n<p>I need to split the last \"\\\" and the \".\" and get the values in between. for example:</p>\n\n<pre><code>pdf_list = glob.glob(r'C:\\User\\username\\Desktop\\pdf\\*.pdf')\n</code></pre>\n\n<p>a item in the list will be: \"c:\\User\\username\\Desktop\\pdf\\4434343434331.pdf\"</p>\n\n<p>I need another pythonic way to grab the pdfs file name in a separate variable while still in the for loop. </p>\n\n<pre><code>for file in pdf_list:\n    upload.file\n    file.title(file.split(\".\")[0]\n</code></pre>\n\n<p>however the above split will not return my desired results but something along those lines</p>\n\n<p>I am using a for loop to upload each pdf (using file path)</p>\n"}, {"tags": ["python", "django", "python-3.x", "django-forms", "django-templates"], "comments": [{"owner": {"reputation": 2042, "user_id": 1497418, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/YXClT.jpg?s=128&g=1", "display_name": "Walucas", "link": "https://stackoverflow.com/users/1497418/walucas"}, "edited": false, "score": 0, "creation_date": 1526510545, "post_id": 50380630, "comment_id": 87777979, "body": "Do you mean using the AdminDateWidget? B/C you are creating your own form"}], "answers": [{"tags": [], "owner": {"reputation": 2042, "user_id": 1497418, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/YXClT.jpg?s=128&g=1", "display_name": "Walucas", "link": "https://stackoverflow.com/users/1497418/walucas"}, "is_accepted": true, "score": 0, "last_activity_date": 1526510694, "creation_date": 1526510694, "answer_id": 50380948, "question_id": 50380630, "link": "https://stackoverflow.com/questions/50380630/how-to-use-admin-form-in-a-custom-page-django/50380948#50380948", "title": "How to use admin Form in a custom page Django", "body": "<p>Add this to your template (base.html probably)</p>\n\n<pre><code>{% load admin_static %} \n</code></pre>\n\n<p>if doesnt work, add this:</p>\n\n<pre><code>&lt;link rel=\"stylesheet\" type=\"text/css\" href=\"/static/admin/css/base.css\" /&gt;\n&lt;link rel=\"stylesheet\" type=\"text/css\" href=\"/static/admin/css/forms.css\" /&gt;\n\n\n&lt;script type=\"text/javascript\" src=\"/admin/jsi18n/\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src=\"/static/admin/js/core.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src=\"/static/admin/js/vendor/jquery/jquery.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src=\"/static/admin/js/jquery.init.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src=\"/static/admin/js/admin/RelatedObjectLookups.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src=\"/static/admin/js/actions.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src=\"/static/admin/js/urlify.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src=\"/static/admin/js/prepopulate.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src=\"/static/admin/js/vendor/xregexp/xregexp.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src=\"/static/admin/js/calendar.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src=\"/static/admin/js/admin/DateTimeShortcuts.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src=\"/static/admin/js/inlines.js\"&gt;&lt;/script&gt;\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 6683261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0771c839411f3eb7490a8548030b17da?s=128&d=identicon&r=PG&f=1", "display_name": "jjocram", "link": "https://stackoverflow.com/users/6683261/jjocram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 486, "favorite_count": 0, "accepted_answer_id": 50380948, "answer_count": 1, "score": 3, "last_activity_date": 1526510694, "creation_date": 1526508701, "question_id": 50380630, "link": "https://stackoverflow.com/questions/50380630/how-to-use-admin-form-in-a-custom-page-django", "title": "How to use admin Form in a custom page Django", "body": "<p>I'm trying to use the same form for date and time used in admin page but in a custom page.</p>\n\n<p>I've created a form class like this:</p>\n\n<pre><code>from django import forms\nfrom django.contrib.admin import widgets as adminWidget\n\nclass RequestData(forms.Form):\n    data = forms.DateField(widget=adminWidget.AdminDateWidget())\n</code></pre>\n\n<p>When I show this form in a template it doesn't look like in the admin page</p>\n"}, {"tags": ["python", "python-2.7", "pip", "setuptools", "pkg-resources"], "comments": [{"owner": {"reputation": 37796, "user_id": 2650249, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/RBWDR.jpg?s=128&g=1", "display_name": "hoefling", "link": "https://stackoverflow.com/users/2650249/hoefling"}, "edited": false, "score": 1, "creation_date": 1526563942, "post_id": 50380624, "comment_id": 87801292, "body": "isn&#39;t <code>pkg_resource.find_distributions(&#39;path&#47;to&#47;target&#47;dir&#39;)</code> good enough?"}, {"owner": {"reputation": 176, "user_id": 5056311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/873fdd5cdca23da0dfaccfccbd5f911f?s=128&d=identicon&r=PG&f=1", "display_name": "hiradyazdan", "link": "https://stackoverflow.com/users/5056311/hiradyazdan"}, "reply_to_user": {"reputation": 37796, "user_id": 2650249, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/RBWDR.jpg?s=128&g=1", "display_name": "hoefling", "link": "https://stackoverflow.com/users/2650249/hoefling"}, "edited": false, "score": 0, "creation_date": 1526564462, "post_id": 50380624, "comment_id": 87801667, "body": "Aah! Thank you so much, I wasn\u2019t aware of this method! That does it"}, {"owner": {"reputation": 37796, "user_id": 2650249, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/RBWDR.jpg?s=128&g=1", "display_name": "hoefling", "link": "https://stackoverflow.com/users/2650249/hoefling"}, "edited": false, "score": 0, "creation_date": 1526564483, "post_id": 50380624, "comment_id": 87801676, "body": "Nice, glad I could help!"}, {"owner": {"reputation": 176, "user_id": 5056311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/873fdd5cdca23da0dfaccfccbd5f911f?s=128&d=identicon&r=PG&f=1", "display_name": "hiradyazdan", "link": "https://stackoverflow.com/users/5056311/hiradyazdan"}, "reply_to_user": {"reputation": 37796, "user_id": 2650249, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/RBWDR.jpg?s=128&g=1", "display_name": "hoefling", "link": "https://stackoverflow.com/users/2650249/hoefling"}, "edited": false, "score": 0, "creation_date": 1526564563, "post_id": 50380624, "comment_id": 87801725, "body": "If you post it as an answer it could help others as well"}], "answers": [{"tags": [], "owner": {"reputation": 37796, "user_id": 2650249, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/RBWDR.jpg?s=128&g=1", "display_name": "hoefling", "link": "https://stackoverflow.com/users/2650249/hoefling"}, "is_accepted": true, "score": 2, "last_activity_date": 1584207031, "last_edit_date": 1584207031, "creation_date": 1526565116, "answer_id": 50393220, "question_id": 50380624, "link": "https://stackoverflow.com/questions/50380624/find-pip-packages-pkg-resources-specify-custom-target-directory/50393220#50393220", "title": "find pip packages: pkg_resources specify custom target directory", "body": "<h3>Update</h3>\n\n<p>Python 3.8 introduced <a href=\"https://docs.python.org/3/library/importlib.metadata.html\" rel=\"nofollow noreferrer\"><code>importlib.metadata</code></a>, a module for querying the installed packages that supersedes <code>pkg_resources</code>. Example usage:</p>\n\n<pre><code>In [1]: from importlib import metadata\nIn [2]: dists = metadata.distributions(paths=['my_target_dir'])\nIn [3]: list(f\"{d.metadata['Name']}=={d.metadata['Version']}\" for d in dists)\nOut[22]: \n['pip==20.0.2',\n 'ipython==7.13.0',\n ...\n]\n</code></pre>\n\n<p>For Python 2.7 and Python >=3.5, there's a backport called <a href=\"https://pypi.org/project/importlib-metadata/\" rel=\"nofollow noreferrer\"><code>importlib-metadata</code></a>:</p>\n\n<pre><code>$ pip install importlib-metadata\n</code></pre>\n\n<h3>Original answer</h3>\n\n<p>The <code>pkg_resources.find_distributions</code> function (documented under <a href=\"http://setuptools.readthedocs.io/en/latest/pkg_resources.html#getting-or-creating-distributions\" rel=\"nofollow noreferrer\">Getting or Creating Distributions</a>) accepts a target dir to search for packages in. Example:</p>\n\n<pre><code>$ ls -l my_target_dir/\ntotal 36\ndrwxr-xr-x 2 hoefling hoefling 4096 May 17 13:29 __pycache__\n-rw-r--r-- 1 hoefling hoefling  126 May 17 13:29 easy_install.py\ndrwxr-xr-x 5 hoefling hoefling 4096 May 17 13:29 pip\ndrwxr-xr-x 2 hoefling hoefling 4096 May 17 13:29 pip-10.0.1.dist-info\ndrwxr-xr-x 5 hoefling hoefling 4096 May 17 13:29 pkg_resources\ndrwxr-xr-x 6 hoefling hoefling 4096 May 17 13:29 setuptools\ndrwxr-xr-x 2 hoefling hoefling 4096 May 17 13:29 setuptools-39.1.0.dist-info\ndrwxr-xr-x 5 hoefling hoefling 4096 May 17 13:29 wheel\ndrwxr-xr-x 2 hoefling hoefling 4096 May 17 13:29 wheel-0.31.1.dist-info\n</code></pre>\n\n<p>Scanning <code>my_target_dir</code> with <code>pkg_resources.find_distributions</code> yields:</p>\n\n<pre><code>In [2]: list(pkg_resources.find_distributions('my_target_dir'))\nOut[2]:\n[wheel 0.31.1 (/data/gentoo64/tmp/so-50380624/my_target_dir),\n setuptools 39.1.0 (/data/gentoo64/tmp/so-50380624/my_target_dir),\n pip 10.0.1 (/data/gentoo64/tmp/so-50380624/my_target_dir)]\n</code></pre>\n"}], "owner": {"reputation": 176, "user_id": 5056311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/873fdd5cdca23da0dfaccfccbd5f911f?s=128&d=identicon&r=PG&f=1", "display_name": "hiradyazdan", "link": "https://stackoverflow.com/users/5056311/hiradyazdan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 324, "favorite_count": 0, "accepted_answer_id": 50393220, "answer_count": 1, "score": 1, "last_activity_date": 1584207031, "creation_date": 1526508672, "last_edit_date": 1526515091, "question_id": 50380624, "link": "https://stackoverflow.com/questions/50380624/find-pip-packages-pkg-resources-specify-custom-target-directory", "title": "find pip packages: pkg_resources specify custom target directory", "body": "<p>Is there any way to specify a custom target directory for pkg_resources to list pip packages? I want to be able to find packages which have been installed in a custom target directory using <code>--target</code> through something like <code>pkg_resources.require()</code> that already fed with a custom target directory.</p>\n\n<p>What I don't want is to use:</p>\n\n<ul>\n<li><code>setuptools.find_packages</code> as it's only using <code>sys.path</code></li>\n<li><code>setuptools.PEP420PackageFinder.find</code></li>\n<li>Finding packages through traversing the directory names and files was not helping as well, as I need a more generic way of finding package namespaces. </li>\n</ul>\n\n<p>I appreciate any help on this.</p>\n"}, {"tags": ["python", "python-3.x", "listview", "kivy"], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 8792785, "user_type": "registered", "profile_image": "https://graph.facebook.com/10214832554386562/picture?type=large", "display_name": "Kadir Karadavut", "link": "https://stackoverflow.com/users/8792785/kadir-karadavut"}, "edited": false, "score": 0, "creation_date": 1526561884, "post_id": 50380710, "comment_id": 87799722, "body": "Thank you so much, I&#39;m new to Python and Kivy in general so I am having a really hard time with small details like this. I understand it better now, cheers :)"}], "tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 1, "last_activity_date": 1526509166, "creation_date": 1526509166, "answer_id": 50380710, "question_id": 50380542, "link": "https://stackoverflow.com/questions/50380542/python-kivy-cant-submit-a-textinput-value-of-a-screen-screenmanager-to-anot/50380710#50380710", "title": "Python Kivy - Can&#39;t submit a TextInput value of a screen (ScreenManager) to another screen&#39;s listview", "body": "<p>The error in your case is that <code>student_list</code> is an attribute of <code>MainScreen</code> and not <code>ProfileScreen</code> so you can not access it by self, I recommend reading the following: <a href=\"https://stackoverflow.com/questions/2709821/what-is-the-purpose-of-self\">What is the purpose of self?</a></p>\n\n<p>In your case, the solution is to access the correct Screen through the <code>ScreenManager</code>:</p>\n\n<pre><code>def okay(self):\n    abc_name = self.abc_text_input.text + \" \" + self.def_text_input.text\n    main_screen = self.manager.get_screen('main_screen')\n\n    # Add the student to the ListView\n    main_screen.student_list.adapter.data.extend([abc_name])\n\n    # Reset the ListView\n    main_screen.student_list._trigger_reset_populate()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 65, "user_id": 8792785, "user_type": "registered", "profile_image": "https://graph.facebook.com/10214832554386562/picture?type=large", "display_name": "Kadir Karadavut", "link": "https://stackoverflow.com/users/8792785/kadir-karadavut"}, "edited": false, "score": 0, "creation_date": 1526582640, "post_id": 50398311, "comment_id": 87812700, "body": "Thanks for your reply. Seems like there are always multiple ways to solve a problem in coding :) Well I thought about using RecycleView, though there are not enough guides and tutorials about it and the examples on kivy&#39;s website are just not enough for me to figure it out since I&#39;m new to kivy, so till then I would rather try to stick to the current stuff until I have more knowledge . I can&#39;t even use ListView properly yet, I am trying to add multiple columns to the ListView to seperate the values, but I have no idea how to do it to be honest."}], "tags": [], "owner": {"reputation": 13781, "user_id": 6366098, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xw9V6.png?s=128&g=1", "display_name": "ikolim", "link": "https://stackoverflow.com/users/6366098/ikolim"}, "is_accepted": false, "score": 0, "last_activity_date": 1526581997, "creation_date": 1526581997, "answer_id": 50398311, "question_id": 50380542, "link": "https://stackoverflow.com/questions/50380542/python-kivy-cant-submit-a-textinput-value-of-a-screen-screenmanager-to-anot/50398311#50398311", "title": "Python Kivy - Can&#39;t submit a TextInput value of a screen (ScreenManager) to another screen&#39;s listview", "body": "<p>Since you already have the screens hooked up to ObjectProperty in the ScreenManager, the solution is</p>\n\n<pre><code>self.manager.main_screen...\n</code></pre>\n\n<h1>Note</h1>\n\n<p>You might want to replace ListView with RecycleView because ListView has been deprecated.</p>\n\n<p><a href=\"https://kivy.org/docs/api-kivy.uix.listview.html\" rel=\"nofollow noreferrer\">List View</a></p>\n\n<blockquote>\n  <p>Deprecated since version 1.10.0: ListView has been deprecated, use\n  <a href=\"https://kivy.org/docs/api-kivy.uix.recycleview.html#kivy.uix.recycleview.RecycleView\" rel=\"nofollow noreferrer\">RecycleView</a> instead.</p>\n</blockquote>\n\n<h1>Snippets</h1>\n\n<pre><code>def okay(self):\n    abc_name = self.abc_text_input.text + \" \" + self.def_text_input.text\n\n    # Add the student to the ListView\n    self.manager.main_screen.student_list.adapter.data.extend([abc_name])\n\n    # Reset the ListView\n    self.manager.main_screen.student_list._trigger_reset_populate()\n</code></pre>\n\n<h1>Output</h1>\n\n<p><a href=\"https://i.stack.imgur.com/6PRzA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6PRzA.png\" alt=\"Img01\"></a></p>\n"}], "owner": {"reputation": 65, "user_id": 8792785, "user_type": "registered", "profile_image": "https://graph.facebook.com/10214832554386562/picture?type=large", "display_name": "Kadir Karadavut", "link": "https://stackoverflow.com/users/8792785/kadir-karadavut"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 0, "accepted_answer_id": 50380710, "answer_count": 2, "score": 1, "last_activity_date": 1526581997, "creation_date": 1526508185, "last_edit_date": 1526509177, "question_id": 50380542, "link": "https://stackoverflow.com/questions/50380542/python-kivy-cant-submit-a-textinput-value-of-a-screen-screenmanager-to-anot", "title": "Python Kivy - Can&#39;t submit a TextInput value of a screen (ScreenManager) to another screen&#39;s listview", "body": "<p>I am new to kivy and need help with the ListView and ScreenManager. I managed to use the ListView on a single screen, but I am trying to use it with two screens via ScreenManager:\nI have a ListView in MainScreen and made a button to navigate to ProfileScreen, where I will enter values in the TextInput \"abc\" and \"defe\" and want them to be submitted to the ListView.\nWhen I run the .py file with this code it works, but when I enter the values on ProfileScreen and press \"Okay\", it crashes and says \"ProfileScreen\" has no attribute \"student_list\". If I change the parameter of ProfileScreen(Screen) to ProfileScreen(MainScreen) it works, but the content of the page ProfileScreen is inherited from MainScreen, which I don't want.</p>\n\n<p>How can I solve this issue? I would appreciate any kind of help, thanks in advance.</p>\n\n<p>This is my code:</p>\n\n<p>studentdb.py, \nstudentdb.kv</p>\n\n<pre><code>from kivy.app import App\nfrom kivy.uix.boxlayout import BoxLayout\nfrom kivy.properties import ObjectProperty\nfrom kivy.uix.listview import ListItemButton\nfrom kivy.uix.screenmanager import ScreenManager, Screen\n\nclass StudentListButton(ListItemButton):\n    pass\n\nclass Manager(ScreenManager):\n    main_screen = ObjectProperty()\n    profile_screen = ObjectProperty()\n\nclass MainScreen(Screen):\n    first_name_text_input= ObjectProperty()\n    last_name_text_input= ObjectProperty()\n    student_list = ObjectProperty()\n\n    def submit_student(self):\n        # Get the student name from the TextInputs\n        student_name = self.first_name_text_input.text + \" \" + self.last_name_text_input.text\n\n        # Add the student to the ListView\n        self.student_list.adapter.data.extend([student_name])\n\n        # Reset the ListView\n        self.student_list._trigger_reset_populate()\n\n    def delete_student(self, *args):\n        if self.student_list.adapter.selection:\n\n            # Get the text from the item selected\n            selection = self.student_list.adapter.selection[0].text\n\n            # Remove the matching item\n            self.student_list.adapter.data.remove(selection)\n\n            # Reset the ListView\n            self.student_list._trigger_reset_populate()\n\n    def replace_student(self, *args):\n        # If a list item is selected\n        if self.student_list.adapter.selection:\n\n            # Get the text from the item selected\n            selection = self.student_list.adapter.selection[0].text\n\n            # Remove the matching item\n            self.student_list.adapter.data.remove(selection)\n\n            # Get the student name from the TextInputs\n            student_name = self.first_name_text_input.text + \" \" + self.last_name_text_input.text\n\n            # Add the updated data to the list\n            self.student_list.adapter.data.extend([student_name])\n\n            # Reset the ListView\n            self.student_list._trigger_reset_populate()\n\nclass ProfileScreen(Screen):\n    abc_text_input=ObjectProperty()\n    def_text_input=ObjectProperty()\n\n    def okay(self):\n        abc_name = self.abc_text_input.text + \" \" + self.def_text_input.text\n\n        # Add the student to the ListView\n        self.student_list.adapter.data.extend([abc_name])\n\n        # Reset the ListView\n        self.student_list._trigger_reset_populate()\n\nclass StudentDBApp(App):\n    def build(self):\n        return Manager()\n\nif __name__==\"__main__\":\n    StudentDBApp().run()\n------------------------------------------------------------------\n#: import main studentdb\n#: import ListAdapter kivy.adapters.listadapter.ListAdapter\n#: import ListItemButton kivy.uix.listview.ListItemButton\n\n&lt;MainScreen&gt;:\n    first_name_text_input: first_name\n    last_name_text_input: last_name\n    student_list: student_list\n    BoxLayout:\n        orientation: \"vertical\"\n        BoxLayout:\n            Label:\n                text:\"First Name:\"\n            TextInput:\n                id: first_name\n            Label:\n                text:\"Last Name:\"\n            TextInput:\n                id: last_name\n        BoxLayout:\n            Button:\n                text:\"Submit\"\n                on_release: root.submit_student()\n            Button:\n                text:\"Delete\"\n                on_release: root.delete_student()\n            Button:\n                text:\"Replace\"\n                on_release: root.replace_student()\n            Button:\n                text: \"New\"\n                on_release: root.manager.current=\"profile_screen\"\n        ListView:\n            id: student_list\n            adapter:\n                ListAdapter(data=['Doug Smith'], cls=main.StudentListButton)\n\n&lt;ProfileScreen&gt;:\n    abc_text_input: abc\n    def_text_input: defe\n    BoxLayout:\n        orientation: \"vertical\"\n        BoxLayout:\n            Button:\n                text:\"Back\"\n                on_release: root.manager.current=\"main_screen\"\n        BoxLayout:\n            Label:\n                text:\"abc\"\n            TextInput:\n                id: abc\n            Label:\n                text: \"def\"\n            TextInput:\n                id: defe\n        BoxLayout:\n            Button:\n                text: \"Okay\"\n                on_release: root.okay()\n\n&lt;Manager&gt;:\n    id: screen_manager\n    main_screen: main_screen\n    profile_screen: profile_screen\n\n    MainScreen:\n        id: main_screen\n        name:\"main_screen\"\n        manager: screen_manager\n\n    ProfileScreen:\n        id: profile_screen\n        name: \"profile_screen\"\n        manager: screen_manager\n</code></pre>\n"}, {"tags": ["python", "dictionary", "merge"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1526671272, "post_id": 50380529, "comment_id": 87851530, "body": "please don&#39;t vandalize your post."}], "answers": [{"tags": [], "owner": {"reputation": 19004, "user_id": 5079316, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f5e325c060deb5b55ee6ac0941af4dbe?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier Melan&#231;on", "link": "https://stackoverflow.com/users/5079316/olivier-melan%c3%a7on"}, "is_accepted": false, "score": 1, "last_activity_date": 1526523314, "last_edit_date": 1526523314, "creation_date": 1526508343, "answer_id": 50380565, "question_id": 50380529, "link": "https://stackoverflow.com/questions/50380529/merge-two-dictionaries-if-the-keys-are-equal/50380565#50380565", "title": "Merge two dictionaries if the keys are equal", "body": "<p>You can use <code>dict.get</code> to return an empty list when an item is not in your list. This allows to get the desired output with a single dict comprehension, by looping over the existing keys.</p>\n\n<pre><code>d1 = {'a': [1, 2, 3], 'b': [5], 'c': [5, 6, 9]}\nd2 = {'a': [4], 'b': [8, 9, 0], 'd': [10, 14, 13]}\n\noutput = {k: d1.get(k, []) + d2.get(k, []) for k in {*d1, *d2}}\n# output: {'a': [1, 2, 3, 4], 'b': [5, 8, 9, 0], 'c': [5, 6, 9], 'd': [10, 14, 13]}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1526511342, "post_id": 50380789, "comment_id": 87778216, "body": "You don&#39;t need the call to <code>keys</code>; the <code>dict</code> iterator already produces the keys."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1526511375, "post_id": 50380789, "comment_id": 87778225, "body": "Note that this will modify the lists in <code>Dict1</code> as you update <code>result</code>, since you didn&#39;t make a copy of the values."}, {"owner": {"reputation": 13633, "user_id": 5916727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f1508d2b83d8f3b1c7450023486045d?s=128&d=identicon&r=PG&f=1", "display_name": "student", "link": "https://stackoverflow.com/users/5916727/student"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1526511489, "post_id": 50380789, "comment_id": 87778258, "body": "@chepner Thanks, I will add the edit section to point it out."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1526511807, "post_id": 50380789, "comment_id": 87778344, "body": "The shallow copy made by <code>Dict1.copy()</code> isn&#39;t sufficient; it makes a new <code>dict</code>, but each dict still refers to the same values."}, {"owner": {"reputation": 13633, "user_id": 5916727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f1508d2b83d8f3b1c7450023486045d?s=128&d=identicon&r=PG&f=1", "display_name": "student", "link": "https://stackoverflow.com/users/5916727/student"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1526512045, "post_id": 50380789, "comment_id": 87778404, "body": "@chepner thanks, I didn&#39;t know that, how about using <code>result[k] = v[:]</code> in <code>else</code> loop to avoid changing <code>Dict1</code>?"}, {"owner": {"reputation": 13633, "user_id": 5916727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f1508d2b83d8f3b1c7450023486045d?s=128&d=identicon&r=PG&f=1", "display_name": "student", "link": "https://stackoverflow.com/users/5916727/student"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1526520785, "post_id": 50380789, "comment_id": 87780139, "body": "For downvote, is there anything I can update? or if this is really bad solution then, I can remove the answer too."}, {"owner": {"reputation": 13633, "user_id": 5916727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f1508d2b83d8f3b1c7450023486045d?s=128&d=identicon&r=PG&f=1", "display_name": "student", "link": "https://stackoverflow.com/users/5916727/student"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1526524124, "post_id": 50380789, "comment_id": 87780745, "body": "@OlivierMelan&#231;on thanks for the reply, I replaced with <code>deepcopy</code>."}], "tags": [], "owner": {"reputation": 13633, "user_id": 5916727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f1508d2b83d8f3b1c7450023486045d?s=128&d=identicon&r=PG&f=1", "display_name": "student", "link": "https://stackoverflow.com/users/5916727/student"}, "is_accepted": true, "score": 1, "last_activity_date": 1526524066, "last_edit_date": 1526524066, "creation_date": 1526509634, "answer_id": 50380789, "question_id": 50380529, "link": "https://stackoverflow.com/questions/50380529/merge-two-dictionaries-if-the-keys-are-equal/50380789#50380789", "title": "Merge two dictionaries if the keys are equal", "body": "<p>May be not efficient but naive way may be to iterate over items in each dictionary and add in new dictionary:</p>\n\n<pre><code>Dict1 = {'a': [1, 2, 3], 'b': [5], 'c': [5, 6, 9]}\ndict2 = {'a': [4], 'b': [8, 9, 0], 'd': [10, 14, 13]}\n\n# to store final result of dictionary\nresult = {}\n\n# iterate through each dictionary in list\nfor dictionary in [Dict1, dict2]:\n    # iterate through key value of dictionary items\n    for k,v in dictionary.items():\n        # if key is already in result dictionary then extend new values\n        if k in result.keys():\n            result[k].extend(v)\n        # else if key is not in dictionary then add key with the first value\n        else:\n            result[k] = v\n\nprint(result)\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>{'d': [10, 14, 13], 'a': [1, 2, 3, 4], 'b': [5, 8, 9, 0], 'c': [5, 6, 9]}\n</code></pre>\n\n<p><strong>Note</strong> as @chepner pointed out in comments below, the above solution changes the <code>Dict1</code> so, using <code>deepcopy</code> would avoid it, and other is <code>.keys()</code> is not required while checking for if key exists in dictionary:</p>\n\n<pre><code>from copy import deepcopy\n\nDict1 = {'a': [1, 2, 3], 'b': [5], 'c': [5, 6, 9]}\ndict2 = {'a': [4], 'b': [8, 9, 0], 'd': [10, 14, 13]}\n\n# to store final result of dictionary\nresult = {}\n\n# iterate through each dictionary in list\nfor dictionary in [deepcopy(Dict1), dict2]:\n    # iterate through key value of dictionary items\n    for k,v in dictionary.items():\n        # if key is already in result dictionary then extend new values\n        if k in result:\n            result[k].extend(v)\n        # else if key is not in dictionary then add key with the first value\n        else:\n            result[k] = v\n\nprint(result)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "is_accepted": false, "score": -1, "last_activity_date": 1526511499, "last_edit_date": 1526511499, "creation_date": 1526509728, "answer_id": 50380797, "question_id": 50380529, "link": "https://stackoverflow.com/questions/50380529/merge-two-dictionaries-if-the-keys-are-equal/50380797#50380797", "title": "Merge two dictionaries if the keys are equal", "body": "<p>You can use <code>itertools.groupby</code>:</p>\n\n<pre><code>import itertools\ndict1 = {'a': [1, 2, 3], 'b': [5], 'c': [5, 6, 9]}\ndict2 = {'a': [4], 'b': [8, 9, 0], 'd': [10, 14, 13]}\nnew_l = [[a, list(b)] for a, b in itertools.groupby(sorted(list(dict1.items())+list(dict2.items()), key=lambda x:x[0]), key=lambda x:x[0])]\nfinal_result = {a:list(itertools.chain.from_iterable([c for _, c in b])) for a, b in new_l}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>{'a': [1, 2, 3, 4], 'b': [5, 8, 9, 0], 'c': [5, 6, 9], 'd': [10, 14, 13]}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 19004, "user_id": 5079316, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f5e325c060deb5b55ee6ac0941af4dbe?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier Melan&#231;on", "link": "https://stackoverflow.com/users/5079316/olivier-melan%c3%a7on"}, "edited": false, "score": 0, "creation_date": 1526523916, "post_id": 50382441, "comment_id": 87780698, "body": "A shorter way is to do <code>final_dict = defaultdict(list, **deepcopy(Dict1))</code> so you can remove your outter loop."}], "tags": [], "owner": {"reputation": 8761, "user_id": 1192111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/578c0836635d7d63abf64daaafb3ffa6?s=128&d=identicon&r=PG", "display_name": "Francisco C", "link": "https://stackoverflow.com/users/1192111/francisco-c"}, "is_accepted": false, "score": 0, "last_activity_date": 1526523708, "creation_date": 1526523708, "answer_id": 50382441, "question_id": 50380529, "link": "https://stackoverflow.com/questions/50380529/merge-two-dictionaries-if-the-keys-are-equal/50382441#50382441", "title": "Merge two dictionaries if the keys are equal", "body": "<p>You can use <code>defaultdict</code>:</p>\n\n<pre><code>final_dict = defaultdict(list)\n\nfor d in [Dict1, dict2]:\n    for k, v in d.items():\n        final_dict[k].extend(v)\n</code></pre>\n\n<p>and the result is:</p>\n\n<pre><code>defaultdict(&lt;type 'list'&gt;, {'a': [1, 2, 3, 4], 'c': [5, 6, 9], 'b': [5, 8, 9, 0], 'd': [10, 14, 13]})\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4309572"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 623, "favorite_count": 0, "accepted_answer_id": 50380789, "answer_count": 4, "score": 3, "last_activity_date": 1529734559, "creation_date": 1526508089, "last_edit_date": 1529734559, "question_id": 50380529, "link": "https://stackoverflow.com/questions/50380529/merge-two-dictionaries-if-the-keys-are-equal", "title": "Merge two dictionaries if the keys are equal", "body": "<p>I have 2 dictionaries.</p>\n\n<p>I need to merge them together based on key:value pairs. If any key:value item in either the first or second dictionary dont match they are added as separate pairs to the final dict.</p>\n"}, {"tags": ["python", "list"], "comments": [{"owner": {"reputation": 1551, "user_id": 806802, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/5kFde.jpg?s=128&g=1", "display_name": "Srini", "link": "https://stackoverflow.com/users/806802/srini"}, "edited": false, "score": 0, "creation_date": 1526507893, "post_id": 50380479, "comment_id": 87777155, "body": "can you provide an example 4-scale list?"}, {"owner": {"reputation": 7177, "user_id": 5476782, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/561556eecedc2b61530e56d966fb65e0?s=128&d=identicon&r=PG&f=1", "display_name": "Evhz", "link": "https://stackoverflow.com/users/5476782/evhz"}, "edited": false, "score": 0, "creation_date": 1526507969, "post_id": 50380479, "comment_id": 87777186, "body": "Wouldn&#39;t it loop forever with the list <code>[1,2,3]</code> ?"}, {"owner": {"reputation": 41, "user_id": 9802810, "user_type": "registered", "profile_image": "https://graph.facebook.com/1077448412404393/picture?type=large", "display_name": "Marc Partensky", "link": "https://stackoverflow.com/users/9802810/marc-partensky"}, "edited": false, "score": 0, "creation_date": 1526508227, "post_id": 50380479, "comment_id": 87777281, "body": "what i mean with a 4-scale list is like a matrix  4scaleListe=[[[&quot;word1&quot;,&quot;word2&quot;,None...],[None,&quot;word1&quot;,&quot;word2&zwnj;&#8203;&quot;,...]...],...]"}, {"owner": {"reputation": 41, "user_id": 9802810, "user_type": "registered", "profile_image": "https://graph.facebook.com/1077448412404393/picture?type=large", "display_name": "Marc Partensky", "link": "https://stackoverflow.com/users/9802810/marc-partensky"}, "edited": false, "score": 0, "creation_date": 1526508366, "post_id": 50380479, "comment_id": 87777333, "body": "i don&#39;t understand how it would loop with [1,2,3] when i started it it said there was an index out of range"}, {"owner": {"reputation": 41, "user_id": 9802810, "user_type": "registered", "profile_image": "https://graph.facebook.com/1077448412404393/picture?type=large", "display_name": "Marc Partensky", "link": "https://stackoverflow.com/users/9802810/marc-partensky"}, "edited": false, "score": 0, "creation_date": 1526508493, "post_id": 50380479, "comment_id": 87777367, "body": "the problem is that the list could also look like that: [[[&quot;word1&quot;,&quot;word2&quot;,None...],[None,&quot;word1&quot;,&quot;word2&quot;,...]...],N&zwnj;&#8203;one,[[&quot;word&quot;,...],[&quot;&zwnj;&#8203;word&quot;,...]...]]"}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 9802810, "user_type": "registered", "profile_image": "https://graph.facebook.com/1077448412404393/picture?type=large", "display_name": "Marc Partensky", "link": "https://stackoverflow.com/users/9802810/marc-partensky"}, "edited": false, "score": 0, "creation_date": 1526510886, "post_id": 50380785, "comment_id": 87778087, "body": "You get the idea of what i want to do, but i tried the fonction and it didn&#39;t work for me, i guess im copying it wrong (i don&#39;t understand how the &quot;return&quot; works in your code), but thanks a lot!"}, {"owner": {"reputation": 41, "user_id": 9802810, "user_type": "registered", "profile_image": "https://graph.facebook.com/1077448412404393/picture?type=large", "display_name": "Marc Partensky", "link": "https://stackoverflow.com/users/9802810/marc-partensky"}, "edited": false, "score": 0, "creation_date": 1526511215, "post_id": 50380785, "comment_id": 87778179, "body": "I tried multiples times copy-pasting lines after lines, but i couldn&#39;t make it work. could you have forgotten some lines or something?"}, {"owner": {"reputation": 41, "user_id": 9802810, "user_type": "registered", "profile_image": "https://graph.facebook.com/1077448412404393/picture?type=large", "display_name": "Marc Partensky", "link": "https://stackoverflow.com/users/9802810/marc-partensky"}, "edited": false, "score": 0, "creation_date": 1526511387, "post_id": 50380785, "comment_id": 87778230, "body": "My bad! it perfectly works! You are my savior :D Thanks ;)"}, {"owner": {"reputation": 1551, "user_id": 806802, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/5kFde.jpg?s=128&g=1", "display_name": "Srini", "link": "https://stackoverflow.com/users/806802/srini"}, "reply_to_user": {"reputation": 41, "user_id": 9802810, "user_type": "registered", "profile_image": "https://graph.facebook.com/1077448412404393/picture?type=large", "display_name": "Marc Partensky", "link": "https://stackoverflow.com/users/9802810/marc-partensky"}, "edited": false, "score": 0, "creation_date": 1526511748, "post_id": 50380785, "comment_id": 87778330, "body": "@MarcPartensky could you accept the answer then please?"}, {"owner": {"reputation": 41, "user_id": 9802810, "user_type": "registered", "profile_image": "https://graph.facebook.com/1077448412404393/picture?type=large", "display_name": "Marc Partensky", "link": "https://stackoverflow.com/users/9802810/marc-partensky"}, "edited": false, "score": 0, "creation_date": 1526547468, "post_id": 50380785, "comment_id": 87790109, "body": "sorry about that, i didn&#39;t know this could be done ;)"}], "tags": [], "owner": {"reputation": 1551, "user_id": 806802, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/5kFde.jpg?s=128&g=1", "display_name": "Srini", "link": "https://stackoverflow.com/users/806802/srini"}, "is_accepted": true, "score": 1, "last_activity_date": 1526509595, "creation_date": 1526509595, "answer_id": 50380785, "question_id": 50380479, "link": "https://stackoverflow.com/questions/50380479/deleting-none-values-in-a-4-scale-list-using-recusivity-python/50380785#50380785", "title": "Deleting None values in a 4 scale list using recusivity-- python", "body": "<p>It would have been nice to have an example about your use case</p>\n\n<p>But if I understand this correctly, consider a simple 2 nested list where <code>None</code> occur at the parent level or the child level</p>\n\n<p>In this case you can remove None using recursion</p>\n\n<pre><code>In [83]: a = [1,2,3,None]\n\nIn [84]: b = [a, None, a]\n\nIn [85]: def rem_none(l):\n    ...:     if type(l) != list:\n    ...:         return\n    ...:     l[:] = [i for i in l if i is not None]\n    ...:     for e in l:\n    ...:        rem_none(e)\n    ...:\n\nIn [86]: rem_none(b)\n\nIn [87]: b\nOut[87]: [[1, 2, 3], [1, 2, 3]]\n</code></pre>\n\n<p>This is a super simplistic approach, you can do even more powerful stuff with <a href=\"http://book.pythontips.com/en/latest/map_filter.html\" rel=\"nofollow noreferrer\">filter</a></p>\n"}], "owner": {"reputation": 41, "user_id": 9802810, "user_type": "registered", "profile_image": "https://graph.facebook.com/1077448412404393/picture?type=large", "display_name": "Marc Partensky", "link": "https://stackoverflow.com/users/9802810/marc-partensky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 50380785, "answer_count": 1, "score": 2, "last_activity_date": 1526509595, "creation_date": 1526507780, "last_edit_date": 1526508560, "question_id": 50380479, "link": "https://stackoverflow.com/questions/50380479/deleting-none-values-in-a-4-scale-list-using-recusivity-python", "title": "Deleting None values in a 4 scale list using recusivity-- python", "body": "<p>I'm new to the platform, and I'm trying to make an useful function for my program in python that uses a complex list, (a list of list of list of words to be more precise).\nThe whole problem is that None values can be at every level of this \"4 scale list\".</p>\n\n<p>However, I've tried this:</p>\n\n<pre><code>def WipeOutNone(List):\n    for i in range(len(List)):\n        if List[i]==None:\n            del List[i]\n        else:\n            if len(List[i])&gt;1:\n                WipeOutNone(List[i])\n    return List\n</code></pre>\n\n<p>but it doesn't work.</p>\n\n<p>Do you have any idea how to fix it, or just find another way to do it?</p>\n\n<p>Any answer is welcome :)</p>\n"}, {"tags": ["python", "pyqt", "pyqt5", "qt3d"], "answers": [{"tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 1, "last_activity_date": 1526512466, "creation_date": 1526512466, "answer_id": 50381200, "question_id": 50380475, "link": "https://stackoverflow.com/questions/50380475/what-is-wrong-with-the-callback-mechanism-in-pyqt5-qt3dcore-using-qt-example/50381200#50381200", "title": "What is wrong with the callback mechanism in PyQt5.Qt3DCore using QT Example", "body": "<p>It seems that it is a bug of <code>PyQt3D</code>, a possible solution is to use <code>functools.partial</code>:</p>\n\n<pre><code>...\n\nfrom functools import partial\n\ntorusCB.stateChanged.connect(partial(modifier.enableTorus))\nconeCB.stateChanged.connect(partial(modifier.enableCone))\ncylinderCB.stateChanged.connect(partial(modifier.enableCylinder))\ncuboidCB.stateChanged.connect(partial(modifier.enableCuboid))\nplaneCB.stateChanged.connect(partial(modifier.enablePlane))\nsphereCB.stateChanged.connect(partial(modifier.enableSphere))\n\n...\n</code></pre>\n"}], "owner": {"reputation": 979, "user_id": 1801968, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/551ec32188e0b94733e031a7ea68f37c?s=128&d=identicon&r=PG", "display_name": "P Moran", "link": "https://stackoverflow.com/users/1801968/p-moran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 281, "favorite_count": 0, "accepted_answer_id": 50381200, "answer_count": 1, "score": 1, "last_activity_date": 1526512485, "creation_date": 1526507770, "last_edit_date": 1526512485, "question_id": 50380475, "link": "https://stackoverflow.com/questions/50380475/what-is-wrong-with-the-callback-mechanism-in-pyqt5-qt3dcore-using-qt-example", "title": "What is wrong with the callback mechanism in PyQt5.Qt3DCore using QT Example", "body": "<p>I have re-implemented the example Qt3D code in PyQt5/ Python3 from this site: <a href=\"https://doc.qt.io/qt-5/qt3d-basicshapes-cpp-main-cpp.html\" rel=\"nofollow noreferrer\">https://doc.qt.io/qt-5/qt3d-basicshapes-cpp-main-cpp.html</a></p>\n\n<p>Although the entities are rendered correctly, the callbacks are not working.\nWhen I click the checkbox items, the callbacks are not activated. I've tried various things (pyqtSlots, pyqtSignal decoratos and so on but I cant figure it out. See the leading comments for the requirements.txt file and the python version. </p>\n\n<p>What am I doing wrong? Any suggestions would be greatly appreciated.</p>\n\n<pre><code>    #\n#\n#  Copyright (C) 2014 Klaralvdalens Datakonsult AB (KDAB).\n#  Contact: https:#www.qt.io/licensing/\n#\n#  This file is part of the Qt3D module of the Qt Toolkit.\n#\n#  $QT_BEGIN_LICENSE:BSD$\n#  Commercial License Usage\n#  Licensees holding valid commercial Qt licenses may use this file in\n#  accordance with the commercial license agreement provided with the\n#  Software or, alternatively, in accordance with the terms contained in\n#  a written agreement between you and The Qt Company. For licensing terms\n#  and conditions see https:#www.qt.io/terms-conditions. For further\n#  information use the contact form at https:#www.qt.io/contact-us.\n#\n#  BSD License Usage\n#  Alternatively, you may use this file under the terms of the BSD license\n#  as follows:\n#\n#  \"Redistribution and use in source and binary forms, with or without\n#  modification, are permitted provided that the following conditions are\n#  met:\n#    * Redistributions of source code must retain the above copyright\n#      notice, this list of conditions and the following disclaimer.\n#    * Redistributions in binary form must reproduce the above copyright\n#      notice, this list of conditions and the following disclaimer in\n#      the documentation and/or other materials provided with the\n#      distribution.\n#    * Neither the name of The Qt Company Ltd nor the names of its\n#      contributors may be used to endorse or promote products derived\n#      from this software without specific prior written permission.\n#\n#\n#  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n#  \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n#  LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n#  A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n#  OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n#  SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n#  LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES\n#  LOSS OF USE,\n#  DATA, OR PROFITS\n#  OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n#  THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n#  (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n#  OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\"\n#\n#  $QT_END_LICENSE$\n#\n#\n\n# See\n# https://doc.qt.io/qt-5/qt3d-basicshapes-cpp-scenemodifier-cpp.html\n#   and\n# https://doc.qt.io/qt-5/qt3d-basicshapes-cpp-main-cpp.html\n\n# Use this requirements.txt\n###########################################\n# PyQt3D==5.10.1\n# PyQt5==5.10.1\n# pyqt5-tools==5.9.0.1.2\n# QScintilla==2.10.4\n# sip==4.19.8\n\n# Python version:\n#  Python 3.6.5 (v3.6.5:f59c0932b4, Mar 28 2018, 16:07:46) [MSC v.1900 32 bit (Intel)] on win32\n\nfrom PyQt5.QtWidgets import QApplication, QWidget, QHBoxLayout, QCheckBox, QCommandLinkButton, \\\n    QVBoxLayout\nfrom PyQt5.Qt import Qt as _Qt\nfrom PyQt5.QtGui import QColor, QVector3D, QQuaternion\nfrom PyQt5.Qt3DInput import QInputAspect\nfrom PyQt5.Qt3DExtras import QTorusMesh, QPhongMaterial, QConeMesh, QCylinderMesh, \\\n    QCuboidMesh, QPlaneMesh, QSphereMesh, Qt3DWindow, QFirstPersonCameraController\nfrom PyQt5.Qt3DRender import QPointLight\nfrom PyQt5.Qt3DCore import QEntity, QTransform\nfrom PyQt5.QtCore import QSize, pyqtSlot, pyqtSignal\n\nimport sys\n\n\nclass SceneModifier(QEntity):\n    def __init__(self, rootEntity):\n        self.m_rootEntity = rootEntity\n        # Torus shape data\n        self.m_torus = QTorusMesh()\n        self.m_torus.setRadius(1.0)\n        self.m_torus.setMinorRadius(0.4)\n        self.m_torus.setRings(100)\n        self.m_torus.setSlices(20)\n\n        # TorusMesh Transform\n        self.torusTransform = QTransform()\n        self.torusTransform.setScale(2.0)\n        self.torusTransform.setRotation(QQuaternion.fromAxisAndAngle(QVector3D(0.0, 1.0, 0.0), 25.0))\n        self.torusTransform.setTranslation(QVector3D(5.0, 4.0, 0.0))\n\n        self.torusMaterial = QPhongMaterial()\n        self.torusMaterial.setDiffuse(QColor(0xbeb32b))\n\n        # Torus\n        self.m_torusEntity = QEntity(self.m_rootEntity)\n        self.m_torusEntity.addComponent(self.m_torus)\n        self.m_torusEntity.addComponent(self.torusMaterial)\n        self.m_torusEntity.addComponent(self.torusTransform)\n\n        # self.cone shape data\n        self.cone = QConeMesh()\n        self.cone.setTopRadius(0.5)\n        self.cone.setBottomRadius(1)\n        self.cone.setLength(3)\n        self.cone.setRings(50)\n        self.cone.setSlices(20)\n\n        # ConeMesh Transform\n        self.coneTransform = QTransform()\n        self.coneTransform.setScale(1.5)\n        self.coneTransform.setRotation(QQuaternion.fromAxisAndAngle(QVector3D(1.0, 0.0, 0.0), 45.0))\n        self.coneTransform.setTranslation(QVector3D(0.0, 4.0, -1.5))\n\n        self.coneMaterial = QPhongMaterial()\n        self.coneMaterial.setDiffuse(QColor(0x928327))\n\n        # Cone\n        self.m_coneEntity = QEntity(self.m_rootEntity)\n        self.m_coneEntity.addComponent(self.cone)\n        self.m_coneEntity.addComponent(self.coneMaterial)\n        self.m_coneEntity.addComponent(self.coneTransform)\n\n        # Cylinder shape data\n        self.cylinder = QCylinderMesh()\n        self.cylinder.setRadius(1)\n        self.cylinder.setLength(3)\n        self.cylinder.setRings(100)\n        self.cylinder.setSlices(20)\n\n        # CylinderMesh Transform\n        self.cylinderTransform = QTransform()\n        self.cylinderTransform.setScale(1.5)\n        self.cylinderTransform.setRotation(QQuaternion.fromAxisAndAngle(QVector3D(1.0, 0.0, 0.0), 45.0))\n        self.cylinderTransform.setTranslation(QVector3D(-5.0, 4.0, -1.5))\n\n        self.cylinderMaterial = QPhongMaterial()\n        self.cylinderMaterial.setDiffuse(QColor(0x928327))\n\n        # Cylinder\n        self.m_cylinderEntity = QEntity(self.m_rootEntity)\n        self.m_cylinderEntity.addComponent(self.cylinder)\n        self.m_cylinderEntity.addComponent(self.cylinderMaterial)\n        self.m_cylinderEntity.addComponent(self.cylinderTransform)\n\n        # Cuboid shape data\n        self.cuboid = QCuboidMesh()\n\n        # CuboidMesh Transform\n        self.cuboidTransform = QTransform()\n        self.cuboidTransform.setScale(4.0)\n        self.cuboidTransform.setTranslation(QVector3D(5.0, -4.0, 0.0))\n\n        self.cuboidMaterial = QPhongMaterial()\n        self.cuboidMaterial.setDiffuse(QColor(0x665423))\n\n        #Cuboid\n        self.m_cuboidEntity = QEntity(self.m_rootEntity)\n        self.m_cuboidEntity.addComponent(self.cuboid)\n        self.m_cuboidEntity.addComponent(self.cuboidMaterial)\n        self.m_cuboidEntity.addComponent(self.cuboidTransform)\n\n        # Plane shape data\n        self.planeMesh = QPlaneMesh()\n        self.planeMesh.setWidth(2)\n        self.planeMesh.setHeight(2)\n\n        # Plane mesh transform\n        self.planeTransform = QTransform()\n        self.planeTransform.setScale(1.3)\n        self.planeTransform.setRotation(QQuaternion.fromAxisAndAngle(QVector3D(1.0, 0.0, 0.0), 45.0))\n        self.planeTransform.setTranslation(QVector3D(0.0, -4.0, 0.0))\n\n        self.planeMaterial = QPhongMaterial()\n        self.planeMaterial.setDiffuse(QColor(0xa69929))\n\n        # Plane\n        self.m_planeEntity = QEntity(self.m_rootEntity)\n        self.m_planeEntity.addComponent(self.planeMesh)\n        self.m_planeEntity.addComponent(self.planeMaterial)\n        self.m_planeEntity.addComponent(self.planeTransform)\n\n        # Sphere shape data\n        self.sphereMesh = QSphereMesh()\n        self.sphereMesh.setRings(20)\n        self.sphereMesh.setSlices(20)\n        self.sphereMesh.setRadius(2)\n\n        # Sphere mesh transform\n        self.sphereTransform = QTransform()\n\n        self.sphereTransform.setScale(1.3)\n        self.sphereTransform.setTranslation(QVector3D(-5.0, -4.0, 0.0))\n\n        self.sphereMaterial = QPhongMaterial()\n        self.sphereMaterial.setDiffuse(QColor(0xa69929))\n\n        # Sphere\n        self.m_sphereEntity = QEntity(self.m_rootEntity)\n        self.m_sphereEntity.addComponent(self.sphereMesh)\n        self.m_sphereEntity.addComponent(self.sphereMaterial)\n        self.m_sphereEntity.addComponent(self.sphereTransform)\n\n    def enableTorus(self, enabled):\n        print(\"set enabled\")\n        self.m_torusEntity.setEnabled(enabled)\n\n    def enableCone(self, enabled):\n        self.m_coneEntity.setEnabled(enabled)\n\n    def enableCylinder(self, enabled):\n        self.m_cylinderEntity.setEnabled(enabled)\n\n    def enableCuboid(self, enabled):\n        self.m_cuboidEntity.setEnabled(enabled)\n\n    def enablePlane(self, enabled):\n        self.m_planeEntity.setEnabled(enabled)\n\n    def enableSphere(self, enabled):\n        self.m_sphereEntity.setEnabled(enabled)\n\n\nif __name__ == \"__main__\":\n\n    app = QApplication(sys.argv)\n    view = Qt3DWindow()\n    view.defaultFrameGraph().setClearColor(QColor(0x4d4d4f))\n    container = QWidget.createWindowContainer(view)\n    screenSize = view.screen().size()\n    container.setMinimumSize(200, 100)\n    container.setMaximumSize(screenSize)\n\n    widget = QWidget()\n    hLayout = QHBoxLayout(widget)\n    vLayout = QVBoxLayout()\n    vLayout.setAlignment(_Qt.AlignTop)\n    hLayout.addWidget(container, 1)\n    hLayout.addLayout(vLayout)\n\n    widget.setWindowTitle(\"Basic shapes\")\n\n    input = QInputAspect()\n    view.registerAspect(input)\n\n    # Root entity\n    rootEntity = QEntity()\n\n    # Camera\n    cameraEntity = view.camera()\n\n    cameraEntity.lens().setPerspectiveProjection(45.0, 16.0/9.0, 0.1, 1000.0)\n    cameraEntity.setPosition(QVector3D(0, 0, 20.0))\n    cameraEntity.setUpVector(QVector3D(0, 1, 0))\n    cameraEntity.setViewCenter(QVector3D(0, 0, 0))\n\n    lightEntity = QEntity(rootEntity)\n    light = QPointLight(lightEntity)\n    light.setColor(_Qt.white)\n    light.setIntensity(1)\n    lightEntity.addComponent(light)\n    lightTransform = QTransform(lightEntity)\n    lightTransform.setTranslation(cameraEntity.position())\n    lightEntity.addComponent(lightTransform)\n\n    # For camera controls\n    camController = QFirstPersonCameraController(rootEntity)\n    camController.setCamera(cameraEntity)\n\n    # Scenemodifier\n    modifier = SceneModifier(rootEntity)\n\n    # Set root object of the scene\n    view.setRootEntity(rootEntity)\n\n    # Create control widgets\n    info = QCommandLinkButton()\n    info.setText(\"Qt3D ready-made meshes\")\n    info.setDescription(\"Qt3D provides several ready-made meshes, like torus, cylinder, cone, \"\n                                             \"cube, plane and sphere.\")\n    info.setIconSize(QSize(0,0))\n    torusCB = QCheckBox(widget)\n    torusCB.setChecked(True)\n    torusCB.setText(\"Torus\")\n\n    coneCB = QCheckBox(widget)\n    coneCB.setChecked(True)\n    coneCB.setText(\"Cone\")\n\n    cylinderCB = QCheckBox(widget)\n    cylinderCB.setChecked(True)\n    cylinderCB.setText(\"Cylinder\")\n\n    cuboidCB = QCheckBox(widget)\n    cuboidCB.setChecked(True)\n    cuboidCB.setText(\"Cuboid\")\n\n    planeCB = QCheckBox(widget)\n    planeCB.setChecked(True)\n    planeCB.setText(\"Plane\")\n\n    sphereCB = QCheckBox(widget)\n    sphereCB.setChecked(True)\n    sphereCB.setText(\"Sphere\")\n\n    vLayout.addWidget(info)\n    vLayout.addWidget(torusCB)\n    vLayout.addWidget(coneCB)\n    vLayout.addWidget(cylinderCB)\n    vLayout.addWidget(cuboidCB)\n    vLayout.addWidget(planeCB)\n    vLayout.addWidget(sphereCB)\n\n    torusCB.stateChanged.connect(modifier.enableTorus)\n    coneCB.stateChanged.connect(modifier.enableCone)\n    cylinderCB.stateChanged.connect(modifier.enableCylinder)\n    cuboidCB.stateChanged.connect(modifier.enableCuboid)\n    planeCB.stateChanged.connect(modifier.enablePlane)\n    sphereCB.stateChanged.connect(modifier.enableSphere)\n\n    torusCB.setChecked(True)\n    coneCB.setChecked(True)\n    cylinderCB.setChecked(True)\n    cuboidCB.setChecked(True)\n    planeCB.setChecked(True)\n    sphereCB.setChecked(True)\n    widget.show()\n    widget.resize(1200, 800)\n\n    sys.exit(app.exec())\n</code></pre>\n\n<p>This is the rendered image:</p>\n\n<p><a href=\"https://i.stack.imgur.com/IUMee.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IUMee.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "c++", "xcode", "lldb"], "answers": [{"comments": [{"owner": {"reputation": 20083, "user_id": 2465073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0f7ba796598ce99fe9d17b66c119b00?s=128&d=identicon&r=PG", "display_name": "Jim Ingham", "link": "https://stackoverflow.com/users/2465073/jim-ingham"}, "edited": false, "score": 0, "creation_date": 1526511143, "post_id": 50381010, "comment_id": 87778154, "body": "OTOH, it shouldn&#39;t be terribly hard to make this work, since the internal classes you would have to shim to the SB API are pretty well established.  If somebody was eager for an opportunity to do a little lldb hacking..."}, {"owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "edited": false, "score": 0, "creation_date": 1526550928, "post_id": 50381010, "comment_id": 87792561, "body": "I just started investigating the extension possibilities of lldb, so I know pretty little about it. Anyway, this means that I have to check out and extend lldb source code, build it on my own and deploy it to the development environments of each developer, right?"}, {"owner": {"reputation": 20083, "user_id": 2465073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0f7ba796598ce99fe9d17b66c119b00?s=128&d=identicon&r=PG", "display_name": "Jim Ingham", "link": "https://stackoverflow.com/users/2465073/jim-ingham"}, "reply_to_user": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "edited": false, "score": 2, "creation_date": 1526585709, "post_id": 50381010, "comment_id": 87814309, "body": "The facility you want to have present would have to be built into lldb since it is currently missing in the Python layer.  The lldb development community is very helpful, patches are welcome.  There is always a couple rounds of helpful suggestions during patch review, but sound patches get into the tree pretty quickly.  Then you would have to wait for the next release cycle to get the fix into official binaries.  That&#39;s on the order of a couple of times a year.  You would have to support this with your own releases till an official version is released, but that should be temporary."}], "tags": [], "owner": {"reputation": 20083, "user_id": 2465073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0f7ba796598ce99fe9d17b66c119b00?s=128&d=identicon&r=PG", "display_name": "Jim Ingham", "link": "https://stackoverflow.com/users/2465073/jim-ingham"}, "is_accepted": true, "score": 2, "last_activity_date": 1526511021, "creation_date": 1526511021, "answer_id": 50381010, "question_id": 50380468, "link": "https://stackoverflow.com/questions/50380468/lldb-implement-custom-command-taking-user-input/50381010#50381010", "title": "lldb: implement custom command taking user input", "body": "<p>Internally lldb keeps a stack of \"I/O Handlers\" and so for instance <code>expr</code> just pushes the \"Expr I/O Handler\" onto the stack, collects the input till it is done and then pops itself off the stack and runs the command.</p>\n\n<p>There's what looks like a first sketch of an SB class (SBInputReader) to do this in the C++ SB API's but I don't think it's complete and it isn't currently exposed to Python.  So I don't think there's enough wired up for you do to this from Python yet.</p>\n"}], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 259, "favorite_count": 0, "accepted_answer_id": 50381010, "answer_count": 1, "score": 2, "last_activity_date": 1526511021, "creation_date": 1526507729, "question_id": 50380468, "link": "https://stackoverflow.com/questions/50380468/lldb-implement-custom-command-taking-user-input", "title": "lldb: implement custom command taking user input", "body": "<p>I am using python to extend lldb by a custom command <code>gm</code>, which calls a C++ - function <code>cli(const char* params)</code> then.\nSo one can pause xcode (thereby launching lldb) and type...</p>\n\n<pre><code>(lldb) gm set value\n</code></pre>\n\n<p>to trigger a call <code>cli(\"set value\")</code> then.</p>\n\n<p>C++-function <code>cli</code> can make use of <code>std::cout</code> to print some state, but I cannot make this function \"interactive\", i.e. consuming user input:</p>\n\n<pre><code>void cli(const char* params) {   \n    std::cout &lt;&lt; \"params: \" &lt;&lt; params &lt;&lt; std::endl;  // works\n\n    std::string userInput;\n    std::cin &gt;&gt; userInput; // does not work; is simply ignored\n}\n</code></pre>\n\n<p><strong>Question:</strong> How can I make <code>cli</code> interactive in a sense that it consumes (and further processes) user input?</p>\n\n<hr>\n\n<p>To further show what I'd like to achieve: There are built in lldb-commands like <code>expr</code> (without arguments) which enter into an interactive mode:</p>\n\n<pre><code>(lldb) expr\nEnter expressions, then terminate with an empty line to evaluate:\n1 2+2\n2 \n(int) $0 = 4\n</code></pre>\n\n<p>I'd like to have similar behaviour in my own command, i.e. typing in <code>gm</code> and being then asked interactively for params:</p>\n\n<pre><code>(lldb) gm\nEnter generic model parameters; Terminate interactive mode with \"end\":\n1 set value\n2 params: set value\n3 end\n</code></pre>\n\n<p>Just for completeness, see the python script currently used for calling the <code>cli</code>-function:</p>\n\n<pre><code>def gm(debugger, command, result, internal_dict):\n\n    cmd = \"po cli(\\\"\"+command+\"\\\")\"\n    lldb.debugger.HandleCommand(cmd)\n\n# And the initialization code to add your commands \ndef __lldb_init_module(debugger, internal_dict):\n    debugger.HandleCommand('command script add -f gm.gm gm')\n    print 'The \"gm\" python command has been installed and is ready for use.'\n</code></pre>\n\n<p>and the line in the <code>.lldbinit</code>-file registering this script:</p>\n\n<pre><code>command script import ~/my_commands.py\n</code></pre>\n"}, {"tags": ["python", "bokeh"], "answers": [{"comments": [{"owner": {"reputation": 920, "user_id": 8412027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/74QPv.png?s=128&g=1", "display_name": "Joris", "link": "https://stackoverflow.com/users/8412027/joris"}, "edited": false, "score": 0, "creation_date": 1528621975, "post_id": 50388956, "comment_id": 88571022, "body": "when you downvote, please comment why - i know this isn&#39;t the wanted answer to the question of P B, but it is the best answer to my knowledge, and it works. When you know a better solution post it."}], "tags": [], "owner": {"reputation": 920, "user_id": 8412027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/74QPv.png?s=128&g=1", "display_name": "Joris", "link": "https://stackoverflow.com/users/8412027/joris"}, "is_accepted": true, "score": 1, "last_activity_date": 1526552229, "creation_date": 1526552229, "answer_id": 50388956, "question_id": 50380440, "link": "https://stackoverflow.com/questions/50380440/is-it-possible-to-add-a-title-to-checkboxbuttongroup-objects-in-bokeh/50388956#50388956", "title": "Is it possible to add a title to checkboxbuttongroup objects in Bokeh?", "body": "<p>My way of giving a CheckboxButtonGroup a title is creating a seperate text widget  (Div/Paragaph/PreText) and placing it above the CheckboxButtonGroup.</p>\n"}], "owner": {"reputation": 23, "user_id": 9796833, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4548a9bed33f01c441ade70ce4e1ff83?s=128&d=identicon&r=PG&f=1", "display_name": "P B", "link": "https://stackoverflow.com/users/9796833/p-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 372, "favorite_count": 0, "accepted_answer_id": 50388956, "answer_count": 1, "score": 2, "last_activity_date": 1526552229, "creation_date": 1526507539, "question_id": 50380440, "link": "https://stackoverflow.com/questions/50380440/is-it-possible-to-add-a-title-to-checkboxbuttongroup-objects-in-bokeh", "title": "Is it possible to add a title to checkboxbuttongroup objects in Bokeh?", "body": "<p>I'm trying to create a dashboard with a number of RangeSlider and CheckboxButtonGroup widgets as filters for a ColumnDataSource object. I'm able to put a title on the RangeSliders but CheckboxButtonGroup objects don't have that attribute.</p>\n\n<p>My examples are all from the widgets documentation: <a href=\"https://bokeh.pydata.org/en/latest/docs/user_guide/interaction/widgets.html\" rel=\"nofollow noreferrer\">link here for reference</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/wKD3E.png\" rel=\"nofollow noreferrer\">RangeSlider example</a>, <a href=\"https://i.stack.imgur.com/cnp9G.png\" rel=\"nofollow noreferrer\">CheckboxButtonGroup example</a></p>\n\n<p>I thought name might be the right attribute but that doesn't appear to work as I thought. Is there some sort of approach someone has implemented to get similar functionality? Or would I just be better off using a MultiSelect as it has a title and similar function?</p>\n\n<p><a href=\"https://i.stack.imgur.com/FCq63.png\" rel=\"nofollow noreferrer\">MultiSelect example</a></p>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 621, "user_id": 1888143, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/J6D1m.jpg?s=128&g=1", "display_name": "JustOneMan", "link": "https://stackoverflow.com/users/1888143/justoneman"}, "edited": false, "score": 0, "creation_date": 1526508335, "post_id": 50380458, "comment_id": 87777320, "body": "Thanks. It worked with little correction: data[data.index&gt;=&#39;2018-01-01&#39;][&quot;4. close&quot;].plot()"}], "tags": [], "owner": {"reputation": 7235, "user_id": 3734914, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/JAGw8.jpg?s=128&g=1", "display_name": "Batman", "link": "https://stackoverflow.com/users/3734914/batman"}, "is_accepted": true, "score": 1, "last_activity_date": 1526507660, "creation_date": 1526507660, "answer_id": 50380458, "question_id": 50380394, "link": "https://stackoverflow.com/questions/50380394/how-to-plot-timeseries-from-particular-starting-date/50380458#50380458", "title": "How to plot timeseries from particular starting date?", "body": "<p>What's <code>data</code>? I assume it's a <code>DataFrame</code>.  </p>\n\n<pre><code>start_ts = pd.Timestamp(\"20180101\")\ndata[data.index&gt;=start_ts][\"4. close\"].plot()\nplt.show()\n</code></pre>\n"}], "owner": {"reputation": 621, "user_id": 1888143, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/J6D1m.jpg?s=128&g=1", "display_name": "JustOneMan", "link": "https://stackoverflow.com/users/1888143/justoneman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 0, "accepted_answer_id": 50380458, "answer_count": 1, "score": 1, "last_activity_date": 1526507660, "creation_date": 1526507233, "question_id": 50380394, "link": "https://stackoverflow.com/questions/50380394/how-to-plot-timeseries-from-particular-starting-date", "title": "How to plot timeseries from particular starting date?", "body": "<pre><code>from alpha_vantage.timeseries import TimeSeries\n\nts = TimeSeries(key='YOUR_API_KEY', output_format='pandas')\ndata, meta_data = ts.get_daily('SPX')\n\ndata['4. close'].plot()\nplt.tight_layout()\n\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/MHYVx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MHYVx.png\" alt=\"chart\"></a></p>\n\n<p>How to get new data timeseries starting from particular date? Or how to plot chart from particular starting datetime?</p>\n"}, {"tags": ["python", "list"], "answers": [{"comments": [{"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 0, "creation_date": 1526507601, "post_id": 50380400, "comment_id": 87777061, "body": "Not sure why you got the downvote -- this is exactly the best way to accomplish this."}, {"owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "reply_to_user": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 0, "creation_date": 1526507756, "post_id": 50380400, "comment_id": 87777109, "body": "@AdamSmith Thank you. This solution is the cleanest way I can think of to solve this problem."}, {"owner": {"reputation": 706, "user_id": 7662496, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/103870736811469/picture?type=large", "display_name": "Manuel Santi", "link": "https://stackoverflow.com/users/7662496/manuel-santi"}, "edited": false, "score": 0, "creation_date": 1526507866, "post_id": 50380400, "comment_id": 87777145, "body": "thanks for your answer but if i have for example l1=[[&#39;var1&#39;,&#39;7&#39;],[&#39;var2&#39;,&#39;2&#39;],[&#39;var2&#39;,&#39;5&#39;]] the result is [[[&#39;var1&#39;, &#39;7&#39;], [&#39;var2&#39;, &#39;5&#39;]], [[&#39;var2&#39;, &#39;2&#39;], [&#39;var2&#39;, &#39;5&#39;]]] and not [[[&#39;var1&#39;, &#39;7&#39;], [&#39;var2&#39;, &#39;2&#39;]], [[&#39;var1&#39;, &#39;7&#39;], [&#39;var2&#39;, &#39;5&#39;]]] like i would"}, {"owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "reply_to_user": {"reputation": 706, "user_id": 7662496, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/103870736811469/picture?type=large", "display_name": "Manuel Santi", "link": "https://stackoverflow.com/users/7662496/manuel-santi"}, "edited": false, "score": 1, "creation_date": 1526507970, "post_id": 50380400, "comment_id": 87777187, "body": "@ManuelSanti I am not sure I understand the logic as to how that list is created. Can you explain?"}, {"owner": {"reputation": 706, "user_id": 7662496, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/103870736811469/picture?type=large", "display_name": "Manuel Santi", "link": "https://stackoverflow.com/users/7662496/manuel-santi"}, "edited": false, "score": 0, "creation_date": 1526508253, "post_id": 50380400, "comment_id": 87777297, "body": "thanks @Ajax1234, i would a list where not unique var/val are spltted in different list like in previous example. var2 is a not unique value in original list hence in new list have to be associated to var1  for every list in list"}], "tags": [], "owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "is_accepted": false, "score": 2, "last_activity_date": 1526507301, "creation_date": 1526507301, "answer_id": 50380400, "question_id": 50380383, "link": "https://stackoverflow.com/questions/50380383/python-create-a-list-of-lists-groupped-from-unique-values/50380400#50380400", "title": "Python create a list of lists groupped from unique values", "body": "<p>You can use unpacking in Python3:</p>\n\n<pre><code>l1 = [['var1', '2'], ['var1', '5'], ['var1', 'a'], ['var2', '90']]\n*l, _val = l1\nl2 = [[i, _val] for i in l]\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[[['var1', '2'], ['var2', '90']], [['var1', '5'], ['var2', '90']], [['var1', 'a'], ['var2', '90']]]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 0, "creation_date": 1526508868, "post_id": 50380601, "comment_id": 87777473, "body": "bonus points to anyone who can figure out why you need to cast <code>grp</code> to a list. It feels like <code>product</code> should be handling that internally but it doesn&#39;t seem to in this case (but does for more trivial examples!)"}], "tags": [], "owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "is_accepted": true, "score": 2, "last_activity_date": 1526508549, "creation_date": 1526508549, "answer_id": 50380601, "question_id": 50380383, "link": "https://stackoverflow.com/questions/50380383/python-create-a-list-of-lists-groupped-from-unique-values/50380601#50380601", "title": "Python create a list of lists groupped from unique values", "body": "<p>looks like you need to start by grouping against your first elements</p>\n\n<pre><code>from itertools import groupby, product\nfrom operator import itemgetter\n\ngrps = [list(grp) for _, grp in groupby(l1, key=itemgetter(0))]\n# itemgetter(0) is the default, but this is somewhat more explicit.\n</code></pre>\n\n<p>then use <code>itertools.product</code> over those groups</p>\n\n<pre><code>result = product(*grps)\n</code></pre>\n\n<p>this will give you:</p>\n\n<pre><code>&gt;&gt;&gt; l1 = [['var1', '2'], ['var1', '5'], ['var1', 'a'], ['var2', '90']]\nresult = [(['var1', '2'], ['var2', '90']), (['var1', '5'], ['var2', '90']), (['var1', 'a'], ['var2', '90'])]\n&gt;&gt;&gt; l2 = [['var1', '7'], ['var2', '2'], ['var2', '5']]\nresult = [(['var1', '7'], ['var2', '2']), (['var1', '7'], ['var2', '5'])]\n</code></pre>\n\n<p>Your final function then becomes:</p>\n\n<pre><code>from itertools import groupby, product\nfrom operator import itemgetter\n\ndef product_by_grouping(lst):\n    grps = [list(grp) for _, grp in groupby(lst, key=itemgetter(0))]\n    return product(*grps)\n</code></pre>\n"}], "owner": {"reputation": 706, "user_id": 7662496, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/103870736811469/picture?type=large", "display_name": "Manuel Santi", "link": "https://stackoverflow.com/users/7662496/manuel-santi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 50380601, "answer_count": 2, "score": 1, "last_activity_date": 1526508549, "creation_date": 1526507193, "last_edit_date": 1526507240, "question_id": 50380383, "link": "https://stackoverflow.com/questions/50380383/python-create-a-list-of-lists-groupped-from-unique-values", "title": "Python create a list of lists groupped from unique values", "body": "<p>In my code i have a list like this:</p>\n\n<pre><code>l1 = [['var1', '2'], ['var1', '5'], ['var1', 'a'], ['var2', '90']]\n</code></pre>\n\n<p>i try to generate a code that create starting from l1 a list like that:</p>\n\n<pre><code>[[['var1','2'],['var2','90']],[['var1','5'],['var2','90']],[['var1','a'], ['var2','90']]]\n</code></pre>\n\n<p>in practice three different list based on unique value but i have no idea how to perform this task,\nIs there a particular python func for achieve this result?</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["python", "scipy", "sparse-matrix"], "comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 1, "creation_date": 1526507576, "post_id": 50380357, "comment_id": 87777051, "body": "That&#39;s essentially the way to do it.  You could change the <code>A.data[:]=0</code> array directly, but you still need <code>eliminate_zeros</code> to change the sparsity structure.   Making a new array by <code>*0</code> doesn&#39;t change sparsity either.  For sake of efficiency it doesn&#39;t change sparsity every time values are changed (to 0).  Changing zeros to nonzero does change sparsity, and it gives you a warning."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1526517559, "post_id": 50380357, "comment_id": 87779591, "body": "<a href=\"https://stackoverflow.com/questions/37674435/scipy-sparse-matrix-become-dense-matrix-after-assignment\" title=\"scipy sparse matrix become dense matrix after assignment\">stackoverflow.com/questions/37674435/&hellip;</a>; <a href=\"https://stackoverflow.com/questions/41505416/efficient-way-to-set-elements-to-zero-where-mask-is-true-on-scipy-sparse-matrix\" title=\"efficient way to set elements to zero where mask is true on scipy sparse matrix\">stackoverflow.com/questions/41505416/&hellip;</a>; <a href=\"https://stackoverflow.com/questions/34719588/scipy-sparse-matrix-assignment-using-only-stored-elements\" title=\"scipy sparse matrix assignment using only stored elements\">stackoverflow.com/questions/34719588/&hellip;</a>"}], "owner": {"reputation": 989, "user_id": 4157821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b62eeaf4a04ff29dc155057561c0d33?s=128&d=identicon&r=PG&f=1", "display_name": "tgordon18", "link": "https://stackoverflow.com/users/4157821/tgordon18"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1026, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1526507053, "creation_date": 1526507053, "question_id": 50380357, "link": "https://stackoverflow.com/questions/50380357/scipy-sparse-matrix-how-to-remove-an-element-from-matrix", "title": "SciPy Sparse Matrix: How to Remove an Element from Matrix", "body": "<p>What is the most efficient way to remove a single non-zero element from a SciPy sparse matrix? For example, if I have the following:</p>\n\n<pre><code>A = csr_matrix((2, 2))\nA[1, 1] = 1\nprint(A.A)\n</code></pre>\n\n<p>Which gives a matrix with all 0s and one 1 at position (0,0), how can I remove that 1 and reset it to a zero? Here is a naive approach that works:</p>\n\n<pre><code>A[1, 1] = 0\nA.eliminate_zeros()\n</code></pre>\n\n<p>But there must be a better way...</p>\n"}, {"tags": ["python", "pandas", "datetime", "dataframe"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 9802775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c2974b1ee986556f7ef6248802185e1?s=128&d=identicon&r=PG&f=1", "display_name": "micdanspe", "link": "https://stackoverflow.com/users/9802775/micdanspe"}, "edited": false, "score": 0, "creation_date": 1526583116, "post_id": 50380338, "comment_id": 87812987, "body": "This worked great, however not able to get the new updated data to save correctly as a new file.  import pandas as pd from pandas import ExcelWriter from datetime import datetime  df = pd.read_excel(&quot;location/of/masterfile.xlsx&quot;)  df[pd.to_datetime(df.date, errors=&#39;coerce&#39;) &gt;= pd.to_datetime(&#39;today&#39;)]  writer = ExcelWriter(&#39;location/of/newfile.xlsx&#39;) df.to_excel(writer,&#39;Sheet1&#39;) writer.save()"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 23, "user_id": 9802775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c2974b1ee986556f7ef6248802185e1?s=128&d=identicon&r=PG&f=1", "display_name": "micdanspe", "link": "https://stackoverflow.com/users/9802775/micdanspe"}, "edited": false, "score": 0, "creation_date": 1526583470, "post_id": 50380338, "comment_id": 87813187, "body": "@micdanspe Try <code>df = df[pd.to_datetime(df.date, errors=&#39;coerce&#39;) &gt;= pd.to_datetime(&#39;today&#39;)]</code> and then save."}], "tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 5, "last_activity_date": 1526507951, "last_edit_date": 1526507951, "creation_date": 1526506985, "answer_id": 50380338, "question_id": 50380295, "link": "https://stackoverflow.com/questions/50380295/remove-rows-with-dates-older-than-today/50380338#50380338", "title": "Remove rows with dates older than &quot;today&quot;", "body": "<p>Pandas has spared no expense to make life easier for developers. Compare against <code>to_datetime('today')</code> and filter accordingly:</p>\n\n<pre><code>df[pd.to_datetime(df.date, errors='coerce') &gt;= pd.to_datetime('today')]\n\n                         date  battle_deaths\n1  2018-05-16 18:47:05.119994             25\n2  2018-05-16 18:47:05.178768             26\n3  2018-05-16 18:47:05.230071             15\n4  2018-05-16 18:47:05.230071             15\n5  2018-05-16 18:47:05.280592             14\n6  2018-05-16 18:47:05.332662             26\n7  2018-05-16 18:47:05.385109             25\n8  2018-05-16 18:47:05.436523             62\n9  2018-05-16 18:47:05.486877             41\n</code></pre>\n\n<p>This removes the 0<sup>th</sup> row. </p>\n"}], "owner": {"reputation": 23, "user_id": 9802775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c2974b1ee986556f7ef6248802185e1?s=128&d=identicon&r=PG&f=1", "display_name": "micdanspe", "link": "https://stackoverflow.com/users/9802775/micdanspe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 586, "favorite_count": 0, "accepted_answer_id": 50380338, "answer_count": 1, "score": 2, "last_activity_date": 1526507951, "creation_date": 1526506802, "last_edit_date": 1526507045, "question_id": 50380295, "link": "https://stackoverflow.com/questions/50380295/remove-rows-with-dates-older-than-today", "title": "Remove rows with dates older than &quot;today&quot;", "body": "<p>I have been searching around here and google and have found many examples that show how to remove old dates based on a non moving date variable but can not figure out how to remove rows of data based on today's date going forward. In the example below, how would I go about removing anything older than today's date (should be one value removed) then save it? The real source file will continue to get new data everyday and I will need to be removing everything older than 'today' date.</p>\n\n<pre><code>from datetime import datetime\n\nimport pandas as pd\n\ndata = {'date': ['2001-04-10 18:47:05.069722', '2018-05-16 18:47:05.119994', '2018-05-16 18:47:05.178768', '2018-05-16 18:47:05.230071', '2018-05-16 18:47:05.230071', '2018-05-16 18:47:05.280592', '2018-05-16 18:47:05.332662', '2018-05-16 18:47:05.385109', '2018-05-16 18:47:05.436523', '2018-05-16 18:47:05.486877'], \n        'battle_deaths': [34, 25, 26, 15, 15, 14, 26, 25, 62, 41]}\n\ndf = pd.DataFrame(data, columns = ['date', 'battle_deaths'])\n</code></pre>\n\n<p></p>\n\n<pre><code>df\n                         date  battle_deaths\n0  2001-04-10 18:47:05.069722             34\n1  2018-05-16 18:47:05.119994             25\n2  2018-05-16 18:47:05.178768             26\n3  2018-05-16 18:47:05.230071             15\n4  2018-05-16 18:47:05.230071             15\n5  2018-05-16 18:47:05.280592             14\n6  2018-05-16 18:47:05.332662             26\n7  2018-05-16 18:47:05.385109             25\n8  2018-05-16 18:47:05.436523             62\n9  2018-05-16 18:47:05.486877             41\n</code></pre>\n"}, {"tags": ["python", "logging", "bluetooth", "bluetooth-lowenergy"], "comments": [{"owner": {"reputation": 5895, "user_id": 2834978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05b09a797fd0c59d1627b30fb4cdba01?s=128&d=identicon&r=PG&f=1", "display_name": "Luis Mu&#241;oz", "link": "https://stackoverflow.com/users/2834978/luis-mu%c3%b1oz"}, "edited": false, "score": 0, "creation_date": 1526517039, "post_id": 50380264, "comment_id": 87779505, "body": "change your stream handler <code>logging.StreamHandler(sys.stdout)</code> to a file instead of stdout. Questions are encouraged to provide a <a href=\"https://stackoverflow.com/help/mcve\">Minimum Complete and Verifiable Example</a>, try to <a href=\"https://stackoverflow.com/help/how-to-ask\">improve</a> yours."}], "answers": [{"tags": [], "owner": {"reputation": 151, "user_id": 5384702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35845d18a275fa9d6d8723078521c19?s=128&d=identicon&r=PG", "display_name": "Fabs", "link": "https://stackoverflow.com/users/5384702/fabs"}, "is_accepted": false, "score": 0, "last_activity_date": 1526541003, "creation_date": 1526541003, "answer_id": 50385426, "question_id": 50380264, "link": "https://stackoverflow.com/questions/50380264/python-logging-to-terminal-redirect-to-workspace-file/50385426#50385426", "title": "python logging to terminal, redirect to workspace/file", "body": "<p>You simply use <code>logging.FileHandler()</code>. I tried to implement it in your method:</p>\n\n<pre><code>def pipe_logs_to_terminal(self, level=logging.INFO):\n    log_path = \".\"  # cwd\n    file_name = \"my_app\"\n    # configure root logger\n    api_logger = logging.getLogger(\"bgapi\")\n    api_logger.setLevel(level=level)\n    # set format\n    formatter = logging.Formatter(self._api._serial.portstr + ': %(asctime)s - %(name)s - %(levelname)s - %(message)s')\n    # configure file handler\n    file_handler = logging.FileHandler(\"{0}/{1}.log\".format(log_path, file_name))\n    file_handler.setFormatter(formatter)\n    api_logger.addHandler(file_handler)\n    # configure console handler\n    console_handler = logging.StreamHandler(sys.stdout)\n    console_handler.setFormatter(formatter)\n    api_logger.addHandler(console_handler)\n</code></pre>\n\n<p>Optionally you could omit the <code>console_handler</code> (called <code>term</code> in your example) part, if you choose to only pipe your logging into a file.</p>\n"}], "owner": {"reputation": 11, "user_id": 8916373, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ARWD_YtJ2Pg/AAAAAAAAAAI/AAAAAAAAAiU/cDpSS2WY6DM/photo.jpg?sz=128", "display_name": "Anton Weiss", "link": "https://stackoverflow.com/users/8916373/anton-weiss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1526541003, "creation_date": 1526506606, "last_edit_date": 1526516981, "question_id": 50380264, "link": "https://stackoverflow.com/questions/50380264/python-logging-to-terminal-redirect-to-workspace-file", "title": "python logging to terminal, redirect to workspace/file", "body": "<p>I started tinkering with logging and BLE. Now I got this piece of code I took from the bgapi package. I think I kind of understand how it works, but I'd like to see the output in a file or in the workspace. How would I achieve this?</p>\n\n<pre><code>def pipe_logs_to_terminal(self, level=logging.INFO):\n    term = logging.StreamHandler(sys.stdout)\n    formatter = logging.Formatter(self._api._serial.portstr + ': %(asctime)s - \n    %(name)s - %(levelname)s - %(message)s')\n    term.setFormatter(formatter)\n    api_logger = logging.getLogger(\"bgapi\")\n    api_logger.addHandler(term)\n    api_logger.setLevel(level=level)\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1526506618, "post_id": 50380247, "comment_id": 87776717, "body": "Cut the string in two parts, then join the second part to an <code>&#39;X&#39;</code>."}, {"owner": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 0, "creation_date": 1526507564, "post_id": 50380247, "comment_id": 87777047, "body": "Why the parentheses around the string?"}], "answers": [{"tags": [], "owner": {"reputation": 744, "user_id": 1762507, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f595119538d5934ae45af18cf7c67097?s=128&d=identicon&r=PG", "display_name": "user1762507", "link": "https://stackoverflow.com/users/1762507/user1762507"}, "is_accepted": false, "score": 1, "last_activity_date": 1526506742, "creation_date": 1526506742, "answer_id": 50380283, "question_id": 50380247, "link": "https://stackoverflow.com/questions/50380247/how-to-change-the-1st-letter-of-the-string/50380283#50380283", "title": "How to change the 1st letter of the string?", "body": "<pre><code>astring = \"X\" + astring[1:]\n</code></pre>\n\n<p>This slices the string and adds the new start in the desired position </p>\n\n<p>More info on slicing can be found <a href=\"https://docs.python.org/3/tutorial/introduction.html#lists\" rel=\"nofollow noreferrer\">here</a> </p>\n\n<p>And you can just think of strings as immutable lists </p>\n"}, {"comments": [{"owner": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 0, "creation_date": 1526507462, "post_id": 50380315, "comment_id": 87777002, "body": "You can&#39;t say if the string will be overwritten, that&#39;s an implementation detail.  It might not even be garbage collected if there is another reference to the same string object, for example.  About all you can say is if the same name is used to refer to the new object then the reference count on the old object will be decremented."}, {"owner": {"reputation": 464, "user_id": 7886653, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ad4f1040b9d34c3fba44c42ec7920fe?s=128&d=identicon&r=PG&f=1", "display_name": "AmphotericLewisAcid", "link": "https://stackoverflow.com/users/7886653/amphotericlewisacid"}, "reply_to_user": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 0, "creation_date": 1526581005, "post_id": 50380315, "comment_id": 87811809, "body": "When I said that the name would be overwritten, I meant that the string variable would now point to a different object in memory. Whether the string object itself is removed is of course up to how garbage collection is handled. Should have been a bit clearer, sorry about that!  That said, the concept of the nature of the variable, and its relation to the object in memory is too low level for a question where OP is clearly still a beginner. It&#39;s a lot better here to just use the abstraction that the string is overwritten, and let the OP learn what&#39;s actually going on under the hood later."}], "tags": [], "owner": {"reputation": 464, "user_id": 7886653, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ad4f1040b9d34c3fba44c42ec7920fe?s=128&d=identicon&r=PG&f=1", "display_name": "AmphotericLewisAcid", "link": "https://stackoverflow.com/users/7886653/amphotericlewisacid"}, "is_accepted": false, "score": 0, "last_activity_date": 1526506916, "creation_date": 1526506916, "answer_id": 50380315, "question_id": 50380247, "link": "https://stackoverflow.com/questions/50380247/how-to-change-the-1st-letter-of-the-string/50380315#50380315", "title": "How to change the 1st letter of the string?", "body": "<p>In Python, strings are immutable. \"Immutable\" means that they cannot be changed once they are assigned, only deleted.</p>\n\n<p>You must make a new string. If the new string variable has the same name as the old string variable, it will be overwritten.</p>\n"}, {"comments": [{"owner": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 0, "creation_date": 1526507543, "post_id": 50380409, "comment_id": 87777034, "body": "Why the parentheses around the string?"}, {"owner": {"reputation": 13, "user_id": 9492779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/442794b93da8cc76f8d1c65529ecdf7c?s=128&d=identicon&r=PG&f=1", "display_name": "Puneet Singh", "link": "https://stackoverflow.com/users/9492779/puneet-singh"}, "reply_to_user": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 0, "creation_date": 1526509372, "post_id": 50380409, "comment_id": 87777653, "body": "It is not necessary but I am used to it."}], "tags": [], "owner": {"reputation": 13, "user_id": 9492779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/442794b93da8cc76f8d1c65529ecdf7c?s=128&d=identicon&r=PG&f=1", "display_name": "Puneet Singh", "link": "https://stackoverflow.com/users/9492779/puneet-singh"}, "is_accepted": false, "score": 0, "last_activity_date": 1526507380, "creation_date": 1526507380, "answer_id": 50380409, "question_id": 50380247, "link": "https://stackoverflow.com/questions/50380247/how-to-change-the-1st-letter-of-the-string/50380409#50380409", "title": "How to change the 1st letter of the string?", "body": "<pre><code>astring = (\"Hello World\")\nastring = \"X\" + astring[1:]\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user13398128"}, "is_accepted": false, "score": 0, "last_activity_date": 1614767948, "creation_date": 1614767948, "answer_id": 66455351, "question_id": 50380247, "link": "https://stackoverflow.com/questions/50380247/how-to-change-the-1st-letter-of-the-string/66455351#66455351", "title": "How to change the 1st letter of the string?", "body": "<pre><code>string = (&quot;Hello World&quot;) \nstring = string.replace(&quot;H&quot;,&quot;X&quot;)\nprint(string)\n</code></pre>\n<p>The replace() method will do exatly what it suggests: replace the letter in the first speech marks (H) with that in the second (X)!</p>\n"}], "owner": {"reputation": 1, "user_id": 9802562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/661b78fcb68a9e9de021bc13649ef54f?s=128&d=identicon&r=PG&f=1", "display_name": "Briggs Mabagos", "link": "https://stackoverflow.com/users/9802562/briggs-mabagos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "answer_count": 4, "score": -4, "last_activity_date": 1614767948, "creation_date": 1526506524, "last_edit_date": 1526506688, "question_id": 50380247, "link": "https://stackoverflow.com/questions/50380247/how-to-change-the-1st-letter-of-the-string", "title": "How to change the 1st letter of the string?", "body": "<p>Change the 1st letter of the world Hello which is \"H\" to \"X\"</p>\n\n<pre><code>astring = (\"Hello World\")\n</code></pre>\n\n<p>result:</p>\n\n<pre><code>astring = (\"Xello World\")\n</code></pre>\n"}, {"tags": ["python", "stream", "google-cloud-platform", "prefetch"], "comments": [{"owner": {"reputation": 413, "user_id": 757681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2f20fe1c2396cc5b0916e86f1834bcb?s=128&d=identicon&r=PG", "display_name": "CodeDreamer68", "link": "https://stackoverflow.com/users/757681/codedreamer68"}, "edited": false, "score": 0, "creation_date": 1576377943, "post_id": 50380237, "comment_id": 104879236, "body": "I am trying to figure this out myself. If you have figured this out, can you share your solution to save me some time?"}], "answers": [{"comments": [{"owner": {"reputation": 1012, "user_id": 9551246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1958ab4823553fb09e0c99f862736abf?s=128&d=identicon&r=PG&f=1", "display_name": "Rub&#233;n C.", "link": "https://stackoverflow.com/users/9551246/rub%c3%a9n-c"}, "edited": false, "score": 0, "creation_date": 1531383429, "post_id": 50399541, "comment_id": 89577895, "body": "I think you found the right method. Check here <a href=\"https://github.com/GoogleCloudPlatform/google-cloud-python/blob/d4d0abcab27b3f1aba9b56db4d643d5692230bd5/storage/google/cloud/storage/blob.py#L293\" rel=\"nofollow noreferrer\">the code</a> for further insight."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user9773014"}, "is_accepted": false, "score": 3, "last_activity_date": 1526586726, "creation_date": 1526586726, "answer_id": 50399541, "question_id": 50380237, "link": "https://stackoverflow.com/questions/50380237/reading-really-big-blobs-without-downloading-them-in-google-cloud-streaming/50399541#50399541", "title": "Reading really big blobs without downloading them in Google Cloud (streaming?)", "body": "<p>So a way I have found of doing this is by creating a file-like object in python then using the Google-Cloud API call .download_to_file() with that file-like object. </p>\n\n<p>This in essence streams data. \npython code looks something like this </p>\n\n<pre><code>def getStream(blob):\n    stream = open('myStream','wb', os.O_NONBLOCK)\n    streaming = blob.download_to_file(stream)\n</code></pre>\n\n<p>The os.O_NONBLOCK flag is so I can read while I'm writing to the file. \nI still haven't tested this with really big files so if anyone knows a better implementation or see's a potential failure with this please comment. \nThanks! </p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9773014"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1739, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1526586726, "creation_date": 1526506489, "question_id": 50380237, "link": "https://stackoverflow.com/questions/50380237/reading-really-big-blobs-without-downloading-them-in-google-cloud-streaming", "title": "Reading really big blobs without downloading them in Google Cloud (streaming?)", "body": "<p>please help! </p>\n\n<p><strong>[+] What I have:</strong> \nA lot of blobs in every bucket. Blobs can vary in size from being less than a Kilo-byte to being lots of Giga-bytes. </p>\n\n<p><strong>[+] What I'm trying to do:</strong>\nI need to be able to either stream the data in those blobs (like a buffer of size 1024 or something like that) or read them by chunks of a certain size in Python. The point is I don't think I can just do a bucket.get_blob() because if the blob was a TeraByte then I wouldn't be able to have it in physical memory. </p>\n\n<p><strong>[+] What I'm really trying to do:</strong> \nparse the information inside the blobs to identify key-words </p>\n\n<p><strong>[+] What I've read:</strong>\nA lot of documentation on how to write to google cloud in chunks and then use compose to stitch it together (not helpful at all) </p>\n\n<p>A lot of documentation on java's pre-fetch functions (needs to be python) </p>\n\n<p>The google cloud API's </p>\n\n<p>If anyone could point me the right direction I would be really grateful! \nThanks </p>\n"}, {"tags": ["python", "cx-freeze"], "answers": [{"tags": [], "owner": {"reputation": 8368, "user_id": 4669778, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh4.googleusercontent.com/-Iz_f3T23jC4/AAAAAAAAAAI/AAAAAAAADVQ/_H_y2EUoF7c/photo.jpg?sz=128", "display_name": "Ofer Sadan", "link": "https://stackoverflow.com/users/4669778/ofer-sadan"}, "is_accepted": false, "score": 0, "last_activity_date": 1571943269, "creation_date": 1571943269, "answer_id": 58547581, "question_id": 50380218, "link": "https://stackoverflow.com/questions/50380218/cx-freeze-building-a-msi-with-admin-permissions/58547581#58547581", "title": "CX_Freeze - Building a .msi with Admin permissions", "body": "<p>Just came across this question while looking for a solution to the same thing, so I thought I'd share how I solved it. The short version - <code>C:\\Program Files</code> isn't intended to be a folder with permissions to any program.</p>\n\n<p>Programs in windows are expected to use AppData folders for writing their local data, in theory nothing should change in <code>C:\\Program Files</code> from the moment of installation. Windows has environment variables to tell you where app data is supposed to be saved. For me running this:</p>\n\n<pre><code>app_data_folder = os.environ['ALLUSERSPROFILE']\n</code></pre>\n\n<p>Gives me the shared data folder for all users (in my case <code>C:\\ProgramData</code>). My program can then create a folder within it, and do whatever I want to the files there with full permissions.</p>\n\n<p>If the shared data folder for all users isn't what you're looking for, you should use one of these to get the AppData folder for the specific user running the program:</p>\n\n<pre><code>os.environ['APPDATA']  # in my case: 'C:\\\\Users\\\\myuser\\\\AppData\\\\Roaming'\n</code></pre>\n\n<p>OR</p>\n\n<pre><code>os.environ['LOCALAPPDATA'] # in my case: 'C:\\\\Users\\\\myuser\\\\AppData\\\\Local'\n</code></pre>\n\n<p>And repeat what is said above (create your own folder in there, proceed to save and read files as you please)</p>\n"}], "owner": {"reputation": 58, "user_id": 8210915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45f39490ab6f93c43edcba9cba5ade15?s=128&d=identicon&r=PG&f=1", "display_name": "Originalang", "link": "https://stackoverflow.com/users/8210915/originalang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 470, "favorite_count": 2, "answer_count": 1, "score": 3, "last_activity_date": 1571943269, "creation_date": 1526506372, "question_id": 50380218, "link": "https://stackoverflow.com/questions/50380218/cx-freeze-building-a-msi-with-admin-permissions", "title": "CX_Freeze - Building a .msi with Admin permissions", "body": "<p>I am trying to create an executable from my python/tkinter code that can be installed by other users. I have been able to successfully do this with cx_Freeze, however, the .exe is unable to write to files in the working or specified directories.\nAfter researching this issue, I discovered that this may be because the .exe does not have the appropriate read/write permissions. \nSure enough, when I tried running the .exe with Admin permissions, I was able to perform the relevant functions. Since this worked, I was wondering whether there is a way to build the cx_Freeze .msi while specifying user permissions in the setup.py file. I have not been able to find any documentation about this, so I am hoping that you can help with this. Any help is greatly appreciated!</p>\n"}, {"tags": ["python"], "answers": [{"tags": [], "owner": {"reputation": 596, "user_id": 2013093, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/e86c25b49a80c64ac9d0ec3fea938163?s=128&d=identicon&r=PG", "display_name": "CodeEmpower", "link": "https://stackoverflow.com/users/2013093/codeempower"}, "is_accepted": false, "score": 0, "last_activity_date": 1526508940, "creation_date": 1526508940, "answer_id": 50380677, "question_id": 50380206, "link": "https://stackoverflow.com/questions/50380206/thycotic-webservice-downloadfileattachementbyitemid-method/50380677#50380677", "title": "Thycotic WebService DownloadFileAttachementByItemId method", "body": "<p>data = base64.b64decode(file.FileAttachment)</p>\n"}], "owner": {"reputation": 596, "user_id": 2013093, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/e86c25b49a80c64ac9d0ec3fea938163?s=128&d=identicon&r=PG", "display_name": "CodeEmpower", "link": "https://stackoverflow.com/users/2013093/codeempower"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1526508940, "creation_date": 1526506316, "question_id": 50380206, "link": "https://stackoverflow.com/questions/50380206/thycotic-webservice-downloadfileattachementbyitemid-method", "title": "Thycotic WebService DownloadFileAttachementByItemId method", "body": "<p>A web service is accessible to Thycotic users <a href=\"https://thycotic.force.com/support/s/article/Using-Web-Services-with-Windows-Authentication-PowerShell\" rel=\"nofollow noreferrer\">https://thycotic.force.com/support/s/article/Using-Web-Services-with-Windows-Authentication-PowerShell</a> .</p>\n\n<p>I am able to download the file but i am unable to read the content of the file:</p>\n\n<pre><code>file = client.service.DownloadFileAttachmentByItemId(authtoken, secret.SecretSummaries.SecretSummary[0].SecretId,secretvalue.Secret.Items.SecretItem[1].Id)\n</code></pre>\n\n<p>This succeeds and returns:</p>\n\n<pre><code>       (FileDownloadResult){\n         Errors = \"\"\n         FileAttachment = \"YAAiAAJBEqww\"\n           FileName = \"nonesense.txt\"\n       }\n</code></pre>\n\n<p>if i try to read the file returned </p>\n\n<pre><code>         with open(file,'r') as file_handle:\n                for line in file_handle:\n                  print line\n</code></pre>\n\n<p>I get this error:</p>\n\n<pre><code>         TypeError: coercing to Unicode: need string or buffer, instance found\n</code></pre>\n"}, {"tags": ["python", "pandas", "datetime"], "comments": [{"owner": {"reputation": 4314, "user_id": 5152563, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/ca2290acd27712398ff5bf1d469129dd?s=128&d=identicon&r=PG", "display_name": "Quickbeam2k1", "link": "https://stackoverflow.com/users/5152563/quickbeam2k1"}, "edited": false, "score": 0, "creation_date": 1526573296, "post_id": 50380203, "comment_id": 87807778, "body": "You can floor the datetime to day frequency. I will update my post later"}], "answers": [{"comments": [{"owner": {"reputation": 645, "user_id": 9516819, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "singularity2047", "link": "https://stackoverflow.com/users/9516819/singularity2047"}, "edited": false, "score": 0, "creation_date": 1526514057, "post_id": 50380333, "comment_id": 87778879, "body": "I think, I have tried to_datetime() before but was not successful.  let me check again. I will confirm the answer then."}, {"owner": {"reputation": 645, "user_id": 9516819, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "singularity2047", "link": "https://stackoverflow.com/users/9516819/singularity2047"}, "edited": false, "score": 0, "creation_date": 1526569848, "post_id": 50380333, "comment_id": 87805479, "body": "In my case it doesn&#39;t change anything. So I created a new dataframe using datetime.datetime.now() to test your code. I have updated the post at the bottom"}, {"owner": {"reputation": 645, "user_id": 9516819, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "singularity2047", "link": "https://stackoverflow.com/users/9516819/singularity2047"}, "edited": false, "score": 0, "creation_date": 1526593440, "post_id": 50380333, "comment_id": 87817656, "body": "Thanks for your solution. One more thing - when I use this &#39; pd.Series(df[&#39;CreatedDate2&#39;]).dt.floor(&#39;d&#39;) &#39; - the output shows yy-mm-dd in datetime format, which is what I want.   But when I am trying to create a new column based on that using -  df[&#39;CreatedDate3&#39;] = pd.Series(df[&#39;CreatedDate2&#39;]).dt.floor(&#39;d&#39;) - it just goes back to timestamp format. I wonder why is that happening."}, {"owner": {"reputation": 4314, "user_id": 5152563, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/ca2290acd27712398ff5bf1d469129dd?s=128&d=identicon&r=PG", "display_name": "Quickbeam2k1", "link": "https://stackoverflow.com/users/5152563/quickbeam2k1"}, "reply_to_user": {"reputation": 645, "user_id": 9516819, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "singularity2047", "link": "https://stackoverflow.com/users/9516819/singularity2047"}, "edited": false, "score": 0, "creation_date": 1526624082, "post_id": 50380333, "comment_id": 87825004, "body": "I updated again. Could you explain what timestamp format is?"}], "tags": [], "owner": {"reputation": 4314, "user_id": 5152563, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/ca2290acd27712398ff5bf1d469129dd?s=128&d=identicon&r=PG", "display_name": "Quickbeam2k1", "link": "https://stackoverflow.com/users/5152563/quickbeam2k1"}, "is_accepted": true, "score": 3, "last_activity_date": 1526624054, "last_edit_date": 1526624054, "creation_date": 1526506973, "answer_id": 50380333, "question_id": 50380203, "link": "https://stackoverflow.com/questions/50380203/how-to-convert-date-columns-from-object-type-to-date-type-in-python/50380333#50380333", "title": "How to convert date columns from object type to date type in Python", "body": "<p>The solution is to use <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.to_datetime.html\" rel=\"nofollow noreferrer\">to_datetime</a></p>\n\n<pre><code>s = pd.Series(['3/11/2000', '3/12/2000', '3/13/2000'])\ns\n0    3/11/2000\n1    3/12/2000\n2    3/13/2000\ndtype: object\n\npd.to_datetime(s)\n0   2000-03-11\n1   2000-03-12\n2   2000-03-13\ndtype: datetime64[ns]\n</code></pre>\n\n<p>So in your situation, you could write</p>\n\n<pre><code>df['StartingDate2'] = pd.to_datetime(XY['StartingDate'], format='%m/%d/%Y')\n</code></pre>\n\n<p>and in fact you can neglect the format keyword here. But if you provide it, you will get a huge speed increase.</p>\n\n<p><strong>Benchmarks</strong></p>\n\n<pre><code>s = pd.Series(['3/11/2000', '3/12/2000', '3/13/2000']*1000)\n</code></pre>\n\n<p>Without format</p>\n\n<pre><code>%%timeit\npd.to_datetime(s)\n453 ms \u00b1 3.05 ms per loop (mean \u00b1 std. dev. of 7 runs, 1 loop each)\n</code></pre>\n\n<p>With format</p>\n\n<pre><code>%%timeit\npd.to_datetime(s, format='%m/%d/%Y')\n9.68 ms \u00b1 44.3 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 100 loops each)\n</code></pre>\n\n<p>Note for me: Always provide the format string if possible</p>\n\n<p><strong>Answer for updated question</strong></p>\n\n<p>You can use date times <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.dt.floor.html\" rel=\"nofollow noreferrer\">floor</a> function</p>\n\n<pre><code>df = pd.DataFrame(pd.to_datetime(['2015-09-29T14:34:39.000000000', '2015-10-07T14:13:03.000000000',\n   '2015-10-07T19:17:50.000000000',\n   '2017-12-05T14:06:42.000000000', '2017-12-06T16:36:44.000000000',\n   '2017-12-06T18:26:49.000000000']), columns=['A'])\n\ndf['B'] = df['A'].dt.floor('d')\ndf.dtypes\n\nA    datetime64[ns]\nB    datetime64[ns]\ndtype: object\n\ndf\n\n                      A          B\n0   2015-09-29 14:34:39 2015-09-29\n1   2015-10-07 14:13:03 2015-10-07\n2   2015-10-07 19:17:50 2015-10-07\n3   2017-12-05 14:06:42 2017-12-05\n4   2017-12-06 16:36:44 2017-12-06\n5   2017-12-06 18:26:49 2017-12-06\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 126, "user_id": 7565352, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJFN.jpg?s=128&g=1", "display_name": "Bram van Hout", "link": "https://stackoverflow.com/users/7565352/bram-van-hout"}, "is_accepted": false, "score": 0, "last_activity_date": 1526507046, "creation_date": 1526507046, "answer_id": 50380354, "question_id": 50380203, "link": "https://stackoverflow.com/questions/50380203/how-to-convert-date-columns-from-object-type-to-date-type-in-python/50380354#50380354", "title": "How to convert date columns from object type to date type in Python", "body": "<pre><code>df['StartingDate2'] = pd.to_datetime(XY['StartingDate'])\n</code></pre>\n"}], "owner": {"reputation": 645, "user_id": 9516819, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "singularity2047", "link": "https://stackoverflow.com/users/9516819/singularity2047"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5102, "favorite_count": 1, "accepted_answer_id": 50380333, "answer_count": 2, "score": 1, "last_activity_date": 1526624054, "creation_date": 1526506296, "last_edit_date": 1526571282, "question_id": 50380203, "link": "https://stackoverflow.com/questions/50380203/how-to-convert-date-columns-from-object-type-to-date-type-in-python", "title": "How to convert date columns from object type to date type in Python", "body": "<p>I have this data frame where the date columns are 'datetime' type </p>\n\n<pre><code>datetime64[ns]\n2014-04-30T00:00:00 000000000\n</code></pre>\n\n<p>Now I want the date in this format - 2014-04-30 . So I used below code</p>\n\n<pre><code>df['StartingDate2'] = XY['StartingDate'].dt.strftime('%m/%d/%Y')\n</code></pre>\n\n<p>Now, this works accurately, but converts my date to object type. I read <a href=\"https://stackoverflow.com/questions/311627/how-to-print-date-in-a-regular-format-in-python\">here</a> that In Python, dates are objects. But I want to write my final data frame as a table in redshift and so I need my date columns defined as date for my python data frame. Any suggestion about how to do that , will be greatly appreciated.</p>\n\n<hr>\n\n<p>Update:</p>\n\n<p>sample dataframe</p>\n\n<pre><code>p1 = {'name': ['johnny', 'tommy', 'bobby', 'rocky', 'jimmy'], 'StartingDate': ['2015-07-14T00:00:00.000000000', '2013-10-30T00:00:00.000000000', '2014-04-30T00:00:00.000000000', '2014-01-27T00:00:00.000000000', '2016-01-15T00:00:00.000000000'], 'Address': ['NY', 'NJ', 'PA', 'NY', 'CA'], 'comment1': ['Very good performance', 'N/A', 'Need to work hard', 'No Comment', 'Not satisfactory'], 'comment2': ['good', 'Meets Expectation', 'N', 'N/A', 'Incompetence']}\nXY = pd.DataFrame(data = p1)\nXY['today'] = datetime.datetime.now()\n</code></pre>\n\n<p>When I am using to_datetime() solution - it doesn't work</p>\n\n<pre><code>XY['today2'] = pd.to_datetime(XY['today'],  format = '%m/%d/%Y')\nXY['StartingDate2'] = pd.to_datetime(XY['today'],  format = '%m/%d/%Y')\n</code></pre>\n\n<p>Alternatively - this works, when strftime() and to_datetime() are used in combination.</p>\n\n<pre><code>XY['StartingDate2'] = XY['StartingDate2'].dt.strftime('%m/%d/%Y')\nXY['StartingDate2'] = pd.to_datetime(XY['StartingDate2'])\n</code></pre>\n\n<p>But although this solution works for the sample data, is not working for me. The data I have looks like this - </p>\n\n<pre><code>array(['2015-09-29T14:34:39.000000000', '2015-10-07T14:13:03.000000000',\n   '2015-10-07T19:17:50.000000000', ...,\n   '2017-12-05T14:06:42.000000000', '2017-12-06T16:36:44.000000000',\n   '2017-12-06T18:26:49.000000000'], dtype='datetime64[ns]'\n</code></pre>\n"}, {"tags": ["python", "html", "dictionary", "utf-8"], "comments": [{"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1526506960, "post_id": 50380164, "comment_id": 87776841, "body": "Why would you want to parse a dictionary? What is even the meaning thereof? Also, what exactly are you referring to with &quot;this type of return&quot;?"}, {"owner": {"reputation": 317, "user_id": 5893677, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-p6EzBnXlrBg/AAAAAAAAAAI/AAAAAAAAAoM/-uPJqoKE7pI/photo.jpg?sz=128", "display_name": "CENTURION", "link": "https://stackoverflow.com/users/5893677/centurion"}, "reply_to_user": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1526578559, "post_id": 50380164, "comment_id": 87810477, "body": "@UlrichEckhardt I dont understand what the api returned. I see that it is bytes as indicated by the &quot;b&quot; and I see tabs and carriage returns, I&#39;m just looking for a what to access &quot;001-1001&quot; as well as &quot;thazraja&quot;, etc."}, {"owner": {"reputation": 317, "user_id": 5893677, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-p6EzBnXlrBg/AAAAAAAAAAI/AAAAAAAAAoM/-uPJqoKE7pI/photo.jpg?sz=128", "display_name": "CENTURION", "link": "https://stackoverflow.com/users/5893677/centurion"}, "reply_to_user": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1526578733, "post_id": 50380164, "comment_id": 87810591, "body": "updated the question."}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1526581217, "post_id": 50380164, "comment_id": 87811917, "body": "Ah. Two things: It claims to be XML (<code>text&#47;xml</code>), which seems to be a lie. Rather, this seems like a sequence of strings separated by tabs. Now, to get from &quot;raw&quot; bytes to a string, use the <code>decode()</code> method. This claims to be UTF-8 (<code>charset=UTF-8</code>), but that might be wrong, too, but that will only show if you have characters outside of ASCII. With that string, proceed as with the answer you found below and/or the CSV module."}], "answers": [{"comments": [{"owner": {"reputation": 304952, "user_id": 18771, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/0ada184c98bf9073d15b2dc815be0170?s=128&d=identicon&r=PG", "display_name": "Tomalak", "link": "https://stackoverflow.com/users/18771/tomalak"}, "edited": false, "score": 0, "creation_date": 1526580458, "post_id": 50397613, "comment_id": 87811516, "body": "You seem to have CSV data (only that it is tab-separated, not comma-separated, which is not important). Try using the <code>csv</code> module for that."}], "tags": [], "owner": {"reputation": 317, "user_id": 5893677, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-p6EzBnXlrBg/AAAAAAAAAAI/AAAAAAAAAoM/-uPJqoKE7pI/photo.jpg?sz=128", "display_name": "CENTURION", "link": "https://stackoverflow.com/users/5893677/centurion"}, "is_accepted": true, "score": 2, "last_activity_date": 1526579237, "creation_date": 1526579237, "answer_id": 50397613, "question_id": 50380164, "link": "https://stackoverflow.com/questions/50380164/python-splitting-text-xmlcharset-utf-8/50397613#50397613", "title": "Python: Splitting text/xml;charset=UTF-8", "body": "<p>Oh, I get it... with <a href=\"https://stackoverflow.com/a/15095537/5893677\">this answer</a>. </p>\n\n<pre><code>&gt;&gt;&gt; a = b'asdf\\nasdf'\n&gt;&gt;&gt; a.split(b'\\n')\n[b'asdf', b'asdf']\n</code></pre>\n\n<p>I can split it at the tabs and carriage return. I was looking for an explanation. Sometimes it's hard searching for things when you don't know the appropriate terminology. </p>\n"}], "owner": {"reputation": 317, "user_id": 5893677, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-p6EzBnXlrBg/AAAAAAAAAAI/AAAAAAAAAoM/-uPJqoKE7pI/photo.jpg?sz=128", "display_name": "CENTURION", "link": "https://stackoverflow.com/users/5893677/centurion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 50397613, "answer_count": 1, "score": -1, "last_activity_date": 1526579237, "creation_date": 1526506164, "last_edit_date": 1526578722, "question_id": 50380164, "link": "https://stackoverflow.com/questions/50380164/python-splitting-text-xmlcharset-utf-8", "title": "Python: Splitting text/xml;charset=UTF-8", "body": "<p>I made a request to an api and it returned  </p>\n\n<pre><code>b\"001-1001\\thazraja\\t122.9668944300\\t43.1858693000\\t[YES]\\t1456529273000\\t2437.0000000000\\n001-1002\\tZ8s14\\t122.9671153000\\t43.1860681800\\t[NO]\\t1456529275000\\t2462.0000000000\\n...\"\n</code></pre>\n\n<p>It goes on like that for some time, starting again at the carriage return \"\\n\". It always has 7 items before it starts again.</p>\n\n<p><code>print(response.headers[\"content-type\"])</code> returns </p>\n\n<p><code>text/xml;charset=UTF-8</code></p>\n\n<p>How would I access \"001-1001\" as well as \"thajraza\", etc? I'm not sure what the name is of the type of thing the api returned? Is it a list? A dictionary? Something else?</p>\n"}, {"tags": ["python", "google-sheets-api", "pygsheets"], "comments": [{"owner": {"reputation": 3849, "user_id": 3701807, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/1d08e47ba80a547518f3927d50e46735?s=128&d=identicon&r=PG&f=1", "display_name": "Nithin", "link": "https://stackoverflow.com/users/3701807/nithin"}, "edited": false, "score": 0, "creation_date": 1526558110, "post_id": 50380144, "comment_id": 87797131, "body": "are you able to do make other requests? like <code>my_worksheet.sheet1.update_value(&#39;A1&#39;,&quot;test&quot;)</code> ? I am unabel to reproduce your error."}, {"owner": {"reputation": 3849, "user_id": 3701807, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/1d08e47ba80a547518f3927d50e46735?s=128&d=identicon&r=PG&f=1", "display_name": "Nithin", "link": "https://stackoverflow.com/users/3701807/nithin"}, "edited": false, "score": 1, "creation_date": 1526558401, "post_id": 50380144, "comment_id": 87797315, "body": "If your sheet is in a team drive you would need to turn on teamdirve. Its not turned on by default."}, {"owner": {"reputation": 15264, "user_id": 6143482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MD37S.jpg?s=128&g=1", "display_name": "noogui", "link": "https://stackoverflow.com/users/6143482/noogui"}, "edited": false, "score": 0, "creation_date": 1526559729, "post_id": 50380144, "comment_id": 87798168, "body": "Pygsheets uses Sheets API from Google. You can try if the file really exist in the <a href=\"https://developers.google.com/sheets/api/reference/rest/v4/spreadsheets.values/update\" rel=\"nofollow noreferrer\">spreadsheets.values.update</a> Try-it."}, {"owner": {"reputation": 11, "user_id": 9802540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce4920a30b51a49036a1f655ff2f5645?s=128&d=identicon&r=PG&f=1", "display_name": "Crowhill", "link": "https://stackoverflow.com/users/9802540/crowhill"}, "reply_to_user": {"reputation": 15264, "user_id": 6143482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MD37S.jpg?s=128&g=1", "display_name": "noogui", "link": "https://stackoverflow.com/users/6143482/noogui"}, "edited": false, "score": 0, "creation_date": 1526580035, "post_id": 50380144, "comment_id": 87811295, "body": "@noogui Yes, I can make updates using the Python sample for the v4 Sheets API on that page, so I believe that my file exists."}, {"owner": {"reputation": 11, "user_id": 9802540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce4920a30b51a49036a1f655ff2f5645?s=128&d=identicon&r=PG&f=1", "display_name": "Crowhill", "link": "https://stackoverflow.com/users/9802540/crowhill"}, "reply_to_user": {"reputation": 3849, "user_id": 3701807, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/1d08e47ba80a547518f3927d50e46735?s=128&d=identicon&r=PG&f=1", "display_name": "Nithin", "link": "https://stackoverflow.com/users/3701807/nithin"}, "edited": false, "score": 0, "creation_date": 1526582777, "post_id": 50380144, "comment_id": 87812788, "body": "Thanks, @nithin for prompting me to double check the teamdrive settings. Someone on the team did move the file into teamdrives without my knowledge, and setting enableTeamDriveSupport=True resolved my issue."}], "owner": {"reputation": 11, "user_id": 9802540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce4920a30b51a49036a1f655ff2f5645?s=128&d=identicon&r=PG&f=1", "display_name": "Crowhill", "link": "https://stackoverflow.com/users/9802540/crowhill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 551, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1532040535, "creation_date": 1526506085, "last_edit_date": 1532040535, "question_id": 50380144, "link": "https://stackoverflow.com/questions/50380144/pygsheets-updated-returns-file-not-found", "title": "Pygsheets .updated returns &quot;File not found&quot;", "body": "<p>I am trying to check the date of the latest modification to a google sheet using <a href=\"https://github.com/nithinmurali/pygsheets\" rel=\"nofollow noreferrer\"><em>pygsheets 1.1.4</em></a>, <a href=\"https://github.com/google/google-api-python-client\" rel=\"nofollow noreferrer\"><em>google-api-python-client 1.6.7</em></a>, and <em>Python 3.6.3</em> on Windows 10.</p>\n\n<p>I can authenticate, view, and edit spreadsheet contents, but when I try to get the last-modified date:</p>\n\n<pre><code>my_client = pygsheets.authorize(service_file=secret_service_acct_file)\nmy_worksheet = my_client.open_by_key(my_key)\nlast_updated = my_worksheet.updated\n</code></pre>\n\n<p>I instead get the following error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"&lt;pyshell#77&gt;\", line 1, in &lt;module&gt;\n    my_worksheet.updated\n  File \"C:\\Program Files (x86)\\Python36-32\\lib\\site-packages\\pygsheets\\spreadsheet.py\", line 90, in updated\n    response = self.client._execute_request(self.id, request, False)\n  File \"C:\\Program Files (x86)\\Python36-32\\lib\\site-packages\\pygsheets\\client.py\", line 459, in _execute_request\n    response = request.execute()\n  File \"C:\\Program Files (x86)\\Python36-32\\lib\\site-packages\\googleapiclient\\_helpers.py\", line 130, in positional_wrapper\n    return wrapped(*args, **kwargs)\n  File \"C:\\Program Files (x86)\\Python36-32\\lib\\site-packages\\googleapiclient\\http.py\", line 840, in execute\n    raise HttpError(resp, content, uri=self.uri)\ngoogleapiclient.errors.HttpError: &lt;HttpError 404 when requesting https://www.googleapis.com/drive/v3/files/{API_KEY}?fields=modifiedTime&amp;supportsTeamDrives=false&amp;alt=json returned \"File not found: {API_KEY}.\"&gt;\n</code></pre>\n\n<p>This, to me, indicates that the file is not found. I would expect other read/write operations to fail if the authorization or the connection had some issue. I have tried opening the spreadsheet with <code>open_by_url()</code> instead, but received the same results.</p>\n\n<p>I am using <em>google-api-python-client v1.6.7</em> and <em>pygsheets v1.1.4</em>, freshly installed from GitHub. I have tried running in \"administrator\" mode and running with <code>no_cache=True</code>, as per suggestions in other <a href=\"/questions/tagged/pygsheets\" class=\"post-tag\" title=\"show questions tagged &#39;pygsheets&#39;\" rel=\"tag\">pygsheets</a> questions like <a href=\"https://stackoverflow.com/questions/47397104/python-script-doesnt-work-on-windows-but-works-on-mac\">this one</a>, to no avail.</p>\n\n<p>I was using <em>gspread 0.6.2</em> until I realized I would eventually need \"Team Drive\" support. <em>gspread 3.0.0</em> claims to offer \"Team Drive\" support, but also deprecated the <code>.updated</code> attribute that I need.</p>\n\n<p>How can I get my latest <code>modifiedTime</code> with pygsheets, or should I be using a different library altogether?</p>\n\n<p>edit: I noticed that pygsheets uses the v3 Sheets API for the attribute I'm trying to call, and <a href=\"https://stackoverflow.com/a/42687272/9802540\">another SO answer</a> describes the removal of \"file oriented\" options between the v3 Sheets API and the v4 Sheets API, but <a href=\"https://developers.google.com/sheets/api/guides/migration\" rel=\"nofollow noreferrer\">the migration guide from google</a> doesn't seem to have any hints for my use case.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 649, "user_id": 2380768, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f85a5ddec6aea316c082e163624ecb4c?s=128&d=identicon&r=PG", "display_name": "ozzyzig", "link": "https://stackoverflow.com/users/2380768/ozzyzig"}, "edited": false, "score": 0, "creation_date": 1526506230, "post_id": 50380137, "comment_id": 87776572, "body": "Maybe try through polar coordinates use radians though. X = radius * cos(angle). y = radius * sin(angle). Setup up loop for angle. An adjust resolution of circle by changing step of the angle."}, {"owner": {"reputation": 1568, "user_id": 8793975, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/086643c7f3fafe914727c51882e974bc?s=128&d=identicon&r=PG&f=1", "display_name": "enumaris", "link": "https://stackoverflow.com/users/8793975/enumaris"}, "edited": false, "score": 0, "creation_date": 1526506292, "post_id": 50380137, "comment_id": 87776596, "body": "If you want the full circle, you will have to have negative x-values and then also the negative square-root of <code>r**20-xcharge_corord**2</code>."}], "answers": [{"tags": [], "owner": {"reputation": 1551, "user_id": 806802, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/5kFde.jpg?s=128&g=1", "display_name": "Srini", "link": "https://stackoverflow.com/users/806802/srini"}, "is_accepted": false, "score": 0, "last_activity_date": 1526507450, "creation_date": 1526507450, "answer_id": 50380427, "question_id": 50380137, "link": "https://stackoverflow.com/questions/50380137/tryng-to-create-a-circle-of-co-ordinates-in-python/50380427#50380427", "title": "tryng to create a circle of co-ordinates in python", "body": "<p><strong><em>What you have</em></strong></p>\n\n<p><em>x</em> and <em>y</em> in the first quadrant. You need to just multiply the x and y co-ordinates by -1 appropriately to reflect this quarter circle into the other quadrants to get those values.</p>\n\n<p>But IMO the best way would be to use polar co-ordinates</p>\n\n<p><strong><em>What you can do</em></strong></p>\n\n<p>Consider this (sorry I don't have numpy)</p>\n\n<pre><code>import random\nimport math\n\nr = 5\nyc = []\nxc = range(0,6)\n\nfor x in xc:\n    yc.append(int(math.sqrt(r**2 - x**2)))\nprint yc\n\ndef neg_one(a):\n    return -a\n\nz1 = zip(xc,yc)\nz2 = zip(xc, map(neg_one, yc))\nz3 = zip(map(neg_one, xc), map(neg_one, yc))\nz4 = zip(map(neg_one, xc), yc)\n\nprint z1\nprint z2\nprint z3\nprint z4\n</code></pre>\n\n<p>Now this might have 4 times as many points as you wanted. So to fix this do</p>\n\n<pre><code>z_f = z1 + z2 + z3 + z4\nprint z_f\n\ndesired_value_points = 10\nchunk_size = len(z_f) / desired_value_points\n\nprint \"Chunk size: \" + str(chunk_size)\nprint z_f[::chunk_size]\n</code></pre>\n\n<p>Will generate the desired number of points spread across the circle</p>\n"}, {"tags": [], "owner": {"reputation": 649, "user_id": 2380768, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f85a5ddec6aea316c082e163624ecb4c?s=128&d=identicon&r=PG", "display_name": "ozzyzig", "link": "https://stackoverflow.com/users/2380768/ozzyzig"}, "is_accepted": false, "score": 1, "last_activity_date": 1526507750, "creation_date": 1526507750, "answer_id": 50380473, "question_id": 50380137, "link": "https://stackoverflow.com/questions/50380137/tryng-to-create-a-circle-of-co-ordinates-in-python/50380473#50380473", "title": "tryng to create a circle of co-ordinates in python", "body": "<p>This is the simple polar coordinate version:</p>\n\n<pre><code>import math\nn = 10\ni = 0\nwhile i &lt; 360:\n    x = n * math.cos(math.radians(i))\n    y = n * math.sin(math.radians(i))\n    print x, y\n    i += 10 #whatever step angle\n</code></pre>\n\n<p>NB: you will have to watch floating point issues for zero so maybe round to 4 or so decimal places.</p>\n"}], "owner": {"reputation": 21, "user_id": 9468330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72cc0b9d0bfd655cd3c5eeb5216bc4b7?s=128&d=identicon&r=PG&f=1", "display_name": "tgmcroc", "link": "https://stackoverflow.com/users/9468330/tgmcroc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1526507750, "creation_date": 1526506057, "question_id": 50380137, "link": "https://stackoverflow.com/questions/50380137/tryng-to-create-a-circle-of-co-ordinates-in-python", "title": "tryng to create a circle of co-ordinates in python", "body": "<p>im trying to create points with an x and y co-ordinate. i want these points to form a circle. my genius plan was to set the radius of the circle then by using the fact the x^2 + Y^2 = R^2 i set a range of x's and set y to be y= root(r^2-x^2)<br>\nbut ive realised that hasn't made a circle. the points in z make a quarter of circle because everything is positive. i don't know how to fix this \ni think i just need to do this 4 times. however i do only want 100 values for my full circle</p>\n\n<pre><code>import random \nimport numpy as np\nimport math\nimport numpy as np\nN=100\nr=10     #radius\nxcharge_corord = np.linspace(0,10,N)  # a bunch of possible x's\nfor i in range(len(xcharge_corord)):\n    ycharge_corord = np.sqrt(r**2-xcharge_corord**2)   #y=root(r-x)\n\nprint(ycharge_corord)\nZ = []                                   #z=[(x,y)(x,y)(x,y)(x,y)]\nfor i in range(len(xcharge_corord)):\n    Z.append((xcharge_corord[i], ycharge_corord[i]))\nprint(Z)\n</code></pre>\n"}, {"tags": ["python", "pandas", "dataframe", "concat", "multi-index"], "comments": [{"owner": {"reputation": 4314, "user_id": 5152563, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/ca2290acd27712398ff5bf1d469129dd?s=128&d=identicon&r=PG", "display_name": "Quickbeam2k1", "link": "https://stackoverflow.com/users/5152563/quickbeam2k1"}, "edited": false, "score": 0, "creation_date": 1526561338, "post_id": 50380093, "comment_id": 87799325, "body": "I think there won&#39;t be an already implemented answer for your specific use case. If the second frame contains always larger elements than the first frame for the second index level, one could think of &quot;grouping&quot; by first level and contacting the frames on the level below. However, since the list sizes might differ and we might not have clear separation of values on the second index level, the sorting algorithms always will do a full sort here. They won&#39;t use the information that the concatenated second level consists of two ordered list."}, {"owner": {"reputation": 966, "user_id": 6461882, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7e7e6a07dc8000552a767fc93756ebbe?s=128&d=identicon&r=PG&f=1", "display_name": "S.V", "link": "https://stackoverflow.com/users/6461882/s-v"}, "reply_to_user": {"reputation": 4314, "user_id": 5152563, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/ca2290acd27712398ff5bf1d469129dd?s=128&d=identicon&r=PG", "display_name": "Quickbeam2k1", "link": "https://stackoverflow.com/users/5152563/quickbeam2k1"}, "edited": false, "score": 0, "creation_date": 1526562054, "post_id": 50380093, "comment_id": 87799839, "body": "There is no assumption about index values: the only assumption which can be made (if it helps) is that the two indices have no intersection."}, {"owner": {"reputation": 4314, "user_id": 5152563, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/ca2290acd27712398ff5bf1d469129dd?s=128&d=identicon&r=PG", "display_name": "Quickbeam2k1", "link": "https://stackoverflow.com/users/5152563/quickbeam2k1"}, "edited": false, "score": 0, "creation_date": 1526562466, "post_id": 50380093, "comment_id": 87800164, "body": "This implies, that you have to implement the merge-step or merge sort on the second key level. This is, right now, not implemented in pandas. Hence, you would need to split you index in the first level (btw. this would be nice for distributed computing) and then you would need to apply the merge step on your own. However, as @coldspeed mentioned in one of the answers, the theoretical performance gain might get lost due to overhead in a new implementation and a quick sort might be faster. May I ask, why you would need this kind of complexity?"}, {"owner": {"reputation": 966, "user_id": 6461882, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7e7e6a07dc8000552a767fc93756ebbe?s=128&d=identicon&r=PG&f=1", "display_name": "S.V", "link": "https://stackoverflow.com/users/6461882/s-v"}, "reply_to_user": {"reputation": 4314, "user_id": 5152563, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/ca2290acd27712398ff5bf1d469129dd?s=128&d=identicon&r=PG", "display_name": "Quickbeam2k1", "link": "https://stackoverflow.com/users/5152563/quickbeam2k1"}, "edited": false, "score": 0, "creation_date": 1526563058, "post_id": 50380093, "comment_id": 87800591, "body": "I need it to efficiently process very large data sets, which do not fit into memory even on a server with hundreds of GB of RAM. I want to split the data into smaller pieces and when I make a selection from the pieces, I want to merge them algorithmically efficiently into a DataFrame which fits into RAM and will be actually processed. I experimented with distributed computing of the data, but so far I am not very happy with the results."}, {"owner": {"reputation": 4314, "user_id": 5152563, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/ca2290acd27712398ff5bf1d469129dd?s=128&d=identicon&r=PG", "display_name": "Quickbeam2k1", "link": "https://stackoverflow.com/users/5152563/quickbeam2k1"}, "edited": false, "score": 0, "creation_date": 1526563379, "post_id": 50380093, "comment_id": 87800835, "body": "I don&#39;t think pandas is in that case the right tool. Did you checkout dask?  What about spark/pyskark? Why were you not satisfied, too slow?"}, {"owner": {"reputation": 966, "user_id": 6461882, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7e7e6a07dc8000552a767fc93756ebbe?s=128&d=identicon&r=PG&f=1", "display_name": "S.V", "link": "https://stackoverflow.com/users/6461882/s-v"}, "reply_to_user": {"reputation": 4314, "user_id": 5152563, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/ca2290acd27712398ff5bf1d469129dd?s=128&d=identicon&r=PG", "display_name": "Quickbeam2k1", "link": "https://stackoverflow.com/users/5152563/quickbeam2k1"}, "edited": false, "score": 0, "creation_date": 1526563680, "post_id": 50380093, "comment_id": 87801083, "body": "I am experimenting with dask right now, but it seems I need more time to figure how to use it efficiently. Their documentation is somewhat disorganized to my taste: instead of giving a coherent story explaining how to use the tool well with simple examples, explaining all the terms before they are used, one has to jump around and some critical pieces of information, which have to be in the 1st paragraph of introduction, are scattered around and are often somewhere in the end."}, {"owner": {"reputation": 4314, "user_id": 5152563, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/ca2290acd27712398ff5bf1d469129dd?s=128&d=identicon&r=PG", "display_name": "Quickbeam2k1", "link": "https://stackoverflow.com/users/5152563/quickbeam2k1"}, "edited": false, "score": 0, "creation_date": 1526563738, "post_id": 50380093, "comment_id": 87801120, "body": "don&#39;t forget: &quot;premature optimization is the root of all evil&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 3244, "user_id": 9053588, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rCHbD.png?s=128&g=1", "display_name": "KRKirov", "link": "https://stackoverflow.com/users/9053588/krkirov"}, "edited": false, "score": 0, "creation_date": 1526577163, "post_id": 50392934, "comment_id": 87809858, "body": "Have you tried timing this function on a larger data set? I have benchmarked it against t1.append(t2).sort_index() on the data you have posted and get the same performance."}, {"owner": {"reputation": 966, "user_id": 6461882, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7e7e6a07dc8000552a767fc93756ebbe?s=128&d=identicon&r=PG&f=1", "display_name": "S.V", "link": "https://stackoverflow.com/users/6461882/s-v"}, "reply_to_user": {"reputation": 3244, "user_id": 9053588, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rCHbD.png?s=128&g=1", "display_name": "KRKirov", "link": "https://stackoverflow.com/users/9053588/krkirov"}, "edited": false, "score": 0, "creation_date": 1526586641, "post_id": 50392934, "comment_id": 87814787, "body": "I did test it on a few GB of data. It seems that even though &#39;linConcat&#39; is likely to be O(N), it is still much slower (probably, due to Python implementation of reindex or union or loc) than t1.append(t2).sort_index(): ~13 times slower, to be exact, in my test. A better implementation of merging sorted DataFrames is needed. In any case, both versions are too slow for me."}], "tags": [], "owner": {"reputation": 966, "user_id": 6461882, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7e7e6a07dc8000552a767fc93756ebbe?s=128&d=identicon&r=PG&f=1", "display_name": "S.V", "link": "https://stackoverflow.com/users/6461882/s-v"}, "is_accepted": false, "score": 1, "last_activity_date": 1526565075, "last_edit_date": 1526565075, "creation_date": 1526564367, "answer_id": 50392934, "question_id": 50380093, "link": "https://stackoverflow.com/questions/50380093/pandas-concatenate-two-dataframes-with-sorted-multiindexes-such-that-result-has/50392934#50392934", "title": "pandas: concatenate two DataFrames with sorted MultiIndexes such that result has a sorted MultiIndex", "body": "<p>Here is a candidate answer. I am still working to confirm its algorithmic efficiency. Please, comment if you have an opinion:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def linConcat(t1, t2):\n    t = t1.reindex( index=t1.index.union(t2.index) )\n    t.loc[t2.index,:] = t2\n    return t\n</code></pre>\n\n<pre class=\"lang-none prettyprint-override\"><code>&gt;&gt;&gt; linConcat(t1, t2)\n          x\ni1 i2      \n0  0    1.0\n   1    2.0\n   2    7.0\n   3    8.0\n1  0    3.0\n   1    4.0\n   2    9.0\n   3   10.0\n2  0    5.0\n   1    6.0\n   2   11.0\n   3   12.0\n</code></pre>\n"}], "owner": {"reputation": 966, "user_id": 6461882, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7e7e6a07dc8000552a767fc93756ebbe?s=128&d=identicon&r=PG&f=1", "display_name": "S.V", "link": "https://stackoverflow.com/users/6461882/s-v"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 652, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1526597517, "creation_date": 1526505853, "last_edit_date": 1526563215, "question_id": 50380093, "link": "https://stackoverflow.com/questions/50380093/pandas-concatenate-two-dataframes-with-sorted-multiindexes-such-that-result-has", "title": "pandas: concatenate two DataFrames with sorted MultiIndexes such that result has a sorted MultiIndex", "body": "<p>Please, let me know how to concatenate two DataFrames with sorted MultiIndexes such that result has a sorted MultiIndex.</p>\n\n<p>Since, both are sorted, <strong>the algorithm has to have linear complexity in terms of the total number of rows in both DataFrames</strong> (this is the complexity of merging 2 sorted lists, which is effectively what the problem is here).</p>\n\n<p>Example:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import pandas as pd\nt1 = pd.DataFrame(data={'i1':[0,0,1,1,2,2],\n                        'i2':[0,1,0,1,0,1],\n                        'x':[1.,2.,3.,4.,5.,6.]})\nt1.set_index(['i1','i2'], inplace=True)\nt1.sort_index(inplace=True)\nt2 = pd.DataFrame(data={'i1':[0,0,1,1,2,2],\n                        'i2':[2,3,2,3,2,3],\n                        'x':[7.,8.,9.,10.,11.,12.]})\nt2.set_index(['i1','i2'], inplace=True)\nt2.sort_index(inplace=True)\n</code></pre>\n\n<pre class=\"lang-none prettyprint-override\"><code>&gt;&gt;&gt; print(t1)\n         x\ni1 i2     \n0  0   1.0\n   1   2.0\n1  0   3.0\n   1   4.0\n2  0   5.0\n   1   6.0\n\n&gt;&gt;&gt; print(t2)\n          x\ni1 i2      \n0  2    7.0\n   3    8.0\n1  2    9.0\n   3   10.0\n2  2   11.0\n   3   12.0\n</code></pre>\n\n<p>Expected result:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>          x\ni1 i2      \n0  0    1.0\n   1    2.0\n   2    7.0\n   3    8.0\n1  0    3.0\n   1    4.0\n   2    9.0\n   3   10.0\n2  0    5.0\n   1    6.0\n   2   11.0\n   3   12.0\n</code></pre>\n\n<p>Thank you for your help!</p>\n"}, {"tags": ["python", "unit-testing", "mocking", "stdout", "pynput"], "comments": [{"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 0, "creation_date": 1526505963, "post_id": 50380066, "comment_id": 87776469, "body": "Try swapping the order of the decorators?"}, {"owner": {"reputation": 63, "user_id": 9497792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7da12ac79fc1028e09c0347e1ea2714f?s=128&d=identicon&r=PG&f=1", "display_name": "Huasmc", "link": "https://stackoverflow.com/users/9497792/huasmc"}, "reply_to_user": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 0, "creation_date": 1526506274, "post_id": 50380066, "comment_id": 87776588, "body": "@AlexHall Getting the following output when swapping decorators:    <code>AssertionError: &#39;&#39; != &#39;Choose 0: &#39;</code>"}, {"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 1, "creation_date": 1526506437, "post_id": 50380066, "comment_id": 87776646, "body": "Maybe just print the prompt separately and then use <code>input()</code> with no prompt?"}, {"owner": {"reputation": 63, "user_id": 9497792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7da12ac79fc1028e09c0347e1ea2714f?s=128&d=identicon&r=PG&f=1", "display_name": "Huasmc", "link": "https://stackoverflow.com/users/9497792/huasmc"}, "reply_to_user": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 0, "creation_date": 1526541016, "post_id": 50380066, "comment_id": 87786323, "body": "This can work but two functions would have to be called separately to perform one task."}, {"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 0, "creation_date": 1526587781, "post_id": 50380066, "comment_id": 87815393, "body": "Swapping the decorators was a step in the right direction. You then also have to patch <code>input</code> with something that prints to stdout. The original input isn&#39;t being called so there&#39;s nothing left that prints to stdout, hence its value is the empty string."}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 9497792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7da12ac79fc1028e09c0347e1ea2714f?s=128&d=identicon&r=PG&f=1", "display_name": "Huasmc", "link": "https://stackoverflow.com/users/9497792/huasmc"}, "edited": false, "score": 0, "creation_date": 1526540690, "post_id": 50380962, "comment_id": 87786155, "body": "This is a good alternative but then it would print <code>Choose 0: </code> twice. Once when <code>input()</code> gets called and the second time when <code>print()</code> gets called."}, {"owner": {"reputation": 2230, "user_id": 5574689, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/2883b3fdb7276b30d733cfc0241bc689?s=128&d=identicon&r=PG&f=1", "display_name": "Gang", "link": "https://stackoverflow.com/users/5574689/gang"}, "reply_to_user": {"reputation": 63, "user_id": 9497792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7da12ac79fc1028e09c0347e1ea2714f?s=128&d=identicon&r=PG&f=1", "display_name": "Huasmc", "link": "https://stackoverflow.com/users/9497792/huasmc"}, "edited": false, "score": 0, "creation_date": 1526597315, "post_id": 50380962, "comment_id": 87818851, "body": "@Huascar, this is not reasonable in real life, I add a fake everything answer."}], "tags": [], "owner": {"reputation": 2230, "user_id": 5574689, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/2883b3fdb7276b30d733cfc0241bc689?s=128&d=identicon&r=PG&f=1", "display_name": "Gang", "link": "https://stackoverflow.com/users/5574689/gang"}, "is_accepted": false, "score": 0, "last_activity_date": 1526597542, "last_edit_date": 1526597542, "creation_date": 1526510730, "answer_id": 50380962, "question_id": 50380066, "link": "https://stackoverflow.com/questions/50380066/testing-python-stdout-on-input-prompt/50380962#50380962", "title": "Testing python stdout on input prompt", "body": "<p>mock_stdout only catch the stdout of <code>print</code> statement, so add <code>print(text)</code></p>\n\n<pre><code>class GameDisplay:\n\n    @staticmethod\n    def prompt(text):\n        input_value = input(text)\n        print(text)\n        return input_value\n</code></pre>\n\n<p>This piece of code is tested and worked as expected</p>\n\n<pre><code>@mock.patch('sys.stdout', new_callable=StringIO)\n@mock.patch('__builtin__.input', return_value='0')\ndef test_prompt_output3(self, mock_input, mock_stdout):\n        p = GameDisplay.prompt('Choose 0: ')\n        self.assertEqual(p, '0')\n        self.assertEqual(mock_stdout.getvalue(), 'Choose 0: \\n')\n</code></pre>\n\n<blockquote>\n  <p>but then it would print Choose 0: twice</p>\n</blockquote>\n\n<p>Test the return_value of <code>prompt()</code> should be enough in real life.</p>\n\n<p>There is only 1 option left if you really want to mock input and output at the same time.</p>\n\n<p>This will do, as long as you do not mock the <code>print</code> at the same time:</p>\n\n<pre><code>print(text)\ninput_value = input()\n</code></pre>\n\n<p>Or go for a insane way, fake the stdout:</p>\n\n<pre><code>mock_stdout = StringIO('Choose 0: ')\np = GameDisplay.prompt('Choose 0: ')\nself.assertEqual(mock_stdout.getvalue(), 'Choose 0: ')\n</code></pre>\n\n<p>or this is similar to assign a return_value to mock object:</p>\n\n<pre><code>with mock.patch('sys.stdout', new=StringIO(\"xxx\")) as mock_stdout:\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 9497792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7da12ac79fc1028e09c0347e1ea2714f?s=128&d=identicon&r=PG&f=1", "display_name": "Huasmc", "link": "https://stackoverflow.com/users/9497792/huasmc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 295, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1526597542, "creation_date": 1526505731, "question_id": 50380066, "link": "https://stackoverflow.com/questions/50380066/testing-python-stdout-on-input-prompt", "title": "Testing python stdout on input prompt", "body": "<p>The test for the following method checks that the stdout in prompt is correct.</p>\n\n<p>When 'input()' gets called it waits for the user to press enter and interrupt. The test is <em>passing</em> by auto keypress-ing 'enter'. </p>\n\n<p>This is hacky and there must be a better way of testing this method.</p>\n\n<p><strong>METHOD</strong>:</p>\n\n<pre><code>class GameDisplay:\n\n@staticmethod\ndef prompt(text):\n    input_value = input(text)\n    return input_value\n</code></pre>\n\n<p><strong>TEST</strong>:</p>\n\n<pre><code>from pynput.keyboard import Key, Controller\n\nclass TestGameDisplay(unittest.TestCase):\n\n@patch('sys.stdout', new_callable=StringIO)\ndef test_prompt_output(self, mock_stdout):\n    keyboard = Controller()\n    keyboard.press(Key.enter)\n    self.gameDisplay.prompt('Choose 0: ')\n    keyboard.release(Key.enter)\n    self.assertEqual( mock_stdout.getvalue(), 'Choose 0: ')\n\nif __name__ == '__main__':\n   unittest.main()\n</code></pre>\n\n<p><strong>OUTPUT</strong>:</p>\n\n<p>Breaks line as a result of pressing enter.</p>\n\n<pre><code>...................................\n............................................\n----------------------------------------------------------------------\nRan 79 tests in 0.113s\n\nOK\n</code></pre>\n\n<p><strong>TEST FIX ATTEMPT:</strong></p>\n\n<pre><code>@patch('sys.stdout', new_callable=StringIO)\n@patch('builtins.input', return_value='0')\ndef test_prompt_output(self, mock_stdout, input):\n    self.gameDisplay.prompt('Choose 0: ')\n    self.assertEqual( mock_stdout.getvalue(), 'Choose 0: ')\n</code></pre>\n\n<p><strong>OUTPUT:</strong></p>\n\n<pre><code>FAIL: test_prompt_output (tests.test_game_display.TestGameDisplay)\nself.assertEqual( mock_stdout.getvalue(), 'Choose 0: ')\nAssertionError: &lt;MagicMock name='input.getvalue()' id='4675607744'&gt; != 'Choose 0: '\n\n----------------------------------------------------------------------\nRan 79 tests in 0.015s\n\nFAILED (failures=1)\n</code></pre>\n"}, {"tags": ["python", "peewee"], "owner": {"reputation": 21, "user_id": 9802561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cfeab4fcc53b62e365d320478757aae?s=128&d=identicon&r=PG&f=1", "display_name": "greeneggs", "link": "https://stackoverflow.com/users/9802561/greeneggs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 213, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1526505483, "creation_date": 1526505483, "question_id": 50380022, "link": "https://stackoverflow.com/questions/50380022/peewee-model-with-multiple-foreign-keys", "title": "Peewee - Model with multiple foreign keys", "body": "<p>I am using peewee in python with sqlite. Being a novice in all of these, i need some help with setting up the models in peewee the correct way.</p>\n\n<p>I have three models: Shot, Asset and Task.</p>\n\n<p>Shots and assets can have multiple tasks. Task names has to be consistent, for instance, a Shot and an Asset can both have a different task named 'anim'. I have to track each task's parent.</p>\n\n<p>I first tried setting up the models this way (relevant code):</p>\n\n<pre><code>class Shot(BaseModel):\n    name = CharField()\n\nclass Asset(BaseModel):\n    name = CharField()\n\nclass Task(BaseModel):\n    name = CharField()\n    shot = ForeignKeyField(Shot, null=True, backref=\"shot_tasks\")\n    asset = ForeignKeyField(Asset, null=True, backref=\"asset_tasks\")\n</code></pre>\n\n<p>This works and i can do:</p>\n\n<pre><code>for task in shot.shot_tasks: #or asset.asset_tasks\n    print task.name\n</code></pre>\n\n<p>Then i didn't like it for some reason and tried this:</p>\n\n<pre><code>class Task(BaseModel):\n    name = CharField()\n\nclass ShotTask(Task):\n    shot = ForeignKeyField(Shot, backref='tasks')\n\nclass AssetTask(Task):\n    asset = ForeignKeyField(Asset, backref='tasks')\n</code></pre>\n\n<p>which i think is the same thing basically, but this way, i can name my backrefs 'tasks' and i can do:</p>\n\n<pre><code>for task in shot.tasks: #or asset.tasks\n    print task.name\n</code></pre>\n\n<p>So, my question is: is there a better way? (I'm sure there is)</p>\n"}, {"tags": ["python", "python-3.x", "python-unicode"], "comments": [{"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 2, "creation_date": 1526505523, "post_id": 50380017, "comment_id": 87776300, "body": "<i>because utf-16 words are separated by spaces</i>. I&#39;m not sure what you mean there, but UTF-16 doesn&#39;t separate words out."}, {"owner": {"reputation": 18344, "user_id": 119326, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b29825e83c1da695da0e22b4198a0105?s=128&d=identicon&r=PG", "display_name": "Cfreak", "link": "https://stackoverflow.com/users/119326/cfreak"}, "edited": false, "score": 0, "creation_date": 1526505625, "post_id": 50380017, "comment_id": 87776346, "body": "is this python 2.7 or python 3?"}, {"owner": {"reputation": 444, "user_id": 2660143, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a61a39377187ba85feebe6c0da639b66?s=128&d=identicon&r=PG", "display_name": "badri", "link": "https://stackoverflow.com/users/2660143/badri"}, "edited": false, "score": 0, "creation_date": 1526506949, "post_id": 50380017, "comment_id": 87776835, "body": "Sorry Martijn. It should have been &quot;words are separated by spaces&quot;. The utf-16 in front is a typo. I have corrected it."}, {"owner": {"reputation": 444, "user_id": 2660143, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a61a39377187ba85feebe6c0da639b66?s=128&d=identicon&r=PG", "display_name": "badri", "link": "https://stackoverflow.com/users/2660143/badri"}, "edited": false, "score": 0, "creation_date": 1526507166, "post_id": 50380017, "comment_id": 87776912, "body": "I need to separate words from a text file that has words from many languages. For e.g If I have the following words in a text file &quot;Hello world \u3053\u3093\u306b\u3061\u306f\u4e16\u754c&quot;, then I won&#39;t be able to separate out the words. Whereas if i converted it to utf-16, then I get u&#39;\\u0048\\u0065\\u006c\\u006c\\u006f   \\u0077\\u006f\\u0072\\u006c\\u0064     \\u3053\\u3093\\u306b\\u3061\\u306f\\u4e16\\u754c&#39;. These are delimited by spaces and so I can count the different words in that line even if language is different. This is the only idea that I was able to come up with to separate words in a file that has multiple languages in it."}, {"owner": {"reputation": 444, "user_id": 2660143, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a61a39377187ba85feebe6c0da639b66?s=128&d=identicon&r=PG", "display_name": "badri", "link": "https://stackoverflow.com/users/2660143/badri"}, "edited": false, "score": 1, "creation_date": 1526507254, "post_id": 50380017, "comment_id": 87776941, "body": "Cfreak - I am using Python 2.7. But no problems even if solution needs python 3."}, {"owner": {"reputation": 444, "user_id": 2660143, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a61a39377187ba85feebe6c0da639b66?s=128&d=identicon&r=PG", "display_name": "badri", "link": "https://stackoverflow.com/users/2660143/badri"}, "edited": false, "score": 0, "creation_date": 1526507674, "post_id": 50380017, "comment_id": 87777087, "body": "I have now added an example towards the end of the question. Hope it makes it clearer."}, {"owner": {"reputation": 148712, "user_id": 19750, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/13b41b2620da0b1e630715e0c91a0b03?s=128&d=identicon&r=PG", "display_name": "Josh Lee", "link": "https://stackoverflow.com/users/19750/josh-lee"}, "edited": false, "score": 0, "creation_date": 1526507724, "post_id": 50380017, "comment_id": 87777101, "body": "<code>u&#39;\\u0048\\u0065\\u006c\\u006c\\u006f \\u0077\\u006f\\u0072\\u006c\\u0064 \\u3053\\u3093\\u306b\\u3061\\u306f\\u4e16\\u754c&#39;</code> \u2014 this is not &quot;UTF-16&quot;. It&#39;s just Unicode."}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1526507825, "post_id": 50380017, "comment_id": 87777130, "body": "The file <code>jap.txt</code> has an encoding.  Maybe it&#39;s utf-16, maybe it&#39;s not.  You need to know what the encoding is, <i>decode</i> it, and then <i>encode</i> to utf-16."}, {"owner": {"reputation": 444, "user_id": 2660143, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a61a39377187ba85feebe6c0da639b66?s=128&d=identicon&r=PG", "display_name": "badri", "link": "https://stackoverflow.com/users/2660143/badri"}, "reply_to_user": {"reputation": 148712, "user_id": 19750, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/13b41b2620da0b1e630715e0c91a0b03?s=128&d=identicon&r=PG", "display_name": "Josh Lee", "link": "https://stackoverflow.com/users/19750/josh-lee"}, "edited": false, "score": 0, "creation_date": 1526509231, "post_id": 50380017, "comment_id": 87777621, "body": "@JoshLee I got it converted here  - <a href=\"https://www.branah.com/unicode-converter\" rel=\"nofollow noreferrer\">branah.com/unicode-converter</a>"}, {"owner": {"reputation": 444, "user_id": 2660143, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a61a39377187ba85feebe6c0da639b66?s=128&d=identicon&r=PG", "display_name": "badri", "link": "https://stackoverflow.com/users/2660143/badri"}, "reply_to_user": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1526509403, "post_id": 50380017, "comment_id": 87777665, "body": "@wim I created the file and I did not do anything special. Just copied english and japanese characters from the web."}], "answers": [{"comments": [{"owner": {"reputation": 444, "user_id": 2660143, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a61a39377187ba85feebe6c0da639b66?s=128&d=identicon&r=PG", "display_name": "badri", "link": "https://stackoverflow.com/users/2660143/badri"}, "edited": false, "score": 0, "creation_date": 1526509475, "post_id": 50380637, "comment_id": 87777682, "body": "I created that file and i just copied and pasted english and japanese characters into that file. Did not do anything else."}, {"owner": {"reputation": 444, "user_id": 2660143, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a61a39377187ba85feebe6c0da639b66?s=128&d=identicon&r=PG", "display_name": "badri", "link": "https://stackoverflow.com/users/2660143/badri"}, "edited": false, "score": 0, "creation_date": 1526509614, "post_id": 50380637, "comment_id": 87777729, "body": "Also when I ran your code, I get the error &quot;LookupError: unknown encoding: utf-16&quot;.  Is it related to my editor ?"}, {"owner": {"reputation": 7235, "user_id": 3734914, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/JAGw8.jpg?s=128&g=1", "display_name": "Batman", "link": "https://stackoverflow.com/users/3734914/batman"}, "reply_to_user": {"reputation": 444, "user_id": 2660143, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a61a39377187ba85feebe6c0da639b66?s=128&d=identicon&r=PG", "display_name": "badri", "link": "https://stackoverflow.com/users/2660143/badri"}, "edited": false, "score": 1, "creation_date": 1526509634, "post_id": 50380637, "comment_id": 87777730, "body": "It doesn&#39;t matter how you created it, it still has some kind of encoding. And you need to figure out what that is before you can decode it. Look at <a href=\"https://www.garykessler.net/library/file_sigs.html\" rel=\"nofollow noreferrer\">this</a> for example."}], "tags": [], "owner": {"reputation": 7235, "user_id": 3734914, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/JAGw8.jpg?s=128&g=1", "display_name": "Batman", "link": "https://stackoverflow.com/users/3734914/batman"}, "is_accepted": true, "score": 0, "last_activity_date": 1526508753, "creation_date": 1526508753, "answer_id": 50380637, "question_id": 50380017, "link": "https://stackoverflow.com/questions/50380017/convert-string-to-utf-16/50380637#50380637", "title": "Convert string to utf-16", "body": "<p>This depends entirely on the encoding of the file. </p>\n\n<p>Either way, you need to decode the line first, and then re-encode it so that it's utf-16.</p>\n\n<pre><code>with open(file_path, \"r\") as fh:\n    for line in fh:\n        string = line.decode(\"utf-8\").encode(\"utf-16\")\n</code></pre>\n"}], "owner": {"reputation": 444, "user_id": 2660143, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a61a39377187ba85feebe6c0da639b66?s=128&d=identicon&r=PG", "display_name": "badri", "link": "https://stackoverflow.com/users/2660143/badri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4006, "favorite_count": 0, "accepted_answer_id": 50380637, "answer_count": 1, "score": 1, "last_activity_date": 1526510020, "creation_date": 1526505453, "last_edit_date": 1526510020, "question_id": 50380017, "link": "https://stackoverflow.com/questions/50380017/convert-string-to-utf-16", "title": "Convert string to utf-16", "body": "<p>I have a text file with japanese characters. I read a line from it and want to convert it to utf-16 specifically. How can I do it using Python? My code looks like this -</p>\n\n<pre><code>with open(\"C:\\\\Users\\\\badri\\\\jap.txt\", 'rb') as f:\n    for line in f:\n        u = line.decode(encoding='utf-16',errors='strict')\n</code></pre>\n\n<p>I get this error \"LookupError: unknown encoding: utf-16\"</p>\n\n<p>The reason is I want it in utf-16 is because words are separated by spaces and so doesn't matter what language the text file is in.  I would be able to use space as a delimiter and count the number of words in the file. </p>\n\n<p>Once separated, I can easily print them this way -</p>\n\n<pre><code>u1 = u'\\u0048\\u0065\\u006c\\u006c\\u006f'\nu2 = u'\\u0077\\u006f\\u0072\\u006c\\u0064'\nu3 = u'\\u3053\\u3093\\u306b\\u3061\\u306f\\u4e16\\u754c'\nprint u1\nprint u2\nprint u3\n\nHello\nworld\n\u3053\u3093\u306b\u3061\u306f\u4e16\u754c\n</code></pre>\n"}, {"tags": ["python", "html", "django"], "comments": [{"owner": {"reputation": 18344, "user_id": 119326, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b29825e83c1da695da0e22b4198a0105?s=128&d=identicon&r=PG", "display_name": "Cfreak", "link": "https://stackoverflow.com/users/119326/cfreak"}, "edited": false, "score": 0, "creation_date": 1526505513, "post_id": 50380004, "comment_id": 87776294, "body": "your inputs must have a <code>name</code> attribute. After that you can look at this question: <a href=\"https://stackoverflow.com/questions/4706255/how-to-get-value-from-form-field-in-django-framework\" title=\"how to get value from form field in django framework\">stackoverflow.com/questions/4706255/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 6952, "user_id": 5644965, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J9KaA.jpg?s=128&g=1", "display_name": "Lemayzeur", "link": "https://stackoverflow.com/users/5644965/lemayzeur"}, "is_accepted": true, "score": 6, "last_activity_date": 1526505957, "creation_date": 1526505957, "answer_id": 50380119, "question_id": 50380004, "link": "https://stackoverflow.com/questions/50380004/how-to-pass-html-form-variable-to-python-function-with-django/50380119#50380119", "title": "How to pass html form variable to python function with django", "body": "<p>Use <code>name</code> attribute to send value to views : <code>name='city'</code> via form</p>\n\n<pre><code>&lt;form action=\"#\" method=\"post\"&gt;\n   {% csrf_token %}\n   &lt;input type=\"text\" class=\"form-control\" id=\"city\" placeholder=\"\" value=\"\"\n          name='city'&gt;\n   &lt;input type=\"submit\" value=\"Submit\"&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>You will need a view to send it back to template</p>\n\n<pre><code>  def myView(request):\n      context = {}\n      if request.method == 'POST':\n          city = request.POST.get('city')\n          api_address='http://api.openweathermap.org/data/2.5/weather? appid=KEY&amp;q='\n          url = api_address + city\n          json_data = requests.get(url).json()\n          kelvin = json_data['main']['temp']\n          context['temperature'] = round(kelvin - 273.15,0)\n      render(request,'template_name.html',context)\n</code></pre>\n\n<p>In template, it's accessible via <code>{{ temperature }}</code></p>\n"}], "owner": {"reputation": 43, "user_id": 9573487, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2FZOgV0b3pU/AAAAAAAAAAI/AAAAAAAAAE0/ooKm0Mc4P3Q/photo.jpg?sz=128", "display_name": "David", "link": "https://stackoverflow.com/users/9573487/david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5072, "favorite_count": 0, "accepted_answer_id": 50380119, "answer_count": 1, "score": 3, "last_activity_date": 1526505957, "creation_date": 1526505405, "question_id": 50380004, "link": "https://stackoverflow.com/questions/50380004/how-to-pass-html-form-variable-to-python-function-with-django", "title": "How to pass html form variable to python function with django", "body": "<p>I know this might be a very stupid question, but i'm new to django and try to solve this problem for several houres now. \nI want to pass a variable from a html form to the backend an then use the variable there to make an api request. \nThen i want to pass the result of the api-request back to the index.html page.</p>\n\n<p>For example:</p>\n\n<p>index.html</p>\n\n<pre><code>&lt;form action=\"#\" method=\"post\"&gt;\n{% csrf_token %}\n&lt;input type=\"text\" class=\"form-control\" id=\"city\" placeholder=\"\" value=\"\"&gt;\n&lt;input type=\"submit\" value=\"Submit\"&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>forms.py</p>\n\n<pre><code>import requests\napi_address='http://api.openweathermap.org/data/2.5/weather? \nappid=KEY&amp;q='\ncity = FORM-VARIABLE\nurl = api_address + city\njson_data = requests.get(url).json()\nkelvin = json_data['main']['temp']\ntemperature = round(kelvin - 273.15,0)\n</code></pre>\n\n<p>And then show the temperature in the index.html</p>\n"}, {"tags": ["python"], "answers": [{"tags": [], "owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "is_accepted": false, "score": 1, "last_activity_date": 1526505372, "creation_date": 1526505372, "answer_id": 50380000, "question_id": 50379977, "link": "https://stackoverflow.com/questions/50379977/in-a-list-of-string-how-to-remove-string-which-are-part-of-other-string-in-the/50380000#50380000", "title": "In a list of string, how to remove string which are part of other string in the list?", "body": "<p>You can use <code>any</code>:</p>\n\n<pre><code>lst = ['Hello World', 'Hello', 'This is test', 'is test']\nnew_results = [a for i, a in enumerate(lst) if any(h in a and c != i for c, h in enumerate(lst))]\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>['Hello World', 'This is test']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 40591, "user_id": 6583140, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/eA8qK.jpg?s=128&g=1", "display_name": "Mihai Alexandru-Ionut", "link": "https://stackoverflow.com/users/6583140/mihai-alexandru-ionut"}, "is_accepted": true, "score": 1, "last_activity_date": 1526505720, "creation_date": 1526505720, "answer_id": 50380064, "question_id": 50379977, "link": "https://stackoverflow.com/questions/50379977/in-a-list-of-string-how-to-remove-string-which-are-part-of-other-string-in-the/50380064#50380064", "title": "In a list of string, how to remove string which are part of other string in the list?", "body": "<p>You can apply <code>list comprehension</code> in order to <em>filter</em> list. </p>\n\n<p>Also, use <code>filter</code> method by applying a <code>lambda</code> <em>expression</em> as argument.</p>\n\n<pre><code>lst = ['Hello World', 'Hello', 'This is test', 'is test']\nlst = [string for string in lst if len(list(filter(lambda x: string in x, lst))) == 1]\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>['Hello World', 'This is test']\n</code></pre>\n"}], "owner": {"reputation": 603, "user_id": 1311888, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/0d17fe0cad5bf4e7c3661c8270229535?s=128&d=identicon&r=PG&f=1", "display_name": "user1311888", "link": "https://stackoverflow.com/users/1311888/user1311888"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 50380064, "answer_count": 2, "score": 0, "last_activity_date": 1526505720, "creation_date": 1526505248, "question_id": 50379977, "link": "https://stackoverflow.com/questions/50379977/in-a-list-of-string-how-to-remove-string-which-are-part-of-other-string-in-the", "title": "In a list of string, how to remove string which are part of other string in the list?", "body": "<p>In a list of string, how to remove string which are part of other string in the list? </p>\n\n<p>Here is an example.</p>\n\n<pre><code>lst = ['Hello World', 'Hello', 'This is test', 'is test']\n</code></pre>\n\n<p>I would like to only get <code>['Hello World', 'This is test']</code> as the output.</p>\n"}, {"tags": ["python", "gzip", "tar"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1526505413, "post_id": 50379970, "comment_id": 87776258, "body": "You can show how you send the file."}, {"owner": {"reputation": 6690, "user_id": 4225229, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/2YfJM.jpg?s=128&g=1", "display_name": "JacobIRR", "link": "https://stackoverflow.com/users/4225229/jacobirr"}, "edited": false, "score": 0, "creation_date": 1526506219, "post_id": 50379970, "comment_id": 87776568, "body": "The way I&#39;m reading the docs from your link, it seems that you open the tarfile and then use the <code>.add()</code> method to put &quot;sub files&quot; into the tarfile."}], "answers": [{"comments": [{"owner": {"reputation": 166, "user_id": 5635644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f837c49a6f386c8371e01c6585c575f9?s=128&d=identicon&r=PG&f=1", "display_name": "SomeGuy", "link": "https://stackoverflow.com/users/5635644/someguy"}, "edited": false, "score": 0, "creation_date": 1526570922, "post_id": 50380313, "comment_id": 87806220, "body": "So if there&#39;s no way to &quot;write&quot; to tarfile how do I &quot;catch&quot; or receive the tarfle being sent in .tar.gz format? This is the crux of what I&#39;m looking for."}], "tags": [], "owner": {"reputation": 6690, "user_id": 4225229, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/2YfJM.jpg?s=128&g=1", "display_name": "JacobIRR", "link": "https://stackoverflow.com/users/4225229/jacobirr"}, "is_accepted": false, "score": 0, "last_activity_date": 1526506899, "creation_date": 1526506899, "answer_id": 50380313, "question_id": 50379970, "link": "https://stackoverflow.com/questions/50379970/sending-and-receiving-tarfile-via-mqtt-python/50380313#50380313", "title": "Sending and receiving tarfile via MQTT - python", "body": "<p>There is no such method <code>write()</code> for <code>tarfile</code>.</p>\n\n<p><a href=\"https://stackoverflow.com/a/17081026/4225229\">This answer</a> shows the add method being used so I suggest following that pattern.</p>\n\n<blockquote>\n  <p><code>TarFile.add(name, arcname=None, recursive=True, exclude=None, filter=None)</code>\n  Add the file name to the archive. name may be any type of file (directory, fifo, symbolic link, etc.). If given, arcname specifies an alternative name for the file in the archive. Directories are added recursively by default. This can be avoided by setting recursive to False. If exclude is given it must be a function that takes one filename argument and returns a boolean value. Depending on this value the respective file is either excluded (True) or added (False). If filter is specified it must be a function that takes a TarInfo object argument and returns the changed TarInfo object. If it instead returns None the TarInfo object will be excluded from the archive. See Examples for an example.</p>\n</blockquote>\n"}], "owner": {"reputation": 166, "user_id": 5635644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f837c49a6f386c8371e01c6585c575f9?s=128&d=identicon&r=PG&f=1", "display_name": "SomeGuy", "link": "https://stackoverflow.com/users/5635644/someguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 430, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1526570785, "creation_date": 1526505207, "last_edit_date": 1526570785, "question_id": 50379970, "link": "https://stackoverflow.com/questions/50379970/sending-and-receiving-tarfile-via-mqtt-python", "title": "Sending and receiving tarfile via MQTT - python", "body": "<p>I'm able to send a tarball via MQTT using a python script, but when I receive it, I go to unzip it and receive an error. After tracking down the error, it appears as if the input stream is not tar-ing up the file, so even though the extension is .tar.gz, it is not an actual .tar.gz file.</p>\n\n<p>It sounds really silly but the bottom-line question is \"How do I write to a tar file OR how do I 'receive' a tarfile so that it's still in proper .tar.gz format for later unpacking?\"</p>\n\n<p>I have looked at the tarfile module <a href=\"https://docs.python.org/2.7/library/tarfile.html\" rel=\"nofollow noreferrer\">here</a> and it helped a little, as well as a few questions <a href=\"https://stackoverflow.com/questions/31240550/python-write-text-to-tar-gz\">here</a> <a href=\"https://stackoverflow.com/questions/2032403/how-to-create-full-compressed-tar-file-using-python\">here</a> and <a href=\"https://stackoverflow.com/questions/34086524/python-tarfile-stream\">here</a>... but cannot pinpoint the solution. It's worth noting that each .tar.gz is actually 3 .tar.gz files compressed into one - not sure if this is relevant.</p>\n\n<p>My code:</p>\n\n<pre><code>from time import gmtime, strftime\nimport socket\nimport paho.mqtt.client as mqtt\nimport tarfile\n\ntoday = strftime(\"%Y-%m-%d-%H:%M:%S\", gmtime())\n\n\ndef on_connect(client, userdata, flags, rc):\n    print(\"Connected with result code \"+str(rc))\n    client.subscribe(\"Backup\",qos=2)\n\ndef on_message(client, userdata, msg):\n    print \"Topic : \", msg.topic\n    f = tarfile.open(\"/backups/daily.%s.tar.gz\" % today, \"w:gz\")\n    f.write(msg.payload)\n    f.close()\n\n\nclientid = socket.gethostname()\nprint(clientid)\nclient = mqtt.Client(clientid,False)\nclient.on_connect = on_connect\nclient.on_message = on_message\n\nclient.connect(\"192.168.1.1\", 1883, 60)\n\nclient.loop_forever()\n</code></pre>\n\n<p>And my error message:</p>\n\n<pre><code>Connected with result code 0\nTopic :  Backups\nTraceback (most recent call last):\n  File \"/scripts/filereceiver.py\", line 37, in &lt;module&gt;\n    client.loop_forever()\n  File \"/usr/local/lib/python2.7/dist-packages/paho/mqtt/client.py\", line 1481, in loop_forever\n    rc = self.loop(timeout, max_packets)\n  File \"/usr/local/lib/python2.7/dist-packages/paho/mqtt/client.py\", line 1003, in loop\n    rc = self.loop_read(max_packets)\n  File \"/usr/local/lib/python2.7/dist-packages/paho/mqtt/client.py\", line 1284, in loop_read\n    rc = self._packet_read()\n  File \"/usr/local/lib/python2.7/dist-packages/paho/mqtt/client.py\", line 1849, in _packet_read\n    rc = self._packet_handle()\n  File \"/usr/local/lib/python2.7/dist-packages/paho/mqtt/client.py\", line 2309, in _packet_handle\n    return self._handle_pubrel()\n  File \"/usr/local/lib/python2.7/dist-packages/paho/mqtt/client.py\", line 2529, in _handle_pubrel\n    self._handle_on_message(self._in_messages[i])\n  File \"/usr/local/lib/python2.7/dist-packages/paho/mqtt/client.py\", line 2647, in _handle_on_message\n    self.on_message(self, self._userdata, message)\n  File \"/root/filereceiver.py\", line 25, in on_message\n    f.write(msg.payload)\nAttributeError: 'TarFile' object has no attribute 'write'\n</code></pre>\n\n<p>I would not think the MQTT has anything to do with it, that it's just something missing in my script?</p>\n\n<p>EDIT:</p>\n\n<p>This is the sending code. It works in that it can send/receive bytes and when used with non-tar works well. It's also possible the problem is here, and not with the receiving code, although that seems unlikely to me.</p>\n\n<pre><code>import subprocess\nimport paho.mqtt.client as mqtt\n\ndef on_publish(mosq, userdata, mid):\n    mosq.disconnect()\n\nclient = mqtt.Client()\nclient.connect(\"192.168.1.1\", 1883, 60)\nclient.on_publish = on_publish\n\n\n#output = subprocess.check_output(['ls', '-l', ])\n#print(output)\n\nps = subprocess.Popen(('ls', '/new/backups/ready/'), stdout=subprocess.PIPE)\noutput = subprocess.check_output(('head', '-1'), stdin=ps.stdout)\nps.wait()\nprint(output)\n\n\nfilename = '/new/backups/ready/'+output.rstrip()\nf=open(filename, \"rb\")\nfileContent = f.read()\nbyteArr = \"filename\" +bytearray(fileContent)\nclient.publish(\"Updates\",byteArr,2)\n\nclient.loop_forever()\n</code></pre>\n"}, {"tags": ["python", "pandas", "date", "datetime"], "answers": [{"comments": [{"owner": {"reputation": 7907, "user_id": 9609447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9FDax.jpg?s=128&g=1", "display_name": "harvpan", "link": "https://stackoverflow.com/users/9609447/harvpan"}, "edited": false, "score": 0, "creation_date": 1526505443, "post_id": 50379990, "comment_id": 87776269, "body": "Amazing. +1. Is it possible without using chain?"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 7907, "user_id": 9609447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9FDax.jpg?s=128&g=1", "display_name": "harvpan", "link": "https://stackoverflow.com/users/9609447/harvpan"}, "edited": false, "score": 0, "creation_date": 1526505584, "post_id": 50379990, "comment_id": 87776330, "body": "@HarvIpan You mean without a loop at all? Hmm, I would be interested to see. Let me try."}, {"owner": {"reputation": 7907, "user_id": 9609447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9FDax.jpg?s=128&g=1", "display_name": "harvpan", "link": "https://stackoverflow.com/users/9609447/harvpan"}, "edited": false, "score": 0, "creation_date": 1526505771, "post_id": 50379990, "comment_id": 87776394, "body": "@coldspeed, yeah. May be a long shot without looping as it is not a traditional reindexing problem for dates."}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 7907, "user_id": 9609447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9FDax.jpg?s=128&g=1", "display_name": "harvpan", "link": "https://stackoverflow.com/users/9609447/harvpan"}, "edited": false, "score": 0, "creation_date": 1526505961, "post_id": 50379990, "comment_id": 87776466, "body": "@HarvIpan Drawing a blank here. This really is a challenging problem."}, {"owner": {"reputation": 15201, "user_id": 7386332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb50c81104978fe1e111da483c41ff0f?s=128&d=identicon&r=PG&f=1", "display_name": "Anton vBR", "link": "https://stackoverflow.com/users/7386332/anton-vbr"}, "edited": false, "score": 0, "creation_date": 1526506199, "post_id": 50379990, "comment_id": 87776560, "body": "Nice solution. But why would we need to encapsulate the chain iterable to a list?"}, {"owner": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "reply_to_user": {"reputation": 7907, "user_id": 9609447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9FDax.jpg?s=128&g=1", "display_name": "harvpan", "link": "https://stackoverflow.com/users/9609447/harvpan"}, "edited": false, "score": 1, "creation_date": 1526506226, "post_id": 50379990, "comment_id": 87776571, "body": "@HarvIpan If you&#39;re willing to create a second date column by subtracting 4 days, then jezrael&#39;s answer to <a href=\"https://stackoverflow.com/questions/37046329/vectorized-implementation-to-create-multiple-rows-from-a-single-row-in-pandas-da\">this question</a> allows you to do it with some stacking and a groupby"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 15201, "user_id": 7386332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb50c81104978fe1e111da483c41ff0f?s=128&d=identicon&r=PG&f=1", "display_name": "Anton vBR", "link": "https://stackoverflow.com/users/7386332/anton-vbr"}, "edited": false, "score": 1, "creation_date": 1526506334, "post_id": 50379990, "comment_id": 87776609, "body": "@AntonvBR I am surprised it works without! Thank you! By the way, you&#39;ve a nice solution as well, +1 :)"}, {"owner": {"reputation": 15201, "user_id": 7386332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb50c81104978fe1e111da483c41ff0f?s=128&d=identicon&r=PG&f=1", "display_name": "Anton vBR", "link": "https://stackoverflow.com/users/7386332/anton-vbr"}, "edited": false, "score": 0, "creation_date": 1526506466, "post_id": 50379990, "comment_id": 87776652, "body": "It&#39;s nice with options but your second solution just seems like too much code for something (when you already have a working solution). (And not any speed gain!). Impressive though"}, {"owner": {"reputation": 7907, "user_id": 9609447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9FDax.jpg?s=128&g=1", "display_name": "harvpan", "link": "https://stackoverflow.com/users/9609447/harvpan"}, "reply_to_user": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "edited": false, "score": 0, "creation_date": 1526506488, "post_id": 50379990, "comment_id": 87776659, "body": "@ALollz, bingo! I like that approach."}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 15201, "user_id": 7386332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb50c81104978fe1e111da483c41ff0f?s=128&d=identicon&r=PG&f=1", "display_name": "Anton vBR", "link": "https://stackoverflow.com/users/7386332/anton-vbr"}, "edited": false, "score": 1, "creation_date": 1526506774, "post_id": 50379990, "comment_id": 87776780, "body": "@AntonvBR yeaaaah, was just trying different things... seeing what works out. The second solution is <i>bad</i>, but it is a solution. Anyway."}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1526510450, "post_id": 50379990, "comment_id": 87777953, "body": "Maybe <code>pd.date_range(end=x,periods=5)</code>"}], "tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": false, "score": 4, "last_activity_date": 1547361920, "last_edit_date": 1592644375, "creation_date": 1526505312, "answer_id": 50379990, "question_id": 50379914, "link": "https://stackoverflow.com/questions/50379914/pandas-multiple-date-ranges-from-column-of-dates/50379990#50379990", "title": "pandas multiple date ranges from column of dates", "body": "<h3><code>reindex</code>ing with <code>pd.date_range</code></h3>\n<p>Let's try creating a flat list of date-ranges and reindexing this DataFrame.</p>\n<pre><code>from itertools import chain\n\nv = df.assign(Date=pd.to_datetime(df.Date)).set_index('Date')\n# assuming ID is a string column\nv.reindex(chain.from_iterable(\n    pd.date_range(end=i, periods=5) for i in v.index)\n).bfill().reset_index()  \n\n         Date  ID\n0  2018-03-14  11\n1  2018-03-15  11\n2  2018-03-16  11\n3  2018-03-17  11\n4  2018-03-18  11\n5  2018-03-19  11\n6  2017-12-31  22\n7  2018-01-01  22\n8  2018-01-02  22\n9  2018-01-03  22\n10 2018-01-04  22\n11 2018-01-05  22\n12 2018-02-07  33\n13 2018-02-08  33\n14 2018-02-09  33\n15 2018-02-10  33\n16 2018-02-11  33\n17 2018-02-12  33\n</code></pre>\n<hr />\n<h3><code>concat</code> based solution on <code>keys</code></h3>\n<p>Just for fun. My <code>reindex</code> solution is definitely more performant and easier to read, so if you were to pick one, use that.</p>\n<pre><code>v = df.assign(Date=pd.to_datetime(df.Date))\nv_dict = {\n    j : pd.DataFrame(\n            pd.date_range(end=i, periods=5), columns=['Date']\n        ) \n    for j, i in zip(v.ID, v.Date)\n}\n\n(pd.concat(v_dict, axis=0)\n  .reset_index(level=1, drop=True)\n  .rename_axis('ID')\n  .reset_index()\n)\n\n    ID       Date\n0   11 2018-03-14\n1   11 2018-03-15\n2   11 2018-03-16\n3   11 2018-03-17\n4   11 2018-03-18\n5   11 2018-03-19\n6   22 2017-12-31\n7   22 2018-01-01\n8   22 2018-01-02\n9   22 2018-01-03\n10  22 2018-01-04\n11  22 2018-01-05\n12  33 2018-02-07\n13  33 2018-02-08\n14  33 2018-02-09\n15  33 2018-02-10\n16  33 2018-02-11\n17  33 2018-02-12\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15201, "user_id": 7386332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb50c81104978fe1e111da483c41ff0f?s=128&d=identicon&r=PG&f=1", "display_name": "Anton vBR", "link": "https://stackoverflow.com/users/7386332/anton-vbr"}, "is_accepted": false, "score": 4, "last_activity_date": 1526508456, "last_edit_date": 1526508456, "creation_date": 1526505526, "answer_id": 50380030, "question_id": 50379914, "link": "https://stackoverflow.com/questions/50379914/pandas-multiple-date-ranges-from-column-of-dates/50380030#50380030", "title": "pandas multiple date ranges from column of dates", "body": "<p>Here is another by using <code>df.assign</code> to overwrite <code>date</code> and <code>pd.concat</code> to glue the range together. c\u1d0f\u029f\u1d05s\u1d18\u1d07\u1d07\u1d05's solution wins in performance but I think this might be a nice addition as it is quite easy to read and understand.</p>\n\n<pre><code>df = pd.concat([df.assign(Date=df.Date - pd.Timedelta(days=i)) for i in range(5)])\n</code></pre>\n\n<p>Alternative:</p>\n\n<pre><code>dates = (pd.date_range(*x) for x in zip(df['Date']-pd.Timedelta(days=4), df['Date']))\n\ndf = (pd.DataFrame(dict(zip(df['ID'],dates)))\n        .T\n        .stack()\n        .reset_index(0)\n        .rename(columns={'level_0': 'ID', 0: 'Date'}))\n</code></pre>\n\n<p>Full example:</p>\n\n<pre><code>import pandas as pd\n\ndata = '''\\\nID  Date\n11  3/19/2018\n22  1/5/2018\n33  2/12/2018'''\n\n# Recreate dataframe\ndf = pd.read_csv(pd.compat.StringIO(data), sep='\\s+')\ndf['Date']= pd.to_datetime(df.Date)\n\ndf = pd.concat([df.assign(Date=df.Date - pd.Timedelta(days=i)) for i in range(5)])\ndf.sort_values(by=['ID','Date'], ascending = [True,True], inplace=True)\nprint(df)\n</code></pre>\n\n<p>Returns:</p>\n\n<pre><code>   ID       Date\n0  11 2018-03-15\n0  11 2018-03-16\n0  11 2018-03-17\n0  11 2018-03-18\n0  11 2018-03-19\n1  22 2018-01-01\n1  22 2018-01-02\n1  22 2018-01-03\n1  22 2018-01-04\n1  22 2018-01-05\n2  33 2018-02-08\n2  33 2018-02-09\n2  33 2018-02-10\n2  33 2018-02-11\n2  33 2018-02-12\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 15201, "user_id": 7386332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb50c81104978fe1e111da483c41ff0f?s=128&d=identicon&r=PG&f=1", "display_name": "Anton vBR", "link": "https://stackoverflow.com/users/7386332/anton-vbr"}, "edited": false, "score": 0, "creation_date": 1526509076, "post_id": 50380466, "comment_id": 87777560, "body": "Nice solution. You could even use iloc[0] to retrieve first value (as they are unique in this case). I added it in... but tbh I think your solution might be good as it is!"}], "tags": [], "owner": {"reputation": 20427, "user_id": 2570261, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e71068b09fc539447a0cee3e99fc419d?s=128&d=identicon&r=PG&f=1", "display_name": "Haleemur Ali", "link": "https://stackoverflow.com/users/2570261/haleemur-ali"}, "is_accepted": true, "score": 3, "last_activity_date": 1526509440, "last_edit_date": 1526509440, "creation_date": 1526507716, "answer_id": 50380466, "question_id": 50379914, "link": "https://stackoverflow.com/questions/50379914/pandas-multiple-date-ranges-from-column-of-dates/50380466#50380466", "title": "pandas multiple date ranges from column of dates", "body": "<p>group by <code>ID</code>, select the column <code>Date</code>, and for each group generate a series of five days leading up to the greatest date.</p>\n\n<p>rather than writing a long lambda, I've written a helper function.</p>\n\n<pre><code>def drange(x): \n    e = x.max()\n    s = e-pd.Timedelta(days=4)\n    return pd.Series(pd.date_range(s,e))\n\nres = df.groupby('ID').Date.apply(drange)\n</code></pre>\n\n<p>Then drop the extraneous level from the resulting multiindex and we get our desired output</p>\n\n<pre><code>res.reset_index(level=0).reset_index(drop=True)\n# outputs:\n\n    ID       Date\n0   11 2018-03-15\n1   11 2018-03-16\n2   11 2018-03-17\n3   11 2018-03-18\n4   11 2018-03-19\n5   22 2018-01-01\n6   22 2018-01-02\n7   22 2018-01-03\n8   22 2018-01-04\n9   22 2018-01-05\n10  33 2018-02-08\n11  33 2018-02-09\n12  33 2018-02-10\n13  33 2018-02-11\n14  33 2018-02-12\n</code></pre>\n\n<hr>\n\n<p><strong>Compact alternative</strong></p>\n\n<pre><code># Help function to return Serie with daterange\nfunc = lambda x: pd.date_range(x.iloc[0]-pd.Timedelta(days=4), x.iloc[0]).to_series()\n\nres = df.groupby('ID').Date.apply(func).reset_index().drop('level_1',1)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 20427, "user_id": 2570261, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e71068b09fc539447a0cee3e99fc419d?s=128&d=identicon&r=PG&f=1", "display_name": "Haleemur Ali", "link": "https://stackoverflow.com/users/2570261/haleemur-ali"}, "edited": false, "score": 0, "creation_date": 1526510366, "post_id": 50380878, "comment_id": 87777930, "body": "this is essentially the same approach i took, but i like how you specify the end and periods"}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "reply_to_user": {"reputation": 20427, "user_id": 2570261, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e71068b09fc539447a0cee3e99fc419d?s=128&d=identicon&r=PG&f=1", "display_name": "Haleemur Ali", "link": "https://stackoverflow.com/users/2570261/haleemur-ali"}, "edited": false, "score": 0, "creation_date": 1526510425, "post_id": 50380878, "comment_id": 87777949, "body": "@HaleemurAli yep , I just notice almost the same :-)"}], "tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": false, "score": 2, "last_activity_date": 1526510253, "creation_date": 1526510253, "answer_id": 50380878, "question_id": 50379914, "link": "https://stackoverflow.com/questions/50379914/pandas-multiple-date-ranges-from-column-of-dates/50380878#50380878", "title": "pandas multiple date ranges from column of dates", "body": "<p>You can try <code>groupby</code> with <code>date_range</code></p>\n\n<pre><code>df.groupby('ID').Date.apply(lambda x : pd.Series(pd.date_range(end=x.iloc[0],periods=5))).reset_index(level=0)\nOut[793]: \n   ID       Date\n0  11 2018-03-15\n1  11 2018-03-16\n2  11 2018-03-17\n3  11 2018-03-18\n4  11 2018-03-19\n0  22 2018-01-01\n1  22 2018-01-02\n2  22 2018-01-03\n3  22 2018-01-04\n4  22 2018-01-05\n0  33 2018-02-08\n1  33 2018-02-09\n2  33 2018-02-10\n3  33 2018-02-11\n4  33 2018-02-12\n</code></pre>\n"}], "owner": {"reputation": 471, "user_id": 6256904, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/757717ff6e9e137091ac4071ff4186c1?s=128&d=identicon&r=PG&f=1", "display_name": "qqqwww", "link": "https://stackoverflow.com/users/6256904/qqqwww"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1748, "favorite_count": 1, "accepted_answer_id": 50380466, "answer_count": 4, "score": 6, "last_activity_date": 1547362010, "creation_date": 1526504931, "last_edit_date": 1547362010, "question_id": 50379914, "link": "https://stackoverflow.com/questions/50379914/pandas-multiple-date-ranges-from-column-of-dates", "title": "pandas multiple date ranges from column of dates", "body": "<p>Current df:</p>\n\n<pre><code>ID  Date\n11  3/19/2018\n22  1/5/2018\n33  2/12/2018\n..  ..\n</code></pre>\n\n<p>I have the df with ID and Date. ID is unique in the original df.\nI would like to create a new df based on date. Each ID has a Max Date, I would like to use that date and go back 4 days(5 rows each ID)\nThere are thousands of IDs.</p>\n\n<p>Expect to get:</p>\n\n<pre><code>ID  Date\n11  3/15/2018\n11  3/16/2018\n11  3/17/2018\n11  3/18/2018\n11  3/19/2018\n22  1/1/2018\n22  1/2/2018\n22  1/3/2018\n22  1/4/2018\n22  1/5/2018\n33  2/8/2018\n33  2/9/2018\n33  2/10/2018\n33  2/11/2018\n33  2/12/2018\n\u2026   \u2026\n</code></pre>\n\n<p>I tried the following method, i think use <code>date_range</code> might be right direction, but I keep get error. </p>\n\n<p>pd.date_range</p>\n\n<pre><code>def date_list(row):\n    list = pd.date_range(row[\"Date\"], periods=5)\n    return list\n\ndf[\"Date_list\"] = df.apply(date_list, axis = \"columns\")\n</code></pre>\n"}, {"tags": ["python", "scrapy"], "answers": [{"comments": [{"owner": {"reputation": 119, "user_id": 9802655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20806bdb0e191f430d855a06181431b4?s=128&d=identicon&r=PG&f=1", "display_name": "Gin", "link": "https://stackoverflow.com/users/9802655/gin"}, "edited": false, "score": 0, "creation_date": 1526585841, "post_id": 50382167, "comment_id": 87814373, "body": "Thanks a lot for it, did you find this URL through its nested server? I am really curious about it. I worked my but off and finally can scrape the url I originally provided through the Selenium method (the original one has its table with Java encryption I guess)."}, {"owner": {"reputation": 119, "user_id": 9802655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20806bdb0e191f430d855a06181431b4?s=128&d=identicon&r=PG&f=1", "display_name": "Gin", "link": "https://stackoverflow.com/users/9802655/gin"}, "edited": false, "score": 0, "creation_date": 1526663594, "post_id": 50382167, "comment_id": 87848138, "body": "Thanks a lot man, definitely save my day. I am also curious if you are using Selenium as well? Before I saw your posted link, I can get the Scraping going by webdriver, however I encountered some Python scripting issue which I posted here:<a href=\"https://stackoverflow.com/questions/50415245/web-scrapy-with-selenium-error-while-obtaining-start-requests\" title=\"web scrapy with selenium error while obtaining start requests\">stackoverflow.com/questions/50415245/&hellip;</a> Would you mind also taking a look? Maybe I wrongfully used the Request clause"}, {"owner": {"reputation": 232, "user_id": 5314295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7uPxC.jpg?s=128&g=1", "display_name": "Laerte", "link": "https://stackoverflow.com/users/5314295/laerte"}, "reply_to_user": {"reputation": 119, "user_id": 9802655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20806bdb0e191f430d855a06181431b4?s=128&d=identicon&r=PG&f=1", "display_name": "Gin", "link": "https://stackoverflow.com/users/9802655/gin"}, "edited": false, "score": 0, "creation_date": 1526664799, "post_id": 50382167, "comment_id": 87848730, "body": "I will take a look, but from what i see you could use just scrapy you don&#39;t need use selenium in this case (I use selenium to crawl ASP.NET sites)."}, {"owner": {"reputation": 119, "user_id": 9802655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20806bdb0e191f430d855a06181431b4?s=128&d=identicon&r=PG&f=1", "display_name": "Gin", "link": "https://stackoverflow.com/users/9802655/gin"}, "edited": false, "score": 1, "creation_date": 1526669673, "post_id": 50382167, "comment_id": 87850919, "body": "Hi Laerte, I actually just resolved the selenium part and the question I asked in the post I just sent you was a bit trivial, so I delete that question post anyway. Thanks again for your help, I will eventually rewrite my code by the true table URL."}], "tags": [], "owner": {"reputation": 232, "user_id": 5314295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7uPxC.jpg?s=128&g=1", "display_name": "Laerte", "link": "https://stackoverflow.com/users/5314295/laerte"}, "is_accepted": true, "score": 0, "last_activity_date": 1526521433, "creation_date": 1526521433, "answer_id": 50382167, "question_id": 50379817, "link": "https://stackoverflow.com/questions/50379817/can-not-find-table-content-hidden-table-when-scrapy-on-a-web/50382167#50382167", "title": "can not find table content (hidden table) when scrapy on a web", "body": "<p>The reason the table is empty is that you are trying to scrapy the wrong url that contains data of table, the correct is:</p>\n\n<p><a href=\"http://www.cmegroup.com/CmeWS/mvc/xsltTransformer.do?xlstDoc=/XSLT/md/blocks-records.xsl&amp;url=/da/BlockTradeQuotes/V1/Block/BlockTrades?exchange=XCBT,XCME,XCEC,DUMX,XNYM&amp;foi=FUT,OPT,SPD&amp;assetClassId=0&amp;tradeDate=05172018&amp;sortCol=time&amp;sortBy=desc\" rel=\"nofollow noreferrer\">http://www.cmegroup.com/CmeWS/mvc/xsltTransformer.do?xlstDoc=/XSLT/md/blocks-records.xsl&amp;url=/da/BlockTradeQuotes/V1/Block/BlockTrades?exchange=XCBT,XCME,XCEC,DUMX,XNYM&amp;foi=FUT,OPT,SPD&amp;assetClassId=0&amp;tradeDate=05172018&amp;sortCol=time&amp;sortBy=desc</a></p>\n\n<p>The \"05172018\" text on url above looks like a date filter with this format: <code>MMDDYYYY</code>.</p>\n"}], "owner": {"reputation": 119, "user_id": 9802655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20806bdb0e191f430d855a06181431b4?s=128&d=identicon&r=PG&f=1", "display_name": "Gin", "link": "https://stackoverflow.com/users/9802655/gin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 184, "favorite_count": 0, "accepted_answer_id": 50382167, "answer_count": 1, "score": 0, "last_activity_date": 1560439480, "creation_date": 1526504456, "last_edit_date": 1560439480, "question_id": 50379817, "link": "https://stackoverflow.com/questions/50379817/can-not-find-table-content-hidden-table-when-scrapy-on-a-web", "title": "can not find table content (hidden table) when scrapy on a web", "body": "<p>I am trying to scrape the following url (<a href=\"http://cmegroup.com/clearing/operations-and-deliveries/accepted-trade-types/block-data.html/#contractTypes=FUT&amp;exchanges=XNYM&amp;assetClassId=0\" rel=\"nofollow noreferrer\">http://cmegroup.com/clearing/operations-and-deliveries/accepted-trade-types/block-data.html/#contractTypes=FUT&amp;exchanges=XNYM&amp;assetClassId=0</a>), the table content is what I'm interested, however looks like the table is hidden at somewhere:</p>\n\n<p>Right click the inspection on the table, I can get  ==$0 (following by )\nBut at scrapy shell, if I do response.xpath('//*[@table]'), it returns nothing which means I can't scrape the content by this way....\nPlease help on this issue, thanks.</p>\n\n<p>UPDATE: The final solution is by using Selenium (great tool) for this scrapy task, and selenium is especially useful when the web page content such as tables and etc. is java encrypted, there are tons of selenium instruction to be found in the community, here is one <a href=\"https://stackoverflow.com/questions/13724778/how-to-run-selenium-webdriver-test-cases-in-chrome\">example</a>.</p>\n"}, {"tags": ["python", "pyqt4", "qtgui", "qpixmap"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1526505259, "post_id": 50379796, "comment_id": 87776205, "body": "what is your question?"}, {"owner": {"reputation": 67, "user_id": 3066115, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/1720433631/picture?type=large", "display_name": "rodrigosillos", "link": "https://stackoverflow.com/users/3066115/rodrigosillos"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1526564093, "post_id": 50379796, "comment_id": 87801400, "body": "@eyllanesc How do I lock the server screen and continue to operate through the viewer?"}, {"owner": {"reputation": 67, "user_id": 3066115, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/1720433631/picture?type=large", "display_name": "rodrigosillos", "link": "https://stackoverflow.com/users/3066115/rodrigosillos"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1526564123, "post_id": 50379796, "comment_id": 87801422, "body": "@eyllanesc similar to teamviewer, I just need to lock the server screen and continue to operate remotely"}, {"owner": {"reputation": 67, "user_id": 3066115, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/1720433631/picture?type=large", "display_name": "rodrigosillos", "link": "https://stackoverflow.com/users/3066115/rodrigosillos"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1526745743, "post_id": 50379796, "comment_id": 87868763, "body": "@eyllanesc Do you have the availability to make a freelance for me?"}], "owner": {"reputation": 67, "user_id": 3066115, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/1720433631/picture?type=large", "display_name": "rodrigosillos", "link": "https://stackoverflow.com/users/3066115/rodrigosillos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1526504352, "creation_date": 1526504352, "question_id": 50379796, "link": "https://stackoverflow.com/questions/50379796/remote-desktop-display-element-in-desktop-and-not-transmit-via-buffer", "title": "Remote desktop - Display element in desktop and not transmit via buffer", "body": "<p>I'm developing a remote desktop for studies and need to display an element on the server screen and not stream to the viewer.</p>\n\n<p>It would be like blocking the client screen and the viewer continues to operate the computer in the background and performing maintenance.</p>\n\n<p>At the moment I'm going to apply the project to my client for maintenance.\nThe application already works perfectly, only this feature is missing.</p>\n\n<p>Below is the code responsible for transmitting the desktop to the viewer:</p>\n\n<pre><code>def _makeFramebuffer(self, width, height):\n    pix = QPixmap.grabWindow(QCoreApplication.instance().desktop().winId())\n    pix = pix.scaled(width, height)\n    if width &gt;= self._maxWidth or height &gt;= self._maxHeight:\n        width = self._maxWidth\n        height = self._maxHeight\n    pix.save(self._buffer, 'jpeg')\n    pixData = self._buffer.data()\n    self._array.clear()\n    self._buffer.close()\n    return \"%s\" % pixData\n</code></pre>\n\n<p>I do not want anything ready, just an insight and a direction. I've been studying and researching for days and I can not find anything.</p>\n\n<p>Thank you for your help!</p>\n"}, {"tags": ["python", "mysql"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 9577472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7e744dd3902713a1a77f538fbfd31ce?s=128&d=identicon&r=PG&f=1", "display_name": "totoro", "link": "https://stackoverflow.com/users/9577472/totoro"}, "edited": false, "score": 0, "creation_date": 1526566979, "post_id": 50379945, "comment_id": 87803452, "body": "Thank you for your helping. When I didn&#39;t add the passwd, it worked. I am not sure why??!!!!"}], "tags": [], "owner": {"reputation": 99308, "user_id": 107744, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7d6a34fb9a78937e1500b7ae0b5aee37?s=128&d=identicon&r=PG&f=1", "display_name": "spencer7593", "link": "https://stackoverflow.com/users/107744/spencer7593"}, "is_accepted": false, "score": 0, "last_activity_date": 1526505378, "last_edit_date": 1526505378, "creation_date": 1526505074, "answer_id": 50379945, "question_id": 50379764, "link": "https://stackoverflow.com/questions/50379764/mysqlaccess-denied-to-xlocalhost-using-python/50379945#50379945", "title": "MySQL:&quot;Access denied to x@localhost&#39; using python", "body": "<p>In MySQL, a user is identified by the username ( 'root' ) and the host the user is connecting from.</p>\n\n<p>In MySQL on Linux, the hostname \"localhost\" is special, it specifies a connection through a local socket, not a TCP/IP connection.</p>\n\n<p>It looks like DNS hostname resolution is enabled ( the <code>--skip-name-resolve</code> option is not specified for the MySQL server)</p>\n\n<p>Looks like MySQL server is seeing a connection coming from IP address 127.0.0.1, then doing a reverse lookup, and finding hostname \"localhost\", and then looking for a matching user 'root'@'localhost'.</p>\n\n<p>(That explanation seems a bit odd to me, but I don't have any other explanation for the behavior, given the Python connect is specifying MySQL server IP address of 127.0.0.1, and the error message reporting 'root'@'localhost'.) </p>\n\n<hr>\n\n<p>Some suggestions: </p>\n\n<p>Try forcing a TCP/IP connection rather than a local socket connection. With MySQL command line client, we would specify <code>--protocol=TCP</code> e.g.</p>\n\n<pre><code>mysql ... --protocol=TCP ...\n</code></pre>\n\n<p>I'm not sure the exact syntax for the Python connector, but I expect it would be very similar.</p>\n\n<p>Or, try specifying hostname of \"localhost\" to use local socket connection.</p>\n\n<p>Check the contents of mysql.user table for users that have 'root' as username </p>\n\n<pre><code>SELECT user, host, password FROM mysql.user WHERE user = 'root' \n</code></pre>\n\n<p>Note that the password for 'root'@'%' can be different than 'root'@'localhost', because those are <em>different</em> users.</p>\n\n<hr>\n\n<p>What is really confusing is that it looks like the connection has supplied IP address 127.0.0.1 as destination host, and that seems like it should force a TCP connection. But MySQL appears to be reporting an error attempting connection using a unix socket. </p>\n\n<p>Reported behavior is very strange. I'm not sure what's going on with the Python connector to cause <code>127.0.0.1</code> to be interpreted as a localhost socket connection.</p>\n\n<p>Here's a reference to the expected behavior:</p>\n\n<p><a href=\"https://dev.mysql.com/doc/refman/5.7/en/connecting.html\" rel=\"nofollow noreferrer\">https://dev.mysql.com/doc/refman/5.7/en/connecting.html</a></p>\n\n<blockquote>\n  <p>On Unix, MySQL programs treat the host name <strong>localhost</strong> specially, in a way that is likely different from what you expect compared to other network-based programs. For connections to <strong>localhost</strong>, MySQL programs attempt to connect to the local server by using a Unix socket file. This occurs even if a --port or -P option is given to specify a port number. To ensure that the client makes a TCP/IP connection to the local server, use --host or -h to specify a host name value of 127.0.0.1, or the IP address or name of the local server. You can also specify the connection protocol explicitly, even for localhost, by using the --protocol=TCP option. </p>\n</blockquote>\n"}], "owner": {"reputation": 11, "user_id": 9577472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7e744dd3902713a1a77f538fbfd31ce?s=128&d=identicon&r=PG&f=1", "display_name": "totoro", "link": "https://stackoverflow.com/users/9577472/totoro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 543, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1526505378, "creation_date": 1526504241, "question_id": 50379764, "link": "https://stackoverflow.com/questions/50379764/mysqlaccess-denied-to-xlocalhost-using-python", "title": "MySQL:&quot;Access denied to x@localhost&#39; using python", "body": "<p>I tried to connect MySQL using python. It connected in WorkBench MySQL. Then in the cmd, I tried to connect as well (shows as below). It worked well!</p>\n\n<pre><code>mysql -u MyNewPass\n</code></pre>\n\n<p><strong>However, when I ran the python code:</strong></p>\n\n<pre><code>db = MySQLdb.connect(host = \"127.0.0.1\", user=\"root\", passwd=\"MyNewPass\", db=\"test\", port=3306)\n</code></pre>\n\n<p>It showed the errors</p>\n\n<pre><code>db = MySQLdb.connect(host = \"127.0.0.1\", user=\"root\", passwd=\"MyNewPass\", db=\"test\", port=3306)\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"/usr/lib/python2.7/site-packages/MySQLdb/__init__.py\", line 74, in Connect\n    return Connection(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/MySQLdb/connections.py\", line 170, in __init__\n    super(Connection, self).__init__(*args, **kwargs2)\n_mysql_exceptions.OperationalError: (1045, \"Access denied for user 'root'@'localhost' (using password: YES)\")\n</code></pre>\n\n<p>Can anyone help me about that? Thanks</p>\n"}, {"tags": ["python", "tensorflow"], "answers": [{"tags": [], "owner": {"reputation": 83, "user_id": 4007547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84f3dca9a2a921e5697b6f3d55d04305?s=128&d=identicon&r=PG&f=1", "display_name": "ricvo", "link": "https://stackoverflow.com/users/4007547/ricvo"}, "is_accepted": false, "score": 2, "last_activity_date": 1540414620, "creation_date": 1540414620, "answer_id": 52977803, "question_id": 50379744, "link": "https://stackoverflow.com/questions/50379744/tensorflow-very-large-estimators-logs-with-dataset-from-tensor-slices/52977803#52977803", "title": "Tensorflow: very large estimator&#39;s logs with Dataset.from_tensor_slices()", "body": "<p>I had a similar issue, I solved using tf.data.Dataset.from_generator\nor tf.data.Dataset.range and then dataset.map to get the particular value.</p>\n\n<p>E.g. with generator</p>\n\n<pre><code>def generator():\n   for sample in zip(*datasets_tuple):\n     yield sample\n\ndataset = tf.data.Dataset.from_generator(generator,\n       output_types=output_types, output_shapes=output_shapes)\n</code></pre>\n"}], "owner": {"reputation": 569, "user_id": 5696021, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/bafff264caed652f47f8ad96e13ce911?s=128&d=identicon&r=PG&f=1", "display_name": "3voC", "link": "https://stackoverflow.com/users/5696021/3voc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 425, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1540414620, "creation_date": 1526504150, "last_edit_date": 1526547654, "question_id": 50379744, "link": "https://stackoverflow.com/questions/50379744/tensorflow-very-large-estimators-logs-with-dataset-from-tensor-slices", "title": "Tensorflow: very large estimator&#39;s logs with Dataset.from_tensor_slices()", "body": "<p>I've been studying mnist estimator code (<a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/examples/tutorials/layers/cnn_mnist.py\" rel=\"nofollow noreferrer\">https://github.com/tensorflow/tensorflow/blob/master/tensorflow/examples/tutorials/layers/cnn_mnist.py</a>)\nand after training or 150 000 steps with this code, logs produced by an estimator have 31M in size. (13M for each weight checkpoint and 5M for graph definition).</p>\n\n<p>While tinkering with code I wrote my own train_input_fn using <code>tf.data.Dataset.from_tensor_slices()</code>.\nMy code here: </p>\n\n<pre><code>def my_train_input_fn():\n    mnist = tf.contrib.learn.datasets.load_dataset(\"mnist\")\n    images = mnist.train.images  # Returns np.array\n    labels = np.asarray(mnist.train.labels, dtype=np.int32)\n    dataset = tf.data.Dataset.from_tensor_slices(\n        ({\"x\": images}, labels))\n    dataset = dataset.shuffle(50000).repeat().batch(100)\n\n    return dataset\n</code></pre>\n\n<p>And, my logs, even before one step of the training, only after graph initalization, had size over 1,5G! (165M for ckpt-meta, around 600M for each events.out.tfevents and for graph.pbtxt files).</p>\n\n<p>After a little research I found out that the function from_tensor_slices() is not appropriate for larger datasets, because it creates constants in the execution graph. </p>\n\n<blockquote>\n  <p>Note that the above code snippet will embed the features and labels\n  arrays in your TensorFlow graph as tf.constant() operations. This\n  works well for a small dataset, but wastes memory---because the\n  contents of the array will be copied multiple times---and can run into\n  the 2GB limit for the tf.GraphDef protocol buffer.</p>\n</blockquote>\n\n<p>source: \n<a href=\"https://www.tensorflow.org/programmers_guide/datasets\" rel=\"nofollow noreferrer\">https://www.tensorflow.org/programmers_guide/datasets</a></p>\n\n<p>But mnist dataset has only around 13M in size. So why my graph definition has 600M, not only those additional 13M embedded as constants? And why events file is so big?</p>\n\n<p>The original dataset producing code (<a href=\"https://github.com/tensorflow/tensorflow/blob/r1.8/tensorflow/python/estimator/inputs/numpy_io.py\" rel=\"nofollow noreferrer\">https://github.com/tensorflow/tensorflow/blob/r1.8/tensorflow/python/estimator/inputs/numpy_io.py</a>) doesn't produce such large logs files. I guess it is because of queues usage. But now queues are deprecated and we should use <code>tf.Dataset</code> instead of queues, right? What is the correct method of creating such dataset from file containing images (not from <code>TFRecord</code>)? Should I use <code>tf.data.FixedLengthRecordDataset</code>?</p>\n"}, {"tags": ["python", "loops"], "answers": [{"tags": [], "owner": {"reputation": 836, "user_id": 6541288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7d0b24428d61a0adbae78280ca52cdc?s=128&d=identicon&r=PG&f=1", "display_name": "\u03bbuser", "link": "https://stackoverflow.com/users/6541288/%ce%bbuser"}, "is_accepted": false, "score": -1, "last_activity_date": 1526504669, "creation_date": 1526504669, "answer_id": 50379860, "question_id": 50379740, "link": "https://stackoverflow.com/questions/50379740/pythonic-version-of-loop/50379860#50379860", "title": "Pythonic version of loop", "body": "<p>use <code>zip</code>:</p>\n\n<pre><code>for indate, enddate in zip(datelist, datelist[1:]):\n    indateunix = tm.mktime(indate.timetuple())\n    enddateunix = tm.mktime(enddate.timetuple())\n    ...\n</code></pre>\n"}], "owner": {"reputation": 1025, "user_id": 3630791, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/97433aa29fbcf3b8efe7466b370bc8d8?s=128&d=identicon&r=PG&f=1", "display_name": "RiskTech", "link": "https://stackoverflow.com/users/3630791/risktech"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1526504669, "creation_date": 1526504134, "question_id": 50379740, "link": "https://stackoverflow.com/questions/50379740/pythonic-version-of-loop", "title": "Pythonic version of loop", "body": "<p>I am writing a loop to make an API call in other to retrieve financial time series data between 2 dates. Given the API limitations i have to make a series of small date intervals and use a loop to make a sequence of calls. I was able to do it using the following loop :</p>\n\n<pre><code>#create a datelist index of smaller intervals\n\nstart_date = dtm.datetime(2014,1,1)\nend_date = dtm.datetime.now()\ndatelist = pd.date_range(start=start_date, end=end_date, freq='M')\nstart_date = datelist[-1].date() +dtm.timedelta(days=1)\ndatelist.append(pd.date_range(start=start_date, end=end_date, freq='D'))\n\n#get the intial and next date on the list convert to UNIX format and pass the interval on the API call\n\nfor n in range(len(datelist)-1):\n    indateunix = tm.mktime(datelist[n].timetuple())\n    enddateunix = tm.mktime(datelist[n + 1].timetuple())\n    templist = self._api_call.returnChartData(ticker= 'FB', period='D',start=indateunix, end=enddateunix)\n    arr = arr + templist\n</code></pre>\n\n<p>I imagine this is not the best way to do it, is there any pythonic version for the same loop ?</p>\n"}, {"tags": ["python", "geo"], "comments": [{"owner": {"reputation": 3335, "user_id": 2504700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d0abf29ecc7c49d76db8e9820608297?s=128&d=identicon&r=PG", "display_name": "OriolAbril", "link": "https://stackoverflow.com/users/2504700/oriolabril"}, "edited": false, "score": 0, "creation_date": 1526504828, "post_id": 50379732, "comment_id": 87776035, "body": "How are zones defined? Would it work having a new column with a zone id in the dataframe?"}, {"owner": {"reputation": 75, "user_id": 9101045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6a620cd7bc93a9167d5fa3fdbf50eb1?s=128&d=identicon&r=PG&f=1", "display_name": "E. Lutins", "link": "https://stackoverflow.com/users/9101045/e-lutins"}, "reply_to_user": {"reputation": 3335, "user_id": 2504700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d0abf29ecc7c49d76db8e9820608297?s=128&d=identicon&r=PG", "display_name": "OriolAbril", "link": "https://stackoverflow.com/users/2504700/oriolabril"}, "edited": false, "score": 0, "creation_date": 1526570743, "post_id": 50379732, "comment_id": 87806095, "body": "Yes, there would be a new column in the dataframe with zone id included.  Trying to figure out first how to divide the region into a grid, and then secondly assign the data points to distinct zones within that grid."}, {"owner": {"reputation": 3335, "user_id": 2504700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d0abf29ecc7c49d76db8e9820608297?s=128&d=identicon&r=PG", "display_name": "OriolAbril", "link": "https://stackoverflow.com/users/2504700/oriolabril"}, "edited": false, "score": 0, "creation_date": 1526570936, "post_id": 50379732, "comment_id": 87806229, "body": "I don&#39;t quite see why is it necessary to create a grid. Using pandas, something like <code>df.loc[&#39;zone_id&#39;,df.Latitude&lt;3 &amp; df.Longitude&gt;6]=2</code> can be done looping over the zones or something like that. that is why I am asking how are zones defined"}, {"owner": {"reputation": 75, "user_id": 9101045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6a620cd7bc93a9167d5fa3fdbf50eb1?s=128&d=identicon&r=PG&f=1", "display_name": "E. Lutins", "link": "https://stackoverflow.com/users/9101045/e-lutins"}, "reply_to_user": {"reputation": 3335, "user_id": 2504700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d0abf29ecc7c49d76db8e9820608297?s=128&d=identicon&r=PG", "display_name": "OriolAbril", "link": "https://stackoverflow.com/users/2504700/oriolabril"}, "edited": false, "score": 0, "creation_date": 1526580844, "post_id": 50379732, "comment_id": 87811726, "body": "Right now I do not have predefined zones. I want to map the data points in order to create the zones. The zones dont necessarily have to be the squares within a grid, any polygon shape will work. Trying to figure out best approach to mapping the points and then creating the zones. There are thousands of data points all within the same city, very tight window"}, {"owner": {"reputation": 3335, "user_id": 2504700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d0abf29ecc7c49d76db8e9820608297?s=128&d=identicon&r=PG", "display_name": "OriolAbril", "link": "https://stackoverflow.com/users/2504700/oriolabril"}, "edited": false, "score": 0, "creation_date": 1526590075, "post_id": 50379732, "comment_id": 87816431, "body": "I hope the answer posted will acomplish what you want. I am not sure to have properly understood the question though"}], "answers": [{"tags": [], "owner": {"reputation": 3335, "user_id": 2504700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d0abf29ecc7c49d76db8e9820608297?s=128&d=identicon&r=PG", "display_name": "OriolAbril", "link": "https://stackoverflow.com/users/2504700/oriolabril"}, "is_accepted": false, "score": 0, "last_activity_date": 1526586890, "creation_date": 1526586890, "answer_id": 50399584, "question_id": 50379732, "link": "https://stackoverflow.com/questions/50379732/creating-geographical-zones-and-assigning-points/50399584#50399584", "title": "Creating Geographical Zones and Assigning Points", "body": "<p>One option is to implement this mapping using functions that return <code>True</code> if the x,y pair is inside said zone and <code>False</code> otherwise. Working with pandas, this function can be easily implemented. Below there are examples of some of these functions (credit for the triangle function to <a href=\"https://stackoverflow.com/a/14382692/2504700\">How to determine if a point is in a 2D triangle?</a>):</p>\n\n<pre><code>def triangle(x,y,verts):\n    p0x,p0y = verts[0]; p1x,p1y = verts[1]; p2x,p2y = verts[2];\n    area = 0.5 *(-p1y*p2x + p0y*(-p1x + p2x) + p0x*(p1y - p2y) + p1x*p2y);\n    s = 1/(2*area)*(p0y*p2x - p0x*p2y + (p2y - p0y)*x + (p0x - p2x)*y);\n    t = 1/(2*area)*(p0x*p1y - p0y*p1x + (p0y - p1y)*x + (p1x - p0x)*y);\n    return (s&gt;0) &amp; (t&gt;0) &amp; (1-s-t&gt;0)\n\ndef upper_square(x,y):\n    return (x&gt;4) &amp; (y&gt;4)\n\ndef circle(x,y):\n    return ((x-2)**2+(y-2)**2)&lt;1\n</code></pre>\n\n<p>Then, you can loop over each zone in order to assign the values to the new column. One example using the above functions would be using a dict to map the zone function to the zone id:</p>\n\n<pre><code># define data\ndf = pd.DataFrame(np.random.random((10000,2))*5,columns=['lat','lon'])\nt1 = ((0,0),(0,3),(1,0))\nt2 = ((4,4),(4,2),(2,4))\n# define relation between zone id and zone function\nzones = {1:upper_square,2:lambda x,y: triangle(x,y,t1),3:lambda x,y: triangle(x,y,t2),4:circle}\ndf['zone']=0 # this will serve as everything else zone\n# loop over zones and update df.zone column\nfor zone,zone_fun in zones.items():\n    mask = zone_fun(df.lat,df.lon)\n    df.loc[mask,'zone'] = zone\n</code></pre>\n\n<p>Here, we have 5 zones, one square, 2 triangles, one circle and everything else. We can check whether the assignation worked or not with the following plot, that will plot the points with a different color depending on their <code>df.zone</code> value:</p>\n\n<pre><code>plt.scatter(df.lat,df.lon,c = df.zone,s=10,cmap='plasma')\nplt.gca().set_aspect('equal') \n</code></pre>\n\n<p>Which yields:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Y6j4a.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Y6j4a.png\" alt=\"zones\"></a></p>\n"}], "owner": {"reputation": 75, "user_id": 9101045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6a620cd7bc93a9167d5fa3fdbf50eb1?s=128&d=identicon&r=PG&f=1", "display_name": "E. Lutins", "link": "https://stackoverflow.com/users/9101045/e-lutins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 779, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1526586890, "creation_date": 1526504078, "question_id": 50379732, "link": "https://stackoverflow.com/questions/50379732/creating-geographical-zones-and-assigning-points", "title": "Creating Geographical Zones and Assigning Points", "body": "<p>I have a list of coordinates in a pandas data frame and want to assign each coordinate to a zone. However, right now I do not have distinct zones mapped out. My goal is to divide the given region into a grid, with each square of the grid as its own unique zone. Finally, given my coordinates I want to count how many points fall inside each zone. Does anybody know the best way of going about this in python?</p>\n\n<pre><code>lat = df.Latitude.values\nlon = df.Longitude.values\ncoords = zip(lat, lon)\n</code></pre>\n"}, {"tags": ["python", "multithreading", "websocket", "python-multithreading", "gil"], "answers": [{"comments": [{"owner": {"reputation": 60, "user_id": 4576228, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8992d8af3f3bca2b53d8cee8ade7b56b?s=128&d=identicon&r=PG&f=1", "display_name": "lordf", "link": "https://stackoverflow.com/users/4576228/lordf"}, "edited": false, "score": 0, "creation_date": 1526505443, "post_id": 50379960, "comment_id": 87776268, "body": "i gather calling time.sleep() will release the GIL though, or is there a different call to block the GIL?"}, {"owner": {"reputation": 9526, "user_id": 9758922, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ryhQ0.png?s=128&g=1", "display_name": "nuric", "link": "https://stackoverflow.com/users/9758922/nuric"}, "reply_to_user": {"reputation": 60, "user_id": 4576228, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8992d8af3f3bca2b53d8cee8ade7b56b?s=128&d=identicon&r=PG&f=1", "display_name": "lordf", "link": "https://stackoverflow.com/users/4576228/lordf"}, "edited": false, "score": 0, "creation_date": 1526505577, "post_id": 50379960, "comment_id": 87776324, "body": "True, just to be super safe you can busy wait and try to calculate Fibonacci numbers .)"}], "tags": [], "owner": {"reputation": 9526, "user_id": 9758922, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ryhQ0.png?s=128&g=1", "display_name": "nuric", "link": "https://stackoverflow.com/users/9758922/nuric"}, "is_accepted": true, "score": 0, "last_activity_date": 1526505158, "creation_date": 1526505158, "answer_id": 50379960, "question_id": 50379706, "link": "https://stackoverflow.com/questions/50379706/if-i-am-listening-to-a-websocket-in-one-thread-and-running-a-function-in-another/50379960#50379960", "title": "If I am listening to a websocket in one thread and running a function in another thread is it possible to miss messages", "body": "<p>Not really, even if your application is completely blocked say by scheduling or simply sleeping the operating system will queue the incoming network messages. You might lose messages say if the TCP buffer starts to overflow, I reckon that is unlikely in your case. You can test your idea by deliberately sleeping in the 4th thread for some time and see if messages are dropped.</p>\n"}], "owner": {"reputation": 60, "user_id": 4576228, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8992d8af3f3bca2b53d8cee8ade7b56b?s=128&d=identicon&r=PG&f=1", "display_name": "lordf", "link": "https://stackoverflow.com/users/4576228/lordf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 50379960, "answer_count": 1, "score": 0, "last_activity_date": 1526505158, "creation_date": 1526503964, "question_id": 50379706, "link": "https://stackoverflow.com/questions/50379706/if-i-am-listening-to-a-websocket-in-one-thread-and-running-a-function-in-another", "title": "If I am listening to a websocket in one thread and running a function in another thread is it possible to miss messages", "body": "<p>Title says it all really. I am running a program on a Linux EC2 instance with 4 threads. Three of these are listening to different websockets and the final one is webscraping and calling off a set of other functions when needed.</p>\n\n<p>Is it possible that if the GIL is owned by the 4th thread (i.e it is currently running its calculation through the single core) that websocket messages could be 'missed' by the threads listening? </p>\n\n<p>I am beginning to think it isn't possible, but have no understanding as to why. I have looked around, but to little avail.</p>\n"}, {"tags": ["python", "pandas", "conditional", "bar-chart", "timeserieschart"], "comments": [{"owner": {"reputation": 41182, "user_id": 6671176, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4DvZ4.png?s=128&g=1", "display_name": "sacuL", "link": "https://stackoverflow.com/users/6671176/sacul"}, "edited": false, "score": 1, "creation_date": 1526504223, "post_id": 50379670, "comment_id": 87775752, "body": "It sounds like you want someone to write your code for you... SO is here to help programmers who are having a specific problem with their code, after they&#39;ve given it a good attempt. If you&#39;ve attempted something, and you&#39;re stuck at a certain point, let us know what you&#39;ve tried and what you&#39;re having a hard time achieving, and I&#39;m sure someone will help you out"}, {"owner": {"reputation": 599, "user_id": 3877165, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/4f5b7a157319a9d89906ae5d04614599?s=128&d=identicon&r=PG&f=1", "display_name": "eternity1", "link": "https://stackoverflow.com/users/3877165/eternity1"}, "reply_to_user": {"reputation": 41182, "user_id": 6671176, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4DvZ4.png?s=128&g=1", "display_name": "sacuL", "link": "https://stackoverflow.com/users/6671176/sacul"}, "edited": false, "score": 0, "creation_date": 1526504624, "post_id": 50379670, "comment_id": 87775940, "body": "Please apologize if that is how it came across. In fact I already got stuck with step 1) to get the respective subgroups for the quarterly grouping. In general, as I wrote, I would have created another column <code>year</code> or <code>quarter</code> and sum grouped by. I&#39;ll update in my answer what I&#39;ve got so far"}, {"owner": {"reputation": 41182, "user_id": 6671176, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4DvZ4.png?s=128&g=1", "display_name": "sacuL", "link": "https://stackoverflow.com/users/6671176/sacul"}, "edited": false, "score": 0, "creation_date": 1526505028, "post_id": 50379670, "comment_id": 87776117, "body": "Great! just FYI, lots of people do attempt to use SO as a free coding service, which is why it&#39;s always good to show that that&#39;s not your intention in your questions."}], "answers": [{"comments": [{"owner": {"reputation": 599, "user_id": 3877165, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/4f5b7a157319a9d89906ae5d04614599?s=128&d=identicon&r=PG&f=1", "display_name": "eternity1", "link": "https://stackoverflow.com/users/3877165/eternity1"}, "edited": false, "score": 0, "creation_date": 1526533319, "post_id": 50382813, "comment_id": 87782782, "body": "thank you @wwii for the multiindexing! in fact I could then show per year 4 bars (1 one for each quarter too)."}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "reply_to_user": {"reputation": 599, "user_id": 3877165, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/4f5b7a157319a9d89906ae5d04614599?s=128&d=identicon&r=PG&f=1", "display_name": "eternity1", "link": "https://stackoverflow.com/users/3877165/eternity1"}, "edited": false, "score": 0, "creation_date": 1526583619, "post_id": 50382813, "comment_id": 87813264, "body": "@eternity1 with the MultiIndex you may not even need the groupby&#39;s - take a look at the MultiIndex section of the docs and there are some pretty flexible indexing methods that might  obviate the groupby&#39;s - <a href=\"http://pandas.pydata.org/pandas-docs/stable/advanced.html\" rel=\"nofollow noreferrer\">pandas.pydata.org/pandas-docs/stable/advanced.html</a>"}], "tags": [], "owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "is_accepted": false, "score": 1, "last_activity_date": 1526526953, "creation_date": 1526526953, "answer_id": 50382813, "question_id": 50379670, "link": "https://stackoverflow.com/questions/50379670/python-bar-chart-plot-sum-of-values-by-a-year-and-b-quarter-across-all-year/50382813#50382813", "title": "Python: Bar chart - plot sum of values by a) year and b) quarter across all years", "body": "<pre><code>start = datetime(1998, 1, 1)\nend = datetime(2001, 12, 31)\ndates = pd.date_range(start, end, freq = 'D')\n</code></pre>\n\n<p>Create the DataFrame with a MultiIndex - (year,quarter)</p>\n\n<pre><code>index = pd.MultiIndex.from_tuples([(thing.year, thing.quarter) for thing in dates])\ndf = pd.DataFrame(np.random.randn(len(dates), 3), index = index, \n                  columns = ['returns', 'pnl', 'no_trades'])\n</code></pre>\n\n<p>Then you can group by year, quarter or year and quarter:</p>\n\n<pre><code>gb_yr = df.groupby(level=0)\ngb_qtr = df.groupby(level=1)\ngb_yr_qtr = df.groupby(level=(0,1))\n\n&gt;&gt;&gt; \n&gt;&gt;&gt; # yearly means\n&gt;&gt;&gt; gb_yr.mean()\n       returns       pnl  no_trades\n1998  0.080989 -0.019115   0.142576\n1999 -0.040881 -0.005331   0.029815\n2000 -0.036227 -0.100028  -0.009175\n2001  0.097230 -0.019342  -0.089498\n&gt;&gt;&gt; \n&gt;&gt;&gt; # quarterly means across all years\n&gt;&gt;&gt; gb_qtr.mean()\n    returns       pnl  no_trades\n1  0.036992  0.023923   0.048497\n2  0.053445 -0.039583   0.076721\n3  0.003891 -0.016180   0.004619\n4  0.007145 -0.111050  -0.054988\n&gt;&gt;&gt; \n&gt;&gt;&gt; # means by year and quarter\n&gt;&gt;&gt; gb_yr_qtr.mean()\n         returns       pnl  no_trades\n1998 1 -0.062570  0.139856   0.105288\n     2  0.044946 -0.008685   0.200393\n     3  0.152209  0.007341   0.119093\n     4  0.185858 -0.211401   0.145347\n1999 1  0.085799  0.072655   0.054060\n     2  0.111595  0.002972   0.068792\n     3 -0.194506 -0.093435   0.107210\n     4 -0.161999 -0.001732  -0.109851\n2000 1  0.001543 -0.083488   0.174226\n     2 -0.064343 -0.158431  -0.071415\n     3 -0.036334 -0.037008  -0.068717\n     4 -0.045669 -0.121640  -0.069474\n2001 1  0.123592 -0.032138  -0.140982\n     2  0.121582  0.005810   0.109115\n     3  0.094194  0.058382  -0.139110\n     4  0.050388 -0.109429  -0.185975\n&gt;&gt;&gt;\n&gt;&gt;&gt; # operate on single columns\n&gt;&gt;&gt; gb_yr['pnl'].sum()\n1998    -6.976917\n1999    -1.945935\n2000   -36.610206\n2001    -7.060010\nName: pnl, dtype: float64\n\n&gt;&gt;&gt; # plotting\n&gt;&gt;&gt; from matplotlib import pyplot as plt\n&gt;&gt;&gt; gb_yr.mean().plot()\n&lt;matplotlib.axes._subplots.AxesSubplot object at 0x000000000C04BF28&gt;\n&gt;&gt;&gt; plt.show()\n&gt;&gt;&gt; plt.close()\n</code></pre>\n"}], "owner": {"reputation": 599, "user_id": 3877165, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/4f5b7a157319a9d89906ae5d04614599?s=128&d=identicon&r=PG&f=1", "display_name": "eternity1", "link": "https://stackoverflow.com/users/3877165/eternity1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3294, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1526526953, "creation_date": 1526503824, "last_edit_date": 1526505141, "question_id": 50379670, "link": "https://stackoverflow.com/questions/50379670/python-bar-chart-plot-sum-of-values-by-a-year-and-b-quarter-across-all-year", "title": "Python: Bar chart - plot sum of values by a) year and b) quarter across all years", "body": "<p>I have time series data, i.e. by date (YYYY-MM-DD), returns, pnl, # of trades:</p>\n\n<pre><code>date             returns       pnl      no_trades\n1998-01-01         0.01        0.05         5\n1998-01-02        -0.04        0.12         2\n...\n2010-12-31         0.05        0.25         3\n</code></pre>\n\n<p>Now I would like to show horizontal bar charts with \na) the average of the returns\nb) sum of the pnls </p>\n\n<p>by:</p>\n\n<p>1) year, i.e. 1998, 1999, ..., 2010</p>\n\n<p>2) quarter across all years, i.e. Q1 (YYYY-01-01 to YYYY-03-31), Q2, .., Q4</p>\n\n<p>Additionally, the sum of # of trades per 1) and 2) should denote a number next to each of the horizontal bars.</p>\n\n<p>So in my opinion there needs to be two separate steps:</p>\n\n<p>1) Get the data in the right format</p>\n\n<p>2) Feed the data to the plot and then with overlay of multiple plots.</p>\n\n<p>Sample data:</p>\n\n<pre><code>start = datetime(1998, 1, 1)\nend = datetime(2001, 12, 31)\ndates = pd.date_range(start, end, freq = 'D')\n\ndf = pd.DataFrame(np.random.randn(len(dates), 3), index = dates, \n                  columns = ['returns', 'pnl', 'no_trades'])\n</code></pre>\n\n<p>So that could be two horizontal bar charts for year and quarter each:</p>\n\n<p>1) one for returns: bar chart, number in the middle of the bar, sum of no_trades at the end of the bar</p>\n\n<p>2) one for pnl: bar chart, number in the middle of the bar, sum of no_trades at the end of the bar</p>\n\n<p>Plus a dotted line vertical line across the going across the bars showing the average returns and pnl.</p>\n\n<p>I could do it in excel (which in fact is adding columns with the respective view and then pivot chart it), but would prefer an \"automatized\" way with the possibility to reproduce (or understand how it's done) via python.</p>\n\n<p>edit: as discussed in below comment, this is how far I've got; however, I am not sure whether this is the most the fastest approach with regards to 1). I am currently working on 2). </p>\n\n<pre><code>df_ret_year = df[['date', 'returns']].groupby(df['date'].dt.year).mean()\ndf_ret_quarter = df[['date', 'returns']].groupby(df['date'].dt.quarter).mean()\n\ndf_pnl_year = df[['date', 'pnl']].groupby(df['date'].dt.year).sum()\ndf_pnl_quarter = df[['date', 'pnl']].groupby(df['date'].dt.quarter).sum()\n\ndf_trades_year = df[['date', 'pnl']].groupby(df['date'].dt.year).sum()\ndf_trades_quarter = df[['date', 'pnl']].groupby(df['date'].dt.quarter).sum()\n</code></pre>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1526503828, "post_id": 50379654, "comment_id": 87775582, "body": "There is no class object while the class body is executing."}, {"owner": {"reputation": 836, "user_id": 6541288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7d0b24428d61a0adbae78280ca52cdc?s=128&d=identicon&r=PG&f=1", "display_name": "\u03bbuser", "link": "https://stackoverflow.com/users/6541288/%ce%bbuser"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1526504125, "post_id": 50379654, "comment_id": 87775702, "body": "to complete @user2357112&#39;s answer: [<i>The class\u2019s suite is then executed in a new execution frame, using a newly created local namespace and the original global namespace. [...] A class object is then created using the inheritance list for the base classes and the saved local namespace for the attribute dictionary. The class name is bound to this class object in the original local namespace.</i>](<a href=\"https://docs.python.org/3/reference/compound_stmts.html#class-definitions\" rel=\"nofollow noreferrer\">docs.python.org/3/reference/&hellip;</a>)."}, {"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 1, "creation_date": 1526504696, "post_id": 50379654, "comment_id": 87775972, "body": "You can do <code>get_id_fields(__qualname__)</code>"}, {"owner": {"reputation": 21716, "user_id": 2401769, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/wkEbw.jpg?s=128&g=1", "display_name": "Matias Cicero", "link": "https://stackoverflow.com/users/2401769/matias-cicero"}, "edited": false, "score": 0, "creation_date": 1526505842, "post_id": 50379654, "comment_id": 87776415, "body": "Please note that <code>__qualname__</code> was added on &gt;= Python 3.3. For older versions, you probably need to handle this on a <code>metaclass</code>"}], "answers": [{"tags": [], "owner": {"reputation": 5591, "user_id": 20161, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b5692066c646c8bec0037651464abf4d?s=128&d=identicon&r=PG", "display_name": "Pat", "link": "https://stackoverflow.com/users/20161/pat"}, "is_accepted": true, "score": 0, "last_activity_date": 1526506009, "creation_date": 1526506009, "answer_id": 50380128, "question_id": 50379654, "link": "https://stackoverflow.com/questions/50379654/access-to-class-object-during-class-definition/50380128#50380128", "title": "Access to class object during class definition", "body": "<p>Thanks to @alex-hall for the comment.</p>\n\n<p><a href=\"https://www.python.org/dev/peps/pep-3155/\" rel=\"nofollow noreferrer\">PEP-3155</a> says that:</p>\n\n<ul>\n<li><code>__qualname__</code> is the name of the class</li>\n<li><code>__name__</code> is the module name</li>\n</ul>\n"}], "owner": {"reputation": 5591, "user_id": 20161, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b5692066c646c8bec0037651464abf4d?s=128&d=identicon&r=PG", "display_name": "Pat", "link": "https://stackoverflow.com/users/20161/pat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 50380128, "answer_count": 1, "score": 0, "last_activity_date": 1526591943, "creation_date": 1526503762, "last_edit_date": 1526591943, "question_id": 50379654, "link": "https://stackoverflow.com/questions/50379654/access-to-class-object-during-class-definition", "title": "Access to class object during class definition", "body": "<p>In PyCharm I don't see any variable I can use for this purpose. However, PyCharm seems to hide some of the dunder variables. (for example, <code>__dict__</code> )</p>\n\n<p>I would like to do something like this:</p>\n\n<pre><code>class Foo:\n   __id_fields__ = get_id_fields(cls)\n</code></pre>\n\n<p>Where <code>cls.__name__</code> is defined.</p>\n\n<p>Rather than this:</p>\n\n<pre><code>class Foo:\n   __id_fields__ = get_id_fields(\"Foo\")\n</code></pre>\n\n<p>The root questions are really:</p>\n\n<ol>\n<li>What variables/information is available while defining the class?</li>\n<li>How to properly programmatically add attributes to a Python class in the class definition?</li>\n</ol>\n\n<p>Links to relevant docs are appreciated.</p>\n"}, {"tags": ["python", "multithreading", "io"], "answers": [{"tags": [], "owner": {"reputation": 7054, "user_id": 88696, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/53e20180f0c292fcb589f77f738ed402?s=128&d=identicon&r=PG", "display_name": "Jesse Aldridge", "link": "https://stackoverflow.com/users/88696/jesse-aldridge"}, "is_accepted": true, "score": 0, "last_activity_date": 1526518787, "creation_date": 1526518787, "answer_id": 50381896, "question_id": 50379652, "link": "https://stackoverflow.com/questions/50379652/python-getch-print-from-separate-thread/50381896#50381896", "title": "Python getch + print from separate thread", "body": "<p>It's a weird hack, but printing backspace characters seems to fix the problem:</p>\n\n<pre><code>import sys, termios, tty, time, threading, random\n\ndef getch():\n  # Return a single character from stdin.\n\n  fd = sys.stdin.fileno()\n  old_settings = termios.tcgetattr(fd)\n  try:\n    tty.setraw(sys.stdin.fileno())\n    ch = sys.stdin.read(1)\n  finally:\n    termios.tcsetattr(fd, termios.TCSADRAIN, old_settings)\n  return ch\n\n\ndef do_stuff():\n  prev_line = ''\n  for i in range(10):\n    time.sleep(.5)\n    next_line = str(i) * random.randrange(1, 10)\n    print '\\b' * len(prev_line) + next_line\n    prev_line = next_line\n\n\nt = threading.Thread(target=do_stuff, args=[], kwargs={})\nt.start()\n\nprint 'press any key'\nprint getch()\nprint 'done'\n</code></pre>\n"}], "owner": {"reputation": 7054, "user_id": 88696, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/53e20180f0c292fcb589f77f738ed402?s=128&d=identicon&r=PG", "display_name": "Jesse Aldridge", "link": "https://stackoverflow.com/users/88696/jesse-aldridge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 50381896, "answer_count": 1, "score": 0, "last_activity_date": 1526518787, "creation_date": 1526503739, "question_id": 50379652, "link": "https://stackoverflow.com/questions/50379652/python-getch-print-from-separate-thread", "title": "Python getch + print from separate thread", "body": "<p>I have a program that runs in the terminal and waits for a keystroke. I launch a background thread on initialization. I want to do a <code>print</code> from the background thread, but the output is indented. Why is the output indented? Is it possible to make it not be indented?</p>\n\n<pre><code>import sys, termios, tty, time, threading\n\ndef getch():\n  # Taken from https://stackoverflow.com/questions/510357/python-read-a-single-character-from-the-user\n\n  fd = sys.stdin.fileno()\n  old_settings = termios.tcgetattr(fd)\n  try:\n    tty.setraw(sys.stdin.fileno())\n    ch = sys.stdin.read(1)\n  finally:\n    termios.tcsetattr(fd, termios.TCSADRAIN, old_settings)\n  return ch\n\n\ndef do_stuff():\n  for i in range(5):\n    time.sleep(1)\n    print 'test {}'.format(i)\n\nt = threading.Thread(target=do_stuff, args=[], kwargs={})\nt.start()\n\n\nprint 'press any key'\nprint getch()\nprint 'done'\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>press any key\ntest 0\n      test 1\n            test 2\n                  test 3\n                        test 4\n                              x\ndone\n</code></pre>\n"}, {"tags": ["python", "tensorflow"], "comments": [{"owner": {"reputation": 2338, "user_id": 3080953, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fe6bc2a51d294b0d1d65fa203e496c7a?s=128&d=identicon&r=PG&f=1", "display_name": "c2huc2hu", "link": "https://stackoverflow.com/users/3080953/c2huc2hu"}, "edited": false, "score": 0, "creation_date": 1526504139, "post_id": 50379644, "comment_id": 87775713, "body": "Would it be easier to make <code>A</code> a variable and solve for <code>a[0,0]</code> and <code>A[1,1]</code> instead?"}, {"owner": {"reputation": 712, "user_id": 6815126, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/ddb0f368ab3f7b9fbea0ab740947f31c?s=128&d=identicon&r=PG&f=1", "display_name": "measure_theory", "link": "https://stackoverflow.com/users/6815126/measure-theory"}, "reply_to_user": {"reputation": 2338, "user_id": 3080953, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fe6bc2a51d294b0d1d65fa203e496c7a?s=128&d=identicon&r=PG&f=1", "display_name": "c2huc2hu", "link": "https://stackoverflow.com/users/3080953/c2huc2hu"}, "edited": false, "score": 0, "creation_date": 1526504231, "post_id": 50379644, "comment_id": 87775755, "body": "Thought about that, but what I wrote is actually the simplified version where a actually = (1-delta)/alpha and b = delta (e.g. delta and alpha are what I&#39;m actually solving for.)"}], "answers": [{"tags": [], "owner": {"reputation": 9526, "user_id": 9758922, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ryhQ0.png?s=128&g=1", "display_name": "nuric", "link": "https://stackoverflow.com/users/9758922/nuric"}, "is_accepted": false, "score": 1, "last_activity_date": 1526505667, "creation_date": 1526505667, "answer_id": 50380055, "question_id": 50379644, "link": "https://stackoverflow.com/questions/50379644/tensorflow-creating-a-matrix-with-variables-as-elements/50380055#50380055", "title": "Tensorflow: creating a matrix with variables as elements", "body": "<p>Well you can create a single variable vector <code>params = tf.Variable((2,), name=\"ab\")</code> and then multiply with the identity matrix <code>tf.eye(2)</code>:</p>\n\n<pre><code>A = tf.matmul(tf.expand_dims(params,0), tf.eye(2))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 314, "user_id": 10847996, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SAY8aMAMrFI/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYB1ZhJU9-pStq82GGO33bfzliF_w/mo/photo.jpg?sz=128", "display_name": "sturgemeister", "link": "https://stackoverflow.com/users/10847996/sturgemeister"}, "is_accepted": false, "score": 1, "last_activity_date": 1546140989, "creation_date": 1546140989, "answer_id": 53975093, "question_id": 50379644, "link": "https://stackoverflow.com/questions/50379644/tensorflow-creating-a-matrix-with-variables-as-elements/53975093#53975093", "title": "Tensorflow: creating a matrix with variables as elements", "body": "<p><code>tf.stack</code> increases the rank of the tensor (creating a new axis) and combines them in the new axis. If you want to combine tensors along an existing axis, you should use <code>tf.concat</code>.</p>\n\n<pre><code>a = tf.Variable((1,), name=\"a\", dtype = tf.float64)\nb = tf.Variable((1,), name=\"b\", dtype = tf.float64)\nconst = tf.constant(0,dtype = tf.float64, shape = (1,))\nA0 = tf.stack([a, const], axis=1)\nA1 = tf.stack([const, b], axis=1)  # more clear than tf.transpose\n\nA = tf.concat((A0, A1), axis=0)\n</code></pre>\n\n<p>A is now shape (2, 2).</p>\n\n<p>To explain, each object is a rank-1 tensor with one element:</p>\n\n<pre><code>A = [1]\nconst = [0]\n</code></pre>\n\n<p>stacking gives:</p>\n\n<pre><code>tf.stack((A, const), axis=0) = [[1], [0]]  # 2x1 matrix\n</code></pre>\n\n<p>concatenating gives:</p>\n\n<pre><code>tf.concat((A, const), axis=0) = [1, 0]  # 2 vector\n</code></pre>\n"}], "owner": {"reputation": 712, "user_id": 6815126, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/ddb0f368ab3f7b9fbea0ab740947f31c?s=128&d=identicon&r=PG&f=1", "display_name": "measure_theory", "link": "https://stackoverflow.com/users/6815126/measure-theory"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1050, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1546140989, "creation_date": 1526503716, "question_id": 50379644, "link": "https://stackoverflow.com/questions/50379644/tensorflow-creating-a-matrix-with-variables-as-elements", "title": "Tensorflow: creating a matrix with variables as elements", "body": "<p>In Tensorflow, I'm trying to create the following matrix:</p>\n\n<pre><code>A = [[a, 0], [0,b]]\n</code></pre>\n\n<p>Where <code>a</code> and <code>b</code> are the parameters I'm trying to solve for.</p>\n\n<p>Here's what I have so far:</p>\n\n<pre><code>a =  tf.Variable((1,), name=\"a\", dtype = tf.float64)\nb = tf.Variable((1,), name=\"b\", dtype = tf.float64)\nconst = tf.constant(0,dtype = tf.float64, shape = (1,))\nA0 = tf.transpose(tf.stack([a,const]))\nA1 = tf.transpose(tf.stack([const,b]))\nA = tf.stack([A0,A1])\n</code></pre>\n\n<p>However the shape of A ends up being (2,1,2) which is wrong (since A0 and B0 both have shapes (1,2))</p>\n\n<p><strong>Is there an easier way to create the matrix object A in Tensorflow, or does anyone know why the shape is getting messed up with what I'm doing?</strong></p>\n"}, {"tags": ["python", "python-3.x", "windows-10"], "comments": [{"owner": {"reputation": 1972, "user_id": 5695018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lkHBu.jpg?s=128&g=1", "display_name": "Ziyad Edher", "link": "https://stackoverflow.com/users/5695018/ziyad-edher"}, "edited": false, "score": 1, "creation_date": 1526504002, "post_id": 50379574, "comment_id": 87775648, "body": "You are always ending your print with <code>end=&quot; &quot;</code>. This is never creating a new line, that is why everything shows up on the same line."}, {"owner": {"reputation": 1972, "user_id": 5695018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lkHBu.jpg?s=128&g=1", "display_name": "Ziyad Edher", "link": "https://stackoverflow.com/users/5695018/ziyad-edher"}, "edited": false, "score": 1, "creation_date": 1526504050, "post_id": 50379574, "comment_id": 87775667, "body": "To fix this you either want to add an extra empty print statement somewhere to forcefully create a new line, or modify one of your <code>end</code>s to add a new line."}, {"owner": {"reputation": 305, "user_id": 4394577, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SkCzL.jpg?s=128&g=1", "display_name": "OMar Mohamed", "link": "https://stackoverflow.com/users/4394577/omar-mohamed"}, "edited": false, "score": 0, "creation_date": 1526504051, "post_id": 50379574, "comment_id": 87775668, "body": "The <code>text</code> is less than 80 chars long !"}, {"owner": {"reputation": 43, "user_id": 7622756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f79a013e2e1036784d2be2ea7b61328?s=128&d=identicon&r=PG&f=1", "display_name": "AlanaG", "link": "https://stackoverflow.com/users/7622756/alanag"}, "reply_to_user": {"reputation": 305, "user_id": 4394577, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SkCzL.jpg?s=128&g=1", "display_name": "OMar Mohamed", "link": "https://stackoverflow.com/users/4394577/omar-mohamed"}, "edited": false, "score": 0, "creation_date": 1526504167, "post_id": 50379574, "comment_id": 87775724, "body": "@OMarMohamed this was just a sample text, the original is over 400 chars"}, {"owner": {"reputation": 305, "user_id": 4394577, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SkCzL.jpg?s=128&g=1", "display_name": "OMar Mohamed", "link": "https://stackoverflow.com/users/4394577/omar-mohamed"}, "reply_to_user": {"reputation": 1972, "user_id": 5695018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lkHBu.jpg?s=128&g=1", "display_name": "Ziyad Edher", "link": "https://stackoverflow.com/users/5695018/ziyad-edher"}, "edited": false, "score": 0, "creation_date": 1526504283, "post_id": 50379574, "comment_id": 87775778, "body": "OK. As @ZiyadEdher said, you need to print a newline character at the end of each <code>highGreen</code> call."}, {"owner": {"reputation": 305, "user_id": 4394577, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SkCzL.jpg?s=128&g=1", "display_name": "OMar Mohamed", "link": "https://stackoverflow.com/users/4394577/omar-mohamed"}, "edited": false, "score": 0, "creation_date": 1526504688, "post_id": 50379574, "comment_id": 87775966, "body": "2 additional notes, you don&#39;t need this line <code>highlight = set(textWords).intersection(words)</code> and in case the last word is to be highlighted, you won&#39;t end the highlighting"}], "answers": [{"comments": [{"owner": {"reputation": 3271, "user_id": 7607701, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-0eLxeTB_SdQ/AAAAAAAAAAI/AAAAAAAAABg/XZT1oaa0wqA/photo.jpg?sz=128", "display_name": "Aaron N. Brock", "link": "https://stackoverflow.com/users/7607701/aaron-n-brock"}, "edited": false, "score": 0, "creation_date": 1526504313, "post_id": 50379767, "comment_id": 87775789, "body": "The ctrl codes are never passed into <code>textwrap</code>, they&#39;re added in the <code>highGreen</code> function which is called <i>after</i> the text is broken up."}, {"owner": {"reputation": 1295, "user_id": 1016326, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c603e7c3d4c6af8d15288dcee48750d1?s=128&d=identicon&r=PG", "display_name": "Jere K&#228;pyaho", "link": "https://stackoverflow.com/users/1016326/jere-k%c3%a4pyaho"}, "reply_to_user": {"reputation": 3271, "user_id": 7607701, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-0eLxeTB_SdQ/AAAAAAAAAAI/AAAAAAAAABg/XZT1oaa0wqA/photo.jpg?sz=128", "display_name": "Aaron N. Brock", "link": "https://stackoverflow.com/users/7607701/aaron-n-brock"}, "edited": false, "score": 0, "creation_date": 1526504631, "post_id": 50379767, "comment_id": 87775944, "body": "Right. It might still be better to construct the strings completely before printing any of them, instead of using print as a side effect inside the <code>highGreen</code> function."}], "tags": [], "owner": {"reputation": 1295, "user_id": 1016326, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c603e7c3d4c6af8d15288dcee48750d1?s=128&d=identicon&r=PG", "display_name": "Jere K&#228;pyaho", "link": "https://stackoverflow.com/users/1016326/jere-k%c3%a4pyaho"}, "is_accepted": false, "score": -1, "last_activity_date": 1526504244, "creation_date": 1526504244, "answer_id": 50379767, "question_id": 50379574, "link": "https://stackoverflow.com/questions/50379574/combine-textwrap-with-changing-one-word-colour-in-text/50379767#50379767", "title": "Combine textwrap with changing one word colour in text", "body": "<p><code>textwrap</code> is probably confused by the control codes (the result is the same even if the text is longer than the wrap value). You might want to try <a href=\"https://github.com/jonathaneunice/ansiwrap\" rel=\"nofollow noreferrer\" title=\"`ansiwrap`\"><code>ansiwrap</code></a>.</p>\n"}, {"tags": [], "owner": {"reputation": 3271, "user_id": 7607701, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-0eLxeTB_SdQ/AAAAAAAAAAI/AAAAAAAAABg/XZT1oaa0wqA/photo.jpg?sz=128", "display_name": "Aaron N. Brock", "link": "https://stackoverflow.com/users/7607701/aaron-n-brock"}, "is_accepted": true, "score": 1, "last_activity_date": 1526504609, "last_edit_date": 1526504609, "creation_date": 1526504264, "answer_id": 50379771, "question_id": 50379574, "link": "https://stackoverflow.com/questions/50379574/combine-textwrap-with-changing-one-word-colour-in-text/50379771#50379771", "title": "Combine textwrap with changing one word colour in text", "body": "<p><strong>Firstly,</strong> your <code>text</code> isn't <code>80</code> characters long (in fact it's only <code>32</code>) so it would all fit on one line anyway.  Let's change that to <code>20</code> for this example.</p>\n\n<p><strong>Secondly,</strong> Your text <em>would</em> be broken up into <code>20</code> character chunks, you're just not printing any newlines.  <code>print()</code> usually adds them automatically but since you override that with the <code>end=</code> argument the new line is never printed.</p>\n\n<p>We can fix this by adding a empty <code>print()</code> statement after you call <code>highGreen</code>.  (Remember, <code>print()</code> automatically prints a newline if you don't specify the <code>end=</code> arg)</p>\n\n<p><strong>Example:</strong></p>\n\n<pre><code>text = \"This bed is super uncomfortable.\"\nfor line in textwrap.wrap(text, 20):\n    highGreen(line, [\"bed\"])\n    print() # add this to print newline\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>This bed is super \nuncomfortable.\n</code></pre>\n\n<p>(The <code>bed</code> prints out green, I'm just not sure how to copy that into StackOverflow)</p>\n"}], "owner": {"reputation": 43, "user_id": 7622756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f79a013e2e1036784d2be2ea7b61328?s=128&d=identicon&r=PG&f=1", "display_name": "AlanaG", "link": "https://stackoverflow.com/users/7622756/alanag"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 50379771, "answer_count": 2, "score": 3, "last_activity_date": 1526513118, "creation_date": 1526503331, "last_edit_date": 1526513118, "question_id": 50379574, "link": "https://stackoverflow.com/questions/50379574/combine-textwrap-with-changing-one-word-colour-in-text", "title": "Combine textwrap with changing one word colour in text", "body": "<p>I'm writing a text game in Python. I've written a function which takes a list of words and changes their colour, while leaving the rest white.</p>\n\n<pre><code>def highGreen(text, words):\n    textWords = text.split(\" \")\n    highlight = set(textWords).intersection(words)\n    for word in textWords:\n        if word in highlight:\n            print(\"\\033[32m\", end=\"\")\n            print(word, end=\" \")\n        else:\n            print(\"\\033[0m\", end=\"\")\n            print(word, end=\" \")\n</code></pre>\n\n<p>My problem is that I can't seem to combine this function with <code>textwrap.wrap</code> or <code>.fill</code>, so when printed onto the console words are broken in random places.</p>\n\n<p>I've tried:</p>\n\n<pre><code>text = \"This bed is super uncomfortable.\"\nfor line in textwrap.wrap(text, 80):\n    highGreen(line, [\"bed\"])\n</code></pre>\n\n<p>but it still prints everything in one line. </p>\n\n<p>The colouring is done in such a weird way because nothing else I tried worked in the Windows 10 console/PyCharm.</p>\n"}, {"tags": ["python", "pandas", "python-3.5"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 1, "creation_date": 1526503557, "post_id": 50379559, "comment_id": 87775480, "body": "I suspect you are not reading your CSV properly. Can I see 5-10 rows of your CSV file along with the code that you use to read it? Nipping this problem in the bud is better than solving the XY problem and letting the Y propagate to production code."}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1526503824, "post_id": 50379559, "comment_id": 87775580, "body": "Quick! Before you get more answers that don&#39;t actually answer your question..."}, {"owner": {"reputation": 3494, "user_id": 1243255, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/9328a10a909a33568ad798474053f476?s=128&d=identicon&r=PG", "display_name": "Zanam", "link": "https://stackoverflow.com/users/1243255/zanam"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1526504023, "post_id": 50379559, "comment_id": 87775657, "body": "I added the file structure but might have been slow as there are plenty of answers already :("}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1526504121, "post_id": 50379559, "comment_id": 87775699, "body": "Thanks a bunch, this is really helpful, but I have one last question for you. Is this a TSV file?"}, {"owner": {"reputation": 3494, "user_id": 1243255, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/9328a10a909a33568ad798474053f476?s=128&d=identicon&r=PG", "display_name": "Zanam", "link": "https://stackoverflow.com/users/1243255/zanam"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1526504218, "post_id": 50379559, "comment_id": 87775748, "body": "It could be a TSV file as it is generated by url."}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1526504361, "post_id": 50379559, "comment_id": 87775823, "body": "If it is a CSV, add these parameters: <code>sep=r&#39;\\s{2,}&#39;, engine=&#39;python&#39;, usecols=[&#39;LocalTime&#39; ,&#39;Temp&#39; , &#39;TempDiff&#39;,&#39;TempNormal&#39;, &#39;DewPoint&#39;]</code> and it works for me. If it is a TSV, omit the <code>sep</code> and <code>engine</code>."}], "answers": [{"tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": true, "score": 1, "last_activity_date": 1526503476, "creation_date": 1526503476, "answer_id": 50379599, "question_id": 50379559, "link": "https://stackoverflow.com/questions/50379559/renaming-multiple-columns-in-dataframe/50379599#50379599", "title": "Renaming multiple columns in dataframe", "body": "<p>You can do this:</p>\n\n<pre><code>df.columns = df.columns[1:].tolist() + ['DropMe']\n\ndf.drop('DropMe', axis=1, inplace=True)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>                   Temp  TempDiff  TempNormal  DewPoint\n1  5/16/2018 1:00:00 AM     66.92       -3.89     55.22\n2  5/16/2018 2:00:00 AM     66.92       -3.31     53.47\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7907, "user_id": 9609447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9FDax.jpg?s=128&g=1", "display_name": "harvpan", "link": "https://stackoverflow.com/users/9609447/harvpan"}, "is_accepted": false, "score": 1, "last_activity_date": 1526503983, "last_edit_date": 1526503983, "creation_date": 1526503614, "answer_id": 50379624, "question_id": 50379559, "link": "https://stackoverflow.com/questions/50379559/renaming-multiple-columns-in-dataframe/50379624#50379624", "title": "Renaming multiple columns in dataframe", "body": "<p>Consider below code:</p>\n\n<pre><code>new_col = list(pd.Series(list(df.columns)).shift(-1).dropna())\ndf = df.drop(list(df.columns)[-1], axis=1)\ndf.columns = new_col\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 930, "user_id": 3886071, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/0e0fe737a69237bfef844a55e2cf0294?s=128&d=identicon&r=PG&f=1", "display_name": "n3utrino", "link": "https://stackoverflow.com/users/3886071/n3utrino"}, "is_accepted": false, "score": 1, "last_activity_date": 1526503665, "creation_date": 1526503665, "answer_id": 50379633, "question_id": 50379559, "link": "https://stackoverflow.com/questions/50379559/renaming-multiple-columns-in-dataframe/50379633#50379633", "title": "Renaming multiple columns in dataframe", "body": "<p>Easier is to use the flag <code>index_col = False</code> in your <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.read_csv.html\" rel=\"nofollow noreferrer\">read_csv command</a> and you should avoid this problem from the start.</p>\n\n<p>Otherwise you can do something like:</p>\n\n<pre><code>old_cols = df.columns.values\n#delete the right-most row, which for you is NaN\ndel df[old_cols[-1]]\nnew_cols = old_cols[1:]\ndf.columns = new_cols\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4314, "user_id": 5152563, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/ca2290acd27712398ff5bf1d469129dd?s=128&d=identicon&r=PG", "display_name": "Quickbeam2k1", "link": "https://stackoverflow.com/users/5152563/quickbeam2k1"}, "is_accepted": false, "score": 2, "last_activity_date": 1526503764, "creation_date": 1526503764, "answer_id": 50379655, "question_id": 50379559, "link": "https://stackoverflow.com/questions/50379559/renaming-multiple-columns-in-dataframe/50379655#50379655", "title": "Renaming multiple columns in dataframe", "body": "<p>What about</p>\n\n<pre><code>df.drop('DewPoint', axis=1)\n  .rename(columns=dict(zip(df.columns[:-1],df.columns[1:])))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 1, "creation_date": 1526503894, "post_id": 50379671, "comment_id": 87775605, "body": "This is more complicated and unnecessary than it needs to be, even for the XY problem."}, {"owner": {"reputation": 725, "user_id": 6471494, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-SXQm_pFE0xo/AAAAAAAAAAI/AAAAAAAAB1k/-FJy_c6A6v4/photo.jpg?sz=128", "display_name": "Marc Frame", "link": "https://stackoverflow.com/users/6471494/marc-frame"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1526504503, "post_id": 50379671, "comment_id": 87775883, "body": "ya agreed. I generally go for pretty quick fixes for problems like this"}], "tags": [], "owner": {"reputation": 725, "user_id": 6471494, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-SXQm_pFE0xo/AAAAAAAAAAI/AAAAAAAAB1k/-FJy_c6A6v4/photo.jpg?sz=128", "display_name": "Marc Frame", "link": "https://stackoverflow.com/users/6471494/marc-frame"}, "is_accepted": false, "score": 1, "last_activity_date": 1526504385, "last_edit_date": 1526504385, "creation_date": 1526503827, "answer_id": 50379671, "question_id": 50379559, "link": "https://stackoverflow.com/questions/50379559/renaming-multiple-columns-in-dataframe/50379671#50379671", "title": "Renaming multiple columns in dataframe", "body": "<p>from what i gather, you are attempting to shift all the column names down.</p>\n\n<pre><code>rename_dict = {}\nfor i in range(len(z1.keys()) - 1):\n    rename_dict[z1.keys()[i]] = z1.keys()[i+1]\n\nz1.index.names = [z1.keys()[0]]\nz1 = z1.drop(df.keys()[-1], axis=1)\nprint(rename_dict)\nz1.rename(columns=rename_dict)\n</code></pre>\n\n<p>this should do the trick</p>\n"}], "owner": {"reputation": 3494, "user_id": 1243255, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/9328a10a909a33568ad798474053f476?s=128&d=identicon&r=PG", "display_name": "Zanam", "link": "https://stackoverflow.com/users/1243255/zanam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1784, "favorite_count": 0, "accepted_answer_id": 50379599, "answer_count": 5, "score": 0, "last_activity_date": 1526539668, "creation_date": 1526503240, "last_edit_date": 1526539668, "question_id": 50379559, "link": "https://stackoverflow.com/questions/50379559/renaming-multiple-columns-in-dataframe", "title": "Renaming multiple columns in dataframe", "body": "<p>I have a large dataframe as:</p>\n\n<pre><code>z1.ix[1:2]\n                  index  LocalTime   Temp   TempDiff   TempNormal   DewPoint  \n1  5/16/2018 1:00:00 AM      66.92  -3.89      55.22        66.92        NaN   \n2  5/16/2018 2:00:00 AM      66.92  -3.31      53.47        66.02        NaN\n</code></pre>\n\n<p>Above was generated using <code>pandas.read_csv</code></p>\n\n<p>How do I rename the columns so that it appears as following:</p>\n\n<pre><code>z1.ix[1:2]\n                 LocalTime   Temp   TempDiff   TempNormal   DewPoint  \n1  5/16/2018 1:00:00 AM      66.92  -3.89      55.22        66.92            \n2  5/16/2018 2:00:00 AM      66.92  -3.31      53.47        66.02        \n</code></pre>\n\n<p>Where the column name was shifted left by one place and the last column was dropped.</p>\n\n<pre><code>df.rename(columns={'oldCol':'newCol'})\n</code></pre>\n\n<p>is a tedious method to rename the columns as the number of columns for z1 is about 300.</p>\n\n<p>Edit:\nMy csv file has:</p>\n\n<pre><code>NA-KBWI      Hourly Forecast Made May 16 2018 1510 UTC                  \nLocalTime    Temp    TempDiff    TempNormal  DewPoint    Cloud Cover     FeelsLikeTemp\n5/16/2018 0:00  68  -3.38   57.5    66.92   100 68\n5/16/2018 1:00  66.92   -3.89   55.22   66.92   100 66.92\n5/16/2018 2:00  66.92   -3.31   53.47   66.02   100 66.92\n5/16/2018 3:00  66.92   -2.37   52.88   66.02   100 66.92\n</code></pre>\n\n<p>I am using the following code:</p>\n\n<pre><code>pandas.read_csv('myCSV.csv', skiprows=[0])\n</code></pre>\n"}, {"tags": ["python", "flask", "minio"], "comments": [{"owner": {"reputation": 3335, "user_id": 2504700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d0abf29ecc7c49d76db8e9820608297?s=128&d=identicon&r=PG", "display_name": "OriolAbril", "link": "https://stackoverflow.com/users/2504700/oriolabril"}, "edited": false, "score": 0, "creation_date": 1526504307, "post_id": 50379547, "comment_id": 87775785, "body": "Hi, welcome to stack overflow. It looks like there have been some changes in the indentation of your code during formatting."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9798671"}, "reply_to_user": {"reputation": 3335, "user_id": 2504700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d0abf29ecc7c49d76db8e9820608297?s=128&d=identicon&r=PG", "display_name": "OriolAbril", "link": "https://stackoverflow.com/users/2504700/oriolabril"}, "edited": false, "score": 0, "creation_date": 1526540353, "post_id": 50379547, "comment_id": 87785982, "body": "@xg.plt.py sorry, I&#39;ve fixed it, it&#39;s courtesy of stackowerflow  indentation &#175;_(\u30c4)_/&#175;"}], "answers": [{"tags": [], "owner": {"reputation": 570, "user_id": 6188720, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/JJjpc.jpg?s=128&g=1", "display_name": "c0degeas", "link": "https://stackoverflow.com/users/6188720/c0degeas"}, "is_accepted": false, "score": 0, "last_activity_date": 1540895474, "creation_date": 1540895474, "answer_id": 53062299, "question_id": 50379547, "link": "https://stackoverflow.com/questions/50379547/how-to-save-file-from-post-request-in-flask-to-localy-running-minio-server/53062299#53062299", "title": "How to save file from POST request in flask to localy-running Minio server?", "body": "<p>The pymino's <strong>minioClient.fput_object()</strong> method expects existing bucket name, object name to be kept and filepath of the file to be uploaded.</p>\n\n<blockquote>\n  <p>Usage :\n  <br/>\n  <strong>minioClient.fput_object( bucket_name, object_name, filepath)</strong></p>\n</blockquote>\n\n<p>Add the following in the beginning Replace <code>image</code> with the filepath.</p>\n\n<pre><code>UPLOAD_FOLDER = '/path/to/the/uploads'\napp.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER`\n</code></pre>\n\n<p>Add the following before making <strong>fput_object</strong> function:</p>\n\n<pre><code>filename = secure_filename(file.filename)\nfilepath = os.path.join(app.config['UPLOAD_FOLDER'], filename)\n</code></pre>\n\n<blockquote>\n  <p>Example:\n  <br/>\n  <strong>minioClient.fput_object( \"testbuck\", filename, filepath)</strong></p>\n</blockquote>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9798671"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 690, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1540895474, "creation_date": 1526503177, "last_edit_date": 1526540200, "question_id": 50379547, "link": "https://stackoverflow.com/questions/50379547/how-to-save-file-from-post-request-in-flask-to-localy-running-minio-server", "title": "How to save file from POST request in flask to localy-running Minio server?", "body": "<p>I'm trying to save file to bucket:</p>\n\n<pre><code>if file and allowed_file(file.filename):\n    filename = secure_filename(file.filename)\n    try:\n        minioClient.make_bucket(\"testbuck\", location = \"us-east-1\")\n    except BucketAlreadyOwnedByYou as err:\n        pass\n    except BucketAlreadyExists as err:\n        pass\n    except ResponseError as err:\n        raise\n    else:\n        try:\n            print(filename)\n            minioClient.fput_object('testbuck', filename, image)\n        except ResponseError as err:\n            print(err)\n</code></pre>\n\n<p>But get errors:<code>Message: {0}'.format(error.message))\nInvalidXMLError: InvalidXMLError: message: \"Error\" XML is not parsable. Message: syntax error: line 1, column 0</code></p>\n\n<p>I'm newby in backend and flask and can't figure out what I am doing wrong! Thank for you patience</p>\n"}, {"tags": ["python", "dataframe", "pyspark"], "answers": [{"comments": [{"owner": {"reputation": 1047, "user_id": 7812314, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rrz02.jpg?s=128&g=1", "display_name": "dportman", "link": "https://stackoverflow.com/users/7812314/dportman"}, "edited": false, "score": 0, "creation_date": 1526507092, "post_id": 50379688, "comment_id": 87776891, "body": "Excellent, thank you! I was struggling with composing the udf properly."}, {"owner": {"reputation": 686, "user_id": 5718264, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IJ1Rz.jpg?s=128&g=1", "display_name": "Shadab Hussain", "link": "https://stackoverflow.com/users/5718264/shadab-hussain"}, "edited": false, "score": 0, "creation_date": 1592947142, "post_id": 50379688, "comment_id": 110606583, "body": "What if we don&#39;t give <code>ArrayType(IntegerType())</code> in udf then?"}], "tags": [], "owner": {"reputation": 169523, "user_id": 4983450, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/NR2ko.jpg?s=128&g=1", "display_name": "Psidom", "link": "https://stackoverflow.com/users/4983450/psidom"}, "is_accepted": true, "score": 4, "last_activity_date": 1526503882, "creation_date": 1526503882, "answer_id": 50379688, "question_id": 50379541, "link": "https://stackoverflow.com/questions/50379541/pyspark-pad-arrayint-column-with-zeros/50379688#50379688", "title": "Pyspark: Pad Array[Int] column with zeros", "body": "<p>You can write a <code>udf</code> to do this:</p>\n\n<pre><code>from pyspark.sql.types import ArrayType, IntegerType\nimport pyspark.sql.functions as F\n\npad_fix_length = F.udf(\n    lambda arr: arr[:5] + [0] * (5 - len(arr[:5])), \n    ArrayType(IntegerType())\n)\n\ndf.withColumn('feature_indices', pad_fix_length(df.feature_indices)).show()\n+-----------------+\n|  feature_indices|\n+-----------------+\n|  [0, 0, 0, 0, 0]|\n|[0, 1, 4, 10, 11]|\n|  [0, 1, 2, 0, 0]|\n|  [1, 0, 0, 0, 0]|\n|  [0, 0, 0, 0, 0]|\n+-----------------+\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 978, "user_id": 226220, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/0970bec632e502b1a50f1ae75ccfaf4a?s=128&d=identicon&r=PG", "display_name": "Nanda", "link": "https://stackoverflow.com/users/226220/nanda"}, "is_accepted": false, "score": 0, "last_activity_date": 1526509849, "last_edit_date": 1526509849, "creation_date": 1526504723, "answer_id": 50379875, "question_id": 50379541, "link": "https://stackoverflow.com/questions/50379541/pyspark-pad-arrayint-column-with-zeros/50379875#50379875", "title": "Pyspark: Pad Array[Int] column with zeros", "body": "<p>I recently used the <code>pad_sequences</code> function within Keras to do something similar. I'm not sure of your usecase so this might be an unnecessarily large dependency to add on.</p>\n\n<p>Anyways, here's the link to the documentation for the function: <a href=\"https://keras.io/preprocessing/sequence/#pad_sequences\" rel=\"nofollow noreferrer\">https://keras.io/preprocessing/sequence/#pad_sequences</a></p>\n\n<pre><code>from keras.preprocessing.sequence import pad_sequences    \n\ninput_sequence =[[1,2,3], [1,2], [1,4]]\n\npadded_sequence = pad_sequences(input_sequence, maxlen=3, padding='post', truncating='post', value=0.0)\n\nprint padded_sequence\n</code></pre>\n\n<p>The output:</p>\n\n<pre><code>[[1 2 3]\n [1 2 0]\n [1 4 0]]\n</code></pre>\n"}], "owner": {"reputation": 1047, "user_id": 7812314, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rrz02.jpg?s=128&g=1", "display_name": "dportman", "link": "https://stackoverflow.com/users/7812314/dportman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1202, "favorite_count": 0, "accepted_answer_id": 50379688, "answer_count": 2, "score": 3, "last_activity_date": 1526509849, "creation_date": 1526503132, "question_id": 50379541, "link": "https://stackoverflow.com/questions/50379541/pyspark-pad-arrayint-column-with-zeros", "title": "Pyspark: Pad Array[Int] column with zeros", "body": "<p>I have the following column in a pyspark dataframe, of type Array[Int].</p>\n\n<pre><code>+--------------------+\n|     feature_indices|\n+--------------------+\n|                 [0]|\n|[0, 1, 4, 10, 11,...|\n|           [0, 1, 2]|\n|                 [1]|\n|                 [0]|\n+--------------------+\n</code></pre>\n\n<p>I am trying to pad the array with zeros, and then limit the list length, so that the length of each row's array would be the same. For example, for n = 5, I expect:</p>\n\n<pre><code>+--------------------+\n|     feature_indices|\n+--------------------+\n|     [0, 0, 0, 0, 0]|\n|   [0, 1, 4, 10, 11]|\n|     [0, 1, 2, 0, 0]|\n|     [1, 0, 0, 0, 0]|\n|     [0, 0, 0, 0, 0]|\n+--------------------+\n</code></pre>\n\n<p>Any suggestions? I looked at pyspark <code>rpad</code> function, but it only operates on string type columns.</p>\n"}, {"tags": ["python", "django", "twitter-bootstrap-3", "django-i18n"], "comments": [{"owner": {"reputation": 15853, "user_id": 1925257, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yY7YW.jpg?s=128&g=1", "display_name": "xyres", "link": "https://stackoverflow.com/users/1925257/xyres"}, "edited": false, "score": 0, "creation_date": 1526504881, "post_id": 50379537, "comment_id": 87776059, "body": "Can you try using <code>pgettext_lazy</code> in the top-level application? Does it work there?"}, {"owner": {"reputation": 33, "user_id": 8586489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8409496792ff2efea8bfb727f09509bb?s=128&d=identicon&r=PG&f=1", "display_name": "buzzdriving", "link": "https://stackoverflow.com/users/8586489/buzzdriving"}, "reply_to_user": {"reputation": 15853, "user_id": 1925257, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yY7YW.jpg?s=128&g=1", "display_name": "xyres", "link": "https://stackoverflow.com/users/1925257/xyres"}, "edited": false, "score": 0, "creation_date": 1526519211, "post_id": 50379537, "comment_id": 87779863, "body": "No, sir. ugettext_lazy doesn&#39;t seem to working from the main application either. Thanks for replying. Any tips?"}, {"owner": {"reputation": 33, "user_id": 8586489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8409496792ff2efea8bfb727f09509bb?s=128&d=identicon&r=PG&f=1", "display_name": "buzzdriving", "link": "https://stackoverflow.com/users/8586489/buzzdriving"}, "reply_to_user": {"reputation": 15853, "user_id": 1925257, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yY7YW.jpg?s=128&g=1", "display_name": "xyres", "link": "https://stackoverflow.com/users/1925257/xyres"}, "edited": false, "score": 0, "creation_date": 1526534230, "post_id": 50379537, "comment_id": 87783110, "body": "Incidentally, pgettext_lazy doesn&#39;t work either."}, {"owner": {"reputation": 15853, "user_id": 1925257, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yY7YW.jpg?s=128&g=1", "display_name": "xyres", "link": "https://stackoverflow.com/users/1925257/xyres"}, "edited": false, "score": 0, "creation_date": 1526547268, "post_id": 50379537, "comment_id": 87789987, "body": "Where are you running the <code>makemessages</code> command? According to docs, it should be run either from your project directory (where you manage.py  file is) or from your apps. Also, did you remember to compile your translations using <code>compilemessages</code> command?"}, {"owner": {"reputation": 33, "user_id": 8586489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8409496792ff2efea8bfb727f09509bb?s=128&d=identicon&r=PG&f=1", "display_name": "buzzdriving", "link": "https://stackoverflow.com/users/8586489/buzzdriving"}, "reply_to_user": {"reputation": 15853, "user_id": 1925257, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yY7YW.jpg?s=128&g=1", "display_name": "xyres", "link": "https://stackoverflow.com/users/1925257/xyres"}, "edited": false, "score": 0, "creation_date": 1526587792, "post_id": 50379537, "comment_id": 87815401, "body": "I&#39;m running makemessages from the project folder. I also always run compilemessages after I&#39;ve added the translations (and even restart the server). When compilemessages runs, it shows that it&#39;s picked up all the PO files in the file hierarchy."}], "owner": {"reputation": 33, "user_id": 8586489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8409496792ff2efea8bfb727f09509bb?s=128&d=identicon&r=PG&f=1", "display_name": "buzzdriving", "link": "https://stackoverflow.com/users/8586489/buzzdriving"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 385, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1526503110, "creation_date": 1526503110, "question_id": 50379537, "link": "https://stackoverflow.com/questions/50379537/ugettext-lazy-pgettext-lazy-not-working-in-django-sub-application", "title": "ugettext_lazy/pgettext_lazy not working in Django sub-application", "body": "<p>I am translating a Django site with a sub-application.</p>\n\n<p>Let's say the top level site is called 'main_site' and the sub application is called 'sub_app'.</p>\n\n<p>In main_site, I am using only trans and blocktrans tags for translation (with context markers). After farting around for a day or two, I can now mark text with the same strings using the 'context' keyword.</p>\n\n<p>For example,\ncontact.html</p>\n\n<pre><code>&lt;input type=\"text\" class=\"form-control\" placeholder=\"{% trans \"Name\" context \"ContactForm\" %}\"&gt;\n</code></pre>\n\n<p>register.html</p>\n\n<pre><code>&lt;h5 class=\"text-center\"&gt;{% trans \"Name\" context \"RegisterForm\" %}&lt;/h5&gt;\n</code></pre>\n\n<p>makemessages correctly creates these entries in the top level PO file and I can update them with different translations and Django renders them correctly. I do not use u/pgettext_lazy at all in the top-level application.</p>\n\n<p>With that working, I moved on to the I18N of sub_app.</p>\n\n<p>In forms.py I have:</p>\n\n<pre><code>class UserRegistration(forms.Form):\n     email = forms.CharField(widget=forms.TextInput(attrs={'readonly': 'readonly'}), label=ugettext_lazy('Email'))\n</code></pre>\n\n<p>makemessages again creates the entry correctly in sub_app's PO file.</p>\n\n<p>I use that form in register.html from the top-level application like this:</p>\n\n<pre><code>&lt;div class=\"row\"&gt;\n    &lt;div class=\"col-md-5 col-md-offset-1\"&gt;                                                     \n        {% bootstrap_field form.email form_group_class=\"form-group\" label_class=\"control-label\" %}\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>So the problem is when this form gets rendered, the translated text is not fetched for the form label.</p>\n\n<p>I don't know if this is because Django can't lazy translate the form fields of a sub-app (seems unlikely) or because I'm using django-bootstrap3 tags to render the form (also seems unlikely due to <a href=\"https://github.com/dyve/django-bootstrap3/issues/181\" rel=\"nofollow noreferrer\">this</a>) but I'm pretty much stuck.</p>\n\n<p>Eventually, I want to do this:</p>\n\n<pre><code>email = forms.CharField(widget=forms.TextInput(attrs={'readonly': 'readonly'}), label=pgettext_lazy(u'UserForm', u'Email'))\n</code></pre>\n\n<p>but uggettext_lazy already seems like a bridge too far.</p>\n"}, {"tags": ["python", "pyqt5", "qgraphicsview", "qgraphicsitem", "pyside2"], "comments": [{"owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "edited": false, "score": 0, "creation_date": 1526505319, "post_id": 50379530, "comment_id": 87776225, "body": "Do <code>self.scene.mapFromScene(event.pos())</code> to get rid of the error."}, {"owner": {"reputation": 3629, "user_id": 9381746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/707d7a8ff5c79060e57cd6683e245c89?s=128&d=identicon&r=PG&f=1", "display_name": "ecjb", "link": "https://stackoverflow.com/users/9381746/ecjb"}, "reply_to_user": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "edited": false, "score": 0, "creation_date": 1526506448, "post_id": 50379530, "comment_id": 87776647, "body": "Thank you very much (again) @ekhumoro. So what I did is i replaced the line <code>self.photo_clicked.emit(QtCore.QPoint(event.pos()))</code> by the line <code>self.scene.mapFromScene(event.pos())</code> but I get an error message : <code>AttributeError: &#39;PySide2.QtWidgets.QGraphicsScene&#39; object has no attribute &#39;mapFromScene&#39;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 2, "last_activity_date": 1526507871, "last_edit_date": 1526507871, "creation_date": 1526506479, "answer_id": 50380236, "question_id": 50379530, "link": "https://stackoverflow.com/questions/50379530/how-to-get-the-coordinate-of-the-loaded-image-and-not-the-one-from-the-display/50380236#50380236", "title": "How to get the coordinate of the loaded image and not the one from the display", "body": "<p>When you zoom and press a pixel this can represent a set of pixels or vice versa, I think you understand that because to show the image is a downsample or an upsamble as the case may be. So in the end, whatever it is, you are going to get a pixel that is not going to be ideal, but very close. Going to the point, considering that in the implementation of @ekhumuro there is no escalation of the items it is correct to use the mouse position with respect to the coordinate system of the item and not the scene, since the item can move, so that the general solution considering that the item is not transformed is:</p>\n\n<pre><code>def mousePressEvent(self, event):\n    if self._photo.isUnderMouse():\n        p = self._photo.mapToItem(self._photo, self.mapToScene(event.pos()))\n        self.photoClicked.emit(p.toPoint())\n    super(PhotoViewer, self).mousePressEvent(event)\n</code></pre>\n"}], "owner": {"reputation": 3629, "user_id": 9381746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/707d7a8ff5c79060e57cd6683e245c89?s=128&d=identicon&r=PG&f=1", "display_name": "ecjb", "link": "https://stackoverflow.com/users/9381746/ecjb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 843, "favorite_count": 0, "accepted_answer_id": 50380236, "answer_count": 1, "score": 1, "last_activity_date": 1526515426, "creation_date": 1526503065, "last_edit_date": 1526515426, "question_id": 50379530, "link": "https://stackoverflow.com/questions/50379530/how-to-get-the-coordinate-of-the-loaded-image-and-not-the-one-from-the-display", "title": "How to get the coordinate of the loaded image and not the one from the display", "body": "<p>I'm working on an image viewer with button allowing to get the coordinate of a loaded image when clicked on it. However, when I zoom on the image and click on it, I get the coordinate of the display in which the piece of the image sits, independently of where the image is centered inside the square. What I would like to get is the coordinate of the loaded image where it is clicked. This means that if the piece of image in the display is zoom or scrolled (up/down or right/left) the coordinate should adapt accordingly. It might be an easy question with an easy answer however I'm stuck for more than a week on that problem despite having tried to understand the documentation of the <a href=\"http://doc.qt.io/archives/qt-4.8/graphicsview.html#the-graphics-view-coordinate-system\" rel=\"nofollow noreferrer\">Qt website</a> without success</p>\n\n<p>For example I tried to replace the line </p>\n\n<p><code>self.photo_clicked.emit(QtCore.QPoint(event.pos()))</code></p>\n\n<p>by </p>\n\n<p><code>self.photo_clicked.emit(QtCore.QPoint(QGraphicsView.mapFromScene(event.pos())))</code></p>\n\n<p>but it gives me that error:</p>\n\n<pre><code>TypeError: descriptor 'mapFromScene' requires a 'PySide2.QtWidgets.QGraphicsView' object but received a 'PySide2.QtCore.QPoint'\n</code></pre>\n\n<p>Here is the the script (part of it is inspired from <a href=\"https://stackoverflow.com/questions/35508711/how-to-enable-pan-and-zoom-in-a-qgraphicsview/35514531#35514531\">this example</a>):</p>\n\n<pre><code>from PySide2.QtWidgets import (QWidget, QApplication, QSlider,\n        QGraphicsView, QGraphicsScene, QVBoxLayout)\nfrom PySide2.QtGui import QPainter, QColor\nfrom PySide2 import QtCore, QtWidgets, QtGui\nfrom PySide2.QtOpenGL import *\nfrom PySide2.QtCore import *\nfrom PySide2.QtGui import *\nimport sys\n\nimage_path_str='image.jpg'\n\nclass View(QGraphicsView):\n    photo_clicked = QtCore.Signal(QtCore.QPoint)\n\n    def __init__(self, parent):\n        super(View, self).__init__()\n        self.scene = QtWidgets.QGraphicsScene(self)\n        self.photo = QtWidgets.QGraphicsPixmapItem()\n        self.scene.addItem(self.photo)\n        pixmap = QtGui.QPixmap(image_path_str)\n        self.photo.setPixmap(pixmap)\n        self.setScene(self.scene)\n        self.setDragMode(QtWidgets.QGraphicsView.ScrollHandDrag)\n\n    def Hand_drag(self):\n            self.setDragMode(QtWidgets.QGraphicsView.ScrollHandDrag)\n\n    def pixel_pointer(self):\n            self.setDragMode(QtWidgets.QGraphicsView.NoDrag)\n\n    def mousePressEvent(self, event):\n        if self.photo.isUnderMouse():\n                self.photo_clicked.emit(QtCore.QPoint(event.pos()))\n\n        super(View, self).mousePressEvent(event)\n\nclass Window(QWidget):\n\n    def __init__(self):\n        super(Window, self).__init__()\n        self.view = View(self)\n\n        self.btn_hand_drag = QtWidgets.QCheckBox(\"Hand drag\", self)\n        self.btn_hand_drag.clicked.connect(self.view.Hand_drag)\n        self.btn_hand_drag.clicked.connect(self.btn_hand_drag_uncheck_others)\n\n        self.btn_pix_info1 = QtWidgets.QCheckBox(\"Point 1\", self)\n        self.btn_pix_info1.clicked.connect(self.view.pixel_pointer)\n        self.btn_pix_info1.clicked.connect(self.btn_pix_info1_drag_uncheck_other)\n        self.editPixInfo1 = QtWidgets.QLineEdit(self)\n        self.editPixInfo1.setReadOnly(True)\n\n        self.btn_pix_info2 = QtWidgets.QCheckBox(\"Point 2\", self)\n        self.btn_pix_info2.clicked.connect(self.view.pixel_pointer)\n        self.btn_pix_info2.clicked.connect(self.btn_pix_info2_drag_uncheck_other)\n        self.editPixInfo2 = QtWidgets.QLineEdit(self)\n        self.editPixInfo2.setReadOnly(True)\n\n        self.view.photo_clicked.connect(self.photo_clicked)\n\n        slider = QSlider(Qt.Horizontal, self)\n        slider.setRange(1, 500)\n        slider.setValue(100)\n        slider.valueChanged[int].connect(self.zoom)\n\n        vbox = QVBoxLayout()\n        vbox.addWidget(self.btn_hand_drag)\n        vbox.addWidget(self.btn_pix_info1)\n        vbox.addWidget(self.editPixInfo1)\n        vbox.addWidget(self.btn_pix_info2)\n        vbox.addWidget(self.editPixInfo2)\n        vbox.addWidget(self.view)\n        vbox.addWidget(slider)\n\n        self.setLayout(vbox)\n        self.setWindowTitle(\"Image viewer\")\n        self.setGeometry(200, 200, 1000, 800)\n\n    def zoom(self, value):\n        val = value / 100\n        self.view.resetTransform()\n        self.view.scale(val, val)\n\n    def btn_hand_drag_uncheck_others(self):\n        self.btn_pix_info1.setChecked(False)\n        self.btn_pix_info2.setChecked(False)\n\n    def btn_pix_info1_drag_uncheck_other(self):\n        self.btn_hand_drag.setChecked(False)\n        self.btn_pix_info2.setChecked(False)\n\n    def btn_pix_info2_drag_uncheck_other(self):\n        self.btn_hand_drag.setChecked(False)\n        self.btn_pix_info1.setChecked(False)\n\n    def photo_clicked(self, pos):\n        if self.btn_pix_info1.isChecked():\n                self.editPixInfo1.setText('%d, %d' % (pos.x(), pos.y()))\n        if self.btn_pix_info2.isChecked():\n                self.editPixInfo2.setText('%d, %d' % (pos.x(), pos.y()))\n\napp = QApplication.instance()\nif app is None:\n        app = QApplication([])\nw = Window()\nw.show()\nw.raise_()\napp.exec_()\n</code></pre>\n"}, {"tags": ["python", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "edited": false, "score": 3, "creation_date": 1526503151, "post_id": 50379490, "comment_id": 87775293, "body": "Where does that 9 for new value come from?  Next row with Tim?"}, {"owner": {"reputation": 20427, "user_id": 2570261, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e71068b09fc539447a0cee3e99fc419d?s=128&d=identicon&r=PG&f=1", "display_name": "Haleemur Ali", "link": "https://stackoverflow.com/users/2570261/haleemur-ali"}, "edited": false, "score": 3, "creation_date": 1526503511, "post_id": 50379490, "comment_id": 87775462, "body": "please post the for-loop based solution that works but takes too long"}, {"owner": {"reputation": 41, "user_id": 8281549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ca9f735579ee327ba8c20daddd5c28d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/8281549/peter"}, "reply_to_user": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "edited": false, "score": 0, "creation_date": 1526525837, "post_id": 50379490, "comment_id": 87781074, "body": "@ScottBoston, the numbers for the example above are arbitrary. I&#39;m looking to take Bob&#39;s New_Value from row 1 and use that in a calculation to update New_Value in row three."}, {"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "edited": false, "score": 0, "creation_date": 1526560233, "post_id": 50379490, "comment_id": 87798527, "body": "Okay, what does your starting df frame look like?"}], "answers": [{"tags": [], "owner": {"reputation": 61, "user_id": 9003912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c94a7937da51ead655094bee77e05973?s=128&d=identicon&r=PG&f=1", "display_name": "J.vdS", "link": "https://stackoverflow.com/users/9003912/j-vds"}, "is_accepted": false, "score": 1, "last_activity_date": 1526512816, "creation_date": 1526512816, "answer_id": 50381253, "question_id": 50379490, "link": "https://stackoverflow.com/questions/50379490/last-matching-value-in-dataframe-python/50381253#50381253", "title": "Last matching value in DataFrame (Python)", "body": "<p>I am not sure whether I understand your problem completely, but maybe this solution that should work on a dataframe that is sorted on time can help:</p>\n\n<p>first I mimicked your database (which will take most of the time):</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\nimport time\n\ndf_len = 15*10**6\nuser_size = 100000\n\nnow = int(time.time())\ndf = pd.DataFrame(index = range(df_len))\ndf['time_delta'] = np.random.choice(60, df_len)\ndf['time_delta_sum'] = df.time_delta.cumsum()\ndf['time_sec']= now - df.time_delta_sum\ndf['user_id'] = np.random.choice(user_size, df_len)\ndf['New_Value'] = np.random.choice(80, df_len)\ndf.sort_values(['user_id', 'time_sec'], inplace = True)\n\ndf['Old_Value'] = None\ndf['Old_Value'].iloc[1:] = df.New_Value.iloc[:-1].values\ndf['Old_Value'].iloc[0] = np.random.choice(80)\n\ndf.sort_values(['time_sec'], inplace = True)\n\ndf['date_time'] = df['time_sec'].apply(time.ctime)\ndf = df[['date_time', 'user_id', 'Old_Value', 'New_Value']].reset_index(drop = True)\n</code></pre>\n\n<p>This tail looks like:</p>\n\n<pre><code>df.tail() =\n                         date_time  user_id Old_Value  New_Value\n14999995  Thu May 17 01:14:14 2018    33790        42         23\n14999996  Thu May 17 01:14:36 2018    44252        58         75\n14999997  Thu May 17 01:15:18 2018    86755         7         45\n14999998  Thu May 17 01:15:44 2018    31874        24         72\n14999999  Thu May 17 01:16:20 2018    94365        27         29\n</code></pre>\n\n<p>the function that should do the updating</p>\n\n<pre><code>def Append_To_Df(user_id, new_value):\n    global df\n    old_value = df.loc[df.user_id == user_id, 'New_Value'].iloc[-1]\n    df = df.append(pd.DataFrame([[time.ctime(),user_id,old_value,new_value]], columns = df.columns, index = [len(df)]))\n</code></pre>\n\n<p>Then call this function with the user id and new value for this user</p>\n\n<pre><code>user_id = 3357\nnew_value = 35\n\nAppend_To_Df(user_id, new_value)\n</code></pre>\n\n<p>And the tail of the dataframe will look like:</p>\n\n<pre><code>df.tail() =\n                         date_time  user_id Old_Value  New_Value\n14999996  Thu May 17 01:14:36 2018    44252        58         75\n14999997  Thu May 17 01:15:18 2018    86755         7         45\n14999998  Thu May 17 01:15:44 2018    31874        24         72\n14999999  Thu May 17 01:16:20 2018    94365        27         29\n15000000  Thu May 17 01:18:34 2018     3357        37         35\n</code></pre>\n\n<p>Please note that this will only work if the user is already in the database.</p>\n"}, {"comments": [{"owner": {"reputation": 41, "user_id": 8281549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ca9f735579ee327ba8c20daddd5c28d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/8281549/peter"}, "edited": false, "score": 0, "creation_date": 1526544211, "post_id": 50384124, "comment_id": 87788166, "body": "Thank you for both of your answers! Really helpful. For the user id variable, is it possible to pass a list instead of just one ID? Or to run it all with a list comprehension? Or should I look at other avenues? Not asking for the code, just a pointer in the right direction. Thanks again!"}, {"owner": {"reputation": 61, "user_id": 9003912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c94a7937da51ead655094bee77e05973?s=128&d=identicon&r=PG&f=1", "display_name": "J.vdS", "link": "https://stackoverflow.com/users/9003912/j-vds"}, "reply_to_user": {"reputation": 41, "user_id": 8281549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ca9f735579ee327ba8c20daddd5c28d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/8281549/peter"}, "edited": false, "score": 0, "creation_date": 1526545148, "post_id": 50384124, "comment_id": 87788656, "body": "Hi, you could use something like this: df.groupby(&#39;ID&#39;).last() it gives you the last item for every user id, and then you could take a subset of the id&#39;s in your list (or the other way around)"}], "tags": [], "owner": {"reputation": 61, "user_id": 9003912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c94a7937da51ead655094bee77e05973?s=128&d=identicon&r=PG&f=1", "display_name": "J.vdS", "link": "https://stackoverflow.com/users/9003912/j-vds"}, "is_accepted": false, "score": 1, "last_activity_date": 1526536589, "last_edit_date": 1526536589, "creation_date": 1526535981, "answer_id": 50384124, "question_id": 50379490, "link": "https://stackoverflow.com/questions/50379490/last-matching-value-in-dataframe-python/50384124#50384124", "title": "Last matching value in DataFrame (Python)", "body": "<p>This one is more shaped to the example you have provided:</p>\n\n<p>first create the dataframe (with the date column as index):</p>\n\n<pre><code>import pandas as pd\n\ncolumn_names = ['Date', 'ID', 'Name', 'Old_Value', 'New_Value']\nvalues = [['2018-01-01', '101', 'Bob', '10.0', '12.0'], ['2018-01-01', 102, 'Tim', 9.0, 14.0],['2018-02-01', 101, 'Bob', 12.0, 9.0], ['2018-02-14', 101, 'Bob', 9.0, 7.0], ['2018-02-14', 102, 'Tim', 14.0, 19.0], ['2018-02-21', 101, 'Bob', 7.00, 6.0], ['2018-02-21', 102, 'Tim', 19.0, 16.0], ['2018-02-23', 102, 'Tim', 16.0, 14.0]]\n\ndf = pd.DataFrame(values, columns = column_names).set_index('Date', drop = True)\n</code></pre>\n\n<p>Then define a user id of which you want to update the value:</p>\n\n<pre><code># the user id of which you want to change the value, 101 of Bob in this case\nuser_id = 101\n\n# get the last line of the user_id, and take its 'new' value as old value and the name\nlast_line = df.loc[df.ID == user_id, ['New_Value', 'Name']].iloc[-1]\nname = last_line.Name\nold_value = last_line.New_Value\n\n# apply a function on the 'new' old value to calculate the 'new' new value\nnew_value = old_value - 4 #(or any other function)\n\n# set the date for the new value\nnew_date = '2018-02-25'\n\n#update the dataframe\ndf = df.append(pd.DataFrame([[user_id, name, old_value, new_value]], index = [new_date], columns = df.columns))\ndf.index.name = 'Date'\n</code></pre>\n\n<p>in this case resulting in:</p>\n\n<pre><code>df = \n             ID Name Old_Value New_Value\nDate                                    \n2018-01-01  101  Bob      10.0      12.0\n2018-01-01  102  Tim         9        14\n2018-02-01  101  Bob        12         9\n2018-02-14  101  Bob         9         7\n2018-02-14  102  Tim        14        19\n2018-02-21  101  Bob         7         6\n2018-02-21  102  Tim        19        16\n2018-02-23  102  Tim        16        14\n2018-02-25  101  Bob         6         2\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 8281549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ca9f735579ee327ba8c20daddd5c28d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/8281549/peter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 284, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1526536589, "creation_date": 1526502895, "last_edit_date": 1526526357, "question_id": 50379490, "link": "https://stackoverflow.com/questions/50379490/last-matching-value-in-dataframe-python", "title": "Last matching value in DataFrame (Python)", "body": "<p>I have a very large df that I am trying to work on, but the only method I have found so far is using for loops which is taking far too long. I know that it's possible but just not sure how so hoping someone can help. Lets say I have the following df:</p>\n\n<pre><code>Date       ID   Name Old_Value New_Value\n2018-01-01 101  Bob  10.0      12.0\n2018-01-01 102  Tim  9.0       14.0\n\n..... 15 mil rows\n</code></pre>\n\n<p>I need to find a way of taking Bob's New_Value and use that as his next Old_Value so the df would look something as follows:</p>\n\n<pre><code>Date       ID   Name Old_Value New_Value\n2018-01-01 101  Bob  10.0      12.0\n2018-01-01 102  Tim  9.0       14.0\n2018-02-01 101  Bob  12.0      9.0\n2018-02-14 101  Bob  9.0       7.0\n2018-02-14 102  Tim  14.0      19.0\n2018-02-21 101  Bob  7.00      6.0\n2018-02-21 102  Tim  19.0      16.0\n2018-02-23 102  Tim  16.0      14.0\n</code></pre>\n\n<p>The issue is the New_Value cannot be calculated until the Old_Value for each ID is known and the date must be in ascending order over the entire df. So the calculations that return 9.0 as New_Value in row three are dependant on the updated Old_Value (which is 12.0 from New_Value in row one).</p>\n\n<p>Some IDs appear more frequently than others in the df and there is no set sequence to when they appear. The dataframe has upwards of 100,000 unique ids and using for loops is not a viable solution as the run time is in the thousands of hours.</p>\n\n<p>*UPDATE: Thanks for your answers so far, I have added some more information to make it a little clearer. </p>\n"}, {"tags": ["python", "shell", "amazon-web-services"], "comments": [{"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 2, "creation_date": 1526503241, "post_id": 50379463, "comment_id": 87775333, "body": "Technically a question for Unix &amp; Linux or Server Fault or Super User, but I&#39;ll answer anyway, because this really is a common question."}], "answers": [{"tags": [], "owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "is_accepted": true, "score": 1, "last_activity_date": 1526503021, "creation_date": 1526503021, "answer_id": 50379521, "question_id": 50379463, "link": "https://stackoverflow.com/questions/50379463/running-python-script-even-if-i-am-not-log-in/50379521#50379521", "title": "Running python script even if I am not log in", "body": "<p>Run your script through the <code>nohup</code> command. The interface is pretty simple. The call would look something like this:</p>\n\n<pre><code>nohup script arg1 arg2\n</code></pre>\n\n<p>Here <code>script arg1 arg2</code> are just the usual way you run the script.</p>\n\n<p>When you are able to log back in, <code>stdout</code> and <code>stderr</code> will be in a file called <code>nohup.out</code>. If you want something different, use redirection as described in <code>man nohup</code>.</p>\n"}], "owner": {"reputation": 295, "user_id": 9509656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f59d2a4635d2d403e1c23b2795383ff6?s=128&d=identicon&r=PG&f=1", "display_name": "Jeremie", "link": "https://stackoverflow.com/users/9509656/jeremie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 50379521, "answer_count": 1, "score": 0, "last_activity_date": 1526503345, "creation_date": 1526502713, "last_edit_date": 1526503345, "question_id": 50379463, "link": "https://stackoverflow.com/questions/50379463/running-python-script-even-if-i-am-not-log-in", "title": "Running python script even if I am not log in", "body": "<p>I have an AWS EC2 server, and I was wondering about how to keep a python script running even when I am not logged in on the server. I would like to be able to start a long running script and log out. How can I say to the server 'Ok, I will close my laptop now, but you will keep running the script'?</p>\n"}, {"tags": ["python", "csv", "formatting"], "comments": [{"owner": {"reputation": 1451, "user_id": 2699660, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lNV5O.png?s=128&g=1", "display_name": "byouness", "link": "https://stackoverflow.com/users/2699660/byouness"}, "edited": false, "score": 0, "creation_date": 1526503320, "post_id": 50379453, "comment_id": 87775365, "body": "Not clear what is the issue here, you know how to load the csv content to memory, how to format your phone numbers, and how to write a dataframe back into a csv file. I would simply suggest to use panda&#39;s functions: <code>load_csv</code> <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.read_csv.html\" rel=\"nofollow noreferrer\">pandas.pydata.org/pandas-docs/stable/generated/&hellip;</a> and <code>to_csv</code> <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.to_csv.html\" rel=\"nofollow noreferrer\">pandas.pydata.org/pandas-docs/stable/generated/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 485, "user_id": 1510254, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f0a48bcf8910cc784846105821140a97?s=128&d=identicon&r=PG", "display_name": "Rex", "link": "https://stackoverflow.com/users/1510254/rex"}, "edited": false, "score": 0, "creation_date": 1526510991, "post_id": 50379814, "comment_id": 87778110, "body": "When I try to add the + &#39;\\n&#39; to the end of the spotwriter.writerow I get a TypeError: can only concatenate list (not &quot;str&quot;) to list. Any ideas about that particular problem."}, {"owner": {"reputation": 26, "user_id": 9760559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e55719013a9811e94659ff78fd5133f?s=128&d=identicon&r=PG&f=1", "display_name": "Ewout Maertens", "link": "https://stackoverflow.com/users/9760559/ewout-maertens"}, "reply_to_user": {"reputation": 485, "user_id": 1510254, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f0a48bcf8910cc784846105821140a97?s=128&d=identicon&r=PG", "display_name": "Rex", "link": "https://stackoverflow.com/users/1510254/rex"}, "edited": false, "score": 0, "creation_date": 1526511572, "post_id": 50379814, "comment_id": 87778280, "body": "Well, &#39;\\n&#39; is basically a character. The writerow function can only write a list into a row (for each argument in the list there will be an argument created in the row). That&#39;s why the parameter to the writerow function has to be a list. What you could do is this: writerow([row[0], row[1], &#39;\\n&#39;]), but I don&#39;t know why you would want to do this since each row is automatically written on a new line. Can you give me some insight on why you want to add a newline at the end?"}, {"owner": {"reputation": 26, "user_id": 9760559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e55719013a9811e94659ff78fd5133f?s=128&d=identicon&r=PG&f=1", "display_name": "Ewout Maertens", "link": "https://stackoverflow.com/users/9760559/ewout-maertens"}, "reply_to_user": {"reputation": 485, "user_id": 1510254, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f0a48bcf8910cc784846105821140a97?s=128&d=identicon&r=PG", "display_name": "Rex", "link": "https://stackoverflow.com/users/1510254/rex"}, "edited": false, "score": 0, "creation_date": 1526511694, "post_id": 50379814, "comment_id": 87778314, "body": "As for your problem with the whitespaces go, I have no clue why it&#39;s there for you. It works perfectly fine for me, without having the whitespace at the end. Can you print out each argument before you write it into a new .csv file to check if there is already a whitespace there? If so you can remove them with the command: string.replace(&quot; &quot;, &quot;&quot;)"}, {"owner": {"reputation": 485, "user_id": 1510254, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f0a48bcf8910cc784846105821140a97?s=128&d=identicon&r=PG", "display_name": "Rex", "link": "https://stackoverflow.com/users/1510254/rex"}, "edited": false, "score": 0, "creation_date": 1526513208, "post_id": 50379814, "comment_id": 87778672, "body": "I thought perhaps I needed the &#39;\\n&#39; to get rid of the white space. I print out the rows after each iteration and have no white spaces in the cmd line output. However, when I open up the file I have all the white space. Scratching my head."}, {"owner": {"reputation": 26, "user_id": 9760559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e55719013a9811e94659ff78fd5133f?s=128&d=identicon&r=PG&f=1", "display_name": "Ewout Maertens", "link": "https://stackoverflow.com/users/9760559/ewout-maertens"}, "reply_to_user": {"reputation": 485, "user_id": 1510254, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f0a48bcf8910cc784846105821140a97?s=128&d=identicon&r=PG", "display_name": "Rex", "link": "https://stackoverflow.com/users/1510254/rex"}, "edited": false, "score": 0, "creation_date": 1526513532, "post_id": 50379814, "comment_id": 87778739, "body": "Can you try opening it into excel and check if the whitespaces are there too? If so can you put the line where you write it into the .csv file again. In any case as long as you remember the whitespaces are there you can trim them out if you read it in again, it&#39;s just strange because it shouldn&#39;t be doing it."}, {"owner": {"reputation": 485, "user_id": 1510254, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f0a48bcf8910cc784846105821140a97?s=128&d=identicon&r=PG", "display_name": "Rex", "link": "https://stackoverflow.com/users/1510254/rex"}, "edited": false, "score": 0, "creation_date": 1526513858, "post_id": 50379814, "comment_id": 87778816, "body": "Yeah, they (the white spaces) show up when using Excel to open the file also."}, {"owner": {"reputation": 485, "user_id": 1510254, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f0a48bcf8910cc784846105821140a97?s=128&d=identicon&r=PG", "display_name": "Rex", "link": "https://stackoverflow.com/users/1510254/rex"}, "reply_to_user": {"reputation": 26, "user_id": 9760559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e55719013a9811e94659ff78fd5133f?s=128&d=identicon&r=PG&f=1", "display_name": "Ewout Maertens", "link": "https://stackoverflow.com/users/9760559/ewout-maertens"}, "edited": false, "score": 0, "creation_date": 1526513896, "post_id": 50379814, "comment_id": 87778829, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/171190/discussion-between-rex-and-ewout-maertens\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 26, "user_id": 9760559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e55719013a9811e94659ff78fd5133f?s=128&d=identicon&r=PG&f=1", "display_name": "Ewout Maertens", "link": "https://stackoverflow.com/users/9760559/ewout-maertens"}, "is_accepted": true, "score": 1, "last_activity_date": 1526506062, "last_edit_date": 1526506062, "creation_date": 1526504448, "answer_id": 50379814, "question_id": 50379453, "link": "https://stackoverflow.com/questions/50379453/open-csv-file-edit-one-field-write-back-to-csv-file/50379814#50379814", "title": "Open .csv file edit one field, write back to .csv file", "body": "<p>Shouldn't you be formatting on row, instead of spotreader? This works fine for me reading it from a .csv file. I added a check for ignoring empty strings. Also the spotwriter won't work since you aren't opening the file in write mode. 'rU' is read mode only. What you want to do is make a brand new .csv file and write the output there like this:</p>\n\n<pre><code>import csv\n\ndef phone_format(n):\n    return format(int(n[:-1]), \",\").replace(\",\", \"-\") +n[-1]\n\nwith open('sample.csv', 'rU') as csvfile:\n    with open('sampleOutput.csv', 'w') as csvfile2:\n        spotreader = csv.reader(csvfile)\n        spotwriter = csv.writer(csvfile2)\n        for row in spotreader:\n            if row[1] != '':\n                spotwriter.writerow([row[0], phone_format(row[1]), row[2]])\n            else:\n                spotwriter.writerow([row[0], row[1], row[2]])\n</code></pre>\n\n<p>The input is your .csv file.</p>\n\n<p>Output:</p>\n\n<pre><code>Jason Schow,,5016098648\nDena VanGorder,,6074621816\nLindsey McNabb,306-653-3971,3066505001\nJeff Wozniak,306-653-1566,3069420647\nVictoria Norton,306-769-2840,3067697062\nBenjie Butikofer,306-769-2107,3067697108\nJessica Duede,,3062813158\nPete Vogeh,306-377-6261,3069890349\nMelissa Kwasney,,3069412583\n</code></pre>\n\n<p>This is assuming you only want to edit the first phone number, if you want to edit the second phone number too, you will have to do some additional programming.</p>\n"}, {"tags": [], "owner": {"reputation": 485, "user_id": 1510254, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f0a48bcf8910cc784846105821140a97?s=128&d=identicon&r=PG", "display_name": "Rex", "link": "https://stackoverflow.com/users/1510254/rex"}, "is_accepted": false, "score": 0, "last_activity_date": 1526530111, "creation_date": 1526530111, "answer_id": 50383201, "question_id": 50379453, "link": "https://stackoverflow.com/questions/50379453/open-csv-file-edit-one-field-write-back-to-csv-file/50383201#50383201", "title": "Open .csv file edit one field, write back to .csv file", "body": "<p>Got it figured out. I stumbled across this in another stackoverflow article. <a href=\"https://stackoverflow.com/questions/3348460/csv-file-written-with-python-has-blank-lines-between-each-row/3348664\">Article Here</a></p>\n\n<p>The corrected code is as follows. Thanks again for all the help and suggestions.</p>\n\n<pre><code>import csv\n\ndef phone_format(n):\n    return format(int(n[:-1]), \",\").replace(\",\", \"-\") +n[-1]\n\nwith open('sample.csv', 'rU') as csvfile:\n    with open('sampleOutput.csv', 'w', newline='') as csvfile2:\n        spotreader = csv.reader(csvfile)\n        spotwriter = csv.writer(csvfile2)\n        for row in spotreader:\n            if row[1] != '' and row[2] != '':\n                spotwriter.writerow([row[0], phone_format(row[1]), phone_format(row[2])])\n            elif row[1] != '' and row[2] == '':\n                spotwriter.writerow([row[0], phone_format(row[1]), (row[2])])\n            elif row[1] == '' and row[2] != '' :\n                spotwriter.writerow([row[0], (row[1]), phone_format(row[2])])\n</code></pre>\n"}], "owner": {"reputation": 485, "user_id": 1510254, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f0a48bcf8910cc784846105821140a97?s=128&d=identicon&r=PG", "display_name": "Rex", "link": "https://stackoverflow.com/users/1510254/rex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 50379814, "answer_count": 2, "score": 2, "last_activity_date": 1526530111, "creation_date": 1526502664, "question_id": 50379453, "link": "https://stackoverflow.com/questions/50379453/open-csv-file-edit-one-field-write-back-to-csv-file", "title": "Open .csv file edit one field, write back to .csv file", "body": "<p>So I have a .csv file with names, lat, lon, and phone number; separated by comma. I need to open the file, edit the phone number into a more legible format and then write that back to the file.</p>\n\n<p>There is a nice solution to editing the phone numbers <a href=\"https://stackoverflow.com/questions/7058120/whats-the-best-way-to-format-a-phone-number-in-python/7058216#7058216\">Here</a> </p>\n\n<p>Not really sure of the best way to approach this problem. Any help is greatly appreciated. Thanks. </p>\n\n<pre><code>import csv\n\ndef phone_format(n):\n    return format(int(n[:-1]), \",\").replace(\",\", \"-\") +n[-1]\n\nwith open('sample.csv', 'rU') as csvfile:\n    spotreader = csv.reader(csvfile)\n    spotwriter = csv.writer(csvfile)\n    for row in spotreader:\n        spotwriter.writerow([0] + phone_format(spotreader[1]))\n</code></pre>\n\n<p>This does not work. Not really sure how to get what I am looking for. </p>\n\n<hr>\n\n<p>Sample of my csv file below</p>\n\n<pre><code>Jason Schow,,5016098648\nDena VanGorder,,6074621816\nLindsey McNabb,3066533971,3066505001\nJeff Wozniak,3066531566,3069420647\nVictoria Norton,3067692840,3067697062\nBenjie Butikofer,3067692107,3067697108\nJessica Duede,,3062813158\nPete Vogeh,3063776261,3069890349\nMelissa Kwasney,,3069412583\n</code></pre>\n\n<p>Type of output to .csv file that I am looking for below:</p>\n\n<pre><code>Jason Schow,,501-609-8648\nDena VanGorder,,607-462-1816\nLindsey McNabb,306-653-3971,306-650-5001\nJeff Wozniak,306-653-1566,306-942-0647\nVictoria Norton,306-769-2840,306-769-7062\nBenjie Butikofer,306-769-2107,306-769-7108\nJessica Duede,,306-281-3158\nPete Vogeh,306-377-6261,306-989-0349\nMelissa Kwasney,,306-941-2583\n</code></pre>\n"}, {"tags": ["python", "django", "django-rest-framework"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1526502707, "post_id": 50379441, "comment_id": 87775126, "body": "Your <code>put</code> results in an infinite loop."}], "answers": [{"comments": [{"owner": {"reputation": 1053, "user_id": 9342041, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4e7aadf1a0fdcc33569b83e752edd611?s=128&d=identicon&r=PG&f=1", "display_name": "devmrh", "link": "https://stackoverflow.com/users/9342041/devmrh"}, "edited": false, "score": 0, "creation_date": 1526503423, "post_id": 50379524, "comment_id": 87775416, "body": "thankyou for answer what is this err that say : &#39;ProductOwnserSingleViewAPIView&#39; object has no attribute &#39;get_object&#39;"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 1053, "user_id": 9342041, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4e7aadf1a0fdcc33569b83e752edd611?s=128&d=identicon&r=PG&f=1", "display_name": "devmrh", "link": "https://stackoverflow.com/users/9342041/devmrh"}, "edited": false, "score": 0, "creation_date": 1526503621, "post_id": 50379524, "comment_id": 87775509, "body": "@finfin: aarrgh... I think you probably should look through the documentation and look for views with more tooling."}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 1, "last_activity_date": 1526503582, "last_edit_date": 1526503582, "creation_date": 1526503043, "answer_id": 50379524, "question_id": 50379441, "link": "https://stackoverflow.com/questions/50379441/drf-update-a-row/50379524#50379524", "title": "DRF update a row", "body": "<p>You write:</p>\n\n<pre><code>class ProductOwnserSingleViewAPIView(APIView,mixins.UpdateModelMixin):\n\n    # ...\n\n    <b>def put(self, request, *args, **kwargs):\n        return  self.put(self,request,*kwargs,**kwargs)</b></code></pre>\n\n<p>In case you perform a <code>PUT</code> request, then that means that the <code>put(..)</code> function is called with some arguments. But what does your <code>put</code> function do? Indeed, it calls <em>itself</em> with the very same parameters. This call subsequently results into another call, so you keep calling until the call stack reaches its maximum, and the the an error occurs.</p>\n\n<p>A typical workflow for a <code>put(..)</code> is:</p>\n\n<pre><code>class ProductOwnserSingleViewAPIView(APIView,mixins.UpdateModelMixin):\n\n    # ...\n\n    def put(self, request, pk, format=None):\n        # obtain the element we want to \"update\"\n        product = Product.objects.get(\n            author_id=request.user.id,\n            product_id=request.GET('id')\n        )\n\n        # pass the element through the serializer with the data to update\n        serializer = ProductSerializer(product, data=request.data)\n        # check if the update makes sense (is valid)\n        if serializer.is_valid():\n            # if so, we save the object\n            serializer.save()\n            # and return the data as a response\n            return Response(serializer.data)\n        # if not, we report the errors as a response\n        return Response(serializer.errors, status=status.HTTP_400_BAD_REQUEST)</code></pre>\n\n<p>So we first obtain the element we wish to <code>PUT</code>, then we call the serializer that will update the fields that we want to change (data is in the <code>request.data</code>), and finally in case all those fields are valid we save the object and return all the data of the object.</p>\n\n<p>In case the serializer reports errors, we return those errors as a result.</p>\n"}, {"comments": [{"owner": {"reputation": 1053, "user_id": 9342041, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4e7aadf1a0fdcc33569b83e752edd611?s=128&d=identicon&r=PG&f=1", "display_name": "devmrh", "link": "https://stackoverflow.com/users/9342041/devmrh"}, "edited": false, "score": 0, "creation_date": 1526503600, "post_id": 50379570, "comment_id": 87775497, "body": "thankyou i tried but i get error  &#39;ProductOwnserSingleViewAPIView&#39; object has no attribute &#39;get_object&#39;  idk why"}], "tags": [], "owner": {"reputation": 878, "user_id": 4685525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17fe806f80a84242d4e8330a352c1f74?s=128&d=identicon&r=PG", "display_name": "origamic", "link": "https://stackoverflow.com/users/4685525/origamic"}, "is_accepted": false, "score": 0, "last_activity_date": 1526503295, "creation_date": 1526503295, "answer_id": 50379570, "question_id": 50379441, "link": "https://stackoverflow.com/questions/50379441/drf-update-a-row/50379570#50379570", "title": "DRF update a row", "body": "<pre><code>def put(self, request, *args, **kwargs):\n    return  self.put(self,request,*kwargs,**kwargs)\n</code></pre>\n\n<p>Change it;</p>\n\n<pre><code>def put(self, request, *args, **kwargs):\n    return  super(ProductOwnserSingleViewAPIView, self).update(request, *args, **kwargs)\n</code></pre>\n"}], "owner": {"reputation": 1053, "user_id": 9342041, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4e7aadf1a0fdcc33569b83e752edd611?s=128&d=identicon&r=PG&f=1", "display_name": "devmrh", "link": "https://stackoverflow.com/users/9342041/devmrh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 0, "accepted_answer_id": 50379524, "answer_count": 2, "score": 1, "last_activity_date": 1526503582, "creation_date": 1526502621, "question_id": 50379441, "link": "https://stackoverflow.com/questions/50379441/drf-update-a-row", "title": "DRF update a row", "body": "<p>im trying to update a existing row in db in client side i send request with put method to server i used <code>updatemodelmixin</code> also id is comming to server in data by this view server response is </p>\n\n<p><code>maximum recursion depth exceeded</code></p>\n\n<p>what is correct way to update my data?</p>\n\n<pre><code>class ProductOwnserSingleViewAPIView(APIView,mixins.UpdateModelMixin):\n\n    queryset = Product.objects.all()\n    serializer_class = ProductSerializer\n\n    def put(self, request, *args, **kwargs):\n        return  self.put(self,request,*kwargs,**kwargs)\n\n    def get(self, request):\n        id = request.GET.get(\"id\")\n        try:\n            product = Product.objects.get(\n                author_id=request.user.id,\n                product_id=id\n            )\n            if not product:\n                return Response(status.HTTP_400_BAD_REQUEST)\n            serializer = ProductSerializer(instance=product, context={\"request\": request})\n            return Response(serializer.data)\n        except Product.DoesNotExist:\n            return Response(status.HTTP_400_BAD_REQUEST)\n</code></pre>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1526503178, "post_id": 50379437, "comment_id": 87775302, "body": "See the section of my answer below containing &quot;toward better performance&quot;."}, {"owner": {"reputation": 13, "user_id": 8050033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4caa765ad5c340a528661dcfd8a50fc7?s=128&d=identicon&r=PG&f=1", "display_name": "D.I.", "link": "https://stackoverflow.com/users/8050033/d-i"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1526503626, "post_id": 50379437, "comment_id": 87775510, "body": "That method would still require a &quot;hard coded&quot; type solution though, no? I was hoping for more of an automated solution here like &quot;here&#39;s the documentation on this obscure pandas function that can auto-justify when you play with this parameter&quot;"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1526503760, "post_id": 50379437, "comment_id": 87775560, "body": "Hah... pandas isn&#39;t <i>that</i> smart... ;-/ this isn&#39;t nearly a common enough use case to justify its own pandas function (pun intended)."}, {"owner": {"reputation": 7436, "user_id": 5514476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hP6t0.jpg?s=128&g=1", "display_name": "DJK", "link": "https://stackoverflow.com/users/5514476/djk"}, "edited": false, "score": 0, "creation_date": 1526504241, "post_id": 50379437, "comment_id": 87775762, "body": "<a href=\"https://stackoverflow.com/questions/33530601/pandas-force-nan-to-bottom-of-each-column-at-each-index\">This</a> seems pretty similar to what you want"}, {"owner": {"reputation": 13, "user_id": 8050033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4caa765ad5c340a528661dcfd8a50fc7?s=128&d=identicon&r=PG&f=1", "display_name": "D.I.", "link": "https://stackoverflow.com/users/8050033/d-i"}, "edited": false, "score": 0, "creation_date": 1526572106, "post_id": 50379437, "comment_id": 87807040, "body": "@COLDSPEED your answer on the other forum was great. Thanks for redirecting."}, {"owner": {"reputation": 13, "user_id": 8050033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4caa765ad5c340a528661dcfd8a50fc7?s=128&d=identicon&r=PG&f=1", "display_name": "D.I.", "link": "https://stackoverflow.com/users/8050033/d-i"}, "reply_to_user": {"reputation": 7436, "user_id": 5514476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hP6t0.jpg?s=128&g=1", "display_name": "DJK", "link": "https://stackoverflow.com/users/5514476/djk"}, "edited": false, "score": 0, "creation_date": 1526572111, "post_id": 50379437, "comment_id": 87807042, "body": "@DJK the only problem there was that I had to work with <b>massive</b> datasets and your answer required a bit of manual work"}], "owner": {"reputation": 13, "user_id": 8050033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4caa765ad5c340a528661dcfd8a50fc7?s=128&d=identicon&r=PG&f=1", "display_name": "D.I.", "link": "https://stackoverflow.com/users/8050033/d-i"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "closed_date": 1526503111, "answer_count": 0, "score": 0, "last_activity_date": 1526503682, "creation_date": 1526502609, "last_edit_date": 1526503682, "question_id": 50379437, "link": "https://stackoverflow.com/questions/50379437/how-to-justify-data-to-the-top-of-a-dataframe-in-pandas", "closed_reason": "Duplicate", "title": "How to justify data to the top of a dataframe in pandas", "body": "<p>I need to <em>automate</em> the process of shifting data around in a dataframe to justify all the valuable information (i.e. not NaN) to the topmost empty cell. The catch here is that I don't know off the cuff what my input looks like until the user inputs it. Thus, I may have NaN's embedded anywhere in the data above, below, or between data sets.</p>\n\n<p>What I have:</p>\n\n<pre><code> a  b   c   d   e   f   g   h   i   j   k   l   m   o\n 0  0   0   0   0   0   0   NaN NaN NaN NaN NaN NaN NaN\n 1  1   1   1   1   1   1   NaN NaN NaN NaN NaN NaN NaN\n 0  0   0   1   0   0   1   NaN NaN NaN NaN NaN NaN NaN\n 0  0   1   0   1   0   0   NaN NaN NaN NaN NaN NaN NaN\nNaN NaN NaN NaN NaN NaN NaN 1   1   0   1   0   0   1\n</code></pre>\n\n<p>Desired Output:</p>\n\n<pre><code>a   b   c   d   e   f   g   h   i   j   k   l   m   o\n0   0   0   0   0   0   0   1   1   0   1   0   0   1\n1   1   1   1   1   1   1   NaN NaN NaN NaN NaN NaN NaN\n0   0   0   1   0   0   1   NaN NaN NaN NaN NaN NaN NaN\n0   0   1   0   1   0   0   NaN NaN NaN NaN NaN NaN NaN\n</code></pre>\n\n<p>What I want to do is to efficiently (ie. not line by line) shift the values in row 4 columns <strong>h</strong> to <strong>o</strong> up to the top. I was able to hardcode this with the following lines of code:</p>\n\n<pre><code>&gt; df= df.set_index(['a', 'b', 'c', 'd', 'e', 'f','g']).shift(-4).iloc[0:5].reset_index()\n\n&gt; df= df.reindex(np.arange(4))\n</code></pre>\n\n<p>The problem with hard coding is, as I said above, you don't know what the dataset looks like until the user inputs it. As well, the application for this would be data with over 100k rows of data.</p>\n\n<p>Any suggestions as to how I may <em>automate</em> the shifting process? Preferably using pandas.</p>\n"}, {"tags": ["python", "scikit-learn", "classification", "grid-search"], "answers": [{"comments": [{"owner": {"reputation": 8369, "user_id": 4057186, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/87142ebe8244548dc01c3406b0ef2802?s=128&d=identicon&r=PG&f=1", "display_name": "edesz", "link": "https://stackoverflow.com/users/4057186/edesz"}, "edited": false, "score": 0, "creation_date": 1602539106, "post_id": 50380029, "comment_id": 113747400, "body": "Using <code>sklearn==0.23.2</code>, when using the scorer object (<code>scoring=custom_scorer</code>), it gives this error <code>IndexError: too many indices for array: array is 1-dimensional, but 2 were indexed</code> and it points to this line <code>diff = np.abs(ground_truth - predictions[:, 1]).max()</code>. It seems to suggest that <code>predictions</code> is a 1D array, but it is being indexed like a 2D array. This is confusing because <code>.predict_proba()</code> should return a 2D array so indexing it using <code>[:, 1]</code> should be fine. Any clues about what could be causing this error?"}], "tags": [], "owner": {"reputation": 4314, "user_id": 5152563, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/ca2290acd27712398ff5bf1d469129dd?s=128&d=identicon&r=PG", "display_name": "Quickbeam2k1", "link": "https://stackoverflow.com/users/5152563/quickbeam2k1"}, "is_accepted": true, "score": 5, "last_activity_date": 1526558134, "last_edit_date": 1526558134, "creation_date": 1526505524, "answer_id": 50380029, "question_id": 50379374, "link": "https://stackoverflow.com/questions/50379374/custom-scoring-function-for-grid-search-classification/50380029#50380029", "title": "Custom scoring function for grid search classification", "body": "<p>See documentation <a href=\"http://scikit-learn.org/stable/modules/model_evaluation.html#implementing-your-own-scoring-object\" rel=\"nofollow noreferrer\">here</a>: The callable should have parameters (estimator, X, y) </p>\n\n<p>Then you can use in your definition, <code>estimator.predict_proba(X)</code></p>\n\n<p>Alternatively, you can use <a href=\"http://scikit-learn.org/stable/modules/generated/sklearn.metrics.make_scorer.html#sklearn.metrics.make_scorer\" rel=\"nofollow noreferrer\">make_scorer</a> with <code>needs_proba=True</code></p>\n\n<p>A full code example:</p>\n\n<pre><code>from sklearn.datasets import make_classification\nfrom sklearn.model_selection import GridSearchCV\nfrom sklearn.ensemble import RandomForestClassifier\nfrom sklearn.metrics import make_scorer\nimport pandas as pd\nimport numpy as np\n\nX, y = make_classification()\ndef my_custom_loss_func_est(estimator, X, y):\n    # predictions must be probabilities - e.g. model.predict_proba()\n    # example code here:\n    diff = np.abs(y - estimator.predict_proba(X)[:, 1]).max()\n    return -np.log(1 + diff)\n\ndef my_custom_loss_func(ground_truth, predictions):\n    # predictions must be probabilities - e.g. model.predict_proba()\n    # example code here:\n    diff = np.abs(ground_truth - predictions[:, 1]).max()\n    return np.log(1 + diff)\n\ncustom_scorer = make_scorer(my_custom_loss_func, \n                            greater_is_better=False,\n                            needs_proba=True)\n</code></pre>\n\n<p>Use the scorer object:</p>\n\n<pre><code>param_grid = {'min_samples_leaf': [10, 50], 'n_estimators': [100, 200]}\ngrid = GridSearchCV(RandomForestClassifier(), param_grid=param_grid,\n                scoring=custom_scorer, return_train_score=True)\ngrid.fit(X, y)\npd.DataFrame(grid.cv_results_)[['mean_test_score',\n                                   'mean_train_score',\n                                   'param_min_samples_leaf',\n                                   'param_n_estimators']]\n\n    mean_test_score mean_train_score    param_min_samples_leaf    param_n_estimators\n0         -0.505201        -0.495011                        10                   100\n1         -0.509190        -0.498283                        10                   200\n2         -0.406279        -0.406292                        50                   100\n3         -0.406826        -0.406862                        50                   200\n</code></pre>\n\n<p>Using the loss function directly is easy as well </p>\n\n<pre><code>grid = GridSearchCV(RandomForestClassifier(), param_grid=param_grid,\n                scoring=my_custom_loss_func_est,     return_train_score=True)\ngrid.fit(X, y)\npd.DataFrame(grid.cv_results_)[['mean_test_score',\n                                   'mean_train_score',\n                                   'param_min_samples_leaf',\n                                   'param_n_estimators']]\n\n    mean_test_score mean_train_score    param_min_samples_leaf  param_n_estimators\n0         -0.509098        -0.491462                        10                100\n1         -0.497693        -0.490936                        10                200\n2         -0.409025        -0.408957                        50                100\n3         -0.409525        -0.409500                        50                200\n</code></pre>\n\n<p>Results differ due to different cv folds (I assume, but I am too lazy right now to set a seed and edit again (or is there a better way to paste code without the need of indenting everything manually?))</p>\n"}], "owner": {"reputation": 11244, "user_id": 2636317, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d665de9176035b991a9c84b82a23337d?s=128&d=identicon&r=PG", "display_name": "mgoldwasser", "link": "https://stackoverflow.com/users/2636317/mgoldwasser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1666, "favorite_count": 1, "accepted_answer_id": 50380029, "answer_count": 1, "score": 3, "last_activity_date": 1526558134, "creation_date": 1526502347, "question_id": 50379374, "link": "https://stackoverflow.com/questions/50379374/custom-scoring-function-for-grid-search-classification", "title": "Custom scoring function for grid search classification", "body": "<p>I would like to perform a <code>GridSearchCV</code> for a <code>RandomForestClassifier</code> in scikit-learn, and I have a custom scoring function that I would like to use. </p>\n\n<p>The scoring function will only work if probabilities are supplied (e.g.  <code>rfc.predict_proba(...)</code> must be called instead of <code>rfc.predict(...)</code>)</p>\n\n<p>How can I instruct GridSearchCV to use <code>predict_proba()</code> instead of <code>predict()</code>? </p>\n\n<pre><code>from sklearn.model_selection import GridSearchCV\nfrom sklearn.ensemble import RandomForestClassifier\n\ndef my_custom_loss_func(ground_truth, predictions):\n    # predictions must be probabilities - e.g. model.predict_proba()\n    # example code here:\n    diff = np.abs(ground_truth - predictions).max()\n    return np.log(1 + diff)\n\nparam_grid = {'min_samples_leaf': [1, 2, 5, 10, 20, 50, 100], 'n_estimators': [100, 200, 300]}\ngrid = GridSearchCV(RandomForestClassifier(), param_grid=param_grid,\n                    scoring=my_custom_loss_func)\n</code></pre>\n"}, {"tags": ["python", "windows", "tensorflow"], "answers": [{"tags": [], "owner": {"reputation": 1342, "user_id": 8255399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5f3ed502249c865f332a18f61bb32e1?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/8255399/alex"}, "is_accepted": false, "score": 2, "last_activity_date": 1526537865, "creation_date": 1526537865, "answer_id": 50384551, "question_id": 50379359, "link": "https://stackoverflow.com/questions/50379359/i-installed-the-tensorflow-gpu-version-and-cuda-9-1-and-python-3-6-5-however-a/50384551#50384551", "title": "I installed the Tensorflow gpu version and CUDA 9.1 and python 3.6.5. However, after I import the tensorflow-gpu I got the following error:", "body": "<blockquote>\n  <p>Currently Tensorflow is only supporting CUDA <strong>9.0</strong> </p>\n</blockquote>\n\n<p>But you have installed CUDA 9.1. You now have two options: </p>\n\n<ul>\n<li><p>Option 1:  You compile Tensorflow from source, this then enables support for your CUDA version 9.1</p></li>\n<li><p>Option 2: You <strong>install CUDA 9.0</strong> and wait until Tensorflow supports CUDA 9.1</p></li>\n</ul>\n\n<p>I went through the same pain and have decided to install CUDA 9.0. It is probably less of a hassle.</p>\n\n<p>Also refer to this <a href=\"https://github.com/tensorflow/tensorflow/issues/15656\" rel=\"nofollow noreferrer\">issue on GitHub</a> regarding the current status of Tensorflow support for CUDA 9.1 and how to compile Tensorflow from source.</p>\n"}], "owner": {"reputation": 17, "user_id": 9802513, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rahul", "link": "https://stackoverflow.com/users/9802513/rahul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 780, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1545981905, "creation_date": 1526502300, "last_edit_date": 1545981905, "question_id": 50379359, "link": "https://stackoverflow.com/questions/50379359/i-installed-the-tensorflow-gpu-version-and-cuda-9-1-and-python-3-6-5-however-a", "title": "I installed the Tensorflow gpu version and CUDA 9.1 and python 3.6.5. However, after I import the tensorflow-gpu I got the following error:", "body": "<p>Traceback (most recent call last):</p>\n\n<pre><code>  File \"C:\\Users\\ranji\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\platform\\self_check.py\", line 75, in preload_check\n    ctypes.WinDLL(build_info.cudart_dll_name)\n  File \"C:\\Users\\ranji\\AppData\\Local\\Programs\\Python\\Python36\\lib\\ctypes\\__init__.py\", line 348, in __init__\n    self._handle = _dlopen(self._name, mode)\nOSError: [WinError 126] The specified module could not be found\n</code></pre>\n\n<p>During handling of the above exception, another exception occurred:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"C:/Users/ranji/AppData/Local/Programs/Python/Python36/ts1.py\", line 1, in &lt;module&gt;\n    import tensorflow as tf\n  File \"C:\\Users\\ranji\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\__init__.py\", line 24, in &lt;module&gt;\n    from tensorflow.python import pywrap_tensorflow  # pylint: disable=unused-import\n  File \"C:\\Users\\ranji\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\__init__.py\", line 49, in &lt;module&gt;\n    from tensorflow.python import pywrap_tensorflow\n  File \"C:\\Users\\ranji\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\pywrap_tensorflow.py\", line 30, in &lt;module&gt;\n    self_check.preload_check()\n  File \"C:\\Users\\ranji\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\platform\\self_check.py\", line 82, in preload_check\n    % (build_info.cudart_dll_name, build_info.cuda_version_number))\nImportError: Could not find 'cudart64_90.dll'. TensorFlow requires that this DLL be installed in a directory that is named in your %PATH% environment variable. Download and install CUDA 9.0 from this URL: https://developer.nvidia.com/cuda-toolkit\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "pandas", "export-to-csv"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "edited": false, "score": 0, "creation_date": 1526502737, "post_id": 50379350, "comment_id": 87775131, "body": "@ScottBoston Well if they know how to create one, they can create 3. Ami&#39;s closure is good, but you can still answer it."}, {"owner": {"reputation": 66318, "user_id": 3510736, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/kVtHP.jpg?s=128&g=1", "display_name": "Ami Tavory", "link": "https://stackoverflow.com/users/3510736/ami-tavory"}, "edited": false, "score": 0, "creation_date": 1526502949, "post_id": 50379350, "comment_id": 87775201, "body": "(The site seemed offline for a few minutes?) @ScottBoston I think it&#39;s a duplicate, but, since you think otherwise, reopened it."}, {"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "edited": false, "score": 0, "creation_date": 1526502988, "post_id": 50379350, "comment_id": 87775215, "body": "I am out voted here.  Dupe it."}], "answers": [{"tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": false, "score": 1, "last_activity_date": 1526502585, "creation_date": 1526502585, "answer_id": 50379429, "question_id": 50379350, "link": "https://stackoverflow.com/questions/50379350/split-pandas-df-into-multiple-csvfiles-by-unique-column-value/50379429#50379429", "title": "Split pandas df into multiple csvfiles by unique column value", "body": "<p>Use:</p>\n\n<pre><code>for n,g in df.groupby('Location'):\n    g.to_csv(n+'.csv')\n</code></pre>\n"}], "owner": {"reputation": 1326, "user_id": 5703997, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0bdab5bc5e1c92920a03d44a9a0278f9?s=128&d=identicon&r=PG&f=1", "display_name": "LMGagne", "link": "https://stackoverflow.com/users/5703997/lmgagne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 1, "closed_date": 1526503207, "answer_count": 1, "score": 2, "last_activity_date": 1526502729, "creation_date": 1526502254, "question_id": 50379350, "link": "https://stackoverflow.com/questions/50379350/split-pandas-df-into-multiple-csvfiles-by-unique-column-value", "closed_reason": "Duplicate", "title": "Split pandas df into multiple csvfiles by unique column value", "body": "<p>I have a df that I'm trying to split into multiple dfs and then export into csv files.  Basically <a href=\"https://stackoverflow.com/questions/35374995/create-multiple-dataframe-using-for-loop-in-python-2-7\">this question</a>, but in Python 3 and with exporting.</p>\n\n<p>My df looks like this (except with ~70 unique locations)</p>\n\n<pre><code>Location        Name    Date\nOFFICE          Bob     3-Apr-15\nOFFICE          Jane    3-Apr-15\nHOME            Bob     3-Apr-15\nHOME            Jane    4-Apr-15\nHOME            John    4-Apr-15\nSHOPPING        Suzie   5-Apr-15\nSHOPPING        John    5-Apr-15\nHOME            Bobby   5-Apr-15\n</code></pre>\n\n<p>and I'd like 3 seperate csv files by location, one for office, one for home, and one for shopping.</p>\n\n<p>I can split the df like this:</p>\n\n<pre><code>gbl = globals()\nfor i in df:\n    gbl['df_'+i] = df[df.location==i]\n</code></pre>\n\n<p>but can't print them, and can't figure out how to mass create csv files.</p>\n"}, {"tags": ["python", "django", "apache2", "mod-wsgi"], "comments": [{"owner": {"reputation": 15853, "user_id": 1925257, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yY7YW.jpg?s=128&g=1", "display_name": "xyres", "link": "https://stackoverflow.com/users/1925257/xyres"}, "edited": false, "score": 0, "creation_date": 1526502930, "post_id": 50379323, "comment_id": 87775193, "body": "Did you use the <code>-R</code> option when doing <code>chown</code> on your project directory? <code>-R</code> is used for changing ownership of files and directories inside the parent."}, {"owner": {"reputation": 21, "user_id": 5627335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7533298a05b9f95f018617633c08307?s=128&d=identicon&r=PG&f=1", "display_name": "Saalim", "link": "https://stackoverflow.com/users/5627335/saalim"}, "reply_to_user": {"reputation": 15853, "user_id": 1925257, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yY7YW.jpg?s=128&g=1", "display_name": "xyres", "link": "https://stackoverflow.com/users/1925257/xyres"}, "edited": false, "score": 0, "creation_date": 1526503246, "post_id": 50379323, "comment_id": 87775334, "body": "Thanks, Yes, I did call chown recursively."}, {"owner": {"reputation": 15853, "user_id": 1925257, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yY7YW.jpg?s=128&g=1", "display_name": "xyres", "link": "https://stackoverflow.com/users/1925257/xyres"}, "edited": false, "score": 0, "creation_date": 1526503944, "post_id": 50379323, "comment_id": 87775629, "body": "Can you run run this command - <code>python -c &quot;import encodings&quot; - and see if throws an </code>ImportError`. Run it after activating your virtualenv. If it does raise an error, you might find this helpful - <a href=\"https://stackoverflow.com/q/38132755/1925257\">stackoverflow.com/q/38132755/1925257</a>"}, {"owner": {"reputation": 54548, "user_id": 128141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70dfb4afd84b106d0855184bf0ae4675?s=128&d=identicon&r=PG", "display_name": "Graham Dumpleton", "link": "https://stackoverflow.com/users/128141/graham-dumpleton"}, "edited": false, "score": 0, "creation_date": 1526531250, "post_id": 50379323, "comment_id": 87782213, "body": "Are you sure <code>libapache2-mod-wsgi-py3</code> isn&#39;t Python 3.5. You can&#39;t mix Python versions. The mod_wsgi module must be compiled for same Python version as the virtual environment else you can get this and other errors."}, {"owner": {"reputation": 54548, "user_id": 128141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70dfb4afd84b106d0855184bf0ae4675?s=128&d=identicon&r=PG", "display_name": "Graham Dumpleton", "link": "https://stackoverflow.com/users/128141/graham-dumpleton"}, "edited": false, "score": 0, "creation_date": 1526531363, "post_id": 50379323, "comment_id": 87782249, "body": "Also, what do you get for <code>ls -lasd &#47;root</code>. The permissions on that directory means that user Apache run as wouldn&#39;t be able to read it. Changing permissions of directories underneath is not enough. Good rule is never put stuff under <code>&#47;root</code> or a home directory."}, {"owner": {"reputation": 21, "user_id": 5627335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7533298a05b9f95f018617633c08307?s=128&d=identicon&r=PG&f=1", "display_name": "Saalim", "link": "https://stackoverflow.com/users/5627335/saalim"}, "edited": false, "score": 0, "creation_date": 1526719894, "post_id": 50379323, "comment_id": 87861750, "body": "Thanks, Graham and xyres. Changing the directory to /var/www/myproject helped. I&#39;ve tried previously /home/username/myproject and it didn&#39;t work too. Seems Graham was right regarding the top level folder permissions.  Cheers"}], "owner": {"reputation": 21, "user_id": 5627335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7533298a05b9f95f018617633c08307?s=128&d=identicon&r=PG&f=1", "display_name": "Saalim", "link": "https://stackoverflow.com/users/5627335/saalim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 227, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1526531393, "creation_date": 1526502156, "last_edit_date": 1526531393, "question_id": 50379323, "link": "https://stackoverflow.com/questions/50379323/django-apache2-server", "title": "django / Apache2 Server", "body": "<p>I'm trying to set up an Apache2/Django server on Ubuntu 18.04 x64 Digital Ocean droplet. I've went through the tutorials but still get an error. I've searched Stackoverflow and other sources for the solution, but still nothing works. Would someone be able to help? </p>\n\n<p>The project is placed in <strong>/root/myproject</strong>. I use virtualenv that I named myprojectenv. So the python path is correct with <strong>/root/myproject/myprojectenv</strong>. I'm using Python 3.6 and the version of \n<strong>/root/myproject/myprojectenv/bin/python</strong> is indeed 3.6. I'm using libapache2-mod-wsgi-py3.</p>\n\n<p>I have chown'ed the whole <strong>/root/myproject</strong> folder to 'www-data' and chmod'ed to 664 the sqlite.db file in accordance with DigitalOcean's tutorial. </p>\n\n<p>The content of my <strong>/etc/apache2/sites-available/000-default.conf</strong> file is (comments deleted): </p>\n\n<pre><code>&lt;VirtualHost *:80&gt;\n\n        ServerAdmin webmaster@localhost\n        DocumentRoot /root/myproject\n\n\n        ErrorLog ${APACHE_LOG_DIR}/error.log\n        CustomLog ${APACHE_LOG_DIR}/access.log combined\n\n\n        Alias /static/ /root/myproject/static/\n        &lt;Directory /root/myproject/static&gt;\n                Require all granted\n        &lt;/Directory&gt;\n\n        &lt;Directory /root/myproject/myproject&gt;\n                &lt;Files wsgi.py&gt;\n                        Require all granted\n                &lt;/Files&gt;\n        &lt;/Directory&gt;\n        WSGIDaemonProcess myproject python-home=/root/myproject/myprojectenv python-path=/root/myproject\n        WSGIProcessGroup myproject\n        WSGIScriptAlias / /root/myproject/myproject/wsgi.py process-group=myproject\n\n&lt;/VirtualHost&gt;\n</code></pre>\n\n<p>The content of /root/myproject/myproject/settings.py is:</p>\n\n<pre><code>import os\n\nBASE_DIR = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))\n\nSECRET_KEY = '[SOME STRING]'\n\nDEBUG = True\n\nALLOWED_HOSTS = ['[IP Address as a string]']\n\n...\n</code></pre>\n\n<p>The error I get by trying to access the page via browser:</p>\n\n<blockquote>\n  <p>Forbidden You don't have permission to access / on this server.\n  Apache/2.4.29 (Ubuntu) Server at [IP ADDRESS] Port 80</p>\n</blockquote>\n\n<p>The error log from /var/log/apache2/error.log</p>\n\n<pre><code>[Wed May 16 19:55:47.012027 2018] [wsgi:warn] [pid 3565:tid 140254930643904] (13)Permission denied: mod_wsgi (pid=3565): Unable to stat Python home /root/myproject/myprojectenv. Python interpreter may not be able to be initialized correctly. Verify the supplied path and access permissions for whole of the path.\nFatal Python error: Py_Initialize: Unable to get the locale encoding\nModuleNotFoundError: No module named 'encodings'\n</code></pre>\n\n<p>The problem seems to be with apache being unable to run python.</p>\n\n<p>Thanks in advance. Happy to add further information if needed.</p>\n\n<p>Best regards</p>\n\n<p>Saalim</p>\n"}, {"tags": ["python", "json", "youtube-api"], "answers": [{"tags": [], "owner": {"reputation": 4107, "user_id": 9770840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/984adcd06e81b4ed593225545018aacb?s=128&d=identicon&r=PG&f=1", "display_name": "Attersson", "link": "https://stackoverflow.com/users/9770840/attersson"}, "is_accepted": false, "score": 0, "last_activity_date": 1526502308, "creation_date": 1526502308, "answer_id": 50379364, "question_id": 50379320, "link": "https://stackoverflow.com/questions/50379320/python-youtube-api-retrieve-list-of-videos/50379364#50379364", "title": "Python YouTube API Retrieve List of Videos", "body": "<pre><code>json_data.update(r.json())\n</code></pre>\n\n<p>Should do the trick.</p>\n"}], "owner": {"reputation": 2031, "user_id": 2520150, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/baa4475d78f0819bc6a3397226805b10?s=128&d=identicon&r=PG", "display_name": "DNac", "link": "https://stackoverflow.com/users/2520150/dnac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 254, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1526502308, "creation_date": 1526502129, "question_id": 50379320, "link": "https://stackoverflow.com/questions/50379320/python-youtube-api-retrieve-list-of-videos", "title": "Python YouTube API Retrieve List of Videos", "body": "<p>I would like to fetch <code>all</code> videos from YouTube API for given <code>ChannelId</code> using Python. Below is the code I have tried, but I cannot figure out how to append the data in the <code>while</code> loop.</p>\n\n<pre><code>import requests\nimport json\n\nmykey = 'myGoogleKey'\nchannelid = 'someRandomChannelId'\n\n# First request\nr = requests.get(\"https://www.googleapis.com/youtube/v3/search?part=snippet&amp;maxResults=50&amp;channelId=\"+channelid+\"&amp;order=date&amp;key=\"+mykey)\njson_data = r.json()\nnextPageToken = json_data.get(\"nextPageToken\")\n\n# Retrieve all the rest of the pages\nwhile nextPageToken:\n    r = requests.get(\"https://www.googleapis.com/youtube/v3/search?part=snippet&amp;maxResults=50&amp;channelId=\"+channelid+\"&amp;order=date&amp;key=\"+mykey+\"&amp;pageToken=\"+nextPageToken)\n    json_data.append(r.json()) # this part needs to be modified/adjusted\n    nextPageToken = json_data.get(\"nextPageToken\")\n\nwith open('myJsonFile.json', 'w') as outfile:\n    json.dump(json_data, outfile, sort_keys=True, indent=4)\n\nprint(\"All Done!\")\n</code></pre>\n"}, {"tags": ["python", "list", "for-loop", "while-loop", "tuples"], "comments": [{"owner": {"reputation": 73988, "user_id": 1639625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4224d1458a149d37b56a53115656f4df?s=128&d=identicon&r=PG", "display_name": "tobias_k", "link": "https://stackoverflow.com/users/1639625/tobias-k"}, "edited": false, "score": 0, "creation_date": 1526504569, "post_id": 50379319, "comment_id": 87775921, "body": "Isn&#39;t there an <code>{</code> missing in your <code>f</code> string?"}, {"owner": {"reputation": 1254, "user_id": 2099489, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/toXzs.jpg?s=128&g=1", "display_name": "Miguel Ortiz", "link": "https://stackoverflow.com/users/2099489/miguel-ortiz"}, "edited": false, "score": 0, "creation_date": 1526505234, "post_id": 50379319, "comment_id": 87776196, "body": "I&#39;ve added a little snippet of code to find the highest value on a range of days. Hope you take a look on it."}], "answers": [{"tags": [], "owner": {"reputation": 1254, "user_id": 2099489, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/toXzs.jpg?s=128&g=1", "display_name": "Miguel Ortiz", "link": "https://stackoverflow.com/users/2099489/miguel-ortiz"}, "is_accepted": false, "score": 0, "last_activity_date": 1526505110, "last_edit_date": 1526505110, "creation_date": 1526503645, "answer_id": 50379628, "question_id": 50379319, "link": "https://stackoverflow.com/questions/50379319/python-for-loops-not-iterating-over-2nd-condition-correctly/50379628#50379628", "title": "Python for loops not iterating over 2nd condition correctly", "body": "<p>With your example I can access quite easily to any range of tuples:</p>\n\n<pre><code>#!/usr/bin/python\n\nnum_list = [('A1', 4, 'FF', 977.98), ('A4', 14, 'CC', 249.12), ('A1', 14, 'EE', 386.42), ('A9', 19, 'BB', 919.21), ('A4', 14, 'CC', 109.80)]\n\nprint [item for item in num_list if item[1] &lt; 19 ]\n</code></pre>\n\n<blockquote>\n  <p><strong>Output:</strong></p>\n</blockquote>\n\n<pre><code>mortiz@alberta:~/Documents/projects/python$ python tuples.py \n[('A1', 4, 'FF', 977.98), ('A4', 14, 'CC', 249.12), ('A1', 14, 'EE', 386.42), ('A4', 14, 'CC', 109.8)]\n</code></pre>\n\n<blockquote>\n  <p><strong>If you want a range then change it using range():</strong></p>\n</blockquote>\n\n<pre><code>print [item for item in num_list if item[1] in range(5,19) ]\n</code></pre>\n\n<blockquote>\n  <p><strong>Output:</strong></p>\n</blockquote>\n\n<pre><code>mortiz@alberta:~/Documents/projects/python$ python tuples.py \n[('A4', 14, 'CC', 249.12), ('A1', 14, 'EE', 386.42), ('A4', 14, 'CC', 109.8)]\n</code></pre>\n\n<blockquote>\n  <p><strong>Finally, the highest value of the selected range:</strong></p>\n</blockquote>\n\n<pre><code>#!/usr/bin/python\n\nnum_list = [('A1', 4, 'FF', 977.98), ('A4', 14, 'CC', 249.12), ('A1', 14, 'EE', 386.42), ('A9', 19, 'BB', 919.21), ('A4', 14, 'CC', 109.80)]\nresult=[item for item in num_list if item[1] in range(5,19)]\nhighest=[item[3] for item in result]\n\nprint max(highest)\n</code></pre>\n\n<blockquote>\n  <p><strong>Output (highest value)</strong></p>\n</blockquote>\n\n<pre><code>mortiz@alberta:~/Documents/projects/python$ python tuples.py\n386.42\n</code></pre>\n\n<p>Is that what you want?</p>\n"}, {"comments": [{"owner": {"reputation": 57, "user_id": 9784424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cQO5K.jpg?s=128&g=1", "display_name": "R_J", "link": "https://stackoverflow.com/users/9784424/r-j"}, "edited": false, "score": 0, "creation_date": 1526504774, "post_id": 50379840, "comment_id": 87776005, "body": "Yeah missed the { when I copied and pasted the code in. How would you recommend that I reset the loop then"}, {"owner": {"reputation": 1066, "user_id": 1212526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11badd2a99cfb8290ade0313673b5d5d?s=128&d=identicon&r=PG", "display_name": "Tan&#233; Tachyon", "link": "https://stackoverflow.com/users/1212526/tan%c3%a9-tachyon"}, "reply_to_user": {"reputation": 57, "user_id": 9784424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cQO5K.jpg?s=128&g=1", "display_name": "R_J", "link": "https://stackoverflow.com/users/9784424/r-j"}, "edited": false, "score": 0, "creation_date": 1526505052, "post_id": 50379840, "comment_id": 87776129, "body": "If I understand how your code is supposed to work, just move your initialization of <code>first_value</code> and <code>fifth_value</code> to right above and at the same level of indentation as your while statement."}, {"owner": {"reputation": 57, "user_id": 9784424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cQO5K.jpg?s=128&g=1", "display_name": "R_J", "link": "https://stackoverflow.com/users/9784424/r-j"}, "edited": false, "score": 0, "creation_date": 1526505516, "post_id": 50379840, "comment_id": 87776296, "body": "Thanks that now works for the first two IDs i.e. prints out the 14 sets of data for the first two IDs. But after two entries for the third ID i get ValueError: max() arg is an empty sequence"}, {"owner": {"reputation": 1066, "user_id": 1212526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11badd2a99cfb8290ade0313673b5d5d?s=128&d=identicon&r=PG", "display_name": "Tan&#233; Tachyon", "link": "https://stackoverflow.com/users/1212526/tan%c3%a9-tachyon"}, "reply_to_user": {"reputation": 57, "user_id": 9784424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cQO5K.jpg?s=128&g=1", "display_name": "R_J", "link": "https://stackoverflow.com/users/9784424/r-j"}, "edited": false, "score": 0, "creation_date": 1526505739, "post_id": 50379840, "comment_id": 87776384, "body": "If your list comprehension is returning an empty list because nothing in <code>num_list</code> matches <code>i[1] &lt;= fifth_value and i[1] &gt;= first_value and i[0] == id</code>, then you&#39;ll get an error trying to find the max of an empty list."}, {"owner": {"reputation": 57, "user_id": 9784424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cQO5K.jpg?s=128&g=1", "display_name": "R_J", "link": "https://stackoverflow.com/users/9784424/r-j"}, "edited": false, "score": 0, "creation_date": 1526506264, "post_id": 50379840, "comment_id": 87776584, "body": "So why do you think it&#39;s returning an empty list but only after a number of outputs have been printed to the console"}, {"owner": {"reputation": 1066, "user_id": 1212526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11badd2a99cfb8290ade0313673b5d5d?s=128&d=identicon&r=PG", "display_name": "Tan&#233; Tachyon", "link": "https://stackoverflow.com/users/1212526/tan%c3%a9-tachyon"}, "reply_to_user": {"reputation": 57, "user_id": 9784424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cQO5K.jpg?s=128&g=1", "display_name": "R_J", "link": "https://stackoverflow.com/users/9784424/r-j"}, "edited": false, "score": 0, "creation_date": 1526506816, "post_id": 50379840, "comment_id": 87776794, "body": "Presumably because as you&#39;re looping through <code>id</code> values and incrementing <code>first_value</code> and <code>fifth_value</code>for some combinations nothing in <code>num_list</code> will match <code>i[1] &lt;= fifth_value and i[1] &gt;= first_value and i[0] == id</code>. For debugging purposes, have your code print the values of <code>id</code> and <code>first_value</code> and <code>fifth_value</code> at the beginning of each iteration of the while loop, so that when it crashes you can see exactly which values are not there in <code>num_list</code>, and think about how you want to handle that."}], "tags": [], "owner": {"reputation": 1066, "user_id": 1212526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11badd2a99cfb8290ade0313673b5d5d?s=128&d=identicon&r=PG", "display_name": "Tan&#233; Tachyon", "link": "https://stackoverflow.com/users/1212526/tan%c3%a9-tachyon"}, "is_accepted": false, "score": 0, "last_activity_date": 1526504545, "creation_date": 1526504545, "answer_id": 50379840, "question_id": 50379319, "link": "https://stackoverflow.com/questions/50379319/python-for-loops-not-iterating-over-2nd-condition-correctly/50379840#50379840", "title": "Python for loops not iterating over 2nd condition correctly", "body": "<p>First, you have a missing opening curly brace for <code>result[0]</code> in this line \n<code>\nprint(f\"result[0]} {result[1]} {result[3]}\")\n</code>\nbut your main problem is that in your while loop, <code>first_value</code> and <code>fifth_value</code> keep getting incremented while the while loop runs for the first id, but then they are never reset, so for each subsequent id you never enter the while loop. </p>\n"}, {"comments": [{"owner": {"reputation": 57, "user_id": 9784424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cQO5K.jpg?s=128&g=1", "display_name": "R_J", "link": "https://stackoverflow.com/users/9784424/r-j"}, "edited": false, "score": 0, "creation_date": 1526507157, "post_id": 50380219, "comment_id": 87776905, "body": "If I wanted to add another column with the average in the same range after the max column, could I define it in the same way as here?"}, {"owner": {"reputation": 14216, "user_id": 3015186, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/u85Sl.png?s=128&g=1", "display_name": "np8", "link": "https://stackoverflow.com/users/3015186/np8"}, "reply_to_user": {"reputation": 57, "user_id": 9784424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cQO5K.jpg?s=128&g=1", "display_name": "R_J", "link": "https://stackoverflow.com/users/9784424/r-j"}, "edited": false, "score": 0, "creation_date": 1526538602, "post_id": 50380219, "comment_id": 87785108, "body": "Sure. If the average is calculated from the set <code>entries_filtered</code> in <code>get_max_within_time_window</code>, you could add the calculation of the average in that function (and perhaps rename it to <code>get_max_and_average</code>). Should you have any problems with this, you may ask here in the comments or add a new question."}, {"owner": {"reputation": 57, "user_id": 9784424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cQO5K.jpg?s=128&g=1", "display_name": "R_J", "link": "https://stackoverflow.com/users/9784424/r-j"}, "edited": false, "score": 0, "creation_date": 1526540350, "post_id": 50380219, "comment_id": 87785981, "body": "I ended up defining a new function get_avg_within_time_window in a similair way here. I used np.mean on the return section but I&#39;m getting the following error File &quot;Question_3.py&quot;, line 59, in get_avg_within_time_window     return np.mean(entries_filtered_avg, key = lambda x:x[3]) TypeError: mean() got an unexpected keyword argument &#39;key&#39;"}], "tags": [], "owner": {"reputation": 14216, "user_id": 3015186, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/u85Sl.png?s=128&g=1", "display_name": "np8", "link": "https://stackoverflow.com/users/3015186/np8"}, "is_accepted": true, "score": 0, "last_activity_date": 1526506385, "creation_date": 1526506385, "answer_id": 50380219, "question_id": 50379319, "link": "https://stackoverflow.com/questions/50379319/python-for-loops-not-iterating-over-2nd-condition-correctly/50380219#50380219", "title": "Python for loops not iterating over 2nd condition correctly", "body": "<p>I'm not sure what you're after, but here are my 2 cents. Note that <code>id</code> is a reserved variable name in Python. (hence the usage of <code>id_</code>)</p>\n\n<pre><code>#Let's say we have the data shown in the `num_list`.\n\nnum_list = [('A1', 4, 'FF', 977.98), ('A4', 14, 'CC', 249.12), ('A1', 14, 'EE', 386.42), ('A9', 19, 'BB', 919.21), ('A4', 14, 'CC', 109.80), ('A7', 6, 'DD', 243.12), ('A3', 11, 'GG', 612.21)]\n\n#First, we want to sort it by the `day` of occurence. Then we want to list all the possible IDs.\n\nsorted_list = sorted(num_list, key=lambda x:x[1])\nID = sorted(list(set(x[0] for x in num_list)))\n\n# Then, let's define a function, which will get the entry/row with the maximum value\n# We give the function two arguments. The `day`, which is the day of observation.\n#    If the day of observation is 6, then, only look at the entries which have day of the event 1-5\n# The another argument is the id_ we are looking at ('A1', 'A4', ..etc.)\n\ndef get_max_within_time_window(day, id_):\n\n    # Get all the entries with the wanted id\n    entries_id = [x for x in sorted_list if x[0] == id_]\n\n    # Get all the entries within the 5-day time window. The day of observation not included.\n    entries_filtered = [x for x in entries_id if 0 &lt; day-x[1] &lt;= 5]\n\n    # In case of zero matches, return empty list\n    if not entries_filtered:\n        return []\n\n    # Return the event with highest `value`\n    return max(entries_filtered, key=lambda x:x[3])\n\n# Now, let's put this in action.\n# Day*: The day of observation\n# Day: The day of event occurence. If day of observation is 6, then day of occurence can be 1, 2, 3, 4 or 5.\nprint('Day*\\tDay\\tID\\tMax')\nfor day in range(20):\n    for id_ in ID:\n        found = get_max_within_time_window(day, id_)\n        if not found:\n            continue\n        max_val = found[3]\n        day_occured = found[1]\n        print(f'{day}\\t{day_occured}\\t{id_}\\t{max_val}')\n</code></pre>\n\n<h1>Results</h1>\n\n<pre><code>Day*    Day     ID      Max\n5       4       A1      977.98\n6       4       A1      977.98\n7       4       A1      977.98\n7       6       A7      243.12\n8       4       A1      977.98\n8       6       A7      243.12\n9       4       A1      977.98\n9       6       A7      243.12\n10      6       A7      243.12\n11      6       A7      243.12\n12      11      A3      612.21\n13      11      A3      612.21\n14      11      A3      612.21\n15      14      A1      386.42\n15      11      A3      612.21\n15      14      A4      249.12\n16      14      A1      386.42\n16      11      A3      612.21\n16      14      A4      249.12\n17      14      A1      386.42\n17      14      A4      249.12\n18      14      A1      386.42\n18      14      A4      249.12\n19      14      A1      386.42\n19      14      A4      249.12\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 9784424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cQO5K.jpg?s=128&g=1", "display_name": "R_J", "link": "https://stackoverflow.com/users/9784424/r-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 50380219, "answer_count": 3, "score": 0, "last_activity_date": 1526506385, "creation_date": 1526502119, "question_id": 50379319, "link": "https://stackoverflow.com/questions/50379319/python-for-loops-not-iterating-over-2nd-condition-correctly", "title": "Python for loops not iterating over 2nd condition correctly", "body": "<p>I have a long list of tuples that take the form</p>\n\n<pre><code>num_list = [('A1', 4, 'FF', 977.98), ('A4', 14, 'CC', 249.12), ('A1', 14, 'EE', 386.42), ('A9', 19, 'BB', 919.21), ('A4', 14, 'CC', 109.80)]\n</code></pre>\n\n<p>The first element of each tuple corresponds to an ID, the second what day an event occurred, the third the category of the event and the fourth the value of the event.</p>\n\n<p>The task is to print out the maximum value in the previous 5 days, eg on day 6 only events from days 1 to 5 should be considered, for each separate ID i.e. something of the basic form</p>\n\n<pre><code>Day   ID    Max\n7     A1    400\n7     A2    350\n8     A1    750\n</code></pre>\n\n<p>Currently I have the following code after num_list is declared where ID is a set of all the ID values. 14 and 18 are used as the days goes up to day 19</p>\n\n<pre><code>first_value = 1\nfifth_value = 5\n\nfor id in ID:\n    while first_value &lt;= 14 and fifth_value &lt;= 18:\n        result = max([i for i in num_list if i[1] &lt;= fifth_value and i[1] &gt;= first_value and i[0] == id], key = lambda  x:x[3])\n        first_value += 1\n        fifth_value += 1\n        print(f\"result[0]} {result[1]} {result[3]}\")   \n</code></pre>\n\n<p>The problem is that this is only returning the maximum results for the first ID, A1 in this case. This it is doing correctly but I'm not sure why it's not doing it for every ID. I've checked and before the while loop it is returning every ID so I'm not sure what the problem is here</p>\n\n<p>Thanks in advance, sorry if something similar has been posted before but I couldn't find it</p>\n"}, {"tags": ["python", "http", "python-requests"], "answers": [{"tags": [], "owner": {"reputation": 353, "user_id": 4047083, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HN2Gm.png?s=128&g=1", "display_name": "curusarn", "link": "https://stackoverflow.com/users/4047083/curusarn"}, "is_accepted": false, "score": 1, "last_activity_date": 1526508346, "creation_date": 1526508346, "answer_id": 50380566, "question_id": 50379308, "link": "https://stackoverflow.com/questions/50379308/python-requests-custom-response-headers/50380566#50380566", "title": "Python Requests Custom Response Headers", "body": "<p>From <a href=\"http://docs.python-requests.org/en/master/user/quickstart/#response-headers\" rel=\"nofollow noreferrer\">Requests documentation</a>:</p>\n\n<blockquote>\n  <p>We can view the server\u2019s response headers using a Python dictionary:</p>\n</blockquote>\n\n<pre><code>&gt;&gt;&gt; r.headers\n{\n   'content-encoding': 'gzip',\n   'transfer-encoding': 'chunked',\n   'connection': 'close',\n   'server': 'nginx/1.0.4',\n   'x-runtime': '148ms',\n   'etag': '\"e1ca502697e5c9317743dc078f67693f\"',\n   'content-type': 'application/json'\n}\n</code></pre>\n\n<p>Access specific header like this:</p>\n\n<pre><code>&gt;&gt;&gt; r.headers['Content-Type']\n'application/json'\n\n&gt;&gt;&gt; r.headers.get('content-type')\n'application/json'\n</code></pre>\n"}], "owner": {"reputation": 1284, "user_id": 4167140, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/xWx95.jpg?s=128&g=1", "display_name": "redress", "link": "https://stackoverflow.com/users/4167140/redress"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2199, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1526508346, "creation_date": 1526502073, "question_id": 50379308, "link": "https://stackoverflow.com/questions/50379308/python-requests-custom-response-headers", "title": "Python Requests Custom Response Headers", "body": "<p>I am trying to access custom headers sent back to my client by the server, but I cant find them in any of the header objects in the response object listed in the <a href=\"http://docs.python-requests.org/en/master/user/quickstart/#response-content\" rel=\"nofollow noreferrer\">Requests documentation</a> </p>\n"}, {"tags": ["python", "django", "postgresql"], "comments": [{"owner": {"reputation": 6952, "user_id": 5644965, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J9KaA.jpg?s=128&g=1", "display_name": "Lemayzeur", "link": "https://stackoverflow.com/users/5644965/lemayzeur"}, "edited": false, "score": 0, "creation_date": 1526502056, "post_id": 50379274, "comment_id": 87774810, "body": "you&#39;re trying to retrieve <code>POSTGRES_POST</code>, in the <code>os.environ</code> but it&#39;s doesn&#39;t exists"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1526502071, "post_id": 50379274, "comment_id": 87774820, "body": "The <code>POSTGRES_PORT</code> is not defined in your environment."}, {"owner": {"reputation": 54482, "user_id": 8283848, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/YiHgN.jpg?s=128&g=1", "display_name": "JPG", "link": "https://stackoverflow.com/users/8283848/jpg"}, "edited": false, "score": 0, "creation_date": 1526526104, "post_id": 50379274, "comment_id": 87781128, "body": "try this, <code>&#39;PORT&#39;: int(os.getenv(&#39;POSTGRES_PORT&#39;, &#39;5432&#39;))</code>"}], "answers": [{"tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": false, "score": 1, "last_activity_date": 1526502221, "creation_date": 1526502221, "answer_id": 50379341, "question_id": 50379274, "link": "https://stackoverflow.com/questions/50379274/django-manage-py-migrate-error/50379341#50379341", "title": "Django manage.py migrate error", "body": "<p>It looks like you use PostgreSQL as a database system, but Django has trouble finding the port you use for the PostgreSQL database.</p>\n\n<p>You can set the parameter for the command locally executing the migrations with:</p>\n\n<pre><code><b>POSTGRES_PORT=5432</b> python manage.py migrate</code></pre>\n\n<p>or another port if you configured PostgreSQL in a different way (the default port for a PostgreSQL server is 5432, but you can of course have picked a different one yourself).</p>\n"}, {"tags": [], "owner": {"reputation": 6952, "user_id": 5644965, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J9KaA.jpg?s=128&g=1", "display_name": "Lemayzeur", "link": "https://stackoverflow.com/users/5644965/lemayzeur"}, "is_accepted": true, "score": 3, "last_activity_date": 1526502741, "last_edit_date": 1526502741, "creation_date": 1526502418, "answer_id": 50379386, "question_id": 50379274, "link": "https://stackoverflow.com/questions/50379274/django-manage-py-migrate-error/50379386#50379386", "title": "Django manage.py migrate error", "body": "<p>You're trying to retrieve <code>POSTGRES_POST</code>, in the <code>os.environ</code> but it doesn't exist.<br>\n<code>int()</code> can't convert <code>NoneType</code>.</p>\n\n<p>If it's possible that the key does not exist in your environment.<br>\nyou can set a <strong>default value</strong>:</p>\n\n<pre><code>'PORT': int(os.getenv('POSTGRES_PORT',5432))\n</code></pre>\n\n<p>The second argument is the <strong>default port</strong> in case that key doesn't exist in <code>os.environ</code></p>\n"}], "owner": {"reputation": 87, "user_id": 7143526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/802977a0018d0942debd953e6278012e?s=128&d=identicon&r=PG&f=1", "display_name": "Duc Nguyen", "link": "https://stackoverflow.com/users/7143526/duc-nguyen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3397, "favorite_count": 0, "accepted_answer_id": 50379386, "answer_count": 2, "score": 2, "last_activity_date": 1590264415, "creation_date": 1526501944, "last_edit_date": 1590264415, "question_id": 50379274, "link": "https://stackoverflow.com/questions/50379274/django-manage-py-migrate-error", "title": "Django manage.py migrate error", "body": "<p>So I am currently in a virtual environment, and when I typed the command line: </p>\n\n<pre><code>python manage.py migrate\n</code></pre>\n\n<p>and I encounter this problem: </p>\n\n<pre><code>&gt;     Traceback (most recent call last):\n&gt;       File \"manage.py\", line 24, in &lt;module&gt;\n&gt;         execute_from_command_line(sys.argv)\n&gt;       File \"C:\\Users\\DUCNGU~1\\Desktop\\HAULER~1\\api\\vnenv\\lib\\site-packages\\django\\core\\management\\__init__.py\",\n&gt; line 371, in execute_from_command_line\n&gt;         utility.execute()\n&gt;       File \"C:\\Users\\DUCNGU~1\\Desktop\\HAULER~1\\api\\vnenv\\lib\\site-packages\\django\\core\\management\\__init__.py\",\n&gt; line 317, in execute\n&gt;         settings.INSTALLED_APPS\n&gt;       File \"C:\\Users\\DUCNGU~1\\Desktop\\HAULER~1\\api\\vnenv\\lib\\site-packages\\django\\conf\\__init__.py\",\n&gt; line 56, in __getattr__\n&gt;         self._setup(name)\n&gt;       File \"C:\\Users\\DUCNGU~1\\Desktop\\HAULER~1\\api\\vnenv\\lib\\site-packages\\django\\conf\\__init__.py\",\n&gt; line 43, in _setup\n&gt;         self._wrapped = Settings(settings_module)\n&gt;       File \"C:\\Users\\DUCNGU~1\\Desktop\\HAULER~1\\api\\vnenv\\lib\\site-packages\\django\\conf\\__init__.py\",\n&gt; line 106, in __init__\n&gt;         mod = importlib.import_module(self.SETTINGS_MODULE)\n&gt;       File \"C:\\Users\\DUCNGU~1\\Desktop\\HAULER~1\\api\\vnenv\\lib\\importlib\\__init__.py\",\n&gt; line 126, in import_module\n&gt;         return _bootstrap._gcd_import(name[level:], package, level)\n&gt;       File \"&lt;frozen importlib._bootstrap&gt;\", line 994, in _gcd_import\n&gt;       File \"&lt;frozen importlib._bootstrap&gt;\", line 971, in _find_and_load\n&gt;       File \"&lt;frozen importlib._bootstrap&gt;\", line 955, in _find_and_load_unlocked\n&gt;       File \"&lt;frozen importlib._bootstrap&gt;\", line 665, in _load_unlocked\n&gt;       File \"&lt;frozen importlib._bootstrap_external&gt;\", line 678, in exec_module\n&gt;       File \"&lt;frozen importlib._bootstrap&gt;\", line 219, in _call_with_frames_removed\n&gt;       File \"C:\\Users\\Duc Nguyen\\Desktop\\HaulerAds\\api\\settings.py\", line 104, in &lt;module&gt;\n&gt;         'PORT': int(os.getenv('POSTGRES_PORT')),\n&gt;     TypeError: int() argument must be a string, a bytes-like object or a number, not 'NoneType'\n</code></pre>\n\n<p>My current Django version 2.0.3. I checked the python pass and I have the proper path. \nPlease help, thank you!</p>\n"}, {"tags": ["python", "django", "django-authentication", "django-auth-ldap"], "comments": [{"owner": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 0, "creation_date": 1526501835, "post_id": 50379233, "comment_id": 87774705, "body": "<code>ldap:&#47;&#47;</code> -&gt; <code>ldaps:&#47;&#47;</code>?"}, {"owner": {"reputation": 43, "user_id": 5278410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a9720dc1435201d0e966b8327139ff1?s=128&d=identicon&r=PG&f=1", "display_name": "john_thats_me", "link": "https://stackoverflow.com/users/5278410/john-thats-me"}, "reply_to_user": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 0, "creation_date": 1526502831, "post_id": 50379233, "comment_id": 87775157, "body": "Unfortunately that changes ldap to use tcp/636 similar to what the command <code>AUTH_LDAP_START_TLS = True</code>  does - thanks for your response"}, {"owner": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 0, "creation_date": 1526502943, "post_id": 50379233, "comment_id": 87775199, "body": "So, how does your LDAP server actually work? What kind of connection is made?"}], "owner": {"reputation": 43, "user_id": 5278410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a9720dc1435201d0e966b8327139ff1?s=128&d=identicon&r=PG&f=1", "display_name": "john_thats_me", "link": "https://stackoverflow.com/users/5278410/john-thats-me"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1316, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1537185073, "creation_date": 1526501666, "last_edit_date": 1526502169, "question_id": 50379233, "link": "https://stackoverflow.com/questions/50379233/ldap-authentication-in-clear-text", "title": "LDAP authentication in clear text", "body": "<p>I created a website using django and recently added ldap authentication pointing towards our active directory on LDAP tcp/389. The problem is the django auth-ldap sends this ldap password data in clear text, and the AD i'm trying to authenticate with is not setup for LDAPs tcp/636 (I don't have control of that) so i cant use the command <code>AUTH_LDAP_START_TLS = True</code></p>\n\n<p>Please see my script below is there any enhancements/script I can add easily, to continue using ldap/389 but with added security (like kerberos or ntlm?) to stop passwords sending in clear text - </p>\n\n<pre><code>from django_auth_ldap.config import LDAPSearch, GroupOfNamesType,LDAPGroupQuery\n\n\nAUTH_LDAP_GLOBAL_OPTIONS = {\n ldap.OPT_X_TLS_REQUIRE_CERT: False,\n ldap.OPT_REFERRALS: False,\n}\n\nAUTH_LDAP_SERVER_URI = \"ldap://x.x.x.x\"\n\nAUTH_LDAP_BIND_DN = \"CN=xxx,OU=xxx,OU=xxx,OU=xxxx,OU=xxxx,OU=xxxx,DC=xxx,DC=xxx,DC=xxx\"\nAUTH_LDAP_BIND_PASSWORD = credentials.adlogin['pass']\nAUTH_LDAP_USER_SEARCH = LDAPSearch(\"OU=xxx,DC=xxx,DC=xxx,DC=coxxm\",\n    ldap.SCOPE_SUBTREE, \"(sAMAccountName=%(user)s)\")\n\n\nAUTH_LDAP_GROUP_SEARCH = LDAPSearch(\"ou=groups,dc=example,dc=com\",\n    ldap.SCOPE_SUBTREE, \"(objectClass=groupOfNames)\"\n)\nAUTH_LDAP_GROUP_TYPE = GroupOfNamesType()\n\n\nAUTH_LDAP_REQUIRE_GROUP = (\n    (\n        LDAPGroupQuery(\"CN=xx-xx,OU=xx,OU=xxx,,DC=xx,DC=xxx,DC=xx\") |\n        LDAPGroupQuery(\"CN=xx-xx,OU=xx,OU=xxx,,DC=xx,DC=xxx,DC=xx\")\n    )\n\n)\n\n\nAUTH_LDAP_USER_ATTR_MAP = {\n    \"first_name\": \"givenName\",\n    \"last_name\": \"sn\",\n    \"email\": \"mail\"\n}\n\nSESSION_COOKIE_AGE = 15*60\n\nAUTHENTICATION_BACKENDS = [\n    'django_auth_ldap.backend.LDAPBackend',\n    'django.contrib.auth.backends.ModelBackend',\n]\n</code></pre>\n"}, {"tags": ["python", "pandas", "dataframe", "group-by", "pandas-groupby"], "answers": [{"tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": false, "score": 5, "last_activity_date": 1526501638, "creation_date": 1526501638, "answer_id": 50379229, "question_id": 50379203, "link": "https://stackoverflow.com/questions/50379203/pandas-transformunique-output-as-comma-separate-string-instead-of-list/50379229#50379229", "title": "Pandas transform(&#39;unique&#39;) output as comma separate string instead of list", "body": "<p>Looks like <code>unique</code> is the <em>wrong</em> choice of function here. I'd recommend a custom lambda function using <code>str.join</code>:</p>\n\n<pre><code>df['Multi Name'] = df.groupby('ID')['Name'].transform(lambda x: ', '.join(set(x)))\n</code></pre>\n\n<p></p>\n\n<pre><code>df\n   ID        Name              Multi Name\n0   1    John Doe      John Doe, Jane Doe\n1   1    Jane Doe      John Doe, Jane Doe\n2   2  John Smith  Jane Smith, John Smith\n3   2  Jane Smith  Jane Smith, John Smith\n4   3   Jack Hill               Jack Hill\n5   4   Jill Hill               Jill Hill\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 1, "creation_date": 1526501822, "post_id": 50379238, "comment_id": 87774698, "body": "Looks like this duplicates (via transform) and then joins, as opposed to my answer which joins and then duplicates. I like the different approach taken here."}, {"owner": {"reputation": 8568, "user_id": 9177877, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5qL1i.png?s=128&g=1", "display_name": "It_is_Chris", "link": "https://stackoverflow.com/users/9177877/it-is-chris"}, "edited": false, "score": 0, "creation_date": 1526502974, "post_id": 50379238, "comment_id": 87775209, "body": "@piRSquared I really like all the different approaches. This gave me a lot of good reading topics."}], "tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": true, "score": 5, "last_activity_date": 1526502463, "last_edit_date": 1526502463, "creation_date": 1526501691, "answer_id": 50379238, "question_id": 50379203, "link": "https://stackoverflow.com/questions/50379203/pandas-transformunique-output-as-comma-separate-string-instead-of-list/50379238#50379238", "title": "Pandas transform(&#39;unique&#39;) output as comma separate string instead of list", "body": "<h2><code>transform</code></h2>\n\n<pre><code>df.join(df.groupby('ID').Name.transform('unique').rename('Multi Name'))\n\n   ID        Name                Multi Name\n0   1    John Doe      [John Doe, Jane Doe]\n1   1    Jane Doe      [John Doe, Jane Doe]\n2   2  John Smith  [John Smith, Jane Smith]\n3   2  Jane Smith  [John Smith, Jane Smith]\n4   3   Jack Hill               [Jack Hill]\n5   4   Jill Hill               [Jill Hill]\n</code></pre>\n\n<hr>\n\n<pre><code>df.join(df.groupby('ID').Name.transform('unique').str.join(', ').rename('Multi Name'))\n\n   ID        Name              Multi Name\n0   1    John Doe      John Doe, Jane Doe\n1   1    Jane Doe      John Doe, Jane Doe\n2   2  John Smith  John Smith, Jane Smith\n3   2  Jane Smith  John Smith, Jane Smith\n4   3   Jack Hill               Jack Hill\n5   4   Jill Hill               Jill Hill\n</code></pre>\n\n<h2><code>map</code></h2>\n\n<pre><code>df.join(df.ID.map(df.groupby('ID').Name.unique().str.join(', ')).rename('Multi Name'))\n\n   ID        Name              Multi Name\n0   1    John Doe      John Doe, Jane Doe\n1   1    Jane Doe      John Doe, Jane Doe\n2   2  John Smith  John Smith, Jane Smith\n3   2  Jane Smith  John Smith, Jane Smith\n4   3   Jack Hill               Jack Hill\n5   4   Jill Hill               Jill Hill\n</code></pre>\n\n<hr>\n\n<h2><code>itertools.groupby</code></h2>\n\n<pre><code>from itertools import groupby\n\nd = {\n    k: ', '.join(x[1] for x in v)\n    for k, v in groupby(sorted(set(zip(df.ID, df.Name))), key=lambda x: x[0])\n}\n\ndf.join(df.ID.map(d).rename('Multi Name'))\n\n   ID        Name              Multi Name\n0   1    John Doe      Jane Doe, John Doe\n1   1    Jane Doe      Jane Doe, John Doe\n2   2  John Smith  Jane Smith, John Smith\n3   2  Jane Smith  Jane Smith, John Smith\n4   3   Jack Hill               Jack Hill\n5   4   Jill Hill               Jill Hill\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": false, "score": 2, "last_activity_date": 1526501829, "creation_date": 1526501829, "answer_id": 50379259, "question_id": 50379203, "link": "https://stackoverflow.com/questions/50379203/pandas-transformunique-output-as-comma-separate-string-instead-of-list/50379259#50379259", "title": "Pandas transform(&#39;unique&#39;) output as comma separate string instead of list", "body": "<p>Use <code>map</code> and <code>join</code>:</p>\n\n<pre><code>df['Multi Name'] = df.groupby('ID')['Name'].transform('unique').map(', '.join)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>   ID        Name              Multi Name\n0   1    John Doe      John Doe, Jane Doe\n1   1    Jane Doe      John Doe, Jane Doe\n2   2  John Smith  John Smith, Jane Smith\n3   2  Jane Smith  John Smith, Jane Smith\n4   3   Jack Hill               Jack Hill\n5   4   Jill Hill               Jill Hill\n</code></pre>\n"}], "owner": {"reputation": 8568, "user_id": 9177877, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5qL1i.png?s=128&g=1", "display_name": "It_is_Chris", "link": "https://stackoverflow.com/users/9177877/it-is-chris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 374, "favorite_count": 0, "accepted_answer_id": 50379238, "answer_count": 3, "score": 2, "last_activity_date": 1545971495, "creation_date": 1526501560, "last_edit_date": 1545971495, "question_id": 50379203, "link": "https://stackoverflow.com/questions/50379203/pandas-transformunique-output-as-comma-separate-string-instead-of-list", "title": "Pandas transform(&#39;unique&#39;) output as comma separate string instead of list", "body": "<p>I have a DataFrame that looks like this:</p>\n\n<pre><code>df = pd.DataFrame({'ID':[1,1,2,2,3,4],'Name':['John Doe','Jane Doe','John Smith','Jane Smith','Jack Hill','Jill Hill']})\n\n    ID  Name\n0   1   John Doe\n1   1   Jane Doe\n2   2   John Smith\n3   2   Jane Smith\n4   3   Jack Hill\n5   4   Jill Hill\n</code></pre>\n\n<p>I then added another column grouping by ID and taking the unique values in Name:</p>\n\n<pre><code>df['Multi Name'] = df.groupby('ID')['Name'].transform('unique')\n\n    ID  Name    Multi Name\n0   1   John Doe    [John Doe, Jane Doe]\n1   1   Jane Doe    [John Doe, Jane Doe]\n2   2   John Smith  [John Smith, Jane Smith]\n3   2   Jane Smith  [John Smith, Jane Smith]\n4   3   Jack Hill   [Jack Hill]\n5   4   Jill Hill   [Jill Hill]\n</code></pre>\n\n<p>How do I remove the Brackets from Multi Name?</p>\n\n<p>I have tried:</p>\n\n<pre><code>df['Multi Name'] = df['Multi Name'].str.strip('[]')\n\n\nID  Name    Multi Name\n0   1   John Doe    NaN\n1   1   Jane Doe    NaN\n2   2   John Smith  NaN\n3   2   Jane Smith  NaN\n4   3   Jack Hill   NaN\n5   4   Jill Hill   NaN\n</code></pre>\n\n<p>Desired output:</p>\n\n<pre><code>    ID  Name    Multi Name\n0   1   John Doe    John Doe, Jane Doe\n1   1   Jane Doe    John Doe, Jane Doe\n2   2   John Smith  John Smith, Jane Smith\n3   2   Jane Smith  John Smith, Jane Smith\n4   3   Jack Hill   Jack Hill\n5   4   Jill Hill   Jill Hill\n</code></pre>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 66318, "user_id": 3510736, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/kVtHP.jpg?s=128&g=1", "display_name": "Ami Tavory", "link": "https://stackoverflow.com/users/3510736/ami-tavory"}, "edited": false, "score": 1, "creation_date": 1526501522, "post_id": 50379171, "comment_id": 87774567, "body": "<code>merge(..., how=&#39;left&#39;)</code>."}, {"owner": {"reputation": 501, "user_id": 9342193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b6d59ee6d4f800bc1aa72380d2480d8?s=128&d=identicon&r=PG&f=1", "display_name": "Grendel", "link": "https://stackoverflow.com/users/9342193/grendel"}, "reply_to_user": {"reputation": 66318, "user_id": 3510736, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/kVtHP.jpg?s=128&g=1", "display_name": "Ami Tavory", "link": "https://stackoverflow.com/users/3510736/ami-tavory"}, "edited": false, "score": 0, "creation_date": 1526502153, "post_id": 50379171, "comment_id": 87774856, "body": "I wrote my code in my first commande. I do not get what I expect, is there an issue?"}, {"owner": {"reputation": 501, "user_id": 9342193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b6d59ee6d4f800bc1aa72380d2480d8?s=128&d=identicon&r=PG&f=1", "display_name": "Grendel", "link": "https://stackoverflow.com/users/9342193/grendel"}, "reply_to_user": {"reputation": 66318, "user_id": 3510736, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/kVtHP.jpg?s=128&g=1", "display_name": "Ami Tavory", "link": "https://stackoverflow.com/users/3510736/ami-tavory"}, "edited": false, "score": 0, "creation_date": 1526897200, "post_id": 50379171, "comment_id": 87906365, "body": "@AmiTavory Do you have any idea?"}], "owner": {"reputation": 501, "user_id": 9342193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b6d59ee6d4f800bc1aa72380d2480d8?s=128&d=identicon&r=PG&f=1", "display_name": "Grendel", "link": "https://stackoverflow.com/users/9342193/grendel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "closed_date": 1526501695, "answer_count": 0, "score": 0, "last_activity_date": 1526502102, "creation_date": 1526501379, "last_edit_date": 1526502102, "question_id": 50379171, "link": "https://stackoverflow.com/questions/50379171/merge-2-dataframe-pandas", "closed_reason": "Duplicate", "title": "Merge 2 dataframe pandas", "body": "<p>Hi all I actually have two dataframe (blast ouput) but one with more informations than the other and the problem is that in the <code>dataframe 2</code> with more information, there is less data (because of a lack of information but I actually would like to keep these rows from the <code>first dataframe</code>.\nHere is an exemple</p>\n\n<p>Let say the first df is the one with all rows:</p>\n\n<pre><code>seq_id1     seq_id2     other columns\nseq1_A      seq2_B      something\nseq2_A      seq3_B      something\nseq4_A      seq9_B      something\nseq9_A      seq9_B      something\nseq10_A     seq8_B      something\n</code></pre>\n\n<p>and the other one </p>\n\n<pre><code>seq_id1     seq_id2     other_columns aditionnal_info_columns\nseq1_A      seq2_B      something      kingdom1\nseq4_A      seq9_B      something      kingdom2\n</code></pre>\n\n<p>What I would like to get is a dataframe such: </p>\n\n<pre><code>seq_id1     seq_id2     other_columns  aditionnal_info_columns\nseq1_A      seq2_B      something       Kingdom1\nseq2_A      seq3_B      something       NA\nseq4_A      seq9_B      something       Kingdom2\nseq9_A      seq9_B      something       NA\nseq10_A     seq8_B      something       NA\n</code></pre>\n\n<p>Is it clear?\nThanks for your help :) </p>\n\n<p>I tried </p>\n\n<pre><code>Tax_id=pd.read_csv(\"0042_HYposoter_tax_best-hit.csv\",header=0)\ndata_grpd_max.read_csv(\"data_grpd_max_tax_0035.txt\",sep='\\t')\n\ndata=pd.merge(data_grpd_max,Tax_id, how='left')\n\ndata.to_csv(\"data_grpd_max_tax_0042_new.txt\",sep='\\t')\n</code></pre>\n\n<p>But it does not work as I would like </p>\n"}, {"tags": ["python", "pandas", "numpy"], "comments": [{"owner": {"reputation": 56440, "user_id": 2285236, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ac8c2e0f71dbd8cf4543039bebf2ab3?s=128&d=identicon&r=PG&f=1", "display_name": "ayhan", "link": "https://stackoverflow.com/users/2285236/ayhan"}, "edited": false, "score": 0, "creation_date": 1526502420, "post_id": 50379142, "comment_id": 87774992, "body": "To get the exact same output, you can shift: <code>df[&#39;Single&#39;].cumprod().shift().fillna(1)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 5605946, "user_type": "registered", "profile_image": "https://graph.facebook.com/10150589396379975/picture?type=large", "display_name": "kevfefe", "link": "https://stackoverflow.com/users/5605946/kevfefe"}, "edited": false, "score": 0, "creation_date": 1526503026, "post_id": 50379183, "comment_id": 87775234, "body": "Looks like the performance improvement is at least 100x compared to my initial solution, amazing, thanks!"}, {"owner": {"reputation": 3204, "user_id": 6286540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ec8c5fdeb86a51c222e55aaaba1d242?s=128&d=identicon&r=PG&f=1", "display_name": "Toby Petty", "link": "https://stackoverflow.com/users/6286540/toby-petty"}, "reply_to_user": {"reputation": 23035, "user_id": 401828, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ea104f2947e580667d15b7403829b1ec?s=128&d=identicon&r=PG", "display_name": "heltonbiker", "link": "https://stackoverflow.com/users/401828/heltonbiker"}, "edited": false, "score": 1, "creation_date": 1526508447, "post_id": 50379183, "comment_id": 87777353, "body": "@heltonbiker thanks for linking to the docs - will do that in future"}], "tags": [], "owner": {"reputation": 3204, "user_id": 6286540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ec8c5fdeb86a51c222e55aaaba1d242?s=128&d=identicon&r=PG&f=1", "display_name": "Toby Petty", "link": "https://stackoverflow.com/users/6286540/toby-petty"}, "is_accepted": true, "score": 3, "last_activity_date": 1526501651, "last_edit_date": 1526501651, "creation_date": 1526501437, "answer_id": 50379183, "question_id": 50379142, "link": "https://stackoverflow.com/questions/50379142/calculate-a-value-in-pandas-that-is-based-on-a-product-of-past-values-without-lo/50379183#50379183", "title": "Calculate a value in Pandas that is based on a product of past values without looping", "body": "<p>There's a built in function for this in Pandas:</p>\n\n<p><a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.cumprod.html\" rel=\"nofollow noreferrer\"><code>df.cumprod()</code></a></p>\n"}], "owner": {"reputation": 41, "user_id": 5605946, "user_type": "registered", "profile_image": "https://graph.facebook.com/10150589396379975/picture?type=large", "display_name": "kevfefe", "link": "https://stackoverflow.com/users/5605946/kevfefe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 50379183, "answer_count": 1, "score": 0, "last_activity_date": 1526501651, "creation_date": 1526501269, "question_id": 50379142, "link": "https://stackoverflow.com/questions/50379142/calculate-a-value-in-pandas-that-is-based-on-a-product-of-past-values-without-lo", "title": "Calculate a value in Pandas that is based on a product of past values without looping", "body": "<p>I have a dataframe that represents time series probabilities.  Each value in column 'Single' represents the probability of that event in that time period (where each row represents one time period).  Each value in column 'Cumulative' represents the probability of that event occurring every time period until that point (ie it is the product of every value in 'Single' from time 0 until now).</p>\n\n<p>A simplified version of the dataframe looks like this:</p>\n\n<pre><code>      Single  Cumulative\n0   0.990000    1.000000\n1   0.980000    0.990000\n2   0.970000    0.970200\n3   0.960000    0.941094\n4   0.950000    0.903450\n5   0.940000    0.858278\n6   0.930000    0.806781\n7   0.920000    0.750306\n8   0.910000    0.690282\n9   0.900000    0.628157\n10  0.890000    0.565341\n</code></pre>\n\n<p>In order to calculate the 'Cumulative' column based on the 'Single' column I am looping through the dataframe like this:</p>\n\n<pre><code>for index, row in df.iterrows():\n    df['Cumulative'][index] = df['Single'][:index].prod()\n</code></pre>\n\n<p>In reality, there is a lot of data and looping is a drag on performance, is it at all possible to achieve this without looping?  </p>\n\n<p>I've tried to find a way to vectorize this calculation or even use the pandas.DataFrame.apply function, but I don't believe I'm able to reference the current index value in either of those methods.</p>\n"}]