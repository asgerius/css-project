[{"tags": ["python", "python-3.x", "command-line-arguments", "argparse", "snakemake"], "comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1504137954, "post_id": 45971333, "comment_id": 78901782, "body": "How are you invoking this script?  Normally I&#39;d expect to see: <code>python your_script.py -zz afilename</code>."}, {"owner": {"reputation": 3263, "user_id": 3998252, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/e12ce9e892926492f5436f0466e5e573?s=128&d=identicon&r=PG&f=1", "display_name": "Manavalan Gajapathy", "link": "https://stackoverflow.com/users/3998252/manavalan-gajapathy"}, "reply_to_user": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 1, "creation_date": 1504138665, "post_id": 45971333, "comment_id": 78901932, "body": "Found the solution. Allows it via <code>--config</code>. <a href=\"http://snakemake.readthedocs.io/en/stable/project_info/faq.html#is-it-possible-to-pass-variable-values-to-the-workflow-via-the-command-line\" rel=\"nofollow noreferrer\">Source</a>"}], "answers": [{"tags": [], "owner": {"reputation": 3263, "user_id": 3998252, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/e12ce9e892926492f5436f0466e5e573?s=128&d=identicon&r=PG&f=1", "display_name": "Manavalan Gajapathy", "link": "https://stackoverflow.com/users/3998252/manavalan-gajapathy"}, "is_accepted": true, "score": 4, "last_activity_date": 1504147873, "creation_date": 1504147873, "answer_id": 45972471, "question_id": 45971333, "link": "https://stackoverflow.com/questions/45971333/use-of-argparse-in-snakemake-script/45972471#45972471", "title": "Use of argparse in Snakemake script", "body": "<p>Passing arguments from command line is <a href=\"http://snakemake.readthedocs.io/en/stable/project_info/faq.html#is-it-possible-to-pass-variable-values-to-the-workflow-via-the-command-line\" rel=\"nofollow noreferrer\">possible using <code>--config</code></a>. For example:</p>\n\n<p><code>snakemake --config zz=\"filename\"</code></p>\n\n<p>In snakefile script, this can be used in this way:</p>\n\n<pre><code>rule test_1:\n    input:\n        fn + config['zz']\n    shell:\n        \"echo Using file {input}\"\n</code></pre>\n\n<p><a href=\"http://snakemake.readthedocs.io/en/stable/snakefiles/configuration.html#configuration\" rel=\"nofollow noreferrer\">See the doc</a> for more info.</p>\n"}], "owner": {"reputation": 3263, "user_id": 3998252, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/e12ce9e892926492f5436f0466e5e573?s=128&d=identicon&r=PG&f=1", "display_name": "Manavalan Gajapathy", "link": "https://stackoverflow.com/users/3998252/manavalan-gajapathy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1002, "favorite_count": 0, "accepted_answer_id": 45972471, "answer_count": 1, "score": 2, "last_activity_date": 1504147873, "creation_date": 1504137465, "question_id": 45971333, "link": "https://stackoverflow.com/questions/45971333/use-of-argparse-in-snakemake-script", "title": "Use of argparse in Snakemake script", "body": "<p>Is it possible to pass custom command line arguments to <code>snakemake</code> scripts? I have tried, but executing Snakefile with <code>argparse</code> results in error <code>snakemake: error: unrecognized arguments: -zz</code>. Below is an example script.</p>\n\n<pre><code>import argparse\n\ndef get_args():\n    parser = argparse.ArgumentParser(description='Compares Illumina and 10x VCFs using RTG vcfeval')\n\n    # required main arguments\n    parser.add_argument('-zz', metavar='--filename', dest='fn', help='Filename', required=True)\n\n    # parse arguments\n    args = parser.parse_args()\n\n    fn = args.fn\n    return fn\n\nfn = get_args()\n\nrule test_1:\n    input:\n        fn + \"/example.txt\"\n    shell:\n        \"echo Using file {input}\"\n</code></pre>\n"}, {"tags": ["python", "arrays", "numpy"], "comments": [{"owner": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 1, "creation_date": 1504137056, "post_id": 45971257, "comment_id": 78901632, "body": "This is very very broad. You can use np.unique() on some flattened view or hash and work on hashes. But that decision is hard to do blindly."}, {"owner": {"reputation": 41, "user_id": 8540535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9df5969f97a06c888135d878b479f629?s=128&d=identicon&r=PG&f=1", "display_name": "Piero G.", "link": "https://stackoverflow.com/users/8540535/piero-g"}, "reply_to_user": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 0, "creation_date": 1504137300, "post_id": 45971257, "comment_id": 78901670, "body": "Thanks Sascha, I tried with np.unique but it compares the 2D arrays not as a whole element but by its internal numbers and the comparison is not accurate. Think that function is more useful with 1D arrays. Will investigate about Hashes and see what can i find"}, {"owner": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 0, "creation_date": 1504137343, "post_id": 45971257, "comment_id": 78901680, "body": "Again too broad. You should mention if those might differ by shapes and size and if this is relevant here. We don&#39;t know that. (and is not accurate sounds strange; this is fully deterministic and correct; but of course it might not be doing what you think it&#39;s doing)"}, {"owner": {"reputation": 41, "user_id": 8540535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9df5969f97a06c888135d878b479f629?s=128&d=identicon&r=PG&f=1", "display_name": "Piero G.", "link": "https://stackoverflow.com/users/8540535/piero-g"}, "reply_to_user": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 0, "creation_date": 1504138075, "post_id": 45971257, "comment_id": 78901806, "body": "ok, the 3D array is an array of images, so 2D arrays are the elements inside. When I run np.unique it is converting my 3D array to a 1D array with shape (256,). I suponse as the 2D arrays are representing images they contain values only from 0 to 256 and the np.unique is comparing only the numbers not the 2D elements as a whole. Thats why I build the functions."}, {"owner": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 0, "creation_date": 1504138172, "post_id": 45971257, "comment_id": 78901828, "body": "Then start by reading the docs, especially the argument: <code>axis</code>."}, {"owner": {"reputation": 41, "user_id": 8540535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9df5969f97a06c888135d878b479f629?s=128&d=identicon&r=PG&f=1", "display_name": "Piero G.", "link": "https://stackoverflow.com/users/8540535/piero-g"}, "reply_to_user": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 0, "creation_date": 1504138660, "post_id": 45971257, "comment_id": 78901929, "body": "Yes, there is no &#39;axis&#39; parameter in python3 for np.unique. Documentation says that &quot;Parameter: Input array - This will be flattened if it is not already 1-D.&quot; Don&#39;t know how to fix this really."}, {"owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "edited": false, "score": 0, "creation_date": 1504140230, "post_id": 45971257, "comment_id": 78902173, "body": "The <code>axis</code> argument was added to <code>unique</code> in numpy 1.13.0."}, {"owner": {"reputation": 41, "user_id": 8540535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9df5969f97a06c888135d878b479f629?s=128&d=identicon&r=PG&f=1", "display_name": "Piero G.", "link": "https://stackoverflow.com/users/8540535/piero-g"}, "edited": false, "score": 0, "creation_date": 1504227247, "post_id": 45971257, "comment_id": 78943998, "body": "Thanks all!, as marked by Divakar, this question was perfectly answered in the linked question. But don&#39;t have a way to mark this as solved with a linked question."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 8540535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9df5969f97a06c888135d878b479f629?s=128&d=identicon&r=PG&f=1", "display_name": "Piero G.", "link": "https://stackoverflow.com/users/8540535/piero-g"}, "edited": false, "score": 0, "creation_date": 1504137820, "post_id": 45971293, "comment_id": 78901760, "body": "I tried that I I got the 3D array converted to a 1D array. &gt;&gt;trd.shape (200000, 28, 28) &gt;&gt;newarray=np.unique(trd) &gt;&gt;v.shape (256,)  I want to tell that the 3D array contains images as 2D arrays, so the values are from 0 to 256 each element. Dont know why is converting the original array to a 1D array. Thats why I built the functions above"}], "tags": [], "owner": {"reputation": 25463, "user_id": 5003756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8BUMb.jpg?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/5003756/james"}, "is_accepted": false, "score": 0, "last_activity_date": 1504137104, "creation_date": 1504137104, "answer_id": 45971293, "question_id": 45971257, "link": "https://stackoverflow.com/questions/45971257/how-can-i-improve-the-deletion-of-repeated-elements-from-an-array-of-2d-numpy-ar/45971293#45971293", "title": "how can I improve the deletion of repeated elements from an array of 2D numpy arrays?", "body": "<p>If you want to get the unique elements from a numpy array, you can use the numpy <code>unique</code> function.</p>\n\n<pre><code>import numpy as np\n\na = np.array([1,2,2,3,4,2,4])\nnp.unique(a)\narray([1, 2, 3, 4])\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 8540535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9df5969f97a06c888135d878b479f629?s=128&d=identicon&r=PG&f=1", "display_name": "Piero G.", "link": "https://stackoverflow.com/users/8540535/piero-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "closed_date": 1504152384, "answer_count": 1, "score": 3, "last_activity_date": 1504227333, "creation_date": 1504136812, "last_edit_date": 1504227333, "question_id": 45971257, "link": "https://stackoverflow.com/questions/45971257/how-can-i-improve-the-deletion-of-repeated-elements-from-an-array-of-2d-numpy-ar", "closed_reason": "Duplicate", "title": "how can I improve the deletion of repeated elements from an array of 2D numpy arrays?", "body": "<p>I tried to run the code below, but takes a long time, is there any way to improve this code? I tried with a lot of python functions but all look like are created to work with 1D arrays only, sorry for the code I am very new on this:</p>\n\n<p>Function that returns an array that contains unique elements:</p>\n\n<pre><code>def get_unique_values(dataset):\n    uniqueimages=np.empty(dataset.shape, dtype=np.float32)\n    u=0\n\n    for i in range(dataset.shape[0]):\n        if (check_if_exists(dataset[i,:,:],uniqueimages)==0):\n            uniqueimages[u,:,:]=dataset[i,:,:]\n            u=u+1\n\n    return uniqueimages[0:u,:,:] \n</code></pre>\n\n<p>function that verifies if a given element is already in the array:</p>\n\n<pre><code>def check_if_exists( q,a ):\n    r=0\n    for i in range(a.shape[0]):\n        if np.array_equal(q,a[i,:,:]):\n            r=1\n            break\n\n    return r\n</code></pre>\n\n<p>then I run this giving a 3D array as input (shape= 2000,28,28):</p>\n\n<pre><code>vadu=get_unique_values(3Darray)\n</code></pre>\n\n<p>EDIT: this question was solved in the other linked question, thanks Divakar!</p>\n"}, {"tags": ["python", "django", "django-admin"], "comments": [{"owner": {"reputation": 3193, "user_id": 8196244, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uTuJY.jpg?s=128&g=1", "display_name": "Mauricio Cortazar", "link": "https://stackoverflow.com/users/8196244/mauricio-cortazar"}, "edited": false, "score": 0, "creation_date": 1504161349, "post_id": 45971255, "comment_id": 78908071, "body": "<a href=\"https://stackoverflow.com/questions/4897291/django-writing-a-view-to-delete-an-item-with-checkboxes\" title=\"django writing a view to delete an item with checkboxes\">stackoverflow.com/questions/4897291/&hellip;</a> maybe duplicate"}, {"owner": {"reputation": 2460, "user_id": 2228912, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BvEEz.png?s=128&g=1", "display_name": "Hakim", "link": "https://stackoverflow.com/users/2228912/hakim"}, "reply_to_user": {"reputation": 3193, "user_id": 8196244, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uTuJY.jpg?s=128&g=1", "display_name": "Mauricio Cortazar", "link": "https://stackoverflow.com/users/8196244/mauricio-cortazar"}, "edited": false, "score": 0, "creation_date": 1504178255, "post_id": 45971255, "comment_id": 78919154, "body": "@MauricioCortazar Not really a duplicate, since for me I don&#39;t even know where to put the views when the admin section is overridden."}, {"owner": {"reputation": 3061, "user_id": 6396981, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/1W4ME.png?s=128&g=1", "display_name": "binpy", "link": "https://stackoverflow.com/users/6396981/binpy"}, "edited": false, "score": 0, "creation_date": 1504347291, "post_id": 45971255, "comment_id": 78985477, "body": "Sounds similiar with my previous <a href=\"https://stackoverflow.com/a/45677306/6396981\">answer here</a> or <a href=\"http://agusmakmun.github.io/python/django/2016/04/20/adding-broadcast-mail-to-all-users-registered-inside-django-admin.html\" rel=\"nofollow noreferrer\">this one</a>."}, {"owner": {"reputation": 2460, "user_id": 2228912, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BvEEz.png?s=128&g=1", "display_name": "Hakim", "link": "https://stackoverflow.com/users/2228912/hakim"}, "reply_to_user": {"reputation": 3061, "user_id": 6396981, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/1W4ME.png?s=128&g=1", "display_name": "binpy", "link": "https://stackoverflow.com/users/6396981/binpy"}, "edited": false, "score": 0, "creation_date": 1504371677, "post_id": 45971255, "comment_id": 78992109, "body": "@SancaKembang Thanks for the link. It seems similar to a solution I came across. Is it common to have a class method as a model field (like the <code>process_button()</code> in you solution)?"}, {"owner": {"reputation": 307, "user_id": 4510659, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bfQbK.jpg?s=128&g=1", "display_name": "Sascha Rau", "link": "https://stackoverflow.com/users/4510659/sascha-rau"}, "edited": false, "score": 0, "creation_date": 1504388170, "post_id": 45971255, "comment_id": 78996633, "body": "Can you post your template? The Tutorial is just an view not a form. Maybe there&#39;s a better way than to override the list block....in django.contrib.admin.options.changelist_view can you see all the &quot;basic&quot; magic."}, {"owner": {"reputation": 3061, "user_id": 6396981, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/1W4ME.png?s=128&g=1", "display_name": "binpy", "link": "https://stackoverflow.com/users/6396981/binpy"}, "edited": false, "score": 0, "creation_date": 1504420319, "post_id": 45971255, "comment_id": 79001275, "body": "@h4k1m nope. it custom. but Django can assign your function with <code>funcname.allow_tags = True</code> where you can use it eg for <code>list_display</code> in the admin, I think this would be useful if you need for each objects.. but, it will be deprecated in Django 2.0.."}, {"owner": {"reputation": 3061, "user_id": 6396981, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/1W4ME.png?s=128&g=1", "display_name": "binpy", "link": "https://stackoverflow.com/users/6396981/binpy"}, "edited": false, "score": 0, "creation_date": 1504420754, "post_id": 45971255, "comment_id": 79001337, "body": "See this for more <a href=\"https://docs.djangoproject.com/en/dev/internals/deprecation/#deprecation-removed-in-2-0\" rel=\"nofollow noreferrer\">&quot;Support for the allow_tags attribute on ModelAdmin methods will be removed.&quot;</a>"}, {"owner": {"reputation": 2460, "user_id": 2228912, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BvEEz.png?s=128&g=1", "display_name": "Hakim", "link": "https://stackoverflow.com/users/2228912/hakim"}, "reply_to_user": {"reputation": 307, "user_id": 4510659, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bfQbK.jpg?s=128&g=1", "display_name": "Sascha Rau", "link": "https://stackoverflow.com/users/4510659/sascha-rau"}, "edited": false, "score": 0, "creation_date": 1504443786, "post_id": 45971255, "comment_id": 79006741, "body": "@SaschaRau I&#39;ve just updated my question (you can see that the customized <code>chage_list.html</code> is very basic)."}, {"owner": {"reputation": 109, "user_id": 5719066, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ilX0RWcA17g/AAAAAAAAAAI/AAAAAAAACGo/o7CfJUYA5hE/photo.jpg?sz=128", "display_name": "swapnilsm", "link": "https://stackoverflow.com/users/5719066/swapnilsm"}, "edited": false, "score": 0, "creation_date": 1504728678, "post_id": 45971255, "comment_id": 79129081, "body": "First of all, were you able to add checkboxes? Leave aside the linking between <code>delete selected</code> and the <code>checked</code> items."}, {"owner": {"reputation": 2460, "user_id": 2228912, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BvEEz.png?s=128&g=1", "display_name": "Hakim", "link": "https://stackoverflow.com/users/2228912/hakim"}, "reply_to_user": {"reputation": 109, "user_id": 5719066, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ilX0RWcA17g/AAAAAAAAAAI/AAAAAAAACGo/o7CfJUYA5hE/photo.jpg?sz=128", "display_name": "swapnilsm", "link": "https://stackoverflow.com/users/5719066/swapnilsm"}, "edited": false, "score": 0, "creation_date": 1504735627, "post_id": 45971255, "comment_id": 79132123, "body": "@SwapnilMahajan I would just need to add <code>input type=&quot;checkbox&quot; </code> to the <code>html template</code> above. It&#39;s the management of the checked boxed that&#39;s a bit more complicated. Should I do that with <code>JQuery</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 2460, "user_id": 2228912, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BvEEz.png?s=128&g=1", "display_name": "Hakim", "link": "https://stackoverflow.com/users/2228912/hakim"}, "edited": false, "score": 0, "creation_date": 1505591556, "post_id": 46129772, "comment_id": 79479227, "body": "Why did you use <code>force_text</code> when you injected the id as a value to the checkbox?"}, {"owner": {"reputation": 121, "user_id": 4239444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12b1f0826babdc69b66c82f98750cf70?s=128&d=identicon&r=PG&f=1", "display_name": "Sabir Akhadov", "link": "https://stackoverflow.com/users/4239444/sabir-akhadov"}, "reply_to_user": {"reputation": 2460, "user_id": 2228912, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BvEEz.png?s=128&g=1", "display_name": "Hakim", "link": "https://stackoverflow.com/users/2228912/hakim"}, "edited": false, "score": 1, "creation_date": 1505594071, "post_id": 46129772, "comment_id": 79479946, "body": "I guess it was a copy paste from somewhere, force_text is not actually needed here."}, {"owner": {"reputation": 2460, "user_id": 2228912, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BvEEz.png?s=128&g=1", "display_name": "Hakim", "link": "https://stackoverflow.com/users/2228912/hakim"}, "edited": false, "score": 0, "creation_date": 1505664549, "post_id": 46129772, "comment_id": 79494843, "body": "Which file did you copy from? I want to add links for each item in the <code>change_list.html</code> to the edit page. I know there is <code>ModelAdmin.list_display_links</code>, but I&#39;m not sure if it would work in my case (with a customized admin)."}, {"owner": {"reputation": 121, "user_id": 4239444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12b1f0826babdc69b66c82f98750cf70?s=128&d=identicon&r=PG&f=1", "display_name": "Sabir Akhadov", "link": "https://stackoverflow.com/users/4239444/sabir-akhadov"}, "reply_to_user": {"reputation": 2460, "user_id": 2228912, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BvEEz.png?s=128&g=1", "display_name": "Hakim", "link": "https://stackoverflow.com/users/2228912/hakim"}, "edited": false, "score": 0, "creation_date": 1505740538, "post_id": 46129772, "comment_id": 79523370, "body": "there is an action_checkbox method in the ModelAdmin class which I could not figure out how to use directly so I copied its body."}], "tags": [], "owner": {"reputation": 121, "user_id": 4239444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12b1f0826babdc69b66c82f98750cf70?s=128&d=identicon&r=PG&f=1", "display_name": "Sabir Akhadov", "link": "https://stackoverflow.com/users/4239444/sabir-akhadov"}, "is_accepted": true, "score": 3, "last_activity_date": 1505594136, "last_edit_date": 1505594136, "creation_date": 1504953477, "answer_id": 46129772, "question_id": 45971255, "link": "https://stackoverflow.com/questions/45971255/add-checkbox-and-delete-actions-to-customized-django-admin-change-list/46129772#46129772", "title": "Add checkbox and delete actions to customized Django admin change_list", "body": "<p>The key is to look at the  \"admin/change_list.html\" template that is extended in \"sale_summary_change_list.html\". Its result_list block has the needed form. You will also have to add the input checkboxes to the returned query set in admin.py/changelist_view. I modified the code from the tutorial. We of course have to drop the aggregation on sales if we want to be able to delete individual items.</p>\n\n<pre><code>from django.contrib import admin\nfrom django.contrib.admin import ModelAdmin, helpers\n\nfrom .models import SaleSummary, Category\n\n\n@admin.register(SaleSummary)\nclass SaleSummaryAdmin(ModelAdmin):\n    change_list_template = 'admin/sale_summary_change_list.html'\n    date_hierarchy = 'date'\n\n    def changelist_view(self, request, extra_context=None):\n        response = super(SaleSummaryAdmin, self).changelist_view(\n            request,\n            extra_context=extra_context,\n        )\n        try:\n            qs = response.context_data['cl'].queryset\n        except (AttributeError, KeyError):\n            return response\n\n        # metrics = {\n        #     'total': Count('id'),\n        #     'total_sales': Sum('amount'),\n        # }\n        result_qs = list(qs.values('category__name', 'pk', 'amount').order_by('category__name').all())\n        map(lambda r: r.update(\n            {'check_box': helpers.checkbox.render(helpers.ACTION_CHECKBOX_NAME, r['pk'])}), result_qs)\n        response.context_data['summary'] = list(result_qs)\n\n        return response\n</code></pre>\n\n<p>And here is the template:</p>\n\n<pre><code>{% extends \"admin/change_list.html\" %}\n{% load humanize admin_list%}\n{% block content_title %}\n    &lt;h1&gt; Sales Summary &lt;/h1&gt;\n{% endblock %}\n\n{% block result_list %}\n\n          {% if action_form and actions_on_top and cl.show_admin_actions %}{% admin_actions %}{% endif %}\n          {% if action_form and actions_on_bottom and cl.show_admin_actions %}{% admin_actions %}{% endif %}\n    &lt;div class=\"results\"&gt;\n        &lt;table&gt;\n            &lt;thead&gt;\n            &lt;tr&gt;\n                &lt;th&gt;\n                    &lt;div class=\"text\"&gt;\n                        &lt;a href=\"#\"&gt;Action&lt;/a&gt;\n                    &lt;/div&gt;\n                &lt;/th&gt;\n                &lt;th&gt;\n                    &lt;div class=\"text\"&gt;\n                        &lt;a href=\"#\"&gt;Category&lt;/a&gt;\n                    &lt;/div&gt;\n                &lt;/th&gt;\n                &lt;th&gt;\n                    &lt;div class=\"text\"&gt;\n                        &lt;a href=\"#\"&gt;Total Sales&lt;/a&gt;\n                    &lt;/div&gt;\n                &lt;/th&gt;\n            &lt;/tr&gt;\n            &lt;/thead&gt;\n            &lt;tbody&gt;\n            {% for row in summary %}\n                &lt;tr class=\"{% cycle 'row1' 'row2' %}\"&gt;\n                    &lt;td&gt; {{ row.check_box }} &lt;/td&gt;\n                    &lt;td&gt; {{ row.category__name }} &lt;/td&gt;\n                    &lt;td&gt; {{ row.amount | intcomma }} &lt;/td&gt;\n\n                &lt;/tr&gt;\n            {% endfor %}\n            &lt;/tbody&gt;\n\n        &lt;/table&gt;\n    &lt;/div&gt;\n\n{% endblock %}\n\n{% block pagination %}{% endblock %}\n</code></pre>\n\n<p>Check the complete project on github:</p>\n\n<p><a href=\"https://github.com/SabirAkhadov/django-action-change-list-demo\" rel=\"nofollow noreferrer\">https://github.com/SabirAkhadov/django-action-change-list-demo</a></p>\n"}, {"tags": [], "owner": {"reputation": 3971, "user_id": 4683950, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NiTIZ.jpg?s=128&g=1", "display_name": "Espoir Murhabazi", "link": "https://stackoverflow.com/users/4683950/espoir-murhabazi"}, "is_accepted": false, "score": 0, "last_activity_date": 1583775744, "creation_date": 1583775744, "answer_id": 60605809, "question_id": 45971255, "link": "https://stackoverflow.com/questions/45971255/add-checkbox-and-delete-actions-to-customized-django-admin-change-list/60605809#60605809", "title": "Add checkbox and delete actions to customized Django admin change_list", "body": "<p>@Sabir Answer is the best one, and this one builds on top of it.</p>\n\n<p>The part where he uses <code>map</code> to append the checkbox to the result list can give some performance issues when you are dealing with so many rows, let say 1000 rows</p>\n\n<p>I found that : \nYou can render the checkbox on the front end, and pass it the element pk.</p>\n\n<p>You can keep the same admin class but remove the <code>map</code>  line in the change_list_view function and let the front end to the job.</p>\n\n<p>So I changed my template like this</p>\n\n<pre><code>{% extends \"admin/change_list.html\" %}\n{% load humanize admin_list%}\n{% block content_title %}\n    &lt;h1&gt; Sales Summary &lt;/h1&gt;\n{% endblock %}\n\n{% block result_list %}\n\n          {% if action_form and actions_on_top and cl.show_admin_actions %}{% admin_actions %}{% endif %}\n          {% if action_form and actions_on_bottom and cl.show_admin_actions %}{% admin_actions %}{% endif %}\n    &lt;div class=\"results\"&gt;\n        &lt;table&gt;\n            &lt;thead&gt;\n            &lt;tr&gt;\n                &lt;th&gt;\n                    &lt;div class=\"text\"&gt;\n                        &lt;a href=\"#\"&gt;Action&lt;/a&gt;\n                    &lt;/div&gt;\n                &lt;/th&gt;\n                &lt;th&gt;\n                    &lt;div class=\"text\"&gt;\n                        &lt;a href=\"#\"&gt;Category&lt;/a&gt;\n                    &lt;/div&gt;\n                &lt;/th&gt;\n                &lt;th&gt;\n                    &lt;div class=\"text\"&gt;\n                        &lt;a href=\"#\"&gt;Total Sales&lt;/a&gt;\n                    &lt;/div&gt;\n                &lt;/th&gt;\n            &lt;/tr&gt;\n            &lt;/thead&gt;\n            &lt;tbody&gt;\n            {% for row in summary %}\n                &lt;tr class=\"{% cycle 'row1' 'row2' %}\"&gt;\n                    &lt;td&gt; &lt;td&gt; &lt;input type=\"checkbox\" name=\"_selected_action\" value={{row.pk}} class=\"action-select\"&gt; &lt;/td&gt; &lt;/td&gt;\n                    &lt;td&gt; {{ row.category__name }} &lt;/td&gt;\n                    &lt;td&gt; {{ row.amount | intcomma }} &lt;/td&gt;\n\n                &lt;/tr&gt;\n            {% endfor %}\n            &lt;/tbody&gt;\n\n        &lt;/table&gt;\n    &lt;/div&gt;\n\n{% endblock %}\n\n{% block pagination %}{% endblock %}\n</code></pre>\n"}], "owner": {"reputation": 2460, "user_id": 2228912, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BvEEz.png?s=128&g=1", "display_name": "Hakim", "link": "https://stackoverflow.com/users/2228912/hakim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2764, "favorite_count": 1, "accepted_answer_id": 46129772, "answer_count": 2, "score": 11, "last_activity_date": 1611253692, "creation_date": 1504136781, "last_edit_date": 1504443741, "question_id": 45971255, "link": "https://stackoverflow.com/questions/45971255/add-checkbox-and-delete-actions-to-customized-django-admin-change-list", "title": "Add checkbox and delete actions to customized Django admin change_list", "body": "<p>I've been customizing <code>Django</code>'s <code>change_list.html</code> following this <a href=\"https://medium.com/@hakibenita/how-to-turn-django-admin-into-a-lightweight-dashboard-a0e0bbf609ad\" rel=\"noreferrer\">tutorial</a>. My question concerns something that wasn't covered in that tutorial:</p>\n\n<p>How to easily add the <code>checkbox</code> and the <code>actions</code> (delete selected items)?</p>\n\n<p>I took a look in the <code>templatetags</code> of the admin section (mainly <a href=\"https://github.com/django/django/blob/master/django/contrib/admin/templatetags/admin_list.py\" rel=\"noreferrer\">here</a>, but I couldn't understand how to easily add the delete action to each item in a customized <code>change_list.html</code> template and what should be added to the <code>ModelAdmin</code> class).</p>\n\n<p><strong>Update:</strong></p>\n\n<p>Below is the custom <code>change_list.html</code>, I'm trying to add item checkboxes to:</p>\n\n<pre><code>{% extends \"admin/change_list.html\" %}\n\n{% block content_title %}\n    &lt;h1&gt;Title&lt;/h1&gt;\n{% endblock %}\n\n{% block result_list %}\n    &lt;div class=\"results\"&gt;\n        &lt;table id=\"result_list\"&gt;\n            &lt;thead&gt;\n                ...\n            &lt;/thead&gt;\n\n            &lt;tbody&gt;\n                {% for item in items %}\n                    &lt;tr class=\"{% cycle 'row1' 'row2' %}\"&gt;\n                        ...\n                    &lt;/tr&gt;\n                {% endfor %}\n            &lt;/tbody&gt;\n        &lt;/table&gt;\n    &lt;/div&gt;\n{% endblock %}\n</code></pre>\n"}, {"tags": ["python", "web-scraping", "beautifulsoup"], "answers": [{"tags": [], "owner": {"reputation": 506, "user_id": 58470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/517a640ae475c22dcae49506da116835?s=128&d=identicon&r=PG", "display_name": "meisen99", "link": "https://stackoverflow.com/users/58470/meisen99"}, "is_accepted": true, "score": 1, "last_activity_date": 1504188980, "last_edit_date": 1504188980, "creation_date": 1504139301, "answer_id": 45971524, "question_id": 45971243, "link": "https://stackoverflow.com/questions/45971243/python-web-scraping-data-table-that-covers-multiple-urls/45971524#45971524", "title": "Python - web scraping data table that covers multiple urls", "body": "<p>The issue is that the site you are trying to scrape actually loads the data through Javascript after the fact.  If you use something like Chrome Developer tools you can see that on page 2, the site references the following link:</p>\n\n<p><a href=\"http://etfdb.com/data_set/?tm=1699&amp;cond=%7Bby_etf:325%7D&amp;no_null_sort=true&amp;count_by_id=&amp;sort=weight&amp;order=desc&amp;limit=15&amp;offset=15\" rel=\"nofollow noreferrer\">http://etfdb.com/data_set/?tm=1699&amp;cond={by_etf:325}&amp;no_null_sort=true&amp;count_by_id=&amp;sort=weight&amp;order=desc&amp;limit=15&amp;offset=15</a></p>\n\n<p>The data you are looking for is there; your logic is sound but you just need to scrape the link above.</p>\n\n<p>If you remove the \"offset\" parameter, and change the limit to 1000, you'll actually get all of the data at once, and you can remove the pagination altogether.  </p>\n\n<p>Hope that helps!</p>\n\n<p>EDIT: I should have pointed out, the page you are loading is always the same (the first set of entries, starting with AAPL), and then the data gets loaded by Javascript from the resource above.  The Javascript then replaces the contents of the HTML you were scraping.  Since your script looks at the original HTML (but does not execute the Javascript replacing the contents), you get the same table over and over.</p>\n"}], "owner": {"reputation": 35, "user_id": 8540544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92683ce2bb50afc013a62621c04b1504?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Butler", "link": "https://stackoverflow.com/users/8540544/steve-butler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 708, "favorite_count": 0, "accepted_answer_id": 45971524, "answer_count": 1, "score": 3, "last_activity_date": 1504188980, "creation_date": 1504136721, "question_id": 45971243, "link": "https://stackoverflow.com/questions/45971243/python-web-scraping-data-table-that-covers-multiple-urls", "title": "Python - web scraping data table that covers multiple urls", "body": "<p>Very novice to Python, but am really trying to learn it. I was playing around with scraping data from a website, and feel like I am very close to coming up with the solution. The issue is that it keeps returning only the first page of the url, even through the url in the code is changing the page number at each iteration. </p>\n\n<p>The website I am using is <a href=\"http://etfdb.com/etf/SPY/#etf-holdings&amp;sort_name=weight&amp;sort_order=desc&amp;page=1\" rel=\"nofollow noreferrer\">http://etfdb.com/etf/SPY/#etf-holdings&amp;sort_name=weight&amp;sort_order=desc&amp;page=1</a> and the specific data table I am trying to scrape is SPY Holdings (where it says 506 holdings and then lists apple, microsoft, etc.)</p>\n\n<p>As you will notice, the data table has a bunch of pages (and this changes based on the ticker symbol - but for purposes of this just note that although there are 34 pages for SPY, it won't always be 34 pages). It begins by showing 15 companies, and then when you click 2 (to see the next 15 holdings) the url page= goes up by one.</p>\n\n<pre><code>#to break up html\nfrom bs4 import BeautifulSoup as soup\nfrom urllib.request import urlopen as uReq\nimport csv\nimport math\n\n#goes to url - determines the number of holdings and the number of pages the data table will need to loop through\nmy_url = \"http://etfdb.com/etf/SPY/#etf-\nholdings&amp;sort_name=weight&amp;sort_order=desc&amp;page=1\"\nuClient = uReq(my_url)\npage_html = uClient.read()\nuClient.close()\npage_soup = soup(page_html,\"html.parser\")\n#goes to url - scrapes from another section of the page and finds 506 holdings\nnum_holdings_text = page_soup.find('span',{'class': 'relative-metric-bubble-data'})\nnum_holdings = num_holdings_text.text\nnumber_of_loops = int(num_holdings)\nnum_of_loops = number_of_loops/15\n#goes to url - because the table shows 15 holdings at a time, this calcs number of pages I'll need to loop through\nnum_of_loops = math.ceil(num_of_loops)\nholdings = []\nfor loop in range(1,num_of_loops+1):\n    my_url = \"http://etfdb.com/etf/SPY/#etf-holdings&amp;sort_name=weight&amp;sort_order=desc&amp;page=\" + str(loop)\n    uClient = uReq(my_url)\n    page_html = uClient.read()\n    uClient.close()\n    page_soup = soup(page_html, \"html.parser\")\n    table = page_soup.find('table', {\n    'class': 'table mm-mobile-table table-module2 table-default table-striped table-hover table-pagination'})\n    table_body = table.find('tbody')\n    table_rows = table_body.find_all('tr')\n    for tr in table_rows:\n        td = tr.find_all('td')\n        row = [i.text.strip() for i in td]\n        holdings.append(row)\n        print(row)\n    print (holdings)\n\n\n    with open('etfdatapull2.csv','w',newline='') as fp:\n        a = csv.writer(fp, delimiter = ',')\n        a.writerows(holdings)\n</code></pre>\n\n<p>Again, the issue I am having is that it just is continually returning the first page (eg. it always just returns apple - GE) even though the link is updating. </p>\n\n<p>Thank you so much for your help. Again, very new to this so please dumb it down as much as possible!</p>\n"}, {"tags": ["python", "python-3.x", "forex"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1504136460, "post_id": 45971200, "comment_id": 78901514, "body": "currency != concurrency (replaced tag)"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1504136546, "post_id": 45971200, "comment_id": 78901532, "body": "If you don&#39;t want to use an API, there&#39;s the option of <a href=\"https://pypi.python.org/pypi/forex-python\" rel=\"nofollow noreferrer\"><code>forex-python</code></a>."}], "owner": {"reputation": 21, "user_id": 8532883, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AJrqz.jpg?s=128&g=1", "display_name": "Dimitrios", "link": "https://stackoverflow.com/users/8532883/dimitrios"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "closed_date": 1504136442, "answer_count": 0, "score": 2, "last_activity_date": 1504136449, "creation_date": 1504136343, "last_edit_date": 1504136449, "question_id": 45971200, "link": "https://stackoverflow.com/questions/45971200/automatically-update-variable-data-from-the-web-in-python-programming-lanuage", "closed_reason": "Duplicate", "title": "Automatically update variable data from the web in Python programming lanuage", "body": "<p>I have that little program </p>\n\n<pre><code>dol_rate = 0.84072\neur_rate = 1.18957\n\nwhat = input(\"Select (A) DOL-&gt;EUR or (B) EUR-&gt;DOL: \")\n\nif what == \"A\" or what == \"a\":\nprice1 = input(\"Enter a certain amount of US dollars: \")\n\ndoltoeur = int(price1) * dol_rate\n\nprint(doltoeur,\"\u20ac\")\n\netc...\n</code></pre>\n\n<p>And I want to know if there is any way to update the <strong><em>dol_rate</em></strong> and <strong><em>eur_rate</em></strong> variables automatically from the web with the current dollar and euro price.</p>\n"}, {"tags": ["python", "python-3.x", "pyqt", "pyqt4", "openstreetmap"], "answers": [{"comments": [{"owner": {"reputation": 695, "user_id": 5692288, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpPmT.jpg?s=128&g=1", "display_name": "Ayser", "link": "https://stackoverflow.com/users/5692288/ayser"}, "edited": false, "score": 0, "creation_date": 1504224149, "post_id": 45973488, "comment_id": 78943496, "body": "Thanks a lot for your answer, this is exactly what i was looking for :).  I did a little modifications to your library and it worked for me."}, {"owner": {"reputation": 411, "user_id": 5244155, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/a6a65335dcd3483f9240771217882802?s=128&d=identicon&r=PG&f=1", "display_name": "H. Dave", "link": "https://stackoverflow.com/users/5244155/h-dave"}, "edited": false, "score": 0, "creation_date": 1519521430, "post_id": 45973488, "comment_id": 84944163, "body": "@ eyllanesc I downloaded your code from github but I get the following error <code>ModuleNotFoundError:\u00a0No\u00a0module\u00a0named\u00a0&#39;PyQt5.QtWebKit&#39;</code>. Except <code>PyQt5</code> and <code>qgmap</code>, should I install another library? Thank you for your help."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 411, "user_id": 5244155, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/a6a65335dcd3483f9240771217882802?s=128&d=identicon&r=PG&f=1", "display_name": "H. Dave", "link": "https://stackoverflow.com/users/5244155/h-dave"}, "edited": false, "score": 0, "creation_date": 1519533966, "post_id": 45973488, "comment_id": 84946041, "body": "@H.Dave What version of PyQt5 do you have? What example have you executed?"}, {"owner": {"reputation": 411, "user_id": 5244155, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/a6a65335dcd3483f9240771217882802?s=128&d=identicon&r=PG&f=1", "display_name": "H. Dave", "link": "https://stackoverflow.com/users/5244155/h-dave"}, "edited": false, "score": 0, "creation_date": 1519558213, "post_id": 45973488, "comment_id": 84950780, "body": "@ eyllanesc I have <code>PyQt5==5.9.1</code> version and I tried <code>qGmapExample</code>"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 411, "user_id": 5244155, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/a6a65335dcd3483f9240771217882802?s=128&d=identicon&r=PG&f=1", "display_name": "H. Dave", "link": "https://stackoverflow.com/users/5244155/h-dave"}, "edited": false, "score": 0, "creation_date": 1519572159, "post_id": 45973488, "comment_id": 84955016, "body": "@H.Dave I will upgrade from QWebEngineView, but before that tell me if you can execute the following command: <code>from PyQt5.QtWebEngineWidgets import QWebEngineView</code>"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 411, "user_id": 5244155, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/a6a65335dcd3483f9240771217882802?s=128&d=identicon&r=PG&f=1", "display_name": "H. Dave", "link": "https://stackoverflow.com/users/5244155/h-dave"}, "edited": false, "score": 0, "creation_date": 1519572489, "post_id": 45973488, "comment_id": 84955113, "body": "@H.Dave Okay, I&#39;m going to update my library these days."}, {"owner": {"reputation": 411, "user_id": 5244155, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/a6a65335dcd3483f9240771217882802?s=128&d=identicon&r=PG&f=1", "display_name": "H. Dave", "link": "https://stackoverflow.com/users/5244155/h-dave"}, "edited": false, "score": 0, "creation_date": 1519572587, "post_id": 45973488, "comment_id": 84955154, "body": "@ eyllanesc Thank you very much !!"}, {"owner": {"reputation": 136, "user_id": 13890678, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z8FG4.jpg?s=128&g=1", "display_name": "lhoupert", "link": "https://stackoverflow.com/users/13890678/lhoupert"}, "edited": false, "score": 0, "creation_date": 1618396592, "post_id": 45973488, "comment_id": 118587133, "body": "Hi @eyllanesc, I couldn&#39;t find the example file on the repo <a href=\"https://github.com/eyllanesc/qMap\" rel=\"nofollow noreferrer\">github.com/eyllanesc/qMap</a>, is it still working?"}], "tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 6, "last_activity_date": 1504157363, "last_edit_date": 1504157363, "creation_date": 1504155511, "answer_id": 45973488, "question_id": 45971188, "link": "https://stackoverflow.com/questions/45971188/viewing-maps-with-pyqt4-qwebview-using-python-3/45973488#45973488", "title": "Viewing maps with PyQt4 QWebView using python 3", "body": "<p>Some time ago I had created a small library to show markers in maps using PyQt and <a href=\"https://www.google.com/maps\" rel=\"noreferrer\">Google Maps</a> or <a href=\"https://www.openstreetmap.org/\" rel=\"noreferrer\">OpenStreetMap</a>, because of your question I added this functionality so you can download the code from this <a href=\"https://github.com/eyllanesc/qMap\" rel=\"noreferrer\">link</a> and try the example: qOSMExample2.py</p>\n\n<p>In this answer I'll show you the most important parts of my code so that you can add custom functionality.</p>\n\n<p>QWebView supports javascript so I used the leaflet library, and this is included in the html as shown below:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;!DOCTYPE html&gt;\r\n&lt;html&gt;\r\n&lt;head&gt;\r\n    &lt;meta name=\"viewport\" content=\"initial-scale=1.0, user-scalable=no\"/&gt;\r\n\r\n\r\n    &lt;style type=\"text/css\"&gt;\r\n\t\t\thtml { height: 100%; }\r\n\t\t\tbody { height: 100%; margin: 0; padding: 0 }\r\n\t\t\t#mapid { height: 100% }\r\n    &lt;/style&gt;\r\n\r\n    &lt;link rel=\"stylesheet\" href=\"https://unpkg.com/leaflet@1.0.3/dist/leaflet.css\"\r\n          integrity=\"sha512-07I2e+7D8p6he1SIM+1twR5TIrhUQn9+I6yjqD53JQjFiMf8EtC93ty0/5vJTZGF8aAocvHYNEDJajGdNx1IsQ==\"\r\n          crossorigin=\"\"/&gt;\r\n\r\n    &lt;script src=\"https://unpkg.com/leaflet@1.0.3/dist/leaflet.js\"\r\n            integrity=\"sha512-A7vV8IFfih/D732iSSKi20u/ooOfj/AGehOKq0f4vLT1Zr2Y+RX7C+w8A1gaSasGtRUZpF/NZgzSAu4/Gc41Lg==\"\r\n            crossorigin=\"\"&gt;&lt;/script&gt;\r\n\r\n    &lt;script type=\"text/javascript\" src=\"qOSM.js\"&gt;&lt;/script&gt;\r\n&lt;/head&gt;\r\n&lt;body onload=\"initialize()\"&gt;\r\n&lt;div id=\"mapid\" style=\"width:100%; height:100%\"&gt;&lt;/div&gt;\r\n&lt;/body&gt;\r\n&lt;/html&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>In addition if we observe I have imported the <strong>qOSM.js</strong> file that implements the logic of creating, moving the map and the same with the markers.</p>\n\n<p>The other important is to interact python with javascript for it pyqt offers us 2 functions:</p>\n\n<blockquote>\n  <p><strong>void QWebFrame::addToJavaScriptWindowObject(const QString &amp; name, QObject * object)</strong></p>\n  \n  <p>Make object available under name from within the frame's JavaScript\n  context. The object will be inserted as a child of the frame's window\n  object.\n  [...]</p>\n</blockquote>\n\n<pre><code>self.page().mainFrame().addToJavaScriptWindowObject(\"qtWidget\", self)\n</code></pre>\n\n<blockquote>\n  <p><strong>QVariant QWebFrame::evaluateJavaScript(const QString &amp; scriptSource)</strong></p>\n  \n  <p>Evaluates the JavaScript defined by scriptSource using this frame as\n  context and returns the result of the last executed statement.</p>\n</blockquote>\n\n<pre><code>def runScript(self, script):\n    return self.page().mainFrame().evaluateJavaScript(script)\n</code></pre>\n\n<p>The first function allows us to embed a python object in js and so we can output signals from js and connect them to python slots. The second is oriented to execute functions of js and receive what returns. In summary the first one serves to obtain answers asynchronously and the second one synchronously.</p>\n\n<p>In the next part I show the js where the functions mentioned above are implemented:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>// Where you want to render the map.\r\n\r\nvar map;\r\n\r\nvar markers = [];\r\n\r\nvar LeafIcon;\r\n\r\nfunction initialize() {\r\n    var element = document.getElementById('mapid');\r\n\r\n    map = L.map(element);\r\n\r\n    L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {\r\n        attribution: '&amp;copy; &lt;a href=\"http://osm.org/copyright\"&gt;OpenStreetMap&lt;/a&gt; contributors'\r\n    }).addTo(map);\r\n\r\n    if (typeof qtWidget !== 'undefined') {\r\n\r\n        map.on('dragend', function () {\r\n            center = map.getCenter();\r\n            qtWidget.mapMoved(center.lat, center.lng);\r\n        });\r\n\r\n        map.on('click', function (ev) {\r\n            qtWidget.mapClicked(ev.latlng.lat, ev.latlng.lng);\r\n        });\r\n\r\n        map.on('dblclick', function (ev) {\r\n            qtWidget.mapDoubleClicked(ev.latlng.lat, ev.latlng.lng);\r\n        });\r\n\r\n        map.on('contextmenu', function (ev) {\r\n            qtWidget.mapRightClicked(ev.latlng.lat, ev.latlng.lng);\r\n        });\r\n    }\r\n\r\n    LeafIcon = L.Icon.extend({\r\n        options: {\r\n            shadowUrl: 'leaf-shadow.png',\r\n            iconSize: [38, 95],\r\n            shadowSize: [50, 64],\r\n            iconAnchor: [22, 94],\r\n            shadowAnchor: [4, 62],\r\n            popupAnchor: [-3, -76]\r\n        }\r\n    });\r\n}\r\n\r\nfunction osm_setCenter(lat, lng) {\r\n    //console.log(lat);\r\n    map.panTo(new L.LatLng(lat, lng));\r\n}\r\n\r\nfunction osm_getCenter() {\r\n    return map.getCenter();\r\n}\r\n\r\nfunction osm_setZoom(zoom) {\r\n    map.setZoom(zoom);\r\n}\r\n\r\nfunction osm_addMarker(key, latitude, longitude, parameters) {\r\n\r\n    if (key in markers) {\r\n        osm_deleteMarker(key);\r\n    }\r\n\r\n    if (\"icon\" in parameters) {\r\n\r\n        parameters[\"icon\"] = new L.Icon({\r\n            iconUrl: parameters[\"icon\"],\r\n            iconAnchor: new L.Point(16, 16)\r\n        });\r\n    }\r\n\r\n    var marker = L.marker([latitude, longitude], parameters).addTo(map);\r\n\r\n    if (typeof qtWidget !== 'undefined') {\r\n\r\n        marker.on('dragend', function (event) {\r\n            var marker = event.target;\r\n            qtWidget.markerMoved(key, marker.getLatLng().lat, marker.getLatLng().lng);\r\n        });\r\n\r\n        marker.on('click', function (event) {\r\n            var marker = event.target;\r\n            //marker.bindPopup(parameters[\"title\"]);\r\n            qtWidget.markerClicked(key, marker.getLatLng().lat, marker.getLatLng().lng);\r\n        });\r\n\r\n        marker.on('dbclick', function (event) {\r\n            var marker = event.target;\r\n            qtWidget.markerClicked(key, marker.getLatLng().lat, marker.getLatLng().lng);\r\n        });\r\n\r\n        marker.on('contextmenu', function (event) {\r\n            var marker = event.target;\r\n            qtWidget.markerRightClicked(key, marker.getLatLng().lat, marker.getLatLng().lng);\r\n        });\r\n    }\r\n\r\n    markers[key] = marker;\r\n    return key;\r\n}\r\n\r\nfunction osm_deleteMarker(key) {\r\n    map.removeLayer(markers[key]);\r\n    delete markers[key];\r\n}\r\n\r\nfunction osm_moveMarker(key, latitude, longitude) {\r\n    marker = markers[key];\r\n    var newLatLng = new L.LatLng(latitude, longitude);\r\n    marker.setLatLng(newLatLng);\r\n}\r\n\r\nfunction osm_posMarker(key) {\r\n    marker = markers[key];\r\n    return [marker.getLatLng().lat, marker.getLatLng().lng];\r\n}\r\n\r\n\r\nhttp://</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Output:</p>\n\n<p><img src=\"https://github.com/eyllanesc/qMap/blob/master/output.gif?raw=true\"></p>\n"}], "owner": {"reputation": 695, "user_id": 5692288, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpPmT.jpg?s=128&g=1", "display_name": "Ayser", "link": "https://stackoverflow.com/users/5692288/ayser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2775, "favorite_count": 1, "accepted_answer_id": 45973488, "answer_count": 1, "score": 4, "last_activity_date": 1548265367, "creation_date": 1504136261, "last_edit_date": 1504224399, "question_id": 45971188, "link": "https://stackoverflow.com/questions/45971188/viewing-maps-with-pyqt4-qwebview-using-python-3", "title": "Viewing maps with PyQt4 QWebView using python 3", "body": "<p>I am building a program that can show a map with a markers according to specific coordinates from a database, so the process is:  </p>\n\n<ol>\n<li>Get the map from osm using (folium)  </li>\n<li>Add the marker  </li>\n<li>Save the map as HTML  </li>\n<li>Show the map.html in QWebView.  </li>\n</ol>\n\n<p>But this way is not practical if the coordinates are always changing e.g(vehicles tracking system).  </p>\n\n<p>Is there anyway that could allow me to add or update markers on the map avoiding the previous process, without having to create the map.html file then load it to QWebView then showing it every time .</p>\n\n<p>thanks</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 117, "user_id": 8239155, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lWinZ.jpg?s=128&g=1", "display_name": "jesse_b", "link": "https://stackoverflow.com/users/8239155/jesse-b"}, "edited": false, "score": 0, "creation_date": 1504136209, "post_id": 45983475, "comment_id": 78926493, "body": "Shot in the dark, but what about <code>{ sleep 2; echo test; sleep 2; echo test1 }</code> and maybe redirect it to python instead of pipe?"}, {"owner": {"reputation": 586, "user_id": 5216673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb5d8b8e0713574ae9a4836651a39e56?s=128&d=identicon&r=PG", "display_name": "thrig", "link": "https://stackoverflow.com/users/5216673/thrig"}, "edited": false, "score": 0, "creation_date": 1504136456, "post_id": 45983475, "comment_id": 78926494, "body": "<code>date +%s; (sleep 2; echo test; sleep 2; echo test1) | perl -pe &#39;$_=time().&quot; &quot;.$_&#39;</code> shows both <code>test</code> strings and the two-second delays for me."}, {"owner": {"reputation": 820, "user_id": 4957508, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wBY-4a1-0jo/AAAAAAAAAAI/AAAAAAAAAfc/4BCoMMK1rqg/photo.jpg?sz=128", "display_name": "Jeff Schaller", "link": "https://stackoverflow.com/users/4957508/jeff-schaller"}, "edited": false, "score": 1, "creation_date": 1504141607, "post_id": 45983475, "comment_id": 78926495, "body": "You need to show us how you are sending and receiving. It sounds like a problem for SO, but it&#39;s hard to tell."}, {"owner": {"reputation": 1259, "user_id": 1298540, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c33314f75786720f036152b7cb9e9f24?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1298540/michael"}, "edited": false, "score": 0, "creation_date": 1504150443, "post_id": 45983475, "comment_id": 78926496, "body": "I just update with the code that I am testing. Perhaps it is a combination between the python program and the command line. The python program on its own works."}, {"owner": {"reputation": 99, "user_id": 1638337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/079608620a5166a603a02a1fb374bc12?s=128&d=identicon&r=PG", "display_name": "scoobydoo", "link": "https://stackoverflow.com/users/1638337/scoobydoo"}, "edited": false, "score": 0, "creation_date": 1504156122, "post_id": 45983475, "comment_id": 78926497, "body": "The problem is in your python code, because this works fine: <code>(sleep 2; echo test; sleep 2; echo test1) | cat</code>"}, {"owner": {"reputation": 209, "user_id": 5032843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d95f226af074c844d1029b23ba08f3a?s=128&d=identicon&r=PG&f=1", "display_name": "fragw&#252;rdig", "link": "https://stackoverflow.com/users/5032843/fragw%c3%bcrdig"}, "edited": false, "score": 1, "creation_date": 1504161981, "post_id": 45983475, "comment_id": 78926498, "body": "Can you please post the supposed output?"}, {"owner": {"reputation": 696, "user_id": 8270535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f985021c708e63bba32a9895e65fdc9d?s=128&d=identicon&r=PG", "display_name": "sebasth", "link": "https://stackoverflow.com/users/8270535/sebasth"}, "edited": false, "score": 0, "creation_date": 1504166274, "post_id": 45983475, "comment_id": 78926499, "body": "You can use <code>for line in sys.stdin:</code> to read a line from standard input. I wrote an answer with an example with <code>select.select()</code> as well, but this likely needs to be moved to stackoverflow before I can post the answer."}, {"owner": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "edited": false, "score": 1, "creation_date": 1504192379, "post_id": 45983475, "comment_id": 78929419, "body": "Assuming, this is a reduced example for something that will need multiple sockets, use Twisted (or a similar library). Do <i>not</i> implement the whole event dispatch system yourself."}], "answers": [{"comments": [{"owner": {"reputation": 1259, "user_id": 1298540, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c33314f75786720f036152b7cb9e9f24?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1298540/michael"}, "edited": false, "score": 0, "creation_date": 1504196916, "post_id": 45983604, "comment_id": 78932315, "body": "Excellent response and thank you for sending the example using select.select. Indeed after the last echo there is multiple b&#39;&#39; sent to stdin so checking for an empty read and exiting fixed the issue."}], "tags": [], "owner": {"reputation": 696, "user_id": 8270535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f985021c708e63bba32a9895e65fdc9d?s=128&d=identicon&r=PG", "display_name": "sebasth", "link": "https://stackoverflow.com/users/8270535/sebasth"}, "is_accepted": true, "score": 5, "last_activity_date": 1504203614, "last_edit_date": 1504203614, "creation_date": 1504188724, "answer_id": 45983604, "question_id": 45983475, "link": "https://stackoverflow.com/questions/45983475/reading-stdin-line-at-a-time-in-python/45983604#45983604", "title": "Reading stdin line at a time in Python", "body": "<p>Your example goes to loop because after <code>echo test1</code> <em>stdin</em> is closed and <code>read()</code> always returns empty.\nAlso you shouldn't use another blocking call with <code>select</code>. If you would\nuse it on more than one object, you could still be blocked by <code>readline</code>\nfrom the previous event.</p>\n\n<p>For reading a line at time from <em>stdin</em> you do not need to use\n<code>select.select()</code>. Possibly the simplest way to achieve that:</p>\n\n<pre><code>for line in sys.stdin:\n    print(line)\n</code></pre>\n\n<p>If you want to use either <code>stdin</code> or a list of files as arguments to\nyour program, Python's\n<a href=\"https://docs.python.org/3/library/fileinput.html\" rel=\"nofollow noreferrer\"><code>fileinput</code></a> module\nis out of the box solution.</p>\n\n<p>In case you want/need to use <code>select.select()</code> anyways:</p>\n\n<pre><code>import os, sys, select\n\nbuffer = \"\"\nwhile True:\n  select.select([sys.stdin.fileno()], [], [])\n  read = os.read(sys.stdin.fileno(), 512)\n\n  # empty read: EOF\n  if len(read) == 0:\n    # buffer might not be empty\n    if len(buffer) &gt; 0:\n      sys.stdout.write(buffer + \"\\n\")\n\n    break\n\n  # find newlines\n  parts = read.split(\"\\n\")\n  buffer += parts.pop(0)\n\n  while len(parts) &gt; 0:\n    sys.stdout.write(buffer + \"\\n\")\n    buffer = parts.pop(0)\n</code></pre>\n\n<p>When an object becomes ready,\n<a href=\"https://docs.python.org/3/library/select.html#select.select\" rel=\"nofollow noreferrer\"><code>select.select</code></a>\nunblocks. The only object in this case is <em>stdin</em>. With more than one\nobject you need to check the return value of <code>select.select</code> to find out\nwhich one is ready. <code>os.read()</code> is used to do non-blocking read from\n<em>stdin</em> (alternatively:\nit's possible to use <code>stdin.read(1)</code> reading a character at a time).\n<code>read.split(\"\\n\")</code> is used for finding newlines, note that it is\npossible a single read yields more than one line.</p>\n"}, {"tags": [], "owner": {"reputation": 11277, "user_id": 3657941, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/304d8d4cceca5f9ce2383ff97b53e36b?s=128&d=identicon&r=PG&f=1", "display_name": "David Cullen", "link": "https://stackoverflow.com/users/3657941/david-cullen"}, "is_accepted": false, "score": 1, "last_activity_date": 1504199421, "last_edit_date": 1504199421, "creation_date": 1504190398, "answer_id": 45984183, "question_id": 45983475, "link": "https://stackoverflow.com/questions/45983475/reading-stdin-line-at-a-time-in-python/45984183#45984183", "title": "Reading stdin line at a time in Python", "body": "<p>After running <code>strace</code> on <code>cat</code>, I created this:</p>\n\n<pre><code>import sys\n\nwhile True:\n    data = sys.stdin.read()\n    if not len(data):\n        break\n    sys.stdout.write(data)\n</code></pre>\n\n<p><strong>Command</strong></p>\n\n<pre><code>(sleep 2; echo test; sleep 2; echo test1) | python3 test.py\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>test\ntest1\n</code></pre>\n\n<p>This solution relies on this fact:</p>\n\n<blockquote>\n  <p>If the end of the file has been reached, f.read() will return an empty string ('').</p>\n</blockquote>\n\n<p>See <a href=\"https://docs.python.org/3.3/tutorial/inputoutput.html#methods-of-file-objects\" rel=\"nofollow noreferrer\">Methods of File Objects</a>.</p>\n\n<p>If you need a version that uses <code>select</code>:</p>\n\n<pre><code>import os\nimport select\nimport sys\n\nwhile True:\n    rlist = [sys.stdin.fileno()]\n    wlist = []\n    xlist = []\n    rlist, wlist, xlist = select.select(rlist, wlist, xlist)\n    if sys.stdin.fileno() in rlist:\n        data = os.read(sys.stdin.fileno(), 4096)\n        if not len(data):\n            break\n        sys.stdout.write(data)\n</code></pre>\n"}], "migrated_from": {"other_site": {"aliases": ["http://linux.stackexchange.com"], "markdown_extensions": ["Prettify"], "launch_date": 1294871917, "open_beta_date": 1282071600, "closed_beta_date": 1281466800, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/unix/Img/apple-touch-icon@2.png", "favicon_url": "https://cdn.sstatic.net/Sites/unix/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/unix/Img/apple-touch-icon.png", "audience": "users of Linux, FreeBSD and other Un*x-like operating systems", "site_url": "https://unix.stackexchange.com", "api_site_parameter": "unix", "logo_url": "https://cdn.sstatic.net/Sites/unix/Img/logo.png", "name": "Unix &amp; Linux", "site_type": "main_site"}, "on_date": 1504188373, "question_id": 389374}, "owner": {"reputation": 1259, "user_id": 1298540, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c33314f75786720f036152b7cb9e9f24?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1298540/michael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 18243, "favorite_count": 3, "accepted_answer_id": 45983604, "answer_count": 2, "score": 7, "last_activity_date": 1504203614, "creation_date": 1504135796, "last_edit_date": 1504190598, "question_id": 45983475, "link": "https://stackoverflow.com/questions/45983475/reading-stdin-line-at-a-time-in-python", "title": "Reading stdin line at a time in Python", "body": "<p>I am trying to test a particular chat program by sending a series of commands and capturing the output. </p>\n\n<p>How can I pass:</p>\n\n<pre><code>sleep 2\necho test\nsleep 2\necho test1\n</code></pre>\n\n<p>I have tried this:</p>\n\n<pre><code>(sleep 2; echo test; sleep 2; echo test1) | python3 test.py\n</code></pre>\n\n<p>but it just prints the first part while for the second I get nothing. It enters into an endless loop instead.</p>\n\n<p>the python program's code is:</p>\n\n<pre><code>import sys, select\n\nwhile True:\n  socket_list = [sys.stdin]\n  read_sockets, write_sockets, error_sockets = select.select(socket_list, [], [])\n  for sock in read_sockets:\n    message = sys.stdin.readline()\n    sys.stdout.write(\"&gt; %s: \")\n    sys.stdout.flush()\n</code></pre>\n\n<p>I should mentioned that this is not the complete program but it is the part where it helps recreate the exact same effect.</p>\n"}, {"tags": ["python", "python-requests", "mailgun"], "owner": {"reputation": 77, "user_id": 6906476, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d83ac52281a97550f4b8f17d7071c355?s=128&d=identicon&r=PG&f=1", "display_name": "freefly0313", "link": "https://stackoverflow.com/users/6906476/freefly0313"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1504135756, "creation_date": 1504135756, "question_id": 45971131, "link": "https://stackoverflow.com/questions/45971131/mailgun-send-emails-if-recipient-does-not-have-tag", "title": "Mailgun: send emails if recipient does not have tag", "body": "<p>I use Mailgun to send emails for my businesses and I've been struggling to find a way to send emails to certain recipients that do not have a specific tag. I've tried using the events api to see if can grab a list of all recipients that have certain tags using this:</p>\n\n<pre><code>def get_logs():\nreturn requests.get(\n    \"https://api.mailgun.net/v3/YOUR_DOMAIN_NAME/events\",\n    auth=(\"api\", \"YOUR_API_KEY\"),\n    params={\"tags\": \"indoctrination\"})\n</code></pre>\n\n<p>However this does not work because the api will not pull more than 100 records per call.</p>\n\n<p>I've also tried other variation of this where I will create a new mailing list and use that to try to track my campaigns instead of using tags but again I run into the 100 record limit.</p>\n\n<p>All I need to do here is send an email to my list based on what tags they have or don't have. It doesn't seem like it should be this complicated. Is there a better way of doing list segmentation?</p>\n\n<p>The Mailgun documentation is <a href=\"https://documentation.mailgun.com/en/latest/api_reference.html\" rel=\"nofollow noreferrer\">available here</a>.</p>\n"}, {"tags": ["python", "pandas", "dataframe", "nan"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1504135222, "post_id": 45971039, "comment_id": 78901273, "body": "<code>NA</code> will be parsed to <code>NaN</code> (<code>np.nan</code>) when your dataset is loaded."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1504138612, "post_id": 45971039, "comment_id": 78901921, "body": "You couldn&#39;t test this out yourself?"}, {"owner": {"reputation": 111, "user_id": 3062229, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/fe17b8bcba52dd91e6e1e0b13514182d?s=128&d=identicon&r=PG&f=1", "display_name": "user3062229", "link": "https://stackoverflow.com/users/3062229/user3062229"}, "edited": false, "score": 0, "creation_date": 1504149934, "post_id": 45971039, "comment_id": 78904300, "body": "i did a isnull check later and didnt find any. so i was confused. i&#39;ll test again."}], "answers": [{"tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": false, "score": 2, "last_activity_date": 1504139681, "last_edit_date": 1504139681, "creation_date": 1504135377, "answer_id": 45971083, "question_id": 45971039, "link": "https://stackoverflow.com/questions/45971039/parsing-na-entries-as-nan-values-when-reading-in-a-pandas-dataframe/45971083#45971083", "title": "Parsing &quot;NA&quot; entries as NaN values when reading in a pandas dataframe", "body": "<p>From the <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.read_csv.html\" rel=\"nofollow noreferrer\"><code>pd.read_csv</code></a> docs:</p>\n\n<blockquote>\n  <p><code>na_values</code> : scalar, <code>str</code>, <code>list</code>-like, or <code>dict</code>, default <code>None</code> </p>\n  \n  <p>Additional\n  strings to recognize as <code>NA</code>/<code>NaN</code>. If <code>dict</code> passed, specific per-column NA\n  values. By default the following values are interpreted as NaN: \u2018\u2019,\n  ... <strong>\u2018NA\u2019</strong>, ...`.</p>\n</blockquote>\n\n<p>Bold emphasis mine. These values are not tossed away, rather, they are converted to <code>NaN</code>. Pandas is smart enough to automatically recognise those values without you explicitly stating it. </p>\n"}], "owner": {"reputation": 111, "user_id": 3062229, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/fe17b8bcba52dd91e6e1e0b13514182d?s=128&d=identicon&r=PG&f=1", "display_name": "user3062229", "link": "https://stackoverflow.com/users/3062229/user3062229"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 817, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1504139681, "creation_date": 1504134926, "last_edit_date": 1504138425, "question_id": 45971039, "link": "https://stackoverflow.com/questions/45971039/parsing-na-entries-as-nan-values-when-reading-in-a-pandas-dataframe", "title": "Parsing &quot;NA&quot; entries as NaN values when reading in a pandas dataframe", "body": "<p>i am new to pandas. I have loaded csv using pandas.read_csv. i have tried not to specify dtype but it was way too slow. since it is a very large file, i also specified data type. however, sometimes in numeric columns, it contains \"NA\".  i have used na_values = ['NA'], will it affect my data frame? i still want to preserve these rows. my question is if i specify data type and add na_values = ['NA'], will NA be tossed away? if yes, how can i maintain similar process time without losing these na? thank you very much! </p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 3, "creation_date": 1504135001, "post_id": 45971038, "comment_id": 78901222, "body": "Are you trying to sort by the 6th last character? Yes, getting the 6th last character is easy, just use <code>x[-6]</code> where x is your string."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1504135060, "post_id": 45971038, "comment_id": 78901239, "body": "Just sort the list. Then  the last element is the largest."}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1504135764, "post_id": 45971038, "comment_id": 78901374, "body": "Well, Robert, care to clarify? You can&#39;t expect us to understand what you want if you don&#39;t clarify any doubts."}, {"owner": {"reputation": 3012, "user_id": 6741482, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/e2d07264d5857c8851212ac5c882039a?s=128&d=identicon&r=PG&f=1", "display_name": "pstatix", "link": "https://stackoverflow.com/users/6741482/pstatix"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1504135839, "post_id": 45971038, "comment_id": 78901390, "body": "I agree with @c\u1d0f\u029f\u1d05s\u1d18\u1d07\u1d07\u1d05 here, what is the overall goal? To print the file that is larger between the comparisons or to print the largest file in the iterable?"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1504138037, "post_id": 45971038, "comment_id": 78901799, "body": "It is unclear what you are trying to do. Please see <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>. It is usually good to be explicit about <i>what output you are expecting</i>."}], "answers": [{"tags": [], "owner": {"reputation": 15734, "user_id": 160665, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/70888c4c7063a4f8be70a01125e7cb74?s=128&d=identicon&r=PG", "display_name": "exhuma", "link": "https://stackoverflow.com/users/160665/exhuma"}, "is_accepted": false, "score": 0, "last_activity_date": 1504168158, "creation_date": 1504168158, "answer_id": 45976791, "question_id": 45971038, "link": "https://stackoverflow.com/questions/45971038/comparing-the-last-6th-character-of-the-elements-in-a-list/45976791#45976791", "title": "Comparing the last 6th character of the Elements in a List", "body": "<p>If I understood your answer correctly, you want to fetch the last filename after sorting the list. If this is the case, then the following code might help you. As you say you're new to Python, I've added plenty of comments which might help:</p>\n\n<pre><code># Let's first create a list of unsorted data.\n# In this case, (A, C, B) are not in lexicographic order.\nunsorted_data = [\n    'Report1.0REV_A.xlsx',\n    'Report1.0REV_C.xlsx',\n    'Report1.0REV_B.xlsx',\n]\n\n\n# The function \"pick_letter\" will be used later on. It is a very simple\n# function comprised of only one statement. That is a very good candidate for a\n# \"lambda expression\". But as you say that you are new to Python, I'll give two\n# examples below. One using \"lambda\", the other using the function\n# \"pick_letter\".\ndef pick_letter(value):\n    '''\n    This function takes a value and returns the 6th item from the end. The\n    value passed can be anythin that can be indexed, like strings or lists.\n    '''\n    return value[-6]\n\n\n# Sorting the input data using \"pick_letter\"\n#\n# \"sorted\" takes an optional argument \"key\" which holds a function. This\n# function will be called for each element in the list and must return\n# \"something\". The list will returned by this \"something\". In your case, you\n# want the 6th element from the end, so we use \"pick_letter\".\nsorted_data_1 = sorted(unsorted_data, key=pick_letter)\n\n\n# As mentioned above, the same can be achieved by a \"lambda\" expression. This\n# saves us the definition of the \"pick_letter\" function. Using \"lambdas\" is\n# debatable. They have no name, no doc-string and may be harder to understand.\n# But this case is *so* simple that it really is a prime candidate for a\n# lambda:\nsorted_data_2 = sorted(unsorted_data, key=lambda x: x[-6])\n\n\nprint('Unsorted data:', unsorted_data)\nprint('Sorted data (using pick_letter):', sorted_data_1)\nprint('Sorted data (using lambda):', sorted_data_2)\n\n# Now that it is sorted, you can pick the last element using [-1]:\nprint('Last element:', sorted_data_1[-1])\n\n\n# Apart from sorting, we can create a new list containing only the 6th\n# character from the end for each element. The code below is a so called\n# \"list comprehension\". It is a Python feature which allows you to quickly\n# create lists (and other similar collections) from other iterables. In\n# this case, the list will have the same ordering as the input \n# (unsorted_data)\ncharacters = [filename[-6] for filename in unsorted_data]\nprint('Characters:', characters)\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 8480107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/595370490bf89edef00e9f74913c7d46?s=128&d=identicon&r=PG&f=1", "display_name": "Robert", "link": "https://stackoverflow.com/users/8480107/robert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "closed_date": 1504168682, "answer_count": 1, "score": 3, "last_activity_date": 1504168158, "creation_date": 1504134916, "question_id": 45971038, "link": "https://stackoverflow.com/questions/45971038/comparing-the-last-6th-character-of-the-elements-in-a-list", "closed_reason": "Needs details or clarity", "title": "Comparing the last 6th character of the Elements in a List", "body": "<p>Pretty New at Python.</p>\n\n<p>I am currently trying to compare the return values of performing a glob.glob method on files in directory but have come to an obstacle in understanding of how to compare the 6th character from the end of each elements in unknown list.</p>\n\n<p>For instance the output of a <code>Output = glob.glob('Report1.0REV_*.xlsx')</code>\nwould return</p>\n\n<pre><code>['Report1.0REV_A.xlsx', 'Report1.0REV_B.xlsx', 'Report1.0REV_C.xlsx', etc]\n</code></pre>\n\n<p>But How would I compare the if I appended each file to get A > B, or C > B, or X >Y, then print the latest file?</p>\n\n<p>So far what can think of is writing a for loop with the length of the list but stuck with understanding how i can compare which is greater with the -6 character of each element of the list a then print that file. </p>\n\n<pre><code>for i in range(len(Output)):\n</code></pre>\n\n<p>Thank you for reading and your help!</p>\n"}, {"tags": ["python", "amazon-ec2", "pip", "virtualenv"], "comments": [{"owner": {"reputation": 770, "user_id": 7342781, "user_type": "registered", "profile_image": "https://graph.facebook.com/1291429514228526/picture?type=large", "display_name": "Simon Hobbs", "link": "https://stackoverflow.com/users/7342781/simon-hobbs"}, "edited": false, "score": 0, "creation_date": 1504139146, "post_id": 45971035, "comment_id": 78902011, "body": "Does it work with an absolute path?"}, {"owner": {"reputation": 1206, "user_id": 885312, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/beded0a38cc963593a98df7eed37767c?s=128&d=identicon&r=PG", "display_name": "trbabb", "link": "https://stackoverflow.com/users/885312/trbabb"}, "reply_to_user": {"reputation": 770, "user_id": 7342781, "user_type": "registered", "profile_image": "https://graph.facebook.com/1291429514228526/picture?type=large", "display_name": "Simon Hobbs", "link": "https://stackoverflow.com/users/7342781/simon-hobbs"}, "edited": false, "score": 0, "creation_date": 1504140073, "post_id": 45971035, "comment_id": 78902151, "body": "@SimonHobbs: No, because the absolute path is determined by the deployment server. It&#39;s different than on my machine, not under my control, and might change from deployment to deployment."}], "answers": [{"tags": [], "owner": {"reputation": 1858, "user_id": 7197281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17c04810ea8f251cdc6e82d9f05144da?s=128&d=identicon&r=PG&f=1", "display_name": "CloC", "link": "https://stackoverflow.com/users/7197281/cloc"}, "is_accepted": false, "score": 1, "last_activity_date": 1504144135, "creation_date": 1504144135, "answer_id": 45972034, "question_id": 45971035, "link": "https://stackoverflow.com/questions/45971035/deploying-a-custom-python-package-with-pip/45972034#45972034", "title": "Deploying a custom python package with `pip`", "body": "<p>To install your own python package from a git repo you might want to check <a href=\"https://stackoverflow.com/questions/16584552/how-to-state-in-requirements-txt-a-direct-github-source\">this post</a></p>\n\n<p>To sort out the credential issue, why not having git installed on the EC2? You could simply create an ssh key and share it with MyProject repository.</p>\n\n<p>I am using this solution on ECS instances deployed by Jenkins (with <a href=\"http://www.habitus.io/\" rel=\"nofollow noreferrer\">Habitus</a> to hide Jenkin's ssh keys while building the image) and it works fine for me!</p>\n"}], "owner": {"reputation": 1206, "user_id": 885312, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/beded0a38cc963593a98df7eed37767c?s=128&d=identicon&r=PG", "display_name": "trbabb", "link": "https://stackoverflow.com/users/885312/trbabb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1504187677, "creation_date": 1504134889, "last_edit_date": 1504187677, "question_id": 45971035, "link": "https://stackoverflow.com/questions/45971035/deploying-a-custom-python-package-with-pip", "title": "Deploying a custom python package with `pip`", "body": "<p>I have a custom Python package (call it <code>MyProject</code>) on my filesystem with a <code>setup.py</code> and a <code>requirements.txt</code>. This package needs to be used by a Flask server (which will be deployed on AWS/EC2/EB).</p>\n\n<p>In my Flask project directory, I create a <code>virtualenv</code> and run <code>pip install -e ../path/to/myProject</code>. </p>\n\n<p>But for some reason, <code>MyProject</code>'s upstream git repo shows up in <code>pip freeze</code>:</p>\n\n<pre><code>...\nllvmlite==0.19.0\n-e git+https://github.com/USERNAME/MYPROJECT.git@{some-git-hash}\npython-socketio==1.8.0\n...\n</code></pre>\n\n<p>The reference to git is a problem, because the repository is private and the deployment server does not (and should not, and will never) have credentials to access it. The deployment server also doesn't even have git installed (and it seems extremely problematic that <code>pip</code> assumes without my permission that it does). There is nothing in <code>MyProject</code>'s <code>requirements.txt</code> or <code>setup.py</code> that alludes to git, so I am not sure where the hell this is coming from. </p>\n\n<p>I can dupe the project to a subdirectory of the Flask project, and then put the following in <code>MyFlaskProject</code>'s requirements.txt:</p>\n\n<pre><code>...\nllvmlite==0.19.0\n./MyProject\npython-socketio==1.8.0\n...\n</code></pre>\n\n<p>But this doesn't work, because the path is taken as relative to the working directory of the <code>pip</code> process when it is run, not to <code>requirements.txt</code>. Indeed, it seems <a href=\"https://github.com/pypa/pip/issues/3772\" rel=\"nofollow noreferrer\">pip is broken in this respect</a>. In my case, EC2 runs its install scripts from some other directory (with a full path to requirements.txt specified), and as expected, this fails.</p>\n\n<p>What is the proper way to deploy a custom python package as a dependency of another project?</p>\n"}, {"tags": ["python", "statsmodels"], "comments": [{"owner": {"reputation": 2569, "user_id": 2147347, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/e4iCE.jpg?s=128&g=1", "display_name": "malioboro", "link": "https://stackoverflow.com/users/2147347/malioboro"}, "edited": false, "score": 0, "creation_date": 1504144185, "post_id": 45970988, "comment_id": 78903005, "body": "how do you import statespace?"}], "answers": [{"tags": [], "owner": {"reputation": 2148, "user_id": 3592827, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/c3Vfg.jpg?s=128&g=1", "display_name": "aless80", "link": "https://stackoverflow.com/users/3592827/aless80"}, "is_accepted": false, "score": 4, "last_activity_date": 1512105448, "creation_date": 1512105448, "answer_id": 47587063, "question_id": 45970988, "link": "https://stackoverflow.com/questions/45970988/attributeerror-for-sarimax-from-statsmodels-tsa-statespace/47587063#47587063", "title": "AttributeError for sarimax from statsmodels.tsa.statespace", "body": "<pre><code>import statsmodels.api as sm\nsm.tsa.statespace.SARIMAX(..)\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 8484842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b2dbe6810e81067fd27509511e94f4d?s=128&d=identicon&r=PG&f=1", "display_name": "Jessica H N", "link": "https://stackoverflow.com/users/8484842/jessica-h-n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2157, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1512105448, "creation_date": 1504134491, "last_edit_date": 1504146063, "question_id": 45970988, "link": "https://stackoverflow.com/questions/45970988/attributeerror-for-sarimax-from-statsmodels-tsa-statespace", "title": "AttributeError for sarimax from statsmodels.tsa.statespace", "body": "<p>I am trying to use </p>\n\n<pre><code>model_S = statespace.sarimax.SARIMAX(df['lnpd'], trend='n', order=(12,1,12), seasonal_order=(1,1,1,12))\n</code></pre>\n\n<p>Shows error:</p>\n\n<blockquote>\n  <p>AttributeError: 'module' object has no attribute 'sarimax'</p>\n</blockquote>\n\n<p>I just updated <code>statsmodels</code> to 0.8.0 and had no problem importing <code>statspace</code>. Does anyone have the same problem?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["python", "mysql", "file"], "comments": [{"owner": {"reputation": 859, "user_id": 8513103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d298d3271438be46aaff29495445a827?s=128&d=identicon&r=PG&f=1", "display_name": "sKwa", "link": "https://stackoverflow.com/users/8513103/skwa"}, "edited": false, "score": 1, "creation_date": 1504134446, "post_id": 45970850, "comment_id": 78901080, "body": "define  path without <code>~</code> or use in <code>os.path.expanduser</code>."}], "answers": [{"comments": [{"owner": {"reputation": 1052, "user_id": 8474432, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/71c628c0ad8557384540efe8c7cdab1e?s=128&d=identicon&r=PG&f=1", "display_name": "curious_cosmo", "link": "https://stackoverflow.com/users/8474432/curious-cosmo"}, "edited": false, "score": 0, "creation_date": 1504134009, "post_id": 45970924, "comment_id": 78900940, "body": "Does the wildcard method work when I do not have a file extension? As seen in my question the format for the filenames is &quot;somethinglogfile&quot; but there is no extension."}, {"owner": {"reputation": 1565, "user_id": 5093377, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/C9O8p.jpg?s=128&g=1", "display_name": "Milan Velebit", "link": "https://stackoverflow.com/users/5093377/milan-velebit"}, "edited": false, "score": 0, "creation_date": 1504134158, "post_id": 45970924, "comment_id": 78900986, "body": "You can ignore the extension using .endswith() with a short bit of logic beforehand. EDIT: Or just use the answer provided above."}, {"owner": {"reputation": 1052, "user_id": 8474432, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/71c628c0ad8557384540efe8c7cdab1e?s=128&d=identicon&r=PG&f=1", "display_name": "curious_cosmo", "link": "https://stackoverflow.com/users/8474432/curious-cosmo"}, "edited": false, "score": 0, "creation_date": 1504134613, "post_id": 45970924, "comment_id": 78901122, "body": "Because all the file names end in the word logfile. The problem was actually the ~, so now it works."}, {"owner": {"reputation": 1133, "user_id": 7790438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd56fe083be9265767941c6a049da6da?s=128&d=identicon&r=PG", "display_name": "Fady Saad", "link": "https://stackoverflow.com/users/7790438/fady-saad"}, "edited": false, "score": 0, "creation_date": 1504134648, "post_id": 45970924, "comment_id": 78901130, "body": "glad to help you."}, {"owner": {"reputation": 2142, "user_id": 7923124, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Y53Pw.jpg?s=128&g=1", "display_name": "Chetan_Vasudevan", "link": "https://stackoverflow.com/users/7923124/chetan-vasudevan"}, "edited": false, "score": 0, "creation_date": 1504134653, "post_id": 45970924, "comment_id": 78901132, "body": "filenames = glob.glob(path + &#39;/*.txt&#39;) assuming your logfile is a text file"}], "tags": [], "owner": {"reputation": 1133, "user_id": 7790438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd56fe083be9265767941c6a049da6da?s=128&d=identicon&r=PG", "display_name": "Fady Saad", "link": "https://stackoverflow.com/users/7790438/fady-saad"}, "is_accepted": true, "score": 2, "last_activity_date": 1504133930, "creation_date": 1504133930, "answer_id": 45970924, "question_id": 45970850, "link": "https://stackoverflow.com/questions/45970850/running-python-script-on-multiple-files/45970924#45970924", "title": "Running python script on multiple files", "body": "<p>Try the <a href=\"https://docs.python.org/2/library/glob.html\" rel=\"nofollow noreferrer\">glob</a> module to get all files like this:</p>\n\n<pre><code>import glob\npath = 'C:/Users/telli/Desktop/Test Shapes/Shapes/Squares'\nfilenames = glob.glob(path + '/*.gif')\nfor filename in filenames:\n    # Do something\n</code></pre>\n"}], "owner": {"reputation": 1052, "user_id": 8474432, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/71c628c0ad8557384540efe8c7cdab1e?s=128&d=identicon&r=PG&f=1", "display_name": "curious_cosmo", "link": "https://stackoverflow.com/users/8474432/curious-cosmo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 373, "favorite_count": 0, "accepted_answer_id": 45970924, "answer_count": 1, "score": -1, "last_activity_date": 1504134355, "creation_date": 1504133458, "last_edit_date": 1504134355, "question_id": 45970850, "link": "https://stackoverflow.com/questions/45970850/running-python-script-on-multiple-files", "title": "Running python script on multiple files", "body": "<p>I have a python script that reads a file and extracts certain data from it, then stores the data in a dictionary, and finally inserts that into a mysql table. The first line of my code is where I enter in my filename:</p>\n\n<pre><code>filename = \"examplelogfile\"\n</code></pre>\n\n<p>which is a text file, and is later referred to as 'filename'. But I have to run this code on almost a thousand different files of this type, and I've moved all of these files to a certain server (I'm not running the script in terminal since I need to run it on the same server where the mysql database is located). What's the easiest way to run my code on all of the files?</p>\n\n<p>Edit: I have tried this but it isn't giving me any output (it is supposed to print all the dictionaries):</p>\n\n<pre><code>import glob\nfiles = glob.glob('~/Desktop/pythoncode/*logfile')\nfor filename in files:\n    rest of code\n    print dict\n</code></pre>\n"}, {"tags": ["python", "sql", "sqlite"], "answers": [{"comments": [{"owner": {"reputation": 229, "user_id": 6924670, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/aaf194fdedc62341b8ff998b85aebd10?s=128&d=identicon&r=PG&f=1", "display_name": "antonioag", "link": "https://stackoverflow.com/users/6924670/antonioag"}, "edited": false, "score": 0, "creation_date": 1504134133, "post_id": 45970854, "comment_id": 78900978, "body": "I got a traceback error: sqlite3.OperationalError: near &quot;%&quot;: syntax error"}, {"owner": {"reputation": 142796, "user_id": 42346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZikEw.jpg?s=128&g=1", "display_name": "mechanical_meat", "link": "https://stackoverflow.com/users/42346/mechanical-meat"}, "reply_to_user": {"reputation": 229, "user_id": 6924670, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/aaf194fdedc62341b8ff998b85aebd10?s=128&d=identicon&r=PG&f=1", "display_name": "antonioag", "link": "https://stackoverflow.com/users/6924670/antonioag"}, "edited": false, "score": 0, "creation_date": 1504134334, "post_id": 45970854, "comment_id": 78901044, "body": "@antonioag: oh I see now you&#39;re using SQLite3. The question was titled and tagged with MySQL so that confused me. Please see edited answer which should work."}, {"owner": {"reputation": 229, "user_id": 6924670, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/aaf194fdedc62341b8ff998b85aebd10?s=128&d=identicon&r=PG&f=1", "display_name": "antonioag", "link": "https://stackoverflow.com/users/6924670/antonioag"}, "edited": false, "score": 0, "creation_date": 1504136017, "post_id": 45970854, "comment_id": 78901441, "body": "Sorry for the wrong tag and thank you for your time. Anyway, no more errors but the file created has 0 rows"}, {"owner": {"reputation": 142796, "user_id": 42346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZikEw.jpg?s=128&g=1", "display_name": "mechanical_meat", "link": "https://stackoverflow.com/users/42346/mechanical-meat"}, "reply_to_user": {"reputation": 229, "user_id": 6924670, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/aaf194fdedc62341b8ff998b85aebd10?s=128&d=identicon&r=PG&f=1", "display_name": "antonioag", "link": "https://stackoverflow.com/users/6924670/antonioag"}, "edited": false, "score": 0, "creation_date": 1504136107, "post_id": 45970854, "comment_id": 78901456, "body": "Make sure you do <code>connection.commit()</code> after the INSERT statement."}], "tags": [], "owner": {"reputation": 142796, "user_id": 42346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZikEw.jpg?s=128&g=1", "display_name": "mechanical_meat", "link": "https://stackoverflow.com/users/42346/mechanical-meat"}, "is_accepted": true, "score": 7, "last_activity_date": 1504134302, "last_edit_date": 1504134302, "creation_date": 1504133496, "answer_id": 45970854, "question_id": 45970816, "link": "https://stackoverflow.com/questions/45970816/python-list-into-sql-column/45970854#45970854", "title": "Python list into SQL column", "body": "<p>You can use <a href=\"https://docs.python.org/2/library/functions.html#zip\" rel=\"noreferrer\"><code>zip()</code></a> and <a href=\"http://mysql-python.sourceforge.net/MySQLdb.html\" rel=\"noreferrer\"><code>executemany()</code></a> like so:</p>\n\n<pre><code>cursor.executemany(\"\"\"INSERT INTO peopleList (Name, Surname, Car) VALUES (?,?,?)\"\"\", \n                   zip(name,surname,car))\n</code></pre>\n"}], "owner": {"reputation": 229, "user_id": 6924670, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/aaf194fdedc62341b8ff998b85aebd10?s=128&d=identicon&r=PG&f=1", "display_name": "antonioag", "link": "https://stackoverflow.com/users/6924670/antonioag"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1655, "favorite_count": 0, "accepted_answer_id": 45970854, "answer_count": 1, "score": 0, "last_activity_date": 1504145449, "creation_date": 1504133199, "last_edit_date": 1504145449, "question_id": 45970816, "link": "https://stackoverflow.com/questions/45970816/python-list-into-sql-column", "title": "Python list into SQL column", "body": "<p>I have two or more lists, for example:</p>\n\n<pre><code>    name = ['Chris', 'John', 'Louis']\n    surname = ['Brown', 'Green', 'Red']\n    car = ['Audi', 'Mercedes', 'Ferrari']\n</code></pre>\n\n<p>What I'd like to achieve is creating an sql database where every list is a column so that it would be something like: \"Chris\" in the first line, \"Brown\" in the second line and \"Audi\" in the third one - and so on. My actual python script is the following one but I can't figure out how I can save the list:</p>\n\n<pre><code>    connection = sqlite3.connect(\"name.db\")                       \n    cursor = connection.cursor()                                  \n    cursor.execute(\"DROP TABLE IF EXISTS peopleList\")           \n    cursor.execute(\"CREATE TABLE peopleList(Name TEXT, Surname TEXT, Car TEXT)\")\n</code></pre>\n"}, {"tags": ["python", "tensorflow", "tensorflow-serving", "tensorflow-gpu"], "comments": [{"owner": {"reputation": 7854, "user_id": 1399222, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/3eaecaf22a77e4389a2aa095cd164fdf?s=128&d=identicon&r=PG", "display_name": "rhaertel80", "link": "https://stackoverflow.com/users/1399222/rhaertel80"}, "edited": false, "score": 0, "creation_date": 1505314850, "post_id": 45970775, "comment_id": 79364505, "body": "Are you using the tf.estimator framework?"}], "answers": [{"tags": [], "owner": {"reputation": 754, "user_id": 4922660, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/620ddbb5cd782a0e157441a963361160?s=128&d=identicon&r=PG&f=1", "display_name": "Tianjin Gu", "link": "https://stackoverflow.com/users/4922660/tianjin-gu"}, "is_accepted": false, "score": 0, "last_activity_date": 1504156428, "creation_date": 1504156428, "answer_id": 45973637, "question_id": 45970775, "link": "https://stackoverflow.com/questions/45970775/serving-tensorflow-model-trained-with-files/45973637#45973637", "title": "Serving tensorflow model trained with files", "body": "<p>Actually <code>TensorFlow</code> accept a <code>Tensor</code> use as a <code>placeholder</code>, for example:</p>\n\n<pre><code>q = tf.FIFOQueue(10, dtypes=tf.int32)\na = q.dequeue()\nw = tf.constant(2)\nc = a * w\nsess = tf.Session()\nsess.run(c, feed_dict={a:1})\n</code></pre>\n\n<p>So the input does not have to be a <code>placeholder</code> when exporting model, you can make any tensor after dequeue as input for your Serving.</p>\n"}], "owner": {"reputation": 1423, "user_id": 396323, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4385280c57913932743257f81e50b987?s=128&d=identicon&r=PG", "display_name": "Alfred", "link": "https://stackoverflow.com/users/396323/alfred"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1504156428, "creation_date": 1504132981, "question_id": 45970775, "link": "https://stackoverflow.com/questions/45970775/serving-tensorflow-model-trained-with-files", "title": "Serving tensorflow model trained with files", "body": "<p>Curious if anyone has the similar use cases as mine:</p>\n\n<p>My tensor flow model is trained with tfrecord files and <a href=\"https://www.tensorflow.org/api_guides/python/reading_data#creating_threads_to_prefetch_using_queuerunner_objects\" rel=\"nofollow noreferrer\">queue runner</a>. As such the graph does not use placeholders.</p>\n\n<p>Now how can I save the model and service it online? As during serving, we need feed the requested data into the graph. If there is no placeholder, then we have no place to feed.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "pandas", "dataframe", "nan"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1504133287, "post_id": 45970751, "comment_id": 78900750, "body": "Is it guaranteed that NaNs are located in contiguous cells?"}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1504133367, "post_id": 45970751, "comment_id": 78900766, "body": "@c\u1d0f\u029f\u1d05s\u1d18\u1d07\u1d07\u1d05 sometime it will be 1 NaN 2 NaN"}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1504133931, "post_id": 45970751, "comment_id": 78900921, "body": "Aren&#39;t you shifting/pushing NaNs to the right rather for each row?"}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "reply_to_user": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1504134008, "post_id": 45970751, "comment_id": 78900939, "body": "@Divakar Yes~ Make the notnull value to the left ~"}, {"owner": {"reputation": 3807, "user_id": 8565438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pgbqc.jpg?s=128&g=1", "display_name": "zabop", "link": "https://stackoverflow.com/users/8565438/zabop"}, "edited": false, "score": 0, "creation_date": 1598129533, "post_id": 45970751, "comment_id": 112359236, "body": "This works better if I include a pd.Series, so I don&#39;t have to deal with lists: .apply(lambda x : pd.Series(x[x.notnull()].values.tolist()+x[x.isnull()].value&zwnj;&#8203;s.tolist()),1)"}], "answers": [{"comments": [{"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1504133335, "post_id": 45970826, "comment_id": 78900759, "body": "I should make it more clear, some time it will be <code>1 NaN 2 NaN</code>, still a nice one !:)"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1504133389, "post_id": 45970826, "comment_id": 78900773, "body": "@Wen Added another solution."}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 1, "creation_date": 1504133482, "post_id": 45970826, "comment_id": 78900799, "body": "Dude, you kill it ! I was totally forgot <code>sorted keys</code> let me test it with my real data"}, {"owner": {"reputation": 423, "user_id": 10858691, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fmYSLY2fD0E/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbSmJpGprNawDUpFgBVjcmb0W5W9g/mo/photo.jpg?sz=128", "display_name": "MasayoMusic", "link": "https://stackoverflow.com/users/10858691/masayomusic"}, "edited": false, "score": 0, "creation_date": 1567401932, "post_id": 45970826, "comment_id": 101940358, "body": "Hi. This doesn&#39;t seem to work with multi-index? It converts my dataframe into a series."}], "tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": false, "score": 4, "last_activity_date": 1504133851, "last_edit_date": 1504133851, "creation_date": 1504133240, "answer_id": 45970826, "question_id": 45970751, "link": "https://stackoverflow.com/questions/45970751/shift-nans-to-the-end-of-their-respective-rows/45970826#45970826", "title": "Shift NaNs to the end of their respective rows", "body": "<p>Your <s>best</s> easiest option is to use <code>sorted</code> on <code>df.apply/df.transform</code> and sort by nullity.</p>\n\n<pre><code>df = df.apply(lambda x: sorted(x, key=pd.isnull), 1)\ndf\n     0    1    2\n0  0.0  1.0  2.0\n1  1.0  2.0  NaN\n2  2.0  NaN  NaN\n</code></pre>\n\n<p>You may also pass <code>np.isnan</code> to the <code>key</code> argument.</p>\n"}, {"comments": [{"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "reply_to_user": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1504134074, "post_id": 45970911, "comment_id": 78900959, "body": "@Wen Would be nice to know the kind of timings you get on your dataset."}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1504134939, "post_id": 45970911, "comment_id": 78901208, "body": "Your solution is faster than others, Thank you for your assistant!"}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "reply_to_user": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1504135004, "post_id": 45970911, "comment_id": 78901223, "body": "@Wen Would have loved some kind of timing figures on your mentioned <code>(54812040, 1522)</code> dataset :) Though I am not sure how you are holding such a huge dataset!"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1504135133, "post_id": 45970911, "comment_id": 78901253, "body": "Yeah, I don&#39;t think <code>sorted</code> holds a candle to numpy on 54 <i><b>MILLION</b></i> data points."}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1504135484, "post_id": 45970911, "comment_id": 78901325, "body": "@c\u1d0f\u029f\u1d05s\u1d18\u1d07\u1d07\u1d05 Yup, pandas apply is known for convenience from what little I know about it."}, {"owner": {"reputation": 3807, "user_id": 8565438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pgbqc.jpg?s=128&g=1", "display_name": "zabop", "link": "https://stackoverflow.com/users/8565438/zabop"}, "edited": false, "score": 0, "creation_date": 1598128593, "post_id": 45970911, "comment_id": 112358990, "body": "This is what I get: TypeError: ufunc &#39;isnan&#39; not supported for the input types, and the inputs could not be safely coerced to any supported types according to the casting rule &#39;&#39;safe&#39;&#39;"}, {"owner": {"reputation": 3807, "user_id": 8565438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pgbqc.jpg?s=128&g=1", "display_name": "zabop", "link": "https://stackoverflow.com/users/8565438/zabop"}, "edited": false, "score": 0, "creation_date": 1598128711, "post_id": 45970911, "comment_id": 112359022, "body": "The original apply() method in the OP works though :)"}], "tags": [], "owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "is_accepted": true, "score": 7, "last_activity_date": 1504134705, "last_edit_date": 1504134705, "creation_date": 1504133866, "answer_id": 45970911, "question_id": 45970751, "link": "https://stackoverflow.com/questions/45970751/shift-nans-to-the-end-of-their-respective-rows/45970911#45970911", "title": "Shift NaNs to the end of their respective rows", "body": "<p>Here's a NumPy solution using <a href=\"https://stackoverflow.com/a/44559180/\"><code>justify</code></a> -</p>\n\n<pre><code>In [455]: df\nOut[455]: \n     0    1    2\n0  0.0  1.0  2.0\n1  NaN  1.0  2.0\n2  NaN  NaN  2.0\n\nIn [456]: pd.DataFrame(justify(df.values, invalid_val=np.nan, axis=1, side='left'))\nOut[456]: \n     0    1    2\n0  0.0  1.0  2.0\n1  1.0  2.0  NaN\n2  2.0  NaN  NaN\n</code></pre>\n\n<p>If you want to save memory, assign it back instead -</p>\n\n<pre><code>df[:] = justify(df.values, invalid_val=np.nan, axis=1, side='left')\n</code></pre>\n"}], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1361, "favorite_count": 3, "accepted_answer_id": 45970911, "answer_count": 2, "score": 6, "last_activity_date": 1523535101, "creation_date": 1504132897, "last_edit_date": 1523535101, "question_id": 45970751, "link": "https://stackoverflow.com/questions/45970751/shift-nans-to-the-end-of-their-respective-rows", "title": "Shift NaNs to the end of their respective rows", "body": "<p>I have a DataFrame like :</p>\n\n<pre><code>     0    1    2\n0  0.0  1.0  2.0\n1  NaN  1.0  2.0\n2  NaN  NaN  2.0\n</code></pre>\n\n<hr>\n\n<p>What I want to get is </p>\n\n<pre><code>Out[116]: \n     0    1    2\n0  0.0  1.0  2.0\n1  1.0  2.0  NaN\n2  2.0  NaN  NaN\n</code></pre>\n\n<hr>\n\n<p>This is my approach as of now.</p>\n\n<pre><code>df.apply(lambda x : (x[x.notnull()].values.tolist()+x[x.isnull()].values.tolist()),1)\nOut[117]: \n     0    1    2\n0  0.0  1.0  2.0\n1  1.0  2.0  NaN\n2  2.0  NaN  NaN\n</code></pre>\n\n<hr>\n\n<p>Is there any efficient way to achieve this ? <code>apply</code> Here is way to slow .\nThank you for your assistant!:) </p>\n\n<hr>\n\n<p>My real data size</p>\n\n<pre><code>df.shape\nOut[117]: (54812040, 1522)\n</code></pre>\n"}, {"tags": ["python", "windows", "python-2.7"], "comments": [{"owner": {"reputation": 15161, "user_id": 4338920, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/AHhiC.png?s=128&g=1", "display_name": "Malik Brahimi", "link": "https://stackoverflow.com/users/4338920/malik-brahimi"}, "edited": false, "score": 3, "creation_date": 1504134101, "post_id": 45970706, "comment_id": 78900968, "body": "Just delete the <code>C:\\Python27</code> folder and use CCleaner to delete old registry files."}, {"owner": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "edited": false, "score": 0, "creation_date": 1504149503, "post_id": 45970706, "comment_id": 78904194, "body": "I&#39;d note that it shouldn&#39;t be necessary to remove an older version of Python just to use a newer version. If you have the <code>py.exe</code> helper program (which is included with Python 3.6), it will pick the right version for you if you put an appropriate &quot;shebang&quot; line at the start of your files. See <a href=\"https://docs.python.org/3/using/windows.html#python-launcher-for-windows\" rel=\"nofollow noreferrer\">the docs</a> for more details."}], "owner": {"reputation": 29, "user_id": 7892352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15ae64bf23b65600e3f75e49aaa37eeb?s=128&d=identicon&r=PG&f=1", "display_name": "James Howard", "link": "https://stackoverflow.com/users/7892352/james-howard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1504143414, "creation_date": 1504132569, "last_edit_date": 1504143414, "question_id": 45970706, "link": "https://stackoverflow.com/questions/45970706/unable-to-delete-python-2-7", "title": "Unable to delete python 2.7", "body": "<p>I am attempting to delete Python 2.7 so I can use 3.6 and when I go to delete it from <code>appwiz.cpl</code> it tells me: </p>\n\n<blockquote>\n  <p>There is a problem with this Windows Installer package. A program run\n  as a part of the setup did not finish as expected. Contact your\n  support personnel or package vendor.</p>\n</blockquote>\n\n<p>I have already deleted the path from the environmental variables.</p>\n"}, {"tags": ["python", "excel", "linux"], "comments": [{"owner": {"reputation": 25463, "user_id": 5003756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8BUMb.jpg?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/5003756/james"}, "edited": false, "score": 0, "creation_date": 1504136535, "post_id": 45970695, "comment_id": 78901528, "body": "What format are the spread sheets saved in?  CSV, XLSX?"}, {"owner": {"reputation": 183, "user_id": 5700205, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/b41d70d9b7c3d2b6e72f9d4dfea61d2a?s=128&d=identicon&r=PG&f=1", "display_name": "rrene", "link": "https://stackoverflow.com/users/5700205/rrene"}, "reply_to_user": {"reputation": 25463, "user_id": 5003756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8BUMb.jpg?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/5003756/james"}, "edited": false, "score": 0, "creation_date": 1504137926, "post_id": 45970695, "comment_id": 78901776, "body": "I can have either of these, CSV or XLSX"}], "answers": [{"comments": [{"owner": {"reputation": 183, "user_id": 5700205, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/b41d70d9b7c3d2b6e72f9d4dfea61d2a?s=128&d=identicon&r=PG&f=1", "display_name": "rrene", "link": "https://stackoverflow.com/users/5700205/rrene"}, "edited": false, "score": 0, "creation_date": 1504227119, "post_id": 45971789, "comment_id": 78943973, "body": "Running the script, gives out the below error, even with the quatation marks on the file name: ./pythonscript.py: line 4: syntax error near unexpected token <code>(&#39; .&#47;pythonscript.py: line 4: </code>b1 = xlrd.open_workbook(MondayList.xlsx)&#39;"}, {"owner": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "reply_to_user": {"reputation": 183, "user_id": 5700205, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/b41d70d9b7c3d2b6e72f9d4dfea61d2a?s=128&d=identicon&r=PG&f=1", "display_name": "rrene", "link": "https://stackoverflow.com/users/5700205/rrene"}, "edited": false, "score": 0, "creation_date": 1504228275, "post_id": 45971789, "comment_id": 78944158, "body": "I think you may need to add quotes around your file name, like this: <code>b1 = xlrd.open_workbook(&quot;MondayList.xlsx&quot;)</code>"}], "tags": [], "owner": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "is_accepted": true, "score": 0, "last_activity_date": 1504141902, "creation_date": 1504141902, "answer_id": 45971789, "question_id": 45970695, "link": "https://stackoverflow.com/questions/45970695/what-is-the-easiest-and-fastest-way-to-compare-two-spreadsheet-files-and-extract/45971789#45971789", "title": "What is the easiest and fastest way to compare two spreadsheet files and extract maching matching data?", "body": "<p>This may work, using the <a href=\"http://github.com/python-excel/xlrd\" rel=\"nofollow noreferrer\">xlrd</a> package:</p>\n\n<pre><code>import xlrd\n\n# open the two spreadsheets\nb1 = xlrd.open_workbook(\"Spreadsheet 1.xlsx\")\nb2 = xlrd.open_workbook(\"Spreadsheet 2.xlsx\")\n\n# get the first sheet from each spreadsheet\nsh1 = b1.sheet_by_index(0) \nsh2 = b2.sheet_by_index(0)\n\n# for each sheet, read each row \nfor rx1 in range(sh1.nrows):\n    for rx2 in range(sh2.nrows):\n        # find cell values in spreadsheet 2's column 2 that \n        #   match the cell value in spreadsheet 1's column 1   \n        if sh1.row(rx1)[0].value == sh2.row(rx2)[1].value:\n            # print the `id` from spreadsheet 2 for this matching row\n            print(sh2.row(rx2)[0].value)\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>10747\n10727\n10838\n10487\n</code></pre>\n\n<p>Surprisingly its fairly short, done in 9 lines of code.\nHope this helps.</p>\n"}], "owner": {"reputation": 183, "user_id": 5700205, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/b41d70d9b7c3d2b6e72f9d4dfea61d2a?s=128&d=identicon&r=PG&f=1", "display_name": "rrene", "link": "https://stackoverflow.com/users/5700205/rrene"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 300, "favorite_count": 0, "accepted_answer_id": 45971789, "answer_count": 1, "score": 0, "last_activity_date": 1562591380, "creation_date": 1504132519, "last_edit_date": 1562591380, "question_id": 45970695, "link": "https://stackoverflow.com/questions/45970695/what-is-the-easiest-and-fastest-way-to-compare-two-spreadsheet-files-and-extract", "title": "What is the easiest and fastest way to compare two spreadsheet files and extract maching matching data?", "body": "<p>I have got two spreadsheet with me, Spreadsheet 1 and Spreadsheet 2.I need to extract data(rows) from spreadsheet 2 that matches spreadsheet 1. Ideally I need to get the IDs from spreadsheet 2 that has matching site names to spreadsheet 1.</p>\n\n<pre><code>Spreadsheet 1:\n\nSite Name : \n10410_DL01_Patels_Foodmarket      \n10700_DL01_CD_Toronta \n110190_DL13__Jonny_Mall \n110300_DL13_Ezy_Mart    \nCONTINUED\n\n\nSpreadsheet 2:\n\nID         Site Name                         Address     Upgrade\n10747     10410_DL01_Patels_Foodmarket       *********   *********\n32544     104658_D_Torano_fedf               ********    *********\n84562     103894_Girngsdfj                   ********    ********   \n10727     10700_DL01_CD_Toronta              ********    *********\n42344     104658_D_Torano_fedf               ********    *********\n65465     103894_Girngsdfj                   ********    ********   \n32544     104658_D_Torano_fedf               ********    *********\n84562     103894_Girngsdfj                   ********    ********   \n10838     110190_DL13__Jonny_Mall            ********    *********\n10487     110300_DL13_Ezy_Mart               ********    *********\nCONTINUED\n</code></pre>\n"}, {"tags": ["python", "list", "dictionary"], "comments": [{"owner": {"reputation": 19411, "user_id": 6640099, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/tf1sO.jpg?s=128&g=1", "display_name": "Christian Dean", "link": "https://stackoverflow.com/users/6640099/christian-dean"}, "edited": false, "score": 3, "creation_date": 1504132455, "post_id": 45970654, "comment_id": 78900534, "body": "I can&#39;t reproduce your output. I&#39;m not getting any dicts."}, {"owner": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "edited": false, "score": 2, "creation_date": 1504132521, "post_id": 45970654, "comment_id": 78900548, "body": "your <code>dicts</code> is almost assuredly corrupted."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 4, "creation_date": 1504132573, "post_id": 45970654, "comment_id": 78900559, "body": "Cannot reproduce. I&#39;m getting what you should, or rather, what you should expect."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1504132758, "post_id": 45970654, "comment_id": 78900620, "body": "Yeah, <code>print(dicts)</code> should show you the issue. Note, you&#39;ve definied <code>dicts</code> on input <code>1</code>, but you are showing the output <code>25</code>, so <i>something</i> is happening in-between. Also, I&#39;m pretty sure what you pasted in <code>1</code> should throw a syntax-error..."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 4, "creation_date": 1504132942, "post_id": 45970654, "comment_id": 78900668, "body": "Also, note the presence of the recursive <code>0: {...}</code>, which suggests you&#39;ve done something like: <code>dicts[0][0] = dicts[0]</code> followed by something like <code>dicts[3][0] = dicts[0]</code>"}, {"owner": {"reputation": 9372, "user_id": 4585963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8Yzwc.jpg?s=128&g=1", "display_name": "hilberts_drinking_problem", "link": "https://stackoverflow.com/users/4585963/hilberts-drinking-problem"}, "edited": false, "score": 2, "creation_date": 1504133024, "post_id": 45970654, "comment_id": 78900690, "body": "Independently, have you considered <code>csv.DictWriter</code>?"}, {"owner": {"reputation": 6124, "user_id": 461887, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/73a86b3136bfdda99045ba5de86dd9ec?s=128&d=identicon&r=PG", "display_name": "sayth", "link": "https://stackoverflow.com/users/461887/sayth"}, "reply_to_user": {"reputation": 9372, "user_id": 4585963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8Yzwc.jpg?s=128&g=1", "display_name": "hilberts_drinking_problem", "link": "https://stackoverflow.com/users/4585963/hilberts-drinking-problem"}, "edited": false, "score": 0, "creation_date": 1504134329, "post_id": 45970654, "comment_id": 78901039, "body": "@YakymPirozhenko          that is where I was headed."}], "answers": [{"comments": [{"owner": {"reputation": 6124, "user_id": 461887, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/73a86b3136bfdda99045ba5de86dd9ec?s=128&d=identicon&r=PG", "display_name": "sayth", "link": "https://stackoverflow.com/users/461887/sayth"}, "edited": false, "score": 1, "creation_date": 1504135199, "post_id": 45970920, "comment_id": 78901268, "body": "Because I use python3 your eumerate is good but I got it working using  for i, entry in enumerate(dicts):      print(&quot;{0}, {1}&quot;.format(entry[&#39;name&#39;], entry[&#39;age&#39;]))"}], "tags": [], "owner": {"reputation": 734, "user_id": 5755464, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-Vf68fbcrMOw/AAAAAAAAAAI/AAAAAAAABI0/nQuZ9pogv1s/photo.jpg?sz=128", "display_name": "Rudrani Angira", "link": "https://stackoverflow.com/users/5755464/rudrani-angira"}, "is_accepted": false, "score": 1, "last_activity_date": 1504134659, "last_edit_date": 1504134659, "creation_date": 1504133912, "answer_id": 45970920, "question_id": 45970654, "link": "https://stackoverflow.com/questions/45970654/values-in-list-of-dicts-python-3/45970920#45970920", "title": "Values in List of Dicts - Python 3", "body": "<p>Why not just enumerate on the list and extract the values:</p>\n\n<pre><code>for i, entry in enumerate(dicts):\n...             print entry['name'],\" \",entry['age']\n</code></pre>\n\n<p>And then the values can be written to the csv file</p>\n\n<pre><code>with open('dict.csv', 'wb') as csv_file:\n...         writer = csv.writer(csv_file)\n...         for i, entry in enumerate(dicts):\n...             writer.writerow([entry['name'],entry['age']])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2840, "user_id": 3775493, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m150V.jpg?s=128&g=1", "display_name": "Nuno Andr&#233;", "link": "https://stackoverflow.com/users/3775493/nuno-andr%c3%a9"}, "is_accepted": false, "score": 1, "last_activity_date": 1504136281, "creation_date": 1504136281, "answer_id": 45971192, "question_id": 45970654, "link": "https://stackoverflow.com/questions/45970654/values-in-list-of-dicts-python-3/45971192#45971192", "title": "Values in List of Dicts - Python 3", "body": "<p>You can re-construct the dict to meet your needs:</p>\n\n<pre><code>dicts = [{'key': k, 'value': v} for item in dicts for k,v in item.items()]\n\nfor item in dicts:\n    print(\"Key: {key} and Value: {value}\".format(**item))\n</code></pre>\n\n<p>But, to write them directly to csv, there is a better way:</p>\n\n<pre><code>import csv\n\ndicts = [{'key': k, 'value': v} for item in dicts for k,v in item.items()]\n\nwith open('dicts.csv', 'wb') as f:\n    dict_writer = csv.DictWriter(f, dicts[0].keys())\n    dict_writer.writeheader()\n    dict_writer.writerows(dicts)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 92, "user_id": 9494881, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Doctor Core", "link": "https://stackoverflow.com/users/9494881/doctor-core"}, "is_accepted": false, "score": 0, "last_activity_date": 1522822539, "last_edit_date": 1522822539, "creation_date": 1522822162, "answer_id": 49643958, "question_id": 45970654, "link": "https://stackoverflow.com/questions/45970654/values-in-list-of-dicts-python-3/49643958#49643958", "title": "Values in List of Dicts - Python 3", "body": "<p>You can convert a list of same-keys dicts into a dict with the same keys and values are lists of the original values in original order:</p>\n\n<pre><code>dicts = [\n    {\"name\": \"Tom\", \"age\": 10},\n    {\"name\": \"Pam\", \"age\": 7},\n    {\"name\": \"Dick\", \"age\": 12},\n]\n\ndictoflists = {k: [d[k] for d in dicts] for k in dicts[0].keys()}\n</code></pre>\n"}], "owner": {"reputation": 6124, "user_id": 461887, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/73a86b3136bfdda99045ba5de86dd9ec?s=128&d=identicon&r=PG", "display_name": "sayth", "link": "https://stackoverflow.com/users/461887/sayth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2080, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1522822539, "creation_date": 1504132301, "last_edit_date": 1504135966, "question_id": 45970654, "link": "https://stackoverflow.com/questions/45970654/values-in-list-of-dicts-python-3", "title": "Values in List of Dicts - Python 3", "body": "<p>I want to extract a list of dictionary values so I can write them to csv.</p>\n\n<p>Using the info in this previous <a href=\"https://stackoverflow.com/a/8653572/461887\">SO question</a> I am attempting to replicate for all key, values.</p>\n\n<pre><code>In [41]: dicts = [\n    ...: {\"name\": \"Tom\", \"age\": 10},\n    ...: {\"name\": \"Mark\", \"age\": 5},\n    ...: {\"name\": \"Pam\", \"age\": 7},\n    ...: {\"name\": \"Dick\", \"age\": 12},\n    ...: ]\n</code></pre>\n\n<p>However the output I am getting is very mixed, sometimes its a dict and sometimes a value.</p>\n\n<pre><code>In [25]: for item in dicts:\n    ...:     for k, v in item.items():\n    ...:         print(\"Key: {0} and Value: {1}\".format(k,v))\n    ...:\n    ...:\nKey: name and Value: {'name': 'Dick', 'age': 12, 0: {...}}\nKey: age and Value: 10\nKey: 0 and Value: {'name': 'Dick', 'age': 12, 0: {...}}\nKey: name and Value: Mark\nKey: age and Value: 5\nKey: name and Value: Pam\nKey: age and Value: 7\nKey: name and Value: Dick\nKey: age and Value: 12\nKey: 0 and Value: {'name': 'Dick', 'age': 12, 0: {...}}\n</code></pre>\n\n<p>I want the output to have no dicts in it all keys and values extracted. There are better ways to do this I see but error was from pasting into ipython incorrectly.</p>\n\n<p><strong>Edited</strong>\nUpdated Dicts\n<strong>Updated</strong>\nOutput with updated Dicts does work as expected.</p>\n\n<pre><code>In [49]: for item in dicts:\n    ...:     for k, v in item.items():\n    ...:         print(\"Key: {0} and Value: {1}\".format(k,v))\n    ...:\nKey: name and Value: Tom\nKey: age and Value: 10\nKey: name and Value: Mark\nKey: age and Value: 5\nKey: name and Value: Pam\nKey: age and Value: 7\nKey: name and Value: Dick\nKey: age and Value: 12\n</code></pre>\n"}, {"tags": ["python", "python-2.7", "paramiko", "python-unittest"], "comments": [{"owner": {"reputation": 1066, "user_id": 3388796, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/1b4at.jpg?s=128&g=1", "display_name": "erhesto", "link": "https://stackoverflow.com/users/3388796/erhesto"}, "edited": false, "score": 0, "creation_date": 1504133541, "post_id": 45970648, "comment_id": 78900815, "body": "If you are unittesting it, maybe consider using mocks? It will not test connection, but your code logic.   <a href=\"https://docs.python.org/3/library/unittest.mock.html\" rel=\"nofollow noreferrer\">docs.python.org/3/library/unittest.mock.html</a>"}, {"owner": {"reputation": 1904, "user_id": 4199257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a35d9af9e7b63ce83be860f2ddcfa7c?s=128&d=identicon&r=PG&f=1", "display_name": "fernandezcuesta", "link": "https://stackoverflow.com/users/4199257/fernandezcuesta"}, "edited": false, "score": 0, "creation_date": 1504165686, "post_id": 45970648, "comment_id": 78910564, "body": "have a look at <a href=\"https://stackoverflow.com/questions/45917649/mock-a-remote-host-in-python\">Mock a Remote Host in Python</a>"}], "owner": {"reputation": 3392, "user_id": 2977876, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/HwNBq.jpg?s=128&g=1", "display_name": "whoisearth", "link": "https://stackoverflow.com/users/2977876/whoisearth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 856, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1504132246, "creation_date": 1504132246, "question_id": 45970648, "link": "https://stackoverflow.com/questions/45970648/unittesting-paramiko-ssh-connections", "title": "Unittesting paramiko ssh connections", "body": "<p>I want to do a simple test of an ssh connection function like this:</p>\n\n<pre><code>def ssh_connect(host, key, user):\n    ssh = paramiko.SSHClient()\n    ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())\n    k = paramiko.RSAKey.from_private_key(StringIO.StringIO(key), password='passkey')\n    ssh.connect(host, username=user, pkey=k)\n    return ssh\n</code></pre>\n\n<p>I don't want to have to pass a legit server, username and key.  Assuming the test was done on a linux server would you ssh to yourself in the test scenario?</p>\n"}, {"tags": ["python", "pytest"], "answers": [{"comments": [{"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1504281291, "post_id": 46002251, "comment_id": 78968799, "body": "That&#39;s a cool workaround, but not much different really to chucking in a breakpoint like <code>ipdb.set_trace()</code>.  Not really what I had in mind.  +1 anyway."}], "tags": [], "owner": {"reputation": 4137, "user_id": 148585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73e4f4549e97ad9d53e11b8e987f4b90?s=128&d=identicon&r=PG", "display_name": "theY4Kman", "link": "https://stackoverflow.com/users/148585/they4kman"}, "is_accepted": false, "score": 4, "last_activity_date": 1504283658, "last_edit_date": 1504283658, "creation_date": 1504275476, "answer_id": 46002251, "question_id": 45970572, "link": "https://stackoverflow.com/questions/45970572/how-to-get-a-pytest-fixture-interactively/46002251#46002251", "title": "How to get a pytest fixture interactively?", "body": "<p><a href=\"http://ipython.readthedocs.io/en/stable/interactive/reference.html#embedding-ipython\" rel=\"nofollow noreferrer\">Call <strong><code>IPython.embed()</code></strong> to drop into IPython's REPL</a>, and use the <a href=\"https://docs.pytest.org/en/latest/builtin.html#_pytest.fixtures.FixtureRequest\" rel=\"nofollow noreferrer\"><code>request</code> fixture's</a> <a href=\"https://docs.pytest.org/en/latest/builtin.html#_pytest.fixtures.FixtureRequest.getfixturevalue\" rel=\"nofollow noreferrer\"><code>getfixturevalue()</code></a> method to access arbitrary fixture values</p>\n\n<pre><code>def test_stuff(request):\n    from IPython import embed\n    embed()\n</code></pre>\n\n<p>Note: <strong>pytest must be run with the <code>-s</code> flag</strong> to <a href=\"https://docs.pytest.org/en/latest/capture.html\" rel=\"nofollow noreferrer\">disable capturing of stdout/stderr</a></p>\n\n<pre><code>$ pytest -s\n============================= test session starts ==============================\nplatform linux -- Python 3.6.2, pytest-3.2.1, py-1.4.34, pluggy-0.4.0\nrootdir: /home/they4kman/.virtualenvs/tmp-26171665bd77f5/src, inifile:\ncollected 1 item                                                                \n\ntest_stuff.py Python 3.6.2 (default, Jul 20 2017, 08:43:29) \nType 'copyright', 'credits' or 'license' for more information\nIPython 6.1.0 -- An enhanced Interactive Python. Type '?' for help.\n\nIn [1]: request.getfixturevalue('tmpdir_factory')\nOut[1]: &lt;_pytest.tmpdir.TempdirFactory at 0x7f71a7d501d0&gt;\n</code></pre>\n\n<p><a href=\"http://ipython.readthedocs.io/en/stable/install/index.html\" rel=\"nofollow noreferrer\">IPython must be installed</a>, of course ;)</p>\n"}, {"comments": [{"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1504292190, "post_id": 46005990, "comment_id": 78973844, "body": "Almost there! But the fixture is torn down <i>immediately</i>.  It will be nice if cleanup can somehow be delayed.  Edited original question with an MCVE.  Maybe the <code>inject_fixture</code> def needs to be turned into a coroutine or something...?"}, {"owner": {"reputation": 4137, "user_id": 148585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73e4f4549e97ad9d53e11b8e987f4b90?s=128&d=identicon&r=PG", "display_name": "theY4Kman", "link": "https://stackoverflow.com/users/148585/they4kman"}, "reply_to_user": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1504298160, "post_id": 46005990, "comment_id": 78976233, "body": "I updated the answer to disable fixture teardown. Why the aversion to breakpoints?"}], "tags": [], "owner": {"reputation": 4137, "user_id": 148585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73e4f4549e97ad9d53e11b8e987f4b90?s=128&d=identicon&r=PG", "display_name": "theY4Kman", "link": "https://stackoverflow.com/users/148585/they4kman"}, "is_accepted": true, "score": 2, "last_activity_date": 1504297945, "last_edit_date": 1504297945, "creation_date": 1504290118, "answer_id": 46005990, "question_id": 45970572, "link": "https://stackoverflow.com/questions/45970572/how-to-get-a-pytest-fixture-interactively/46005990#46005990", "title": "How to get a pytest fixture interactively?", "body": "<p>While some fixtures are available session-wide, <em>no fixture gets a value until a test is run</em>. The simplest way to play with fixtures is to set a breakpoint in a test function... but we can sorta bypass this with some hackery:</p>\n\n<pre><code># magical_module.py\nimport pytest\n\n_fixture_name = None\n_fixture_value = None\n\ndef test_stuff(request):\n    global _fixture_value\n    fixturedef = request._get_active_fixturedef(_fixture_name)\n    fixturedef._finalizer = []  # disable fixture teardown\n    _fixture_value = fixturedef.cached_result[0]\n\ndef inject_fixture(fixturename):\n    global _fixture_name\n    _fixture_name = fixturename\n    pytest.main(['-qq', __file__])\n    return _fixture_value\n</code></pre>\n\n<p>Then you can access them from the REPL</p>\n\n<pre><code>$ python\nPython 3.6.2 (default, Jul 20 2017, 08:43:29) \n[GCC 5.4.1 20170519] on linux\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; from magical_module import inject_fixture\n&gt;&gt;&gt; tmpdir_factory = inject_fixture('tmpdir_factory')\n.\n&gt;&gt;&gt; tmpdir_factory\n&lt;_pytest.tmpdir.TempdirFactory object at 0x7fbf22df46a0&gt;\n</code></pre>\n"}], "owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 967, "favorite_count": 2, "accepted_answer_id": 46005990, "answer_count": 2, "score": 5, "last_activity_date": 1504297945, "creation_date": 1504131806, "last_edit_date": 1504292151, "question_id": 45970572, "link": "https://stackoverflow.com/questions/45970572/how-to-get-a-pytest-fixture-interactively", "title": "How to get a pytest fixture interactively?", "body": "<p>How to import or otherwise bind a <code>pytest</code> fixture for interactive use, without using breakpoints?</p>\n\n<p>For example, I want to explore some behaviours of the <a href=\"https://docs.pytest.org/en/latest/tmpdir.html\" rel=\"nofollow noreferrer\"><code>tmpdir_factory</code></a> fixture in the REPL.  </p>\n\n<pre><code>from pytest import tmpdir_factory  # note: this doesn't actually work\n\n# setup / context has already been entered\ntmpdir_factory.ensure('exists.txt', file=True)  # I can use the fixture\ndel tmpdir_factory  # teardown will eventually be called\n</code></pre>\n\n<p>In the case of <code>tmpdir</code> I already know it's just a <code>py.path.local</code> instance, but I'm interested in the general question for user defined fixtures too.  </p>\n\n<hr>\n\n<p><em>edit:</em> Another acceptable interface:</p>\n\n<pre><code>from magical_module import inject_fixture\ntmpdir_factory = inject_fixture('tmpdir_factory')\n</code></pre>\n\n<hr>\n\n<p><em>edit:</em> an MCVE to show whether context has exited or not:</p>\n\n<pre><code># conftest.py\nfrom datetime import datetime\nimport pytest\n\n@pytest.fixture\ndef my_fixture():\n    obj = {'setup': datetime.now()}\n    yield (obj, f'yielded @ {datetime.now()!r}')\n    obj['teardown'] = datetime.now()\n</code></pre>\n"}, {"tags": ["python", "arrays", "for-loop"], "answers": [{"tags": [], "owner": {"reputation": 1981, "user_id": 7203433, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-UwHcLcsEtUg/AAAAAAAAAAI/AAAAAAAABYM/2PUMtvGAExk/photo.jpg?sz=128", "display_name": "Josh Karpel", "link": "https://stackoverflow.com/users/7203433/josh-karpel"}, "is_accepted": true, "score": 0, "last_activity_date": 1504207329, "creation_date": 1504207329, "answer_id": 45988688, "question_id": 45970564, "link": "https://stackoverflow.com/questions/45970564/nested-for-loop-to-replace-cells-in-an-array/45988688#45988688", "title": "Nested for loop to replace cells in an array", "body": "<p>The problem with the initial version is that <code>img_masked[x, y]</code> will certainly never be <code>[]</code>, because that's the empty list - the elements of <code>img_masked</code> are numpy floats, not lists.</p>\n\n<p>If you change the check to <code>if img_masked[x, y] != np.nan</code>, you run into the problem that <code>np.nan</code> does not equal itself:</p>\n\n<pre><code>&gt;&gt;&gt; np.nan == np.nan\nFalse\n</code></pre>\n\n<p>The problem with both techniques is that the first <code>if</code> is always <code>True</code>, so you always use the old <code>img</code> to populate <code>new_img</code>. I highly recommend putting some <code>print</code>s in each branch when looking for bugs like this - it will make it clear that the branch is not working correctly.</p>\n\n<p>To get consistent results, use <code>np.isnan</code>:</p>\n\n<pre><code>#   Use a for loop to look at each pixel in the masked, unfiltered image\nheight, width = img_masked.shape\nfor y in range(height):\n    for x in range(width):\n        if np.isnan(img_masked[x, y]):\n            new_img[x, y] = img[x, y]\n        else:\n            new_img[x, y] = img_masked_median[x, y]\n</code></pre>\n"}], "owner": {"reputation": 1055, "user_id": 8322295, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/mx0gd.jpg?s=128&g=1", "display_name": "Jim421616", "link": "https://stackoverflow.com/users/8322295/jim421616"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 45988688, "answer_count": 1, "score": 1, "last_activity_date": 1504207329, "creation_date": 1504131748, "question_id": 45970564, "link": "https://stackoverflow.com/questions/45970564/nested-for-loop-to-replace-cells-in-an-array", "title": "Nested for loop to replace cells in an array", "body": "<p>I have a masked image, and I'm trying to replace the masked pixels in that image with the values from another array. I'm using a nested for loop:</p>\n\n<pre><code>import scipy.ndimage as ndi\nimport matplotlib.pyplot as plt\nimport numpy as np  \n\n#   Generate random image and mask\nnp.random.seed(seed=5)                      #   To use the same random numbers\nh, w = 10, 10\nmask = np.random.randint(2, size=(h, w))    #   Generate a h x w array of \n                                            #   random integers from 0 - 1\nimg = np.random.rand(h, w)                  #   Generate a h x w array of \n                                            #   random floats\nimg_masked = np.where(mask, img, np.nan)    #   Mask the img array and replace\n                                            #   invalid values with nan's\n\n#   Use generic filter to compute nan-excluding median of masked image\nsize = 3\nimg_masked_median = ndi.generic_filter(img_masked, np.nanmedian, size=size)\n\nnew_img = np.ones_like(img_masked)\n#   Use a for loop to look at each pixel in the masked, unfiltered image\nheight, width = img_masked.shape\nfor y in range(height):\n    for x in range(width):\n        if img_masked[x, y] != []:\n            new_img[x, y] = img[x, y]\n        else:\n            new_img[x, y] = img_masked_median[x, y]\n\n#   Plot results in 4x4 grid\nfig, ax = plt.subplots(nrows=2, ncols=2)\nax[0,0].imshow(img)\nax[0,0].set_title('img')\nax[0,1].imshow(img_masked_median)\nax[0,1].set_title('img_masked_median')\nax[1,0].imshow(img_masked)\nax[1,0].set_title('img_masked')\nax[1,1].imshow(new_img)\nax[1,1].set_title('new_img')\nplt.show()\n</code></pre>\n\n<p>The filter works fine, now I just want to replace any masked pixels in img with the corresponding pixels from img_masked_median.\nAt the moment, the loop just produces a copy of img_masked_median. If I change the condition in line 24 to be<br></p>\n\n<pre><code>if img_masked[x, y] != np.nan:\n</code></pre>\n\n<p>now it produces a copy of img.<br>\nWhy isn't the for loop replacing the pixels properly? </p>\n"}, {"tags": ["python", "c", "cython"], "comments": [{"owner": {"reputation": 38434, "user_id": 3657742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/027d13e2b9077479fa7857166c272c16?s=128&d=identicon&r=PG&f=1", "display_name": "chrisb", "link": "https://stackoverflow.com/users/3657742/chrisb"}, "edited": false, "score": 0, "creation_date": 1504137099, "post_id": 45970563, "comment_id": 78901636, "body": "looks like you need a type annotation on <code>ret_val</code>?"}, {"owner": {"reputation": 35, "user_id": 1301866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/037fe27e5eb9cd6259ba8cdfe0be159b?s=128&d=identicon&r=PG", "display_name": "rahvin74", "link": "https://stackoverflow.com/users/1301866/rahvin74"}, "reply_to_user": {"reputation": 38434, "user_id": 3657742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/027d13e2b9077479fa7857166c272c16?s=128&d=identicon&r=PG&f=1", "display_name": "chrisb", "link": "https://stackoverflow.com/users/3657742/chrisb"}, "edited": false, "score": 0, "creation_date": 1504139883, "post_id": 45970563, "comment_id": 78902124, "body": "@chrisb, I wondered about that but I haven&#39;t been able to get it to work. Probably because I&#39;m not sure what it should look like. I&#39;ve tried         mod_one.PyRemoteDevice ret_val = mod_one.PyRemoteDevice()     with no luck. I&#39;m going to try it again though, just to make sure."}, {"owner": {"reputation": 35, "user_id": 1301866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/037fe27e5eb9cd6259ba8cdfe0be159b?s=128&d=identicon&r=PG", "display_name": "rahvin74", "link": "https://stackoverflow.com/users/1301866/rahvin74"}, "reply_to_user": {"reputation": 38434, "user_id": 3657742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/027d13e2b9077479fa7857166c272c16?s=128&d=identicon&r=PG&f=1", "display_name": "chrisb", "link": "https://stackoverflow.com/users/3657742/chrisb"}, "edited": false, "score": 0, "creation_date": 1504140674, "post_id": 45970563, "comment_id": 78902247, "body": "Ok, @chrisb, you are correct. As soon as I typed my last comment, I realized my mistake. I needed <code>cdef</code> in front of what I posted last, so it would be <code>cdef mod_one.PyRemoteDevice ret_val = mod_one.PyRemoteDevice()</code>. I feel a bit silly! If you make your comment into an answer, I&#39;ll accept it."}], "answers": [{"tags": [], "owner": {"reputation": 38434, "user_id": 3657742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/027d13e2b9077479fa7857166c272c16?s=128&d=identicon&r=PG&f=1", "display_name": "chrisb", "link": "https://stackoverflow.com/users/3657742/chrisb"}, "is_accepted": true, "score": 1, "last_activity_date": 1504140814, "creation_date": 1504140814, "answer_id": 45971671, "question_id": 45970563, "link": "https://stackoverflow.com/questions/45970563/cython-cannot-convert-pointer-to-python-object-after-module-split/45971671#45971671", "title": "Cython: Cannot Convert pointer to Python Object after module split", "body": "<p>Accessing c-level functions on extension types requires cython to know the exact type, otherwise it is treated as a generic Python object.  So a type annotation like this is needed</p>\n\n<pre><code>cdef mod_one.PyRemoteDevice ret_val = ...\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 1301866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/037fe27e5eb9cd6259ba8cdfe0be159b?s=128&d=identicon&r=PG", "display_name": "rahvin74", "link": "https://stackoverflow.com/users/1301866/rahvin74"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1276, "favorite_count": 0, "accepted_answer_id": 45971671, "answer_count": 1, "score": 3, "last_activity_date": 1504140814, "creation_date": 1504131734, "question_id": 45970563, "link": "https://stackoverflow.com/questions/45970563/cython-cannot-convert-pointer-to-python-object-after-module-split", "title": "Cython: Cannot Convert pointer to Python Object after module split", "body": "<p><strong>The Problem:</strong></p>\n\n<pre><code>Error compiling Cython file:\n------------------------------------------------------------\n...\ncpdef Py_GetRemoteDevice(PyChannel Chan):\n    ret_val = mod_one.PyRemoteDevice()\n    cdef core.RemoteDevice  * tmp\n    with nogil:\n        tmp = core.GetRemoteDevice(Chan.__instance)\n    ret_val.__set_ptr(tmp)\n                        ^\n------------------------------------------------------------\n\ncore/mod_two.pyx:11589:25: Cannot convert 'RemoteDevice *' to Python object\n</code></pre>\n\n<p><strong>The Background:</strong>\nI have a fairly large C library I'm wrapping with Cython. Initially I \nhad everything in two files, core.pyx and core.pxd. However, the more\nof the library that was wrapped the larger the core.c file generated.\n2.5 million lines and counting. The compile time and memory usage became\ncumbersome.</p>\n\n<p>I decided to split things into multiple .pyx files. That's when things that used\nto work stopped working.</p>\n\n<p><strong>Disclaimer:</strong>\nPlease keep in mind that I've greatly simplified things for this question.\nThe wrapped library is somewhat large and proprietary.</p>\n\n<p><strong>The Details:</strong><br>\n<em>core.pxd</em> - contains all the necessary components from the C library<br>\nI'm wrapping. Also a simple Void * wrapper class declaration.</p>\n\n<pre><code>cdef class Void:\n    cdef void *__void\n    cdef __set_ptr(self, void *ptr)\n\ncdef extern from \"core.h\":\n    ctypedef unsigned char U8\n    ctypedef unsigned int U32\n\n    void OS_MemSet(U8 *dest, U8 byte, U32 len) nogil\n\ncdef extern from \"mod_one.h\":\n    cdef struct _RemoteDevice\n    ctypedef _RemoteDevice RemoteDevice\n\ncdef extern from \"mod_two.h\":\n    cdef struct _Channel\n    ctypedef _Channel Channel\n</code></pre>\n\n<p><em>core.pyx</em> - not a whole lot is needed here, really it's just the \nimplementation of the Void * wrapper.</p>\n\n<pre><code>cdef class Void:\n    cdef __set_ptr(self, void *ptr):\n        self.__void = ptr\n</code></pre>\n\n<p><em>mod_one.pxd</em> - declares the wrapper class for the RemoteDevice C struct</p>\n\n<pre><code>cimport core\n\ncdef class PyRemoteDevice:\n    cdef core.RemoteDevice *__instance\n    cdef __set_ptr(self, core.RemoteDevice *ptr)\n</code></pre>\n\n<p><em>mod_one.pyx</em> - defines the RemoteDevice wrapper class. Note the \n__set_ptr function, which is cdef'd and takes a RemoteDevice *</p>\n\n<pre><code>from cpython.mem cimport PyMem_Malloc, PyMem_Free\nimport core\ncimport core\n\ncdef class PyRemoteDevice:\n    def __cinit__(self):\n        self.__instance = &lt;core.RemoteDevice *&gt;PyMem_Malloc(sizeof(core.RemoteDevice))\n\n    def __init__(self):\n        core.OS_MemSet(&lt;core.U8 *&gt;self.__instance, &lt;core.U8&gt;0, sizeof(core.RemoteDevice))\n\n    cdef __set_ptr(self, core.RemoteDevice *ptr):\n        self.__instance = ptr\n\n    def __dealloc__(self):\n        if self.__instance is not NULL:\n            PyMem_Free(self.__instance)\n            self.__instance = NULL\n</code></pre>\n\n<p><em>mod_two.pxd</em> - declares the Channel wrapper class, which I'm only showing\nhere because it's used in the function that is causing me problems.</p>\n\n<pre><code>cimport core\ncimport mod_one\n\ncdef class PyChannel:\n    cdef core.Channel *__instance\n    cdef __set_ptr(self, core.Channel *ptr)\n</code></pre>\n\n<p><em>mod_two.pyx</em> - defines the Channel wrapper class, and declares the\nPy_GetRemoteDevice function, which wraps the GetRemoteDevice function \nfrom the C library.</p>\n\n<pre><code>from cpython.mem cimport PyMem_Malloc, PyMem_Free import core cimport core import mod_one cimport mod_one\n\ncdef class PyChannel:\n    def __cinit__(self):\n        self.__instance = &lt;core.Channel *&gt;PyMem_Malloc(sizeof(core.Channel))\n\n    def __init__(self):\n        core.OS_MemSet(&lt;core.U8 *&gt;self.__instance, &lt;core.U8&gt;0, sizeof(core.Channel))\n\n    cdef __set_ptr(self, core.Channel *ptr):\n        self.__instance = ptr\n\n    def __dealloc__(self):\n        if self.__instance is not NULL:\n            PyMem_Free(self.__instance)\n            self.__instance = NULL\n\ncpdef Py_GetRemoteDevice(PyChannel Chan):\n    ret_val = mod_one.PyRemoteDevice()\n    cdef core.RemoteDevice  * tmp\n    with nogil:\n        tmp = core.GetRemoteDevice(Chan.__instance)\n    ret_val.__set_ptr(tmp)\n    return ret_val\n</code></pre>\n\n<p>The problem I'm getting is that when Cythonizing mod_two, I get the \nfollowing error:</p>\n\n<pre><code>Error compiling Cython file:\n------------------------------------------------------------\n...\ncpdef Py_GetRemoteDevice(PyChannel Chan):\n    ret_val = mod_one.PyRemoteDevice()\n    cdef core.RemoteDevice  * tmp\n    with nogil:\n        tmp = core.GetRemoteDevice(Chan.__instance)\n    ret_val.__set_ptr(tmp)\n                        ^\n------------------------------------------------------------\n\ncore/mod_two.pyx:11589:25: Cannot convert 'RemoteDevice *' to Python object\n</code></pre>\n\n<p>I'm a bit confused, because this used to work when I had everything in one\nmodule. One difference I can see is that all my wrapper classes were wholly defined\nin core.pyx because I wasn't needing to share them between modules. Now\nI need to share them, so I've split them into .pyx and .pxd files.</p>\n\n<p>Can anyone point me in the right direction? I've scoured the Cython docs and Google\nbut so far I haven't found anything that answers my question.</p>\n\n<p>Thanks, and please let me know if any additional information is needed!</p>\n"}, {"tags": ["python", "tensorflow", "neural-network", "keras"], "comments": [{"owner": {"reputation": 5903, "user_id": 3908170, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vou9q.jpg?s=128&g=1", "display_name": "DarkCygnus", "link": "https://stackoverflow.com/users/3908170/darkcygnus"}, "edited": false, "score": 0, "creation_date": 1504132616, "post_id": 45970557, "comment_id": 78900578, "body": "If you want your code reviewed you should better try on (<a href=\"https://codereview.stackexchange.com/\">codereview.stackexchange.com</a>). A better worded question (and one more answerable here) would be &quot;How to obtain derivatives of weights of individual neurons on a CNN in Keras&quot;"}, {"owner": {"reputation": 1, "user_id": 8262884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a87acf54d0bd495474c0d39abc08af4?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/8262884/alex"}, "reply_to_user": {"reputation": 5903, "user_id": 3908170, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vou9q.jpg?s=128&g=1", "display_name": "DarkCygnus", "link": "https://stackoverflow.com/users/3908170/darkcygnus"}, "edited": false, "score": 0, "creation_date": 1504134119, "post_id": 45970557, "comment_id": 78900972, "body": "Ah, that is helpful, thanks!"}], "owner": {"reputation": 1, "user_id": 8262884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a87acf54d0bd495474c0d39abc08af4?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/8262884/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 300, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1504131705, "creation_date": 1504131705, "question_id": 45970557, "link": "https://stackoverflow.com/questions/45970557/derivatives-for-individual-neurons-in-a-keras-neural-neural-network", "title": "Derivatives for individual neurons in a keras neural neural network", "body": "<p>I am trying to get the derivatives of individual neurons in a keras feed-forward neural network w.r.t. the weights of network.</p>\n\n<p>To do this, I make use of subnetworks and the built-in gradient functions of keras. For example, for neuron <em>k</em> in layer <em>l</em>, I will return a subnetwork that goes up to layer <em>l</em> with the rest of the neurons in layer <em>l</em> deleted. Then, I take the gradient of that subnetwork w.r.t. the weights in the subnetwork. (I do this for all neurons in the network.)</p>\n\n<p>The problem with this is that the gradient function is actually with respect to the error or cost of the network, not the output itself, i.e. it's something similar to <em>Error*grad(neuron_lk)</em>, and you need a label for the datapoint to compute that error. I don't want that error term there.</p>\n\n<p>Additionally, I feel like there is perhaps a simpler or more efficient way to do all of this. Any suggestions?</p>\n\n<p>Here is my code:</p>\n\n<p><strong>For gradient:</strong></p>\n\n<pre><code>def gradient(model,x):\n    weights = model.trainable_weights # weight tensors\n    ##weights = [weight for weight in weights if model.get_layer(weight.name[:-2]).trainable] # filter down weights tensors to only ones which are trainable\n    gradients = model.optimizer.get_gradients(model.total_loss, weights) # gradient tensors\n\n    input_tensors = [model.inputs[0], # input data\n                     model.sample_weights[0], # how much to weight each sample by\n                     model.targets[0], # labels\n                     K.learning_phase(), # train or test mode\n    ]\n\n    get_gradients = K.function(inputs=input_tensors, outputs=gradients)\n\n\n    inputs = [[list(x)], # X\n              [1], # sample weights\n              [[model.predict(np.array([x]))[0][0]+1]], # y\n              0 # learning phase in TEST mode\n    ]\n\n    return get_gradients(inputs)\n</code></pre>\n\n<p><strong>For submodel:</strong></p>\n\n<pre><code>def get_submodel(model, layer_l, neuron_k):\n\n    #creating submodel and pruning layers:\n    submodel = deepcopy(model)\n    for i in range(len(model.layers)-layer_l):\n        submodel.pop()\n\n    #getting [pruned] weight matrix:\n    W = model.layers[layer_l].get_weights()[0]\n    if layer_l != len(model.layers) - 1:\n        Wk = W[neuron_k,:]\n    elif layer_l == len(model.layers) - 1:\n        Wk = W\n\n    #adding new layer back:\n    if layer_l != 0:\n        submodel.add(Dense(1, activation='relu', use_bias=False))\n    elif layer_l == 0:\n        in_shape = model.layers[0].input_shape[1]\n        submodel.add(Dense(1, activation='relu', use_bias=False, input_shape=(in_shape,)))\n\n    #setting [pruned] weight matrix:\n    submodel.layers[layer_l].set_weights([Wk.reshape([-1,1])])\n    submodel.compile(optimizer='sgd', loss='mean_squared_error')\n    return submodel\n</code></pre>\n\n<p><strong>final call for a single neuron (layer <em>l</em>, neuron <em>k</em>):</strong></p>\n\n<pre><code>gradient(get_submodel(model, l, k),x)\n</code></pre>\n\n<p>Thanks in advance for any input!</p>\n"}, {"tags": ["python", "postgresql", "google-app-engine"], "answers": [{"tags": [], "owner": {"reputation": 23, "user_id": 2125851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/708a66c004ceb7505ac236c06e123098?s=128&d=identicon&r=PG", "display_name": "Christopher Vickery", "link": "https://stackoverflow.com/users/2125851/christopher-vickery"}, "is_accepted": false, "score": 0, "last_activity_date": 1504154202, "last_edit_date": 1504154202, "creation_date": 1504152325, "answer_id": 45973067, "question_id": 45970502, "link": "https://stackoverflow.com/questions/45970502/gae-flexible-environment-postgres-connection-string/45973067#45973067", "title": "GAE flexible environment postgres connection string?", "body": "<p><strong>Answer</strong></p>\n\n<p>What I had failed to do was to include the necessary settings in my app.yaml file:</p>\n\n<pre><code>beta_settings:\n  cloud_sql_instances: [INSTANCE_CONNECTION_NAME]\n</code></pre>\n\n<p>That is, the short answer to my question is, \u201cNo you don\u2019t have to use SQLAlchemy.\u201d</p>\n\n<p><strong>More Information</strong></p>\n\n<p>The hostname, as documented in the sample app, is <code>/cloudsql/[INSTANCE_CONNECTION_NAME]</code></p>\n\n<p>You can get <code>[INSTANCE_CONNECTION_NAME]</code> from the command line: \"gcloud sql list\" tells you your instance names, then \"gcloud sql describe <code>[instance name]</code>\" tells you lots about one instance, including its <code>connectionName</code>, the value of which is your <code>[INSTANCE_CONNECTION_NAME]</code>.</p>\n\n<p>In my code I connect to either a local copy of the db or the cloud db when testing locally, depending on whether the <code>cloud_sql_proxy</code> is running or not. When deployed, the app accesses the cloud db. That\u2019s all encapsulated in this function:</p>\n\n<pre><code>def pg_connect(str):\n  \"\"\" Connect to local db, use proxy, or connect directly.\n      If USE_LOCAL_DB is set, connect to that db locally (default user, etc.)\n      Otherwise, use /cloudsql/... on port 5432, unless port 5431 is bound,\n      in which case the proxy server is running, and the host is localhost\n      on port 5431. (The proxy port number is specified when starting\n      cloud_sql_proxy.)\n  \"\"\"\n  dbname = os.environ.get('USE_LOCAL_DB')\n  if dbname != None:\n    return psycopg2.connect('dbname={}'.format(dbname))\n\n  # Extract the dbname from the connection string and set up for deployed GAE\n  # access.\n  dbname = re.search('dbname=(\\w*)', str).group(1)\n  port = 5432\n  host = '/cloudsql/...'\n  user = '...'\n  password = '...'\n  # if port 5431 is bound, the proxy is running, and the connection string\n  # refers to localhost on that port\n  s = socket.socket()\n  try:\n    c = s.bind(('localhost', 5431))\n  except:\n    # Unable to bind: proxy must be running\n    host = 'localhost'\n    port = 5431\n  s.close()\n  conn_str = 'dbname={} host={} port={} user={} password={}'.format(\n      dbname,\n      host,\n      port,\n      user,\n      password)\n  return psycopg2.connect(conn_str)\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 2125851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/708a66c004ceb7505ac236c06e123098?s=128&d=identicon&r=PG", "display_name": "Christopher Vickery", "link": "https://stackoverflow.com/users/2125851/christopher-vickery"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 140, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1504154202, "creation_date": 1504131445, "question_id": 45970502, "link": "https://stackoverflow.com/questions/45970502/gae-flexible-environment-postgres-connection-string", "title": "GAE flexible environment postgres connection string?", "body": "<p>The sample code for connecting to postgres uses SQLAchemy. Is this required, or is there a way to specify the host in a conventional psycopg2 connection string? (\"dbname=... host=... port=... etc\"), avoiding SQLAlchemy.</p>\n\n<p>I can access the db using cloud_sql_proxy just fine. I just can't get to it from a deployed app.</p>\n"}, {"tags": ["python", "django", "orm", "backend", "models"], "comments": [{"owner": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 0, "creation_date": 1504132273, "post_id": 45970467, "comment_id": 78900480, "body": "Actually a many-to-many ralation creates a new mapping table with two foreign keys, in the background. So if you don&#39;t want to replace the User class you approach look good."}], "answers": [{"tags": [], "owner": {"reputation": 1179, "user_id": 8128627, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvL3q.png?s=128&g=1", "display_name": "d2718nis", "link": "https://stackoverflow.com/users/8128627/d2718nis"}, "is_accepted": false, "score": 0, "last_activity_date": 1504132795, "last_edit_date": 1504132795, "creation_date": 1504132476, "answer_id": 45970687, "question_id": 45970467, "link": "https://stackoverflow.com/questions/45970467/how-can-i-set-two-foreign-keys-in-a-class-django-orm/45970687#45970687", "title": "How can I set two Foreign Keys in a class? DJANGO ORM", "body": "<p>You've probably seen this error while trying to make migrations:</p>\n\n<pre><code>appname.Friend.friend_id: (fields.E305) Reverse query name for 'Friend.friend_id' clashes with reverse query name for 'Friend.user_id'.\n        HINT: Add or change a related_name argument to the definition for 'Friend.friend_id' or 'Friend.user_id'\n</code></pre>\n\n<p>It clearly tells, that you should add the <code>related_name</code> argument:</p>\n\n<pre><code>class Friend(models.Model):\n    friend_id = models.ManyToManyField(settings.AUTH_USER_MODEL)\n    user_id = models.OneToOneField(settings.AUTH_USER_MODEL, related_name='user_id')\n</code></pre>\n\n<p>Here is <a href=\"https://docs.djangoproject.com/en/dev/topics/auth/customizing/#extending-the-existing-user-model\" rel=\"nofollow noreferrer\">Django docs page</a> about the best practices on customizing and extending the exicting User model.</p>\n"}, {"comments": [{"owner": {"reputation": 2236, "user_id": 11384392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j5bfH.jpg?s=128&g=1", "display_name": "Das_Geek", "link": "https://stackoverflow.com/users/11384392/das-geek"}, "edited": false, "score": 1, "creation_date": 1574173391, "post_id": 58935803, "comment_id": 104131144, "body": "Rather than posting several distinct answers on the same question, <a href=\"https://stackoverflow.com/posts/45970593/edit\">edit your first answer</a> and add all the info from your other answers there."}], "tags": [], "owner": {"reputation": 31, "user_id": 7747825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dcfe34b07eeaf6fe863e0a87692f44e6?s=128&d=identicon&r=PG", "display_name": "David Levy Sousa Oliveira", "link": "https://stackoverflow.com/users/7747825/david-levy-sousa-oliveira"}, "is_accepted": false, "score": 0, "last_activity_date": 1574172083, "creation_date": 1574172083, "answer_id": 58935803, "question_id": 45970467, "link": "https://stackoverflow.com/questions/45970467/how-can-i-set-two-foreign-keys-in-a-class-django-orm/58935803#58935803", "title": "How can I set two Foreign Keys in a class? DJANGO ORM", "body": "<p>My suggestion would be to create a new User class inheriting from django's user and in it you would create friends as many to many from User.</p>\n\n<pre><code>from django.contrib.auth.models import AbstractUser\nfrom django.db.models import CharField, ManyToManyField\nfrom django.utils.translation import ugettext_lazy as _\n\nclass User(AbstractUser):\n    name = CharField(_(\"Name of User\"), blank=True, max_length=255)\n    friends = ManyToManyField('self', related_name='friends')\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 8050839, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/be271e259ec7cc9103fd56c0561d371f?s=128&d=identicon&r=PG&f=1", "display_name": "V. Snow", "link": "https://stackoverflow.com/users/8050839/v-snow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 328, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1574172083, "creation_date": 1504131194, "question_id": 45970467, "link": "https://stackoverflow.com/questions/45970467/how-can-i-set-two-foreign-keys-in-a-class-django-orm", "title": "How can I set two Foreign Keys in a class? DJANGO ORM", "body": "<p>I need to make a table 'Friend' with foreignkeys that store instances of the User class- two of them one for the friend and one for the user attribute. (Table is of relationships)</p>\n\n<p>How to do this? OnetoOneField doesn;t work. It gives me an error in the terminal if I try to make both of them keys.\nSo this is two Many to Many relationships from User to Friend.</p>\n\n<p>If it's impossible, what is a better way to set this up?\nCan the User table have a One-to-Many relationship to itself?</p>\n\n<pre><code>class Friend(models.Model):\n    id = models.IntegerField(primary_key=True)\n    friend_id= models.ForeignKey(User, null=False)\n    user_id = models.ForeignKey(User, null=False)\n</code></pre>\n"}, {"tags": ["python", "pandas", "select", "dataframe", "indexing"], "answers": [{"comments": [{"owner": {"reputation": 398, "user_id": 7859096, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh3.googleusercontent.com/-p2JSfLd_OtQ/AAAAAAAAAAI/AAAAAAAAABI/UJhDkT-Ahus/photo.jpg?sz=128", "display_name": "Jonathan Pacheco", "link": "https://stackoverflow.com/users/7859096/jonathan-pacheco"}, "edited": false, "score": 0, "creation_date": 1504137031, "post_id": 45970618, "comment_id": 78901629, "body": "Awesome! but in my hands the column &#39;PROB&#39; show a value of 1 for all"}], "tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": false, "score": 1, "last_activity_date": 1504132058, "creation_date": 1504132058, "answer_id": 45970618, "question_id": 45970464, "link": "https://stackoverflow.com/questions/45970464/select-columns-data-sets-with-a-boolean-method-with-pandas/45970618#45970618", "title": "Select columns data sets with a boolean method with pandas", "body": "<pre><code>d1 = df.assign(\n    PROB=df.PROB.diff().fillna(False).cumsum()\n).groupby(df.PROB).apply(\n    lambda d: d.assign(PROB=d.PROB.factorize()[0] + 1)\n)\n\nd1\n\n         X  Y  PROB\nPROB               \nFalse 0  2  4     1\n      1  3  5     1\n      2  3  2     1\n      5  2  4     2\n      6  2  3     2\nTrue  3  4  4     1\n      4  3  7     1\n</code></pre>\n\n<hr>\n\n<pre><code>d1.xs(True)\n\n   X  Y  PROB\n3  4  4     1\n4  3  7     1\n</code></pre>\n\n<hr>\n\n<pre><code>d1.xs(False)\n\n   X  Y  PROB\n0  2  4     1\n1  3  5     1\n2  3  2     1\n5  2  4     2\n6  2  3     2\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": true, "score": 2, "last_activity_date": 1504132125, "creation_date": 1504132125, "answer_id": 45970629, "question_id": 45970464, "link": "https://stackoverflow.com/questions/45970464/select-columns-data-sets-with-a-boolean-method-with-pandas/45970629#45970629", "title": "Select columns data sets with a boolean method with pandas", "body": "<p>Or you can try this (PS: drop column Group by using <code>.drop('Group',1)</code>)</p>\n\n<pre><code>df['Group']=df.PROB.astype(int).diff().fillna(0).ne(0).cumsum()\ndf_True=df[df.PROB]\ndf_False=df[~df.PROB]\ndf_False.assign(PROB=pd.factorize(df_False.Group)[0]+1)\nOut[111]: \n   X  Y  PROB  Group\n0  2  4     1      0\n1  3  5     1      0\n2  3  2     1      0\n5  2  4     2      2\n6  2  3     2      2\n\ndf_True.assign(PROB=pd.factorize(df_True.Group)[0]+1)\nOut[112]: \n   X  Y  PROB  Group\n3  4  4     1      1\n4  3  7     1      1\n</code></pre>\n"}], "owner": {"reputation": 398, "user_id": 7859096, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh3.googleusercontent.com/-p2JSfLd_OtQ/AAAAAAAAAAI/AAAAAAAAABI/UJhDkT-Ahus/photo.jpg?sz=128", "display_name": "Jonathan Pacheco", "link": "https://stackoverflow.com/users/7859096/jonathan-pacheco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 188, "favorite_count": 0, "accepted_answer_id": 45970629, "answer_count": 2, "score": 1, "last_activity_date": 1504132125, "creation_date": 1504131186, "question_id": 45970464, "link": "https://stackoverflow.com/questions/45970464/select-columns-data-sets-with-a-boolean-method-with-pandas", "title": "Select columns data sets with a boolean method with pandas", "body": "<p>I have a dataframe with two columns that represent coordinates and an additional column in a boolean format:</p>\n\n<pre><code>X    Y    PROB\n2    4    False\n3    5    False\n3    2    False\n4    4    True\n3    7    True\n2    4    False\n2    3    False\n</code></pre>\n\n<p>What I'm trying to do is to select consecutive False and True coordinates and produce 2 new dataframes as follows:</p>\n\n<p>in the case of False</p>\n\n<pre><code>X   Y  PROB\n2   4   1\n3   5   1\n3   2   1\n2   4   2  \n2   3   2\n</code></pre>\n\n<p>in the case of True</p>\n\n<pre><code>X   Y  PROB\n4   4   1\n3   7   1\n</code></pre>\n\n<p>Right now my approach is using <code>.isin</code> but I get <code>KeyError</code>, some ideas?</p>\n"}, {"tags": ["python", "csv", "dictionary"], "comments": [{"owner": {"reputation": 92827, "user_id": 369, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DHcF2.png?s=128&g=1", "display_name": "Blorgbeard", "link": "https://stackoverflow.com/users/369/blorgbeard"}, "edited": false, "score": 2, "creation_date": 1504131170, "post_id": 45970453, "comment_id": 78900153, "body": "<code>=</code> should be <code>==</code>, where the error is pointing to with the <code>^</code>"}, {"owner": {"reputation": 1304, "user_id": 4670661, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/hZioH.jpg?s=128&g=1", "display_name": "Charitoo", "link": "https://stackoverflow.com/users/4670661/charitoo"}, "edited": false, "score": 0, "creation_date": 1504133430, "post_id": 45970453, "comment_id": 78900784, "body": "it would be more clear if you added samples of both csv files. at least to know which column represents what."}, {"owner": {"reputation": 3952, "user_id": 6696657, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c78dbc81728388bd956e9d4f4c1a6759?s=128&d=identicon&r=PG&f=1", "display_name": "MattR", "link": "https://stackoverflow.com/users/6696657/mattr"}, "edited": false, "score": 0, "creation_date": 1504191787, "post_id": 45970453, "comment_id": 78928983, "body": "for your comment about pandas - pandas makes things easier for this type of work. If you are going to be doing this type of work often, try to learn pandas. It will make your life easier (and faster)"}, {"owner": {"reputation": 1, "user_id": 8473467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33a3d61115df8437f527e1ab0fe35e07?s=128&d=identicon&r=PG&f=1", "display_name": "beary93", "link": "https://stackoverflow.com/users/8473467/beary93"}, "reply_to_user": {"reputation": 3952, "user_id": 6696657, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c78dbc81728388bd956e9d4f4c1a6759?s=128&d=identicon&r=PG&f=1", "display_name": "MattR", "link": "https://stackoverflow.com/users/6696657/mattr"}, "edited": false, "score": 0, "creation_date": 1504201543, "post_id": 45970453, "comment_id": 78934656, "body": "My boss told me not to use pandas because it won&#39;t later on. Is pandas the only way to solve this problem? I&#39;m asking...is my boss wrong? @MattR"}, {"owner": {"reputation": 3952, "user_id": 6696657, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c78dbc81728388bd956e9d4f4c1a6759?s=128&d=identicon&r=PG&f=1", "display_name": "MattR", "link": "https://stackoverflow.com/users/6696657/mattr"}, "edited": false, "score": 0, "creation_date": 1504206728, "post_id": 45970453, "comment_id": 78937241, "body": "@beary93,  pandas is not the <i>only</i> way to solve this, but it is my preferred way. on a side note... look at <a href=\"https://stackoverflow.com/tags?tab=popular\">the most popular tags</a> and type in pandas. there&#39;s a reason why there are 80 pandas questions out of 761 python questions today (at time of writing this). that&#39;s 10%! It&#39;s a very popular tool in any data analysts belt. Boss may not be wrong based on your type of work, but I use pandas every single day at my workplace."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8473467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33a3d61115df8437f527e1ab0fe35e07?s=128&d=identicon&r=PG&f=1", "display_name": "beary93", "link": "https://stackoverflow.com/users/8473467/beary93"}, "edited": false, "score": 0, "creation_date": 1512664552, "post_id": 45970600, "comment_id": 82359293, "body": "Thank you! I&#39;ll try that!"}], "tags": [], "owner": {"reputation": 6354, "user_id": 1562285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0be3cbb95b7e672fc8135509aa37b589?s=128&d=identicon&r=PG", "display_name": "Maarten Fabr&#233;", "link": "https://stackoverflow.com/users/1562285/maarten-fabr%c3%a9"}, "is_accepted": false, "score": 0, "last_activity_date": 1504131994, "creation_date": 1504131994, "answer_id": 45970600, "question_id": 45970453, "link": "https://stackoverflow.com/questions/45970453/match-dictionary-keys-to-existing-csv-file/45970600#45970600", "title": "Match dictionary keys to existing csv file", "body": "<p>apart from the syntax error, your implementation is wrong. <code>row[2]</code> is an id, so you should ask <code>A_ID</code> the corresponding entry. Something like this could work</p>\n\n<pre><code>a_row = A_ID.get(row[2], None)\nif a_row:\n    print(row + a_row)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8473467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33a3d61115df8437f527e1ab0fe35e07?s=128&d=identicon&r=PG&f=1", "display_name": "beary93", "link": "https://stackoverflow.com/users/8473467/beary93"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1504179282, "creation_date": 1504131108, "last_edit_date": 1504179282, "question_id": 45970453, "link": "https://stackoverflow.com/questions/45970453/match-dictionary-keys-to-existing-csv-file", "title": "Match dictionary keys to existing csv file", "body": "<p>I'm a little lost with this problem. Heres what I did.</p>\n\n<p>First: </p>\n\n<p>I created a dictionary that set the ID as the key and the other information as the values from a csv file (File A).</p>\n\n<pre><code>import csv\nA_ID = {}\n\n'''This makes the File A dictionary'''\nwith open(\"file_A.csv\", 'r') as f:\n    reader = csv.reader(f)\n    A_ID = {rows[0]:rows[1:] for rows in reader}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>'35':\u00a0['1',\u00a0'Florida Ave',\u00a0'Tampa']\n</code></pre>\n\n<p>Now I have another file (File B) that I need to look up its ID and match it with file A's ID from the dictionary I just created. Then add in the values of the dictionary into File B as a new column.\nHere's what I have so far:</p>\n\n<pre><code>'''Create the loop that matches dictionary keys to ID in file B'''\nwith open(\"file_B\", 'r') as output:\n    reader = csv.reader(output)\n    for row in reader:\n        if row[2] = A_ID:\n            print(row[2])\n</code></pre>\n\n<p>Error Returned:</p>\n\n<pre><code>File\u00a0\".\\mb_active.py\",\u00a0line\u00a015\nif\u00a0row[3]\u00a0=\u00a0active_id:\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0^\nSyntaxError:\u00a0invalid\u00a0syntax\n</code></pre>\n\n<p>Expected outcome:</p>\n\n<pre><code>State, ID, Car,  Address,  Street,      City\nFL,    35, Chevy,  1,    Florida Ave,  Tampa\n</code></pre>\n\n<p>Address, Street, City are the values from A_ID dictionary. Everything else is from file B. I can't use pandas and I have to keep file A's dictionary for later usage. If pandas is the only way to achieve this goal that is ok but explain why? Also, if you guys have any tips on how to learn python on your own please share! &lt;3</p>\n\n<p>Thank you so much for taking the time to look at this!</p>\n"}, {"tags": ["python", "multiprocessing"], "comments": [{"owner": {"reputation": 3012, "user_id": 6741482, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/e2d07264d5857c8851212ac5c882039a?s=128&d=identicon&r=PG&f=1", "display_name": "pstatix", "link": "https://stackoverflow.com/users/6741482/pstatix"}, "edited": false, "score": 0, "creation_date": 1504132786, "post_id": 45970437, "comment_id": 78900627, "body": "I dont see <code>collect_xml_links</code> or <code>start_urls</code> defined anywhere..."}, {"owner": {"reputation": 3012, "user_id": 6741482, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/e2d07264d5857c8851212ac5c882039a?s=128&d=identicon&r=PG&f=1", "display_name": "pstatix", "link": "https://stackoverflow.com/users/6741482/pstatix"}, "edited": false, "score": 0, "creation_date": 1504135256, "post_id": 45970437, "comment_id": 78901283, "body": "Where is the fixes? There still is not <code>def collect_xml_links</code> or iterable <code>start_urls</code>."}, {"owner": {"reputation": 5126, "user_id": 48808, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/pFhME.jpg?s=128&g=1", "display_name": "iayork", "link": "https://stackoverflow.com/users/48808/iayork"}, "reply_to_user": {"reputation": 3012, "user_id": 6741482, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/e2d07264d5857c8851212ac5c882039a?s=128&d=identicon&r=PG&f=1", "display_name": "pstatix", "link": "https://stackoverflow.com/users/6741482/pstatix"}, "edited": false, "score": 0, "creation_date": 1504178341, "post_id": 45970437, "comment_id": 78919227, "body": "Guessing that the class instances were accumulating, I added  <code>del(result)</code> after <code>write_info_to_sql(result, db_name, engine)</code>. That seems to have fixed the hangs, but I&#39;d like to know if there&#39;s a better solution"}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1504443391, "post_id": 45970437, "comment_id": 79006616, "body": "There&#39;s way too little info here, actually. The code is too far stripped down; it could be that you are using the XML parser in a way that deadlocks. Why is <code>Parse_url</code> a context manager? You don&#39;t do anything with the context hooks."}], "answers": [{"tags": [], "owner": {"reputation": 5126, "user_id": 48808, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/pFhME.jpg?s=128&g=1", "display_name": "iayork", "link": "https://stackoverflow.com/users/48808/iayork"}, "is_accepted": false, "score": 0, "last_activity_date": 1504358433, "creation_date": 1504358433, "answer_id": 46014252, "question_id": 45970437, "link": "https://stackoverflow.com/questions/45970437/web-scraper-hangs-silently-while-multiprocessing/46014252#46014252", "title": "Web scraper hangs silently while multiprocessing", "body": "<p>Pretty sure this isn't ideal, but it worked.  Assuming that the problem was that the multiprocess was creating too many objects, I added an explicit \"del\" step like this:</p>\n\n<pre><code>for i in range(0, len(url_list), 50): # Chunks of 50 to report progress\nurl_list_slice = url_list[i:i+50]\nwith Pool(4) as pool:\n    results = pool.map(parse_urls, url_list_slice) \nfor result in results: \n    write_info_to_sql(result, db_name, engine)\n    del(result)  # explicitly delete the dataframes when done with them\n</code></pre>\n\n<p>I'm not sure why the objects are persisting, since it seems that there are no references left to them so they should be garbage collected. I tried a couple other approaches to remove references to them, such as </p>\n\n<pre><code>results = []\n</code></pre>\n\n<p>after the batch had all been written, but there were still hangs using that.</p>\n"}, {"comments": [{"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1504443484, "post_id": 46023577, "comment_id": 79006640, "body": "The Python GC is only concerned with cyclic references; resources are cleared <i>immediately</i>, through reference counting. Besides, those resources are created in separate processes, not the main process."}, {"owner": {"reputation": 11520, "user_id": 1794497, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t6y5r.png?s=128&g=1", "display_name": "noxdafox", "link": "https://stackoverflow.com/users/1794497/noxdafox"}, "reply_to_user": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 1, "creation_date": 1504610357, "post_id": 46023577, "comment_id": 79066588, "body": "I used wrong words. The resources I meant are the Pool resources (pipes, threads, map results etc). A fast loop creating and destroying Pools gives the feeling of resources leakage as the threads within the Pool prolong the lifetime of the involved objects. The <code>join</code> method is what ensures the logic will wait until all resources are released but the OP is not calling it. Nevertheless, the recommended approach is to create a single <code>Pool</code> and using it all along the software lifecycle."}, {"owner": {"reputation": 5126, "user_id": 48808, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/pFhME.jpg?s=128&g=1", "display_name": "iayork", "link": "https://stackoverflow.com/users/48808/iayork"}, "edited": false, "score": 0, "creation_date": 1504613390, "post_id": 46023577, "comment_id": 79068610, "body": "For what it&#39;s worth, following this suggestion stopped the hangs and the scraper now completes the ~5000 XML pages correctly as far as I can see"}, {"owner": {"reputation": 11520, "user_id": 1794497, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t6y5r.png?s=128&g=1", "display_name": "noxdafox", "link": "https://stackoverflow.com/users/1794497/noxdafox"}, "edited": false, "score": 0, "creation_date": 1504614140, "post_id": 46023577, "comment_id": 79069072, "body": "Good to know it helped!"}], "tags": [], "owner": {"reputation": 11520, "user_id": 1794497, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t6y5r.png?s=128&g=1", "display_name": "noxdafox", "link": "https://stackoverflow.com/users/1794497/noxdafox"}, "is_accepted": true, "score": 1, "last_activity_date": 1504442930, "creation_date": 1504442930, "answer_id": 46023577, "question_id": 45970437, "link": "https://stackoverflow.com/questions/45970437/web-scraper-hangs-silently-while-multiprocessing/46023577#46023577", "title": "Web scraper hangs silently while multiprocessing", "body": "<p>In the second loop, you are creating a <code>Pool</code> on every iteration which is less than ideal. Python gc is quite lazy so your software piles up a lot of resources during the iteration.</p>\n\n<p>The <code>multiprocessing.Pool</code> has been designed for re-usability so you can create it only once in your script.</p>\n\n<pre><code>with Pool(4) as pool:\n    results = pool.map(collect_xml_links, start_urls)  \n    for urls in results:\n        url_list.extend(urls)  # This works and returns urls\n\n    for i in range(0, len(url_list), 50): # Chunks of 50 to report progress\n        url_list_slice = url_list[i:i+50]\n            results = pool.map(parse_urls, url_list_slice) \n            for result in results: \n                write_info_to_sql(result, db_name, engine)\n</code></pre>\n"}], "owner": {"reputation": 5126, "user_id": 48808, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/pFhME.jpg?s=128&g=1", "display_name": "iayork", "link": "https://stackoverflow.com/users/48808/iayork"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 235, "favorite_count": 0, "closed_date": 1504443406, "accepted_answer_id": 46023577, "answer_count": 2, "score": 0, "last_activity_date": 1504442930, "creation_date": 1504131053, "last_edit_date": 1504144729, "question_id": 45970437, "link": "https://stackoverflow.com/questions/45970437/web-scraper-hangs-silently-while-multiprocessing", "closed_reason": "Not suitable for this site", "title": "Web scraper hangs silently while multiprocessing", "body": "<p>I'm scraping a site that contains a couple dozen base urls that ultimately link to several thousand xml pages that I parse, turn into a Pandas dataframe, and eventually save to a SQLite database.  I multiprocess the download/parsing stages to save time, but the script silently hangs (stops collecting pages or parsing XML) after a certain number of pages (not sure how many; between 100 and 200).  </p>\n\n<p>Using the same parser but doing everything sequentially (no multiprocessing) doesn't give any problems, so I suspect I'm doing something wrong with the multiprocessing.  Perhaps creating too many instances of the Parse_url class and clogging memory? </p>\n\n<p>Here's an overview of the process:</p>\n\n<pre><code>engine = create_engine('sqlite:///path_to_db')  # sqlalchemy\n\nclass Parse_url():\n    def __init__(self, url):\n        self.url = url \n    def __enter__(self):\n        return self \n    def __exit__(self, exc_type, exc_value, traceback):\n        return True\n    def parse(self):\n        # parse xml, return dataframes\n\ndef collect_xml_links(start_url):\n    # collect and return a list of links to XML pages on this starting URL\n\ndef parse_urls(url):\n    with Parse_url(url) as parser:\n        collection_of_dfs = parser.parse()\n    return collection_of_dfs\n\ndef write_info_to_sql(result, db_name, engine):\n    # write info to SQLite database\n\nstart_urls = [url1, url2, url3, ... ] \nwith Pool(4) as pool:\n    results = pool.map(collect_xml_links, start_urls)  \nfor urls in results:\n    url_list.extend(urls)  # This works and returns urls\n\nfor i in range(0, len(url_list), 50): # Chunks of 50 to report progress\n    url_list_slice = url_list[i:i+50]\n    with Pool(4) as pool:\n        results = pool.map(parse_urls, url_list_slice) \n    for result in results: \n        write_info_to_sql(result, db_name, engine)\n</code></pre>\n\n<p>When the script hangs, it seems to always do so with a similar number of pages scraped, but I'm not certain if it's exactly the same.  Killing the script gives an unhelpful traceback pointing to the <code>results = pool.map(parse_urls, url_list_slice)</code> line.</p>\n\n<p>Is there an obvious issue with my multiprocessing setup?  Is it possible that I'm generating too many instances of the Parse_url class?</p>\n"}, {"tags": ["python", "opencv", "numpy", "video", "matplotlib"], "comments": [{"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 2, "creation_date": 1504137723, "post_id": 45970420, "comment_id": 78901748, "body": "Display with <code>matplotlib.pyplot.imshow</code>, and have two figures side by side (see matplotlib docs on how to do that). | Alternately you could let matplotlib render into an image, and then combine everything into a big canvas image... but that&#39;s a bit more complex."}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1504176593, "post_id": 45970420, "comment_id": 78918038, "body": "You may look at this question: <a href=\"https://stackoverflow.com/questions/44598124/update-frame-in-matplotlib-with-live-camera-preview\" title=\"update frame in matplotlib with live camera preview\">stackoverflow.com/questions/44598124/&hellip;</a> Instead of showing two video streams you would show the histogram in one of the subplots."}], "owner": {"reputation": 11, "user_id": 8540328, "user_type": "registered", "profile_image": "https://graph.facebook.com/10203387077233934/picture?type=large", "display_name": "Ricardo Perrone", "link": "https://stackoverflow.com/users/8540328/ricardo-perrone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2883, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1504130959, "creation_date": 1504130959, "question_id": 45970420, "link": "https://stackoverflow.com/questions/45970420/how-to-show-video-and-histogram-side-by-side-using-python-opencv-matplotlib", "title": "How to show video and histogram side-by-side using Python/Opencv/Matplotlib?", "body": "<p>I am trying to show video and it's your own histogram side by side, but my code is not working fine, at least simultaneously:</p>\n\n<pre><code>import cv2\nfrom skimage.io import imread\nimport numpy as np\nimport scipy.misc\n\nimport matplotlib.pyplot as plt\n\ncap = cv2.VideoCapture('video.mp4') \ncount = 0\nwhile(cap.isOpened()):\n    ret, frame = cap.read()\n    count +=1  \n\n    gray = cv2.cvtColor(frame, cv2.COLOR_BGR2GRAY) \n    gray =  scipy.misc.imresize(gray, 0.45) \n\n    hist = cv2.calcHist([gray],[0],None,[256],[0,256])\n\n    cv2.imshow('Gray', gray)\n    cv2.waitKey(5)\n    plt.title(\"Histogram\")\n\n    plt.plot(hist)\n    plt.show()\n\ncap.release()\ncv2.destroyAllWindows()\n</code></pre>\n\n<p>How can I do that? I accept any suggestion... My goal is to show two windows (one playing video and another plotting histogram) or just one window with video and histogram side-by-side, maybe with numpy.hstack.</p>\n"}, {"tags": ["python", "dataframe", "rpy2", "arules"], "comments": [{"owner": {"reputation": 5903, "user_id": 3908170, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vou9q.jpg?s=128&g=1", "display_name": "DarkCygnus", "link": "https://stackoverflow.com/users/3908170/darkcygnus"}, "edited": false, "score": 0, "creation_date": 1504131369, "post_id": 45970402, "comment_id": 78900208, "body": "What is your expected output?"}, {"owner": {"reputation": 13, "user_id": 5464029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be5140866bc1115462341539e03f255e?s=128&d=identicon&r=PG&f=1", "display_name": "Animesh Srivastava", "link": "https://stackoverflow.com/users/5464029/animesh-srivastava"}, "reply_to_user": {"reputation": 5903, "user_id": 3908170, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vou9q.jpg?s=128&g=1", "display_name": "DarkCygnus", "link": "https://stackoverflow.com/users/3908170/darkcygnus"}, "edited": false, "score": 0, "creation_date": 1505244371, "post_id": 45970402, "comment_id": 79330716, "body": "library(&#39;arules&#39;)            a= c( &#39;1&#39; , &#39;1&#39; , &#39;1&#39; , &#39;1&#39; , &#39;1&#39; , &#39;1&#39; , &#39;1&#39; , &#39;1&#39; , &#39;1&#39; , &#39;0&#39;   )  b= c( &#39;1&#39; , &#39;0&#39; , &#39;1&#39; , &#39;0&#39; , &#39;1&#39; , &#39;0&#39; , &#39;1&#39; , &#39;0&#39; , &#39;1&#39; , &#39;0&#39;   ) c= c( &#39;1&#39; , &#39;0&#39; , &#39;1&#39; , &#39;0&#39; , &#39;1&#39; , &#39;1&#39; , &#39;1&#39; , &#39;1&#39; , &#39;1&#39; , &#39;1&#39;   ) pd =  data.frame(a,b, c  , stringsAsFactors = TRUE)  rules = apriori( pd ) r = as(rules , &quot;data.frame&quot;)"}, {"owner": {"reputation": 13, "user_id": 5464029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be5140866bc1115462341539e03f255e?s=128&d=identicon&r=PG&f=1", "display_name": "Animesh Srivastava", "link": "https://stackoverflow.com/users/5464029/animesh-srivastava"}, "reply_to_user": {"reputation": 5903, "user_id": 3908170, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vou9q.jpg?s=128&g=1", "display_name": "DarkCygnus", "link": "https://stackoverflow.com/users/3908170/darkcygnus"}, "edited": false, "score": 0, "creation_date": 1505244539, "post_id": 45970402, "comment_id": 79330799, "body": "Running the above code in R , i get the below output. How can i convert the output in python to below format ?  output      {a=0,b=0} =&gt; {c=1}     0.1      1.000 1.2500000     1 {a=0,c=1} =&gt; {b=0}     0.1      1.000 2.0000000     1  {b=0,c=0} =&gt; {a=1}     0.2      1.000 1.1111111     2  {a=1,c=0} =&gt; {b=0}     0.2      1.000 2.0000000     2"}], "answers": [{"tags": [], "owner": {"reputation": 2760, "user_id": 3820837, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ap31g.jpg?s=128&g=1", "display_name": "Michael Hahsler", "link": "https://stackoverflow.com/users/3820837/michael-hahsler"}, "is_accepted": true, "score": 1, "last_activity_date": 1567806041, "creation_date": 1567806041, "answer_id": 57828810, "question_id": 45970402, "link": "https://stackoverflow.com/questions/45970402/package-arules-in-python/57828810#57828810", "title": "Package Arules in Python", "body": "<p>Here is a minimalist example of how to do this:</p>\n\n<pre><code># prepare the data as a dataframe with boolean values\nimport pandas as pd\n\ndf = pd.DataFrame (\n    [\n        [True,True, True],\n        [True, False,False],\n        [True, True, True],\n        [True, False, False],\n        [True, True, True],\n        [True, False, True],\n        [True, True, True],\n        [False, False, True],\n        [False, True, True],\n        [True, False, True],\n    ],\n    columns=list ('ABC')) \n\n# set up rpy2\nfrom rpy2.robjects import pandas2ri\npandas2ri.activate()\nimport rpy2.robjects as ro\nfrom rpy2.robjects.packages import importr\narules = importr(\"arules\")\n\n# run apriori\nitsets = arules.apriori(df, \n   parameter = ro.ListVector({\"supp\": 0.1, \"target\": \"frequent itemsets\"}))\n\n# get itemsets as a dataframe\nprint(arules.DATAFRAME(itsets))\n\n# get quality as a dataframe\nprint(itsets.slots[\"quality\"])\n\n# get itemsets as a matrix\nitemset_as_matrix = ro.r('function(x) as(items(x), \"matrix\")')\nitemset_as_matrix(itsets)\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 5464029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be5140866bc1115462341539e03f255e?s=128&d=identicon&r=PG&f=1", "display_name": "Animesh Srivastava", "link": "https://stackoverflow.com/users/5464029/animesh-srivastava"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1697, "favorite_count": 2, "accepted_answer_id": 57828810, "answer_count": 1, "score": 0, "last_activity_date": 1567864740, "creation_date": 1504130840, "last_edit_date": 1567864740, "question_id": 45970402, "link": "https://stackoverflow.com/questions/45970402/package-arules-in-python", "title": "Package Arules in Python", "body": "<p>I am using arules in Python. I executed the below code to generate all associations. I want to know how can i convert the output of arules to some data-structure in Python. The output if of type <strong>'rpy2.robjects.methods.RS4'</strong>.\n--below is the code---</p>\n\n<pre><code>from rpy2.robjects import pandas2ri\npandas2ri.activate()\nimport collections\nfrom collections import OrderedDict\nimport pandas as pd\nimport numpy as np\nfrom rpy2.robjects.vectors import ListVector\nfrom rpy2.robjects.packages import importr\narules = importr(\"arules\")\nod = OrderedDict()\nod[\"supp\"] = 0.0005\nod[\"conf\"] = 0.7\nod[\"target\"] = 'rules'\ndf = pd.DataFrame (\n    [\n        ['1','1', '1'],\n        ['1', '0','0'],\n        ['1', '1', '1'],\n        ['1', '0', '0'],\n        ['1', '1', '1'],\n        ['1', '0', '1'],\n        ['1', '1', '1'],\n        ['0', '0', '1'],\n        ['0', '1', '1'],\n        ['1', '0', '1'],\n    ],\n    columns=list ('ABC')) \nresult = ListVector(od)\ndf['A'] = df['A'].astype('category')\ndf['B'] = df['B'].astype('category')\ndf['C'] = df['C'].astype('category')\nmy_rules = arules.apriori(df, parameter=result)\nprint(\"herererererere\")\nprint(type(my_rules))\nprint(\"rules\")\n</code></pre>\n"}, {"tags": ["python", "pygame", "draw", "pacman", "drawrectangle"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 8407890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/790c4fb53477049a738ec2c4346cdfb2?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/8407890/matt"}, "is_accepted": false, "score": 0, "last_activity_date": 1504144737, "creation_date": 1504144737, "answer_id": 45972102, "question_id": 45970399, "link": "https://stackoverflow.com/questions/45970399/pygame-isnt-redrawing-rectangles-after-theyve-disappeared/45972102#45972102", "title": "pygame isn&#39;t redrawing rectangles after they&#39;ve disappeared", "body": "<p>If your sure that pygame.rect.draw is not working than try using the draw function I use it and it works. Look here for more on the draw function </p>\n\n<p><a href=\"https://www.pygame.org/docs/ref/sprite.html#pygame.sprite.Group.draw\" rel=\"nofollow noreferrer\">https://www.pygame.org/docs/ref/sprite.html#pygame.sprite.Group.draw</a></p>\n\n<p>and some example code</p>\n\n<p><a href=\"https://stackoverflow.com/questions/41476249/displaying-platforms-using-strings-pygame\">Displaying platforms using strings (Pygame)</a></p>\n\n<p>I dont know to much about your long lists you have but you could make it shorter is you used string lists (also in the example code). Hope I could help.</p>\n"}, {"tags": [], "owner": {"reputation": 18103, "user_id": 6220679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LK4H1.png?s=128&g=1", "display_name": "skrx", "link": "https://stackoverflow.com/users/6220679/skrx"}, "is_accepted": false, "score": 1, "last_activity_date": 1504474249, "creation_date": 1504474249, "answer_id": 46028001, "question_id": 45970399, "link": "https://stackoverflow.com/questions/45970399/pygame-isnt-redrawing-rectangles-after-theyve-disappeared/46028001#46028001", "title": "pygame isn&#39;t redrawing rectangles after they&#39;ve disappeared", "body": "<p>I would do something like this: Define a function that creates a sprite group and fills it with the pellet sprites, then return it and assign it to a variable in the main function. When the <code>pellets</code> group is empty, just call this function again and assign the new group to the old variable and the pellets will appear again.</p>\n\n<pre><code>import pygame as pg\n\n\nclass Player(pg.sprite.Sprite):\n\n    def __init__(self, pos, *groups):\n        super().__init__(*groups)\n        self.image = pg.Surface((30, 30))\n        self.image.fill(pg.Color('yellow'))\n        self.rect = self.image.get_rect(center=pos)\n        self.vel = pg.math.Vector2(0, 0)\n        self.pos = pg.math.Vector2(pos)\n\n    def update(self):\n        self.pos += self.vel\n        self.rect.center = self.pos\n\n\nclass Pellet(pg.sprite.Sprite):\n\n    def __init__(self, pos, *groups):\n        super().__init__(*groups)\n        self.image = pg.Surface((10, 6))\n        self.image.fill(pg.Color('turquoise'))\n        self.rect = self.image.get_rect(center=pos)\n\n\ndef create_map():\n    \"\"\"Create a sprite group filled with Pellet sprites.\"\"\"\n    group = pg.sprite.Group()\n    for i in range(10):\n        group.add(Pellet((50, 20*i+50)))\n    return group\n\n\ndef main():\n    screen = pg.display.set_mode((640, 480))\n    clock = pg.time.Clock()\n    all_sprites = pg.sprite.Group()\n    player = Player((100, 300), all_sprites)\n    pellets = create_map()\n    all_sprites.add(pellets)\n\n    done = False\n\n    while not done:\n        for event in pg.event.get():\n            if event.type == pg.QUIT:\n                done = True\n            elif event.type == pg.KEYDOWN:\n                if event.key == pg.K_d:\n                    player.vel.x = 5\n                elif event.key == pg.K_a:\n                    player.vel.x = -5\n                elif event.key == pg.K_w:\n                    player.vel.y = -5\n                elif event.key == pg.K_s:\n                    player.vel.y = 5\n            elif event.type == pg.KEYUP:\n                if event.key == pg.K_d:\n                    player.vel.x = 0\n                elif event.key == pg.K_a:\n                    player.vel.x = 0\n                elif event.key == pg.K_w:\n                    player.vel.y = 0\n                elif event.key == pg.K_s:\n                    player.vel.y = 0\n\n        all_sprites.update()\n        hit_pellets = pg.sprite.spritecollide(player, pellets, True)\n        for pellet in hit_pellets:\n            print('Yum!')\n        if not pellets:  # If the pellets group is empty.\n            print('No food left. Respawing food!')\n            pellets = create_map()  # Recreate the group.\n            all_sprites.add(pellets)  # And add them to the general group.\n        screen.fill((30, 30, 30))\n        all_sprites.draw(screen)\n\n        pg.display.flip()\n        clock.tick(30)\n\n\nif __name__ == '__main__':\n    pg.init()\n    main()\n    pg.quit()\n</code></pre>\n"}], "owner": {"reputation": 109, "user_id": 8458080, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a2e4cb56f4add01976daeaf14c523d52?s=128&d=identicon&r=PG&f=1", "display_name": "cdd", "link": "https://stackoverflow.com/users/8458080/cdd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 205, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1548090028, "creation_date": 1504130838, "last_edit_date": 1548090028, "question_id": 45970399, "link": "https://stackoverflow.com/questions/45970399/pygame-isnt-redrawing-rectangles-after-theyve-disappeared", "title": "pygame isn&#39;t redrawing rectangles after they&#39;ve disappeared", "body": "<p>I'm making a pacman game and I have the basics working at the moment, but I can't get the pac pellets to respawn after they have all been eaten. At the moment I have it set up that after a pac pellet is eaten it is removed from the list of pacpellets. When the list is empty it is refilled and then told to redraw all pac pellets onto the screen. It goes though all the correct functions and everything, I've checked with print statements, but <code>pygame.draw.rect</code> isn't working and I can't figure out why.</p>\n\n<pre><code>import pygame\nimport os\nimport sys\nimport copy\n\n\n#intialise the game \npygame.init()\nmyfont = pygame.font.SysFont(\"monospace\", 15)\nscreen = pygame.display.set_mode((448, 576))\ndone = False\nscore=0\n\ny = 416\nx = 232\n\n#sets up clock and loads pacman image\nclock = pygame.time.Clock()\nPACMANSPRITE = pygame.image.load(\"pacman.png\").convert_alpha()\nPACMAN_MAP = pygame.image.load(\"pacman_map.png\").convert_alpha()\n\n#gets pacman intro music, sets music to lower volume then plays it\npygame.mixer.music.load('pacman_beginning.WAV')\npygame.mixer.music.set_volume(0.01)\npygame.mixer.music.play(0)\n\n\n#box class, used for boxes to border pacmans map\nclass boxcollisions(pygame.sprite.Sprite):\n    def __init__(self, x, y):\n        self.y = y\n        self.x = x\n        self.rect = pygame.Rect(self.x, self.y, 12, 12)\n        self.colour = (0, 128, 255)\n\n    def draw(self, screen):\n        pygame.draw.rect(screen, self.colour, self.rect)\n\nclass pointclass(pygame.sprite.Sprite):\n    def __init__(self, x, y):\n        self.y = y\n        self.x = x\n        self.rect = pygame.Rect(self.x, self.y, 12, 12)\n        self.colour = (255, 204, 153)\n        self.score=0\n\n    def draw(self, screen):\n        pygame.draw.rect(screen, self.colour, self.rect)\n\n\n#pacmans class\nclass pacman(pygame.sprite.Sprite):\n    def __init__(self, image, x, y):\n        self.image = image\n        self.y=416\n        self.x=216\n        self.currentx=self.x\n        self.currenty=self.y\n        self.rect = self.image.get_rect()\n        self.rect.left = self.x\n        self.rect.top = self.y\n        self.rect.width=16\n        self.rect.height=16\n\n    # move pacman \n    def movement(self):\n        pressed= pygame.key.get_pressed()\n        if pressed[pygame.K_UP]:\n            self.y -= 2\n        if pressed[pygame.K_DOWN]:\n            self.y += 2\n        if pressed[pygame.K_LEFT]:\n            self.x -= 2\n        if pressed[pygame.K_RIGHT]:\n            self.x += 2\n        self.rect.left = self.x\n        self.rect.top = self.y\n\n    def draw(self, surface):\n        # blit yourself at your current position\n        surface.blit(self.image, (self.x, self.y))\n        self.currentx=self.x\n        self.currenty=self.y\n\n    def outofbounds(self):\n        self.y=self.currenty\n        self.x=self.currentx\n        self.rect.left = self.x\n        self.rect.top = self.y\n\n\n\n#spawn pellets function\ndef spawnpellets(pointspawns):\n    broken=0\n    abc=0\n    efg=0\n    px=0\n    py=-16\n    for row in pointspawns:\n        #y co ordinate\n        py=py+16    \n        for n in row:\n            #x co ordinate\n            n=n-1\n            px=n*16\n            point=(pointclass(px, py))\n            #used to draw points\n            point.draw(screen)\n            if pygame.sprite.collide_rect(sprite, point):\n                removepellets(pointspawns, row, n , py)\n                global score\n                score+=1\n                allpelletsremoved(pointspawns, copyofpointspawns)\n\ndef allpelletsremoved(pointspawns, copyofpointspawns):\n    total=0\n    print()\n    print('start of allpelletsremoved')\n    for row in pointspawns:\n        print('have gone through a row')\n        if not row:\n            total+=1\n            print('current total: ', total)\n    #if total =5 it means all rows are emtpy and thereofr all pellets have been eaten \n    if total==5:\n        pointspawns= copy.deepcopy(copyofpointspawns)\n        spawnpellets(pointspawns)\n\n\n\ndef removepellets(pointspawns, row, n, py):\n    collidedx=n+1\n    collidedy=py/16\n    collidedy=int(collidedy)\n    tempindex=row.index(collidedx)\n    del pointspawns[collidedy][tempindex]\n    #pointspawns[int(collidedy)].insert(collidedx,0)\n\n#co-ordinates for boxes to set up map boundaries\nboxboundaries=[   \n    [],\n    [],\n    [],\n    [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28],\n    [1,14,15,28], #5\n    [1,3,4,5,6,8,9,10,11,12,14,15,17,18,19,20,21,23,24,25,26,28],\n    [1,3,4,5,6,8,9,10,11,12,14,15,17,18,19,20,21,23,24,25,26,28],\n    [1,3,4,5,6,8,9,10,11,12,14,15,17,18,19,20,21,23,24,25,26,28],\n    [1,28],\n    [1,3,4,5,6,8,9,11,12,13,14,15,16,17,18,20,21,23,24,25,26,28], #10\n    [1,3,4,5,6,8,9,11,12,13,14,15,16,17,18,20,21,23,24,25,26,28],\n    [1,8,9,14,15,20,21,28],\n    [1,2,3,4,5,6,8,9,10,11,12,14,15,17,18,19,20,21,23,24,25,26,27,28],\n    [1,2,3,4,5,6,8,9,10,11,12,14,15,17,18,19,20,21,23,24,25,26,27,28],\n    [6,8,9,20,21,23], #15\n    [6,8,9,11,12,13,14,15,16,17,18,20,21,23],\n    [1,2,3,4,5,6,8,9,11,12,13,14,15,16,17,18,20,21,23,24,25,26,27,28],\n    [1,11,12,13,14,15,16,17,18,28],\n    [1,2,3,4,5,6,8,9,11,12,13,14,15,16,17,18,20,21,23,24,25,26,27,28],\n    [6,8,9,11,12,13,14,15,16,17,18,20,21,23,24,25,26,27,28], #20\n    [6,8,9,20,21,23],\n    [6,8,9,11,12,13,14,15,16,17,18,20,21,23],\n    [1,2,3,4,5,6,8,9,11,12,13,14,15,16,17,18,20,21,23,24,25,26,27,28],\n    [1,14,15,28],\n    [1,3,4,5,6,8,9,10,11,12,14,15,17,18,19,20,21,23,24,25,26,28], #25\n    [1,3,4,5,6,8,9,10,11,12,14,15,17,18,19,20,21,23,24,25,26,28],\n    [1,5,6,23,24,28],\n    [1,2,3,5,6,8,9,11,12,13,14,15,16,17,18,20,21,23,24,26,27,28],\n    [1,2,3,5,6,8,9,11,12,13,14,15,16,17,18,20,21,23,24,26,27,28],\n    [1,8,9,14,15,20,21,28], # 30\n    [1,3,4,5,6,7,8,9,10,11,12,14,15,17,18,19,20,21,22,23,24,25,26,28],\n    [1,3,4,5,6,7,8,9,10,11,12,14,15,17,18,19,20,21,22,23,24,25,26,28],\n    [1,28],\n    [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28],                   \n  ]\n\n\n#point spawn locations, temporarily not using it as collecting\n#all points would be to difficult to test\npointspawns1=[ \n    [],\n    [],\n    [],\n    [],\n    [2,3,4,5,6,7,8,9,10,11,12,13,16,17,18,19,20,21,22,23,24,25,26,27], #5\n    [2,7,13,16,22,27],\n    [2,7,13,16,22,27],\n    [2,7,13,16,22,27],\n    [2,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27], \n    [2,7,10,19,22,27], #10\n    [2,7,10,19,22,27],\n    [2,3,4,5,6,7,10,11,12,13,16,17,18,19,22,23,24,25,26,27],\n    [7,22],\n    [7,22],\n    [7,22], #15\n    [7,22],\n    [7,22],\n    [7,22],\n    [7,22],\n    [7,22], #20\n    [7,22],\n    [7,22],\n    [7,22],\n    [2,3,4,5,6,7,8,9,10,11,12,13,16,17,18,19,20,21,22,23,24,25,26,27],\n    [2,7,13,16,22,27], #25\n    [2,7,13,16,22,27],\n    [2,3,4,7,8,9,10,11,12,13,16,17,18,19,20,21,22,25,26,27],\n    [4,7,10,19,22,25],\n    [4,7,10,19,22,25],\n    [2,3,4,5,6,7,10,11,12,13,16,17,18,19,22,23,24,25,26,27],\n    [2,13,16,27], # 30\n    [2,13,16,27],\n    [2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27],                       \n  ]\n\n#temporary point spawn locations, used so it easier to test when they are all eaten\npointspawns=[ \n    [],\n    [],\n    [],\n    [],\n    [2,3,4,5,6,7,8,9,10,11,12,13,16,17,18,19,20,21,22,23,24,25,26,27], #5                     \n  ]\n\n#makes a copy of pointspawns to reset pointspawns for later\ncopyofpointspawns= copy.deepcopy(pointspawns)\n\n\n#instances the pacman class\nsprite = pacman(PACMANSPRITE, x ,y)\n\n\n#main game loop\nwhile not done:\n    for event in pygame.event.get():\n        if event.type == pygame.QUIT:\n                    done = True\n                    pygame.quit()\n                    sys.exit()\n\n\n    screen.fill((0,0,0))\n    screen.blit(PACMAN_MAP, (0, 0))\n\n    #moves pacman\n    sprite.movement()\n\n    #spawn pellets\n    spawnpellets(pointspawns)\n\n    #builds the boxes\n    bx=0\n    by=-16\n    for row in boxboundaries:\n        #y co ordinate\n        by=by+16    \n        for n in row:\n            #x co ordinate\n            n=n-1\n            bx=n*16\n            box=(boxcollisions(bx, by))\n            #used to draw boxes for visual repsentation\n            #box.draw(screen)\n            if pygame.sprite.collide_rect(sprite, box):\n                sprite.outofbounds()\n\n\n\n    #draws pacman\n    sprite.draw(screen)\n\n\n    #draws score to screen\n    label = myfont.render(\"HIGH SCORE:\", 1, (255,255,255))\n    screen.blit(label, (180, 0))\n    labelscore = myfont.render(str(score), 1, (255,255,255))\n    screen.blit(labelscore, (180, 16))\n\n\n    pygame.display.flip()\n    clock.tick(60)\n</code></pre>\n"}, {"tags": ["python", "list", "csv", "glob", "enumerate"], "comments": [{"owner": {"reputation": 5903, "user_id": 3908170, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vou9q.jpg?s=128&g=1", "display_name": "DarkCygnus", "link": "https://stackoverflow.com/users/3908170/darkcygnus"}, "edited": false, "score": 0, "creation_date": 1504132364, "post_id": 45970335, "comment_id": 78900507, "body": "So what is your question? I did not get what you want to do. Also, I believe you wrote in the code <code>if t!= f:</code> and missed a space between variable <code>t</code> and the <code>!</code>"}, {"owner": {"reputation": 19, "user_id": 5834700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/674672948b7d4afb96a711f61e9db99c?s=128&d=identicon&r=PG&f=1", "display_name": "IF U FLOW U KNOW", "link": "https://stackoverflow.com/users/5834700/if-u-flow-u-know"}, "reply_to_user": {"reputation": 5903, "user_id": 3908170, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vou9q.jpg?s=128&g=1", "display_name": "DarkCygnus", "link": "https://stackoverflow.com/users/3908170/darkcygnus"}, "edited": false, "score": 0, "creation_date": 1504136775, "post_id": 45970335, "comment_id": 78901582, "body": "wish to merge the two csv&#39;s into one table for analyzing. I have assigned each file with a number using the enumerate function but now wish to pull these assigned files from the list for further analysis."}], "owner": {"reputation": 19, "user_id": 5834700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/674672948b7d4afb96a711f61e9db99c?s=128&d=identicon&r=PG&f=1", "display_name": "IF U FLOW U KNOW", "link": "https://stackoverflow.com/users/5834700/if-u-flow-u-know"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1504137418, "creation_date": 1504130431, "last_edit_date": 1504137418, "question_id": 45970335, "link": "https://stackoverflow.com/questions/45970335/taking-elements-from-list-after-enumeration", "title": "Taking elements from list after enumeration", "body": "<pre><code>users = []\nfor t in enumerate(glob.glob('/Users/*/*_grounder.csv'), 1):\n    for f in enumerate(glob.glob('/Users//*/*_pip.csv'), 1):\n        if t != f:\n            users.append((t, f)\n</code></pre>\n\n<p>With the code above I have a list with common numbers starting at 1 with this list I wish to take these CSV files from the list and make them into their own data frames OR merge them into one. </p>\n\n<p>For example:</p>\n\n<pre><code>(1, file_grounder.csv), (1, file_pip,csv), 2, (etc,etc)\n</code></pre>\n\n<p>Takes the files with 1 in front of them and merge them from the list similar to how I globbed the folders for the files.</p>\n"}, {"tags": ["python", "scipy", "simulation", "mathematical-optimization"], "comments": [{"owner": {"reputation": 5903, "user_id": 3908170, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vou9q.jpg?s=128&g=1", "display_name": "DarkCygnus", "link": "https://stackoverflow.com/users/3908170/darkcygnus"}, "edited": false, "score": 0, "creation_date": 1504130739, "post_id": 45970322, "comment_id": 78900028, "body": "Hi and welcome to Stack Overflow! Please take a time to go through the <a href=\"https://stackoverflow.com/tour\">welcome tour</a> to know your way around here (and also to earn your first badge), read how to create a <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a> and also check <a href=\"https://stackoverflow.com/help/how-to-ask\">How to Ask Good Questions</a> so you increase your chances to get feedback and useful answers. As I see it, your post lacks a question or is not clear what you desire. Could you edit it to correct so?"}, {"owner": {"reputation": 521, "user_id": 6120835, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/49bd24c9e4c5f3a7c2ac37e8e8ca8543?s=128&d=identicon&r=PG&f=1", "display_name": "Matias", "link": "https://stackoverflow.com/users/6120835/matias"}, "edited": false, "score": 0, "creation_date": 1504135642, "post_id": 45970322, "comment_id": 78901353, "body": "I work on similar things - hope this adoption is OK"}], "owner": {"reputation": 61, "user_id": 8534098, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1907be02ca79cb4564f7df3f6cf21af5?s=128&d=identicon&r=PG&f=1", "display_name": "RacAtlon", "link": "https://stackoverflow.com/users/8534098/racatlon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 299, "favorite_count": 1, "closed_date": 1504170743, "answer_count": 0, "score": 2, "last_activity_date": 1504130328, "creation_date": 1504130328, "question_id": 45970322, "link": "https://stackoverflow.com/questions/45970322/numerical-optimization-with-scipy-practical-recommendations", "closed_reason": "Needs more focus", "title": "Numerical optimization with Scipy: Practical recommendations", "body": "<p>I was trying to learn Scipy, using it for simulation-based optimization. The objective function is evaluated based on a simulation model without having any information about derivatives. Constraint violations are penalized by adding penalty terms. During the last years I worked more on simulation and my optimization knowledge is based on some classes and so I am lacking of \"practical knoweledge\". I also searched for some practical guidelines using scipy - but I could not find anything relevant. I want to test several algorithms from<code>scipy.optimize.minimize</code> like Nelder-Mead or TNC or <code>scipy.optimize.differential_evolution</code>. I list some fundamental questions that arose during the last week of trying to get into this topic:</p>\n\n<ul>\n<li>Value (range) of the optimization function: Should the value  be in the magnitude of 1? I work on an example where I try to minimize an input trajectory (the objective function is to minimize the integral). If I don't scale it down, the  value is in the magnitude 1e7. In what magnitude should the penalty term be? How would you increase the penalty term in each iteration?</li>\n<li>This question is related to the previous: I guess some settings depend on the magnitude of the value of the objective function: <em>Tolerance for termination</em>, <em>step size used for numerical approximation of the jacobian</em>, <em>Maximum step for the line search</em> or <em>xtol/xatol</em> and <em>ftol/fatol</em>. Are there some practical recommendations? </li>\n</ul>\n\n<p>Would be great if someone could help me, or link to practical examples/literature.</p>\n\n<p>Thank you for your help.</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "answers": [{"tags": [], "owner": {"reputation": 32054, "user_id": 6287308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NdmQp.jpg?s=128&g=1", "display_name": "Vaishali", "link": "https://stackoverflow.com/users/6287308/vaishali"}, "is_accepted": true, "score": 3, "last_activity_date": 1504130770, "last_edit_date": 1504130770, "creation_date": 1504130304, "answer_id": 45970318, "question_id": 45970258, "link": "https://stackoverflow.com/questions/45970258/python-pandas-check-if-dataframes-column-value-is-in-another-dataframes-colum/45970318#45970318", "title": "python pandas: Check if dataframe&#39;s column value is in another dataframe&#39;s column, then count and list it", "body": "<p>You can use merge</p>\n\n<pre><code>df.merge(df1, on = 'uid', how = 'left').fillna('')\n\n    uid value   value1\n0   uid1    1   \n1   uid2    2   5\n2   uid3    3   \n3   uid4    4   \n</code></pre>\n\n<p>For the first part of the question, you can use intersection</p>\n\n<pre><code>list_val_in_both_df  = list(set(df.uid).intersection(set(df1.uid)))\n</code></pre>\n\n<p>You get</p>\n\n<pre><code>['uid2', 'uid4']\n</code></pre>\n"}], "owner": {"reputation": 117, "user_id": 4309647, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d5d07a6be62a2c11f57daa6c1a6a5ad7?s=128&d=identicon&r=PG&f=1", "display_name": "fmc100", "link": "https://stackoverflow.com/users/4309647/fmc100"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 709, "favorite_count": 0, "accepted_answer_id": 45970318, "answer_count": 1, "score": 1, "last_activity_date": 1504130770, "creation_date": 1504129961, "question_id": 45970258, "link": "https://stackoverflow.com/questions/45970258/python-pandas-check-if-dataframes-column-value-is-in-another-dataframes-colum", "title": "python pandas: Check if dataframe&#39;s column value is in another dataframe&#39;s column, then count and list it", "body": "<p>Learning Python here, and any help on this is much appreciated. I have a two-part problem, and although I have created a solution to the first part, there has to be a much more pythonic way to accomplish the goal. The second part, not so sure how to proceed. </p>\n\n<p>I have columns of unique IDs in two separate dataframes. I want to count the number of times that a uid in df_2 uid column occurs in df_1's uid column, and then add that uid to a list if it is both. The following code example works for me, but i am worried there is a problem somewhere, and there has to be much better way.</p>\n\n<pre><code>data = {'uid':['uid1', 'uid2', 'uid3', 'uid4'], 'value': [1, 2, 3, 4]}\ndf = pd.DataFrame(data)\n\ndata1 = {'uid':['uid4', 'uid2', 'uid5'], 'value1': [\"\", 5, 6]}\ndf1 = pd.DataFrame(data1)\n\ncount_val_in_both_df = 0\nlist_val_in_both_df = []\nfor x in range(len(df1.iloc[:, 0])) :\n    if df1.iloc[x, 0] in df.iloc[:, 0].values :\n        count_val_in_both_df += 1\n        list_val_in_both_df.append(df1.iloc[x, 0])        \nprint('count = ' + str(count_val_in_both_df))\nprint(list_val_in_both_df)\n</code></pre>\n\n<p>Which outputs:</p>\n\n<pre><code>df\n    uid  value\n0  uid1      1\n1  uid2      2\n2  uid3      3\n3  uid4      4\n\n\ndf1\n    uid value1\n0  uid4       \n1  uid2      5\n2  uid5      6\n\n\ncount = 2\n['uid4', 'uid2']\n</code></pre>\n\n<p>The second part is creating a column in df for a values in df1 and adding the value from df1. I am pretty lost on this part of it, but want an outcome like this:</p>\n\n<pre><code>{    uid  value value1\n0  uid1      1       \n1  uid2      2      5\n2  uid3      3       \n3  uid4      4       }\n</code></pre>\n"}, {"tags": ["python", "scrapy"], "answers": [{"tags": [], "owner": {"reputation": 2024, "user_id": 3255354, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002055139416/picture?type=large", "display_name": "Eugene V", "link": "https://stackoverflow.com/users/3255354/eugene-v"}, "is_accepted": false, "score": 1, "last_activity_date": 1504131053, "creation_date": 1504131053, "answer_id": 45970436, "question_id": 45970217, "link": "https://stackoverflow.com/questions/45970217/how-can-i-instruct-scrapy-to-not-serialize-an-item-field/45970436#45970436", "title": "How can I instruct Scrapy to not serialize an item field?", "body": "<p>You can specify fields, which should be exported via <a href=\"https://doc.scrapy.org/en/latest/topics/feed-exports.html#feed-export-fields\" rel=\"nofollow noreferrer\">FEED_EXPORT_FIELDS</a> setting. For example:</p>\n\n<pre><code># in `settings.py`\nFEED_EXPORT_FIELDS = ['name', 'url', 'status_code']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 883, "user_id": 2069269, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/68e43881e3711bf2f6d678cb76f52880?s=128&d=identicon&r=PG&f=1", "display_name": "Acsor", "link": "https://stackoverflow.com/users/2069269/acsor"}, "is_accepted": false, "score": 0, "last_activity_date": 1504131291, "creation_date": 1504131291, "answer_id": 45970482, "question_id": 45970217, "link": "https://stackoverflow.com/questions/45970217/how-can-i-instruct-scrapy-to-not-serialize-an-item-field/45970482#45970482", "title": "How can I instruct Scrapy to not serialize an item field?", "body": "<p><code>BaseItemExporter</code>, the base abstract class of all built-in exporters, provides a <a href=\"https://doc.scrapy.org/en/latest/topics/exporters.html#scrapy.exporters.BaseItemExporter.fields_to_export\" rel=\"nofollow noreferrer\">fields_to_export</a> attribute with the list of the field names to export. This is right-out-of the doc and I'm surprised I haven't noticed it before.</p>\n"}], "owner": {"reputation": 883, "user_id": 2069269, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/68e43881e3711bf2f6d678cb76f52880?s=128&d=identicon&r=PG&f=1", "display_name": "Acsor", "link": "https://stackoverflow.com/users/2069269/acsor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 387, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1504131291, "creation_date": 1504129773, "last_edit_date": 1504130152, "question_id": 45970217, "link": "https://stackoverflow.com/questions/45970217/how-can-i-instruct-scrapy-to-not-serialize-an-item-field", "title": "How can I instruct Scrapy to not serialize an item field?", "body": "<p>As a learning experiment for familiarizing with Scrapy I'm writing a Scraper which checks all the links of a HTML page and reports the status codes of HTTP <a href=\"https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Request_methods\" rel=\"nofollow noreferrer\">HEAD</a> requests directed to them. Fact is, in one of my item definitions I have one item field, namely <code>parent_url</code>, treated as metadata - that is, I do not mean to display it in my Scraper's output.</p>\n\n<p><code>parent_url</code> is defined in the <code>LinkItem</code> class, as shown below:</p>\n\n<pre><code>class LinkItem(Item):\n    name = Field()\n    url = Field()\n    parent_url = Field()   # Identifies what URL this item was extracted from\n    status_code = Field()\n</code></pre>\n\n<p>In order to omit <code>parent_url</code> from my Spider's output I've tried:</p>\n\n<ol>\n<li>Defining <code>parent_url</code> in <code>__init__</code> as an instance attribute - I got exceptions raised when trying to access it;</li>\n<li>Assigning to <code>self[\"parent_url\"]</code> inside <code>__init__</code>, but as already noted by the documentation Scrapy doesn't let assigning to undeclared fields;</li>\n<li>Assigning <code>Field(serializer=None)</code> or <code>Field(serializer=empty_function)</code> to <code>parent_url</code>, which generated continuous exceptions while scraping and a JSON output with only commas.</li>\n</ol>\n\n<p>Not having yet come to a solution, I'm looking for external help. The <code>parent_url</code> field/attribute is used internally within a pipeline, and I don't know what else to substitute it with.</p>\n"}, {"tags": ["python", "pandas", "datareader"], "comments": [{"owner": {"reputation": 2444, "user_id": 3462509, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d081277a16d009abe7b9447ed8171f84?s=128&d=identicon&r=PG&f=1", "display_name": "Solaxun", "link": "https://stackoverflow.com/users/3462509/solaxun"}, "edited": false, "score": 0, "creation_date": 1504130577, "post_id": 45970211, "comment_id": 78899969, "body": "... did you read the error message and do what it said?"}, {"owner": {"reputation": 721, "user_id": 8297370, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/54f76ea5ac5fc5c704c55d2cf082b6b3?s=128&d=identicon&r=PG&f=1", "display_name": "zsad512", "link": "https://stackoverflow.com/users/8297370/zsad512"}, "reply_to_user": {"reputation": 2444, "user_id": 3462509, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d081277a16d009abe7b9447ed8171f84?s=128&d=identicon&r=PG&f=1", "display_name": "Solaxun", "link": "https://stackoverflow.com/users/3462509/solaxun"}, "edited": false, "score": 0, "creation_date": 1504130845, "post_id": 45970211, "comment_id": 78900067, "body": "....@Solaxun did you read my question? I installed pandas-datareader but am still getting an error."}, {"owner": {"reputation": 358, "user_id": 8386102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67fefdc8922341d2d24c1f821609f50c?s=128&d=identicon&r=PG&f=1", "display_name": "dugup", "link": "https://stackoverflow.com/users/8386102/dugup"}, "edited": false, "score": 0, "creation_date": 1504131450, "post_id": 45970211, "comment_id": 78900229, "body": "Are you now importing from the new package? As the error says, your import should now be <code>from pandas_datareader import data, wb</code>"}, {"owner": {"reputation": 2444, "user_id": 3462509, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d081277a16d009abe7b9447ed8171f84?s=128&d=identicon&r=PG&f=1", "display_name": "Solaxun", "link": "https://stackoverflow.com/users/3462509/solaxun"}, "edited": false, "score": 0, "creation_date": 1504131605, "post_id": 45970211, "comment_id": 78900273, "body": "I read the question, but i didn&#39;t see an updated import statement which is what the error message said to do <i>after</i> downloading."}, {"owner": {"reputation": 721, "user_id": 8297370, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/54f76ea5ac5fc5c704c55d2cf082b6b3?s=128&d=identicon&r=PG&f=1", "display_name": "zsad512", "link": "https://stackoverflow.com/users/8297370/zsad512"}, "edited": false, "score": 0, "creation_date": 1504189093, "post_id": 45970211, "comment_id": 78927051, "body": "Yes I changed the import statement"}], "answers": [{"tags": [], "owner": {"reputation": 623, "user_id": 4183877, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/1e53d85080342394e9412318ee041f16?s=128&d=identicon&r=PG&f=1", "display_name": "hubbs5", "link": "https://stackoverflow.com/users/4183877/hubbs5"}, "is_accepted": false, "score": 3, "last_activity_date": 1510669264, "last_edit_date": 1510669264, "creation_date": 1510668361, "answer_id": 47287812, "question_id": 45970211, "link": "https://stackoverflow.com/questions/45970211/pandas-data-reader-update-getting-fred-currency-exchange-rates/47287812#47287812", "title": "Pandas data reader update, getting FRED currency exchange rates", "body": "<p>There are a few different ways to get the FRED data. For the generic <code>DataReader</code> call, try (using version 0.5.0):</p>\n\n<pre><code>import pandas_datareader as pdr\ncny = pdr.DataReader(\"DEXCHUS\", \"fred\")\n</code></pre>\n\n<p>Or, more similar to the syntax you had previously:</p>\n\n<pre><code>from pandas_datareader import data\ncny = data.get_data_fred(\"DEXCHUS\")\n</code></pre>\n\n<p>The <code>data.get_data_fred</code> method just returns the following, which provides a third way to get your data:</p>\n\n<pre><code># Connect to FRED report and read from connection\ncny = data.FredReader(\"DEXCHUS\").read()\n</code></pre>\n\n<p>All results should be identical, however I prefer the more general first call myself.</p>\n"}], "owner": {"reputation": 721, "user_id": 8297370, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/54f76ea5ac5fc5c704c55d2cf082b6b3?s=128&d=identicon&r=PG&f=1", "display_name": "zsad512", "link": "https://stackoverflow.com/users/8297370/zsad512"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1333, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1510669264, "creation_date": 1504129736, "last_edit_date": 1504130935, "question_id": 45970211, "link": "https://stackoverflow.com/questions/45970211/pandas-data-reader-update-getting-fred-currency-exchange-rates", "title": "Pandas data reader update, getting FRED currency exchange rates", "body": "<p>So, I was attempting to grab USD/CNY rates from FRED using Pandas with the following code I found on another stack exchange post:</p>\n\n<pre><code>import pandas.io.data as web\ncny = wb.get_data_fred('DEXCHUS')\n</code></pre>\n\n<p>However I got an error- </p>\n\n<pre><code>ImportError: The pandas.io.data module is moved to a separate package (pandas-datareader). After installing the pandas-datareader package (https://github.com/pydata/pandas-datareader), you can change the import ``from pandas.io import data, wb`` to ``from pandas_datareader import data, wb``.\n</code></pre>\n\n<p>I followed the GitHub instructions to install pandas-datareader and then changed to <code>from pandas.io import data, wb</code> then when I try to run my code I get an error that the module has no <code>get_data_fred</code>. </p>\n\n<p>How can I use the updated package to get the FRED data?</p>\n"}, {"tags": ["python", "python-3.x", "numpy", "recursion", "scipy"], "answers": [{"comments": [{"owner": {"reputation": 28612, "user_id": 7954504, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/6POkt.jpg?s=128&g=1", "display_name": "Brad Solomon", "link": "https://stackoverflow.com/users/7954504/brad-solomon"}, "edited": false, "score": 0, "creation_date": 1504130586, "post_id": 45970281, "comment_id": 78899972, "body": "Seems to be on the right track but something is off.  The result <code>y</code> should equal <code>true_y</code> from above.  I also get an error from setting <code>a[0]=0</code> i.e. <code>[0, 1 - alpha]</code> (<code>ValueError: BUG: filter coefficient a[0] == 0 not supported yet</code>)"}, {"owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "edited": false, "score": 1, "creation_date": 1504133365, "post_id": 45970281, "comment_id": 78900765, "body": "The recurrence relation can be written <code>y[k] - (1 - a)*y[k-1] = a*x[k]</code>.  Take the z-transform of <i>that</i> and solve for <code>Y(z)</code> to get the transfer function."}, {"owner": {"reputation": 27886, "user_id": 636626, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/b18fc48caab5bf7c3e2a15292972f05b?s=128&d=identicon&r=PG", "display_name": "Nils Werner", "link": "https://stackoverflow.com/users/636626/nils-werner"}, "edited": false, "score": 0, "creation_date": 1504133622, "post_id": 45970281, "comment_id": 78900840, "body": "I need to brush up my z Transform skills it seems :-D"}, {"owner": {"reputation": 28612, "user_id": 7954504, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/6POkt.jpg?s=128&g=1", "display_name": "Brad Solomon", "link": "https://stackoverflow.com/users/7954504/brad-solomon"}, "reply_to_user": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "edited": false, "score": 0, "creation_date": 1504139735, "post_id": 45970281, "comment_id": 78902098, "body": "This works in addition to @WarrenWeckesser&#39;s answer.  I would just suggest <code>lfilter([a], [1., -1. + a], np.insert(x[1:], 0, x[0] &#47; a))</code> to avoid modifying <code>x</code> inplace."}], "tags": [], "owner": {"reputation": 27886, "user_id": 636626, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/b18fc48caab5bf7c3e2a15292972f05b?s=128&d=identicon&r=PG", "display_name": "Nils Werner", "link": "https://stackoverflow.com/users/636626/nils-werner"}, "is_accepted": false, "score": 1, "last_activity_date": 1504134343, "last_edit_date": 1504134343, "creation_date": 1504130090, "answer_id": 45970281, "question_id": 45970182, "link": "https://stackoverflow.com/questions/45970182/recursion-iir-filter-with-scipy-lfilter/45970281#45970281", "title": "Recursion: IIR filter with `scipy.lfilter`", "body": "<p>Take the z-transform of your filter, that gives you the values for the numerator <code>b</code> and denominator <code>a</code>:</p>\n\n<pre><code>       alpha\ny(z) = ------------------ x(z)\n       1 - (1-alpha) z^-1\n</code></pre>\n\n<p>So you run</p>\n\n<pre><code>import scipy.signal\nx[0] /= alpha\ny = scipy.signal.lfilter([alpha], [1, - 1 + alpha], x)\n</code></pre>\n\n<p>Which yields</p>\n\n<pre><code>array([ 101.1818    ,  101.176862  ,  101.16819314, ...,  120.9813121 ,\n        120.92484874,  120.85786628])\n</code></pre>\n\n<p>Note I have scaled <code>x[0]</code> to account for the initial condition you wanted.</p>\n"}, {"tags": [], "owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "is_accepted": true, "score": 3, "last_activity_date": 1504133683, "last_edit_date": 1504133683, "creation_date": 1504133023, "answer_id": 45970781, "question_id": 45970182, "link": "https://stackoverflow.com/questions/45970182/recursion-iir-filter-with-scipy-lfilter/45970781#45970781", "title": "Recursion: IIR filter with `scipy.lfilter`", "body": "<p>The correct arguments for the coefficients of the transfer function are <code>[a]</code> and <code>[1, -b]</code>.</p>\n\n<p>To handle your desired initial condition, you can create the correct initial state for the filter using <a href=\"https://docs.scipy.org/doc/scipy/reference/generated/scipy.signal.lfiltic.html\" rel=\"nofollow noreferrer\"><code>scipy.signal.lfiltic</code></a>:</p>\n\n<pre><code>zi = lfiltic([a], [1, -b], y=[x[0]])\n</code></pre>\n\n<p>Then call <code>lfilter</code> with the <code>zi</code> argument:</p>\n\n<pre><code>y, zo = lfilter([a], [1, -b], x, zi=zi)\n</code></pre>\n\n<p>Here are an <code>x</code>, <code>y</code> (computed using <code>lfilter</code> with <code>zi</code>), and your <code>true_y</code>:</p>\n\n<pre><code>In [37]: x\nOut[37]: array([ 3.,  1.,  2.,  0., -1.,  2.])\n\nIn [38]: y\nOut[38]: \narray([ 3.        ,  2.94      ,  2.9118    ,  2.824446  ,  2.70971262,\n        2.68842124])\n\nIn [39]: true_y\nOut[39]: \narray([ 3.        ,  2.94      ,  2.9118    ,  2.824446  ,  2.70971262,\n        2.68842124])\n</code></pre>\n"}], "owner": {"reputation": 28612, "user_id": 7954504, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/6POkt.jpg?s=128&g=1", "display_name": "Brad Solomon", "link": "https://stackoverflow.com/users/7954504/brad-solomon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 924, "favorite_count": 0, "accepted_answer_id": 45970781, "answer_count": 2, "score": 1, "last_activity_date": 1504137576, "creation_date": 1504129574, "last_edit_date": 1504137576, "question_id": 45970182, "link": "https://stackoverflow.com/questions/45970182/recursion-iir-filter-with-scipy-lfilter", "title": "Recursion: IIR filter with `scipy.lfilter`", "body": "<p>Given some data <code>x</code>:</p>\n\n<pre><code>from pandas_datareader.data import DataReader as dr\nx = np.squeeze(dr('DTWEXB', 'fred').dropna().values)\n</code></pre>\n\n<p>I want to calculate another vector <code>y</code> as follows:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Hy10l.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Hy10l.png\" alt=\"enter image description here\"></a></p>\n\n<p>Where <em>alpha</em> equals 0.03, in this case.</p>\n\n<p>Can I do this with <a href=\"https://docs.scipy.org/doc/scipy/reference/generated/scipy.signal.lfilter.html\" rel=\"nofollow noreferrer\"><code>scipy.lfilter?</code></a>.  Similar question <a href=\"https://stackoverflow.com/questions/26267809/recursive-definitions-in-pandas\">here</a>, but in that case the starting value of the result is 0 and that is throwing something off.</p>\n\n<p>My attempt:</p>\n\n<pre><code>from scipy.signal import lfilter\na = 0.03\nb = 1 - a\ny0 = x[0]\ny = lfilter([a], [y0, -b], x)\n</code></pre>\n\n<p>The results should be:</p>\n\n<pre><code>true_y = np.empty(len(x))\nfor k in range(0, len(true_y)):\n    if k == 0:\n        true_y[k] = x[0]\n    else:\n        true_y[k] = a*x[k] + b*true_y[k-1]\nprint(true_y)\n[ 101.1818      101.176862    101.16819314 ...,  120.9813121   120.92484874\n  120.85786628]\n</code></pre>\n"}, {"tags": ["python", "arrays"], "comments": [{"owner": {"reputation": 46136, "user_id": 3890632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNkgF.png?s=128&g=1", "display_name": "khelwood", "link": "https://stackoverflow.com/users/3890632/khelwood"}, "edited": false, "score": 2, "creation_date": 1504129869, "post_id": 45970155, "comment_id": 78899709, "body": "You should fix the indentation. Badly indented Python code is nonsense."}, {"owner": {"reputation": 1767, "user_id": 5420432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/626fb32f10020d504b6090933d592433?s=128&d=identicon&r=PG", "display_name": "RobertB", "link": "https://stackoverflow.com/users/5420432/robertb"}, "edited": false, "score": 0, "creation_date": 1504130535, "post_id": 45970155, "comment_id": 78899952, "body": "Agree on the indents. I think your problem starts with <code>counter = 1</code> since Python arrays start with element 0. I think <code>counter = 0</code> is where you should start. You are skipping the first element of the array and thus can&#39;t find &#39;9&#39; there :)"}, {"owner": {"reputation": 33, "user_id": 2845180, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e11f6b89215dd8293644424a1db6b13f?s=128&d=identicon&r=PG&f=1", "display_name": "user2845180", "link": "https://stackoverflow.com/users/2845180/user2845180"}, "edited": false, "score": 0, "creation_date": 1504134599, "post_id": 45970155, "comment_id": 78901119, "body": "Thank you all for you comments. I got it to work via the advice given by Solaxun. I will update the post soon."}], "answers": [{"tags": [], "owner": {"reputation": 7725, "user_id": 4889267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b86b65464f4070d38bbf2abdbd4f1610?s=128&d=identicon&r=PG&f=1", "display_name": "AK47", "link": "https://stackoverflow.com/users/4889267/ak47"}, "is_accepted": false, "score": 1, "last_activity_date": 1504130039, "last_edit_date": 1504130039, "creation_date": 1504129705, "answer_id": 45970206, "question_id": 45970155, "link": "https://stackoverflow.com/questions/45970155/python-array-indexing-in-for-loop/45970206#45970206", "title": "Python array indexing in for loop", "body": "<p>You dont need to over complicate it with for loops. You can simply the problem:</p>\n\n<pre><code>xvals = [1, 3, 5, 6, 7, 8, 9]\nyvals = [9, 3, 1, 8, 6, 9, 2]\nxlookfor = 6\nyvals[xvals.index(xlookfor)]\n&gt;&gt; 8\nxlookfor = 9\nyvals[xvals.index(xlookfor)]\n&gt;&gt; 2\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2444, "user_id": 3462509, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d081277a16d009abe7b9447ed8171f84?s=128&d=identicon&r=PG&f=1", "display_name": "Solaxun", "link": "https://stackoverflow.com/users/3462509/solaxun"}, "is_accepted": false, "score": 1, "last_activity_date": 1504131559, "creation_date": 1504131559, "answer_id": 45970526, "question_id": 45970155, "link": "https://stackoverflow.com/questions/45970155/python-array-indexing-in-for-loop/45970526#45970526", "title": "Python array indexing in for loop", "body": "<p>In your solution, what you are doing is keeping <code>b</code> two steps ahead, at all times, of the current value you are iterating over in <code>xvals</code>, or <code>i</code> in your case.  I assume what you want to do is keep it one step ahead, so that's problem number one, although not the source of your index error.</p>\n\n<p>The reason for your index error is because once <code>b</code> sees 9, <code>i</code> is two steps before that, or 7.  You are then trying to access the 7th position in yvals, which is outside of it's bounds of 0-6 (zero based indexing in python).</p>\n\n<p>You are doing this: yvals[7], since e is 7 when the loop finishes.</p>\n"}], "owner": {"reputation": 33, "user_id": 2845180, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e11f6b89215dd8293644424a1db6b13f?s=128&d=identicon&r=PG&f=1", "display_name": "user2845180", "link": "https://stackoverflow.com/users/2845180/user2845180"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1504145347, "creation_date": 1504129455, "last_edit_date": 1504145347, "question_id": 45970155, "link": "https://stackoverflow.com/questions/45970155/python-array-indexing-in-for-loop", "title": "Python array indexing in for loop", "body": "<p>The code I have written works for all values except for when I set xlookfor to 9, which produces an index error. I've messed with changing the index bounds (changing counter to counter = 0) and a few other things, but ended up with the same error. I know this is a simple indexing fix, but I can't figure it out. Any help would be appreciated. </p>\n\n<pre><code>firstlist = [1, 3, 5, 6, 7, 8, 9]\nsecondlist = [9, 3, 1, 8, 6, 9, 2]\nvaluetolookfor = 6\n\nb = 0\ne = 0\ns = 0\ncounter = 1\n\n    for i in firstlist: \n        counter += 1\n        if i &lt;= valuetolookfor:\n            s = i-1\n            b = firstlist[counter]\n              if b &gt;= valuetolookfor:\n                e = i\n                break\n</code></pre>\n"}, {"tags": ["python", "google-app-engine", "key", "entity", "datastore"], "comments": [{"owner": {"reputation": 37127, "user_id": 4495081, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/OuWYd.jpg?s=128&g=1", "display_name": "Dan Cornilescu", "link": "https://stackoverflow.com/users/4495081/dan-cornilescu"}, "edited": false, "score": 0, "creation_date": 1504129898, "post_id": 45970096, "comment_id": 78899723, "body": "Which datastore library are you using? Might be good to show the code as well. Usually the key is an object, which might not serialize properly. Some libraries offer ways of encoding keys as strings."}, {"owner": {"reputation": 141, "user_id": 1835109, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3fed158383a7815cacd3e673854723b2?s=128&d=identicon&r=PG", "display_name": "dnez", "link": "https://stackoverflow.com/users/1835109/dnez"}, "reply_to_user": {"reputation": 37127, "user_id": 4495081, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/OuWYd.jpg?s=128&g=1", "display_name": "Dan Cornilescu", "link": "https://stackoverflow.com/users/4495081/dan-cornilescu"}, "edited": false, "score": 0, "creation_date": 1504130676, "post_id": 45970096, "comment_id": 78900004, "body": "No sql and NDB model"}], "answers": [{"comments": [{"owner": {"reputation": 141, "user_id": 1835109, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3fed158383a7815cacd3e673854723b2?s=128&d=identicon&r=PG", "display_name": "dnez", "link": "https://stackoverflow.com/users/1835109/dnez"}, "edited": false, "score": 0, "creation_date": 1504150206, "post_id": 45972268, "comment_id": 78904353, "body": "Thanks! headed to wrong direction previously. I was just looking at the key class documentation:  <a href=\"https://cloud.google.com/appengine/docs/standard/python/ndb/keyclass\" rel=\"nofollow noreferrer\">cloud.google.com/appengine/docs/standard/python/ndb/keyclass</a>  This will return id,   id = sandy_key.id()"}, {"owner": {"reputation": 37127, "user_id": 4495081, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/OuWYd.jpg?s=128&g=1", "display_name": "Dan Cornilescu", "link": "https://stackoverflow.com/users/4495081/dan-cornilescu"}, "reply_to_user": {"reputation": 141, "user_id": 1835109, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3fed158383a7815cacd3e673854723b2?s=128&d=identicon&r=PG", "display_name": "dnez", "link": "https://stackoverflow.com/users/1835109/dnez"}, "edited": false, "score": 1, "creation_date": 1504150752, "post_id": 45972268, "comment_id": 78904485, "body": "Side note, if you use the IDs- they do not preserve the ancestry information, so they&#39;re only unique within the entities with the same parent key (or no parent key). To re-construct the original entity key you need its parent key. The key urlsafe string contains the entire ancestry. Not an issue if you don&#39;t use the entity ancestry."}, {"owner": {"reputation": 14220, "user_id": 136598, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/55c76f58f63ba7cbb85658158b3a82f8?s=128&d=identicon&r=PG&f=1", "display_name": "gaefan", "link": "https://stackoverflow.com/users/136598/gaefan"}, "edited": false, "score": 1, "creation_date": 1504182086, "post_id": 45972268, "comment_id": 78921860, "body": "One thing to note, the url safe key also includes an app id so if you are transferring data to another app, it may not work as desired."}, {"owner": {"reputation": 37127, "user_id": 4495081, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/OuWYd.jpg?s=128&g=1", "display_name": "Dan Cornilescu", "link": "https://stackoverflow.com/users/4495081/dan-cornilescu"}, "edited": false, "score": 1, "creation_date": 1504208815, "post_id": 45972268, "comment_id": 78938254, "body": "The kind is also part of the key, so you can&#39;t have an object of a different kind having the same key. But they can have the same ID."}], "tags": [], "owner": {"reputation": 37127, "user_id": 4495081, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/OuWYd.jpg?s=128&g=1", "display_name": "Dan Cornilescu", "link": "https://stackoverflow.com/users/4495081/dan-cornilescu"}, "is_accepted": true, "score": 1, "last_activity_date": 1504146099, "creation_date": 1504146099, "answer_id": 45972268, "question_id": 45970096, "link": "https://stackoverflow.com/questions/45970096/how-to-loop-the-following-datastore-data-with-python-and-ndb-model-and-return-to/45972268#45972268", "title": "How to loop the following datastore data with python and ndb model and return to json.dumps?", "body": "<p>The <code>Key</code> in NDB is a python class instance (an object) which doesn't serialize properly in json. But it comes with the <code>.urlsafe()</code> method converting it to a string which can be json-dumped. From <a href=\"https://cloud.google.com/appengine/docs/standard/python/ndb/creating-entities#Python_retrieving_entities\" rel=\"nofollow noreferrer\">Retrieving Entities from Keys</a>:</p>\n\n<blockquote>\n  <p>You can also use an entity's key to obtain an encoded string suitable\n  for embedding in a URL:</p>\n\n<pre><code>url_string = sandy_key.urlsafe()\n</code></pre>\n  \n  <p>This produces a result like agVoZWxsb3IPCxIHQWNjb3VudBiZiwIM which can\n  later be used to reconstruct the key and retrieve the original entity:</p>\n\n<pre><code>sandy_key = ndb.Key(urlsafe=url_string)\n</code></pre>\n</blockquote>\n\n<p>Now, to json-encode the entire entity you'd have to write a custom method which would convert the <code>Key</code> properties to strings first. See <a href=\"https://stackoverflow.com/questions/3768895/how-to-make-a-class-json-serializable\">How to make a class JSON serializable</a></p>\n"}], "owner": {"reputation": 141, "user_id": 1835109, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3fed158383a7815cacd3e673854723b2?s=128&d=identicon&r=PG", "display_name": "dnez", "link": "https://stackoverflow.com/users/1835109/dnez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 238, "favorite_count": 0, "accepted_answer_id": 45972268, "answer_count": 1, "score": 1, "last_activity_date": 1504146099, "creation_date": 1504129202, "last_edit_date": 1504142716, "question_id": 45970096, "link": "https://stackoverflow.com/questions/45970096/how-to-loop-the-following-datastore-data-with-python-and-ndb-model-and-return-to", "title": "How to loop the following datastore data with python and ndb model and return to json.dumps?", "body": "<pre><code>[User(key=Key('User', 5275456790069248), auth_ids=[u'abc@gmail.com'], created=datetime.datetime(2017, 8, 29, 22, 50, 36, 297407), email='abc@gmail.com'), \nUser(key=Key('User', 5838406743490560), auth_ids=[u'def@gmail.com'], created=datetime.datetime(2017, 8, 29, 16, 23, 16, 406468), email='def@gmail.com'), \nUser(key=Key('User', 6401356696911872), auth_ids=[u'ghi@gmail.com'], created=datetime.datetime(2017, 8, 30, 12, 34, 51, 816926), email='ghi@gmail.com')]\n</code></pre>\n\n<p>I managed to query the above data from Google App Engine datastore using Python but I am unable to loop it into JSON. Don't quite understand the concept of the Keys even I have gone through the documentations.</p>\n\n<p>Besides hoping to understand the way to dump the entire object with the key into JSON without limits, any idea how could I just to extract the 'key'(in string), 'email' and 'created' (DateTime)? By the way, I am trying to retrieve all data.</p>\n\n<p>For example:</p>\n\n<pre><code>users_new_list = []\n\nallusers = User.query().fetch()\nfor user in all_users:\n    #How to get key in string and pass into 'users_new_list'\n   users_new_list.append(keyString)\n</code></pre>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 1, "creation_date": 1504129097, "post_id": 45970043, "comment_id": 78899429, "body": "Show the main urls.py."}, {"owner": {"reputation": 17922, "user_id": 1977847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2zWQh.png?s=128&g=1", "display_name": "H&#229;ken Lid", "link": "https://stackoverflow.com/users/1977847/h%c3%a5ken-lid"}, "edited": false, "score": 0, "creation_date": 1504129103, "post_id": 45970043, "comment_id": 78899432, "body": "Where&#39;s the url with the pattern <code>$bio&#47;</code> ? A <code>$</code> should be at the end of a regular expression, not the start."}, {"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "reply_to_user": {"reputation": 17922, "user_id": 1977847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2zWQh.png?s=128&g=1", "display_name": "H&#229;ken Lid", "link": "https://stackoverflow.com/users/1977847/h%c3%a5ken-lid"}, "edited": false, "score": 0, "creation_date": 1504129325, "post_id": 45970043, "comment_id": 78899516, "body": "@Haken it&#39;s because op is probably including home.urls with a prefix ending in $. Which is why we need to see the main URLs."}, {"owner": {"reputation": 59346, "user_id": 444036, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/My2AZ.jpg?s=128&g=1", "display_name": "Paulo Scardine", "link": "https://stackoverflow.com/users/444036/paulo-scardine"}, "edited": false, "score": 0, "creation_date": 1504129395, "post_id": 45970043, "comment_id": 78899547, "body": "You probably forgot to set the <code>home</code> namespace when including <code>homepage.urls</code> in the main <code>urls.py</code>."}, {"owner": {"reputation": 17922, "user_id": 1977847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2zWQh.png?s=128&g=1", "display_name": "H&#229;ken Lid", "link": "https://stackoverflow.com/users/1977847/h%c3%a5ken-lid"}, "edited": false, "score": 0, "creation_date": 1504129459, "post_id": 45970043, "comment_id": 78899573, "body": "Is your views file really called <code>homepage&#47;url.py</code>? But you are importing your views from <code>views</code> in <code>urls.py</code>"}, {"owner": {"reputation": 1, "user_id": 7880673, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-MYsx6JFtXrU/AAAAAAAAAAI/AAAAAAAABI0/eROvUd4mEUw/photo.jpg?sz=128", "display_name": "Phillyp Henning", "link": "https://stackoverflow.com/users/7880673/phillyp-henning"}, "reply_to_user": {"reputation": 17922, "user_id": 1977847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2zWQh.png?s=128&g=1", "display_name": "H&#229;ken Lid", "link": "https://stackoverflow.com/users/1977847/h%c3%a5ken-lid"}, "edited": false, "score": 0, "creation_date": 1504194484, "post_id": 45970043, "comment_id": 78930910, "body": "Sorry for the late response, ok in order quickly,  I don&#39;t have a main.py this shares the same directory structure as the tutorial does so if there is a main.py equivalent I could provide I will.  I have added the app/urls.py to the question as well if I understand @H&#229;kenLid request properly.  Finally the tutorial asks for it this way, if you have a suggestion or feel like there is a better way feel free to pm me."}, {"owner": {"reputation": 17922, "user_id": 1977847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2zWQh.png?s=128&g=1", "display_name": "H&#229;ken Lid", "link": "https://stackoverflow.com/users/1977847/h%c3%a5ken-lid"}, "edited": false, "score": 0, "creation_date": 1504208528, "post_id": 45970043, "comment_id": 78938138, "body": "Your bug is caused by what is explained in the linked duplicate question. When you use <code>include</code> with URL routes, you must not end the regex with <code>$</code>. Just remove the $ in the two first urlpatterns in app/urls.py"}], "answers": [{"tags": [], "owner": {"reputation": 96308, "user_id": 651174, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2e2d79b9350ef4ebf04ac0ad5816a5c3?s=128&d=identicon&r=PG", "display_name": "David542", "link": "https://stackoverflow.com/users/651174/david542"}, "is_accepted": false, "score": 0, "last_activity_date": 1504129288, "creation_date": 1504129288, "answer_id": 45970115, "question_id": 45970043, "link": "https://stackoverflow.com/questions/45970043/reverse-for-path-with-no-arguments-not-found-1-patterns-tried/45970115#45970115", "title": "Reverse for &#39;path&#39; with no arguments not found. 1 pattern(s) tried", "body": "<p>If you use a name, you can call that name directly in the url, so:</p>\n\n<pre><code>{% url bio %}\n</code></pre>\n\n<p>Instead of:</p>\n\n<pre><code>{% url name:bio %}\n</code></pre>\n\n<p>Here's a link: <a href=\"https://docs.djangoproject.com/en/1.11/topics/http/urls/#url-namespaces-and-included-urlconfs\" rel=\"nofollow noreferrer\">https://docs.djangoproject.com/en/1.11/topics/http/urls/#url-namespaces-and-included-urlconfs</a>.</p>\n"}], "owner": {"reputation": 1, "user_id": 7880673, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-MYsx6JFtXrU/AAAAAAAAAAI/AAAAAAAABI0/eROvUd4mEUw/photo.jpg?sz=128", "display_name": "Phillyp Henning", "link": "https://stackoverflow.com/users/7880673/phillyp-henning"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2989, "favorite_count": 0, "closed_date": 1504129281, "answer_count": 1, "score": 0, "last_activity_date": 1504194905, "creation_date": 1504128874, "last_edit_date": 1504194905, "question_id": 45970043, "link": "https://stackoverflow.com/questions/45970043/reverse-for-path-with-no-arguments-not-found-1-patterns-tried", "closed_reason": "Duplicate", "title": "Reverse for &#39;path&#39; with no arguments not found. 1 pattern(s) tried", "body": "<p>So I have recently started learning Django, after finishing the tutorial I decided to create my own website and have run into an error that I honestly just don't understand. </p>\n\n<p>The error is:</p>\n\n<hr>\n\n<p>Error during template rendering</p>\n\n<p>In template /home/phil/Projects/mysite/homepage/templates/_partial.html, \n error at line 13\n Reverse for 'bio' with no arguments not found. 1 pattern(s) tried: \n ['$bio/']</p>\n\n<hr>\n\n<p>homepage/templates/_partial.html\n    </p>\n\n<pre><code>&lt;div class=\"collapse navbar-collapse\" id=\"navbarNavAltMarkup\"&gt;\n  &lt;div class=\"navbar-nav\"&gt;\n     &lt;a class=\"nav-item nav-link active\" href=\"{% url 'home:index' \n              %}\"&gt;Home &lt;span class=\"sr-only\"&gt;(current)&lt;/span&gt;&lt;/a&gt;\n     &lt;a class=\"nav-item nav-link\" href=\"{% url 'home:bio' %}\"&gt;Bio&lt;/a&gt; &lt;!--Attention--&gt;\n     &lt;a class=\"nav-item nav-link disabled\" href=\"{% url 'home:index' \n              %}\"&gt;Technologies&lt;/a&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<hr>\n\n<p>homepage/url.py</p>\n\n<pre><code>from django.views import generic\nclass IndexView(generic.ListView) : \n    template_name = 'homepage/index.html'\n\n\nclass BioView(generic.ListView) : \n    template_name = 'homepage/bio.html'\n</code></pre>\n\n<hr>\n\n<p>homepage/urls.py</p>\n\n<pre><code>from django.conf.urls import url\nfrom . import views\napp_name = 'home'\nurlpatterns = [\n       url(r'^$', views.IndexView.as_view(), name='index'),\n       url(r'^bio/', views.BioView.as_view(), name='bio'),\n       url(r'^skills/', views.SkillsView.as_view(), name='skills'),\n       ]\n</code></pre>\n\n<hr>\n\n<p>app/urls.py</p>\n\n<pre><code>from django.conf.urls import include,url\nfrom django.contrib import admin\n\nurlpatterns = [\n  url(r'^$', include('homepage.urls')),\n  url(r'^home/$', include('homepage.urls')),\n  url(r'^admin/', admin.site.urls),\n] \n</code></pre>\n\n<hr>\n\n<p>As I said I had followed the Django tutorial and honestly can't see what the error is. \nIndex works as expected, but when I call bio or skills it throws this exception.</p>\n\n<p>Edit: adding requested views.\n:(</p>\n"}, {"tags": ["python", "ssl", "amazon-dynamodb"], "comments": [{"owner": {"reputation": 7725, "user_id": 4889267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b86b65464f4070d38bbf2abdbd4f1610?s=128&d=identicon&r=PG&f=1", "display_name": "AK47", "link": "https://stackoverflow.com/users/4889267/ak47"}, "edited": false, "score": 0, "creation_date": 1504129235, "post_id": 45970029, "comment_id": 78899485, "body": "This is just a stacktrace.. where&#39;s the code?"}, {"owner": {"reputation": 53, "user_id": 8253309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be0529941fdac463fedf0a0e85e72b53?s=128&d=identicon&r=PG&f=1", "display_name": "manny-k", "link": "https://stackoverflow.com/users/8253309/manny-k"}, "reply_to_user": {"reputation": 7725, "user_id": 4889267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b86b65464f4070d38bbf2abdbd4f1610?s=128&d=identicon&r=PG&f=1", "display_name": "AK47", "link": "https://stackoverflow.com/users/4889267/ak47"}, "edited": false, "score": 0, "creation_date": 1504131954, "post_id": 45970029, "comment_id": 78900399, "body": "The code hasn&#39;t changed since it stopped working, so I&#39;m sure it&#39;s not the issue. I&#39;ll add the code anyway"}], "answers": [{"tags": [], "owner": {"reputation": 53, "user_id": 8253309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be0529941fdac463fedf0a0e85e72b53?s=128&d=identicon&r=PG&f=1", "display_name": "manny-k", "link": "https://stackoverflow.com/users/8253309/manny-k"}, "is_accepted": false, "score": 0, "last_activity_date": 1504175857, "creation_date": 1504175857, "answer_id": 45979411, "question_id": 45970029, "link": "https://stackoverflow.com/questions/45970029/strange-ssl-error-when-seeding-database-via-command-line/45979411#45979411", "title": "Strange SSL error when seeding database via command line", "body": "<p>What's worked in the end is to exit my current virtual environment and run:</p>\n\n<pre><code>/Applications/Python\\ 3.6/Install\\ Certificates.command\n</code></pre>\n\n<p>And then I entered my virtual environment again and ran:</p>\n\n<pre><code>pip install certifi\n</code></pre>\n\n<p>That fixed it.</p>\n\n<p>I got help from a friend who suspected it could have to do with the certification verification (related to this: <a href=\"https://stackoverflow.com/questions/27835619/urllib-and-ssl-certificate-verify-failed-error\">urllib and &quot;SSL: CERTIFICATE_VERIFY_FAILED&quot; Error</a> ) but it remains unclear why I didn't get a \"Certificate Verification Failed\" error.</p>\n"}], "owner": {"reputation": 53, "user_id": 8253309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be0529941fdac463fedf0a0e85e72b53?s=128&d=identicon&r=PG&f=1", "display_name": "manny-k", "link": "https://stackoverflow.com/users/8253309/manny-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 253, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1504175857, "creation_date": 1504128808, "last_edit_date": 1504132686, "question_id": 45970029, "link": "https://stackoverflow.com/questions/45970029/strange-ssl-error-when-seeding-database-via-command-line", "title": "Strange SSL error when seeding database via command line", "body": "<p>I have a file (it's called conversation_template.py) which I use to seed my DynamoDB database, and it worked until very recently.</p>\n\n<pre><code>import boto3\n\ndynamodb = boto3.resource('dynamodb', region_name='us-east-1')\ntable = dynamodb.Table('tablename')\n\ndata = {'&lt;data_goes_here&gt;'}\n\n\ndef add_to_table():\n        table.put_item(Item=data)\n\n\nadd_to_table()\n</code></pre>\n\n<p>Now, when I run it in my command line, I get this:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"/Users/user/anaconda/envs/django_pocketcoach/lib/python3.6/site-packages/botocore/vendored/requests/packages/urllib3/connectionpool.py\", line 544, in urlopen\n    body=body, headers=headers)\n  File \"/Users/user/anaconda/envs/django_pocketcoach/lib/python3.6/site-packages/botocore/vendored/requests/packages/urllib3/connectionpool.py\", line 341, in _make_request\n    self._validate_conn(conn)\n  File \"/Users/user/anaconda/envs/django_pocketcoach/lib/python3.6/site-packages/botocore/vendored/requests/packages/urllib3/connectionpool.py\", line 761, in _validate_conn\n    conn.connect()\n  File \"/Users/user/anaconda/envs/django_pocketcoach/lib/python3.6/site-packages/botocore/vendored/requests/packages/urllib3/connection.py\", line 238, in connect\n    ssl_version=resolved_ssl_version)\n  File \"/Users/user/anaconda/envs/django_pocketcoach/lib/python3.6/site-packages/botocore/vendored/requests/packages/urllib3/util/ssl_.py\", line 279, in ssl_wrap_socket\n    return context.wrap_socket(sock, server_hostname=server_hostname)\n  File \"/Users/user/anaconda/envs/django_pocketcoach/lib/python3.6/ssl.py\", line 401, in wrap_socket\n    _context=self, _session=session)\n  File \"/Users/user/anaconda/envs/django_pocketcoach/lib/python3.6/ssl.py\", line 808, in __init__\n    self.do_handshake()\n  File \"/Users/user/anaconda/envs/django_pocketcoach/lib/python3.6/ssl.py\", line 1061, in do_handshake\n    self._sslobj.do_handshake()\n  File \"/Users/user/anaconda/envs/django_pocketcoach/lib/python3.6/ssl.py\", line 683, in do_handshake\n    self._sslobj.do_handshake()\nssl.SSLError: [SSL: UNKNOWN_PROTOCOL] unknown protocol (_ssl.c:748)\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/user/anaconda/envs/django_pocketcoach/lib/python3.6/site-packages/botocore/vendored/requests/adapters.py\", line 370, in send\n    timeout=timeout\n  File \"/Users/user/anaconda/envs/django_pocketcoach/lib/python3.6/site-packages/botocore/vendored/requests/packages/urllib3/connectionpool.py\", line 574, in urlopen\n    raise SSLError(e)\nbotocore.vendored.requests.packages.urllib3.exceptions.SSLError: [SSL: UNKNOWN_PROTOCOL] unknown protocol (_ssl.c:748)\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"conversation_template.py\", line 74, in &lt;module&gt;\n    add_to_table()\n  File \"conversation_template.py\", line 71, in add_to_table\n    table.put_item(Item=episode)\n  File \"/Users/user/anaconda/envs/django_pocketcoach/lib/python3.6/site-packages/boto3/resources/factory.py\", line 520, in do_action\n    response = action(self, *args, **kwargs)\n  File \"/Users/user/anaconda/envs/django_pocketcoach/lib/python3.6/site-packages/boto3/resources/action.py\", line 83, in __call__\n    response = getattr(parent.meta.client, operation_name)(**params)\n  File \"/Users/user/anaconda/envs/django_pocketcoach/lib/python3.6/site-packages/botocore/client.py\", line 312, in _api_call\n    return self._make_api_call(operation_name, kwargs)\n  File \"/Users/user/anaconda/envs/django_pocketcoach/lib/python3.6/site-packages/botocore/client.py\", line 588, in _make_api_call\n    operation_model, request_dict)\n  File \"/Users/user/anaconda/envs/django_pocketcoach/lib/python3.6/site-packages/botocore/endpoint.py\", line 141, in make_request\n    return self._send_request(request_dict, operation_model)\n  File \"/Users/user/anaconda/envs/django_pocketcoach/lib/python3.6/site-packages/botocore/endpoint.py\", line 170, in _send_request\n    success_response, exception):\n  File \"/Users/user/anaconda/envs/django_pocketcoach/lib/python3.6/site-packages/botocore/endpoint.py\", line 249, in _needs_retry\n    caught_exception=caught_exception, request_dict=request_dict)\n  File \"/Users/user/anaconda/envs/django_pocketcoach/lib/python3.6/site-packages/botocore/hooks.py\", line 227, in emit\n    return self._emit(event_name, kwargs)\n  File \"/Users/user/anaconda/envs/django_pocketcoach/lib/python3.6/site-packages/botocore/hooks.py\", line 210, in _emit\n    response = handler(**kwargs)\n  File \"/Users/user/anaconda/envs/django_pocketcoach/lib/python3.6/site-packages/botocore/retryhandler.py\", line 183, in __call__\n    if self._checker(attempts, response, caught_exception):\n  File \"/Users/user/anaconda/envs/django_pocketcoach/lib/python3.6/site-packages/botocore/retryhandler.py\", line 251, in __call__\n    caught_exception)\n  File \"/Users/user/anaconda/envs/django_pocketcoach/lib/python3.6/site-packages/botocore/retryhandler.py\", line 277, in _should_retry\n    return self._checker(attempt_number, response, caught_exception)\n  File \"/Users/user/anaconda/envs/django_pocketcoach/lib/python3.6/site-packages/botocore/retryhandler.py\", line 317, in __call__\n    caught_exception)\n  File \"/Users/user/anaconda/envs/django_pocketcoach/lib/python3.6/site-packages/botocore/retryhandler.py\", line 223, in __call__\n    attempt_number, caught_exception)\n  File \"/Users/user/anaconda/envs/django_pocketcoach/lib/python3.6/site-packages/botocore/retryhandler.py\", line 359, in _check_caught_exception\n    raise caught_exception\n  File \"/Users/user/anaconda/envs/django_pocketcoach/lib/python3.6/site-packages/botocore/endpoint.py\", line 204, in _get_response\n    proxies=self.proxies, timeout=self.timeout)\n  File \"/Users/user/anaconda/envs/django_pocketcoach/lib/python3.6/site-packages/botocore/vendored/requests/sessions.py\", line 573, in send\n    r = adapter.send(request, **kwargs)\n  File \"/Users/user/anaconda/envs/django_pocketcoach/lib/python3.6/site-packages/botocore/vendored/requests/adapters.py\", line 431, in send\n    raise SSLError(e, request=request)\nbotocore.vendored.requests.exceptions.SSLError: [SSL: UNKNOWN_PROTOCOL] unknown protocol (_ssl.c:748)\n</code></pre>\n\n<p>I tried to figure out where the error comes from but I couldn\u2019t do it. Even the error messages didn\u2019t get me anywhere.</p>\n\n<p>I get an SSLError; the protocol is unknown. I found that this type of error could be related to me trying to connect to proxy servers but I am not using one and haven\u2019t done so in the past either.</p>\n\n<p>Any ideas on where this error could come from?</p>\n"}, {"tags": ["python", "json", "django"], "comments": [{"owner": {"reputation": 27093, "user_id": 5189811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FzPWr.png?s=128&g=1", "display_name": "Oluwafemi Sule", "link": "https://stackoverflow.com/users/5189811/oluwafemi-sule"}, "edited": false, "score": 0, "creation_date": 1504129567, "post_id": 45970014, "comment_id": 78899613, "body": "What&#39;s the content type of the response returned from your endpoint?"}, {"owner": {"reputation": 17922, "user_id": 1977847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2zWQh.png?s=128&g=1", "display_name": "H&#229;ken Lid", "link": "https://stackoverflow.com/users/1977847/h%c3%a5ken-lid"}, "edited": false, "score": 0, "creation_date": 1504130111, "post_id": 45970014, "comment_id": 78899806, "body": "Did you try <code>print(call.content)</code> ?"}, {"owner": {"reputation": 4134, "user_id": 6654730, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/abab8f244e6d6c048680b10f45de4a44?s=128&d=identicon&r=PG&f=1", "display_name": "M3RS", "link": "https://stackoverflow.com/users/6654730/m3rs"}, "edited": false, "score": 0, "creation_date": 1504163264, "post_id": 45970014, "comment_id": 78909096, "body": "Check this: <a href=\"https://stackoverflow.com/questions/18810777/reading-the-response-in-python-requests\" title=\"reading the response in python requests\">stackoverflow.com/questions/18810777/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 454, "user_id": 4667135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NYcTr.png?s=128&g=1", "display_name": "ohannes", "link": "https://stackoverflow.com/users/4667135/ohannes"}, "edited": false, "score": 1, "creation_date": 1504129817, "post_id": 45970161, "comment_id": 78899693, "body": "<code>call.json()</code> in a proper <i>try/except</i> block would be nicer. see the <a href=\"http://docs.python-requests.org/en/master/user/quickstart/#response-content\" rel=\"nofollow noreferrer\">doc</a>"}, {"owner": {"reputation": 646, "user_id": 8246827, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-jle2fpBmktI/AAAAAAAAAAI/AAAAAAAAIMA/BLgTIn0PxtE/photo.jpg?sz=128", "display_name": "Omar Jandali", "link": "https://stackoverflow.com/users/8246827/omar-jandali"}, "edited": false, "score": 0, "creation_date": 1504129995, "post_id": 45970161, "comment_id": 78899764, "body": "i got an error <code>AttributeError at &#47;signup &#39;str&#39; object has no attribute &#39;read&#39;</code> when i tried to run the following code... <code>print(json.load(call.text))</code>"}, {"owner": {"reputation": 4134, "user_id": 6654730, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/abab8f244e6d6c048680b10f45de4a44?s=128&d=identicon&r=PG&f=1", "display_name": "M3RS", "link": "https://stackoverflow.com/users/6654730/m3rs"}, "edited": false, "score": 0, "creation_date": 1504130118, "post_id": 45970161, "comment_id": 78899809, "body": "that part of the code is not shown above, as far as I can tell, so not sure what happened"}, {"owner": {"reputation": 454, "user_id": 4667135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NYcTr.png?s=128&g=1", "display_name": "ohannes", "link": "https://stackoverflow.com/users/4667135/ohannes"}, "reply_to_user": {"reputation": 646, "user_id": 8246827, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-jle2fpBmktI/AAAAAAAAAAI/AAAAAAAAIMA/BLgTIn0PxtE/photo.jpg?sz=128", "display_name": "Omar Jandali", "link": "https://stackoverflow.com/users/8246827/omar-jandali"}, "edited": false, "score": 1, "creation_date": 1504130267, "post_id": 45970161, "comment_id": 78899860, "body": "@OmarJandali it is not <code>json.load</code> but <code>json.loads</code>, notice the <b>s</b> at the end."}, {"owner": {"reputation": 646, "user_id": 8246827, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-jle2fpBmktI/AAAAAAAAAAI/AAAAAAAAIMA/BLgTIn0PxtE/photo.jpg?sz=128", "display_name": "Omar Jandali", "link": "https://stackoverflow.com/users/8246827/omar-jandali"}, "edited": false, "score": 0, "creation_date": 1504131832, "post_id": 45970161, "comment_id": 78900361, "body": "I chaged <code>load</code> to <code>loads</code> and now this is coming up <code>Expecting value: line 1 column 1 (char 0)</code>"}, {"owner": {"reputation": 4134, "user_id": 6654730, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/abab8f244e6d6c048680b10f45de4a44?s=128&d=identicon&r=PG&f=1", "display_name": "M3RS", "link": "https://stackoverflow.com/users/6654730/m3rs"}, "edited": false, "score": 0, "creation_date": 1504132095, "post_id": 45970161, "comment_id": 78900432, "body": "are you also doing <code>return json.loads(call.text)</code>? this might also help <a href=\"https://stackoverflow.com/questions/16573332/jsondecodeerror-expecting-value-line-1-column-1-char-0\" title=\"jsondecodeerror expecting value line 1 column 1 char 0\">stackoverflow.com/questions/16573332/&hellip;</a>"}, {"owner": {"reputation": 646, "user_id": 8246827, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-jle2fpBmktI/AAAAAAAAAAI/AAAAAAAAIMA/BLgTIn0PxtE/photo.jpg?sz=128", "display_name": "Omar Jandali", "link": "https://stackoverflow.com/users/8246827/omar-jandali"}, "edited": false, "score": 0, "creation_date": 1504137292, "post_id": 45970161, "comment_id": 78901666, "body": "I have tried everything and it is still not printing the json data. so i have to create a template for it to display in an html file..."}], "tags": [], "owner": {"reputation": 4134, "user_id": 6654730, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/abab8f244e6d6c048680b10f45de4a44?s=128&d=identicon&r=PG&f=1", "display_name": "M3RS", "link": "https://stackoverflow.com/users/6654730/m3rs"}, "is_accepted": false, "score": 0, "last_activity_date": 1504129467, "creation_date": 1504129467, "answer_id": 45970161, "question_id": 45970014, "link": "https://stackoverflow.com/questions/45970014/viewing-and-parsing-json-response-django/45970161#45970161", "title": "Viewing and parsing JSON response - django", "body": "<p>Try changing <code>call</code> to </p>\n\n<pre><code>call.text\n</code></pre>\n\n<p>For JSON try</p>\n\n<pre><code>json.loads(call.text)\n</code></pre>\n\n<p>To print</p>\n\n<pre><code>print(json.loads(call.text))\n</code></pre>\n"}], "owner": {"reputation": 646, "user_id": 8246827, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-jle2fpBmktI/AAAAAAAAAAI/AAAAAAAAIMA/BLgTIn0PxtE/photo.jpg?sz=128", "display_name": "Omar Jandali", "link": "https://stackoverflow.com/users/8246827/omar-jandali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 4656, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1504129492, "creation_date": 1504128749, "last_edit_date": 1504129492, "question_id": 45970014, "link": "https://stackoverflow.com/questions/45970014/viewing-and-parsing-json-response-django", "title": "Viewing and parsing JSON response - django", "body": "<p>I have sent a JSON request. I am getting a 200 response which means that the sent request was accepted and that there is a response. I am trying to view the full response that was sent back from the request. I have tried 3-4 different ways of viewing the response, but no matter what i try, i cant figure out how to view the full response... Can anyone help  me figure out how to see the information..</p>\n\n<p>Request - </p>\n\n<pre><code>def createUserSynapse():\n    url = 'http://uat-api.synapsefi.com'\n    headers = {\n        'X-SP-GATEWAY' : 'client_id_asdfeavea561va9685e1gre5ara|client_secret_4651av5sa1edgvawegv1a6we1v5a6s51gv',\n        'X-SP-USER-IP' : '127.0.0.1',\n        'X-SP-USER' : 'ge85a41v8e16v1a618gea164g65',\n        'Contant-Type' : 'application/json',\n    }\n    payload = {\n        \"logins\":[\n            {\n                \"email\":\"test@test.com\",\n            }\n        ],\n        \"phone_numbers\":[\n            \"123.456.7890\",\n            \"test@test.com\",\n        ],\n        \"legal_names\":[\n            \"Test name\",\n        ],\n        \"extras\":{\n            \"supp_id\":\"asdfe515641e56wg\",\n            \"cip_tag\":12,\n            \"is_business\":False,\n        }\n    }\n    print(url)\n    print(headers)\n    print(payload)\n    call = requests.post(url, data=json.dumps(payload), headers=headers)\n    print(call)\n    return call\n</code></pre>\n\n<p>The response that i am getting from the request (I have a line to print the request)...</p>\n\n<pre><code>&lt;Response [200]&gt;\n</code></pre>\n"}, {"tags": ["python", "html", "cgi"], "comments": [{"owner": {"reputation": 13209, "user_id": 7414759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b272ce66c7c245c6cbe9a830691daddc?s=128&d=identicon&r=PG&f=1", "display_name": "stovfl", "link": "https://stackoverflow.com/users/7414759/stovfl"}, "edited": false, "score": 0, "creation_date": 1504177523, "post_id": 45970001, "comment_id": 78918631, "body": "I&#39;m missing a <b>New line</b> after <code>print(&#39;Content-Type...</code> but that&#39;s not related to your Problem. Apache don&#39;t accept <code>form.py</code> as a CGI, therefore instead of <i><b>executing</b></i> show the content of the File."}], "answers": [{"comments": [{"owner": {"reputation": 441, "user_id": 3718294, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/40bec26b5a8c26fb7d14b76272977459?s=128&d=identicon&r=PG&f=1", "display_name": "postoronnim", "link": "https://stackoverflow.com/users/3718294/postoronnim"}, "edited": false, "score": 0, "creation_date": 1504130693, "post_id": 45970093, "comment_id": 78900016, "body": "That didn&#39;t change anything. I allowed my root dir to be accessed, therefore I don&#39;t need to alias another directory."}, {"owner": {"reputation": 27093, "user_id": 5189811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FzPWr.png?s=128&g=1", "display_name": "Oluwafemi Sule", "link": "https://stackoverflow.com/users/5189811/oluwafemi-sule"}, "reply_to_user": {"reputation": 441, "user_id": 3718294, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/40bec26b5a8c26fb7d14b76272977459?s=128&d=identicon&r=PG&f=1", "display_name": "postoronnim", "link": "https://stackoverflow.com/users/3718294/postoronnim"}, "edited": false, "score": 0, "creation_date": 1504131468, "post_id": 45970093, "comment_id": 78900236, "body": "Yeah, you need to <code>ScriptAlias</code> any directory with files you will like to do CGI execution on except <code>DocumentRoo</code>. Is the CGI module loaded? LoadModule <code>cgi_module modules&#47;mod_cgi.so</code>"}, {"owner": {"reputation": 441, "user_id": 3718294, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/40bec26b5a8c26fb7d14b76272977459?s=128&d=identicon&r=PG&f=1", "display_name": "postoronnim", "link": "https://stackoverflow.com/users/3718294/postoronnim"}, "edited": false, "score": 0, "creation_date": 1504133296, "post_id": 45970093, "comment_id": 78900753, "body": "I don&#39;t have any directories other than DocumentRoot, this is just for development. Module is loaded."}], "tags": [], "owner": {"reputation": 27093, "user_id": 5189811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FzPWr.png?s=128&g=1", "display_name": "Oluwafemi Sule", "link": "https://stackoverflow.com/users/5189811/oluwafemi-sule"}, "is_accepted": false, "score": 0, "last_activity_date": 1504129199, "creation_date": 1504129199, "answer_id": 45970093, "question_id": 45970001, "link": "https://stackoverflow.com/questions/45970001/python-file-contents-printed-when-called-from-html-instead-of-result/45970093#45970093", "title": "Python file contents printed when called from HTML instead of result", "body": "<p>You need to mark <code>htdocs</code> as set aside for CGI programs by using <code>ScriptAlias</code> directive.</p>\n\n<pre><code>ScriptAlias \"C:/Apache24/htdocs\"\n</code></pre>\n\n<h3>References:</h3>\n\n<ul>\n<li><a href=\"http://httpd.apache.org/docs/2.2/mod/mod_alias.html#scriptalias\" rel=\"nofollow noreferrer\">http://httpd.apache.org/docs/2.2/mod/mod_alias.html#scriptalias</a></li>\n</ul>\n"}], "owner": {"reputation": 441, "user_id": 3718294, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/40bec26b5a8c26fb7d14b76272977459?s=128&d=identicon&r=PG&f=1", "display_name": "postoronnim", "link": "https://stackoverflow.com/users/3718294/postoronnim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1504129199, "creation_date": 1504128688, "question_id": 45970001, "link": "https://stackoverflow.com/questions/45970001/python-file-contents-printed-when-called-from-html-instead-of-result", "title": "Python file contents printed when called from HTML instead of result", "body": "<p>I've got two files, index.html and form.py in my C:\\Apache24\\htdocs directory on Windows 10. The contents are as follows:</p>\n\n<p>index.html</p>\n\n<pre><code>&lt;html&gt;  \n&lt;head&gt;  \n&lt;title&gt;demo web file python2.7&lt;/title&gt;  \n&lt;/head&gt;  \n&lt;body&gt;  \n&lt;form name=\"pyform\" method=\"POST\" action=\"/form.py\"&gt;  \n  &lt;input type=\"text\" name=\"fname\" /&gt;  \n  &lt;input type=\"submit\" name=\"submit\" value=\"Submit\" /&gt;  \n&lt;/form&gt;  \n&lt;/body&gt;  \n&lt;/html&gt;   \n</code></pre>\n\n<p>form.py</p>\n\n<pre><code>#!C:\\Python27/python\nprint \"Content-Type: text/html\"      \n\nimport cgi,cgitb  \ncgitb.enable() #for debugging  \nform = cgi.FieldStorage()  \nname = form.getvalue('fname')  \nprint \"Name of the user is:\",name  \n</code></pre>\n\n<p>The Apache server is configured to run cgi scripts with the following settings:</p>\n\n<pre><code>DocumentRoot \"c:/Apache24/htdocs\"\n&lt;Directory \"c:/Apache24/htdocs\"&gt;\n    Options Indexes FollowSymlinks ExecCGI\n    AllowOverride All\n    Require all granted\n&lt;/Directory&gt;\n</code></pre>\n\n<p>and </p>\n\n<pre><code>AddHandler cgi-script .cgi .py\n</code></pre>\n\n<p>When I populate the text area and click \"Submit\" button on the page, I get the entire contents of the python file on the resulting page, instead of what I had put into the box.</p>\n\n<p>What is missing or what am I doing wrong? Many thanks.</p>\n"}, {"tags": ["python", "matplotlib", "plot", "data-visualization", "scatter"], "comments": [{"owner": {"reputation": 186, "user_id": 7471760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85627d404ad8470af1cd0c38312511f2?s=128&d=identicon&r=PG&f=1", "display_name": "ferdymercury", "link": "https://stackoverflow.com/users/7471760/ferdymercury"}, "edited": false, "score": 0, "creation_date": 1618521283, "post_id": 45969974, "comment_id": 118633794, "body": "If you want to navigate through the data rather than plot at once, this could serve: <a href=\"https://www.datacamp.com/community/tutorials/matplotlib-3d-volumetric-data\" rel=\"nofollow noreferrer\">datacamp.com/community/tutorials/matplotlib-3d-volumetric-da&zwnj;&#8203;ta</a>"}], "answers": [{"comments": [{"owner": {"reputation": 13077, "user_id": 865475, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/1ccb0ac62b02ab00a764610451baf342?s=128&d=identicon&r=PG", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/865475/dmitry"}, "edited": false, "score": 0, "creation_date": 1504132142, "post_id": 45970319, "comment_id": 78900445, "body": "This code works fast enough for arrays of size up to (100, 100, 100). Can I expect that the faster ways to build x, y, z can help to make it work for (512, 512, 512) arrays?"}, {"owner": {"reputation": 705380, "user_id": 190597, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1", "display_name": "unutbu", "link": "https://stackoverflow.com/users/190597/unutbu"}, "reply_to_user": {"reputation": 13077, "user_id": 865475, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/1ccb0ac62b02ab00a764610451baf342?s=128&d=identicon&r=PG", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/865475/dmitry"}, "edited": false, "score": 0, "creation_date": 1504183410, "post_id": 45970319, "comment_id": 78922753, "body": "For an array of that size I think the main bottleneck is the rendering of 512**3 (around 134 million) points, not the creation of the coordinate arrays. I&#39;ve edited the post above to show how you could plot only the outer shell of the cube. That reduces both the CPU and memory complexity from <code>O(size**3)</code> to <code>O(size**2)</code>. Still, depending on your machine&#39;s speed and resources, this could take a considerable amount of time to render."}, {"owner": {"reputation": 13077, "user_id": 865475, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/1ccb0ac62b02ab00a764610451baf342?s=128&d=identicon&r=PG", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/865475/dmitry"}, "edited": false, "score": 0, "creation_date": 1504211611, "post_id": 45970319, "comment_id": 78939432, "body": "Most of the items in the arrays are zeros. So, it should show same shape inside the cube in result..."}], "tags": [], "owner": {"reputation": 705380, "user_id": 190597, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1", "display_name": "unutbu", "link": "https://stackoverflow.com/users/190597/unutbu"}, "is_accepted": false, "score": 4, "last_activity_date": 1504184069, "last_edit_date": 1504184069, "creation_date": 1504130317, "answer_id": 45970319, "question_id": 45969974, "link": "https://stackoverflow.com/questions/45969974/what-is-the-most-efficient-way-to-plot-3d-array-in-python/45970319#45970319", "title": "What is the most efficient way to plot 3d array in Python?", "body": "<p>For better performance, avoid calling <code>ax.scatter</code> multiple times, if possible.\nInstead, pack all the <code>x</code>,<code>y</code>,<code>z</code> coordinates and colors into 1D arrays (or\nlists), then call <code>ax.scatter</code> once:</p>\n\n<pre><code>ax.scatter(x, y, z, c=volume.ravel())\n</code></pre>\n\n<hr>\n\n<p>The problem (in terms of both CPU time and memory) grows as <code>size**3</code>, where <code>size</code> is the side length of the cube.</p>\n\n<p>Moreover, <code>ax.scatter</code> will try to render all <code>size**3</code> points without regard to\nthe fact that most of those points are obscured by those on the outer\nshell.</p>\n\n<p>It would help to reduce the number of points in <code>volume</code> -- perhaps by\nsummarizing or resampling/interpolating it in some way -- before rendering it.</p>\n\n<p>We can also reduce the CPU and memory required from <code>O(size**3)</code> to <code>O(size**2)</code> \nby only plotting the outer shell:</p>\n\n<pre><code>import functools\nimport itertools as IT\nimport numpy as np\nimport scipy.ndimage as ndimage\nimport matplotlib.pyplot as plt\nfrom mpl_toolkits.mplot3d import Axes3D\n\ndef cartesian_product_broadcasted(*arrays):\n    \"\"\"\n    http://stackoverflow.com/a/11146645/190597 (senderle)\n    \"\"\"\n    broadcastable = np.ix_(*arrays)\n    broadcasted = np.broadcast_arrays(*broadcastable)\n    dtype = np.result_type(*arrays)\n    rows, cols = functools.reduce(np.multiply, broadcasted[0].shape), len(broadcasted)\n    out = np.empty(rows * cols, dtype=dtype)\n    start, end = 0, rows\n    for a in broadcasted:\n        out[start:end] = a.reshape(-1)\n        start, end = end, end + rows\n    return out.reshape(cols, rows).T\n\n# @profile  # used with `python -m memory_profiler script.py` to measure memory usage\ndef main():\n    fig = plt.figure()\n    ax = fig.add_subplot(1, 1, 1, projection='3d')\n\n    size = 512\n    volume = np.random.rand(size, size, size)\n    x, y, z = cartesian_product_broadcasted(*[np.arange(size, dtype='int16')]*3).T\n    mask = ((x == 0) | (x == size-1) \n            | (y == 0) | (y == size-1) \n            | (z == 0) | (z == size-1))\n    x = x[mask]\n    y = y[mask]\n    z = z[mask]\n    volume = volume.ravel()[mask]\n\n    ax.scatter(x, y, z, c=volume, cmap=plt.get_cmap('Greys'))\n    plt.show()\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n\n<h2><a href=\"https://i.stack.imgur.com/49Gll.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/49Gll.png\" alt=\"enter image description here\"></a></h2>\n\n<p>But note that even when plotting only the outer shell, to achieve a plot with\n<code>size=512</code> we still need around 1.3 GiB of memory. Also beware that even if you have enough total memory but, due to a lack of RAM, the program uses swap space, then the overall speed of the program will \nslow down dramatically. If you find yourself in this situation, then the only solution is to find a smarter way to render an acceptable image <em>using fewer points</em>, or to buy more RAM.</p>\n\n<p><a href=\"https://i.stack.imgur.com/eZt0s.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eZt0s.png\" alt=\"enter image description here\"></a></p>\n"}, {"comments": [{"owner": {"reputation": 13077, "user_id": 865475, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/1ccb0ac62b02ab00a764610451baf342?s=128&d=identicon&r=PG", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/865475/dmitry"}, "edited": false, "score": 0, "creation_date": 1504139032, "post_id": 45971363, "comment_id": 78901993, "body": "Thanks a lot for your answer! But it works with the same speed as <b>unutbu</b> solution. Only with arrays with size up to ~(100, 100, 100). But I&#39;ll try to clean it as much as I can to leave only nonzero points."}], "tags": [], "owner": {"reputation": 94918, "user_id": 25050, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/6ec78954391f88681b2a5b97ef958d08?s=128&d=identicon&r=PG", "display_name": "Mr Fooz", "link": "https://stackoverflow.com/users/25050/mr-fooz"}, "is_accepted": true, "score": 3, "last_activity_date": 1504137653, "creation_date": 1504137653, "answer_id": 45971363, "question_id": 45969974, "link": "https://stackoverflow.com/questions/45969974/what-is-the-most-efficient-way-to-plot-3d-array-in-python/45971363#45971363", "title": "What is the most efficient way to plot 3d array in Python?", "body": "<p>First, a dense grid of 512x512x512 points is way too much data to plot, not from a technical perspective but from being able to see anything useful from it when observing the plot.  You probably need to extract some isosurfaces, look at slices, etc. If most of the points are invisible, then it's probably okay, but then you should ask <code>ax.scatter</code> to only show the nonzero points to make it faster.</p>\n\n<p>That said, here's how you can do it much more quickly.  The tricks are to eliminate all Python loops, including ones that would be hidden in libraries like <code>itertools</code>.</p>\n\n<pre><code>import matplotlib as mpl\nfrom mpl_toolkits.mplot3d import Axes3D\nimport numpy as np\nimport matplotlib.pyplot as plt\n\n# Make this bigger to generate a dense grid.\nN = 8\n\n# Create some random data.\nvolume = np.random.rand(N, N, N)\n\n# Create the x, y, and z coordinate arrays.  We use \n# numpy's broadcasting to do all the hard work for us.\n# We could shorten this even more by using np.meshgrid.\nx = np.arange(volume.shape[0])[:, None, None]\ny = np.arange(volume.shape[1])[None, :, None]\nz = np.arange(volume.shape[2])[None, None, :]\nx, y, z = np.broadcast_arrays(x, y, z)\n\n# Turn the volumetric data into an RGB array that's\n# just grayscale.  There might be better ways to make\n# ax.scatter happy.\nc = np.tile(volume.ravel()[:, None], [1, 3])\n\n# Do the plotting in a single call.\nfig = plt.figure()\nax = fig.gca(projection='3d')\nax.scatter(x.ravel(),\n           y.ravel(),\n           z.ravel(),\n           c=c)\n</code></pre>\n"}], "owner": {"reputation": 13077, "user_id": 865475, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/1ccb0ac62b02ab00a764610451baf342?s=128&d=identicon&r=PG", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/865475/dmitry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 16018, "favorite_count": 3, "accepted_answer_id": 45971363, "answer_count": 2, "score": 5, "last_activity_date": 1504184069, "creation_date": 1504128521, "last_edit_date": 1504131976, "question_id": 45969974, "link": "https://stackoverflow.com/questions/45969974/what-is-the-most-efficient-way-to-plot-3d-array-in-python", "title": "What is the most efficient way to plot 3d array in Python?", "body": "<p>What is the most efficient way to plot 3d array in Python?</p>\n\n<p>For example:</p>\n\n<pre><code>volume = np.random.rand(512, 512, 512)\n</code></pre>\n\n<p>where array items represent grayscale color of each pixel.</p>\n\n<hr>\n\n<p>The following code works too slow:</p>\n\n<pre><code>import matplotlib as mpl\nfrom mpl_toolkits.mplot3d import Axes3D\nimport numpy as np\nimport matplotlib.pyplot as plt\n\nfig = plt.figure()\nax = fig.gca(projection='3d')\nvolume = np.random.rand(20, 20, 20)\nfor x in range(len(volume[:, 0, 0])):\n    for y in range(len(volume[0, :, 0])):\n        for z in range(len(volume[0, 0, :])):\n            ax.scatter(x, y, z, c = tuple([volume[x, y, z], volume[x, y, z], volume[x, y, z], 1]))\nplt.show()\n</code></pre>\n"}, {"tags": ["python", "regex", "string"], "comments": [{"owner": {"reputation": 1851, "user_id": 4177078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95c881f10920eedf522afae7bc193d6c?s=128&d=identicon&r=PG&f=1", "display_name": "rojeeer", "link": "https://stackoverflow.com/users/4177078/rojeeer"}, "edited": false, "score": 2, "creation_date": 1504128745, "post_id": 45969950, "comment_id": 78899303, "body": "Not quite clear about the question? Why you need regrex?"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1504128756, "post_id": 45969950, "comment_id": 78899307, "body": "Do you actually have a string with a backslash, or does the string contain a tab character?"}, {"owner": {"reputation": 364, "user_id": 8419291, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/918628844942095/picture?type=large", "display_name": "Avo Asatryan", "link": "https://stackoverflow.com/users/8419291/avo-asatryan"}, "edited": false, "score": 1, "creation_date": 1504129076, "post_id": 45969950, "comment_id": 78899424, "body": "it&#39;s a task, which i need to solve.I need to solve it by using regexp match"}, {"owner": {"user_type": "does_not_exist", "display_name": "user1531971"}, "edited": false, "score": 2, "creation_date": 1504129424, "post_id": 45969950, "comment_id": 78899554, "body": "This feels like a homework question. If it is, you should be clear about that."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1531971"}, "edited": false, "score": 0, "creation_date": 1504129599, "post_id": 45969950, "comment_id": 78899627, "body": "Hint: the backslash in the target string looks like part of &quot;\\t&quot;, which is usually a printf-style way of encoding a tab on an output string."}], "answers": [{"comments": [{"owner": {"reputation": 364, "user_id": 8419291, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/918628844942095/picture?type=large", "display_name": "Avo Asatryan", "link": "https://stackoverflow.com/users/8419291/avo-asatryan"}, "edited": false, "score": 0, "creation_date": 1504128978, "post_id": 45970000, "comment_id": 78899387, "body": "Hi, thank you for the answer. I need to use match instead of split"}], "tags": [], "owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "is_accepted": false, "score": 4, "last_activity_date": 1504128688, "creation_date": 1504128688, "answer_id": 45970000, "question_id": 45969950, "link": "https://stackoverflow.com/questions/45969950/match-the-last-3-letters-of-words-in-a-string-using-regex/45970000#45970000", "title": "Match the last 3 letters of words in a string using regex", "body": "<p>You can just split:</p>\n\n<pre><code>pairOfLines=\"cough\\tbough\"\nval1, val2 = pairOfLines.split(\"\\t\")\nif val1[-3:] == val2[-3:]:\n   #do something\n</code></pre>\n\n<p>However, if you want to implement regex, you can use <code>re.split()</code>:</p>\n\n<pre><code>import re\n\nval1, val2 = re.split(\"\\t\", pairOfLines)\nif val1[-3:] == val2[-3:]:\n   #do something\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 364, "user_id": 8419291, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/918628844942095/picture?type=large", "display_name": "Avo Asatryan", "link": "https://stackoverflow.com/users/8419291/avo-asatryan"}, "edited": false, "score": 0, "creation_date": 1504130745, "post_id": 45970134, "comment_id": 78900031, "body": "And how i need to write regexp whith match for &quot;quod erat demonstrandum\\ tand that, ladies and gentlemen, is the end of my memorandum&quot;. i need to compare last 3 letters of each part"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 364, "user_id": 8419291, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/918628844942095/picture?type=large", "display_name": "Avo Asatryan", "link": "https://stackoverflow.com/users/8419291/avo-asatryan"}, "edited": false, "score": 0, "creation_date": 1504131768, "post_id": 45970134, "comment_id": 78900336, "body": "@AvoAsatryan Honestly speaking, the modification isn&#39;t far off, but I would highly recommend trying it first, and opening a new question if it doesn&#39;t work out. All the best :)"}], "tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 5, "last_activity_date": 1504140636, "last_edit_date": 1504140636, "creation_date": 1504129369, "answer_id": 45970134, "question_id": 45969950, "link": "https://stackoverflow.com/questions/45969950/match-the-last-3-letters-of-words-in-a-string-using-regex/45970134#45970134", "title": "Match the last 3 letters of words in a string using regex", "body": "<pre><code>import re\n\npairOfLines=\"cough\\tbough\"\n\nm = re.match(r'.*?(\\w{3})\\b.*?(\\w{3})\\b', pairOfLines)\nprint(m.groups())\n('ugh', 'ugh')\n</code></pre>\n\n<ul>\n<li><code>.*?</code> - match anything before the first group </li>\n<li><p><code>(\\w{3})\\b</code> - 1st capture group, of which</p>\n\n<ul>\n<li><code>\\w{3}</code> - 3 letters</li>\n<li><code>\\b</code> - word boundary - indicating that the letters must lie at the end </li>\n</ul></li>\n<li><p><code>.*?</code> - match anything before the second group</p></li>\n<li><code>(\\w{3})\\b</code> - 2nd capture group, similar to the first</li>\n</ul>\n\n<hr>\n\n<p>You could also use <code>re.findall</code> to the same effect:</p>\n\n<pre><code>pairOfLines=\"cough\\tbough\"\n\nl = re.findall(r'(?:.*?(\\w{3})\\b)', pairOfLines)\nprint(l)\n['ugh', 'ugh']\n</code></pre>\n\n<ul>\n<li><code>(?:...)</code> - non-capturing outer-group</li>\n<li><code>(\\w{3})\\b</code> - solitary capture group, of which\n\n<ul>\n<li><code>\\w{3}</code>  - 3 letters</li>\n<li><code>\\b</code> - word boundary</li>\n</ul></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 3185, "user_id": 7031759, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/80DxZ.jpg?s=128&g=1", "display_name": "Skycc", "link": "https://stackoverflow.com/users/7031759/skycc"}, "is_accepted": false, "score": 1, "last_activity_date": 1504145872, "creation_date": 1504145872, "answer_id": 45972250, "question_id": 45969950, "link": "https://stackoverflow.com/questions/45969950/match-the-last-3-letters-of-words-in-a-string-using-regex/45972250#45972250", "title": "Match the last 3 letters of words in a string using regex", "body": "<p>you could use regex <a href=\"http://www.rexegg.com/regex-capture.html\" rel=\"nofollow noreferrer\">backreference</a> to match the capturing text twice</p>\n\n<pre><code>pairOfLines=\"cough\\tbough\"\npattern = r'(\\w{3})\\b.*?\\1\\b'\nmatch = re.search(pattern, pairOfLines)\n# match.group(1) = 'ugh'\n</code></pre>\n\n<p>match will return the match object if it fullfill the regex which match the last 3 char twice, else it will return None</p>\n\n<p>for example, if pairOfLines = \"cough\\tough<strong>s</strong>\", match will return None</p>\n\n<ul>\n<li><code>(\\w{3})</code>  - 1st capturing group of last 3 char </li>\n<li><code>\\b</code>       - end of\nword boundary </li>\n<li><code>.*?(\\1)</code>  - non greedy match of any char follow by\nmatching of 1st capturing group again </li>\n<li><code>\\b</code>       - end of word\nboundary</li>\n</ul>\n"}], "owner": {"reputation": 364, "user_id": 8419291, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/918628844942095/picture?type=large", "display_name": "Avo Asatryan", "link": "https://stackoverflow.com/users/8419291/avo-asatryan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1783, "favorite_count": 0, "accepted_answer_id": 45970134, "answer_count": 3, "score": 0, "last_activity_date": 1547361412, "creation_date": 1504128414, "last_edit_date": 1547361412, "question_id": 45969950, "link": "https://stackoverflow.com/questions/45969950/match-the-last-3-letters-of-words-in-a-string-using-regex", "title": "Match the last 3 letters of words in a string using regex", "body": "<p>I have a string \"cough\\tbough\" or \"quod erat demonstrandum\\\ntand that, ladies and gentlemen, is the end of my memorandum\". And i need to check if last 3 letters of last words of this sentences are equal. But backslash is confusing me.</p>\n\n<pre><code>pairOfLines=\"cough\\tbough\"\npattern = ?????\nmatch = re.match(pattern, pairOfLines)\nreturn match.group(1) == match.group(2)\n</code></pre>\n"}, {"tags": ["python", "performance", "python-3.x", "numpy", "for-loop"], "comments": [{"owner": {"reputation": 7725, "user_id": 4889267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b86b65464f4070d38bbf2abdbd4f1610?s=128&d=identicon&r=PG&f=1", "display_name": "AK47", "link": "https://stackoverflow.com/users/4889267/ak47"}, "edited": false, "score": 0, "creation_date": 1504128279, "post_id": 45969870, "comment_id": 78899144, "body": "Can you share the contents of your arrays ?"}, {"owner": {"reputation": 75, "user_id": 8538668, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7MyxG0wBfo4/AAAAAAAAAAI/AAAAAAAAADU/E1qwz2mi_Cs/photo.jpg?sz=128", "display_name": "Adam", "link": "https://stackoverflow.com/users/8538668/adam"}, "reply_to_user": {"reputation": 7725, "user_id": 4889267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b86b65464f4070d38bbf2abdbd4f1610?s=128&d=identicon&r=PG&f=1", "display_name": "AK47", "link": "https://stackoverflow.com/users/4889267/ak47"}, "edited": false, "score": 0, "creation_date": 1504128441, "post_id": 45969870, "comment_id": 78899198, "body": "Each array is a 1D array with length = 10^6."}, {"owner": {"reputation": 75, "user_id": 8538668, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7MyxG0wBfo4/AAAAAAAAAAI/AAAAAAAAADU/E1qwz2mi_Cs/photo.jpg?sz=128", "display_name": "Adam", "link": "https://stackoverflow.com/users/8538668/adam"}, "reply_to_user": {"reputation": 7725, "user_id": 4889267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b86b65464f4070d38bbf2abdbd4f1610?s=128&d=identicon&r=PG&f=1", "display_name": "AK47", "link": "https://stackoverflow.com/users/4889267/ak47"}, "edited": false, "score": 0, "creation_date": 1504128616, "post_id": 45969870, "comment_id": 78899251, "body": "the variables plane1Dets and plane2DetScale are 1x10^6 arrays with values ranging from 0 to 11."}, {"owner": {"reputation": 7725, "user_id": 4889267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b86b65464f4070d38bbf2abdbd4f1610?s=128&d=identicon&r=PG&f=1", "display_name": "AK47", "link": "https://stackoverflow.com/users/4889267/ak47"}, "edited": false, "score": 2, "creation_date": 1504128731, "post_id": 45969870, "comment_id": 78899301, "body": "I suggest you check out: <a href=\"https://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a> and post your question again. You&#39;ll have a better chance of getting a good solid answer if you make it easier for people to run / debug your problem"}, {"owner": {"reputation": 1767, "user_id": 5420432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/626fb32f10020d504b6090933d592433?s=128&d=identicon&r=PG", "display_name": "RobertB", "link": "https://stackoverflow.com/users/5420432/robertb"}, "edited": false, "score": 0, "creation_date": 1504131911, "post_id": 45969870, "comment_id": 78900386, "body": "&#39;&lt;do stuff here&gt;&#39; better to give run-able code.."}, {"owner": {"reputation": 75, "user_id": 8538668, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7MyxG0wBfo4/AAAAAAAAAAI/AAAAAAAAADU/E1qwz2mi_Cs/photo.jpg?sz=128", "display_name": "Adam", "link": "https://stackoverflow.com/users/8538668/adam"}, "edited": false, "score": 0, "creation_date": 1504132660, "post_id": 45969870, "comment_id": 78900589, "body": "I updated what I wrote to make it runnable and included some of the timestamps that can be expected. Like I said above, these arrays are 10^6 values in length so I can&#39;t add all values."}, {"owner": {"reputation": 7436, "user_id": 5514476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hP6t0.jpg?s=128&g=1", "display_name": "DJK", "link": "https://stackoverflow.com/users/5514476/djk"}, "edited": false, "score": 1, "creation_date": 1504155466, "post_id": 45969870, "comment_id": 78905823, "body": "This code sample is still missing information"}], "answers": [{"tags": [], "owner": {"reputation": 7436, "user_id": 5514476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hP6t0.jpg?s=128&g=1", "display_name": "DJK", "link": "https://stackoverflow.com/users/5514476/djk"}, "is_accepted": true, "score": 1, "last_activity_date": 1504157057, "creation_date": 1504157057, "answer_id": 45973774, "question_id": 45969870, "link": "https://stackoverflow.com/questions/45969870/removing-nested-for-loop-to-find-coincidence-values/45973774#45973774", "title": "Removing nested for loop to find coincidence values", "body": "<p>I cant really test because the code you provided isn't complete, but this is a possible solution</p>\n\n<pre><code>for index,value in enumerate(plane1Times):\n    vec = plane2Times - value\n    row,col = np.where((vec&lt;=10000)&amp;(vec&gt;0))\n    if len(row) &gt; 0:\n        x1 = plane1Local[plane1Dets[index]]\n        x2 = plane2Local[plane2DetScale[row[0]]]\n        distance = np.sqrt((x2[0] - x1[0]) ** 2 + (x2[1] - x1[1]) ** 2 + (x2[2]) ** 2)\n        timeSeparation = (plane2Times[row[0]] - plane1Times[index]) * timeScale\n        velocity += distance / timeSeparation\n</code></pre>\n\n<p>Eliminate the second loop, and just do the subtraction all at once. Then search the new array, where it meats your criteria. Since it seems that you want the first value, just take the first index like <code>row[0]</code> to get the index of the value check. Removing the second for loop should drop the time considerably. </p>\n"}], "owner": {"reputation": 75, "user_id": 8538668, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7MyxG0wBfo4/AAAAAAAAAAI/AAAAAAAAADU/E1qwz2mi_Cs/photo.jpg?sz=128", "display_name": "Adam", "link": "https://stackoverflow.com/users/8538668/adam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 45973774, "answer_count": 1, "score": 0, "last_activity_date": 1504157057, "creation_date": 1504128019, "last_edit_date": 1504132609, "question_id": 45969870, "link": "https://stackoverflow.com/questions/45969870/removing-nested-for-loop-to-find-coincidence-values", "title": "Removing nested for loop to find coincidence values", "body": "<p>I am currently using a nested for loop to iterate through to arrays to find values that match a certain criterion. The problem is that this method is incredibly inefficient and time consuming. I was told that a better way might be to sort the two arrays based on the data, but this requires me to combine several 1D arrays and one multi-D array, sort based on one column, then separate them again. Is there a more efficient way of doing this? Here is a sample of my code:</p>\n\n<pre><code>x1 = []\nx2 = []\nvelocity = []\nplane1Times = np.array([[2293902],[2848853],[482957]])\nplane2Times = np.array([[7416504],[2613113],[2326542]])\nplane1Local = np.array([[0,0,0],[0,u,0],[0,2*u,0],[u,0,0],[u,u,0],[u,2*u,0],[2*u,0,0],[2*u,u,0],[2*u,2*u,0],[3*u,0,0],[3*u,u,0],[3*u,2*u,0]],dtype='float')\nplane2Local = np.array([[0,0,D],[0,u,D],[0,2*u,D],[u,0,D],[u,u,D],[u,2*u,D],[2*u,0,D],[2*u,u,D],[2*u,2*u,D],[3*u,0,D],[3*u,u,D],[3*u,2*u,D]],dtype='float')\nfor i in range(0,len(plane1Times)):\n    tic = time.time()\n    for n in range(0,len(plane2Times)):\n        if plane2Times[n] - plane1Times[i] &lt;= 10000 and plane2Times[n] - plane1Times[i] &gt; 0:\n            x1 = plane1Local[plane1Dets[i]]\n            x2 = plane2Local[plane2DetScale[n]]\n            distance = np.sqrt((x2[0]-x1[0])**2 + (x2[1]-x1[1])**2 + (x2[2])**2)\n            timeSeparation = (plane2Times[n]-plane1Times[i])*timeScale\n            velocity += distance/timeSeparation\n            break\n</code></pre>\n\n<p>To give you an example of the time it is currently taking, each array of times is 10**6 values long so 100 loops in <code>i</code> takes about 60 seconds. Can someone please help me?</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 1723, "user_id": 2321308, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/93a34f3ced3b71ab0490da0d2d7cc17c?s=128&d=identicon&r=PG", "display_name": "ulitosCoder", "link": "https://stackoverflow.com/users/2321308/ulitoscoder"}, "edited": false, "score": 0, "creation_date": 1504186657, "post_id": 45969897, "comment_id": 78925246, "body": "Thanks! This is exactly what needed."}], "tags": [], "owner": {"reputation": 58812, "user_id": 2137255, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/zzmt4.png?s=128&g=1", "display_name": "Zero", "link": "https://stackoverflow.com/users/2137255/zero"}, "is_accepted": true, "score": 5, "last_activity_date": 1504128168, "creation_date": 1504128168, "answer_id": 45969897, "question_id": 45969828, "link": "https://stackoverflow.com/questions/45969828/combine-two-pandas-dataframe-into-one-new/45969897#45969897", "title": "Combine two pandas DataFrame into one new", "body": "<p>Use <code>pd.merge</code></p>\n\n<pre><code>In [406]: (pd.merge(speed_df, temp_df, how='outer', on='ts')\n             .rename(columns={'val_x': 'speed','val_y': 'temp'})\n             .sort_values(by='ts'))\nOut[406]:\n   ts  speed  temp\n0   0    5.0   9.0\n1   1    4.0   8.0\n4   2    NaN   7.0\n2   3    2.0   NaN\n3   4    1.0   NaN\n\nIn [407]: (pd.merge(speed_df, temp_df, how='outer', on='ts')\n             .rename(columns={'val_x': 'speed', 'val_y': 'temp'})\n             .sort_values(by='ts').ffill())\nOut[407]:\n   ts  speed  temp\n0   0    5.0   9.0\n1   1    4.0   8.0\n4   2    4.0   7.0\n2   3    2.0   7.0\n3   4    1.0   7.0\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1504129237, "post_id": 45969958, "comment_id": 78899486, "body": "This is step by step identical to @JohnGalt&#39;s answer"}], "tags": [], "owner": {"reputation": 1851, "user_id": 4177078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95c881f10920eedf522afae7bc193d6c?s=128&d=identicon&r=PG&f=1", "display_name": "rojeeer", "link": "https://stackoverflow.com/users/4177078/rojeeer"}, "is_accepted": false, "score": 0, "last_activity_date": 1504128446, "creation_date": 1504128446, "answer_id": 45969958, "question_id": 45969828, "link": "https://stackoverflow.com/questions/45969828/combine-two-pandas-dataframe-into-one-new/45969958#45969958", "title": "Combine two pandas DataFrame into one new", "body": "<p>Two main DataFrame options, one is <code>pd.merge</code> and the other is <code>pd.fillna</code>. Here is the code:</p>\n\n<pre><code>df = speed_df.merge(temp_df, how='outer', on='ts')\ndf = df.rename(columns=dict(val_x='speed', val_y='temp'))\ndf = df.sort_values('ts')\ndf.fillna(method='ffill')\n</code></pre>\n\n<p>Hope this would be helpful.</p>\n\n<p>Thanks</p>\n"}, {"tags": [], "owner": {"reputation": 355, "user_id": 4071868, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fbe04ed0434c6d3ebbd0a26158ad6ce2?s=128&d=identicon&r=PG&f=1", "display_name": "ashish trehan", "link": "https://stackoverflow.com/users/4071868/ashish-trehan"}, "is_accepted": false, "score": -1, "last_activity_date": 1504129813, "creation_date": 1504129813, "answer_id": 45970225, "question_id": 45969828, "link": "https://stackoverflow.com/questions/45969828/combine-two-pandas-dataframe-into-one-new/45970225#45970225", "title": "Combine two pandas DataFrame into one new", "body": "<p>You need to do a left outer join using pandas.merge function</p>\n\n<pre><code>d = pd.merge(speed_df,temp_df,on='ts',how='outer').rename(columns=\\\n{'val_x':'speed','val_y':'temp'})\nd = d.sort_values('ts')\nd['speed']=d['speed'].fillna(4)\nd['temp']=d['temp'].fillna(7)\n</code></pre>\n\n<p>That should return you this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/ugM1g.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ugM1g.jpg\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 1723, "user_id": 2321308, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/93a34f3ced3b71ab0490da0d2d7cc17c?s=128&d=identicon&r=PG", "display_name": "ulitosCoder", "link": "https://stackoverflow.com/users/2321308/ulitoscoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 586, "favorite_count": 0, "accepted_answer_id": 45969897, "answer_count": 3, "score": 0, "last_activity_date": 1504129813, "creation_date": 1504127783, "question_id": 45969828, "link": "https://stackoverflow.com/questions/45969828/combine-two-pandas-dataframe-into-one-new", "title": "Combine two pandas DataFrame into one new", "body": "<p>I have two Pandas DataFrames whose data from different sources, but both DataFrames have the same column names. When combined only one column will keep the name.</p>\n\n<p>Like this:</p>\n\n<pre><code>speed_df = pd.DataFrame.from_dict({\n    'ts':  [0,1,3,4],\n    'val': [5,4,2,1]\n    })\n\ntemp_df = pd.DataFrame.from_dict({\n    'ts':  [0,1,2],\n    'val': [9,8,7]\n    })\n</code></pre>\n\n<p>And I need to have a result like this:</p>\n\n<pre><code>final_df = pd.DataFrame.from_dict({\n    'ts':    [0,1,2,3,4],\n    'speed': [5,4,NaN,1],\n    'temp':  [9,8,7,NaN,NaN]\n    })\n</code></pre>\n\n<p>Later I will deal with empty cells (here filled with NaN) by copying the values of the previous valid value. And get something like this:</p>\n\n<pre><code>final_df = pd.DataFrame.from_dict({\n    'ts':    [0,1,2,3,4],\n    'speed': [5,4,4,1],\n    'temp':  [9,8,7,7,7]\n    })\n</code></pre>\n"}, {"tags": ["python", "django", "url", "jinja2"], "answers": [{"tags": [], "owner": {"reputation": 250720, "user_id": 113962, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b80ae1d65878cf68a4b1a00848467527?s=128&d=identicon&r=PG", "display_name": "Alasdair", "link": "https://stackoverflow.com/users/113962/alasdair"}, "is_accepted": false, "score": 0, "last_activity_date": 1504128255, "creation_date": 1504128255, "answer_id": 45969914, "question_id": 45969800, "link": "https://stackoverflow.com/questions/45969800/allow-user-to-edit-profile-information-and-submit-it-causing-page-to-redirect-to/45969914#45969914", "title": "Allow user to edit profile information and submit it causing page to redirect to profile page.", "body": "<p>When you redirect you should include a leading slash to make it an absolute url:</p>\n\n<pre><code>return redirect('/account/profile')\n</code></pre>\n\n<p>You can avoid hardcoding the url by using the URL pattern name instead. The <code>redirect</code> shortcut will reverse the url for you:</p>\n\n<pre><code>return redirect('view_profile')\n</code></pre>\n"}], "owner": {"reputation": 381, "user_id": 7964856, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh3.googleusercontent.com/-aiikX3uhRPU/AAAAAAAAAAI/AAAAAAAAAGk/hbux2bd4zfs/photo.jpg?sz=128", "display_name": "Waltham WECAN", "link": "https://stackoverflow.com/users/7964856/waltham-wecan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 145, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1504128255, "creation_date": 1504127652, "question_id": 45969800, "link": "https://stackoverflow.com/questions/45969800/allow-user-to-edit-profile-information-and-submit-it-causing-page-to-redirect-to", "title": "Allow user to edit profile information and submit it causing page to redirect to profile page.", "body": "<p>In django I am attempting to allow that user to edit his/her profile information, press submit, and have the the change reflect in his/her profile page. </p>\n\n<p>This is the code : </p>\n\n<p>In the views.py document in my application </p>\n\n<blockquote>\n  <p>User is allowed to view the profile page</p>\n</blockquote>\n\n<pre><code>def view_profile(request):\n\n    var = { 'user' : request.user }\n\n    return render(request, 'accounts/profile.html', var)\n</code></pre>\n\n<blockquote>\n  <p>User is allowed to edit the profile page</p>\n</blockquote>\n\n<pre><code>def edit_profile(request):\n\n    if request.method == 'POST':\n        form = UserChangeForm(request.POST, instance=request.user)\n\n        if form.is_valid():\n            form.save()\n\n            return redirect('account/profile')\n\n    else:\n\n        form = UserChangeForm(instance=request.user)\n\n        var = {'form' : form }\n        return render(request, 'accounts/edit_profile.html', var)\n</code></pre>\n\n<p>This is the urls.py document </p>\n\n<blockquote>\n  <p>Import modules</p>\n</blockquote>\n\n<pre><code>from django.conf.urls import url\nfrom . import views\n</code></pre>\n\n<blockquote>\n  <p>Defined the urls</p>\n</blockquote>\n\n<pre><code>urlpatterns = [\n\nurl(r'^profile/$', views.view_profile, name = 'view_profile'),  \nurl(r'^profile/edit/$', views.edit_profile, name = 'edit_profile')\n\n]\n</code></pre>\n\n<p>This is the edit_profile </p>\n\n<pre><code>{% extends 'base.html' %}\n\n\n{%  block head %}\n\n&lt;title&gt;{{ user }}&lt;/title&gt;\n\n{% endblock %}\n\n\n{%  block body %}\n\n&lt;div class = \"container\"&gt;\n\n&lt;form method = \"post\"&gt;\n\n    {% csrf_token %}\n\n    {{ form.as_p }}\n\n    &lt;button class = \"btn btn-default\" type=\"submit\"&gt;Submit&lt;/button&gt;\n\n&lt;/form&gt;\n\n&lt;/div&gt;\n\n{% endblock %}\n</code></pre>\n\n<p>When I edit user model on the <code>edit_profile.html</code> page and submit, it redirects </p>\n\n<p>from : </p>\n\n<p><a href=\"http://127.0.0.1:8000/account/profile/edit/\" rel=\"nofollow noreferrer\">http://127.0.0.1:8000/account/profile/edit/</a></p>\n\n<p>To : </p>\n\n<p><a href=\"http://127.0.0.1:8000/account/profile/edit/account/profile\" rel=\"nofollow noreferrer\">http://127.0.0.1:8000/account/profile/edit/account/profile</a></p>\n\n<p>This latter urls is not accurate, it should redirect </p>\n\n<p>To : </p>\n\n<p><a href=\"http://127.0.0.1:8000/account/profile\" rel=\"nofollow noreferrer\">http://127.0.0.1:8000/account/profile</a></p>\n\n<p>This is how that page looks </p>\n\n<p><a href=\"https://i.stack.imgur.com/b5tFb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/b5tFb.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "pip", "pypi", "semantic-versioning"], "answers": [{"comments": [{"owner": {"reputation": 679, "user_id": 2989320, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/499e5ca489bea62b63a94e3c7335bf85?s=128&d=identicon&r=PG&f=1", "display_name": "supreme Pooba", "link": "https://stackoverflow.com/users/2989320/supreme-pooba"}, "edited": false, "score": 0, "creation_date": 1504131719, "post_id": 45969854, "comment_id": 78900320, "body": "Thank you!  This was the understanding I was looking for.  Thanks again."}], "tags": [], "owner": {"reputation": 45741, "user_id": 744178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3193139ea494c45e63752504f5ff1f2?s=128&d=identicon&r=PG", "display_name": "jwodder", "link": "https://stackoverflow.com/users/744178/jwodder"}, "is_accepted": true, "score": 2, "last_activity_date": 1504127946, "creation_date": 1504127946, "answer_id": 45969854, "question_id": 45969784, "link": "https://stackoverflow.com/questions/45969784/pip-install-not-recognizing-versions/45969854#45969854", "title": "PIP install not recognizing versions", "body": "<p>Due to the hyphen, <code>17.0828.222133-e1e0fd9</code> and the like are not valid version specifiers as defined in <a href=\"https://www.python.org/dev/peps/pep-0440/\" rel=\"nofollow noreferrer\">PEP 440</a>.  As a result, they are treated as \"legacy version\" strings by <a href=\"http://packaging.readthedocs.io\" rel=\"nofollow noreferrer\">pip's internals</a> and are sorted less than all valid version strings.  Hence, as far as pip is concerned, these versions are not greater than 17.</p>\n"}], "owner": {"reputation": 679, "user_id": 2989320, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/499e5ca489bea62b63a94e3c7335bf85?s=128&d=identicon&r=PG&f=1", "display_name": "supreme Pooba", "link": "https://stackoverflow.com/users/2989320/supreme-pooba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 0, "accepted_answer_id": 45969854, "answer_count": 1, "score": 1, "last_activity_date": 1504127946, "creation_date": 1504127589, "question_id": 45969784, "link": "https://stackoverflow.com/questions/45969784/pip-install-not-recognizing-versions", "title": "PIP install not recognizing versions", "body": "<p>I have a custom pypi server, that I am installing files from. I attempt to upgrade from version 0.0.1 to a newer version of my own custom module. It is not detecting the later version.  When I do a <code>pip install 'mymodule&gt;=17'</code> I see:</p>\n\n<pre><code>Could not find a version that satisfies the requirement mymodule&gt;=17 \n(from versions: 17.0828.222133-e1e0fd9, 17.0828.222305-e1e0fd9, \n17.830.210154-e1e0fd9, 0.0.1)\n</code></pre>\n\n<p>Notice the versions show up, but it will never detect the 17.X versions with the git sha on the end. Ideas? Why would this be?</p>\n"}, {"tags": ["python", "bigdata"], "comments": [{"owner": {"reputation": 4314, "user_id": 5152563, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/ca2290acd27712398ff5bf1d469129dd?s=128&d=identicon&r=PG", "display_name": "Quickbeam2k1", "link": "https://stackoverflow.com/users/5152563/quickbeam2k1"}, "edited": false, "score": 1, "creation_date": 1504127834, "post_id": 45969782, "comment_id": 78898937, "body": "you might want to check <a href=\"https://dask.pydata.org/en/latest/\" rel=\"nofollow noreferrer\">dask</a> for pandas like syntax on huge files. Additionally, you might want to check <a href=\"https://spark.apache.org/docs/0.9.0/python-programming-guide.html\" rel=\"nofollow noreferrer\">pyspark</a>"}, {"owner": {"reputation": 1818, "user_id": 2171758, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/0pO0W.jpg?s=128&g=1", "display_name": "salient", "link": "https://stackoverflow.com/users/2171758/salient"}, "edited": false, "score": 1, "creation_date": 1504127915, "post_id": 45969782, "comment_id": 78898973, "body": "treating it as a stream will be <i>much</i> faster (+ saves you memory :) if you want maximum performance: work on the bytes directly instead of first casting to string."}, {"owner": {"reputation": 3353, "user_id": 1858151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84149fe98216d2a7875da7ce6e875335?s=128&d=identicon&r=PG", "display_name": "stefan", "link": "https://stackoverflow.com/users/1858151/stefan"}, "edited": false, "score": 1, "creation_date": 1504128255, "post_id": 45969782, "comment_id": 78899132, "body": "If you can do the task in a stream operation then you most probably (imho always) should do so."}, {"owner": {"reputation": 524, "user_id": 3684651, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7a7c14b50aa4fcdfecd18696004a1699?s=128&d=identicon&r=PG&f=1", "display_name": "j riot", "link": "https://stackoverflow.com/users/3684651/j-riot"}, "edited": false, "score": 1, "creation_date": 1504128468, "post_id": 45969782, "comment_id": 78899210, "body": "Thank you all. I have never heard of dask, but this look quite nice and much easier to use compared to pyspark. It does save on memory, which is the main reason I wrote in a streaming format first. I will look into working on the bytes directly, I have not done that before, as I haven&#39;t had a necessity."}], "owner": {"reputation": 524, "user_id": 3684651, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7a7c14b50aa4fcdfecd18696004a1699?s=128&d=identicon&r=PG&f=1", "display_name": "j riot", "link": "https://stackoverflow.com/users/3684651/j-riot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 392, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1505445176, "creation_date": 1504127578, "last_edit_date": 1506102531, "question_id": 45969782, "link": "https://stackoverflow.com/questions/45969782/quickest-iteration-in-python-on-40gb-of-data-106-million-rows", "title": "Quickest iteration in Python on 40gb of data - 106 million rows", "body": "<p>I have a .csv file with 40gb of data (106 million rows) as the title says. I need to subset based on a condition - one of the columns in the data is a list of words that needs proper adjusting on the fly. I need to subset it based on check of those words against another list. </p>\n\n<p>Is it quicker to iterate through the file e.g., bring in one row of a data at a time and save it off it passes the test or load it all in a Pandas DataFrame and conduct the check there?</p>\n\n<p>My intuition tells me loading it row by row and saving it off is better, but I am unsure. </p>\n\n<p>Lastly, why is one quicker than the other on this size of data?</p>\n"}, {"tags": ["python", "mysql", "null", "nonetype"], "comments": [{"owner": {"reputation": 3334, "user_id": 4473327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hP14q.jpg?s=128&g=1", "display_name": "neuhaus", "link": "https://stackoverflow.com/users/4473327/neuhaus"}, "edited": false, "score": 1, "creation_date": 1504127636, "post_id": 45969756, "comment_id": 78898844, "body": "you could search/replace the quoted NULL..."}, {"owner": {"reputation": 1584, "user_id": 3775614, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tkkon.png?s=128&g=1", "display_name": "lee-pai-long", "link": "https://stackoverflow.com/users/3775614/lee-pai-long"}, "edited": false, "score": 0, "creation_date": 1504127660, "post_id": 45969756, "comment_id": 78898854, "body": "Does NULL need to be in that exact position in the string ?"}, {"owner": {"reputation": 1052, "user_id": 8474432, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/71c628c0ad8557384540efe8c7cdab1e?s=128&d=identicon&r=PG&f=1", "display_name": "curious_cosmo", "link": "https://stackoverflow.com/users/8474432/curious-cosmo"}, "reply_to_user": {"reputation": 1584, "user_id": 3775614, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tkkon.png?s=128&g=1", "display_name": "lee-pai-long", "link": "https://stackoverflow.com/users/3775614/lee-pai-long"}, "edited": false, "score": 0, "creation_date": 1504127688, "post_id": 45969756, "comment_id": 78898871, "body": "@lee-pai-long Yes, it does. The order matters for everything I&#39;m inserting."}, {"owner": {"reputation": 859, "user_id": 8513103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d298d3271438be46aaff29495445a827?s=128&d=identicon&r=PG&f=1", "display_name": "sKwa", "link": "https://stackoverflow.com/users/8513103/skwa"}, "edited": false, "score": 2, "creation_date": 1504127836, "post_id": 45969756, "comment_id": 78898939, "body": "<code>&quot;&#39;{}&#39;&quot;.format(&quot;&#39;,&#39;&quot;.join(lst)).replace(&quot;&#39;NULL&#39;&quot;, &#39;NULL&#39;)</code>"}, {"owner": {"reputation": 1122, "user_id": 6591929, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xvWTst1SSxM/AAAAAAAAAAI/AAAAAAAAAAA/hQ2RU001jNI/photo.jpg?sz=128", "display_name": "kip", "link": "https://stackoverflow.com/users/6591929/kip"}, "edited": false, "score": 0, "creation_date": 1504127852, "post_id": 45969756, "comment_id": 78898943, "body": "You can try get this value ? <code>&#39;3:44:44&#39;,&#39;1.&#39;,&#39;0&#39;,&#39;2P&#39;,&#39;ri&#39;,NULL,&#39;fs&#39;</code>"}, {"owner": {"reputation": 1584, "user_id": 3775614, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tkkon.png?s=128&g=1", "display_name": "lee-pai-long", "link": "https://stackoverflow.com/users/3775614/lee-pai-long"}, "edited": false, "score": 0, "creation_date": 1504128113, "post_id": 45969756, "comment_id": 78899070, "body": "Can you switch the list to a dict ?"}, {"owner": {"reputation": 1052, "user_id": 8474432, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/71c628c0ad8557384540efe8c7cdab1e?s=128&d=identicon&r=PG&f=1", "display_name": "curious_cosmo", "link": "https://stackoverflow.com/users/8474432/curious-cosmo"}, "edited": false, "score": 0, "creation_date": 1504128260, "post_id": 45969756, "comment_id": 78899136, "body": "Thank you, the search and replace method worked!"}], "answers": [{"tags": [], "owner": {"reputation": 355, "user_id": 4071868, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fbe04ed0434c6d3ebbd0a26158ad6ce2?s=128&d=identicon&r=PG&f=1", "display_name": "ashish trehan", "link": "https://stackoverflow.com/users/4071868/ashish-trehan"}, "is_accepted": false, "score": 0, "last_activity_date": 1504127923, "creation_date": 1504127923, "answer_id": 45969845, "question_id": 45969756, "link": "https://stackoverflow.com/questions/45969756/python-change-format-for-only-certain-items-in-list/45969845#45969845", "title": "Python change format for only certain items in list", "body": "<p>If you are inserting it as a string why not ignore the \"Null\". So the input goes in like </p>\n\n<pre><code>lst = ['3:44:44', '1.', '0', '2P', 'ri', 'NULL', 'fs'].\n\n\"'{}'\".format(\"','\".join([x if x!='NULL' else '' for x in lst]))\n</code></pre>\n\n<p>Output should be then </p>\n\n<blockquote>\n  <p>\"'3:44:44','1.','0','2P','ri','','fs'\"</p>\n</blockquote>\n\n<p>It should read the '' as empty value or null.</p>\n"}, {"comments": [{"owner": {"reputation": 859, "user_id": 8513103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d298d3271438be46aaff29495445a827?s=128&d=identicon&r=PG&f=1", "display_name": "sKwa", "link": "https://stackoverflow.com/users/8513103/skwa"}, "edited": false, "score": 0, "creation_date": 1504129101, "post_id": 45969917, "comment_id": 78899431, "body": "nice solution ;)"}, {"owner": {"reputation": 1122, "user_id": 6591929, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xvWTst1SSxM/AAAAAAAAAAI/AAAAAAAAAAA/hQ2RU001jNI/photo.jpg?sz=128", "display_name": "kip", "link": "https://stackoverflow.com/users/6591929/kip"}, "reply_to_user": {"reputation": 859, "user_id": 8513103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d298d3271438be46aaff29495445a827?s=128&d=identicon&r=PG&f=1", "display_name": "sKwa", "link": "https://stackoverflow.com/users/8513103/skwa"}, "edited": false, "score": 0, "creation_date": 1504129775, "post_id": 45969917, "comment_id": 78899681, "body": "We both think the same solution @sKwa"}], "tags": [], "owner": {"reputation": 1122, "user_id": 6591929, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xvWTst1SSxM/AAAAAAAAAAI/AAAAAAAAAAA/hQ2RU001jNI/photo.jpg?sz=128", "display_name": "kip", "link": "https://stackoverflow.com/users/6591929/kip"}, "is_accepted": true, "score": 1, "last_activity_date": 1504128258, "creation_date": 1504128258, "answer_id": 45969917, "question_id": 45969756, "link": "https://stackoverflow.com/questions/45969756/python-change-format-for-only-certain-items-in-list/45969917#45969917", "title": "Python change format for only certain items in list", "body": "<p>Maybe this also work:</p>\n\n<pre><code>&gt;&gt;&gt; lst = ['3:44:44', '1.', '0', '2P', 'ri', 'NULL', 'fs']\n&gt;&gt;&gt; print (\"'{}'\".format(\"','\".join(lst)).replace(\"'NULL'\", 'NULL'))\n'3:44:44','1.','0','2P','ri',NULL,'fs'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 22312, "user_id": 463758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/105689a9cb392f18c1d0b27ed0cf657f?s=128&d=identicon&r=PG&f=1", "display_name": "balki", "link": "https://stackoverflow.com/users/463758/balki"}, "is_accepted": false, "score": 0, "last_activity_date": 1504128513, "creation_date": 1504128513, "answer_id": 45969972, "question_id": 45969756, "link": "https://stackoverflow.com/questions/45969756/python-change-format-for-only-certain-items-in-list/45969972#45969972", "title": "Python change format for only certain items in list", "body": "<p>Pythonic clear way:</p>\n\n<pre><code>In [41]: def quote_item(item):\n    ...:     if item == \"NULL\":\n    ...:         return item\n    ...:     else:\n    ...:         return \"'{}'\".format(item)\n    ...:   \n\nIn [42]: result = \",\".join(quote_item(item) for item in lst)\n\nIn [43]: print(result)\n'3:44:44','1.','0','2P','ri',NULL,'fs'\n</code></pre>\n"}], "owner": {"reputation": 1052, "user_id": 8474432, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/71c628c0ad8557384540efe8c7cdab1e?s=128&d=identicon&r=PG&f=1", "display_name": "curious_cosmo", "link": "https://stackoverflow.com/users/8474432/curious-cosmo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 45969917, "answer_count": 3, "score": 0, "last_activity_date": 1504128513, "creation_date": 1504127449, "question_id": 45969756, "link": "https://stackoverflow.com/questions/45969756/python-change-format-for-only-certain-items-in-list", "title": "Python change format for only certain items in list", "body": "<p>I have a list like this:</p>\n\n<pre><code>lst = ['3:44:44', '1.', '0', '2P', 'ri', 'NULL', 'fs']\n</code></pre>\n\n<p>And I used this code to get it into this format (because I'm going to insert it into a mysql table):</p>\n\n<pre><code>\"'{}'\".format(\"','\".join(lst))\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>'3:44:44','1.','0','2P','ri','NULL','fs'\n</code></pre>\n\n<p>Which is almost exactly what I want, except I do not want the NULL in quotes (if it goes in as quotes then mysql interprets that as 0, but I need it to be inserted as null). I also have many lists that I need to make sure the NULL is not in quotes but everything else is. How can I do this?</p>\n\n<p>I also tried using python's None instead of 'NULL' but when I need to change the format from a list to comma separated values, python doesn't like the NoneType.</p>\n"}, {"tags": ["python", "animation", "matplotlib"], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 5095925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/928fd746ff96d4ed2d90d4b9b36b5246?s=128&d=identicon&r=PG", "display_name": "Ryan", "link": "https://stackoverflow.com/users/5095925/ryan"}, "edited": false, "score": 0, "creation_date": 1504214809, "post_id": 45983859, "comment_id": 78940830, "body": "Thanks, this solves my problem. That extra add_patch line was a vestige of the previous method I used, which did not use the PatchCollections class, so I just forgot to remove it."}, {"owner": {"reputation": 63, "user_id": 5095925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/928fd746ff96d4ed2d90d4b9b36b5246?s=128&d=identicon&r=PG", "display_name": "Ryan", "link": "https://stackoverflow.com/users/5095925/ryan"}, "edited": false, "score": 0, "creation_date": 1504215390, "post_id": 45983859, "comment_id": 78941032, "body": "Previously, the actual time to update the plot was the limiting factor. I am animating 500-1000 squares so I wanted it to run as fast as possible. 20ms would be a 50fps animation, which is good for my purposes.  Also I agree it makes more sense to substitute the i-th value in the color list. If you were to write your own animation of this style, would you use PatchCollections and edit the color array, or would you do it another way?"}, {"owner": {"reputation": 29479, "user_id": 1356000, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ef54c2101a4c23ea2441ce2b346ffb75?s=128&d=identicon&r=PG", "display_name": "Diziet Asahi", "link": "https://stackoverflow.com/users/1356000/diziet-asahi"}, "reply_to_user": {"reputation": 63, "user_id": 5095925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/928fd746ff96d4ed2d90d4b9b36b5246?s=128&d=identicon&r=PG", "display_name": "Ryan", "link": "https://stackoverflow.com/users/5095925/ryan"}, "edited": false, "score": 0, "creation_date": 1504250769, "post_id": 45983859, "comment_id": 78950215, "body": "I don&#39;t have any experience dealing with lots of elements to animate. But as far as I know, as long as you can accept the limits of working with a <code>Collection</code> object, it will always be faster than drawing the individual patches"}], "tags": [], "owner": {"reputation": 29479, "user_id": 1356000, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ef54c2101a4c23ea2441ce2b346ffb75?s=128&d=identicon&r=PG", "display_name": "Diziet Asahi", "link": "https://stackoverflow.com/users/1356000/diziet-asahi"}, "is_accepted": true, "score": 2, "last_activity_date": 1504189436, "creation_date": 1504189436, "answer_id": 45983859, "question_id": 45969740, "link": "https://stackoverflow.com/questions/45969740/python-matplotlib-patchcollection-animation-doesnt-update/45983859#45983859", "title": "Python Matplotlib: PatchCollection animation doesn&#39;t update", "body": "<p>I'm not sure I fully understand your code. Is the idea that switching the <code>facecolor</code> of a rectangle from white to black is \"adding\" that rectangle to the plot?</p>\n\n<p>It took me a bit of time to figure out why your code was not working, but it turns out to be a silly mistake. The problem is with the line <code>ax.add_patch(patch)</code>. You are actually adding two sets of rectangles on your plot, once as a single <code>Rectangle</code> instance, and the second as part of the <code>PatchCollection</code>. It seems like the <code>Rectangles</code> stay on top of the collection, and so you're just not seeing the animation. Just commenting the offending line (<code>ax.add_patch(patch)</code>) seems to fix the problem.</p>\n\n<p>Also, <code>FuncAnimation(..., interval=)</code> is expressed in <code>ms</code>, so you might want to increase the value to something larger (100ms, or 1000ms i.e. 1s) to see the animation.</p>\n\n<p>Here how I would write the code (<a href=\"https://stackoverflow.com/a/19852549/1356000\">loosely inspired by this question on SO</a>):</p>\n\n<pre><code>Nx = 30\nNy = 20\nsize = 0.5\n\ncolors = ['w']*Nx*Ny\n\nfig, ax = plt.subplots()\n\nrects = []\nfor i in range(Nx):\n    for j in range(Ny):\n        rect = plt.Rectangle([i - size / 2, j - size / 2], size, size)\n        rects.append(rect)\n\ncollection = PatchCollection(rects, animated=True)\n\nax.add_collection(collection)\nax.autoscale_view(True)\n\ndef init():\n    # sets all the patches in the collection to white\n    collection.set_facecolor(colors)\n    return collection,\n\ndef animate(i):\n    colors[i] = 'k'\n    collection.set_facecolors(colors)\n    return collection,\n\nani = FuncAnimation(fig, init_func=init, func=animate, frames=Nx*Ny,\n        interval=1e2, blit=True)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/wpD5q.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wpD5q.gif\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 63, "user_id": 5095925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/928fd746ff96d4ed2d90d4b9b36b5246?s=128&d=identicon&r=PG", "display_name": "Ryan", "link": "https://stackoverflow.com/users/5095925/ryan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 908, "favorite_count": 0, "accepted_answer_id": 45983859, "answer_count": 1, "score": 0, "last_activity_date": 1504189436, "creation_date": 1504127361, "question_id": 45969740, "link": "https://stackoverflow.com/questions/45969740/python-matplotlib-patchcollection-animation-doesnt-update", "title": "Python Matplotlib: PatchCollection animation doesn&#39;t update", "body": "<p>I have been attempting to optimize my matplotlib animation which involves adding a rectangle to the plot with each iteration. Since the animation function updates the entire set of patches with each iteration it is very slow for large sets of patches.</p>\n\n<p>According to several sources, this process can be sped up by using a PatchCollection instead of looping over patches. This is my attempt:</p>\n\n<pre><code>from matplotlib import pyplot\nfrom matplotlib import patches\nfrom matplotlib import animation\nfrom matplotlib.collections import PatchCollection\n\nfig = pyplot.figure()\n\ncoords = [[1,0],[0,1],[0,0]] #arbitrary set of coordinates\n\nax = pyplot.axes(xlim=(0, len(coords)), ylim=(0, len(coords)))\nax.set_aspect('equal')\n\n\npatchList = list()\n\nfor coord in coords:\n    patch = patches.Rectangle(coord, 1, 1, color=\"white\")\n    ax.add_patch(patch)\n    patch.set_visible = True\n    patchList.append(patch)\n\nrectangles = PatchCollection(patchList, animated=True)\nax.add_collection(rectangles)\n\n\nblack = []\nwhite = [\"white\"]*len(patchList)\n\ndef animate(i):\n    black.append(\"black\")\n    white.pop()\n\n    colors = black + white\n    print(colors)\n\n    rectangles.set_facecolors(colors)\n    print(\"%.2f%%...\"%(100*float(i+1)/len(coords)))\n\n    return rectangles,\n\nanim = animation.FuncAnimation(fig, animate,\n                               # init_func=init,\n                               frames=len(coords)-1,\n                               interval=1,\n                               blit=True,\n                               repeat = False)\n\npyplot.show()\n</code></pre>\n\n<p>The animation never updates. It is frozen on an empty plot.</p>\n\n<p>I would be open to other means of optimizing this. The current solution seems pretty verbose for just adding a single rectangle each frame.</p>\n"}, {"tags": ["python", "python-3.x", "properties"], "comments": [{"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 3, "creation_date": 1504129012, "post_id": 45969739, "comment_id": 78899403, "body": "Off-topic: Do you realize that you&#39;ve made <code>json</code> a <b>class</b>, not instance, variable? This means that all instances of the class will share it (and I suspect that&#39;s not something you&#39;ll want unless there&#39;s only one)."}, {"owner": {"reputation": 12440, "user_id": 688266, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/7987473923dcc33913003686350b33f6?s=128&d=identicon&r=PG", "display_name": "Kamilski81", "link": "https://stackoverflow.com/users/688266/kamilski81"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 1, "creation_date": 1504188475, "post_id": 45969739, "comment_id": 78926584, "body": "Thank you @martineau I&#39;m new to python world."}], "answers": [{"comments": [{"owner": {"reputation": 5216, "user_id": 4878850, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh3.googleusercontent.com/-Km3lO2wPvWM/AAAAAAAAAAI/AAAAAAAAA5c/fO0oHsS1SXA/photo.jpg?sz=128", "display_name": "Jim Wright", "link": "https://stackoverflow.com/users/4878850/jim-wright"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1504175752, "post_id": 45969878, "comment_id": 78917509, "body": "OP asked how to simplify code, not how to use the property decorator."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 1, "creation_date": 1504189468, "post_id": 45969878, "comment_id": 78927337, "body": "JIm: The OP didn&#39;t specifically say a property <i>decorator</i>, but they did explicitly ask about properties\u2014see the question&#39;s title and the first (and only) line of text in it."}], "tags": [], "owner": {"reputation": 5216, "user_id": 4878850, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh3.googleusercontent.com/-Km3lO2wPvWM/AAAAAAAAAAI/AAAAAAAAA5c/fO0oHsS1SXA/photo.jpg?sz=128", "display_name": "Jim Wright", "link": "https://stackoverflow.com/users/4878850/jim-wright"}, "is_accepted": false, "score": 0, "last_activity_date": 1504128456, "last_edit_date": 1504128456, "creation_date": 1504128101, "answer_id": 45969878, "question_id": 45969739, "link": "https://stackoverflow.com/questions/45969739/how-to-simplify-this-code-by-using-properties/45969878#45969878", "title": "How to simplify this code by using properties?", "body": "<p>You can use <a href=\"https://docs.python.org/2/reference/datamodel.html#object.__getattr__\" rel=\"nofollow noreferrer\"><code>__getattr__</code></a> and <a href=\"https://docs.python.org/2/reference/datamodel.html#object.__setattr__\" rel=\"nofollow noreferrer\"><code>__setattr__</code></a> to treat your dynamic fields as if they are properties of the object itself, rather than of the internal <code>json</code> object.</p>\n\n<pre><code>class PatientRecordJson:\n    def __init__(self):\n        self.fields = ['raw_data', 'data_type', 'type_of_record', 'npi']\n        self.json = {}\n\n    def __getattr__(self, key):\n        if key not in self.fields:\n            raise AttributeError\n        return self.json.get(key, None)\n\n    def __setattr__(self, key, data):\n        if key not in self.fields\n            raise AttributeError\n        self.json[key] = data\n</code></pre>\n\n<p>The sample above will allow you to access the properties like so.</p>\n\n<pre><code>patient = PatientRecordJson()\npatient.data_type = 'something'\npatient.npi = 12345\npatient.raw_data = 'whatever you want here'\nprint(patient.data_type) #  'something'\nprint(patient.doesntexist) #  AttributeError\npatient.notinfields = True #  AttributeError\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5216, "user_id": 4878850, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh3.googleusercontent.com/-Km3lO2wPvWM/AAAAAAAAAAI/AAAAAAAAA5c/fO0oHsS1SXA/photo.jpg?sz=128", "display_name": "Jim Wright", "link": "https://stackoverflow.com/users/4878850/jim-wright"}, "edited": false, "score": 0, "creation_date": 1504128576, "post_id": 45969919, "comment_id": 78899237, "body": "+1 for using the static var for properties. I thought of changing my answer but saw you submitted one soon after."}, {"owner": {"reputation": 5216, "user_id": 4878850, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh3.googleusercontent.com/-Km3lO2wPvWM/AAAAAAAAAAI/AAAAAAAAA5c/fO0oHsS1SXA/photo.jpg?sz=128", "display_name": "Jim Wright", "link": "https://stackoverflow.com/users/4878850/jim-wright"}, "edited": false, "score": 1, "creation_date": 1504128705, "post_id": 45969919, "comment_id": 78899286, "body": "You have broken <code>return super().__getattr__(self)</code>. Should be <code>return super().__getattr__(name)</code>?"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1504131520, "post_id": 45969919, "comment_id": 78900251, "body": "This doesn&#39;t use <code>property</code>... at least if you undertand it to mean the built-in decorator to implement this using the descriptor protocol..."}], "tags": [], "owner": {"reputation": 27630, "user_id": 1550807, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JgCw5.png?s=128&g=1", "display_name": "Danil Speransky", "link": "https://stackoverflow.com/users/1550807/danil-speransky"}, "is_accepted": true, "score": 3, "last_activity_date": 1504129780, "last_edit_date": 1504129780, "creation_date": 1504128261, "answer_id": 45969919, "question_id": 45969739, "link": "https://stackoverflow.com/questions/45969739/how-to-simplify-this-code-by-using-properties/45969919#45969919", "title": "How to simplify this code by using properties?", "body": "<p>You could override <a href=\"https://docs.python.org/3/reference/datamodel.html#object.__getattr__\" rel=\"nofollow noreferrer\"><code>__getattr__</code></a> and <a href=\"https://docs.python.org/3/reference/datamodel.html#object.__setattr__\" rel=\"nofollow noreferrer\"><code>__setattr__</code></a> which are called when you access a property with <code>obj.prop</code>.</p>\n\n<pre><code>class PatientRecordJson:\n    properties = ['raw_data', 'data_type', 'type_of_record', 'npi']\n\n    def __init__(self):\n        self.json = {}\n\n    def __getattr__(self, name):\n        if name in PatientRecordJson.properties:\n            return self.json.get(name)\n\n        return super().__getattr__(name)\n\n    def __setattr__(self, name, value):\n        if name in PatientRecordJson.properties:\n            self.json[name] = value\n\n        return super().__setattr__(name, value)\n</code></pre>\n\n<p>Usage example:</p>\n\n<pre><code>pr = PatientRecordJson()\npr.raw_data              #=&gt; None\npr.raw_data = 'raw data'\npr.raw_data              #=&gt; 'raw data'\npr.json                  #=&gt; {'raw_data': 'raw data'}\npr.z                     #=&gt; AttributeError\npr.z = 2\npr.z                     #=&gt; 2\npr.json                  #=&gt; {'raw_data': 'raw data'}\n</code></pre>\n\n<p>A note: you've defined <code>json</code> on the class, if you want it to be instance variable create it on <code>self</code> in <code>__init__</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "is_accepted": false, "score": 1, "last_activity_date": 1504286467, "last_edit_date": 1504286467, "creation_date": 1504196221, "answer_id": 45985995, "question_id": 45969739, "link": "https://stackoverflow.com/questions/45969739/how-to-simplify-this-code-by-using-properties/45985995#45985995", "title": "How to simplify this code by using properties?", "body": "<p>If you're just learning Python, this may be too advanced\u2014however by using it you can largely automate the process of creating any number of classes like this by using a metaclass (a class whose instances are other classes).</p>\n\n<p>Although doing so requires some non-trivial code, it makes defining the target classes extremely simple. Plus, as a bonus I added optional type-checking.</p>\n\n<pre><code>def typed_property(field_name, expected_type=None):\n    \"\"\" Helper function which creates and returns a property with the given\n        name with optional type-checking. Each property retrieves or stores\n        values from/to an instance-defined \"json\" dictionary attribute.\n    \"\"\"\n    @property\n    def prop(self):\n        return self.json[field_name]\n\n    @prop.setter\n    def prop(self, value):\n        if expected_type and not isinstance(value, expected_type):\n            raise TypeError('Only {} values may be assigned to {}'.format(\n                                expected_type.__name__, field_name))\n        self.json[field_name] = value\n\n    return prop\n\n\nclass PatientRecordMeta(type):\n    \"\"\" Metaclass to define properties based on a class-level defined \"fields\"\n        dictionary.\n    \"\"\"\n    def __new__(metaclass, classname, bases, classdict):\n        cls = super().__new__(metaclass, classname, bases, classdict)\n        fields = classdict.get('fields')\n        if not fields or not isinstance(fields, dict):\n            raise TypeError('Class {} did not define required \"fields\" '\n                            'instance dictionary'.format(classname))\n\n        # Create the properties.\n        for field, expected_type in fields.items():\n            setattr(cls, field, typed_property(field, expected_type))\n\n        return cls\n</code></pre>\n\n<p>The defined metaclass makes it very easy to create a class with exactly the desired properties:</p>\n\n<pre><code>class PatientRecordJson(metaclass=PatientRecordMeta):\n    fields = {'raw_data': str,\n              'data_type': str,\n              'type_of_record': str,\n              'npi': int}  # Note changed to \"int\" to test type-checking,\n\n    def __init__(self):\n        self.json = {}  # define required instance attribute\n\n    # Other methods could be defined here, too, if desired.\n    # ...\n\n\npatient_rec = PatientRecordJson()\n\npatient_rec.raw_data = 'something'\npatient_rec.bogus = 'something else'  # OK, but not saved in \"self.json\" dict.\n\ntry:\n    patient_rec.npi = 'spam'  # -&gt; Should cause a TypeError\nexcept TypeError:\n    pass  # expected TypeError occurred\nelse:\n    print('Error: a TypeError did not occur as expected')\n\npatient_rec.npi = 42  # Integer value is OK.\n\npatient_rec.json['raw_data'] = 'eggs'  # can still do this\nprint(patient_rec.raw_data)  # -&gt; eggs\nprint(patient_rec.npi)  # -&gt; 42\nprint(patient_rec.json)  # -&gt; {'raw_data': 'something', 'npi': 42}\n</code></pre>\n"}], "owner": {"reputation": 12440, "user_id": 688266, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/7987473923dcc33913003686350b33f6?s=128&d=identicon&r=PG", "display_name": "Kamilski81", "link": "https://stackoverflow.com/users/688266/kamilski81"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 1, "accepted_answer_id": 45969919, "answer_count": 3, "score": 1, "last_activity_date": 1504286467, "creation_date": 1504127353, "last_edit_date": 1504188457, "question_id": 45969739, "link": "https://stackoverflow.com/questions/45969739/how-to-simplify-this-code-by-using-properties", "title": "How to simplify this code by using properties?", "body": "<p>I read the documentation and am not sure how to simplify the following code with Python properties:</p>\n\n<pre><code>class PatientRecordJson:\n    def __init__(self):\n        self.json = {}\n\n    def set_raw_data_field(self, string):\n        self.json['raw_data'] = string\n\n    def get_raw_data_field(self):\n        return self.json.get('raw_data', None)\n\n    def set_data_type(self, string):\n        self.json['data_type'] = string\n\n    def get_data_type(self):\n        return self.json.get('data_type', None)\n\n    def set_type_of_record(self, string):\n        self.json['type_of_record'] = string\n\n    def get_type_of_record(self):\n        return self.json.get('type_of_record', None)\n\n    def set_npi(self, string):\n        self.json['npi'] = string\n\n    def get_npi(self):\n        return self.json.get('npi', None)\n</code></pre>\n"}, {"tags": ["python", "pandas", "csv", "numpy"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 1, "creation_date": 1504127562, "post_id": 45969731, "comment_id": 78898800, "body": "Yes? You&#39;re skipping a column."}, {"owner": {"reputation": 4998, "user_id": 2180959, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/MTxPr.jpg?s=128&g=1", "display_name": "Heisenberg", "link": "https://stackoverflow.com/users/2180959/heisenberg"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1504158556, "post_id": 45969731, "comment_id": 78906834, "body": "I need to skip the first column because it has image names. I&#39;m doing that in both code snippets. The shape of data and data1 is same so I don&#39;t think that might be a problem."}, {"owner": {"reputation": 2672, "user_id": 2756793, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1cbe8b8b0848c306245687e301f8c95d?s=128&d=identicon&r=PG&f=1", "display_name": "Khris", "link": "https://stackoverflow.com/users/2756793/khris"}, "edited": false, "score": 0, "creation_date": 1504165725, "post_id": 45969731, "comment_id": 78910584, "body": "Have you checked if the arrays are really identical?"}], "owner": {"reputation": 4998, "user_id": 2180959, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/MTxPr.jpg?s=128&g=1", "display_name": "Heisenberg", "link": "https://stackoverflow.com/users/2180959/heisenberg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1504129463, "creation_date": 1504127325, "last_edit_date": 1504129463, "question_id": 45969731, "link": "https://stackoverflow.com/questions/45969731/numpy-arrays-created-from-pandas-dataframe-show-strange-behaviour", "title": "Numpy arrays created from pandas dataframe show strange behaviour", "body": "<p>I've a csv file which is having long image vectors. The format of the file is:</p>\n\n<pre><code>imgName,-0.947363,0.83463728,0.635252,0.787878.....\n</code></pre>\n\n<p>I need to drop my first column and use rest of the data. When I create my numpy array using numpy library like:</p>\n\n<pre><code>from numpy import genfromtxt\nmy_data = genfromtxt('fewvec.csv', delimiter=',')\ndata = np.delete(my_data, 0, 1)\ndata = data.astype(np.float64)\n</code></pre>\n\n<p>everything works well. When I create my nparray using pandas</p>\n\n<pre><code>df = pd.read_csv(\"fewvec.csv\", header=None)\ndata1 = df.iloc[:, 1:].values\n</code></pre>\n\n<p>the created data1 array looks exactly same to me as data array created above. But when I pass this to a library(nmslib) it generates wrong answer using data1 array. Is there any fundamental difference between these two arrays?</p>\n"}, {"tags": ["python", "python-2.7", "maze"], "comments": [{"owner": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "edited": false, "score": 0, "creation_date": 1504127536, "post_id": 45969687, "comment_id": 78898788, "body": "How is this a Lee Algorithm approach?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4548084"}, "reply_to_user": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "edited": false, "score": 0, "creation_date": 1504127818, "post_id": 45969687, "comment_id": 78898932, "body": "@TemporalWolf the code attempts to draw routes outwards from one point, similarly to a flood fill. its influenced by lee algorithm but it doesnt really represent it. ill correct question now"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4548084"}, "edited": false, "score": 0, "creation_date": 1504196822, "post_id": 45970120, "comment_id": 78932265, "body": "made some modifications to suit the game better and it works perfectly, thanks a tonne :)"}, {"owner": {"reputation": 75, "user_id": 10493940, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-29KgipIejeQ/AAAAAAAAAAI/AAAAAAAAGmo/yAED2ToqPIU/photo.jpg?sz=128", "display_name": "Jelmer Mulder", "link": "https://stackoverflow.com/users/10493940/jelmer-mulder"}, "edited": false, "score": 0, "creation_date": 1589533199, "post_id": 45970120, "comment_id": 109337696, "body": "Do you know anything about performance regarding Lee&#39;s algorithm? If I use a field of 11 by 11, it is done is a few seconds. Increasing the field to 12 by 12, it takes forever (more than minutes and I have never seen it end)."}, {"owner": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "reply_to_user": {"reputation": 75, "user_id": 10493940, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-29KgipIejeQ/AAAAAAAAAAI/AAAAAAAAGmo/yAED2ToqPIU/photo.jpg?sz=128", "display_name": "Jelmer Mulder", "link": "https://stackoverflow.com/users/10493940/jelmer-mulder"}, "edited": false, "score": 0, "creation_date": 1592600732, "post_id": 45970120, "comment_id": 110494134, "body": "@JelmerMulder Sounds like you have a bug in your program. Going from 11 to 12 is only a 20% increase in nodes, and it scales linearly with the number of nodes, as every node must be evaluated only once."}], "tags": [], "owner": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "is_accepted": true, "score": 1, "last_activity_date": 1504132396, "last_edit_date": 1504132396, "creation_date": 1504129308, "answer_id": 45970120, "question_id": 45969687, "link": "https://stackoverflow.com/questions/45969687/python-maze-route-finding/45970120#45970120", "title": "Python Maze Route-finding", "body": "<p>As far as I can tell, you never check whether you've already visited a square. Additionally, you're using <code>x</code> and <code>y</code> for values which are not <code>x,y</code> coords and checking for one end of the index and catching exceptions for the other. This very over complicated. My advice would be to implement the actual algorithm:</p>\n\n<pre><code>def gen_lee(start, size, travelable):\n    neighbor_offsets = [(0, 1), (1, 0), (0, -1), (-1, 0)]\n    score = 0\n    path_map = [[None for _ in xrange(size)] for _ in xrange(size)]\n    node_list = [start]\n    path_map[start[0]][start[1]] = 0\n    for node in node_list:\n        score = path_map[node[0]][node[1]]\n        for neighbor_offset in neighbor_offsets:\n            neighbor_x = node[0] + neighbor_offset[0]\n            neighbor_y = node[1] + neighbor_offset[1]\n            if neighbor_x &lt; 0 or \\\n               neighbor_y &lt; 0 or \\\n               neighbor_x &gt;= size or \\\n               neighbor_y &gt;= size:\n                continue  # Skip out of map neighbors\n            if not travelable[neighbor_x][neighbor_y]:\n                continue  # Skip untravelable neighbors\n            if path_map[neighbor_x][neighbor_y] is None:\n                node_list.append((neighbor_x, neighbor_y))\n                path_map[neighbor_x][neighbor_y] = score + 1\n    return path_map\n</code></pre>\n\n<p>With this, we can generate route grids:</p>\n\n<pre><code>path_map = gen_lee((1, 1), 5, [[1]* 5] * 5)\n</code></pre>\n\n<p>With no obstructions, we get:</p>\n\n<pre><code>for row in path_map:\n    print row\n\n[2, 1, 2, 3, 4]\n[1, 0, 1, 2, 3]\n[2, 1, 2, 3, 4]\n[3, 2, 3, 4, 5]\n[4, 3, 4, 5, 6]\n</code></pre>\n\n<p>With obstructions:</p>\n\n<pre><code>travelable = [[1, 1, 1, 0, 1], \n              [1, 1, 1, 0, 1], \n              [1, 1, 1, 0, 1], \n              [1, 1, 1, 0, 1], \n              [1, 1, 1, 1, 1]]\n\npath_map = gen_lee((1, 1), 5, travelable)\n</code></pre>\n\n<p>we get:</p>\n\n<pre><code>[2, 1, 2, None, 10]\n[1, 0, 1, None, 9]\n[2, 1, 2, None, 8]\n[3, 2, 3, None, 7]\n[4, 3, 4,    5, 6]\n</code></pre>\n\n<p>Then, you start the the goal and work your way back, finding the neighbor with a score 1 lower than your current. That will generate an optimum path. (Note, there may be more than one which satisfies this: you can pick any of them and find equivalent paths)</p>\n\n<p>If, at any point during the finding the path step, you cannot find a neighbor that is one lower (and you haven't reached the goal) then the path is blocked.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4548084"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1044, "favorite_count": 0, "accepted_answer_id": 45970120, "answer_count": 1, "score": 0, "last_activity_date": 1504132396, "creation_date": 1504127115, "last_edit_date": 1504128755, "question_id": 45969687, "link": "https://stackoverflow.com/questions/45969687/python-maze-route-finding", "title": "Python Maze Route-finding", "body": "<p>I'm working on a Tower Defense game in Python, where the user's towers can modify the path that the enemies must take. To calculate the path, I thought an implementation of the Lee Algorithm would probably be best and easiest, particularly if the grids get large. I tried to loosely base my algorithm on that.</p>\n\n<p>My code, however, doesn't work. And I can't see why.</p>\n\n<pre><code>def getRoute(self):\n  self.routes = [[(0,0)]]\n\n  def _getRoutes():\n    new_routes = []\n    for route in self.routes:\n      for i in [(1,0),(-1,0),(0,1),(0,-1)]:\n        new_loc = [x + y for x,y in zip(route[-1],i)]\n        for index in new_loc:\n          if index &lt; 0:\n            print('&lt; 0')\n            continue ## if the index causes a skip across the side of the array, ignore\n        try:\n          if self.level.map[new_loc[0]][new_loc[1]].travellable: ## if the tile is able to be travelled on by enemies\n            route.append(new_loc) ## add the tile to the 'r' array\n            new_routes.append(route) ## add the new route to the new_routes array\n        except IndexError: ## if the tile is off the map, ignore\n          print('index error')\n    self.routes = new_routes\n\n  def _checkRoutesValidity():\n    for route in self.routes:\n      if self.level.map[route[-1][0]][route[-1][1]].access == 5:\n        return route\n        break\n    else:\n      return None\n\n  while not _checkRoutesValidity():\n    _getRoutes()\n\n  self.route = _checkRoutesValidity()\n  for i,j in self.route:\n    self.level.map[i][j].overlay_col = [0,1,0,1]\n</code></pre>\n\n<p>Routes is the variable that should contain all possible routes the enemy can take, and eventually the correct route. Currently, the algorithm should shade the route in green that is fastest. Level is a level object, and level.map is a 2D array of Grid objects, each being a single cell. If the cell.access is 5, it means it is an exit point for the enemy.</p>\n\n<p>All that actually happens, is it creates an incredibly long list of tuples reading (0,1) and (1,0). No negative numbers are ever generated, nothing other than a 1 or a 0.</p>\n\n<p>Can someone please point me in the right direction either to create a proper Lee Algorithm or to fix my current code?</p>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 762, "user_id": 7583514, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/LHYzB.png?s=128&g=1", "display_name": "Anthony", "link": "https://stackoverflow.com/users/7583514/anthony"}, "edited": false, "score": 0, "creation_date": 1504127184, "post_id": 45969679, "comment_id": 78898651, "body": "Do I need to create a method in my RateModel or should I create a function in my views.py?"}], "answers": [{"comments": [{"owner": {"reputation": 762, "user_id": 7583514, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/LHYzB.png?s=128&g=1", "display_name": "Anthony", "link": "https://stackoverflow.com/users/7583514/anthony"}, "edited": false, "score": 0, "creation_date": 1504130233, "post_id": 45970041, "comment_id": 78899848, "body": "Thank you so much. This worked. I&#39;ve spent a couple of days to figure this out lol."}], "tags": [], "owner": {"reputation": 250720, "user_id": 113962, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b80ae1d65878cf68a4b1a00848467527?s=128&d=identicon&r=PG", "display_name": "Alasdair", "link": "https://stackoverflow.com/users/113962/alasdair"}, "is_accepted": true, "score": 3, "last_activity_date": 1504130621, "last_edit_date": 1504130621, "creation_date": 1504128872, "answer_id": 45970041, "question_id": 45969679, "link": "https://stackoverflow.com/questions/45969679/get-average-of-user-input-ratings-for-different-model-instances-django/45970041#45970041", "title": "Get average of user input ratings for different model instances (Django)", "body": "<p>Instead of using aggregate, you should annotate your beers queryset with the averages.</p>\n\n<pre><code>from django.db.models import Avg\n\nbeers = BeerModel.objects.order_by('name').annotate(\n    avg_aroma=Avg('ratemodel__aroma'),\n    avg_appearance=Avg('ratemodel__appearance'),\n    avg_taste=Avg('ratemodel__taste'), \n)\n</code></pre>\n\n<p>Then, when you loop through the beers queryset you can access the annotated fields. </p>\n\n<pre><code>{% for beer in beers %}\n{{ beer.avg_aroma }}\n{{ beer.avg_appearance} } \n{{ beer.avg_taste }}\n{% endfor %} \n</code></pre>\n\n<p>See the docs for <a href=\"https://docs.djangoproject.com/en/1.11/topics/db/aggregation/#joins-and-aggregates\" rel=\"nofollow noreferrer\">joins and aggregates</a> for more examples.</p>\n"}], "owner": {"reputation": 762, "user_id": 7583514, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/LHYzB.png?s=128&g=1", "display_name": "Anthony", "link": "https://stackoverflow.com/users/7583514/anthony"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1611, "favorite_count": 3, "accepted_answer_id": 45970041, "answer_count": 1, "score": 2, "last_activity_date": 1504130621, "creation_date": 1504127092, "question_id": 45969679, "link": "https://stackoverflow.com/questions/45969679/get-average-of-user-input-ratings-for-different-model-instances-django", "title": "Get average of user input ratings for different model instances (Django)", "body": "<p>Ok, so here is the deal. I'm working on this web-app that lets you create users, beers, and reviews for beers.</p>\n\n<p>models.py:</p>\n\n<pre><code>from django.db import models\nfrom django.conf import settings\n\nclass BeerModel(models.Model):\n\n    user = models.ForeignKey(User, default=1)\n    name = models.CharField(max_length=254, default=\"\")\n    style = models.CharField(max_length=254, default=\"\")\n    ibu = models.IntegerField(default=\"\")\n    calories = models.IntegerField(default=\"\")\n    abv = models.IntegerField(default=\"\")\n    location = models.CharField(max_length=254, default=\"\")\n\n    class Meta:\n        verbose_name_plural = 'Beers'\n\n    def __str__(self):\n        return self.name\n\n    def avg(self):\n        return\n\n\nclass RateModel(models.Model):\n\n    FIVE_REVIEWS = (\n        ('5', '5'),\n        ('4', '4'),\n        ('3', '3'),\n        ('2', '2'),\n        ('1', '1'),\n    )\n\n    TEN_REVIEWS= (\n        ('10', '10'),\n        ('9', '9'),\n        ('8', '8'),\n        ('7', '7'),\n        ('6', '6'),\n        ('5', '5'),\n        ('4', '4'),\n        ('3', '3'),\n        ('2', '2'),\n        ('1', '1'),\n    )\n\n    user = models.ForeignKey(User, default=1)\n    beer = models.ForeignKey(BeerModel)\n    aroma = models.PositiveIntegerField(max_length=2, choices=FIVE_REVIEWS, default=\"5\")\n    appearance = models.PositiveIntegerField(max_length=2, choices=FIVE_REVIEWS, default=\"5\")\n    taste = models.PositiveIntegerField(max_length=2, choices= TEN_REVIEWS, default= \"10\")\n\n    class Meta:\n        verbose_name_plural = 'Ratings'\n\n    def __str__(self):\n        return str(self.beer)\n</code></pre>\n\n<p>As you can tell, you can create a review for different beers using different users.</p>\n\n<p>My goal is to have django output on the HTML, an \"Average\" value for \"Aroma, appearance, and taste\" for each beer.</p>\n\n<p>This is what I have in my views.py:</p>\n\n<pre><code>@login_required\ndef home(request):\n    beers = BeerModel.objects.order_by('name')\n    rates = RateModel.objects.order_by('user')\n    avg = RateModel.objects.aggregate(aroma = Avg('aroma'), appearance = Avg('appearance'), taste = Avg('taste'))\n    dict = {'records': beers, 'rates': rates, 'avg': avg}\n\n    return render(request, 'beer_tracker/home.html', context=dict)\n</code></pre>\n\n<p>This is what I have on my home.html:</p>\n\n<pre><code>&lt;h2&gt;Overall Rating&lt;/h2&gt;\n    {% for beers in records %}\n        &lt;div class=\"table\"&gt;\n            &lt;h4&gt;&lt;b&gt;Beer's Overall Ratings: &lt;/b&gt;{{ beers.name}}&lt;/h4&gt;\n            &lt;ul&gt;\n                &lt;li&gt;&lt;b&gt;Aroma: &lt;/b&gt;{{ avg.aroma }}&lt;/li&gt;\n                &lt;li&gt;&lt;b&gt;Appearance: &lt;/b&gt;{{ avg.appearance }}&lt;/li&gt;\n                &lt;li&gt;&lt;b&gt;Taste: &lt;/b&gt;{{ avg.taste }}&lt;/li&gt;\n            &lt;/ul&gt;\n        &lt;/div&gt;\n     {% endfor %}\n</code></pre>\n\n<p>Unfortunately, as you can tell, I get the average for all beers. I need the average for each specific beer.</p>\n\n<p>So if I have a beer, let's say Blue moon, and I have 2 users give 2 reviews:</p>\n\n<p>User1\nAroma: 3, \nAppearance: 3, \nTaste: 8, </p>\n\n<p>User2\nAroma: 5, \nAppearance: 5, \nTaste: 10, </p>\n\n<p>I would like to get for Blue Moon:</p>\n\n<p>Aroma: 4, \nAppearance: 4, \nTaste: 9, </p>\n\n<p>But still keeping the reviews values for other beers independently.</p>\n\n<p>Thank you for your time.</p>\n\n<p>Anthony</p>\n"}, {"tags": ["python", "web-scraping", "bs4", "attrs.xml"], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 8529285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bad29be8e0e278d7d5f45f3f37d70a57?s=128&d=identicon&r=PG&f=1", "display_name": "PerfectionQuest", "link": "https://stackoverflow.com/users/8529285/perfectionquest"}, "edited": false, "score": 0, "creation_date": 1504197885, "post_id": 45970389, "comment_id": 78932839, "body": "Thank you very much! Not exactly, what I&#39;ve looked for, but gives huge push into correct direction!"}, {"owner": {"reputation": 19199, "user_id": 131187, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/27eJi.jpg?s=128&g=1", "display_name": "Bill Bell", "link": "https://stackoverflow.com/users/131187/bill-bell"}, "reply_to_user": {"reputation": 5, "user_id": 8529285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bad29be8e0e278d7d5f45f3f37d70a57?s=128&d=identicon&r=PG&f=1", "display_name": "PerfectionQuest", "link": "https://stackoverflow.com/users/8529285/perfectionquest"}, "edited": false, "score": 0, "creation_date": 1504200052, "post_id": 45970389, "comment_id": 78933959, "body": "My pleasure. I was puzzled by  how you would get <code>[70,False or NaN,99]</code> from that HTML."}, {"owner": {"reputation": 5, "user_id": 8529285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bad29be8e0e278d7d5f45f3f37d70a57?s=128&d=identicon&r=PG&f=1", "display_name": "PerfectionQuest", "link": "https://stackoverflow.com/users/8529285/perfectionquest"}, "edited": false, "score": 0, "creation_date": 1504203421, "post_id": 45970389, "comment_id": 78935574, "body": "It is about separating the &#39;left&#39; value for each &#39;tr&#39; and look for max in it, so if in the first one has two &#39;lefts&#39; it should bring higher. Second has no valid left, so False (or NaN if result must be integer), third would be 99. This is the issue I try to solve yet. Max value is probably easy for each element of array, but diversing them with &#39;tr&#39; is harder."}, {"owner": {"reputation": 5, "user_id": 8529285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bad29be8e0e278d7d5f45f3f37d70a57?s=128&d=identicon&r=PG&f=1", "display_name": "PerfectionQuest", "link": "https://stackoverflow.com/users/8529285/perfectionquest"}, "edited": false, "score": 0, "creation_date": 1504203492, "post_id": 45970389, "comment_id": 78935610, "body": "Some kind of .parent comparator maybe would be a solution."}, {"owner": {"reputation": 5, "user_id": 8529285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bad29be8e0e278d7d5f45f3f37d70a57?s=128&d=identicon&r=PG&f=1", "display_name": "PerfectionQuest", "link": "https://stackoverflow.com/users/8529285/perfectionquest"}, "edited": false, "score": 0, "creation_date": 1504212687, "post_id": 45970389, "comment_id": 78939916, "body": "Marvelous! It was the part I was not able to handle ;) Thank you again!"}, {"owner": {"reputation": 5, "user_id": 8529285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bad29be8e0e278d7d5f45f3f37d70a57?s=128&d=identicon&r=PG&f=1", "display_name": "PerfectionQuest", "link": "https://stackoverflow.com/users/8529285/perfectionquest"}, "edited": false, "score": 0, "creation_date": 1504279414, "post_id": 45970389, "comment_id": 78967687, "body": "Oh actually I just tried to upvote it, however I am too newbie to rate others&#39; answers. Already done I guess."}, {"owner": {"reputation": 19199, "user_id": 131187, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/27eJi.jpg?s=128&g=1", "display_name": "Bill Bell", "link": "https://stackoverflow.com/users/131187/bill-bell"}, "reply_to_user": {"reputation": 5, "user_id": 8529285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bad29be8e0e278d7d5f45f3f37d70a57?s=128&d=identicon&r=PG&f=1", "display_name": "PerfectionQuest", "link": "https://stackoverflow.com/users/8529285/perfectionquest"}, "edited": false, "score": 0, "creation_date": 1504280132, "post_id": 45970389, "comment_id": 78968136, "body": "No worries. I do appreciate having my answers accepted."}], "tags": [], "owner": {"reputation": 19199, "user_id": 131187, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/27eJi.jpg?s=128&g=1", "display_name": "Bill Bell", "link": "https://stackoverflow.com/users/131187/bill-bell"}, "is_accepted": true, "score": 0, "last_activity_date": 1504206617, "last_edit_date": 1504206617, "creation_date": 1504130795, "answer_id": 45970389, "question_id": 45969592, "link": "https://stackoverflow.com/questions/45969592/part-of-value-inside-of-style-attrs-to-become-variable-in-python-bs4/45970389#45970389", "title": "Part of value inside of &#39;style&#39; attrs to become variable in python bs4", "body": "<pre><code>&gt;&gt;&gt; import bs4\n&gt;&gt;&gt; HTML = open('temp.htm').read()\n&gt;&gt;&gt; soup = bs4.BeautifulSoup(HTML, 'lxml')\n</code></pre>\n\n<p>First, select all of the element whose <code>class</code> contains <code>foo</code> (whether or not it contains something else as well).</p>\n\n<pre><code>&gt;&gt;&gt; elements = soup.select('.foo')\n</code></pre>\n\n<p>In each case <code>element['class']</code> will be a list of the items in <code>class</code> for the element, ie, either just <code>foo</code> or <code>foo</code> and <code>Kung</code> in the case of this HTML. Thus a test for the length of <code>element['class']</code> is a test for the presence of <code>foo</code> alone.</p>\n\n<p><code>element['style']</code> gets the contents of <code>style</code> for the element. Use a regex for the part of it we want, and add it to the list called <code>lefts</code>.</p>\n\n<pre><code>&gt;&gt;&gt; lefts = [ ]\n&gt;&gt;&gt; for element in elements:\n...     if len(element['class'])==1:\n...         lefts.append(int(bs4.re.search(r'left:([0-9]+)', element['style']).groups(0)[0]))\n... \n&gt;&gt;&gt; \n&gt;&gt;&gt; lefts\n[70, 50, 99]\n</code></pre>\n\n<p><strong>Edit:</strong></p>\n\n<p>Find the <code>tr</code> elements, then look for the <code>elements</code> with class <code>foo</code>. As before, include consideration of only those elements with just class <code>foo</code> not both <code>foo</code> and <code>Kung</code>. Gather <code>left</code> style elements for these elements and then find the maximum values of them.</p>\n\n<pre><code>&gt;&gt;&gt; HTML = open('temp.htm').read()\n&gt;&gt;&gt; import bs4\n&gt;&gt;&gt; soup = bs4.BeautifulSoup(HTML, 'lxml')\n&gt;&gt;&gt; trs = soup.findAll('tr')\n&gt;&gt;&gt; tr_max = []\n&gt;&gt;&gt; for tr in trs:\n...     elements = tr.select('.foo')\n...     lefts = [ ]\n...     for element in elements:\n...         if len(element['class'])==1:\n...             lefts.append(int(bs4.re.search(r'left:([0-9]+)', element['style']).groups(0)[0]))\n...     if lefts:\n...         tr_max.append(max(lefts))\n...     else:\n...         tr_max.append(None)\n... \n&gt;&gt;&gt; tr_max\n[70, None, 99]\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 8529285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bad29be8e0e278d7d5f45f3f37d70a57?s=128&d=identicon&r=PG&f=1", "display_name": "PerfectionQuest", "link": "https://stackoverflow.com/users/8529285/perfectionquest"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "accepted_answer_id": 45970389, "answer_count": 1, "score": 0, "last_activity_date": 1504206617, "creation_date": 1504126693, "question_id": 45969592, "link": "https://stackoverflow.com/questions/45969592/part-of-value-inside-of-style-attrs-to-become-variable-in-python-bs4", "title": "Part of value inside of &#39;style&#39; attrs to become variable in python bs4", "body": "<p>Let's assume we have code:</p>\n\n<pre><code> &lt;tr class=\" \" somethingc1=\"\" somethingc2=\"\" somethingc3=\"\" data-something=\"1\" something=\"1something4\" something_id=\"6something7\"&gt;\n &lt;td class=\"text-center td_something\"&gt;\n &lt;div&gt;\n &lt;span doo=\"true\" class=\"foo\" style=\"left:70%;z-index:99;\"&gt;\n &lt;span doo=\"true\" class=\"foo\" style=\"left:50%;z-index:90;\"&gt;\n &lt;span doo=\"true\" class=\"Kung foo\" style=\"left:90%;z-index:95;\"&gt;\n &lt;/div&gt;\n &lt;/td&gt;\n &lt;/tr&gt;\n &lt;tr class=\" \" somethingc1=\"\" somethingc2=\"\" somethingc3=\"\" data-something=\"1\" something=\"1something4\" something_id=\"6something7\"&gt;\n &lt;td class=\"text-center td_something\"&gt;\n &lt;div&gt;\n &lt;span doo=\"true\" class=\"Kung foo\" style=\"left:35%;z-index:95;\"&gt;\n &lt;/div&gt;\n &lt;/td&gt;\n &lt;/tr&gt;\n &lt;tr class=\" \" somethingc1=\"\" somethingc2=\"\" somethingc3=\"\" data-something=\"1\" something=\"1something4\" something_id=\"6something7\"&gt;\n &lt;td class=\"text-center td_something\"&gt;\n &lt;div&gt;\n &lt;span doo=\"true\" class=\"foo\" style=\"left:99%;z-index:100;\"&gt;\n &lt;/div&gt;\n &lt;/td&gt;\n &lt;/tr&gt;\n</code></pre>\n\n<p>How may I make a list using Bs4 in Python to find the highest value of 'left' in 'style' attrs keeping in mind that I do not want to take into consideration spans with class_ \"Kung\"</p>\n\n<p>Desired result would be:</p>\n\n<pre><code>[70,False or NaN,99]\n</code></pre>\n\n<p>I've got it I should start with something like:</p>\n\n<pre><code>trs = soup.find_all('tr', attrs={\"data-something\": \"1\"})\nList = list()\nfind_all('span',{'style': re.compile(r'^left:.')})\n</code></pre>\n"}, {"tags": ["python", "arrays", "performance", "numpy", "random"], "comments": [{"owner": {"reputation": 671, "user_id": 8022336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VsZUw.png?s=128&g=1", "display_name": "pointerless", "link": "https://stackoverflow.com/users/8022336/pointerless"}, "edited": false, "score": 0, "creation_date": 1504126973, "post_id": 45969563, "comment_id": 78898557, "body": "split 4 segments of the job into 4 threads?"}, {"owner": {"reputation": 32256, "user_id": 1391441, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/FP3Un.jpg?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/1391441/gabriel"}, "reply_to_user": {"reputation": 671, "user_id": 8022336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VsZUw.png?s=128&g=1", "display_name": "pointerless", "link": "https://stackoverflow.com/users/8022336/pointerless"}, "edited": false, "score": 0, "creation_date": 1504127033, "post_id": 45969563, "comment_id": 78898588, "body": "I need an improvement at the code level, not parallel processing."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1504137422, "post_id": 45969563, "comment_id": 78901696, "body": "The fact that this function is called millions of times is already a warning sign; you may want to change that."}, {"owner": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 0, "creation_date": 1504137485, "post_id": 45969563, "comment_id": 78901703, "body": "Hard to see the exact task here, but of course you might pre-allocate d_arr as your size is a-priori known and extending is costly! Frequently changing sizes of array-based data-structures is always slow!"}, {"owner": {"reputation": 32256, "user_id": 1391441, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/FP3Un.jpg?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/1391441/gabriel"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1504137600, "post_id": 45969563, "comment_id": 78901721, "body": "@user2357112 I can not.  It is a tiny part of much larger code, but an important one. It is related to a theoretical model that generates synthetic solutions, later on compared with an observation via a likelihood function which is minimized with a genetic algorithm."}], "answers": [{"comments": [{"owner": {"reputation": 32256, "user_id": 1391441, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/FP3Un.jpg?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/1391441/gabriel"}, "edited": false, "score": 1, "creation_date": 1504474761, "post_id": 45971365, "comment_id": 79016053, "body": "I thinks there&#39;s an error with the scaling. Shouldn&#39;t it be <code>(scale - base)</code>?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 32256, "user_id": 1391441, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/FP3Un.jpg?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/1391441/gabriel"}, "edited": false, "score": 1, "creation_date": 1504478716, "post_id": 45971365, "comment_id": 79016867, "body": "@Gabriel: Whoops, fixed. (You could save some time by subtracting before repeating.)"}], "tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": true, "score": 4, "last_activity_date": 1504478663, "last_edit_date": 1504478663, "creation_date": 1504137669, "answer_id": 45971365, "question_id": 45969563, "link": "https://stackoverflow.com/questions/45969563/fast-filling-of-array-with-numpy-random-uniform/45971365#45971365", "title": "Fast filling of array with numpy.random.uniform", "body": "<p>Instead of using <code>np.random.uniform</code> in a loop, generate enough random numbers in one <code>np.random.random</code> call and then scale them appropriately:</p>\n\n<pre><code># Could be lows, highs, counts = np.array(d).T, except for the mixed dtypes.\n# Taking input as 3 arrays of lows, highs, counts would let you skip this step.\nlows, highs, counts = zip(*d) if len(d) else ((), (), ())\n\nbase = np.repeat(lows, counts)\nscale = np.repeat(highs, counts) - base\n\nrandom_nums = np.random.random(np.sum(counts)) * scale + base\n</code></pre>\n\n<p>(Aside from calling <code>np.random.uniform</code> in a loop, one of the things slowing down the original is <code>extend</code>ing a list with a NumPy array. That generates wrapper objects for every element of the array, a slow and needless process.)</p>\n"}], "owner": {"reputation": 32256, "user_id": 1391441, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/FP3Un.jpg?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/1391441/gabriel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 428, "favorite_count": 0, "accepted_answer_id": 45971365, "answer_count": 1, "score": 0, "last_activity_date": 1504478663, "creation_date": 1504126540, "last_edit_date": 1504137190, "question_id": 45969563, "link": "https://stackoverflow.com/questions/45969563/fast-filling-of-array-with-numpy-random-uniform", "title": "Fast filling of array with numpy.random.uniform", "body": "<p>I need to improve as much as possible the performance of the function defined below. It is called millions of times, and the <code>for</code> loop is currently the bottleneck of my code.</p>\n\n<pre><code>def func(d):\n    d_arr = []\n    for rN in d:\n        d_arr.extend(np.random.uniform(rN[0], rN[1], rN[2]))\n\n    return np.asarray(d_arr)\n\nd = [[0.01, 0.11, 3413], [0.11, 0.21000000000000002, 1305], [0.21000000000000002, 0.31000000000000005, 675], [0.31000000000000005, 0.41000000000000003, 439], [0.41000000000000003, 0.51000000000000012, 318], [0.51000000000000012, 0.6100000000000001, 221], [0.6100000000000001, 0.71000000000000008, 151], [0.71000000000000008, 0.81000000000000016, 109], [0.81000000000000016, 0.91000000000000014, 82], [0.91000000000000014, 1.0100000000000002, 64], [1.0100000000000002, 1.1100000000000003, 51], [1.1100000000000003, 1.2100000000000004, 41], [1.2100000000000004, 1.3100000000000003, 34], [1.3100000000000003, 1.4100000000000004, 28], [1.4100000000000004, 1.5100000000000005, 24], [1.5100000000000005, 1.6100000000000003, 21], [1.6100000000000003, 1.7100000000000004, 18], [1.7100000000000004, 1.8100000000000005, 16], [1.8100000000000005, 1.9100000000000004, 14], [1.9100000000000004, 2.0100000000000002, 12], [2.0100000000000002, 2.1100000000000003, 11], [2.1100000000000003, 2.2100000000000004, 10], [2.2100000000000004, 2.3100000000000005, 9], [2.3100000000000005, 2.4100000000000001, 8], [2.4100000000000001, 2.5100000000000002, 7], [2.5100000000000002, 2.6100000000000003, 7], [2.6100000000000003, 2.7100000000000004, 6], [2.7100000000000004, 2.8100000000000005, 6], [2.8100000000000005, 2.9100000000000006, 5], [2.9100000000000006, 3.0100000000000002, 5], [3.0100000000000002, 3.1100000000000003, 4], [3.1100000000000003, 3.2100000000000004, 4], [3.2100000000000004, 3.3100000000000005, 4], [3.3100000000000005, 3.4100000000000006, 4], [3.4100000000000006, 3.5100000000000007, 3], [3.5100000000000007, 3.6100000000000008, 3], [3.6100000000000008, 3.7100000000000004, 3], [3.7100000000000004, 3.8100000000000005, 3], [3.8100000000000005, 3.9100000000000006, 3], [3.9100000000000006, 4.0100000000000007, 2], [4.0100000000000007, 4.1100000000000012, 2], [4.1100000000000012, 4.2100000000000009, 2], [4.2100000000000009, 4.3100000000000014, 2], [4.3100000000000014, 4.410000000000001, 2], [4.410000000000001, 4.5100000000000016, 2], [4.5100000000000016, 4.6100000000000012, 2], [4.6100000000000012, 4.7100000000000009, 2], [4.7100000000000009, 4.8100000000000014, 2], [4.8100000000000014, 4.910000000000001, 2], [4.910000000000001, 5.0100000000000016, 1], [5.0100000000000016, 5.1100000000000012, 1], [5.1100000000000012, 5.2100000000000017, 1], [5.2100000000000017, 5.3100000000000014, 1], [5.3100000000000014, 5.410000000000001, 1], [5.410000000000001, 5.5100000000000016, 1], [5.5100000000000016, 5.6100000000000012, 1], [5.6100000000000012, 5.7100000000000017, 1], [5.7100000000000017, 5.8100000000000014, 1], [5.8100000000000014, 6.0100000000000016, 2], [6.0100000000000016, 6.2100000000000017, 2], [6.2100000000000017, 6.4100000000000019, 2], [6.4100000000000019, 6.6100000000000012, 2], [6.6100000000000012, 6.8100000000000014, 1], [6.8100000000000014, 7.0100000000000016, 1], [7.0100000000000016, 7.2100000000000017, 1], [7.2100000000000017, 7.4100000000000019, 1], [7.4100000000000019, 7.6100000000000021, 1], [7.6100000000000021, 7.8100000000000014, 1], [7.8100000000000014, 8.1100000000000012, 1], [8.1100000000000012, 8.4100000000000019, 1], [8.4100000000000019, 8.7100000000000009, 1], [8.7100000000000009, 9.0100000000000016, 1], [9.0100000000000016, 9.3100000000000005, 1], [9.3100000000000005, 9.7100000000000009, 1], [9.7100000000000009, 10.110000000000001, 1], [10.110000000000001, 10.510000000000002, 1], [10.510000000000002, 11.010000000000002, 1], [11.010000000000002, 11.510000000000002, 1], [11.510000000000002, 12.110000000000001, 1], [12.110000000000001, 12.710000000000003, 1], [12.710000000000003, 13.410000000000002, 1], [13.410000000000002, 14.210000000000003, 1], [14.210000000000003, 15.110000000000003, 1], [15.110000000000003, 16.110000000000003, 1], [16.110000000000003, 17.310000000000002, 1], [17.310000000000002, 18.710000000000004, 1], [18.710000000000004, 20.410000000000004, 1], [20.410000000000004, 22.410000000000004, 1], [22.410000000000004, 24.910000000000004, 1], [24.910000000000004, 28.210000000000004, 1], [28.210000000000004, 32.710000000000008, 1], [32.710000000000008, 39.210000000000008, 1], [39.210000000000008, 49.710000000000008, 1], [49.710000000000008, 70.210000000000008, 1], [70.210000000000008, 133.41000000000005, 1]]\n\nfor _ in range(10000):\n    d_arr = func(d)\n</code></pre>\n\n<p>I've tried with:</p>\n\n<pre><code>d = np.array(d).T\nd_arr = np.random.uniform(d[0], d[1], d[2])\n</code></pre>\n\n<p>but it fails with:</p>\n\n<pre><code>ValueError: sequence too large; cannot be greater than 32\n</code></pre>\n"}, {"tags": ["query-performance", "postgresql-performance", "python", "sqlalchemy"], "comments": [{"owner": {"reputation": 205, "user_id": 3093192, "user_type": "registered", "profile_image": "https://graph.facebook.com/1428668068/picture?type=large", "display_name": "RDFozz", "link": "https://stackoverflow.com/users/3093192/rdfozz"}, "edited": false, "score": 2, "creation_date": 1504128410, "post_id": 45975260, "comment_id": 78908998, "body": "It sounds like you&#39;ve got two questions - what&#39;s the best way to load your dictionary via Python/SQLAlchemy; and, what&#39;s the best way to get the data out of PostgreSQL? The latter would be OK here; the former would make more sense on StackOverflow. However, if asking the PostgreSQL question, realize that the question is not about an existing performance issue, but a potential future one you&#39;re trying to avoid; that sort of question tends to devolve into something primarily opinion-based."}, {"owner": {"reputation": 434877, "user_id": 330315, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4b152262d9ba55197f609625358ff7e0?s=128&d=identicon&r=PG", "display_name": "a_horse_with_no_name", "link": "https://stackoverflow.com/users/330315/a-horse-with-no-name"}, "edited": false, "score": 1, "creation_date": 1504159484, "post_id": 45975260, "comment_id": 78908999, "body": "I agree with RDFozz. A question that does not contain any SQL to describe the problem (and does not expect a SQL solution) is off-topic here"}], "answers": [{"tags": [], "owner": {"reputation": 49769, "user_id": 238639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba9b80f1493afc4168e39bf759019152?s=128&d=identicon&r=PG", "display_name": "bakkal", "link": "https://stackoverflow.com/users/238639/bakkal"}, "is_accepted": false, "score": 1, "last_activity_date": 1504168144, "last_edit_date": 1504168144, "creation_date": 1504167841, "answer_id": 45976693, "question_id": 45975260, "link": "https://stackoverflow.com/questions/45975260/how-can-i-get-all-the-rows-in-a-huge-table-sorted-efficiently-using-sqlalchemy-a/45976693#45976693", "title": "How can I get all the rows in a huge table sorted efficiently using SQLAlchemy and PostgreSQL?", "body": "<blockquote>\n  <p>So, how could I get the rows grouped (or sorted) by the first primary key user_id in an efficient way considering the possible huge amount of rows?</p>\n</blockquote>\n\n<p>To store machine learning weights, I'd try a \"NoSQL solution\" (on PostgreSQL or a file even), because it's just impractical to deal with millions of weights on a row basis.</p>\n\n<p>The idea is, when the ML is done training/retraining, store your weights in the same exact format (structure, ordering, grouping, etc) that you'll need to read them in to be used in the app to make predictions/recommendations.</p>\n\n<p>This amortizes the cost of restructuring the data into the training phase to be written one-time, and avoid restructuring the data when the \"system initializes\" as you put it.</p>\n\n<p>PostgreSQL's <code>JSONB</code> field can hold 1GB of data. You can hold dictionaries and lists, so you can preserve the structure you're computing with your Python snippet.</p>\n\n<p>Or if you also want to avoid deserializing the weights into the format used by your model, you may store it as a <a href=\"https://www.postgresql.org/docs/9.6/static/datatype-binary.html\" rel=\"nofollow noreferrer\">binary blob</a>.</p>\n\n<p>Otherwise storing the weights in the same format on a file works too.</p>\n"}], "migrated_from": {"other_site": {"markdown_extensions": ["Prettify"], "launch_date": 1313521200, "open_beta_date": 1294686000, "closed_beta_date": 1294081200, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/dba/Img/apple-touch-icon@2.png", "twitter_account": "StackDBAs", "favicon_url": "https://cdn.sstatic.net/Sites/dba/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/dba/Img/apple-touch-icon.png", "audience": "database professionals who wish to improve their database skills and learn from others in the community", "site_url": "https://dba.stackexchange.com", "api_site_parameter": "dba", "logo_url": "https://cdn.sstatic.net/Sites/dba/Img/logo.png", "name": "Database Administrators", "site_type": "main_site"}, "on_date": 1504163071, "question_id": 184762}, "owner": {"reputation": 21, "user_id": 7663381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29f87e1f2f2f56c7532bca06f53dfae9?s=128&d=identicon&r=PG&f=1", "display_name": "Samuel A. R.", "link": "https://stackoverflow.com/users/7663381/samuel-a-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 330, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1504168144, "creation_date": 1504126509, "question_id": 45975260, "link": "https://stackoverflow.com/questions/45975260/how-can-i-get-all-the-rows-in-a-huge-table-sorted-efficiently-using-sqlalchemy-a", "title": "How can I get all the rows in a huge table sorted efficiently using SQLAlchemy and PostgreSQL?", "body": "<p>I'm building a recommender system. I have the following table that stores the features of each item: </p>\n\n<pre><code>class Item_feature(db.Model):\n    __tablename__ = \"Item_feature\"\n    item_id = db.Column(db.Integer, primary_key=True)\n    feature_id = db.Column(db.Integer, primary_key=True)\n    weight = db.Column(db.Integer)\n</code></pre>\n\n<p>I didn't need to create an Item table, since the only important information is their ID (besides the features). That explains why the item_id key is not a foreign one. </p>\n\n<p>Each item could have, let's say 40 features. So, if the recommender had 200k items, there would be millions of rows. I need to keep items in memory to avoid fetching them when a suggestion has to be made. I didn't find a better representation to store these features, so ideas on that regard would be very useful as well.</p>\n\n<p>When initializing the system I need to get all features of all items. If items were not sorted by item_id (or at least grouped by item_id) I would have to look for the item with the same item_id on each loop over the list of features. </p>\n\n<p>I'm using this query with SQLAlchemy to get the features:</p>\n\n<pre><code>features = model.Item_feature.query.all().order_by(model.Item_feature.item_id)\n</code></pre>\n\n<p>But this might be really slow. Using the following:</p>\n\n<pre><code>features = model.Item_feature.query.all()\n</code></pre>\n\n<p>doesn't guarantee that results will be sorted. It seems to depend on the order things are added to the DB.</p>\n\n<p>If features were grouped or sorted I could do something more efficient, using a single loop, like:</p>\n\n<pre><code>item = None\nitem_id = None\nfor f in features:\n    # Adds features to item until item_id changes\n    if item_id != f.item_id: \n        item_id = f.item_id\n        item = Item(item_id)\n        self.items[item_id] = item # Adding new item to the dictionary of items\n    item.new_feature()\n</code></pre>\n\n<p>As showed in the code, I'm using a dictionary to store the items. I'm not really sure if this is a good choice.</p>\n\n<p>So, how could I get the rows grouped (or sorted) by the first primary key user_id in an efficient way considering the possible huge amount of rows?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 10709, "user_id": 3212865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B6qLg.jpg?s=128&g=1", "display_name": "spectras", "link": "https://stackoverflow.com/users/3212865/spectras"}, "edited": false, "score": 2, "creation_date": 1504126504, "post_id": 45969526, "comment_id": 78898352, "body": "Yes you should. It tells the for loop the iterator reached the end."}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 3, "creation_date": 1504126508, "post_id": 45969526, "comment_id": 78898359, "body": "Specifically: yes, that&#39;s how the iterator protocol works, <a href=\"https://docs.python.org/3/library/stdtypes.html#typeiter\" rel=\"nofollow noreferrer\">as documented</a>. Generally: it&#39;s common in Python to use exceptions for flow control - it&#39;s <a href=\"https://docs.python.org/3/glossary.html#term-eafp\" rel=\"nofollow noreferrer\"><i>easier to ask for forgiveness than permission</i></a>."}, {"owner": {"reputation": 10709, "user_id": 3212865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B6qLg.jpg?s=128&g=1", "display_name": "spectras", "link": "https://stackoverflow.com/users/3212865/spectras"}, "edited": false, "score": 0, "creation_date": 1504126562, "post_id": 45969526, "comment_id": 78898385, "body": "Relevant documentation is <a href=\"https://docs.python.org/3/howto/functional.html#iterators\" rel=\"nofollow noreferrer\">here</a> by the way."}], "answers": [{"comments": [{"owner": {"reputation": 19411, "user_id": 6640099, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/tf1sO.jpg?s=128&g=1", "display_name": "Christian Dean", "link": "https://stackoverflow.com/users/6640099/christian-dean"}, "reply_to_user": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "edited": false, "score": 0, "creation_date": 1504130258, "post_id": 45969605, "comment_id": 78899858, "body": "@Blckknght Thanks, I accidentally posted the link instead of the content at the link."}, {"owner": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "edited": false, "score": 1, "creation_date": 1504130440, "post_id": 45969605, "comment_id": 78899910, "body": "That&#39;s what I figured. I was initially just going to edit to fix the &quot;your&quot;-&gt;&quot;you&#39;re&quot; typo, but looked for other stuff to change at the same time and thought that looked like a copy and paste error."}], "tags": [], "owner": {"reputation": 19411, "user_id": 6640099, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/tf1sO.jpg?s=128&g=1", "display_name": "Christian Dean", "link": "https://stackoverflow.com/users/6640099/christian-dean"}, "is_accepted": true, "score": 2, "last_activity_date": 1504132631, "last_edit_date": 1592644375, "creation_date": 1504126730, "answer_id": 45969605, "question_id": 45969526, "link": "https://stackoverflow.com/questions/45969526/python-iterator-exception/45969605#45969605", "title": "Python iterator exception", "body": "<p>Yes. You not only should raise an exception here, you <em>must</em> raise an exception here. <a href=\"https://docs.python.org/3.6/library/stdtypes.html#iterator.__next__\" rel=\"nofollow noreferrer\">This is what the iterator protocol calls for</a>:</p>\n<blockquote>\n<p><code>iterator.__next__()</code></p>\n<blockquote>\n<p>Return the next item from the container. If there are no further items, raise the <code>StopIteration</code> exception. [...]</p>\n</blockquote>\n</blockquote>\n<p>You're correct in that exceptions should be raised when the program is in an exceptional state (yes, I know that sounds redundant). However, exceptions in Python are different than in most languages. Exceptions in Python are used for core language features such as iteration, and they are preferred over conditional statements. The common idiom in Python is that <a href=\"https://docs.python.org/3/glossary.html#term-eafp\" rel=\"nofollow noreferrer\">&quot;It's easier to ask for foreignness instead of permission&quot;</a>:</p>\n<blockquote>\n<p>Easier to ask for forgiveness than permission. This common Python coding style assumes the existence of valid keys or attributes and catches exceptions if the assumption proves false. This clean and fast style is characterized by the presence of many try and except statements. The technique contrasts with the LBYL style common to many other languages such as C.</p>\n</blockquote>\n<p>The <a href=\"https://docs.python.org/3/reference/compound_stmts.html#the-try-statement\" rel=\"nofollow noreferrer\"><code>try</code></a> statement is also fined-tuned to allow for the user to have control over how exceptions are handled. It allows <code>else</code>, <code>finally</code>, and multiple <code>except</code> clasues to be used in conjugation with it.</p>\n"}, {"tags": [], "owner": {"reputation": 4809, "user_id": 7915557, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/d36b37bf47edc3bf62574d8ab88870f9?s=128&d=identicon&r=PG&f=1", "display_name": "OLIVER.KOO", "link": "https://stackoverflow.com/users/7915557/oliver-koo"}, "is_accepted": false, "score": 1, "last_activity_date": 1504126742, "creation_date": 1504126742, "answer_id": 45969611, "question_id": 45969526, "link": "https://stackoverflow.com/questions/45969526/python-iterator-exception/45969611#45969611", "title": "Python iterator exception", "body": "<p>Yes, absolutely. The StopIteration exception <strong>needs</strong> to be raised to signal iterator when the <code>self.count</code> equals to <code>self.max</code> which means there are no more elements. Look at Python's <a href=\"https://docs.python.org/3/howto/functional.html#iterators\" rel=\"nofollow noreferrer\">Iterator documentation</a></p>\n\n<blockquote>\n  <p>If there are no more elements in the stream, <strong>next</strong>() must raise the\n  StopIteration exception.</p>\n</blockquote>\n"}], "owner": {"reputation": 5894, "user_id": 4746206, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/aeb5a68770c5420348fb112d7e082436?s=128&d=identicon&r=PG&f=1", "display_name": "Bob5421", "link": "https://stackoverflow.com/users/4746206/bob5421"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 435, "favorite_count": 0, "accepted_answer_id": 45969605, "answer_count": 2, "score": 0, "last_activity_date": 1504132631, "creation_date": 1504126425, "question_id": 45969526, "link": "https://stackoverflow.com/questions/45969526/python-iterator-exception", "title": "Python iterator exception", "body": "<p>I learnt in the past that Exception should be fired when there is somthing in the program which is not normal. For example an error when reading a file.\nIf you look this python code you will see that a StopIteration Exception is fired. But this is not an anormal behaviour of the program. So my question is: Should we raise an exception in this case ? Thanks</p>\n\n<pre><code>class MyIterator():\n    def __init__(self, n):\n        self.max = n\n\n    def __iter__(self):\n        self.count = 0\n        return self\n\n    # For Python3\n    def __next__(self):\n        if self.count == self.max:\n            raise StopIteration\n        self.count += 1\n        return self.count - 1\n\nc = MyIterator(4)\nfor i in c:\n   print(i)\n</code></pre>\n"}, {"tags": ["python", "namedtuple"], "comments": [{"owner": {"reputation": 19411, "user_id": 6640099, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/tf1sO.jpg?s=128&g=1", "display_name": "Christian Dean", "link": "https://stackoverflow.com/users/6640099/christian-dean"}, "edited": false, "score": 1, "creation_date": 1504126515, "post_id": 45969523, "comment_id": 78898365, "body": "If you don&#39;t want the <code>Small</code> instances shared, why use class variables? You need to use instance variables instead."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1504126955, "post_id": 45969523, "comment_id": 78898545, "body": "Python != Java... You should read some tutorials on writing class definitions in Python, it does not work the same way as Java. So, the real question is, <i>why did you expect these two class variables to be different</i>?"}, {"owner": {"reputation": 4094, "user_id": 264596, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7133659c5cc50baab59648283e62a586?s=128&d=identicon&r=PG", "display_name": "Jirka", "link": "https://stackoverflow.com/users/264596/jirka"}, "reply_to_user": {"reputation": 19411, "user_id": 6640099, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/tf1sO.jpg?s=128&g=1", "display_name": "Christian Dean", "link": "https://stackoverflow.com/users/6640099/christian-dean"}, "edited": false, "score": 0, "creation_date": 1504127478, "post_id": 45969523, "comment_id": 78898760, "body": "@ChristianDean Thanks. I had no idea that tuple fields behave as class variables, I thought they were a concise way of creating instance variables."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1504283157, "post_id": 45969523, "comment_id": 78969745, "body": "@Jirka what? It has nothing to do with the fact that you are working with tuples, it&#39;s the <i>syntax you are using</i>. They will be class variables, no matter the type you use. Again, Python != Java."}], "owner": {"reputation": 4094, "user_id": 264596, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7133659c5cc50baab59648283e62a586?s=128&d=identicon&r=PG", "display_name": "Jirka", "link": "https://stackoverflow.com/users/264596/jirka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 1, "closed_date": 1504126475, "answer_count": 0, "score": 0, "last_activity_date": 1504126391, "creation_date": 1504126391, "question_id": 45969523, "link": "https://stackoverflow.com/questions/45969523/python-why-is-embedded-tuple-shared", "closed_reason": "Duplicate", "title": "Python: Why is embedded tuple shared", "body": "<p>I do not understand the following behavior of nested named tuples in Python (3.6):</p>\n\n<pre><code>class Small(NamedTuple):\n   item: float = 0.0\n\nclass Outer(NamedTuple):\n   zz = Small(item=random())\n</code></pre>\n\n<p>When I create two instances of the Small tuple:</p>\n\n<pre><code>a = Small()\nb = Small()\nprint(a is b)\nprint(a, b)\n</code></pre>\n\n<p>they are distinct as I expect</p>\n\n<pre><code>False\nSmall(item=0.0) Small(item=0.0)\n</code></pre>\n\n<p>However, when I create two instances of the Outer tuple</p>\n\n<pre><code>a = Outer()\nb = Outer()\nprint(a is b)\nprint(a.zz is b.zz)\nprint(a.zz, b.zz)\n</code></pre>\n\n<p>they will share the <code>zz</code> field:</p>\n\n<pre><code>False\nTrue\nSmall(item=0.9892612860711646) Small(item=0.9892612860711646)\n</code></pre>\n\n<p>Why? How can I prevent it? (If I used a list instead of a float, and added an element to one instance, it would obviously be in both of them)</p>\n"}, {"tags": ["python", "linux", "macos", "networking", "network-programming"], "comments": [{"owner": {"reputation": 693, "user_id": 8516173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e80c514ca8ad82c6e10800c8cb5f637c?s=128&d=identicon&r=PG", "display_name": "Prince Adeyemi", "link": "https://stackoverflow.com/users/8516173/prince-adeyemi"}, "edited": false, "score": 0, "creation_date": 1504127413, "post_id": 45969520, "comment_id": 78898734, "body": "This can be done by scraping the loaded webpage, collect the connected mac address etc.  Alternatively, if you are on linux box, it is even easy, as I can write a code to return connected MAC address"}, {"owner": {"reputation": 10828, "user_id": 1394729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B9Ri8.jpg?s=128&g=1", "display_name": "tink", "link": "https://stackoverflow.com/users/1394729/tink"}, "edited": false, "score": 0, "creation_date": 1504127467, "post_id": 45969520, "comment_id": 78898756, "body": "Yes, there is a way. But I&#39;m not willing to write it for you :)"}, {"owner": {"reputation": 10828, "user_id": 1394729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B9Ri8.jpg?s=128&g=1", "display_name": "tink", "link": "https://stackoverflow.com/users/1394729/tink"}, "edited": false, "score": 0, "creation_date": 1504127517, "post_id": 45969520, "comment_id": 78898777, "body": "I&#39;m voting to close this question as off-topic because it&#39;s a free-coding request."}, {"owner": {"reputation": 348, "user_id": 4564630, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/887537564c2ea416bdc6fd7de02dc87d?s=128&d=identicon&r=PG&f=1", "display_name": "TruniTr", "link": "https://stackoverflow.com/users/4564630/trunitr"}, "reply_to_user": {"reputation": 693, "user_id": 8516173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e80c514ca8ad82c6e10800c8cb5f637c?s=128&d=identicon&r=PG", "display_name": "Prince Adeyemi", "link": "https://stackoverflow.com/users/8516173/prince-adeyemi"}, "edited": false, "score": 0, "creation_date": 1504127790, "post_id": 45969520, "comment_id": 78898918, "body": "Yeah, I thought of just scraping it but it seems such a dirty solution. Was wondering if there is a cleaner way! @LasVegasCoder"}, {"owner": {"reputation": 693, "user_id": 8516173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e80c514ca8ad82c6e10800c8cb5f637c?s=128&d=identicon&r=PG", "display_name": "Prince Adeyemi", "link": "https://stackoverflow.com/users/8516173/prince-adeyemi"}, "edited": false, "score": 0, "creation_date": 1504127880, "post_id": 45969520, "comment_id": 78898955, "body": "@TruniTr see my answer below."}], "answers": [{"tags": [], "owner": {"reputation": 693, "user_id": 8516173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e80c514ca8ad82c6e10800c8cb5f637c?s=128&d=identicon&r=PG", "display_name": "Prince Adeyemi", "link": "https://stackoverflow.com/users/8516173/prince-adeyemi"}, "is_accepted": false, "score": 3, "last_activity_date": 1504127722, "creation_date": 1504127722, "answer_id": 45969812, "question_id": 45969520, "link": "https://stackoverflow.com/questions/45969520/getting-a-list-of-client-mac-addresses-on-a-home-router/45969812#45969812", "title": "Getting a list of client MAC addresses on a home router", "body": "<h3>Get List of Connected Device's IP and MAC Address from your router.</h3>\n\n<p>On *nix | Linux use:</p>\n\n<pre><code>netdiscover -i eth0 \n</code></pre>\n\n<p>On Windows use:</p>\n\n<pre><code>arp -a\n</code></pre>\n"}], "owner": {"reputation": 348, "user_id": 4564630, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/887537564c2ea416bdc6fd7de02dc87d?s=128&d=identicon&r=PG&f=1", "display_name": "TruniTr", "link": "https://stackoverflow.com/users/4564630/trunitr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 742, "favorite_count": 0, "closed_date": 1504170872, "answer_count": 1, "score": -1, "last_activity_date": 1504127722, "creation_date": 1504126383, "question_id": 45969520, "link": "https://stackoverflow.com/questions/45969520/getting-a-list-of-client-mac-addresses-on-a-home-router", "closed_reason": "Not suitable for this site", "title": "Getting a list of client MAC addresses on a home router", "body": "<p>I am building a small project for my self and came across a small issue.</p>\n\n<p>I have a wifi router, to which I can connect by typing 192.168.0.1 and then entering my browser. It opens a standard D-Link website. There I can see a list of clients currently connected to the router.</p>\n\n<p>I need to get the same information programmatically. Preferably using python, but I can also live with a Linux solution. </p>\n\n<p>Is there a way to do this? I googled around but nothing I found worked for me.</p>\n"}, {"tags": ["python", "string", "integer"], "comments": [{"owner": {"reputation": 684, "user_id": 7073884, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tjoEQ.jpg?s=128&g=1", "display_name": "Lukasz", "link": "https://stackoverflow.com/users/7073884/lukasz"}, "edited": false, "score": 2, "creation_date": 1504126308, "post_id": 45969469, "comment_id": 78898258, "body": "Post your code attempt too."}, {"owner": {"reputation": 19411, "user_id": 6640099, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/tf1sO.jpg?s=128&g=1", "display_name": "Christian Dean", "link": "https://stackoverflow.com/users/6640099/christian-dean"}, "edited": false, "score": 0, "creation_date": 1504126398, "post_id": 45969469, "comment_id": 78898307, "body": "Can you please show what you&#39;ve tried? Can you provide an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>? What is your expect output? What is your actually output? Can you show us rather than tell us? This question as is, is currently to broad."}, {"owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "edited": false, "score": 0, "creation_date": 1504126484, "post_id": 45969469, "comment_id": 78898344, "body": "Is this the entire file, or just part of it?"}, {"owner": {"reputation": 11, "user_id": 4517343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9366e8385855890f7999a1963cb329b?s=128&d=identicon&r=PG&f=1", "display_name": "Gloria_2015", "link": "https://stackoverflow.com/users/4517343/gloria-2015"}, "edited": false, "score": 0, "creation_date": 1504126625, "post_id": 45969469, "comment_id": 78898416, "body": "Yes, I can post my code, I was able to separate string and integers. Now have to sort the integers in priority queue order. here is my code"}, {"owner": {"reputation": 11, "user_id": 4517343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9366e8385855890f7999a1963cb329b?s=128&d=identicon&r=PG&f=1", "display_name": "Gloria_2015", "link": "https://stackoverflow.com/users/4517343/gloria-2015"}, "edited": false, "score": 0, "creation_date": 1504126643, "post_id": 45969469, "comment_id": 78898424, "body": "#!/usr/bin/env/python  import sys import os  def heapsort(iterable):         file = []         for value in iterable:                 heappush(h,value)         return[heappop(h) for i in range(len(file))] def main():         h = []         infile = open(sys.argv[1], &quot;rb&quot;)         str = infile.readline()         for line in infile:                 for nbr in line.split():                         h.append(nbr)         print str         print h         infile.close() main()"}, {"owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "edited": false, "score": 0, "creation_date": 1504126730, "post_id": 45969469, "comment_id": 78898465, "body": "Please post your code in the question itself, along with your desired output from this file."}, {"owner": {"reputation": 11, "user_id": 4517343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9366e8385855890f7999a1963cb329b?s=128&d=identicon&r=PG&f=1", "display_name": "Gloria_2015", "link": "https://stackoverflow.com/users/4517343/gloria-2015"}, "edited": false, "score": 0, "creation_date": 1504126735, "post_id": 45969469, "comment_id": 78898466, "body": "i need to sort using heap queue algorithm, but I dont how to do it"}, {"owner": {"reputation": 11, "user_id": 4517343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9366e8385855890f7999a1963cb329b?s=128&d=identicon&r=PG&f=1", "display_name": "Gloria_2015", "link": "https://stackoverflow.com/users/4517343/gloria-2015"}, "edited": false, "score": 0, "creation_date": 1504127002, "post_id": 45969469, "comment_id": 78898571, "body": "I posted my code. desired output can be any file with first string and next integers"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 4517343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9366e8385855890f7999a1963cb329b?s=128&d=identicon&r=PG&f=1", "display_name": "Gloria_2015", "link": "https://stackoverflow.com/users/4517343/gloria-2015"}, "edited": false, "score": 0, "creation_date": 1504131242, "post_id": 45969770, "comment_id": 78900173, "body": "where are you sending values into number?can you explain please"}, {"owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "reply_to_user": {"reputation": 11, "user_id": 4517343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9366e8385855890f7999a1963cb329b?s=128&d=identicon&r=PG&f=1", "display_name": "Gloria_2015", "link": "https://stackoverflow.com/users/4517343/gloria-2015"}, "edited": false, "score": 0, "creation_date": 1504139956, "post_id": 45969770, "comment_id": 78902135, "body": "@Gloria_2015 I am not sure what you mean. Are you referring to the function call?"}, {"owner": {"reputation": 11, "user_id": 4517343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9366e8385855890f7999a1963cb329b?s=128&d=identicon&r=PG&f=1", "display_name": "Gloria_2015", "link": "https://stackoverflow.com/users/4517343/gloria-2015"}, "edited": false, "score": 0, "creation_date": 1504478805, "post_id": 45969770, "comment_id": 79016885, "body": "yes, can you explain how map of int and new_f works in this method"}, {"owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "reply_to_user": {"reputation": 11, "user_id": 4517343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9366e8385855890f7999a1963cb329b?s=128&d=identicon&r=PG&f=1", "display_name": "Gloria_2015", "link": "https://stackoverflow.com/users/4517343/gloria-2015"}, "edited": false, "score": 0, "creation_date": 1504480652, "post_id": 45969770, "comment_id": 79017200, "body": "@Gloria_2015 map takes a specific function, in this case the integer function, and applies it to every element in the list. <code>new_f</code> searches for the integer values after the decimal in your file."}], "tags": [], "owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "is_accepted": false, "score": 0, "last_activity_date": 1504127532, "creation_date": 1504127532, "answer_id": 45969770, "question_id": 45969469, "link": "https://stackoverflow.com/questions/45969469/how-to-read-a-string-and-integer-separately-from-a-file-in-python/45969770#45969770", "title": "how to read a string and integer separately from a file in python", "body": "<p>You can use regex and <code>heapq</code>:</p>\n\n<pre><code>import re\nimport heapq\n\nf = [i.strip('\\n') for i in open('filename.txt')]\nnew_f = [re.findall(\"(?&lt;=\\d{1,}\\.\\s)[a-zA-Z0-9]+\", i) for i in f]\ndef heapqueue_sort(numbers):\n    l = []\n    heapq.heapify(l)\n    for i in numbers:\n        heapq.heappush(l, i)\n    return [heapq.heappop(l) for i in range(len(l))]\nfinal_data = [new_f[0]].extend(heapqueue_sort(map(int, new_f[1:]))]\nprint(final_data)\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 4517343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9366e8385855890f7999a1963cb329b?s=128&d=identicon&r=PG&f=1", "display_name": "Gloria_2015", "link": "https://stackoverflow.com/users/4517343/gloria-2015"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 471, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1504127532, "creation_date": 1504126169, "last_edit_date": 1592644375, "question_id": 45969469, "link": "https://stackoverflow.com/questions/45969469/how-to-read-a-string-and-integer-separately-from-a-file-in-python", "title": "how to read a string and integer separately from a file in python", "body": "<p>I having trouble reading a file. I have a small text file, like one underneath. My program is supposed to read the first string and store the rest of the integers and sort them in increasing order. I have to write my program in python, but I haven't able to figure out. How to separate my string and integers. Then in the end i have output the result with the name and sorted in integers.</p>\n<h1>!/usr/bin/env/python</h1>\n<pre><code>import sys\nimport os\n\n\ndef main():\n   h = []\n   \n  infile = open(sys.argv[1], &quot;rb&quot;)\n   \n  str = infile.readline()\n   \n  for line in infile:\n            \n     for nbr in line.split():\n                    \n        h.append(nbr)\n    \n\n infile.close()\n\nmain()\n</code></pre>\n"}, {"tags": ["python", "function"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1504126132, "post_id": 45969424, "comment_id": 78898173, "body": "What&#39;s your question?"}, {"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1504126228, "post_id": 45969424, "comment_id": 78898217, "body": "you need to call your function <code>print(get_average(tyler))</code>"}, {"owner": {"reputation": 4809, "user_id": 7915557, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/d36b37bf47edc3bf62574d8ab88870f9?s=128&d=identicon&r=PG&f=1", "display_name": "OLIVER.KOO", "link": "https://stackoverflow.com/users/7915557/oliver-koo"}, "edited": false, "score": 0, "creation_date": 1504126245, "post_id": 45969424, "comment_id": 78898234, "body": "to see the result or variable use the <code>print()</code> statement. for example put print(total/len(number)) before the return statement to see what is being returning."}], "answers": [{"tags": [], "owner": {"reputation": 2481, "user_id": 3606192, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5f2597f776eb2f658ef6f63dac2259ec?s=128&d=identicon&r=PG&f=1", "display_name": "RafazZ", "link": "https://stackoverflow.com/users/3606192/rafazz"}, "is_accepted": true, "score": 2, "last_activity_date": 1504126277, "creation_date": 1504126277, "answer_id": 45969488, "question_id": 45969424, "link": "https://stackoverflow.com/questions/45969424/python-printing-a-variable-in-a-function/45969488#45969488", "title": "Python: Printing a variable in a function", "body": "<p>What you are doing in your code, is declaring variables and defining functions. Nothing is being run yet. What you need to do is call those functions, and print them (if you want to see the results). Try appending that to your script:</p>\n\n<pre><code>print(get_average(alice))\n</code></pre>\n\n<p>or </p>\n\n<pre><code>for student in [lloyd, alice, tyler]:\n    print(student[\"name\"], 'result:')\n    print(get_average(student))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 243, "user_id": 5959127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b17b6465cd1510b45acfeea2f259996?s=128&d=identicon&r=PG", "display_name": "tzadok", "link": "https://stackoverflow.com/users/5959127/tzadok"}, "is_accepted": false, "score": 0, "last_activity_date": 1504126756, "creation_date": 1504126756, "answer_id": 45969613, "question_id": 45969424, "link": "https://stackoverflow.com/questions/45969424/python-printing-a-variable-in-a-function/45969613#45969613", "title": "Python: Printing a variable in a function", "body": "<p>your average function gets a list of grades sum them, then it returns the average as a float.</p>\n\n<p>your get_average function gets a student in the dictionary, calls the average three times once for homework average, once for quizzes and once for tests, and returns an average in which tests weigh more and etc.</p>\n\n<p>in order to get a student's average all you have to do is to call the function from main() with the student whose average you need to calculate.</p>\n"}], "owner": {"reputation": 31, "user_id": 8540114, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jIuiD.jpg?s=128&g=1", "display_name": "code.minion", "link": "https://stackoverflow.com/users/8540114/code-minion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 45969488, "answer_count": 2, "score": -3, "last_activity_date": 1504126756, "creation_date": 1504125996, "question_id": 45969424, "link": "https://stackoverflow.com/questions/45969424/python-printing-a-variable-in-a-function", "title": "Python: Printing a variable in a function", "body": "<p>First timer here.  I'm learning Python but struggle not seeing results when I do the exercises (specifically when I use, return). Not seeing the output is hindering how I learn.  Anywho.  I am trying to print out variables in the below functions to visual what's going one.  </p>\n\n<p>Additionally, I think I'm confused with the functions here.  For instance, with the get_average function, I'm not understanding the connection to the dictionaries.  I am assuming they are supposed to tie back to one another, correct?  Or am I incorrect in thinking they should tie together?  </p>\n\n<p>Thanks!</p>\n\n<pre><code>lloyd = {\n  \"name\": \"Lloyd\",\n  \"homework\": [90.0, 97.0, 75.0, 92.0],\n  \"quizzes\": [88.0, 40.0, 94.0],\n  \"tests\": [75.0, 90.0]\n}\nalice = {\n  \"name\": \"Alice\",\n  \"homework\": [100.0, 92.0, 98.0, 100.0],\n  \"quizzes\": [82.0, 83.0, 91.0],\n  \"tests\": [89.0, 97.0]\n}\ntyler = {\n  \"name\": \"Tyler\",\n  \"homework\": [0.0, 87.0, 75.0, 22.0],\n  \"quizzes\": [0.0, 75.0, 78.0],\n  \"tests\": [100.0, 100.0]\n}\n\n# Add your function below!\ndef average(numbers):\n  total = sum(numbers)\n  total = float(total)\n  return total / len(numbers)\n\ndef get_average(student):\n  homework = average(student[\"homework\"])\n  quizzes = average(student[\"quizzes\"])\n  tests = average(student[\"tests\"])\n  return 0.1 * homework + 0.3 * quizzes + 0.6 * tests\n</code></pre>\n"}, {"tags": ["python", "mysql", "pymysql"], "comments": [{"owner": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "edited": false, "score": 0, "creation_date": 1504127674, "post_id": 45969398, "comment_id": 78898864, "body": "Error seems clear as <code>to_sql</code> is a pandas dataframe method but you are running it on a sql string"}], "answers": [{"comments": [{"owner": {"reputation": 670, "user_id": 5155413, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh5.googleusercontent.com/-soqlwzMnqNc/AAAAAAAAAAI/AAAAAAAAACk/wCe1zt-OyCE/photo.jpg?sz=128", "display_name": "Nick Duddy", "link": "https://stackoverflow.com/users/5155413/nick-duddy"}, "edited": false, "score": 0, "creation_date": 1504207988, "post_id": 45969430, "comment_id": 78937897, "body": "I&#39;ve tried this and now get the error: &#39;ValueError: database flavor mysql is not supported&#39; Why do you think I may need SQLAlchemy? Is there an issue with the way I&#39;m approaching the problem?"}, {"owner": {"reputation": 11162, "user_id": 6655211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SnofI.png?s=128&g=1", "display_name": "PRMoureu", "link": "https://stackoverflow.com/users/6655211/prmoureu"}, "reply_to_user": {"reputation": 670, "user_id": 5155413, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh5.googleusercontent.com/-soqlwzMnqNc/AAAAAAAAAAI/AAAAAAAAACk/wCe1zt-OyCE/photo.jpg?sz=128", "display_name": "Nick Duddy", "link": "https://stackoverflow.com/users/5155413/nick-duddy"}, "edited": false, "score": 0, "creation_date": 1504208290, "post_id": 45969430, "comment_id": 78938037, "body": "it seems other flavors are not supported, so i guess you should switch to SQLAlchemy, or export the datas from dataframes with another way"}, {"owner": {"reputation": 670, "user_id": 5155413, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh5.googleusercontent.com/-soqlwzMnqNc/AAAAAAAAAAI/AAAAAAAAACk/wCe1zt-OyCE/photo.jpg?sz=128", "display_name": "Nick Duddy", "link": "https://stackoverflow.com/users/5155413/nick-duddy"}, "edited": false, "score": 0, "creation_date": 1504261116, "post_id": 45969430, "comment_id": 78956102, "body": "do I swap &#39;pymysql&#39; with &#39;SQLAlchemy&#39;?"}, {"owner": {"reputation": 11162, "user_id": 6655211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SnofI.png?s=128&g=1", "display_name": "PRMoureu", "link": "https://stackoverflow.com/users/6655211/prmoureu"}, "reply_to_user": {"reputation": 670, "user_id": 5155413, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh5.googleusercontent.com/-soqlwzMnqNc/AAAAAAAAAAI/AAAAAAAAACk/wCe1zt-OyCE/photo.jpg?sz=128", "display_name": "Nick Duddy", "link": "https://stackoverflow.com/users/5155413/nick-duddy"}, "edited": false, "score": 0, "creation_date": 1504284614, "post_id": 45969430, "comment_id": 78970469, "body": "@NickDuddy, could you try with the edited solution ?"}, {"owner": {"reputation": 670, "user_id": 5155413, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh5.googleusercontent.com/-soqlwzMnqNc/AAAAAAAAAAI/AAAAAAAAACk/wCe1zt-OyCE/photo.jpg?sz=128", "display_name": "Nick Duddy", "link": "https://stackoverflow.com/users/5155413/nick-duddy"}, "edited": false, "score": 0, "creation_date": 1504459623, "post_id": 45969430, "comment_id": 79011454, "body": "Just tried it, got the following error after I removed the : from the port as I kept getting int error.  &#39;&quot;OperationalError: (pymysql.err.OperationalError) (2003, &quot;Can&#39;t connect to MySQL server on &#39;sql8.freemysqlhosting.net[3306]&#39; ([Errno 11001] getaddrinfo failed)&quot;)&quot;&#39;"}, {"owner": {"reputation": 670, "user_id": 5155413, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh5.googleusercontent.com/-soqlwzMnqNc/AAAAAAAAAAI/AAAAAAAAACk/wCe1zt-OyCE/photo.jpg?sz=128", "display_name": "Nick Duddy", "link": "https://stackoverflow.com/users/5155413/nick-duddy"}, "edited": false, "score": 1, "creation_date": 1504461218, "post_id": 45969430, "comment_id": 79011936, "body": "Just changed &#39;@&lt;host&gt;[:&lt;port&gt;]&#39; to &#39;@&lt;host&gt;:&lt;port&gt;&#39;. Now getting a different error:  &#39;UnicodeEncodeError: &#39;latin-1&#39; codec can&#39;t encode character &#39;\\u2013&#39; in position 151: ordinal not in range(256)&#39;"}, {"owner": {"reputation": 11162, "user_id": 6655211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SnofI.png?s=128&g=1", "display_name": "PRMoureu", "link": "https://stackoverflow.com/users/6655211/prmoureu"}, "reply_to_user": {"reputation": 670, "user_id": 5155413, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh5.googleusercontent.com/-soqlwzMnqNc/AAAAAAAAAAI/AAAAAAAAACk/wCe1zt-OyCE/photo.jpg?sz=128", "display_name": "Nick Duddy", "link": "https://stackoverflow.com/users/5155413/nick-duddy"}, "edited": false, "score": 0, "creation_date": 1504461846, "post_id": 45969430, "comment_id": 79012161, "body": "@NickDuddy i think you can resolve this by passing an option at the end of the <code>create_engine</code> : <code>engine = create_engine(&#39;mysql+pymysql:&#47;&#47;&lt;username&gt;:&lt;password&gt;@&lt;host&gt;[&zwnj;&#8203;:&lt;port&gt;]&#47;&lt;dbname&gt;?ch&zwnj;&#8203;arset=utf8&#39;)</code>"}, {"owner": {"reputation": 11162, "user_id": 6655211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SnofI.png?s=128&g=1", "display_name": "PRMoureu", "link": "https://stackoverflow.com/users/6655211/prmoureu"}, "reply_to_user": {"reputation": 670, "user_id": 5155413, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh5.googleusercontent.com/-soqlwzMnqNc/AAAAAAAAAAI/AAAAAAAAACk/wCe1zt-OyCE/photo.jpg?sz=128", "display_name": "Nick Duddy", "link": "https://stackoverflow.com/users/5155413/nick-duddy"}, "edited": false, "score": 0, "creation_date": 1504461971, "post_id": 45969430, "comment_id": 79012210, "body": "check in this answer, maybe you need to specify encoding too : <a href=\"https://stackoverflow.com/a/33443380/6655211\">stackoverflow.com/a/33443380/6655211</a>"}, {"owner": {"reputation": 670, "user_id": 5155413, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh5.googleusercontent.com/-soqlwzMnqNc/AAAAAAAAAAI/AAAAAAAAACk/wCe1zt-OyCE/photo.jpg?sz=128", "display_name": "Nick Duddy", "link": "https://stackoverflow.com/users/5155413/nick-duddy"}, "edited": false, "score": 0, "creation_date": 1504462351, "post_id": 45969430, "comment_id": 79012328, "body": "that has solved that encoding problem. Now have an error that looks like this: &#39;InternalError: (pymysql.err.InternalError) (1054, &quot;Unknown column &#39;index&#39; in &#39;field list&#39;&quot;) [SQL: &#39;INSERT INTO rsstracker (<code>index</code>, title, link, summary) VALUES (%(index)s, %(title)s, %(link)s, %(summary)s)&#39;] [parameters:&#39;  it then goes on to display all the elements from the feed one after the other."}, {"owner": {"reputation": 11162, "user_id": 6655211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SnofI.png?s=128&g=1", "display_name": "PRMoureu", "link": "https://stackoverflow.com/users/6655211/prmoureu"}, "reply_to_user": {"reputation": 670, "user_id": 5155413, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh5.googleusercontent.com/-soqlwzMnqNc/AAAAAAAAAAI/AAAAAAAAACk/wCe1zt-OyCE/photo.jpg?sz=128", "display_name": "Nick Duddy", "link": "https://stackoverflow.com/users/5155413/nick-duddy"}, "edited": false, "score": 0, "creation_date": 1504463355, "post_id": 45969430, "comment_id": 79012632, "body": "check the names you choose to create the table, maybe add an <code>index</code> field, then it was <code>article_title</code> instead of <code>title</code>, same for the next columns"}, {"owner": {"reputation": 670, "user_id": 5155413, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh5.googleusercontent.com/-soqlwzMnqNc/AAAAAAAAAAI/AAAAAAAAACk/wCe1zt-OyCE/photo.jpg?sz=128", "display_name": "Nick Duddy", "link": "https://stackoverflow.com/users/5155413/nick-duddy"}, "edited": false, "score": 0, "creation_date": 1504625817, "post_id": 45969430, "comment_id": 79077616, "body": "I&#39;ve set a date index and changed the column headers. I got a different error relating to the content in the summery section. So i&#39;ve added this as a variable &#39;summary = &#39;text&#39;&#39;. And the content now goes into the data base. Thanks for you help with this."}, {"owner": {"reputation": 11162, "user_id": 6655211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SnofI.png?s=128&g=1", "display_name": "PRMoureu", "link": "https://stackoverflow.com/users/6655211/prmoureu"}, "reply_to_user": {"reputation": 670, "user_id": 5155413, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh5.googleusercontent.com/-soqlwzMnqNc/AAAAAAAAAAI/AAAAAAAAACk/wCe1zt-OyCE/photo.jpg?sz=128", "display_name": "Nick Duddy", "link": "https://stackoverflow.com/users/5155413/nick-duddy"}, "edited": false, "score": 0, "creation_date": 1504629961, "post_id": 45969430, "comment_id": 79079941, "body": "@NickDuddy  glad you achieve what you want, thanks for the feedback"}], "tags": [], "owner": {"reputation": 11162, "user_id": 6655211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SnofI.png?s=128&g=1", "display_name": "PRMoureu", "link": "https://stackoverflow.com/users/6655211/prmoureu"}, "is_accepted": true, "score": 1, "last_activity_date": 1504284562, "last_edit_date": 1504284562, "creation_date": 1504126021, "answer_id": 45969430, "question_id": 45969398, "link": "https://stackoverflow.com/questions/45969398/pymysql-error-str-object-has-no-attribute-to-sql/45969430#45969430", "title": "PyMySQL Error: &#39;str&#39; object has no attribute &#39;to_sql&#39;", "body": "<p>The line should be :</p>\n\n<pre><code>df.to_sql(con=db, name='rsstracker', if_exists='append', flavor='mysql')\n</code></pre>\n\n<p>But you may need to use SQLAlchemy to make this export possible (<a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.to_sql.html\" rel=\"nofollow noreferrer\">doc</a>)</p>\n\n<hr>\n\n<p>You can try to use SQLAlchemy with pymysql like in the following lines :</p>\n\n<pre><code>import pymysql\nfrom sqlalchemy import create_engine\n\nengine = create_engine('mysql+pymysql://&lt;username&gt;:&lt;password&gt;@&lt;host&gt;[:&lt;port&gt;]/&lt;dbname&gt;')\nengine.execute(\"DROP TABLE IF EXISTS rsstracker\")\nengine.execute(\"\"\"CREATE TABLE rsstracker(\n   article_title  varchar(255),\n   article_url  varchar(1000),\n   article_summary varchar(1000))\"\"\")\n\n\ndf.to_sql(con=engine, name='rsstracker', if_exists='append', , flavor='mysql')\n</code></pre>\n"}], "owner": {"reputation": 670, "user_id": 5155413, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh5.googleusercontent.com/-soqlwzMnqNc/AAAAAAAAAAI/AAAAAAAAACk/wCe1zt-OyCE/photo.jpg?sz=128", "display_name": "Nick Duddy", "link": "https://stackoverflow.com/users/5155413/nick-duddy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2008, "favorite_count": 0, "accepted_answer_id": 45969430, "answer_count": 1, "score": 1, "last_activity_date": 1504284562, "creation_date": 1504125863, "question_id": 45969398, "link": "https://stackoverflow.com/questions/45969398/pymysql-error-str-object-has-no-attribute-to-sql", "title": "PyMySQL Error: &#39;str&#39; object has no attribute &#39;to_sql&#39;", "body": "<p>I'm new to coding and this my first project. So far I've pieced together what I have through Googling, Tutorials and Stack. </p>\n\n<p>I'm trying to add data from a pandas df of scraped RSS feeds to a remote sql database. I've been using a combo of <a href=\"https://stackoverflow.com/questions/17806649/write-pandas-dataframe-in-to-mysql-database\">this post</a> and <a href=\"https://stackoverflow.com/questions/16476413/how-to-insert-pandas-dataframe-via-mysqldb-into-database?noredirect=1&amp;lq=1\">this post</a> to fix my error but the answers don't seem to work with my problem.</p>\n\n<p>Does anyone have a potential solution to the error:</p>\n\n<blockquote>\n  <hr>\n  \n  <p>AttributeError                            Traceback (most recent call\n  last)  in ()\n       19 cursor.execute(sql)\n       20 \n  ---> 21 sql.to_sql(df, con=conn, name='rsstracker', if_exists='append', flavor='mysql')\n       22 \n       23 # disconnect from server</p>\n  \n  <p>AttributeError: 'str' object has no attribute 'to_sql'</p>\n</blockquote>\n\n<pre><code>import pandas as pd\nfrom pandas.io import sql\nimport feedparser\nimport time\n\nrawrss = ['http://newsrss.bbc.co.uk/rss/newsonline_uk_edition/front_page/rss.xml',\n          'https://www.yahoo.com/news/rss/',\n          'http://www.huffingtonpost.co.uk/feeds/index.xml',\n          'http://feeds.feedburner.com/TechCrunch/',\n         ]\n\nposts = []\nfor url in rawrss:\n    feed = feedparser.parse(url)\n    for post in feed.entries:\n        posts.append((post.title, post.link, post.summary))\ndf = pd.DataFrame(posts, columns=['title', 'link', 'summary']) # pass data to init\n\nimport pymysql\n\n# Open database connection\ndb = pymysql.connect(host=\"host\", port=##, user=\"username\", password=\"password\", db=\"sql#######\" )\n\n# prepare a cursor object using cursor() method\ncursor = db.cursor()\n\n\n# Drop table if it already exist using execute() method.\ncursor.execute(\"DROP TABLE IF EXISTS rsstracker\")\n\n# Create table as per requirement\nsql = \"\"\"CREATE TABLE rsstracker(\n   article_title  varchar(255),\n   article_url  varchar(1000),\n   article_summary varchar(1000))\"\"\"\n\ncursor.execute(sql)\n\nsql.to_sql(df, con=conn, name='rsstracker', if_exists='append', flavor='mysql')\n\n# disconnect from server\ndb.close()\n</code></pre>\n"}, {"tags": ["python", "scikit-learn", "cross-validation"], "comments": [{"owner": {"reputation": 28829, "user_id": 3374996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ijirj.png?s=128&g=1", "display_name": "Vivek Kumar", "link": "https://stackoverflow.com/users/3374996/vivek-kumar"}, "edited": false, "score": 5, "creation_date": 1504145181, "post_id": 45969390, "comment_id": 78903230, "body": "One is a k-fold iterator, which will split data k times, and other splits only single time"}, {"owner": {"reputation": 4521, "user_id": 2038360, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/4Xgmo.png?s=128&g=1", "display_name": "gabboshow", "link": "https://stackoverflow.com/users/2038360/gabboshow"}, "reply_to_user": {"reputation": 28829, "user_id": 3374996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ijirj.png?s=128&g=1", "display_name": "Vivek Kumar", "link": "https://stackoverflow.com/users/3374996/vivek-kumar"}, "edited": false, "score": 2, "creation_date": 1504164301, "post_id": 45969390, "comment_id": 78909696, "body": "mmm in StratifiedShuffleSplit you can set the number of splits... from the sklearn webpage: StratifiedShuffleSplit : This cross-validation object is a merge of StratifiedKFold and ShuffleSplit, which returns stratified randomized folds. The folds are made by preserving the percentage of samples for each class."}, {"owner": {"reputation": 28829, "user_id": 3374996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ijirj.png?s=128&g=1", "display_name": "Vivek Kumar", "link": "https://stackoverflow.com/users/3374996/vivek-kumar"}, "edited": false, "score": 0, "creation_date": 1504164578, "post_id": 45969390, "comment_id": 78909890, "body": "Aah yes, my bad. But still its written in the StratifiedShuffleSplit documentation you linked that &quot;This cross-validation object is a merge of StratifiedKFold and ShuffleSplit, which returns stratified randomized folds. The folds are made by preserving the percentage of samples for each class.&quot;"}, {"owner": {"reputation": 28829, "user_id": 3374996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ijirj.png?s=128&g=1", "display_name": "Vivek Kumar", "link": "https://stackoverflow.com/users/3374996/vivek-kumar"}, "edited": false, "score": 4, "creation_date": 1504165308, "post_id": 45969390, "comment_id": 78910328, "body": "Difference is between folds (data don&#39;t overlap in folds). Whereas in StratifiedShuffleSplit it can and will overlap. See the examples given on the documentation pages to understand it better. Specifically test data. In StratifiedKFold it will always be different in each fold. And in StratifiedShuffleSplit it can be repeatative."}, {"owner": {"reputation": 4521, "user_id": 2038360, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/4Xgmo.png?s=128&g=1", "display_name": "gabboshow", "link": "https://stackoverflow.com/users/2038360/gabboshow"}, "reply_to_user": {"reputation": 28829, "user_id": 3374996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ijirj.png?s=128&g=1", "display_name": "Vivek Kumar", "link": "https://stackoverflow.com/users/3374996/vivek-kumar"}, "edited": false, "score": 0, "creation_date": 1504165407, "post_id": 45969390, "comment_id": 78910388, "body": "So if I have to choose between the two I should go for StratifiedKFold isn&#39;t it? I do not see the advantage of using the StratifiedShiffleSplit...but there should be because is a more recent function of sklearn... that&#39;s way I am wondering"}, {"owner": {"reputation": 2950, "user_id": 781938, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/189e7e1ecd0a7516152f0e2d2d5d6130?s=128&d=identicon&r=PG", "display_name": "grisaitis", "link": "https://stackoverflow.com/users/781938/grisaitis"}, "edited": false, "score": 1, "creation_date": 1536514297, "post_id": 45969390, "comment_id": 91442013, "body": "Sounds like <code>StratifiedKFold</code> samples without replacement while <code>StratifiedShiffleSplit</code> shuffles with. So, one advantage of <code>StratifiedShiffleSplit</code> is you can sample as many times as you want. Sure, individual samples will have overlap -- so any fitted models on the samples will be correlated -- but you can fit many more models, and with more data per model."}, {"owner": {"reputation": 537, "user_id": 4468490, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/773a8a252b724f08d76742b5aa8382e9?s=128&d=identicon&r=PG&f=1", "display_name": "Bs He", "link": "https://stackoverflow.com/users/4468490/bs-he"}, "edited": false, "score": 0, "creation_date": 1577124239, "post_id": 45969390, "comment_id": 105100355, "body": "Let&#39;s think about it this way. <code>StratifiedKFold</code> is the true cross-validation. However, <code>StratifiedShiffleSplit</code> is a &quot;generator&quot;, and it randomly generate different &quot;train-test&quot; splits for <code>n_splits</code> times."}], "answers": [{"comments": [{"owner": {"reputation": 568, "user_id": 11112772, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-M10OfOFCvbE/AAAAAAAAAAI/AAAAAAAABCI/g9yaP4ingqg/photo.jpg=k-s128", "display_name": "Md. Sabbir Ahmed", "link": "https://stackoverflow.com/users/11112772/md-sabbir-ahmed"}, "edited": false, "score": 1, "creation_date": 1591269220, "post_id": 46181361, "comment_id": 109994518, "body": "+1 For your great answer. Can you please, answer <a href=\"https://stackoverflow.com/questions/62174112/why-we-should-call-split-function-during-passing-stratifiedkfold-as-a-parame\">my question</a>"}], "tags": [], "owner": {"reputation": 3151, "user_id": 2236150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebdb8a135ad99f84787d2e6d39b5490a?s=128&d=identicon&r=PG&f=1", "display_name": "Ken Syme", "link": "https://stackoverflow.com/users/2236150/ken-syme"}, "is_accepted": true, "score": 86, "last_activity_date": 1505233385, "creation_date": 1505233385, "answer_id": 46181361, "question_id": 45969390, "link": "https://stackoverflow.com/questions/45969390/difference-between-stratifiedkfold-and-stratifiedshufflesplit-in-sklearn/46181361#46181361", "title": "difference between StratifiedKFold and StratifiedShuffleSplit in sklearn", "body": "<p>In KFolds, each test set should not overlap, even with shuffle. With KFolds and shuffle, the data is shuffled once at the start, and then divided into the number of desired splits. The test data is always one of the splits, the train data is the rest.</p>\n\n<p>In ShuffleSplit, the data is shuffled every time, and then split. This means the test sets may overlap between the splits.</p>\n\n<p>See this block for an example of the difference. Note the overlap of the elements in the test sets for ShuffleSplit.</p>\n\n<pre><code>splits = 5\n\ntx = range(10)\nty = [0] * 5 + [1] * 5\n\nfrom sklearn.model_selection import StratifiedShuffleSplit, StratifiedKFold\nfrom sklearn import datasets\n\nkfold = StratifiedKFold(n_splits=splits, shuffle=True, random_state=42)\nshufflesplit = StratifiedShuffleSplit(n_splits=splits, random_state=42, test_size=2)\n\nprint(\"KFold\")\nfor train_index, test_index in kfold.split(tx, ty):\n    print(\"TRAIN:\", train_index, \"TEST:\", test_index)\n\nprint(\"Shuffle Split\")\nfor train_index, test_index in shufflesplit.split(tx, ty):\n    print(\"TRAIN:\", train_index, \"TEST:\", test_index)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>KFold\nTRAIN: [0 2 3 4 5 6 7 9] TEST: [1 8]\nTRAIN: [0 1 2 3 5 7 8 9] TEST: [4 6]\nTRAIN: [0 1 3 4 5 6 8 9] TEST: [2 7]\nTRAIN: [1 2 3 4 6 7 8 9] TEST: [0 5]\nTRAIN: [0 1 2 4 5 6 7 8] TEST: [3 9]\nShuffle Split\nTRAIN: [8 4 1 0 6 5 7 2] TEST: [3 9]\nTRAIN: [7 0 3 9 4 5 1 6] TEST: [8 2]\nTRAIN: [1 2 5 6 4 8 9 0] TEST: [3 7]\nTRAIN: [4 6 7 8 3 5 1 2] TEST: [9 0]\nTRAIN: [7 2 6 5 4 3 0 9] TEST: [1 8]\n</code></pre>\n\n<p>As for when to use them, I tend to use KFolds for any cross validation, and I use ShuffleSplit with a split of 2 for my train/test set splits. But I'm sure there are other use cases for both.</p>\n"}, {"comments": [{"owner": {"reputation": 436, "user_id": 3393769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea4f1b591878ab801a7ecb479c774eb7?s=128&d=identicon&r=PG&f=1", "display_name": "Atendra", "link": "https://stackoverflow.com/users/3393769/atendra"}, "edited": false, "score": 6, "creation_date": 1539775919, "post_id": 52677641, "comment_id": 92622843, "body": "Perfect explanation !!"}], "tags": [], "owner": {"reputation": 3019, "user_id": 3632002, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ddaa0104964fe8ba6723dc7cc479df50?s=128&d=identicon&r=PG", "display_name": "Catbuilts", "link": "https://stackoverflow.com/users/3632002/catbuilts"}, "is_accepted": false, "score": 61, "last_activity_date": 1538819032, "last_edit_date": 1538819032, "creation_date": 1538818324, "answer_id": 52677641, "question_id": 45969390, "link": "https://stackoverflow.com/questions/45969390/difference-between-stratifiedkfold-and-stratifiedshufflesplit-in-sklearn/52677641#52677641", "title": "difference between StratifiedKFold and StratifiedShuffleSplit in sklearn", "body": "<p>@Ken Syme already has a very good answer. I just want to add something.</p>\n\n<ul>\n<li><strong><code>StratifiedKFold</code></strong> is a variation of <code>KFold</code>. First, <code>StratifiedKFold</code> shuffles your data, after that splits the data into <code>n_splits</code> parts and Done. \nNow, it will use each part as a test set. Note that <strong>it only and always shuffles data one time</strong> before splitting.</li>\n</ul>\n\n<p>With  <code>shuffle = True</code>, the data is shuffled by your <code>random_state</code>. Otherwise, \nthe data is shuffled by <code>np.random</code> (as default).\nFor example, with <code>n_splits = 4</code>, and your data has 3 classes (label) for <code>y</code> (dependent variable). 4 test sets cover all the data without any overlap.</p>\n\n<p><a href=\"https://i.stack.imgur.com/XJZve.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/XJZve.png\" alt=\"enter image description here\"></a></p>\n\n<ul>\n<li>On the other hand, <strong><code>StratifiedShuffleSplit</code></strong> is a variation of <code>ShuffleSplit</code>.\nFirst, <code>StratifiedShuffleSplit</code> shuffles your data, and then it also splits the data into <code>n_splits</code> parts. However, it's not done yet. After this step, <code>StratifiedShuffleSplit</code> picks one part to use as a test set.\nThen it repeats the same process <code>n_splits - 1</code> other times, to get <code>n_splits - 1</code> other test sets. Look at the picture below, with the same data, but this time, the 4 test sets do not cover all the data, i.e there are overlaps among test sets.</li>\n</ul>\n\n<p><a href=\"https://i.stack.imgur.com/AGv9B.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/AGv9B.png\" alt=\"enter image description here\"></a></p>\n\n<p>So, the difference here is that <code>StratifiedKFold</code> <strong>just shuffles and splits once, therefore the test sets do not overlap</strong>, while <code>StratifiedShuffleSplit</code> <strong>shuffles each time before splitting, and it splits <code>n_splits</code> times, the test sets can overlap</strong>. </p>\n\n<ul>\n<li><strong>Note</strong>: the two methods uses \"stratified fold\" (that why \"stratified\" appears in both names). It means each part preserves the same percentage of samples of each class (label) as the original data. You can read more at <a href=\"http://scikit-learn.org/stable/modules/cross_validation.html#cross-validation\" rel=\"noreferrer\">cross_validation documents</a></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 661, "user_id": 12370687, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-lje-OzIiULA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re6gX6UIL4QonJea8Xb9NDwdqqscg/photo.jpg?sz=128", "display_name": "Black Raven", "link": "https://stackoverflow.com/users/12370687/black-raven"}, "is_accepted": false, "score": 10, "last_activity_date": 1598731260, "last_edit_date": 1598731260, "creation_date": 1574168132, "answer_id": 58934633, "question_id": 45969390, "link": "https://stackoverflow.com/questions/45969390/difference-between-stratifiedkfold-and-stratifiedshufflesplit-in-sklearn/58934633#58934633", "title": "difference between StratifiedKFold and StratifiedShuffleSplit in sklearn", "body": "<p>Pictorial representation:</p>\n<p>Output examples of KFold, StratifiedKFold, StratifiedShuffleSplit:\n<a href=\"https://i.stack.imgur.com/PUBCh.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/PUBCh.jpg\" alt=\"Output examples of KFold, StratifiedKFold, StratifiedShuffleSplit\" /></a></p>\n<p>The above pictorial representation is based on Ken Syme's code:</p>\n<pre><code>from sklearn.model_selection import KFold, StratifiedKFold, StratifiedShuffleSplit\nSEED = 43\nSPLIT = 3\n\nX_train = [0,1,2,3,4,5,6,7,8]\ny_train = [0,0,0,0,0,0,1,1,1]   # note 6,7,8 are labelled class '1'\n\nprint(&quot;KFold, shuffle=False (default)&quot;)\nkf = KFold(n_splits=SPLIT, random_state=SEED)\nfor train_index, test_index in kf.split(X_train, y_train):\n    print(&quot;TRAIN:&quot;, train_index, &quot;TEST:&quot;, test_index)\n\nprint(&quot;KFold, shuffle=True&quot;)\nkf = KFold(n_splits=SPLIT, shuffle=True, random_state=SEED)\nfor train_index, test_index in kf.split(X_train, y_train):\n    print(&quot;TRAIN:&quot;, train_index, &quot;TEST:&quot;, test_index)\n\nprint(&quot;\\nStratifiedKFold, shuffle=False (default)&quot;)\nskf = StratifiedKFold(n_splits=SPLIT, random_state=SEED)\nfor train_index, test_index in skf.split(X_train, y_train):\n    print(&quot;TRAIN:&quot;, train_index, &quot;TEST:&quot;, test_index)\n    \nprint(&quot;StratifiedKFold, shuffle=True&quot;)\nskf = StratifiedKFold(n_splits=SPLIT, shuffle=True, random_state=SEED)\nfor train_index, test_index in skf.split(X_train, y_train):\n    print(&quot;TRAIN:&quot;, train_index, &quot;TEST:&quot;, test_index)\n    \nprint(&quot;\\nStratifiedShuffleSplit&quot;)\nsss = StratifiedShuffleSplit(n_splits=SPLIT, random_state=SEED, test_size=3)\nfor train_index, test_index in sss.split(X_train, y_train):\n    print(&quot;TRAIN:&quot;, train_index, &quot;TEST:&quot;, test_index)\n\nprint(&quot;\\nStratifiedShuffleSplit (can customise test_size)&quot;)\nsss = StratifiedShuffleSplit(n_splits=SPLIT, random_state=SEED, test_size=2)\nfor train_index, test_index in sss.split(X_train, y_train):\n    print(&quot;TRAIN:&quot;, train_index, &quot;TEST:&quot;, test_index)\n</code></pre>\n"}], "owner": {"reputation": 4521, "user_id": 2038360, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/4Xgmo.png?s=128&g=1", "display_name": "gabboshow", "link": "https://stackoverflow.com/users/2038360/gabboshow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39325, "favorite_count": 35, "accepted_answer_id": 46181361, "answer_count": 3, "score": 64, "last_activity_date": 1598731260, "creation_date": 1504125809, "last_edit_date": 1504173951, "question_id": 45969390, "link": "https://stackoverflow.com/questions/45969390/difference-between-stratifiedkfold-and-stratifiedshufflesplit-in-sklearn", "title": "difference between StratifiedKFold and StratifiedShuffleSplit in sklearn", "body": "<p>As from the title I am wondering what is the difference between</p>\n\n<p><a href=\"http://scikit-learn.org/stable/modules/generated/sklearn.model_selection.StratifiedKFold.html\" rel=\"noreferrer\">StratifiedKFold</a> with the parameter <strong>shuffle = True</strong></p>\n\n<pre><code>StratifiedKFold(n_splits=10, shuffle=True, random_state=0)\n</code></pre>\n\n<p>and </p>\n\n<p><a href=\"http://scikit-learn.org/stable/modules/generated/sklearn.model_selection.StratifiedShuffleSplit.html\" rel=\"noreferrer\">StratifiedShuffleSplit</a></p>\n\n<pre><code>StratifiedShuffleSplit(n_splits=10, test_size=\u2019default\u2019, train_size=None, random_state=0)\n</code></pre>\n\n<p>and what is the advantage of using StratifiedShuffleSplit</p>\n"}, {"tags": ["python", "git", "selenium", "pytest"], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 3246931, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/8lubz.jpg?s=128&g=1", "display_name": "mklemos", "link": "https://stackoverflow.com/users/3246931/mklemos"}, "edited": false, "score": 0, "creation_date": 1504126756, "post_id": 45969519, "comment_id": 78898475, "body": "Unfortunately it&#39;s not only me working on this. However, if the remote host name doesn&#39;t change, I could use similar logic to get it to check against the remote host name, and if it isn&#39;t that then I can default to localhost. Sound about right?"}, {"owner": {"reputation": 12943, "user_id": 2673029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NbcZN.jpg?s=128&g=1", "display_name": "Isma", "link": "https://stackoverflow.com/users/2673029/isma"}, "reply_to_user": {"reputation": 49, "user_id": 3246931, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/8lubz.jpg?s=128&g=1", "display_name": "mklemos", "link": "https://stackoverflow.com/users/3246931/mklemos"}, "edited": false, "score": 0, "creation_date": 1504126957, "post_id": 45969519, "comment_id": 78898551, "body": "Yes, you are right. It makes much more sense to use the server hostname. I updated the answer and fixed a typo too ;)"}], "tags": [], "owner": {"reputation": 12943, "user_id": 2673029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NbcZN.jpg?s=128&g=1", "display_name": "Isma", "link": "https://stackoverflow.com/users/2673029/isma"}, "is_accepted": true, "score": 0, "last_activity_date": 1504126920, "last_edit_date": 1504126920, "creation_date": 1504126378, "answer_id": 45969519, "question_id": 45969353, "link": "https://stackoverflow.com/questions/45969353/python-script-that-uses-selenium-to-switch-from-local-environment-to-remote-base/45969519#45969519", "title": "Python script that uses selenium to switch from local environment to remote based on the environment it is run in", "body": "<p>There are many ways to do this, for example, you could check the hostname of your server and change the url according:</p>\n\n<pre><code>import socket\nserver_hostname = 'MyServer'\n\nif socket.gethostname() == server_hostname:\n    #Remote environment\nelse:\n    #Local environment    \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1543, "user_id": 4321213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6eb8ee864f581864dd312055a2da8e42?s=128&d=identicon&r=PG&f=1", "display_name": "Breaks Software", "link": "https://stackoverflow.com/users/4321213/breaks-software"}, "is_accepted": false, "score": 0, "last_activity_date": 1504129319, "creation_date": 1504129319, "answer_id": 45970122, "question_id": 45969353, "link": "https://stackoverflow.com/questions/45969353/python-script-that-uses-selenium-to-switch-from-local-environment-to-remote-base/45970122#45970122", "title": "Python script that uses selenium to switch from local environment to remote based on the environment it is run in", "body": "<p>Another way would be to have a system environment variable that you can point to the remote server by default, but if it's defined, then you could point to an alternate server (e.g. localhost).</p>\n\n<p>So, on your local environment define a system environment variable \"MY_SERVER_HOST\", then in your code use:</p>\n\n<pre><code>my_server_host = os.getenv(\"MY_SERVER_HOST\", \"remote-server\")\n</code></pre>\n\n<p>when run in any environment that doesn't have the env set, it'll use that remote-server.</p>\n\n<p>This allows you to override that anywhere.</p>\n\n<p>PS: if you have a properties file somewhere, that would be a great place to store the default value of the remote-server.</p>\n\n<p>PPS: if you might have multiple possible remote servers, you could flip this approach and default to localhost, then use the env var on any other machine to specify the target host.</p>\n"}], "owner": {"reputation": 49, "user_id": 3246931, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/8lubz.jpg?s=128&g=1", "display_name": "mklemos", "link": "https://stackoverflow.com/users/3246931/mklemos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 246, "favorite_count": 0, "accepted_answer_id": 45969519, "answer_count": 2, "score": 0, "last_activity_date": 1504129319, "creation_date": 1504125684, "question_id": 45969353, "link": "https://stackoverflow.com/questions/45969353/python-script-that-uses-selenium-to-switch-from-local-environment-to-remote-base", "title": "Python script that uses selenium to switch from local environment to remote based on the environment it is run in", "body": "<p>I have a suite of tests that utilize the selenium webdriver for firefox. I have scripts that I've written that I'd like to check the current environment it's being run in to switch between localhost and a remote server. What's the best way to accomplish this?</p>\n\n<pre><code>    def setUp(self):\n    self.driver = webdriver.Remote(command_executor='http://localhost:4444/wd/hub', \n                                   desired_capabilities=DesiredCapabilities.FIREFOX) #remote-server or localhost\n</code></pre>\n\n<p>I am using a windows environment to test locally in, while the remote server is linux. Is their a system variable I can check against that can perform a swap of:</p>\n\n<p>http://<strong>localhost</strong>:4444/wd/hub to http://<strong>remote-server</strong>:4444/wd/hub </p>\n\n<p>This would improve my workflow allowing me to not worry about switching this variable out every time I commit to and from source control. Thanks for the suggestions!</p>\n"}, {"tags": ["python", "python-2.7", "unicode", "keyboard"], "comments": [{"owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "edited": false, "score": 0, "creation_date": 1504158141, "post_id": 45969286, "comment_id": 78906667, "body": "That&#39;s part of your code, but doesn&#39;t run.  Make a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and include the full traceback so we know what line caused the error."}, {"owner": {"reputation": 2386, "user_id": 4144572, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/DX6gI.jpg?s=128&g=1", "display_name": "Prakash Palnati", "link": "https://stackoverflow.com/users/4144572/prakash-palnati"}, "edited": false, "score": 0, "creation_date": 1504249728, "post_id": 45969286, "comment_id": 78949729, "body": "show us how you are printing the keypresses. I think ! is a special as per pynput"}, {"owner": {"reputation": 254, "user_id": 6216694, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cea36849c8b3fe175972019bc750884b?s=128&d=identicon&r=PG&f=1", "display_name": "Michi Gruber", "link": "https://stackoverflow.com/users/6216694/michi-gruber"}, "edited": false, "score": 0, "creation_date": 1504292693, "post_id": 45969286, "comment_id": 78974062, "body": "Thanks for the suggestions. This is the code I am running. I also added the whole error message. I hope you can work with it better now."}], "answers": [{"tags": [], "owner": {"reputation": 254, "user_id": 6216694, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cea36849c8b3fe175972019bc750884b?s=128&d=identicon&r=PG&f=1", "display_name": "Michi Gruber", "link": "https://stackoverflow.com/users/6216694/michi-gruber"}, "is_accepted": true, "score": 0, "last_activity_date": 1504428432, "creation_date": 1504428432, "answer_id": 46021725, "question_id": 45969286, "link": "https://stackoverflow.com/questions/45969286/pynput-combining-exclamation-mark/46021725#46021725", "title": "pynput combining exclamation mark", "body": "<p>I got it! It's a bug in pynput. Installed an older version and now it works perfectly!</p>\n"}], "owner": {"reputation": 254, "user_id": 6216694, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cea36849c8b3fe175972019bc750884b?s=128&d=identicon&r=PG&f=1", "display_name": "Michi Gruber", "link": "https://stackoverflow.com/users/6216694/michi-gruber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 352, "favorite_count": 0, "accepted_answer_id": 46021725, "answer_count": 1, "score": 0, "last_activity_date": 1504428432, "creation_date": 1504125318, "last_edit_date": 1504292626, "question_id": 45969286, "link": "https://stackoverflow.com/questions/45969286/pynput-combining-exclamation-mark", "title": "pynput combining exclamation mark", "body": "<p>I tried to make a little keylogger with pynput.</p>\n\n<p>That's my code:</p>\n\n<pre><code>from pynput.keyboard import Key, Listener\nimport os\nimport logging\n\nlog_dir = \"C:\\WindowsLogs\\dist\"\nfilename = \"logging\"\nlogging.basicConfig(filename=(log_dir + filename), level=logging.DEBUG, format='%(asctime)s: %(message)s')\n\ndef on_press(key):\n    logging.info(str(key))\n\nwith Listener(on_press=on_press) as listener:\n    listener.join()\n</code></pre>\n\n<p>Everything works fine and it also does save every key. But when the exclamation mark is pressed it gets that error: </p>\n\n<pre><code>Traceback (most recent call last):\nFile \"test2.py\", line 16, in &lt;module&gt;\nlistener.join()\n\nFile \"C:\\Python27\\lib\\site-packages\\pynput\\_util\\__init__.py\", line 185, in join\nsix.reraise(exc_type, exc_value, exc_traceback)\n\nFile \"C:\\Python27\\lib\\site-packages\\pynput\\_util\\__init__.py\", line 140, in inner\nreturn f(self, *args, **kwargs)\n\nFile \"C:\\Python27\\lib\\site-packages\\pynput\\keyboard\\_win32.py\", line 232, in _process\nkey = self._event_to_key(msg, vk)\n\nFile \"C:\\Python27\\lib\\site-packages\\pynput\\keyboard\\_win32.py\", line 265, in _event_to_key\nmsg in self._PRESS_MESSAGES))\n\nFile \"C:\\Python27\\lib\\site-packages\\pynput\\keyboard\\_base.py\", line 49, in __init__\n'COMBINING ' + unicodedata.name(self.char))\n\nKeyError: \"undefined character name 'COMBINING EXCLAMATION MARK'\"\n</code></pre>\n\n<p>What is wrong with the code? And what does that mean?</p>\n"}, {"tags": ["python", "python-requests"], "comments": [{"owner": {"reputation": 815, "user_id": 1066801, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/1cd721ca93dac6dd0c9ce1376607fd38?s=128&d=identicon&r=PG", "display_name": "M07", "link": "https://stackoverflow.com/users/1066801/m07"}, "edited": false, "score": 0, "creation_date": 1504125332, "post_id": 45969253, "comment_id": 78897796, "body": "401 means unauthorized. Have you the right credentials?"}, {"owner": {"reputation": 1768, "user_id": 7369926, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/127985c6b4901ccbaeb6b9d47b465dc9?s=128&d=identicon&r=PG&f=1", "display_name": "ProgSky", "link": "https://stackoverflow.com/users/7369926/progsky"}, "reply_to_user": {"reputation": 815, "user_id": 1066801, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/1cd721ca93dac6dd0c9ce1376607fd38?s=128&d=identicon&r=PG", "display_name": "M07", "link": "https://stackoverflow.com/users/1066801/m07"}, "edited": false, "score": 0, "creation_date": 1504125428, "post_id": 45969253, "comment_id": 78897837, "body": "I do. Post works from POSTMAN but fails from Python."}, {"owner": {"reputation": 815, "user_id": 1066801, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/1cd721ca93dac6dd0c9ce1376607fd38?s=128&d=identicon&r=PG", "display_name": "M07", "link": "https://stackoverflow.com/users/1066801/m07"}, "edited": false, "score": 0, "creation_date": 1504125822, "post_id": 45969253, "comment_id": 78898017, "body": "Use <i>json.dumps</i> if your content type is &quot;application/json&quot;"}, {"owner": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "edited": false, "score": 0, "creation_date": 1504126502, "post_id": 45969253, "comment_id": 78898351, "body": "Please fix: freehand circle is incomplete."}], "answers": [{"comments": [{"owner": {"reputation": 1768, "user_id": 7369926, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/127985c6b4901ccbaeb6b9d47b465dc9?s=128&d=identicon&r=PG&f=1", "display_name": "ProgSky", "link": "https://stackoverflow.com/users/7369926/progsky"}, "edited": false, "score": 0, "creation_date": 1504126685, "post_id": 45969343, "comment_id": 78898443, "body": "I keep getting &quot;401 - Unauthorized: Access is denied due to invalid credentials&quot;.   I am not sure why Python is blocking it. I will research more. I have accepted your answer."}, {"owner": {"reputation": 815, "user_id": 1066801, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/1cd721ca93dac6dd0c9ce1376607fd38?s=128&d=identicon&r=PG", "display_name": "M07", "link": "https://stackoverflow.com/users/1066801/m07"}, "reply_to_user": {"reputation": 1768, "user_id": 7369926, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/127985c6b4901ccbaeb6b9d47b465dc9?s=128&d=identicon&r=PG&f=1", "display_name": "ProgSky", "link": "https://stackoverflow.com/users/7369926/progsky"}, "edited": false, "score": 0, "creation_date": 1504127440, "post_id": 45969343, "comment_id": 78898746, "body": "@ProgSky, Have you tried with the payload = &quot;username=&amp;password=&quot;?"}, {"owner": {"reputation": 1768, "user_id": 7369926, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/127985c6b4901ccbaeb6b9d47b465dc9?s=128&d=identicon&r=PG&f=1", "display_name": "ProgSky", "link": "https://stackoverflow.com/users/7369926/progsky"}, "edited": false, "score": 0, "creation_date": 1504128219, "post_id": 45969343, "comment_id": 78899117, "body": "Yeah. I did . I continue to get 401 - Unauthorized: Access is denied due to invalid credentials ."}, {"owner": {"reputation": 1768, "user_id": 7369926, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/127985c6b4901ccbaeb6b9d47b465dc9?s=128&d=identicon&r=PG&f=1", "display_name": "ProgSky", "link": "https://stackoverflow.com/users/7369926/progsky"}, "edited": false, "score": 0, "creation_date": 1504128863, "post_id": 45969343, "comment_id": 78899345, "body": "I might have to use &quot;HttpNtlmAuth&quot; to authenticate with current user."}, {"owner": {"reputation": 1768, "user_id": 7369926, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/127985c6b4901ccbaeb6b9d47b465dc9?s=128&d=identicon&r=PG&f=1", "display_name": "ProgSky", "link": "https://stackoverflow.com/users/7369926/progsky"}, "edited": false, "score": 0, "creation_date": 1504132660, "post_id": 45969343, "comment_id": 78900588, "body": "using requests_ntlm worked for me. I have posted my answer as well."}], "tags": [], "owner": {"reputation": 27093, "user_id": 5189811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FzPWr.png?s=128&g=1", "display_name": "Oluwafemi Sule", "link": "https://stackoverflow.com/users/5189811/oluwafemi-sule"}, "is_accepted": true, "score": 2, "last_activity_date": 1504125625, "creation_date": 1504125625, "answer_id": 45969343, "question_id": 45969253, "link": "https://stackoverflow.com/questions/45969253/python-request-post-to-api-not-working/45969343#45969343", "title": "Python Request.Post to API not working", "body": "<p>Post data in raw format.</p>\n\n<pre><code>payload = \"username=;password=;\"\n\ns1 = requests.post(\n    url, \n    headers={\"content-type\":\"application/x-www-form-urlencoded\"},\n    data=payload)\n</code></pre>\n\n<p><strong>FWIW,</strong> you can click on <em>Code</em> below the <em>Save</em> button on the top right corner of Postman to view code in a couple of languages for your request.</p>\n"}, {"tags": [], "owner": {"reputation": 815, "user_id": 1066801, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/1cd721ca93dac6dd0c9ce1376607fd38?s=128&d=identicon&r=PG", "display_name": "M07", "link": "https://stackoverflow.com/users/1066801/m07"}, "is_accepted": false, "score": 1, "last_activity_date": 1504126057, "creation_date": 1504126057, "answer_id": 45969439, "question_id": 45969253, "link": "https://stackoverflow.com/questions/45969253/python-request-post-to-api-not-working/45969439#45969439", "title": "Python Request.Post to API not working", "body": "<p>It will only works if the API accepts also JSON body.\nOtherwise you can use the @Oluwafemi Sule's answer.</p>\n\n<pre><code>import requests\nurl =\"http://someapi/v1/auth\"\npayload = {'username': '', 'password': ''}\ns1 = requests.post(url, headers={\"content-type\":\"application/json\"}, data=json.dumps(payload))  \nprint s1.status_code\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 815, "user_id": 1066801, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/1cd721ca93dac6dd0c9ce1376607fd38?s=128&d=identicon&r=PG", "display_name": "M07", "link": "https://stackoverflow.com/users/1066801/m07"}, "edited": false, "score": 0, "creation_date": 1504183222, "post_id": 45970708, "comment_id": 78922611, "body": "Good to know. Thanks for your post."}], "tags": [], "owner": {"reputation": 1768, "user_id": 7369926, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/127985c6b4901ccbaeb6b9d47b465dc9?s=128&d=identicon&r=PG&f=1", "display_name": "ProgSky", "link": "https://stackoverflow.com/users/7369926/progsky"}, "is_accepted": false, "score": 1, "last_activity_date": 1504132585, "creation_date": 1504132585, "answer_id": 45970708, "question_id": 45969253, "link": "https://stackoverflow.com/questions/45969253/python-request-post-to-api-not-working/45970708#45970708", "title": "Python Request.Post to API not working", "body": "<p>This code worked for me.</p>\n\n<pre><code>import requests\nfrom requests_ntlm import HttpNtlmAuth\npayload = \"username=;password=;\"\ns= requests.post(\n        \"http://someapi/v1/auth\", \n        headers={\"content-type\":\"application/x-www-form-urlencoded\"},\n        data = payload, \n        auth=HttpNtlmAuth('',''))\nprint s.status_code\n</code></pre>\n"}], "owner": {"reputation": 1768, "user_id": 7369926, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/127985c6b4901ccbaeb6b9d47b465dc9?s=128&d=identicon&r=PG&f=1", "display_name": "ProgSky", "link": "https://stackoverflow.com/users/7369926/progsky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2526, "favorite_count": 0, "accepted_answer_id": 45969343, "answer_count": 3, "score": 1, "last_activity_date": 1504132585, "creation_date": 1504125219, "question_id": 45969253, "link": "https://stackoverflow.com/questions/45969253/python-request-post-to-api-not-working", "title": "Python Request.Post to API not working", "body": "<p>I am trying to send a simple POST to an api. </p>\n\n<pre><code>import requests\nurl =\"http://someapi/v1/auth\"\npayload = {'username': '', 'password': ''}\ns1 = requests.post(url, headers={\"content-type\":\"application/x-www-form-urlencoded\"}, data=json.dumps(payload))  \nprint s1.status_code\n</code></pre>\n\n<p>I keep getting status code 401. </p>\n\n<p>Same steps Works fine in POSTMAN. </p>\n\n<p><a href=\"https://i.stack.imgur.com/vCtFv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vCtFv.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/pick8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pick8.png\" alt=\"enter image description here\"></a></p>\n\n<p>Any Ideas/pointers ? </p>\n"}, {"tags": ["python", "vector", "computer-vision", "voxel", "3d-rendering"], "comments": [{"owner": {"reputation": 2995, "user_id": 667913, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/e038b48be307830687c8a71ff716ba07?s=128&d=identicon&r=PG", "display_name": "patrick", "link": "https://stackoverflow.com/users/667913/patrick"}, "edited": false, "score": 1, "creation_date": 1504125503, "post_id": 45969185, "comment_id": 78897877, "body": "welcome to so! usually it is helpful if you post your code here, as rudimentary as it might be atm. <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>"}, {"owner": {"reputation": 1232, "user_id": 7298298, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2lyoA.jpg?s=128&g=1", "display_name": "Sneaky Polar Bear", "link": "https://stackoverflow.com/users/7298298/sneaky-polar-bear"}, "edited": false, "score": 0, "creation_date": 1504129821, "post_id": 45969185, "comment_id": 78899695, "body": "Your link is behind a paywall"}, {"owner": {"reputation": 21, "user_id": 6296076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4649ce09ce7f0afac0a1f4ffa33095fe?s=128&d=identicon&r=PG&f=1", "display_name": "Radhika", "link": "https://stackoverflow.com/users/6296076/radhika"}, "reply_to_user": {"reputation": 1232, "user_id": 7298298, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2lyoA.jpg?s=128&g=1", "display_name": "Sneaky Polar Bear", "link": "https://stackoverflow.com/users/7298298/sneaky-polar-bear"}, "edited": false, "score": 0, "creation_date": 1504193332, "post_id": 45969185, "comment_id": 78930050, "body": "@SneakyPolarBear Fixed!"}], "owner": {"reputation": 21, "user_id": 6296076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4649ce09ce7f0afac0a1f4ffa33095fe?s=128&d=identicon&r=PG&f=1", "display_name": "Radhika", "link": "https://stackoverflow.com/users/6296076/radhika"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 565, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1504299448, "creation_date": 1504124943, "last_edit_date": 1504299448, "question_id": 45969185, "link": "https://stackoverflow.com/questions/45969185/trilinear-interpolation-on-voxels-at-specific-angle", "title": "Trilinear Interpolation on Voxels at specific angle", "body": "<p>I'm currently attempting to implement <a href=\"https://pdfs.semanticscholar.org/b2bf/6cd66b26df79f36e4df37e901024f9c63398.pdf?_ga=2.224336731.1354885882.1504190817-2122752319.1504190817\" rel=\"nofollow noreferrer\">this</a> algorithm for volume rendering in Python, and am conceptually confused about their method of generating the LH histogram (see section 3.1, page 4). </p>\n\n<p>I have a 3D stack of DICOM images, and calculated its gradient magnitude and the 2 corresponding azimuth and elevation angles with it (which I found out about <a href=\"https://www.mathworks.com/help/images/ref/imgradient3.html\" rel=\"nofollow noreferrer\">here</a>), as well as finding the second derivative. </p>\n\n<p>Now, the algorithm is asking me to iterate through a set of voxels, and \"track a path by integrating the gradient field in both directions...using the second order Runge-Kutta method with an integration step of one voxel\". </p>\n\n<p>What I don't understand is how to use the 2 angles I calculated to integrate the gradient field in said direction. I understand that you can use trilinear interpolation to get intermediate voxel values, but I don't understand how to get the voxel <strong>coordinates</strong> I want using the angles I have.</p>\n\n<p>In other words, I start at a given voxel position, and want to take a 1 voxel step in the direction of the 2 angles calculated for that voxel (one in the x-y direction, the other in the z-direction). <strong>How would I take this step at these 2 angles and retrieve the new (x, y, z) voxel coordinates?</strong> </p>\n\n<p>Apologies in advance, as I have a very basic background in Calc II/III, so vector fields/visualization of 3D spaces is still a little rough for me. </p>\n\n<p>Creating 3D stack of DICOM images: </p>\n\n<pre><code>def collect_data(data_path):\n    print \"collecting data\"\n    files = []  # create an empty list\n    for dirName, subdirList, fileList in os.walk(data_path):\n        for filename in fileList:\n            if \".dcm\" in filename:\n                files.append(os.path.join(dirName,filename))\n    # Get reference file\n    ref = dicom.read_file(files[0])\n\n    # Load dimensions based on the number of rows, columns, and slices (along the Z axis)\n    pixel_dims = (int(ref.Rows), int(ref.Columns), len(files))\n\n    # Load spacing values (in mm)\n    pixel_spacings = (float(ref.PixelSpacing[0]), float(ref.PixelSpacing[1]), float(ref.SliceThickness))\n\n    x = np.arange(0.0, (pixel_dims[0]+1)*pixel_spacings[0], pixel_spacings[0])\n    y = np.arange(0.0, (pixel_dims[1]+1)*pixel_spacings[1], pixel_spacings[1])\n    z = np.arange(0.0, (pixel_dims[2]+1)*pixel_spacings[2], pixel_spacings[2])\n\n    # Row and column directional cosines\n    orientation = ref.ImageOrientationPatient\n\n    # This will become the intensity values\n    dcm = np.zeros(pixel_dims, dtype=ref.pixel_array.dtype)\n\n    origins = []\n\n    # loop through all the DICOM files\n    for filename in files:\n        # read the file\n        ds = dicom.read_file(filename)\n        #get pixel spacing and origin information\n        origins.append(ds.ImagePositionPatient) #[0,0,0] coordinates in real 3D space (in mm)\n\n        # store the raw image data\n        dcm[:, :, files.index(filename)] = ds.pixel_array\n    return dcm, origins, pixel_spacings, orientation\n</code></pre>\n\n<p>Calculating gradient magnitude: </p>\n\n<pre><code>def calculate_gradient_magnitude(dcm):\n    print \"calculating gradient magnitude\"\n    gradient_magnitude = []\n    gradient_direction = []\n\n    gradx = np.zeros(dcm.shape)\n    sobel(dcm,0,gradx)\n    grady = np.zeros(dcm.shape)\n    sobel(dcm,1,grady)\n    gradz = np.zeros(dcm.shape)\n    sobel(dcm,2,gradz)\n\n    gradient = np.sqrt(gradx**2 + grady**2 + gradz**2)\n\n    azimuthal = np.arctan2(grady, gradx)\n    elevation = np.arctan(gradz,gradient)\n\n    azimuthal = np.degrees(azimuthal)\n    elevation = np.degrees(elevation)\n\n    return gradient, azimuthal, elevation\n</code></pre>\n\n<p>Converting to patient coordinate system to get actual voxel position: </p>\n\n<pre><code>def get_patient_position(dcm, origins, pixel_spacing, orientation):\n    \"\"\"\n        Image Space --&gt; Anatomical (Patient) Space is an affine transformation\n        using the Image Orientation (Patient), Image Position (Patient), and\n        Pixel Spacing properties from the DICOM header\n    \"\"\"\n    print \"getting patient coordinates\"\n\n    world_coordinates = np.empty((dcm.shape[0], dcm.shape[1],dcm.shape[2], 3))\n    affine_matrix = np.zeros((4,4), dtype=np.float32)\n\n    rows = dcm.shape[0]\n    cols = dcm.shape[1]\n    num_slices = dcm.shape[2]\n\n    image_orientation_x = np.array([ orientation[0], orientation[1], orientation[2]  ]).reshape(3,1)\n    image_orientation_y = np.array([ orientation[3], orientation[4], orientation[5]  ]).reshape(3,1)\n    pixel_spacing_x = pixel_spacing[0]\n\n    # Construct affine matrix\n    # Method from:\n    # http://nipy.org/nibabel/dicom/dicom_orientation.html\n    T_1 = origins[0]\n    T_n = origins[num_slices-1]\n\n\n    affine_matrix[0,0] = image_orientation_y[0] * pixel_spacing[0]\n    affine_matrix[0,1] = image_orientation_x[0] * pixel_spacing[1]\n    affine_matrix[0,3] = T_1[0]\n    affine_matrix[1,0] = image_orientation_y[1] * pixel_spacing[0]\n    affine_matrix[1,1] = image_orientation_x[1] * pixel_spacing[1]\n    affine_matrix[1,3] = T_1[1]\n    affine_matrix[2,0] = image_orientation_y[2] * pixel_spacing[0]\n    affine_matrix[2,1] = image_orientation_x[2] * pixel_spacing[1]\n    affine_matrix[2,3] = T_1[2]\n    affine_matrix[3,3] = 1\n\n    k1 = (T_1[0] - T_n[0])/ (1 - num_slices)\n    k2 = (T_1[1] - T_n[1])/ (1 - num_slices)\n    k3 = (T_1[2] - T_n[2])/ (1 - num_slices)\n\n    affine_matrix[:3, 2] = np.array([k1,k2,k3])\n\n    for z in range(num_slices):\n        for r in range(rows):\n            for c in range(cols):\n                vector = np.array([r, c, 0, 1]).reshape((4,1))\n                result = np.matmul(affine_matrix, vector)\n                result = np.delete(result, 3, axis=0)\n                result = np.transpose(result)\n                world_coordinates[r,c,z] = result\n        # print \"Finished slice \", str(z)\n    # np.save('./data/saved/world_coordinates_3d.npy', str(world_coordinates))\n    return world_coordinates\n</code></pre>\n\n<p>Now I'm at the point where I want to write this function: </p>\n\n<pre><code>def create_lh_histogram(patient_positions, dcm, magnitude, azimuthal, elevation):\n    print \"constructing LH histogram\"\n    # Get 2nd derivative\n    second_derivative = gaussian_filter(magnitude, sigma=1, order=1)\n\n    # Determine if voxels lie on boundary or not (thresholding)\n\n    # Still have to code out: let's say the thresholded voxels are in \n    # a numpy array called voxels\n\n    #Iterate through all thresholded voxels and integrate gradient field in\n    # both directions using 2nd-order Runge-Kutta\n    vox_it = voxels.nditer(voxels, flags=['multi_index'])\n    while not vox_it.finished:\n        # ???\n</code></pre>\n"}, {"tags": ["python", "pandas", "datetime", "dataframe", "python-2.5"], "answers": [{"comments": [{"owner": {"reputation": 3007, "user_id": 5399268, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/db9648d37845f0b84cf40ecdd2be7549?s=128&d=identicon&r=PG", "display_name": "Cedric Zoppolo", "link": "https://stackoverflow.com/users/5399268/cedric-zoppolo"}, "edited": false, "score": 0, "creation_date": 1504126450, "post_id": 45969451, "comment_id": 78898323, "body": "Great! This solves my issue! Thanks! I wish I could update my python/pandas, but as I need to use an API from an external program coded under <code>python 2.5</code> I&#39;m stuck there by now..."}], "tags": [], "owner": {"reputation": 38434, "user_id": 3657742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/027d13e2b9077479fa7857166c272c16?s=128&d=identicon&r=PG&f=1", "display_name": "chrisb", "link": "https://stackoverflow.com/users/3657742/chrisb"}, "is_accepted": true, "score": 1, "last_activity_date": 1504126096, "creation_date": 1504126096, "answer_id": 45969451, "question_id": 45969183, "link": "https://stackoverflow.com/questions/45969183/different-results-while-filtering-pandas-dataframe-by-its-datetime-index/45969451#45969451", "title": "Different results while filtering pandas DataFrame by its datetime index", "body": "<p>Hopefully goes without saying, but if at all possible, upgrade your python/pandas!</p>\n\n<p>In this case, on a recent version (<code>0.20.3</code>) I get missing values in both cases - I need to convert the lookup keys to datetimes and I'm guessing it will work for you too.   </p>\n\n<p>The convenience string based date indexing only works with scalars / slices.</p>\n\n<pre><code>In [174]: lookup = pd.to_datetime(filter1[filter1.columns[0]][0:2])\n\nIn [175]: df2.ix[lookup]\nOut[175]: \n                        t1       1     t4       4     t6       6\nFecha_hora                                                      \n2014-08-06 12:20:00  19.85  311.55  17.85  248.68  19.78  547.21\n2014-08-06 13:00:00  20.28  356.96  18.92  307.57  21.15  471.18\n</code></pre>\n"}], "owner": {"reputation": 3007, "user_id": 5399268, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/db9648d37845f0b84cf40ecdd2be7549?s=128&d=identicon&r=PG", "display_name": "Cedric Zoppolo", "link": "https://stackoverflow.com/users/5399268/cedric-zoppolo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 45969451, "answer_count": 1, "score": 0, "last_activity_date": 1504131905, "creation_date": 1504124936, "last_edit_date": 1504131905, "question_id": 45969183, "link": "https://stackoverflow.com/questions/45969183/different-results-while-filtering-pandas-dataframe-by-its-datetime-index", "title": "Different results while filtering pandas DataFrame by its datetime index", "body": "<p>I'm trying to filter a <code>pandas</code> DataFrame and I'm getting different results using a test case and the real data. Using real data I'm getting <code>NaN</code> values, while on the test case I'm getting what I expect.</p>\n\n<p><strong>Test case:</strong></p>\n\n<p>The test case I created has following code:</p>\n\n<pre><code>import pandas as pd\ndf1 = pd.DataFrame([\n[\"2014-08-06 12:10:00\", 19.85,  299.96, 17.5,   228.5,  19.63,  571.43],\n[\"2014-08-06 12:20:00\", 19.85,  311.55, 17.85,  248.68, 19.78,  547.21],\n[\"2014-08-06 12:30:00\", 20.06,  355.27, 18.35,  224.82, 19.99,  410.68],\n[\"2014-08-06 12:40:00\", 20.14,  405.95, 18.49,  247.33, 20.5,   552.79],\n[\"2014-08-06 12:50:00\", 20.14,  352.87, 18.7,   449.33, 20.86,  616.44],\n[\"2014-08-06 13:00:00\", 20.28,  356.96, 18.92,  307.57, 21.15,  471.18]],\ncolumns=[\"date_time\",\"t1\", \"1\", \"t4\", \"4\", \"t6\", \"6\"])\ndf1 = df1.set_index([\"date_time\"])\ndf1 = pd.to_datetime(df1)\n\nfilter1 = pd.DataFrame([\"2014-08-06 12:20:00\",\"2014-08-06 13:00:00\"])\ndf1_filtered = df1.ix[filter1[filter1.columns[0]][0:2]]\n</code></pre>\n\n<p>As you may expect, the result is:</p>\n\n<pre><code>&gt;&gt;&gt; df1_filtered\n                        t1       1     t4       4     t6       6\n2014-08-06 12:20:00  19.85  311.55  17.85  248.68  19.78  547.21\n2014-08-06 13:00:00  20.28  356.96  18.92  307.57  21.15  471.18\n</code></pre>\n\n<p><strong>Using real data:</strong></p>\n\n<p><a href=\"http://www.pythonanywhere.com/user/cedriczg/files/home/cedriczg/data.txt\" rel=\"nofollow noreferrer\">Real data</a> comes from a txt file and looks like this:</p>\n\n<pre><code>Fecha_hora  t1  1   t4  4   t6  6\n2014-08-06 12:10:00 19.85   299.96  17.5    228.5   19.63   571.43\n2014-08-06 12:20:00 19.85   311.55  17.85   248.68  19.78   547.21\n2014-08-06 12:30:00 20.06   355.27  18.35   224.82  19.99   410.68\n2014-08-06 12:40:00 20.14   405.95  18.49   247.33  20.5    552.79\n2014-08-06 12:50:00 20.14   352.87  18.7    449.33  20.86   616.44\n2014-08-06 13:00:00 20.28   356.96  18.92   307.57  21.15   471.18\n</code></pre>\n\n<p>However when I read the real data, and use same filter as before this way:</p>\n\n<pre><code>df2 = pd.read_csv(r\"D:/tmp/data.txt\", sep='\\t', parse_dates=True, index_col=0)\ndf2_filtered = df2.ix[filter1[filter1.columns[0]][0:2]]\n</code></pre>\n\n<p>I get following results with values as <code>NaN</code>:</p>\n\n<pre><code>&gt;&gt;&gt; df2_filtered\n                     t1   1  t4   4  t6   6\n2014-08-06 12:20:00 NaN NaN NaN NaN NaN NaN\n2014-08-06 13:00:00 NaN NaN NaN NaN NaN NaN\n</code></pre>\n\n<p>But I can still get the values from a certain row like this:</p>\n\n<pre><code>&gt;&gt;&gt; df2.ix[\"2014-08-06 12:20:00\"]\nt1     19.85\n1     311.55\nt4     17.85\n4     248.68\nt6     19.78\n6     547.21\nName: 2014-08-06 12:20:00\n</code></pre>\n\n<p><strong>Question:</strong></p>\n\n<p><strong>How can I filter my real data in order to get same results as in my test case?</strong> May there be a better way to achieve what I'm looking for?</p>\n\n<p><strong>Note</strong>: My <code>pandas</code> version is <code>0.9.0</code> used under <code>python 2.5</code>. Means I have no <code>loc</code> function.</p>\n\n<p><strong>Note 2</strong>: I even tried this using <code>python 2.7</code> under <a href=\"https://www.pythonanywhere.com\" rel=\"nofollow noreferrer\">pythonanywhere.com</a> with same different results. However if I check for <code>df1==df2</code> I get <code>True</code> for every single value.</p>\n"}, {"tags": ["python", "beautifulsoup", "urllib"], "comments": [{"owner": {"reputation": 22312, "user_id": 463758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/105689a9cb392f18c1d0b27ed0cf657f?s=128&d=identicon&r=PG&f=1", "display_name": "balki", "link": "https://stackoverflow.com/users/463758/balki"}, "edited": false, "score": 0, "creation_date": 1504128043, "post_id": 45969181, "comment_id": 78899036, "body": "Since this part is not html, use regex to extract the data you want"}], "answers": [{"comments": [{"owner": {"reputation": 134, "user_id": 6835447, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/625471f9507c88697728fc4b9611c90f?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Hill", "link": "https://stackoverflow.com/users/6835447/justin-hill"}, "edited": false, "score": 0, "creation_date": 1504204435, "post_id": 45969567, "comment_id": 78936095, "body": "Thank you for your response.  How does this work if there is more than one &lt;script&gt; &lt;/script&gt;?"}, {"owner": {"reputation": 134, "user_id": 6835447, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/625471f9507c88697728fc4b9611c90f?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Hill", "link": "https://stackoverflow.com/users/6835447/justin-hill"}, "edited": false, "score": 0, "creation_date": 1504211001, "post_id": 45969567, "comment_id": 78939183, "body": "Also, I was using urllib.request.Request using headers[&#39;User-Agent&#39;] = &quot;Mozilla/5.0 (X11; Linux i686) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.27 Safari/537.17&quot;"}, {"owner": {"reputation": 12253, "user_id": 6671342, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/22063dc94e4bdcb1b6fb634e5865f5aa?s=128&d=identicon&r=PG&f=1", "display_name": "coder", "link": "https://stackoverflow.com/users/6671342/coder"}, "reply_to_user": {"reputation": 134, "user_id": 6835447, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/625471f9507c88697728fc4b9611c90f?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Hill", "link": "https://stackoverflow.com/users/6835447/justin-hill"}, "edited": false, "score": 0, "creation_date": 1504221599, "post_id": 45969567, "comment_id": 78942888, "body": "@JustinHill, Yes, the script that you are actually referring to is totally different than the one you posted, thus the KeyError. I updated the answer accordingly. Also the results are from the url you posted in the comments, I just replaced it in the answer for typical reasons."}, {"owner": {"reputation": 134, "user_id": 6835447, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/625471f9507c88697728fc4b9611c90f?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Hill", "link": "https://stackoverflow.com/users/6835447/justin-hill"}, "edited": false, "score": 0, "creation_date": 1504616159, "post_id": 45969567, "comment_id": 79070539, "body": "Because of my reputation being less than 15 on here, I am unable to give you a +1 that counts.  However, I truly appreciate all of your help."}], "tags": [], "owner": {"reputation": 12253, "user_id": 6671342, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/22063dc94e4bdcb1b6fb634e5865f5aa?s=128&d=identicon&r=PG&f=1", "display_name": "coder", "link": "https://stackoverflow.com/users/6671342/coder"}, "is_accepted": true, "score": 1, "last_activity_date": 1504221571, "last_edit_date": 1504221571, "creation_date": 1504126576, "answer_id": 45969567, "question_id": 45969181, "link": "https://stackoverflow.com/questions/45969181/how-to-return-text-from-html-without-tag-using-python-and-beautifulsoup/45969567#45969567", "title": "How to return text from HTML without tag using python and BeautifulSoup?", "body": "<p>You could use <a href=\"https://www.crummy.com/software/BeautifulSoup/bs4/doc/\" rel=\"nofollow noreferrer\"><code>Beautiful Soup</code></a> like so:</p>\n\n<pre><code>#!/usr/bin/env python\n\nfrom bs4 import BeautifulSoup\n\nhtml = '''\n&lt;script&gt;\n    h1.config.days = \"7\";\n    h1.config.hours = \"24\";\n    h1.config.color = \"blue\";\n    h1.config.ownerId = 7321;\n    h1.config.locationId = 1258;\n    h1.config.unitId = \"164\";\n&lt;/script&gt;\n'''\n\nsoup = BeautifulSoup(html, \"html.parser\")\njsinfo = soup.find(\"script\")\n\nd = {}\nfor line in jsinfo.text.split('\\n'):\n    try:\n        d[line.split('=')[0].strip().replace('h1.config.','')] = line.split('=')[1].lstrip().rstrip(';')\n    except IndexError:\n        pass\n\nprint 'OwnerId:  {}'.format(d['ownerId'])\nprint 'UnitId:   {}'.format(d['unitId'])\n</code></pre>\n\n<p>This will produce the following result:</p>\n\n<pre><code>OwnerId:  7321\nUnitId:   \"164\"\n</code></pre>\n\n<p>Also in this way you can access any other variable too, by doing <code>d['variable']</code>.</p>\n\n<p><strong>Update</strong></p>\n\n<p>Now in case you have to deal with multiple <code>&lt;script&gt;</code> tags, to iterate through them you can do:</p>\n\n<pre><code>jsinfo = soup.find_all(\"script\")\n</code></pre>\n\n<p>Now, <code>jsinfo</code> is type of <code>&lt;class 'bs4.element.ResultSet'&gt;</code> which you can iterate through like a normal <em>list</em>. </p>\n\n<p>Now to extract <em>lat</em> and <em>lon</em> you could simply do:</p>\n\n<pre><code>#!/usr/bin/env python\n\nfrom bs4 import BeautifulSoup\nimport requests\n\nurl = 'https://www.your_url'\n# the user-agent you specified in the comments\nheaders = {'User-Agent': 'Mozilla/5.0 (X11; Linux i686) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.27 Safari/537.17'}\n\nhtml = requests.get(url, headers=headers).text\nsoup = BeautifulSoup(html, \"html.parser\")\njsinfo = soup.find_all(\"script\")\n\nlist_of_interest = ['hl.config.lat', 'hl.config.lon']\n\nd = {}\nfor line in jsinfo[9].text.split('\\n'):\n    if any(word in line for word in list_of_interest):\n        k,v = line.strip().replace('hl.config.','').split(' = ')\n        d[k] = v.strip(';')\n\nprint 'Lat =&gt; {}'.format(d['lat'])\nprint 'Lon =&gt; {}'.format(d['lon'])\n</code></pre>\n\n<p>This will produce the following results:</p>\n\n<pre><code>Lat =&gt; \"28.06794\"\nLon =&gt; \"-81.754349\"\n</code></pre>\n\n<p>By appending more values in <code>list_of_interest</code> you can access some other variables too if you like!</p>\n"}], "owner": {"reputation": 134, "user_id": 6835447, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/625471f9507c88697728fc4b9611c90f?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Hill", "link": "https://stackoverflow.com/users/6835447/justin-hill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 646, "favorite_count": 1, "accepted_answer_id": 45969567, "answer_count": 1, "score": 1, "last_activity_date": 1504221571, "creation_date": 1504124924, "last_edit_date": 1504125249, "question_id": 45969181, "link": "https://stackoverflow.com/questions/45969181/how-to-return-text-from-html-without-tag-using-python-and-beautifulsoup", "title": "How to return text from HTML without tag using python and BeautifulSoup?", "body": "<p>I am stuck trying to return text from a website.  I am trying to return ownerId and unitId from the following example.  Any help is greatly appreciated.</p>\n\n<pre><code>&lt;script&gt;\n    h1.config.days = \"7\";\n    h1.config.hours = \"24\";\n    h1.config.color = \"blue\";\n    h1.config.ownerId = 7321;\n    h1.config.locationId = 1258;\n    h1.config.unitId = \"164\";\n&lt;/script&gt;\n</code></pre>\n"}, {"tags": ["python", "numpy"], "answers": [{"comments": [{"owner": {"reputation": 1630, "user_id": 2844907, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/100003180301954/picture?type=large", "display_name": "Alexander Cyberman", "link": "https://stackoverflow.com/users/2844907/alexander-cyberman"}, "edited": false, "score": 0, "creation_date": 1504127778, "post_id": 45969171, "comment_id": 78898910, "body": "Doesn&#39;t work with: a = np.matrix(&#39;1 2 3; 4 5 6; 7 8 9&#39;)  a2 = move_perimeter(a, n=1, direction=&#39;clockwise&#39;)"}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "reply_to_user": {"reputation": 1630, "user_id": 2844907, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/100003180301954/picture?type=large", "display_name": "Alexander Cyberman", "link": "https://stackoverflow.com/users/2844907/alexander-cyberman"}, "edited": false, "score": 2, "creation_date": 1504127897, "post_id": 45969171, "comment_id": 78898966, "body": "@\u0410\u043b\u0435\u043a\u0441\u0430\u043d\u0434\u0440\u041a\u0438\u0431\u0435\u0440\u043c\u0430\u043d Don&#39;t use <code>np.matrix</code>, it&#39;s not really popular with NumPy. Use array data : <code>a = np.array(a)</code> and then proceed."}], "tags": [], "owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "is_accepted": true, "score": 1, "last_activity_date": 1504128412, "last_edit_date": 1504128412, "creation_date": 1504124891, "answer_id": 45969171, "question_id": 45969149, "link": "https://stackoverflow.com/questions/45969149/move-values-around-the-matrix-perimeter-python-numpy/45969171#45969171", "title": "Move values around the matrix perimeter - Python / NumPy", "body": "<p>Here's one approach for <code>2D</code> arrays -</p>\n\n<pre><code>def move_perimeter(a, n, direction='clockwise'):\n    # a : input array\n    # n : number of elements to be moved\n    # direction : 'clockwise' or 'counterclockwise'\n\n    # Dictionary to map for number of elements rolling later\n    dirn_map = {'clockwise':n,'counterclockwise':-n}\n\n    # Store size\n    m,n = a.shape\n    r0 = np.arange(m-1)\n    r1 = np.arange(n-1)\n\n    # Get Top, Right, Bottom and Left side linear indices. Store those.\n    T = r1\n    R = n-1+r0*n\n    B = a.size-r1-1\n    L = n+r0[::-1]*n\n    idx = np.r_[T,R,B,L]\n\n    # Make a copy of input array\n    out = a.copy()\n\n    # Linearly index into output array with those original indices\n    # and extract rolled values from input array.\n    out.ravel()[idx] = a.ravel()[np.roll(idx, dirn_map[direction])]\n    return out\n</code></pre>\n\n<p>Sample runs -</p>\n\n<pre><code>In [233]: a\nOut[233]: \narray([[83, 13, 27, 13],\n       [90, 78, 57, 68],\n       [66, 47, 44, 53],\n       [13, 98, 95, 46],\n       [29, 87, 80, 92],\n       [91, 19, 86, 26],\n       [31, 27, 75, 72]])\n\nIn [234]: move_perimeter(a, n=1, direction='clockwise')\nOut[234]: \narray([[90, 83, 13, 27],\n       [66, 78, 57, 13],\n       [13, 47, 44, 68],\n       [29, 98, 95, 53],\n       [91, 87, 80, 46],\n       [31, 19, 86, 92],\n       [27, 75, 72, 26]])\n\nIn [235]: move_perimeter(a, n=2, direction='counterclockwise')\nOut[235]: \narray([[27, 13, 68, 53],\n       [13, 78, 57, 46],\n       [83, 47, 44, 92],\n       [90, 98, 95, 26],\n       [66, 87, 80, 72],\n       [13, 19, 86, 75],\n       [29, 91, 31, 27]])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 83, "user_id": 4747756, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xAPcDDoe9cQ/AAAAAAAAAAI/AAAAAAAAAUY/CRGCZGuHoho/photo.jpg?sz=128", "display_name": "Denis Shcheglov", "link": "https://stackoverflow.com/users/4747756/denis-shcheglov"}, "is_accepted": false, "score": 1, "last_activity_date": 1504127825, "last_edit_date": 1504127825, "creation_date": 1504127073, "answer_id": 45969675, "question_id": 45969149, "link": "https://stackoverflow.com/questions/45969149/move-values-around-the-matrix-perimeter-python-numpy/45969675#45969675", "title": "Move values around the matrix perimeter - Python / NumPy", "body": "<p>Through indices.</p>\n\n<pre><code>a = np.array([[1, 2, 3], [4, 5, 6], [7, 8, 9]])\nindexes = (np.array([0, 0, 0, 1, 2, 2, 2, 1]), np.array([0, 1, 2, 2, 2, 1, 0, 0]))\nvalues = np.array([1, 2, 3, 6, 9, 8, 7, 4])\nvalues = np.roll(values, 1)\na[indexes] = values\nnp.roll ...\n</code></pre>\n\n<p><em>For the sake of simplicity of explanation, I printed indexes with hands.</em></p>\n"}], "owner": {"reputation": 1630, "user_id": 2844907, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/100003180301954/picture?type=large", "display_name": "Alexander Cyberman", "link": "https://stackoverflow.com/users/2844907/alexander-cyberman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 486, "favorite_count": 2, "accepted_answer_id": 45969171, "answer_count": 2, "score": 1, "last_activity_date": 1504128412, "creation_date": 1504124786, "last_edit_date": 1504128204, "question_id": 45969149, "link": "https://stackoverflow.com/questions/45969149/move-values-around-the-matrix-perimeter-python-numpy", "title": "Move values around the matrix perimeter - Python / NumPy", "body": "<p>it's necessary that lateral values \u200b\u200bare shifted along the perimeter.</p>\n\n<p>E.g.  one step twist:</p>\n\n<pre>\n1 2 3     4 1 2<br>\n4 5 6 ==> 7 5 3<br>\n7 8 9     8 9 6<br>\n</pre>\n"}, {"tags": ["python", "google-maps", "pip"], "comments": [{"owner": {"reputation": 2070, "user_id": 378704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5318a95a23ff8a67c0edc171412c83a?s=128&d=identicon&r=PG", "display_name": "kiran.koduru", "link": "https://stackoverflow.com/users/378704/kiran-koduru"}, "edited": false, "score": 0, "creation_date": 1504124954, "post_id": 45969147, "comment_id": 78897615, "body": "Can you paste the output of <code>pip freeze</code> please?"}, {"owner": {"reputation": 517, "user_id": 6087589, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/508f85f9b3e192f11456dbff7a6a840c?s=128&d=identicon&r=PG&f=1", "display_name": "anitasp", "link": "https://stackoverflow.com/users/6087589/anitasp"}, "reply_to_user": {"reputation": 2070, "user_id": 378704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5318a95a23ff8a67c0edc171412c83a?s=128&d=identicon&r=PG", "display_name": "kiran.koduru", "link": "https://stackoverflow.com/users/378704/kiran-koduru"}, "edited": false, "score": 0, "creation_date": 1504131136, "post_id": 45969147, "comment_id": 78900137, "body": "I edited and added that part. Thanks"}], "answers": [{"tags": [], "owner": {"reputation": 45, "user_id": 8529481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4972b68f73aac5597ffd0226e7ea70d2?s=128&d=identicon&r=PG&f=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/8529481/leo"}, "is_accepted": false, "score": 1, "last_activity_date": 1504130039, "creation_date": 1504130039, "answer_id": 45970273, "question_id": 45969147, "link": "https://stackoverflow.com/questions/45969147/install-googlemaps-package-python/45970273#45970273", "title": "install googlemaps package python", "body": "<p>Try <code>python -m pip install GoogleMaps</code></p>\n"}, {"tags": [], "owner": {"reputation": 17922, "user_id": 1977847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2zWQh.png?s=128&g=1", "display_name": "H&#229;ken Lid", "link": "https://stackoverflow.com/users/1977847/h%c3%a5ken-lid"}, "is_accepted": true, "score": 2, "last_activity_date": 1504138463, "last_edit_date": 1504138463, "creation_date": 1504137951, "answer_id": 45971396, "question_id": 45969147, "link": "https://stackoverflow.com/questions/45969147/install-googlemaps-package-python/45971396#45971396", "title": "install googlemaps package python", "body": "<p>Looks like you have a version conflict, which can happen when you install a lot of packages in the same python environment. </p>\n\n<p>To get a full list of outdated packages, use this command:</p>\n\n<pre><code>pip list --outdated --format=columns\n</code></pre>\n\n<p>You can try to upgrade some of your old installed packages in order for this to work. </p>\n\n<pre><code>pip install --upgrade requests idna GoogleMaps\n</code></pre>\n\n<p>Alternatively you can try to install an older version of GoogleMaps</p>\n\n<pre><code>pip install GoogleMaps==2.4 \n</code></pre>\n"}], "owner": {"reputation": 517, "user_id": 6087589, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/508f85f9b3e192f11456dbff7a6a840c?s=128&d=identicon&r=PG&f=1", "display_name": "anitasp", "link": "https://stackoverflow.com/users/6087589/anitasp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6754, "favorite_count": 1, "accepted_answer_id": 45971396, "answer_count": 2, "score": -1, "last_activity_date": 1504138463, "creation_date": 1504124786, "last_edit_date": 1504128893, "question_id": 45969147, "link": "https://stackoverflow.com/questions/45969147/install-googlemaps-package-python", "title": "install googlemaps package python", "body": "<p>I am trying to install GoogleMaps Package    </p>\n\n<pre><code>pip install GoogleMaps\n</code></pre>\n\n<p>I am getting this error:</p>\n\n<pre><code>C:\\Users\\NA401134&gt;pip install GoogleMaps\nCollecting GoogleMaps\n  Using cached googlemaps-2.5.1.tar.gz\n    Complete output from command python setup.py egg_info:\n    warning: no files found matching 'NOTICE'\n\nInstalled c:\\users\\na401134\\appdata\\local\\temp\\pip-build-y5t07ucg\\googlemaps\\.eggs\\requests-2.18.4-py3.5.egg\nSearching for certifi&gt;=2017.4.17\nReading https://pypi.python.org/simple/certifi/\nBest match: certifi 2017.7.27.1\nDownloading https://pypi.python.org/packages/20/d0/3f7a84b0c5b89e94abbd073a5f00c7176089f526edb056686751d5064cbd/certifi-2017.7.27.1.tar.gz#md5=48e8370da8b370a16e223ee9c7b6b063\nProcessing certifi-2017.7.27.1.tar.gz\nWriting C:\\Users\\NA401134\\AppData\\Local\\Temp\\easy_install-ttda9z_e\\certifi-2017.7.27.1\\setup.cfg\nRunning certifi-2017.7.27.1\\setup.py -q bdist_egg --dist-dir C:\\Users\\NA401134\\AppData\\Local\\Temp\\easy_install-ttda9z_e\\certifi-2017.7.27.1\\egg-dist-tmp-k3p_29q4\ncreating c:\\users\\na401134\\appdata\\local\\temp\\pip-build-y5t07ucg\\googlemaps\\.eggs\\certifi-2017.7.27.1-py3.5.egg\nExtracting certifi-2017.7.27.1-py3.5.egg to c:\\users\\na401134\\appdata\\local\\temp\\pip-build-y5t07ucg\\googlemaps\\.eggs\n\nInstalled c:\\users\\na401134\\appdata\\local\\temp\\pip-build-y5t07ucg\\googlemaps\\.eggs\\certifi-2017.7.27.1-py3.5.egg\nSearching for urllib3&lt;1.23,&gt;=1.21.1\nReading https://pypi.python.org/simple/urllib3/\nBest match: urllib3 1.22\nDownloading https://pypi.python.org/packages/ee/11/7c59620aceedcc1ef65e156cc5ce5a24ef87be4107c2b74458464e437a5d/urllib3-1.22.tar.gz#md5=0da7bed3fe94bf7dc59ae37885cc72f7\nProcessing urllib3-1.22.tar.gz\nWriting C:\\Users\\NA401134\\AppData\\Local\\Temp\\easy_install-n_pau25n\\urllib3-1.22\\setup.cfg\nRunning urllib3-1.22\\setup.py -q bdist_egg --dist-dir C:\\Users\\NA401134\\AppData\\Local\\Temp\\easy_install-n_pau25n\\urllib3-1.22\\egg-dist-tmp-on1foee6\nc:\\anaconda\\lib\\site-packages\\setuptools-23.0.0-py3.5.egg\\setuptools\\dist.py:285: UserWarning: Normalizing '2017.07.27.1' to '2017.7.27.1'\nwarning: no previously-included files matching '*' found under directory 'docs\\_build'\nzip_safe flag not set; analyzing archive contents...\nurllib3.packages.__pycache__.six.cpython-35: module references __path__\ncreating c:\\users\\na401134\\appdata\\local\\temp\\pip-build-y5t07ucg\\googlemaps\\.eggs\\urllib3-1.22-py3.5.egg\nExtracting urllib3-1.22-py3.5.egg to c:\\users\\na401134\\appdata\\local\\temp\\pip-build-y5t07ucg\\googlemaps\\.eggs\n\nInstalled c:\\users\\na401134\\appdata\\local\\temp\\pip-build-y5t07ucg\\googlemaps\\.eggs\\urllib3-1.22-py3.5.egg\nTraceback (most recent call last):\n  File \"&lt;string&gt;\", line 1, in &lt;module&gt;\n  File \"C:\\Users\\NA401134\\AppData\\Local\\Temp\\pip-build-y5t07ucg\\GoogleMaps\\setup.py\", line 39, in &lt;module&gt;\n    'Topic :: Internet',\n  File \"c:\\anaconda\\lib\\distutils\\core.py\", line 108, in setup\n    _setup_distribution = dist = klass(attrs)\n  File \"c:\\anaconda\\lib\\site-packages\\setuptools-23.0.0-py3.5.egg\\setuptools\\dist.py\", line 269, in __init__\n  File \"c:\\anaconda\\lib\\site-packages\\setuptools-23.0.0-py3.5.egg\\setuptools\\dist.py\", line 313, in fetch_build_eggs\n  File \"c:\\anaconda\\lib\\site-packages\\setuptools-23.0.0-py3.5.egg\\pkg_resources\\__init__.py\", line 826, in resolve\n  File \"c:\\anaconda\\lib\\site-packages\\setuptools-23.0.0-py3.5.egg\\pkg_resources\\__init__.py\", line 1085, in best_match\n  File \"c:\\anaconda\\lib\\site-packages\\setuptools-23.0.0-py3.5.egg\\pkg_resources\\__init__.py\", line 695, in find\npkg_resources.VersionConflict: (idna 2.1 (c:\\anaconda\\lib\\site-packages), Requirement.parse('idna&lt;2.7,&gt;=2.5'))\n\n----------------------------------------\nCommand \"python setup.py egg_info\" failed with error code 1 in C:\\Users\\NA401134\\AppData\\Local\\Temp\\pip-build-y5t07ucg\\GoogleMaps\\\n</code></pre>\n\n<p>If I run pip freeze I get:</p>\n\n<pre><code>C:\\Users\\NA401134&gt;pip freeze\nalabaster==0.7.8\nanaconda-client==1.4.0\nanaconda-navigator==1.2.1\nargcomplete==1.0.0\nastropy==1.2.1\nBabel==2.3.3\nbackports.shutil-get-terminal-size==1.0.0\nbeautifulsoup4==4.4.1\nbitarray==0.8.1\nblaze==0.10.1\nbokeh==0.12.0\nboto==2.40.0\nBottleneck==1.1.0\ncffi==1.6.0\nchest==0.2.3\nclick==6.6\ncloudpickle==0.2.1\nclyent==1.2.2\ncolorama==0.3.7\ncomtypes==1.1.2\nconda==4.1.6\nconda-build==1.21.3\nconda-env==2.5.0a0\nconfigobj==5.0.6\ncontextlib2==0.5.3\ncryptography==1.4\ncycler==0.10.0\nCython==0.24\ncytoolz==0.8.0\ndask==0.10.0\ndatashape==0.5.2\ndecorator==4.0.10\ndill==0.2.5\ndocutils==0.12\ndynd===c328ab7\net-xmlfile==1.0.1\nfastcache==1.0.2\nFlask==0.11.1\nFlask-Cors==2.1.2\ngevent==1.1.1\ngreenlet==0.4.10\nh5py==2.6.0\nHeapDict==1.0.0\nidna==2.1\nimagesize==0.7.1\nipykernel==4.3.1\nipython==4.2.0\nipython-genutils==0.1.0\nipywidgets==4.1.1\nitsdangerous==0.24\njdcal==1.2\njedi==0.9.0\nJinja2==2.8\njsonschema==2.5.1\njupyter==1.0.0\njupyter-client==4.3.0\njupyter-console==4.1.1\njupyter-core==4.1.0\nllvmlite==0.11.0\nlocket==0.2.0\nlxml==3.6.0\nMarkupSafe==0.23\nmatplotlib==1.5.1\nmenuinst==1.4.1\nmistune==0.7.2\nmpmath==0.19\nmultipledispatch==0.4.8\nnb-anacondacloud==1.1.0\nnb-conda==1.1.0\nnb-conda-kernels==1.0.3\nnbconvert==4.2.0\nnbformat==4.0.1\nnbpresent==3.0.2\nnetworkx==1.11\nnltk==3.2.1\nnose==1.3.7\nnotebook==4.2.1\nnumba==0.26.0\nnumexpr==2.6.0\nnumpy==1.11.1\nodo==0.5.0\nopenpyxl==2.3.2\npandas==0.18.1\npartd==0.3.4\npath.py==0.0.0\npathlib2==2.1.0\npatsy==0.4.1\npep8==1.7.0\npickleshare==0.7.2\nPillow==3.2.0\nply==3.8\npsutil==4.3.0\npy==1.4.31\npyasn1==0.1.9\npycosat==0.6.1\npycparser==2.14\npycrypto==2.6.1\npycurl==7.43.0\npyflakes==1.2.3\nPygments==2.1.3\npyOpenSSL==16.0.0\npyparsing==2.1.4\npyreadline==2.1\npytest==2.9.2\npython-dateutil==2.5.3\npytz==2016.4\npywin32==220\nPyYAML==3.11\npyzmq==15.2.0\nqtconsole==4.2.1\nQtPy==1.0.2\nrequests==2.10.0\nrope-py3k==0.9.4.post1\nruamel-yaml===-VERSION\nscikit-image==0.12.3\nscikit-learn==0.17.1\nscipy==0.17.1\nsimplegeneric==0.8.1\nsingledispatch==3.4.0.3\nsix==1.10.0\nsnowballstemmer==1.2.1\nsockjs-tornado==1.0.3\nSphinx==1.3.1\nsphinx-rtd-theme==0.1.9\nspyder==2.3.9\nSQLAlchemy==1.0.13\nstatsmodels==0.6.1\nsympy==1.0\ntables==3.2.2\ntoolz==0.8.0\ntornado==4.3\ntraitlets==4.2.1\nunicodecsv==0.14.1\nWerkzeug==0.11.10\nxlrd==1.0.0\nXlsxWriter==0.9.2\nxlwings==0.7.2\nxlwt==1.1.2\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "pandas", "scipy", "distribution"], "comments": [{"owner": {"reputation": 7436, "user_id": 5514476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hP6t0.jpg?s=128&g=1", "display_name": "DJK", "link": "https://stackoverflow.com/users/5514476/djk"}, "edited": false, "score": 0, "creation_date": 1504127747, "post_id": 45969140, "comment_id": 78898892, "body": "Are you just looking to estimate lambda?"}, {"owner": {"reputation": 7436, "user_id": 5514476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hP6t0.jpg?s=128&g=1", "display_name": "DJK", "link": "https://stackoverflow.com/users/5514476/djk"}, "edited": false, "score": 0, "creation_date": 1504128884, "post_id": 45969140, "comment_id": 78899355, "body": "Ok, but all of those parameters can be calculated with mean and variance, so it would just require you to run those calculations"}, {"owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "edited": false, "score": 1, "creation_date": 1504134656, "post_id": 45969140, "comment_id": 78901133, "body": "I think it would help to first give a clear mathematical formulation of the problem. <i>Then</i> figure out how to implement it.  The question <i>&quot;Is it possible to use the distributions&#39; .fit method to estimate parameters, that in some way incorporates exponential weightings?&quot;</i> seems too vague."}, {"owner": {"reputation": 18838, "user_id": 333700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad13088a623822caf74e635a68a55eae?s=128&d=identicon&r=PG", "display_name": "Josef", "link": "https://stackoverflow.com/users/333700/josef"}, "edited": false, "score": 0, "creation_date": 1504232550, "post_id": 45969140, "comment_id": 78944898, "body": "short answer: You need to rewrite the distribution <code>fit</code> function to allow for weights. There are currently no weights allowed and all observations are treated as independently and identically distributed observations coming from the given distribution. (i.e. weighted MLE not just weighted method of moments to compute the shape parameters)"}, {"owner": {"reputation": 28612, "user_id": 7954504, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/6POkt.jpg?s=128&g=1", "display_name": "Brad Solomon", "link": "https://stackoverflow.com/users/7954504/brad-solomon"}, "reply_to_user": {"reputation": 18838, "user_id": 333700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad13088a623822caf74e635a68a55eae?s=128&d=identicon&r=PG", "display_name": "Josef", "link": "https://stackoverflow.com/users/333700/josef"}, "edited": false, "score": 0, "creation_date": 1504233148, "post_id": 45969140, "comment_id": 78944994, "body": "@user333700 Do you think my answer below at least somewhat mimics that approach? (Granted, the bootstrapping I&#39;m using is an intermediate step that wouldn&#39;t happen in your approach.)"}, {"owner": {"reputation": 18838, "user_id": 333700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad13088a623822caf74e635a68a55eae?s=128&d=identicon&r=PG", "display_name": "Josef", "link": "https://stackoverflow.com/users/333700/josef"}, "edited": false, "score": 0, "creation_date": 1504240962, "post_id": 45969140, "comment_id": 78946641, "body": "Yes, it has the same structure (I guess it has the same large sample properties but different small sample properties, with maybe some small sample bias correction if the parameters estimates are the mean of the bootstrap samples.)"}], "answers": [{"tags": [], "owner": {"reputation": 28612, "user_id": 7954504, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/6POkt.jpg?s=128&g=1", "display_name": "Brad Solomon", "link": "https://stackoverflow.com/users/7954504/brad-solomon"}, "is_accepted": true, "score": 0, "last_activity_date": 1504146005, "creation_date": 1504146005, "answer_id": 45972264, "question_id": 45969140, "link": "https://stackoverflow.com/questions/45969140/scipy-can-you-incorporate-exponential-weighting-into-distribution-fitting/45972264#45972264", "title": "Scipy: Can you incorporate exponential weighting into distribution fitting?", "body": "<p>Here is my implementation:</p>\n\n<ul>\n<li>Given an empirical distribution <code>x</code>, assign exponential weights to each <code>x</code>.</li>\n<li>Use these weights to bootstrap sample a new distribution.  The weights are the <code>p</code> parameter to <code>np.random.choice</code>.</li>\n<li>The <code>.fit</code> method of any distribution can then be called on that bootstrapped data.</li>\n</ul>\n\n<h2>Code:</h2>\n\n<pre><code>def ewm_weights(i, alpha):\n    w = (1 - alpha) ** np.arange(i)[::-1]\n    w /= w.sum()\n    return w\n\ndef bootstrap(a, alpha, size=None):\n    p = ewm_weights(i=len(a), alpha=alpha)\n    return np.random.choice(a=a, size=size, p=p)\n</code></pre>\n\n<p>The definition of <code>ewm_weights</code> follows:</p>\n\n<p><a href=\"http://pandas.pydata.org/pandas-docs/stable/computation.html#exponentially-weighted-windows\" rel=\"nofollow noreferrer\">http://pandas.pydata.org/pandas-docs/stable/computation.html#exponentially-weighted-windows</a></p>\n\n<p>with <code>adjust=True</code>.</p>\n\n<h2>Example:</h2>\n\n<pre><code># Create a nonstationary `x` variable with larger mean and stdev in period 2\nx1 = np.random.normal(loc=4, scale=3, size=1000)\nx2 = np.random.normal(loc=10, scale=5, size=1000)\nx = np.hstack((x1,x2))\n</code></pre>\n\n<p>The histogram of <code>x</code> looks like this:</p>\n\n<pre><code>plt.hist(x, bins=25)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/CWQqv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CWQqv.png\" alt=\"enter image description here\"></a></p>\n\n<p>While a bootstrapped <code>b</code> with <code>alpha=0.03</code> looks like:</p>\n\n<pre><code>b = bootstrap(x, alpha=0.03, size=int(1e6))\nplt.hist(b, bins=25)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/rqVsB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rqVsB.png\" alt=\"enter image description here\"></a></p>\n\n<p>Any continuous distribution from <code>scipy.stats._continuous_distns._distn_names</code> can then be fit to <code>b</code>.</p>\n\n<h2>Issues:</h2>\n\n<ul>\n<li>A softmax function might make <code>ewm_weights</code> safer.</li>\n<li>This approach ignores autocorrelation in <code>x</code>.</li>\n</ul>\n"}], "owner": {"reputation": 28612, "user_id": 7954504, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/6POkt.jpg?s=128&g=1", "display_name": "Brad Solomon", "link": "https://stackoverflow.com/users/7954504/brad-solomon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 732, "favorite_count": 0, "accepted_answer_id": 45972264, "answer_count": 1, "score": 0, "last_activity_date": 1504184366, "creation_date": 1504124765, "last_edit_date": 1504184366, "question_id": 45969140, "link": "https://stackoverflow.com/questions/45969140/scipy-can-you-incorporate-exponential-weighting-into-distribution-fitting", "title": "Scipy: Can you incorporate exponential weighting into distribution fitting?", "body": "<p>Given some time series data:</p>\n\n<pre><code>np.random.seed(123)\nr = pd.Series(np.random.beta(a=0.5, b=0.5, size=1000),\n              index=pd.date_range('2013', periods=1000))\n</code></pre>\n\n<p>and the distributions within <code>scipy.stats._continuous_distns._distn_names</code>:</p>\n\n<pre><code>import scipy.stats as scs\ndists = scs._continuous_distns._distn_names\n</code></pre>\n\n<p>I would like to be able to establish a new distribution, and then call it's <code>.ppf</code> (percent point function), while incorporating exponential weights into the building of the distribution.</p>\n\n<p>For example, with a <a href=\"https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.norm.html\" rel=\"nofollow noreferrer\">normal</a> distribution, this would just entail estimating an exponentially-weighted mean and standard deviation:</p>\n\n<blockquote>\n  <p>All continuous distributions take loc and scale as keyword parameters\n  to adjust the location and scale of the distribution, e.g. for the\n  standard normal distribution the location is the mean and the scale is\n  the standard deviation. <a href=\"https://docs.scipy.org/doc/scipy/reference/tutorial/stats.html#shifting-and-scaling\" rel=\"nofollow noreferrer\">[source]</a></p>\n</blockquote>\n\n<pre><code>ewm = r.ewm(span=60)\nloc = ewm.mean().iloc[-1]\nscale = ewm.std().iloc[-1]\nprint(scs.norm.ppf(q=0.05, loc=loc, scale=scale))\n-0.196734019969\n</code></pre>\n\n<p>But I would like to be able to extend this to the broader family of continuous distributions where other parameters (<code>shape</code>) are often involved.  For instance,</p>\n\n<ul>\n<li><a href=\"https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.johnsonsu.html\" rel=\"nofollow noreferrer\">johnsonsu</a> has parameters <code>a</code>, <code>b</code>, <code>loc</code>, <code>scale</code>;</li>\n<li><a href=\"https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.bradford.html\" rel=\"nofollow noreferrer\">bradford</a> has parameters <code>c</code>, <code>loc</code>, <code>scale</code>;</li>\n<li><a href=\"https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.burr.html\" rel=\"nofollow noreferrer\">burr</a> has parameters <code>c</code>, <code>d</code>, <code>loc</code>, <code>scale</code>.</li>\n</ul>\n\n<p>How could I extend this process to <a href=\"https://docs.scipy.org/doc/scipy/reference/stats.html#continuous-distributions\" rel=\"nofollow noreferrer\">distributions</a> that have parameters besides <code>loc</code> and <code>scale</code>?</p>\n\n<p>Combined snippets from above:</p>\n\n<pre><code>import scipy.stats as scs\nimport numpy as np\nimport pandas as pd\nnp.random.seed(123)\nr = pd.Series(np.random.beta(a=0.5, b=0.5, size=1000),\n              index=pd.date_range('2013', periods=1000))\newm = r.ewm(span=60)\nloc = ewm.mean().iloc[-1]\nscale = ewm.std().iloc[-1]\nprint(scs.norm.ppf(q=0.05, loc=loc, scale=scale))\n# -0.196734019969\n</code></pre>\n"}, {"tags": ["javascript", "python", "forms", "selenium", "web-scraping"], "comments": [{"owner": {"reputation": 11736, "user_id": 1987838, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2tIuS.jpg?s=128&g=1", "display_name": "Hackerman", "link": "https://stackoverflow.com/users/1987838/hackerman"}, "edited": false, "score": 0, "creation_date": 1504124988, "post_id": 45969130, "comment_id": 78897635, "body": "It&#39;s not a form, it&#39;s a table"}, {"owner": {"reputation": 303, "user_id": 6700311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/VAIJZ.jpg?s=128&g=1", "display_name": "Thales Marques", "link": "https://stackoverflow.com/users/6700311/thales-marques"}, "reply_to_user": {"reputation": 11736, "user_id": 1987838, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2tIuS.jpg?s=128&g=1", "display_name": "Hackerman", "link": "https://stackoverflow.com/users/1987838/hackerman"}, "edited": false, "score": 0, "creation_date": 1504125180, "post_id": 45969130, "comment_id": 78897731, "body": "@Hackerman Any idea about how can I interact with this table? Inspecting the elements made me believe that all of them are forms, but I&#39;m really new in the javascript world."}, {"owner": {"reputation": 11736, "user_id": 1987838, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2tIuS.jpg?s=128&g=1", "display_name": "Hackerman", "link": "https://stackoverflow.com/users/1987838/hackerman"}, "edited": false, "score": 0, "creation_date": 1504125515, "post_id": 45969130, "comment_id": 78897884, "body": "Try with, <code>data = driver.find_element_by_name(&#39;Dt_Ref&#39;)</code>"}, {"owner": {"reputation": 303, "user_id": 6700311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/VAIJZ.jpg?s=128&g=1", "display_name": "Thales Marques", "link": "https://stackoverflow.com/users/6700311/thales-marques"}, "reply_to_user": {"reputation": 11736, "user_id": 1987838, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2tIuS.jpg?s=128&g=1", "display_name": "Hackerman", "link": "https://stackoverflow.com/users/1987838/hackerman"}, "edited": false, "score": 0, "creation_date": 1504125875, "post_id": 45969130, "comment_id": 78898048, "body": "@Hackerman I&#39;ve already done that. I believe that I&#39;m missing something in the html code, because dt_ref doesn&#39;t appear there, only in the chrome&#39;s inspection. Following your advice I&#39;ve got this error: selenium.common.exceptions.NoSuchElementException: Message: {&quot;errorMessage&quot;:&quot;Unable to find element with name &#39;dt_ref&#39;&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 303, "user_id": 6700311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/VAIJZ.jpg?s=128&g=1", "display_name": "Thales Marques", "link": "https://stackoverflow.com/users/6700311/thales-marques"}, "edited": false, "score": 0, "creation_date": 1504130059, "post_id": 45970078, "comment_id": 78899788, "body": "I believe i&#39;ve solved this step by another way. I found the &quot;second page&quot; <a href=\"http://www.anbima.com.br/reune/reune.asp\" rel=\"nofollow noreferrer\">anbima.com.br/reune/reune.asp</a> but still can&#39;t scrap the Dt_Ref element. When i check the html of this link, all the information are there, but I cant scrap it. The error that was shown before is because the driver can&#39;t find the element, but now this is the error: selenium.common.exceptions.WebDriverExceptio"}, {"owner": {"reputation": 46903, "user_id": 4549554, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/Vxi1i.jpg?s=128&g=1", "display_name": "Andersson", "link": "https://stackoverflow.com/users/4549554/andersson"}, "reply_to_user": {"reputation": 303, "user_id": 6700311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/VAIJZ.jpg?s=128&g=1", "display_name": "Thales Marques", "link": "https://stackoverflow.com/users/6700311/thales-marques"}, "edited": false, "score": 0, "creation_date": 1504130313, "post_id": 45970078, "comment_id": 78899872, "body": "My code works on both pages (on second without switching) for me. Can you share the complete exception log?"}, {"owner": {"reputation": 303, "user_id": 6700311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/VAIJZ.jpg?s=128&g=1", "display_name": "Thales Marques", "link": "https://stackoverflow.com/users/6700311/thales-marques"}, "edited": false, "score": 0, "creation_date": 1504130665, "post_id": 45970078, "comment_id": 78899999, "body": "Sure. I edited the question because the error is too long to post on comments."}, {"owner": {"reputation": 46903, "user_id": 4549554, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/Vxi1i.jpg?s=128&g=1", "display_name": "Andersson", "link": "https://stackoverflow.com/users/4549554/andersson"}, "reply_to_user": {"reputation": 303, "user_id": 6700311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/VAIJZ.jpg?s=128&g=1", "display_name": "Thales Marques", "link": "https://stackoverflow.com/users/6700311/thales-marques"}, "edited": false, "score": 0, "creation_date": 1504130850, "post_id": 45970078, "comment_id": 78900068, "body": "Are you sure that <a href=\"http://pythonscraping.com/pages/files/form.html\" rel=\"nofollow noreferrer\">this</a> is exact page you want to handle? It seem to be some test page... there is no iframes on that page"}, {"owner": {"reputation": 303, "user_id": 6700311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/VAIJZ.jpg?s=128&g=1", "display_name": "Thales Marques", "link": "https://stackoverflow.com/users/6700311/thales-marques"}, "edited": false, "score": 0, "creation_date": 1504131290, "post_id": 45970078, "comment_id": 78900183, "body": "Sorry. I added the wrong page. That&#39;s what I was practicing."}, {"owner": {"reputation": 303, "user_id": 6700311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/VAIJZ.jpg?s=128&g=1", "display_name": "Thales Marques", "link": "https://stackoverflow.com/users/6700311/thales-marques"}, "edited": false, "score": 0, "creation_date": 1504131573, "post_id": 45970078, "comment_id": 78900267, "body": "I updated the question, now is the right codes but with errors."}, {"owner": {"reputation": 46903, "user_id": 4549554, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/Vxi1i.jpg?s=128&g=1", "display_name": "Andersson", "link": "https://stackoverflow.com/users/4549554/andersson"}, "reply_to_user": {"reputation": 303, "user_id": 6700311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/VAIJZ.jpg?s=128&g=1", "display_name": "Thales Marques", "link": "https://stackoverflow.com/users/6700311/thales-marques"}, "edited": false, "score": 0, "creation_date": 1504165052, "post_id": 45970078, "comment_id": 78910180, "body": "This seem to be PhantomJS issue. Is it mandatory to use headless browser? In Chrome solution works fine..."}, {"owner": {"reputation": 303, "user_id": 6700311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/VAIJZ.jpg?s=128&g=1", "display_name": "Thales Marques", "link": "https://stackoverflow.com/users/6700311/thales-marques"}, "edited": false, "score": 0, "creation_date": 1504185499, "post_id": 45970078, "comment_id": 78924387, "body": "I has. I&#39;m working under a bank proxy. It has to be a headless browser and I can download ChromeDriver under my network."}, {"owner": {"reputation": 303, "user_id": 6700311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/VAIJZ.jpg?s=128&g=1", "display_name": "Thales Marques", "link": "https://stackoverflow.com/users/6700311/thales-marques"}, "edited": false, "score": 0, "creation_date": 1504191718, "post_id": 45970078, "comment_id": 78928939, "body": "I think it could be a nodes problem. I Can&#39;t map the element because it is under another element. Makes sense? Have you tried your code in phantomJS?"}, {"owner": {"reputation": 46903, "user_id": 4549554, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/Vxi1i.jpg?s=128&g=1", "display_name": "Andersson", "link": "https://stackoverflow.com/users/4549554/andersson"}, "reply_to_user": {"reputation": 303, "user_id": 6700311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/VAIJZ.jpg?s=128&g=1", "display_name": "Thales Marques", "link": "https://stackoverflow.com/users/6700311/thales-marques"}, "edited": false, "score": 0, "creation_date": 1504194105, "post_id": 45970078, "comment_id": 78930637, "body": "I tried it with PhantomJS and got the same exception. It doesn&#39;t seem to be overlapped by another element. Also I made a screenshot and it looks ok. PhantomJS is not much reliable and has a lot of issues, so it&#39;s better just not to use it... You can try to use <a href=\"https://duo.com/blog/driving-headless-chrome-with-python\" rel=\"nofollow noreferrer\">headless Chrome</a> instead"}], "tags": [], "owner": {"reputation": 46903, "user_id": 4549554, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/Vxi1i.jpg?s=128&g=1", "display_name": "Andersson", "link": "https://stackoverflow.com/users/4549554/andersson"}, "is_accepted": true, "score": 2, "last_activity_date": 1504129092, "creation_date": 1504129092, "answer_id": 45970078, "question_id": 45969130, "link": "https://stackoverflow.com/questions/45969130/cant-find-forms-inside-a-html-code-web-scraping-with-python-and-selenium/45970078#45970078", "title": "Can&#39;t find forms inside a html code - Web Scraping with Python and Selenium", "body": "<p>To be able to handle elements inside <code>form</code> you need to switch to <code>iframe</code> first:</p>\n\n<pre><code>driver.switch_to.frame(driver.find_element_by_xpath('//iframe[@class=\"full\"]'))\ndata = driver.find_element_by_name('Dt_Ref')\ndata.clear()\ndata.send_keys('21/08/2017')\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 46903, "user_id": 4549554, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/Vxi1i.jpg?s=128&g=1", "display_name": "Andersson", "link": "https://stackoverflow.com/users/4549554/andersson"}, "edited": false, "score": 0, "creation_date": 1504161143, "post_id": 45973497, "comment_id": 78907975, "body": "How can it solve the issue? In Python there is no matter whether you use single or double quotes"}], "tags": [], "owner": {"reputation": 364, "user_id": 8256942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51ca2ed53167ed224311e930fc1a9f7b?s=128&d=identicon&r=PG&f=1", "display_name": "Kapil", "link": "https://stackoverflow.com/users/8256942/kapil"}, "is_accepted": false, "score": -1, "last_activity_date": 1504155589, "creation_date": 1504155589, "answer_id": 45973497, "question_id": 45969130, "link": "https://stackoverflow.com/questions/45969130/cant-find-forms-inside-a-html-code-web-scraping-with-python-and-selenium/45973497#45973497", "title": "Can&#39;t find forms inside a html code - Web Scraping with Python and Selenium", "body": "<p>I think you messed up with single and double quotes. Correct code would be-</p>\n\n<pre><code>driver.get(\"http://www.anbima.com.br/reune/reune.asp\")\ndata = driver.find_element_by_name(\"Dt_Ref\")\ndata.clear()\ndata.send_keys(\"21/08/2017\")\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 403, "user_id": 8227391, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/ipoeD.jpg?s=128&g=1", "display_name": "Tetora", "link": "https://stackoverflow.com/users/8227391/tetora"}, "edited": false, "score": 0, "creation_date": 1504265315, "post_id": 45988231, "comment_id": 78958554, "body": "I&#39;d say your question is pretty much resolved then.  You should mark Andersson&#39;s answer as the accepted solution as he helped bug test it for you and try the headless chrome link he provided."}], "tags": [], "owner": {"reputation": 303, "user_id": 6700311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/VAIJZ.jpg?s=128&g=1", "display_name": "Thales Marques", "link": "https://stackoverflow.com/users/6700311/thales-marques"}, "is_accepted": false, "score": 0, "last_activity_date": 1504205395, "creation_date": 1504205395, "answer_id": 45988231, "question_id": 45969130, "link": "https://stackoverflow.com/questions/45969130/cant-find-forms-inside-a-html-code-web-scraping-with-python-and-selenium/45988231#45988231", "title": "Can&#39;t find forms inside a html code - Web Scraping with Python and Selenium", "body": "<p>Just to update:</p>\n\n<p>Problem not solved, but I know what is.</p>\n\n<p>It's a bug in phantomJS that is occurring. So, if you have the same problem, try to use Chrome or Firefox.</p>\n\n<p>Thanks for the answers.</p>\n"}], "owner": {"reputation": 303, "user_id": 6700311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/VAIJZ.jpg?s=128&g=1", "display_name": "Thales Marques", "link": "https://stackoverflow.com/users/6700311/thales-marques"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 194, "favorite_count": 0, "accepted_answer_id": 45970078, "answer_count": 3, "score": 1, "last_activity_date": 1504205395, "creation_date": 1504124732, "last_edit_date": 1504131532, "question_id": 45969130, "link": "https://stackoverflow.com/questions/45969130/cant-find-forms-inside-a-html-code-web-scraping-with-python-and-selenium", "title": "Can&#39;t find forms inside a html code - Web Scraping with Python and Selenium", "body": "<p>I'm trying to scrap <a href=\"http://www.anbima.com.br/pt_br/informar/sistema-reune.htm\" rel=\"nofollow noreferrer\">this website</a>, but there are some forms to fill.</p>\n\n<p>The mainly objective is to fill these 5 forms (one appears after selecting another) and download the data through the button \"Consultar\".</p>\n\n<p>This forms are coded in javascript and I can't find them in the page's html code. When I inspect the frames trough Google Chrome, I find the forms ID's, but the code doesn't find them.</p>\n\n<p>I have just a prototype of my code. I can't advance without knowing what I can do to find these forms.</p>\n\n<pre><code>from selenium import webdriver\nfrom bs4 import BeautifulSoup\nimport time\nimport os\n\n#Variables\n\nurl = 'http://www.anbima.com.br/pt_br/informar/sistema-reune.htm'\npath_phantom = 'C:\\\\Users\\\\TBMEPYG\\\\AppData\\\\Local\\\\Continuum\\\\Anaconda3\\\\Lib\\\\site-packages\\\\phantomjs-2.1.1-windows\\\\bin\\\\phantomjs.exe'\n\n#Processing\n\ndriver = webdriver.PhantomJS(executable_path= path_phantom)\n\ndriver.get(url)\n\ndata = driver.find_element_by_id('data_ref')\n\ndata.send_keys(\"21/08/2017\")\n\ndriver.quit()\n</code></pre>\n\n<p>Edit:</p>\n\n<p>I updated the code to this:</p>\n\n<pre><code>    from selenium import webdriver\n\n    path_phantom = 'C:\\\\Users\\\\TBMEPYG\\\\AppData\\\\Local\\\\Continuum\\\\Anaconda3\\\\Lib\\\\site-packages\\\\phantomjs-2.1.1-windows\\\\bin\\\\phantomjs.exe'\n    driver = webdriver.PhantomJS(executable_path= path_phantom)\n    driver.get('http://www.anbima.com.br/reune/reune.asp')\n\n\n    driver.switch_to.frame(driver.find_element_by_xpath('//iframe[@class=\"full\"]'))\n    data = driver.find_element_by_name('Dt_Ref')\n    data.clear()\n    data.send_keys('21/08/\n</code></pre>\n\n<p>And I got this error:</p>\n\n<pre><code>CD: C:\\Users\\TBMEPYG\\AppData\\Local\\Continuum\\Anaconda3\nCurrent directory: C:\\Users\\TBMEPYG\\AppData\\Local\\Continuum\\Anaconda3\npython \"C:\\Users\\TBMEPYG\\Desktop\\vamo.py\"\nProcess started &gt;&gt;&gt;\nTraceback (most recent call last):\n  File \"C:\\Users\\TBMEPYG\\Desktop\\vamo.py\", line 8, in &lt;module&gt;\n    data = driver.find_element_by_name('Dt_Ref')\n  File \"C:\\Users\\TBMEPYG\\AppData\\Local\\Continuum\\Anaconda3\\lib\\site-packages\\selenium\\webdriver\\remote\\webdriver.py\", line 426, in find_element_by_name\n    return self.find_element(by=By.NAME, value=name)\n  File \"C:\\Users\\TBMEPYG\\AppData\\Local\\Continuum\\Anaconda3\\lib\\site-packages\\selenium\\webdriver\\remote\\webdriver.py\", line 832, in find_element\n    'value': value})['value']\n  File \"C:\\Users\\TBMEPYG\\AppData\\Local\\Continuum\\Anaconda3\\lib\\site-packages\\selenium\\webdriver\\remote\\webdriver.py\", line 297, in execute\n    self.error_handler.check_response(response)\n  File \"C:\\Users\\TBMEPYG\\AppData\\Local\\Continuum\\Anaconda3\\lib\\site-packages\\selenium\\webdriver\\remote\\errorhandler.py\", line 194, in check_response\n    raise exception_class(message, screen, stacktrace)\nselenium.common.exceptions.NoSuchElementException: Message: {\"errorMessage\":\"Unable to find element with name 'Dt_Ref'\",\"request\":{\"headers\":{\"Accept\":\"application/json\",\"Accept-Encoding\":\"identity\",\"Connection\":\"close\",\"Content-Length\":\"89\",\"Content-Type\":\"application/json;charset=UTF-8\",\"Host\":\"127.0.0.1:62040\",\"User-Agent\":\"Python http auth\"},\"httpVersion\":\"1.1\",\"method\":\"POST\",\"post\":\"{\\\"using\\\": \\\"name\\\", \\\"value\\\": \\\"Dt_Ref\\\", \\\"sessionId\\\": \\\"bdd3fc70-8dd0-11e7-aeb1-85b8cfbe0d1c\\\"}\",\"url\":\"/element\",\"urlParsed\":{\"anchor\":\"\",\"query\":\"\",\"file\":\"element\",\"directory\":\"/\",\"path\":\"/element\",\"relative\":\"/element\",\"port\":\"\",\"host\":\"\",\"password\":\"\",\"user\":\"\",\"userInfo\":\"\",\"authority\":\"\",\"protocol\":\"\",\"source\":\"/element\",\"queryKey\":{},\"chunks\":[\"element\"]},\"urlOriginal\":\"/session/bdd3fc70-8dd0-11e7-aeb1-85b8cfbe0d1c/element\"}}\nScreenshot: available via screen\n</code></pre>\n\n<p>Edit2:</p>\n\n<p>Another possibility is to use the link inside of the the mains page <a href=\"http://www.anbima.com.br/reune/reune.asp\" rel=\"nofollow noreferrer\">http://www.anbima.com.br/reune/reune.asp</a></p>\n\n<p>When I changed the code to this, I've got another error</p>\n\n<pre><code>from selenium import webdriver\n\npath_phantom = 'C:\\\\Users\\\\TBMEPYG\\\\AppData\\\\Local\\\\Continuum\\\\Anaconda3\\\\Lib\\\\site-packages\\\\phantomjs-2.1.1-windows\\\\bin\\\\phantomjs.exe'\ndriver = webdriver.PhantomJS(executable_path= path_phantom)\ndriver.get('http://www.anbima.com.br/reune/reune.asp')\n\n\ndata = driver.find_element_by_name('Dt_Ref')\ndata.clear()\ndata.send_keys('21/08/2017')\n</code></pre>\n\n<p>Error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"C:\\Users\\TBMEPYG\\Desktop\\vamo.py\", line 9, in &lt;module&gt;\n    data = driver.find_element_by_name('Dt_Ref')\n  File \"C:\\Users\\TBMEPYG\\AppData\\Local\\Continuum\\Anaconda3\\lib\\site-packages\\selenium\\webdriver\\remote\\webdriver.py\", line 426, in find_element_by_name\n    return self.find_element(by=By.NAME, value=name)\n  File \"C:\\Users\\TBMEPYG\\AppData\\Local\\Continuum\\Anaconda3\\lib\\site-packages\\selenium\\webdriver\\remote\\webdriver.py\", line 832, in find_element\n    'value': value})['value']\n  File \"C:\\Users\\TBMEPYG\\AppData\\Local\\Continuum\\Anaconda3\\lib\\site-packages\\selenium\\webdriver\\remote\\webdriver.py\", line 297, in execute\n    self.error_handler.check_response(response)\n  File \"C:\\Users\\TBMEPYG\\AppData\\Local\\Continuum\\Anaconda3\\lib\\site-packages\\selenium\\webdriver\\remote\\errorhandler.py\", line 194, in check_response\n    raise exception_class(message, screen, stacktrace)\nselenium.common.exceptions.WebDriverException: Message: {\"request\":{\"headers\":{\"Accept\":\"application/json\",\"Accept-Encoding\":\"identity\",\"Connection\":\"close\",\"Content-Length\":\"89\",\"Content-Type\":\"application/json;charset=UTF-8\",\"Host\":\"127.0.0.1:61820\",\"User-Agent\":\"Python http auth\"},\"httpVersion\":\"1.1\",\"method\":\"POST\",\"post\":\"{\\\"using\\\": \\\"name\\\", \\\"value\\\": \\\"Dt_Ref\\\", \\\"sessionId\\\": \\\"e61dd170-8dcf-11e7-a019-41573671066b\\\"}\",\"url\":\"/element\",\"urlParsed\":{\"anchor\":\"\",\"query\":\"\",\"file\":\"element\",\"directory\":\"/\",\"path\":\"/element\",\"relative\":\"/element\",\"port\":\"\",\"host\":\"\",\"password\":\"\",\"user\":\"\",\"userInfo\":\"\",\"authority\":\"\",\"protocol\":\"\",\"source\":\"/element\",\"queryKey\":{},\"chunks\":[\"element\"]},\"urlOriginal\":\"/session/e61dd170-8dcf-11e7-a019-41573671066b/element\"}}\nScreenshot: available via screen\n</code></pre>\n"}, {"tags": ["python", "pandas", "sqlite"], "comments": [{"owner": {"reputation": 673, "user_id": 2816588, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zOAzY.jpg?s=128&g=1", "display_name": "RageCage", "link": "https://stackoverflow.com/users/2816588/ragecage"}, "edited": false, "score": 0, "creation_date": 1504124547, "post_id": 45969054, "comment_id": 78897401, "body": "On which line is this failing?"}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1504126331, "post_id": 45969054, "comment_id": 78898271, "body": "<code>facts.dropna(inplace=True)</code>"}, {"owner": {"reputation": 657, "user_id": 7972317, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/8f1f825eaa5a35923f6e579634e2821d?s=128&d=identicon&r=PG&f=1", "display_name": "\u05de\u05d5\u05e8\u05df \u05e8\u05d6\u05e0\u05d9\u05e7", "link": "https://stackoverflow.com/users/7972317/%d7%9e%d7%95%d7%a8%d7%9f-%d7%a8%d7%96%d7%a0%d7%99%d7%a7"}, "edited": false, "score": 0, "creation_date": 1504126483, "post_id": 45969054, "comment_id": 78898342, "body": "while this might be another problem with my code, it does not solve the error. I stil get: &quot; Wrong number of items passed 215, placement implies 1 &quot;"}], "answers": [{"tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": false, "score": 0, "last_activity_date": 1504145703, "creation_date": 1504145703, "answer_id": 45972227, "question_id": 45969054, "link": "https://stackoverflow.com/questions/45969054/identifying-whats-wrong-with-my-code/45972227#45972227", "title": "Identifying what&#39;s wrong with my code", "body": "<p>Try: </p>\n\n<pre><code>new_pop = pop.values*math.e**(35*(prec.values/100))\n</code></pre>\n"}], "owner": {"reputation": 657, "user_id": 7972317, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/8f1f825eaa5a35923f6e579634e2821d?s=128&d=identicon&r=PG&f=1", "display_name": "\u05de\u05d5\u05e8\u05df \u05e8\u05d6\u05e0\u05d9\u05e7", "link": "https://stackoverflow.com/users/7972317/%d7%9e%d7%95%d7%a8%d7%9f-%d7%a8%d7%96%d7%a0%d7%99%d7%a7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 1, "answer_count": 1, "score": -1, "last_activity_date": 1504145703, "creation_date": 1504124414, "last_edit_date": 1504126197, "question_id": 45969054, "link": "https://stackoverflow.com/questions/45969054/identifying-whats-wrong-with-my-code", "title": "Identifying what&#39;s wrong with my code", "body": "<p>What i'm trying to do is to create a new column that will tell me each country's population in 2015.</p>\n\n<p>The columns of the DF are:</p>\n\n<pre><code>['id', 'code', 'name', 'area', 'area_land', 'area_water', 'population',\n   'population_growth', 'birth_rate', 'death_rate', 'migration_rate',\n   'created_at', 'updated_at']\n</code></pre>\n\n<p>Here it is guys:</p>\n\n<pre><code>import pandas as pd\nimport sqlite3\nimport math\n\ncon = sqlite3.connect(r'C:\\Python34\\factbook.db')\nfacts = pd.read_sql_query('select * from facts;', con)\nfacts.dropna()\nfacts = facts[facts['area_land']!=0][:]\nfacts = facts[facts['population']!=0][:]\n\ndef pop_in_50(name):\n    pop=facts[facts['name']==name]['population']\n    prec = facts[facts['name']==name]['population_growth']\n    new_pop = pop*math.e**(35*(prec/100))\n    return new_pop\n\nfacts['pop_in_2050'] = facts['name'].apply(pop_in_50)\n</code></pre>\n\n<p>It gives the following errror:</p>\n\n<blockquote>\n  <p>ValueError: Wrong number of items passed 259, placement implies 1</p>\n</blockquote>\n"}, {"tags": ["python", "animation", "matplotlib"], "comments": [{"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1504178398, "post_id": 45969026, "comment_id": 78919284, "body": "<i>&quot;Why and how to fix?&quot;</i> How would anyone know without you providing a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> of the issue?"}, {"owner": {"reputation": 36741, "user_id": 258483, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/dd4dee2094dcd427aaec8ee329d9cfd6?s=128&d=identicon&r=PG", "display_name": "Dims", "link": "https://stackoverflow.com/users/258483/dims"}, "reply_to_user": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1504179280, "post_id": 45969026, "comment_id": 78919914, "body": "@ImportanceOfBeingErnest for example, if there is an obvious missing in presented code."}], "owner": {"reputation": 36741, "user_id": 258483, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/dd4dee2094dcd427aaec8ee329d9cfd6?s=128&d=identicon&r=PG", "display_name": "Dims", "link": "https://stackoverflow.com/users/258483/dims"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 114, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1504186169, "creation_date": 1504124303, "last_edit_date": 1504186169, "question_id": 45969026, "link": "https://stackoverflow.com/questions/45969026/animation-save-does-not-save-all-frames-in-matplotlib", "title": "Animation.save does not save all frames in matplotlib", "body": "<p>I have the following code to animate plot:</p>\n\n<pre><code># Creating the Animation object\nline_ani = animation.FuncAnimation(fig, update, frames=generate(), fargs=(lines,),\n                                   interval=5, blit=False)\n\n#plt.show()\nline_ani.save(\"animation.mp4\")\n</code></pre>\n\n<p><code>generate</code> function yields data and <code>update</code> function set this data onto the plot. </p>\n\n<p>When I run this script with <code>plt.show()</code> I see very slow and long animation.</p>\n\n<p>When I run this script with <code>line_ani.save(\"animation.mp4\")</code> it ends very soon and produces very short animation inside <code>mp4</code> file.</p>\n\n<p>Why and how to fix?</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Although script runs without any errors, PyCharms is reporting a warning:</p>\n\n<p><a href=\"https://i.stack.imgur.com/t5xYI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/t5xYI.png\" alt=\"enter image description here\"></a></p>\n\n<blockquote>\n  <p>Expected type 'Optional[int]', got 'Generator[...</p>\n</blockquote>\n"}, {"tags": ["python", "selenium"], "comments": [{"owner": {"reputation": 46903, "user_id": 4549554, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/Vxi1i.jpg?s=128&g=1", "display_name": "Andersson", "link": "https://stackoverflow.com/users/4549554/andersson"}, "edited": false, "score": 0, "creation_date": 1504124488, "post_id": 45968970, "comment_id": 78897367, "body": "Do you have a possibility to get HTML for <code>Export</code> and <code>Excel</code>?"}, {"owner": {"reputation": 111, "user_id": 8126316, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f73d2f14ea82dd8cfbcb0bc35b844fd8?s=128&d=identicon&r=PG&f=1", "display_name": "I.T. Guy", "link": "https://stackoverflow.com/users/8126316/i-t-guy"}, "reply_to_user": {"reputation": 46903, "user_id": 4549554, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/Vxi1i.jpg?s=128&g=1", "display_name": "Andersson", "link": "https://stackoverflow.com/users/4549554/andersson"}, "edited": false, "score": 0, "creation_date": 1504125177, "post_id": 45968970, "comment_id": 78897730, "body": "I updated the question - the &#39;Inspect&#39; option is not available when I right-click on the sub-menu so I just had to assume that this HTML is associated with the &#39;Export&#39; option."}], "answers": [{"comments": [{"owner": {"reputation": 111, "user_id": 8126316, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f73d2f14ea82dd8cfbcb0bc35b844fd8?s=128&d=identicon&r=PG&f=1", "display_name": "I.T. Guy", "link": "https://stackoverflow.com/users/8126316/i-t-guy"}, "edited": false, "score": 0, "creation_date": 1504194848, "post_id": 45973726, "comment_id": 78931149, "body": "Still no luck - but thank you for the response. Maybe I&#39;m looking at the wrong section of HTML code - the &quot;Export&quot; menu must be hidden, meaning I can&#39;t right-click on it and choose &quot;Inspect&quot; from Chrome - right-clicking on it does nothing"}], "tags": [], "owner": {"reputation": 364, "user_id": 8256942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51ca2ed53167ed224311e930fc1a9f7b?s=128&d=identicon&r=PG&f=1", "display_name": "Kapil", "link": "https://stackoverflow.com/users/8256942/kapil"}, "is_accepted": false, "score": 0, "last_activity_date": 1504156848, "creation_date": 1504156848, "answer_id": 45973726, "question_id": 45968970, "link": "https://stackoverflow.com/questions/45968970/hover-over-sub-menu-with-selenium/45973726#45973726", "title": "Hover over sub-menu with Selenium", "body": "<p>Try with below code-</p>\n\n<pre><code>actions_menu = driver.find_element_by_xpath(\"//*[@alt='Open Menu']\").click()\nexport = driver.find_element_by_xpath(\"//*[@text='Export']\")\nexcel = driver.find_element_by_xpath(\"//*[@text='Excel']\")\nactions = ActionChains(driver)\nactions.move_to_element(export).click(excel).perform()\n</code></pre>\n"}], "owner": {"reputation": 111, "user_id": 8126316, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f73d2f14ea82dd8cfbcb0bc35b844fd8?s=128&d=identicon&r=PG&f=1", "display_name": "I.T. Guy", "link": "https://stackoverflow.com/users/8126316/i-t-guy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 494, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1504160502, "creation_date": 1504124065, "last_edit_date": 1504125095, "question_id": 45968970, "link": "https://stackoverflow.com/questions/45968970/hover-over-sub-menu-with-selenium", "title": "Hover over sub-menu with Selenium", "body": "<p><a href=\"https://i.stack.imgur.com/rYY4w.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rYY4w.png\" alt=\"Actions Menu \"></a>\nI have been tasked with automating the submission of a form (Company access only) and then exporting the results to excel. My code does click on the 'Actions' menu to activate the drop down list, but from there it does nothing. I need to hover over the Using Selenium, here is a snippet of the code, specifically for the menu I need to:\n1. Hover over the \"Open with Report Builder\"\n2. 'Down' arrow twice to 'Export'\n3. 'Right' arrow over to the sub-sub-menu\n4. 'Down' arrow 3x and 'click' on 'Excel'</p>\n\n<pre><code>elem4 = driver.find_element_by_id(\"m_sqlRsWebPart_RSWebPartToolbar_ctl00_RptControls_RSActionMenu_ctl01_t\")\nelem4.click()\nactions = ActionChains(driver)\nactions.move_to_element(elem4)\nactions.perform()\nelem4.send_keys(Keys.DOWN)\nelem4.send_keys(Keys.DOWN)\nelem4.send_keys(Keys.RIGHT)\nelem4.send_keys(Keys.DOWN)\nelem4.send_keys(Keys.DOWN)\nelem4.send_keys(Keys.DOWN)\nelem4.click()\n</code></pre>\n\n<p>Here is the HTML associated with the 'Actions' Menu</p>\n\n<pre><code>&lt;div id=\"m_sqlRsWebPart_RSWebPartToolbar_ctl00_RptControls_RSActionMenu_ctl01_t\" class=\"ms-menubuttoninactivehover ms-displayBlock\" title=\"Open Menu\" onmouseover=\"MMU_PopMenuIfShowing(this);MMU_EcbTableMouseOverOut(this, true)\" hoveractive=\"ms-menubuttonactivehover ms-rteThemeBackColor-3-1 ms-displayBlock\" hoverinactive=\"ms-menubuttoninactivehover ms-displayBlock\" onclick=\"if (document.getElementById('m_sqlRsWebPart_RSWebPartToolbar_ctl00_RptControls_RSActionMenu_ctl00').childNodes.length == 0) { MMU_CallbackPreMenuOpen('m_sqlRsWebPart_RSWebPartToolbar_ctl00_RptControls_RSActionMenu_ctl00', 'm_sqlRsWebPart_RSWebPartToolbar_ctl00_RptControls_RSActionMenu_ctl01', 'WebForm_DoCallback(\\'m_sqlRsWebPart$RSWebPartToolbar$ctl00$RptControls$RSActionMenu$ctl01\\',\\'enabled\\',MMU_CallbackHandler,\\'__CALLBACKCONTEXT__\\',MMU_CallbackErrHandler,true)', 60000, 'The request for menu items from the server has timed out.', event);  } CoreInvoke('MMU_Open',byid('m_sqlRsWebPart_RSWebPartToolbar_ctl00_RptControls_RSActionMenu_ctl00'), MMU_GetMenuFromClientId('m_sqlRsWebPart_RSWebPartToolbar_ctl00_RptControls_RSActionMenu_ctl01'),event,true, null, 300); return false;\" foa=\"MMU_GetMenuFromClientId('m_sqlRsWebPart_RSWebPartToolbar_ctl00_RptControls_RSActionMenu_ctl01')\" oncontextmenu=\"ClkElmt(this); return false;\" style=\"white-space:nowrap\"&gt;&lt;a class=\"ms-menu-a\" id=\"m_sqlRsWebPart_RSWebPartToolbar_ctl00_RptControls_RSActionMenu_ctl01\" href=\"javascript:;\" title=\"Open Menu\" style=\"cursor:pointer;white-space:nowrap;\" onfocus=\"MMU_EcbLinkOnFocusBlur(byid('m_sqlRsWebPart_RSWebPartToolbar_ctl00_RptControls_RSActionMenu_ctl00'), this, true);\" onkeydown=\"MMU_EcbLinkOnKeyDown(byid('m_sqlRsWebPart_RSWebPartToolbar_ctl00_RptControls_RSActionMenu_ctl00'), MMU_GetMenuFromClientId('m_sqlRsWebPart_RSWebPartToolbar_ctl00_RptControls_RSActionMenu_ctl01'), event);\" onclick=\"if (document.getElementById('m_sqlRsWebPart_RSWebPartToolbar_ctl00_RptControls_RSActionMenu_ctl00').childNodes.length == 0) { MMU_CallbackPreMenuOpen('m_sqlRsWebPart_RSWebPartToolbar_ctl00_RptControls_RSActionMenu_ctl00', 'm_sqlRsWebPart_RSWebPartToolbar_ctl00_RptControls_RSActionMenu_ctl01', 'WebForm_DoCallback(\\'m_sqlRsWebPart$RSWebPartToolbar$ctl00$RptControls$RSActionMenu$ctl01\\',\\'enabled\\',MMU_CallbackHandler,\\'__CALLBACKCONTEXT__\\',MMU_CallbackErrHandler,true)', 60000, 'The request for menu items from the server has timed out.', event);  } CoreInvoke('MMU_Open',byid('m_sqlRsWebPart_RSWebPartToolbar_ctl00_RptControls_RSActionMenu_ctl00'), MMU_GetMenuFromClientId('m_sqlRsWebPart_RSWebPartToolbar_ctl00_RptControls_RSActionMenu_ctl01'),event,true, null, 300); return false;\" oncontextmenu=\"ClkElmt(this); return false;\" menutokenvalues=\"\" serverclientid=\"m_sqlRsWebPart_RSWebPartToolbar_ctl00_RptControls_RSActionMenu_ctl01\" callbackinprogress=\"\" menuitemsdisabled=\"\" menuitemshidden=\"\" menuitemschecked=\"\"&gt;&lt;span class=\"sqlrv-ActionMenuText sqlrv-ToolBarMenuCell\"&gt;Actions&lt;/span&gt;&lt;img src=\"/_layouts/images/blank.gif\" style=\"border:0px\" alt=\"Use SHIFT+ENTER to open the menu (new window).\"&gt;&lt;/a&gt;&lt;img class=\"ms-viewselector-arrow\" src=\"/_layouts/images/menudark.gif\" alt=\"Open Menu\"&gt;&lt;/div&gt;\n</code></pre>\n\n<p>I believe this is the HTML for the 'Export' and 'Excel'</p>\n\n<pre><code>&lt;ie:menuitem id=\"m_sqlRsWebPart_RSWebPartToolbar_ctl00_RptControls_RSActionMenu_Export\" type=\"submenu\" text=\"Export\" callbackitem=\"true\"&gt;&lt;ie:menuitem id=\"m_sqlRsWebPart_RSWebPartToolbar_ctl00_RptControls_RSActionMenu_Export_Label\" type=\"label\" menugroupid=\"2147483647\" enabled=\"true\" checked=\"false\"&gt;&lt;/ie:menuitem&gt;&lt;ie:menuitem id=\"m_sqlRsWebPart_RSWebPartToolbar_ctl00_RptControls_RSActionMenu_XML\" type=\"option\" onmenuclick=\"$find(&amp;quot;m_sqlRsWebPart_ctl00_ReportViewer&amp;quot;).exportReport(&amp;quot;XML&amp;quot;);\" text=\"XML file with report data\" callbackitem=\"true\" menugroupid=\"2147483647\" enabled=\"true\" checked=\"false\" onmenuclick_original=\"$find(&amp;quot;m_sqlRsWebPart_ctl00_ReportViewer&amp;quot;).exportReport(&amp;quot;XML&amp;quot;);\" text_original=\"XML file with report data\" valorig=\"\n\"&gt;&lt;/ie:menuitem&gt;\n&lt;ie:menuitem id=\"m_sqlRsWebPart_RSWebPartToolbar_ctl00_RptControls_RSActionMenu_CSV\" type=\"option\" onmenuclick=\"$find(&amp;quot;m_sqlRsWebPart_ctl00_ReportViewer&amp;quot;).exportReport(&amp;quot;CSV&amp;quot;);\" text=\"CSV (comma delimited)\" callbackitem=\"true\" menugroupid=\"2147483647\" enabled=\"true\" checked=\"false\" onmenuclick_original=\"$find(&amp;quot;m_sqlRsWebPart_ctl00_ReportViewer&amp;quot;).exportReport(&amp;quot;CSV&amp;quot;);\" text_original=\"CSV (comma delimited)\" valorig=\"\n\"&gt;&lt;/ie:menuitem&gt;\n&lt;ie:menuitem id=\"m_sqlRsWebPart_RSWebPartToolbar_ctl00_RptControls_RSActionMenu_PDF\" type=\"option\" onmenuclick=\"$find(&amp;quot;m_sqlRsWebPart_ctl00_ReportViewer&amp;quot;).exportReport(&amp;quot;PDF&amp;quot;);\" text=\"PDF\" callbackitem=\"true\" menugroupid=\"2147483647\" enabled=\"true\" checked=\"false\" onmenuclick_original=\"$find(&amp;quot;m_sqlRsWebPart_ctl00_ReportViewer&amp;quot;).exportReport(&amp;quot;PDF&amp;quot;);\" text_original=\"PDF\" valorig=\"\n\"&gt;&lt;/ie:menuitem&gt;\n&lt;ie:menuitem id=\"m_sqlRsWebPart_RSWebPartToolbar_ctl00_RptControls_RSActionMenu_EXCELOPENXML\" type=\"option\" onmenuclick=\"$find(&amp;quot;m_sqlRsWebPart_ctl00_ReportViewer&amp;quot;).exportReport(&amp;quot;EXCELOPENXML&amp;quot;);\" text=\"Excel\" callbackitem=\"true\" menugroupid=\"2147483647\" enabled=\"true\" checked=\"false\" onmenuclick_original=\"$find(&amp;quot;m_sqlRsWebPart_ctl00_ReportViewer&amp;quot;).exportReport(&amp;quot;EXCELOPENXML&amp;quot;);\" text_original=\"Excel\" valorig=\"\n\"&gt;&lt;/ie:menuitem&gt;\n&lt;ie:menuitem id=\"m_sqlRsWebPart_RSWebPartToolbar_ctl00_RptControls_RSActionMenu_IMAGE\" type=\"option\" onmenuclick=\"$find(&amp;quot;m_sqlRsWebPart_ctl00_ReportViewer&amp;quot;).exportReport(&amp;quot;IMAGE&amp;quot;);\" text=\"TIFF file\" callbackitem=\"true\" menugroupid=\"2147483647\" enabled=\"true\" checked=\"false\" onmenuclick_original=\"$find(&amp;quot;m_sqlRsWebPart_ctl00_ReportViewer&amp;quot;).exportReport(&amp;quot;IMAGE&amp;quot;);\" text_original=\"TIFF file\" valorig=\"\n\"&gt;&lt;/ie:menuitem&gt;\n&lt;ie:menuitem id=\"m_sqlRsWebPart_RSWebPartToolbar_ctl00_RptControls_RSActionMenu_WORDOPENXML\" type=\"option\" onmenuclick=\"$find(&amp;quot;m_sqlRsWebPart_ctl00_ReportViewer&amp;quot;).exportReport(&amp;quot;WORDOPENXML&amp;quot;);\" text=\"Word\" callbackitem=\"true\" menugroupid=\"2147483647\" enabled=\"true\" checked=\"false\" onmenuclick_original=\"$find(&amp;quot;m_sqlRsWebPart_ctl00_ReportViewer&amp;quot;).exportReport(&amp;quot;WORDOPENXML&amp;quot;);\" text_original=\"Word\" valorig=\"\n\"&gt;&lt;/ie:menuitem&gt;\n&lt;ie:menuitem id=\"m_sqlRsWebPart_RSWebPartToolbar_ctl00_RptControls_RSActionMenu_MHTML\" type=\"option\" onmenuclick=\"$find(&amp;quot;m_sqlRsWebPart_ctl00_ReportViewer&amp;quot;).exportReport(&amp;quot;MHTML&amp;quot;);\" text=\"MHTML (web archive)\" callbackitem=\"true\" menugroupid=\"2147483647\" enabled=\"true\" checked=\"false\" onmenuclick_original=\"$find(&amp;quot;m_sqlRsWebPart_ctl00_ReportViewer&amp;quot;).exportReport(&amp;quot;MHTML&amp;quot;);\" text_original=\"MHTML (web archive)\" valorig=\"\n\"&gt;&lt;/ie:menuitem&gt;\n&lt;/ie:menuitem&gt;\n</code></pre>\n"}, {"tags": ["python", "pandas", "numpy", "dataframe"], "answers": [{"comments": [{"owner": {"reputation": 56440, "user_id": 2285236, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ac8c2e0f71dbd8cf4543039bebf2ab3?s=128&d=identicon&r=PG&f=1", "display_name": "ayhan", "link": "https://stackoverflow.com/users/2285236/ayhan"}, "edited": false, "score": 2, "creation_date": 1504124292, "post_id": 45969002, "comment_id": 78897261, "body": "Yes, pandas normally keeps them in separate blocks (int in its own array and object in its own array) but when you call the values attribute, it creates a numpy array (a copy) when the dtypes are mixed."}, {"owner": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "reply_to_user": {"reputation": 56440, "user_id": 2285236, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ac8c2e0f71dbd8cf4543039bebf2ab3?s=128&d=identicon&r=PG&f=1", "display_name": "ayhan", "link": "https://stackoverflow.com/users/2285236/ayhan"}, "edited": false, "score": 0, "creation_date": 1504124900, "post_id": 45969002, "comment_id": 78897590, "body": "I&#39;m not very familiar with the internals but could it be that pandas stores the dataframe as ND-array in case all dtypes are the same (otherwise it just keeps the columns as 1D array)? That would explain how it could return a view at all."}, {"owner": {"reputation": 56440, "user_id": 2285236, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ac8c2e0f71dbd8cf4543039bebf2ab3?s=128&d=identicon&r=PG&f=1", "display_name": "ayhan", "link": "https://stackoverflow.com/users/2285236/ayhan"}, "edited": false, "score": 1, "creation_date": 1504125596, "post_id": 45969002, "comment_id": 78897917, "body": "It has a thing called <a href=\"http://www.jeffreytratner.com/slides/pandas-under-the-hood-pydata-seattle-2015.pdf\" rel=\"nofollow noreferrer\">BlockManager</a> (pp. 36-39) that is responsible for arranging different dtypes. Each block has its own numpy array under the hood. So for example with <code>d2.A.values[:]</code> pir is directly accessing the numpy array which holds the int64 values. It&#39;s the same with <code>d1.values[:, 0]</code> because that&#39;s also the exact int64 numpy array that pandas stores."}], "tags": [], "owner": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "is_accepted": true, "score": 6, "last_activity_date": 1504127193, "last_edit_date": 1504127193, "creation_date": 1504124207, "answer_id": 45969002, "question_id": 45968947, "link": "https://stackoverflow.com/questions/45968947/why-is-the-behavior-when-assigning-to-values-inconsistent/45969002#45969002", "title": "Why is the behavior when assigning to values inconsistent?", "body": "<p>Because of the mixed <code>dtype</code>s in <code>d2</code> you'll get an <code>object</code>-array (copy) when you access the whole <code>.values</code>.</p>\n\n<pre><code>&gt;&gt;&gt; d2.values\narray([[0, 'a']], dtype=object)\n</code></pre>\n\n<p>This happens for any non-identical datatypes, e.g. also for <code>int32</code> vs. <code>int64</code>:</p>\n\n<pre><code>&gt;&gt;&gt; d2 = pd.DataFrame(dict(A=np.int32([0]), B=np.int64([0])))\n&gt;&gt;&gt; d2.values[:, 1] = 3\n&gt;&gt;&gt; print(d2)\n   A  B\n0  0  0\n</code></pre>\n\n<p>The changes only propagate back if the dtype is exactly the same for all columns:</p>\n\n<pre><code>&gt;&gt;&gt; d2 = pd.DataFrame(dict(A=np.int32([0]), B=np.int32([0])))\n&gt;&gt;&gt; d2.values[:, 1] = 3\n&gt;&gt;&gt; print(d2)\n   A  B\n0  0  3\n</code></pre>\n\n<hr>\n\n<p>Just to give an (approximate) way to find out if it's a view or a copy of the actual column you could use <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.shares_memory.html#numpy.shares_memory\" rel=\"nofollow noreferrer\"><code>np.shares_memory</code></a>:</p>\n\n<pre><code>&gt;&gt;&gt; np.shares_memory(d1.values, d1.A.values)\nTrue\n\n&gt;&gt;&gt; np.shares_memory(d2.values, d2.A.values)\nFalse\n</code></pre>\n"}], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 2, "accepted_answer_id": 45969002, "answer_count": 1, "score": 3, "last_activity_date": 1504140874, "creation_date": 1504123962, "last_edit_date": 1504140874, "question_id": 45968947, "link": "https://stackoverflow.com/questions/45968947/why-is-the-behavior-when-assigning-to-values-inconsistent", "title": "Why is the behavior when assigning to values inconsistent?", "body": "<p>Consider the two DataFrames <code>d1</code> and <code>d2</code>:</p>\n\n<pre><code>d1 = pd.DataFrame(np.arange(2).reshape(-1, 2), columns=['A', 'B'])\nd2 = pd.DataFrame(dict(A=[0], B=list('a')))\n</code></pre>\n\n<p>I want to overwrite the first column of <code>d1</code>.  It starts off as:</p>\n\n<pre><code>d1\n\n   A  B\n0  0  1\n</code></pre>\n\n<p>I attempt to overwrite the values of <code>'A'</code> with:</p>\n\n<pre><code>d1.values[:, 0] = 2\nd1\n\n   A  B\n0  2  1\n</code></pre>\n\n<p>However when I do the same thing with <code>d2</code>, I get different results.</p>\n\n<pre><code>d2\n\n   A  B\n0  0  a\n</code></pre>\n\n<p>Then:</p>\n\n<pre><code>d2.values[:, 0] = 2\nd2\n\n   A  B\n0  0  a\n</code></pre>\n\n<p>Nothing has changed, except when I do:</p>\n\n<pre><code>d2.A.values[:] = 2\nd2\n\n   A  B\n0  2  a\n</code></pre>\n\n<hr>\n\n<p>Why is this behavior inconsistent?</p>\n"}, {"tags": ["python", "matplotlib"], "answers": [{"tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": true, "score": 3, "last_activity_date": 1504124022, "creation_date": 1504124022, "answer_id": 45968965, "question_id": 45968891, "link": "https://stackoverflow.com/questions/45968891/matplotlib-savefig-does-not-output-a-file/45968965#45968965", "title": "matplotlib savefig does not output a file", "body": "<p>try this:</p>\n\n<pre><code>&gt;&gt;&gt; \"%s\" % 12+1\nTraceback (most recent call last):\n  File \"&lt;string&gt;\", line 301, in runcode\n  File \"&lt;interactive input&gt;\", line 1, in &lt;module&gt;\nTypeError: Can't convert 'int' object to str implicitly\n</code></pre>\n\n<p>as you see you have a priority problem between the <code>%</code> operator and the <code>+</code> operator there:</p>\n\n<pre><code>plt.savefig('Subj%s_left_LEC_DGCA3.png' % betaNum+1)\n</code></pre>\n\n<p><code>'Subj%s_left_LEC_DGCA3.png' % betaNum</code> is first computed to a string, then python tries to add <code>1</code> to this string, which explains the error (you didn't post any error, but the fact that it doesn't save gives that away)</p>\n\n<p>I would do:</p>\n\n<pre><code>plt.savefig('Subj%s_left_LEC_DGCA3.png' % (betaNum+1))\n</code></pre>\n\n<p>or even better:</p>\n\n<pre><code>plt.savefig('Subj{}_left_LEC_DGCA3.png'.format(betaNum+1))\n</code></pre>\n\n<p>That said, getting hold of a console where you can see exceptions that your code raises would help greatly.</p>\n"}], "owner": {"reputation": 997, "user_id": 4289314, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/b2d813d4f448dc118468f2a2d69d29d6?s=128&d=identicon&r=PG&f=1", "display_name": "Maria", "link": "https://stackoverflow.com/users/4289314/maria"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2132, "favorite_count": 0, "accepted_answer_id": 45968965, "answer_count": 1, "score": 1, "last_activity_date": 1504124022, "creation_date": 1504123736, "question_id": 45968891, "link": "https://stackoverflow.com/questions/45968891/matplotlib-savefig-does-not-output-a-file", "title": "matplotlib savefig does not output a file", "body": "<p>I have loaded one column each from two different dataframes and am plotting them on a line graph. The graph pops up on my screen, but my plt.savefig command is not working, as no files are saved.</p>\n\n<pre><code>import matplotlib.pyplot as plt\nimport plotly.plotly as py\nimport pandas as pd\nimport plotly.graph_objs as go\n\n# read in LEC\nLLEC = pd.read_csv('LLEC_1.csv').transpose()\nRLEC = pd.read_csv('RLEC_2.csv').transpose()\n\n#read in DGCA3\nLDGCA3=pd.read_csv('LDGCA3_13.csv').transpose()\nRDGCA3 = pd.read_csv('RDGCA3_14.csv').transpose()\n\ndef plot_betas_left(betaNum):\n    betaNum = int(betaNum)\n\n    #plot betas for both ROIs. start with LEC\n    ax = LLEC[betaNum].plot()\n    # add DGCA3\n    LDGCA3[betaNum].plot(ax=ax)\n    # label axes\n    ax.set_xlabel(\"precise beta number (0 is first)\")\n    ax.set_ylabel(\"beta coefficient value\")\n    # inset legend\n    ax.legend(['LEC', 'DGCA3'])\n    plt.savefig('Subj%s_left_LEC_DGCA3.png' % betaNum+1)\n\nplot_betas(3)\n</code></pre>\n"}, {"tags": ["python", "mode", "canopy"], "comments": [{"owner": {"reputation": 5775, "user_id": 1988991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33a4ae5d937c20301fb9442597a6d0ee?s=128&d=identicon&r=PG", "display_name": "Jonathan March", "link": "https://stackoverflow.com/users/1988991/jonathan-march"}, "edited": false, "score": 0, "creation_date": 1504127175, "post_id": 45968871, "comment_id": 78898647, "body": "This is not a mode. This is a bug or system configuration problem. Also, you don&#39;t say what version of Canopy you are using, or (if 2.x) what version of Python you are running."}, {"owner": {"reputation": 1774, "user_id": 469476, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/4469e6e376ebf2104f5367aaafa30008?s=128&d=identicon&r=PG", "display_name": "elbillaf", "link": "https://stackoverflow.com/users/469476/elbillaf"}, "reply_to_user": {"reputation": 5775, "user_id": 1988991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33a4ae5d937c20301fb9442597a6d0ee?s=128&d=identicon&r=PG", "display_name": "Jonathan March", "link": "https://stackoverflow.com/users/1988991/jonathan-march"}, "edited": false, "score": 0, "creation_date": 1504185625, "post_id": 45968871, "comment_id": 78924490, "body": "I think it&#39;s a version problem.  I think going to update later next week after my crunch. tx,"}], "answers": [{"comments": [{"owner": {"reputation": 1774, "user_id": 469476, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/4469e6e376ebf2104f5367aaafa30008?s=128&d=identicon&r=PG", "display_name": "elbillaf", "link": "https://stackoverflow.com/users/469476/elbillaf"}, "edited": false, "score": 0, "creation_date": 1504185987, "post_id": 45969686, "comment_id": 78924760, "body": "That sounds like a plan.  I don&#39;t control the firewall where I work, but if I can narrow things down, maybe the network guys can cut me a break.  First I&#39;m going to wait to do an update to the most recent version of canopy/python late next week."}, {"owner": {"reputation": 1774, "user_id": 469476, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/4469e6e376ebf2104f5367aaafa30008?s=128&d=identicon&r=PG", "display_name": "elbillaf", "link": "https://stackoverflow.com/users/469476/elbillaf"}, "edited": false, "score": 1, "creation_date": 1505856998, "post_id": 45969686, "comment_id": 79582107, "body": "During upgrade of python, I found there was a firewall issue at this end that was not reported in the previous version.  Our IT guys resolved that and I&#39;ve been running for several days now without incident, tx"}], "tags": [], "owner": {"reputation": 5775, "user_id": 1988991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33a4ae5d937c20301fb9442597a6d0ee?s=128&d=identicon&r=PG", "display_name": "Jonathan March", "link": "https://stackoverflow.com/users/1988991/jonathan-march"}, "is_accepted": true, "score": 1, "last_activity_date": 1504127114, "creation_date": 1504127114, "answer_id": 45969686, "question_id": 45968871, "link": "https://stackoverflow.com/questions/45968871/python-canopy-prompt-mode/45969686#45969686", "title": "python canopy prompt mode", "body": "<p>Your firewall might be blocking ipython's communication with its kernel. Try disconnecting from the internet, disabling your firewall, and trying again. If this solves the problem then you'll need to configure your firewall not to block localhost, or use a smarter firewall program.</p>\n"}], "owner": {"reputation": 1774, "user_id": 469476, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/4469e6e376ebf2104f5367aaafa30008?s=128&d=identicon&r=PG", "display_name": "elbillaf", "link": "https://stackoverflow.com/users/469476/elbillaf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 1, "accepted_answer_id": 45969686, "answer_count": 1, "score": 0, "last_activity_date": 1529425781, "creation_date": 1504123632, "last_edit_date": 1529425781, "question_id": 45968871, "link": "https://stackoverflow.com/questions/45968871/python-canopy-prompt-mode", "title": "python canopy prompt mode", "body": "<p>Updated with information I forgot to include:</p>\n\n<p>Canopy Version: 1.7.4.3348 (64 bit)</p>\n\n<p>Python version: '2.7.11 | 64-bit | (default, Jun 11 2016, 11:33:47) [MSC v.1500 64 bit (AMD64)]'</p>\n\n<p>Also: This problem only started a few days ago, but it's pretty irritating. It could be the network guys are doing something, or it could be I've altered my environment somehow without realizing it.  </p>\n\n<p>I have the habitual problem in Canopy that for some reason the prompt in the immediate window acts weird.  It lets me type, but doesn't do anything and doesn't seem to advance to the next command.</p>\n\n<pre><code>Welcome to Canopy's interactive data-analysis environment!'t' not in 'tf'\nType '?' for more information.\n\n...:\n...:\nn [1]: %run \"C:\\Projects\\MyProject\\MyProgram.py\"\n\nEnter (T)est or (F)ull or (Q)uit: t\n\nHow many rows to process: d\n\n't' not in 'tf'\nOut[2]: False\n\n'a' not in 'tf'\nOut[3]: True\nIn [4]: \n...:\n...:\n...:\n</code></pre>\n\n<p>The only way I can get past this is to restart the kernel.  I think something in my program might be causing this.  Not sure what.  Don't want to put the whole thing here.  Anyone had this problem and know what kind of thing might cause it?</p>\n\n<p>Also, what is this \"mode\" called and is there a way to get back to a regular \"mode\" without restarting the kernel?</p>\n"}, {"tags": ["python", "matplotlib", "python-3.6"], "comments": [{"owner": {"reputation": 1078, "user_id": 3501128, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xpDYb.jpg?s=128&g=1", "display_name": "RuthC", "link": "https://stackoverflow.com/users/3501128/ruthc"}, "edited": false, "score": 1, "creation_date": 1504124245, "post_id": 45968863, "comment_id": 78897230, "body": "You can set the current figure, then your plt.&quot;x&quot; style command will go to whichever figure you have chosen. <a href=\"https://stackoverflow.com/questions/7986567/matplotlib-how-to-set-the-current-figure#7987462\" title=\"matplotlib how to set the current figure%237987462\">stackoverflow.com/questions/7986567/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 8451559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/624d9785bfd60ef6f4ea4b5ba16ad99d?s=128&d=identicon&r=PG&f=1", "display_name": "Curtis Mason", "link": "https://stackoverflow.com/users/8451559/curtis-mason"}, "edited": false, "score": 0, "creation_date": 1504199359, "post_id": 45979543, "comment_id": 78933572, "body": "Manual definition of GridSpec worked just fine. Thank you!"}], "tags": [], "owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "is_accepted": true, "score": 4, "last_activity_date": 1504176255, "creation_date": 1504176255, "answer_id": 45979543, "question_id": 45968863, "link": "https://stackoverflow.com/questions/45968863/adding-subplots-to-a-particular-figure-using-subplot2grid-method/45979543#45979543", "title": "Adding subplots to a particular figure using &quot;subplot2grid&quot; method", "body": "<p>In the future (probably the upcoming release?), <a href=\"https://matplotlib.org/devdocs/api/_as_gen/matplotlib.pyplot.subplot2grid.html\" rel=\"nofollow noreferrer\"><code>subplot2grid</code></a>\nwill take a <code>fig</code> argument</p>\n\n<pre><code>subplot2grid(shape, loc, rowspan=1, colspan=1, fig=None, **kwargs)\n</code></pre>\n\n<p>such that the following would be possible:</p>\n\n<pre><code>import matplotlib.pyplot as plt\n\nfig1=plt.figure()\nfig2=plt.figure()\n\nax1 = plt.subplot2grid((2, 2), (0, 0), colspan=2, fig=fig1)\nax2 = plt.subplot2grid((2, 2), (1, 1),  fig=fig1)\n\nplt.show()\n</code></pre>\n\n<p>As of now (version 2.0.2) this is not yet possible. Alternatively, you can manually define the underlying GridSpec</p>\n\n<pre><code>import matplotlib.pyplot as plt\nfrom matplotlib.gridspec import GridSpec\n\nfig1=plt.figure()\nfig2=plt.figure()\n\nspec1 = GridSpec(2, 2).new_subplotspec((0,0), colspan=2)\nax1 = fig1.add_subplot(spec1)\nspec2 = GridSpec(2, 2).new_subplotspec((1,1))\nax2 = fig1.add_subplot(spec2)\n\nplt.show()\n</code></pre>\n\n<p>Or you can simply set the current figure, such that <code>plt.subplot2grid</code> will work on that exact figure (as shown in <a href=\"https://stackoverflow.com/questions/7986567/matplotlib-how-to-set-the-current-figure\">this question</a>)</p>\n\n<pre><code>import matplotlib.pyplot as plt\n\nfig1=plt.figure(1)\nfig2=plt.figure(2)\n\n# ... some other stuff\n\nplt.figure(1) # set current figure to fig1\nax1 = plt.subplot2grid((2, 2), (0, 0), colspan=2)\nax2 = plt.subplot2grid((2, 2), (1, 1))\n\nplt.show()\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 8451559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/624d9785bfd60ef6f4ea4b5ba16ad99d?s=128&d=identicon&r=PG&f=1", "display_name": "Curtis Mason", "link": "https://stackoverflow.com/users/8451559/curtis-mason"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2785, "favorite_count": 0, "accepted_answer_id": 45979543, "answer_count": 1, "score": 2, "last_activity_date": 1504176255, "creation_date": 1504123589, "question_id": 45968863, "link": "https://stackoverflow.com/questions/45968863/adding-subplots-to-a-particular-figure-using-subplot2grid-method", "title": "Adding subplots to a particular figure using &quot;subplot2grid&quot; method", "body": "<p>I am trying to add subplots of differing sizes to a particular matplotlib figure, and am unsure of how to do so. In the case of there only being one figure, the \"subplot2grid\" can be utilized as follows:</p>\n\n<pre><code>import matplotlib.pyplot as plt\n\nfig = plt.figure()\n\nax1 = plt.subplot2grid((2, 2), (0, 0), colspan=2)\nax1 = plt.subplot2grid((2, 2), (1, 1))\n\nplt.show()\n</code></pre>\n\n<p>The above code creates a figure, and adds two subplots to that figure, each with different dimensions. Now, my issue arises in the case of having multiple figures -- I cannot find the appropriate way to add subplots to a particular figure using \"subplot2grid.\" Using the more simple \"add_subplot\" method, one can add subplots to a particular figure, as seen in the below code:</p>\n\n<pre><code>import matplotlib.pyplot as plt\n\nfig1 = plt.figure()\nfig2 = plt.figure()\n\nax1 = fig1.add_subplot(2, 2, 1)\nax2 = fig1.add_subplot(2, 2, 4)\n\nplt.show()\n</code></pre>\n\n<p>I am looking for the analogous method for adding subplots of different sizes (preferably using some sort of grid manager, e.g. \"subplot2grid\") to a particular figure. I have reservations about using the plt.\"x\" style because it operates on the last figure that was created -- my code will have several figures, all of which I will need to have subplots of different sizes.</p>\n\n<p>Thanks in advance,</p>\n\n<p>Curtis M. </p>\n"}, {"tags": ["python", "arrays", "numpy", "average"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1504123590, "post_id": 45968833, "comment_id": 78896884, "body": "<code>0, 0, 0 filtered for &gt; 0 gives 0, 0, 0</code>... no it doesn&#39;t. Can you give a more precise description of how you want to handle the case where no positive elements are found? Should the result always be 0? Should the result be the average of all elements? Should some other value be imputed?"}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1504123658, "post_id": 45968833, "comment_id": 78896913, "body": "A weighted average is calculated as a sum of products of the averaged numbers and weights, divided by the sum of the weights. Since your weights for the second column add up to 0 (all three of them are <code>False</code>), the division is not possible."}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1504332726, "post_id": 45968833, "comment_id": 78982312, "body": "And feedback on the posted solution?"}], "answers": [{"comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1504124217, "post_id": 45968933, "comment_id": 78897205, "body": "Of course, you&#39;re still dividing by zero in the no-positive-elements case, so you&#39;ll get a NaN average if that happens. The underlying conceptual problem of trying to take the average of no numbers is still there."}], "tags": [], "owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "is_accepted": false, "score": 0, "last_activity_date": 1504125435, "last_edit_date": 1504125435, "creation_date": 1504123904, "answer_id": 45968933, "question_id": 45968833, "link": "https://stackoverflow.com/questions/45968833/conditional-average-with-numpy/45968933#45968933", "title": "Conditional average with numpy", "body": "<p>You can get the mask of greater than zeros and use it to do elementwise multilication and sum-reduction along the first axis. Finally, divide by the number of masked elements along the first axis for getting the average values.</p>\n\n<p>Thus, one solution would be -</p>\n\n<pre><code>mask = a &gt; 0 # Input array : a\nout = np.einsum('i...,i...-&gt;...',a,mask)/mask.sum(0)\n</code></pre>\n\n<p>Sample run -</p>\n\n<pre><code>In [52]: a\nOut[52]: \narray([[ 3, -3,  3],\n       [ 2,  2,  0],\n       [ 0, -3,  1],\n       [ 0,  1,  1]])\n\nIn [53]: mask = a &gt; 0\n\nIn [56]: np.einsum('i...,i...-&gt;...',a,mask) # summations of &gt; 0s\nOut[56]: array([5, 3, 5])\n\nIn [57]: np.einsum('i...,i...-&gt;...',a,mask)/mask.sum(0) # avg values of &gt;0s\nOut[57]: array([ 2.5       ,  1.5       ,  1.66666667])\n</code></pre>\n\n<p>To account for all zero columns, it seems we are expecting <code>0</code> as the result. So, we can use <code>np.where</code> to do the choosing, like so -</p>\n\n<pre><code>In [61]: a[:,-1] = 0\n\nIn [62]: a\nOut[62]: \narray([[ 3, -3,  0],\n       [ 2,  2,  0],\n       [ 0, -3,  0],\n       [ 0,  1,  0]])\n\nIn [63]: mask = a &gt; 0\n\nIn [65]: np.where( mask.any(0), np.einsum('i...,i...-&gt;...',a,mask)/mask.sum(0), 0)\n__main__:1: RuntimeWarning: invalid value encountered in true_divide\nOut[65]: array([ 2.5,  1.5,  0. ])\n</code></pre>\n\n<p>Just ignore the warning there.</p>\n\n<p>If you feel paranoid about warnings, use <code>masking</code> -</p>\n\n<pre><code>mask = a &gt; 0\nvm = mask.any(0) # valid mask\nout = np.zeros(a.shape[1])\nout[vm] = np.einsum('ij,ij-&gt;j',a[:,vm],mask[:,vm])/mask.sum(0)[vm]\n</code></pre>\n"}], "owner": {"reputation": 12895, "user_id": 298288, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/20c1f68b1bb5c87878c69d5442855a28?s=128&d=identicon&r=PG", "display_name": "stefan.at.wpf", "link": "https://stackoverflow.com/users/298288/stefan-at-wpf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3529, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1504125435, "creation_date": 1504123443, "question_id": 45968833, "link": "https://stackoverflow.com/questions/45968833/conditional-average-with-numpy", "title": "Conditional average with numpy", "body": "<p>Given a 2x3 array, I want to calculate the average on <code>axis=0</code>, but only considering values that are larger than 0.</p>\n\n<p>So given the array</p>\n\n<pre><code>[ [1,0],\n  [0,0],\n  [1,0] ]\n</code></pre>\n\n<p>I want the output to be</p>\n\n<pre><code># 1, 0, 1 filtered for &gt; 0 gives 1, 1, average = (1+1)/2 = 1\n# 0, 0, 0 filtered for &gt; 0 gives 0, 0, 0, average = 0    \n[1 0]\n</code></pre>\n\n<p>My current code is</p>\n\n<pre><code>import numpy as np\n\nframe = np.array([ [1,0],\n                   [0,0],\n                   [1,0] ])\n\nweights=np.array(frame)&gt;0\n\nprint(\"weights:\")\nprint(weights)\n\nprint(\"average without weights:\")\nprint((np.average(frame, axis=0)))\n\nprint(\"average with weights:\")\nprint((np.average(frame, axis=0, weights=weights)))\n</code></pre>\n\n<p>This gives me</p>\n\n<pre><code>weights:\n[[ True False]\n [False False]\n [ True False]]\naverage without weights:\n[ 0.66666667  0.        ]\naverage with weights:\nTraceback (most recent call last):\nFile \"C:\\Users\\myuser\\project\\test.py\", line 123, in &lt;module&gt;\nprint((np.average(frame, axis=0, weights=weights)))\nFile \"C:\\Users\\myuser\\Miniconda3\\envs\\myenv\\lib\\site-packages\\numpy\\lib\\function_base.py\", line 1140, in average\n\"Weights sum to zero, can't be normalized\")\nZeroDivisionError: Weights sum to zero, can't be normalized\n</code></pre>\n\n<p>I don't understand this error. What am I doing wrong and how can I get the average for all values greater than zero along <code>axis=0</code>? Thanks!</p>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 1197, "user_id": 6327846, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/n0yWJ.jpg?s=128&g=1", "display_name": "Garrett", "link": "https://stackoverflow.com/users/6327846/garrett"}, "reply_to_user": {"reputation": 15853, "user_id": 1925257, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yY7YW.jpg?s=128&g=1", "display_name": "xyres", "link": "https://stackoverflow.com/users/1925257/xyres"}, "edited": false, "score": 0, "creation_date": 1504123744, "post_id": 45968832, "comment_id": 78896951, "body": "Oh sorry the index is in my project urls <code>urlpatterns = [     url(r&#39;^admin&#47;&#39;, admin.site.urls),     url(r&#39;^$&#39;,views.PostListView.as_view(),name=&#39;index&#39;),     url(r&#39;^accounts&#47;&#39;,include(&#39;accounts.urls&#39;,namespace=&#39;account&zwnj;&#8203;s&#39;)),     url(r&#39;^colorsets&#47;&#39;,include(&#39;colorsets.urls&#39;,namespace=&#39;color&zwnj;&#8203;sets&#39;)), ]</code>"}, {"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 3, "creation_date": 1504123842, "post_id": 45968832, "comment_id": 78896994, "body": "You should post that as an update to the question. But it seems that the index view takes no arguments; why are you passing the username to it from your Cancel button?"}, {"owner": {"reputation": 11162, "user_id": 6655211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SnofI.png?s=128&g=1", "display_name": "PRMoureu", "link": "https://stackoverflow.com/users/6655211/prmoureu"}, "edited": false, "score": 0, "creation_date": 1504123946, "post_id": 45968832, "comment_id": 78897055, "body": "<code>from accounts import views</code> is hidden by the next line (<code>from colorsets import views </code>) in project&#39;s urls.py"}, {"owner": {"reputation": 1197, "user_id": 6327846, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/n0yWJ.jpg?s=128&g=1", "display_name": "Garrett", "link": "https://stackoverflow.com/users/6327846/garrett"}, "reply_to_user": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1504124234, "post_id": 45968832, "comment_id": 78897218, "body": "@DanielRoseman I did update the post. And I thought I wanted to do that because it&#39;s deleting a specific user&#39;s post?"}, {"owner": {"reputation": 1197, "user_id": 6327846, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/n0yWJ.jpg?s=128&g=1", "display_name": "Garrett", "link": "https://stackoverflow.com/users/6327846/garrett"}, "reply_to_user": {"reputation": 11162, "user_id": 6655211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SnofI.png?s=128&g=1", "display_name": "PRMoureu", "link": "https://stackoverflow.com/users/6655211/prmoureu"}, "edited": false, "score": 0, "creation_date": 1504124281, "post_id": 45968832, "comment_id": 78897252, "body": "@PRMoureu What do you mean by &quot;hidden&quot; and how would I fix that?"}, {"owner": {"reputation": 11162, "user_id": 6655211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SnofI.png?s=128&g=1", "display_name": "PRMoureu", "link": "https://stackoverflow.com/users/6655211/prmoureu"}, "edited": false, "score": 0, "creation_date": 1504124326, "post_id": 45968832, "comment_id": 78897276, "body": "what <code>views</code> do you expect when you call it next ?"}, {"owner": {"reputation": 1197, "user_id": 6327846, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/n0yWJ.jpg?s=128&g=1", "display_name": "Garrett", "link": "https://stackoverflow.com/users/6327846/garrett"}, "reply_to_user": {"reputation": 11162, "user_id": 6655211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SnofI.png?s=128&g=1", "display_name": "PRMoureu", "link": "https://stackoverflow.com/users/6655211/prmoureu"}, "edited": false, "score": 0, "creation_date": 1504124456, "post_id": 45968832, "comment_id": 78897346, "body": "@PRMoureu So my thought process is that the user would click delete which would bring in the <code>confirm_delete</code> template and <code>DeleteView</code> to actually delete the post."}, {"owner": {"reputation": 6847, "user_id": 1081569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8682dc66d5900d9645a8dff1316495e1?s=128&d=identicon&r=PG", "display_name": "Paulo Almeida", "link": "https://stackoverflow.com/users/1081569/paulo-almeida"}, "edited": false, "score": 1, "creation_date": 1504124862, "post_id": 45968832, "comment_id": 78897566, "body": "@Garrett But like Daniel Roseman said, the error is coming from the <code>url</code> call in the Cancel button."}, {"owner": {"reputation": 1197, "user_id": 6327846, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/n0yWJ.jpg?s=128&g=1", "display_name": "Garrett", "link": "https://stackoverflow.com/users/6327846/garrett"}, "reply_to_user": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1504126511, "post_id": 45968832, "comment_id": 78898361, "body": "@DanielRoseman So I removed the cancel button and now everything works, the only thing is that I now have no cancel button. If it&#39;s not too much to ask for, do you have any ideas as to how I might be able to fix the cancel button? If not, all good, thanks for the help."}, {"owner": {"reputation": 6847, "user_id": 1081569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8682dc66d5900d9645a8dff1316495e1?s=128&d=identicon&r=PG", "display_name": "Paulo Almeida", "link": "https://stackoverflow.com/users/1081569/paulo-almeida"}, "edited": false, "score": 1, "creation_date": 1504126745, "post_id": 45968832, "comment_id": 78898470, "body": "@Garrett You don&#39;t need to remove the Cancel button, just the arguments you are passing to <code>url</code>. Use  <code>{% url &#39;index&#39; %}</code> as href."}, {"owner": {"reputation": 1197, "user_id": 6327846, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/n0yWJ.jpg?s=128&g=1", "display_name": "Garrett", "link": "https://stackoverflow.com/users/6327846/garrett"}, "reply_to_user": {"reputation": 6847, "user_id": 1081569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8682dc66d5900d9645a8dff1316495e1?s=128&d=identicon&r=PG", "display_name": "Paulo Almeida", "link": "https://stackoverflow.com/users/1081569/paulo-almeida"}, "edited": false, "score": 0, "creation_date": 1504126877, "post_id": 45968832, "comment_id": 78898522, "body": "@PauloAlmeida You&#39;re that worked. thank you. I got that url tag from a tutorial I followed on the a different project and that&#39;s how the person did it, not sure why because it makes no sense. Thanks again everyone!"}], "answers": [{"comments": [{"owner": {"reputation": 1197, "user_id": 6327846, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/n0yWJ.jpg?s=128&g=1", "display_name": "Garrett", "link": "https://stackoverflow.com/users/6327846/garrett"}, "edited": false, "score": 0, "creation_date": 1504136339, "post_id": 45970904, "comment_id": 78901501, "body": "I was able to figure it out through the comments people posted, but yeah this was right. Thanks"}], "tags": [], "owner": {"reputation": 1179, "user_id": 8128627, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvL3q.png?s=128&g=1", "display_name": "d2718nis", "link": "https://stackoverflow.com/users/8128627/d2718nis"}, "is_accepted": true, "score": 0, "last_activity_date": 1504133820, "creation_date": 1504133820, "answer_id": 45970904, "question_id": 45968832, "link": "https://stackoverflow.com/questions/45968832/reverse-for-index-with-keyword-arguments-username-garrett-pk-7-no/45970904#45970904", "title": "Reverse for &#39;index&#39; with keyword arguments &#39;{&#39;username&#39;: &#39;garrett&#39;, &#39;pk&#39;: 7}&#39; not found", "body": "<p>As long as your main <code>urls.py</code> takes no argumemts:</p>\n\n<pre><code>urlpatterns = [\n    ...\n    url(r'^$',views.PostListView.as_view(),name='index'),\n    ...\n]\n</code></pre>\n\n<p>You should remove all the passed arguments at the <code>colorset_confirm_delete.html</code> and call reverse without them:</p>\n\n<pre><code>&lt;a class=\"btn btn-simple btn-large\" href=\"{% url 'index' %}\"&gt;Cancel&lt;/a&gt;\n</code></pre>\n"}], "owner": {"reputation": 1197, "user_id": 6327846, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/n0yWJ.jpg?s=128&g=1", "display_name": "Garrett", "link": "https://stackoverflow.com/users/6327846/garrett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 45970904, "answer_count": 1, "score": 0, "last_activity_date": 1504133820, "creation_date": 1504123441, "last_edit_date": 1504123794, "question_id": 45968832, "link": "https://stackoverflow.com/questions/45968832/reverse-for-index-with-keyword-arguments-username-garrett-pk-7-no", "title": "Reverse for &#39;index&#39; with keyword arguments &#39;{&#39;username&#39;: &#39;garrett&#39;, &#39;pk&#39;: 7}&#39; not found", "body": "<p>So I know what a reverse is, I just don't understand how the Keyword stuff fits into it. What I am trying to do is enable people to delete only their own posts. The delete button shows up properly on only the users own posts, however when you click \"Delete\" I'm getting an error, here is the error along with the code. The traceback doesn't highlight anything but if you want to see it or anything else let me know and I can add it. Also haven't been able to find any other questions on this site...</p>\n\n<p>Error:</p>\n\n<pre><code>NoReverseMatch at /colorsets/delete/7/\nReverse for 'index' with keyword arguments '{'username': 'garrett', 'pk': 7}' not found. 1 pattern(s) tried: ['$']\n</code></pre>\n\n<p>Colorsets App views.py</p>\n\n<pre><code>from django.shortcuts import render\nfrom colorsets.forms import ColorForm\nfrom colorsets import models\nfrom colorsets.models import ColorSet\nfrom django.utils import timezone\n\nfrom django.contrib.auth import authenticate,login,logout\nfrom django.http import HttpResponseRedirect, HttpResponse\nfrom django.core.urlresolvers import reverse,reverse_lazy\nfrom django.contrib.auth.decorators import login_required\nfrom django.contrib.auth.mixins import LoginRequiredMixin\nfrom braces.views import SelectRelatedMixin\nfrom django.views.generic import (TemplateView,ListView,\n                                    DetailView,CreateView,\n                                    UpdateView,DeleteView)\n\n# Create your views here.\n#def index(request):\n#   return render(request,'index.html')\n\nclass PostListView(ListView):\n    model = ColorSet\n\n    def get_queryset(self):\n        return ColorSet.objects.filter(published_date__lte=timezone.now()).order_by('-published_date')\n\nclass CreateColorSetView(LoginRequiredMixin,CreateView):\n    login_url = '/login/'\n    redirect_field_name = 'index.html'\n    form_class = ColorForm\n    model = ColorSet\n\n    def form_valid(self,form):\n        self.object = form.save(commit=False)\n        self.object.user = self.request.user\n        self.object.save()\n        return super().form_valid(form)\n\nclass DeletePost(LoginRequiredMixin,SelectRelatedMixin,DeleteView):\n    model = models.ColorSet\n    select_related = ('user',)\n    success_url = reverse_lazy('index')\n\n    def get_queryset(self):\n        queryset = super().get_queryset()\n        return queryset.filter(user_id=self.request.user.id)\n\n    def delete(self,*args,**kwargs):\n        messages.success(self.request,'Post Deleted')\n        return super().delete(*args,**kwargs)\n</code></pre>\n\n<p>Colorsets app urls.py</p>\n\n<pre><code>from django.conf.urls import url\nfrom colorsets import views\n\napp_name = 'colorsets'\n\nurlpatterns = [\n    url(r'^new/$',views.CreateColorSetView.as_view(),name='new_color'),\n    url(r'delete/(?P&lt;pk&gt;\\d+)/$',views.DeletePost.as_view(),name='delete'),\n]\n</code></pre>\n\n<p>Project urls.py</p>\n\n<pre><code>\"\"\"colors URL Configuration\n\nThe `urlpatterns` list routes URLs to views. For more information please see:\n    https://docs.djangoproject.com/en/1.11/topics/http/urls/\nExamples:\nFunction views\n    1. Add an import:  from my_app import views\n    2. Add a URL to urlpatterns:  url(r'^$', views.home, name='home')\nClass-based views\n    1. Add an import:  from other_app.views import Home\n    2. Add a URL to urlpatterns:  url(r'^$', Home.as_view(), name='home')\nIncluding another URLconf\n    1. Import the include() function: from django.conf.urls import url, include\n    2. Add a URL to urlpatterns:  url(r'^blog/', include('blog.urls'))\n\"\"\"\nfrom django.conf.urls import url\nfrom django.contrib import admin\nfrom django.conf.urls import include\nfrom accounts import views\nfrom colorsets import views\n\nurlpatterns = [\n    url(r'^admin/', admin.site.urls),\n    url(r'^$',views.PostListView.as_view(),name='index'),\n    url(r'^accounts/',include('accounts.urls',namespace='accounts')),\n    url(r'^colorsets/',include('colorsets.urls',namespace='colorsets')),\n]\n</code></pre>\n\n<p>Colorset_confirm_delete.html</p>\n\n<pre><code>{% extends 'base.html' %}\n\n{% block content %}\n    &lt;h3&gt;Are you sure you want to delete this post?&lt;/h3&gt;\n\n    &lt;div class=\"posts\"&gt;\n        {% include \"colorsets/_post.html\" with post=object hide_delete=True %}\n    &lt;/div&gt;\n    &lt;form method=\"POST\"&gt;\n        {% csrf_token %}\n        &lt;input type=\"submit\" value=\"Confirm Delete\" class=\"btn btn-danger btn-large\" /&gt;\n        &lt;a class=\"btn btn-simple btn-large\" href=\"{% url 'index' username=user.username pk=object.pk %}\"&gt;Cancel&lt;/a&gt;\n    &lt;/form&gt;\n{% endblock %}\n</code></pre>\n\n<p>Colorset_list.html (serving as my index):</p>\n\n<pre><code>{% extends \"base.html\" %}\n\n{% block content %}\n\n&lt;div class=\"container\"&gt;\n    &lt;div class=\"sidebar\"&gt;\n        &lt;div class=\"widget widget-one\"&gt;\n            &lt;div class=\"widget-content\"&gt;\n                {% if user.is_authenticated %}\n                    &lt;p&gt;Welcome, {{ user.username }}&lt;/p&gt;\n                {% endif %}\n            &lt;/div&gt;\n        &lt;/div&gt;\n\n        &lt;div class=\"widget widget-two\"&gt;\n            &lt;p&gt;Widget Two&lt;/p&gt;\n        &lt;/div&gt;\n\n        &lt;div class=\"widget widget-three\"&gt;\n            &lt;p&gt;Widget Three&lt;/p&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;div class=\"content\"&gt;\n    {% for colorset in colorset_list %}\n            &lt;table class=\"colorset\"&gt;\n                &lt;tr&gt;\n                    &lt;h3 class=\"set-name\"&gt;{{ colorset.name }}&lt;/h3&gt;\n                    &lt;p class=\"author accent-text\"&gt;Author: {{ colorset.user }}&lt;/p&gt;\n\n                    {% if user.is_authenticated and colorset.user == user %}\n                        &lt;a href=\"{% url 'colorsets:delete' pk=colorset.pk %}\" title=\"delete\" class=\"btn btn-simple\"&gt;\n                            &lt;span class=\"text-danger icon-label\"&gt;Delete&lt;/span&gt;\n                        &lt;/a&gt;\n                    {% endif %}\n\n                    &lt;td class=\"color\" style=\"background-color:#{{ colorset.color_one }}\"&gt;\n                    &lt;/td&gt;\n                    &lt;td class=\"color\" style=\"background-color:#{{ colorset.color_two }}\"&gt;\n                    &lt;/td&gt;\n                    &lt;td class=\"color\" style=\"background-color:#{{ colorset.color_three }}\"&gt;\n                    &lt;/td&gt;\n                    &lt;td class=\"color\" style=\"background-color:#{{ colorset.color_four }}\"&gt;\n                    &lt;/td&gt;\n                    &lt;td class=\"color\" style=\"background-color:#{{ colorset.color_five }}\"&gt;\n                    &lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td&gt;\n                        &lt;p&gt;#{{ colorset.color_one }}&lt;/p&gt;\n                    &lt;/td&gt;\n                    &lt;td&gt;\n                        &lt;p&gt;#{{ colorset.color_two }}&lt;/p&gt;\n                    &lt;/td&gt;\n                    &lt;td&gt;\n                        &lt;p&gt;#{{ colorset.color_three }}&lt;/p&gt;\n                    &lt;/td&gt;\n                    &lt;td&gt;\n                        &lt;p&gt;#{{ colorset.color_four }}&lt;/p&gt;\n                    &lt;/td&gt;\n                    &lt;td&gt;\n                        &lt;p&gt;#{{ colorset.color_five }}&lt;/p&gt;\n                    &lt;/td&gt;\n                &lt;/tr&gt;\n            &lt;/table&gt;\n    {% endfor %}\n    &lt;/div&gt;\n&lt;/div&gt;\n\n{% endblock %}\n</code></pre>\n"}, {"tags": ["python", "user-interface", "opencv", "tkinter"], "comments": [{"owner": {"reputation": 14442, "user_id": 7475225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/niMZR.jpg?s=128&g=1", "display_name": "Mike - SMT", "link": "https://stackoverflow.com/users/7475225/mike-smt"}, "edited": false, "score": 1, "creation_date": 1504124291, "post_id": 45968820, "comment_id": 78897260, "body": "The code you have provided will not work as it is incomplete. Please provide a <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a> so we can actually test your code."}, {"owner": {"reputation": 1636, "user_id": 8100895, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/35efad89b16d4a6874fd02a9d7b00204?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/8100895/jonathan"}, "reply_to_user": {"reputation": 14442, "user_id": 7475225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/niMZR.jpg?s=128&g=1", "display_name": "Mike - SMT", "link": "https://stackoverflow.com/users/7475225/mike-smt"}, "edited": false, "score": 0, "creation_date": 1504127635, "post_id": 45968820, "comment_id": 78898843, "body": "I&#39;ve attached just the relevant parts of the code to reproduce the problem."}], "answers": [{"comments": [{"owner": {"reputation": 908, "user_id": 7318908, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Gimzh.png?s=128&g=1", "display_name": "ROAR", "link": "https://stackoverflow.com/users/7318908/roar"}, "edited": false, "score": 0, "creation_date": 1504141063, "post_id": 45971181, "comment_id": 78902324, "body": "This doesn&#39;t have anything to do with the question. The question is why the color changes to red."}, {"owner": {"reputation": 1636, "user_id": 8100895, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/35efad89b16d4a6874fd02a9d7b00204?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/8100895/jonathan"}, "edited": false, "score": 0, "creation_date": 1504142330, "post_id": 45971181, "comment_id": 78902597, "body": "When I tried this ( I commented out my previous <code>thumbnail</code> command) and used <code>resize</code>, it said src is neither numpy array or scalar. I tried just calling this function right after imread and that just printed a bunch of matrices and said doesn&#39;t exist."}, {"owner": {"reputation": 175, "user_id": 2453583, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NVvUJ.jpg?s=128&g=1", "display_name": "roccolocko", "link": "https://stackoverflow.com/users/2453583/roccolocko"}, "edited": false, "score": 0, "creation_date": 1504219433, "post_id": 45971181, "comment_id": 78942338, "body": "Can you try something like:  <code>import cv2</code>  <code>image = cv2.imread(&quot;original.jpg&quot;)</code>  <code>thumbnail = cv2.resize(image, (0,0), fx=0.5, fy=0.5)</code>  <code>cv2.imwrite(&quot;resized.jpg&quot;, thumbnail)</code>  That works for me, or post your modified code."}], "tags": [], "owner": {"reputation": 175, "user_id": 2453583, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NVvUJ.jpg?s=128&g=1", "display_name": "roccolocko", "link": "https://stackoverflow.com/users/2453583/roccolocko"}, "is_accepted": false, "score": 0, "last_activity_date": 1504136160, "creation_date": 1504136160, "answer_id": 45971181, "question_id": 45968820, "link": "https://stackoverflow.com/questions/45968820/tkinter-when-resizing-color-image-it-shows-up-in-red-scale-only/45971181#45971181", "title": "tkinter - When resizing color image, it shows up in red scale only", "body": "<p>I see you are using opencv. Why don't you use the opencv command to resize.\n     It is very simple and works pretty well.</p>\n\n<p>Take a look at this page:</p>\n\n\n\n<p><a href=\"http://docs.opencv.org/2.4/modules/imgproc/doc/geometric_transformations.html#void%20resize(InputArray%20src,%20OutputArray%20dst,%20Size%20dsize,%20double%20fx,%20double%20fy,%20int%20interpolation)\" rel=\"nofollow noreferrer\">OpenCV Resize</a></p>\n\n<p>This is an example to make a image 50% smaller, or instead of the fx and fy, you can put the exact size you want.</p>\n\n<pre><code>thumbnail = cv2.resize(image, (0,0), fx=0.5, fy=0.5) \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 908, "user_id": 7318908, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Gimzh.png?s=128&g=1", "display_name": "ROAR", "link": "https://stackoverflow.com/users/7318908/roar"}, "is_accepted": true, "score": 3, "last_activity_date": 1504140725, "creation_date": 1504140725, "answer_id": 45971659, "question_id": 45968820, "link": "https://stackoverflow.com/questions/45968820/tkinter-when-resizing-color-image-it-shows-up-in-red-scale-only/45971659#45971659", "title": "tkinter - When resizing color image, it shows up in red scale only", "body": "<p>This is because opencv uses BGR instead of RGB. When you are using this line: <code>self.img = Image.fromarray(np.array(self.img).copy())</code> Blue and Red colors are being swapped. Just before you use the above code, convert the BGR to RGB in opencv and you should be good to go.</p>\n\n<pre><code>self.img = cv2.cvtColor(self.img,cv2.COLOR_BGR2RGB)\n</code></pre>\n"}], "owner": {"reputation": 1636, "user_id": 8100895, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/35efad89b16d4a6874fd02a9d7b00204?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/8100895/jonathan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 710, "favorite_count": 0, "accepted_answer_id": 45971659, "answer_count": 2, "score": 0, "last_activity_date": 1504141821, "creation_date": 1504123386, "last_edit_date": 1504141821, "question_id": 45968820, "link": "https://stackoverflow.com/questions/45968820/tkinter-when-resizing-color-image-it-shows-up-in-red-scale-only", "title": "tkinter - When resizing color image, it shows up in red scale only", "body": "<p>I have the following piece of code:</p>\n\n<pre><code>from tkinter import *\nfrom tkinter import filedialog\nfrom PIL import Image, ImageTk\nimport cv2\nimport os\nimport glob\nimport numpy as np\n\n\nimage_path = \"\"\nimage_list = []\nclass Proj:\n    def __init__(self, master):\n        self.master = master\n        #GUI height and width\n        w = 1250 \n        h = 600\n\n        # open folder manager to select image folder\n        image_path =  filedialog.askdirectory()\n\n        master.geometry(\"%dx%d%+d%+d\" % (w ,h ,0,0))\n        master.resizable(True,True)\n\n        #read in images from folder\n        self.read_images(master, image_path)\n        #cv2.imshow('image',cv2.imread(image_list[0], 1))\n        self.img = cv2.imread(image_list[0])\n\n        self.img = Image.fromarray(np.array(self.img).copy())\n        self.img.thumbnail((w//2, w//2+10))\n        self.img = ImageTk.PhotoImage(self.img)\n\n\n        image_frame = Frame(master)\n        image_frame.grid(row = 0, column = 0, columnspan = 3, rowspan = 5)\n        left_panel = Canvas(image_frame, width=w//2, height=h-70)\n        left_panel.grid(row=0, column=0, columnspan=4)      \n        imgA_handler = left_panel.create_image((0,0), image = self.img, anchor=\"nw\")\n\n        right_panel = Canvas(image_frame, width=w//2, height=h-70)\n        right_panel.grid(row=0, column=5, columnspan=4)\n\n    def read_images(self, master, path):\n        images = path + '/*.tif'\n        for img in glob.glob(images): #will only read in tif images\n            image_list.append(img)\n\nroot = Tk()     \nexample = Proj(root)\nroot.mainloop()\n</code></pre>\n\n<p>I am reading in color <strong>.tif</strong> images and then trying to display them in the <code>left_panel.</code> However, when I go to do that, it <strong>shows the normal color image only in red scale</strong> even <em>though I never extracted just the red signal</em>. I am completely unable to diagnose the issue. How do I fix this issue?</p>\n\n<p>Ultimately, what I want to do is display two images on this GUI. An original image on the left and a modified image on the right. Currently my gui layout is set up as I've coded above. However, if you think there is an easier way to do this, then I'd be interested to hear. </p>\n"}, {"tags": ["python", "python-2.7", "pip"], "comments": [{"owner": {"reputation": 39529, "user_id": 2063361, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jB77z.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/2063361/anonymous"}, "edited": false, "score": 1, "creation_date": 1504123361, "post_id": 45968796, "comment_id": 78896781, "body": "please also mention your OS ?"}, {"owner": {"reputation": 1074, "user_id": 937453, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f6085b7d336359fb2d6217c04fb63f2b?s=128&d=identicon&r=PG", "display_name": "senaps", "link": "https://stackoverflow.com/users/937453/senaps"}, "edited": false, "score": 0, "creation_date": 1504123490, "post_id": 45968796, "comment_id": 78896840, "body": "edit your question farnaz or you&#39;re going to get your first negatives! your question should contain the os and command you have ran resulting the removal of pip."}, {"owner": {"reputation": 13285, "user_id": 157770, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/870524e51f7b2cf270f9053abea676d5?s=128&d=identicon&r=PG", "display_name": "AlG", "link": "https://stackoverflow.com/users/157770/alg"}, "edited": false, "score": 0, "creation_date": 1504123767, "post_id": 45968796, "comment_id": 78896962, "body": "When in doubt, reinstall: <a href=\"https://packaging.python.org/tutorials/installing-packages/\" rel=\"nofollow noreferrer\">packaging.python.org/tutorials/installing-packages</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1074, "user_id": 937453, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f6085b7d336359fb2d6217c04fb63f2b?s=128&d=identicon&r=PG", "display_name": "senaps", "link": "https://stackoverflow.com/users/937453/senaps"}, "is_accepted": true, "score": 4, "last_activity_date": 1504123740, "creation_date": 1504123740, "answer_id": 45968892, "question_id": 45968796, "link": "https://stackoverflow.com/questions/45968796/i-accidentally-uninstalled-pip-form-python2-7-how-should-i-install-it-back/45968892#45968892", "title": "I accidentally uninstalled pip form python2.7, how should I install it back?", "body": "<p>Installing pip is a simple 2-step operation.</p>\n\n<p>first, you have to get the <a href=\"https://bootstrap.pypa.io/get-pip.py\" rel=\"nofollow noreferrer\">latest version of pip installer file</a>.</p>\n\n<p>second, You have to run a <code>python get-pip.py</code> on the file you have downloaded.</p>\n\n<p>the file you download in the first step is named <code>get-pip.py</code> and, when ran using python is going to download and install pip on your os.</p>\n\n<p>and you can always read the <a href=\"https://pip.pypa.io/en/stable/installing/\" rel=\"nofollow noreferrer\">documentations</a>.</p>\n"}], "owner": {"reputation": 31, "user_id": 7649877, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-rBeLBp_It3o/AAAAAAAAAAI/AAAAAAAADDY/nZ7l2fFgfPA/photo.jpg?sz=128", "display_name": "Farnaz Soheili", "link": "https://stackoverflow.com/users/7649877/farnaz-soheili"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3252, "favorite_count": 0, "accepted_answer_id": 45968892, "answer_count": 1, "score": -1, "last_activity_date": 1504123831, "creation_date": 1504123288, "last_edit_date": 1504123831, "question_id": 45968796, "link": "https://stackoverflow.com/questions/45968796/i-accidentally-uninstalled-pip-form-python2-7-how-should-i-install-it-back", "title": "I accidentally uninstalled pip form python2.7, how should I install it back?", "body": "<p>I uninstalled pip by mistake and my question is how I can install it back? I am using windows.\n C:>Python-2.7\\python.exe -m pip uninstall  pip openpyxl</p>\n\n<p>I wanted to uninstall openpyxl but I forgot to delete pip</p>\n"}, {"tags": ["python", "django", "date", "django-models", "django-queryset"], "comments": [{"owner": {"reputation": 16602, "user_id": 8060120, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/gejWm.jpg?s=128&g=1", "display_name": "Brown Bear", "link": "https://stackoverflow.com/users/8060120/brown-bear"}, "edited": false, "score": 0, "creation_date": 1504123262, "post_id": 45968782, "comment_id": 78896723, "body": "please, show your model, and add django version"}], "answers": [{"comments": [{"owner": {"reputation": 1439, "user_id": 6344954, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dfe73b34173e78c09be7cdd8454bcf88?s=128&d=identicon&r=PG&f=1", "display_name": "sshussain270", "link": "https://stackoverflow.com/users/6344954/sshussain270"}, "edited": false, "score": 0, "creation_date": 1504123420, "post_id": 45968815, "comment_id": 78896812, "body": "You mean __date will act as .date() in on column name?"}, {"owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "reply_to_user": {"reputation": 1439, "user_id": 6344954, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dfe73b34173e78c09be7cdd8454bcf88?s=128&d=identicon&r=PG&f=1", "display_name": "sshussain270", "link": "https://stackoverflow.com/users/6344954/sshussain270"}, "edited": false, "score": 0, "creation_date": 1504123490, "post_id": 45968815, "comment_id": 78896839, "body": "@Elisha512 Yes, that&#39;s what <code>__date</code> does."}, {"owner": {"reputation": 16602, "user_id": 8060120, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/gejWm.jpg?s=128&g=1", "display_name": "Brown Bear", "link": "https://stackoverflow.com/users/8060120/brown-bear"}, "reply_to_user": {"reputation": 1439, "user_id": 6344954, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dfe73b34173e78c09be7cdd8454bcf88?s=128&d=identicon&r=PG&f=1", "display_name": "sshussain270", "link": "https://stackoverflow.com/users/6344954/sshussain270"}, "edited": false, "score": 0, "creation_date": 1504123588, "post_id": 45968815, "comment_id": 78896882, "body": "@Elisha512 since your django version more Django 1.9."}], "tags": [], "owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "is_accepted": true, "score": 2, "last_activity_date": 1504123464, "last_edit_date": 1504123464, "creation_date": 1504123366, "answer_id": 45968815, "question_id": 45968782, "link": "https://stackoverflow.com/questions/45968782/how-do-i-filter-data-using-date-keyword-in-the-column-name-in-django/45968815#45968815", "title": "How do I filter data using .date() keyword in the column name in django?", "body": "<p>You can cast <code>datetime</code> fields as <code>date</code> using the <code>__date</code> lookup:</p>\n\n<pre><code>datas = Data.objects.filter(datetime__date=datetime.date())\n</code></pre>\n\n<hr>\n\n<p>Reference:</p>\n\n<p><a href=\"https://docs.djangoproject.com/en/1.11/ref/models/querysets/#date\" rel=\"nofollow noreferrer\">https://docs.djangoproject.com/en/1.11/ref/models/querysets/#date</a></p>\n"}], "owner": {"reputation": 1439, "user_id": 6344954, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dfe73b34173e78c09be7cdd8454bcf88?s=128&d=identicon&r=PG&f=1", "display_name": "sshussain270", "link": "https://stackoverflow.com/users/6344954/sshussain270"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 45968815, "answer_count": 1, "score": -1, "last_activity_date": 1504123783, "creation_date": 1504123167, "last_edit_date": 1504123783, "question_id": 45968782, "link": "https://stackoverflow.com/questions/45968782/how-do-i-filter-data-using-date-keyword-in-the-column-name-in-django", "title": "How do I filter data using .date() keyword in the column name in django?", "body": "<p>I am writing a web application using Django where I have to use <code>date()</code> in column name. The orignal field is <code>datetimefield</code> and i need filter using date only and ignore the time. Here is my code:</p>\n\n<pre><code>datas = Data.objects.all()\nfor data in datas:\n    all = Data.objects.filter(datetime.date() = data.datetime.date())\n</code></pre>\n\n<p>But it gives out the following error:</p>\n\n<pre><code>all = Data.objects.filter(datetime.date() = consumption.datetime.date()) \n\nSyntaxError: keyword can't be an expression\n</code></pre>\n\n<p>Any idea how I use <code>datetime.date()</code> as a column name to use only date section of the <code>datetimefield</code> column?</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Here is my model:</p>\n\n<pre><code>class Data(models.Model):\n    datetime = models.DateTimeField(auto_now=False)\n    value = models.FloatField()\n</code></pre>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 3796, "user_id": 4859885, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HcTm.jpg?s=128&g=1", "display_name": "Brian Rodriguez", "link": "https://stackoverflow.com/users/4859885/brian-rodriguez"}, "edited": false, "score": 3, "creation_date": 1504123122, "post_id": 45968723, "comment_id": 78896646, "body": "<code>new_list = [a, b]</code>"}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 2, "creation_date": 1504123168, "post_id": 45968723, "comment_id": 78896672, "body": "If you use list concatenation, both <code>a</code> and <code>b</code> must be lists: <code>a = [None]</code>, <code>b=[&#39;apple,banana,cherry&#39;]</code>."}, {"owner": {"reputation": 39529, "user_id": 2063361, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jB77z.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/2063361/anonymous"}, "edited": false, "score": 0, "creation_date": 1504123279, "post_id": 45968723, "comment_id": 78896736, "body": "Both the codes are different and hence the different result. Use the expected output code to get the expected result. Can you please explain a bit about your doubt?"}, {"owner": {"reputation": 332, "user_id": 3510093, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/94cd3c49ac0024a6727f7a3d63bb40a5?s=128&d=identicon&r=PG&f=1", "display_name": "sedawkgrep", "link": "https://stackoverflow.com/users/3510093/sedawkgrep"}, "reply_to_user": {"reputation": 3796, "user_id": 4859885, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HcTm.jpg?s=128&g=1", "display_name": "Brian Rodriguez", "link": "https://stackoverflow.com/users/4859885/brian-rodriguez"}, "edited": false, "score": 0, "creation_date": 1504123392, "post_id": 45968723, "comment_id": 78896802, "body": "@BrianRodriguez Thanks so much! It works now!"}], "answers": [{"tags": [], "owner": {"reputation": 434, "user_id": 4682789, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MBdW9.png?s=128&g=1", "display_name": "AllenMoh", "link": "https://stackoverflow.com/users/4682789/allenmoh"}, "is_accepted": false, "score": 1, "last_activity_date": 1504123087, "creation_date": 1504123087, "answer_id": 45968759, "question_id": 45968723, "link": "https://stackoverflow.com/questions/45968723/python-concatenate-nonetype-and-string-in-a-new-list/45968759#45968759", "title": "Python - concatenate NoneType and string in a new list", "body": "<p>to add items to a list you want to use the append method:</p>\n\n<pre><code>my_list = []\na = None\nb = 'apple,banana,cherry'\n\n# adds a to the list\nmy_list.append(a)\n\n# adds b to the list\nmy_list.append(b)\n</code></pre>\n"}], "owner": {"reputation": 332, "user_id": 3510093, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/94cd3c49ac0024a6727f7a3d63bb40a5?s=128&d=identicon&r=PG&f=1", "display_name": "sedawkgrep", "link": "https://stackoverflow.com/users/3510093/sedawkgrep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 515, "favorite_count": 0, "answer_count": 1, "score": -5, "last_activity_date": 1504123087, "creation_date": 1504122963, "last_edit_date": 1504123062, "question_id": 45968723, "link": "https://stackoverflow.com/questions/45968723/python-concatenate-nonetype-and-string-in-a-new-list", "title": "Python - concatenate NoneType and string in a new list", "body": "<h1>Problem</h1>\n\n<p>How to concatenate None and string inside a new list?</p>\n\n<pre><code>&gt;&gt;&gt; a = None\n&gt;&gt;&gt; b = 'apple,banana,cherry'\n&gt;&gt;&gt; new_list = a + b\nTraceback (most recent call last):\nFile \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nTypeError: unsupported operand type(s) for +: 'NoneType' and 'str'\n&gt;&gt;&gt;\n</code></pre>\n\n<h1>Expected output</h1>\n\n<pre><code>&gt;&gt;&gt; new_list = [None, 'apple,banana,cherry']\n&gt;&gt;&gt; print(new_list)\n[None, 'apple,banana,cherry']\n&gt;&gt;&gt; print(type(new_list))\n&lt;class 'list'&gt;\n&gt;&gt;&gt;\n</code></pre>\n"}, {"tags": ["python", "scipy", "ode"], "comments": [{"owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "edited": false, "score": 0, "creation_date": 1504125107, "post_id": 45968721, "comment_id": 78897702, "body": "Several related questions: <a href=\"https://stackoverflow.com/questions/26742818/solve-ode-in-python-with-complex-matrix-as-initial-value\" title=\"solve ode in python with complex matrix as initial value\">stackoverflow.com/questions/26742818/&hellip;</a>, <a href=\"https://stackoverflow.com/questions/26580854/how-to-plot-the-eigenvalues-when-solving-matrix-coupled-differential-equations-i\" title=\"how to plot the eigenvalues when solving matrix coupled differential equations i\">stackoverflow.com/questions/26580854/&hellip;</a>, <a href=\"https://stackoverflow.com/questions/19910189/scipy-odeint-with-complex-initial-values\" title=\"scipy odeint with complex initial values\">stackoverflow.com/questions/19910189/&hellip;</a> (and there are more).  In those questions, I suggested using the wrapper that I wrote called <a href=\"https://github.com/WarrenWeckesser/odeintw\" rel=\"nofollow noreferrer\"><code>odeintw</code></a>."}, {"owner": {"reputation": 1383, "user_id": 4107770, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/84cd102ae268671aa55a8869094210fd?s=128&d=identicon&r=PG&f=1", "display_name": "Vladimir Vargas", "link": "https://stackoverflow.com/users/4107770/vladimir-vargas"}, "reply_to_user": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "edited": false, "score": 0, "creation_date": 1504129252, "post_id": 45968721, "comment_id": 78899490, "body": "@WarrenWeckesser This approach requires to write the matrix as a function, right? My problem is that I have 150x150 matrices and writing each them as python functions is way too time-consuming. Also computing the jacobian demands a lot of time. Is there a way of using your wrapper similar to what you proposed in that question I mention in mine? i.e. sth like <code>MA = odeint(deriv, A0, time, args=(Ab,))</code> Thanks"}, {"owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "edited": false, "score": 0, "creation_date": 1504131811, "post_id": 45968721, "comment_id": 78900351, "body": "<i>&quot;This approach requires to write the matrix as a function, right?&quot;</i> No, do what you are already doing, but with complex coefficients in the array <code>Ab</code>.  Then also make <code>A0</code> complex, and <code>odeintw</code> should Just Work."}, {"owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "edited": false, "score": 0, "creation_date": 1504132112, "post_id": 45968721, "comment_id": 78900436, "body": "<i>&quot;Also computing the jacobian demands a lot of time.&quot;</i>  You don&#39;t have to provide the Jacobian function."}, {"owner": {"reputation": 1383, "user_id": 4107770, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/84cd102ae268671aa55a8869094210fd?s=128&d=identicon&r=PG&f=1", "display_name": "Vladimir Vargas", "link": "https://stackoverflow.com/users/4107770/vladimir-vargas"}, "reply_to_user": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "edited": false, "score": 0, "creation_date": 1504132585, "post_id": 45968721, "comment_id": 78900564, "body": "@WarrenWeckesser Thanks, at first I did not make A0 complex. That solved the issue."}], "answers": [{"comments": [{"owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "edited": false, "score": 1, "creation_date": 1504133882, "post_id": 45970853, "comment_id": 78900911, "body": "Actually, <code>Ab</code> does not have to be complex.  I only suggested that in my comment to the question because you said your actual array would be complex.  It is the initial condition <code>A0</code> that <i>must</i> be complex.  That&#39;s how <code>odeintw</code> knows you are using complex variables."}], "tags": [], "owner": {"reputation": 1383, "user_id": 4107770, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/84cd102ae268671aa55a8869094210fd?s=128&d=identicon&r=PG&f=1", "display_name": "Vladimir Vargas", "link": "https://stackoverflow.com/users/4107770/vladimir-vargas"}, "is_accepted": true, "score": 3, "last_activity_date": 1504148101, "last_edit_date": 1504148101, "creation_date": 1504133491, "answer_id": 45970853, "question_id": 45968721, "link": "https://stackoverflow.com/questions/45968721/solve-complex-matrix-differential-equation-with-odeint/45970853#45970853", "title": "Solve complex matrix differential equation with Odeint", "body": "<p><a href=\"https://github.com/WarrenWeckesser/odeintw\" rel=\"nofollow noreferrer\"><code>odeintw</code></a> wrapper for <code>odeint</code> must be used in the same fashion as in the question. However, the initial value <code>A0</code> must be complex-valued vector.</p>\n"}], "owner": {"reputation": 1383, "user_id": 4107770, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/84cd102ae268671aa55a8869094210fd?s=128&d=identicon&r=PG&f=1", "display_name": "Vladimir Vargas", "link": "https://stackoverflow.com/users/4107770/vladimir-vargas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1489, "favorite_count": 1, "accepted_answer_id": 45970853, "answer_count": 1, "score": 1, "last_activity_date": 1504148101, "creation_date": 1504122961, "question_id": 45968721, "link": "https://stackoverflow.com/questions/45968721/solve-complex-matrix-differential-equation-with-odeint", "title": "Solve complex matrix differential equation with Odeint", "body": "<p>I want to solve a matrix differential equation, <a href=\"https://stackoverflow.com/questions/26319996/solving-matrix-differential-equation-in-python-using-scipy-numpy-ndsolve-equiva\">like this one</a>:</p>\n\n<pre><code>import numpy as np\nfrom scipy.integrate import odeint\n\n\ndef deriv(A, t, Ab):\n    return np.dot(Ab, A)\n\n\nAb = np.array([[-0.25,    0,    0],\n               [ 0.25, -0.2,    0],\n               [    0,  0.2, -0.1]])\n\ntime = np.linspace(0, 25, 101)\nA0 = np.array([10, 20, 30])\n\nMA = odeint(deriv, A0, time, args=(Ab,))\n</code></pre>\n\n<p>However, this does not work in the case of having complex matrix elements. I am looking for something similar to <a href=\"https://docs.scipy.org/doc/scipy/reference/generated/scipy.integrate.complex_ode.html\" rel=\"nofollow noreferrer\"><code>scipy.integrate.complex_ode</code></a> but for <code>odeint</code>. If this is not possible, what other library should I use to perform the integration? I appreciate your help!</p>\n"}, {"tags": ["python", "arguments"], "answers": [{"comments": [{"owner": {"reputation": 104, "user_id": 3795797, "user_type": "registered", "profile_image": "https://graph.facebook.com/1259033712/picture?type=large", "display_name": "KeatonBenning", "link": "https://stackoverflow.com/users/3795797/keatonbenning"}, "edited": false, "score": 0, "creation_date": 1504123102, "post_id": 45968708, "comment_id": 78896633, "body": "ahh figured it out thanks to you! i also tried to subtract take_damage instead of damage. silly learning mistakes lol"}], "tags": [], "owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "is_accepted": false, "score": 1, "last_activity_date": 1504122908, "creation_date": 1504122908, "answer_id": 45968708, "question_id": 45968680, "link": "https://stackoverflow.com/questions/45968680/positional-argument-osx/45968708#45968708", "title": "positional argument OSX", "body": "<p>All methods need to take <code>self</code> as well as any other arguments.</p>\n\n<pre><code>def take_damage(self, damage):\n</code></pre>\n"}], "owner": {"reputation": 104, "user_id": 3795797, "user_type": "registered", "profile_image": "https://graph.facebook.com/1259033712/picture?type=large", "display_name": "KeatonBenning", "link": "https://stackoverflow.com/users/3795797/keatonbenning"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 22, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1504122908, "creation_date": 1504122790, "question_id": 45968680, "link": "https://stackoverflow.com/questions/45968680/positional-argument-osx", "title": "positional argument OSX", "body": "<p>mac terminal says im passing two positional arguments into the take_damage method... </p>\n\n<pre><code>from enemy import Enemy\n\nrandom_monster = Enemy(\"Basic enemy\", 12, 1)\nprint(random_monster)\n\nrandom_monster.take_damage(4)\nprint(random_monster)\n</code></pre>\n\n<p>and the other file is here ______________________</p>\n\n<pre><code>class Enemy:\n\ndef __init__(self, name=\"Enemy\", hit_points = 0, lives = 1):\n    self.name = name\n    self.hit_points = hit_points\n    self.lives = lives\n\ndef take_damage(damage):\n    remaining_points = self.hit_points - take_damage\n    if remaining_points &gt;= 0:\n        self.hit_points = remaining_points\n        print(\"i took {} damage and have {} left\".format(damage, self.hit_points))\n    else:\n        self.lives -= 1\n\ndef __str__(self):\n    return \"Name: {0.name}, Lives: {0.lives}, Hitpoints: {0.hit_points}\".format(self)\n</code></pre>\n"}, {"tags": ["python", "django", "django-models"], "comments": [{"owner": {"reputation": 1206, "user_id": 3083094, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/lved8.jpg?s=128&g=1", "display_name": "Wasi", "link": "https://stackoverflow.com/users/3083094/wasi"}, "edited": false, "score": 0, "creation_date": 1504122926, "post_id": 45968668, "comment_id": 78896538, "body": "Please, fix indentation of your pasted code"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 8539881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8047c5e5426a181f90c8fed4ddc2b80?s=128&d=identicon&r=PG&f=1", "display_name": "MagiPrince", "link": "https://stackoverflow.com/users/8539881/magiprince"}, "edited": false, "score": 0, "creation_date": 1504167736, "post_id": 45970900, "comment_id": 78911849, "body": "I have to create a vote model in extra of the two precedents models ? And it&#39;s possible to do what i was trying? Thanks for your answer!"}, {"owner": {"reputation": 10905, "user_id": 6794568, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JQCl8.jpg?s=128&g=1", "display_name": "Astik Anand", "link": "https://stackoverflow.com/users/6794568/astik-anand"}, "reply_to_user": {"reputation": 3, "user_id": 8539881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8047c5e5426a181f90c8fed4ddc2b80?s=128&d=identicon&r=PG&f=1", "display_name": "MagiPrince", "link": "https://stackoverflow.com/users/8539881/magiprince"}, "edited": false, "score": 0, "creation_date": 1504170421, "post_id": 45970900, "comment_id": 78913640, "body": "@MagiPrince No you dont need to create an extra model, you can replace your first model Prognostic with vote model."}, {"owner": {"reputation": 3, "user_id": 8539881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8047c5e5426a181f90c8fed4ddc2b80?s=128&d=identicon&r=PG&f=1", "display_name": "MagiPrince", "link": "https://stackoverflow.com/users/8539881/magiprince"}, "edited": false, "score": 0, "creation_date": 1504199744, "post_id": 45970900, "comment_id": 78933794, "body": "I try the code you propose to me, but actually this didn&#39;t work because i fill the vote model with post data from my template. Do you think it&#39;s possible to do what i&#39;m trying in with an admin function ?"}, {"owner": {"reputation": 10905, "user_id": 6794568, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JQCl8.jpg?s=128&g=1", "display_name": "Astik Anand", "link": "https://stackoverflow.com/users/6794568/astik-anand"}, "reply_to_user": {"reputation": 3, "user_id": 8539881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8047c5e5426a181f90c8fed4ddc2b80?s=128&d=identicon&r=PG&f=1", "display_name": "MagiPrince", "link": "https://stackoverflow.com/users/8539881/magiprince"}, "edited": false, "score": 0, "creation_date": 1504207181, "post_id": 45970900, "comment_id": 78937482, "body": "@You need to work on considering this model, but you need to make a lot of changes."}, {"owner": {"reputation": 3, "user_id": 8539881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8047c5e5426a181f90c8fed4ddc2b80?s=128&d=identicon&r=PG&f=1", "display_name": "MagiPrince", "link": "https://stackoverflow.com/users/8539881/magiprince"}, "edited": false, "score": 0, "creation_date": 1504289612, "post_id": 45970900, "comment_id": 78972736, "body": "Thank you very much for your help, I make a lot of changes in my code and now it works! :)"}], "tags": [], "owner": {"reputation": 10905, "user_id": 6794568, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JQCl8.jpg?s=128&g=1", "display_name": "Astik Anand", "link": "https://stackoverflow.com/users/6794568/astik-anand"}, "is_accepted": true, "score": 0, "last_activity_date": 1504133808, "creation_date": 1504133808, "answer_id": 45970900, "question_id": 45968668, "link": "https://stackoverflow.com/questions/45968668/how-to-delete-a-model-instance-and-modify-the-user-profile-when-another-model-in/45970900#45970900", "title": "How to delete a model instance and modify the user profile when another model instance is created?", "body": "<p>Yoc can create a <strong>vote model</strong> and then proceed.</p>\n\n<pre><code>class Vote(models.Model):\n    user = models.ForeignKey(settings.AUTH_USER_MODEL)\n    value = models.BooleanField(default=True)\n    match = models.ForeignKey(\"MatchOpponents\")\n\n    class Meta:\n        unique_together = (('user', 'match'),)\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 8539881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8047c5e5426a181f90c8fed4ddc2b80?s=128&d=identicon&r=PG&f=1", "display_name": "MagiPrince", "link": "https://stackoverflow.com/users/8539881/magiprince"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 45970900, "answer_count": 1, "score": 0, "last_activity_date": 1504137504, "creation_date": 1504122721, "last_edit_date": 1504137504, "question_id": 45968668, "link": "https://stackoverflow.com/questions/45968668/how-to-delete-a-model-instance-and-modify-the-user-profile-when-another-model-in", "title": "How to delete a model instance and modify the user profile when another model instance is created?", "body": "<p>I'm devoleping a website where you can see different matches and vote for the team you think that will win. </p>\n\n<p>When the match ends, I would like to create an instance in the <code>django</code> admin with the match and the winner of the match, delete all the votes and add points to every user that voted for the winning team.</p>\n\n<p>These are my models:</p>\n\n<pre><code>class Prognostic(models.Model):\n    match = models.IntegerField()\n    user = models.IntegerField()\n    vote = models.CharField(max_length = 100)\n\n    def __str__(self):\n        return self.vote\n\n\nclass MatchResult(models.Model):\n    match = models.ForeignKey(\"MatchOpponents\")\n    winner = models.ForeignKey(\"TeamGGC\")\n\n    @receiver(post_save, sender=Prognostic)\n    def voteRepartitionPoints(sender, instance, **kwargs):\n        profil = apps.get_model(\"userMembers\", \"Profil\")\n        for prognostic in Prognostic().object.filter(match = match_id):\n            if prognostic.vote == winner:\n                user = profil.object.get(user_id = prog.user)\n                user.nbGGCPoints += 50\n                user.save()\n            prognostic.delete()\n\n    def __int__(self):\n        return self.match\n</code></pre>\n\n<p>But when I do that, nothing happens. What is required to get this to work?</p>\n"}, {"tags": ["python", "scipy", "chi-squared"], "answers": [{"comments": [{"owner": {"reputation": 2633, "user_id": 8144295, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/a2s3l.jpg?s=128&g=1", "display_name": "2Obe", "link": "https://stackoverflow.com/users/8144295/2obe"}, "edited": false, "score": 0, "creation_date": 1504161066, "post_id": 45969012, "comment_id": 78907940, "body": "Do I get it right that: 1. The n_bins is the number of groups I want to compare? In my case n_bins=2 because I have two production lines.                   2. The effect size describes the difference between the means of the two production lines. Therefore it is kind of a confidence intervall and the lower this value is set, the higher the sample size will be?"}, {"owner": {"reputation": 462, "user_id": 7687593, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d101c1c9462b20e7998d611965fae7ed?s=128&d=identicon&r=PG&f=1", "display_name": "BirdLaw", "link": "https://stackoverflow.com/users/7687593/birdlaw"}, "reply_to_user": {"reputation": 2633, "user_id": 8144295, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/a2s3l.jpg?s=128&g=1", "display_name": "2Obe", "link": "https://stackoverflow.com/users/8144295/2obe"}, "edited": false, "score": 0, "creation_date": 1504197463, "post_id": 45969012, "comment_id": 78932622, "body": "@2Obe My mistake, I see that I misread your post, and thought you were seeking the test for <i>independence</i>."}, {"owner": {"reputation": 462, "user_id": 7687593, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d101c1c9462b20e7998d611965fae7ed?s=128&d=identicon&r=PG&f=1", "display_name": "BirdLaw", "link": "https://stackoverflow.com/users/7687593/birdlaw"}, "reply_to_user": {"reputation": 2633, "user_id": 8144295, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/a2s3l.jpg?s=128&g=1", "display_name": "2Obe", "link": "https://stackoverflow.com/users/8144295/2obe"}, "edited": false, "score": 0, "creation_date": 1504197950, "post_id": 45969012, "comment_id": 78932862, "body": "For homogeneity, the math is the same, but degrees of freedom (in this case n_bins) should be (number_of_rows -1)*(number_of_columns-1) where number_of_rows (and columns) are the number of rows and columns in the contingency table. (e.g. if you have two variables, &#39;gender&#39; and &#39;political affiliation&#39;) you could have (2-1)*(2-1)"}, {"owner": {"reputation": 462, "user_id": 7687593, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d101c1c9462b20e7998d611965fae7ed?s=128&d=identicon&r=PG&f=1", "display_name": "BirdLaw", "link": "https://stackoverflow.com/users/7687593/birdlaw"}, "reply_to_user": {"reputation": 2633, "user_id": 8144295, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/a2s3l.jpg?s=128&g=1", "display_name": "2Obe", "link": "https://stackoverflow.com/users/8144295/2obe"}, "edited": false, "score": 0, "creation_date": 1504198352, "post_id": 45969012, "comment_id": 78933064, "body": "2. The effect size is the size of the effect for which you seek a given power level. For instance, you can achieve sufficient power to detect an effect of a certain size with sample size=n.   So if you need to reliably (80% of the time) detect an effect of a certain size, while maintaining an acceptable false positive rate (alpha, roughly), it will give you the required sample size"}], "tags": [], "owner": {"reputation": 462, "user_id": 7687593, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d101c1c9462b20e7998d611965fae7ed?s=128&d=identicon&r=PG&f=1", "display_name": "BirdLaw", "link": "https://stackoverflow.com/users/7687593/birdlaw"}, "is_accepted": true, "score": 2, "last_activity_date": 1504214895, "last_edit_date": 1504214895, "creation_date": 1504124253, "answer_id": 45969012, "question_id": 45968611, "link": "https://stackoverflow.com/questions/45968611/estimate-the-needed-sample-size-for-a-chi-squared-test/45969012#45969012", "title": "Estimate the needed sample size for a Chi Squared test", "body": "<p>You can use statsmodels.stats.GofChisquarePower().solve_power()\nHowever, you need to adjust the degrees of freedom (df) to account for the number of variables. You can accomplish this with the <strong>n_bins</strong> parameter.</p>\n\n<pre><code>&gt;&gt;&gt;import statsmodels.stats.power as smp\n&gt;&gt;&gt;n_levels_variable_a = 2\n&gt;&gt;&gt;n_levels_variable_b = 3\n&gt;&gt;&gt;smp.GofChisquarePower().solve_power(0.346, power=.8, n_bins=(n_levels_variable_a-1)*(n_levels_variable_b-1), alpha=0.05)\n</code></pre>\n\n<p>115.94688728433769</p>\n"}], "owner": {"reputation": 2633, "user_id": 8144295, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/a2s3l.jpg?s=128&g=1", "display_name": "2Obe", "link": "https://stackoverflow.com/users/8144295/2obe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1055, "favorite_count": 0, "accepted_answer_id": 45969012, "answer_count": 1, "score": 2, "last_activity_date": 1505454490, "creation_date": 1504122503, "last_edit_date": 1505454490, "question_id": 45968611, "link": "https://stackoverflow.com/questions/45968611/estimate-the-needed-sample-size-for-a-chi-squared-test", "title": "Estimate the needed sample size for a Chi Squared test", "body": "<p>I want to estimate the needed sample size to compute a Chi Squared (Test for homogenity) test for discrete data using Python and need a hint how to do it. </p>\n\n<p>In general I want to estimate if the failure rates of two production processes differ significantly (alpha = 5%) or not.</p>\n\n<p>I have only found the  <a href=\"http://www.statsmodels.org/dev/generated/statsmodels.stats.gof.chisquare_effectsize.html#statsmodels.stats.gof.chisquare_effectsize\" rel=\"nofollow noreferrer\">statsmodels.stats.gof.chisquare_effectsize()</a> function but this seems to work only for a goodness of fit test.</p>\n\n<p>Is there any way how I can determine the needed sample size?</p>\n\n<p>I appreciate every answer.</p>\n"}, {"tags": ["python", "django", "ssl", "tornado"], "comments": [{"owner": {"reputation": 20703, "user_id": 2805033, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TasHL.jpg?s=128&g=1", "display_name": "Ben Darnell", "link": "https://stackoverflow.com/users/2805033/ben-darnell"}, "edited": false, "score": 0, "creation_date": 1504143085, "post_id": 45968587, "comment_id": 78902767, "body": "The call to <code>load_cert_chain</code> in the stack trace is only supposed to be used when <code>ssl_options</code> is a dict. But it&#39;s an <code>ssl.SSLContext</code> in this example, so you&#39;re doing the right thing and it shouldn&#39;t have to load the certificate again. Are you sure that this setup code matches this stack trace? Do you have anywhere else where you pass <code>ssl_options</code> as a dict?"}, {"owner": {"reputation": 45, "user_id": 4511256, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/100001756063735/picture?type=large", "display_name": "\u0410\u043d\u0442\u043e\u043d \u041c\u0438\u0445\u0430\u0439\u043b\u043e\u0432", "link": "https://stackoverflow.com/users/4511256/%d0%90%d0%bd%d1%82%d0%be%d0%bd-%d0%9c%d0%b8%d1%85%d0%b0%d0%b9%d0%bb%d0%be%d0%b2"}, "reply_to_user": {"reputation": 20703, "user_id": 2805033, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TasHL.jpg?s=128&g=1", "display_name": "Ben Darnell", "link": "https://stackoverflow.com/users/2805033/ben-darnell"}, "edited": false, "score": 0, "creation_date": 1504198659, "post_id": 45968587, "comment_id": 78933212, "body": "My bad, trace for this code  Traceback (most recent call last):   File &quot;/usr/local/lib/python2.7/dist-packages/tornado/ioloop.py&quot;, line 888, in start   File &quot;/usr/local/lib/python2.7/dist-packages/tornado/stack_contex&zwnj;&#8203;t.py&quot;, line 277, in null_wrapper   File &quot;/usr/local/lib/python2.7/dist-packages/tornado/netutil.py&quot;, line 264, in accept_handler   File &quot;/usr/lib/python2.7/socket.py&quot;, line 206, in accept error: [Errno 24] Too many open files"}, {"owner": {"reputation": 20703, "user_id": 2805033, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TasHL.jpg?s=128&g=1", "display_name": "Ben Darnell", "link": "https://stackoverflow.com/users/2805033/ben-darnell"}, "edited": false, "score": 0, "creation_date": 1504202665, "post_id": 45968587, "comment_id": 78935182, "body": "OK, in that case you&#39;re not reopening the certificate every time, you&#39;re just running out of file descriptors (and lee-pai-long&#39;s answer below should help)"}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 4511256, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/100001756063735/picture?type=large", "display_name": "\u0410\u043d\u0442\u043e\u043d \u041c\u0438\u0445\u0430\u0439\u043b\u043e\u0432", "link": "https://stackoverflow.com/users/4511256/%d0%90%d0%bd%d1%82%d0%be%d0%bd-%d0%9c%d0%b8%d1%85%d0%b0%d0%b9%d0%bb%d0%be%d0%b2"}, "edited": false, "score": 0, "creation_date": 1504126219, "post_id": 45969057, "comment_id": 78898214, "body": "my ulimit -n 200000 im change /etc/security/limits.conf to  root            soft    nproc            200000 root            hard    nproc            1000000 root            soft    nofile            200000 root            hard    nofile           1000000  Im see this error, after 1024 count connect."}, {"owner": {"reputation": 1584, "user_id": 3775614, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tkkon.png?s=128&g=1", "display_name": "lee-pai-long", "link": "https://stackoverflow.com/users/3775614/lee-pai-long"}, "reply_to_user": {"reputation": 45, "user_id": 4511256, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/100001756063735/picture?type=large", "display_name": "\u0410\u043d\u0442\u043e\u043d \u041c\u0438\u0445\u0430\u0439\u043b\u043e\u0432", "link": "https://stackoverflow.com/users/4511256/%d0%90%d0%bd%d1%82%d0%be%d0%bd-%d0%9c%d0%b8%d1%85%d0%b0%d0%b9%d0%bb%d0%be%d0%b2"}, "edited": false, "score": 0, "creation_date": 1504127146, "post_id": 45969057, "comment_id": 78898636, "body": "Are you sure this is the setting for the user that start tornado ? If so you&#39;ll have to find a way to load the file only once. I&#39;m not super familiar with tornado, does it spawn a different process/thread for each request ?"}, {"owner": {"reputation": 45, "user_id": 4511256, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/100001756063735/picture?type=large", "display_name": "\u0410\u043d\u0442\u043e\u043d \u041c\u0438\u0445\u0430\u0439\u043b\u043e\u0432", "link": "https://stackoverflow.com/users/4511256/%d0%90%d0%bd%d1%82%d0%be%d0%bd-%d0%9c%d0%b8%d1%85%d0%b0%d0%b9%d0%bb%d0%be%d0%b2"}, "edited": false, "score": 0, "creation_date": 1504198712, "post_id": 45969057, "comment_id": 78933246, "body": "In my mind limit ulimit load from  /etc/security/limits.conf with start system"}, {"owner": {"reputation": 45, "user_id": 4511256, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/100001756063735/picture?type=large", "display_name": "\u0410\u043d\u0442\u043e\u043d \u041c\u0438\u0445\u0430\u0439\u043b\u043e\u0432", "link": "https://stackoverflow.com/users/4511256/%d0%90%d0%bd%d1%82%d0%be%d0%bd-%d0%9c%d0%b8%d1%85%d0%b0%d0%b9%d0%bb%d0%be%d0%b2"}, "edited": false, "score": 0, "creation_date": 1504205861, "post_id": 45969057, "comment_id": 78936808, "body": "I, add ulimit -n 200000 in /root/.bashrc But i have same problem, host have one user, just root."}, {"owner": {"reputation": 1584, "user_id": 3775614, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tkkon.png?s=128&g=1", "display_name": "lee-pai-long", "link": "https://stackoverflow.com/users/3775614/lee-pai-long"}, "reply_to_user": {"reputation": 45, "user_id": 4511256, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/100001756063735/picture?type=large", "display_name": "\u0410\u043d\u0442\u043e\u043d \u041c\u0438\u0445\u0430\u0439\u043b\u043e\u0432", "link": "https://stackoverflow.com/users/4511256/%d0%90%d0%bd%d1%82%d0%be%d0%bd-%d0%9c%d0%b8%d1%85%d0%b0%d0%b9%d0%bb%d0%be%d0%b2"}, "edited": false, "score": 0, "creation_date": 1504208765, "post_id": 45969057, "comment_id": 78938231, "body": "I think you need to log out in log for the  value to take effect."}], "tags": [], "owner": {"reputation": 1584, "user_id": 3775614, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tkkon.png?s=128&g=1", "display_name": "lee-pai-long", "link": "https://stackoverflow.com/users/3775614/lee-pai-long"}, "is_accepted": false, "score": 2, "last_activity_date": 1504307379, "last_edit_date": 1504307379, "creation_date": 1504124419, "answer_id": 45969057, "question_id": 45968587, "link": "https://stackoverflow.com/questions/45968587/python-tornado-too-many-open-files-ssl/45969057#45969057", "title": "Python tornado Too many open files Ssl", "body": "<p>Your code seems to run multiple process or thread that all accessing to the ssl keyfile directly. Linux default <code>ulimit</code> is quick low and this error then occurs.</p>\n\n<p>You can check the current setting with:</p>\n\n<pre><code>$ ulimit -a\n</code></pre>\n\n<p>The quick and dirty solution is to increase this value:</p>\n\n<pre><code>$ ulimit -n &lt;new_value&gt;\n</code></pre>\n\n<p>Even <code>unlimited</code> is accepted with the <code>-n</code> option.</p>\n\n<p><em>Note: You can permanently set the value the app user <code>.bashrc</code> file.</em></p>\n\n<p>In both case you'll need to log out then log in for the change to take effect.</p>\n\n<p>But modifying this value is a bit dirty because it's a global value for a given user environment.</p>\n\n<p>The harder but cleaner solution is to find a way to load the content of the file in memory when your app load and make the loaded value/variable accessible for all processes.</p>\n"}], "owner": {"reputation": 45, "user_id": 4511256, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/100001756063735/picture?type=large", "display_name": "\u0410\u043d\u0442\u043e\u043d \u041c\u0438\u0445\u0430\u0439\u043b\u043e\u0432", "link": "https://stackoverflow.com/users/4511256/%d0%90%d0%bd%d1%82%d0%be%d0%bd-%d0%9c%d0%b8%d1%85%d0%b0%d0%b9%d0%bb%d0%be%d0%b2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 682, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1504307379, "creation_date": 1504122395, "last_edit_date": 1504125874, "question_id": 45968587, "link": "https://stackoverflow.com/questions/45968587/python-tornado-too-many-open-files-ssl", "title": "Python tornado Too many open files Ssl", "body": "<p>If i have many connection on my tornado server, i se error on log</p>\n\n<pre><code>Exception in callback (&lt;socket._socketobject object at 0x7f0b9053e3d0&gt;, &lt;function null_wrapper at 0x7f0b9054c140&gt;)\nTraceback (most recent call last):\n  File \"/usr/local/lib/python2.7/dist-packages/tornado/ioloop.py\", line 888, in start\n    handler_func(fd_obj, events)\n  File \"/usr/local/lib/python2.7/dist-packages/tornado/stack_context.py\", line 277, in null_wrapper\n    return fn(*args, **kwargs)\n  File \"/usr/local/lib/python2.7/dist-packages/tornado/netutil.py\", line 276, in accept_handler\n    callback(connection, address)\n  File \"/usr/local/lib/python2.7/dist-packages/tornado/tcpserver.py\", line 264, in _handle_connection\n  File \"/usr/local/lib/python2.7/dist-packages/tornado/netutil.py\", line 517, in ssl_wrap_socket\n    context = ssl_options_to_context(ssl_options)\n  File \"/usr/local/lib/python2.7/dist-packages/tornado/netutil.py\", line 494, in ssl_options_to_context\n    context.load_cert_chain(ssl_options['certfile'], ssl_options.get('keyfile', None))\nIOError: [Errno 24] Too many open files\n</code></pre>\n\n<p>and disconnect my client. Tornado open ssl certificate file on ewery connect? </p>\n\n<p>Tornado app</p>\n\n<pre><code>class VastWebSocket(tornado.websocket.WebSocketHandler):\nconnections = set()\ncurrent_connect = 0\ncurrent_user = 0\nstatus_play_vast = False\n\ndef open(self):\n    c = Connection()\n    c.connection = self\n\nVastWebSocket.connections.add(c)\nself.current_connect = c\n\ndef on_message(self, msg):\n\ndata = json.loads(msg)\n\napp_log.info(\"on message = \" + msg)\n\nif not 'status' in data:\n  return\n\nif data[\"status\"] == \"start_vast\":\n  VastWebSocket.status_play_vast = True\n\nif data[\"status\"] == \"end_vast\":\n  VastWebSocket.status_play_vast = False\n\napp_log.info(\"status_play_vast = \" + str(VastWebSocket.status_play_vast))\n\nif data[\"status\"] == \"get_status_vast\":\n  self.current_connect.connection.write_message({\"status\": VastWebSocket.status_play_vast})\n  return\n\nfor conn in self.connections:\n        conn.connection.write_message(msg)\n\n\ndef on_close(self):\nif self.current_connect &lt;&gt; 0:\n  VastWebSocket.connections.remove(self.current_connect)\n\n\ndef check_origin(self, origin):\nreturn True\n</code></pre>\n\n<p>Start tornado server from django command</p>\n\n<pre><code>class Command(BaseCommand):\n    help = 'Starts the Tornado application for message handling.'\n\ndef add_arguments(self, parser):\n    parser.add_argument('port_number', nargs='+', type=int)\n\ndef sig_handler(self, sig, frame):\n    \"\"\"Catch signal and init callback\"\"\"\n    tornado.ioloop.IOLoop.instance().add_callback(self.shutdown)\n\ndef shutdown(self):\n    \"\"\"Stop server and add callback to stop i/o loop\"\"\"\n    self.http_server.stop()\n\n    io_loop = tornado.ioloop.IOLoop.instance()\n    io_loop.add_timeout(time.time() + 2, io_loop.stop)\n\ndef handle(self, *args, **options):\n    if \"port_number\" in options:\n        try:\n            port = int(options[\"port_number\"][0])\n        except ValueError:\n            raise CommandError('Invalid port number specified')\n    else:\n        port = 8030\n\n    ssl_ctx = ssl.create_default_context(ssl.Purpose.CLIENT_AUTH)\n    ssl_ctx.load_cert_chain(os.path.join(\"/www/cert/\", \"rumma.crt\"),\n            os.path.join(\"/www/cert/\", \"rumma.key\"))\n\n    self.http_server = tornado.httpserver.HTTPServer(application, ssl_options = ssl_ctx)\n\n\n    self.http_server.bind(port, address=\"0.0.0.0\")\n    self.http_server.start(1)\n    # Init signals handler\n    signal.signal(signal.SIGTERM, self.sig_handler)\n\n    # This will also catch KeyboardInterrupt exception\n    signal.signal(signal.SIGINT, self.sig_handler)\n\n    tornado.ioloop.IOLoop.instance().start()\n</code></pre>\n\n<p>Why his open many file, in my mind need open ssl in start server and all.\nStackoverflow asks more info, but in top, all info all need. </p>\n"}, {"tags": ["python", "matlab", "pandas", "numpy"], "answers": [{"tags": [], "owner": {"reputation": 358, "user_id": 8386102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67fefdc8922341d2d24c1f821609f50c?s=128&d=identicon&r=PG&f=1", "display_name": "dugup", "link": "https://stackoverflow.com/users/8386102/dugup"}, "is_accepted": true, "score": 1, "last_activity_date": 1504124962, "creation_date": 1504124962, "answer_id": 45969190, "question_id": 45968564, "link": "https://stackoverflow.com/questions/45968564/modifying-a-numpy-array-after-conversion-from-pandas-dataframe/45969190#45969190", "title": "Modifying a numpy array after conversion from pandas dataframe", "body": "<p><code>insert</code> does not operate in place, you need to assign the output to a variable. Try:</p>\n\n<pre><code>Y = np.insert(Y, 0, ratings, axis=1)\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 3513118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/510153977/picture?type=large", "display_name": "AnyaK", "link": "https://stackoverflow.com/users/3513118/anyak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 45969190, "answer_count": 1, "score": 1, "last_activity_date": 1504279887, "creation_date": 1504122311, "last_edit_date": 1504279887, "question_id": 45968564, "link": "https://stackoverflow.com/questions/45968564/modifying-a-numpy-array-after-conversion-from-pandas-dataframe", "title": "Modifying a numpy array after conversion from pandas dataframe", "body": "<p>I have the following code which I am writing as part of a simple movie recommender in python so I can mimic the results I get as part of coursera's Machine Learning Course taught by Andrew NG.</p>\n\n<p>I want to modify the numpy.ndarray that I get after calling as_matrix() on the pandas dataframe and add a column vector to it like we can in MATLAB</p>\n\n<pre><code>Y = [ratings Y]\n</code></pre>\n\n<p>Following is my python code</p>\n\n<pre><code>dataFile='/filepath/'\n\nuserItemRatings = pd.read_csv(dataFile, sep=\"\\t\", names=['userId', 'movieId', 'rating','timestamp'])\nmovieInfoFile = '/filepath/'\nmovieInfo = pd.read_csv(movieInfoFile, sep=\"|\", names=['movieId','Title','Release Date','Video Release Date','IMDb URL','Unknown','Action','Adventure','Animation','Childrens','Comedy','Crime','Documentary','Drama','Fantasy','Film-Noir','Horror','Musical','Mystery','Romance','Sci-Fi','Thriller','War','Western'], encoding = \"ISO-8859-1\")\n\nuserMovieMatrix=pd.merge(userItemRatings, movieInfo, left_on='movieId', right_on='movieId')\nuserMovieSubMatrix = userMovieMatrix[['userId', 'movieId', 'rating','timestamp','Title']]\n\n\nY = pd.pivot_table(userMovieSubMatrix, values='rating', index=['movieId'], columns=['userId'])\nY.fillna(0,inplace=True)\nmovies = Y.shape[0]  \nusers = Y.shape[1] +1 \n\n\n\nratings = np.zeros((1682, 1))\n\nratings[0] = 4  \nratings[6] = 3  \nratings[11] = 5  \nratings[53] = 4  \nratings[63] = 5  \nratings[65] = 3  \nratings[68] = 5  \nratings[97] = 2  \nratings[182] = 4  \nratings[225] = 5  \nratings[354] = 5\n\nfeatures = 10\n\ntheta = pd.DataFrame(np.random.rand(users,features))# users 943*3 \nX = pd.DataFrame(np.random.rand(movies,features))# movies 1682 * 3\n\n\nX = X.as_matrix()\ntheta = theta.as_matrix()\n\nY = Y.as_matrix()\n\n\n\"\"\"want to insert a column vector into this Y to get a new Y of dimension \n   1682*944, but only seeing 1682*943 after the following statement\n\n\"\"\"\nnp.insert(Y, 0, ratings, axis=1)\n\nR = Y.copy()\nR[R!=0] = 1\n\n\n\n\n\nYmean = np.zeros((movies, 1))  \nYnorm = np.zeros((movies, users))\n\n\n\nfor i in range(movies):  \n    idx = np.where(R[i,:] == 1)[0]\n    Ymean[i] = Y[i,idx].mean()\n    Ynorm[i,idx] = Y[i,idx] - Ymean[i]\n\nprint(type(Ymean), type(Ynorm), type(Y), Y.shape)\nYnorm[np.isnan(Ynorm)] = 0.\nYmean[np.isnan(Ymean)] = 0.\n</code></pre>\n\n<p>There is an inline comment inserted, but my problem is when I create a new numpy array and call insert, it works just fine. However the numpy array I get after calling <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.as_matrix.html\" rel=\"nofollow noreferrer\">as_matrix()</a> on pandas dataframe on which <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.pivot_table.html\" rel=\"nofollow noreferrer\">pivot_table()</a> is called doesn't work. Is there any alternative? </p>\n"}, {"tags": ["python", "swift", "opencv", "numpy", "base64"], "comments": [{"owner": {"reputation": 3394, "user_id": 7264964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40abe04b1fd805f4fe2169ef2b1fb790?s=128&d=identicon&r=PG", "display_name": "Paolo", "link": "https://stackoverflow.com/users/7264964/paolo"}, "edited": false, "score": 0, "creation_date": 1504125225, "post_id": 45968561, "comment_id": 78897755, "body": "Are you saying that you are starting with RGB, sending it up to the server to do some things, and when it comes back to the client it&#39;s BGR? And you&#39;re wondering how to convert it back to BGR once it returns to the client?"}, {"owner": {"reputation": 358, "user_id": 8364675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/97972e2594a5babeae6c3acaa3757072?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan Ortega", "link": "https://stackoverflow.com/users/8364675/nathan-ortega"}, "reply_to_user": {"reputation": 3394, "user_id": 7264964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40abe04b1fd805f4fe2169ef2b1fb790?s=128&d=identicon&r=PG", "display_name": "Paolo", "link": "https://stackoverflow.com/users/7264964/paolo"}, "edited": false, "score": 0, "creation_date": 1504126346, "post_id": 45968561, "comment_id": 78898279, "body": "@Paolo: Yes, except for that last sentence. It comes back in BGR format and I want to convert it back to RGB format."}, {"owner": {"user_type": "does_not_exist", "display_name": "user887210"}, "edited": false, "score": 0, "creation_date": 1504149133, "post_id": 45968561, "comment_id": 78904116, "body": "Can you show how you&#39;re converting the image to base64 and then back to an image? Basically steps 2 and 3. It&#39;s very odd that you&#39;re getting a reversed order. A quick fix to reverse the order on the server might be to follow this: <a href=\"https://stackoverflow.com/q/4661557/887210\">stackoverflow.com/q/4661557/887210</a>"}, {"owner": {"reputation": 358, "user_id": 8364675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/97972e2594a5babeae6c3acaa3757072?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan Ortega", "link": "https://stackoverflow.com/users/8364675/nathan-ortega"}, "edited": false, "score": 0, "creation_date": 1504187741, "post_id": 45968561, "comment_id": 78926022, "body": "@ColGraff: I&#39;ve updated my question to include the code for steps 2 &amp; 3."}], "answers": [{"comments": [{"owner": {"reputation": 8137, "user_id": 7014451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c88303e9efdb9b80cfe1bbb61f9a69ae?s=128&d=identicon&r=PG&f=1", "display_name": "dfd", "link": "https://stackoverflow.com/users/7014451/dfd"}, "edited": false, "score": 0, "creation_date": 1504126330, "post_id": 45969420, "comment_id": 78898270, "body": "I posted a way to use <code>CoreImage</code> to do this. It <i>does</i> require iOS 9 as it uses a custom kernel. (If CoreImage itself was all that is needed it still would need iOS 8.) This was the very first kernel I ever wrote nearly two years ago and I just tested it. @Paolo, your way is intriguing! I&#39;ve never (yet) used openCV. I&#39;ll look at it."}], "tags": [], "owner": {"reputation": 3394, "user_id": 7264964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40abe04b1fd805f4fe2169ef2b1fb790?s=128&d=identicon&r=PG", "display_name": "Paolo", "link": "https://stackoverflow.com/users/7264964/paolo"}, "is_accepted": false, "score": 1, "last_activity_date": 1504125975, "creation_date": 1504125975, "answer_id": 45969420, "question_id": 45968561, "link": "https://stackoverflow.com/questions/45968561/convert-uiimage-from-bgr-to-rgb/45969420#45969420", "title": "Convert UIImage from BGR to RGB", "body": "<p>I don't think there's a way to do it using <code>CoreImage</code> or <code>CoreGraphics</code> since iOS does not give you much leeway with regards to creating custom colorspaces. However, I found something that may help using OpenCV from this article: <a href=\"https://sriraghu.com/2017/06/04/computer-vision-in-ios-swiftopencv/\" rel=\"nofollow noreferrer\">https://sriraghu.com/2017/06/04/computer-vision-in-ios-swiftopencv/</a>. It requires a bit of Objective-C but with a bridging header, the code will be hidden away once it's written.</p>\n\n<blockquote>\n  <ul>\n  <li>Add a new file -> \u2018Cocoa Touch Class\u2019, name it \u2018OpenCVWrapper\u2019 and set\n  language to Objective-C. Click Next and select Create. When it\n  prompted to create bridging header click on the \u2018Create Bridging\n  Header\u2019 button. Now you can observe that there are 3 files created\n  with names: OpenCVWrapper.h, OpenCVWrapper.m, and -Bridging-Header.h.\n  Open \u2018-Bridging-Header.h\u2019 and add the following line: #import\n  \u201cOpenCVWrapper.h\u201d</li>\n  <li>Go to \u2018OpenCVWrapper.h\u2019 file and add the following\n  lines of code:</li>\n  </ul>\n</blockquote>\n\n<pre><code>#import &lt;Foundation/Foundation.h&gt;\n#import &lt;UIKit/UIKit.h&gt;\n\n@interface OpenCVWrapper: NSObject\n\n+ (UIImage *) rgbImageFromBGRImage: (UIImage *) image;\n\n@end\n</code></pre>\n\n<blockquote>\n  <ul>\n  <li>Rename OpenCVWrapper.m to \u201cOpenCVWrapper.mm\u201d for C++ support and add the following code:</li>\n  </ul>\n</blockquote>\n\n<pre><code>#import \"OpenCVWrapper.h\"\n\n// import necessary headers\n#import &lt;opencv2/core.hpp&gt;\n#import &lt;opencv2/imgcodecs/ios.h&gt;\n#import &lt;opencv2/imgproc/imgproc.hpp&gt;\n\nusing namespace cv;\n\n@implementation OpenCVWrapper\n\n+ (UIImage *) rgbImageFromBGRImage: (UIImage *) image {\n    // Convert UIImage to cv::Mat\n    Mat inputImage; UIImageToMat(image, inputImage);\n    // If input image has only one channel, then return image.\n    if (inputImage.channels() == 1) return image;\n    // Convert the default OpenCV's BGR format to RGB.\n    Mat outputImage; cvtColor(inputImage, outputImage, CV_BGR2RGB);\n    // Convert the BGR OpenCV Mat to UIImage and return it.\n    return MatToUIImage(outputImage);\n}\n\n@end\n</code></pre>\n\n<p>The minor difference from the linked article is they are converting BGR to grayscale but we are converting BGR to RGB (<em>good thing OpenCV has <a href=\"http://docs.opencv.org/3.1.0/d7/d1b/group__imgproc__misc.html\" rel=\"nofollow noreferrer\">tons of conversions</a>!</em>).</p>\n\n<h2><em>Finally...</em></h2>\n\n<p>Now that there is a bridging header to this Objective-C class you can use <code>OpenCVWrapper</code> in Swift:</p>\n\n<pre><code>// assume bgrImage is your image from the server\nlet rgbImage = OpenCVWrapper.rgbImage(fromBGR: bgrImage)\n// double check the syntax on this ^ I'm not 100% sure how the bridging header will convert it\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 358, "user_id": 8364675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/97972e2594a5babeae6c3acaa3757072?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan Ortega", "link": "https://stackoverflow.com/users/8364675/nathan-ortega"}, "edited": false, "score": 0, "creation_date": 1504186385, "post_id": 45969446, "comment_id": 78925040, "body": "Thanks for your detailed response, unfortunately this didn&#39;t solve my problem, It just turned the background pink. I feel like this is an important detail, but I don&#39;t know what to make of it. I&#39;ve uploaded the results using your code  <a href=\"http://imgur.com/9Ar7kpX\" rel=\"nofollow noreferrer\">Here</a>."}, {"owner": {"reputation": 3394, "user_id": 7264964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40abe04b1fd805f4fe2169ef2b1fb790?s=128&d=identicon&r=PG", "display_name": "Paolo", "link": "https://stackoverflow.com/users/7264964/paolo"}, "reply_to_user": {"reputation": 358, "user_id": 8364675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/97972e2594a5babeae6c3acaa3757072?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan Ortega", "link": "https://stackoverflow.com/users/8364675/nathan-ortega"}, "edited": false, "score": 0, "creation_date": 1504186507, "post_id": 45969446, "comment_id": 78925134, "body": "@NathanOrtega it looks like he swapped red and green, try swapping red and blue instead, i.e. <code>return s.bgra;</code> instead of <code>return s.grba;</code>"}, {"owner": {"reputation": 8137, "user_id": 7014451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c88303e9efdb9b80cfe1bbb61f9a69ae?s=128&d=identicon&r=PG&f=1", "display_name": "dfd", "link": "https://stackoverflow.com/users/7014451/dfd"}, "edited": false, "score": 0, "creation_date": 1504187480, "post_id": 45969446, "comment_id": 78925831, "body": "Yeah, my bad. It was <i>my</i> code that wanted that. I&#39;ll edit my answer."}, {"owner": {"reputation": 358, "user_id": 8364675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/97972e2594a5babeae6c3acaa3757072?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan Ortega", "link": "https://stackoverflow.com/users/8364675/nathan-ortega"}, "edited": false, "score": 0, "creation_date": 1504188507, "post_id": 45969446, "comment_id": 78926605, "body": "Paolo: Thanks! that was it! And @dfd: I&#39;ll accept your answer as soon as you finish that edit."}, {"owner": {"reputation": 358, "user_id": 8364675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/97972e2594a5babeae6c3acaa3757072?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan Ortega", "link": "https://stackoverflow.com/users/8364675/nathan-ortega"}, "edited": false, "score": 0, "creation_date": 1504191239, "post_id": 45969446, "comment_id": 78928613, "body": "@dfd: your edit was close, but wasn&#39;t what I used to solve my problem, just change <code>return s.gbra;</code> to <code>return s.bgra;</code> in your answer."}, {"owner": {"reputation": 8137, "user_id": 7014451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c88303e9efdb9b80cfe1bbb61f9a69ae?s=128&d=identicon&r=PG&f=1", "display_name": "dfd", "link": "https://stackoverflow.com/users/7014451/dfd"}, "edited": false, "score": 0, "creation_date": 1504191790, "post_id": 45969446, "comment_id": 78928985, "body": "Done. I&#39;ve always felt I was somewhat dyslexic - now I know! Anyways, I&#39;m glad I help you with your issue."}, {"owner": {"reputation": 4947, "user_id": 4008175, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/04XNG.jpg?s=128&g=1", "display_name": "App Dev Guy", "link": "https://stackoverflow.com/users/4008175/app-dev-guy"}, "edited": false, "score": 0, "creation_date": 1614309818, "post_id": 45969446, "comment_id": 117352626, "body": "Caution with this one - it works, however it&#39;s deprecated and causing memory leaks."}, {"owner": {"reputation": 8137, "user_id": 7014451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c88303e9efdb9b80cfe1bbb61f9a69ae?s=128&d=identicon&r=PG&f=1", "display_name": "dfd", "link": "https://stackoverflow.com/users/7014451/dfd"}, "reply_to_user": {"reputation": 4947, "user_id": 4008175, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/04XNG.jpg?s=128&g=1", "display_name": "App Dev Guy", "link": "https://stackoverflow.com/users/4008175/app-dev-guy"}, "edited": false, "score": 1, "creation_date": 1614311937, "post_id": 45969446, "comment_id": 117352993, "body": "@AppDevGuy, I&#39;ll add a note about the depreciation. In my defense note that Apple deprecated OpenGL (I&#39;m assuming that&#39;s what you are referring to) almost 2 years after my answer. As for the memory leak? I have none in my usage, but maybe it&#39;s <i>how</i> it&#39;s being implemented. Thanks for the heads up!"}, {"owner": {"reputation": 4947, "user_id": 4008175, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/04XNG.jpg?s=128&g=1", "display_name": "App Dev Guy", "link": "https://stackoverflow.com/users/4008175/app-dev-guy"}, "edited": false, "score": 0, "creation_date": 1614312103, "post_id": 45969446, "comment_id": 117353021, "body": "No probs and agreed - I should have included in my comment how I am using it which led to the discovery of memory leaks - <code>CIContext</code> is not clearing the cache so there&#39;s a build  up of memory in my specific use."}], "tags": [], "owner": {"reputation": 8137, "user_id": 7014451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c88303e9efdb9b80cfe1bbb61f9a69ae?s=128&d=identicon&r=PG&f=1", "display_name": "dfd", "link": "https://stackoverflow.com/users/7014451/dfd"}, "is_accepted": true, "score": 6, "last_activity_date": 1614312292, "last_edit_date": 1614312292, "creation_date": 1504126076, "answer_id": 45969446, "question_id": 45968561, "link": "https://stackoverflow.com/questions/45968561/convert-uiimage-from-bgr-to-rgb/45969446#45969446", "title": "Convert UIImage from BGR to RGB", "body": "<p>Here's a very simple CIKernel to swap things:</p>\n<pre><code>kernel vec4 swapRedAndGreenAmount(__sample s) {\n    return s.bgra;\n}\n</code></pre>\n<p>Here's the Swift code to use it:</p>\n<pre><code>let uiInput = UIImage(named: &quot;myImage&quot;)\nlet ciInput = CIImage(image: uiInput!)\nlet ctx = CIContext(options: nil)\nlet swapKernel = CIColorKernel( source:\n    &quot;kernel vec4 swapRedAndGreenAmount(__sample s) {&quot; +\n        &quot;return s.bgra;&quot; +\n    &quot;}&quot;\n)\nlet ciOutput = swapKernel?.apply(extent: (ciInput?.extent)!, arguments: [ciInput as Any])\nlet cgImage = ctx.createCGImage(ciOutput!, from: (ciInput?.extent)!)\nlet uiOutput = UIImage(cgImage: cgImage!)\n</code></pre>\n<p>Be aware of a few things:</p>\n<ul>\n<li>This will work on devices running <strong>iOS 9 or later</strong>.</li>\n<li>Second and almost as important, this uses CoreImage and the GPU. Thus, testing this on a simulator may take seconds to render. But on a device it will take microseconds.</li>\n<li>I tend to use a <code>CIContext</code> to create a <code>CGImage</code> before ending up with a <code>UIImage</code>. You <em>may</em> be able to remove this step and go straight from a <code>CIImage</code> to a <code>UIImage</code>.</li>\n<li>Excuse the wrapping/unwrapping, it's converted from old code. You can probably do a better job.</li>\n</ul>\n<p><strong>Explanation:</strong></p>\n<p>Using CoreImage &quot;Kernel&quot; code, which until iOS 11 could only be a subset of GLSL code, I wrote a simple <code>CIColorKernel</code> that takes a pixel's RGB value and returns the pixel color as GRB.</p>\n<p>A <code>CIColorKernel</code> is optimized to work on a single pixel at a time with <em>no</em> access to the pixels surrounding it. Unlike that, a <code>CIWarpKernel</code> is optimized to &quot;warp&quot; a pixel based on the pixels around it. Both of these are (more or less) optimized subclasses of a <code>CIKernel</code>, which - until iOS 11 and Metal Performance Shaders - is about the closest you get to using <code>openGL</code> inside of <code>CoreImage</code>.</p>\n<p><strong>Final edit:</strong></p>\n<p>What this solution does is <strong>swap</strong> a pixel's RGB one-by-one using CoreImage. It's fast because it uses the GPU, deceptively fast (because the simulator does not give you anything close to real-time performance on a device), and simple (because it swaps things from RGB to BGR).</p>\n<p>The actual code to do this is straightforward. Hopefully it works as a start for those who want to do much larger &quot;under the hood&quot; things using CoreImage.</p>\n<p><strong>EDIT (25 February 2021):</strong></p>\n<p>As of WWDC 2019 Apple deprecated openGL - specifically <code>GLKit</code> - in favor of <code>MetalKit</code>. For a color kernel like this, it's rather trivial to convert this code. Warp kernels are slightly more trickier though.</p>\n<p>As for <em>when</em> Apple will &quot;kill&quot; OpenGL is hard to say. We all know that someday <code>UIKit</code> will also be deprecated, but (showing my age now) it may not be in my lifetime. YMMV.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user887210"}, "is_accepted": false, "score": 1, "last_activity_date": 1504128898, "creation_date": 1504128898, "answer_id": 45970049, "question_id": 45968561, "link": "https://stackoverflow.com/questions/45968561/convert-uiimage-from-bgr-to-rgb/45970049#45970049", "title": "Convert UIImage from BGR to RGB", "body": "<p>You can use the underlying CGImage to create a CIImage in the format you desire. </p>\n\n<pre><code>func changeToRGBA8(image: UIImage) -&gt; UIImage? {\n  guard let cgImage = image.cgImage,\n    let data = cgImage.dataProvider?.data else { return nil }\n    let flipped = CIImage(bitmapData: data as Data,\n                          bytesPerRow: cgImage.bytesPerRow,\n                          size: CGSize(width: cgImage.width, height: cgImage.height),\n                          format: kCIFormatRGBA8,\n                          colorSpace: cgImage.colorSpace)\n    return UIImage(ciImage: flipped)\n}\n</code></pre>\n\n<p>The only issue is this only works if the <code>UIImage</code> was created with a <code>CGImage</code> in the first place! You can also convert it to a <code>CIImage</code> then a <code>CGImage</code> but the same applies, it only works if the <code>UIImage</code> was created from a <code>CIImage</code>.</p>\n\n<p>There are ways around this limitation that I'll explore and post here if I have a better answer.</p>\n"}], "owner": {"reputation": 358, "user_id": 8364675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/97972e2594a5babeae6c3acaa3757072?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan Ortega", "link": "https://stackoverflow.com/users/8364675/nathan-ortega"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1988, "favorite_count": 0, "accepted_answer_id": 45969446, "answer_count": 3, "score": 2, "last_activity_date": 1614312292, "creation_date": 1504122300, "last_edit_date": 1504192277, "question_id": 45968561, "link": "https://stackoverflow.com/questions/45968561/convert-uiimage-from-bgr-to-rgb", "title": "Convert UIImage from BGR to RGB", "body": "<p>As the title suggests, I'm having some trouble with some UIImage color space conversions. The TL;DR version is that I need a way to convert a UIIMage in BGR format to RGB. </p>\n\n<p>Here's the flow of events in my app:</p>\n\n<ol>\n<li>App: get Image</li>\n<li>App: convert to base64 and send to server</li>\n<li>Server: convert base64 to an Image to use</li>\n<li>Server: convert Image back to base64 String</li>\n<li>Server: send base64 string to app</li>\n<li>App: convert base64 string to UIImage</li>\n</ol>\n\n<p><a href=\"https://i.stack.imgur.com/Wwsp1.png\" rel=\"nofollow noreferrer\">RGB version of the Test-Image on the server</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/U4cbp.png\" rel=\"nofollow noreferrer\">BGR version of the Test-Image client-side</a></p>\n\n<p>It's at this point that the UIImage displayed is in BGR format. My best guess is that something goes wrong at step 4, because up until then the image is in RGB format (I've written it to a file and checked). I've added the code to step 4 below just for reference. I'm actively looking to change the color space of the UIImage client-side, but I'm not opposed to fixing the issue server-side. Either solution would work.</p>\n\n<p>Step 2: Convert UIIMage to base64 string</p>\n\n<pre><code>  let imageData: Data = UIImageJPEGRepresentation(map.image,0.95)!\n  let base64EnCodedStr: String = imageData.base64EncodedString()\n</code></pre>\n\n<p>Step 3: Convert base64 String to a PIL Image</p>\n\n<pre><code>import io\nimport cv2\nimport base64 \nimport numpy as np\nfrom PIL import Image\n\n# Take in base64 string and return PIL image\ndef stringToImage(base64_string):\n    imgdata = base64.b64decode(base64_string)\n    return Image.open(io.BytesIO(imgdata))\n</code></pre>\n\n<p>Step 4: Convert Image (numpy array) back to a base64 string</p>\n\n<pre><code># Convert a numpyArray into a base64 string in JPEG format\ndef imageToString(npArray):\n\n    # convert array to PIL Image\n    newImage = Image.fromarray(npArray.astype('uint8'), 'RGB')\n\n    # convert to JPEG format\n    file = io.BytesIO()\n    newImage.save(file, format=\"JPEG\")\n\n    # reset file pointer to start\n    file.seek(0)\n    img_bytes = file.read()\n\n    # encode data\n    encodedData = base64.b64encode(img_bytes)\n\n    return encodedData.decode('ascii')\n</code></pre>\n\n<h1>EDIT:</h1>\n\n<p>As was mentioned earlier, there were two locations where I could do the conversions: Sever-side or client-side. Thanks to the responses to this question I was able to find solutions for both scenarios. </p>\n\n<h2>Solution 1: Server-side</h2>\n\n<p>referring to the code in step 4, change the first line in that function to the following:</p>\n\n<pre><code> # convert array to PIL Image\n newImage = Image.fromarray( npArray[...,[2,1,0]] ) # swap color channels which converts BGR -&gt; RGB\n</code></pre>\n\n<h2>Solution 2: Client-side</h2>\n\n<p>Refer to @dfd 's solution. It's well written and works wonderfully. Here's the slightly adapted version I've tested in my application (which uses swift 4).</p>\n\n<pre><code>let data =  NSData(base64Encoded: base64String, options: .ignoreUnknownCharacters)\n\nlet uiInput = UIImage(data: data! as Data)\nlet ciInput = CIImage(image: uiInput!)\nlet ctx = CIContext(options: nil)\nlet swapKernel = CIColorKernel( string:\n    \"kernel vec4 swapRedAndGreenAmount(__sample s) {\" +\n                 \"return s.bgra;\" +\n     \"}\"\n)\nlet ciOutput = swapKernel?.apply(withExtent: (ciInput?.extent)!, arguments: [ciInput as Any])\nlet cgImage = ctx.createCGImage(ciOutput!, from: (ciInput?.extent)!)\nlet rgbOutput = UIImage(cgImage: cgImage!)\n</code></pre>\n"}, {"tags": ["python", "json", "web-scraping", "python-requests", "scraper"], "comments": [{"owner": {"reputation": 2400, "user_id": 5266746, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/cb43ae82055fed862c2ba3e6ed9c8e9f?s=128&d=identicon&r=PG&f=1", "display_name": "n1c9", "link": "https://stackoverflow.com/users/5266746/n1c9"}, "edited": false, "score": 0, "creation_date": 1504122385, "post_id": 45968540, "comment_id": 78896280, "body": "The URL, at least as written in this question, is not valid."}, {"owner": {"reputation": 763, "user_id": 1337299, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EbIWe.jpg?s=128&g=1", "display_name": "Kamran", "link": "https://stackoverflow.com/users/1337299/kamran"}, "edited": false, "score": 0, "creation_date": 1504122410, "post_id": 45968540, "comment_id": 78896294, "body": "The response is HTML, not JSON, so that&#39;s not going to work."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 8296459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6deb0b3f38344ab94e54f2ba6be4f194?s=128&d=identicon&r=PG&f=1", "display_name": "david plotkin", "link": "https://stackoverflow.com/users/8296459/david-plotkin"}, "edited": false, "score": 0, "creation_date": 1504124978, "post_id": 45968684, "comment_id": 78897630, "body": "The status is indeed 403, is there anyway I can still scrap the data?"}, {"owner": {"reputation": 730, "user_id": 8240959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11513a67f5ce87c84cd40ac943ffe69b?s=128&d=identicon&r=PG&f=1", "display_name": "jlaur", "link": "https://stackoverflow.com/users/8240959/jlaur"}, "edited": false, "score": 0, "creation_date": 1504127791, "post_id": 45968684, "comment_id": 78898919, "body": "Have you tried adding a header with basic stuff like user-agent?"}, {"owner": {"reputation": 11, "user_id": 8296459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6deb0b3f38344ab94e54f2ba6be4f194?s=128&d=identicon&r=PG&f=1", "display_name": "david plotkin", "link": "https://stackoverflow.com/users/8296459/david-plotkin"}, "reply_to_user": {"reputation": 730, "user_id": 8240959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11513a67f5ce87c84cd40ac943ffe69b?s=128&d=identicon&r=PG&f=1", "display_name": "jlaur", "link": "https://stackoverflow.com/users/8240959/jlaur"}, "edited": false, "score": 0, "creation_date": 1504171572, "post_id": 45968684, "comment_id": 78914506, "body": "@jlaur I did try adding a header with user-agent, I am pretty new to the requests library and do not understand what those extra parameters do, I&#39;ve only been using requests.get(url), didn&#39;t add any parameters to it."}, {"owner": {"reputation": 730, "user_id": 8240959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11513a67f5ce87c84cd40ac943ffe69b?s=128&d=identicon&r=PG&f=1", "display_name": "jlaur", "link": "https://stackoverflow.com/users/8240959/jlaur"}, "edited": false, "score": 0, "creation_date": 1504173362, "post_id": 45968684, "comment_id": 78915784, "body": "Read this: <a href=\"http://docs.python-requests.org/en/master/user/advanced/\" rel=\"nofollow noreferrer\">docs.python-requests.org/en/master/user/advanced</a>. Basicalle you instantiate the session class like so: session = requests.Session(). You then first query the sites real url (the first link in your post). Like so: response = session.get(your_url, headers=your_header). This should store a cookie in requests. You should then query the link that gives you the 403. real_response = session.get(json_url, headers=your_header)."}], "tags": [], "owner": {"reputation": 1488, "user_id": 102476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7daec2f9052c7c1690422d0d74c3b7d?s=128&d=identicon&r=PG", "display_name": "Joe Germuska", "link": "https://stackoverflow.com/users/102476/joe-germuska"}, "is_accepted": false, "score": 0, "last_activity_date": 1504122813, "creation_date": 1504122813, "answer_id": 45968684, "question_id": 45968540, "link": "https://stackoverflow.com/questions/45968540/getting-json-data-from-football-site-with-python/45968684#45968684", "title": "Getting json data from football site with python", "body": "<p>When executing your code as provided, the response comes back with a 403 \"Forbidden\" status.</p>\n\n<p>Probably this provider doesn't want their data scraped and checks the request for signs of non-browser access, and returns this error.</p>\n\n<p>Be sure to check your <code>response.status_code</code> before proceeding.</p>\n"}], "owner": {"reputation": 11, "user_id": 8296459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6deb0b3f38344ab94e54f2ba6be4f194?s=128&d=identicon&r=PG&f=1", "display_name": "david plotkin", "link": "https://stackoverflow.com/users/8296459/david-plotkin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 361, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1504122813, "creation_date": 1504122213, "question_id": 45968540, "link": "https://stackoverflow.com/questions/45968540/getting-json-data-from-football-site-with-python", "title": "Getting json data from football site with python", "body": "<p>I am trying to scrape the website in this link:</p>\n\n<p><a href=\"https://www.whoscored.com/Players/11119/Show/Lionel-Messi\" rel=\"nofollow noreferrer\">https://www.whoscored.com/Players/11119/Show/Lionel-Messi</a></p>\n\n<p>I want to get the data from the Summary, Defensive, Offensive tabs and i tried\nthis:</p>\n\n<pre><code>import requests\n# This is the json data link i wish to get from the defensive tab (from developer tools)\nurl = \"https://www.whoscored.com/StatisticsFeed/1/GetPlayerStatistics?category=summary&amp;subcategory=defensive&amp;statsAccumulationType=0&amp;isCurrent=true&amp;playerId=11119&amp;teamIds=&amp;matchId=&amp;stageId=&amp;tournamentOptions=&amp;sortBy=Rating&amp;sortAscending=&amp;age=&amp;ageComparisonType=&amp;appearances=&amp;appearancesComparisonType=&amp;field=Overall&amp;nationality=&amp;positionOptions=&amp;timeOfTheGameEnd=&amp;timeOfTheGameStart=&amp;isMinApp=false&amp;page=&amp;includeZeroValues=true&amp;numberOfPlayersToPick=\"\n\nresponse = requests.get(url)\n\nprint(response.json())\n</code></pre>\n\n<p>I can't manage to print the json data and scrape the data I need from the tab, am I doing anything wrong?\nThanks for the help.</p>\n"}, {"tags": ["python", "pandas", "dataframe", "mapping"], "answers": [{"tags": [], "owner": {"reputation": 58812, "user_id": 2137255, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/zzmt4.png?s=128&g=1", "display_name": "Zero", "link": "https://stackoverflow.com/users/2137255/zero"}, "is_accepted": false, "score": 1, "last_activity_date": 1504122859, "creation_date": 1504122859, "answer_id": 45968694, "question_id": 45968533, "link": "https://stackoverflow.com/questions/45968533/find-data-from-row-in-pandas-dataframe-based-upon-calculated-value/45968694#45968694", "title": "Find data from row in Pandas DataFrame based upon calculated value?", "body": "<p>You could</p>\n\n<pre><code>In [370]: (df[['A', 'C']].assign(B=2*df.A - df.B)\n           .merge(df, how='left', on=['A', 'B'])\n           .assign(B=df.B)\n           .rename(columns={'C_x': 'C', 'C_y': 'D'}) )\nOut[370]:\n   A  C  B    D\n0  2  0  1  2.0\n1  2  1  2  1.0\n2  2  2  3  0.0\n3  3  3  1  6.0\n4  3  4  3  4.0\n5  3  5  4  NaN\n6  3  6  5  3.0\n</code></pre>\n\n<p>Details:</p>\n\n<pre><code>In [372]: df[['A', 'C']].assign(B=2*df.A - df.B)\nOut[372]:\n   A  C  B\n0  2  0  3\n1  2  1  2\n2  2  2  1\n3  3  3  5\n4  3  4  3\n5  3  5  2\n6  3  6  1\n\nIn [373]: df[['A', 'C']].assign(B=2*df.A - df.B).merge(df, how='left', on=['A', 'B'])\nOut[373]:\n   A  C_x  B  C_y\n0  2    0  3  2.0\n1  2    1  2  1.0\n2  2    2  1  0.0\n3  3    3  5  6.0\n4  3    4  3  4.0\n5  3    5  2  NaN\n6  3    6  1  3.0\n</code></pre>\n"}], "owner": {"reputation": 321, "user_id": 2317426, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/1aa5bf7ca69a6a629b113b2d4c115c16?s=128&d=identicon&r=PG", "display_name": "DakotaD", "link": "https://stackoverflow.com/users/2317426/dakotad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1504122859, "creation_date": 1504122180, "question_id": 45968533, "link": "https://stackoverflow.com/questions/45968533/find-data-from-row-in-pandas-dataframe-based-upon-calculated-value", "title": "Find data from row in Pandas DataFrame based upon calculated value?", "body": "<p>As an extension of <a href=\"https://stackoverflow.com/questions/45945407/fastest-method-of-finding-data-from-another-row-in-pandas-dataframe-based-upon-c/45945880#45945880\">my previous question</a>, I would like take a DataFrame like the one below and find the correct row from which to pull data from column <code>C</code> and place it into column <code>D</code> based upon the following criteria:</p>\n\n<ol>\n<li><code>B_new = 2*A_old -B_old</code>, ie. the new row needs to have a <code>B</code> equal to the following result from the old row: <code>2*A - B</code>.</li>\n<li>Where <code>A</code> is the same, ie. <code>A</code> in the new row should have the same value as the old row.</li>\n<li>Any values not found should use a <code>NaN</code> result</li>\n</ol>\n\n<p>Code:</p>\n\n<pre><code>import pandas as pd\na = [2,2,2,3,3,3,3]\nb = [1,2,3,1,3,4,5]\nc = [0,1,2,3,4,5,6]\n\ndf = pd.DataFrame({'A': a , 'B': b, 'C':c})\nprint(df)\n\n   A  B  C\n0  2  1  0\n1  2  2  1\n2  2  3  2\n3  3  1  3\n4  3  3  4\n5  3  4  5\n6  3  5  6\n</code></pre>\n\n<p>Desired output:</p>\n\n<pre><code>   A  B  C    D\n0  2  1  0  2.0\n1  2  2  1  1.0\n2  2  3  2  0.0\n3  3  1  3  6.0\n4  3  3  4  4.0\n5  3  4  5  NaN\n6  3  5  6  3.0\n</code></pre>\n\n<p>Based upon the solutions in <a href=\"https://stackoverflow.com/questions/45945407/fastest-method-of-finding-data-from-another-row-in-pandas-dataframe-based-upon-c/45945880#45945880\">my previous question</a>, I've come up with a method that uses a for loop to move thru each unique value of <code>A</code>:</p>\n\n<pre><code>for i in df.A.unique():\n    mapping = dict(df[df.A==i][['B', 'C']].values)\n    df.loc[df.A==i,'D'] = (2 * df[df.A==i]['A'] - df[df.A==i]['B']).map(mapping)\n</code></pre>\n\n<p>However, this seem clunky and I suspect there is a better way that doesn't make use of for loops, which from my prior experience tend to be slow.</p>\n\n<p>Question:\nWhat's the fastest way to accomplish this transfer of data within the DataFrame? </p>\n"}, {"tags": ["python", "python-2.7", "pandas", "series"], "answers": [{"comments": [{"owner": {"reputation": 296, "user_id": 5221163, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/f2zfW.png?s=128&g=1", "display_name": "andraiamatrix", "link": "https://stackoverflow.com/users/5221163/andraiamatrix"}, "edited": false, "score": 0, "creation_date": 1504122800, "post_id": 45968635, "comment_id": 78896469, "body": "well that was simpler than I expected. Thanks!"}, {"owner": {"reputation": 11190, "user_id": 48956, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/06f001142c96af8fb111127e63d92579?s=128&d=identicon&r=PG", "display_name": "user48956", "link": "https://stackoverflow.com/users/48956/user48956"}, "edited": false, "score": 0, "creation_date": 1504283420, "post_id": 45968635, "comment_id": 78969874, "body": "Hmm... it seem like you should able to do:  series[series==user].index.sample(n). Doesn&#39;t series[series==user].sample(n) create an unnecessary intermediate series? (Sadly there&#39;s no sample function on index)."}], "tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": true, "score": 3, "last_activity_date": 1504122603, "creation_date": 1504122603, "answer_id": 45968635, "question_id": 45968529, "link": "https://stackoverflow.com/questions/45968529/return-the-index-using-pandas-series-sample/45968635#45968635", "title": "return the index using pandas series.sample()?", "body": "<p>Let's try and use <code>.index</code> after sample to return the indexes of those samples:</p>\n\n<pre><code>sample_dict[user] = series[series==user].sample(n=sample_size, replace=False).index\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 33, "user_id": 6777944, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QT3RSMB0W_s/AAAAAAAAAAI/AAAAAAAAAGo/q64lBLT_SEY/photo.jpg?sz=128", "display_name": "Ameb", "link": "https://stackoverflow.com/users/6777944/ameb"}, "is_accepted": false, "score": 1, "last_activity_date": 1576150292, "creation_date": 1576150292, "answer_id": 59303630, "question_id": 45968529, "link": "https://stackoverflow.com/questions/45968529/return-the-index-using-pandas-series-sample/59303630#59303630", "title": "return the index using pandas series.sample()?", "body": "<p>As <a href=\"https://stackoverflow.com/questions/45968529/return-the-index-using-pandas-series-sample#comment78969874_45968635\">@user48956 commented</a> on accepted answer, is much faster to sample over the index using <a href=\"https://docs.scipy.org/doc/numpy-1.15.0/reference/generated/numpy.random.choice.html#numpy.random.choice\" rel=\"nofollow noreferrer\">numpy.random.choice</a></p>\n\n<pre class=\"lang-py prettyprint-override\"><code>np.random.seed(42)\ndf = pd.DataFrame(np.random.randint(0,100,size=(10000000, 4)), columns=list('ABCD'))\n%time df.sample(100000).index\nprint(_)\n%time pd.Index(np.random.choice(df.index, 100000))\n</code></pre>\n\n<pre><code>Wall time: 710 ms\nInt64Index([7141956, 9256789, 1919656, 2407372, 9181191, 2474961, 2345700,\n            4394530, 8864037, 6096638,\n            ...\n             471501, 3616956, 9397742, 6896140,  670892, 9546169, 4146996,\n            3465455, 7748682, 5271367],\n           dtype='int64', length=100000)\nWall time: 6.05 ms\n\nInt64Index([7141956, 9256789, 1919656, 2407372, 9181191, 2474961, 2345700,\n            4394530, 8864037, 6096638,\n            ...\n             471501, 3616956, 9397742, 6896140,  670892, 9546169, 4146996,\n            3465455, 7748682, 5271367],\n           dtype='int64', length=100000)\n</code></pre>\n"}], "owner": {"reputation": 296, "user_id": 5221163, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/f2zfW.png?s=128&g=1", "display_name": "andraiamatrix", "link": "https://stackoverflow.com/users/5221163/andraiamatrix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4380, "favorite_count": 0, "accepted_answer_id": 45968635, "answer_count": 2, "score": 5, "last_activity_date": 1576150292, "creation_date": 1504122171, "question_id": 45968529, "link": "https://stackoverflow.com/questions/45968529/return-the-index-using-pandas-series-sample", "title": "return the index using pandas series.sample()?", "body": "<p>I have a pandas series where the values vary between a few different users. What I wanted to do was grab a random sample from each user, and return the index values of the random sample.</p>\n\n<p>The series looks something like this (each user appears on multiple rows):</p>\n\n<pre><code>index    \nrow1    user1\nrow2    user2\nrow3    user2\nrow4    user1\nrow5    user2\nrow6    user1\nrow7    user3\n...\n</code></pre>\n\n<p>The function I wrote looks like this:</p>\n\n<pre><code>def get_random_sample(series, sample_size, users):\n\"\"\" Grab a random sample of size sample_size of the tickets resolved by each user in the list users.\n    Series has the ticket number as index, and the username as the series values.\n    Returns a dict {user:[sample_tickets]}\n\"\"\"\n    sample_dict = {}\n    for user in users: \n        sample_dict[user] = series[series==user].sample(n=sample_size, replace=False) \n\n    return sample_dict\n</code></pre>\n\n<p>What's being returned is the following:</p>\n\n<pre><code># assuming sample_size is 4\n{user1: [user1, user1, user1, user1],\n user2: [user2, user2, user2, user2],\n...}\n</code></pre>\n\n<p>But what I want to get for my output is:</p>\n\n<pre><code>{user1: [row1, row6, row32, row40],\n user2: [row3, row5, row17, row39],\n...}\n# where row# is the index label for the corresponding row.\n</code></pre>\n\n<p>Basically I want to have pandas series.sample() to return the indices of the random sample items instead of the item values. Not sure if this is possible or if I'm better off restructuring my data first (maybe have the users as the series names in a dataframe and the indices become the values under that series? not sure how to do this though).\nAny insight is appreciated.</p>\n"}]