[{"tags": ["python", "matplotlib", "slider", "odeint"], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 7859227, "user_type": "registered", "profile_image": "https://graph.facebook.com/1548759261803595/picture?type=large", "display_name": "Hana", "link": "https://stackoverflow.com/users/7859227/hana"}, "edited": false, "score": 0, "creation_date": 1492048065, "post_id": 43382206, "comment_id": 73826486, "body": "Many many thanks, this is my very first time here, will post what I did not and did not work... Could not manipulate the output"}, {"owner": {"reputation": 51, "user_id": 7859227, "user_type": "registered", "profile_image": "https://graph.facebook.com/1548759261803595/picture?type=large", "display_name": "Hana", "link": "https://stackoverflow.com/users/7859227/hana"}, "edited": false, "score": 0, "creation_date": 1492048319, "post_id": 43382206, "comment_id": 73826541, "body": "I made a comment with the code I was trying to get my solution from. Sorry I have not posted it in my initial Q; will bare this in my mind from now on. Many thanks!"}, {"owner": {"reputation": 1669, "user_id": 3026320, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V7Nb6.jpg?s=128&g=1", "display_name": "berna1111", "link": "https://stackoverflow.com/users/3026320/berna1111"}, "reply_to_user": {"reputation": 51, "user_id": 7859227, "user_type": "registered", "profile_image": "https://graph.facebook.com/1548759261803595/picture?type=large", "display_name": "Hana", "link": "https://stackoverflow.com/users/7859227/hana"}, "edited": false, "score": 0, "creation_date": 1492048330, "post_id": 43382206, "comment_id": 73826545, "body": "My guess would go to not using [<code>on_changed</code> ](<a href=\"http://matplotlib.org/api/widgets_api.html#matplotlib.widgets.Slider\" rel=\"nofollow noreferrer\">matplotlib.org/api/widgets_api.html#matplotlib.widgets.Sli&zwnj;&#8203;der</a>) to associate the change in the sliders to the call of the function to change the data on the graph. But you already showed effort by showing your research, so don&#39;t dwell on it."}, {"owner": {"reputation": 1669, "user_id": 3026320, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V7Nb6.jpg?s=128&g=1", "display_name": "berna1111", "link": "https://stackoverflow.com/users/3026320/berna1111"}, "reply_to_user": {"reputation": 51, "user_id": 7859227, "user_type": "registered", "profile_image": "https://graph.facebook.com/1548759261803595/picture?type=large", "display_name": "Hana", "link": "https://stackoverflow.com/users/7859227/hana"}, "edited": false, "score": 0, "creation_date": 1492049249, "post_id": 43382206, "comment_id": 73826737, "body": "And my previous comment was wrong, I should apologize... Last edit: added <code>ax.set_ylim([0, np.max([prey, predator])])</code> so you can always see the function. And leave you a question: shouldn&#39;t you round those results to <code>int</code> values?"}, {"owner": {"reputation": 51, "user_id": 7859227, "user_type": "registered", "profile_image": "https://graph.facebook.com/1548759261803595/picture?type=large", "display_name": "Hana", "link": "https://stackoverflow.com/users/7859227/hana"}, "edited": false, "score": 0, "creation_date": 1492060517, "post_id": 43382206, "comment_id": 73829687, "body": "would you also know how to make direction fields and trajectories in the phase plane for this code? I was using this: <a href=\"http://stackoverflow.com/questions/43383595/direction-fields-and-trajectories-in-the-phase-plane\" title=\"direction fields and trajectories in the phase plane\">stackoverflow.com/questions/43383595/&hellip;</a> but unfortunately unsuccessfully..."}], "tags": [], "owner": {"reputation": 1669, "user_id": 3026320, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V7Nb6.jpg?s=128&g=1", "display_name": "berna1111", "link": "https://stackoverflow.com/users/3026320/berna1111"}, "is_accepted": true, "score": 2, "last_activity_date": 1492049291, "last_edit_date": 1492049291, "creation_date": 1492047728, "answer_id": 43382206, "question_id": 43381449, "link": "https://stackoverflow.com/questions/43381449/how-to-make-two-sliders-in-matplotlib/43382206#43382206", "title": "How to make two sliders in matplotlib", "body": "<p>From the example, hope the comments help you understand what's what:</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\nfrom matplotlib.widgets import Slider, Button, RadioButtons\nfrom scipy.integrate import odeint\n\n# Function to draw\ndef lotka(x, t, params):\n    N, P = x\n    alpha, beta, gamma, delta = params \n    derivs = [alpha*N - beta*N*P, gamma*N*P - delta*P] \n    return derivs\n\n# Parameters\nNmin = 1\nNmax = 100\nPmin = 1\nPmax = 100\nN0 = 2\nP0 = 1\nalpha = 3\nbeta = 0.5\ngamma = 0.4\ndelta = 3\n\nparams = [alpha, beta, gamma, delta]\nx0=[N0,P0]\nmaxt = 20\ntstep = 0.01\n\n# Initial function values\nt = np.arange(0, maxt, tstep)\nprey, predator = odeint(lotka, x0, t, args=(params,)).T\n# odeint returne a shape (2000, 2) array, with the value for\n# each population in [[n_preys, n_predators], ...]\n# The .T at the end transponses the array, so now we get each population\n# over time in each line of the resultint (2, 2000) array.\n\n# Create a figure and an axis to plot in:\nfig = plt.figure()\nax = fig.add_axes([0.10, 0.3, 0.8, 0.6])\nprey_plot = ax.plot(t, prey, label=\"Prey\")[0]\npredator_plot = ax.plot(t, predator, label=\"Predator\")[0]\n\nax.set_xlabel(\"Time\")\nax.set_ylabel(\"Population size\")\nax.legend(loc=\"upper right\")\nax.set_title('Prey &amp; Predator Static Model')\nax.grid(color=\"b\", alpha=0.5, linestyle=\"dashed\", linewidth=0.5)\nax.set_ylim([0, np.max([prey, predator])])\n\n# create a space in the figure to place the two sliders:\naxcolor = 'lightgoldenrodyellow'\naxis_N = fig.add_axes([0.10, 0.1, 0.8, 0.03], facecolor=axcolor)\naxis_P = fig.add_axes([0.10, 0.15, 0.8, 0.03], facecolor=axcolor)\n# the first argument is the rectangle, with values in percentage of the figure\n# size: [left, bottom, width, height]\n\n# create each slider on its corresponding place:\nslider_N = Slider(axis_N, 'N', Nmin, Nmax, valinit=N0)\nslider_P = Slider(axis_P, 'P', Pmin, Pmax, valinit=P0)\n\ndef update(val):\n    # retrieve the values from the sliders\n    x = [slider_N.val, slider_P.val]\n    # recalculate the function values\n    prey, predator = odeint(lotka, x, t, args=(params,)).T\n    # update the value on the graph\n    prey_plot.set_ydata(prey)\n    predator_plot.set_ydata(predator)\n    # redraw the graph\n    fig.canvas.draw_idle()\n    ax.set_ylim([0, np.max([prey, predator])])\n\n# set both sliders to call update when their value is changed:\nslider_N.on_changed(update)\nslider_P.on_changed(update)\n\n# create the reset button axis (where its drawn)\nresetax = plt.axes([0.8, 0.025, 0.1, 0.04])\n# and the button itself\nbutton = Button(resetax, 'Reset', color=axcolor, hovercolor='0.975')\n\ndef reset(event):\n    slider_N.reset()\n    slider_P.reset()\n\nbutton.on_clicked(reset)\n</code></pre>\n\n<p>Notice, however, you should have <a href=\"https://stackoverflow.com/help/how-to-ask\">shown how you tried</a> to adapt the example to what you had and how it was misbehaving.</p>\n\n<p>Nevertheless, welcome to Stackoverflow.</p>\n"}, {"comments": [{"owner": {"reputation": 1669, "user_id": 3026320, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V7Nb6.jpg?s=128&g=1", "display_name": "berna1111", "link": "https://stackoverflow.com/users/3026320/berna1111"}, "edited": false, "score": 0, "creation_date": 1492048655, "post_id": 43382271, "comment_id": 73826624, "body": "For future reference, you can edit your original post. The problem is in <code>l1, l2.set_ydata(y)</code> - you should set the data for each plot separately. I run into a similar issue, and that&#39;s why I separated both plots and used the transpose to retrieve each data (prey and predator) in each line. By the way, Stackoverflow can be <a href=\"https://meta.stackexchange.com/questions/2950/should-hi-thanks-taglines-and-salutations-be-removed-from-posts\">nitpicky</a> sometimes, but it&#39;s been thought and it&#39;s that way for a reason."}], "tags": [], "owner": {"reputation": 51, "user_id": 7859227, "user_type": "registered", "profile_image": "https://graph.facebook.com/1548759261803595/picture?type=large", "display_name": "Hana", "link": "https://stackoverflow.com/users/7859227/hana"}, "is_accepted": false, "score": 2, "last_activity_date": 1492048256, "creation_date": 1492048256, "answer_id": 43382271, "question_id": 43381449, "link": "https://stackoverflow.com/questions/43381449/how-to-make-two-sliders-in-matplotlib/43382271#43382271", "title": "How to make two sliders in matplotlib", "body": "<p>So, I have tried with this code:</p>\n\n<pre><code>from scipy import integrate\nfrom matplotlib.widgets import Slider, Button, RadioButtons\n\nfig, ax = plt.subplots()\nplt.subplots_adjust(left=0.25, bottom=0.25)\nplt.xlabel(\"Time\")\nplt.ylabel(\"Population size\")\nplt.legend([\"Prey\", \"Predator\"], loc=\"upper right\")\n\nplt.title('Prey &amp; Predator Static Model')\nplt.grid(color=\"b\", alpha=0.5, linestyle=\"dashed\", linewidth=0.5)\n\nl1, l2 = plt.plot(t, equation)\n\naxcolor = 'b'\nax_N = plt.axes([0.25, 0.1, 0.65, 0.03], axisbg=axcolor)\nax_P = plt.axes([0.25, 0.15, 0.65, 0.03], axisbg=axcolor)\n\nsN = Slider(ax_N, 'N', 0, 80, valinit=1)\nsP = Slider(ax_P, 'P', 0, 80, valinit=1)\n\n\ndef update(val):\n    N = N*sN.val\n    P = P*sP.val\n    x = equation\n    fig.canvas.draw_idle()\n    l1, l2.set_ydata(y)    \n    ax.set_ylim(y.min(), y.max())  \n    draw()\n\nsN.on_changed(update)\nsP.on_changed(update)\n\nplt.show()\n</code></pre>\n\n<p>I could not manipulate the sliders. Thank you so much @berna1111</p>\n"}], "owner": {"reputation": 51, "user_id": 7859227, "user_type": "registered", "profile_image": "https://graph.facebook.com/1548759261803595/picture?type=large", "display_name": "Hana", "link": "https://stackoverflow.com/users/7859227/hana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 810, "favorite_count": 0, "accepted_answer_id": 43382206, "answer_count": 2, "score": 2, "last_activity_date": 1492049291, "creation_date": 1492041440, "question_id": 43381449, "link": "https://stackoverflow.com/questions/43381449/how-to-make-two-sliders-in-matplotlib", "title": "How to make two sliders in matplotlib", "body": "<p>I would like to make two sliders in matplotlib to manually change N and P values in my predator-prey model:</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\nfrom scipy.integrate import odeint\n\ndef lotka(x,t,params):\n    N, P = x \n    alpha, beta, gamma, delta = params \n    derivs = [alpha*N - beta*N*P, gamma*N*P - delta*P] \n    return derivs\n\nN=2\nP=1\nalpha=3\nbeta=0.5\ngamma=0.4\ndelta=3\n\nparams = [alpha, beta, gamma, delta]\nx0=[N,P]\nmaxt = 20\ntstep = 0.01\n\nt=np.arange(0,maxt,tstep)\nequation=odeint(lotka, x0, t, args=(params,))\n\nplt.plot(t,equation)\nplt.xlabel(\"Time\")\nplt.ylabel(\"Population size\")\nplt.legend([\"Prey\", \"Predator\"], loc=\"upper right\")\n\nplt.title('Prey &amp; Predator Static Model')\nplt.grid(color=\"b\", alpha=0.5, linestyle=\"dashed\", linewidth=0.5)\n</code></pre>\n\n<p>This is my code which produces a graph for fixed initial values of N and P. However, I'd like to change them to see how the plot changes. And for this, I'd like to use sliders like: <a href=\"http://matplotlib.org/users/screenshots.html#slider-demo\" rel=\"nofollow noreferrer\">http://matplotlib.org/users/screenshots.html#slider-demo</a> but I do not know how to add this into my code...</p>\n\n<p>Could anyone please give me any direction? Many thanks!! xx</p>\n"}, {"tags": ["python", "list", "loops", "immutability"], "comments": [{"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 3, "creation_date": 1492041625, "post_id": 43381448, "comment_id": 73824986, "body": "Briefly: yes, the list is mutable. However, the integers it holds are not. You can wrap each integer in its own list, but you probably have an <a href=\"http://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY Problem</a>."}, {"owner": {"reputation": 315, "user_id": 6531805, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/94d7c8de3a6157cd4631548be9a3d432?s=128&d=identicon&r=PG", "display_name": "Twiffy", "link": "https://stackoverflow.com/users/6531805/twiffy"}, "reply_to_user": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1492041917, "post_id": 43381448, "comment_id": 73825067, "body": "Thanks, that solves the first part of my question. I suppose += is only an &quot;in-place&quot; modification for mutable data types."}, {"owner": {"reputation": 315, "user_id": 6531805, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/94d7c8de3a6157cd4631548be9a3d432?s=128&d=identicon&r=PG", "display_name": "Twiffy", "link": "https://stackoverflow.com/users/6531805/twiffy"}, "reply_to_user": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1492041942, "post_id": 43381448, "comment_id": 73825073, "body": "@TigerhawkT3 I disagree that my question is a duplicate of the post you linked, as that post doesn&#39;t address the second (and much more important) part of my question."}], "owner": {"reputation": 315, "user_id": 6531805, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/94d7c8de3a6157cd4631548be9a3d432?s=128&d=identicon&r=PG", "display_name": "Twiffy", "link": "https://stackoverflow.com/users/6531805/twiffy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "closed_date": 1492041568, "answer_count": 0, "score": 0, "last_activity_date": 1492041435, "creation_date": 1492041435, "question_id": 43381448, "link": "https://stackoverflow.com/questions/43381448/how-to-create-a-list-of-mutable-integers-in-python", "closed_reason": "Duplicate", "title": "How to create a list of mutable integers in Python", "body": "<p>I have a very long list of integers <code>my_list</code>, together with an equivalence relation <code>~</code> on the set of indices. I need to define a new list <code>new_list</code> with the same set of indices by (in pseudocode)</p>\n\n<pre><code>new_list[i] = sum over all j with j~i of my_list[j]\n</code></pre>\n\n<p>Since this is a very long list, to save time I wanted to do the following. First, break the collection of indices <code>I</code> into equivalence classes <code>I/~</code>, and then for each equivalence class <code>C</code> write</p>\n\n<pre><code>for i in C:\n    new_list[i] = C_sum\n    C_sum += my_list[i]\n</code></pre>\n\n<p>The hope was that for each <code>i</code> I could define <code>new_list[i]</code> to POINT to the variable <code>C_sum</code>, and then when I modify <code>C_sum</code> in the for loop, <code>new_list[i]</code> would still point to <code>C_sum</code> which would now be larger. But this didn't work. I thought that a) lists store references to objects, and that b) the += command modified the existing value rather than re-binding the variable to a new value. Where did I go wrong, and is there a way I can accomplish something like what I wanted -- namely, defining <code>new_list</code> on a single equivalence class inside just one loop?</p>\n"}, {"tags": ["python", "file", "mv"], "answers": [{"tags": [], "owner": {"reputation": 2211, "user_id": 1667840, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3a0eb2aabd323d1e50b4f8fe0caf59b1?s=128&d=identicon&r=PG&f=1", "display_name": "gidim", "link": "https://stackoverflow.com/users/1667840/gidim"}, "is_accepted": false, "score": 2, "last_activity_date": 1492044487, "creation_date": 1492044487, "answer_id": 43381829, "question_id": 43381446, "link": "https://stackoverflow.com/questions/43381446/python-move-files-from-directories-that-match-given-criteria-to-new-directory/43381829#43381829", "title": "Python move files from directories that match given criteria to new directory", "body": "<p>try this:</p>\n\n<pre><code>from os import walk, path\n\nsource='/home/kalenpw/Documents/School/2017Spring/CS3385/homework/'\n\nfor (dirpath, dirnames, filenames) in walk(source):\n    for file in filenames:\n        shutil.move(path.join(dirpath,file), source)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1192, "user_id": 7835318, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-RNwUyM2HlEE/AAAAAAAAAAI/AAAAAAAAAHA/qaGcWjJqFLw/photo.jpg?sz=128", "display_name": "araraonline", "link": "https://stackoverflow.com/users/7835318/araraonline"}, "is_accepted": true, "score": 1, "last_activity_date": 1492044636, "creation_date": 1492044636, "answer_id": 43381843, "question_id": 43381446, "link": "https://stackoverflow.com/questions/43381446/python-move-files-from-directories-that-match-given-criteria-to-new-directory/43381843#43381843", "title": "Python move files from directories that match given criteria to new directory", "body": "<p>You're almost there. When you get to shutil.move(eachFile, source), 'eachFile' here is only the name of the file you want. For example, 'hw13.pdf'. So it will try to search for it in the root path, but there is no 'hw13.pdf' in the root (as the Exception message points out).</p>\n\n<p>What you need to do is just join the name of the folder you're in to the name of the file you want to move:</p>\n\n<pre><code>for f in files:\n    if f.startswith(\"hw\") and len(f) &gt; 2:\n        for eachFile in os.listdir(f):\n            filePath = os.path.join(f, eachFile)\n            shutil.move(filePath, source)\n</code></pre>\n"}], "owner": {"reputation": 635, "user_id": 5137570, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/kfDnj.png?s=128&g=1", "display_name": "kalenpw", "link": "https://stackoverflow.com/users/5137570/kalenpw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2117, "favorite_count": 0, "accepted_answer_id": 43381843, "answer_count": 2, "score": 0, "last_activity_date": 1492044636, "creation_date": 1492041399, "question_id": 43381446, "link": "https://stackoverflow.com/questions/43381446/python-move-files-from-directories-that-match-given-criteria-to-new-directory", "title": "Python move files from directories that match given criteria to new directory", "body": "<p>I have a directory that looks something like this:</p>\n\n<pre><code>.\n\u251c\u2500\u2500 files.py\n\u251c\u2500\u2500 homework\n\u251c\u2500\u2500 hw1\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 hw1.pdf\n\u251c\u2500\u2500 hw10\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 hw10.pdf\n\u251c\u2500\u2500 hw13\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 hw13.pdf\n\u251c\u2500\u2500 hw2\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 hw2.pdf\n\u251c\u2500\u2500 hw3\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 hw3.pdf\n\u251c\u2500\u2500 hw4\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 hw4.pdf\n\u251c\u2500\u2500 hw7\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 hw7.pdf\n\u251c\u2500\u2500 IntroductionToAlgorithms.pdf\n\u251c\u2500\u2500 p157\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 Makefile\n\u251c\u2500\u2500 p164\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 project\n\u251c\u2500\u2500 p171\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 project\n\u251c\u2500\u2500 p18\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 project\n\u251c\u2500\u2500 p246\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 project\n\u251c\u2500\u2500 p257\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 project\n\u251c\u2500\u2500 p307\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 project\n\u251c\u2500\u2500 p34\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 project\n\u251c\u2500\u2500 p363\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 project\n\u251c\u2500\u2500 p431\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 bit_buffer.h\n\u251c\u2500\u2500 p565\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 project\n\u251c\u2500\u2500 p72\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 project\n\u251c\u2500\u2500 README.md\n\u2514\u2500\u2500 tree.txt\n</code></pre>\n\n<p>I want to move all the files inside the hwN folders into homework. \nExample homework will contain \nhw1.pdf -> hw13.pdf and not keep any of the folders named hwN\nWhere N is one of the numbered homework folders.</p>\n\n<p>I have a python script that is very nearly working:</p>\n\n<p><code>files.py:</code></p>\n\n<pre><code>import os\nimport shutil\n\nif not os.path.exists(\"homework\"):\n    os.makedirs(\"homework\")\n    print(\"created hw directory\")\n\nsource='/home/kalenpw/Documents/School/2017Spring/CS3385/homework/'\n\nfiles = os.listdir()\n\nfor f in files:\n    if f.startswith(\"hw\") and len(f) &gt; 2:\n        #This line works but it keeps the subfolders where I want the files directly in ./homework\n        shutil.move(f, source)\n#        for eachFile in os.listdir(f):\n#           #Ideally this would move all the files within the hw folders and move just the file not the folder to my source\n#            shutil.move(eachFile, source)\n</code></pre>\n\n<h1> </h1>\n\n<p>However, the commented out code which I am trying to use to move just the files not the folders results in this error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"/usr/lib/python3.5/shutil.py\", line 538, in move\n    os.rename(src, real_dst)\nFileNotFoundError: [Errno 2] No such file or directory: 'hw13.pdf' -&gt; '/home/kalenpw/Documents/School/2017Spring/CS3385/homework/hw13.pdf'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"files.py\", line 17, in &lt;module&gt;\n    shutil.move(eachFile, source)\n  File \"/usr/lib/python3.5/shutil.py\", line 552, in move\n    copy_function(src, real_dst)\n  File \"/usr/lib/python3.5/shutil.py\", line 251, in copy2\n    copyfile(src, dst, follow_symlinks=follow_symlinks)\n  File \"/usr/lib/python3.5/shutil.py\", line 114, in copyfile\n    with open(src, 'rb') as fsrc:\nFileNotFoundError: [Errno 2] No such file or directory: 'hw13.pdf'\n</code></pre>\n\n<p>To summarize, how can I move all the files contained in hw1, hw2, etc. to ./homework without moving the folders themselves?  If this is <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">xy problem</a> and there is in fact an easier way to do this please point me in that direction. Also yes I realize that in the amount of time I've spent debugging and writing this I could easily have done it by hand, but that isn't the point.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["python", "pandas", "dataframe", "binary", "dummy-variable"], "answers": [{"comments": [{"owner": {"reputation": 12268, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "edited": false, "score": 0, "creation_date": 1492042136, "post_id": 43381520, "comment_id": 73825115, "body": "This would only work if the only columns in the dataframe were these binary columns. Is there a way to specify this with your solution?"}, {"owner": {"reputation": 288763, "user_id": 487339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wbe4o.png?s=128&g=1", "display_name": "DSM", "link": "https://stackoverflow.com/users/487339/dsm"}, "reply_to_user": {"reputation": 12268, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "edited": false, "score": 0, "creation_date": 1492042342, "post_id": 43381520, "comment_id": 73825164, "body": "There are lots of ways to select columns in pandas.  You can do <code>df[some_list_of_columns_you_care_about].idxmax(axis=1)</code>, or use <code>df.filter</code>, or use <code>df.select</code> with a function, or <code>df.loc</code> with a mask, or <code>df.iloc</code> with a positional specification, etc."}], "tags": [], "owner": {"reputation": 288763, "user_id": 487339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wbe4o.png?s=128&g=1", "display_name": "DSM", "link": "https://stackoverflow.com/users/487339/dsm"}, "is_accepted": true, "score": 8, "last_activity_date": 1492041946, "creation_date": 1492041946, "answer_id": 43381520, "question_id": 43381438, "link": "https://stackoverflow.com/questions/43381438/pandas-dataframe-how-to-convert-binary-columns-into-one-categorical-column/43381520#43381520", "title": "Pandas DataFrame: How to convert binary columns into one categorical column?", "body": "<p>One way would be to use <code>idxmax</code> to find the 1s:</p>\n\n<pre><code>In [32]: df[\"category\"] = df.idxmax(axis=1)\n\nIn [33]: df\nOut[33]: \n   A  B  C  D category\n0  1  0  0  0        A\n1  0  1  0  0        B\n2  0  0  1  0        C\n3  0  0  0  1        D\n4  1  0  0  0        A\n5  0  1  0  0        B\n</code></pre>\n"}], "owner": {"reputation": 12268, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3045, "favorite_count": 3, "accepted_answer_id": 43381520, "answer_count": 1, "score": 5, "last_activity_date": 1492041946, "creation_date": 1492041333, "question_id": 43381438, "link": "https://stackoverflow.com/questions/43381438/pandas-dataframe-how-to-convert-binary-columns-into-one-categorical-column", "title": "Pandas DataFrame: How to convert binary columns into one categorical column?", "body": "<p>Given a pandas DataFrame, how does one convert several binary columns (where 1 denotes the value exists, 0 denotes it doesn't) into a single categorical column? </p>\n\n<p>Another way to think of this is how to perform the \"reverse <code>pd.get_dummies()</code>\"? </p>\n\n<p>Here is an example of converting a categorical column into several binary columns:</p>\n\n<pre><code>import pandas as pd\ns = pd.Series(list('ABCDAB'))\ndf = pd.get_dummies(s)\ndf\n   A  B  C  D\n0  1  0  0  0\n1  0  1  0  0\n2  0  0  1  0\n3  0  0  0  1\n4  1  0  0  0\n5  0  1  0  0\n</code></pre>\n\n<p>What I would like to accomplish is given a dataframe</p>\n\n<pre><code>df1\n   A  B  C  D\n0  1  0  0  0\n1  0  1  0  0\n2  0  0  1  0\n3  0  0  0  1\n4  1  0  0  0\n5  0  1  0  0\n</code></pre>\n\n<p>could do I convert it into </p>\n\n<pre><code>df1\n   A  B  C  D   category\n0  1  0  0  0   A\n1  0  1  0  0   B\n2  0  0  1  0   C\n3  0  0  0  1   D\n4  1  0  0  0   A\n5  0  1  0  0   B\n</code></pre>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1492041740, "post_id": 43381414, "comment_id": 73825014, "body": "Instead of &quot;Double unpacking&quot; (which sounds like you unpacked twice) how about &quot;unpack as double&quot;?"}, {"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1492041973, "post_id": 43381414, "comment_id": 73825078, "body": "It seems straight-forward. <code>I</code> packs to 4 bytes. <code>f</code> unpacks 4 bytes. But <code>d</code> needs 8 bytes. I can&#39;t figure out what your goal for this code is, the integer and float don&#39;t have anything in common. What is getting a double supposed to do?"}, {"owner": {"reputation": 87, "user_id": 7423140, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh6.googleusercontent.com/-T-gjUEsn6e8/AAAAAAAAAAI/AAAAAAAACBs/ydp2SRo4GSg/photo.jpg?sz=128", "display_name": "Anderson P", "link": "https://stackoverflow.com/users/7423140/anderson-p"}, "reply_to_user": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1492042294, "post_id": 43381414, "comment_id": 73825146, "body": "@tdelaney Using the &#39;f&#39; method, I can get something like 0.007548765745013952, but there is some other method where I can get a float as accurate as 0.09112001210451126099 and 0.13371336460113525391 which is a bit more accurate. For my program, I need these as accurate as possible."}, {"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1492043438, "post_id": 43381414, "comment_id": 73825429, "body": "<code>f</code> represents a 32 bit floating point number in binary but is smaller than a python <code>float</code> so you&#39;ll get rounding. <code>d</code> is a 64 bit floating point number and can store python floats without rounding. So, its more accurate if you want to store a <code>float</code> somewhere. It makes no sense to do that integer thing you are doing. How does the integer going in have anything to do with the float coming out?"}, {"owner": {"reputation": 87, "user_id": 7423140, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh6.googleusercontent.com/-T-gjUEsn6e8/AAAAAAAAAAI/AAAAAAAACBs/ydp2SRo4GSg/photo.jpg?sz=128", "display_name": "Anderson P", "link": "https://stackoverflow.com/users/7423140/anderson-p"}, "reply_to_user": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1492044847, "post_id": 43381414, "comment_id": 73825747, "body": "@tdelaney thanks for your help, but I think the issue was not getting more accurate digits, but that there actually only like 20 digits showing instead of 25"}, {"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1492045656, "post_id": 43381414, "comment_id": 73825893, "body": "Its 53 bits in all. See <a href=\"https://docs.python.org/3/tutorial/floatingpoint.html\" rel=\"nofollow noreferrer\">15. Floating Point Arithmetic: Issues and Limitations</a>"}, {"owner": {"reputation": 40086, "user_id": 499581, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1ba2cebc4582467916f2ddd6128447f4?s=128&d=identicon&r=PG", "display_name": "l&#39;L&#39;l", "link": "https://stackoverflow.com/users/499581/lll"}, "edited": false, "score": 0, "creation_date": 1492051479, "post_id": 43381414, "comment_id": 73827279, "body": "@AndersonP: you should be able to do <code>{:.22f}</code> to get all the digits in that particular number."}], "answers": [{"comments": [{"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1492043482, "post_id": 43381676, "comment_id": 73825441, "body": "That doesn&#39;t change the precision of the float, just how many digits python displays. Not that its a bad thing, but it should be mentioned."}, {"owner": {"reputation": 87, "user_id": 7423140, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh6.googleusercontent.com/-T-gjUEsn6e8/AAAAAAAAAAI/AAAAAAAACBs/ydp2SRo4GSg/photo.jpg?sz=128", "display_name": "Anderson P", "link": "https://stackoverflow.com/users/7423140/anderson-p"}, "edited": false, "score": 0, "creation_date": 1492043658, "post_id": 43381676, "comment_id": 73825487, "body": "Thanks! This helps for sure"}], "tags": [], "owner": {"reputation": 40086, "user_id": 499581, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1ba2cebc4582467916f2ddd6128447f4?s=128&d=identicon&r=PG", "display_name": "l&#39;L&#39;l", "link": "https://stackoverflow.com/users/499581/lll"}, "is_accepted": true, "score": 1, "last_activity_date": 1492051495, "last_edit_date": 1492051495, "creation_date": 1492043131, "answer_id": 43381676, "question_id": 43381414, "link": "https://stackoverflow.com/questions/43381414/error-when-double-unpacking-number/43381676#43381676", "title": "Error When Double Unpacking Number", "body": "<p>Use floating point number formatting:</p>\n\n<pre><code>return \"{:.22f}\".format(item_float)\n</code></pre>\n\n<p>Where <code>22</code> is the number of digits returned (or however many required) after the decimal.</p>\n"}], "owner": {"reputation": 87, "user_id": 7423140, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh6.googleusercontent.com/-T-gjUEsn6e8/AAAAAAAAAAI/AAAAAAAACBs/ydp2SRo4GSg/photo.jpg?sz=128", "display_name": "Anderson P", "link": "https://stackoverflow.com/users/7423140/anderson-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 43381676, "answer_count": 1, "score": 2, "last_activity_date": 1492051495, "creation_date": 1492041256, "question_id": 43381414, "link": "https://stackoverflow.com/questions/43381414/error-when-double-unpacking-number", "title": "Error When Double Unpacking Number", "body": "<p>I have some code that looks like:</p>\n\n<pre><code>import struct\n\ndef Get_Float(paintwear):\n    buf = struct.pack('i', paintwear)\n    item_float = struct.unpack('f', buf)[0]\n    return item_float\n\npaintwear = 1033975072\nitem_float = Get_Float(paintwear)\nprint(item_float)\n</code></pre>\n\n<p>This works and gives me item_float as 0.07871460914611816. However, I am trying to get that number to be more specific by double unpacking it like this:</p>\n\n<pre><code>import struct\n\ndef Get_Float(paintwear):\n    buf = struct.pack('i', paintwear)\n    item_float = struct.unpack('d', buf)[0]\n    return item_float\n\npaintwear = 1033975072\nitem_float = Get_Float(paintwear)\nprint(item_float)\n</code></pre>\n\n<p>I changed the f to a d and now I get this error: <code>struct.error: unpack requires a bytes object of length 8</code></p>\n\n<p>Any ideas? Thanks!</p>\n"}, {"tags": ["python", "docker"], "comments": [{"owner": {"reputation": 18722, "user_id": 1702943, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/nqRAA.png?s=128&g=1", "display_name": "Rao", "link": "https://stackoverflow.com/users/1702943/rao"}, "edited": false, "score": 0, "creation_date": 1492043568, "post_id": 43381374, "comment_id": 73825465, "body": "would you please add the output of <code>docker inspect python-example2</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 1528, "user_id": 1543364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57d61b7c88a7426c4c0039aff186cad7?s=128&d=identicon&r=PG", "display_name": "Rafael", "link": "https://stackoverflow.com/users/1543364/rafael"}, "is_accepted": true, "score": 2, "last_activity_date": 1492081078, "last_edit_date": 1492081078, "creation_date": 1492043325, "answer_id": 43381698, "question_id": 43381374, "link": "https://stackoverflow.com/questions/43381374/docker-python-committed-changes-in-a-container-but-new-image-does-not-run/43381698#43381698", "title": "docker python: committed changes in a container but new image does not run", "body": "<p><strong>Solution</strong></p>\n\n<p>Change your commit to:</p>\n\n<pre><code>docker commit --change='CMD [\"python\", \"file.py\"]' c08e4ee85879 python-example2\n</code></pre>\n\n<p><strong>Explanation</strong></p>\n\n<p>When you run:</p>\n\n<p><code>docker run -it python-example bash</code></p>\n\n<p>you are changing your default command (which is <code>python file.py</code> to <code>bash</code>).</p>\n\n<p>You can check with <code>docker ps</code>.</p>\n\n<pre><code>CONTAINER ID        IMAGE                 COMMAND                  CREATED             STATUS              PORTS               NAMES\nc08e4ee85879        python-example        \"bash\"                   32 seconds ago      Up 30 seconds                           thirsty_hugle\n</code></pre>\n\n<p><a href=\"https://docs.docker.com/engine/reference/builder/#cmd\" rel=\"nofollow noreferrer\">Check dockerfile reference - CMD for more information</a></p>\n\n<p>With <code>--change='CMD [\"python\", \"file.py\"]'</code> you get the desired command back.</p>\n"}], "owner": {"reputation": 6217, "user_id": 2800939, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b6b787a4a60504741317199cdf1b7618?s=128&d=identicon&r=PG&f=1", "display_name": "jxn", "link": "https://stackoverflow.com/users/2800939/jxn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 695, "favorite_count": 0, "accepted_answer_id": 43381698, "answer_count": 1, "score": 2, "last_activity_date": 1492081078, "creation_date": 1492040907, "last_edit_date": 1592644375, "question_id": 43381374, "link": "https://stackoverflow.com/questions/43381374/docker-python-committed-changes-in-a-container-but-new-image-does-not-run", "title": "docker python: committed changes in a container but new image does not run", "body": "<p>i have a python image called <code>python-example</code>\nwith container_id = <code>c08e4ee85879</code></p>\n<p>Inside exist a python script that prints <code>hello world</code></p>\n<h1>file.py</h1>\n<pre><code>print &quot;HELLO WORLD&quot;\n</code></pre>\n<p>if i run my image:\n<code>docker run python-example</code> the output <code>HELLO WORLD</code> will be printed on my terminal and then the container will exit.</p>\n<p>When i try to enter the container to make a change to the script through vim, exit the container and commit the change to a new image and then try to run the new image, nothing get printed. See steps below</p>\n<pre><code>docker run -it python-example bash\nvim file.py\n#make some changes by adding a new print statement &quot;HELLO WORLD 2&quot;\nexit\ndocker commit c08e4ee85879 python-example2\n\ndocker run python-example2 #now nothing gets printed to terminal screen\n</code></pre>\n<p>When i enter the new image then run python file.py, the output gets printed.</p>\n<pre><code>docker run -it python-example2 bash\npython file.py\n&quot;HELLO WORLD&quot;\n&quot;HELLO WORLD 2&quot;\n</code></pre>\n<p>Why is this so? Is it not possible for an image to run when changes are commited in bash?</p>\n"}, {"tags": ["python", "dictionary", "matrix", "minimum-spanning-tree"], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 7742386, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10154366091691430/picture?type=large", "display_name": "Lara Hronn", "link": "https://stackoverflow.com/users/7742386/lara-hronn"}, "edited": false, "score": 0, "creation_date": 1492055865, "post_id": 43381974, "comment_id": 73828325, "body": "You got it exactly right (reading it now, it is a bit confusing). Thank you for the reply."}, {"owner": {"reputation": 4505, "user_id": 3626961, "user_type": "registered", "accept_rate": 92, "profile_image": "https://graph.facebook.com/100001104558583/picture?type=large", "display_name": "titipata", "link": "https://stackoverflow.com/users/3626961/titipata"}, "reply_to_user": {"reputation": 61, "user_id": 7742386, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10154366091691430/picture?type=large", "display_name": "Lara Hronn", "link": "https://stackoverflow.com/users/7742386/lara-hronn"}, "edited": false, "score": 0, "creation_date": 1492058073, "post_id": 43381974, "comment_id": 73828888, "body": "Yeah, there is a lot of tiny stuff happening! Feel free to take your time to ingest it."}], "tags": [], "owner": {"reputation": 4505, "user_id": 3626961, "user_type": "registered", "accept_rate": 92, "profile_image": "https://graph.facebook.com/100001104558583/picture?type=large", "display_name": "titipata", "link": "https://stackoverflow.com/users/3626961/titipata"}, "is_accepted": false, "score": 5, "last_activity_date": 1492058417, "last_edit_date": 1492058417, "creation_date": 1492045720, "answer_id": 43381974, "question_id": 43381336, "link": "https://stackoverflow.com/questions/43381336/create-a-sparse-matrix-from-dictionary/43381974#43381974", "title": "Create a sparse matrix from dictionary", "body": "<p>Not sure if I understand the question completely. From what I get is that you want to convert <code>x_input</code> to sparse matrix <code>x_right</code></p>\n\n<pre><code>import scipy.sparse as sp\n\nx_input= {'A': [('B', 2)],\n          'B': [('A', 2), ('C', 5)], \n          'C': [('B', 5)]}\n\nkeys = x_input.keys()\nmap_dict = dict(zip(list(keys), range(len(keys))))\n</code></pre>\n\n<p>I create dictionary keys to map value to index above e.g. from <code>A</code> to <code>1</code> and <code>B</code> to <code>2</code>. Then, you can loop through the given dictionary in order to get row/column position. Afterward, you can convert row/column pair of the matrix with corresponding values to sparse matrix.</p>\n\n<pre><code>rows, cols, vals = [], [], []\nfor key, values in x_input.items():\n    for value in values:\n        rows.append(map_dict[key])\n        cols.append(map_dict[value[0]])\n        vals.append(value[1])\nX = sp.csr_matrix((vals, (rows, cols)))\n</code></pre>\n\n<p><strong>Output</strong> is as follows:</p>\n\n<pre><code>print(X.toarray())\narray([[0, 2, 0],\n       [2, 0, 5],\n       [0, 5, 0]], dtype=int64)\n</code></pre>\n\n<p><strong>To convert sparse matrix back</strong>, easy way is to convert sparse CSR matrix to COO matrix. COO matrix allows you to get row, column and data easily. After getting the row/column positions, I have dictionary <code>map_dict_reverse</code> to convert those back to the given keys.</p>\n\n<pre><code>from collections import defaultdict\nmap_dict_reverse = dict(zip(range(len(keys)), list(keys)))\n\nXcoo = X.tocoo() # convert csr matrix to coo sparse matrix\nx_convert = defaultdict(list)\nfor (r, c, d) in zip(Xcoo.row, Xcoo.col, Xcoo.data):\n    x_convert[map_dict_reverse[r]].append((map_dict_reverse[c] , d))\nx_convert = dict(x_convert)\n</code></pre>\n\n<p>You will get <code>x_input</code> back at the end.</p>\n\n<pre><code>{'A': [('B', 2)], 'B': [('A', 2), ('C', 5)], 'C': [('B', 5)]}\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 7742386, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10154366091691430/picture?type=large", "display_name": "Lara Hronn", "link": "https://stackoverflow.com/users/7742386/lara-hronn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3015, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1492058417, "creation_date": 1492040617, "question_id": 43381336, "link": "https://stackoverflow.com/questions/43381336/create-a-sparse-matrix-from-dictionary", "title": "Create a sparse matrix from dictionary", "body": "<p>I am doing a school project where I am given an undirected graph G, and am supposed find the minimum spanning tree within G. I figured I\u00b4d use minimum_spanning_tree from Scipy <a href=\"http://Scipy\" rel=\"nofollow noreferrer\">(https://docs.scipy.org/doc/scipy-0.14.0/reference/generated/scipy.sparse.csgraph.minimum_spanning_tree.html)</a>. But to do that I have to feed it an array_like or sparse matrix, 2 dimensions.\nLike so:</p>\n\n<pre><code>x_right=\n    ([[0, 2, 0],\n    [2, 0, 5],\n    [0, 5, 0]])\n</code></pre>\n\n<p>In the project, I am supposed to take in an adjacency list structured like this:</p>\n\n<pre><code>x_input=\n    {'A': [('B', 2)],\n     'B': [('A', 2), ('C', 5)], \n     'C': [('B', 5)]}\n</code></pre>\n\n<p>To give it a try... there is, to see if the minimum_spanning_tree was giving my desired result, I ran it by manually changing the the x_input to x_right and I got the output as:</p>\n\n<pre><code>(0, 1)    2.0\n(1, 2)    5.0\n</code></pre>\n\n<p>Which is what I want but I am supposed to return the output in the same format as x_input.</p>\n\n<p>I've been trying out all sorts of methods (one of them DictVectorizer - ValueError: could not convert string to float: 'B'... like in other cases) for to long and I think it is time to seek help.</p>\n\n<p>So to boil it down, do you have suggestions about how I can create a matrix suitable for the minimum_spanning_tree from the x_input (and how I can convert the result to x_input format again).</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "arcpy"], "comments": [{"owner": {"reputation": 1111, "user_id": 820534, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5bdb495c960b3384649e2a7e49c39cb9?s=128&d=identicon&r=PG", "display_name": "PolyGeo", "link": "https://stackoverflow.com/users/820534/polygeo"}, "edited": false, "score": 1, "creation_date": 1492068036, "post_id": 43381334, "comment_id": 73833297, "body": "For ArcPy I think you are far better to research/ask at the <a href=\"https://gis.stackexchange.com\">Geographic Information Systems</a> Stack Exchange."}, {"owner": {"reputation": 3, "user_id": 7859215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f7b387a42aec85193dcaaab6227b814?s=128&d=identicon&r=PG&f=1", "display_name": "beauxgeo", "link": "https://stackoverflow.com/users/7859215/beauxgeo"}, "reply_to_user": {"reputation": 1111, "user_id": 820534, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5bdb495c960b3384649e2a7e49c39cb9?s=128&d=identicon&r=PG", "display_name": "PolyGeo", "link": "https://stackoverflow.com/users/820534/polygeo"}, "edited": false, "score": 0, "creation_date": 1492082492, "post_id": 43381334, "comment_id": 73842554, "body": "@PolyGeo My apologies. I realize this now. Thank you for the direction."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 7859215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f7b387a42aec85193dcaaab6227b814?s=128&d=identicon&r=PG&f=1", "display_name": "beauxgeo", "link": "https://stackoverflow.com/users/7859215/beauxgeo"}, "edited": false, "score": 0, "creation_date": 1492103323, "post_id": 43390658, "comment_id": 73856878, "body": "Thank you for your response! I realize now this would have been better suited for the GIS Stack Exchange."}, {"owner": {"reputation": 2167, "user_id": 2118067, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/Q6M8I.jpg?s=128&g=1", "display_name": "Erica", "link": "https://stackoverflow.com/users/2118067/erica"}, "reply_to_user": {"reputation": 3, "user_id": 7859215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f7b387a42aec85193dcaaab6227b814?s=128&d=identicon&r=PG&f=1", "display_name": "beauxgeo", "link": "https://stackoverflow.com/users/7859215/beauxgeo"}, "edited": false, "score": 0, "creation_date": 1492103372, "post_id": 43390658, "comment_id": 73856912, "body": "It&#39;s a little hit or miss whether Python-specific questions fit well on GIS.SE or StackOverflow. In this case, your error was a Python issue, but the solution is an ArcPy tool :)"}], "tags": [], "owner": {"reputation": 2167, "user_id": 2118067, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/Q6M8I.jpg?s=128&g=1", "display_name": "Erica", "link": "https://stackoverflow.com/users/2118067/erica"}, "is_accepted": true, "score": 0, "last_activity_date": 1492081740, "last_edit_date": 1495540944, "creation_date": 1492081740, "answer_id": 43390658, "question_id": 43381334, "link": "https://stackoverflow.com/questions/43381334/error-recognizing-parameters-for-a-spatial-join-using-arcpy/43390658#43390658", "title": "Error recognizing parameters for a spatial join using ArcPy", "body": "<p>You appear to be trying to loop through a given directory, performing the spatial join on (shapefiles?) contained therein.</p>\n\n<p>However, this syntax is a problem:</p>\n\n<pre><code>input = \"C:\\\\Users\\\\Ryck\\\\Test\\\\test_Input\"\nfor fc in input:\n    # do things to fc\n</code></pre>\n\n<p>In this case, the <code>for</code> loop is <a href=\"https://stackoverflow.com/questions/538346/iterating-over-a-string\">iterating over a <em>string</em></a>. So each time through the loop, it takes one character at a time: first <code>C</code>, then <code>:</code>, then <code>\\</code>... and of course the arcpy function fails with this input, because it expects a file path, not a character. Hence the error: <em>Target Features: Dataset C does not exist...</em></p>\n\n<hr>\n\n<p>To instead loop through <em>files</em> in your input directory, you need a couple extra steps.  <a href=\"http://resources.arcgis.com/en/help/main/10.2/index.html#//018v0000000v000000\" rel=\"nofollow noreferrer\">Build a list of files</a>, and then iterate through that list.</p>\n\n<pre><code>arcpy.env.workspace = input            # sets \"workspace\" to input directory, for next tool\nshp_list = arcpy.ListFiles(\"*.shp\")    # list of all shapefiles in workspace\nfor fc in shp_list:\n    # do things to fc\n</code></pre>\n\n<p>(Ref. <a href=\"https://gis.stackexchange.com/a/108118/15768\">this answer</a> on GIS.SE.)</p>\n"}, {"tags": [], "owner": {"reputation": 3, "user_id": 7859215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f7b387a42aec85193dcaaab6227b814?s=128&d=identicon&r=PG&f=1", "display_name": "beauxgeo", "link": "https://stackoverflow.com/users/7859215/beauxgeo"}, "is_accepted": false, "score": 0, "last_activity_date": 1492104105, "creation_date": 1492104105, "answer_id": 43398253, "question_id": 43381334, "link": "https://stackoverflow.com/questions/43381334/error-recognizing-parameters-for-a-spatial-join-using-arcpy/43398253#43398253", "title": "Error recognizing parameters for a spatial join using ArcPy", "body": "<p>After working through some kinks, and thanks to the advice of @erica, I decided to abandon my original concept of a nested for loop, and approach more simply. I'm still working on a GUI that will create system arguments that can be assigned to the variables and then used as parameters for the spatial joins, but for now, this is the solution I've worked out.</p>\n\n<pre><code>import arcpy\n\ninput = \"C:\\\\Users\\\\Ryck\\\\Test\\\\test_Input\\\\\"\nboundary = \"C:\\\\Users\\\\Ryck\\\\Test\\\\area_Input\\\\boundary_Test.shp\"\noutloc = \"C:\\\\Users\\\\ryck\\\\Test\\\\join_01\"\nadmin = \"C:\\\\Users\\\\Ryck\\\\Test\\\\area_Input\\\\admin_boundary_Test.shp\"\noutloc1 = \"C:\\\\Users\\\\Ryck\\\\Test\\\\join_02\"\n\narcpy.env.workspace = input\narcpy.env.overwriteOutput = True\n\nshp_list = arcpy.ListFeatureClasses()\n\nprint shp_list\n\nfor fc in shp_list:\n    join1 = \narcpy.SpatialJoin_analysis(fc,boundary,\"C:\\\\Users\\\\ryck\\\\Test\\\\join_01\\\\\" + \n                           fc)\n\narcpy.env.workspace = outloc\n\nfc_list = arcpy.ListFeatureClasses()\n\nprint fc_list\n\nfor fc in fc_list:\n    arcpy.SpatialJoin_analysis(fc,admin,\"C:\\\\Users\\\\ryck\\\\Test\\\\join_02\\\\\" + \n                               fc)\n</code></pre>\n\n<p>Setting multiple environments and using the actual paths feels clunky, but it works for me at this point. </p>\n"}], "owner": {"reputation": 3, "user_id": 7859215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f7b387a42aec85193dcaaab6227b814?s=128&d=identicon&r=PG&f=1", "display_name": "beauxgeo", "link": "https://stackoverflow.com/users/7859215/beauxgeo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 238, "favorite_count": 0, "accepted_answer_id": 43390658, "answer_count": 2, "score": -1, "last_activity_date": 1492104105, "creation_date": 1492040603, "question_id": 43381334, "link": "https://stackoverflow.com/questions/43381334/error-recognizing-parameters-for-a-spatial-join-using-arcpy", "title": "Error recognizing parameters for a spatial join using ArcPy", "body": "<p>I'm trying to iterate a spatial join through a folder - then iterate a second spatial join through the outputs of the first.</p>\n\n<p>This is my initial script:</p>\n\n<pre><code>import arcpy, os, sys, glob\n\n'''This script loops a spatial join through all the feature classes\nin the input folder, then performs a second spatial join on the output \nfiles'''\n\n\n#set local variables\n\ninput = \"C:\\\\Users\\\\Ryck\\\\Test\\\\test_Input\"\nboundary = \"C:\\\\Users\\\\Ryck\\\\Test\\\\area_Input\\\\boundary_Test.shp\"\nadmin = \"C:\\\\Users\\\\Ryck\\\\Test\\\\area_Input\\\\admi_Boundary_Test.shp\"\noutloc = \"C:\\\\Users\\\\Ryck\\\\Test\\\\join_02\"\n\n#overwrite any files with the same name\narcpy.env.overwriteOutput = True\n\n#perform spatial joins\n\nfor fc in input:\n    outfile = outloc + fc\n    join1 = [arcpy.SpatialJoin_analysis(fc,boundary,outfile) for fc in \n            input]\n\n    for fc in join1:\n        arcpy.SpatialJoin_analysis(fc,admin,outfile)\n</code></pre>\n\n<p>I keep receiving Error00732: Target Features: Dataset C does not exist or is not supported.</p>\n\n<p>I'm sure this is a simple error, but none of the solutions that have previously been recommended to solve this error allow me to still output my results to their own folder.</p>\n\n<p>Thanks in advance for any suggestions</p>\n"}, {"tags": ["python", "scikit-learn", "categorical-data", "dictvectorizer"], "answers": [{"tags": [], "owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "is_accepted": true, "score": 2, "last_activity_date": 1492040686, "creation_date": 1492040686, "answer_id": 43381347, "question_id": 43381295, "link": "https://stackoverflow.com/questions/43381295/why-would-dictvectorizer-change-the-number-of-features/43381347#43381347", "title": "Why would DictVectorizer change the number of features?", "body": "<p>Because you are vectorizing using a different fit. When you use <code>fit_transform</code>:</p>\n\n<pre><code>X_train=vecS.fit_transform(X_train.to_dict(orient='record'))\nX_test=vecS.fit_transform(X_test.to_dict(orient='record'))\n</code></pre>\n\n<p>That results in two differently fitted vectorizers acting on your data-sets. The first will be trained on all the features in <code>X_train.to_dict</code> and the other in all the features in <code>X_test.to_dict</code>, You want to <em>train the vectorizer once on your training data</em> and then only use <code>transform</code>, because <code>fit_transform</code> <em>refits</em>:</p>\n\n<pre><code>X_train=vecS.fit_transform(X_train.to_dict(orient='record'))\nX_test=vecS.transform(X_test.to_dict(orient='record'))\n</code></pre>\n\n<p>Note, your model will only ever know about features from your training set. </p>\n"}], "owner": {"reputation": 795, "user_id": 4833129, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/10203781604574761/picture?type=large", "display_name": "Nicholas Hassan", "link": "https://stackoverflow.com/users/4833129/nicholas-hassan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 791, "favorite_count": 1, "accepted_answer_id": 43381347, "answer_count": 1, "score": 1, "last_activity_date": 1492040686, "creation_date": 1492040328, "question_id": 43381295, "link": "https://stackoverflow.com/questions/43381295/why-would-dictvectorizer-change-the-number-of-features", "title": "Why would DictVectorizer change the number of features?", "body": "<p>I have a dataset of 324 rows and 35 columns. I split it into training and testing data:</p>\n\n<pre><code>X_train, X_test, y_train, y_test = train_test_split(tempCSV[feaure_names[0:34]], tempCSV[feaure_names[34]], test_size=0.2, random_state=32)    \n</code></pre>\n\n<p>This seems to work fine, and my X_train and X_test both have 34 features. I apply some further transformations with DictVectorizer because I have categorical variables.</p>\n\n<pre><code>from sklearn.feature_extraction import DictVectorizer\nvecS=DictVectorizer(sparse=False)\nX_train=vecS.fit_transform(X_train.to_dict(orient='record'))\nX_test=vecS.fit_transform(X_test.to_dict(orient='record'))\n</code></pre>\n\n<p>Now when I compare X_train to X_test, the former has 46 features, and the latter only has 44. What are some possible reasons this could happen?</p>\n"}, {"tags": ["python", "json", "api", "itunes"], "comments": [{"owner": {"reputation": 16096, "user_id": 8005, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/27cf0f5bc9b62727c9125dd16301caea?s=128&d=identicon&r=PG", "display_name": "Bemmu", "link": "https://stackoverflow.com/users/8005/bemmu"}, "edited": false, "score": 0, "creation_date": 1492040412, "post_id": 43381288, "comment_id": 73824670, "body": "Are you calling your function?"}, {"owner": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 0, "creation_date": 1492040638, "post_id": 43381288, "comment_id": 73824735, "body": "What is the expected and observed result?"}, {"owner": {"reputation": 135, "user_id": 7586379, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/b2ff50d1850f901200779355eb4ff145?s=128&d=identicon&r=PG&f=1", "display_name": "Avery9115", "link": "https://stackoverflow.com/users/7586379/avery9115"}, "reply_to_user": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 0, "creation_date": 1492041047, "post_id": 43381288, "comment_id": 73824840, "body": "@Klaus D. I am expecting to get data that shows a dictionary of songs by Bon Iver that are in JSON in a text file. Currently even when I print our the key for the itunes_dict_keys nothings is generated, I am not even getting a syntax error."}, {"owner": {"reputation": 670, "user_id": 3672977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7eede4ef5afe2d79fb1aaedc02859f6e?s=128&d=identicon&r=PG", "display_name": "thesonyman101", "link": "https://stackoverflow.com/users/3672977/thesonyman101"}, "edited": false, "score": 0, "creation_date": 1492041314, "post_id": 43381288, "comment_id": 73824906, "body": "Instead of reinventing the wheel try using this <a href=\"http://pythonhosted.org/python-itunes/\" rel=\"nofollow noreferrer\">pythonhosted.org/python-itunes</a>"}], "owner": {"reputation": 135, "user_id": 7586379, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/b2ff50d1850f901200779355eb4ff145?s=128&d=identicon&r=PG&f=1", "display_name": "Avery9115", "link": "https://stackoverflow.com/users/7586379/avery9115"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 599, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1492040810, "creation_date": 1492040244, "last_edit_date": 1492040810, "question_id": 43381288, "link": "https://stackoverflow.com/questions/43381288/itunes-api-request", "title": "Itunes API Request", "body": "<p>I am trying to make an API request to itunes to get songs by a particular artist and great a dictionary in JSON format with those songs. My below code is not returning any errors, but I am not sure where I am going wrong. Any help would be great. Also, I put comments next to some of the lines to help to further explain. </p>\n\n<pre><code>    import json\n    import requests\n    def get_from_itunes(artist,songs):\n    base_url = \"http://itunes.apple.com/search\"\n    params_dict = {\"term\":bon+iver, \"entity\": music}\n    resp = requests.get(base_url, params=params_dict)\n    structured_resp_text = resp.text\n    python_obj_data_from_itunes = json.loads(structured_resp_text)\n# the python object is a dictionary\n    itunes_dict_keys = python_obj_data_from_itunes.keys() # These keys are lists\n    for key in itunes_dict_keys:\n        print key # it's unicode. I have no clue how to proceed from here.\n# I should be getting a dictionary\n# And then getting to the key Track Name\n\n    file_obj = open(\"itunes_file.txt\", \"w\") #wrote a file containing a JSON formatted string \n# and then pasted that into the JSON editor\n    file_obj.write(python_obj_data_from_itunes + \"\\n\")\n    file_obj.close()\n\n    return get_from_itunes()\n</code></pre>\n"}, {"tags": ["python", "matplotlib", "plot"], "answers": [{"tags": [], "owner": {"reputation": 3627, "user_id": 1753919, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m9UUd.jpg?s=128&g=1", "display_name": "plasmon360", "link": "https://stackoverflow.com/users/1753919/plasmon360"}, "is_accepted": true, "score": 1, "last_activity_date": 1492041847, "creation_date": 1492041847, "answer_id": 43381505, "question_id": 43381249, "link": "https://stackoverflow.com/questions/43381249/how-can-i-have-a-stacked-plot-with-a-shared-x-axis-and-multiple-y-axis-on-one-of/43381505#43381505", "title": "How can I have a stacked plot with a shared X axis and multiple Y axis on one of the plots?", "body": "<p>You can create a new host subplot and share the xaxis. </p>\n\n<p>replace <code>host = host_subplot(111, axes_class=AA.Axes)</code>\nwith <code>host = host_subplot(211, axes_class=AA.Axes)</code></p>\n\n<p>replace the lines below your line <code>## Attempts to add stacked plot on top</code> with</p>\n\n<pre><code>host2 = host_subplot(212, axes_class=AA.Axes, sharex=host)\nhost2.plot([0,1,2], [5,6,7])\nhost2.set_title('Sharing X axis')\nplt.tight_layout()\nplt.draw()\nplt.show()\n</code></pre>\n\n<p>this results in </p>\n\n<p><a href=\"https://i.stack.imgur.com/YhlZ9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YhlZ9.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 62800, "user_id": 391161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/fb76d8bcc69144a3ee4c893ece7fc588?s=128&d=identicon&r=PG&f=1", "display_name": "merlin2011", "link": "https://stackoverflow.com/users/391161/merlin2011"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 392, "favorite_count": 0, "accepted_answer_id": 43381505, "answer_count": 1, "score": 0, "last_activity_date": 1492069768, "creation_date": 1492039994, "last_edit_date": 1492069768, "question_id": 43381249, "link": "https://stackoverflow.com/questions/43381249/how-can-i-have-a-stacked-plot-with-a-shared-x-axis-and-multiple-y-axis-on-one-of", "title": "How can I have a stacked plot with a shared X axis and multiple Y axis on one of the plots?", "body": "<p>I am trying to modify <a href=\"http://matplotlib.org/1.4.0/examples/pylab_examples/subplots_demo.html\" rel=\"nofollow noreferrer\">this example</a> so also have a second plot on top sharing the same X-axis. Unfortunately, it is not clear how to add subplots to this structure. I have tried to directly combine a different example, but it just creates two figures.</p>\n\n<p><strong>How do I put another plot separated from the two-y-axis plot with the same X-axis?</strong></p>\n\n<pre><code>\"\"\"\nParasite axis demo\n\nThe following code is an example of a parasite axis. It aims to show a user how\nto plot multiple different values onto one single plot. Notice how in this\nexample, par1 and par2 are both calling twinx meaning both are tied directly to\nthe x-axis. From there, each of those two axis can behave separately from the\neach other, meaning they can take on separate values from themselves as well as\nthe x-axis.\n\"\"\"\nfrom mpl_toolkits.axes_grid1 import host_subplot\nimport mpl_toolkits.axisartist as AA\nimport matplotlib.pyplot as plt\n\nhost = host_subplot(111, axes_class=AA.Axes)\nplt.subplots_adjust(right=0.75)\n\npar1 = host.twinx()\npar2 = host.twinx()\n\noffset = 60\nnew_fixed_axis = par2.get_grid_helper().new_fixed_axis\npar2.axis[\"right\"] = new_fixed_axis(loc=\"right\",\n                                    axes=par2,\n                                    offset=(offset, 0))\n\npar2.axis[\"right\"].toggle(all=True)\n\nhost.set_xlim(0, 2)\nhost.set_ylim(0, 2)\n\nhost.set_xlabel(\"Distance\")\nhost.set_ylabel(\"Density\")\npar1.set_ylabel(\"Temperature\")\npar2.set_ylabel(\"Velocity\")\n\np1, = host.plot([0, 1, 2], [0, 1, 2], label=\"Density\")\np2, = par1.plot([0, 1, 2], [0, 3, 2], label=\"Temperature\")\np3, = par2.plot([0, 1, 2], [50, 30, 15], label=\"Velocity\")\n\npar1.set_ylim(0, 4)\npar2.set_ylim(1, 65)\n\nhost.legend()\n\nhost.axis[\"left\"].label.set_color(p1.get_color())\npar1.axis[\"right\"].label.set_color(p2.get_color())\npar2.axis[\"right\"].label.set_color(p3.get_color())\n\n## Attempts to add stacked plot on top\nf, axarr = plt.subplots(2, sharex=True)\naxarr[1].plot([0,1,2], [5,6,7])\naxarr[1].set_title('Sharing X axis')\n\nplt.draw()\nplt.show()\n</code></pre>\n"}, {"tags": ["python", "excel", "pandas", "data-visualization", "xlsxwriter"], "answers": [{"comments": [{"owner": {"reputation": 142, "user_id": 9920026, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/szuvm.png?s=128&g=1", "display_name": "yeamusic21", "link": "https://stackoverflow.com/users/9920026/yeamusic21"}, "edited": false, "score": 0, "creation_date": 1619129242, "post_id": 43387462, "comment_id": 118819167, "body": "Well done.  I found the possible types (min, num, percent, etc.) to be very hard to find in the documentation.  Your response was very helpful!"}, {"owner": {"reputation": 28655, "user_id": 10238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8c3b1025babebf20168dd90ea8f268c?s=128&d=identicon&r=PG", "display_name": "jmcnamara", "link": "https://stackoverflow.com/users/10238/jmcnamara"}, "reply_to_user": {"reputation": 142, "user_id": 9920026, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/szuvm.png?s=128&g=1", "display_name": "yeamusic21", "link": "https://stackoverflow.com/users/9920026/yeamusic21"}, "edited": false, "score": 0, "creation_date": 1619135232, "post_id": 43387462, "comment_id": 118820550, "body": "That would be a compliment if I hadn&#39;t also wrote the documentation. ;-)"}], "tags": [], "owner": {"reputation": 28655, "user_id": 10238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8c3b1025babebf20168dd90ea8f268c?s=128&d=identicon&r=PG", "display_name": "jmcnamara", "link": "https://stackoverflow.com/users/10238/jmcnamara"}, "is_accepted": false, "score": 4, "last_activity_date": 1492085171, "last_edit_date": 1492085171, "creation_date": 1492072986, "answer_id": 43387462, "question_id": 43381230, "link": "https://stackoverflow.com/questions/43381230/xlsx-writer-python-3-color-scale-with-number-as-midpoint/43387462#43387462", "title": "XLSX Writer Python- 3 Color Scale with Number as Midpoint", "body": "<blockquote>\n  <p>I can figure out how to do a 3 color scale in XLSX writer, but there doesnt seem to be an option (I can see) for midpoint being a number:</p>\n</blockquote>\n\n<p>You can use the <code>min_type</code>, <code>mid_type</code> and <code>max_type</code> parameters to set the following types:</p>\n\n<pre><code>min        (for min_type only)\nnum\npercent\npercentile\nformula\nmax        (for max_type only)\n</code></pre>\n\n<p>See <a href=\"http://xlsxwriter.readthedocs.io/working_with_conditional_formats.html?highlight=mid_type#conditional-format-options\" rel=\"nofollow noreferrer\">Conditional Format Options</a></p>\n\n<p>So in your case it should be something like.</p>\n\n<pre><code>worksheet1.conditional_format('D2:D12', {'type': '3_color_scale',\n                                         'min_color': \"red\",\n                                         'mid_color': \"yellow\",\n                                         'max_color': \"green\",\n                                         'mid_type': \"num\"})\n</code></pre>\n\n<p>However, I'm not sure if that will fix your overall problem. Maybe add that to your example and if it doesn't work then open a second question.</p>\n\n<p>One thing that you will have to figure out is how to do what you want in Excel first. After that it is generally easier to figure out what is required in XlsxWriter.</p>\n"}, {"comments": [{"owner": {"reputation": 2763, "user_id": 536538, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/dkOLN.jpg?s=128&g=1", "display_name": "Marc Maxmeister", "link": "https://stackoverflow.com/users/536538/marc-maxmeister"}, "edited": false, "score": 0, "creation_date": 1611941815, "post_id": 53547363, "comment_id": 116620954, "body": "BIG THANKS! This is not obvious. If you pass in a number, the pythonic thing would be for it to see the type of data from what&#39;s passed. But excel is not pythonic, so I appreciate your helping fixing my same problem."}], "tags": [], "owner": {"reputation": 361, "user_id": 2152560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c5277a234ab41b291d2ee3b41edf3d74?s=128&d=identicon&r=PG", "display_name": "Hangman4358", "link": "https://stackoverflow.com/users/2152560/hangman4358"}, "is_accepted": false, "score": 4, "last_activity_date": 1543524598, "creation_date": 1543524598, "answer_id": 53547363, "question_id": 43381230, "link": "https://stackoverflow.com/questions/43381230/xlsx-writer-python-3-color-scale-with-number-as-midpoint/53547363#53547363", "title": "XLSX Writer Python- 3 Color Scale with Number as Midpoint", "body": "<p>I know this is an old question but I just ran into this problem and figured out how to solve it.</p>\n\n<p>Below is a copy of a utility function I wrote for my work. The main thing is that the min, mid and max types ALL need to be 'num' and they need to specify values for these points.</p>\n\n<p>If you only set the mid type to 'num' and value to 0 then the 3 color scale will still use min and max for the end points. This means that if the contents of the column are all on one side of the pivot point the coloring will in effect disregard the pivot.</p>\n\n<pre><code>from xlsxwriter.utility import xl_col_to_name as index_to_col\n\nMIN_MIN_FORMAT_VALUE = -500\nMAX_MAX_FORMAT_VALUE = 500\n\ndef conditional_color_column(\n        worksheet, df, column_name, min_format_value=None, pivot_value=0, max_format_value=None):\n    \"\"\"\n    Do a 3 color conditional format on the column.\n\n    The default behavior for the min and max values is to take the min and max values of each column, unless said value\n    is greater than or less than the pivot value respectively at which point the values MIN_MIN_FORMAT_VALUE and\n    MAX_MAX_FORMAT_VALUE are used. Also, if the min and max vales are less than or greater than respectively of\n    MIN_MIN_FORMAT_VALUE and MAX_MAX_FORMAT_VALUE then the latter will be used\n\n    :param worksheet: The worksheet on which to do the conditional formatting\n    :param df: The DataFrame that was used to create the worksheet\n    :param column_name: The column to format\n    :param min_format_value: The value below which all cells will have the same red color\n    :param pivot_value: The pivot point, values less than this number will gradient to red, values greater will gradient to green\n    :param max_format_value: The value above which all cells will have the same green color\n    :return: Nothing\n    \"\"\"\n    column = df[column_name]\n    min_value = min(column)\n    max_value = max(column)\n\n    last_column = len(df.index)+1\n    column_index = df.columns.get_loc(column_name)\n    excel_column = index_to_col(column_index)\n    column_to_format = f'{excel_column}2:{excel_column}{last_column}'\n\n    if min_format_value is None:\n        min_format_value = max(min_value, MIN_MIN_FORMAT_VALUE)\\\n            if min_value &lt; pivot_value else MIN_MIN_FORMAT_VALUE\n\n    if max_format_value is None:\n        max_format_value = min(max_value, MAX_MAX_FORMAT_VALUE)\\\n            if max_value &gt; pivot_value else MAX_MAX_FORMAT_VALUE\n\n    color_format = {\n        'type': '3_color_scale',\n        'min_type': 'num',\n        'min_value': min_format_value,\n        'mid_type': 'num',\n        'mid_value': pivot_value,\n        'max_type': 'num',\n        'max_value': max_format_value\n    }\n    worksheet.conditional_format(column_to_format, color_format)\n</code></pre>\n"}], "owner": {"reputation": 1221, "user_id": 5837992, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e48681e210062cd39c7e8278561dd872?s=128&d=identicon&r=PG&f=1", "display_name": "Stumbling Through Data Science", "link": "https://stackoverflow.com/users/5837992/stumbling-through-data-science"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4104, "favorite_count": 1, "answer_count": 2, "score": 5, "last_activity_date": 1543524598, "creation_date": 1492039860, "last_edit_date": 1492040194, "question_id": 43381230, "link": "https://stackoverflow.com/questions/43381230/xlsx-writer-python-3-color-scale-with-number-as-midpoint", "title": "XLSX Writer Python- 3 Color Scale with Number as Midpoint", "body": "<p>I'm trying to conditional formatting in XLSX writer with a 3 color scale with a 0 midpoint value in the middle.  I want all negative values to scale from red (lowest number) to yellow (when the value is zero) and all positive numbers to scale from yellow (at zero) to green (at the highest).  </p>\n\n<p>The scaling gets all messed up when I try the following..</p>\n\n<p>Something that would look like the following in Excel:</p>\n\n<p><a href=\"https://i.stack.imgur.com/FzjgB.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/FzjgB.png\" alt=\"enter image description here\"></a></p>\n\n<p>I can figure out how to do a 3 color scale in XLSX writer, but there doesnt seem to be an option (I can see) for midpoint being a number:</p>\n\n<pre><code>worksheet.conditional_format('G2:G83', {'type': '3_color_scale',\n                                     'min_color': \"red\",\n                                     'mid_color': \"yellow\",\n                                     'max_color': \"green\"})\n</code></pre>\n\n<p>I then tried to break it down with a criteria with one format applied to values above zero and one below zero</p>\n\n<pre><code>worksheet.conditional_format('G2:G83', {'type': '2_color_scale',\n                                    'criteria': '&lt;',\n                                    'value': 0,\n                                    'min_color': \"red\",\n                                    'max_color': \"yellow\"})\n\n\nworksheet.conditional_format('G2:G83', {'type': '2_color_scale',\n                                    'criteria': '&gt;',\n                                    'value': 0,\n                                     'min_color': \"yellow\",\n                                     'max_color': \"green\"})\n</code></pre>\n\n<p>But that doesn't seem to work either - if anybody has any ideas.. please let me know.. would really appreciate it.</p>\n\n<p>Complete sample code:</p>\n\n<pre><code>import xlsxwriter\n\nworkbook = xlsxwriter.Workbook('conditional_format.xlsx')\nworksheet1 = workbook.add_worksheet()\n\n\n# Add a format. Light red fill with dark red text.\nformat1 = workbook.add_format({'bg_color': '#FFC7CE',\n                           'font_color': '#9C0006'})\n\n# Add a format. Green fill with dark green text.\nformat2 = workbook.add_format({'bg_color': '#C6EFCE',\n                           'font_color': '#006100'})\n\n# Some sample data to run the conditional formatting against.\ndata = [\n[34, 72, -38, 30, 75, 48, 75, 66, 84, 86],\n[-6, -24, 1, -84, 54, 62, 60, 3, 26, 59],\n[-28, 0, 0, 13, -85, 93, 93, 22, 5, 14],\n[27, -71, -40, 17, 18, 79, 90, 93, 29, 47],\n[0, 25, -33, -23, 0, 1, 59, 79, 47, 36],\n[-24, 100, 20, 88, 29, 33, 38, 54, 54, 88],\n[6, -57, -88, 0, 10, 26, 37, 7, 41, 48],\n[-52, 78, 1, -96, 26, -45, 47, 33, 96, 36],\n[60, -54, -81, 66, 81, 90, 80, 93, 12, 55],\n[-70, 5, 46, 14, 71, -19, 66, 36, 41, 21],\n</code></pre>\n\n<p>]</p>\n\n<pre><code>for row, row_data in enumerate(data):\n    worksheet1.write_row(row + 2, 1, row_data)\n\n\nworksheet1.conditional_format('B2:B12', {'type': '2_color_scale',\n                                    'criteria': '&lt;',\n                                    'value': 0,\n                                    'min_color': \"red\",\n                                    'max_color': \"yellow\"})\n\n\nworksheet1.conditional_format('C2:C12', {'type': '2_color_scale',\n                                    'criteria': '&gt;',\n                                    'value': 0,\n                                     'min_color': \"yellow\",\n                                     'max_color': \"green\"})\n\nworksheet1.conditional_format('C2:C12', {'type': '2_color_scale',\n                                    'criteria': '&lt;',\n                                    'value': 0,\n                                     'min_color': \"red\",\n                                     'max_color': \"yellow\"})\n\n\nworksheet1.conditional_format('D2:D12', {'type': '3_color_scale',\n                                     'min_color': \"red\",\n                                     'mid_color': \"yellow\",\n                                     'max_color': \"green\"})\n\n\n\n\n\n\n\nworkbook.close()    \nwriter.save()\n</code></pre>\n\n<p>This is what I get:</p>\n\n<p><a href=\"https://i.stack.imgur.com/TROTo.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/TROTo.png\" alt=\"enter image description here\"></a></p>\n\n<p>As you can see, column B (the first column) has no green</p>\n\n<p>Column C has no red</p>\n\n<p>Column D has 0 as green</p>\n\n<p>Any ideas how to do the 3 step scaling with zero in the middle?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 56440, "user_id": 2285236, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ac8c2e0f71dbd8cf4543039bebf2ab3?s=128&d=identicon&r=PG&f=1", "display_name": "ayhan", "link": "https://stackoverflow.com/users/2285236/ayhan"}, "is_accepted": true, "score": 4, "last_activity_date": 1492040040, "creation_date": 1492040040, "answer_id": 43381259, "question_id": 43381225, "link": "https://stackoverflow.com/questions/43381225/for-what-function-f-does-df-applyf-convert-all-negative-values-to-zero/43381259#43381259", "title": "For what function f does df.apply(f) convert all negative values to zero?", "body": "<p>That requires <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.applymap.html\" rel=\"nofollow noreferrer\">applymap</a>, not apply:</p>\n\n<pre><code>df = pd.DataFrame(np.random.randn(4, 2))\n\ndf\nOut: \n          0         1\n0  1.157994 -0.729533\n1 -1.062847  1.119744\n2 -0.424534 -0.058468\n3  0.465355 -0.838637\n\ndf.applymap(lambda x: max(x, 0))\n\nOut: \n          0         1\n0  1.157994  0.000000\n1  0.000000  1.119744\n2  0.000000  0.000000\n3  0.465355  0.000000\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 27351, "user_id": 559827, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4aa6db921795b84b986eb4aac8ffd569?s=128&d=identicon&r=PG", "display_name": "kjo", "link": "https://stackoverflow.com/users/559827/kjo"}, "is_accepted": false, "score": 0, "last_activity_date": 1492041199, "creation_date": 1492041199, "answer_id": 43381411, "question_id": 43381225, "link": "https://stackoverflow.com/questions/43381225/for-what-function-f-does-df-applyf-convert-all-negative-values-to-zero/43381411#43381411", "title": "For what function f does df.apply(f) convert all negative values to zero?", "body": "<p>(<strong>NB:</strong> I accepted ayhan answer because I find it ultimately more generally useful, but the answer below is, strictly speaking, closer to what I actually asked for.)</p>\n\n<hr>\n\n<pre><code>import numpy as np\n\nlambda x: np.maximum(x, 0)\n</code></pre>\n\n<p><strong>NB:</strong> <code>np.maximum</code> should not be confused with <code>np.max</code>!</p>\n\n<p>E.g.</p>\n\n<pre><code>import pandas as pd\n\ndf = pd.DataFrame(np.random.randn(4, 2))\n\ndf\n#           0         1\n# 0  0.065962 -0.146952\n# 1  0.248722  0.529046\n# 2 -1.027380  0.632114\n# 3  0.928840 -0.188312\n\ndf.apply(lambda x: np.maximum(x, 0))\n#           0         1\n# 0  0.065962  0.000000\n# 1  0.248722  0.529046\n# 2  0.000000  0.632114\n# 3  0.928840  0.000000\n</code></pre>\n"}], "owner": {"reputation": 27351, "user_id": 559827, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4aa6db921795b84b986eb4aac8ffd569?s=128&d=identicon&r=PG", "display_name": "kjo", "link": "https://stackoverflow.com/users/559827/kjo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 169, "favorite_count": 0, "accepted_answer_id": 43381259, "answer_count": 2, "score": 1, "last_activity_date": 1492041199, "creation_date": 1492039798, "question_id": 43381225, "link": "https://stackoverflow.com/questions/43381225/for-what-function-f-does-df-applyf-convert-all-negative-values-to-zero", "title": "For what function f does df.apply(f) convert all negative values to zero?", "body": "<p>Suppose that <code>df</code> is a Pandas dataframe consisting entirely of floating-point numbers.</p>\n\n<hr>\n\n<p>I know that</p>\n\n<pre><code>df[df &lt; 0] = 0\n</code></pre>\n\n<p>replaces all negative values in <code>df</code> with zeros, but I'm asking something different.  I want to know what function <code>f</code> I must use in the expression</p>\n\n<pre><code>df.apply(f)\n</code></pre>\n\n<p>...such that the resulting dataframe has zeroes at the location where <code>df</code> has negative numbers.</p>\n\n<hr>\n\n<p>FWIW, the following failed with an error:</p>\n\n<pre><code>df.apply(lambda x: max(x, 0))\n</code></pre>\n\n<p>...and the following produced the wrong result:</p>\n\n<pre><code>df.apply(lambda x: numpy.max(x, 0))\n</code></pre>\n\n<hr>\n\n<p>More generally, how does one apply a <em>non-vectorized</em>, scalar-returning function to <em>every</em> cell of a dataframe <em>A</em>, thereby producing a new dataframe with the same shape as <em>A</em>?</p>\n"}, {"tags": ["python", "zip"], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 7859180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faec8ecde4ed6f7c13cb5c08a008bc6e?s=128&d=identicon&r=PG&f=1", "display_name": "Clemetron", "link": "https://stackoverflow.com/users/7859180/clemetron"}, "edited": false, "score": 0, "creation_date": 1492075381, "post_id": 43381254, "comment_id": 73837777, "body": "When I typed it in I got an error of &#39;bool&#39; object is not iterable"}, {"owner": {"reputation": 12982, "user_id": 7668911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6VtZT.jpg?s=128&g=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/7668911/neil"}, "reply_to_user": {"reputation": 37, "user_id": 7859180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faec8ecde4ed6f7c13cb5c08a008bc6e?s=128&d=identicon&r=PG&f=1", "display_name": "Clemetron", "link": "https://stackoverflow.com/users/7859180/clemetron"}, "edited": false, "score": 0, "creation_date": 1492075544, "post_id": 43381254, "comment_id": 73837888, "body": "Just tested it in both languages.  It works fine.  Make sure just to copy and paste the whole thing and try that first.  Does that work? What version of python are you using?"}, {"owner": {"reputation": 37, "user_id": 7859180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faec8ecde4ed6f7c13cb5c08a008bc6e?s=128&d=identicon&r=PG&f=1", "display_name": "Clemetron", "link": "https://stackoverflow.com/users/7859180/clemetron"}, "edited": false, "score": 0, "creation_date": 1492075857, "post_id": 43381254, "comment_id": 73838095, "body": "3.3.2 but yeah it works sorry, was trying it in the shell first my bad...."}], "tags": [], "owner": {"reputation": 12982, "user_id": 7668911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6VtZT.jpg?s=128&g=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/7668911/neil"}, "is_accepted": true, "score": 3, "last_activity_date": 1492040021, "creation_date": 1492040021, "answer_id": 43381254, "question_id": 43381217, "link": "https://stackoverflow.com/questions/43381217/how-to-use-a-condition-from-one-list-to-find-a-value-from-a-different-list/43381254#43381254", "title": "How to use a condition from one list to find a value from a different list", "body": "<p>You can do this via a conditional list comprehension:</p>\n\n<pre><code>lista = [0,5,0,5,0,5]\nlistb = ['a','b','c','d','e','f']\nprint ([listb[i] for i,a in enumerate(lista) if a == 5])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16194, "user_id": 667883, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a39234ae82a5898cba1d70b5bff80ec3?s=128&d=identicon&r=PG", "display_name": "Allen", "link": "https://stackoverflow.com/users/667883/allen"}, "is_accepted": false, "score": 2, "last_activity_date": 1492042367, "creation_date": 1492042367, "answer_id": 43381576, "question_id": 43381217, "link": "https://stackoverflow.com/questions/43381217/how-to-use-a-condition-from-one-list-to-find-a-value-from-a-different-list/43381576#43381576", "title": "How to use a condition from one list to find a value from a different list", "body": "<p>You can also use numpy. It's going to be much faster if your dataset is huge.</p>\n\n<pre><code>import numpy as np\nlista = np.asarray([0,5,0,5,0,5])\nlistb = np.asarray(['a','b','c','d','e','f'])\nlistb[lista==5]\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 7859180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faec8ecde4ed6f7c13cb5c08a008bc6e?s=128&d=identicon&r=PG&f=1", "display_name": "Clemetron", "link": "https://stackoverflow.com/users/7859180/clemetron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 43381254, "answer_count": 2, "score": 1, "last_activity_date": 1492042367, "creation_date": 1492039732, "last_edit_date": 1492041229, "question_id": 43381217, "link": "https://stackoverflow.com/questions/43381217/how-to-use-a-condition-from-one-list-to-find-a-value-from-a-different-list", "title": "How to use a condition from one list to find a value from a different list", "body": "<p>I have two lists:</p>\n\n<pre><code>lista = [0,5,0,5,0,5]\nlistb = ['a','b','c','d','e','f']\n</code></pre>\n\n<p>Is there a way that when a value of <code>lista</code> is <code>5</code>, it finds it in the corresponding place in <code>listb</code> so the letters <code>'b','d','f'</code> are the outcome? </p>\n\n<p>I thought about using <code>zip</code> to get it, but I can't figure out how to apply the condition.</p>\n"}, {"tags": ["python", "mysql", "django"], "comments": [{"owner": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 1, "creation_date": 1492039544, "post_id": 43381167, "comment_id": 73824403, "body": "In Django, if you change the value of a primary key field, a copy of the object with the new key will be created."}, {"owner": {"reputation": 1970, "user_id": 1588039, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bc3cb458630a01c5c0e075989ee46852?s=128&d=identicon&r=PG", "display_name": "tharris", "link": "https://stackoverflow.com/users/1588039/tharris"}, "reply_to_user": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 0, "creation_date": 1492040947, "post_id": 43381167, "comment_id": 73824806, "body": "Thank you, that was exactly it. I guess I&#39;ll need to do it in the form itself."}], "owner": {"reputation": 1970, "user_id": 1588039, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bc3cb458630a01c5c0e075989ee46852?s=128&d=identicon&r=PG", "display_name": "tharris", "link": "https://stackoverflow.com/users/1588039/tharris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1492039356, "creation_date": 1492039356, "question_id": 43381167, "link": "https://stackoverflow.com/questions/43381167/django-model-save-override-not-changing-self", "title": "Django model save override not changing self", "body": "<p>I'm stuck using a non-Django legacy MySQL database. I need to write code that generates a unique filename each time a model object is saved. The following doesn't work. It won't overwrite the filename field. It saves fine with whatever the filename field was set to. Is this because that field is set as the primary key? </p>\n\n<p>(I realize my code isn't creating a random filename--haven't gotten that far yet. Also, I know this will only save once since it needs to be unique, but it won't even save the first time).</p>\n\n<pre><code>class Agenda(models.Model):\ntype = models.IntegerField()\nfilename = models.CharField(max_length=45, primary_key=True)\ndate = models.DateField()\n\nclass Meta:\n    managed = False\n    db_table = 'gbminutes'\n\ndef save(self, *args, **kwargs):\n    self.filename = 'ATESTFILE'\n    super(Agenda, self).save(*args, **kwargs)\n</code></pre>\n"}, {"tags": ["python", "nltk", "text-mining", "text-classification", "corpus"], "comments": [{"owner": {"reputation": 930, "user_id": 7800665, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cidmm.jpg?s=128&g=1", "display_name": "MrJLP", "link": "https://stackoverflow.com/users/7800665/mrjlp"}, "edited": false, "score": 0, "creation_date": 1492040005, "post_id": 43381164, "comment_id": 73824553, "body": "Yes. Log what &quot;total_text&quot; is to see more what&#39;s going on"}, {"owner": {"reputation": 3424, "user_id": 3750257, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KF8gx.png?s=128&g=1", "display_name": "pppery", "link": "https://stackoverflow.com/users/3750257/pppery"}, "edited": false, "score": 0, "creation_date": 1492044309, "post_id": 43381164, "comment_id": 73825627, "body": "Why is <code>piece.stream</code> None"}, {"owner": {"reputation": 43245, "user_id": 699305, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/db6ce45b5ec86e1b00d922fc5cee315f?s=128&d=identicon&r=PG", "display_name": "alexis", "link": "https://stackoverflow.com/users/699305/alexis"}, "edited": false, "score": 0, "creation_date": 1492088279, "post_id": 43381164, "comment_id": 73846818, "body": "Your iteration code ought to work; it does for me, in fact. Have you tested that the code you pasted in your question <i>really</i> triggers the error? (The line numbers in the code and in the error trace don&#39;t match, so this is clearly not the exact code you were using; but perhaps it is equivalent.) And are you able to read sentences from the <code>brown</code> corpus using simpler code? (I.e., have you downloaded the Brown corpus?)"}], "owner": {"reputation": 61, "user_id": 6335910, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c48d61b14633390857b3995855a13f6f?s=128&d=identicon&r=PG&f=1", "display_name": "Elizabeth", "link": "https://stackoverflow.com/users/6335910/elizabeth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 172, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1492039345, "creation_date": 1492039345, "question_id": 43381164, "link": "https://stackoverflow.com/questions/43381164/text-classification-for-python-nonetype-error", "title": "Text Classification for Python- Nonetype Error", "body": "<p>I am working on a basic project with Python regarding Text Classification.\nI am using nltk, and I have imported its Brown Corpus.\nWhile trying to classify one group as \"positive\" and the other group as \"negative\", I am getting a nonetype error.\nThis is the code that I have so far:</p>\n\n<pre><code>from nltk.corpus import brown\nbrown.fileids()\n\ncategories = brown.categories()\ncategories\n\nnews_text = brown.sents(categories='news')\neditorial_text= brown.sents(categories='editorial')\nromance_text= brown.sents(categories='romance')\ntarget_text=news_text + editorial_text\n\ntotal_text=news_text + editorial_text + romance_text\n\ndata=[]\n\nfor text in total_text:\n    if text in target_text:\n        label= \"pos\"\n    else:\n        label = \"neg\"\n\ndata.extend( [(label, text) for text in total_text] )\n</code></pre>\n\n<p>Below is the error message that I am getting:</p>\n\n<pre><code>AttributeError                            Traceback (most recent call last)\n&lt;ipython-input-9-f8709bb455fe&gt; in &lt;module&gt;()\n      1 data=[]\n      2 \n----&gt; 3 for text in total_text:\n      4     if text in target_text:\n      5         label= \"pos\"\n\n/usr/local/lib/python3.5/dist-packages/nltk/collections.py in iterate_from(self, start_index)\n    330                         'inconsistent list value (num elts)')\n    331 \n--&gt; 332             for value in sublist[max(0, start_index-index):]:\n    333                 yield value\n    334 \n\n/usr/local/lib/python3.5/dist-packages/nltk/collections.py in iterate_from(self, start_index)\n    330                         'inconsistent list value (num elts)')\n    331 \n--&gt; 332             for value in sublist[max(0, start_index-index):]:\n    333                 yield value\n    334 \n\n/usr/local/lib/python3.5/dist-packages/nltk/corpus/reader/util.py in iterate_from(self, start_tok)\n    400 \n    401             # Get everything we can from this piece.\n--&gt; 402             for tok in piece.iterate_from(max(0, start_tok-offset)):\n    403                 yield tok\n    404 \n\n/usr/local/lib/python3.5/dist-packages/nltk/corpus/reader/util.py in iterate_from(self, start_tok)\n    291         while filepos &lt; self._eofpos:\n    292             # Read the next block.\n--&gt; 293             self._stream.seek(filepos)\n    294             self._current_toknum = toknum\n    295             self._current_blocknum = block_index\n\nAttributeError: 'NoneType' object has no attribute 'seek'\n</code></pre>\n\n<p>Is there anyway I can fix this?</p>\n"}, {"tags": ["python", "regex"], "answers": [{"comments": [{"owner": {"reputation": 7481, "user_id": 2666270, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8b08ff3f628c4d11f81fe113c6eda6b9?s=128&d=identicon&r=PG", "display_name": "pceccon", "link": "https://stackoverflow.com/users/2666270/pceccon"}, "edited": false, "score": 0, "creation_date": 1492039447, "post_id": 43381162, "comment_id": 73824373, "body": "Is this equivalent to &quot;11+&quot;?"}, {"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 7481, "user_id": 2666270, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8b08ff3f628c4d11f81fe113c6eda6b9?s=128&d=identicon&r=PG", "display_name": "pceccon", "link": "https://stackoverflow.com/users/2666270/pceccon"}, "edited": false, "score": 0, "creation_date": 1492039483, "post_id": 43381162, "comment_id": 73824390, "body": "Yes, <code>1{2,}</code> mean 2 or more <code>1</code>s."}], "tags": [], "owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 3, "last_activity_date": 1492039464, "last_edit_date": 1492039464, "creation_date": 1492039335, "answer_id": 43381162, "question_id": 43381116, "link": "https://stackoverflow.com/questions/43381116/regex-to-detect-repetitions-of-an-speficif-character/43381162#43381162", "title": "Regex to detect repetitions of an speficif character", "body": "<p>You may use</p>\n\n<pre><code>re.split(r'1{2,}', s)\n</code></pre>\n\n<p>See the <a href=\"https://regex101.com/r/BqABHp/1\" rel=\"nofollow noreferrer\">regex demo</a>. Here, <code>1{2,}</code> matches 2 or more (due to the <a href=\"http://www.regular-expressions.info/repeat.html#limit\" rel=\"nofollow noreferrer\">limiting quantifier</a> <code>{2,}</code>) <code>1</code> digits.</p>\n\n<p>If the <code>1</code>s may appear at the beginning, you will need to remove empty elements, say, with <code>filter(None, result)</code>.</p>\n\n<p>See a <a href=\"http://ideone.com/hsaLe1\" rel=\"nofollow noreferrer\">Python demo</a>.</p>\n"}], "owner": {"reputation": 7481, "user_id": 2666270, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8b08ff3f628c4d11f81fe113c6eda6b9?s=128&d=identicon&r=PG", "display_name": "pceccon", "link": "https://stackoverflow.com/users/2666270/pceccon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 24, "favorite_count": 0, "accepted_answer_id": 43381162, "answer_count": 1, "score": 0, "last_activity_date": 1492039464, "creation_date": 1492039063, "question_id": 43381116, "link": "https://stackoverflow.com/questions/43381116/regex-to-detect-repetitions-of-an-speficif-character", "title": "Regex to detect repetitions of an speficif character", "body": "<p>There's being a while since I last used regex...\nI have a string of 0s and 1s:</p>\n\n<pre><code>0010001110011000\n</code></pre>\n\n<p>And I have to split it by blocks of 1 (2 or more consecutive 1s):</p>\n\n<pre><code>001000 # These are the blocks what matters to me\n00\n000\n</code></pre>\n\n<p>I'm wondering how to do that.</p>\n\n<p>I was trying something like this, in Python:</p>\n\n<pre><code>l = re.compile(\"([1])\\1+\").split(s)\n</code></pre>\n\n<p>But it is not right. </p>\n\n<p>Thank you.</p>\n"}, {"tags": ["python", "indentation"], "comments": [{"owner": {"reputation": 670, "user_id": 3672977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7eede4ef5afe2d79fb1aaedc02859f6e?s=128&d=identicon&r=PG", "display_name": "thesonyman101", "link": "https://stackoverflow.com/users/3672977/thesonyman101"}, "edited": false, "score": 0, "creation_date": 1492039140, "post_id": 43381115, "comment_id": 73824295, "body": "You should backspace the else then just press tab once. I feel like this isn&#39;t Stack Overflow worthy though..."}, {"owner": {"reputation": 930, "user_id": 7800665, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cidmm.jpg?s=128&g=1", "display_name": "MrJLP", "link": "https://stackoverflow.com/users/7800665/mrjlp"}, "edited": false, "score": 1, "creation_date": 1492039297, "post_id": 43381115, "comment_id": 73824338, "body": "You need to get more up to speed to ask a legitimate question. You have <code>def cube(num):</code> which would be what&#39;s used to define a function. Not sure why that&#39;s there but that&#39;s the cause of your syntax error."}], "answers": [{"tags": [], "owner": {"reputation": 399, "user_id": 1964090, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a281975e9007d74454e342d77d64b3f5?s=128&d=identicon&r=PG", "display_name": "Nishant", "link": "https://stackoverflow.com/users/1964090/nishant"}, "is_accepted": false, "score": 0, "last_activity_date": 1492039300, "creation_date": 1492039300, "answer_id": 43381156, "question_id": 43381115, "link": "https://stackoverflow.com/questions/43381115/indentationerror-expected-an-indented-block-python-codeacademy/43381156#43381156", "title": "IndentationError: expected an indented block (python codeacademy)", "body": "<p>On line 3 <code>def cube(num):</code> you have an extra <code>def</code> and <code>:</code>. Remove those</p>\n\n<p>When defining a function you need <code>def</code> and colon, where as for calling it you don't need one. The correct code</p>\n\n<pre><code>def by_three(num):    \n    if num%3 == 0:\n        cube(num)\n    else:    \n        print \"False\"\n\ndef cube(num):  \n    return num**3\n\nby_three(9)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9511, "user_id": 7023590, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/82052fbf0815ce82c4eded8fd941be14?s=128&d=identicon&r=PG&f=1", "display_name": "MarianD", "link": "https://stackoverflow.com/users/7023590/mariand"}, "is_accepted": false, "score": 1, "last_activity_date": 1492043175, "last_edit_date": 1492043175, "creation_date": 1492042753, "answer_id": 43381616, "question_id": 43381115, "link": "https://stackoverflow.com/questions/43381115/indentationerror-expected-an-indented-block-python-codeacademy/43381616#43381616", "title": "IndentationError: expected an indented block (python codeacademy)", "body": "<p>You probably wanted to <em>call</em> (use) the function <code>cube()</code> instead of <em>defining it</em><br /> (in your <code>by_three()</code> function definition), so your corrected code will be:</p>\n\n<pre><code>def by_three(num):         \n    if num%3 == 0:\n        print cube(num)          # Instead of your original \"def cube(num):\"       \n    else:        \n        print \"False\"\n\ndef cube(num):  \n    return num**3\n\nby_three(9)\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 7859038, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f94a18aad4d2b3e2366f37d232030366?s=128&d=identicon&r=PG&f=1", "display_name": "J. Montalvo", "link": "https://stackoverflow.com/users/7859038/j-montalvo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 796, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1492043175, "creation_date": 1492039062, "question_id": 43381115, "link": "https://stackoverflow.com/questions/43381115/indentationerror-expected-an-indented-block-python-codeacademy", "title": "IndentationError: expected an indented block (python codeacademy)", "body": "<p>I was taking my course at codeacademy until something went wrong and couldn't proceed, a little help please :( here is my code </p>\n\n<pre><code>def by_three(num):         \n    if num%3 == 0:\n        def cube(num):        \n    else:        \n        print \"False\"\n\ndef cube(num):  \n    return num**3\n\nby_three(9)\n</code></pre>\n\n<p>I get...</p>\n\n<pre><code>File \"&lt;stdin&gt;\", line 4  \nelse:  \n^  \nIndentationError: expected an indented block  \nUnknown error.\n</code></pre>\n\n<p>I will really appreciate your help people!!</p>\n"}, {"tags": ["python", "python-2.7", "python-3.x", "unit-testing", "python-unittest"], "comments": [{"owner": {"reputation": 36413, "user_id": 2301450, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/4xgoZ.png?s=128&g=1", "display_name": "vaultah", "link": "https://stackoverflow.com/users/2301450/vaultah"}, "edited": false, "score": 1, "creation_date": 1492039203, "post_id": 43381113, "comment_id": 73824312, "body": "<code>test_query</code> is either a string or <code>None</code>, so when the next line is executed, the <code>slots</code> argument of <code>create_http_query</code> is either a string or <code>None</code> (string in your case)."}], "answers": [{"tags": [], "owner": {"reputation": 1722, "user_id": 1394869, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1f99af368f5f1bf54c512e2a79d155ab?s=128&d=identicon&r=PG", "display_name": "Dan", "link": "https://stackoverflow.com/users/1394869/dan"}, "is_accepted": false, "score": 1, "last_activity_date": 1492127228, "creation_date": 1492127228, "answer_id": 43403327, "question_id": 43381113, "link": "https://stackoverflow.com/questions/43381113/typeerror-string-indices-must-be-integers-not-str-what-am-i-not-seeing/43403327#43403327", "title": "TypeError: String indices must be integers, not str. What am I not seeing?", "body": "<pre><code>def testQueryCreationPositive(self):\n    test_query = self.testDBM.create_http_query(self.test_query_values_positive)\n    self.assertEqual(\"some.api/findCar?city=Tampa&amp;class=luxury\",\n                     self.testDBM.create_http_query(test_query))  # this line is bad\n</code></pre>\n\n<p>This is what you want:</p>\n\n<pre><code>self.assertEqual(\"some.api/findCar?city=Tampa&amp;class=luxury\", test_query)\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 3907324, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/807b0e3fe91e127e73d308214fbabbb9?s=128&d=identicon&r=PG&f=1", "display_name": "bsteven48", "link": "https://stackoverflow.com/users/3907324/bsteven48"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 243, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1492127228, "creation_date": 1492039050, "last_edit_date": 1492039283, "question_id": 43381113, "link": "https://stackoverflow.com/questions/43381113/typeerror-string-indices-must-be-integers-not-str-what-am-i-not-seeing", "title": "TypeError: String indices must be integers, not str. What am I not seeing?", "body": "<p>I am testing some code and want to test to see if the API is properly formatted. Below is the dictionary that I am using to test.</p>\n\n<pre><code>self.test_query_values_positive = {\n    'DriverAge' : 33,\n    'PickUpCity' : 'Tampa',\n    'CarType' : 'luxury'\n}\n</code></pre>\n\n<p>Here is the unit test in question:</p>\n\n<pre><code>def testQueryCreationPositive(self):\n    test_query = self.testDBM.create_http_query(self.test_query_values_positive)\n    self.assertEqual(\"some.api/findCar?city=Tampa&amp;class=luxury\",\n                     self.testDBM.create_http_query(test_query))\n</code></pre>\n\n<p>And here is the function I am calling from the testDBM object</p>\n\n<pre><code>def create_http_query(self, slots):\n    base_url = 'some.api/findCar?'\n    query = None\n    if self.verify_age(slots['DriverAge']):\n        pickup = slots['PickUpCity'].title()\n        car_type = slots['CarType'].lower()\n        query = '{0}city={1}&amp;class={2}'.format(base_url, pickup, car_type)\n    else:\n        query = None\n    return query\n</code></pre>\n\n<p>From this, I am getting a TypeError as shown below:</p>\n\n<pre><code>TypeError: string indices must be integers, not str\n</code></pre>\n\n<p>What am I not seeing?  I have a negative test right below it that runs perfectly fine, but this one doesn't.  Why is that?</p>\n\n<p>EDIT:  I forgot to say that the line in question is:</p>\n\n<pre><code>if self.verify_age(slots['DriverAge']):\n</code></pre>\n\n<p>It seems to run fine other than that.</p>\n"}, {"tags": ["python", "django", "python-datetime"], "comments": [{"owner": {"reputation": 11906, "user_id": 4842742, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5ExYH.jpg?s=128&g=1", "display_name": "sobolevn", "link": "https://stackoverflow.com/users/4842742/sobolevn"}, "edited": false, "score": 0, "creation_date": 1492039205, "post_id": 43381093, "comment_id": 73824314, "body": "&#39;%z&#39; if you are using <code>python3</code> <a href=\"http://stackoverflow.com/questions/26165659/python-timezone-z-directive-for-datetime-strptime-not-available\" title=\"python timezone z directive for datetime strptime not available\">stackoverflow.com/questions/26165659/&hellip;</a>"}, {"owner": {"reputation": 1465, "user_id": 2840591, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/184603367/picture?type=large", "display_name": "Brian McCall", "link": "https://stackoverflow.com/users/2840591/brian-mccall"}, "reply_to_user": {"reputation": 11906, "user_id": 4842742, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5ExYH.jpg?s=128&g=1", "display_name": "sobolevn", "link": "https://stackoverflow.com/users/4842742/sobolevn"}, "edited": false, "score": 0, "creation_date": 1492039457, "post_id": 43381093, "comment_id": 73824380, "body": "the &lt; is giving me an invalid syntax error"}, {"owner": {"reputation": 16194, "user_id": 667883, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a39234ae82a5898cba1d70b5bff80ec3?s=128&d=identicon&r=PG", "display_name": "Allen", "link": "https://stackoverflow.com/users/667883/allen"}, "edited": false, "score": 0, "creation_date": 1492042750, "post_id": 43381093, "comment_id": 73825268, "body": "strftime(&quot;%Y-%m-%d %H:%M:%S&quot;) works fine for me. Can you give an example about how the time tuples are constructed and what error you got?"}, {"owner": {"reputation": 1073, "user_id": 5919344, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kEEds.png?s=128&g=1", "display_name": "Bijoy", "link": "https://stackoverflow.com/users/5919344/bijoy"}, "edited": false, "score": 0, "creation_date": 1492054010, "post_id": 43381093, "comment_id": 73827907, "body": "this would help <a href=\"http://www.saltycrane.com/blog/2009/05/converting-time-zones-datetime-objects-python/\" rel=\"nofollow noreferrer\">saltycrane.com/blog/2009/05/&hellip;</a>"}, {"owner": {"reputation": 1465, "user_id": 2840591, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/184603367/picture?type=large", "display_name": "Brian McCall", "link": "https://stackoverflow.com/users/2840591/brian-mccall"}, "edited": false, "score": 0, "creation_date": 1492094120, "post_id": 43381093, "comment_id": 73851198, "body": "I am getting exactly this from the query datetime.datetime(2010, 7, 1, 0, 0, tzinfo=&lt;UTC&gt;) I am not sure how the tuples are created"}], "answers": [{"comments": [{"owner": {"reputation": 5615, "user_id": 5802289, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tehnK.jpg?s=128&g=1", "display_name": "J0ANMM", "link": "https://stackoverflow.com/users/5802289/j0anmm"}, "edited": false, "score": 2, "creation_date": 1559578817, "post_id": 43414711, "comment_id": 99456719, "body": "I didn&#39;t know about the <code>isoformat</code> method, very useful indeed. Thanks for sharing"}], "tags": [], "owner": {"reputation": 8555, "user_id": 484127, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/53AHb.jpg?s=128&g=1", "display_name": "tutuDajuju", "link": "https://stackoverflow.com/users/484127/tutudajuju"}, "is_accepted": true, "score": 16, "last_activity_date": 1492184071, "creation_date": 1492184071, "answer_id": 43414711, "question_id": 43381093, "link": "https://stackoverflow.com/questions/43381093/convert-python-datetime-with-timezone-to-string/43414711#43414711", "title": "convert python datetime with timezone to string", "body": "<p>The way you seem to be doing it, would work fine for both timezone aware and naive datetime objects. If you want to also add the timezone to your string, you can  simply add add it with %z or %Z, or using the <code>isoformat</code> method:</p>\n\n<pre><code>&gt;&gt;&gt; from datetime import timedelta, datetime, tzinfo\n\n&gt;&gt;&gt; class UTC(tzinfo):\n...     def utcoffset(self, dt):\n...         return timedelta(0)\n... \n...     def dst(self, dt):\n...         return timedelta(0)\n... \n...     def tzname(self,dt):\n...          return \"UTC\"\n\n&gt;&gt;&gt; source = datetime(2010, 7, 1, 0, 0, tzinfo=UTC())\n&gt;&gt;&gt; repr(source)\ndatetime.datetime(2010, 7, 1, 0, 0, tzinfo=&lt;__main__.UTC object at 0x1054107d0&gt;)\n\n# %Z outputs the tzname\n&gt;&gt;&gt; source.strftime(\"%Y-%m-%d %H:%M:%S %Z\")\n'2010-07-01 00:00:00 UTC'\n\n# %z outputs the UTC offset in the form +HHMM or -HHMM\n&gt;&gt;&gt; source.strftime(\"%Y-%m-%d %H:%M:%S %z\")\n'2010-07-01 00:00:00 +0000'\n\n# isoformat outputs the offset as +HH:MM or -HH:MM\n&gt;&gt;&gt; source.isoformat()\n'2010-07-01T00:00:00+00:00'\n</code></pre>\n"}], "owner": {"reputation": 1465, "user_id": 2840591, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/184603367/picture?type=large", "display_name": "Brian McCall", "link": "https://stackoverflow.com/users/2840591/brian-mccall"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13488, "favorite_count": 1, "accepted_answer_id": 43414711, "answer_count": 1, "score": 12, "last_activity_date": 1492184071, "creation_date": 1492038939, "last_edit_date": 1492039221, "question_id": 43381093, "link": "https://stackoverflow.com/questions/43381093/convert-python-datetime-with-timezone-to-string", "title": "convert python datetime with timezone to string", "body": "<p>I have date time tuples in the format of <code>datetime.datetime(2010, 7, 1, 0, 0, tzinfo=&lt;UTC&gt;)</code></p>\n\n<p>How can I convert that into a date time string such as <code>2008-11-10 17:53:59</code></p>\n\n<p>I am really just getting held up on the tzinfo part.</p>\n\n<p><code>strftime(\"%Y-%m-%d %H:%M:%S\")</code> works fine without the tzinfo part</p>\n"}, {"tags": ["python", "arrays", "numpy"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1492039830, "post_id": 43381025, "comment_id": 73824499, "body": "I was hoping you could use <code>numpy.multiply(in1, in2, out)</code> with a 16-bit <code>out</code>, but apparently, that still truncates to 8 bits before storing the output to the 16-bit array."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1492040287, "post_id": 43381025, "comment_id": 73824635, "body": "If memory is so small that you can&#39;t afford several 16bit temporary arrays, then <code>numpy</code> is the wrong tool."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "edited": false, "score": 0, "creation_date": 1492040346, "post_id": 43381025, "comment_id": 73824658, "body": "@MSeifert: We&#39;re not multiplying <code>in1</code> by <code>in2 &#47; 256</code>; we&#39;re dividing <code>in1 * in2</code> by <code>256</code>. <code>in1 * in2</code> overflows. Also, the division is probably intended to be floordiv, not truediv."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1492040991, "post_id": 43381025, "comment_id": 73824815, "body": "If creating and discarding giant scratch arrays everywhere isn&#39;t feasible for you, NumPy isn&#39;t going to serve your needs. NumPy loves its giant scratch arrays. You&#39;ll end up writing everything in C-like Numba or Cython to avoid the scratch arrays, or taking a 100x speed hit to write everything in plain Python loops."}, {"owner": {"reputation": 182, "user_id": 7375417, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-_XgIlShyVxU/AAAAAAAAAAI/AAAAAAAAAHg/QNE1bLfr_h4/photo.jpg?sz=128", "display_name": "M. M.", "link": "https://stackoverflow.com/users/7375417/m-m"}, "edited": false, "score": 0, "creation_date": 1492041881, "post_id": 43381025, "comment_id": 73825058, "body": "Ok, so it isn&#39;t doable then.  Thank you for input anyway."}], "answers": [{"comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1492041857, "post_id": 43381443, "comment_id": 73825052, "body": "Huh. Ufuncs accept a dtype argument? That&#39;s not in the <code>numpy.multiply</code> docs."}, {"owner": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1492041936, "post_id": 43381443, "comment_id": 73825071, "body": "Yeah, there are a lot of useful (and almost unknown) arguments, e.g. <code>where</code>. These hide in the general &quot;ufunc&quot; documentation I linked in the answer :)"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1492042294, "post_id": 43381443, "comment_id": 73825145, "body": "I&#39;m not sure this actually avoids creating 16-bit temporary arrays for the inputs."}, {"owner": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1492042871, "post_id": 43381443, "comment_id": 73825292, "body": "@user2357112 At least superficial testing with <code>a = np.ones((100_000_000), dtype=np.float16); np.multiply(a, a, dtype=np.float64)</code> doesn&#39;t show a temporary rise in memory usage that would indicate that there is more than one <code>float64</code> array. Be careful to adjust the number depending on your RAM because that creates an almost 1GB array."}], "tags": [], "owner": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "is_accepted": false, "score": 1, "last_activity_date": 1492041380, "creation_date": 1492041380, "answer_id": 43381443, "question_id": 43381025, "link": "https://stackoverflow.com/questions/43381025/numpy-multiply-arrays-without-losing-precision-overflowing/43381443#43381443", "title": "Numpy: multiply arrays without losing precision / overflowing", "body": "<p>In numpy you can use the <a href=\"https://docs.scipy.org/doc/numpy/reference/ufuncs.html#overriding-ufunc-behavior\" rel=\"nofollow noreferrer\"><code>dtype</code></a> argument to calulcate the temporary array in another dtype without explicitly copying the array:</p>\n\n<pre><code>&gt;&gt;&gt; out = np.multiply(in1, in2, dtype=np.uint16)  # overflow safe multiplication\n&gt;&gt;&gt; np.floor_divide(out, 256, out=out)            # in-place division\n&gt;&gt;&gt; out\narray([1, 2, 3], dtype=uint16)\n</code></pre>\n\n<p>However then <code>out</code> will be an <code>uint16</code> array (because one can't chain ufuncs with numpy). But it avoids temporary arrays as much as possible.</p>\n"}], "owner": {"reputation": 182, "user_id": 7375417, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-_XgIlShyVxU/AAAAAAAAAAI/AAAAAAAAAHg/QNE1bLfr_h4/photo.jpg?sz=128", "display_name": "M. M.", "link": "https://stackoverflow.com/users/7375417/m-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1364, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1492041380, "creation_date": 1492038477, "last_edit_date": 1492040586, "question_id": 43381025, "link": "https://stackoverflow.com/questions/43381025/numpy-multiply-arrays-without-losing-precision-overflowing", "title": "Numpy: multiply arrays without losing precision / overflowing", "body": "<p>I am using Numpy to do some basic operations on picture files. I'd like to perform the following operation:</p>\n\n<pre><code>in1, in2, out # some numpy arrays of dtype uint8\nout = in1 * in2 / 256\n</code></pre>\n\n<p>However, due to the size of <code>uint8</code> and the rules of the modular arithmetic, an overflow occurs and the result is incorrect.</p>\n\n<p>(The same problem doesn't occur in, for instance, in C++, where the intermediate result can be stored in a temporary space of a larger size.)</p>\n\n<p>Another way would be to perform the multiplication twice: <code>out = in1/16 * in2/16</code>. However, this results in an innacurate value of the output.</p>\n\n<p>One working solution would be manually setting every pixel:</p>\n\n<pre><code>out = numpy.empty(in1.shape, dtype=\"uint8\")\nfor i in range(out.shape[0]):\n    out[i] = int(in1[i])*in2[i]/256\n</code></pre>\n\n<p>This, however, requires you to know the exact number of dimensions in an array, and is generally inelegant (and possibly slower, because of the explicit loop(s)).</p>\n\n<p>Another method would be to cast one of the source matrices into a type of a greater precision, e.g.:</p>\n\n<pre><code>out = in1.astype(\"uint16\")*in2/256\n</code></pre>\n\n<p>This one, however, can be very memory-intensive, because it copies <em>the whole array</em>, instead of just keeping one variable with the intermediate result.</p>\n\n<hr>\n\n<p><strong>Edit</strong></p>\n\n<p>Here's a small example:</p>\n\n<pre><code>in1 = numpy.array([2, 4, 6], dtype=\"uint8\")\nin2 = numpy.array([128, 128, 128], dtype=\"uint8\")\n\nout = numpy.empty((3,), dtype=\"uint8\")\n\n# what I want to get: array([1, 2, 3], dtype=uint8)\n\nout[:] = in1 * in2 / 256 # array([0, 0, 0], dtype=uint8)\n</code></pre>\n\n<hr>\n\n<p>So, here's my question: is there yet another way I'm missing? Is there a preferred (or just, efficient) way to do what I want to do, or do I just need to refactor my program?</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 7823861, "user_type": "registered", "profile_image": "https://graph.facebook.com/10212436605456560/picture?type=large", "display_name": "Benjamin Timothy", "link": "https://stackoverflow.com/users/7823861/benjamin-timothy"}, "edited": false, "score": 0, "creation_date": 1492045798, "post_id": 43381561, "comment_id": 73825922, "body": "I am very bad at the formatting of my questions on here at the moment. Sorry. Very new to Stack."}, {"owner": {"reputation": 25, "user_id": 7823861, "user_type": "registered", "profile_image": "https://graph.facebook.com/10212436605456560/picture?type=large", "display_name": "Benjamin Timothy", "link": "https://stackoverflow.com/users/7823861/benjamin-timothy"}, "edited": false, "score": 0, "creation_date": 1492046873, "post_id": 43381561, "comment_id": 73826193, "body": "So it looks like you edited the def part of your code to count unique, and handle if no results? Correct?"}, {"owner": {"reputation": 10872, "user_id": 3135417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b989009ea961e780793f80ea6d53240?s=128&d=identicon&r=PG&f=1", "display_name": "Abdou", "link": "https://stackoverflow.com/users/3135417/abdou"}, "reply_to_user": {"reputation": 25, "user_id": 7823861, "user_type": "registered", "profile_image": "https://graph.facebook.com/10212436605456560/picture?type=large", "display_name": "Benjamin Timothy", "link": "https://stackoverflow.com/users/7823861/benjamin-timothy"}, "edited": false, "score": 0, "creation_date": 1492046922, "post_id": 43381561, "comment_id": 73826212, "body": "Yup. Does the new definition help at all?"}], "tags": [], "owner": {"reputation": 10872, "user_id": 3135417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b989009ea961e780793f80ea6d53240?s=128&d=identicon&r=PG&f=1", "display_name": "Abdou", "link": "https://stackoverflow.com/users/3135417/abdou"}, "is_accepted": false, "score": 0, "last_activity_date": 1492046108, "last_edit_date": 1492046108, "creation_date": 1492042248, "answer_id": 43381561, "question_id": 43380895, "link": "https://stackoverflow.com/questions/43380895/group-by-agg-reset-index-where-filter-returns-null-continued/43381561#43381561", "title": "Group By, Agg, Reset Index where filter returns null continued", "body": "<p>If I understand correctly what you're looking for, the following should do:</p>\n\n<pre><code>import pandas as pd\n\n# Generate data\nd = {'customer_number': [231, 451, 345, 236, 457, 354],\n'ethnicity': ['Black', 'White', 'White', 'Black', 'White', 'White'],\n'fiscal_quarter': ['Quarter 1','Quarter 1','Quarter 1','Quarter 3','Quarter 3','Quarter 1'],\n'fiscal_year': [2016, 2016, 2016, 2015, 2015, 2017]}\n\ndf = pd.DataFrame(d)\n\n# Helper function to determine subset of\n# dataframe that meets ethnicity condition\ndef find_ethnicity(dff, ethnicity):\n    count = dff.customer_number[dff.ethnicity.eq(ethnicity)].nunique()\n    if count == 0:\n        dff = dff.head(1).copy()\n    else:\n        dff = dff[dff.ethnicity.eq(ethnicity)].copy().head(1)\n    dff['ethnicity'] = ethnicity\n    dff['customer_number'] = count\n    return dff\n\n\n# Test with ethnicity 'Black' grouping by fiscal_year and fiscal_quarter\nprint(df.groupby(['fiscal_year', 'fiscal_quarter'], as_index=False).apply(find_ethnicity, 'Black')).reset_index(drop=True)\n\n#    customer_number ethnicity fiscal_quarter  fiscal_year\n# 0                1     Black      Quarter 3         2015\n# 1                1     Black      Quarter 1         2016\n# 2                0     Black      Quarter 1         2017\n\n# Test with ethnicity 'Asian' grouping by fiscal_year and fiscal_quarter\nprint(df.groupby(['fiscal_year', 'fiscal_quarter'], as_index=False).apply(find_ethnicity, 'Asian')).reset_index(drop=True)\n\n#    customer_number ethnicity fiscal_quarter  fiscal_year\n# 0                0     Asian      Quarter 3         2015\n# 1                0     Asian      Quarter 1         2016\n# 2                0     Asian      Quarter 1         2017\n\n# Test with ethnicity 'White' grouping by fiscal_year and fiscal_quarter\nprint(df.groupby(['fiscal_year', 'fiscal_quarter'], as_index=False).apply(find_ethnicity, 'White')).reset_index(drop=True)\n\n#    customer_number ethnicity fiscal_quarter  fiscal_year\n# 0                1     White      Quarter 3         2015\n# 1                2     White      Quarter 1         2016\n# 2                1     White      Quarter 1         2017\n\n# Test with ethnicity 'Latino' grouping by fiscal_year and fiscal_quarter\nprint(df.groupby(['fiscal_year', 'fiscal_quarter'], as_index=False).apply(find_ethnicity, 'Latino')).reset_index(drop=True)\n\n#    customer_number ethnicity fiscal_quarter  fiscal_year\n# 0                0    Latino      Quarter 3         2015\n# 1                0    Latino      Quarter 1         2016\n# 2                0    Latino      Quarter 1         2017\n\n# Test with ethnicity 'Asian' without grouping\nprint(find_ethnicity(df, 'Asian'))\n\n#    customer_number ethnicity fiscal_quarter  fiscal_year\n# 0                0     Asian      Quarter 1         2016\n</code></pre>\n\n<p>I hope this proves useful.</p>\n"}, {"tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": true, "score": 1, "last_activity_date": 1492048048, "last_edit_date": 1492048048, "creation_date": 1492047128, "answer_id": 43382137, "question_id": 43380895, "link": "https://stackoverflow.com/questions/43380895/group-by-agg-reset-index-where-filter-returns-null-continued/43382137#43382137", "title": "Group By, Agg, Reset Index where filter returns null continued", "body": "<p><strong><em>short answer</em></strong>  </p>\n\n<pre><code># make column `Categorical`, include `'Asian'` as one of the categories\ne = df.ethnicity\ndf['ethnicity'] = pd.Categorical(e, categories=np.append('Asian', e.unique()))\n\n# simple function to be applied.  performs 2nd level of `groupby`\ndef f(df):\n    s = df.groupby('ethnicity').customer_number.nunique()\n    return s.loc['Asian']\n\n# initial `groupby`\nd = df.groupby(['fiscal_year', 'fiscal_quarter']).apply(f)\n\nd.reset_index(name='nunique')\n\n   fiscal_year fiscal_quarter  nunique\n0         2016      Quarter 1        0\n</code></pre>\n\n<hr>\n\n<p><strong><em>explanation</em></strong>  </p>\n\n<ul>\n<li>a convenient way to to <code>groupby</code> and produce aggregated results over <code>groups</code> that didn't exist, is to define the column of groups as <code>'Categorical'</code> where you define the categories to include the thing that is missing.  <code>pandas</code> will include that category in the aggregated results.</li>\n<li>However, in this case, I could not <code>groupby</code> with 3 different columns and maintain that same convenience.  I had to break up the grouping into 2.\n\n<ol>\n<li><code>groupby</code> columns that aren't <code>'Categorical'</code>.  Namely <code>['fiscal_year', 'fiscal_quarter']</code></li>\n<li><code>apply</code> to <code>groupby</code> in step 1, a function that performs a simple <code>groupby</code> over just <code>ethnicity</code>.  This <strong><em>will</em></strong> maintain the desired behavior and report on all categories regardless of whether they are represented in the data.</li>\n</ol></li>\n</ul>\n\n<hr>\n\n<p><strong><em>leaving all categories</em></strong>  </p>\n\n<pre><code>e = df.ethnicity\ndf['ethnicity'] = pd.Categorical(\n    e, categories=np.append(['Asian', 'Hispanic'], e.unique()))\n\ndef f(df):\n    return df.groupby('ethnicity').customer_number.nunique()\n\nd = df.groupby(['fiscal_year', 'fiscal_quarter']).apply(f)\n\nd.stack().reset_index(name='nunique')\n\n   fiscal_year fiscal_quarter ethnicity  nunique\n0         2016      Quarter 1     Asian        0\n1         2016      Quarter 1  Hispanic        0\n2         2016      Quarter 1     Black        1\n3         2016      Quarter 1     White        1\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 7823861, "user_type": "registered", "profile_image": "https://graph.facebook.com/10212436605456560/picture?type=large", "display_name": "Benjamin Timothy", "link": "https://stackoverflow.com/users/7823861/benjamin-timothy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 221, "favorite_count": 0, "accepted_answer_id": 43382137, "answer_count": 2, "score": 1, "last_activity_date": 1492048048, "creation_date": 1492037657, "question_id": 43380895, "link": "https://stackoverflow.com/questions/43380895/group-by-agg-reset-index-where-filter-returns-null-continued", "title": "Group By, Agg, Reset Index where filter returns null continued", "body": "<p>Here is something that would be a sample data set</p>\n\n<pre><code> customer_number ethnicity fiscal_quarter  fiscal_year\n1              231     Black      Quarter 1         2016\n2              451     White      Quarter 1         2016\n3              345     White      Quarter 1         2016\n</code></pre>\n\n<p>I would like to do the check for 'Asian' test on the ethnicity column, group by fiscal_year, fiscal_quarter, and count unique customer_number. But if there is no result for 'Asian', return a dataframe like below.</p>\n\n<pre><code> customer_number fiscal_quarter  fiscal_year\n1                0      Quarter 1         2016\n</code></pre>\n"}, {"tags": ["python", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1492037829, "post_id": 43380866, "comment_id": 73823933, "body": "It&#39;s not the <code>astype(int)</code>   It&#39;s the way you constructed <code>df</code> prior."}, {"owner": {"reputation": 501, "user_id": 6052503, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/tS0UP.jpg?s=128&g=1", "display_name": "jhub1", "link": "https://stackoverflow.com/users/6052503/jhub1"}, "reply_to_user": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1492039063, "post_id": 43380866, "comment_id": 73824276, "body": "I&#39;ve read the other pages - I&#39;m still having trouble reproducing their solutions aren&#39;t exactly what I&#39;m trying to do (I think?). One method is to make a copy, but I&#39;m trying to avoid making a copy and do it in place since the dataframe I have is huge."}, {"owner": {"reputation": 501, "user_id": 6052503, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/tS0UP.jpg?s=128&g=1", "display_name": "jhub1", "link": "https://stackoverflow.com/users/6052503/jhub1"}, "reply_to_user": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1492039088, "post_id": 43380866, "comment_id": 73824280, "body": "Can you clarify by what you mean by df prior? I&#39;m new at this. Thanks! @piRSquared"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1492043275, "post_id": 43380866, "comment_id": 73825385, "body": "<code>df[&#39;uid&#39;] = df.uid.astype(int)</code> implies <code>df</code> already existed.  It was how it was constructed that left it as a <code>copy</code>."}, {"owner": {"reputation": 1207, "user_id": 6039095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6aaa31cdfb8b7b282648a2008cdd0a86?s=128&d=identicon&r=PG", "display_name": "dmdip", "link": "https://stackoverflow.com/users/6039095/dmdip"}, "edited": false, "score": 0, "creation_date": 1492061464, "post_id": 43380866, "comment_id": 73830035, "body": "If you want to do this using loc, you would do it this way :  <code>df.loc[:, &#39;uid&#39;] = df[&#39;uid&#39;].astype(int)</code>"}, {"owner": {"reputation": 501, "user_id": 6052503, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/tS0UP.jpg?s=128&g=1", "display_name": "jhub1", "link": "https://stackoverflow.com/users/6052503/jhub1"}, "reply_to_user": {"reputation": 1207, "user_id": 6039095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6aaa31cdfb8b7b282648a2008cdd0a86?s=128&d=identicon&r=PG", "display_name": "dmdip", "link": "https://stackoverflow.com/users/6039095/dmdip"}, "edited": false, "score": 0, "creation_date": 1492122747, "post_id": 43380866, "comment_id": 73865964, "body": "@dmdip wow that was exactly what i was looking for. so in plane english - is that &quot;out of all columns, select UID column and then astype that column of the ORIGINAL DF.&quot; right?"}, {"owner": {"reputation": 1207, "user_id": 6039095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6aaa31cdfb8b7b282648a2008cdd0a86?s=128&d=identicon&r=PG", "display_name": "dmdip", "link": "https://stackoverflow.com/users/6039095/dmdip"}, "edited": false, "score": 0, "creation_date": 1492151152, "post_id": 43380866, "comment_id": 73872371, "body": "@jhub1 : Your statement suggests that the .loc merely changed the type of the column to int. I am not sure if pandas recognises that this is all that has to be done, or whether it creates a copy of that column (in memory), changes that copy to int, and then copies it back to replace the existing uid column."}], "owner": {"reputation": 501, "user_id": 6052503, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/tS0UP.jpg?s=128&g=1", "display_name": "jhub1", "link": "https://stackoverflow.com/users/6052503/jhub1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2991, "favorite_count": 1, "closed_date": 1492037906, "answer_count": 0, "score": 3, "last_activity_date": 1492037995, "creation_date": 1492037479, "last_edit_date": 1495540947, "question_id": 43380866, "link": "https://stackoverflow.com/questions/43380866/change-column-type-to-int-in-pandas-python-without-warning", "closed_reason": "Duplicate", "title": "Change column type to int in Pandas Python - without warning", "body": "<p>My attempt: df['uid'] = df.uid.astype(int)</p>\n\n<p>Which works...! However, Python doesn't like it:</p>\n\n<blockquote>\n  <p>A value is trying to be set on a copy of a slice from a DataFrame. Try\n  using .loc[row_indexer,col_indexer] = value instead</p>\n</blockquote>\n\n<p>My question - what's the \"best practice\" of how to do this simple code?</p>\n\n<p>Research so far:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/15891038/pandas-change-data-type-of-columns\">Pandas: change data type of columns</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/38961014/a-value-is-trying-to-be-set-on-a-copy-of-a-slice-from-a-dataframe-warning\">A value is trying to be set on a copy of a slice from a DataFrame Warning</a></p>\n\n<p>Attempts:  </p>\n\n<ol>\n<li>df[df['uid']].astype(int)</li>\n</ol>\n\n<p>...some of the links say to use iloc but I can't see how that can be used here...</p>\n"}, {"tags": ["python", "curl", "python-requests", "python-3.5", "http-proxy"], "comments": [{"owner": {"reputation": 9142, "user_id": 1442918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7490251da02084a2e2720e20029d2bff?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/1442918/max"}, "edited": false, "score": 1, "creation_date": 1492043289, "post_id": 43380862, "comment_id": 73825390, "body": "It looks like it is receiving the host header.  It looks like the Proxy connect is fine, but its failing the SSL negotiation after that for some reason."}, {"owner": {"reputation": 836, "user_id": 2971839, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ae42092534f65bffafcc85cc02e7d35b?s=128&d=identicon&r=PG&f=1", "display_name": "Keozon", "link": "https://stackoverflow.com/users/2971839/keozon"}, "reply_to_user": {"reputation": 9142, "user_id": 1442918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7490251da02084a2e2720e20029d2bff?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/1442918/max"}, "edited": false, "score": 0, "creation_date": 1492043834, "post_id": 43380862, "comment_id": 73825524, "body": "What makes you say its receiving the host header? It&#39;s not part of the CONNECT message on the wire. It is part of the CONNECT message for the curl (I didn&#39;t post the curl tcpdump here)"}, {"owner": {"reputation": 905, "user_id": 411577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3d780669bdc605a954cda738d1de743?s=128&d=identicon&r=PG", "display_name": "Adrien", "link": "https://stackoverflow.com/users/411577/adrien"}, "edited": false, "score": 0, "creation_date": 1492044108, "post_id": 43380862, "comment_id": 73825579, "body": "I think the HTTP/1.0 response to CONNECT is fine, and is not causing the problem.  It&#39;s fundamentally indicating it made the tunnel, and anything after that is being passed opaquely through the proxy anyway.  As others said, the reported error indicates a TLS handshake problem."}, {"owner": {"reputation": 9142, "user_id": 1442918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7490251da02084a2e2720e20029d2bff?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/1442918/max"}, "edited": false, "score": 0, "creation_date": 1492044119, "post_id": 43380862, "comment_id": 73825582, "body": "You&#39;re receiving a host header from the Proxy server, not sending it, it doesn&#39;t look like it&#39;s required, since all the information for CONNECT is in the URL).  At least, that&#39;s what I&#39;m interpreting the logging as: printing the host and Proxy-agent header it receives.  At that point, it has to negotiate TLS, and then send a whole new set of headers."}, {"owner": {"reputation": 836, "user_id": 2971839, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ae42092534f65bffafcc85cc02e7d35b?s=128&d=identicon&r=PG&f=1", "display_name": "Keozon", "link": "https://stackoverflow.com/users/2971839/keozon"}, "edited": false, "score": 0, "creation_date": 1492044508, "post_id": 43380862, "comment_id": 73825671, "body": "I also pursued the TLS route for a long time. Days, actually. I updated python, checked OpenSSL versions, scoured the internet for incompatibilities between openSSL and JSSE... Found nothing. I have no issues connecting to anything else, just this. I&#39;m not saying that it can&#39;t be an SSL issue.... but this is the only significant difference in the traffic between the successful Java client and the failed Python one. If you have something specific in mind, though, I&#39;d be glad to try it."}, {"owner": {"reputation": 13885, "user_id": 7811673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cc232c9c0c9748fdd3dec0d5b816fb7?s=128&d=identicon&r=PG&f=1", "display_name": "t.m.adam", "link": "https://stackoverflow.com/users/7811673/t-m-adam"}, "edited": false, "score": 0, "creation_date": 1492046344, "post_id": 43380862, "comment_id": 73826044, "body": "Have you tried handling the proxy connection with <code>socks</code> ?"}, {"owner": {"reputation": 28384, "user_id": 648265, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4d98e414a47934d66cb78bf73d0845ba?s=128&d=identicon&r=PG", "display_name": "ivan_pozdeev", "link": "https://stackoverflow.com/users/648265/ivan-pozdeev"}, "edited": false, "score": 0, "creation_date": 1492047095, "post_id": 43380862, "comment_id": 73826253, "body": "You can see the source line 646 the error is pointing to in CPython source browser: <a href=\"https://github.com/python/cpython/blob/2.7/Modules/_ssl.c#L646\" rel=\"nofollow noreferrer\">github.com/python/cpython/blob/2.7/Modules/_ssl.c#L646</a> . It&#39;s <i>&quot;The handshake operation timed out&quot;</i> (assuming you have 2.7). <code>requests</code> is doing you a disservice here by failing to provide all the error details."}, {"owner": {"reputation": 28384, "user_id": 648265, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4d98e414a47934d66cb78bf73d0845ba?s=128&d=identicon&r=PG", "display_name": "ivan_pozdeev", "link": "https://stackoverflow.com/users/648265/ivan-pozdeev"}, "edited": false, "score": 0, "creation_date": 1492047466, "post_id": 43380862, "comment_id": 73826344, "body": "Since it&#39;s you local business app installation, you should be able to get the server&#39;s private key and decipher SSL traffic e.g. with Wireshark. You should also capture the traffic both before and after the proxy to see if anything is missing."}], "answers": [{"comments": [{"owner": {"reputation": 836, "user_id": 2971839, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ae42092534f65bffafcc85cc02e7d35b?s=128&d=identicon&r=PG&f=1", "display_name": "Keozon", "link": "https://stackoverflow.com/users/2971839/keozon"}, "edited": false, "score": 0, "creation_date": 1492090912, "post_id": 43382010, "comment_id": 73848838, "body": "Thanks for the advice. I tried adding the header, there, but I still don&#39;t see it going over the wire. I&#39;m going to strip away requests and go straight to the source httplib... which will probably be more work than it&#39;s worth, but I need to get to the bottom of this."}, {"owner": {"reputation": 836, "user_id": 2971839, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ae42092534f65bffafcc85cc02e7d35b?s=128&d=identicon&r=PG&f=1", "display_name": "Keozon", "link": "https://stackoverflow.com/users/2971839/keozon"}, "edited": false, "score": 0, "creation_date": 1492092090, "post_id": 43382010, "comment_id": 73849673, "body": "Scratch that, I do see the header, but in the next packet. In curl, its in the same packet. This is going to be harder to investigate than I thought..."}, {"owner": {"reputation": 28384, "user_id": 648265, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4d98e414a47934d66cb78bf73d0845ba?s=128&d=identicon&r=PG", "display_name": "ivan_pozdeev", "link": "https://stackoverflow.com/users/648265/ivan-pozdeev"}, "reply_to_user": {"reputation": 836, "user_id": 2971839, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ae42092534f65bffafcc85cc02e7d35b?s=128&d=identicon&r=PG&f=1", "display_name": "Keozon", "link": "https://stackoverflow.com/users/2971839/keozon"}, "edited": false, "score": 0, "creation_date": 1492097577, "post_id": 43382010, "comment_id": 73853654, "body": "@Keozon It&#39;s Python, an interpreted language, for God&#39;s sake! Just step through the code in <code>pdb</code> and pinpoint the place where it goes wrong."}, {"owner": {"reputation": 836, "user_id": 2971839, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ae42092534f65bffafcc85cc02e7d35b?s=128&d=identicon&r=PG&f=1", "display_name": "Keozon", "link": "https://stackoverflow.com/users/2971839/keozon"}, "edited": false, "score": 1, "creation_date": 1492118801, "post_id": 43382010, "comment_id": 73864500, "body": "This ended up being a combination of user error, and dns configuration on the proxy server. The Python script was calling a hostname, not FQDN, which was failing to lookup on the proxy after connect. It was overlooked for a long time, since I could easily connect directly, and through a different proxy, and via HTTP. Curl just happened to be fully qualified, or it would have failed, as well. Thanks for your help! Marking as accepted, as you answered the direct question accurately, and gave some advice with where to go next."}], "tags": [], "owner": {"reputation": 28384, "user_id": 648265, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4d98e414a47934d66cb78bf73d0845ba?s=128&d=identicon&r=PG", "display_name": "ivan_pozdeev", "link": "https://stackoverflow.com/users/648265/ivan-pozdeev"}, "is_accepted": true, "score": 2, "last_activity_date": 1492057255, "last_edit_date": 1495540455, "creation_date": 1492046028, "answer_id": 43382010, "question_id": 43380862, "link": "https://stackoverflow.com/questions/43380862/requests-library-force-use-of-http-1-1-on-https-proxy-connect/43382010#43382010", "title": "Requests Library Force Use of HTTP/1.1 On HTTPS Proxy CONNECT", "body": "<p><code>httplib</code> (<a href=\"https://github.com/kennethreitz/requests/blob/master/requests/packages/urllib3/connection.py#L10\" rel=\"nofollow noreferrer\">which <code>requests</code> relies upon for HTTP(S) heavy lifting</a>) always uses <code>HTTP/1.0</code> with <code>CONNECT</code>:</p>\n\n<p><a href=\"https://github.com/python/cpython/blob/2.7/Lib/httplib.py#L788\" rel=\"nofollow noreferrer\"><code>Lib/httplib.py:788</code></a>:</p>\n\n<pre><code>def _tunnel(self):\n    self.send(\"CONNECT %s:%d HTTP/1.0\\r\\n\" % (self._tunnel_host,\n        self._tunnel_port))\n    for header, value in self._tunnel_headers.iteritems():\n        self.send(\"%s: %s\\r\\n\" % (header, value))\n    self.send(\"\\r\\n\")\n    &lt;...&gt;\n</code></pre>\n\n<p>So you can't \"force\" it to use \"HTTP/1.1\" here other than by editing the subroutine.</p>\n\n<hr>\n\n<p>This MAY be the problem if the proxy doesn't support HTTP/1.0 - in particular, 1.0 does not require a <code>Host:</code> header, and indeed, as you can see by comparing your log output with the code above, <code>httplib</code> does not send it. <a href=\"https://stackoverflow.com/questions/246859/http-1-0-vs-1-1\">While, in verity, a proxy may expect it regardless</a>. But if this is the case, you should've gotten an error from the proxy or something in response to CONNECT -- unless the proxy is so borken that it substitutes some default (or garbage) for <code>Host:</code>, returns <code>200</code> anyway and tries to connect God-knows-where, at which point you're getting timeouts.</p>\n\n<p>You can make <code>httplib</code> add the <code>Host:</code> header to CONNECT by adding it to <code>_tunnel_headers</code> (indirectly):</p>\n\n<pre><code>s=requests.Session()\nproxy_url=os.environ['HTTPS_PROXY']\ns.proxies[\"https\"]=proxy_url\n# have to specify proxy here because env variable is only detected by httplib code\n#while we need to trigger requests' proxy logic that acts earlier\n# \"https\" means any https host. Since a Session persists cookies,\n#it's meaningless to make requests to multiple hosts through it anyway.\n\npm=s.get_adapter(\"https://\").proxy_manager_for(proxy_url)\npm.proxy_headers['Host']=\"host.com\"\ndel pm,proxy_url\n&lt;...&gt;\ns.get('https://host.com')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 10300335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77328b28e9262d61667dedf4060fa728?s=128&d=identicon&r=PG", "display_name": "Raphael Sirres", "link": "https://stackoverflow.com/users/10300335/raphael-sirres"}, "is_accepted": false, "score": 1, "last_activity_date": 1535722408, "creation_date": 1535722408, "answer_id": 52116615, "question_id": 43380862, "link": "https://stackoverflow.com/questions/43380862/requests-library-force-use-of-http-1-1-on-https-proxy-connect/52116615#52116615", "title": "Requests Library Force Use of HTTP/1.1 On HTTPS Proxy CONNECT", "body": "<p>If you do not depend on the requests library you may find the following snippet useful:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>import http.client\r\n\r\nconn = http.client.HTTPSConnection(\"proxy.domain.lu\", 8080)\r\nconn.set_tunnel(\"www.domain.org\", 443, headers={'User-Agent': 'curl/7.56.0'})\r\nconn.request(\"GET\", \"/api\")\r\nresponse = conn.getresponse()\r\n\r\nprint( response.read() )</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 836, "user_id": 2971839, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ae42092534f65bffafcc85cc02e7d35b?s=128&d=identicon&r=PG&f=1", "display_name": "Keozon", "link": "https://stackoverflow.com/users/2971839/keozon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4183, "favorite_count": 0, "accepted_answer_id": 43382010, "answer_count": 2, "score": 3, "last_activity_date": 1535722408, "creation_date": 1492037455, "last_edit_date": 1492041660, "question_id": 43380862, "link": "https://stackoverflow.com/questions/43380862/requests-library-force-use-of-http-1-1-on-https-proxy-connect", "title": "Requests Library Force Use of HTTP/1.1 On HTTPS Proxy CONNECT", "body": "<p>I am having a problem with a misbehaving HTTP Proxy server. I have no control over the proxy server, unfortunately -- it's an 'enterprise' product from IBM. The proxy server is part of a service virtualization solution being leveraged for software testing.</p>\n\n<p>The fundamental issue (I think*) is that the proxy server sends back HTTP/1.0 responses. I can get it to work fine from SOAP UI ( A Java application) and curl from the command line, but Python refuses to connect. From what I can tell, Python is behaving correctly, and the other two are not, as the server expects HTTP/1.1 responses (it wants Host headers, at the very least, to route the service request to a given stub).</p>\n\n<p>Is there a way to get Requests, or the underlying urllib3, or the even farther down http lib to always use http1.1, even if the other end appears to be using 1.0? </p>\n\n<p>Here is a sample program (unfortunately, it requires you to have an IBM Ration Integration Tester installation with RTCP to really replicate) to reproduce the problem:</p>\n\n<pre><code>import http.client as http_client\nhttp_client.HTTPConnection.debuglevel = 1\nimport logging\nimport requests\nlogging.basicConfig()\nlogging.getLogger().setLevel(logging.DEBUG)\nrequests_log = logging.getLogger(\"requests.packages.urllib3\")\nrequests_log.setLevel(logging.DEBUG)\nrequests_log.propagate = True\n\nrequests.post(\"https://host:8443/axl\", \n            headers={\"soapAction\": '\"CUCM:DB ver=9.1 updateSipTrunk\"'}, \n            data='&lt;soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:tns=\"http://www.cisco.com/AXL/API/9.1\"&gt;&lt;soapenv:Header/&gt;&lt;soapenv:Body&gt;&lt;tns:updateSipTrunk&gt;&lt;name&gt;PLACEHOLDER&lt;/name&gt;&lt;newName&gt;PLACEHOLDER&lt;/newName&gt;&lt;destinations&gt;&lt;destination&gt;&lt;addressIpv4&gt;10.10.1.5&lt;/addressIpv4&gt;&lt;sortOrder&gt;1&lt;/sortOrder&gt;&lt;/destination&gt;&lt;/destinations&gt;&lt;/tns:updateSipTrunk&gt;&lt;/soapenv:Body&gt;&lt;/soapenv:Envelope&gt;', \n            verify=False)\n</code></pre>\n\n<p>(Proxy is configured via HTTPS_PROXY environment variable)</p>\n\n<p>Debug output before the error, note the HTTP/1.0:</p>\n\n<pre><code>INFO:requests.packages.urllib3.connectionpool:Starting new HTTPS connection (1): host.com\nsend: b'CONNECT host.com:8443 HTTP/1.0\\r\\n'\nsend: b'\\r\\n'\nheader: Host: host.com:8443\n\nheader: Proxy-agent: Green Hat HTTPS Proxy/1.0\n</code></pre>\n\n<p>The exact error text that occurs in RHEL 6 is:</p>\n\n<pre><code>requests.exceptions.SSLError: [SSL: SSLV3_ALERT_HANDSHAKE_FAILURE] sslv3 alert handshake failure (_ssl.c:646)\n</code></pre>\n\n<p>Even though the Host header is shown here, it does NOT show up on the wire. I confirmed this with a tcpdump:</p>\n\n<pre><code>14:03:14.315049 IP sourcehost.53214 &gt; desthost.com: Flags [P.], seq 0:32, ack 1, win 115, options [nop,nop,TS val 2743933964 ecr 4116114841], length 32\n        0x0000:  0000 0c07 ac00 0050 56b5 4044 0800 4500  .......PV.@D..E.\n        0x0010:  0054 3404 4000 4006 2ca0 0af8 3f15 0afb  .T4.@.@.,...?...\n        0x0020:  84f8 cfde 0c7f a4f8 280a 4ebd b425 8018  ........(.N..%..\n        0x0030:  0073 da46 0000 0101 080a a38d 1c0c f556  .s.F...........V\n        0x0040:  XXXX XXXX XXXX XXXX XXXX XXXX XXXX XXXX  ..CONNECT.host\n        0x0050:  XXXX XXXX XXXX XXXX XXXX XXXX XXXX XXXX  xx:8443.HTTP/1.0\n        0x0060:  0d0a                          \n</code></pre>\n\n<p>When I curl it with verbose, this is what the output looks like:</p>\n\n<pre><code>* About to connect() to proxy proxy-host.com port 3199 (#0)\n*   Trying 10.**.**.** ... connected\n* Connected to proxy-host.com (10.**.**.**) port 3199 (#0)\n* Establish HTTP proxy tunnel to host.com:8443\n&gt; CONNECT host.com:8443 HTTP/1.1\n&gt; Host: host.com:8443\n&gt; User-Agent: curl/7.19.7 (x86_64-redhat-linux-gnu) libcurl/7.19.7 NSS/3.19.1 Basic ECC zlib/1.2.3 libidn/1.18 libssh2/1.4.2\n&gt; Proxy-Connection: Keep-Alive\n&gt; soapAction: \"CUCM:DB ver=9.1 updateSipTrunk\"\n&gt;\n&lt; HTTP/1.0 200 OK\n&lt; Host: host.com:8443\n&lt; Proxy-agent: Green Hat HTTPS Proxy/1.0\n&lt;\n* Proxy replied OK to CONNECT request\n* Initializing NSS with certpath: sql:/etc/pki/nssdb\n*   CAfile: /path/to/store/ca-bundle.crt\n  CApath: none\n* SSL connection using TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256\n</code></pre>\n\n<p>Truncated after this point. You can see the HTTP/1.0 response from the proxy after connecting. The curl's tcpdump also clearly shows the host header, as well as HTTP 1.1. </p>\n\n<p>*I can't be entirely sure this is the fundamental issue, as I can't test it. I do see HTTP/1.0 responses, and can tell that my non-working Python code sends CONNECT HTTP/1.0 messages, while the working Java sends HTTP/1.1 messages, as does Curl. It's possible the problem is unrelated (although I find that unlikely) or that Python is misbehaving, and not Java/curl. I simply don't know enough to know for sure. </p>\n\n<p>So, is there a way to force urllib3/requests to use HTTP v1.1 at all times? </p>\n"}, {"tags": ["python", "multithreading", "sqlite", "permissions", "sqlalchemy"], "answers": [{"comments": [{"owner": {"reputation": 19577, "user_id": 254346, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/ebd1c4256c1ece3469d2ccf3031cb6c5?s=128&d=identicon&r=PG", "display_name": "coleifer", "link": "https://stackoverflow.com/users/254346/coleifer"}, "edited": false, "score": 0, "creation_date": 1492130873, "post_id": 43383159, "comment_id": 73868000, "body": "Regarding the downvote, I understand if you&#39;re not interested in using Peewee -- the blog post goes into detail about the intricacies of locking and transaction management with SQLite, though, and applies regardless of what ORM you&#39;re using (or not using)."}, {"owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 2, "creation_date": 1492238524, "post_id": 43383159, "comment_id": 73904743, "body": "The downvoter here, I apologize for not leaving a comment before, something came up that required attention. As to why, I&#39;ve nothing against Peewee. The reason was that this is pretty much a <a href=\"https://meta.stackexchange.com/questions/8231/are-answers-that-just-contain-links-elsewhere-really-good-answers\">link only answer</a>. I understand that you might be uninterested in quoting yourself here, but it&#39;d serve this site better, if users did not need to follow the links in order to get the basics. The answer itself should, well, answer and hold links to further reading. Also, link rot is a thing."}, {"owner": {"reputation": 19577, "user_id": 254346, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/ebd1c4256c1ece3469d2ccf3031cb6c5?s=128&d=identicon&r=PG", "display_name": "coleifer", "link": "https://stackoverflow.com/users/254346/coleifer"}, "reply_to_user": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 0, "creation_date": 1492389262, "post_id": 43383159, "comment_id": 73943949, "body": "Thanks for clarifying -- I appreciate the constructive feedback (and the downvote seems fair). Thanks again!"}], "tags": [], "owner": {"reputation": 19577, "user_id": 254346, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/ebd1c4256c1ece3469d2ccf3031cb6c5?s=128&d=identicon&r=PG", "display_name": "coleifer", "link": "https://stackoverflow.com/users/254346/coleifer"}, "is_accepted": false, "score": -1, "last_activity_date": 1492054889, "creation_date": 1492054889, "answer_id": 43383159, "question_id": 43380853, "link": "https://stackoverflow.com/questions/43380853/sqlalchemy-query-without-writing-locking-the-database/43383159#43383159", "title": "SQLAlchemy - query without writing/locking the database", "body": "<p>I've written a blog post on the subject which provides some more explanation of the issue and some ways to work around it: <a href=\"http://charlesleifer.com/blog/multi-threaded-sqlite-without-the-operationalerrors/\" rel=\"nofollow noreferrer\">http://charlesleifer.com/blog/multi-threaded-sqlite-without-the-operationalerrors/</a></p>\n\n<p>Peewee ORM has an extension that is designed to support multiple threads writing to a SQLite database. <a href=\"http://docs.peewee-orm.com/en/latest/peewee/playhouse.html#sqliteq\" rel=\"nofollow noreferrer\">http://docs.peewee-orm.com/en/latest/peewee/playhouse.html#sqliteq</a></p>\n"}], "owner": {"reputation": 12637, "user_id": 1893275, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/i7osd.jpg?s=128&g=1", "display_name": "TheChymera", "link": "https://stackoverflow.com/users/1893275/thechymera"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1378, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1492054889, "creation_date": 1492037348, "last_edit_date": 1492037772, "question_id": 43380853, "link": "https://stackoverflow.com/questions/43380853/sqlalchemy-query-without-writing-locking-the-database", "title": "SQLAlchemy - query without writing/locking the database", "body": "<p>I have a multithreaded data analysis pipeline, which queries a database (via SQLAlchemy). Additionally, the database is synchronized across multiple systems by syncthing - long story short, this means that write permission cannot always be guaranteed.</p>\n\n<p>Even when I am able to guarantee write access, I still occasionally and rather randomly get operational errors:</p>\n\n<pre><code>OperationalError: (sqlite3.OperationalError) database is locked\n</code></pre>\n\n<p>The code I use to load the session for the query is the following:</p>\n\n<pre><code>def loadSession(db_path):\n    db_path = \"sqlite:///\" + path.expanduser(db_path)\n    engine = create_engine(db_path, echo=False)\n    Session = sessionmaker(bind=engine)\n    session = Session()\n    Base.metadata.create_all(engine)\n    return session, engine\n</code></pre>\n\n<p>And can be seen in its full context <a href=\"https://github.com/TheChymera/LabbookDB/blob/master/labbookdb/db/query.py#L171\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>My query (and the way I turn it into a value) look like this:</p>\n\n<pre><code>    session, engine = loadSession(db_path)\n    sql_query=session.query(LaserStimulationProtocol).filter(LaserStimulationProtocol.code==stim_protocol_dictionary[scan_type])\n    mystring = sql_query.statement\n    mydf = pd.read_sql_query(mystring,engine)\n    delay = int(mydf[\"stimulation_onset\"][0])\n</code></pre>\n\n<p>And again, the full context can be found <a href=\"https://github.com/IBT-FMI/SAMRI/blob/master/samri/pipelines/extra_functions.py#L171\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>How could I change my code so the database can be queried without having to rely on the file being writeable/unlocked? I have checked the file's checksum, and it does not change upon query, so clearly I'm not writing anything to it. As such, I guess there should be some way to extract the info I am looking for without write access?</p>\n"}, {"tags": ["python", "arrays", "ruby", "compare", "multiplication"], "comments": [{"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 1, "creation_date": 1492037888, "post_id": 43380843, "comment_id": 73823948, "body": "What does <code>(a1-a2).empty?</code> mean?"}, {"owner": {"reputation": 670, "user_id": 3672977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7eede4ef5afe2d79fb1aaedc02859f6e?s=128&d=identicon&r=PG", "display_name": "thesonyman101", "link": "https://stackoverflow.com/users/3672977/thesonyman101"}, "edited": false, "score": 0, "creation_date": 1492038269, "post_id": 43380843, "comment_id": 73824057, "body": "What&#39;s in the arrays? numbers, strings etc?"}, {"owner": {"reputation": 39529, "user_id": 2063361, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jB77z.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/2063361/anonymous"}, "edited": false, "score": 0, "creation_date": 1492038632, "post_id": 43380843, "comment_id": 73824144, "body": "are <code>a1</code>, <code>a2</code> the name of the variables?"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1492039467, "post_id": 43380843, "comment_id": 73824384, "body": "What is the source of the &quot;labeled&quot; arrays? Would make more sense to store them in a single container, like a list, then you wouldn&#39;t have to deal with so many of them and they could be iterated over without have to specify each name (in either language)."}, {"owner": {"reputation": 9, "user_id": 4451055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S0hSU.jpg?s=128&g=1", "display_name": "Food Warrior", "link": "https://stackoverflow.com/users/4451055/food-warrior"}, "edited": false, "score": 0, "creation_date": 1492039950, "post_id": 43380843, "comment_id": 73824532, "body": "a1, a2 is the name for the array."}, {"owner": {"reputation": 1843, "user_id": 4067720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52c645614505bcaeb65a6c5199158c1?s=128&d=identicon&r=PG", "display_name": "Glyoko", "link": "https://stackoverflow.com/users/4067720/glyoko"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 1, "creation_date": 1492040222, "post_id": 43380843, "comment_id": 73824611, "body": "What @martineau&#39;s asking is how you&#39;re getting the data into your interpreter to begin with. Do you have a script where you&#39;re manually setting <code>a1 = [...]</code>, <code>a2=[...]</code>, and so on? <i>How</i> is the data being loaded?"}, {"owner": {"reputation": 9, "user_id": 4451055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S0hSU.jpg?s=128&g=1", "display_name": "Food Warrior", "link": "https://stackoverflow.com/users/4451055/food-warrior"}, "edited": false, "score": 0, "creation_date": 1492041537, "post_id": 43380843, "comment_id": 73824962, "body": "The data is already set. I was given the data in a spread sheet."}, {"owner": {"reputation": 1843, "user_id": 4067720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52c645614505bcaeb65a6c5199158c1?s=128&d=identicon&r=PG", "display_name": "Glyoko", "link": "https://stackoverflow.com/users/4067720/glyoko"}, "edited": false, "score": 0, "creation_date": 1492041893, "post_id": 43380843, "comment_id": 73825061, "body": "Sure, but then how are you loading that spreadsheet into the interpreter? Are you using the <a href=\"http://ruby-doc.org/stdlib-2.0.0/libdoc/csv/rdoc/CSV.html\" rel=\"nofollow noreferrer\">Ruby CSV</a> lib? Are you just copy-pasting it? Can you share the code where you load the data from the spreadsheet?"}, {"owner": {"reputation": 9, "user_id": 4451055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S0hSU.jpg?s=128&g=1", "display_name": "Food Warrior", "link": "https://stackoverflow.com/users/4451055/food-warrior"}, "edited": false, "score": 0, "creation_date": 1492042124, "post_id": 43380843, "comment_id": 73825110, "body": "I just copy and pasted into sublime from excel. Glyoko thanks for the help."}, {"owner": {"reputation": 1843, "user_id": 4067720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52c645614505bcaeb65a6c5199158c1?s=128&d=identicon&r=PG", "display_name": "Glyoko", "link": "https://stackoverflow.com/users/4067720/glyoko"}, "edited": false, "score": 0, "creation_date": 1492043111, "post_id": 43380843, "comment_id": 73825347, "body": "Check out the <a href=\"http://ruby-doc.org/stdlib-2.0.0/libdoc/csv/rdoc/CSV.html#class-CSV-label-All+at+Once\" rel=\"nofollow noreferrer\">csv</a> lib. You can use it to programmatically read your data in. That way you won&#39;t have to deal with a million variables. Regarding my below answer, <code>all_arrays = [a1, a2, a3, ... a39208]</code> just becomes <code>all_arrays = CSV.read(&quot;path&#47;to&#47;your&#47;file.csv&quot;)</code>. Excel should have an option to export an .xls file to a .csv file somewhere."}, {"owner": {"reputation": 1464, "user_id": 5712410, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2be8636271ba5bf194537f8119d752b1?s=128&d=identicon&r=PG&f=1", "display_name": "Marko Avlija\u0161", "link": "https://stackoverflow.com/users/5712410/marko-avlija%c5%a1"}, "edited": false, "score": 0, "creation_date": 1492073699, "post_id": 43380843, "comment_id": 73836632, "body": "Copy pasting from excel just sucks. Don&#39;t do that, read CSV file programmatically like Glyoko suggests."}], "answers": [{"tags": [], "owner": {"reputation": 1843, "user_id": 4067720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52c645614505bcaeb65a6c5199158c1?s=128&d=identicon&r=PG", "display_name": "Glyoko", "link": "https://stackoverflow.com/users/4067720/glyoko"}, "is_accepted": false, "score": 6, "last_activity_date": 1492039885, "last_edit_date": 1492039885, "creation_date": 1492038720, "answer_id": 43381059, "question_id": 43380843, "link": "https://stackoverflow.com/questions/43380843/comparing-multiple-arrays-against-multiple-arrays-in-ruby-or-python/43381059#43381059", "title": "Comparing multiple arrays against multiple arrays (in ruby or python)", "body": "<p>So first off, the bigger problem here is that you're dealing with 39208 variables. There is almost certainly a better way to work with your data without needing to deal with that many variables. I don't know how you're getting this data into your code, but you should start by putting all these variables into a single array so you don't have to deal with so many variables, e.g.</p>\n\n<pre><code>all_arrays = [a1, a2, a3, ... a39208]\n</code></pre>\n\n<p>After that, you can use <a href=\"https://ruby-doc.org/core-2.2.0/Array.html#method-i-combination\" rel=\"noreferrer\">Array#combination</a> to iterate over all pairs in <code>all_arrays</code>:</p>\n\n<pre><code>all_arrays.combination(2).map do |arr1, arr2|\n  (arr1 - arr2).empty?\nend\n</code></pre>\n\n<p><code>all_arrays.combination(2)</code> will give you <em>all pairs</em> of elements in <code>all_arrays</code>.</p>\n\n<hr>\n\n<p>Looking at it again, it should be pointed out that you may also want to compare these elements in reverse. For some arrays, <code>(a1 - a2).empty?</code> might be true, but <code>(a2 - a1).empty?</code> might be false. e.g.</p>\n\n<pre><code>a1 = [1,2,3]\na2 = [1,2,3,4]\n\n(a1 - a2).empty?\n# =&gt; ([1,2,3] - [1,2,3,4]).empty?\n# =&gt; ([]).empty?\n# =&gt; true\n\n(a2 - a1).empty?\n# =&gt; ([1,2,3,4] - [1,2,3]).empty?\n# =&gt; ([4]).empty?\n# =&gt; false\n</code></pre>\n\n<p>If this matters for your use case, just use <a href=\"https://ruby-doc.org/core-2.2.0/Array.html#method-i-permutation\" rel=\"noreferrer\">Array#permutation</a> instead:</p>\n\n<pre><code>all_arrays.permutation(2).map do |arr1, arr2| ...\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 4451055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S0hSU.jpg?s=128&g=1", "display_name": "Food Warrior", "link": "https://stackoverflow.com/users/4451055/food-warrior"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 393, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1492039885, "creation_date": 1492037280, "last_edit_date": 1492039831, "question_id": 43380843, "link": "https://stackoverflow.com/questions/43380843/comparing-multiple-arrays-against-multiple-arrays-in-ruby-or-python", "title": "Comparing multiple arrays against multiple arrays (in ruby or python)", "body": "<p>I have 39208 arrays. Labelled <code>a1, a2, a3, a4,... a39208</code>.\nI want to be able to compare each array against all the other arrays.</p>\n\n<pre><code>(a1-a2).empty?; (a1-a3).empty?; (a2-a3).empty?;... (a4-a39208).empty?\n</code></pre>\n\n<p>I'm not sure how to code an array name change in my code. For example if I had a loop:</p>\n\n<pre><code>  b = 0\n     loop do\n       b +=1\n       m = [\"a1\" + b.to_s]\n       w = m\n       k = (m - a1).empty?\n     puts k\n   if b == 39208\n  break\n  end\n end\n</code></pre>\n\n<p>NOT ACTUAL CODE: Just trying to convey an idea. Where <code>m</code> should change to <code>a2, a3, a4, a5</code> As the loop goes along. I know it would just append a # on the end and I would end up with <code>a11, a12, a13</code></p>\n\n<p>So with out having to write <code>(a1-a2).empty?; (a1-a3).empty?; (a2-a3).empty?;... (a4-a39208).empty?</code> until the end of time. How do I have it that the code <code>(a1-a2).empty?</code> changes into <code>-a3, -a4, -a5,... -a390208</code>. => <code>(a1-a39028).empty?</code></p>\n\n<p>What I'm trying to do is input another array into the code changing which array is facing off against the other.</p>\n\n<p>Perhaps there are any other ways of going about this. I can change the arrays into lists, or strings.</p>\n\n<p>EDIT: \nEach array contains 30 numbers, there are 39208 arrays. I'm looking to find the all the arrays that are the same and list each duplicate array.</p>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1492038416, "post_id": 43380840, "comment_id": 73824103, "body": "What about zero? Zero and zero have the same sign but you don&#39;t recognize it."}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1492038746, "post_id": 43380840, "comment_id": 73824177, "body": "Don&#39;t forget that floats have a signed zero."}, {"owner": {"reputation": 2563, "user_id": 4695774, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/bdc15d346c2f5b951bc99e0150c1a49d?s=128&d=identicon&r=PG&f=1", "display_name": "Siraj S.", "link": "https://stackoverflow.com/users/4695774/siraj-s"}, "edited": false, "score": 0, "creation_date": 1492038952, "post_id": 43380840, "comment_id": 73824242, "body": "Yup! from the answers here i realize that i have to be careful using zero. Anyways, my current solution was not effective, hence the question. Thanks, SO is amazing."}], "answers": [{"comments": [{"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1492037956, "post_id": 43380854, "comment_id": 73823970, "body": "<code>a*b &gt;= 0</code> fails for example for <code>a, b = np.array([0]), np.array([-1])</code>."}, {"owner": {"reputation": 41121, "user_id": 2956066, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/Bqbcr.png?s=128&g=1", "display_name": "kmario23", "link": "https://stackoverflow.com/users/2956066/kmario23"}, "edited": false, "score": 0, "creation_date": 1492038291, "post_id": 43380854, "comment_id": 73824067, "body": "I was arriving at a similar contradicting case as well. A mathematician would never claim that <code>0</code> is positive. Nevertheless, I think that <code>a*b&gt;0</code> condition is perfectly fine"}], "tags": [], "owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "is_accepted": true, "score": 11, "last_activity_date": 1492038807, "last_edit_date": 1492038807, "creation_date": 1492037358, "answer_id": 43380854, "question_id": 43380840, "link": "https://stackoverflow.com/questions/43380840/check-if-two-numeric-values-have-same-sign-in-numpy/43380854#43380854", "title": "check if two numeric values have same sign in numpy (+/-)", "body": "<p>One approach with elementwise product and then check for <code>&gt;=0</code>, as same signs (both positive or both negative) would result in positive product values -</p>\n\n<pre><code>((a== b) &amp; (a==0)) | (a*b&gt;0)\n</code></pre>\n\n<p>Another with explicit sign check -</p>\n\n<pre><code>np.sign(a) == np.sign(b)\n</code></pre>\n\n<p>Runtime test -</p>\n\n<pre><code>In [155]: a = np.random.randint(-10,10,(1000000))\n\nIn [156]: b = np.random.randint(-10,10,(1000000))\n\nIn [157]: np.allclose(np.sign(a) == np.sign(b), ((a== b) &amp; (a==0)) | (a*b&gt;0))\nOut[157]: True\n\nIn [158]: %timeit np.sign(a) == np.sign(b)\n100 loops, best of 3: 3.06 ms per loop\n\nIn [159]: %timeit ((a== b) &amp; (a==0)) | (a*b&gt;0)\n100 loops, best of 3: 3.54 ms per loop\n\n# @salehinejad's soln\nIn [160]: %timeit np.where((np.sign(a)+np.sign(b))==0)\n100 loops, best of 3: 8.71 ms per loop\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1492038200, "post_id": 43380964, "comment_id": 73824034, "body": "Huh, I&#39;m pretty sure that only tells you if the signs are <i>opposite and equal</i>, no?"}, {"owner": {"reputation": 5004, "user_id": 4538031, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/a2a7704cd4fba3d385baf52d502bfb7c?s=128&d=identicon&r=PG&f=1", "display_name": "salehinejad", "link": "https://stackoverflow.com/users/4538031/salehinejad"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1492038330, "post_id": 43380964, "comment_id": 73824080, "body": "np.sign() return -1 or +1. So it ignores the values."}], "tags": [], "owner": {"reputation": 5004, "user_id": 4538031, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/a2a7704cd4fba3d385baf52d502bfb7c?s=128&d=identicon&r=PG&f=1", "display_name": "salehinejad", "link": "https://stackoverflow.com/users/4538031/salehinejad"}, "is_accepted": false, "score": 1, "last_activity_date": 1492038582, "last_edit_date": 1492038582, "creation_date": 1492038055, "answer_id": 43380964, "question_id": 43380840, "link": "https://stackoverflow.com/questions/43380840/check-if-two-numeric-values-have-same-sign-in-numpy/43380964#43380964", "title": "check if two numeric values have same sign in numpy (+/-)", "body": "<p>Addition is cheaper than multiplication. For non-equal signs:</p>\n\n<pre><code>np.where((np.sign(a)+np.sign(b))!=0)\n</code></pre>\n\n<p>For equal signs:</p>\n\n<pre><code>np.where((np.sign(a)+np.sign(b))==0)\n</code></pre>\n\n<p>This approach returns the indices; Not just True/False etc.</p>\n\n<p>Output for the given a and b in question:</p>\n\n<p>[0 1 2 3 5]</p>\n\n<p>May try np.sum() for more than two variables.</p>\n"}, {"comments": [{"owner": {"reputation": 2563, "user_id": 4695774, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/bdc15d346c2f5b951bc99e0150c1a49d?s=128&d=identicon&r=PG&f=1", "display_name": "Siraj S.", "link": "https://stackoverflow.com/users/4695774/siraj-s"}, "edited": false, "score": 0, "creation_date": 1492047807, "post_id": 43381014, "comment_id": 73826425, "body": "up vote for np.equal based solution, it is most intuitive with only one step solution (compared to addition,multiplication, etc elsewhere). But @Divakar was first to highlight it, so will accept his solution."}], "tags": [], "owner": {"reputation": 2615, "user_id": 3680588, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/ed17467e31fcc8f8a297ece99b00046b?s=128&d=identicon&r=PG&f=1", "display_name": "litepresence", "link": "https://stackoverflow.com/users/3680588/litepresence"}, "is_accepted": false, "score": 1, "last_activity_date": 1492042065, "last_edit_date": 1492042065, "creation_date": 1492038434, "answer_id": 43381014, "question_id": 43380840, "link": "https://stackoverflow.com/questions/43380840/check-if-two-numeric-values-have-same-sign-in-numpy/43381014#43381014", "title": "check if two numeric values have same sign in numpy (+/-)", "body": "<pre><code>import numpy as np\na = np.random.randn(5)\nb = np.random.randn(5)\n\nprint a\nprint b\n\n# Method 1\nprint np.logical_not(np.sign(a*b)-1)\n\n# Method 2 ***probably best\nprint np.equal(np.sign(a), np.sign(b))\n\n# Method 3\nprint np.where((a*b&lt;0),np.zeros(5,dtype=bool),np.ones(5,dtype=bool))\n\n# Method 4\nprint np.core.defchararray.startswith(np.array(-a*b).astype('str'),'-')\n\n&gt;&gt;&gt;\n[-0.77184408 -0.55291345 -0.45774947  0.67080435 -0.286555  ]\n[ 0.37220055  0.29489477 -1.05773195  1.03833121  1.01538001]\n[False False True True False]\n[False False True True False]\n[False False True True False]\n[False False True True False]\n</code></pre>\n\n<p>Method 1</p>\n\n<ul>\n<li>a*b produces array of values, negative when signs are different</li>\n<li>np.sign() converts array to -1 and 1</li>\n<li>subtracting 1 converts array to -2 and 0</li>\n<li>np.logical_not() converts -2 to False; and 0 to True</li>\n</ul>\n\n<p>Method 2</p>\n\n<ul>\n<li>np.sign() converts to -1, 1</li>\n<li>np.equal() compares two arrays and gives truth value if equal element wise</li>\n</ul>\n\n<p>Method 3</p>\n\n<ul>\n<li>np.where(condition[, x, y])Return elements, either from x or y, depending on condition.</li>\n<li>np.zeros(5,dtype=bool),np.ones(5,dtype=bool) are arrays of False and True respectively</li>\n</ul>\n\n<p>Method 4</p>\n\n<ul>\n<li>multiply -a*b</li>\n<li>convert resultant array to dtype string</li>\n<li>check which elements start with a -</li>\n</ul>\n\n<p>reference:</p>\n\n<p><a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.sign.html\" rel=\"nofollow noreferrer\">https://docs.scipy.org/doc/numpy/reference/generated/numpy.sign.html</a></p>\n\n<p><a href=\"https://docs.scipy.org/doc/numpy/reference/routines.logic.html\" rel=\"nofollow noreferrer\">https://docs.scipy.org/doc/numpy/reference/routines.logic.html</a></p>\n\n<p><a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.where.html\" rel=\"nofollow noreferrer\">https://docs.scipy.org/doc/numpy/reference/generated/numpy.where.html</a></p>\n\n<p><a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.core.defchararray.startswith.html#numpy.core.defchararray.startswith\" rel=\"nofollow noreferrer\">https://docs.scipy.org/doc/numpy/reference/generated/numpy.core.defchararray.startswith.html#numpy.core.defchararray.startswith</a></p>\n"}, {"tags": [], "owner": {"reputation": 2668, "user_id": 313087, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bd59c4d61d3ee58301a98cc85362d82d?s=128&d=identicon&r=PG", "display_name": "Usagi", "link": "https://stackoverflow.com/users/313087/usagi"}, "is_accepted": false, "score": 4, "last_activity_date": 1492039215, "creation_date": 1492039215, "answer_id": 43381138, "question_id": 43380840, "link": "https://stackoverflow.com/questions/43380840/check-if-two-numeric-values-have-same-sign-in-numpy/43381138#43381138", "title": "check if two numeric values have same sign in numpy (+/-)", "body": "<p>In vanilla Python you could do something like:</p>\n\n<pre><code>abs(a + b) == abs(a) + abs(b)\n</code></pre>\n\n<p>That will return true if the signs are equal.</p>\n"}, {"tags": [], "owner": {"reputation": 1342, "user_id": 89561, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b4b9199d5fab9325f87c8cdf8c0dbee0?s=128&d=identicon&r=PG", "display_name": "Bill Yang", "link": "https://stackoverflow.com/users/89561/bill-yang"}, "is_accepted": false, "score": 0, "last_activity_date": 1610856524, "creation_date": 1610856524, "answer_id": 65757239, "question_id": 43380840, "link": "https://stackoverflow.com/questions/43380840/check-if-two-numeric-values-have-same-sign-in-numpy/65757239#65757239", "title": "check if two numeric values have same sign in numpy (+/-)", "body": "<p>You can rely on bitwise operator XOR</p>\n<p><code>x ^ y</code></p>\n<p>the XOR operation is applied to the sign as well, so when they're the same the result is greater than 0 and if not it's less than 0</p>\n"}], "owner": {"reputation": 2563, "user_id": 4695774, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/bdc15d346c2f5b951bc99e0150c1a49d?s=128&d=identicon&r=PG&f=1", "display_name": "Siraj S.", "link": "https://stackoverflow.com/users/4695774/siraj-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12322, "favorite_count": 0, "accepted_answer_id": 43380854, "answer_count": 5, "score": 2, "last_activity_date": 1610856524, "creation_date": 1492037275, "last_edit_date": 1492037395, "question_id": 43380840, "link": "https://stackoverflow.com/questions/43380840/check-if-two-numeric-values-have-same-sign-in-numpy", "title": "check if two numeric values have same sign in numpy (+/-)", "body": "<p>currently i am using numpy.logical_or with numpy.logical_and to check if elements of two arrays have same sign. Was wondering if there is already a ufunc  or a more effective method that will achieve this. My current solutions is here</p>\n\n<pre><code>a = np.array([1,-2,5,7,-11,9])\nb = np.array([3,-8,4,81,5,16])\nout = np.logical_or(\n                    np.logical_and((a &lt; 0),(b &lt; 0)), \n                    np.logical_and((a &gt; 0),(b &gt; 0))\n                                             )\n</code></pre>\n\n<p>edit//\noutput</p>\n\n<pre><code>out\nOut[51]: array([ True,  True,  True,  True, False,  True], dtype=bool)\n</code></pre>\n"}, {"tags": ["python", "cntk"], "answers": [{"comments": [{"owner": {"reputation": 738, "user_id": 3663706, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c0da6c879753bc025b968695108eaef3?s=128&d=identicon&r=PG&f=1", "display_name": "Frank Ibem", "link": "https://stackoverflow.com/users/3663706/frank-ibem"}, "edited": false, "score": 0, "creation_date": 1492532137, "post_id": 43462103, "comment_id": 74009951, "body": "Thanks! My frustration must have clouded my vision."}], "tags": [], "owner": {"reputation": 2020, "user_id": 5465700, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-9khklU26qmw/AAAAAAAAAAI/AAAAAAAAFGQ/OeGnQPbPURw/photo.jpg?sz=128", "display_name": "Nikos Karampatziakis", "link": "https://stackoverflow.com/users/5465700/nikos-karampatziakis"}, "is_accepted": true, "score": 2, "last_activity_date": 1492478888, "creation_date": 1492478888, "answer_id": 43462103, "question_id": 43380819, "link": "https://stackoverflow.com/questions/43380819/what-is-the-equivalent-of-the-following-tensorflow-snippet-in-cntk/43462103#43462103", "title": "What is the equivalent of the following tensorflow snippet in CNTK", "body": "<p>The reason is that you have define <code>state_in</code> as <code>cntk.input</code> and <code>action_in</code> as <code>cntk.input_variable</code> which by default have slightly different types: <code>cntk.input</code> by default creates a variable that cannot be bound to sequence data, while <code>cntk.input_variable</code> by default creates a variable that must be bound to sequence data (N.B. <code>input_variable</code> is deprecated and some IDEs like PyCharm will show this with a strikethrough, please use cntk.input() or cntk.sequence.input()). </p>\n\n<p>The error says that the plus operation cannot add <code>cntk.times(l1, W2)</code> which has dynamic axes [#] (meaning the minibatch dimension) with <code>cntk.times(action_in, W2a)</code> which has dynamic axes [#, *] (meaning the minibatch and sequence dimension).</p>\n\n<p>The simplest fix is to declare\n<code>\naction_in = cntk.input(action_dim, dtype=np.float32)\n</code>\nwhich makes the rest of the operations typecheck. </p>\n"}], "owner": {"reputation": 738, "user_id": 3663706, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c0da6c879753bc025b968695108eaef3?s=128&d=identicon&r=PG&f=1", "display_name": "Frank Ibem", "link": "https://stackoverflow.com/users/3663706/frank-ibem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 191, "favorite_count": 0, "accepted_answer_id": 43462103, "answer_count": 1, "score": 1, "last_activity_date": 1492478888, "creation_date": 1492037113, "question_id": 43380819, "link": "https://stackoverflow.com/questions/43380819/what-is-the-equivalent-of-the-following-tensorflow-snippet-in-cntk", "title": "What is the equivalent of the following tensorflow snippet in CNTK", "body": "<p>I'm trying to implement <a href=\"https://arxiv.org/abs/1509.02971\" rel=\"nofollow noreferrer\">DDPG</a> in CNTK and came across the following code (using Tensorflow) to create the critic network:</p>\n\n<pre><code>state_input = tf.placeholder(\"float\",[None,state_dim])\naction_input = tf.placeholder(\"float\",[None,action_dim])\n\nW1 = self.variable([state_dim,layer1_size],state_dim)\nb1 = self.variable([layer1_size],state_dim)\nW2 = self.variable([layer1_size,layer2_size],layer1_size+action_dim)\nW2_action = self.variable([action_dim,layer2_size],layer1_size+action_dim)\nb2 = self.variable([layer2_size],layer1_size+action_dim)\nW3 = tf.Variable(tf.random_uniform([layer2_size,1],-3e-3,3e-3))\nb3 = tf.Variable(tf.random_uniform([1],-3e-3,3e-3))\n\nlayer1 = tf.nn.relu(tf.matmul(state_input,W1) + b1)\nlayer2 = tf.nn.relu(tf.matmul(layer1,W2) + tf.matmul(action_input,W2_action) + b2)\nq_value_output = tf.identity(tf.matmul(layer2,W3) + b3)\n</code></pre>\n\n<p>where self.variable is defined as:</p>\n\n<pre><code>def variable(self,shape,f):\n    return tf.Variable(tf.random_uniform(shape,-1/math.sqrt(f),1/math.sqrt(f)))\n</code></pre>\n\n<p>Ignoring the random initialization (I just want the structure) , I tried the following:</p>\n\n<pre><code>state_in = cntk.input(state_dim, dtype=np.float32)\naction_in = cntk.input_variable(action_dim, dtype=np.float32)\n\nW1 = cntk.parameter(shape=(state_dim, layer1_size))\nb1 = cntk.parameter(shape=(layer1_size))\nW2 = cntk.parameter(shape=(layer1_size, layer2_size))\nW2a = cntk.parameter(shape=(action_dim, layer2_size))\nb2 = cntk.parameter(shape=(layer2_size))\nW3 = cntk.parameter(shape=(layer2_size, 1))\nb3 = cntk.parameter(shape=(1))\n\nl1 = cntk.relu(cntk.times(state_in, W1) + b1)\nl2 = cntk.relu(cntk.times(l1, W2) + cntk.times(action_in, W2a) + b2)\nQ = cntk.times(l2, W3) + b3\n</code></pre>\n\n<p>But, the initialization of layer2 failed with the following error (snippet):</p>\n\n<blockquote>\n  <p>RuntimeError: Operation 'Plus': Operand 'Output('Times24_Output_0',\n  [#, *], [300])' has dynamic axes, that do not match the dynamic axes\n  '[#]' of the other operands.</p>\n</blockquote>\n\n<p>I would like to know what I'm doing wrong and how to accurately recreate the same model.</p>\n"}, {"tags": ["python", "moviepy"], "answers": [{"tags": [], "owner": {"reputation": 1926, "user_id": 6732358, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/Vyl04.gif?s=128&g=1", "display_name": "Tom Burrows", "link": "https://stackoverflow.com/users/6732358/tom-burrows"}, "is_accepted": false, "score": 2, "last_activity_date": 1492076778, "last_edit_date": 1492076778, "creation_date": 1492074448, "answer_id": 43387988, "question_id": 43380783, "link": "https://stackoverflow.com/questions/43380783/how-to-batch-process-a-folder-of-videos-using-moviepy/43387988#43387988", "title": "How to batch process a folder of videos using MoviePy", "body": "<p>I know you have an answer <a href=\"https://github.com/Zulko/moviepy/issues/542#issuecomment-293735347\" rel=\"nofollow noreferrer\">on Github</a>, but I'll add my own solution.</p>\n\n<p>First, you'll want to put your code inside a function:</p>\n\n<pre><code>def process_video(input):\n    \"\"\"Parameter input should be a string with the full path for a video\"\"\"\n\n    clip = VideoFileClip(input, output)\n\n    clip1 = clip.rotate(270)\n\n    clip2 = clip1.crop(x_center=540,y_center=960,width=1080,height=608)\n\n    clip3 = clip2.resize(width=1920)\n\n    clip3.write_videofile(output,codec='libx264')\n</code></pre>\n\n<p>Then, you can have a function that returns a list of file paths, and a list of final file names to use with the above function (note that the final file names will be the same as the original file names but with \"output\" in front):</p>\n\n<pre><code>import os\ndef get_video_paths(folder_path):\n    \"\"\" \n    Parameter folder_path should look like \"Users/documents/folder1/\"\n    Returns a list of complete paths\n    \"\"\"\n    file_name_list = os.listdir(folder_path)\n\n    path_name_list = []\n    final_name_list = []\n    for name in file_name_list:\n        # Put any sanity checks here, e.g.:\n        if name == \".DS_Store\":\n            pass\n        else:\n            path_name_list.append(folder_path + name)\n            # Change the format of the output file names below\n            final_name_list.append(folder_path + \"output\" + name)  \n    return path_name_list, final_name_list\n</code></pre>\n\n<p>Finally, at the bottom, we get the input folder, and utilise the above two functions:</p>\n\n<pre><code>if __name__ == \"__main__\":\n    video_folder = input(\"What folder would you like to process? \")\n    path_list, final_name_list = get_video_paths(video_folder)\n    for path, name in zip(path_list, final_name_list):\n        process_video(path, name)\n    print(\"Finished\")\n</code></pre>\n\n<p>Just watch out, because this will crash if there are any files in the folder that can't be read as a movie. For instance, on mac, the OS puts a \".DS_Store\" file in each folder, which will crash the program. I've put an area for a sanity check to ignore certain filenames.</p>\n\n<p>Complete code:</p>\n\n<pre><code>import os\n\nfrom moviepy.editor import *\n\n\ndef process_video(input, output):\n    \"\"\"Parameter input should be a string with the full path for a video\"\"\"\n\n    clip = VideoFileClip(input)\n\n    clip1 = clip.rotate(270)\n\n    clip2 = clip1.crop(x_center=540,y_center=960,width=1080,height=608)\n\n    clip3 = clip2.resize(width=1920)\n\n    clip3.write_videofile(output,codec='libx264')\n\n\ndef get_video_paths(folder_path):\n    \"\"\" \n    Parameter folder_path should look like \"Users/documents/folder1/\"\n    Returns a list of complete paths\n    \"\"\"\n    file_name_list = os.listdir(folder_path)\n\n    path_name_list = []\n    final_name_list = []\n    for name in file_name_list:\n        # Put any sanity checks here, e.g.:\n        if name == \".DS_Store\":\n            pass\n        else:\n            path_name_list.append(folder_path + name)\n            final_name_list.append(folder_path + \"output\" + name)\n    return path_name_list, final_name_list\n\nif __name__ == \"__main__\":\n    video_folder = input(\"What folder would you like to process? \")\n    path_list, final_name_list = get_video_paths(video_folder)\n    for path, name in zip(path_list, final_name_list):\n        process_video(path, name)\n    print(\"Finished\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1078, "user_id": 2560922, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EVHyE.png?s=128&g=1", "display_name": "mbeacom", "link": "https://stackoverflow.com/users/2560922/mbeacom"}, "is_accepted": false, "score": 0, "last_activity_date": 1492081778, "creation_date": 1492081778, "answer_id": 43390675, "question_id": 43380783, "link": "https://stackoverflow.com/questions/43380783/how-to-batch-process-a-folder-of-videos-using-moviepy/43390675#43390675", "title": "How to batch process a folder of videos using MoviePy", "body": "<p>I responded on your <a href=\"https://github.com/Zulko/moviepy/issues/542#issuecomment-293843765\" rel=\"nofollow noreferrer\">Github issue #542</a>, but I copied it here for future reference!</p>\n\n<p>First off, the below example isn't ironclad, but it should do what you need.\nYou can achieve this via something like this:</p>\n\n<pre><code>#!/usr/bin/env python\n# -*- coding: utf-8 -*-\n\"\"\"Convert all media assets located in a specified directory.\"\"\"\nimport glob\nimport os\nfrom optparse import OptionParser\n\nfrom moviepy.editor import VideoFileClip\n\n\ndef get_dir_files(dir_path, patterns=None):\n    \"\"\"Get all absolute paths for pattern matched files in a directory.\n\n    Args:\n        dir_path (str): The path to of the directory containing media assets.\n        patterns (list of str): The list of patterns/file extensions to match.\n\n    Returns:\n        (list of str): A list of all pattern-matched files in a directory.\n    \"\"\"\n    if not patterns or type(patterns) != list:\n        print('No patterns list passed to get_dir_files, defaulting to patterns.')\n        patterns = ['*.mp4', '*.avi', '*.mov', '*.flv']\n\n    files = []\n    for pattern in patterns:\n        dir_path = os.path.abspath(dir_path) + '/' + pattern\n        files.extend(glob.glob(dir_path))\n\n    return files\n\ndef modify_clip(path, output):\n    \"\"\"Handle conversion of a video file.\n\n    Args:\n        path (str): The path to the directory of video files to be converted.\n        output (str): The filename to associate with the converted file.\n    \"\"\"\n    clip = VideoFileClip(path)\n    clip = clip.rotate(270)\n    clip = clip.crop(x_center=540, y_center=960, width=1080, height=608)\n    clip = clip.resize(width=1920)\n\n    clip.write_videofile(output, codec='libx264')\n    print('File: {} should have been created.'.format(output))\n\n\nif __name__ == '__main__':\n    status = 'Failed!'\n    parser = OptionParser(version='%prog 1.0.0')\n    parser.add_option('-p', '--path', action='store', dest='dir_path',\n                      default='.', type='string',\n                      help='the path of the directory of assets, defaults to .')\n\n    options, args = parser.parse_args()\n    print('Running against directory path: {}'.format(options.dir_path))\n    path_correct = raw_input('Is that correct?').lower()\n\n    if path_correct.startswith('y'):\n        dir_paths = get_dir_files(options.dir_path)\n        for dir_path in dir_paths:\n            output_filename = 'converted_' + os.path.basename(dir_path)\n            modify_clip(path=dir_path, output=output_filename)\n\n        status = 'Successful!'\n\n    print('Conversion {}'.format(status))\n</code></pre>\n\n<p>With the above example, you can simply drop that into the directory of assets you wish to convert and run: <code>python this_file.py</code> and it should convert the files for you in the same directory with the name prepended with: <code>converted_</code></p>\n\n<p>Likewise, you can drop that file anywhere and run it against an absolute path:\n<code>python this_file.py -p /Users/thisguy/media</code> and it will convert all files with the extensions: <code>['*.mp4', '*.avi', '*.mov', '*.flv']</code></p>\n\n<p>Either way, let me know if you have any questions (or if this resolves your issue) and I'll do my best to help you out!</p>\n\n<p>Thanks for using moviepy!</p>\n"}], "owner": {"reputation": 23, "user_id": 7859068, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10208781232993790/picture?type=large", "display_name": "Evan Mann", "link": "https://stackoverflow.com/users/7859068/evan-mann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1257, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1492081778, "creation_date": 1492036884, "last_edit_date": 1492037478, "question_id": 43380783, "link": "https://stackoverflow.com/questions/43380783/how-to-batch-process-a-folder-of-videos-using-moviepy", "title": "How to batch process a folder of videos using MoviePy", "body": "<p>I wrote a MoviePy script that takes an input video, does some processing, and outputs a video file. I want to run this through an entire folder of videos. Any help or direction is appreciated.</p>\n\n<p>Here's what I tried...</p>\n\n<pre><code>for f in *; do python resize.py $f; done\n</code></pre>\n\n<p>and resize.py source code here:</p>\n\n<pre><code>from moviepy.editor import *\n\nclip = VideoFileClip(input)\n\nclip1 = clip.rotate(270)\n\nclip2 = clip1.crop(x_center=540,y_center=960,width=1080,height=608)\n\nclip3 = clip2.resize(width=1920)\n\nclip3.write_videofile(output,codec='libx264')\n</code></pre>\n\n<p>Really wasn't sure what to put for \"input\" and \"output\" in my .py file.</p>\n\n<p>Thanks,\nEvan</p>\n"}, {"tags": ["python", "scikit-learn", "regression"], "comments": [{"owner": {"reputation": 688, "user_id": 2896045, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/693163854/picture?type=large", "display_name": "Carlo Mazzaferro", "link": "https://stackoverflow.com/users/2896045/carlo-mazzaferro"}, "edited": false, "score": 0, "creation_date": 1492039722, "post_id": 43380745, "comment_id": 73824465, "body": "btw, 200 rows for a dataset is as far from &#39;huge&#39; as it gets. Huge data sets nowadays are counted on the scale of terabytes."}], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 7617947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/482aedbfc7764b43227827f78c6460b3?s=128&d=identicon&r=PG&f=1", "display_name": "Blake Russell", "link": "https://stackoverflow.com/users/7617947/blake-russell"}, "edited": false, "score": 0, "creation_date": 1492052913, "post_id": 43381175, "comment_id": 73827608, "body": "So the pandas method vs. the method I am currently using equals in the same array, however it obviously cleaner. Thanks for that. Because of that I commented out the np.reshape on stats in the predict_salary function. I got rid of the [0] slice calls on the return string for the predict_salary function. And I added the train_test and I am able to get it to work successfully when passing through 1 column of data. But if I added more than 1 then the poly model just locks up, and the linear and rbf model yield error: raise ValueError(&quot;x and y must be the same size&quot;)"}, {"owner": {"reputation": 47, "user_id": 7617947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/482aedbfc7764b43227827f78c6460b3?s=128&d=identicon&r=PG&f=1", "display_name": "Blake Russell", "link": "https://stackoverflow.com/users/7617947/blake-russell"}, "edited": false, "score": 0, "creation_date": 1492058440, "post_id": 43381175, "comment_id": 73829003, "body": "Those 4 columns are ironically the few that work for some reason. If I add all of the columns needed, 4,5, 9-52, then the script just hangs up. Also, forgive me I am still confused how this works. If I&#39;m able to pass all the columns needed, I will essentially be able to predict column 6, the salary, for a new player that I have &quot;features&quot; for columns 4,5, 9-52 but not the feature in column 6 for said new player?"}, {"owner": {"reputation": 688, "user_id": 2896045, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/693163854/picture?type=large", "display_name": "Carlo Mazzaferro", "link": "https://stackoverflow.com/users/2896045/carlo-mazzaferro"}, "reply_to_user": {"reputation": 47, "user_id": 7617947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/482aedbfc7764b43227827f78c6460b3?s=128&d=identicon&r=PG&f=1", "display_name": "Blake Russell", "link": "https://stackoverflow.com/users/7617947/blake-russell"}, "edited": false, "score": 0, "creation_date": 1492071169, "post_id": 43381175, "comment_id": 73835094, "body": "You need to pass all columns but column six to <code>columns_of_interest</code>. A way of doing so would be: <code>columns_of_interest  = [i for i in df.columns if i != 6]</code> which needs to be declared after you call <code>df = pandas.read_csv(filename, header=None)</code>."}, {"owner": {"reputation": 688, "user_id": 2896045, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/693163854/picture?type=large", "display_name": "Carlo Mazzaferro", "link": "https://stackoverflow.com/users/2896045/carlo-mazzaferro"}, "reply_to_user": {"reputation": 47, "user_id": 7617947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/482aedbfc7764b43227827f78c6460b3?s=128&d=identicon&r=PG&f=1", "display_name": "Blake Russell", "link": "https://stackoverflow.com/users/7617947/blake-russell"}, "edited": false, "score": 0, "creation_date": 1492071213, "post_id": 43381175, "comment_id": 73835114, "body": "I&#39;d appreciate if you could upvote/accept the answer if it serves your purposes. Thanks."}, {"owner": {"reputation": 47, "user_id": 7617947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/482aedbfc7764b43227827f78c6460b3?s=128&d=identicon&r=PG&f=1", "display_name": "Blake Russell", "link": "https://stackoverflow.com/users/7617947/blake-russell"}, "edited": false, "score": 0, "creation_date": 1492090555, "post_id": 43381175, "comment_id": 73848595, "body": "I upvoted and I do appreciate the help cause I&#39;m lost right now. But it doesn&#39;t answer my need. The script currently hangs if I add more features. Also, what I believe it&#39;s doing is predicting salary for every single feature...actually what I need to do is predict salary for 1 entire row not every feature for a row. I want to treat features for 1 row as a single entry, if that makes any sense?"}, {"owner": {"reputation": 688, "user_id": 2896045, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/693163854/picture?type=large", "display_name": "Carlo Mazzaferro", "link": "https://stackoverflow.com/users/2896045/carlo-mazzaferro"}, "reply_to_user": {"reputation": 47, "user_id": 7617947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/482aedbfc7764b43227827f78c6460b3?s=128&d=identicon&r=PG&f=1", "display_name": "Blake Russell", "link": "https://stackoverflow.com/users/7617947/blake-russell"}, "edited": false, "score": 0, "creation_date": 1492102656, "post_id": 43381175, "comment_id": 73856541, "body": "What do you mean by &#39;the script hangs&#39;? No, actually it is predicting salary (column 6) from all the other 51 columns. Hence, it is generating a prediction for every <i>row</i> in the dataset."}], "tags": [], "owner": {"reputation": 688, "user_id": 2896045, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/693163854/picture?type=large", "display_name": "Carlo Mazzaferro", "link": "https://stackoverflow.com/users/2896045/carlo-mazzaferro"}, "is_accepted": false, "score": 0, "last_activity_date": 1492055047, "last_edit_date": 1492055047, "creation_date": 1492039462, "answer_id": 43381175, "question_id": 43380745, "link": "https://stackoverflow.com/questions/43380745/predictive-analysis-with-huge-data-set/43381175#43381175", "title": "Predictive analysis with huge data-set", "body": "<p>I would use <a href=\"http://pandas.pydata.org/pandas-docs/stable/\" rel=\"nofollow noreferrer\">pandas</a>, since the approach you are taking by commenting out lines is painful, to say the least. </p>\n\n<pre><code>import pandas\n\n# list of columns (features) you'd like to use\ncolumns_of_interest = [11, 15, 20, 26] # features you'd like to use (stats). You only used 11 but you could use many more\n\ndf = pandas.read_csv(filename, header=None)\nstats = df[df[columns_of_interest]].values # select columns of interest\n\nsalary = df[6].values   # salary column, which is in column 6\n</code></pre>\n\n<p>Then, you could use sklearn's <code>train_test_split</code>. This will enable you to split data into training and testing.</p>\n\n<pre><code>from sklearn.model_selection import train_test_split\nx_train, x_test, y_train, y_test = train_test_split(stats, salary)\n</code></pre>\n\n<p>Which you can send to your prediction function:</p>\n\n<pre><code>pred_lin, pred_rbf, pred_poly = predict_salary(x_train, y_train, x_test)\n</code></pre>\n\n<p>I've added three arguments since the function returns three sets of predictions, each from each SVR model. </p>\n\n<p>Also, I would just change the <code>return</code> of the function to:</p>\n\n<pre><code>svr_lin.predict(x), svr_rbf.predict(x), svr_poly.predict(x)\n</code></pre>\n\n<p>This will return the entire set of predictions from the test set.</p>\n\n<h2>Use code below, should work.</h2>\n\n<pre><code>import csv\nimport numpy as np\nfrom sklearn.svm import SVR\nimport matplotlib.pyplot as plt\nimport pandas\nfrom sklearn.model_selection import train_test_split\n\n\n\ndef predict_salary(stats, salary, x):\n\n    svr_lin = SVR(kernel='linear', C=1e3, epsilon=0.2, cache_size=7000)\n    svr_rbf = SVR(kernel= 'rbf', C=1e3, gamma=0.1, cache_size=7000)\n    svr_poly = SVR(kernel='poly', C=1e3, degree=2, cache_size=7000)\n    svr_lin.fit(stats, salary)\n    svr_rbf.fit(stats, salary)\n    svr_poly.fit(stats, salary)\n\n    # plt.scatter(stats, salary, color='black', label='Data')\n    plt.scatter(salary, svr_lin.predict(stats), color='green', label='Linear model')\n    plt.scatter(salary, svr_rbf.predict(stats), color='red', label='RBF model')\n    plt.scatter(salary, svr_poly.predict(stats), color='blue', label='Polynomial model')\n    plt.xlabel('Actual Salary')\n    plt.ylabel('Salary Predictions')\n    plt.title('Support Vector Regression')\n    plt.legend()\n    plt.show()\n\n    return svr_lin.predict(x), svr_rbf.predict(x), svr_poly.predict(x)\n\n\n\nfilename = '/Users/carlomazzaferro/Desktop/p.csv'\n\ncolumns_of_interest = [11, 15, 20, 26]\n\ndf = pandas.read_csv(filename, header=None)\nstats = df[columns_of_interest].values # select columns of interest\n\nsalary = df[6].values   # salary column, which is in column\n\nx_train, x_test, y_train, y_test = train_test_split(stats, salary)\nprint(x_train.shape, x_test.shape, y_train.shape, y_test.shape)\n\n\npred_lin, pred_rbf, pred_poly = predict_salary(x_train, y_train, x_test)\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 7617947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/482aedbfc7764b43227827f78c6460b3?s=128&d=identicon&r=PG&f=1", "display_name": "Blake Russell", "link": "https://stackoverflow.com/users/7617947/blake-russell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 142, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1492055047, "creation_date": 1492036722, "question_id": 43380745, "link": "https://stackoverflow.com/questions/43380745/predictive-analysis-with-huge-data-set", "title": "Predictive analysis with huge data-set", "body": "<p>I've been able to successfully use SVR to predict a value on a data-set with one data entry. However, my data-set has 47 entries per \"row\" or \"entry\" or whatever you want to call it. I've uploaded my dataset csv and in my code I have commented out the other 46 entries in the get_data function.</p>\n\n<p>All 47 data entries are relative and impact x, the player's salary. I am trying to project a player's future salary using only the statistics available for the player prior to that player's salary is known. However, as I mentioned, a lot of stats define the salary and at the moment I am only able to conduct the prediction on 1 stat entry.</p>\n\n<pre><code>import csv\nimport numpy as np\nfrom sklearn.svm import SVR\nimport matplotlib.pyplot as plt\n\nsalary = []\nstats = []\n\ndef get_data(filename):\n    with open(filename, 'r', encoding='utf8', errors='ignore') as csvfile:\n        csvFileReader = csv.reader(csvfile)\n        for row in csvFileReader:\n#            stats.append(float(row[4]))   # \n#            stats.append(int(row[5]))         #\n            salary.append(float(row[6]))\n#            stats.append(int(row[8]))        #\n#            stats.append(int(row[9]))        #\n#            stats.append(int(row[10]))         #\n            stats.append(int(row[11]))      #\n#            stats.append(int(row[12]))        #\n#            stats.append(int(row[13]))        #\n#            stats.append(float(row[14]))      #\n#            stats.append(int(row[15]))        #\n#            stats.append(int(row[16]))       #\n#            stats.append(int(row[17]))       #\n#            stats.append(int(row[18]))        #\n#            stats.append(int(row[19]))           #\n#            stats.append(int(row[20]))           #\n#            stats.append(int(row[21]))             #\n#            stats.append(int(row[22]))            #\n#            stats.append(int(row[23]))            #\n#            stats.append(int(row[24]))            #\n#            stats.append(float(row[25]))          #\n#            stats.append(int(row[26]))            #\n#            stats.append(int(row[27]))           #\n#            stats.append(int(row[28]))           #\n#            stats.append(int(row[29]))            #\n#            stats.append(int(row[30]))            #\n#            stats.append(int(row[31]))            #\n#            stats.append(int(row[32]))              #\n#            stats.append(int(row[33]))             #\n#            stats.append(int(row[34]))             #\n#            stats.append(int(row[35]))             #\n#            stats.append(float(row[36]))           #\n#            stats.append(int(row[37]))             #\n#            stats.append(int(row[38]))            #\n#            stats.append(int(row[39]))            #\n#            stats.append(int(row[40]))             #\n#            stats.append(int(row[41]))            #\n#            stats.append(int(row[42]))            #\n#            stats.append(int(row[43]))              #\n#            stats.append(int(row[44]))             #\n#            stats.append(int(row[45]))             #\n#            stats.append(int(row[46]))             #\n#            stats.append(float(row[47]))           #\n#            stats.append(int(row[48]))             #\n#            stats.append(int(row[49]))             #\n#            stats.append(int(row[50]))            #\n#            stats.append(int(row[51]))            #\n#            stats.append(int(row[52]))            #\n    return\n\nget_data('dataset.csv')\n\ndef predict_salary(stats, salary, x):\n    stats = np.reshape(stats,(len(salary), int(len(stats)/len(salary))))\n\n    svr_lin = SVR(kernel='linear', C=1e3, epsilon=0.2, cache_size=7000)\n    svr_rbf = SVR(kernel= 'rbf', C=1e3, gamma=0.1, cache_size=7000)\n    svr_poly = SVR(kernel='poly', C=1e3, degree=2, cache_size=7000)\n    svr_lin.fit(stats, salary)\n    svr_rbf.fit(stats, salary)\n    svr_poly.fit(stats, salary)\n\n    plt.scatter(stats, salary, color='black', label='Data')\n    plt.plot(stats, svr_lin.predict(stats), color='green', label='Linear model')\n    plt.plot(stats, svr_rbf.predict(stats), color='red', label='RBF model')\n    plt.plot(stats, svr_poly.predict(stats), color='blue', label='Polynomial model')\n    plt.xlabel('Stats')\n    plt.ylabel('Salary')\n    plt.title('Support Vector Regression')\n    plt.legend()\n    plt.show()\n\n    return svr_lin.predict(x)[0], svr_rbf.predict(x)[0], svr_poly.predict(x)[0]\n\n\nprojected_salary = predict_salary(stats, salary, 1)\n\nprint (projected_salary)\n</code></pre>\n\n<p>And here is the dataset.csv, I've only included 10 rows but what I have goes up to 200 rows of data:</p>\n\n<pre><code>N/A,N/A,player 1,team,3,26,1350000,508500,22,31,32,8,361,3,0.217,0,0,0,0,25,33,48,11,390,13,0.256,0,0,0,0,9,18,22,1,225,4,0.215,0,0,0,0,22,27,37,8,313,9,0.192,0,0,0,0,0\nN/A,N/A,player 2,team,3,27,805000,508500,15,26,17,4,176,1,0.242,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,1,1,2,0,13,0,0.231,0,0,0,0,10,10,17,1,168,1,0.201,0,0,0,0,0\nN/A,N/A,player 3,team,3,25,2625000,508500,25,17,69,3,460,58,0.26,0,0,0,0,15,28,56,4,454,57,0.226,0,0,0,0,39,48,72,6,611,56,0.25,0,0,0,0,2,1,9,0,22,13,0.368,2,0,0,0,0\nN/A,N/A,player 4,team,3,26,3575000,508500,65,81,73,30,601,6,0.243,0,0,0,0,37,46,44,11,497,13,0.258,0,0,0,0,29,36,47,10,411,4,0.221,0,0,0,1,25,36,41,8,335,5,0.265,0,0,0,0,0\nN/A,N/A,player 5,team,3,28,1950000,508500,23,34,45,7,324,4,0.255,0,0,0,0,35,45,56,2,509,8,0.28,1,0,0,0,32,29,68,4,492,12,0.281,0,0,0,0,5,14,15,0,144,1,0.25,0,0,0,0,0\nN/A,N/A,player 6,team,2.5,30,700000,508500,3,0,7,0,141,0,0.174,0,0,0,0,28,49,38,11,355,0,0.234,0,0,0,0,18,28,22,9,275,0,0.207,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0\nN/A,N/A,player 7,team,2.5,26,2550000,508500,31,39,67,6,622,17,0.294,1,0,0,0,25,35,57,1,452,19,0.272,0,0,0,0,3,4,13,1,125,1,0.237,0,0,0,0,5,10,17,0,131,0,0.289,0,0,0,0,0\nN/A,N/A,player 8,team,3,28,938000,508500,15,28,21,6,166,4,0.284,0,0,0,0,8,10,13,2,113,0,0.146,0,0,0,0,3,4,8,0,79,1,0.213,0,0,0,0,11,19,16,4,197,0,0.189,0,0,0,0,0\nN/A,N/A,player 9,team,3,24,2300000,508500,40,49,52,5,466,21,0.277,0,0,0,0,36,43,59,4,552,16,0.227,0,0,0,0,27,26,34,6,332,8,0.261,0,0,0,0,5,5,5,0,61,2,0.291,0,0,0,0,0\nN/A,N/A,player 10,team,3,27,3025000,508500,63,70,57,24,548,0,0.245,0,0,0,0,30,31,30,10,234,0,0.304,0,0,0,0,57,76,74,24,478,8,0.312,0,0,0,0,23,17,32,5,213,2,0.263,0,0,0,0,0\n</code></pre>\n\n<p>It's taken me a couple days to even get this working using 1 of the 47 entries and a couple more trying to figure out how to get it to analyze the entire set for each player. I am a beginner in python and have no statistical background so I am completely lost right now! Any help or guidance is appreciated, thanks!</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 18468, "user_id": 5249307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c640cd731ca8e455d79860519b6b208?s=128&d=identicon&r=PG", "display_name": "donkopotamus", "link": "https://stackoverflow.com/users/5249307/donkopotamus"}, "edited": false, "score": 1, "creation_date": 1492037218, "post_id": 43380708, "comment_id": 73823765, "body": "<code>print(Wrapper(MyType(1,2,3), MyType(1,2,3)))</code> works exactly as expected.  Are you instead using <code>print(Wrapper([MyType(1,2,3), MyType(1,2,3)]))</code>"}, {"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 3, "creation_date": 1492037303, "post_id": 43380708, "comment_id": 73823789, "body": "Cannot reproduce - if I fix the error in <code>MyType</code> (<code>self,</code> not <code>self.</code>) then do <code>print(Wrapper(MyType(1,2,3), MyType(4,5,6)))</code> I get <code>I am a str, I am a str</code>. I helps to have a running example and its output for us to compare."}, {"owner": {"reputation": 191, "user_id": 2994184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25648de3bf167dfb2179923cf16b3ccf?s=128&d=identicon&r=PG&f=1", "display_name": "Nyefan", "link": "https://stackoverflow.com/users/2994184/nyefan"}, "reply_to_user": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1492101673, "post_id": 43380708, "comment_id": 73856024, "body": "@tdelaney and @donkopotamus, I added some more information to the question as well as the solution - I never dereferenced (I&#39;m sure there&#39;s a python term for that, but I don&#39;t know it) <code>*args</code> when calling the constructor.  Thank you for your help."}, {"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1492102396, "post_id": 43380708, "comment_id": 73856410, "body": "Ouch! Glad it worked out. I call that unpacking... but I&#39;m not sure if that&#39;s official either."}], "answers": [{"tags": [], "owner": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "is_accepted": false, "score": 0, "last_activity_date": 1492037529, "last_edit_date": 1492037529, "creation_date": 1492037098, "answer_id": 43380816, "question_id": 43380708, "link": "https://stackoverflow.com/questions/43380708/why-is-mapstr-self-my-list-calling-repr-on-elements-of-my-list-instead-of/43380816#43380816", "title": "Why is map(str, self.my_list) calling __repr__ on elements of my_list instead of __str__?", "body": "<p>If you print a built-in container it will use the representation of each item <sup>1</sup>:</p>\n\n<pre><code>&gt;&gt;&gt; [MyType(), MyType()]\n[I am a repr, I am a repr]\n\n&gt;&gt;&gt; print([MyType(), MyType()])\n[I am a repr, I am a repr]\n\n&gt;&gt;&gt; Wrapper(MyType(), MyType()).foo\n[I am a repr, I am a repr]\n</code></pre>\n\n<p>However if you <code>map</code> each element to a string then it will (obviously) use the string representation:</p>\n\n<pre><code>&gt;&gt;&gt; ','.join(map(str, [MyType(), MyType()]))\n'I am a str,I am a str'\n\n&gt;&gt;&gt; print(Wrapper(MyType(), MyType()))\nI am a str, I am a str\n</code></pre>\n\n<p>So items inside a built-in container (like <code>list</code>) will be displayed with the <code>__repr__</code> no matter if you use <code>str</code> or <code>repr</code> on the container. You explicitly need to convert each item so it's displayed using its <code>__str__</code> method.</p>\n\n<hr>\n\n<p><sup>1</sup> I removed the <code>__init__</code> method from your <code>MyType</code>. This just makes the code snippets \"shorter\" and less convolved.</p>\n"}], "owner": {"reputation": 191, "user_id": 2994184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25648de3bf167dfb2179923cf16b3ccf?s=128&d=identicon&r=PG&f=1", "display_name": "Nyefan", "link": "https://stackoverflow.com/users/2994184/nyefan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 191, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1492158936, "creation_date": 1492036519, "last_edit_date": 1495542339, "question_id": 43380708, "link": "https://stackoverflow.com/questions/43380708/why-is-mapstr-self-my-list-calling-repr-on-elements-of-my-list-instead-of", "title": "Why is map(str, self.my_list) calling __repr__ on elements of my_list instead of __str__?", "body": "<p>I've read through the answers <a href=\"https://stackoverflow.com/questions/727761/python-str-and-lists\">here</a>, and everyone seems in agreement that mapping <code>str</code> to a list should call <code>element.__str__</code> on each element of that list, but <code>__repr__</code> is being called instead.  I've stepped through the code, and the list is being generated properly.</p>\n\n<p>My Collection wrapper looks like this:</p>\n\n<pre><code>class Wrapper:\n    def __init__(self, *args):\n        self.foo = list(args)\n\n    def __str__(self):\n        return \", \".join(map(str, self.foo))\n</code></pre>\n\n<p>From <code>Wrapper.__str__()</code>, it jumps to <code>__repr__</code> in the contained class.  That class looks like this:</p>\n\n<pre><code>class MyType:\n    def __init__(self, arg1, arg2, arg3):\n        self.arg1 = arg1\n        # set the other values\n\n    def __repr__(self):\n        return \"I am a repr\"\n\n    def __str__(self):\n        return \"I am a str\"\n</code></pre>\n\n<p>When I step through the code with a debugger, execution jumps directly from the map line in <code>Wrapper</code> to <code>__repr__</code> in <code>MyType</code>.  If I call <code>str(wrapper_instance.foo[0])</code>, I jump to <code>__str__</code> instead.  Why might this be?</p>\n\n<p>EDIT: Wrapper is a superclass of the actual type that's being called, though the subclass doesn't implements a <code>__str__</code>.  The subclass definition looks like this:</p>\n\n<pre><code>class SubWrapper(Wrapper):\n    def __init__(self, definite_arg, *args):\n        super().__init__(args)\n        self.definite_arg = definite_arg\n\n    def __repr__(self):\n        return \"I am a subclass repr\"\n</code></pre>\n\n<p>In order to comply with the off-topic rule and to answer some of the questions about how the code is being called, the specific calls I'm making are:</p>\n\n<pre><code>&gt;&gt;&gt; w = Wrapper(MyType(1, 2, 3), MyType(4, 5, 6))\n&gt;&gt;&gt; s = SubWrapper(MyType(7, 8, 9), MyType(1, 2, 3), MyType(4, 5, 6))\n&gt;&gt;&gt; print(str(w))\nI am a str, I am a str\n&gt;&gt;&gt; print(str(s))\n(I am a repr, I am a repr)\n&gt;&gt;&gt; print(\", \".join(map(str, w.foo)))\nI am a str, I am a str\n&gt;&gt;&gt; print(\", \".join(map(str, s.foo)))\n(I am a repr, I am a repr)\n</code></pre>\n\n<p>EDIT_2: It turns out that the issue was in the construction of the class - <code>SubWrapper.__init__</code> should call <code>super().__init__(*args)</code></p>\n"}, {"tags": ["python", "pseudocode"], "comments": [{"owner": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "edited": false, "score": 0, "creation_date": 1492036430, "post_id": 43380625, "comment_id": 73823491, "body": "Welcome to <a href=\"https://stackoverflow.com\">Stack Overflow</a>. Please review <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>... have you tried running it? what is the problem you are encountering?"}, {"owner": {"reputation": 1018, "user_id": 5156102, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DNozE.png?s=128&g=1", "display_name": "mark jay", "link": "https://stackoverflow.com/users/5156102/mark-jay"}, "edited": false, "score": 0, "creation_date": 1492036468, "post_id": 43380625, "comment_id": 73823510, "body": "this looks like homework. not sure if this is the right place to ask for help"}, {"owner": {"reputation": 29068, "user_id": 149436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc4c5aa5126e36603eabdfdc57c46583?s=128&d=identicon&r=PG", "display_name": "Evan Trimboli", "link": "https://stackoverflow.com/users/149436/evan-trimboli"}, "edited": false, "score": 1, "creation_date": 1492036562, "post_id": 43380625, "comment_id": 73823536, "body": "A good way to verify it is correct is to decide what the intent was, and then check with some input data that it gives you the results you expect. Just &quot;translating&quot; it without knowing the goal or having an idea of the inputs/outputs won&#39;t help you much."}, {"owner": {"reputation": 3, "user_id": 7841534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/517d1e0f8255e9608e7f94705adab60d?s=128&d=identicon&r=PG&f=1", "display_name": "Nicole ", "link": "https://stackoverflow.com/users/7841534/nicole"}, "edited": false, "score": 0, "creation_date": 1492036867, "post_id": 43380625, "comment_id": 73823643, "body": "I was able to run the code without getting an error.. but think I am missing something because I did not put anything about position j in the code and can&#39;t figure out where it would go. I&#39;m sorry I am extremely new to this..."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1492042296, "post_id": 43380625, "comment_id": 73825147, "body": "I think what the psuedocode calls <code>i</code> is the variable <code>pos</code> in your code, so the variable I in your code <code>i</code> would correspond to what it called <code>j</code> in the second <code>COMMENT</code>. It would help to know what the result is supposed to be (what&#39;s supposedly being accomplished)."}, {"owner": {"reputation": 3, "user_id": 7841534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/517d1e0f8255e9608e7f94705adab60d?s=128&d=identicon&r=PG&f=1", "display_name": "Nicole ", "link": "https://stackoverflow.com/users/7841534/nicole"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1492048208, "post_id": 43380625, "comment_id": 73826515, "body": "@martineau That makes sense! Thank you! It is supposed  to define a function that sorts a list with out recursion."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 7841534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/517d1e0f8255e9608e7f94705adab60d?s=128&d=identicon&r=PG&f=1", "display_name": "Nicole ", "link": "https://stackoverflow.com/users/7841534/nicole"}, "edited": false, "score": 0, "creation_date": 1492093470, "post_id": 43393891, "comment_id": 73850734, "body": "Thank you! Every time I tried to define the function I kept getting an error and now I see why, I put the print statement and the list right after the function."}], "tags": [], "owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "is_accepted": true, "score": 0, "last_activity_date": 1492090850, "creation_date": 1492090850, "answer_id": 43393891, "question_id": 43380625, "link": "https://stackoverflow.com/questions/43380625/translating-pseudocode-into-python/43393891#43393891", "title": "Translating pseudocode into Python", "body": "<p>As I said in a comment, I think you effectively <em>do</em> have the <code>j</code> (as well as the <code>i</code>) the pseudocode COMMENT talks about. However, in your code, <code>i</code> is the variable <code>pos</code>, which would make the <code>j</code> what is named <code>i</code> in your code. </p>\n\n<p>To see if your code works, you need to initially have an unsorted list\u2014not the <code>my_list=range(1,40)</code> in your code (which is <code>[1, 2, 3, ... 38, 39]</code> and already in numerical order).</p>\n\n<p>One thing you didn't do is define a <code>sort1()</code> function.</p>\n\n<p>What is below is <strong>essentially your code</strong>, but I renamed the two variables to match the pseudocode COMMENT, and put (most of it) in a function definition where it's supposed to be. </p>\n\n<p>Beyond that, I had to declare the variables <code>num_comparisons</code> and <code>num_swaps</code> (which aren't mentioned in the psuedocode) as <code>global</code> so they could be accessed outside of the function\u2014otherwise they would have been local variables by default and only accessible <em>within</em> the function.</p>\n\n<pre><code>def sort1(items):\n    \"\"\" Sort given list of items in-place. \"\"\"\n    # allow access to these variables outside of function\n    global num_comparisons\n    global num_swaps\n\n    # initialize global variables\n    num_comparisons = 0\n    num_swaps = 0\n\n    # starting at position i-1 continue this loop as long\n    # as the value at j+1 is less than the value at j\n    for i in range(0, len(items)-1):\n        for j in range(i+1, len(items)):\n            num_comparisons += 1\n            if items[j] &lt; items[i]:\n               num_swaps += 1\n               [items[j], items[i]] = [items[i], items[j]]\n\nmy_list = [6, 3, 7, 2, 9, 4, 5]\n\nprint 'my_list before sort:'\nprint my_list\nsort1(my_list)\nprint 'my_list after sort:'\nprint my_list\nprint\nprint 'num_comparisons:', num_comparisons, ', num_swaps:', num_swaps\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>my_list before sort:\n[6, 3, 7, 2, 9, 4, 5]\nmy_list after sort:\n[2, 3, 4, 5, 6, 7, 9]\n\nnum_comparisons: 21 , num_swaps: 10\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 7841534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/517d1e0f8255e9608e7f94705adab60d?s=128&d=identicon&r=PG&f=1", "display_name": "Nicole ", "link": "https://stackoverflow.com/users/7841534/nicole"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1109, "favorite_count": 0, "accepted_answer_id": 43393891, "answer_count": 1, "score": -2, "last_activity_date": 1492090850, "creation_date": 1492036058, "last_edit_date": 1592644375, "question_id": 43380625, "link": "https://stackoverflow.com/questions/43380625/translating-pseudocode-into-python", "title": "Translating pseudocode into Python", "body": "<p>This is the pseudocode I was given:</p>\n<ol>\n<li><p>COMMENT: define a function <code>sort1</code></p>\n</li>\n<li><p>INPUT: a list of numbers my list</p>\n</li>\n<li><p>print the initial list</p>\n</li>\n<li><p>loop over all positions i in the list; starting with the second element (index 1)</p>\n<p>COMMENT: at this point the elements from 0 to i-1 in this list are sorted\nloop backward over those positions j in the list lying to the left of i; starting at position i-1 continue this loop as long as the value at j+1 is less than the value at j</p>\n</li>\n<li><p>swap the values at positions j and j+1</p>\n</li>\n<li><p>print the current list</p>\n</li>\n</ol>\n<p>And this is the python code I came up with:</p>\n<pre><code>#define a function sort1\nmy_list=range(1,40)\nprint\nprint my_list\nnum_comparisons=0\nnum_swaps=0\nfor pos in range (0,len(my_list)-1):\n    for i in range(pos+1,len(my_list)): # starting at position i-1 continue this loop as long\n                                        # as the value at j+1 is less than the value at j\n        num_comparisons+=1\n        if my_list[i]&lt;my_list[pos]:\n           num_swaps+=1\n           [my_list[i],my_list[pos]]=[my_list[pos],my_list[i]]\n\nprint my_list\nprint\nprint num_comparisons, num_swaps\n</code></pre>\n<p>I'm not sure I did it correctly though.</p>\n"}, {"tags": ["python", "scikit-learn", "svm"], "answers": [{"tags": [], "owner": {"reputation": 15962, "user_id": 7214344, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/09fedcad60ad0dba2834ffffdd52f686?s=128&d=identicon&r=PG&f=1", "display_name": "Miriam Farber", "link": "https://stackoverflow.com/users/7214344/miriam-farber"}, "is_accepted": true, "score": 1, "last_activity_date": 1492039589, "last_edit_date": 1492039589, "creation_date": 1492039272, "answer_id": 43381149, "question_id": 43380619, "link": "https://stackoverflow.com/questions/43380619/svm-linear-classifier-strange-behaviour/43381149#43381149", "title": "SVM Linear Classifier - Strange Behaviour", "body": "<p>The reason for this behavior is that sklearn implementation of SVM includes regularization parameter. Lets see how this affects the result.</p>\n\n<p>First of all, in your second example <code>clf.predict(0.14)</code> gave <code>True</code>. In fact, even <code>clf.predict(0.1)</code> gives <code>True</code>, which may seem counter intuitive, as in your training example you classify it as <code>False</code>.</p>\n\n<p>The difference between your two examples is that in your second example, the points from your different classes are much closer to each other than in the first one. Thus, the margins of the separating hyperplane are going to be much smaller in the second example.</p>\n\n<p>Now, SVM (without regularization) tries to find a separating hyper-plane with largest possible margins, which are going to be rather small in your second example. The formula for the margins is <code>1/||w||</code> (see the top of page 7 <a href=\"http://cs229.stanford.edu/notes/cs229-notes3.pdf\" rel=\"nofollow noreferrer\">here</a>). Hence small margins means large <code>||w||</code>. SVM will minimize <code>0.5||w||^2</code> (under certain constraints, see page 7 <a href=\"http://cs229.stanford.edu/notes/cs229-notes3.pdf\" rel=\"nofollow noreferrer\">here</a>).</p>\n\n<p>However, when you add regularization parameter <code>C</code>, SVM will try to minimize <code>0.5||w||^2+C*penalty</code> (see the bottom of page 19 <a href=\"http://cs229.stanford.edu/notes/cs229-notes3.pdf\" rel=\"nofollow noreferrer\">here</a>). So it may result in decreasing <code>||w||</code> while increasing the penalty. This may increase classification error rate. </p>\n\n<p>The default regularizer in sklearn implementation of SVM is <code>C=1</code>. If you take <code>C=1000</code> instead, then <code>clf.predict(0.14)</code> will give you <code>False</code>.</p>\n"}], "owner": {"reputation": 1961, "user_id": 7022459, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/646lY.png?s=128&g=1", "display_name": "Apollys supports Monica", "link": "https://stackoverflow.com/users/7022459/apollys-supports-monica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "accepted_answer_id": 43381149, "answer_count": 1, "score": 1, "last_activity_date": 1492039589, "creation_date": 1492036037, "question_id": 43380619, "link": "https://stackoverflow.com/questions/43380619/svm-linear-classifier-strange-behaviour", "title": "SVM Linear Classifier - Strange Behaviour", "body": "<p>I must be doing something simple wrong here, but I can't figure it out.</p>\n\n<pre><code>from sklearn import svm\nclf = svm.SVC(kernel='linear')\ny = [False, True, True]\nX = [[1.0], [2.0], [3.0]]\nclf.fit(X, y)\nclf.predict(1.4)\n\nOut[324]: array([False], dtype=bool)\n</code></pre>\n\n<p>Behaves as expected... yet...</p>\n\n<pre><code>X = [[0.1], [0.2], [0.3]]\nclf.fit(X, y)\nclf.predict(0.14)\n\nOut[325]: array([True], dtype=bool)\n</code></pre>\n"}, {"tags": ["python", "list", "error-handling", "try-except", "geopy"], "comments": [{"owner": {"reputation": 14525, "user_id": 373962, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/11498b47f1326cca63f7571a72e2dd1b?s=128&d=identicon&r=PG", "display_name": "Miquel", "link": "https://stackoverflow.com/users/373962/miquel"}, "edited": false, "score": 0, "creation_date": 1492035847, "post_id": 43380568, "comment_id": 73823301, "body": "in that code, if they get printed, you have to have thrown an exception. In your manual tests, did you use the same code? I&#39;d hazard a guess the geocode method is throwing on account of some connextion error"}, {"owner": {"reputation": 53, "user_id": 3597724, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ce139e8605dbc3401ca3d016dc8e4155?s=128&d=identicon&r=PG&f=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/3597724/martin"}, "reply_to_user": {"reputation": 14525, "user_id": 373962, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/11498b47f1326cca63f7571a72e2dd1b?s=128&d=identicon&r=PG", "display_name": "Miquel", "link": "https://stackoverflow.com/users/373962/miquel"}, "edited": false, "score": 0, "creation_date": 1492118126, "post_id": 43380568, "comment_id": 73864226, "body": "The geocode was throwing an exception, but for a reason of stupidity on my part: I was using str(i) instead of str(station). Fixing this prints out each station that throws an exception, which can be reformatted into a list as I&#39;ll demonstrate in an edit to my original question."}], "answers": [{"tags": [], "owner": {"reputation": 1442, "user_id": 4020610, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-LdgzYsM5kJw/AAAAAAAAAAI/AAAAAAAAH4E/Qase_JE27jE/photo.jpg?sz=128", "display_name": "Lohmar ASHAR", "link": "https://stackoverflow.com/users/4020610/lohmar-ashar"}, "is_accepted": true, "score": 0, "last_activity_date": 1492037939, "creation_date": 1492037939, "answer_id": 43380934, "question_id": 43380568, "link": "https://stackoverflow.com/questions/43380568/returning-a-list-of-items-that-are-raising-an-attributeerror-when-using-geopy-an/43380934#43380934", "title": "Returning a list of items that are raising an AttributeError when using geopy and try/except?", "body": "<p>I expect that the \"<em>AttributeError: 'None' type has no attribute 'latitude'</em>\" is given in the line:</p>\n\n<pre><code>lat_long = (location.latitude, location.longitude)\n</code></pre>\n\n<p>thous I would transform the code in something like:</p>\n\n<pre><code>def station_errors(list_of_stations):\n    for station in list_of_stations:\n        location = geolocator.geocode(str(i))\n        coordinates.append([location.latitude, location.longitude] if location is not None else None)\n        # or coordinates.append(list(lat_long) if location is not None else [None, None])\n        # which ever comes more in handy\n    return coordinates\n\ncoords = station_errors(los)\n# and then deal with the Nones (or [None, None] s ) to \"hard code a proper address for them\" \n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 3597724, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ce139e8605dbc3401ca3d016dc8e4155?s=128&d=identicon&r=PG&f=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/3597724/martin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 0, "accepted_answer_id": 43380934, "answer_count": 1, "score": 0, "last_activity_date": 1492118358, "creation_date": 1492035685, "last_edit_date": 1492118358, "question_id": 43380568, "link": "https://stackoverflow.com/questions/43380568/returning-a-list-of-items-that-are-raising-an-attributeerror-when-using-geopy-an", "title": "Returning a list of items that are raising an AttributeError when using geopy and try/except?", "body": "<p>I am attempting to get the latitude and longitude for ~400 locations using geopy. However, many of the addresses are returning 'None' as they are either not specific enough or are intersections of streets, which is causing an \"AttributeError: 'None' type has no attribute 'latitude'\" and an exit of the for loop.</p>\n\n<p>What I would like to do is run the for loop without exiting due to error AND return a list of all of the locations prompting errors so that I can hard code a proper address for them.</p>\n\n<p>My current code is as follows:</p>\n\n<pre><code>from geopy.geocoders import Nominatim\ngeolocator = Nominatim()\ncoordinates = []\n\ndef station_errors(list_of_stations):\n    for station in list_of_stations:\n        try:\n            location = geolocator.geocode(str(i)) #line with error, used 'i' instead of 'station'\n            lat_long = (location.latitude, location.longitude)\n            coordinates.append(list(lat_long))\n        except Exception:\n            print(\"Error: %s\"%(station))\n            continue\n</code></pre>\n\n<p>However, this seems to be printing out every station regardless of whether geopy was able to assign it a latitude and longitude, as I've tried many of them manually. I only want the stations that raised an error/were unable to receive a lat/long coordinate.</p>\n\n<p>I am fairly new to 'try, except, continue' error testing, so any advice is greatly appreciated.</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>My initial error was using 'i' instead of 'station', an error which I've left in the original question. The code that I got to work and gives me the result that I want is as follows:</p>\n\n<pre><code>def station_errors(list_of_stations):\n    list_of_error_stations = []\n    for station in list_of_stations:\n        try:\n            location = geolocator.geocode(str(station + \" DC\"))\n            lat_long = (location.latitude, location.longitude)\n            coordinates.append(list(lat_long))\n        except Exception:\n            list_of_error_stations.append(station)\n            continue\n    return(list_of_error_stations)\n</code></pre>\n"}, {"tags": ["python", "asynchronous", "scripting", "operating-system", "signal-handling"], "comments": [{"owner": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 0, "creation_date": 1492107934, "post_id": 43380562, "comment_id": 73859164, "body": "is it necessary to run <code>myParsePDB</code> in a subprocess? couldn&#39;t you just write it as a normal module with functions you can call from this script instead of using <code>os.system</code>? You should be able to do <code>rm</code> functionality with <a href=\"https://docs.python.org/3/library/shutil.html#shutil.rmtree\" rel=\"nofollow noreferrer\"><code>shutil.rmtree</code></a>"}, {"owner": {"reputation": 1237, "user_id": 3781320, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/40f10b7ce3156c7372e355d0e5e498de?s=128&d=identicon&r=PG&f=1", "display_name": "RandomEli", "link": "https://stackoverflow.com/users/3781320/randomeli"}, "reply_to_user": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 0, "creation_date": 1492110090, "post_id": 43380562, "comment_id": 73860374, "body": "@TadhgMcDonald-Jensen It is necessary to run <code>myParsePDB</code>. <code>rm</code> is just a tiny part in <code>myParsePDB</code>."}], "answers": [{"tags": [], "owner": {"reputation": 1237, "user_id": 3781320, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/40f10b7ce3156c7372e355d0e5e498de?s=128&d=identicon&r=PG&f=1", "display_name": "RandomEli", "link": "https://stackoverflow.com/users/3781320/randomeli"}, "is_accepted": true, "score": 0, "last_activity_date": 1493419784, "creation_date": 1493419784, "answer_id": 43689877, "question_id": 43380562, "link": "https://stackoverflow.com/questions/43380562/python-script-cant-be-terminated-through-ctrlc-or-ctrlbreak/43689877#43689877", "title": "Python script can&#39;t be terminated through Ctrl+C or Ctrl+Break", "body": "<p>This is a general problem that could raise when dealing with signal handling. Python signal is not an exception, it's a wrapper of operating system signal. Therefore, signal processing in python depends on operating system, hardware and many conditions. However, how to deal with these problem is similar. </p>\n\n<p>According to this tutorial, I'll quote the following paragraphs: <a href=\"https://pymotw.com/2/signal/\" rel=\"nofollow noreferrer\">signal \u2013 Receive notification of asynchronous system events</a></p>\n\n<blockquote>\n  <p>Signals are an operating system feature that provide a means of\n  notifying your program of an event, and having it handled\n  asynchronously. They can be generated by the system itself, or sent\n  from one process to another. Since signals interrupt the regular flow\n  of your program, it is possible that some operations (especially I/O)\n  may produce error if a signal is received in the middle.</p>\n  \n  <p>Signals are identified by integers and are defined in the operating\n  system C headers. Python exposes the signals appropriate for the\n  platform as symbols in the signal module. For the examples below, I\n  will use SIGINT and SIGUSR1. Both are typically defined for all Unix\n  and Unix-like systems.</p>\n</blockquote>\n\n<p>In my code:</p>\n\n<p><code>os.system(\"python myParsePDB.py -i BP1.pdb -c 1 -s %s\" % step)</code> inside the for loop will be executed for a bit of time and will spend some time on I/O files. If the keyboard interrupt is passing too fast and do not catch asynchronously after writing files, the signal might be blocked in operating system, so my execution will still remain the <code>try</code> clause for loop. (Errors detected during execution are called exceptions and are not unconditionally fatal: <a href=\"https://docs.python.org/2/tutorial/errors.html\" rel=\"nofollow noreferrer\">Python Errors and Exceptions</a>).</p>\n\n<p>Therefore the simplest way to make them asynchonous is wait:</p>\n\n<pre><code>try:\n    for i in range(0,360, step):\n        os.system(\"python myParsePDB.py -i BP1.pdb -c 1 -s %s\" % step)\n        time.sleep(0.2)\nexcept KeyboardInterrupt:\n    print(\"Stop me!\")\n    sys.exit(0)\n</code></pre>\n\n<p>It might hurt performance but it guaranteed that the signal can be caught after waiting the execution of <code>os.system()</code>. You might also want to use other sync/async functions to solve the problem if better performance is required.</p>\n\n<p>For more unix signal reference, please also look at: <a href=\"http://man7.org/linux/man-pages/man7/signal.7.html\" rel=\"nofollow noreferrer\">Linux Signal Manpage</a></p>\n"}], "owner": {"reputation": 1237, "user_id": 3781320, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/40f10b7ce3156c7372e355d0e5e498de?s=128&d=identicon&r=PG&f=1", "display_name": "RandomEli", "link": "https://stackoverflow.com/users/3781320/randomeli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2004, "favorite_count": 1, "accepted_answer_id": 43689877, "answer_count": 1, "score": 0, "last_activity_date": 1493419943, "creation_date": 1492035622, "last_edit_date": 1495541396, "question_id": 43380562, "link": "https://stackoverflow.com/questions/43380562/python-script-cant-be-terminated-through-ctrlc-or-ctrlbreak", "title": "Python script can&#39;t be terminated through Ctrl+C or Ctrl+Break", "body": "<p>I have this simple python script called <code>myMain.py</code> to execute another python program automatically with incremental number, and I'm running it on CentOS 7:</p>\n\n<pre><code>#!/usr/bin/python\n\nimport os\nimport sys\nimport time\n\ndef main():\n    step_indicator = \"\"\n    arrow = \"&gt;\"\n    step = 2\n    try:\n        for i in range(0,360, step):\n            step_percentage = float(i)/360.0 * 100\n            if i % 10 == 0:\n                step_indicator += \"=\"\n            os.system(\"python myParsePDB.py -i BP1.pdb -c 1 -s %s\" % step)\n            print(\"step_percentage%s%s%.2f\" % (step_indicator,arrow,step_percentage)+\"%\")\n    except KeyboardInterrupt:\n        print(\"Stop me!\")\n        sys.exit(0)\n\n\nif __name__ == \"__main__\":\n    main()\n</code></pre>\n\n<p>For now I only know this script is single thread safe, but I can't terminate it with <code>Ctrl+C</code> keyboard interruption.</p>\n\n<p>I have read some relative questions: such as <a href=\"https://stackoverflow.com/a/11816038/3781320\">Cannot kill Python script with Ctrl-C</a> and <a href=\"https://stackoverflow.com/q/1364173/3781320\">Stopping python using ctrl+c</a> I realized that <code>Ctrl+Z</code> does not kill the process, it only pauses the process and keep the process in background. <code>Ctrl+Break</code> does work for my case either, I think it only terminates my main thread but keeps the child process. </p>\n\n<p>I also noticed that calling <code>os.system()</code> will spawn a child process from the current executing process. At the same time, I also have <code>os</code> file I/O functions and <code>os.system(\"rm -rf legacy/*\")</code> will be invoked in <code>myParsePDB.py</code> which means this <code>myParsePDB.py</code> child process will spawn child process as well. Then, if I want to catch <code>Ctrl+C</code> in <code>myMain.py</code>, should I daemon only <code>myMain.py</code> or should I daemon each process when they spawn?</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 3135, "user_id": 4372759, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/6zzjk.jpg?s=128&g=1", "display_name": "flybonzai", "link": "https://stackoverflow.com/users/4372759/flybonzai"}, "is_accepted": false, "score": 0, "last_activity_date": 1492037568, "creation_date": 1492037568, "answer_id": 43380884, "question_id": 43380515, "link": "https://stackoverflow.com/questions/43380515/pandas-how-to-stack-my-data-correctly/43380884#43380884", "title": "pandas: How to stack my data correctly?", "body": "<p>I ended up finding a solution, but please let me know how I can improve it.</p>\n\n<pre><code>        cac_df = pd.DataFrame(data=vals)\n        cac_df.rename(index=cac_df[0], inplace=True)\n        del cac_df[0]\n        cac_df = cac_df.rename(columns=cac_df.loc['Segment']).drop('Segment')\n        cac_df = cac_df.applymap(lambda x: None if not x or x == 'N/A' else x)\n        cac_df = pd.DataFrame(\n            cac_df.dropna(axis=1, how='all').stack()\n        )\n</code></pre>\n\n<p>The stack threw me for a loop since it returned a <code>Series</code> instead of a <code>DataFrame</code>, which is noted in the docs if you only have a single level of column hierarchy.</p>\n"}, {"comments": [{"owner": {"reputation": 3135, "user_id": 4372759, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/6zzjk.jpg?s=128&g=1", "display_name": "flybonzai", "link": "https://stackoverflow.com/users/4372759/flybonzai"}, "edited": false, "score": 0, "creation_date": 1492115884, "post_id": 43380897, "comment_id": 73863281, "body": "Your solutions worked flawlessly, I wondered if you could explain how the line <code>d1 = pd.Series(v.ravel(), mux).reset_index(name=&#39;Value&#39;)</code> worked?  The <code>.reset_index</code> portion is throwing me off."}], "tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": true, "score": 2, "last_activity_date": 1492116350, "last_edit_date": 1492116350, "creation_date": 1492037667, "answer_id": 43380897, "question_id": 43380515, "link": "https://stackoverflow.com/questions/43380515/pandas-how-to-stack-my-data-correctly/43380897#43380897", "title": "pandas: How to stack my data correctly?", "body": "<pre><code>v = df.values[1:, 1:].astype(float)\n\nmux = pd.MultiIndex.from_product(\n    [df.iloc[1:, 0], df.iloc[0, 1:]],\n    names=['Segment', 'Month']\n)\n\nd1 = pd.Series(v.ravel(), mux).reset_index(name='Value')\nprint(d1)\n</code></pre>\n\n<hr>\n\n<pre><code>   Segment   Month  Value\n0        A  Nov-12    NaN\n1        A  Dec-12    NaN\n2        A  Jan-13    NaN\n3        A  Feb-13    NaN\n4        A  Mar-13    NaN\n5        A  Apr-13    NaN\n6        A  May-13    NaN\n7        B  Nov-12    NaN\n8        B  Dec-12    NaN\n9        B  Jan-13    NaN\n10       B  Feb-13    NaN\n11       B  Mar-13    NaN\n12       B  Apr-13    NaN\n13       B  May-13    NaN\n14       C  Nov-12    NaN\n15       C  Dec-12    NaN\n16       C  Jan-13    NaN\n17       C  Feb-13    NaN\n18       C  Mar-13    NaN\n19       C  Apr-13    NaN\n20       C  May-13    NaN\n21       D  Nov-12    NaN\n22       D  Dec-12    NaN\n23       D  Jan-13    NaN\n24       D  Feb-13    NaN\n25       D  Mar-13    NaN\n26       D  Apr-13    NaN\n27       D  May-13    NaN\n28   Total  Nov-12    NaN\n29   Total  Dec-12    NaN\n30   Total  Jan-13    NaN\n31   Total  Feb-13    NaN\n32   Total  Mar-13    NaN\n33   Total  Apr-13    NaN\n34   Total  May-13    NaN\n</code></pre>\n\n<hr>\n\n<p><strong><em>Explanation</em></strong>  </p>\n\n<pre><code># Your data obviously has an index in the first column\n# and column headers in the first row\n# I grab the underlyting `numpy` array\n# from the 2nd column and 2nd row onward\n# and convert to float\nv = df.values[1:, 1:].astype(float)\n\n# I'm going to create a `pd.MultiIndex` to enable me\n# to unstack the `pd.Series` I'll create\n# the first level of the index will be that first column\n# that was obviously the index\n# the second level will be the first row that was\n# obviously the column headers\n# the trick here is that I use `from_product`\n# which gives me every combination of those arrays\n# `ravel` unwinds or flattens the matrix and now\n# lines up with this `pd.MultiIndex` that has every combination\n# of row and column labels\nmux = pd.MultiIndex.from_product(\n    [df.iloc[1:, 0], df.iloc[0, 1:]],\n    names=['Segment', 'Month']\n)\n\n# I construct the `pd.Series` and `unstack` to make the matrix\n# `reset_index` takes those levels of the index and pushes them out\n# the the dataframe data part.  `name='Value'` just makes sure the \n# values of the series get a column name\nd1 = pd.Series(v.ravel(), mux).reset_index(name='Value')\nprint(d1)\n</code></pre>\n"}], "owner": {"reputation": 3135, "user_id": 4372759, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/6zzjk.jpg?s=128&g=1", "display_name": "flybonzai", "link": "https://stackoverflow.com/users/4372759/flybonzai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 43380897, "answer_count": 2, "score": 1, "last_activity_date": 1492116350, "creation_date": 1492035357, "question_id": 43380515, "link": "https://stackoverflow.com/questions/43380515/pandas-how-to-stack-my-data-correctly", "title": "pandas: How to stack my data correctly?", "body": "<p>I have a <code>dataframe</code> that when it's initially loaded with a list of lists looks like this:</p>\n\n<pre><code>              0       1       2  3       4       5       6       7       8   \\\n0        Segment  Nov-12  Dec-12     Jan-13  Feb-13  Mar-13  Apr-13  May-13   \n1           A                        N/A     N/A     N/A     N/A     N/A   \n2           B                        N/A     N/A     N/A     N/A     N/A   \n3           C                        N/A     N/A     N/A     N/A     N/A   \n4           D                        N/A     N/A     N/A     N/A     N/A   \n5           Total                    N/A     N/A     N/A     N/A     N/A   \n</code></pre>\n\n<p>The values under each month will be float values.  I want to pivot the <code>dataframe</code> so I end up with something like:</p>\n\n<pre><code>  Segment Month Value\n0 A       month value\n1 A       month value\n2 B       month value\n3 B       month value\netc...\n</code></pre>\n\n<p>What would be the best way to do this?</p>\n"}, {"tags": ["python", "pandas", "numpy"], "answers": [{"tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": false, "score": 3, "last_activity_date": 1492035402, "creation_date": 1492035402, "answer_id": 43380526, "question_id": 43380500, "link": "https://stackoverflow.com/questions/43380500/averaging-indices-of-table-using-pandas-and-numpy/43380526#43380526", "title": "Averaging indices of table using pandas and numpy", "body": "<p>try <code>df.mean(1)</code> with <code>assign</code>.  <code>df.mean(1)</code> tells pandas to calculate the mean along <code>axis=1</code> (rows).  <code>axis=0</code> is the default.</p>\n\n<pre><code>df.assign(Mean=df.mean(1))\n</code></pre>\n\n<p>This produces a copy of <code>df</code> with added column.</p>\n\n<p>To alter the existing dataframe</p>\n\n<pre><code>df['Mean'] = df.mean(1)\n</code></pre>\n\n<hr>\n\n<p><strong><em>demo</em></strong>  </p>\n\n<pre><code>tab.assign(Mean=tab.mean(1))\n\n   A  B  Mean\n0  2  4   3.0\n1  5  6   5.5\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "is_accepted": false, "score": 2, "last_activity_date": 1492036069, "last_edit_date": 1492036069, "creation_date": 1492035537, "answer_id": 43380546, "question_id": 43380500, "link": "https://stackoverflow.com/questions/43380500/averaging-indices-of-table-using-pandas-and-numpy/43380546#43380546", "title": "Averaging indices of table using pandas and numpy", "body": "<p>A NumPy solution would be to work with the underlying array data for performance -</p>\n\n<pre><code>tab['average'] = tab.values.mean(1)\n</code></pre>\n\n<p>To choose specific columns, like <code>'A'</code> and <code>'B'</code> -</p>\n\n<pre><code>tab['average'] = tab[['A','B']].values.mean(1)\n</code></pre>\n\n<p>Runtime test -</p>\n\n<pre><code>In [41]: tab = pd.DataFrame(np.random.randint(0,9,(10000,10)))\n\n# @piRSquared's soln\nIn [42]: %timeit tab.assign(Mean=tab.mean(1))\n1000 loops, best of 3: 615 \u00b5s per loop\n\nIn [43]: tab = pd.DataFrame(np.random.randint(0,9,(10000,10)))\n\nIn [44]: %timeit tab['average'] = tab.values.mean(1)\n1000 loops, best of 3: 297 \u00b5s per loop\n\n\nIn [37]: tab = pd.DataFrame(np.random.randint(0,9,(10000,100)))\n\n# @piRSquared's soln\nIn [38]: %timeit tab.assign(Mean=tab.mean(1))\n100 loops, best of 3: 4.71 ms per loop\n\nIn [39]: tab = pd.DataFrame(np.random.randint(0,9,(10000,100)))\n\nIn [40]: %timeit tab['average'] = tab.values.mean(1)\n100 loops, best of 3: 3.6 ms per loop\n</code></pre>\n"}], "owner": {"reputation": 700, "user_id": 2822693, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/hZp9e.jpg?s=128&g=1", "display_name": "user2822693", "link": "https://stackoverflow.com/users/2822693/user2822693"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1492036069, "creation_date": 1492035295, "question_id": 43380500, "link": "https://stackoverflow.com/questions/43380500/averaging-indices-of-table-using-pandas-and-numpy", "title": "Averaging indices of table using pandas and numpy", "body": "<p>I have been playing with pandas for a few hours now, I was wondering whether there is another faster way to add an extra column to your table which consists of the average of that row? I am creating a new list which contains the mean and then I am incorporating it in the data frame.</p>\n\n<p>This is my code:</p>\n\n<pre><code>import numpy as np\nimport pandas as pd\nuserdata={\"A\":[2,5],\"B\":[4,6]}\ntab=pd.DataFrame((userdata), columns=[\"A\",\"B\"])\nlst=[np.mean([tab.loc[i,\"A\"],tab.loc[i,\"B\"]]) for i in range(len(tab.index))]\ntab[\"Average of A and B\"]=pd.DataFrame(lst)\ntab\n</code></pre>\n"}, {"tags": ["python", "regex", "dataframe"], "comments": [{"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1492035346, "post_id": 43380494, "comment_id": 73823113, "body": "Note <code>\\S</code> matches a non-whitespace, not <code>S</code>."}, {"owner": {"reputation": 402, "user_id": 5021138, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/jOIZ0.jpg?s=128&g=1", "display_name": "Shweta Kamble", "link": "https://stackoverflow.com/users/5021138/shweta-kamble"}, "reply_to_user": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1492035656, "post_id": 43380494, "comment_id": 73823229, "body": "This regular expression works well on one sentence, fails while iterating over the rows in the dataframe"}, {"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1492036049, "post_id": 43380494, "comment_id": 73823368, "body": "Try <code>df[&#39;b&#39;] = df[&#39;a&#39;].str.findall(r&#39;^SI_\\w+&#39;&#39;).apply(&#39;,&#39;.join)</code> (<code>.apply(&#39;,&#39;.join)</code> is redundant, but will return just strings)."}, {"owner": {"reputation": 402, "user_id": 5021138, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/jOIZ0.jpg?s=128&g=1", "display_name": "Shweta Kamble", "link": "https://stackoverflow.com/users/5021138/shweta-kamble"}, "reply_to_user": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1492036838, "post_id": 43380494, "comment_id": 73823631, "body": "Yes that worked thank you!, I think &#39;str&#39; is what I was missing, the rows were not being considering as strings while iterating before."}], "answers": [{"tags": [], "owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 3, "last_activity_date": 1492037239, "creation_date": 1492037239, "answer_id": 43380832, "question_id": 43380494, "link": "https://stackoverflow.com/questions/43380494/iterating-through-dataframe-using-regular-expression-python/43380832#43380832", "title": "Iterating through dataframe using regular expression python", "body": "<p>You may use something like</p>\n\n<pre><code>df['b'] = df['a'].str.findall(r'^SI_\\w+')\n</code></pre>\n\n<p>Using <code>.str</code> will force the contents to be parsed as string. </p>\n\n<p>The <code>^SI_\\w+</code> pattern matches <code>SI_</code> and then 1+ word chars only at the beginning of the string (due to <code>^</code>) - it looks like the entries you are after follow this pattern. You may add <code>.apply(','.join)</code> or something like that at the end to get string data in the resulting column.</p>\n"}], "owner": {"reputation": 402, "user_id": 5021138, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/jOIZ0.jpg?s=128&g=1", "display_name": "Shweta Kamble", "link": "https://stackoverflow.com/users/5021138/shweta-kamble"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1792, "favorite_count": 1, "accepted_answer_id": 43380832, "answer_count": 1, "score": 2, "last_activity_date": 1492037239, "creation_date": 1492035269, "question_id": 43380494, "link": "https://stackoverflow.com/questions/43380494/iterating-through-dataframe-using-regular-expression-python", "title": "Iterating through dataframe using regular expression python", "body": "<p>I a trying parse SI type patterns in another column in a DF or in a list\nI tried 2 things:</p>\n\n<pre><code>|    a             |\n-------------------+\n| Builder          |\n| left             |\n| SI_NAME lide_on  |\n| SI_ID 456        |\n| Scheduling Info  |\n\ndf['b']= df['a'].apply(lambda row: re.findall('\\SI_\\w+\\s',row))  \n</code></pre>\n\n<p>and </p>\n\n<pre><code>list_DF=[]\nfor index,row in df.iterrows():\n    list_DF.append(re.findall('\\SI_\\w+\\s',row[0]))\n</code></pre>\n\n<p>I am not able to get the result and the first one returned an empty list in the new column</p>\n"}, {"tags": ["python", "numpy", "tensorflow"], "answers": [{"tags": [], "owner": {"reputation": 15962, "user_id": 7214344, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/09fedcad60ad0dba2834ffffdd52f686?s=128&d=identicon&r=PG&f=1", "display_name": "Miriam Farber", "link": "https://stackoverflow.com/users/7214344/miriam-farber"}, "is_accepted": true, "score": 1, "last_activity_date": 1492036907, "last_edit_date": 1492036907, "creation_date": 1492036560, "answer_id": 43380718, "question_id": 43380484, "link": "https://stackoverflow.com/questions/43380484/tensorflow-linear-regression-with-multiple-inputs-returns-nans/43380718#43380718", "title": "TensorFlow: Linear Regression with multiple inputs returns NaNs", "body": "<p>You need to add <code>keep_dims=True</code> inside your definition of <code>linear_model</code>. That is,</p>\n\n<pre><code>linear_model = tf.reduce_sum(x * w + b, axis=1, name='out',keep_dims=True)\n</code></pre>\n\n<p>The reason is that otherwise the result is \"flattened\", and you cannot subtract <code>y</code> from it. </p>\n\n<p>For example,</p>\n\n<pre><code>'x' is [[1,2,3],\n        [4,5,6]]   \ntf.reduce_sum(x, axis=1) is [6, 15]   \ntf.reduce_sum(x, axis=1, keep_dims=True) is [[6], [15]]\n</code></pre>\n"}], "owner": {"reputation": 5903, "user_id": 2597143, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6c563c6b8247d907f6fad654da22218d?s=128&d=identicon&r=PG", "display_name": "ESala", "link": "https://stackoverflow.com/users/2597143/esala"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 667, "favorite_count": 1, "accepted_answer_id": 43380718, "answer_count": 1, "score": 2, "last_activity_date": 1492036907, "creation_date": 1492035196, "last_edit_date": 1492035714, "question_id": 43380484, "link": "https://stackoverflow.com/questions/43380484/tensorflow-linear-regression-with-multiple-inputs-returns-nans", "title": "TensorFlow: Linear Regression with multiple inputs returns NaNs", "body": "<p>This is my first attemp at TensorFlow: I am building a <strong>Linear Regression</strong> model with <strong>multiple inputs</strong>.</p>\n\n<p>The problem is that <strong>the result is always NaN</strong>, and I suspect that it is because I am a complete noob with matrix operations using numpy and tensorflow (matlab background hehe).</p>\n\n<p>Here is the code:</p>\n\n<pre><code>import numpy as np\nimport tensorflow as tf\n\nN_INP = 2\nN_OUT = 1\n\n# Model params\nw = tf.Variable(tf.zeros([1, N_INP]), name='w')\nb = tf.Variable(tf.zeros([1, N_INP]), name='b')\n\n# Model input and output\nx = tf.placeholder(tf.float32, [None, N_INP], name='x')\ny = tf.placeholder(tf.float32, [None, N_OUT], name='y')\nlinear_model = tf.reduce_sum(x * w + b, axis=1, name='out')\n\n# Loss as sum(error^2)\nloss = tf.reduce_sum(tf.square(linear_model - y), name='loss')\n\n# Create optimizer\noptimizer = tf.train.GradientDescentOptimizer(0.01)\ntrain = optimizer.minimize(loss, name='train')\n\n# Define training data\nw_real = np.array([-1, 4])\nb_real = np.array([1, -5])\nx_train = np.array([[1, 2, 3, 4], [0, 0.5, 1, 1.5]]).T\ny_train = np.sum(x_train * w_real + b_real, 1)[np.newaxis].T\nprint('Real X:\\n', x_train)\nprint('Real Y:\\n', y_train)\n\n# Create session and init parameters\nsess = tf.Session()\nsess.run(tf.global_variables_initializer())\n\n# Training loop\ntrain_data = {x: x_train, y: y_train}\nfor i in range(1000):\n    sess.run(train, train_data)\n\n# Eval solution\nw_est, b_est, curr_loss, y_pred = sess.run([w, b, loss, linear_model], train_data)\nprint(\"w: %s b: %s loss: %s\" % (w_est, b_est, curr_loss))\nprint(\"y_pred: %s\" % (y_pred,))\n</code></pre>\n\n<p>And here is the output:</p>\n\n<pre><code>Real X:\n [[ 1.   0. ]\n [ 2.   0.5]\n [ 3.   1. ]\n [ 4.   1.5]]\nReal Y:\n [[-5.]\n [-4.]\n [-3.]\n [-2.]]\n\nw: [[ nan  nan]] b: [[ nan  nan]] loss: nan\ny_pred: [ nan  nan  nan  nan]\n</code></pre>\n"}, {"tags": ["python", "mocking"], "comments": [{"owner": {"reputation": 1487, "user_id": 3901060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f386743bd29ff8c0ab6e1637938a795?s=128&d=identicon&r=PG&f=1", "display_name": "FamousJameous", "link": "https://stackoverflow.com/users/3901060/famousjameous"}, "edited": false, "score": 0, "creation_date": 1492035773, "post_id": 43380455, "comment_id": 73823276, "body": "Shouldn&#39;t <code>mockedCar.return_value.poweredBy.return_value.getEngineType.&zwnj;&#8203;return_value</code> be <code>mockedCar.return_value.poweredBy.return_value.engineType.ret&zwnj;&#8203;urn_value</code>?"}, {"owner": {"reputation": 442, "user_id": 753707, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/b66e1d7efe9b5c15982928163d72e3e7?s=128&d=identicon&r=PG", "display_name": "DUFF", "link": "https://stackoverflow.com/users/753707/duff"}, "reply_to_user": {"reputation": 1487, "user_id": 3901060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f386743bd29ff8c0ab6e1637938a795?s=128&d=identicon&r=PG&f=1", "display_name": "FamousJameous", "link": "https://stackoverflow.com/users/3901060/famousjameous"}, "edited": false, "score": 0, "creation_date": 1492060072, "post_id": 43380455, "comment_id": 73829542, "body": "Then the results of getEngineType is an &quot;empty&quot; Mock:   &lt;MagicMock name=&#39;Car.poweredBy().engineType()&#39; id=&#39;350511312&#39;&gt; not &quot;SmallAndSlow&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 1487, "user_id": 3901060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f386743bd29ff8c0ab6e1637938a795?s=128&d=identicon&r=PG&f=1", "display_name": "FamousJameous", "link": "https://stackoverflow.com/users/3901060/famousjameous"}, "is_accepted": false, "score": 0, "last_activity_date": 1492107471, "creation_date": 1492107471, "answer_id": 43399161, "question_id": 43380455, "link": "https://stackoverflow.com/questions/43380455/python-how-do-you-mock-a-the-result-of-a-dependant-function-call-and-specify-w/43399161#43399161", "title": "Python : How do you mock a the result of a dependant function call and specify what it returns", "body": "<p>Since you start with a Car <em>class</em> mock and you set the <code>return_value</code> chain from there, you need to actually instantiate a Car:</p>\n\n<pre><code>import mock\nclass Engine(object):\n    def engineType(self):\n        return 'BigandFast'\n\nclass Car(object):\n     def poweredBy(self):\n         return Engine()\n\ndef getEngineType(aCar):\n    return aCar.poweredBy().engineType()\n\n@mock.patch('__main__.Car')\ndef mockedCar(mockedCar):\n    mockedCar.return_value.poweredBy.return_value.engineType.return_value = 'SmallAndSlow'\n    c = Car()\n    print getEngineType(c)\n\nmockedCar()\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>SmallAndSlow\n</code></pre>\n\n<p>So, you start with a Car class mock, then you get a return value of a Car object mock, then a poweredBy method mock, then an engineType method mock and finally the return value.</p>\n\n<p>Unfortunately, I probably didn't use the right vocabulary here, but the gist is: <code>mockedCar</code> is a mock of the <code>Car</code> <em>class</em>, you need to instantiate it to access the <code>return_value</code> that you set.</p>\n"}], "owner": {"reputation": 442, "user_id": 753707, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/b66e1d7efe9b5c15982928163d72e3e7?s=128&d=identicon&r=PG", "display_name": "DUFF", "link": "https://stackoverflow.com/users/753707/duff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1492107471, "creation_date": 1492035019, "question_id": 43380455, "link": "https://stackoverflow.com/questions/43380455/python-how-do-you-mock-a-the-result-of-a-dependant-function-call-and-specify-w", "title": "Python : How do you mock a the result of a dependant function call and specify what it returns", "body": "<p>I\u2019m trying to mock the return value from a nested function call. This should be simple, but it\u2019s not working.\nSo I have a Car class that has a poweredBy() member function that returns an instance of the Engine class.\nThe Engine class has a member getEngineType() that returns the string 'BigandFast'.</p>\n\n<pre><code>class Engine(object):\n    def engineType(self):\n        return 'BigandFast'\n\nclass Car(object):\n     def poweredBy(self):\n         return Engine()\n</code></pre>\n\n<p>so: Car().poweredBy().engineType() returns 'BigandFast'</p>\n\n<p>I have a function getEngineType() that takes a car and returns the engine type:</p>\n\n<pre><code>def getEngineType(aCar):         \n    return aCar.poweredBy().engineType()\n</code></pre>\n\n<p>I\u2019d like to mock the getEngineType() function so I can change the result:</p>\n\n<pre><code>@mock.patch('testing.scratch.mock_test.Car')\ndef mockedCar(mockedCar):\n mockedCar.return_value.poweredBy.return_value.getEngineType.return_value = 'SmallAndSlow' \n print getEngineType(mockedCar)\n</code></pre>\n\n<p>But this still returns 'BigandFast'. The line :</p>\n\n<p>mockedCar.return_value.poweredBy.return_value.getEngineType.return_value  = 'SmallAndSlow' </p>\n\n<p>does not have any impact on the mocked object that I can see in the debugger.\nSo my questions are:</p>\n\n<ol>\n<li><p>How do you specify the return value of engineType() in the mock</p></li>\n<li><p>How/Would the syntax be different if the Car was not passed into\ngetEngineType() as a parameter but generated inside the function.</p></li>\n</ol>\n"}, {"tags": ["python", "python-3.x", "pandas"], "comments": [{"owner": {"reputation": 1945, "user_id": 3051715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2e8d963cd79494b6068fb827e4f11b0?s=128&d=identicon&r=PG&f=1", "display_name": "tmrlvi", "link": "https://stackoverflow.com/users/3051715/tmrlvi"}, "edited": false, "score": 0, "creation_date": 1492157388, "post_id": 43380448, "comment_id": 73874708, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/26763344/convert-pandas-column-to-datetime\">Convert Pandas Column to DateTime</a>"}], "answers": [{"tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": true, "score": 1, "last_activity_date": 1492035072, "creation_date": 1492035072, "answer_id": 43380467, "question_id": 43380448, "link": "https://stackoverflow.com/questions/43380448/converting-string-to-datetime-object-in-pandas/43380467#43380467", "title": "Converting string to datetime object in pandas", "body": "<p>Assuming you dataframe is <code>df</code></p>\n\n<pre><code>df.iloc[pd.to_datetime(df.SubmitTime).argsort()]\n</code></pre>\n\n<p>This leaves your dataframe intact, <code>'SubmitTime'</code> remains strings</p>\n\n<p>Otherwise, I'd convert <code>'SubmitTime'</code> to datetime and sort</p>\n\n<pre><code>df.assign(SubmitTime=pd.to_datetime(df.SubmitTime)).sort_values('SubmitTime')\n</code></pre>\n"}], "owner": {"reputation": 1797, "user_id": 1115277, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1cac16c4810b19ce83f367e391eea801?s=128&d=identicon&r=PG", "display_name": "amaatouq", "link": "https://stackoverflow.com/users/1115277/amaatouq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 418, "favorite_count": 0, "accepted_answer_id": 43380467, "answer_count": 1, "score": 0, "last_activity_date": 1492035072, "creation_date": 1492034992, "question_id": 43380448, "link": "https://stackoverflow.com/questions/43380448/converting-string-to-datetime-object-in-pandas", "title": "Converting string to datetime object in pandas", "body": "<p>I have a column called 'SubmitTime' which is a string per observation. An example would be:  'Wed Apr 12 14:42:23 PDT 2017'</p>\n\n<p>I need to sort this dataframe based on submission time (the ones that submitted first, are on top). How can I convert this column into datetime and sort the dataframe in Pandas?</p>\n"}, {"tags": ["python", "selenium", "selenium-webdriver"], "answers": [{"comments": [{"owner": {"reputation": 1571, "user_id": 7692921, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/5166b1f22d8a56de3e2918a271066460?s=128&d=identicon&r=PG&f=1", "display_name": "sprogissd", "link": "https://stackoverflow.com/users/7692921/sprogissd"}, "edited": false, "score": 0, "creation_date": 1492037222, "post_id": 43380490, "comment_id": 73823766, "body": "How do I grab the HTML code related to the tooltip with Selenium to use it with BeautifulSoup?"}, {"owner": {"reputation": 1571, "user_id": 7692921, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/5166b1f22d8a56de3e2918a271066460?s=128&d=identicon&r=PG&f=1", "display_name": "sprogissd", "link": "https://stackoverflow.com/users/7692921/sprogissd"}, "edited": false, "score": 0, "creation_date": 1492038257, "post_id": 43380490, "comment_id": 73824050, "body": "Beautiful! Thank you! I got an error message saying I should change <code>soup = BeautifulSoup(html)</code> to <code>soup = BeautifulSoup(html, &quot;html.parser&quot;)</code>, but after I did that, everything worked."}, {"owner": {"reputation": 8411, "user_id": 2399775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29a2523b23d09e0bfc15d3a77e505271?s=128&d=identicon&r=PG", "display_name": "wpercy", "link": "https://stackoverflow.com/users/2399775/wpercy"}, "reply_to_user": {"reputation": 1571, "user_id": 7692921, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/5166b1f22d8a56de3e2918a271066460?s=128&d=identicon&r=PG&f=1", "display_name": "sprogissd", "link": "https://stackoverflow.com/users/7692921/sprogissd"}, "edited": false, "score": 0, "creation_date": 1492038406, "post_id": 43380490, "comment_id": 73824098, "body": "Yeah that&#39;s actually only a warning, you can completely ignore it and everything will, more likely than not, work as expected."}, {"owner": {"reputation": 1571, "user_id": 7692921, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/5166b1f22d8a56de3e2918a271066460?s=128&d=identicon&r=PG&f=1", "display_name": "sprogissd", "link": "https://stackoverflow.com/users/7692921/sprogissd"}, "edited": false, "score": 0, "creation_date": 1492038829, "post_id": 43380490, "comment_id": 73824203, "body": "Could you suggest how to change your code if I have three &lt;tr&gt; under &lt;tbody&gt;? So I have three lines of text inside of the tooltip and the needed result is three string variables."}, {"owner": {"reputation": 8411, "user_id": 2399775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29a2523b23d09e0bfc15d3a77e505271?s=128&d=identicon&r=PG", "display_name": "wpercy", "link": "https://stackoverflow.com/users/2399775/wpercy"}, "reply_to_user": {"reputation": 1571, "user_id": 7692921, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/5166b1f22d8a56de3e2918a271066460?s=128&d=identicon&r=PG&f=1", "display_name": "sprogissd", "link": "https://stackoverflow.com/users/7692921/sprogissd"}, "edited": false, "score": 0, "creation_date": 1492095554, "post_id": 43380490, "comment_id": 73852297, "body": "you can use <code>.find_all(&#39;tr&#39;)</code> which will give you a list of table rows, then use a list comprehension to extract the text from each. I&#39;ve updated the answer to reflect how to do that."}, {"owner": {"reputation": 1571, "user_id": 7692921, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/5166b1f22d8a56de3e2918a271066460?s=128&d=identicon&r=PG&f=1", "display_name": "sprogissd", "link": "https://stackoverflow.com/users/7692921/sprogissd"}, "edited": false, "score": 0, "creation_date": 1492103647, "post_id": 43380490, "comment_id": 73857051, "body": "I actually used <code>tooltips = table.find_all(&#39;tbody&#39;)</code> instead of <code>tooltips = table.find_all(&#39;tr&#39;)</code>, and it seemed to work well."}, {"owner": {"reputation": 8411, "user_id": 2399775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29a2523b23d09e0bfc15d3a77e505271?s=128&d=identicon&r=PG", "display_name": "wpercy", "link": "https://stackoverflow.com/users/2399775/wpercy"}, "reply_to_user": {"reputation": 1571, "user_id": 7692921, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/5166b1f22d8a56de3e2918a271066460?s=128&d=identicon&r=PG&f=1", "display_name": "sprogissd", "link": "https://stackoverflow.com/users/7692921/sprogissd"}, "edited": false, "score": 0, "creation_date": 1492104354, "post_id": 43380490, "comment_id": 73857420, "body": "yeah that could also work because the only text in the <code>tbody</code> is the text in the <code>tr</code>, so it this case it&#39;s equivalent."}], "tags": [], "owner": {"reputation": 8411, "user_id": 2399775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29a2523b23d09e0bfc15d3a77e505271?s=128&d=identicon&r=PG", "display_name": "wpercy", "link": "https://stackoverflow.com/users/2399775/wpercy"}, "is_accepted": true, "score": 1, "last_activity_date": 1492095720, "last_edit_date": 1492095720, "creation_date": 1492035246, "answer_id": 43380490, "question_id": 43380350, "link": "https://stackoverflow.com/questions/43380350/how-to-get-text-from-tooltip-with-no-attributes-using-selenium-webdriver-with-py/43380490#43380490", "title": "How to get text from tooltip with no attributes using Selenium Webdriver with Python?", "body": "<p>You can grab the table and then grab the first instance of <code>&lt;tr&gt;</code></p>\n\n<pre><code>from bs4 import BeautifulSoup\nfrom selenium import webdriver\n\ndriver = webdriver.Firefox()\ndriver.get(URL)\nhtml = driver.page_source # this is how you get the HTML\n\nsoup = BeautifulSoup(html)\ntable = soup.find('table', class_='rdo-table-tooltip')\ntooltip = table.find('tr')\ntext = tooltip.text\n</code></pre>\n\n<p><code>text</code> will have a lot of extra whitespace because of how the HTML is formatted, but you can strip that out - just split on all whitespace and then re-join the elements like this</p>\n\n<pre><code>final_text = ' '.join(text.split())\nprint final_text\n# \u25cf Client Book Revenue $20,966,618\n</code></pre>\n\n<p>For multiple <code>&lt;tr&gt;</code>s you can use <code>.find_all('tr')</code> and then use a list comprehension to get a list of the contents of the rows. It would look something like this</p>\n\n<pre><code>soup = BeautifulSoup(html)\ntable = soup.find('table', class_='rdo-table-tooltip')\ntooltips = table.find_all('tr')\ntext = [' '.join(tooltip.text.split()) for tooltip in tooltips]\n</code></pre>\n\n<p>Then text will be a list of strings containing the text from each <code>&lt;tr&gt;</code></p>\n"}, {"comments": [{"owner": {"reputation": 8411, "user_id": 2399775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29a2523b23d09e0bfc15d3a77e505271?s=128&d=identicon&r=PG", "display_name": "wpercy", "link": "https://stackoverflow.com/users/2399775/wpercy"}, "edited": false, "score": 0, "creation_date": 1492037377, "post_id": 43380666, "comment_id": 73823813, "body": "<a href=\"http://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags\" title=\"regex match open tags except xhtml self contained tags\">stackoverflow.com/questions/1732348/&hellip;</a>"}, {"owner": {"reputation": 1, "user_id": 7811301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1941eaf5a8d9605da075421a4f160f2c?s=128&d=identicon&r=PG&f=1", "display_name": "Paprike", "link": "https://stackoverflow.com/users/7811301/paprike"}, "reply_to_user": {"reputation": 8411, "user_id": 2399775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29a2523b23d09e0bfc15d3a77e505271?s=128&d=identicon&r=PG", "display_name": "wpercy", "link": "https://stackoverflow.com/users/2399775/wpercy"}, "edited": false, "score": 0, "creation_date": 1492037640, "post_id": 43380666, "comment_id": 73823883, "body": "Interesting! Thanks for linking."}], "tags": [], "owner": {"reputation": 1, "user_id": 7811301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1941eaf5a8d9605da075421a4f160f2c?s=128&d=identicon&r=PG&f=1", "display_name": "Paprike", "link": "https://stackoverflow.com/users/7811301/paprike"}, "is_accepted": false, "score": 0, "last_activity_date": 1492037229, "last_edit_date": 1492037229, "creation_date": 1492036275, "answer_id": 43380666, "question_id": 43380350, "link": "https://stackoverflow.com/questions/43380350/how-to-get-text-from-tooltip-with-no-attributes-using-selenium-webdriver-with-py/43380666#43380666", "title": "How to get text from tooltip with no attributes using Selenium Webdriver with Python?", "body": "<p>As an alternative you could use re.findall to return all the instances of text between  tags. This will involve some cleaning up afterwards but I have found it pretty handy in general when working with Selenium.</p>\n\n<pre><code>import re\n\ntooltips = re.findall('&lt;tr&gt;(.*?)&lt;tr&gt;', html.replace('\\n', ''))\n\nfor tooltip in tooltips:\n    print tooltip\n</code></pre>\n"}], "owner": {"reputation": 1571, "user_id": 7692921, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/5166b1f22d8a56de3e2918a271066460?s=128&d=identicon&r=PG&f=1", "display_name": "sprogissd", "link": "https://stackoverflow.com/users/7692921/sprogissd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1216, "favorite_count": 0, "accepted_answer_id": 43380490, "answer_count": 2, "score": 0, "last_activity_date": 1492095720, "creation_date": 1492034503, "question_id": 43380350, "link": "https://stackoverflow.com/questions/43380350/how-to-get-text-from-tooltip-with-no-attributes-using-selenium-webdriver-with-py", "title": "How to get text from tooltip with no attributes using Selenium Webdriver with Python?", "body": "<p>I have a web element with a tooltip that shows the following message: \n\u25cf Client Book Revenue    $20,966,618</p>\n\n<p>The HTML code for that tooltip is below. I am able to hover over the web element using Selenium Webdriver which makes the tooltip visible, but I can't figure out how to get the text from it. Could somebody please help?</p>\n\n<pre><code>&lt;div class=\"highcharts-tooltip\" style=\"position: absolute; left: 755px; top: 0px; display: block; opacity: 1; pointer-events: none; visibility: visible;\"&gt;\n    &lt;span style=\"position: absolute; font-family: \"Roboto\",sans-serif; font-size: 12px; white-space: nowrap; color: rgb(51, 51, 51); margin-left: 0px; margin-top: 0px; left: 0px; top: 0px;\"&gt;\n        &lt;div class=\"client-rate-bench-chart\"&gt;\n            &lt;table class=\"table rdo-table-tooltip\"&gt;\n                &lt;tbody&gt;\n                    &lt;tr&gt;\n                        &lt;td&gt;\n                            &lt;span style=\"color:rgba(45,108,162,1)\"&gt;\u25cf&lt;/span&gt;\n                           Client Book Revenue\n                        &lt;/td&gt;\n                        &lt;td&gt; $20,966,618 &lt;/td&gt;\n                    &lt;/tr&gt;\n                &lt;/tbody&gt;\n           &lt;/table&gt;\n        &lt;/div&gt;\n    &lt;/span&gt;\n&lt;/div&gt;\n</code></pre>\n"}, {"tags": ["python", "date", "pandas", "matplotlib", "plot"], "comments": [{"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 1, "creation_date": 1492035214, "post_id": 43380335, "comment_id": 73823052, "body": "matplotlib 3D cannot plot dates. A possible solution is given here: <a href=\"http://stackoverflow.com/questions/2195983/matplotlib-formatting-dates-on-the-x-axis-in-a-3d-bar-graph\" title=\"matplotlib formatting dates on the x axis in a 3d bar graph\">stackoverflow.com/questions/2195983/&hellip;</a>"}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 1, "creation_date": 1492035269, "post_id": 43380335, "comment_id": 73823073, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/42677160/matplotlib-3d-scatter-plot-date\">matplotlib 3d scatter plot date</a>"}, {"owner": {"reputation": 2859, "user_id": 4367371, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/dCKEb.jpg?s=128&g=1", "display_name": "Mustard Tiger", "link": "https://stackoverflow.com/users/4367371/mustard-tiger"}, "reply_to_user": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1492037377, "post_id": 43380335, "comment_id": 73823814, "body": "These question help with the dates, but they do not explain how to convert the list of time strings to a format that matplotlib can use."}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1492037529, "post_id": 43380335, "comment_id": 73823852, "body": "There is no difference between a date and a time. You may <a href=\"https://stackoverflow.com/posts/43380335/edit\">edit</a> your question to show where your specific problem of converting a time to a number is. (Make sure to provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> without any external data, such that people can run your code.)"}], "owner": {"reputation": 2859, "user_id": 4367371, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/dCKEb.jpg?s=128&g=1", "display_name": "Mustard Tiger", "link": "https://stackoverflow.com/users/4367371/mustard-tiger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2457, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1595528638, "creation_date": 1492034446, "last_edit_date": 1595528638, "question_id": 43380335, "link": "https://stackoverflow.com/questions/43380335/python-3d-plot-with-dates", "title": "Python 3D plot with dates", "body": "<p>I am trying to make a 3D scatter plot that has the following axis: Price, Time and Dates. Essentially I want to plot the price vs the time for a single day and then do that for multiple days and stack them on an axis.</p>\n<p>Here is the code I have so far:</p>\n<pre><code> df=pd.read_csv(&quot;C:\\\\Desktop\\\\dat.csv&quot;)\n date=  df['date'].unique()\n dfd = pd.DataFrame(date)\n days= dfd.sort_values(0)\n\n fig= plt.figure()\n ax= fig.add_subplot(111, projection= '3d')\n\n xx = np.arange(len(days[0]))\n ys = [i+xx+(i*xx)**2 for i in range(len(days[0]))]\n colors = cm.rainbow(np.linspace(0, 1, len(ys)))\n\n for d,cc in zip(days[0],colors):\n \n     td= df.loc[df['date'] == d]\n     st= td[['time','price']]\n\n     x = st['time']         \n     y = st['price']\n\n     x=list(x)\n     y=list(y)\n     ax.scatter(x,y,d,color=cc)\n\n plt.show()\n</code></pre>\n<p>The main problem is that x is a list with times and that d is a date. when I run the code matplotlib throws an error saying</p>\n<pre><code>ValueError: invalid literal for float(): 9:30:01\n</code></pre>\n<p>The dates are in the following format : 2017.04.12, time format : 9:30:01</p>\n<p>I am aware that I can set up tick labels for the date, but how can I handle the time?</p>\n<p>How can I plot this 3d plot if the axis indexes contain dates and times?</p>\n"}, {"tags": ["python", "python-decorators"], "answers": [{"comments": [{"owner": {"reputation": 583, "user_id": 5652080, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/10207024028613481/picture?type=large", "display_name": "Sam Dillard", "link": "https://stackoverflow.com/users/5652080/sam-dillard"}, "edited": false, "score": 0, "creation_date": 1492034692, "post_id": 43380366, "comment_id": 73822845, "body": "Thanks, seems unnecessary in this case.  I&#39;m sure they offer concision in other use cases."}], "tags": [], "owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "is_accepted": true, "score": 8, "last_activity_date": 1492034893, "last_edit_date": 1492034893, "creation_date": 1492034571, "answer_id": 43380366, "question_id": 43380329, "link": "https://stackoverflow.com/questions/43380329/python-decorators-vs-passing-functions/43380366#43380366", "title": "Python decorators vs passing functions", "body": "<blockquote>\n  <p>In this code, why not just define the functions makeitalic() and makebold() and pass in the function hello?</p>\n</blockquote>\n\n<p>You certainly could! Decorators are just syntactic sugar. Under the hood, what happens is:</p>\n\n<pre><code>@makeitalic\n@makebold\ndef hello():\n    return \"hello world\"\n</code></pre>\n\n<p>becomes:</p>\n\n<pre><code>def hello():\n    return \"hello world\"\n\nhello = makebold(hello)\nhello = makeitalic(hello)\n</code></pre>\n"}], "owner": {"reputation": 583, "user_id": 5652080, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/10207024028613481/picture?type=large", "display_name": "Sam Dillard", "link": "https://stackoverflow.com/users/5652080/sam-dillard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 310, "favorite_count": 0, "accepted_answer_id": 43380366, "answer_count": 1, "score": 11, "last_activity_date": 1492034893, "creation_date": 1492034419, "last_edit_date": 1492034453, "question_id": 43380329, "link": "https://stackoverflow.com/questions/43380329/python-decorators-vs-passing-functions", "title": "Python decorators vs passing functions", "body": "<pre><code>def makebold(fn):\n    def wrapped():\n        return \"&lt;b&gt;\" + fn() + \"&lt;/b&gt;\"\n    return wrapped\n\ndef makeitalic(fn):\n    def wrapped():\n        return \"&lt;i&gt;\" + fn() + \"&lt;/i&gt;\"\n    return wrapped\n\n@makeitalic\n@makebold\ndef hello():\n    return \"hello world\"\n\nprint(hello()) ## returns \"&lt;b&gt;&lt;i&gt;hello world&lt;/i&gt;&lt;/b&gt;\"\n</code></pre>\n\n<p>In this code, why not just define the functions makeitalic() and makebold() and pass in the function hello?</p>\n\n<p>Am I missing something here or are decorators really better for more complicated things?</p>\n"}, {"tags": ["python", "numpy", "neural-network", "backpropagation"], "comments": [{"owner": {"reputation": 1606, "user_id": 5079666, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/5Awfk.jpg?s=128&g=1", "display_name": "Jon", "link": "https://stackoverflow.com/users/5079666/jon"}, "edited": false, "score": 0, "creation_date": 1492040675, "post_id": 43380296, "comment_id": 73824744, "body": "You may want to read through some literature. Neural networks are essentially generalized linear models. A GLM that would handle multiple (1/0) output would be considered multinomial. Here&#39;s an intro into this topic: <a href=\"http://data.princeton.edu/wws509/notes/c6.pdf\" rel=\"nofollow noreferrer\">data.princeton.edu/wws509/notes/c6.pdf</a>"}, {"owner": {"reputation": 6712, "user_id": 1870832, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/4zazd.png?s=128&g=1", "display_name": "Max Power", "link": "https://stackoverflow.com/users/1870832/max-power"}, "edited": false, "score": 0, "creation_date": 1492042598, "post_id": 43380296, "comment_id": 73825230, "body": "assuming you want <code>think</code> to handle a complete epoch or &#39;pass&#39;, it will have to do a full forward propagation through each layer, and then a full backprop pass through each layer. And just like you need <code>inputs</code> as a param to kick off the forward prop, you need an <code>outputs</code> or ground-truth param to kick off each backprop pass."}, {"owner": {"reputation": 183, "user_id": 6890926, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/7007a37678a6dc5c21dda9719d25e44e?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/6890926/jonathan"}, "reply_to_user": {"reputation": 6712, "user_id": 1870832, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/4zazd.png?s=128&g=1", "display_name": "Max Power", "link": "https://stackoverflow.com/users/1870832/max-power"}, "edited": false, "score": 0, "creation_date": 1492053014, "post_id": 43380296, "comment_id": 73827638, "body": "@MaxPower This is just a small snippet of the code to give you an idea of the class structure.  I know how to calculate the output of the neural network, and compare it to the expected output in order to get the error.  From that point, I need a function to adjust the weights for a network with as many layers as specified."}, {"owner": {"reputation": 6712, "user_id": 1870832, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/4zazd.png?s=128&g=1", "display_name": "Max Power", "link": "https://stackoverflow.com/users/1870832/max-power"}, "edited": false, "score": 0, "creation_date": 1492053327, "post_id": 43380296, "comment_id": 73827716, "body": "Why does the number of layers matter? What goes wrong when using <code>for layer in self.layers</code> for backprop as you do for updating your weights in your forward-prop code above? Maybe I&#39;m missing something."}, {"owner": {"reputation": 6712, "user_id": 1870832, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/4zazd.png?s=128&g=1", "display_name": "Max Power", "link": "https://stackoverflow.com/users/1870832/max-power"}, "edited": false, "score": 0, "creation_date": 1492053443, "post_id": 43380296, "comment_id": 73827757, "body": "you mentioned this gives an idea of your class structure. but do you want think() to constitute an epoch (forward-prop and backwar prop), or just a forward-pass?"}, {"owner": {"reputation": 183, "user_id": 6890926, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/7007a37678a6dc5c21dda9719d25e44e?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/6890926/jonathan"}, "reply_to_user": {"reputation": 6712, "user_id": 1870832, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/4zazd.png?s=128&g=1", "display_name": "Max Power", "link": "https://stackoverflow.com/users/1870832/max-power"}, "edited": false, "score": 1, "creation_date": 1492054262, "post_id": 43380296, "comment_id": 73827987, "body": "@MaxPower I added the train function to make the code more clear.  The problem is not that I don&#39;t know how to do the code.  The problem is I need to know how to find the hidden layer errors, and use them to adjust the weights."}, {"owner": {"reputation": 6712, "user_id": 1870832, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/4zazd.png?s=128&g=1", "display_name": "Max Power", "link": "https://stackoverflow.com/users/1870832/max-power"}, "edited": false, "score": 0, "creation_date": 1492055656, "post_id": 43380296, "comment_id": 73828274, "body": "is the answer here helpful? I think the key you&#39;re missing after you call <code>think</code> (what I&#39;d call &#39;forwardprop&#39;) in <code>train</code> is to 1) update cost J, and 2) call a <code>backprop(Y)</code>. This backprop function in turn does three things: 1) update errors based on errors, weights and gradient (called <code>sigmoid_prime</code> here for sigmoid activation, 2) update the gradient, 3) update the weights. So I&#39;d suggest cntrl-f for &quot;def train&quot; and &quot;def backpropagate&quot; in this answer. <a href=\"http://stackoverflow.com/questions/34649152/neural-network-backpropagation-algorithm-not-working-in-python\" title=\"neural network backpropagation algorithm not working in python\">stackoverflow.com/questions/34649152/&hellip;</a>"}, {"owner": {"reputation": 6712, "user_id": 1870832, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/4zazd.png?s=128&g=1", "display_name": "Max Power", "link": "https://stackoverflow.com/users/1870832/max-power"}, "edited": false, "score": 0, "creation_date": 1492059347, "post_id": 43380296, "comment_id": 73829308, "body": "another good tutorial of neural nets including backprop in numpy. <a href=\"http://iamtrask.github.io/2015/07/12/basic-python-network/\" rel=\"nofollow noreferrer\">iamtrask.github.io/2015/07/12/basic-python-network</a>"}], "owner": {"reputation": 183, "user_id": 6890926, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/7007a37678a6dc5c21dda9719d25e44e?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/6890926/jonathan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 533, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1492054092, "creation_date": 1492034222, "last_edit_date": 1492054092, "question_id": 43380296, "link": "https://stackoverflow.com/questions/43380296/backpropagation-of-multilayer-neural-network", "title": "Backpropagation of Multilayer neural network", "body": "<p>I am trying to make my own neural network that allows unlimited layers of neurons in python.  it uses numpy array objects to model neurons, weights, inputs, and outputs.  I have figured out how to deal with forward propagation, but am having trouble finding a formula to deal with backpropagation that can deal with multiple hidden layers.</p>\n\n<pre><code>def train(self, training_set_inputs, training_set_outputs, number_of_training_iterations):\n    for iteration in xrange(number_of_training_iterations):\n        # Pass the training set through our neural network\n        self.think(training_set_inputs)\n\n        # backpropagation code...\n\ndef think(self, inputs):\n        for layer in self.layers:\n            inputs = self.__sigmoid(dot(inputs, layer.synaptic_weights))\n            layer.outputs = inputs\n</code></pre>\n\n<p>from here I can access the output array of each layer of the network using <code>self.layer[n].outputs</code></p>\n\n<p>please post answer with python code or neat, well defined math functions.</p>\n"}, {"tags": ["python", "pandas", "cross-correlation"], "comments": [{"owner": {"reputation": 2682, "user_id": 2662901, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7c91dbe3c7fdf96369fe85bf22f9fc29?s=128&d=identicon&r=PG", "display_name": "feetwet", "link": "https://stackoverflow.com/users/2662901/feetwet"}, "edited": false, "score": 0, "creation_date": 1517844061, "post_id": 43380293, "comment_id": 84248342, "body": "Good solutions shown <a href=\"https://stackoverflow.com/q/27069003/2662901\">on this question</a>."}], "owner": {"reputation": 11, "user_id": 5933677, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aeefde920b2f3407723c180d42d0d1fb?s=128&d=identicon&r=PG&f=1", "display_name": "polly", "link": "https://stackoverflow.com/users/5933677/polly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 382, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1492034201, "creation_date": 1492034201, "question_id": 43380293, "link": "https://stackoverflow.com/questions/43380293/compute-rolling-window-pairwise-correlations-in-pandas", "title": "Compute rolling window pairwise correlations in pandas", "body": "<p>I'm new to python and am trying to compute rolling cross-correlations among the returns of different stocks. My data frame is huge, and it contains many NaNs. Therefore, rolling_corr() doesn't seem to work very well. </p>\n\n<p>Here is a slice of my data frame\n<a href=\"https://i.stack.imgur.com/NZBd6.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n\n<p>I created a function that generates the correlation matrix and unpivot it back to a data frame in the following way:</p>\n\n<pre><code>def corr_func(df,n=None):\n    cmat = df.corr(method='pearson', min_periods=n)\n    mask = np.ones(cmat.shape,dtype='bool')\n    mask[np.triu_indices(len(cmat))] = False\n    dfnew = cmat[cmat.notnull()&amp;mask]    \n    dfnew = dfnew.stack()\n    dfnew = dfnew.reset_index(level=1)\n    dfnew.columns = ['PERMNO2','Value']\n    dfnew.reset_index(inplace=True)\n    dfnew=dfnew.rename(columns = {'PERMNO':'PERMNO1'})\n    # Associate with the window (first date and last date)\n    df.reset_index(inplace=True)\n    df.sort_values('date',inplace=True)\n    dfnew['date_first'] = df['date'].iloc[0]\n    dfnew['date_last'] = df['date'].iloc[-1]\n    return(dfnew)\n</code></pre>\n\n<p>The resulted data frame aggregates unique pairwise correlations of the stock returns in my sample. Here is a slice of the resulted data frame:\n<a href=\"https://i.stack.imgur.com/iTnbZ.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n\n<p>I tried to implement rolling cross-correlations with rolling_apply and this function (corr_func), but did not have any success. \nIs there an elegant way to aggregate rolling cross-correlations in a data frame with rolling_apply or some other methods?</p>\n"}, {"tags": ["python", "subprocess", "psql", "pg-dump", "pg-restore"], "answers": [{"tags": [], "owner": {"reputation": 365, "user_id": 2033487, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/d999n.jpg?s=128&g=1", "display_name": "Dimitris", "link": "https://stackoverflow.com/users/2033487/dimitris"}, "is_accepted": true, "score": 8, "last_activity_date": 1492072709, "creation_date": 1492072709, "answer_id": 43387382, "question_id": 43380273, "link": "https://stackoverflow.com/questions/43380273/pg-dump-pg-restore-password-using-python-module-subprocess/43387382#43387382", "title": "pg_dump &amp; pg_restore password using python module subprocess", "body": "<p>The following works and the changes made are commented. </p>\n\n<p>I am not sure though why the <code>pg_restore</code> produces that password authentication error when using the full command (i.e. not split in the list) and using <code>shell=True</code> in <code>Popen</code>, but <code>pg_dump</code> on the other hand works fine using <code>shell=True</code> &amp; the full command. Does <code>&lt;</code> have to do anything with it?</p>\n\n<pre><code>#!/usr/bin/python\n\nfrom subprocess import PIPE,Popen\nimport shlex\n\ndef dump_table(host_name,database_name,user_name,database_password,table_name):\n\n    command = 'pg_dump -h {0} -d {1} -U {2} -p 5432 -t public.{3} -Fc -f /tmp/table.dmp'\\\n    .format(host_name,database_name,user_name,table_name)\n\n    p = Popen(command,shell=True,stdin=PIPE,stdout=PIPE,stderr=PIPE)\n\n    return p.communicate('{}\\n'.format(database_password))\n\ndef restore_table(host_name,database_name,user_name,database_password):\n\n    #Remove the '&lt;' from the pg_restore command.\n    command = 'pg_restore -h {0} -d {1} -U {2} /tmp/table.dmp'\\\n              .format(host_name,database_name,user_name)\n\n    #Use shlex to use a list of parameters in Popen instead of using the\n    #command as is.\n    command = shlex.split(command)\n\n    #Let the shell out of this (i.e. shell=False)\n    p = Popen(command,shell=False,stdin=PIPE,stdout=PIPE,stderr=PIPE)\n\n    return p.communicate('{}\\n'.format(database_password))\n\ndef main():\n    dump_table('localhost','testdb','user_name','passwd','test_tbl')\n    restore_table('localhost','testdb','user_name','passwd')\n\nif __name__ == \"__main__\":\n    main()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 372, "user_id": 967410, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qkfr2.jpg?s=128&g=1", "display_name": "Dimitri Hautot", "link": "https://stackoverflow.com/users/967410/dimitri-hautot"}, "edited": false, "score": 0, "creation_date": 1570605963, "post_id": 56325708, "comment_id": 102960787, "body": "I found this page after struggling with (Python 3.7.4) <code>subprocess.run(...)</code> failing to use the <code>input=</code> keyword. Didn&#39;t use the <code>shell=True</code> keyword, but the <code>env=</code>did the trick. Some obscur <i>tty</i> related issue."}], "tags": [], "owner": {"reputation": 1604, "user_id": 418418, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/IOWDn.jpg?s=128&g=1", "display_name": "Alexander Fedorov", "link": "https://stackoverflow.com/users/418418/alexander-fedorov"}, "is_accepted": false, "score": 8, "last_activity_date": 1558958559, "creation_date": 1558958559, "answer_id": 56325708, "question_id": 43380273, "link": "https://stackoverflow.com/questions/43380273/pg-dump-pg-restore-password-using-python-module-subprocess/56325708#56325708", "title": "pg_dump &amp; pg_restore password using python module subprocess", "body": "<p>You can use environment variables <a href=\"https://www.postgresql.org/docs/11/libpq-envars.html\" rel=\"noreferrer\">https://www.postgresql.org/docs/11/libpq-envars.html</a> and \"--no-password\" option for pg_dump.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>    def dump_schema(host, dbname, user, password, **kwargs):\n        command = f'pg_dump --host={host} ' \\\n            f'--dbname={dbname} ' \\\n            f'--username={user} ' \\\n            f'--no-password ' \\\n            f'--format=c ' \\\n            f'--file=/tmp/schema.dmp '\n\n        proc = Popen(command, shell=True, env={\n            'PGPASSWORD': password\n        })\n        proc.wait()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 101, "user_id": 13940765, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AOh14Gi81zPdJyR9XIbC7D74xDmKKfEY1ZtVCdOUGrv3=k-s128", "display_name": "Sarath Chandran K", "link": "https://stackoverflow.com/users/13940765/sarath-chandran-k"}, "is_accepted": false, "score": 2, "last_activity_date": 1601100662, "creation_date": 1601100662, "answer_id": 64074445, "question_id": 43380273, "link": "https://stackoverflow.com/questions/43380273/pg-dump-pg-restore-password-using-python-module-subprocess/64074445#64074445", "title": "pg_dump &amp; pg_restore password using python module subprocess", "body": "<p>Here is a python script for taking postgres dump and restore it to a new database.</p>\n<pre><code>import subprocess\n\nDB_NAME = 'PrimaryDB'  # your db name\n\nDB_USER = 'postgres' # you db user\nDB_HOST = &quot;localhost&quot;\nDB_PASSWORD = 'sarath1996'# your db password\ndump_success = 1\nprint ('Backing up %s database ' % (DB_NAME))\ncommand_for_dumping = f'pg_dump --host={DB_HOST} ' \\\n            f'--dbname={DB_NAME} ' \\\n            f'--username={DB_USER} ' \\\n            f'--no-password ' \\\n            f'--file=backup.dmp '\n try:\n     proc = subprocess.Popen(command, shell=True, env={\n                   'PGPASSWORD': DB_PASSWORD\n                   })\n     proc.wait()\n\n except Exception as e:\n        dump_success = 0\n        print('Exception happened during dump %s' %(e))\n\n\n if dump_success:\n    print('db dump successfull')\n print(' restoring to a new database database')\n\n &quot;&quot;&quot;database to restore dump must be created with \nthe same user as of previous db (in my case user is 'postgres'). \ni have #created a db called ReplicaDB. no need of tables inside. \nrestore process will #create tables with data.\n&quot;&quot;&quot;\n\nbackup_file = '/home/Downloads/BlogTemplate/BlogTemplate/backup.dmp' \n&quot;&quot;&quot;give absolute path of your dump file. This script will create the backup.dmp in the same directory from which u are running the script &quot;&quot;&quot;\n\n\n\nif not dump_success:\n    print('dump unsucessfull. retsore not possible')\n else:\n    try:\n        process = subprocess.Popen(\n                        ['pg_restore',\n                         '--no-owner',\n                         '--dbname=postgresql://{}:{}@{}:{}/{}'.format('postgres',#db user\n                                                                       'sarath1996', #db password\n                                                                       'localhost',  #db host\n                                                                       '5432', 'ReplicaDB'), #db port ,#db name\n                         '-v',\n                         backup_file],\n                        stdout=subprocess.PIPE\n                    )\n        output = process.communicate()[0]\n\n     except Exception as e:\n           print('Exception during restore %e' %(e) )\n</code></pre>\n"}], "owner": {"reputation": 365, "user_id": 2033487, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/d999n.jpg?s=128&g=1", "display_name": "Dimitris", "link": "https://stackoverflow.com/users/2033487/dimitris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10567, "favorite_count": 6, "accepted_answer_id": 43387382, "answer_count": 3, "score": 6, "last_activity_date": 1601100662, "creation_date": 1492034060, "last_edit_date": 1492070881, "question_id": 43380273, "link": "https://stackoverflow.com/questions/43380273/pg-dump-pg-restore-password-using-python-module-subprocess", "title": "pg_dump &amp; pg_restore password using python module subprocess", "body": "<p><strong>Problem:</strong> Use the PSQL <code>pg_dump</code> and <code>pg_restore</code> in a Python script and using the <code>subprocess</code> module.</p>\n\n<p><strong>Background:</strong> I am using the following <code>python 2.7</code> script from the localhost (i.e. <code>Ubuntu 14.04.5 LTS</code>) to create a backup of a table in a PSQL server (i.e. <code>PostgreSQL 9.4.11</code>) and restore it into the remote host (i.e. <code>Ubuntu 16.04.2 LTS</code>) in a newer version of PSQL server (i.e. <code>PostgreSQL 9.6.2</code>).</p>\n\n<pre><code>#!/usr/bin/python\n\nfrom subprocess import PIPE,Popen\n\ndef dump_table(host_name,database_name,user_name,database_password,table_name):\n\n    command = 'pg_dump -h {0} -d {1} -U {2} -p 5432 -t public.{3} -Fc -f /tmp/table.dmp'\\\n    .format(host_name,database_name,user_name,table_name)\n\n    p = Popen(command,shell=True,stdin=PIPE)\n\n    return p.communicate('{}\\n'.format(database_password))\n\ndef restore_table(host_name,database_name,user_name,database_password):\n\n    command = 'pg_restore -h {0} -d {1} -U {2} &lt; /tmp/table.dmp'\\\n    .format(host_name,database_name,user_name)\n\n    p = Popen(command,shell=True,stdin=PIPE)\n\n    return p.communicate('{}\\n'.format(database_password))\n\ndef main():\n    dump_table('localhost','testdb','user_name','passwd','test_tbl')\n    restore_table('remotehost','new_db','user_name','passwd')\n\nif __name__ == \"__main__\":\n    main()\n</code></pre>\n\n<p>When I use the functions sequentially as above the <code>dump_table()</code> function finishes successfully and creates the <code>/tmp/table.sql</code> file but the <code>restore_table()</code> function returns the following error:</p>\n\n<blockquote>\n  <p>('', 'Password: \\npg_restore: [archiver (db)] connection to database\n  \"database_name\" failed: FATAL: password authentication failed for user\n  \"username\"\\nFATAL: password authentication failed for user\n  \"username\"\\n')*</p>\n</blockquote>\n\n<p>I have checked the credentials &amp; outputs by executing the commands for <code>pg_restore</code> in the shell and I have also included the credentials to .pgpass (although not relevant since I am passing the password in <code>p.communicate()</code>)</p>\n\n<p>Anyone had similar experience? I am pretty much stuck!</p>\n\n<p>Regards,\nD.</p>\n"}, {"tags": ["python", "bytecode", "profiler"], "comments": [{"owner": {"reputation": 38606, "user_id": 23771, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NeuGc.jpg?s=128&g=1", "display_name": "Mike Dunlavey", "link": "https://stackoverflow.com/users/23771/mike-dunlavey"}, "edited": false, "score": 0, "creation_date": 1492043805, "post_id": 43380268, "comment_id": 73825521, "body": "Well, I wouldn&#39;t do that, because some bytecodes take a lot more time than others, such as anything that does memory allocation, or anything that calls a vector or matrix operation (not to mention disk or console I/O). If you are trying to find out how to get maximum performance, you should know how to use <a href=\"http://stackoverflow.com/a/4299378/23771\"><i>this technique</i></a>."}, {"owner": {"reputation": 195, "user_id": 420087, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MhrJX.jpg?s=128&g=1", "display_name": "nova", "link": "https://stackoverflow.com/users/420087/nova"}, "reply_to_user": {"reputation": 38606, "user_id": 23771, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NeuGc.jpg?s=128&g=1", "display_name": "Mike Dunlavey", "link": "https://stackoverflow.com/users/23771/mike-dunlavey"}, "edited": false, "score": 0, "creation_date": 1492203259, "post_id": 43380268, "comment_id": 73897191, "body": "I&#39;m not really interested in how fast it takes for a computer though. I&#39;m thinking of testing whether number of bytecode executions might correlate with how long it takes a beginner programmer to trace through the problem. Just a random idea I thought might be crazy and fun."}, {"owner": {"reputation": 38606, "user_id": 23771, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NeuGc.jpg?s=128&g=1", "display_name": "Mike Dunlavey", "link": "https://stackoverflow.com/users/23771/mike-dunlavey"}, "edited": false, "score": 1, "creation_date": 1492350053, "post_id": 43380268, "comment_id": 73932615, "body": "OK, that&#39;s interesting. (You might say it in the post.) I taught intro CS (30+ years ago), which is a process of, one by one, putting tools into students&#39; heads so they can think about and create programs. One of the tools is &quot;play computer&quot;, where you personally step through the program to see what it does. That helps to fix misconceptions they have, like thinking that, since the program is so fast, it must do everything all at once. Another misconception is they think it reads their mind. Your problem sounds like fun."}, {"owner": {"reputation": 195, "user_id": 420087, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MhrJX.jpg?s=128&g=1", "display_name": "nova", "link": "https://stackoverflow.com/users/420087/nova"}, "reply_to_user": {"reputation": 38606, "user_id": 23771, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NeuGc.jpg?s=128&g=1", "display_name": "Mike Dunlavey", "link": "https://stackoverflow.com/users/23771/mike-dunlavey"}, "edited": false, "score": 0, "creation_date": 1492709694, "post_id": 43380268, "comment_id": 74105754, "body": "We are on the same page with &quot;play computer&quot;! I think that&#39;s crucial to address misconceptions like the one you mention. If I pursue this further, I&#39;ll update this post with my technique(s)."}], "owner": {"reputation": 195, "user_id": 420087, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MhrJX.jpg?s=128&g=1", "display_name": "nova", "link": "https://stackoverflow.com/users/420087/nova"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 198, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1492034048, "creation_date": 1492034048, "question_id": 43380268, "link": "https://stackoverflow.com/questions/43380268/count-number-of-python-bytecode-commands-executed", "title": "Count number of Python bytecode commands executed", "body": "<p>I'd like to profile some basic Python scripts to see how they vary in the number of bytecode instructions executed. I've been playing around with dis but haven't discovered how to do this.</p>\n\n<p>I'm not talking about the amount of bytecode for a certain .py file -- I'm talking about the number of bytecode instructions executed in a particular runthrough.</p>\n\n<p>The bigger picture is that I'd like to have a measure of the relative complexity of various scripts as you work out the code by hand---but for very simple intro to programming problems. </p>\n\n<p>Thanks for any help!</p>\n"}, {"tags": ["python", "django", "api", "django-rest-framework", "put"], "comments": [{"owner": {"reputation": 1487, "user_id": 3901060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f386743bd29ff8c0ab6e1637938a795?s=128&d=identicon&r=PG&f=1", "display_name": "FamousJameous", "link": "https://stackoverflow.com/users/3901060/famousjameous"}, "edited": false, "score": 0, "creation_date": 1492034698, "post_id": 43380263, "comment_id": 73822847, "body": "What happens when you run your code? What makes you think it doesn&#39;t work?"}, {"owner": {"reputation": 360, "user_id": 2625058, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/V4qM2.jpg?s=128&g=1", "display_name": "digiwebguy", "link": "https://stackoverflow.com/users/2625058/digiwebguy"}, "reply_to_user": {"reputation": 1487, "user_id": 3901060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f386743bd29ff8c0ab6e1637938a795?s=128&d=identicon&r=PG&f=1", "display_name": "FamousJameous", "link": "https://stackoverflow.com/users/3901060/famousjameous"}, "edited": false, "score": 0, "creation_date": 1492036400, "post_id": 43380263, "comment_id": 73823485, "body": "@FamousJameous I&#39;m able to get the users from the database but I think the <code>(data=user)</code> part is wrong because it doesn&#39;t save the updated amount in the database"}], "answers": [{"tags": [], "owner": {"reputation": 30, "user_id": 4446446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df03d9e4dd03e18d0c60f1890ad2a53f?s=128&d=identicon&r=PG&f=1", "display_name": "Lingbing", "link": "https://stackoverflow.com/users/4446446/lingbing"}, "is_accepted": false, "score": 0, "last_activity_date": 1492062643, "creation_date": 1492062643, "answer_id": 43384462, "question_id": 43380263, "link": "https://stackoverflow.com/questions/43380263/change-items-in-database-based-on-an-array-of-values-in-python-django/43384462#43384462", "title": "Change items in database based on an array of values in Python Django", "body": "<p>You should pass many=True para to serializer, and custom a UsersSerializer to receive and validate user_ids is a good way. Finally, use F to update users.</p>\n\n<pre><code>    from django.db.models import F\n    class UsersSerializer(serializers.Serializer):\n        users = serializers.PrimaryKeyRelatedField(\n            queryset=User.objects.all(),\n            many=True   #many=True to receive multi ids.\n        )\n\n    def post(self, request):\n        serializer = UsersSerializer(data=request.data)\n        serializer.is_valid(raise_exception=True)\n        users = serializer.data.get('users') #since I use PrimaryKeyRelatedField, serializer.data actually returns user instances.\n        users = users.update(amount = F('amount')-10)\n        return\u3000Responce(UserSerializer(users, many=True).data) #notice, do not use data=users, since user is an instance.\n\n    and post json data: {\"users\":[7779987,5559098,...]}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "is_accepted": true, "score": 1, "last_activity_date": 1492066425, "creation_date": 1492066425, "answer_id": 43385446, "question_id": 43380263, "link": "https://stackoverflow.com/questions/43380263/change-items-in-database-based-on-an-array-of-values-in-python-django/43385446#43385446", "title": "Change items in database based on an array of values in Python Django", "body": "<p>What's the point of the serializer here? There doesn't seem to be any reason to use one. You've already got the items and modified their amount; all you need to do is to save them.</p>\n\n<p>The other issue is that you return inside your loop; you need to move that final line out of the loop, and then return a list of the IDs that you successfully updated.</p>\n"}], "owner": {"reputation": 360, "user_id": 2625058, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/V4qM2.jpg?s=128&g=1", "display_name": "digiwebguy", "link": "https://stackoverflow.com/users/2625058/digiwebguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 43385446, "answer_count": 2, "score": -1, "last_activity_date": 1492075066, "creation_date": 1492034020, "last_edit_date": 1492075066, "question_id": 43380263, "link": "https://stackoverflow.com/questions/43380263/change-items-in-database-based-on-an-array-of-values-in-python-django", "title": "Change items in database based on an array of values in Python Django", "body": "<p>I have a string of values being posted to my python API</p>\n\n<pre><code>[\"7779987\",\"5559098\",\"2453987\"]\n</code></pre>\n\n<p>these numbers are unique identifiers of users in my database. These users have an 'amount' tuple. What I want to do is, when the array is received, in my code, I get all the users that have their IDs in the string and subtract 10 from their current amount value.</p>\n\n<p>This is what I tried but I know I'm doing something wrong. How do I go about this? </p>\n\n<pre><code>class PayForTrips(APIView):\n    def post(self, request):\n        print(request.data)\n\n        for index_number in request.data:\n            print(index_number + \"; \")\n            user = User.objects.get(index_number=index_number)\n            print(\"old user amount\" + str(user.amount))\n            user.amount -= 10\n            print(\"new user amount\" + str(user.amount))\n            serializer = UserSerializer(data=user)// here is where the problem is\n            if serializer.is_valid():\n                serializer.save()\n                return Response(serializer.data)\n            return Response(serializer.errors, status=status.HTTP_400_BAD_REQUEST)\n</code></pre>\n\n<p>EDIT: I'm new to Django so I don't know how to go about this. If my code is completely wrong, could you show me how to go about achieving this? </p>\n\n<p>EDIT: @Daniel Roseman 's solution solved the problem. This is the code that works:</p>\n\n<pre><code>class PayForTrips(APIView):\n    def post(self, request):\n        print(request.data)\n\n        for index_number in request.data:\n            print(index_number + \"; \")\n            user = User.objects.get(index_number=index_number)\n\n            print(user)\n            print(\"old user amount\" + str(user.amount))\n            user.amount -= 1\n            print(\"new user amount\" + str(user.amount))\n            user.save()\n        return Response(status=status.HTTP_200_OK)\n</code></pre>\n"}, {"tags": ["python", "pandas", "data-analysis", "defaultdict", "bigdata"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 7851811, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/166219d68e529a6ca77f3210b1d79a38?s=128&d=identicon&r=PG&f=1", "display_name": "pythonuser890", "link": "https://stackoverflow.com/users/7851811/pythonuser890"}, "edited": false, "score": 0, "creation_date": 1492037632, "post_id": 43380613, "comment_id": 73823882, "body": "Hi! Thanks for the response, &#39;items&#39; isn&#39;t defined? I&#39;ve been trying to figure out what it is supposed to be or how it was supposed to be initialized and cant get it to work."}, {"owner": {"reputation": 1442, "user_id": 4020610, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-LdgzYsM5kJw/AAAAAAAAAAI/AAAAAAAAH4E/Qase_JE27jE/photo.jpg?sz=128", "display_name": "Lohmar ASHAR", "link": "https://stackoverflow.com/users/4020610/lohmar-ashar"}, "reply_to_user": {"reputation": 13, "user_id": 7851811, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/166219d68e529a6ca77f3210b1d79a38?s=128&d=identicon&r=PG&f=1", "display_name": "pythonuser890", "link": "https://stackoverflow.com/users/7851811/pythonuser890"}, "edited": false, "score": 0, "creation_date": 1492038090, "post_id": 43380613, "comment_id": 73823997, "body": "yeah, sorry about that, it was a typo I intended &quot;.iteritems()&quot; ended up by writing &quot;.iter(items)&quot;"}, {"owner": {"reputation": 13, "user_id": 7851811, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/166219d68e529a6ca77f3210b1d79a38?s=128&d=identicon&r=PG&f=1", "display_name": "pythonuser890", "link": "https://stackoverflow.com/users/7851811/pythonuser890"}, "edited": false, "score": 0, "creation_date": 1492038296, "post_id": 43380613, "comment_id": 73824070, "body": "Thanks! It&#39;s now reading:    artist_repo = dict(x.strip().split(&#39;\\t&#39;)[::-1] for x in artists[1:])  ValueError: dictionary update sequence element #0 has length 4; 2 is required.   Nevermind! Thanks so much."}, {"owner": {"reputation": 1442, "user_id": 4020610, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-LdgzYsM5kJw/AAAAAAAAAAI/AAAAAAAAH4E/Qase_JE27jE/photo.jpg?sz=128", "display_name": "Lohmar ASHAR", "link": "https://stackoverflow.com/users/4020610/lohmar-ashar"}, "reply_to_user": {"reputation": 13, "user_id": 7851811, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/166219d68e529a6ca77f3210b1d79a38?s=128&d=identicon&r=PG&f=1", "display_name": "pythonuser890", "link": "https://stackoverflow.com/users/7851811/pythonuser890"}, "edited": false, "score": 0, "creation_date": 1492039639, "post_id": 43380613, "comment_id": 73824440, "body": "double fault ... 1) I was expecting that the artists.dat file had only 2 columns, 2) as misread your code and thought that the data was &quot;artist name, artist id&quot;, I was wrong ... instead of &quot;[::-1]&quot;(reverse the list) I&#39;ve put an &quot;[:2]&quot; ( get the first 2 elements)"}, {"owner": {"reputation": 13, "user_id": 7851811, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/166219d68e529a6ca77f3210b1d79a38?s=128&d=identicon&r=PG&f=1", "display_name": "pythonuser890", "link": "https://stackoverflow.com/users/7851811/pythonuser890"}, "edited": false, "score": 0, "creation_date": 1492041102, "post_id": 43380613, "comment_id": 73824856, "body": "You&#39;re the man!!!!!!! The weights are off, but I can probably figure it out. Any tips on where I may need to debug?"}], "tags": [], "owner": {"reputation": 1442, "user_id": 4020610, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-LdgzYsM5kJw/AAAAAAAAAAI/AAAAAAAAH4E/Qase_JE27jE/photo.jpg?sz=128", "display_name": "Lohmar ASHAR", "link": "https://stackoverflow.com/users/4020610/lohmar-ashar"}, "is_accepted": true, "score": 0, "last_activity_date": 1492039320, "last_edit_date": 1492039320, "creation_date": 1492036003, "answer_id": 43380613, "question_id": 43380253, "link": "https://stackoverflow.com/questions/43380253/aggregating-values-in-one-column-by-their-corresponding-value-in-another-from-tw/43380613#43380613", "title": "Aggregating values in one column by their corresponding value in another from two files", "body": "<p>how about:</p>\n\n<pre><code>import codecs\nfrom collections import defaultdict\n# read stuff\nwith codecs.open(\"artists.dat\", encoding = \"utf-8\") as f:\n    artists = f.readlines()\nwith codecs.open(\"user_artists.dat\", encoding = \"utf-8\") as f:\n    users = f.readlines()\n# transform artist data in a dict with \"artist id\" as key and \"artist name\" as value\nartist_repo = dict(x.strip().split('\\t')[:2] for x in artists[1:])\n\nuser_stats_list = [x.strip().split('\\t') for x in users][1:]\n\ngrouped_user_stats = defaultdict(lambda:0)\n\nfor u in user_stats_list:\n    #userID, artistID, weight = u\n    grouped_user_stats[u[0]] += int(u[2]) # accumulate weights in a dict with artist id as key and sum of wights as values\n# extra: \"fancying\" the data transforming the keys of the dict in \"&lt;artist name&gt; (artist id)\" format \ngrouped_user_stats = dict((\"%s (%s)\" % (artist_repo.get(k,\"Unknown artist\"), k), v) for k ,v in grouped_user_stats.iteritems() )\n# lastly print it\nfor k, v in grouped_user_stats.iteritems():\n   print k,v \n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 7851811, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/166219d68e529a6ca77f3210b1d79a38?s=128&d=identicon&r=PG&f=1", "display_name": "pythonuser890", "link": "https://stackoverflow.com/users/7851811/pythonuser890"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 43380613, "answer_count": 1, "score": 0, "last_activity_date": 1505544272, "creation_date": 1492033961, "last_edit_date": 1506102531, "question_id": 43380253, "link": "https://stackoverflow.com/questions/43380253/aggregating-values-in-one-column-by-their-corresponding-value-in-another-from-tw", "title": "Aggregating values in one column by their corresponding value in another from two files", "body": "<p>had a question regarding summing the multiple values of duplicate keys into one key with the aggregate total. For example:\n1:5\n2:4\n3:2\n1:4\nVery basic but I'm looking for an output that looks like:\n1:9\n2:4\n3:2</p>\n\n<p>In the two files I am using, I am dealing with a list of 51 users(column 1 of user_artists.dat) who have the artistID(column 2) and how many times that user has listened to that particular artist given by the weight(column 3). </p>\n\n<p>I am attempting to aggregate the total times that artist has been played, across all users and display it in a format such as:\nBritney Spears (289) 2393140. Any help or input would be so appreciated.</p>\n\n<pre><code>import codecs\n#from collections import defaultdict\n\nwith codecs.open(\"artists.dat\", encoding = \"utf-8\") as f:\n    artists = f.readlines()\n\n\nwith codecs.open(\"user_artists.dat\", encoding = \"utf-8\") as f:\n    users = f.readlines()\n\n\nartist_list = [x.strip().split('\\t') for x in artists][1:]\nuser_stats_list = [x.strip().split('\\t') for x in users][1:]\n\nartists = {}\nfor a in artist_list:\n    artistID, name = a[0], a[1]\n    artists[artistID] = name\n\ngrouped_user_stats = {}\nfor u in user_stats_list:\n    userID, artistID, weight = u\n    grouped_user_stats[artistID] = grouped_user_stats[artistID].astype(int)\n    grouped_user_stats[weight] = grouped_user_stats[weight].astype(int)\n    for artistID, weight in u:\n        grouped_user_stats.groupby('artistID')['weight'].sum()\n        print(grouped_user_stats.groupby('artistID')['weight'].sum())\n\n\n\n    #if userID not in grouped_user_stats:\n        #grouped_user_stats[userID] = { artistID: {'name': artists[artistID], 'plays': 1} }\n    #else:\n        #if artistID not in grouped_user_stats[userID]:\n            #grouped_user_stats[userID][artistID] = {'name': artists[artistID], 'plays': 1}\n        #else:\n            #grouped_user_stats[userID][artistID]['plays'] += 1\n            #print('this never happens') \n\n\n\n\n#print(grouped_user_stats)\n</code></pre>\n"}, {"tags": ["python", "tcp", "handshake", "raw-sockets", "recvfrom"], "answers": [{"tags": [], "owner": {"reputation": 6849, "user_id": 1046738, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fad002f88c1fc7c38c3154d3970f1ad2?s=128&d=identicon&r=PG", "display_name": "jfly", "link": "https://stackoverflow.com/users/1046738/jfly"}, "is_accepted": true, "score": 0, "last_activity_date": 1492667422, "creation_date": 1492667422, "answer_id": 43511212, "question_id": 43380226, "link": "https://stackoverflow.com/questions/43380226/tcp-handshake-via-raw-sockets-why-recvfrom-hangs/43511212#43511212", "title": "TCP handshake via raw sockets, why recvfrom hangs?", "body": "<p>The problem lays here: <code>s = socket.socket(socket.AF_INET, socket.SOCK_RAW, socket.IPPROTO_RAW)</code>, the <a href=\"http://man7.org/linux/man-pages/man7/raw.7.html\" rel=\"nofollow noreferrer\">raw(7) man page</a> says: </p>\n\n<blockquote>\n  <p>A protocol of IPPROTO_RAW implies enabled IP_HDRINCL and is able to\n  send any IP protocol that is specified in the passed header.<br>\n  Receiving of all IP protocols via IPPROTO_RAW is not possible using raw\n  sockets. When a packet is received, it is passed to any raw sockets which have\n  been bound to its protocol before it is passed to other protocol handlers\n  (e.g., kernel protocol modules).<br>\n  An <code>IPPROTO_RAW</code> socket is send only.  </p>\n</blockquote>\n\n<p>use <code>s = socket.socket(socket.AF_INET, socket.SOCK_RAW, socket.IPPROTO_TCP)\n</code> instead and enable <code>IP_HDRINCL</code> socket option to use your own ip header:\n<code>s.setsockopt(socket.IPPROTO_IP, socket.IP_HDRINCL, 1)</code></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user1886376"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 944, "favorite_count": 0, "accepted_answer_id": 43511212, "answer_count": 1, "score": 1, "last_activity_date": 1492667422, "creation_date": 1492033864, "last_edit_date": 1492067932, "question_id": 43380226, "link": "https://stackoverflow.com/questions/43380226/tcp-handshake-via-raw-sockets-why-recvfrom-hangs", "title": "TCP handshake via raw sockets, why recvfrom hangs?", "body": "<p>I am trying to implement handshaking functionality. I am sending SYN packet and server responds via ACK packet. For getting server response i have used recvfrom function which is hang. Here is my code.</p>\n\n<pre><code>import socket, sys\nfrom struct import *\nimport codecs\n\ndef checksum(msg):\n    s = 0 \n    for i in range(0, len(msg), 2):\n        w = ord(msg[i]) + (ord(msg[i+1]) &lt;&lt; 8 )\n        s = s + w\n    s = (s&gt;&gt;16) + (s &amp; 0xffff);\n    s = s + (s &gt;&gt; 16);  \n    s = ~s &amp; 0xffff\n    return s\n\ntry:\n    s = socket.socket(socket.AF_INET, socket.SOCK_RAW, socket.IPPROTO_RAW)\n    s.bind((\"\", \"63798\"))\nexcept socket.error , msg:\n    print 'Socket could not be created. Error Code : ' + str(msg[0]) + ' Message ' + msg[1]\n    sys.exit()\n\npacket = ''; \nsource_ip = '172.16.87.84'\ndest_ip = '172.16.10.1'\n\n# ip header fields\nip_ihl = 5\nip_ver = 4\nip_tos = 0\nip_tot_len = 0\nip_id = 54321\nip_frag_off = 0\nip_ttl = 255\nip_proto = socket.IPPROTO_TCP\nip_check = 0\nip_saddr = socket.inet_aton ( source_ip )\nip_daddr = socket.inet_aton ( dest_ip ) \nip_ihl_ver = (ip_ver &lt;&lt; 4) + ip_ihl\n\nip_header = pack('!BBHHHBBH4s4s' , ip_ihl_ver, ip_tos, ip_tot_len, ip_id, ip_frag_off, ip_ttl, ip_proto, ip_check, ip_saddr, ip_daddr)\n\n# tcp header fields\ntcp_source = 63798   # source port\ntcp_dest = 8888   # destination port\ntcp_seq = 104\ntcp_ack_seq = 0\ntcp_doff = 5    #4 bit size of tcp header, 5 * 4 = 20 bytes\n#tcp flags\ntcp_fin = 0\ntcp_syn = 1\ntcp_rst = 0\ntcp_psh = 0\ntcp_ack = 0\ntcp_urg = 0\ntcp_window = socket.htons (5840)\ntcp_check = 0\ntcp_urg_ptr = 0\n\ntcp_offset_res = (tcp_doff &lt;&lt; 4) + 0\ntcp_flags = tcp_fin + (tcp_syn &lt;&lt; 1) + (tcp_rst &lt;&lt; 2) + (tcp_psh &lt;&lt;3) + (tcp_ack &lt;&lt; 4) + (tcp_urg &lt;&lt; 5)\n\ntcp_header = pack('!HHLLBBHHH' , tcp_source, tcp_dest, tcp_seq, tcp_ack_seq, tcp_offset_res, tcp_flags,  tcp_window, tcp_check, tcp_urg_ptr) \n\nsource_address = socket.inet_aton( source_ip )\ndest_address = socket.inet_aton(dest_ip)\nplaceholder = 0\nprotocol = socket.IPPROTO_TCP\ntcp_length = len(tcp_header)\n\npsh = pack('!4s4sBBH' , source_address , dest_address , placeholder , protocol , tcp_length);\npsh = psh + tcp_header;\n\ntcp_check = checksum(psh)\n\ntcp_header = pack('!HHLLBBH' , tcp_source, tcp_dest, tcp_seq, tcp_ack_seq, tcp_offset_res, tcp_flags,  tcp_window) + pack('H' , tcp_check) + pack('!H' , tcp_urg_ptr)\n\npacket = ip_header + tcp_header\ns.sendto(packet, (dest_ip , 8888 ))\ns.recvfrom(1024) # Here is recevfrom hangs\n</code></pre>\n\n<p>The programm hangs on recvfrom(). What to do, What is the reason of this issue ?\nActually the server send ACK packet. It can be seen in wireshark\nHere is Wireshark log\n<a href=\"https://i.stack.imgur.com/YP8pj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YP8pj.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "parallel-processing", "multiprocessing", "python-multithreading"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 4017206, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NlUbO1qHOrQ/AAAAAAAAAAI/AAAAAAAAJzY/ZMc4VzHQJsA/photo.jpg?sz=128", "display_name": "Sumith Yesudasan", "link": "https://stackoverflow.com/users/4017206/sumith-yesudasan"}, "edited": false, "score": 0, "creation_date": 1492103281, "post_id": 43381483, "comment_id": 73856858, "body": "Thank you for the suggestions, I will try your suggestions and will get back to you."}, {"owner": {"reputation": 23, "user_id": 4017206, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NlUbO1qHOrQ/AAAAAAAAAAI/AAAAAAAAJzY/ZMc4VzHQJsA/photo.jpg?sz=128", "display_name": "Sumith Yesudasan", "link": "https://stackoverflow.com/users/4017206/sumith-yesudasan"}, "edited": false, "score": 0, "creation_date": 1492195690, "post_id": 43381483, "comment_id": 73893880, "body": "Thank you @Tim. This worked well. I tested it in my main program too.. Thanks a ton..."}], "tags": [], "owner": {"reputation": 55248, "user_id": 2705542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc22708f70324dcbfe34f247637ca01?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Peters", "link": "https://stackoverflow.com/users/2705542/tim-peters"}, "is_accepted": true, "score": 1, "last_activity_date": 1492061324, "last_edit_date": 1492061324, "creation_date": 1492041712, "answer_id": 43381483, "question_id": 43380181, "link": "https://stackoverflow.com/questions/43380181/sync-issues-with-multiprocessing-in-python-double-for-loop/43381483#43381483", "title": "Sync issues with multiprocessing in Python, double for loop", "body": "<p>Items are added to the queues in whatever order the worker processes happen to finish.  If you want to force the order, you have to ... force the order ;-)</p>\n\n<p><code>Process</code> isn't good for this.  Their execution is inherently unordered, and the order may very well change from one run to the next.</p>\n\n<p>In this case, probably simplest:  first, throw out the queues entirely.  End your <code>mp_worker()</code> like so instead:</p>\n\n<pre><code>return outdict1, outdict2\n</code></pre>\n\n<p>Then use a <code>Pool</code>.  There are several ways to use one.  The most like what you're already doing looks like:</p>\n\n<pre><code>pool = multiprocessing.Pool(nprocs)\nfor i in range(nprocs):\n    istart = chunksize * i\n    iend = chunksize * (i + 1)\n    p = pool.apply_async(mp_worker, (istart, iend, x))\n    procs.append(p)\n\nresultdict1 = []\nresultdict2 = []\nfor p in procs:\n    t1, t2 = p.get()\n    resultdict1.extend(t1)\n    resultdict2.extend(t2)\n\npool.close()\npool.join()\n</code></pre>\n\n<p>Now results are fetched in the same order tasks were passed out; the order has been forced.</p>\n\n<p>Note:  switching from <code>+</code> to <code>.extend()</code> isn't logically necessary, but reduces a quadratic-time (in the number of loop iterations) operation to an amortized linear-time operation.  That has nothing to do with multiprocessing.  <code>somelist = somelist + anotherlist</code> is always better coded as <code>somelist.extend(anotherlist)</code>.</p>\n\n<h2>About the OS</h2>\n\n<p>Here's a guess as to why \"it worked\" on Windows but not Linux:  historically, process creation has been cheaper on Linux than Windows (Windows put much more effort into speeding its threads).  That makes it more likely the processes will end on Windows in the same order they started, when the processes are doing about the same amount of work.  But they certainly <em>can</em> finish \"out of order\" on Windows \ntoo.</p>\n\n<p>Regardless, Python has no say in any of this:  if you need a specific order, you have to force that order.</p>\n"}], "owner": {"reputation": 23, "user_id": 4017206, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NlUbO1qHOrQ/AAAAAAAAAAI/AAAAAAAAJzY/ZMc4VzHQJsA/photo.jpg?sz=128", "display_name": "Sumith Yesudasan", "link": "https://stackoverflow.com/users/4017206/sumith-yesudasan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 429, "favorite_count": 1, "accepted_answer_id": 43381483, "answer_count": 1, "score": 2, "last_activity_date": 1492195642, "creation_date": 1492033651, "last_edit_date": 1492195642, "question_id": 43380181, "link": "https://stackoverflow.com/questions/43380181/sync-issues-with-multiprocessing-in-python-double-for-loop", "title": "Sync issues with multiprocessing in Python, double for loop", "body": "<p>Inspired from the tutorial <a href=\"http://eli.thegreenplace.net/2012/01/16/python-parallelizing-cpu-bound-tasks-with-multiprocessing\" rel=\"nofollow noreferrer\">multiprocessing factorial</a>, I have tried to multiprocess a trivial force calculation module. \nMy main concern is the queue.get feature is not retrieving in the same order as expected. for example, instead of giving [5, 4, 3, 2, 1, 0, -1, -2, -3, -4, -5], it gives jumbled output based on different processor. 1) How can I append the results from the queue based on the process calling sequence? Should I use pool, map, lock or any such thing? 2)How can I avoid memory sync/overwriting issues?</p>\n\n<pre><code>def mp_worker(istart, iend, x, out_q1, out_q2):\n    global_N = len(x)\n    outdict1 = []\n    outdict2 = []\n    k = 0\n\n\n       for i in range(istart,iend,1):\n            temp_FX = 0\n            temp_FY = 0\n            for j in range(global_N):\n                if i != j:\n                    temp_FX = temp_FX + (x[j]-x[i])\n                    temp_FY = temp_FY + (x[j]-x[i])\n            outdict1.append(temp_FX)\n            outdict2.append(temp_FY)\n            k = k + 1\n\n    out_q1.put(outdict1)\n    out_q2.put(outdict2)\n\ndef mp_factorizer( nprocs):\n\n    x = mem.x\n    FORCE = mem.FORCE\n    N = len(FORCE)\n\n    out_q1 = multiprocessing.Queue()\n    out_q2 = multiprocessing.Queue()\n    chunksize = int(math.ceil(N / float(nprocs)))\n    procs = []\n\n    for i in range(nprocs):\n        istart = chunksize * i\n        iend = chunksize * (i + 1)\n        p = multiprocessing.Process(\n                target=mp_worker,\n                args=(istart, iend, x, out_q1, out_q2))\n        procs.append(p)\n        p.start()\n\n    # Collect all results into a single result dict. We know how many dicts\n    # with results to expect.\n    resultdict1 = []\n    resultdict2 = []\n    for i in range(nprocs):\n        resultdict1 = resultdict1 + out_q1.get()\n        resultdict2 = resultdict2 + out_q2.get()\n\n    # Wait for all worker processes to finish\n    for p in procs:\n        p.join()\n\n    return resultdict1\n</code></pre>\n"}, {"tags": ["python", "timer", "turtle-graphics"], "comments": [{"owner": {"reputation": 3197, "user_id": 4709300, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pGfqW.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/4709300/chris"}, "edited": false, "score": 1, "creation_date": 1492034328, "post_id": 43380118, "comment_id": 73822701, "body": "What&#39;s your problem, just write a loop and have it check the time and if it&#39;s been 3:30 quit, and by check the time I mean import time and utilize some function from it to get the time and subtract from the start time and if it equals 3:30 quit"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 7810445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a9faab3b6ecb8279890103dc918ff7a?s=128&d=identicon&r=PG&f=1", "display_name": "bubbub", "link": "https://stackoverflow.com/users/7810445/bubbub"}, "edited": false, "score": 0, "creation_date": 1492035407, "post_id": 43380398, "comment_id": 73823136, "body": "Thank you for your response. How would I make the program restart without re-opening a window? Should I &quot;window=turtle.Screen()&quot; outside the draw_art() function?"}, {"owner": {"reputation": 390, "user_id": 7299836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cb6d7dc256d73019c6ecc00f9d55d24?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Apple", "link": "https://stackoverflow.com/users/7299836/christopher-apple"}, "reply_to_user": {"reputation": 13, "user_id": 7810445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a9faab3b6ecb8279890103dc918ff7a?s=128&d=identicon&r=PG&f=1", "display_name": "bubbub", "link": "https://stackoverflow.com/users/7810445/bubbub"}, "edited": false, "score": 0, "creation_date": 1492036579, "post_id": 43380398, "comment_id": 73823540, "body": "What do you want it to do when you re-start? Do you want it to clear your progress so far and start with a clean yellow screen? Or just continue where it left off?"}], "tags": [], "owner": {"reputation": 390, "user_id": 7299836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cb6d7dc256d73019c6ecc00f9d55d24?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Apple", "link": "https://stackoverflow.com/users/7299836/christopher-apple"}, "is_accepted": false, "score": -1, "last_activity_date": 1492034711, "creation_date": 1492034711, "answer_id": 43380398, "question_id": 43380118, "link": "https://stackoverflow.com/questions/43380118/repeat-function-in-window-in-python/43380398#43380398", "title": "Repeat function in window in Python", "body": "<p>Here is a way you could do it. In your timed function, you record the start time. You then calculate the end time by adding 3 minutes and 30 seconds to the start time. </p>\n\n<p>In a loop, you can continue drawing while the current time is less than the end time.</p>\n\n<pre><code>from datetime import datetime, timedelta\n\ndef timed():\n    start_time = datetime.now()\n    end_time = start_time + timedelta(minutes=3, seconds=30)\n    while datetime.now() &lt; end_time:\n        draw_art()\n</code></pre>\n\n<p><a href=\"https://docs.python.org/2/library/datetime.html\" rel=\"nofollow noreferrer\">Here are some resources</a> on the python datetime module, it's the go-to module for any kind of time or date operations! </p>\n"}], "owner": {"reputation": 13, "user_id": 7810445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a9faab3b6ecb8279890103dc918ff7a?s=128&d=identicon&r=PG&f=1", "display_name": "bubbub", "link": "https://stackoverflow.com/users/7810445/bubbub"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 127, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1492885452, "creation_date": 1492033278, "question_id": 43380118, "link": "https://stackoverflow.com/questions/43380118/repeat-function-in-window-in-python", "title": "Repeat function in window in Python", "body": "<p>How do I repeat this turtle function in the window for a certain period of time? This code draws squares in a circular shape and I want it to restart once it is done and to do this for 3min and 30sec.</p>\n\n<pre><code>import turtle\nimport threading\n\n\n\ndef draw_square(some_shape):\n    for i in range (1,5):\n        some.forward(100)\n        some.right(90)\n\ndef draw_art():\n    window = turtle.Screen()\n    window.bgcolor(\"yellow\")\n    sqr = turtle.Turtle()\n    sqr.shape(\"triangle\")\n    sqr.color(\"purple\")\n    sqr.speed(1.5)\n    for i in range(1,37):\n        draw_square(sqr)\n        sqr.right(10)\n    window.exitonclick()\n\ndef timed():\n    threading.Timer(208.0, printit).start()\n    draw_art()\n\ntimed()\n</code></pre>\n"}, {"tags": ["python", "command-line", "doctest"], "comments": [{"owner": {"reputation": 3197, "user_id": 4709300, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pGfqW.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/4709300/chris"}, "edited": false, "score": 0, "creation_date": 1492033373, "post_id": 43380100, "comment_id": 73822323, "body": "Are you on Windows or Linux"}, {"owner": {"reputation": 7456, "user_id": 987846, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c0bd4793c1b752215191139c8213a131?s=128&d=identicon&r=PG", "display_name": "kakyo", "link": "https://stackoverflow.com/users/987846/kakyo"}, "reply_to_user": {"reputation": 3197, "user_id": 4709300, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pGfqW.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/4709300/chris"}, "edited": false, "score": 0, "creation_date": 1492033557, "post_id": 43380100, "comment_id": 73822400, "body": "@chbchb55 macOS"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1492033569, "post_id": 43380100, "comment_id": 73822404, "body": "Note: the flags for the interpreter itself are not the same as the flags for the script. Running <code>python myscript -v</code> passes the <code>-v</code> flag to the script, while <code>python -v myscript</code> would cause Python to interpret <code>-v</code> as a flag for the interpreter itself."}, {"owner": {"reputation": 7456, "user_id": 987846, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c0bd4793c1b752215191139c8213a131?s=128&d=identicon&r=PG", "display_name": "kakyo", "link": "https://stackoverflow.com/users/987846/kakyo"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1492033713, "post_id": 43380100, "comment_id": 73822470, "body": "@user2357112 Thanks for the reminder! I&#39;d like to know both cases. So I&#39;ll modify my question."}, {"owner": {"reputation": 3197, "user_id": 4709300, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pGfqW.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/4709300/chris"}, "edited": false, "score": 0, "creation_date": 1492033806, "post_id": 43380100, "comment_id": 73822511, "body": "Haven&#39;t you tried import sys and then sys.argv would contain your input of -v in an array"}, {"owner": {"reputation": 7456, "user_id": 987846, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c0bd4793c1b752215191139c8213a131?s=128&d=identicon&r=PG", "display_name": "kakyo", "link": "https://stackoverflow.com/users/987846/kakyo"}, "reply_to_user": {"reputation": 3197, "user_id": 4709300, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pGfqW.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/4709300/chris"}, "edited": false, "score": 0, "creation_date": 1492034051, "post_id": 43380100, "comment_id": 73822612, "body": "@chbchb55 well, that still requires me to send &quot;-v&quot; in my command-line. I&#39;d like to use my IDE to run python on the script but pass the switch in the script itself, sort of like a preprocessor."}, {"owner": {"reputation": 3197, "user_id": 4709300, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pGfqW.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/4709300/chris"}, "edited": false, "score": 0, "creation_date": 1492034196, "post_id": 43380100, "comment_id": 73822659, "body": "Have you tried importing sys and setting sys.argv to have the -v flag in there"}], "answers": [{"comments": [{"owner": {"reputation": 7456, "user_id": 987846, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c0bd4793c1b752215191139c8213a131?s=128&d=identicon&r=PG", "display_name": "kakyo", "link": "https://stackoverflow.com/users/987846/kakyo"}, "edited": false, "score": 0, "creation_date": 1492033614, "post_id": 43380149, "comment_id": 73822429, "body": "Thanks. If my title concern is impossible to achieve then I&#39;ll mark yours as correct."}], "tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1492033444, "creation_date": 1492033444, "answer_id": 43380149, "question_id": 43380100, "link": "https://stackoverflow.com/questions/43380100/tell-python-interpreter-to-use-a-interpreter-command-line-switch-in-the-script-i/43380149#43380149", "title": "Tell python interpreter to use a interpreter command-line switch in the script itself", "body": "<p>Pass <a href=\"https://docs.python.org/2/library/doctest.html#doctest.testmod\" rel=\"nofollow noreferrer\"><code>verbose=True</code></a> to <code>doctest.testmod</code>:</p>\n\n<pre><code>if __name__ == '__main__':\n    import doctest\n    doctest.testmod(verbose=True)\n</code></pre>\n\n<p>Messing with the command-line flags is the wrong way to go.</p>\n"}, {"tags": [], "owner": {"reputation": 111, "user_id": 7490709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0314240ba1ea517501043a4dcf8a1aa?s=128&d=identicon&r=PG&f=1", "display_name": "DiphthongException", "link": "https://stackoverflow.com/users/7490709/diphthongexception"}, "is_accepted": false, "score": 0, "last_activity_date": 1492042741, "creation_date": 1492042741, "answer_id": 43381615, "question_id": 43380100, "link": "https://stackoverflow.com/questions/43380100/tell-python-interpreter-to-use-a-interpreter-command-line-switch-in-the-script-i/43381615#43381615", "title": "Tell python interpreter to use a interpreter command-line switch in the script itself", "body": "<p>You could consider using environment variables.\ne.g.,</p>\n\n<pre><code># from the command line\nexport VERBOSE_MODE=True\n\n# in the Python code\nimport os\nverbose_mode = os.environ.get('VERBOSE_MODE', False)\n</code></pre>\n\n<p>You could have this be a fallback mechanism if the flag isn't provided on the command line.</p>\n"}, {"tags": [], "owner": {"reputation": 7456, "user_id": 987846, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c0bd4793c1b752215191139c8213a131?s=128&d=identicon&r=PG", "display_name": "kakyo", "link": "https://stackoverflow.com/users/987846/kakyo"}, "is_accepted": true, "score": 0, "last_activity_date": 1492299344, "creation_date": 1492299344, "answer_id": 43432280, "question_id": 43380100, "link": "https://stackoverflow.com/questions/43380100/tell-python-interpreter-to-use-a-interpreter-command-line-switch-in-the-script-i/43432280#43432280", "title": "Tell python interpreter to use a interpreter command-line switch in the script itself", "body": "<p>I sort of got what I want. On a system with bash shell, I could simply add the following to the top of my script</p>\n\n<pre><code>#! /usr/local/bin/python3 -m doctest -v\n</code></pre>\n\n<p>and then</p>\n\n<pre><code>chmod +x myscript.py\n</code></pre>\n\n<p>Don't know how to do that with Windows (maybe wait for the Linux subsystem for Win10), but fortunately I mainly work on macOS.</p>\n\n<p>This works for other command line switches as well.</p>\n"}], "owner": {"reputation": 7456, "user_id": 987846, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c0bd4793c1b752215191139c8213a131?s=128&d=identicon&r=PG", "display_name": "kakyo", "link": "https://stackoverflow.com/users/987846/kakyo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 0, "accepted_answer_id": 43432280, "answer_count": 3, "score": 0, "last_activity_date": 1492299344, "creation_date": 1492033218, "last_edit_date": 1492034247, "question_id": 43380100, "link": "https://stackoverflow.com/questions/43380100/tell-python-interpreter-to-use-a-interpreter-command-line-switch-in-the-script-i", "title": "Tell python interpreter to use a interpreter command-line switch in the script itself", "body": "<p>Is it possible to tell the python interpreter to run my script using specific command line switches. </p>\n\n<p>For example, </p>\n\n<p>If I have doctests enabled, I'd like to add </p>\n\n<pre><code>if __name__ == '__main__':\n    import doctest\n    doctest.testmod()\n</code></pre>\n\n<p>to create a self-contained test runner.</p>\n\n<p>However, this requires that I add <code>-v</code> switch to run the script:</p>\n\n<pre><code>python myscript -v\n</code></pre>\n\n<p>This is not always convenient in an editor like Sublime where the build system defaults to no switches. I know I can create a custom builder but that's suboptimal compared to specifying which switches to use for certain scripts.</p>\n\n<p>Is it possible and if yes, how?</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Below someone pointed out that the doctest case involves a script flag instead of an interpreter switch. But I really want to know about both cases.</p>\n\n<p>Also although <code>testmod(verbose=True)</code> can solve that particular case, I'm still interested in the original question.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1492033148, "post_id": 43380060, "comment_id": 73822211, "body": "This isn&#39;t Java. You don&#39;t need to stick everything in a class. Also, defining variables at class scope creates class variables, not instance variables."}, {"owner": {"reputation": 5, "user_id": 6636297, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25ff3dddb33245b7dc02e960384a2f0e?s=128&d=identicon&r=PG&f=1", "display_name": "valkyrd", "link": "https://stackoverflow.com/users/6636297/valkyrd"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1492033186, "post_id": 43380060, "comment_id": 73822226, "body": "Yeah, I&#39;m used to Java and I haven&#39;t coded much in Python"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1492033228, "post_id": 43380060, "comment_id": 73822248, "body": "What did you think <code>i.fire()</code> was going to do? Why did you expect <code>i</code> to have a <code>fire</code> method?"}, {"owner": {"reputation": 730, "user_id": 6941046, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rDqanJg0rQU/AAAAAAAAAAI/AAAAAAAAACg/0Hf929Qb7uk/photo.jpg?sz=128", "display_name": "Elliot Roberts", "link": "https://stackoverflow.com/users/6941046/elliot-roberts"}, "edited": false, "score": 0, "creation_date": 1492033239, "post_id": 43380060, "comment_id": 73822256, "body": "You don&#39;t call anything in the given code, could you show an example of it&#39;s use?"}, {"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 1, "creation_date": 1492033340, "post_id": 43380060, "comment_id": 73822309, "body": "<code>i</code> is a pair of synapses."}, {"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1492033348, "post_id": 43380060, "comment_id": 73822310, "body": "<code>self.inputs</code> is a list of tuples, so if <code>i</code> is in <code>self.inputs</code> it\u2019s going to be a tuple and not have a <code>fire</code> method."}, {"owner": {"reputation": 5, "user_id": 6636297, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25ff3dddb33245b7dc02e960384a2f0e?s=128&d=identicon&r=PG&f=1", "display_name": "valkyrd", "link": "https://stackoverflow.com/users/6636297/valkyrd"}, "edited": false, "score": 0, "creation_date": 1492033350, "post_id": 43380060, "comment_id": 73822311, "body": "Since only in the connect_synapse method I append a Synapse instance to inputs, I assume that input is gonna contain only Synapse instances which have a fire method"}, {"owner": {"reputation": 5, "user_id": 6636297, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25ff3dddb33245b7dc02e960384a2f0e?s=128&d=identicon&r=PG&f=1", "display_name": "valkyrd", "link": "https://stackoverflow.com/users/6636297/valkyrd"}, "reply_to_user": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1492033436, "post_id": 43380060, "comment_id": 73822354, "body": "@Ryan Replacing &quot;inputs = []&quot; with &quot;inputs = None&quot; still returns the same error"}, {"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1492033441, "post_id": 43380060, "comment_id": 73822356, "body": "Should <code>connect_synapse(a, b)</code> be like <code>connect_synapse(a); connect_synapse(b)</code>? If so, use <code>self.inputs.extend(synapses)</code> instead of <code>append</code>. Right now you\u2019re telling Python \u2013 by writing <code>*synapse</code> \u2013 to put all of the arguments passed into a tuple."}, {"owner": {"reputation": 5, "user_id": 6636297, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25ff3dddb33245b7dc02e960384a2f0e?s=128&d=identicon&r=PG&f=1", "display_name": "valkyrd", "link": "https://stackoverflow.com/users/6636297/valkyrd"}, "reply_to_user": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1492033595, "post_id": 43380060, "comment_id": 73822422, "body": "@Ryan doing that gives me the error &quot;AttributeError: &#39;Synapse&#39; object has no attribute &#39;fire&#39;&quot; in the same line"}, {"owner": {"reputation": 5, "user_id": 6636297, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25ff3dddb33245b7dc02e960384a2f0e?s=128&d=identicon&r=PG&f=1", "display_name": "valkyrd", "link": "https://stackoverflow.com/users/6636297/valkyrd"}, "reply_to_user": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1492033926, "post_id": 43380060, "comment_id": 73822559, "body": "@Ryan Thanks for the help Ryan :D"}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 6636297, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25ff3dddb33245b7dc02e960384a2f0e?s=128&d=identicon&r=PG&f=1", "display_name": "valkyrd", "link": "https://stackoverflow.com/users/6636297/valkyrd"}, "edited": false, "score": 0, "creation_date": 1492033798, "post_id": 43380194, "comment_id": 73822507, "body": "Doing that gives me the error &quot;AttributeError: &#39;Synapse&#39; object has no attribute &#39;fire&#39;&quot; in the same line"}, {"owner": {"reputation": 61, "user_id": 7850705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40da8a1e8866faa4cd31a09c266e3685?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Scott", "link": "https://stackoverflow.com/users/7850705/adam-scott"}, "reply_to_user": {"reputation": 5, "user_id": 6636297, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25ff3dddb33245b7dc02e960384a2f0e?s=128&d=identicon&r=PG&f=1", "display_name": "valkyrd", "link": "https://stackoverflow.com/users/6636297/valkyrd"}, "edited": false, "score": 0, "creation_date": 1492033898, "post_id": 43380194, "comment_id": 73822547, "body": "Should &quot;fire&quot; be in the Synapse class then ?"}], "tags": [], "owner": {"reputation": 61, "user_id": 7850705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40da8a1e8866faa4cd31a09c266e3685?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Scott", "link": "https://stackoverflow.com/users/7850705/adam-scott"}, "is_accepted": true, "score": 0, "last_activity_date": 1492033815, "last_edit_date": 1492033815, "creation_date": 1492033715, "answer_id": 43380194, "question_id": 43380060, "link": "https://stackoverflow.com/questions/43380060/python-attributeerror-tuple-object-has-no-attribute-fire/43380194#43380194", "title": "Python - AttributeError: &#39;tuple&#39; object has no attribute &#39;fire&#39;", "body": "<p>def connect_synapse(self, *synapse):\n            self.inputs.append(synapse)</p>\n\n<p>This is receiving multiple arguments \"*synapse\" as a tuple.\nThe tuple is then being appended to your list.\nYou should consider using <a href=\"https://docs.python.org/2/tutorial/datastructures.html\" rel=\"nofollow noreferrer\">extend</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 5, "user_id": 6636297, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25ff3dddb33245b7dc02e960384a2f0e?s=128&d=identicon&r=PG&f=1", "display_name": "valkyrd", "link": "https://stackoverflow.com/users/6636297/valkyrd"}, "is_accepted": false, "score": 0, "last_activity_date": 1492033904, "creation_date": 1492033904, "answer_id": 43380239, "question_id": 43380060, "link": "https://stackoverflow.com/questions/43380060/python-attributeerror-tuple-object-has-no-attribute-fire/43380239#43380239", "title": "Python - AttributeError: &#39;tuple&#39; object has no attribute &#39;fire&#39;", "body": "<p>Just realized the error:</p>\n\n<p>Instead of i.fire() I should use i.origin.fire() and instead of self.inputs.append(synapse) i should use self.inputs.extend(synapse)</p>\n"}, {"tags": [], "owner": {"reputation": 5, "user_id": 7858763, "user_type": "registered", "profile_image": "https://graph.facebook.com/1393465337378223/picture?type=large", "display_name": "Hugo Fragata", "link": "https://stackoverflow.com/users/7858763/hugo-fragata"}, "is_accepted": false, "score": 0, "last_activity_date": 1492034477, "creation_date": 1492034477, "answer_id": 43380342, "question_id": 43380060, "link": "https://stackoverflow.com/questions/43380060/python-attributeerror-tuple-object-has-no-attribute-fire/43380342#43380342", "title": "Python - AttributeError: &#39;tuple&#39; object has no attribute &#39;fire&#39;", "body": "<p>Your <code>i.fire()</code> is not working because <code>self.inputs[]</code> of the Class <code>Neuron</code> contains <code>Synapses</code> and not other <code>Neurons</code>.</p>\n"}], "owner": {"reputation": 5, "user_id": 6636297, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25ff3dddb33245b7dc02e960384a2f0e?s=128&d=identicon&r=PG&f=1", "display_name": "valkyrd", "link": "https://stackoverflow.com/users/6636297/valkyrd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 407, "favorite_count": 0, "accepted_answer_id": 43380194, "answer_count": 3, "score": 0, "last_activity_date": 1492034477, "creation_date": 1492033044, "question_id": 43380060, "link": "https://stackoverflow.com/questions/43380060/python-attributeerror-tuple-object-has-no-attribute-fire", "title": "Python - AttributeError: &#39;tuple&#39; object has no attribute &#39;fire&#39;", "body": "<p>I'm learning to make a basic neural network and I'm trying to make one that can add numbers together in python, but I keep getting this error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"C:/Users/tomas/Desktop/projects/neuralnetwork/main.py\", line 37, in &lt;module&gt;\n    class Main:\n  File \"C:/Users/tomas/Desktop/projects/neuralnetwork/main.py\", line 76, in Main\n    out.fire()\n  File \"C:/Users/tomas/Desktop/projects/neuralnetwork/main.py\", line 23, in fire\n    i.fire()\nAttributeError: 'tuple' object has no attribute 'fire'\n</code></pre>\n\n<p>I'm new to python so forgive me if I made some obvious mistake.</p>\n\n<p>Code:</p>\n\n<pre><code>class Synapse:\n    origin = None\n    weight, learningRate = 0.5, 0.25\n\n    def __init__(self, origin):\n        self.origin = origin\n\n    def adjust_weight(self, result, expected):\n        self.weight *= self.learningRate * (expected - result)\n\n\nclass Neuron:\n    threshold, output = None, None\n    inputs = []\n\n    def __init__(self, threshold, output):\n        self.threshold = threshold\n        self.output = output\n\n    def fire(self):\n        weighed_input = 0\n        for i in self.inputs:\n            i.fire()\n            weighed_input += i.weight * i.origin.output\n        if weighed_input &gt;= self.threshold:\n            self.output = weighed_input\n        else:\n            self.output = 0\n\n    def connect_synapse(self, *synapse):\n        self.inputs.append(synapse)\n\n    def clear_synapses(self):\n        self.inputs = []\n\nclass Main:\n    training_data = [[[1, 2], [3]],\n                     [[2, 0], [2]],\n                     [[1, 1], [2]],\n                     [[3, 0], [3]],\n                     [[3, 1], [4]]]\n\n    src1 = Neuron(0, None)\n    src2 = Neuron(0, None)\n\n    hid1 = Neuron(1, None)\n    hid2 = Neuron(1, None)\n\n    out = Neuron(0, None)\n\n    syn1 = Synapse(src1)\n    syn2 = Synapse(src2)\n    syn3 = Synapse(hid1)\n    syn4 = Synapse(hid2)\n\n    while True:\n        error_count = 0\n\n        hid1.clear_synapses()\n        hid2.clear_synapses()\n        hid1.connect_synapse(syn1, syn2)\n        hid2.connect_synapse(syn1, syn2)\n\n        out.clear_synapses()\n        out.connect_synapse(syn3, syn4)\n\n        for i in range(0, 5):\n            input1 = training_data[i][0][0]\n            input2 = training_data[i][0][1]\n            expected = training_data[i][1][0]\n\n            src1.output = input1\n            src2.output = input2\n\n            out.fire()\n            result = out.output\n            if result != expected:\n                error_count += 1\n                syn1.adjust_weight(result, expected)\n                syn2.adjust_weight(result, expected)\n\n             print(\"Expected \", expected, \"\\nGot \", result, \"\\nError count: \", error_count, \"\\n\\n\")\n\n        if error_count == 0:\n            break\n</code></pre>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["python", "return"], "comments": [{"owner": {"reputation": 730, "user_id": 6941046, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rDqanJg0rQU/AAAAAAAAAAI/AAAAAAAAACg/0Hf929Qb7uk/photo.jpg?sz=128", "display_name": "Elliot Roberts", "link": "https://stackoverflow.com/users/6941046/elliot-roberts"}, "edited": false, "score": 0, "creation_date": 1492033085, "post_id": 43380042, "comment_id": 73822191, "body": "Define benefit?"}, {"owner": {"reputation": 10158, "user_id": 1209921, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZxrGg.gif?s=128&g=1", "display_name": "Matthias", "link": "https://stackoverflow.com/users/1209921/matthias"}, "edited": false, "score": 0, "creation_date": 1492033192, "post_id": 43380042, "comment_id": 73822228, "body": "<a href=\"https://docs.python.org/3/reference/datamodel.html#object.__iter__\" rel=\"nofollow noreferrer\"><code>__iter__</code> in the documentation</a>. You can start reading there. Short answer: <code>__iter__</code> returns <code>self</code> because it&#39;s needed for an iterator."}, {"owner": {"reputation": 311, "user_id": 7191964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb3e42ef2ed1290bb30a880aabd54cbd?s=128&d=identicon&r=PG&f=1", "display_name": "AmrElgendy", "link": "https://stackoverflow.com/users/7191964/amrelgendy"}, "reply_to_user": {"reputation": 730, "user_id": 6941046, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rDqanJg0rQU/AAAAAAAAAAI/AAAAAAAAACg/0Hf929Qb7uk/photo.jpg?sz=128", "display_name": "Elliot Roberts", "link": "https://stackoverflow.com/users/6941046/elliot-roberts"}, "edited": false, "score": 0, "creation_date": 1492033263, "post_id": 43380042, "comment_id": 73822267, "body": "@Elliot RobertsWhat is the use of ?"}, {"owner": {"reputation": 730, "user_id": 6941046, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rDqanJg0rQU/AAAAAAAAAAI/AAAAAAAAACg/0Hf929Qb7uk/photo.jpg?sz=128", "display_name": "Elliot Roberts", "link": "https://stackoverflow.com/users/6941046/elliot-roberts"}, "edited": false, "score": 0, "creation_date": 1492033385, "post_id": 43380042, "comment_id": 73822330, "body": "<code>return self</code> would return the object that the method was called from."}], "answers": [{"comments": [{"owner": {"reputation": 311, "user_id": 7191964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb3e42ef2ed1290bb30a880aabd54cbd?s=128&d=identicon&r=PG&f=1", "display_name": "AmrElgendy", "link": "https://stackoverflow.com/users/7191964/amrelgendy"}, "edited": false, "score": 0, "creation_date": 1492033732, "post_id": 43380123, "comment_id": 73822480, "body": "Is that mean <code>self.a = 0         self.b = 1</code> Will be implemented for one time ??"}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "reply_to_user": {"reputation": 311, "user_id": 7191964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb3e42ef2ed1290bb30a880aabd54cbd?s=128&d=identicon&r=PG&f=1", "display_name": "AmrElgendy", "link": "https://stackoverflow.com/users/7191964/amrelgendy"}, "edited": false, "score": 0, "creation_date": 1492033990, "post_id": 43380123, "comment_id": 73822583, "body": "@AmrElgendy <code>__iter__</code> is run once to initialize an iterator (that is, an object with a <code>__next__</code> method) and <code>self.a</code> and <code>self.b</code> are used in that <code>__next__</code> method. It&#39;s a silly way to implement the object."}, {"owner": {"reputation": 311, "user_id": 7191964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb3e42ef2ed1290bb30a880aabd54cbd?s=128&d=identicon&r=PG&f=1", "display_name": "AmrElgendy", "link": "https://stackoverflow.com/users/7191964/amrelgendy"}, "edited": false, "score": 0, "creation_date": 1492034569, "post_id": 43380123, "comment_id": 73822796, "body": "sorry , this is last question What I understand is <code>__iter__</code> implement for one time when calling it from <code>__next__</code>  that&#39;s right ??"}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "reply_to_user": {"reputation": 311, "user_id": 7191964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb3e42ef2ed1290bb30a880aabd54cbd?s=128&d=identicon&r=PG&f=1", "display_name": "AmrElgendy", "link": "https://stackoverflow.com/users/7191964/amrelgendy"}, "edited": false, "score": 0, "creation_date": 1492034865, "post_id": 43380123, "comment_id": 73822922, "body": "@AmrElgendy no, but you&#39;re digging way deeper into the language than you probably need to be. If you&#39;re interested, read the official docs."}], "tags": [], "owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "is_accepted": false, "score": 1, "last_activity_date": 1492033777, "last_edit_date": 1492033777, "creation_date": 1492033311, "answer_id": 43380123, "question_id": 43380042, "link": "https://stackoverflow.com/questions/43380042/purpose-of-return-self-python/43380123#43380123", "title": "Purpose of return self python", "body": "<p>This is needlessly complex code. Pay little attention to it. There's no reason on earth to implement it this way.</p>\n\n<p>That being said, what it does is this:</p>\n\n<pre><code>class Fib: \n\n    \"\"\"Implements the Fibonacci sequence.\"\"\"\n\n    def __init__(self, max_):\n        self.max = max_\n\n    def __iter__(self):\n        \"\"\"Initializes and returns itself as an iterable.\"\"\"\n\n        self.a = 0\n        self.b = 1\n        return self\n\n    def __next__(self):\n        \"\"\"What gets run on each execution of that iterable.\"\"\"\n\n        fib = self.a\n        if fib &gt; self.max:\n            raise StopIteration\n        self.a, self.b = self.b, self.a + self.b  # increment\n        return fib\n</code></pre>\n\n<p>This is all much easier to express as:</p>\n\n<pre><code>def fib(max_):\n    a, b = 0, 1\n    while b &lt;= max_:\n        out = a\n        a, b = b, a+b\n        yield out\n</code></pre>\n\n<p>Examples:</p>\n\n<pre><code>&gt;&gt;&gt; fib_obj = Fib(20)\n&gt;&gt;&gt; for n in fib_obj:\n...     print(n)\n\n&gt;&gt;&gt; for n in Fib(20):\n...     print(n)\n\n&gt;&gt;&gt; for n in fib(20):\n...     print(n)\n# all give....\n0\n1\n1\n2\n3\n5\n8\n13\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 311, "user_id": 7191964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb3e42ef2ed1290bb30a880aabd54cbd?s=128&d=identicon&r=PG&f=1", "display_name": "AmrElgendy", "link": "https://stackoverflow.com/users/7191964/amrelgendy"}, "edited": false, "score": 0, "creation_date": 1492035544, "post_id": 43380360, "comment_id": 73823197, "body": "@AmrElgendy you&#39;re welcome. I have added one more bit of information at the end, so check out the latest edit."}, {"owner": {"reputation": 1327, "user_id": 1110636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/709ba1cdc862cffcbab3c518209e634d?s=128&d=identicon&r=PG", "display_name": "Timir", "link": "https://stackoverflow.com/users/1110636/timir"}, "edited": false, "score": 0, "creation_date": 1532485844, "post_id": 43380360, "comment_id": 89988977, "body": "I&#39;d imagine it&#39;s possible to modify the code and make your iterator reusable. Reset <code>index</code> to <code>len(data)</code> just before you raise StopIteration."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 1327, "user_id": 1110636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/709ba1cdc862cffcbab3c518209e634d?s=128&d=identicon&r=PG", "display_name": "Timir", "link": "https://stackoverflow.com/users/1110636/timir"}, "edited": false, "score": 0, "creation_date": 1534349068, "post_id": 43380360, "comment_id": 90676872, "body": "@Timir you probably wouldn&#39;t want to do that though, then it would become an infinite iterator. In general, iterators <i>should not be re-usable</i>."}, {"owner": {"reputation": 730, "user_id": 9815708, "user_type": "registered", "profile_image": "https://graph.facebook.com/872534512905210/picture?type=large", "display_name": "Marine Galantin", "link": "https://stackoverflow.com/users/9815708/marine-galantin"}, "edited": false, "score": 0, "creation_date": 1606514699, "post_id": 43380360, "comment_id": 114992565, "body": "Are we talking about method cascading or method chaining ? Apparently, in the wikipedia link you sent, these two things are different."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 730, "user_id": 9815708, "user_type": "registered", "profile_image": "https://graph.facebook.com/872534512905210/picture?type=large", "display_name": "Marine Galantin", "link": "https://stackoverflow.com/users/9815708/marine-galantin"}, "edited": false, "score": 1, "creation_date": 1606516413, "post_id": 43380360, "comment_id": 114992958, "body": "@MarineGalantin I think there is some ambiguity, from the link, &quot;Cascading can be implemented in terms of chaining by having the methods return the target object (receiver, this, self).&quot; although some might only consider it cascading if you support a particular kind of sugar."}], "tags": [], "owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "is_accepted": true, "score": 45, "last_activity_date": 1578475738, "last_edit_date": 1578475738, "creation_date": 1492034547, "answer_id": 43380360, "question_id": 43380042, "link": "https://stackoverflow.com/questions/43380042/purpose-of-return-self-python/43380360#43380360", "title": "Purpose of return self python", "body": "<p>Returning <code>self</code> from a method simply means that your method returns a reference to the instance object on which it was called. This can sometimes be seen in use with object oriented APIs that are designed as a <a href=\"https://en.wikipedia.org/wiki/Fluent_interface\" rel=\"noreferrer\">fluent interface</a> that encourages <a href=\"https://en.wikipedia.org/wiki/Method_cascading\" rel=\"noreferrer\">method cascading</a>. So, for example, </p>\n\n<pre><code>&gt;&gt;&gt; class Counter(object):\n...     def __init__(self, start=1):\n...         self.val = start\n...     def increment(self):\n...         self.val += 1\n...         return self\n...     def decrement(self):\n...         self.val -= 1\n...         return self\n...\n&gt;&gt;&gt; c = Counter()\n</code></pre>\n\n<p>Now we can use method cascading:</p>\n\n<pre><code>&gt;&gt;&gt; c.increment().increment().decrement()\n&lt;__main__.Counter object at 0x1020c1390&gt;\n</code></pre>\n\n<p>Notice, the last call to <code>decrement()</code> returned <code>&lt;__main__.Counter object at 0x1020c1390&gt;</code>, which <em>is</em> <code>self</code>.\nNow:</p>\n\n<pre><code>&gt;&gt;&gt; c.val\n2\n&gt;&gt;&gt;\n</code></pre>\n\n<p>Notice, you cannot do this if you did not return <code>self</code>:</p>\n\n<pre><code>&gt;&gt;&gt; class Counter(object):\n...     def __init__(self, start=1):\n...         self.val = start\n...     def increment(self):\n...         self.val += 1\n...         # implicitely return `None`\n...     def decrement(self):\n...         self.val -= 1\n...         # implicitely return `None`\n...\n&gt;&gt;&gt; c = Counter()\n&gt;&gt;&gt; c.increment().increment()\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nAttributeError: 'NoneType' object has no attribute 'increment'\n&gt;&gt;&gt; c\n&lt;__main__.Counter object at 0x1020c15f8&gt;\n&gt;&gt;&gt; c.val\n2\n&gt;&gt;&gt;\n</code></pre>\n\n<p>Notice, not everyone is a fan of \"method cascading\" design. Python built-ins do not tend do this, so, <code>list</code> for example:</p>\n\n<pre><code>&gt;&gt;&gt; x = list()\n&gt;&gt;&gt; x.append(1).append(2)\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nAttributeError: 'NoneType' object has no attribute 'append'\n&gt;&gt;&gt;\n</code></pre>\n\n<p>The one place you <em>do</em> often see this is when your class implements the <code>iterator</code> protocol, where <code>iter</code> on an iterator returns <code>self</code> by convention, although this is suggested by <a href=\"https://docs.python.org/3/tutorial/classes.html#iterators\" rel=\"noreferrer\">the docs</a>:</p>\n\n<blockquote>\n  <p>Having seen the mechanics behind the iterator protocol, it is easy to\n  add iterator behavior to your classes. Define an <code>__iter__()</code> method\n  which returns an object with a <code>__next__()</code> method. If the class\n  defines <code>__next__()</code>, then <code>__iter__()</code> can just return <code>self</code>:</p>\n\n<pre><code>class Reverse:\n    \"\"\"Iterator for looping over a sequence backwards.\"\"\"\n    def __init__(self, data):\n        self.data = data\n        self.index = len(data)\n\n    def __iter__(self):\n        return self\n\n    def __next__(self):\n        if self.index == 0:\n            raise StopIteration\n        self.index = self.index - 1\n        return self.data[self.index]\n</code></pre>\n</blockquote>\n\n<p>Notice, this in effect makes your iterator only useful for a single pass (as it <strong>should</strong> be to properly follow the iterator protocol):</p>\n\n<pre><code>&gt;&gt;&gt; x = [1, 2, 3, 4]\n&gt;&gt;&gt; it = iter(x)\n&gt;&gt;&gt; list(it)\n[1, 2, 3, 4]\n&gt;&gt;&gt; list(it)\n[]\n&gt;&gt;&gt; next(it)\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nStopIteration\n&gt;&gt;&gt;\n</code></pre>\n"}], "owner": {"reputation": 311, "user_id": 7191964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb3e42ef2ed1290bb30a880aabd54cbd?s=128&d=identicon&r=PG&f=1", "display_name": "AmrElgendy", "link": "https://stackoverflow.com/users/7191964/amrelgendy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37893, "favorite_count": 14, "accepted_answer_id": 43380360, "answer_count": 2, "score": 25, "last_activity_date": 1578475738, "creation_date": 1492032984, "last_edit_date": 1536566331, "question_id": 43380042, "link": "https://stackoverflow.com/questions/43380042/purpose-of-return-self-python", "title": "Purpose of return self python", "body": "<p>I have a problem with <code>return self</code></p>\n\n<pre><code>class Fib: \n    def __init__(self, max):\n        self.max = max\n    def __iter__(self): \n        self.a = 0\n        self.b = 1\n        return self\n    def __next__(self):\n        fib = self.a\n        if fib &gt; self.max:\n            raise StopIteration\n        self.a, self.b = self.b, self.a + self.b\n        return fib\n</code></pre>\n\n<p>I have already seen this question <a href=\"https://stackoverflow.com/questions/37320751/in-python-does-return-self-return-a-copy-of-the-object-or-a-pointer\">return self problem</a> but I can't understand what the benefit is of <code>return self</code>?</p>\n"}, {"tags": ["python", "pandas", "numpy", "dataframe"], "answers": [{"comments": [{"owner": {"reputation": 121, "user_id": 7724154, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/PQRGs.png?s=128&g=1", "display_name": "Shiranai", "link": "https://stackoverflow.com/users/7724154/shiranai"}, "edited": false, "score": 0, "creation_date": 1492033247, "post_id": 43380037, "comment_id": 73822259, "body": "Sadly, it doesn&#39;t work, it returns: Traceback (most recent call last):   File &quot;***&quot;, line 7, in &lt;module&gt;     del b [&quot;A&quot;] TypeError: &#39;method&#39; object does not support item deletion"}, {"owner": {"reputation": 54855, "user_id": 37751, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/GiarY.jpg?s=128&g=1", "display_name": "JD Long", "link": "https://stackoverflow.com/users/37751/jd-long"}, "reply_to_user": {"reputation": 121, "user_id": 7724154, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/PQRGs.png?s=128&g=1", "display_name": "Shiranai", "link": "https://stackoverflow.com/users/7724154/shiranai"}, "edited": false, "score": 0, "creation_date": 1492033379, "post_id": 43380037, "comment_id": 73822327, "body": "in your example, @Ryunaq it works. maybe you should update your example."}, {"owner": {"reputation": 121, "user_id": 7724154, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/PQRGs.png?s=128&g=1", "display_name": "Shiranai", "link": "https://stackoverflow.com/users/7724154/shiranai"}, "edited": false, "score": 0, "creation_date": 1492033657, "post_id": 43380037, "comment_id": 73822451, "body": "Yep it worked, I forgot to add the parenthesis to .copy, my bad, thanks!"}], "tags": [], "owner": {"reputation": 25463, "user_id": 5003756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8BUMb.jpg?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/5003756/james"}, "is_accepted": true, "score": 3, "last_activity_date": 1492033491, "last_edit_date": 1492033491, "creation_date": 1492032949, "answer_id": 43380037, "question_id": 43380015, "link": "https://stackoverflow.com/questions/43380015/deleting-a-column-of-a-dataframe-without-deleting-the-original-in-python/43380037#43380037", "title": "Deleting a column of a DataFrame without deleting the original in python", "body": "<p>In your example, <code>x</code> and <code>y</code> both reference the same underlying object.  If you want to make a copy of <code>x</code>, you can use:</p>\n\n<pre><code>y = x.copy()\n</code></pre>\n\n<p>Example:</p>\n\n<pre><code>x = pd.DataFrame({\"A\": [1, 2], \"B\": [3, 4]})\ny = x.copy()\ndel y[\"A\"]\nprint(x)\nprint('-'*6)\nprint(y)\n\n# returns:\n   A  B\n0  1  3\n1  2  4\n------\n   B\n0  3\n1  4\n</code></pre>\n"}], "owner": {"reputation": 121, "user_id": 7724154, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/PQRGs.png?s=128&g=1", "display_name": "Shiranai", "link": "https://stackoverflow.com/users/7724154/shiranai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 43380037, "answer_count": 1, "score": 0, "last_activity_date": 1492033491, "creation_date": 1492032809, "question_id": 43380015, "link": "https://stackoverflow.com/questions/43380015/deleting-a-column-of-a-dataframe-without-deleting-the-original-in-python", "title": "Deleting a column of a DataFrame without deleting the original in python", "body": "<p>I'm not sure how to explain the question so just look at the simple code.</p>\n\n<pre><code>import numpy as np\nimport pandas as pd\n\nx = pd.DataFrame({\"A\": [1, 2], \"B\": [3, 4]})\ny = x\ndel y [\"A\"]\nprint(x)\nprint(y)\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>   B\n0  3\n1  4\n   B\n0  3\n1  4\n</code></pre>\n\n<p>As you can see, deleting a column from y deletes it from x too, is there any way to delete the column from y without deleting it on x too?</p>\n"}, {"tags": ["python", "django", "database"], "answers": [{"tags": [], "owner": {"reputation": 5358, "user_id": 6731765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/851df22ef596b0dad4e237f738852108?s=128&d=identicon&r=PG&f=1", "display_name": "NS0", "link": "https://stackoverflow.com/users/6731765/ns0"}, "is_accepted": true, "score": 5, "last_activity_date": 1492033046, "creation_date": 1492033046, "answer_id": 43380061, "question_id": 43380001, "link": "https://stackoverflow.com/questions/43380001/how-to-filter-objects-with-many-to-many-relationships-in-django/43380061#43380061", "title": "How to filter objects with many to many relationships in django", "body": "<p>I think you should just be able to do </p>\n\n<pre><code>words = Word.objects.filter(users=user)\n</code></pre>\n\n<p>And to check for several users, you could do things like</p>\n\n<pre><code>words = Word.objects.filter(users__in=[user1,user2])\n</code></pre>\n\n<p>Have a look at the <a href=\"https://docs.djangoproject.com/en/1.11/topics/db/examples/many_to_many/\" rel=\"noreferrer\">docs</a> for examples.</p>\n"}], "owner": {"reputation": 393, "user_id": 7587799, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-cJg1_xCraUQ/AAAAAAAAAAI/AAAAAAAAAKU/Z_3exjMj9is/photo.jpg?sz=128", "display_name": "G&#246;ktu\u011f A\u015f&#231;\u0131", "link": "https://stackoverflow.com/users/7587799/g%c3%b6ktu%c4%9f-a%c5%9f%c3%a7%c4%b1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1524, "favorite_count": 1, "accepted_answer_id": 43380061, "answer_count": 1, "score": 4, "last_activity_date": 1492064414, "creation_date": 1492032745, "last_edit_date": 1492064414, "question_id": 43380001, "link": "https://stackoverflow.com/questions/43380001/how-to-filter-objects-with-many-to-many-relationships-in-django", "title": "How to filter objects with many to many relationships in django", "body": "<p>I am new at Django and I am trying to discover many to many relationships.</p>\n\n<p>I have a word model which has a many to many relationship with the default user model:</p>\n\n<pre><code>from django.db import models\nfrom django.contrib.auth.models import User\n\nclass Word(models.Model):\n    definition = models.CharField(max_length=350)\n    turkish = models.CharField(max_length=50)\n    english = models.CharField(max_length=50)\n    users = models.ManyToManyField(User)\n\n    def __str__(self):\n        return self.english\n\n    def summary(self):\n        return self.definition[:50] + \"...\"\n</code></pre>\n\n<p>I have an example word object belonging to two users and I want only these two users to see this word object on their feedpage. How should I correct the view function below?</p>\n\n<pre><code>from django.shortcuts import render\nfrom django.contrib.auth.models import User\n\n@login_required\ndef home(request):\n    user = request.user \n    small = user.username.title()\n    words = Word.objects.filter(??????) #order_by('-english')\n    return render(request, 'intro.html', {'words': words, 'small' : small})\n</code></pre>\n\n<p>Basicly, I want to check if a word object's user list contains authourized user, and if it contains, the word will be taken from database. How can I code this?</p>\n"}, {"tags": ["java", "python", "ssl", "https", "openssl"], "comments": [{"owner": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 1, "creation_date": 1492039339, "post_id": 43379958, "comment_id": 73824346, "body": "You did not explain your setup very well. Who is server, who is client? Which side is using which certificates and keys as a) server certificate b) CA certificate c) client certificate (if client certificates are used)?"}, {"owner": {"reputation": 310, "user_id": 3164319, "user_type": "registered", "profile_image": "https://graph.facebook.com/607115779/picture?type=large", "display_name": "bitmous", "link": "https://stackoverflow.com/users/3164319/bitmous"}, "reply_to_user": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 0, "creation_date": 1492044144, "post_id": 43379958, "comment_id": 73825588, "body": "Thanks - I edited the original post with more information on the setup."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1492083257, "post_id": 43379958, "comment_id": 73843105, "body": "Stack Overflow is a site for programming and development questions. This question appears to be off-topic because it is not about programming or development. See <a href=\"http://stackoverflow.com/help/on-topic\">What topics can I ask about here</a> in the Help Center. Perhaps <a href=\"http://superuser.com/\">Super User</a> or <a href=\"http://unix.stackexchange.com/\">Unix &amp; Linux Stack Exchange</a> would be a better place to ask. Also see <a href=\"http://meta.stackexchange.com/q/134306\">Where do I post questions about Dev Ops?</a>"}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1492083282, "post_id": 43379958, "comment_id": 73843122, "body": "Also see <a href=\"http://stackoverflow.com/a/21340898/608639\">How do you sign Certificate Signing Request with your Certification Authority</a> and <a href=\"http://stackoverflow.com/q/10175812/608639\">How to create a self-signed certificate with openssl?</a> You will also need to place the self-signed certificate in the appropriate trust store."}], "owner": {"reputation": 310, "user_id": 3164319, "user_type": "registered", "profile_image": "https://graph.facebook.com/607115779/picture?type=large", "display_name": "bitmous", "link": "https://stackoverflow.com/users/3164319/bitmous"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 313, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1492044129, "creation_date": 1492032559, "last_edit_date": 1492044129, "question_id": 43379958, "link": "https://stackoverflow.com/questions/43379958/ssl-root-ca-and-client-cert-on-same-machine", "title": "(SSL) Root CA and Client Cert on same machine?", "body": "<p>I'm trying to communicate with some software at my company (that I did not write). We are able to set the server certificate, server key, and server CA certificate through configuration.</p>\n\n<p>I generate the root certificate on the primary machine with:</p>\n\n<pre><code>openssl genrsa -out rootCA.key 2048\n</code></pre>\n\n<p>I self-sign the root certificate with:</p>\n\n<pre><code>openssl req -x509 -new -nodes -key rootCA.key -sha256 -days 1024 -out rootCA.pem\n</code></pre>\n\n<p>I generate the client key the same as I do the root key, generate a CSR with:</p>\n\n<pre><code>openssl req -new -key device.key -out device.csr\n</code></pre>\n\n<p>I then sign the client key with the root certificate with:</p>\n\n<pre><code>openssl x509 -req -in device.csr -CA rootCA.pem -CAkey rootCA.key -CAcreateserial -out device.crt -days 500 -sha256\n</code></pre>\n\n<p>I'm communicating from Python OpenSSL to this application (running in Java). I set the key and certificate files in OpenSSL to the device keys, then set server-ca-cert and server-cert to the root certificate, and server-key to the root key. No matter what, I always get this error in Python:</p>\n\n<pre><code>OpenSSL.SSL.Error: [('SSL routines', 'SSL3_GET_SERVER_CERTIFICATE', 'certificate verify failed')]\n</code></pre>\n\n<p>And this error in Java:</p>\n\n<pre><code>On handshake complete OpenSSL error: error:14094418:SSL routines:SSL3_READ_BYTES:tlsv1 alert unknown ca\n</code></pre>\n\n<p>I don't know if I'm doing something wrong, or if it's something with the software I'm not getting - and before I go bugging the CTO I'd like to know if I don't understand SSL/TLS. Am I missing some step? Should a server not use the root certificate as it's own certificate?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>To explain the setup more:</p>\n\n<p>We typically deploy in a clustered environment. </p>\n\n<p>The client application is running on two machines in a master/standby configuration, and the servers are all the machines in the cluster (including the two that are the master/standby network integration units). As part of our installation process, the master machine distributes root SSH keys to all machines in the cluster - so, through Ansible, I have full control over all of the machines. The two NIUs have an application that uses SOAP over TLS to control the software on all the machines in the cluster. We've historically used UDP, but we're making efforts to increase security.</p>\n"}, {"tags": ["python", "sql", "sqlite", "cx-freeze"], "comments": [{"owner": {"reputation": 1487, "user_id": 3901060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f386743bd29ff8c0ab6e1637938a795?s=128&d=identicon&r=PG&f=1", "display_name": "FamousJameous", "link": "https://stackoverflow.com/users/3901060/famousjameous"}, "edited": false, "score": 1, "creation_date": 1492035391, "post_id": 43379952, "comment_id": 73823131, "body": "Is the error something about &quot;No module named sqlite3&quot;? <code>sqlite3</code> is included in the standard library so you shouldn&#39;t be seeing that error. What version of Python is this? What OS is it?"}, {"owner": {"reputation": 57, "user_id": 7858836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5ef94e6be98d0722d5b82a973066587?s=128&d=identicon&r=PG&f=1", "display_name": "QuadraticOne", "link": "https://stackoverflow.com/users/7858836/quadraticone"}, "reply_to_user": {"reputation": 1487, "user_id": 3901060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f386743bd29ff8c0ab6e1637938a795?s=128&d=identicon&r=PG&f=1", "display_name": "FamousJameous", "link": "https://stackoverflow.com/users/3901060/famousjameous"}, "edited": false, "score": 0, "creation_date": 1492037594, "post_id": 43379952, "comment_id": 73823870, "body": "I&#39;m using Python 3.6 and Windows 10.  I&#39;m afraid I&#39;m quite new to running scripts as executables and don&#39;t know how to pause the window after the error but before it closes itself..."}, {"owner": {"reputation": 1487, "user_id": 3901060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f386743bd29ff8c0ab6e1637938a795?s=128&d=identicon&r=PG&f=1", "display_name": "FamousJameous", "link": "https://stackoverflow.com/users/3901060/famousjameous"}, "edited": false, "score": 0, "creation_date": 1492106228, "post_id": 43379952, "comment_id": 73858393, "body": "Open a command prompt (<code>Windows</code>+<code>r</code>) type <code>cmd</code> and hit enter. Type <code>cd </code> in the new window and then paste in the full path to the folder your script is in. (eg. <code>C:&#47;Users&#47;user&#47;Documents&#47;scripts</code> or whatever it is.) Then type <code>python </code> and the name of the script. Update your post with the output"}, {"owner": {"reputation": 57, "user_id": 7858836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5ef94e6be98d0722d5b82a973066587?s=128&d=identicon&r=PG&f=1", "display_name": "QuadraticOne", "link": "https://stackoverflow.com/users/7858836/quadraticone"}, "reply_to_user": {"reputation": 1487, "user_id": 3901060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f386743bd29ff8c0ab6e1637938a795?s=128&d=identicon&r=PG&f=1", "display_name": "FamousJameous", "link": "https://stackoverflow.com/users/3901060/famousjameous"}, "edited": false, "score": 0, "creation_date": 1492442359, "post_id": 43379952, "comment_id": 73963968, "body": "It appears to be something to do with the drivers.  I&#39;ve switched to using Python 2.7 and py2exe to convert to .exe, which works much better.  Thanks for your help!"}], "owner": {"reputation": 57, "user_id": 7858836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5ef94e6be98d0722d5b82a973066587?s=128&d=identicon&r=PG&f=1", "display_name": "QuadraticOne", "link": "https://stackoverflow.com/users/7858836/quadraticone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 204, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1518711465, "creation_date": 1492032539, "last_edit_date": 1492038124, "question_id": 43379952, "link": "https://stackoverflow.com/questions/43379952/python-how-to-stop-a-program-using-sqlite3-crashing-when-freezing-with-cx-freez", "title": "Python: how to stop a program using sqlite3 crashing when freezing with cx_Freeze?", "body": "<p>I'm working on a project which implements sqlite databases from Python 3.6.  It works fine when the script is run from the editor, but when I freeze it using cx_Freeze, the executable crashes immediately.  It appears to be the line 'import sqlite3' that causes the problem (the executable runs as expected otherwise):</p>\n\n<pre><code>import sqlite3\nprint(\"Done\")\ninput()\n</code></pre>\n\n<p>causes a crash, but</p>\n\n<pre><code># import sqlite3\nprint(\"Done\")\ninput()\n</code></pre>\n\n<p>works fine.  Some other websites suggested I should put the sqlite3 source code in my project folder, but I haven't managed to find a way of doing that.  Is that the right approach, and if so, how should I go about it?  OS is Windows 10 and setup script is</p>\n\n<pre><code>import sys\nfrom cx_Freeze import setup, Executable\n\nsetup(\n    name=\"Test Executable\",\n    version=\"1.0\",\n    description=\"sqlite test exe\"\n    executables=[Executable(\"test.py\", base=None)]\n)\n</code></pre>\n"}, {"tags": ["python", "methods", "boolean", "tuples"], "comments": [{"owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "edited": false, "score": 0, "creation_date": 1492032542, "post_id": 43379929, "comment_id": 73821997, "body": "Where is the code you tested and did not work. Hard to know what actually went wrong?"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1492032554, "post_id": 43379929, "comment_id": 73822002, "body": "Welcome to StackOverflow.  Please read and follow the posting guidelines in the help documentation.  <a href=\"http://stackoverflow.com/help/mcve\">Minimal, complete, verifiable example</a> applies here.  We cannot effectively help you until you post your MCVE code and accurately describe the problem."}, {"owner": {"reputation": 730, "user_id": 6941046, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rDqanJg0rQU/AAAAAAAAAAI/AAAAAAAAACg/0Hf929Qb7uk/photo.jpg?sz=128", "display_name": "Elliot Roberts", "link": "https://stackoverflow.com/users/6941046/elliot-roberts"}, "edited": false, "score": 0, "creation_date": 1492032964, "post_id": 43379929, "comment_id": 73822155, "body": "Could you explain the relevancy of the shown code and give examples of desired inputs and outputs?"}], "answers": [{"tags": [], "owner": {"reputation": 67048, "user_id": 388787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f786b1ad349a30e02802ae61b4518fc?s=128&d=identicon&r=PG", "display_name": "Dan D.", "link": "https://stackoverflow.com/users/388787/dan-d"}, "is_accepted": false, "score": 0, "last_activity_date": 1492032934, "creation_date": 1492032934, "answer_id": 43380035, "question_id": 43379929, "link": "https://stackoverflow.com/questions/43379929/how-to-write-a-program-that-checks-if-a-word-supplied-as-the-argument-is-an-isog/43380035#43380035", "title": "How to write a program that checks if a word supplied as the argument is an Isogram", "body": "<p>You can test for an isogram with <code>len(set(s)) == len(s)</code> That is to say that the string is an isogram if the length of the set of unique characters equals the the length of the string.</p>\n\n<p>Seems to me that the function would look like this:</p>\n\n<pre><code>def is_isogram(s):\n    if not isinstance(s, str):\n       raise TypeError('String inputs allowed only')\n    return len(set(s)) == len(s)\n</code></pre>\n"}], "owner": {"reputation": 127, "user_id": 4105631, "user_type": "registered", "accept_rate": 14, "profile_image": "https://graph.facebook.com/100001594013478/picture?type=large", "display_name": "Emmanuel Okezie Ogbonna", "link": "https://stackoverflow.com/users/4105631/emmanuel-okezie-ogbonna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 604, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1492032934, "creation_date": 1492032444, "last_edit_date": 1492032899, "question_id": 43379929, "link": "https://stackoverflow.com/questions/43379929/how-to-write-a-program-that-checks-if-a-word-supplied-as-the-argument-is-an-isog", "title": "How to write a program that checks if a word supplied as the argument is an Isogram", "body": "<p>I need to write this python code to check if a word is isogram, and was asked to use a method and call a tuple before ending up with a boolean. Here is the test code I was given, I have battled with this code for over a day with no solution.</p>\n\n<pre><code>from unittest import TestCase\n\nclass IsogramTestCases(TestCase):\n  def test_checks_for_isograms(self):\n    word = 'abolishment'\n    self.assertEqual(\n      is_isogram(word),\n      (word, True),\n      msg=\"Isogram word, '{}' not detected correctly\".format(word)\n    )\n\n  def test_returns_false_for_nonisograms(self):\n    word = 'alphabet'\n    self.assertEqual(\n      is_isogram(word),\n      (word, False),\n      msg=\"Non isogram word, '{}' falsely detected\".format(word)\n    )\n\n  def test_it_only_accepts_strings(self):\n    with self.assertRaises(TypeError) as context:\n      is_isogram(2)\n      self.assertEqual(\n        'Argument should be a string',\n        context.exception.message,\n        'String inputs allowed only'\n      )\n</code></pre>\n"}, {"tags": ["python", "csv"], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 4181084, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/aabbd365cfa143df83ff839ac7e3de84?s=128&d=identicon&r=PG&f=1", "display_name": "JoeScripter", "link": "https://stackoverflow.com/users/4181084/joescripter"}, "edited": false, "score": 1, "creation_date": 1492034884, "post_id": 43379961, "comment_id": 73822930, "body": "to expand on this for anyone who finds this, i also have a seperate script that is already written to do something with the output data so i would prefer to keep that in csv format. To do that, the following worked:  CSV =&quot;\\n&quot;.join([k+&#39;,&#39;+&quot;,&quot;.join(v) for k,v in dict.items()])"}], "tags": [], "owner": {"reputation": 26221, "user_id": 7294647, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/QFLgL.jpg?s=128&g=1", "display_name": "Jacob G.", "link": "https://stackoverflow.com/users/7294647/jacob-g"}, "is_accepted": true, "score": 0, "last_activity_date": 1492032882, "last_edit_date": 1492032882, "creation_date": 1492032563, "answer_id": 43379961, "question_id": 43379905, "link": "https://stackoverflow.com/questions/43379905/deleting-duplicate-entries-from-csv/43379961#43379961", "title": "Deleting duplicate entries from CSV", "body": "<p>I would use a dictionary to combat this problem, maybe something along the lines of the following:</p>\n\n<pre><code>dict = {}\n\nrows = [['a', 'x'], ['a', 'y'], ['a', 'z'], ['b', 1], ['b', 2], ['b', 3], ['b', 4], ['c', 5], ['c', 6], ['c', 7], ['c', 8]]\n\nfor row in rows:\n    if row[0] not in dict.keys():\n        dict[row[0]] = []\n\n    if len(dict[row[0]]) == 2:\n        continue\n\n    dict[row[0]].append(row[1])\n\nprint(dict)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>&gt;&gt; {'a': ['x', 'y'], 'b': [1, 2], 'c': [5, 6]}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14525, "user_id": 373962, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/11498b47f1326cca63f7571a72e2dd1b?s=128&d=identicon&r=PG", "display_name": "Miquel", "link": "https://stackoverflow.com/users/373962/miquel"}, "is_accepted": false, "score": 0, "last_activity_date": 1492033346, "creation_date": 1492033346, "answer_id": 43380130, "question_id": 43379905, "link": "https://stackoverflow.com/questions/43379905/deleting-duplicate-entries-from-csv/43380130#43380130", "title": "Deleting duplicate entries from CSV", "body": "<p>So, here's an idea, based on Jacob's:</p>\n\n<p>Create two dicts, <code>first</code> and <code>second</code></p>\n\n<p>For each line in the CSV:</p>\n\n<ul>\n<li>if the key is in <code>second</code>, skip, else</li>\n<li>if the key is not in <code>first</code> put it there</li>\n<li>if the key is in <code>first</code>, and the value is not the line you are looing at, add the key to <code>second</code></li>\n</ul>\n\n<p>At the end you'll have two dictionaries with a value each as you wanted\nYou could generalize it to keeping N values by creating a list of dictionaries and use as many as you'd need</p>\n"}, {"comments": [{"owner": {"reputation": 1606, "user_id": 5079666, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/5Awfk.jpg?s=128&g=1", "display_name": "Jon", "link": "https://stackoverflow.com/users/5079666/jon"}, "edited": false, "score": 0, "creation_date": 1492033923, "post_id": 43380162, "comment_id": 73822557, "body": "True, and in that case you would need a <code>try</code> and <code>except</code> statement. I&#39;ll update this."}], "tags": [], "owner": {"reputation": 1606, "user_id": 5079666, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/5Awfk.jpg?s=128&g=1", "display_name": "Jon", "link": "https://stackoverflow.com/users/5079666/jon"}, "is_accepted": false, "score": 0, "last_activity_date": 1492034068, "last_edit_date": 1492034068, "creation_date": 1492033515, "answer_id": 43380162, "question_id": 43379905, "link": "https://stackoverflow.com/questions/43379905/deleting-duplicate-entries-from-csv/43380162#43380162", "title": "Deleting duplicate entries from CSV", "body": "<p>Here's an example with <code>itertools.groupby</code></p>\n\n<pre><code>import itertools\nwith open(\"test.csv\", \"r\") as stuff:\n    data = stuff.readlines()\n\n\nout = []\nfor k,dat in itertools.groupby(data, key=lambda x: x[0]):\n    twoVals = list(dat)[:2]\n    out.append(twoVals)\n\nprint out\n</code></pre>\n\n<p>For cases where there are less than two values</p>\n\n<pre><code>import itertools\nwith open(\"test.csv\", \"r\") as stuff:\n    data = stuff.readlines()\n\n\nout = []\nfor k,dat in itertools.groupby(data, key=lambda x: x[0]):\n    dat = list(dat)\n    try:    \n        vals = dat[:2]\n    except IndexError:\n        vals = list(dat)\n    out.append(vals)\n\nprint out\n</code></pre>\n\n<p>I tested this out on:</p>\n\n<pre><code>a,x\na,y\na,z\nb,1\nb,2\nb,3\nb,4\nc,5\nc,6\nc,7\nc,8\nz,1\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 4181084, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/aabbd365cfa143df83ff839ac7e3de84?s=128&d=identicon&r=PG&f=1", "display_name": "JoeScripter", "link": "https://stackoverflow.com/users/4181084/joescripter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 43379961, "answer_count": 3, "score": 0, "last_activity_date": 1492034238, "creation_date": 1492032312, "last_edit_date": 1492034238, "question_id": 43379905, "link": "https://stackoverflow.com/questions/43379905/deleting-duplicate-entries-from-csv", "title": "Deleting duplicate entries from CSV", "body": "<p>I have a csv with 2 columns:</p>\n\n<pre><code>a,x\na,y\na,z\nb,1\nb,2\nb,3\nb,4\nc,5\nc,6\nc,7\nc,8\n</code></pre>\n\n<p>I'd like to loop through only look at the 1st column and only show 2 entries for each value in the first column. I don't care what values get kept or deleted for the second column, i just want 2 entries of each different option for the first column. </p>\n\n<p>Output would look something like this: </p>\n\n<pre><code>a,x\na,y\nb,1\nb,2\nc,5\nc,6\n</code></pre>\n\n<p>I'm familiar with csv module(how to read/write/replace), but am having a hard time finding resources that explain how to compare one row with another. I think that is where I'm stuck on this problem.</p>\n"}, {"tags": ["python", "database", "postgresql"], "comments": [{"owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "edited": false, "score": 0, "creation_date": 1492039562, "post_id": 43379857, "comment_id": 73824412, "body": "Why would you want to download it in the database, that&#39;s a horrible idea. If the server takes a long time to respond, it&#39;ll tie up your database handle. Moreover, there is no reason for it. Have something outside the database download the file, if it succeed put the row in the database."}], "answers": [{"comments": [{"owner": {"reputation": 533, "user_id": 7454013, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8cff6ab110fb649869c80379c6dddf58?s=128&d=identicon&r=PG&f=1", "display_name": "1pa", "link": "https://stackoverflow.com/users/7454013/1pa"}, "edited": false, "score": 0, "creation_date": 1492033235, "post_id": 43379960, "comment_id": 73822255, "body": "Ow so easy! thank you! But now how can i download this gz file? @cohenjo"}, {"owner": {"reputation": 516, "user_id": 6655789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/301a75c8740330ee2a2a08b67ea42669?s=128&d=identicon&r=PG", "display_name": "cohenjo", "link": "https://stackoverflow.com/users/6655789/cohenjo"}, "reply_to_user": {"reputation": 533, "user_id": 7454013, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8cff6ab110fb649869c80379c6dddf58?s=128&d=identicon&r=PG&f=1", "display_name": "1pa", "link": "https://stackoverflow.com/users/7454013/1pa"}, "edited": false, "score": 0, "creation_date": 1492057888, "post_id": 43379960, "comment_id": 73828832, "body": "Select the butea column and dump the content to a file."}], "tags": [], "owner": {"reputation": 516, "user_id": 6655789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/301a75c8740330ee2a2a08b67ea42669?s=128&d=identicon&r=PG", "display_name": "cohenjo", "link": "https://stackoverflow.com/users/6655789/cohenjo"}, "is_accepted": false, "score": 0, "last_activity_date": 1492032562, "creation_date": 1492032562, "answer_id": 43379960, "question_id": 43379857, "link": "https://stackoverflow.com/questions/43379857/how-to-store-and-download-a-zip-file-in-database-postgres/43379960#43379960", "title": "How to store and download a zip file in database postgres", "body": "<p>If you can store the file as a bytea field then storing a zipped file is just the same. </p>\n\n<p>Postgres doesn't have a concept of \"file\" field - you simply store the content (as you did for the original content) in bytea field. </p>\n\n<p>If you're asking about zipping a file on the fly,\nTake a look at <a href=\"https://docs.python.org/3/library/zlib.html#module-zlib\" rel=\"nofollow noreferrer\">zlib</a> it's one of the common modules for such tasks. </p>\n\n<p>Regards \nJony </p>\n"}], "owner": {"reputation": 533, "user_id": 7454013, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8cff6ab110fb649869c80379c6dddf58?s=128&d=identicon&r=PG&f=1", "display_name": "1pa", "link": "https://stackoverflow.com/users/7454013/1pa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1587, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1492032562, "creation_date": 1492032087, "question_id": 43379857, "link": "https://stackoverflow.com/questions/43379857/how-to-store-and-download-a-zip-file-in-database-postgres", "title": "How to store and download a zip file in database postgres", "body": "<p>I'm trying to store and then download a zip file from Postgres database. I know that this is not the best approach (i should only save the path to file) but i need to do this way, just for learning and practice.</p>\n\n<p>I did a python script to store the content of the file into a bytea field but this was not my final goal. I really want to know how to save the zip file.</p>\n\n<p>Any ideas? I just know python so i'm trying to this in python</p>\n\n<p>Thank you guys! </p>\n"}, {"tags": ["python", "scipy", "ode"], "comments": [{"owner": {"reputation": 209114, "user_id": 1427416, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/QWHKg.png?s=128&g=1", "display_name": "BrenBarn", "link": "https://stackoverflow.com/users/1427416/brenbarn"}, "edited": false, "score": 0, "creation_date": 1492053079, "post_id": 43379852, "comment_id": 73827656, "body": "As to part 1, when I run your code I get a warning and a message &quot;DVODE--  ISTATE (=I1) .gt. 1 but DVODE not initialized &quot; that apparently comes from somewhere in the Fortran internals.  That suggests there could be something more going on than just an unsuccessful state."}, {"owner": {"reputation": 209114, "user_id": 1427416, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/QWHKg.png?s=128&g=1", "display_name": "BrenBarn", "link": "https://stackoverflow.com/users/1427416/brenbarn"}, "edited": false, "score": 0, "creation_date": 1492053412, "post_id": 43379852, "comment_id": 73827749, "body": "Incidentally, it might be useful to try to reproduce your problems with a simple ODE whose results could be verified analytically or with simpler numerical methods."}, {"owner": {"reputation": 4383, "user_id": 2593878, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d48b3fc093f704b646e75703dea29107?s=128&d=identicon&r=PG", "display_name": "dkv", "link": "https://stackoverflow.com/users/2593878/dkv"}, "reply_to_user": {"reputation": 209114, "user_id": 1427416, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/QWHKg.png?s=128&g=1", "display_name": "BrenBarn", "link": "https://stackoverflow.com/users/1427416/brenbarn"}, "edited": false, "score": 0, "creation_date": 1492099826, "post_id": 43379852, "comment_id": 73855011, "body": "<a href=\"https://stackoverflow.com/questions/40788747/internal-working-of-scipy-integrate-ode?rq=1\">Here</a> is a related post I just found for anyone else coming across similar questions."}], "answers": [{"comments": [{"owner": {"reputation": 4383, "user_id": 2593878, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d48b3fc093f704b646e75703dea29107?s=128&d=identicon&r=PG", "display_name": "dkv", "link": "https://stackoverflow.com/users/2593878/dkv"}, "edited": false, "score": 1, "creation_date": 1492098259, "post_id": 43385570, "comment_id": 73854071, "body": "Strangely, I was in fact not receiving any error messages (of course I would not simply ignore them), which is why I was concerned that the integrate() method was failing silently. What I posted was the exact output I saw from my shell. I was using the IPython shell built into Spyder and this is not the first time I&#39;ve gotten strange behavior. Perhaps the error output was being redirected somewhere and not displayed."}], "tags": [], "owner": {"reputation": 3471, "user_id": 2127008, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/MIRMI.jpg?s=128&g=1", "display_name": "Wrzlprmft", "link": "https://stackoverflow.com/users/2127008/wrzlprmft"}, "is_accepted": true, "score": 4, "last_activity_date": 1492066880, "creation_date": 1492066880, "answer_id": 43385570, "question_id": 43379852, "link": "https://stackoverflow.com/questions/43379852/how-does-scipy-integrate-ode-integrate-work/43385570#43385570", "title": "How does scipy.integrate.ode.integrate() work?", "body": "<h1>Problem 0</h1>\n\n<p>Don\u2019t ignore error messages. Yes, <code>ode</code>\u2019s error messages can be cryptic at times, but you still want to avoid them.</p>\n\n<h1>Problem 1</h1>\n\n<p>As you already integrated up to <code>t0</code> with the first call of <code>solver.integrate(t0)</code>, you are integrating for a time step of <code>0</code> with the second call. This throws the cryptic error:</p>\n\n<pre><code> DVODE--  ISTATE (=I1) .gt. 1 but DVODE not initialized      \n      In above message,  I1 =         2\n/usr/lib/python3/dist-packages/scipy/integrate/_ode.py:869: UserWarning: vode: Illegal input detected. (See printed message.)\n  'Unexpected istate=%s' % istate))\n</code></pre>\n\n<h1>Problem 2.1</h1>\n\n<p>There is a maximum number of (internal) steps that a solver is going to take in one call without throwing an error. This can be set with the <code>nsteps</code> argument of <code>set_integrator</code>. If you integrate a large time at once, <code>nsteps</code> will be exceeded even if nothing is wrong, and the following error message is thrown:</p>\n\n<pre><code>/usr/lib/python3/dist-packages/scipy/integrate/_ode.py:869: UserWarning: vode: Excess work done on this call. (Perhaps wrong MF.)\n  'Unexpected istate=%s' % istate))\n</code></pre>\n\n<p>The integrator then stops at whenever this happens.</p>\n\n<h1>Problem 2.2</h1>\n\n<p>If you set <code>nsteps=10**10</code>, the integration runs without problems. It still is pretty fast though (roughly 1\u202fs on my machine). The reason for this is as follows:</p>\n\n<p>For a multi-dimensional system such as yours, there are two main runtime sinks when integrating:</p>\n\n<ul>\n<li><p>Vector and matrix operations within the integrator. In <code>scipy.ode</code>, these are all realised with NumPy operations or ported Fortran or C code. Anyway, they are realised with compiled code without Python overhead and thus very efficient.</p></li>\n<li><p>Evaluating the derivative (<code>lambda t,y: w + K/N*np.sum( np.sin( y - y.reshape(N,1) ), axis=1)</code> in your case). You realised this with NumPy operations, which again are realised with compiled code and very efficient. You may improve this a little bit with a purely compiled function, but that will grant you at most a small factor. If you used Python lists and loops instead, it would be horribly slow.</p></li>\n</ul>\n\n<p>Therefore, for your problem, everything relevant is handled with compiled code under the hood and the integration is handled with an efficiency comparable to that of, e.g., a pure C program. I do not know how the two above aspects are handled in Matlab, but if either of the above challenges is handled with interpreted instead of compiled loops, this would explain the runtime discrepancy you observe.</p>\n"}, {"comments": [{"owner": {"reputation": 3471, "user_id": 2127008, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/MIRMI.jpg?s=128&g=1", "display_name": "Wrzlprmft", "link": "https://stackoverflow.com/users/2127008/wrzlprmft"}, "edited": false, "score": 1, "creation_date": 1492098675, "post_id": 43393183, "comment_id": 73854306, "body": "Regarding the first paragraph: How would that be different from integrating with many tiny steps? Also, the dynamics in question does not look like one where you care about the global error."}, {"owner": {"reputation": 4383, "user_id": 2593878, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d48b3fc093f704b646e75703dea29107?s=128&d=identicon&r=PG", "display_name": "dkv", "link": "https://stackoverflow.com/users/2593878/dkv"}, "edited": false, "score": 0, "creation_date": 1492098715, "post_id": 43393183, "comment_id": 73854329, "body": "As a follow-up, is there a way to force the methods to run with a fixed step size? And, is there any documentation for how the error tolerances affect the adaptive step size?"}, {"owner": {"reputation": 4383, "user_id": 2593878, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d48b3fc093f704b646e75703dea29107?s=128&d=identicon&r=PG", "display_name": "dkv", "link": "https://stackoverflow.com/users/2593878/dkv"}, "reply_to_user": {"reputation": 3471, "user_id": 2127008, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/MIRMI.jpg?s=128&g=1", "display_name": "Wrzlprmft", "link": "https://stackoverflow.com/users/2127008/wrzlprmft"}, "edited": false, "score": 0, "creation_date": 1492099685, "post_id": 43393183, "comment_id": 73854921, "body": "@Wrzlprmft (Sorry if this is naive, I&#39;m relatively new to this subject). Why do you say it doesn&#39;t look like one where we&#39;d care about global error? Isn&#39;t the ultimate goal of numerical integration in general to minimize global error?"}, {"owner": {"reputation": 3471, "user_id": 2127008, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/MIRMI.jpg?s=128&g=1", "display_name": "Wrzlprmft", "link": "https://stackoverflow.com/users/2127008/wrzlprmft"}, "reply_to_user": {"reputation": 4383, "user_id": 2593878, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d48b3fc093f704b646e75703dea29107?s=128&d=identicon&r=PG", "display_name": "dkv", "link": "https://stackoverflow.com/users/2593878/dkv"}, "edited": false, "score": 0, "creation_date": 1492100001, "post_id": 43393183, "comment_id": 73855127, "body": "@dkv: Please do not ask follow-up questions in the comments. Anyway, why would you want to do this?"}, {"owner": {"reputation": 3471, "user_id": 2127008, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/MIRMI.jpg?s=128&g=1", "display_name": "Wrzlprmft", "link": "https://stackoverflow.com/users/2127008/wrzlprmft"}, "reply_to_user": {"reputation": 4383, "user_id": 2593878, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d48b3fc093f704b646e75703dea29107?s=128&d=identicon&r=PG", "display_name": "dkv", "link": "https://stackoverflow.com/users/2593878/dkv"}, "edited": false, "score": 0, "creation_date": 1492100241, "post_id": 43393183, "comment_id": 73855275, "body": "@dkv: Your system looks like a bunch of coupled Kuramoto oscillators. With such systems, you are usually more interested in the qualitative behaviour. In particular, the dynamics could be chaotic, in which case, controlling the global error is a lost cause anyway. Here, all you can control is the local error."}, {"owner": {"reputation": 4383, "user_id": 2593878, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d48b3fc093f704b646e75703dea29107?s=128&d=identicon&r=PG", "display_name": "dkv", "link": "https://stackoverflow.com/users/2593878/dkv"}, "reply_to_user": {"reputation": 3471, "user_id": 2127008, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/MIRMI.jpg?s=128&g=1", "display_name": "Wrzlprmft", "link": "https://stackoverflow.com/users/2127008/wrzlprmft"}, "edited": false, "score": 0, "creation_date": 1492101123, "post_id": 43393183, "comment_id": 73855754, "body": "@Wrzlprmft  &gt;why would you want to do this Because I would like to plot the output at fixed intervals, and to verify that a solution using a very small step size (which will presumably be more accurate but slower) corresponds to the adaptive step size solution. I would expect that using tens of steps to integrate over 10000 seconds in a potentially stiff system produces wildly incorrect results. And, I don&#39;t want to implement a fixed-step method from scratch."}, {"owner": {"reputation": 3471, "user_id": 2127008, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/MIRMI.jpg?s=128&g=1", "display_name": "Wrzlprmft", "link": "https://stackoverflow.com/users/2127008/wrzlprmft"}, "reply_to_user": {"reputation": 4383, "user_id": 2593878, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d48b3fc093f704b646e75703dea29107?s=128&d=identicon&r=PG", "display_name": "dkv", "link": "https://stackoverflow.com/users/2593878/dkv"}, "edited": false, "score": 0, "creation_date": 1492101422, "post_id": 43393183, "comment_id": 73855904, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/141668/discussion-between-wrzlprmft-and-dkv\">continue this discussion in chat</a>."}, {"owner": {"reputation": 21073, "user_id": 3088138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/114f33fdece969de35d41038fb0eeb46?s=128&d=identicon&r=PG&f=1", "display_name": "Lutz Lehmann", "link": "https://stackoverflow.com/users/3088138/lutz-lehmann"}, "edited": false, "score": 0, "creation_date": 1492118954, "post_id": 43393183, "comment_id": 73864566, "body": "The output is interpolated from the values and derivatives at the internal steps. Thus requesting a denser output sequence will not fundamentally change the internal steps. Decreasing the tolerances will increase the number of internal steps. You could compare solutions that differ by a relative distance of 1e-8 in the initial values. Comparing the paths of such solutions will show you up to where the numerical solution is reliable."}], "tags": [], "owner": {"reputation": 21073, "user_id": 3088138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/114f33fdece969de35d41038fb0eeb46?s=128&d=identicon&r=PG&f=1", "display_name": "Lutz Lehmann", "link": "https://stackoverflow.com/users/3088138/lutz-lehmann"}, "is_accepted": false, "score": 1, "last_activity_date": 1492088792, "creation_date": 1492088792, "answer_id": 43393183, "question_id": 43379852, "link": "https://stackoverflow.com/questions/43379852/how-does-scipy-integrate-ode-integrate-work/43393183#43393183", "title": "How does scipy.integrate.ode.integrate() work?", "body": "<p>To the second question, yes, the output might be nonsense. Local errors, be they from discretization or floating point operations, accumulate with a compounding factor which is about the Lipschitz constant of the ODE function. In a first estimate, the Lipschitz constant here is <code>K=0.5</code>. The magnification rate of early errors, that is, their coefficient as part of the global error, can thus be as large as <code>exp(0.5*10000)</code>, which is a huge number.</p>\n\n<p>On the other hand it is not surprising that the integration is fast. Most of the provided methods use step size adaptation, and with the standard error tolerances this might result in only some tens of internal steps. Reducing the error tolerances will increase the number of internal steps and may change the numerical result drastically.</p>\n"}], "owner": {"reputation": 4383, "user_id": 2593878, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d48b3fc093f704b646e75703dea29107?s=128&d=identicon&r=PG", "display_name": "dkv", "link": "https://stackoverflow.com/users/2593878/dkv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1568, "favorite_count": 0, "accepted_answer_id": 43385570, "answer_count": 2, "score": 3, "last_activity_date": 1492088792, "creation_date": 1492032078, "last_edit_date": 1492077461, "question_id": 43379852, "link": "https://stackoverflow.com/questions/43379852/how-does-scipy-integrate-ode-integrate-work", "title": "How does scipy.integrate.ode.integrate() work?", "body": "<p>I have obviously read through the <a href=\"https://docs.scipy.org/doc/scipy-0.18.1/reference/generated/scipy.integrate.ode.html#scipy.integrate.ode\" rel=\"nofollow noreferrer\">documentation</a>, but I have not been able to find a more detailed description of what is happening under the covers. Specifically, there are a few behaviors that I am very confused about: </p>\n\n<h3>General setup</h3>\n\n<pre><code>import numpy as np\nfrom scipy.integrate import ode\n\n#Constants in ODE\nN = 30                                 \nK = 0.5                               \nw = np.random.normal(np.pi, 0.1, N)\n\n#Integration parameters\ny0 = np.linspace(0, 2*np.pi, N, endpoint=False)   \nt0 = 0                                                                         \n\n#Set up the solver\nsolver = ode(lambda t,y: w + K/N*np.sum( np.sin( y - y.reshape(N,1) ), axis=1))\nsolver.set_integrator('vode', method='bdf')\nsolver.set_initial_value(y0, t0)\n</code></pre>\n\n<h3>Problem 1: <code>solver.integrate(t0)</code> fails</h3>\n\n<p>Setting up the integrator, and asking for the value at <code>t0</code> the first time returns a successful integration. Repeating this returns the correct number, but the <code>solver.successful()</code> method returns false:</p>\n\n<pre><code>solver.integrate(t0)\n&gt;&gt;&gt; array([ 0.        ,  0.20943951,  0.41887902, ...,  5.65486678,\n            5.86430629,  6.0737458 ])\n\nsolver.successful()\n&gt;&gt;&gt; True\n\nsolver.integrate(t0)\n&gt;&gt;&gt; array([ 0.        ,  0.20943951,  0.41887902, ...,  5.65486678,\n            5.86430629,  6.0737458 ])\n\nsolver.successful()\n&gt;&gt;&gt; False\n</code></pre>\n\n<p>My question is, what is happening in the <code>solver.integrate(t)</code> method that causes it to succeed the first time, and fail subsequently, and what does it mean to have an \u201cunsuccessful\u201d integration? Furthermore, why does the integrator fail silently, and continue to produce useful-looking outputs until I ask it explicitly whether it was successful?</p>\n\n<p>Related, is there a way to reset the failed integration, or do I need to re-instantiate the solver from scratch?</p>\n\n<h3>Problem 2: solver.integrate(t) immediately returns an answer for almost any value of <code>t</code></h3>\n\n<p>Even though my initial value of <code>y0</code> is given at <code>t0=0</code>, I can request the value at <code>t=10000</code> and get the answer immediately. I would expect that the numerical integration over such a large time span should take at least a few seconds (e.g. in Matlab, asking to integrate over 10000 time steps would take several minutes). </p>\n\n<p>For example, re-run the setup from above and execute:</p>\n\n<pre><code>solver.integrate(10000)\n&gt;&gt;&gt; array([ 2153.90803383,  2153.63023706,  2153.60964064, ...,  2160.00982959,\n            2159.90446056,  2159.82900895])\n</code></pre>\n\n<p>Is Python really that fast, or is this output total nonsense?</p>\n"}, {"tags": ["python", "regex", "string", "match"], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 3204300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bb38fa578a077414e6ab517fcbda3ec?s=128&d=identicon&r=PG&f=1", "display_name": "gothamgreen", "link": "https://stackoverflow.com/users/3204300/gothamgreen"}, "edited": false, "score": 0, "creation_date": 1492103273, "post_id": 43380282, "comment_id": 73856854, "body": "So python evaluates regex left-to-right, unless there&#39;s an anchor at the right boundary?  And match and search functions are not obliged to match the whole string, but can match any part within, so the regex is not automatically anchored to the right?"}, {"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "reply_to_user": {"reputation": 25, "user_id": 3204300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bb38fa578a077414e6ab517fcbda3ec?s=128&d=identicon&r=PG&f=1", "display_name": "gothamgreen", "link": "https://stackoverflow.com/users/3204300/gothamgreen"}, "edited": false, "score": 0, "creation_date": 1492106166, "post_id": 43380282, "comment_id": 73858360, "body": "@user3204300: To your second question, yes; to your first, kind of. The regex engine has to find the leftmost match. There is no \u201cunless there\u2019s an anchor at the right boundary\u201d; anchors behave the same way as any other part of the regex."}, {"owner": {"reputation": 25, "user_id": 3204300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bb38fa578a077414e6ab517fcbda3ec?s=128&d=identicon&r=PG&f=1", "display_name": "gothamgreen", "link": "https://stackoverflow.com/users/3204300/gothamgreen"}, "edited": false, "score": 0, "creation_date": 1492212755, "post_id": 43380282, "comment_id": 73900114, "body": "Thanks Ryan, I think I got it."}], "tags": [], "owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "is_accepted": true, "score": 0, "last_activity_date": 1492034112, "creation_date": 1492034112, "answer_id": 43380282, "question_id": 43379835, "link": "https://stackoverflow.com/questions/43379835/trying-to-understand-python-regular-expression-end-of-string-matching-with-z/43380282#43380282", "title": "Trying to understand python regular expression end of string matching with \\Z, \\b, $ vs just ending the expression", "body": "<p><code>*?</code> means a non-greedy match, so it will match as few characters as possible. When it\u2019s required to be followed by the end of the string, it\u2019s forced to keep matching, but if you remove that restriction then it has no obligation to match anything at all (and doesn\u2019t).</p>\n\n<p>A simplified example:</p>\n\n<pre><code># non-greedy\nre.search(r'^.*?$', 'hello world').group() == 'hello world'\nre.search(r'^.*?l', 'hello world').group() == 'hel'\nre.search(r'^.*?', 'hello world').group() == ''\n\n# greedy\nre.search(r'^.*$', 'hello world').group() == 'hello world'\nre.search(r'^.*l', 'hello world').group() == 'hello worl'\nre.search(r'^.*', 'hello world').group() == 'hello world'\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 3204300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bb38fa578a077414e6ab517fcbda3ec?s=128&d=identicon&r=PG&f=1", "display_name": "gothamgreen", "link": "https://stackoverflow.com/users/3204300/gothamgreen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 340, "favorite_count": 0, "accepted_answer_id": 43380282, "answer_count": 1, "score": 1, "last_activity_date": 1492034409, "creation_date": 1492032011, "last_edit_date": 1492033758, "question_id": 43379835, "link": "https://stackoverflow.com/questions/43379835/trying-to-understand-python-regular-expression-end-of-string-matching-with-z", "title": "Trying to understand python regular expression end of string matching with \\Z, \\b, $ vs just ending the expression", "body": "<p>Setup: I have a regular expression that matches people's names that have stray punctuation at the end, unless that punctuation belongs there as part of single-letter initials.  So, \"Lincoln, Abe.\" should match, and \"Lincoln, A.\" should not.  I have written an expression that works fine for me, but I am puzzled as to why my previous attempt did not work.</p>\n\n<p>Query: I'd like to figure out why I need to include an end-of-string anchor to my regular expression.\nHere are expressions that successfully match, the way I'd expect:</p>\n\n<pre><code>(Pdb) re.compile(\"(.*)(\\w{2,})([?:.,;]*?)\\Z\").match(\"abc,. def....\").groups()\n('abc,. d', 'ef', '....')\n(Pdb) re.compile(\"(.*)(\\w{2,})([?:.,;]*?)\\b\").match(\"abc,. def....\").groups()\n*** AttributeError: 'NoneType' object has no attribute 'groups'\n(Pdb) re.compile(\"(.*)(\\w{2,})([?:.,;]*?)$\").match(\"abc,. def....\").groups()\n('abc,. d', 'ef', '....')\n</code></pre>\n\n<p>I think that I should also be able to match my word without ending my regular expression in an end-of-string character.  However, only the first two groups are acknowledged, the third is returned empty:</p>\n\n<pre><code>(Pdb) re.compile(\"(.*)(\\w{2,})([?:.,;]*?)\").match(\"abc,. def....\").groups()\n('abc,. d', 'ef', '')\n</code></pre>\n\n<p>I've looked at questions dealing with end-of-string matching on SO and at the api docs (<a href=\"https://docs.python.org/2/library/re.html\" rel=\"nofollow noreferrer\">https://docs.python.org/2/library/re.html</a>).  So far, I don't quite understand, and would appreciate any help.</p>\n"}, {"tags": ["python", "opencv", "camera", "raspberry-pi", "distortion"], "answers": [{"tags": [], "owner": {"reputation": 3931, "user_id": 3398839, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5186a4aea9a9044d734cd373e6ba835b?s=128&d=identicon&r=PG&f=1", "display_name": "Coder-256", "link": "https://stackoverflow.com/users/3398839/coder-256"}, "is_accepted": false, "score": 0, "last_activity_date": 1492031974, "creation_date": 1492031974, "answer_id": 43379828, "question_id": 43379827, "link": "https://stackoverflow.com/questions/43379827/opencv-point-undistortion/43379828#43379828", "title": "OpenCV Point Undistortion", "body": "<p>Just after writing (I swear I had <em>just finished writing</em>), I came upon the function: <a href=\"http://docs.opencv.org/3.2.0/da/d54/group__imgproc__transform.html#ga8c1ae0e3589a9d77fffc962c49b22043\" rel=\"nofollow noreferrer\"><code>cv2.getPerspectiveTransform()</code></a>. Here's how it would be used for the example:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>rows = 5\ncolumns = 8\ninputs = [(163, 17), (294, 50), (313, 273), (145, 275)]\noutputs = [(0, 0), (5, 0), (5, 8), (0, 8)]\n\ntransform_matrix = cv2.getPerspectiveTransform(inputs, outputs)\n\ndef transform(point):\n    global transform_matrix\n    return cv2.perspectiveTransform(point, transform_matrix)\n</code></pre>\n"}], "owner": {"reputation": 3931, "user_id": 3398839, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5186a4aea9a9044d734cd373e6ba835b?s=128&d=identicon&r=PG&f=1", "display_name": "Coder-256", "link": "https://stackoverflow.com/users/3398839/coder-256"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 353, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1492031974, "creation_date": 1492031974, "question_id": 43379827, "link": "https://stackoverflow.com/questions/43379827/opencv-point-undistortion", "title": "OpenCV Point Undistortion", "body": "<p>I am using a Raspberry Pi 2 with the official 5MP camera. I have calibrated the camera using OpenCV 3.2.0. I am coding in Python 3.4.2 (I know it's not the latest version, but recompiling OpenCV for a newer version is out of the question).</p>\n\n<p>My question is, if I have a point within a square relative to the camera, and I have the points of all 4 corners of the square relative to the camera (not exactly a square because it may be rotated and moved slightly), how do I find that point relative to the square?</p>\n\n<p>For example, if the top-left corner of the square was (10, 20), and the original point was a bit to the right and down, maybe (21, 33), then the final point might be something like (15, 18).</p>\n\n<p>Basing this result on 1 corner (and just subtracting the input point and the corner) is not enough because the image may be scaled. Basing it on 2 opposite corners (assuming that the square is perfectly square and not rotated) is not enough because the image may be rotated. In theory, 3 should be enough if I calibrated the camera correctly (and made a perfect square or rectangle), but 4 is better to be totally sure.</p>\n\n<p>The problem is that I do not how to remap the point on the image to the point on the square. How should I do that?</p>\n\n<p>Example (sorry for low quality):</p>\n\n<p><a href=\"https://i.stack.imgur.com/UhAm4.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UhAm4.jpg\" alt=\"Checkerboard\"></a>\n<a href=\"https://i.stack.imgur.com/vDOFI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vDOFI.png\" alt=\"Checkerboard with input points: [(163, 17) -&gt; (0, 0), (294, 50) -&gt; (5, 0), (313, 273) -&gt; (5, 8), and (145, 275) -&gt; (0, 8)], output point: (257, 149) -&gt; (3.5, 4)\"></a></p>\n\n<p>Given the 4 red camera and output points and the green camera point, how do I find the green output point?</p>\n"}, {"tags": ["python", "protocol-buffers", "grpc"], "answers": [{"comments": [{"owner": {"reputation": 1117, "user_id": 1636883, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f18625a3fce041f061d2e426c94bd7bd?s=128&d=identicon&r=PG", "display_name": "kkirsche", "link": "https://stackoverflow.com/users/1636883/kkirsche"}, "edited": false, "score": 1, "creation_date": 1492134436, "post_id": 43394702, "comment_id": 73868708, "body": "That was it! Thank you so much for your answer and assistance. I really appreciate it"}], "tags": [], "owner": {"reputation": 2034, "user_id": 4621164, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j5gR5.jpg?s=128&g=1", "display_name": "Nathaniel Manista At Google", "link": "https://stackoverflow.com/users/4621164/nathaniel-manista-at-google"}, "is_accepted": true, "score": 5, "last_activity_date": 1492093026, "creation_date": 1492093026, "answer_id": 43394702, "question_id": 43379788, "link": "https://stackoverflow.com/questions/43379788/python-grpc-server-not-starting/43394702#43394702", "title": "Python gRPC Server Not Starting", "body": "<p>It looks to me like what's happening is that your server is only assigned to a local field in your <code>serve_health_api</code> function, so when that function returns (immediately after having started the server) the server is garbage-collected and shut down.</p>\n"}], "owner": {"reputation": 1117, "user_id": 1636883, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f18625a3fce041f061d2e426c94bd7bd?s=128&d=identicon&r=PG", "display_name": "kkirsche", "link": "https://stackoverflow.com/users/1636883/kkirsche"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1560, "favorite_count": 0, "accepted_answer_id": 43394702, "answer_count": 1, "score": 3, "last_activity_date": 1492093026, "creation_date": 1492031805, "question_id": 43379788, "link": "https://stackoverflow.com/questions/43379788/python-grpc-server-not-starting", "title": "Python gRPC Server Not Starting", "body": "<p>I've create a gRPC server using proto3 and python to do basic health checking on a long running daemon. When I start my application though, it doesn't actually start the gRPC server. I was wondering if anyone could help identify why it doesn't start and serve the gRPC API</p>\n\n<p>Proto Definition: health.proto</p>\n\n<pre><code>syntax = \"proto3\";\n\noption java_multiple_files = true;\noption java_package = \"com.redacted.example.worker\";\noption java_outer_classname = \"ExampleWorker\";\noption objc_class_prefix = \"DSW\";\n\npackage exampleworker;\n\nservice Worker {\n  rpc Health (Ping) returns (Pong) {}\n}\n\n// The request message containing PONG\nmessage Ping {\n  string message = 1;\n}\n\n// The response message containing PONG\nmessage Pong {\n  string message = 1;\n}\n</code></pre>\n\n<p>Then I generated the python code using:</p>\n\n<pre><code>python -m grpc_tools.protoc -I=../protos --python_out=. --grpc_python_out=. ../protos/health.proto\n</code></pre>\n\n<p>This generated the <code>health_pb2.py</code> and <code>health_pb2_grpc.py</code> files. I next created a server file:</p>\n\n<pre><code>u\"\"\"Health server is used to create a new health monitoring GRPC server.\"\"\"\n\nfrom concurrent import futures\nimport logging\nimport grpc\nimport health_pb2\nimport health_pb2_grpc\n\n# grpc related variables\ngrpc_host = u'[::]'\ngrpc_port = u'50001'\ngrpc_address = u'{host}:{port}'.format(host=grpc_host, port=grpc_port)\n# logging related variables\nlogger = logging.getLogger(__name__)\nlogger.setLevel(logging.INFO)\n\n\nclass WorkerServicer(health_pb2_grpc.WorkerServicer):\n    u\"\"\"Provides methods that implement functionality of health server.\"\"\"\n\n    def Health(self, request, context):\n        u\"\"\"Return PONG to say the Worker is alive.\"\"\"\n        return health_pb2.Pong(message='PONG')\n\n\ndef serve_health_api():\n    u\"\"\"Create and start the GRPC server.\"\"\"\n    server = grpc.server(futures.ThreadPoolExecutor(max_workers=10))\n    health_pb2_grpc.add_WorkerServicer_to_server(WorkerServicer(), server)\n    logging.info(u'adding port {grpc_address}'.format(\n        grpc_address=grpc_address))\n    server.add_insecure_port(grpc_address)\n    server.start()\n</code></pre>\n\n<p>Then in my main run.py file:</p>\n\n<pre><code>#!mac/bin/python\n\n\"\"\"Run is the local (non-wsgi) entrypoint to the flask application.\"\"\"\n\nfrom subscriber.worker import Worker\nfrom redis import StrictRedis\nfrom examplegrpc.health_server import serve_health_api\nimport logging\n\nredis_host = 'localhost'\nredis_port = 6379\nredis_db = 0\nredis_chan = 'deployment'\n\nif __name__ == \"__main__\":\n    FORMAT = '%(asctime)s %(name)-12s %(levelname)-8s %(message)s'\n    logging.basicConfig(format=FORMAT)\n    logger = logging.getLogger(__name__)\n    logger.setLevel(logging.INFO)\n\n    logger.debug('Creating redis client')\n    client = StrictRedis(host=redis_host, port=redis_port, db=redis_db)\n    w = Worker(client, [redis_chan])\n    try:\n        logger.info('Starting Health gRPC API...')\n        serve_health_api()\n        logger.info('Starting worker...')\n        w.run()\n    except KeyboardInterrupt:\n        logger.info('Exiting...')\n</code></pre>\n\n<p>The w.run() starts correctly to execute work off of a redis channel, but the gRPC server does not start as trying to access it with</p>\n\n<pre><code>channel = grpc.insecure_channel('localhost:{port}'.format(port=grpc_port))\nstub = WorkerStub(channel)\nping = examplegrpc.health_pb2.Ping(message='PING')\nhealth = stub.Health(ping)\n</code></pre>\n\n<p>starts</p>\n\n<pre><code>_Rendezvous: &lt;_Rendezvous of RPC that terminated with (StatusCode.UNAVAILABLE, Connect Failed)&gt;\n</code></pre>\n"}, {"tags": ["python", "bash", "shell"], "comments": [{"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1492033791, "post_id": 43379782, "comment_id": 73822502, "body": "Why would you use <code>sh</code> when you already have (and use) <code>python</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 1687, "user_id": 2888239, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1a60db56b53a188ef09b910480710b68?s=128&d=identicon&r=PG&f=1", "display_name": "kingmakerking", "link": "https://stackoverflow.com/users/2888239/kingmakerking"}, "edited": false, "score": 0, "creation_date": 1492032255, "post_id": 43379848, "comment_id": 73821884, "body": "what does <code>python script.py -n $1</code> or how would I run that?"}, {"owner": {"reputation": 1442, "user_id": 4020610, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-LdgzYsM5kJw/AAAAAAAAAAI/AAAAAAAAH4E/Qase_JE27jE/photo.jpg?sz=128", "display_name": "Lohmar ASHAR", "link": "https://stackoverflow.com/users/4020610/lohmar-ashar"}, "reply_to_user": {"reputation": 1687, "user_id": 2888239, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1a60db56b53a188ef09b910480710b68?s=128&d=identicon&r=PG&f=1", "display_name": "kingmakerking", "link": "https://stackoverflow.com/users/2888239/kingmakerking"}, "edited": false, "score": 0, "creation_date": 1492032852, "post_id": 43379848, "comment_id": 73822111, "body": "comments don&#39;t allow code snipets, so I&#39;ve edited the original answer"}, {"owner": {"reputation": 2326, "user_id": 1496234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4338445fd759964cb9d3812b3e95203?s=128&d=identicon&r=PG", "display_name": "liborm", "link": "https://stackoverflow.com/users/1496234/liborm"}, "edited": false, "score": 0, "creation_date": 1492035848, "post_id": 43379848, "comment_id": 73823303, "body": "Save yourself from the UUOC Award and use <code>&lt;file_with_list xargs python ...</code> instead of <code>cat file | xargs .. </code> ;)"}, {"owner": {"reputation": 1442, "user_id": 4020610, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-LdgzYsM5kJw/AAAAAAAAAAI/AAAAAAAAH4E/Qase_JE27jE/photo.jpg?sz=128", "display_name": "Lohmar ASHAR", "link": "https://stackoverflow.com/users/4020610/lohmar-ashar"}, "edited": false, "score": 0, "creation_date": 1492036379, "post_id": 43379848, "comment_id": 73823478, "body": "actually had to search the acronym :D.   I didn&#39;t knew this &quot;trick&quot;, thanks, I&#39;ll keep it in mind and read mmore about it; although I think the &quot;cat form&quot; it&#39;s easier to understand by novices ... it&#39;s more &quot;human readable&quot;."}], "tags": [], "owner": {"reputation": 1442, "user_id": 4020610, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-LdgzYsM5kJw/AAAAAAAAAAI/AAAAAAAAH4E/Qase_JE27jE/photo.jpg?sz=128", "display_name": "Lohmar ASHAR", "link": "https://stackoverflow.com/users/4020610/lohmar-ashar"}, "is_accepted": false, "score": 0, "last_activity_date": 1492033376, "last_edit_date": 1492033376, "creation_date": 1492032062, "answer_id": 43379848, "question_id": 43379782, "link": "https://stackoverflow.com/questions/43379782/how-to-repeatedly-pass-arguments-to-a-python-file/43379848#43379848", "title": "How to repeatedly pass arguments to a python file", "body": "<p>try:</p>\n\n<pre><code>cat &lt;file_with_list_of_names_1_per_line&gt; | xargs python script.py -n\n</code></pre>\n\n<p>that should do it, if not ... try wrapping \"python script.py -n\" in a bash script. Something simple, let say a script named \"call_my_script.sh\" which would contain:</p>\n\n<pre><code>#!/bin/bash\npython script.py -n $1\n</code></pre>\n\n<p>, then you could call it with:</p>\n\n<pre><code>cat &lt;file_with_list_of_names_1_per_line&gt; | xargs call_my_script.sh\n# this will call/execute \"call_my_script.sh name\", for each name in the file, 1 at a time\n</code></pre>\n\n<p>You could also use the \"-P\" option of \"xargs\", to run several instances in parallel (watch out for concuren\u021bial access to resources, like writing to same output file or similar, could produce strange results) </p>\n\n<pre><code>.. | xargs -P &lt;n&gt; ...\n</code></pre>\n\n<p>to run \"n\" instances of the script in parallel </p>\n\n<p>Side note: also an important aspect for whom is not familiar with \"xargs\", it will treat each <strong><em>word</em></strong> individually, meaning if on a line there would've been 2 (or more) words \"word1 word2\" ... that would make it call \"the script\" 2 (or more) times, 1 for each word. It might not be the expected behavior, so it worth mentioning.</p>\n"}, {"comments": [{"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1492033711, "post_id": 43379912, "comment_id": 73822468, "body": "I think you&#39;re right and the question is a <a href=\"https://meta.stackexchange.com/a/66378\">XY problem.</a>"}], "tags": [], "owner": {"reputation": 6712, "user_id": 1870832, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/4zazd.png?s=128&g=1", "display_name": "Max Power", "link": "https://stackoverflow.com/users/1870832/max-power"}, "is_accepted": false, "score": 2, "last_activity_date": 1492033293, "last_edit_date": 1492033293, "creation_date": 1492032341, "answer_id": 43379912, "question_id": 43379782, "link": "https://stackoverflow.com/questions/43379782/how-to-repeatedly-pass-arguments-to-a-python-file/43379912#43379912", "title": "How to repeatedly pass arguments to a python file", "body": "<p>I would suggest passing a file location (e.g. <code>'names.txt'</code>) as the parameter to your python script when called from shell. Then within the python script, import the names and work with them one by one. </p>\n\n<p>To your second question, if you wrap the logic of script.py in a function (e.g. called <code>script_function</code>) which takes param <code>name</code>, and call <code>script_function(name)</code> for each <code>name</code> in <code>'names.txt'</code>, you should keep your memory use down. The reason is that all the variables created in <code>script_function</code> would be local to that function call and deleted/replaced on the next function call for working with the next name.</p>\n"}, {"tags": [], "owner": {"reputation": 53, "user_id": 6535373, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83bdb93e86aa702a0cd8ccfdef4385be?s=128&d=identicon&r=PG&f=1", "display_name": "npaluskar", "link": "https://stackoverflow.com/users/6535373/npaluskar"}, "is_accepted": false, "score": 0, "last_activity_date": 1492033668, "creation_date": 1492033668, "answer_id": 43380183, "question_id": 43379782, "link": "https://stackoverflow.com/questions/43379782/how-to-repeatedly-pass-arguments-to-a-python-file/43380183#43380183", "title": "How to repeatedly pass arguments to a python file", "body": "<p>Considering you have a list of names you can do the following in shell script</p>\n\n<pre><code>list=\"name1 name2 name 3 ... name1000\"\nfor i in $list; do\npython script.py -n $i\ndone\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1687, "user_id": 2888239, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1a60db56b53a188ef09b910480710b68?s=128&d=identicon&r=PG&f=1", "display_name": "kingmakerking", "link": "https://stackoverflow.com/users/2888239/kingmakerking"}, "edited": false, "score": 0, "creation_date": 1493289620, "post_id": 43392014, "comment_id": 74358010, "body": "Thanks for reminding me the elegance and simplicity of <code>awk</code>. This method does the job without choking anywhere. Accepted!"}], "tags": [], "owner": {"reputation": 10884, "user_id": 7840440, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8YBUl.png?s=128&g=1", "display_name": "Raman Sailopal", "link": "https://stackoverflow.com/users/7840440/raman-sailopal"}, "is_accepted": true, "score": 1, "last_activity_date": 1492085532, "creation_date": 1492085532, "answer_id": 43392014, "question_id": 43379782, "link": "https://stackoverflow.com/questions/43379782/how-to-repeatedly-pass-arguments-to-a-python-file/43392014#43392014", "title": "How to repeatedly pass arguments to a python file", "body": "<p>Another alternative is the built in system function within awk and so:</p>\n\n<pre><code>awk '{ system(\"python script.py -n \"$0) }' filename\n</code></pre>\n"}], "owner": {"reputation": 1687, "user_id": 2888239, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1a60db56b53a188ef09b910480710b68?s=128&d=identicon&r=PG&f=1", "display_name": "kingmakerking", "link": "https://stackoverflow.com/users/2888239/kingmakerking"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 313, "favorite_count": 1, "accepted_answer_id": 43392014, "answer_count": 4, "score": 3, "last_activity_date": 1492085532, "creation_date": 1492031789, "question_id": 43379782, "link": "https://stackoverflow.com/questions/43379782/how-to-repeatedly-pass-arguments-to-a-python-file", "title": "How to repeatedly pass arguments to a python file", "body": "<p>I have a python script which is run as follows:</p>\n\n<pre><code>python script.py -n name \n</code></pre>\n\n<p>Also, I have a file (or say list) which contains all the <code>name</code> values such as follows:</p>\n\n<pre><code>name1\nname2\nname3\nname4\n...\n...\nname1000\n</code></pre>\n\n<p>So, I want to run the python script to pass all these names as the arguments. The dumbest and laziest way of doing this task is that I created a shell script (I wrote a python script to generate this content) say <code>run.sh</code> as follows:</p>\n\n<pre><code>python script.py -n name1\npython script.py -n name2\npython script.py -n name3\npython script.py -n name4\n........\n........\npython script.py -n name1000\n</code></pre>\n\n<p>and I run this shell script as <code>sh run.sh</code>. </p>\n\n<p>I am sure that there must be a smarter/elegant way of doing this. Any tips? </p>\n\n<p>Also, is it possible to free (clear) the python memory after each execution</p>\n"}, {"tags": ["python", "python-2.7", "flask", "race-condition"], "owner": {"reputation": 34, "user_id": 2893865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec33bfeab111ff307e918e397b850e6c?s=128&d=identicon&r=PG&f=1", "display_name": "JohnSkandi", "link": "https://stackoverflow.com/users/2893865/johnskandi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "closed_date": 1492032118, "answer_count": 0, "score": 2, "last_activity_date": 1492031622, "creation_date": 1492031622, "question_id": 43379748, "link": "https://stackoverflow.com/questions/43379748/does-python-flask-prevent-toctou-vulnerabilities", "closed_reason": "Duplicate", "title": "Does python Flask prevent ToCToU vulnerabilities?", "body": "<p>Lets say I have the following code:</p>\n\n<pre><code>limit = 2\ncurrent = 0\n\napp.route('/increase')\ndef add_to_current():\n    if current &gt;= limit:\n        raise Exception(\"limit reached\")\n    current+=1\n    return str(current)\n</code></pre>\n\n<p>Then I access this endpoint a bunch of times at the same time. Will a ToCToU or a race condition occur? Or does flask handle this for me? </p>\n\n<p>If flask doesn't handle this, what is the best way to do so without rewriting the function?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 2, "creation_date": 1492031579, "post_id": 43379707, "comment_id": 73821599, "body": "You can search for a tutorial on validating input in Python.  That should take care of your question.  Do it as soon as you grab the input.  Put it in a while loop that continues until you get good data (you can search for &quot;input until valid&quot; on Stack Overflow)."}], "owner": {"user_type": "does_not_exist", "display_name": "user7856522"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "closed_date": 1492031673, "answer_count": 0, "score": 2, "last_activity_date": 1492031425, "creation_date": 1492031425, "question_id": 43379707, "link": "https://stackoverflow.com/questions/43379707/how-could-i-detect-if-the-users-input-is-zero-or-less", "closed_reason": "Duplicate", "title": "How could I detect if the user&#39;s input is zero or less?", "body": "<p>I'm relatively new to Python, and I'm trying to make a simple Collatz calculator, which multiplies a given integer by 3 and adds one if it is odd, and divides it by two if it is even. </p>\n\n<p>The issue is, the program completely breaks if any decimal, negative integer, or a zero is used. In most cases, it'll just keep spitting out numbers infinitely. I've fixed the decimal issue with the ValueError, but I still need a way to detect if a user inputs a zero or a negative number. I'd assume it'd be something like <code>if n &lt;= 0</code>, but I'm not sure where I'd place that and how I should adjust the existing code.</p>\n\n<p>This is what I've got so far:</p>\n\n<pre><code>print(\"---Dapper's Collatz Calculator---\\n\")\nwhile 1 == 1:\nn = input(\"Enter a positive integer: \")\nsteps= 0\n\ntry:\n    int(n)\nexcept ValueError:\n    print(\"Input number is not a positive integer. Try another number.\")\nelse:\n    n = int(n)\n    integer = n\nwhile n != 1:\n    steps += 1\n    if n % 2:\n        n = 3 * n + 1\n    elif not n % 2:\n        n = n // 2\n    print(-n)\nprint(\"The integer you used (\"+str(integer)+\") took \"+str(steps)+\" steps to reach 1.\\n\")\ninput(\"Press Enter to try another number.\")\nprint(\"\\n\")\nprint('--------------------------------------------------------------------\\n\\n')\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 537, "user_id": 7853136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00f12e850087da5b28d65b2e31e81d2a?s=128&d=identicon&r=PG&f=1", "display_name": "silel", "link": "https://stackoverflow.com/users/7853136/silel"}, "edited": false, "score": 0, "creation_date": 1492213073, "post_id": 43379657, "comment_id": 73900186, "body": "Could you provide a sample of your input?"}], "answers": [{"tags": [], "owner": {"reputation": 4791, "user_id": 3899471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04f65ff7602231a1a1653a7debf32e7f?s=128&d=identicon&r=PG&f=1", "display_name": "kvorobiev", "link": "https://stackoverflow.com/users/3899471/kvorobiev"}, "is_accepted": false, "score": 1, "last_activity_date": 1492031574, "creation_date": 1492031574, "answer_id": 43379740, "question_id": 43379657, "link": "https://stackoverflow.com/questions/43379657/replace-line-if-found-or-append-python/43379740#43379740", "title": "replace line if found or append - python", "body": "<p>Because when you open file for writing</p>\n\n<pre><code>result = open(path, 'w')  # open file handle for write\n</code></pre>\n\n<p>you just erase it content. Try to write in different file and after all work done replace old file with new one. Or read all data into memory and then process it and write to file.</p>\n\n<pre><code>with open(path) as f:\n   data = f.read()\nwith open(path, 'w') as f:\n   for l in data:\n       # make job here\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1442, "user_id": 4020610, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-LdgzYsM5kJw/AAAAAAAAAAI/AAAAAAAAH4E/Qase_JE27jE/photo.jpg?sz=128", "display_name": "Lohmar ASHAR", "link": "https://stackoverflow.com/users/4020610/lohmar-ashar"}, "is_accepted": false, "score": 1, "last_activity_date": 1492033784, "last_edit_date": 1492033784, "creation_date": 1492031611, "answer_id": 43379745, "question_id": 43379657, "link": "https://stackoverflow.com/questions/43379657/replace-line-if-found-or-append-python/43379745#43379745", "title": "replace line if found or append - python", "body": "<p>first of all you are reading an writing the same file ...\nyou could first read it all and the write line by line</p>\n\n<pre><code>with open(path,'r') as f:\n   myfile = f.read() # read everything in the variable \"myfile\" \nresult = open(path, 'w')  # open file handle for write\nfor line in myfile.splitlines(): # process the original file content 1 line at a time \n   # as before\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 537, "user_id": 7853136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00f12e850087da5b28d65b2e31e81d2a?s=128&d=identicon&r=PG&f=1", "display_name": "silel", "link": "https://stackoverflow.com/users/7853136/silel"}, "is_accepted": false, "score": 1, "last_activity_date": 1492035626, "last_edit_date": 1495541857, "creation_date": 1492035626, "answer_id": 43380563, "question_id": 43379657, "link": "https://stackoverflow.com/questions/43379657/replace-line-if-found-or-append-python/43380563#43380563", "title": "replace line if found or append - python", "body": "<p>I strongly recommend reading python's documentation on how to <a href=\"https://docs.python.org/3/tutorial/inputoutput.html#reading-and-writing-files\" rel=\"nofollow noreferrer\">read and write files</a>.</p>\n\n<p>If you open an existing file in write-mode <code>open(path, 'w')</code>, its content will be erased:</p>\n\n<blockquote>\n  <p>mode can be (...) 'w' for only writing (an existing file with the same name will be erased)</p>\n</blockquote>\n\n<p>To replace a line in python you can have a look at this: <a href=\"https://stackoverflow.com/questions/39086/search-and-replace-a-line-in-a-file-in-python\">Search and replace a line in a file in Python</a></p>\n\n<p>Here is one the solutions provided there adapted to your context (tested for python3):</p>\n\n<pre><code>from tempfile import mkstemp\nfrom shutil import move\nfrom os import close\n\ndef test(filepath, command):\n    # Split command into key/value\n    key, _ = command.split('=')\n    matched_key = False\n\n    # Create a temporary file\n    fh, tmp_absolute_path = mkstemp()\n\n    with open(tmp_absolute_path, 'w') as tmp_stream:\n        with open(filepath, 'r') as stream:\n            for line in stream:\n                if key in line:\n                    matched_key = True\n                    tmp_stream.write(command + '\\n')\n                else:\n                    tmp_stream.write(line)\n\n        if not matched_key:\n            tmp_stream.write(command + '\\n')\n\n    close(fh)\n    move(tmp_absolute_path, filepath)\n</code></pre>\n\n<p>Note that with the code above <strong>every</strong> line that matches key (key=blob or blob=key) will be replaced.</p>\n"}], "owner": {"reputation": 169, "user_id": 5225507, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/c2b36e20306d068e0900f7f5d13b03a5?s=128&d=identicon&r=PG&f=1", "display_name": "SO03112", "link": "https://stackoverflow.com/users/5225507/so03112"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 864, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1492049108, "creation_date": 1492031186, "last_edit_date": 1492046515, "question_id": 43379657, "link": "https://stackoverflow.com/questions/43379657/replace-line-if-found-or-append-python", "title": "replace line if found or append - python", "body": "<p>I have text that is key-value pairs separated by '='. I would like to replace the line if the key matches. if not, i would like to append it at the bottom. I've tried several ways, including:</p>\n\n<pre><code>def split_command_key_and_value(command):\n   if '=' in command:\n      command2 = command.split('=')\n      return command2\n\ndef test(command, path):\n   command2 = split_command_key_and_value(command)\n   pattern = command2[0]\n   myfile = open(path,'r')  # open file handle for read\n# use r'', you don't need to replace '\\' with '/'\n   result = open(path, 'w')  # open file handle for write\n   for line in myfile:\n      line = line.strip()  # it's always a good behave to strip what you read from files\n      if pattern in line:\n         line = command  # if match, replace line\n      result.write(line)  # write every line\n   myfile.close()  # don't forget to close file handle\n   result.close()\n</code></pre>\n\n<p>I know the above is just to replace text, but it deletes the text in the file, and I can't see why. Could someone point me in the right direction?</p>\n\n<p>Thanks</p>\n\n<p>Update:</p>\n\n<p>I'm almost there, but some of my lines have similar keys, so mutiple lines are matching when only 1 should. I've tried to incorporate a regex boundary in my loop with no luck. My code is below. Does anyone have a suggestion?</p>\n\n<p>There is some text in the file that isn't key-value, so I would like to skip that.</p>\n\n<pre><code>   def modify(self, name, value):\n      comb = name + ' ' + '=' + ' ' + value + '\\n'\n      with open('/file/', 'w') as tmpstream:\n         with open('/file/', 'r') as stream:\n            for line in stream:\n               if setting_name in line:\n                  tmpstream.write(comb)\n               else:\n                  tmpstream.write(line)\n</code></pre>\n\n<p>I think I got it. See code below.</p>\n\n<pre><code>   def modify(self, name, value):\n      comb = name + ' ' + '=' + ' ' + value + '\\n'\n      mylist = []\n      with open('/file/', 'w') as tmpstream:\n         with open('/file/', 'r') as stream:\n            for line in stream:\n               a = line.split()\n               b = re.compile('\\\\b'+name+'\\\\b')\n               if len(a) &gt; 0:\n                  if b.search(a[0]):\n                     tmpstream.write(comb)\n                  else:\n                     tmpstream.write(line)\n</code></pre>\n\n<p>I spoke too soon. It stops at the key-value I provide. So, it only writes one line, and doesn't write the lines that don't match.</p>\n\n<pre><code>def modify(name, value):\n   comb = name + ' ' + '=' + ' ' + value + '\\n'\n   mylist = []\n   with open('/file1', 'w') as tmpstream:\n      with open('/file2', 'r') as stream:\n         for line in stream:\n            a = line.split()\n            b = re.compile('\\\\b'+name+'\\\\b')\n            if len(a) &gt; 0:\n               if b.search(a[0]):\n                  tmpstream.write(comb)\n            else:\n              tmpstream.write(line)\n</code></pre>\n\n<p>Can anyone see the issue?</p>\n"}, {"tags": ["python", "scheduled-tasks", "pyinstaller", "glob", "taskscheduler"], "comments": [{"owner": {"reputation": 12668, "user_id": 95852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e215c7362074d0346612a10d3a89be9e?s=128&d=identicon&r=PG", "display_name": "John Y", "link": "https://stackoverflow.com/users/95852/john-y"}, "edited": false, "score": 1, "creation_date": 1492031655, "post_id": 43379609, "comment_id": 73821637, "body": "According to your snippet, you don&#39;t provide an explicit directory. Are you sure the &quot;current directory&quot; of the task scheduler is the directory that you are interested in?"}, {"owner": {"reputation": 12668, "user_id": 95852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e215c7362074d0346612a10d3a89be9e?s=128&d=identicon&r=PG", "display_name": "John Y", "link": "https://stackoverflow.com/users/95852/john-y"}, "edited": false, "score": 0, "creation_date": 1492032047, "post_id": 43379609, "comment_id": 73821795, "body": "Also, on a more general note: Avoid using a bare <code>except</code>. And at the very least, while debugging you should re-raise whatever the exception was, so you have as precise information as possible about what went wrong."}, {"owner": {"reputation": 91, "user_id": 4676957, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/rAqnB.png?s=128&g=1", "display_name": "phfb", "link": "https://stackoverflow.com/users/4676957/phfb"}, "reply_to_user": {"reputation": 12668, "user_id": 95852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e215c7362074d0346612a10d3a89be9e?s=128&d=identicon&r=PG", "display_name": "John Y", "link": "https://stackoverflow.com/users/95852/john-y"}, "edited": false, "score": 0, "creation_date": 1492118955, "post_id": 43379609, "comment_id": 73864567, "body": "Great question, John!  I&#39;m using the &quot;current directory&quot; with glob for where I&#39;m searching for the .txt files.  I figure I can point the task scheduler to run my .exe, and it&#39;ll search for the files relative to the .exe&#39;s location."}, {"owner": {"reputation": 12668, "user_id": 95852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e215c7362074d0346612a10d3a89be9e?s=128&d=identicon&r=PG", "display_name": "John Y", "link": "https://stackoverflow.com/users/95852/john-y"}, "edited": false, "score": 0, "creation_date": 1492204376, "post_id": 43379609, "comment_id": 73897669, "body": "I don&#39;t think you&#39;re understanding me. Are you sure the current directory is the directory you think it is? Have you tried adding Python code that prints out the current directory? Also, what about the exception? When you pose a Python question involving an error, you should post the full traceback (which you are currently suppressing in the code shown, but you can easily add it back in with <code>raise</code>)."}, {"owner": {"reputation": 91, "user_id": 4676957, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/rAqnB.png?s=128&g=1", "display_name": "phfb", "link": "https://stackoverflow.com/users/4676957/phfb"}, "reply_to_user": {"reputation": 12668, "user_id": 95852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e215c7362074d0346612a10d3a89be9e?s=128&d=identicon&r=PG", "display_name": "John Y", "link": "https://stackoverflow.com/users/95852/john-y"}, "edited": false, "score": 0, "creation_date": 1492439864, "post_id": 43379609, "comment_id": 73962485, "body": "John, you were absolutely right - I was misunderstanding.  I&#39;ll look into <code>raise</code> to find out exactly where the error&#39;s occurring, and try printing out the current directory to ensure I&#39;m on the right path...har har.  :)  Thanks again!"}], "owner": {"reputation": 91, "user_id": 4676957, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/rAqnB.png?s=128&g=1", "display_name": "phfb", "link": "https://stackoverflow.com/users/4676957/phfb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 309, "favorite_count": 0, "closed_date": 1554480021, "answer_count": 0, "score": 0, "last_activity_date": 1492030967, "creation_date": 1492030967, "question_id": 43379609, "link": "https://stackoverflow.com/questions/43379609/built-a-python-executable-using-pyinstaller-and-it-will-not-schedule-in-windows", "closed_reason": "Duplicate", "title": "Built a python executable using pyInstaller and it will not schedule in Windows Task Scheduler", "body": "<p>I've built a python file that uses the glob library, and wrapped it into an executable using pyInstaller.  The program renames a file file of type .txt to type .xyz.  When I try to run the executable by double-clicking it, it runs fine.  If I try to schedule the executable as a windows scheduled task, it fails on a try/except code block.  If I run python.exe, and hand the .py file as its argument, it runs fine too.  How do I get the file to run as a standalone executable?  </p>\n\n<p>Thanks!</p>\n\n<p>For clarity, here's the context for the try/except:</p>\n\n<pre><code>fileNames = []\nfor thing in glob.glob(\"*.txt\"):\n    fileNames.append(str(thing))\ntry:\n    fileName = fileNames[0]\nexcept:\n    sys.exit(errorMessage)\n</code></pre>\n"}, {"tags": ["python", "scala"], "answers": [{"comments": [{"owner": {"reputation": 5100, "user_id": 4482064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c70f18b6bae1fff9ad75dea670ecd73d?s=128&d=identicon&r=PG", "display_name": "Cyrille Corpet", "link": "https://stackoverflow.com/users/4482064/cyrille-corpet"}, "edited": false, "score": 0, "creation_date": 1492031880, "post_id": 43379784, "comment_id": 73821713, "body": "and if you don&#39;t like implicit conversion (<code>Int =&gt; Char</code>), you can always do it explicitly <code>1.toChar</code>."}, {"owner": {"reputation": 1727, "user_id": 2217866, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/dVD94.jpg?s=128&g=1", "display_name": "Gayatri", "link": "https://stackoverflow.com/users/2217866/gayatri"}, "edited": false, "score": 0, "creation_date": 1492034782, "post_id": 43379784, "comment_id": 73822885, "body": "Awesome! Thanks much!"}], "tags": [], "owner": {"reputation": 7577, "user_id": 5638835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fba9e7db4baba416a82c4277758d886?s=128&d=identicon&r=PG&f=1", "display_name": "puhlen", "link": "https://stackoverflow.com/users/5638835/puhlen"}, "is_accepted": true, "score": 4, "last_activity_date": 1492031793, "creation_date": 1492031793, "answer_id": 43379784, "question_id": 43379578, "link": "https://stackoverflow.com/questions/43379578/control-a-representation-in-python-scala/43379784#43379784", "title": "Control A Representation in Python/Scala", "body": "<p><code>^A</code> is usually used to represent the Start Of Header Character (SOH). It's ascii value is x01.</p>\n\n<p>You can create this in code with <code>val c: Char = 1</code>, if it's more clear to you, or if you need it in a string literal you can use the unicode notation <code>'\\u0001'</code></p>\n"}], "owner": {"reputation": 1727, "user_id": 2217866, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/dVD94.jpg?s=128&g=1", "display_name": "Gayatri", "link": "https://stackoverflow.com/users/2217866/gayatri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 191, "favorite_count": 0, "accepted_answer_id": 43379784, "answer_count": 1, "score": 2, "last_activity_date": 1492031793, "creation_date": 1492030858, "question_id": 43379578, "link": "https://stackoverflow.com/questions/43379578/control-a-representation-in-python-scala", "title": "Control A Representation in Python/Scala", "body": "<p>In Python \"^A\" is represented by chr(1). This is what I use as a separator in myfiles. What is the equivalent in Scala.I am reading the file using scala. I want to know how to represent ^A in order to split the data i read from my files.</p>\n"}, {"tags": ["python", "arrays", "numpy", "binaryfiles"], "answers": [{"comments": [{"owner": {"reputation": 101, "user_id": 6207795, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/Q0vLf.png?s=128&g=1", "display_name": "SGM", "link": "https://stackoverflow.com/users/6207795/sgm"}, "edited": false, "score": 0, "creation_date": 1492044355, "post_id": 43380941, "comment_id": 73825639, "body": "Thank you so much @hpaulj Your answer is really awesome! But I still have a question: suppose all 9 data are float64, is there any way I can load them into an 3-by-3 numpy array DIRECTLY, without transforming twice?"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "reply_to_user": {"reputation": 101, "user_id": 6207795, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/Q0vLf.png?s=128&g=1", "display_name": "SGM", "link": "https://stackoverflow.com/users/6207795/sgm"}, "edited": false, "score": 0, "creation_date": 1492050001, "post_id": 43380941, "comment_id": 73826941, "body": "As demonstrated <code>fromfile</code> creates a 1d array with the specified dtype.  You can give it a count, but no shape.  But once you have a (9,) array it is trivial to reshape that to (3,3).  The <code>np.save&#47;load</code> pair use a header to record dtype and shape, <code>fromfile</code> just reads the data bytes.  You provide the dtype and shape."}], "tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": false, "score": 1, "last_activity_date": 1492038376, "last_edit_date": 1492038376, "creation_date": 1492037952, "answer_id": 43380941, "question_id": 43379562, "link": "https://stackoverflow.com/questions/43379562/read-write-python-list-from-to-binary-file/43380941#43380941", "title": "Read/Write Python List from/to Binary file", "body": "<pre><code>In [196]: rec = np.fromfile('data.b', dtype='&lt;i,&lt;d,&lt;d')\nIn [198]: rec\nOut[198]: \narray([( 1,   2.3,   4.5), ( 6,   7.8,   9. ), (12,  13.4,  56.7)], \n      dtype=[('f0', '&lt;i4'), ('f1', '&lt;f8'), ('f2', '&lt;f8')])\n</code></pre>\n\n<p>This is a 1d structured array</p>\n\n<pre><code>In [199]: rec['f0']\nOut[199]: array([ 1,  6, 12], dtype=int32)\nIn [200]: rec.shape\nOut[200]: (3,)\nIn [201]: rec.dtype\nOut[201]: dtype([('f0', '&lt;i4'), ('f1', '&lt;f8'), ('f2', '&lt;f8')])\n</code></pre>\n\n<p>Note that its <code>tolist</code> looks identical to your original <code>records</code>:</p>\n\n<pre><code>In [202]: rec.tolist()\nOut[202]: [(1, 2.3, 4.5), (6, 7.8, 9.0), (12, 13.4, 56.7)]\nIn [203]: records\nOut[203]: [(1, 2.3, 4.5), (6, 7.8, 9.0), (12, 13.4, 56.7)]\n</code></pre>\n\n<p>You could create a 2d array from either list with:</p>\n\n<pre><code>In [204]: arr2 = np.array(rec.tolist())\nIn [205]: arr2\nOut[205]: \narray([[  1. ,   2.3,   4.5],\n       [  6. ,   7.8,   9. ],\n       [ 12. ,  13.4,  56.7]])\nIn [206]: arr2.shape\nOut[206]: (3, 3)\n</code></pre>\n\n<p>There are other ways of converting a structured array to 'regular' array, but this is simplest and most consistent.</p>\n\n<p>The <code>tolist</code> of a regular array uses nested lists.  The tuples in the structured version are intended to convey a difference:</p>\n\n<pre><code>In [207]: arr2.tolist()\nOut[207]: [[1.0, 2.3, 4.5], [6.0, 7.8, 9.0], [12.0, 13.4, 56.7]]\n</code></pre>\n\n<p>In the structured array the first field is integer.  In the regular array the first column is same as the others, float.</p>\n\n<p>If the binary file contained all floats, you could load it as a 1d of floats and reshape</p>\n\n<pre><code>In [208]: with open('data.f', 'wb') as f:\n     ...:         write_records(records, 'ddd', f)\nIn [210]: rec2 = np.fromfile('data.f', dtype='&lt;d')\nIn [211]: rec2\nOut[211]: array([  1. ,   2.3,   4.5,   6. ,   7.8,   9. ,  12. ,  13.4,  56.7])\n</code></pre>\n\n<p>But to take advantage of any record structure in the binary file, you have load by records as well, which means structured array:</p>\n\n<pre><code>In [213]: rec3 = np.fromfile('data.f', dtype='d,d,d')\nIn [214]: rec3\nOut[214]: \narray([(  1.,   2.3,   4.5), (  6.,   7.8,   9. ), ( 12.,  13.4,  56.7)], \n      dtype=[('f0', '&lt;f8'), ('f1', '&lt;f8'), ('f2', '&lt;f8')])\n</code></pre>\n"}], "owner": {"reputation": 101, "user_id": 6207795, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/Q0vLf.png?s=128&g=1", "display_name": "SGM", "link": "https://stackoverflow.com/users/6207795/sgm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1363, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1492038376, "creation_date": 1492030780, "question_id": 43379562, "link": "https://stackoverflow.com/questions/43379562/read-write-python-list-from-to-binary-file", "title": "Read/Write Python List from/to Binary file", "body": "<p>According to Python Cookbook, below is how to write a list of tuple into binary file:</p>\n\n<pre><code>from struct import Struct\ndef write_records(records, format, f):\n    '''\n    Write a sequence of tuples to a binary file of structures.\n    '''\n    record_struct = Struct(format)\n    for r in records:\n        f.write(record_struct.pack(*r))\n\n# Example\nif __name__ == '__main__':\n    records = [ (1, 2.3, 4.5),\n                (6, 7.8, 9.0),\n                (12, 13.4, 56.7) ]\n    with open('data.b', 'wb') as f:\n        write_records(records, '&lt;idd', f)\n</code></pre>\n\n<p>And it works well. \nFor reading (large amount of binary data), the author recommended the following: </p>\n\n<pre><code>&gt;&gt;&gt; import numpy as np\n&gt;&gt;&gt; f = open('data.b', 'rb')\n&gt;&gt;&gt; records = np.fromfile(f, dtype='&lt;i,&lt;d,&lt;d')\n&gt;&gt;&gt; records\narray([(1, 2.3, 4.5), (6, 7.8, 9.0), (12, 13.4, 56.7)],\ndtype=[('f0', '&lt;i4'), ('f1', '&lt;f8'), ('f2', '&lt;f8')])\n&gt;&gt;&gt; records[0]\n(1, 2.3, 4.5)\n&gt;&gt;&gt; records[1]\n(6, 7.8, 9.0)\n&gt;&gt;&gt;\n</code></pre>\n\n<p>It is also good, but this <code>record</code> is not a normal numpy array. For instance, <code>type(record[0])</code> will return <code>&lt;type 'numpy.void'&gt;</code>. Even worse, I cannot extract the first column using <code>X = record[:, 0]</code>.</p>\n\n<p>Is there a way to efficiently load list(or any other types) from binary file into a normal numpy array? \nThx in advance. </p>\n"}, {"tags": ["python", "rabbitmq", "celery"], "answers": [{"tags": [], "owner": {"reputation": 440, "user_id": 7406574, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-HCDi5HoXGR0/AAAAAAAAAAI/AAAAAAAAAPc/2zCs49q5XfI/photo.jpg?sz=128", "display_name": "Max Paymar", "link": "https://stackoverflow.com/users/7406574/max-paymar"}, "is_accepted": false, "score": 3, "last_activity_date": 1492031427, "creation_date": 1492031427, "answer_id": 43379709, "question_id": 43379554, "link": "https://stackoverflow.com/questions/43379554/what-is-the-relationship-between-celery-and-rabbitmq/43379709#43379709", "title": "What is the relationship between Celery and RabbitMQ?", "body": "<p>RabbitMQ is indeed a message queue, and Celery uses it to send messages to and from workers. Celery is more than just an interface for RabbitMQ. Celery is what you use to create workers, kick off tasks, and define your tasks. It sounds like your use case makes sense for Celery/RabbitMQ. You create a task using the <code>@app.task</code> decorator. Check the <a href=\"http://docs.celeryproject.org/en/latest/userguide/tasks.html\" rel=\"nofollow noreferrer\">docs</a> for more info. In previous projects, I've set up a module for celery, where I define any tasks I need. Then you can pull in functions from other modules to use in your tasks.</p>\n"}, {"tags": [], "owner": {"reputation": 17238, "user_id": 240490, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/536433ff8bf7f50dcab75a920a11d30a?s=128&d=identicon&r=PG", "display_name": "Jonathan Eunice", "link": "https://stackoverflow.com/users/240490/jonathan-eunice"}, "is_accepted": false, "score": 0, "last_activity_date": 1492031485, "creation_date": 1492031485, "answer_id": 43379719, "question_id": 43379554, "link": "https://stackoverflow.com/questions/43379554/what-is-the-relationship-between-celery-and-rabbitmq/43379719#43379719", "title": "What is the relationship between Celery and RabbitMQ?", "body": "<p>Celery is the task management framework--the API you use to schedule jobs, the code that gets those jobs started, the management tools (e.g. Flower) you use to monitor what's going on. </p>\n\n<p>RabbitMQ is one of several \"backends\" for Celery. It's an oversimplification to say that Celery is a high-level interface to RabbitMQ. RabbitMQ is not actually required for Celery to run and do its job properly. But, in practice, they are often paired together, and Celery is a higher-level way of accomplishing some things that you could do at a lower level with just RabbitMQ (or another queue or message delivery backend).</p>\n"}], "owner": {"reputation": 1550, "user_id": 3281900, "user_type": "registered", "accept_rate": 45, "profile_image": "https://graph.facebook.com/100000487316008/picture?type=large", "display_name": "Pig", "link": "https://stackoverflow.com/users/3281900/pig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2221, "favorite_count": 1, "answer_count": 2, "score": 5, "last_activity_date": 1492032132, "creation_date": 1492030749, "last_edit_date": 1492032132, "question_id": 43379554, "link": "https://stackoverflow.com/questions/43379554/what-is-the-relationship-between-celery-and-rabbitmq", "title": "What is the relationship between Celery and RabbitMQ?", "body": "<p>Is Celery mostly just a high level interface for message queues like RabbitMQ? I am trying to set up a system with multiple scheduled workers doing concurrent http requests, but I am not sure if I would need either of them. Another question I am wondering is where do you write the actual task in code for the workers to complete, if I am using Celery or RabbitMQ?</p>\n"}, {"tags": ["python", "date", "pandas", "numpy"], "answers": [{"comments": [{"owner": {"reputation": 4675, "user_id": 2836259, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3783d559c2d24f907375c588bd5160ff?s=128&d=identicon&r=PG", "display_name": "conner.xyz", "link": "https://stackoverflow.com/users/2836259/conner-xyz"}, "edited": false, "score": 0, "creation_date": 1492031660, "post_id": 43379631, "comment_id": 73821639, "body": "@dsc03 check <code>print type(friend_review)</code>, and your other vars are what you expect."}, {"owner": {"reputation": 3, "user_id": 7811570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae2aaf1a9f60a6efcc952a9048f086d3?s=128&d=identicon&r=PG&f=1", "display_name": "dsc03", "link": "https://stackoverflow.com/users/7811570/dsc03"}, "edited": false, "score": 0, "creation_date": 1492031725, "post_id": 43379631, "comment_id": 73821663, "body": "Oh interesting. @connor.xyz does the timedelta accounts for years as well? For example friend_review.date = 2012/01/15  and user_review.date = 2011/11/22."}, {"owner": {"reputation": 3, "user_id": 7811570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae2aaf1a9f60a6efcc952a9048f086d3?s=128&d=identicon&r=PG&f=1", "display_name": "dsc03", "link": "https://stackoverflow.com/users/7811570/dsc03"}, "edited": false, "score": 0, "creation_date": 1492032885, "post_id": 43379631, "comment_id": 73822129, "body": "@connorxyz the function you wrote above returns multiple boolean values. Rather than subtracting the two, it simply evaluates each one and returns a boolean"}, {"owner": {"reputation": 4675, "user_id": 2836259, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3783d559c2d24f907375c588bd5160ff?s=128&d=identicon&r=PG", "display_name": "conner.xyz", "link": "https://stackoverflow.com/users/2836259/conner-xyz"}, "reply_to_user": {"reputation": 3, "user_id": 7811570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae2aaf1a9f60a6efcc952a9048f086d3?s=128&d=identicon&r=PG&f=1", "display_name": "dsc03", "link": "https://stackoverflow.com/users/7811570/dsc03"}, "edited": false, "score": 0, "creation_date": 1492034491, "post_id": 43379631, "comment_id": 73822762, "body": "@dsc03 sounds like <code>friend_review</code> and <code>user_review</code> are <code>Series</code> instances (which is where <code>type()</code> comes in).  I suspect the root issue is your iteration scheme (i.e. you are actually working series back where you expect you are working with individual rows or values).  <code>DataFrame.iterrows()</code> and <code>Series.iteritems()</code> will likely help."}], "tags": [], "owner": {"reputation": 4675, "user_id": 2836259, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3783d559c2d24f907375c588bd5160ff?s=128&d=identicon&r=PG", "display_name": "conner.xyz", "link": "https://stackoverflow.com/users/2836259/conner-xyz"}, "is_accepted": false, "score": 0, "last_activity_date": 1492031557, "last_edit_date": 1492031557, "creation_date": 1492031062, "answer_id": 43379631, "question_id": 43379531, "link": "https://stackoverflow.com/questions/43379531/subtracting-two-dates-from-columns-in-2-dataframes-pandas/43379631#43379631", "title": "Subtracting Two dates from columns in 2 dataframes pandas", "body": "<p><s>The dates in your dataframe are likely not <code>datetime64 dtype</code> instances, hence the <code>invalid type comparison</code>.  You can check with <code>df.dtypes</code>. If that's true, use <code>df.date = pd.to_datetime(df.date)</code>.</s></p>\n\n<p>You likely have some dates in your dataframe that are <code>null</code>, hence the comparisons vs. \"None\". Use <code>df[pd.notnull(df.dates)]</code>.</p>\n\n<p>BTW: Subtracting the dates should get you <code>timedelta</code> so you'll likely need to do something like <code>(friend_review.date - user_review.date).dt.days &lt;= 62</code>.</p>\n"}], "owner": {"reputation": 3, "user_id": 7811570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae2aaf1a9f60a6efcc952a9048f086d3?s=128&d=identicon&r=PG&f=1", "display_name": "dsc03", "link": "https://stackoverflow.com/users/7811570/dsc03"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 249, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1492121130, "creation_date": 1492030696, "last_edit_date": 1492121130, "question_id": 43379531, "link": "https://stackoverflow.com/questions/43379531/subtracting-two-dates-from-columns-in-2-dataframes-pandas", "title": "Subtracting Two dates from columns in 2 dataframes pandas", "body": "<p>I have the following code:</p>\n\n<pre><code>for tup in unique_tuples:\n    user_review = reviews_prior_to_influence_threshold[(reviews_prior_to_influence_threshold.business_id == tup[0]) &amp; (reviews_prior_to_influence_threshold.user_id == tup[1])]     \n\n    for friend in tup[2]:\n        friend_review = reviews_prior_to_influence_threshold[(reviews_prior_to_influence_threshold.business_id == tup[0]) &amp; (reviews_prior_to_influence_threshold.user_id == friend)] \n\n        if (friend_review.date - user_review.date) &lt;= 62:\n            tup[2].remove(friend)\n</code></pre>\n\n<p>I'm extracting values from a list of tuples and matching them to values in a column from a dataframe, then masking the row where that value is equal to true.</p>\n\n<p>The user_review_mask is one row, representing the review that the user made on a business. The friend_review mask is also one row, representing the review that the user's friend made.</p>\n\n<p>tup[2] is a list of friend_ids of the user_id in tup[1]. So I am looping through each friend of a user, and then match that friend_id to his review for a business.</p>\n\n<p>Essentially <strong>I am looking to see if, for 2 different reviews by 2 different users, the difference between the friend_review.date and the user_review.date is &lt;= +2 months.</strong> If the difference isn't less than 2 months, I want to remove the friend_id from the tup[2] list.</p>\n\n<p>Both the dates in both dataframes/rows are of the data type datetime64[ns], and each date is formatted as such \"yyyy-mm-dd\", so I thought I could easily subtract them to see if there was a difference of less than 2 months between reviews.</p>\n\n<p>However, I keep getting the following error: </p>\n\n<pre><code>TypeError: invalid type comparison\n</code></pre>\n\n<p>It also mentions that Numpy does not like comparisons vs \"None\", which I'm also a bit confused about since I have no null values in my column.</p>\n\n<p><strong>UPDATE: SOLUTION</strong>\nEnded up appending to new list instead of deleting from current one, but this works.</p>\n\n<pre><code>#to append tuples\nbusiness_reviewer_and_influenced_reviewers = []\n\n#loop through each user and create a single row df based on a match from the reviews df and our tuple values\nfor tup in unique_tuples:\n    user_review_date = reviews_prior_to_influence_threshold.loc[(reviews_prior_to_influence_threshold.business_id == tup[0]) &amp; \n                                                                (reviews_prior_to_influence_threshold.user_id == tup[1]), 'date']     \n\n    user_review_date = user_review_date.values[0]\n\n    #loop through list each friend of the reviewer that also reviewed the business in tup[2]\n    for friend in tup[2]:\n        friend_review_date = reviews_prior_to_influence_threshold.loc[(reviews_prior_to_influence_threshold.business_id == tup[0]) &amp; \n                                                                      (reviews_prior_to_influence_threshold.user_id == friend), 'date']\n\n        friend_review_date = friend_review_date.values[0]\n        diff = pd.to_timedelta(friend_review_date - user_review_date).days\n\n        #append business_id, reviewer, and influenced_reviewer as a tuple to a list\n        if (diff &gt;= 0) and (diff &lt;= 62):\n            business_reviewer_and_influenced_reviewers.append((tup[0], tup[1], friend))\n</code></pre>\n"}, {"tags": ["python", "pandas", "dataframe"], "answers": [{"tags": [], "owner": {"reputation": 169523, "user_id": 4983450, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/NR2ko.jpg?s=128&g=1", "display_name": "Psidom", "link": "https://stackoverflow.com/users/4983450/psidom"}, "is_accepted": true, "score": 2, "last_activity_date": 1492030981, "creation_date": 1492030981, "answer_id": 43379610, "question_id": 43379418, "link": "https://stackoverflow.com/questions/43379418/remove-certain-strings-from-list-of-strings-as-column-in-pandas-dataframe/43379610#43379610", "title": "Remove certain strings from list of strings as column in pandas.DataFrame", "body": "<p>One option: Use <code>apply</code> method to loop through the items in the <code>tag</code> column; for each item, use a list comprehension to filter strings based on the prefix using <code>startswith</code> method:</p>\n\n<pre><code>df['tag'] = df.tag.apply(lambda lst: [x for x in lst if x.startswith(\"pset\")])\ndf\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/GsodB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GsodB.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 25463, "user_id": 5003756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8BUMb.jpg?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/5003756/james"}, "is_accepted": false, "score": 2, "last_activity_date": 1492030999, "creation_date": 1492030999, "answer_id": 43379617, "question_id": 43379418, "link": "https://stackoverflow.com/questions/43379418/remove-certain-strings-from-list-of-strings-as-column-in-pandas-dataframe/43379617#43379617", "title": "Remove certain strings from list of strings as column in pandas.DataFrame", "body": "<p>You can apply a function to the <code>tag</code> series that constructs a list using only the elements that start with <code>'pset'</code></p>\n\n<pre><code>df.tag.apply(lambda x: [xx for xx in x if xx.startswith('pset')])\n\n# returns:\n0           [pset3]\n1           [pset4]\n2           [pset6]\n3    [pset8, pset5]\n4           [pset4]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 32054, "user_id": 6287308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NdmQp.jpg?s=128&g=1", "display_name": "Vaishali", "link": "https://stackoverflow.com/users/6287308/vaishali"}, "is_accepted": false, "score": 2, "last_activity_date": 1492031112, "creation_date": 1492031112, "answer_id": 43379646, "question_id": 43379418, "link": "https://stackoverflow.com/questions/43379418/remove-certain-strings-from-list-of-strings-as-column-in-pandas-dataframe/43379646#43379646", "title": "Remove certain strings from list of strings as column in pandas.DataFrame", "body": "<p>You can even use python in operator</p>\n\n<pre><code>df.tag = df.tag.apply(lambda x: [elem for elem in x if 'pset' in elem])\n\n0           [pset3]\n1           [pset4]\n2           [pset6]\n3    [pset8, pset5]\n4           [pset4]\n</code></pre>\n"}], "owner": {"reputation": 1834, "user_id": 5491423, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/0bCUw.png?s=128&g=1", "display_name": "PeterB", "link": "https://stackoverflow.com/users/5491423/peterb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1052, "favorite_count": 0, "accepted_answer_id": 43379610, "answer_count": 3, "score": 1, "last_activity_date": 1492031262, "creation_date": 1492030250, "last_edit_date": 1492030663, "question_id": 43379418, "link": "https://stackoverflow.com/questions/43379418/remove-certain-strings-from-list-of-strings-as-column-in-pandas-dataframe", "title": "Remove certain strings from list of strings as column in pandas.DataFrame", "body": "<p>I have a <code>pandas.DataFrame</code>:</p>\n\n<pre><code>    index    question_id    tag\n    0        1858           [pset3, game-of-fifteen]\n    1        2409           [pset4]\n    2        4346           [pset6, cs50submit]\n    3        9139           [pset8, pset5, gradebook]\n    4        9631           [pset4, recover]\n</code></pre>\n\n<p>I need to remove every string from list of strings in <code>tag</code> column except <code>pset*</code> strings. </p>\n\n<p>So I need to end with something like this:</p>\n\n<pre><code>    index    question_id    tag\n    0        1858           [pset3]\n    1        2409           [pset4]\n    2        4346           [pset6]\n    3        9139           [pset8, pset5]\n    4        9631           [pset4]\n</code></pre>\n\n<p>How can I do that please?</p>\n"}, {"tags": ["python", "mysql", "django", "distinct"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7783682"}, "edited": false, "score": 0, "creation_date": 1492039108, "post_id": 43380051, "comment_id": 73824286, "body": "What could I do if I have a specific user for <code>loan__request__customer</code>, e.g., <code>loan__request__customer = 205</code> ?"}, {"owner": {"reputation": 1548, "user_id": 1122229, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cea79f9c2f47da1d19a38f028318821a?s=128&d=identicon&r=PG&f=1", "display_name": "Algorithmatic", "link": "https://stackoverflow.com/users/1122229/algorithmatic"}, "edited": false, "score": 0, "creation_date": 1492040230, "post_id": 43380051, "comment_id": 73824616, "body": "<code>Perception.objects.filter(loan__request__customer = 205).values_list(&#39;my_field&#39;, flat=True).distinct()</code> is that what you meant?"}], "tags": [], "owner": {"reputation": 1548, "user_id": 1122229, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cea79f9c2f47da1d19a38f028318821a?s=128&d=identicon&r=PG&f=1", "display_name": "Algorithmatic", "link": "https://stackoverflow.com/users/1122229/algorithmatic"}, "is_accepted": false, "score": 0, "last_activity_date": 1492033014, "creation_date": 1492033014, "answer_id": 43380051, "question_id": 43379328, "link": "https://stackoverflow.com/questions/43379328/use-distinct-with-mysql/43380051#43380051", "title": "Use .distinct() with MySQL", "body": "<p>Have you tried</p>\n\n<pre><code>Perception.objects.all().values_list('my_field', flat=True).distinct()\n</code></pre>\n\n<p>I haven't tested it, but give it a try and let me know.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7783682"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 198, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1492039831, "creation_date": 1492029869, "last_edit_date": 1495541435, "question_id": 43379328, "link": "https://stackoverflow.com/questions/43379328/use-distinct-with-mysql", "title": "Use .distinct() with MySQL", "body": "<p>In order to work with <code>.distinct()</code> in django in knowing that we work with MySQL, is there an alternative to</p>\n\n<pre><code>In [48]: perc = Perception.objects.all()\n\nIn [49]: perc\nOut[49]: &lt;QuerySet [&lt;Perception: Perception #0000001&gt;, &lt;Perception: Perception #0000002&gt;, &lt;Perception: Perception #0000003&gt;, &lt;Perception: Perception #0000004&gt;]&gt;\n\nIn [50]: perc.filter(loan__request__customer=205).distinct('loan__request__cust\n    ...: omer__user__last_name')\nOut[50]: \n</code></pre>\n\n<p>In fact, I read that \"<code>.distinct([*fields])</code> only works in PostgresSQL\" on the website <a href=\"https://stackoverflow.com/questions/12402923/django-mysql-distinct-query-for-getting-multiple-values\">Django MySQL distinct query for getting multiple values</a>.  The issue is related to the line 50 which didn't return anything.</p>\n\n<p><strong>Question :</strong> Is there an alternative for <code>.distinct()</code> in Django when we work with MySQL?</p>\n\n<p>Thanks!</p>\n\n<p><strong>P.S.</strong> Please tell me if the question is unclear.</p>\n"}, {"tags": ["python", "argparse"], "comments": [{"owner": {"reputation": 2939, "user_id": 4320738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de47f691b009d906bf13e2e6c0fb1451?s=128&d=identicon&r=PG&f=1", "display_name": "Munir", "link": "https://stackoverflow.com/users/4320738/munir"}, "edited": false, "score": 2, "creation_date": 1492030161, "post_id": 43379315, "comment_id": 73820909, "body": "This is not really an answer but just my personal views: For argument validation, always do it as soon you start you program and fail as soon as you find an invalid input. Basically, fail early and fast.   For your second question - The proper way would be to create a config file and load the values from config file based on the option input. For example - you could create a different section in a config.ini file for each option and load that section using <code>configparser</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7656533"}, "reply_to_user": {"reputation": 2939, "user_id": 4320738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de47f691b009d906bf13e2e6c0fb1451?s=128&d=identicon&r=PG&f=1", "display_name": "Munir", "link": "https://stackoverflow.com/users/4320738/munir"}, "edited": false, "score": 0, "creation_date": 1492040721, "post_id": 43379315, "comment_id": 73824756, "body": "How come I didn&#39;t think of ConfigParser? I&#39;m even already using it on this particular script. Great suggestion! I&#39;m new to Python, about a month in, and it&#39;s great reading great comments and feedback! Thanks!"}], "owner": {"user_type": "does_not_exist", "display_name": "user7656533"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 306, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1492029806, "creation_date": 1492029806, "question_id": 43379315, "link": "https://stackoverflow.com/questions/43379315/where-when-to-check-for-user-input-with-argparse", "title": "Where/when to check for user input with argparse?", "body": "<p>I have the following issue: let's say I have the following code, and I need to set some variables according which option is parsed to the program:</p>\n\n<pre><code>if __name__ == '__main__':\n    parser = argparse.ArgumentParser(description=\"Lorem ipsum\")\n    parser.add_argument('application', type=str, choices=['aaa', 'bbb', 'ccc', 'ddd'])\n    parser.add_argument('-e', '--environment', type=str, default='prod', choices=['prod', 'dev'])\n    args = parser.parse_args()\n</code></pre>\n\n<p>And I have to set variables <code>foo</code>, <code>bar</code>, <code>baz</code> according to the selected application, and <code>quz</code> according to the -e option. </p>\n\n<p>Now my question is, where should I be making these checks? Inside the <code>if __main__ ...</code> statement? Inside my <code>main</code> function?</p>\n\n<p>Also, since the the possible values are fixed (ie for aaa, <code>foo</code> will be 2342), what would be the proper way to do it? Write a dictionary for each application option with the possible values and read from there?</p>\n\n<p>For example:</p>\n\n<pre><code>opt_aaa = {\n    foo = 2342\n    bar = 'some_str'\n    baz = 5\n}\n</code></pre>\n\n<p>Truth to be told, I just can hardcode the values and call the <code>main</code> function, but I much rather learn the pythonic and proper way to do it. </p>\n\n<p>Any advice you may have will be truly appreciated! Thanks!</p>\n"}, {"tags": ["python", "sympy"], "comments": [{"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1492030845, "post_id": 43379291, "comment_id": 73821258, "body": "Which python/sympy version do you use?"}, {"owner": {"reputation": 4439, "user_id": 969451, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/01b9c940b49b441a3b4e9fc93611b48d?s=128&d=identicon&r=PG", "display_name": "raacer", "link": "https://stackoverflow.com/users/969451/raacer"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1492031334, "post_id": 43379291, "comment_id": 73821489, "body": "Python 2.7.10, SymPy 1.0"}], "answers": [{"comments": [{"owner": {"reputation": 4439, "user_id": 969451, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/01b9c940b49b441a3b4e9fc93611b48d?s=128&d=identicon&r=PG", "display_name": "raacer", "link": "https://stackoverflow.com/users/969451/raacer"}, "edited": false, "score": 0, "creation_date": 1492032336, "post_id": 43379705, "comment_id": 73821910, "body": "<code>factor()</code> works for me when I define <code>i</code> as <code>i = symbols(&#39;i&#39;, integer=True)</code>. But when it&#39;s defined as <code>i = Idx(&#39;i&#39;)</code>, factor() moves both Indexed and Function outside of summation o_O. Looks like a bug. Is SymPy 0.7.4.1 more robust?"}, {"owner": {"reputation": 4439, "user_id": 969451, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/01b9c940b49b441a3b4e9fc93611b48d?s=128&d=identicon&r=PG", "display_name": "raacer", "link": "https://stackoverflow.com/users/969451/raacer"}, "edited": false, "score": 0, "creation_date": 1492032448, "post_id": 43379705, "comment_id": 73821953, "body": "And the first part of question is still actual."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 4439, "user_id": 969451, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/01b9c940b49b441a3b4e9fc93611b48d?s=128&d=identicon&r=PG", "display_name": "raacer", "link": "https://stackoverflow.com/users/969451/raacer"}, "edited": false, "score": 0, "creation_date": 1492032662, "post_id": 43379705, "comment_id": 73822035, "body": "I don&#39;t know if 0.7.4 is more robust, I couldn&#39;t get your example to work. As for the first question, it&#39;s really just a pretty print difference, I don&#39;t know if you can do anything about it : the two expressions are exactly the same from a mathematical point of view. Should I delete my answer?"}, {"owner": {"reputation": 4439, "user_id": 969451, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/01b9c940b49b441a3b4e9fc93611b48d?s=128&d=identicon&r=PG", "display_name": "raacer", "link": "https://stackoverflow.com/users/969451/raacer"}, "edited": false, "score": 0, "creation_date": 1492033523, "post_id": 43379705, "comment_id": 73822388, "body": "I think you should not. I just want to dive deeper. The expressions are same from the mathematical point of view, but they are different from the point of human logic. I want to accent the fact that <code>b[i]&#47;B</code> is a coefficient for <code>a</code> to make it easy to understand my thoughts when reading this formula. This is needed for documentation purposes within my Jupyter Notebook document. Also I&#39;ve found that <code>separatevars()</code> works almost the same way as <code>factor()</code> - what is the difference?"}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 1, "last_activity_date": 1492031423, "creation_date": 1492031423, "answer_id": 43379705, "question_id": 43379291, "link": "https://stackoverflow.com/questions/43379291/controlling-the-formula-representation-in-sympy/43379705#43379705", "title": "Controlling the formula representation in SymPy", "body": "<p>I couldn't get your exact code to work on my old system (Python 2.7.6, Sympy 0.7.4.1), so I had to modify it a bit while still trying to keep a very similar structure.</p>\n\n<p>It looks like <a href=\"http://docs.sympy.org/dev/tutorial/simplification.html#factor\" rel=\"nofollow noreferrer\"><code>factor()</code></a> could help you:</p>\n\n<pre><code>from sympy import *\na, b = symbols('a, B')\ni, n = symbols('i n', integer=True)\nbi = Function('b')(i)\nf = summation(a/b*bi, (i,1,n))\ninit_printing()\n</code></pre>\n\n<p><code>f</code>:</p>\n\n<pre><code>  n         \n ____       \n \u2572          \n  \u2572   a\u22c5b(i)\n   \u2572  \u2500\u2500\u2500\u2500\u2500\u2500\n   \u2571    B   \n  \u2571         \n \u2571          \n \u203e\u203e\u203e\u203e       \ni = 1       \n</code></pre>\n\n<p><code>factor(f)</code>:</p>\n\n<pre><code>    n       \n   ___      \n   \u2572        \n    \u2572   b(i)\na\u22c5  \u2571       \n   \u2571        \n   \u203e\u203e\u203e      \n  i = 1     \n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n     B   \n</code></pre>\n"}], "owner": {"reputation": 4439, "user_id": 969451, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/01b9c940b49b441a3b4e9fc93611b48d?s=128&d=identicon&r=PG", "display_name": "raacer", "link": "https://stackoverflow.com/users/969451/raacer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1492033695, "creation_date": 1492029723, "last_edit_date": 1492033695, "question_id": 43379291, "link": "https://stackoverflow.com/questions/43379291/controlling-the-formula-representation-in-sympy", "title": "Controlling the formula representation in SymPy", "body": "<p>I've created a formula like this:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>&gt;&gt;&gt; a, b = symbols('a, B')\n&gt;&gt;&gt; i = Idx('i')\n&gt;&gt;&gt; bi = IndexedBase('b')[i]\n&gt;&gt;&gt; Sum(a*(bi/b), (i, 1, 5))\n  5         \n ____       \n \u2572    a\u22c5b[i]\n  \u2572   \u2500\u2500\u2500\u2500\u2500\u2500\n  \u2571     B   \n \u2571         \n \u203e\u203e\u203e\u203e       \ni = 1\n</code></pre>\n\n<p>While it's correct, it looks not like I want. I want to accent the fact that <code>b[i]/B</code> is a coefficient for <code>a</code> to make it easy to understand my thoughts when reading this formula. This is needed for documentation purposes within my Jupyter Notebook document. So I want to tell sympy somehow to represent the formula this way:</p>\n\n<pre><code>  5         \n ____       \n \u2572      b[i]\n  \u2572   a\u22c5\u2500\u2500\u2500\u2500\n  \u2571      B   \n \u2571         \n \u203e\u203e\u203e\u203e       \ni = 1\n</code></pre>\n\n<p>After that I want to tell sympy to simplify the formula to make as little operations as possible. For example, this formula may be simplified this way:</p>\n\n<pre><code>     5         \n    ____       \na   \u2572      \n\u2500 \u22c5  \u2572   b[i]\nB    \u2571     \n    \u2571         \n    \u203e\u203e\u203e\u203e       \n   i = 1\n</code></pre>\n\n<p>How do I achieve this with SymPy?</p>\n"}, {"tags": ["python", "google-api", "google-custom-search", "google-api-python-client"], "answers": [{"comments": [{"owner": {"reputation": 129, "user_id": 7590142, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d083b60a1490a5c7698b8c3909e36211?s=128&d=identicon&r=PG&f=1", "display_name": "Questionnaire", "link": "https://stackoverflow.com/users/7590142/questionnaire"}, "edited": false, "score": 0, "creation_date": 1492030566, "post_id": 43379411, "comment_id": 73821134, "body": "Sorry, do you happen to know which setting or section this is under? Thank you."}, {"owner": {"reputation": 5109, "user_id": 2373748, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/moadr.png?s=128&g=1", "display_name": "galaxyan", "link": "https://stackoverflow.com/users/2373748/galaxyan"}, "reply_to_user": {"reputation": 129, "user_id": 7590142, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d083b60a1490a5c7698b8c3909e36211?s=128&d=identicon&r=PG&f=1", "display_name": "Questionnaire", "link": "https://stackoverflow.com/users/7590142/questionnaire"}, "edited": false, "score": 0, "creation_date": 1492030640, "post_id": 43379411, "comment_id": 73821157, "body": "@Questionnaire I forgot, but it should in the dashboard for GCS api"}, {"owner": {"reputation": 129, "user_id": 7590142, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d083b60a1490a5c7698b8c3909e36211?s=128&d=identicon&r=PG&f=1", "display_name": "Questionnaire", "link": "https://stackoverflow.com/users/7590142/questionnaire"}, "edited": false, "score": 0, "creation_date": 1492046968, "post_id": 43379411, "comment_id": 73826220, "body": "I don&#39;t believe this is what I&#39;m looking for. I&#39;m looking for a way to return ONLY shopping results from a google search."}], "tags": [], "owner": {"reputation": 5109, "user_id": 2373748, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/moadr.png?s=128&g=1", "display_name": "galaxyan", "link": "https://stackoverflow.com/users/2373748/galaxyan"}, "is_accepted": false, "score": 1, "last_activity_date": 1492030225, "creation_date": 1492030225, "answer_id": 43379411, "question_id": 43379256, "link": "https://stackoverflow.com/questions/43379256/google-custom-search-python-shopping-results-only/43379411#43379411", "title": "Google Custom Search Python Shopping Results Only?", "body": "<p>There is a 'search outside of google'checkbox in the dashboard. you will get the same result after you check it. it takes me a while to find it out. the default sitting is only return search result inside of all google websites. </p>\n"}], "owner": {"reputation": 129, "user_id": 7590142, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d083b60a1490a5c7698b8c3909e36211?s=128&d=identicon&r=PG&f=1", "display_name": "Questionnaire", "link": "https://stackoverflow.com/users/7590142/questionnaire"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 402, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1492030225, "creation_date": 1492029624, "question_id": 43379256, "link": "https://stackoverflow.com/questions/43379256/google-custom-search-python-shopping-results-only", "title": "Google Custom Search Python Shopping Results Only?", "body": "<p>How would I go about using the Google Custom Search API, using the python GCS library, to only return Google Shopping results?</p>\n\n<p>I have the basic implementation already for standard search queries, which searches the whole web and returns related sites, but how would I only return shopping results?</p>\n\n<p>Thank You.</p>\n"}, {"tags": ["python", "node.js", "django", "heroku", "sqlite"], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 2577392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f4512cf00e75760b77796504396766e?s=128&d=identicon&r=PG", "display_name": "seungjaeryanlee", "link": "https://stackoverflow.com/users/2577392/seungjaeryanlee"}, "edited": false, "score": 0, "creation_date": 1492030153, "post_id": 43379312, "comment_id": 73820902, "body": "Thank you for the quick answer. I did read in multiple Heroku docs about discouraging sqlite due to ephemeral filesystem, but I did not think that could be the cause of the problem. I&#39;ll try using the Heorku Postgres addon!"}], "tags": [], "owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "is_accepted": true, "score": 4, "last_activity_date": 1492029789, "creation_date": 1492029789, "answer_id": 43379312, "question_id": 43379209, "link": "https://stackoverflow.com/questions/43379209/heroku-deployed-django-webpage-doesnt-update-when-db-changes/43379312#43379312", "title": "Heroku-deployed Django webpage doesn&#39;t update when DB changes", "body": "<p>You <strong>cannot</strong> use sqlite on Heroku. </p>\n\n<p>An sqlite db is stored as a file on the local filesystem. But in Heroku the filesystem is ephemeral and is not shared between dynos. Every time you redeploy your app, or scale your process, or in your case launch a worker, you get a new filesystem with a <em>different</em> copy of the db file.</p>\n\n<p>Use the proper Postgres support via the add-ons.</p>\n"}], "owner": {"reputation": 55, "user_id": 2577392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f4512cf00e75760b77796504396766e?s=128&d=identicon&r=PG", "display_name": "seungjaeryanlee", "link": "https://stackoverflow.com/users/2577392/seungjaeryanlee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 240, "favorite_count": 0, "accepted_answer_id": 43379312, "answer_count": 1, "score": 1, "last_activity_date": 1492029789, "creation_date": 1492029408, "question_id": 43379209, "link": "https://stackoverflow.com/questions/43379209/heroku-deployed-django-webpage-doesnt-update-when-db-changes", "title": "Heroku-deployed Django webpage doesn&#39;t update when DB changes", "body": "<p>I have deployed an app in Heroku using Django. The Django program uses a SQLite database <code>db.sqlite3</code> on root directory to populate its page. Separately, there is also a Node.js scraper program that inserts to that database.</p>\n\n<p>The problem is that the hard-refreshed webpage shows the same data even after the content of the database changed. Curiously, this does not happen when it is tested locally with <code>python manage.py runserver</code>. How can I fix this problem?</p>\n\n<p>Thank you in advance!</p>\n\n<hr>\n\n<p>For reference, here is my requirements.txt file:  </p>\n\n<pre><code>Django==1.10.6  \ngunicorn==19.7.1\nPillow==4.0.0\nselenium==3.3.1\nwhitenoise==3.3.0\n</code></pre>\n"}, {"tags": ["python", "text"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 2, "creation_date": 1492029344, "post_id": 43379180, "comment_id": 73820485, "body": "you cannot add a handle and an integer, seriously!!"}, {"owner": {"reputation": 2030, "user_id": 4052057, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/--CVrGWRHGBQ/AAAAAAAAAAI/AAAAAAAAKOo/68GVhnxPMqw/photo.jpg?sz=128", "display_name": "oshaiken", "link": "https://stackoverflow.com/users/4052057/oshaiken"}, "edited": false, "score": 0, "creation_date": 1492029453, "post_id": 43379180, "comment_id": 73820541, "body": "use this: print type(x)"}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 7673862, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/55fce77ecaf7727f27c20dc904774ec7?s=128&d=identicon&r=PG&f=1", "display_name": "The Awsome", "link": "https://stackoverflow.com/users/7673862/the-awsome"}, "edited": false, "score": 0, "creation_date": 1492029757, "post_id": 43379220, "comment_id": 73820707, "body": "Oh sweet! This is just what I needed, thank you so much, you saved me!"}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 0, "last_activity_date": 1492029850, "last_edit_date": 1492029850, "creation_date": 1492029456, "answer_id": 43379220, "question_id": 43379180, "link": "https://stackoverflow.com/questions/43379180/how-to-add-and-subtract-values-from-text-files-in-python/43379220#43379220", "title": "How to add and subtract values from text files in python", "body": "<p>You need to read the file content, hoping it contains something that looks like an integer:</p>\n\n<pre><code>with open(\"testfile.txt\") as testfile:\n    x = int(testfile.read())\n</code></pre>\n\n<p>Otherwise, you'd ask Python to add an integer and a file.</p>\n\n<p>What's <code>3</code> plus <code>testfile.txt</code>?</p>\n\n<p>Note : <code>with open(...</code> makes sure that the file is properly closed after it's been read, even if it doesn't contain any valid integer.</p>\n"}, {"tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": true, "score": 0, "last_activity_date": 1492029520, "creation_date": 1492029520, "answer_id": 43379236, "question_id": 43379180, "link": "https://stackoverflow.com/questions/43379180/how-to-add-and-subtract-values-from-text-files-in-python/43379236#43379236", "title": "How to add and subtract values from text files in python", "body": "<p>In your code you're trying to add an <em>integer</em> with a <em>file handle</em>, which makes no sense.</p>\n\n<p>Here's a working code to read a file and perform the operation you need:</p>\n\n<pre><code>f = int(input(\"Enter numbers to add products\"))\nwith open(\"testfile.txt\",\"r\") as fhandle:\n    print(f + int(fhandle.read()))\n</code></pre>\n\n<p>That reads the textfile, converts contents to integer and prints result added to your input. Note that it's very frail:</p>\n\n<ul>\n<li>file is empty => exception,</li>\n<li>file contains something else than an integer number => exception...</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 17, "user_id": 7673862, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/55fce77ecaf7727f27c20dc904774ec7?s=128&d=identicon&r=PG&f=1", "display_name": "The Awsome", "link": "https://stackoverflow.com/users/7673862/the-awsome"}, "is_accepted": false, "score": 0, "last_activity_date": 1492030147, "creation_date": 1492030147, "answer_id": 43379389, "question_id": 43379180, "link": "https://stackoverflow.com/questions/43379180/how-to-add-and-subtract-values-from-text-files-in-python/43379389#43379389", "title": "How to add and subtract values from text files in python", "body": "<p>Ah yes this also works too</p>\n\n<pre><code>f = int(input(\"Enter numbers to add products\"))\nn = open(\"testfile.txt\",\"r\")\nprint(f + int(n.read()))\n</code></pre>\n\n<p>I am guessing I just made a simple mistake of handling integers</p>\n"}], "owner": {"reputation": 17, "user_id": 7673862, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/55fce77ecaf7727f27c20dc904774ec7?s=128&d=identicon&r=PG&f=1", "display_name": "The Awsome", "link": "https://stackoverflow.com/users/7673862/the-awsome"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 912, "favorite_count": 0, "accepted_answer_id": 43379236, "answer_count": 3, "score": -2, "last_activity_date": 1492030147, "creation_date": 1492029289, "question_id": 43379180, "link": "https://stackoverflow.com/questions/43379180/how-to-add-and-subtract-values-from-text-files-in-python", "title": "How to add and subtract values from text files in python", "body": "<p>I need to create a program which adds and subtracts from values in text files in python, I looked all over the Internet but I can't find anything useful. \nHere is what I have so far</p>\n\n<pre><code>f = int(input(\"Enter numbers to add products\"))\nx = open(\"testfile.txt\",\"r+\")\nprint(x + f)\n</code></pre>\n\n<p>The x variable contains a text file which has the number 7 in it, when the user enters a number it should add whatever the user gave to the value in the text file and print that value. The problem is that I can't get them add together and print the total value, any help will be great. </p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 4, "creation_date": 1492029117, "post_id": 43379091, "comment_id": 73820366, "body": "Python 2 or Python 3?"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 1, "creation_date": 1492029177, "post_id": 43379091, "comment_id": 73820400, "body": "Welcome to StackOverflow.  Please read and follow the posting guidelines in the help documentation.  <a href=\"http://stackoverflow.com/help/mcve\">Minimal, complete, verifiable example</a> applies here.  We cannot effectively help you until you post your MCVE code and accurately describe the problem. When I run your code with constants in place of the variables, it works fine."}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 7841748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25bf71d4a24966fa28848db4b98e6ded?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/7841748/john-doe"}, "edited": false, "score": 0, "creation_date": 1492029412, "post_id": 43379122, "comment_id": 73820518, "body": "You the man! Thanks @Astrom, i knew it had to be something simple."}, {"owner": {"reputation": 725, "user_id": 7692655, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/znmuz.jpg?s=128&g=1", "display_name": "Astrom", "link": "https://stackoverflow.com/users/7692655/astrom"}, "reply_to_user": {"reputation": 9, "user_id": 7841748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25bf71d4a24966fa28848db4b98e6ded?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/7841748/john-doe"}, "edited": false, "score": 0, "creation_date": 1492193554, "post_id": 43379122, "comment_id": 73892763, "body": "feel free to upvote and accept one of the answer, tks!"}], "tags": [], "owner": {"reputation": 725, "user_id": 7692655, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/znmuz.jpg?s=128&g=1", "display_name": "Astrom", "link": "https://stackoverflow.com/users/7692655/astrom"}, "is_accepted": true, "score": 0, "last_activity_date": 1492029126, "creation_date": 1492029126, "answer_id": 43379122, "question_id": 43379091, "link": "https://stackoverflow.com/questions/43379091/how-do-i-get-a-comma-delimited-output-using-the-print-function-in-python/43379122#43379122", "title": "How do i get a comma delimited output using the print function in python", "body": "<p>Maybe like this?</p>\n\n<pre><code>print(a, ',' ,b)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9, "user_id": 7841748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25bf71d4a24966fa28848db4b98e6ded?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/7841748/john-doe"}, "edited": false, "score": 0, "creation_date": 1492029541, "post_id": 43379210, "comment_id": 73820589, "body": "I&#39;ll give this a shot, thanks!"}], "tags": [], "owner": {"reputation": 300, "user_id": 7824732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef46a551b29b2cdc42a5e57b3808df16?s=128&d=identicon&r=PG&f=1", "display_name": "Kuu Aku", "link": "https://stackoverflow.com/users/7824732/kuu-aku"}, "is_accepted": false, "score": 0, "last_activity_date": 1492029410, "creation_date": 1492029410, "answer_id": 43379210, "question_id": 43379091, "link": "https://stackoverflow.com/questions/43379091/how-do-i-get-a-comma-delimited-output-using-the-print-function-in-python/43379210#43379210", "title": "How do i get a comma delimited output using the print function in python", "body": "<p>Or if you don't want to use the cold comma each time you could do something like that : </p>\n\n<pre><code>myListOfValues = ['test', 'other','yet']\nprint(','.join(myListOfValues))\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 7841748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25bf71d4a24966fa28848db4b98e6ded?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/7841748/john-doe"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "closed_date": 1492035057, "accepted_answer_id": 43379122, "answer_count": 2, "score": -1, "last_activity_date": 1492029410, "creation_date": 1492029015, "last_edit_date": 1492029110, "question_id": 43379091, "link": "https://stackoverflow.com/questions/43379091/how-do-i-get-a-comma-delimited-output-using-the-print-function-in-python", "closed_reason": "Not suitable for this site", "title": "How do i get a comma delimited output using the print function in python", "body": "<p>I am trying to separate this using \"sep\" in the print function. But I keep running into some syntax errors. Any ideas?</p>\n\n<pre><code>print ((my_loc_dict[a]),(my_env_dict[a]),sep=\",\")\n</code></pre>\n"}, {"tags": ["python", "django", "soap", "suds"], "owner": {"reputation": 31, "user_id": 5884494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/775fff9d62c8f7a4bd31c6a71dd7dd20?s=128&d=identicon&r=PG&f=1", "display_name": "aqualatus", "link": "https://stackoverflow.com/users/5884494/aqualatus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 220, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1492028806, "creation_date": 1492028806, "question_id": 43379042, "link": "https://stackoverflow.com/questions/43379042/sharing-a-soap-client-object-between-django-views", "title": "Sharing a SOAP client object between Django views", "body": "<p>My Django application uses an API which is a SOAP service. I'm currently using a python SOAP/WSDL client called SUDS. In order to use the API, I have to initialize the client and provide it with a link to the endpoint, login, API key, and password.</p>\n\n<p>Simplified code that does it:</p>\n\n<pre><code>from suds.client import Client\n\nclient = Client('link.to.WSDL.endpoint')\nsession_id = client.service.a_log_in_service('api_key', 'login', 'password')\n\n# the session_id is required by all other 'client.service.xxx' services\n</code></pre>\n\n<p>Everything works just fine, although it takes some time to initialize the client.</p>\n\n<p>Now, every time I want to send a request to the API in a view, I have to initialize the client. I can't see any way to \"share\" the already initialized client among many views. It would be great to have the client up and running somewhere, so that any user can send an API request using it.</p>\n\n<p>Once I've done the log in in a view, I can store the session_id (in a session, db, file) and use it in other views, but the client still needs to be initialized over again, which means downloading the 200-KB XML file.</p>\n\n<p>Having to download 200 KB every time a user hits a button seems not right at all.\nThanks in advance!</p>\n"}, {"tags": ["python", "powershell"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1492028642, "post_id": 43378924, "comment_id": 73820099, "body": "you don&#39;t need <code>stdout=sys.stdout</code> it&#39;s default. Have you tried with just <code>os.system()</code> ? or <code>subprocess.check_call()</code> ?"}, {"owner": {"reputation": 761, "user_id": 5873911, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/0cabfc6366874bd1595e879ab5d63556?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick Schaefer", "link": "https://stackoverflow.com/users/5873911/patrick-schaefer"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1492028927, "post_id": 43378924, "comment_id": 73820256, "body": "ah removing the <code>stdout=sys.stdout</code> stopped the error I see in python shell and I do briefly see what looks to be a powershell window popup with an error there but I can&#39;t catch what it is.  Any ideas on how to stop it from closing that I could add to the ps1 file?  Sorry definitely a noob here with powershell"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1492029072, "post_id": 43378924, "comment_id": 73820338, "body": "don&#39;t run it from your IDE, run it from a standard console"}], "answers": [{"comments": [{"owner": {"reputation": 761, "user_id": 5873911, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/0cabfc6366874bd1595e879ab5d63556?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick Schaefer", "link": "https://stackoverflow.com/users/5873911/patrick-schaefer"}, "edited": false, "score": 0, "creation_date": 1492029843, "post_id": 43379137, "comment_id": 73820756, "body": "This may be on to something as I can run the resulting ps1 file directly in powershell without issues.  I&#39;ve run the Set-ExecutionPolicy command but I still see error &quot;test.ps1 cannot be loaded because running \\r\\nscripts is disabled on this system.&quot; when trying to run the python script"}, {"owner": {"reputation": 2153, "user_id": 3687725, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/1We1W.jpg?s=128&g=1", "display_name": "Preston Martin", "link": "https://stackoverflow.com/users/3687725/preston-martin"}, "reply_to_user": {"reputation": 761, "user_id": 5873911, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/0cabfc6366874bd1595e879ab5d63556?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick Schaefer", "link": "https://stackoverflow.com/users/5873911/patrick-schaefer"}, "edited": false, "score": 0, "creation_date": 1492030232, "post_id": 43379137, "comment_id": 73820946, "body": "Try passing the -Executionpolicy Bypass flag along with the your .ps1 file name"}, {"owner": {"reputation": 761, "user_id": 5873911, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/0cabfc6366874bd1595e879ab5d63556?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick Schaefer", "link": "https://stackoverflow.com/users/5873911/patrick-schaefer"}, "edited": false, "score": 0, "creation_date": 1492094393, "post_id": 43379137, "comment_id": 73851421, "body": "Note that I needed to run the command in both x64 and x86 version of PowerShell to get it running"}, {"owner": {"reputation": 2153, "user_id": 3687725, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/1We1W.jpg?s=128&g=1", "display_name": "Preston Martin", "link": "https://stackoverflow.com/users/3687725/preston-martin"}, "reply_to_user": {"reputation": 761, "user_id": 5873911, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/0cabfc6366874bd1595e879ab5d63556?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick Schaefer", "link": "https://stackoverflow.com/users/5873911/patrick-schaefer"}, "edited": false, "score": 0, "creation_date": 1492103899, "post_id": 43379137, "comment_id": 73857191, "body": "@PatrickSchaefer that shouldn&#39;t be necessary, but I&#39;m glad you got it working! I&#39;m guessing whichever shell you updated second is the one that your program is using."}], "tags": [], "owner": {"reputation": 2153, "user_id": 3687725, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/1We1W.jpg?s=128&g=1", "display_name": "Preston Martin", "link": "https://stackoverflow.com/users/3687725/preston-martin"}, "is_accepted": true, "score": 2, "last_activity_date": 1492049681, "last_edit_date": 1492049681, "creation_date": 1492029152, "answer_id": 43379137, "question_id": 43378924, "link": "https://stackoverflow.com/questions/43378924/write-commands-with-python-and-execute-in-powershell/43379137#43379137", "title": "Write commands with python and execute in powershell", "body": "<p>Is your machine you are running the script on enabled to run powershell scripts? You can set this via the <a href=\"https://msdn.microsoft.com/en-us/powershell/reference/5.1/microsoft.powershell.security/set-executionpolicy\" rel=\"nofollow noreferrer\">Set-ExecutionPolicy</a> cmdlet, or you can pass the <code>-ExecutionPolicy Bypass</code> parameter to run the script with lowered permissions.</p>\n"}, {"comments": [{"owner": {"reputation": 761, "user_id": 5873911, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/0cabfc6366874bd1595e879ab5d63556?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick Schaefer", "link": "https://stackoverflow.com/users/5873911/patrick-schaefer"}, "edited": false, "score": 0, "creation_date": 1492029732, "post_id": 43379181, "comment_id": 73820696, "body": "So with your script (in python shell) I can see an error: &quot;test.ps1 cannot be loaded because running \\r\\nscripts is disabled on this system.&quot;   If I run the script directly in poweshell I see a quick popup that disappears. If I run just the ps1 file in powershell it works as expected, thoughts?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 761, "user_id": 5873911, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/0cabfc6366874bd1595e879ab5d63556?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick Schaefer", "link": "https://stackoverflow.com/users/5873911/patrick-schaefer"}, "edited": false, "score": 0, "creation_date": 1492032257, "post_id": 43379181, "comment_id": 73821885, "body": "I have found this: <a href=\"http://stackoverflow.com/questions/4037939/powershell-says-execution-of-scripts-is-disabled-on-this-system\" title=\"powershell says execution of scripts is disabled on this system\">stackoverflow.com/questions/4037939/&hellip;</a>"}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": false, "score": 1, "last_activity_date": 1492032314, "last_edit_date": 1495540004, "creation_date": 1492029296, "answer_id": 43379181, "question_id": 43378924, "link": "https://stackoverflow.com/questions/43378924/write-commands-with-python-and-execute-in-powershell/43379181#43379181", "title": "Write commands with python and execute in powershell", "body": "<p>Running such scripts from an IDE isn't supported because IDEs redirect <code>stdout</code> to their own stream, which doesn't support <code>fileno</code> properly most of the time.</p>\n\n<p>Running those commands in a real system shell works, though.</p>\n\n<p>The workaround which works in both shell &amp; IDE is to remove <code>stdout=sys.stdout</code> but you can't get the error messages or retrieve the output, or even better: redirect the output/error streams using <code>Popen</code> capabilities:</p>\n\n<pre><code>import subprocess, sys\np = subprocess.Popen([\"powershell.exe\", \"test.ps1\"],stdout=subprocess.PIPE,stderr=subprocess.PIPE)\nout,err = p.communicate()\nprint(out,err)\n</code></pre>\n\n<p>on my machine, since <code>test.ps1</code> doesn't exist, I get a clear powershell error message.</p>\n\n<p>EDIT: my answer doesn't answer to your edit of your question which shows the actual error message now. This Q&amp;A may help you: <a href=\"https://stackoverflow.com/questions/4037939/powershell-says-execution-of-scripts-is-disabled-on-this-system\">PowerShell says &quot;execution of scripts is disabled on this system.&quot;</a></p>\n"}], "owner": {"reputation": 761, "user_id": 5873911, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/0cabfc6366874bd1595e879ab5d63556?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick Schaefer", "link": "https://stackoverflow.com/users/5873911/patrick-schaefer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1419, "favorite_count": 0, "accepted_answer_id": 43379137, "answer_count": 2, "score": 3, "last_activity_date": 1492049681, "creation_date": 1492028364, "last_edit_date": 1492031862, "question_id": 43378924, "link": "https://stackoverflow.com/questions/43378924/write-commands-with-python-and-execute-in-powershell", "title": "Write commands with python and execute in powershell", "body": "<p>I have a python script that builds commands based off input gotten via rest.\nThe commands work when printed out and copied and pasted into powershell.\nMy question is how to make it actually execute the commands?</p>\n\n<p>So far I have tried writing the commands to a file in the same directory and running like so:</p>\n\n<pre><code>import subprocess, sys\np = subprocess.Popen([\"powershell.exe\", \"test.ps1\"],stdout=sys.stdout)\np.communicate()\n</code></pre>\n\n<p>But I get an error:</p>\n\n<blockquote>\n  <p>Traceback (most recent call last):   File\n  \"C:/Users/pschaefer/src/python/executePowerShell.py\", line 2, in\n  \n      p = subprocess.Popen([\"powershell.exe\", \"test.ps1\"],stdout=sys.stdout)   File \"C:\\Python27\\lib\\subprocess.py\",\n  line 703, in <strong>init</strong>\n      errread, errwrite), to_close = self._get_handles(stdin, stdout, stderr)   File \"C:\\Python27\\lib\\subprocess.py\", line 850, in\n  _get_handles\n      c2pwrite = msvcrt.get_osfhandle(stdout.fileno()) UnsupportedOperation: fileno</p>\n</blockquote>\n\n<p><strong>Update</strong></p>\n\n<p>removing <code>,stdout=sys.stdout1</code> gets rid of the previous error and now I see</p>\n\n<blockquote>\n  <p>test.ps1 cannot be loaded because running \\r\\nscripts is disabled on\n  this system.</p>\n</blockquote>\n\n<p>I have tried switching the command to <code>\".\\\\test.ps1 Set-ExecutionPolicy -ExecutionPolicy unrestricted\"</code> and still have the issue.</p>\n\n<p>Also, would it be possible to build the commands as strings and execute them one by one as built instead of creating a .ps1 file?  Big kudos to anyone that can figure that out!</p>\n"}, {"tags": ["python", "tree", "n-ary-tree"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1492028397, "post_id": 43378884, "comment_id": 73819963, "body": "Is n supposed to be a parameter, or is this always going to be a binary tree?"}, {"owner": {"reputation": 3, "user_id": 7222360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1811ca4c4446b6aa32fd65f11ecc0fed?s=128&d=identicon&r=PG&f=1", "display_name": "Nicole R", "link": "https://stackoverflow.com/users/7222360/nicole-r"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1492028801, "post_id": 43378884, "comment_id": 73820186, "body": "sorry, the number of children is given by input &quot;order&quot;. editing to make that more clear"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1492028843, "post_id": 43378884, "comment_id": 73820207, "body": "Your <code>children</code> method is busted, then. It assumes there are exactly 2 children."}, {"owner": {"reputation": 3, "user_id": 7222360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1811ca4c4446b6aa32fd65f11ecc0fed?s=128&d=identicon&r=PG&f=1", "display_name": "Nicole R", "link": "https://stackoverflow.com/users/7222360/nicole-r"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1492046630, "post_id": 43378884, "comment_id": 73826116, "body": "You&#39;re totally right-- thank you for pointing this out!"}], "answers": [{"tags": [], "owner": {"reputation": 206726, "user_id": 5459839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iehrR.jpg?s=128&g=1", "display_name": "trincot", "link": "https://stackoverflow.com/users/5459839/trincot"}, "is_accepted": true, "score": 0, "last_activity_date": 1492029237, "last_edit_date": 1492029237, "creation_date": 1492028802, "answer_id": 43379041, "question_id": 43378884, "link": "https://stackoverflow.com/questions/43378884/python-flat-list-tree-implementation-given-child-get-parent/43379041#43379041", "title": "Python - Flat list tree implementation: Given child, get parent?", "body": "<p>You would do the inverse operation:</p>\n\n<pre><code>else:\n    #get parent of node i\n    return self._tree[(i-1)//self._order]\n</code></pre>\n\n<p>Note that your implementation is only working for binary trees (you return two children, not <em>n</em>). Correct it like this:</p>\n\n<pre><code>def children(self, i):\n    return self._tree[(i*self._order+1):((i+1)*self._order+1)]\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 7222360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1811ca4c4446b6aa32fd65f11ecc0fed?s=128&d=identicon&r=PG&f=1", "display_name": "Nicole R", "link": "https://stackoverflow.com/users/7222360/nicole-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 697, "favorite_count": 0, "accepted_answer_id": 43379041, "answer_count": 1, "score": 0, "last_activity_date": 1492046836, "creation_date": 1492028250, "last_edit_date": 1492046836, "question_id": 43378884, "link": "https://stackoverflow.com/questions/43378884/python-flat-list-tree-implementation-given-child-get-parent", "title": "Python - Flat list tree implementation: Given child, get parent?", "body": "<p>I'm creating a python class for a tree in which each node has a number of children given by \"order\" (but each child only has one node). I have a method, children(self,i), which returns the children of a node at index i. I need to implement parent(self, i) which will get the parent of a child at index i. </p>\n\n<p>Here's what I have so far:</p>\n\n<pre><code>class Tree:\n  def __init__(self, order=2, l=[]):\n    self._tree = l\n    self._order = order\n\n  def children(self, i):\n    left = self._tree[(i+1)*self._order-1]\n    right = self._tree[(i+1)*self._order]\n    return [left, right]\n\n  def parent(self, i):\n    if i&gt;len(self._tree):\n        return ValueError\n    elif i==0:\n        return None\n    else:\n        #get parent of node i\n</code></pre>\n\n<p>An example tree represented by order=2 and list [45, 2, 123, 1, 8, 40, 456] would look like this:</p>\n\n<pre><code>      45\n    /    \\\n  2       123\n / \\     /   \\\n1   8   40   456   \n</code></pre>\n\n<p>I know that there's probably a way I can reverse the method I used for children(self, i) but I'm not sure how.</p>\n"}, {"tags": ["python", "comparison"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 7, "creation_date": 1492027864, "post_id": 43378768, "comment_id": 73819632, "body": "Because that&#39;s not valid syntax. Use <code>sloperaster &gt; 5 and sloperaster &lt; 20</code> or <code>5 &lt; sloperaster &lt; 20</code>."}], "answers": [{"comments": [{"owner": {"reputation": 10158, "user_id": 1209921, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZxrGg.gif?s=128&g=1", "display_name": "Matthias", "link": "https://stackoverflow.com/users/1209921/matthias"}, "edited": false, "score": 0, "creation_date": 1492029425, "post_id": 43378847, "comment_id": 73820528, "body": "Incorrect description. Your code checks if the value is greater than 5 and less <b>or equal</b> than 20."}, {"owner": {"reputation": 3197, "user_id": 4709300, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pGfqW.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/4709300/chris"}, "reply_to_user": {"reputation": 10158, "user_id": 1209921, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZxrGg.gif?s=128&g=1", "display_name": "Matthias", "link": "https://stackoverflow.com/users/1209921/matthias"}, "edited": false, "score": 0, "creation_date": 1492029480, "post_id": 43378847, "comment_id": 73820560, "body": "Nope, I checked it myself, my description is correct"}, {"owner": {"reputation": 10158, "user_id": 1209921, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZxrGg.gif?s=128&g=1", "display_name": "Matthias", "link": "https://stackoverflow.com/users/1209921/matthias"}, "edited": false, "score": 0, "creation_date": 1492029570, "post_id": 43378847, "comment_id": 73820608, "body": "You want to tell me that you used <code>variable = 20</code> and that the result was <code>False</code>? Never. <code>&gt;=</code> is and was alway &quot;greater or equal&quot;."}, {"owner": {"reputation": 3197, "user_id": 4709300, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pGfqW.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/4709300/chris"}, "reply_to_user": {"reputation": 10158, "user_id": 1209921, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZxrGg.gif?s=128&g=1", "display_name": "Matthias", "link": "https://stackoverflow.com/users/1209921/matthias"}, "edited": false, "score": 0, "creation_date": 1492029634, "post_id": 43378847, "comment_id": 73820641, "body": "If <code>variable</code> is set to 21 it returns false and if <code>variable</code> is set to 4 it returns false as well. Anything in between these two numbers returns true."}, {"owner": {"reputation": 10158, "user_id": 1209921, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZxrGg.gif?s=128&g=1", "display_name": "Matthias", "link": "https://stackoverflow.com/users/1209921/matthias"}, "edited": false, "score": 0, "creation_date": 1492029818, "post_id": 43378847, "comment_id": 73820744, "body": "But you wrote &quot;variable is greater than 5 and less than 20&quot; in your answer. &quot;less&quot; means, that a value of <code>20</code> would be invalid."}, {"owner": {"reputation": 3197, "user_id": 4709300, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pGfqW.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/4709300/chris"}, "reply_to_user": {"reputation": 10158, "user_id": 1209921, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZxrGg.gif?s=128&g=1", "display_name": "Matthias", "link": "https://stackoverflow.com/users/1209921/matthias"}, "edited": false, "score": 0, "creation_date": 1492030121, "post_id": 43378847, "comment_id": 73820889, "body": "I meant to set 20 to 19 my bad"}, {"owner": {"reputation": 10158, "user_id": 1209921, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZxrGg.gif?s=128&g=1", "display_name": "Matthias", "link": "https://stackoverflow.com/users/1209921/matthias"}, "edited": false, "score": 0, "creation_date": 1492033030, "post_id": 43378847, "comment_id": 73822173, "body": "One last question: Did you think about a value of <code>19.5</code> which is less than <code>20</code> but will be rejected by your code?"}, {"owner": {"reputation": 3197, "user_id": 4709300, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pGfqW.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/4709300/chris"}, "reply_to_user": {"reputation": 10158, "user_id": 1209921, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZxrGg.gif?s=128&g=1", "display_name": "Matthias", "link": "https://stackoverflow.com/users/1209921/matthias"}, "edited": false, "score": 0, "creation_date": 1492033275, "post_id": 43378847, "comment_id": 73822275, "body": "My bad again, I&#39;m an idiot, it should be <code>20 &gt; variable &gt; 5</code>"}], "tags": [], "owner": {"reputation": 3197, "user_id": 4709300, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pGfqW.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/4709300/chris"}, "is_accepted": true, "score": 2, "last_activity_date": 1492033292, "last_edit_date": 1492033292, "creation_date": 1492028108, "answer_id": 43378847, "question_id": 43378768, "link": "https://stackoverflow.com/questions/43378768/i-want-to-return-a-value-that-is-greater-than-5-and-less-then-20-using-comparis/43378847#43378847", "title": "I want to return a value that is greater than 5, and less then 20 using Comparison operations, but when ran I get an invalid syntax on the &#39;&lt;&#39; sign", "body": "<pre><code> 20 &gt; variable &gt; 5\n</code></pre>\n\n<p>This is a simple solution that checks both that variable is greater than 5 and less than 20</p>\n"}], "owner": {"reputation": 1, "user_id": 7619500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5d80fb528a80432e7d6ef8ba385d7e3?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua Aranda", "link": "https://stackoverflow.com/users/7619500/joshua-aranda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 43378847, "answer_count": 1, "score": -5, "last_activity_date": 1492033292, "creation_date": 1492027824, "question_id": 43378768, "link": "https://stackoverflow.com/questions/43378768/i-want-to-return-a-value-that-is-greater-than-5-and-less-then-20-using-comparis", "title": "I want to return a value that is greater than 5, and less then 20 using Comparison operations, but when ran I get an invalid syntax on the &#39;&lt;&#39; sign", "body": "<pre><code>import arcpy    \narcpy.env.workspace = \"E:/GEOG488_lecture10data\"    \nfrom arcpy.sa import*    \narcpy.CheckOutExtension('Spatial')    \nsloperaster = arcpy.Raster('slope')    \nModslope = sloperaster &gt; 5 and &lt; 20 \n</code></pre>\n\n<p>I am looking for slopes that fall between 5 and 20, but I continue to get an invalid syntax on the less than sign. </p>\n"}, {"tags": ["python", "matplotlib", "seaborn"], "answers": [{"comments": [{"owner": {"reputation": 3105, "user_id": 3418334, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/9e8a91c87607327105bfdf3fc8a7c337?s=128&d=identicon&r=PG", "display_name": "aquagremlin", "link": "https://stackoverflow.com/users/3418334/aquagremlin"}, "edited": false, "score": 0, "creation_date": 1583552009, "post_id": 43379608, "comment_id": 107165544, "body": "ax.annotate does not allow &#39;overhang&#39; and gives error:    AttributeError: &#39;FancyArrowPatch&#39; object has no property &#39;overhang&#39;"}, {"owner": {"reputation": 3105, "user_id": 3418334, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/9e8a91c87607327105bfdf3fc8a7c337?s=128&d=identicon&r=PG", "display_name": "aquagremlin", "link": "https://stackoverflow.com/users/3418334/aquagremlin"}, "edited": false, "score": 0, "creation_date": 1583552140, "post_id": 43379608, "comment_id": 107165559, "body": "headwidth seems to be the arrowprops component that can be used"}], "tags": [], "owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "is_accepted": true, "score": 8, "last_activity_date": 1492030961, "creation_date": 1492030961, "answer_id": 43379608, "question_id": 43378730, "link": "https://stackoverflow.com/questions/43378730/how-to-get-an-open-and-scaling-arrow-head-in-matplotlib/43379608#43379608", "title": "How to get an open and scaling arrow head in matplotlib", "body": "<p>The key is to use the <code>overhang</code> argument and set it to 1 or something close to it.</p>\n\n<pre><code>import matplotlib.pyplot as plt\n\nfig, ax = plt.subplots(figsize=(4,4))\n\nv = [-0.2, 0, .2, .4, .6, .8, 1]\nfor i, overhang in enumerate(v):\n    ax.arrow(.1,overhang,.6,0, width=0.001, color=\"k\", \n             head_width=0.1, head_length=0.15, overhang=overhang)\n\nax.set_yticks(v)\nax.set_xticks([])\nax.set_ylabel(\"overhang\")\nax.set_ylim(-0.3,1.1)\nplt.tight_layout()\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/INnbL.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/INnbL.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 1980, "user_id": 1016514, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/30812883a1c5a9e33a4515f48df12c74?s=128&d=identicon&r=PG", "display_name": "Hans", "link": "https://stackoverflow.com/users/1016514/hans"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4965, "favorite_count": 4, "accepted_answer_id": 43379608, "answer_count": 1, "score": 3, "last_activity_date": 1492030961, "creation_date": 1492027636, "question_id": 43378730, "link": "https://stackoverflow.com/questions/43378730/how-to-get-an-open-and-scaling-arrow-head-in-matplotlib", "title": "How to get an open and scaling arrow head in matplotlib", "body": "<p>In a Seaborn barplot, I want to annotate a column with an arrow. Now, while I see how this might seem a little discerning, I would really like that arrow to <em>both</em></p>\n\n<ol>\n<li>have an <em>open head</em> (i.e., not a closed triangle as a head, but two open lines) and</li>\n<li><em>scale</em> when I resize the figure.</li>\n</ol>\n\n<p>I have found two matplotlib ways of adding arrows (the <code>arrow</code> and <code>annotate</code> methods), but each one seems to lack one of these features. This code plots both side by side:</p>\n\n<pre><code>import seaborn as sns\n\nsns.plt.subplot(121)\nax = sns.barplot((\"x\", \"y\", \"z\"), (1, 4, 7))\n# head is not open\nax.arrow(0, 5, 0., -3.5, lw=1, fill=False,\n         head_length=.5, head_width=.2,\n         length_includes_head=True)\n\nsns.plt.subplot(122)\nax = sns.barplot((\"x\", \"y\", \"z\"), (1, 4, 7))\n# head does not scale with figure\nax.annotate(\"\", xytext=(0, 5), xy=(0, 1.5),\n            arrowprops=dict(arrowstyle=\"-&gt;, head_length = 2, head_width = .5\", lw=1))\n\nsns.plt.show()\n</code></pre>\n\n<p>The left arrow's head is closed (ugly), but it scales fine when I resize the figure (because the head size is in data units, I assume). The right arrow's head is nice and open, but it always keeps the same pixel size regardless of figure size. So when the figure is small, the right arrow head looks relatively large:</p>\n\n<p><a href=\"https://i.stack.imgur.com/oxRGg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oxRGg.png\" alt=\"Right arrow head too big\"></a></p>\n\n<p>And when I make the figure bigger, the right arrow head becomes - relatively - smaller, while the left arrow head scales nicely:</p>\n\n<p><a href=\"https://i.stack.imgur.com/AriCh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AriCh.png\" alt=\"Right arrow head too small\"></a></p>\n\n<p>So, is there a way to have an open <em>and</em> scaling arrow head?</p>\n"}, {"tags": ["python", "error-handling", "igraph"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 7858924, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/6f2181c2cca77b8fbd749d4abb9a4032?s=128&d=identicon&r=PG", "display_name": "user7858924", "link": "https://stackoverflow.com/users/7858924/user7858924"}, "is_accepted": false, "score": -2, "last_activity_date": 1492033957, "last_edit_date": 1492033957, "creation_date": 1492033196, "answer_id": 43380093, "question_id": 43378698, "link": "https://stackoverflow.com/questions/43378698/pythonigrph-typeerror-plotting-not-available/43380093#43380093", "title": "python+igrph. TypeError: plotting not available", "body": "<p>I don't know what exactly data types your ig.plot() takes, but as the \"TypeError\" suggests, some of your args have wrong data type.\nAnd also it seems you are using Python3, it should be pip3 instead of pip.\nHope this helps you.</p>\n"}, {"tags": [], "owner": {"reputation": 2972, "user_id": 1904943, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/T15Ql.jpg?s=128&g=1", "display_name": "Victoria Stuart", "link": "https://stackoverflow.com/users/1904943/victoria-stuart"}, "is_accepted": false, "score": 1, "last_activity_date": 1558735112, "creation_date": 1558735112, "answer_id": 56299953, "question_id": 43378698, "link": "https://stackoverflow.com/questions/43378698/pythonigrph-typeerror-plotting-not-available/56299953#56299953", "title": "python+igrph. TypeError: plotting not available", "body": "<p>Python 3.7 venv:</p>\n\n<pre><code>(/home/victoria/venv/py37)$ python\n\n  Python 3.7.3 (default, Mar 26 2019, 21:43:19) \n  [GCC 8.2.1 20181127] on linux\n  Type \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n\n  &gt;&gt;&gt; from igraph import *\n  &gt;&gt;&gt; g = Graph.Famous(\"petersen\")\n  &gt;&gt;&gt; plot(g)\n  Traceback (most recent call last):\n    File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n    ...\n  TypeError: plotting not available\n</code></pre>\n\n<ul>\n<li><a href=\"https://github.com/igraph/python-igraph/issues/129\" rel=\"nofollow noreferrer\">https://github.com/igraph/python-igraph/issues/129</a></li>\n<li><a href=\"https://stackoverflow.com/questions/12072093/python-igraph-plotting-not-available\">python + igraph &quot;plotting not available&quot;</a></li>\n<li><a href=\"https://stackoverflow.com/questions/28970480/python-igraph-plot-not-available-cairo-already-installed\">python - igraph plot not available (cairo already installed)</a></li>\n</ul>\n\n<pre><code>(/home/victoria/venv/py37)$ pip install cairocffi\n  ...\n  Successfully installed cairocffi-1.0.2 cffi-1.12.3 pycparser-2.19\n</code></pre>\n\n<p>Now plots (ignore the warning):</p>\n\n<pre><code>(/home/victoria/venv/py37)$ python\n\n  Python 3.7.3 (default, Mar 26 2019, 21:43:19) \n  [GCC 8.2.1 20181127] on linux\n  Type \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n  &gt;&gt;&gt; from igraph import *\n  &gt;&gt;&gt; g = Graph.Famous(\"petersen\")\n  &gt;&gt;&gt; plot(g)\n\n  (gthumb:31636): Gtk-WARNING **: 14:43:58.342: Failed to register client: GDBus.Error:org.freedesktop.DBus.Error.UnknownMethod: Method \"RegisterClient\" with signature \"ss\" on interface \"org.xfce.Session.Manager\" doesn't exist\n  &lt;igraph.drawing.Plot object at 0x7f1810e36e80&gt;\n\n  &gt;&gt;&gt;\n</code></pre>\n\n<p>Result:</p>\n\n<p><a href=\"https://i.stack.imgur.com/aMMb9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/aMMb9.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 3747, "user_id": 3044825, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1pPyB.png?s=128&g=1", "display_name": "mathfux", "link": "https://stackoverflow.com/users/3044825/mathfux"}, "is_accepted": false, "score": 0, "last_activity_date": 1581326225, "creation_date": 1581326225, "answer_id": 60147258, "question_id": 43378698, "link": "https://stackoverflow.com/questions/43378698/pythonigrph-typeerror-plotting-not-available/60147258#60147258", "title": "python+igrph. TypeError: plotting not available", "body": "<p>If you are using Windows, the most probably you have downloaded wheel and installed <code>python-igraph</code> from <a href=\"https://www.lfd.uci.edu/~gohlke/pythonlibs/\" rel=\"nofollow noreferrer\">Unofficial Windows Binaries</a>. This worked perfect for me using something like this:</p>\n\n<pre><code>pip install python_igraph-0.7.1.post6-cp37-cp37m-win_amd64.whl\n</code></pre>\n\n<p>Plotting, however, was not working for me too because I haven't installed <code>pycairo</code> neither <code>cairocffi</code>. Also, neither <code>pip install pycairo</code> nor <code>pip install cairocffi</code> was not working for me. It took a really lot time for me to understand that one needs to download wheel of <code>pycairo</code> and install it using</p>\n\n<pre><code>pip install pycairo-1.19.0-cp37-cp37m-win_amd64.whl\n</code></pre>\n\n<p>Lesson learnt.</p>\n"}], "owner": {"reputation": 473, "user_id": 7274830, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/36de22b80bbbe913bb9c68b0d68b98b2?s=128&d=identicon&r=PG&f=1", "display_name": "kkjoe", "link": "https://stackoverflow.com/users/7274830/kkjoe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2096, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1581326225, "creation_date": 1492027523, "question_id": 43378698, "link": "https://stackoverflow.com/questions/43378698/pythonigrph-typeerror-plotting-not-available", "title": "python+igrph. TypeError: plotting not available", "body": "<p>I want to use python notebook, igraph package to draw picture, example code is here( which i think is right)</p>\n\n<pre><code>!pip install cairocffi\nimport cairocffi as cairo\n\ncorlor = []\nfor i in g.vs['name']:\n    if set([i]) &lt; set(degree_15):\n        corlor.append('red')\n    elif set([i]) &lt; set(degree_30):\n        corlor.append('rgba(255,0,0,0.5)')\n    elif set([i]) &lt; set(degree_60):\n        corlor.append('orange')\n    else:\n        corlor.append('yellow')\nig.plot(g,\n        #'C:\\Users\\Vincent Du\\Desktop\\degree_plot.jpg',\n        layout=geometry_layout,\n        vertex_label=g.vs['name'],\n        scale=1.0,\n        vertex_color=corlor,\n        vertex_frame_width=0.5,\n        edge_width=0.05,\n        vertex_label_size=ig.rescale(g.degree(),out_range=(1,12)),\n        vertex_size=ig.rescale(g.degree(),out_range=(5,25)),\n        bbox=(1200,800),\n        margin = 10,\n       )\n</code></pre>\n\n<p>And there's still an error. I don't know how to fix this problem, thanks!</p>\n\n<pre><code>---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n&lt;ipython-input-120-73eb4de82dd4&gt; in &lt;module&gt;()\n     21         vertex_size=ig.rescale(g.degree(),out_range=(5,25)),\n     22         bbox=(1200,800),\n---&gt; 23         margin = 10,\n     24        )\n\n//anaconda/lib/python3.5/site-packages/igraph/drawing/__init__.py in plot(obj, target, bbox, *args, **kwds)\n    444         bbox = BoundingBox(bbox)\n    445 \n--&gt; 446     result = Plot(target, bbox, background=kwds.get(\"background\", \"white\"))\n    447 \n    448     if \"margin\" in kwds:\n\n//anaconda/lib/python3.5/site-packages/igraph/drawing/__init__.py in __init__(self, target, bbox, palette, background)\n    115         \"\"\"\n    116         self._filename = None\n--&gt; 117         self._surface_was_created = not isinstance(target, cairo.Surface)\n    118         self._need_tmpfile = False\n    119 \n\n//anaconda/lib/python3.5/site-packages/igraph/drawing/utils.py in __getattr__(self, _)\n    394 \n    395     def __getattr__(self, _):\n--&gt; 396         raise TypeError(\"plotting not available\")\n    397     def __call__(self, _):\n    398         raise TypeError(\"plotting not available\")\n\nTypeError: plotting not available\n</code></pre>\n\n<p>I think i have installed cairo, but it still not work</p>\n"}, {"tags": ["python", "pandas", "multi-index"], "answers": [{"comments": [{"owner": {"reputation": 381, "user_id": 7238898, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2157f17355d109037809e623b4998156?s=128&d=identicon&r=PG&f=1", "display_name": "Kdog", "link": "https://stackoverflow.com/users/7238898/kdog"}, "edited": false, "score": 0, "creation_date": 1492031825, "post_id": 43378908, "comment_id": 73821700, "body": "Thank you for your help!  This message came up as I applied the solution to my dataframe- <i>italic_KeyError: &#39;MultiIndex Slicing requires the index to be fully lexsorted tuple len_italic</i> But it was because I missed the step where you sorted the index. Fixed it with this- <code>code</code>mydataframe.sort_index(axis=1, inplace=True)<code>code</code>"}], "tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": true, "score": 2, "last_activity_date": 1492028318, "creation_date": 1492028318, "answer_id": 43378908, "question_id": 43378678, "link": "https://stackoverflow.com/questions/43378678/selecting-pandas-data-by-column-levels-axis-1-multi-index/43378908#43378908", "title": "Selecting Pandas data by column levels/ axis 1 multi-index", "body": "<p>Consider the example dataframe <code>df</code></p>\n\n<pre><code>mux = pd.MultiIndex.from_product([\n        ['year{}'.format(i) for i in range(2010, 2017)],\n        ['{}quarter'.format(i) for i in range(1, 5)],\n        list('ABCD')\n    ])\n\ndf = pd.DataFrame([np.arange(len(mux))], columns=mux)\n\ndf\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/sPWlA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sPWlA.png\" alt=\"enter image description here\"></a></p>\n\n<p>The way to do this is to use <code>pd.IndexSlice</code></p>\n\n<pre><code>l1 = ['year2012','year2015']\nl2 = ['3quarter','4quarter']\nl3 = 'A'\n\ndf.loc[:, pd.IndexSlice[l1, l2, l3]]\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/8bXonm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8bXonm.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 381, "user_id": 7238898, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2157f17355d109037809e623b4998156?s=128&d=identicon&r=PG&f=1", "display_name": "Kdog", "link": "https://stackoverflow.com/users/7238898/kdog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 492, "favorite_count": 0, "accepted_answer_id": 43378908, "answer_count": 1, "score": 3, "last_activity_date": 1492028318, "creation_date": 1492027464, "question_id": 43378678, "link": "https://stackoverflow.com/questions/43378678/selecting-pandas-data-by-column-levels-axis-1-multi-index", "title": "Selecting Pandas data by column levels/ axis 1 multi-index", "body": "<p>Here is a piece of code that accomplishes part of what I'm trying to do:</p>\n\n<pre><code>selection=df.xs(('year2012','3quarter','A'),level=[0,1,2],axis=1)\n</code></pre>\n\n<p>How can I make a selection of multiple criteria in each level of axis 1?\nThe following seems to be the wrong way to accomplish this.</p>\n\n<p><code>selection=df.xs(( ['year2012','year2015'] , ['3quarter','4quarter'] , 'A'), level=[0,1,2], axis=1</code>)</p>\n\n<p>Thank you</p>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 1, "creation_date": 1492027502, "post_id": 43378632, "comment_id": 73819405, "body": "Presumably the problem is in what is returned from <code>WineScraper.searchfunction</code>. It would help if you could post the code for that."}, {"owner": {"reputation": 11, "user_id": 7858586, "user_type": "registered", "profile_image": "https://graph.facebook.com/10213006796304950/picture?type=large", "display_name": "Mike", "link": "https://stackoverflow.com/users/7858586/mike"}, "reply_to_user": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1492030596, "post_id": 43378632, "comment_id": 73821146, "body": "I updated my post with the code from search function"}], "owner": {"reputation": 11, "user_id": 7858586, "user_type": "registered", "profile_image": "https://graph.facebook.com/10213006796304950/picture?type=large", "display_name": "Mike", "link": "https://stackoverflow.com/users/7858586/mike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 425, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1492030677, "creation_date": 1492027310, "last_edit_date": 1492030677, "question_id": 43378632, "link": "https://stackoverflow.com/questions/43378632/displaying-search-results-with-django", "title": "Displaying search results with Django", "body": "<p>I am trying to develop a web app for a school project. The basic functionality is you search for a wine, a script scrapes several websites and returns results on wine name, vintage, price, and a link to where you can purchase. I currently have mostly working code in that when the server will take my searches and return results. However, every time I search for a new wine, the results from the previous search still remain in the table that is rendered. I can't figure out why. Below is my views.py and pertinent corresponding template code: (the scraped data is sent as a dictionary of objects with the pertinent attributes)</p>\n\n<p><strong>Views</strong></p>\n\n<pre><code>def search(request):\n    return render(request, 'findwine/search.html', {})\n\ndef results(request):\n    if request.method == 'POST':\n        print(request)\n        query = request.POST.get('search')\n        search_results=WineScraper.searchfunction(query)\n        return render(request, 'findwine/results.html', {'search_results': search_results})\n    else:\n        return render(request, 'findwine/search.html', {})\n</code></pre>\n\n<p><strong>HTML results template</strong></p>\n\n<pre><code>&lt;div class=\"container text-center\"&gt;\n\n      &lt;a href=\"{% url 'search' %}\" id=\"search\"&gt;Back to Search&lt;/a&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"table-responsive\"&gt;\n\n      &lt;table class=\"table table-bordered table-hover table-striped tablesorter\"&gt;\n\n          &lt;thead&gt;\n\n          &lt;tr&gt;\n\n            &lt;th class=\"header\"&gt; Wine Name &lt;i class=\"icon-sort\"&gt;&lt;/i&gt;&lt;/th&gt;\n\n            &lt;th class=\"header\"&gt; Vintage &lt;i class=\"icon-sort\"&gt;&lt;/i&gt;&lt;/th&gt;\n\n            &lt;th class=\"header\"&gt; Price &lt;i class=\"icon-sort\"&gt;&lt;/i&gt;&lt;/th&gt;\n\n            &lt;th class=\"header\"&gt; Wine Link &lt;i class=\"icon-sort\"&gt;&lt;/i&gt;&lt;/th&gt;\n\n          &lt;/tr&gt;\n\n      &lt;/thead&gt;\n\n      &lt;tbody&gt;\n\n\n{% if search_results %}\n      {% for key,value in search_results.items %}\n\n          &lt;tr&gt;\n\n              &lt;td&gt;{{ value.winename }}&lt;/td&gt;\n\n              &lt;td&gt;{{ value.vintage }}&lt;/td&gt;\n\n              &lt;td&gt;{{ value.price }}&lt;/td&gt;\n\n              &lt;td&gt; &lt;a href={{ value.winelink }}&gt;Buy Wine&lt;/a&gt;&lt;/td&gt;\n\n          &lt;/tr&gt;\n\n      {% endfor %}\n{% endif %}\n\n\n      &lt;/tbody&gt;\n\n      &lt;/table&gt;\n\n  &lt;/div&gt;\n\n&lt;/div&gt;\n\nHTML search template\n&lt;form class=\"form-signin\" id=\"results\" method=\"POST\" action=\"/results/\"&gt;\n\n        {% csrf_token %}\n\n        &lt;br&gt;\n\n        &lt;input type=\"text\" name=\"search\" class=\"form-control\" placeholder=\"Search for Wine to Buy\" value=\"\" required autofocus&gt;\n\n        &lt;br&gt;\n\n        &lt;button class=\"btn btn-lg btn-primary btn-block\" type=\"submit\"&gt;Search&lt;/button&gt;\n\n      &lt;/form&gt;\n</code></pre>\n\n<p><strong>WineScraper.py</strong></p>\n\n<pre><code>import requests\nfrom bs4 import BeautifulSoup\nimport re\n\n# variables\nwine_results={}\nhdr={'User-Agent':'Mozilla/5.0'}\nclass wine:\ndef __init__(self,winename,vintage,price,winelink):\n    self.winename=winename\n    self.vintage=vintage\n    self.price=price\n    self.winelink=winelink\n\n#data manipulation functions\ndef getlinks(query):\ni=0\nlist=[]\nfor i,item in enumerate(query):\n    list.append(query[i]['href'])\n    i=i+1\nreturn list\n\ndef gettext(query):\ni=0\nlist=[]\nfor i,item in enumerate(query):\n    list.append(query[i].text)\n    i=i+1\nreturn list\n\ndef getyear(query):\ni=0\nlist=[]\nlist1=gettext(query)\nfor i,item in enumerate(list1):\n    match=re.search('\\d{4}', list1[i])\n    if match:\n        list.append(match.group())\n    else:\n        list.append('None')\n    i=i+1\nreturn list\n\ndef getprice(query):\ni=0\nlist=[]\nlist1=gettext(query)\nfor i,item in enumerate(list1):\n    match=re.search('[1-9]\\d*\\.\\d*|\\d+\\.\\d*',list1[i])\n    if match:\n        list.append('$'+ match.group())\n    else:\n        list.append('None')\n    i=i+1\nreturn list\n\ndef filteryear(query):\ni=0\nlist=[]\nlist1=gettext(query)\nfor i,item in enumerate(list1):\n    match=re.sub('\\d{4}', '', list1[i])\n    list.append(match)\n    i=i+1\nreturn list\n\ndef linksappend(prefix,query):\ni=0\nlist=[]\nfor i,item in enumerate(query):\n    list.append(prefix + query[i])\n    i=i+1\nreturn list\n\n#search functions\n\ndef searchwinecom(search):\nprefix=\"http://www.wines.com\"\nurl='http://www.wine.com/v6/search'\npayload={'term':search}\nr=requests.get(url,params=payload)\nsoup=BeautifulSoup(r.content,'html.parser')\nwines=[a.find('a',class_=\"listProductName\") for a in soup.find_all(\"div\",class_='productName')]\nprices=soup.find_all(\"div\",class_=\"productPrice\")\nwinelinks1=getlinks(wines)\nwinelinks=linksappend(prefix,winelinks1)\nwinename=filteryear(wines)\nvintage=getyear(wines)\nprice=getprice(prices)\n\n#code for putting data into dictionary below\ni=0\nfor i,item in enumerate(winename):\n    wine_results[winename[i]]=[winename[i],vintage[i],price[i],winelinks[i]]\n    i=i+1\nreturn\n\ndef searchwinesearcher(search):\nsearch.replace(\" \", \"+\")\nurl='http://www.wine-searcher.com/find/'+ search + '/1/usa'\nr=requests.get(url)\nsoup=BeautifulSoup(r.content,'html.parser')\nwinelinks=[a.find('a') for a in soup.find_all('div',class_=\"seller-link-wrap\")]\nwinelink=getlinks(winelinks)\nwinenames=soup.find_all('span', class_=\"offer_winename\")\nwinename=filteryear(winenames)\nprices=soup.find_all('span',class_=\"offer_price boldtxt\")\nprice=getprice(prices)\nvintage=getyear(winenames)\n\n#code for putting data into dictionary below\ni=0\nfor i,item in enumerate(winename):\n    wine_results[winename[i]]=[winename[i],vintage[i],price[i],winelink[i]]\n    i=i+1\nreturn\n\ndef searchcorkery(search):\nprefix=\"http://www.corkerywine.com\"\npayload={'type':'product','q':search}\nurl='http://www.corkerywine.com/search'\nr=requests.get(url, headers=hdr,params=payload)\nsoup=BeautifulSoup(r.content,'html.parser')\nwines=[a.find('a') for a in soup.find_all(\"h2\",class_='product-item__title')]\nprices=soup.find_all(\"span\",class_=\"product-item__price\")\nwinelinks1=getlinks(wines)\nwinelinks=linksappend(prefix,winelinks1)\nwinename=filteryear(wines)\nvintage=getyear(wines)\nprice1=getprice(prices)\n\n#code for putting data into dictionary below\ni=0\nfor i,item in enumerate(winename):\n    wine_results[winename[i]]=[winename[i],vintage[i],price1[i],winelinks[i]] #change price1 to price after implementing error check\n    i=i+1\nreturn\n\ndef searchgetwineonline(search):\npayload={'request':'SEARCH','search':search}\nurl='http://www.getwineonline.com/main.asp'\nr=requests.get(url, headers=hdr,params=payload)\nsoup=BeautifulSoup(r.content,'html.parser')\nvintages=soup.find_all(\"span\",class_='vintage')\nwines=soup.find_all(\"a\",class_=\"producttitle\")\nprices=soup.find_all(\"span\",class_=\"RegularPrice\")\nwinelinks=getlinks(wines)\nwinename=gettext(wines)\nvintage=gettext(vintages)\nprice=getprice(prices)\n\n#code for putting data into dictionary below\ni=0\nfor i,item in enumerate(winename):\n    wine_results[winename[i]]=[winename[i],vintage[i],price[i],winelinks[i]]\n    i=i+1\nreturn \n\ndef searchfunction(search):\nsearchwinecom(search)\nsearchwinesearcher(search)\nsearchcorkery(search)\nsearchgetwineonline(search)\nwine_results2={}\nfor key,value in wine_results.items():\n    wine_results2[key]=wine(wine_results[key][0], wine_results[key][1], wine_results[key][2],wine_results[key][3])\nreturn wine_results2\n</code></pre>\n\n<p>What am I missing? </p>\n"}, {"tags": ["python", "numpy", "scipy"], "answers": [{"comments": [{"owner": {"reputation": 668, "user_id": 3341873, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/ceac8300a85100105e34613e2b607826?s=128&d=identicon&r=PG&f=1", "display_name": "Zahlii", "link": "https://stackoverflow.com/users/3341873/zahlii"}, "edited": false, "score": 0, "creation_date": 1492029333, "post_id": 43379153, "comment_id": 73820477, "body": "The blocks are indeed non-overlapping since I am more or less creating a chessboard pattern, where each of the cells only keeps it&#39;s maximum value."}], "tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": false, "score": 1, "last_activity_date": 1492029202, "creation_date": 1492029202, "answer_id": 43379153, "question_id": 43378625, "link": "https://stackoverflow.com/questions/43378625/scipy-numpy-only-keep-maximum-value-of-a-sparse-matrix-block/43379153#43379153", "title": "SciPy/numpy: Only keep maximum value of a sparse matrix block", "body": "<pre><code>def keep_only_max(a,b,c,d):\n  sub = x[a:b,c:d]\n  z = np.max(sub)\n  sub[sub &lt; z] = 0\n</code></pre>\n\n<p>For a sparse <code>x</code>, the <code>sub</code> slicing works for <code>csr</code> format.  It won't be as fast as the equivalent dense slice, but it will create a copy of that part of <code>x</code>.  </p>\n\n<p>I'd have to check the sparse <code>max</code> functions.  But I can imagine convertering <code>sub</code> to <code>coo</code> format, using <code>np.argmax</code> on the <code>.data</code> attribute, and with the corresponding <code>row</code> and <code>col</code> values, constructing a new matrix of the same shape but just one nonzero value.</p>\n\n<p>If your blocks covered <code>x</code> in a regular, nonoverlapping manner, I'd suggest constructing a new matrix with <code>sparse.bmat</code>.  That basically collects the <code>coo</code> attributes of all the components, joins them into one set of arrays with the appropriate offsets, and makes a new <code>coo</code> matrix.</p>\n\n<p>If the blocks are scattered or overlap you might have to generate, and insert them back into <code>x</code> one by one.  <code>csr</code> format should work for that, but it will issue a sparse efficiency warning.  <code>lil</code> is supposed to be faster for changing values.  I think it will accept blocks.</p>\n\n<p>I can imagine doing this with sparse matrices, but it will take time to setup a test case and debug the process.</p>\n"}, {"tags": [], "owner": {"reputation": 668, "user_id": 3341873, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/ceac8300a85100105e34613e2b607826?s=128&d=identicon&r=PG&f=1", "display_name": "Zahlii", "link": "https://stackoverflow.com/users/3341873/zahlii"}, "is_accepted": true, "score": 0, "last_activity_date": 1492106970, "creation_date": 1492106970, "answer_id": 43399040, "question_id": 43378625, "link": "https://stackoverflow.com/questions/43378625/scipy-numpy-only-keep-maximum-value-of-a-sparse-matrix-block/43399040#43399040", "title": "SciPy/numpy: Only keep maximum value of a sparse matrix block", "body": "<p>Thanks to hpaulj I managed to implement a solution using <code>scipy.sparse.bmat</code>:</p>\n\n<pre class=\"lang-pyython prettyprint-override\"><code>from scipy.sparse import coo_matrix\nfrom scipy.sparse import csr_matrix\nfrom scipy.sparse import rand\nfrom scipy.sparse import bmat\nimport numpy as np\n\n\nnp.set_printoptions(precision=2)\n\n# my matrices are symmetric, so generate random symmetric matrix\nx = rand(10,10,density=0.4)\nx = x.T * x\nx = x\n\n\ndef keep_only_max(a,b,c,d):\n    sub = x[a:b,c:d]\n    z = np.unravel_index(sub.argmax(),sub.shape)\n    i1 = z[0]\n    j1 = z[1]\n    new = csr_matrix(([sub[i1,j1]],([i1],[j1])),shape=(b-a,d-c))\n    return new\n\ndef keep_all(a,b,c,d):\n    return x[a:b,c:d].copy()\n\n# we want to create a chessboard pattern where the first central block is 1x1, the second 5x5 and the last 4x4\nsizes = np.asarray([0,1,5,4])\nsizes_sum = np.cumsum(sizes)\n\n# acquire 2D array to store our chessboard blocks\nr = range(len(sizes)-1)\nblocks = [[0 for x in r] for y in r] \n\n\nfor i in range(1,len(sizes)):\n    current_i_min = sizes_sum[i-1]\n    current_i_max = sizes_sum[i]\n\n    for j in range(i,len(sizes)):\n\n        current_j_min = sizes_sum[j-1]\n        current_j_max = sizes_sum[j]\n\n        if i == j:\n            # keep the blocks at the diagonal completely\n            sub = keep_all(current_i_min, current_i_max, current_j_min, current_j_max)\n            blocks[i-1][j-1] = sub\n        else:\n            # the blocks not on the digonal only keep their maximum value\n            current_j_min = sizes_sum[j-1]\n            current_j_max = sizes_sum[j]\n\n            # we can leverage the matrix symmetry and only calculate one new matrix.\n            m1 = keep_only_max(current_i_min, current_i_max, current_j_min, current_j_max)\n            m2 = m1.T\n\n            blocks[i-1][j-1] = m1\n            blocks[j-1][i-1] = m2\n\n\nz = bmat(blocks)\nprint(z.todense())\n</code></pre>\n"}], "owner": {"reputation": 668, "user_id": 3341873, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/ceac8300a85100105e34613e2b607826?s=128&d=identicon&r=PG&f=1", "display_name": "Zahlii", "link": "https://stackoverflow.com/users/3341873/zahlii"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 0, "accepted_answer_id": 43399040, "answer_count": 2, "score": 0, "last_activity_date": 1492106970, "creation_date": 1492027276, "question_id": 43378625, "link": "https://stackoverflow.com/questions/43378625/scipy-numpy-only-keep-maximum-value-of-a-sparse-matrix-block", "title": "SciPy/numpy: Only keep maximum value of a sparse matrix block", "body": "<p>I am trying to operate on a large sparse matrix (currently 12000 x 12000). \nWhat I want to do is to set blocks of it to zero but keep the largest value within this block.\nI already have a running solution for dense matrices:</p>\n\n<pre><code>import numpy as np\nfrom scipy.sparse import random\n\nnp.set_printoptions(precision=2)\n#x = random(10,10,density=0.5)\nx = np.random.random((10,10))\nx = x.T * x\nprint(x)\n\ndef keep_only_max(a,b,c,d):\n  sub = x[a:b,c:d]\n  z = np.max(sub)\n  sub[sub &lt; z] = 0\n\n\nsizes = np.asarray([0,1,5,4])\nsizes_sum = np.cumsum(sizes)\n\nfor i in range(1,len(sizes)):\n  current_i_min = sizes_sum[i-1]\n  current_i_max = sizes_sum[i]\n  for j in range(1,len(sizes)):\n    if i &gt;= j:\n      continue\n    current_j_min = sizes_sum[j-1]\n    current_j_max = sizes_sum[j]\n\n    keep_only_max(current_i_min, current_i_max, current_j_min, current_j_max)\n    keep_only_max(current_j_min, current_j_max, current_i_min, current_i_max)\n\nprint(x)\n</code></pre>\n\n<p>This, however, doesn't work for sparse matrices (try uncommenting the line on top).\nAny ideas how I could efficiently implement this without calling todense()?</p>\n"}, {"tags": ["python", "pandas", "group-by", "pycharm", "pandas-groupby"], "answers": [{"tags": [], "owner": {"reputation": 56440, "user_id": 2285236, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ac8c2e0f71dbd8cf4543039bebf2ab3?s=128&d=identicon&r=PG&f=1", "display_name": "ayhan", "link": "https://stackoverflow.com/users/2285236/ayhan"}, "is_accepted": false, "score": 4, "last_activity_date": 1492028676, "creation_date": 1492028676, "answer_id": 43379007, "question_id": 43378580, "link": "https://stackoverflow.com/questions/43378580/python-interaction-between-rows-and-columns-in-dataframe/43379007#43379007", "title": "Python interaction between rows and columns in dataframe", "body": "<p>One way would be:</p>\n\n<pre><code>cross = pd.crosstab(df['student'], df['exam'])\nres = cross.dot(cross.T)\nres.where(np.triu(res, k=1).astype('bool')).stack()\nOut: \nstudent  student\nbob      jason      1.0\n         robert     1.0\ndavid    john       1.0\n         kevin      1.0\njason    robert     1.0\njohn     kevin      1.0\nmarc     peter      1.0\nnik      ted        1.0\ndtype: float64\n</code></pre>\n\n<p>The dot product generates a binary matrix for the co occurrences. In order not to repeat the same pairs, I filter them with where and stack. The index of the resulting Series is the students that have the same exam.</p>\n"}, {"comments": [{"owner": {"reputation": 405, "user_id": 5564878, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/42bf732fd6b4664361bf129f53b7bfed?s=128&d=identicon&r=PG&f=1", "display_name": "Sheron", "link": "https://stackoverflow.com/users/5564878/sheron"}, "edited": false, "score": 0, "creation_date": 1492030414, "post_id": 43379046, "comment_id": 73821036, "body": "Great! Thanks a lot!"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 405, "user_id": 5564878, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/42bf732fd6b4664361bf129f53b7bfed?s=128&d=identicon&r=PG&f=1", "display_name": "Sheron", "link": "https://stackoverflow.com/users/5564878/sheron"}, "edited": false, "score": 0, "creation_date": 1492030553, "post_id": 43379046, "comment_id": 73821129, "body": "@Giada you&#39;re welcome, glad I could help.  Thanks for accepting."}], "tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": true, "score": 6, "last_activity_date": 1492029531, "last_edit_date": 1492029531, "creation_date": 1492028825, "answer_id": 43379046, "question_id": 43378580, "link": "https://stackoverflow.com/questions/43378580/python-interaction-between-rows-and-columns-in-dataframe/43379046#43379046", "title": "Python interaction between rows and columns in dataframe", "body": "<p>self <code>merge</code></p>\n\n<pre><code>df.merge(\n    df, on='exam',\n    suffixes=['', '_shared_with']\n).query('student != student_shared_with')\n\n       exam student student_shared_with\n1    French    john               david\n2    French    john               kevin\n3    French   david                john\n5    French   david               kevin\n6    French   kevin                john\n7    French   kevin               david\n10  English     ted                 nik\n11  English     nik                 ted\n14   German   jason                 bob\n15   German   jason              robert\n16   German     bob               jason\n18   German     bob              robert\n19   German  robert               jason\n20   German  robert                 bob\n23  Russian    marc               peter\n24  Russian   peter                marc\n</code></pre>\n\n<hr>\n\n<p>self <code>join</code></p>\n\n<pre><code>d1 = df.set_index('exam')\nd1.join(\n    d1, rsuffix='_shared_with'\n).query('student != student_shared_with')\n\n        student student_shared_with\nexam                               \nEnglish     ted                 nik\nEnglish     nik                 ted\nFrench     john               david\nFrench     john               kevin\nFrench    david                john\nFrench    david               kevin\nFrench    kevin                john\nFrench    kevin               david\nGerman    jason                 bob\nGerman    jason              robert\nGerman      bob               jason\nGerman      bob              robert\nGerman   robert               jason\nGerman   robert                 bob\nRussian    marc               peter\nRussian   peter                marc\n</code></pre>\n\n<hr>\n\n<p><code>itertools.permutations</code> + <code>groupby</code></p>\n\n<pre><code>from itertools import permutations as perm\n\ncols = ['student', 'student_shared_with']\ndf.groupby('exam').student.apply(\n    lambda x: pd.DataFrame(list(perm(x, 2)), columns=cols)\n).reset_index(drop=True)\n\n   student student_shared_with\n0      ted                 nik\n1      nik                 ted\n2     john               david\n3     john               kevin\n4    david                john\n5    david               kevin\n6    kevin                john\n7    kevin               david\n8    jason                 bob\n9    jason              robert\n10     bob               jason\n11     bob              robert\n12  robert               jason\n13  robert                 bob\n14    marc               peter\n15   peter                marc\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 33, "user_id": 2049940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbf8020c775f4c8003dc7761f7a5b545?s=128&d=identicon&r=PG", "display_name": "nbraun", "link": "https://stackoverflow.com/users/2049940/nbraun"}, "is_accepted": false, "score": 2, "last_activity_date": 1492029280, "last_edit_date": 1492029280, "creation_date": 1492028876, "answer_id": 43379053, "question_id": 43378580, "link": "https://stackoverflow.com/questions/43378580/python-interaction-between-rows-and-columns-in-dataframe/43379053#43379053", "title": "Python interaction between rows and columns in dataframe", "body": "<p>This would be a one step process in SQL, but here it's two: (1) merge the DataFrame (on exam) with itself, and (2) get rid of rows were student == student_shared (since a student doesn't share with themself)</p>\n\n<pre><code>df2 = pd.merge(\n    df, df, how='outer', on='exam', suffixes=['', '_shared_with']).drop('exam', axis=1)\ndf2 = df2.loc[df2.student != df2.student_shared_with]\n\n   student student_shared_with\n1     john               david\n2     john               kevin\n3    david                john\n5    david               kevin\n6    kevin                john\n7    kevin               david\n10     ted                 nik\n11     nik                 ted\n14   jason                 bob\n15   jason              robert\n16     bob               jason\n18     bob              robert\n19  robert               jason\n20  robert                 bob\n23    marc               peter\n24   peter                marc\n</code></pre>\n"}], "owner": {"reputation": 405, "user_id": 5564878, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/42bf732fd6b4664361bf129f53b7bfed?s=128&d=identicon&r=PG&f=1", "display_name": "Sheron", "link": "https://stackoverflow.com/users/5564878/sheron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 248, "favorite_count": 0, "accepted_answer_id": 43379046, "answer_count": 3, "score": 4, "last_activity_date": 1510460690, "creation_date": 1492027125, "last_edit_date": 1510460690, "question_id": 43378580, "link": "https://stackoverflow.com/questions/43378580/python-interaction-between-rows-and-columns-in-dataframe", "title": "Python interaction between rows and columns in dataframe", "body": "<p>I have a dataframe:</p>\n\n<pre><code>df = pd.DataFrame({\n    'exam': [\n        'French', 'English', 'German', 'Russian', 'Russian',\n        'German', 'German', 'French', 'English', 'French'\n    ],\n\n'student' : ['john', 'ted', 'jason', 'marc', 'peter', 'bob',\n            'robert', 'david', 'nik', 'kevin'\n]\n})\n\nprint (df)\n\n              exam   student   \n    0       French    john     \n    1       English   ted        \n    2       German    jason         \n    3       Russian   marc         \n    4       Russian   peter         \n    5       German    bob         \n    6       German    robert         \n    7       French    david         \n    8       English   nik          \n    9       French    kevin         \n</code></pre>\n\n<p>Does anybody know how to create a new dataframe containing two columns \"student\" and \"student shared exam with\".</p>\n\n<p>I should get something like:</p>\n\n<pre><code>                student   shared_exam_with      \n        0       john       david                   \n        1       john       kevin            \n        2       ted        nik                    \n        3       jason      bob                 \n        4       jason      robert                   \n        5       marc       peter              \n        6       peter      marc             \n        7       bob        jason                    \n        8       bob        robert                    \n        9       robert     jason                      \n       10       robert     bob                   \n       11       david      john             \n       12       david      kevin                      \n       13       nik        ted                     \n       14       kevin      john                     \n       15       kevin      david                   \n</code></pre>\n\n<p>For ex: John took French..and David and Kevin too! </p>\n\n<p>Any ideas?\nThank you in advance!</p>\n"}, {"tags": ["python"], "answers": [{"comments": [{"owner": {"reputation": 6027, "user_id": 7738328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84d6eb24cbea7d5c8d4bdab21dd3d232?s=128&d=identicon&r=PG&f=1", "display_name": "JohanL", "link": "https://stackoverflow.com/users/7738328/johanl"}, "edited": false, "score": 0, "creation_date": 1492027848, "post_id": 43378731, "comment_id": 73819625, "body": "This does not work when one or more go the elements is an integer, rather than a char, as in one of the examples."}, {"owner": {"reputation": 3241, "user_id": 781162, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/440977e8e1ca487a0979daf9c975ed3e?s=128&d=identicon&r=PG", "display_name": "Eugene K", "link": "https://stackoverflow.com/users/781162/eugene-k"}, "reply_to_user": {"reputation": 6027, "user_id": 7738328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84d6eb24cbea7d5c8d4bdab21dd3d232?s=128&d=identicon&r=PG&f=1", "display_name": "JohanL", "link": "https://stackoverflow.com/users/7738328/johanl"}, "edited": false, "score": 0, "creation_date": 1492027925, "post_id": 43378731, "comment_id": 73819674, "body": "Fixed now. 5char"}], "tags": [], "owner": {"reputation": 3241, "user_id": 781162, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/440977e8e1ca487a0979daf9c975ed3e?s=128&d=identicon&r=PG", "display_name": "Eugene K", "link": "https://stackoverflow.com/users/781162/eugene-k"}, "is_accepted": false, "score": -1, "last_activity_date": 1492027887, "last_edit_date": 1492027887, "creation_date": 1492027638, "answer_id": 43378731, "question_id": 43378561, "link": "https://stackoverflow.com/questions/43378561/how-to-create-code-for-as-below-result/43378731#43378731", "title": "how to create code for as below result?", "body": "<p>You need to str() the elements to get them all as strings, and then just join each element of the result list.</p>\n\n<pre><code>def number_of_cases(list_data):\n     from itertools import combinations_with_replacement\n     list_data = [str(data) for data in list_data]\n     mylist=list_data\n     result=list(combinations_with_replacement(mylist,2))\n     joined_result = []\n     for choice in result:\n           joined = ''.join(choice)\n           joined_result.append(joined)\n     return(joined_result)\n\ndef main():\n     result=number_of_cases(['a','b'])\n     print(result)\n</code></pre>\n\n<p>['aa', 'ab', 'bb']</p>\n"}], "owner": {"reputation": 13, "user_id": 7857478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a3hZu.jpg?s=128&g=1", "display_name": "Park Sung", "link": "https://stackoverflow.com/users/7857478/park-sung"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 97, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1492057203, "creation_date": 1492027056, "last_edit_date": 1492057203, "question_id": 43378561, "link": "https://stackoverflow.com/questions/43378561/how-to-create-code-for-as-below-result", "title": "how to create code for as below result?", "body": "<pre><code>def number_of_cases(list_data):\n    from itertools import combinations_with_replacement\n    mylist = list_data\n    result = list(combinations_with_replacement(mylist, 2))\n    return(result)\n\ndef main():\n    result = number_of_cases(['a', 'b'])\n    print(result)\n</code></pre>\n\n<p>result: </p>\n\n<pre><code>&gt;&gt;&gt; main()\n[('a', 'a'), ('a', 'b'), ('b', 'b')]\n</code></pre>\n\n<p>I don't want any space between combination... as below..\n       how to create code for as below results? </p>\n\n<pre><code>&gt;&gt;&gt; a = ['a', 'b', 'c']\n['aa', 'ab', 'ac', 'ba', 'bb', 'bc', 'ca', 'cb', 'cc']'\n\n&gt;&gt;&gt; a = ['a', 'a']\n['aa']\n\n&gt;&gt;&gt; a = [1, 2, 3, 'a']\n['11', '12', '13', '1a', '21', '22', '23', '2a', '31', '32', '33', '3a', 'a1', 'a2', 'a3', 'aa']\n</code></pre>\n"}, {"tags": ["python", "pandas", "jupyter"], "comments": [{"owner": {"reputation": 40221, "user_id": 7311767, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/13Fpq.png?s=128&g=1", "display_name": "Stephen Rauch", "link": "https://stackoverflow.com/users/7311767/stephen-rauch"}, "edited": false, "score": 0, "creation_date": 1492027267, "post_id": 43378518, "comment_id": 73819282, "body": "<a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.shift.html\" rel=\"nofollow noreferrer\">pandas.pydata.org/pandas-docs/stable/generated/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 7794283, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6bb704a8585060032449d3a850f9ef9?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/7794283/john"}, "edited": false, "score": 0, "creation_date": 1492169029, "post_id": 43378558, "comment_id": 73879861, "body": "I guess I&#39;m stuck thinking about the syntax for a function that pulls a previous value in the dataframe (without using for loops). If I wanted to multiply every column by some number I&#39;ve figured out that much. Any advice?"}, {"owner": {"reputation": 2807, "user_id": 5952674, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fe1870a153bc091b71f13069d0d5a5e8?s=128&d=identicon&r=PG&f=1", "display_name": "Kewl", "link": "https://stackoverflow.com/users/5952674/kewl"}, "reply_to_user": {"reputation": 57, "user_id": 7794283, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6bb704a8585060032449d3a850f9ef9?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/7794283/john"}, "edited": false, "score": 1, "creation_date": 1492170225, "post_id": 43378558, "comment_id": 73880423, "body": "I&#39;ve edited my answer based on what I think you might want. If this isn&#39;t what you want, if you could edit your answer with an example input and desired output, it would be very helpful."}, {"owner": {"reputation": 57, "user_id": 7794283, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6bb704a8585060032449d3a850f9ef9?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/7794283/john"}, "edited": false, "score": 0, "creation_date": 1492270600, "post_id": 43378558, "comment_id": 73913730, "body": "I have this df as an input.  <code>df= pd.DataFrame({&quot;A&quot;: [1,2,3,4], &quot;B&quot;: [1,2,3,4], &quot;C&quot;: [2,3,4,5], &quot;D&quot;: [5,5,5,5]})</code>  So as an an example I would go through each row and take the product of column C and D and then add this to the previous row&#39;s A &amp; B. This final value will be put in a new column E such that the final array looks like:  <code>df= pd.DataFrame({&quot;A&quot;: [1,2,3,4], &quot;B&quot;: [1,2,3,4], &quot;C&quot;: [2,3,4,5], &quot;D&quot;: [5,5,5,5], &quot;E&quot;: [0,15,80,225]})</code> (The first value in E is fixed as 0)  I know how to do this using a for loop but for a really large dataframe these calculations take a while."}, {"owner": {"reputation": 2807, "user_id": 5952674, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fe1870a153bc091b71f13069d0d5a5e8?s=128&d=identicon&r=PG&f=1", "display_name": "Kewl", "link": "https://stackoverflow.com/users/5952674/kewl"}, "reply_to_user": {"reputation": 57, "user_id": 7794283, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6bb704a8585060032449d3a850f9ef9?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/7794283/john"}, "edited": false, "score": 0, "creation_date": 1492280550, "post_id": 43378558, "comment_id": 73917173, "body": "I don&#39;t understand how you got the values for column E here. For <code>E[1]</code>, from your description I was guessing the value would be: <code>C[1]*D[1] + (A[0] + B[0])</code>, but it isn&#39;t."}, {"owner": {"reputation": 57, "user_id": 7794283, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6bb704a8585060032449d3a850f9ef9?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/7794283/john"}, "edited": false, "score": 0, "creation_date": 1492294947, "post_id": 43378558, "comment_id": 73921531, "body": "You&#39;re right. I meant to say <b>multiplied</b> by the previous row&#39;s A and B"}, {"owner": {"reputation": 57, "user_id": 7794283, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6bb704a8585060032449d3a850f9ef9?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/7794283/john"}, "edited": false, "score": 0, "creation_date": 1492370586, "post_id": 43378558, "comment_id": 73939163, "body": "Thank you! This is exactly what I needed. I had no idea that shift existed."}, {"owner": {"reputation": 2807, "user_id": 5952674, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fe1870a153bc091b71f13069d0d5a5e8?s=128&d=identicon&r=PG&f=1", "display_name": "Kewl", "link": "https://stackoverflow.com/users/5952674/kewl"}, "reply_to_user": {"reputation": 57, "user_id": 7794283, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6bb704a8585060032449d3a850f9ef9?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/7794283/john"}, "edited": false, "score": 0, "creation_date": 1492428746, "post_id": 43378558, "comment_id": 73956736, "body": "Make sure to accept the answer (by clicking the checkmark next to it) if it answers your question"}], "tags": [], "owner": {"reputation": 2807, "user_id": 5952674, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fe1870a153bc091b71f13069d0d5a5e8?s=128&d=identicon&r=PG&f=1", "display_name": "Kewl", "link": "https://stackoverflow.com/users/5952674/kewl"}, "is_accepted": true, "score": 0, "last_activity_date": 1492339655, "last_edit_date": 1592644375, "creation_date": 1492027038, "answer_id": 43378558, "question_id": 43378518, "link": "https://stackoverflow.com/questions/43378518/apply-function-in-a-pandas-dataframe/43378558#43378558", "title": "Apply function in a pandas dataframe", "body": "<p>For the case you mention (multiplying the two previous cells), you can do the following (which loops through each column, but not each cell):</p>\n<pre><code>import pandas as pd\n\na = pd.DataFrame({0:[1,2,3,4,5],1:[2,3,4,5,6],2:0,3:0})\n\nfor i in range(2,len(a)):\n    a[i] = a[i-1]*a[i-2]\n</code></pre>\n<p>This will make each column in <code>a</code> the previous two columns multiplied together</p>\n<p>If you want to perform this operation going down rows instead of columns, you can just <code>transpose</code> the dataframe (and then transpose it again after performing the loop to get it back in the original format)</p>\n<h1>EDIT</h1>\n<p>What's actually wanted is the product of the elements in the previous rows of two columns and the current rows of two columns. This can be accomplished using shift:</p>\n<pre><code>import pandas as pd\n\ndf= pd.DataFrame({&quot;A&quot;: [1,2,3,4], &quot;B&quot;: [1,2,3,4], &quot;C&quot;: [2,3,4,5], &quot;D&quot;: [5,5,5,5]})\n\ndf['E'] = df['A'].shift(1)*df['B'].shift(1)*df['C']*df['D']\n\ndf['E']\n</code></pre>\n<p>Produces:</p>\n<pre><code>0      NaN\n1     15.0\n2     80.0\n3    225.0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 24193, "user_id": 5811078, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NlknE.png?s=128&g=1", "display_name": "zipa", "link": "https://stackoverflow.com/users/5811078/zipa"}, "is_accepted": false, "score": 0, "last_activity_date": 1492170540, "creation_date": 1492170540, "answer_id": 43410926, "question_id": 43378518, "link": "https://stackoverflow.com/questions/43378518/apply-function-in-a-pandas-dataframe/43410926#43410926", "title": "Apply function in a pandas dataframe", "body": "<p>This does the trick, and shift can go both forward and backward depending on your need:</p>\n\n<pre><code>df['Column'] = df['Column'].shift(1) * df['Column'].shift(2)\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 7794283, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6bb704a8585060032449d3a850f9ef9?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/7794283/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 315, "favorite_count": 0, "accepted_answer_id": 43378558, "answer_count": 2, "score": 0, "last_activity_date": 1492339655, "creation_date": 1492026878, "last_edit_date": 1492170333, "question_id": 43378518, "link": "https://stackoverflow.com/questions/43378518/apply-function-in-a-pandas-dataframe", "title": "Apply function in a pandas dataframe", "body": "<p>I've figured out how apply a function to an entire column or subsection of a pandas dataframe in lieu of writing a loop that modifies each cell one by one.</p>\n\n<p>Is it possible to write a function that takes cells within the dataframe as inputs when doing the above?</p>\n\n<p>Eg. A function that in the current cell returns the product of the previous cell's value multiplied by the cell before that previous cell. I'm doing this line by line now in a loop and it is unsurprisingly very inefficient. I'm quite new to python.</p>\n"}, {"tags": ["python", "unit-testing", "mocking"], "comments": [{"owner": {"reputation": 71, "user_id": 7698157, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pbUIFB4w59E/AAAAAAAAAAI/AAAAAAAAAhE/EkSIA6uGqH8/photo.jpg?sz=128", "display_name": "Max Shepherd", "link": "https://stackoverflow.com/users/7698157/max-shepherd"}, "edited": false, "score": 0, "creation_date": 1492032681, "post_id": 43378500, "comment_id": 73822041, "body": "The expectation that you have in your test is wrong. You only have one Mock object so when you assert the calls, you need all the calls made to that Mock object. That&#39;s what the error message is telling you - that your expected list of call&#39;s doesn&#39;t match your actual list of calls. For example, your expected list of calls doesn&#39;t have the initial <code>call(None,None,None,None)</code> in it."}, {"owner": {"reputation": 1021, "user_id": 5687992, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/79f0bf6f138c5dd39529c77ea7f3d701?s=128&d=identicon&r=PG&f=1", "display_name": "jencoston", "link": "https://stackoverflow.com/users/5687992/jencoston"}, "reply_to_user": {"reputation": 71, "user_id": 7698157, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pbUIFB4w59E/AAAAAAAAAAI/AAAAAAAAAhE/EkSIA6uGqH8/photo.jpg?sz=128", "display_name": "Max Shepherd", "link": "https://stackoverflow.com/users/7698157/max-shepherd"}, "edited": false, "score": 0, "creation_date": 1492087112, "post_id": 43378500, "comment_id": 73845953, "body": "@MaxShepherd I tried changing the expected to calls to mock.call(None, None, None, None).start() to the beginning of the expected call list and alternatively changing the expected calls to mock.call(None, None, None, None).send_message(...) but I get the same Assertion Error for both. Were you suggesting I change something else?"}], "answers": [{"tags": [], "owner": {"reputation": 1021, "user_id": 5687992, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/79f0bf6f138c5dd39529c77ea7f3d701?s=128&d=identicon&r=PG&f=1", "display_name": "jencoston", "link": "https://stackoverflow.com/users/5687992/jencoston"}, "is_accepted": true, "score": 1, "last_activity_date": 1492095097, "creation_date": 1492095097, "answer_id": 43395478, "question_id": 43378500, "link": "https://stackoverflow.com/questions/43378500/pythons-assert-has-calls-throws-assertionerror-that-calls-were-not-found/43395478#43395478", "title": "Python&#39;s assert_has_calls throws AssertionError that calls were not found", "body": "<p>So it turns out that since I was calling the producer object that I was creating in the class I was testing the mocks were being recorded under a second mocked object. I'm getting two of them: one mock_producer in the test class and a second mocked producer called myproducer (the name I used in my class I'm testing). </p>\n\n<pre><code>@mock.patch('mypackage.mycoordinator.producer.Producer') # This creates the first mocked object\n@mock.patch('mypackage.mycoordinator.consumer.Consumer')\ndef test_send_data(self, mock_consumer, mock_producer):\n</code></pre>\n\n<hr>\n\n<pre><code>class MyCoordinator():\n\ndef __init__(self):\n    # Initialize the producer\n    self.myproducer = producer.Producer(...) # This creates a second mocked object called myproducer\n\n# Send the data to the producer\ndef send_data(self, data_to_send, key):\n    self.myproducer.send_message(data_to_send, key)\n</code></pre>\n\n<p>So if I change the statements to refer to the second mocked producer instead, my test passes. For example:</p>\n\n<pre><code>assert coor.myproducer.send_message.called is True\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>assert mock_producer.called is True\n</code></pre>\n"}], "owner": {"reputation": 1021, "user_id": 5687992, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/79f0bf6f138c5dd39529c77ea7f3d701?s=128&d=identicon&r=PG&f=1", "display_name": "jencoston", "link": "https://stackoverflow.com/users/5687992/jencoston"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5209, "favorite_count": 0, "accepted_answer_id": 43395478, "answer_count": 1, "score": 2, "last_activity_date": 1492095097, "creation_date": 1492026831, "last_edit_date": 1492088555, "question_id": 43378500, "link": "https://stackoverflow.com/questions/43378500/pythons-assert-has-calls-throws-assertionerror-that-calls-were-not-found", "title": "Python&#39;s assert_has_calls throws AssertionError that calls were not found", "body": "<p>I am trying to write a unit test that tests my coordinator class' function for sending data to a producer that I have mocked. I went a little crazy adding print statements to see what is going on where, and I'm not sure if that is useful but I'm going to include those. The actual mocking seems to be working from looking at the print statements, however my assert_has_calls throws an Assertion Error that calls were not found.  What did I do wrong?</p>\n\n<p>I am using Python 2.7.10 and Mock 2.0.0</p>\n\n<p>Here is my test:</p>\n\n<pre><code>@mock.patch('mypackage.producer.Producer', autospec=True)\ndef test_send_data(self, mock_producer):\n    coor = mypackage.MyCoordinator()\n    # Make sure we initialized the mocked producer with no values\n    mock_producer.assert_called_with(None, None, None, None)\n\n    # Create some data and send it to the producer\n    for count in range(11):\n        jsonToSend = {\"objectID\": 'test{}'.format(count)}\n        coor.send_data(jsonToSend, None)\n        print 'Sent message %s' % (jsonToSend) \n\n    # Verify the producer was called\n    assert mock_producer.called is True\n\n    print '\\nMethod Calls:'\n    print mock_producer.method_calls\n    print '\\nCall Args List:'\n    print mock_producer.call_args_list\n    print mock_producer.send_message.call_args_list\n    print '\\nAll Calls:'\n    print mock_producer.mock_calls\n\n    calls = [\n        mock.call().start(),\n        mock.call().send_message({\"objectID\": \"test1\"}, None),\n        mock.call().send_message({\"objectID\": \"test2\"}, None),\n        mock.call().send_message({\"objectID\": \"test3\"}, None)]\n\n    # Verify that the mocks have been called correctly\n    mock_producer.assert_has_calls(calls)\n</code></pre>\n\n<p>Here is the output:</p>\n\n<pre><code>Sent message {'objectID': 'test0'}\nSent message {'objectID': 'test1'}\nSent message {'objectID': 'test2'}\nSent message {'objectID': 'test3'}\nSent message {'objectID': 'test4'}\nSent message {'objectID': 'test5'}\nSent message {'objectID': 'test6'}\nSent message {'objectID': 'test7'}\nSent message {'objectID': 'test8'}\nSent message {'objectID': 'test9'}\nSent message {'objectID': 'test10'}\n\nMethod Calls:\n[call().start(),\n call().send_message({'objectID': 'test0'}, None),\n call().send_message({'objectID': 'test1'}, None),\n call().send_message({'objectID': 'test2'}, None),\n call().send_message({'objectID': 'test3'}, None),\n call().send_message({'objectID': 'test4'}, None),\n call().send_message({'objectID': 'test5'}, None),\n call().send_message({'objectID': 'test6'}, None),\n call().send_message({'objectID': 'test7'}, None),\n call().send_message({'objectID': 'test8'}, None),\n call().send_message({'objectID': 'test9'}, None),\n call().send_message({'objectID': 'test10'}, None)]\n\nCall Args List:\n[call(None, None, None, None)]\n[]\n\nAll Calls:\n[call(None, None, None, None),\n call().start(),\n call().send_message({'objectID': 'test0'}, None),\n call().send_message({'objectID': 'test1'}, None),\n call().send_message({'objectID': 'test2'}, None),\n call().send_message({'objectID': 'test3'}, None),\n call().send_message({'objectID': 'test4'}, None),\n call().send_message({'objectID': 'test5'}, None),\n call().send_message({'objectID': 'test6'}, None),\n call().send_message({'objectID': 'test7'}, None),\n call().send_message({'objectID': 'test8'}, None),\n call().send_message({'objectID': 'test9'}, None),\n call().send_message({'objectID': 'test10'}, None)]\n======================================================================\nFAIL: test_send_data (kafka_api_test.KafkaApiTest)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"C:\\Anaconda2\\lib\\site-packages\\mock\\mock.py\", line 1305, in patched\n    return func(*args, **keywargs)\n  File \"C:/Users/myuser/workspace/MyProject/tests/my_test.py\", line 76, in test_send_data\n    mock_producer.assert_has_calls(calls)\n  File \"C:\\Anaconda2\\lib\\site-packages\\mock\\mock.py\", line 969, in assert_has_calls\n    ), cause)\n  File \"C:\\Anaconda2\\lib\\site-packages\\six.py\", line 718, in raise_from\n    raise value\nAssertionError: Calls not found.\nExpected: [call().start(),\n call().send_message({'objectID': 'test1'}, None),\n call().send_message({'objectID': 'test2'}, None),\n call().send_message({'objectID': 'test3'}, None)]\nActual: [call(None, None, None, None),\n call().start(),\n call().send_message({'objectID': 'test0'}, None),\n call().send_message({'objectID': 'test1'}, None),\n call().send_message({'objectID': 'test2'}, None),\n call().send_message({'objectID': 'test3'}, None),\n call().send_message({'objectID': 'test4'}, None),\n call().send_message({'objectID': 'test5'}, None),\n call().send_message({'objectID': 'test6'}, None),\n call().send_message({'objectID': 'test7'}, None),\n call().send_message({'objectID': 'test8'}, None),\n call().send_message({'objectID': 'test9'}, None),\n call().send_message({'objectID': 'test10'}, None)]\n</code></pre>\n\n<p><strong>EDIT:</strong></p>\n\n<p>Just to see what happens I also tried changing the assert statement to <code>mock_producer.assert_has_calls(mock_producer.mock_calls)</code> but that fails with the error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"C:\\Anaconda2\\lib\\site-packages\\mock\\mock.py\", line 1305, in patched\n    return func(*args, **keywargs)\n  File \"C:/Users/myuser/workspace/MyProject/tests/my_test.py\", line 73, in test_send_data\n    mock_producer.assert_has_calls(mock_producer.mock_calls)\n  File \"C:\\Anaconda2\\lib\\site-packages\\mock\\mock.py\", line 969, in assert_has_calls\n    ), cause)\n  File \"C:\\Anaconda2\\lib\\site-packages\\six.py\", line 718, in raise_from\n    raise value\nAssertionError: Calls not found.\nExpected: [call(None, None, None, None),\n call().start(),\n call().send_message({'objectID': 'test0'}, None),\n call().send_message({'objectID': 'test1'}, None),\n call().send_message({'objectID': 'test2'}, None),\n call().send_message({'objectID': 'test3'}, None),\n call().send_message({'objectID': 'test4'}, None),\n call().send_message({'objectID': 'test5'}, None),\n call().send_message({'objectID': 'test6'}, None),\n call().send_message({'objectID': 'test7'}, None),\n call().send_message({'objectID': 'test8'}, None),\n call().send_message({'objectID': 'test9'}, None),\n call().send_message({'objectID': 'test10'}, None),\n call().send_message({'objectID': 'test11'}, 'done')]\nActual: [call(None, None, None, None),\n call().start(),\n call().send_message({'objectID': 'test0'}, None),\n call().send_message({'objectID': 'test1'}, None),\n call().send_message({'objectID': 'test2'}, None),\n call().send_message({'objectID': 'test3'}, None),\n call().send_message({'objectID': 'test4'}, None),\n call().send_message({'objectID': 'test5'}, None),\n call().send_message({'objectID': 'test6'}, None),\n call().send_message({'objectID': 'test7'}, None),\n call().send_message({'objectID': 'test8'}, None),\n call().send_message({'objectID': 'test9'}, None),\n call().send_message({'objectID': 'test10'}, None),\n call().send_message({'objectID': 'test11'}, 'done')]\n</code></pre>\n\n<p>Based on the mock documentation, I would think that that should have succeeded since assert_has_calls compares the expected values with those in the mock_calls list. Is that logic incorrect?</p>\n"}, {"tags": ["python", "numpy", "bit-manipulation"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1492026937, "post_id": 43378475, "comment_id": 73819095, "body": "This is far too straightforward to end up in the bit twiddling hacks list: <code>(x &lt;&lt; 1) | (x &amp; 1)</code>."}, {"owner": {"reputation": 789, "user_id": 6441345, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f6281029cf43a71fa044b0ee3adbfe43?s=128&d=identicon&r=PG&f=1", "display_name": "Marco", "link": "https://stackoverflow.com/users/6441345/marco"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1492026988, "post_id": 43378475, "comment_id": 73819124, "body": "@user2357112 this only works when position = 0. Any bit can be duplicated."}, {"owner": {"reputation": 990, "user_id": 4217085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e707345996a53035a3f745308f38b454?s=128&d=identicon&r=PG&f=1", "display_name": "sgrg", "link": "https://stackoverflow.com/users/4217085/sgrg"}, "edited": false, "score": 0, "creation_date": 1492027537, "post_id": 43378475, "comment_id": 73819424, "body": "Do you want to duplicate the same bit position in every integer? Or will the bit you want to duplicate vary?"}, {"owner": {"reputation": 789, "user_id": 6441345, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f6281029cf43a71fa044b0ee3adbfe43?s=128&d=identicon&r=PG&f=1", "display_name": "Marco", "link": "https://stackoverflow.com/users/6441345/marco"}, "reply_to_user": {"reputation": 990, "user_id": 4217085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e707345996a53035a3f745308f38b454?s=128&d=identicon&r=PG&f=1", "display_name": "sgrg", "link": "https://stackoverflow.com/users/4217085/sgrg"}, "edited": false, "score": 0, "creation_date": 1492027560, "post_id": 43378475, "comment_id": 73819441, "body": "@sgrg It&#39;s the same position in every integer"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1492027675, "post_id": 43378475, "comment_id": 73819520, "body": "Still too straightforward: <code>part1 = x &amp; -(1 &lt;&lt; pos); part2 = x &amp; ((1 &lt;&lt; (pos+1))-1); return (part1 &lt;&lt; 1) | part2;</code>. Select two pieces of the integer overlapping at the duplicated bit, and paste those pieces together without overlapping."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1492027785, "post_id": 43378475, "comment_id": 73819584, "body": "For reducing temporaries, you&#39;d use the usual combination of common subexpression elimination, in-place operators, and ufuncs with <code>out</code> parameters."}], "answers": [{"tags": [], "owner": {"reputation": 16538, "user_id": 6770384, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kXCNG.png?s=128&g=1", "display_name": "Socowi", "link": "https://stackoverflow.com/users/6770384/socowi"}, "is_accepted": true, "score": 1, "last_activity_date": 1492109009, "last_edit_date": 1492109009, "creation_date": 1492108656, "answer_id": 43399482, "question_id": 43378475, "link": "https://stackoverflow.com/questions/43378475/duplicate-bits-in-a-big-numpy-array/43399482#43399482", "title": "Duplicate bits in a big numpy array", "body": "<h3>Implementation</h3>\n\n<p>The naive way already seems pretty efficient to me:</p>\n\n<pre><code>mask = -1 &lt;&lt; (pos + 1)\n(x &lt;&lt; 1) &amp; mask | x &amp; ~mask\n</code></pre>\n\n<h3>Benchmark</h3>\n\n<p>I ran the code as follows:</p>\n\n<pre><code>import numpy as np\nimport time\n\narray = np.arange(2 ** 27, dtype=np.uint64)\npos = 5\n\nt = time.process_time()\nmask = np.uint64(-1 &lt;&lt; (pos + 1))\narray = (array &lt;&lt; 1) &amp; mask | array &amp; ~mask\nprint(time.process_time() - t)\n</code></pre>\n\n<p>The bit duplication took 0.95 seconds (average of several runs).\nDue to memory issues, I used only 2<sup>27</sup> entries. But we can expect the time for 2<sup>32</sup> entries to be 2<sup>32-27</sup>&nbsp;\u00d7&nbsp;0.95&nbsp;<em>s</em> = 2<sup>5</sup>&nbsp;\u00d7&nbsp;0.95&nbsp;<em>s</em> = 32&nbsp;\u00d7&nbsp;0.96&nbsp;<em>s</em> = 30.4&nbsp;<em>s</em>.</p>\n"}], "owner": {"reputation": 789, "user_id": 6441345, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f6281029cf43a71fa044b0ee3adbfe43?s=128&d=identicon&r=PG&f=1", "display_name": "Marco", "link": "https://stackoverflow.com/users/6441345/marco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 0, "accepted_answer_id": 43399482, "answer_count": 1, "score": 1, "last_activity_date": 1492109009, "creation_date": 1492026786, "last_edit_date": 1492027070, "question_id": 43378475, "link": "https://stackoverflow.com/questions/43378475/duplicate-bits-in-a-big-numpy-array", "title": "Duplicate bits in a big numpy array", "body": "<p>I have a big numpy array (i.e. approx. 2 ** 32 positions) of 64-bit unsigned integers and I want to duplicate a single bit (can vary from 0 to 63) in every integer inside this array.</p>\n\n<hr>\n\n<p>Example:</p>\n\n<ul>\n<li>Input array: <code>array([ 0,  5,  2,  7 ])</code></li>\n<li>Position (right to left) to duplicate: <code>0</code></li>\n</ul>\n\n<p>The input, in binary, is</p>\n\n<pre>000  101  010  111</pre>\n\n<p>After the operation, I want the bits as</p>\n\n<pre>00<b>00</b> 10<b>11</b> 01<b>00</b> 11<b>11</b></pre>\n\n<ul>\n<li>Result: <code>array([ 0,  11,  4,  15 ])</code></li>\n</ul>\n\n<hr>\n\n<p>As stated, my arrays are huge, so I'd prefer to use the lowest number of temporary / auxiliar arrays.</p>\n\n<p>I tried to find something close to it in Google or even <a href=\"https://graphics.stanford.edu/~seander/bithacks.html\" rel=\"nofollow noreferrer\">Bit Twiddling Hacks</a> with no luck.</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 10158, "user_id": 1209921, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZxrGg.gif?s=128&g=1", "display_name": "Matthias", "link": "https://stackoverflow.com/users/1209921/matthias"}, "edited": false, "score": 4, "creation_date": 1492026715, "post_id": 43378378, "comment_id": 73818968, "body": "Try to print <code>i</code> and <code>y</code> in the loop and see for yourself."}, {"owner": {"reputation": 30387, "user_id": 6260170, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0caf9a0d28be362618ffc0223b301d6e?s=128&d=identicon&r=PG&f=1", "display_name": "Chris_Rands", "link": "https://stackoverflow.com/users/6260170/chris-rands"}, "edited": false, "score": 1, "creation_date": 1492026807, "post_id": 43378378, "comment_id": 73819012, "body": "<code>i</code> (each character of <code>text</code>) is added <i>in front</i> of <code>y</code> (every previous character of <code>text</code> already seen)"}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 2, "creation_date": 1492026818, "post_id": 43378378, "comment_id": 73819020, "body": "Try using e.g. <a href=\"http://pythontutor.com/\" rel=\"nofollow noreferrer\">pythontutor.com</a> (or just a piece of paper and a pen), and step through it to see what happens."}, {"owner": {"reputation": 16785, "user_id": 3355476, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YdMWy.jpg?s=128&g=1", "display_name": "Codor", "link": "https://stackoverflow.com/users/3355476/codor"}, "edited": false, "score": 1, "creation_date": 1492026984, "post_id": 43378378, "comment_id": 73819118, "body": "I find the downvotes surprising. Although the question might be considered <i>easy</i> by a journeyman developer or interested student, there might be a reason for this question being asked. It satisfies the criteria for a valid question in terms of self-containment, verifiability, an actual question being asked instead of just presenting a fuzzy problem, et cetera."}, {"owner": {"reputation": 10158, "user_id": 1209921, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZxrGg.gif?s=128&g=1", "display_name": "Matthias", "link": "https://stackoverflow.com/users/1209921/matthias"}, "reply_to_user": {"reputation": 16785, "user_id": 3355476, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YdMWy.jpg?s=128&g=1", "display_name": "Codor", "link": "https://stackoverflow.com/users/3355476/codor"}, "edited": false, "score": 3, "creation_date": 1492027447, "post_id": 43378378, "comment_id": 73819373, "body": "@Codor: I didn&#39;t downvote, but I don&#39;t see any research effort (and that&#39;s a legitimate reason for a downvote). Maybe the OP should have explained where he failed when he tried to track the flow of the program."}, {"owner": {"reputation": 16785, "user_id": 3355476, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YdMWy.jpg?s=128&g=1", "display_name": "Codor", "link": "https://stackoverflow.com/users/3355476/codor"}, "reply_to_user": {"reputation": 10158, "user_id": 1209921, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZxrGg.gif?s=128&g=1", "display_name": "Matthias", "link": "https://stackoverflow.com/users/1209921/matthias"}, "edited": false, "score": 0, "creation_date": 1492027953, "post_id": 43378378, "comment_id": 73819693, "body": "@Matthias I partly agree with you; my point was more that the question might be asked in the best way possible, assuming a relatively low experience of the user in the particular subject and programming in general. Although being relatively easy to answer given a rough understanding of the language features themselves (which I admittedly don&#39;t really have myself), the question (involving a piece of code which seems artificial, indicating participation in some learning process) differs from other &#39;low-quality&#39; questions in the &#39;gimme teh code fix plz&#39; style."}], "answers": [{"tags": [], "owner": {"reputation": 16785, "user_id": 3355476, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YdMWy.jpg?s=128&g=1", "display_name": "Codor", "link": "https://stackoverflow.com/users/3355476/codor"}, "is_accepted": false, "score": 1, "last_activity_date": 1492026767, "creation_date": 1492026767, "answer_id": 43378468, "question_id": 43378378, "link": "https://stackoverflow.com/questions/43378378/how-does-this-function-work-reverse-string/43378468#43378468", "title": "how does this function work? (reverse string)", "body": "<p>Although I don't actually know Python in particular, apparently the reversal works by iterating over the individual characters of the input in a forwardly fashion. Before, a result variable <code>y</code> is initialized. During the iteration, the individual characters are inserted at the <em>beginning</em> of the result variable, which means that the first characters comes to be be positioned at the end and the last character is appended at the beginning of the result variable. Finally, the result variable is returned.</p>\n"}, {"tags": [], "owner": {"reputation": 1041, "user_id": 304093, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/a1ba8ce5996f63dea3afd9d57d4fdea5?s=128&d=identicon&r=PG", "display_name": "polo", "link": "https://stackoverflow.com/users/304093/polo"}, "is_accepted": false, "score": 0, "last_activity_date": 1492026829, "creation_date": 1492026829, "answer_id": 43378497, "question_id": 43378378, "link": "https://stackoverflow.com/questions/43378378/how-does-this-function-work-reverse-string/43378497#43378497", "title": "how does this function work? (reverse string)", "body": "<p>y starts as an empty string. Then you iterate over the characters of text from left to right, and add each character as the suffix of y. In other words, you iterate over text from left to right, and add it to y from right to left </p>\n"}], "owner": {"reputation": 17, "user_id": 7728821, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-HZJLGhbFo1k/AAAAAAAAAAI/AAAAAAAAAAs/uRuyGZcYkLY/photo.jpg?sz=128", "display_name": "saminkhan1", "link": "https://stackoverflow.com/users/7728821/saminkhan1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1492026829, "creation_date": 1492026463, "last_edit_date": 1492026672, "question_id": 43378378, "link": "https://stackoverflow.com/questions/43378378/how-does-this-function-work-reverse-string", "title": "how does this function work? (reverse string)", "body": "<pre><code>def reverse(text):\n    y = \"\"\n    for i in text:\n        y = i + y\n    return y\n</code></pre>\n\n<p>How does this function return the reverse string of the input?\nI can't seem to grasp the concept.</p>\n"}, {"tags": ["python", "pyqt", "scrapy"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1492027765, "post_id": 43378361, "comment_id": 73819568, "body": "How can you install the following libraries: <code>lost, lost_second</code>?"}, {"owner": {"reputation": 161, "user_id": 7366334, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/eda81db94d6b68072e186b3be9855e93?s=128&d=identicon&r=PG&f=1", "display_name": "Lord G.", "link": "https://stackoverflow.com/users/7366334/lord-g"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1492029864, "post_id": 43378361, "comment_id": 73820774, "body": "I got lost.py and lost_second.py with scrapy classes, which being used"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1492030014, "post_id": 43378361, "comment_id": 73820847, "body": "read this:[How to create a Minimal, Complete, and Verifiable example] <a href=\"https://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1492030157, "post_id": 43378361, "comment_id": 73820908, "body": "Your code can not be tested ... create a minimal example to reproduce the error."}, {"owner": {"reputation": 161, "user_id": 7366334, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/eda81db94d6b68072e186b3be9855e93?s=128&d=identicon&r=PG&f=1", "display_name": "Lord G.", "link": "https://stackoverflow.com/users/7366334/lord-g"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1492121145, "post_id": 43378361, "comment_id": 73865386, "body": "My apologies. My code have been edited. Thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 161, "user_id": 7366334, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/eda81db94d6b68072e186b3be9855e93?s=128&d=identicon&r=PG&f=1", "display_name": "Lord G.", "link": "https://stackoverflow.com/users/7366334/lord-g"}, "is_accepted": true, "score": 0, "last_activity_date": 1492376391, "creation_date": 1492376391, "answer_id": 43442088, "question_id": 43378361, "link": "https://stackoverflow.com/questions/43378361/scraping-with-pyqt-interface/43442088#43442088", "title": "Scraping with pyqt interface", "body": "<p>Ok, the solution for my problem is to use threading. My code below:</p>\n\n<pre><code>import lost_second\nimport sys\nimport json\nimport time \nimport threading\nfrom PyQt4 import QtCore, QtGui\nfrom scrapy.crawler import CrawlerRunner\nfrom twisted.internet import reactor, defer\nfrom scrapy.utils.log import configure_logging\n\n\n##Qtreactor ? Threads?\nclass CrawlerThread(threading.Thread):\n    def __init__(self):\n        super(CrawlerThread, self).__init__()\n\n\n    def stop(self):\n        try:\n             reactor.stop()\n        except:\n            pass\n    def run(self):\n        configure_logging({'LOG_LEVEL': 'DEBUG'})\n        crun = CrawlerRunner()#get_project_settings?\n        crun.crawl(lost_second.MySpider2)\n        reactor.run(installSignalHandlers=False)\n\n\nclass Form(QtGui.QDialog):\n\n\n    def __init__(self, parent=None):\n        super(Form, self).__init__(parent)\n        w =QtGui.QWidget()\n        w.resize(250, 150)\n        w.move(300, 300)\n        self.ct = CrawlerThread()\n        self.ct.start()\n\nif __name__ == \"__main__\":\n    app = QtGui.QApplication(sys.argv)\n    form = Form()\n    form.show()\n\n\n    sys.exit(app.exec_())\n</code></pre>\n"}], "owner": {"reputation": 161, "user_id": 7366334, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/eda81db94d6b68072e186b3be9855e93?s=128&d=identicon&r=PG&f=1", "display_name": "Lord G.", "link": "https://stackoverflow.com/users/7366334/lord-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 373, "favorite_count": 0, "accepted_answer_id": 43442088, "answer_count": 1, "score": -1, "last_activity_date": 1492376391, "creation_date": 1492026393, "last_edit_date": 1492121058, "question_id": 43378361, "link": "https://stackoverflow.com/questions/43378361/scraping-with-pyqt-interface", "title": "Scraping with pyqt interface", "body": "<p>I'm trying to run scrapy spider with a pyqt interface. However, as soon pyqt starts running - scrapy freezes. I can't even get a proper error, it just spits out first few lines of scrapy.\nP.s spider runs perfectly on it own</p>\n\n<pre><code>import lost_second\nimport sys\nimport json\nimport time \nfrom PyQt4 import QtCore, QtGui\nfrom twisted.internet import reactor, defer\nfrom scrapy.crawler import CrawlerRunner\nfrom scrapy.utils.project import get_project_settings\nfrom scrapy.utils.log import configure_logging\n\n\nclass Form(QtGui.QDialog):\n\n\n    def __init__(self, parent=None):\n        super(Form, self).__init__(parent)\n        w =QtGui.QWidget()\n        w.resize(250, 150)\n        w.move(300, 300)\n        self.MyFunction()\n\n\n\n    def Parse_me(self,spidername):\n        self.spidername = spidername\n        configure_logging({'LOG_LEVEL': 'DEBUG'})\n        runner = CrawlerRunner(get_project_settings())\n\n        d = runner.crawl(self.spidername)\n        d.addBoth(lambda _: reactor.stop())\n        reactor.run\n\n\n    def MyFunction(self):\n            self.Parse_me(lost_second.MySpider2)\n\nif __name__ == \"__main__\":\n    app = QtGui.QApplication(sys.argv)\n    form = Form()\n    form.show()\n\n    sys.exit(app.exec_())\n</code></pre>\n\n<p>lost_second spider's code:</p>\n\n<pre><code>import scrapy\nimport re\nimport json\nfrom scrapy.http import Request\n\n\n\nclass MySpider2(scrapy.Spider):\n    name = \"lost2\"\n    allowed_domains = [\"myurl\"]\n\n\n    def start_requests(self):\n        self.video_link = {}\n        self.finalone = {}\n\n        with open('list.json', 'r') as z:\n            self.links = json.load(z)\n\n        for name in self.links:\n            self.video_link[name] ='myurl'+ self.links[name]['link']+'/video'\n            request = Request(self.video_link[name],\n                              callback = self.video_scrape_parse)\n            request.meta['Movie_name'] = name\n            yield request\n\n        json.dump(self.finalone, open('video_links.json', 'w'))\n\n\n\n    def video_scrape_parse(self,response):\n        print('Response url :' + response.url)\n        response_name = response.meta['Movie_name']\n        print('Response meta name:' + response_name) \n        movie_links = re.findall(r'anotherurl(.*?)mp4', response.body)\n        self.x = []\n        for item in range(len(movie_links)):\n            self.x.append('anotherurl'+str(movie_links[item])+'mp4')\n        self.finalone[response_name] =self.x     \n        print('Final response response_name:' + response_name)\n</code></pre>\n\n<p>Scrapy logs:</p>\n\n<pre><code>2017-04-12 20:38:07 [scrapy.middleware] INFO: Enabled extensions:\n['scrapy.extensions.logstats.LogStats',\n 'scrapy.extensions.telnet.TelnetConsole',\n 'scrapy.extensions.corestats.CoreStats']\n2017-04-12 20:38:07 [scrapy.middleware] INFO: Enabled downloader    middlewares:\n['scrapy.downloadermiddlewares.httpauth.HttpAuthMiddleware',\n 'scrapy.downloadermiddlewares.downloadtimeout.DownloadTimeoutMiddleware',\n 'scrapy.downloadermiddlewares.defaultheaders.DefaultHeadersMiddleware',\n 'scrapy.downloadermiddlewares.useragent.UserAgentMiddleware',\n 'scrapy.downloadermiddlewares.retry.RetryMiddleware',\n 'scrapy.downloadermiddlewares.redirect.MetaRefreshMiddleware',\n 'scrapy.downloadermiddlewares.redirect.RedirectMiddleware',\n 'scrapy.downloadermiddlewares.cookies.CookiesMiddleware',\n 'scrapy_splash.SplashCookiesMiddleware',\n 'scrapy_splash.SplashMiddleware',\n 'scrapy.downloadermiddlewares.httpcompression.HttpCompressionMiddleware',\n 'scrapy.downloadermiddlewares.stats.DownloaderStats']\n2017-04-12 20:38:07 [scrapy.middleware] INFO: Enabled spider middlewares:\n['scrapy.spidermiddlewares.httperror.HttpErrorMiddleware',\n 'scrapy_splash.SplashDeduplicateArgsMiddleware',\n 'scrapy.spidermiddlewares.offsite.OffsiteMiddleware',\n 'scrapy.spidermiddlewares.referer.RefererMiddleware',\n 'scrapy.spidermiddlewares.urllength.UrlLengthMiddleware',\n 'scrapy.spidermiddlewares.depth.DepthMiddleware']\n2017-04-12 20:38:07 [scrapy.middleware] INFO: Enabled item pipelines:\n[]\n2017-04-12 20:38:07 [scrapy.core.engine] INFO: Spider opened\n2017-04-12 20:38:07 [scrapy.extensions.logstats] INFO: Crawled 0 pages    (at 0 pages/min), scraped 0 items (at 0 items/min)\n2017-04-12 20:38:07 [scrapy.extensions.telnet] DEBUG: Telnet console   listening on 127.0.0.1:6023\n2017-04-12 20:38:07 [scrapy.middleware] INFO: Enabled extensions:\n['scrapy.extensions.logstats.LogStats',\n 'scrapy.extensions.telnet.TelnetConsole',\n 'scrapy.extensions.corestats.CoreStats']\n2017-04-12 20:38:07 [scrapy.middleware] INFO: Enabled extensions:\n['scrapy.extensions.logstats.LogStats',\n 'scrapy.extensions.telnet.TelnetConsole',\n 'scrapy.extensions.corestats.CoreStats']\n2017-04-12 20:38:07 [scrapy.middleware] INFO: Enabled downloader  middlewares:\n['scrapy.downloadermiddlewares.httpauth.HttpAuthMiddleware',\n 'scrapy.downloadermiddlewares.downloadtimeout.DownloadTimeoutMiddleware',\n 'scrapy.downloadermiddlewares.defaultheaders.DefaultHeadersMiddleware',\n 'scrapy.downloadermiddlewares.useragent.UserAgentMiddleware',\n 'scrapy.downloadermiddlewares.retry.RetryMiddleware',\n 'scrapy.downloadermiddlewares.redirect.MetaRefreshMiddleware',\n 'scrapy.downloadermiddlewares.redirect.RedirectMiddleware',\n 'scrapy.downloadermiddlewares.cookies.CookiesMiddleware',\n 'scrapy_splash.SplashCookiesMiddleware',\n 'scrapy_splash.SplashMiddleware',\n 'scrapy.downloadermiddlewares.httpcompression.HttpCompressionMiddleware',\n 'scrapy.downloadermiddlewares.stats.DownloaderStats']\n 2017-04-12 20:38:07 [scrapy.middleware] INFO: Enabled downloader middlewares:\n['scrapy.downloadermiddlewares.httpauth.HttpAuthMiddleware',\n 'scrapy.downloadermiddlewares.downloadtimeout.DownloadTimeoutMiddleware',\n 'scrapy.downloadermiddlewares.defaultheaders.DefaultHeadersMiddleware',\n 'scrapy.downloadermiddlewares.useragent.UserAgentMiddleware',\n 'scrapy.downloadermiddlewares.retry.RetryMiddleware',\n 'scrapy.downloadermiddlewares.redirect.MetaRefreshMiddleware',\n 'scrapy.downloadermiddlewares.redirect.RedirectMiddleware',\n 'scrapy.downloadermiddlewares.cookies.CookiesMiddleware',\n 'scrapy_splash.SplashCookiesMiddleware',\n 'scrapy_splash.SplashMiddleware',\n 'scrapy.downloadermiddlewares.httpcompression.HttpCompressionMiddleware',\n 'scrapy.downloadermiddlewares.stats.DownloaderStats']\n2017-04-12 20:38:07 [scrapy.middleware] INFO: Enabled spider middlewares:\n['scrapy.spidermiddlewares.httperror.HttpErrorMiddleware',\n 'scrapy_splash.SplashDeduplicateArgsMiddleware',\n 'scrapy.spidermiddlewares.offsite.OffsiteMiddleware',\n 'scrapy.spidermiddlewares.referer.RefererMiddleware',\n 'scrapy.spidermiddlewares.urllength.UrlLengthMiddleware',\n 'scrapy.spidermiddlewares.depth.DepthMiddleware']\n2017-04-12 20:38:07 [scrapy.middleware] INFO: Enabled spider middlewares:\n['scrapy.spidermiddlewares.httperror.HttpErrorMiddleware',\n 'scrapy_splash.SplashDeduplicateArgsMiddleware',\n 'scrapy.spidermiddlewares.offsite.OffsiteMiddleware',\n 'scrapy.spidermiddlewares.referer.RefererMiddleware',\n 'scrapy.spidermiddlewares.urllength.UrlLengthMiddleware',\n 'scrapy.spidermiddlewares.depth.DepthMiddleware']\n2017-04-12 20:38:07 [scrapy.middleware] INFO: Enabled item pipelines:\n[]\n2017-04-12 20:38:07 [scrapy.middleware] INFO: Enabled item pipelines:\n[]\n2017-04-12 20:38:07 [scrapy.core.engine] INFO: Spider opened\n2017-04-12 20:38:07 [scrapy.core.engine] INFO: Spider opened\n2017-04-12 20:38:07 [scrapy.extensions.logstats] INFO: Crawled 0 pages   (at 0 pages/min), scraped 0 items (at 0 items/min)\n2017-04-12 20:38:07 [scrapy.extensions.logstats] INFO: Crawled 0 pages    (at 0 pages/min), scraped 0 items (at 0 items/min)\n2017-04-12 20:38:07 [scrapy.extensions.telnet] DEBUG: Telnet console   listening on 127.0.0.1:6024\n2017-04-12 20:38:07 [scrapy.extensions.telnet] DEBUG: Telnet console  listening on 127.0.0.1:6024\n</code></pre>\n"}]