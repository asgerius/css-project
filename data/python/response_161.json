[{"tags": ["python", "python-3.x", "macos", "locked-files"], "answers": [{"comments": [{"owner": {"reputation": 5170, "user_id": 9200529, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LgIT2.jpg?s=128&g=1", "display_name": "Nathan V\u0113rzemnieks", "link": "https://stackoverflow.com/users/9200529/nathan-v%c4%93rzemnieks"}, "reply_to_user": {"reputation": 926, "user_id": 4411080, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/6bd11dec034ead7b3dba3c7263306b49?s=128&d=identicon&r=PG&f=1", "display_name": "ProGrammer", "link": "https://stackoverflow.com/users/4411080/programmer"}, "edited": false, "score": 0, "creation_date": 1518107233, "post_id": 48677789, "comment_id": 84378541, "body": "I suppose it&#39;s possible you&#39;re getting a different exception? What exception do you see when trying to remove the files?"}, {"owner": {"reputation": 926, "user_id": 4411080, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/6bd11dec034ead7b3dba3c7263306b49?s=128&d=identicon&r=PG&f=1", "display_name": "ProGrammer", "link": "https://stackoverflow.com/users/4411080/programmer"}, "edited": false, "score": 0, "creation_date": 1518125403, "post_id": 48677789, "comment_id": 84388783, "body": "The exception <code>&quot;[Errno 66] Directory not empty: &#39;&#47;path&#47;to&#47;folder&quot;</code> is thrown (in the last <code>if</code>) my test directory is still set up the way I mentioned it above with a locked file and the folder on the same level, and a locked file inside the folder. Being recursive, I expect the file in the folder to unlock, deeming the folder empty (as the file extension is in the list), hence deleting the folder, going up a level to the starting directory and unlocking then deleting the other locked file - essentially leaving nothing behind. Yet, none of the files unlock, its as though nothing happened."}, {"owner": {"reputation": 5170, "user_id": 9200529, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LgIT2.jpg?s=128&g=1", "display_name": "Nathan V\u0113rzemnieks", "link": "https://stackoverflow.com/users/9200529/nathan-v%c4%93rzemnieks"}, "reply_to_user": {"reputation": 926, "user_id": 4411080, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/6bd11dec034ead7b3dba3c7263306b49?s=128&d=identicon&r=PG&f=1", "display_name": "ProGrammer", "link": "https://stackoverflow.com/users/4411080/programmer"}, "edited": false, "score": 0, "creation_date": 1518131364, "post_id": 48677789, "comment_id": 84391245, "body": "I think you must be missing some exceptions somewhere. The <code>finally: return True</code> you&#39;re doing is pretty weird: it&#39;s basically saying that a file was removed when it wasn&#39;t. And it suppresses any exceptions that happen. This makes it awfully hard to debug! I&#39;d suggest getting rid of that, in fact, getting rid of all your <code>try:</code>/<code>except:</code> handling except for the unlocking. This should help you find the root problem."}, {"owner": {"reputation": 926, "user_id": 4411080, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/6bd11dec034ead7b3dba3c7263306b49?s=128&d=identicon&r=PG&f=1", "display_name": "ProGrammer", "link": "https://stackoverflow.com/users/4411080/programmer"}, "edited": false, "score": 0, "creation_date": 1518133317, "post_id": 48677789, "comment_id": 84391921, "body": "Just added what the code looks like now. Throws <code>[Errno 1] Operation not permitted: &#47;path&#47;to&#47;image.png</code> on the locked image and breaks. Does the fact that the server that hosts this directory is on a Windows share have anything to do with it? I am lost here because it works from Terminal using: <code>chflags -R nouchg &#47;PATH&#47;TO&#47;DIRECTORY&#47;WITH&#47;LOCKED&#47;FILES&#47;</code> which unlocks all at once. Could you look at the edit I made. If all else fails, is there a way to translate this into the code so that it just unlocks all before the main part of the script starts, then by the time it ends, none are looked?"}, {"owner": {"reputation": 5170, "user_id": 9200529, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LgIT2.jpg?s=128&g=1", "display_name": "Nathan V\u0113rzemnieks", "link": "https://stackoverflow.com/users/9200529/nathan-v%c4%93rzemnieks"}, "reply_to_user": {"reputation": 926, "user_id": 4411080, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/6bd11dec034ead7b3dba3c7263306b49?s=128&d=identicon&r=PG&f=1", "display_name": "ProGrammer", "link": "https://stackoverflow.com/users/4411080/programmer"}, "edited": false, "score": 0, "creation_date": 1518133860, "post_id": 48677789, "comment_id": 84392076, "body": "You certainly could do that <code>-R</code> when you do <code>chflags</code> at the beginning. As it stands, it sounds like you&#39;re getting an <code>IOError</code> rather than the <code>PermissionError</code> I got? You could just try replacing <code>PermissionError</code> with <code>IOError</code> in the <code>except PermissionError:</code> part."}, {"owner": {"reputation": 5170, "user_id": 9200529, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LgIT2.jpg?s=128&g=1", "display_name": "Nathan V\u0113rzemnieks", "link": "https://stackoverflow.com/users/9200529/nathan-v%c4%93rzemnieks"}, "reply_to_user": {"reputation": 926, "user_id": 4411080, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/6bd11dec034ead7b3dba3c7263306b49?s=128&d=identicon&r=PG&f=1", "display_name": "ProGrammer", "link": "https://stackoverflow.com/users/4411080/programmer"}, "edited": false, "score": 0, "creation_date": 1518133893, "post_id": 48677789, "comment_id": 84392087, "body": "And, for future reference - the fact that you&#39;re operating on a network share is pretty significant here. Do include details like that in future questions :)"}], "tags": [], "owner": {"reputation": 5170, "user_id": 9200529, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LgIT2.jpg?s=128&g=1", "display_name": "Nathan V\u0113rzemnieks", "link": "https://stackoverflow.com/users/9200529/nathan-v%c4%93rzemnieks"}, "is_accepted": true, "score": 2, "last_activity_date": 1518065540, "creation_date": 1518065540, "answer_id": 48677789, "question_id": 48675286, "link": "https://stackoverflow.com/questions/48675286/how-do-i-unlock-locked-files-and-folders-mac-with-python/48677789#48677789", "title": "How do I unlock locked files and folders (mac) with Python", "body": "<p>You can unlock the file with the <code>chflags</code> command:</p>\n\n<pre><code>os.system('chflags nouchg {}'.format(filename))\n</code></pre>\n\n<p>(There is a function <code>os.chflags</code>, but the flag associated with the locked status is not a regular one, but what the <a href=\"https://docs.python.org/3/library/os.html#os.stat_result\" rel=\"nofollow noreferrer\"><code>os</code> module documentation</a> calls a \"user-defined\" flag, as you can see by looking at <code>os.stat(locked_filename).st_flags</code>.)</p>\n\n<p>To solve your problem I'd add the <code>chflags</code> command above to a specific <code>except:</code> for the error you get trying to remove a locked file, along with a platform check:</p>\n\n<pre><code>try:\n    os.remove(currentPath)\n    print('REMOVED: \\\"{removed}\\\"'.format(removed = currentPath))\nexcept PermissionError:\n    if sys.platform == 'darwin':\n        os.system('chflags nouchg {}'.format(currentPath))\n        os.remove(currentPath)\n    else:\n        raise\nexcept BaseException as e:\n    ...\n</code></pre>\n"}], "owner": {"reputation": 926, "user_id": 4411080, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/6bd11dec034ead7b3dba3c7263306b49?s=128&d=identicon&r=PG&f=1", "display_name": "ProGrammer", "link": "https://stackoverflow.com/users/4411080/programmer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2375, "favorite_count": 0, "accepted_answer_id": 48677789, "answer_count": 1, "score": 5, "last_activity_date": 1519346348, "creation_date": 1518047714, "last_edit_date": 1519346348, "question_id": 48675286, "link": "https://stackoverflow.com/questions/48675286/how-do-i-unlock-locked-files-and-folders-mac-with-python", "title": "How do I unlock locked files and folders (mac) with Python", "body": "<p>As a \"clean up\" after my script's main purpose is complete, a function is called to recursively look through each folder and remove all files that end in a pre-determined set of extensions.</p>\n\n<p>I during my testing, I discovered that some files with a file extension in the list of ones to delete actually throw an error: <code>[Errno 1] Operation not permitted: '/location/of/locked/file.png</code>. Looking at the file itself, it appears to be <em>Locked</em> (on mac).</p>\n\n<ol>\n<li><strong>How would I go about removing the locked attribute (should it exist) from every file/folder using Python, then delete the file if it ends in the extension?</strong><br>\nPreferably this can all be done in the same function below, as it takes a long time to traverse the input directory - handling each only once is the way to go.</li>\n<li><strong>How does this affect the script's integrity on Windows?</strong><br>\nI have taken care of programming it in a way that makes it compatible between the OSs but (to my knowledge) the <em>locked</em> attribute does not exist on Windows the way it does on mac and could cause unknown side-effects.</li>\n</ol>\n\n<hr>\n\n<pre><code>REMOVE_FILETYPES = ('.png', '.jpg', '.jpeg', '.pdf')\n\ndef cleaner(currentPath):\n  if not os.path.isdir(currentPath):\n    if currentPath.endswith(REMOVE_FILETYPES) or os.path.basename(currentPath).startswith('.'):\n      try:\n        os.remove(currentPath)\n        print('REMOVED: \\\"{removed}\\\"'.format(removed = currentPath))\n      except BaseException as e:\n        print('ERROR: Could not remove: \\\"{failed}\\\"'.format(failed = str(e)))\n      finally:\n        return True\n    return False\n\n  if all([cleaner(os.path.join(currentPath, file)) for file in os.listdir(currentPath)]):\n    try:\n      os.rmdir(currentPath)\n      print('REMOVED: \\\"{removed}\\\"'.format(removed = currentPath))\n    except:\n      print('ERROR: Could not remove: \\\"{failed}\\\"'.format(failed = currentPath))\n    finally:\n      return True\n  return False\n\ncleaner(r'/path/to/parent/dir')\n</code></pre>\n\n<p>I would really appreciate if somebody could show me how to integrate such functionality into the sub-routine. Cheers.</p>\n\n<hr>\n\n<p><strong>EDIT:</strong> Removed error handling as per request </p>\n\n<pre><code>def cleaner(currentPath):\nif sys.platform == 'darwin':\n    os.system('chflags nouchg {}'.format(currentPath))\nif not os.path.isdir(currentPath):\n    if currentPath.endswith(REMOVE_FILETYPES) or os.path.basename(currentPath).startswith('.'):\n        try:\n            os.remove(currentPath)\n            print('REMOVED: \\\"{removed}\\\"'.format(removed=currentPath))\n        except PermissionError:\n            if sys.platform == 'darwin':\n                os.system('chflags nouchg {}'.format(currentPath))\n                os.remove(currentPath)\nif all([cleaner(os.path.join(currentPath, file)) for file in os.listdir(currentPath)]) and not currentPath == SOURCE_DIR:\n    os.rmdir(currentPath)\n    print('REMOVED: \\\"{removed}\\\"'.format(removed=currentPath))\n</code></pre>\n"}, {"tags": ["python", "regex", "match"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1518047876, "post_id": 48675282, "comment_id": 84349102, "body": "The pattern only matches 99 characters, the rest is not part of the match."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 4, "creation_date": 1518047909, "post_id": 48675282, "comment_id": 84349111, "body": "Why do you limit it to <code>{2,99}</code> if you want a longer match?"}, {"owner": {"reputation": 2034, "user_id": 3462494, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/04866335d3ecd0c431de6a36af444c9f?s=128&d=identicon&r=PG&f=1", "display_name": "jouell", "link": "https://stackoverflow.com/users/3462494/jouell"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1518048486, "post_id": 48675282, "comment_id": 84349270, "body": "thanks. I edited my posted. Even with 9999 I don&#39;t see the full end to the &#39;g&#39;"}], "answers": [{"comments": [{"owner": {"reputation": 2034, "user_id": 3462494, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/04866335d3ecd0c431de6a36af444c9f?s=128&d=identicon&r=PG&f=1", "display_name": "jouell", "link": "https://stackoverflow.com/users/3462494/jouell"}, "edited": false, "score": 0, "creation_date": 1518048503, "post_id": 48675337, "comment_id": 84349278, "body": "Thanks. But, no I am not."}], "tags": [], "owner": {"reputation": 2077, "user_id": 3009636, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/04e0f94443ae5d17f977cb09ccde315b?s=128&d=identicon&r=PG&f=1", "display_name": "quant", "link": "https://stackoverflow.com/users/3009636/quant"}, "is_accepted": false, "score": 0, "last_activity_date": 1518048161, "creation_date": 1518048161, "answer_id": 48675337, "question_id": 48675282, "link": "https://stackoverflow.com/questions/48675282/pythons-match-line-in-sre-sre-match-output-can-it-show-the-full-match/48675337#48675337", "title": "Python&#39;s &#39;match&#39; line in _sre.SRE_Match output? Can it show the full match?", "body": "<p>You are probably looking for the .group ...</p>\n\n<pre><code>import re\nblah = \"ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffg\"\npat = re.compile(\"([a-z]{2,99})\")\ndata = re.search(pat,blah)\nif data:\n    data.group(0) # returns 'fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff'\nelse:\n    pass # do something when the string was not found!\n</code></pre>\n\n<p>See:\n<a href=\"https://docs.python.org/3.5/library/re.html#re.match.group\" rel=\"nofollow noreferrer\">https://docs.python.org/3.5/library/re.html#re.match.group</a></p>\n\n<p>and</p>\n\n<p><a href=\"https://stackoverflow.com/questions/7312020/why-wont-re-groups-give-me-anything-for-my-one-correctly-matched-group#7312049\">Why won&#39;t re.groups() give me anything for my one correctly-matched group?</a></p>\n"}, {"tags": [], "owner": {"reputation": 1827, "user_id": 3603682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbb5ce7320940f2b86daafd800c0949c?s=128&d=identicon&r=PG&f=1", "display_name": "machnic", "link": "https://stackoverflow.com/users/3603682/machnic"}, "is_accepted": false, "score": 1, "last_activity_date": 1518049219, "creation_date": 1518049219, "answer_id": 48675495, "question_id": 48675282, "link": "https://stackoverflow.com/questions/48675282/pythons-match-line-in-sre-sre-match-output-can-it-show-the-full-match/48675495#48675495", "title": "Python&#39;s &#39;match&#39; line in _sre.SRE_Match output? Can it show the full match?", "body": "<p>With this one you don't constrain yourself with any upper limit of repetitions:    </p>\n\n<pre><code>import re\n\nblah = \"ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffg\"\n\nr = re.compile(r'[a-z](.)\\1{2,}') # no upper limit\ntry:\n    re.search(r, blah).group()\nexcept AttributeError:\n    pass  # whatever you want to do when there is no match\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2034, "user_id": 3462494, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/04866335d3ecd0c431de6a36af444c9f?s=128&d=identicon&r=PG&f=1", "display_name": "jouell", "link": "https://stackoverflow.com/users/3462494/jouell"}, "edited": false, "score": 0, "creation_date": 1518053787, "post_id": 48675588, "comment_id": 84350655, "body": "Thank you. No is the answer, then. I am unconcerned with group methods."}], "tags": [], "owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "is_accepted": true, "score": 1, "last_activity_date": 1518050077, "last_edit_date": 1518050077, "creation_date": 1518049774, "answer_id": 48675588, "question_id": 48675282, "link": "https://stackoverflow.com/questions/48675282/pythons-match-line-in-sre-sre-match-output-can-it-show-the-full-match/48675588#48675588", "title": "Python&#39;s &#39;match&#39; line in _sre.SRE_Match output? Can it show the full match?", "body": "<p>No, it is not possible. That length is hard coded in the format string in the match object's <code>repr</code> method and is not designed to capture the full length of the matched string.</p>\n\n<p>Except you compile your own build of CPython (or whatever Python flavour you're at) with the precision of the representation of the <code>match</code> object in <a href=\"https://github.com/python/cpython/blob/fbb490fd2f38bd817d99c20c05121ad0168a38ee/Modules/_sre.c#L2321\" rel=\"nofollow noreferrer\"><code>match_repr</code></a> modified. Default precision is 50:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>result = PyUnicode_FromFormat(\n        \"&lt;%s object; span=(%d, %d), match=%.50R&gt;\",\n        Py_TYPE(self)-&gt;tp_name,\n        self-&gt;mark[0], self-&gt;mark[1], group0);\n</code></pre>\n\n<p>As others have suggested, simply use the <a href=\"https://docs.python.org/3.5/library/re.html#re.match.group\" rel=\"nofollow noreferrer\"><code>group</code></a> method of the match object to access the full matching string(s).</p>\n"}], "owner": {"reputation": 2034, "user_id": 3462494, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/04866335d3ecd0c431de6a36af444c9f?s=128&d=identicon&r=PG&f=1", "display_name": "jouell", "link": "https://stackoverflow.com/users/3462494/jouell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1272, "favorite_count": 0, "accepted_answer_id": 48675588, "answer_count": 3, "score": 0, "last_activity_date": 1518051398, "creation_date": 1518047696, "last_edit_date": 1518051398, "question_id": 48675282, "link": "https://stackoverflow.com/questions/48675282/pythons-match-line-in-sre-sre-match-output-can-it-show-the-full-match", "title": "Python&#39;s &#39;match&#39; line in _sre.SRE_Match output? Can it show the full match?", "body": "<p>Using python 3:</p>\n\n<pre><code>In [275]: blah = \"ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffg\"\n\nIn [276]: pat = re.compile(\"([a-z]{2,9999})\")\n\nIn [277]: data = re.search(pat,blah)\n\nIn [278]: data\nOut[278]: &lt;_sre.SRE_Match object; span=(0, 125), match='fffffffffffffffffffffffffffffffffffffffffffffffff&gt;\n</code></pre>\n\n<p>Is it possible for <code>match=''</code> to print out the whole string? i.e all the way to the final <code>'g'</code>?</p>\n"}, {"tags": ["python", "mysql", "insert", "stock-data"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1518048190, "post_id": 48675275, "comment_id": 84349191, "body": "I originally thought you went down the pitfall of using string formatting for your queries, then realised I didn&#39;t understand what <code>query = query.format(&#39;,&#39;.split(&#39;%s&#39; * len(data)))</code> did. It doesn&#39;t seem to do anything on testing. You then define <code>cursor = connection.cursor()</code> a second time. You also use <code>cursor.commit()</code> but I think it should be <code>connection.commit()</code>."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1518048433, "post_id": 48675275, "comment_id": 84349257, "body": "After <code>data = next(reader)</code>, do <code>print(data)</code>. What do you get? Also, your error could be due to blank lines. It&#39;s not possible to tell from your question."}, {"owner": {"reputation": 57, "user_id": 9155987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93a9c7cd85d9bc25fd8f51bbb9c604ad?s=128&d=identicon&r=PG&f=1", "display_name": "Mattytripps", "link": "https://stackoverflow.com/users/9155987/mattytripps"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1518051825, "post_id": 48675275, "comment_id": 84350189, "body": "print(data) after data = next(reader) did not return anything. i just got the same error message again"}, {"owner": {"reputation": 57, "user_id": 9155987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93a9c7cd85d9bc25fd8f51bbb9c604ad?s=128&d=identicon&r=PG&f=1", "display_name": "Mattytripps", "link": "https://stackoverflow.com/users/9155987/mattytripps"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1518051873, "post_id": 48675275, "comment_id": 84350209, "body": "i changed the cursor.commit to connection.commit() and i still got the same error message."}, {"owner": {"reputation": 30756, "user_id": 5389997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d227900a17ca5c34bad6d2b27122c7f?s=128&d=identicon&r=PG&f=1", "display_name": "Shadow", "link": "https://stackoverflow.com/users/5389997/shadow"}, "edited": false, "score": 0, "creation_date": 1518055333, "post_id": 48675275, "comment_id": 84351022, "body": "Well, check out the date in the given row."}, {"owner": {"reputation": 57, "user_id": 9155987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93a9c7cd85d9bc25fd8f51bbb9c604ad?s=128&d=identicon&r=PG&f=1", "display_name": "Mattytripps", "link": "https://stackoverflow.com/users/9155987/mattytripps"}, "edited": false, "score": 0, "creation_date": 1518065525, "post_id": 48675275, "comment_id": 84353348, "body": "I will check out the date tommorow. Thank you"}, {"owner": {"reputation": 57, "user_id": 9155987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93a9c7cd85d9bc25fd8f51bbb9c604ad?s=128&d=identicon&r=PG&f=1", "display_name": "Mattytripps", "link": "https://stackoverflow.com/users/9155987/mattytripps"}, "edited": false, "score": 0, "creation_date": 1518065644, "post_id": 48675275, "comment_id": 84353374, "body": "This is just a hunch. But im wondering if python is not putting quotes around the date and maybe that is why it is getting rejected. Im very new to python and mysql. I put this code together from another forumn. Do you know how i could get quotes around the date?"}, {"owner": {"reputation": 105038, "user_id": 1766831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee974306d2def46eb69534fbcf95cc5?s=128&d=identicon&r=PG", "display_name": "Rick James", "link": "https://stackoverflow.com/users/1766831/rick-james"}, "edited": false, "score": 0, "creation_date": 1538283291, "post_id": 48675275, "comment_id": 92085304, "body": "Only 4 digits to left of decimal??"}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 9155987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93a9c7cd85d9bc25fd8f51bbb9c604ad?s=128&d=identicon&r=PG&f=1", "display_name": "Mattytripps", "link": "https://stackoverflow.com/users/9155987/mattytripps"}, "edited": false, "score": 0, "creation_date": 1518127935, "post_id": 48686478, "comment_id": 84389964, "body": "I tried changing the query = line to each of the following: query = &#39;insert into TEST values (STR_TO_DATE(%s),%s,%s,%s,%s, %s, %s)&#39;  then i tried: query = &#39;insert into TEST values ((STR_TO_DATE(%s)),%s,%s,%s,%s, %s, %s)&#39; but still no dice. Any ideas? Im so new to python that im not much of a help to myself yet. I keep getting this error message  &quot;InternalError: (1582, &quot;Incorrect parameter count in the call to native function &#39;STR_TO_DATE&#39;&quot;)&quot;"}, {"owner": {"reputation": 1, "user_id": 7226167, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ce04a2f8098d494d680e678bb989a9b?s=128&d=identicon&r=PG&f=1", "display_name": "Kien.N", "link": "https://stackoverflow.com/users/7226167/kien-n"}, "reply_to_user": {"reputation": 57, "user_id": 9155987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93a9c7cd85d9bc25fd8f51bbb9c604ad?s=128&d=identicon&r=PG&f=1", "display_name": "Mattytripps", "link": "https://stackoverflow.com/users/9155987/mattytripps"}, "edited": false, "score": 0, "creation_date": 1518175187, "post_id": 48686478, "comment_id": 84407630, "body": "Try with this: &quot;insert into TEST values (STR_TO_DATE(%s, &#39;%Y-%m-%d&#39;),%s,%s,%s,%s, %s, %s)&quot; It should specify the format of date string in &quot;STR_TO_DATE&quot; function."}, {"owner": {"reputation": 57, "user_id": 9155987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93a9c7cd85d9bc25fd8f51bbb9c604ad?s=128&d=identicon&r=PG&f=1", "display_name": "Mattytripps", "link": "https://stackoverflow.com/users/9155987/mattytripps"}, "edited": false, "score": 0, "creation_date": 1518220104, "post_id": 48686478, "comment_id": 84430655, "body": "reader = csv.reader(f)      data = next(reader)      query = &quot;insert into TEST values((datetime.datetime.striptime((%s),%s,%s,%s,%s, %s, %s)&quot;      query = query.format(&#39;,&#39;.split(&#39;%s&#39; * len(data)))      cursor = connection.cursor()      cursor.execute(query, data)      for data in reader:         cursor.execute(query, data)      cursor.commit()"}, {"owner": {"reputation": 57, "user_id": 9155987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93a9c7cd85d9bc25fd8f51bbb9c604ad?s=128&d=identicon&r=PG&f=1", "display_name": "Mattytripps", "link": "https://stackoverflow.com/users/9155987/mattytripps"}, "edited": false, "score": 0, "creation_date": 1518220271, "post_id": 48686478, "comment_id": 84430697, "body": "thank you for all the help that you are giving me. Python was giving me issues with the Y character so I messed around with the code and took a big step forward with the code in the above comment. But now im getting this error message: &quot;(1064, &quot;You have an error in your SQL syntax;... check for for the right syntax to use near &#39;((&#39;Date&#39;),&#39;Open&#39;,&#39;High&#39;,&#39;Low&#39;,&#39;Close&#39;, &#39;Adj Close&#39;, &#39;Volume&#39;)&#39; at line 1&quot;)"}, {"owner": {"reputation": 57, "user_id": 9155987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93a9c7cd85d9bc25fd8f51bbb9c604ad?s=128&d=identicon&r=PG&f=1", "display_name": "Mattytripps", "link": "https://stackoverflow.com/users/9155987/mattytripps"}, "edited": false, "score": 0, "creation_date": 1518220376, "post_id": 48686478, "comment_id": 84430726, "body": "to me, it is obvious that the error is the way that python is formatting the date and the numbers that are to be inserted into the mysql table. Python is probably leaving quotes off the date or adding quotes to the numbers and it is messing the insert statement up. I think at this point i have to figure out how to format the output in the way the mysql wants it"}, {"owner": {"reputation": 57, "user_id": 9155987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93a9c7cd85d9bc25fd8f51bbb9c604ad?s=128&d=identicon&r=PG&f=1", "display_name": "Mattytripps", "link": "https://stackoverflow.com/users/9155987/mattytripps"}, "edited": false, "score": 0, "creation_date": 1518220878, "post_id": 48686478, "comment_id": 84430864, "body": "something else that is odd, is all i get for output is that error message that i posted. I have tried printing data and query with print(query) or data. I have put the print message in several different spots throughout the program both in the loop and out. i have even tried print(&#39;bla bla bla&#39;) and even this resulted in the same error message."}, {"owner": {"reputation": 1, "user_id": 7226167, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ce04a2f8098d494d680e678bb989a9b?s=128&d=identicon&r=PG&f=1", "display_name": "Kien.N", "link": "https://stackoverflow.com/users/7226167/kien-n"}, "reply_to_user": {"reputation": 57, "user_id": 9155987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93a9c7cd85d9bc25fd8f51bbb9c604ad?s=128&d=identicon&r=PG&f=1", "display_name": "Mattytripps", "link": "https://stackoverflow.com/users/9155987/mattytripps"}, "edited": false, "score": 0, "creation_date": 1518425357, "post_id": 48686478, "comment_id": 84484630, "body": "Hello, when I saw your query, it look like you convert all the data to date time &quot;((datetime.datetime.striptime((%s),%s,%s,%s,%s, %s, %s)&quot;. So, it is absolutely wrong because only first parameter is Date type. When I created the same format of your table and insert the date time type, it works properly with STR_TO_DATE(%s, &#39;%Y-%m-%d&#39;). With other columns, you can try to switch data type by read the text file and convert to float, interger and change the insert query to STR_TO_DATE(%s, &#39;%Y-%m-%d&#39;),%f,%f,%f,%f, %f, %d). The problem is only the data type, you can try to see with type() of python."}], "tags": [], "owner": {"reputation": 1, "user_id": 7226167, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ce04a2f8098d494d680e678bb989a9b?s=128&d=identicon&r=PG&f=1", "display_name": "Kien.N", "link": "https://stackoverflow.com/users/7226167/kien-n"}, "is_accepted": false, "score": -1, "last_activity_date": 1518096055, "creation_date": 1518096055, "answer_id": 48686478, "question_id": 48675275, "link": "https://stackoverflow.com/questions/48675275/inserting-data-into-mysql-database-with-python/48686478#48686478", "title": "inserting data into mysql database with python", "body": "<p>When you write the query to insert date time in Python, you should use convert operation in MySQL. In your case:\nquery = 'insert into TEST values (%s,%s,%s,%s,%s, %s, %s)'\n=> 'insert into TEST values (STR_TO_DATE(%s),%s,%s,%s,%s, %s, %s)'\nAnd make sure that there are no duplicate in \"date\" field.</p>\n"}], "owner": {"reputation": 57, "user_id": 9155987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93a9c7cd85d9bc25fd8f51bbb9c604ad?s=128&d=identicon&r=PG&f=1", "display_name": "Mattytripps", "link": "https://stackoverflow.com/users/9155987/mattytripps"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 570, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1538283211, "creation_date": 1518047624, "last_edit_date": 1538283211, "question_id": 48675275, "link": "https://stackoverflow.com/questions/48675275/inserting-data-into-mysql-database-with-python", "title": "inserting data into mysql database with python", "body": "<p>I am trying to insert stock market csv data that I downloaded from Yahoo finance into a mysql table named 'TEST' that is in\na database named 'stocks' but I am getting an error code from python: </p>\n\n<blockquote>\n  <p>InternalError: (1292, \"incorrect date value: 'Date for column 'date at \n    row 1\")</p>\n</blockquote>\n\n<p>the data that I am trying to insert has hundreads of rows that look something like this:</p>\n\n<pre><code>1995-03-31,0.141150,0.141150,0.141150,0.141150,0.105375,10000\n</code></pre>\n\n<p>the table that i am trying to insert this data into contains the following columns:</p>\n\n<pre><code>date DATE NOT NULL PRIMARY KEY,\nopen DECIMAL(10,6),\nhigh DECIMAL(10,6),\nlow DECIMAL(10,6),\nclose DECIMAL(10,6),\nadj_close DECIMAL(10,6),\nvolume INT,\n</code></pre>\n\n<p>this is the python code that i have used to insert the data into the table </p>\n\n<pre><code>with open('/home/matt/Desktop/python_projects/csv_files/CH8_SG.csv', \n'r') as f:\n     reader = csv.reader(f)\n     data = next(reader)\n     query = 'insert into TEST values (%s,%s,%s,%s,%s, %s, %s)'\n     query = query.format(','.split('%s' * len(data)))\n     cursor = connection.cursor()\n     cursor.execute(query, data)\n     for data in reader:\n        cursor.execute(query, data)\n     cursor.commit()\n</code></pre>\n\n<p>when i run the code pictured above I get the following error</p>\n\n<blockquote>\n  <p>InternalError: (1292, \"incorrect date value: 'Date for column 'date at row 1\")</p>\n</blockquote>\n\n<p>I really think that I am close but I do not know what is going on with that error.\nCan anyone help me?</p>\n"}, {"tags": ["python", "ftp", "ftplib"], "answers": [{"tags": [], "owner": {"reputation": 144837, "user_id": 850848, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c287735beca76400cb9b6d08bf591cb9?s=128&d=identicon&r=PG", "display_name": "Martin Prikryl", "link": "https://stackoverflow.com/users/850848/martin-prikryl"}, "is_accepted": false, "score": 0, "last_activity_date": 1518505595, "creation_date": 1518505595, "answer_id": 48761226, "question_id": 48675264, "link": "https://stackoverflow.com/questions/48675264/finding-a-file-in-an-ftp-server-using-ftplib/48761226#48761226", "title": "Finding a file in an FTP server using ftplib", "body": "<p>No. Using <code>FTP.retrlines('LIST')</code> is the only solution with FTP protocol.</p>\n\n<hr>\n\n<p>If you need a faster approach, you would have to use another interface. Like shell, some web API, etc.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9232663"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 176, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1518505595, "creation_date": 1518047516, "question_id": 48675264, "link": "https://stackoverflow.com/questions/48675264/finding-a-file-in-an-ftp-server-using-ftplib", "title": "Finding a file in an FTP server using ftplib", "body": "<p>I was wondering if there was an effective way to recursively search for a given filename using <code>ftplib</code>. I know that I could use <code>FTP.cwd()</code> and <code>FTP.retrlines('LIST)</code>, but I think that it would be rather repetitive and inefficient. Is there something that lets me find files on an FTP server in Python, such as how <code>os</code> can do <code>os.path.walk()</code>?</p>\n"}, {"tags": ["python", "python-3.x"], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 9330327, "user_type": "registered", "profile_image": "https://graph.facebook.com/1584008088342651/picture?type=large", "display_name": "Lucy Kim", "link": "https://stackoverflow.com/users/9330327/lucy-kim"}, "edited": false, "score": 0, "creation_date": 1518048897, "post_id": 48675387, "comment_id": 84349385, "body": "Thank you for your comment. It is very useful to me. :)"}], "tags": [], "owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "is_accepted": true, "score": 4, "last_activity_date": 1518048502, "creation_date": 1518048502, "answer_id": 48675387, "question_id": 48675259, "link": "https://stackoverflow.com/questions/48675259/python-file-read-and-save/48675387#48675387", "title": "Python file read and save", "body": "<pre><code>fp.open(\"test.txt\", \"a\")\n</code></pre>\n\n<p>At this point in your program, <code>fp</code> doesn't exist yet.  Perhaps you meant <code>fp = open(...)</code> instead?</p>\n\n<p>You're only closing the file if the user chose not to continue, but you're opening it every time through the loop.  You should open and close it only once, or open <em>and</em> close it every time through the loop.</p>\n\n<pre><code>fp.write(name+\",\"+\"age\"+\"\\n\")\n</code></pre>\n\n<p>This writes the literal word <code>age</code> instead of the age variable.  You probably wanted this instead: <code>fp.write(name + \",\" + age + \"\\n\")</code></p>\n\n<p>Try this for your input loop:</p>\n\n<pre><code>with open(\"test.txt\", \"r\") as fp:\n    for line in fp:\n        data = line.split(\",\")\n        name = data[0]\n        age = data[1]\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 9330327, "user_type": "registered", "profile_image": "https://graph.facebook.com/1584008088342651/picture?type=large", "display_name": "Lucy Kim", "link": "https://stackoverflow.com/users/9330327/lucy-kim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 48675387, "answer_count": 1, "score": 1, "last_activity_date": 1518065526, "creation_date": 1518047486, "last_edit_date": 1518065526, "question_id": 48675259, "link": "https://stackoverflow.com/questions/48675259/python-file-read-and-save", "title": "Python file read and save", "body": "<p>I used Python 3.6 version and now I want to save name &amp; age at the file and then read the text as name + tab + age but I can't approach file read side.</p>\n\n<p>My code:</p>\n\n<pre><code>while True:\n    print(\"-------------\")\n    name=input(\"Name: \")\n    age=input (\"Age: \")\n    contInput=input(\"Continue Input? (y/n) \")\n    fp.open(\"test.txt\", \"a\")\n    fp.write(name+\",\"+age+\"\\n\")\n    if contInput==\"n\":\n        fp.close()\n        break\n    else:\n        continue\nwith open(\"test.txt\", \"r\") as fp:\n    rd = fp.read().split('\\n')\n    ????\nfp.close()\n</code></pre>\n\n<p>so I just confuse about file read. I want to print my saved data like below.</p>\n\n<p>name [tab] age</p>\n\n<p>but after used split method, rd type is list. \nCan I divide name &amp; age as each items?</p>\n"}, {"tags": ["python", "numpy", "matrix", "scipy", "sparse-matrix"], "comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1518052097, "post_id": 48675257, "comment_id": 84350266, "body": "<code>coo</code> created with the appropriate <code>row, col, data</code> arrays uses those directly without processing.  Looks like the <code>dok</code> does as well.  But most of the <code>sparse</code> code, especially the <code>csr</code> format that implements math, works only with the standard numeric dtypes (using compiled code)."}], "answers": [{"tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": true, "score": 1, "last_activity_date": 1518052765, "creation_date": 1518052765, "answer_id": 48676000, "question_id": 48675257, "link": "https://stackoverflow.com/questions/48675257/how-can-i-have-structured-dtypes-using-sparse-matrices-in-scipy-sparse/48676000#48676000", "title": "How can I have structured dtypes using sparse matrices (in scipy.sparse)?", "body": "<pre><code>In [26]: M = sparse.coo_matrix(X)\nIn [27]: M.data\nOut[27]: \narray([( 1., 0.), ( 2., 0.), ( 3., 0.), ( 4., 0.), ( 5., 0.), ( 6., 0.),\n       ( 7., 0.), ( 8., 0.), ( 9., 0.), (10., 0.), (11., 0.)],\n      dtype=[('a', '&lt;f8'), ('b', '&lt;f8')])\nIn [28]: M.A\n....\nValueError: unsupported data types in input\n\nIn [30]: M.tocsr()\n...\nTypeError: no supported conversion for types: (dtype([('a', '&lt;f8'), ('b', '&lt;f8')]),)\n</code></pre>\n\n<p>Conversion to (and from) <code>dok</code> is ok with the compound dtype:</p>\n\n<pre><code>In [31]: M.todok()\nOut[31]: \n&lt;3x4 sparse matrix of type '&lt;class 'numpy.void'&gt;'\n    with 11 stored elements in Dictionary Of Keys format&gt;\nIn [32]: _.items()\nOut[32]: dict_items([((0, 1), (1., 0.)), ((1, 2), (6., 0.)), ((1, 3), (7., 0.)), ((2, 3), (11., 0.)), ((2, 0), (8., 0.)), ((1, 0), (4., 0.)), ((0, 3), (3., 0.)), ((2, 2), (10., 0.)), ((1, 1), (5., 0.)), ((2, 1), (9., 0.)), ((0, 2), (2., 0.))])\n</code></pre>\n\n<p><code>dok</code> implements indexing:</p>\n\n<pre><code>In [33]: __[0,1]\nOut[33]: (1., 0.)\n</code></pre>\n\n<p>The <code>M.data</code> array is structured, and can be accessed by field name.  But <code>coo</code> hasn't implemented any indexing:</p>\n\n<pre><code>In [34]: M.data['a']\nOut[34]: array([ 1.,  2.,  3.,  4.,  5.,  6.,  7.,  8.,  9., 10., 11.])\n</code></pre>\n\n<p>A <code>dok</code> is a subclass of dictionary, and apparently the elements are stored as dtype records:</p>\n\n<pre><code>In [39]: type(M.todok()[0,1])\nOut[39]: numpy.void\nIn [40]: M.todok()[0,1]['a']\nOut[40]: 1.0\n</code></pre>\n\n<p>But again, no provision in the <code>dok</code> indexing for accessing fields.</p>\n\n<p>In sum, the sparse module was not written with compound dtypes in mind.  Its roots are in linear algebra (e.g. solving large sparse linear equations).  Where these dtypes work it is just using <code>numpy</code> arrays and elements without special handing.</p>\n"}], "owner": {"reputation": 3057, "user_id": 3884713, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/57f1298138a8935d5bf982478e47f23d?s=128&d=identicon&r=PG&f=1", "display_name": "Josh.F", "link": "https://stackoverflow.com/users/3884713/josh-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 257, "favorite_count": 0, "accepted_answer_id": 48676000, "answer_count": 1, "score": 0, "last_activity_date": 1518052765, "creation_date": 1518047482, "last_edit_date": 1518051146, "question_id": 48675257, "link": "https://stackoverflow.com/questions/48675257/how-can-i-have-structured-dtypes-using-sparse-matrices-in-scipy-sparse", "title": "How can I have structured dtypes using sparse matrices (in scipy.sparse)?", "body": "<p>I have structured data that can be represented in <code>numpy</code> like this:</p>\n\n<pre><code>dtype = np.dtype([('a', 'f8'),\n                  ('b', 'f8')])\nX = np.zeros((3,4), dtype=dtype)\n</code></pre>\n\n<p>And would like to operate on a sparse version of it. Scipy has <code>sparse</code>, but I haven't figured out quite how to pull off <em>structured</em> data:</p>\n\n<pre><code>import numpy as np\nimport scipy.sparse as sparse\n\ndtype = np.dtype([('a', 'f8'),\n                  ('b', 'f8')])\nX = np.zeros((3,4), dtype=dtype)\nA, B = X['a'], X['b']\nA[:] = np.arange(0, 12).reshape((3,4))\n\nXdok = sparse.dok_matrix(X, dtype=dtype)\nXcoo = Xdoc.tocoo()\n\n# No supported conversion for structured type\n# Xcsr = Xdok.tocsr()\n# Xlil = Xdok.tolil()\n\n# Cannot perform reduce with flexible type\n# Xdok['a']\n\n# 'coo_matrix' object is not subscriptable\n# Xcoo['a']\n</code></pre>\n\n<p>I can get the <code>doc</code> and <code>coo</code> version, but then I can't slice out my keys (eg <code>Xdok['a']</code>), and from what I understand, <code>dok</code> and <code>coo</code> are inefficient at performing any sort of math.</p>\n\n<p>Ultimately, I'm trying to represent Directed Graphs with multi-valued weights on the edges (eg <code>a</code> and <code>b</code>), and I need to be able to perform simple linear algebra on the graphs.</p>\n\n<p>I've considered keeping an <code>a</code> sparse matrix separate from a <code>b</code> sparse matrix, but ultimately they'll be populated at exactly the same indexes, and I would rather keep all that data in one structure in memory.</p>\n\n<p>Should I be using another lib than Scipy?</p>\n"}, {"tags": ["python", "statistics", "linear-algebra", "data-fitting"], "comments": [{"owner": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "edited": false, "score": 1, "creation_date": 1518060795, "post_id": 48675216, "comment_id": 84352340, "body": "Have you tried the method you described? Does it not work?"}, {"owner": {"reputation": 127, "user_id": 3024182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5c3fc160c70307a5e52aec8d8cc3e28?s=128&d=identicon&r=PG&f=1", "display_name": "Max", "link": "https://stackoverflow.com/users/3024182/max"}, "reply_to_user": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "edited": false, "score": 0, "creation_date": 1518091338, "post_id": 48675216, "comment_id": 84367222, "body": "I have tried using curve_fit form scipy.optimize. I obtain the following errors:  ValueError: object too deep for desired array  minpack.error: Result from function call is not a proper array of floats."}, {"owner": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "edited": false, "score": 1, "creation_date": 1518098614, "post_id": 48675216, "comment_id": 84372366, "body": "What are you trying to model? Is it a 200 degree polynomial? Do you think it&#39;s possible to create an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>?"}, {"owner": {"reputation": 127, "user_id": 3024182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5c3fc160c70307a5e52aec8d8cc3e28?s=128&d=identicon&r=PG&f=1", "display_name": "Max", "link": "https://stackoverflow.com/users/3024182/max"}, "reply_to_user": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "edited": false, "score": 0, "creation_date": 1518102778, "post_id": 48675216, "comment_id": 84375365, "body": "Thank you for taking the time to help out! I managed to figure out how to implement it this morning by using least_squares directly instead of curve_fit."}, {"owner": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "edited": false, "score": 3, "creation_date": 1518102924, "post_id": 48675216, "comment_id": 84375493, "body": "Glad you solved your issue. If you think your solution could benefit others with the same problem in the future, consider adding it as an answer below. See <a href=\"http://blog.stackoverflow.com/2011/07/its-ok-to-ask-and-answer-your-own-questions/\">It&#39;s OK to Ask and Answer Your Own Questions.</a>"}], "owner": {"reputation": 127, "user_id": 3024182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5c3fc160c70307a5e52aec8d8cc3e28?s=128&d=identicon&r=PG&f=1", "display_name": "Max", "link": "https://stackoverflow.com/users/3024182/max"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 142, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1518051932, "creation_date": 1518047068, "last_edit_date": 1518051932, "question_id": 48675216, "link": "https://stackoverflow.com/questions/48675216/how-can-i-fit-a-vector-of-parameters-in-python-without-defining-each-parameter-i", "title": "How can I fit a vector of parameters in python without defining each parameter individually?", "body": "<p>I am currently working with python, but I am open to trying out other tools.</p>\n\n<p>Suppose that I have y-data that can be modeled by the third order polynomial Ax + Bx^2 + Cx^3</p>\n\n<p>If I put the coefficients into a row vector V = [A,B,C], the polynomial can be defined as:</p>\n\n<pre><code>def polynomial(x,V):\n    return numpy.dot(V,[x,x**2,x**3])\n</code></pre>\n\n<p>I would then like to fit the function the following way:</p>\n\n<pre><code>popt,pcov = curve_fit(polynomial,x,y-data)\n</code></pre>\n\n<p>such that I obtain the vector V without having to explicitly define the parameters A, B, and C. </p>\n\n<p>This is of course a very simple case, but the data that I am currently working with has over 200 parameters (global fitting of transient spectroscopy data), and I doubt my current implementation of having a function that receives 200+ variables and then assembles the vectors within the function is the most elegant approach. </p>\n\n<p>Any ideas?</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["python", "python-3.x", "algorithm"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1518053101, "post_id": 48675195, "comment_id": 84350492, "body": "If you merely want to solve the problem, then &quot;jp&quot; has given you a good solution.  If you want to know what&#39;s wrong with <i>your</i> code, then please rewrite it to be readable.  One- and two-letter variable names and magic constants make for hard reading, especially with no documentation at all."}, {"owner": {"reputation": 13, "user_id": 9132710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3112b76126257598a1d6511099f69bd5?s=128&d=identicon&r=PG&f=1", "display_name": "Subhan", "link": "https://stackoverflow.com/users/9132710/subhan"}, "reply_to_user": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1518118638, "post_id": 48675195, "comment_id": 84385334, "body": "This is my first time, I am learning and yes, looking for where this approach is going wrong"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1518118877, "post_id": 48675195, "comment_id": 84385440, "body": "Okay; I&#39;ll keep an eye out for your rewrite.  <code>n1=p*a+q*b+r*c+s*d</code> is hardly self-explanatory, even in the given context."}, {"owner": {"reputation": 13, "user_id": 9132710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3112b76126257598a1d6511099f69bd5?s=128&d=identicon&r=PG&f=1", "display_name": "Subhan", "link": "https://stackoverflow.com/users/9132710/subhan"}, "reply_to_user": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1518127341, "post_id": 48675195, "comment_id": 84389716, "body": "I am trying to get combinations for the sum of numbers. where p, q, r, s vary from -1 to+1. multiply this with a,b,c,d in combination to get a+b+c-d or 0a-1b+1c+1d or 1a-1b+1c+0d or -1a+1b+0c-1d and so on accordingly."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1518129466, "post_id": 48675195, "comment_id": 84390590, "body": "Welcome to StackOverflow.  Please read and follow the posting guidelines in the help documentation.  <a href=\"http://stackoverflow.com/help/mcve\">Minimal, complete, verifiable example</a> applies here.  We cannot effectively help you until you post your MCVE code and accurately describe the problem. We should be able to paste your posted code into a text file and reproduce the problem you described. Your given code fails to execute in several respects; this is not the code you used to produce the output you posted."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 9132710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3112b76126257598a1d6511099f69bd5?s=128&d=identicon&r=PG&f=1", "display_name": "Subhan", "link": "https://stackoverflow.com/users/9132710/subhan"}, "edited": false, "score": 0, "creation_date": 1518117269, "post_id": 48675346, "comment_id": 84384600, "body": "Thank you JP Gave me a new approach, Nice !"}, {"owner": {"reputation": 13, "user_id": 9132710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3112b76126257598a1d6511099f69bd5?s=128&d=identicon&r=PG&f=1", "display_name": "Subhan", "link": "https://stackoverflow.com/users/9132710/subhan"}, "edited": false, "score": 0, "creation_date": 1518132833, "post_id": 48675346, "comment_id": 84391733, "body": "looks like with the same code, if I change the line <code>while count &lt; msum:</code> to  <code>for x in range(mysum):</code> it works as expected and without going to loop!"}], "tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": true, "score": 2, "last_activity_date": 1518048188, "creation_date": 1518048188, "answer_id": 48675346, "question_id": 48675195, "link": "https://stackoverflow.com/questions/48675195/how-to-get-list-of-numbers-by-adding-or-subtracting-given-4-numbers-in-python/48675346#48675346", "title": "how to get list of numbers by adding or subtracting given 4 numbers in python", "body": "<p>I think you should rethink your algorithm. Consider this:</p>\n\n<pre><code>from itertools import combinations\n\ndef numlist(lst):\n    lst = lst + [-i for i in lst]\n    result = set()\n    for i in range(2, 5):\n        result.update(sum(k) for k in combinations(lst, i))\n    return sorted(i for i in result if i &gt; 0)\n\nnumlist([1, 3, 4, 19])\n# [1, 2, 3, 4, 5, 6, 7, 8, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 0, "last_activity_date": 1518129688, "creation_date": 1518129688, "answer_id": 48695976, "question_id": 48675195, "link": "https://stackoverflow.com/questions/48675195/how-to-get-list-of-numbers-by-adding-or-subtracting-given-4-numbers-in-python/48695976#48695976", "title": "how to get list of numbers by adding or subtracting given 4 numbers in python", "body": "<p>I did a little patch-up work, and found the high-level problem with your logic.</p>\n\n<p>Your code goes into an infinite loop when the current value of <code>count</code> cannot be formed with the input values.  Your logic fails to increment <code>count</code> until it finds a way to create that value.  You spin through one combination after another of coefficients.</p>\n\n<pre><code>for x in range(mysum):\n    print (\"top of loop; x =\", x)\n    while count&lt;mysum:\n        print(\"count\", count, \"\\tmysum\", mysum, \"\\tcoeffs\", p, q, r, s)\n        if p&lt;=1:\n...\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 9132710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3112b76126257598a1d6511099f69bd5?s=128&d=identicon&r=PG&f=1", "display_name": "Subhan", "link": "https://stackoverflow.com/users/9132710/subhan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 48675346, "answer_count": 2, "score": -2, "last_activity_date": 1518130256, "creation_date": 1518046995, "last_edit_date": 1518130256, "question_id": 48675195, "link": "https://stackoverflow.com/questions/48675195/how-to-get-list-of-numbers-by-adding-or-subtracting-given-4-numbers-in-python", "title": "how to get list of numbers by adding or subtracting given 4 numbers in python", "body": "<p>I am trying to get possible numbers from 1 to n, given 4 numbers. by adding or subbtracting 2 or more of the 4 numbers.</p>\n\n<p>e.g. it goes into loop for numlist(1,2,3,16). Below is the code:</p>\n\n<pre><code>def numlist(a,b,c,d):  \n    #user input of 4 numbers a,b,c,d\n    # assigning variables value of -1. This will be used to provide -1 or +1 or 0\n    p=-1 \n    q=-1 \n    r=-1\n    s=-1\n    count=0\n    myarray=[]\n\n    mysum=a+b+c+d  #sum of given 4 numbers\n\n\n    for x in range(mysum):\n        while count&lt;mysum:\n            if p&lt;=1:\n                if q&lt;=1:\n                    if r &lt;=1:\n                        if s&lt;=1:\n                            n1=p*a+q*b+r*c+s*d #number to be generated by adding/subtracting\n                            s=s+1\n                            #print(n1)\n                            if n1&gt;0 and (n1 in myarray)==False:\n                                #print(n1)\n                                myarray.append(n1) #add to myarray if number is positive and not already present\n                                myarray.sort()  #sort myarray\n                                count=count+1\n                            if count==mysum:\n                                 break\n                        else:\n                            s=-1\n\n                        r=r+1\n                    else:\n                        r=-1\n\n                    q=q+1\n                else:\n                    q=-1\n\n                p=p+1\n            else:\n                p=-1\n\n    print(len(myarray),'total')\n    print(myarray)\nnumlist(1,3,4,14)\n</code></pre>\n\n<p>outputs</p>\n\n<blockquote>\n  <p>[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22]</p>\n</blockquote>\n\n<p>but if numlist(1,3,4,19)\nit keeps running without ending in output of array. only shows total.</p>\n\n<p>where am I going wrong ?</p>\n"}, {"tags": ["python", "beautifulsoup"], "comments": [{"owner": {"reputation": 513, "user_id": 8293226, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ccfWx.png?s=128&g=1", "display_name": "mustachioed", "link": "https://stackoverflow.com/users/8293226/mustachioed"}, "edited": false, "score": 1, "creation_date": 1518047077, "post_id": 48675179, "comment_id": 84348901, "body": "Have you read the bs4 docs?"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 9330309, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-zlDgegnvJg8/AAAAAAAAAAI/AAAAAAAAQN4/vdWbd_iPGXY/photo.jpg?sz=128", "display_name": "Ric", "link": "https://stackoverflow.com/users/9330309/ric"}, "edited": false, "score": 0, "creation_date": 1518060228, "post_id": 48675290, "comment_id": 84352210, "body": "Thanks. I should probably mention that I am using Python 3.6.3. When I try to run your proposed code as is, I get the error message <code>AttributeError: module &#39;urllib&#39; has no attribute &#39;urlopen&#39;</code>. I then modified the fifth line of your code to <code>s = soup(str(urllib.request.urlopen(&#39;https:&#47;&#47;en.wikipedia.org&#47;wi&zwnj;&#8203;ki&#47;Apple_Inc.&#39;).read&zwnj;&#8203;()), &#39;lxml&#39;)</code>. Unfortunately, I now get the message <code>IndexError: list index out of range</code> in the last line of the code. Any thoughts on how to fix this?"}], "tags": [], "owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "is_accepted": true, "score": 0, "last_activity_date": 1518060624, "last_edit_date": 1518060624, "creation_date": 1518047758, "answer_id": 48675290, "question_id": 48675179, "link": "https://stackoverflow.com/questions/48675179/python-extract-a-list-that-appears-in-a-specific-row-of-an-html-table/48675290#48675290", "title": "Python: extract a list that appears in a specific row of an HTML table", "body": "<p>You can scrape all the data from the wikipedia info box, clean each string by removing all extraneous spaces and new line characters, and then group to find each header row and corresponding list of values:</p>\n\n<pre><code>from bs4 import BeautifulSoup as soup\nimport urllib\nimport re\nimport itertools\ns = soup(str(urllib.urlopen('https://en.wikipedia.org/wiki/Apple_Inc.').read()), 'lxml')\nrows = map(lambda x:re.sub('\\s+', ' ', x.text), s.find_all('th', {'scope':'row'}))\ninfo_box = [re.split('\\n+', i.text) for i in s.find_all('table', {'class':'infobox vcard'})][0]\nfinal_data = [list(b) for a, b in itertools.groupby(info_box, key=lambda x:x in rows)]\nproducts = [a for i, a in enumerate(final_data) if final_data[i-1][0] == u'Products'][0]\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[u'Macintosh', u'iPod', u'iPhone', u'iPad', u'Apple Watch', u'Apple TV', u'HomePod', u'macOS', u'iOS', u'watchOS', u'tvOS', u'iLife', u'iWork']\n</code></pre>\n\n<p>Edit: For Python3.x, this solution uses the more robust <code>requests</code> module instead of <code>urllib</code>:</p>\n\n<pre><code>from bs4 import BeautifulSoup as soup\nimport requests\nimport re\nimport itertools\ns = soup(str(requests.get('https://en.wikipedia.org/wiki/Apple_Inc.').text), 'html.parser')\nrows = list(map(lambda x:re.sub('\\s+', ' ', x.text), s.find_all('th', {'scope':'row'})))\ninfo_box = [re.split('\\n+', i.text) for i in s.find_all('table', {'class':'infobox vcard'})][0]\nfinal_data = [list(b) for a, b in itertools.groupby(info_box, key=lambda x:x in rows)]\nproducts = [a for i, a in enumerate(final_data) if final_data[i-1][0] == u'Products'][0]\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>['Macintosh', 'iPod', 'iPhone', 'iPad', 'Apple Watch', 'Apple TV', 'HomePod', 'macOS', 'iOS', 'watchOS', 'tvOS', 'iLife', 'iWork']\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 9330309, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-zlDgegnvJg8/AAAAAAAAAAI/AAAAAAAAQN4/vdWbd_iPGXY/photo.jpg?sz=128", "display_name": "Ric", "link": "https://stackoverflow.com/users/9330309/ric"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 48675290, "answer_count": 1, "score": 0, "last_activity_date": 1518060624, "creation_date": 1518046874, "question_id": 48675179, "link": "https://stackoverflow.com/questions/48675179/python-extract-a-list-that-appears-in-a-specific-row-of-an-html-table", "title": "Python: extract a list that appears in a specific row of an HTML table", "body": "<p>I have the following code to get the small table on the right hand side of Apple's wikipedia page (the one that contains basic information about the company): </p>\n\n<pre><code>import requests\nfrom bs4 import BeautifulSoup\n\nWIKI_URL = \"https://en.wikipedia.org/wiki/Apple_Inc.\"\n\nreq = requests.get(WIKI_URL)\nsoup = BeautifulSoup(req.content, 'lxml')\ntable_classes = {\"class\": [\"infobox vcard\"]}\nwikitables = soup.find(\"table\", table_classes)\n</code></pre>\n\n<p>I would like to add some extra lines of code to extract the itemized list in the row of the table with th <strong>Products</strong>. In other words, I would like to create a list that will look like this</p>\n\n<pre><code> ['Macintosh',\n 'iPod',\n 'iPhone',\n 'iPad',\n 'Apple Watch',\n 'Apple TV',\n 'HomePod',\n 'macOS',\n 'iOS',\n 'watchOS',\n 'tvOS',\n 'iLife']\n</code></pre>\n\n<p>I would like to write this as part of a code in such a way that I will be able to use the code to extract similar information from the Wiki page of other companies. How can I accomplish this?</p>\n"}, {"tags": ["python", "inheritance", "design-patterns"], "answers": [{"comments": [{"owner": {"reputation": 1339, "user_id": 5465168, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/cQ5U7.jpg?s=128&g=1", "display_name": "Yogi", "link": "https://stackoverflow.com/users/5465168/yogi"}, "edited": false, "score": 0, "creation_date": 1518085055, "post_id": 48675250, "comment_id": 84362980, "body": "I am sorry but I cannot understand. Can you please explain a bit more detail, because I am new to programming"}, {"owner": {"reputation": 3670, "user_id": 7857466, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7OW0s.png?s=128&g=1", "display_name": "progmatico", "link": "https://stackoverflow.com/users/7857466/progmatico"}, "reply_to_user": {"reputation": 1339, "user_id": 5465168, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/cQ5U7.jpg?s=128&g=1", "display_name": "Yogi", "link": "https://stackoverflow.com/users/5465168/yogi"}, "edited": false, "score": 0, "creation_date": 1518131745, "post_id": 48675250, "comment_id": 84391363, "body": "Oh, you didn&#39;t look like that to me, based on way you wrote the question, sorry. I tried to explain better. See my answer edit."}], "tags": [], "owner": {"reputation": 3670, "user_id": 7857466, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7OW0s.png?s=128&g=1", "display_name": "progmatico", "link": "https://stackoverflow.com/users/7857466/progmatico"}, "is_accepted": false, "score": 0, "last_activity_date": 1518131841, "last_edit_date": 1518131841, "creation_date": 1518047345, "answer_id": 48675250, "question_id": 48675159, "link": "https://stackoverflow.com/questions/48675159/python-design-pattern-for-magic-methods-and-pandas-inheritance/48675250#48675250", "title": "Python design pattern for magic methods and pandas inheritance", "body": "<p>It looks to me you want to customize the behaviour of an existent type (dataframes in this case, but it could be any type). Usually we want to alter some of the behaviour to a different one, or we want to extend that behaviour, or we want to do both. When I say behaviour think methods).</p>\n\n<p>You can also choose between a has-a approach (that is wrapping an object, by creating a new class whose objects hold a reference to the original object. That way you can create several new, different or similar methods that make new things, eventually using some of the existing ones, by using the stored reference to invoke original methods. This way you kind of adapt the original class interface to a different one. This is known as a wrapper pattern (or adapter pattern).</p>\n\n<p>That is what you have made. But then you face a problem: how do you accept all of the possible methods of the original class? You will have to rewrite all the possible methods (not pratical), just to delegate them on the original class, or you find a way of delegating them all except the few ones you override. I will not cover this last possibility, because you have inheritance at your disposal and that makes things like that quite straightforward.</p>\n\n<p>Just inherit from the original class and you'll be able to create objects with the same behaviour as the parent class. If you need new data members, override <code>__init__</code> and add those but don't forget to invoke the parent's class <code>__init__</code>, otherwise the object won't initialize properly. That's where you use <code>super().__init__()</code> like described below. If you want to add new methods, just add the usual defs to your child class. If you want to extend existant methods, do as described for the <code>__init__</code> method. If you want to completely override a method just write your version with a def with the same name of the original.method, it will totally replace the original.</p>\n\n<p>So in your case you want to inherit from dataframe class, you'll have to either choose if you need a custom <code>__init__</code> or not. If you need define one but do not forget to call the parent's original inside it. Then define your custom methods, say a new <code>__add__</code> and <code>__sub__</code>, that either replace or extend the original ones (with the same technique).\nBe careful in not defining methods that you think are new, but actually existed in the original class, cause they will be overriden. This is an small inconvenience of inheriting, specially if the original has an interface with lots of methods. </p>\n\n<p>Use <code>super()</code> to extend a parent's class behaviour</p>\n\n<pre><code>class A:\n    pass # has some original __init__\n\nclass B(A): # B inherits A\n    def __init__(self, *args, **kwargs):\n        super().__init__(*args, **kwargs) # preserves parent initialization, passing the same received arguments. If you don't do this parent __init__ will be overrided, not initialising parent object properly.\n        # add your custom code\n        pass\n</code></pre>\n\n<p>The thing with <code>super()</code> is that it solves some problems that arise when using multiple inheritance (inherit from several classes), when determining which of the parents method should be called, if you have several with the same named method; it is recommended over calling the parent's method with <code>SomeParentClass.method()</code> inside the child class.</p>\n\n<p>Also if you subclass a type because you need it, you shouldn't be afraid of using it \"everywhere\" as you said. Make sure you customize it for a good reason (so think if making this to dataframes is appropriate, or is there another simpler way of achieving the same objective without doing that; can't advise you here, I haven't experience with pandas), then use it instead of the original class.</p>\n"}], "owner": {"reputation": 1339, "user_id": 5465168, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/cQ5U7.jpg?s=128&g=1", "display_name": "Yogi", "link": "https://stackoverflow.com/users/5465168/yogi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 414, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1518877114, "creation_date": 1518046765, "last_edit_date": 1518877114, "question_id": 48675159, "link": "https://stackoverflow.com/questions/48675159/python-design-pattern-for-magic-methods-and-pandas-inheritance", "title": "Python design pattern for magic methods and pandas inheritance", "body": "<p>So I basically put this question for some advice</p>\n\n<p>I have few classes which basically does some pandas operations and return a dataframe. But these dataframes needs addition and subtraction on some filter options. I planned to write a class to override <strong>__add__</strong> and <strong>__sub__</strong> methods, so that these dataframes are added or subtracted by my code which implements those filters. Below is a basic structure</p>\n\n<pre><code>import ArithOperation\nclass A:\n  def dataA(self, filenameA):\n    dfa = pd.read_excel(filenameA)\n    return ArithOperation(dfA)\n\nclass B:\n  def dataB(self, filenameB):\n    dfb = pd.read_excel(filenameB)\n    return ArithOperation(dfB)\n</code></pre>\n\n<p>dfA and dfB here are pandas dataframes.</p>\n\n<pre><code>class ArithOperation:\n  def __init__(self, df):\n     self.df = df\n  def __add__(self, other):\n     # here the filtering and manual addition is done\n     return ArithOperation(sumdf)\n  def __sub__(self, other):\n     # here the filtering and manual subtraction is done\n     return ArithOperation(deltadf)\n</code></pre>\n\n<p>Basically I do the calculation as below</p>\n\n<pre><code>dfa = A().dataA()\ndfb = B().dataB()\n\nsumdf = dfa+dfb\ndeltadf = dfa-dfb\n</code></pre>\n\n<p>But how do I make the <strong>sumdf</strong> and <strong>deltadf</strong> have default dataframe functions too. I know I should inherit dataframe class to <strong>ArithOperation</strong> but I am confused and bit uncomfortable of instantiating <strong>ArithOperation()</strong> at many places. </p>\n\n<ol>\n<li>Is there a better design pattern for this problem? </li>\n<li>Which class to inherit on ArithOperation so that I have all pandas dataframe functions too on ArithOperation object ?</li>\n</ol>\n"}, {"tags": ["python", "c++", "python-3.x", "shared-libraries", "ctypes"], "comments": [{"owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "edited": false, "score": 0, "creation_date": 1518068686, "post_id": 48675152, "comment_id": 84354259, "body": "In PyCharm, what is the result of <code>os.getcwd()</code>?  Is your .so in that path?  When specifying the full path, did you use a a raw string <code>r&#39;c:\\path&#39;</code> or forward slashes <code>c:&#47;path</code> where a backslash can&#39;t be misinterpreted as an escape?  As an aside, in your <code>foo_bar_function</code>, <code>sizeof(a)</code> is the size of <code>float*</code>, not the size of the <code>py_a</code> array passed in."}, {"owner": {"reputation": 180, "user_id": 3332470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37b469f584d6578d4bd6660994f8840e?s=128&d=identicon&r=PG&f=1", "display_name": "iR0Nic", "link": "https://stackoverflow.com/users/3332470/ir0nic"}, "reply_to_user": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "edited": false, "score": 0, "creation_date": 1518070700, "post_id": 48675152, "comment_id": 84354902, "body": "@MarkTolonen Yes, the .py and the .so reside in the same folder and printing the os.getcwd() points to that. I tried forward slashes and double backward. By now I&#39;m sure its the about including valarray.. When I&#39;m not #including anything it works like a (py)charm..  Ah thanks for pointing that out, that came from quickly reducing the sample, in the code I pass another int with the array size."}, {"owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "edited": false, "score": 0, "creation_date": 1518071166, "post_id": 48675152, "comment_id": 84355093, "body": "A tool like SysInternals procmon.exe can help track down where PyCharm is looking for your library and any dependencies."}, {"owner": {"reputation": 180, "user_id": 3332470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37b469f584d6578d4bd6660994f8840e?s=128&d=identicon&r=PG&f=1", "display_name": "iR0Nic", "link": "https://stackoverflow.com/users/3332470/ir0nic"}, "reply_to_user": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "edited": false, "score": 0, "creation_date": 1518071687, "post_id": 48675152, "comment_id": 84355311, "body": "Thanks, I will take a look! Any way I could directly bundle valarray into the .so or compile a seperate shared library out of it and include that one in my code?"}, {"owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "edited": false, "score": 0, "creation_date": 1518072467, "post_id": 48675152, "comment_id": 84355653, "body": "FWIW I used MSVC++ here at home and compiling your extern &quot;C&quot; function  with a valarray &quot;just worked&quot; linking to the shared C++ runtime and using ctypes."}, {"owner": {"reputation": 180, "user_id": 3332470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37b469f584d6578d4bd6660994f8840e?s=128&d=identicon&r=PG&f=1", "display_name": "iR0Nic", "link": "https://stackoverflow.com/users/3332470/ir0nic"}, "reply_to_user": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "edited": false, "score": 0, "creation_date": 1518073409, "post_id": 48675152, "comment_id": 84356104, "body": "sorry im farily new to c++ and compiling such, what exactly do you mean by &quot;linking to the shared c++ runtime&quot;? can you share the commands you used to compile and create the shared library with msvc++?"}, {"owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "edited": false, "score": 0, "creation_date": 1518073649, "post_id": 48675152, "comment_id": 84356202, "body": "<code>cl &#47;EHsc &#47;W4 &#47;MD &#47;LD test.cpp</code>.  The flags enable C++ exception handling, maximize warnings, dynamic link to the runtime, and create a DLL.  Note the output is <code>test.dll</code> not <code>test.so</code>.  Maybe that works with <code>g++</code> on Windows, but to me .so is a Linux library."}, {"owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "edited": false, "score": 0, "creation_date": 1518074219, "post_id": 48675152, "comment_id": 84356505, "body": "I did a quick check and renaming <code>test.dll</code> to <code>test.so</code> and using <code>ctypes.CDLL(&#39;test.so&#39;)</code> did still load for me."}, {"owner": {"reputation": 180, "user_id": 3332470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37b469f584d6578d4bd6660994f8840e?s=128&d=identicon&r=PG&f=1", "display_name": "iR0Nic", "link": "https://stackoverflow.com/users/3332470/ir0nic"}, "reply_to_user": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "edited": false, "score": 0, "creation_date": 1518538714, "post_id": 48675152, "comment_id": 84543390, "body": "thank you, that helped a lot! though I have to admit using a shared library did not gave me the speed up I expected (at least mutlicore), thus I used jit&#39;s no python."}], "owner": {"reputation": 180, "user_id": 3332470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37b469f584d6578d4bd6660994f8840e?s=128&d=identicon&r=PG&f=1", "display_name": "iR0Nic", "link": "https://stackoverflow.com/users/3332470/ir0nic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 575, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1518070789, "creation_date": 1518046728, "last_edit_date": 1518070789, "question_id": 48675152, "link": "https://stackoverflow.com/questions/48675152/python-ctypes-cdlllibrary-so-specified-modul-not-found", "title": "Python: ctypes CDLL(&#39;library.so&#39;) Specified Modul not found", "body": "<p>I am trying to use a simple C++ function within python3.\nFollowing a tutorial I built a shared libray (\".so\") and tried to call the funktion within python with the ctypes.CDLL() function.</p>\n\n<p>Compiling the .cpp and executing the .py went well on the command line, but when I copied all files into an IDE (PyCharm in my case) and run the code from there I get the error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \".../test/wrapper.py\", line 26, in &lt;module&gt;\n    test = ctypes.CDLL('library.so').foo_bar_function(a, b)\n  File \"...\\AppData\\Local\\Programs\\Python\\Python36\\lib\\ctypes\\__init__.py\", line 348, in __init__\n    self._handle = _dlopen(self._name, mode)\nOSError: [WinError 126] The specified module was not found\n</code></pre>\n\n<p>I already tried specifying the full path to the library.so, without luck.</p>\n\n<p>I'm aware that there are toolsets as the Boost.Python Library which can help extending python with c/c++ functions. But as the functions do not require anything special, are only \"static\" methods and are quite simple, I thought I would not have to go through that hassle. All my function should do is getting some arrays from python, manipulating the array with simple  operations and returning an int.</p>\n\n<p>What I did:</p>\n\n<ul>\n<li><p>Created two files:</p>\n\n<p>.../test/function.cpp\n.../test/wrapper.py</p></li>\n</ul>\n\n<p>function.cpp:</p>\n\n<pre><code>#include &lt;valarray&gt;\n\nbool foo_function(const std::valarray&lt;float&gt; &amp;a, const int b) {\n    float f = 0.0;\n    std::valarray&lt;float&gt; above = a[a &lt; f];\n    return above.size() &gt;= b;\n}\n\nint bar_function(const std::valarray&lt;float&gt; &amp;a, const int b) {\n    bool b = foo_function(a,b[0]);\n    ... SOME OTHER CODE ...\n    return 0;\n}\n\nextern \"C\" int foo_bar_function(float *a, int *b, int c) {\n    std::valarray&lt;float&gt; v (a, c);\n    ... SOME OTHER CODE ...\n    int i = bar_function(v, b);\n    return i;\n}\n</code></pre>\n\n<p>and wrapper.py</p>\n\n<pre><code>import ctypes\n\npy_a = [10,5,6,2,1,1,1,6,3,1]\nc_a = (ctypes.c_float * len(py_a))(*py_a)\n\npy_b = [1,1,2]\nc_b = (ctypes.c_int * len(py_b))(*py_b)\n\ntest = ctypes.CDLL('library.so').foo_bar_function(c_a, c_b)\n\nprint(test)\n</code></pre>\n\n<p>then I ran:</p>\n\n<pre><code>...\\test&gt; g++ -shared -c -fPIC function.cpp -o function.o\n...\\test&gt; g++ -shared -Wl,-soname,library.so -o library.so function.o\n...\\test&gt; python wrapper.py\n0 (expected output from c++ function)\n</code></pre>\n\n<p>So within the cmd all went as expected.</p>\n\n<p>What else could I try?</p>\n"}, {"tags": ["python", "deep-learning", "pytorch"], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 9345701, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JRum46OP0Vc/AAAAAAAAAAI/AAAAAAAAADk/e-X4-SgXfCk/photo.jpg?sz=128", "display_name": "Dmitrii Khizbullin", "link": "https://stackoverflow.com/users/9345701/dmitrii-khizbullin"}, "reply_to_user": {"reputation": 14942, "user_id": 1179925, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/5403975c3b25b9407b19a26b65d1ce72?s=128&d=identicon&r=PG", "display_name": "mrgloom", "link": "https://stackoverflow.com/users/1179925/mrgloom"}, "edited": false, "score": 0, "creation_date": 1519167612, "post_id": 48731531, "comment_id": 84796956, "body": "@mrgloom Nope. The magic of PyTorch is that it recursively applies this hook to all submodules on a register_forward_hook() call. Probably you can pass a functor, but I have not tried it yet."}], "tags": [], "owner": {"reputation": 41, "user_id": 9345701, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JRum46OP0Vc/AAAAAAAAAAI/AAAAAAAAADk/e-X4-SgXfCk/photo.jpg?sz=128", "display_name": "Dmitrii Khizbullin", "link": "https://stackoverflow.com/users/9345701/dmitrii-khizbullin"}, "is_accepted": false, "score": 4, "last_activity_date": 1518353010, "last_edit_date": 1518353010, "creation_date": 1518352477, "answer_id": 48731531, "question_id": 48675114, "link": "https://stackoverflow.com/questions/48675114/pytorch-how-to-print-output-blob-size-of-each-layer-in-network/48731531#48731531", "title": "PyTorch: How to print output blob size of each layer in network?", "body": "<p>You can register a hook (callback function) which will print out shapes of input and output tensors like described in the manual: <a href=\"http://pytorch.org/tutorials/beginner/former_torchies/nn_tutorial.html#forward-and-backward-function-hooks\" rel=\"nofollow noreferrer\">Forward and Backward Function Hooks</a><br/>\nExample:</p>\n\n<pre><code>net.register_forward_hook(your_print_blobs_function)\n</code></pre>\n\n<p>After this you need to do one forward pass against some input tensor.</p>\n\n<pre><code>expected_image_shape = (3, 224, 224)\ninput_tensor = torch.autograd.Variable(torch.rand(1, *expected_image_shape))\n# this call will invoke all registered forward hooks\noutput_tensor = net(input_tensor)\n</code></pre>\n"}], "owner": {"reputation": 14942, "user_id": 1179925, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/5403975c3b25b9407b19a26b65d1ce72?s=128&d=identicon&r=PG", "display_name": "mrgloom", "link": "https://stackoverflow.com/users/1179925/mrgloom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2396, "favorite_count": 2, "answer_count": 1, "score": 3, "last_activity_date": 1518353010, "creation_date": 1518046504, "question_id": 48675114, "link": "https://stackoverflow.com/questions/48675114/pytorch-how-to-print-output-blob-size-of-each-layer-in-network", "title": "PyTorch: How to print output blob size of each layer in network?", "body": "<p>I can print network structure like (also how to print positional index of each 'simple' layer? because in this example we have <code>3</code> for <code>Fire</code> module and it's content ('simple' layers) don't have index):</p>\n\n<pre><code>net = models.squeezenet1_1(pretrained=True)\nprint(net)\n\n\n\nSqueezeNet(\n  (features): Sequential(\n    (0): Conv2d (3, 64, kernel_size=(3, 3), stride=(2, 2))\n    (1): ReLU(inplace)\n    (2): MaxPool2d(kernel_size=(3, 3), stride=(2, 2), dilation=(1, 1))\n    (3): Fire(\n      (squeeze): Conv2d (64, 16, kernel_size=(1, 1), stride=(1, 1))\n      (squeeze_activation): ReLU(inplace)\n      (expand1x1): Conv2d (16, 64, kernel_size=(1, 1), stride=(1, 1))\n      (expand1x1_activation): ReLU(inplace)\n      (expand3x3): Conv2d (16, 64, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))\n      (expand3x3_activation): ReLU(inplace)\n    )\n    (4): Fire(\n      (squeeze): Conv2d (128, 16, kernel_size=(1, 1), stride=(1, 1))\n      (squeeze_activation): ReLU(inplace)\n      (expand1x1): Conv2d (16, 64, kernel_size=(1, 1), stride=(1, 1))\n      (expand1x1_activation): ReLU(inplace)\n      (expand3x3): Conv2d (16, 64, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))\n      (expand3x3_activation): ReLU(inplace)\n    )\n    (5): MaxPool2d(kernel_size=(3, 3), stride=(2, 2), dilation=(1, 1))\n    (6): Fire(\n      (squeeze): Conv2d (128, 32, kernel_size=(1, 1), stride=(1, 1))\n      (squeeze_activation): ReLU(inplace)\n      (expand1x1): Conv2d (32, 128, kernel_size=(1, 1), stride=(1, 1))\n      (expand1x1_activation): ReLU(inplace)\n      (expand3x3): Conv2d (32, 128, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))\n      (expand3x3_activation): ReLU(inplace)\n    )\n    (7): Fire(\n      (squeeze): Conv2d (256, 32, kernel_size=(1, 1), stride=(1, 1))\n      (squeeze_activation): ReLU(inplace)\n      (expand1x1): Conv2d (32, 128, kernel_size=(1, 1), stride=(1, 1))\n      (expand1x1_activation): ReLU(inplace)\n      (expand3x3): Conv2d (32, 128, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))\n      (expand3x3_activation): ReLU(inplace)\n    )\n    (8): MaxPool2d(kernel_size=(3, 3), stride=(2, 2), dilation=(1, 1))\n    (9): Fire(\n      (squeeze): Conv2d (256, 48, kernel_size=(1, 1), stride=(1, 1))\n      (squeeze_activation): ReLU(inplace)\n      (expand1x1): Conv2d (48, 192, kernel_size=(1, 1), stride=(1, 1))\n      (expand1x1_activation): ReLU(inplace)\n      (expand3x3): Conv2d (48, 192, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))\n      (expand3x3_activation): ReLU(inplace)\n    )\n    (10): Fire(\n      (squeeze): Conv2d (384, 48, kernel_size=(1, 1), stride=(1, 1))\n      (squeeze_activation): ReLU(inplace)\n      (expand1x1): Conv2d (48, 192, kernel_size=(1, 1), stride=(1, 1))\n      (expand1x1_activation): ReLU(inplace)\n      (expand3x3): Conv2d (48, 192, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))\n      (expand3x3_activation): ReLU(inplace)\n    )\n    (11): Fire(\n      (squeeze): Conv2d (384, 64, kernel_size=(1, 1), stride=(1, 1))\n      (squeeze_activation): ReLU(inplace)\n      (expand1x1): Conv2d (64, 256, kernel_size=(1, 1), stride=(1, 1))\n      (expand1x1_activation): ReLU(inplace)\n      (expand3x3): Conv2d (64, 256, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))\n      (expand3x3_activation): ReLU(inplace)\n    )\n    (12): Fire(\n      (squeeze): Conv2d (512, 64, kernel_size=(1, 1), stride=(1, 1))\n      (squeeze_activation): ReLU(inplace)\n      (expand1x1): Conv2d (64, 256, kernel_size=(1, 1), stride=(1, 1))\n      (expand1x1_activation): ReLU(inplace)\n      (expand3x3): Conv2d (64, 256, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))\n      (expand3x3_activation): ReLU(inplace)\n    )\n  )\n  (classifier): Sequential(\n    (0): Dropout(p=0.5)\n    (1): Conv2d (512, 1000, kernel_size=(1, 1), stride=(1, 1))\n    (2): ReLU(inplace)\n    (3): AvgPool2d(kernel_size=13, stride=1, padding=0, ceil_mode=False, count_include_pad=True)\n  )\n)\n</code></pre>\n\n<p>And I can print weights size like:</p>\n\n<pre><code>for i, weights in enumerate(list(net.parameters())):\n    print('i:',i,'weights:',weights.size())\n\n\n\ni: 0 weights: torch.Size([64, 3, 3, 3])\ni: 1 weights: torch.Size([64])\ni: 2 weights: torch.Size([16, 64, 1, 1])\ni: 3 weights: torch.Size([16])\ni: 4 weights: torch.Size([64, 16, 1, 1])\ni: 5 weights: torch.Size([64])\ni: 6 weights: torch.Size([64, 16, 3, 3])\ni: 7 weights: torch.Size([64])\ni: 8 weights: torch.Size([16, 128, 1, 1])\ni: 9 weights: torch.Size([16])\ni: 10 weights: torch.Size([64, 16, 1, 1])\ni: 11 weights: torch.Size([64])\ni: 12 weights: torch.Size([64, 16, 3, 3])\ni: 13 weights: torch.Size([64])\ni: 14 weights: torch.Size([32, 128, 1, 1])\ni: 15 weights: torch.Size([32])\ni: 16 weights: torch.Size([128, 32, 1, 1])\ni: 17 weights: torch.Size([128])\ni: 18 weights: torch.Size([128, 32, 3, 3])\ni: 19 weights: torch.Size([128])\ni: 20 weights: torch.Size([32, 256, 1, 1])\ni: 21 weights: torch.Size([32])\ni: 22 weights: torch.Size([128, 32, 1, 1])\ni: 23 weights: torch.Size([128])\ni: 24 weights: torch.Size([128, 32, 3, 3])\ni: 25 weights: torch.Size([128])\ni: 26 weights: torch.Size([48, 256, 1, 1])\ni: 27 weights: torch.Size([48])\ni: 28 weights: torch.Size([192, 48, 1, 1])\ni: 29 weights: torch.Size([192])\ni: 30 weights: torch.Size([192, 48, 3, 3])\ni: 31 weights: torch.Size([192])\ni: 32 weights: torch.Size([48, 384, 1, 1])\ni: 33 weights: torch.Size([48])\ni: 34 weights: torch.Size([192, 48, 1, 1])\ni: 35 weights: torch.Size([192])\ni: 36 weights: torch.Size([192, 48, 3, 3])\ni: 37 weights: torch.Size([192])\ni: 38 weights: torch.Size([64, 384, 1, 1])\ni: 39 weights: torch.Size([64])\ni: 40 weights: torch.Size([256, 64, 1, 1])\ni: 41 weights: torch.Size([256])\ni: 42 weights: torch.Size([256, 64, 3, 3])\ni: 43 weights: torch.Size([256])\ni: 44 weights: torch.Size([64, 512, 1, 1])\ni: 45 weights: torch.Size([64])\ni: 46 weights: torch.Size([256, 64, 1, 1])\ni: 47 weights: torch.Size([256])\ni: 48 weights: torch.Size([256, 64, 3, 3])\ni: 49 weights: torch.Size([256])\ni: 50 weights: torch.Size([1000, 512, 1, 1])\ni: 51 weights: torch.Size([1000])\n</code></pre>\n\n<p>How to print output blob size of each layer in network?</p>\n"}, {"tags": ["python", "pandas", "csv", "dataframe"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 4, "creation_date": 1518046591, "post_id": 48675105, "comment_id": 84348746, "body": "Any number of ways. Having worked with (fought) addresses, and without and decent example, there probably isn&#39;t a reasonable way to answer this as it is (real-world addresses, especially if free-text, are sent to test us). If your example is reasonably simple, please see <a href=\"https://stackoverflow.com/questions/20109391/how-to-make-good-reproducible-pandas-examples\">How to make good reproducible pandas examples</a> and edit accordingly."}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1518046791, "post_id": 48675105, "comment_id": 84348822, "body": "what&#39;s the difference between 3rd and 4th type of address?"}], "answers": [{"tags": [], "owner": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "is_accepted": false, "score": 0, "last_activity_date": 1518101353, "last_edit_date": 1518101353, "creation_date": 1518061705, "answer_id": 48677220, "question_id": 48675105, "link": "https://stackoverflow.com/questions/48675105/how-to-extract-city-state-from-a-column-in-pandas-dataframe/48677220#48677220", "title": "How to extract city,state from a column in pandas dataframe?", "body": "<h2>Option 1: Split on comma</h2>\n\n<p>Could it be as simple as splitting the string on a comma, and then taking the last token/first token around the split?</p>\n\n<pre><code>addresses = [\"xxx Richardson, TX\", \"xxyy Wylie, TX WO-65758\"]\nfor a in addresses:\n    asplit = a.split(\",\")\n    city = asplit[0].split()[-1]\n    state = asplit[1].split()[0]\n    print(\", \".join([city, state]))\n#Richardson, TX\n#Wylie, TX\n</code></pre>\n\n<hr>\n\n<p><strong>Example</strong></p>\n\n<p>If you had the following DataFrame:</p>\n\n<pre><code>df = pd.DataFrame(\n    {\n        'Address': [\n            'xxx Richardson, TX',\n            'yyy Plano, TX',\n            'xxyy Wylie, TX WO-65758',\n            'zzz Waxahachie, TX WO-999786'\n        ]\n    }\n)\n</code></pre>\n\n<p>You can define the split function:</p>\n\n<pre><code>def extract_city_state(a):\n    asplit = a.split(\",\")\n    city = asplit[0].split()[-1]\n    state = asplit[1].split()[0]\n    return city, state\n</code></pre>\n\n<p>Then <code>apply()</code> it to the address column, which would return two new columns, and <code>join()</code> this back to the original DataFrame:</p>\n\n<pre><code>df.join(\n    df['Address'].apply(\n        lambda x: pd.Series(extract_city_state(x), index=[\"City\", \"State\"])\n    )\n)\n#                        Address        City State\n#0            xxx Richardson, TX  Richardson    TX\n#1                 yyy Plano, TX       Plano    TX\n#2       xxyy Wylie, TX WO-65758       Wylie    TX\n#3  zzz Waxahachie, TX WO-999786  Waxahachie    TX\n</code></pre>\n\n<hr>\n\n<h2>Option 2: Use Regex</h2>\n\n<p>If that doesn't work, how about matching using a regex pattern?</p>\n\n<p>This one should work:</p>\n\n<pre><code>import re    \npattern = r\"[A-Z][a-z]+,\\s[A-Z]{2}\"\nfor a in addresses:\n  matches = re.finditer(pattern, a, re.MULTILINE)\n  for match in matches:\n      city, state = match.group().replace(\",\", \"\").split()\n      print(\", \".join([city, state])) \n#Richardson, TX\n#Wylie, TX\n</code></pre>\n\n<p>Which matches:</p>\n\n<ul>\n<li><code>[A-Z]</code>: One capital letter</li>\n<li><code>[a-z]+</code>: Any number of lower case letters</li>\n<li><code>,\\s</code>: Comma followed by a space</li>\n<li><code>[A-Z]{2}</code>: 2 Capital Letters</li>\n</ul>\n\n<p><a href=\"https://regex101.com/r/p5S7tv/2\" rel=\"nofollow noreferrer\">Demo on Regex101</a></p>\n\n<hr>\n\n<p><strong>Example</strong></p>\n\n<pre><code>df.join(\n    df['Address'].str.extract(\n        r\"((?P&lt;City&gt;[A-Z][a-z]+),\\s(?P&lt;State&gt;[A-Z]{2}))\",\n        expand=False\n    )[[\"City\", \"State\"]]\n)\n#                        Address        City State\n#0            xxx Richardson, TX  Richardson    TX\n#1                 yyy Plano, TX       Plano    TX\n#2       xxyy Wylie, TX WO-65758       Wylie    TX\n#3  zzz Waxahachie, TX WO-999786  Waxahachie    TX\n</code></pre>\n\n<p><strong>Notes</strong></p>\n\n<ul>\n<li>This won't work for city names that have a space in them, i.e. \"San Antonio, TX\".</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "edited": false, "score": 0, "creation_date": 1518101162, "post_id": 48679427, "comment_id": 84374179, "body": "This doesn&#39;t work on the last 2 examples where there is extraneous data at the end of the string. OP specifically mentioned that they tried this but it didn&#39;t work."}, {"owner": {"reputation": 1247, "user_id": 5014700, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NVWqB.jpg?s=128&g=1", "display_name": "Lambda", "link": "https://stackoverflow.com/users/5014700/lambda"}, "reply_to_user": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "edited": false, "score": 0, "creation_date": 1518145927, "post_id": 48679427, "comment_id": 84395081, "body": "How do you define extraneous data?"}, {"owner": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "edited": false, "score": 0, "creation_date": 1518146112, "post_id": 48679427, "comment_id": 84395125, "body": "OP wants city and state. Your solution on the last string <code>&quot;zzz Waxahachie, TX WO-999786&quot;</code> returns <code>&quot;Waxahachie,TXWO-999786&quot;</code>."}, {"owner": {"reputation": 1247, "user_id": 5014700, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NVWqB.jpg?s=128&g=1", "display_name": "Lambda", "link": "https://stackoverflow.com/users/5014700/lambda"}, "reply_to_user": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "edited": false, "score": 0, "creation_date": 1518148104, "post_id": 48679427, "comment_id": 84395568, "body": "I mean you should tell us what you want to get, such as &quot;TX WO-999786&quot; should return &quot;TX&quot;. I update my answer, hope it can help you."}, {"owner": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "edited": false, "score": 0, "creation_date": 1518184702, "post_id": 48679427, "comment_id": 84413510, "body": "Sure this works now but it&#39;s essentially the same thing as my answer. I think <i>&quot;trying to extract city,state&quot;</i> was pretty clear."}], "tags": [], "owner": {"reputation": 1247, "user_id": 5014700, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NVWqB.jpg?s=128&g=1", "display_name": "Lambda", "link": "https://stackoverflow.com/users/5014700/lambda"}, "is_accepted": true, "score": 0, "last_activity_date": 1518147847, "last_edit_date": 1518147847, "creation_date": 1518073212, "answer_id": 48679427, "question_id": 48675105, "link": "https://stackoverflow.com/questions/48675105/how-to-extract-city-state-from-a-column-in-pandas-dataframe/48679427#48679427", "title": "How to extract city,state from a column in pandas dataframe?", "body": "<p>I don't quite understand what you want to get, just split the column and get the last two elements as the city and state? Maybe this code below can help you.   </p>\n\n<pre><code>df[\"Address\"].apply(lambda x: \"\".join(x.split()[1:]))\n</code></pre>\n\n<p>update: (I changed the data of row 2 to make it contain a space)</p>\n\n<pre><code>df2 = df[\"Address\"].apply(lambda x: x.split(\",\"))\ncity = df2.apply(lambda x: \" \".join(x[0].split()[1:]))\nstate = df2.apply(lambda x: x[1].split()[0])\nresult = pd.DataFrame(zip(city, state), columns=[\"city\", \"state\"])\n</code></pre>\n\n<p>result:</p>\n\n<pre><code>Out[13]:\n     city state\n0  Richardson    TX\n1   Pla Plano    TX\n2       Wylie    TX\n3  Waxahachie    TX\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 844, "user_id": 5910812, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NSqqn.jpg?s=128&g=1", "display_name": "Silenced Temporarily", "link": "https://stackoverflow.com/users/5910812/silenced-temporarily"}, "is_accepted": false, "score": 0, "last_activity_date": 1518104189, "creation_date": 1518104189, "answer_id": 48689236, "question_id": 48675105, "link": "https://stackoverflow.com/questions/48675105/how-to-extract-city-state-from-a-column-in-pandas-dataframe/48689236#48689236", "title": "How to extract city,state from a column in pandas dataframe?", "body": "<p>Rather than reinvent the wheel, I'd look into using an existing address-parsing library. There are more than one, so you may need to do some comparisons. <a href=\"https://github.com/datamade/usaddress\" rel=\"nofollow noreferrer\">https://github.com/datamade/usaddress</a> is one I've used in the past. </p>\n"}], "owner": {"reputation": 23, "user_id": 9330271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54c119a87b814c6273ee484cac77d6fc?s=128&d=identicon&r=PG&f=1", "display_name": "Aruna J", "link": "https://stackoverflow.com/users/9330271/aruna-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3565, "favorite_count": 0, "accepted_answer_id": 48679427, "answer_count": 3, "score": 2, "last_activity_date": 1518147847, "creation_date": 1518046438, "last_edit_date": 1518046679, "question_id": 48675105, "link": "https://stackoverflow.com/questions/48675105/how-to-extract-city-state-from-a-column-in-pandas-dataframe", "title": "How to extract city,state from a column in pandas dataframe?", "body": "<p>I am working on a raw data and trying to extract city,state from an address column.</p>\n\n<pre><code>Address\nxxx Richardson, TX\nyyy Plano, TX\nxxyy Wylie, TX WO-65758\nzzz Waxahachie, TX WO-999786\n</code></pre>\n\n<p>I used splitting the last two elements in the column but how to go about for data like the 3rd and 4th row in a huge dataset containing 30k records?</p>\n"}, {"tags": ["python", "tensorflow"], "answers": [{"tags": [], "owner": {"reputation": 119710, "user_id": 3574081, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LIW6C.jpg?s=128&g=1", "display_name": "mrry", "link": "https://stackoverflow.com/users/3574081/mrry"}, "is_accepted": false, "score": 6, "last_activity_date": 1577709913, "last_edit_date": 1577709913, "creation_date": 1518217405, "answer_id": 48715382, "question_id": 48675097, "link": "https://stackoverflow.com/questions/48675097/from-audio-to-tensor-back-to-audio-in-tensorflow/48715382#48715382", "title": "From audio to tensor, back to audio in tensorflow", "body": "<h2>TensorFlow 1.x:</h2>\n\n<p>The <a href=\"https://www.tensorflow.org/api_docs/python/tf/contrib/ffmpeg/decode_audio\" rel=\"nofollow noreferrer\"><code>tf.contrib.ffmpeg.decode_audio()</code></a> op can load audio data (including in WAV format) into a tensor, and the <a href=\"https://www.tensorflow.org/api_docs/python/tf/contrib/ffmpeg/encode_audio\" rel=\"nofollow noreferrer\"><code>tf.contrib.ffmpeg.encode_audio()</code></a> can covert it back into audio data.</p>\n\n<pre><code>input_filename = tf.placeholder(tf.string, shape=[])\noutput_filename = tf.placeholder(tf.string, shape=[])\n\ninput_signal = tf.contrib.ffmpeg.decode_audio(\n    tf.read_file(input_filename), file_format=\"wav\",\n    samples_per_second=44100, channel_count=2)\n\n# ...\n\noutput_signal = ...  # A 2-D tensor, [samples x channels]\nencoded_audio_data = tf.contrib.ffmpeg.encode_audio(\n    output_signal, file_format=\"wav\", samples_per_second=44100)\n\nwrite_file_op = tf.write_file(output_filename, encoded_audio_data)\n\nwith tf.Session() as sess:\n  sess.run(write_file_op, {input_filename: \"input.wav\",\n                           output_filename: \"output.wav\"})\n</code></pre>\n\n<h2>TensorFlow 2.x</h2>\n\n<p>The <code>tf.contrib</code> module has been deprecated, but you are still able to load and save audio files in 16-bit PCM WAV format using eager execution and <a href=\"https://www.tensorflow.org/api_docs/python/tf/audio\" rel=\"nofollow noreferrer\"><code>tf.audio</code></a>:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code># Returns a tuple of Tensor objects (audio, sample_rate).\ninput_signal = tf.audio.decode_wav(\"input.wav\")\n\n# Returns a Tensor of type string.\noutput_signal = tf.audio.encode_wav(input_signal[0], input_signal[1])\n</code></pre>\n"}], "owner": {"reputation": 109, "user_id": 9330321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3afe6e7194264c1e664daf1d7a925536?s=128&d=identicon&r=PG&f=1", "display_name": "Ricardo Reimao", "link": "https://stackoverflow.com/users/9330321/ricardo-reimao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1664, "favorite_count": 2, "answer_count": 1, "score": 0, "last_activity_date": 1577709913, "creation_date": 1518046412, "question_id": 48675097, "link": "https://stackoverflow.com/questions/48675097/from-audio-to-tensor-back-to-audio-in-tensorflow", "title": "From audio to tensor, back to audio in tensorflow", "body": "<p>Is there any way to directly load an audio file (wav) to a tensor in tensorflow? And then, converting the tensor into an audio file again?\nI saw some people transforming audio into spectograms, but I couldn't find anyone that could convert from the spectogram to audio. </p>\n"}, {"tags": ["python"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 8582129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea0f7b0f53fe55d76f5220a3cfb0c9c3?s=128&d=identicon&r=PG&f=1", "display_name": "N.Gamlin", "link": "https://stackoverflow.com/users/8582129/n-gamlin"}, "edited": false, "score": 0, "creation_date": 1518047055, "post_id": 48675155, "comment_id": 84348896, "body": "ok thanks for the quick answer. I&#39;m going to try this, I fund the <code>os.chdir()</code> on the internet, and quickly checked what it did, actually it opened files, so I thought that&#39;s what I need :,)"}, {"owner": {"reputation": 3670, "user_id": 7857466, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7OW0s.png?s=128&g=1", "display_name": "progmatico", "link": "https://stackoverflow.com/users/7857466/progmatico"}, "reply_to_user": {"reputation": 21, "user_id": 8582129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea0f7b0f53fe55d76f5220a3cfb0c9c3?s=128&d=identicon&r=PG&f=1", "display_name": "N.Gamlin", "link": "https://stackoverflow.com/users/8582129/n-gamlin"}, "edited": false, "score": 0, "creation_date": 1518048983, "post_id": 48675155, "comment_id": 84349411, "body": "It does not open files, some other code did. It changes working dir only."}], "tags": [], "owner": {"reputation": 3670, "user_id": 7857466, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7OW0s.png?s=128&g=1", "display_name": "progmatico", "link": "https://stackoverflow.com/users/7857466/progmatico"}, "is_accepted": false, "score": 0, "last_activity_date": 1518046748, "creation_date": 1518046748, "answer_id": 48675155, "question_id": 48675077, "link": "https://stackoverflow.com/questions/48675077/how-to-run-an-exe-file-from-c-program-files-x86-using-python/48675155#48675155", "title": "How to run an &quot;.exe&quot; file from &quot;C:\\Program Files (x86)&quot; using python?", "body": "<p>Use <code>os.system()</code> or give a folder path to change dir in <code>os.chdir()</code> not an executable file (why would you want to change into an executable? You can't do that)</p>\n"}], "owner": {"reputation": 21, "user_id": 8582129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea0f7b0f53fe55d76f5220a3cfb0c9c3?s=128&d=identicon&r=PG&f=1", "display_name": "N.Gamlin", "link": "https://stackoverflow.com/users/8582129/n-gamlin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 442, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1518046748, "creation_date": 1518046322, "question_id": 48675077, "link": "https://stackoverflow.com/questions/48675077/how-to-run-an-exe-file-from-c-program-files-x86-using-python", "title": "How to run an &quot;.exe&quot; file from &quot;C:\\Program Files (x86)&quot; using python?", "body": "<p><strong><em>Context:</em></strong> Basically I want to create a python program that asks me what Software I want to run, as soon as I start my computer.</p>\n\n<p><strong><em>Usefull code:</em></strong> <code>os.chdir(r'C:/Program Files (x86)/Google/Chrome/Application/chrome.exe')</code>. And that's the error I got : </p>\n\n<blockquote>\n  <p>FileNotFoundError                         Traceback (most recent call last)\n   in ()\n  ----> 1 os.chdir(r\"C:/Program Files (x86)/Google/Chrome/Application/chrome.exe'\")</p>\n</blockquote>\n\n<p>FileNotFoundError: [WinError 2] Das System kann die angegebene Datei nicht finden: \"C:/Program Files (x86)/Google/Chrome/Application/chrome.exe'\"</p>\n\n<p>The translation for \"Das System kann die angegebene Datei nicht finden:\" is the system was unable to find the file.</p>\n\n<p><strong><em>Problem:</em></strong> My problem is that I can't run any \".exe\", or any type of files, because of the white spaces in <em>\"C:\\Program Files (x86) \"</em>, so my question would be how can I bypass that? / What could I use to make it work?</p>\n\n<p>PS: I searched, on various forums, but this problem doesn't seem to be very common... Or I didn't search enough.</p>\n"}, {"tags": ["python", "list", "dictionary"], "comments": [{"owner": {"reputation": 3393, "user_id": 214143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61025b3df4700620a5d9099293f23a5d?s=128&d=identicon&r=PG", "display_name": "Jason Aller", "link": "https://stackoverflow.com/users/214143/jason-aller"}, "edited": false, "score": 0, "creation_date": 1518060886, "post_id": 48675076, "comment_id": 84352358, "body": "What language are you coding in?"}, {"owner": {"reputation": 27784, "user_id": 4531270, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/uw3pm.png?s=128&g=1", "display_name": "pylang", "link": "https://stackoverflow.com/users/4531270/pylang"}, "edited": false, "score": 1, "creation_date": 1518061033, "post_id": 48675076, "comment_id": 84352391, "body": "Remove the slices <code>[0]</code> and <code>[1]</code>.  What is your desired output?"}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 0, "creation_date": 1518092977, "post_id": 48675076, "comment_id": 84368349, "body": "@danny30. any clarification on what you require? if one of the answers below helped, feel free to accept one (tick on left) so that other users can see a tested solution."}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 9330296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87534d4d7f58ac3fa5f83749884ccbcf?s=128&d=identicon&r=PG&f=1", "display_name": "danny30", "link": "https://stackoverflow.com/users/9330296/danny30"}, "edited": false, "score": 1, "creation_date": 1518291867, "post_id": 48677141, "comment_id": 84448620, "body": "Thank you for the explanation! I will go back and work on this."}], "tags": [], "owner": {"reputation": 27784, "user_id": 4531270, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/uw3pm.png?s=128&g=1", "display_name": "pylang", "link": "https://stackoverflow.com/users/4531270/pylang"}, "is_accepted": false, "score": 1, "last_activity_date": 1518067617, "last_edit_date": 1518067617, "creation_date": 1518061102, "answer_id": 48677141, "question_id": 48675076, "link": "https://stackoverflow.com/questions/48675076/how-to-move-items-from-a-list-into-a-dictionary/48677141#48677141", "title": "How to move items from a list into a dictionary", "body": "<p><em>Why do you get an error?</em></p>\n\n<p>In Python, that error typically means \"You can't slice this object.\"  Strings, lists, tuples, etc are sliceable, but integers are not.  The error is raised during iteration as it comes across an integer.</p>\n\n<p><em>Options</em></p>\n\n<p>Depending on what results you want, here are some options to try:</p>\n\n<ol>\n<li>Pre-process your input, e.g. a list of pairs <code>[('one', 1), ('two', 2), ('three', 3), ('four', 4), ('five', 5), ('six', 6)]</code>.</li>\n<li>Remove the incompatible indices.</li>\n<li>Use a tool to build a dictionary from pairs, e.g. <a href=\"https://more-itertools.readthedocs.io/en/latest/api.html#more_itertools.sliced\" rel=\"nofollow noreferrer\"><code>pip install more_itertools</code></a>.</li>\n</ol>\n\n<p><em>Solution</em></p>\n\n<p>I suspect you want results similar to option 3:</p>\n\n<pre><code>import more_itertools as mit\n\n\nlst = ['one', 1, 'two', 2, 'three', 3, 'four', 4, 'five', 5, 'six', 6]\n{k: v for k, v in mit.sliced(lst, 2)}\n# {'five': 5, 'four': 4, 'one': 1, 'six': 6, 'three': 3, 'two': 2}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 19, "user_id": 9330296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87534d4d7f58ac3fa5f83749884ccbcf?s=128&d=identicon&r=PG&f=1", "display_name": "danny30", "link": "https://stackoverflow.com/users/9330296/danny30"}, "edited": false, "score": 0, "creation_date": 1518291928, "post_id": 48677293, "comment_id": 84448636, "body": "I did some research and found the collections mod. I will apply that in the furture. Thank you for the response."}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "reply_to_user": {"reputation": 19, "user_id": 9330296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87534d4d7f58ac3fa5f83749884ccbcf?s=128&d=identicon&r=PG&f=1", "display_name": "danny30", "link": "https://stackoverflow.com/users/9330296/danny30"}, "edited": false, "score": 0, "creation_date": 1518292036, "post_id": 48677293, "comment_id": 84448665, "body": "@danny30, that&#39;s great. feel free to upvote or accept (tick on left) so others know this works."}], "tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": false, "score": 0, "last_activity_date": 1518062308, "creation_date": 1518062308, "answer_id": 48677293, "question_id": 48675076, "link": "https://stackoverflow.com/questions/48675076/how-to-move-items-from-a-list-into-a-dictionary/48677293#48677293", "title": "How to move items from a list into a dictionary", "body": "<p>Use <code>collections.defaultdict</code>, a subclass of <code>dict</code>. This sets the default value for <em>any</em> key to an empty list and allows you to easily append. Below is a guess of what you are looking for:</p>\n\n<pre><code>from collections import defaultdict\n\nl_s = ['one', 1, 'two', 2, 'three', 3, 'four', 4, 'five', 5, 'six', 6]\n\nd = defaultdict(list)\n\nfor txt, num in zip(l_s[::2], l_s[1::2]):\n    d[txt].append(num)\n\n# defaultdict(list,\n#             {'five': [5],\n#              'four': [4],\n#              'one': [1],\n#              'six': [6],\n#              'three': [3],\n#              'two': [2]})\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93705, "user_id": 610569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0e9087f2672b0e4f28d91266acf9ce57?s=128&d=identicon&r=PG", "display_name": "alvas", "link": "https://stackoverflow.com/users/610569/alvas"}, "is_accepted": false, "score": 1, "last_activity_date": 1518062386, "creation_date": 1518062386, "answer_id": 48677303, "question_id": 48675076, "link": "https://stackoverflow.com/questions/48675076/how-to-move-items-from-a-list-into-a-dictionary/48677303#48677303", "title": "How to move items from a list into a dictionary", "body": "<p>Something like this?</p>\n\n<p>Using <a href=\"https://stackoverflow.com/questions/11350342/way-to-iterate-two-items-at-a-time-in-a-list\">Way to iterate two items at a time in a list?</a> and dictionary comprehension:</p>\n\n<pre><code>&gt;&gt; l_s = ['one', 1, 'two', 2, 'three', 3, 'four', 4, 'five', 5, 'six', 6]\n&gt;&gt;&gt; {k:v for k, v in zip(*[iter(l_s)]*2)}\n{'six': 6, 'three': 3, 'two': 2, 'four': 4, 'five': 5, 'one': 1}\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 9330296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87534d4d7f58ac3fa5f83749884ccbcf?s=128&d=identicon&r=PG&f=1", "display_name": "danny30", "link": "https://stackoverflow.com/users/9330296/danny30"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 903, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1518067617, "creation_date": 1518046320, "last_edit_date": 1518062124, "question_id": 48675076, "link": "https://stackoverflow.com/questions/48675076/how-to-move-items-from-a-list-into-a-dictionary", "title": "How to move items from a list into a dictionary", "body": "<p>I am trying to move items from a list into a dictionary but I get the following error:</p>\n\n<blockquote>\n  <p>'int' object is not subscriptable</p>\n</blockquote>\n\n<p>Here is my code:</p>\n\n<pre><code>l_s = ['one', 1, 'two', 2, 'three', 3, 'four', 4, 'five', 5, 'six', 6]\nd = {}\n\nfor line in l_s:\n    if line[0] in d:\n        d[line[0]].append(line[1])\n    else:\n        d[line[0]] = [line[1]]\n\nprint(d)\n</code></pre>\n\n<p>How would I go about changing it?</p>\n"}, {"tags": ["python", "python-3.x", "tkinter"], "answers": [{"tags": [], "owner": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "is_accepted": true, "score": 0, "last_activity_date": 1518054764, "creation_date": 1518054764, "answer_id": 48676231, "question_id": 48675068, "link": "https://stackoverflow.com/questions/48675068/change-bg-color/48676231#48676231", "title": "Change Bg color", "body": "<p>In order to change the colors of the buttons, you need to have access to the button objects. This means you need to add some code to your <code>buttons()</code> method to save the objects as a instance variable: </p>\n\n<pre><code>self.btns = [Button(), b1, b2, b3, b4, b5, b6, b7, b8, b9]\n</code></pre>\n\n<p>Now you can add this to your <code>move()</code> method to loop through the values and the colors and set each one: </p>\n\n<pre><code>for btn, color in zip(self.btns, self.cells):\n    btn.config(bg=color)\n</code></pre>\n\n<p>Note you will have to use a valid color for the dummy color in your list, not <code>\"\"</code>.</p>\n"}], "owner": {"reputation": 11, "user_id": 9330259, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zqCVu.jpg?s=128&g=1", "display_name": "NossDero", "link": "https://stackoverflow.com/users/9330259/nossdero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 48676231, "answer_count": 1, "score": 0, "last_activity_date": 1518102635, "creation_date": 1518046306, "last_edit_date": 1518102635, "question_id": 48675068, "link": "https://stackoverflow.com/questions/48675068/change-bg-color", "title": "Change Bg color", "body": "<p>I'm quite new to coding and trying to make a tic-tac-toe game with Python.\nSo far it works fine, but i'm having trouble making the buttons change colors.</p>\n\n<p>I want the buttons to look at <code>Cells[]</code> for bg color after <code>move()</code>.\nMaybe that I started with this all wrong. But now I'm clueless.</p>\n\n<p>I cant find any refresh function that I managed to get to work as I wanted.</p>\n\n<pre><code>from tkinter import *\n\n\nclass Board:\n    def __init__(self):\n\n        self.root =Tk()\n        self.root.minsize(300,300)\n\n        self.cells = [\"\", \"white\", \"white\", \"white\", \n                          \"white\", \"white\", \"white\",\n                          \"white\", \"white\", \"white\"]\n\n        self.count = 0  #keeping count of next color\n\n\n\n#Player makes a move:\n    def move(self, cell_coice):\n        x = cell_coice  \n\n        if self.count == 0:\n            if self.cells[x] == \"white\":\n                self.cells[x] = \"red\"\n                print (self.cells)          #remove\n                self.count = 1\n            else:\n                self.count = 1\n                print (self.cells)          #remove\n        else:\n            if self.cells[x] == \"white\":\n                self.cells[x] = \"blue\"\n                print (self.cells)          #remove\n                self.count = 0\n            else:\n                self.coint = 0\n                print (self.cells)          #remove\n\n\n\n\n    def buttons(self):\n\n        b1 = Button(self.root, bg=self.cells[1], command=lambda:self.move(1))\n        b1.grid(row=1, column=1, sticky=NSEW)\n\n        b2 = Button(self.root, bg=self.cells[2], command=lambda:self.move(2))\n        b2.grid(row=1, column=2, sticky=NSEW)\n\n        b3 = Button(self.root, bg=self.cells[3], command=lambda:self.move(3))\n        b3.grid(row=1, column=3, sticky=NSEW)\n\n        b4 = Button(self.root, bg=self.cells[4], command=lambda:self.move(4))\n        b4.grid(row=2   , column=1, sticky=NSEW)\n\n        b5 = Button(self.root, bg=self.cells[5], command=lambda:self.move(5))\n        b5.grid(row=2   , column=2, sticky=NSEW)\n\n        b6 = Button(self.root, bg=self.cells[6], command=lambda:self.move(6))\n        b6.grid(row=2   , column=3, sticky=NSEW)\n\n        b7 = Button(self.root, bg=self.cells[7], command=lambda:self.move(7))\n        b7.grid(row=3, column=1, sticky=NSEW)\n\n        b8 = Button(self.root, bg=self.cells[8], command=lambda:self.move(8))\n        b8.grid(row=3, column=2, sticky=NSEW)\n\n        b9 = Button(self.root, bg=self.cells[9], command=lambda:self.move(9))\n        b9.grid(row=3, column=3, sticky=NSEW)\n\n\n        Grid.rowconfigure(self.root, 1, weight=1)\n        Grid.columnconfigure(self.root, 1, weight=1)\n        Grid.rowconfigure(self.root, 2, weight=1)\n        Grid.columnconfigure(self.root, 2, weight=1)\n        Grid.rowconfigure(self.root, 3, weight=1)\n        Grid.columnconfigure(self.root, 3, weight=1)\n\n\n\nOpenBoard = Board()\nOpenBoard.buttons()\nOpenBoard.root.mainloop()\n</code></pre>\n"}, {"tags": ["javascript", "python", "gojs"], "answers": [{"tags": [], "owner": {"reputation": 3593, "user_id": 5082978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1t9s6.png?s=128&g=1", "display_name": "Walter Northwoods", "link": "https://stackoverflow.com/users/5082978/walter-northwoods"}, "is_accepted": true, "score": 1, "last_activity_date": 1519244386, "creation_date": 1519244386, "answer_id": 48914766, "question_id": 48675033, "link": "https://stackoverflow.com/questions/48675033/gojs-dinamical-dropdown-choices-for-node-and-link-text/48914766#48914766", "title": "gojs dinamical dropdown choices for node and link text", "body": "<p>I seem to have missed this before.  Here's some code that answers your question by implementing it:</p>\n\n<pre><code>function init() {\n  var $ = go.GraphObject.make;\n\n  myDiagram =\n    $(go.Diagram, \"myDiagramDiv\",\n      {\n        initialContentAlignment: go.Spot.Center,\n        \"undoManager.isEnabled\": true,\n        \"ModelChanged\": function(e) {     // just for demonstration purposes,\n          if (e.isTransactionFinished) {  // show the model data in the page's TextArea\n            document.getElementById(\"mySavedModel\").textContent = e.model.toJson();\n          }\n          if (e.change === go.ChangedEvent.Remove) {\n            if (e.modelChange === \"linkDataArray\") {\n              var linkdata = e.oldValue;\n              var oldstr = linkdata.text;\n              if (!oldstr) return;\n              var linkchoices = e.model.modelData.linkchoices;\n              var idx = linkchoices.indexOf(oldstr);\n              if (idx &lt; 0) {\n                console.log(\"deletion adding link choice: \" + oldstr);\n                var newlinkchoices = Array.prototype.slice.call(linkchoices);\n                newlinkchoices.push(oldstr);\n                e.model.set(e.model.modelData, \"linkchoices\", newlinkchoices);\n              }\n            } else if (e.modelChange === \"nodeDataArray\") {\n              var nodedata = e.oldValue;\n              var oldstr = nodedata.text;\n              if (!oldstr) return;\n              var nodechoices = e.model.modelData.nodechoices;\n              var idx = nodechoices.indexOf(oldstr);\n              if (idx &lt; 0) {\n                console.log(\"deletion adding node choice: \" + oldstr);\n                var newnodechoices = Array.prototype.slice.call(nodechoices);\n                newnodechoices.push(oldstr);\n                e.model.set(e.model.modelData, \"nodechoices\", newnodechoices);\n              }\n            }\n          }\n        }\n      });\n\n  myDiagram.nodeTemplate =\n    $(go.Node, \"Auto\",\n      $(go.Shape,\n        { fill: \"white\", portId: \"\", fromLinkable: true, toLinkable: true, cursor: \"pointer\" },\n        new go.Binding(\"fill\", \"color\")),\n      $(go.TextBlock,\n        {\n          margin: 8,\n          editable: true,\n          textEditor: window.TextEditorSelectBox, // defined in extensions/textEditorSelectBox.js\n          textEdited: function(tb, oldstr, newstr) {\n            if (oldstr !== newstr) {\n              console.log(\"changing from \" + oldstr + \" to \" + newstr);\n              var model = tb.diagram.model;\n              var nodechoices = model.modelData.nodechoices;\n              if (!nodechoices) {\n                nodechoices = [];\n                model.set(model.modelData, \"nodechoices\", nodechoices);\n              }\n              var idx = nodechoices.indexOf(newstr);\n              if (idx &gt;= 0) {\n                console.log(\"removing node choice \" + idx + \": \" + newstr);\n                model.removeArrayItem(nodechoices, idx);\n              }\n              if (oldstr) {\n                console.log(\"  adding node choice \" + oldstr);\n                model.addArrayItem(nodechoices, oldstr);\n              }\n            }\n          }\n        },\n        new go.Binding(\"text\").makeTwoWay(),\n        new go.Binding(\"choices\", \"nodechoices\").ofModel())\n    );\n\n  myDiagram.linkTemplate =\n    $(go.Link,\n      $(go.Shape),\n      $(go.Shape, { toArrow: \"OpenTriangle\" }),\n      $(go.TextBlock,\n        {\n          background: \"white\",\n          editable: true,\n          textEditor: window.TextEditorSelectBox, // defined in extensions/textEditorSelectBox.js\n          textEdited: function(tb, oldstr, newstr) {\n            if (oldstr !== newstr) {\n              console.log(\"changing from \" + oldstr + \" to \" + newstr);\n              var model = tb.diagram.model;\n              var linkchoices = model.modelData.linkchoices;\n              if (!linkchoices) {\n                linkchoices = [];\n                model.set(model.modelData, \"linkchoices\", linkchoices);\n              }\n              var idx = linkchoices.indexOf(newstr);\n              if (idx &gt;= 0) {\n                console.log(\"removing link choice \" + idx + \": \" + newstr);\n                model.removeArrayItem(linkchoices, idx);\n              }\n              if (oldstr) {\n                console.log(\"  adding link choice \" + oldstr);\n                model.addArrayItem(linkchoices, oldstr);\n              }\n            }\n          }\n        },\n        new go.Binding(\"text\").makeTwoWay(),\n        new go.Binding(\"choices\", \"linkchoices\").ofModel())\n    );\n\n  myDiagram.model = new go.GraphLinksModel(\n  [\n    { key: 1, text: \"Alpha\", color: \"lightblue\" },\n    { key: 2, text: \"Beta\", color: \"orange\" },\n    { key: 3, text: \"Gamma\", color: \"lightgreen\" },\n    { key: 4, text: \"Delta\", color: \"pink\" }\n  ],\n  [\n    { from: 1, to: 2, text: \"one\" },\n    { from: 1, to: 3, text: \"two\" },\n    { from: 3, to: 4, text: \"three\" }\n  ]);\n  myDiagram.model.set(myDiagram.model.modelData, \"nodechoices\", [\"Epsilon\"]);\n  myDiagram.model.set(myDiagram.model.modelData, \"linkchoices\", [\"four\"]);\n}\n</code></pre>\n"}], "owner": {"reputation": 369, "user_id": 5674883, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/277dc074ac3e89420003b4185f8e06f5?s=128&d=identicon&r=PG&f=1", "display_name": "Teemo", "link": "https://stackoverflow.com/users/5674883/teemo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 665, "favorite_count": 0, "accepted_answer_id": 48914766, "answer_count": 1, "score": 0, "last_activity_date": 1519244386, "creation_date": 1518046072, "question_id": 48675033, "link": "https://stackoverflow.com/questions/48675033/gojs-dinamical-dropdown-choices-for-node-and-link-text", "title": "gojs dinamical dropdown choices for node and link text", "body": "<p>I want to make custom choices dropdown for users to edit node and link text. </p>\n\n<p><a href=\"https://i.stack.imgur.com/r4ZEr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/r4ZEr.png\" alt=\"enter image description here\"></a></p>\n\n<p>So far, I used this code to make user select nodes and links text selectable in dropdown list:</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=\"en\"&gt;\n&lt;head&gt;\n&lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1\"&gt;\n&lt;title&gt;State Chart&lt;/title&gt;\n&lt;meta name=\"description\" content=\"A finite state machine chart with editable and interactive features.\" /&gt;\n&lt;meta charset=\"UTF-8\"&gt;\n&lt;script src=\"https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js\"&gt;&lt;/script&gt;\n&lt;link href=\"http://getbootstrap.com/dist/css/bootstrap.min.css\" rel=\"stylesheet\"&gt;\n\n&lt;script src=\"{{url_for('static', filename='go.js')}}\"&gt;&lt;/script&gt;\n\n&lt;!-- custom text editors --&gt;\n&lt;script src=\"{{url_for('static', filename='TextEditorSelectBox.js')}}\"&gt;&lt;/script&gt;\n&lt;script src=\"{{url_for('static', filename='TextEditorRadioButtons.js')}}\"&gt;&lt;/script&gt;\n&lt;script src=\"{{url_for('static', filename='TextEditorSelectBox.js')}}\"&gt;&lt;/script&gt;\n\n\n&lt;script src=\"{{url_for('static', filename='DataInspector.js')}}\"&gt;&lt;/script&gt;\n\n&lt;link href=\"https://gojs.net/latest/extensions/DataInspector.css\" rel=\"stylesheet\"&gt;\n&lt;link href=\"{{url_for('static', filename='DataInspector.css')}}\" rel=\"stylesheet\"&gt;\n\n\n&lt;link href=\"https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css\" rel=\"stylesheet\"&gt; \n&lt;style&gt;\n\nbody {\n  overflow-x: hidden;\n}\n\n#wrapper {\n  padding-left: 0;\n  -webkit-transition: all 0.5s ease;\n  -moz-transition: all 0.5s ease;\n  -o-transition: all 0.5s ease;\n  transition: all 0.5s ease;\n}\n\n#wrapper.toggled {\n  padding-left: 250px;\n}\n\n#sidebar-wrapper {\n  z-index: 1000;\n  position: fixed;\n  left: 250px;\n  width: 0;\n  height: 100%;\n  margin-left: -250px;\n  overflow-y: auto;\n  background: #000;\n  -webkit-transition: all 0.5s ease;\n  -moz-transition: all 0.5s ease;\n  -o-transition: all 0.5s ease;\n  transition: all 0.5s ease;\n}\n\n#wrapper.toggled #sidebar-wrapper {\n  width: 250px;\n}\n\n#page-content-wrapper {\n  width: 100%;\n  position: absolute;\n  padding: 15px;\n}\n\n#wrapper.toggled #page-content-wrapper {\n  position: absolute;\n  margin-right: -250px;\n}\n\n\n/* Sidebar Styles */\n\n.sidebar-nav {\n  position: absolute;\n  top: 0;\n  width: 250px;\n  margin: 0;\n  padding: 0;\n  list-style: none;\n}\n\n.sidebar-nav li {\n  text-indent: 20px;\n  line-height: 40px;\n}\n\n.sidebar-nav li a {\n  display: block;\n  text-decoration: none;\n  color: #999999;\n}\n\n.sidebar-nav li a:hover {\n  text-decoration: none;\n  color: #fff;\n  background: rgba(255, 255, 255, 0.2);\n}\n\n.sidebar-nav li a:active, .sidebar-nav li a:focus {\n  text-decoration: none;\n}\n\n.sidebar-nav&gt;.sidebar-brand {\n  height: 65px;\n  font-size: 18px;\n  line-height: 60px;\n}\n\n.sidebar-nav&gt;.sidebar-brand a {\n  color: #999999;\n}\n\n.sidebar-nav&gt;.sidebar-brand a:hover {\n  color: #fff;\n  background: none;\n}\n\n@media(min-width:768px) {\n  #wrapper {\n    padding-left: 0;\n  }\n  #wrapper.toggled {\n    padding-left: 250px;\n  }\n  #sidebar-wrapper {\n    width: 0;\n  }\n  #wrapper.toggled #sidebar-wrapper {\n    width: 250px;\n  }\n  #page-content-wrapper {\n    padding: 20px;\n    position: relative;\n  }\n  #wrapper.toggled #page-content-wrapper {\n    position: relative;\n    margin-right: 0;\n  }\n}\n\n&lt;/style&gt;\n&lt;script id=\"code\"&gt;\n\n    var nodeChoices = ['choice 1', 'choice 2', 'choice 3', 'choice 4', 'choice 5'];\n    const originalNodeChoices = ['choice 1', 'choice 2', 'choice 3', 'choice 4', 'choice 5'];\n    var linkChoices = ['link choice 1', 'link choice 2', 'link choice 3', 'link choice 4', 'link choice 5'];\n    const originalLinkChoices = ['link choice 1', 'link choice 2', 'link choice 3', 'link choice 4', 'link choice 5'];\n\n    function init() {\n\n        var $ = go.GraphObject.make;\n        myDiagram =\n        $(go.Diagram, \"myDiagramDiv\",  // must name or refer to the DIV HTML element\n        {\n            // start everything in the middle of the viewport\n            initialContentAlignment: go.Spot.Center,\n            // have mouse wheel events zoom in and out instead of scroll up and down\n            \"toolManager.mouseWheelBehavior\": go.ToolManager.WheelZoom,\n            // support double-click in background creating a new node\n            \"clickCreatingTool.archetypeNodeData\": { text: \"new node\" },\n            // enable undo &amp; redo\n            \"textEditingTool.defaultTextEditor\": window.TextEditorSelectBox,\n            \"undoManager.isEnabled\": true,\n            \"layout\": new go.ForceDirectedLayout(),\n            \"ModelChanged\": function(e) {\n                //console.log(\"Diagram model changed!\");\n\n              if (e.change === go.ChangedEvent.Remove &amp;&amp; e.modelChange === \"linkDataArray\") {\n                console.log(\"eee its linkDataArray\");\n                console.log(e);\n                var linkdata = e.oldValue;\n                console.log(\"linkdata\");\n                console.log(linkdata);\n                var oldstr = linkdata.text;\n                console.log(\"oldstr\");\n                console.log(oldstr);\n\n                if (!oldstr) return;\n                var customModelData = e.model.modelData.choices;\n                var choices = e.model.modelData.choices.linkChoices;\n                console.log(\"choices\");\n                console.log(choices);\n                var idx = choices.indexOf(oldstr);\n                if (idx &lt; 0) {\n                  console.log(\"adding choice: \" + oldstr);\n                  var newchoices = Array.prototype.slice.call(choices);\n                  newchoices.push(oldstr);\n                  e.model.set(e.model.modelData, \"choices\", newchoices);\n                }\n              }else if(e.change === go.ChangedEvent.Remove &amp;&amp; e.modelChange === \"nodeDataArray\"){\n                    console.log(\"eee its nodeDataArray\");\n              }\n              /*\n              else{\n                console.log(\"elseeeeeee111!\");\n                console.log(\"e.change\");\n                console.log(e.change);\n                console.log(\"e.modelChange\");\n                console.log(e.modelChange);\n              }*/\n            }\n        });\n\n        //myDiagram.model.set(myDiagram.model.modelData, \"choices\", JSON.parse('{{ link_choices | tojson | safe}}'));\n        //myDiagram.model.set(myDiagram.model.modelData, \"choices\", [\"one\", \"two\", \"three\"]);\n        console.log(\"myDiagram.model.modelData\");\n        console.log(myDiagram.model.modelData);\n        console.log(\"myDiagram.model.modelData.choices\");\n        console.log(myDiagram.model.modelData.choices);\n\n\n        // when the document is modified, add a \"*\" to the title and enable the \"Save\" button\n        myDiagram.addDiagramListener(\"Modified\", function(e) {\n            var button = document.getElementById(\"SaveButton\");\n            if (button) button.disabled = !myDiagram.isModified;\n            var idx = document.title.indexOf(\"*\");\n            if (myDiagram.isModified) {\n                if (idx &lt; 0) document.title += \"*\";\n            } \n            else {\n                if (idx &gt;= 0) document.title = document.title.substr(0, idx);\n            }\n        });\n\n        myDiagram.addDiagramListener(\"textEdited\", function(e) {\n            console.log(\"Text is edited\");\n            console.log(e);\n\n            //CHECK IF LINK,\n            //IF YES REMOVE THAT OPTION FROM LIST\n\n        });\n\n        myDiagram.addDiagramListener(\"SelectionDeleting\", function(e) {\n            console.log(\"inside SelectionDeleting\");\n            console.log(e);\n\n            //CHECK IF LINK,\n            //IF YES PUT THAT OPTION BACK IN OPTION LIST\n\n        });\n\n            // define the Node template\n        myDiagram.nodeTemplate =\n          $(go.Node, \"Auto\",\n            new go.Binding(\"location\", \"loc\", go.Point.parse).makeTwoWay(go.Point.stringify),\n            // define the node's outer shape, which will surround the TextBlock\n            $(go.Shape, \"RoundedRectangle\",\n              {\n                parameter1: 20,  // the corner has a large radius\n                fill: $(go.Brush, \"Linear\", { 0: \"rgb(254, 201, 0)\", 1: \"rgb(254, 162, 0)\" }),\n                stroke: null,\n                portId: \"\",  // this Shape is the Node's port, not the whole Node\n                fromLinkable: true, fromLinkableDuplicates: true,\n                toLinkable: true, toLinkableDuplicates: true,\n                cursor: \"pointer\"\n              }),\n            $(go.TextBlock,\n              {\n                font: \"bold 11pt helvetica, bold arial, sans-serif\",\n                editable: true,  // editing the text automatically updates the model data\n                //textEditor: window.TextEditorRadioButtons, // defined in textEditorRadioButtons.js\n                // this specific TextBlock has its own choices:\n\n                textEditor: window.TextEditorRadioButtons,\n                textEdited: function(tb, oldstr, newstr) {\n                    console.log(\"textEdited nodeeeeeeeeeeeeeeeeeeeeeeeee!!!\");\n                  var choices = tb.diagram.model.modelData.choices.nodeChoices;\n                  console.log(\"choices\");\n                  console.log(choices);\n                  console.log(\"newstr\");\n                  console.log(newstr);\n                  console.log(\"oldstr\");\n                  console.log(oldstr);\n                  var idx = choices.indexOf(newstr);\n                  if (idx &gt;= 0 &amp;&amp; oldstr !== newstr ) {\n                    console.log(choices);\n                    console.log(\"choices\");\n                    console.log(choices);\n                    console.log(\"removing choice \" + idx + \": \" + newstr);\n                    var newchoices = Array.prototype.slice.call(choices);\n\n                    newchoices.splice(idx, 1);\n                    console.log(\"after remove\");\n                    console.log(newchoices);\n                    var currentChoicesFromModel = tb.diagram.model.modelData.choices;\n                    console.log(\"currentChoicesFromModel\");\n                    console.log(currentChoicesFromModel);\n                    currentChoicesFromModel.nodeChoices = newchoices;\n                    console.log(\"currentChoicesFromModel after update: \");\n                    console.log(currentChoicesFromModel);\n                    tb.diagram.model.set(tb.diagram.model.modelData, \"choices\", currentChoicesFromModel);\n                    //tb.editable = false;  // don't allow choice again\n                  }else{\n                        console.log(\"elseeeeee\");\n                  }\n                },\n                //choices: JSON.parse('{{ choices | tojson | safe}}')\n                choices: nodeChoices\n              },\n            new go.Binding(\"text\").makeTwoWay())\n        );\n\n        myDiagram.nodeTemplate.selectionAdornmentTemplate =\n        $(go.Adornment, \"Spot\",\n            $(go.Panel, \"Auto\",\n            $(go.Shape, { stroke: \"dodgerblue\", strokeWidth: 2, fill: null }),\n            $(go.Placeholder)\n        ),\n        $(go.Panel, \"Horizontal\",\n            { alignment: go.Spot.Top, alignmentFocus: go.Spot.Bottom },\n            $(\"Button\",\n                { click: editText },  // defined below, to support editing the text of the node\n                $(go.TextBlock, \"t\",\n                { font: \"bold 10pt sans-serif\", desiredSize: new go.Size(15, 15), textAlign: \"center\" })\n            ),\n            $(\"Button\",\n            { // drawLink is defined below, to support interactively drawing new links\n                click: drawLink,  // click on Button and then click on target node\n                actionMove: drawLink  // drag from Button to the target node\n            },\n            $(go.Shape,\n                { geometryString: \"M0 0 L8 0 8 12 14 12 M12 10 L14 12 12 14\" })\n            ),\n            $(\"Button\",\n            {\n                actionMove: dragNewNode,  // defined below, to support dragging from the button\n                _dragData: { text: \"?????\", color: \"lightgray\" },  // node data to copy\n                click: clickNewNode  // defined below, to support a click on the button\n            },\n            $(go.Shape,\n                { geometryString: \"M0 0 L3 0 3 10 6 10 x F1 M6 6 L14 6 14 14 6 14z\", fill: \"gray\" })\n          )\n        )\n      );\n\n    //myDiagram.model.set(myDiagram.model.modelData, \"choices\", JSON.parse('{{ link_choices | tojson | safe}}'));\n    //myDiagram.model.set(myDiagram.model.modelData, \"choices\", [\"one\", \"two\", \"three\"]);\n    console.log(\"myDiagram.model.modelData\");\n    console.log(myDiagram.model.modelData);\n    console.log(myDiagram.model.modelData.choices);\n\n    function editText(e, button) {\n        //console.log(e);\n\n      var node = button.part.adornedPart;\n      console.log(\"node\");\n      //console.log(node);\n      e.diagram.commandHandler.editTextBlock(node.findObject(\"TEXTBLOCK\"));\n      //$(\"#nodeText\").val(node.findObject(\"TEXTBLOCK\"));\n    }\n\n    function drawLink(e, button) {\n      var node = button.part.adornedPart;\n      var tool = e.diagram.toolManager.linkingTool;\n      tool.startObject = node.port;\n      e.diagram.currentTool = tool;\n      tool.doActivate();\n    }\n\n   // used by both clickNewNode and dragNewNode to create a node and a link\n    // from a given node to the new node\n    function createNodeAndLink(data, fromnode) {\n        var diagram = fromnode.diagram;\n        var model = diagram.model;\n        var nodedata = model.copyNodeData(data);\n        model.addNodeData(nodedata);\n        var newnode = diagram.findNodeForData(nodedata);\n        var linkdata = model.copyLinkData({});\n        model.setFromKeyForLinkData(linkdata, model.getKeyForNodeData(fromnode.data));\n        model.setToKeyForLinkData(linkdata, model.getKeyForNodeData(newnode.data));\n        model.addLinkData(linkdata);\n        diagram.select(newnode);\n        return newnode;\n    }\n\n    // the Button.click event handler, called when the user clicks the \"N\" button\n    function clickNewNode(e, button) {\n        var data = button._dragData;\n        if (!data) return;\n        e.diagram.startTransaction(\"Create Node and Link\");\n        var fromnode = button.part.adornedPart;\n        var newnode = createNodeAndLink(button._dragData, fromnode);\n        newnode.location = new go.Point(fromnode.location.x + 200, fromnode.location.y);\n        e.diagram.commitTransaction(\"Create Node and Link\");\n    }\n\n    // the Button.actionMove event handler, called when the user drags within the \"N\" button\n    function dragNewNode(e, button) {\n        var tool = e.diagram.toolManager.draggingTool;\n        if (tool.isBeyondDragSize()) {\n            var data = button._dragData;\n            if (!data) return;\n            e.diagram.startTransaction(\"button drag\");  // see doDeactivate, below\n            var newnode = createNodeAndLink(data, button.part.adornedPart);\n            newnode.location = e.diagram.lastInput.documentPoint;\n            // don't commitTransaction here, but in tool.doDeactivate, after drag operation finished\n            // set tool.currentPart to a selected movable Part and then activate the DraggingTool\n            tool.currentPart = newnode;\n            e.diagram.currentTool = tool;\n            tool.doActivate();\n        }\n    }\n\n    // using dragNewNode also requires modifying the standard DraggingTool so that it\n    // only calls commitTransaction when dragNewNode started a \"button drag\" transaction;\n    // do this by overriding DraggingTool.doDeactivate:\n    var tool = myDiagram.toolManager.draggingTool;\n    tool.doDeactivate = function() {\n        // commit \"button drag\" transaction, if it is ongoing; see dragNewNode, above\n        if (tool.diagram.undoManager.nestedTransactionNames.elt(0) === \"button drag\") {\n            tool.diagram.commitTransaction();\n        }\n        go.DraggingTool.prototype.doDeactivate.call(tool);  // call the base method\n    };\n\n    // replace the default Link template in the linkTemplateMap\n    myDiagram.linkTemplate =\n        $(go.Link,  // the whole link panel\n        {\n            curve: go.Link.Bezier, \n            adjusting: go.Link.Stretch,\n            reshapable: true, \n            relinkableFrom: true, \n            relinkableTo: true,\n            toShortLength: 3\n        },\n        new go.Binding(\"points\").makeTwoWay(),\n        new go.Binding(\"curviness\"),\n        $(go.Shape,  // the link shape\n            { strokeWidth: 1.5 }),\n        $(go.Shape,  // the arrowhead\n            { toArrow: \"standard\", stroke: null }),\n        $(go.Panel, \"Auto\",\n            $(go.Shape,  // the label background, which becomes transparent around the edges\n            {\n                fill: $(go.Brush, \"Radial\", { 0: \"rgb(240, 240, 240)\", 0.3: \"rgb(240, 240, 240)\", 1: \"rgba(240, 240, 240, 0)\" }),\n                stroke: null\n            }),\n            $(go.TextBlock,\n              {\n                background: \"white\",\n                editable: true,\n                textEditor: window.TextEditorSelectBox, // defined in extensions/textEditorSelectBox.js\n                textEdited: function(tb, oldstr, newstr) {\n                  var choices = tb.diagram.model.modelData.choices.linkChoices;\n                  console.log(\"choices\");\n                  console.log(choices);\n                  console.log(\"newstr\");\n                  console.log(newstr);\n                  console.log(\"oldstr\");\n                  console.log(oldstr);\n                  var idx = choices.indexOf(newstr);\n                  if (idx &gt;= 0 &amp;&amp; oldstr !== newstr ) {\n                    console.log(choices);\n                    console.log(\"choices\");\n                    console.log(choices);\n                    console.log(\"removing choice \" + idx + \": \" + newstr);\n                    var newchoices = Array.prototype.slice.call(choices);\n                    newchoices.splice(idx, 1);\n                    tb.diagram.model.set(tb.diagram.model.modelData.choices.linkChoices, \"choices\", newchoices);\n                    //tb.editable = false;  // don't allow choice again\n                  }else{\n                        console.log(\"elseeeeee\");\n                  }\n                }\n              },\n            // editing the text automatically updates the model data\n            //new go.Binding(\"text\"),\n            new go.Binding(\"text\").makeTwoWay(),\n            new go.Binding(\"choices\").ofModel())\n        )\n    );\n\n\n    var inspector = new Inspector('myInspectorDiv', myDiagram,\n    {\n        // uncomment this line to only inspect the named properties below instead of all properties on each object:\n        // includesOwnProperties: false,\n        properties: {\n            \"text\": { },\n            // an example of specifying the type\n            \"password\": { show: Inspector.showIfPresent, type: 'password' },\n            // key would be automatically added for nodes, but we want to declare it read-only also:\n            \"key\": { readOnly: true, show: Inspector.showIfPresent },\n            // color would be automatically added for nodes, but we want to declare it a color also:\n            \"color\": { show: Inspector.showIfPresent, type: 'color' },\n            // Comments and LinkComments are not in any node or link data (yet), so we add them here:\n            \"Comments\": { show: Inspector.showIfNode  },\n            \"flag\": { show: Inspector.showIfNode, type: 'checkbox' },\n            \"LinkComments\": { show: Inspector.showIfLink },\n            \"isGroup\": { readOnly: true, show: Inspector.showIfPresent }\n        }\n    });\n\n    // read in the JSON data from flask\n    loadGraphData();\n\n    }\n\n    function loadGraphData() {\n        var graphDataString = JSON.parse('{{ diagramData | tojson | safe}}');\n        //console.log(\"graphDataString\");\n        //console.log(graphDataString);\n\n        var allChoices = JSON.parse('{{ allChoices | tojson | safe}}');\n        console.log(\"allChoices\");\n        console.log(allChoices);\n\n        myDiagram.model = go.Model.fromJson(graphDataString);\n        //myDiagram.model.set(myDiagram.model.modelData, \"choices\", [\"one\", \"two\", \"three\"]);\n\n        var customModelData = {\n            \"linkChoices\": linkChoices, \"nodeChoices\": nodeChoices\n        };\n\n        myDiagram.model.set(myDiagram.model.modelData, \"choices\", allChoices);\n        //myDiagram.model.set(myDiagram.model.modelData, \"choices\", JSON.parse('{{ link_choices | tojson | safe}}'));\n        //myDiagram.model.set(myDiagram.model.modelData, \"choices\", customModelData);\n        console.log(\"whole model modelData\");\n        console.log(myDiagram.model.modelData);\n    }\n\n    function saveGraphData(form, event) {\n        console.log(\"inside saveGraphData\");\n        event.preventDefault();\n\n        document.getElementById(\"mySavedModel\").value = myDiagram.model.toJson();\n        form.submit();\n    }\n\n    function zoomToFit(){\n        console.log(\"inside zoomToFit\");\n        myDiagram.zoomToRect(myDiagram.documentBounds);\n    }\n\n    function zoomIn(){\n        console.log(\"inside zoomIn\");\n        myDiagram.commandHandler.increaseZoom();\n    }\n    function zoomOut(){\n        console.log(\"inside zoomOut\");\n        myDiagram.commandHandler.decreaseZoom();\n    }\n\n&lt;/script&gt;\n&lt;/head&gt;\n&lt;body onload=\"init()\"&gt;\n\n\n\n    &lt;div id=\"wrapper\"&gt;\n\n        &lt;!-- Sidebar --&gt;\n        &lt;div id=\"sidebar-wrapper\"&gt;\n            &lt;ul class=\"sidebar-nav\"&gt;\n                &lt;li class=\"sidebar-brand\"&gt; &lt;a href=\"#\"&gt; CUSTOM CHOICES MODE &lt;/a&gt;  &lt;/li&gt;\n\n\n                &lt;li&gt; &lt;a href=\"{{ url_for('main') }}\"&gt;Free editing mode&lt;/a&gt; &lt;/li&gt;\n                &lt;li&gt; &lt;a href=\"{{ url_for('graphMode1') }}\"&gt;Fill mode&lt;/a&gt; &lt;/li&gt;\n                &lt;li&gt; &lt;a href=\"{{ url_for('graphMode2') }}\"&gt;Custom choices mode&lt;/a&gt; &lt;/li&gt;\n                &lt;li&gt; &lt;a href=\"{{ url_for('graphMode3') }}\"&gt;Locked choices mode&lt;/a&gt; &lt;/li&gt;\n\n            &lt;/ul&gt;\n        &lt;/div&gt;\n        &lt;!-- /#sidebar-wrapper --&gt;\n\n        &lt;!-- Page Content --&gt;\n        &lt;div id=\"page-content-wrapper\"&gt;\n            &lt;div class=\"container-fluid\"&gt;\n\n\n                &lt;div id=formWrapper style=\"padding: 30px;\"&gt;\n\n                    &lt;a href=\"#menu-toggle\" class=\"btn btn-secondary\" id=\"menu-toggle\" style=\"margin-bottom: 15px;\"&gt;Toggle Menu&lt;/a&gt;\n\n                    &lt;form method=\"POST\" action=\"http://localhost:5000/updateResultFile\" name=\"updateResultFileForm\" \n                    id=\"updateResultFileForm\" \n                    onsubmit=\"saveGraphData(this, event);\"&gt;\n\n                        &lt;div id=\"graphWrapper\" style=\"margin-bottom: 15px;\"&gt;\n                            &lt;div id=\"myDiagramDiv\" style=\"border: solid 1px black; width: 100%; height: 800px;margin-bottom: 15px;\"&gt;&lt;/div&gt;\n                            &lt;div style=\"display: none;\"&gt;&lt;input id=\"mySavedModel\" name=\"mySavedModel\"&gt;&lt;/div&gt;\n\n                            &lt;button class=\"btn btn-default\" type=\"submit\"&gt; Save &lt;i class=\"fa fa-save\"&gt; &lt;/i&gt; &lt;/button&gt;\n\n                        &lt;/div&gt;\n\n                    &lt;/form&gt;\n\n                    &lt;div id=\"myInspectorDiv\"&gt;\n                    &lt;/div&gt;\n\n                    &lt;div&gt;\n                        &lt;button class=\"btn btn-default\" onclick=\"zoomToFit()\"&gt; Zoom to fit  &lt;i class=\"fa fa-search\"&gt; &lt;/i&gt; &lt;/button&gt;\n                        &lt;button class=\"btn btn-default\" onclick=\"zoomIn()\"&gt; Zoom in  &lt;i class=\"fa fa-search-plus\"&gt; &lt;/i&gt; &lt;/button&gt;\n                        &lt;button class=\"btn btn-default\" onclick=\"zoomOut()\"&gt; Zoom out  &lt;i class=\"fa fa-search-minus\"&gt; &lt;/i&gt; &lt;/button&gt;\n                    &lt;/div&gt;\n\n\n                &lt;/div&gt;\n\n            &lt;/div&gt;\n        &lt;/div&gt;\n\n    &lt;/div&gt;\n\n    &lt;script src=\"{{url_for('static', filename='jquery.min.js')}}\"&gt;&lt;/script&gt;\n    &lt;script src=\"{{url_for('static', filename='bootstrap.bundle.min.js')}}\"&gt;&lt;/script&gt;\n\n    &lt;!-- Menu Toggle Script --&gt;\n    &lt;script&gt;\n        var menuOpen = false;\n        $(\"#menu-toggle\").click(function(e) {\n            e.preventDefault();\n            $(\"#wrapper\").toggleClass(\"toggled\");\n\n            if(menuOpen){\n                menuOpen = false;\n                $(\"#myDiagramDiv\").css({border: \"solid 1px black\"});\n            }else{\n                menuOpen = true;\n                $(\"#myDiagramDiv\").css({border: \"\"});\n            }\n        });\n\n    &lt;/script&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>So basicly I have made custom choices for nodes and links. For example, for node I have these choices:</p>\n\n<ul>\n<li>node choice 1  </li>\n<li>node choice 2  </li>\n<li>node choice 3</li>\n</ul>\n\n<p>and for links I have these choices:</p>\n\n<ul>\n<li>link choice 1</li>\n<li>link choice 2</li>\n<li>link choice 3</li>\n</ul>\n\n<p>What I want to accomplish is that when I select \"node choice 1\" from dropdown list on one node, that that option \"node choice 1\" can not be selected again for another node. But if user deletes node, or sets empty selection on node text, \"node choice 1\" must be available again. </p>\n\n<p>Same thing goes for links.  </p>\n\n<p>I think my code works fine for links, but I have problems with detecting node text changes and updating dataModel content.</p>\n"}, {"tags": ["python", "python-3.x", "sockets", "tcp"], "comments": [{"owner": {"reputation": 513, "user_id": 8293226, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ccfWx.png?s=128&g=1", "display_name": "mustachioed", "link": "https://stackoverflow.com/users/8293226/mustachioed"}, "edited": false, "score": 1, "creation_date": 1518045931, "post_id": 48674992, "comment_id": 84348512, "body": "The &quot;sockets&quot; or &quot;socket&quot; module?"}, {"owner": {"reputation": 3670, "user_id": 7857466, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7OW0s.png?s=128&g=1", "display_name": "progmatico", "link": "https://stackoverflow.com/users/7857466/progmatico"}, "edited": false, "score": 1, "creation_date": 1518046018, "post_id": 48674992, "comment_id": 84348540, "body": "Isn&#39;t the <code>struct</code>module useful for this?"}, {"owner": {"reputation": 1641, "user_id": 4726424, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/AC8aM.png?s=128&g=1", "display_name": "Stan Redoute", "link": "https://stackoverflow.com/users/4726424/stan-redoute"}, "reply_to_user": {"reputation": 513, "user_id": 8293226, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ccfWx.png?s=128&g=1", "display_name": "mustachioed", "link": "https://stackoverflow.com/users/8293226/mustachioed"}, "edited": false, "score": 0, "creation_date": 1518046018, "post_id": 48674992, "comment_id": 84348541, "body": "@MustacheMoses Yes, thanks for noticing, it&#39;s &#39;socket&#39;"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1518046060, "post_id": 48674992, "comment_id": 84348557, "body": "&quot;sys.getsizeof&quot; does not check the length of the bytes, it checks the <i>size of the bytes object</i>. If you want the length, you need <code>len(byte_object)</code>"}, {"owner": {"reputation": 1641, "user_id": 4726424, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/AC8aM.png?s=128&g=1", "display_name": "Stan Redoute", "link": "https://stackoverflow.com/users/4726424/stan-redoute"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1518046140, "post_id": 48674992, "comment_id": 84348582, "body": "@juanpa.arrivillaga you&#39;re, right, I made a fix in description"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1518046210, "post_id": 48674992, "comment_id": 84348605, "body": "So, are you <i>sure</i> you want <code>encoded_array = str(int_array).encode()</code>? You want to send the <i>string representation</i> of a <i>list of ints</i> across the socket? (note, it isn&#39;t an array)"}, {"owner": {"reputation": 1641, "user_id": 4726424, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/AC8aM.png?s=128&g=1", "display_name": "Stan Redoute", "link": "https://stackoverflow.com/users/4726424/stan-redoute"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1518046336, "post_id": 48674992, "comment_id": 84348648, "body": "@juanpa.arrivillaga What I say may sound stupid: I need to send amount of bytes. Doesn&#39;t matter what data type is the original input, it may be array, it may be string..."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1518046394, "post_id": 48674992, "comment_id": 84348671, "body": "Yes, but you are sending the <i>bytes representing a string representing a list</i>. Is that what you want?"}, {"owner": {"reputation": 1641, "user_id": 4726424, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/AC8aM.png?s=128&g=1", "display_name": "Stan Redoute", "link": "https://stackoverflow.com/users/4726424/stan-redoute"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1518046490, "post_id": 48674992, "comment_id": 84348700, "body": "@juanpa.arrivillaga if there&#39;s other way to represent list as &#39;bytes&#39; directly?"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1518047432, "post_id": 48674992, "comment_id": 84349013, "body": "This depends on your use-case. If you <i>really</i> need a list, then you are pretty much stuck using some form of serialization, e.g. <code>pickle</code> or <code>json</code>, in this case where you simply use <code>str(my_list)</code>, you&#39;d have to end up using <code>eval(rec_bytes.decode())</code> which is not... great. If you could use an <code>array.array</code> instead, you could do this more memory efficiently using <code>socket.recv_into</code>. If memory and serialization overhead isn&#39;t a concern, then you can stick with some form of serialized lists..."}], "answers": [{"tags": [], "owner": {"reputation": 4080, "user_id": 5838056, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/A1TkO.jpg?s=128&g=1", "display_name": "arshbot", "link": "https://stackoverflow.com/users/5838056/arshbot"}, "is_accepted": true, "score": 2, "last_activity_date": 1537818542, "last_edit_date": 1537818542, "creation_date": 1537818178, "answer_id": 52486301, "question_id": 48674992, "link": "https://stackoverflow.com/questions/48674992/divide-bytes-object-into-chunks-in-python/52486301#52486301", "title": "Divide &#39;bytes&#39; object into chunks in Python", "body": "<p>bytes can be tricky. </p>\n\n<p>First off, <code>encoded_array = str(int_array).encode()</code> is not doing what you think. If you print encoded_array, you'll see that it's literally converting the <code>to_string</code> value of int_array to bytes. This is why the first value of encoded_array is <code>[</code></p>\n\n<pre><code>&gt;&gt;&gt; encoded_array[:1]\nb'['\n</code></pre>\n\n<p>Second, I'm not sure you want <code>int_array = [i**2 for i in range(1, 100)]</code> to do what it's doing. It creates values up to 10,000. I'm unsure if you would like for this range to be between 0 and 256 if each element is to represent a byte. I'm going to assume you would like  <em>some data</em> to be converted to bytes and split into 40 byte chunks and the data in this case is an array of integers.</p>\n\n<p>First let's convert your int_array into an array of bytes. I'm going to convert each int into a 2 byte value and represent it in hex.</p>\n\n<pre><code>&gt;&gt;&gt; hex_array = [x.to_bytes(2, byteorder=\"big\") for x in int_array]\n</code></pre>\n\n<p>Now to split up the data into bytes of 40</p>\n\n<pre><code>&gt;&gt;&gt; h\n[]\n\n&gt;&gt;&gt; for x in range(0, int(round(len(hex_array)/20))):\n...     h.append(hex_array[:20])\n...     del hex_array[:20]\n</code></pre>\n\n<p>I'm splitting by 20 because each element holds 2 bytes</p>\n\n<p>Now you'll have an array of max 40 byte collections. Time to join the collections together so we can transmit them!</p>\n\n<pre><code>&gt;&gt;&gt; result\n[]\n\n&gt;&gt;&gt; for package in h:\n...     joined_package = b';'.join(package)\n...     result.append(joined_package)\n</code></pre>\n"}], "owner": {"reputation": 1641, "user_id": 4726424, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/AC8aM.png?s=128&g=1", "display_name": "Stan Redoute", "link": "https://stackoverflow.com/users/4726424/stan-redoute"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1828, "favorite_count": 0, "accepted_answer_id": 52486301, "answer_count": 1, "score": 3, "last_activity_date": 1598192537, "creation_date": 1518045788, "last_edit_date": 1598192537, "question_id": 48674992, "link": "https://stackoverflow.com/questions/48674992/divide-bytes-object-into-chunks-in-python", "title": "Divide &#39;bytes&#39; object into chunks in Python", "body": "<p>I need to send an array by 'packages' of specific length (say 40 bytes) using <code>TCP Protocol</code> and Python's <code>socket</code> module.\nFirst I'm generating sample array of <code>ints</code>:</p>\n<pre><code>int_array = [i**2 for i in range(1, 100)]\n</code></pre>\n<p>Then I'm converting it into <code>bytes</code> object:</p>\n<pre><code>encoded_array = str(int_array).encode()\n</code></pre>\n<p>To check length of <code>encoded_array</code> object I'm using <code>len(encoded_array)</code> which in this particular case equals 551 bytes.</p>\n<p>Say I want to sent packages that are 40 bytes long: this makes full 13 packages and the leftovers from last bytes of <code>encoded_array</code>, total of 14 packages. But I can't figure out the method how to divide <code>bytes</code> object into smaller <code>bytes</code> objects by number of bytes itself. Does anyone have an idea how to do this?</p>\n<p>I'm also aware that I may be doing it in totally wrong way, so please advise me on how to send 'portioned' data via <code>TCP</code> protocol. Maybe there's no need to do this splitting at all?</p>\n"}, {"tags": ["python", "virtual-machine", "virtualbox", "jupyter"], "comments": [{"owner": {"reputation": 807, "user_id": 4323911, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wtY7q.jpg?s=128&g=1", "display_name": "BrightFlow", "link": "https://stackoverflow.com/users/4323911/brightflow"}, "edited": false, "score": 0, "creation_date": 1518046930, "post_id": 48674966, "comment_id": 84348864, "body": "Try the <code>upload</code> button on the right side of Juypter notebook."}, {"owner": {"reputation": 169, "user_id": 9202251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31f1cb34f7eafe542665fc167a83895e?s=128&d=identicon&r=PG&f=1", "display_name": "J. Serra", "link": "https://stackoverflow.com/users/9202251/j-serra"}, "reply_to_user": {"reputation": 807, "user_id": 4323911, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wtY7q.jpg?s=128&g=1", "display_name": "BrightFlow", "link": "https://stackoverflow.com/users/4323911/brightflow"}, "edited": false, "score": 0, "creation_date": 1518049057, "post_id": 48674966, "comment_id": 84349429, "body": "The &#39;upload&#39; button doesn&#39;t give access to my hard disk. It stays within the VM"}], "answers": [{"tags": [], "owner": {"reputation": 681, "user_id": 8523960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b978a69cb36813b4739a56bd0530e338?s=128&d=identicon&r=PG&f=1", "display_name": "Laenka-Oss", "link": "https://stackoverflow.com/users/8523960/laenka-oss"}, "is_accepted": false, "score": 0, "last_activity_date": 1533125111, "creation_date": 1533125111, "answer_id": 51632871, "question_id": 48674966, "link": "https://stackoverflow.com/questions/48674966/uploading-files-to-jupyter-running-on-vm-vitualbox/51632871#51632871", "title": "Uploading files to Jupyter running on VM VitualBox", "body": "<p>Yes, it's possible. </p>\n\n<p>To begin with, your host PC mut have a shared folder with your VM (Explained elsewhere).</p>\n\n<p>A method I do is to\nFirst create a folder <code>myfolder</code> for the (.pdf or .csv) files.</p>\n\n<p>Secondly, load the folder by: going to the created <code>myfolder</code>  --> right-click on the <code>myfolder</code> --> choose \"Open in Terminal\".</p>\n\n<p>Thirdly, at the terminal it should look like this: <code>myfolder]$</code>. Then I type \"jupyter notebook\" as such: <code>[username@localhost myfolder]$ jupyter notebook</code> and hit ENTER. \nThe folder should be opened and containing my .pdf or .csv files.</p>\n"}], "owner": {"reputation": 169, "user_id": 9202251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31f1cb34f7eafe542665fc167a83895e?s=128&d=identicon&r=PG&f=1", "display_name": "J. Serra", "link": "https://stackoverflow.com/users/9202251/j-serra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 194, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1533125111, "creation_date": 1518045650, "question_id": 48674966, "link": "https://stackoverflow.com/questions/48674966/uploading-files-to-jupyter-running-on-vm-vitualbox", "title": "Uploading files to Jupyter running on VM VitualBox", "body": "<p>Is it possible to upload a file (say a .pdf or .csv) saved in my hard disk into Jupyter running on VirtualBox?</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 2, "creation_date": 1518045521, "post_id": 48674905, "comment_id": 84348349, "body": "&quot;I could normally do that with <code>df[&#39;midprice&#39;] = value</code>&quot; this should never work as a method for appending to a dataframe."}], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 8067957, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d73188a010a31f6ea995f3e05572f116?s=128&d=identicon&r=PG&f=1", "display_name": "xxen0nxx", "link": "https://stackoverflow.com/users/8067957/xxen0nxx"}, "edited": false, "score": 0, "creation_date": 1518045858, "post_id": 48674982, "comment_id": 84348480, "body": "something like this was exactly what I was loking for, let me see if this works. I knew it had to do with one of the  iloc, loc, or iat, at."}, {"owner": {"reputation": 71, "user_id": 8067957, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d73188a010a31f6ea995f3e05572f116?s=128&d=identicon&r=PG&f=1", "display_name": "xxen0nxx", "link": "https://stackoverflow.com/users/8067957/xxen0nxx"}, "edited": false, "score": 0, "creation_date": 1518045993, "post_id": 48674982, "comment_id": 84348529, "body": "Is this inline btw?"}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "reply_to_user": {"reputation": 71, "user_id": 8067957, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d73188a010a31f6ea995f3e05572f116?s=128&d=identicon&r=PG&f=1", "display_name": "xxen0nxx", "link": "https://stackoverflow.com/users/8067957/xxen0nxx"}, "edited": false, "score": 0, "creation_date": 1518046405, "post_id": 48674982, "comment_id": 84348673, "body": "@xxen0nxx, not sure what you mean by inline"}, {"owner": {"reputation": 71, "user_id": 8067957, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d73188a010a31f6ea995f3e05572f116?s=128&d=identicon&r=PG&f=1", "display_name": "xxen0nxx", "link": "https://stackoverflow.com/users/8067957/xxen0nxx"}, "edited": false, "score": 0, "creation_date": 1518046443, "post_id": 48674982, "comment_id": 84348683, "body": "hmm, im getting an error. AttributeError: &#39;Series&#39; object has no attribute &#39;columns&#39;"}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "reply_to_user": {"reputation": 71, "user_id": 8067957, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d73188a010a31f6ea995f3e05572f116?s=128&d=identicon&r=PG&f=1", "display_name": "xxen0nxx", "link": "https://stackoverflow.com/users/8067957/xxen0nxx"}, "edited": false, "score": 0, "creation_date": 1518046519, "post_id": 48674982, "comment_id": 84348709, "body": "convention is <code>df</code> refers to dataframe. try it with the correct variable."}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "reply_to_user": {"reputation": 71, "user_id": 8067957, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d73188a010a31f6ea995f3e05572f116?s=128&d=identicon&r=PG&f=1", "display_name": "xxen0nxx", "link": "https://stackoverflow.com/users/8067957/xxen0nxx"}, "edited": false, "score": 0, "creation_date": 1518046850, "post_id": 48674982, "comment_id": 84348838, "body": "can you print <code>type(df)</code>?"}, {"owner": {"reputation": 71, "user_id": 8067957, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d73188a010a31f6ea995f3e05572f116?s=128&d=identicon&r=PG&f=1", "display_name": "xxen0nxx", "link": "https://stackoverflow.com/users/8067957/xxen0nxx"}, "edited": false, "score": 0, "creation_date": 1518047299, "post_id": 48674982, "comment_id": 84348979, "body": "sell_order_id   timestamp  type    midprice   0      915882866  1518047205     0  0.12662148      amount  amount_str  buy_order_id        id       price   price_str  \\ 0     0.5  0.50000000     915882917  53435169  0.12689309  0.12689309"}, {"owner": {"reputation": 71, "user_id": 8067957, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d73188a010a31f6ea995f3e05572f116?s=128&d=identicon&r=PG&f=1", "display_name": "xxen0nxx", "link": "https://stackoverflow.com/users/8067957/xxen0nxx"}, "edited": false, "score": 0, "creation_date": 1518047305, "post_id": 48674982, "comment_id": 84348981, "body": "and the one after is"}, {"owner": {"reputation": 71, "user_id": 8067957, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d73188a010a31f6ea995f3e05572f116?s=128&d=identicon&r=PG&f=1", "display_name": "xxen0nxx", "link": "https://stackoverflow.com/users/8067957/xxen0nxx"}, "edited": false, "score": 0, "creation_date": 1518047328, "post_id": 48674982, "comment_id": 84348992, "body": "915882866  1518047205     0  0.12662148          amount  amount_str  buy_order_id        id    midprice       price  \\ 0  0.50000000  0.50000000     915882917  53435169  0.12662148  0.12689309    0  0.61658571  0.61658571     915883324  53435190         NaN  0.12570006         price_str  sell_order_id   timestamp  type   0  0.12689309      915882866  1518047205     0   0  0.12570006      915884248  1518047221     1"}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "reply_to_user": {"reputation": 71, "user_id": 8067957, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d73188a010a31f6ea995f3e05572f116?s=128&d=identicon&r=PG&f=1", "display_name": "xxen0nxx", "link": "https://stackoverflow.com/users/8067957/xxen0nxx"}, "edited": false, "score": 0, "creation_date": 1518047349, "post_id": 48674982, "comment_id": 84348999, "body": "nope, that&#39;s not <code>type(df)</code>. if you can&#39;t print this, it&#39;s hard to help!"}, {"owner": {"reputation": 71, "user_id": 8067957, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d73188a010a31f6ea995f3e05572f116?s=128&d=identicon&r=PG&f=1", "display_name": "xxen0nxx", "link": "https://stackoverflow.com/users/8067957/xxen0nxx"}, "edited": false, "score": 0, "creation_date": 1518048399, "post_id": 48674982, "comment_id": 84349250, "body": "&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt; is the type"}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "reply_to_user": {"reputation": 71, "user_id": 8067957, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d73188a010a31f6ea995f3e05572f116?s=128&d=identicon&r=PG&f=1", "display_name": "xxen0nxx", "link": "https://stackoverflow.com/users/8067957/xxen0nxx"}, "edited": false, "score": 0, "creation_date": 1518048440, "post_id": 48674982, "comment_id": 84349258, "body": "and now what do you get when you print <code>df.columns</code>?"}, {"owner": {"reputation": 71, "user_id": 8067957, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d73188a010a31f6ea995f3e05572f116?s=128&d=identicon&r=PG&f=1", "display_name": "xxen0nxx", "link": "https://stackoverflow.com/users/8067957/xxen0nxx"}, "edited": false, "score": 0, "creation_date": 1518048989, "post_id": 48674982, "comment_id": 84349414, "body": "This is what I get."}, {"owner": {"reputation": 71, "user_id": 8067957, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d73188a010a31f6ea995f3e05572f116?s=128&d=identicon&r=PG&f=1", "display_name": "xxen0nxx", "link": "https://stackoverflow.com/users/8067957/xxen0nxx"}, "edited": false, "score": 0, "creation_date": 1518048996, "post_id": 48674982, "comment_id": 84349417, "body": "Index([       u&#39;amount&#39;,    u&#39;amount_str&#39;,  u&#39;buy_order_id&#39;,            u&#39;id&#39;,             u&#39;midprice&#39;,         u&#39;price&#39;,     u&#39;price_str&#39;, u&#39;sell_order_id&#39;,            u&#39;timestamp&#39;,          u&#39;type&#39;],       dtype=&#39;object&#39;)"}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "reply_to_user": {"reputation": 71, "user_id": 8067957, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d73188a010a31f6ea995f3e05572f116?s=128&d=identicon&r=PG&f=1", "display_name": "xxen0nxx", "link": "https://stackoverflow.com/users/8067957/xxen0nxx"}, "edited": false, "score": 0, "creation_date": 1518049584, "post_id": 48674982, "comment_id": 84349567, "body": "so your error &quot;AttributeError: &#39;Series&#39; object has no attribute &#39;columns&#39;&quot; cannot be correct for the line of code i provided - pls post full error &amp; traceback on your question."}, {"owner": {"reputation": 71, "user_id": 8067957, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d73188a010a31f6ea995f3e05572f116?s=128&d=identicon&r=PG&f=1", "display_name": "xxen0nxx", "link": "https://stackoverflow.com/users/8067957/xxen0nxx"}, "edited": false, "score": 0, "creation_date": 1518051347, "post_id": 48674982, "comment_id": 84350058, "body": "hmm It wont let me paste it, to large. Here it is on pastebin. <a href=\"https://pastebin.com/cjTgzcXU\" rel=\"nofollow noreferrer\">pastebin.com/cjTgzcXU</a>"}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "reply_to_user": {"reputation": 71, "user_id": 8067957, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d73188a010a31f6ea995f3e05572f116?s=128&d=identicon&r=PG&f=1", "display_name": "xxen0nxx", "link": "https://stackoverflow.com/users/8067957/xxen0nxx"}, "edited": false, "score": 0, "creation_date": 1518051481, "post_id": 48674982, "comment_id": 84350096, "body": "could be related: <a href=\"https://stackoverflow.com/questions/40366120/python-pandas-attributeerror-series-object-has-no-attribute-columns\" title=\"python pandas attributeerror series object has no attribute columns\">stackoverflow.com/questions/40366120/&hellip;</a>"}, {"owner": {"reputation": 71, "user_id": 8067957, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d73188a010a31f6ea995f3e05572f116?s=128&d=identicon&r=PG&f=1", "display_name": "xxen0nxx", "link": "https://stackoverflow.com/users/8067957/xxen0nxx"}, "edited": false, "score": 0, "creation_date": 1518052345, "post_id": 48674982, "comment_id": 84350335, "body": "Hmm, weird. What does not make sense to me is why is it saying series object when it is a dataframe. very strange."}], "tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": false, "score": 2, "last_activity_date": 1518045738, "creation_date": 1518045738, "answer_id": 48674982, "question_id": 48674905, "link": "https://stackoverflow.com/questions/48674905/pandas-accidentally-setting-entire-column-not-last-in-row/48674982#48674982", "title": "Pandas accidentally setting entire column, not last in row", "body": "<p>Pandas specialises in vectorised calculations.</p>\n\n<p>So <code>df['midprice'] = value</code> sets an entire series (or column) to a fixed value.</p>\n\n<p>It seems like you want to amend the <em>last</em> midprice value only, straight after a row is added by another process. This is one way you can achieve this:</p>\n\n<pre><code>df.iloc[-1, df.columns.get_loc('midprice')] = value\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 8067957, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d73188a010a31f6ea995f3e05572f116?s=128&d=identicon&r=PG&f=1", "display_name": "xxen0nxx", "link": "https://stackoverflow.com/users/8067957/xxen0nxx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1518047727, "creation_date": 1518045302, "last_edit_date": 1518047727, "question_id": 48674905, "link": "https://stackoverflow.com/questions/48674905/pandas-accidentally-setting-entire-column-not-last-in-row", "title": "Pandas accidentally setting entire column, not last in row", "body": "<p>This may be a dumb question but I am a tad stuck with this. Say I have this dataframe:</p>\n\n<pre><code>   amount  amount_str  buy_order_id        id   midprice       price  \n0  0.01545000  0.01545000     915692220  53424450  0.1286495  0.12947460   \n0  1.65956203  1.65956203     915692330  53424458        NaN  0.12947460   \n0  0.68427900  0.68427900     915692581  53424487        NaN  0.12947460   \n0  0.22306417  0.22306417     915692632  53424491        NaN  0.12808629   \n0  0.22306396  0.22306396     915692964  53424530        NaN  0.12808646   \n0  2.31474046  2.31474046     915693081  53424535        NaN  0.12947460   \n0  0.16808924  0.16808924     915694097  53424600        NaN  0.12808675   \n0  5.30166589  5.30166589     915694819  53424629        NaN  0.12808710   \nprice_str  sell_order_id   timestamp  type  \n0  0.12947460      915690988  1518045004     0  \n0  0.12947460      915690988  1518045006     0  \n0  0.12947460      915690988  1518045010     0  \n0  0.12808629      915692647  1518045010     1  \n0  0.12808646      915693012  1518045016     1  \n0  0.12947460      915690988  1518045017     0  \n0  0.12808675      915694117  1518045031     1  \n0  0.12808710      915694862  1518045041     1\n</code></pre>\n\n<p>Here is my issue: each time the program gets a new order from bitstamp, it appends the values to this dataframe, and then adds the current midprice. </p>\n\n<p>I could normally do that with <code>df['midprice'] = value</code>; however, this sets it for the entire column and not just that entry. </p>\n\n<p>How would I make it so it adds it per line and not to the entire column?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "python-3.x", "filenames"], "comments": [{"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 2, "creation_date": 1518045995, "post_id": 48674904, "comment_id": 84348531, "body": "have you tried <a href=\"https://stackoverflow.com/a/39501288/9209546\">getting the last modified time</a>, then <a href=\"https://stackoverflow.com/a/25265500/9209546\">taking the difference between two times</a> and performing an <code>if</code> condition based on this value?"}, {"owner": {"reputation": 59, "user_id": 4994436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b4c252baf48c31cc7bc029b92a15db5?s=128&d=identicon&r=PG&f=1", "display_name": "KJoke", "link": "https://stackoverflow.com/users/4994436/kjoke"}, "edited": false, "score": 1, "creation_date": 1518046172, "post_id": 48674904, "comment_id": 84348593, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/12485666/python-deleting-all-files-in-a-folder-older-than-x-days\">Python, Deleting all files in a folder older than X days</a>"}], "owner": {"reputation": 191, "user_id": 1714724, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/bY74u.gif?s=128&g=1", "display_name": "grahamie", "link": "https://stackoverflow.com/users/1714724/grahamie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 104, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1518045801, "creation_date": 1518045300, "last_edit_date": 1518045801, "question_id": 48674904, "link": "https://stackoverflow.com/questions/48674904/how-to-get-a-list-of-files-within-a-directory-from-a-specific-date-period-using", "title": "How to get a list of files within a directory from a specific date period using python", "body": "<p>So I am able to extract all the file names into a text file, but there are millions of results. How do I limit it to only look at files created in the last 24 hours/1 day ???</p>\n\n<p>This is my code so far.</p>\n\n<pre><code>with open(\"output.txt\", \"w\") as a:\n    for path, subdirs, files in os.walk(r'\\\\somefolder'):\n      for filename in files:\n         f = os.path.join(filename)\n         a.write(str(f) + os.linesep)\n</code></pre>\n\n<p>thank you for your help</p>\n"}, {"tags": ["python", "machine-learning", "neural-network", "keras"], "answers": [{"comments": [{"owner": {"reputation": 391, "user_id": 7561254, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/986c893464f770a7b617c36840aa6996?s=128&d=identicon&r=PG&f=1", "display_name": "ldragicevic", "link": "https://stackoverflow.com/users/7561254/ldragicevic"}, "edited": false, "score": 0, "creation_date": 1518125666, "post_id": 48677744, "comment_id": 84388910, "body": "Thanks a lot for response! That input layer staff confused me. Works fine now!"}], "tags": [], "owner": {"reputation": 346, "user_id": 5153267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4c8270b0ec59a1e6c1d1a0092ffadbc?s=128&d=identicon&r=PG&f=1", "display_name": "Denis Zubo", "link": "https://stackoverflow.com/users/5153267/denis-zubo"}, "is_accepted": true, "score": 15, "last_activity_date": 1518065272, "creation_date": 1518065272, "answer_id": 48677744, "question_id": 48674881, "link": "https://stackoverflow.com/questions/48674881/keras-expected-3-dimensions-but-got-array-with-shape-dense-model/48677744#48677744", "title": "Keras: Expected 3 dimensions, but got array with shape - dense model", "body": "<p>The number of rows (number of training samples) is not the part of the input shape of the network because the training process feeds the network one sample per batch (or, more precisely, batch_size samples per batch).</p>\n\n<p>So in your case, input shape of the network is <code>(2739, )</code> and the right code should be like this:</p>\n\n<pre><code>model = Sequential()\n# the shape of one training example is\ninput_shape = tfidf_matrix[0].shape\nmodel.add(Dense(units=20, activation='relu', input_shape=input_shape))\nmodel.add(Dense(units=20, activation='softmax'))\nmodel.compile(optimizer='rmsprop', loss='categorical_crossentropy', \nmetrics=['accuracy'])\nmodel.fit(tfidf_matrix, train_data['cuisine_id'], epochs=10)\n</code></pre>\n"}], "owner": {"reputation": 391, "user_id": 7561254, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/986c893464f770a7b617c36840aa6996?s=128&d=identicon&r=PG&f=1", "display_name": "ldragicevic", "link": "https://stackoverflow.com/users/7561254/ldragicevic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 26071, "favorite_count": 3, "accepted_answer_id": 48677744, "answer_count": 1, "score": 10, "last_activity_date": 1577720573, "creation_date": 1518045196, "question_id": 48674881, "link": "https://stackoverflow.com/questions/48674881/keras-expected-3-dimensions-but-got-array-with-shape-dense-model", "title": "Keras: Expected 3 dimensions, but got array with shape - dense model", "body": "<p>I want to do multi label classification (20 distinct output labels), based on vectorized words using TfidfVectorizer. I have set of 39974 rows each one containing 2739 items (zeros or ones).</p>\n\n<p>I would like to classify this data using Keras model which will contain 1 hidden layer (~20 nodes with activation='relu') and output layer equal 20 possible output values (with activation='softmax' to choose best fit).</p>\n\n<p>Here's my code so far:</p>\n\n<pre><code>model = Sequential()\nmodel.add(Dense(units=20, activation='relu', input_shape=tfidf_matrix.shape))\nmodel.add(Dense(units=20, activation='softmax'))\nmodel.compile(optimizer='rmsprop', loss='categorical_crossentropy', metrics=['accuracy'])\nmodel.fit(tfidf_matrix, train_data['cuisine_id'], epochs=10)\n</code></pre>\n\n<p>But got error: </p>\n\n<blockquote>\n  <p>ValueError: Error when checking input: expected dense_1_input to have\n  3 dimensions, but got array with shape (39774, 2739)</p>\n</blockquote>\n\n<p>How can I specify this NN to fit using this matrix? </p>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 481672, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1518045580, "post_id": 48674874, "comment_id": 84348373, "body": "<code>\\s*;+</code> only matches 0+ whitespace chars and then 1+ <code>;</code> chars. If you split separate lines with the pattern, then grab the first item."}], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 7068476, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b8fba3d51148d9ee84219f40c671bd29?s=128&d=identicon&r=PG&f=1", "display_name": "Steve ", "link": "https://stackoverflow.com/users/7068476/steve"}, "edited": false, "score": 1, "creation_date": 1518045773, "post_id": 48674907, "comment_id": 84348449, "body": "Works! You are awesome!"}], "tags": [], "owner": {"reputation": 481672, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 1, "last_activity_date": 1518045799, "last_edit_date": 1518045799, "creation_date": 1518045305, "answer_id": 48674907, "question_id": 48674874, "link": "https://stackoverflow.com/questions/48674874/regex-match-but-no-comment/48674907#48674907", "title": "regex match but no comment", "body": "<p><code>\\s*;+</code> only matches 0+ whitespace chars and then 1+ <code>;</code> chars. If you split separate lines with the pattern, then grab the first item:</p>\n\n<pre><code>import re\ns='''1.29.7D59                       ; This field should not be edited\nSE5C620.86B.00.01   ; This field should not be edited\nI/O Sensitive               ;Options: Balanced=00: I/O Sensitive=02\nPOR - Reg. Value:0x1F                 ;Options: 0.0%=00: 0.1%=01'''\nlines = s.split('\\n')\nres = []\nfor line in lines:\n    res.append(re.split(r'\\s*;', line)[0])\nprint(res)\n# =&gt; ['1.29.7D59', 'SE5C620.86B.00.01', 'I/O Sensitive', 'POR - Reg. Value:0x1F']\n</code></pre>\n\n<p>See <a href=\"https://ideone.com/EdVC4p\" rel=\"nofollow noreferrer\">this Python demo</a>.</p>\n\n<p>Alternatively, you may use the following regex:</p>\n\n<pre><code>^[^;]*[^\\s;]\n</code></pre>\n\n<p>See the <a href=\"https://regex101.com/r/kLYBjr/1\" rel=\"nofollow noreferrer\">regex demo</a>. If you read the file as one string, you might want to use it with a <code>re.MULTILINE</code> flag, or as <code>(?m)^[^;]*[^\\s;]</code>.</p>\n\n<p><strong>Details</strong></p>\n\n<ul>\n<li><code>^</code> - start of string (or line if <code>re.M</code> flag is specified)</li>\n<li><code>[^;]*</code> - 0+ chars other than <code>;</code></li>\n<li><code>[^\\s;]</code> - a char other than whitespace and <code>;</code>.</li>\n</ul>\n\n<p>See the <a href=\"https://ideone.com/cI4kpB\" rel=\"nofollow noreferrer\">Python online demo</a>:</p>\n\n<pre><code>import re\ns='''1.29.7D59                       ; This field should not be edited\nSE5C620.86B.00.01   ; This field should not be edited\nI/O Sensitive               ;Options: Balanced=00: I/O Sensitive=02\nPOR - Reg. Value:0x1F                 ;Options: 0.0%=00: 0.1%=01'''\nprint(re.findall(r'^[^;]*[^\\s;]', s, re.M))\n# =&gt; ['1.29.7D59', 'SE5C620.86B.00.01', 'I/O Sensitive', 'POR - Reg. Value:0x1F']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "is_accepted": false, "score": 1, "last_activity_date": 1518045358, "creation_date": 1518045358, "answer_id": 48674920, "question_id": 48674874, "link": "https://stackoverflow.com/questions/48674874/regex-match-but-no-comment/48674920#48674920", "title": "regex match but no comment", "body": "<p>You can use <code>re.split</code>:</p>\n\n<pre><code>import re\ns = \"\"\"\n1.29.7D59                       ; This field should not be edited\nSE5C620.86B.00.01   ; This field should not be edited\nI/O Sensitive               ;Options: Balanced=00: I/O Sensitive=02\nPOR - Reg. Value:0x1F                 ;Options: 0.0%=00: 0.1%=01\n\"\"\"\nfinal_data = '\\n'.join([a for a, _ in [re.split('\\s+(?=;)', i) for i in filter(None, s.split('\\n'))]])\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>1.29.7D59\nSE5C620.86B.00.01\nI/O Sensitive\nPOR - Reg. Value:0x1F\n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 7068476, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b8fba3d51148d9ee84219f40c671bd29?s=128&d=identicon&r=PG&f=1", "display_name": "Steve ", "link": "https://stackoverflow.com/users/7068476/steve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 48674907, "answer_count": 2, "score": 2, "last_activity_date": 1518046110, "creation_date": 1518045154, "question_id": 48674874, "link": "https://stackoverflow.com/questions/48674874/regex-match-but-no-comment", "title": "regex match but no comment", "body": "<p>Given file:</p>\n\n<pre><code>1.29.7D59                       ; This field should not be edited\nSE5C620.86B.00.01   ; This field should not be edited\nI/O Sensitive               ;Options: Balanced=00: I/O Sensitive=02\nPOR - Reg. Value:0x1F                 ;Options: 0.0%=00: 0.1%=01\n</code></pre>\n\n<p>To Do:</p>\n\n<pre><code>1.29.7D59\nSE5C620.86B.00.01\nI/O Sensitive\nPOR - Reg. Value:0x1F\n</code></pre>\n\n<p>Thus I need to extract <code>1.29.7D59</code>, <code>SE5C620.86B.00.01</code> etc.\nTry is </p>\n\n<pre><code>\\s*;+\n</code></pre>\n\n<p>But it is not working maybe I need to carry ahead look. New to regex so do not. </p>\n\n<p>Please help</p>\n"}, {"tags": ["python", "python-3.x", "variables", "global-variables"], "comments": [{"owner": {"reputation": 17, "user_id": 5155874, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ePh4B.jpg?s=128&g=1", "display_name": "Bruce Wayne", "link": "https://stackoverflow.com/users/5155874/bruce-wayne"}, "edited": false, "score": 0, "creation_date": 1518045018, "post_id": 48674822, "comment_id": 84348169, "body": "the output is always &quot;desired_word was not found&quot;, even when the word was found in the text by my loop. I isolated the problem to the desired_word_found variable not being changed by the statement marked with the &quot;############&quot;"}, {"owner": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "edited": false, "score": 0, "creation_date": 1518045090, "post_id": 48674822, "comment_id": 84348198, "body": "You could also just have done <code>if desired_word in words: print(&quot;xxx&quot;)</code>. No need to loop over and check each word."}], "answers": [{"tags": [], "owner": {"reputation": 1186, "user_id": 1882397, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/kX5cT.png?s=128&g=1", "display_name": "kszl", "link": "https://stackoverflow.com/users/1882397/kszl"}, "is_accepted": false, "score": 2, "last_activity_date": 1518045047, "creation_date": 1518045047, "answer_id": 48674856, "question_id": 48674822, "link": "https://stackoverflow.com/questions/48674822/desired-word-found-variable-is-not-being-changed-in-python/48674856#48674856", "title": "desired_word_found variable is not being changed in Python", "body": "<p>Assigning a value to a variable is done by ONE equals mark:</p>\n\n<pre><code>desired_word_found = True\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 5155874, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ePh4B.jpg?s=128&g=1", "display_name": "Bruce Wayne", "link": "https://stackoverflow.com/users/5155874/bruce-wayne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 17, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1518045047, "creation_date": 1518044876, "question_id": 48674822, "link": "https://stackoverflow.com/questions/48674822/desired-word-found-variable-is-not-being-changed-in-python", "title": "desired_word_found variable is not being changed in Python", "body": "<p>I was writing a simple program in Python that determines if a word is contained in a piece of text. The problem is that when the desired_word is detected in the piece of text the desired_word_found variable is not being changed by the statement \"desired_word_found == true\". I know this has something to do with the variable (desired_word_found) not being static and I even tried to change the variable to global but it still wasn't being changed by that statement. Im new to Python and need some help in this please.        </p>\n\n<p>#this program determines if a given word is in a piece of text </p>\n\n<pre><code>desired_word_found = False \n\n\n#retrieving necessary data \ndesired_word = input(\"What word would you like to search for? \")\nraw_text = input(\"Please enter the text you would like us to search: \")\n\nwords = raw_text.split()#stores each word of the text in words list \n\n\n\nfor i in range(len(words)):#loops through list of words to determine if our desired word is contained in the list \n\n    if words[i] == desired_word:\n        desired_word_found == True ################### VARIABLE IS NOT BEING CHANGED BY THIS STATEMENT\n\n\nif desired_word_found == True:\n    print(desired_word+\" was found\")\nelse:\n    print(desired_word+\" was not found\")\n</code></pre>\n"}, {"tags": ["python", "function", "optimization", "minimize"], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 9330252, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-q06y56cN3Zw/AAAAAAAAAAI/AAAAAAAAACg/0V3LtrvvoJA/photo.jpg?sz=128", "display_name": "Pourya Vakilipourtakalou", "link": "https://stackoverflow.com/users/9330252/pourya-vakilipourtakalou"}, "edited": false, "score": 0, "creation_date": 1518129648, "post_id": 48675291, "comment_id": 84390665, "body": "Unfortunately, I don&#39;t have the analytical version of the function. So I won&#39;t be able to find the Jacobian. &quot;fminbound&quot; from &quot;scipy.optimize&quot; maybe useful. Do you know how can I pass the domains for a function of two variables to this method ?"}], "tags": [], "owner": {"reputation": 16, "user_id": 9281290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a49867560bf1541c4af9a971b6c9054?s=128&d=identicon&r=PG&f=1", "display_name": "TomB", "link": "https://stackoverflow.com/users/9281290/tomb"}, "is_accepted": false, "score": 0, "last_activity_date": 1518047768, "creation_date": 1518047768, "answer_id": 48675291, "question_id": 48674802, "link": "https://stackoverflow.com/questions/48674802/minimizing-a-function-over-a-domain/48675291#48675291", "title": "Minimizing a function over a Domain", "body": "<p>See in SciPy docs: <a href=\"https://docs.scipy.org/doc/scipy/reference/tutorial/optimize.html#constrained-minimization-of-multivariate-scalar-functions-minimize\" rel=\"nofollow noreferrer\">Constrained minimization of multivariate scalar functions</a></p>\n"}], "owner": {"reputation": 43, "user_id": 9330252, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-q06y56cN3Zw/AAAAAAAAAAI/AAAAAAAAACg/0V3LtrvvoJA/photo.jpg?sz=128", "display_name": "Pourya Vakilipourtakalou", "link": "https://stackoverflow.com/users/9330252/pourya-vakilipourtakalou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 224, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1518096698, "creation_date": 1518044748, "last_edit_date": 1518096698, "question_id": 48674802, "link": "https://stackoverflow.com/questions/48674802/minimizing-a-function-over-a-domain", "title": "Minimizing a function over a Domain", "body": "<p>I have a function f(x) which is defined over a domain x = [0, 1]. \nWhen I try to minimize the function using scipy.optimize.fmin, apparently, the x exceeds the domain and I get an error.(it is because of the operations that scipy.optimize.fmin does on the function) </p>\n\n<p>Is there a way to minimize the function in a way that I clarify that the input values should be bound to a domain?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1518047107, "post_id": 48674775, "comment_id": 84348912, "body": "Why are the sets tuples?"}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 1, "creation_date": 1518093076, "post_id": 48674775, "comment_id": 84368436, "body": "@user2473664, if one of the answers below helped, feel free to accept (tick on left) one so that other users can see a tested solution."}], "answers": [{"comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 4, "creation_date": 1518045921, "post_id": 48674829, "comment_id": 84348508, "body": "... why use <code>concat</code> from third-party <code>toolz</code> instead of the equivalent <code>itertools.chain.from_iterable</code>?"}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1518046124, "post_id": 48674829, "comment_id": 84348579, "body": "simple, easier to type! these are, of course, identical. <code>toolz</code> just provides a pointer here. since more than one person thinks it&#39;s an issue, i&#39;ll amend."}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 1, "creation_date": 1518046289, "post_id": 48674829, "comment_id": 84348629, "body": "it also helps meet <a href=\"https://www.python.org/dev/peps/pep-0008/#maximum-line-length\" rel=\"nofollow noreferrer\">PEP row length guidelines</a>."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1518051006, "post_id": 48674829, "comment_id": 84349971, "body": "Yeah, but it&#39;s probably not good to just use a third-party library in an answer that doesn&#39;t mention that library, at least not without a mention that it <i>is</i> third party and what the function does. As for length guidelines, <code>import itertools; concat = itertools.chain.from_iterable</code>"}], "tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": false, "score": 7, "last_activity_date": 1518047298, "last_edit_date": 1518047298, "creation_date": 1518044903, "answer_id": 48674829, "question_id": 48674775, "link": "https://stackoverflow.com/questions/48674775/how-to-add-multiple-sets-in-python-but-only-if-items-are-unique/48674829#48674829", "title": "how to add multiple sets in python but only if items are unique", "body": "<pre><code>from collections import Counter\nfrom itertools import chain\n\nlst = [(1,2,3), (3,4,5), (4,7,8,9), (5,3,9)]\n\n[k for k, v in Counter(chain.from_iterable(lst)).items() if v==1]\n\n# [1, 2, 7, 8]\n</code></pre>\n\n<p>For minimal cost, you can also return values with count 2, 3, etc.</p>\n"}, {"tags": [], "owner": {"reputation": 591, "user_id": 2425811, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VSKXL.jpg?s=128&g=1", "display_name": "Chris Risley", "link": "https://stackoverflow.com/users/2425811/chris-risley"}, "is_accepted": false, "score": -1, "last_activity_date": 1518048041, "last_edit_date": 1518048041, "creation_date": 1518045113, "answer_id": 48674865, "question_id": 48674775, "link": "https://stackoverflow.com/questions/48674775/how-to-add-multiple-sets-in-python-but-only-if-items-are-unique/48674865#48674865", "title": "how to add multiple sets in python but only if items are unique", "body": "<p>Try this:</p>\n\n<pre><code>def build_list(listnums):\n      nummap = {}\n      for n in listnums:\n          for num in n: \n               if not num in nummap:\n                   nummap[num] = True\n               else:\n                   nummap.pop(num, None)\n      return list(nummap.keys())\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "is_accepted": true, "score": -2, "last_activity_date": 1518045721, "creation_date": 1518045721, "answer_id": 48674978, "question_id": 48674775, "link": "https://stackoverflow.com/questions/48674775/how-to-add-multiple-sets-in-python-but-only-if-items-are-unique/48674978#48674978", "title": "how to add multiple sets in python but only if items are unique", "body": "<p>You can flatten the tuples and then caste as a set:</p>\n\n<pre><code>s = [(1,2,3), (3,4,5), (4,7,8,9), (5,3,9)]\nfull_set = [i for b in s for i in b]\nfinal_s = tuple(i for i in full_set if full_set.count(i) == 1)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>(1, 2, 7, 8)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "is_accepted": false, "score": -1, "last_activity_date": 1518050228, "last_edit_date": 1518050228, "creation_date": 1518046046, "answer_id": 48675025, "question_id": 48674775, "link": "https://stackoverflow.com/questions/48674775/how-to-add-multiple-sets-in-python-but-only-if-items-are-unique/48675025#48675025", "title": "how to add multiple sets in python but only if items are unique", "body": "<p>Here is a <em>better</em>* solution that uses only set operations and <code>reduce()</code>:</p>\n\n<pre><code>all_sets = [{1,2,3}, {3,4,5}, {4,7,8,9}, {5,3,9}]\ncombined = reduce(\n    lambda a, b: a.union(b),\n    [\n        s - reduce(\n            lambda x, y: x.union(y), \n            [other for j, other in enumerate(all_sets) if j!=i]\n        ) for i, s in enumerate(all_sets)\n    ]\n)\nprint(combined)\n#set([8, 1, 2, 7])\n</code></pre>\n\n<p>Go go through each set in <code>all_sets</code> and get the distinct elements across all other sets using the set difference operator (<code>-</code>). Then we reduce the result of this operator using the set <code>union()</code> function to combine all sets.</p>\n\n<p>To illustrate what's going on, here is the output of the inner list comprehension:</p>\n\n<pre><code># this gets the elements in each set that are not in any of the others\ninner = [\n    s - reduce(\n        lambda x, y: x.union(y), \n        [other for j, other in enumerate(all_sets) if j!=i]\n    ) for i, s in enumerate(all_sets)\n]\nprint(inner)\n# [set([1, 2]), set([]), set([8, 7]), set([])]\n</code></pre>\n\n<p>*Better than my original solution below.</p>\n\n<p><strong>Original Solution</strong></p>\n\n<p>Here's a solution using list comprehensions and without counting occurrences. </p>\n\n<pre><code>all_sets = [{1,2,3}, {3,4,5}, {4,7,8,9}, {5,3,9}]\ncombined = [x for i, a in enumerate(all_sets) for x in a \n            if all(x not in b for j, b in enumerate(all_sets) if i!=j)]\nprint combined\n#[1, 2, 7, 8]\n</code></pre>\n\n<p>Iterate though each value in each list and only add it to the combined list if it doesn't exist in any of the other lists. We use <code>enumerate</code> twice over all of the lists so we can keep track of what the \"other\" lists are.  </p>\n"}, {"tags": [], "owner": {"reputation": 577, "user_id": 2617071, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002216032126/picture?type=large", "display_name": "Maharramoff", "link": "https://stackoverflow.com/users/2617071/maharramoff"}, "is_accepted": false, "score": -1, "last_activity_date": 1518046577, "creation_date": 1518046577, "answer_id": 48675127, "question_id": 48674775, "link": "https://stackoverflow.com/questions/48674775/how-to-add-multiple-sets-in-python-but-only-if-items-are-unique/48675127#48675127", "title": "how to add multiple sets in python but only if items are unique", "body": "<pre><code>def findSingles(t):\n    l = [n for t in tuples for n in t]\n    return tuple([i for i in l if l.count(i) == 1])\n\ntuples = ((1,2,3), (3,4,5), (4,7,8,9), (5,3,9))\n\nprint(findSingles(tuples))    \n# (1, 2, 7, 8)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "edited": false, "score": 0, "creation_date": 1518055762, "post_id": 48676168, "comment_id": 84351122, "body": "Isn&#39;t your function <code>func</code> just returning the symmetric difference of a and b? You can do the same with <code>a ^ b</code> (where a and b are sets)"}, {"owner": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "edited": false, "score": 0, "creation_date": 1518056108, "post_id": 48676168, "comment_id": 84351188, "body": "Ah, I see you&#39;re storing all of the intersections. Yea I realized that sym diff wouldn&#39;t work straight up with the reduce. This is a nice work around. Cool!"}, {"owner": {"reputation": 27784, "user_id": 4531270, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/uw3pm.png?s=128&g=1", "display_name": "pylang", "link": "https://stackoverflow.com/users/4531270/pylang"}, "reply_to_user": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "edited": false, "score": 0, "creation_date": 1518056502, "post_id": 48676168, "comment_id": 84351281, "body": "It&#39;s close.  The key is sym diff must be for all observations.  If you used  <code>a ^ b</code> between reduced pairs, you will see <code>3</code> pop up in the results since it&#39;s removed at the beginning but reappears at the end.  <code>intersections</code> tracks all discarded items.  I&#39;ve renamed <code>func</code>.  Thanks."}, {"owner": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "edited": false, "score": 0, "creation_date": 1518056789, "post_id": 48676168, "comment_id": 84351334, "body": "Nice. Similar to my solution but more readable. But I agree, the counter approach is preferred."}], "tags": [], "owner": {"reputation": 27784, "user_id": 4531270, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/uw3pm.png?s=128&g=1", "display_name": "pylang", "link": "https://stackoverflow.com/users/4531270/pylang"}, "is_accepted": false, "score": 0, "last_activity_date": 1518056253, "last_edit_date": 1518056253, "creation_date": 1518054242, "answer_id": 48676168, "question_id": 48674775, "link": "https://stackoverflow.com/questions/48674775/how-to-add-multiple-sets-in-python-but-only-if-items-are-unique/48676168#48676168", "title": "how to add multiple sets in python but only if items are unique", "body": "<p>Although <code>Counter</code> is the better solution, here is another approach:</p>\n\n<pre><code>import functools as ft\n\n\ndef get_disjoints(iterables):\n    \"\"\"Return a list of disjoint elements.\"\"\"\n    def local_symdiff(a, b):\n        \"\"\"Return a symmetric difference of all observations.\"\"\"\n        a, b = set(a), set(b)\n        intersections.update(a &amp; b)\n        return {x for x in a | b if x not in intersections}\n\n    intersections = set()\n    return ft.reduce(local_symdiff, iterables)\n\n\niterables = [(1,2,3), (3,4,5), (4,7,8,9), (5,3,9)]\nget_disjoints(iterables)\n# {1, 2, 7, 8}\n</code></pre>\n\n<p>Pairs of iterables (via <code>functools.reduced</code>) are merged and filtered of all observed intersections.</p>\n"}], "owner": {"reputation": 71, "user_id": 2473664, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e1f11275965a4ecbc9abef70305008a?s=128&d=identicon&r=PG", "display_name": "user2473664", "link": "https://stackoverflow.com/users/2473664/user2473664"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 338, "favorite_count": 0, "accepted_answer_id": 48674978, "answer_count": 6, "score": 0, "last_activity_date": 1518056253, "creation_date": 1518044591, "question_id": 48674775, "link": "https://stackoverflow.com/questions/48674775/how-to-add-multiple-sets-in-python-but-only-if-items-are-unique", "title": "how to add multiple sets in python but only if items are unique", "body": "<p>I need to add an undetermined number of lists (sets), but i only want to add members if they are unique</p>\n\n<p>(1,2,3)\n(3,4,5)\n(4,7,8,9)\n(5,3,9)</p>\n\n<p>would need to give: (1,2,7,8)</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 1, "creation_date": 1518044602, "post_id": 48674764, "comment_id": 84348013, "body": "<code>if 2:</code> and <code>if 1:</code> are always true. There is <i>no comparison here</i>. You appear to have forgotten to assign the result of the <code>int(input(...))</code> call to compare that result."}, {"owner": {"reputation": 15, "user_id": 8970193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b6007990db888633522927c4eb72576?s=128&d=identicon&r=PG&f=1", "display_name": "Scuderi", "link": "https://stackoverflow.com/users/8970193/scuderi"}, "reply_to_user": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1518044657, "post_id": 48674764, "comment_id": 84348041, "body": "Thanks , Im still a llittle confused. Could you give me an example"}], "answers": [{"tags": [], "owner": {"reputation": 821764, "user_id": 893, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/747ffa5da3538e66840ebc0548b8fd58?s=128&d=identicon&r=PG", "display_name": "Greg Hewgill", "link": "https://stackoverflow.com/users/893/greg-hewgill"}, "is_accepted": false, "score": 3, "last_activity_date": 1518044634, "creation_date": 1518044634, "answer_id": 48674783, "question_id": 48674764, "link": "https://stackoverflow.com/questions/48674764/issue-with-python-code/48674783#48674783", "title": "Issue with Python Code", "body": "<p>The <code>input()</code> function returns a value, but you haven't used it. Your statement</p>\n\n<pre><code>if 2:\n</code></pre>\n\n<p>is always true (because <code>2</code> is not zero). Here is where you would use the return value returned by <code>input()</code> from the previous statement. Use something like:</p>\n\n<pre><code>choice = int(input(\"...\"))\nif choice == 2:\n    # ...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 243983, "user_id": 35070, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/6f92354195e8874dbee44d5c8714d506?s=128&d=identicon&r=PG", "display_name": "phihag", "link": "https://stackoverflow.com/users/35070/phihag"}, "is_accepted": false, "score": 0, "last_activity_date": 1518044870, "creation_date": 1518044870, "answer_id": 48674820, "question_id": 48674764, "link": "https://stackoverflow.com/questions/48674764/issue-with-python-code/48674820#48674820", "title": "Issue with Python Code", "body": "<p>The right side of an <code>if</code> statement is evaluated. So when you write </p>\n\n<pre><code>if 2:\n</code></pre>\n\n<p>The computer converts this to a <a href=\"https://en.wikipedia.org/wiki/Boolean_data_type\" rel=\"nofollow noreferrer\">boolean</a> value (either True or alse). For integers, all numbers but 0 are converted to True, so this code always runs.</p>\n\n<p>Use a <a href=\"https://docs.python.org/3/tutorial/introduction.html#numbers\" rel=\"nofollow noreferrer\">variable</a> to store the result of <code>input</code>, and compare that to 2:</p>\n\n<pre><code>answer = int(input(\"Whould you like to convert to AUD or AUD to another Currency?\n    \\nConvert to AUD\\nConvert From AUD\"))\n\nif answer == 2:\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 8970193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b6007990db888633522927c4eb72576?s=128&d=identicon&r=PG&f=1", "display_name": "Scuderi", "link": "https://stackoverflow.com/users/8970193/scuderi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1518044870, "creation_date": 1518044544, "last_edit_date": 1592644375, "question_id": 48674764, "link": "https://stackoverflow.com/questions/48674764/issue-with-python-code", "title": "Issue with Python Code", "body": "<p>For some reason my code is only converting AUD to USD no matter which option I Choose. I was wondering where I went wrong and what I missed.\nThanks in Advance</p>\n<h1>Currency converter</h1>\n<pre><code>AU = 1.000000\nUS = 0.790541\nEU = 0.638550\nGB = 0.566447\nTU = 0.335597\nSW = 0.740017\n\ndef menu():\n    input(&quot;Whould you like to convert to AUD or AUD to another Currency?\n    \\nConvert to AUD\\nConvert From AUD&quot;)\n    \n    if 2:\n        int(input(&quot;Which Currency do you want to convert to AUD\\n1: US\\n2: \n        EU\\n3: BP\\n4: TU\\n5: SW&quot;))\n        if 1: \n            value = int(input(&quot;How much money in AUD do you want to \n            convert?&quot;))\n            print(&quot;You now have&quot;,value*US,&quot;In USD&quot;)\n        elif 2:\n            value2 = int(input(&quot;How much money in AUD do you want to \n            convert?&quot;))\n            print(&quot;You now have&quot;,value2*EU,&quot;In EU&quot;)\n        elif 3:\n            value3 = int(input(&quot;How much money in AUD do you want to \n            convert?&quot;))\n            print(&quot;You now have&quot;,value*GB,&quot;In GB&quot;)\n        elif 4:\n            value4 = int(input(&quot;How much money in AUD do you want to \n            convert?&quot;))\n            print(&quot;You now have&quot;,value*TU,&quot;In TU&quot;)\n        elif 5:\n            value5 = int(input(&quot;How much money in AUD do you want to \n            convert?&quot;))\n            print(&quot;You now have&quot;,value*SW,&quot;In SW&quot;)\n        else:\n            print(&quot;Incorrect Option, Please Try again.&quot;)\n            menu()\nprint(&quot;Welcome to Currency Converter&quot;)\nmenu()\n</code></pre>\n"}, {"tags": ["python", "django", "templates", "facebook-graph-api", "facebook-opengraph"], "comments": [{"owner": {"reputation": 81732, "user_id": 1427878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db5fbf44c0eeeaf38c4e4a54ce9eff7a?s=128&d=identicon&r=PG&f=1", "display_name": "CBroe", "link": "https://stackoverflow.com/users/1427878/cbroe"}, "edited": false, "score": 0, "creation_date": 1518078950, "post_id": 48674745, "comment_id": 84358897, "body": "No, the strange thing is that you are ignoring the fat error message with the red triangle icon right on top, which as it says must be fixed first, before you can expect any of this to work - your SSL certificate has issues."}], "owner": {"reputation": 29, "user_id": 9330188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74afcca6822a56f14a1819ba7a4550a6?s=128&d=identicon&r=PG&f=1", "display_name": "Johan", "link": "https://stackoverflow.com/users/9330188/johan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1614, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1518044455, "creation_date": 1518044455, "question_id": 48674745, "link": "https://stackoverflow.com/questions/48674745/opengraph-tags-ogtags-in-django-template-not-scraped-by-facebook", "title": "Opengraph tags (og:tags) in Django template not scraped by Facebook", "body": "<p>I've been trying to get opengraph tags work for my django website. I use \"www.somewebsite.com\" as website url during this question. I used the following static code in the header:</p>\n\n<pre><code>&lt;meta property=\"og:title\" content=\"websitename\" /&gt;\n&lt;meta property=\"og:type\" content=\"website\" /&gt;\n&lt;meta property=\"og:url\" content=\"https://www.somewebsite.com/\" /&gt;\n&lt;meta property=\"og:description\" content=\"Some description.\"/&gt;\n&lt;meta property=\"og:image\" content=\"https://www.somewebsite.com/static/image.png\" /&gt;\n</code></pre>\n\n<p>This did not work, so I've installed django-meta (<a href=\"http://django-meta.readthedocs.io/en/latest/installation.html\" rel=\"nofollow noreferrer\">http://django-meta.readthedocs.io/en/latest/installation.html</a>) and implemented the following code at my landing page view, so the meta data is added dynamically on the server:</p>\n\n<pre><code># basic page view\nclass BasicView(View):\n    template_name = 'landing/landing.html'\n\n    # get request\n    def get(self, request):\n        context = {\n            \"meta\": Meta(\n               title=\"Websitename\",\n               description='Some description.',\n               type='website',\n               url='https://www.somewebsite.com/', \n               image='https://www.somewebsite.com/static/image.png',\n               use_title_tag=True,\n               use_facebook=True,\n               use_og=True,\n            ),\n         }\n\n         return render(request, self.template_name, context)\n</code></pre>\n\n<p>With the following template:</p>\n\n<pre><code>&lt;head {% meta_namespaces %}&gt;\n    {% include 'meta/meta.html' %}\n&lt;/head&gt;\n</code></pre>\n\n<p>This results in:</p>\n\n<pre><code>&lt;head  prefix=\"og: http://ogp.me/ns# fb: http://ogp.me/ns/fb#\"&gt;\n   &lt;meta name=\"description\" content=\"Some description.\"&gt;\n   &lt;title&gt;Websitename&lt;/title&gt;\n   &lt;meta property=\"og:title\" content=\"Websitename\"&gt;\n   &lt;meta property=\"og:url\" content=\"https://www.somewebsite.com/\"&gt;\n   &lt;meta property=\"og:description\" content=\"The easiest way of making digital music.\"&gt;\n   &lt;meta property=\"og:image\" content=\"https://www.judgemysound.com/static/image.png\"&gt;\n&lt;/head&gt;\n</code></pre>\n\n<p>When fetching new scrape information in the facebook debugger tool (<a href=\"https://developers.facebook.com/tools/debug/og/object/\" rel=\"nofollow noreferrer\">https://developers.facebook.com/tools/debug/og/object/</a>) it gives the following information (image):</p>\n\n<p><a href=\"https://i.stack.imgur.com/PMSoa.png\" rel=\"nofollow noreferrer\">Meta data scraped from my website with facebook sharing debugger</a></p>\n\n<p>The strange thing is; The information which are in my og tags are not scraped by facebook. Does anyone know how I can make og:tags work on facebook with a Django app?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 481672, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1518044181, "post_id": 48674676, "comment_id": 84347843, "body": "Note that <code>(?:[^_]+)+</code> should actually be <code>[^_]+</code>. There is no point quantifying it unless you add <code>_?</code> at the start. Then, it will be rather inefficient. Try <a href=\"https://regex101.com/r/M8sPFH/1/\" rel=\"nofollow noreferrer\"><code>(?P&lt;label&gt;[^_]+(?:_[^_]+)*?)(_r(?P&lt;repeat_num&gt;\\d+))?$</code></a> to solve your issue."}, {"owner": {"reputation": 9258, "user_id": 5665870, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TQBw0.png?s=128&g=1", "display_name": "Sphinx", "link": "https://stackoverflow.com/users/5665870/sphinx"}, "edited": false, "score": 0, "creation_date": 1518044660, "post_id": 48674676, "comment_id": 84348043, "body": "try this: r = re.compile(r&#39;(?P&lt;label&gt;(?:[^_]+)_\\d+)(_r(?P&lt;repeat_num&gt;\\d+))&zwnj;&#8203;?&#39;)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1518044890, "post_id": 48674676, "comment_id": 84348127, "body": "You&#39;re telling it to stop at the first underscore. It then <i>optionally</i> matches the <code>_r</code> part which is after the <code>_123</code> in the text. The result is it only matches <i>abc</i>. Do you want to fix it?"}, {"owner": {"reputation": 14962, "user_id": 107083, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f85d6aefc8bd020d498e5b881a5d3a1a?s=128&d=identicon&r=PG", "display_name": "chaimp", "link": "https://stackoverflow.com/users/107083/chaimp"}, "reply_to_user": {"reputation": 9258, "user_id": 5665870, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TQBw0.png?s=128&g=1", "display_name": "Sphinx", "link": "https://stackoverflow.com/users/5665870/sphinx"}, "edited": false, "score": 0, "creation_date": 1518070973, "post_id": 48674676, "comment_id": 84355008, "body": "Thanks @Sphinx, that technically does work for this example, but abc_123 was just an example. Really, there are an arbitrary number of strings separated by underscores."}, {"owner": {"reputation": 14962, "user_id": 107083, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f85d6aefc8bd020d498e5b881a5d3a1a?s=128&d=identicon&r=PG", "display_name": "chaimp", "link": "https://stackoverflow.com/users/107083/chaimp"}, "edited": false, "score": 0, "creation_date": 1518071115, "post_id": 48674676, "comment_id": 84355071, "body": "This is a similar problem to trying to parse a filename and check a suffix when it has periods in it. Consider &quot;my.file.name.txt&quot; v.s. &quot;my.file.name&quot; v.s. &quot;my.filename.txt&quot;. In that case we might want a regex that says &quot;Is there a three-letter suffix? If so, add it to a group.&quot;"}, {"owner": {"reputation": 14962, "user_id": 107083, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f85d6aefc8bd020d498e5b881a5d3a1a?s=128&d=identicon&r=PG", "display_name": "chaimp", "link": "https://stackoverflow.com/users/107083/chaimp"}, "edited": false, "score": 0, "creation_date": 1518071195, "post_id": 48674676, "comment_id": 84355107, "body": "In the meantime, I have this solved by splitting on on the underscores and evaluating the final element of the returned array to look for <code>r\\d+</code>. But I would like to find a reasonable way to do it via regex so that it can be configurable.  Thanks for all the suggestions!"}], "answers": [{"tags": [], "owner": {"reputation": 341, "user_id": 2800865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e4166c3049508ec9e5ae242e040ea1a?s=128&d=identicon&r=PG", "display_name": "sam", "link": "https://stackoverflow.com/users/2800865/sam"}, "is_accepted": false, "score": 0, "last_activity_date": 1518044993, "creation_date": 1518044993, "answer_id": 48674847, "question_id": 48674676, "link": "https://stackoverflow.com/questions/48674676/what-am-i-doing-wrong-with-this-python-regex-that-is-supposed-to-match-repeats-o/48674847#48674847", "title": "What am I doing wrong with this Python regex that is supposed to match repeats of a pattern, followed by an optional pattern?", "body": "<p>It looks like it's partially due to the <code>[^_]</code> bit, which matches \"any character except underscore\".</p>\n\n<p>I couldn't immediately figure out a solution that would properly capture these tokens; I highly recommend using <a href=\"https://regexr.com/\" rel=\"nofollow noreferrer\">RegExr</a> to play with your regular expression in order to figure out how to match the pieces correctly.</p>\n"}, {"comments": [{"owner": {"reputation": 14962, "user_id": 107083, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f85d6aefc8bd020d498e5b881a5d3a1a?s=128&d=identicon&r=PG", "display_name": "chaimp", "link": "https://stackoverflow.com/users/107083/chaimp"}, "edited": false, "score": 0, "creation_date": 1518070809, "post_id": 48674912, "comment_id": 84354950, "body": "Thank you. That did not work, but I appreciate the suggestions."}], "tags": [], "owner": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "is_accepted": false, "score": 0, "last_activity_date": 1518045333, "creation_date": 1518045333, "answer_id": 48674912, "question_id": 48674676, "link": "https://stackoverflow.com/questions/48674676/what-am-i-doing-wrong-with-this-python-regex-that-is-supposed-to-match-repeats-o/48674912#48674912", "title": "What am I doing wrong with this Python regex that is supposed to match repeats of a pattern, followed by an optional pattern?", "body": "<p>Your pattern is not matching the <code>_</code> between the <code>abc</code> and <code>123</code> pieces of your input strings. You need to modify your first capturing group in order to be able to handle those.</p>\n\n<p>A direct translation though may run into difficulties, because it's a bit difficult to distinguish the last <code>_r1</code> block from a normal extra block like <code>_123</code>. I think the pattern below does it correctly, but you should double check that it always does what you expect:</p>\n\n<pre><code>(?P&lt;label&gt;[^_]+(?:_[^_]+)*?)(?:_r(?P&lt;repeat_num&gt;\\d+))?\n</code></pre>\n\n<p>If you always require at least two underlined separated groups in the first part of the text (e.g. <code>abc_123</code>, but never just <code>abc</code> or <code>123</code> by itself), you should replace the <code>*?</code> with <code>+?</code>.</p>\n"}], "owner": {"reputation": 14962, "user_id": 107083, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f85d6aefc8bd020d498e5b881a5d3a1a?s=128&d=identicon&r=PG", "display_name": "chaimp", "link": "https://stackoverflow.com/users/107083/chaimp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1518045333, "creation_date": 1518044061, "question_id": 48674676, "link": "https://stackoverflow.com/questions/48674676/what-am-i-doing-wrong-with-this-python-regex-that-is-supposed-to-match-repeats-o", "title": "What am I doing wrong with this Python regex that is supposed to match repeats of a pattern, followed by an optional pattern?", "body": "<p>Here is what I am trying:</p>\n\n<pre><code>import re\n\nr = re.compile(r'(?P&lt;label&gt;(?:[^_]+)+)(_r(?P&lt;repeat_num&gt;\\d+))?')\n\ndef main():\n    s1 = 'abc_123'\n    s2 = 'abc_123_r1'\n\n    m1 = r.match(s1)\n    m2 = r.match(s2)\n\n    print(m1.groups())\n    print(m2.groups())\n\nif __name__ == \"__main__\":\n    main()\n</code></pre>\n\n<p>I am expecting the first string <code>s1</code> to match <code>abc_123</code> for the <code>label</code> group and nothing for <code>repeat_num</code>.</p>\n\n<p>And I am expecting the second string <code>s2</code> to match <code>abc_123</code> for the <code>label</code> group and '1' for <code>repeat_num</code>.</p>\n\n<p>The actual result stops at <code>abc</code> in both cases.</p>\n"}, {"tags": ["python", "arrays", "list", "numpy", "matching"], "answers": [{"comments": [{"owner": {"reputation": 537, "user_id": 9330173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e34444e3f1b1f61b338c86a7055d61e9?s=128&d=identicon&r=PG&f=1", "display_name": "Will", "link": "https://stackoverflow.com/users/9330173/will"}, "edited": false, "score": 0, "creation_date": 1518051956, "post_id": 48674877, "comment_id": 84350231, "body": "I&#39;m not experienced with dictionaries. How can I pull these out by their key. If I make it a list I just get 1, 3, 5 from this example. But to get it into my matrix I need to loop through the values by their numerical values. Could you offer a bit of clarification on the extraction? Thanks!"}, {"owner": {"reputation": 490, "user_id": 3838750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c7ccbfea680103b53a92d222b95789f?s=128&d=identicon&r=PG&f=1", "display_name": "Sam Bourne", "link": "https://stackoverflow.com/users/3838750/sam-bourne"}, "reply_to_user": {"reputation": 537, "user_id": 9330173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e34444e3f1b1f61b338c86a7055d61e9?s=128&d=identicon&r=PG&f=1", "display_name": "Will", "link": "https://stackoverflow.com/users/9330173/will"}, "edited": false, "score": 0, "creation_date": 1518052186, "post_id": 48674877, "comment_id": 84350292, "body": "<a href=\"https://docs.python.org/2/tutorial/datastructures.html#dictionaries\" rel=\"nofollow noreferrer\">docs.python.org/2/tutorial/datastructures.html#dictionaries</a>  If you want all indicies for items that had 3 repetitive values of 1, can get that by doing: indicies = results[3]"}, {"owner": {"reputation": 537, "user_id": 9330173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e34444e3f1b1f61b338c86a7055d61e9?s=128&d=identicon&r=PG&f=1", "display_name": "Will", "link": "https://stackoverflow.com/users/9330173/will"}, "edited": false, "score": 0, "creation_date": 1518124661, "post_id": 48674877, "comment_id": 84388407, "body": "This method seems to work pretty well, except for one issue. If the group of any length, for instance 1 or 3, is at the end of the list, i.e. one of the 1s in the group is the last element, it reports the wrong index, it tells me it&#39;s one index sooner than it is.   So if I take the list you generated and move that last #1 back, it correctly tells me it is index 16, but in reality, it&#39;s index 17 now, and is saying it&#39;s index 17. Not sure how to fix that."}], "tags": [], "owner": {"reputation": 490, "user_id": 3838750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c7ccbfea680103b53a92d222b95789f?s=128&d=identicon&r=PG&f=1", "display_name": "Sam Bourne", "link": "https://stackoverflow.com/users/3838750/sam-bourne"}, "is_accepted": false, "score": 0, "last_activity_date": 1518385037, "last_edit_date": 1518385037, "creation_date": 1518045168, "answer_id": 48674877, "question_id": 48674625, "link": "https://stackoverflow.com/questions/48674625/finding-unique-sets-without-subsets-in-python-array/48674877#48674877", "title": "Finding unique sets without subsets in python array", "body": "<p>Something like this?</p>\n\n<pre><code>from collections import defaultdict\n\nsample = [0, 0, 1, 1, 1, 1, 1, 0, 0, 1, 1, 1, 0, 0, 0, 1, 0, 1]\n\n# Keys are number of consecutive 1's, values are indicies\nresults = defaultdict(list)\nfound = 0\n\nfor i, x in enumerate(samples):\n    if x == 1:\n        found += 1\n    elif i == 0 or found == 0:\n        continue\n    else:\n        results[found].append(i - found)\n        found = 0\n\nif found:\n    results[found].append(i - found + 1)\n\nassert results == {1: [15, 17], 3: [9], 5: [2]}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 537, "user_id": 9330173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e34444e3f1b1f61b338c86a7055d61e9?s=128&d=identicon&r=PG&f=1", "display_name": "Will", "link": "https://stackoverflow.com/users/9330173/will"}, "edited": false, "score": 0, "creation_date": 1518143446, "post_id": 48676806, "comment_id": 84394477, "body": "Thanks, this was very helpful! Worked well once I incorporated it into my code."}], "tags": [], "owner": {"reputation": 27784, "user_id": 4531270, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/uw3pm.png?s=128&g=1", "display_name": "pylang", "link": "https://stackoverflow.com/users/4531270/pylang"}, "is_accepted": true, "score": 0, "last_activity_date": 1518060140, "last_edit_date": 1518060140, "creation_date": 1518058773, "answer_id": 48676806, "question_id": 48674625, "link": "https://stackoverflow.com/questions/48674625/finding-unique-sets-without-subsets-in-python-array/48676806#48676806", "title": "Finding unique sets without subsets in python array", "body": "<p>Using <a href=\"https://github.com/erikrose/more-itertools\" rel=\"nofollow noreferrer\"><code>more_itertools</code></a>, a third-party library (<code>pip install more_itertools</code>):</p>\n\n<pre><code>import more_itertools as mit\n\n\nsample = [0, 0, 1, 1, 1, 1, 1, 0, 0, 1, 1, 1, 0, 0, 0, 1, 0, 1]\n\ngroups = [list(c) for c in mit.consecutive_groups((mit.locate(sample)))]\nd = {group[0]: len(group) for group in groups}\nd\n# {2: 5, 9: 3, 15: 1, 17: 1}\n</code></pre>\n\n<p>This result reads \"At index <code>2</code> is a group of 5 ones.  At group <code>9</code> is a group of 3 ones,\" etc.</p>\n\n<hr>\n\n<p><em>Details</em></p>\n\n<ul>\n<li><a href=\"https://more-itertools.readthedocs.io/en/latest/api.html#more_itertools.locate\" rel=\"nofollow noreferrer\"><code>more_itertools.locate</code></a> finds indices for truthy items by default.</li>\n<li><a href=\"https://more-itertools.readthedocs.io/en/latest/api.html#more_itertools.consecutive_groups\" rel=\"nofollow noreferrer\"><code>more_itertools.consecutive_groups</code></a> chunks consecutive numbers together.</li>\n<li>The result is a dictionary of (starting-index, length) pairs.</li>\n</ul>\n\n<p>As a <a href=\"https://www.programiz.com/python-programming/dictionary\" rel=\"nofollow noreferrer\">dictionary</a>, you can extract different kinds of information:</p>\n\n<pre><code>&gt;&gt;&gt; # List of starting indices\n&gt;&gt;&gt; list(d)\n[2, 9, 15, 17]\n\n&gt;&gt;&gt; # List indices for all lonely groups\n&gt;&gt;&gt; [k for k, v in d.items() if v == 1]\n[15, 17]\n\n&gt;&gt;&gt; # List indices of groups greater the 2 items\n&gt;&gt;&gt; [k for k, v in d.items() if v &gt; 1]\n[2, 9]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "is_accepted": false, "score": 0, "last_activity_date": 1518061067, "last_edit_date": 1518061067, "creation_date": 1518059015, "answer_id": 48676858, "question_id": 48674625, "link": "https://stackoverflow.com/questions/48674625/finding-unique-sets-without-subsets-in-python-array/48676858#48676858", "title": "Finding unique sets without subsets in python array", "body": "<p>Here is a numpy solution. I'm using a small example for demonstration but it easily scales (<code>20 x 100,000</code> takes 25 ms on my rather modest laptop, see timings at the end of this post):</p>\n\n<pre><code>&gt;&gt;&gt; import numpy as np\n&gt;&gt;&gt; \n&gt;&gt;&gt; \n&gt;&gt;&gt; a = np.random.randint(0, 2, (5, 10), dtype=np.int8)\n&gt;&gt;&gt; a\narray([[0, 1, 0, 0, 1, 1, 0, 0, 0, 0],\n       [0, 1, 1, 0, 1, 0, 1, 0, 0, 0],\n       [1, 0, 1, 1, 1, 1, 0, 0, 0, 0],\n       [0, 0, 0, 0, 1, 0, 1, 0, 0, 0],\n       [0, 0, 1, 0, 1, 1, 1, 1, 0, 0]], dtype=int8)\n&gt;&gt;&gt; \n&gt;&gt;&gt; padded = np.pad(a,((1,1),(0,0)), 'constant')\n# compare array to itself with offset to mark all switches from\n# 0 to 1 or from 1 to 0\n# then use 'where' to extract the coordinates\n&gt;&gt;&gt; colinds, rowinds = np.where((padded[:-1] != padded[1:]).T)\n&gt;&gt;&gt; \n# the lengths of sets are the differences between switch points\n&gt;&gt;&gt; lengths = rowinds[1::2] - rowinds[::2]\n# now we have the lengths we are free to throw the off-switches away\n&gt;&gt;&gt; colinds, rowinds = colinds[::2], rowinds[::2]\n&gt;&gt;&gt; \n# admire\n&gt;&gt;&gt; from pprint import pprint\n&gt;&gt;&gt; pprint(list(zip(colinds, rowinds, lengths)))\n[(0, 2, 1),\n (1, 0, 2),\n (2, 1, 2),\n (2, 4, 1),\n (3, 2, 1),\n (4, 0, 5),\n (5, 0, 1),\n (5, 2, 1),\n (5, 4, 1),\n (6, 1, 1),\n (6, 3, 2),\n (7, 4, 1)]\n</code></pre>\n\n<p>Timings:</p>\n\n<pre><code>&gt;&gt;&gt; def find_stretches(a):\n...     padded = np.pad(a,((1,1),(0,0)), 'constant')\n...     colinds, rowinds = np.where((padded[:-1] != padded[1:]).T)\n...     lengths = rowinds[1::2] - rowinds[::2]\n...     colinds, rowinds = colinds[::2], rowinds[::2]\n...     return colinds, rowinds, lengths\n... \n&gt;&gt;&gt; a = np.random.randint(0, 2, (20, 100000), dtype=np.int8)\n&gt;&gt;&gt; from timeit import repeat\n&gt;&gt;&gt; kwds = dict(globals=globals(), number=100)\n&gt;&gt;&gt; repeat('find_stretches(a)', **kwds)\n[2.475784719004878, 2.4715258619980887, 2.4705517270049313]\n</code></pre>\n"}], "owner": {"reputation": 537, "user_id": 9330173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e34444e3f1b1f61b338c86a7055d61e9?s=128&d=identicon&r=PG&f=1", "display_name": "Will", "link": "https://stackoverflow.com/users/9330173/will"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 215, "favorite_count": 0, "accepted_answer_id": 48676806, "answer_count": 3, "score": 2, "last_activity_date": 1518385037, "creation_date": 1518043738, "last_edit_date": 1518047076, "question_id": 48674625, "link": "https://stackoverflow.com/questions/48674625/finding-unique-sets-without-subsets-in-python-array", "title": "Finding unique sets without subsets in python array", "body": "<p>I have a dataset that needs to output boolean style data, just 1 and 0, for true or not true. I am trying to parse simple data sets I've processed to look for a subset of information in a numpy array, the array is about 100,000 elements in one direction and 20 in the other. I only need to search along the 20 axis, but I need to do that for each of the 100,000 entries and get output that I can map.</p>\n\n<p>I've produced an array of this size made up of zeros, with the intention to simply mark the matching index indicator to a 1. A main hitch is that if I find a long set (I'm working with long sets to small sets), I need to NOT include any smaller set that's within it.</p>\n\n<p>Sample:\n[0,0,1,1,1,1,1,0,0,1,1,1,0,0,0,1,0,1]</p>\n\n<p>I need to find here that there are 1 group of 5, starting at index 2, and 1 group of 3, starting at index 9, and not return any subset of the group of 5 as though it were a group of 4 or a group of 3, thus leaving the results for all those already covered values. i.e. for groups of 3, the indices 2, 3, 4, 5, and 6 would all remain zero. It doesn't need to be overly efficient, I don't care if it searches anyways, I just need to not keep the result.</p>\n\n<p>Currently I'm using a codeblock basically like this for a simple search:</p>\n\n<pre><code>values = numpy.array([0,1,1,1,1,1,0,0,1,1,1])\nsearchval = [1,2]\nN = len(searchval)\npossibles = numpy.where(values == searchval[0])[0]\nprint(possibles)\nsolns = []\nfor p in possibles:\n    check = values[p:p+N]\n    if numpy.all(check == searchval):\n        solns.append(p)\nprint(solns)\n</code></pre>\n\n<p>I've been wracking my brain trying to come up with a way to restructure this or similar code to produce the desires results. The end goal is to be searching for groups of 9 down to groups of 3, and having effectively a matrix of 1s and 0s indicating if an index has a group starting on it that is as long as we want.</p>\n\n<p>Hopefully someone can point me to what I'm missing to make this work. Thanks!</p>\n"}, {"tags": ["python", "tensorflow", "attributeerror"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 2, "creation_date": 1518043648, "post_id": 48674588, "comment_id": 84347656, "body": "Why have you copy/pasted the traceback but gone to the extra effort of screenshotting the code and hosting it off-site? Please do not post images of code, it should be included in your question. Links can expire and it also means we would have to write any code out verbatim just to set up a test-case."}, {"owner": {"reputation": 5452, "user_id": 6824418, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Du0yh.jpg?s=128&g=1", "display_name": "Allen Lavoie", "link": "https://stackoverflow.com/users/6824418/allen-lavoie"}, "edited": false, "score": 1, "creation_date": 1518471387, "post_id": 48674588, "comment_id": 84512803, "body": "Sounds like you just need to use a more recent version of TensorFlow (a nightly version if necessary)."}], "answers": [{"tags": [], "owner": {"reputation": 692, "user_id": 8185230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c15f96f665456fb798325f989db6e53?s=128&d=identicon&r=PG&f=1", "display_name": "Derek Chow", "link": "https://stackoverflow.com/users/8185230/derek-chow"}, "is_accepted": false, "score": 0, "last_activity_date": 1518542136, "creation_date": 1518542136, "answer_id": 48772206, "question_id": 48674588, "link": "https://stackoverflow.com/questions/48674588/attributeerror-type-object-rewriterconfig-has-no-attribute-on/48772206#48772206", "title": "AttributeError: type object &#39;RewriterConfig&#39; has no attribute &#39;ON&#39;", "body": "<p>What version of Tensorflow are you using? Could you use version 1.4 or newer?</p>\n"}], "owner": {"reputation": 1, "user_id": 9330174, "user_type": "registered", "profile_image": "https://graph.facebook.com/1919563768071050/picture?type=large", "display_name": "Raul Desor", "link": "https://stackoverflow.com/users/9330174/raul-desor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 329, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1518542136, "creation_date": 1518043549, "last_edit_date": 1518047321, "question_id": 48674588, "link": "https://stackoverflow.com/questions/48674588/attributeerror-type-object-rewriterconfig-has-no-attribute-on", "title": "AttributeError: type object &#39;RewriterConfig&#39; has no attribute &#39;ON&#39;", "body": "<p>I ran a Tensorflow programme and the error returned this...</p>\n\n<blockquote>\n  <p>File\n  \"/Users/Rahul/desktop/models/research/object_detection/exporter.py\",\n  line 72, in freeze_graph_with_def_protos\n      layout_optimizer = rewriter_config_pb2.RewriterConfig.ON) AttributeError: type object 'RewriterConfig' has no attribute 'ON'</p>\n</blockquote>\n\n<p>this is the code from line 69 to 77 --></p>\n\n<pre><code>  if optimize_graph:\n\n  logging.info('Graph Rewriter optimizations enabled')\n  rewrite_options = rewriter_config_pb2.RewriterConfig(\n      layout_optimizer = rewriter_config_pb2.RewriterConfig.ON)\n  rewrite_options.optimizers.append('pruning')\n  rewrite_options.optimizers.append('constfold')\n  rewrite_options.optimizers.append('layout')\n  graph_options = tf.GraphOptions(\n      rewrite_options = rewrite_options, infer_shapes=True)\n</code></pre>\n\n<p>Can anyone help, i have no clue where to go</p>\n"}, {"tags": ["python", "scipy", "modeling", "model-fitting"], "comments": [{"owner": {"reputation": 19105, "user_id": 3005167, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/t0bMQ.png?s=128&g=1", "display_name": "kazemakase", "link": "https://stackoverflow.com/users/3005167/kazemakase"}, "edited": false, "score": 2, "creation_date": 1518075728, "post_id": 48674558, "comment_id": 84357215, "body": "Take care with automatic model selection. Often the most complex model/function  will fit the data best."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 9094374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c4834cbd23d69785130eab718d6db54?s=128&d=identicon&r=PG&f=1", "display_name": "Isaac Wong", "link": "https://stackoverflow.com/users/9094374/isaac-wong"}, "edited": false, "score": 0, "creation_date": 1518090338, "post_id": 48675599, "comment_id": 84366565, "body": "Hi Piinthesky, it&#39;s an awesome implementation. Is there a way to return the x-coordinate where the change in slope occurs?"}, {"owner": {"reputation": 8191, "user_id": 8881141, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/C3ydX.jpg?s=128&g=1", "display_name": "Mr. T", "link": "https://stackoverflow.com/users/8881141/mr-t"}, "reply_to_user": {"reputation": 23, "user_id": 9094374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c4834cbd23d69785130eab718d6db54?s=128&d=identicon&r=PG&f=1", "display_name": "Isaac Wong", "link": "https://stackoverflow.com/users/9094374/isaac-wong"}, "edited": false, "score": 0, "creation_date": 1518092173, "post_id": 48675599, "comment_id": 84367768, "body": "Added code to make clear, how to extract slope/intercept for each segment. And please take kazemakase&#39;s comment on board."}, {"owner": {"reputation": 23, "user_id": 9094374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c4834cbd23d69785130eab718d6db54?s=128&d=identicon&r=PG&f=1", "display_name": "Isaac Wong", "link": "https://stackoverflow.com/users/9094374/isaac-wong"}, "edited": false, "score": 0, "creation_date": 1518092991, "post_id": 48675599, "comment_id": 84368365, "body": "How can I add Kazemakase&#39;s comment on board?"}, {"owner": {"reputation": 8191, "user_id": 8881141, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/C3ydX.jpg?s=128&g=1", "display_name": "Mr. T", "link": "https://stackoverflow.com/users/8881141/mr-t"}, "reply_to_user": {"reputation": 23, "user_id": 9094374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c4834cbd23d69785130eab718d6db54?s=128&d=identicon&r=PG&f=1", "display_name": "Isaac Wong", "link": "https://stackoverflow.com/users/9094374/isaac-wong"}, "edited": false, "score": 0, "creation_date": 1518093308, "post_id": 48675599, "comment_id": 84368594, "body": "Don&#39;t neglect it, think about it, when you judge fitted data. Always re-evaluate, if the number you use for your judgement represents reality well. Look at original data - the reason, why I added a plot."}], "tags": [], "owner": {"reputation": 8191, "user_id": 8881141, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/C3ydX.jpg?s=128&g=1", "display_name": "Mr. T", "link": "https://stackoverflow.com/users/8881141/mr-t"}, "is_accepted": true, "score": 0, "last_activity_date": 1518092600, "last_edit_date": 1518092600, "creation_date": 1518049881, "answer_id": 48675599, "question_id": 48674558, "link": "https://stackoverflow.com/questions/48674558/how-to-implement-automatic-model-determination-and-two-state-model-fitting-in-py/48675599#48675599", "title": "How to implement automatic model determination and two state model fitting in python?", "body": "<p>Scipy provides a least square curve fit method that supports custom defined functions. Here is an example for the first model:</p>\n\n<pre><code>import numpy as np\nfrom scipy.optimize import curve_fit\nimport matplotlib.pyplot as plt\n\n#custom fit function - first slope steeper than second slope\ndef two_lin(x, m1, n1, m2, n2):\n    return np.min([m1 * x + n1, m2 * x + n2], axis = 0)\n\n#x/y data points\nx = np.asarray([0, 1, 2,  3,  4,  5,  6,  7,  8,  9,  10])\ny = np.asarray([2, 4, 8, 12, 14, 18, 20, 21, 22, 23,  24])\n#initial guess for a steep rising and plateau phase\nstart_values = [3, 0, 0, 3]\n#curve fitting\nfit_param, pcov = curve_fit(two_lin, x, y, p0 = start_values)\n\n#output of slope/intercept for both parts\nm1, n1, m2, n2 = fit_param\nprint(m1, n1, m2, n2)\n#calculating sum of squared residuals as parameter for fit quality\nr = y - two_lin(x, *fit_param)\nprint(np.sum(np.square(r)))\n\n#point, where the parts intersect \nif m1 != m2:\n    x_intersect = (n2 - n1) / (m1 - m2)\n    print(x_intersect)\nelse:\n    print(\"did not find two linear components\")\n\n#plot data and fit function\nx_fit = np.linspace(-1, 11, 100)  \nplt.plot(x, y, 'o', label='data')\nplt.plot(x_fit, two_lin(x_fit, *fit_param), '--', label='fit')\n\nplt.axis([-2, 12, 0, 30])\nplt.legend()\nplt.show()\n</code></pre>\n\n<p>More information about <a href=\"https://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.curve_fit.html#scipy.optimize.curve_fit\" rel=\"nofollow noreferrer\"><code>scipy.optimize.curve_fit</code> can be found in the reference guide.</a>  For polynomials, numpy provides standard functions with <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.polyfit.html\" rel=\"nofollow noreferrer\"><code>numpy.polyfit</code></a> and <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.poly1d.html#numpy.poly1d\" rel=\"nofollow noreferrer\"><code>numpy.poly1d</code></a>, but you still have to provide the expected degree. </p>\n\n<p>The sum of squared residuals can be used to compare the accuracy of different fit functions. </p>\n"}], "owner": {"reputation": 23, "user_id": 9094374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c4834cbd23d69785130eab718d6db54?s=128&d=identicon&r=PG&f=1", "display_name": "Isaac Wong", "link": "https://stackoverflow.com/users/9094374/isaac-wong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 709, "favorite_count": 0, "accepted_answer_id": 48675599, "answer_count": 1, "score": 2, "last_activity_date": 1518092600, "creation_date": 1518043387, "last_edit_date": 1518043768, "question_id": 48674558, "link": "https://stackoverflow.com/questions/48674558/how-to-implement-automatic-model-determination-and-two-state-model-fitting-in-py", "title": "How to implement automatic model determination and two state model fitting in python?", "body": "<p>Currently, I've been doing model fitting in Prism manually for all my data. It's quite tedious and time consuming. I wonder if there is any way to improve the efficiency in data analysis. I'm familiar with Python so I'd like to start with python to think of a better workflow. Your help is much appreciated.</p>\n\n<p>Two questions:</p>\n\n<ol>\n<li><p>How to do two state model fitting in python (figure 1)? In my case, it will has an initial linear increase followed by horizontal plateau state. I wish to the way of implementation in python and the way to automatically detect the turning point where the changes occurs (Ideally I can get the time where it occurs and the slope as well)</p></li>\n<li><p>Another case is when the state become exponentially or polynomial. Is there any way in python to automatically tell which model is the best.</p></li>\n</ol>\n\n<p><a href=\"https://i.stack.imgur.com/zfEh9.jpg\" rel=\"nofollow noreferrer\">Figure 1</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/zfEh9.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zfEh9.jpg\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "animation", "matplotlib", "annotations"], "comments": [{"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1518089480, "post_id": 48674542, "comment_id": 84365998, "body": "The duplicate shows how to position annotations. If there is a problem with that you need to clearly state why the soltion does not work here. Since you haven&#39;t even tried to use the <code>.xy</code> and <code>.xytext</code> properties, we would simply close this as dupe again."}, {"owner": {"reputation": 7966, "user_id": 2454357, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/8daa3f3fb97961ac7cb5dd716f494bae?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas K&#252;hn", "link": "https://stackoverflow.com/users/2454357/thomas-k%c3%bchn"}, "reply_to_user": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1518089583, "post_id": 48674542, "comment_id": 84366060, "body": "@ImportanceOfBeingErnest I was just in the process of writing an answer. Actually setting <code>.xytext</code> does not seem to work, but <code>.set_position()</code> does, while setting <code>.xy</code> has the desired effect -- somewhat confusing, if you ask me."}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "reply_to_user": {"reputation": 7966, "user_id": 2454357, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/8daa3f3fb97961ac7cb5dd716f494bae?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas K&#252;hn", "link": "https://stackoverflow.com/users/2454357/thomas-k%c3%bchn"}, "edited": false, "score": 0, "creation_date": 1518089676, "post_id": 48674542, "comment_id": 84366125, "body": "@ThomasK&#252;hn Can you write that answer to the duplicate? There in the answer there is a comment about set_position not working, so it would be good to have the working solution at the place where it belongs."}, {"owner": {"reputation": 7966, "user_id": 2454357, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/8daa3f3fb97961ac7cb5dd716f494bae?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas K&#252;hn", "link": "https://stackoverflow.com/users/2454357/thomas-k%c3%bchn"}, "reply_to_user": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1518090952, "post_id": 48674542, "comment_id": 84366968, "body": "@ImportanceOfBeingErnest the answer is now <a href=\"https://stackoverflow.com/a/48684902/2454357\">here</a>"}, {"owner": {"reputation": 349, "user_id": 9029949, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/86a4a54ec7a7d786836ba38f198775d8?s=128&d=identicon&r=PG&f=1", "display_name": "Chopin", "link": "https://stackoverflow.com/users/9029949/chopin"}, "edited": false, "score": 0, "creation_date": 1518393487, "post_id": 48674542, "comment_id": 84475167, "body": "Thanks for your help. The <code>.set_position</code> and <code>.xy</code> work well for the <code>annotation</code> code but not for the <code>arrow</code> code. I can&#39;t seem to get the arrow between coordinates to animate. I&#39;ve updated the question to highlight the error."}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1518396287, "post_id": 48674542, "comment_id": 84475793, "body": "The answer to the duplicate shows how to animate the annotation (with or without the arrow). If that does not work for you, provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> of the issue. Please use the @ notation to notify someone about the edit once it&#39;s done."}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1518396530, "post_id": 48674542, "comment_id": 84475844, "body": "This is btw not the same code. You cannot set the position to a tuple of tuples."}, {"owner": {"reputation": 349, "user_id": 9029949, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/86a4a54ec7a7d786836ba38f198775d8?s=128&d=identicon&r=PG&f=1", "display_name": "Chopin", "link": "https://stackoverflow.com/users/9029949/chopin"}, "edited": false, "score": 0, "creation_date": 1518397006, "post_id": 48674542, "comment_id": 84475964, "body": "Thanks, I thought the error was in that line. So I need to adjust <code>Length_max</code> and <code>Length_min</code>."}, {"owner": {"reputation": 349, "user_id": 9029949, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/86a4a54ec7a7d786836ba38f198775d8?s=128&d=identicon&r=PG&f=1", "display_name": "Chopin", "link": "https://stackoverflow.com/users/9029949/chopin"}, "reply_to_user": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1518410991, "post_id": 48674542, "comment_id": 84479032, "body": "@ImportanceOfBeingErnest, can I post a question asking how I would change the code to not include a tuple of tuples. The <code>xy</code> and <code>xytext</code> in the <code>ax.annotate</code> call require 4 different coordinates as they&#39;re sought from separate lists. Would this still be a duplicate question?"}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1518423429, "post_id": 48674542, "comment_id": 84483622, "body": "Both <code>xy</code> and <code>set_position</code> require a tuple of two elements <code>(x,y)</code>. This is clear from the duplicate, as well as from your working part of the code. It is hence equally clear that if you provide something other than that, like <code>((x1,y1),(x2,y2))</code>, it will not work. So the answer here is still to use the method from the duplicate, where a single coordinate pair is given to those attributes."}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1518423555, "post_id": 48674542, "comment_id": 84483682, "body": "Since the code is not a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, we don&#39;t have any chance finding out why you possibly think you need more coordinates here. I guess if you provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and precisely explain the role of those lists used and the expected outcome, it might become answerable."}, {"owner": {"reputation": 349, "user_id": 9029949, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/86a4a54ec7a7d786836ba38f198775d8?s=128&d=identicon&r=PG&f=1", "display_name": "Chopin", "link": "https://stackoverflow.com/users/9029949/chopin"}, "reply_to_user": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1518481487, "post_id": 48674542, "comment_id": 84516405, "body": "@ImportanceOfBeingErnest. Does this question suffice or I should I still be able to use the code provided in the original question?"}], "answers": [{"comments": [{"owner": {"reputation": 349, "user_id": 9029949, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/86a4a54ec7a7d786836ba38f198775d8?s=128&d=identicon&r=PG&f=1", "display_name": "Chopin", "link": "https://stackoverflow.com/users/9029949/chopin"}, "edited": false, "score": 0, "creation_date": 1518485257, "post_id": 48757941, "comment_id": 84517288, "body": "Thanks. Confusing myself thinking the start position would still read as a tuple of tuples."}], "tags": [], "owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "is_accepted": true, "score": 2, "last_activity_date": 1518483250, "creation_date": 1518483250, "answer_id": 48757941, "question_id": 48674542, "link": "https://stackoverflow.com/questions/48674542/animate-a-annotation-from-a-list-of-xy-coordinates/48757941#48757941", "title": "Animate a annotation from a list of XY Coordinates", "body": "<p>The solution to this is still given in this question:\n<a href=\"https://stackoverflow.com/questions/18351932/animate-points-with-labels-with-mathplotlib?noredirect=1&amp;lq=1\">Animate points with labels with mathplotlib</a></p>\n\n<p>As said several times in the comments, each position is determined by a tuple of two values <code>(x,y)</code>. Hence you cannot provide a tuple of tuples to those positions. Also the start and end of the arrow should of course be at different positions. </p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\nimport matplotlib.animation as animation\n\nx_data = np.random.randint(80, size=(400, 4))\ny_data = np.random.randint(80, size=(400, 4))\n\n\nfig, ax = plt.subplots(figsize = (8,6))\nax.set_xlim(0,80)\nax.set_ylim(0,80)\n\nscatter = ax.scatter(x_data[0], y_data[0], zorder = 5) #Scatter plot\n\nannotation = ax.annotate('  Subject 1', xy=(x_data[0,2],y_data[0,2]))\n\narrow = ax.annotate('', xy = (x_data[0,0], y_data[0,0]), \n                        xytext = (x_data[0,1],y_data[0,1]), \n                        arrowprops = {'arrowstyle': \"&lt;-&gt;\"})\n\ndef animate(i) : \n    scatter.set_offsets(np.c_[x_data[i,:], y_data[i,:]])\n\n    annotation.set_position((x_data[i,2], y_data[i,2]))\n\n    start = (x_data[i,0], y_data[i,0]) \n    end   = (x_data[i,1], y_data[i,1])\n    arrow.set_position(start)\n    arrow.xy = end\n\nani = animation.FuncAnimation(fig, animate, frames=len(x_data), \n                              interval = 700, blit = False)\n\nplt.show()\n</code></pre>\n"}], "owner": {"reputation": 349, "user_id": 9029949, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/86a4a54ec7a7d786836ba38f198775d8?s=128&d=identicon&r=PG&f=1", "display_name": "Chopin", "link": "https://stackoverflow.com/users/9029949/chopin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1495, "favorite_count": 0, "accepted_answer_id": 48757941, "answer_count": 1, "score": 0, "last_activity_date": 1518483250, "creation_date": 1518043328, "last_edit_date": 1518481432, "question_id": 48674542, "link": "https://stackoverflow.com/questions/48674542/animate-a-annotation-from-a-list-of-xy-coordinates", "title": "Animate a annotation from a list of XY Coordinates", "body": "<p>I am trying to animate annotations from a list of xy coordinates. The code below animates the <code>annotation</code> line but I cannot get the <code>arrow</code> function to animate using the same code.</p>\n\n<p>The example dataset is a representation of the data I'm using. It is horizontally formatted. With this, I make a list from all the X-Coordinates and all the Y-Coordiantes from each subject. I then make a list pertaining to each time point, which is each row of data. From that I can plot a scatter and annotations. </p>\n\n<p>However, when trying to plot an arrow between two separate coordinates I run into the error as stated by @ImportanceOfBeingErnest. The function should be a tuple of two elements but I'm having trouble with the arrow animation function as I think I need to provide 4 elements. The X and Y coordinate for the first point and X and Y coordinate for the second point. </p>\n\n<p>Will I have to re-format that data or is there a way to animate the arrow function were 4 tuples are required?</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\nimport matplotlib.animation as animation\n\nx_data = np.random.randint(80, size=(400, 4))\ny_data = np.random.randint(80, size=(400, 4))\n\nlists = [[],[]]\nlists[0] = x_data\nlists[1] = y_data \n\nfig, ax = plt.subplots(figsize = (8,6))\nax.set_xlim(0,80)\nax.set_ylim(0,80)\n\nscatter = ax.scatter(lists[0][0], lists[1][0], zorder = 5) #Scatter plot\n\nannotation = ax.annotate('  Subject 1', xy=(lists[0][0][2],lists[1][0][2]))\n\narrow = ax.annotate('', xy = (lists[0][0][0], lists[1][0][0]), xytext = (lists[0][0][1],lists[1][0][1]), arrowprops = {'arrowstyle': \"&lt;-&gt;\"})\n\ndef animate(i) : \n    scatter.set_offsets([[[[[lists[0][0+i][0], lists[1][0+i][0]], [lists[0][0+i][1], lists[1][0+i][1]], [lists[0][0+i][2], lists[1][0+i][2]], [lists[0][0+i][3], lists[1][0+i][3]]]]]])\n    Subject_x = lists[0][0+i][2]\n    Subject_y = lists[1][0+i][2]\n    annotation.set_position((Subject_x, Subject_y))\n    annotation.xy = (Subject_x, Subject_y)\n    Arrow1 = (lists[0][0+i][0], lists[1][0+i][0]) #Code for arrow animation doesn't work. Produces a blank screen after the 1st frame\n    Arrow2 = (lists[0][0+i][1], lists[1][0+i][1])\n    arrow.set_position((Arrow1, Arrow2))\n    arrow.xy = (Arrow1, Arrow2)\n\nani = animation.FuncAnimation(fig, animate,\n                          interval = 50, blit = False)\n\nplt.show()\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 1, "creation_date": 1518043496, "post_id": 48674539, "comment_id": 84347590, "body": "<code>add_internal</code> doesn&#39;t even appear in the code you&#39;ve posted. Please include the full traceback."}, {"owner": {"reputation": 177, "user_id": 7186024, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7523093d3e8fc31cade4ee3788620341?s=128&d=identicon&r=PG", "display_name": "Link", "link": "https://stackoverflow.com/users/7186024/link"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1518529614, "post_id": 48674539, "comment_id": 84537068, "body": "@roganjosh Well, that&#39;s the problem - I don&#39;t really understand why it is needed or what it even is. The reason it is not in my code is because it isn&#39;t there at all."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1518531586, "post_id": 48674539, "comment_id": 84538470, "body": "we don&#39;t understand where it is either because you haven&#39;t posted the complete traceback as I requested. Just because it doesn&#39;t appear in the code that you actually wrote, doesn&#39;t mean that it&#39;s not integral to the running of your script: that code exists somewhere in one of the modules that you have imported (or something similar)"}], "owner": {"reputation": 177, "user_id": 7186024, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7523093d3e8fc31cade4ee3788620341?s=128&d=identicon&r=PG", "display_name": "Link", "link": "https://stackoverflow.com/users/7186024/link"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 253, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1518043315, "creation_date": 1518043315, "question_id": 48674539, "link": "https://stackoverflow.com/questions/48674539/attributeerror-nonetype-object-has-no-attribute-add-internal", "title": "AttributeError: &#39;NoneType&#39; object has no attribute &#39;add_internal", "body": "<p>I am making a 2d platforming game in Pygame.</p>\n\n<p>'AttributeError: 'NoneType' object has no attribute 'add_internal''</p>\n\n<p>This error is occuring on this line:\nself.sprites.add(playerbanner)</p>\n\n<pre><code>     class Player(pygame.sprite.Sprite):\n\n         def __init__(self,classname,movementspeed,jumpheight,damage,x,y,sprites,platforms,bullets,banner,spawndirection):\n            super().__init__()\n            self.classname=classname\n            self.speed=movementspeed\n            self.height=jumpheight\n            self.damage=damage\n            self.x=x\n            self.y=y\n\n            self.banner=banner\n            self.startdirectionspawn=spawndirection\n\n            self.walking=False\n            self.jumping=False\n            self.currentframe=0\n            self.lastupdate=0\n\n            self.velocityx=0\n            self.velocityy=0\n            self.accelerationy=0\n\n            self.lastpress=1\n\n            self.loadframes(classname)\n\n            self.image=self.stationary\n\n            self.rect=self.image.get_rect()\n            self.rect.center=(self.x,self.y)\n            self.image.set_colorkey(BLACK)\n\n            self.sprites=sprites\n            self.platforms=platforms\n            self.bullets=bullets \n\n        def countdown(self):\n            gamecountdown(6)\n\n\n        def updateposition(self,hit,jump):\n\n            if self.accelerationy&lt;0:\n                hit=False\n\n            if self.accelerationy!=0:\n                jump=False\n\n            if hit==False:\n                self.accelerationy+=0.1\n\n            if jump==True:\n                self.accelerationy=-15     \n\n            if hit==True:\n                self.velocityy=0\n                self.velocityx=0\n                self.accelerationy=0\n\n            pressed=pygame.key.get_pressed()\n            if pressed[pygame.K_a]:\n                self.velocityx=-self.speed\n                self.animate('left')\n                self.lastpress='a'\n\n            if pressed[pygame.K_d]:\n                self.velocityx=self.speed\n                self.animate('right')\n                self.lastpress='d'\n\n            if not pressed[pygame.K_a] and not pressed[pygame.K_d]:\n                if self.lastpress=='d':\n                    self.image=self.stationary\n\n                elif self.lastpress=='a':\n                    self.image=self.stationarya\n\n            self.x+=self.velocityx\n            self.y+=self.velocityy + (0.2*self.accelerationy)\n\n            self.rect.center=(self.x,self.y)\n\n            playerbanner=messagedisplay(self.banner,BLACK,self.x-15,self.y-50, 30, 30, 'smallfont')\n            self.sprites.add(playerbanner)\n\n\n            self.image.set_colorkey(BLACK)\n            pygame.display.update()\n</code></pre>\n\n<p>I am trying to get a 'player 1' to print above the player's head. When I do not put it into a group, it still prints, but flickers on and off.</p>\n\n<p>The group print statements are called from another file.</p>\n"}, {"tags": ["python", "json", "python-3.x", "parsing"], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 7314467, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/cf57f45ededf75a025da421292bf2375?s=128&d=identicon&r=PG&f=1", "display_name": "cbos93", "link": "https://stackoverflow.com/users/7314467/cbos93"}, "edited": false, "score": 0, "creation_date": 1518052495, "post_id": 48675475, "comment_id": 84350360, "body": "Yes it does! Thank you for this! One last additional question, how could we set it as a loop function? Say, other options are not available yet, but we want the function to sleep and then try again. Would we use a while or for loop for get_option(size)?"}, {"owner": {"reputation": 1549, "user_id": 6084948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2e5d032c08808069ed37e38ff8e81e4?s=128&d=identicon&r=PG", "display_name": "briancaffey", "link": "https://stackoverflow.com/users/6084948/briancaffey"}, "reply_to_user": {"reputation": 35, "user_id": 7314467, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/cf57f45ededf75a025da421292bf2375?s=128&d=identicon&r=PG&f=1", "display_name": "cbos93", "link": "https://stackoverflow.com/users/7314467/cbos93"}, "edited": false, "score": 0, "creation_date": 1518053229, "post_id": 48675475, "comment_id": 84350532, "body": "cool. sure, see the edits I just made. You may want to handle &quot;Sold Out&quot; options differently. You just need to make sure that what you want to scrape has a consistent structure."}], "tags": [], "owner": {"reputation": 1549, "user_id": 6084948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2e5d032c08808069ed37e38ff8e81e4?s=128&d=identicon&r=PG", "display_name": "briancaffey", "link": "https://stackoverflow.com/users/6084948/briancaffey"}, "is_accepted": true, "score": 1, "last_activity_date": 1518053141, "last_edit_date": 1518053141, "creation_date": 1518049080, "answer_id": 48675475, "question_id": 48674519, "link": "https://stackoverflow.com/questions/48674519/matching-input-text-in-html-parse-with-python/48675475#48675475", "title": "Matching Input Text in HTML parse with Python", "body": "<p>This is an interesting question. Since you are trying to match a word in the text of an <code>option</code> tag and get an attribute from that tag, I would do something like this:</p>\n\n<pre><code>import requests, re, json, time, sys, os,webbrowser\nimport subprocess as s\nfrom bs4 import BeautifulSoup as bs\nglobal size\n\nsize = \"Medium\"\n\nhtml  = \"\"\"&lt;option selected=\"selected\" data-sku=\"51728-003\" value=\"660654030868\"&gt;Medium - $138.00 USD&lt;/option&gt;\"\"\"\n\nurl = \"https://us.octobersveryown.com/collections/shop-all/products/varsity-ovo-polartec-half-zip-pullover-black\"\n\ndef getStuff():\n    print ('')\n    session = requests.session()\n    response = session.get(url)\n    soup = bs(response.text, 'html.parser')\n    prod_name = soup.find('h1',{'itemprop':'name'}).text\n    price = soup.find('span',{'id':'ProductPrice'}).text\n    #variant = soup.find(text=size).findPrevious('value').text\n    def get_option(size):\n        options = soup.find_all('option')\n        target_option = [o for o in options if size in o.text][0]\n        value = target_option['value']\n        return value\n    def get_options_and_values():\n        option_dic = {}\n        options = soup.find_all('option')\n        for o in options:\n            try:\n                option_dic[o.text.split('-')[0].strip()] = int(o['value'])\n            except:\n                pass\n        return option_dic\n    print(get_options_and_values())\n    print(\"\\nProd Name: \"+prod_name)\n    print(\"\\nPrice: \"+price.strip())\n    variant = get_option(size)\n    print(\"\\nMatching Variant Value: \"+variant)\n\ngetStuff()\n</code></pre>\n\n<p>This gives me: </p>\n\n<pre><code>{'Medium': 660654030868, 'Large': 660654063636}\n\nProd Name: VARSITY OVO POLARTEC\u00ae HALF-ZIP PULLOVER - BLACK\n\nPrice: $138.00\n\nMatching Variant Value: 660654030868\n</code></pre>\n\n<p>This would allow you to change the size you want to get easily. Does that make sense?</p>\n"}], "owner": {"reputation": 35, "user_id": 7314467, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/cf57f45ededf75a025da421292bf2375?s=128&d=identicon&r=PG&f=1", "display_name": "cbos93", "link": "https://stackoverflow.com/users/7314467/cbos93"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 48675475, "answer_count": 1, "score": 2, "last_activity_date": 1518053141, "creation_date": 1518043223, "question_id": 48674519, "link": "https://stackoverflow.com/questions/48674519/matching-input-text-in-html-parse-with-python", "title": "Matching Input Text in HTML parse with Python", "body": "<p>I thought just setting \"text=size\" would result in the value i need. Maybe I am miss understanding? What am i doing wrong?</p>\n\n<pre><code>import requests, re, json, time, sys, os,webbrowser\nimport subprocess as s\nfrom bs4 import BeautifulSoup as bs\nglobal size\n\nsize = \"Medium\"\n\n'''html  = &lt;option selected=\"selected\" data-sku=\"51728-003\" value=\"660654030868\"&gt;Medium - $138.00 USD&lt;/option&gt;'''\n\nurl = \"https://us.octobersveryown.com/collections/shop-all/products/varsity-ovo-polartec-half-zip-pullover-black\"\n\ndef getStuff():\n    print ('')\nsession = requests.session()\nresponse = session.get(url)\nsoup = bs(response.text, 'html.parser')\nprod_name = soup.find('h1',{'itemprop':'name'}).text\nprice = soup.find('span',{'id':'ProductPrice'}).text\nvariant = soup.find(text=size).findPrevious('value').text\n#variant =\"notworking\"\nprint(\"\\nProd Name: \"+prod_name)\nprint(\"\\nPrice: \"+price)\nprint(\"\\nMatching Variant Value: \"+variant)\n\ngetStuff()\n</code></pre>\n\n<p>My error is</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"trythis.py\", line 20, in &lt;module&gt;\n    variant = soup.find(text=size).findPrevious('value').text\nAttributeError: 'NoneType' object has no attribute 'text'\n</code></pre>\n"}, {"tags": ["python", "python-requests", "apple-news"], "comments": [{"owner": {"reputation": 14996, "user_id": 190823, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/521yb.jpg?s=128&g=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/190823/jens"}, "edited": false, "score": 0, "creation_date": 1518095606, "post_id": 48674485, "comment_id": 84370126, "body": "Did you intentionally leave out values for <code>channel_id</code>, <code>api_key_id</code> and <code>api_key_secret</code>? Because if you use the script above as you posted it, it won&#39;t work because you can not authenticate. This would also fit the error message you got: <code>Wrong signature</code>."}, {"owner": {"reputation": 1, "user_id": 9330102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a9c1d2a78a9ddfb6249a1ef41bdc367?s=128&d=identicon&r=PG&f=1", "display_name": "sunil", "link": "https://stackoverflow.com/users/9330102/sunil"}, "reply_to_user": {"reputation": 14996, "user_id": 190823, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/521yb.jpg?s=128&g=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/190823/jens"}, "edited": false, "score": 0, "creation_date": 1518110166, "post_id": 48674485, "comment_id": 84380562, "body": "Yes, intentionally left out the values."}], "answers": [{"tags": [], "owner": {"reputation": 437, "user_id": 3307215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8e4a6e043dfea2e3f467ee2156e0d0f?s=128&d=identicon&r=PG", "display_name": "Benjy Malca", "link": "https://stackoverflow.com/users/3307215/benjy-malca"}, "is_accepted": false, "score": 0, "last_activity_date": 1553113153, "creation_date": 1553113153, "answer_id": 55269524, "question_id": 48674485, "link": "https://stackoverflow.com/questions/48674485/apple-news-api-post-request/55269524#55269524", "title": "APPLE NEWS API POST Request", "body": "<p>This script requires a folder path as an argument. This folder has to have the following structure:</p>\n\n<pre><code>--- folder\n |---- article.json\n |---- image.jpg\n</code></pre>\n\n<p>Image files are optional if your article.json file requires them.</p>\n\n<p>When the python file is executed, it should be executed like this :</p>\n\n<pre><code>python script_name.py 'folder/'\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9330102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a9c1d2a78a9ddfb6249a1ef41bdc367?s=128&d=identicon&r=PG&f=1", "display_name": "sunil", "link": "https://stackoverflow.com/users/9330102/sunil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 351, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1553117940, "creation_date": 1518043095, "last_edit_date": 1553117940, "question_id": 48674485, "link": "https://stackoverflow.com/questions/48674485/apple-news-api-post-request", "title": "APPLE NEWS API POST Request", "body": "<p>I am trying to post articles using apple news API tried using the Postman following all the steps provided by documentation, as well executed the python code provided in apple documentation.</p>\n\n<pre><code>    POSThttps://news-api.apple.com/channels/channelID/articles2018-02-06T05:15:53Zmultipart/form-data; \nAuthorization headers authorization = {str} 'HHMAC; key=ID; signature=ID; date=2018-02-07T05:15:53Z'\n</code></pre>\n\n<p>got: error stating Wrong singature</p>\n\n<p>Python </p>\n\n<pre><code>import requests\nimport base64\nfrom hashlib import sha256\nimport hmac\nfrom datetime import datetime\nimport glob\nimport argparse\nimport os\nimport mimetypes\nfrom requests.packages.urllib3.filepost import encode_multipart_formdata\nfrom requests.packages.urllib3.fields import RequestField\n\narg_parser = argparse.ArgumentParser(description='Publish an article using the Apple News API')\narg_parser.add_argument('article_directory', metavar='ARTICLE_DIR', type=str, help='A directory containing an article.JSON file and resources')\nargs = arg_parser.parse_args()\n\nchannel_id = '[YOUR CHANNEL-ID]'\napi_key_id = '[YOUR API-KEY]'\napi_key_secret = '[YOUR API KEY-SECRET]'\nmethod = 'POST'\nurl = 'https://news-api.apple.com/channels/%s/articles' % channel_id\nsession = requests.Session()\nsession.verify = False\n\ndef part(filename):\n    name = os.path.basename(filename)\n    with open(filename) as f:\n        data = f.read()\n    part = RequestField(name, data)\n    part.headers['Content-Disposition'] = 'form-data; filename=\"%s\"; size=%d'  % (name, os.stat(filename).st_size)\n    part.headers['Content-Type'] = 'application/JSON' if name.endswith('.JSON') else 'application/octet-stream'\n    return part\n\ndef send_signed_request(method, url, filenames):\n    body, content_type = encode_multipart_formdata([part(f) for f in filenames])\n    req = requests.Request(method, url, data=body, headers={'Content-Type': content_type})\n    req = req.prepare()\n    date = datetime.utcnow().strftime('%Y-%m-%dT%H:%M:%SZ')\n    canonical_request = method + url + str(date) + content_type + body\n    key = base64.b64decode(api_key_secret)\n    hashed = hmac.new(key, canonical_request, sha256)\n    signature = hashed.digest().encode('base64').rstrip('/n')\n    authorization = 'HHMAC; key=%s; signature=%s; date=%s' % (api_key_id, str(signature), date)\n    req.headers['Authorization'] = authorization\n    return session.send(req)\n\n\nresponse = send_signed_request(method, url, glob.glob('%s/*' % args.article_directory))\n\nprint response.status_code\nprint response.text\n</code></pre>\n\n<blockquote>\n  <p>error: {\"errors\":[{\"code\":\"MISSING\",\"keyPath\":[\"article.json\"]}]}</p>\n</blockquote>\n\n<p>I also converted the python code to java and executed seeing the same error but able to read articles.</p>\n\n<p>Question:\nAny suggestions on what is going wrong or In order to create articles does apple account be approved by Apple etc. Any information would be helpfull.</p>\n"}, {"tags": ["python", "python-3.x", "for-loop"], "answers": [{"tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 2, "last_activity_date": 1518045185, "last_edit_date": 1518045185, "creation_date": 1518043439, "answer_id": 48674566, "question_id": 48674478, "link": "https://stackoverflow.com/questions/48674478/invalid-syntax-in-a-for-loop/48674566#48674566", "title": "Invalid Syntax in a for-loop", "body": "<p>'To' is a character string, and the <code>for</code> statement makes no sense.</p>\n\n<p><code>To</code> is a variable name.  Don't confuse them.  You need</p>\n\n<pre><code>while To &lt;= 10000:\n    ....\n</code></pre>\n\n<p>Better yet, drop the increment statement at the bottom of the loop, and use the <code>for</code> properly, adjusting the values for your needs:</p>\n\n<pre><code>for To in range(10000):\n</code></pre>\n\n<hr>\n\n<p>Also, please use descriptive variable names; <code>To</code> and <code>Xo</code> don't tell us anything, and <code>To</code> is readily confused with a reserved word in many languages.</p>\n"}, {"tags": [], "owner": {"reputation": 341, "user_id": 2800865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e4166c3049508ec9e5ae242e040ea1a?s=128&d=identicon&r=PG", "display_name": "sam", "link": "https://stackoverflow.com/users/2800865/sam"}, "is_accepted": false, "score": 0, "last_activity_date": 1518043744, "creation_date": 1518043744, "answer_id": 48674627, "question_id": 48674478, "link": "https://stackoverflow.com/questions/48674478/invalid-syntax-in-a-for-loop/48674627#48674627", "title": "Invalid Syntax in a for-loop", "body": "<p>It seems like you're trying to create an array of numbers, starting at 1 and increasing by .25 each time, until the final value is 10000.</p>\n\n<p>If that's the case, NumPy will do this for you (<a href=\"https://docs.scipy.org/doc/numpy-1.10.1/reference/generated/numpy.arange.html\" rel=\"nofollow noreferrer\">documentation</a>):</p>\n\n<pre><code>T = np.arange(1.0, 10000, .25)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8394994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef867131824f30c52e75730c2bd18b82?s=128&d=identicon&r=PG&f=1", "display_name": "Sol.Aurum", "link": "https://stackoverflow.com/users/8394994/sol-aurum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 162, "favorite_count": 1, "answer_count": 2, "score": -3, "last_activity_date": 1518045185, "creation_date": 1518043042, "last_edit_date": 1518045146, "question_id": 48674478, "link": "https://stackoverflow.com/questions/48674478/invalid-syntax-in-a-for-loop", "title": "Invalid Syntax in a for-loop", "body": "<p>Here is the code:</p>\n\n<pre><code>...\n\nT=[]\nTo=1\nfor 'To' &lt;= 10000:\n    T.append(To)\n    To=To+0.25\n...\n</code></pre>\n\n<p>And the error is:</p>\n\n<pre><code>    for 'To' &lt;= 10000:\n              ^\nSyntaxError: invalid syntax\n</code></pre>\n\n<p>I don't know why this can't be run. Is the symbol \"&lt;=\" wrong?\nI checked the indentations and read almost all the questions on this website about similar errors, but I do not see where my error is.</p>\n"}, {"tags": ["python", "setuptools"], "comments": [{"owner": {"reputation": 929, "user_id": 6146337, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/10207160730031528/picture?type=large", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/6146337/sebastian"}, "edited": false, "score": 0, "creation_date": 1518043021, "post_id": 48674439, "comment_id": 84347385, "body": "could you include the import statement that is generating the error?"}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1518043085, "post_id": 48674439, "comment_id": 84347427, "body": "Don&#39;t pin versions in <code>install_requires</code>."}, {"owner": {"reputation": 69, "user_id": 7611054, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c7f7baac162bd9454aa44636e9427069?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/7611054/michael"}, "reply_to_user": {"reputation": 929, "user_id": 6146337, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/10207160730031528/picture?type=large", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/6146337/sebastian"}, "edited": false, "score": 0, "creation_date": 1518090117, "post_id": 48674439, "comment_id": 84366410, "body": "@Sebastian the import statement is <code>from accountService.eventSourcing.aggregates import db</code>"}, {"owner": {"reputation": 69, "user_id": 7611054, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c7f7baac162bd9454aa44636e9427069?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/7611054/michael"}, "edited": false, "score": 0, "creation_date": 1518093300, "post_id": 48674439, "comment_id": 84368585, "body": "Dont know if this helps but I have the same issue with <code>pip install --editable .</code> vs just <code>pip install .</code>"}], "owner": {"reputation": 69, "user_id": 7611054, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c7f7baac162bd9454aa44636e9427069?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/7611054/michael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1518042889, "creation_date": 1518042889, "question_id": 48674439, "link": "https://stackoverflow.com/questions/48674439/setuptools-application-fails-to-find-package-functions-after-setup-py-install-y", "title": "setuptools application fails to find package functions after setup.py install, yet works for setup.py develop", "body": "<p>Im struggling to run my app after using setuptools <code>python setup.py install</code>. I get a failed import error, <code>ImportError: cannot import name 'db'</code> despite the variable being in the correct module. When I print <code>dir(package)</code> I get the output:<br>\n<code>['__builtins__', '__cached__', '__doc__', '__file__', '__loader__', '__name__', '__package__', '__path__', '__spec__']</code><br>\nAs if the variable is not in the file at all. However when I run <code>python setup.py develop</code> the application works fine, and the same print returns:<br>\n<code>['Account', 'Constants', 'SQLAlchemy', '__builtins__', '__cached__', '__doc__', '__file__', '__loader__', '__name__', '__package__', '__spec__', 'current_app', 'db', 'requests', 'take_snapshot']</code><br>\nShowing the missing variable.  </p>\n\n<p>My full setup.py files looks like this:</p>\n\n<pre><code>from setuptools import setup, find_packages\n\nsetup(\n    name='accountService',\n    packages=find_packages(),\n    include_package_data=True,\n    install_requires=[\n        'certifi==2017.11.5',\n        'chardet==3.0.4',\n        'click==6.7',\n        'Flask==0.12.2',\n        'Flask-API==1.0',\n        'Flask-SQLAlchemy==2.3.2',\n        'Flask-Testing==0.7.1',\n        'idna==2.6',\n        'itsdangerous==0.24',\n        'Jinja2==2.10',\n        'MarkupSafe==1.0',\n        'requests==2.18.4',\n        'SQLAlchemy==1.1.15',\n        'urllib3==1.22',\n        'Werkzeug==0.13',\n    ],\n    setup_requires=[\n        'pytest-runner'\n    ],\n    tests_require=[\n        'pytest'\n    ],\n)\n</code></pre>\n\n<p>My egg SOURCES.txt is: </p>\n\n<pre><code>README.md\nsetup.cfg\nsetup.py\naccountService/__init__.py\naccountService/factory.py\naccountService/run_app.py\naccountService.egg-info/PKG-INFO\naccountService.egg-info/SOURCES.txt\naccountService.egg-info/dependency_links.txt\naccountService.egg-info/requires.txt\naccountService.egg-info/top_level.txt\naccountService/blueprints/__init__.py\naccountService/blueprints/accountService.py\naccountService/eventSourcing/__init__.py\naccountService/eventSourcing/aggregates.py\naccountService/eventSourcing/commands.py\naccountService/eventSourcing/events.py\naccountService/eventSourcing/handlers.py\naccountService/eventSourcing/util.py\ntests/__init__.py\ntests/test_account_service.py\ntests/util.py\n</code></pre>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1518042866, "post_id": 48674398, "comment_id": 84347316, "body": "You cannot mutate a tuple, you can mutate objects contained in a tuple, but since <code>int</code> objects are immutable, you&#39;ll have to build a new tuple. Thisshould be simple though:<code>lst = t[1]; lst.append(val); new_t = (sum(lst), lst)</code>"}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 0, "creation_date": 1518043005, "post_id": 48674398, "comment_id": 84347380, "body": "@Kei, going backwards, do you really need to keep your variable as a <code>tuple</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 455, "user_id": 6488953, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-ZMwb4tDGzZo/AAAAAAAAAAI/AAAAAAAAARg/sB7HydA-Pdg/photo.jpg?sz=128", "display_name": "Kei", "link": "https://stackoverflow.com/users/6488953/kei"}, "edited": false, "score": 0, "creation_date": 1518150117, "post_id": 48674421, "comment_id": 84396027, "body": "Thanks! This is what I&#39;m looking for!"}], "tags": [], "owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "is_accepted": true, "score": 3, "last_activity_date": 1518042836, "creation_date": 1518042836, "answer_id": 48674421, "question_id": 48674398, "link": "https://stackoverflow.com/questions/48674398/add-value-to-a-tuple-of-list-and-int-in-python3/48674421#48674421", "title": "Add value to a tuple of list and int in Python3", "body": "<p>No, you can't because tuples are immutable and therefore the sum can not be modified.  You will have to create a new tuple.</p>\n\n<pre><code>&gt;&gt;&gt; t = (5,[2,3])\n&gt;&gt;&gt; val = 5\n&gt;&gt;&gt; t_new = t[0] + val, t[1] + [val]\n&gt;&gt;&gt; t_new\n(10, [2, 3, 5])\n</code></pre>\n\n<p>However, you might want to consider using a mutable data structure in the first place.  </p>\n"}, {"tags": [], "owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "is_accepted": false, "score": 1, "last_activity_date": 1518043210, "last_edit_date": 1518043210, "creation_date": 1518042844, "answer_id": 48674423, "question_id": 48674398, "link": "https://stackoverflow.com/questions/48674398/add-value-to-a-tuple-of-list-and-int-in-python3/48674423#48674423", "title": "Add value to a tuple of list and int in Python3", "body": "<p>Since tuples are immutable, you will have to create an entirely new tuple:</p>\n\n<pre><code>_, b = (5,[2,3])\nfinal_results = (sum(b+[5]), b+[5])\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>(10, [2, 3, 5])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4435, "user_id": 3157209, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f09e0aa62a26ffcf34ba27a698880238?s=128&d=identicon&r=PG&f=1", "display_name": "zimmerrol", "link": "https://stackoverflow.com/users/3157209/zimmerrol"}, "is_accepted": false, "score": 3, "last_activity_date": 1518042854, "creation_date": 1518042854, "answer_id": 48674427, "question_id": 48674398, "link": "https://stackoverflow.com/questions/48674398/add-value-to-a-tuple-of-list-and-int-in-python3/48674427#48674427", "title": "Add value to a tuple of list and int in Python3", "body": "<p>You can do this like this:</p>\n\n<pre><code>def addTup(tup, x):\n    return (tup[0]+x, tup[1]+[x])\n\na = (5,[2,3])\naddTup(a, 22)\n</code></pre>\n\n<p>You have to create a new tuple which mainly consists out of the values of the old tuple. This code will add the new item to your list and will update the sum value simultaneously. You cannot simply modify the tuple it self, as tuples are immutable in python, as you can see <a href=\"https://stackoverflow.com/questions/9714815/why-tuple-is-not-mutable-in-python\">here</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": false, "score": 1, "last_activity_date": 1518044318, "creation_date": 1518044318, "answer_id": 48674725, "question_id": 48674398, "link": "https://stackoverflow.com/questions/48674398/add-value-to-a-tuple-of-list-and-int-in-python3/48674725#48674725", "title": "Add value to a tuple of list and int in Python3", "body": "<p>This is just a fancy version of <a href=\"https://stackoverflow.com/a/48674427/9209546\">@FlashTek's answer</a>. The real question is whether there is a purpose to holding these values in a <code>tuple</code> if they are not immutable.</p>\n\n<pre><code>from collections import namedtuple\n\ndef add_value(n, x):\n    return n._replace(arrsum=n.arrsum+x, arr=n.arr+[x])\n\nSumArray = namedtuple('SumArray', ['arrsum', 'arr'])\n\ns = SumArray(5, [2, 3])\n\nt = add_value(s, 10)\n# SumArray(arrsum=15, arr=[2, 3, 10])\n</code></pre>\n"}], "owner": {"reputation": 455, "user_id": 6488953, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-ZMwb4tDGzZo/AAAAAAAAAAI/AAAAAAAAARg/sB7HydA-Pdg/photo.jpg?sz=128", "display_name": "Kei", "link": "https://stackoverflow.com/users/6488953/kei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 517, "favorite_count": 0, "accepted_answer_id": 48674421, "answer_count": 4, "score": 1, "last_activity_date": 1518044318, "creation_date": 1518042697, "question_id": 48674398, "link": "https://stackoverflow.com/questions/48674398/add-value-to-a-tuple-of-list-and-int-in-python3", "title": "Add value to a tuple of list and int in Python3", "body": "<p>I was thinking if I have a tuple of int and list:</p>\n\n<pre><code>(5,[2,3])\n</code></pre>\n\n<p>The first element id represents the sum of the list.</p>\n\n<p>Can I append a value to the list and update the sum at the same time?\nThe results should look something like this:</p>\n\n<pre><code>(10,[2,3,5])\n</code></pre>\n\n<p>Thanks for any help.</p>\n"}, {"tags": ["javascript", "python", "django", "django-models", "hyperlink"], "comments": [{"owner": {"reputation": 3517, "user_id": 8069748, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g9ZD9.png?s=128&g=1", "display_name": "Navid Zarepak", "link": "https://stackoverflow.com/users/8069748/navid-zarepak"}, "edited": false, "score": 0, "creation_date": 1518085383, "post_id": 48674396, "comment_id": 84363201, "body": "So you have a text field in a model that contains bunch of texts which there is some medical terms including in the text? if that&#39;s correct then i guess you can try this: search for your medical terms in the text field and replace them with a link. like: &quot;Item X&quot; to <code>&lt;a href=&#39;&#47;itemx&#39;&gt;Item X&lt;&#47;a&gt;</code>. and then use autoscape tag in your template: <a href=\"https://docs.djangoproject.com/en/2.0/ref/templates/builtins/#autoescape\" rel=\"nofollow noreferrer\">docs.djangoproject.com/en/2.0/ref/templates/builtins/&hellip;</a>"}, {"owner": {"reputation": 47, "user_id": 9328940, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/--Z-N-7Iy2Q8/AAAAAAAAAAI/AAAAAAAAAbs/KPgPovvgz4I/photo.jpg?sz=128", "display_name": "Raghav Suri", "link": "https://stackoverflow.com/users/9328940/raghav-suri"}, "reply_to_user": {"reputation": 3517, "user_id": 8069748, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g9ZD9.png?s=128&g=1", "display_name": "Navid Zarepak", "link": "https://stackoverflow.com/users/8069748/navid-zarepak"}, "edited": false, "score": 0, "creation_date": 1518114277, "post_id": 48674396, "comment_id": 84382880, "body": "Thanks. What I am trying to do is to automatize the search and hyperlinking of the medical terms, that are all stored in a separate model. Manual hyperlinking is needlessly repetitive and messy, leaving a lot of room for human error."}, {"owner": {"reputation": 3517, "user_id": 8069748, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g9ZD9.png?s=128&g=1", "display_name": "Navid Zarepak", "link": "https://stackoverflow.com/users/8069748/navid-zarepak"}, "edited": false, "score": 0, "creation_date": 1518123463, "post_id": 48674396, "comment_id": 84387816, "body": "Well, i don&#39;t think you have any option but to go for messy stuff here. I prefer to scan the text before saving it and make a relation for that row to the items on medical terms mode. then you will know which terms has been used in this text. and if you don&#39;t wan&#39;t to search and replace the text, you can add a JavaScript file to your template to that for you. those relations will help you to find those terms faster because you don&#39;t need to search for all of them but just the ones you know they&#39;ve been used in the text. This is a cleaner way but browser will do it not your server so ..."}, {"owner": {"reputation": 3517, "user_id": 8069748, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g9ZD9.png?s=128&g=1", "display_name": "Navid Zarepak", "link": "https://stackoverflow.com/users/8069748/navid-zarepak"}, "edited": false, "score": 0, "creation_date": 1518123611, "post_id": 48674396, "comment_id": 84387898, "body": "Also you can make a template tag to replace those tags so you won&#39;t need the js codes and your server will handle it too. If you don&#39;t want you text to be filled with bunch of html &lt;a&gt; tags then go for option 2 or 3. if it&#39;s okay for you to have bunch of html codes in your text then the first option is the fastest."}], "owner": {"reputation": 47, "user_id": 9328940, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/--Z-N-7Iy2Q8/AAAAAAAAAAI/AAAAAAAAAbs/KPgPovvgz4I/photo.jpg?sz=128", "display_name": "Raghav Suri", "link": "https://stackoverflow.com/users/9328940/raghav-suri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 127, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1518733121, "creation_date": 1518042686, "last_edit_date": 1518733121, "question_id": 48674396, "link": "https://stackoverflow.com/questions/48674396/searching-for-keywords-and-creating-links-automatically-in-python-and-django", "title": "Searching for keywords and creating links automatically in Python and Django", "body": "<p>I am creating an information web application (in Django) that often uses some medical terms. The medical terms and their explanations are stored in a separate model/database. As of now, I am manually creating links to description pages for each medical term.</p>\n\n<p>I was wondering if there is a way to get the code automatically search a page contents for medical terms, and automatically create links (or popovers) to their description pages. All the pages are dynamic, and the medical terms are stored in their own separate model. So far, the medical terms model does not have a relationship with any other models</p>\n\n<p>Any thoughts if this can be done (maybe through JS or Python), and if so, how to go about it?</p>\n"}, {"tags": ["python", "arrays", "pandas", "unique"], "comments": [{"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "edited": false, "score": 1, "creation_date": 1518043019, "post_id": 48674395, "comment_id": 84347384, "body": "<code>train[&#39;brain_name&#39;].unique().tolist()</code>"}, {"owner": {"reputation": 2858, "user_id": 1054154, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/274a8902ebfa77671b35cc3be0948522?s=128&d=identicon&r=PG", "display_name": "tozCSS", "link": "https://stackoverflow.com/users/1054154/tozcss"}, "edited": false, "score": 1, "creation_date": 1518045015, "post_id": 48674395, "comment_id": 84348166, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/19124601/is-there-a-way-to-pretty-print-the-entire-pandas-series-dataframe\">Is there a way to (pretty) print the entire Pandas Series / DataFrame?</a>"}, {"owner": {"reputation": 51, "user_id": 9047093, "user_type": "registered", "profile_image": "https://graph.facebook.com/1538081202973443/picture?type=large", "display_name": "WJ Zhao", "link": "https://stackoverflow.com/users/9047093/wj-zhao"}, "edited": false, "score": 0, "creation_date": 1518491895, "post_id": 48674395, "comment_id": 84518650, "body": "i don&#39;t know how to accept Scott&#39;s answer. it is a comment not an answer format. pls help."}], "answers": [{"tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": false, "score": 0, "last_activity_date": 1518044627, "creation_date": 1518044627, "answer_id": 48674780, "question_id": 48674395, "link": "https://stackoverflow.com/questions/48674395/how-to-print-out-each-single-unique-value-in-a-column/48674780#48674780", "title": "How to print out each single unique value in a column", "body": "<p>This should work:</p>\n\n<pre><code>print('\\n'.join(map(str, train['brand_name'].unique().tolist())))\n</code></pre>\n\n<p>Explanation:</p>\n\n<ul>\n<li><code>\\n</code> represents new line character for printing.</li>\n<li><code>map(str, lst)</code> maps to strings in case you have non-text data in your list.</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 17543, "user_id": 2292722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93a9ec04aa8782640288292e87f3547e?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Brunberg", "link": "https://stackoverflow.com/users/2292722/tom-brunberg"}, "edited": false, "score": 0, "creation_date": 1518050433, "post_id": 48674890, "comment_id": 84349811, "body": "While this code-only post might answer the question, please add an explanation of why it does so."}], "tags": [], "owner": {"reputation": 2858, "user_id": 1054154, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/274a8902ebfa77671b35cc3be0948522?s=128&d=identicon&r=PG", "display_name": "tozCSS", "link": "https://stackoverflow.com/users/1054154/tozcss"}, "is_accepted": true, "score": 0, "last_activity_date": 1518054620, "last_edit_date": 1518054620, "creation_date": 1518045233, "answer_id": 48674890, "question_id": 48674395, "link": "https://stackoverflow.com/questions/48674395/how-to-print-out-each-single-unique-value-in-a-column/48674890#48674890", "title": "How to print out each single unique value in a column", "body": "<p>If you want to display all the rows in an IPython console or Jupyter then you should set the <code>pd.options.display.max_rows</code> to a value no less than the length of the Pandas Series you want to print (like <code>pd.options.display.max_rows = len(train)</code>), or you can just set it to <code>None</code>. You can do it in a context --<code>with</code> allows your change to be temporary.</p>\n\n<pre><code>with pd.option_context('display.max_rows', None):\n    print train['brand_name'].value_counts()\n    #or, alternatively\n    #print pd.Series(train['brand_name'].unique())\n</code></pre>\n\n<p>More on Pandas' display-related options: <a href=\"https://pandas.pydata.org/pandas-docs/stable/options.html\" rel=\"nofollow noreferrer\">https://pandas.pydata.org/pandas-docs/stable/options.html</a></p>\n"}], "owner": {"reputation": 51, "user_id": 9047093, "user_type": "registered", "profile_image": "https://graph.facebook.com/1538081202973443/picture?type=large", "display_name": "WJ Zhao", "link": "https://stackoverflow.com/users/9047093/wj-zhao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "accepted_answer_id": 48674890, "answer_count": 2, "score": 1, "last_activity_date": 1519963128, "creation_date": 1518042681, "last_edit_date": 1519963128, "question_id": 48674395, "link": "https://stackoverflow.com/questions/48674395/how-to-print-out-each-single-unique-value-in-a-column", "title": "How to print out each single unique value in a column", "body": "<p>entered:</p>\n\n<pre><code>train['brand_name'].unique()\n</code></pre>\n\n<p>get the result:</p>\n\n<pre><code>array([nan, 'Razer', 'Target', ..., 'Astroglide', 'Cumberland Bay',\n   'Kids Only'], dtype=object)\n</code></pre>\n\n<p>I need to see every value. there are some values represented by .... i want to know how to show those too. </p>\n\n<p>thanks!</p>\n"}, {"tags": ["python", "python-3.x", "nested", "lazy-evaluation", "python-descriptors"], "comments": [{"owner": {"reputation": 431, "user_id": 9310553, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LKV5C.jpg?s=128&g=1", "display_name": "nisemonoxide", "link": "https://stackoverflow.com/users/9310553/nisemonoxide"}, "edited": false, "score": 0, "creation_date": 1518044222, "post_id": 48674393, "comment_id": 84347855, "body": "Do you need <code>Branch</code> and <code>Leaf</code> instances to be class variables in <code>Root</code> and <code>Branch</code> classes respectively?"}, {"owner": {"reputation": 29, "user_id": 3622042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c9522a0e6395fe535c7ca7433ef6b5f?s=128&d=identicon&r=PG&f=1", "display_name": "Manuel L", "link": "https://stackoverflow.com/users/3622042/manuel-l"}, "reply_to_user": {"reputation": 431, "user_id": 9310553, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LKV5C.jpg?s=128&g=1", "display_name": "nisemonoxide", "link": "https://stackoverflow.com/users/9310553/nisemonoxide"}, "edited": false, "score": 0, "creation_date": 1518044618, "post_id": 48674393, "comment_id": 84348019, "body": "Listed as the first solution in <i>Related questions</i> it might be a solution to use instance descriptors instead of class descriptors. However, I think this would increase the memory footprint a lot, since for every instance of <code>Root</code> a bunch of <code>Branch</code>es and <code>Leaf</code>s need to be duplicated."}, {"owner": {"reputation": 2327, "user_id": 196940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce6dc298372fcc8c41cf92114755f0c6?s=128&d=identicon&r=PG", "display_name": "Krzysztof Bujniewicz", "link": "https://stackoverflow.com/users/196940/krzysztof-bujniewicz"}, "edited": false, "score": 0, "creation_date": 1518045890, "post_id": 48674393, "comment_id": 84348497, "body": "I don&#39;t think you can do it given the constraints without involving some traceback magic to get the root instance from parent frames. I would suggest not using nested descriptors if memory is such a big concern, but implementing the logic in <code>Branch</code> (you can use <code>__getattr__</code> for evaluating missing values)."}], "owner": {"reputation": 29, "user_id": 3622042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c9522a0e6395fe535c7ca7433ef6b5f?s=128&d=identicon&r=PG&f=1", "display_name": "Manuel L", "link": "https://stackoverflow.com/users/3622042/manuel-l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 311, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1518045488, "creation_date": 1518042673, "last_edit_date": 1518045488, "question_id": 48674393, "link": "https://stackoverflow.com/questions/48674393/python-how-to-access-instance-attributes-in-nested-descriptors", "title": "Python: How to access instance attributes in nested descriptors?", "body": "<h2>Example</h2>\n\n<p>Take the following example</p>\n\n<pre><code>class Leaf:\n    def __get__(self, instance, owner):\n        if instance is None:\n            return self\n\n        # TODO How to access Root.value here?\n\n\nclass Branch:\n    bar = Leaf()\n\n\nclass Root:\n    foo = Branch()\n\n    def __init__(self, value):\n        self.value = value\n\n\nif __name__ == '__main__':\n    x = Root(20)\n    y = Root(30)\n\n    print(x.foo.bar)  # 20\n\n    a = x.foo\n\n    print(a.bar)  # 20\n    print(y.foo.bar)  # 30\n    print(a.bar)  # 20\n</code></pre>\n\n<p>In <code>Leaf.__get__</code> <code>instance</code> points to the <code>Branch</code> instance. However, I need to access <code>value</code>, which is an instance member of <code>Root</code>.</p>\n\n<h2>Background</h2>\n\n<p>My task is to write a parser for a large file header. The parser shall be robust and fast. Therefore, instead of parsing the whole header structure, I proposed to use descriptors to lazy parse the fields. This allows for decoding/encoding the header fields only when required.\nSo, there's a root object that holds the complete header as a bytearray and when a field is accessed, its descriptor reads from or writes to this bytearray. However, the header structure is hierarchical and contains nested fields. For that reason I need to access the roots bytearray from a nested descriptor.</p>\n\n<h2>Related questions and solutions</h2>\n\n<p>Similar questions about instance descriptors have been raised before.</p>\n\n<p><strong>1. Create a per instance</strong></p>\n\n<p>The solution would be to add the descriptors to the instances instead of classes and set the shared value as reference. IMO this seems a bit inefficient.</p>\n\n<p>See <a href=\"https://stackoverflow.com/questions/2954331/dynamically-adding-property-in-python\">Dynamically adding @property in python</a> and <a href=\"https://stackoverflow.com/questions/45977559/python-how-to-pass-instance-variable-value-to-descriptor-parameter\">Python - How to pass instance variable value to descriptor parameter?</a></p>\n\n<p><strong>2. Override <code>__getattribute__</code></strong></p>\n\n<p>I don't think this would work, since <code>__getattribute__</code> of <code>Branch</code> doesn't know about the <code>Root</code> instance.</p>\n\n<p><strong>3. Propagate <code>value</code></strong></p>\n\n<p>While traversing the structure, <code>Branch.__get__</code> gets called, where we could store a reference to the root instance, which is accessible from <code>Leaf.__get__</code>. However, this will not work if we mix up calls on multiple instances of <code>Root</code>.</p>\n\n<hr>\n\n<p>Finally, my question is if there are better solutions for this specific problem?</p>\n"}, {"tags": ["python", "windows", "api", "jwt", "apple-musickit"], "answers": [{"comments": [{"owner": {"reputation": 206, "user_id": 5424763, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec7dc51e4ff7563005ac834c36853a9c?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya Ahuja", "link": "https://stackoverflow.com/users/5424763/aditya-ahuja"}, "edited": false, "score": 0, "creation_date": 1584620300, "post_id": 48751799, "comment_id": 107495474, "body": "The requests library&#39;s link is not working can you update it!"}], "tags": [], "owner": {"reputation": 53, "user_id": 7381169, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yihiw.png?s=128&g=1", "display_name": "sanwall", "link": "https://stackoverflow.com/users/7381169/sanwall"}, "is_accepted": false, "score": 2, "last_activity_date": 1584709402, "last_edit_date": 1584709402, "creation_date": 1518455157, "answer_id": 48751799, "question_id": 48674386, "link": "https://stackoverflow.com/questions/48674386/how-to-call-apple-music-api-and-avoid-401/48751799#48751799", "title": "How to call Apple Music API and avoid 401", "body": "<p>I had the same problem with the string formatting operator. Therefore use this:</p>\n\n<pre><code>\"\"\"Create an auth token\"\"\"\ntoken = jwt.encode(payload, secret, algorithm=alg, headers=headers)\ntoken_str = token.decode('utf-8')  # converts bytes to string\n\nurl = \"https://api.music.apple.com/v1/catalog/us/playlists/pl.14362d3dfe4b41f7878939782647e0ba\" \n\nprint(\"curl -v -H 'Authorization: Bearer\" + token_str + \"\\\"\" + url + \"\\\"\")\n</code></pre>\n\n<p>Further: I assume you want to access the data directly. For this you can use the <a href=\"https://2.python-requests.org/en/master/user/quickstart/#json-response-content\" rel=\"nofollow noreferrer\">requests</a> library:</p>\n\n<pre><code>import requests\nrequest_obj = requests.get(url, headers={'Authorization': \"Bearer \" + token_str})\njson_dict = request_obj.json()\n</code></pre>\n\n<p>Cheers!</p>\n"}, {"tags": [], "owner": {"reputation": 6689, "user_id": 7117003, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HaW1a.png?s=128&g=1", "display_name": "petezurich", "link": "https://stackoverflow.com/users/7117003/petezurich"}, "is_accepted": false, "score": 1, "last_activity_date": 1555707066, "last_edit_date": 1555707066, "creation_date": 1552813006, "answer_id": 55205399, "question_id": 48674386, "link": "https://stackoverflow.com/questions/48674386/how-to-call-apple-music-api-and-avoid-401/55205399#55205399", "title": "How to call Apple Music API and avoid 401", "body": "<p>Adding to sanwall's answer \u2013 this works for me (Python 3.x): </p>\n\n<pre><code>from datetime import datetime\nimport jwt\nimport requests\nimport json\n\nsecret_key = '''-----BEGIN PRIVATE KEY-----\n... your secret key here ...\n-----END PRIVATE KEY-----'''\n\nkey_id  = '0123456789' # &lt;-- your key id here\nteam_id = '0123456789' # &lt;-- your team id here\nalg     = 'ES256'\niat     = int(datetime.utcnow().strftime(\"%s\")) # set issued at to now\nexp     = iat + 86400 # add e.g. 24h from now for expiration (24 * 3600secs == 86400)\n\npayload = {\n    'iss': team_id,\n    'iat': iat,\n    'exp': exp\n}\n\nheaders = {\n    'alg': alg,\n    'kid': key_id\n}\n\ntoken = jwt.encode(payload, secret_key, algorithm=alg, headers=headers)\ntoken_str = token.decode('utf-8')\n\nurl = \"https://api.music.apple.com/v1/catalog/us/songs/203709340\"\nprint (f\"curl -v -H 'Authorization: Bearer {token_str}' {url}\")\n</code></pre>\n\n<p>Or use requests with the generated token string:</p>\n\n<pre><code>res = requests.get(url, headers={'Authorization': \"Bearer \" + token_str})\nresult = json.loads(res.text)\n</code></pre>\n\n<p>Printout:</p>\n\n<pre><code>{'data': [{'id': '203709340', 'type': 'songs', 'href': '/v1/catalog/us/songs/203709340', ... etc ...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 250, "user_id": 12595480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8206f32e355094d837e97d4d636bf9f?s=128&d=identicon&r=PG&f=1", "display_name": "barbecu", "link": "https://stackoverflow.com/users/12595480/barbecu"}, "is_accepted": false, "score": 0, "last_activity_date": 1584879765, "creation_date": 1584879765, "answer_id": 60799247, "question_id": 48674386, "link": "https://stackoverflow.com/questions/48674386/how-to-call-apple-music-api-and-avoid-401/60799247#60799247", "title": "How to call Apple Music API and avoid 401", "body": "<p>I had the same problem, For me my .p8 file had the key on multiple lines when it should've been on just one:</p>\n\n<pre><code>-----BEGIN PRIVATE KEY-----\nnotarealkey5GSM49AgEGCCqGSM49AwEHBHkwdwIBAQQguWRXMHYkuFImkMGByqEPT\njaXQyO0WK1BjYpuDxIgNQ5nHRRFCuUOi8mgCgYIKoZIzj0DAQehcp0+Z+jwRANCAA\nRCBFg8fL08QS36Fb8HmY+eFrDWMO00w5unCo5n8VyLhvttIZeByXlVsJrK/L3f/\nF2wYmZme\n-----END PRIVATE KEY-----\n</code></pre>\n\n<p>vs:</p>\n\n<pre><code>-----BEGIN PRIVATE KEY-----\nasdfg1rty5GSM49AgEGCCqGSM49AwEHBHkwdwI...\n-----END PRIVATE KEY-----\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 317, "user_id": 9805273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j33nV.png?s=128&g=1", "display_name": "AzeTech", "link": "https://stackoverflow.com/users/9805273/azetech"}, "is_accepted": false, "score": 0, "last_activity_date": 1585237077, "creation_date": 1585237077, "answer_id": 60870849, "question_id": 48674386, "link": "https://stackoverflow.com/questions/48674386/how-to-call-apple-music-api-and-avoid-401/60870849#60870849", "title": "How to call Apple Music API and avoid 401", "body": "<p>The Apple Music API requires both developer token and user token. Although the question is regarding python, this answer is meant for swift developers who come across this issue in future..</p>\n\n<p>For example,</p>\n\n<pre><code>static func addPlaylistPathURLString(developerToken: String, userToken: String) -&gt; URLRequest {\n         var urlComponents = URLComponents()\n         urlComponents.scheme = \"https\"\n         urlComponents.host = \"api.music.apple.com\"\n         urlComponents.path = \"/v1/me/library/playlists/\n\n         // Create and configure the `URLRequest`.\n\n         var urlRequest = URLRequest(url: urlComponents.url!)\n         urlRequest.httpMethod = \"GET\"\n\n         urlRequest.addValue(\"Bearer \\(developerToken)\", forHTTPHeaderField: \"Authorization\")\n         urlRequest.addValue(userToken, forHTTPHeaderField: \"Music-User-Token\")\n\n         return urlRequest\n     }\n\n     func addPlaylistPathURLString(with developertoken: String, userToken: String, completion: @escaping CatalogSearchCompletionHandler) {\n\n guard let developerToken = refreshDeveloperToken() // its developer token \nelse {\n           fatalError(\"Developer Token not configured. See README for more details.\")\n             }\n            let urlRequest = AppleMusicRequestFactory.addPlaylistPathURLString(developerToken: developerToken, userToken: userToken)\n            print(urlRequest)\n\n             let task = urlSession.dataTask(with: urlRequest) { (data, response, error) in\n                 guard error == nil, let urlResponse = response as? HTTPURLResponse, urlResponse.statusCode == 200 else {\n                     completion([], error)\n\n                     return\n                 }\n                 guard\n                    let data = data,\n                   let json = String(data: data, encoding: .utf8)\n\n                else { return }\n                print(\"json:\", json)\n               do {\n                    // do your stuffs---\n\n                  } catch {\n\n                 print(\"An error occurred: \\(error.localizedDescription)\")\n                 }\n             }\n\n             task.resume()\n\n        }\n</code></pre>\n\n<p>Regarding how to get user token from developer token,</p>\n\n<pre><code>func requestUserToken() {\n        guard let developerToken = appleMusicManager.refreshDeveloperToken() // its developer token \n   else {\n            return\n        }\n\n        if SKCloudServiceController.authorizationStatus() == .authorized {\n\n            let completionHandler: (String?, Error?) -&gt; Void = { [weak self] (token, error) in\n                guard error == nil else {\n                    print(\"An error occurred when requesting user token: \\(error!.localizedDescription)\")\n                    return\n                }\n\n                guard let token = token else {\n                    print(\"Unexpected value from SKCloudServiceController for user token.\")\n                    return\n                }\n\n                self?.userToken = token\n                print(token)\n\n                /// Store the Music User Token for future use in your application.\n                let userDefaults = UserDefaults.standard\n\n                userDefaults.set(token, forKey: AuthorizationManager.userTokenUserDefaultsKey)\n                userDefaults.synchronize()\n\n                if self?.cloudServiceStorefrontCountryCode == \"\" {\n                    self?.requestStorefrontCountryCode()\n                }\n\n                NotificationCenter.default.post(name: AuthorizationManager.cloudServiceDidUpdateNotification, object: nil)\n            }\n\n            if #available(iOS 11.0, *) {\n                cloudServiceController.requestUserToken(forDeveloperToken: developerToken, completionHandler: completionHandler)\n            } else {\n                cloudServiceController.requestPersonalizationToken(forClientToken: developerToken, withCompletionHandler: completionHandler)\n            }\n        }\n    }\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 4130207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9149522b26c6b53e4a181e8c3be0f11b?s=128&d=identicon&r=PG&f=1", "display_name": "MSTR Prime", "link": "https://stackoverflow.com/users/4130207/mstr-prime"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1100, "favorite_count": 1, "answer_count": 4, "score": 3, "last_activity_date": 1585237077, "creation_date": 1518042649, "last_edit_date": 1552813140, "question_id": 48674386, "link": "https://stackoverflow.com/questions/48674386/how-to-call-apple-music-api-and-avoid-401", "title": "How to call Apple Music API and avoid 401", "body": "<p>I am persistently getting 401 error when trying to call the Apple Music API. I am using a windows machine and below is the Python Code for it.</p>\n\n<hr>\n\n<pre><code>import datetime\nimport jwt\n\nsecret = \"\"\"-----BEGIN PRIVATE KEY-----\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\nxxxxxxxxxxxxxxxxxxxxxxxxx\n-----END PRIVATE KEY-----\"\"\"\n\nkid = 'ABCDEFGHI'\nteamId = 'JKLMNOPQRS'\nalg = 'ES256'\n\nheaders = {\n    'alg': alg,\n    'kid': kid\n}\n\npayload = {\n    'iss': teamId,\n    'iat': 1518033023,\n    'exp': 1518290267\n}\n\nif __name__ == '__main__':\n    '''Create an auth token'''\n    token = jwt.encode(payload, secret, algorithm=alg, headers=headers)\n\nprint '----CURL----'\nprint (\"curl -v -H 'Authorization: Bearer %s' \\\"https://api.music.apple.com/v1/catalog/us/playlists/pl.14362d3dfe4b41f7878939782647e0ba\\\" \" % (token))\n</code></pre>\n"}, {"tags": ["python", "mongodb", "pymongo"], "answers": [{"tags": [], "owner": {"reputation": 11241, "user_id": 3015960, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d7011761181ddb840f9cce628eb1e2f0?s=128&d=identicon&r=PG&f=1", "display_name": "anhlc", "link": "https://stackoverflow.com/users/3015960/anhlc"}, "is_accepted": true, "score": 2, "last_activity_date": 1561540511, "last_edit_date": 1561540511, "creation_date": 1518057876, "answer_id": 48676680, "question_id": 48674255, "link": "https://stackoverflow.com/questions/48674255/pymongo-find-query-with-regex/48676680#48676680", "title": "pymongo : find query with regex", "body": "<p>Use re.compile:</p>\n\n<pre><code>import re\ncdl= re.compile(\"^cdl\", re.IGNORECASE)\nfor response in conn.collection.find(\n  {\"hp\": cdl},\n  {\"n\":1 ,\"hp\":1 , \"_id\":0 ,\"rsid\" :1, \"v\":1}\n):\n  print (response)\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user9251303"}, "is_accepted": false, "score": 1, "last_activity_date": 1561540530, "last_edit_date": 1561540530, "creation_date": 1518118576, "answer_id": 48693451, "question_id": 48674255, "link": "https://stackoverflow.com/questions/48674255/pymongo-find-query-with-regex/48693451#48693451", "title": "pymongo : find query with regex", "body": "<p>I think your syntax is slightly wrong for a <code>$regex</code> in pymongo.</p>\n\n<p>Try:</p>\n\n<pre><code> conn.collection.find(\n   {\"hp\": {\"$regex\": \"^cdl\"}}, \n   {\"n\":1 ,\"hp\":1 , \"_id\":0 ,\"rsid\" :1, \"v\":1}\n )\n</code></pre>\n\n<p>You could also add in <code>$option</code> into the <code>$regex</code>. If you wanted case insensitive;</p>\n\n<pre><code>conn.collection.find({\"hp\": {\"$regex\": \"^cdl\", \"$options\": \"i\"}}))\n</code></pre>\n\n<p>You have all the options available as per mongo <code>$regex</code>, <a href=\"https://docs.mongodb.com/manual/reference/operator/query/regex/\" rel=\"nofollow noreferrer\">here</a></p>\n"}], "owner": {"reputation": 47, "user_id": 9286060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68af8ac8c7f714a0a4046ed9b6c40791?s=128&d=identicon&r=PG&f=1", "display_name": "monicak", "link": "https://stackoverflow.com/users/9286060/monicak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1936, "favorite_count": 0, "accepted_answer_id": 48676680, "answer_count": 2, "score": 0, "last_activity_date": 1561540530, "creation_date": 1518042146, "last_edit_date": 1561043829, "question_id": 48674255, "link": "https://stackoverflow.com/questions/48674255/pymongo-find-query-with-regex", "title": "pymongo : find query with regex", "body": "<p>I am working on a python script to connect to mongodb and query a collection.</p>\n\n<p>I want to find the values for key <code>hp</code> that start with <code>cdl</code>. This query successfully runs when I try through mongo shell but through my python script I see the error. </p>\n\n<p>Do I need to have any escape characters ?  </p>\n\n<pre><code>./pymongoconn.py\n\nFile \"./pymongoconn.py\", line 20\n\nfor response in conn.collection.find({\"hp\": /^cdl/},{\"n\":1 ,\"hp\":1 , \"_id\":0 , \"rsid\" :1, \"v\":1}):                                         \n\n^   \n\nSyntaxError: invalid syntax\n</code></pre>\n\n<p>Below is my query :</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>for response in conn.collection.find(\n    {\"hp\": /^cdl/},\n    {\"n\":1 ,\"hp\":1 , \"_id\":0 ,\"rsid\" :1, \"v\":1}\n):\n    print (response)\n</code></pre>\n"}, {"tags": ["python", "for-loop", "web-scraping", "beautifulsoup"], "answers": [{"tags": [], "owner": {"reputation": 1549, "user_id": 6084948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2e5d032c08808069ed37e38ff8e81e4?s=128&d=identicon&r=PG", "display_name": "briancaffey", "link": "https://stackoverflow.com/users/6084948/briancaffey"}, "is_accepted": false, "score": 1, "last_activity_date": 1518042279, "creation_date": 1518042279, "answer_id": 48674283, "question_id": 48674254, "link": "https://stackoverflow.com/questions/48674254/beautifulsoup-for-look-show-only-last-result/48674283#48674283", "title": "beautifulSoup for look show only last result", "body": "<p>Each time you loop, you are overwriting the value of filmname, so it is probably only printing the last one. You need to add each filmname to an empty list from inside the loop. </p>\n\n<p>Try this: </p>\n\n<pre><code>import requests\nfrom bs4 import BeautifulSoup as soup\nimport lxml\n\nurl = \"https://www.moviepilot.de/dvd/dvds-neu\"\n\nagent = {\"User-Agent\":'Mozilla/5.0 (Windows NT 6.3; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/59.0.3071.115 Safari/537.36'}\n\npage = requests.get(url, headers=agent)\n\npage_soup = soup(page.content, \"html.parser\")\n\nergebnisse = page_soup.findAll(\"li\", {\"class\":\"movie\"})\nfilms = []\nfor container in ergebnisse:\n    filmname = container.a[\"title\"]\n    films.append(filmname)\n\n\n\nprint(films)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "is_accepted": false, "score": 1, "last_activity_date": 1518042456, "creation_date": 1518042456, "answer_id": 48674340, "question_id": 48674254, "link": "https://stackoverflow.com/questions/48674254/beautifulsoup-for-look-show-only-last-result/48674340#48674340", "title": "beautifulSoup for look show only last result", "body": "<p>Currently, your <code>for</code> loop is reassigning <code>filmname</code>, thus, only the value from the last iteration will be stored. However, you can use a list comprehension to store all of the necessary values:</p>\n\n<pre><code>ergebnisse = page_soup.findAll(\"li\", {\"class\":\"movie\"})\nnames = [container.a[\"title\"] for container in ergebnisse]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19801, "user_id": 9189799, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/U2hEg.jpg?s=128&g=1", "display_name": "SIM", "link": "https://stackoverflow.com/users/9189799/sim"}, "is_accepted": false, "score": 1, "last_activity_date": 1518042981, "creation_date": 1518042981, "answer_id": 48674460, "question_id": 48674254, "link": "https://stackoverflow.com/questions/48674254/beautifulsoup-for-look-show-only-last-result/48674460#48674460", "title": "beautifulSoup for look show only last result", "body": "<p>You can do the same using selector as well:</p>\n\n<pre><code>import requests\nfrom bs4 import BeautifulSoup as soup\n\nURL = \"https://www.moviepilot.de/dvd/dvds-neu\"\n\npage = requests.get(URL, headers={\"User-Agent\":\"Mozilla/5.0\"})\n\npage_soup = soup(page.content, \"html.parser\")\n\ncontainer = '\\n'.join([item[\"title\"] for item in page_soup.select(\"li.movie a\")])\nprint(container)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9330123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30d8b65fb3af923a419dd1d0a6b48a54?s=128&d=identicon&r=PG&f=1", "display_name": "Max2111", "link": "https://stackoverflow.com/users/9330123/max2111"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1518042981, "creation_date": 1518042138, "question_id": 48674254, "link": "https://stackoverflow.com/questions/48674254/beautifulsoup-for-look-show-only-last-result", "title": "beautifulSoup for look show only last result", "body": "<p>i currently try to learn python web scraping. I did everything exactly like in the tutorial. But the loop doesn't work. If I test it with print, it only shows the last entry. </p>\n\n<pre><code>import requests\nfrom bs4 import BeautifulSoup as soup\nimport lxml\n\nurl = \"https://www.moviepilot.de/dvd/dvds-neu\"\n\nagent = {\"User-Agent\":'Mozilla/5.0 (Windows NT 6.3; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/59.0.3071.115 Safari/537.36'}\n\npage = requests.get(url, headers=agent)\n\npage_soup = soup(page.content, \"html.parser\")\n\nergebnisse = page_soup.findAll(\"li\", {\"class\":\"movie\"})\n\nfor container in ergebnisse:\n    filmname = container.a[\"title\"]\n\n\n\nprint(filmname)\n</code></pre>\n"}, {"tags": ["python", "scipy", "probability-density"], "comments": [{"owner": {"reputation": 206726, "user_id": 5459839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iehrR.jpg?s=128&g=1", "display_name": "trincot", "link": "https://stackoverflow.com/users/5459839/trincot"}, "edited": false, "score": 0, "creation_date": 1518042406, "post_id": 48674237, "comment_id": 84347100, "body": "You&#39;re printing an object reference. Maybe you wanted to call its <code>_pdf</code> method? Like <code>return my_pdf()._pdf(a,b)</code> or something?"}, {"owner": {"reputation": 8191, "user_id": 8881141, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/C3ydX.jpg?s=128&g=1", "display_name": "Mr. T", "link": "https://stackoverflow.com/users/8881141/mr-t"}, "edited": false, "score": 0, "creation_date": 1518042941, "post_id": 48674237, "comment_id": 84347350, "body": "<a href=\"https://www.tutorialspoint.com/python3/python_basic_operators.htm\" rel=\"nofollow noreferrer\">Is <code>y ^ 2</code> really supposed to use a bitwise operator?</a> Or did you mean <code>y ** 2</code>?"}, {"owner": {"reputation": 41, "user_id": 1209014, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/fa0402d00d8d69e0796b3f2784bc1bd9?s=128&d=identicon&r=PG", "display_name": "user1209014", "link": "https://stackoverflow.com/users/1209014/user1209014"}, "edited": false, "score": 0, "creation_date": 1518560594, "post_id": 48674237, "comment_id": 84555040, "body": "You&#39;re right, it should have been **, and I&#39;ve moved to using my_pdf.pdf(a,b).  However, I think I&#39;m still doing this wrong. It gives me a number now - always the same for given parameters - when what I&#39;m trying to do is generate random (x,y) coordinates using the PDF."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 1209014, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/fa0402d00d8d69e0796b3f2784bc1bd9?s=128&d=identicon&r=PG", "display_name": "user1209014", "link": "https://stackoverflow.com/users/1209014/user1209014"}, "edited": false, "score": 0, "creation_date": 1518207575, "post_id": 48674355, "comment_id": 84426058, "body": "Hm. I tried calling get_brown(1,1)._pdf(x, y), but all I got was &quot;NameError: name &#39;y&#39; is not defined&quot;..."}], "tags": [], "owner": {"reputation": 4435, "user_id": 3157209, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f09e0aa62a26ffcf34ba27a698880238?s=128&d=identicon&r=PG&f=1", "display_name": "zimmerrol", "link": "https://stackoverflow.com/users/3157209/zimmerrol"}, "is_accepted": false, "score": 1, "last_activity_date": 1518042518, "creation_date": 1518042518, "answer_id": 48674355, "question_id": 48674237, "link": "https://stackoverflow.com/questions/48674237/generating-random-numbers-for-a-probability-density-function-in-python/48674355#48674355", "title": "Generating random numbers for a probability density function in Python", "body": "<p>The result you see is the memory address of the object you have created. Now you might ask: which object? Your method <code>get_brown(int, int)</code> calls <code>return my_pdf()</code> which creates an object of the class <code>my_pdf</code> and returns it. If you want to access the <code>_pdf</code> function of your class now and calculate the value of the <code>pdf</code> you can use this code:</p>\n\n<pre><code>get_brown(1,1)._pdf(x, y)\n</code></pre>\n\n<p>On the object you have just created you can also use all methods of the <code>scipy.stats.rv_continous</code> class, which you can find <a href=\"https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.rv_continuous.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>For your situation you could also discard your current code and just use the normal distribution included in <code>scipy</code> as Brownian motion is mainly a Normal random process.</p>\n"}, {"tags": [], "owner": {"reputation": 24870, "user_id": 146077, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/IvgEc.jpg?s=128&g=1", "display_name": "Kirk Broadhurst", "link": "https://stackoverflow.com/users/146077/kirk-broadhurst"}, "is_accepted": false, "score": 0, "last_activity_date": 1518043419, "creation_date": 1518043419, "answer_id": 48674562, "question_id": 48674237, "link": "https://stackoverflow.com/questions/48674237/generating-random-numbers-for-a-probability-density-function-in-python/48674562#48674562", "title": "Generating random numbers for a probability density function in Python", "body": "<p>As noted, this is a memory location. Your function <code>get_brown</code> gets an instance of the <code>my_pdf</code> class, but doesn't evaluate the method inside that class.  </p>\n\n<p>What you probably want to do is call the <code>_pdf</code> method on that instance, rather than return the class itself.</p>\n\n<pre><code>def get_brown(a,b):\n    D,t = a,b  #  what is D,t for?\n    return my_pdf()_pdf(a,b)\n</code></pre>\n\n<p>I expect that the code you've posted is a simplification of what you're really doing, but functions don't need to be inside classes - so the <code>_pdf</code> function could live on it's own. Alternatively, you don't need to use the <code>get_brown</code> function - just instantiate the <code>my_pdf</code> class and call the calculation method.</p>\n"}], "owner": {"reputation": 41, "user_id": 1209014, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/fa0402d00d8d69e0796b3f2784bc1bd9?s=128&d=identicon&r=PG", "display_name": "user1209014", "link": "https://stackoverflow.com/users/1209014/user1209014"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 516, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1518043419, "creation_date": 1518042043, "question_id": 48674237, "link": "https://stackoverflow.com/questions/48674237/generating-random-numbers-for-a-probability-density-function-in-python", "title": "Generating random numbers for a probability density function in Python", "body": "<p>I'm currently working on a project relating to brownian motion, and trying to simulate some of it using Python (a language I'm admittedly very new at). Currently, my goal is to generate random numbers following a given probability density function. I've been trying to use the scipy library for it.</p>\n\n<p>My current code looks like this:</p>\n\n<pre><code>&gt;&gt;&gt; import scipy.stats as st\n&gt;&gt;&gt; class my_pdf(st.rv_continuous):\n        def _pdf(self,x,y):\n            return (1/math.sqrt(4*t*D*math.pi))*(math.exp(-((x^2)/(4*D*t))))*(1/math.sqrt(4*t*D*math.pi))*(math.exp(-((y^2)/(4*D*t))))\n&gt;&gt;&gt; def get_brown(a,b):\n        D,t = a,b\n        return my_pdf()\n&gt;&gt;&gt; get_brown(1,1)\n&lt;__main__.my_pdf object at 0x000000A66400A320&gt;\n</code></pre>\n\n<p>All attempts at launching the <em>get_brown</em> function end up giving me these hexadecimals (always starting at 0x000000A66400A with only the last three digits changing, no matter what parameters I give for D and t). I'm not sure how to interpret that. All I want is to get random numbers following the given PDF; what do these hexadecimals mean?</p>\n"}, {"tags": ["python", "python-3.x", "pip"], "comments": [{"owner": {"reputation": 8884, "user_id": 8372104, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/72UbV.png?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/8372104/simon"}, "edited": false, "score": 0, "creation_date": 1518044243, "post_id": 48674233, "comment_id": 84347869, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/25607837/pip-install-not-installing-into-correct-directory\">Pip Install not installing into correct directory?</a>"}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 1, "creation_date": 1518044390, "post_id": 48674233, "comment_id": 84347918, "body": "Your pip installation is screwed up (probably from using sudo incorrectly). I would uninstall them all and reinstall."}], "answers": [{"comments": [{"owner": {"reputation": 2434, "user_id": 1539208, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/9caf308063ca2a230238dabbcc99dcbb?s=128&d=identicon&r=PG", "display_name": "L42", "link": "https://stackoverflow.com/users/1539208/l42"}, "edited": false, "score": 0, "creation_date": 1519044064, "post_id": 48676660, "comment_id": 84735978, "body": "In case this helps someone: I had a similar problem where I installed packages using <code>pip3.6</code>, but the packages ended up in the 3.5 folder. My mistake was using the <code>--user</code> flag. Removing that flag and instead adding <code>-t &#47;home&#47;myuser&#47;.local&#47;lib&#47;python3.6&#47;site-packages</code> solved it."}], "tags": [], "owner": {"reputation": 19549, "user_id": 1484447, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/a1aba4d4c415547864897dc6bc68ca46?s=128&d=identicon&r=PG", "display_name": "Ricky", "link": "https://stackoverflow.com/users/1484447/ricky"}, "is_accepted": false, "score": 1, "last_activity_date": 1518057781, "creation_date": 1518057781, "answer_id": 48676660, "question_id": 48674233, "link": "https://stackoverflow.com/questions/48674233/python3-pip3-installations-go-to-2-7/48676660#48676660", "title": "python3 pip3 installations go to 2.7", "body": "<p>the <code>-t</code> parameter allows specification of the target path to install packages where they need to go. this ended up working but doesn't solve the root problem</p>\n\n<pre><code>python3.5 -m pip install scikit-learn -t /usr/lib/python3.5/\n</code></pre>\n"}], "owner": {"reputation": 19549, "user_id": 1484447, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/a1aba4d4c415547864897dc6bc68ca46?s=128&d=identicon&r=PG", "display_name": "Ricky", "link": "https://stackoverflow.com/users/1484447/ricky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 521, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1518057781, "creation_date": 1518042034, "last_edit_date": 1518043163, "question_id": 48674233, "link": "https://stackoverflow.com/questions/48674233/python3-pip3-installations-go-to-2-7", "title": "python3 pip3 installations go to 2.7", "body": "<p>When I try to install packages (any package) using pip3.6 installations do not go into the correct python version. instead they go into 2.7</p>\n\n<pre><code>$ pip3.6 install sklearn\nCollecting sklearn\n  Downloading sklearn-0.0.tar.gz\nCollecting scikit-learn (from sklearn)\n  Downloading scikit_learn-0.19.1-cp36-cp36m-manylinux1_x86_64.whl (12.4MB)\n    100% |\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 12.4MB 138kB/s \nInstalling collected packages: scikit-learn, sklearn\n  Running setup.py install for sklearn ... done\nSuccessfully installed scikit-learn-0.19.1 sklearn-0.0\nTarget directory /usr/lib/python2.7/dist-packages/scikit_learn-0.19.1.dist-info already exists. Specify --upgrade to force replacement.\nTarget directory /usr/lib/python2.7/dist-packages/sklearn-0.0-py3.6.egg-info already exists. Specify --upgrade to force replacement.\nTarget directory /usr/lib/python2.7/dist-packages/sklearn already exists. Specify --upgrade to force replacement.\n</code></pre>\n\n<p>Note the python2.7 in <code>Target directory /usr/lib/python2.7/dist-packages/scikit</code> even though i am using pip3.6</p>\n\n<p>When I try to import in python3.6, the package is not found</p>\n\n<pre><code>$ python3.6\nPython 3.6.1 (default, Feb  7 2018, 17:00:49) \n[GCC 4.8.2] on linux\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; import sklearn\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nModuleNotFoundError: No module named 'sklearn'\n</code></pre>\n\n<p>The correct python version is mentioned in the pip3.6 file</p>\n\n<pre><code>$ cat /usr/local/bin/pip3.6\n#!/usr/local/bin/python3.6\n\n# -*- coding: utf-8 -*-\nimport re\nimport sys\n\nfrom pip import main\n\nif __name__ == '__main__':\n    sys.argv[0] = re.sub(r'(-script\\.pyw?|\\.exe)?$', '', sys.argv[0])\n    sys.exit(main())\n</code></pre>\n\n<p>And pip3.6 appears to be pointing to the correct python version</p>\n\n<pre><code>$ pip3.6 -V\npip 9.0.1 from /usr/local/lib/python3.6/site-packages (python 3.6)\n</code></pre>\n\n<p>Any thoughts on how to get pip3.6 to install packages in the correct python folders?</p>\n"}, {"tags": ["python", "curl"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 1, "creation_date": 1518042036, "post_id": 48674217, "comment_id": 84346953, "body": "You&#39;re trying to put quotes in a string delimited with the same quotes? Also, why don&#39;t you use a Python-level client, e.g. <code>requests</code>, instead of shelling out to curl?"}, {"owner": {"reputation": 1250, "user_id": 5382796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iNY1n.jpg?s=128&g=1", "display_name": "GSazheniuk", "link": "https://stackoverflow.com/users/5382796/gsazheniuk"}, "edited": false, "score": 0, "creation_date": 1518042059, "post_id": 48674217, "comment_id": 84346965, "body": "combine single and double quotes so that you can keep double quotes in the command"}, {"owner": {"reputation": 2454, "user_id": 8784938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/753bb55c80a644f950a41ae11cfbe48c?s=128&d=identicon&r=PG&f=1", "display_name": "SuperStew", "link": "https://stackoverflow.com/users/8784938/superstew"}, "edited": false, "score": 0, "creation_date": 1518042140, "post_id": 48674217, "comment_id": 84347005, "body": "<code>requests</code> is the bees knees, use that"}], "answers": [{"tags": [], "owner": {"reputation": 1173, "user_id": 4557002, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/718279ee9730b6ba946d206b7280940d?s=128&d=identicon&r=PG&f=1", "display_name": "ddeamaral", "link": "https://stackoverflow.com/users/4557002/ddeamaral"}, "is_accepted": false, "score": -1, "last_activity_date": 1518042624, "creation_date": 1518042624, "answer_id": 48674379, "question_id": 48674217, "link": "https://stackoverflow.com/questions/48674217/executing-curl-command-in-python/48674379#48674379", "title": "Executing Curl command in Python", "body": "<p>The way to do what you are looking for is a technique called string interpolation. Fortunately, this has already been answered on StackOverflow.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/4450592/is-there-a-python-equivalent-to-rubys-string-interpolation\">Is there a Python equivalent to Ruby&#39;s string interpolation?</a></p>\n\n<p>I'd also strongly recommend using single quotes around your command so that way you can escape the double quotes in your string. The python interpreter thinks you're putting separate strings together, instead of treating the quotes as an \"embedded\" string. </p>\n"}], "owner": {"reputation": 47, "user_id": 3262055, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b6c935d22c8e4029cf12b92cce4df36c?s=128&d=identicon&r=PG&f=1", "display_name": "Prashast", "link": "https://stackoverflow.com/users/3262055/prashast"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 250, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1518042624, "creation_date": 1518041916, "question_id": 48674217, "link": "https://stackoverflow.com/questions/48674217/executing-curl-command-in-python", "title": "Executing Curl command in Python", "body": "<p>I have values in two variables </p>\n\n<pre><code>SessionId=Pxsvdsdruhn \nServerUrl=https://app3.xxxxxxxxcloud.com/saas\n</code></pre>\n\n<p>I want to pass these values in curl command and execute it from python script. I tried below but its giving syntax error</p>\n\n<pre><code>os.system(\"curl -X GET -H \"Content-Type:application/json\" -H \"Accept: application/json\" -H \"icSessionId\":\"SessionId\" ServerUrl/api/v2/agent\")\n</code></pre>\n\n<p>Any pointers where i am wrong?</p>\n"}, {"tags": ["python", "python-sphinx"], "comments": [{"owner": {"reputation": 836, "user_id": 3909303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FZICz.png?s=128&g=1", "display_name": "Simpom", "link": "https://stackoverflow.com/users/3909303/simpom"}, "edited": false, "score": 0, "creation_date": 1518042017, "post_id": 48674189, "comment_id": 84346945, "body": "Could anyone explain the downvote so that I can improve my question?"}, {"owner": {"reputation": 41716, "user_id": 407651, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e1f48e20177ed6c4c3197a9a92f48e5?s=128&d=identicon&r=PG", "display_name": "mzjn", "link": "https://stackoverflow.com/users/407651/mzjn"}, "edited": false, "score": 1, "creation_date": 1518075753, "post_id": 48674189, "comment_id": 84357230, "body": "A docstring is a string literal that occurs as the first statement in a module, function, class, or method definition. See <a href=\"https://www.python.org/dev/peps/pep-0257/#id15\" rel=\"nofollow noreferrer\">python.org/dev/peps/pep-0257/#id15</a>. You cannot have &quot;extra&quot; docstrings as in your example."}, {"owner": {"reputation": 836, "user_id": 3909303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FZICz.png?s=128&g=1", "display_name": "Simpom", "link": "https://stackoverflow.com/users/3909303/simpom"}, "reply_to_user": {"reputation": 41716, "user_id": 407651, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e1f48e20177ed6c4c3197a9a92f48e5?s=128&d=identicon&r=PG", "display_name": "mzjn", "link": "https://stackoverflow.com/users/407651/mzjn"}, "edited": false, "score": 0, "creation_date": 1518080622, "post_id": 48674189, "comment_id": 84359900, "body": "I see. So there isn&#39;t any solution to group methods?"}], "answers": [{"comments": [{"owner": {"reputation": 836, "user_id": 3909303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FZICz.png?s=128&g=1", "display_name": "Simpom", "link": "https://stackoverflow.com/users/3909303/simpom"}, "edited": false, "score": 0, "creation_date": 1518084496, "post_id": 48682589, "comment_id": 84362600, "body": "This solution is a good compromise for me: as I need to organize the mothods by myself, their documentation cannot be fully automatic (sounds obvious...)."}], "tags": [], "owner": {"reputation": 41716, "user_id": 407651, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e1f48e20177ed6c4c3197a9a92f48e5?s=128&d=identicon&r=PG", "display_name": "mzjn", "link": "https://stackoverflow.com/users/407651/mzjn"}, "is_accepted": true, "score": 5, "last_activity_date": 1518084295, "last_edit_date": 1518084295, "creation_date": 1518083990, "answer_id": 48682589, "question_id": 48674189, "link": "https://stackoverflow.com/questions/48674189/docstring-for-groups-of-methods-in-sphinx/48682589#48682589", "title": "Docstring for groups of methods in sphinx", "body": "<p>A docstring is a string literal that occurs as the first statement in a module, function, class, or method definition (<a href=\"https://python.org/dev/peps/pep-0257/#id15\" rel=\"noreferrer\">https://python.org/dev/peps/pep-0257/#id15</a>). You cannot have \"extra\" docstrings like the ones in the question.</p>\n\n<p>However, you can do the grouping by using <code>automethod</code>:</p>\n\n<pre><code>.. currentmodule:: mymodule\n\n.. autoclass:: MyClass\n\n   The following part is about imports\n\n   .. automethod:: import_from_source_1\n   .. automethod:: import_from_source_2\n\n   The following part is about exports\n\n   .. automethod:: export_to_dest_1\n   .. automethod:: export_to_dest_2\n</code></pre>\n"}], "owner": {"reputation": 836, "user_id": 3909303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FZICz.png?s=128&g=1", "display_name": "Simpom", "link": "https://stackoverflow.com/users/3909303/simpom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 417, "favorite_count": 0, "accepted_answer_id": 48682589, "answer_count": 1, "score": 3, "last_activity_date": 1518084295, "creation_date": 1518041776, "last_edit_date": 1518075432, "question_id": 48674189, "link": "https://stackoverflow.com/questions/48674189/docstring-for-groups-of-methods-in-sphinx", "title": "Docstring for groups of methods in sphinx", "body": "<p>Is it possible to add docstrings for groups of methods in the Sphinx generated documentation?</p>\n\n<p>For example, I would like to have something like:</p>\n\n<pre><code>class MyClass():\n    \"\"\"Doc of the class\"\"\"\n    def __init__(self):\n        pass\n\n    \"\"\"----- The following part is about imports -----\"\"\"\n\n    def import_from_source_1(self):\n        \"\"\"Doc of import_from_source_1\"\"\"\n        pass\n\n    def import_from_source_2(self):\n        \"\"\"Doc of import_from_source_2\"\"\"\n        pass\n\n    \"\"\"----- The following part is about exports-----\"\"\"\n\n    def export_to_dest_1(self):\n        \"\"\"Doc of export_to_dest_1\"\"\"\n        pass\n\n    def export_to_dest_2(self):\n        \"\"\"Doc of export_to_dest_2\"\"\"\n        pass\n</code></pre>\n\n<p>And the expected output would be:</p>\n\n<pre><code>MyClass\n    Doc of the class\n\n----- The following part is about imports -----\nimport_from_source_1\n    Doc of import_from_source_1\n\nimport_from_source_2\n    Doc of import_from_source_2\n\n----- The following part is about exports-----\nexport_to_dest_1\n    Doc of export_to_dest_1\n\nexport_to_dest_2\n    Doc of export_to_dest_2\n</code></pre>\n\n<p>Note that my goal is not (only) to group methods (as found in <a href=\"https://stackoverflow.com/questions/17193143/group-method-docstrings-in-sphinx\">Group method docstrings in sphinx</a>), but to add a docstring to the group.</p>\n"}, {"tags": ["python", "sorting", "heap"], "comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1518101668, "post_id": 48674161, "comment_id": 84374533, "body": "There is probably a bug elsewhere in your code, where you inadvertently assigned a tuple to <code>UNVISITED[i][0]</code> rather than just <code>UNVISITED[i]</code>."}, {"owner": {"reputation": 81, "user_id": 6160718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41607cda4155198341518b7cac31d6cd?s=128&d=identicon&r=PG&f=1", "display_name": "daniglezad", "link": "https://stackoverflow.com/users/6160718/daniglezad"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1518102190, "post_id": 48674161, "comment_id": 84374926, "body": "@chepner i am doing that on purpose so the heap is sorted given that value in <code>UNVISITED[i][0]</code>. You can see this in the first lines of this post. Afaik that is a way to define it if you also want to pop additional things."}], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 6160718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41607cda4155198341518b7cac31d6cd?s=128&d=identicon&r=PG&f=1", "display_name": "daniglezad", "link": "https://stackoverflow.com/users/6160718/daniglezad"}, "edited": false, "score": 0, "creation_date": 1518042633, "post_id": 48674284, "comment_id": 84347206, "body": "This is interesting. Nevertheless then I have to directly discard a heap."}, {"owner": {"reputation": 1453, "user_id": 2731113, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e580d3c75fd2eb3e5726ffb6b65900f0?s=128&d=identicon&r=PG&f=1", "display_name": "Davis Yoshida", "link": "https://stackoverflow.com/users/2731113/davis-yoshida"}, "reply_to_user": {"reputation": 81, "user_id": 6160718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41607cda4155198341518b7cac31d6cd?s=128&d=identicon&r=PG&f=1", "display_name": "daniglezad", "link": "https://stackoverflow.com/users/6160718/daniglezad"}, "edited": false, "score": 0, "creation_date": 1518043207, "post_id": 48674284, "comment_id": 84347480, "body": "You have a for loop running over the whole of the heap modifying every value, so you will use O(n log n) operations regardless of how you reheapify. You might as well run the entire for loop and reheapify."}, {"owner": {"reputation": 1453, "user_id": 2731113, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e580d3c75fd2eb3e5726ffb6b65900f0?s=128&d=identicon&r=PG&f=1", "display_name": "Davis Yoshida", "link": "https://stackoverflow.com/users/2731113/davis-yoshida"}, "reply_to_user": {"reputation": 81, "user_id": 6160718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41607cda4155198341518b7cac31d6cd?s=128&d=identicon&r=PG&f=1", "display_name": "daniglezad", "link": "https://stackoverflow.com/users/6160718/daniglezad"}, "edited": false, "score": 0, "creation_date": 1518043225, "post_id": 48674284, "comment_id": 84347490, "body": "Another point is that if you intend to iterate over all the data, it is likely not best to store it as a heap."}], "tags": [], "owner": {"reputation": 1453, "user_id": 2731113, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e580d3c75fd2eb3e5726ffb6b65900f0?s=128&d=identicon&r=PG&f=1", "display_name": "Davis Yoshida", "link": "https://stackoverflow.com/users/2731113/davis-yoshida"}, "is_accepted": false, "score": 1, "last_activity_date": 1518042280, "creation_date": 1518042280, "answer_id": 48674284, "question_id": 48674161, "link": "https://stackoverflow.com/questions/48674161/heapq-python-how-to-modify-values-for-which-heap-is-sorted/48674284#48674284", "title": "heapq python - how to modify values for which heap is sorted", "body": "<p>Even if this code ran, I believe it would not do what you are intending.\nSpecifically, if you did</p>\n\n<pre><code>tup = (a.f, a) # a.f = 7\n</code></pre>\n\n<p>then could execute</p>\n\n<pre><code>tup[0] = 3\n</code></pre>\n\n<p>You would have <code>tup</code> set to <code>(3, a)</code>, but <code>a.f</code> would still be 7.</p>\n\n<p>One thing you could do would allow direct comparisons by adding an <code>__lt__</code> (less than) method to your <code>UNVISITEDNode</code> class like so:</p>\n\n<pre><code>class UNVISITEDNode:\n   ...\n   def __lt__(self, other):\n       return self.f &lt; other.f\n</code></pre>\n\n<p>Then, instead of putting tuples into the heapq, just directly put the node objects in.</p>\n\n<p>However, if you modify objects that are not at the root of the heap, you are no longer guaranteed that the heap is valid so you will need to reheapfiy <code>UNVISITED</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 81, "user_id": 6160718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41607cda4155198341518b7cac31d6cd?s=128&d=identicon&r=PG&f=1", "display_name": "daniglezad", "link": "https://stackoverflow.com/users/6160718/daniglezad"}, "edited": false, "score": 0, "creation_date": 1518042807, "post_id": 48674361, "comment_id": 84347294, "body": "Is there a way to do this inside the <i>heapq</i> architecture so the pop automatically pops the following value in the heap? Or do I have to find the way to mark this externally and interpret that the pop is not valid?"}, {"owner": {"reputation": 180853, "user_id": 424499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc2071afd499daef001e75e14d7f9cce?s=128&d=identicon&r=PG", "display_name": "Raymond Hettinger", "link": "https://stackoverflow.com/users/424499/raymond-hettinger"}, "reply_to_user": {"reputation": 81, "user_id": 6160718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41607cda4155198341518b7cac31d6cd?s=128&d=identicon&r=PG&f=1", "display_name": "daniglezad", "link": "https://stackoverflow.com/users/6160718/daniglezad"}, "edited": false, "score": 0, "creation_date": 1518042963, "post_id": 48674361, "comment_id": 84347361, "body": "@thepirate16 The issue is a heap isn&#39;t really an architecture.  Instead, is just a semi-ordered arrangement of the data.   So, you left with solutions that need to modify the ordering or that invalidate the data."}, {"owner": {"reputation": 4323, "user_id": 1720199, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cODPq.jpg?s=128&g=1", "display_name": "cglacet", "link": "https://stackoverflow.com/users/1720199/cglacet"}, "edited": false, "score": 0, "creation_date": 1554484496, "post_id": 48674361, "comment_id": 97784102, "body": "A question about this answer has been asked <a href=\"https://stackoverflow.com/q/55373969/1720199\">here</a>, my <a href=\"https://stackoverflow.com/a/55539362/1720199\">answer</a> may give some additional information on how <code>_siftup</code> compares to <code>.sort()</code> and <code>heapify()</code> in practice. From what I&#39;ve observed, <code>heapify</code> is always faster, even for correcting a single invariant violation."}], "tags": [], "owner": {"reputation": 180853, "user_id": 424499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc2071afd499daef001e75e14d7f9cce?s=128&d=identicon&r=PG", "display_name": "Raymond Hettinger", "link": "https://stackoverflow.com/users/424499/raymond-hettinger"}, "is_accepted": true, "score": 8, "last_activity_date": 1518123703, "last_edit_date": 1518123703, "creation_date": 1518042533, "answer_id": 48674361, "question_id": 48674161, "link": "https://stackoverflow.com/questions/48674161/heapq-python-how-to-modify-values-for-which-heap-is-sorted/48674361#48674361", "title": "heapq python - how to modify values for which heap is sorted", "body": "<h2>Invalidate and Reinsert</h2>\n\n<p>The usual solution is to mark the object as invalid and to reinsert a new value.  When popping off values, just ignore the invalid entries.</p>\n\n<p>This technique is very efficient as long as there are not a large number of invalidated entries.  The invalidation step runs in <a href=\"https://en.wikipedia.org/wiki/Time_complexity#Constant_time\" rel=\"noreferrer\">constant time</a> and the subsequent pops run in <a href=\"https://en.wikipedia.org/wiki/Time_complexity#Logarithmic_time\" rel=\"noreferrer\">logarithmic time</a>.</p>\n\n<h2>Reheapify</h2>\n\n<p>After adjusting one or more values, run the <a href=\"https://docs.python.org/3/library/heapq.html#heapq.heapify\" rel=\"noreferrer\"><em>heapify()</em></a> function to restore the heap invariant.</p>\n\n<p>This uses a public function that is guaranteed to run in <a href=\"https://en.wikipedia.org/wiki/Time_complexity#Linear_time\" rel=\"noreferrer\">linear time</a>.</p>\n\n<h2>Direct Heap Adjustment</h2>\n\n<p>Another way is to locate the object in the heap's list, using <a href=\"https://docs.python.org/3/library/stdtypes.html#common-sequence-operations\" rel=\"noreferrer\"><em>list.index()</em></a>.  After changing the value, run the internal <em>_siftup()</em> or <em>_siftdown()</em> functions depending on whether the value is being increased or decreased.</p>\n\n<p>Increasing case:</p>\n\n<pre><code>&gt;&gt;&gt; from heapq import _siftup, _siftdown, heapify, heappop\n\n&gt;&gt;&gt; data = [10, 5, 18, 2, 37, 3, 8, 7, 19, 1]\n&gt;&gt;&gt; heapify(data)\n&gt;&gt;&gt; old, new = 8, 22              # increase the 8 to 22\n&gt;&gt;&gt; i = data.index(old)\n&gt;&gt;&gt; data[i] = new\n&gt;&gt;&gt; _siftup(data, i)\n&gt;&gt;&gt; [heappop(data) for i in range(len(data))]\n[1, 2, 3, 5, 7, 10, 18, 19, 22, 37]\n</code></pre>\n\n<p>Decreasing case:</p>\n\n<pre><code>&gt;&gt;&gt; data = [10, 5, 18, 2, 37, 3, 8, 7, 19, 1]\n&gt;&gt;&gt; heapify(data)\n&gt;&gt;&gt; old, new = 8, 4              # decrease the 8 to 4\n&gt;&gt;&gt; i = data.index(old)\n&gt;&gt;&gt; data[i] = new\n&gt;&gt;&gt; _siftdown(data, 0, i)\n&gt;&gt;&gt; [heappop(data) for i in range(len(data))]\n[1, 2, 3, 4, 5, 7, 10, 18, 19, 37]\n</code></pre>\n\n<p>This technique uses linear time list indexing and a <a href=\"https://en.wikipedia.org/wiki/Time_complexity#Logarithmic_time\" rel=\"noreferrer\">logarithmic time</a> heap update.  It is likely to use fewer comparisons than the reheapifying technique, but this isn't entirely satisfying because it uses non-public functions.</p>\n\n<h2>Resorting</h2>\n\n<p>Lastly, you can resort the data:</p>\n\n<pre><code>&gt;&gt;&gt; data.sort()\n</code></pre>\n\n<p>This technique likely makes more comparisons than reheapifying or direct heap adjustment.  The reason it works is that \"if the data is sorted, then it is already a heap\".</p>\n\n<p>The running time can be <code>O(n log n)</code> in the worst case; however, the <em>sort</em>\n implementation applies the <a href=\"https://en.wikipedia.org/wiki/Timsort\" rel=\"noreferrer\">Timsort</a> algorithm which can be very efficient with partially sorted inputs.</p>\n"}], "owner": {"reputation": 81, "user_id": 6160718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41607cda4155198341518b7cac31d6cd?s=128&d=identicon&r=PG&f=1", "display_name": "daniglezad", "link": "https://stackoverflow.com/users/6160718/daniglezad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2861, "favorite_count": 2, "accepted_answer_id": 48674361, "answer_count": 2, "score": 1, "last_activity_date": 1518123703, "creation_date": 1518041649, "last_edit_date": 1518100369, "question_id": 48674161, "link": "https://stackoverflow.com/questions/48674161/heapq-python-how-to-modify-values-for-which-heap-is-sorted", "title": "heapq python - how to modify values for which heap is sorted", "body": "<p>I transform an empty list called <code>UNVISITED</code> into a heap, such that:</p>\n\n<pre><code>UNVISITED = []\nheapq.heappush(UNVISITED, (a.f, a))\n</code></pre>\n\n<p>The object <code>a</code> that I push, which is instantiated from a class, has the following fields:</p>\n\n<pre><code>class UNVISITEDNode():\n    def __init__(self, value1, value2 , value3, value4, value5):\n            self.q = value1\n            self.h = value2\n            self.g = value3\n            self.f = value4\n            self.p = value5\n</code></pre>\n\n<p>Throughout my algorithm, I keep modifying any <code>valueX</code> from the object already in the heap whenever is needed like:</p>\n\n<pre><code>for i in range(len(UNVISITED)):\n        UNVISITED[i][1].q = newvalue1\n        UNVISITED[i][1].h = newvalue2\n        UNVISITED[i][1].g = newvalue3\n        UNVISITED[i][1].f = newvalue4\n        UNVISITED[i][1].p = newvalue5\n</code></pre>\n\n<p>Because (or so I think, please correct me if I am wrong) modifying the value <code>f</code> like I am doing now does not change the value that affects the sorting of the heap, I directly try to modify <code>UNVISITED[i][0]</code> (which is the above <code>a.f</code> passed as a second part of the second argument when creating the heap).</p>\n\n<p>[THE PROBLEM] -> Then I am told that this value does not admit modification:</p>\n\n<pre><code>UNVISITED[i][0] = newvalue4\n\n*Traceback (most recent call last):\n  File \"/home/daniel/pycharm-2017.3.3/helpers/pydev/\n_pydevd_bundle/pydevd_exec.py\", line 3, in Exec\n        exec exp in global_vars, local_vars\n      File \"&lt;input&gt;\", line 1, in &lt;module&gt;\n    TypeError: 'tuple' object does not support item assignment\n</code></pre>\n\n<p><strong>I really need to modify the value <code>f</code> of the object <code>a</code>, which has to affect the sorting of the heap every time is needed and you cannot do this through <code>UNVISITED[i][1].f = newvalue4</code>  (apparently)</strong>. Is there any way to do this or any workaround?</p>\n\n<h2><strong>EDIT (WORKAROUND PERFORMED)</strong></h2>\n\n<p>Eventually I have defined a simple manual heap as <code>heap = []</code>and <code>heap.append()</code> the objects to it.\nYou can use <code>heap.pop()</code> to pop the first element in the heap, and <code>heap.sort(key=lambda x: x.f, reverse=True)</code> to sort it based on the values of the attributes.\nLike this you get closer to the behavior of <code>heapq</code> and you are able to modify the elements in the heap for which that heap is sorted.\nIt is important to say that this is significantly slower than using <code>heapq</code>.</p>\n\n<p>Nonetheless, I am marking @Raymong Hettinger 's answer as the good one because of the detail of other possible workarounds.</p>\n\n<p>Also, @Davis Yoshida has made a valid point in that maybe a <em>heap</em> as it is defined might not be the best way to store the data.</p>\n"}, {"tags": ["python", "c++", "opencv", "image-processing", "ocr"], "comments": [{"owner": {"reputation": 4801, "user_id": 1021819, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/pGNtf.png?s=128&g=1", "display_name": "jtlz2", "link": "https://stackoverflow.com/users/1021819/jtlz2"}, "edited": false, "score": 0, "creation_date": 1525302876, "post_id": 48674106, "comment_id": 87307771, "body": "<a href=\"http://www.rroij.com/open-access/fast-moving-vehicle-number-plate-detection.php?aid=43702\" rel=\"nofollow noreferrer\">rroij.com/open-access/&hellip;</a> also seminal paper by Gull and Skilling (MaxEnt method)"}, {"owner": {"reputation": 4801, "user_id": 1021819, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/pGNtf.png?s=128&g=1", "display_name": "jtlz2", "link": "https://stackoverflow.com/users/1021819/jtlz2"}, "edited": false, "score": 0, "creation_date": 1525302950, "post_id": 48674106, "comment_id": 87307784, "body": "I have some ideas but nothing concrete / yet"}, {"owner": {"reputation": 4801, "user_id": 1021819, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/pGNtf.png?s=128&g=1", "display_name": "jtlz2", "link": "https://stackoverflow.com/users/1021819/jtlz2"}, "edited": false, "score": 0, "creation_date": 1525303107, "post_id": 48674106, "comment_id": 87307825, "body": "Also <a href=\"http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.458.2634&amp;rep=rep1&amp;type=pdf\" rel=\"nofollow noreferrer\">citeseerx.ist.psu.edu/viewdoc/&hellip;</a>"}, {"owner": {"reputation": 4801, "user_id": 1021819, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/pGNtf.png?s=128&g=1", "display_name": "jtlz2", "link": "https://stackoverflow.com/users/1021819/jtlz2"}, "edited": false, "score": 0, "creation_date": 1525303606, "post_id": 48674106, "comment_id": 87307910, "body": "<a href=\"https://dsp.stackexchange.com/questions/tagged/blind-deconvolution\">dsp.stackexchange.com/questions/tagged/blind-deconvolution</a>"}, {"owner": {"reputation": 393, "user_id": 2090474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11713f9728e4c82b9f17950858be307?s=128&d=identicon&r=PG", "display_name": "Artur", "link": "https://stackoverflow.com/users/2090474/artur"}, "reply_to_user": {"reputation": 329, "user_id": 4959345, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oRsLH.jpg?s=128&g=1", "display_name": "Luis Felipe", "link": "https://stackoverflow.com/users/4959345/luis-felipe"}, "edited": false, "score": 1, "creation_date": 1567073877, "post_id": 48674106, "comment_id": 101858074, "body": "@LuisFelipe - no. We were looking for something quite fast, but nothing from aforementioned methods matched our expectations. We decided to check sharpness of the image. If the sharpness is not good enough, user is informed about it and he should take another picture."}, {"owner": {"reputation": 2822, "user_id": 11048887, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kE8NR.jpg?s=128&g=1", "display_name": "Yunus Temurlenk", "link": "https://stackoverflow.com/users/11048887/yunus-temurlenk"}, "edited": false, "score": 0, "creation_date": 1605614922, "post_id": 48674106, "comment_id": 114698942, "body": "You can also check <a href=\"https://docs.opencv.org/master/de/d3c/tutorial_out_of_focus_deblur_filter.html\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 5790, "user_id": 9215780, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-lqxossnzkSU/AAAAAAAAAAI/AAAAAAAAAJg/pHrYwIfRc-k/photo.jpg?sz=128", "display_name": "M.Innat", "link": "https://stackoverflow.com/users/9215780/m-innat"}, "edited": false, "score": 0, "creation_date": 1605618823, "post_id": 48674106, "comment_id": 114700722, "body": "I think he has already tried deconvolution with Wiener filter."}], "answers": [{"comments": [{"owner": {"reputation": 2061, "user_id": 12728244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73c78c8562e372b261de8c24c9b6a55a?s=128&d=identicon&r=PG&f=1", "display_name": "eldesgraciado", "link": "https://stackoverflow.com/users/12728244/eldesgraciado"}, "edited": false, "score": 0, "creation_date": 1583547844, "post_id": 60569643, "comment_id": 107165134, "body": "That&#39;s some pretty insane reconstruction. Powered by CNN, huh? That&#39;s super cool, but I wonder about the resources needed (both computational power and complexity) to carry this processing out as close as real-time as possible."}, {"owner": {"reputation": 834, "user_id": 9696715, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3RrU1.jpg?s=128&g=1", "display_name": "Ali", "link": "https://stackoverflow.com/users/9696715/ali"}, "reply_to_user": {"reputation": 2061, "user_id": 12728244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73c78c8562e372b261de8c24c9b6a55a?s=128&d=identicon&r=PG&f=1", "display_name": "eldesgraciado", "link": "https://stackoverflow.com/users/12728244/eldesgraciado"}, "edited": false, "score": 0, "creation_date": 1583761439, "post_id": 60569643, "comment_id": 107214341, "body": "@eldesgraciado Yes, I agree about the reconstruction. The blind deconvolution is an expensive algorithm and I doubt it is possible to do it in real time. However, it is possible to minimize computational complexity by carrying the task at frequency domain."}, {"owner": {"reputation": 990, "user_id": 7086722, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MN71C.jpg?s=128&g=1", "display_name": "Jim O.", "link": "https://stackoverflow.com/users/7086722/jim-o"}, "edited": false, "score": 0, "creation_date": 1614149714, "post_id": 60569643, "comment_id": 117293871, "body": "Does anyone have a tutorial on how I can implement this with python?"}], "tags": [], "owner": {"reputation": 834, "user_id": 9696715, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3RrU1.jpg?s=128&g=1", "display_name": "Ali", "link": "https://stackoverflow.com/users/9696715/ali"}, "is_accepted": false, "score": 15, "last_activity_date": 1583524162, "last_edit_date": 1583524162, "creation_date": 1583518929, "answer_id": 60569643, "question_id": 48674106, "link": "https://stackoverflow.com/questions/48674106/deblur-image-with-text-to-be-recognized-by-ocr/60569643#60569643", "title": "Deblur image with text to be recognized by OCR", "body": "<p>Are you aware of <a href=\"https://en.wikipedia.org/wiki/Blind_deconvolution\" rel=\"noreferrer\">Blind deconvolution</a>? </p>\n\n<p>Blind deconvolution is a well-known technique in restoring astronomical images. This is specially useful for your application, where finding a PSF is difficult.</p>\n\n<p><a href=\"https://github.com/s-hironobu/Blind-Deblurring\" rel=\"noreferrer\">Here</a> is one C++ implementation of this technique. This <a href=\"http://www.fit.vutbr.cz/~ihradis/CNN-Deblur/\" rel=\"noreferrer\">paper</a> is also very related to what you are looking for. Here is a sample output of their algorithm:</p>\n\n<p><a href=\"https://i.stack.imgur.com/bGNO3.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/bGNO3.jpg\" alt=\"enter image description here\"></a></p>\n"}, {"comments": [{"owner": {"reputation": 77, "user_id": 14396037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cdcee3c4c953fe4a5c26b6d5874aa3e?s=128&d=identicon&r=PG&f=1", "display_name": "Kerem Nayman", "link": "https://stackoverflow.com/users/14396037/kerem-nayman"}, "edited": false, "score": 1, "creation_date": 1606505792, "post_id": 64843044, "comment_id": 114989927, "body": "Hello, have you been actually test the method @Ali shared on a real image? First, on the original page Python script is for Python 2.7 and there&#39;s a lot to change, two, I haven&#39;t been able to run the code you&#39;ve provided due to this error: &quot;module &#39;caffemodel2pytorch&#39; has no attribute &#39;Net&#39;&quot;"}, {"owner": {"reputation": 990, "user_id": 7086722, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MN71C.jpg?s=128&g=1", "display_name": "Jim O.", "link": "https://stackoverflow.com/users/7086722/jim-o"}, "edited": false, "score": 0, "creation_date": 1613810319, "post_id": 64843044, "comment_id": 117195412, "body": "I&#39;m so lost with Caffe implementation. Any help would be appreciated."}, {"owner": {"reputation": 5790, "user_id": 9215780, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-lqxossnzkSU/AAAAAAAAAAI/AAAAAAAAAJg/pHrYwIfRc-k/photo.jpg?sz=128", "display_name": "M.Innat", "link": "https://stackoverflow.com/users/9215780/m-innat"}, "edited": false, "score": 0, "creation_date": 1613810573, "post_id": 64843044, "comment_id": 117195475, "body": "I didn&#39;t further go with that Caffe implementation, it has many limitations. Check <a href=\"https://stackoverflow.com/questions/64808986/scene-text-image-super-resolution-for-ocr\">my question</a> on the <b>update 2</b> section. In my case, surprisingly <a href=\"https://github.com/microsoft/Bringing-Old-Photos-Back-to-Life\" rel=\"nofollow noreferrer\">this mechanism</a> improves the visual quality of the text image as well."}, {"owner": {"reputation": 5790, "user_id": 9215780, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-lqxossnzkSU/AAAAAAAAAAI/AAAAAAAAAJg/pHrYwIfRc-k/photo.jpg?sz=128", "display_name": "M.Innat", "link": "https://stackoverflow.com/users/9215780/m-innat"}, "edited": false, "score": 0, "creation_date": 1613810718, "post_id": 64843044, "comment_id": 117195507, "body": "During my experimenting time, that mechanism didn&#39;t publish their training code, and so if they are now, we can re-train their model on this specific text de-blur case. A <a href=\"https://github.com/microsoft/Bringing-Old-Photos-Back-to-Life/issues/57\" rel=\"nofollow noreferrer\">discussion</a>."}, {"owner": {"reputation": 990, "user_id": 7086722, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MN71C.jpg?s=128&g=1", "display_name": "Jim O.", "link": "https://stackoverflow.com/users/7086722/jim-o"}, "edited": false, "score": 1, "creation_date": 1613811999, "post_id": 64843044, "comment_id": 117195791, "body": "Thanks. I&#39;ll probably forgo the RealSR because I couldn&#39;t install CUDA on my 2013 Macbook Air. The MSFT one seems plausible. I&#39;ve had some luck with <code>https:&#47;&#47;github.com&#47;ys-koshelev&#47;nla_deblur</code> and DPSR."}], "tags": [], "owner": {"reputation": 5790, "user_id": 9215780, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-lqxossnzkSU/AAAAAAAAAAI/AAAAAAAAAJg/pHrYwIfRc-k/photo.jpg?sz=128", "display_name": "M.Innat", "link": "https://stackoverflow.com/users/9215780/m-innat"}, "is_accepted": false, "score": 9, "last_activity_date": 1605784286, "last_edit_date": 1605784286, "creation_date": 1605433887, "answer_id": 64843044, "question_id": 48674106, "link": "https://stackoverflow.com/questions/48674106/deblur-image-with-text-to-be-recognized-by-ocr/64843044#64843044", "title": "Deblur image with text to be recognized by OCR", "body": "<p>I've also encountered this issue recently and raise a similar <a href=\"https://stackoverflow.com/questions/64808986/scene-text-image-super-resolution-for-ocr\">question</a> with more details and with a recent approach. It seems to be an unsolved problem until now. There are some recent research works that try to address such problems with deep learning. Unfortunately, none of the works reach our expectations. However, I'm sharing the info in case it may come helpful to anyone.</p>\n<h2>1. Scene Text Image Super-Resolution in the Wild</h2>\n<p>In our case, it may be our last choice; comparatively, perform well enough. It's a recent research work (<a href=\"https://arxiv.org/abs/2005.03341\" rel=\"noreferrer\">TSRN</a>) mainly focuses on such cases. The main intuitive of it is to introduce super-resolution (SR) techniques as pre-processing. This <a href=\"https://github.com/JasonBoy1/TextZoom\" rel=\"noreferrer\">implementation</a> looks by far the most promising. Here is the illustration of their achievement, improve blur to clean image.</p>\n<p><img src=\"https://i.stack.imgur.com/N0vc5.jpg\" alt=\"\" /></p>\n<h2>2. Neural Enhance</h2>\n<p>From their <a href=\"https://github.com/alexjc/neural-enhance\" rel=\"noreferrer\">repo</a> demonstration, It's appearing that It may have some potential to improve blur text either. However, the author probably doesn't maintain the repo for about 4 years.</p>\n<p><img src=\"https://i.stack.imgur.com/PDPIL.jpg\" alt=\"\" /></p>\n<h2>3. Blind Motion Deblurring with GAN</h2>\n<p>The attractive part is the <strong>Blind Motion Deblurring</strong> mechanism in it, named <a href=\"https://github.com/KupynOrest/DeblurGAN\" rel=\"noreferrer\">DeblurGAN</a>. It looks very promising.</p>\n<p><a href=\"https://i.stack.imgur.com/SBsow.gif\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/SBsow.gif\" alt=\"enter image description here\" /></a></p>\n<h2>4. Real-World Super-Resolution via Kernel Estimation and Noise Injection</h2>\n<p>An interesting fact about <a href=\"https://openaccess.thecvf.com/content_CVPRW_2020/papers/w31/Ji_Real-World_Super-Resolution_via_Kernel_Estimation_and_Noise_Injection_CVPRW_2020_paper.pdf\" rel=\"noreferrer\">their work</a> is that unlike other literary works they first design a novel <strong>degradation framework</strong> for realworld images by <strong>estimating various blur kernels</strong> as well as real <strong>noise distributions</strong>. Based on that they acquire <strong>LR</strong> images sharing a common domain with real-world images. Then, they propose a realworld super-resolution model aiming at better <strong>perception</strong>. From their article:</p>\n<p><a href=\"https://i.stack.imgur.com/nQjLJ.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/nQjLJ.png\" alt=\"enter image description here\" /></a> <a href=\"https://i.stack.imgur.com/hWEqX.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/hWEqX.png\" alt=\"enter image description here\" /></a></p>\n<p>However, in my observation, I couldn't get the expected results. I've raised an <a href=\"https://github.com/jixiaozhong/RealSR/issues/29\" rel=\"noreferrer\">issue on github</a> and until now didn't get any response.</p>\n<hr />\n<h2>Convolutional Neural Networks for Direct Text Deblurring</h2>\n<p>The <a href=\"http://www.fit.vutbr.cz/%7Eihradis/CNN-Deblur/\" rel=\"noreferrer\">paper</a> that was shared by @Ali looks very interesting and the outcomes are extremely good. It's nice that they have shared the pre-trained weight of their trained model and also shared python scripts for easier use. However, they've experimented with the <strong>Caffe</strong> library. I would prefer to convert into <strong>PyTorch</strong> to better control. Below are the provided python scripts with <strong>Caffe</strong> imports. Please note, I couldn't port it completely until now because of a lack of Caffe knowledge, please correct me if you are aware of it.</p>\n<pre class=\"lang-py prettyprint-override\"><code>from __future__ import print_function\nimport numpy as np\nimport os, sys, argparse, glob, time, cv2, Queue, caffe\n\n# Some Helper Functins \ndef getCutout(image, x1, y1, x2, y2, border):\n    assert(x1 &gt;= 0 and y1 &gt;= 0)\n    assert(x2 &gt; x1 and y2 &gt;y1)\n    assert(border &gt;= 0)\n    return cv2.getRectSubPix(image, (y2-y1 + 2*border, x2-x1 + 2*border), (((y2-1)+y1) / 2.0, ((x2-1)+x1) / 2.0))\n\ndef fillRndData(data, net):\n    inputLayer = 'data'\n    randomChannels = net.blobs[inputLayer].data.shape[1]\n    rndData = np.random.randn(data.shape[0], randomChannels, data.shape[2], data.shape[3]).astype(np.float32) * 0.2\n    rndData[:,0:1,:,:] = data\n    net.blobs[inputLayer].data[...] = rndData[:,0:1,:,:]\n\ndef mkdirp(directory):\n    if not os.path.isdir(directory):\n        os.makedirs(directory)\n\n</code></pre>\n<p>The main function start here</p>\n<pre class=\"lang-py prettyprint-override\"><code>def main(argv):\n    pycaffe_dir = os.path.dirname(__file__)\n\n    parser = argparse.ArgumentParser()\n    # Optional arguments.\n    parser.add_argument(\n        &quot;--model_def&quot;,\n        help=&quot;Model definition file.&quot;,\n        required=True\n    )\n    parser.add_argument(\n        &quot;--pretrained_model&quot;,\n        help=&quot;Trained model weights file.&quot;,\n        required=True\n    )\n    parser.add_argument(\n        &quot;--out_scale&quot;,\n        help=&quot;Scale of the output image.&quot;,\n        default=1.0,\n        type=float\n    )\n    parser.add_argument(\n        &quot;--output_path&quot;,\n        help=&quot;Output path.&quot;,\n        default=''\n    )\n    parser.add_argument(\n        &quot;--tile_resolution&quot;,\n        help=&quot;Resolution of processing tile.&quot;,\n        required=True,\n        type=int\n    )\n    parser.add_argument(\n        &quot;--suffix&quot;,\n        help=&quot;Suffix of the output file.&quot;,\n        default=&quot;-deblur&quot;,\n    )\n    parser.add_argument(\n        &quot;--gpu&quot;,\n        action='store_true',\n        help=&quot;Switch for gpu computation.&quot;\n    )\n    parser.add_argument(\n        &quot;--grey_mean&quot;,\n        action='store_true',\n        help=&quot;Use grey mean RGB=127. Default is the VGG mean.&quot;\n    )\n    parser.add_argument(\n        &quot;--use_mean&quot;,\n        action='store_true',\n        help=&quot;Use mean.&quot;\n    )\n    parser.add_argument(\n        &quot;--adversarial&quot;,\n        action='store_true',\n        help=&quot;Use mean.&quot;\n    )\n    args = parser.parse_args()\n\n    mkdirp(args.output_path)\n\n    if hasattr(caffe, 'set_mode_gpu'):\n        if args.gpu:\n            print('GPU mode', file=sys.stderr)\n            caffe.set_mode_gpu()\n        net = caffe.Net(args.model_def, args.pretrained_model, caffe.TEST)\n    else:\n        if args.gpu:\n            print('GPU mode', file=sys.stderr)\n        net = caffe.Net(args.model_def, args.pretrained_model, gpu=args.gpu)\n\n\n    inputs = [line.strip() for line in sys.stdin]\n\n    print(&quot;Classifying %d inputs.&quot; % len(inputs), file=sys.stderr)\n\n\n    inputBlob = net.blobs.keys()[0] # [innat]: input shape \n    outputBlob = net.blobs.keys()[-1]\n\n    print( inputBlob, outputBlob)\n    channelCount = net.blobs[inputBlob].data.shape[1]\n    net.blobs[inputBlob].reshape(1, channelCount, args.tile_resolution, args.tile_resolution)\n    net.reshape()\n\n    if channelCount == 1 or channelCount &gt; 3:\n        color = 0\n    else:\n        color = 1\n\n    outResolution = net.blobs[outputBlob].data.shape[2]\n    inResolution = int(outResolution / args.out_scale)\n    boundary = (net.blobs[inputBlob].data.shape[2] - inResolution) / 2\n\n    for fileName in inputs:\n        img = cv2.imread(fileName, flags=color).astype(np.float32)\n        original = np.copy(img)\n        img = img.reshape(img.shape[0], img.shape[1], -1)\n        if args.use_mean:\n            if args.grey_mean or channelCount == 1:\n                img -= 127\n            else:\n                img[:,:,0] -= 103.939\n                img[:,:,1] -= 116.779\n                img[:,:,2] -= 123.68\n        img *= 0.004\n\n        outShape = [int(img.shape[0] * args.out_scale) ,\n                    int(img.shape[1] * args.out_scale) ,\n                    net.blobs[outputBlob].channels]\n        imgOut = np.zeros(outShape)\n\n        imageStartTime = time.time()\n        for x, xOut in zip(range(0, img.shape[0], inResolution), range(0, imgOut.shape[0], outResolution)):\n            for y, yOut in zip(range(0, img.shape[1], inResolution), range(0, imgOut.shape[1], outResolution)):\n\n                start = time.time()\n\n                region = getCutout(img, x, y, x+inResolution, y+inResolution, boundary)\n                region = region.reshape(region.shape[0], region.shape[1], -1)\n                data = region.transpose([2, 0, 1]).reshape(1, -1, region.shape[0], region.shape[1])\n\n                if args.adversarial:\n                    fillRndData(data, net)\n                    out = net.forward()\n                else:\n                    out = net.forward_all(data=data)\n\n                out = out[outputBlob].reshape(out[outputBlob].shape[1], out[outputBlob].shape[2], out[outputBlob].shape[3]).transpose(1, 2, 0)\n\n                if imgOut.shape[2] == 3 or imgOut.shape[2] == 1:\n                    out /= 0.004\n                    if args.use_mean:\n                        if args.grey_mean:\n                            out += 127\n                        else:\n                            out[:,:,0] += 103.939\n                            out[:,:,1] += 116.779\n                            out[:,:,2] += 123.68\n\n                if out.shape[0] != outResolution:\n                    print(&quot;Warning: size of net output is %d px and it is expected to be %d px&quot; % (out.shape[0], outResolution))\n                if out.shape[0] &lt; outResolution:\n                    print(&quot;Error: size of net output is %d px and it is expected to be %d px&quot; % (out.shape[0], outResolution))\n                    exit()\n\n                xRange = min((outResolution, imgOut.shape[0] - xOut))\n                yRange = min((outResolution, imgOut.shape[1] - yOut))\n\n                imgOut[xOut:xOut+xRange, yOut:yOut+yRange, :] = out[0:xRange, 0:yRange, :]\n                imgOut[xOut:xOut+xRange, yOut:yOut+yRange, :] = out[0:xRange, 0:yRange, :]\n\n                print(&quot;.&quot;, end=&quot;&quot;, file=sys.stderr)\n                sys.stdout.flush()\n\n\n        print(imgOut.min(), imgOut.max())\n        print(&quot;IMAGE DONE %s&quot; % (time.time() - imageStartTime))\n        basename = os.path.basename(fileName)\n        name = os.path.join(args.output_path, basename + args.suffix)\n        print(name, imgOut.shape)\n        cv2.imwrite( name, imgOut)\n\nif __name__ == '__main__':\n    main(sys.argv)\n</code></pre>\n<p>To run the program:</p>\n<blockquote>\n<p>cat fileListToProcess.txt | python processWholeImage.py --model_def\n./BMVC_nets/S14_19_200.deploy --pretrained_model\n./BMVC_nets/S14_19_FQ_178000.model --output_path ./out/\n--tile_resolution 300 --suffix _out.png --gpu --use_mean</p>\n</blockquote>\n<p>The weight files and also the above scripts can be download from <a href=\"http://www.fit.vutbr.cz/%7Eihradis/CNN-Deblur/\" rel=\"noreferrer\">here (BMVC_net)</a>. However, you may want to convert <a href=\"https://github.com/vadimkantorov/caffemodel2pytorch\" rel=\"noreferrer\">caffe2pytorch</a>. In order to do that, here is the basic starting point:</p>\n<ul>\n<li>install <a href=\"http://google.github.io/proto-lens/installing-protoc.html\" rel=\"noreferrer\">proto-lens</a></li>\n<li>clone <a href=\"https://github.com/vadimkantorov/caffemodel2pytorch\" rel=\"noreferrer\">caffemodel2pytorch</a></li>\n</ul>\n<p>Next,</p>\n<pre class=\"lang-py prettyprint-override\"><code># BMVC_net, you need to download it from authors website, link above\nmodel = caffemodel2pytorch.Net(\n    prototxt = './BMVC_net/S14_19_200.deploy', \n    weights = './BMVC_net/S14_19_FQ_178000.model',\n    caffe_proto = 'https://raw.githubusercontent.com/BVLC/caffe/master/src/caffe/proto/caffe.proto'\n)\n\nmodel.cuda()\nmodel.eval()\ntorch.set_grad_enabled(False)\n</code></pre>\n<p>Run-on a demo tensor,</p>\n<pre class=\"lang-py prettyprint-override\"><code># make sure to have right procedure of image normalization and channel reordering\nimage = torch.Tensor(8, 3, 98, 98).cuda()\n\n# outputs dict of PyTorch Variables\n# in this example the dict contains the only key &quot;prob&quot;\n#output_dict = model(data = image)\n\n# you can remove unneeded layers:\n#del model.prob\n#del model.fc8\n\n# a single input variable is interpreted as an input blob named &quot;data&quot;\n# in this example the dict contains the only key &quot;fc7&quot;\noutput_dict = model(image)\n# print(output_dict)\nprint(output_dict.keys())\n</code></pre>\n<p>Please note, there are some basic things to consider; the networks expect text at DPI 120-150, reasonable orientation, and reasonable black and white levels. The networks expect to mean [103.9, 116.8, 123.7] to be subtracted from inputs. The inputs should be further multiplied by 0.004.</p>\n"}], "owner": {"reputation": 393, "user_id": 2090474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11713f9728e4c82b9f17950858be307?s=128&d=identicon&r=PG", "display_name": "Artur", "link": "https://stackoverflow.com/users/2090474/artur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1456, "favorite_count": 8, "answer_count": 2, "score": 20, "last_activity_date": 1605883951, "creation_date": 1518041361, "last_edit_date": 1605883951, "question_id": 48674106, "link": "https://stackoverflow.com/questions/48674106/deblur-image-with-text-to-be-recognized-by-ocr", "title": "Deblur image with text to be recognized by OCR", "body": "<p>I have an image which is blurred:<br />\n<img src=\"https://i.stack.imgur.com/gAQlO.png\" alt=\"1\" />\nThis is a part of the business card and it is one of the frames taken by the camera and without proper focus.</p>\n<p>The clear image looks like this\n<img src=\"https://i.stack.imgur.com/Kp124.png\" alt=\"2\" />\nI'm looking for the method which could give me an image of better quality, so that image could be recognized by OCR, but also should be quite fast. Image is not blurred too much (I think so) but isn't good for OCR. I tried:</p>\n<ul>\n<li>different kinds of HPF,</li>\n<li>Laplacian,</li>\n<li>Canny detector,</li>\n<li>combinations of morphological operations (opening, closing).</li>\n</ul>\n<p>I also tried:</p>\n<ul>\n<li>deconvolution with Wiener filter,</li>\n<li>deconvolution and Lucy-Richardson method.</li>\n</ul>\n<p>But it was not easy to find the right PSF (Point Spread Function). These methods are considered effective, but not so fast enough. I also tried FFT and then IFFT with a Gaussian mask, but results were not satisfactory. I'm looking for some kind general method of deblurring images with text, not only this image. Could someone help me with this problem? I'll be grateful for any advice. I'm working with OpenCV 3 (C++ and sometimes Python).</p>\n"}, {"tags": ["python", "gensim", "lda", "topic-modeling"], "answers": [{"tags": [], "owner": {"reputation": 864, "user_id": 6582984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23b394be3db81ad10291b6fb7b0122bc?s=128&d=identicon&r=PG&f=1", "display_name": "WolfgangK", "link": "https://stackoverflow.com/users/6582984/wolfgangk"}, "is_accepted": false, "score": 0, "last_activity_date": 1523352118, "creation_date": 1523352118, "answer_id": 49749946, "question_id": 48674084, "link": "https://stackoverflow.com/questions/48674084/words-appearing-across-all-topics-in-lda/49749946#49749946", "title": "Words appearing across all topics in lda", "body": "<p>In LDA all words are part of all topics, but with a different probability. You could define a minimum probability for your words to print, but I would be very surprised if mallet didn't come up with at least a couple of \"duplicate\" words across topics as well. Make sure to use the same parameters for both gensim and mallet.</p>\n"}], "owner": {"reputation": 1, "user_id": 5421102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2443d8bde721d48be82d277a4b8c49d7?s=128&d=identicon&r=PG&f=1", "display_name": "darth vader", "link": "https://stackoverflow.com/users/5421102/darth-vader"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 501, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1523352118, "creation_date": 1518041288, "question_id": 48674084, "link": "https://stackoverflow.com/questions/48674084/words-appearing-across-all-topics-in-lda", "title": "Words appearing across all topics in lda", "body": "<p>I am using gensim lda for topic modeling and getting the results like so:</p>\n\n<p>Topic 1: word1 word2 word3 word4</p>\n\n<p>Topic 2: word4 word1 word2 word5</p>\n\n<p>Topic 3: word1 word4 word5 word6</p>\n\n<p>However using mallet on same lda does not produce duplicate words across topics. I have ~20 documents with >1000 words each that I train the lda on. How to get rid of words appearing across multiple topics?</p>\n"}, {"tags": ["python", "r", "matplotlib", "jupyter-notebook", "r-markdown"], "comments": [{"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 1, "creation_date": 1518041941, "post_id": 48674061, "comment_id": 84346903, "body": "Note that <code>%matplotlib inline</code> is not native python. In python a <code>%</code> is a modulo operator or a string formatter. The <code>%magic_command</code> comes from <code>IPython</code>, so what would be needed is to integrate <code>IPython</code> into the notebook. Not sure if that is even possible by design or desirable though."}, {"owner": {"reputation": 51, "user_id": 6347487, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-tmeYC5vJYmo/AAAAAAAAAAI/AAAAAAAAJX0/OcpFaqX1zCc/photo.jpg?sz=128", "display_name": "Seth Ariel Green", "link": "https://stackoverflow.com/users/6347487/seth-ariel-green"}, "reply_to_user": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1518201475, "post_id": 48674061, "comment_id": 84423300, "body": "Ah thank you! So I wonder still how to get inline matplotlib results in an R notebook. Maybe not worth investing in though."}, {"owner": {"reputation": 7829, "user_id": 2641825, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/f8f682f30f7a3b07bd67be391e169232?s=128&d=identicon&r=PG", "display_name": "Paul Rougieux", "link": "https://stackoverflow.com/users/2641825/paul-rougieux"}, "edited": false, "score": 0, "creation_date": 1587627868, "post_id": 48674061, "comment_id": 108586607, "body": "Have a look at <a href=\"https://stackoverflow.com/questions/36437028/graphing-matplotlib-with-python-code-in-a-r-markdown-document\" title=\"graphing matplotlib with python code in a r markdown document\">stackoverflow.com/questions/36437028/&hellip;</a> seems matplotlib plot work for others."}], "owner": {"reputation": 51, "user_id": 6347487, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-tmeYC5vJYmo/AAAAAAAAAAI/AAAAAAAAJX0/OcpFaqX1zCc/photo.jpg?sz=128", "display_name": "Seth Ariel Green", "link": "https://stackoverflow.com/users/6347487/seth-ariel-green"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 655, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1518041154, "creation_date": 1518041154, "question_id": 48674061, "link": "https://stackoverflow.com/questions/48674061/matplotlib-inline-in-rmarkdown-r-notebooks", "title": "%matplotlib inline in Rmarkdown /R notebooks", "body": "<p><strong>Context:</strong> I am doing a bit of comparison between Jupyter Notebooks and R Notebooks. One thing I like about R notebooks is you can vary language between cells. I am testing this with the following published notebook <a href=\"https://bitaesthetics.com/posts/fractal-generation-with-l-systems.html\" rel=\"nofollow noreferrer\">https://bitaesthetics.com/posts/fractal-generation-with-l-systems.html</a></p>\n\n<p><strong>Problem:</strong> Drawing python results inline does not seem to work. I can call <code>plt.show()</code>, and have the graph pop up, but  <code>%matplotlib inline</code> produces the following error: </p>\n\n<pre><code>File \"/var/folders/30/dl1nh_s15mq9j9b0469q_vvh0000gn/T/RtmpjAYRiE/chunk-code22c26a73f799.\", line 1\n    %matplotlib inline\n    ^\nSyntaxError: invalid syntax\n</code></pre>\n\n<p><strong>Reproducible Example:</strong></p>\n\n<pre><code>```{python}\n    %matplotlib inline\n    import matplotlib.pyplot as plt\n    plt.style.use('bmh')  # Use some nicer default colors\n    plt.plot(\n        [0, 1, 2],  # X-values\n        [0, 1, 0]   # Y-values\n    )\n    # The next two lines add labels to the axes.\n    plt.xlabel('x')\n    plt.ylabel('y');\n```\n</code></pre>\n\n<p>Anyone have any experience with this? I checked the Rstudio help page and GitHub and found that they're working on a new package, reticulate, <a href=\"https://github.com/rstudio/reticulate/pull/107#issuecomment-359944469\" rel=\"nofollow noreferrer\">https://github.com/rstudio/reticulate/pull/107#issuecomment-359944469</a>, rather than offering a lot of support for native python in R markdown. </p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "pandas", "physics", "pandas-groupby", "numerical-integration"], "comments": [{"owner": {"reputation": 15126, "user_id": 1953800, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4173076e5187c82e74379de9aeb00aa4?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1953800/alex"}, "edited": false, "score": 1, "creation_date": 1518040986, "post_id": 48674003, "comment_id": 84346479, "body": "Welcome to StackOverflow! Please read about <a href=\"https://stackoverflow.com/help/how-to-ask\">how to ask a question</a> (particularly <a href=\"https://stackoverflow.com/help/mcve\">how to create a good example</a>) in order to get good responses."}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 2, "creation_date": 1518041041, "post_id": 48674003, "comment_id": 84346498, "body": "Can you post a small sample reproducible data set and your desired data set? Also please read <a href=\"http://stackoverflow.com/questions/20109391/how-to-make-good-reproducible-pandas-examples\">how to make good reproducible pandas examples</a> and edit your post correspondingly."}, {"owner": {"reputation": 33, "user_id": 9330012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8d07b7645c9cf5925ef811773b1998f?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas Ioannou", "link": "https://stackoverflow.com/users/9330012/andreas-ioannou"}, "reply_to_user": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1518043602, "post_id": 48674003, "comment_id": 84347643, "body": "@MaxU edited with some code generating a DataFrame with sample but  similar data."}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1518044421, "post_id": 48674003, "comment_id": 84347934, "body": "@AndreasIoannou, I don&#39;t know what does it mean: <code>&quot;to integrate the acceleration column over each orbital period&quot;</code> - that&#39;s why I asked also for a desired data set. PS I have slightly modified your code in order to produce the same random values (<code>np.random.seed(...)</code>)"}, {"owner": {"reputation": 33, "user_id": 9330012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8d07b7645c9cf5925ef811773b1998f?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas Ioannou", "link": "https://stackoverflow.com/users/9330012/andreas-ioannou"}, "reply_to_user": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1518045393, "post_id": 48674003, "comment_id": 84348303, "body": "@MaxU I have the acceleration of the satellite as a function of time. I want to calculate the change in velocity over each orbital period (i.e integrate the acceleration with respect to time to calculate the velocity). But first I need to split/group the rows of the DataFrame into single orbitals. Does this make more sense?"}], "answers": [{"tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": false, "score": 0, "last_activity_date": 1518046442, "creation_date": 1518046442, "answer_id": 48675106, "question_id": 48674003, "link": "https://stackoverflow.com/questions/48674003/group-consecutive-rows-in-a-pandas-dataframe-by-conditioning-on-hitting-max-valu/48675106#48675106", "title": "Group consecutive rows in a pandas dataframe by conditioning on hitting max value in another column", "body": "<p>IIUC here is a small demo:</p>\n\n<pre><code>In [280]: d = pd.DataFrame({'Lat':[1,3,4,2,0,1,2,3], 'Acc':np.random.randint(0,4,8)})\n\nIn [281]: d\nOut[281]:\n   Acc  Lat\n0    3    1\n1    1    3\n2    2    4\n3    3    2\n4    2    0\n5    2    1\n6    2    2\n7    2    3\n\nIn [282]: d.groupby(np.sign(d.Lat.diff().bfill(0)).diff().fillna(0).ne(0).cumsum())['Acc'].sum()\nOut[282]:\nLat\n0    6\n1    5\n2    6\nName: Acc, dtype: int32\n</code></pre>\n\n<p>Details:</p>\n\n<pre><code>In [288]: d.Lat.diff().bfill(0)\nOut[288]:\n0    2.0\n1    2.0\n2    1.0\n3   -2.0\n4   -2.0\n5    1.0\n6    1.0\n7    1.0\nName: Lat, dtype: float64\n\nIn [289]: np.sign(d.Lat.diff().bfill(0))\nOut[289]:\n0    1.0\n1    1.0\n2    1.0\n3   -1.0\n4   -1.0\n5    1.0\n6    1.0\n7    1.0\nName: Lat, dtype: float64\n\nIn [290]: np.sign(d.Lat.diff().bfill(0)).diff().fillna(0).ne(0)\nOut[290]:\n0    False\n1    False\n2    False\n3     True\n4    False\n5     True\n6    False\n7    False\nName: Lat, dtype: bool\n\nIn [291]: np.sign(d.Lat.diff().bfill(0)).diff().fillna(0).ne(0).cumsum()\nOut[291]:\n0    0\n1    0\n2    0\n3    1\n4    1\n5    2\n6    2\n7    2\nName: Lat, dtype: int32\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 9330012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8d07b7645c9cf5925ef811773b1998f?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas Ioannou", "link": "https://stackoverflow.com/users/9330012/andreas-ioannou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 664, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1518046442, "creation_date": 1518040893, "last_edit_date": 1518044385, "question_id": 48674003, "link": "https://stackoverflow.com/questions/48674003/group-consecutive-rows-in-a-pandas-dataframe-by-conditioning-on-hitting-max-valu", "title": "Group consecutive rows in a pandas dataframe by conditioning on hitting max value in another column", "body": "<p>I have a pandas dataframe indexed by a time series with columns of GPS latitude and acceleration for a satellite orbiting the Earth. This latitude oscillates between maximum and minimum values with a constant time period as expected. What I want to do is integrate the acceleration column over each orbital period.</p>\n\n<p>I understand I need to use the pandas 'groupby' method to group each period. Howeve, I can't figure out how I can group the consecutive rows into orbital periods (say iterating through it and grouping until I hit the maximum latitude value thus defining the end of an orbit?). After grouping I can then apply a numerical integration on each period. </p>\n\n<p>An example code generating a similar DataFrame is given below. </p>\n\n<pre><code>from scipy import signal\n\nt = np.linspace(0, 1, 500)\nnp.random.seed(0) # make sure we will get the same values every time\ndf = pd.DataFrame(\n {'Lat': signal.sawtooth(2 *np.pi * 5 * t, 0.5),\n  'Acc': np.random.rand(500)}, \n index=pd.date_range('1/1/2011 00:00:00.006392', periods=500, freq='10ms')\n)\n</code></pre>\n\n<p>Any help would be much appreciated. And any more information please ask!</p>\n"}, {"tags": ["python", "post", "parameters", "http-post", "request-headers"], "comments": [{"owner": {"reputation": 1143, "user_id": 8759952, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7d8e784fa5cd3e5a2dfe13b405fc1de1?s=128&d=identicon&r=PG&f=1", "display_name": "Liora Haydont", "link": "https://stackoverflow.com/users/8759952/liora-haydont"}, "edited": false, "score": 0, "creation_date": 1518040982, "post_id": 48673982, "comment_id": 84346475, "body": "have you tried <code>data = {&#39;key&#39;:&#39;value&#39;}</code>?"}, {"owner": {"reputation": 11, "user_id": 9329999, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-gWsAEFPI8io/AAAAAAAAAAI/AAAAAAAAACE/HAnBZeBTtD4/photo.jpg?sz=128", "display_name": "GURNOOR SANDHU", "link": "https://stackoverflow.com/users/9329999/gurnoor-sandhu"}, "reply_to_user": {"reputation": 15126, "user_id": 1953800, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4173076e5187c82e74379de9aeb00aa4?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1953800/alex"}, "edited": false, "score": 0, "creation_date": 1518099092, "post_id": 48673982, "comment_id": 84372721, "body": "@Alex , thank for your reply. The &quot;code&quot; is the error code.   Liora Haydont , thank you for replying! Yes, I have tried that. It results in the same error."}], "owner": {"reputation": 11, "user_id": 9329999, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-gWsAEFPI8io/AAAAAAAAAAI/AAAAAAAAACE/HAnBZeBTtD4/photo.jpg?sz=128", "display_name": "GURNOOR SANDHU", "link": "https://stackoverflow.com/users/9329999/gurnoor-sandhu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 445, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1518040877, "creation_date": 1518040796, "last_edit_date": 1518040877, "question_id": 48673982, "link": "https://stackoverflow.com/questions/48673982/passing-parameters-into-post-method-in-python", "title": "Passing Parameters into POST method in Python", "body": "<p>I am trying to create a nameset using the POST method on the given server(url)</p>\n\n<p>I tried several methods to pass the parameters, but I still get the missing parameters' error. Can somebody please help me out?</p>\n\n<p>I am running Python file in cygwin64.</p>\n\n<p>The Code:</p>\n\n<pre><code>import requests\n\nimport json\n\nURL = \"http://xxx.xx.xxx.xxx/m***/w**/nameset\"\n\npayload = {'name':'Test'}     \nheader = {\n    \"content-type\": \"application/json\" \n}\n# create a nameset\nr2 = requests.post(url = URL, auth=('admin', 'admin'), params=payload, headers=header)\n\nprint r2.text\n\nprint r2.status_code\n</code></pre>\n\n<p><strong>The error on the terminal:</strong> </p>\n\n<pre><code>{\"error\": {\"message\": \"Missing control \\\"params\\\"\", \"code\": 0}}\n400\n</code></pre>\n"}, {"tags": ["python", "string"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1518040579, "post_id": 48673914, "comment_id": 84346286, "body": "Why would you want to do this?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1518040693, "post_id": 48673914, "comment_id": 84346327, "body": "StackOverflow expects you to <a href=\"http://meta.stackoverflow.com/questions/261592\">try to solve your own problem first</a>, and we also <a href=\"https://softwareengineering.meta.stackexchange.com/questions/6166\">don&#39;t answer homework questions</a> (ignore if you&#39;re not asking about hw). Please update your question to show what you have already tried in a <a href=\"http://stackoverflow.com/help/mcve\">minimal, complete, and verifiable example</a>. For further information, please see <a href=\"http://stackoverflow.com/help/how-to-ask\">how to ask good questions</a>, and take the <a href=\"http://stackoverflow.com/tour\">tour of the site</a> :)"}, {"owner": {"reputation": 591, "user_id": 2425811, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VSKXL.jpg?s=128&g=1", "display_name": "Chris Risley", "link": "https://stackoverflow.com/users/2425811/chris-risley"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1518040792, "post_id": 48673914, "comment_id": 84346374, "body": "Creating a command line elastic search utility program for some co-workers. When copying queries from elastic search, the keys are singly quoted. However, when loading JSON using the json library, it requires the keys to be surrounded by both double and single quotes."}, {"owner": {"reputation": 15126, "user_id": 1953800, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4173076e5187c82e74379de9aeb00aa4?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1953800/alex"}, "edited": false, "score": 0, "creation_date": 1518040824, "post_id": 48673914, "comment_id": 84346397, "body": "Are you trying to get a string that is in two sets of quotes? Or just change the representation of strings in your REPL?"}, {"owner": {"reputation": 591, "user_id": 2425811, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VSKXL.jpg?s=128&g=1", "display_name": "Chris Risley", "link": "https://stackoverflow.com/users/2425811/chris-risley"}, "edited": false, "score": 0, "creation_date": 1518041487, "post_id": 48673914, "comment_id": 84346680, "body": "I want to prevent users of the REPL from having to manually replace each single quote with a double and single quote before running the command"}], "answers": [{"comments": [{"owner": {"reputation": 591, "user_id": 2425811, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VSKXL.jpg?s=128&g=1", "display_name": "Chris Risley", "link": "https://stackoverflow.com/users/2425811/chris-risley"}, "edited": false, "score": 0, "creation_date": 1518041932, "post_id": 48674107, "comment_id": 84346899, "body": "I don\u2019t think this would work. If I replaced the single quotes with \u2018\u201c and then did it again but set the max to 1, it would skip the first one, but if my json was any longer, I would be stuck. It would need to flip back and forth. Unless I\u2019m interpreting this wrong, max(the third argument) does not do this correct?"}, {"owner": {"reputation": 304, "user_id": 7254260, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/10153543840897676/picture?type=large", "display_name": "Ollie Beumkes", "link": "https://stackoverflow.com/users/7254260/ollie-beumkes"}, "reply_to_user": {"reputation": 591, "user_id": 2425811, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VSKXL.jpg?s=128&g=1", "display_name": "Chris Risley", "link": "https://stackoverflow.com/users/2425811/chris-risley"}, "edited": false, "score": 0, "creation_date": 1518048097, "post_id": 48674107, "comment_id": 84349164, "body": "You could possibly try using a bool or int i and set to first char and for second, you can also use this function to check for chars in string and then switch out char at 0 and 1...    $&#39; in s   to return if it finds a &quot; or &#39; or what not, anyhow good luck i hope you find your answer or these functions come of some use."}, {"owner": {"reputation": 591, "user_id": 2425811, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VSKXL.jpg?s=128&g=1", "display_name": "Chris Risley", "link": "https://stackoverflow.com/users/2425811/chris-risley"}, "edited": false, "score": 0, "creation_date": 1518203860, "post_id": 48674107, "comment_id": 84424427, "body": "It ended up that my string didn&#39;t even have quotes in it to begin with, so I&#39;m unable to do anything about it. Thanks though."}], "tags": [], "owner": {"reputation": 304, "user_id": 7254260, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/10153543840897676/picture?type=large", "display_name": "Ollie Beumkes", "link": "https://stackoverflow.com/users/7254260/ollie-beumkes"}, "is_accepted": true, "score": 1, "last_activity_date": 1518041363, "last_edit_date": 1592644375, "creation_date": 1518041363, "answer_id": 48674107, "question_id": 48673914, "link": "https://stackoverflow.com/questions/48673914/how-to-replace-single-quotes-within-a-string-with-quoted-double-quotes/48674107#48674107", "title": "How to replace single quotes within a string with quoted double quotes", "body": "<p>why not try using this method: <a href=\"https://www.tutorialspoint.com/python/string_replace.htm\" rel=\"nofollow noreferrer\">https://www.tutorialspoint.com/python/string_replace.htm</a> and try to replace, ' for '&quot; and the second ' for &quot;'...</p>\n<pre><code>str = &quot;this is string example....wow!!! this is really string&quot;\nprint str.replace(&quot;is&quot;, &quot;was&quot;)\nprint str.replace(&quot;is&quot;, &quot;was&quot;, 3)\n</code></pre>\n<p>the output returns:</p>\n<blockquote>\n<p>thwas was string example....wow!!! thwas was really string</p>\n<p>thwas was string example....wow!!! thwas is really string</p>\n</blockquote>\n<pre><code>print str.replace(&quot;'&quot;, &quot;'&quot;&quot;)\nprint str.replace(&quot;'&quot;, &quot;&quot;'&quot;, 1)\n</code></pre>\n<p>use ' &quot; as needed to avoid errors...</p>\n"}], "owner": {"reputation": 591, "user_id": 2425811, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VSKXL.jpg?s=128&g=1", "display_name": "Chris Risley", "link": "https://stackoverflow.com/users/2425811/chris-risley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 48674107, "answer_count": 1, "score": 0, "last_activity_date": 1518041363, "creation_date": 1518040474, "last_edit_date": 1518041137, "question_id": 48673914, "link": "https://stackoverflow.com/questions/48673914/how-to-replace-single-quotes-within-a-string-with-quoted-double-quotes", "title": "How to replace single quotes within a string with quoted double quotes", "body": "<p>For example: </p>\n\n<p>Input:</p>\n\n<pre><code>{'match_all':{}}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>{'\"match_all\"':{}}\n</code></pre>\n\n<p>Is there some regex that can do this?</p>\n\n<p>I know I could iterate through the string and whenever I encounter a key replace each side of it with \u2018\u201c followed by \u201c\u2018; however, I was wondering if any of you knew a more pythonic way of doing this. </p>\n"}, {"tags": ["javascript", "python", "json"], "comments": [{"owner": {"reputation": 530, "user_id": 4017803, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Sagar", "link": "https://stackoverflow.com/users/4017803/sagar"}, "edited": false, "score": 0, "creation_date": 1518040727, "post_id": 48673900, "comment_id": 84346343, "body": "url also have query_hash -- you don&#39;t have that. It might also be protected to not allow cross domain"}], "answers": [{"comments": [{"owner": {"reputation": 325, "user_id": 7595201, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7b0d47b066eebc4a352551e2e346c643?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick.H", "link": "https://stackoverflow.com/users/7595201/patrick-h"}, "edited": false, "score": 0, "creation_date": 1518041230, "post_id": 48674009, "comment_id": 84346582, "body": "I didn&#39;t know that was possible, and which website do I type in as redirect url? I mean I don&#39;t own any"}, {"owner": {"reputation": 109, "user_id": 7563498, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-kFX2qThpLTc/AAAAAAAAAAI/AAAAAAAAAEw/N_QiNp8atSY/photo.jpg?sz=128", "display_name": "Yusof Bandar", "link": "https://stackoverflow.com/users/7563498/yusof-bandar"}, "reply_to_user": {"reputation": 325, "user_id": 7595201, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7b0d47b066eebc4a352551e2e346c643?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick.H", "link": "https://stackoverflow.com/users/7595201/patrick-h"}, "edited": false, "score": 0, "creation_date": 1518098736, "post_id": 48674009, "comment_id": 84372468, "body": "Here is a link to a <a href=\"https://stackoverflow.com/questions/21681090/instagram-api-redirect-url\">Stack Overflow answer</a> which should help."}, {"owner": {"reputation": 1225, "user_id": 164374, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/cec55858d5bfcd26a5e37dbe74a62bd9?s=128&d=identicon&r=PG", "display_name": "Vlax", "link": "https://stackoverflow.com/users/164374/vlax"}, "edited": false, "score": 0, "creation_date": 1564568574, "post_id": 48674009, "comment_id": 101071745, "body": "This is not more possible and heavily restricted"}], "tags": [], "owner": {"reputation": 109, "user_id": 7563498, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-kFX2qThpLTc/AAAAAAAAAAI/AAAAAAAAAEw/N_QiNp8atSY/photo.jpg?sz=128", "display_name": "Yusof Bandar", "link": "https://stackoverflow.com/users/7563498/yusof-bandar"}, "is_accepted": false, "score": 1, "last_activity_date": 1518040922, "creation_date": 1518040922, "answer_id": 48674009, "question_id": 48673900, "link": "https://stackoverflow.com/questions/48673900/get-json-from-website-instagram/48674009#48674009", "title": "Get JSON from website (instagram)", "body": "<p>Trying to get the Json loaded in the background is too much work for a simple problem. </p>\n\n<p>You should use the Instagram Api. Just put your name as a company. </p>\n"}, {"comments": [{"owner": {"reputation": 306, "user_id": 8067748, "user_type": "registered", "profile_image": "https://graph.facebook.com/10213784748239561/picture?type=large", "display_name": "Michael Goetti", "link": "https://stackoverflow.com/users/8067748/michael-goetti"}, "edited": false, "score": 0, "creation_date": 1518041492, "post_id": 48674091, "comment_id": 84346682, "body": "The &#39;=1&#39; at the end of the GET URL appears to be critical.  As the OP stated, without it, it just returns HTML.  With it, you get just JSON."}, {"owner": {"reputation": 413, "user_id": 6119009, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/0LRA8.jpg?s=128&g=1", "display_name": "Fernando Torres", "link": "https://stackoverflow.com/users/6119009/fernando-torres"}, "edited": false, "score": 0, "creation_date": 1564117007, "post_id": 48674091, "comment_id": 100932078, "body": "how can i get more thumbnail resources from this url? thanks"}, {"owner": {"reputation": 1225, "user_id": 164374, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/cec55858d5bfcd26a5e37dbe74a62bd9?s=128&d=identicon&r=PG", "display_name": "Vlax", "link": "https://stackoverflow.com/users/164374/vlax"}, "edited": false, "score": 1, "creation_date": 1564566831, "post_id": 48674091, "comment_id": 101070676, "body": "How do you do pagination with this approach?"}, {"owner": {"reputation": 486, "user_id": 7027615, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9WNHb.jpg?s=128&g=1", "display_name": "Haseeb Burki", "link": "https://stackoverflow.com/users/7027615/haseeb-burki"}, "edited": false, "score": 0, "creation_date": 1581597081, "post_id": 48674091, "comment_id": 106493723, "body": "This just saved my day :D How did you figure this out?!?!"}, {"owner": {"reputation": 388, "user_id": 1874449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gjhnP.jpg?s=128&g=1", "display_name": "Habib Karbasian", "link": "https://stackoverflow.com/users/1874449/habib-karbasian"}, "edited": false, "score": 0, "creation_date": 1585064877, "post_id": 48674091, "comment_id": 107631927, "body": "Check out <a href=\"https://stackoverflow.com/a/49341049/1874449\">stackoverflow.com/a/49341049/1874449</a> for pagination of post for a given user_id. It uses a unique <code>query_hash</code> given by instagram website available in the post."}], "tags": [], "owner": {"reputation": 306, "user_id": 8067748, "user_type": "registered", "profile_image": "https://graph.facebook.com/10213784748239561/picture?type=large", "display_name": "Michael Goetti", "link": "https://stackoverflow.com/users/8067748/michael-goetti"}, "is_accepted": true, "score": 17, "last_activity_date": 1518041314, "creation_date": 1518041314, "answer_id": 48674091, "question_id": 48673900, "link": "https://stackoverflow.com/questions/48673900/get-json-from-website-instagram/48674091#48674091", "title": "Get JSON from website (instagram)", "body": "<p>I ran into a problem trying to get the API to do what I wanted, and really just needed JSON data including urls and captions for images for a specific account.  </p>\n\n<p>Use the following GET request:</p>\n\n<p><a href=\"https://www.instagram.com/account_name/?__a=1\" rel=\"noreferrer\">https://www.instagram.com/account_name/?__a=1</a></p>\n\n<p>where account_name is the profile I'm scraping.</p>\n\n<p>It returns all JSON I needed for my task.</p>\n"}], "owner": {"reputation": 325, "user_id": 7595201, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7b0d47b066eebc4a352551e2e346c643?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick.H", "link": "https://stackoverflow.com/users/7595201/patrick-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 15944, "favorite_count": 2, "accepted_answer_id": 48674091, "answer_count": 2, "score": 4, "last_activity_date": 1518041314, "creation_date": 1518040409, "last_edit_date": 1518040582, "question_id": 48673900, "link": "https://stackoverflow.com/questions/48673900/get-json-from-website-instagram", "title": "Get JSON from website (instagram)", "body": "<p>I recently got the idea to scrape information from instagram accounts and their posts, like the amount of comments or amount of likes. I got so far that I figured out while debugging in chrome that for example the link <strong><a href=\"https://www.instagram.com/instagram/?__a\" rel=\"nofollow noreferrer\">https://www.instagram.com/instagram/?__a</a></strong> under the network tab returns a JSON with the wanted information, but what is actually loaded is still the normal website html code.</p>\n\n<p><a href=\"https://i.stack.imgur.com/dvXQ9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dvXQ9.png\" alt=\"json data\"></a></p>\n\n<p>so far I tried in python with this code: </p>\n\n<pre><code>import urllib.request\nr = urllib.request.urlopen(url)\nprint(r.read())\n</code></pre>\n\n<p>or in javascript :</p>\n\n<pre><code>window.onload = function () {\n    res = fetch(\"https://www.instagram.com/instagram/?__a\", {\n        method: 'get'\n    }).then(function (data) {\n        return data.json();\n    }).catch(function (error) {\n        console.log(\"ERROR\".concat(error.toString()));\n    });\n    console.log(res.user);\n};\n</code></pre>\n\n<p>So the problem I have, is that when using these functions I only get the website code (<strong>html</strong>), is there a way to only get the JSON which is loaded in the background? I know people will recommend me using the instagram api, but I have no website nor a company to register.</p>\n"}, {"tags": ["python", "sorting"], "comments": [{"owner": {"reputation": 206726, "user_id": 5459839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iehrR.jpg?s=128&g=1", "display_name": "trincot", "link": "https://stackoverflow.com/users/5459839/trincot"}, "edited": false, "score": 0, "creation_date": 1518040796, "post_id": 48673887, "comment_id": 84346377, "body": "You are looking for where to move the current value in the <i>unsorted</i> part of the list (at the right of it), while you should look for where to move it in the <i>sorted</i> part of the list (at the left of it)."}, {"owner": {"reputation": 1143, "user_id": 8759952, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7d8e784fa5cd3e5a2dfe13b405fc1de1?s=128&d=identicon&r=PG&f=1", "display_name": "Liora Haydont", "link": "https://stackoverflow.com/users/8759952/liora-haydont"}, "edited": false, "score": 0, "creation_date": 1518040809, "post_id": 48673887, "comment_id": 84346384, "body": "Can you show us the data set you tried and the result you had?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8574892"}, "reply_to_user": {"reputation": 1143, "user_id": 8759952, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7d8e784fa5cd3e5a2dfe13b405fc1de1?s=128&d=identicon&r=PG&f=1", "display_name": "Liora Haydont", "link": "https://stackoverflow.com/users/8759952/liora-haydont"}, "edited": false, "score": 0, "creation_date": 1518041107, "post_id": 48673887, "comment_id": 84346526, "body": "@LioraHaydont Please see updated question."}, {"owner": {"reputation": 206726, "user_id": 5459839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iehrR.jpg?s=128&g=1", "display_name": "trincot", "link": "https://stackoverflow.com/users/5459839/trincot"}, "edited": false, "score": 0, "creation_date": 1518041403, "post_id": 48673887, "comment_id": 84346655, "body": "Why don&#39;t you look at the correct insertion sort algorithm, for example on Wikipedia?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8574892"}, "reply_to_user": {"reputation": 206726, "user_id": 5459839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iehrR.jpg?s=128&g=1", "display_name": "trincot", "link": "https://stackoverflow.com/users/5459839/trincot"}, "edited": false, "score": 0, "creation_date": 1518041579, "post_id": 48673887, "comment_id": 84346731, "body": "@trincot Because I am hoping to be told what I am doing wrong so I can correct it myself and avoid making the same mistake again. I am not too sure I understand what you mean in your last message though."}, {"owner": {"reputation": 206726, "user_id": 5459839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iehrR.jpg?s=128&g=1", "display_name": "trincot", "link": "https://stackoverflow.com/users/5459839/trincot"}, "edited": false, "score": 1, "creation_date": 1518041718, "post_id": 48673887, "comment_id": 84346795, "body": "Your algorithm is wrong: insertion sort involves several assignments (shifts) at the left of a given index, to find the spot where to insert the value at that index. After inserting it there, only then it goes on to the next index. Your code only performs one swap per recursion level. If that would work you would have implemented a way to sort any array with at the most n swaps. That is not insertion sort."}], "owner": {"user_type": "does_not_exist", "display_name": "user8574892"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1518041079, "creation_date": 1518040363, "last_edit_date": 1518041079, "question_id": 48673887, "link": "https://stackoverflow.com/questions/48673887/why-isnt-my-insertion-sort-working", "title": "Why isn&#39;t my insertion sort working?", "body": "<p>I am trying to implement an insertion sort from reading the vague description, so I may very well be going about it the wrong way. However, from what I can see this should work:</p>\n\n<pre><code>import random\n\narr = []\nc_num = 0\n\nfor i in range(0, 10):\n    arr.append(random.randint(0, 10))\n\ndef InsertionSort(unsorted_array, current_num):\n    smallest_num = unsorted_array[current_num]\n    smallest_num_index = 0\n    isSorted = True\n\n    for i in range(current_num, len(unsorted_array) - 1):\n        if unsorted_array[i] &lt; smallest_num:\n            smallest_num = unsorted_array[i]\n            smallest_num_index = i\n            isSorted = False\n\n    if isSorted:\n        return unsorted_array\n    else:\n        temp = unsorted_array[current_num]\n        unsorted_array[current_num] = smallest_num\n        unsorted_array[smallest_num_index] = temp\n        current_num += 1\n        return InsertionSort(unsorted_array, current_num)\n\nprint(InsertionSort(arr, c_num))\n</code></pre>\n\n<p>It will sort the first few elements, and then just print out the now slightly-sorted array, but I can't see what I am missing to get the whole thing sorted.</p>\n\n<p>Sample:</p>\n\n<p>input = [9, 8, 5, 4, 5, 8, 2, 10, 7, 5]</p>\n\n<p>output = [2, 4, 5, 8, 5, 8, 9, 10, 7, 5]</p>\n"}, {"tags": ["python", "django", "opencv", "opencv3.0", "opencv-contrib"], "answers": [{"tags": [], "owner": {"reputation": 1934, "user_id": 8194089, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xBWEjMZm7G0/AAAAAAAAAAI/AAAAAAAAAEw/rf8j8HUnqlc/photo.jpg?sz=128", "display_name": "Chamila Maddumage", "link": "https://stackoverflow.com/users/8194089/chamila-maddumage"}, "is_accepted": false, "score": 1, "last_activity_date": 1535368113, "creation_date": 1535368113, "answer_id": 52037967, "question_id": 48673885, "link": "https://stackoverflow.com/questions/48673885/opencv-error-file-cannot-be-opened-for-reading-cvfacefacerecognizerread-wi/52037967#52037967", "title": "opencv error file cannot be opened for reading cv::face::FaceRecognizer::read windows", "body": "<p>I had the the same problem. Actually problem happens here.</p>\n\n<pre><code>recognizer = cv2.face.LBPHFaceRecognizer_create()\nrecognizer.read(\"recognizers/face-trainner.yml\")//path should be correct\n</code></pre>\n\n<p>There is a path in the second line of the above code snippet. You should give the correct path for the training model and this works for me.</p>\n"}], "owner": {"reputation": 31, "user_id": 9313744, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9rEqfCERaXI/AAAAAAAAAAI/AAAAAAAAOZ4/jNH-BGYO-RI/photo.jpg?sz=128", "display_name": "raghav kharbanda", "link": "https://stackoverflow.com/users/9313744/raghav-kharbanda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6053, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1535368113, "creation_date": 1518040354, "last_edit_date": 1518053980, "question_id": 48673885, "link": "https://stackoverflow.com/questions/48673885/opencv-error-file-cannot-be-opened-for-reading-cvfacefacerecognizerread-wi", "title": "opencv error file cannot be opened for reading cv::face::FaceRecognizer::read windows", "body": "<p>I have been trying to run a <code>django</code> application (attendance system with face recognition).<br>\nI'm using <code>python</code> with <code>opencv3.2</code> and after installing both <code>opencv-python</code> and <code>opencv-contrib-python</code> using pip on anaconda framework, i still get error like this     </p>\n\n<pre><code>opencv error file cannot be opened for reading \ncv::face::FaceRecognizer::read\".\nfile c:\\projects\\opencv-python\\opencv_contrib\\modules\\face\\src\\facerec.cpp line 61.\n</code></pre>\n"}, {"tags": ["python", "machine-learning", "installation", "anaconda", "theano"], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user8890679"}, "is_accepted": false, "score": 5, "last_activity_date": 1518727124, "creation_date": 1518727124, "answer_id": 48815859, "question_id": 48673863, "link": "https://stackoverflow.com/questions/48673863/anaconda-theano-installation-error/48815859#48815859", "title": "Anaconda Theano - installation error", "body": "<p>I have had the exact same error. On other forums there are suggestions that there is a bug in MKL 2018. For me the problem was solved by downgrading to MKL 2017. I installed through Miniconda:</p>\n\n<pre><code>conda install mkl=2017\n</code></pre>\n\n<p>This also means downgrading several other dependent packages but I haven't experienced any problems from this. You also have to make sure the package is installed in the correct environment. Let me know if it works for you.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user5564056"}, "is_accepted": false, "score": 0, "last_activity_date": 1518866024, "creation_date": 1518866024, "answer_id": 48840677, "question_id": 48673863, "link": "https://stackoverflow.com/questions/48673863/anaconda-theano-installation-error/48840677#48840677", "title": "Anaconda Theano - installation error", "body": "<p>Also have the same problem I did following:</p>\n\n<pre><code>conda uninstall theano\nconda uninstall mkl=2018\nconda install mkl=2017\nconda install theano\n</code></pre>\n\n<p>Only those I needed to downgrade. It happened later that I by accidentally upgraded to mlk=2018 when was installing other packet with pip. But then theano was working for me still work, not sure how. </p>\n"}, {"tags": [], "owner": {"reputation": 77, "user_id": 9435456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2de2b254f5128262b1eeb78213e4270?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/9435456/michael"}, "is_accepted": false, "score": 1, "last_activity_date": 1523492363, "creation_date": 1523492363, "answer_id": 49786162, "question_id": 48673863, "link": "https://stackoverflow.com/questions/48673863/anaconda-theano-installation-error/49786162#49786162", "title": "Anaconda Theano - installation error", "body": "<p>I initially downgraded mkl2018 to mkl2017 but later ran into problems with theano and numpy.</p>\n\n<p>The solution that worked for me was to do what it says at the bottom of the error: </p>\n\n<p>Set a new environment variable 'MKL_THREADING_LAYER' to the value 'GNU'. This soln (with more detail) came from <a href=\"https://github.com/Theano/Theano/issues/6568\" rel=\"nofollow noreferrer\">https://github.com/Theano/Theano/issues/6568</a></p>\n"}], "owner": {"reputation": 41, "user_id": 9330014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1b2640123c6dfffc42843de6c052841?s=128&d=identicon&r=PG&f=1", "display_name": "Andrz", "link": "https://stackoverflow.com/users/9330014/andrz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2238, "favorite_count": 2, "answer_count": 3, "score": 4, "last_activity_date": 1523492363, "creation_date": 1518040278, "last_edit_date": 1518045324, "question_id": 48673863, "link": "https://stackoverflow.com/questions/48673863/anaconda-theano-installation-error", "title": "Anaconda Theano - installation error", "body": "<p>I was fallowing this setup instructions: <a href=\"https://machinelearningmastery.com/setup-python-environment-machine-learning-deep-learning-anaconda\" rel=\"nofollow noreferrer\">https://machinelearningmastery.com/setup-python-environment-machine-learning-deep-learning-anaconda</a>\nBut I got this problem at the very end and I have no idea how to fix this:</p>\n\n<pre><code>(base) C:\\Users\\andrz&gt;python deep_versions.py\nTraceback (most recent call last):\nFile \u201cC:\\Users\\andrz\\Anaconda3\\lib\\configparser.py\u201d, line 1138, in _unify_values\nsectiondict = self._sections[section]\nKeyError: \u2018blas\u2019\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\nFile \u201cC:\\Users\\andrz\\Anaconda3\\lib\\site-packages\\theano\\configparser.py\u201d, line 168, in fetch_val_for_key\nreturn theano_cfg.get(section, option)\nFile \u201cC:\\Users\\andrz\\Anaconda3\\lib\\configparser.py\u201d, line 781, in get\nd = self._unify_values(section, vars)\nFile \u201cC:\\Users\\andrz\\Anaconda3\\lib\\configparser.py\u201d, line 1141, in _unify_values\nraise NoSectionError(section)\nconfigparser.NoSectionError: No section: \u2018blas\u2019\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\nFile \u201cC:\\Users\\andrz\\Anaconda3\\lib\\site-packages\\theano\\configparser.py\u201d, line 328, in __get__\ndelete_key=delete_key)\nFile \u201cC:\\Users\\andrz\\Anaconda3\\lib\\site-packages\\theano\\configparser.py\u201d, line 172, in fetch_val_for_key\nraise KeyError(key)\nKeyError: \u2018blas.ldflags\u2019\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\nFile \u201cdeep_versions.py\u201d, line 2, in\nimport theano\nFile \u201cC:\\Users\\andrz\\Anaconda3\\lib\\site-packages\\theano\\__init__.py\u201d, line 124, in\nfrom theano.scan_module import (scan, map, reduce, foldl, foldr, clone,\nFile \u201cC:\\Users\\andrz\\Anaconda3\\lib\\site-packages\\theano\\scan_module\\__init__.py\u201d, line 41, in\nfrom theano.scan_module import scan_opt\nFile \u201cC:\\Users\\andrz\\Anaconda3\\lib\\site-packages\\theano\\scan_module\\scan_opt.py\u201d, line 60, in\nfrom theano import tensor, scalar\nFile \u201cC:\\Users\\andrz\\Anaconda3\\lib\\site-packages\\theano\\tensor\\__init__.py\u201d, line 17, in\nfrom theano.tensor import blas\nFile \u201cC:\\Users\\andrz\\Anaconda3\\lib\\site-packages\\theano\\tensor\\blas.py\u201d, line 155, in\nfrom theano.tensor.blas_headers import blas_header_text\nFile \u201cC:\\Users\\andrz\\Anaconda3\\lib\\site-packages\\theano\\tensor\\blas_headers.py\u201d, line 987, in\nif not config.blas.ldflags:\nFile \u201cC:\\Users\\andrz\\Anaconda3\\lib\\site-packages\\theano\\configparser.py\u201d, line 332, in __get__\nval_str = self.default()\nFile \u201cC:\\Users\\andrz\\Anaconda3\\lib\\site-packages\\theano\\configdefaults.py\u201d, line 1430, in default_blas_ldflags\ncheck_mkl_openmp()\nFile \u201cC:\\Users\\andrz\\Anaconda3\\lib\\site-packages\\theano\\configdefaults.py\u201d, line 1252, in check_mkl_openmp\nraise RuntimeError(\u2018To use MKL 2018 with Theano you MUST set \u201cMKL_THREADING_LAYER=GNU\u201d in your environement.\u2019)\nRuntimeError: To use MKL 2018 with Theano you MUST set \u201cMKL_THREADING_LAYER=GNU\u201d in your environement.\n</code></pre>\n"}, {"tags": ["python", "curl"], "answers": [{"tags": [], "owner": {"reputation": 1341, "user_id": 6809571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/000a638897147ab84cf57cde60e2d05b?s=128&d=identicon&r=PG&f=1", "display_name": "John R", "link": "https://stackoverflow.com/users/6809571/john-r"}, "is_accepted": true, "score": 1, "last_activity_date": 1518040356, "creation_date": 1518040356, "answer_id": 48673886, "question_id": 48673809, "link": "https://stackoverflow.com/questions/48673809/python-xpost-via-requests-doesnt-work-while-curl-is-working-well/48673886#48673886", "title": "Python / XPOST via requests doesn&#39;t work while curl is working well", "body": "<p>What version of requests are you using? Could be that you need to json encode your data.</p>\n\n<p>Use json.dumps() to encode your data:</p>\n\n<pre><code>import requests\nimport json\n\ndata_input={\"from\":t, \"to\": t, \"message\": \"TEST-2\", \"id\": \"1\"}\nprint data_input\nr = requests.post(url=\"http://myserver:8080/api/\", data=json.dumps(data_input))\nprint(r.status_code, r.reason)\n</code></pre>\n"}], "owner": {"reputation": 2170, "user_id": 4593587, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/fca9d89b9ba50c11b8f1fec9debc142b?s=128&d=identicon&r=PG&f=1", "display_name": "MIDE11", "link": "https://stackoverflow.com/users/4593587/mide11"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 345, "favorite_count": 0, "accepted_answer_id": 48673886, "answer_count": 1, "score": 0, "last_activity_date": 1518040368, "creation_date": 1518040084, "question_id": 48673809, "link": "https://stackoverflow.com/questions/48673809/python-xpost-via-requests-doesnt-work-while-curl-is-working-well", "title": "Python / XPOST via requests doesn&#39;t work while curl is working well", "body": "<p>When Im running curl locally, everything is working as expected: </p>\n\n<pre><code>curl -XPOST http://myserver:8080/api/ -d '{\"id\":\"1\",\"message\":\"TEST\",\"from\":1008003880,\"to\":1008003881}'\n</code></pre>\n\n<p>Im writing python code, in the following way: </p>\n\n<pre><code>// some code\nimport requests\n// some code\ndata_input={\"from\":t_before, \"to\": t, \"message\": \"TEST-2\", \"id\": \"1\"}\nprint data_input\nr = requests.post(url=\"http://myserver:8080/api/\", data=data_input)\nprint(r.status_code, r.reason)\n</code></pre>\n\n<p>It gives the following output:</p>\n\n<pre><code>{'to': 1008003881, 'message': 'TEST-2', 'from': 1008003880, 'id': 1}\n(400, 'Bad Request')\n</code></pre>\n\n<p>What can be the reason? is python change the request in some way?</p>\n"}, {"tags": ["python", "sympy"], "answers": [{"comments": [{"owner": {"reputation": 123, "user_id": 9139877, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/27e29ff1176b69d10c38e21a498e8597?s=128&d=identicon&r=PG&f=1", "display_name": "Push", "link": "https://stackoverflow.com/users/9139877/push"}, "edited": false, "score": 0, "creation_date": 1518042660, "post_id": 48674317, "comment_id": 84347215, "body": "I tried using a dictionary. But how will you use it eventually in sympy differentiation as <code>a</code> and <code>b</code> (keys of dictionary symbol) are still strings?"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "reply_to_user": {"reputation": 123, "user_id": 9139877, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/27e29ff1176b69d10c38e21a498e8597?s=128&d=identicon&r=PG&f=1", "display_name": "Push", "link": "https://stackoverflow.com/users/9139877/push"}, "edited": false, "score": 0, "creation_date": 1518042817, "post_id": 48674317, "comment_id": 84347297, "body": "Can you get the job done by using a list/array of values?  You <i>can</i> dig into your main program&#39;s stack object and add variables, but that&#39;s even touchier than <code>eval</code>."}, {"owner": {"reputation": 123, "user_id": 9139877, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/27e29ff1176b69d10c38e21a498e8597?s=128&d=identicon&r=PG&f=1", "display_name": "Push", "link": "https://stackoverflow.com/users/9139877/push"}, "edited": false, "score": 0, "creation_date": 1518043011, "post_id": 48674317, "comment_id": 84347383, "body": "Your answer is helpful. I guess I can make it work using a dictionary."}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": true, "score": 1, "last_activity_date": 1518042380, "creation_date": 1518042380, "answer_id": 48674317, "question_id": 48673780, "link": "https://stackoverflow.com/questions/48673780/parsing-a-list-and-create-expressions/48674317#48674317", "title": "Parsing a list and create expressions", "body": "<p>In general, you don't.  Trying to set up dynamic variable names is usually a sign of poor design.  If you <em>do</em> need those symbols to represent things to the outside world, try keeping a label and a value.  For instance, a dictionary can do something like this for you.</p>\n\n<pre><code>symbol = { 'a': x**2; 'b': x**3 }\n</code></pre>\n\n<p>You can add symbols from there, change values, etc.  For instance,</p>\n\n<pre><code>symbol = { 'a': x**2 }\nsymbol['b'] = symbol['a'] * x\n</code></pre>\n\n<hr>\n\n<p>Granted, you can build an expression string and use <code>eval</code> on the contents, but this is generally dangerous and hard to maintain well.</p>\n\n<p>A wider possibility is to manipulate string values and write the Python script you'd like to run.  Write it to a file and then use the <code>os</code> or <code>subprocess</code> commands to execute it.</p>\n\n<p>Does that get you moving?</p>\n"}], "owner": {"reputation": 123, "user_id": 9139877, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/27e29ff1176b69d10c38e21a498e8597?s=128&d=identicon&r=PG&f=1", "display_name": "Push", "link": "https://stackoverflow.com/users/9139877/push"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 48674317, "answer_count": 1, "score": -2, "last_activity_date": 1518042380, "creation_date": 1518039949, "last_edit_date": 1518041741, "question_id": 48673780, "link": "https://stackoverflow.com/questions/48673780/parsing-a-list-and-create-expressions", "title": "Parsing a list and create expressions", "body": "<p>I have a list of strings:</p>\n\n<pre><code>A = ['a','b']\n</code></pre>\n\n<p>I want to parse this list and write following expressions:</p>\n\n<pre><code>a = x**2\nb = a*x\n</code></pre>\n\n<p>where <code>x</code> is a <code>sympy</code> symbol and later on I will use these expressions for other operations like differentiation and so on. The problem is that <code>a</code> and <code>b</code> are strings inside the list. I am not being able to use them as expressions! How can I do this?</p>\n"}, {"tags": ["python", "c++", "numpy", "eigen3", "tensor"], "answers": [{"tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": false, "score": 1, "last_activity_date": 1518043632, "creation_date": 1518043632, "answer_id": 48674604, "question_id": 48673775, "link": "https://stackoverflow.com/questions/48673775/eigen-contraction-vs-numpy-dot/48674604#48674604", "title": "Eigen Contraction vs Numpy Dot", "body": "<p>I can't help you with the c++ code, but I can identify, in numpy terms, what is going on:</p>\n\n<pre><code>In [1]: A=np.arange(1,28).reshape(3,3,3)\nIn [3]: A\nOut[3]: \narray([[[ 1,  2,  3],\n        [ 4,  5,  6],\n        [ 7,  8,  9]],\n\n       [[10, 11, 12],\n        [13, 14, 15],\n        [16, 17, 18]],\n\n       [[19, 20, 21],\n        [22, 23, 24],\n        [25, 26, 27]]])\nIn [5]: B=np.repeat([[1,2]],3, axis=0)\nIn [6]: B\nOut[6]: \narray([[1, 2],\n       [1, 2],\n       [1, 2]])\n</code></pre>\n\n<p>Your dot - remember last of A with 2nd to the last of B:</p>\n\n<pre><code>In [7]: A.dot(B)\nOut[7]: \narray([[[  6,  12],\n        [ 15,  30],\n        [ 24,  48]],\n\n       [[ 33,  66],\n        [ 42,  84],\n        [ 51, 102]],\n\n       [[ 60, 120],\n        [ 69, 138],\n        [ 78, 156]]])\n</code></pre>\n\n<p>With <code>einsum</code> index this is clear (at least to me):</p>\n\n<pre><code>In [8]: np.einsum('ijk,kl',A,B)    # notice the k pair\nOut[8]: \narray([[[  6,  12],\n        [ 15,  30],\n        [ 24,  48]],\n\n       [[ 33,  66],\n        [ 42,  84],\n        [ 51, 102]],\n\n       [[ 60, 120],\n        [ 69, 138],\n        [ 78, 156]]])\n</code></pre>\n\n<p>But if I change the <code>einsum</code> to use the 2nd to the last of both, I get your c++ results (I think):</p>\n\n<pre><code>In [9]: np.einsum('ijk,jl',A,B)    # notice the j pair\nOut[9]: \narray([[[ 12,  24],\n        [ 15,  30],\n        [ 18,  36]],\n\n       [[ 39,  78],\n        [ 42,  84],\n        [ 45,  90]],\n\n       [[ 66, 132],\n        [ 69, 138],\n        [ 72, 144]]])\n</code></pre>\n"}], "owner": {"reputation": 1843, "user_id": 1436508, "user_type": "registered", "accept_rate": 39, "profile_image": "https://lh3.googleusercontent.com/-p4GumfwGZus/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-i9vW1oPm_00XtAVO06i_X9sWp2sA/mo/photo.jpg?sz=128", "display_name": "raaj", "link": "https://stackoverflow.com/users/1436508/raaj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 484, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1518043632, "creation_date": 1518039906, "question_id": 48673775, "link": "https://stackoverflow.com/questions/48673775/eigen-contraction-vs-numpy-dot", "title": "Eigen Contraction vs Numpy Dot", "body": "<p>Hi all I have the following tensor dot product in Numpy:</p>\n\n<pre><code>import numpy as np\n\ntensorA = np.array([[[1,2,3],\n                  [4,5,6],\n                  [7,8,9]],\n                 [[10,11,12],\n                  [13,14,15],\n                  [16,17,18]],\n                 [[19,20,21],\n                  [22,23,24],\n                  [25,26,27]]])\n\ntensorB = np.array([[1,2],\n                       [1,2],\n                       [1,2]])\n\nprint tensorA.dot(tensorB)\n</code></pre>\n\n<p>It gives the following answer:</p>\n\n<pre><code>[[[  6  12]\n  [ 15  30]\n  [ 24  48]]\n\n [[ 33  66]\n  [ 42  84]\n  [ 51 102]]\n\n [[ 60 120]\n  [ 69 138]\n  [ 78 156]]]\n</code></pre>\n\n<p>However, when I do the same thing in C++ Eigen:</p>\n\n<pre><code>Eigen::Tensor&lt;float, 3&gt; tensorA(3,3,3);\ntensorA.setValues({{{1,2,3},\n              {4,5,6},\n              {7,8,9}},\n\n             {{10,11,12},\n              {13,14,15},\n              {16,17,18}},\n\n             {{19,20,21},\n              {22,23,24},\n              {25,26,27}}});\n\nEigen::Tensor&lt;float, 2&gt; tensorB(3,2);\ntensorB.setValues({{1,2},\n                   {1,2},\n                   {1,2}});\n\n// Compute the traditional matrix product\nEigen::array&lt;Eigen::IndexPair&lt;float&gt;, 1&gt; product_dims = { Eigen::IndexPair&lt;float&gt;(0, 1) };\nEigen::Tensor&lt;float, 3&gt; AB = tensorA.contract(tensorB, product_dims);\n</code></pre>\n\n<p>I get:</p>\n\n<pre><code>D: 3 R: 3 C: 2\n[[12.000     24.000     ]\n[15.000     30.000     ]\n[18.000     36.000     ]\n]\nR: 3 C: 2\n[[39.000     78.000     ]\n[42.000     84.000     ]\n[45.000     90.000     ]\n]\nR: 3 C: 2\n[[66.000     132.000     ]\n[69.000     138.000     ]\n[72.000     144.000     ]\n]\n</code></pre>\n\n<p>Why is this happening. I want a tensor dot product that is equivalent to what numpy is giving me. Is it something to do with the product_dims parameter in c++? Or is there some other bug involved? Basically, it needs to multiply the depth component 3 times.</p>\n"}, {"tags": ["python", "django", "python-3.x", "django-models", "django-authentication"], "owner": {"reputation": 1909, "user_id": 7668467, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0e880601228777466cc33bca31a7581e?s=128&d=identicon&r=PG&f=1", "display_name": "OverflowingTheGlass", "link": "https://stackoverflow.com/users/7668467/overflowingtheglass"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 129, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1518041311, "creation_date": 1518039759, "last_edit_date": 1518041311, "question_id": 48673739, "link": "https://stackoverflow.com/questions/48673739/django-row-level-permissions-on-a-model-with-django-rules", "title": "Django Row-Level Permissions on a Model With django-rules", "body": "<p>I have a django project with two models:</p>\n\n<pre><code>class Project(models.Model):\n    name = models.CharField(primary_key=True, max_length=12)\n    team = models.CharField(max_length=10)\n\nclass Task(models.Model):\n    name = models.CharField(max_length=10)\n    project = models.ForeignKey(Project)\n</code></pre>\n\n<p>I would like to control which rows in these models each user can access. My groups in <code>auth_group</code> correspond to <code>team</code> in the <code>Project</code> model. </p>\n\n<p>How would I use <code>django-rules</code> to restrict user access to <code>Task</code> rows based on <code>Project</code> <code>team</code>? Let's say there is <code>Team X</code>, and John Smith has been placed in <code>group</code> <code>Team X</code>. How should <code>django-rules</code> be used to only allow John Smith to see tasks that are tied to projects for <code>Team X</code>?</p>\n\n<p>I'm not sure how to access <code>Team</code> in order to compare it to the groups the user is a part of. Unsure to the point where I don't have any workable code to show for it. The difficulty comes in the fact that it has to traverse a foreign key. In addition, each row (<code>team</code>) has to be checked against each group a user is a part of.</p>\n"}, {"tags": ["python", "django"], "answers": [{"comments": [{"owner": {"reputation": 310, "user_id": 8176683, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c8ced0a3314056946f6c38547a7158f4?s=128&d=identicon&r=PG&f=1", "display_name": "Gozie", "link": "https://stackoverflow.com/users/8176683/gozie"}, "edited": false, "score": 0, "creation_date": 1518040998, "post_id": 48673874, "comment_id": 84346483, "body": "It&#39;s still not working. See the updated traceback in the question edit"}, {"owner": {"reputation": 1186, "user_id": 1882397, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/kX5cT.png?s=128&g=1", "display_name": "kszl", "link": "https://stackoverflow.com/users/1882397/kszl"}, "reply_to_user": {"reputation": 310, "user_id": 8176683, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c8ced0a3314056946f6c38547a7158f4?s=128&d=identicon&r=PG&f=1", "display_name": "Gozie", "link": "https://stackoverflow.com/users/8176683/gozie"}, "edited": false, "score": 0, "creation_date": 1518041221, "post_id": 48673874, "comment_id": 84346579, "body": "Now it found the pattern, but the arguments didn&#39;t match it. For some reason you have <code>uidb36</code> instead of <code>uidb64</code> as an argument. Unfortunately it&#39;s hard to guess what actually happened without the code."}, {"owner": {"reputation": 1186, "user_id": 1882397, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/kX5cT.png?s=128&g=1", "display_name": "kszl", "link": "https://stackoverflow.com/users/1882397/kszl"}, "reply_to_user": {"reputation": 310, "user_id": 8176683, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c8ced0a3314056946f6c38547a7158f4?s=128&d=identicon&r=PG&f=1", "display_name": "Gozie", "link": "https://stackoverflow.com/users/8176683/gozie"}, "edited": false, "score": 0, "creation_date": 1518041305, "post_id": 48673874, "comment_id": 84346613, "body": "Probably some problem with the version. Maybe that will be helpful: <a href=\"https://stackoverflow.com/questions/6323852/django-nonrel-django-registration-problem-unexpected-keyword-argument-uidb36\" title=\"django nonrel django registration problem unexpected keyword argument uidb36\">stackoverflow.com/questions/6323852/&hellip;</a>"}, {"owner": {"reputation": 310, "user_id": 8176683, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c8ced0a3314056946f6c38547a7158f4?s=128&d=identicon&r=PG&f=1", "display_name": "Gozie", "link": "https://stackoverflow.com/users/8176683/gozie"}, "edited": false, "score": 0, "creation_date": 1518041530, "post_id": 48673874, "comment_id": 84346709, "body": "Thanks, that was it. I changed uidb36 to uidb64 in my template and it worked"}], "tags": [], "owner": {"reputation": 1186, "user_id": 1882397, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/kX5cT.png?s=128&g=1", "display_name": "kszl", "link": "https://stackoverflow.com/users/1882397/kszl"}, "is_accepted": true, "score": 1, "last_activity_date": 1518040317, "creation_date": 1518040317, "answer_id": 48673874, "question_id": 48673723, "link": "https://stackoverflow.com/questions/48673723/noreversematch-at-accounts-password-reset-django-registration-redux/48673874#48673874", "title": "NoReverseMatch at /accounts/password/reset/ django registration redux", "body": "<p>It looks like the view with the name <code>password_reset_confirm</code> hasn't been found.</p>\n\n<p>It's in the auth app, so try adding:</p>\n\n<pre><code>url(r'^', include('django.contrib.auth.urls'))\n</code></pre>\n\n<p>to your urlpatterns.</p>\n"}], "owner": {"reputation": 310, "user_id": 8176683, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c8ced0a3314056946f6c38547a7158f4?s=128&d=identicon&r=PG&f=1", "display_name": "Gozie", "link": "https://stackoverflow.com/users/8176683/gozie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "accepted_answer_id": 48673874, "answer_count": 1, "score": 0, "last_activity_date": 1518040804, "creation_date": 1518039685, "last_edit_date": 1518040804, "question_id": 48673723, "link": "https://stackoverflow.com/questions/48673723/noreversematch-at-accounts-password-reset-django-registration-redux", "title": "NoReverseMatch at /accounts/password/reset/ django registration redux", "body": "<p>I'm trying to use django-registration-redux for my authentication in my project, but when testing out the password reset, I come up with an error containing the following traceback</p>\n\n<pre><code>Internal Server Error: /accounts/password/reset/\nTraceback (most recent call last):\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/core/handlers/exception.py\", line 41, in inner\n    response = get_response(request)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/core/handlers/base.py\", line 187, in _get_response\n    response = self.process_exception_by_middleware(e, request)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/core/handlers/base.py\", line 185, in _get_response\n    response = wrapped_callback(request, *callback_args, **callback_kwargs)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/views/generic/base.py\", line 68, in view\n    return self.dispatch(request, *args, **kwargs)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/utils/decorators.py\", line 67, in _wrapper\n    return bound_func(*args, **kwargs)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/utils/decorators.py\", line 149, in _wrapped_view\n    response = view_func(request, *args, **kwargs)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/utils/decorators.py\", line 63, in bound_func\n    return func.__get__(self, type(self))(*args2, **kwargs2)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/contrib/auth/views.py\", line 418, in dispatch\n    return super(PasswordResetView, self).dispatch(*args, **kwargs)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/views/generic/base.py\", line 88, in dispatch\n    return handler(request, *args, **kwargs)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/views/generic/edit.py\", line 183, in post\n    return self.form_valid(form)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/contrib/auth/views.py\", line 431, in form_valid\n    form.save(**opts)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/contrib/auth/forms.py\", line 289, in save\n    email, html_email_template_name=html_email_template_name,\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/contrib/auth/forms.py\", line 236, in send_mail\n    body = loader.render_to_string(email_template_name, context)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/template/loader.py\", line 68, in render_to_string\n    return template.render(context, request)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/template/backends/django.py\", line 66, in render\n    return self.template.render(context)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/template/base.py\", line 207, in render\n    return self._render(context)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/template/base.py\", line 199, in _render\n    return self.nodelist.render(context)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/template/base.py\", line 990, in render\n    bit = node.render_annotated(context)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/template/base.py\", line 957, in render_annotated\n    return self.render(context)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/template/defaulttags.py\", line 40, in render\n    output = self.nodelist.render(context)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/template/base.py\", line 990, in render\n    bit = node.render_annotated(context)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/template/base.py\", line 957, in render_annotated\n    return self.render(context)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/template/loader_tags.py\", line 63, in render\n    result = self.nodelist.render(context)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/template/base.py\", line 990, in render\n    bit = node.render_annotated(context)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/template/base.py\", line 957, in render_annotated\n    return self.render(context)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/template/defaulttags.py\", line 458, in render\n    url = reverse(view_name, args=args, kwargs=kwargs, current_app=current_app)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/urls/base.py\", line 91, in reverse\n    return force_text(iri_to_uri(resolver._reverse_with_prefix(view, prefix, *args, **kwargs)))\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/urls/resolvers.py\", line 497, in _reverse_with_prefix\n    raise NoReverseMatch(msg)\nNoReverseMatch: Reverse for 'password_reset_confirm' not found. 'password_reset_confirm' is not a valid view function or pattern name.\n[07/Feb/2018 22:33:51] \"POST /accounts/password/reset/ HTTP/1.1\" 500 197836\n[2018-02-07 22:33:51,527] - Broken pipe from ('127.0.0.1', 45428)\n\nInternal Server Error: /accounts/password/reset/\nTraceback (most recent call last):\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/core/handlers/exception.py\", line 41, in inner\n    response = get_response(request)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/core/handlers/base.py\", line 187, in _get_response\n    response = self.process_exception_by_middleware(e, request)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/core/handlers/base.py\", line 185, in _get_response\n    response = wrapped_callback(request, *callback_args, **callback_kwargs)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/views/generic/base.py\", line 68, in view\n    return self.dispatch(request, *args, **kwargs)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/utils/decorators.py\", line 67, in _wrapper\n    return bound_func(*args, **kwargs)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/utils/decorators.py\", line 149, in _wrapped_view\n    response = view_func(request, *args, **kwargs)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/utils/decorators.py\", line 63, in bound_func\n    return func.__get__(self, type(self))(*args2, **kwargs2)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/contrib/auth/views.py\", line 418, in dispatch\n    return super(PasswordResetView, self).dispatch(*args, **kwargs)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/views/generic/base.py\", line 88, in dispatch\n    return handler(request, *args, **kwargs)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/views/generic/edit.py\", line 183, in post\n    return self.form_valid(form)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/contrib/auth/views.py\", line 431, in form_valid\n    form.save(**opts)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/contrib/auth/forms.py\", line 289, in save\n    email, html_email_template_name=html_email_template_name,\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/contrib/auth/forms.py\", line 236, in send_mail\n    body = loader.render_to_string(email_template_name, context)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/template/loader.py\", line 68, in render_to_string\n    return template.render(context, request)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/template/backends/django.py\", line 66, in render\n    return self.template.render(context)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/template/base.py\", line 207, in render\n    return self._render(context)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/template/base.py\", line 199, in _render\n    return self.nodelist.render(context)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/template/base.py\", line 990, in render\n    bit = node.render_annotated(context)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/template/base.py\", line 957, in render_annotated\n    return self.render(context)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/template/defaulttags.py\", line 40, in render\n    output = self.nodelist.render(context)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/template/base.py\", line 990, in render\n    bit = node.render_annotated(context)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/template/base.py\", line 957, in render_annotated\n    return self.render(context)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/template/loader_tags.py\", line 63, in render\n    result = self.nodelist.render(context)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/template/base.py\", line 990, in render\n    bit = node.render_annotated(context)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/template/base.py\", line 957, in render_annotated\n    return self.render(context)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/template/defaulttags.py\", line 458, in render\n    url = reverse(view_name, args=args, kwargs=kwargs, current_app=current_app)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/urls/base.py\", line 91, in reverse\n    return force_text(iri_to_uri(resolver._reverse_with_prefix(view, prefix, *args, **kwargs)))\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/urls/resolvers.py\", line 497, in _reverse_with_prefix\n    raise NoReverseMatch(msg)\nNoReverseMatch: Reverse for 'password_reset_confirm' not found. 'password_reset_confirm' is not a valid view function or pattern name.\n[07/Feb/2018 22:33:52] \"POST /accounts/password/reset/ HTTP/1.1\" 500 197836\n</code></pre>\n\n<p>My registration, login and other django-registration functions are working but this still gives an error. I have checked other SO related questions but none of them has helped me thus far. Below is my project's urls.py</p>\n\n<pre><code>from django.conf import settings\nfrom django.conf.urls.static import static\nfrom django.conf.urls import url, include\nfrom django.contrib import admin\nfrom sweet import views\n\nurlpatterns = [\n    url(r'^accounts/', include('registration.backends.default.urls')),\n    # url(r'^lollipop/', include('lollipop.urls')),\n    # url(r'^pinpop/', include('pinpop.urls')),\n    url(r'^', include('sweet.urls')),   \n    # url(r'^', views.index, name='index'),\n    url(r'^admin/', admin.site.urls),\n] + static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)\n</code></pre>\n\n<p>EDIT:\nAfter following BUZZY's answer, here is the new traceback</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/core/handlers/exception.py\", line 41, in inner\n    response = get_response(request)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/core/handlers/base.py\", line 187, in _get_response\n    response = self.process_exception_by_middleware(e, request)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/core/handlers/base.py\", line 185, in _get_response\n    response = wrapped_callback(request, *callback_args, **callback_kwargs)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/views/generic/base.py\", line 68, in view\n    return self.dispatch(request, *args, **kwargs)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/utils/decorators.py\", line 67, in _wrapper\n    return bound_func(*args, **kwargs)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/utils/decorators.py\", line 149, in _wrapped_view\n    response = view_func(request, *args, **kwargs)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/utils/decorators.py\", line 63, in bound_func\n    return func.__get__(self, type(self))(*args2, **kwargs2)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/contrib/auth/views.py\", line 418, in dispatch\n    return super(PasswordResetView, self).dispatch(*args, **kwargs)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/views/generic/base.py\", line 88, in dispatch\n    return handler(request, *args, **kwargs)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/views/generic/edit.py\", line 183, in post\n    return self.form_valid(form)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/contrib/auth/views.py\", line 431, in form_valid\n    form.save(**opts)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/contrib/auth/forms.py\", line 289, in save\n    email, html_email_template_name=html_email_template_name,\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/contrib/auth/forms.py\", line 236, in send_mail\n    body = loader.render_to_string(email_template_name, context)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/template/loader.py\", line 68, in render_to_string\n    return template.render(context, request)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/template/backends/django.py\", line 66, in render\n    return self.template.render(context)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/template/base.py\", line 207, in render\n    return self._render(context)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/template/base.py\", line 199, in _render\n    return self.nodelist.render(context)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/template/base.py\", line 990, in render\n    bit = node.render_annotated(context)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/template/base.py\", line 957, in render_annotated\n    return self.render(context)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/template/defaulttags.py\", line 40, in render\n    output = self.nodelist.render(context)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/template/base.py\", line 990, in render\n    bit = node.render_annotated(context)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/template/base.py\", line 957, in render_annotated\n    return self.render(context)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/template/loader_tags.py\", line 63, in render\n    result = self.nodelist.render(context)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/template/base.py\", line 990, in render\n    bit = node.render_annotated(context)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/template/base.py\", line 957, in render_annotated\n    return self.render(context)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/template/defaulttags.py\", line 458, in render\n    url = reverse(view_name, args=args, kwargs=kwargs, current_app=current_app)\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/urls/base.py\", line 91, in reverse\n    return force_text(iri_to_uri(resolver._reverse_with_prefix(view, prefix, *args, **kwargs)))\n  File \"/home/agozie/anaconda3/envs/env1/lib/python2.7/site-packages/django/urls/resolvers.py\", line 497, in _reverse_with_prefix\n    raise NoReverseMatch(msg)\nNoReverseMatch: Reverse for 'password_reset_confirm' with keyword arguments '{u'uidb36': 'MjY', u'token': u'4ti-05f34bb12daa049f844d'}' not found. 1 pattern(s) tried: ['reset/(?P&lt;uidb64&gt;[0-9A-Za-z_\\\\-]+)/(?P&lt;token&gt;[0-9A-Za-z]{1,13}-[0-9A-Za-z]{1,20})/$']\n[07/Feb/2018 22:57:25] \"POST /accounts/password/reset/ HTTP/1.1\" 500 201717.\n</code></pre>\n\n<p>Still not working</p>\n"}, {"tags": ["python", "matplotlib"], "comments": [{"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1518040173, "post_id": 48673674, "comment_id": 84346077, "body": "You have 7 ticks on the x axis, but you are trying to set more than 1000 labels to those 7 ticks. Still, because there are only 7 ticks available, not more than those 7 are shown."}, {"owner": {"reputation": 58, "user_id": 8421974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d33861db10090ec85f224a111848ea35?s=128&d=identicon&r=PG&f=1", "display_name": "rjh336", "link": "https://stackoverflow.com/users/8421974/rjh336"}, "reply_to_user": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1518108322, "post_id": 48673674, "comment_id": 84379275, "body": "@ImportanceOfBeingErnest Where did I declare there to only be 7 ticks?"}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1518108658, "post_id": 48673674, "comment_id": 84379496, "body": "You did not declare that anywhere, that&#39;s why matplotlib decided to put 7 ticks there. Depending on the size of the plot it might also decide differently of course."}], "answers": [{"tags": [], "owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "is_accepted": true, "score": 0, "last_activity_date": 1518041144, "creation_date": 1518041144, "answer_id": 48674056, "question_id": 48673674, "link": "https://stackoverflow.com/questions/48673674/matplotlib-time-series-missing-part-of-the-data/48674056#48674056", "title": "Matplotlib time series missing part of the data", "body": "<p>You have 7 ticks on the x axis, but you are trying to set more than 1000 labels to those 7 ticks. Still, because there are only 7 ticks available, not more than those 7 are shown.</p>\n\n<p>It would probably make sense to directly plot the dates, something like</p>\n\n<pre><code>import matplotlib.dates \n\ndates = matplotlib.dates.date2num(d.date.tolist())\nax.scatter(dates, df.ppg, s=5, alpha=0.5)\n</code></pre>\n\n<p>then use some useful ticker, e.g. a MonthLocator:</p>\n\n<pre><code>ax.xaxis.set_major_locator(matplotlib.dates.MonthLocator())\n</code></pre>\n"}], "owner": {"reputation": 58, "user_id": 8421974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d33861db10090ec85f224a111848ea35?s=128&d=identicon&r=PG&f=1", "display_name": "rjh336", "link": "https://stackoverflow.com/users/8421974/rjh336"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 258, "favorite_count": 0, "accepted_answer_id": 48674056, "answer_count": 1, "score": 2, "last_activity_date": 1518041144, "creation_date": 1518039482, "question_id": 48673674, "link": "https://stackoverflow.com/questions/48673674/matplotlib-time-series-missing-part-of-the-data", "title": "Matplotlib time series missing part of the data", "body": "<p>I have a dict (<strong>\"groups_dict\"</strong>) of 3 pandas dataframes with the following attributes:</p>\n\n<pre><code>print(groups_dict['high'].info())\nprint(groups_dict['medium'].info())\nprint(groups_dict['low'].info())\n\n# OUTPUT\n&lt;class 'pandas.core.frame.DataFrame'&gt;\nRangeIndex: 1241 entries, 0 to 1240\nData columns (total 2 columns):\ndate    1241 non-null datetime64[ns]\nppg     1241 non-null float64\ndtypes: datetime64[ns](1), float64(1)\nmemory usage: 19.5 KB\n\n&lt;class 'pandas.core.frame.DataFrame'&gt;\nRangeIndex: 1238 entries, 0 to 1237\nData columns (total 2 columns):\ndate    1238 non-null datetime64[ns]\nppg     1238 non-null float64\ndtypes: datetime64[ns](1), float64(1)\nmemory usage: 19.4 KB\n\n&lt;class 'pandas.core.frame.DataFrame'&gt;\nRangeIndex: 1179 entries, 0 to 1178\nData columns (total 2 columns):\ndate    1179 non-null datetime64[ns]\nppg     1179 non-null float64\ndtypes: datetime64[ns](1), float64(1)\nmemory usage: 18.5 KB\n</code></pre>\n\n<p>I have written the following script to plot a time series scatter plot of each of the 3 dataframes:</p>\n\n<pre><code>fig, axs = plt.subplots(3, 1, figsize=(15,15))\nfor ax, key in zip(axs, groups_dict.keys()):\n    df = groups_dict[key]\n    ax.scatter(df.index, df.ppg, s=5, alpha=0.5)\n    ax.set_title(f\"{key} quality\")\n    ax.set_ylabel('price per gram ($)')\n    ax.set_xlabel('date')\n    ax.set_xticklabels([dt.strftime('%m-%d-%Y') for dt in df.date], rotation=0)\n</code></pre>\n\n<p>See output here: <a href=\"https://i.imgur.com/zlF4XAu.png\" rel=\"nofollow noreferrer\">https://i.imgur.com/zlF4XAu.png</a></p>\n\n<p>The issue is that I cannot get the dates to show up correctly on the x-axis. If I print the min/max dates in each dataframe, I see that there is actually a much wider range of dates than those represented on the plots above.</p>\n\n<pre><code>for key, df in groups_dict.items():\n    print(\"df name:\",key)\n    print(\"min date:\", df.date.min())\n    print(\"max date:\", df.date.max(),'\\n')\n\n# OUTPUT\ndf name: high\nmin date: 2010-09-02 00:00:00\nmax date: 2014-05-13 00:00:00 \n\ndf name: low\nmin date: 2010-09-02 00:00:00\nmax date: 2014-05-13 00:00:00 \n\ndf name: medium\nmin date: 2010-09-02 00:00:00\nmax date: 2014-05-13 00:00:00\n</code></pre>\n\n<p>As a check to make sure I am passing ax.set_xticklabels() the correct number of uniques:</p>\n\n<pre><code>for d in groups_dict.values():\n    xtickarg = len(set([dt.strftime('%m-%d-%Y') for dt in d.date.tolist()]))\n    print(d.shape[0], \"==\", xtickarg)\n\n# OUTPUT\n1241 == 1241\n1179 == 1179\n1238 == 1238\n</code></pre>\n\n<p><strong>If anyone can provide insight as to why the xticklabels are not displaying properly, I would greatly appreciate it. Thanks in advance.</strong></p>\n"}, {"tags": ["python", "packages"], "comments": [{"owner": {"reputation": 22012, "user_id": 194586, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/1a71658d81f8a82a8122050f21bb86d3?s=128&d=identicon&r=PG", "display_name": "Nick T", "link": "https://stackoverflow.com/users/194586/nick-t"}, "edited": false, "score": 0, "creation_date": 1518039624, "post_id": 48673624, "comment_id": 84345836, "body": "Python (unlike C and others) is very explicit about what ends up in the (global) namespace, so <code>import markets</code> will <b>only</b> create a name called <code>markets</code>. There isn&#39;t any magic side-effect that creates a <code>Player</code> name."}], "answers": [{"tags": [], "owner": {"reputation": 1690, "user_id": 916674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/550ab0daf81f6c4a5d5530c53afdfe48?s=128&d=identicon&r=PG", "display_name": "rczajka", "link": "https://stackoverflow.com/users/916674/rczajka"}, "is_accepted": false, "score": 3, "last_activity_date": 1518039369, "creation_date": 1518039369, "answer_id": 48673642, "question_id": 48673624, "link": "https://stackoverflow.com/questions/48673624/how-to-import-my-own-python-packages/48673642#48673642", "title": "How to import my own Python packages", "body": "<p>If <code>Player</code> is defined in <code>markets.Players</code>, you'll need:</p>\n\n<pre><code>from markets.Players import Player\np = Player()\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>import markets.Players\np = markets.Players.Player()\n</code></pre>\n\n<p>Either way, in Python you need to explicitly import what you need into your namespace.</p>\n"}], "owner": {"reputation": 111, "user_id": 5513156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02e40f960527abd76b236eb6936d5ba8?s=128&d=identicon&r=PG&f=1", "display_name": "James A. Foster", "link": "https://stackoverflow.com/users/5513156/james-a-foster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1518039369, "creation_date": 1518039255, "last_edit_date": 1518039334, "question_id": 48673624, "link": "https://stackoverflow.com/questions/48673624/how-to-import-my-own-python-packages", "title": "How to import my own Python packages", "body": "<p>I have the following directory structure:</p>\n\n<pre><code>~/python_libs\n    /markets\n        Players.py\n        Commodity.py\n        Markets.py\n        Currency.py\n        __init__.py\n</code></pre>\n\n<p>and my <code>__init__.py</code> is this:</p>\n\n<pre><code>import numpy.random as rn\nimport matplotlib.pyplot as plt\nfrom time import gmtime, strftime\nfrom datetime import datetime\n</code></pre>\n\n<p>I have set <code>$PYTHONPATH=${HOME}/python_lib</code> and verified that this has become part of <code>sys.path</code> (from <code>import sys</code>)</p>\n\n<p>Now, I go into ipython and <code>import markets</code></p>\n\n<p>Nothing. It gives a blank line, but if I use, say <code>p=Player()</code> I get</p>\n\n<blockquote>\n  <p>name 'Player' is not defined</p>\n</blockquote>\n\n<p>I'm stumped. How do I import markets and have access to the modules in the markets package?</p>\n"}, {"tags": ["python", "networking", "pyshark"], "comments": [{"owner": {"reputation": 1798, "user_id": 2280890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e409f9d13ce2d82edcb84b3f9cfb879?s=128&d=identicon&r=PG", "display_name": "import random", "link": "https://stackoverflow.com/users/2280890/import-random"}, "edited": false, "score": 0, "creation_date": 1518055761, "post_id": 48673583, "comment_id": 84351121, "body": "You can try enabling debug mode with <code>cap.set_debug(True)</code> before your call to <code>cap.sniff()</code>. This might give you some more information."}, {"owner": {"reputation": 51, "user_id": 8110523, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AMtn4.jpg?s=128&g=1", "display_name": "ayedaemon", "link": "https://stackoverflow.com/users/8110523/ayedaemon"}, "edited": false, "score": 0, "creation_date": 1546801494, "post_id": 48673583, "comment_id": 94962953, "body": "<a href=\"https://stackoverflow.com/questions/35985296/pyshark-can-not-capture-the-packet-on-windows-7-python/54064844#54064844\" title=\"pyshark can not capture the packet on windows 7 python\">stackoverflow.com/questions/35985296/&hellip;</a> check this if this might solve your error."}], "answers": [{"tags": [], "owner": {"reputation": 58, "user_id": 6817544, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ml71nqGWGOM/AAAAAAAAAAI/AAAAAAAAARQ/T0pPEKySRUc/photo.jpg?sz=128", "display_name": "Sarthak_ssg5", "link": "https://stackoverflow.com/users/6817544/sarthak-ssg5"}, "is_accepted": false, "score": 2, "last_activity_date": 1520280590, "creation_date": 1520280590, "answer_id": 49118627, "question_id": 48673583, "link": "https://stackoverflow.com/questions/48673583/pyshark-does-not-capture-any-packet/49118627#49118627", "title": "Pyshark does not capture any packet", "body": "<p>Are you using windows 10? \nit may be late but the LiveCapture feature of pyshark 3.7.9 has some problems in windows 10. </p>\n\n<p>You can roll back to pyshark 0.3.6.2 with,\n<code>pip install pyshark==0.3.6.2</code></p>\n"}], "owner": {"reputation": 53, "user_id": 7551629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c1c63dd2b50d043a4afe394da191161?s=128&d=identicon&r=PG", "display_name": "morten", "link": "https://stackoverflow.com/users/7551629/morten"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1261, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1533738724, "creation_date": 1518039063, "question_id": 48673583, "link": "https://stackoverflow.com/questions/48673583/pyshark-does-not-capture-any-packet", "title": "Pyshark does not capture any packet", "body": "<p>Hi I'm trying to sniff network with pyshark. I just want to capture the packet but pyshark does not capture any packet</p>\n\n<p>Hi is the basic code and result</p>\n\n<pre><code>&gt;&gt;&gt; cap = pyshark.LiveCapture(interface=\"wlan0\")\n&gt;&gt;&gt; cap.sniff(timeout=20)\n&gt;&gt;&gt; cap\n&lt;LiveCapture (0 packets)&gt;\n</code></pre>\n\n<p>Please help</p>\n"}, {"tags": ["python", "eclipse", "pip", "pydev"], "answers": [{"tags": [], "owner": {"reputation": 606, "user_id": 1459519, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8080622b904a97ff8efc321a09b5ebfb?s=128&d=identicon&r=PG", "display_name": "user1459519", "link": "https://stackoverflow.com/users/1459519/user1459519"}, "is_accepted": false, "score": 0, "last_activity_date": 1518642025, "creation_date": 1518642025, "answer_id": 48796117, "question_id": 48673514, "link": "https://stackoverflow.com/questions/48673514/pydev-python-3-on-eclipse-oxygen-pip-not-working-with-installed-packages/48796117#48796117", "title": "Pydev (python 3) on Eclipse Oxygen: &quot;pip&quot; not working with installed packages", "body": "<p>This problem was filed as issue 896 on the pydev tracker (<a href=\"https://www.brainwy.com/tracker/PyDev/\" rel=\"nofollow noreferrer\">https://www.brainwy.com/tracker/PyDev/</a>)</p>\n\n<p>A clue to a workaround is that an error message did not appear when I used pip with the \"bad\" 3.6.4 interpreters, all that appeared was a \"FINISHED\" message. </p>\n\n<p>I removed the \".eclipse\" folder from my \"C:\\users\\username\" folder and removed all python interpreters from Eclipse.  Next, the appropriate pydev install package was used to uninstall both 3.6.4 interpreters from my system (they could not deleted until after they had been repaired using the installer).</p>\n\n<p>System was rebooted and Eclipse opened.  Both 3.5.1 interpreters we reinstalled without any issues (pip listed the expected packages: pip, wheel, etc).  Then tried installing both versions of 3.6.4.  Both times the pip message area displayed :</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"c:\\python364\\32bit\\lib\\runpy.py\", line 193, in _run_module_as_main\n    \"__main__\", mod_spec)\n  File \"c:\\python364\\32bit\\lib\\runpy.py\", line 85, in _run_code\n    exec(code, run_globals)\n  File \"C:\\Python\\3.6.4\\32bit-bad pip\\Scripts\\pip.exe\\__main__.py\", line 5, in &lt;module&gt;\nModuleNotFoundError: No module named 'pip'\nFINISHED\n</code></pre>\n\n<p>Note that the first two lines incorrectly refer to \"python364\" instead of the correct install location (\"python\\3.6.4\", as shown on the last line).   The \"c:\\python364\" folder was a holdover from a previous attempt at installing 3.6.4; that folder also contained a subfolder that contained the 32 bit 3.6.4 interpreter.</p>\n\n<p>Summarizing the sequence of events that fixed my problem:</p>\n\n<p>1) Deleted the \".configure\" subfolder from my home folder (may not be needed yet)<br>\n2) Removed all 4 interpreters from Eclipse.<br>\n3) Removed all artifacts from previous 3.6.4 python installs.<br>\n4) Used the appropriate pydev install package to repair, then remove both bad interpreters from my system.<br>\n5) Deleted \".eclipse\" from my home folder.<br>\n6) Rebooted my machine and installed all 4 interpreters into Eclipse.<br>\n7) Problem fixed.  pip for all 4 intepreters now lists all expected packages.  </p>\n"}], "owner": {"reputation": 606, "user_id": 1459519, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8080622b904a97ff8efc321a09b5ebfb?s=128&d=identicon&r=PG", "display_name": "user1459519", "link": "https://stackoverflow.com/users/1459519/user1459519"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1975, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1518642025, "creation_date": 1518038774, "last_edit_date": 1518462836, "question_id": 48673514, "link": "https://stackoverflow.com/questions/48673514/pydev-python-3-on-eclipse-oxygen-pip-not-working-with-installed-packages", "title": "Pydev (python 3) on Eclipse Oxygen: &quot;pip&quot; not working with installed packages", "body": "<p><code>pip</code> for python 3.6.4 (on Oxygen) originally, <em>but no longer</em> lists any installed packages, e.g. <code>pip</code>, <code>whee</code>l, <code>pyodbc</code>.  But running pip from the (DOS) command line lists all expected packages.  And pip for the co-installed 3.5.1 lists all expected packages (see Preferences -> Pydev -> Interpreters-> Python Interpreters - or right click the project's icon and select properties).<br>\nEnvironment is 64 bit Win 7 Enterprise SP1. All packages in both interpreters were manually installed using pip from outside of Eclipse.  Word length (32 or 64 bit) did not make a difference. </p>\n\n<p>All applications are running normally on Oxygen under 3.6.4.  One oddity (&amp; probable red herring) that could be a clue is that is all interpreters (since Helios if not earlier) have consistently flagged my <code>import pyodbc</code> lines as being an error - but all applications with that \"error\" work without any problems.    </p>\n\n<p>Eclipse Mars is also on the machine and it uses the same python installation folders as Oxygen. From the timing of the problem I had a suspicion that the pip problem started after I had to use Mars (which  may have done something to the common installation folder that messed up Oxygen's setup). However I tried replicating the problem using 3.5.1 but the problem did not reoccur. </p>\n\n<p>I've tried everything reasonably obvious short of messing around with Eclipse internal/folders, including deleting ALL interpreters from Oxygen, then recreating them (in the same folder) AFTER cold-starting my machine.  Running the file system sychronization check (found at Preferences -> Pydev -> Interpreters) did not help.</p>\n\n<p>I have a lot of projects in Oxygen (and Mars).  Short of reinstallation, is there a reasonably simple way to get 3.6.4's  <code>pip</code> to work properly on Oxygen - bearing in mind that I must keep Mars installed to maintain other projects?</p>\n"}, {"tags": ["python", "pandas", "numpy", "crosstab"], "comments": [{"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 4, "creation_date": 1518038916, "post_id": 48673428, "comment_id": 84345518, "body": "Can you explain the logic here ? why c1-c4=2 and c4-c1=1"}, {"owner": {"reputation": 631, "user_id": 8075015, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cb4221b095ba7fa8e964a776b43787d2?s=128&d=identicon&r=PG&f=1", "display_name": "whs2k", "link": "https://stackoverflow.com/users/8075015/whs2k"}, "reply_to_user": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1518039333, "post_id": 48673428, "comment_id": 84345714, "body": "My data here is independent documents (rows) submitted to one or more entities (each column). I want to be able to identify which pair (or even groups) of entities receive the most submission. I think a heatmap would be a good way to visualize this (because of many rows and columns) and, form reading the seaborn documentation, need the data in this format (I think)."}, {"owner": {"reputation": 631, "user_id": 8075015, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cb4221b095ba7fa8e964a776b43787d2?s=128&d=identicon&r=PG&f=1", "display_name": "whs2k", "link": "https://stackoverflow.com/users/8075015/whs2k"}, "edited": false, "score": 0, "creation_date": 1518039575, "post_id": 48673428, "comment_id": 84345813, "body": "Oops - you&#39;re right; typo &gt;&lt;.  Desired output should be symmetrical down the diagonal; edited!"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 2, "creation_date": 1518039682, "post_id": 48673428, "comment_id": 84345871, "body": "Please have your expected output reflect the sample input posted. Are you looking for <code>v = df.clip_upper(1); v.T.dot(v)</code>?"}, {"owner": {"reputation": 631, "user_id": 8075015, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cb4221b095ba7fa8e964a776b43787d2?s=128&d=identicon&r=PG&f=1", "display_name": "whs2k", "link": "https://stackoverflow.com/users/8075015/whs2k"}, "edited": false, "score": 0, "creation_date": 1518040679, "post_id": 48673428, "comment_id": 84346321, "body": "That was it, thanks! Sorry for the confusion"}], "answers": [{"tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 3, "last_activity_date": 1518041379, "creation_date": 1518041379, "answer_id": 48674114, "question_id": 48673428, "link": "https://stackoverflow.com/questions/48673428/python-pandas-pairwise-frequency-table-with-many-columns/48674114#48674114", "title": "Python Pandas Pairwise Frequency Table with many columns", "body": "<p>Clip positive values to <code>1</code> with <code>clip_upper</code>, and then compute the dot product:</p>\n\n<pre><code>i = df.clip_upper(1)\nj = i.T.dot(i)\n</code></pre>\n\n<p></p>\n\n<pre><code>j\n\n    C1  C2  C3  C4\nC1   3   1   1   2\nC2   1   2   0   2\nC3   1   0   2   1\nC4   2   2   1   4\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 631, "user_id": 8075015, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cb4221b095ba7fa8e964a776b43787d2?s=128&d=identicon&r=PG&f=1", "display_name": "whs2k", "link": "https://stackoverflow.com/users/8075015/whs2k"}, "edited": false, "score": 0, "creation_date": 1518448756, "post_id": 48674645, "comment_id": 84499579, "body": "it may not be as elegant as pandas, but it&#39;ll be much faster on those huge data-sets; thanks!"}, {"owner": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "reply_to_user": {"reputation": 631, "user_id": 8075015, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cb4221b095ba7fa8e964a776b43787d2?s=128&d=identicon&r=PG&f=1", "display_name": "whs2k", "link": "https://stackoverflow.com/users/8075015/whs2k"}, "edited": false, "score": 1, "creation_date": 1518449448, "post_id": 48674645, "comment_id": 84500139, "body": "@whs2k it may be even better to build the whole query inside the for loop, and the do one call to <code>sqlCtx.sql()</code> at the end instead of calling <code>union()</code> inside of the loop."}], "tags": [], "owner": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "is_accepted": false, "score": 2, "last_activity_date": 1518043871, "creation_date": 1518043871, "answer_id": 48674645, "question_id": 48673428, "link": "https://stackoverflow.com/questions/48673428/python-pandas-pairwise-frequency-table-with-many-columns/48674645#48674645", "title": "Python Pandas Pairwise Frequency Table with many columns", "body": "<p>Here is a PySpark DataFrame solution using <code>spark-sql</code>. Definitely not as elegant as @c\u1d0f\u029f\u1d05s\u1d18\u1d07\u1d07\u1d05's pandas solution, but perhaps this will be useful for really big dataframes.</p>\n\n<p>Suppose you had your data in a PySpark DataFrame <code>spark_df</code>. </p>\n\n<pre><code>spark_df.show()\n#+---+---+---+---+\n#| C1| C2| C3| C4|\n#+---+---+---+---+\n#|  0|  3|  0|  2|\n#|  2|  0|  0|  1|\n#|  5|  2|  0|  1|\n#|  0|  0|  3|  4|\n#|  3|  0|  3|  0|\n#+---+---+---+---+\n</code></pre>\n\n<p>Create an empty DataFrame to hold the output. The schema for this is going to be one <code>StringType()</code> column followed by an <code>IntegerType()</code> column for each column in <code>spark_df</code>:</p>\n\n<pre><code>cols = spark_df.columns\nschema = StructType(\n    [StructField('col', StringType())] + [StructField(c, IntegerType()) for c in cols]\n)\noutput = sqlCtx.createDataFrame([], schema=schema)\noutput.printSchema()\n#root\n# |-- col: string (nullable = true)\n# |-- C1: long (nullable = true)\n# |-- C2: long (nullable = true)\n# |-- C3: long (nullable = true)\n# |-- C4: long (nullable = true)\n</code></pre>\n\n<p>Register this DataFrame as a table:</p>\n\n<pre><code>spark_df.registerTempTable('table')\n</code></pre>\n\n<p>Iterate through each column in the DataFrame and build a query to get the values for that \"row\". Add the output of the query to <code>output</code> using <code>union()</code>.</p>\n\n<pre><code>for col in cols:\n    q = \"SELECT '%s' AS col,\" % col\n    q += \",\".join(\"SUM(CASE WHEN %s &gt; 0 AND %s &gt; 0 THEN 1 ELSE 0 END) AS %s \" % (col, c, c) for c in cols)\n    q += \" FROM table t\"\n    output = output.union(sqlCtx.sql(q))\n</code></pre>\n\n<p>Finally the output:</p>\n\n<pre><code>output.show()\n#+---+---+---+---+---+\n#|col| C1| C2| C3| C4|\n#+---+---+---+---+---+\n#| C1|  3|  1|  1|  2|\n#| C2|  1|  2|  0|  2|\n#| C3|  1|  0|  2|  1|\n#| C4|  2|  2|  1|  4|\n#+---+---+---+---+---+\n</code></pre>\n\n<p>Which matches the pandas version.</p>\n"}], "owner": {"reputation": 631, "user_id": 8075015, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cb4221b095ba7fa8e964a776b43787d2?s=128&d=identicon&r=PG&f=1", "display_name": "whs2k", "link": "https://stackoverflow.com/users/8075015/whs2k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 810, "favorite_count": 0, "accepted_answer_id": 48674114, "answer_count": 2, "score": 2, "last_activity_date": 1518050032, "creation_date": 1518038396, "last_edit_date": 1518050032, "question_id": 48673428, "link": "https://stackoverflow.com/questions/48673428/python-pandas-pairwise-frequency-table-with-many-columns", "title": "Python Pandas Pairwise Frequency Table with many columns", "body": "<p>Beginner Pandas Question here:</p>\n\n<p><strong>How do I create a cross frequency count table for all columns?</strong> I want to ues the output to make a seaborn heatmap plot showing the counts between each pair of columns.</p>\n\n<p>I have a dataframe (pulled down from hdfs with pyspark) with ~70 unique columns and about 600K rows</p>\n\n<p>Sample Desired output:</p>\n\n<pre><code>    C1 C2 C3 C4 ...C70\nC1  -  1  1  2\nC2  1  -  0  2\nC3  1  0  -  1\nC4  2  2  1  -\n...   \nC70\n</code></pre>\n\n<p>Sample DF:</p>\n\n<pre><code>import numpy as np\nimport pandas as pd\nraw_data = {'C1': [ 0, 2, 5, 0, 3], #...600K\n    'C2': [3, 0 , 2, 0, 0],\n    'C3': [0, 0, 0, 3, 3],\n    'C4': [2, 1, 1, 4, 0]} \ndf = pd.DataFrame(raw_data, columns = ['C1', 'C2', 'C3','C4'])\nprint(df)\n</code></pre>\n\n<p>I've tried using crosstab, pivot, pivot_table from pandas and think that the solution is using crosstab, but I can't get it in the desired output format (sorry if there is something obvious I'm missing). Any help appreciated!</p>\n"}, {"tags": ["python", "stringio", "cstringio"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1518038994, "post_id": 48673418, "comment_id": 84345558, "body": "is <code>f_temp</code> a file-object? What is the purpose of <code>cStringIO.OutputType.getvalue(f_temp)</code>...?"}, {"owner": {"reputation": 147, "user_id": 8117081, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/67834cef504e240477d9ac2656e7c7e5?s=128&d=identicon&r=PG&f=1", "display_name": "Alureon", "link": "https://stackoverflow.com/users/8117081/alureon"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1518040334, "post_id": 48673418, "comment_id": 84346163, "body": "@juanpa.arrivillaga Yes, it&#39;s a file-like object. Apparently, the purpose of <code>cStringIO.OutputType.getvalue(f_temp)</code> is to convert the <code>cStringIO</code> file-like object into the <code>Output</code> type so it can be read. See <a href=\"https://stackoverflow.com/a/40553378/8117081\">this</a> comment."}], "answers": [{"comments": [{"owner": {"reputation": 147, "user_id": 8117081, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/67834cef504e240477d9ac2656e7c7e5?s=128&d=identicon&r=PG&f=1", "display_name": "Alureon", "link": "https://stackoverflow.com/users/8117081/alureon"}, "edited": false, "score": 0, "creation_date": 1518040969, "post_id": 48673557, "comment_id": 84346469, "body": "<code>f_temp.seek(0)</code> works! Thank you! I&#39;ve another quick question. Since <code>f_temp</code> (or any <code>cStringIO</code> object) is a &quot;file-like&quot; object, is it necessary to write <code>f_temp.close()</code> once I&#39;m done reading all of its lines?"}, {"owner": {"reputation": 13750, "user_id": 3830997, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Lg47I.png?s=128&g=1", "display_name": "Matthias Fripp", "link": "https://stackoverflow.com/users/3830997/matthias-fripp"}, "reply_to_user": {"reputation": 147, "user_id": 8117081, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/67834cef504e240477d9ac2656e7c7e5?s=128&d=identicon&r=PG&f=1", "display_name": "Alureon", "link": "https://stackoverflow.com/users/8117081/alureon"}, "edited": false, "score": 1, "creation_date": 1518041760, "post_id": 48673557, "comment_id": 84346813, "body": "I certainly would close it after you are done with it. With files or StringIO, the related resources are automatically released by the garbage collector when the last reference goes out of scope, but it&#39;s not considered good form to rely on that. Better to close the object explicitly when you&#39;re done with it. That is especially important if you&#39;ll be quickly creating and closing lots of them. Often this is easiest to achieve by using a <code>with</code> clause on the <code>open</code> step."}], "tags": [], "owner": {"reputation": 13750, "user_id": 3830997, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Lg47I.png?s=128&g=1", "display_name": "Matthias Fripp", "link": "https://stackoverflow.com/users/3830997/matthias-fripp"}, "is_accepted": true, "score": 2, "last_activity_date": 1518040938, "last_edit_date": 1518040938, "creation_date": 1518038949, "answer_id": 48673557, "question_id": 48673418, "link": "https://stackoverflow.com/questions/48673418/cannot-iterate-over-cstringio/48673557#48673557", "title": "Cannot Iterate over cStringIO", "body": "<p>The answer you referenced was a little incomplete. It tells how to get the cStringIO buffer as a string, but then you have to do something with that string. You can do that like this:</p>\n\n<pre><code>def remove_duplicates(f_temp, dir_out):  # f_temp is the cStringIO object.\n    \"\"\"Function to remove duplicates from the intermediate file and write to physical file.\"\"\"\n    lines_seen = set()  # Define a set to hold lines already seen.\n    f_out = define_outputs(dir_out)  # Create the real output file by calling function \"define_outputs\". Note: This function is not shown in my pasted code.\n\n    # contents = cStringIO.OutputType.getvalue(f_temp)  # From: https://stackoverflow.com/a/40553378/8117081\n    contents = f_temp.getvalue()     # simpler approach\n    contents = contents.strip('\\n')  # remove final newline to avoid adding an extra row\n    lines = contents.split('\\n')     # convert to iterable\n\n    for line in lines:  # Iterate through the list of lines.\n        line = compute_md5(line)  # Function to compute the MD5 hash of each line. Note: This function is not shown in my pasted code.\n        if line not in lines_seen:  # Not a duplicate line (based on MD5 hash, which is supposed to save memory).\n            f_out.write(line + '\\n')\n            lines_seen.add(line)\n    f_out.close()\n</code></pre>\n\n<p>But it is probably better to use normal IO operations on the f_temp \"file handle\", like this:</p>\n\n<pre><code>def remove_duplicates(f_temp, dir_out):  # f_temp is the cStringIO object.\n    \"\"\"Function to remove duplicates from the intermediate file and write to physical file.\"\"\"\n    lines_seen = set()  # Define a set to hold lines already seen.\n    f_out = define_outputs(dir_out)  # Create the real output file by calling function \"define_outputs\". Note: This function is not shown in my pasted code.\n\n    # move f_temp's pointer back to the start of the file, to allow reading\n    f_temp.seek(0)\n\n    for line in f_temp:  # Iterate through the cStringIO file-like object.\n        line = compute_md5(line)  # Function to compute the MD5 hash of each line. Note: This function is not shown in my pasted code.\n        if line not in lines_seen:  # Not a duplicate line (based on MD5 hash, which is supposed to save memory).\n            f_out.write(line)\n            lines_seen.add(line)\n    f_out.close()\n</code></pre>\n\n<p>Here's a test (with either one):</p>\n\n<pre><code>import cStringIO, os\n\ndef define_outputs(dir_out):\n    return open('/tmp/test.txt', 'w') \n\ndef compute_md5(line):\n    return line\n\nf = cStringIO.StringIO()\nf.write('string 1\\n')\nf.write('string 2\\n')\nf.write('string 1\\n')\nf.write('string 2\\n')\nf.write('string 3\\n')\n\nremove_duplicates(f, 'tmp')\nwith open('/tmp/test.txt', 'r') as f:\n    print(str([row for row in f]))\n# ['string 1\\n', 'string 2\\n', 'string 3\\n']\n</code></pre>\n"}], "owner": {"reputation": 147, "user_id": 8117081, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/67834cef504e240477d9ac2656e7c7e5?s=128&d=identicon&r=PG&f=1", "display_name": "Alureon", "link": "https://stackoverflow.com/users/8117081/alureon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 212, "favorite_count": 0, "accepted_answer_id": 48673557, "answer_count": 1, "score": 0, "last_activity_date": 1518040938, "creation_date": 1518038360, "question_id": 48673418, "link": "https://stackoverflow.com/questions/48673418/cannot-iterate-over-cstringio", "title": "Cannot Iterate over cStringIO", "body": "<p>In a script, I'm writing lines to a file, but some of the lines may be duplicates. So I've created a temporary <code>cStringIO</code> file-like object, which I call my \"intermediate file\". I write the lines to the intermediate file first, remove duplicates, then write to the real file.</p>\n\n<p>So I wrote a simple for loop to iterate through every line in my intermediate file and remove any duplicates.</p>\n\n<pre><code>def remove_duplicates(f_temp, dir_out):  # f_temp is the cStringIO object.\n    \"\"\"Function to remove duplicates from the intermediate file and write to physical file.\"\"\"\n    lines_seen = set()  # Define a set to hold lines already seen.\n    f_out = define_outputs(dir_out)  # Create the real output file by calling function \"define_outputs\". Note: This function is not shown in my pasted code.\n\n    cStringIO.OutputType.getvalue(f_temp)  # From: https://stackoverflow.com/a/40553378/8117081\n\n    for line in f_temp:  # Iterate through the cStringIO file-like object.\n        line = compute_md5(line)  # Function to compute the MD5 hash of each line. Note: This function is not shown in my pasted code.\n        if line not in lines_seen:  # Not a duplicate line (based on MD5 hash, which is supposed to save memory).\n            f_out.write(line)\n            lines_seen.add(line)\n    f_out.close()\n</code></pre>\n\n<p>My problem is that the <code>for</code> loop never gets executed. I can verify this by putting in a breakpoint in my debugger; that line of the code just gets skipped and the function exits. I even read <a href=\"https://stackoverflow.com/a/40553378/8117081\">this answer from this thread</a> and inserted the code <code>cStringIO.OutputType.getvalue(f_temp)</code>, but that didn't solve my issue.</p>\n\n<p>I'm lost as to why I can't read and iterate through my file-like object.</p>\n"}, {"tags": ["python", "google-cloud-ml"], "answers": [{"tags": [], "owner": {"reputation": 1416, "user_id": 5441818, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh5.googleusercontent.com/-jzTIEWDHa0g/AAAAAAAAAAI/AAAAAAAAAC4/JUuVvlAODC4/photo.jpg?sz=128", "display_name": "Chris Meyers", "link": "https://stackoverflow.com/users/5441818/chris-meyers"}, "is_accepted": true, "score": 2, "last_activity_date": 1518053265, "creation_date": 1518053265, "answer_id": 48676049, "question_id": 48673414, "link": "https://stackoverflow.com/questions/48673414/programmatically-read-training-output-from-cloud-ml-engine/48676049#48676049", "title": "programmatically read training output from cloud ml-engine", "body": "<p>You'll need to call the API using the python api client.</p>\n\n<p>There is an example of that here: <a href=\"https://cloud.google.com/ml-engine/docs/python-guide#putting_it_all_together\" rel=\"nofollow noreferrer\">https://cloud.google.com/ml-engine/docs/python-guide#putting_it_all_together</a></p>\n\n<p>You'll need to use the <a href=\"https://cloud.google.com/ml-engine/reference/rest/v1/projects.jobs/get\" rel=\"nofollow noreferrer\">ml.projects().jobs().get()</a> method.</p>\n"}], "owner": {"reputation": 742, "user_id": 3954958, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-pJrie4VLSXU/AAAAAAAAAAI/AAAAAAAAATI/2i-D5j4UkLE/photo.jpg?sz=128", "display_name": "Fariborz Ghavamian", "link": "https://stackoverflow.com/users/3954958/fariborz-ghavamian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "accepted_answer_id": 48676049, "answer_count": 1, "score": 1, "last_activity_date": 1518053265, "creation_date": 1518038328, "question_id": 48673414, "link": "https://stackoverflow.com/questions/48673414/programmatically-read-training-output-from-cloud-ml-engine", "title": "programmatically read training output from cloud ml-engine", "body": "<p>I run a job on <code>Cloud ML Engine</code> with <code>hyperparameter tuning</code>. </p>\n\n<p>On the <code>Job details</code> page I can see the <code>trials</code> and <code>finalMetric</code> of each trial in the  <code>Training output</code> section in <code>JSON</code> format. </p>\n\n<p>I wonder if I can download/read the <code>Training output</code> in python.     </p>\n"}, {"tags": ["python", "scikit-learn"], "comments": [{"owner": {"reputation": 492, "user_id": 8107620, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9DqHA.jpg?s=128&g=1", "display_name": "AlCorreia", "link": "https://stackoverflow.com/users/8107620/alcorreia"}, "edited": false, "score": 1, "creation_date": 1518039333, "post_id": 48673402, "comment_id": 84345715, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/43554821/feature-preprocessing-of-both-continuous-and-categorical-variables-of-integer-t\">Feature preprocessing of both continuous and categorical variables (of integer type) with scikit-learn</a>"}], "answers": [{"tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": false, "score": 16, "last_activity_date": 1518040244, "creation_date": 1518040244, "answer_id": 48673850, "question_id": 48673402, "link": "https://stackoverflow.com/questions/48673402/how-can-i-standardize-only-numeric-variables-in-an-sklearn-pipeline/48673850#48673850", "title": "How can I standardize only numeric variables in an sklearn pipeline?", "body": "<p>Assuming you have the following DF:</p>\n\n<pre><code>In [163]: df\nOut[163]:\n     a     b    c    d\n0  aaa  1.01  xxx  111\n1  bbb  2.02  yyy  222\n2  ccc  3.03  zzz  333\n\nIn [164]: df.dtypes\nOut[164]:\na     object\nb    float64\nc     object\nd      int64\ndtype: object\n</code></pre>\n\n<p>you can find all numeric columns:</p>\n\n<pre><code>In [165]: num_cols = df.columns[df.dtypes.apply(lambda c: np.issubdtype(c, np.number))]\n\nIn [166]: num_cols\nOut[166]: Index(['b', 'd'], dtype='object')\n\nIn [167]: df[num_cols]\nOut[167]:\n      b    d\n0  1.01  111\n1  2.02  222\n2  3.03  333\n</code></pre>\n\n<p>and apply <code>StandardScaler</code> only to those numeric columns:</p>\n\n<pre><code>In [168]: scaler = StandardScaler()\n\nIn [169]: df[num_cols] = scaler.fit_transform(df[num_cols])\n\nIn [170]: df\nOut[170]:\n     a         b    c         d\n0  aaa -1.224745  xxx -1.224745\n1  bbb  0.000000  yyy  0.000000\n2  ccc  1.224745  zzz  1.224745\n</code></pre>\n\n<p>now you can \"one hot encode\" categorical (non-numeric) columns...</p>\n"}, {"comments": [{"owner": {"reputation": 888, "user_id": 7292363, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/828b3f03f4d030c996d0e1a670b5dc88?s=128&d=identicon&r=PG&f=1", "display_name": "thatMeow", "link": "https://stackoverflow.com/users/7292363/thatmeow"}, "edited": false, "score": 0, "creation_date": 1544473986, "post_id": 48681267, "comment_id": 94280942, "body": "Hey Marcus thanks for your post here. So how would you use this &quot;pipe&quot; on training and testing data? pipe.fit(X_train, y_train)? But in that case the encoders&#39; fit_tranform step would be left out. But if I use fit_transform, then the model fitting part would be left out."}, {"owner": {"reputation": 4378, "user_id": 6694255, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206786178165174/picture?type=large", "display_name": "Marcus V.", "link": "https://stackoverflow.com/users/6694255/marcus-v"}, "reply_to_user": {"reputation": 888, "user_id": 7292363, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/828b3f03f4d030c996d0e1a670b5dc88?s=128&d=identicon&r=PG&f=1", "display_name": "thatMeow", "link": "https://stackoverflow.com/users/7292363/thatmeow"}, "edited": false, "score": 0, "creation_date": 1544516664, "post_id": 48681267, "comment_id": 94293372, "body": "You can use it as any estimator and call first <code>pipe.fit(X_train, y_train)</code>. It will call all the<code>fit_transform()</code> calls of the <code>TransformerMixin</code> and then the <code>fit()</code> of the last step, the estimator. If you then use it for predictions it will apply also all the transforms. This works also automatically within <a href=\"https://scikit-learn.org/stable/modules/classes.html#module-sklearn.model_selection\" rel=\"nofollow noreferrer\">model selection</a> classes."}, {"owner": {"reputation": 888, "user_id": 7292363, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/828b3f03f4d030c996d0e1a670b5dc88?s=128&d=identicon&r=PG&f=1", "display_name": "thatMeow", "link": "https://stackoverflow.com/users/7292363/thatmeow"}, "edited": false, "score": 0, "creation_date": 1544552391, "post_id": 48681267, "comment_id": 94313894, "body": "Thanks Marcus this is very helpful."}, {"owner": {"reputation": 865, "user_id": 11814996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e60d3ffd14f3dcf31b1e2e94ca84572?s=128&d=identicon&r=PG&f=1", "display_name": "Naveen Kumar", "link": "https://stackoverflow.com/users/11814996/naveen-kumar"}, "edited": false, "score": 0, "creation_date": 1602146046, "post_id": 48681267, "comment_id": 113629564, "body": "in 1st part of your pipeline, I want to apply StandardScaler on numerical columns and do nothing and proceed to next step in the pipeline, which will be the next step after the <code>FeatureUnion</code>. I tried skipping it, but next step only got the standard scaled columns. How do i do this?"}, {"owner": {"reputation": 4378, "user_id": 6694255, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206786178165174/picture?type=large", "display_name": "Marcus V.", "link": "https://stackoverflow.com/users/6694255/marcus-v"}, "reply_to_user": {"reputation": 865, "user_id": 11814996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e60d3ffd14f3dcf31b1e2e94ca84572?s=128&d=identicon&r=PG&f=1", "display_name": "Naveen Kumar", "link": "https://stackoverflow.com/users/11814996/naveen-kumar"}, "edited": false, "score": 1, "creation_date": 1602503545, "post_id": 48681267, "comment_id": 113732143, "body": "@NaveenKumar I don&#39;t get your question completely. Currently the output of <code>Columns(names=numeric)</code> is is passed to <code>StandardScaler()</code>, then joined with the output of the <code>OneHotEncoder()</code> and passed to the <code>KNeighborsClassifier()</code>"}, {"owner": {"reputation": 865, "user_id": 11814996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e60d3ffd14f3dcf31b1e2e94ca84572?s=128&d=identicon&r=PG&f=1", "display_name": "Naveen Kumar", "link": "https://stackoverflow.com/users/11814996/naveen-kumar"}, "edited": false, "score": 0, "creation_date": 1602509687, "post_id": 48681267, "comment_id": 113735083, "body": "Sorry that I haven&#39;t been clear enough for you to be able to understood me. Let&#39;s say I have defined a feature engineering step(a function or method or a class) , that takes only 2 columns from my 100 column data set and generates 10 columns and leaves the rest untouched. The problem with putting that step in the pipeline would be, that only the columns that this step generate will be passed on to the next step, discarding all the remaining columns."}, {"owner": {"reputation": 865, "user_id": 11814996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e60d3ffd14f3dcf31b1e2e94ca84572?s=128&d=identicon&r=PG&f=1", "display_name": "Naveen Kumar", "link": "https://stackoverflow.com/users/11814996/naveen-kumar"}, "edited": false, "score": 0, "creation_date": 1602509691, "post_id": 48681267, "comment_id": 113735086, "body": "The way I usually do this(but want to include in a piepleine) is, I would first generate the 10 columns using the 2 original columns. then right join the 10 columns to the original dataset and drop the 2 original columns, leaving me with 108 columns(100 + 10 - 2). How do I accomplish this? One possible example would be count vectorised columns from text columns."}, {"owner": {"reputation": 865, "user_id": 11814996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e60d3ffd14f3dcf31b1e2e94ca84572?s=128&d=identicon&r=PG&f=1", "display_name": "Naveen Kumar", "link": "https://stackoverflow.com/users/11814996/naveen-kumar"}, "edited": false, "score": 0, "creation_date": 1602510530, "post_id": 48681267, "comment_id": 113735543, "body": "All I mean to ask is, in the pipeline you have defined, every step operates on all the columns, what if a step operates only on some and all the remaining columns doesn&#39;t need to be dropped. from what i have read on documentation to learn pipelines, each step takes as input, the output of previous step. And if a step has been defined to operate only on some columns, it will discard the rest, which is not ideal. And there may even be some steps that operate on some columns that do not necessarily need to be dropped after having generated features from it.  I hope I have been clear."}, {"owner": {"reputation": 4378, "user_id": 6694255, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206786178165174/picture?type=large", "display_name": "Marcus V.", "link": "https://stackoverflow.com/users/6694255/marcus-v"}, "reply_to_user": {"reputation": 865, "user_id": 11814996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e60d3ffd14f3dcf31b1e2e94ca84572?s=128&d=identicon&r=PG&f=1", "display_name": "Naveen Kumar", "link": "https://stackoverflow.com/users/11814996/naveen-kumar"}, "edited": false, "score": 1, "creation_date": 1602602231, "post_id": 48681267, "comment_id": 113769088, "body": "@NaveenKumar Check out the <code>ColumnTransformer</code>, e.g., <a href=\"https://scikit-learn.org/stable/auto_examples/compose/plot_column_transformer_mixed_types.html#use-columntransformer-by-selecting-column-by-names\" rel=\"nofollow noreferrer\">this</a> example. For <code>ColumnTransformer</code> note the property <code>remainder</code> which you can use to model what happens with the columns that are not named (drop them or pass them)."}, {"owner": {"reputation": 865, "user_id": 11814996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e60d3ffd14f3dcf31b1e2e94ca84572?s=128&d=identicon&r=PG&f=1", "display_name": "Naveen Kumar", "link": "https://stackoverflow.com/users/11814996/naveen-kumar"}, "edited": false, "score": 0, "creation_date": 1602604922, "post_id": 48681267, "comment_id": 113770498, "body": "Thanks @MarcusV. I will check that out."}], "tags": [], "owner": {"reputation": 4378, "user_id": 6694255, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206786178165174/picture?type=large", "display_name": "Marcus V.", "link": "https://stackoverflow.com/users/6694255/marcus-v"}, "is_accepted": false, "score": 9, "last_activity_date": 1518094383, "last_edit_date": 1518094383, "creation_date": 1518079939, "answer_id": 48681267, "question_id": 48673402, "link": "https://stackoverflow.com/questions/48673402/how-can-i-standardize-only-numeric-variables-in-an-sklearn-pipeline/48681267#48681267", "title": "How can I standardize only numeric variables in an sklearn pipeline?", "body": "<p>I would use <a href=\"http://scikit-learn.org/stable/modules/generated/sklearn.pipeline.FeatureUnion.html\" rel=\"noreferrer\">FeatureUnion</a>. I then usually do something like that, assuming you dummy-encode your categorical variables also within the pipeline instead of before with Pandas:</p>\n\n<pre><code>from sklearn.pipeline import Pipeline, FeatureUnion, make_pipeline\nfrom sklearn.preprocessing import OneHotEncoder\nfrom sklearn.base import BaseEstimator, TransformerMixin\nfrom sklearn.neighbors import KNeighborsClassifier\n\nclass Columns(BaseEstimator, TransformerMixin):\n    def __init__(self, names=None):\n        self.names = names\n\n    def fit(self, X, y=None, **fit_params):\n        return self\n\n    def transform(self, X):\n        return X[self.names]\n\nnumeric = [list of numeric column names]\ncategorical = [list of categorical column names]\n\npipe = Pipeline([\n    (\"features\", FeatureUnion([\n        ('numeric', make_pipeline(Columns(names=numeric),StandardScaler())),\n        ('categorical', make_pipeline(Columns(names=categorical),OneHotEncoder(sparse=False)))\n    ])),\n    ('model', KNeighborsClassifier())\n])\n</code></pre>\n\n<p>You could further check out <a href=\"https://github.com/scikit-learn-contrib/sklearn-pandas\" rel=\"noreferrer\">Sklearn Pandas</a>, which is also interesting. </p>\n"}, {"tags": [], "owner": {"reputation": 760, "user_id": 4833772, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/eb435d8521d636b2372a3377bc6c9663?s=128&d=identicon&r=PG&f=1", "display_name": "ebrahimi", "link": "https://stackoverflow.com/users/4833772/ebrahimi"}, "is_accepted": false, "score": 2, "last_activity_date": 1520848061, "creation_date": 1520848061, "answer_id": 49232208, "question_id": 48673402, "link": "https://stackoverflow.com/questions/48673402/how-can-i-standardize-only-numeric-variables-in-an-sklearn-pipeline/49232208#49232208", "title": "How can I standardize only numeric variables in an sklearn pipeline?", "body": "<p>Since you have converted your categorical features into dummies using <code>pd.get_dummies</code>, so you don't need to use <code>OneHotEncoder</code>. As a result, your pipeline should be:</p>\n\n<pre><code>from sklearn.preprocessing import StandardScaler,FunctionTransformer\nfrom sklearn.pipeline import Pipeline,FeatureUnion\n\nknn=KNeighborsClassifier()\n\npipeline=Pipeline(steps= [\n    ('feature_processing', FeatureUnion(transformer_list = [\n            ('categorical', FunctionTransformer(lambda data: data[:, cat_indices])),\n\n            #numeric\n            ('numeric', Pipeline(steps = [\n                ('select', FunctionTransformer(lambda data: data[:, num_indices])),\n                ('scale', StandardScaler())\n                        ]))\n        ])),\n    ('clf', knn)\n    ]\n)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3398, "user_id": 3156200, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/O4dDd.jpg?s=128&g=1", "display_name": "sushmit", "link": "https://stackoverflow.com/users/3156200/sushmit"}, "is_accepted": false, "score": 0, "last_activity_date": 1616079737, "creation_date": 1616079737, "answer_id": 66693691, "question_id": 48673402, "link": "https://stackoverflow.com/questions/48673402/how-can-i-standardize-only-numeric-variables-in-an-sklearn-pipeline/66693691#66693691", "title": "How can I standardize only numeric variables in an sklearn pipeline?", "body": "<p>Another way of doing this would be</p>\n<pre><code>import pandas as pd\nfrom sklearn.preprocessing import StandardScaler\nscaler = StandardScaler()\ndf = pd.DataFrame()\ndf['col1'] = np.random.randint(1,20,10)\ndf['col2'] = np.random.randn(10)\ndf['col3'] = list(5*'Y' + 5*'N')\nnumeric_cols = list(df.dtypes[df.dtypes != 'object'].index)\ndf.loc[:,numeric_cols] = scaler.fit_transform(df.loc[:,numeric_cols])\n</code></pre>\n"}], "owner": {"reputation": 159, "user_id": 9329863, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad8922f826d5f3fe21830ae5ae5525be?s=128&d=identicon&r=PG&f=1", "display_name": "Nate Hutchinson", "link": "https://stackoverflow.com/users/9329863/nate-hutchinson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11335, "favorite_count": 1, "answer_count": 4, "score": 14, "last_activity_date": 1616079737, "creation_date": 1518038282, "last_edit_date": 1518082414, "question_id": 48673402, "link": "https://stackoverflow.com/questions/48673402/how-can-i-standardize-only-numeric-variables-in-an-sklearn-pipeline", "title": "How can I standardize only numeric variables in an sklearn pipeline?", "body": "<p>I am trying to create an sklearn pipeline with 2 steps:</p>\n\n<ol>\n<li>Standardize the data</li>\n<li>Fit the data using KNN</li>\n</ol>\n\n<p>However, my data has both numeric and categorical variables, which I have converted to dummies using <code>pd.get_dummies</code>. I want to standardize the numeric variables but leave the dummies as they are. I have been doing this like this:</p>\n\n<pre><code>X = dataframe containing both numeric and categorical columns\nnumeric = [list of numeric column names]\ncategorical = [list of categorical column names]\nscaler = StandardScaler()\nX_numeric_std = pd.DataFrame(data=scaler.fit_transform(X[numeric]), columns=numeric)\nX_std = pd.merge(X_numeric_std, X[categorical], left_index=True, right_index=True)\n</code></pre>\n\n<p>However, if I were to create a pipeline like:</p>\n\n<pre><code>pipe = sklearn.pipeline.make_pipeline(StandardScaler(), KNeighborsClassifier())\n</code></pre>\n\n<p>It would standardize all of the columns in my DataFrame. Is there a way to do this while standardizing only the numeric columns?</p>\n"}, {"tags": ["python", "dictionary"], "comments": [{"owner": {"reputation": 11919, "user_id": 9183344, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U7r5r.png?s=128&g=1", "display_name": "r.ook", "link": "https://stackoverflow.com/users/9183344/r-ook"}, "edited": false, "score": 0, "creation_date": 1518038370, "post_id": 48673380, "comment_id": 84345241, "body": "Some sample inputs and expected outputs will probably help you get some better answers."}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 1, "creation_date": 1518038402, "post_id": 48673380, "comment_id": 84345259, "body": "have you tried: <code>myDict = defaultdict(lambda: defaultdict(list))</code>"}, {"owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "reply_to_user": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 1, "creation_date": 1518038513, "post_id": 48673380, "comment_id": 84345303, "body": "@jp_data_analysis <code>defaultdict(lambda: defaultdict(list))</code> would make more sense, wouldn&#39;t it?"}, {"owner": {"reputation": 2995, "user_id": 667913, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/e038b48be307830687c8a71ff716ba07?s=128&d=identicon&r=PG", "display_name": "patrick", "link": "https://stackoverflow.com/users/667913/patrick"}, "edited": false, "score": 2, "creation_date": 1518038545, "post_id": 48673380, "comment_id": 84345318, "body": "in the code you never set <code>[lvlTwoKey]</code> to anything. It needs to be an empty list at least if you want to <code>append</code> to it. E.g. <code>if not myDict[lvlOneKey].get(lvlTwoKey, None): myDict[lvlOneKey][lvlTwoKey] = [valueFound] else: myDict[lvlOneKey][lvlTwoKey].append(valueFound)</code> happy to elaborate if this helps"}, {"owner": {"reputation": 353, "user_id": 5029837, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0627ce9598ef620a02bb11ab1b2d7a06?s=128&d=identicon&r=PG&f=1", "display_name": "Colin", "link": "https://stackoverflow.com/users/5029837/colin"}, "reply_to_user": {"reputation": 2995, "user_id": 667913, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/e038b48be307830687c8a71ff716ba07?s=128&d=identicon&r=PG", "display_name": "patrick", "link": "https://stackoverflow.com/users/667913/patrick"}, "edited": false, "score": 0, "creation_date": 1518066762, "post_id": 48673380, "comment_id": 84353674, "body": "@patrick I ended up using this method. It worked for me. Thanks."}, {"owner": {"reputation": 2995, "user_id": 667913, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/e038b48be307830687c8a71ff716ba07?s=128&d=identicon&r=PG", "display_name": "patrick", "link": "https://stackoverflow.com/users/667913/patrick"}, "edited": false, "score": 0, "creation_date": 1518106649, "post_id": 48673380, "comment_id": 84378133, "body": "@Colin Glad to hear it! I posted a more complete answer with more comments / background if you want to accept that."}], "answers": [{"comments": [{"owner": {"reputation": 11919, "user_id": 9183344, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U7r5r.png?s=128&g=1", "display_name": "r.ook", "link": "https://stackoverflow.com/users/9183344/r-ook"}, "edited": false, "score": 0, "creation_date": 1518040101, "post_id": 48673527, "comment_id": 84346040, "body": "Alternatively, if you don&#39;t want to do <code>from collections import defaultdict</code>, you can also do <code>myDict[lvlOneKey].setdefault(lvlTwoKey, list()).append(valueFound)</code> instead"}, {"owner": {"reputation": 353, "user_id": 5029837, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0627ce9598ef620a02bb11ab1b2d7a06?s=128&d=identicon&r=PG&f=1", "display_name": "Colin", "link": "https://stackoverflow.com/users/5029837/colin"}, "edited": false, "score": 0, "creation_date": 1518066686, "post_id": 48673527, "comment_id": 84353652, "body": "I changed my first line to myDict = defaultdict(lambda: defaultdict(list)), but I still get the same key error..."}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "reply_to_user": {"reputation": 353, "user_id": 5029837, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0627ce9598ef620a02bb11ab1b2d7a06?s=128&d=identicon&r=PG&f=1", "display_name": "Colin", "link": "https://stackoverflow.com/users/5029837/colin"}, "edited": false, "score": 0, "creation_date": 1518080851, "post_id": 48673527, "comment_id": 84360045, "body": "@Colin, can you try printing the key just before it try to set it? I&#39;m thinking (perhaps) it could be an invalid key."}, {"owner": {"reputation": 353, "user_id": 5029837, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0627ce9598ef620a02bb11ab1b2d7a06?s=128&d=identicon&r=PG&f=1", "display_name": "Colin", "link": "https://stackoverflow.com/users/5029837/colin"}, "edited": false, "score": 0, "creation_date": 1518112316, "post_id": 48673527, "comment_id": 84381789, "body": "@jp_data_analysis I checked the key value and it matches what I expect. I played around with it again and it looks like I have to remove <code>for key in lvlOneKeys: myDict[key] = {}</code>, after which it works."}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "reply_to_user": {"reputation": 353, "user_id": 5029837, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0627ce9598ef620a02bb11ab1b2d7a06?s=128&d=identicon&r=PG&f=1", "display_name": "Colin", "link": "https://stackoverflow.com/users/5029837/colin"}, "edited": false, "score": 0, "creation_date": 1518112378, "post_id": 48673527, "comment_id": 84381818, "body": "@Colin, you are right, and this makes perfect sense - I have now amended the code."}], "tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": false, "score": 2, "last_activity_date": 1518112353, "last_edit_date": 1518112353, "creation_date": 1518038821, "answer_id": 48673527, "question_id": 48673380, "link": "https://stackoverflow.com/questions/48673380/how-to-append-to-list-within-multilevel-dictionary/48673527#48673527", "title": "How to append to list within multilevel dictionary?", "body": "<p>This is an almost foolproof way of ensuring you won't get an error. The way we have defined <code>myDict</code>, you can have any keys for dictionary \"level 1\" and dictionary \"level 2\". By default, an empty list is assumed at the end of the dictionary tree.</p>\n\n<pre><code>myDict = defaultdict(lambda: defaultdict(list))\n\nwith open(myFile, \"rb\") as fh:\n    for line in fh:\n        # found something, which will match lvlOneKey and dynamically determine lvlTwoKey and valueFound\n        # ...\n        myDict[lvlOneKey][lvlTwoKey].append(valueFound)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 490, "user_id": 3838750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c7ccbfea680103b53a92d222b95789f?s=128&d=identicon&r=PG&f=1", "display_name": "Sam Bourne", "link": "https://stackoverflow.com/users/3838750/sam-bourne"}, "is_accepted": false, "score": 0, "last_activity_date": 1518040029, "creation_date": 1518040029, "answer_id": 48673799, "question_id": 48673380, "link": "https://stackoverflow.com/questions/48673380/how-to-append-to-list-within-multilevel-dictionary/48673799#48673799", "title": "How to append to list within multilevel dictionary?", "body": "<p>This can get a bit annoying if you get much further nested, but using this pattern will work.</p>\n\n<pre><code>l1keys = [1, 2, 1]\nl2keys = ['foo', 'bar', 'spangle']\n\nbase = {}\nfor l1key, l2key in zip(l1keys, l2keys):\n    for i in range(5):\n        l1 = base.get(l1key, {})\n        l2 = l1.get(l2key, [])\n        l2.append(i)\n        l1[l2key] = l2\n        base[l1key] = l1\n\nassert base == {\n    1: {'foo': [0, 1, 2, 3, 4], 'spangle': [0, 1, 2, 3, 4]},\n    2: {'bar': [0, 1, 2, 3, 4]}\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2995, "user_id": 667913, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/e038b48be307830687c8a71ff716ba07?s=128&d=identicon&r=PG", "display_name": "patrick", "link": "https://stackoverflow.com/users/667913/patrick"}, "is_accepted": true, "score": 1, "last_activity_date": 1518106610, "creation_date": 1518106610, "answer_id": 48690031, "question_id": 48673380, "link": "https://stackoverflow.com/questions/48673380/how-to-append-to-list-within-multilevel-dictionary/48690031#48690031", "title": "How to append to list within multilevel dictionary?", "body": "<p>Replacing the code under the <code>for</code> loop with the following should solve your problem:</p>\n\n<pre><code># if there is no `lvlTwoKey` in `myDict`, initialize a list with `valueFound` in it  \nif not myDict[lvlOneKey].get(lvlTwoKey, None):\n    myDict[lvlOneKey][lvlTwoKey] = [valueFound]\n# otherwise, append to the existing list \nelse: \n    myDict[lvlOneKey][lvlTwoKey].append(valueFound)\n</code></pre>\n\n<p>This uses the <code>get()</code> method on the dictionary, which you can read about <a href=\"https://docs.python.org/2/library/stdtypes.html#dict.get\" rel=\"nofollow noreferrer\">here</a>. Besides that, it's just a standard dictionary, which I find often to be more readable / intuitive than complex defaultdicts. </p>\n"}], "owner": {"reputation": 353, "user_id": 5029837, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0627ce9598ef620a02bb11ab1b2d7a06?s=128&d=identicon&r=PG&f=1", "display_name": "Colin", "link": "https://stackoverflow.com/users/5029837/colin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 190, "favorite_count": 0, "accepted_answer_id": 48690031, "answer_count": 3, "score": 1, "last_activity_date": 1518112353, "creation_date": 1518038176, "question_id": 48673380, "link": "https://stackoverflow.com/questions/48673380/how-to-append-to-list-within-multilevel-dictionary", "title": "How to append to list within multilevel dictionary?", "body": "<p>I'm traversing through a file and want to build a dynamic dictionary of multiple levels. The last level needs to store a list of values.</p>\n\n<pre><code>myDict = defaultdict(dict)\n\nfor key in lvlOneKeys: # this I know ahead of time so I set up my dictionary with first level. I'm not sure if this is necessary.\n    myDict[key] = {}\n\nwith open(myFile, \"rb\") as fh:\n    for line in fh:\n        # found something, which will match lvlOneKey and dynamically determine lvlTwoKey and valueFound\n        # ...\n        myDict[lvlOneKey][lvlTwoKey].append(valueFound)\n</code></pre>\n\n<p>I need to do this because lvlTwoKey will be found multiple times with different valueFound's.</p>\n\n<p>Unfortunately this code results in a KeyError for lvlOneKey. What am I doing wrong?</p>\n"}, {"tags": ["python", "apache", "proxy", "python-requests"], "comments": [{"owner": {"reputation": 236, "user_id": 3395469, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d93be0a04a4237ef9bf4513448348c8?s=128&d=identicon&r=PG&f=1", "display_name": "Anaksunaman", "link": "https://stackoverflow.com/users/3395469/anaksunaman"}, "edited": false, "score": 0, "creation_date": 1518750534, "post_id": 48673359, "comment_id": 84642871, "body": "If you need to manipulate the HTML itself, <a href=\"https://www.crummy.com/software/BeautifulSoup/\" rel=\"nofollow noreferrer\">Beautiful Soup</a> may be useful to you."}], "owner": {"reputation": 7483, "user_id": 188963, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/c76255b9a96d7e087522477fc278631a?s=128&d=identicon&r=PG", "display_name": "abalter", "link": "https://stackoverflow.com/users/188963/abalter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 455, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1518041224, "creation_date": 1518038066, "last_edit_date": 1518041224, "question_id": 48673359, "link": "https://stackoverflow.com/questions/48673359/how-to-properly-return-http-response-from-python-requests-library-want-a-python", "title": "How to properly return http response from Python Requests library (want a Python reverse proxy)", "body": "<p>This question continues from <a href=\"https://stackoverflow.com/questions/48635552/how-to-programmatically-communicate-with-apache\">here</a>. </p>\n\n<p>I want to create a reverse proxy of sorts that will allow me to host an application that runs on a specified port on a server that does not have that port open. But I do not want take over ports 80/443 because I need to have other apps running on that server. Instead, I want an app running at <code>localhost:####</code> to be served from a suburl or subdomain such as <code>http://myserver/myapp</code>.</p>\n\n<p>Here is what I tried:</p>\n\n<p><em>helloflask.py</em></p>\n\n<pre><code>#!/usr/bin/env python\n\nfrom flask import Flask\napp = Flask(__name__)\n\n@app.route('/')\ndef hello_world():\n    return 'Hello World!'\n\nif __name__ == '__main__':\n    app.run()\n</code></pre>\n\n<p><em>middle.py</em></p>\n\n<pre><code>#!/usr/bin/env python\n\nprint (\"Content-Type: text/html\")\nprint()\n\nimport requests\n#response = requests.get(\"http://localhost:5000\")\nresponse = requests.get(\"http://localhost:8888/token=8a387fe88d662e2568f9b8ec2398191452492e7184536670\")\n\nprint(response.text)\n</code></pre>\n\n<p>When I run <code>helloflask.py</code> it runs on port 5000, and I can visit <code>mydomain/middle.py</code> and get the correct response of \"Hello World!\" displayed in the browser. </p>\n\n<p>However, when I run a jupyter notebook on port 8888, I get a malformed web page. Strangely, the page sources are identical (<a href=\"https://www.diffchecker.com/nJceWVS2\" rel=\"nofollow noreferrer\">see the diff</a>).</p>\n\n<p>So, what do I need to do to make jupyter run from the proxy?</p>\n\n<p>Here is an image of how the page appears through <code>middle.py</code>. The link to IPythonParallel works, but no other links or controls function in any way.</p>\n\n<p><a href=\"https://i.stack.imgur.com/pU8mT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pU8mT.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "loops", "dictionary", "set"], "comments": [{"owner": {"reputation": 1690, "user_id": 916674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/550ab0daf81f6c4a5d5530c53afdfe48?s=128&d=identicon&r=PG", "display_name": "rczajka", "link": "https://stackoverflow.com/users/916674/rczajka"}, "edited": false, "score": 3, "creation_date": 1518038150, "post_id": 48673328, "comment_id": 84345111, "body": "So how would the expected pairing look like for larger sets?"}, {"owner": {"reputation": 2867, "user_id": 2599709, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/3c565ca54f4e129a36e857b20f5ff86f?s=128&d=identicon&r=PG", "display_name": "Chrispresso", "link": "https://stackoverflow.com/users/2599709/chrispresso"}, "edited": false, "score": 0, "creation_date": 1518038485, "post_id": 48673328, "comment_id": 84345290, "body": "It sounds to me like you want to create a new &quot;set&quot; after the second for loop. If that is the case just split it up inline with the second loop and that should do the trick"}, {"owner": {"reputation": 1, "user_id": 6624023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f90ea50bfc3faf9aeb030c354e129c6?s=128&d=identicon&r=PG&f=1", "display_name": "LMarks", "link": "https://stackoverflow.com/users/6624023/lmarks"}, "edited": false, "score": 0, "creation_date": 1518157078, "post_id": 48673328, "comment_id": 84398147, "body": "Its n! combinations, so for this set of 2 there are four possible, for 3 there is six possible, 4 there is 24 possible.  Four the sets: [a b c ] to [d e f] you would get: set1 {ad, bd, cf}, set2 {ae, bf, cd}, set3 {af, bd, ce} set4 {ad, bf, ce}, set5 {ae, bd, cf}, set6 {af, be, cd}"}, {"owner": {"reputation": 1, "user_id": 6624023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f90ea50bfc3faf9aeb030c354e129c6?s=128&d=identicon&r=PG&f=1", "display_name": "LMarks", "link": "https://stackoverflow.com/users/6624023/lmarks"}, "edited": false, "score": 0, "creation_date": 1518157517, "post_id": 48673328, "comment_id": 84398297, "body": "Spelling...   For* the sets:"}], "owner": {"reputation": 1, "user_id": 6624023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f90ea50bfc3faf9aeb030c354e129c6?s=128&d=identicon&r=PG&f=1", "display_name": "LMarks", "link": "https://stackoverflow.com/users/6624023/lmarks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 100, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1518037938, "creation_date": 1518037938, "question_id": 48673328, "link": "https://stackoverflow.com/questions/48673328/nested-for-loops-are-giving-all-permutations-in-one-set-how-would-i-split-into", "title": "Nested FOR loops are giving all permutations in one set. How would I split into two different associations?", "body": "<p>Lets say I have two dicts:</p>\n\n<pre><code>set1 = {\"a\":[\"description1\", \"description2\"], \"b\":[\"description1\", \"description2\"]}\nset2 = {\"c\":[\"description1\", \"description2\"], \"d\":[\"description1\", \"description2\"]}\n</code></pre>\n\n<p>I am looping through them with nested loops and calling a function like this:</p>\n\n<pre><code>for key1, value1 in sorted(figure1.objects1.iteritems()):\n    for key2, value2 in sorted(figure2.objects.iteritems()):\n        self.compare_objects(figure1.objects[key1], figure2.objects[key2])\n</code></pre>\n\n<p>I end up with the </p>\n\n<pre><code>set = {\"ac\":\"matching descriptors\", \"bd\":\"matching descriptors\", \"ad\":\"matching descriptors\", \"bc\":\"matching descriptors\"}\n</code></pre>\n\n<p>I would like to have the associations separated:</p>\n\n<pre><code>set1 = {\"ac\":\"matching descriptors\", \"bd\":\"matching descriptors\"}\nset2 = {\"ad\":\"matching descriptors\", \"bc\":\"matching descriptors\"}\n</code></pre>\n\n<p>This is because I am not sure which comparison is better and I need to check them against themselves.  This is a simple example.  Some of the later sets have 8 or more items each.</p>\n\n<p>Please help, I find the loops and iterations confusing.</p>\n"}, {"tags": ["python", "opencv"], "comments": [{"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1518038727, "post_id": 48673309, "comment_id": 84345414, "body": "Convert the image to RGB."}, {"owner": {"reputation": 11, "user_id": 9281629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/327ff963026401b8ceb5ab769615b82e?s=128&d=identicon&r=PG&f=1", "display_name": "X. Gu", "link": "https://stackoverflow.com/users/9281629/x-gu"}, "reply_to_user": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1518219499, "post_id": 48673309, "comment_id": 84430485, "body": "you mean bmp is not in rgb format?"}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1518222373, "post_id": 48673309, "comment_id": 84431190, "body": "No, I bet it is a palette grayscale image. That&#39;s why your library (which is?) chooses the nearest color for your red."}], "owner": {"reputation": 11, "user_id": 9281629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/327ff963026401b8ceb5ab769615b82e?s=128&d=identicon&r=PG&f=1", "display_name": "X. Gu", "link": "https://stackoverflow.com/users/9281629/x-gu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 682, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1518312289, "creation_date": 1518037870, "last_edit_date": 1518312289, "question_id": 48673309, "link": "https://stackoverflow.com/questions/48673309/python-how-to-draw-rectangle-on-image-correctly", "title": "python - how to draw rectangle on image correctly", "body": "<p>I want to draw some rectangles on the bmp images. And I have try some method:</p>\n\n<pre><code>im = np.array(Image.open('lenna_256.bmp'), dtype=np.uint8)\ncv2.rectangle(im,(491,267),(529,305),(0,255,0),3)\ncv2.rectangle(im,(10,510),(375,875),(0,255,0),3)\nplt.imshow(im)\n</code></pre>\n\n<p>but the result shows that:\n<a href=\"https://i.stack.imgur.com/6ITZh.png\" rel=\"nofollow noreferrer\">The rectangle I draw shows here</a></p>\n\n<p>However, I want to draw the rectangles directly on the original image, instead of the greyscale one, how could I solve this?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 3, "creation_date": 1518038027, "post_id": 48673304, "comment_id": 84345063, "body": "first... call in a single instance? Or do you want to actually persist state to storage such that the change spans multiple runs of the program? If it&#39;s the latter, you&#39;ll need to implement code to read and write from (disk/database/whatever)."}], "answers": [{"comments": [{"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 4, "creation_date": 1518038194, "post_id": 48673355, "comment_id": 84345139, "body": "Why the downvote? This does what the OP literally asked for. It&#39;s not good practice, but that&#39;s on the OP."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 1, "creation_date": 1518038302, "post_id": 48673355, "comment_id": 84345199, "body": "(That said, personally, I&#39;d consider making this a class that implements <code>__call__()</code> rather than a function -- that way its state can live internally, as at <code>self.upgrade</code>, rather than as a separate global)."}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 5, "creation_date": 1518038308, "post_id": 48673355, "comment_id": 84345203, "body": "You can (and should) downvote if you think something is not good practice, regardless of what the OP asked about."}, {"owner": {"reputation": 15126, "user_id": 1953800, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4173076e5187c82e74379de9aeb00aa4?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1953800/alex"}, "reply_to_user": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1518038360, "post_id": 48673355, "comment_id": 84345232, "body": "@wim disagreed so long as you point out that it&#39;s not good practice. I learn a lot from reading hacky solutions to things and thinking about how they work."}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 1, "creation_date": 1518038392, "post_id": 48673355, "comment_id": 84345254, "body": "btw it won&#39;t even work, this will be <code>SyntaxError</code>, isn&#39;t that a good enough reason?  The global statement needs to go before the name is first used."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1518038457, "post_id": 48673355, "comment_id": 84345281, "body": "True; the <code>global</code> declaration should move up to the top of the function body."}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 4, "creation_date": 1518038580, "post_id": 48673355, "comment_id": 84345338, "body": "So a code that doesn&#39;t work and has a <code>SyntaxError</code> gets upvoted 4 times? How?"}, {"owner": {"reputation": 901, "user_id": 8414180, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/x4wrW.gif?s=128&g=1", "display_name": "data princess", "link": "https://stackoverflow.com/users/8414180/data-princess"}, "edited": false, "score": 1, "creation_date": 1518038719, "post_id": 48673355, "comment_id": 84345409, "body": "It does work without error (corrected the global placement) and most closely addresses what OP was asking, in my opinion."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 3, "creation_date": 1518039210, "post_id": 48673355, "comment_id": 84345669, "body": "@wim If someone makes a simple syntax error, post a comment so they can fix it. It&#39;s not worth a downvote."}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 4, "creation_date": 1518039825, "post_id": 48673355, "comment_id": 84345932, "body": "@Barmar  Don&#39;t tell other users how to use their downvotes.  Btw I would -1 this idea even if it were correctly written in the first place.  I would -2 it if I could."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1518039869, "post_id": 48673355, "comment_id": 84345944, "body": "@wim Assume &quot;IMHO&quot; at the beginning of my comment."}], "tags": [], "owner": {"reputation": 901, "user_id": 8414180, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/x4wrW.gif?s=128&g=1", "display_name": "data princess", "link": "https://stackoverflow.com/users/8414180/data-princess"}, "is_accepted": false, "score": 0, "last_activity_date": 1518038986, "last_edit_date": 1518038986, "creation_date": 1518038057, "answer_id": 48673355, "question_id": 48673304, "link": "https://stackoverflow.com/questions/48673304/make-a-function-behave-differently-between-first-and-subsequent-calls/48673355#48673355", "title": "Make a function behave differently between first and subsequent calls", "body": "<p>If I understand you correctly in you only need the literal first call to do thtp, you could make <code>upgrade</code> a global variable. Then, when the <code>download</code> function is called, you globally set it to False, and it will remain that way for subsequent calls.</p>\n\n<p>Note that this answer is based on a certain reading of OP's question. I am assuming that the script calling this function does not know how many times the function has been called.</p>\n\n<pre><code>upgrade = True\n\ndef download():\n  global upgrade\n  if upgrade:\n     print('do a download using tftp')\n     upgrade = False\n  else:\n     print('do a download using http')\n\ndownload() # do a download using tftp\ndownload() # do a download using http\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 901, "user_id": 8414180, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/x4wrW.gif?s=128&g=1", "display_name": "data princess", "link": "https://stackoverflow.com/users/8414180/data-princess"}, "edited": false, "score": 0, "creation_date": 1518038307, "post_id": 48673358, "comment_id": 84345202, "body": "OP said &#39;iteration,&#39; meaning the function is called multiple times but he doesn&#39;t know from the outset which number of call it is."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 2, "creation_date": 1518038781, "post_id": 48673358, "comment_id": 84345437, "body": "This <i>doesn&#39;t actually solve the problem</i> of changing the <code>upgrade</code> switch between the first and subsequent invocations; it just is an instruction to have the caller do that work between the invocations of the function. Is that the right thing to do as a best practice? Yes, absolutely. Does it answer the question? ...ehhhh..."}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 0, "creation_date": 1518038894, "post_id": 48673358, "comment_id": 84345508, "body": "Rereading the question, I would tend to agree. But I would like OP to confirm, still a bit vague to me."}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 3, "creation_date": 1518039201, "post_id": 48673358, "comment_id": 84345661, "body": "This is the only answer that is sort of getting something towards the right approach.  But I would go a bit further, and just write two different functions like <code>download_tftp</code> and <code>download_http</code>, and keep the logic about which to use outside of the function itself."}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "reply_to_user": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1518039261, "post_id": 48673358, "comment_id": 84345690, "body": "@wim, what about <code>functools.partial</code> to split apart the 2 configurations?"}], "tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": false, "score": 1, "last_activity_date": 1518038174, "last_edit_date": 1518038174, "creation_date": 1518038059, "answer_id": 48673358, "question_id": 48673304, "link": "https://stackoverflow.com/questions/48673304/make-a-function-behave-differently-between-first-and-subsequent-calls/48673358#48673358", "title": "Make a function behave differently between first and subsequent calls", "body": "<p>Restructure your code as below:</p>\n\n<pre><code>def download(upgrade=True):\n\n  if upgrade:\n     do a download using tftp\n  else:\n     do a download via HTTP\n</code></pre>\n\n<p>In your second iteration, when you call <code>download</code>, use <code>upgrade=False</code> as a parameter:</p>\n\n<pre><code>download(False)  # download via HTTP\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2867, "user_id": 2599709, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/3c565ca54f4e129a36e857b20f5ff86f?s=128&d=identicon&r=PG", "display_name": "Chrispresso", "link": "https://stackoverflow.com/users/2599709/chrispresso"}, "edited": false, "score": 1, "creation_date": 1518038650, "post_id": 48673424, "comment_id": 84345372, "body": "OP is asking something that can be easily resolved with a default argument and you want to introduce him to closures?"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "reply_to_user": {"reputation": 2867, "user_id": 2599709, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/3c565ca54f4e129a36e857b20f5ff86f?s=128&d=identicon&r=PG", "display_name": "Chrispresso", "link": "https://stackoverflow.com/users/2599709/chrispresso"}, "edited": false, "score": 3, "creation_date": 1518038673, "post_id": 48673424, "comment_id": 84345386, "body": "@ZWiki, eh? The &quot;default argument&quot; is just pushing the work to the outer scope; it doesn&#39;t solve the problem, which is of maintaining state across invocations, unless you make it a mutable one -- which is much more of a hack than this is."}, {"owner": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 2, "creation_date": 1518038715, "post_id": 48673424, "comment_id": 84345406, "body": "I don&#39;t consider this to be a particularly difficult closure as they go, I think its quite a simple introduction to them."}, {"owner": {"reputation": 2867, "user_id": 2599709, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/3c565ca54f4e129a36e857b20f5ff86f?s=128&d=identicon&r=PG", "display_name": "Chrispresso", "link": "https://stackoverflow.com/users/2599709/chrispresso"}, "edited": false, "score": 0, "creation_date": 1518038818, "post_id": 48673424, "comment_id": 84345457, "body": "Oh I misunderstood the question then. I suppose a closure is a good way to do so since we don&#39;t have C static equivalent"}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 3, "creation_date": 1518038911, "post_id": 48673424, "comment_id": 84345515, "body": "\u20131 Gross way to store state, because you can&#39;t access the state.  Better to use a callable class if you want that."}, {"owner": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "reply_to_user": {"reputation": 2867, "user_id": 2599709, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/3c565ca54f4e129a36e857b20f5ff86f?s=128&d=identicon&r=PG", "display_name": "Chrispresso", "link": "https://stackoverflow.com/users/2599709/chrispresso"}, "edited": false, "score": 0, "creation_date": 1518039001, "post_id": 48673424, "comment_id": 84345566, "body": "@ZWiki: yes, I always use this when what I really want is a C style <code>static</code> (or Perl <code>state</code>).   You can&#39;t access the state from the outside - that&#39;s good (encapsulation), but you can access it from the inner function."}, {"owner": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "edited": false, "score": 0, "creation_date": 1518040546, "post_id": 48673424, "comment_id": 84346267, "body": "You could just have an <code>initialized</code> variable in your main function/script and use that... then you can tell whether it has been initialized. Wrapping that in a closure seems like overkill."}, {"owner": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "reply_to_user": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "edited": false, "score": 0, "creation_date": 1518075057, "post_id": 48673424, "comment_id": 84356909, "body": "@TemporalWolf:  you could, but that means the function is not encapsulated."}], "tags": [], "owner": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "is_accepted": false, "score": 2, "last_activity_date": 1518038378, "creation_date": 1518038378, "answer_id": 48673424, "question_id": 48673304, "link": "https://stackoverflow.com/questions/48673304/make-a-function-behave-differently-between-first-and-subsequent-calls/48673424#48673424", "title": "Make a function behave differently between first and subsequent calls", "body": "<p>You can use a <em>closure</em>, that is, have an inner function which is returned, and this retains an outer state.  This assumes python 3:</p>\n\n<pre><code>def init_download():\n    upgrade = True\n\n    def inner():\n        nonlocal upgrade\n        if upgrade:\n            print('do a download using tftp')\n            upgrade = False\n        else:\n            print('do a download via HTTP')\n\n    return inner\n\ndownload = init_download()\n\ndownload()\ndownload()\ndownload()\n</code></pre>\n\n<p>Gives:</p>\n\n<pre><code>do a download using tftp\ndo a download via HTTP\ndo a download via HTTP\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 1, "creation_date": 1518039015, "post_id": 48673542, "comment_id": 84345568, "body": "\u20131  just another bad way to store global state"}, {"owner": {"reputation": 30387, "user_id": 6260170, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0caf9a0d28be362618ffc0223b301d6e?s=128&d=identicon&r=PG&f=1", "display_name": "Chris_Rands", "link": "https://stackoverflow.com/users/6260170/chris-rands"}, "reply_to_user": {"reputation": 15126, "user_id": 1953800, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4173076e5187c82e74379de9aeb00aa4?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1953800/alex"}, "edited": false, "score": 1, "creation_date": 1518039321, "post_id": 48673542, "comment_id": 84345709, "body": "@Alex thanks and sorry your correction was right, I misread the question, thought they wanted a switch to go back and forth"}, {"owner": {"reputation": 30387, "user_id": 6260170, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0caf9a0d28be362618ffc0223b301d6e?s=128&d=identicon&r=PG&f=1", "display_name": "Chris_Rands", "link": "https://stackoverflow.com/users/6260170/chris-rands"}, "reply_to_user": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1518039400, "post_id": 48673542, "comment_id": 84345734, "body": "@wim can you spell out to me why it&#39;s so bad? I agree it&#39;s not best practise but how often do you actually find a possible use case for the default mutable argument, could not resist!"}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1518039568, "post_id": 48673542, "comment_id": 84345809, "body": "Sure.  It&#39;s because when you need stateful execution, the right tool for the job is not a function."}, {"owner": {"reputation": 15126, "user_id": 1953800, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4173076e5187c82e74379de9aeb00aa4?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1953800/alex"}, "reply_to_user": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1518039686, "post_id": 48673542, "comment_id": 84345873, "body": "@wim I agree with you generally but technically all non-trivial closures involve stateful execution."}, {"owner": {"reputation": 30387, "user_id": 6260170, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0caf9a0d28be362618ffc0223b301d6e?s=128&d=identicon&r=PG&f=1", "display_name": "Chris_Rands", "link": "https://stackoverflow.com/users/6260170/chris-rands"}, "reply_to_user": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 2, "creation_date": 1518040503, "post_id": 48673542, "comment_id": 84346246, "body": "I think @wim think this is an X-Y question, and he/she is probably right, but the problem becomes rather trivial if you take the logic outside the function. I&#39;ll add a note with that sentiment :)"}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 1, "creation_date": 1518040704, "post_id": 48673542, "comment_id": 84346330, "body": "@Chris_Rands Right.  And when your problem becomes trivial it&#39;s <b>a good thing</b>."}, {"owner": {"reputation": 30387, "user_id": 6260170, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0caf9a0d28be362618ffc0223b301d6e?s=128&d=identicon&r=PG&f=1", "display_name": "Chris_Rands", "link": "https://stackoverflow.com/users/6260170/chris-rands"}, "reply_to_user": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1518041166, "post_id": 48673542, "comment_id": 84346551, "body": "@wim of course! it can be can be instructive to think about these questions still IMO"}], "tags": [], "owner": {"reputation": 30387, "user_id": 6260170, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0caf9a0d28be362618ffc0223b301d6e?s=128&d=identicon&r=PG&f=1", "display_name": "Chris_Rands", "link": "https://stackoverflow.com/users/6260170/chris-rands"}, "is_accepted": false, "score": 1, "last_activity_date": 1518040538, "last_edit_date": 1518040538, "creation_date": 1518038879, "answer_id": 48673542, "question_id": 48673304, "link": "https://stackoverflow.com/questions/48673304/make-a-function-behave-differently-between-first-and-subsequent-calls/48673542#48673542", "title": "Make a function behave differently between first and subsequent calls", "body": "<p>Probably you can (and should) just take this logic outside of your function, but if you want to pass the same argument each time but still change the behaviour after the first call, you could use the <a href=\"https://stackoverflow.com/questions/1132941/least-astonishment-and-the-mutable-default-argument\">default mutable argument</a>:</p>\n\n<pre><code>from itertools import count \n\ndef download(c=count()):\n    if next(c) == 0:\n        print('tftp')\n    else:\n        print('http')\n\ndownload()\n# tftp\ndownload()\n# http\ndownload()\n# http\ndownload()\n# http\n</code></pre>\n\n<p>The advantage of using <code>itertools.count</code> rather than say a list is that you don't accumulate memory with each call.</p>\n"}, {"comments": [{"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 1, "creation_date": 1518039806, "post_id": 48673652, "comment_id": 84345922, "body": "The intent is to only do one operation per call. Maybe you could make a generator out of this, but that would require changing the calling convention."}, {"owner": {"reputation": 1, "user_id": 9323908, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RdsWG.png?s=128&g=1", "display_name": "White Wolf", "link": "https://stackoverflow.com/users/9323908/white-wolf"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1518072636, "post_id": 48673652, "comment_id": 84355729, "body": "Read the above updated code. It does one operation per call then exits."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1518108235, "post_id": 48673652, "comment_id": 84379208, "body": "No, it doesn&#39;t. If you call it with <code>upgrade=False</code>, then it prints <code>HTTP</code> inside the <code>while</code> loop, breaks out of the loop, and then prints <code>TFTP</code> from the same call."}], "tags": [], "owner": {"reputation": 1, "user_id": 9323908, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RdsWG.png?s=128&g=1", "display_name": "White Wolf", "link": "https://stackoverflow.com/users/9323908/white-wolf"}, "is_accepted": false, "score": -2, "last_activity_date": 1518108203, "last_edit_date": 1518108203, "creation_date": 1518039401, "answer_id": 48673652, "question_id": 48673304, "link": "https://stackoverflow.com/questions/48673304/make-a-function-behave-differently-between-first-and-subsequent-calls/48673652#48673652", "title": "Make a function behave differently between first and subsequent calls", "body": "<p>You could structure your code in the following:</p>\n\n<pre><code>def download(upgrade = False):\n\n    while upgrade == False:\n            print(\"HTTP\")\n            break\n    print(\"TFTP\")\n\ndownload()\n</code></pre>\n\n<p>This will go through them once and exit the program after. The print statements are just a guide to show you what's happening and when it ends.</p>\n"}, {"tags": [], "owner": {"reputation": 15126, "user_id": 1953800, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4173076e5187c82e74379de9aeb00aa4?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1953800/alex"}, "is_accepted": false, "score": 6, "last_activity_date": 1518039490, "creation_date": 1518039490, "answer_id": 48673675, "question_id": 48673304, "link": "https://stackoverflow.com/questions/48673304/make-a-function-behave-differently-between-first-and-subsequent-calls/48673675#48673675", "title": "Make a function behave differently between first and subsequent calls", "body": "<p>For completeness here is the <code>class</code> solution:</p>\n\n<pre><code>class Download(object):\n    def __init__(self):\n        self.executed = False\n\n    def __call__(self):\n        print('http' if self.executed else 'tftp')\n        self.executed = True\n\ndownload = Download()\n\ndownload()  # tftp\ndownload()  # http\ndownload()  # http\n</code></pre>\n\n<p>This allows you to store state in a non-hackish way across invocations.</p>\n"}, {"tags": [], "owner": {"reputation": 1541, "user_id": 687197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fada2ba44ce3adbd2f2d43ccfd1920ed?s=128&d=identicon&r=PG", "display_name": "Samuel Chen", "link": "https://stackoverflow.com/users/687197/samuel-chen"}, "is_accepted": false, "score": -1, "last_activity_date": 1541413002, "last_edit_date": 1541413002, "creation_date": 1541412661, "answer_id": 53152245, "question_id": 48673304, "link": "https://stackoverflow.com/questions/48673304/make-a-function-behave-differently-between-first-and-subsequent-calls/53152245#53152245", "title": "Make a function behave differently between first and subsequent calls", "body": "<p>Since @Alex 's answer is good, but it need a extra step to construct an instance. You will also to store the instance globally.</p>\n\n<p>So I made some change to it. Then you can import it and use it as function.</p>\n\n<p>util.py</p>\n\n<pre><code>class Downloader(object):\n  _upgrade = False\n\n  @classmethod\n  def call(cls):\n    if cls._upgrade:\n      print('upgrade via http')\n    else:\n      print('download via tft')\n      cls._upgrade = True\n\ndef download():\n  Downloader.call()\n</code></pre>\n\n<p>main.py (using it)</p>\n\n<pre><code>from .util import download\n\ndownload()\ndownload()\n</code></pre>\n\n<p>This may not thread safe. And if you run it in different processes (e.g. webserver backend), you'd better use a remote storage for the flag (e.g. redis/oss). </p>\n"}], "owner": {"reputation": 53, "user_id": 7324146, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-EnuiTRW6Rhg/AAAAAAAAAAI/AAAAAAAAAFc/bGcrRzEq4Yw/photo.jpg?sz=128", "display_name": "Harish Sridharan", "link": "https://stackoverflow.com/users/7324146/harish-sridharan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 223, "favorite_count": 0, "answer_count": 7, "score": 1, "last_activity_date": 1541413002, "creation_date": 1518037851, "last_edit_date": 1518041946, "question_id": 48673304, "link": "https://stackoverflow.com/questions/48673304/make-a-function-behave-differently-between-first-and-subsequent-calls", "title": "Make a function behave differently between first and subsequent calls", "body": "<pre><code>def download():\n    upgrade = True\n    if upgrade:\n        # do a download using tftp\n    else:\n        # do a download via HTTP\n</code></pre>\n\n<p>As you can see, I have a hard coded value of upgrade that is set to true. In this script, it always does a tftp download. </p>\n\n<p>How do I change the script to do tftp download at the first iteration and in the next iteration when the function download is called, it does a http download?</p>\n"}, {"tags": ["python", "arrays", "json"], "answers": [{"tags": [], "owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "is_accepted": true, "score": 4, "last_activity_date": 1518038011, "creation_date": 1518038011, "answer_id": 48673347, "question_id": 48673275, "link": "https://stackoverflow.com/questions/48673275/update-arrays-in-json-object/48673347#48673347", "title": "Update arrays in json object", "body": "<p>The data structure that you want to update is buried fairly deeply. You can't access it from the very top level.</p>\n\n<p>Try this:</p>\n\n<pre><code>import json\nwith open('arg5.json') as json_data:\n        source = json.loads(json_data.read())\nprint source\nsource[\"source\"][\"thirdPartyRef\"][\"resources\"][0][\"authentication\"].update(\n    {\"awsId\" : \"AKIAXXXXX\", \"awsKey\": \"HHSJSHS\"})\n</code></pre>\n"}], "owner": {"reputation": 789, "user_id": 2128294, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/eaf09133be0fd5503ff299082b470134?s=128&d=identicon&r=PG", "display_name": "Chucks", "link": "https://stackoverflow.com/users/2128294/chucks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 48673347, "answer_count": 1, "score": 0, "last_activity_date": 1518038011, "creation_date": 1518037699, "question_id": 48673275, "link": "https://stackoverflow.com/questions/48673275/update-arrays-in-json-object", "title": "Update arrays in json object", "body": "<p>Tried to update the array in json object. Here is my json object</p>\n\n<pre><code>   {\n    \"api.version\": \"v1\",\n    \"source\": {\n        \"thirdPartyRef\": {\n            \"resources\": [{\n                \"serviceType\": \"AwsElbBucket\",\n                \"path\": {\n                    \"pathExpression\": \"songs/*\"\n                },\n                \"authentication\": {\n                    \"type\": \"S3BucketAuthentication\"\n                }\n            }]\n        }\n    }\n  }\n</code></pre>\n\n<p>Code that reads json and update awsId. My requirement is to add aws creds int the authentication secition.</p>\n\n<p>Once program run successfully, it should look like</p>\n\n<pre><code>       \"authentication\": {\n          \"type\": \"S3BucketAuthentication\",\n          \"awsId\": \"AKIAXXXXX\",\n          \"awsKey\": \"MYHSHSYjusXXX\"\n       }\n</code></pre>\n\n<p>Here is my snippet of code args[5] is the jsonfile</p>\n\n<pre><code>with open(args[5]) as json_data:\n        source = json.loads(json_data.read())\n#       source['source']['category']['awsID'] = \"test\"\nsource.update( {\"awsId\" : \"AKIAXXXXX\", \"awsKey\": \"HHSJSHS\"})\nprint source\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>{u'api.version': u'v1', 'awsKey': 'HHSJSHS', 'awsId': 'AKIAXXXXX', u'source': {u'thirdPartyRef': {u'resources': [{u'path': {u'pathExpression': u'songs/*'}, u'serviceType': u'AwsElbBucket', u'authentication': {u'type': u'S3BucketAuthentication'}}]}}}\n</code></pre>\n\n<p>I tried to <code>source.update( \"source\":{\"awsId\" : \"AKIAXXXXX\", \"awsKey\": \"HHSJSHS\"}})</code>, it overwrites the rest of the json.</p>\n"}, {"tags": ["python", "tensorflow", "google-colaboratory"], "comments": [{"owner": {"reputation": 1130, "user_id": 7434550, "user_type": "registered", "accept_rate": 85, "profile_image": "https://graph.facebook.com/10206145437995042/picture?type=large", "display_name": "Laurynas Tamulevi\u010dius", "link": "https://stackoverflow.com/users/7434550/laurynas-tamulevi%c4%8dius"}, "edited": false, "score": 0, "creation_date": 1518047117, "post_id": 48673225, "comment_id": 84348917, "body": "I noticed that at some point it asked to terminate all existing runtimes and when I agreed to do that it assigned a GPU runtime for me instantly..."}, {"owner": {"reputation": 26236, "user_id": 8841057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4796c297c2b726df149e486e7d1fbb20?s=128&d=identicon&r=PG&f=1", "display_name": "Bob Smith", "link": "https://stackoverflow.com/users/8841057/bob-smith"}, "edited": false, "score": 0, "creation_date": 1518056339, "post_id": 48673225, "comment_id": 84351247, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/48508145/google-colaboratory-no-backend-with-gpu-available\">Google-colaboratory: No backend with GPU available</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1652, "user_id": 8755609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/570a0c1a834257f61beb04a36bcf6f5e?s=128&d=identicon&r=PG&f=1", "display_name": "Ami F", "link": "https://stackoverflow.com/users/8755609/ami-f"}, "is_accepted": false, "score": 1, "last_activity_date": 1518201026, "creation_date": 1518201026, "answer_id": 48712042, "question_id": 48673225, "link": "https://stackoverflow.com/questions/48673225/cant-connect-to-gpu-runtime/48712042#48712042", "title": "Can&#39;t connect to GPU runtime", "body": "<p>The way to authoritatively know what kind of runtime you're connected is to hover over the CONNECTED button on the top-right; if the hover tooltip is suffixed \"(GPU)\" then you've got a GPU.</p>\n\n<p>You can test for the health of the GPU HW by inspecting the output of executing <code>!/opt/bin/nvidia-smi</code> (which will only be found on a GPU runtime, by the way).</p>\n\n<p>Tensorflow not being able to see the GPU while <code>nvidia-smi</code> can is usually a symptom of having done something like:\n<code>!pip install -U tensorflow</code>\nwhich gets you a TF build that doesn't know how to talk to the GPU. All colaboratory runtimes already have TF preinstalled, so you should not need to re-install it.  If you need a particular feature of TF that is not available in the pre-installed version, you can get a build that knows how to talk to the GPU with <code>!pip install -U tensorflow-gpu</code> though note that the pre-installed TF build is better optimized for the particular CPU platform used so you'll be giving up some performance, as well as using a lot more RAM.</p>\n\n<p>If you've only got a reinstalled TF build as a result of <code>!pip install -U</code>'ing something else that depends on tensorflow, you can avoid this by specifying <code>--upgrade-strategy=only-if-needed</code> which should leave the pre-installed TF in place.</p>\n\n<p>If you've messed up your runtime and want to wipe the slate clean, execute\n<code>kill -9 -1</code> and wait 15-30s to reconnect.</p>\n"}], "owner": {"reputation": 1130, "user_id": 7434550, "user_type": "registered", "accept_rate": 85, "profile_image": "https://graph.facebook.com/10206145437995042/picture?type=large", "display_name": "Laurynas Tamulevi\u010dius", "link": "https://stackoverflow.com/users/7434550/laurynas-tamulevi%c4%8dius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2620, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1518201026, "creation_date": 1518037510, "question_id": 48673225, "link": "https://stackoverflow.com/questions/48673225/cant-connect-to-gpu-runtime", "title": "Can&#39;t connect to GPU runtime", "body": "<p>Has anyone found a way to get a stable access to GPU runtime? </p>\n\n<p>At the moment I follow this process:</p>\n\n<pre><code>Runtime -&gt; Change runtime type -&gt; \"Python 2\" and \"GPU\" -&gt; Save -&gt; Runtime -&gt; Connec to runtime... \n</code></pre>\n\n<p>And check if GPU is enabled:</p>\n\n<pre><code>import tensorflow as tf\ntf.test.gpu_device_name()\n</code></pre>\n\n<p>However, I get <code>''</code>, though 1 time in a 30 I was able to connect. Does anyone have any ideas what is going on?</p>\n"}, {"tags": ["python", "asynchronous", "aiohttp"], "comments": [{"owner": {"reputation": 14527, "user_id": 3454879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uSMGz.jpg?s=128&g=1", "display_name": "Andrew Svetlov", "link": "https://stackoverflow.com/users/3454879/andrew-svetlov"}, "edited": false, "score": 0, "creation_date": 1518080497, "post_id": 48673212, "comment_id": 84359811, "body": "1. Your code has syntax errors. 2. aiohttp doesn&#39;t use background threads at all."}, {"owner": {"reputation": 404, "user_id": 3274630, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/581494597/picture?type=large", "display_name": "Corneliu Maftuleac", "link": "https://stackoverflow.com/users/3274630/corneliu-maftuleac"}, "reply_to_user": {"reputation": 14527, "user_id": 3454879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uSMGz.jpg?s=128&g=1", "display_name": "Andrew Svetlov", "link": "https://stackoverflow.com/users/3454879/andrew-svetlov"}, "edited": false, "score": 0, "creation_date": 1518085157, "post_id": 48673212, "comment_id": 84363050, "body": "1. Fixed - my bad. 2. Right, I fixed the description. What I mean is async way - when TCP connection is made session.get() should not wait for the remote counterpart for the reply."}, {"owner": {"reputation": 38108, "user_id": 6610, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/635c3ea0c7b8c37ef45744b6e66dd263?s=128&d=identicon&r=PG", "display_name": "xtofl", "link": "https://stackoverflow.com/users/6610/xtofl"}, "edited": false, "score": 0, "creation_date": 1518085724, "post_id": 48673212, "comment_id": 84363450, "body": "Is this still slower now you removed the <code>await async ...</code>?"}, {"owner": {"reputation": 404, "user_id": 3274630, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/581494597/picture?type=large", "display_name": "Corneliu Maftuleac", "link": "https://stackoverflow.com/users/3274630/corneliu-maftuleac"}, "edited": false, "score": 0, "creation_date": 1518086517, "post_id": 48673212, "comment_id": 84364054, "body": "<code>await async ...</code> async keyword was here by mistake (syntax error)."}, {"owner": {"reputation": 14527, "user_id": 3454879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uSMGz.jpg?s=128&g=1", "display_name": "Andrew Svetlov", "link": "https://stackoverflow.com/users/3454879/andrew-svetlov"}, "edited": false, "score": 0, "creation_date": 1518089617, "post_id": 48673212, "comment_id": 84366086, "body": "Why not? <code>session.get()</code> returns a response object with headers available already. What is the point for getting response event without status code?"}, {"owner": {"reputation": 404, "user_id": 3274630, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/581494597/picture?type=large", "display_name": "Corneliu Maftuleac", "link": "https://stackoverflow.com/users/3274630/corneliu-maftuleac"}, "reply_to_user": {"reputation": 14527, "user_id": 3454879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uSMGz.jpg?s=128&g=1", "display_name": "Andrew Svetlov", "link": "https://stackoverflow.com/users/3454879/andrew-svetlov"}, "edited": false, "score": 0, "creation_date": 1518093612, "post_id": 48673212, "comment_id": 84368813, "body": "@AndrewSvetlov the point is &#39;performance&#39;. Assume that a typical HTTPS connection establishment duration is 100-200ms, multiply that by 100 requests you already waste a lot of time waiting ONLY for connection establishment. Network layer on the other hand has no problem establishing 100 TCP connections at the same time. The problem is at the application layer."}, {"owner": {"reputation": 14527, "user_id": 3454879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uSMGz.jpg?s=128&g=1", "display_name": "Andrew Svetlov", "link": "https://stackoverflow.com/users/3454879/andrew-svetlov"}, "edited": false, "score": 0, "creation_date": 1518126425, "post_id": 48673212, "comment_id": 84389270, "body": "I totally missed, sorry."}], "answers": [{"comments": [{"owner": {"reputation": 404, "user_id": 3274630, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/581494597/picture?type=large", "display_name": "Corneliu Maftuleac", "link": "https://stackoverflow.com/users/3274630/corneliu-maftuleac"}, "edited": false, "score": 0, "creation_date": 1518085478, "post_id": 48673592, "comment_id": 84363267, "body": "Thanks for the reply, I have fixed the syntax errors and modified the example to connect to an non-existent server to show that the connection establishment is non in an non-async fashion. With the exact example from the docs - the same results."}, {"owner": {"reputation": 404, "user_id": 3274630, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/581494597/picture?type=large", "display_name": "Corneliu Maftuleac", "link": "https://stackoverflow.com/users/3274630/corneliu-maftuleac"}, "edited": false, "score": 0, "creation_date": 1518085505, "post_id": 48673592, "comment_id": 84363285, "body": "To install aiohttp: pip install aiohttp (or pip3 install aiohttp)"}], "tags": [], "owner": {"reputation": 5056, "user_id": 4276090, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/r87tb.jpg?s=128&g=1", "display_name": "Skam", "link": "https://stackoverflow.com/users/4276090/skam"}, "is_accepted": false, "score": 0, "last_activity_date": 1518039107, "creation_date": 1518039107, "answer_id": 48673592, "question_id": 48673212, "link": "https://stackoverflow.com/questions/48673212/python-aiohttp-performance-connect-performed-on-the-main-thread/48673592#48673592", "title": "python aiohttp performance: connect performed on the main thread", "body": "<p><strong>Warning:</strong> I don't promise this code works, as I can't install <code>aiohttp</code> atm, but looking at the example in the <a href=\"https://github.com/aio-libs/aiohttp\" rel=\"nofollow noreferrer\">docs</a></p>\n\n<pre><code>async def fetch(session, url):\n    async with async_timeout.timeout(10):\n        async with session.get(url) as response:\n            return await response.text()\n\nasync def main():\n    async with aiohttp.ClientSession() as session:\n        html = await fetch(session, 'http://python.org')\n        print(html)\n\nif __name__ == '__main__':\n    loop = asyncio.get_event_loop()\n    loop.run_until_complete(main())\n</code></pre>\n\n<p>Notice how they're calling the <code>aiohttp.ClientSession()</code> with the <code>async</code> keyword. Additionally, I was getting some error in your line <code>data = await async with session.get(url) as resp:</code></p>\n\n<pre><code>async def fetch(session, url):\n    async with session.get(url) as response:\n        return await response.text()\n\nasync def main():\n    out = []\n    async with aiohttp.ClientSession() as session:\n        for url in urls:\n            data = await fetch(session, url)\n            out.append(data)\n    return out\n\nif __name__ == '__main__':\n    loop = asyncio.get_event_loop()\n    loop.run_until_complete(main())\n</code></pre>\n"}], "owner": {"reputation": 404, "user_id": 3274630, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/581494597/picture?type=large", "display_name": "Corneliu Maftuleac", "link": "https://stackoverflow.com/users/3274630/corneliu-maftuleac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 228, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1518085635, "creation_date": 1518037452, "last_edit_date": 1518085635, "question_id": 48673212, "link": "https://stackoverflow.com/questions/48673212/python-aiohttp-performance-connect-performed-on-the-main-thread", "title": "python aiohttp performance: connect performed on the main thread", "body": "<p>I have the following code</p>\n\n<pre><code>import asyncio\nimport aiohttp\n\nurls = [\n    'http://54.224.27.241',\n    'http://54.224.27.241',\n    'http://54.224.27.241',\n    'http://54.224.27.241',\n    'http://54.224.27.241',\n]\n\nasync def query(urls):\n    out = []\n    with aiohttp.ClientSession() as session:\n        for url in urls:\n            try:\n                async with session.get(url, timeout=5) as resp:\n                    text = await resp.text()\n                    out.append(resp.status)\n            except:\n                print('timeout')\n    return out\n\n\nloop = asyncio.get_event_loop()\nout = loop.run_until_complete(query(urls))\nloop.close()\n\nprint(str(out))\n</code></pre>\n\n<p>The code is much slower than the one that uses a threadpool and keep increasing if you increase the number of urls (lets say 20, 50 etc.)</p>\n\n<p>I have a feeling that when the initial connection establishment is not done in an async way.</p>\n\n<p>(Note that I am connecting here to an non-existing server to deliberately produce a connection timeout).</p>\n\n<p>Can someone point out what is wrong here?</p>\n"}, {"tags": ["python", "postgresql", "python-asyncio"], "comments": [{"owner": {"reputation": 22993, "user_id": 1394393, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mSjIL.jpg?s=128&g=1", "display_name": "jpmc26", "link": "https://stackoverflow.com/users/1394393/jpmc26"}, "edited": false, "score": 0, "creation_date": 1518058607, "post_id": 48673117, "comment_id": 84351810, "body": "What did you find when you searched for that error?"}], "answers": [{"tags": [], "owner": {"reputation": 14527, "user_id": 3454879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uSMGz.jpg?s=128&g=1", "display_name": "Andrew Svetlov", "link": "https://stackoverflow.com/users/3454879/andrew-svetlov"}, "is_accepted": false, "score": 2, "last_activity_date": 1518080267, "creation_date": 1518080267, "answer_id": 48681360, "question_id": 48673117, "link": "https://stackoverflow.com/questions/48673117/how-to-understand-and-use-asyncio-in-python-using-postgresql/48681360#48681360", "title": "How to understand and use asyncio in Python using PostgreSQL?", "body": "<p>The pool is not closed before exit from <code>go()</code> coroutine and loop stopping.</p>\n\n<p>Use <code>async with aiopg.create_pool()</code> instead of <code>await aiopg.create_pool()</code> or explicitly call <code>pool.close()</code>/<code>await pool.await_closed()</code> at the end of coroutine.</p>\n"}], "owner": {"reputation": 369, "user_id": 7517051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4d3816fe4db262d77742b0aeb599117?s=128&d=identicon&r=PG&f=1", "display_name": "Vishal786btc", "link": "https://stackoverflow.com/users/7517051/vishal786btc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 272, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1518080267, "creation_date": 1518037107, "last_edit_date": 1518038965, "question_id": 48673117, "link": "https://stackoverflow.com/questions/48673117/how-to-understand-and-use-asyncio-in-python-using-postgresql", "title": "How to understand and use asyncio in Python using PostgreSQL?", "body": "<p>I trying to learn how to use the asyncio framework in Python. I have the below code but it is giving the error: </p>\n\n<blockquote>\n  <p>event loop stopped before the future completed.</p>\n</blockquote>\n\n<p>Also please update where to capture the outputs of the code.</p>\n\n<p>Code:</p>\n\n<pre><code>import asyncio\nimport aiopg\n\ndsn = 'dbname=dvdrental user=postgres password=password host=127.0.0.1'\n\n\nasync def go():\n    pool = await aiopg.create_pool(dsn)\n    async with pool.acquire() as conn:\n        async with conn.cursor() as cur:\n            await cur.execute(\"Select * from actor\")\n            ret = []\n            async for row in cur:\n                ret.append(row)\n            assert ret == [(1,)]\n\nloop = asyncio.get_event_loop()\nloop.run_until_complete(go())\n</code></pre>\n"}, {"tags": ["c#", "python", "c++", "opencv", "object-detection"], "answers": [{"comments": [{"owner": {"reputation": 379, "user_id": 8024510, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jYHnczqyqYw/AAAAAAAAAAI/AAAAAAAAAIM/Gtw9S5hc8Yo/photo.jpg?sz=128", "display_name": "Haridu", "link": "https://stackoverflow.com/users/8024510/haridu"}, "edited": false, "score": 0, "creation_date": 1518554569, "post_id": 48678366, "comment_id": 84552249, "body": "I wanted to recognize covers of a books then use that recognition area for extracting book covers and save it. Right now I am just training the haar classifier using images of book covers as positive images and non-book cover images as negatives."}, {"owner": {"reputation": 379, "user_id": 8024510, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jYHnczqyqYw/AAAAAAAAAAI/AAAAAAAAAIM/Gtw9S5hc8Yo/photo.jpg?sz=128", "display_name": "Haridu", "link": "https://stackoverflow.com/users/8024510/haridu"}, "edited": false, "score": 0, "creation_date": 1518573092, "post_id": 48678366, "comment_id": 84558622, "body": "And is it even possible to use SURF or ORB with Haar cascades in this scenario?"}, {"owner": {"reputation": 170, "user_id": 7466822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/667e93c12b64237cc74b6920113abac2?s=128&d=identicon&r=PG&f=1", "display_name": "giobatta912", "link": "https://stackoverflow.com/users/7466822/giobatta912"}, "reply_to_user": {"reputation": 379, "user_id": 8024510, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jYHnczqyqYw/AAAAAAAAAAI/AAAAAAAAAIM/Gtw9S5hc8Yo/photo.jpg?sz=128", "display_name": "Haridu", "link": "https://stackoverflow.com/users/8024510/haridu"}, "edited": false, "score": 0, "creation_date": 1518575141, "post_id": 48678366, "comment_id": 84559108, "body": "Do you want to recognize covers of &quot;ALL&quot; books or only a set of books that is represented in your training data?"}, {"owner": {"reputation": 379, "user_id": 8024510, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jYHnczqyqYw/AAAAAAAAAAI/AAAAAAAAAIM/Gtw9S5hc8Yo/photo.jpg?sz=128", "display_name": "Haridu", "link": "https://stackoverflow.com/users/8024510/haridu"}, "edited": false, "score": 0, "creation_date": 1518644141, "post_id": 48678366, "comment_id": 84595705, "body": "All book preferably."}], "tags": [], "owner": {"reputation": 170, "user_id": 7466822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/667e93c12b64237cc74b6920113abac2?s=128&d=identicon&r=PG&f=1", "display_name": "giobatta912", "link": "https://stackoverflow.com/users/7466822/giobatta912"}, "is_accepted": false, "score": 2, "last_activity_date": 1518068401, "creation_date": 1518068401, "answer_id": 48678366, "question_id": 48673104, "link": "https://stackoverflow.com/questions/48673104/how-to-detect-rotated-object-from-image-using-opencv/48678366#48678366", "title": "How to detect rotated object from image using OpenCV?", "body": "<p>What features are you using to detect your books? Are you training a CNN and deploying it with OpenCV? In that case adding rotation image augmentation to your training would make it easy to detect rotated books. </p>\n\n<p>If you are using traditional computer vision techniques instead, you can try to use some rotation invariant feature extractors like SURF, however, the results will not be as good as using CNNs which are now the state of the art for this kind of problems. </p>\n"}, {"tags": [], "owner": {"reputation": 869, "user_id": 5252807, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c450edfed672155562bf4ee91a8c71bd?s=128&d=identicon&r=PG&f=1", "display_name": "Ozlu", "link": "https://stackoverflow.com/users/5252807/ozlu"}, "is_accepted": false, "score": 1, "last_activity_date": 1518182153, "creation_date": 1518182153, "answer_id": 48706753, "question_id": 48673104, "link": "https://stackoverflow.com/questions/48673104/how-to-detect-rotated-object-from-image-using-opencv/48706753#48706753", "title": "How to detect rotated object from image using OpenCV?", "body": "<p>Firstly, you should get the main theoritical ideas of <a href=\"http://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_calib3d/py_pose/py_pose.html\" rel=\"nofollow noreferrer\"><strong>pose estimation</strong></a> and <a href=\"https://docs.opencv.org/3.0-beta/modules/cudawarping/doc/warping.html\" rel=\"nofollow noreferrer\"><strong>image warping</strong></a>.</p>\n\n<p>You should define some important points of the books (some special and strong features that valid for each types of books) and then you can estimate the pose of the book by using this points. After getting the pose angles, you should warp the image to align books. After book alignment you should perform feature extraction so you can improve the success of book detection by this way. </p>\n\n<p>As a summary, <strong>pose estimation</strong> and <strong>warping (alignment)</strong> are important for these kinf of rotation problems.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 9428221, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Xun Victor", "link": "https://stackoverflow.com/users/9428221/xun-victor"}, "is_accepted": false, "score": 2, "last_activity_date": 1519900862, "creation_date": 1519900862, "answer_id": 49047866, "question_id": 48673104, "link": "https://stackoverflow.com/questions/48673104/how-to-detect-rotated-object-from-image-using-opencv/49047866#49047866", "title": "How to detect rotated object from image using OpenCV?", "body": "<p>Your problem can be perfectly solved using OpenCV and keypoint matching algorithms such as SURF or ORB. You don't really need a classifier. To my experience, such solution using unmodified openCv can scale up to recognize around 10.000 images.</p>\n\n<p>What I would do is:\nOffline: Loop over your book images to generate a database of keypoint descriptors matching each descriptor to the id of the book in which it comes from.\nOnline: Compute the keypoints of the query image and try to match (using  BF, FLANN, or LSH) each of them to a keypoint of the pre-computed database.\nVote for the database book cover which has matched with the most query keypoints.\nTry to compute an homography matrix between selected db book cover and query image to validate match.</p>\n\n<p>ORB, BRISK, SURF, SIFT feature descriptors are all usable for this task, and rotation invariant. ORB and BRISK are faster and a bit less performant.</p>\n\n<p>See this link for simple example:\n<a href=\"https://docs.opencv.org/3.3.0/dc/dc3/tutorial_py_matcher.html\" rel=\"nofollow noreferrer\">https://docs.opencv.org/3.3.0/dc/dc3/tutorial_py_matcher.html</a></p>\n"}], "owner": {"reputation": 379, "user_id": 8024510, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jYHnczqyqYw/AAAAAAAAAAI/AAAAAAAAAIM/Gtw9S5hc8Yo/photo.jpg?sz=128", "display_name": "Haridu", "link": "https://stackoverflow.com/users/8024510/haridu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4498, "favorite_count": 1, "answer_count": 3, "score": 4, "last_activity_date": 1519900862, "creation_date": 1518037061, "question_id": 48673104, "link": "https://stackoverflow.com/questions/48673104/how-to-detect-rotated-object-from-image-using-opencv", "title": "How to detect rotated object from image using OpenCV?", "body": "<p>I have been training OpenCV classifier for recognition of books.The requirement is recognize book from an image. I have used 1000+ images and OpenCV is able to detect books with no rotation. However, when I try to detect books with rotations it does not work properly.So I am wondering if their anyway to detect objects with rotations in images using OpenCV? </p>\n"}, {"tags": ["python", "numpy", "scipy", "openblas"], "comments": [{"owner": {"reputation": 2867, "user_id": 2599709, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/3c565ca54f4e129a36e857b20f5ff86f?s=128&d=identicon&r=PG", "display_name": "Chrispresso", "link": "https://stackoverflow.com/users/2599709/chrispresso"}, "edited": false, "score": 0, "creation_date": 1518037567, "post_id": 48673082, "comment_id": 84344831, "body": "1. Is the server dedicated to just you? If it was heavily tasked with other services at the time it may not have. 2. Do you have access to all cores on the server? i.e. can you ACTUALLY use the maximum parallelism for <code>np.dot</code>"}, {"owner": {"reputation": 917, "user_id": 1692060, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/vxVH1.png?s=128&g=1", "display_name": "Slowpoke", "link": "https://stackoverflow.com/users/1692060/slowpoke"}, "reply_to_user": {"reputation": 2867, "user_id": 2599709, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/3c565ca54f4e129a36e857b20f5ff86f?s=128&d=identicon&r=PG", "display_name": "Chrispresso", "link": "https://stackoverflow.com/users/2599709/chrispresso"}, "edited": false, "score": 0, "creation_date": 1518037767, "post_id": 48673082, "comment_id": 84344944, "body": "Server is on Amazon. <code>top</code> command shows no other processes, the benchmark with awful <code>np.dot</code> is quite different (can be 33ms, 80ms, ...), but is always much bigger than other two. Even if I use only single core, dot product can never be slower than cosine, which is 3x more complicated."}, {"owner": {"reputation": 917, "user_id": 1692060, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/vxVH1.png?s=128&g=1", "display_name": "Slowpoke", "link": "https://stackoverflow.com/users/1692060/slowpoke"}, "reply_to_user": {"reputation": 2867, "user_id": 2599709, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/3c565ca54f4e129a36e857b20f5ff86f?s=128&d=identicon&r=PG", "display_name": "Chrispresso", "link": "https://stackoverflow.com/users/2599709/chrispresso"}, "edited": false, "score": 0, "creation_date": 1518037822, "post_id": 48673082, "comment_id": 84344969, "body": "@ZWiki I am running inside docker container, but can see output of top command from server shell itself."}, {"owner": {"reputation": 917, "user_id": 1692060, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/vxVH1.png?s=128&g=1", "display_name": "Slowpoke", "link": "https://stackoverflow.com/users/1692060/slowpoke"}, "reply_to_user": {"reputation": 2867, "user_id": 2599709, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/3c565ca54f4e129a36e857b20f5ff86f?s=128&d=identicon&r=PG", "display_name": "Chrispresso", "link": "https://stackoverflow.com/users/2599709/chrispresso"}, "edited": false, "score": 0, "creation_date": 1518038487, "post_id": 48673082, "comment_id": 84345291, "body": "@ZWiki Maybe indeed cloud server is somewhat virtual and OpenBlas is somehow sensitive to the real workload? How can I make is working normally then?"}, {"owner": {"reputation": 5208, "user_id": 4045774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c23c0c730b6a9cb71d1ce17838f2beb7?s=128&d=identicon&r=PG&f=1", "display_name": "max9111", "link": "https://stackoverflow.com/users/4045774/max9111"}, "edited": false, "score": 0, "creation_date": 1518090292, "post_id": 48673082, "comment_id": 84366523, "body": "Please measure the performance of at least 1000 iterations. Your results can be missleading. Meassuring the performance with time.time() with a function taking only a few ms is not recommended..."}], "owner": {"reputation": 917, "user_id": 1692060, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/vxVH1.png?s=128&g=1", "display_name": "Slowpoke", "link": "https://stackoverflow.com/users/1692060/slowpoke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 195, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1518050234, "creation_date": 1518037005, "last_edit_date": 1518050234, "question_id": 48673082, "link": "https://stackoverflow.com/questions/48673082/numpy-scipy-very-big-difference-for-np-dot-working-with-nans-on-two-machines", "title": "Numpy, Scipy: very big difference for np.dot working with nans on two machines", "body": "<p>I have two machines - my own and server. The task is to compute cosine distances between many vectors and one given vector. After normalization, the cosine is equivalent to just dot product:</p>\n\n<pre><code>cosine(u,v) = 1.0 - np.dot(u, v) / (norm(u) * norm(v))\n</code></pre>\n\n<p>So I decided to normalize my vectors and have 3x speedup. \nBUT there is one little difference. Some of the vectors can be equal to the vectors of <code>np.nan</code>s:</p>\n\n<pre><code>nullvect = [np.nan]*300\n</code></pre>\n\n<p>This is the essential part of my model. Suppose the following experiment comparing <code>scipy.spatial.distance.cosine</code>, <code>np.dot</code> and dot product from blas library:</p>\n\n<pre><code>import numpy as np\n\nfrom scipy.spatial.distance import cdist\n\n#import blas version\nimport scipy\ngemv = scipy.linalg.get_blas_funcs(\"gemv\") # Numpy somehow does not want to use optimized version. Let's call BLAS directly\ndot = lambda x,y: gemv(1,x,y)\n\n# generate data\nvectors = np.random.randn(1000,300)\n# normalize and write contiguously\nvectors = np.ascontiguousarray([v/np.linalg.norm(v) for v in vectors])\n# set some of them to nans\nnullvect = [np.nan]*300\n# place a lot of nan vectors\nvecs = []\nfor vector in vectors:\n    if np.random.randint(2) == 1:\n        vecs += [nullvect]\n    else:\n        vecs += [vector]        \nvecs = np.ascontiguousarray(vecs)\n# normalize traget vector as well\nvec = np.random.randn(300)\nvec = vec/np.linalg.norm(vec)\n\nimport time\n\ndef eval_func():\n    # cosine distances\n    start = time.time()\n    dists = cdist([vec], vecs, metric='cosine').ravel()\n    end = time.time()\n    print(\"Overall computation took\"+ str((end-start)*10000)+\" ms\")\n    # np.dot distances\n    start = time.time()\n    dists = 1-vecs.dot(vec.T)\n    end = time.time()\n    print(\"Overall computation took\"+ str((end-start)*10000)+\" ms\")\n    # blas distances\n    start = time.time()\n    dists = 1-dot(vecs, vec.T)\n    end = time.time()\n    print(\"Overall computation took\"+ str((end-start)*10000)+\" ms\")\n\neval_func()\n</code></pre>\n\n<p>On my local machine everything is OK - dot product is much more than 3x faster:</p>\n\n<pre><code>Overall computation took 5.55992126465 ms\nOverall computation took 0.340938568115 ms\nOverall computation took 11.9209289551 ms\n</code></pre>\n\n<p>But on server something is wrong - <code>np.dot</code> is a complete trash!</p>\n\n<pre><code>Overall computation took 5.462169647216797 ms\nOverall computation took 81.59875869750977 ms\nOverall computation took 15.769004821777344 ms\n</code></pre>\n\n<p>On both computers running Ubuntu 16.04 numpy 1.14 was installed via pip after OpenBlas was installed via apt-get.</p>\n\n<p>On both computers picture is the same:</p>\n\n<pre><code>&gt;&gt;&gt; np.__config__.show()\nlapack_mkl_info:\n  NOT AVAILABLE\nblas_opt_info:                                                                                                                                                        \n    library_dirs = ['/usr/local/lib']                                                                                                                                 \n    define_macros = [('HAVE_CBLAS', None)]                                                                                                                            \n    language = c                                                                                                                                                      \n    libraries = ['openblas', 'openblas']                                                                                                                              \nlapack_opt_info:                                                                                                                                                      \n    library_dirs = ['/usr/local/lib']                                                                                                                                 \n    define_macros = [('HAVE_CBLAS', None)]                                                                                                                            \n    language = c                                                                                                                                                      \n    libraries = ['openblas', 'openblas']                                                                                                                              \nblis_info:                                                                                                                                                            \n  NOT AVAILABLE                                                                                                                                                       \nopenblas_lapack_info:                                                                                                                                                 \n    library_dirs = ['/usr/local/lib']                                                                                                                                 \n    define_macros = [('HAVE_CBLAS', None)]                                                                                                                            \n    language = c\n    libraries = ['openblas', 'openblas']\nblas_mkl_info:\n  NOT AVAILABLE\nopenblas_info:\n    library_dirs = ['/usr/local/lib']\n    define_macros = [('HAVE_CBLAS', None)]\n    language = c\n    libraries = ['openblas', 'openblas']\n</code></pre>\n\n<p>-</p>\n\n<pre><code># update-alternatives --config libblas.so.3\nThere are 2 choices for the alternative libblas.so.3 (providing /usr/lib/libblas.so.3).\n\n  Selection    Path                                 Priority   Status\n------------------------------------------------------------\n* 0            /usr/lib/openblas-base/libblas.so.3   40        auto mode\n  1            /usr/lib/libblas/libblas.so.3         10        manual mode\n  2            /usr/lib/openblas-base/libblas.so.3   40        manual mode\n</code></pre>\n\n<p>Server runs Python 3.6.2, my local machine - 3.5.2. Without nans in data everything is Ok. </p>\n\n<p>Server is Xeon with 8 processors, my computer is i7 laptop with 4 cores (so server definitely should beat me with parallelism).</p>\n\n<p>EDIT: If I use <code>vectors</code> instead of <code>vecs</code> (no nans), the result is also very stochastic and can be either bigger, or smaller than cosine - in can be 1ms or 7ms and vise versa. The results for two other algorithms are constant.</p>\n\n<p>Some runs without nans (vectors):</p>\n\n<pre><code>Overall computation took5.519390106201172 ms\nOverall computation took1.5783309936523438 ms\nOverall computation took8.22305679321289 ms\n&gt;&gt;&gt; eval_func()\nOverall computation took5.586147308349609 ms\nOverall computation took2.3889541625976562 ms\nOverall computation took8.22305679321289 ms\n&gt;&gt;&gt; eval_func()\nOverall computation took5.342960357666016 ms\nOverall computation took8.533000946044922 ms\nOverall computation took8.122920989990234 ms\n&gt;&gt;&gt; eval_func()\nOverall computation took5.633831024169922 ms\nOverall computation took1.8835067749023438 ms\nOverall computation took8.115768432617188 ms\n&gt;&gt;&gt; eval_func()\nOverall computation took5.548000335693359 ms\nOverall computation took1.7952919006347656 ms\nOverall computation took8.14199447631836 ms\n&gt;&gt;&gt; eval_func()\nOverall computation took5.550384521484375 ms\nOverall computation took2.02178955078125 ms\nOverall computation took8.759498596191406 ms\n&gt;&gt;&gt; eval_func()\nOverall computation took5.5217742919921875 ms\nOverall computation took13.997554779052734 ms\nOverall computation took8.320808410644531 ms\n&gt;&gt;&gt; eval_func()\nOverall computation took5.490779876708984 ms\nOverall computation took2.6559829711914062 ms\nOverall computation took9.52005386352539 ms\n&gt;&gt;&gt; eval_func()\nOverall computation took5.395412445068359 ms\nOverall computation took2.0003318786621094 ms\nOverall computation took8.37564468383789 ms\n&gt;&gt;&gt; eval_func()\nOverall computation took5.440711975097656 ms\nOverall computation took2.224445343017578 ms\nOverall computation took8.237361907958984 ms\n</code></pre>\n\n<p>Some runs with nans (vecs):</p>\n\n<pre><code>&gt;&gt;&gt; eval_func()\nOverall computation took5.4454803466796875 ms\nOverall computation took26.26657485961914 ms\nOverall computation took7.8868865966796875 ms\n&gt;&gt;&gt; eval_func()\nOverall computation took5.366802215576172 ms\nOverall computation took19.97232437133789 ms\nOverall computation took7.729530334472656 ms\n&gt;&gt;&gt; eval_func()\nOverall computation took5.433559417724609 ms\nOverall computation took19.736289978027344 ms\nOverall computation took7.9345703125 ms\n&gt;&gt;&gt; eval_func()\nOverall computation took5.447864532470703 ms\nOverall computation took18.61095428466797 ms\nOverall computation took8.14676284790039 ms\n&gt;&gt;&gt; eval_func()\nOverall computation took5.567073822021484 ms\nOverall computation took1.926422119140625 ms\nOverall computation took7.729530334472656 ms\n&gt;&gt;&gt; eval_func()\nOverall computation took5.640983581542969 ms\nOverall computation took20.401477813720703 ms\nOverall computation took7.8868865966796875 ms\n</code></pre>\n\n<hr>\n\n<p>EDIT 2: </p>\n\n<p>Setting</p>\n\n<pre><code>import os\nos.environ['OMP_NUM_THREADS']='1'\n</code></pre>\n\n<p>didn't help</p>\n\n<p>Maybe I can switch to some another library? </p>\n\n<hr>\n\n<p>EDIT3:</p>\n\n<p>On both machines</p>\n\n<pre><code>&gt;&gt;&gt; import inspect\n&gt;&gt;&gt; inspect.getmodule(np.dot)\n&lt;module 'numpy.core.multiarray' from '/usr/local/lib/python3.6/site-packages/numpy/core/multiarray.cpython-36m-x86_64-linux-gnu.so'&gt;\n</code></pre>\n\n<p>However, looks like <a href=\"https://stackoverflow.com/a/11856667/1692060\">this can be different</a></p>\n\n<hr>\n\n<p>EDIT 4: Greatest surprise: <code>np.inner()</code> seems to work Ok (it's equivalent to <code>np.dot</code> for matrix-vector multiplication, but a bit slower):</p>\n\n<pre><code>def eval_func():\n    # cosine distances\n    start = time.time()\n    dists = cdist([vec], vecs, metric='cosine').ravel()\n    end = time.time()\n    print(\"Overall computation took\"+ str((end-start)*10000)+\" ms\")\n    # np.dot distances\n    start = time.time()\n    dists = 1-vecs.dot(vec.T)\n    end = time.time()\n    print(\"Overall computation took\"+ str((end-start)*10000)+\" ms\")\n    # blas distances\n    start = time.time()\n    dists = 1-dot(vecs, vec.T)\n    end = time.time()\n    print(\"Overall computation took\"+ str((end-start)*10000)+\" ms\")\n\n\n    start = time.time()\n    dists = 1-np.inner(vecs, vec.T)\n    end = time.time()\n    print(\"Overall computation took\"+ str((end-start)*10000)+\" ms\")\n\neval_func()\n\n\n&gt;&gt;&gt; eval_func()\nOverall computation took5.500316619873047 ms\nOverall computation took37.69874572753906 ms\nOverall computation took8.03232192993164 ms\nOverall computation took0.6771087646484375 ms\n&gt;&gt;&gt; eval_func()\nOverall computation took5.517005920410156 ms\nOverall computation took1.811981201171875 ms\nOverall computation took7.5435638427734375 ms\nOverall computation took0.6580352783203125 ms\n&gt;&gt;&gt; eval_func()\nOverall computation took5.688667297363281 ms\nOverall computation took38.02061080932617 ms\nOverall computation took7.672309875488281 ms\nOverall computation took0.5245208740234375 ms\n&gt;&gt;&gt; eval_func()\nOverall computation took5.614757537841797 ms\nOverall computation took38.6500358581543 ms\nOverall computation took8.053779602050781 ms\nOverall computation took0.6699562072753906 ms\n&gt;&gt;&gt; eval_func()\nOverall computation took5.481243133544922 ms\nOverall computation took39.615631103515625 ms\nOverall computation took7.724761962890625 ms\nOverall computation took0.5125999450683594 ms\n&gt;&gt;&gt; eval_func()\nOverall computation took5.562305450439453 ms\nOverall computation took2.0051002502441406 ms\nOverall computation took7.450580596923828 ms\nOverall computation took0.5030632019042969 ms\n&gt;&gt;&gt; eval_func()\nOverall computation took5.252361297607422 ms\nOverall computation took3.883838653564453 ms\nOverall computation took7.433891296386719 ms\nOverall computation took0.705718994140625 ms\n</code></pre>\n\n<hr>\n\n<p>EDIT5: So I wanted to replace <code>cdist</code> with <code>np.inner</code> in my program and got slowdown! Here are comparison of time results in ms between cdist (first) and np.inner(second). The last tuple is the shape of vectors array:</p>\n\n<pre><code>2018-02-07 23:12:37,609 0.6237030029296875 20.6756591796875 (1381, 300)\n2018-02-07 23:12:37,612 0.6270408630371094 0.7233619689941406 (1381, 300)\n2018-02-07 23:12:37,614 2.070188522338867 4.981040954589844 (2879, 300)\n2018-02-07 23:12:37,630 19.373416900634766 28.1679630279541 (2387, 300)\n2018-02-07 23:12:37,641 0.6058216094970703 28.65886688232422 (1007, 300)\n2018-02-07 23:12:37,642 1.2252330780029297 12.749433517456055 (2879, 300)\n2018-02-07 23:12:37,649 29.929637908935547 76.58910751342773 (9151, 300)\n2018-02-07 23:12:37,649 1.0759830474853516 15.654802322387695 (2387, 300)\n2018-02-07 23:12:37,653 0.5512237548828125 6.318569183349609 (1007, 300)\n2018-02-07 23:12:37,664 0.4935264587402344 6.627321243286133 (1007, 300)\n2018-02-07 23:12:37,670 1.275777816772461 11.78598403930664 (2879, 300)\n2018-02-07 23:12:37,679 0.47206878662109375 10.010242462158203 (1007, 300)\n2018-02-07 23:12:37,679 0.46634674072265625 16.28565788269043 (922, 300)\n2018-02-07 23:12:37,683 0.7443428039550781 29.844284057617188 (1381, 300)\n2018-02-07 23:12:37,686 26.117801666259766 36.93413734436035 (9929, 300)\n2018-02-07 23:12:37,693 1.2125968933105469 13.280630111694336 (2879, 300)\n2018-02-07 23:12:37,698 0.4277229309082031 6.974458694458008 (922, 300)\n2018-02-07 23:12:37,698 0.5869865417480469 8.502006530761719 (1381, 300)\n2018-02-07 23:12:37,708 0.48828125 22.032976150512695 (1007, 300)\n2018-02-07 23:12:37,710 0.4360675811767578 6.644725799560547 (922, 300)\n2018-02-07 23:12:37,713 0.6110668182373047 8.195638656616211 (1381, 300)\n2018-02-07 23:12:37,719 1.1529922485351562 12.442350387573242 (2879, 300)\n2018-02-07 23:12:37,720 0.4718303680419922 5.584001541137695 (1007, 300)\n2018-02-07 23:12:37,725 0.46443939208984375 13.801336288452148 (922, 300)\n2018-02-07 23:12:37,729 0.5846023559570312 2.321958541870117 (1381, 300)\n2018-02-07 23:12:37,737 0.4661083221435547 4.40669059753418 (922, 300)\n2018-02-07 23:12:37,746 0.09751319885253906 0.033855438232421875 (4, 300)\n2018-02-07 23:12:37,749 0.4220008850097656 6.46662712097168 (922, 300)\n2018-02-07 23:12:37,750 0.07700920104980469 0.030040740966796875 (4, 300)\n2018-02-07 23:12:37,751 0.16117095947265625 26.17502212524414 (62, 300)\n2018-02-07 23:12:37,751 0.14591217041015625 19.942522048950195 (37, 300)\n2018-02-07 23:12:37,752 0.0743865966796875 0.029325485229492188 (4, 300)\n2018-02-07 23:12:37,753 0.1418590545654297 1.1310577392578125 (37, 300)\n2018-02-07 23:12:37,753 0.07486343383789062 0.019788742065429688 (4, 300)\n2018-02-07 23:12:37,754 0.10466575622558594 0.9295940399169922 (37, 300)\n2018-02-07 23:12:37,755 0.07486343383789062 0.029802322387695312 (4, 300)\n2018-02-07 23:12:37,755 0.10275840759277344 0.8199214935302734 (37, 300)\n2018-02-07 23:12:37,757 0.10943412780761719 0.7965564727783203 (37, 300)\n2018-02-07 23:12:37,758 0.11110305786132812 0.8292198181152344 (37, 300)\n2018-02-07 23:12:37,758 0.07224082946777344 0.029325485229492188 (4, 300)\n2018-02-07 23:12:37,765 8.567333221435547 22.03059196472168 (9929, 300)\n2018-02-07 23:12:37,771 0.12874603271484375 17.62080192565918 (62, 300)\n2018-02-07 23:12:37,776 0.12159347534179688 2.850055694580078 (62, 300)\n2018-02-07 23:12:37,782 4.766225814819336 44.742584228515625 (9151, 300)\n2018-02-07 23:12:37,783 0.14066696166992188 4.610538482666016 (62, 300)\n2018-02-07 23:12:37,786 0.12326240539550781 0.9648799896240234 (62, 300)\n2018-02-07 23:12:37,788 0.12063980102539062 0.9310245513916016 (62, 300)\n2018-02-07 23:12:37,814 0.26988983154296875 26.521682739257812 (428, 300)\n</code></pre>\n\n<p>I just don't understand what's going on...</p>\n\n<hr>\n\n<p>EDIT6: Reinstalled docker image with atlas library, but newly installed numpy still says in <code>np.__config__.show()</code> that it uses openblas. Which is not even present in the system.</p>\n\n<hr>\n\n<p>EDIT7: Rebuild numpy to use atlas. Now the results for <code>np.dot</code> and <code>np.inner</code> are at last stable, though only two times better than for <code>scipy cdist</code>. So it seems to be openblas issue on Amazon ec2 server. The results are entirely stochastic for it. </p>\n\n<p>I've checked the situation outside docker, it's the same.</p>\n"}, {"tags": ["python", "pandas", "datetime", "dataframe", "jupyter-notebook"], "comments": [{"owner": {"reputation": 3952, "user_id": 6696657, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c78dbc81728388bd956e9d4f4c1a6759?s=128&d=identicon&r=PG&f=1", "display_name": "MattR", "link": "https://stackoverflow.com/users/6696657/mattr"}, "edited": false, "score": 0, "creation_date": 1518037397, "post_id": 48673059, "comment_id": 84344724, "body": "you&#39;re probably looking for a solution with <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.to_datetime.html\" rel=\"nofollow noreferrer\"><code>to_datetime()</code></a>"}], "answers": [{"comments": [{"owner": {"reputation": 11919, "user_id": 9183344, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U7r5r.png?s=128&g=1", "display_name": "r.ook", "link": "https://stackoverflow.com/users/9183344/r-ook"}, "edited": false, "score": 1, "creation_date": 1518039509, "post_id": 48673325, "comment_id": 84345784, "body": "Great answer.  I was manually converting the <code>datetime</code> but this is much better.  One comment is the last drop might be a bit hard to read for some, I would have used <code>df.drop(columns=list(range(6)), inplace=True)</code> which is a more verbose."}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "reply_to_user": {"reputation": 11919, "user_id": 9183344, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U7r5r.png?s=128&g=1", "display_name": "r.ook", "link": "https://stackoverflow.com/users/9183344/r-ook"}, "edited": false, "score": 1, "creation_date": 1518039797, "post_id": 48673325, "comment_id": 84345915, "body": "@Idlehands, thank you for your comment - i&#39;ve added it to the answer!"}, {"owner": {"reputation": 105, "user_id": 9329765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25539b29c6dbe15612c92429e0b803b7?s=128&d=identicon&r=PG&f=1", "display_name": "spencerchad", "link": "https://stackoverflow.com/users/9329765/spencerchad"}, "edited": false, "score": 0, "creation_date": 1518040391, "post_id": 48673325, "comment_id": 84346189, "body": "That works! But.. can you explain why you set &#39;cols&#39;? Are these keys that are built into to_datetime? How come I cannot just send the columns I want to convert to datetime into to_datetime directly? Thanks!"}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "reply_to_user": {"reputation": 105, "user_id": 9329765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25539b29c6dbe15612c92429e0b803b7?s=128&d=identicon&r=PG&f=1", "display_name": "spencerchad", "link": "https://stackoverflow.com/users/9329765/spencerchad"}, "edited": false, "score": 0, "creation_date": 1518040477, "post_id": 48673325, "comment_id": 84346236, "body": "@spencerchad, it&#39;s already in the answer - Pandas <code>pd.to_datetime()</code> expect specific column names - <code>The keys can be common abbreviations like [\u2018year\u2019, \u2018month\u2019, \u2018day\u2019, \u2018minute\u2019, \u2018second\u2019, \u2018ms\u2019, \u2018us\u2019, \u2018ns\u2019]) or plurals of the same</code>"}, {"owner": {"reputation": 105, "user_id": 9329765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25539b29c6dbe15612c92429e0b803b7?s=128&d=identicon&r=PG&f=1", "display_name": "spencerchad", "link": "https://stackoverflow.com/users/9329765/spencerchad"}, "edited": false, "score": 0, "creation_date": 1518040993, "post_id": 48673325, "comment_id": 84346482, "body": "Right. That is what I wanted to clarify as I did not fully understand, that pd.to_datetime() requires an actual name of a column and you cannot just use a reference to the position. Thank you."}, {"owner": {"reputation": 105, "user_id": 9329765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25539b29c6dbe15612c92429e0b803b7?s=128&d=identicon&r=PG&f=1", "display_name": "spencerchad", "link": "https://stackoverflow.com/users/9329765/spencerchad"}, "reply_to_user": {"reputation": 11919, "user_id": 9183344, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U7r5r.png?s=128&g=1", "display_name": "r.ook", "link": "https://stackoverflow.com/users/9183344/r-ook"}, "edited": false, "score": 0, "creation_date": 1518041288, "post_id": 48673325, "comment_id": 84346610, "body": "@MaxU @Idlehands Adding <code>df.drop(columns=df.columns[:6], inplace=True)</code> results in this error for me.. <code>------------------------------------------------------------&zwnj;&#8203;--------------- TypeError                                 Traceback (most recent call last) &lt;ipython-input-18-dfa197682a1b&gt; in &lt;module&gt;()       3 df[&#39;date&#39;]=pd.to_datetime(df.iloc[:, :6].rename(columns=lambda c: cols[c]))       4  ----&gt; 5 df.drop(columns=df.columns[0], inplace=True)  TypeError: drop() got an unexpected keyword argument &#39;columns&#39;&#39; </code>"}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "reply_to_user": {"reputation": 105, "user_id": 9329765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25539b29c6dbe15612c92429e0b803b7?s=128&d=identicon&r=PG&f=1", "display_name": "spencerchad", "link": "https://stackoverflow.com/users/9329765/spencerchad"}, "edited": false, "score": 1, "creation_date": 1518041378, "post_id": 48673325, "comment_id": 84346638, "body": "@spencerchad, most probably you have an older Pandas version - i&#39;ve tested it under Pandas 0.22.0"}], "tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": true, "score": 3, "last_activity_date": 1518039784, "last_edit_date": 1518039784, "creation_date": 1518037932, "answer_id": 48673325, "question_id": 48673059, "link": "https://stackoverflow.com/questions/48673059/getting-datetime-from-space-seperated-dat-file-python-pandas/48673325#48673325", "title": "Getting datetime from space seperated .dat file - python/pandas", "body": "<p>Demo:</p>\n\n<p>when you read a CSV/dat file without column names (header), you'll get a DF with numerical column names like as follows:</p>\n\n<pre><code>In [139]: df\nOut[139]:\n        0    1    2    3    4    5          6          7          8\n0  2014.0  1.0  1.0  0.0  0.0  0.0   2.745458  183.33542 -33.580352\n1  2014.0  1.0  2.0  0.0  0.0  0.0  -6.133063  251.87292 -13.752231\n2  2014.0  1.0  3.0  0.0  0.0  0.0 -30.905729  212.95208 -24.507273\n</code></pre>\n\n<p>columns:</p>\n\n<pre><code>In [140]: df.columns\nOut[140]: Int64Index([0, 1, 2, 3, 4, 5, 6, 7, 8], dtype='int64')\n</code></pre>\n\n<p><a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.to_datetime.html\" rel=\"nofollow noreferrer\"><code>pd.to_datetime</code></a> can assemble datetime from multiple columns:</p>\n\n<blockquote>\n  <p>Assembling a datetime from multiple columns of a DataFrame. The keys\n  can be common abbreviations like <code>[\u2018year\u2019, \u2018month\u2019, \u2018day\u2019, \u2018minute\u2019, \u2018second\u2019, \u2018ms\u2019, \u2018us\u2019, \u2018ns\u2019]</code>) or plurals of the same</p>\n</blockquote>\n\n<pre><code>In [141]: cols = ['year','month','day','hour','minute','second']\n\nIn [142]: df['date'] = pd.to_datetime(df.iloc[:, :6].rename(columns=lambda c: cols[c]))\n</code></pre>\n\n<p>dropping first 6 columns:</p>\n\n<pre><code>In [143]: df = df.iloc[:, 6:]\n\nIn [144]: df\nOut[144]:\n           6          7          8       date\n0   2.745458  183.33542 -33.580352 2014-01-01\n1  -6.133063  251.87292 -13.752231 2014-01-02\n2 -30.905729  212.95208 -24.507273 2014-01-03\n</code></pre>\n\n<p>alternatively (<a href=\"https://stackoverflow.com/questions/48673059/getting-datetime-from-space-seperated-dat-file-python-pandas/48673325?noredirect=1#comment84345784_48673325\">thanks @Idlehands for the idea</a>) we can drop it this way:</p>\n\n<pre><code>df = df.drop(columns=df.columns[:6])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 527, "user_id": 7732344, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cM27u.jpg?s=128&g=1", "display_name": "romulomadu", "link": "https://stackoverflow.com/users/7732344/romulomadu"}, "is_accepted": false, "score": 0, "last_activity_date": 1518047154, "creation_date": 1518047154, "answer_id": 48675226, "question_id": 48673059, "link": "https://stackoverflow.com/questions/48673059/getting-datetime-from-space-seperated-dat-file-python-pandas/48675226#48675226", "title": "Getting datetime from space seperated .dat file - python/pandas", "body": "<p>you can try this:</p>\n\n<pre><code>import pandas as pd\nfrom datetime import datetime\n\ndf = pd.read_csv('daily.dat', sep='\\s+', header=None)\n\ndef to_datetime(year,month,day,hour,minute,second):\n    return datetime(int(year),int(month),int(day),int(hour),int(minute),int(second))\n\ndf['datetime'] = df.apply(lambda x: to_datetime(x[0], x[1], x[2], x[3], x[4], x[5]), axis=1).apply(str)\n\ndf.drop(list(range(6)),1,inplace=True)\n\nprint(df)\n\n# output:\n#           6          7          8             datetime\n#0   2.745458  183.33542 -33.580352  2014-01-01 00:00:00\n#1  -6.133063  251.87292 -13.752231  2014-01-02 00:00:00\n#2 -30.905729  212.95208 -24.507273  2014-01-03 00:00:00\n</code></pre>\n"}], "owner": {"reputation": 105, "user_id": 9329765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25539b29c6dbe15612c92429e0b803b7?s=128&d=identicon&r=PG&f=1", "display_name": "spencerchad", "link": "https://stackoverflow.com/users/9329765/spencerchad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 279, "favorite_count": 0, "closed_date": 1518051537, "accepted_answer_id": 48673325, "answer_count": 2, "score": 1, "last_activity_date": 1518047154, "creation_date": 1518036872, "last_edit_date": 1518042186, "question_id": 48673059, "link": "https://stackoverflow.com/questions/48673059/getting-datetime-from-space-seperated-dat-file-python-pandas", "closed_reason": "Duplicate", "title": "Getting datetime from space seperated .dat file - python/pandas", "body": "<p>I am trying to import a space separated .dat file using pandas and strip values to make a date. The data looks like this (three rows of data taken from the entire dataset for reference):</p>\n\n<pre><code>2.0140000e+003  1.0000000e+000  1.0000000e+000  0.0000000e+000  0.0000000e+000 0.0000000e+000  2.7454583e+000  1.8333542e+002 -3.3580352e+001\n2.0140000e+003  1.0000000e+000  2.0000000e+000  0.0000000e+000  0.0000000e+000  0.0000000e+000 -6.1330625e+000  2.5187292e+002 -1.3752231e+001\n2.0140000e+003  1.0000000e+000  3.0000000e+000  0.0000000e+000  0.0000000e+000  0.0000000e+000 -3.0905729e+001  2.1295208e+002 -2.4507273e+001\n</code></pre>\n\n<p>The first six numbers make up the date (year, month, day, hour, minute, second).</p>\n\n<p>I can import the data using:</p>\n\n<pre><code>df = pd.read_csv('daily.dat', sep='\\s+', header=None)\n</code></pre>\n\n<p>and it is separated fine.</p>\n\n<p>However, I would like to strip the first six entries of the row into a date. For example, from row one the first six numbers (or first six columns after importing to <code>df</code>) should make:</p>\n\n<pre><code>2014-01-01 00:00:00\n</code></pre>\n\n<p>Help?</p>\n"}, {"tags": ["python", "virtualenv"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 9285810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a991c77abe14a9da6562cc26a624b34?s=128&d=identicon&r=PG&f=1", "display_name": "Jaaks", "link": "https://stackoverflow.com/users/9285810/jaaks"}, "edited": false, "score": 0, "creation_date": 1518047916, "post_id": 48673149, "comment_id": 84349115, "body": "It is in the scripts file. and I did try python -m virtualenv I get the &#39;no module named virtualenv."}, {"owner": {"reputation": 125, "user_id": 4598796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebc9278b5789acd6930b3ccf8c5337a2?s=128&d=identicon&r=PG&f=1", "display_name": "Dan McGrath", "link": "https://stackoverflow.com/users/4598796/dan-mcgrath"}, "reply_to_user": {"reputation": 11, "user_id": 9285810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a991c77abe14a9da6562cc26a624b34?s=128&d=identicon&r=PG&f=1", "display_name": "Jaaks", "link": "https://stackoverflow.com/users/9285810/jaaks"}, "edited": false, "score": 0, "creation_date": 1518097422, "post_id": 48673149, "comment_id": 84371459, "body": "can you try adding the <code>Scripts</code> folder to your path and then running <code>virtualenv</code> in the terminal?"}], "tags": [], "owner": {"reputation": 125, "user_id": 4598796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebc9278b5789acd6930b3ccf8c5337a2?s=128&d=identicon&r=PG&f=1", "display_name": "Dan McGrath", "link": "https://stackoverflow.com/users/4598796/dan-mcgrath"}, "is_accepted": false, "score": 1, "last_activity_date": 1518097693, "last_edit_date": 1518097693, "creation_date": 1518037243, "answer_id": 48673149, "question_id": 48673058, "link": "https://stackoverflow.com/questions/48673058/how-do-you-get-virtualenv-to-work-in-windows/48673149#48673149", "title": "how do you get virtualenv to work in windows", "body": "<p>It sounds like it is not in your path. Can you go to your python installation directory and look for a folder called <code>Scripts</code>? There should be a <code>virtualenv.exe</code> script there. If it is there, add the path to that folder to your <code>path</code> environment variable. </p>\n\n<p>You can also try <code>python -m virtualenv</code> and see what that returns.</p>\n\n<p>See my <code>Scripts</code> folder (notice virtualenv at the bottom):\n<a href=\"https://i.stack.imgur.com/Hh0Tx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Hh0Tx.png\" alt=\"my Scripts folder\"></a></p>\n"}], "owner": {"reputation": 11, "user_id": 9285810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a991c77abe14a9da6562cc26a624b34?s=128&d=identicon&r=PG&f=1", "display_name": "Jaaks", "link": "https://stackoverflow.com/users/9285810/jaaks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1518097693, "creation_date": 1518036868, "question_id": 48673058, "link": "https://stackoverflow.com/questions/48673058/how-do-you-get-virtualenv-to-work-in-windows", "title": "how do you get virtualenv to work in windows", "body": "<p>On windows 10, <strong><em>virtualenv</em></strong> installs but that's where it stops. Using the \"one basic command\", \"virtualenv MyPathandFile\", only gives the error: \"<em>'virtualenv' is not recognized as an internal or external command\"</em>. </p>\n\n<p>Tried \"python virtualenv\" or variations of it doesn't work either. These give the message: <em>\"no such file or directory\"</em>  Are there other packages required? It was installed in an administrator cmd window. Tried uninstalling/reinstalling as well.</p>\n\n<p>And finally, is there another, easier way to make virtual environments?</p>\n"}, {"tags": ["python", "pandas", "iteration"], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 6939773, "user_type": "registered", "accept_rate": 29, "profile_image": "https://graph.facebook.com/1548042895221875/picture?type=large", "display_name": "Warthog1", "link": "https://stackoverflow.com/users/6939773/warthog1"}, "edited": false, "score": 0, "creation_date": 1518037568, "post_id": 48673122, "comment_id": 84344834, "body": "You are a hero and an angel wrapped into one."}, {"owner": {"reputation": 447, "user_id": 2623625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hZSYP.jpg?s=128&g=1", "display_name": "Todd Vanyo", "link": "https://stackoverflow.com/users/2623625/todd-vanyo"}, "edited": false, "score": 1, "creation_date": 1563215854, "post_id": 48673122, "comment_id": 100618462, "body": "df.ne \u2799 not equal, takes another dataframe as input  df.shift() \u2799 shifts the index by 1 (default)"}], "tags": [], "owner": {"reputation": 58812, "user_id": 2137255, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/zzmt4.png?s=128&g=1", "display_name": "Zero", "link": "https://stackoverflow.com/users/2137255/zero"}, "is_accepted": false, "score": 12, "last_activity_date": 1518037767, "last_edit_date": 1518037767, "creation_date": 1518037117, "answer_id": 48673122, "question_id": 48673046, "link": "https://stackoverflow.com/questions/48673046/get-index-where-value-changes-in-pandas-dataframe-column/48673122#48673122", "title": "Get index where value changes in pandas dataframe column", "body": "<p>Use</p>\n\n<pre><code>In [91]: df.ne(df.shift()).apply(lambda x: x.index[x].tolist())\nOut[91]:\nGroup 1             [0, 4]\nGroup 2       [0, 2, 4, 6]\nProduct ID       [0, 3, 6]\ndtype: object\n\nIn [92]: df.ne(df.shift()).filter(like='Group').apply(lambda x: x.index[x].tolist())\nOut[92]:\nGroup 1          [0, 4]\nGroup 2    [0, 2, 4, 6]\ndtype: object\n</code></pre>\n\n<p>Also for dict,</p>\n\n<pre><code>In [107]: {k: s.index[s].tolist() for k, s in df.ne(df.shift()).filter(like='Group').items()}\nOut[107]: {'Group 1': [0L, 4L], 'Group 2': [0L, 2L, 4L, 6L]}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 103, "user_id": 6939773, "user_type": "registered", "accept_rate": 29, "profile_image": "https://graph.facebook.com/1548042895221875/picture?type=large", "display_name": "Warthog1", "link": "https://stackoverflow.com/users/6939773/warthog1"}, "edited": false, "score": 1, "creation_date": 1518037725, "post_id": 48673255, "comment_id": 84344921, "body": "This worked beautifully as well. This site makes me so happy sometimes. Thank you!"}], "tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": false, "score": 4, "last_activity_date": 1580204013, "last_edit_date": 1580204013, "creation_date": 1518037631, "answer_id": 48673255, "question_id": 48673046, "link": "https://stackoverflow.com/questions/48673046/get-index-where-value-changes-in-pandas-dataframe-column/48673255#48673255", "title": "Get index where value changes in pandas dataframe column", "body": "<p>This is one non-pandas solution. I like it because it is intuitive and requires no understanding of the large <code>pandas</code> library.</p>\n\n<pre><code>changes = {}\n\nfor col in df.columns:\n    changes[col] = [0] + [idx for idx, (i, j) in enumerate(zip(df[col], df[col][1:]), 1) if i != j]\n\n# {'Group 1': [0, 4], 'Group 2': [0, 2, 4, 6], 'Product ID': [0, 3, 6]}\n</code></pre>\n"}], "owner": {"reputation": 103, "user_id": 6939773, "user_type": "registered", "accept_rate": 29, "profile_image": "https://graph.facebook.com/1548042895221875/picture?type=large", "display_name": "Warthog1", "link": "https://stackoverflow.com/users/6939773/warthog1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3916, "favorite_count": 5, "answer_count": 2, "score": 5, "last_activity_date": 1580204013, "creation_date": 1518036814, "question_id": 48673046, "link": "https://stackoverflow.com/questions/48673046/get-index-where-value-changes-in-pandas-dataframe-column", "title": "Get index where value changes in pandas dataframe column", "body": "<p>I am trying to expand my pandas skills. I have a pandas dataframe that looks like this :</p>\n\n<pre><code>df\n\n      Group 1     Group 2            Product ID\n0   Products      International      X11\n1   Products      International      X11\n2   Products      Domestic           X11\n3   Products      Domestic           X23\n4   Services      Professional       X23\n5   Services      Professional       X23\n6   Services      Analytics          X25\n</code></pre>\n\n<p>I am trying to use some pandas functionality to get the index where the values of Group 1 and Group 2 change. I understand that I will probably have to go column by column, and append these indices into different lists. </p>\n\n<p>I have referenced this question <a href=\"https://stackoverflow.com/questions/43524953/find-index-where-elements-change-value-pandas-dataframe\">Find index where elements change value pandas dataframe</a> which was the closest similar question that I can find. </p>\n\n<p>I am trying to get an output like this: </p>\n\n<pre><code> Group 1 changes = [0,4]\n Group 2 changes = [0,2,4,6]\n</code></pre>\n\n<p>Is there any sort of built in functionality that pandas has that can quickly reference if two values in a column are the same, and then grab that index?</p>\n\n<p>All of my data is sorted by group, so shouldn't run into any problems if the solution does involve iterating row by row. </p>\n\n<p>Any help is much appreciated! </p>\n"}, {"tags": ["python", "dask"], "answers": [{"tags": [], "owner": {"reputation": 47893, "user_id": 616616, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/8749ec52cee260c4c1f67f2dec29d957?s=128&d=identicon&r=PG", "display_name": "MRocklin", "link": "https://stackoverflow.com/users/616616/mrocklin"}, "is_accepted": true, "score": 1, "last_activity_date": 1518037909, "creation_date": 1518037909, "answer_id": 48673319, "question_id": 48673015, "link": "https://stackoverflow.com/questions/48673015/dask-bag-map-partitions-function-receives-a-generator-instead-of-a-list/48673319#48673319", "title": "Dask.bag.map_partitions function receives a generator instead of a list", "body": "<p>Yes, your understanding is correct that partitions within a dask bag are generally finite generators rather than lists.  This allows them to operate in less memory.  </p>\n\n<p>If you want to always interact with lists then you can, as you suggest, call <code>list</code> on the input or else call a <code>map_partitions(list)</code> call in between your operations.</p>\n\n<p>Optimizations like <code>lazify_task</code> and <code>reify</code> are generally considered internal and can change at any time.  I don't recommend building applications that depend on them.  This is also partially why they have not been prioritized for documentation.</p>\n"}], "owner": {"reputation": 2461, "user_id": 1146713, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/RrLyJ.png?s=128&g=1", "display_name": "NirIzr", "link": "https://stackoverflow.com/users/1146713/nirizr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "accepted_answer_id": 48673319, "answer_count": 1, "score": 1, "last_activity_date": 1518038694, "creation_date": 1518036687, "last_edit_date": 1518038694, "question_id": 48673015, "link": "https://stackoverflow.com/questions/48673015/dask-bag-map-partitions-function-receives-a-generator-instead-of-a-list", "title": "Dask.bag.map_partitions function receives a generator instead of a list", "body": "<p>I'm running a dask graph that looks something like this:</p>\n\n<pre><code>dask.bag.from_delayed(...).pluck(FEATURE_NAME).map(map_func).map_paritions(part_func)\n</code></pre>\n\n<p>And I'm having errors inside the execution of <code>part_func</code>, which turns out to be receiving generators instead of the bag items <code>map_func</code> is returning.</p>\n\n<p>This felt like a graph optimization and I did find <code>lazify_task</code> and figured that it has something to do with the issue, as well as the <code>reify</code> graph nodes (which I couldn't find any documentation for). </p>\n\n<p>While adding a <code>values = list(values)</code> line at the beginning of <code>part_func</code> seems to solve the issue at hand and gets my graph going, I feel like I may be missing something here about the internal implementation, optimization and/or approach towards building a graph.</p>\n"}, {"tags": ["python", "regex", "syntax", "duplicates", "repeat"], "answers": [{"tags": [], "owner": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "is_accepted": false, "score": 2, "last_activity_date": 1518037222, "creation_date": 1518037222, "answer_id": 48673144, "question_id": 48672985, "link": "https://stackoverflow.com/questions/48672985/regex-in-python-matching-duplicates-of-optional-substrings/48673144#48673144", "title": "Regex in python: matching duplicates of optional substrings", "body": "<p>If you are still <em>learning regular expressions</em> (to be honest, later as well), get in the habit of using the <code>verbose</code> mode as often as possible, it makes for better code and more readable expressions.  </p>\n\n<p>That said, you could use</p>\n\n<pre><code>^\n(disk|spheroid)\nLineLuminosity:\n([^:]+):\n([^:]+):\nz([\\d\\.]+)\n((?::contam_[^:]+)+)?\n(:recent)?\n(:dust[^:]*)?\n</code></pre>\n\n<p>Just changed the order a bit and used a non-capturing group inside he <code>contam</code> part, see <a href=\"https://regex101.com/r/8G5rOM/1/\" rel=\"nofollow noreferrer\"><strong>a demo on regex101.com</strong></a>.</p>\n"}, {"tags": [], "owner": {"reputation": 206726, "user_id": 5459839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iehrR.jpg?s=128&g=1", "display_name": "trincot", "link": "https://stackoverflow.com/users/5459839/trincot"}, "is_accepted": false, "score": 0, "last_activity_date": 1518037840, "creation_date": 1518037840, "answer_id": 48673301, "question_id": 48672985, "link": "https://stackoverflow.com/questions/48672985/regex-in-python-matching-duplicates-of-optional-substrings/48673301#48673301", "title": "Regex in python: matching duplicates of optional substrings", "body": "<p>You could capture all of those <code>contam_</code> with <code>((?::contam_[^:]+)*)</code>: this will capture all of them in one group. Then launch a second regular expression, apply it just on that match alone, and use that result as a nested list within the first results:</p>\n\n<pre><code>import re\ndatasetName = \"diskLineLuminosity:halpha:rest:z1.0:recent:contam_NII:contam_NII:dust\"\nM = re.search(\"^(disk|spheroid)LineLuminosity:([^:]+):([^:]+):z([\\d\\.]+)(?::(recent))?((?::contam_[^:]+)*)(?::(dust))?\",datasetName)\nlst = list(M.groups())\nif lst[5]:\n    lst[5] = re.findall(\":contam_([^:]+)\", lst[5])\n\nprint(lst)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>['disk', 'halpha', 'rest', '1.0', 'recent', ['NII', 'NII'], 'dust']\n</code></pre>\n"}], "owner": {"reputation": 585, "user_id": 1026674, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/oCXrR.jpg?s=128&g=1", "display_name": "aim", "link": "https://stackoverflow.com/users/1026674/aim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1518037840, "creation_date": 1518036565, "question_id": 48672985, "link": "https://stackoverflow.com/questions/48672985/regex-in-python-matching-duplicates-of-optional-substrings", "title": "Regex in python: matching duplicates of optional substrings", "body": "<p>I am developing a python package that needs to, among other things, process a file containing a list of dataset names and I need to extract the components of these names. </p>\n\n<p>Examples of dataset names would be:</p>\n\n<ul>\n<li>diskLineLuminosity:halpha:rest:z1.0</li>\n<li>diskLineLuminosity:halpha:rest:z1.0:dust</li>\n<li>diskLineLuminosity:halpha:rest:z1.0:contam_NII</li>\n<li>diskLineLuminosity:halpha:rest:z1.0:contam_NII:contam_OII:contam_OIII</li>\n<li>diskLineLuminosity:halpha:rest:z1.0:contam_NII:contam_OIII:dust</li>\n<li>diskLineLuminosity:halpha:rest:z1.0:contam_OII:contam_NII</li>\n<li>diskLineLuminosity:halpha:rest:z1.0:contam_NII:recent</li>\n</ul>\n\n<p>I'm looking for a way to parse the dataset names using regex to extract all the dataset information, including a list of all instances of \"contam_*\" (where zero instances are allowed). I realise that I could just split the string and used fnmatch.filter, or equivalent, but I also need to be able to flag erroneous dataset names that do not match the above syntax. Also, regex is currently used extensively in similar situations throughout the package and so I prefer not to introduce a second parsing method.</p>\n\n<p>As an MWE, with an example dataset name, I have pieced together:</p>\n\n<pre><code>import re\ndatasetName = \"diskLineLuminosity:halpha:rest:z1.0:contam_NII:recent\"\nM = re.search(\"^(disk|spheroid)LineLuminosity:([^:]+):([^:]+):z([\\d\\.]+)(:recent)?(:contam_[^:]+)?(:dust[^:]+)?\",datasetName)\n</code></pre>\n\n<p>This returns:</p>\n\n<pre><code>print M.group(1,2,3,4,5,6,7)\n('disk', 'halpha', 'rest', '1.0', None, ':contam_NII', None)\n</code></pre>\n\n<p>In the package, this regex search needs to go into a function similar to:</p>\n\n<pre><code>def getDatasetNameInformation(datasetName):\n    INFO = re.search(\"^(disk|spheroid)LineLuminosity:([^:]+):([^:]+):z([\\d\\.]+)(:recent)?(:contam_[^:]+)?(:dust[^:]+)?\",datasetName)\n    if not INFO:\n        raise ParseError(\"Cannot parse '\"+datasetName+\"'!\")\n    return INFO\n</code></pre>\n\n<p>I am still new to using regex so how can I modify the <code>re.search</code> string to successfully parse all of the above dataset names and extract the information in the substrings (including a list of all the instances of contamination)?</p>\n\n<p>Thanks for any help you can provide!</p>\n"}, {"tags": ["python", "windows", "raspbian", "microsoft-cognitive"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1518036312, "post_id": 48672879, "comment_id": 84344154, "body": "<code>try &#47; except:     pass</code> is a very bad way of catching exceptions. Try to narrow down the type of exceptions you want to catch"}, {"owner": {"reputation": 11919, "user_id": 9183344, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U7r5r.png?s=128&g=1", "display_name": "r.ook", "link": "https://stackoverflow.com/users/9183344/r-ook"}, "edited": false, "score": 0, "creation_date": 1518037134, "post_id": 48672879, "comment_id": 84344579, "body": "&quot;Does not run&quot; is not a helpful feedback.  When you executed your script in terminal what happens? I have a feeling it&#39;s running alright, just that something within the <code>try</code> block failed and your <code>except</code> is not showing any meaningful feedback, so it <i>looks</i> like your program is not running.  But in reality, it is, and it&#39;s gone straight to the <code>except: pass</code> line and did nothing of note."}, {"owner": {"reputation": 11919, "user_id": 9183344, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U7r5r.png?s=128&g=1", "display_name": "r.ook", "link": "https://stackoverflow.com/users/9183344/r-ook"}, "edited": false, "score": 0, "creation_date": 1518037350, "post_id": 48672879, "comment_id": 84344694, "body": "If you have a debugger, use it.  Otherwise, one manual way to debug this is adding some <code>print</code> statements into your program so <i>before</i> you reach the <code>try</code> block, you can say <code>print(&#39;begin try&#39;)</code> and see if it ever reaches that point.  Likewise, add <code>print(&#39;begin connection&#39;)</code>, <code>print(&#39;reading response&#39;)</code>... etc.  See where your program actually stopped.  It may very likely be a connection issue.  Also, change your <code>except</code> line to <code>except Exception as e: print(e)</code> and see what errors you are getting.  Or better yet, don&#39;t do a <code>try&#47;except</code> and simply see what errors return.  Go from there."}, {"owner": {"reputation": 1, "user_id": 9212686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b3342456ffcfe6925fb81f1547a64e4?s=128&d=identicon&r=PG&f=1", "display_name": "GoodCodes", "link": "https://stackoverflow.com/users/9212686/goodcodes"}, "reply_to_user": {"reputation": 11919, "user_id": 9183344, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U7r5r.png?s=128&g=1", "display_name": "r.ook", "link": "https://stackoverflow.com/users/9183344/r-ook"}, "edited": false, "score": 0, "creation_date": 1518055430, "post_id": 48672879, "comment_id": 84351045, "body": "@Idlehands Thank you both for the suggestion! I have re-edited my codes and the IDLE stopsat print(data): b&#39;{&quot;error&quot;:{&quot;code&quot;: &quot;timeout&quot;, &quot;message&quot;: &quot;the operation was timeout.&quot; line 31 in &lt;module&gt; happiness = faces[0][&#39;scores&#39;][&#39;happiness&#39;] if len(faces)&gt;0 else 0 keyerror: 0. It seems that the problem happens at  data = response.read() as print(data) returns with &quot;operation is timeout&quot; error&quot;. how should I edit it in raspbian as it works well in windows for that"}, {"owner": {"reputation": 11919, "user_id": 9183344, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U7r5r.png?s=128&g=1", "display_name": "r.ook", "link": "https://stackoverflow.com/users/9183344/r-ook"}, "edited": false, "score": 0, "creation_date": 1518061114, "post_id": 48672879, "comment_id": 84352410, "body": "That could be a server response (which means server related) or your RPI have connection issues.  Have you performed a speed test or tried requesting different pages on your RPI and see if you get a proper response? Could also be the data you&#39;re POSTING is taking longer than expected to send to the server.  At this point it&#39;s hard to say why exactly it&#39;s timing out."}], "owner": {"reputation": 1, "user_id": 9212686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b3342456ffcfe6925fb81f1547a64e4?s=128&d=identicon&r=PG&f=1", "display_name": "GoodCodes", "link": "https://stackoverflow.com/users/9212686/goodcodes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 97, "favorite_count": 2, "answer_count": 0, "score": 0, "last_activity_date": 1518056526, "creation_date": 1518036073, "last_edit_date": 1518056526, "question_id": 48672879, "link": "https://stackoverflow.com/questions/48672879/python-response-read-runs-smoothly-in-windows-but-not-at-all-in-raspbian", "title": "Python - response.read() runs smoothly in Windows but not at all in Raspbian", "body": "<p>I'm trying to run the program which uses Microsoft Emotion API program here in my raspberry pi3. \nI tried it on Windows on version Python3.6.4 and it runs perfectly alright. \nHowever, when I try it on Raspberrypi3, using the default python3.5 (which does not have http.client) AND also python3.6.2 IDLE (<a href=\"https://stackoverflow.com/questions/42003141/how-to-start-idle-that-comes-with-python-3-6\">How to start IDLE that comes with Python 3.6</a>), the program either (1) does NOT run at all, (2) or gives a time-out error, (3) or a </p>\n\n<pre><code>b'{\"error\":{\"code\":\"InvalidImageSize\",\"message\":\"Image size is too small or too big.\"}}' error.\n</code></pre>\n\n<p>I have also tried to run it on python3.6 under env environment but to no avail. It did not even print happiness which is supposed to return a float value. Please advice why and how can I make it work on Raspberry Pi, thank you very much! Have it got to do with the python version? The API? </p>\n\n<p>The codes are as follows:</p>\n\n<pre><code>import http.client, urllib.request, urllib.parse, urllib.error, base64, sys\nimport json\n\n\nheaders = {\n    'Content-Type': 'application/octet-stream',\n    'Ocp-Apim-Subscription-Key': 'MY-KEY',\n}\n\nparams = urllib.parse.urlencode({\n        })\n\nbody = open('1.jpg','rb').read()\n\nprint ('begin')\nconn = http.client.HTTPSConnection('westus.api.cognitive.microsoft.com')\nprint ('connection')\nconn.request(\"POST\", \"/emotion/v1.0/recognize?%s\" % params, body, headers)\nprint ('request')\nresponse = conn.getresponse()\nprint ('donerequest')\ndata = response.read()\nprint(data)\n\nfaces = json.loads(data)\nhappiness = faces[0]['scores']['happiness'] if len(faces)&gt;0 else 0\nprint (happiness)\nwith open('result.txt', 'a') as out:\n    out.write(\"1\"+ '\\n')\nconn.close()\n</code></pre>\n\n<p>Problem: \nstops at <code>print(data)</code>: <code>b'{\"error\":{\"code\": \"timeout\", \"message\": \"the operation was timeout.\" }}'\nTraceback (most recent call last): File.... in line 31 in &lt;module&gt; \nhappiness = faces[0]['scores']['happiness'] if len(faces)&gt;0 else 0 keyerror: 0.</code> </p>\n\n<p>It seems that the problem happens at \ndata = response.read() as print(data) returns with \"operation is timeout\" error\". May I know how should I edit it in raspbian as it works well in windows for that?\nI did try the following to no avail:</p>\n\n<pre><code>data = response.read().decode(\"utf8\")\n</code></pre>\n"}, {"tags": ["python", "pandas", "numpy", "dataframe", "logic"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1518036590, "post_id": 48672866, "comment_id": 84344292, "body": "What is the dtype?"}, {"owner": {"reputation": 137, "user_id": 9288243, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9dc60457b7034a41167bd59a8e6412ff?s=128&d=identicon&r=PG&f=1", "display_name": "Zhoe", "link": "https://stackoverflow.com/users/9288243/zhoe"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1518036691, "post_id": 48672866, "comment_id": 84344338, "body": "dataframe and a char"}], "answers": [{"tags": [], "owner": {"reputation": 6511, "user_id": 3216980, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WKADu.jpg?s=128&g=1", "display_name": "TYZ", "link": "https://stackoverflow.com/users/3216980/tyz"}, "is_accepted": false, "score": 1, "last_activity_date": 1518037002, "creation_date": 1518037002, "answer_id": 48673081, "question_id": 48672866, "link": "https://stackoverflow.com/questions/48672866/incrementing-the-financial-quarters-in-python/48673081#48673081", "title": "Incrementing the financial quarters in python", "body": "<p>You can write a custom function to do this:</p>\n\n<pre><code>def last_q(c):\n    sp = c.split(\"Q\")\n    yr = sp[0]\n    q = sp[1]\n    if int(q) &gt; 1:\n        return \"Q\".join([yr,str(int(q)-1)])\n    else:\n        return \"Q\".join([str(int(yr)-1),\"4\"])\n</code></pre>\n\n<p>For example:</p>\n\n<pre><code>&gt;a = pd.Series([\"2017Q1\", \"2016Q4\"])\n&gt;a\n0    2017Q1\n1    2016Q4\ndtype: object\n\n&gt;a.apply(last_q)\n0    2016Q4\n1    2016Q3\ndtype: object\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 3, "last_activity_date": 1518037216, "creation_date": 1518037216, "answer_id": 48673143, "question_id": 48672866, "link": "https://stackoverflow.com/questions/48672866/incrementing-the-financial-quarters-in-python/48673143#48673143", "title": "Incrementing the financial quarters in python", "body": "<p>If your column is a string, convert it to a <code>Period</code> object:</p>\n\n<pre><code>df['FIRST'] = pd.PeriodIndex(df.FIRST, freq='Q')\n</code></pre>\n\n<p>Next, use <code>pd.PeriodIndex.shift</code>:</p>\n\n<pre><code>df['LAST'] = df['FIRST'].shift(-1)\n</code></pre>\n\n<p></p>\n\n<pre><code>df\n\n     FIRST   LAST\n0   2007Q1 2006Q4\n1   2007Q1 2006Q4\n2   2007Q1 2006Q4\n3   2007Q2 2007Q1\n4   2007Q2 2007Q1\n5   2007Q2 2007Q1\n6   2007Q3 2007Q2\n7   2007Q3 2007Q2\n8   2007Q3 2007Q2\n9   2007Q4 2007Q3\n10  2007Q4 2007Q3\n11  2007Q4 2007Q3\n12  2008Q1 2007Q4\n13  2008Q1 2007Q4\n14  2008Q1 2007Q4\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1518037671, "post_id": 48673254, "comment_id": 84344886, "body": "My answer is also a one liner and shorter ;) <code>pd.PeriodIndex(df.FIRST, freq=&#39;Q&#39;).shift(-1)</code>. The point is, one liners are overrated."}, {"owner": {"reputation": 78, "user_id": 5892125, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153942316863921/picture?type=large", "display_name": "DanSan", "link": "https://stackoverflow.com/users/5892125/dansan"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 1, "creation_date": 1518037846, "post_id": 48673254, "comment_id": 84344984, "body": "True that. Just wanted to add diversity to the answers. I voted for your answer ;)"}], "tags": [], "owner": {"reputation": 78, "user_id": 5892125, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153942316863921/picture?type=large", "display_name": "DanSan", "link": "https://stackoverflow.com/users/5892125/dansan"}, "is_accepted": false, "score": 2, "last_activity_date": 1518037628, "creation_date": 1518037628, "answer_id": 48673254, "question_id": 48672866, "link": "https://stackoverflow.com/questions/48672866/incrementing-the-financial-quarters-in-python/48673254#48673254", "title": "Incrementing the financial quarters in python", "body": "<p>If you want it as a one-liner:</p>\n\n<pre><code>df['LAST'] = pd.PeriodIndex(pd.to_datetime(df['FIRST']) - pd.DateOffset(months=3),freq='Q')\n</code></pre>\n"}], "owner": {"reputation": 137, "user_id": 9288243, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9dc60457b7034a41167bd59a8e6412ff?s=128&d=identicon&r=PG&f=1", "display_name": "Zhoe", "link": "https://stackoverflow.com/users/9288243/zhoe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 334, "favorite_count": 0, "accepted_answer_id": 48673143, "answer_count": 3, "score": 2, "last_activity_date": 1518037628, "creation_date": 1518036010, "question_id": 48672866, "link": "https://stackoverflow.com/questions/48672866/incrementing-the-financial-quarters-in-python", "title": "Incrementing the financial quarters in python", "body": "<p>I have the below sample input data with quarterly updates. I want to add this quarter data to the previous quarter table as shown in the output. I tried in Many ways but not able to find the right way. </p>\n\n<p>Input DF:</p>\n\n<p><code>FIRST\n2007Q1\n2007Q1\n2007Q1\n2007Q2\n2007Q2\n2007Q2\n2007Q3\n2007Q3\n2007Q3\n2007Q4\n2007Q4\n2007Q4\n2008Q1\n2008Q1\n2008Q1\n</code></p>\n\n<p>Output:</p>\n\n<p><code>\nFirst    Last\n2007Q1  2006Q4\n2007Q1  2006Q4\n2007Q1  2006Q4\n2007Q2  2007Q1\n2007Q2  2007Q1\n2007Q2  2007Q1\n2007Q3  2007Q2\n2007Q3  2007Q2\n2007Q3  2007Q2\n2007Q4  2007Q3\n2007Q4  2007Q3\n2007Q4  2007Q3\n2008Q1  2007Q4\n2008Q1  2007Q4\n2008Q1  2007Q4\n</code></p>\n\n<p>Can someone help me in solving this in python. I need this to perform further analysis. Thanks!</p>\n"}, {"tags": ["python", "pandas", "categories"], "answers": [{"tags": [], "owner": {"reputation": 56440, "user_id": 2285236, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ac8c2e0f71dbd8cf4543039bebf2ab3?s=128&d=identicon&r=PG&f=1", "display_name": "ayhan", "link": "https://stackoverflow.com/users/2285236/ayhan"}, "is_accepted": true, "score": 4, "last_activity_date": 1518036993, "last_edit_date": 1518036993, "creation_date": 1518036497, "answer_id": 48672973, "question_id": 48672860, "link": "https://stackoverflow.com/questions/48672860/why-dtype-is-different-when-converting-to-a-category-from-an-object-or-str/48672973#48672973", "title": "Why dtype is different when converting to a category from an object or str?", "body": "<p><code>.astype(object)</code> doesn't convert numbers to strings. It converts numbers to corresponding Python objects (in your example, <code>numpy.int64</code> to a Python <code>int</code>).</p>\n\n<p>For example,</p>\n\n<pre><code>df = pd.DataFrame(columns=['nombre'], data=[1,2,3,4])\n\ntype(df['nombre'][0])\nOut[64]: numpy.int64\n\n\ndf['nombre'] = df['nombre'].astype('object')\n\ntype(df['nombre'][0])\nOut[66]: int\n</code></pre>\n\n<p>But when you use <code>astype(str)</code>, it converts everything to strings. While doing that, it also converts the Series to an object Series, too. This is  because that's the only dtype that can hold strings.</p>\n\n<pre><code>df['nombre'] = df['nombre'].astype('str')\n\ntype(df['nombre'][0])\nOut[69]: str\n</code></pre>\n\n<p>So this is just related to your input data. In the first one you pass ints, you get an integer array. In the second one you pass strings, you get an object array.</p>\n\n<p>Also the term \"the internal dtype\" may not be appropriate here. This is the dtype of the Series that holds categories; not their codes. In both examples, <code>df['nombre'].cat.codes</code> is the internal representation and its dtype is <code>int8</code>.</p>\n"}], "owner": {"reputation": 39, "user_id": 9329508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13a612ecbc6707a7ff97456012e653df?s=128&d=identicon&r=PG&f=1", "display_name": "J. Leroux", "link": "https://stackoverflow.com/users/9329508/j-leroux"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 665, "favorite_count": 1, "accepted_answer_id": 48672973, "answer_count": 1, "score": 2, "last_activity_date": 1518036993, "creation_date": 1518035986, "question_id": 48672860, "link": "https://stackoverflow.com/questions/48672860/why-dtype-is-different-when-converting-to-a-category-from-an-object-or-str", "title": "Why dtype is different when converting to a category from an object or str?", "body": "<p>Why do I receive two different behaviours when converting a column to a category in pandas?</p>\n\n<p>As an example, let say I create a dataframe with</p>\n\n<pre><code>&gt;&gt;&gt; import pandas as pd\n&gt;&gt;&gt; import numpy as np\n&gt;&gt;&gt; pd.__version__\nu'0.22.0'\n&gt;&gt;&gt; np.__version__\n'1.14.0'\n&gt;&gt;&gt; df = pd.DataFrame(columns=['nombre'], data=[1,2,3,4])\n</code></pre>\n\n<p>Now I convert my column to an object:</p>\n\n<pre><code>&gt;&gt;&gt; df['nombre'] = df['nombre'].astype('object')\n&gt;&gt;&gt; print(df['nombre'].dtype)\nobject\n</code></pre>\n\n<p>The dtype is now object.</p>\n\n<pre><code>&gt;&gt;&gt; df['nombre'] = df['nombre'].astype('category')\n&gt;&gt;&gt; print(df['nombre'].cat.categories.dtype.name)\nint64\n</code></pre>\n\n<p>After converting to a category, the internal dtype is int64.</p>\n\n<p>Let's start again with a new dataframe</p>\n\n<pre><code>&gt;&gt;&gt; del df\n&gt;&gt;&gt; df = pd.DataFrame(columns=['nombre'], data=[1,2,3,4])\n</code></pre>\n\n<p>This time, we convert the internal column to a 'str'</p>\n\n<pre><code>&gt;&gt;&gt; df['nombre'] = df['nombre'].astype('str')\n&gt;&gt;&gt; print(df['nombre'].dtype)\nobject\n</code></pre>\n\n<p>The internal representation is an object. It makes sense since we converted to a 'str'.</p>\n\n<pre><code>&gt;&gt;&gt; df['nombre'] = df['nombre'].astype('category')\n&gt;&gt;&gt; print(df['nombre'].cat.categories.dtype.name)\nobject\n</code></pre>\n\n<p>After converting to a category, the internal dtype is now object, which is different from the int64 that we received before?</p>\n\n<p>So my question is the following, why do I receive two different behaviours when converting from an object dtype to a category?</p>\n"}, {"tags": ["python", "python-3.x", "user-interface", "save", "exe"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9044109, "user_type": "registered", "profile_image": "https://graph.facebook.com/166048264140410/picture?type=large", "display_name": "Iaroslav Shevchenko", "link": "https://stackoverflow.com/users/9044109/iaroslav-shevchenko"}, "edited": false, "score": 0, "creation_date": 1518041103, "post_id": 48673159, "comment_id": 84346524, "body": "Thanks for answer, but the main difficulty is about how to pass data from save.xyz to program.exe. This is what the question was about.  Cause now clicking save.xyz just executes main program without any data from save.xyz."}], "tags": [], "owner": {"reputation": 1341, "user_id": 6809571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/000a638897147ab84cf57cde60e2d05b?s=128&d=identicon&r=PG&f=1", "display_name": "John R", "link": "https://stackoverflow.com/users/6809571/john-r"}, "is_accepted": false, "score": 2, "last_activity_date": 1518041544, "last_edit_date": 1518041544, "creation_date": 1518037270, "answer_id": 48673159, "question_id": 48672819, "link": "https://stackoverflow.com/questions/48672819/create-and-run-saves-from-python-program-which-was-converted-to-exe/48673159#48673159", "title": "create and run saves from python program which was converted to .exe", "body": "<p>Save your persistence files with a unique file extension (.xyz), and then in your OS set the default program for opening files of that extension to your exe.</p>\n\n<p>Update to OP comment:</p>\n\n<pre><code>import sys\nfilepaths = [x for x in sys.argv if x.endswith('.xyz')]\n</code></pre>\n\n<p>will give you a list of system-supplied arguments that end in your specific file extension. You should be able to reasonably expect that this will yield a list of filepath(s) from the double clicked files. </p>\n"}], "owner": {"reputation": 1, "user_id": 9044109, "user_type": "registered", "profile_image": "https://graph.facebook.com/166048264140410/picture?type=large", "display_name": "Iaroslav Shevchenko", "link": "https://stackoverflow.com/users/9044109/iaroslav-shevchenko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27, "favorite_count": 0, "closed_date": 1518041322, "answer_count": 1, "score": -1, "last_activity_date": 1518051173, "creation_date": 1518035814, "last_edit_date": 1518051173, "question_id": 48672819, "link": "https://stackoverflow.com/questions/48672819/create-and-run-saves-from-python-program-which-was-converted-to-exe", "closed_reason": "Needs more focus", "title": "create and run saves from python program which was converted to .exe", "body": "<p>I have a python program that was converted to exe file for distribution. \nUser can make a save. So the save file \"NewSave\" appears, it has some data. </p>\n\n<p>By double clicking this \"NewSave\", it should call the main exe file and pass data into it and run it.</p>\n\n<p>What is the appropriate way to do it? How to make a save (like in Photoshop, of MSOffice or whatever), so that by clicking this save the main program would be started with the data from the save.   </p>\n\n<p>I have no experience at coding beyond python, so i even can't imagine how it can be done. Thanks for help in advance!  </p>\n\n<p>To summarize: How do I pass the filepath of a double-clicked file to my python script?</p>\n"}, {"tags": ["python", "neo4j", "py2neo"], "comments": [{"owner": {"reputation": 554, "user_id": 7351752, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52fe7a9cbec5b00ca0195ed0c6b31fc?s=128&d=identicon&r=PG&f=1", "display_name": "etaloof", "link": "https://stackoverflow.com/users/7351752/etaloof"}, "edited": false, "score": 2, "creation_date": 1518035612, "post_id": 48672701, "comment_id": 84343792, "body": "<code>graph.create(...)</code> doesn&#39;t return anything <a href=\"http://py2neo.org/v3/_modules/py2neo/database.html#Graph.create\" rel=\"nofollow noreferrer\">py2neo.org/v3/_modules/py2neo/database.html#Graph.create</a>"}], "answers": [{"tags": [], "owner": {"reputation": 4250, "user_id": 823822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cafc3df1c732144084a706d768564bd4?s=128&d=identicon&r=PG", "display_name": "Nigel Small", "link": "https://stackoverflow.com/users/823822/nigel-small"}, "is_accepted": true, "score": 1, "last_activity_date": 1518073780, "creation_date": 1518073780, "answer_id": 48679557, "question_id": 48672701, "link": "https://stackoverflow.com/questions/48672701/node-added-to-neo4j-db-but-prints-out-as-none/48679557#48679557", "title": "Node added to neo4j DB but prints out as &quot;None&quot;", "body": "<p>You're using the API incorrectly. The create method doesn't return nodes but instead updates the supplied argument. Therefore to get the relationship nodes, you need to interrogate the relationship object after performing the create.</p>\n"}], "owner": {"reputation": 157, "user_id": 7023467, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f517388d2c33fb349c12d2d4a1adda0a?s=128&d=identicon&r=PG&f=1", "display_name": "Owen", "link": "https://stackoverflow.com/users/7023467/owen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 48679557, "answer_count": 1, "score": 0, "last_activity_date": 1518073780, "creation_date": 1518035325, "last_edit_date": 1518040613, "question_id": 48672701, "link": "https://stackoverflow.com/questions/48672701/node-added-to-neo4j-db-but-prints-out-as-none", "title": "Node added to neo4j DB but prints out as &quot;None&quot;", "body": "<p>I have the following code:</p>\n\n<pre><code>import py2neo\nfrom py2neo import Graph, Node, Relationship\n\ndef createRelationshipWithProperties():\n    print(\"Start - Creating Relationships\")\n    # Authenticate the user using py2neo.authentication\n    # Ensure that you change the password 'sumit' as per your database configuration.\n    py2neo.authenticate(\"localhost:7474\", \"neo4j\", \"\")\n    # Connect to Graph and get the instance of Graph\n    graph = Graph(\"http://localhost:7474/db/data/\")\n    # Create Node with Properties\n    amy = Node(\"FEMALE\", name=\"Amy\")\n    # Create one more Node with Properties\n    kristine = Node(\"FEMALE\",name=\"Kristine\")\n    # Create one more Node with Properties\n    sheryl = Node(\"FEMALE\",name=\"Sheryl\")\n\n    kristine_amy = Relationship(kristine,\"FRIEND\",amy,since=2005)\n    print (kristine_amy)\n    amy_sheryl = Relationship(sheryl,(\"FRIEND\"),amy,since=2001)\n\n    #Finally use graph Object and Create Nodes and Relationship\n    #When we create Relationship between, then Nodes are also created. \n    resultNodes = graph.create(kristine_amy)\n    resultNodes1 = graph.create(amy_sheryl)\n    #Print the results (relationships)\n    print(\"Relationship Created - \",resultNodes)\n    print(\"Relationship Created - \",resultNodes1)\n\nif __name__ == '__main__':\n    createRelationshipWithProperties()\n</code></pre>\n\n<p>The <code>resultsNodes = graph.create</code> line seems to commit the nodes and relationships to the server because I can see them when I <code>match(n) Return n</code>. However, when the code prints <code>resultsNodes</code>, I get <code>None</code> as if they don't exist. This is the output that I get:</p>\n\n<pre><code>Start - Creating Relationships\n(kristine)-[:FRIEND {since:2005}]-&gt;(amy)\nRelationship Created -  None\nRelationship Created -  None\n</code></pre>\n"}, {"tags": ["python", "input", "while-loop", "append"], "comments": [{"owner": {"reputation": 1467, "user_id": 5090081, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0c684449acc79d93475dc04526e28b6b?s=128&d=identicon&r=PG&f=1", "display_name": "bendl", "link": "https://stackoverflow.com/users/5090081/bendl"}, "edited": false, "score": 0, "creation_date": 1518035564, "post_id": 48672692, "comment_id": 84343764, "body": "Why do you have the <code>while again == &#39;y&#39;:</code> loop repeated twice?"}, {"owner": {"reputation": 1467, "user_id": 5090081, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0c684449acc79d93475dc04526e28b6b?s=128&d=identicon&r=PG&f=1", "display_name": "bendl", "link": "https://stackoverflow.com/users/5090081/bendl"}, "edited": false, "score": 0, "creation_date": 1518035728, "post_id": 48672692, "comment_id": 84343854, "body": "Also this code seems to be working for me"}], "answers": [{"tags": [], "owner": {"reputation": 591, "user_id": 2425811, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VSKXL.jpg?s=128&g=1", "display_name": "Chris Risley", "link": "https://stackoverflow.com/users/2425811/chris-risley"}, "is_accepted": false, "score": 0, "last_activity_date": 1518036093, "creation_date": 1518036093, "answer_id": 48672885, "question_id": 48672692, "link": "https://stackoverflow.com/questions/48672692/my-while-loop-should-be-running-until-the-user-wants-to-stop-it-but-ends-after-t/48672885#48672885", "title": "My while loop should be running until the user wants to stop it but ends after the 2nd input", "body": "<p>Try this:</p>\n\n<pre><code>num_list = []\nagain = \"y\"\nwhile again == \"y\":\n    try:\n        integer_pushed = float(input(\"Enter as many integers from 1 to 10\"))\n        if integer_pushed &gt; 0 or integer_pushed &lt;= 10:\n            num_list.append(integer_pushed)\n            again = input(\"Enter another integer? [y/n]\")\n            print(\"Number list:\", num_list)\n        else: \n            print('You must type in an integer between 0 and 10')\n    except ValueError:\n        print('You must type in an integer not a str')\n</code></pre>\n\n<p>I'm not sure why you had two different while loops, let alone three. However, this should do what you want. It will prompt the user for a number, and try and convert it to a float. If it can't be converted, it will prompt the user again. If it is converted it will check to see if it's between 0 and 10 and if it is, it will add it to the list, otherwise, it will tell the user that that's an invalid number.</p>\n"}, {"comments": [{"owner": {"reputation": 15, "user_id": 9325307, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ZhkQg.jpg?s=128&g=1", "display_name": "Francis Bradley", "link": "https://stackoverflow.com/users/9325307/francis-bradley"}, "edited": false, "score": 0, "creation_date": 1518039207, "post_id": 48672952, "comment_id": 84345665, "body": "I really like this code because you showed me that I need is one &#39;while&#39; to loop and loop until the user says &#39;n&#39;. Really easy to understand and you really cleaned up my garbage code. Thank you so much nisemonoxide"}], "tags": [], "owner": {"reputation": 431, "user_id": 9310553, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LKV5C.jpg?s=128&g=1", "display_name": "nisemonoxide", "link": "https://stackoverflow.com/users/9310553/nisemonoxide"}, "is_accepted": true, "score": 0, "last_activity_date": 1518037446, "last_edit_date": 1518037446, "creation_date": 1518036378, "answer_id": 48672952, "question_id": 48672692, "link": "https://stackoverflow.com/questions/48672692/my-while-loop-should-be-running-until-the-user-wants-to-stop-it-but-ends-after-t/48672952#48672952", "title": "My while loop should be running until the user wants to stop it but ends after the 2nd input", "body": "<p>One <code>while</code> loop is sufficient to achieve what you want.</p>\n\n<pre><code>num_list = []\nagain = 'y'\n\nwhile again=='y':\n    no = int(input(\"Enter a number between 1 and 10: \"))\n    if not 1 &lt;= no &lt;= 10:\n        continue\n    num_list.append(no)\n    again = input(\"Enter another? [y/n]: \")\n\nprint(\"Average: \", sum(num_list) / len(num_list))\n</code></pre>\n\n<p>The <code>while</code> loop runs as long as <code>again == 'y'</code>. The program asks for another number if the user inputs an integer not between 1 and 10.</p>\n"}], "owner": {"reputation": 15, "user_id": 9325307, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ZhkQg.jpg?s=128&g=1", "display_name": "Francis Bradley", "link": "https://stackoverflow.com/users/9325307/francis-bradley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 48672952, "answer_count": 2, "score": 0, "last_activity_date": 1518037446, "creation_date": 1518035289, "question_id": 48672692, "link": "https://stackoverflow.com/questions/48672692/my-while-loop-should-be-running-until-the-user-wants-to-stop-it-but-ends-after-t", "title": "My while loop should be running until the user wants to stop it but ends after the 2nd input", "body": "<p>I feel like the question is not well worded for a question, but this is what I really want:</p>\n\n<p>I am writing this code where a 'user' can enter as many integers from 1 to 10 as he/she wants. Every time after the user has entered an integer, use a yes/no type question to ask whether he/she wants to enter another one. Calculate and display the average of the integers in the list.</p>\n\n<p>Isn't 'while' supposed to running part of a program over and over and over again until it stops when it is told not to? </p>\n\n<pre><code>num_list = []\nlen()\ninteger_pushed = float(input(\"Enter as many integers from 1 to 10\"))\nnum_list.append(integer_pushed)\nagain = input(\"Enter another integer? [y/n]\")\n\n\nwhile integer_pushed &lt; 0 or integer_pushed &gt; 10:\n    print('You must type in an integer between 0 and 10')\n    integer_pushed = float(input(\"Enter as many integers from 1 to 10\"))\n    num_list.append(integer_pushed)\n    again = input(\"Enter another integer? [y/n]\")\n\nwhile again == \"y\":\n    integer_pushed = float(input(\"Enter as many integers from 1 to 10\"))\n    num_list.append(integer_pushed)\n    again = input(\"Enter another integer? [y/n]\")\n    print (\"Number list:\", num_list)\n\nwhile again == \"y\":\n    integer_pushed = float(input(\"Enter as many integers from 1 to 10\"))\n    num_list.append(integer_pushed)\n    again = input(\"Enter another integer? [y/n]\")\n    print (\"Number list:\", num_list)\n</code></pre>\n\n<p>It stops after the 2nd time even if the user types in 'y'. It then gives me the 'Number List: \".</p>\n\n<p>Once again, you guys have been great assisting my classmates and I. Im in an introduction to Python course and we are learning about loops and lists.</p>\n"}, {"tags": ["python", "google-bigquery", "gcloud"], "comments": [{"owner": {"reputation": 12372, "user_id": 2877278, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/jO6Hj.jpg?s=128&g=1", "display_name": "Graham Polley", "link": "https://stackoverflow.com/users/2877278/graham-polley"}, "edited": false, "score": 0, "creation_date": 1518051526, "post_id": 48672690, "comment_id": 84350113, "body": "Have you gone through the 3 steps as outlined here: <a href=\"https://stackoverflow.com/questions/40731823/encountered-an-error-while-globbing-file-pattern-error-when-using-bigquery-api/40731962#40731962\" title=\"encountered an error while globbing file pattern error when using bigquery api\">stackoverflow.com/questions/40731823/&hellip;</a>"}, {"owner": {"reputation": 167, "user_id": 6832855, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7eda25228508216681b2c2d431702718?s=128&d=identicon&r=PG&f=1", "display_name": "Dimitri Masin", "link": "https://stackoverflow.com/users/6832855/dimitri-masin"}, "reply_to_user": {"reputation": 12372, "user_id": 2877278, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/jO6Hj.jpg?s=128&g=1", "display_name": "Graham Polley", "link": "https://stackoverflow.com/users/2877278/graham-polley"}, "edited": false, "score": 0, "creation_date": 1518077651, "post_id": 48672690, "comment_id": 84358133, "body": "@GrahamPolley thanks for your answer! I&#39;m not using a service account but login through my own one. But yes, Drive API is enabled and I have access to the spreadsheet (i can query the table through <code>$ bq query</code>). Drive scope is requested as you see above. Or is <code>$ gcloud auth application-default login</code> only supposed to work with service accounts?"}, {"owner": {"reputation": 167, "user_id": 6832855, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7eda25228508216681b2c2d431702718?s=128&d=identicon&r=PG&f=1", "display_name": "Dimitri Masin", "link": "https://stackoverflow.com/users/6832855/dimitri-masin"}, "reply_to_user": {"reputation": 12372, "user_id": 2877278, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/jO6Hj.jpg?s=128&g=1", "display_name": "Graham Polley", "link": "https://stackoverflow.com/users/2877278/graham-polley"}, "edited": false, "score": 1, "creation_date": 1518078048, "post_id": 48672690, "comment_id": 84358342, "body": "As I&#39;ve described above the error messages mentions a project which is not even part of our org. Not to mention that it&#39;s not the default project that I&#39;ve setup on <code>$ gcloud init</code>"}, {"owner": {"reputation": 9409, "user_id": 1002277, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/JYY1h.jpg?s=128&g=1", "display_name": "Willian Fuks", "link": "https://stackoverflow.com/users/1002277/willian-fuks"}, "edited": false, "score": 0, "creation_date": 1518098362, "post_id": 48672690, "comment_id": 84372172, "body": "don&#39;t quite understand it. Are you using the credentials created by <code>gcloud  init</code> in your python script?"}, {"owner": {"reputation": 167, "user_id": 6832855, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7eda25228508216681b2c2d431702718?s=128&d=identicon&r=PG&f=1", "display_name": "Dimitri Masin", "link": "https://stackoverflow.com/users/6832855/dimitri-masin"}, "edited": false, "score": 0, "creation_date": 1518112774, "post_id": 48672690, "comment_id": 84382056, "body": "I&#39;m using application default credentials in my python script. Like here:     <code>from google.cloud import bigquery  client = bigquery.Client() query = &quot;SELECT * FROM tablename LIMIT 5&quot; query_job = client.query(query)  rows = query_job.result()  for row in rows:     print(row.name)</code>"}, {"owner": {"reputation": 167, "user_id": 6832855, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7eda25228508216681b2c2d431702718?s=128&d=identicon&r=PG&f=1", "display_name": "Dimitri Masin", "link": "https://stackoverflow.com/users/6832855/dimitri-masin"}, "edited": false, "score": 0, "creation_date": 1518112988, "post_id": 48672690, "comment_id": 84382188, "body": "This code above works fine on a normal non-Drive table."}], "answers": [{"comments": [{"owner": {"reputation": 2741, "user_id": 4007615, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153641288441322/picture?type=large", "display_name": "cryanbhu", "link": "https://stackoverflow.com/users/4007615/cryanbhu"}, "edited": false, "score": 0, "creation_date": 1615885681, "post_id": 48805619, "comment_id": 117823571, "body": "as of today, Mar 2021, I tried and found that the <code>scope</code>  <code>&#39;https:&#47;&#47;www.googleapis.com&#47;auth&#47;cloud-platform&#39;</code> is not needed"}], "tags": [], "owner": {"reputation": 5763, "user_id": 6121516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/280caa4ab6f6fc8fb779fa620c090f44?s=128&d=identicon&r=PG&f=1", "display_name": "Guillem Xercavins", "link": "https://stackoverflow.com/users/6121516/guillem-xercavins"}, "is_accepted": false, "score": 2, "last_activity_date": 1518692455, "creation_date": 1518692455, "answer_id": 48805619, "question_id": 48672690, "link": "https://stackoverflow.com/questions/48672690/querying-federated-tables-google-drive-via-bigquery-python-api/48805619#48805619", "title": "Querying federated tables (Google Drive) via BigQuery python api", "body": "<p>There might be <a href=\"https://github.com/GoogleCloudPlatform/google-cloud-python/issues/3067\" rel=\"nofollow noreferrer\">issues</a> when using the default credentials. However, you can use a service account, save the credentials in a JSON file and add the necessary scopes. I did a quick test and this code worked for me:</p>\n\n<pre><code>from google.cloud import bigquery\nfrom google.oauth2.service_account import Credentials\n\nscopes = (\n        'https://www.googleapis.com/auth/bigquery',\n        'https://www.googleapis.com/auth/cloud-platform',\n        'https://www.googleapis.com/auth/drive'\n)\ncredentials = Credentials.from_service_account_file('/path/to/credentials.json')\ncredentials = credentials.with_scopes(scopes)\nclient = bigquery.Client(credentials=credentials)\n\nquery = \"SELECT * FROM dataset.federated_table LIMIT 5\"\nquery_job = client.query(query)\nrows = query_job.result()\nfor row in rows: print(row)\n</code></pre>\n\n<p>If you get a 404 not found error is because you need to share the spreadsheet with the service account (view permission)</p>\n"}], "owner": {"reputation": 167, "user_id": 6832855, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7eda25228508216681b2c2d431702718?s=128&d=identicon&r=PG&f=1", "display_name": "Dimitri Masin", "link": "https://stackoverflow.com/users/6832855/dimitri-masin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1786, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1518692455, "creation_date": 1518035285, "last_edit_date": 1518035633, "question_id": 48672690, "link": "https://stackoverflow.com/questions/48672690/querying-federated-tables-google-drive-via-bigquery-python-api", "title": "Querying federated tables (Google Drive) via BigQuery python api", "body": "<p>(There are a lot of similar threads here but unfortunately I couldn't find the answer to my error anywhere here or on Goolge)</p>\n\n<p>I'm trying to query a federated table in BigQuery which is pointing to a spreadsheet in Drive.</p>\n\n<p>I've run the following command to create default application credentials for gcloud:</p>\n\n<pre><code>$ gcloud auth application-default login\n</code></pre>\n\n<p>But this doesn't include Drive into the scope so I'm getting the following error message (which makes sense): <em>Forbidden: 403 Access Denied: BigQuery BigQuery: No OAuth token with Google Drive scope was found.</em></p>\n\n<p>Then I've tried to auth with explicit Drive scope:</p>\n\n<pre><code>$ gcloud auth application-default login --scopes=https://www.googleapis.com/auth/drive,https://www.googleapis.com/auth/cloud-platform,https://www.googleapis.com/auth/bigquery\n</code></pre>\n\n<p>After that I'm getting the following error when I try to use bigquery python api: </p>\n\n<p>\"Forbidden: 403 Access Denied: BigQuery BigQuery: Access Not Configured. Drive API has not been used in project 764086051850 before or it is disabled. Enable it by visiting <a href=\"https://console.developers.google.com/apis/api/drive.googleapis.com/overview?project=764086051850\" rel=\"nofollow noreferrer\">https://console.developers.google.com/apis/api/drive.googleapis.com/overview?project=764086051850</a> then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.\"</p>\n\n<p>The project number above does not exist in our organisation and the provided link leads to a page which says: \n<em>The API \"drive.googleapis.com\" doesn't exist or you don't have permission to access it</em></p>\n\n<p>Drive API is definitely enabled for the default project, so the error message doesn't make much sense. I can also query the table from the terminal using <code>bq query_string</code> command.</p>\n\n<p><strong>I'm currently out of ideas on how to debug this further, anyone suggestions?</strong></p>\n\n<p>Configuration:<br>\nGoogle Cloud SDK 187.0.0<br>\nPython 2.7<br>\ngoogle-cloud 0.27.0<br>\ngoogle-cloud-bigquery 0.29.0</p>\n"}, {"tags": ["python", "file", "structure", "directory"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 7482320, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zW-mokE85KI/AAAAAAAAAAI/AAAAAAAAACI/staz10K5K8s/photo.jpg?sz=128", "display_name": "Lume", "link": "https://stackoverflow.com/users/7482320/lume"}, "edited": false, "score": 0, "creation_date": 1518349961, "post_id": 48674111, "comment_id": 84461392, "body": "Thank you very much! This acctually helped me a lot already. However I still have some problems lopping through the dictionaries inside of dictionaries inside of dictionaries etc. I edited my original question so I would really appreciate you to have a look and see if you can help me out again."}, {"owner": {"reputation": 1690, "user_id": 916674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/550ab0daf81f6c4a5d5530c53afdfe48?s=128&d=identicon&r=PG", "display_name": "rczajka", "link": "https://stackoverflow.com/users/916674/rczajka"}, "reply_to_user": {"reputation": 11, "user_id": 7482320, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zW-mokE85KI/AAAAAAAAAAI/AAAAAAAAACI/staz10K5K8s/photo.jpg?sz=128", "display_name": "Lume", "link": "https://stackoverflow.com/users/7482320/lume"}, "edited": false, "score": 0, "creation_date": 1518382050, "post_id": 48674111, "comment_id": 84471886, "body": "I&#39;ve added a simple recursive function to my answer to show you how you can iterate over such a structure."}], "tags": [], "owner": {"reputation": 1690, "user_id": 916674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/550ab0daf81f6c4a5d5530c53afdfe48?s=128&d=identicon&r=PG", "display_name": "rczajka", "link": "https://stackoverflow.com/users/916674/rczajka"}, "is_accepted": false, "score": 0, "last_activity_date": 1518382166, "last_edit_date": 1518382166, "creation_date": 1518041364, "answer_id": 48674111, "question_id": 48672676, "link": "https://stackoverflow.com/questions/48672676/code-a-directory-structure-from-scratch-imaginary-files-folders-etc-in-pyth/48674111#48674111", "title": "Code a directory structure from scratch (imaginary files / folders etc.) in python?", "body": "<p>Technically, you <em>can</em> access a variable by its name, by using things like <code>locals()</code> or <code>globals()</code>, but this isn't the normal way to do it.</p>\n\n<p>Normally you would define your imaginary directories as a data structure and then look for a way for your code to navigate it. So you could start with something like this:</p>\n\n<pre><code>imaginary_tree = {\n    'Boot': {\n        'System': {\n            'Library': { ... },\n            'System files': { ... }\n        },\n        'Users': {\n            'Phillipp Dorson': { ... },\n            'Root': { ... },\n        },\n        ...\n    }\n}\n</code></pre>\n\n<p>Then you'll need to see how your code can maintain a <em>current path</em>, so the user can go up and down the hierarchy, and also how to differentiate your imaginary files from imaginary directories.</p>\n\n<p>Hope this points you in the right direction, have fun!</p>\n\n<hr>\n\n<p><strong>edit:</strong></p>\n\n<p>To iterate through such structure, you can use recursion, like:</p>\n\n<pre><code>def print_directory(directory):\n    for subdir in directory:\n        print(subdir)\n        print_directory(directory[subdir])\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7482320, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zW-mokE85KI/AAAAAAAAAAI/AAAAAAAAACI/staz10K5K8s/photo.jpg?sz=128", "display_name": "Lume", "link": "https://stackoverflow.com/users/7482320/lume"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1518382166, "creation_date": 1518035207, "last_edit_date": 1592644375, "question_id": 48672676, "link": "https://stackoverflow.com/questions/48672676/code-a-directory-structure-from-scratch-imaginary-files-folders-etc-in-pyth", "title": "Code a directory structure from scratch (imaginary files / folders etc.) in python?", "body": "<h3><strong>Tell me if this has already been answered!!!</strong></h3>\n<h2><strong>Background info:</strong></h2>\n<p>Hello, I am Max, 14 years old and from Germany.\nCurrently I am working on the mechanic for a little game I want to code in Python,   just to learn the language and get comfortable with it. In The game you have to find and delete a imaginary &quot;virus&quot; on a &quot;computer&quot;. To do so, you have to navigate through folders and execute a couple of commands, just like you would in the normal terminal.</p>\n<h2><strong>Actual Question:</strong></h2>\n<p>My Problem is navigating through directories. I might not have the best method of setting up the structure and I also don't really know a better way of doing it. Maybe anyone here has an idea. I don't really want to use real folders and just access them from my programm, since I really want to learn the language.\nI will provide you with the code, that is necessary.</p>\n<p>I have a list (as seen below), that contains all the commands my programm accepts at the moment and a second one that contains the number of attributes every individual comment requires. These attributes are in a third list, where they can be reached by the index of the command itself, thats what the variable, &quot;index&quot; is.</p>\n<pre><code>comm = ['hello', 'help', 'cd', 'ls', 'cdir', 'rdir', 'cfil', 'rfil', 'detc']\ncommAtt = ['0', '0', '1', '1', '2', '2', '2', '2', '1']\nattribute = ['0', '0', '* directory *', '* directory *', '* directory *  * new name *',\n         '* directory *  * new name *', '* file path *  * new name *',\n         '* file path *  * new name *', '* malware / spamware / adware *']\n\n\n# Directories\ntotal = 7\nlayer0 = ['Boot']\n# layer1\nBoot = ['System', 'Users', 'Applications']\n#layer2\nSystem = ['Library', 'System files']\nUsers = ['Phillipp Dorson', 'Root']\nApplications = ['Corel .exe', 'Text Editor.exe', 'Python lib', 'Internet.exe']\n# layer3\nPhillippD = ['Documents', 'Downloads', 'Pictures', 'Movies', 'Desktop',\n                 'Music']\n# layer4\nDocuments = ['Job_Application.txt', 'Cover_Page.corel']\n\ndef dirCheck(command, path, index):\ncount = 0\nlayerI = 'null'\ndir = layerI\nfor pathI in range(0, len(path) - 1):\n    print(pathI)\n    for layerI in layer0:\n        dir = layerI\n        if path[pathI] == layerI:\n            print('hellu')\n            break\n        else:\n            count += 1\n            break\n\n    print(dir)\n    for layerI in dir:\n        print(layerI)\n        if path[pathI] == layerI:\n            print('lulloooo')\n            break\n        else:\n            count += 1\n</code></pre>\n<p>As you can probably see, I am currently trying to use a variable(dir) for another variable (acctually the arrays, that contain the files and folders like &quot;Boot[]&quot; or &quot;Documents[]&quot;), which doesn't seem to work very well. I tried to avoid typing all of the list individually, however if it isn't possible to do it differently, I will.\n<em><strong>Thanks in advance, Max.</strong></em></p>\n<h3>Edit:</h3>\n<p>As suggested by @rczajka, I made the file structure with a dictionary. However I still don't quite get how I should loop trough this 'system', to check if the input is valid, for example, since I have to loop through a dictionary inside of a dictionary inside of a dictionary and so on. This is, what I came up with so far:</p>\n<pre><code>directories = {\n'Boot': {\n    'System': {\n        'Library': {}\n    },\n    'Users': {\n\n    },\n    'Applications': {\n\n    }\n}\n</code></pre>\n<p>}</p>\n<pre><code>for i in directories:      #layer 1\n    print(i)\n    for a in directories[i]:      #layer 2\n        print(a)\n        for b in directories[i][a]:      #layer 3\n            print(b)\n</code></pre>\n<p>It does work, but I have to type a new loop for every 'layer' of files. I don't really like that idea since it limits the amounts of folders you can have inside other folders, if you know what I mean.\nI would really appreciate some help from you guys! Thanks!</p>\n"}, {"tags": ["python", "matplotlib"], "comments": [{"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 1, "creation_date": 1518035601, "post_id": 48672663, "comment_id": 84343789, "body": "Did you look at <a href=\"https://matplotlib.org/devdocs/gallery/mplot3d/voxels_numpy_logo.html\" rel=\"nofollow noreferrer\">the official example</a>? It doesn&#39;t seem to have this problem, due to some small offsets between the voxels."}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 1, "creation_date": 1518035878, "post_id": 48672663, "comment_id": 84343921, "body": "In general, this issue is still being discussed: <a href=\"https://github.com/matplotlib/matplotlib/issues/9745\" rel=\"nofollow noreferrer\">github.com/matplotlib/matplotlib/issues/9745</a>"}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 1, "creation_date": 1518036322, "post_id": 48672663, "comment_id": 84344160, "body": "Also, you may always just plot all voxels as in <a href=\"https://stackoverflow.com/questions/42611342/representing-voxels-with-matplotlib\">this question</a> or <a href=\"https://stackoverflow.com/questions/40853556/3d-discrete-heatmap-in-matplotlib\">this one</a>."}, {"owner": {"reputation": 3608, "user_id": 887074, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/da9c9afc19776841b62f8980a40c02ec?s=128&d=identicon&r=PG", "display_name": "Erotemic", "link": "https://stackoverflow.com/users/887074/erotemic"}, "reply_to_user": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1518037453, "post_id": 48672663, "comment_id": 84344760, "body": "Ah, I guess you can see them all in the official example, on first glance it looked like you could not. The other answers also look promising. Thanks."}], "answers": [{"tags": [], "owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "is_accepted": true, "score": 6, "last_activity_date": 1518039753, "creation_date": 1518039753, "answer_id": 48673738, "question_id": 48672663, "link": "https://stackoverflow.com/questions/48672663/matplotlib-render-all-internal-voxels-with-alpha/48673738#48673738", "title": "Matplotlib render all internal voxels (with alpha)", "body": "<p>To turn my comments above into an answer: </p>\n\n<ul>\n<li>You may always just plot all voxels as in \n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/42611342/representing-voxels-with-matplotlib\">Representing voxels with matplotlib</a></li>\n<li><a href=\"https://stackoverflow.com/questions/40853556/3d-discrete-heatmap-in-matplotlib\">3D discrete heatmap in matplotlib</a></li>\n</ul></li>\n<li>The <a href=\"https://matplotlib.org/devdocs/gallery/mplot3d/voxels_numpy_logo.html\" rel=\"noreferrer\">official example</a> solves this problem by offsettingt the faces of the voxels by a bit, such they are all drawn.</li>\n<li><a href=\"https://github.com/matplotlib/matplotlib/issues/9745\" rel=\"noreferrer\">This matplotlib issue</a> discusses the missing faces on internal cubes. There is a pull request which has some issues still and it hence not merged yet. </li>\n</ul>\n\n<p>Despite the small issues, you may monkey patch the current status of the pull request into your code: </p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\nfrom mpl_toolkits.mplot3d import Axes3D, art3d  # NOQA\nfrom matplotlib.cbook import _backports\nfrom collections import defaultdict\nimport types\n\ndef voxels(self, *args, **kwargs):\n\n    if len(args) &gt;= 3:\n        # underscores indicate position only\n        def voxels(__x, __y, __z, filled, **kwargs):\n            return (__x, __y, __z), filled, kwargs\n    else:\n        def voxels(filled, **kwargs):\n            return None, filled, kwargs\n\n    xyz, filled, kwargs = voxels(*args, **kwargs)\n\n    # check dimensions\n    if filled.ndim != 3:\n        raise ValueError(\"Argument filled must be 3-dimensional\")\n    size = np.array(filled.shape, dtype=np.intp)\n\n    # check xyz coordinates, which are one larger than the filled shape\n    coord_shape = tuple(size + 1)\n    if xyz is None:\n        x, y, z = np.indices(coord_shape)\n    else:\n        x, y, z = (_backports.broadcast_to(c, coord_shape) for c in xyz)\n\n    def _broadcast_color_arg(color, name):\n        if np.ndim(color) in (0, 1):\n            # single color, like \"red\" or [1, 0, 0]\n            return _backports.broadcast_to(\n                color, filled.shape + np.shape(color))\n        elif np.ndim(color) in (3, 4):\n            # 3D array of strings, or 4D array with last axis rgb\n            if np.shape(color)[:3] != filled.shape:\n                raise ValueError(\n                    \"When multidimensional, {} must match the shape of \"\n                    \"filled\".format(name))\n            return color\n        else:\n            raise ValueError(\"Invalid {} argument\".format(name))\n\n    # intercept the facecolors, handling defaults and broacasting\n    facecolors = kwargs.pop('facecolors', None)\n    if facecolors is None:\n        facecolors = self._get_patches_for_fill.get_next_color()\n    facecolors = _broadcast_color_arg(facecolors, 'facecolors')\n\n    # broadcast but no default on edgecolors\n    edgecolors = kwargs.pop('edgecolors', None)\n    edgecolors = _broadcast_color_arg(edgecolors, 'edgecolors')\n\n    # include possibly occluded internal faces or not\n    internal_faces = kwargs.pop('internal_faces', False)\n\n    # always scale to the full array, even if the data is only in the center\n    self.auto_scale_xyz(x, y, z)\n\n    # points lying on corners of a square\n    square = np.array([\n        [0, 0, 0],\n        [0, 1, 0],\n        [1, 1, 0],\n        [1, 0, 0]\n    ], dtype=np.intp)\n\n    voxel_faces = defaultdict(list)\n\n    def permutation_matrices(n):\n        \"\"\" Generator of cyclic permutation matices \"\"\"\n        mat = np.eye(n, dtype=np.intp)\n        for i in range(n):\n            yield mat\n            mat = np.roll(mat, 1, axis=0)\n\n    for permute in permutation_matrices(3):\n        pc, qc, rc = permute.T.dot(size)\n        pinds = np.arange(pc)\n        qinds = np.arange(qc)\n        rinds = np.arange(rc)\n\n        square_rot = square.dot(permute.T)\n\n        for p in pinds:\n            for q in qinds:\n                p0 = permute.dot([p, q, 0])\n                i0 = tuple(p0)\n                if filled[i0]:\n                    voxel_faces[i0].append(p0 + square_rot)\n\n                # draw middle faces\n                for r1, r2 in zip(rinds[:-1], rinds[1:]):\n                    p1 = permute.dot([p, q, r1])\n                    p2 = permute.dot([p, q, r2])\n                    i1 = tuple(p1)\n                    i2 = tuple(p2)\n                    if filled[i1] and (internal_faces or not filled[i2]):\n                        voxel_faces[i1].append(p2 + square_rot)\n                    elif (internal_faces or not filled[i1]) and filled[i2]:\n                        voxel_faces[i2].append(p2 + square_rot)\n\n                # draw upper faces\n                pk = permute.dot([p, q, rc-1])\n                pk2 = permute.dot([p, q, rc])\n                ik = tuple(pk)\n                if filled[ik]:\n                    voxel_faces[ik].append(pk2 + square_rot)\n\n    # iterate over the faces, and generate a Poly3DCollection for each voxel\n    polygons = {}\n    for coord, faces_inds in voxel_faces.items():\n        # convert indices into 3D positions\n        if xyz is None:\n            faces = faces_inds\n        else:\n            faces = []\n            for face_inds in faces_inds:\n                ind = face_inds[:, 0], face_inds[:, 1], face_inds[:, 2]\n                face = np.empty(face_inds.shape)\n                face[:, 0] = x[ind]\n                face[:, 1] = y[ind]\n                face[:, 2] = z[ind]\n                faces.append(face)\n\n        poly = art3d.Poly3DCollection(faces,\n            facecolors=facecolors[coord],\n            edgecolors=edgecolors[coord],\n            **kwargs\n        )\n        self.add_collection3d(poly)\n        polygons[coord] = poly\n\n    return polygons\n\n\n\nspatial_axes = [5, 5, 5]\nfilled = np.ones(spatial_axes, dtype=np.bool)\n\ncolors = np.empty(spatial_axes + [4], dtype=np.float32)\nalpha = .5\ncolors[0] = [1, 0, 0, alpha]\ncolors[1] = [0, 1, 0, alpha]\ncolors[2] = [0, 0, 1, alpha]\ncolors[3] = [1, 1, 0, alpha]\ncolors[4] = [0, 1, 1, alpha]\n\n# set all internal colors to black with alpha=1\ncolors[1:-1, 1:-1, 1:-1, 0:3] = 0\ncolors[1:-1, 1:-1, 1:-1, 3] = 1\n\nfig = plt.figure()\n\nax = fig.add_subplot('111', projection='3d')\nax.voxels = types.MethodType(voxels, ax)\nax.voxels(filled, facecolors=colors, edgecolors='k',internal_faces=True)\n\nfig = plt.figure()\nax = fig.add_subplot('111', projection='3d')\nax.voxels = types.MethodType(voxels, ax)\nfilled[-1] = False\nax.voxels(filled, facecolors=colors, edgecolors='k',internal_faces=True)\n\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/0FSLf.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/0FSLf.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 3608, "user_id": 887074, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/da9c9afc19776841b62f8980a40c02ec?s=128&d=identicon&r=PG", "display_name": "Erotemic", "link": "https://stackoverflow.com/users/887074/erotemic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4222, "favorite_count": 3, "accepted_answer_id": 48673738, "answer_count": 1, "score": 9, "last_activity_date": 1518039753, "creation_date": 1518035127, "question_id": 48672663, "link": "https://stackoverflow.com/questions/48672663/matplotlib-render-all-internal-voxels-with-alpha", "title": "Matplotlib render all internal voxels (with alpha)", "body": "<p>I want to render a volume in matplotlib. The volume is a simple 7x7x7 cube, and I want to be able to see all internal voxels (even though I know it will look like a mess). </p>\n\n<p><a href=\"https://i.stack.imgur.com/vLogW.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/vLogW.png\" alt=\"enter image description here\"></a>I've been able to render voxels with transparency, but any voxel not on the surface seems to never be drawn. </p>\n\n<p>Each 7x7 slice of the volume should look like this: \n<a href=\"https://i.stack.imgur.com/Exp3D.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/Exp3D.png\" alt=\"enter image description here\"></a></p>\n\n<p>I've thrown together a MWE </p>\n\n<p>The following code creates a 5x5x5 volume with a red,green,blue,yellow, and cyan 5x5 layers. The alpha of each layer is set to .5, so the whole thing should be see-through. </p>\n\n<p>Then I chang the colors of all non-surface voxels to black with alpha 1, so if they were showing we should be able to see a black box in the center. </p>\n\n<p>Rendering it by itself produces the figure on the left, but if we remove the fill from the cyan layer, we can see that the black box does indeed exist, it is just not being shown because it is 100% occluded even though those occluding voxels have alpha less than 1. </p>\n\n<pre><code>import matplotlib.pyplot as plt\nfrom mpl_toolkits.mplot3d import Axes3D  # NOQA\n\nspatial_axes = [5, 5, 5]\nfilled = np.ones(spatial_axes, dtype=np.bool)\n\ncolors = np.empty(spatial_axes + [4], dtype=np.float32)\nalpha = .5\ncolors[0] = [1, 0, 0, alpha]\ncolors[1] = [0, 1, 0, alpha]\ncolors[2] = [0, 0, 1, alpha]\ncolors[3] = [1, 1, 0, alpha]\ncolors[4] = [0, 1, 1, alpha]\n\n# set all internal colors to black with alpha=1\ncolors[1:-1, 1:-1, 1:-1, 0:3] = 0\ncolors[1:-1, 1:-1, 1:-1, 3] = 1\n\nfig = plt.figure()\n\nax = fig.add_subplot('111', projection='3d')\nax.voxels(filled, facecolors=colors, edgecolors='k')\n\nfig = plt.figure()\nax = fig.add_subplot('111', projection='3d')\nfilled[-1] = False\nax.voxels(filled, facecolors=colors, edgecolors='k')\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/XMqGp.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/XMqGp.png\" alt=\"enter image description here\"></a></p>\n\n<p>Is there any way to render all occluded voxels? </p>\n"}, {"tags": ["python", "regex", "string"], "comments": [{"owner": {"reputation": 19159, "user_id": 3600709, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/731c8c4c0029d3414563333de16b8977?s=128&d=identicon&r=PG&f=1", "display_name": "ctwheels", "link": "https://stackoverflow.com/users/3600709/ctwheels"}, "edited": false, "score": 4, "creation_date": 1518035150, "post_id": 48672653, "comment_id": 84343545, "body": "Use a lookahead <code>(?=http)</code>. Also, no need to put <code>s</code> in a set <code>[s]</code> as it&#39;s interpreted literally by default (it doesn&#39;t have special meaning alone). Also, no need to check for <code>s</code> since <code>http</code> is all you really need to look for (think about it, who cares if there&#39;s an <code>s</code> at the end of <code>http</code> if <code>http</code> exists - it already satisfies your first requirement)."}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 1, "creation_date": 1518035316, "post_id": 48672653, "comment_id": 84343638, "body": "What is or are the URLs that you try to match? Where do they end? Do you consider the one starting with <code>http%253a</code> a valid URL?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1518036420, "post_id": 48672653, "comment_id": 84344205, "body": "This is a single url <code>https:&#47;&#47;aax-us.link-two.com&#47;x&#47;c&#47;Qoj_sZnkA%2526adurl%253Dhttp&zwnj;&#8203;%253A%252F%252Fwww.l&zwnj;&#8203;ink-three.mu%252F</code>"}, {"owner": {"reputation": 73, "user_id": 9004517, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a79ade905a8916c37ca26b355d9634e4?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/9004517/adrian"}, "edited": false, "score": 0, "creation_date": 1518795611, "post_id": 48672653, "comment_id": 84664224, "body": "Yes, you&#39;re right, http is all I really need. So the whole string comes from a URL redirection scheme in which I need to extract all the URLs in the chain. Now, I am decoding the urls before splitting them so all the urls are valid in the form of http://."}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 9004517, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a79ade905a8916c37ca26b355d9634e4?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/9004517/adrian"}, "edited": false, "score": 0, "creation_date": 1518795950, "post_id": 48672740, "comment_id": 84664444, "body": "Tested and working well but the string methods worked faster in my large scale project. I used this for another issue tho."}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": false, "score": 1, "last_activity_date": 1518036061, "last_edit_date": 1518036061, "creation_date": 1518035470, "answer_id": 48672740, "question_id": 48672653, "link": "https://stackoverflow.com/questions/48672653/split-a-string-but-keep-the-delimiter-in-the-same-resulting-substring-in-python/48672740#48672740", "title": "Split a string but keep the delimiter in the same resulting substring in Python", "body": "<p>You could use your result and join 2 consecutive matches, that would work.</p>\n\n<pre><code>urls = [urls[i]+urls[i+1] for i in range(0,len(urls),2)]\n</code></pre>\n\n<p>But better use <code>findall</code> with a lookahead on <code>https?</code> or end of string:</p>\n\n<pre><code>import re\n\nstring = \"https://www.link1.net/abc/cik?xai=En8MmT__aF_nQm-F48&amp;amp;sig=Cg0A7_5AE&amp;amp;urlfix=1&amp;amp;;ccurl=https://aax-us.link-two.com/x/c/Qoj_sZnkA%2526adurl%253Dhttp%253A%252F%252Fwww.link-three.mu%252F\"\n\nprint(re.findall(\"https?.*?(?=https?|$)\",string))\n</code></pre>\n\n<p>result:</p>\n\n<pre><code>['https://www.link1.net/abc/cik?xai=En8MmT__aF_nQm-F48&amp;amp;sig=Cg0A7_5AE&amp;amp;urlfix=1&amp;amp;;ccurl=',\n 'https://aax-us.link-two.com/x/c/Qoj_sZnkA%2526adurl%253D', \n 'http%253A%252F%252Fwww.link-three.mu%252F']\n</code></pre>\n\n<p>as noted in comments, since you cannot add <code>:</code> to the delimiter, you have no way of being sure of the URL delimitation (if an URL contains <code>http</code> inside the address you're toast)</p>\n"}, {"comments": [{"owner": {"reputation": 421, "user_id": 4761244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27fde846b0dac5d51ba1360277ff3342?s=128&d=identicon&r=PG&f=1", "display_name": "colopop", "link": "https://stackoverflow.com/users/4761244/colopop"}, "edited": false, "score": 0, "creation_date": 1518036537, "post_id": 48672909, "comment_id": 84344262, "body": "I believe string methods are typically faster than <code>re</code>, so this is a better solution than the others presented so far."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1518124906, "post_id": 48672909, "comment_id": 84388527, "body": "use <code>filter(None, string.split(&#39;http&#39;))</code>, it&#39;s even cleaner. Otherwise good alternative to regex"}, {"owner": {"reputation": 73, "user_id": 9004517, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a79ade905a8916c37ca26b355d9634e4?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/9004517/adrian"}, "edited": false, "score": 0, "creation_date": 1518795662, "post_id": 48672909, "comment_id": 84664260, "body": "Yes, faster indeed!"}], "tags": [], "owner": {"reputation": 54, "user_id": 5618731, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tE8yT-asih0/AAAAAAAAAAI/AAAAAAAAAF4/mCjVNKTvCTQ/photo.jpg?sz=128", "display_name": "Emre K&#252;lah", "link": "https://stackoverflow.com/users/5618731/emre-k%c3%bclah"}, "is_accepted": true, "score": 2, "last_activity_date": 1518036199, "creation_date": 1518036199, "answer_id": 48672909, "question_id": 48672653, "link": "https://stackoverflow.com/questions/48672653/split-a-string-but-keep-the-delimiter-in-the-same-resulting-substring-in-python/48672909#48672909", "title": "Split a string but keep the delimiter in the same resulting substring in Python", "body": "<p>Without using <code>re</code>, you can handle this problem as follows:</p>\n\n<pre><code>['http' + x for x in filter(lambda x: x, string.split('http'))]\n</code></pre>\n\n<p>The result will be:</p>\n\n<pre><code>['https://www.link1.net/abc/cik?xai=En8MmT__aF_nQm-\nF48&amp;amp;sig=Cg0A7_5AE&amp;amp;urlfix=1&amp;amp;;ccurl=', 'https://aax-us.link-\ntwo.com/x/c/Qoj_sZnkA%2526adurl%253D', 'http%253A%252F%252Fwww.link-\nthree.mu%252F']\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 9004517, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a79ade905a8916c37ca26b355d9634e4?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/9004517/adrian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 48672909, "answer_count": 2, "score": 0, "last_activity_date": 1518036199, "creation_date": 1518035091, "question_id": 48672653, "link": "https://stackoverflow.com/questions/48672653/split-a-string-but-keep-the-delimiter-in-the-same-resulting-substring-in-python", "title": "Split a string but keep the delimiter in the same resulting substring in Python", "body": "<p>I have a string containing URLs:</p>\n\n<p><code>string = https://www.link1.net/abc/cik?xai=En8MmT__aF_nQm-F48&amp;amp;sig=Cg0A7_5AE&amp;amp;urlfix=1&amp;amp;;ccurl=https://aax-us.link-two.com/x/c/Qoj_sZnkA%2526adurl%253Dhttp%253A%252F%252Fwww.link-three.mu%252F</code></p>\n\n<p>I want to extract all of them to have a result like this:</p>\n\n<p><code>['https://www.link1.net/abc/cik?xai=En8MmT__aF_nQm-F48&amp;amp;sig=Cg0A7_5AE&amp;amp;urlfix=1&amp;amp;;ccurl=','https://aax-us.link-two.com/x/c/Qoj_sZnkA%2526adurl%253D','http%253A%252F%252Fwww.link-three.mu%252F']</code></p>\n\n<p>I am trying:</p>\n\n<pre><code>urls = [x for x in re.split('(http[s]?)', string) if x]\nprint urls \n</code></pre>\n\n<p>And the result is:</p>\n\n<p><code>['https', '://www.link1.net/abc/cik?xai=En8MmT__aF_nQm-\nF48&amp;amp;sig=Cg0A7_5AE&amp;amp;urlfix=1&amp;amp;;ccurl=', 'https', '://aax-us.link-two.com/x/c/Qoj_sZnkA%2526adurl%253D', 'http', '%253A%252F%252Fwww.link-three.mu%252F']</code></p>\n\n<p>How can I get the the complete URL together given that it can start with 'http' or 'https'?</p>\n\n<p>Any ideas please?</p>\n"}]