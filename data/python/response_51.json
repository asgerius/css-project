[{"tags": ["python", "arrays", "json", "list", "reddit"], "comments": [{"owner": {"reputation": 4955, "user_id": 5274205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3a281a1418dbceeda34cc93d3744554?s=128&d=identicon&r=PG", "display_name": "Chad S.", "link": "https://stackoverflow.com/users/5274205/chad-s"}, "edited": false, "score": 1, "creation_date": 1451520519, "post_id": 34539129, "comment_id": 56820622, "body": "theJSON doesn&#39;t have a key &#39;data&#39;."}, {"owner": {"reputation": 4831, "user_id": 3144928, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e2a01c799169f3de4c57c0f0366840f?s=128&d=identicon&r=PG", "display_name": "Ben Aubin", "link": "https://stackoverflow.com/users/3144928/ben-aubin"}, "edited": false, "score": 0, "creation_date": 1451521080, "post_id": 34539129, "comment_id": 56820765, "body": "Welcome to Stack Overflow! You&#39;ll probably want to post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> in the future, as it helps people know where the problem is, and other things, thanks!"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 1, "creation_date": 1451596978, "post_id": 34539129, "comment_id": 56845761, "body": "You can simply call <code>theJson = r.json()</code>"}], "answers": [{"comments": [{"owner": {"reputation": 4421, "user_id": 3789676, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/aUh8k.jpg?s=128&g=1", "display_name": "midori", "link": "https://stackoverflow.com/users/3789676/midori"}, "edited": false, "score": 0, "creation_date": 1451596056, "post_id": 34551569, "comment_id": 56845526, "body": "Problem is not in the post, it&#39;s in theJSON"}], "tags": [], "owner": {"reputation": 8920, "user_id": 691859, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/5333743a4b84fe403d8429a9eab75d94?s=128&d=identicon&r=PG", "display_name": "2rs2ts", "link": "https://stackoverflow.com/users/691859/2rs2ts"}, "is_accepted": false, "score": 0, "last_activity_date": 1451596998, "last_edit_date": 1451596998, "creation_date": 1451595822, "answer_id": 34551569, "question_id": 34539129, "link": "https://stackoverflow.com/questions/34539129/parsing-reddit-json-into-python-array-and-print-items-from-array/34551569#34551569", "title": "Parsing reddit json into Python array and print items from array", "body": "<p>This means that the payload you got didn't have a <code>data</code> key in it, for whatever reason. I don't know about Reddit's JSON API; I tested the request and saw that you were using the correct keys. The fact that you say your code works every few times tells me that you're getting a different response between requests. I can't reproduce it, I tried making the request over and over and checking for the correct response. If I had to guess why you'd get something different I'd say it'd have to be either rate limiting or a temporary 503 (Reddit having issues.)</p>\n\n<p>You can guard against this by either catching the <code>KeyError</code> or using the <code>.get</code> method of dictionaries.</p>\n\n<p>Catching <code>KeyError</code>:</p>\n\n<pre><code>try:\n    Children = theJSON[\"data\"][\"children\"]\nexcept KeyError:\n    print 'bad payload'\n    return\n</code></pre>\n\n<p>Using <code>.get</code>:</p>\n\n<pre><code>Children = theJSON.get(\"data\", {}).get(\"children\")\nif not Children:\n    print 'bad payload'\n    return\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8920, "user_id": 691859, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/5333743a4b84fe403d8429a9eab75d94?s=128&d=identicon&r=PG", "display_name": "2rs2ts", "link": "https://stackoverflow.com/users/691859/2rs2ts"}, "edited": false, "score": 0, "creation_date": 1452728684, "post_id": 34570303, "comment_id": 57303387, "body": "Wacky, I could not reproduce after making the request hundreds of times in quick succession without this header."}, {"owner": {"reputation": 11462, "user_id": 120999, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/PrVf3.png?s=128&g=1", "display_name": "Xiong Chiamiov", "link": "https://stackoverflow.com/users/120999/xiong-chiamiov"}, "edited": false, "score": 0, "creation_date": 1455833123, "post_id": 34570303, "comment_id": 58679391, "body": "You really should not try to pretend your script is Chrome; doing so is against <a href=\"https://github.com/reddit/reddit/wiki/API#rules\" rel=\"nofollow noreferrer\">the API rules</a> and will get you banned with prejudice.  You <i>should</i> use a custom user agent that identifies your script, and ideally your username, so the operations folks can separate out your client from others."}], "tags": [], "owner": {"reputation": 418, "user_id": 5484902, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5qU9Z.jpg?s=128&g=1", "display_name": "Gal_M", "link": "https://stackoverflow.com/users/5484902/gal-m"}, "is_accepted": true, "score": 3, "last_activity_date": 1451766618, "last_edit_date": 1495540373, "creation_date": 1451765897, "answer_id": 34570303, "question_id": 34539129, "link": "https://stackoverflow.com/questions/34539129/parsing-reddit-json-into-python-array-and-print-items-from-array/34570303#34570303", "title": "Parsing reddit json into Python array and print items from array", "body": "<p>I've managed to find a solution with the help of <a href=\"https://stackoverflow.com/users/1072846/eric\">Eric</a>. The issue here was in fact not related to the key, parsing or presentation of the dict or array. When requesting a Url from reddit and attempting to print the json string output we encounter an HTTP Error 429. Fixing this is simple. The answer was found on <a href=\"https://www.reddit.com/r/redditdev/comments/2yac4j/python_consistently_getting_429_errors_following/\" rel=\"nofollow noreferrer\">this</a> redditdev thread.</p>\n\n<p>Solution: by adding an identifier for the device requesting the Url ('User-agent' in header) it runs smoothly and works every time. </p>\n\n<pre><code>import requests\nimport json\n\nr = requests.get('https://www.reddit.com/r/worldnews.json', headers = {'User-agent': 'Chrome'})\n\ntheJSON = json.loads(r.text)\nprint theJSON\n</code></pre>\n"}], "owner": {"reputation": 418, "user_id": 5484902, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5qU9Z.jpg?s=128&g=1", "display_name": "Gal_M", "link": "https://stackoverflow.com/users/5484902/gal-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2006, "favorite_count": 0, "accepted_answer_id": 34570303, "answer_count": 2, "score": 3, "last_activity_date": 1451766618, "creation_date": 1451519984, "question_id": 34539129, "link": "https://stackoverflow.com/questions/34539129/parsing-reddit-json-into-python-array-and-print-items-from-array", "title": "Parsing reddit json into Python array and print items from array", "body": "<p>This is my first couple of weeks coding; apologies for a basic question.</p>\n\n<p>I've managed to parse the 'WorldNews' subreddit json, identify the individual children (24 of them as I write) and grab the titles of each news item. I'm now trying to create an array from these news titles. The code below does print the fifth title ([4]) to command line every 2-3 attempts (otherwise provides the error below). It will also not print more than one title at a time (for example if I try[2,3,4] I will continuously get the same error). </p>\n\n<p>The error I get when doesn't compile: </p>\n\n<pre><code>in &lt;module&gt; Children = theJSON[\"data\"][\"children\"] KeyError: 'data'\n</code></pre>\n\n<p>My script:</p>\n\n<pre><code>import requests \nimport json\n\n\nr = requests.get('https://www.reddit.com/r/worldnews/.json')\ntheJSON = json.loads(r.text)\nChildren = theJSON[\"data\"][\"children\"]\n\nNews_list = []\n\nfor post in Children:\n    News_list.append (post[\"data\"][\"title\"])\n\nprint News_list [4] \n</code></pre>\n"}, {"tags": ["python", "swift", "haskell", "optional", "maybe"], "comments": [{"owner": {"reputation": 300, "user_id": 5712371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kLwV3.jpg?s=128&g=1", "display_name": "Snusmumrikken", "link": "https://stackoverflow.com/users/5712371/snusmumrikken"}, "edited": false, "score": 1, "creation_date": 1451520261, "post_id": 34539117, "comment_id": 56820537, "body": "Confusing title and tags."}, {"owner": {"reputation": 4955, "user_id": 5274205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3a281a1418dbceeda34cc93d3744554?s=128&d=identicon&r=PG", "display_name": "Chad S.", "link": "https://stackoverflow.com/users/5274205/chad-s"}, "edited": false, "score": 0, "creation_date": 1451520345, "post_id": 34539117, "comment_id": 56820560, "body": "You can use a conditional expression:  <code>var.prop if var else var</code> but in general in python you&#39;re expected to know when something is None and when it isn&#39;t and not ask over and over."}, {"owner": {"reputation": 4558, "user_id": 4293417, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/15V7E.png?s=128&g=1", "display_name": "Zizouz212", "link": "https://stackoverflow.com/users/4293417/zizouz212"}, "reply_to_user": {"reputation": 300, "user_id": 5712371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kLwV3.jpg?s=128&g=1", "display_name": "Snusmumrikken", "link": "https://stackoverflow.com/users/5712371/snusmumrikken"}, "edited": false, "score": 6, "creation_date": 1451520348, "post_id": 34539117, "comment_id": 56820562, "body": "@Snusmumrikken Not really, it&#39;s really clear, you just need to understand the concepts of Swift or Haskell to be able to understand it"}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1451520810, "post_id": 34539117, "comment_id": 56820693, "body": "What are you actually trying to <i>achieve</i> with this? Could you give a less abstract example?"}, {"owner": {"reputation": 4955, "user_id": 5274205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3a281a1418dbceeda34cc93d3744554?s=128&d=identicon&r=PG", "display_name": "Chad S.", "link": "https://stackoverflow.com/users/5274205/chad-s"}, "edited": false, "score": 0, "creation_date": 1451520822, "post_id": 34539117, "comment_id": 56820700, "body": "Are you asking how to check for None, or how to check if a variable exists (won&#39;t raise a NameError)?"}, {"owner": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 1, "creation_date": 1451551508, "post_id": 34539117, "comment_id": 56828826, "body": "Just to be pedantic, what you describe is <code>fmap prop var</code>, not <code>var &gt;&gt;= prop</code>, though it seems <code>var &gt;&gt;= prop</code> more closely describes what you are looking for, since it could result in <code>None</code> even if <code>var</code> is not itself <code>None</code>."}], "answers": [{"comments": [{"owner": {"reputation": 321, "user_id": 2063220, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1kwkW.png?s=128&g=1", "display_name": "Sergey Salnikov", "link": "https://stackoverflow.com/users/2063220/sergey-salnikov"}, "edited": false, "score": 1, "creation_date": 1451522138, "post_id": 34539197, "comment_id": 56821032, "body": "Well, not exactly. If <code>var</code> is sometimes an object with <code>prop</code> and sometimes <code>None</code>, then it&#39;s just the same as an implicit Optional. Python&#39;s <code>var.prop</code> in this view is similar to <code>var!.prop</code> in Swift: it would throw if <code>var</code> is <code>None</code>. Then, <code>var</code> could also be some other object without <code>prop</code>: Swift calls this &quot;not implementing the protocol&quot;, so a more exact translation is something like <code>(var! as! havingProp).prop</code>. And then the main difference is just that Swift makes each assumption of this kind explicit with an exclamation mark."}, {"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 7, "creation_date": 1451523233, "post_id": 34539197, "comment_id": 56821294, "body": "\u201cIn Python fynamic typing makes it trivial\u201d \u2013 since when is an inline conditional trivial compared to <code>.?</code>?"}, {"owner": {"reputation": 2173, "user_id": 1132101, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/a59cd6a2179d901a8aea077b0125c19a?s=128&d=identicon&r=PG", "display_name": "skagedal", "link": "https://stackoverflow.com/users/1132101/skagedal"}, "edited": false, "score": 1, "creation_date": 1451525180, "post_id": 34539197, "comment_id": 56821798, "body": "IMO, you should remove the opinion bit - this isn&#39;t the place to discuss which language constructs are &quot;weird&quot; and which ones are &quot;trivial&quot;. Otherwise, this is a fine answer - I like that you explore various options. (However, the really short answer is: &quot;No. There is no such syntax.&quot;)"}, {"owner": {"reputation": 8720, "user_id": 3846213, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/5PGh1.jpg?s=128&g=1", "display_name": "Eli Korvigo", "link": "https://stackoverflow.com/users/3846213/eli-korvigo"}, "reply_to_user": {"reputation": 2173, "user_id": 1132101, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/a59cd6a2179d901a8aea077b0125c19a?s=128&d=identicon&r=PG", "display_name": "skagedal", "link": "https://stackoverflow.com/users/1132101/skagedal"}, "edited": false, "score": 1, "creation_date": 1451539016, "post_id": 34539197, "comment_id": 56824791, "body": "@skagedal ok, I removed that"}, {"owner": {"reputation": 8720, "user_id": 3846213, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/5PGh1.jpg?s=128&g=1", "display_name": "Eli Korvigo", "link": "https://stackoverflow.com/users/3846213/eli-korvigo"}, "reply_to_user": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1451548700, "post_id": 34539197, "comment_id": 56827933, "body": "@RyanO&#39;Hara Yes, I agree that my statement was primarily opinion-based hance inappropriate for the answer."}], "tags": [], "owner": {"reputation": 8720, "user_id": 3846213, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/5PGh1.jpg?s=128&g=1", "display_name": "Eli Korvigo", "link": "https://stackoverflow.com/users/3846213/eli-korvigo"}, "is_accepted": false, "score": 2, "last_activity_date": 1451742897, "last_edit_date": 1451742897, "creation_date": 1451520421, "answer_id": 34539197, "question_id": 34539117, "link": "https://stackoverflow.com/questions/34539117/swift-optionals-or-haskells-maybe-in-python/34539197#34539197", "title": "Swift Optionals (or Haskell&#39;s Maybe) in Python?", "body": "<p>Long story short, there is no special syntax to handle optionals (since there are no optionals), though you can use conditional assignment (ternary operator) to mimic the functionality:</p>\n\n<pre><code>unpacked_var = var.prop if var is not None else None\n</code></pre>\n\n<p>Though in Python I would rather check whether <code>var</code> has the attribute you want to access.</p>\n\n<pre><code>unpacked_var = var.prop if hasattr(var, \"prop\") else None\n</code></pre>\n\n<p>You can write a function to make it shorter</p>\n\n<pre><code>def optional(var, attr):\n    return getattr(var, attr) if hasattr(var, attr) else None\n\nunpacked_var = optional(var, \"prop\")\n</code></pre>\n\n<p>There is a less universal way to do this (and less explicit, IMHO):</p>\n\n<pre><code>unpacked_var = hasattr(var, \"prop\") and var.prop or None\n</code></pre>\n\n<p>The problem here is that you'll get <code>None</code> if <code>bool(var.prop) == False</code>, so you'd better stick to the ternary operator above.  </p>\n"}, {"comments": [{"owner": {"reputation": 8720, "user_id": 3846213, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/5PGh1.jpg?s=128&g=1", "display_name": "Eli Korvigo", "link": "https://stackoverflow.com/users/3846213/eli-korvigo"}, "edited": false, "score": 0, "creation_date": 1451560159, "post_id": 34541692, "comment_id": 56832618, "body": "&quot;The other answers are on the right track in suggesting a conditional expression, but wrong about how to do it. You can do it this way&quot; - how is my anawer wrong if it is identical to yours?"}, {"owner": {"reputation": 209114, "user_id": 1427416, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/QWHKg.png?s=128&g=1", "display_name": "BrenBarn", "link": "https://stackoverflow.com/users/1427416/brenbarn"}, "reply_to_user": {"reputation": 8720, "user_id": 3846213, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/5PGh1.jpg?s=128&g=1", "display_name": "Eli Korvigo", "link": "https://stackoverflow.com/users/3846213/eli-korvigo"}, "edited": false, "score": 1, "creation_date": 1451588901, "post_id": 34541692, "comment_id": 56843634, "body": "@EliKorvigo: Your answer was wrong at the time I started writing this, but you then edited it."}, {"owner": {"reputation": 1754, "user_id": 1337499, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e1de83c70cce75118af8dc5a30cde90b?s=128&d=identicon&r=PG", "display_name": "Alex Alifimoff", "link": "https://stackoverflow.com/users/1337499/alex-alifimoff"}, "edited": false, "score": 0, "creation_date": 1549499989, "post_id": 34541692, "comment_id": 95928191, "body": "I believe this will be in Python 3.8 as of 2019."}], "tags": [], "owner": {"reputation": 209114, "user_id": 1427416, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/QWHKg.png?s=128&g=1", "display_name": "BrenBarn", "link": "https://stackoverflow.com/users/1427416/brenbarn"}, "is_accepted": true, "score": 6, "last_activity_date": 1451540747, "creation_date": 1451540747, "answer_id": 34541692, "question_id": 34539117, "link": "https://stackoverflow.com/questions/34539117/swift-optionals-or-haskells-maybe-in-python/34541692#34541692", "title": "Swift Optionals (or Haskell&#39;s Maybe) in Python?", "body": "<p>The other answers are on the right track in suggesting a conditional expression, but wrong about how to do it.  You can do it this way:</p>\n\n<pre><code>None if var is None else var.prop\n</code></pre>\n\n<p>or, equivalently</p>\n\n<pre><code>var.prop if var is not None else None\n</code></pre>\n\n<p>There is a <a href=\"https://www.python.org/dev/peps/pep-0505\" rel=\"noreferrer\">draft PEP</a> about adding such a feature to Python, and ther has been discussion of it on the Python-ideas mailing list.  It doesn't look like it will be added in the near future (if ever), but reading the PEP will give you an idea of some existing and proposed ways of handling this.</p>\n"}, {"tags": [], "owner": {"reputation": 1710, "user_id": 2654466, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/182900946/picture?type=large", "display_name": "Chad Befus", "link": "https://stackoverflow.com/users/2654466/chad-befus"}, "is_accepted": false, "score": 1, "last_activity_date": 1537998295, "creation_date": 1537998295, "answer_id": 52526426, "question_id": 34539117, "link": "https://stackoverflow.com/questions/34539117/swift-optionals-or-haskells-maybe-in-python/52526426#52526426", "title": "Swift Optionals (or Haskell&#39;s Maybe) in Python?", "body": "<p>Using <code>None</code> can be tricky for maintaining clean call site code.  It means that you need to have a lot of defensive conditionals.  As you can see from the other answers, there is a lot of support from smart people for this method.</p>\n\n<p>An alternative is to use an <strong>Optional type</strong>, which much like a collection type (list, set, dict, etc.) is explicitly either empty or not, but unlike other collection types, can only hold 1 element.  This means that all your returns from a function return an object with the same capabilities.  Just as with something returning a collection, when things go awry but not exceptionally so, you can return the empty version of that collection (ex. there are no users older than 100 in the db) you can use an optional type to do the same (ex. there is no user in the db with username foobar).  </p>\n\n<p>Since python does not come with a built in optional type, I created a small library that provides it: <a href=\"https://github.com/cbefus/optional.py\" rel=\"nofollow noreferrer\"><strong>optional.py</strong></a>.  You can try it out using 'pip install optional.py'.  I welcome comments, feature requests, and contributions.</p>\n"}], "owner": {"reputation": 11606, "user_id": 1002430, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/ufy7U.png?s=128&g=1", "display_name": "Ana", "link": "https://stackoverflow.com/users/1002430/ana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2563, "favorite_count": 2, "accepted_answer_id": 34541692, "answer_count": 3, "score": 11, "last_activity_date": 1537998295, "creation_date": 1451519962, "question_id": 34539117, "link": "https://stackoverflow.com/questions/34539117/swift-optionals-or-haskells-maybe-in-python", "title": "Swift Optionals (or Haskell&#39;s Maybe) in Python?", "body": "<p>In Swift I can do <code>var?.prop</code>. This results in <code>nil</code> if <code>var</code> is <code>nil</code>, else it results in the value of the <code>prop</code> property of <code>var</code>. </p>\n\n<p>Equivalently, I can do <code>var &gt;&gt;= prop</code> in Haskell, which gives me <code>None</code> is <code>var</code> is <code>None</code>, else it gives me the value of applying <code>prop</code> to the value inside <code>var</code> (wrapped in <code>Just</code>).</p>\n\n<p>Is there an equivalent in Python?</p>\n"}, {"tags": ["python", "web-services", "soap", "wsdl", "client-server"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 1217742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a04bcb8eb9ea78a498322d15e58c417?s=128&d=identicon&r=PG", "display_name": "Gianluca Petito", "link": "https://stackoverflow.com/users/1217742/gianluca-petito"}, "edited": false, "score": 0, "creation_date": 1451772654, "post_id": 34539190, "comment_id": 56887045, "body": "ok, now it response <code>not well-formed (invalid token)</code> but using php it works:  <code>$client = new SoapClient( $url ); $result = $client-&gt;__soapCall(&quot;wsExtAuth..ckAuth&quot;,array(&#39;username&#39;=&gt;&#39;x&zwnj;&#8203;x&#39;)</code>"}], "tags": [], "owner": {"reputation": 105769, "user_id": 1267329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f943c14b945cadc0ee0afa6ef70d2103?s=128&d=identicon&r=PG", "display_name": "Simeon Visser", "link": "https://stackoverflow.com/users/1267329/simeon-visser"}, "is_accepted": true, "score": 0, "last_activity_date": 1451520380, "creation_date": 1451520380, "answer_id": 34539190, "question_id": 34539092, "link": "https://stackoverflow.com/questions/34539092/python-suds-client-and-not-standard-service-name/34539190#34539190", "title": "Python suds client and not standard service name", "body": "<p>You could try:</p>\n\n<pre><code>getattr(client.service, 'wsExtAuth..ckAuth')(username='xx')\n</code></pre>\n\n<p>Also, make sure you're using <a href=\"https://pypi.python.org/pypi/suds-jurko\" rel=\"nofollow\"><code>suds-jurko</code></a> and not the outdated <code>suds</code> client.</p>\n"}], "owner": {"reputation": 3, "user_id": 1217742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a04bcb8eb9ea78a498322d15e58c417?s=128&d=identicon&r=PG", "display_name": "Gianluca Petito", "link": "https://stackoverflow.com/users/1217742/gianluca-petito"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 329, "favorite_count": 0, "accepted_answer_id": 34539190, "answer_count": 1, "score": 0, "last_activity_date": 1451525723, "creation_date": 1451519816, "last_edit_date": 1451525723, "question_id": 34539092, "link": "https://stackoverflow.com/questions/34539092/python-suds-client-and-not-standard-service-name", "title": "Python suds client and not standard service name", "body": "<p>Look at this example:</p>\n\n<pre><code>from suds.client import Client\nurl = 'http://xxx.yy.com/etc...'\nclient = Client(url)\nresult = client.service.wsExtAuth..ckAuth(username='xx')\n</code></pre>\n\n<p>The service \"wsExtAuth..ckAuth\" is not standard (name) and compiler return syntax error. How can I use it?</p>\n"}, {"tags": ["python", "list", "python-2.7", "dictionary", "python-2.x"], "comments": [{"owner": {"reputation": 64040, "user_id": 3620003, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QnqtZ.jpg?s=128&g=1", "display_name": "timgeb", "link": "https://stackoverflow.com/users/3620003/timgeb"}, "edited": false, "score": 0, "creation_date": 1451519701, "post_id": 34539065, "comment_id": 56820404, "body": "We need a sample dictionary and the desired result, it is not completely clear what you are asking."}, {"owner": {"reputation": 241, "user_id": 3889320, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/cc999e4ead1d8f02ea1ad4b27b0d5bdc?s=128&d=identicon&r=PG&f=1", "display_name": "Thisisstackoverflow", "link": "https://stackoverflow.com/users/3889320/thisisstackoverflow"}, "reply_to_user": {"reputation": 64040, "user_id": 3620003, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QnqtZ.jpg?s=128&g=1", "display_name": "timgeb", "link": "https://stackoverflow.com/users/3620003/timgeb"}, "edited": false, "score": 0, "creation_date": 1451520767, "post_id": 34539065, "comment_id": 56820685, "body": "Added  sample at the end of the post."}], "answers": [{"comments": [{"owner": {"reputation": 241, "user_id": 3889320, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/cc999e4ead1d8f02ea1ad4b27b0d5bdc?s=128&d=identicon&r=PG&f=1", "display_name": "Thisisstackoverflow", "link": "https://stackoverflow.com/users/3889320/thisisstackoverflow"}, "edited": false, "score": 0, "creation_date": 1451520191, "post_id": 34539098, "comment_id": 56820520, "body": "Huh, ok. I&#39;ll try it. And classes scare me. Never touched them before. Not against it though."}, {"owner": {"reputation": 2759, "user_id": 2809008, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff24f265a3c1712e989e0654a8c16f2a?s=128&d=identicon&r=PG", "display_name": "ljetibo", "link": "https://stackoverflow.com/users/2809008/ljetibo"}, "reply_to_user": {"reputation": 241, "user_id": 3889320, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/cc999e4ead1d8f02ea1ad4b27b0d5bdc?s=128&d=identicon&r=PG&f=1", "display_name": "Thisisstackoverflow", "link": "https://stackoverflow.com/users/3889320/thisisstackoverflow"}, "edited": false, "score": 0, "creation_date": 1451520324, "post_id": 34539098, "comment_id": 56820551, "body": "@Thisisstackoverflow; trust me, they look a bit &quot;scary&quot; at first because they have all those <code>__</code> methods and the names change (i.e. functions in a class are called methods, etc..) but it&#39;s worth it. If you are following a tutorial then just follow it along and don&#39;t skip ahead to classes. They will most likely come soon enough in the book/tutorial."}], "tags": [], "owner": {"reputation": 2759, "user_id": 2809008, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff24f265a3c1712e989e0654a8c16f2a?s=128&d=identicon&r=PG", "display_name": "ljetibo", "link": "https://stackoverflow.com/users/2809008/ljetibo"}, "is_accepted": true, "score": 7, "last_activity_date": 1451519865, "creation_date": 1451519865, "answer_id": 34539098, "question_id": 34539065, "link": "https://stackoverflow.com/questions/34539065/how-do-i-append-multiple-lists-to-one-key-in-a-python-dictionary/34539098#34539098", "title": "How do I append multiple lists to one key in a python dictionary?", "body": "<p>You can have each dictionary entry a list, so you append to that list.</p>\n\n<pre><code>&gt;&gt;&gt; a = Linter(\"ahahah\")\n&gt;&gt;&gt; a.write_file()\n&gt;&gt;&gt; a = dict()\n&gt;&gt;&gt; a[\"first\"] = []\n&gt;&gt;&gt; a[\"first\"].append([1,2,3])\n&gt;&gt;&gt; a[\"first\"].append([4,5,6])\n&gt;&gt;&gt; a[\"second\"] = []\n&gt;&gt;&gt; a[\"second\"].append([7,8,9])\n&gt;&gt;&gt; a\n{\n 'second':[  \n              [7, 8, 9]\n          ], \n 'first': [  \n              [1, 2, 3], \n              [4, 5, 6]\n          ]\n}\n</code></pre>\n\n<p>but honestly, at some point just consider using classes?</p>\n"}, {"comments": [{"owner": {"reputation": 64040, "user_id": 3620003, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QnqtZ.jpg?s=128&g=1", "display_name": "timgeb", "link": "https://stackoverflow.com/users/3620003/timgeb"}, "edited": false, "score": 0, "creation_date": 1451519957, "post_id": 34539099, "comment_id": 56820458, "body": "note that the author said a value could also be multiple lists (I assume list of lists). It&#39;s completely unclear what is asked for."}, {"owner": {"reputation": 241, "user_id": 3889320, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/cc999e4ead1d8f02ea1ad4b27b0d5bdc?s=128&d=identicon&r=PG&f=1", "display_name": "Thisisstackoverflow", "link": "https://stackoverflow.com/users/3889320/thisisstackoverflow"}, "edited": false, "score": 0, "creation_date": 1451520153, "post_id": 34539099, "comment_id": 56820507, "body": "That is one list. What I&#39;m looking for are multiple lists within one key."}, {"owner": {"reputation": 4421, "user_id": 3789676, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/aUh8k.jpg?s=128&g=1", "display_name": "midori", "link": "https://stackoverflow.com/users/3789676/midori"}, "edited": false, "score": 0, "creation_date": 1451520221, "post_id": 34539099, "comment_id": 56820531, "body": "what do you mean by multiple lists? list of lists?"}, {"owner": {"reputation": 2759, "user_id": 2809008, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff24f265a3c1712e989e0654a8c16f2a?s=128&d=identicon&r=PG", "display_name": "ljetibo", "link": "https://stackoverflow.com/users/2809008/ljetibo"}, "edited": false, "score": 0, "creation_date": 1451520506, "post_id": 34539099, "comment_id": 56820620, "body": "To the discussion here, this are lists of lists. @pianista; created a dictionary with a list containing string &quot;b&quot;. Then he said [&quot;b&quot;] (which is a list) + [&quot;c&quot;] (which is also a list). In python doing [1]+[2] is [1,2], that is &quot;adding&quot; lists concatenates them into larger lists. This is also a valid answer because <code>[1]+[2, [1,2]]</code> is <code>[1, 2, [1, 2]]</code>"}, {"owner": {"reputation": 241, "user_id": 3889320, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/cc999e4ead1d8f02ea1ad4b27b0d5bdc?s=128&d=identicon&r=PG&f=1", "display_name": "Thisisstackoverflow", "link": "https://stackoverflow.com/users/3889320/thisisstackoverflow"}, "edited": false, "score": 0, "creation_date": 1451520591, "post_id": 34539099, "comment_id": 56820639, "body": "I edited my post. ljetibo&#39;s answer is what I was looking for. Sorry for the confusion."}], "tags": [], "owner": {"reputation": 4421, "user_id": 3789676, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/aUh8k.jpg?s=128&g=1", "display_name": "midori", "link": "https://stackoverflow.com/users/3789676/midori"}, "is_accepted": false, "score": 3, "last_activity_date": 1451519867, "creation_date": 1451519867, "answer_id": 34539099, "question_id": 34539065, "link": "https://stackoverflow.com/questions/34539065/how-do-i-append-multiple-lists-to-one-key-in-a-python-dictionary/34539099#34539099", "title": "How do I append multiple lists to one key in a python dictionary?", "body": "<p>Is this what you are trying to achieve?</p>\n\n<pre><code>&gt;&gt;&gt; d={'a': ['b']}\n&gt;&gt;&gt; d['a']\n['b']\n&gt;&gt;&gt; d['a'] += ['c']\n&gt;&gt;&gt; d['a']\n['b', 'c']\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 241, "user_id": 3889320, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/cc999e4ead1d8f02ea1ad4b27b0d5bdc?s=128&d=identicon&r=PG&f=1", "display_name": "Thisisstackoverflow", "link": "https://stackoverflow.com/users/3889320/thisisstackoverflow"}, "edited": false, "score": 0, "creation_date": 1451520891, "post_id": 34539241, "comment_id": 56820717, "body": "This looks like it will work as well, and is a little cleaner to look at. Thanks."}, {"owner": {"reputation": 4089, "user_id": 2457483, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/b32cc314ac87932457e71c98ff8d140e?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/2457483/daniel"}, "reply_to_user": {"reputation": 241, "user_id": 3889320, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/cc999e4ead1d8f02ea1ad4b27b0d5bdc?s=128&d=identicon&r=PG&f=1", "display_name": "Thisisstackoverflow", "link": "https://stackoverflow.com/users/3889320/thisisstackoverflow"}, "edited": false, "score": 0, "creation_date": 1451521015, "post_id": 34539241, "comment_id": 56820749, "body": "No problem. The counter module is pretty useful. Make sure to check it out."}], "tags": [], "owner": {"reputation": 4089, "user_id": 2457483, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/b32cc314ac87932457e71c98ff8d140e?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/2457483/daniel"}, "is_accepted": false, "score": 3, "last_activity_date": 1451520747, "creation_date": 1451520747, "answer_id": 34539241, "question_id": 34539065, "link": "https://stackoverflow.com/questions/34539065/how-do-i-append-multiple-lists-to-one-key-in-a-python-dictionary/34539241#34539241", "title": "How do I append multiple lists to one key in a python dictionary?", "body": "<p>You can use a <a href=\"https://docs.python.org/2/library/collections.html#collections.defaultdict\" rel=\"nofollow\">defaultdict</a> to accomplish what you need.</p>\n\n<pre><code>from collections import defaultdict\nmy_dict = defaultdict(list)\nmy_dict[1].append([1,2])\nmy_dict[1].append([3,4])\nmy_dict[2].append([8,9])\n</code></pre>\n\n<p>Now you can access each key element as you would access a <code>dictionary</code></p>\n\n<pre><code>&gt;&gt;&gt; my_dict[1]\n[[1, 2], [3, 4]]\n\n\n&gt;&gt;&gt; for k, v in my_dict.iteritems():\n        print k,v\n\n1 [[1, 2], [3, 4]]\n2 [[8, 9]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 12110689, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAmlJV4LEx172AF54XeWjJSZY4fQP5pSQPk_ytm=k-s128", "display_name": "Surya-ra", "link": "https://stackoverflow.com/users/12110689/surya-ra"}, "is_accepted": false, "score": 0, "last_activity_date": 1569295758, "creation_date": 1569295758, "answer_id": 58072695, "question_id": 34539065, "link": "https://stackoverflow.com/questions/34539065/how-do-i-append-multiple-lists-to-one-key-in-a-python-dictionary/58072695#58072695", "title": "How do I append multiple lists to one key in a python dictionary?", "body": "<pre><code>class My_Dictionary(dict):\n\n    def __init__(self):\n        self = dict()\n\n    def add(self, key, value):\n        try:\n            self[key].append(value)\n        except KeyError:\n            self[key] = [value]\n\nif __name__ == '__main__':\n    dict_obj = My_Dictionary()\n    key = 0\n    take_1 = [1,6,2,4]\n    take_2 = [7,3,5,6]\n    dict_obj.add(key, take_1)\n    dict_obj.add(key, take_2)\n    print(dict_obj)\n</code></pre>\n\n<p>This code will return a dictionary in your desired format.\n{0: [[1, 6, 2, 4], [7, 3, 5, 6]]}</p>\n"}], "owner": {"reputation": 241, "user_id": 3889320, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/cc999e4ead1d8f02ea1ad4b27b0d5bdc?s=128&d=identicon&r=PG&f=1", "display_name": "Thisisstackoverflow", "link": "https://stackoverflow.com/users/3889320/thisisstackoverflow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7381, "favorite_count": 0, "accepted_answer_id": 34539098, "answer_count": 4, "score": 3, "last_activity_date": 1569295758, "creation_date": 1451519629, "last_edit_date": 1454732255, "question_id": 34539065, "link": "https://stackoverflow.com/questions/34539065/how-do-i-append-multiple-lists-to-one-key-in-a-python-dictionary", "title": "How do I append multiple lists to one key in a python dictionary?", "body": "<p>I want to append values to a key in a dictionary, where the values are actually lists. There could be one list, or there could be multiple lists. </p>\n\n<p>The current way I'm trying to do it, the new list I try to add on just overwrites the last list. As far as I can tell, I can't append a list to a dict like so either:</p>\n\n<pre><code>my_dict.append(my_list))\n</code></pre>\n\n<p>Current code that overwrites each other:</p>\n\n<pre><code>urls[domain] = [uri, datecreated]\n</code></pre>\n\n<p>Is this possible? If so, how?</p>\n\n<p>Sample results would look like this </p>\n\n<pre><code>print all keys and values in urls{}:\ngoogle.com : ['/helloworld', 2010-04-02], ['/apage/anotherpage', 2015-09-12] \nmicrosoft.com : ['/awebpage', 2009-02-01], ['/bananas', 2015-12-24], ['/anothergreaturi', 205-12-10] \n</code></pre>\n"}, {"tags": ["python", "xpath", "web-scraping", "scrapy"], "comments": [{"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1451537997, "post_id": 34539014, "comment_id": 56824496, "body": "<code>&#47;&#47;</code> starts absolute path and it means to search on whole page. Use dot at the beginning <code>.&#47;&#47;</code> to make relative path. Or use something shorter without dot and <code>&#47;&#47;</code> like <code>a&#47;@href</code>."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1451538391, "post_id": 34539014, "comment_id": 56824619, "body": "see: <a href=\"http://doc.scrapy.org/en/latest/topics/selectors.html#working-with-relative-xpaths\" rel=\"nofollow noreferrer\">doc.scrapy.org/en/latest/topics/&hellip;</a>"}, {"owner": {"reputation": 1, "user_id": 3660833, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3046f7f8ce32df79d6cb74339bd69aa3?s=128&d=identicon&r=PG&f=1", "display_name": "user3660833", "link": "https://stackoverflow.com/users/3660833/user3660833"}, "reply_to_user": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1451574106, "post_id": 34539014, "comment_id": 56837973, "body": "Thank you,Furas!!! I spent whole night searching this bug .  And solution is simple - a/@href . Thanks a lot :)  Have a nice Happy  New Year time :)"}], "owner": {"reputation": 1, "user_id": 3660833, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3046f7f8ce32df79d6cb74339bd69aa3?s=128&d=identicon&r=PG&f=1", "display_name": "user3660833", "link": "https://stackoverflow.com/users/3660833/user3660833"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1451525220, "creation_date": 1451519255, "last_edit_date": 1451525220, "question_id": 34539014, "link": "https://stackoverflow.com/questions/34539014/scrapy-trouble-with-xpath-on-google-com", "title": "scrapy trouble with xpath on google.com", "body": "<p>There is one bug in scrapy or my mistake .</p>\n\n<pre><code>class DmozSpider(Spider):\n    name = \"dmoz\"\n    allowed_domains = [\"google.com\"]\n    start_urls =[\"http://www.google.ru/search?q=gabber\"]\n\n\n    def parse(self, response):\n        sel = Selector(response)\n        sites = sel.xpath(\"//div[@id='ires']/ol/li/h3[@class='r']\")\n        items = []\n\n        for site in sites:\n            item = Website()\n            item['url'] = site.xpath(\"//li[@class='g']/h3/a/@href\").extract()\n            items.append(item)\n\n        return items\n</code></pre>\n\n<p>The problem is  item search element on whole page , not in 'sites'.<br>\nOn other sites(like dmoz) works correctly(search only in 'sites' element). <br>\nI suppose this is scrapy bug ?</p>\n"}, {"tags": ["android", "python", "apk", "android-install-apk"], "comments": [{"owner": {"reputation": 17986, "user_id": 4730812, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d336a10204c1cd2e7fa47071ed629669?s=128&d=identicon&r=PG&f=1", "display_name": "piotrek1543", "link": "https://stackoverflow.com/users/4730812/piotrek1543"}, "edited": false, "score": 0, "creation_date": 1451519327, "post_id": 34538988, "comment_id": 56820311, "body": "Here <a href=\"http://www.ubergizmo.com/how-to/how-to-install-apk-files-sideloading-on-android/\" rel=\"nofollow noreferrer\">ubergizmo.com/how-to/&hellip;</a>"}, {"owner": {"reputation": 1165, "user_id": 4145397, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/NP13i.jpg?s=128&g=1", "display_name": "92AlanC", "link": "https://stackoverflow.com/users/4145397/92alanc"}, "reply_to_user": {"reputation": 17986, "user_id": 4730812, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d336a10204c1cd2e7fa47071ed629669?s=128&d=identicon&r=PG&f=1", "display_name": "piotrek1543", "link": "https://stackoverflow.com/users/4730812/piotrek1543"}, "edited": false, "score": 0, "creation_date": 1451519651, "post_id": 34538988, "comment_id": 56820394, "body": "@piotrek1543 thank you for your effort, but what I want to know is how to install those apk&#39;s using a Python code"}, {"owner": {"reputation": 17986, "user_id": 4730812, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d336a10204c1cd2e7fa47071ed629669?s=128&d=identicon&r=PG&f=1", "display_name": "piotrek1543", "link": "https://stackoverflow.com/users/4730812/piotrek1543"}, "edited": false, "score": 0, "creation_date": 1451519977, "post_id": 34538988, "comment_id": 56820464, "body": "Sorry gu, but even here: <a href=\"http://android.kivy.org/about\" rel=\"nofollow noreferrer\">android.kivy.org/about</a> is used Android Debug Bridge instead of code"}, {"owner": {"reputation": 830, "user_id": 3928104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1758186afcb659bae03d821a2d2c9e4e?s=128&d=identicon&r=PG&f=1", "display_name": "Swing", "link": "https://stackoverflow.com/users/3928104/swing"}, "edited": false, "score": 1, "creation_date": 1453101950, "post_id": 34538988, "comment_id": 57438379, "body": "Are you looking for something like <code>subprocess.call(&quot;adb install path-to-file.apk &quot;)</code> ?"}, {"owner": {"reputation": 1165, "user_id": 4145397, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/NP13i.jpg?s=128&g=1", "display_name": "92AlanC", "link": "https://stackoverflow.com/users/4145397/92alanc"}, "reply_to_user": {"reputation": 830, "user_id": 3928104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1758186afcb659bae03d821a2d2c9e4e?s=128&d=identicon&r=PG&f=1", "display_name": "Swing", "link": "https://stackoverflow.com/users/3928104/swing"}, "edited": false, "score": 0, "creation_date": 1453417679, "post_id": 34538988, "comment_id": 57604820, "body": "@Swing yes, that&#39;s what I needed, thank you!"}], "answers": [{"tags": [], "owner": {"reputation": 1165, "user_id": 4145397, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/NP13i.jpg?s=128&g=1", "display_name": "92AlanC", "link": "https://stackoverflow.com/users/4145397/92alanc"}, "is_accepted": true, "score": 1, "last_activity_date": 1591457841, "creation_date": 1591457841, "answer_id": 62234030, "question_id": 34538988, "link": "https://stackoverflow.com/questions/34538988/how-to-install-an-android-apk-using-python-code/62234030#62234030", "title": "How to install an Android .APK using Python code?", "body": "<p>As @Swing mentioned in his comment, <code>subprocess.call(\"adb install path-to-file.apk \")</code> solves the issue.</p>\n"}], "owner": {"reputation": 1165, "user_id": 4145397, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/NP13i.jpg?s=128&g=1", "display_name": "92AlanC", "link": "https://stackoverflow.com/users/4145397/92alanc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1874, "favorite_count": 0, "accepted_answer_id": 62234030, "answer_count": 1, "score": 3, "last_activity_date": 1591457841, "creation_date": 1451519011, "last_edit_date": 1451519975, "question_id": 34538988, "link": "https://stackoverflow.com/questions/34538988/how-to-install-an-android-apk-using-python-code", "title": "How to install an Android .APK using Python code?", "body": "<p>Is there a way to programmatically install an Android .apk in Python?</p>\n\n<p>Could you please show me how? I'm new to Python.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["python", "apache-spark", "ipython", "ibm-cloud", "cloudant"], "comments": [{"owner": {"reputation": 20588, "user_id": 1033422, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/I6uGA.png?s=128&g=1", "display_name": "Chris Snow", "link": "https://stackoverflow.com/users/1033422/chris-snow"}, "edited": false, "score": 0, "creation_date": 1451568605, "post_id": 34538967, "comment_id": 56835895, "body": "I just hit the same problem.  I&#39;ll do some investigating and let you know what I find out."}], "answers": [{"tags": [], "owner": {"reputation": 20588, "user_id": 1033422, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/I6uGA.png?s=128&g=1", "display_name": "Chris Snow", "link": "https://stackoverflow.com/users/1033422/chris-snow"}, "is_accepted": true, "score": 1, "last_activity_date": 1451569677, "creation_date": 1451569677, "answer_id": 34547369, "question_id": 34538967, "link": "https://stackoverflow.com/questions/34538967/cannot-connect-to-cloudant-database-using-ipython-at-bluemix/34547369#34547369", "title": "Cannot connect to cloudant database using ipython at bluemix", "body": "<p>It appears that you have encountered a known issue that is reported in this ticket: <a href=\"https://github.com/cloudant-labs/spark-cloudant/issues/24\" rel=\"nofollow\">https://github.com/cloudant-labs/spark-cloudant/issues/24</a>.</p>\n"}], "owner": {"reputation": 69, "user_id": 5722896, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/27aac96c4bcc6fe64835919dee06b7b5?s=128&d=identicon&r=PG&f=1", "display_name": "B. Chow", "link": "https://stackoverflow.com/users/5722896/b-chow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 287, "favorite_count": 0, "accepted_answer_id": 34547369, "answer_count": 1, "score": 3, "last_activity_date": 1471616984, "creation_date": 1451518897, "last_edit_date": 1451561256, "question_id": 34538967, "link": "https://stackoverflow.com/questions/34538967/cannot-connect-to-cloudant-database-using-ipython-at-bluemix", "title": "Cannot connect to cloudant database using ipython at bluemix", "body": "<p>I am following the tutorial of IBM bluemix and try to extract data from the crimes db just created at cloudant db. I am using ipython notebook.</p>\n\n<p>I have got error when trying to connect to the database</p>\n\n<p>The tutorial is as follows:\n<a href=\"https://developer.ibm.com/clouddataservices/docs/spark/get-started/use-python-notebook-to-load-cloudant-data-into-spark/\" rel=\"nofollow\">https://developer.ibm.com/clouddataservices/docs/spark/get-started/use-python-notebook-to-load-cloudant-data-into-spark/</a></p>\n\n<p>I have created the db at cloudant accordingly but got the error when trying to connnect to the db</p>\n\n<hr>\n\n<pre><code>&lt;pre&gt;\nroot\n |-- _id: string (nullable = true)\n |-- _rev: string (nullable = true)\n |-- geometry: struct (nullable = true)\n |    |-- coordinates: array (nullable = true)\n |    |    |-- element: double (containsNull = true)\n |    |-- type: string (nullable = true)\n |-- properties: struct (nullable = true)\n |    |-- compnos: string (nullable = true)\n |    |-- domestic: boolean (nullable = true)\n |    |-- fromdate: long (nullable = true)\n |    |-- main_crimecode: string (nullable = true)\n |    |-- naturecode: string (nullable = true)\n |    |-- reptdistrict: string (nullable = true)\n |    |-- shooting: boolean (nullable = true)\n |    |-- source: string (nullable = true)\n |-- type: string (nullable = true)\n\n---------------------------------------------------------------------------\nPy4JJavaError                             Traceback (most recent call last)\n&lt;ipython-input-1-7370c766a2d0&gt; in &lt;module&gt;()\n      9 \n     10 \n---&gt; 11 cloudantdata.select(\"properties.naturecode\").show()\n     12 \n     13 \n\n/usr/local/src/bluemix_ipythonspark_141/spark/python/pyspark/sql/dataframe.py in show(self, n)\n    256         +---+-----+\n    257         \"\"\"\n--&gt; 258         print(self._jdf.showString(n))\n    259 \n    260     def __repr__(self):\n\n/usr/local/src/bluemix_ipythonspark_141/spark/python/lib/py4j-0.8.2.1-src.zip/py4j/java_gateway.py in __call__(self, *args)\n    536         answer = self.gateway_client.send_command(command)\n    537         return_value = get_return_value(answer, self.gateway_client,\n--&gt; 538                 self.target_id, self.name)\n    539 \n    540         for temp_arg in temp_args:\n\n/usr/local/src/bluemix_ipythonspark_141/spark/python/lib/py4j-0.8.2.1-src.zip/py4j/protocol.py in get_return_value(answer, gateway_client, target_id, name)\n    298                 raise Py4JJavaError(\n    299                     'An error occurred while calling {0}{1}{2}.\\n'.\n--&gt; 300                     format(target_id, '.', name), value)\n    301             else:\n    302                 raise Py4JError(\n\nPy4JJavaError: An error occurred while calling o40.showString.\n: org.apache.spark.SparkException: Job aborted due to stage failure: Task 0 in stage 7.0 failed 10 times, most recent failure: Lost task 0.9 in stage 7.0 (TID 29, yp-spark-dal09-env5-0046): java.lang.ArrayIndexOutOfBoundsException: Array index out of range: 8\n    at org.apache.spark.sql.catalyst.CatalystTypeConverters$.convertRowWithConverters(CatalystTypeConverters.scala:348)\n    at org.apache.spark.sql.catalyst.CatalystTypeConverters$$anonfun$createToCatalystConverter$4.apply(CatalystTypeConverters.scala:180)\n    at org.apache.spark.sql.execution.RDDConversions$$anonfun$rowToRowRdd$1$$anonfun$apply$2.apply(ExistingRDD.scala:62)\n    at org.apache.spark.sql.execution.RDDConversions$$anonfun$rowToRowRdd$1$$anonfun$apply$2.apply(ExistingRDD.scala:59)\n    at scala.collection.Iterator$$anon$11.next(Iterator.scala:328)\n    at scala.collection.Iterator$$anon$11.next(Iterator.scala:328)\n    at scala.collection.Iterator$$anon$11.next(Iterator.scala:328)\n    at scala.collection.Iterator$$anon$10.next(Iterator.scala:312)\n    at scala.collection.Iterator$class.foreach(Iterator.scala:727)\n    at scala.collection.AbstractIterator.foreach(Iterator.scala:1157)\n    at scala.collection.generic.Growable$class.$plus$plus$eq(Growable.scala:48)\n    at scala.collection.mutable.ArrayBuffer.$plus$plus$eq(ArrayBuffer.scala:103)\n    at scala.collection.mutable.ArrayBuffer.$plus$plus$eq(ArrayBuffer.scala:47)\n    at scala.collection.TraversableOnce$class.to(TraversableOnce.scala:273)\n    at scala.collection.AbstractIterator.to(Iterator.scala:1157)\n    at scala.collection.TraversableOnce$class.toBuffer(TraversableOnce.scala:265)\n    at scala.collection.AbstractIterator.toBuffer(Iterator.scala:1157)\n    at scala.collection.TraversableOnce$class.toArray(TraversableOnce.scala:252)\n    at scala.collection.AbstractIterator.toArray(Iterator.scala:1157)\n    at org.apache.spark.sql.execution.SparkPlan$$anonfun$3.apply(SparkPlan.scala:143)\n    at org.apache.spark.sql.execution.SparkPlan$$anonfun$3.apply(SparkPlan.scala:143)\n    at org.apache.spark.SparkContext$$anonfun$runJob$5.apply(SparkContext.scala:1775)\n    at org.apache.spark.SparkContext$$anonfun$runJob$5.apply(SparkContext.scala:1775)\n    at org.apache.spark.scheduler.ResultTask.runTask(ResultTask.scala:63)\n    at org.apache.spark.scheduler.Task.run(Task.scala:70)\n    at org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:213)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1157)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:627)\n    at java.lang.Thread.run(Thread.java:801)\n\nDriver stacktrace:\n    at org.apache.spark.scheduler.DAGScheduler.org$apache$spark$scheduler$DAGScheduler$$failJobAndIndependentStages(DAGScheduler.scala:1273)\n    at org.apache.spark.scheduler.DAGScheduler$$anonfun$abortStage$1.apply(DAGScheduler.scala:1264)\n    at org.apache.spark.scheduler.DAGScheduler$$anonfun$abortStage$1.apply(DAGScheduler.scala:1263)\n    at scala.collection.mutable.ResizableArray$class.foreach(ResizableArray.scala:59)\n    at scala.collection.mutable.ArrayBuffer.foreach(ArrayBuffer.scala:47)\n    at org.apache.spark.scheduler.DAGScheduler.abortStage(DAGScheduler.scala:1263)\n    at org.apache.spark.scheduler.DAGScheduler$$anonfun$handleTaskSetFailed$1.apply(DAGScheduler.scala:730)\n    at org.apache.spark.scheduler.DAGScheduler$$anonfun$handleTaskSetFailed$1.apply(DAGScheduler.scala:730)\n    at scala.Option.foreach(Option.scala:236)\n    at org.apache.spark.scheduler.DAGScheduler.handleTaskSetFailed(DAGScheduler.scala:730)\n    at org.apache.spark.scheduler.DAGSchedulerEventProcessLoop.onReceive(DAGScheduler.scala:1457)\n    at org.apache.spark.scheduler.DAGSchedulerEventProcessLoop.onReceive(DAGScheduler.scala:1418)\n    at org.apache.spark.util.EventLoop$$anon$1.run(EventLoop.scala:48)\n&lt;/pre&gt;\n</code></pre>\n\n<hr>\n\n<p>\"Procedure 2: Create a Python notebook to analyze the Cloudant data\"</p>\n\n<pre><code>sqlContext = SQLContext(sc)\n\ncloudantdata = sqlContext.read.format(\"com.cloudant.spark\").\\\noption(\"cloudant.host\",\"borischow.cloudant.com\").\\\noption(\"cloudant.username\", \"borischow\").\\\noption(\"cloudant.password\",\"xxxxxx\").\\\nload(\"crimes\")\n\n\ncloudantdata.printSchema()\ncloudantdata.count()\n\n\ncloudantdata.select(\"properties.naturecode\").show()\n\n\ndisturbDF = cloudantdata.filter(\"properties.naturecode = 'DISTRB'\")\ndisturbDF.show()\n\n\ndisturbDF.select(\"properties\").write.format(\"com.cloudant.spark\").\\\noption(\"cloudant.host\",\"borischow.cloudant.com\").\\\noption(\"cloudant.username\", \"borischow\").\\\noption(\"cloudant.password\",\"xxxxxx\").\\\nsave(\"crimes_filtered\")\n</code></pre>\n"}, {"tags": ["python", "json", "api", "web", "cloud"], "comments": [{"owner": {"reputation": 4558, "user_id": 4293417, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/15V7E.png?s=128&g=1", "display_name": "Zizouz212", "link": "https://stackoverflow.com/users/4293417/zizouz212"}, "edited": false, "score": 1, "creation_date": 1451519144, "post_id": 34538961, "comment_id": 56820261, "body": "You&#39;re getting a 404. Try this: <code>&#39;https:&#47;&#47;app.cloudscrape.com&#47;api&#47;runs&#47;{}&#47;execute&#47;inputs&#47;wait&zwnj;&#8203;&#39;.format(runID)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 101, "user_id": 5672580, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eEQui.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/5672580/michael"}, "edited": false, "score": 0, "creation_date": 1451519376, "post_id": 34538998, "comment_id": 56820326, "body": "oops, silly me. Now I&#39;m getting <code>{u&#39;headers&#39;: [u&#39;query&#39;, u&#39;title&#39;, u&#39;link&#39;, u&#39;url&#39;, u&#39;error&#39;], u&#39;rows&#39;: [[None, None, None, None, u&#39;No value found for input field:query&#39;]]}</code>"}, {"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "reply_to_user": {"reputation": 101, "user_id": 5672580, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eEQui.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/5672580/michael"}, "edited": false, "score": 1, "creation_date": 1451519880, "post_id": 34538998, "comment_id": 56820442, "body": "Well, I don&#39;t know anything about that api and you can&#39;t access their docs without signing up for an account, but it doesn&#39;t look like you&#39;re passing the params correctly. The docs snippet you quote doesn&#39;t mention body, and you&#39;re already passing runid in the URL. Maybe try passing inputQuery directly as the data?"}, {"owner": {"reputation": 101, "user_id": 5672580, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eEQui.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/5672580/michael"}, "edited": false, "score": 0, "creation_date": 1451520185, "post_id": 34538998, "comment_id": 56820518, "body": "I think I need to do <code>inputQuery = json.dumps(inputQuery)</code> before passing it in to <code>&#39;body&#39;</code>. I&#39;ll figure it out, thanks for your help."}, {"owner": {"reputation": 101, "user_id": 5672580, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eEQui.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/5672580/michael"}, "edited": false, "score": 0, "creation_date": 1451520406, "post_id": 34538998, "comment_id": 56820587, "body": "No it didn&#39;t work, all it says in the docs is that the parameter&#39;s name (for your input) is <code>body</code> and that the data type is <code>RunInputs</code> which should be structured as JSON, it is in the example above where it says <code>my_input_field</code>."}, {"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "reply_to_user": {"reputation": 101, "user_id": 5672580, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eEQui.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/5672580/michael"}, "edited": false, "score": 1, "creation_date": 1451520722, "post_id": 34538998, "comment_id": 56820673, "body": "No, that means it&#39;s the body of the POST. You don&#39;t want the outer data dict at all."}, {"owner": {"reputation": 101, "user_id": 5672580, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eEQui.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/5672580/michael"}, "edited": false, "score": 0, "creation_date": 1451521929, "post_id": 34538998, "comment_id": 56820977, "body": "Yes you were right, I needed to pass my input in directly as data. Thanks again. @Daniel Roseman"}], "tags": [], "owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "is_accepted": true, "score": 2, "last_activity_date": 1451519129, "creation_date": 1451519129, "answer_id": 34538998, "question_id": 34538961, "link": "https://stackoverflow.com/questions/34538961/how-to-i-make-an-api-request-in-python/34538998#34538998", "title": "How to I make an API request in Python", "body": "<p>You don't need the braces around the interpolated parameter.</p>\n\n<pre><code>...api/runs/%s/execute...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4558, "user_id": 4293417, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/15V7E.png?s=128&g=1", "display_name": "Zizouz212", "link": "https://stackoverflow.com/users/4293417/zizouz212"}, "is_accepted": false, "score": 3, "last_activity_date": 1451519175, "creation_date": 1451519175, "answer_id": 34539002, "question_id": 34538961, "link": "https://stackoverflow.com/questions/34538961/how-to-i-make-an-api-request-in-python/34539002#34539002", "title": "How to I make an API request in Python", "body": "<p>You're not formatting it right. Do this: </p>\n\n<pre><code>'https://app.cloudscrape.com/api/runs/{}/execute/inputs/wait'.format(runID)\n</code></pre>\n"}], "owner": {"reputation": 101, "user_id": 5672580, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eEQui.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/5672580/michael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 286, "favorite_count": 0, "accepted_answer_id": 34538998, "answer_count": 2, "score": 0, "last_activity_date": 1451524660, "creation_date": 1451518833, "last_edit_date": 1451524660, "question_id": 34538961, "link": "https://stackoverflow.com/questions/34538961/how-to-i-make-an-api-request-in-python", "title": "How to I make an API request in Python", "body": "<p>I am trying to make an API request to my online website scraper at <a href=\"http://cloudscrape.com\" rel=\"nofollow\" title=\"CloudScrape\">CloudScrape</a>, the <a href=\"https://app.cloudscrape.com/#/api/sections/runs/executeWithInputSync\" rel=\"nofollow\">documentation</a> shows the following example.</p>\n\n<blockquote>\n  <p>POST /api/runs/{runId}/execute/inputs/wait HTTP/1.1</p>\n  \n  <p>X-CloudScrape-Access: ga09usdm8osdf8n9sodf</p>\n  \n  <p>X-CloudScrape-Account: 87750c5f-7423-4438-b3f1-7b8b86990621</p>\n  \n  <p>Accept: application/json</p>\n  \n  <p>Accept-Encoding: gzip</p>\n  \n  <p>Content-Type: application/json</p>\n  \n  <p>Host: app.cloudscrape.com </p>\n  \n  <p>User-Agent: YourApp/1.0</p>\n\n<pre><code>{\n    \"my_input_field\": \"My input value\",\n    \"my_other_input_field\": 234\n}\n</code></pre>\n</blockquote>\n\n<p>I am trying to post the following parameters;</p>\n\n<blockquote>\n  <p>body, runId</p>\n</blockquote>\n\n<p>So far, I have tried</p>\n\n<pre><code>import requests\nimport json\n\nclient = requests.session()\n\nrunID = '86df246f-8f77-47b9-9655-be61e3851839'\ninputQuery = {\"query\": \"1080p category:movies user:z0n321 imdb:3659388\"}\ndata = {'body':inputQuery, 'runId':'86df246f-8f77-47b9-9655-be61e3851839'}\nheaders = {'X-CloudScrape-Access':'a41c493c2a31d068f1a06333311e52f7', 'X-CloudScrape-Account':'87750c5f-7423-4438-b3f1-7b8b86990621', 'Accept':'application/json', 'Content-Type':'application/json'}\n\nresponse = client.post('https://app.cloudscrape.com/api/runs/{%s}/execute/inputs/wait' % runID, data=json.dumps(data), headers=headers)\n\nresults = json.loads(response.content)\nprint results\n</code></pre>\n\n<p>I get this response <code>{u'code': 404, u'error': True}</code></p>\n\n<p>My scraper runs fine when I run it manually through their website. Am I doing something wrong?</p>\n"}, {"tags": ["python", "set"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 2, "creation_date": 1451519441, "post_id": 34538890, "comment_id": 56820339, "body": "&quot;Both have some objects that are similar but <b>I want to update the old ones</b>&quot; - if your objects are mutable, you probably can&#39;t put them in a set at all. If you can, you&#39;re probably breaking the rule that hashable objects can&#39;t be mutable in ways that affect <code>==</code> comparisons. Sets really aren&#39;t designed for mutable contents."}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 1, "creation_date": 1451519534, "post_id": 34538890, "comment_id": 56820366, "body": "Why do you need <code>__getitem__</code>? If that&#39;s really what you want, you could do <code>for thing in set1: if thing in set2: do_whatever(thing)</code>."}, {"owner": {"reputation": 333, "user_id": 1936538, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/3b1e64d9d45d736ad1b59931721782ab?s=128&d=identicon&r=PG", "display_name": "husvar", "link": "https://stackoverflow.com/users/1936538/husvar"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1451522442, "post_id": 34538890, "comment_id": 56821109, "body": "@user2357112 the update I am making does not affect the equality criteria and also does not affect the hash for the objects"}, {"owner": {"reputation": 333, "user_id": 1936538, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/3b1e64d9d45d736ad1b59931721782ab?s=128&d=identicon&r=PG", "display_name": "husvar", "link": "https://stackoverflow.com/users/1936538/husvar"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1451522499, "post_id": 34538890, "comment_id": 56821124, "body": "@jonrsharpe: You are right. I just wanted to take advantage of the built in methods because they are usually more optimized."}, {"owner": {"reputation": 40404, "user_id": 282912, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/bmLJq.png?s=128&g=1", "display_name": "msw", "link": "https://stackoverflow.com/users/282912/msw"}, "edited": false, "score": 0, "creation_date": 1452050481, "post_id": 34538890, "comment_id": 56995927, "body": "It would be bad practice to count on implementation-specific behavior which is what your question asks for. You probably shouldn&#39;t be creating mutable but hash-invariant objects anyway. There are better approaches."}, {"owner": {"reputation": 40404, "user_id": 282912, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/bmLJq.png?s=128&g=1", "display_name": "msw", "link": "https://stackoverflow.com/users/282912/msw"}, "edited": false, "score": 0, "creation_date": 1452050642, "post_id": 34538890, "comment_id": 56995973, "body": "If you find your approach would be easier if only the language was extended, it&#39;s probably a bad idea."}], "answers": [{"comments": [{"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 1, "creation_date": 1451525741, "post_id": 34538938, "comment_id": 56821903, "body": "Do not use <code>.has_key</code>; it&#39;s deprecated, and slower than pure syntax based containment checks. Replace <code>dict1.has_key(item)</code> with <code>item in dict1</code>, and it runs faster (and works equally well with all container types, not just <code>dict</code>). Similarly, don&#39;t iterate over <code>.keys()</code>; it&#39;s redundant in Py3, and wasteful in Py2 (where it creates a whole new <code>list</code> to contain all the keys); you can iterate the keys directly (no copies, no calls) with <code>for item in dict1:</code>"}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 1, "creation_date": 1451525903, "post_id": 34538938, "comment_id": 56821938, "body": "And of course, this is all pointless; you could do the exact same thing with <code>set</code>s anyway, so why are we bothering with <code>dict</code>, where you&#39;d have to store a junk value with each key?"}, {"owner": {"reputation": 1306, "user_id": 1628919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fd5cdad968abf48f8911fac02719bce?s=128&d=identicon&r=PG", "display_name": "Untitled123", "link": "https://stackoverflow.com/users/1628919/untitled123"}, "reply_to_user": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1451527411, "post_id": 34538938, "comment_id": 56822244, "body": "I used a dict since he mentioned something about a get_item method, and dicts allow you to do this in O(1) time."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1451527617, "post_id": 34538938, "comment_id": 56822274, "body": "<code>set</code>s have the same average case time for membership testing. I suppose you could allow someone to retrieve a non-equal-but-equal object by maintaining a <code>dict</code> that maps keys to themselves, but really, if you&#39;re in that position, you&#39;ve almost certainly violated the mutability invariants that <code>set</code> members and <code>dict</code> keys are supposed to adhere to."}, {"owner": {"reputation": 1306, "user_id": 1628919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fd5cdad968abf48f8911fac02719bce?s=128&d=identicon&r=PG", "display_name": "Untitled123", "link": "https://stackoverflow.com/users/1628919/untitled123"}, "reply_to_user": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1451529391, "post_id": 34538938, "comment_id": 56822635, "body": "Oh originally this question requested for a fast way to get an item, and I interpreted this as meaning accessing any random item based on a key. I was not under the impression that sets have this ability."}], "tags": [], "owner": {"reputation": 1306, "user_id": 1628919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fd5cdad968abf48f8911fac02719bce?s=128&d=identicon&r=PG", "display_name": "Untitled123", "link": "https://stackoverflow.com/users/1628919/untitled123"}, "is_accepted": false, "score": 0, "last_activity_date": 1451518634, "creation_date": 1451518634, "answer_id": 34538938, "question_id": 34538890, "link": "https://stackoverflow.com/questions/34538890/python-set-intersection-which-objects-are-returned/34538938#34538938", "title": "Python Set Intersection - Which objects are returned", "body": "<p>One thing you could do is instead use python dictionaries. Access is still O(1), elements are easy to access, and a simple loop such as follows can get the intersection feature:</p>\n\n<pre><code> res=[]\n for item in dict1.keys():\n  if dict2.has_key(item):\n   res.append(item)\n</code></pre>\n\n<p>The advantage here is you have full control of what is going on, and can tweak it as you need to. For example, can also do things like:</p>\n\n<pre><code>if dict1.has_key(item):\n dict1[item]=updatedValue\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 333, "user_id": 1936538, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/3b1e64d9d45d736ad1b59931721782ab?s=128&d=identicon&r=PG", "display_name": "husvar", "link": "https://stackoverflow.com/users/1936538/husvar"}, "edited": false, "score": 0, "creation_date": 1451522758, "post_id": 34539038, "comment_id": 56821187, "body": "Thanks. I would expect that the result would be more &quot;expectable&quot;. It could be up to the programmer to choose which one to iterate over."}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 333, "user_id": 1936538, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/3b1e64d9d45d736ad1b59931721782ab?s=128&d=identicon&r=PG", "display_name": "husvar", "link": "https://stackoverflow.com/users/1936538/husvar"}, "edited": false, "score": 2, "creation_date": 1451522828, "post_id": 34539038, "comment_id": 56821205, "body": "@husvar, I suppose if you are looking for the intersection it makes more sense to iterate over the smaller set, no point iterating over 10000 elements if the other set only has 10"}], "tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": false, "score": 6, "last_activity_date": 1452049005, "last_edit_date": 1592644375, "creation_date": 1451519430, "answer_id": 34539038, "question_id": 34538890, "link": "https://stackoverflow.com/questions/34538890/python-set-intersection-which-objects-are-returned/34539038#34539038", "title": "Python Set Intersection - Which objects are returned", "body": "<p>What objects are used varies, if the sets are the same size the intersecting elements from b, if b has more elements then the objects from a are returned:</p>\n<pre><code>i = &quot;$foobar&quot; * 100\nj = &quot;$foob&quot; * 100\nl  = &quot;$foobar&quot; * 100\nk = &quot;$foob&quot; * 100\nprint(id(i), id(j))\nprint(id(l), id(k))\na = {i, j}\nb = {k, l, 3}\ninter = a.intersection(b)\nfor ele in inter:\n    print(id(ele))\n</code></pre>\n<p>Output:</p>\n<pre><code>35510304 35432016\n35459968 35454928\n35510304\n35432016\n</code></pre>\n<p>Now when they are the same size:</p>\n<pre><code>i = &quot;$foobar&quot; * 100\nj = &quot;$foob&quot; * 100\nl  = &quot;$foobar&quot; * 100\nk = &quot;$foob&quot; * 100\nprint(id(i), id(j))\nprint(id(l), id(k))\na = {i, j}\nb = {k, l}\ninter = a.intersection(b)\nfor ele in inter:\n    print(id(ele))\n</code></pre>\n<p>Output:</p>\n<pre><code>35910288 35859984\n35918160 35704816\n35704816\n35918160\n</code></pre>\n<p>There relevant part of the <a href=\"https://github.com/python/cpython/blob/master/Objects/setobject.c#L1294\" rel=\"nofollow noreferrer\">source</a>. The line <code>if (PySet_GET_SIZE(other) &gt; PySet_GET_SIZE(so))</code>, n the result of the comparison seems to decide which object to iterate over and what objects get used.</p>\n<pre><code>    if (PySet_GET_SIZE(other) &gt; PySet_GET_SIZE(so)) {\n        tmp = (PyObject *)so;\n        so = (PySetObject *)other;\n        other = tmp;\n    }\n     \n    while (set_next((PySetObject *)other, &amp;pos, &amp;entry)) {\n        key = entry-&gt;key;\n        hash = entry-&gt;hash;\n        rv = set_contains_entry(so, key, hash);\n        if (rv &lt; 0) {\n            Py_DECREF(result);\n            return NULL;\n        }\n        if (rv) {\n            if (set_add_entry(result, key, hash)) {\n                Py_DECREF(result);\n                return NULL;\n            }\n</code></pre>\n<p>If you pass an object that is not a set, then the same is not true and the length is irrelevant as the objects from the iterable are used:</p>\n<pre><code>it = PyObject_GetIter(other);\nif (it == NULL) {\n    Py_DECREF(result);\n    return NULL;\n}\n\nwhile ((key = PyIter_Next(it)) != NULL) {\n    hash = PyObject_Hash(key);\n    if (hash == -1)\n        goto error;\n    rv = set_contains_entry(so, key, hash);\n    if (rv &lt; 0)\n        goto error;\n    if (rv) {\n        if (set_add_entry(result, key, hash))\n            goto error;\n    }\n    Py_DECREF(key);\n</code></pre>\n<p>When you pass an iterable, firstly it could be an iterator so you could not check the size without consuming and if you passed a list then the lookup would be <code>0(n)</code> so it makes sense to just iterate over the iterable passed in, in contrast if you have a set of <code>1000000</code> elements and one with <code>10</code>, it makes sense to check if the <code>10</code> are in the set if <code>1000000</code> as opposed to checking if any of <code>1000000</code> are in your set of <code>10</code> as the lookup should be <code>0(1)</code> on average so it mean a linear pass over 10 vs a linear pass over 1000000 elements.</p>\n<p>If you look at the <a href=\"https://wiki.python.org/moin/TimeComplexity\" rel=\"nofollow noreferrer\">wiki.python.org/moin/TimeComplexity</a>, this is backed up:</p>\n<blockquote>\n<p>Average case  -&gt; Intersection s&amp;t O(min(len(s), len(t))</p>\n<p>Worst case -&gt; O(len(s) * len(t))O(len(s) * len(t))</p>\n<p><em>replace &quot;min&quot; with &quot;max&quot; if t is not a set</em></p>\n</blockquote>\n<p>So when we pass an iterable we should always get the objects from b:</p>\n<pre><code>i = &quot;$foobar&quot; * 100\nj = &quot;$foob&quot; * 100\nl  = &quot;$foobar&quot; * 100\nk = &quot;$foob&quot; * 100\nprint(id(i), id(j))\nprint(id(l), id(k))\na = {i, j}\nb = [k, l, 1,2,3]\ninter = a.intersection(b)\nfor ele in inter:\n    print(id(ele))\n</code></pre>\n<p>You get the objects from b:</p>\n<pre><code>20854128 20882896\n20941072 20728768\n20941072\n20728768\n</code></pre>\n<p>If you really want to decide what objects you keep then do the iterating and lookups yourself keeping whichever you want.</p>\n"}], "owner": {"reputation": 333, "user_id": 1936538, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/3b1e64d9d45d736ad1b59931721782ab?s=128&d=identicon&r=PG", "display_name": "husvar", "link": "https://stackoverflow.com/users/1936538/husvar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 275, "favorite_count": 1, "answer_count": 2, "score": 6, "last_activity_date": 1452049005, "creation_date": 1451518313, "last_edit_date": 1451518637, "question_id": 34538890, "link": "https://stackoverflow.com/questions/34538890/python-set-intersection-which-objects-are-returned", "title": "Python Set Intersection - Which objects are returned", "body": "<p>I have a question which is not really clear in python documentation (<a href=\"https://docs.python.org/2/library/stdtypes.html#set.intersection\" rel=\"noreferrer\">https://docs.python.org/2/library/stdtypes.html#set.intersection</a>).</p>\n\n<p>When using set.intersection the resulting set contains the objects from current set or from other? In the case that both objects have same value but are different objects in memory.</p>\n\n<p>I am using this to compare a previous extraction taken from file with a new one coming from the internet. Both have some objects that are similar but I want to update the old ones.\nOr maybe there is a simpler alternative to achieve this? It would me much easier if sets implemented <code>__getitem__</code>.</p>\n\n<pre><code>    oldApsExtract = set()\n    if (os.path.isfile(\"Apartments.json\")):\n        with open('Apartments.json', mode='r') as f:\n            oldApsExtract = set(jsonpickle.decode(f.read()))\n    newApsExtract = set(getNewExtract())\n\n    updatedAps = oldApsExtract.intersection(newApsExtract)\n    deletedAps = oldApsExtract.difference(newApsExtract)\n    newAps = newApsExtract.difference(oldApsExtract)\n\n    for ap in deletedAps:\n        ap.mark_deleted()\n\n    for ap in updatedAps:\n        ap.update()\n\n    saveAps = list(oldApsExtract) + list(newAps)\n    with open('Apartments.json', mode='w') as f:\n        f.write(jsonpickle.encode(saveAps))\n</code></pre>\n"}, {"tags": ["python", "tkinter", "tk"], "answers": [{"comments": [{"owner": {"reputation": 2616, "user_id": 5732397, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mmdpdkr_pcc/AAAAAAAAAAI/AAAAAAAAC08/NKvQ733ixGo/photo.jpg?sz=128", "display_name": "StardustGogeta", "link": "https://stackoverflow.com/users/5732397/stardustgogeta"}, "edited": false, "score": 0, "creation_date": 1451522026, "post_id": 34539277, "comment_id": 56821009, "body": "Thank you very much! It seems that the grid was the issue, as your .pack() solution works perfectly."}, {"owner": {"reputation": 541, "user_id": 5678325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7adec05602a8899beda24e1e69390687?s=128&d=identicon&r=PG", "display_name": "oystein-hr", "link": "https://stackoverflow.com/users/5678325/oystein-hr"}, "reply_to_user": {"reputation": 2616, "user_id": 5732397, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mmdpdkr_pcc/AAAAAAAAAAI/AAAAAAAAC08/NKvQ733ixGo/photo.jpg?sz=128", "display_name": "StardustGogeta", "link": "https://stackoverflow.com/users/5732397/stardustgogeta"}, "edited": false, "score": 0, "creation_date": 1451534643, "post_id": 34539277, "comment_id": 56823690, "body": "Good that you got it to work. I think mixing pack and grid might cause problems, now that you mention it. Personally I have used only Grid for the GUIs I have made, never tried mixing them. Pack I have only used for quick tests."}], "tags": [], "owner": {"reputation": 541, "user_id": 5678325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7adec05602a8899beda24e1e69390687?s=128&d=identicon&r=PG", "display_name": "oystein-hr", "link": "https://stackoverflow.com/users/5678325/oystein-hr"}, "is_accepted": true, "score": 1, "last_activity_date": 1451520965, "creation_date": 1451520965, "answer_id": 34539277, "question_id": 34538826, "link": "https://stackoverflow.com/questions/34538826/tkinter-entry-get-function/34539277#34539277", "title": "Tkinter - Entry .get() Function", "body": "<p>Made a simplified version of your code, and it prints correctly as the <code>Entry</code> widget is changed. Could be error elsewhere in your code? Or wrong indentation? Here is the code I tested with (this is 2.7 code, but worked with a 3.5 version of the code also):</p>\n\n<pre><code>import Tkinter as tk\n\nclass FCMenu:\n    def __init__(self, master):\n        frame = tk.Frame(master)\n\n        self.num = tk.IntVar()\n        self.entry = tk.Entry(frame, textvariable=self.num)\n        self.button = tk.Button(frame, text='Calc', command=self.calc)\n\n        frame.pack()\n        self.entry.pack()\n        self.button.pack()\n\n    def calc(self):\n        print(self.num.get(), self.entry.get())\n\nroot = tk.Tk()\nframe = FCMenu(root)\nroot.mainloop()\n</code></pre>\n\n<p>It prints from both <code>self.num.get()</code> and <code>self.entry.get()</code>. The first is an <code>Int</code> and the second as <code>String</code> it seems.</p>\n"}], "owner": {"reputation": 2616, "user_id": 5732397, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mmdpdkr_pcc/AAAAAAAAAAI/AAAAAAAAC08/NKvQ733ixGo/photo.jpg?sz=128", "display_name": "StardustGogeta", "link": "https://stackoverflow.com/users/5732397/stardustgogeta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2478, "favorite_count": 0, "closed_date": 1451522352, "accepted_answer_id": 34539277, "answer_count": 1, "score": -2, "last_activity_date": 1458425194, "creation_date": 1451517962, "last_edit_date": 1458425194, "question_id": 34538826, "link": "https://stackoverflow.com/questions/34538826/tkinter-entry-get-function", "closed_reason": "Duplicate", "title": "Tkinter - Entry .get() Function", "body": "<pre><code>class FCMenu:\ndef __init__(self,master):\n    frame=Frame(master)\n    frame.pack()\n    Label(frame, text=\"What is the number?\").grid(row=0)\n    self.num = IntVar()\n    self.entry = Entry(frame,textvariable=self.num).grid(row=1)\n    button = Button(frame, text=\"Factorize\", command=self.calc).grid(row=2)\n    self.resultvar = StringVar()\n    Label(frame, textvariable=self.resultvar).grid(row=3)\n\ndef calc(self):\n    e = int(self.entry.get())\n    print(e,self.num.get())\n    ...\n</code></pre>\n\n<p>I am trying to create a Python GUI with tkinter, as shown above. However, every time I call <code>.get()</code> on the entry or the textvariable, it fails. With the entry itself, it explains that there is no <code>.get()</code> function for NoneType. If I remove that and use only <code>self.num.get()</code>, it prints 0 or 0.0, depending on whether or not I turn it to an integer. If I turn <code>self.num</code> to a <code>StringVar</code>, it prints nothing at all. Simply, I cannot find a way to obtain the input that I want to retrieve.</p>\n"}, {"tags": ["python", "string", "matplotlib"], "answers": [{"tags": [], "owner": {"reputation": 1306, "user_id": 1628919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fd5cdad968abf48f8911fac02719bce?s=128&d=identicon&r=PG", "display_name": "Untitled123", "link": "https://stackoverflow.com/users/1628919/untitled123"}, "is_accepted": false, "score": 2, "last_activity_date": 1451518204, "creation_date": 1451518204, "answer_id": 34538874, "question_id": 34538762, "link": "https://stackoverflow.com/questions/34538762/add-years-to-x-axis-in-matplotlib/34538874#34538874", "title": "Add years to x-axis in Matplotlib", "body": "<p>Change the x-axis to datetime objects, and then simply call</p>\n\n<pre><code>plt.plot(x,y)\nplt.gcf().autofmt_xdate()\n</code></pre>\n\n<p>There are also manual (but unfortunate) ways of doing this, which I'll edit in if that does not work.</p>\n"}, {"comments": [{"owner": {"reputation": 25, "user_id": 5563574, "user_type": "registered", "profile_image": "https://graph.facebook.com/887604724687644/picture?type=large", "display_name": "Sebasti&#225;n Felipe Otrola Bustos", "link": "https://stackoverflow.com/users/5563574/sebasti%c3%a1n-felipe-otrola-bustos"}, "edited": false, "score": 0, "creation_date": 1451522197, "post_id": 34538912, "comment_id": 56821042, "body": "Thank you. Very complete answer. Time differences works fine, but I prefered first option.All the best, Sebasti&#225;n"}, {"owner": {"reputation": 73075, "user_id": 380231, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8744048060e5931c500d3c9d1ecb997e?s=128&d=identicon&r=PG", "display_name": "tacaswell", "link": "https://stackoverflow.com/users/380231/tacaswell"}, "edited": false, "score": 0, "creation_date": 1451579497, "post_id": 34538912, "comment_id": 56840219, "body": "Do not use <code>set_ticklabels</code> with a non-fixed locator.  With your second snippet if you pan that figure at all the tick labels will not change, but the data space will (that is to say your tick labels will be wrong)."}, {"owner": {"reputation": 71233, "user_id": 837534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f3782b004830f622e19029e5f7fc146?s=128&d=identicon&r=PG", "display_name": "Mike M&#252;ller", "link": "https://stackoverflow.com/users/837534/mike-m%c3%bcller"}, "reply_to_user": {"reputation": 73075, "user_id": 380231, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8744048060e5931c500d3c9d1ecb997e?s=128&d=identicon&r=PG", "display_name": "tacaswell", "link": "https://stackoverflow.com/users/380231/tacaswell"}, "edited": false, "score": 0, "creation_date": 1451586327, "post_id": 34538912, "comment_id": 56842756, "body": "@tcaswell Thanks for the advise. Changed to <code>FixedLocator</code>. Panning works now."}], "tags": [], "owner": {"reputation": 71233, "user_id": 837534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f3782b004830f622e19029e5f7fc146?s=128&d=identicon&r=PG", "display_name": "Mike M&#252;ller", "link": "https://stackoverflow.com/users/837534/mike-m%c3%bcller"}, "is_accepted": true, "score": 1, "last_activity_date": 1451586235, "last_edit_date": 1451586235, "creation_date": 1451518429, "answer_id": 34538912, "question_id": 34538762, "link": "https://stackoverflow.com/questions/34538762/add-years-to-x-axis-in-matplotlib/34538912#34538912", "title": "Add years to x-axis in Matplotlib", "body": "<h2>Working with dates</h2>\n\n<p>Replace <code>x1</code> and <code>x2</code>with this:</p>\n\n<pre><code>import datetime\n\ndelta_h = datetime.timedelta(hours=1)\nstart = datetime.datetime(2001, 1, 1)\nx1 = [start + x * delta_h for x in range(129392)]\nx2 = [start + x * delta_h for x in range(0, 129392, 24)]\n</code></pre>\n\n<h2>Working with time differences</h2>\n\n<p>This is useful if you don't have an actual starting date but just a time difference starting from a time zero:</p>\n\n<pre><code>import math\ndays_per_year = 365.2425\nhours_per_day = 24\nax1.xaxis.set_major_locator(plt.FixedLocator(\n                            range(0, x1[-1], math.ceil(hours_per_day * days_per_year))))\nax1.xaxis.set_ticklabels(range(math.ceil(x1[-1] / (hours_per_day * days_per_year))))\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 5563574, "user_type": "registered", "profile_image": "https://graph.facebook.com/887604724687644/picture?type=large", "display_name": "Sebasti&#225;n Felipe Otrola Bustos", "link": "https://stackoverflow.com/users/5563574/sebasti%c3%a1n-felipe-otrola-bustos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 446, "favorite_count": 0, "accepted_answer_id": 34538912, "answer_count": 2, "score": 1, "last_activity_date": 1451586235, "creation_date": 1451517570, "last_edit_date": 1451522775, "question_id": 34538762, "link": "https://stackoverflow.com/questions/34538762/add-years-to-x-axis-in-matplotlib", "title": "Add years to x-axis in Matplotlib", "body": "<p>I have the following plot which was made using hours in the x-axis:</p>\n\n<p><a href=\"https://i.stack.imgur.com/inE2t.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/inE2t.png\" alt=\"enter image description here\"></a></p>\n\n<p>I would like to change the text on the x-axis to be years rather than hours. So I need years to correspond with specific hours. I've read that this might be done  using <code>plt.xticks(x, my_xticks)</code> and indexing of my <code>x</code> array, but is not working for me. It would be really appreciated if somebody give me some advice on how to do this. Thank you very much.</p>\n\n<p>Here is an example of my code:</p>\n\n<pre><code>fig_1,ax1 = plt.subplots()\nx1 = np.arange(0,129392) #hourly data\nx2 = np.linspace(0,129392,5390) #daily data\ny_norm = 150.*np.ones([129392,1])\nax1.plot(x1,Data_OBS_h,'k',marker='o',linestyle=' ',label='PM10-1h',linewidth=1.5)\nax1.plot(x2,Data_OBS,'r',linestyle='-',label='PM10-24h',linewidth=1.5)\nax1.plot(x1,y_norm,'b',linestyle='-',label='standard',linewidth=1.5)\n</code></pre>\n"}, {"tags": ["python", "list", "dictionary", "tkinter"], "comments": [{"owner": {"reputation": 1684, "user_id": 4403123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3d6cb94cda55242f6537bba6d90e09b?s=128&d=identicon&r=PG&f=1", "display_name": "KSFT", "link": "https://stackoverflow.com/users/4403123/ksft"}, "edited": false, "score": 0, "creation_date": 1451516953, "post_id": 34538625, "comment_id": 56819550, "body": "What&#39;s your specific question? You have some code there. What&#39;s wrong with it?"}, {"owner": {"reputation": 109, "user_id": 4321902, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/LoMlV.jpg?s=128&g=1", "display_name": "Shiroslullaby", "link": "https://stackoverflow.com/users/4321902/shiroslullaby"}, "reply_to_user": {"reputation": 1684, "user_id": 4403123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3d6cb94cda55242f6537bba6d90e09b?s=128&d=identicon&r=PG&f=1", "display_name": "KSFT", "link": "https://stackoverflow.com/users/4403123/ksft"}, "edited": false, "score": 0, "creation_date": 1451517628, "post_id": 34538625, "comment_id": 56819797, "body": "Send is currently = 0. I need a Tkinter checkbox that, when checked, modifies the value to 1."}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1451517747, "post_id": 34538625, "comment_id": 56819843, "body": "How is this question different than <a href=\"http://stackoverflow.com/q/34456661/7432\">stackoverflow.com/q/34456661/7432</a>?"}, {"owner": {"reputation": 1684, "user_id": 4403123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3d6cb94cda55242f6537bba6d90e09b?s=128&d=identicon&r=PG&f=1", "display_name": "KSFT", "link": "https://stackoverflow.com/users/4403123/ksft"}, "edited": false, "score": 1, "creation_date": 1451517964, "post_id": 34538625, "comment_id": 56819921, "body": "Why can&#39;t you just do <code>dict_list[index][&#39;Send&#39;] = 1</code>?"}, {"owner": {"reputation": 109, "user_id": 4321902, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/LoMlV.jpg?s=128&g=1", "display_name": "Shiroslullaby", "link": "https://stackoverflow.com/users/4321902/shiroslullaby"}, "edited": false, "score": 0, "creation_date": 1451518253, "post_id": 34538625, "comment_id": 56820006, "body": "Modifying an existing value in the dictionary is much different than creating a new dictionary and adding values to that. I do appreciate your previous help though Bryan Oakley."}], "answers": [{"tags": [], "owner": {"reputation": 457, "user_id": 5076688, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/KjxSu.png?s=128&g=1", "display_name": "Qwerp-Derp", "link": "https://stackoverflow.com/users/5076688/qwerp-derp"}, "is_accepted": false, "score": 0, "last_activity_date": 1451526920, "last_edit_date": 1495540745, "creation_date": 1451526920, "answer_id": 34539996, "question_id": 34538625, "link": "https://stackoverflow.com/questions/34538625/python-tkinter-checkbox-to-modify-an-existing-list-dictionary-value/34539996#34539996", "title": "Python Tkinter checkbox to modify an existing list dictionary value", "body": "<p>The checkboxes themselves could be part of the <code>for</code> loop, with this at the end:</p>\n\n<pre><code>checkbox = Button(text=str(check), command=checkemail, width=2)\n# The str(check) part is for rows.\n</code></pre>\n\n<p>N.B. The buttons themselves will have to be in a grid, similar to this.</p>\n\n<p><a href=\"https://i.stack.imgur.com/inO3m.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/inO3m.png\" alt=\"enter image description here\"></a></p>\n\n<p>Using the <code>cget</code> method (see <a href=\"http://effbot.org/tkinterbook/widget.htm#Tkinter.Widget.cget-method\" rel=\"nofollow noreferrer\">this</a> for an explanation, and see <a href=\"https://stackoverflow.com/a/6113152/5076688\">this</a> for an example), the function for the checkbox could be like this:</p>\n\n<pre><code>def checkemail(): # Using an example function name\n    x = int(checkbox.cget(\"text\")) # Gets the row number (check)\n    dict_list[x]['Send'] = 1 # Changes the value of 'Send' for the contact to 1\n</code></pre>\n\n<p>I hope this is helpful!</p>\n"}], "owner": {"reputation": 109, "user_id": 4321902, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/LoMlV.jpg?s=128&g=1", "display_name": "Shiroslullaby", "link": "https://stackoverflow.com/users/4321902/shiroslullaby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 366, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1451526920, "creation_date": 1451516739, "last_edit_date": 1451517489, "question_id": 34538625, "link": "https://stackoverflow.com/questions/34538625/python-tkinter-checkbox-to-modify-an-existing-list-dictionary-value", "title": "Python Tkinter checkbox to modify an existing list dictionary value", "body": "<p>I have a list of dictionaries in a format like this:  </p>\n\n<pre><code>dict_list = [{'Contact Name' : 'Jeff Bezos', 'Email' : 'Jeff@Amazon.com', 'Send' : 0},\n {'Contact Name' : 'Bill Gates', 'Email' : 'Bill@Microsoft.com', 'Send' : 0}]\n</code></pre>\n\n<p>I currently display each name using Tkinter:   </p>\n\n<pre><code>for eachclient in dict_list:\n   contactLabel = Label(text='Contact Name: ' + eachclient['Contact Name'])     \n   emailLabel = Label(text='Contact Email: ' + eachclient['Email'])\n</code></pre>\n\n<p>I need a Tkinter checkbox that can modify the value of 'Send' for each entry in dict_list.<br>\nI will also add a send button that will send only if the checkbox is checked.<br>\n(The send button will call a command like:)  </p>\n\n<pre><code>   def buttonCheck():\n       for eachclient in dict_list:\n           if eachclient 'Send' = 1:\n              send the message\n           else:\n              skip this client \n</code></pre>\n\n<p>Is this possible? I greatly appreciate any help I can get!    </p>\n"}, {"tags": ["python", "python-3.x", "vim", "jedi", "youcompleteme"], "comments": [{"owner": {"reputation": 91788, "user_id": 354577, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dI6cA.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/354577/chris"}, "edited": false, "score": 0, "creation_date": 1451528874, "post_id": 34538623, "comment_id": 56822534, "body": "Are you using virtual environments? And is Vim using the correct one?"}, {"owner": {"reputation": 643, "user_id": 5319874, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/02c2527b8c374e834e1e9e481e677e78?s=128&d=identicon&r=PG", "display_name": "Denis Savenko", "link": "https://stackoverflow.com/users/5319874/denis-savenko"}, "reply_to_user": {"reputation": 91788, "user_id": 354577, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dI6cA.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/354577/chris"}, "edited": false, "score": 0, "creation_date": 1451560260, "post_id": 34538623, "comment_id": 56832662, "body": "No i use default system Python 3.4. With Python evn i haven&#39;t any problem."}], "owner": {"reputation": 643, "user_id": 5319874, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/02c2527b8c374e834e1e9e481e677e78?s=128&d=identicon&r=PG", "display_name": "Denis Savenko", "link": "https://stackoverflow.com/users/5319874/denis-savenko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 116, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1451516712, "creation_date": 1451516712, "question_id": 34538623, "link": "https://stackoverflow.com/questions/34538623/autocomplete-in-some-pythons-module-in-vim", "title": "Autocomplete in some python&#39;s module in VIM", "body": "<p>I use VIM on last Fedora with jedi-vim. It works perfect, but some module jedi can't autocomplite.\nFor exemple I use <code>pyautogui</code> module. With this module autocomplite don't works. And I have seen several similar modules.\nI tested this module in Sublime Text with jedi and andconda plugin, and they can't autocomplite this file too. ( But PyCharm work's fine with it).</p>\n\n<p>I can't understand why? Jedi can't autocomplite big and complicated modules? Or some modules have structure's problem? Are there any solutions to problem with autocomplite?\nMaybe vim have some other plugin for good autocomplite for Python 3? ( i read YouComplite don't work with third version )</p>\n"}, {"tags": ["python", "algorithm"], "comments": [{"owner": {"reputation": 44047, "user_id": 1400793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7VxVK.png?s=128&g=1", "display_name": "Paul Hankin", "link": "https://stackoverflow.com/users/1400793/paul-hankin"}, "edited": false, "score": 0, "creation_date": 1451519427, "post_id": 34538573, "comment_id": 56820333, "body": "Are you looking for a way to compute n from k? <code>n = k&#47;&#47;K</code>"}], "answers": [{"comments": [{"owner": {"reputation": 321, "user_id": 5732368, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/9irIp.jpg?s=128&g=1", "display_name": "1-approximation", "link": "https://stackoverflow.com/users/5732368/1-approximation"}, "edited": false, "score": 0, "creation_date": 1451517060, "post_id": 34538656, "comment_id": 56819582, "body": "In fact, I have &#39;N&#39; loops, one for each range(n*K,(n+1)*K)."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 321, "user_id": 5732368, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/9irIp.jpg?s=128&g=1", "display_name": "1-approximation", "link": "https://stackoverflow.com/users/5732368/1-approximation"}, "edited": false, "score": 3, "creation_date": 1451517187, "post_id": 34538656, "comment_id": 56819627, "body": "@1-approximation: Then you&#39;re going to have to clarify what <code># do something</code> is, and how the various <code># do something</code>s differ from each other."}], "tags": [], "owner": {"reputation": 81337, "user_id": 91757, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/afaf752cb41c3968dbd570c6f6fa0dc3?s=128&d=identicon&r=PG", "display_name": "Frerich Raabe", "link": "https://stackoverflow.com/users/91757/frerich-raabe"}, "is_accepted": false, "score": 5, "last_activity_date": 1451516878, "creation_date": 1451516878, "answer_id": 34538656, "question_id": 34538573, "link": "https://stackoverflow.com/questions/34538573/how-to-write-this-algorithm-in-a-python-code/34538656#34538656", "title": "How to write this algorithm in a python code?", "body": "<p>You could just have three loops, no?</p>\n\n<pre><code>for k in range(K):\n  # do something\nfor k in range(K, 2*K-1):\n  # do something\nfor k in range(2*K-1, (N+1)*K):\n  # do the rest\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 321, "user_id": 5732368, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/9irIp.jpg?s=128&g=1", "display_name": "1-approximation", "link": "https://stackoverflow.com/users/5732368/1-approximation"}, "edited": false, "score": 0, "creation_date": 1451518472, "post_id": 34538734, "comment_id": 56820084, "body": "Thanks. If I want to keep the loop in range(K*(N+1)), can I still do it?"}, {"owner": {"reputation": 2644, "user_id": 747744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58e40f54006383a41c5c00347a7a0cc7?s=128&d=identicon&r=PG", "display_name": "Eugene Primako", "link": "https://stackoverflow.com/users/747744/eugene-primako"}, "reply_to_user": {"reputation": 321, "user_id": 5732368, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/9irIp.jpg?s=128&g=1", "display_name": "1-approximation", "link": "https://stackoverflow.com/users/5732368/1-approximation"}, "edited": false, "score": 0, "creation_date": 1451554483, "post_id": 34538734, "comment_id": 56830025, "body": "If range [0, K*(N+1)]  is ok for you, you can just change range limits (from my piece of code) to N+2 and K+1 accordingly. If you do not want to have number K*(N+1) in the range - probably some hack (i.e. handling this case separately) will be required."}], "tags": [], "owner": {"reputation": 2644, "user_id": 747744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58e40f54006383a41c5c00347a7a0cc7?s=128&d=identicon&r=PG", "display_name": "Eugene Primako", "link": "https://stackoverflow.com/users/747744/eugene-primako"}, "is_accepted": true, "score": 3, "last_activity_date": 1451517402, "creation_date": 1451517402, "answer_id": 34538734, "question_id": 34538573, "link": "https://stackoverflow.com/questions/34538573/how-to-write-this-algorithm-in-a-python-code/34538734#34538734", "title": "How to write this algorithm in a python code?", "body": "<pre><code>for loop_id in xrange(N):\n    for i in xrange(K):\n       k = K * loop_id + i\n       do_smth(loop_id, i, k)\n</code></pre>\n"}], "owner": {"reputation": 321, "user_id": 5732368, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/9irIp.jpg?s=128&g=1", "display_name": "1-approximation", "link": "https://stackoverflow.com/users/5732368/1-approximation"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 669, "favorite_count": 2, "accepted_answer_id": 34538734, "answer_count": 2, "score": 6, "last_activity_date": 1451517823, "creation_date": 1451516436, "last_edit_date": 1451517823, "question_id": 34538573, "link": "https://stackoverflow.com/questions/34538573/how-to-write-this-algorithm-in-a-python-code", "title": "How to write this algorithm in a python code?", "body": "<p>I have the following code.</p>\n\n<pre><code>for k in range( ( N + 1 ) * K ):\n    if k &gt;= 0 and k &lt;= K-1:\n        # do something\n        # n = 0\n    elif k &gt;= K and k &lt;= 2*K-1:\n        # do something\n        # n = 1\n    elif k &gt;= 2*K and k &lt;= 3*K-1:\n        # do something\n        # n = 2\n    ...\n    ...\n</code></pre>\n\n<p>The 'do something' is complicated to explain but I replaced it with the affectation n = p.</p>\n\n<p>How can I write this explicitly?</p>\n\n<p>More specifically, if k is in the set {p*K,...,(p+1)*K-1} for p = 0 to N, then do something. How can I do it in a code?</p>\n"}, {"tags": ["python", "sorting", "input", "errno"], "comments": [{"owner": {"reputation": 2394, "user_id": 629187, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/82f622c78263b1bd52e6f2165d1cd049?s=128&d=identicon&r=PG", "display_name": "Rafael Barros", "link": "https://stackoverflow.com/users/629187/rafael-barros"}, "edited": false, "score": 2, "creation_date": 1451516542, "post_id": 34538542, "comment_id": 56819424, "body": "Is the file with the code you posted in the same directory as the text files you&#39;re trying to open? Which command are you using to run this?"}, {"owner": {"reputation": 1170, "user_id": 2287853, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/N9uCw.jpg?s=128&g=1", "display_name": "Steve Byrne", "link": "https://stackoverflow.com/users/2287853/steve-byrne"}, "edited": false, "score": 0, "creation_date": 1451516723, "post_id": 34538542, "comment_id": 56819474, "body": "It works fine for me with one exception, unsorted_fruits.sort() doesn&#39;t exist (and it shouldn&#39;t be as it isn&#39;t defined in the code). Make sure the file unsorted_fruits.tex is in the same folder (directory) as your Python script. If that doesn&#39;t work please update your question with the file paths of the three files."}, {"owner": {"reputation": 35789, "user_id": 1219295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BmJq2.png?s=128&g=1", "display_name": "Roland Smith", "link": "https://stackoverflow.com/users/1219295/roland-smith"}, "edited": false, "score": 0, "creation_date": 1451518279, "post_id": 34538542, "comment_id": 56820020, "body": "An additional point; you&#39;re writing the <i>unsorted</i> input to the output file."}, {"owner": {"reputation": 1, "user_id": 5732350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d1a960a4761b8ee560034b5aee13476?s=128&d=identicon&r=PG&f=1", "display_name": "TaylorMoon", "link": "https://stackoverflow.com/users/5732350/taylormoon"}, "edited": false, "score": 0, "creation_date": 1451518321, "post_id": 34538542, "comment_id": 56820038, "body": "I just checked the directories, unsorted_fruits.tex was in Downloads and my Python program was in Documents. Changed it and it works now. Thank you guys! Will probably be posting again very soon as I&#39;m unsure about how to sort a list alphabetically."}, {"owner": {"reputation": 35789, "user_id": 1219295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BmJq2.png?s=128&g=1", "display_name": "Roland Smith", "link": "https://stackoverflow.com/users/1219295/roland-smith"}, "edited": false, "score": 0, "creation_date": 1451518501, "post_id": 34538542, "comment_id": 56820091, "body": "@TaylorMoon If your data is on several lines in the file, use the <code>readlines</code> method instead of <code>read</code>. This returns a list of lines. Sort that list and write the sorted list to the output file with <code>writelines</code> instead of <code>write</code>."}], "answers": [{"tags": [], "owner": {"reputation": 2644, "user_id": 747744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58e40f54006383a41c5c00347a7a0cc7?s=128&d=identicon&r=PG", "display_name": "Eugene Primako", "link": "https://stackoverflow.com/users/747744/eugene-primako"}, "is_accepted": false, "score": 0, "last_activity_date": 1451517057, "creation_date": 1451517057, "answer_id": 34538692, "question_id": 34538542, "link": "https://stackoverflow.com/questions/34538542/errno-2-python-no-such-file-directory/34538692#34538692", "title": "Errno 2 Python- No such file/directory", "body": "<p>Your code tries to find the text file in current directory. (For example, it can be the directory where Python interpreter is installed). So you may want to specify the absolute path. if text files are in the same dir with python script, you may want to use something like:</p>\n\n<pre><code>file_name = os.path.join(os.path.dirname(__file__), 'unsorted_fruits.tex')\nwith open(file_name, 'r') as f:\n    data = f.read()\n</code></pre>\n\n<p>(Note: I'm using \"with\" syntax while working with file, so I do not need to close it manually)</p>\n"}], "owner": {"reputation": 1, "user_id": 5732350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d1a960a4761b8ee560034b5aee13476?s=128&d=identicon&r=PG&f=1", "display_name": "TaylorMoon", "link": "https://stackoverflow.com/users/5732350/taylormoon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 936, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1530996275, "creation_date": 1451516256, "last_edit_date": 1530996275, "question_id": 34538542, "link": "https://stackoverflow.com/questions/34538542/errno-2-python-no-such-file-directory", "title": "Errno 2 Python- No such file/directory", "body": "<p>I am an infant in the coding world (week 6) and I need some help! My overall goal is to write a program that inputs the file unsorted_fruits.tex, reads it, sorts the list alphabetically, and then writes it out to a file called sorted_fruits.txt.</p>\n\n<p>So far I have my basics (aside from sorting and writing it into the new file)</p>\n\n<pre><code>infile=open(\"unsorted_fruits.tex\", \"r\")\noutfile=open(\"sorted_fruits.txt\",\"w\")\nfruit=infile.read(26)\noutfile.write(fruit)\nunsorted_fruits.sort()\nprint (fruit)\ninfile.close()\noutfile.close()\n</code></pre>\n\n<p>However I keep getting the <code>[Errno 2] No such file or directory: 'unsorted_fruits.tex'</code></p>\n\n<p>The file is definitely saved to my computer. I thought it might be .tex (I wasn't familiar with this format) so I changed the file to .txt. and called the .txt to see if that worked, no luck, so I changed it back to .tex\nAny help is appreciated, thanks!!</p>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 142005, "user_id": 465183, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3b518a0ea4c992cfe9965671d0139ba4?s=128&d=identicon&r=PG", "display_name": "Gilles Quenot", "link": "https://stackoverflow.com/users/465183/gilles-quenot"}, "edited": false, "score": 0, "creation_date": 1451516080, "post_id": 34538472, "comment_id": 56819278, "body": "Wow, the son of Bob Marley is there, stay tuned folks ! ^^"}, {"owner": {"reputation": 5358, "user_id": 3171657, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J3bKr.png?s=128&g=1", "display_name": "Turn", "link": "https://stackoverflow.com/users/3171657/turn"}, "edited": false, "score": 1, "creation_date": 1451516106, "post_id": 34538472, "comment_id": 56819284, "body": "Where/how have you tested this regex? It doesn&#39;t look right to me at all."}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 1, "creation_date": 1451516671, "post_id": 34538472, "comment_id": 56819463, "body": "Do you have that as a raw string? For example,  <code>regex = r&#39;^\\d&#39;</code>"}, {"owner": {"reputation": 12289, "user_id": 675568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1cfe53579fb7b2afd58949be94cf97e?s=128&d=identicon&r=PG", "display_name": "Tom Zych", "link": "https://stackoverflow.com/users/675568/tom-zych"}, "reply_to_user": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1451520503, "post_id": 34538472, "comment_id": 56820618, "body": "@cricket_007: Always a good question, but in this case it&#39;s moot since there are no backslashes at all."}], "answers": [{"comments": [{"owner": {"reputation": 4558, "user_id": 4293417, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/15V7E.png?s=128&g=1", "display_name": "Zizouz212", "link": "https://stackoverflow.com/users/4293417/zizouz212"}, "edited": false, "score": 1, "creation_date": 1451517949, "post_id": 34538562, "comment_id": 56819911, "body": "This is derogatory. I honestly can&#39;t distinguish the rant in your answer, from the actual answer itself (if there even is one). If you can&#39;t bother to answer with something that will help, then please, don&#39;t answer at all."}, {"owner": {"reputation": 142005, "user_id": 465183, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3b518a0ea4c992cfe9965671d0139ba4?s=128&d=identicon&r=PG", "display_name": "Gilles Quenot", "link": "https://stackoverflow.com/users/465183/gilles-quenot"}, "edited": false, "score": 0, "creation_date": 1451520812, "post_id": 34538562, "comment_id": 56820694, "body": "No criticism nor derogatory here. I give the better clue to resolv the problem : use python instead of complicated regex."}], "tags": [], "owner": {"reputation": 142005, "user_id": 465183, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3b518a0ea4c992cfe9965671d0139ba4?s=128&d=identicon&r=PG", "display_name": "Gilles Quenot", "link": "https://stackoverflow.com/users/465183/gilles-quenot"}, "is_accepted": false, "score": -2, "last_activity_date": 1451518156, "last_edit_date": 1451518156, "creation_date": 1451516375, "answer_id": 34538562, "question_id": 34538472, "link": "https://stackoverflow.com/questions/34538472/converting-into-python-regex/34538562#34538562", "title": "Converting into python regex", "body": "<p>Your regex (not reggae: was funny in the title) syntax is already python compliant.</p>\n\n<p>How did you use it ? Show us your code and tell us what you expect !</p>\n\n<p>A simpler approach :</p>\n\n<pre><code>&gt;&gt;&gt; import re\n&gt;&gt;&gt; x = '30/12/15'\n&gt;&gt;&gt; print(re.search('^(\\d{2})/(\\d{2})/(\\d{2,4})$', x).groups())\n('30', '12', '15')\n&gt;&gt;&gt; x = '30/12/2015'\n&gt;&gt;&gt; print(re.search('^(\\d{2})/(\\d{2})/(\\d{2,4})$', x).groups())\n('30', '12', '2015')\n</code></pre>\n\n<p>You can start your work on this and elaborate deeper and deeper while the regex still match between tests</p>\n\n<h2>NOTE</h2>\n\n<p>do you understand this ?</p>\n\n<pre><code>(?:  )\n</code></pre>\n\n<p>this for grouping without capturing.</p>\n\n<p>If you expect '15' to be returned, don't use this</p>\n\n<p>Last but not least, when regex get so complicated, use python itself  :</p>\n\n<pre><code>&gt;&gt;&gt; x = '30/12/2015'\n&gt;&gt;&gt; a = x.split(\"/\")\n&gt;&gt;&gt; if a[0] &gt;=1 and a[0] &lt;= 31 ... # to be completed\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 123, "user_id": 4646827, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/ddff7fd12e4fc03a82026804e6a7dcca?s=128&d=identicon&r=PG&f=1", "display_name": "NeptuneGamer", "link": "https://stackoverflow.com/users/4646827/neptunegamer"}, "edited": false, "score": 0, "creation_date": 1451517834, "post_id": 34538570, "comment_id": 56819871, "body": "Is it possible to extend this for MM/YY ?"}, {"owner": {"reputation": 1249, "user_id": 5447959, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4a9d020250c1e215cc229e30ae753c62?s=128&d=identicon&r=PG&f=1", "display_name": "pbaylis", "link": "https://stackoverflow.com/users/5447959/pbaylis"}, "reply_to_user": {"reputation": 123, "user_id": 4646827, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/ddff7fd12e4fc03a82026804e6a7dcca?s=128&d=identicon&r=PG&f=1", "display_name": "NeptuneGamer", "link": "https://stackoverflow.com/users/4646827/neptunegamer"}, "edited": false, "score": 0, "creation_date": 1451518280, "post_id": 34538570, "comment_id": 56820021, "body": "Sure. Just remove the second part: <code>([01]?[0-9])\\&#47;([0-9]{2,4})</code>"}], "tags": [], "owner": {"reputation": 1249, "user_id": 5447959, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4a9d020250c1e215cc229e30ae753c62?s=128&d=identicon&r=PG&f=1", "display_name": "pbaylis", "link": "https://stackoverflow.com/users/5447959/pbaylis"}, "is_accepted": false, "score": 0, "last_activity_date": 1451516840, "last_edit_date": 1451516840, "creation_date": 1451516423, "answer_id": 34538570, "question_id": 34538472, "link": "https://stackoverflow.com/questions/34538472/converting-into-python-regex/34538570#34538570", "title": "Converting into python regex", "body": "<p>This should work and is similar to what you were doing. </p>\n\n<pre><code>([01]?[0-9])\\/([0-3]?[0-9])\\/([0-9]{2,4})\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1117, "user_id": 4659530, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-roxlUfPluyM/AAAAAAAAAAI/AAAAAAAACds/FincZikUAqM/photo.jpg?sz=128", "display_name": "Rahul Kumar", "link": "https://stackoverflow.com/users/4659530/rahul-kumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1451517802, "creation_date": 1451517802, "answer_id": 34538803, "question_id": 34538472, "link": "https://stackoverflow.com/questions/34538472/converting-into-python-regex/34538803#34538803", "title": "Converting into python regex", "body": "<p>Bro try this,</p>\n\n<pre><code>'(3[01]|[12][0-9]|0?[1-9])/([0]*[1-9]|[1][012])/([0-9]{2,4})'\n</code></pre>\n\n<p>I have tested this, you can check it on </p>\n\n<p><a href=\"http://ideone.com/M0Ojqx\" rel=\"nofollow\">http://ideone.com/M0Ojqx</a></p>\n\n<pre><code>import re\nmyString = \"Todays date is 31/12/2015 and tomorrow's date is 1/1/15\"\nmyList = re.findall('(3[01]|[12][0-9]|0?[1-9])/([0]*[1-9]|[1][012])/([0-9]{2,4})',myString)\nprint myList\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13767, "user_id": 2413201, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rxfuw.jpg?s=128&g=1", "display_name": "Armali", "link": "https://stackoverflow.com/users/2413201/armali"}, "is_accepted": false, "score": 0, "last_activity_date": 1518683087, "creation_date": 1518683087, "answer_id": 48802791, "question_id": 34538472, "link": "https://stackoverflow.com/questions/34538472/converting-into-python-regex/48802791#48802791", "title": "Converting into python regex", "body": "<blockquote>\n<pre><code>^(3[01]|[12][0-9]|0?[1-9])/(1[0-2]|0?[1-9])/(?:[0-9]{2})?[0-9]{2}$\n</code></pre>\n  \n  <p>I am trying to match mm/yy and dd/mm/yyyy</p>\n</blockquote>\n\n<p>Your regex already matches <em>dd/mm/yyyy</em>. To also match <em>mm/yy</em>, you just have to make the <em>dd/</em> part optional by enclosing it in <code>(?:</code> <code>)?</code> as you did with the century digits.</p>\n\n<pre><code>regex = '^(?:(3[01]|[12][0-9]|0?[1-9])/)?(1[0-2]|0?[1-9])/(?:[0-9]{2})?[0-9]{2}$'\nimport re\nprint re.match(regex, '30/12/15').group(0,1,2)\n#('30/12/15', '30', '12')\n\nprint re.match(regex, '12/15').group(0,1,2)\n#('12/15', None, '12')\n</code></pre>\n"}], "owner": {"reputation": 123, "user_id": 4646827, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/ddff7fd12e4fc03a82026804e6a7dcca?s=128&d=identicon&r=PG&f=1", "display_name": "NeptuneGamer", "link": "https://stackoverflow.com/users/4646827/neptunegamer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1518683087, "creation_date": 1451515897, "last_edit_date": 1451517391, "question_id": 34538472, "link": "https://stackoverflow.com/questions/34538472/converting-into-python-regex", "title": "Converting into python regex", "body": "<p>I am slightly confused as I am trying to use a regex which I have tested and works but does not appear to work in Python </p>\n\n<pre><code>^(3[01]|[12][0-9]|0?[1-9])/(1[0-2]|0?[1-9])/(?:[0-9]{2})?[0-9]{2}$\n</code></pre>\n\n<p>I am trying to match mm/yy and dd/mm/yyyy</p>\n"}, {"tags": ["python", "unicode", "arabic", "phonetics", "grapheme"], "answers": [{"comments": [{"owner": {"reputation": 590, "user_id": 4918598, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/3bd29d009525b147d9fb9add3b28a4e2?s=128&d=identicon&r=PG&f=1", "display_name": "0x01Brain", "link": "https://stackoverflow.com/users/4918598/0x01brain"}, "edited": false, "score": 0, "creation_date": 1451524206, "post_id": 34539469, "comment_id": 56821554, "body": "I think you are right, but how can i convert unicode isolated form to normal unicode?"}, {"owner": {"reputation": 1684, "user_id": 4403123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3d6cb94cda55242f6537bba6d90e09b?s=128&d=identicon&r=PG&f=1", "display_name": "KSFT", "link": "https://stackoverflow.com/users/4403123/ksft"}, "reply_to_user": {"reputation": 590, "user_id": 4918598, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/3bd29d009525b147d9fb9add3b28a4e2?s=128&d=identicon&r=PG&f=1", "display_name": "0x01Brain", "link": "https://stackoverflow.com/users/4918598/0x01brain"}, "edited": false, "score": 0, "creation_date": 1451525843, "post_id": 34539469, "comment_id": 56821924, "body": "@0x01Brain I wouldn&#39;t call it a different &quot;form&quot;; it&#39;s just another character. I&#39;d just put two entries in the dictionary. By the way, if my answer helped you, feel free to vote it up."}, {"owner": {"reputation": 590, "user_id": 4918598, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/3bd29d009525b147d9fb9add3b28a4e2?s=128&d=identicon&r=PG&f=1", "display_name": "0x01Brain", "link": "https://stackoverflow.com/users/4918598/0x01brain"}, "edited": false, "score": 0, "creation_date": 1451526199, "post_id": 34539469, "comment_id": 56821990, "body": "so why they are having different hex values?"}, {"owner": {"reputation": 1684, "user_id": 4403123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3d6cb94cda55242f6537bba6d90e09b?s=128&d=identicon&r=PG&f=1", "display_name": "KSFT", "link": "https://stackoverflow.com/users/4403123/ksft"}, "reply_to_user": {"reputation": 590, "user_id": 4918598, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/3bd29d009525b147d9fb9add3b28a4e2?s=128&d=identicon&r=PG&f=1", "display_name": "0x01Brain", "link": "https://stackoverflow.com/users/4918598/0x01brain"}, "edited": false, "score": 0, "creation_date": 1451530079, "post_id": 34539469, "comment_id": 56822769, "body": "@0x01Brain It&#39;s a completely different character."}], "tags": [], "owner": {"reputation": 1684, "user_id": 4403123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3d6cb94cda55242f6537bba6d90e09b?s=128&d=identicon&r=PG&f=1", "display_name": "KSFT", "link": "https://stackoverflow.com/users/4403123/ksft"}, "is_accepted": false, "score": 1, "last_activity_date": 1451522531, "creation_date": 1451522531, "answer_id": 34539469, "question_id": 34538388, "link": "https://stackoverflow.com/questions/34538388/how-to-map-arabic-letters-to-phonemes-in-python/34539469#34539469", "title": "How to map Arabic letters to phonemes in Python?", "body": "<p>It looks like you forgot that character in the dictionary. You have <code>\ufe8d</code> (<code>u'\\ufe8d'</code>, ARABIC LETTER ALEF ISOLATED FORM), which looks similar, but you don't have <code>\u0627</code> (<code>u'\\u0627'</code>, ARABIC LETTER ALEF).</p>\n"}, {"tags": [], "owner": {"reputation": 1187, "user_id": 1583582, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4822d967b9ea49b270dab6b38ddf5feb?s=128&d=identicon&r=PG", "display_name": "Alex Belyaev", "link": "https://stackoverflow.com/users/1583582/alex-belyaev"}, "is_accepted": true, "score": 3, "last_activity_date": 1451527809, "last_edit_date": 1495539892, "creation_date": 1451527809, "answer_id": 34540091, "question_id": 34538388, "link": "https://stackoverflow.com/questions/34538388/how-to-map-arabic-letters-to-phonemes-in-python/34540091#34540091", "title": "How to map Arabic letters to phonemes in Python?", "body": "<p>The first thing that catches the eye is <code>KeyError</code>. So your dictionary simply does not know about some symbols encountered in file. Looking ahead, it does not know about ANY of the submitted characters, not only about the first.</p>\n\n<p>What we can to do with it? Okay, we can just add all of the symbols from Arabian segment of unicode table into our dictionary. Simple? Yes. Clear? No.</p>\n\n<p>If you want to actually understand the reasons of this 'strange' behaviour, you should to know more about Unicode. In short, there are a lot of letters that looks similar but have different ordinal numbers. Moreover, the same letter sometimes can be presented in multiple forms. So <a href=\"https://en.wikipedia.org/wiki/Unicode_equivalence#Normalization\" rel=\"nofollow noreferrer\">comparing unicode characters</a> is <a href=\"https://stackoverflow.com/questions/30042618/is-there-a-way-to-compare-arabic-characters-without-regard-to-their-initial-medi\">not a trivial task</a>.</p>\n\n<p>So, if I was allowed to use Python 3.3+ I would solve the task as follows. First I'll normalize keys in <code>ar_let_phon_maplist</code> dictionary:</p>\n\n<pre><code>ar_let_phon_maplist = {unicodedata.normalize('NFKD', k): v \n                            for k, v in ar_let_phon_maplist.items()}\n</code></pre>\n\n<p>And then we will iterate over lines in file, words in line and characters in word like this:</p>\n\n<pre><code>for index, line in enumerate(lines):\n    print('Phonetics in line {0}, total {1} symbols'.format(index, len(line)))\n    unknown = []  # Here will be stored symbols that we haven't found in dict\n    words = line.split()\n    for word in words:\n        print(word, ': ', sep='', end='')\n        for character in word:\n            c = unicodedata.normalize('NFKD', character).casefold()\n            try:                \n                print(ar_let_phon_maplist[c], sep='', end='')\n            except KeyError:\n                print('_', sep='', end='')\n                if c not in unknown:\n                    unknown.append(c)\n        print()\n    if unknown:\n        print('Unrecognized symbols: {0}, total {1} symbols'.format(', '.join(unknown), \n                                                                    len(unknown)))\n</code></pre>\n\n<p>Script will produce something like that:</p>\n\n<pre><code>Phonetics in line 4, total 9 symbols\n\u0643\u064a\u0641: KYF\n\u062d\u0627\u0644\u0643: HA:LK\n</code></pre>\n"}], "owner": {"reputation": 590, "user_id": 4918598, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/3bd29d009525b147d9fb9add3b28a4e2?s=128&d=identicon&r=PG&f=1", "display_name": "0x01Brain", "link": "https://stackoverflow.com/users/4918598/0x01brain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1193, "favorite_count": 2, "accepted_answer_id": 34540091, "answer_count": 2, "score": 2, "last_activity_date": 1451527809, "creation_date": 1451515399, "last_edit_date": 1451520599, "question_id": 34538388, "link": "https://stackoverflow.com/questions/34538388/how-to-map-arabic-letters-to-phonemes-in-python", "title": "How to map Arabic letters to phonemes in Python?", "body": "<p>I want to make a simple Python script that will map each Arabic letter to phoneme sound symbols. I have a file that has a bunch of words that the script will read to convert them to phonemes, and I have the following dictionary in my code:</p>\n\n<p>Content in my <code>.txt</code> file:</p>\n\n<pre><code>\u0627\u0644\u0633\u0644\u0627\u0645 \u0639\u0644\u064a\u0643\u0645\n\u0627\u0644\u0633\u0644\u0627\u0645 \u0639\u0644\u064a\u0643\u0645 \u0648 \u0631\u062d\u0645\u0629 \u0627\u0644\u0644\u0647\n\u0627\u0644\u0633\u0644\u0627\u0645 \u0639\u0644\u064a\u0643\u0645 \u0648 \u0631\u062d\u0645\u0629 \u0627\u0644\u0644\u0647 \u0648 \u0628\u0631\u0643\u0627\u062a\u0647\n\u0627\u0644\u062d\u0645\u062f \u0644\u0644\u0647\n\u0643\u064a\u0641 \u062d\u0627\u0644\u0643\n\u0643\u064a\u0641 \u0627\u0644\u062d\u0627\u0644\n</code></pre>\n\n<p>The dictionary in my code:</p>\n\n<pre><code>ar_let_phon_maplist = {u'\ufe8d':'A:', u'\ufe8f':'B', u'\ufe95':'T', u'\ufe99':'TH', u'\ufe9d':'J', u'\ufea1':'H', u'\ufea5':'KH', u'\ufee9':'H', u'\ufec9':'(ayn) \u2019', u'\ufecd':'GH', u'\ufed1':'F', u'\ufed5':'q', u'\ufeb9':u'\u1e63', u'\ufebd':u'\u1e0d', u'\ufea9':'D', u'\ufeab':'DH', u'\ufec1':u'\u1e6d', u'\ufed9':'K', u'\ufee1':'M', u'\ufee5':'N', u'\ufedd':'L', u'\ufef1':'Y', u'\ufeb1':'S', u'\ufeb5':'SH', u'\ufec5':u'\u1e93', u'\ufeaf':'Z', u'\ufeed':'W', u'\ufead':'R'}\n</code></pre>\n\n<p>I have a nested loop where I'm reading each line, converting each character:</p>\n\n<pre><code>with codecs.open(sys.argv[1], 'r', encoding='utf-8') as file:\n        lines = file.readlines()\n\nline_counter = 0\n\nfor line in lines:\n        print \"Phonetics In Line \" + str(line_counter)\n        print line + \" \",\n        for word in line:\n                for character in word:\n                        if character == '\\n':\n                                print \"\"\n                        elif character == ' ':\n                                print \"  \"\n                        else:\n                                print ar_let_phon_maplist[character] + \" \",\nline_counter +=1\n</code></pre>\n\n<p>And this is the error I'm getting:</p>\n\n<pre><code>Phonetics In Line 0\n\u0627\u0644\u0633\u0644\u0627\u0645 \u0639\u0644\u064a\u0643\u0645\n\nTraceback (most recent call last):\n  File \"grapheme2phoneme.py\", line 25, in &lt;module&gt;\n    print ar_let_phon_maplist[character] + \" \",\nKeyError: u'\\u0627'\n</code></pre>\n\n<p>And then I checked if the file type is UTF-8 using the Linux command:</p>\n\n<pre><code>file words.txt\n</code></pre>\n\n<p>The output I got:</p>\n\n<pre><code>words.txt: UTF-8 Unicode text\n</code></pre>\n\n<p>Any solution for this problem, why it's not mapping to an Unicode object that is in the dictionary since also the character I'm using as key in <code>ar_let_phon_maplist[character]</code> line is Unicode?\nIs there something wrong with my code?</p>\n"}, {"tags": ["python", "r", "google-geocoder", "reverse-geocoding"], "comments": [{"owner": {"reputation": 4761, "user_id": 604456, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f8131a8ce26d3ebfeb8543ab907270e7?s=128&d=identicon&r=PG", "display_name": "Andy W", "link": "https://stackoverflow.com/users/604456/andy-w"}, "edited": false, "score": 0, "creation_date": 1451518447, "post_id": 34538378, "comment_id": 56820075, "body": "FYI that is going to cost you $28 to use the google api for that many addresses."}, {"owner": {"reputation": 125, "user_id": 4327546, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/7c45eace005d7733108683bf670ddb7d?s=128&d=identicon&r=PG", "display_name": "bshah", "link": "https://stackoverflow.com/users/4327546/bshah"}, "reply_to_user": {"reputation": 4761, "user_id": 604456, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f8131a8ce26d3ebfeb8543ab907270e7?s=128&d=identicon&r=PG", "display_name": "Andy W", "link": "https://stackoverflow.com/users/604456/andy-w"}, "edited": false, "score": 0, "creation_date": 1451587618, "post_id": 34538378, "comment_id": 56843232, "body": "@AndyW Can you direct me to an alternative solution?"}], "answers": [{"comments": [{"owner": {"reputation": 125, "user_id": 4327546, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/7c45eace005d7733108683bf670ddb7d?s=128&d=identicon&r=PG", "display_name": "bshah", "link": "https://stackoverflow.com/users/4327546/bshah"}, "edited": false, "score": 0, "creation_date": 1451587468, "post_id": 34538851, "comment_id": 56843177, "body": "Does it limit me to only &#39;n&#39; number of addresses per day? From @Andy&#39;s comment above I am assuming that all the geocoding libraries which might be using Google API will not let me query for 58000 addresses."}, {"owner": {"reputation": 4636, "user_id": 4411559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8792b137591b65d0ecdc3798c513369?s=128&d=identicon&r=PG&f=1", "display_name": "steveb", "link": "https://stackoverflow.com/users/4411559/steveb"}, "reply_to_user": {"reputation": 125, "user_id": 4327546, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/7c45eace005d7733108683bf670ddb7d?s=128&d=identicon&r=PG", "display_name": "bshah", "link": "https://stackoverflow.com/users/4327546/bshah"}, "edited": false, "score": 0, "creation_date": 1451588379, "post_id": 34538851, "comment_id": 56843491, "body": "I don&#39;t know unfortunately.  They probably have some guidelines on this on their webpage."}, {"owner": {"reputation": 4761, "user_id": 604456, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f8131a8ce26d3ebfeb8543ab907270e7?s=128&d=identicon&r=PG", "display_name": "Andy W", "link": "https://stackoverflow.com/users/604456/andy-w"}, "edited": false, "score": 1, "creation_date": 1451590538, "post_id": 34538851, "comment_id": 56844075, "body": "This example uses Nominatim - which is not google - so I don&#39;t know there usage rates. See <a href=\"http://gis.stackexchange.com/a/21390/751\">gis.stackexchange.com/a/21390/751</a> for advice about batch geocoding. Census has zip code areas, it is a simple task in a desktop GIS program."}], "tags": [], "owner": {"reputation": 4636, "user_id": 4411559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8792b137591b65d0ecdc3798c513369?s=128&d=identicon&r=PG&f=1", "display_name": "steveb", "link": "https://stackoverflow.com/users/4411559/steveb"}, "is_accepted": false, "score": 3, "last_activity_date": 1451518098, "creation_date": 1451518098, "answer_id": 34538851, "question_id": 34538378, "link": "https://stackoverflow.com/questions/34538378/geocoder-google-returning-none-values-in-python/34538851#34538851", "title": "Geocoder.google returning None values in Python", "body": "<p>From the Geopy github link</p>\n\n<p><a href=\"https://github.com/geopy/geopy\" rel=\"nofollow\">https://github.com/geopy/geopy</a></p>\n\n<p>I used one of the examples to come up with a possible solution for you</p>\n\n<pre><code>from geopy.geocoders import Nominatim\ngeolocator = Nominatim()\nloc = geolocator.reverse(\"33.573256, -111.906344\")\nprint(loc.address)\n\n8006, East del Timbre Drive, Scottsdale, Maricopa County, Arizona, 85258, United States of America\n</code></pre>\n\n<p>This doesn't address the problem with the code you already have but it sounds like you are looking for any solution that works.</p>\n"}], "owner": {"reputation": 125, "user_id": 4327546, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/7c45eace005d7733108683bf670ddb7d?s=128&d=identicon&r=PG", "display_name": "bshah", "link": "https://stackoverflow.com/users/4327546/bshah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2926, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1451518098, "creation_date": 1451515351, "question_id": 34538378, "link": "https://stackoverflow.com/questions/34538378/geocoder-google-returning-none-values-in-python", "title": "Geocoder.google returning None values in Python", "body": "<p>I am trying to use the geocoder.google to find zipcodes from the lat, long values. It keeps returning <code>None</code> value. </p>\n\n<p>INPUT</p>\n\n<pre><code>a = gc.google([33.573256, -111.906344], method='reverse')\nprint a.postal\nprint a.address\n</code></pre>\n\n<p>OUTPUT</p>\n\n<pre><code>None\nNone\n</code></pre>\n\n<p>Can someone also tell me an easier way for converting Lat/long to zipcodes in python (preferably) or R. I have a csv file with about 58,000 rows. I want to find associated zipcodes to all these Lat,Lon values</p>\n"}, {"tags": ["python", "python-2.7", "command-line", "autopep8"], "answers": [{"comments": [{"owner": {"reputation": 1550, "user_id": 3772347, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/PXajO.jpg?s=128&g=1", "display_name": "AdjunctProfessorFalcon", "link": "https://stackoverflow.com/users/3772347/adjunctprofessorfalcon"}, "edited": false, "score": 0, "creation_date": 1451518070, "post_id": 34538338, "comment_id": 56819954, "body": "find is returning the following path: <code>PATH=&#47;Users&#47;vader&#47;.oh-my-zsh&#47;plugins&#47;autopep8</code> and in the <code>autopep8</code> folder I&#39;m seeing two files: <code>_autopep8</code> and <code>autopep8.plugin.zsh</code> - which should I include in the <code>export PATH ...</code>?"}, {"owner": {"reputation": 142005, "user_id": 465183, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3b518a0ea4c992cfe9965671d0139ba4?s=128&d=identicon&r=PG", "display_name": "Gilles Quenot", "link": "https://stackoverflow.com/users/465183/gilles-quenot"}, "reply_to_user": {"reputation": 1550, "user_id": 3772347, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/PXajO.jpg?s=128&g=1", "display_name": "AdjunctProfessorFalcon", "link": "https://stackoverflow.com/users/3772347/adjunctprofessorfalcon"}, "edited": false, "score": 0, "creation_date": 1451518419, "post_id": 34538338, "comment_id": 56820068, "body": "This seems not the right dir. The dir should contains an eXecutable named <code>autopep8</code>"}, {"owner": {"reputation": 1550, "user_id": 3772347, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/PXajO.jpg?s=128&g=1", "display_name": "AdjunctProfessorFalcon", "link": "https://stackoverflow.com/users/3772347/adjunctprofessorfalcon"}, "edited": false, "score": 0, "creation_date": 1451519622, "post_id": 34538338, "comment_id": 56820387, "body": "You&#39;re talking about a <code>autopep8.exe</code> file?"}, {"owner": {"reputation": 142005, "user_id": 465183, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3b518a0ea4c992cfe9965671d0139ba4?s=128&d=identicon&r=PG", "display_name": "Gilles Quenot", "link": "https://stackoverflow.com/users/465183/gilles-quenot"}, "reply_to_user": {"reputation": 1550, "user_id": 3772347, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/PXajO.jpg?s=128&g=1", "display_name": "AdjunctProfessorFalcon", "link": "https://stackoverflow.com/users/3772347/adjunctprofessorfalcon"}, "edited": false, "score": 0, "creation_date": 1451520922, "post_id": 34538338, "comment_id": 56820721, "body": "Are you using windows or linux ? An executable can be a binary or a text file (a script) having eXecutable bit (unix rights)"}, {"owner": {"reputation": 142005, "user_id": 465183, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3b518a0ea4c992cfe9965671d0139ba4?s=128&d=identicon&r=PG", "display_name": "Gilles Quenot", "link": "https://stackoverflow.com/users/465183/gilles-quenot"}, "reply_to_user": {"reputation": 1550, "user_id": 3772347, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/PXajO.jpg?s=128&g=1", "display_name": "AdjunctProfessorFalcon", "link": "https://stackoverflow.com/users/3772347/adjunctprofessorfalcon"}, "edited": false, "score": 0, "creation_date": 1451521002, "post_id": 34538338, "comment_id": 56820744, "body": "So not <code>autopep8.exe</code>"}, {"owner": {"reputation": 1550, "user_id": 3772347, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/PXajO.jpg?s=128&g=1", "display_name": "AdjunctProfessorFalcon", "link": "https://stackoverflow.com/users/3772347/adjunctprofessorfalcon"}, "edited": false, "score": 0, "creation_date": 1451521055, "post_id": 34538338, "comment_id": 56820760, "body": "Right. I was trying to verify whether or not you noticed I specified Mac OSX in my post."}, {"owner": {"reputation": 142005, "user_id": 465183, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3b518a0ea4c992cfe9965671d0139ba4?s=128&d=identicon&r=PG", "display_name": "Gilles Quenot", "link": "https://stackoverflow.com/users/465183/gilles-quenot"}, "reply_to_user": {"reputation": 1550, "user_id": 3772347, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/PXajO.jpg?s=128&g=1", "display_name": "AdjunctProfessorFalcon", "link": "https://stackoverflow.com/users/3772347/adjunctprofessorfalcon"}, "edited": false, "score": 0, "creation_date": 1451521219, "post_id": 34538338, "comment_id": 56820799, "body": "I don&#39;t use MacOsX but it shouldn&#39;t different from linux"}, {"owner": {"reputation": 1550, "user_id": 3772347, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/PXajO.jpg?s=128&g=1", "display_name": "AdjunctProfessorFalcon", "link": "https://stackoverflow.com/users/3772347/adjunctprofessorfalcon"}, "edited": false, "score": 0, "creation_date": 1451526017, "post_id": 34538338, "comment_id": 56821950, "body": "Does this look right? <code>&#47;Library&#47;Frameworks&#47;Python.framework&#47;Versions&#47;2.7&#47;lib&#47;python&zwnj;&#8203;2.7&#47;site-packages&#47;au&zwnj;&#8203;topep8.py</code> ?"}, {"owner": {"reputation": 142005, "user_id": 465183, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3b518a0ea4c992cfe9965671d0139ba4?s=128&d=identicon&r=PG", "display_name": "Gilles Quenot", "link": "https://stackoverflow.com/users/465183/gilles-quenot"}, "reply_to_user": {"reputation": 1550, "user_id": 3772347, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/PXajO.jpg?s=128&g=1", "display_name": "AdjunctProfessorFalcon", "link": "https://stackoverflow.com/users/3772347/adjunctprofessorfalcon"}, "edited": false, "score": 0, "creation_date": 1451551030, "post_id": 34538338, "comment_id": 56828689, "body": "Possibly yes, try this out"}], "tags": [], "owner": {"reputation": 142005, "user_id": 465183, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3b518a0ea4c992cfe9965671d0139ba4?s=128&d=identicon&r=PG", "display_name": "Gilles Quenot", "link": "https://stackoverflow.com/users/465183/gilles-quenot"}, "is_accepted": false, "score": 4, "last_activity_date": 1451515105, "creation_date": 1451515105, "answer_id": 34538338, "question_id": 34538311, "link": "https://stackoverflow.com/questions/34538311/bash-command-not-found-error-when-trying-to-run-autopep8/34538338#34538338", "title": "-bash command not found error when trying to run autopep8", "body": "<p>You have to fix your <code>~/.bashrc</code> with :</p>\n\n<pre><code>export PATH=/full/path/to/autopep8_executable/dir:$PATH\n</code></pre>\n\n<p>then:</p>\n\n<pre><code>exec bash\n</code></pre>\n\n<p>to reload the edited file</p>\n\n<p>You can figure out where the dir is using : </p>\n\n<pre><code>find ~ -name autopep8\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 9502898, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5OG9d1XDq8M/AAAAAAAAAAI/AAAAAAAAExU/Jy3nbY1AvEs/photo.jpg?sz=128", "display_name": "kromciuszek", "link": "https://stackoverflow.com/users/9502898/kromciuszek"}, "is_accepted": false, "score": 2, "last_activity_date": 1535668215, "creation_date": 1535668215, "answer_id": 52106178, "question_id": 34538311, "link": "https://stackoverflow.com/questions/34538311/bash-command-not-found-error-when-trying-to-run-autopep8/52106178#52106178", "title": "-bash command not found error when trying to run autopep8", "body": "<p>I had the same problem. What helped me was just uninstalling pep with:</p>\n\n<pre><code>pip uninstall autopep8\n</code></pre>\n\n<p>and then installing it again with:</p>\n\n<pre><code>pip install autopep8\n</code></pre>\n"}], "owner": {"reputation": 1550, "user_id": 3772347, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/PXajO.jpg?s=128&g=1", "display_name": "AdjunctProfessorFalcon", "link": "https://stackoverflow.com/users/3772347/adjunctprofessorfalcon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4197, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1535668215, "creation_date": 1451514935, "question_id": 34538311, "link": "https://stackoverflow.com/questions/34538311/bash-command-not-found-error-when-trying-to-run-autopep8", "title": "-bash command not found error when trying to run autopep8", "body": "<p>I can't seem to figure out a solution to this...</p>\n\n<p>I've installed autopep8 on my Mac OSX 10.10.5 running Python2.7 using the following: </p>\n\n<pre><code>$ pip install autopep8\n</code></pre>\n\n<p>However, when I try to run any <code>autopep8</code> commands on a file like this: </p>\n\n<pre><code>$ autopep8 --in-place --aggressive --aggressive testfile.py\n</code></pre>\n\n<p>I get this: </p>\n\n<pre><code>-bash: autopep: command not found\n</code></pre>\n\n<p>I've tried to confirm that <code>autopep8</code> is installed by the following: </p>\n\n<pre><code>&gt;&gt;&gt; try:\n...     import autopep8\n...     print \"this is installed\"\n... except ImportError:\n...     print \"no module\"\n... \nthis is installed\n</code></pre>\n\n<p>I've also uninstalled and reinstalled both <code>autopep8</code> and <code>pep8</code> a few times, to no avail. What else should I try or what did I not do correctly? </p>\n"}, {"tags": ["python", "function", "dictionary", "input", "key"], "comments": [{"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1451515659, "post_id": 34538307, "comment_id": 56819134, "body": "You are ignoring the return value of the recursive call."}], "answers": [{"tags": [], "owner": {"reputation": 50872, "user_id": 523612, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4ae512dd708a619496d36b1f681f95e0?s=128&d=identicon&r=PG", "display_name": "Karl Knechtel", "link": "https://stackoverflow.com/users/523612/karl-knechtel"}, "is_accepted": false, "score": 1, "last_activity_date": 1451515101, "creation_date": 1451515101, "answer_id": 34538336, "question_id": 34538307, "link": "https://stackoverflow.com/questions/34538307/python-3-4-3-why-wont-my-program-save-my-dictionary-key-after-false-input/34538336#34538336", "title": "Python 3.4.3. why wont my program save my dictionary key after false input?", "body": "<p>A recursive call works like any other function call: you call <code>add_goose_group</code> to handle the case where the input was invalid, but then you don't actually do anything with the result. You reach the end of the current function call (the fact that the function you're currently <em>in</em> is <em>also</em> <code>add_goose_group</code> <em>does not matter here</em>), and implicitly return <code>None</code>, just like any other time you reach the end of a function in Python without explicitly <code>return</code>ing.</p>\n\n<p>However, you should not be using recursion for this - do a loop instead.</p>\n"}, {"tags": [], "owner": {"reputation": 50185, "user_id": 276949, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/52e96d535181560d2b46d4b513454ee5?s=128&d=identicon&r=PG", "display_name": "Martin Konecny", "link": "https://stackoverflow.com/users/276949/martin-konecny"}, "is_accepted": false, "score": 0, "last_activity_date": 1451515145, "creation_date": 1451515145, "answer_id": 34538346, "question_id": 34538307, "link": "https://stackoverflow.com/questions/34538307/python-3-4-3-why-wont-my-program-save-my-dictionary-key-after-false-input/34538346#34538346", "title": "Python 3.4.3. why wont my program save my dictionary key after false input?", "body": "<blockquote>\n  <p>Why does it not save the input taken from the user and put it into the key position?</p>\n</blockquote>\n\n<p>Where exactly do you have an object that would store this input?</p>\n\n<p>Perhaps you need something like this:</p>\n\n<pre><code>def add_goose_group():\n    while True:\n        goose_group_name = input('Insert the name of the raft ')\n        goose_group_name = str(goose_group_name)\n        if goose_group_name.isdigit() == False and (' ' in goose_group_name) == False:\n            return goose_group_name\n\ndct = {}\ndct['user_input'] = add_goose_group()\n\nprint(dct)  # outputs {\"user_input\": \"name of inputted raft\"}\n</code></pre>\n\n<p><code>add_goose_group()</code> will loop forever until the user enters valid input (not a digit, and no spaces), and save this input into your <code>dct</code> object. </p>\n"}], "owner": {"reputation": 11, "user_id": 5732282, "user_type": "registered", "profile_image": "https://graph.facebook.com/1136194193057932/picture?type=large", "display_name": "Silver Kurrik", "link": "https://stackoverflow.com/users/5732282/silver-kurrik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1451515145, "creation_date": 1451514912, "question_id": 34538307, "link": "https://stackoverflow.com/questions/34538307/python-3-4-3-why-wont-my-program-save-my-dictionary-key-after-false-input", "title": "Python 3.4.3. why wont my program save my dictionary key after false input?", "body": "<p>Here's my code:</p>\n\n<pre><code>def add_goose_group():\n    goose_group_name = input('Insert the name of the raft ')\n    goose_group_name = str(goose_group_name)\n    if goose_group_name.isdigit() == False and (' ' in goose_group_name) == False:\n        return goose_group_name\n    else:\n        add_goose_group()\n</code></pre>\n\n<p>First if criterion checks if the input has only numbers in it, the second one checks if there are any spaces in it. When I try this code, then it checks correctly if the input falls into these criterions or not but in the return part of the code(atleast i think that's where the problem is) gives back nothing. When another function adds goose_group_name to the dictionary's key position, it prints out None.</p>\n\n<p>Why does it not save the input taken from the user and put it into the key position?</p>\n"}, {"tags": ["python", "pandas", "group-by", "data-analysis"], "comments": [{"owner": {"reputation": 5959, "user_id": 3558644, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/QzHDA.jpg?s=128&g=1", "display_name": "Joe T. Boka", "link": "https://stackoverflow.com/users/3558644/joe-t-boka"}, "edited": false, "score": 0, "creation_date": 1451516260, "post_id": 34538172, "comment_id": 56819327, "body": "Can you post the desired output so we can understand your question better?"}], "answers": [{"tags": [], "owner": {"reputation": 619481, "user_id": 2901002, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/hMDvl.jpg?s=128&g=1", "display_name": "jezrael", "link": "https://stackoverflow.com/users/2901002/jezrael"}, "is_accepted": false, "score": 0, "last_activity_date": 1451559599, "last_edit_date": 1451559599, "creation_date": 1451515029, "answer_id": 34538324, "question_id": 34538172, "link": "https://stackoverflow.com/questions/34538172/python-pandas-groupby-multiple-groups-with-binary-class/34538324#34538324", "title": "python pandas groupby multiple groups with binary class", "body": "<p>You can use <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.diff.html\" rel=\"nofollow\"><code>diff</code></a>, <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.astype.html\" rel=\"nofollow\"><code>astype</code></a> and <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.cumsum.html\" rel=\"nofollow\"><code>cumsum</code></a>:</p>\n\n<pre><code>print df\n    id  class\n0    A      0\n1    B      1\n2   B1      1\n3    C      0\n4    D      0\n5    E      1\n6    F      1\n7   F1      1\n8    G      0\n9    H      0\n10   I      1\n11   J      1\n\ndf['count'] = (df['class'].diff(1) != 0).astype('int').cumsum()\nprint df\n\n    id  class  count\n0    A      0      1\n1    B      1      2\n2   B1      1      2\n3    C      0      3\n4    D      0      3\n5    E      1      4\n6    F      1      4\n7   F1      1      4\n8    G      0      5\n9    H      0      5\n10   I      1      6\n11   J      1      6\n\nfor name,  group in df.groupby('count'):\n    print name\n    print group[['id', 'class']]\n</code></pre>\n\n<p>Testing performance:</p>\n\n<p>These timings are going to be very dependent on the size of df as well as the number (and position) of <code>0</code> and <code>1</code>):</p>\n\n<pre><code>import pandas as pd\n\ndf = pd.DataFrame({'id': ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J'], 'class': [0, 1, 1, 0, 0, 1, 1, 1, 0, 0]}, columns=['id', 'class'])\n\n#uncomment for test len(df) = 1000\n#df =  pd.concat([df]*1000).reset_index(drop=True)\n\ndef jez(df):\n    df['count'] = (df['class'].diff(1) != 0).astype('int').cumsum()\n    return df\n\ndef eze(df):\n    group_index = [0]\n    for i in df.index[1:]:\n        if df['class'][i]==df['class'][i-1]:\n            group_index.append(group_index[-1])\n        else:\n            group_index.append(group_index[-1]+1)\n\n    df['group_index'] = group_index        \n    return df\n\ndef sy2(df):\n    df = pd.concat([df, pd.Series(map(lambda x: 1 if abs(x) &gt; 0 else 0, df['class'].diff().fillna(0)), name='groupid').cumsum()], axis=1)\n    return df\n\nprint jez(df)\nprint eze(df)\nprint sy2(df)\n</code></pre>\n\n<p>Test <code>len(df) = 10</code>:</p>\n\n<pre><code>In [28]: %timeit jez(df)\nThe slowest run took 5.08 times longer than the fastest. This could mean that an intermediate result is being cached \n1000 loops, best of 3: 454 \u00b5s per loop\n\nIn [29]: %timeit eze(df)\nThe slowest run took 4.83 times longer than the fastest. This could mean that an intermediate result is being cached \n1000 loops, best of 3: 422 \u00b5s per loop\n\nIn [30]: %timeit sy2(df)\nThe slowest run took 4.57 times longer than the fastest. This could mean that an intermediate result is being cached \n1000 loops, best of 3: 1.46 ms per loop\n</code></pre>\n\n<p>Test <code>len(df) = 10000</code>:</p>\n\n<pre><code>In [32]: %timeit jez(df)\nThe slowest run took 4.78 times longer than the fastest. This could mean that an intermediate result is being cached \n1000 loops, best of 3: 543 \u00b5s per loop\n\nIn [33]: %timeit eze(df)\n1 loops, best of 3: 245 ms per loop\n\nIn [34]: %timeit sy2(df)\nThe slowest run took 4.11 times longer than the fastest. This could mean that an intermediate result is being cached \n100 loops, best of 3: 9.11 ms per loop\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2560, "user_id": 4908900, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/51319a33504095df2a58a2318981b1ac?s=128&d=identicon&r=PG&f=1", "display_name": "Ezer K", "link": "https://stackoverflow.com/users/4908900/ezer-k"}, "is_accepted": false, "score": 0, "last_activity_date": 1451516848, "creation_date": 1451516848, "answer_id": 34538652, "question_id": 34538172, "link": "https://stackoverflow.com/questions/34538172/python-pandas-groupby-multiple-groups-with-binary-class/34538652#34538652", "title": "python pandas groupby multiple groups with binary class", "body": "<p>Iterate through 'class' and start a new group every time the class is not the same as the previous one, for the example:</p>\n\n<p>Crete the DF:</p>\n\n<pre><code>import pandas as pd\ndf = pd.DataFrame()\ndf['id'] = ['a','b','c','d','e','f']\ndf['class'] = [1,1,0,0,1,1]\n</code></pre>\n\n<p>Iterate through 'class' to create the groups index:</p>\n\n<pre><code>group_index = [0]\nfor i in df.index[1:]:\n    if df['class'][i]==df['class'][i-1]:\n        group_index.append(group_index[-1])\n    else:\n        group_index.append(group_index[-1]+1)\n</code></pre>\n\n<p>Add the group_index to the DF:</p>\n\n<pre><code>df['group_index'] = group_index\n</code></pre>\n\n<p>and the output should be:</p>\n\n<pre><code>    id  class   group_index\n  0 a     1        0\n  1 b     1        0\n  2 c     0        1\n  3 d     0        1\n  4 e     1        2\n  5 f     1        2\n</code></pre>\n\n<p>\u200b</p>\n"}, {"tags": [], "owner": {"reputation": 51, "user_id": 5616157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1513c7ecdd174320240efde883771ce?s=128&d=identicon&r=PG&f=1", "display_name": "sy2", "link": "https://stackoverflow.com/users/5616157/sy2"}, "is_accepted": false, "score": 0, "last_activity_date": 1451520021, "last_edit_date": 1451520021, "creation_date": 1451519218, "answer_id": 34539010, "question_id": 34538172, "link": "https://stackoverflow.com/questions/34538172/python-pandas-groupby-multiple-groups-with-binary-class/34539010#34539010", "title": "python pandas groupby multiple groups with binary class", "body": "<p>Here is a one-liner code. :p\nIt utilizes differential information of adjacent rows and cumulative summation to assign group ids for each row.</p>\n\n<pre><code>&gt;&gt;&gt; df = pd.DataFrame({'id': ['A','B','C','D','E','F'],\n                       'class': [1, 1, 0, 0, 1, 1]},\n                       columns=['id', 'class'])\n\n&gt;&gt;&gt; pd.concat([df, pd.Series(map(lambda x: 1 if abs(x) &gt; 0 else 0,\ndf['class'].diff().fillna(0)), name='groupid').cumsum()], axis=1)\n\n  id  class  groupid\n0  A      1        0\n1  B      1        0\n2  C      0        1\n3  D      0        1\n4  E      1        2\n5  F      1        2\n</code></pre>\n\n<p>Now, you can use groupby() to obtain groupy object.</p>\n\n<pre><code>&gt;&gt;&gt; g = pd.concat([df, pd.Series(map(lambda x: 1 if abs(x) &gt; 0 else 0,\ndf['class'].diff().fillna(0)), name='groupid').cumsum()], axis=1).groupby('groupid')\n\n&gt;&gt;&gt; for index, group_df in g:\n        print(group_df)\n\n  id  class  groupid\n0  A      1        0\n1  B      1        0\n  id  class  groupid\n2  C      0        1\n3  D      0        1\n  id  class  groupid\n4  E      1        2\n5  F      1        2\n</code></pre>\n\n<p>The complete code is attached.</p>\n\n<pre><code>import pandas as pd\n\ndef groupby_binaryflag(df, key='class'):\n    return pd.concat([df,\n                      pd.Series(map(lambda x: 1\n                                    if abs(x) &gt; 0\n                                    else 0, df['class'].diff().fillna(0)),\n                                name='groupid').cumsum()], axis=1).groupby('groupid')\n\nif __name__ == '__main__':\n    df1 = pd.DataFrame({'id': ['A','B','C','D','E','F'],\n                        'class': [1, 1, 0, 0, 1, 1]}, columns=['id', 'class'])\n\n    df2 = pd.DataFrame({'id': ['A','B','C','D','E','F', 'G', 'H', 'I', 'J', 'K', 'L'],\n                        'class': [1, 1, 0, 0, 1, 1, 0, 0, 0, 1, 1, 1]}, columns=['id', 'class'])\n\n    for df in [df1, df2]:\n        for index, group_df in groupby_binaryflag(df):\n            print(group_df)\n        print(\"=====\\n\")\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>  id  class  groupid\n0  A      1        0\n1  B      1        0\n  id  class  groupid\n2  C      0        1\n3  D      0        1\n  id  class  groupid\n4  E      1        2\n5  F      1        2\n=====\n\n  id  class  groupid\n0  A      1        0\n1  B      1        0\n  id  class  groupid\n2  C      0        1\n3  D      0        1\n  id  class  groupid\n4  E      1        2\n5  F      1        2\n  id  class  groupid\n6  G      0        3\n7  H      0        3\n8  I      0        3\n   id  class  groupid\n9   J      1        4\n10  K      1        4\n11  L      1        4\n=====\n</code></pre>\n"}], "owner": {"reputation": 351, "user_id": 1764531, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/d2022562526f885c68d2f2cf9a242820?s=128&d=identicon&r=PG", "display_name": "Mark5907", "link": "https://stackoverflow.com/users/1764531/mark5907"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 961, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1451559599, "creation_date": 1451514130, "question_id": 34538172, "link": "https://stackoverflow.com/questions/34538172/python-pandas-groupby-multiple-groups-with-binary-class", "title": "python pandas groupby multiple groups with binary class", "body": "<p>I have a DataFrame as following:</p>\n\n<pre><code>id class\nA   1\nB   1\nC   0 \nD   0\nE   1\nF   1\n</code></pre>\n\n<p>I want to group it into 3 groups, G1:A,B, G2:C,D, G3:E,F.\nIs there a way to do so with looping over all the rows to assign a new class for each id? </p>\n"}, {"tags": ["jquery", "python", "ajax", "flask"], "answers": [{"comments": [{"owner": {"reputation": 737, "user_id": 788619, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/527cedffa678d4e7caa57b21eb198691?s=128&d=identicon&r=PG", "display_name": "wbg", "link": "https://stackoverflow.com/users/788619/wbg"}, "edited": false, "score": 0, "creation_date": 1451517044, "post_id": 34538539, "comment_id": 56819577, "body": "I tried making the timeout longer with ajax but it didn&#39;t seem to affect how the server reacted."}, {"owner": {"reputation": 150, "user_id": 3830135, "user_type": "registered", "profile_image": "https://graph.facebook.com/10205589491034750/picture?type=large", "display_name": "Totodile", "link": "https://stackoverflow.com/users/3830135/totodile"}, "reply_to_user": {"reputation": 737, "user_id": 788619, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/527cedffa678d4e7caa57b21eb198691?s=128&d=identicon&r=PG", "display_name": "wbg", "link": "https://stackoverflow.com/users/788619/wbg"}, "edited": false, "score": 0, "creation_date": 1451517286, "post_id": 34538539, "comment_id": 56819666, "body": "10 minutes for an ajax call i think is too much, can you split the process into 10 ajax calls?"}, {"owner": {"reputation": 737, "user_id": 788619, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/527cedffa678d4e7caa57b21eb198691?s=128&d=identicon&r=PG", "display_name": "wbg", "link": "https://stackoverflow.com/users/788619/wbg"}, "edited": false, "score": 0, "creation_date": 1451517371, "post_id": 34538539, "comment_id": 56819703, "body": "I might...I&#39;ll try that while keeping the celery idea on my reading list."}, {"owner": {"reputation": 150, "user_id": 3830135, "user_type": "registered", "profile_image": "https://graph.facebook.com/10205589491034750/picture?type=large", "display_name": "Totodile", "link": "https://stackoverflow.com/users/3830135/totodile"}, "reply_to_user": {"reputation": 737, "user_id": 788619, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/527cedffa678d4e7caa57b21eb198691?s=128&d=identicon&r=PG", "display_name": "wbg", "link": "https://stackoverflow.com/users/788619/wbg"}, "edited": false, "score": 1, "creation_date": 1451517459, "post_id": 34538539, "comment_id": 56819732, "body": "<a href=\"http://stackoverflow.com/questions/14775544/long-running-jquery-ajax-call\">link</a>"}], "tags": [], "owner": {"reputation": 150, "user_id": 3830135, "user_type": "registered", "profile_image": "https://graph.facebook.com/10205589491034750/picture?type=large", "display_name": "Totodile", "link": "https://stackoverflow.com/users/3830135/totodile"}, "is_accepted": false, "score": 0, "last_activity_date": 1451516235, "last_edit_date": 1495540745, "creation_date": 1451516235, "answer_id": 34538539, "question_id": 34538105, "link": "https://stackoverflow.com/questions/34538105/overcome-502-error-for-web-app-with-long-running-function/34538539#34538539", "title": "Overcome 502 Error for Web App with Long Running Function", "body": "<p><a href=\"https://stackoverflow.com/questions/5011632/502-http-status-code\">502 HTTP Status Code</a> \nif you increase the timeout of the request, or in other way use pagination </p>\n"}, {"comments": [{"owner": {"reputation": 737, "user_id": 788619, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/527cedffa678d4e7caa57b21eb198691?s=128&d=identicon&r=PG", "display_name": "wbg", "link": "https://stackoverflow.com/users/788619/wbg"}, "edited": false, "score": 0, "creation_date": 1451516511, "post_id": 34538540, "comment_id": 56819406, "body": "I think this is the robust solution. This app runs on openshift, I think this will work. Will read about Celery."}, {"owner": {"reputation": 1913, "user_id": 3509554, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2ed608a1c5a6b018efc70e255ed888d0?s=128&d=identicon&r=PG&f=1", "display_name": "cdvv7788", "link": "https://stackoverflow.com/users/3509554/cdvv7788"}, "edited": false, "score": 0, "creation_date": 1451516639, "post_id": 34538540, "comment_id": 56819455, "body": "Yeah, celery is the way to go."}, {"owner": {"reputation": 737, "user_id": 788619, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/527cedffa678d4e7caa57b21eb198691?s=128&d=identicon&r=PG", "display_name": "wbg", "link": "https://stackoverflow.com/users/788619/wbg"}, "edited": false, "score": 0, "creation_date": 1451517099, "post_id": 34538540, "comment_id": 56819597, "body": "However, after some initial reading, it&#39;s a bit complex...Is there no other way?"}, {"owner": {"reputation": 1227, "user_id": 2188525, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/cd648d16f8259a29abb815344bcea5e5?s=128&d=identicon&r=PG", "display_name": "bwarren2", "link": "https://stackoverflow.com/users/2188525/bwarren2"}, "edited": false, "score": 1, "creation_date": 1451517440, "post_id": 34538540, "comment_id": 56819725, "body": "AFAIK it is the best way.    Celery is powerful and it shows up as complexity in the docs, but you should only need the rudiments: two functions decorated with the @task annotation, one to do the work and one to store it somewhere the client can get it.  Call the first with the second chained on in our respond() function above, have a celery worker process and rabbitmq running, and everything should be good.  You&#39;re venturing into async world, which is hard, but good to understand.  See also <a href=\"https://blogs.vmware.com/vfabric/2013/04/how-instagram-feeds-work-celery-and-rabbitmq.html\" rel=\"nofollow noreferrer\">this</a>"}], "tags": [], "owner": {"reputation": 1227, "user_id": 2188525, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/cd648d16f8259a29abb815344bcea5e5?s=128&d=identicon&r=PG", "display_name": "bwarren2", "link": "https://stackoverflow.com/users/2188525/bwarren2"}, "is_accepted": true, "score": 2, "last_activity_date": 1451516236, "creation_date": 1451516236, "answer_id": 34538540, "question_id": 34538105, "link": "https://stackoverflow.com/questions/34538105/overcome-502-error-for-web-app-with-long-running-function/34538540#34538540", "title": "Overcome 502 Error for Web App with Long Running Function", "body": "<p>There is.  You probably want to use an async task queue like <a href=\"http://docs.celeryproject.org/en/latest/userguide/tasks.html\" rel=\"nofollow\">Celery</a>.</p>\n\n<p>Imagine this is the function that returns a response to the user: </p>\n\n<pre><code>def respond():\n\n    data = long_running_work()  # Blocks the return on long waits\n    return Response(data)\n    data = long_running_work()  # Doesn't get executed.\n</code></pre>\n\n<p>There is no place for you to put the long-running work in the request/response cycle if it will take longer than the timeout the client expects.  On the other hand:</p>\n\n<pre><code>def respond():\n\n    # Shoves a message into rabbitmq \n    # to be dealt with by someone else\n    send_task()  # takes no time, no blocking  \n\n    return Response('Please wait')\n</code></pre>\n\n<p><code>send_task</code> is responsible for setting up a background process to do the work and make it available somewhere (on s3, on your server, wherever).  In the client-side js you could display a spinner and 'waiting...' message while polling the expected place in the background, and display when it is ready.  This way, nothing times out or gets corrupted.</p>\n\n<p>For a longer (and better) explanation, consider <a href=\"https://devcenter.heroku.com/articles/background-jobs-queueing\" rel=\"nofollow\">this</a>.</p>\n"}], "owner": {"reputation": 737, "user_id": 788619, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/527cedffa678d4e7caa57b21eb198691?s=128&d=identicon&r=PG", "display_name": "wbg", "link": "https://stackoverflow.com/users/788619/wbg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1122, "favorite_count": 0, "closed_date": 1451587090, "accepted_answer_id": 34538540, "answer_count": 2, "score": 0, "last_activity_date": 1451516236, "creation_date": 1451513755, "last_edit_date": 1451516217, "question_id": 34538105, "link": "https://stackoverflow.com/questions/34538105/overcome-502-error-for-web-app-with-long-running-function", "closed_reason": "Duplicate", "title": "Overcome 502 Error for Web App with Long Running Function", "body": "<p>I have a web app that runs on flask and a small amount of JQuery.</p>\n\n<p>The app uses an API to gather data and returns a graph to users. For smallish requests, everything works. However, I'd like to enable a user to ask for a large collection of data. When the user asks for say 100 data points, the program needs to run for as along as 10 minutes.</p>\n\n<p>Before the program is finished, a 502 error is thrown. </p>\n\n<p>Additional details:\nI've setup logging and can see the program continuing to run and collect data after the 502. I'm also using ajax to call the offending long running flask function with an alert to trigger on 502, which is how I know the error code.</p>\n\n<p>Question:\nIs there a solution to this problem ? </p>\n\n<p>TIA</p>\n"}, {"tags": ["python", "xlwings"], "comments": [{"owner": {"reputation": 5157, "user_id": 918626, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d8c377a6e6f8a5a6910bb62f51c6f853?s=128&d=identicon&r=PG", "display_name": "Felix Zumstein", "link": "https://stackoverflow.com/users/918626/felix-zumstein"}, "edited": false, "score": 0, "creation_date": 1451939168, "post_id": 34537967, "comment_id": 56944025, "body": "Are you on Windows or Mac?"}], "answers": [{"tags": [], "owner": {"reputation": 5157, "user_id": 918626, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d8c377a6e6f8a5a6910bb62f51c6f853?s=128&d=identicon&r=PG", "display_name": "Felix Zumstein", "link": "https://stackoverflow.com/users/918626/felix-zumstein"}, "is_accepted": false, "score": 0, "last_activity_date": 1451939005, "creation_date": 1451939005, "answer_id": 34599207, "question_id": 34537967, "link": "https://stackoverflow.com/questions/34537967/xlwings-doesnt-get-selection-when-run-from-vba/34599207#34599207", "title": "xlwings doesn&#39;t `get_selection` when run from VBA", "body": "<p>I only get your error when I don't select any cell. So yes, you're probably right that for some reason it doesn't get the selection. How are you calling <code>RunPython</code>? with a button?</p>\n\n<p>However, you're not properly concatenating <code>modTable</code>: instead of a list of numpy arrays (something like <code>[array([ 2.,  8.,  8.]), array([ 3.,  6.,  6.])]</code>), you should be constructing a single array: <code>array([[ 2.,  8.,  8.],[3.,  6.,  6.]])</code> (xlwings with Python3 will even complain if you try to bring over a list of arrays.)</p>\n\n<p>As for debugging: There are two possibilities I can think of (and both wait for better documentation):</p>\n\n<ol>\n<li><p>add some logging statements (see <a href=\"https://docs.python.org/2/library/logging.html\" rel=\"nofollow\">here</a>)</p></li>\n<li><p>use remote debugging from either PyCharm, PyDev (Eclipse) or Visual Studio, some infos can be found <a href=\"https://github.com/ZoomerAnalytics/xlwings/issues/146\" rel=\"nofollow\">here</a></p></li>\n</ol>\n"}], "owner": {"reputation": 2022, "user_id": 793154, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/26ozk.jpg?s=128&g=1", "display_name": "Diego-MX", "link": "https://stackoverflow.com/users/793154/diego-mx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 129, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1451939005, "creation_date": 1451513174, "last_edit_date": 1451568703, "question_id": 34537967, "link": "https://stackoverflow.com/questions/34537967/xlwings-doesnt-get-selection-when-run-from-vba", "title": "xlwings doesn&#39;t `get_selection` when run from VBA", "body": "<p>I write this with some uncertainty about it being the exact problem.  I tried debugging the issue with Spyder, to be more certain with no avail.  </p>\n\n<p>The issue is that my script runs well from the interpreter within Spyder when using the <code>Workbook.set_mock_caller(path)</code> option, but it doesn't run well from within VBA.  </p>\n\n<p>I suspect that <code>get_selection()</code> is getting an empty selection, but then I cannot tell for sure because I can't stop the code in the middle.  </p>\n\n<p>In any case, my script is my first try to use the package, so it won't be very complicated for anyone who's used it before.  What the function does is to consolidate an Excel selection table by its first column, and add the rest of the columns together.  </p>\n\n<pre><code>def xl_consolidate():\n    thisWB    = xl.Workbook.caller()\n    thisSlctn = thisWB.get_selection(asarray=True, atleast_2d=True)\n\n    thisTable = thisSlctn.value\n    (m,n) = thisSlctn.shape\n    r = thisSlctn.row\n    c = thisSlctn.column\n\n    tableDict = dict()\n    tableVals = thisTable[:, 1:].astype(np.float)\n    for i in range(m):\n        thisKey = thisTable[i, 0]\n        if thisKey not in tableDict:\n            tableDict[thisKey] = tableVals[i, :]\n        else:\n            tableDict[thisKey] += tableVals[i, :]\n\n    modTable = sorted(tableDict.keys(), key = lambda k:(-tableDict[k][0], k))\n    modTable = [np.hstack((key, tableDict[key])) for key in modTable]\n\n    thisSlctn.clear()\n    xl.Range((r, c)).value = modTable\n</code></pre>\n\n<p>The error happens in the <code>sorted</code> function, it says the following:</p>\n\n<pre><code>Error\nmodTable = sorted(tableDict.keys(), key = lambda k:(-tableDict[k][0], k))\nIndexError: index 0 is out of bounds for axis 0 with size 0\n</code></pre>\n\n<p>I did make a selection, when calling the function from VBA.  </p>\n\n<p>As an additional question, I would like to know if it is possible to debug the code when run from VBA.  This would help me tackle it.  </p>\n\n<p>Thank you for your help </p>\n"}, {"tags": ["python", "django", "django-admin"], "comments": [{"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 3, "creation_date": 1451513950, "post_id": 34537922, "comment_id": 56818444, "body": "Why on Earth are you posting all these screenshots of code? Why have you done this? Code is <i>text</i>, post it as such."}, {"owner": {"reputation": 2095, "user_id": 2773461, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/PJykN.jpg?s=128&g=1", "display_name": "bgarcial", "link": "https://stackoverflow.com/users/2773461/bgarcial"}, "reply_to_user": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1451515530, "post_id": 34537922, "comment_id": 56819083, "body": "Ok @DanielRoseman you have the reason. I did change the models classes image for their respective code, editing my question. With respect to the another images related with the debug process ... can I leave as images due to in them I want reference things about of my debug process. It&#39;s Ok?"}, {"owner": {"reputation": 2095, "user_id": 2773461, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/PJykN.jpg?s=128&g=1", "display_name": "bgarcial", "link": "https://stackoverflow.com/users/2773461/bgarcial"}, "reply_to_user": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1451700255, "post_id": 34537922, "comment_id": 56867462, "body": "I think that the easiest and better way will be to override the save method on my User model. I&#39;ll try <a href=\"https://docs.djangoproject.com/en/1.9/topics/db/models/#overriding-model-methods\" rel=\"nofollow noreferrer\">docs.djangoproject.com/en/1.9/topics/db/models/&hellip;</a>"}, {"owner": {"reputation": 2095, "user_id": 2773461, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/PJykN.jpg?s=128&g=1", "display_name": "bgarcial", "link": "https://stackoverflow.com/users/2773461/bgarcial"}, "reply_to_user": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1451758714, "post_id": 34537922, "comment_id": 56882541, "body": "I am try overriding the save method, but I get a problem which I am shown edited in my question above ..."}], "answers": [{"tags": [], "owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "is_accepted": true, "score": 2, "last_activity_date": 1451759726, "creation_date": 1451759726, "answer_id": 34569324, "question_id": 34537922, "link": "https://stackoverflow.com/questions/34537922/override-the-save-method/34569324#34569324", "title": "Override the save() method", "body": "<p>You need to do something in your save method if the user is not medical; you still need to actually save the object.</p>\n\n<p>A fixed implementation would be:</p>\n\n<pre><code>def save(self, *args, **kwargs):\n    user = super(User, self).save(self, *args, **kwargs)\n    if self.is_medical:\n        MedicalProfile(user=self).save()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2095, "user_id": 2773461, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/PJykN.jpg?s=128&g=1", "display_name": "bgarcial", "link": "https://stackoverflow.com/users/2773461/bgarcial"}, "is_accepted": false, "score": 0, "last_activity_date": 1517330161, "last_edit_date": 1517330161, "creation_date": 1452059668, "answer_id": 34626524, "question_id": 34537922, "link": "https://stackoverflow.com/questions/34537922/override-the-save-method/34626524#34626524", "title": "Override the save() method", "body": "<p>My <code>class User</code> located in <code>userprofile/models.py</code> is overriding the save method, stayed so:</p>\n\n<pre><code>class User(AbstractUser):\n    is_medical = models.BooleanField(default=False)\n    is_physiotherapist = models.BooleanField(default=False)\n    is_patient = models.BooleanField(default=False)\n    slug = models.SlugField(max_length=100, blank=True)\n    photo = models.ImageField(upload_to='avatars', null = True, blank = True)\n\n    def save(self, *args, **kwargs):\n        user = super(User, self).save( *args, **kwargs)\n\n        # Creating and user with medical, patient and physiotherapist profiles\n        if self.is_medical and not MedicalProfile.objects.filter(user=self).exists()\\\n                and self.is_patient and not PatientProfile.objects.filter(user=self).exists()\\\n                and self.is_physiotherapist and not PhysiotherapistProfile.objects.filter(user=self).exists():\n\n            medical_profile=MedicalProfile(user=self).save()\n            patient_profile=PatientProfile(user=self).save()\n            physiotherapist_profile=PhysiotherapistProfile(user=self).save()\n            #profile.save()\n\n        # Creating and user with medical and patient profiles\n        elif self.is_medical and not MedicalProfile.objects.filter(user=self).exists()\\\n            and self.is_patient and not PatientProfile.objects.filter(user=self).exists():\n\n            medical_profile=MedicalProfile(user=self).save()\n            patient_profile=PatientProfile(user=self).save()\n\n        # Creating and user with medical and physiotherapist profiles\n        elif self.is_medical and not MedicalProfile.objects.filter(user=self).exists()\\\n            and self.is_physiotherapist and not PhysiotherapistProfile.objects.filter(user=self).exists():\n\n            medical_profile=MedicalProfile(user=self).save()\n            physiotherapist_profile=PhysiotherapistProfile(user=self).save()\n\n        # Creating and user with physiotherapist and patient profiles\n        elif self.is_physiotherapist and not PhysiotherapistProfile.objects.filter(user=self).exists()\\\n            and self.is_patient and not PatientProfile.objects.filter(user=self).exists():\n\n            physiotherapist_profile = PhysiotherapistProfile(user=self).save()\n            patient_profile = PatientProfile(user=self).save()\n\n        # Creating and user with medical profile\n        elif self.is_medical and not MedicalProfile.objects.filter(user=self).exists():\n            profile = MedicalProfile(user=self)\n            profile.save()\n\n        # Creating and user with patient profile\n        elif self.is_patient and not PatientProfile.objects.filter(user=self).exists():\n            profile = PatientProfile(user=self)\n            profile.save()\n\n        # Creating and user with physiotherapist profiles\n        elif self.is_physiotherapist and not PhysiotherapistProfile.objects.filter(user=self).exists():\n            profile = PhysiotherapistProfile(user=self)\n            profile.save()\n\n\n\n    # We get the profiles user according with their type\n    def get_medical_profile(self):\n        medical_profile = None\n        if hasattr(self, 'medicalprofile'):\n            medical_profile=self.medicalprofile\n        return medical_profile\n\n    def get_patient_profile(self):\n        patient_profile = None\n        if hasattr(self, 'patientprofile'):\n            patient_profile = self.patientprofile\n        return patient_profile\n\n    def get_physiotherapist_profile(self):\n        physiotherapist_profile = None\n        if hasattr(self, 'physiotherapistprofile'):\n            physiotherapist_profile = self.physiotherapistprofile\n        return physiotherapist_profile\n\n    # We redefine the attributes (create db_table attribute) in class Meta to say to Django\n    # that users will save in the same table that the Django default user model\n    # https://github.com/django/django/blob/master/django/contrib/auth/models.py#L343\n    class Meta:\n\n        db_table = 'auth_user'\n\nclass MedicalProfile(models.Model):\n    user = models.OneToOneField(settings.AUTH_USER_MODEL, on_delete=models.CASCADE)\n    #active = models.BooleanField(default=True)\n    name = models.CharField(max_length=64)\n\n\nclass PatientProfile(models.Model):\n    user = models.OneToOneField(settings.AUTH_USER_MODEL, on_delete=models.CASCADE)\n    #active = models.BooleanField(default=True)\n    name = models.CharField(max_length=64)\n\n\nclass PhysiotherapistProfile(models.Model):\n    user = models.OneToOneField(settings.AUTH_USER_MODEL, on_delete=models.CASCADE)\n    #active = models.BooleanField(default=True)\n    name = models.CharField(max_length=64)\n\n# Enter the username as slug field\n@receiver(post_save, sender = settings.AUTH_USER_MODEL)\ndef post_save_user(sender, instance, **kwargs):\n    slug = slugify(instance.username)\n    User.objects.filter(pk=instance.pk).update(slug=slug)\n</code></pre>\n\n<p>the save() method let me save the users with all possible combinations of profiles.</p>\n\n<p>But, is there a better way to do this?</p>\n"}], "owner": {"reputation": 2095, "user_id": 2773461, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/PJykN.jpg?s=128&g=1", "display_name": "bgarcial", "link": "https://stackoverflow.com/users/2773461/bgarcial"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1695, "favorite_count": 3, "accepted_answer_id": 34569324, "answer_count": 2, "score": 2, "last_activity_date": 1517330161, "creation_date": 1451512969, "last_edit_date": 1451758551, "question_id": 34537922, "link": "https://stackoverflow.com/questions/34537922/override-the-save-method", "title": "Override the save() method", "body": "<p>I have a custom users schema in Django for work with roles or users type, creating an application named userprofile which will be or will setup my custom user model.</p>\n\n<p>In my settings.py I have the following configuration:</p>\n\n<pre><code>INSTALLED_APPS = [\n        ...\n    'userprofile',\n]\n#Custom model Users\nAUTH_USER_MODEL = 'userprofile.User'\n</code></pre>\n\n<p>I customize my User class (userprofile/models.py) that inherit of the AbstractUser class for add some fields to my User model due to my requirements demanded me.</p>\n\n<p>I also create these another models for roles/profile users (<code>MedicalProfile, PatientProfile, PhysiotherapistProfile</code>) with their own fields or attributes</p>\n\n<p>In addition <code>MedicalProfile, PatientProfile, PhysiotherapistProfile</code> have a OneToOneField relationship with my custom model/class <code>User</code> so:</p>\n\n<pre><code>from __future__ import unicode_literals\nfrom django.conf import settings\nfrom django.contrib.auth.models import AbstractUser\nfrom django.db import models\nfrom django.dispatch import receiver\nfrom django.db.models.signals import post_save\n\nclass User(AbstractUser):\n    is_medical = models.BooleanField(default=False)\n    is_physiotherapist = models.BooleanField(default=False)\n    is_patient = models.BooleanField(default=False)\n    slug = models.SlugField(max_length=100, blank=True)\n    photo = models.ImageField(upload_to='avatars', null = True, blank = True)\n\n    # Overriding the save method\n    def save(self, *args, **kwargs):\n    if self.is_medical:\n        profile = MedicalProfile(user=self)\n        super(User, self).save(self, *args, **kwargs)\n        profile.save()\n\n\n    # We get the profiles user according with their type\n    def get_medical_profile(self):\n        medical_profile = None\n        if hasattr(self, 'medicalprofile'):\n            medical_profile=self.medicalprofile\n        return medical_profile\n\n    def get_patient_profile(self):\n        patient_profile = None\n        if hasattr(self, 'patientprofile'):\n            patient_profile = self.patientprofile\n        return patient_profile\n\n    def get_physiotherapist_profile(self):\n        physiotherapist_profile = None\n        if hasattr(self, 'physiotherapistprofile'):\n            physiotherapist_profile = self.physiotherapistprofile\n        return physiotherapist_profile\n\n    class Meta:\n\n        db_table = 'auth_user'\n\nclass MedicalProfile(models.Model):\n    user = models.OneToOneField(settings.AUTH_USER_MODEL, on_delete=models.CASCADE)\n    #active = models.BooleanField(default=True)\n    name = models.CharField(max_length=64)\n\n\nclass PatientProfile(models.Model):\n    user = models.OneToOneField(settings.AUTH_USER_MODEL, on_delete=models.CASCADE)\n    #active = models.BooleanField(default=True)\n    name = models.CharField(max_length=64)\n\n\nclass PhysiotherapistProfile(models.Model):\n    user = models.OneToOneField(settings.AUTH_USER_MODEL, on_delete=models.CASCADE)\n    #active = models.BooleanField(default=True)\n    name = models.CharField(max_length=64)\n</code></pre>\n\n<p><strong>My Question</strong></p>\n\n<p>I want to focus my question in relation to the override process <code>save()</code> method:</p>\n\n<pre><code>def save(self, *args, **kwargs):\n    if self.is_medical:\n        profile = MedicalProfile(user=self)\n        super(User, self).save(self, *args, **kwargs)\n        profile.save()\n</code></pre>\n\n<p>I want, each that an user is created, automatically be created their profile (MedicalProfile, PatientProfile, PhysiotherapistProfile) according to if their field checked (is_medical, is_patient, is_physiotherapist)</p>\n\n<p>The inconvenient that I have is with my override process is the following:</p>\n\n<ul>\n<li>When I create an user via django admin, I get this error</li>\n</ul>\n\n<p><a href=\"https://i.stack.imgur.com/uTn3u.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uTn3u.png\" alt=\"enter image description here\"></a></p>\n\n<p>I don't know about it, in relation of the reason by which is setup the user PK to None ...</p>\n\n<p>What alternatives can I have for solve this situation and when I create an user, their profile instance be saved (MedicalProfile, PhysiotherapistProfile, PatientProfile) depending of the attribute checkbo/field (is_medical, is_physiotherapist , is_patient) that I choose?</p>\n\n<p>I bring to all my apologies before, in case of the my question do not be suited or appropriated with the stackoverflow philosophy or by the extense of my question.</p>\n\n<p>The reason that it's extense is that I want give all details for get an answer</p>\n\n<p>Any orientation I will be grateful and will be appreciated</p>\n"}, {"tags": ["python", "authentication", "executable", "pyodbc"], "answers": [{"tags": [], "owner": {"reputation": 152, "user_id": 4851420, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153205778552741/picture?type=large", "display_name": "Thomas Lester", "link": "https://stackoverflow.com/users/4851420/thomas-lester"}, "is_accepted": false, "score": 1, "last_activity_date": 1451511668, "creation_date": 1451511668, "answer_id": 34537674, "question_id": 34537506, "link": "https://stackoverflow.com/questions/34537506/if-i-turn-this-python-script-into-an-executable-will-others-be-able-to-execute/34537674#34537674", "title": "If I turn this Python script into an executable, will others be able to execute it?", "body": "<p>If your script is doing the authentication to the DB and that is coded into the script, then if the other have execute permission, they will be able to run it as designed.</p>\n\n<p>Is the script running on a Unix/Linux host or a windows host?   Either way, you either need world executable OR group executable and have the users that need to run the script in the group.</p>\n\n<p>On a unix/linux host, you can set the sticky bit, which would make it execute as the owner of the script even if a non-owner ran the script.</p>\n"}, {"comments": [{"owner": {"reputation": 381, "user_id": 4739392, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ffa78ed3f498cec281dbe569e34dcb14?s=128&d=identicon&r=PG&f=1", "display_name": "codycrossley", "link": "https://stackoverflow.com/users/4739392/codycrossley"}, "edited": false, "score": 0, "creation_date": 1451604959, "post_id": 34538122, "comment_id": 56847461, "body": "Fantastic, just what I was hoping for in an answer. Thank you. This should work!"}], "tags": [], "owner": {"reputation": 11187, "user_id": 1394697, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/658ae7ed330d8fc70df1c173960d27ad?s=128&d=identicon&r=PG", "display_name": "FlipperPA", "link": "https://stackoverflow.com/users/1394697/flipperpa"}, "is_accepted": true, "score": 2, "last_activity_date": 1451513869, "creation_date": 1451513869, "answer_id": 34538122, "question_id": 34537506, "link": "https://stackoverflow.com/questions/34537506/if-i-turn-this-python-script-into-an-executable-will-others-be-able-to-execute/34538122#34538122", "title": "If I turn this Python script into an executable, will others be able to execute it?", "body": "<p>If possible, you're going to want to create a dedicated user for this task. Do not include your credentials, even if compiled: your username / password can be extracted fairly trivially.</p>\n\n<p>I'd recommend creating a user on SQL Server, with no access. Then GRANT that user SELECT privileges, only on the tables you need them to access:</p>\n\n<pre><code>GRANT SELECT ON table_name TO my_user\n</code></pre>\n\n<p>Then you can hard code the my_user / my_password into the script with a much smaller security risk. Good luck!</p>\n"}], "owner": {"reputation": 381, "user_id": 4739392, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ffa78ed3f498cec281dbe569e34dcb14?s=128&d=identicon&r=PG&f=1", "display_name": "codycrossley", "link": "https://stackoverflow.com/users/4739392/codycrossley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 34538122, "answer_count": 2, "score": -2, "last_activity_date": 1451513869, "creation_date": 1451510879, "question_id": 34537506, "link": "https://stackoverflow.com/questions/34537506/if-i-turn-this-python-script-into-an-executable-will-others-be-able-to-execute", "title": "If I turn this Python script into an executable, will others be able to execute it?", "body": "<p>I have a Python script that uses the pyodbc package to connect to a SQL Server database and runs some queries, saves it to an Excel spreadsheet and formats it for other coworkers to use.</p>\n\n<p>It connects to the database/server using windows authentication, and not all employees have access to the database. If I turned my script into an executable, will it fail because the others who might try to execute it don't have access to the DB? If so, is there a way to link the application to MY windows authentication without hard-coding my username and password into it?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "flask", "sendgrid"], "answers": [{"tags": [], "owner": {"reputation": 2335, "user_id": 2085107, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b817ba33a0b19657d45c0713637a138d?s=128&d=identicon&r=PG", "display_name": "gberger", "link": "https://stackoverflow.com/users/2085107/gberger"}, "is_accepted": true, "score": 2, "last_activity_date": 1451512772, "last_edit_date": 1451512772, "creation_date": 1451512000, "answer_id": 34537737, "question_id": 34537500, "link": "https://stackoverflow.com/questions/34537500/sendgrid-inbound-webhook-data-entirely-blank-in-flask-but-works-with-a-request-s/34537737#34537737", "title": "Sendgrid inbound webhook data entirely blank in Flask but works with a request sent from requests?", "body": "<p>According to the <a href=\"https://sendgrid.com/docs/API_Reference/Webhooks/parse.html\" rel=\"nofollow\">docs</a>:</p>\n\n<blockquote>\n  <p>The request that will be sent to the HTTP endpoint will be encoded as multipart/form-data.</p>\n</blockquote>\n\n<p>You need to use the <code>request.form</code> dict to access form-data in Flask.</p>\n\n<p>A tutorial is available on Sendgrid's blog: <a href=\"https://sendgrid.com/blog/collect-inbound-email-using-python-and-flask/\" rel=\"nofollow\">https://sendgrid.com/blog/collect-inbound-email-using-python-and-flask/</a></p>\n\n<p>Additionally, when you make that change, you should remove <code>headers={\"Content-Type\":\"application/json\"}</code> from your <code>requests.post</code> call, so that you send it as form-data too.</p>\n"}, {"tags": [], "owner": {"reputation": 150, "user_id": 8291021, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b228bd5df17069acd861fcbc48ae6a75?s=128&d=identicon&r=PG&f=1", "display_name": "user8291021", "link": "https://stackoverflow.com/users/8291021/user8291021"}, "is_accepted": false, "score": 0, "last_activity_date": 1580273286, "last_edit_date": 1580273286, "creation_date": 1580268819, "answer_id": 59960160, "question_id": 34537500, "link": "https://stackoverflow.com/questions/34537500/sendgrid-inbound-webhook-data-entirely-blank-in-flask-but-works-with-a-request-s/59960160#59960160", "title": "Sendgrid inbound webhook data entirely blank in Flask but works with a request sent from requests?", "body": "<p>Had the same problem but requested a form which I converted to a dict. The webhook now works like a charm. I also recommend you use ngrok to test the endpoint as sendgrid requires you to expose the url. </p>\n\n<pre><code>data = request.form.to_dict(flat=False)\n</code></pre>\n"}], "owner": {"reputation": 278, "user_id": 4726737, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-ffHJaHt-cDY/AAAAAAAAAAI/AAAAAAAAAD4/_hyYvM57qkA/photo.jpg?sz=128", "display_name": "Derek Fulton", "link": "https://stackoverflow.com/users/4726737/derek-fulton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 439, "favorite_count": 1, "accepted_answer_id": 34537737, "answer_count": 2, "score": 2, "last_activity_date": 1580273286, "creation_date": 1451510858, "last_edit_date": 1451512416, "question_id": 34537500, "link": "https://stackoverflow.com/questions/34537500/sendgrid-inbound-webhook-data-entirely-blank-in-flask-but-works-with-a-request-s", "title": "Sendgrid inbound webhook data entirely blank in Flask but works with a request sent from requests?", "body": "<p>I have a heroku flask app up right now. When it receives a POST request, it uses the sendgrid API to send an email to my personal email containing the POST data. Relevant code (driver.sendgridemail is the example code for python written with <a href=\"https://github.com/sendgrid/sendgrid-python\" rel=\"nofollow\">https://github.com/sendgrid/sendgrid-python</a>) with a string passed as an argument:</p>\n\n<pre><code>@app.route('/', methods=['GET', 'POST'])\ndef index():\nif request.method == \"POST\":\n    data = request.data.decode('utf-8')\n    driver.sendgridemail(\"Data is here: %s\" % (data)) \n    return data\nelse:\n    return render_template(\"index.html\")\n</code></pre>\n\n<p>When I POST using requests.post:</p>\n\n<pre><code>requests.post(\"my_heroku_url\", data=json.dumps({\"some\":\"data\"}), headers={\"Content-Type\":\"application/json\"})\n</code></pre>\n\n<p>I get an email to my personal email containing \"Data is here: {\"some\":\"data\"}\"</p>\n\n<p>However, when I use the sendgrid inbound parse feature, the only email forwarded to my personal email is  \"Data is here:\" which is obviously not ideal.</p>\n\n<p>Does it have to do with content-type? Why isn't it processing the data from incoming email messages? It's obviously getting the email because it's capable of being forwarded to my personal email per flask app, it just doesn't retrieve the data. In other words, the POST request goes through but it's unable to retrieve any data and gives me a blank binary string. Finally, isn't it a little weird that is still thinks it's b\" ? Does that mean it never gets decoded to a string with the sendgrid parse, but it does with a python requests post? </p>\n"}, {"tags": ["python", "sockets", "python-3.x"], "comments": [{"owner": {"reputation": 1868, "user_id": 2006429, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/glOHj.jpg?s=128&g=1", "display_name": "rgajrawala", "link": "https://stackoverflow.com/users/2006429/rgajrawala"}, "edited": false, "score": 0, "creation_date": 1451514280, "post_id": 34537424, "comment_id": 56818603, "body": "Possible Duplicate: <a href=\"http://stackoverflow.com/a/32589771/2006429\">TypeError - Client error in python</a>"}], "answers": [{"tags": [], "owner": {"reputation": 3717, "user_id": 4759726, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/abcd6ee7f47949d1bc8978fa317105d2?s=128&d=identicon&r=PG", "display_name": "Wombatz", "link": "https://stackoverflow.com/users/4759726/wombatz"}, "is_accepted": true, "score": 1, "last_activity_date": 1451513277, "creation_date": 1451513277, "answer_id": 34537984, "question_id": 34537424, "link": "https://stackoverflow.com/questions/34537424/python-3-5-socket-package-error-for-send/34537984#34537984", "title": "Python 3.5 socket package error for send", "body": "<p>Take a look at the <a href=\"https://docs.python.org/3.5/library/socket.html?highlight=socket.socket#socket.socket.send\" rel=\"nofollow\">docs</a>. It states that <code>send</code> takes a <code>bytes</code> parameter. You are passing a <code>str</code>. That is also the exact same thing the error message says.</p>\n\n<p>To make your example work use a <code>bytes</code> literal:</p>\n\n<pre><code>mysock.send(b'GET http://www.py4inf.com/code/romeo.txt HTTP/1.0\\n\\n')\n</code></pre>\n\n<p>notice the <strong>b</strong> in front of the <code>'</code></p>\n\n<p>Our you can <a href=\"https://docs.python.org/2/library/stdtypes.html#str.encode\" rel=\"nofollow\">encode</a> your string:</p>\n\n<pre><code>mysock.send('GET http://www.py4inf.com/code/romeo.txt HTTP/1.0\\n\\n'.encode())\n</code></pre>\n\n<p><strong>EDIT:</strong></p>\n\n<p>You are right: in python 2 <code>socket.send</code> expects a <code>str</code> as can be seen <a href=\"https://docs.python.org/2/library/socket.html?highlight=socket.socket#socket.socket.send\" rel=\"nofollow\">here</a></p>\n"}], "owner": {"reputation": 959, "user_id": 5732164, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/36ec3644bd0dcae76a432571df6d38ca?s=128&d=identicon&r=PG&f=1", "display_name": "Gavin", "link": "https://stackoverflow.com/users/5732164/gavin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1720, "favorite_count": 0, "closed_date": 1451515365, "accepted_answer_id": 34537984, "answer_count": 1, "score": 0, "last_activity_date": 1451524602, "creation_date": 1451510483, "last_edit_date": 1451524602, "question_id": 34537424, "link": "https://stackoverflow.com/questions/34537424/python-3-5-socket-package-error-for-send", "closed_reason": "Duplicate", "title": "Python 3.5 socket package error for send", "body": "<p>I was taking courses of Python from Coursera. I was trying to run the following sample code provided in the slides using Python 3.5:</p>\n\n<pre><code>import socket\nmysock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\nmysock.connect(('www.py4inf.com', 80))\nmysock.send('GET http://www.py4inf.com/code/romeo.txt HTTP/1.0\\n\\n')\n</code></pre>\n\n<p>But instead I received this error:</p>\n\n<blockquote>\n  <p>TypeError: a bytes-like object is required, not 'str'</p>\n</blockquote>\n\n<p>Does anybody know how to fix this? I guess it might be due to the version of Python. The course was using Python 2.X.</p>\n"}, {"tags": ["c#", "python", "web-services", "soap"], "answers": [{"comments": [{"owner": {"reputation": 2126, "user_id": 208930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934ebefe1d8383fd2b58ff2aa3cb6456?s=128&d=identicon&r=PG", "display_name": "Cahit", "link": "https://stackoverflow.com/users/208930/cahit"}, "reply_to_user": {"reputation": 2777, "user_id": 4852094, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/10102767534136292/picture?type=large", "display_name": "Rob", "link": "https://stackoverflow.com/users/4852094/rob"}, "edited": false, "score": 0, "creation_date": 1451717504, "post_id": 34539244, "comment_id": 56870412, "body": "My suggestion is to use named parameters when calling <code>client.service.soap_method(arg1 = x, arg2 = y, arg3 = z)</code> and just not pass the optional parameter as an argument."}, {"owner": {"reputation": 2126, "user_id": 208930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934ebefe1d8383fd2b58ff2aa3cb6456?s=128&d=identicon&r=PG", "display_name": "Cahit", "link": "https://stackoverflow.com/users/208930/cahit"}, "reply_to_user": {"reputation": 2777, "user_id": 4852094, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/10102767534136292/picture?type=large", "display_name": "Rob", "link": "https://stackoverflow.com/users/4852094/rob"}, "edited": false, "score": 0, "creation_date": 1451721798, "post_id": 34539244, "comment_id": 56871212, "body": "If you&#39;re having this problem while using complex types, I also came across this related question that might be helpful: <a href=\"http://stackoverflow.com/questions/9388180/suds-generates-empty-elements-how-to-remove-them\" title=\"suds generates empty elements how to remove them\">stackoverflow.com/questions/9388180/&hellip;</a>"}], "tags": [], "owner": {"reputation": 2126, "user_id": 208930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934ebefe1d8383fd2b58ff2aa3cb6456?s=128&d=identicon&r=PG", "display_name": "Cahit", "link": "https://stackoverflow.com/users/208930/cahit"}, "is_accepted": false, "score": 0, "last_activity_date": 1451520774, "creation_date": 1451520774, "answer_id": 34539244, "question_id": 34537390, "link": "https://stackoverflow.com/questions/34537390/using-suds-for-python-as-a-soap-client-and-failing-to-handle-nonetype/34539244#34539244", "title": "Using suds for python as a SOAP client and failing to handle NoneType", "body": "<p>If the Date field is optional, you should completely skip it and not try to pass any value at all (even if it's set to NoneType).</p>\n"}], "owner": {"reputation": 2777, "user_id": 4852094, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/10102767534136292/picture?type=large", "display_name": "Rob", "link": "https://stackoverflow.com/users/4852094/rob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 296, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1451520774, "creation_date": 1451510321, "question_id": 34537390, "link": "https://stackoverflow.com/questions/34537390/using-suds-for-python-as-a-soap-client-and-failing-to-handle-nonetype", "title": "Using suds for python as a SOAP client and failing to handle NoneType", "body": "<p>So i'm using suds-jurko for python3 and I have a value in my request like this:</p>\n\n<pre><code>`Date = None`\n</code></pre>\n\n<p>Date is not a required field.  The issue I'm running into is when it processes the request, I get the error:</p>\n\n<p><code>WebFault: Server raised fault: 'The formatter threw an exception while trying to deserialize the message: There was an error while trying to deserialize parameter http://webservices.soapclient.com/v11:request. The InnerException message was 'There was an error deserializing the object of type WebServices.Posting.Request. The value '' cannot be parsed as the type 'DateTime'.'.  Please see InnerException for more details.'</code></p>\n\n<p>Any clue how I can pass a valid NoneType so that my client won't convert it to an empty string?</p>\n"}, {"tags": ["python", "list", "csv", "dictionary"], "comments": [{"owner": {"reputation": 105769, "user_id": 1267329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f943c14b945cadc0ee0afa6ef70d2103?s=128&d=identicon&r=PG", "display_name": "Simeon Visser", "link": "https://stackoverflow.com/users/1267329/simeon-visser"}, "edited": false, "score": 3, "creation_date": 1451510244, "post_id": 34537335, "comment_id": 56816789, "body": "Have a look at csv.DictReader: <a href=\"https://docs.python.org/2/library/csv.html#csv.DictReader\" rel=\"nofollow noreferrer\">docs.python.org/2/library/csv.html#csv.DictReader</a>"}], "answers": [{"comments": [{"owner": {"reputation": 199, "user_id": 4183622, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-n6R2PzyxVRc/AAAAAAAAAAI/AAAAAAAAMpE/U1Hiwp3fBro/photo.jpg?sz=128", "display_name": "user987654321", "link": "https://stackoverflow.com/users/4183622/user987654321"}, "edited": false, "score": 0, "creation_date": 1451510475, "post_id": 34537377, "comment_id": 56816900, "body": "Ha!  Great.  Good to know it&#39;s been done before now."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "reply_to_user": {"reputation": 199, "user_id": 4183622, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-n6R2PzyxVRc/AAAAAAAAAAI/AAAAAAAAMpE/U1Hiwp3fBro/photo.jpg?sz=128", "display_name": "user987654321", "link": "https://stackoverflow.com/users/4183622/user987654321"}, "edited": false, "score": 0, "creation_date": 1451510579, "post_id": 34537377, "comment_id": 56816943, "body": "@PadraicCunningham: I documented my assumption about the header. The &#39;empty line&#39; can be skipped with <code>if not row or not row[&#39;policy&#39;]: continue</code>."}, {"owner": {"reputation": 199, "user_id": 4183622, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-n6R2PzyxVRc/AAAAAAAAAAI/AAAAAAAAMpE/U1Hiwp3fBro/photo.jpg?sz=128", "display_name": "user987654321", "link": "https://stackoverflow.com/users/4183622/user987654321"}, "edited": false, "score": 0, "creation_date": 1451510703, "post_id": 34537377, "comment_id": 56816999, "body": "Getting:    &lt;generator object import_incidents at 0x0000005CA2C94830&gt;"}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1451510713, "post_id": 34537377, "comment_id": 56817002, "body": "@PadraicCunningham: <code>csv.DictReader()</code> handles quotes properly."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "reply_to_user": {"reputation": 199, "user_id": 4183622, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-n6R2PzyxVRc/AAAAAAAAAAI/AAAAAAAAMpE/U1Hiwp3fBro/photo.jpg?sz=128", "display_name": "user987654321", "link": "https://stackoverflow.com/users/4183622/user987654321"}, "edited": false, "score": 1, "creation_date": 1451510742, "post_id": 34537377, "comment_id": 56817016, "body": "@user987654321: yes, I produced a generator function, not a list. Use iteration (like a <code>for</code> loop), or call <code>list()</code> on that generator object to produce a list again."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "reply_to_user": {"reputation": 199, "user_id": 4183622, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-n6R2PzyxVRc/AAAAAAAAAAI/AAAAAAAAMpE/U1Hiwp3fBro/photo.jpg?sz=128", "display_name": "user987654321", "link": "https://stackoverflow.com/users/4183622/user987654321"}, "edited": false, "score": 0, "creation_date": 1451510768, "post_id": 34537377, "comment_id": 56817033, "body": "@user987654321: however, unless you need random access to any of the rows at any time, I&#39;d use iteration and not read the whole file into memory."}, {"owner": {"reputation": 199, "user_id": 4183622, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-n6R2PzyxVRc/AAAAAAAAAAI/AAAAAAAAMpE/U1Hiwp3fBro/photo.jpg?sz=128", "display_name": "user987654321", "link": "https://stackoverflow.com/users/4183622/user987654321"}, "edited": false, "score": 0, "creation_date": 1451511110, "post_id": 34537377, "comment_id": 56817181, "body": "Working like a charm and feeling like a fool.  Thanks @MartijnPieters."}], "tags": [], "owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "is_accepted": true, "score": 6, "last_activity_date": 1451510937, "last_edit_date": 1451510937, "creation_date": 1451510242, "answer_id": 34537377, "question_id": 34537335, "link": "https://stackoverflow.com/questions/34537335/csv-to-list-of-dictionaries-better-way/34537377#34537377", "title": "CSV to List of Dictionaries - Better Way?", "body": "<p>You have reinvented the <a href=\"https://docs.python.org/3/library/csv.html#csv.DictReader\" rel=\"nofollow\"><code>csv.DictReader()</code> class</a>, I'm afraid:</p>\n\n<pre><code>import csv\n\ndef import_incidents(filename):\n    with open(filename, 'r', newline='') as file:\n        reader = csv.DictReader(file)\n        for row in reader:\n            if not row or not row['Policies']:\n                continue\n            row['Incident Time'] = re.sub('GMT-0600', '', row['Incident Time'])\n            yield row\n</code></pre>\n\n<p>This relies on the header row for the dictionary keys. You can define your own dictionary keys with the <code>fieldnames</code> argument to <code>DictReader()</code> (the <code>fieldnames</code> field is matched, in order, to the columns in the file), but then the first row in the file is still read like any other row. You can use the <code>next()</code> function to skip rows (see <a href=\"https://stackoverflow.com/questions/14257373/skip-the-headers-when-editing-a-csv-file-using-python/14257599#14257599\">Skip the headers when editing a csv file using Python</a>).</p>\n"}, {"comments": [{"owner": {"reputation": 199, "user_id": 4183622, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-n6R2PzyxVRc/AAAAAAAAAAI/AAAAAAAAMpE/U1Hiwp3fBro/photo.jpg?sz=128", "display_name": "user987654321", "link": "https://stackoverflow.com/users/4183622/user987654321"}, "edited": false, "score": 0, "creation_date": 1451513971, "post_id": 34537883, "comment_id": 56818454, "body": "Would there be any additional advantages to working with pandas?"}, {"owner": {"reputation": 71233, "user_id": 837534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f3782b004830f622e19029e5f7fc146?s=128&d=identicon&r=PG", "display_name": "Mike M&#252;ller", "link": "https://stackoverflow.com/users/837534/mike-m%c3%bcller"}, "reply_to_user": {"reputation": 199, "user_id": 4183622, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-n6R2PzyxVRc/AAAAAAAAAAI/AAAAAAAAMpE/U1Hiwp3fBro/photo.jpg?sz=128", "display_name": "user987654321", "link": "https://stackoverflow.com/users/4183622/user987654321"}, "edited": false, "score": 0, "creation_date": 1451514131, "post_id": 34537883, "comment_id": 56818541, "body": "Yes. You don`t need to convert the dataframe into a list of dicts in the first place. It si way more powerful than a plain dictionary or list. It is also really fast when used in the right way. Lots of it is written in Cython for speed."}, {"owner": {"reputation": 199, "user_id": 4183622, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-n6R2PzyxVRc/AAAAAAAAAAI/AAAAAAAAMpE/U1Hiwp3fBro/photo.jpg?sz=128", "display_name": "user987654321", "link": "https://stackoverflow.com/users/4183622/user987654321"}, "edited": false, "score": 0, "creation_date": 1455224365, "post_id": 34537883, "comment_id": 58407108, "body": "What&#39;s the .dropna(subset=&#39;Policies&#39;) for?"}, {"owner": {"reputation": 199, "user_id": 4183622, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-n6R2PzyxVRc/AAAAAAAAAAI/AAAAAAAAMpE/U1Hiwp3fBro/photo.jpg?sz=128", "display_name": "user987654321", "link": "https://stackoverflow.com/users/4183622/user987654321"}, "edited": false, "score": 0, "creation_date": 1455224651, "post_id": 34537883, "comment_id": 58407273, "body": "Also... have a strange character that is picked up in reading the .csv.. instead of the &quot;ID&quot; i get a \\ufeff&quot;ID&quot; from the file need to input.  Some sort of special character inserted (my guess).  Any way to have this be stripped off?"}, {"owner": {"reputation": 71233, "user_id": 837534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f3782b004830f622e19029e5f7fc146?s=128&d=identicon&r=PG", "display_name": "Mike M&#252;ller", "link": "https://stackoverflow.com/users/837534/mike-m%c3%bcller"}, "reply_to_user": {"reputation": 199, "user_id": 4183622, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-n6R2PzyxVRc/AAAAAAAAAAI/AAAAAAAAMpE/U1Hiwp3fBro/photo.jpg?sz=128", "display_name": "user987654321", "link": "https://stackoverflow.com/users/4183622/user987654321"}, "edited": false, "score": 0, "creation_date": 1455450183, "post_id": 34537883, "comment_id": 58486590, "body": "Your file has a byteorder mark (BOM). Try to open the file with the encoding <code>utf-8-sig</code>: <code>pd.read_csv(&#39;incidents.csv&#39;, encoding=&#39;utf-8-sig&#39;)</code>."}], "tags": [], "owner": {"reputation": 71233, "user_id": 837534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f3782b004830f622e19029e5f7fc146?s=128&d=identicon&r=PG", "display_name": "Mike M&#252;ller", "link": "https://stackoverflow.com/users/837534/mike-m%c3%bcller"}, "is_accepted": false, "score": 1, "last_activity_date": 1455449655, "last_edit_date": 1455449655, "creation_date": 1451512779, "answer_id": 34537883, "question_id": 34537335, "link": "https://stackoverflow.com/questions/34537335/csv-to-list-of-dictionaries-better-way/34537883#34537883", "title": "CSV to List of Dictionaries - Better Way?", "body": "<h2>Original task: List of dicts</h2>\n\n<p>You can use <a href=\"http://pandas.pydata.org/\" rel=\"nofollow noreferrer\">pandas</a>. It is fast and can do it in a few lines; </p>\n\n<pre><code>import pandas as pd\ndf = pd.read_csv('incidents.csv')\ndf['Incident Time'] = df['Incident Time'].str.replace('GMT-0600', '')\nlist_of_data = df.dropna(subset=['Policies']).to_dict(orient='records')\n</code></pre>\n\n<p>Now <code>list_of_data</code> contains:</p>\n\n<pre><code>[{'Action': 'Permitted',\n  'Channel': 'HTTPS',\n  'Destination': 'blah.blah.com',\n  'ID': 9511564,\n  'Incident Time': '29 Dec. 2015, 08:33:59 AM ',\n  'Maximum Matches': 0,\n  'Policies': 'Encrypted files',\n  'Severity': 'Medium',\n  'Source': 'Doe, John',\n  'Status': 'Closed - Authorized',\n  'Transaction Size': '47.7 KB',\n  'Unnamed: 11': nan}]\n</code></pre>\n\n<p>The <code>.dropna(subset='Policies')</code> removes the lines that have <code>NaN</code>s in the column <code>Policies</code>, i.e. missing values.  </p>\n\n<h2>Pandas-only solution:</h2>\n\n<p>If you don't want the list of dicts, keep the dataframe:</p>\n\n<pre><code>df = pd.read_csv('incidents.csv', parse_dates=[1]).dropna(subset=['Policies'])\n</code></pre>\n\n<p>This reads the <code>Incident Time</code> as very convenient <code>datetime64[ns]</code>object. The dataframe looks like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/GEr6J.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GEr6J.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 199, "user_id": 4183622, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-n6R2PzyxVRc/AAAAAAAAAAI/AAAAAAAAMpE/U1Hiwp3fBro/photo.jpg?sz=128", "display_name": "user987654321", "link": "https://stackoverflow.com/users/4183622/user987654321"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3423, "favorite_count": 0, "accepted_answer_id": 34537377, "answer_count": 2, "score": 1, "last_activity_date": 1455449655, "creation_date": 1451510031, "last_edit_date": 1451510428, "question_id": 34537335, "link": "https://stackoverflow.com/questions/34537335/csv-to-list-of-dictionaries-better-way", "title": "CSV to List of Dictionaries - Better Way?", "body": "<p>I'm working on a function that takes in a filename of a CSV and converts each line to a dictionary and then returns a list of the dictionaries created (to be able to iterate through and organize in later functions.  I've gotten it to do what I want by doing the following but feel there's got to be a better way.  Any suggestions for improvement?</p>\n\n<pre><code>import re\n\ndef import_incidents(filename):\n    \"\"\"Imports CSV and returns list of dictionaries for each incident\"\"\"\n    with open(filename, 'r') as file:\n        data = file.read()\n        data = data.split('\\n')\n        list_of_data = []\n        headers = True\n        for line in data:\n            line = line.split('\",\"')\n            if headers == True:\n                #Skip header and set to false\n                headers = False\n            elif len(line) == 1 or line[3] == '':\n                #File always has a 1 lenth final line, skip it.\n                #Events can leave blank policies, skip those too.\n                pass\n            else:\n                temp_dict = {}\n                temp_dict['id'] = re.sub('\"', '', line[0])\n                temp_dict['time'] = re.sub('GMT-0600','',line[1])\n                temp_dict['source'] = line[2]\n                temp_dict['policy'] = line[3]\n                temp_dict['destination'] = line[5]\n                temp_dict['status'] = line[10]\n                list_of_data.append(temp_dict)\n\nreturn list_of_data\n\nprint(import_incidents('Incidents (Yesterday Only).csv'))\n</code></pre>\n\n<p>Sample of CSV contents:</p>\n\n<pre><code>\"ID\",\"Incident Time\",\"Source\",\"Policies\",\"Channel\",\"Destination\",\"Severity\",\"Action\",\"Maximum Matches\",\"Transaction Size\",\"Status\",\n\"9511564\",\"29 Dec. 2015, 08:33:59 AM GMT-0600\",\"Doe, John\",\"Encrypted files\",\"HTTPS\",\"blah.blah.com\",\"Medium\",\"Permitted\",\"0\",\"47.7 KB\",\"Closed - Authorized\",\n\"1848446\",\"29 Dec. 2015, 08:23:36 AM GMT-0600\",\"Smith, Joe\",\"\",\"HTTP\",\"google.com\",\"Low\",\"Permitted\",\"0\",\"775 B\",\"Closed\"\n</code></pre>\n"}, {"tags": ["python", "numpy", "scipy", "interpolation", "nearest-neighbor"], "comments": [{"owner": {"reputation": 62045, "user_id": 1461210, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fa93b9461ed24899945403cae69e02ee?s=128&d=identicon&r=PG", "display_name": "ali_m", "link": "https://stackoverflow.com/users/1461210/ali-m"}, "edited": false, "score": 2, "creation_date": 1451510264, "post_id": 34537254, "comment_id": 56816795, "body": "<code>scipy.interpolate.NearestNDInterpolator</code> is built on top of <a href=\"http://docs.scipy.org/doc/scipy-0.15.1/reference/generated/scipy.spatial.cKDTree.html\" rel=\"nofollow noreferrer\"><code>scipy.spatial.cKDTree</code></a>, which can return nearest-neighbour indices as well as distances"}, {"owner": {"reputation": 193, "user_id": 2827169, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/51a37bf38236a1a13bb8a05018eb15bb?s=128&d=identicon&r=PG", "display_name": "noobermin", "link": "https://stackoverflow.com/users/2827169/noobermin"}, "reply_to_user": {"reputation": 62045, "user_id": 1461210, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fa93b9461ed24899945403cae69e02ee?s=128&d=identicon&r=PG", "display_name": "ali_m", "link": "https://stackoverflow.com/users/1461210/ali-m"}, "edited": false, "score": 1, "creation_date": 1451510592, "post_id": 34537254, "comment_id": 56816947, "body": "Superb! Why not make it an answer and get points?"}], "answers": [{"tags": [], "owner": {"reputation": 62045, "user_id": 1461210, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fa93b9461ed24899945403cae69e02ee?s=128&d=identicon&r=PG", "display_name": "ali_m", "link": "https://stackoverflow.com/users/1461210/ali-m"}, "is_accepted": true, "score": 3, "last_activity_date": 1451513529, "last_edit_date": 1451513529, "creation_date": 1451510892, "answer_id": 34537508, "question_id": 34537254, "link": "https://stackoverflow.com/questions/34537254/is-there-a-scipy-numpy-method-to-get-the-indices-for-nearest-interpolation/34537508#34537508", "title": "Is there a scipy/numpy method to get the indices for nearest interpolation?", "body": "<p><a href=\"https://en.wikipedia.org/wiki/K-d_tree\" rel=\"nofollow\"><em>k</em>-D trees</a> are commonly used to partition multidimensional data in order to perform fast nearest-neighbour searches.</p>\n\n<p>For example, <a href=\"https://en.wikipedia.org/wiki/K-d_tree\" rel=\"nofollow\"><code>scipy.interpolate.NearestNDInterpolator</code></a> is essentially just a wrapper around <a href=\"http://docs.scipy.org/doc/scipy-0.15.1/reference/generated/scipy.spatial.cKDTree.html\" rel=\"nofollow\"><code>scipy.spatial.cKDTree</code></a> (see the source code <a href=\"https://github.com/scipy/scipy/blob/aa2756df465a873046a0d2c34609c2ed5b0ace25/scipy/interpolate/ndgriddata.py#L22-L81\" rel=\"nofollow\">here</a>). <a href=\"http://docs.scipy.org/doc/scipy-0.15.1/reference/generated/scipy.spatial.cKDTree.query.html#scipy.spatial.cKDTree.query\" rel=\"nofollow\"><code>cKDTree.query</code></a> will return the nearest-neighbour indices as well as the corresponding distances for a given set of input coordinates.</p>\n"}], "owner": {"reputation": 193, "user_id": 2827169, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/51a37bf38236a1a13bb8a05018eb15bb?s=128&d=identicon&r=PG", "display_name": "noobermin", "link": "https://stackoverflow.com/users/2827169/noobermin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 638, "favorite_count": 0, "accepted_answer_id": 34537508, "answer_count": 1, "score": 4, "last_activity_date": 1451513788, "creation_date": 1451509599, "last_edit_date": 1451513788, "question_id": 34537254, "link": "https://stackoverflow.com/questions/34537254/is-there-a-scipy-numpy-method-to-get-the-indices-for-nearest-interpolation", "title": "Is there a scipy/numpy method to get the indices for nearest interpolation?", "body": "<p>I essentially have a set of large (GBs) set of data with points that I need to do nearest interpolation on. Essentially, it is a scalar/vector field that is a function of time. I am aware of <code>scipy.interpolate</code> and all it's goodness, and I've been using it. However, I realized that the spatial structure of the data is constant in time (Eulerian), so once I figure out which indices correspond to this or that point for interpolation for, say, the first time step, I could just obtain those indices, and the same indices should be able to create the same shaped, interpolated data for other times. Essentially, it saves the step of re-interpolating the data again and again.</p>\n\n<p>I am willing to do this myself, but I wanted to check if there already exists a method to do this that may be not in scipy but elsewhere. <code>scipy.interpolate</code> doesn't have anything ready-made that looks like it can do this. In the event there are no answers, I'll post my solution.</p>\n\n<p>One final note, the grid is Eulerian but not regular and has possible repeats, so nearest interpolation <em>is</em> needed. I can (and have) done a lexical sort on the spatial points, and this will aid in a quick look up.</p>\n"}, {"tags": ["python", "google-app-engine", "google-cloud-datastore", "nosql"], "comments": [{"owner": {"reputation": 757655, "user_id": 95810, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e8d5fe90f1fe2148bf130cccd4dc311c?s=128&d=identicon&r=PG", "display_name": "Alex Martelli", "link": "https://stackoverflow.com/users/95810/alex-martelli"}, "edited": false, "score": 0, "creation_date": 1451515575, "post_id": 34537213, "comment_id": 56819102, "body": "Hard to say what&#39;s <i>best</i>, without any details of your intended use, but stashing the large blob in Cloud Storage (or perhaps Cloud SQL) and only a URL or ID in the datastore, is certainly a lively possibility."}, {"owner": {"reputation": 1344, "user_id": 1549523, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7d2fc76dcb19f2699da1d8b42e0893cc?s=128&d=identicon&r=PG&f=1", "display_name": "Ani", "link": "https://stackoverflow.com/users/1549523/ani"}, "reply_to_user": {"reputation": 757655, "user_id": 95810, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e8d5fe90f1fe2148bf130cccd4dc311c?s=128&d=identicon&r=PG", "display_name": "Alex Martelli", "link": "https://stackoverflow.com/users/95810/alex-martelli"}, "edited": false, "score": 0, "creation_date": 1451516964, "post_id": 34537213, "comment_id": 56819553, "body": "As @AlexMartelli suggested, but with additional meta-data stored in datastore, so you can use datastore for querying, filtering, browsing the entries (maybe with an excerpt of the text?). You could use the datastore entries for access control, too, if you already have something in place and don&#39;t want to fiddle with GCS permissions. If you want to provide some kind of text search feature to your users, you could use Search API documents (either alternatively or additionally)."}], "answers": [{"tags": [], "owner": {"reputation": 14220, "user_id": 136598, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/55c76f58f63ba7cbb85658158b3a82f8?s=128&d=identicon&r=PG&f=1", "display_name": "gaefan", "link": "https://stackoverflow.com/users/136598/gaefan"}, "is_accepted": false, "score": 1, "last_activity_date": 1451572044, "creation_date": 1451572044, "answer_id": 34547763, "question_id": 34537213, "link": "https://stackoverflow.com/questions/34537213/app-engine-what-is-the-best-way-to-store-1mb-of-text/34547763#34547763", "title": "App Engine: What is the best way to store &gt;1MB of text?", "body": "<p>I do this quite a bit.  Initially, I stored the text files in Google Cloud Storage and stored the address of the file in my entity.  I stopped doing this, however, because I found the API for Google Cloud Storage to be too unreliable.  A significant percentage of my requests to store/retrieve files would timeout and continue to timeout on retries (and my files are not that big, most are under 1MB).</p>\n\n<p>To find a better solution, I switched to using NDB compressed properties.  My text files are quite compressible so just about all of mine should be well under the 1MB limit when compressed.  To make it easier, I created a custom property (see below).</p>\n\n<p>My custom property depends from a compressed <code>ndb.BlobProperty</code> and I just add encoding and decoding to UTF8.  At some point, I will further expand this to store the text in Google Cloud Storage when the input text exceeds a size threshold.</p>\n\n<p>If you expect your compressed text to be under the 1MB limit then this would be a good solution for you.  Otherwise, you should use the <a href=\"https://cloud.google.com/appengine/docs/python/googlecloudstorageclient/\" rel=\"nofollow\">GCS Python Client</a> but watch out for timeout errors.</p>\n\n<pre><code>class UTF8BlobProperty(ndb.BlobProperty):\n    \"\"\"\n    This is a custom blob property for storing unicode text as utf-8.\n    Later, we can add storing to GCS if text is too large.\n    \"\"\"\n    def __init__(self):\n        super(UTF8BlobProperty, self).__init__(default=\"\", compressed=True)\n\n    def _validate(self, text):\n        if not isinstance(text, basestring):\n            raise TypeError(\"Expected a basestring, got %s\" % text)\n\n    def _to_base_type(self, text):\n        return text.encode(\"utf-8\")\n\n    def _from_base_type(self, text):\n        return text.decode(\"utf-8\")\n</code></pre>\n"}], "owner": {"reputation": 2598, "user_id": 2939175, "user_type": "registered", "accept_rate": 29, "profile_image": "https://graph.facebook.com/100002492231539/picture?type=large", "display_name": "Mate Hegedus", "link": "https://stackoverflow.com/users/2939175/mate-hegedus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 303, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1504828530, "creation_date": 1451509463, "last_edit_date": 1506103282, "question_id": 34537213, "link": "https://stackoverflow.com/questions/34537213/app-engine-what-is-the-best-way-to-store-1mb-of-text", "title": "App Engine: What is the best way to store &gt;1MB of text?", "body": "<p>I would like to store >1MB of text in App Engine NDB but NDB has a 1MB limit on entity size. How else could I store 1 MB of unicode text?</p>\n"}, {"tags": ["python", "arrays", "loops", "pywavelets"], "comments": [{"owner": {"reputation": 4251, "user_id": 2997179, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RPknn.png?s=128&g=1", "display_name": "Martin Valgur", "link": "https://stackoverflow.com/users/2997179/martin-valgur"}, "edited": false, "score": 0, "creation_date": 1451512275, "post_id": 34537193, "comment_id": 56817691, "body": "If it&#39;s of any help, the above code works for me. It is missing <code>ntot</code>, though. I set it to <code>99</code>. If I make the <code>ntot</code> larger than 99+31 I start getting the above error as well."}, {"owner": {"reputation": 1227, "user_id": 1675532, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/298e55fb3bffd5160b92203c0a441e84?s=128&d=identicon&r=PG", "display_name": "pseudoDust", "link": "https://stackoverflow.com/users/1675532/pseudodust"}, "edited": false, "score": 0, "creation_date": 1451575632, "post_id": 34537193, "comment_id": 56838648, "body": "So what&#39;s your question?"}], "owner": {"reputation": 231, "user_id": 2573355, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/29fcaadfc536f57e194b4d753bbac6e0?s=128&d=identicon&r=PG", "display_name": "user2573355", "link": "https://stackoverflow.com/users/2573355/user2573355"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 159, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1451574791, "creation_date": 1451509336, "last_edit_date": 1451574791, "question_id": 34537193, "link": "https://stackoverflow.com/questions/34537193/python-array-output-for-loops", "title": "Python Array Output for Loops", "body": "<p>I want to run a loop over every 33 observations and perform a discrete wavelet transform using PyWavelets on that subset of data.  I've searched far and wide for a similar issue using PyWavelets, but can't find anything.  I've looked into looping with array outputs as well, with no luck.  </p>\n\n<p>Here's the code I'm using:</p>\n\n<pre><code>mnum = 0\ntbar = 0\nnsize = 33\ndata = np.random.random_sample((99,))\n\n\nfor jtim in range(ntot):\n    mnum = mnum + 1\n    if (mnum &gt; nsize):\n        num = mnum -32\n        sub = data[num:mnum]\n        (cA, cD) = pywt.dwt(sub, 'db4', mode='sym')\n</code></pre>\n\n<p>And here is the error I'm getting:</p>\n\n<pre><code>RuntimeError Traceback (most recent call last) &lt;ipython-input-145-a565a74d0593&gt; in &lt;module&gt;()\n      7         num = mnum -32\n      8         sub = data[num:mnum]\n----&gt; 9         (cA, cD) = pywt.dwt(sub, 'db4', mode='sym')\n    _pywt.pyx in _pywt.dwt (pywt/src/_pywt.c:11729)()\n    _pywt.pyx in _pywt.dwt_single (pywt/src/_pywt.c:13519)()\n\nRuntimeError: Invalid output length.\n</code></pre>\n\n<p>I'm pretty sure the error is because I'm trying to output arrays (cA, cD are both arrays).  </p>\n\n<p>So I tried a modification with two append statements and go it to work: </p>\n\n<pre><code>results = []\nresults2 = []\nfor jtim in range(len(data):\n    mnum = mnum + 1\n    if (mnum &gt; nsize):\n        num = mnum -32\n        sub = data[num:mnum]\n        (cA, cD) = pywt.dwt(sub, 'db4', mode='sym')\n        results.append(cA)\n        results2.append(cD)\n</code></pre>\n"}, {"tags": ["python", "arrays", "algorithm", "performance", "numpy"], "comments": [{"owner": {"reputation": 23600, "user_id": 1695172, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/6319d7eafca7852cf04c88598ca31e75?s=128&d=identicon&r=PG", "display_name": "Netwave", "link": "https://stackoverflow.com/users/1695172/netwave"}, "edited": false, "score": 0, "creation_date": 1451508865, "post_id": 34537068, "comment_id": 56816092, "body": "possible duplicate of today post: <a href=\"http://stackoverflow.com/questions/34524808/how-to-apply-a-function-to-each-element-of-an-array-when-the-result-is-dependent/34527124#34527124\" title=\"how to apply a function to each element of an array when the result is dependent\">stackoverflow.com/questions/34524808/&hellip;</a>"}, {"owner": {"reputation": 70452, "user_id": 1060350, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/XCkw7.jpg?s=128&g=1", "display_name": "Has QUIT--Anony-Mousse", "link": "https://stackoverflow.com/users/1060350/has-quit-anony-mousse"}, "edited": false, "score": 0, "creation_date": 1451512170, "post_id": 34537068, "comment_id": 56817635, "body": "What about <i>accuracy</i>? Try [1e20,1,-1e20,-1] and n=3"}, {"owner": {"reputation": 62045, "user_id": 1461210, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fa93b9461ed24899945403cae69e02ee?s=128&d=identicon&r=PG", "display_name": "ali_m", "link": "https://stackoverflow.com/users/1461210/ali-m"}, "reply_to_user": {"reputation": 23600, "user_id": 1695172, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/6319d7eafca7852cf04c88598ca31e75?s=128&d=identicon&r=PG", "display_name": "Netwave", "link": "https://stackoverflow.com/users/1695172/netwave"}, "edited": false, "score": 4, "creation_date": 1451515890, "post_id": 34537068, "comment_id": 56819203, "body": "@DanielSanchez That question is about a very different type of recurrent calculation. This one amounts to performing a 1D convolution."}], "answers": [{"tags": [], "owner": {"reputation": 53404, "user_id": 2096752, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/B8PLE.jpg?s=128&g=1", "display_name": "shx2", "link": "https://stackoverflow.com/users/2096752/shx2"}, "is_accepted": false, "score": 9, "last_activity_date": 1451672760, "last_edit_date": 1451672760, "creation_date": 1451509198, "answer_id": 34537170, "question_id": 34537068, "link": "https://stackoverflow.com/questions/34537068/python-numpy-most-efficient-way-to-sum-n-elements-of-an-array-so-that-each-out/34537170#34537170", "title": "Python/numpy: Most efficient way to sum n elements of an array, so that each output element is the sum of the previous n input elements?", "body": "<p>You can make use of <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.cumsum.html\" rel=\"nofollow\"><code>np.cumsum</code></a>, and take the difference of the <code>cumsum</code>ed array and a shifted version of it:</p>\n\n<pre><code>n = 3\narr = np.array([2, 4, 3, 7, 6, 1, 9, 4, 6, 5])\nsum_arr = arr.cumsum()\nshifted_sum_arr = np.concatenate([[np.NaN]*(n-1), [0],  sum_arr[:-n]])\nsum_arr\n=&gt; array([ 2,  6,  9, 16, 22, 23, 32, 36, 42, 47])\nshifted_sum_arr\n=&gt; array([ nan,  nan,   0.,   2.,   6.,   9.,  16.,  22.,  23.,  32.])\nsum_arr - shifted_sum_arr\n=&gt; array([ nan,  nan,   9.,  14.,  16.,  14.,  16.,  14.,  19.,  15.])\n</code></pre>\n\n<p>IMO, this is a more <em>numpyish</em> way to do this, mainly because it avoids the loop.</p>\n\n<hr>\n\n<p><strong>Timings</strong></p>\n\n<pre><code>def cumsum_app(flat_array, n):\n    sum_arr = flat_array.cumsum()\n    shifted_sum_arr = np.concatenate([[np.NaN]*(n-1), [0],  sum_arr[:-n]])\n    return sum_arr - shifted_sum_arr\n\nflat_array = np.random.randint(0,9,(100000))\n%timeit cumsum_app(flat_array,10)\n1000 loops, best of 3: 985 us per loop\n%timeit cumsum_app(flat_array,100)\n1000 loops, best of 3: 963 us per loop\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "is_accepted": false, "score": 7, "last_activity_date": 1451513921, "last_edit_date": 1451513921, "creation_date": 1451509331, "answer_id": 34537191, "question_id": 34537068, "link": "https://stackoverflow.com/questions/34537068/python-numpy-most-efficient-way-to-sum-n-elements-of-an-array-so-that-each-out/34537191#34537191", "title": "Python/numpy: Most efficient way to sum n elements of an array, so that each output element is the sum of the previous n input elements?", "body": "<p>You are basically performing <a href=\"https://en.wikipedia.org/wiki/Convolution\" rel=\"nofollow\"><code>1D convolution</code></a> there, so you can use <a href=\"http://docs.scipy.org/doc/numpy-1.10.0/reference/generated/numpy.convolve.html\" rel=\"nofollow\"><code>np.convolve</code></a>, like so -</p>\n\n<pre><code># Get the valid sliding summations with 1D convolution\nvals = np.convolve(flat_array,np.ones(n),mode='valid')\n\n# Pad with NaNs at the start if needed  \nout = np.pad(vals,(n-1,0),'constant',constant_values=(np.nan))\n</code></pre>\n\n<p>Sample run -</p>\n\n<pre><code>In [110]: flat_array\nOut[110]: array([2, 4, 3, 7, 6, 1, 9, 4, 6, 5])\n\nIn [111]: n = 3\n\nIn [112]: vals = np.convolve(flat_array,np.ones(n),mode='valid')\n     ...: out = np.pad(vals,(n-1,0),'constant',constant_values=(np.nan))\n     ...: \n\nIn [113]: vals\nOut[113]: array([  9.,  14.,  16.,  14.,  16.,  14.,  19.,  15.])\n\nIn [114]: out\nOut[114]: array([ nan,  nan,   9.,  14.,  16.,  14.,  16.,  14.,  19.,  15.])\n</code></pre>\n\n<p>For 1D convolution, one can also use <a href=\"http://docs.scipy.org/doc/scipy-0.16.1/reference/generated/scipy.signal.convolve.html\" rel=\"nofollow\"><code>Scipy's implementation</code></a>. The runtimes with Scipy version seemed better for a large window size, as also the runtime tests listed next would try to investigate. The Scipy version for getting <code>vals</code> would be -</p>\n\n<pre><code>from scipy import signal\nvals = signal.convolve(flat_array,np.ones(n),mode='valid')\n</code></pre>\n\n<p>The <code>NaNs</code> padding operation could be replaced by <a href=\"http://docs.scipy.org/doc/numpy-1.10.1/reference/generated/numpy.hstack.html\" rel=\"nofollow\"><code>np.hstack</code></a> : <code>np.hstack(([np.nan]*(n-1),vals))</code> for better performance.</p>\n\n<hr>\n\n<p>Runtime tests -</p>\n\n<pre><code>In [238]: def original_app(flat_array,n):\n     ...:     sums = np.full(flat_array.shape, np.NaN)\n     ...:     for i in range(n - 1, flat_array.shape[0]):\n     ...:         sums[i] = np.sum(flat_array[i - n + 1:i + 1])\n     ...:     return sums\n     ...: \n     ...: def vectorized_app1(flat_array,n):\n     ...:     vals = np.convolve(flat_array,np.ones(n),mode='valid')\n     ...:     return np.hstack(([np.nan]*(n-1),vals))\n     ...: \n     ...: def vectorized_app2(flat_array,n):\n     ...:     vals = signal.convolve(flat_array,np.ones(3),mode='valid')\n     ...:     return np.hstack(([np.nan]*(n-1),vals))\n     ...: \n\nIn [239]: flat_array = np.random.randint(0,9,(100000))\n\nIn [240]: %timeit original_app(flat_array,10)\n1 loops, best of 3: 833 ms per loop\n\nIn [241]: %timeit vectorized_app1(flat_array,10)\n1000 loops, best of 3: 1.96 ms per loop\n\nIn [242]: %timeit vectorized_app2(flat_array,10)\n100 loops, best of 3: 13.1 ms per loop\n\nIn [243]: %timeit original_app(flat_array,100)\n1 loops, best of 3: 836 ms per loop\n\nIn [244]: %timeit vectorized_app1(flat_array,100)\n100 loops, best of 3: 16.5 ms per loop\n\nIn [245]: %timeit vectorized_app2(flat_array,100)\n100 loops, best of 3: 13.1 ms per loop\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21161, "user_id": 293594, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/236ff5ec4ac5714b8f28542d5299ec90?s=128&d=identicon&r=PG", "display_name": "xnx", "link": "https://stackoverflow.com/users/293594/xnx"}, "is_accepted": false, "score": 4, "last_activity_date": 1451510456, "creation_date": 1451510456, "answer_id": 34537418, "question_id": 34537068, "link": "https://stackoverflow.com/questions/34537068/python-numpy-most-efficient-way-to-sum-n-elements-of-an-array-so-that-each-out/34537418#34537418", "title": "Python/numpy: Most efficient way to sum n elements of an array, so that each output element is the sum of the previous n input elements?", "body": "<p>The other answers here are probably closer to what you're looking for in terms of speed and memory, but for completeness you can also use a list comprehension to build your array:</p>\n\n<pre><code>a = np.array([2, 4, 3, 7, 6, 1, 9, 4, 6, 5])\nN, n = a.shape[0], 3\nnp.array([np.NaN]*(n-1) + [np.sum(a[j:j+n]) for j in range(N-n+1)])\n</code></pre>\n\n<p>returns:</p>\n\n<pre><code>array([ nan,  nan,   9.,  14.,  16.,  14.,  16.,  14.,  19.,  15.])\n</code></pre>\n"}], "owner": {"reputation": 7279, "user_id": 85248, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/1e7fc3010b5ee1e1e9350ae5d47a74f9?s=128&d=identicon&r=PG", "display_name": "James Adams", "link": "https://stackoverflow.com/users/85248/james-adams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3055, "favorite_count": 1, "answer_count": 3, "score": 7, "last_activity_date": 1451672760, "creation_date": 1451508749, "last_edit_date": 1451641236, "question_id": 34537068, "link": "https://stackoverflow.com/questions/34537068/python-numpy-most-efficient-way-to-sum-n-elements-of-an-array-so-that-each-out", "title": "Python/numpy: Most efficient way to sum n elements of an array, so that each output element is the sum of the previous n input elements?", "body": "<p>I want to write a function that takes a flattened array as input and returns an array of equal length containing the sums of the previous n elements from the input array, with the initial <code>n - 1</code> elements of the output array set to <code>NaN</code>.</p>\n\n<p>For example if the array has ten <code>elements = [2, 4, 3, 7, 6, 1, 9, 4, 6, 5]</code>\nand <code>n = 3</code> then the resulting array should be <code>[NaN, NaN, 9, 14, 16, 14, 16, 14, 19, 15]</code>.</p>\n\n<p>One way I've come up with to do this:</p>\n\n<pre><code>def sum_n_values(flat_array, n): \n\n    sums = np.full(flat_array.shape, np.NaN)\n    for i in range(n - 1, flat_array.shape[0]):\n        sums[i] = np.sum(flat_array[i - n + 1:i + 1])\n    return sums\n</code></pre>\n\n<p>Is there a better/more efficient/more \"Pythonic\" way to do this?</p>\n\n<p>Thanks in advance for your help.</p>\n"}, {"tags": ["python", "artificial-intelligence", "backtracking"], "comments": [{"owner": {"reputation": 3085, "user_id": 2261330, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/9d4f09a9a169d0d6dddd4d0980cc94be?s=128&d=identicon&r=PG", "display_name": "Bas Peeters", "link": "https://stackoverflow.com/users/2261330/bas-peeters"}, "edited": false, "score": 0, "creation_date": 1451508886, "post_id": 34537053, "comment_id": 56816099, "body": "Did you try to look anything up?"}, {"owner": {"reputation": 3467, "user_id": 5509239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6563e2e4d92a4591fcf3b7860bb28192?s=128&d=identicon&r=PG&f=1", "display_name": "memoselyk", "link": "https://stackoverflow.com/users/5509239/memoselyk"}, "edited": false, "score": 0, "creation_date": 1451575470, "post_id": 34537053, "comment_id": 56838596, "body": "Does it have to be done in python? Are you constrained to use a specific library or none?"}, {"owner": {"reputation": 65, "user_id": 5670044, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/dcec7c3fca574ed3257fc72deba588f5?s=128&d=identicon&r=PG&f=1", "display_name": "Quarillion", "link": "https://stackoverflow.com/users/5670044/quarillion"}, "edited": false, "score": 0, "creation_date": 1451587052, "post_id": 34537053, "comment_id": 56843031, "body": "Yes, it has to be done in python and i can&#39;t use any library"}], "answers": [{"comments": [{"owner": {"reputation": 4124, "user_id": 4394418, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OEtIP.png?s=128&g=1", "display_name": "Gerard Rozsavolgyi", "link": "https://stackoverflow.com/users/4394418/gerard-rozsavolgyi"}, "edited": false, "score": 2, "creation_date": 1451509526, "post_id": 34537131, "comment_id": 56816441, "body": "Are you really answering the question ?"}, {"owner": {"reputation": 65, "user_id": 5670044, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/dcec7c3fca574ed3257fc72deba588f5?s=128&d=identicon&r=PG&f=1", "display_name": "Quarillion", "link": "https://stackoverflow.com/users/5670044/quarillion"}, "edited": false, "score": 0, "creation_date": 1451562098, "post_id": 34537131, "comment_id": 56833417, "body": "No, actually he didn&#39;t answer the question"}], "tags": [], "owner": {"reputation": 1, "user_id": 5719575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00d330680cec9215c9fcab6b03ac70ef?s=128&d=identicon&r=PG&f=1", "display_name": "Moha", "link": "https://stackoverflow.com/users/5719575/moha"}, "is_accepted": false, "score": 0, "last_activity_date": 1451509017, "creation_date": 1451509017, "answer_id": 34537131, "question_id": 34537053, "link": "https://stackoverflow.com/questions/34537053/define-constraints-on-python-for-backtrack/34537131#34537131", "title": "Define constraints on python for Backtrack", "body": "<p>Backtracking is a general algorithm for finding all (or some) solutions to some computational problems, notably constraint satisfaction problems, that incrementally builds candidates to the solutions, and abandons each partial candidate c (\"backtracks\") as soon as it determines that c cannot possibly be completed to a valid solution</p>\n"}], "owner": {"reputation": 65, "user_id": 5670044, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/dcec7c3fca574ed3257fc72deba588f5?s=128&d=identicon&r=PG&f=1", "display_name": "Quarillion", "link": "https://stackoverflow.com/users/5670044/quarillion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1451509017, "creation_date": 1451508682, "question_id": 34537053, "link": "https://stackoverflow.com/questions/34537053/define-constraints-on-python-for-backtrack", "title": "Define constraints on python for Backtrack", "body": "<p>I must implement Backtracking on python with the constraints as  functions f(A, a, B, b) that returns true if neighbors A, B satisfy the constraint when they have values A=a, B=b. I have to resolve the problem:</p>\n\n<p>Send + more = money</p>\n\n<p>but i do not know how to implements the constraints. I know that:</p>\n\n<p>D + E = Y + 10*C1</p>\n\n<p>C1 + N + R = E + 10*C1</p>\n\n<p>C2 + E + O = N + C3*10</p>\n\n<p>C3 + S + M = O + 10*C4</p>\n\n<p>C4 = M</p>\n\n<p>but how can I implement these constraints as a function f(A,a,B,b)?</p>\n"}, {"tags": ["python", "python-3.x", "pandas", "dataframe", "nan"], "answers": [{"comments": [{"owner": {"reputation": 5134, "user_id": 1134881, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/k4bte.jpg?s=128&g=1", "display_name": "SpeedCoder5", "link": "https://stackoverflow.com/users/1134881/speedcoder5"}, "edited": false, "score": 0, "creation_date": 1451591576, "post_id": 34537085, "comment_id": 56844408, "body": "And after using the method above      dfv.values.sum()  Counts all the values, i.e.      6  Thanks. ;)"}, {"owner": {"reputation": 130643, "user_id": 3923281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CNpoa.jpg?s=128&g=1", "display_name": "Alex Riley", "link": "https://stackoverflow.com/users/3923281/alex-riley"}, "reply_to_user": {"reputation": 5134, "user_id": 1134881, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/k4bte.jpg?s=128&g=1", "display_name": "SpeedCoder5", "link": "https://stackoverflow.com/users/1134881/speedcoder5"}, "edited": false, "score": 0, "creation_date": 1451647729, "post_id": 34537085, "comment_id": 56854139, "body": "No problem! Yep, that works. In fact, you could just write <code>dfv.sum()</code> to count all the values. Or even more efficiently, just check <code>len(dfd)</code>."}], "tags": [], "owner": {"reputation": 130643, "user_id": 3923281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CNpoa.jpg?s=128&g=1", "display_name": "Alex Riley", "link": "https://stackoverflow.com/users/3923281/alex-riley"}, "is_accepted": true, "score": 23, "last_activity_date": 1545408769, "last_edit_date": 1545408769, "creation_date": 1451508839, "answer_id": 34537085, "question_id": 34537048, "link": "https://stackoverflow.com/questions/34537048/how-to-count-nan-values-in-a-pandas-dataframe/34537085#34537085", "title": "How to count nan values in a pandas DataFrame?", "body": "<p>If you want to count only NaN values in column <code>'a'</code> of a DataFrame <code>df</code>, use:</p>\n\n<pre><code>len(df) - df['a'].count()\n</code></pre>\n\n<p>Here <code>count()</code> tells us the number of non-NaN values, and this is subtracted from the total number of values (given by <code>len(df)</code>).</p>\n\n<p>To count NaN values in <em>every</em> column of <code>df</code>, use:</p>\n\n<pre><code>len(df) - df.count()\n</code></pre>\n\n<hr>\n\n<p>If you want to use <code>value_counts</code>, tell it <em>not</em> to drop NaN values by setting <code>dropna=False</code> (added in <a href=\"http://pandas.pydata.org/pandas-docs/version/0.17.1/whatsnew.html#whatsnew-0141-enhancements\" rel=\"noreferrer\">0.14.1</a>):</p>\n\n<pre><code>dfv = dfd['a'].value_counts(dropna=False)\n</code></pre>\n\n<p>This allows the missing values in the column to be counted too:</p>\n\n<pre><code> 3     3\nNaN    2\n 1     1\nName: a, dtype: int64\n</code></pre>\n\n<p>The rest of your code should then work as you expect (note that it's not necessary to call <code>sum</code>; just <code>print(\"nan: %d\" % dfv[np.nan])</code> suffices).</p>\n"}, {"comments": [{"owner": {"reputation": 751, "user_id": 7648650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cfd6a1246b817817a48bd940c57f99b?s=128&d=identicon&r=PG&f=1", "display_name": "Quastiat", "link": "https://stackoverflow.com/users/7648650/quastiat"}, "edited": false, "score": 0, "creation_date": 1569672393, "post_id": 34537125, "comment_id": 102676988, "body": "this is the easier approach"}], "tags": [], "owner": {"reputation": 4226, "user_id": 1435522, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/64b784f3c432be87b9ded46b3d7ca9ec?s=128&d=identicon&r=PG", "display_name": "ilyas patanam", "link": "https://stackoverflow.com/users/1435522/ilyas-patanam"}, "is_accepted": false, "score": 31, "last_activity_date": 1451508995, "creation_date": 1451508995, "answer_id": 34537125, "question_id": 34537048, "link": "https://stackoverflow.com/questions/34537048/how-to-count-nan-values-in-a-pandas-dataframe/34537125#34537125", "title": "How to count nan values in a pandas DataFrame?", "body": "<p>To count just null values, you can use <a href=\"http://pandas.pydata.org/pandas-docs/version/0.17.0/generated/pandas.isnull.html\" rel=\"noreferrer\"><code>isnull()</code></a>: </p>\n\n<pre><code>In [11]:\ndfd.isnull().sum()\n\nOut[11]:\na    2\ndtype: int64\n</code></pre>\n\n<p>Here <code>a</code> is the column name, and there are 2 occurrences of the null value in the column.</p>\n"}, {"tags": [], "owner": {"reputation": 2531, "user_id": 996205, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9b96fb72e053d2b561e56be76286f549?s=128&d=identicon&r=PG", "display_name": "Thom Ives", "link": "https://stackoverflow.com/users/996205/thom-ives"}, "is_accepted": false, "score": 3, "last_activity_date": 1540067803, "creation_date": 1540067803, "answer_id": 52909898, "question_id": 34537048, "link": "https://stackoverflow.com/questions/34537048/how-to-count-nan-values-in-a-pandas-dataframe/52909898#52909898", "title": "How to count nan values in a pandas DataFrame?", "body": "<p>A good clean way to count all NaN's in all columns of your dataframe would be ...</p>\n\n<pre><code>import pandas as pd \nimport numpy as np\n\n\ndf = pd.DataFrame({'a':[1,2,np.nan], 'b':[np.nan,1,np.nan]})\nprint(df.isna().sum().sum())\n</code></pre>\n\n<p>Using a single sum, you get the count of NaN's for each column. The second sum, sums those column sums.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 5624930, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mh581.jpg?s=128&g=1", "display_name": "shuishoudage", "link": "https://stackoverflow.com/users/5624930/shuishoudage"}, "is_accepted": false, "score": 2, "last_activity_date": 1541588309, "creation_date": 1541588309, "answer_id": 53188132, "question_id": 34537048, "link": "https://stackoverflow.com/questions/34537048/how-to-count-nan-values-in-a-pandas-dataframe/53188132#53188132", "title": "How to count nan values in a pandas DataFrame?", "body": "<p>if you only want the summary of null value for each column, using the following code\n    <code>df.isnull().sum()</code>\nif you want to know how many null values in the data frame using following code\n   <code>df.isnull().sum().sum() # calculate total</code></p>\n"}, {"tags": [], "owner": {"reputation": 26765, "user_id": 281545, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/e9afcf11d81904cdb5677c13d249b6c5?s=128&d=identicon&r=PG", "display_name": "Mr_and_Mrs_D", "link": "https://stackoverflow.com/users/281545/mr-and-mrs-d"}, "is_accepted": false, "score": 1, "last_activity_date": 1543984030, "creation_date": 1543984030, "answer_id": 53625181, "question_id": 34537048, "link": "https://stackoverflow.com/questions/34537048/how-to-count-nan-values-in-a-pandas-dataframe/53625181#53625181", "title": "How to count nan values in a pandas DataFrame?", "body": "<p>Yet another way to count <strong>all</strong> the nans in a df:</p>\n\n<p><code>num_nans = df.size - df.count().sum()</code></p>\n\n<p>Timings:</p>\n\n<pre><code>import timeit\n\nimport numpy as np\nimport pandas as pd\n\ndf_scale = 100000\ndf = pd.DataFrame(\n    [[1, np.nan, 100, 63], [2, np.nan, 101, 63], [2, 12, 102, 63],\n     [2, 14, 102, 63], [2, 14, 102, 64], [1, np.nan, 200, 63]] * df_scale,\n    columns=['group', 'value', 'value2', 'dummy'])\n\nrepeat = 3\nnumbers = 100\n\nsetup = \"\"\"import pandas as pd\nfrom __main__ import df\n\"\"\"\n\ndef timer(statement, _setup=None):\n    print (min(\n        timeit.Timer(statement, setup=_setup or setup).repeat(\n            repeat, numbers)))\n\ntimer('df.size - df.count().sum()')\ntimer('df.isna().sum().sum()')\ntimer('df.isnull().sum().sum()')\n</code></pre>\n\n<p>prints:</p>\n\n<pre><code>3.998805362999999\n3.7503365439999996\n3.689461442999999\n</code></pre>\n\n<p>so pretty much equivalent</p>\n"}, {"tags": [], "owner": {"reputation": 1997, "user_id": 1340604, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cj22m.jpg?s=128&g=1", "display_name": "Kohn1001", "link": "https://stackoverflow.com/users/1340604/kohn1001"}, "is_accepted": false, "score": 1, "last_activity_date": 1599062376, "creation_date": 1599062376, "answer_id": 63709221, "question_id": 34537048, "link": "https://stackoverflow.com/questions/34537048/how-to-count-nan-values-in-a-pandas-dataframe/63709221#63709221", "title": "How to count nan values in a pandas DataFrame?", "body": "<p>This one worked for me best!</p>\n<p>If you wanna get a simple summary use (great for data science to count missing values and their type):</p>\n<pre><code>df.info(verbose=True, null_counts=True)\n</code></pre>\n<p>Or another cool one is:</p>\n<pre><code>df['&lt;column_name&gt;'].value_counts(dropna=False)\n</code></pre>\n<p><strong>Example:</strong></p>\n<pre><code>df = pd.DataFrame({'a': [1, 2, 1, 2, np.nan],\n   ...:                    'b': [2, 2, np.nan, 1, np.nan],\n   ...:                    'c': [np.nan, 3, np.nan, 3, np.nan]})\n</code></pre>\n<p>This is the df:</p>\n<pre><code>    a    b    c\n0  1.0  2.0  NaN\n1  2.0  2.0  3.0\n2  1.0  NaN  NaN\n3  2.0  1.0  3.0\n4  NaN  NaN  NaN\n</code></pre>\n<p>Run Info:</p>\n<pre><code>df.info(verbose=True, null_counts=True)\n   ...:\n&lt;class 'pandas.core.frame.DataFrame'&gt;\n\nRangeIndex: 5 entries, 0 to 4\nData columns (total 3 columns):\na    4 non-null float64\nb    3 non-null float64\nc    2 non-null float64\ndtypes: float64(3)\n</code></pre>\n<p>So you see for C you get, out of 5 rows 2 non-nulls, b/c you have null at rows: [0,2,4]</p>\n<p>And this is what you get using value_counts for each column:</p>\n<pre><code>In [17]: df['a'].value_counts(dropna=False)\nOut[17]:\n 2.0    2\n 1.0    2\nNaN     1\nName: a, dtype: int64\n\nIn [18]: df['b'].value_counts(dropna=False)\nOut[18]:\nNaN     2\n 2.0    2\n 1.0    1\nName: b, dtype: int64\n\nIn [19]: df['c'].value_counts(dropna=False)\nOut[19]:\nNaN     3\n 3.0    2\nName: c, dtype: int64\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5173, "user_id": 1981088, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1Iicg.png?s=128&g=1", "display_name": "help-info.de", "link": "https://stackoverflow.com/users/1981088/help-info-de"}, "edited": false, "score": 0, "creation_date": 1599149859, "post_id": 63725425, "comment_id": 112691585, "body": "Welcome to Stack Overflow. Before answering an old question having an accepted answer (look for the green \u2713) as well as other answers ensure your answer adds something new or is otherwise helpful in relation to them. Here is a guide on <a href=\"http://stackoverflow.com/help/how-to-answer\">How to Answer</a>."}], "tags": [], "owner": {"reputation": 1, "user_id": 13634472, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAjHC0Wj2v1A6TaskqVANYNG7RLyeJggNwEy9D0=k-s128", "display_name": "Nikita Malviya", "link": "https://stackoverflow.com/users/13634472/nikita-malviya"}, "is_accepted": false, "score": 0, "last_activity_date": 1599142306, "creation_date": 1599142306, "answer_id": 63725425, "question_id": 34537048, "link": "https://stackoverflow.com/questions/34537048/how-to-count-nan-values-in-a-pandas-dataframe/63725425#63725425", "title": "How to count nan values in a pandas DataFrame?", "body": "<pre><code>dfd['a'].isnull().value_counts()\n</code></pre>\n<blockquote>\n<p>return :</p>\n<ul>\n<li>(True  695</li>\n<li>False  60,</li>\n<li>Name: a, dtype: int64)</li>\n</ul>\n</blockquote>\n<blockquote>\n<ul>\n<li>True : represents the null values count</li>\n<li>False : represent the non-null values count</li>\n</ul>\n</blockquote>\n"}], "owner": {"reputation": 5134, "user_id": 1134881, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/k4bte.jpg?s=128&g=1", "display_name": "SpeedCoder5", "link": "https://stackoverflow.com/users/1134881/speedcoder5"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65850, "favorite_count": 1, "accepted_answer_id": 34537085, "answer_count": 7, "score": 23, "last_activity_date": 1599142306, "creation_date": 1451508642, "last_edit_date": 1483111726, "question_id": 34537048, "link": "https://stackoverflow.com/questions/34537048/how-to-count-nan-values-in-a-pandas-dataframe", "title": "How to count nan values in a pandas DataFrame?", "body": "<p>What is the best way to account for (not a number) nan values in a pandas DataFrame?</p>\n\n<p>The following code:</p>\n\n<pre><code>import numpy as np\nimport pandas as pd\ndfd = pd.DataFrame([1, np.nan, 3, 3, 3, np.nan], columns=['a'])\ndfv = dfd.a.value_counts().sort_index()\nprint(\"nan: %d\" % dfv[np.nan].sum())\nprint(\"1: %d\" % dfv[1].sum())\nprint(\"3: %d\" % dfv[3].sum())\nprint(\"total: %d\" % dfv[:].sum())\n</code></pre>\n\n<p>Outputs:</p>\n\n<pre><code>nan: 0\n1: 1\n3: 3\ntotal: 4\n</code></pre>\n\n<p>While the desired output is:</p>\n\n<pre><code>nan: 2\n1: 1\n3: 3\ntotal: 6\n</code></pre>\n\n<p>I am using pandas 0.17 with Python 3.5.0 with Anaconda 2.4.0.</p>\n"}, {"tags": ["python", "matplotlib", "subplot"], "comments": [{"owner": {"reputation": 62045, "user_id": 1461210, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fa93b9461ed24899945403cae69e02ee?s=128&d=identicon&r=PG", "display_name": "ali_m", "link": "https://stackoverflow.com/users/1461210/ali-m"}, "edited": false, "score": 0, "creation_date": 1451508937, "post_id": 34537035, "comment_id": 56816130, "body": "What you&#39;re asking for doesn&#39;t make any sense. Each point in your line must be specified by both an x and a y coordinate. If you have different numbers of x and y coordinates then how can you know where to position each point in the line?"}, {"owner": {"reputation": 62045, "user_id": 1461210, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fa93b9461ed24899945403cae69e02ee?s=128&d=identicon&r=PG", "display_name": "ali_m", "link": "https://stackoverflow.com/users/1461210/ali-m"}, "edited": false, "score": 0, "creation_date": 1451509322, "post_id": 34537035, "comment_id": 56816315, "body": "It would help if you showed us what the dimensions of <code>Data_OBS_h</code> and <code>Data_OBS</code> are"}], "answers": [{"tags": [], "owner": {"reputation": 71233, "user_id": 837534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f3782b004830f622e19029e5f7fc146?s=128&d=identicon&r=PG", "display_name": "Mike M&#252;ller", "link": "https://stackoverflow.com/users/837534/mike-m%c3%bcller"}, "is_accepted": true, "score": 0, "last_activity_date": 1451542872, "last_edit_date": 1451542872, "creation_date": 1451509910, "answer_id": 34537308, "question_id": 34537035, "link": "https://stackoverflow.com/questions/34537035/error-trying-to-plot-data-with-different-size-using-matplotlib/34537308#34537308", "title": "Error trying to Plot data with different size using Matplotlib", "body": "<p>Make sure this holds:</p>\n\n<pre><code>assert len(x1) == len(Data_OBS_h)\nassert len(x2) == len(Data_OBS) \n</code></pre>\n\n<p>Then you should be able to plot what you want.</p>\n"}], "owner": {"reputation": 25, "user_id": 5563574, "user_type": "registered", "profile_image": "https://graph.facebook.com/887604724687644/picture?type=large", "display_name": "Sebasti&#225;n Felipe Otrola Bustos", "link": "https://stackoverflow.com/users/5563574/sebasti%c3%a1n-felipe-otrola-bustos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 34537308, "answer_count": 1, "score": 1, "last_activity_date": 1451542872, "creation_date": 1451508577, "last_edit_date": 1451513731, "question_id": 34537035, "link": "https://stackoverflow.com/questions/34537035/error-trying-to-plot-data-with-different-size-using-matplotlib", "title": "Error trying to Plot data with different size using Matplotlib", "body": "<p>I'm trying to plot two variables for several years. The first variable is measured every hour, and the second is measured every 24 hours. But both correspond to the same period. I'm using the following code:</p>\n\n<pre><code>x1= np.arange(0,129392)\nx2=np.arange(0,129392,24) \nfig_1,ax1 = plt.subplots()\nax1.plot(x1,Data_OBS_h,'k',marker='o',linestyle=' ',label='PM10-1h',linewidth=1.5)\nax1.plot(x2,Data_OBS,'r',linestyle='-',label='PM10-24h',linewidth=1.5)**\nax1.tick_params(axis='x', labelsize=15)\nax1.tick_params(axis='y', labelsize=15)\nfig_1.savefig(Titles[i]+'.png')\n</code></pre>\n\n<p>I've made a secondary axis with values like 0,24,48,..But I'm getting the following error:</p>\n\n<pre><code>ValueError: x and y must have same first dimension.\n</code></pre>\n\n<p>Someone know how to fix this? In addition, I need to use <code>plt.subplots()</code> to be able to change size of <code>tickmarks</code>.</p>\n\n<p>Thank you very much,\nAll the best,\nSebasti\u00e1n.</p>\n"}, {"tags": ["python", "pandas", "matplotlib"], "comments": [{"owner": {"reputation": 4923, "user_id": 4601386, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4L6cUyO_qbs/AAAAAAAAAAI/AAAAAAAAEnY/wEBT7GB8tv8/photo.jpg?sz=128", "display_name": "tglaria", "link": "https://stackoverflow.com/users/4601386/tglaria"}, "edited": false, "score": 0, "creation_date": 1451509152, "post_id": 34537027, "comment_id": 56816243, "body": "Not uure if it works with pandas, but in pyplot you use <code>linewidth=2.0</code> <a href=\"http://matplotlib.org/users/pyplot_tutorial.html\" rel=\"nofollow noreferrer\">matplotlib.org/users/pyplot_tutorial.html</a>"}], "answers": [{"tags": [], "owner": {"reputation": 86481, "user_id": 2411802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/RA92x.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2411802/alexander"}, "is_accepted": false, "score": 13, "last_activity_date": 1451509054, "creation_date": 1451509054, "answer_id": 34537136, "question_id": 34537027, "link": "https://stackoverflow.com/questions/34537027/how-does-one-make-lines-thicker-in-pandas-subplots/34537136#34537136", "title": "how does one make lines thicker in pandas subplots", "body": "<p>Specify a line width (<code>lw</code>) parameter:</p>\n\n<pre><code>df_3.plot(ax=target3, lw=4)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/TUeBF.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/TUeBF.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 61, "user_id": 4065575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/029ff2d48f8d46d160ffa4e84b950088?s=128&d=identicon&r=PG&f=1", "display_name": "axm302", "link": "https://stackoverflow.com/users/4065575/axm302"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5971, "favorite_count": 1, "answer_count": 1, "score": 5, "last_activity_date": 1451512801, "creation_date": 1451508520, "last_edit_date": 1451512801, "question_id": 34537027, "link": "https://stackoverflow.com/questions/34537027/how-does-one-make-lines-thicker-in-pandas-subplots", "title": "how does one make lines thicker in pandas subplots", "body": "<p>I am using pandas to plot 3 subplots in a single figure. The code below accomplishes this. However, I am having trouble making the data lines in the subplots thicker. Anybody know how to do this? </p>\n\n<pre><code>## setup 3 dataframes\nt_index=pd.date_range('1/1/2000', periods=10);\ndf_1 = DataFrame(np.random.randn(10, 4), index=t_index, columns=['A', 'B', 'C', 'D']);\ndf_2 = DataFrame(np.random.randn(10, 4), index=t_index, columns=['E', 'F', 'G', 'H']);\ndf_3 = DataFrame(np.random.randn(10, 4), index=t_index, columns=['I', 'J', 'K', 'L']);\n\n##Setup Figure and add subplots\nfig, axes = plt.subplots(3, 1, figsize=(6, 6))\nplt.subplots_adjust(wspace=0.5, hspace=0.5);\ntarget1 = axes[0]\ntarget2 = axes[1]\ntarget3 = axes[2]\n\ndf_1.plot(ax=target1)\ndf_2.plot(ax=target2)\ndf_3.plot(ax=target3)\n</code></pre>\n"}, {"tags": ["python", "recursion"], "comments": [{"owner": {"reputation": 512, "user_id": 5059201, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/hes4w.jpg?s=128&g=1", "display_name": "Sam McCreery", "link": "https://stackoverflow.com/users/5059201/sam-mccreery"}, "edited": false, "score": 0, "creation_date": 1451508097, "post_id": 34536929, "comment_id": 56815724, "body": "Put the first line at the end. Functions must be defined before you call them in the file."}], "answers": [{"tags": [], "owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "is_accepted": true, "score": 2, "last_activity_date": 1451508176, "creation_date": 1451508176, "answer_id": 34536955, "question_id": 34536929, "link": "https://stackoverflow.com/questions/34536929/python-recursion-name-not-defined/34536955#34536955", "title": "Python recursion name not defined", "body": "<p>You need to put the call <em>after</em> defining the function:</p>\n\n<pre><code>def wanttodoagain()\n    print (\"Hi whats your name?\")\n    name = input ('')\n    print (\"Hi, {}\".format(name))\n    print (\"So, do you want to do this again?????\")\n    print (\"Y/N, it has to be capital\")\n    doagainanswer=input(\"\")\n    if doagainanswer==\"Y\":\n        wanttodoagain()\n    if doagainanswer==\"N\":\n        print (\"OK, bye\")\n\nwanttodoagain()\n</code></pre>\n\n<p>Only when the interpreter has executed the <code>def</code> compound statement does the name <code>wanttodoagain</code> exist.</p>\n\n<p>However, I'd not use recursion to ask for user feedback. Never underestimate the enthusiasm of your users; they only have to hit <code>Y</code> 1000 times for your program to hit the recursion limit. Just use a <code>while True</code> loop:</p>\n\n<pre><code>while True:\n    print (\"Hi whats your name?\")\n    name = input ('')\n    print (\"Hi, {}\".format(name))\n    print (\"So, do you want to do this again?????\")\n    print (\"Y/N, it has to be capital\")\n    doagainanswer=input(\"\")\n    if doagainanswer==\"N\":\n        print (\"OK, bye\")\n        break\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 301, "user_id": 5730673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce44af845a4aeddc7d3c42698e828796?s=128&d=identicon&r=PG&f=1", "display_name": "nikihub", "link": "https://stackoverflow.com/users/5730673/nikihub"}, "is_accepted": false, "score": 1, "last_activity_date": 1451508177, "creation_date": 1451508177, "answer_id": 34536958, "question_id": 34536929, "link": "https://stackoverflow.com/questions/34536929/python-recursion-name-not-defined/34536958#34536958", "title": "Python recursion name not defined", "body": "<p>You should first define the function before calling it. Now python interpreter doesn't know what is <code>wanttodoagain</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 9677, "user_id": 4244780, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KUXr1.jpg?s=128&g=1", "display_name": "Iron Fist", "link": "https://stackoverflow.com/users/4244780/iron-fist"}, "is_accepted": false, "score": 0, "last_activity_date": 1451508205, "creation_date": 1451508205, "answer_id": 34536970, "question_id": 34536929, "link": "https://stackoverflow.com/questions/34536929/python-recursion-name-not-defined/34536970#34536970", "title": "Python recursion name not defined", "body": "<p>You are calling your <code>wanttodoagain</code> function before you define it, just put the first line below function definition:</p>\n\n<pre><code>def wanttodoagain()\n    print (\"Hi whats your name?\")\n    name = input ('')\n    print (\"Hi, {}\".format(name))\n    print (\"So, do you want to do this again?????\")\n    print (\"Y/N, it has to be capital\")\n    doagainanswer=input(\"\")\n    if doagainanswer==\"Y\":\n        wanttodoagain()\n    if doagainanswer==\"N\":\n        print (\"OK, bye\")\n\n\nwanttodoagain()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 35, "user_id": 5673236, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Q8UiIyVqGYk/AAAAAAAAAAI/AAAAAAAAAD4/PgL5_WRF-nI/photo.jpg?sz=128", "display_name": "Phich Nguyen", "link": "https://stackoverflow.com/users/5673236/phich-nguyen"}, "edited": false, "score": 0, "creation_date": 1451582489, "post_id": 34536984, "comment_id": 56841344, "body": "I cant add and answer because everyone&#39;s answers are correct. Thank you for all your help!!!!! @Heinst Nearly everyone&#39;s answer&#39;s are mostly the same, so I don&#39;t know what to chose as the correct answer."}, {"owner": {"reputation": 7421, "user_id": 1382766, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/0620b7fe3d25636d899cc2a11f130fa2?s=128&d=identicon&r=PG", "display_name": "heinst", "link": "https://stackoverflow.com/users/1382766/heinst"}, "reply_to_user": {"reputation": 35, "user_id": 5673236, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Q8UiIyVqGYk/AAAAAAAAAAI/AAAAAAAAAD4/PgL5_WRF-nI/photo.jpg?sz=128", "display_name": "Phich Nguyen", "link": "https://stackoverflow.com/users/5673236/phich-nguyen"}, "edited": false, "score": 0, "creation_date": 1451582533, "post_id": 34536984, "comment_id": 56841361, "body": "@PhichNguyen then accept the one you think is the best answer"}], "tags": [], "owner": {"reputation": 7421, "user_id": 1382766, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/0620b7fe3d25636d899cc2a11f130fa2?s=128&d=identicon&r=PG", "display_name": "heinst", "link": "https://stackoverflow.com/users/1382766/heinst"}, "is_accepted": false, "score": 0, "last_activity_date": 1451508290, "creation_date": 1451508290, "answer_id": 34536984, "question_id": 34536929, "link": "https://stackoverflow.com/questions/34536929/python-recursion-name-not-defined/34536984#34536984", "title": "Python recursion name not defined", "body": "<p>The function call should be after the function is defined. You can also put the prompts for user input inside your input call. This should work for you:</p>\n\n<pre><code>def wanttodoagain():\n    name = input(\"Hi whats your name?\")\n    print (\"Hi, {}\".format(name))\n    print (\"So, do you want to do this again?????\")\n    doagainanswer = input(\"Y/N, it has to be capital\")\n    if doagainanswer == \"Y\":\n        wanttodoagain()\n    if doagainanswer == \"N\":\n        print (\"OK, bye\")\nwanttodoagain()\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 5673236, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Q8UiIyVqGYk/AAAAAAAAAAI/AAAAAAAAAD4/PgL5_WRF-nI/photo.jpg?sz=128", "display_name": "Phich Nguyen", "link": "https://stackoverflow.com/users/5673236/phich-nguyen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1528, "favorite_count": 0, "accepted_answer_id": 34536955, "answer_count": 4, "score": -1, "last_activity_date": 1494167452, "creation_date": 1451508010, "last_edit_date": 1494167452, "question_id": 34536929, "link": "https://stackoverflow.com/questions/34536929/python-recursion-name-not-defined", "title": "Python recursion name not defined", "body": "<p>So I am making a script that looks like this,</p>\n\n<pre><code>wanttodoagain()\ndef wanttodoagain()\n    print (\"Hi whats your name?\")\n    name = input ('')\n    print (\"Hi, {}\".format(name))\n    print (\"So, do you want to do this again?????\")\n    print (\"Y/N, it has to be capital\")\n    doagainanswer=input(\"\")\n    if doagainanswer==\"Y\":\n        wanttodoagain()\n    if doagainanswer==\"N\":\n        print (\"OK, bye\")\n</code></pre>\n\n<p>I want the recursion to start automatically because when I close it and run it from my desktop it shows a window not the python shell that closes automatically and does not wait for the user to enter \"wanttodoagain()\".\nWhen I run it in python shell, it says:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"C:/Users/Jason Nguyen/Desktop/askname.py\", line 1, in &lt;module&gt;\n    wanttodoagain()\nNameError: name 'wanttodoagain()' is not defined\n</code></pre>\n"}, {"tags": ["python", "mysql", "homebrew", "mysql-python"], "comments": [{"owner": {"reputation": 7659, "user_id": 126795, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/935f4295e686df4ed1894dd475fad77f?s=128&d=identicon&r=PG", "display_name": "PhoebeB", "link": "https://stackoverflow.com/users/126795/phoebeb"}, "edited": false, "score": 3, "creation_date": 1452079812, "post_id": 34536914, "comment_id": 57009118, "body": "Followed same confused path - important difference is I think that the latest brew install gives libmysqlclient.20.dylib not 18 and reinstalling MySQL suggested by Aplusplus answered it for me too."}, {"owner": {"reputation": 5210, "user_id": 1141095, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/14e65b489bf1aefb20286ea15302f032?s=128&d=identicon&r=PG", "display_name": "ezdazuzena", "link": "https://stackoverflow.com/users/1141095/ezdazuzena"}, "edited": false, "score": 0, "creation_date": 1488188204, "post_id": 34536914, "comment_id": 72104117, "body": "for me <code>pip install mysqlclient</code> solved the problem"}], "answers": [{"comments": [{"owner": {"reputation": 1544, "user_id": 3020799, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KVPDN.jpg?s=128&g=1", "display_name": "Yeray Diaz Diaz", "link": "https://stackoverflow.com/users/3020799/yeray-diaz-diaz"}, "edited": false, "score": 16, "creation_date": 1453826234, "post_id": 34627734, "comment_id": 57764664, "body": "thanks, that helped but I also had to use <code>pip install --no-binary MySQL-python MySQL-python</code> to avoid using a cached wheel"}, {"owner": {"reputation": 9518, "user_id": 907575, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1b324e4900e79878eb518c1263b41795?s=128&d=identicon&r=PG", "display_name": "Piotr Migdal", "link": "https://stackoverflow.com/users/907575/piotr-migdal"}, "edited": false, "score": 2, "creation_date": 1455365396, "post_id": 34627734, "comment_id": 58464186, "body": "Only python 2. Python 3 is not yet supported. :/"}, {"owner": {"reputation": 1217, "user_id": 2193381, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/643fd74e5365aaaf1717eabf643f5162?s=128&d=identicon&r=PG&f=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/2193381/vishal"}, "edited": false, "score": 3, "creation_date": 1455577969, "post_id": 34627734, "comment_id": 58542195, "body": "I have tried uninstalling and re-installing mysql-python and am still having the same problem. Any other thoughts on how to debug/fix the problem?"}, {"owner": {"reputation": 275, "user_id": 3214411, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0a705a02c7de5b135d90f7c08a343fa9?s=128&d=identicon&r=PG", "display_name": "equivalentideas", "link": "https://stackoverflow.com/users/3214411/equivalentideas"}, "edited": false, "score": 0, "creation_date": 1475392803, "post_id": 34627734, "comment_id": 66920094, "body": "I was having this same error in Ruby + Rails after updating my local OS. I uninstalled the gem (<code>gem uninstall mysql2</code>) and in my case reinstalled using bundler (<code>bundle install</code>), but you could just <code>gem install mysql2</code>."}, {"owner": {"reputation": 113, "user_id": 559282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d76011ac5b647badc5fe06c7e39beac0?s=128&d=identicon&r=PG", "display_name": "Jorge Maroto", "link": "https://stackoverflow.com/users/559282/jorge-maroto"}, "edited": false, "score": 0, "creation_date": 1484214340, "post_id": 34627734, "comment_id": 70421069, "body": "With typical pip install didn&#39;t work for me, but with --no-binary flag, it works! :D"}, {"owner": {"reputation": 1568, "user_id": 3521714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c74897c109181b72bc1ab3e1e1c6c453?s=128&d=identicon&r=PG&f=1", "display_name": "hectorcanto", "link": "https://stackoverflow.com/users/3521714/hectorcanto"}, "edited": false, "score": 0, "creation_date": 1488885942, "post_id": 34627734, "comment_id": 72420386, "body": "It dit not worked for me until I used <code>pip install --no-cache-dir MYSQL-python</code>."}, {"owner": {"reputation": 722, "user_id": 431387, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/466921e88bb7ba90ff6acb63a263cb92?s=128&d=identicon&r=PG", "display_name": "N V", "link": "https://stackoverflow.com/users/431387/n-v"}, "reply_to_user": {"reputation": 1544, "user_id": 3020799, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KVPDN.jpg?s=128&g=1", "display_name": "Yeray Diaz Diaz", "link": "https://stackoverflow.com/users/3020799/yeray-diaz-diaz"}, "edited": false, "score": 0, "creation_date": 1506554829, "post_id": 34627734, "comment_id": 79872750, "body": "WOW okay tried for so long and @YerayDiazDiaz&#39;s answer finally worked for me!  Thanks so much @YerayDiazDiaz!!!  We should update the answer to show that."}, {"owner": {"reputation": 14648, "user_id": 123033, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c94743fafb1114f9742bf7a16a2e11d7?s=128&d=identicon&r=PG", "display_name": "Dave Everitt", "link": "https://stackoverflow.com/users/123033/dave-everitt"}, "edited": false, "score": 0, "creation_date": 1525096676, "post_id": 34627734, "comment_id": 87220912, "body": "mysqlclient has taken over from MySQL-python - <code>pip install mysqlclient</code> did the job for me on the new install of a project that formerly used MySQL-python (which hasn&#39;t been updated for years)."}], "tags": [], "owner": {"reputation": 506, "user_id": 2649824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0694cfadf2ffa6509a7ea764c5b9e3e?s=128&d=identicon&r=PG", "display_name": "Aplusplus", "link": "https://stackoverflow.com/users/2649824/aplusplus"}, "is_accepted": false, "score": 32, "last_activity_date": 1506556824, "last_edit_date": 1506556824, "creation_date": 1452065089, "answer_id": 34627734, "question_id": 34536914, "link": "https://stackoverflow.com/questions/34536914/pythons-mysqldb-can-t-find-libmysqlclient-dylib-with-homebrewed-mysql/34627734#34627734", "title": "Python&#39;s MySQLdb can\u2019t find libmysqlclient.dylib with Homebrewed MySQL", "body": "<p>I also encountered this problem. I uninstalled the MySQL-python, and then installed it. </p>\n\n<pre><code>pip uninstall MySQL-python\npip install MySQL-python\n</code></pre>\n\n<hr>\n\n<p><strong>Update (based on comments)</strong></p>\n\n<p>In some cases, you may need to perform the second (install) step in the following manner:</p>\n\n<pre><code>pip install --no-binary MySQL-python MySQL-python\n</code></pre>\n\n<p>The <a href=\"https://pip.pypa.io/en/stable/reference/pip_install/#install-no-binary\" rel=\"noreferrer\"><code>no-binary</code></a> option is so that pip builds it fresh and links to the correct library:</p>\n\n<blockquote>\n  <p><code>--no-binary &lt;format_control&gt;</code></p>\n  \n  <p>Do not use binary packages. Can be supplied multiple times, and each time adds to the existing value. Accepts either :all: to disable all binary packages, :none: to empty the set, or one or more package names with commas between them. Note that some packages are tricky to compile and may fail to install when this option is used on them.</p>\n</blockquote>\n\n<p><strong>NB:</strong> Note, that <code>MySQL-python</code> needs to be mentioned <a href=\"https://superuser.com/a/998313\">twice</a>. As mentioned above, the first occurrence is the name of the package to apply the <code>no-binary</code> option to, the second specifies the package to install.</p>\n"}, {"tags": [], "owner": {"reputation": 111, "user_id": 5135037, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153469118973221/picture?type=large", "display_name": "Dar Ben-Tov", "link": "https://stackoverflow.com/users/5135037/dar-ben-tov"}, "is_accepted": false, "score": 9, "last_activity_date": 1452162179, "last_edit_date": 1452162179, "creation_date": 1452161727, "answer_id": 34652511, "question_id": 34536914, "link": "https://stackoverflow.com/questions/34536914/pythons-mysqldb-can-t-find-libmysqlclient-dylib-with-homebrewed-mysql/34652511#34652511", "title": "Python&#39;s MySQLdb can\u2019t find libmysqlclient.dylib with Homebrewed MySQL", "body": "<p>If encountered a problem with lacking of <code>libmysqlclient.18.dylib</code>:</p>\n\n<ol>\n<li><p>download mysql 5.6 from official link: <a href=\"https://dev.mysql.com/downloads/mysql/\" rel=\"noreferrer\">https://dev.mysql.com/downloads/mysql/</a></p></li>\n<li><p>install it</p></li>\n<li><p>in terminal - <code>mdfind libmysqlclient | grep .18.</code></p></li>\n<li><p>copy the output</p></li>\n<li><p><code>sudo ln -s [the output from previous command] /usr/local/lib/libmysqlclient.18.dylib</code></p></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 1051, "user_id": 183880, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bf428b9f5f20932abd464d124cea2335?s=128&d=identicon&r=PG", "display_name": "JayNCoke", "link": "https://stackoverflow.com/users/183880/jayncoke"}, "edited": false, "score": 1, "creation_date": 1481057057, "post_id": 35379868, "comment_id": 69217729, "body": "Definitely helped me with my setup: Mac OS X, brew installed python and mysql."}, {"owner": {"reputation": 7472, "user_id": 440805, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0ab821b3b70b28ec6e507b5424b014f7?s=128&d=identicon&r=PG", "display_name": "mkoistinen", "link": "https://stackoverflow.com/users/440805/mkoistinen"}, "edited": false, "score": 0, "creation_date": 1511560813, "post_id": 35379868, "comment_id": 81915798, "body": "This should be the accepted answer! Big question is, why after <b>more than 18 months is the develop version not yet released?!?</b>"}], "tags": [], "owner": {"reputation": 9518, "user_id": 907575, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1b324e4900e79878eb518c1263b41795?s=128&d=identicon&r=PG", "display_name": "Piotr Migdal", "link": "https://stackoverflow.com/users/907575/piotr-migdal"}, "is_accepted": false, "score": 16, "last_activity_date": 1455366749, "creation_date": 1455366749, "answer_id": 35379868, "question_id": 34536914, "link": "https://stackoverflow.com/questions/34536914/pythons-mysqldb-can-t-find-libmysqlclient-dylib-with-homebrewed-mysql/35379868#35379868", "title": "Python&#39;s MySQLdb can\u2019t find libmysqlclient.dylib with Homebrewed MySQL", "body": "<p>You need to use dev version of <code>mysqlclient</code>:</p>\n\n<pre><code>pip install git+https://github.com/PyMySQL/mysqlclient-python.git@master\n</code></pre>\n\n<p>Before I had the lastest PyPI version (1.3.7) on Python 3.4 and it was searching for <code>libmysqlclient.18.dylib</code> (from MySQL 5.6) whereas I had only <code>libmysqlclient.20.dylib</code>(from MySQL 5.7).</p>\n\n<p>If you use Python 3, <code>MySQL-python</code> is not an option (and <code>mysqlclient</code> is its newer version). </p>\n"}, {"comments": [{"owner": {"reputation": 14648, "user_id": 123033, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c94743fafb1114f9742bf7a16a2e11d7?s=128&d=identicon&r=PG", "display_name": "Dave Everitt", "link": "https://stackoverflow.com/users/123033/dave-everitt"}, "edited": false, "score": 1, "creation_date": 1525096504, "post_id": 45255268, "comment_id": 87220805, "body": "Yep. That&#39;s the issue! All over the internet there&#39;s &quot;MySQL-python&quot; as the way to go, but the commits tell the real story."}, {"owner": {"reputation": 1477, "user_id": 860715, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8V624.png?s=128&g=1", "display_name": "Marc", "link": "https://stackoverflow.com/users/860715/marc"}, "edited": false, "score": 1, "creation_date": 1545846677, "post_id": 45255268, "comment_id": 94710851, "body": "Mojave on OSX is/was problematic. Use of <code>brew install mysql-connector-c</code> installed libmysqlclient.18.dylib where it was expected.  Various &quot;updated&quot; software had <code>libmysqlclient.21.dylib</code> (and others) via brew and native installs. I opted to get the &quot;18&quot; version on system as MySQL on OSX breaks easily (10 years running) so opt for understandable, reversible, and logical fixes.  It is important to mention that Python+MySQL is turbulent on OSX, as is Python+OSX historically.  Not even (PIPENV like) virtual env will protect the user/app from volatility, local drivers/assets can fail too."}], "tags": [], "owner": {"reputation": 415, "user_id": 2705847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mDiCe.jpg?s=128&g=1", "display_name": "Ranel Padon", "link": "https://stackoverflow.com/users/2705847/ranel-padon"}, "is_accepted": true, "score": 8, "last_activity_date": 1500735548, "last_edit_date": 1500735548, "creation_date": 1500731190, "answer_id": 45255268, "question_id": 34536914, "link": "https://stackoverflow.com/questions/34536914/pythons-mysqldb-can-t-find-libmysqlclient-dylib-with-homebrewed-mysql/45255268#45255268", "title": "Python&#39;s MySQLdb can\u2019t find libmysqlclient.dylib with Homebrewed MySQL", "body": "<p>This solved my issue on my case:</p>\n\n<pre><code>$ pip uninstall MySQL-python\n$ pip install mysqlclient\n</code></pre>\n\n<p><code>MySQL-python</code> turned out to be very old (last commit was 7 years ago). <code>mysqlclient</code> is the modern version of it, with lots of improvements and bug fixes.</p>\n"}], "owner": {"reputation": 14648, "user_id": 123033, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c94743fafb1114f9742bf7a16a2e11d7?s=128&d=identicon&r=PG", "display_name": "Dave Everitt", "link": "https://stackoverflow.com/users/123033/dave-everitt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13231, "favorite_count": 12, "accepted_answer_id": 45255268, "answer_count": 4, "score": 18, "last_activity_date": 1588599622, "creation_date": 1451507930, "last_edit_date": 1592644375, "question_id": 34536914, "link": "https://stackoverflow.com/questions/34536914/pythons-mysqldb-can-t-find-libmysqlclient-dylib-with-homebrewed-mysql", "title": "Python&#39;s MySQLdb can\u2019t find libmysqlclient.dylib with Homebrewed MySQL", "body": "<h1>MySQL and Python installed with Homebrew</h1>\n<p>I installed MySQL and Python with Homebrew on OS X 10.10.5 Yosemite. My Python 2.7 is at <code> python -&gt; ../Cellar/python/2.7.9/bin/python</code> with a symlink to it at <code>/usr/local/bin/python</code>.</p>\n<p>In <code>/usr/local/bin</code> there is a symlink:<br />\n<code>mysql -&gt; ../Cellar/mysql/5.7.9/bin/mysql</code></p>\n<h2>The error</h2>\n<p>In the Python shell:</p>\n<pre><code>&gt;&gt;&gt; import MySQLdb\nTraceback (most recent call last):\n  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;\n  File &quot;/usr/local/lib/python2.7/site-packages/MySQLdb/__init__.py&quot;, line 19, in &lt;module&gt;\n    import _mysql\nImportError: dlopen(/usr/local/lib/python2.7/site-packages/_mysql.so, 2): Library not loaded: /usr/local/lib/libmysqlclient.18.dylib\n  Referenced from: /usr/local/lib/python2.7/site-packages/_mysql.so\n  Reason: image not found\n</code></pre>\n<p>So I tried:<br />\n<code>$ sudo unlink /usr/local/lib/libmysqlclient.18.dylib</code></p>\n<p>followed by:<br />\n<code>DYLD_LIBRARY_PATH=/usr/local/mysql/lib/:$DYLD_LIBRARY_PATH</code></p>\n<p>and then (desperation over reason):<br />\n<code>$ export DYLD_LIBRARY_PATH=/usr/local/Cellar/mysql/5.7.9/lib</code></p>\n<p>But in both cases <code>import MySQLdb</code> still tried to import <code>libmysqlclient.18.dylib</code>.</p>\n<p>Then I tried:<br />\n<code>$ pip install -U MySQL-python</code>\nand got:\n<code>Requirement already up-to-date: MySQL-python in /usr/local/lib/python2.7/site-packages</code></p>\n<h2>Existing answers</h2>\n<p>Many <a href=\"https://stackoverflow.com/questions/4546698/library-not-loaded-libmysqlclient-16-dylib-error-when-trying-to-run-rails-serv\">answers</a> <a href=\"https://stackoverflow.com/questions/7375199/python-brew-and-mysqldb\">to this</a> <a href=\"https://stackoverflow.com/questions/4559699/python-mysqldb-and-library-not-loaded-libmysqlclient-16-dylib\">problem</a> <a href=\"https://stackoverflow.com/questions/6383310/python-mysqldb-library-not-loaded-libmysqlclient-18-dylib\">on SO</a> suggest manually making an explicit symlink to the library with a version number (in my case <code>libmysqlclient.20.dylib</code>). However, this seems crude and not future-proof, given the existing symlinks:</p>\n<p>in <code>/usr/local/lib</code> there is<br />\n<code>libmysqlclient.dylib -&gt; ../Cellar/mysql/5.7.9/lib/libmysqlclient.dylib</code></p>\n<p>and in <code>/usr/local/Cellar/mysql/5.7.9/lib</code> we find:<br />\n<code>libmysqlclient.20.dylib</code></p>\n<p>with a symlink in the same directory to it:\n<code>libmysqlclient.dylib -&gt; libmysqlclient.20.dylib</code></p>\n<h2>How to make Python forget <code>libmysqlclient.18.dylib</code>?</h2>\n<p>So how can I get Python to forget <code>/usr/local/lib/libmysqlclient.18.dylib</code> and follow the correct symlink in in <code>/usr/local/lib</code> to <code>libmysqlclient.dylib</code>, without manually adding yet another symlink?</p>\n"}, {"tags": ["python", "python-3.x", "urllib"], "comments": [{"owner": {"reputation": 37127, "user_id": 4495081, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/OuWYd.jpg?s=128&g=1", "display_name": "Dan Cornilescu", "link": "https://stackoverflow.com/users/4495081/dan-cornilescu"}, "edited": false, "score": 0, "creation_date": 1451509250, "post_id": 34536855, "comment_id": 56816288, "body": "Your url is incorrect : replace \\ with /."}, {"owner": {"reputation": 16285, "user_id": 425313, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2fd9754b62b3a6953874f4ef42978e4d?s=128&d=identicon&r=PG", "display_name": "Brad Koch", "link": "https://stackoverflow.com/users/425313/brad-koch"}, "edited": false, "score": 0, "creation_date": 1451513813, "post_id": 34536855, "comment_id": 56818389, "body": "As simple an error as this may be, I can easily envision a scenario where this typographical error and its associated exception could be useful for a future reader.  Voting to reopen."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 5732042, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-9H-XkQGD4Pw/AAAAAAAAAAI/AAAAAAAAB6M/_PyREeMWlMM/photo.jpg?sz=128", "display_name": "Yousuf Abbas", "link": "https://stackoverflow.com/users/5732042/yousuf-abbas"}, "edited": false, "score": 0, "creation_date": 1451510806, "post_id": 34536884, "comment_id": 56817046, "body": "Thx alot you solved my problem.I was stuck on it for 2 days."}], "tags": [], "owner": {"reputation": 7421, "user_id": 1382766, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/0620b7fe3d25636d899cc2a11f130fa2?s=128&d=identicon&r=PG", "display_name": "heinst", "link": "https://stackoverflow.com/users/1382766/heinst"}, "is_accepted": true, "score": 2, "last_activity_date": 1451507790, "creation_date": 1451507790, "answer_id": 34536884, "question_id": 34536855, "link": "https://stackoverflow.com/questions/34536855/urllib-request-error-no-host-given/34536884#34536884", "title": "urllib.request error!! no host given", "body": "<p>The url should be: <code>https://www.google.com</code>. Not <code>https:\\\\www.google.com</code>. Change the URL and it should work.</p>\n"}], "owner": {"reputation": 13, "user_id": 5732042, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-9H-XkQGD4Pw/AAAAAAAAAAI/AAAAAAAAB6M/_PyREeMWlMM/photo.jpg?sz=128", "display_name": "Yousuf Abbas", "link": "https://stackoverflow.com/users/5732042/yousuf-abbas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3441, "favorite_count": 1, "closed_date": 1451512613, "accepted_answer_id": 34536884, "answer_count": 1, "score": 1, "last_activity_date": 1451508561, "creation_date": 1451507680, "last_edit_date": 1451508561, "question_id": 34536855, "link": "https://stackoverflow.com/questions/34536855/urllib-request-error-no-host-given", "closed_reason": "Not suitable for this site", "title": "urllib.request error!! no host given", "body": "<p>I am quite new to Python and am currently learning it.  I have this small code:</p>\n\n<pre><code>import urllib.request\n\nx = urllib.request.urlopen('https:\\\\www.google.com')\n\nprint(x.read())\n</code></pre>\n\n<p>When I run it Python shouts out this error:</p>\n\n<pre><code>Traceback (most recent call last):\nFile \"C:/Users/The Kids/Desktop/urllib.py\", line 3, in &lt;module&gt;\nx = urllib.request.urlopen('https:\\\\www.google.com')\nFile \"C:\\Program Files\\Python35-32\\lib\\urllib\\request.py\", line 162, in                    \nurlopen\nreturn opener.open(url, data, timeout)\nFile \"C:\\Program Files\\Python35-32\\lib\\urllib\\request.py\", line 463, in open\nreq = meth(req)\nFile \"C:\\Program Files\\Python35-32\\lib\\urllib\\request.py\", line 1163, in             \ndo_request_\nraise URLError('no host given')\nurllib.error.URLError: &lt;urlopen error no host given&gt;\n</code></pre>\n\n<p>Could I please get help with this?</p>\n"}, {"tags": ["python", "csv", "pandas", "apache-spark", "ibm-cloud"], "comments": [{"owner": {"reputation": 280325, "user_id": 1560062, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7c5027e3046fed86e8e34b4fa0e6246c?s=128&d=identicon&r=PG", "display_name": "zero323", "link": "https://stackoverflow.com/users/1560062/zero323"}, "edited": false, "score": 0, "creation_date": 1451507892, "post_id": 34536854, "comment_id": 56815617, "body": "Pandas reader supports only local filesystems. Why do you need this?"}, {"owner": {"reputation": 43, "user_id": 5732046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f056a349b023b109a4989fb49fd284c?s=128&d=identicon&r=PG&f=1", "display_name": "subiman", "link": "https://stackoverflow.com/users/5732046/subiman"}, "reply_to_user": {"reputation": 280325, "user_id": 1560062, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7c5027e3046fed86e8e34b4fa0e6246c?s=128&d=identicon&r=PG", "display_name": "zero323", "link": "https://stackoverflow.com/users/1560062/zero323"}, "edited": false, "score": 0, "creation_date": 1451509667, "post_id": 34536854, "comment_id": 56816530, "body": "It relates to a big data analytics course project and demonstrating the use of Spark/Bluemix and map/reduce is a requirement.  Even though the file starts out on a local file system - I have to process it in Spark/Ipython."}, {"owner": {"reputation": 280325, "user_id": 1560062, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7c5027e3046fed86e8e34b4fa0e6246c?s=128&d=identicon&r=PG", "display_name": "zero323", "link": "https://stackoverflow.com/users/1560062/zero323"}, "edited": false, "score": 0, "creation_date": 1451509759, "post_id": 34536854, "comment_id": 56816568, "body": "Just skip Pandas and load data directly to Spark: <a href=\"http://stackoverflow.com/q/28782940/1560062\">stackoverflow.com/q/28782940/1560062</a>"}, {"owner": {"reputation": 43, "user_id": 5732046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f056a349b023b109a4989fb49fd284c?s=128&d=identicon&r=PG&f=1", "display_name": "subiman", "link": "https://stackoverflow.com/users/5732046/subiman"}, "reply_to_user": {"reputation": 280325, "user_id": 1560062, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7c5027e3046fed86e8e34b4fa0e6246c?s=128&d=identicon&r=PG", "display_name": "zero323", "link": "https://stackoverflow.com/users/1560062/zero323"}, "edited": false, "score": 0, "creation_date": 1451510121, "post_id": 34536854, "comment_id": 56816735, "body": "But then I miss out on all the pre canned data analysis capabilities of pandas dataframes"}, {"owner": {"reputation": 280325, "user_id": 1560062, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7c5027e3046fed86e8e34b4fa0e6246c?s=128&d=identicon&r=PG", "display_name": "zero323", "link": "https://stackoverflow.com/users/1560062/zero323"}, "edited": false, "score": 0, "creation_date": 1451510408, "post_id": 34536854, "comment_id": 56816868, "body": "Spark and Pandas are two completely different worlds. If your requirement is Spark and distributed processing then Pandas won&#39;t work. Running Pandas in the same interpreter doesn&#39;t make it distributed."}, {"owner": {"reputation": 43, "user_id": 5732046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f056a349b023b109a4989fb49fd284c?s=128&d=identicon&r=PG&f=1", "display_name": "subiman", "link": "https://stackoverflow.com/users/5732046/subiman"}, "edited": false, "score": 0, "creation_date": 1451512477, "post_id": 34536854, "comment_id": 56817789, "body": "I managed to make some progress with .toDF() on the file loaded with sc.textfile.  I can  do some distributed processing on this and then convert to a Spark dataframe and then toPandas() which has me back in familiar territory. I take your point about the two different purposes. Thanks"}], "answers": [{"tags": [], "owner": {"reputation": 791, "user_id": 4601054, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2ebdd23a8bc0b266752b77d594ac3ecb?s=128&d=identicon&r=PG&f=1", "display_name": "Sven Hafeneger", "link": "https://stackoverflow.com/users/4601054/sven-hafeneger"}, "is_accepted": true, "score": 3, "last_activity_date": 1451902298, "creation_date": 1451902298, "answer_id": 34588753, "question_id": 34536854, "link": "https://stackoverflow.com/questions/34536854/pandas-read-csv-in-spark-environment-ibm-bluemix/34588753#34588753", "title": "pandas.read_csv in Spark environment (IBM Bluemix)", "body": "<p>Once you have uploaded the CSV file to your Bluemix Object Storage, \nyou can read the CSV file using Spark directly:</p>\n\n<pre><code>data = sc.textFile(\"swift://notebooks.books/rtenews.csv\")\n</code></pre>\n\n<p>This is possible, because configurations have been done to enable this feature.</p>\n\n<p>If you try to read the CSV file with the following code using <code>pandas</code>:</p>\n\n<pre><code>import pandas as pd \ndata = pd.read_csv('swift://notebooks.books/rtenews.csv')\n</code></pre>\n\n<p>This will not work, because <code>pandas</code> do not support direct access of Bluemix Object Storage. Have a look at the API documentation of <code>pandas.read_csv()</code>: <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.read_csv.html\" rel=\"nofollow\">http://pandas.pydata.org/pandas-docs/stable/generated/pandas.read_csv.html</a>\nIt supports a few valid URL schemes, only.</p>\n\n<p>However, it is possible to read a CSV file on you Bluemix Object Storage as <code>StringIO</code> object into <code>pandas.DataFrame</code>. </p>\n\n<p>You can find the instructions in \"Precipitation Analysis\" sample notebook: </p>\n\n<ul>\n<li>Create new notebook from Samples: New Notebook -> Samples Tab -> Precipitation Analysis</li>\n<li>HTML export: <a href=\"https://console.ng.bluemix.net/data/notebooks/samples/Precipitation%20Analysis\" rel=\"nofollow\">https://console.ng.bluemix.net/data/notebooks/samples/Precipitation%20Analysis</a> </li>\n<li>Video: <a href=\"https://www.youtube.com/watch?v=H1oNZwG3tCk\" rel=\"nofollow\">https://www.youtube.com/watch?v=H1oNZwG3tCk</a></li>\n</ul>\n\n<p>Use this approach not for large CSV files!</p>\n"}], "owner": {"reputation": 43, "user_id": 5732046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f056a349b023b109a4989fb49fd284c?s=128&d=identicon&r=PG&f=1", "display_name": "subiman", "link": "https://stackoverflow.com/users/5732046/subiman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1190, "favorite_count": 0, "accepted_answer_id": 34588753, "answer_count": 1, "score": 4, "last_activity_date": 1451902298, "creation_date": 1451507678, "last_edit_date": 1451518542, "question_id": 34536854, "link": "https://stackoverflow.com/questions/34536854/pandas-read-csv-in-spark-environment-ibm-bluemix", "title": "pandas.read_csv in Spark environment (IBM Bluemix)", "body": "<p>I'm using <code>IPython</code> in a <code>Spark/Bluemix</code> environment</p>\n\n<p>I have a csv uploaded to the the object store and I can read it ok using <code>sc.textfile</code> but I get <code>file does not exist</code> when I use <code>pandas pd.read_csv</code></p>\n\n<ol>\n<li><p><code>data = sc.textFile(\"swift://notebooks.books/rtenews.csv\")</code></p></li>\n<li><p><code>import pandas as pd</code>\n<code>data = pd.read_csv('swift://notebooks.books/rtenews.csv')</code></p></li>\n</ol>\n\n<p><code>IOError   File swift://notebooks.books/rtenews.csv does not exist</code></p>\n\n<p>Why is this?\nHow can I read a csv file to a <code>pandas</code> dataframe?</p>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 15290, "user_id": 1913824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7793dc1a1117c0583651f716630e2403?s=128&d=identicon&r=PG", "display_name": "Andrea Corbellini", "link": "https://stackoverflow.com/users/1913824/andrea-corbellini"}, "edited": false, "score": 0, "creation_date": 1451507848, "post_id": 34536811, "comment_id": 56815588, "body": "I your <code>Category</code> model, you should have an <code>author</code> field. In your <code>add_category</code> view, check <code>Category.objects.filter(author=request.user).exists()</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5659156"}, "reply_to_user": {"reputation": 15290, "user_id": 1913824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7793dc1a1117c0583651f716630e2403?s=128&d=identicon&r=PG", "display_name": "Andrea Corbellini", "link": "https://stackoverflow.com/users/1913824/andrea-corbellini"}, "edited": false, "score": 0, "creation_date": 1451507895, "post_id": 34536811, "comment_id": 56815621, "body": "oh yeah why didn&#39;t i think of that, let me try it"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5659156"}, "reply_to_user": {"reputation": 15290, "user_id": 1913824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7793dc1a1117c0583651f716630e2403?s=128&d=identicon&r=PG", "display_name": "Andrea Corbellini", "link": "https://stackoverflow.com/users/1913824/andrea-corbellini"}, "edited": false, "score": 0, "creation_date": 1451508015, "post_id": 34536811, "comment_id": 56815688, "body": "@AndreaCorbellini wait not sure about author field? hmmm.....let me upload my models.py"}, {"owner": {"reputation": 15290, "user_id": 1913824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7793dc1a1117c0583651f716630e2403?s=128&d=identicon&r=PG", "display_name": "Andrea Corbellini", "link": "https://stackoverflow.com/users/1913824/andrea-corbellini"}, "edited": false, "score": 0, "creation_date": 1451508311, "post_id": 34536811, "comment_id": 56815839, "body": "You have to add that field (a ForeignKey to User). If you show me your CategoryForm I can give you a step-by-step solution."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5659156"}, "reply_to_user": {"reputation": 15290, "user_id": 1913824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7793dc1a1117c0583651f716630e2403?s=128&d=identicon&r=PG", "display_name": "Andrea Corbellini", "link": "https://stackoverflow.com/users/1913824/andrea-corbellini"}, "edited": false, "score": 0, "creation_date": 1451508582, "post_id": 34536811, "comment_id": 56815961, "body": "@AndreaCorbellini I was just googling about author field, I edited forms.py. Thanks Andrea,"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5659156"}, "edited": false, "score": 0, "creation_date": 1451509845, "post_id": 34537203, "comment_id": 56816614, "body": "I think I get almost of them, I would&#39;ve never thought of using it like that...I get AttributeError: &#39;Settings&#39; object has no attribute &#39;Auth_USER_MODEL&#39; error tho,"}, {"owner": {"reputation": 15290, "user_id": 1913824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7793dc1a1117c0583651f716630e2403?s=128&d=identicon&r=PG", "display_name": "Andrea Corbellini", "link": "https://stackoverflow.com/users/1913824/andrea-corbellini"}, "edited": false, "score": 0, "creation_date": 1451509894, "post_id": 34537203, "comment_id": 56816635, "body": "@haloyoba: <code>AUTH</code> is uppercased"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5659156"}, "edited": false, "score": 0, "creation_date": 1451510369, "post_id": 34537203, "comment_id": 56816845, "body": "All of sudden i get OperationalError at /  no such column: main_category.author_id ....I tried to fix this it&#39;s not working do you know why? I&#39;ll upload where it&#39;s getting from, if you can take a look at it I would be appreciated"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5659156"}, "edited": false, "score": 0, "creation_date": 1451510474, "post_id": 34537203, "comment_id": 56816898, "body": "maybe I&#39;m getting this because I deleted my migration files ?? don&#39;t have any post....is that why"}, {"owner": {"reputation": 15290, "user_id": 1913824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7793dc1a1117c0583651f716630e2403?s=128&d=identicon&r=PG", "display_name": "Andrea Corbellini", "link": "https://stackoverflow.com/users/1913824/andrea-corbellini"}, "edited": false, "score": 0, "creation_date": 1451510549, "post_id": 34537203, "comment_id": 56816928, "body": "Whenever you change your models, you have to generate the migrations and run them"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5659156"}, "edited": false, "score": 0, "creation_date": 1451510625, "post_id": 34537203, "comment_id": 56816959, "body": "Yes ofc, I did make migrations, and migrate but then when I open the browser I get operationError"}, {"owner": {"reputation": 15290, "user_id": 1913824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7793dc1a1117c0583651f716630e2403?s=128&d=identicon&r=PG", "display_name": "Andrea Corbellini", "link": "https://stackoverflow.com/users/1913824/andrea-corbellini"}, "edited": false, "score": 0, "creation_date": 1451510820, "post_id": 34537203, "comment_id": 56817050, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/99346/discussion-between-andrea-corbellini-and-haloyoba\">continue this discussion in chat</a>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5659156"}, "edited": false, "score": 0, "creation_date": 1451515082, "post_id": 34537203, "comment_id": 56818939, "body": "Hey Andrea, are you there? I&#39;ve been having problem implementing thumbnail for a few days now, can you help me? I tried easy thumbnail/sorl thumbnail/imagekit none of them works <a href=\"http://stackoverflow.com/questions/34534578/ioerror-errno-2-no-such-file-or-directory-static-in-env-media-root-http-i-img?noredirect=1#comment56811691_34534578\" title=\"ioerror errno 2 no such file or directory static in env media root http i img\">stackoverflow.com/questions/34534578/&hellip;</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5659156"}, "edited": false, "score": 0, "creation_date": 1451600676, "post_id": 34537203, "comment_id": 56846699, "body": "Hello, after fixing it like you told me I&#39;m having trouble making new category page in admin page. Can you please help me with this?"}, {"owner": {"reputation": 15290, "user_id": 1913824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7793dc1a1117c0583651f716630e2403?s=128&d=identicon&r=PG", "display_name": "Andrea Corbellini", "link": "https://stackoverflow.com/users/1913824/andrea-corbellini"}, "edited": false, "score": 0, "creation_date": 1451642103, "post_id": 34537203, "comment_id": 56852967, "body": "@haloyoba: yes, please open a new question"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5659156"}, "edited": false, "score": 0, "creation_date": 1452057447, "post_id": 34537203, "comment_id": 56997873, "body": "Hello Andrea, do you mind taking a look at this post&lt;I&#39;ve been struggling for this for a while now&gt;; <a href=\"http://stackoverflow.com/questions/34520966/how-to-save-image-that-got-extracted?noredirect=1#comment56995309_34520966\" title=\"how to save image that got extracted\">stackoverflow.com/questions/34520966/&hellip;</a>"}], "tags": [], "owner": {"reputation": 15290, "user_id": 1913824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7793dc1a1117c0583651f716630e2403?s=128&d=identicon&r=PG", "display_name": "Andrea Corbellini", "link": "https://stackoverflow.com/users/1913824/andrea-corbellini"}, "is_accepted": true, "score": 0, "last_activity_date": 1451510523, "last_edit_date": 1451510523, "creation_date": 1451509410, "answer_id": 34537203, "question_id": 34536811, "link": "https://stackoverflow.com/questions/34536811/letting-a-user-create-only-one-post-and-saving-that-post-into-user-profile/34537203#34537203", "title": "Letting a user create only one post and saving that post into user profile", "body": "<p>You want each user to create at most one category. Therefore, first of all, you need to know whether a user has already created a category or not.</p>\n\n<p>There can be many ways to do so, what I'd recommend is to add an <code>author</code> field to your model:</p>\n\n<pre>\n<strong>from django.conf import settings</strong>\n\nclass Category(models.Model): \n    name = models.CharField(max_length=128, unique=True)\n    slug = models.CharField(max_length=100, unique=True)\n    <strong># Here I've chosen to use a ForeignKey, \n    # but you can also use a OneToOneField.\n    author = models.ForeignKey(settings.AUTH_USER_MODEL, unique=True)</strong>\n\n    ...\n</pre>\n\n<p>After adding the field, remember to <a href=\"https://docs.djangoproject.com/en/1.9/topics/migrations/\" rel=\"nofollow\">generate and run the migrations</a>:</p>\n\n<pre><code>$ python manage.py makemigrations\n$ python manage.py migrate\n</code></pre>\n\n<p>This new <code>author</code> field should be set automatically and must not appear in your form. Given that you are already using <code>fields = ['name']</code> (and you are not using <code>exclude</code>), you do not have to modify your <code>CategoryForm</code>.</p>\n\n<p>Now you have to modify your view so that it does two things:</p>\n\n<ol>\n<li>it sets the <code>author</code> field upon creation;</li>\n<li>it checks whether the current user has already created a <code>Category</code> or not.</li>\n</ol>\n\n<pre>\n@login_required\ndef add_category(request):\n    <strong>if Category.objects.filter(author=request.user).exists():\n        # This user has already created another category.\n        # Show him an error message, or redirect him to another page.\n        return ...</strong>\n\n    if request.method == 'POST':\n        <strong>category = Category(author=request.user)\n        form = CategoryForm(request.POST, instance=category)</strong>\n        if form.is_valid():\n            form.save(commit=True)\n            return index(request)\n\n    else:\n        form = CategoryForm()\n\n    return render(request, 'main/add_category.html', {'form':form})\n</pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5659156"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 34537203, "answer_count": 1, "score": 1, "last_activity_date": 1451510523, "creation_date": 1451507517, "last_edit_date": 1451510431, "question_id": 34536811, "link": "https://stackoverflow.com/questions/34536811/letting-a-user-create-only-one-post-and-saving-that-post-into-user-profile", "title": "Letting a user create only one post and saving that post into user profile", "body": "<p>I have an app that users can create a category page. I want to modify it to where user can only create one. And that page to be displayed in a profile page. I'm using userena for user-profile system. \nThing is I'm not sure how to restrict the user to create only one category page. and how that page is to be saved so the creator can have some access(like editing/deleting) </p>\n\n<p>This is my views.py:</p>\n\n<pre><code>@login_required\ndef add_category(request):\n    if request.method == 'POST':\n        form = CategoryForm(request.POST)\n        if form.is_valid():\n            form.save(commit=True)\n            return index(request)\n\n    else:\n        form = CategoryForm()\n\n    return render(request, 'main/add_category.html', {'form':form})\n</code></pre>\n\n<p>I can create edit/delete view just not sure how to let users to create one page only. </p>\n\n<p>Models.py</p>\n\n<pre><code>class Category(models.Model): \n    name = models.CharField(max_length=128, unique=True)\n    slug = models.CharField(max_length=100, unique=True)\n\n    def save(self, *args, **kwargs):\n        self.slug = uuslug(self.name,instance=self, max_length=100)\n        super(Category, self).save(*args, **kwargs)\n\n    def __unicode__(self): \n        return self.name\n\n    def get_absolute_url(self):\n        return 'category/%s' % (self.slug)\n</code></pre>\n\n<p>forms.py</p>\n\n<pre><code>class CategoryForm(forms.ModelForm):\n    name = forms.CharField(max_length=128, help_text=\"plz enter\")\n    likes = forms.IntegerField(widget=forms.HiddenInput(), initial=0)\n    slug = forms.CharField(widget=forms.HiddenInput, required=False)\n\n    class Meta:\n        model = Category\n        fields =('name',)\n</code></pre>\n\n<p>Edit: </p>\n\n<p>{{post.category}}</p>\n"}, {"tags": ["python", "pandas", "dataframe", "max"], "comments": [{"owner": {"reputation": 619481, "user_id": 2901002, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/hMDvl.jpg?s=128&g=1", "display_name": "jezrael", "link": "https://stackoverflow.com/users/2901002/jezrael"}, "edited": false, "score": 0, "creation_date": 1451507522, "post_id": 34536763, "comment_id": 56815377, "body": "what is recommended output?"}, {"owner": {"reputation": 1307, "user_id": 5092059, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh3.googleusercontent.com/-2gDHaTSOVvY/AAAAAAAAAAI/AAAAAAAAA3Y/D4DUb1wwEUc/photo.jpg?sz=128", "display_name": "vlmercado", "link": "https://stackoverflow.com/users/5092059/vlmercado"}, "reply_to_user": {"reputation": 619481, "user_id": 2901002, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/hMDvl.jpg?s=128&g=1", "display_name": "jezrael", "link": "https://stackoverflow.com/users/2901002/jezrael"}, "edited": false, "score": 0, "creation_date": 1451507628, "post_id": 34536763, "comment_id": 56815441, "body": "In[8]: df Out[7]:     A  B  C 0  1  3 0 1  2  2  0 2  3  1  2"}], "answers": [{"tags": [], "owner": {"reputation": 130643, "user_id": 3923281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CNpoa.jpg?s=128&g=1", "display_name": "Alex Riley", "link": "https://stackoverflow.com/users/3923281/alex-riley"}, "is_accepted": true, "score": 10, "last_activity_date": 1451507583, "creation_date": 1451507583, "answer_id": 34536823, "question_id": 34536763, "link": "https://stackoverflow.com/questions/34536763/python-max-function-fails-when-used-on-pandas-columns-and-integer-fails/34536823#34536823", "title": "Python max() function fails when used on pandas columns and integer fails", "body": "<p>You need to use <a href=\"http://docs.scipy.org/doc/numpy-1.10.0/reference/generated/numpy.maximum.html\" rel=\"noreferrer\"><code>np.maximum</code></a> to do element-wise maximum comparison:</p>\n\n<pre><code>&gt;&gt;&gt; np.maximum(df['A'] - df['B'], 0)\n0    0\n1    0\n2    2\ndtype: int64\n</code></pre>\n\n<p>The problem is <code>max</code> is that it essentially checks <code>(df['A'] - df['B']) &gt; 0</code>. This returns an array of boolean values (not a boolean), hence the error.</p>\n"}, {"comments": [{"owner": {"reputation": 1307, "user_id": 5092059, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh3.googleusercontent.com/-2gDHaTSOVvY/AAAAAAAAAAI/AAAAAAAAA3Y/D4DUb1wwEUc/photo.jpg?sz=128", "display_name": "vlmercado", "link": "https://stackoverflow.com/users/5092059/vlmercado"}, "edited": false, "score": 0, "creation_date": 1452749986, "post_id": 34536827, "comment_id": 57309278, "body": "I used your recommended np.where suggestion somewhere else.  Thanks."}], "tags": [], "owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "is_accepted": false, "score": 1, "last_activity_date": 1451507594, "creation_date": 1451507594, "answer_id": 34536827, "question_id": 34536763, "link": "https://stackoverflow.com/questions/34536763/python-max-function-fails-when-used-on-pandas-columns-and-integer-fails/34536827#34536827", "title": "Python max() function fails when used on pandas columns and integer fails", "body": "<p>Use <code>np.where</code>:</p>\n\n<pre><code>In [8]:\ndf['C'] = np.where((df['A'] - df['B'] &gt; 0), df['A'] - df['B'], 0)\ndf\n\nOut[8]:\n   A  B  C\n0  1  3  0\n1  2  2  0\n2  3  1  2\n</code></pre>\n\n<p>the in-built <code>max</code> function operates on scalars not array-like structures hence the error</p>\n"}, {"tags": [], "owner": {"reputation": 667, "user_id": 3990449, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/529578035278021c76bbe99117ed766a?s=128&d=identicon&r=PG&f=1", "display_name": "efajardo", "link": "https://stackoverflow.com/users/3990449/efajardo"}, "is_accepted": false, "score": 0, "last_activity_date": 1451508528, "creation_date": 1451508528, "answer_id": 34537028, "question_id": 34536763, "link": "https://stackoverflow.com/questions/34536763/python-max-function-fails-when-used-on-pandas-columns-and-integer-fails/34537028#34537028", "title": "Python max() function fails when used on pandas columns and integer fails", "body": "<p>You could also do apply:</p>\n\n<pre><code>df['C'] = df.apply(lambda row: max(row['A'] - row['B'], 0), axis=1)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 15117522, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/7657b7a776628e0beed06cebafa30ade?s=128&d=identicon&r=PG", "display_name": "user15117522", "link": "https://stackoverflow.com/users/15117522/user15117522"}, "is_accepted": false, "score": 0, "last_activity_date": 1612113634, "last_edit_date": 1612113634, "creation_date": 1612107136, "answer_id": 65980911, "question_id": 34536763, "link": "https://stackoverflow.com/questions/34536763/python-max-function-fails-when-used-on-pandas-columns-and-integer-fails/65980911#65980911", "title": "Python max() function fails when used on pandas columns and integer fails", "body": "<p>Old post, but instead of using the <code>max</code> function:</p>\n<pre><code>df.max()\n</code></pre>\n<p>try to apply <code>max-function</code> on the values helped:</p>\n<pre><code>df.values.max()\n</code></pre>\n"}], "owner": {"reputation": 1307, "user_id": 5092059, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh3.googleusercontent.com/-2gDHaTSOVvY/AAAAAAAAAAI/AAAAAAAAA3Y/D4DUb1wwEUc/photo.jpg?sz=128", "display_name": "vlmercado", "link": "https://stackoverflow.com/users/5092059/vlmercado"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4055, "favorite_count": 0, "accepted_answer_id": 34536823, "answer_count": 4, "score": 4, "last_activity_date": 1612113634, "creation_date": 1451507289, "last_edit_date": 1483362253, "question_id": 34536763, "link": "https://stackoverflow.com/questions/34536763/python-max-function-fails-when-used-on-pandas-columns-and-integer-fails", "title": "Python max() function fails when used on pandas columns and integer fails", "body": "<p>I'm trying to create a new pandas dataframe column by subtracting an existing dataframe column column from another. However, if the result is a negative number, the new column value should be set to zero.</p>\n\n<pre><code>import pandas as pd\ndata = {'A': [1,2,3], 'B': [3,2,1]}\ndf = pd.DataFrame(data)\n\nIn [4]: df\nOut[4]: \n   A  B\n0  1  3\n1  2  2\n2  3  1\n</code></pre>\n\n<p>If I create a new dataframe column 'C' by subtracting 'B' from 'A', I get the right result.</p>\n\n<pre><code>df['C'] = df['A'] - df['B']\n\nIn[8]: df\nOut[7]: \n   A  B  C\n0  1  3 -2\n1  2  2  0\n2  3  1  2\n</code></pre>\n\n<p>However, if I utilize the <code>max()</code> function to avoid results with a negative number, I get \"ValueError: The truth value of a Series is ambiguous.\"</p>\n\n<pre><code>&gt;&gt;&gt; df['C'] = max(df['A'] - df['B'], 0)\nValueError: The truth value of a Series is ambiguous. Use a.empty, a.bool(), a.item(), a.any() or a.all().\n</code></pre>\n\n<p>The expected output is:</p>\n\n<pre><code>   A  B  C\n0  1  3  0\n1  2  2  0\n2  3  1  2\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 14905, "user_id": 931303, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f1798bf4504775c89be6686fa6fc74e3?s=128&d=identicon&r=PG", "display_name": "Jorge Leitao", "link": "https://stackoverflow.com/users/931303/jorge-leitao"}, "edited": false, "score": 1, "creation_date": 1451506872, "post_id": 34536650, "comment_id": 56815028, "body": "if this statement can be written as <code>for i in xrange(10): print(i)</code>, why would  there would be a second way of writing it?"}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1451506956, "post_id": 34536650, "comment_id": 56815074, "body": "the hack <code>[print(i) for i in range(10)]</code> should work in python3 ..."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1451507154, "post_id": 34536650, "comment_id": 56815182, "body": "you can use <code>for i in xrange(10): print(i)</code> but probably nobody puts any function in one line with <code>for</code> because it makes code less readable."}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1451509143, "post_id": 34536650, "comment_id": 56816236, "body": "It&#39;s simply not valid syntax, for either current major Python version, per <a href=\"https://docs.python.org/2/reference/index.html\" rel=\"nofollow noreferrer\">docs.python.org/2/reference/index.html</a> and <a href=\"https://docs.python.org/3/reference/index.html\" rel=\"nofollow noreferrer\">docs.python.org/3/reference/index.html</a>. You can&#39;t just have a generator expression on its own as a valid statement."}], "answers": [{"comments": [{"owner": {"reputation": 6185, "user_id": 4490559, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/985f62a656c7e5918ad6b415b6f9af02?s=128&d=identicon&r=PG&f=1", "display_name": "intboolstring", "link": "https://stackoverflow.com/users/4490559/intboolstring"}, "edited": false, "score": 0, "creation_date": 1451507798, "post_id": 34536683, "comment_id": 56815553, "body": "&quot;Why print cannot be used with for on the same line in python 2/3?&quot;  &#39;Why&#39; is the key word. You never actually answer the question."}, {"owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "reply_to_user": {"reputation": 6185, "user_id": 4490559, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/985f62a656c7e5918ad6b415b6f9af02?s=128&d=identicon&r=PG&f=1", "display_name": "intboolstring", "link": "https://stackoverflow.com/users/4490559/intboolstring"}, "edited": false, "score": 0, "creation_date": 1451508092, "post_id": 34536683, "comment_id": 56815722, "body": "But it can, as I have demonstrated. Twice."}, {"owner": {"reputation": 6185, "user_id": 4490559, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/985f62a656c7e5918ad6b415b6f9af02?s=128&d=identicon&r=PG&f=1", "display_name": "intboolstring", "link": "https://stackoverflow.com/users/4490559/intboolstring"}, "edited": false, "score": 0, "creation_date": 1451508143, "post_id": 34536683, "comment_id": 56815754, "body": "Ok - you do demonstrate that it is possible.  You don&#39;t explain why his isn&#39;t working."}, {"owner": {"reputation": 39159, "user_id": 1541563, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4EOh.png?s=128&g=1", "display_name": "Patrick Roberts", "link": "https://stackoverflow.com/users/1541563/patrick-roberts"}, "edited": false, "score": 1, "creation_date": 1451508185, "post_id": 34536683, "comment_id": 56815775, "body": "You didn&#39;t explain why OP&#39;s particular attempt failed, which was the implied main question."}, {"owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 2, "creation_date": 1451508272, "post_id": 34536683, "comment_id": 56815820, "body": "Because for code to be run by the Python interpreter, it must be written in Python. The question is equivalent to &quot;Why isn&#39;t Python something other than Python?&quot;"}], "tags": [], "owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "is_accepted": false, "score": 3, "last_activity_date": 1451506867, "creation_date": 1451506867, "answer_id": 34536683, "question_id": 34536650, "link": "https://stackoverflow.com/questions/34536650/why-print-cannot-be-used-with-for-on-the-same-line-in-python-2-3/34536683#34536683", "title": "Why print cannot be used with for on the same line in python 2/3?", "body": "<p>Like this:</p>\n\n<pre><code>for i in xrange(10): print(i)\n</code></pre>\n\n<p>You could also do something like this, but only in Python 3 where <code>print</code> is a function. This is an abuse of generator expressions, though.</p>\n\n<pre><code>any(print(i) for i in range(10))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 1, "creation_date": 1451509201, "post_id": 34536858, "comment_id": 56816267, "body": "That&#39;s a <i>generator expression</i>, it can be used in e.g. set, dict and list comprehensions but there&#39;s no such thing as <i>&quot;set builder notation&quot;</i> in Python."}, {"owner": {"reputation": 6185, "user_id": 4490559, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/985f62a656c7e5918ad6b415b6f9af02?s=128&d=identicon&r=PG&f=1", "display_name": "intboolstring", "link": "https://stackoverflow.com/users/4490559/intboolstring"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1451509232, "post_id": 34536858, "comment_id": 56816281, "body": "Please see the link at the top."}, {"owner": {"reputation": 6185, "user_id": 4490559, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/985f62a656c7e5918ad6b415b6f9af02?s=128&d=identicon&r=PG&f=1", "display_name": "intboolstring", "link": "https://stackoverflow.com/users/4490559/intboolstring"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1451509336, "post_id": 34536858, "comment_id": 56816321, "body": "Interesting - never heard it called that before @jonrsharpe.  Learn something everyday :)  Post edited"}], "tags": [], "owner": {"reputation": 6185, "user_id": 4490559, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/985f62a656c7e5918ad6b415b6f9af02?s=128&d=identicon&r=PG&f=1", "display_name": "intboolstring", "link": "https://stackoverflow.com/users/4490559/intboolstring"}, "is_accepted": true, "score": 1, "last_activity_date": 1451509303, "last_edit_date": 1451509303, "creation_date": 1451507686, "answer_id": 34536858, "question_id": 34536650, "link": "https://stackoverflow.com/questions/34536650/why-print-cannot-be-used-with-for-on-the-same-line-in-python-2-3/34536858#34536858", "title": "Why print cannot be used with for on the same line in python 2/3?", "body": "<p><strong><a href=\"https://en.wikipedia.org/wiki/Set-builder_notation\" rel=\"nofollow\">Set builder notation</a> (called generator expressions in Python) only work when you are building a set.</strong>  The notation you are using is set builder notation (generator expressions) (something like <code>x for x in range(10) if ...</code>).  That being said, you can use a regular for loop</p>\n\n<pre><code>for i in xrange(10):\n    print(i)\n</code></pre>\n\n<p>or set builder notation building an empty set:</p>\n\n<pre><code>&gt;&gt;&gt; x = [print(i) for i in xrange(10)]\n0\n1\n2\n3\n4\n5\n6\n7\n8\n9\n&gt;&gt;&gt; x\n[None, None, None, None, None, None, None, None, None, None]\n&gt;&gt;&gt; \n</code></pre>\n\n<p>The reason the set has all the none values is because you are never adding to the set, but only printing stuff out.</p>\n"}, {"tags": [], "owner": {"reputation": 21144, "user_id": 478656, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fd656a5e8d2a51290877d695649456ad?s=128&d=identicon&r=PG", "display_name": "TessellatingHeckler", "link": "https://stackoverflow.com/users/478656/tessellatingheckler"}, "is_accepted": false, "score": 1, "last_activity_date": 1451508481, "creation_date": 1451508481, "answer_id": 34537018, "question_id": 34536650, "link": "https://stackoverflow.com/questions/34536650/why-print-cannot-be-used-with-for-on-the-same-line-in-python-2-3/34537018#34537018", "title": "Why print cannot be used with for on the same line in python 2/3?", "body": "<p>The form <code>x for x in &lt;sequence&gt;</code> is meant to result in a list. It was originally this:</p>\n\n<pre><code>&gt;&gt;&gt; [i for i in range(10)] \n[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]\n</code></pre>\n\n<p>introduced in Python 2.0, <a href=\"https://www.python.org/dev/peps/pep-0202/\" rel=\"nofollow\">Python Enhancement Proposal 202</a>, coming from a variation of uses of map() and filter(). Those functions, and list comprehensions, originate with functional programming environments, which tend to lean towards no-side-effects and no-surprise-state-changes and so on. </p>\n\n<p>In the case where list comprehensions support a function call, it's intended for something like this simple transformation:</p>\n\n<pre><code>&gt;&gt;&gt; [math.sin(x) for x in whatever]\n[0.1, 0.2, ...]\n</code></pre>\n\n<p>The function is intended to change one list item into a new list item - and the output is still a list.</p>\n\n<p>This syntax lost the surrounding brackets <code>[ ]</code> a couple of years later in <a href=\"https://www.python.org/dev/peps/pep-0289/\" rel=\"nofollow\">PEP289</a> as they became more memory-efficient Generator Comprehensions in Python 2.4. These are intended for when you don't need the full list output <em>as a list</em> because you are processing all the contents as soon as you get them - e.g. <code>sum(i for i in range(10))</code> can add up all the numbers as they appear, without waiting for the full sequence to finish computing first.</p>\n\n<p>The way you want to use it - <code>print(x) for x in &lt;sequence&gt;</code> is in the form of a generator comprehension, but you don't want the generator, the list, the sequence. You only want to do it for a side effect which happens when you call the function.</p>\n\n<p>That's not impossible, you can do this in Python 2</p>\n\n<pre><code>import sys\n[sys.stdout.write(str(i) + '\\n') for i in range(10)]\n</code></pre>\n\n<p>and as @wim notes in a comment, this in Python 3:</p>\n\n<pre><code>[print(i) for i in range(10)]\n</code></pre>\n\n<p>However, print() doesn't return anything useful, the newly built list or generator is irrelevant and immediately thrown away.</p>\n\n<p>This structure is confusing/misleading to people reading your code, you are explicitly using the \"I want to build a list\" format when you don't want to build a list.</p>\n\n<p>It's also against the original ideas of list comprehensions and their origins in functional programming - it's much easier to reason about things when they don't have side effects.</p>\n\n<p>From the <a href=\"https://www.python.org/dev/peps/pep-0020/\" rel=\"nofollow\">Zen of Python</a>:</p>\n\n<ul>\n<li>Explicit is better than implicit.</li>\n</ul>\n\n<p>If you want to iterate over a sequence and print something, explicitly iterate over a list and print it (<code>for item in sequence: print(item)</code>). Don't start with \"I'm going to build a new list, oh I sneakily printed something as a side effect, then threw the list away\". </p>\n\n<p>It's hard to read your intent - did you mean to do that? What did you want it to do?</p>\n\n<p>It's harder to explain - what does this code do? \"It builds a new list of <code>None</code>s which are the return values from printing the list items\". That's putting the focus of what's happening in all the wrong places.</p>\n"}, {"tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": false, "score": 0, "last_activity_date": 1451509036, "last_edit_date": 1451509036, "creation_date": 1451508709, "answer_id": 34537062, "question_id": 34536650, "link": "https://stackoverflow.com/questions/34536650/why-print-cannot-be-used-with-for-on-the-same-line-in-python-2-3/34537062#34537062", "title": "Why print cannot be used with for on the same line in python 2/3?", "body": "<p>Your attempt is syntactically incorrect but you can do actually do it in one line using print as a function and do it without the need for the explicit for loop:</p>\n\n<pre><code>print(*range(10), sep=\"\\n\")\n</code></pre>\n\n<p>Would be equivalent to:</p>\n\n<pre><code> for i in range(10):\n    print(i)\n</code></pre>\n\n<p>and output:</p>\n\n<pre><code>In [32]: print(*range(10),sep=\"\\n\")\n0\n1\n2\n3\n4\n5\n6\n7\n8\n9\nIn [2]: print(*range(10))\n0 1 2 3 4 5 6 7 8 9\n</code></pre>\n\n<p>And in python2 you just need to import <code>print_function</code>:</p>\n\n<pre><code>from __future__ import print_function\n\nIn [3]: print(*xrange(10),sep=\"\\n\")\n0\n1\n2\n3\n4\n5\n6\n7\n8\nIn [4]: print(*xrange(10))\n0 1 2 3 4 5 6 7 8 9\n</code></pre>\n\n<p>or using <code>str.join</code>:</p>\n\n<pre><code>print(\"\\n\".join(map(str,range(10))))\n</code></pre>\n"}], "owner": {"reputation": 3709, "user_id": 1454510, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/cbfb9a1993333960f683cf038eaf6e4f?s=128&d=identicon&r=PG", "display_name": "return 0", "link": "https://stackoverflow.com/users/1454510/return-0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 34536858, "answer_count": 4, "score": 2, "last_activity_date": 1451509303, "creation_date": 1451506680, "question_id": 34536650, "link": "https://stackoverflow.com/questions/34536650/why-print-cannot-be-used-with-for-on-the-same-line-in-python-2-3", "title": "Why print cannot be used with for on the same line in python 2/3?", "body": "<p>I would love to implement the following:</p>\n\n<pre><code>print(i) for i in xrange(10)\n</code></pre>\n\n<p>However, this does not work in neither python2 nor python3. What is the limitation of the language? Or what did I do wrong?</p>\n"}, {"tags": ["python", "html"], "comments": [{"owner": {"reputation": 4676, "user_id": 30105, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/a1dc4bddf38de8351ae70e98845242e9?s=128&d=identicon&r=PG", "display_name": "PyNEwbie", "link": "https://stackoverflow.com/users/30105/pynewbie"}, "edited": false, "score": 0, "creation_date": 1451506381, "post_id": 34536519, "comment_id": 56814786, "body": "You want the resulting string to match the source string except for your insertion of new elements.  I don&#39;t think that is possible, we use lxml a lot and use the tostring method a lot but if there is any bad html in the source then there is an attempt to fix it in tostring.  Have you tried using tostring?  Maybe your html is clean enough?"}, {"owner": {"reputation": 170705, "user_id": 44330, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/dd5a7ef1476fb01998a215b1642dfd07?s=128&d=identicon&r=PG", "display_name": "Jason S", "link": "https://stackoverflow.com/users/44330/jason-s"}, "reply_to_user": {"reputation": 4676, "user_id": 30105, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/a1dc4bddf38de8351ae70e98845242e9?s=128&d=identicon&r=PG", "display_name": "PyNEwbie", "link": "https://stackoverflow.com/users/30105/pynewbie"}, "edited": false, "score": 0, "creation_date": 1451509505, "post_id": 34536519, "comment_id": 56816420, "body": "I want this to make it easy for my team to see diffs between input and output code. This is definitely possible, I just don&#39;t know which library (if any) can do this for HTML code. <a href=\"http://www.srcml.org/\" rel=\"nofollow noreferrer\">srcML</a> does this for C code, and it&#39;s just a matter for any parser to keep the raw input content for each node in the parse tree."}], "answers": [{"comments": [{"owner": {"reputation": 170705, "user_id": 44330, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/dd5a7ef1476fb01998a215b1642dfd07?s=128&d=identicon&r=PG", "display_name": "Jason S", "link": "https://stackoverflow.com/users/44330/jason-s"}, "edited": false, "score": 0, "creation_date": 1451509572, "post_id": 34536624, "comment_id": 56816476, "body": "I&#39;ll give it a try -- thanks! (have patience if I don&#39;t accept this answer right away)"}, {"owner": {"reputation": 170705, "user_id": 44330, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/dd5a7ef1476fb01998a215b1642dfd07?s=128&d=identicon&r=PG", "display_name": "Jason S", "link": "https://stackoverflow.com/users/44330/jason-s"}, "edited": false, "score": 0, "creation_date": 1451924541, "post_id": 34536624, "comment_id": 56936055, "body": "Hmm. It doesn&#39;t work, sorry. <code>formatter=None</code> removes the spaces present in the original HTML. (either that or they&#39;re removed in the original parsing.)"}, {"owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "reply_to_user": {"reputation": 170705, "user_id": 44330, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/dd5a7ef1476fb01998a215b1642dfd07?s=128&d=identicon&r=PG", "display_name": "Jason S", "link": "https://stackoverflow.com/users/44330/jason-s"}, "edited": false, "score": 0, "creation_date": 1451924671, "post_id": 34536624, "comment_id": 56936144, "body": "@JasonS yeah, I thought so, thanks for checking. What if you would apply the parser to the both documents you are comparing in a diff?.."}], "tags": [], "owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "is_accepted": false, "score": 1, "last_activity_date": 1451506535, "creation_date": 1451506535, "answer_id": 34536624, "question_id": 34536519, "link": "https://stackoverflow.com/questions/34536519/is-there-a-way-to-parse-html-in-python-but-preserve-the-source-formatting/34536624#34536624", "title": "Is there a way to parse HTML in Python but preserve the source formatting?", "body": "<p>If you would use <a href=\"http://www.crummy.com/software/BeautifulSoup/bs4/doc/\" rel=\"nofollow\"><code>BeautifulSoup</code></a> and specify the <a href=\"http://www.crummy.com/software/BeautifulSoup/bs4/doc/#output-formatters\" rel=\"nofollow\"><code>formatter=None</code></a>, it should leave the source formatting as it was initially. Sample:</p>\n\n<pre><code>from bs4 import BeautifulSoup\n\nmy_document = \"\"\"\n&lt;html&gt;\n&lt;body&gt;\n\n    &lt;h1&gt;Some Heading&lt;/h1&gt;\n\n    &lt;div id=\"first\"&gt;\n    &lt;p&gt;A paragraph.&lt;/p&gt;\n    &lt;a href=\"another_doc.html\"&gt;A link&lt;/a&gt;\n    &lt;p&gt;A paragraph.&lt;/p&gt;\n    &lt;/div&gt;\n\n    &lt;div id=\"second\"&gt;\n    &lt;p&gt;A paragraph.&lt;/p&gt;\n    &lt;p&gt;A paragraph.&lt;/p&gt;\n    &lt;/div&gt;\n\n    &lt;div id=\"third\"&gt;\n    &lt;p&gt;A paragraph.&lt;/p&gt;\n    &lt;a href=\"another_doc.html\"&gt;A link&lt;/a&gt;\n    &lt;a href=\"yet_another_doc.html\"&gt;A link&lt;/a&gt;\n    &lt;/div&gt;\n\n    &lt;p id=\"loner\"&gt;A paragraph.&lt;/p&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n\"\"\"\n\nsoup = BeautifulSoup(my_document, \"html.parser\")\n\n# removing a node\nsoup.find(\"div\", id=\"second\").extract()\n\nmodified_source = soup.encode(formatter=None)\n</code></pre>\n\n<p>I still think that it would attempt to fix the HTML during parsing, but see if this solution is good enough for your use case. Hope it helps.</p>\n"}, {"tags": [], "owner": {"reputation": 170705, "user_id": 44330, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/dd5a7ef1476fb01998a215b1642dfd07?s=128&d=identicon&r=PG", "display_name": "Jason S", "link": "https://stackoverflow.com/users/44330/jason-s"}, "is_accepted": true, "score": 1, "last_activity_date": 1451930449, "creation_date": 1451930449, "answer_id": 34597053, "question_id": 34536519, "link": "https://stackoverflow.com/questions/34536519/is-there-a-way-to-parse-html-in-python-but-preserve-the-source-formatting/34597053#34597053", "title": "Is there a way to parse HTML in Python but preserve the source formatting?", "body": "<p>Looks like I can use <a href=\"https://docs.python.org/2/library/htmlparser.html\" rel=\"nofollow\">HTMLParser</a> except for a few fringe issues (<a href=\"http://bugs.python.org/issue26009\" rel=\"nofollow\">bogus comments and nonstandard end tags</a>) by subclassing the following class's <code>onStartTag()</code> and <code>onEndTag()</code> methods.</p>\n\n<pre><code>from HTMLParser import HTMLParser\n\nclass VerbatimParser(HTMLParser):\n    def __init__(self, out):\n        HTMLParser.__init__(self)\n        # @#%#@% HTMLParser uses old-style classes, can't use super()\n        self.out = out\n        self.tagstack = []\n    def emit(self, text):\n        self.out.write(text)\n    def handle_starttag(self, tag, attrs):\n        self.tagstack.append(tag)\n        self.emit(self.get_starttag_text())\n        self.onStartTag(tag, attrs)\n    def onStartTag(self, tag, attrs):\n        pass\n    def onEndTag(self, tag):\n        pass\n    def handle_endtag(self, tag):\n        self.onEndTag(tag)\n        # pop last occurrence of tag, along with any more recent tags\n        try:\n            k = self.tagstack[::-1].index(tag)\n            del self.tagstack[-k-1:]\n        except ValueError:\n            pass        \n        self.emit('&lt;/')\n        self.emit(tag)\n        self.emit('&gt;')\n    def handle_startendtag(self, tag, attrs):\n        self.emit(self.get_starttag_text())\n    def handle_data(self, data):\n        self.emit(data)\n    def handle_entityref(self, name):\n        self.emit('&amp;')\n        self.emit(name)\n        self.emit(';')\n    def handle_charref(self, name):\n        self.emit('&amp;#')\n        self.emit(name)\n        self.emit(';')\n    def handle_comment(self, data):\n        self.emit('&lt;!--')\n        self.emit(data)\n        self.emit('--&gt;')\n    def handle_decl(self, decl):\n        self.emit('&lt;!')\n        self.emit(decl)\n        self.emit('&gt;')\n    def handle_pi(self, data):\n        self.emit('&lt;?')\n        self.emit(data)\n        self.emit('&gt;')\n    def unknown_decl(self, data):\n        self.emit('&lt;![')\n        self.emit(data)\n        self.emit(']&gt;')\n\ndef doit(infile, outfile):\n    with open(outfile,'w') as fout:\n        parser = VerbatimParser(fout)\n        with open(infile) as f:\n            parser.feed(f.read())\n            parser.close()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 37, "user_id": 6089084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/576aba2ccc9c765c4cfc7095a8397d8d?s=128&d=identicon&r=PG&f=1", "display_name": "Unknown Soldier", "link": "https://stackoverflow.com/users/6089084/unknown-soldier"}, "is_accepted": false, "score": 0, "last_activity_date": 1458467964, "creation_date": 1458467964, "answer_id": 36112351, "question_id": 34536519, "link": "https://stackoverflow.com/questions/34536519/is-there-a-way-to-parse-html-in-python-but-preserve-the-source-formatting/36112351#36112351", "title": "Is there a way to parse HTML in Python but preserve the source formatting?", "body": "<p>Hello I would use EHP for that. It builds a dom like object of the HTML document then you can insert/delete/search\nfor specific entities in the html document. Once you have changed the DOM of the HTML then you just serialize it like.</p>\n\n<p><a href=\"https://github.com/iogf/ehp\" rel=\"nofollow\">https://github.com/iogf/ehp</a></p>\n\n<p>Check out this example.</p>\n\n<pre><code>from ehp import *\n\ndata  = ''' &lt;body&gt;&lt;em&gt; foo  &lt;/em&gt;&lt;/body&gt;'''\ndom  = Html().feed(data)\n\nfor ind in dom.find('em'):\n    x = Tag('font', {'color':'red'})\n    ind.append(x)\n\nprint dom\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>&lt;body &gt;&lt;em &gt; foo  &lt;font color=\"red\" &gt;&lt;/font&gt;&lt;/em&gt;&lt;/body&gt;\n</code></pre>\n"}], "owner": {"reputation": 170705, "user_id": 44330, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/dd5a7ef1476fb01998a215b1642dfd07?s=128&d=identicon&r=PG", "display_name": "Jason S", "link": "https://stackoverflow.com/users/44330/jason-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1127, "favorite_count": 3, "accepted_answer_id": 34597053, "answer_count": 3, "score": 1, "last_activity_date": 1458467964, "creation_date": 1451506110, "question_id": 34536519, "link": "https://stackoverflow.com/questions/34536519/is-there-a-way-to-parse-html-in-python-but-preserve-the-source-formatting", "title": "Is there a way to parse HTML in Python but preserve the source formatting?", "body": "<p>Is there a way to parse HTML in Python but preserve the source formatting?</p>\n\n<p>I want to iterate through an input file and produce an output file that is a byte-for-byte match of the input file, except for some new elements inserted in certain places.</p>\n\n<p>I looked at the <a href=\"https://docs.python.org/2/library/htmlparser.html#examples\" rel=\"nofollow\">HTMLParser</a> docs but I don't see any options to preserve formatting.</p>\n"}, {"tags": ["python", "python-2.7", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 1146, "user_id": 5270267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/6eb68e782ec2dea30ca627dfe416c13a?s=128&d=identicon&r=PG&f=1", "display_name": "Lisle", "link": "https://stackoverflow.com/users/5270267/lisle"}, "edited": false, "score": 0, "creation_date": 1451506988, "post_id": 34536631, "comment_id": 56815090, "body": "Awesome! I know this wasn&#39;t this original ask, but is there any way to make this work dynamically? Without creating the second column?"}, {"owner": {"reputation": 142796, "user_id": 42346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZikEw.jpg?s=128&g=1", "display_name": "mechanical_meat", "link": "https://stackoverflow.com/users/42346/mechanical-meat"}, "reply_to_user": {"reputation": 1146, "user_id": 5270267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/6eb68e782ec2dea30ca627dfe416c13a?s=128&d=identicon&r=PG&f=1", "display_name": "Lisle", "link": "https://stackoverflow.com/users/5270267/lisle"}, "edited": false, "score": 1, "creation_date": 1451507179, "post_id": 34536631, "comment_id": 56815194, "body": "Sure! If I get your meaning you&#39;d just do: <code>df[0] = df[0].apply(lambda x: x.split(&#39;-&#39;)[0])</code>"}, {"owner": {"reputation": 1146, "user_id": 5270267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/6eb68e782ec2dea30ca627dfe416c13a?s=128&d=identicon&r=PG&f=1", "display_name": "Lisle", "link": "https://stackoverflow.com/users/5270267/lisle"}, "edited": false, "score": 0, "creation_date": 1451508806, "post_id": 34536631, "comment_id": 56816074, "body": "I get this warning: is this going to affect the program at all? If not, how can I suppress it so the user doesn&#39;t see it? ------------- A value is trying to be set on a copy of a slice from a DataFrame. Try using .loc[row_indexer,col_indexer] = value instead"}, {"owner": {"reputation": 142796, "user_id": 42346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZikEw.jpg?s=128&g=1", "display_name": "mechanical_meat", "link": "https://stackoverflow.com/users/42346/mechanical-meat"}, "reply_to_user": {"reputation": 1146, "user_id": 5270267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/6eb68e782ec2dea30ca627dfe416c13a?s=128&d=identicon&r=PG&f=1", "display_name": "Lisle", "link": "https://stackoverflow.com/users/5270267/lisle"}, "edited": false, "score": 0, "creation_date": 1451508994, "post_id": 34536631, "comment_id": 56816159, "body": "What version of pandas are you on? The above code is tested to work on 0.17.0 with no warnings or errors."}], "tags": [], "owner": {"reputation": 142796, "user_id": 42346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZikEw.jpg?s=128&g=1", "display_name": "mechanical_meat", "link": "https://stackoverflow.com/users/42346/mechanical-meat"}, "is_accepted": true, "score": 1, "last_activity_date": 1451515435, "last_edit_date": 1451515435, "creation_date": 1451506559, "answer_id": 34536631, "question_id": 34536506, "link": "https://stackoverflow.com/questions/34536506/slicing-part-of-a-column-pandas/34536631#34536631", "title": "Slicing Part of a column Pandas", "body": "<p>Initialize <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.html\" rel=\"nofollow\"><code>DataFrame</code></a>.</p>\n\n<pre><code>df = pd.DataFrame(['name1-L89783','nametwo-L33009'],columns=['A',])\n\n&gt;&gt;&gt; df\n                A\n0    name1-L89783\n1  nametwo-L33009\n</code></pre>\n\n<p><a href=\"http://pandas.pydata.org/pandas-docs/version/0.17.1/generated/pandas.DataFrame.apply.html\" rel=\"nofollow\"><code>Apply</code></a> function over rows and put the result in a new column.</p>\n\n<pre><code>df['B'] = df['A'].apply(lambda x: x.split('-')[0])\n\n&gt;&gt;&gt; df\n                A        B\n0    name1-L89783    name1\n1  nametwo-L33009  nametwo\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "reply_to_user": {"reputation": 142796, "user_id": 42346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZikEw.jpg?s=128&g=1", "display_name": "mechanical_meat", "link": "https://stackoverflow.com/users/42346/mechanical-meat"}, "edited": false, "score": 0, "creation_date": 1451507418, "post_id": 34536729, "comment_id": 56815327, "body": "Like with all good questions, post raw input data, code to reproduce your df, your pandas, python, and numpy versions and the erroneous output"}, {"owner": {"reputation": 288763, "user_id": 487339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wbe4o.png?s=128&g=1", "display_name": "DSM", "link": "https://stackoverflow.com/users/487339/dsm"}, "edited": false, "score": 2, "creation_date": 1451507475, "post_id": 34536729, "comment_id": 56815353, "body": "@EdChum: I don&#39;t see how that can work.  Shouldn&#39;t it be <code>.str.split(&quot;-&quot;).str[0]</code>?"}, {"owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "reply_to_user": {"reputation": 288763, "user_id": 487339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wbe4o.png?s=128&g=1", "display_name": "DSM", "link": "https://stackoverflow.com/users/487339/dsm"}, "edited": false, "score": 0, "creation_date": 1451507784, "post_id": 34536729, "comment_id": 56815543, "body": "@DSM Damn, you&#39;re right, I knew I overlooked something, will update"}], "tags": [], "owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "is_accepted": false, "score": 2, "last_activity_date": 1451507835, "last_edit_date": 1451507835, "creation_date": 1451507133, "answer_id": 34536729, "question_id": 34536506, "link": "https://stackoverflow.com/questions/34536506/slicing-part-of-a-column-pandas/34536729#34536729", "title": "Slicing Part of a column Pandas", "body": "<p>use vectorised <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.str.split.html#pandas.Series.str.split\" rel=\"nofollow\"><code>str.split</code></a> for this and then use <code>str</code> again to access the array element of interest in this case the first element of the split:</p>\n\n<pre><code>In [10]:\ndf[1] = df[0].str.split('-').str[0]\ndf\n\nOut[10]:\n                0        1\n0    name1-L89783    name1\n1  nametwo-L33009  nametwo\n</code></pre>\n"}], "owner": {"reputation": 1146, "user_id": 5270267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/6eb68e782ec2dea30ca627dfe416c13a?s=128&d=identicon&r=PG&f=1", "display_name": "Lisle", "link": "https://stackoverflow.com/users/5270267/lisle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 34536631, "answer_count": 2, "score": 0, "last_activity_date": 1451515435, "creation_date": 1451506057, "question_id": 34536506, "link": "https://stackoverflow.com/questions/34536506/slicing-part-of-a-column-pandas", "title": "Slicing Part of a column Pandas", "body": "<p>I have a dataframe with column 'A' as a string. Within 'A' there are values like\nname1-L89783\nnametwo-L33009</p>\n\n<p>I would like to make a new column 'B' such that the '-Lxxxx' is removed and all that remains is 'name1' and 'nametwo'.</p>\n"}, {"tags": ["python", "r", "dataframe"], "comments": [{"owner": {"reputation": 4527, "user_id": 2382792, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/9tQBs.jpg?s=128&g=1", "display_name": "\u03c1ss", "link": "https://stackoverflow.com/users/2382792/%cf%81ss"}, "edited": false, "score": 0, "creation_date": 1451506073, "post_id": 34536502, "comment_id": 56814634, "body": "And what have you tried so far?"}, {"owner": {"reputation": 4527, "user_id": 2382792, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/9tQBs.jpg?s=128&g=1", "display_name": "\u03c1ss", "link": "https://stackoverflow.com/users/2382792/%cf%81ss"}, "edited": false, "score": 0, "creation_date": 1451506337, "post_id": 34536502, "comment_id": 56814756, "body": "Please edit your question and add all the relevant information there, not in the comments."}, {"owner": {"reputation": 12339, "user_id": 5020008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ephyn.png?s=128&g=1", "display_name": "Heroka", "link": "https://stackoverflow.com/users/5020008/heroka"}, "edited": false, "score": 0, "creation_date": 1451506948, "post_id": 34536502, "comment_id": 56815067, "body": "What do you mean with &#39;any random vector&#39;?"}, {"owner": {"reputation": 86941, "user_id": 3001626, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PNguN.png?s=128&g=1", "display_name": "David Arenburg", "link": "https://stackoverflow.com/users/3001626/david-arenburg"}, "edited": false, "score": 0, "creation_date": 1451507363, "post_id": 34536502, "comment_id": 56815298, "body": "Is <code>python</code> related here in any way?"}, {"owner": {"reputation": 127, "user_id": 5726073, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7d5b2ab3e9a1f7d66aab048e1a86d4f4?s=128&d=identicon&r=PG&f=1", "display_name": "azad", "link": "https://stackoverflow.com/users/5726073/azad"}, "reply_to_user": {"reputation": 12339, "user_id": 5020008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ephyn.png?s=128&g=1", "display_name": "Heroka", "link": "https://stackoverflow.com/users/5020008/heroka"}, "edited": false, "score": 0, "creation_date": 1451507470, "post_id": 34536502, "comment_id": 56815350, "body": "@heroka   like this  y&lt;-x[x$group == which.max(tabulate(x$group)), ],  here y is that random vector or variable or any thing..so if dataframe is divided in 4 group, I want to assign each group to some varable so that in later phase i can use all of them for processing."}, {"owner": {"reputation": 127, "user_id": 5726073, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7d5b2ab3e9a1f7d66aab048e1a86d4f4?s=128&d=identicon&r=PG&f=1", "display_name": "azad", "link": "https://stackoverflow.com/users/5726073/azad"}, "reply_to_user": {"reputation": 86941, "user_id": 3001626, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PNguN.png?s=128&g=1", "display_name": "David Arenburg", "link": "https://stackoverflow.com/users/3001626/david-arenburg"}, "edited": false, "score": 0, "creation_date": 1451507647, "post_id": 34536502, "comment_id": 56815464, "body": "@David Arenburg, I am right now looking for some good R script, but if problem can be solved in python also then most welcome...i am eagerly waiting."}, {"owner": {"reputation": 86941, "user_id": 3001626, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PNguN.png?s=128&g=1", "display_name": "David Arenburg", "link": "https://stackoverflow.com/users/3001626/david-arenburg"}, "edited": false, "score": 0, "creation_date": 1451508015, "post_id": 34536502, "comment_id": 56815686, "body": "Filling your environment with numerous data frames is a bad idea. Why would you need this?"}, {"owner": {"reputation": 127, "user_id": 5726073, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7d5b2ab3e9a1f7d66aab048e1a86d4f4?s=128&d=identicon&r=PG&f=1", "display_name": "azad", "link": "https://stackoverflow.com/users/5726073/azad"}, "reply_to_user": {"reputation": 86941, "user_id": 3001626, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PNguN.png?s=128&g=1", "display_name": "David Arenburg", "link": "https://stackoverflow.com/users/3001626/david-arenburg"}, "edited": false, "score": 0, "creation_date": 1451508343, "post_id": 34536502, "comment_id": 56815855, "body": "@David, I know this but some times it is necessary to see even a smallest element behaviour, if it can impact the overall infrastructure, can u suggest me something with this little bit of information. in more simple words- i want to divide dataframe into some groups and in results i want all the groups in ascending order by assigning to some variables."}, {"owner": {"reputation": 1432, "user_id": 2923027, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bb397c06ccf47fa8600e7f1aaeae2840?s=128&d=identicon&r=PG&f=1", "display_name": "CuriousBeing", "link": "https://stackoverflow.com/users/2923027/curiousbeing"}, "edited": false, "score": 0, "creation_date": 1451510503, "post_id": 34536502, "comment_id": 56816907, "body": "@india Check answer below."}], "answers": [{"tags": [], "owner": {"reputation": 1432, "user_id": 2923027, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bb397c06ccf47fa8600e7f1aaeae2840?s=128&d=identicon&r=PG&f=1", "display_name": "CuriousBeing", "link": "https://stackoverflow.com/users/2923027/curiousbeing"}, "is_accepted": false, "score": 1, "last_activity_date": 1451510399, "creation_date": 1451510399, "answer_id": 34537404, "question_id": 34536502, "link": "https://stackoverflow.com/questions/34536502/sorting-of-dataframe-based-on-condition-and-return-all-the-group-by-assigning-to/34537404#34537404", "title": "sorting of dataframe based on condition and return all the group by assigning to random vector dynamically", "body": "<p>Mr India - Try This.</p>\n\n<pre><code>library(sqldf)\nInput=c('4000','4000','2000','3000','2000','2000','2000')   \ngr&lt;-c('1','1','2','3','4','4','4')\nDF&lt;-data.frame(Input,gr)\nNewDF&lt;-data.frame()\nDF&lt;-sqldf(\"select  distinct Input, gr, count(*) as C from DF group by Input, gr order by C desc\")\nfor (i in 1:nrow(DF))\n  assign(paste(\"NewDF_\",i,sep=\"\"),na.omit(DF[i,][rep(row.names(DF), DF$C), 1:2]))\n</code></pre>\n\n<p>This will create 4 different Dataframes with your desired output.</p>\n"}, {"tags": [], "owner": {"reputation": 2560, "user_id": 4908900, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/51319a33504095df2a58a2318981b1ac?s=128&d=identicon&r=PG&f=1", "display_name": "Ezer K", "link": "https://stackoverflow.com/users/4908900/ezer-k"}, "is_accepted": false, "score": 2, "last_activity_date": 1451510580, "creation_date": 1451510580, "answer_id": 34537448, "question_id": 34536502, "link": "https://stackoverflow.com/questions/34536502/sorting-of-dataframe-based-on-condition-and-return-all-the-group-by-assigning-to/34537448#34537448", "title": "sorting of dataframe based on condition and return all the group by assigning to random vector dynamically", "body": "<p>In Python Pandas you could do the following:</p>\n\n<p>create the DF:</p>\n\n<pre><code>import pandas as pd\ndf = pd.DataFrame()\ndf['INPUT'] = [4000,4000,2000,3000,2000,2000,2000]\ndf['group'] = [1,1,2,3,4,4,4]\n</code></pre>\n\n<p>Group by group and get the size of each group, add this size to DF as a column and sort by it in ascending order:</p>\n\n<pre><code>df = df.merge(pd.DataFrame(df.groupby('group').size()).reset_index()).sort_values(0,ascending=False)\n</code></pre>\n\n<p>Then, loop through the DF to get the part you need each time:</p>\n\n<pre><code>for i,x in enumerate(df['group'].unique()):\nprint 'ouput',i\nprint df[df['group']==x].ix[:,:-1].reset_index(drop=True)\nprint \n</code></pre>\n\n<p>This give you the following:</p>\n\n<pre><code>    ouput 0\n    INPUT  group\n0   2000      4\n1   2000      4\n2   2000      4\n\n    ouput 1\n    INPUT  group\n0   4000      1\n1   4000      1\n\n    ouput 2\n    INPUT  group\n0   2000      2\n\n    ouput 3\n    INPUT  group\n0   3000      3\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 528, "user_id": 5720403, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nnry7.jpg?s=128&g=1", "display_name": "Tal J. Levy", "link": "https://stackoverflow.com/users/5720403/tal-j-levy"}, "is_accepted": true, "score": 2, "last_activity_date": 1451511562, "last_edit_date": 1451511562, "creation_date": 1451511106, "answer_id": 34537558, "question_id": 34536502, "link": "https://stackoverflow.com/questions/34536502/sorting-of-dataframe-based-on-condition-and-return-all-the-group-by-assigning-to/34537558#34537558", "title": "sorting of dataframe based on condition and return all the group by assigning to random vector dynamically", "body": "<p>I am not sure whether you need all your outputs at once or not. But here is an idea that might help. I am using the dplyr package for this. So first let me recreate the dataset you provided as input:</p>\n\n<pre><code>library(dplyr)\nDF &lt;- data.frame(INPUT = c(4000,4000,2000,3000,2000,2000,2000), group = c(1,1,2,3,4,4,4))\ndf &lt;- tbl_df(DF)\ndf\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>  INPUT group\n  (dbl) (dbl)\n1  4000     1\n2  4000     1\n3  2000     2\n4  3000     3\n5  2000     4\n6  2000     4\n7  2000     4\n</code></pre>\n\n<p>Now I will create an auxiliary table which will tell me how many rows I have of each group, this table will be already ordered from max to min:</p>\n\n<pre><code>aux &lt;- df %&gt;% group_by(group) %&gt;% summarise(n = n()) %&gt;% arrange(-n)\naux\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>  group     n\n  (dbl) (int)\n1     4     3\n2     1     2\n3     2     1\n4     3     1\n</code></pre>\n\n<p>So we see that group 4 appears 3 times, group 1 appears twice and so on and so forth.\nNow I can easily \"extract\" the groups I want from max to min:</p>\n\n<pre><code>ymax &lt;- df %&gt;% filter(group == aux$group[1])\ny2 &lt;- df %&gt;% filter(group == aux$group[2])\ny3 &lt;- df %&gt;% filter(group == aux$group[3])\nymin &lt;- df %&gt;% filter(group == aux$group[4])\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>ymax\n  INPUT group\n  (dbl) (dbl)\n1  2000     4\n2  2000     4  \n3  2000     4  \n\ny2\n  INPUT group\n  (dbl) (dbl)\n1  4000     1\n2  4000     1  \n\ny3\n  INPUT group\n  (dbl) (dbl)\n1  2000     2  \n\nymin\n  INPUT group\n  (dbl) (dbl)\n1  3000     3\n</code></pre>\n\n<p>I hope this helps.<br>\nI just want to add that you can get all of them at once of course:</p>\n\n<pre><code>ylist &lt;- lapply(1:nrow(aux), function(x) {filter(df, group == aux$group[x])})\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>[[1]]\nSource: local data frame [3 x 2]\n\n  INPUT group\n  (dbl) (dbl)\n1  2000     4\n2  2000     4\n3  2000     4\n\n[[2]]\nSource: local data frame [2 x 2]\n\n  INPUT group\n  (dbl) (dbl)\n1  4000     1\n2  4000     1\n\n[[3]]\nSource: local data frame [1 x 2]\n\n  INPUT group\n  (dbl) (dbl)\n1  2000     2\n\n[[4]]\nSource: local data frame [1 x 2]\n\n  INPUT group\n  (dbl) (dbl)\n1  3000     3\n</code></pre>\n"}], "owner": {"reputation": 127, "user_id": 5726073, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7d5b2ab3e9a1f7d66aab048e1a86d4f4?s=128&d=identicon&r=PG&f=1", "display_name": "azad", "link": "https://stackoverflow.com/users/5726073/azad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 581, "favorite_count": 0, "accepted_answer_id": 34537558, "answer_count": 3, "score": 3, "last_activity_date": 1451512814, "creation_date": 1451506038, "last_edit_date": 1451512814, "question_id": 34536502, "link": "https://stackoverflow.com/questions/34536502/sorting-of-dataframe-based-on-condition-and-return-all-the-group-by-assigning-to", "title": "sorting of dataframe based on condition and return all the group by assigning to random vector dynamically", "body": "<p>For example: <strong>INPUT DATAFRAME</strong> is:-</p>\n\n<pre><code>INPUT     group\n4000       1\n4000       1\n2000       2\n3000       3\n2000       4\n2000       4\n2000       4\n</code></pre>\n\n<p>Output :- dynamically assign to any random vector and generate output as:-\nFirst dataframe with maximum repeated group number, Second dataframe with second highest element of repeated group,and so on\u2026</p>\n\n<p><strong>OUTPUT</strong><br>\n<strong>1.First</strong></p>\n\n<pre><code>INPUT     group\n2000        4\n2000        4\n2000        4\n</code></pre>\n\n<p><strong>2.second</strong></p>\n\n<pre><code>INPUT        group\n4000        1\n4000        1  \n</code></pre>\n\n<p><strong>3.third</strong>  </p>\n\n<pre><code>INPUT        group\n2000        2\n</code></pre>\n\n<p><strong>4.fourth</strong></p>\n\n<pre><code>INPUT        group\n3000        3  \n</code></pre>\n\n<p>in more simple words- i want to divide dataframe into some groups and in results i want all the groups in ascending order by assigning to some variables.\nI tried with so far is this:  </p>\n\n<pre><code>x&lt;-setDT(df)[, group := rleid(df$INPUT)]\n</code></pre>\n\n<p>this will sort the group. i tried one more comand, that is:  </p>\n\n<pre><code>y&lt;-x[x$group == which.max(tabulate(x$group)), ] \n</code></pre>\n\n<p>but this returns only group with maximum number of repeated group element.</p>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 967, "user_id": 2728105, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/320065a814b458eac8a5da49d7a709d0?s=128&d=identicon&r=PG&f=1", "display_name": "themantalope", "link": "https://stackoverflow.com/users/2728105/themantalope"}, "edited": false, "score": 0, "creation_date": 1451506342, "post_id": 34536463, "comment_id": 56814759, "body": "Well, to start what you have shown in your code here won&#39;t compile, it&#39;s missing parentheses and quotation marks. Could you also provide some example text that you would like to parse, please?"}, {"owner": {"reputation": 27179, "user_id": 710099, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0413774874b9baeccef7a5ba0344fec7?s=128&d=identicon&r=PG", "display_name": "Federico Piazza", "link": "https://stackoverflow.com/users/710099/federico-piazza"}, "edited": false, "score": 0, "creation_date": 1451507393, "post_id": 34536463, "comment_id": 56815316, "body": "As far as I know, you can&#39;t use something like <code>[^word]</code> since this will only match whatever character but <code>w</code>, <code>o</code>, <code>r</code>, <code>d</code>.  Also I know you can use negative lookaheads like <code>myword(?!something)</code> to match <code>myword</code> only if it is not followed with <code>something</code>. However, I know there are some tricks to match whatever except a word"}, {"owner": {"reputation": 27179, "user_id": 710099, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0413774874b9baeccef7a5ba0344fec7?s=128&d=identicon&r=PG", "display_name": "Federico Piazza", "link": "https://stackoverflow.com/users/710099/federico-piazza"}, "edited": false, "score": 0, "creation_date": 1451508279, "post_id": 34536463, "comment_id": 56815826, "body": "can you post some sample data for what you want and what you don&#39;t?"}, {"owner": {"reputation": 257, "user_id": 4589953, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/f5b90dadd5ab7ef2ff2ce09b89256dfb?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/4589953/nick"}, "reply_to_user": {"reputation": 27179, "user_id": 710099, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0413774874b9baeccef7a5ba0344fec7?s=128&d=identicon&r=PG", "display_name": "Federico Piazza", "link": "https://stackoverflow.com/users/710099/federico-piazza"}, "edited": false, "score": 0, "creation_date": 1451511729, "post_id": 34536463, "comment_id": 56817438, "body": "I added that @FedericoPiazza"}, {"owner": {"reputation": 1650, "user_id": 5368599, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/c3a6c9c2224587981da836e469379e9d?s=128&d=identicon&r=PG&f=1", "display_name": "Autumn", "link": "https://stackoverflow.com/users/5368599/autumn"}, "edited": false, "score": 0, "creation_date": 1451513302, "post_id": 34536463, "comment_id": 56818157, "body": "Nick, I wrote you a working answer.  I&#39;ll post it after you go through and accept a few answers to your many previous questions."}, {"owner": {"reputation": 257, "user_id": 4589953, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/f5b90dadd5ab7ef2ff2ce09b89256dfb?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/4589953/nick"}, "reply_to_user": {"reputation": 1650, "user_id": 5368599, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/c3a6c9c2224587981da836e469379e9d?s=128&d=identicon&r=PG&f=1", "display_name": "Autumn", "link": "https://stackoverflow.com/users/5368599/autumn"}, "edited": false, "score": 0, "creation_date": 1451513670, "post_id": 34536463, "comment_id": 56818318, "body": "@DSJustice I could not find my answer if you can&#39;t see accepted answer for those questions although I upvoted their efforts. Thanks for your time but that&#39;s not the right way."}], "answers": [{"tags": [], "owner": {"reputation": 94141, "user_id": 2867928, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a8DM1.jpg?s=128&g=1", "display_name": "kasravnd", "link": "https://stackoverflow.com/users/2867928/kasravnd"}, "is_accepted": false, "score": 0, "last_activity_date": 1451507523, "last_edit_date": 1451507523, "creation_date": 1451506464, "answer_id": 34536604, "question_id": 34536463, "link": "https://stackoverflow.com/questions/34536463/regex-and-python-to-express-not-matching-more-than-one-consecutive-characters/34536604#34536604", "title": "Regex and python to express not matching more than one consecutive characters", "body": "<p>For that case you can use a <a href=\"http://www.regular-expressions.info/lookaround.html\" rel=\"nofollow\"><em>negative look ahead</em></a>:</p>\n\n<pre><code>^((?!}}).)*$\n</code></pre>\n\n<p>And for catching the string between <code>{{</code> and <code>}}</code> you can use <code>re.search()</code> with aforementioned regex.</p>\n\n<pre><code>&gt;&gt;&gt; s = 'this {{ is {a} sample }}text'\n&gt;&gt;&gt; re.search(r'{{(((?!}}).)*)}}',s).group(1)\n' is {a} sample '\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 257, "user_id": 4589953, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/f5b90dadd5ab7ef2ff2ce09b89256dfb?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/4589953/nick"}, "edited": false, "score": 0, "creation_date": 1451512495, "post_id": 34536786, "comment_id": 56817802, "body": "it is not exactly the use case. Plz have a look at my example."}, {"owner": {"reputation": 257, "user_id": 4589953, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/f5b90dadd5ab7ef2ff2ce09b89256dfb?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/4589953/nick"}, "edited": false, "score": 0, "creation_date": 1451512858, "post_id": 34536786, "comment_id": 56817964, "body": "Using <code>.*</code> is out of the equation. I know I can use <code>.*</code> but I want to avoid it."}, {"owner": {"reputation": 50185, "user_id": 276949, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/52e96d535181560d2b46d4b513454ee5?s=128&d=identicon&r=PG", "display_name": "Martin Konecny", "link": "https://stackoverflow.com/users/276949/martin-konecny"}, "reply_to_user": {"reputation": 257, "user_id": 4589953, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/f5b90dadd5ab7ef2ff2ce09b89256dfb?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/4589953/nick"}, "edited": false, "score": 0, "creation_date": 1451512953, "post_id": 34536786, "comment_id": 56818003, "body": "It&#39;s actually <code>.*?</code> which is a non-greedy (unexpensive) form. Unless you have an assignment asking you to do it differently, it&#39;s the most straight-forward and efficient solution."}, {"owner": {"reputation": 257, "user_id": 4589953, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/f5b90dadd5ab7ef2ff2ce09b89256dfb?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/4589953/nick"}, "edited": false, "score": 0, "creation_date": 1451513254, "post_id": 34536786, "comment_id": 56818137, "body": "Look at the differences between the steps here: <a href=\"https://regex101.com/r/qJ3uK7/1\" rel=\"nofollow noreferrer\">regex101.com/r/qJ3uK7/1</a> and also here <a href=\"https://regex101.com/r/qJ3uK7/2\" rel=\"nofollow noreferrer\">regex101.com/r/qJ3uK7/2</a> that is one of the reasons I want to avoid <code>.*</code>"}, {"owner": {"reputation": 50185, "user_id": 276949, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/52e96d535181560d2b46d4b513454ee5?s=128&d=identicon&r=PG", "display_name": "Martin Konecny", "link": "https://stackoverflow.com/users/276949/martin-konecny"}, "reply_to_user": {"reputation": 257, "user_id": 4589953, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/f5b90dadd5ab7ef2ff2ce09b89256dfb?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/4589953/nick"}, "edited": false, "score": 0, "creation_date": 1451513806, "post_id": 34536786, "comment_id": 56818386, "body": "hmmm, that doesn&#39;t make any sense as the work done between <code>{{.*?}}</code> and <code>{{[^}]*?}}</code> (you don&#39;t need to escape <code>}</code>) should be almost exactly the same. One allows any character until <code>}}</code>. The other allows any character <i>except</i> for <code>}</code> until <code>}}</code>."}, {"owner": {"reputation": 257, "user_id": 4589953, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/f5b90dadd5ab7ef2ff2ce09b89256dfb?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/4589953/nick"}, "edited": false, "score": 0, "creation_date": 1451514010, "post_id": 34536786, "comment_id": 56818471, "body": "That&#39;s why. If the profiling works well, then it takes much more steps and I&#39;m decreasing the complexity of my code since I need to runs over millions of ling lines."}, {"owner": {"reputation": 50185, "user_id": 276949, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/52e96d535181560d2b46d4b513454ee5?s=128&d=identicon&r=PG", "display_name": "Martin Konecny", "link": "https://stackoverflow.com/users/276949/martin-konecny"}, "reply_to_user": {"reputation": 257, "user_id": 4589953, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/f5b90dadd5ab7ef2ff2ce09b89256dfb?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/4589953/nick"}, "edited": false, "score": 0, "creation_date": 1451514151, "post_id": 34536786, "comment_id": 56818549, "body": "I&#39;d suggest you profile the actual implementation in Python instead of using an online tool that most likely won&#39;t reflect your real-world results. See <a href=\"http://stackoverflow.com/questions/1593019/is-there-any-simple-way-to-benchmark-python-script\" title=\"is there any simple way to benchmark python script\">stackoverflow.com/questions/1593019/&hellip;</a> . If you use <code>findall</code> there shouldn&#39;t be any difference. Best of luck!"}, {"owner": {"reputation": 257, "user_id": 4589953, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/f5b90dadd5ab7ef2ff2ce09b89256dfb?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/4589953/nick"}, "edited": false, "score": 0, "creation_date": 1451515195, "post_id": 34536786, "comment_id": 56818981, "body": "I tried profiling it differently and by changing all <code>.*</code> to <code>[^X]</code> where <code>X</code> is what I know it will not happened in the sequence, I made it faster around 20x. It&#39;s just interesting why it is like that in long lines."}, {"owner": {"reputation": 50185, "user_id": 276949, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/52e96d535181560d2b46d4b513454ee5?s=128&d=identicon&r=PG", "display_name": "Martin Konecny", "link": "https://stackoverflow.com/users/276949/martin-konecny"}, "reply_to_user": {"reputation": 257, "user_id": 4589953, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/f5b90dadd5ab7ef2ff2ce09b89256dfb?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/4589953/nick"}, "edited": false, "score": 0, "creation_date": 1451525213, "post_id": 34536786, "comment_id": 56821803, "body": "I ended up profiling the two solutions, and it was 6 seconds for 100 runs of <code>.*?</code> vs 4 seconds for 100 runs of <code>[^}]*?</code>. Now the issue of you want to check two characters at a time will not work - why? Because regex consumes one character at a time. If for each character you are looking one character ahead, you are doubling your work. You can try <code>{{([^}]|}[^}])*?}}</code> (allow all non <code>}</code> and all single <code>}</code>), and the time jumps to 14 seconds for 100 iterations."}], "tags": [], "owner": {"reputation": 50185, "user_id": 276949, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/52e96d535181560d2b46d4b513454ee5?s=128&d=identicon&r=PG", "display_name": "Martin Konecny", "link": "https://stackoverflow.com/users/276949/martin-konecny"}, "is_accepted": false, "score": 1, "last_activity_date": 1451512708, "last_edit_date": 1451512708, "creation_date": 1451507394, "answer_id": 34536786, "question_id": 34536463, "link": "https://stackoverflow.com/questions/34536463/regex-and-python-to-express-not-matching-more-than-one-consecutive-characters/34536786#34536786", "title": "Regex and python to express not matching more than one consecutive characters", "body": "<blockquote>\n  <p>This is to catch strings in a file that starts with {{ and ends with }} but doesn't contains }} while they can contain a single }</p>\n</blockquote>\n\n<pre><code>your_string = \"{{first group}} {{second {} group}}\"\npattern = re.compile(r'{{.*?}}')\npattern.findall(your_string)  # returns list of matches \n</code></pre>\n\n<p>Which will return</p>\n\n<pre><code>['{{first group}}', '{{second {} group}}']\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 257, "user_id": 4589953, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/f5b90dadd5ab7ef2ff2ce09b89256dfb?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/4589953/nick"}, "edited": false, "score": 0, "creation_date": 1451512353, "post_id": 34536856, "comment_id": 56817728, "body": "It doesn&#39;t still work. Plz look at my example in the question."}, {"owner": {"reputation": 1233, "user_id": 1400711, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bfa9793d92d8f07e53566f40c0e0d9bd?s=128&d=identicon&r=PG", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/1400711/dmitry"}, "reply_to_user": {"reputation": 257, "user_id": 4589953, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/f5b90dadd5ab7ef2ff2ce09b89256dfb?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/4589953/nick"}, "edited": false, "score": 0, "creation_date": 1451514341, "post_id": 34536856, "comment_id": 56818618, "body": "@Nick I updated answer to match what you meant. P.S.: your question title doesn&#39;t really reflect what you meant."}, {"owner": {"reputation": 257, "user_id": 4589953, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/f5b90dadd5ab7ef2ff2ce09b89256dfb?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/4589953/nick"}, "edited": false, "score": 0, "creation_date": 1451514962, "post_id": 34536856, "comment_id": 56818899, "body": "Thanks. As I mentioned I want to avoid <code>.*</code> since it will adds a lot more into the complexity of my regex."}, {"owner": {"reputation": 1233, "user_id": 1400711, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bfa9793d92d8f07e53566f40c0e0d9bd?s=128&d=identicon&r=PG", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/1400711/dmitry"}, "reply_to_user": {"reputation": 257, "user_id": 4589953, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/f5b90dadd5ab7ef2ff2ce09b89256dfb?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/4589953/nick"}, "edited": false, "score": 0, "creation_date": 1451515496, "post_id": 34536856, "comment_id": 56819074, "body": "@Nick can you describe what is exact problem with &quot;.* ?&quot; Cause I found it most appropriate solution. Regarding visual complexity - othere solutions even worse."}, {"owner": {"reputation": 257, "user_id": 4589953, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/f5b90dadd5ab7ef2ff2ce09b89256dfb?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/4589953/nick"}, "edited": false, "score": 0, "creation_date": 1451515929, "post_id": 34536856, "comment_id": 56819219, "body": "Profiling and testing for my cases, <code>.*</code> adds more steps and it is much much slower. I don&#39;t know why. My original code was based on <code>.*</code>, that&#39;s why I asked this question."}, {"owner": {"reputation": 1233, "user_id": 1400711, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bfa9793d92d8f07e53566f40c0e0d9bd?s=128&d=identicon&r=PG", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/1400711/dmitry"}, "reply_to_user": {"reputation": 257, "user_id": 4589953, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/f5b90dadd5ab7ef2ff2ce09b89256dfb?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/4589953/nick"}, "edited": false, "score": 0, "creation_date": 1451517639, "post_id": 34536856, "comment_id": 56819802, "body": "@Nick So the problem is only in performance. Then you can try 2-nd option."}], "tags": [], "owner": {"reputation": 1233, "user_id": 1400711, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bfa9793d92d8f07e53566f40c0e0d9bd?s=128&d=identicon&r=PG", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/1400711/dmitry"}, "is_accepted": false, "score": 1, "last_activity_date": 1451515334, "last_edit_date": 1495540745, "creation_date": 1451507681, "answer_id": 34536856, "question_id": 34536463, "link": "https://stackoverflow.com/questions/34536463/regex-and-python-to-express-not-matching-more-than-one-consecutive-characters/34536856#34536856", "title": "Regex and python to express not matching more than one consecutive characters", "body": "<p>It looks like what you actually want is to match first }} after {{. The easiest regexp which will do this is:</p>\n\n<pre><code>\\{\\{.*?\\}\\}\n</code></pre>\n\n<p>Make sure to configure . to match line breaks if you allow them to be inside.</p>\n\n<p>If you concerned about performance I would say that this regexp is one of the fastest one. Alternatives would be:</p>\n\n<p>1) Use <a href=\"http://www.regular-expressions.info/lookaround.html#lookahead\" rel=\"nofollow noreferrer\">negative lookahead</a></p>\n\n<pre><code>\\{\\{((?!\\}\\}).)*\\}\\}\n</code></pre>\n\n<p>Have comparable performance as you will have look ahead check for every character</p>\n\n<p>2) Use <a href=\"https://stackoverflow.com/questions/50524/what-is-a-regex-independent-capturing-group\">atomic group</a> and <a href=\"http://www.regular-expressions.info/possessive.html\" rel=\"nofollow noreferrer\">possessive quantifier</a></p>\n\n<pre><code>\\{\\{(?&gt;[^{]|\\{[^{])**\\}\\}\n</code></pre>\n\n<p>This one might actually be faster as due to use of \"?>\" and \"**\" construction it won't dive up already matched values - so will do everything with single run.\nP.S.: make sure your regexp engine supports this constructions.</p>\n"}, {"comments": [{"owner": {"reputation": 257, "user_id": 4589953, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/f5b90dadd5ab7ef2ff2ce09b89256dfb?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/4589953/nick"}, "edited": false, "score": 0, "creation_date": 1451511006, "post_id": 34536939, "comment_id": 56817136, "body": "I know I can&#39;t use <code>[^word]</code>. But if I want to let&#39;s say use <code>word</code> with negation, then how can it work? I don&#39;t want to use <code>.*</code> since the string is long and it adds on steps."}, {"owner": {"reputation": 27179, "user_id": 710099, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0413774874b9baeccef7a5ba0344fec7?s=128&d=identicon&r=PG", "display_name": "Federico Piazza", "link": "https://stackoverflow.com/users/710099/federico-piazza"}, "reply_to_user": {"reputation": 257, "user_id": 4589953, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/f5b90dadd5ab7ef2ff2ce09b89256dfb?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/4589953/nick"}, "edited": false, "score": 0, "creation_date": 1451565323, "post_id": 34536939, "comment_id": 56834741, "body": "@Nick there is no way to skip a word using a built-in feature, except you use the discard verbs. I&#39;ve updated my answer with that"}], "tags": [], "owner": {"reputation": 27179, "user_id": 710099, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0413774874b9baeccef7a5ba0344fec7?s=128&d=identicon&r=PG", "display_name": "Federico Piazza", "link": "https://stackoverflow.com/users/710099/federico-piazza"}, "is_accepted": false, "score": 0, "last_activity_date": 1451564768, "last_edit_date": 1495539892, "creation_date": 1451508070, "answer_id": 34536939, "question_id": 34536463, "link": "https://stackoverflow.com/questions/34536463/regex-and-python-to-express-not-matching-more-than-one-consecutive-characters/34536939#34536939", "title": "Regex and python to express not matching more than one consecutive characters", "body": "<p>As far as I know, you can't use something like <code>[^word]</code> since this will only match whatever character but <code>w</code>, <code>o</code>, <code>r</code>, <code>d</code>.</p>\n\n<p>Also I know you can use negative lookaheads like <code>myword(?!something)</code> to match <code>myword</code> only if it is not followed with <code>something</code>.</p>\n\n<p>However, to match something that is not a word I know you have to use some tricks like what is described in this post <a href=\"https://stackoverflow.com/questions/2404010/match-everything-except-for-specified-strings\">Match everything except for specified strings</a></p>\n\n<p>For your specific case, you can use this regex to check if the line contains <code>{{</code>:</p>\n\n<pre><code>^(?!.*\\{\\{)\n</code></pre>\n\n<p><strong><a href=\"https://regex101.com/r/uX0uG5/4\" rel=\"nofollow noreferrer\">Regex Demo</a></strong></p>\n\n<p>On the other hand, if you use PCRE regex then you can use the discard verbs, so if you want to skip patterns like <code>{{something}}</code>, you can use this:</p>\n\n<pre><code>\\{\\{\\w+\\}\\}(*SKIP)(*FAIL)|(\\w+)\n           ^^^^^^^^^^^^^^ if your pattern matches, it will be discarded intentionally \n</code></pre>\n\n<p><strong><a href=\"https://regex101.com/r/uX0uG5/6\" rel=\"nofollow noreferrer\">Working demo</a></strong></p>\n"}], "owner": {"reputation": 257, "user_id": 4589953, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/f5b90dadd5ab7ef2ff2ce09b89256dfb?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/4589953/nick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 757, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1451564768, "creation_date": 1451505901, "last_edit_date": 1451512793, "question_id": 34536463, "link": "https://stackoverflow.com/questions/34536463/regex-and-python-to-express-not-matching-more-than-one-consecutive-characters", "title": "Regex and python to express not matching more than one consecutive characters", "body": "<p>I know in regex we can use <code>^</code> to declare something except. For example <code>[^ ]*?</code> means a string with no space. How we can use this to find the except for more than two consecutive character. Fro example a string that doesn't contain <code>{{</code> when it can contain a single <code>{</code>. I tried these and didn't work:</p>\n\n<pre><code>re.compile(r\"(\\{\\{`[^(\\{\\{)]*?\\}\\}`)\nre.compile(r\"(\\{\\{`[^\\{\\{]*?\\}\\}`)\n</code></pre>\n\n<p>This is to catch strings in a file that starts with <code>{{</code> and ends with <code>}}</code> but doesn't contains <code>}}</code> while they can contain a single <code>}</code>. Also using <code>.*</code> is not an option.</p>\n\n<pre><code>input_string=\"blah blah blah {{cite journal |last=Malatesta|first=Errico|title=Towards Anarchism|journal=MAN!|publisher=International Group of San Francisco|location=Los Angeles|oclc=3930443|url=http://www.marxists.org/archive/malatesta/1930s/xx/toanarchy.htm|archiveurl=http://web.archive.org/web/20121107221404/http://marxists.org/archive/malatesta/1930s/xx/toanarchy.htm|archivedate=7 November 2012 |deadurl=no|authorlink=Errico Malatesta |ref=harv}} blah blah blah\"\nregexp_1 = re.compile(r\"(\\{\\{[^\\}]*?\\}\\})\") \noutput = regexp_1.sub(\"\",input_string )\n</code></pre>\n\n<p>Now <code>regexp_1</code>, I want to replace <code>[^\\}]*?</code> with <code>[^\\}\\}]*?</code> and I know that <code>[^\\}\\}]*?</code> is not correct since it works the same way as <code>[^\\}]*?</code>.</p>\n"}, {"tags": ["python", "django"], "answers": [{"tags": [], "owner": {"reputation": 250720, "user_id": 113962, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b80ae1d65878cf68a4b1a00848467527?s=128&d=identicon&r=PG", "display_name": "Alasdair", "link": "https://stackoverflow.com/users/113962/alasdair"}, "is_accepted": true, "score": 1, "last_activity_date": 1451509734, "creation_date": 1451509734, "answer_id": 34537279, "question_id": 34536443, "link": "https://stackoverflow.com/questions/34536443/error-to-run-a-insert-in-auth-user/34537279#34537279", "title": "error to run a insert in auth_user", "body": "<p>In your fixtures, you should have <code>auth.model</code> with a dot, not an underscore.</p>\n\n<pre><code>model\": \"auth.user\",\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 5191047, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-RP3wR8mp1v8/AAAAAAAAAAI/AAAAAAAAAMQ/mQ3q32gv3fg/photo.jpg?sz=128", "display_name": "Leidy Johanna", "link": "https://stackoverflow.com/users/5191047/leidy-johanna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 34537279, "answer_count": 1, "score": 0, "last_activity_date": 1451509734, "creation_date": 1451505823, "question_id": 34536443, "link": "https://stackoverflow.com/questions/34536443/error-to-run-a-insert-in-auth-user", "title": "error to run a insert in auth_user", "body": "<p>I have a table with fields related with the django's table called auth_user, i need to run a unitary test to test the <strong>str</strong> method about other entity of the models.py, but i when run the test, i get the next issue:</p>\n\n<pre><code>======================================================================\nERROR: setUpClass (key_process_indicator_bsc.unitary_test.test_models.ModelsTestCase)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/leidyj/envs/key_process_indicator/key_process_indicator_bsc_local/lib/python3.4/site-packages/django/core/serializ\ners/json.py\", line 79, in Deserializer\n    for obj in PythonDeserializer(objects, **options):\n  File \"/home/leidyj/envs/key_process_indicator/key_process_indicator_bsc_local/lib/python3.4/site-packages/django/core/serializ\ners/python.py\", line 96, in Deserializer\n    Model = _get_model(d[\"model\"])\n  File \"/home/leidyj/envs/key_process_indicator/key_process_indicator_bsc_local/lib/python3.4/site-packages/django/core/serializ\ners/python.py\", line 166, in _get_model\n    return apps.get_model(model_identifier)\n  File \"/home/leidyj/envs/key_process_indicator/key_process_indicator_bsc_local/lib/python3.4/site-packages/django/apps/registry\n.py\", line 201, in get_model\n    app_label, model_name = app_label.split('.')\nValueError: need more than 1 value to unpack\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/leidyj/envs/key_process_indicator/key_process_indicator_bsc_local/lib/python3.4/site-packages/django/test/testcase\ns.py\", line 956, in setUpClass\n    'database': db_name,\n  File \"/home/leidyj/envs/key_process_indicator/key_process_indicator_bsc_local/lib/python3.4/site-packages/django/core/manageme\nnt/__init__.py\", line 120, in call_command\n    return command.execute(*args, **defaults)\n  File \"/home/leidyj/envs/key_process_indicator/key_process_indicator_bsc_local/lib/python3.4/site-packages/django/core/manageme\nnt/base.py\", line 445, in execute\n    output = self.handle(*args, **options)\n  File \"/home/leidyj/envs/key_process_indicator/key_process_indicator_bsc_local/lib/python3.4/site-packages/django/core/manageme\nnt/commands/loaddata.py\", line 60, in handle\n    self.loaddata(fixture_labels)\n  File \"/home/leidyj/envs/key_process_indicator/key_process_indicator_bsc_local/lib/python3.4/site-packages/django/core/manageme\nnt/commands/loaddata.py\", line 90, in loaddata\n    self.load_label(fixture_label)\n  File \"/home/leidyj/envs/key_process_indicator/key_process_indicator_bsc_local/lib/python3.4/site-packages/django/core/manageme\nnt/commands/loaddata.py\", line 141, in load_label\n    for obj in objects:\n  File \"/home/leidyj/envs/key_process_indicator/key_process_indicator_bsc_local/lib/python3.4/site-packages/django/core/serializ\ners/json.py\", line 85, in Deserializer\n    six.reraise(DeserializationError, DeserializationError(e), sys.exc_info()[2])\n  File \"/home/leidyj/envs/key_process_indicator/key_process_indicator_bsc_local/lib/python3.4/site-packages/django/utils/six.py\"\n, line 685, in reraise\n    raise value.with_traceback(tb)\n  File \"/home/leidyj/envs/key_process_indicator/key_process_indicator_bsc_local/lib/python3.4/site-packages/django/core/serializ\ners/json.py\", line 79, in Deserializer\n    for obj in PythonDeserializer(objects, **options):\n  File \"/home/leidyj/envs/key_process_indicator/key_process_indicator_bsc_local/lib/python3.4/site-packages/django/core/serializ\ners/python.py\", line 96, in Deserializer\n    Model = _get_model(d[\"model\"])\n  File \"/home/leidyj/envs/key_process_indicator/key_process_indicator_bsc_local/lib/python3.4/site-packages/django/core/serializ\ners/python.py\", line 166, in _get_model\n    return apps.get_model(model_identifier)\n  File \"/home/leidyj/envs/key_process_indicator/key_process_indicator_bsc_local/lib/python3.4/site-packages/django/apps/registry\n.py\", line 201, in get_model\n    app_label, model_name = app_label.split('.')\ndjango.core.serializers.base.DeserializationError: Problem installing fixture '/home/leidyj/key_process_indicator_bsc_repository\n/key_process_indicator_bsc/key_process_indicator_bsc/fixtures/test_data_key_process_indicator_bsc.json': need more than 1 value \nto unpack\n\n----------------------------------------------------------------------\nRan 5 tests in 0.113s\n\nFAILED (errors=1)\n</code></pre>\n\n<p>the json file, that is my set data, has:</p>\n\n<pre><code>{\"pk\":1,\n\"model\":\"auth_user\",\n\"fields\":{\n            \"password\":\"pbkdf2_sha256$20000$PFQCunwR7Rzz$rhTeSCRUCz8hqwYGf8Uprj+B/5yAmYMzjc6jamY9eCw=\",\n            \"last_login\":\"2015-12-30 14:17:39.413827\",\n            \"is_superuser\":1,\n            \"username\":\"admin\",\n            \"first_name\":\"Leidy\",\n            \"last_name\":\"Johanna\",\n            \"email\":\"leidyj241@gmail.com\",\n            \"is_staff\":1,\n            \"is_active\":1,\n            \"date_joined\":\"2015-12-30 14:17:29.150420\"\n         }\n\n},\n\n{\"pk\":1,\n\"model\":\"key_process_indicator_bsc.Indicator\",\n\"fields\":{\n            \"name\":\"indicator 1\",\n            \"goal\":100,\n            \"minimum_range\":20,\n            \"hight_range\":50,\n            \"weight\":100,\n            \"acountable\":1,\n            \"responsible\":1,\n            \"indicator_type\":1,\n            \"unite_measure\":1,\n            \"created_at\": \"2015-11-11\",\n            \"modified_at\": \"2015-11-11\",\n            \"deleted\": 0\n         }\n\n}\n</code></pre>\n\n<p>somebody that help me, thanks.</p>\n\n<p>bye,</p>\n"}, {"tags": ["python", "security", "authentication", "ftp"], "answers": [{"comments": [{"owner": {"reputation": 2892, "user_id": 1131073, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/5893d7595058697c9cd5c8372a262e4c?s=128&d=identicon&r=PG", "display_name": "Brian", "link": "https://stackoverflow.com/users/1131073/brian"}, "reply_to_user": {"reputation": 4527, "user_id": 2382792, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/9tQBs.jpg?s=128&g=1", "display_name": "\u03c1ss", "link": "https://stackoverflow.com/users/2382792/%cf%81ss"}, "edited": false, "score": 1, "creation_date": 1451506451, "post_id": 34536411, "comment_id": 56814817, "body": "@\u03c1ss I know--it says I will be able to accept in 2 days."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1451508543, "post_id": 34536411, "comment_id": 56815948, "body": "It shouldn&#39;t be 2 days, it should be 15 minutes"}, {"owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1451510433, "post_id": 34536411, "comment_id": 56816883, "body": "@Barmar I think the 2-day limit is only for self-answered questions."}], "tags": [], "owner": {"reputation": 2892, "user_id": 1131073, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/5893d7595058697c9cd5c8372a262e4c?s=128&d=identicon&r=PG", "display_name": "Brian", "link": "https://stackoverflow.com/users/1131073/brian"}, "is_accepted": true, "score": 1, "last_activity_date": 1451505679, "creation_date": 1451505679, "answer_id": 34536411, "question_id": 34536410, "link": "https://stackoverflow.com/questions/34536410/ftp-can-connect-w-o-authentication-in-browser-but-not-in-code/34536411#34536411", "title": "FTP can connect w/o authentication in browser but not in code", "body": "<p>It turns out that Firefox was automatically authenticating with empty strings for the username and password.</p>\n\n<p>These are the default arguments in <code>ftp.login</code>, so the following fixes the script:</p>\n\n<pre><code>ftp = FTP('garner.ucsd.edu')\nftp.login()\nftp.cwd('pub/products')\n</code></pre>\n\n<p>This is actually in the <a href=\"https://docs.python.org/3/library/ftplib.html\" rel=\"nofollow\">Python documentation</a> too, I just didn't realize it was actually necessary.</p>\n"}], "owner": {"reputation": 2892, "user_id": 1131073, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/5893d7595058697c9cd5c8372a262e4c?s=128&d=identicon&r=PG", "display_name": "Brian", "link": "https://stackoverflow.com/users/1131073/brian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 283, "favorite_count": 0, "accepted_answer_id": 34536411, "answer_count": 1, "score": 1, "last_activity_date": 1451526794, "creation_date": 1451505679, "last_edit_date": 1451526794, "question_id": 34536410, "link": "https://stackoverflow.com/questions/34536410/ftp-can-connect-w-o-authentication-in-browser-but-not-in-code", "title": "FTP can connect w/o authentication in browser but not in code", "body": "<p>I am trying to connect to an FTP server in a python script. I can access the FTP server from the browser without issue, but when I try to run the following:</p>\n\n<pre><code>ftp = FTP('garner.ucsd.edu')\nftp.cwd('pub/products')\n</code></pre>\n\n<p>it fails with <code>error_perm: 530 Please login with USER and PASS.</code></p>\n\n<p>But I don't have a username and password for this FTP--how come my browser seems to get past this authentication just fine?</p>\n"}, {"tags": ["python", "tensorflow", "machine-learning", "reinforcement-learning", "q-learning"], "answers": [{"tags": [], "owner": {"reputation": 368, "user_id": 5732171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/018b9032d8e5d078b53b0d9d57ab8b89?s=128&d=identicon&r=PG&f=1", "display_name": "gdahl", "link": "https://stackoverflow.com/users/5732171/gdahl"}, "is_accepted": true, "score": 14, "last_activity_date": 1455769175, "last_edit_date": 1455769175, "creation_date": 1451555227, "answer_id": 34544424, "question_id": 34536340, "link": "https://stackoverflow.com/questions/34536340/how-to-use-tensorflow-optimizer-without-recomputing-activations-in-reinforcement/34544424#34544424", "title": "How to use Tensorflow Optimizer without recomputing activations in reinforcement learning program that returns control after each iteration?", "body": "<p>Right now what you want to do is very difficult in Tensorflow (0.6). Your best bet is to bite the bullet and call run multiple times at the cost of recomputing the activations. However, we are very aware of this issue internally. A prototype \"partial run\" solution is in the works, but there is no timeline for its completion right now. Since a truly satisfactory answer might require modifying tensorflow itself, you could also make a github issue for this and see if anyone else has anything to say on this there.</p>\n\n<p>Edit: Experimental support for partial_run is now in. <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/client/session.py#L317\" rel=\"noreferrer\">https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/client/session.py#L317</a></p>\n"}], "owner": {"reputation": 505, "user_id": 5547331, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-TA13inzxJOA/AAAAAAAAAAI/AAAAAAAAACM/Q0MXUet-bJI/photo.jpg?sz=128", "display_name": "Jonathon Byrd", "link": "https://stackoverflow.com/users/5547331/jonathon-byrd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3010, "favorite_count": 4, "accepted_answer_id": 34544424, "answer_count": 1, "score": 13, "last_activity_date": 1579531654, "creation_date": 1451505372, "last_edit_date": 1579531654, "question_id": 34536340, "link": "https://stackoverflow.com/questions/34536340/how-to-use-tensorflow-optimizer-without-recomputing-activations-in-reinforcement", "title": "How to use Tensorflow Optimizer without recomputing activations in reinforcement learning program that returns control after each iteration?", "body": "<p>EDIT(1/3/16): <a href=\"https://github.com/tensorflow/tensorflow/issues/672\" rel=\"nofollow noreferrer\">corresponding github issue</a></p>\n\n<p>I'm using Tensorflow (Python interface) to implement a <code>q-learning</code> agent with function approximation trained using <code>stochastic gradient descent</code>.</p>\n\n<p>At each iteration of the experiment, a step function in the agent is called that updates the parameters of the approximator based on the new reward and activation, and then chooses a new action to perform.</p>\n\n<p>Here is the problem(with reinforcement learning jargon):</p>\n\n<ul>\n<li>The agent computes its state-action value predictions to choose an action.</li>\n<li>Then gives control back to another program that simulates a step in the environment.</li>\n<li>Now the agent's step function is called for the next iteration.  I want to use Tensorflow's Optimizer class to compute the gradients for me.  However, this requires both the state-action value predictions that I computed the last step AND their graph.  So:\n\n<ul>\n<li>If I run the optimizer on the whole graph, then it has to recompute the state-action value predictions.</li>\n<li>But, if I store the prediction (for the chosen action) as a variable, then feed it to the optimizer as a placeholder, it no longer has the graph necessary to compute the gradients.</li>\n<li>I can't just run it all in the same <code>sess.run()</code> the statement, because I have to give up control and return the chosen action in order to get the next observation and reward (to use in the target for the loss function).</li>\n</ul></li>\n</ul>\n\n<p>So, is there a way that I can (without reinforcement learning jargon):</p>\n\n<ol>\n<li>Compute part of my graph, returning value1.</li>\n<li>Return value1 to the calling program to compute value2</li>\n<li>In the next iteration, use value2 to as part of my loss function for gradient descent WITHOUT recomputing the part of the graph that computes value1.</li>\n</ol>\n\n<p>Of course, I've considered the obvious solutions:</p>\n\n<ol>\n<li><p>Just hardcode the gradients:  This would be easy for the really simple approximators I'm using now but would be really inconvenient if I were experimenting with different filters and activation functions in a big convolutional network.  I'd really like to use the Optimizer class if possible.</p></li>\n<li><p>Call the environment simulation from within the agent:  <a href=\"https://github.com/asrivat1/DeepLearningVideoGames/blob/master/deep_q_network.py#L135\" rel=\"nofollow noreferrer\">This system</a> does this, but it would make mine more complicated, and remove a lot of the modularity and structure.  So, I don't want to do this.</p></li>\n</ol>\n\n<p>I've read through the API and whitepaper several times, but can't seem to come up with a solution.  I was trying to come up with some way to feed the target into a graph to calculate the gradients, but couldn't come up with a way to build that graph automatically.</p>\n\n<p>If it turns out this isn't possible in TensorFlow yet, do you think it would be very complicated to implement this as a new operator? (I haven't used C++ in a couple of years, so the TensorFlow source looks a little intimidating.)  Or would I be better off switching to something like Torch, which has the imperative differentiation Autograd, instead of symbolic differentiation?</p>\n\n<p>Thanks for taking the time to help me out with this.  I was trying to make this as concise as I could.</p>\n\n<p>EDIT:  After doing some further searching I came across <a href=\"https://stackoverflow.com/questions/32082506/neural-network-reinforcement-learning-requiring-next-state-propagation-for-backp\">this previously asked question</a>.  It's a little different than mine (they are trying to avoid updating an LSTM network twice every iteration in Torch), and doesn't have any answers yet.</p>\n\n<p>Here is some code if that helps:</p>\n\n<pre><code>'''\n-Q-Learning agent for a grid-world environment.\n-Receives input as raw RGB pixel representation of the screen.\n-Uses an artificial neural network function approximator with one hidden layer\n\n2015 Jonathon Byrd\n'''\n\nimport random\nimport sys\n#import copy\nfrom rlglue.agent.Agent import Agent\nfrom rlglue.agent import AgentLoader as AgentLoader\nfrom rlglue.types import Action\nfrom rlglue.types import Observation\n\nimport tensorflow as tf\nimport numpy as np\n\nworld_size = (3,3)\ntotal_spaces = world_size[0] * world_size[1]\n\nclass simple_agent(Agent):\n\n    #Contants\n    discount_factor = tf.constant(0.5, name=\"discount_factor\")\n    learning_rate = tf.constant(0.01, name=\"learning_rate\")\n    exploration_rate = tf.Variable(0.2, name=\"exploration_rate\")  # used to be a constant :P\n    hidden_layer_size = 12\n\n    #Network Parameters - weights and biases\n    W = [tf.Variable(tf.truncated_normal([total_spaces * 3, hidden_layer_size], stddev=0.1), name=\"layer_1_weights\"), \n    tf.Variable(tf.truncated_normal([hidden_layer_size,4], stddev=0.1), name=\"layer_2_weights\")]\n    b = [tf.Variable(tf.zeros([hidden_layer_size]), name=\"layer_1_biases\"), tf.Variable(tf.zeros([4]), name=\"layer_2_biases\")]\n\n    #Input placeholders - observation and reward\n    screen = tf.placeholder(tf.float32, shape=[1, total_spaces * 3], name=\"observation\") #input pixel rgb values\n    reward = tf.placeholder(tf.float32, shape=[], name=\"reward\")\n\n    #last step data\n    last_obs = np.array([1, 2, 3], ndmin=4)\n    last_act = -1\n\n    #Last step placeholders\n    last_screen = tf.placeholder(tf.float32, shape=[1, total_spaces * 3], name=\"previous_observation\")\n    last_move = tf.placeholder(tf.int32, shape = [], name=\"previous_action\")\n\n    next_prediction = tf.placeholder(tf.float32, shape = [], name=\"next_prediction\")\n\n    step_count = 0\n\n    def __init__(self):\n        #Initialize computational graphs\n        self.q_preds = self.Q(self.screen)\n        self.last_q_preds = self.Q(self.last_screen)\n        self.action = self.choose_action(self.q_preds)\n        self.next_pred = self.max_q(self.q_preds)\n        self.last_pred = self.act_to_pred(self.last_move, self.last_q_preds) # inefficient recomputation\n        self.loss = self.error(self.last_pred, self.reward, self.next_prediction)\n        self.train = self.learn(self.loss)\n        #Summaries and Statistics\n        tf.scalar_summary(['loss'], self.loss)\n        tf.scalar_summary('reward', self.reward)\n        #w_hist = tf.histogram_summary(\"weights\", self.W[0])\n        self.summary_op = tf.merge_all_summaries()\n        self.sess = tf.Session()\n        self.summary_writer = tf.train.SummaryWriter('tensorlogs', graph_def=self.sess.graph_def)\n\n\n    def agent_init(self,taskSpec):\n        print(\"agent_init called\")\n        self.sess.run(tf.initialize_all_variables())\n\n    def agent_start(self,observation):\n        #print(\"agent_start called, observation = {0}\".format(observation.intArray))\n        o = np.divide(np.reshape(np.asarray(observation.intArray), (1,total_spaces * 3)), 255)\n        return self.control(o)\n\n    def agent_step(self,reward, observation):\n        #print(\"agent_step called, observation = {0}\".format(observation.intArray))\n        print(\"step, reward: {0}\".format(reward))\n        o = np.divide(np.reshape(np.asarray(observation.intArray), (1,total_spaces * 3)), 255)\n\n        next_prediction = self.sess.run([self.next_pred], feed_dict={self.screen:o})[0]\n\n        if self.step_count % 10 == 0:\n            summary_str = self.sess.run([self.summary_op, self.train], \n                feed_dict={self.reward:reward, self.last_screen:self.last_obs, \n                self.last_move:self.last_act, self.next_prediction:next_prediction})[0]\n\n            self.summary_writer.add_summary(summary_str, global_step=self.step_count)\n        else:\n            self.sess.run([self.train], \n                feed_dict={self.screen:o, self.reward:reward, self.last_screen:self.last_obs, \n                self.last_move:self.last_act, self.next_prediction:next_prediction})\n\n        return self.control(o)\n\n    def control(self, observation):\n        results = self.sess.run([self.action], feed_dict={self.screen:observation})\n        action = results[0]\n\n        self.last_act = action\n        self.last_obs = observation\n\n        if (action==0):  # convert action integer to direction character\n            action = 'u'\n        elif (action==1):\n            action = 'l'\n        elif (action==2):\n            action = 'r'\n        elif (action==3):\n            action = 'd'\n        returnAction=Action()\n        returnAction.charArray=[action]\n        #print(\"return action returned {0}\".format(action))\n        self.step_count += 1\n        return returnAction\n\n    def Q(self, obs):  #calculates state-action value prediction with feed-forward neural net\n        with tf.name_scope('network_inference') as scope:\n            h1 = tf.nn.relu(tf.matmul(obs, self.W[0]) + self.b[0])\n            q_preds = tf.matmul(h1, self.W[1]) + self.b[1] #linear activation\n            return tf.reshape(q_preds, shape=[4])\n\n    def choose_action(self, q_preds):  #chooses action epsilon-greedily\n        with tf.name_scope('action_choice') as scope:\n            exploration_roll = tf.random_uniform([])\n            #greedy_action = tf.argmax(q_preds, 0)  # gets the action with the highest predicted Q-value\n            #random_action = tf.cast(tf.floor(tf.random_uniform([], maxval=4.0)), tf.int64)\n\n            #exploration rate updates\n            #if self.step_count % 10000 == 0:\n                #self.exploration_rate.assign(tf.div(self.exploration_rate, 2))\n\n            return tf.select(tf.greater_equal(exploration_roll, self.exploration_rate), \n                tf.argmax(q_preds, 0),   #greedy_action\n                tf.cast(tf.floor(tf.random_uniform([], maxval=4.0)), tf.int64))  #random_action\n\n        '''\n        Why does this return NoneType?:\n\n        flag = tf.select(tf.greater_equal(exploration_roll, self.exploration_rate), 'g', 'r')\n        if flag == 'g':  #greedy\n            return tf.argmax(q_preds, 0) # gets the action with the highest predicted Q-value\n        elif flag == 'r':  #random\n            return tf.cast(tf.floor(tf.random_uniform([], maxval=4.0)), tf.int64)\n        '''\n\n    def error(self, last_pred, r, next_pred):\n        with tf.name_scope('loss_function') as scope:\n            y = tf.add(r, tf.mul(self.discount_factor, next_pred)) #target\n            return tf.square(tf.sub(y, last_pred)) #squared difference error\n\n\n    def learn(self, loss): #Update parameters using stochastic gradient descent\n        #TODO:  Either figure out how to avoid computing the q-prediction twice or just hardcode the gradients.\n        with tf.name_scope('train') as scope:\n            return tf.train.GradientDescentOptimizer(self.learning_rate).minimize(loss, var_list=[self.W[0], self.W[1], self.b[0], self.b[1]])\n\n\n    def max_q(self, q_preds):\n        with tf.name_scope('greedy_estimate') as scope:\n            return tf.reduce_max(q_preds)  #best predicted action from current state\n\n    def act_to_pred(self, a, preds): #get the value prediction for action a\n        with tf.name_scope('get_prediction') as scope:\n            return tf.slice(preds, tf.reshape(a, shape=[1]), [1])\n\n\n    def agent_end(self,reward):\n        pass\n\n    def agent_cleanup(self):\n        self.sess.close()\n        pass\n\n    def agent_message(self,inMessage):\n        if inMessage==\"what is your name?\":\n            return \"my name is simple_agent\";\n        else:\n            return \"I don't know how to respond to your message\";\n\nif __name__==\"__main__\":\n    AgentLoader.loadAgent(simple_agent())\n</code></pre>\n"}, {"tags": ["python", "data-structures", "keyboard"], "comments": [{"owner": {"reputation": 1021, "user_id": 4347028, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-auy7x56KV74/AAAAAAAAAAI/AAAAAAAAAEY/wpn21S0A7KM/photo.jpg?sz=128", "display_name": "Jeff Irwin", "link": "https://stackoverflow.com/users/4347028/jeff-irwin"}, "edited": false, "score": 0, "creation_date": 1451664997, "post_id": 34536277, "comment_id": 56858577, "body": "Do you consider diagonal keys as adjacent?  For example, &quot;a&quot; and &quot;w&quot;, or &quot;q&quot; and &quot;s&quot;?"}], "answers": [{"tags": [], "owner": {"reputation": 341, "user_id": 1566443, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e0a40af043dd0cd852faa502fde0cc8e?s=128&d=identicon&r=PG", "display_name": "Mehran Meidani", "link": "https://stackoverflow.com/users/1566443/mehran-meidani"}, "is_accepted": true, "score": 1, "last_activity_date": 1451506947, "creation_date": 1451506947, "answer_id": 34536703, "question_id": 34536277, "link": "https://stackoverflow.com/questions/34536277/checking-a-string-for-adjacent-keyboard-characters/34536703#34536703", "title": "Checking a string for adjacent keyboard characters", "body": "<p>Why don't you assign a number to each character in keyboard and check if they are neighbor by subtracting them? Something like this:<br>\nFirst define a dictionary to store the numbers:</p>\n\n<pre><code>n = {}\n\nn['q'] = 1\nn['w'] = 2\nn['e'] = 3\n... n['p'] = 10\n</code></pre>\n\n<p>And for the second row, start counting from 20, to avoid <code>a</code> and <code>p</code> becomes neighbour:</p>\n\n<pre><code>n['a'] = 20\nn['s'] = 21\n... n['l'] = 28\n</code></pre>\n\n<p>Then, you can use this function:</p>\n\n<pre><code>def check_neighbourhood(a,b):\n    return n[a] == n[b] or abs(n[a] - n[b]) == 1 or abs(n[a] - n[b]) == 19\n</code></pre>\n\n<p><code>n[a] - n[q] = 19</code>, So we should handle this one.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5597655"}, "edited": false, "score": 0, "creation_date": 1451579663, "post_id": 34537348, "comment_id": 56840284, "body": "Hi. Although the code was indeed well commented, it is a tad too complex for me to follow with my rudimentary programming skills. From what I managed to gather, your code gets the job done and even gives pairs of adjacent characters. Later in my program, I will have needed to have stored these pairs so I will be saving your code to study further later.  I honestly cannot use it though, because I do not at all feel comfortable using something I don&#39;t fully understand. Thanks alot for your answer still; I will come back to it when my skills have developed a bit"}, {"owner": {"reputation": 1704, "user_id": 4241180, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y8rWG.png?s=128&g=1", "display_name": "vrs", "link": "https://stackoverflow.com/users/4241180/vrs"}, "edited": false, "score": 0, "creation_date": 1451593363, "post_id": 34537348, "comment_id": 56844916, "body": "@Kos Sure, it&#39;s always better to you the code you fully understand. Though reading through the code you are not 100% comfortable will sharpen your skills. It&#39;s even easier when someone walk you through the parts you don&#39;t quite get. So if you want, feel free to ask any specific questions about my code and I&#39;ll try to help you."}], "tags": [], "owner": {"reputation": 1704, "user_id": 4241180, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y8rWG.png?s=128&g=1", "display_name": "vrs", "link": "https://stackoverflow.com/users/4241180/vrs"}, "is_accepted": false, "score": 0, "last_activity_date": 1451592484, "last_edit_date": 1451592484, "creation_date": 1451510089, "answer_id": 34537348, "question_id": 34536277, "link": "https://stackoverflow.com/questions/34536277/checking-a-string-for-adjacent-keyboard-characters/34537348#34537348", "title": "Checking a string for adjacent keyboard characters", "body": "<p>I'd do it this way (assume KeyboardRowN are present in the code):</p>\n\n<pre><code>from itertools import combinations\n\nRows = [KeyboardRow1, KeyboardRow2, KeyboardRow3, KeyboardRow4, \\\n        KeyboardRow1S, KeyboardRow2S, KeyboardRow3S, KeyboardRow4S]\n\nrow_len = len(KeyboardRow1)\n\ndef pass2index(passwd):\n    \"\"\"Produce a list of pairs (coordinates) for each character of a given passphrase. \n    Each pair encodes row and column in a list of keyboard keys.\"\"\"\n    coordinates = []\n    for c in passwd:\n        for i, r in enumerate(Rows):\n            # check if password's char is in the current row\n            try:\n                # modulo 4 used for shifted keys,\n                # so that 'k' and 'K' have the same row index\n                coordinates.append((i % 4, r.index(c)))\n            except:\n                pass\n    return coordinates\n\ndef adjacency(coords):\n    \"\"\"Produce a number of adjacency for a list of coordinates.\"\"\"\n    adjacent = 0\n    # produce combinations of coordinates to compare each two letters\n    # i.e. combinations of two coordinates\n    for pairs in combinations(coords, 2):\n        # two coordinates are adjacent if their rows and columns\n        # differ by +/- 1\n        if (abs(pairs[0][0] - pairs[1][0]) &lt; 2) \\\n           and (abs(pairs[0][1] - pairs[1][1]) &lt; 2):\n            # print(pairs) # used for examples below\n            adjacent += 1\n    return adjacent\n</code></pre>\n\n<p>The code is well commented, so hopefully you don't need additional explanations for it.</p>\n\n<p>You can check it as follows (I commented out <code>print(pairs)</code> so that you see why we get these results):</p>\n\n<pre><code>&gt;&gt;&gt; adjacency(pass2index('jko'))\n((2, 7), (2, 8))\n((2, 8), (1, 9))\n2\n&gt;&gt;&gt; adjacency(pass2index('aqzsp'))\n((2, 1), (1, 1))\n((2, 1), (3, 1))\n((2, 1), (2, 2))\n((1, 1), (2, 2))\n((3, 1), (2, 2))\n5\n&gt;&gt;&gt; adjacency(pass2index('Kl'))\n((2, 8), (2, 9))\n1\n&gt;&gt;&gt; adjacency(pass2index('7Yu'))\n((0, 7), (1, 6))\n((0, 7), (1, 7))\n((1, 6), (1, 7))\n3\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5597655"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1546, "favorite_count": 0, "accepted_answer_id": 34536703, "answer_count": 2, "score": 0, "last_activity_date": 1451592484, "creation_date": 1451505104, "question_id": 34536277, "link": "https://stackoverflow.com/questions/34536277/checking-a-string-for-adjacent-keyboard-characters", "title": "Checking a string for adjacent keyboard characters", "body": "<p>I'm trying to see if characters in a string are adjacent on the keyboard.</p>\n\n<p>This code initializes the keyboard as the 3d array \"Array3\":</p>\n\n<pre><code>KeyboardRow1 = [\"`\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"0\", \"-\", \"=\", \"\"]\nKeyboardRow2 = [\"\", \"q\", \"w\", \"e\", \"r\", \"t\", \"y\", \"u\", \"i\", \"o\", \"p\", \"[\", \"]\", \"\"] \nKeyboardRow3 = [\"\", \"a\", \"s\", \"d\", \"f\", \"g\", \"h\", \"j\", \"k\", \"l\", \";\", \"\", \"\", \"\"] \nKeyboardRow4 = [\"\", \"z\", \"x\", \"c\", \"v\", \"b\", \"n\", \"m\", \",\", \".\", \"/\", \"\", \"\", \"\"]\nKeyboardRow1S = [\"~\", \"!\", \"@\", \"#\", \"$\", \"%\", \"^\", \"&amp;\", \"*\", \"(\", \")\", \"_\", \"+\", \"\"]\nKeyboardRow2S = [\"\", \"Q\", \"W\", \"E\", \"R\", \"T\", \"Y\", \"U\", \"I\", \"O\", \"P\", \"{\", \"}\", \"|\"]\nKeyboardRow3S = [\"\",\"A\", \"S\", \"D\", \"F\", \"G\", \"H\", \"J\", \"K\", \"L\", \":\", \"\", \"\", \"\"] \nKeyboardRow4S = [\"\", \"Z\", \"X\", \"C\", \"V\", \"B\", \"N\", \"M\", \"&lt;\", \"&gt;\", \"?\", \"\", \"\", \"\"]\nArray2R = [KeyboardRow1, KeyboardRow2, KeyboardRow3, KeyboardRow4]\nArray2S = [KeyboardRow1S, KeyboardRow2S, KeyboardRow3S, KeyboardRow4S]\nArray3 = [Array2R, Array2S]\n</code></pre>\n\n<p>This code turns each character of the entered password into coordinates of where it is in the array and stores those coordinates in KeyboardPositions.</p>\n\n<pre><code>KeyboardPositions = []\nfor z in range(0,PasswordLength):\n    for i in range(2):\n        for j in range(4):\n            for k in range (14):\n                if Password[z] == str(Array3[i][j][k]):\n                    KeyboardPositions.append((i,j,k))\n</code></pre>\n\n<p>This code, where I am having trouble, checks for adjacency.</p>\n\n<pre><code>  for x in range(PasswordLength-1):\n        for y in range(3):\n            if KeyboardPositions[x][y] == (KeyboardPositions[x+1][y]-1) or KeyboardPositions[x][y] == (KeyboardPositions[x+1][y]+1):\n                Adjacency = Adjacency + 1\n\nprint(\"There are \" + str(Adjacency) + \" adjacent characters\")\n</code></pre>\n\n<p>What the last piece of code is trying to do is see if the row, column or shift (if shift is held, 1 or 0) coordinates are +- 1 of each other. However, it counts things like \"t\" and \"a\" adjacent, because they are only 1 row apart. How can I fix this ? Thanks</p>\n"}, {"tags": ["python", "numpy", "linear-algebra", "convolution", "toeplitz"], "answers": [{"comments": [{"owner": {"reputation": 623, "user_id": 5252003, "user_type": "registered", "accept_rate": 92, "profile_image": "https://graph.facebook.com/813173365469357/picture?type=large", "display_name": "Francisco Vargas", "link": "https://stackoverflow.com/users/5252003/francisco-vargas"}, "edited": false, "score": 0, "creation_date": 1451508293, "post_id": 34536431, "comment_id": 56815832, "body": "would this work for 2x2 numpy arrays as input signals ?"}, {"owner": {"reputation": 62045, "user_id": 1461210, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fa93b9461ed24899945403cae69e02ee?s=128&d=identicon&r=PG", "display_name": "ali_m", "link": "https://stackoverflow.com/users/1461210/ali-m"}, "reply_to_user": {"reputation": 623, "user_id": 5252003, "user_type": "registered", "accept_rate": 92, "profile_image": "https://graph.facebook.com/813173365469357/picture?type=large", "display_name": "Francisco Vargas", "link": "https://stackoverflow.com/users/5252003/francisco-vargas"}, "edited": false, "score": 0, "creation_date": 1451508667, "post_id": 34536431, "comment_id": 56816008, "body": "No, <code>scipy.linalg.toeplitz</code> treats all of its inputs as 1D arrays. I&#39;m not sure what a 2x2 input array would mean in this context, anyway."}, {"owner": {"reputation": 623, "user_id": 5252003, "user_type": "registered", "accept_rate": 92, "profile_image": "https://graph.facebook.com/813173365469357/picture?type=large", "display_name": "Francisco Vargas", "link": "https://stackoverflow.com/users/5252003/francisco-vargas"}, "edited": false, "score": 0, "creation_date": 1451508810, "post_id": 34536431, "comment_id": 56816076, "body": "convolution between an image and a an image kernel for example."}, {"owner": {"reputation": 623, "user_id": 5252003, "user_type": "registered", "accept_rate": 92, "profile_image": "https://graph.facebook.com/813173365469357/picture?type=large", "display_name": "Francisco Vargas", "link": "https://stackoverflow.com/users/5252003/francisco-vargas"}, "edited": false, "score": 0, "creation_date": 1451508995, "post_id": 34536431, "comment_id": 56816160, "body": "which apparently can be achieved in matlab through this method <a href=\"http://stackoverflow.com/questions/16798888/2-d-convolution-as-a-matrix-matrix-multiplication\" title=\"2 d convolution as a matrix matrix multiplication\">stackoverflow.com/questions/16798888/&hellip;</a>"}, {"owner": {"reputation": 62045, "user_id": 1461210, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fa93b9461ed24899945403cae69e02ee?s=128&d=identicon&r=PG", "display_name": "ali_m", "link": "https://stackoverflow.com/users/1461210/ali-m"}, "reply_to_user": {"reputation": 623, "user_id": 5252003, "user_type": "registered", "accept_rate": 92, "profile_image": "https://graph.facebook.com/813173365469357/picture?type=large", "display_name": "Francisco Vargas", "link": "https://stackoverflow.com/users/5252003/francisco-vargas"}, "edited": false, "score": 1, "creation_date": 1451509151, "post_id": 34536431, "comment_id": 56816241, "body": "As in that MATLAB question, if your kernel is x-y separable then you could express it as two 1D vectors of weights, then construct two separate Toeplitz matrices as above and compute two separate dot products along different axes of your image array."}], "tags": [], "owner": {"reputation": 62045, "user_id": 1461210, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fa93b9461ed24899945403cae69e02ee?s=128&d=identicon&r=PG", "display_name": "ali_m", "link": "https://stackoverflow.com/users/1461210/ali-m"}, "is_accepted": true, "score": 9, "last_activity_date": 1451506951, "last_edit_date": 1451506951, "creation_date": 1451505753, "answer_id": 34536431, "question_id": 34536264, "link": "https://stackoverflow.com/questions/34536264/how-can-i-generate-a-toeplitz-matrix-in-the-correct-form-for-performing-discrete/34536431#34536431", "title": "How can I generate a Toeplitz matrix in the correct form for performing discrete convolution?", "body": "<p>Yes, you can use <a href=\"http://docs.scipy.org/doc/scipy-0.14.0/reference/generated/scipy.linalg.toeplitz.html\" rel=\"noreferrer\"><code>scipy.linalg.toeplitz</code></a>:</p>\n\n<pre><code>import numpy as np\nfrom scipy import linalg\n\nh = np.arange(1, 6)\n\npadding = np.zeros(h.shape[0] - 1, h.dtype)\nfirst_col = np.r_[h, padding]\nfirst_row = np.r_[h[0], padding]\n\nH = linalg.toeplitz(first_col, first_row)\n\nprint(repr(H))\n# array([[1, 0, 0, 0, 0],\n#        [2, 1, 0, 0, 0],\n#        [3, 2, 1, 0, 0],\n#        [4, 3, 2, 1, 0],\n#        [5, 4, 3, 2, 1],\n#        [0, 5, 4, 3, 2],\n#        [0, 0, 5, 4, 3],\n#        [0, 0, 0, 5, 4],\n#        [0, 0, 0, 0, 5]])\n</code></pre>\n"}], "owner": {"reputation": 623, "user_id": 5252003, "user_type": "registered", "accept_rate": 92, "profile_image": "https://graph.facebook.com/813173365469357/picture?type=large", "display_name": "Francisco Vargas", "link": "https://stackoverflow.com/users/5252003/francisco-vargas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6070, "favorite_count": 2, "accepted_answer_id": 34536431, "answer_count": 1, "score": 5, "last_activity_date": 1451507039, "creation_date": 1451505050, "last_edit_date": 1451507039, "question_id": 34536264, "link": "https://stackoverflow.com/questions/34536264/how-can-i-generate-a-toeplitz-matrix-in-the-correct-form-for-performing-discrete", "title": "How can I generate a Toeplitz matrix in the correct form for performing discrete convolution?", "body": "<p>Discrete convolution can be performed via the Toeplitz matrix, as shown  below <a href=\"https://en.wikipedia.org/wiki/Toeplitz_matrix#Discrete_convolution\" rel=\"noreferrer\">(Wiki article)</a>:</p>\n\n<p><a href=\"https://i.stack.imgur.com/xB7cv.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/xB7cv.png\" alt=\"enter image description here\"></a></p>\n\n<p>Note that this is not the exact same form as as the general Toeplitz matrix, but it has experienced various shifts and zero-paddings.</p>\n\n<p>Is there a way to achieve this in numpy purely based on <code>roll</code>, <code>hstack</code> etc., i.e. without using any <code>for</code> loops? I have tried all sorts of shifts but I can't really get it in to the form shown above.</p>\n"}, {"tags": ["python", "file", "dialog"], "answers": [{"tags": [], "owner": {"reputation": 541, "user_id": 5678325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7adec05602a8899beda24e1e69390687?s=128&d=identicon&r=PG", "display_name": "oystein-hr", "link": "https://stackoverflow.com/users/5678325/oystein-hr"}, "is_accepted": false, "score": 0, "last_activity_date": 1451519493, "last_edit_date": 1495535300, "creation_date": 1451519493, "answer_id": 34539047, "question_id": 34536220, "link": "https://stackoverflow.com/questions/34536220/implementing-error-handling-within-filedialog-python-3/34539047#34539047", "title": "Implementing Error handling within Filedialog Python 3", "body": "<p>There seems to be some space and indentation errors in the code, you might want to fix that. And when it comes to the try / except part, what you are trying is:</p>\n\n<pre><code>self.settings[\"template\"].set(FileSelection)\n</code></pre>\n\n<p>So if the except is triggered every time, there is something wrong with that code. Without knowing the context of what that is, I can only guess that it should be this instead:</p>\n\n<pre><code>self.settings[\"template\"] = FileSelection\n</code></pre>\n\n<p>This does not check in any way if it is a txt file or not. Read <a href=\"https://stackoverflow.com/questions/2472221/how-to-check-if-a-file-is-a-textfile\">these answers</a> to see solutions for checking if it is a text file. If you want to limit the filetypes to only open <code>.txt</code> files, you could always remove the other filetypes.</p>\n"}], "owner": {"reputation": 51, "user_id": 4901516, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh5.googleusercontent.com/-nP2iLGY0SBg/AAAAAAAAAAI/AAAAAAAAAMA/ZcZt8b849u8/photo.jpg?sz=128", "display_name": "Arlidio Dobra", "link": "https://stackoverflow.com/users/4901516/arlidio-dobra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 196, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1502786034, "creation_date": 1451504908, "last_edit_date": 1502786034, "question_id": 34536220, "link": "https://stackoverflow.com/questions/34536220/implementing-error-handling-within-filedialog-python-3", "title": "Implementing Error handling within Filedialog Python 3", "body": "<p>I'm trying to display an error within my program only IF a invalid file is selected within the file dialog function. I have tried using <code>try</code> and <code>except</code> and although it works, the error is displayed even if a valid file is selected. I want an error to be displayed only if a invalid file is selected within filedialog e.g. \".exe\" file type. Below is a sample of my code</p>\n\n<pre><code>def SelectFile():\nglobal FileSelection                                                                                                                                                                                \nFileSelection = filedialog.askopenfilename(filetypes=((\"*.txt files\", \".txt\"), (\"All Files\", \"*.*\"), (\"*.ARLIDIO-IS-SEXY files\")))                             \nif  FileSelection:\n    try:\n        self.settings[\"template\"].set(FileSelection)\n    except:\n        messagebox.showerror(\"ERROR\", \"Invalid File Type Please Select A Valid Text File\")\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 6492, "user_id": 341744, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/T0jno.png?s=128&g=1", "display_name": "ninMonkey", "link": "https://stackoverflow.com/users/341744/ninmonkey"}, "edited": false, "score": 2, "creation_date": 1451505128, "post_id": 34536173, "comment_id": 56814200, "body": "Your class code is not indented properly. Does it match your code? It also looks like you shadowed Card. Use capital letter on class declaration, lowercase for an instance. The same applies to your attributes. Check out <b>pep8</b> for details on naming."}], "answers": [{"comments": [{"owner": {"reputation": 3409, "user_id": 3105485, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b4c41125ff9c7b20ca07d0845e7af7ae?s=128&d=identicon&r=PG&f=1", "display_name": "Caridorc", "link": "https://stackoverflow.com/users/3105485/caridorc"}, "edited": false, "score": 0, "creation_date": 1451505172, "post_id": 34536273, "comment_id": 56814220, "body": "The second example should probably be <code>card.PrintCard</code> right?"}, {"owner": {"reputation": 69452, "user_id": 953482, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/T3HH6.png?s=128&g=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/953482/kevin"}, "reply_to_user": {"reputation": 3409, "user_id": 3105485, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b4c41125ff9c7b20ca07d0845e7af7ae?s=128&d=identicon&r=PG&f=1", "display_name": "Caridorc", "link": "https://stackoverflow.com/users/3105485/caridorc"}, "edited": false, "score": 1, "creation_date": 1451505743, "post_id": 34536273, "comment_id": 56814498, "body": "sure, it can be <code>card.PrintCard()</code>, as long as you do <code>card=deck.RemoveCard()</code> on the previous line."}], "tags": [], "owner": {"reputation": 69452, "user_id": 953482, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/T3HH6.png?s=128&g=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/953482/kevin"}, "is_accepted": true, "score": 2, "last_activity_date": 1451505094, "creation_date": 1451505094, "answer_id": 34536273, "question_id": 34536173, "link": "https://stackoverflow.com/questions/34536173/typeerror-nonetype-object-is-not-callable-class-initialize/34536273#34536273", "title": "TypeError: &#39;NoneType&#39; object is not callable Class initialize", "body": "<pre><code>    Card=deck.RemoveCard()\n    Card.PrintCard()\n</code></pre>\n\n<p>Once this code executes, the class <code>Card</code> is no longer accessible; its value has been overshadowed. Later, when you do <code>Card(int(abs(...))</code>, Card refers to whatever <code>RemoveCard()</code> returned, rather than the <code>Card</code> class.</p>\n\n<p>Change the name of your variable to something else so this collision does not occur.</p>\n\n<pre><code>    thing=deck.RemoveCard()\n    thing.PrintCard()\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 5731930, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ee6c5e946ee2995cd6ccb293b8ad0cda?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Hermon", "link": "https://stackoverflow.com/users/5731930/daniel-hermon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1304, "favorite_count": 0, "accepted_answer_id": 34536273, "answer_count": 1, "score": -1, "last_activity_date": 1452525057, "creation_date": 1451504713, "last_edit_date": 1452525057, "question_id": 34536173, "link": "https://stackoverflow.com/questions/34536173/typeerror-nonetype-object-is-not-callable-class-initialize", "title": "TypeError: &#39;NoneType&#39; object is not callable Class initialize", "body": "<p>I want to create 2 classes in python one is card and deck of cards ,Here's a part\nof the card class code:</p>\n\n<pre><code>class Card(object):\ndef __init__(self,Value,Type):\n    self.Value=Value\n    self.Type=Type\ndef PrintCard(self):\n    print \"&lt;\"+str(self.Value)+\",\"+str(self.Type)+\"&gt;\"\ndef CardToString(self):\n    return \"&lt;\"+str(self.Value)+\",\"+str(self.Type)+\"&gt;\"\n</code></pre>\n\n<p>Now here is the part of the deck class:</p>\n\n<pre><code>class Deck(object):\ndef __init__(self):\n    self.Cards=[]\n    self.NumOfCards=0\ndef FillDeck(self):\n    self.Cards=[]\n    self.NumOfCards=52\n    for i in range(1,5):\n        for j in range(2,15):\n            TempCard=Card(j,i)\n            self.Cards.append(TempCard)\ndef AddCard(self,OtherCard):\n    self.Cards.append(OtherCard)\n    self.NumOfCards=self.NumOfCards+1\ndef RemoveCard(self):\n    if self.NumOfCards&gt;=1:\n        TempCard=self.Cards[0]\n        self.Cards=self.Cards[1:]\n        self.NumOfCards=self.NumOfCards-1\n    else:\n        return None\n    return TempCard\ndef Count(self):\n    return self.NumOfCards\n</code></pre>\n\n<p>now the error occurs when I press first for mission 2 and then try to add a card (mission3) :</p>\n\n<pre><code>symbol=[\"diamond\",\"spade\",\"club\",\"heart\"]\nif TaskMission==2:\n    if deck.Count()&gt;0:\n        Card=deck.RemoveCard()\n        Card.PrintCard()\n#Do Mission3\nif TaskMission==3:\n    flag=False\n    x=raw_input()\n    x=str.split(x)\n    yolo=str(x[0]).isdigit()\n    for i in range(5):\n        if symbol[i]==x[1]:\n            flag=i+1\n            break\n    if flag!=False and yolo==True:\n        card=Card(int(abs(int(x[0]))),symbol[flag-1])\n        deck.AddCard(card)\n</code></pre>\n\n<p>now the error is in the line :<code>card=Card(int(abs(int(x[0]))),symbol[flag-1])</code></p>\n"}, {"tags": ["python", "http", "proxy"], "owner": {"reputation": 11, "user_id": 3130325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b01930c051de588d16670ef962ae4f3?s=128&d=identicon&r=PG&f=1", "display_name": "JustMe", "link": "https://stackoverflow.com/users/3130325/justme"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 813, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1451504665, "creation_date": 1451504665, "last_edit_date": 1495535644, "question_id": 34536157, "link": "https://stackoverflow.com/questions/34536157/python-http-error-407-proxy-authentication-required-using-defaultcredentials", "title": "Python HTTP Error 407: Proxy Authentication Required Using DefaultCredentials", "body": "<p>I am working on an environment with NTLM proxy authentication and I want to implement HTTP communication in python. The program is an in-house development that will run on several computers, not just my own.</p>\n\n<p>While the solution mentioned on this web page (<a href=\"https://stackoverflow.com/questions/11763028/python-3-urllib-http-error-407-proxy-authentication-required\">Python 3 - urllib, HTTP Error 407: Proxy Authentication Required</a>)  allows this, it requires to input user name and password. My requirement is that the python program must use the established session, where user already authenticated as the program must work on several endpoints I don\u00b4t know their passwords so this is not an option.</p>\n\n<p>I have been successful in writing the following powershell script that is able to do this. It will automatically. GetsystemWebProxy will automatically determine the defined proxy and, defaultcredentials will use the credentials from the current established session.</p>\n\n<pre><code>$url=\"https://weather.yahoo.com/\"\n$proxy = [System.Net.WebRequest]::GetSystemWebProxy()\n$proxy.Credentials = [System.Net.CredentialCache]::DefaultCredentials\n$wc = new-object system.net.webclient\n$wc.proxy = $proxy\n$wc.downloadString($url)\n</code></pre>\n\n<p>Porting the application to power shell would be time consuming. How can achieve the same in python?</p>\n\n<p><a href=\"https://stackoverflow.com/questions/571429/powershell-web-requests-and-proxies\">PowerShell, Web Requests, and Proxies</a></p>\n"}, {"tags": ["python", "python-3.x", "scrapy", "lxml"], "comments": [{"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 2, "creation_date": 1451506096, "post_id": 34536149, "comment_id": 56814644, "body": "have you try to use Python 3.4 ? Or prebuild packets for windows <a href=\"http://www.lfd.uci.edu/~gohlke/pythonlibs/\" rel=\"nofollow noreferrer\">lfd.uci.edu/~gohlke/pythonlibs</a> ? Or <a href=\"http://docs.continuum.io/anaconda/pkg-docs\" rel=\"nofollow noreferrer\">Anaconda distribution</a>"}, {"owner": {"reputation": 379, "user_id": 4615807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/653b39c183d58fc2cd1c6627dffee8ce?s=128&d=identicon&r=PG&f=1", "display_name": "disflux", "link": "https://stackoverflow.com/users/4615807/disflux"}, "reply_to_user": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1451506364, "post_id": 34536149, "comment_id": 56814777, "body": "This is oddly coincidental. Someone had a slightly similar problem where I pointed them to @furas recommendation of Christoph Golke&#39;s compiled lxml. <a href=\"http://stackoverflow.com/questions/34535703/attempting-to-install-python-docx-error-unable-to-find-vcvarsall-bat/34535964#34535964\">see here</a>"}], "answers": [{"comments": [{"owner": {"reputation": 5668, "user_id": 712526, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/06e3c4065e9d08da698b4f4de3959294?s=128&d=identicon&r=PG", "display_name": "jpaugh", "link": "https://stackoverflow.com/users/712526/jpaugh"}, "edited": false, "score": 0, "creation_date": 1593641595, "post_id": 38566861, "comment_id": 110855808, "body": "The installers now seem to require a specific version of Python to be installed."}], "tags": [], "owner": {"reputation": 96, "user_id": 4316271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0aafcd27afa3331b4d19b5ecb490be5?s=128&d=identicon&r=PG&f=1", "display_name": "phase-contrast", "link": "https://stackoverflow.com/users/4316271/phase-contrast"}, "is_accepted": false, "score": 6, "last_activity_date": 1469447021, "creation_date": 1469447021, "answer_id": 38566861, "question_id": 34536149, "link": "https://stackoverflow.com/questions/34536149/cannot-install-lxml-on-windows-fatal-error-c1083-cannot-open-include-file-li/38566861#38566861", "title": "Cannot install lxml on windows, fatal error C1083: Cannot open include file: &#39;libxml/xmlversion.h&#39;", "body": "<p>I had the same problem, albeit using WinPython 64bit 2.7.3.1.</p>\n\n<p>I solved it using the precompiled installer which can be found here: <a href=\"https://pypi.python.org/pypi/lxml/3.3.3#downloads\" rel=\"noreferrer\">https://pypi.python.org/pypi/lxml/3.3.3#downloads</a></p>\n\n<p>Directly installing the package by running the .exe failed, because the installer could not find my python installation (altough it is registered). \nHowever, I then successfully used the WinPython Control Panel to install the package!</p>\n\n<p>edit: before that, I tried various things which I found on stackoverflow, including installing some Visual C++ (Python) compilers but none of that worked.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 7170685, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DRwm4oQDkRQ/AAAAAAAAAAI/AAAAAAAAADI/XWMoPy9hgdg/photo.jpg?sz=128", "display_name": "Randy Mujica", "link": "https://stackoverflow.com/users/7170685/randy-mujica"}, "is_accepted": false, "score": 2, "last_activity_date": 1479631802, "creation_date": 1479631802, "answer_id": 40702225, "question_id": 34536149, "link": "https://stackoverflow.com/questions/34536149/cannot-install-lxml-on-windows-fatal-error-c1083-cannot-open-include-file-li/40702225#40702225", "title": "Cannot install lxml on windows, fatal error C1083: Cannot open include file: &#39;libxml/xmlversion.h&#39;", "body": "<p>I had the same problem using Python 64bit 2.7.11 on Windows 10. </p>\n\n<p>After I tried installing scrapy using <code>pip</code> many times, I had success as follow:</p>\n\n<ol>\n<li><p>First I installed precompiled package <code>lxml v3.6.0</code> from <code>.exe</code>\n    file. It can be found here <a href=\"https://pypi.python.org/pypi/lxml/3.6.0\" rel=\"nofollow noreferrer\">https://pypi.python.org/pypi/lxml/3.6.0</a>.</p></li>\n<li><p>Finally, I ran <code>pip install scrapy</code> again and installation ended\n    successful.</p></li>\n</ol>\n\n<p>Happy hacking !!!  </p>\n"}], "owner": {"reputation": 1453, "user_id": 378628, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a05b6891227acbc9c31e5bcbfa12f4ad?s=128&d=identicon&r=PG", "display_name": "Freakishly", "link": "https://stackoverflow.com/users/378628/freakishly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10021, "favorite_count": 3, "answer_count": 2, "score": 6, "last_activity_date": 1479631802, "creation_date": 1451504638, "question_id": 34536149, "link": "https://stackoverflow.com/questions/34536149/cannot-install-lxml-on-windows-fatal-error-c1083-cannot-open-include-file-li", "title": "Cannot install lxml on windows, fatal error C1083: Cannot open include file: &#39;libxml/xmlversion.h&#39;", "body": "<p>Python noob, please bear with me. I used python installer for v3.5.1 from www.python.org. My intent was to use Scrapy to run some scripts.</p>\n\n<p>pip install scrapy failed, as did easy_install scrapy and others. I traced the error to a faulty install of lxml. Here is the error log. I've even tried easy_installing libxml2, I'm not sure how to proceed.</p>\n\n<pre><code>Building lxml version 3.5.0.\nBuilding without Cython.\nERROR: b\"'xslt-config' is not recognized as an internal or external command,\\r\\noperable program or batch file.\\r\\n\"\n** make sure the development packages of libxml2 and libxslt are installed **\n\nUsing build configuration of libxslt\ncl : Command line warning D9025 : overriding '/W3' with '/w'\nlxml.etree.c\nsrc\\lxml\\includes\\etree_defs.h(14): fatal error C1083: Cannot open include file: 'libxml/xmlversion.h': No such file or directory\nCompile failed: command 'C:\\\\Program Files (x86)\\\\Microsoft Visual Studio 14.0\\\\VC\\\\BIN\\\\cl.exe' failed with exit status 2\nxmlXPathInitck3f6zpk.c\nC:\\Users\\Rohan\\AppData\\Local\\Temp\\easy_install-47utdost\\lxml-3.5.0\\temp\\xmlXPathInitck3f6zpk.c(1): fatal error C1083: Cannot open include file: 'libxml/xpath.h': No such file or directory\n*********************************************************************************\nCould not find function xmlCheckVersion in library libxml2. Is libxml2 installed?\n*********************************************************************************\nerror: Setup script exited with error: command 'C:\\\\Program Files (x86)\\\\Microsoft Visual Studio 14.0\\\\VC\\\\BIN\\\\cl.exe' failed with exit status 2\n</code></pre>\n"}, {"tags": ["python", "c++", "pointers", "boost-python", "ros"], "answers": [{"tags": [], "owner": {"reputation": 1411, "user_id": 5805330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26778c360fbb08f6d7d1b10ebaabd015?s=128&d=identicon&r=PG&f=1", "display_name": "cromod", "link": "https://stackoverflow.com/users/5805330/cromod"}, "is_accepted": false, "score": 0, "last_activity_date": 1454239549, "creation_date": 1454239549, "answer_id": 35113288, "question_id": 34536076, "link": "https://stackoverflow.com/questions/34536076/how-to-send-pointer-input-to-c-program-using-python/35113288#35113288", "title": "How to send pointer input to c++ program using python?", "body": "<p>In your case, you try a wrong conversion between an <code>int</code> to a <code>shared_ptr</code>:</p>\n\n<pre><code>EnvironmentBasePtr penv = reinterpret_cast&lt;int *&gt;(i); // wrong conversion\n// where EnvironmentBasePtr is boost::shared_ptr&lt;EnvironmentBase&gt;\n</code></pre>\n\n<p>For this conversion I suggest using a constructor of <code>shared_ptr</code> and <code>a null deleter</code>. I see 3 possible solutions.</p>\n\n<p>You can define your <strong>own null deleter</strong> <code>void deleter(void* ptr) {}</code> then  :</p>\n\n<pre><code>boost::shared_ptr&lt;EnvironmentBase&gt; penv(reinterpret_cast&lt;EnvironmentBase *&gt;(i),&amp;deleter);\n</code></pre>\n\n<p>If your <strong>boost is 1.55 or less</strong>, you can include <code>&lt;boost/serialization/shared_ptr.hpp&gt;</code> then :</p>\n\n<pre><code>boost::shared_ptr&lt;EnvironmentBase&gt; penv(reinterpret_cast&lt;EnvironmentBase *&gt;(i),boost::serialization::null_deleter());\n</code></pre>\n\n<p>If your <strong>boost is 1.56 or more</strong>, you can include <code>&lt;boost/core/null_deleter.hpp&gt;</code> then :</p>\n\n<pre><code>boost::shared_ptr&lt;EnvironmentBase&gt; penv(reinterpret_cast&lt;EnvironmentBase *&gt;(i),boost:null_deleter());\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 4298033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/951526e4c339a63c560ff33394e77b02?s=128&d=identicon&r=PG&f=1", "display_name": "Saurabh Milind Dixit", "link": "https://stackoverflow.com/users/4298033/saurabh-milind-dixit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 153, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1454239549, "creation_date": 1451504295, "question_id": 34536076, "link": "https://stackoverflow.com/questions/34536076/how-to-send-pointer-input-to-c-program-using-python", "title": "How to send pointer input to c++ program using python?", "body": "<p>I have a function in c++ that returns vector. I am using BOOST_PYTHON_MODULE to call it from python. I want to send a pointer as input to the c++ function. I was trying to send the pointer as string. I know this is the worst method but some people are using it and it is working fine. For my case it isn't working. I am new in c++.</p>\n\n<p>Working case:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string.h&gt;\n#include &lt;sstream&gt;\nusing namespace std;\n\nint main(){\n    string s1 = \"0x7fff3e8aee1c\";\n    stringstream ss;\n    ss &lt;&lt; s1;\n    cout &lt;&lt; \"ss : \" &lt;&lt; ss &lt;&lt; endl;\n    long long unsigned int i;\n    ss &gt;&gt; hex &gt;&gt; i;\n    cout &lt;&lt; \"i : \" &lt;&lt; i &lt;&lt; endl;\n    int *i_ptr=reinterpret_cast&lt;int *&gt;(i);\n    cout &lt;&lt; \"pointer: \" &lt;&lt; i_ptr &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p>My case:</p>\n\n<pre><code>#include \"openrave-core.h\"\n#include \"ros/ros.h\"\n#include \"std_msgs/String.h\"\n#include \"valid_grasp_generator/GraspSnapshot.h\"\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;boost/python.hpp&gt;\n#include &lt;sstream&gt;\nusing namespace OpenRAVE;\nusing namespace std;\n\nboost::python::list get_penetration_depth(string env)\n{\n    vector&lt;double&gt; vec(9,0);\n    stringstream ss(env);\n    long long unsigned int i;\n    ss &gt;&gt; hex &gt;&gt; i;\n    EnvironmentBasePtr penv = reinterpret_cast&lt;int *&gt;(i);\n\n\n    //code for getting penetration value from the openrave\n\n    typename std::vector&lt;double&gt;::iterator iter;\n    boost::python::list list;\n    for (iter = vec.begin(); iter != vec.end(); ++iter) {\n        list.append(*iter);\n    }\n    return list;\n}\n\nBOOST_PYTHON_MODULE(libdepth_penetration){\n    using namespace boost::python;\n    def(\"get_penetration\", get_penetration_depth);\n}\n</code></pre>\n\n<p>Error during catkin_make:</p>\n\n<pre><code>/home/saurabh/catkin_ws/src/valid_grasp_generator/src/depth_penetration.cpp: In function \u2018boost::python::list get_penetration_depth(std::string)\u2019:\n/home/saurabh/catkin_ws/src/valid_grasp_generator/src/depth_penetration.cpp:37:56: error: conversion from \u2018int*\u2019 to non-scalar type \u2018OpenRAVE::EnvironmentBasePtr {aka boost::shared_ptr&lt;OpenRAVE::EnvironmentBase&gt;}\u2019 requested\n     EnvironmentBasePtr penv = reinterpret_cast&lt;int *&gt;(i);\n                                                        ^\nmake[2]: *** [valid_grasp_generator/CMakeFiles/depth_penetration.dir/src/depth_penetration.cpp.o] Error 1\nmake[1]: *** [valid_grasp_generator/CMakeFiles/depth_penetration.dir/all] Error 2\nmake: *** [all] Error 2\nInvoking \"make -j8 -l8\" failed\n</code></pre>\n"}, {"tags": ["python", "postgresql", "sqlalchemy"], "owner": {"reputation": 538, "user_id": 4054923, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PLnp5.jpg?s=128&g=1", "display_name": "Roberto Damian Alfonso", "link": "https://stackoverflow.com/users/4054923/roberto-damian-alfonso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 813, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1451504228, "creation_date": 1451504228, "question_id": 34536068, "link": "https://stackoverflow.com/questions/34536068/sqlalchemy-with-hint-not-working", "title": "sqlalchemy with_hint not working", "body": "<p>I'm trying to produce a query with the Postgresql <code>ONLY</code> keyword from SQLAlchemy expressions:</p>\n\n<p><strong>Example 1</strong>: Defining the table name with the <code>text()</code> expression doesn't work (except if I put the string \"ONLY\" as part of the text):</p>\n\n<pre><code>tbl = text('schema.table')  # work with text('ONLY schema.table')\nquery = select([func.count()]).select_from(tbl).with_hint(tbl,\n                                                          'ONLY',\n                                                          'postgresql')\nprint query.compile(bind=engine)\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>SELECT count(*) AS count_1\nFROM schema.table\n</code></pre>\n\n<hr>\n\n<p><strong>Example 2</strong>: However if I use the lightweight <a href=\"http://sqlalchemy.readthedocs.org/en/rel_1_0/core/selectable.html?highlight=table#sqlalchemy.sql.expression.table\" rel=\"nofollow\"><code>table</code></a> expression it does:</p>\n\n<pre><code>tbl = table('schema.table')\nquery = select([func.count()]).select_from(tbl).with_hint(tbl,\n                                                          'ONLY',\n                                                          'postgresql')\nprint query.compile(bind=engine)\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>SELECT count(*) AS count_1 \nFROM ONLY \"schema.table\"\n</code></pre>\n\n<p>but it's no OK, because of the double quotes around the name</p>\n\n<hr>\n\n<p>Now, bare in mind that I receive a list of schema qualified table names and I want to avoid creating <code>Table</code> and <code>MetaData</code> objects.</p>\n\n<p>So, to make my questions clear:</p>\n\n<p><strong>Example 1</strong>: How to make the <code>ONLY</code> keyword appear? </p>\n\n<p><strong>Example 2</strong>: How to specify the schema properly?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1451503958, "post_id": 34535945, "comment_id": 56813639, "body": "Since the erorr is in allCircuitsByUniquePlayerID, shouldn&#39;t you show how that is defined?"}, {"owner": {"reputation": 745, "user_id": 591304, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/619a768e65e566a11ac35567bd191df2?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/591304/mike"}, "reply_to_user": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1451504029, "post_id": 34535945, "comment_id": 56813675, "body": "Sorry missed that when I was copying over the code"}, {"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 2, "creation_date": 1451504353, "post_id": 34535945, "comment_id": 56813851, "body": "OK, so each element of that dict is itself a defaultdict. So why are you using <code>append</code>? What are you expecting to happen?"}, {"owner": {"reputation": 745, "user_id": 591304, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/619a768e65e566a11ac35567bd191df2?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/591304/mike"}, "reply_to_user": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1451511331, "post_id": 34535945, "comment_id": 56817279, "body": "So I actually need to store several things in the dict for each ID (if the event &quot;MakeCircuitCreated&quot; happens) so what I eventually I want is something like [ID1, {[time1, attributes], [time2, attributes]... [timex, attributes]], [ID2, [...]] , [IDx, [...] - right now I&#39;m just trying to get the first part working (not sure if this cleared it up)"}, {"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 1, "creation_date": 1451511448, "post_id": 34535945, "comment_id": 56817318, "body": "That&#39;s pretty confusing to me... how about posting an example of the intended <code>allCircuitsByUniquePlayerID</code> in your question so that you can use multiple lines."}, {"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1451511595, "post_id": 34535945, "comment_id": 56817377, "body": "...and consider that ` {[time1, attributes], [time2, attributes]}` isn&#39;t valid python and is making us guess more about your intent."}], "answers": [{"comments": [{"owner": {"reputation": 745, "user_id": 591304, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/619a768e65e566a11ac35567bd191df2?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/591304/mike"}, "edited": false, "score": 0, "creation_date": 1451511389, "post_id": 34536596, "comment_id": 56817299, "body": "A bit more like the second (as I tried to explain above) - I actually need to store several things in the dict for each ID (if the event &quot;MakeCircuitCreated&quot; happens for that ID) so what I eventually I want is something like [ID1, {[time1, attributes], [time2, attributes]... [timex, attributes]], [ID2, [...]] , [IDx, [...] - right now I&#39;m just trying to get the first part working (not sure if this cleared it up)"}], "tags": [], "owner": {"reputation": 177, "user_id": 4050929, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jOgOc.png?s=128&g=1", "display_name": "Jas", "link": "https://stackoverflow.com/users/4050929/jas"}, "is_accepted": false, "score": 0, "last_activity_date": 1451506439, "creation_date": 1451506439, "answer_id": 34536596, "question_id": 34535945, "link": "https://stackoverflow.com/questions/34535945/trying-to-use-defaultdict-on-lines-in-json/34536596#34536596", "title": "Trying to use defaultdict on lines in JSON", "body": "<p>I'm just guessing your intent, but I think you either wanted:</p>\n\n<pre><code>allCircuitsByUniquePlayerID = defaultdict(list)\n</code></pre>\n\n<p>OR you are missing some sort of circuit id and you wanted something like:</p>\n\n<pre><code>        allCircuitsByUniquePlayerID[playerID][circuitID].append(time)\n</code></pre>\n"}], "owner": {"reputation": 745, "user_id": 591304, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/619a768e65e566a11ac35567bd191df2?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/591304/mike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 628, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1451506439, "creation_date": 1451503761, "last_edit_date": 1451504008, "question_id": 34535945, "link": "https://stackoverflow.com/questions/34535945/trying-to-use-defaultdict-on-lines-in-json", "title": "Trying to use defaultdict on lines in JSON", "body": "<p>I'm interrating through lines of JSON and trying to create a dictionary of all the events that happen with a unique playerID but I keep getting the error <code>AttributeError: 'collections.defaultdict' object has no attribute 'append'</code>. </p>\n\n<p>The code I'm using is the following:</p>\n\n<pre><code>import json, csv, sys\nfrom collections import defaultdict, Counter\nlastTimeByPlayer = defaultdict(int)\nuniquePlayerID = defaultdict(list)\nlasttime = 0\ntotalCircuits = 0\nplayerID = 0\n\nallCircuitsByUniquePlayerID = defaultdict(lambda : defaultdict(int))\n\nfor line in infile:\ndatum = json.loads(line)\ntime = int(datum['timestamp'])\ntry:\n    pids = list(datum['playspace_ids'])\nexcept:\n    pids = []\nfor player in pids:\n    if (time - lastTimeByPlayer[player]) &gt; int(sys.argv[1]): #sys args is a set interval \"dead time\" interval that indicates a new player has arrived\n        playerID = playerID +1\n        uniquePlayerID[player].append(playerID)\n    lastTimeByPlayer[player] = time\n    if datum['key'] == \"MakeCircuitCreated\":\n        allCircuitsByUniquePlayerID[playerID].append(time)\n</code></pre>\n\n<p>I feel like it has something to do with how I'm creating each instance of the <code>allCircuitsByUniquePlayerID[playerID]</code> key but I'm not really sure. Thanks in advance</p>\n"}, {"tags": ["python", "tree", "pypy"], "comments": [{"owner": {"reputation": 1704, "user_id": 4241180, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y8rWG.png?s=128&g=1", "display_name": "vrs", "link": "https://stackoverflow.com/users/4241180/vrs"}, "edited": false, "score": 0, "creation_date": 1451504289, "post_id": 34535816, "comment_id": 56813820, "body": "can you share the output with errors you got during installation?"}, {"owner": {"reputation": 1212, "user_id": 1051765, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/37229766800b2dfee440c3c891d944b1?s=128&d=identicon&r=PG", "display_name": "Carlos Vega", "link": "https://stackoverflow.com/users/1051765/carlos-vega"}, "reply_to_user": {"reputation": 1704, "user_id": 4241180, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y8rWG.png?s=128&g=1", "display_name": "vrs", "link": "https://stackoverflow.com/users/4241180/vrs"}, "edited": false, "score": 0, "creation_date": 1451582583, "post_id": 34535816, "comment_id": 56841386, "body": "Here it is :) <a href=\"http://pastebin.com/B5as6u8G\" rel=\"nofollow noreferrer\">pastebin.com/B5as6u8G</a>"}], "answers": [{"tags": [], "owner": {"reputation": 10650, "user_id": 1556290, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5b37e6b4ac97453e4ba9dba37954cf79?s=128&d=identicon&r=PG", "display_name": "Armin Rigo", "link": "https://stackoverflow.com/users/1556290/armin-rigo"}, "is_accepted": false, "score": 1, "last_activity_date": 1451569224, "creation_date": 1451569224, "answer_id": 34547299, "question_id": 34535816, "link": "https://stackoverflow.com/questions/34535816/installing-rbtree-on-pypy/34547299#34547299", "title": "Installing rbtree on PyPy", "body": "<p>If you are fine with slightly different API, the easiest way is to look for other modules that do the same in pure Python code.  There is for example this one: <a href=\"https://pypi.python.org/pypi/binary_tree_dict_mod\" rel=\"nofollow\">https://pypi.python.org/pypi/binary_tree_dict_mod</a>.  A pure Python version will be much faster than a CPython-C-API-compatible version in PyPy.</p>\n"}], "owner": {"reputation": 1212, "user_id": 1051765, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/37229766800b2dfee440c3c891d944b1?s=128&d=identicon&r=PG", "display_name": "Carlos Vega", "link": "https://stackoverflow.com/users/1051765/carlos-vega"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1451569224, "creation_date": 1451503260, "question_id": 34535816, "link": "https://stackoverflow.com/questions/34535816/installing-rbtree-on-pypy", "title": "Installing rbtree on PyPy", "body": "<p>I'm trying to install <a href=\"https://bitbucket.org/bcsaller/rbtree/\" rel=\"nofollow\">rbtree</a> as a PyPy module. I read that some modules are not compatible with PyPy. \nIs there any way to install it properly or any alternative? I'm looking for a tree dictionary that also can be browsed like tree[0:100] (subscriptable) and that also supports item assignment.\nI tried to install it with the following command but I got lots of errors:</p>\n\n<pre><code>pypy setup.py install\n</code></pre>\n"}, {"tags": ["python", "flask", "sqlalchemy", "many-to-many", "associations"], "comments": [{"owner": {"reputation": 15081, "user_id": 978961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9562cbc3556ac68f081dfda387a9f4ab?s=128&d=identicon&r=PG", "display_name": "dirn", "link": "https://stackoverflow.com/users/978961/dirn"}, "edited": false, "score": 0, "creation_date": 1451505846, "post_id": 34535767, "comment_id": 56814541, "body": "What exactly is happening? Is there an error? Is the state of the database not what you expect it to be?"}, {"owner": {"reputation": 828, "user_id": 1456424, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zdacJ.png?s=128&g=1", "display_name": "ThatTechGuy", "link": "https://stackoverflow.com/users/1456424/thattechguy"}, "reply_to_user": {"reputation": 15081, "user_id": 978961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9562cbc3556ac68f081dfda387a9f4ab?s=128&d=identicon&r=PG", "display_name": "dirn", "link": "https://stackoverflow.com/users/978961/dirn"}, "edited": false, "score": 0, "creation_date": 1451506002, "post_id": 34535767, "comment_id": 56814603, "body": "When I run the code as shown in the example and read the queries it seems to be doing most of what it&#39;s supposed to. But I never see an insert statement, only selects and then a rollback with no immediate defined reason."}, {"owner": {"reputation": 15081, "user_id": 978961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9562cbc3556ac68f081dfda387a9f4ab?s=128&d=identicon&r=PG", "display_name": "dirn", "link": "https://stackoverflow.com/users/978961/dirn"}, "edited": false, "score": 1, "creation_date": 1451506389, "post_id": 34535767, "comment_id": 56814792, "body": "I&#39;m not sure if it&#39;s related, but you can <a href=\"http://docs.sqlalchemy.org/en/latest/orm/basic_relationships.html#many-to-many\" rel=\"nofollow noreferrer\">configure the relationships so you don&#39;t need to work with the join tables directly</a>. <code>children = relationship(&#39;Child&#39;, secondary=association_table)</code>"}, {"owner": {"reputation": 828, "user_id": 1456424, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zdacJ.png?s=128&g=1", "display_name": "ThatTechGuy", "link": "https://stackoverflow.com/users/1456424/thattechguy"}, "reply_to_user": {"reputation": 15081, "user_id": 978961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9562cbc3556ac68f081dfda387a9f4ab?s=128&d=identicon&r=PG", "display_name": "dirn", "link": "https://stackoverflow.com/users/978961/dirn"}, "edited": false, "score": 0, "creation_date": 1451512704, "post_id": 34535767, "comment_id": 56817893, "body": "@dirn That is perfect for a many to many but does not include a true table with Association Objects as far as I understand."}, {"owner": {"reputation": 15081, "user_id": 978961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9562cbc3556ac68f081dfda387a9f4ab?s=128&d=identicon&r=PG", "display_name": "dirn", "link": "https://stackoverflow.com/users/978961/dirn"}, "edited": false, "score": 1, "creation_date": 1451512856, "post_id": 34535767, "comment_id": 56817960, "body": "You&#39;re right. You actually want the <a href=\"http://docs.sqlalchemy.org/en/latest/orm/basic_relationships.html#association-object\" rel=\"nofollow noreferrer\">Association Object</a> section. <code>children = relationship(&#39;Association&#39;, back_populates=&#39;parent&#39;)</code>"}, {"owner": {"reputation": 828, "user_id": 1456424, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zdacJ.png?s=128&g=1", "display_name": "ThatTechGuy", "link": "https://stackoverflow.com/users/1456424/thattechguy"}, "reply_to_user": {"reputation": 15081, "user_id": 978961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9562cbc3556ac68f081dfda387a9f4ab?s=128&d=identicon&r=PG", "display_name": "dirn", "link": "https://stackoverflow.com/users/978961/dirn"}, "edited": false, "score": 0, "creation_date": 1451513940, "post_id": 34535767, "comment_id": 56818438, "body": "@dirn which I&#39;m using in Center minus the back populates or backref (almost interchangeable) as I have no need for bidirectional access. However, you can see under the Center model (parent) the attribute businesses (children) which relates to the CenterBusiness table."}, {"owner": {"reputation": 828, "user_id": 1456424, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zdacJ.png?s=128&g=1", "display_name": "ThatTechGuy", "link": "https://stackoverflow.com/users/1456424/thattechguy"}, "reply_to_user": {"reputation": 15081, "user_id": 978961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9562cbc3556ac68f081dfda387a9f4ab?s=128&d=identicon&r=PG", "display_name": "dirn", "link": "https://stackoverflow.com/users/978961/dirn"}, "edited": false, "score": 0, "creation_date": 1451516854, "post_id": 34535767, "comment_id": 56819505, "body": "Alright my issue was that I was not using the relationship key &quot;info&quot; I have in my <code>CenterBusiness</code> model to define the appended association. I was saying <code>center.business</code> thinking that the term <code>business</code> in that case was arbitrary. However, I needed to actually reference that relationship. As such, the appropriate key I had setup already in <code>CenterBusiness</code> was <code>info</code>. Updating my question..."}], "answers": [{"tags": [], "owner": {"reputation": 828, "user_id": 1456424, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zdacJ.png?s=128&g=1", "display_name": "ThatTechGuy", "link": "https://stackoverflow.com/users/1456424/thattechguy"}, "is_accepted": true, "score": 1, "last_activity_date": 1451518590, "last_edit_date": 1451518590, "creation_date": 1451518041, "answer_id": 34538843, "question_id": 34535767, "link": "https://stackoverflow.com/questions/34535767/sqlalchemy-inserting-data-in-a-many-to-many-relationship-with-association-table/34538843#34538843", "title": "SQLAlchemy Inserting Data in a Many-to-Many Relationship with Association Table", "body": "<p>I was able to get this working, my problem lied in the following bit of code (error in bold):</p>\n\n<pre><code>#My Version Using my Tables\ncenter = Center.query.get(session['center']\nassoc = CenterBusiness()\n**assoc.info** = Business(typId=form.type.data, name=form.name.data,\n                          contact=form.contact.data, phone=form.phone.data)\ncenter.businesses.append(assoc)\ndb.session.commit()\n</code></pre>\n\n<p>As explained in my comment in the question: </p>\n\n<blockquote>\n  <p>Alright my issue was that I was not using the relationship key \"info\"\n  I have in my CenterBusiness model to define the appended association.\n  I was saying center.business thinking that the term business in that\n  case was arbitrary. However, I needed to actually reference that\n  relationship. As such, the appropriate key I had setup already in\n  CenterBusiness was info.</p>\n</blockquote>\n\n<p>I will still accept any updates and/or better ways to handle this situation, though I think this is the best route at the time.</p>\n"}, {"comments": [{"owner": {"reputation": 828, "user_id": 1456424, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zdacJ.png?s=128&g=1", "display_name": "ThatTechGuy", "link": "https://stackoverflow.com/users/1456424/thattechguy"}, "edited": false, "score": 0, "creation_date": 1451591999, "post_id": 34550973, "comment_id": 56844534, "body": "Okay, I see what you were saying... So what is the benefit of using <code>association_proxy</code> vs <code>relationship</code>? Can you access the associated table for other functuons as well? (IE: to query and/or filter)"}, {"owner": {"reputation": 2571, "user_id": 2089929, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/cDE2j.jpg?s=128&g=1", "display_name": "aman kumar", "link": "https://stackoverflow.com/users/2089929/aman-kumar"}, "reply_to_user": {"reputation": 828, "user_id": 1456424, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zdacJ.png?s=128&g=1", "display_name": "ThatTechGuy", "link": "https://stackoverflow.com/users/1456424/thattechguy"}, "edited": false, "score": 1, "creation_date": 1451636658, "post_id": 34550973, "comment_id": 56851999, "body": "it will help you in query operation. you can access other attribute of association table."}, {"owner": {"reputation": 828, "user_id": 1456424, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zdacJ.png?s=128&g=1", "display_name": "ThatTechGuy", "link": "https://stackoverflow.com/users/1456424/thattechguy"}, "edited": false, "score": 1, "creation_date": 1451667894, "post_id": 34550973, "comment_id": 56859438, "body": "You can do that with relationship, I&#39;m trying to more clearly understand the difference? Does it maintain a direct key in the returned object? Or does it also return as an object in the returned object?"}], "tags": [], "owner": {"reputation": 2571, "user_id": 2089929, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/cDE2j.jpg?s=128&g=1", "display_name": "aman kumar", "link": "https://stackoverflow.com/users/2089929/aman-kumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1451591041, "creation_date": 1451591041, "answer_id": 34550973, "question_id": 34535767, "link": "https://stackoverflow.com/questions/34535767/sqlalchemy-inserting-data-in-a-many-to-many-relationship-with-association-table/34550973#34550973", "title": "SQLAlchemy Inserting Data in a Many-to-Many Relationship with Association Table", "body": "<p>below example can help u\nmore details <a href=\"http://docs.sqlalchemy.org/en/latest/orm/extensions/associationproxy.html\" rel=\"nofollow\">http://docs.sqlalchemy.org/en/latest/orm/extensions/associationproxy.html</a></p>\n\n<pre><code>class User(Base):\n     __tablename__ = 'user'\n     id = Column(Integer, primary_key=True)\n     name = Column(String(64))\n\n     # association proxy of \"user_keywords\" collection\n     # to \"keyword\" attribute\n     keywords = association_proxy('user_keywords', 'keyword')\n\n     def __init__(self, name):\n         self.name = name\n\nclass UserKeyword(Base):\n     __tablename__ = 'user_keyword'\n     user_id = Column(Integer, ForeignKey('user.id'), primary_key=True)\n     keyword_id = Column(Integer, ForeignKey('keyword.id'), primary_key=True)\n     special_key = Column(String(50))\n\n      # bidirectional attribute/collection of \"user\"/\"user_keywords\"\n      user = relationship(User,\n            backref=backref(\"user_keywords\",\n                            cascade=\"all, delete-orphan\")\n        )\n\n    # reference to the \"Keyword\" object\n    keyword = relationship(\"Keyword\")\n\n    def __init__(self, keyword=None, user=None, special_key=None):\n        self.user = user\n        self.keyword = keyword\n        self.special_key = special_key\n\nclass Keyword(Base):\n   __tablename__ = 'keyword'\n   id = Column(Integer, primary_key=True)\n   keyword = Column('keyword', String(64))\n\n  def __init__(self, keyword):\n      self.keyword = keyword\n\n  def __repr__(self):\n       return 'Keyword(%s)' % repr(self.keyword)\n</code></pre>\n"}], "owner": {"reputation": 828, "user_id": 1456424, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zdacJ.png?s=128&g=1", "display_name": "ThatTechGuy", "link": "https://stackoverflow.com/users/1456424/thattechguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4545, "favorite_count": 0, "accepted_answer_id": 34538843, "answer_count": 2, "score": 4, "last_activity_date": 1451591041, "creation_date": 1451503070, "question_id": 34535767, "link": "https://stackoverflow.com/questions/34535767/sqlalchemy-inserting-data-in-a-many-to-many-relationship-with-association-table", "title": "SQLAlchemy Inserting Data in a Many-to-Many Relationship with Association Table", "body": "<p>I've seen a few questions similar to this but none quite hit the nail on the head. Essentially I have three table models <code>Center()</code>, <code>Business()</code>, and <code>CenterBusiness()</code> in a Flask Application using SQLAlchemy. Currently I'm adding to said relationship in this manner:</p>\n\n<pre><code>biz = Business(typId=form.type.data, name=form.name.data,\n               contact=form.contact.data, phone=form.phone.data)\ndb.session.add(biz)\ndb.session.commit()\n\nassoc = CenterBusiness(bizId=biz.id, cenId=session['center'])\ndb.session.add(assoc)\ndb.session.commit()\n</code></pre>\n\n<p>As you can see that's a bit ugly and I know there is a way to do it in one hit with the relationship as they are defined. I see on SQLAlchemy's docs they have a explanation of working with such a table but I can't seem to get it to work.</p>\n\n<pre><code>#Directly from SQLAlchemy Docs\np = Parent()\na = Association(extra_data=\"some data\")\na.child = Child()\np.children.append(a)\n\n#My Version Using my Tables\ncenter = Center.query.get(session['center']\nassoc = CenterBusiness()\nassoc.business = Business(typId=form.type.data, name=form.name.data,\n                          contact=form.contact.data, phone=form.phone.data)\ncenter.businesses.append(assoc)\ndb.session.commit()\n</code></pre>\n\n<p>Unfortunately, that doesn't seem to be doing the trick... Any help would be greatly appreciated and below I've posted the models involved.</p>\n\n<pre><code>class Center(db.Model):\n    id = db.Column(MEDIUMINT(8, unsigned=True), primary_key=True,\n                   autoincrement=False)\n    phone = db.Column(VARCHAR(10), nullable=False)\n    location = db.Column(VARCHAR(255), nullable=False)\n    businesses = db.relationship('CenterBusiness', lazy='dynamic')\n    employees = db.relationship('CenterEmployee', lazy='dynamic')\n\nclass Business(db.Model):\n    id = db.Column(MEDIUMINT(8, unsigned=True), primary_key=True,\n                   autoincrement=True)\n    typId = db.Column(TINYINT(2, unsigned=True),\n                      db.ForeignKey('biz_type.id',\n                                    onupdate='RESTRICT',\n                                    ondelete='RESTRICT'),\n                      nullable=False)\n    type = db.relationship('BizType', backref='businesses',\n                           lazy='subquery')\n    name = db.Column(VARCHAR(255), nullable=False)\n    contact = db.Column(VARCHAR(255), nullable=False)\n    phone = db.Column(VARCHAR(10), nullable=False)\n    documents = db.relationship('Document', backref='business',\n                                lazy='dynamic')\n\nclass CenterBusiness(db.Model):\n    cenId = db.Column(MEDIUMINT(8, unsigned=True),\n                      db.ForeignKey('center.id',\n                                    onupdate='RESTRICT',\n                                    ondelete='RESTRICT'),\n                      primary_key=True)\n    bizId = db.Column(MEDIUMINT(8, unsigned=True),\n                      db.ForeignKey('business.id',\n                                    onupdate='RESTRICT',\n                                    ondelete='RESTRICT'),\n                      primary_key=True)\n    info = db.relationship('Business', backref='centers',\n                           lazy='joined')\n    archived = db.Column(TINYINT(1, unsigned=True), nullable=False,\n                         server_default='0')\n</code></pre>\n"}, {"tags": ["python", "windows", "batch-file", "python-docx"], "comments": [{"owner": {"reputation": 474, "user_id": 3919467, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/44e817d2e6cb417396b95c53c50dfa75?s=128&d=identicon&r=PG&f=1", "display_name": "crow_t_robot", "link": "https://stackoverflow.com/users/3919467/crow-t-robot"}, "edited": false, "score": 0, "creation_date": 1451503726, "post_id": 34535703, "comment_id": 56813522, "body": "If memory serves, vcvarsall.bat is in Visual C++ 2008.  Do you have that installed?"}, {"owner": {"reputation": 474, "user_id": 3919467, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/44e817d2e6cb417396b95c53c50dfa75?s=128&d=identicon&r=PG&f=1", "display_name": "crow_t_robot", "link": "https://stackoverflow.com/users/3919467/crow-t-robot"}, "edited": false, "score": 0, "creation_date": 1451503914, "post_id": 34535703, "comment_id": 56813614, "body": "There is also this, if you haven&#39;t seen it already: <a href=\"http://stackoverflow.com/questions/27670365/python-pip-install-error-unable-to-find-vcvarsall-bat-tried-all-solutions\" title=\"python pip install error unable to find vcvarsall bat tried all solutions\">stackoverflow.com/questions/27670365/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 5731843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1324a216a68b88497df06410b8589fd?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Schneidman", "link": "https://stackoverflow.com/users/5731843/alex-schneidman"}, "edited": false, "score": 0, "creation_date": 1451532751, "post_id": 34535964, "comment_id": 56823315, "body": "I attempted to install the first one and it said lxml-3.4.4-cp27-none-win32.whl is not a supported wheel on this platform."}, {"owner": {"reputation": 33, "user_id": 5731843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1324a216a68b88497df06410b8589fd?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Schneidman", "link": "https://stackoverflow.com/users/5731843/alex-schneidman"}, "edited": false, "score": 0, "creation_date": 1451532980, "post_id": 34535964, "comment_id": 56823350, "body": "NEVERMIND FIXED!! Thank you so much, got it to work! I chose the correct version for my version of python, installed lxml using this guide: <a href=\"http://www.apoorvakumar.tk/2015/06/30/installing-lxml-in-windows-for-python-3-4/\" rel=\"nofollow noreferrer\">apoorvakumar.tk/2015/06/30/&hellip;</a> and then ran the pip install python-docx again. Thank you so much!"}], "tags": [], "owner": {"reputation": 379, "user_id": 4615807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/653b39c183d58fc2cd1c6627dffee8ce?s=128&d=identicon&r=PG&f=1", "display_name": "disflux", "link": "https://stackoverflow.com/users/4615807/disflux"}, "is_accepted": true, "score": 3, "last_activity_date": 1451504303, "last_edit_date": 1495541380, "creation_date": 1451503856, "answer_id": 34535964, "question_id": 34535703, "link": "https://stackoverflow.com/questions/34535703/attempting-to-install-python-docx-error-unable-to-find-vcvarsall-bat/34535964#34535964", "title": "Attempting to install python-docx (error: Unable to find vcvarsall.bat)", "body": "<p>This is a pretty common issue people run into with Python modules. <a href=\"https://stackoverflow.com/questions/2817869/error-unable-to-find-vcvarsall-bat?rq=1\">You can read up more on it here</a></p>\n\n<p>What you can do is install a precompiled version of lxml, which is a module that python-docx relies upon. You can identify this requirement by looking at the error message, or by looking at the <a href=\"https://github.com/python-openxml/python-docx/blob/master/requirements.txt\" rel=\"nofollow noreferrer\">python-docx github page here</a>, which lists all requirements for python-docx.</p>\n\n<p>Luckily, Christoph Golke provides some precompiled modules for us, <a href=\"http://www.lfd.uci.edu/~gohlke/pythonlibs/#lxml\" rel=\"nofollow noreferrer\">available here</a>. &lt;--- Hotlink that, you'll use it quite often.</p>\n\n<p>Download and install the lxml module first from Christoph Golke, then try rerunning your pip install.</p>\n"}, {"tags": [], "owner": {"reputation": 96, "user_id": 4316271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0aafcd27afa3331b4d19b5ecb490be5?s=128&d=identicon&r=PG&f=1", "display_name": "phase-contrast", "link": "https://stackoverflow.com/users/4316271/phase-contrast"}, "is_accepted": false, "score": 0, "last_activity_date": 1469449318, "last_edit_date": 1495540955, "creation_date": 1469449318, "answer_id": 38567649, "question_id": 34535703, "link": "https://stackoverflow.com/questions/34535703/attempting-to-install-python-docx-error-unable-to-find-vcvarsall-bat/38567649#38567649", "title": "Attempting to install python-docx (error: Unable to find vcvarsall.bat)", "body": "<p>I had the same issue.</p>\n\n<p>After countless tries to install the right Visual C++ compilers and setting the Variables, I got one step further but it still didn't compile. I suggest to follow the other answer's advice and install a precompiled version of lxml. After doing than, I could pip install python-docx without a problem.</p>\n\n<p>Keep in mind that I had to use the WinPython Control Panel to install the downloaded .exe!</p>\n\n<p>More information here: <a href=\"https://stackoverflow.com/questions/34536149/cannot-install-lxml-on-windows-fatal-error-c1083-cannot-open-include-file-li/38566861#38566861\">Cannot install lxml on windows, fatal error C1083: Cannot open include file: &#39;libxml/xmlversion.h&#39;</a></p>\n"}], "owner": {"reputation": 33, "user_id": 5731843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1324a216a68b88497df06410b8589fd?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Schneidman", "link": "https://stackoverflow.com/users/5731843/alex-schneidman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3633, "favorite_count": 1, "accepted_answer_id": 34535964, "answer_count": 2, "score": 3, "last_activity_date": 1472050690, "creation_date": 1451502802, "question_id": 34535703, "link": "https://stackoverflow.com/questions/34535703/attempting-to-install-python-docx-error-unable-to-find-vcvarsall-bat", "title": "Attempting to install python-docx (error: Unable to find vcvarsall.bat)", "body": "<p>I have tried everything and I have no idea where to go from here. When I call the command <code>pip install python-docx</code> I get this: </p>\n\n<pre><code>    running build_ext\nbuilding 'lxml.etree' extension\nerror: Unable to find vcvarsall.bat\n\n----------------------------------------\nCommand \"c:\\users\\alex\\appdata\\local\\programs\\python\\python35-32\\python.exe -c \"import setuptools, tokenize;__file__='C:\\\\Users\\\\Alex\\\\AppData\\\\Local\\\\Temp\\\\pip-build-u2i_l872\\\\lxml\\\\setup.py';exec(compile(getattr(tokenize, 'open', open)(__file__).read().replace('\\r\\n', '\\n'), __file__, 'exec'))\" install --record C:\\Users\\Alex\\AppData\\Local\\Temp\\pip-26nq6ot7-record\\install-record.txt --single-version-externally-managed --compile\" failed with error code 1 in C:\\Users\\Alex\\AppData\\Local\\Temp\\pip-build-u2i_l872\\lxml\n</code></pre>\n\n<p>at the end.</p>\n\n<p>I have tried locating vsvarsall.bat and setting the path. I can't seem to find it in C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\Common7\\Tools and there is no tool folder in C:\\Program Files\\Microsoft Visual Studio 12.0\\Common7. I'm on 64bit Windows 10 and python 3.5.1.</p>\n"}, {"tags": ["python", "tree", "nltk", "parse-tree"], "comments": [{"owner": {"reputation": 2648, "user_id": 1057007, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/PMZNq.jpg?s=128&g=1", "display_name": "xzegga", "link": "https://stackoverflow.com/users/1057007/xzegga"}, "edited": false, "score": 0, "creation_date": 1522790571, "post_id": 34535591, "comment_id": 86286367, "body": "hey @jto, how do you resolve your challenge?"}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 9574282, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208817907883416/picture?type=large", "display_name": "Hager Hosny", "link": "https://stackoverflow.com/users/9574282/hager-hosny"}, "is_accepted": false, "score": 2, "last_activity_date": 1552261422, "creation_date": 1552261422, "answer_id": 55093554, "question_id": 34535591, "link": "https://stackoverflow.com/questions/34535591/how-to-get-the-parent-and-child-nodes-of-a-node-in-an-nltk-tree/55093554#55093554", "title": "How to get the parent and child nodes of a node in an nltk tree?", "body": "<p><strong>The parent of the leaf:</strong>\nprint(ptree[tree_location[:-1]].label())</p>\n\n<p><strong>The first ancestor:</strong>\n print(ptree[tree_location[:-2]].label())</p>\n"}], "owner": {"reputation": 31, "user_id": 5731638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/940eab7a38fae3f5c010b57a1e6d4869?s=128&d=identicon&r=PG&f=1", "display_name": "jto", "link": "https://stackoverflow.com/users/5731638/jto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1108, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1552261422, "creation_date": 1451502307, "last_edit_date": 1495535361, "question_id": 34535591, "link": "https://stackoverflow.com/questions/34535591/how-to-get-the-parent-and-child-nodes-of-a-node-in-an-nltk-tree", "title": "How to get the parent and child nodes of a node in an nltk tree?", "body": "<p>I would like to get the parent and child nodes of a node in an nltk tree. I have seen this answer <a href=\"https://stackoverflow.com/questions/25815002/nltk-tree-data-structure-finding-a-node-its-parent-or-children\">here</a> but I couldn't manage to fit it to my purposes. </p>\n\n<p>For example, having this tree:</p>\n\n<pre><code>        ROOT              \n         |                 \n         S                \n  _______|______________   \n |       VP             | \n |    ___|____          |  \n NP  |       ADJP       | \n |   |    ____|____     |  \nPRP VBZ  RB        JJ   . \n |   |   |         |    |  \n It  is  so       nice  . \n</code></pre>\n\n<p>I have this code taken and modified from other answers that gives some information but is not quite what I want.</p>\n\n<pre><code>ptree = ParentedTree.fromstring('(ROOT (S (NP (PRP It)) \\\n    (VP (VBZ is) (ADJP (RB so) (JJ nice))) (. .)))')\n\nleaf_values = ptree.leaves()\n\nptree.pretty_print()\n\nif 'nice' in leaf_values:\n    leaf_index = leaf_values.index('nice')\n    print(leaf_index)\n    tree_location = ptree.leaf_treeposition(leaf_index)\n    print(tree_location)\n    print(ptree[tree_location])\n    print(tree_location[:-1])\n    print(ptree[tree_location[:-1]])\n    print(tree_location[:-2])\n    print(ptree[tree_location[:-2]])\n\n3\n(0, 1, 1, 1, 0)\nnice\n(0, 1, 1, 1)\n(JJ nice)\n(0, 1, 1)\n(ADJP (RB so) (JJ nice))\n</code></pre>\n\n<p>I would like to implement something like the following. Assume I have the position/node 'nice'. I would like to make a function so that I get the position of 'JJ' when I enter the position of 'nice' as a parameter. Like get_parent(positionOf('nice')) returns positionOf('JJ'). And then I can do get_parent(positionOf('JJ')) and it returns positionOf('ADJP'), etc. </p>\n\n<p>I would also like to get the childs of a node, for example, if I have get_childs(positionOf('ADJP')) it should return position('RB') and positionOf('JJ').</p>\n\n<p>Does someone know how could I implement that? Could you provide a small example?</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 619481, "user_id": 2901002, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/hMDvl.jpg?s=128&g=1", "display_name": "jezrael", "link": "https://stackoverflow.com/users/2901002/jezrael"}, "edited": false, "score": 1, "creation_date": 1451502625, "post_id": 34535540, "comment_id": 56812983, "body": "hmmm, is possible replace <code>--</code> to <code>AA</code> and then compare?"}], "answers": [{"tags": [], "owner": {"reputation": 2560, "user_id": 4908900, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/51319a33504095df2a58a2318981b1ac?s=128&d=identicon&r=PG&f=1", "display_name": "Ezer K", "link": "https://stackoverflow.com/users/4908900/ezer-k"}, "is_accepted": false, "score": 0, "last_activity_date": 1451505461, "last_edit_date": 1451505461, "creation_date": 1451504811, "answer_id": 34536187, "question_id": 34535540, "link": "https://stackoverflow.com/questions/34535540/python-pandas-compare-2-large-dataframes-of-text-for-similarity/34536187#34536187", "title": "Python Pandas Compare 2 Large DataFrames of Text for Similarity", "body": "<p>I think loop comprehension should be quite fast:</p>\n\n<pre><code>new_columns = []\nfor col in df1.columns:\n    new_columns.append([True if (x==y or x=='--' or y=='--') else False for x,y in zip(df1[col],df2[col])])\nresults = pd.DataFrame(new_columns).T\nresults.index = df1.index\n</code></pre>\n\n<p>This outputs the full true/false df.</p>\n"}, {"comments": [{"owner": {"reputation": 813, "user_id": 3182105, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1103e5812033d0337647294100c885d1?s=128&d=identicon&r=PG&f=1", "display_name": "SciGuyMcQ", "link": "https://stackoverflow.com/users/3182105/sciguymcq"}, "edited": false, "score": 0, "creation_date": 1451509945, "post_id": 34536300, "comment_id": 56816660, "body": "thanks unutbu! That worked well.   I had two dataframes, each with 1326 columns and 62831 rows.  The code ran in 12.14 seconds and gave the correct results (I previously had a very loop intensive base python script which took over 3 hours to compute)."}], "tags": [], "owner": {"reputation": 705380, "user_id": 190597, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1", "display_name": "unutbu", "link": "https://stackoverflow.com/users/190597/unutbu"}, "is_accepted": true, "score": 1, "last_activity_date": 1451505209, "creation_date": 1451505209, "answer_id": 34536300, "question_id": 34535540, "link": "https://stackoverflow.com/questions/34535540/python-pandas-compare-2-large-dataframes-of-text-for-similarity/34536300#34536300", "title": "Python Pandas Compare 2 Large DataFrames of Text for Similarity", "body": "<p>Below, I'm interpreting <em>\"when one is '--' basically always be true\"</em> to mean that any comparison against <code>'--'</code> (no matter what the other value is) should return True. In that case, you could use</p>\n\n<pre><code>mask = (df1=='--') | (df2=='--')\n</code></pre>\n\n<p>to find every location where either <code>df1</code> or <code>df2</code> is equal to <code>'--'</code> and then use</p>\n\n<pre><code>comparison |= mask\n</code></pre>\n\n<p>to update <code>comparison</code>. For example,</p>\n\n<pre><code>import itertools as IT\nimport numpy as np\nimport pandas as pd\nnp.random.seed(2015)\n\nN = 10000\ndf1, df2 = [pd.DataFrame(\n    np.random.choice(map(''.join, IT.product(list('ABC'), repeat=2))+['--'], \n                     size=(N, 2)),\n    columns=['Col1', 'Col2']) for i in range(2)]\n\n\ncomparison = df1.eq(df2)    \nmask = (df1=='--') | (df2=='--')\ncomparison |= mask\n\n# for column stats\ncolumn_stats = comparison.sum(axis=0) / float(len(df1.index))\n\n# for row stats\nrow_stats = comparison.sum(axis=1) / float(len(df1.columns))\n</code></pre>\n"}], "owner": {"reputation": 813, "user_id": 3182105, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1103e5812033d0337647294100c885d1?s=128&d=identicon&r=PG&f=1", "display_name": "SciGuyMcQ", "link": "https://stackoverflow.com/users/3182105/sciguymcq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1386, "favorite_count": 1, "accepted_answer_id": 34536300, "answer_count": 2, "score": 1, "last_activity_date": 1451506983, "creation_date": 1451502069, "last_edit_date": 1451505230, "question_id": 34535540, "link": "https://stackoverflow.com/questions/34535540/python-pandas-compare-2-large-dataframes-of-text-for-similarity", "title": "Python Pandas Compare 2 Large DataFrames of Text for Similarity", "body": "<p>I have two large dataframes I want to compare.  I want a comparison result capable of a column and / or row wise comparison of similarities by percent. <em>This part is simple.</em> However, I want to be able to make the comparison ignore differences based upon value criteria. A small example is below.</p>\n\n<pre><code>d1 = {'Sample':pd.Series([101,102,103]), \n      'Col1':pd.Series(['AA','--','BB']), \n      'Col2':pd.Series(['AB','AA','BB'])}\nd2 = {'Sample':pd.Series([101,102,103]), \n      'Col1':pd.Series(['BB','AB','--']),\n      'Col2':pd.Series(['AB','AA','AB'])}\ndf1 = pd.DataFrame(d1)\ndf2 = pd.DataFrame(d2)\ndf1 = df1.set_index('Sample')\ndf2 = df2.set_index('Sample')\n\ncomparison = df1.eq(df2)\n\n# for column stats\ncomparison.sum(axis=0) / float(len(df1.index))\n\n# for row stats\ncomparison.sum(axis=1) / float(len(df1.columns))\n</code></pre>\n\n<p>My problem is that for when <code>value1='AA' and value2 = '--'</code> I want them to be viewed as equal (so when one is <code>'--'</code> basically always be true) but, otherwise perform a normal Boolean comparison.  I need an efficient way to do this that doesn't include excessive looping as the datasets are quite large.</p>\n"}, {"tags": ["python", "ip", "urllib2", "mechanize", "tor"], "comments": [{"owner": {"reputation": 3989, "user_id": 1527217, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/gb5O6.jpg?s=128&g=1", "display_name": "khajvah", "link": "https://stackoverflow.com/users/1527217/khajvah"}, "edited": false, "score": 0, "creation_date": 1451502336, "post_id": 34535505, "comment_id": 56812867, "body": "Can you somehow share your code? It&#39;s hard to blindly say anything. Or at least share your tests."}, {"owner": {"reputation": 196, "user_id": 1853020, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-FCxzUZjlH8I/AAAAAAAAAAI/AAAAAAAAIYo/iK4yjAi9qTI/photo.jpg?sz=128", "display_name": "harshal.c", "link": "https://stackoverflow.com/users/1853020/harshal-c"}, "reply_to_user": {"reputation": 3989, "user_id": 1527217, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/gb5O6.jpg?s=128&g=1", "display_name": "khajvah", "link": "https://stackoverflow.com/users/1527217/khajvah"}, "edited": false, "score": 0, "creation_date": 1451502449, "post_id": 34535505, "comment_id": 56812913, "body": "@khajvah I edited the question, added a snippet of the code that I use to create urllib2 opener"}, {"owner": {"reputation": 3989, "user_id": 1527217, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/gb5O6.jpg?s=128&g=1", "display_name": "khajvah", "link": "https://stackoverflow.com/users/1527217/khajvah"}, "edited": false, "score": 0, "creation_date": 1451502757, "post_id": 34535505, "comment_id": 56813044, "body": "How do you route the traffic through Tor routers?"}, {"owner": {"reputation": 196, "user_id": 1853020, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-FCxzUZjlH8I/AAAAAAAAAAI/AAAAAAAAIYo/iK4yjAi9qTI/photo.jpg?sz=128", "display_name": "harshal.c", "link": "https://stackoverflow.com/users/1853020/harshal-c"}, "reply_to_user": {"reputation": 3989, "user_id": 1527217, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/gb5O6.jpg?s=128&g=1", "display_name": "khajvah", "link": "https://stackoverflow.com/users/1527217/khajvah"}, "edited": false, "score": 0, "creation_date": 1451502944, "post_id": 34535505, "comment_id": 56813135, "body": "@khajvah The SocksiPyHandler sets socks proxy and authentication in the urllib2 opener. In case of HTTP proxy I just normally set the proxy with its methods, but get same results. As far as routing through Tor servers go, I am sure its happening, because otherwise <a href=\"http://whatismyip.net\" rel=\"nofollow noreferrer\">whatismyip.net</a> won&#39;t show me a different ip."}, {"owner": {"reputation": 3989, "user_id": 1527217, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/gb5O6.jpg?s=128&g=1", "display_name": "khajvah", "link": "https://stackoverflow.com/users/1527217/khajvah"}, "edited": false, "score": 0, "creation_date": 1451503153, "post_id": 34535505, "comment_id": 56813240, "body": "I haven&#39;t worked with Tor but one dumb guess: Is there a possibility that <code>Https</code> traffic isn&#39;t being routed?"}, {"owner": {"reputation": 196, "user_id": 1853020, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-FCxzUZjlH8I/AAAAAAAAAAI/AAAAAAAAIYo/iK4yjAi9qTI/photo.jpg?sz=128", "display_name": "harshal.c", "link": "https://stackoverflow.com/users/1853020/harshal-c"}, "reply_to_user": {"reputation": 3989, "user_id": 1527217, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/gb5O6.jpg?s=128&g=1", "display_name": "khajvah", "link": "https://stackoverflow.com/users/1527217/khajvah"}, "edited": false, "score": 0, "creation_date": 1451503277, "post_id": 34535505, "comment_id": 56813300, "body": "@kjahvah It was one of the first things I checked for. All my traffic is being routed through Tor. I am inclined to believe that there is some leak during DNS resolution of Tor, as my school uses Google DNS, but don&#39;t know how to check that."}, {"owner": {"reputation": 3989, "user_id": 1527217, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/gb5O6.jpg?s=128&g=1", "display_name": "khajvah", "link": "https://stackoverflow.com/users/1527217/khajvah"}, "edited": false, "score": 0, "creation_date": 1451504459, "post_id": 34535505, "comment_id": 56813902, "body": "The leak wouldn&#39;t cause Google to show you the leaked IP. Google and others would, I think, just show who directly connected to them. <a href=\"https://stackoverflow.com/questions/23220494/tor-doesnt-work-with-urllib2?rq=1\">Others</a> had a similar problem but it seems it was https issue."}, {"owner": {"reputation": 4527, "user_id": 2382792, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/9tQBs.jpg?s=128&g=1", "display_name": "\u03c1ss", "link": "https://stackoverflow.com/users/2382792/%cf%81ss"}, "edited": false, "score": 0, "creation_date": 1451506027, "post_id": 34535505, "comment_id": 56814612, "body": "<a href=\"https://stem.torproject.org/faq.html\" rel=\"nofollow noreferrer\">stem.torproject.org/faq.html</a> could be an alternative."}], "owner": {"reputation": 196, "user_id": 1853020, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-FCxzUZjlH8I/AAAAAAAAAAI/AAAAAAAAIYo/iK4yjAi9qTI/photo.jpg?sz=128", "display_name": "harshal.c", "link": "https://stackoverflow.com/users/1853020/harshal-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 202, "favorite_count": 2, "answer_count": 0, "score": 0, "last_activity_date": 1514893067, "creation_date": 1451501941, "last_edit_date": 1451502684, "question_id": 34535505, "link": "https://stackoverflow.com/questions/34535505/ip-address-revealed-behind-tor", "title": "IP address revealed behind Tor", "body": "<p>I am using Tor servers to route the requests of my crawler, which is multithreaded but nonetheless very easy on loading since I make each thread sleep for a random normal time with a mean of 20 seconds (approx 3 requests a minute). I need to get first google search result for some 20,000 odd queries. My crawler is scripted in python using urllib2 (socks proxy) and mechanize (http proxy).</p>\n\n<pre><code># Snippet of code initializing the urllib2 build_opener\nhost = socks_hostname\nport = socks_port\nsocks_username = username\nsocks_password = password\ncj = cookielib.CookieJar()\nbr = urllib2.build_opener(SocksiPyHandler(socks.PROXY_TYPE_SOCKS5, host, port, \n                         username=socks_username, \n                         password=socks_password), \n                         urllib2.HTTPCookieProcessor(cj))\n\n# Get randomly generated User-Agent string.\n\nbr.addheaders = [('User-Agent', self.get_user_agent())]\nreturn br\n</code></pre>\n\n<p>I just discovered that Tor network isn't hiding my IP as far as google is concerned. I wrote a small test script to check the ip address from google and from <a href=\"http://whatismyip.net\" rel=\"nofollow\">http://whatismyip.net</a>. While whatismyip.net seems to get some ip based from Canada, Google shows my real ip, this confuses me. I have made sure that I don't have any cookies that can be tracked.</p>\n\n<p>What is even more puzzling is that, when I use the tor in my firefox, then google shows a random ip based in Canada as well. So, it's only when I send automated requests, that my real ip gets exposed, can someone help me figure out what is causing this leak?</p>\n\n<p>I understand crawling is a sensitive topic, but the rate of my crawling is actually slower than a human being!</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 379, "user_id": 4615807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/653b39c183d58fc2cd1c6627dffee8ce?s=128&d=identicon&r=PG&f=1", "display_name": "disflux", "link": "https://stackoverflow.com/users/4615807/disflux"}, "edited": false, "score": 1, "creation_date": 1451506706, "post_id": 34535510, "comment_id": 56814954, "body": "Have you tried using Threading instead of multiprocessing?"}, {"owner": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "edited": false, "score": 0, "creation_date": 1451524287, "post_id": 34535510, "comment_id": 56821577, "body": "to play several (upto 8) sounds concurrently, you could use <a href=\"http://stackoverflow.com/q/6004887/4279\"><code>pygame.mixer.Sound()</code></a>. <code>pygame</code> also provides a portable way to get keyboard input."}, {"owner": {"reputation": 299, "user_id": 5735084, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fIg5JvYx_JI/AAAAAAAAAAI/AAAAAAAAABw/jX72fAzLFxQ/photo.jpg?sz=128", "display_name": "Joshua Jurgensmeier", "link": "https://stackoverflow.com/users/5735084/joshua-jurgensmeier"}, "reply_to_user": {"reputation": 379, "user_id": 4615807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/653b39c183d58fc2cd1c6627dffee8ce?s=128&d=identicon&r=PG&f=1", "display_name": "disflux", "link": "https://stackoverflow.com/users/4615807/disflux"}, "edited": false, "score": 0, "creation_date": 1451604907, "post_id": 34535510, "comment_id": 56847453, "body": "@disflux Thanks for your response.  Yes I did attempt a similar approach with the Threading module, but had similar lag problems."}, {"owner": {"reputation": 299, "user_id": 5735084, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fIg5JvYx_JI/AAAAAAAAAAI/AAAAAAAAABw/jX72fAzLFxQ/photo.jpg?sz=128", "display_name": "Joshua Jurgensmeier", "link": "https://stackoverflow.com/users/5735084/joshua-jurgensmeier"}, "reply_to_user": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "edited": false, "score": 0, "creation_date": 1451605100, "post_id": 34535510, "comment_id": 56847491, "body": "@J.F.Sebastian Thanks for your response.  I have considered looking into using PyGame, but haven&#39;t tried it yet.  I will definitely check it out.  Would you recommend that I run multiple <code>pygame.mixer.Sound()</code> functions on separate threads to achieve the number that I want?  Eight isn&#39;t quite enough (;"}, {"owner": {"reputation": 1076, "user_id": 1888160, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/c5609133091f0f0ebedfc01deedd56d8?s=128&d=identicon&r=PG", "display_name": "KFox", "link": "https://stackoverflow.com/users/1888160/kfox"}, "edited": false, "score": 0, "creation_date": 1451710013, "post_id": 34535510, "comment_id": 56869071, "body": "Admittedly, I don&#39;t know a lot about PyAudio, but have you tried/considered keeping a stream open and having some sort of real-time feed filling the stream? Each time a note was triggered you could update a shared array/object between the thread which was updating the stream and the thread which was receiving key events. The thread updating the stream would mix (as in the linked post) each of the &#39;chunks&#39; together and write that to the stream object. This is bordering on a real-time audio application, and I don&#39;t know if that&#39;s where you&#39;re headed with this project though."}, {"owner": {"reputation": 299, "user_id": 5735084, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fIg5JvYx_JI/AAAAAAAAAAI/AAAAAAAAABw/jX72fAzLFxQ/photo.jpg?sz=128", "display_name": "Joshua Jurgensmeier", "link": "https://stackoverflow.com/users/5735084/joshua-jurgensmeier"}, "reply_to_user": {"reputation": 1076, "user_id": 1888160, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/c5609133091f0f0ebedfc01deedd56d8?s=128&d=identicon&r=PG", "display_name": "KFox", "link": "https://stackoverflow.com/users/1888160/kfox"}, "edited": false, "score": 0, "creation_date": 1451849356, "post_id": 34535510, "comment_id": 56906352, "body": "@KFox I have considered that exact thing.  However, I am unsure how I would implement it.  If pygame doesn&#39;t solve my problems, I guess I will just think harder about this.  Thanks for the reply."}, {"owner": {"reputation": 6248, "user_id": 3421652, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/myqs7.jpg?s=128&g=1", "display_name": "Roman", "link": "https://stackoverflow.com/users/3421652/roman"}, "edited": false, "score": 0, "creation_date": 1452246631, "post_id": 34535510, "comment_id": 57092971, "body": "My first thought was similar the post you linked.  When you start a new sound, create a variable with the numpy array of the remaning waveform of the sound and add the new waveform to it, and immediately start playing the new sound.  Hopefully the processing time is fast enough that it plays immediately.  You can use scipy.io.wavfile to parse audio to an array.  I could probably be convinced to code this up for you, but I need to go now :).  Let me know if you are still struggling with this on Monday."}, {"owner": {"reputation": 299, "user_id": 5735084, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fIg5JvYx_JI/AAAAAAAAAAI/AAAAAAAAABw/jX72fAzLFxQ/photo.jpg?sz=128", "display_name": "Joshua Jurgensmeier", "link": "https://stackoverflow.com/users/5735084/joshua-jurgensmeier"}, "reply_to_user": {"reputation": 6248, "user_id": 3421652, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/myqs7.jpg?s=128&g=1", "display_name": "Roman", "link": "https://stackoverflow.com/users/3421652/roman"}, "edited": false, "score": 0, "creation_date": 1452641480, "post_id": 34535510, "comment_id": 57257608, "body": "@Roman Thanks for your reply.  I haven&#39;t had a chance to work on this since your comment.  I will probably be working on it over the week though. If you want to write the code and post it I would appreciate it, but I should be able to come up with it."}, {"owner": {"reputation": 299, "user_id": 5735084, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fIg5JvYx_JI/AAAAAAAAAAI/AAAAAAAAABw/jX72fAzLFxQ/photo.jpg?sz=128", "display_name": "Joshua Jurgensmeier", "link": "https://stackoverflow.com/users/5735084/joshua-jurgensmeier"}, "reply_to_user": {"reputation": 6248, "user_id": 3421652, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/myqs7.jpg?s=128&g=1", "display_name": "Roman", "link": "https://stackoverflow.com/users/3421652/roman"}, "edited": false, "score": 0, "creation_date": 1452917256, "post_id": 34535510, "comment_id": 57389168, "body": "@Roman I tried mixing the sounds with numpy arrays as outlined in the post I linked.  It did not work well.  Just averaging them together produced a very static filled sound.  Additionally, it is throwing an exception at the end of the sound file.  Any ideas?"}], "answers": [{"comments": [{"owner": {"reputation": 6248, "user_id": 3421652, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/myqs7.jpg?s=128&g=1", "display_name": "Roman", "link": "https://stackoverflow.com/users/3421652/roman"}, "edited": false, "score": 0, "creation_date": 1452971928, "post_id": 34830968, "comment_id": 57403736, "body": "Well, that was easy v_v"}], "tags": [], "owner": {"reputation": 299, "user_id": 5735084, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fIg5JvYx_JI/AAAAAAAAAAI/AAAAAAAAABw/jX72fAzLFxQ/photo.jpg?sz=128", "display_name": "Joshua Jurgensmeier", "link": "https://stackoverflow.com/users/5735084/joshua-jurgensmeier"}, "is_accepted": true, "score": 8, "last_activity_date": 1452971325, "creation_date": 1452971325, "answer_id": 34830968, "question_id": 34535510, "link": "https://stackoverflow.com/questions/34535510/playing-a-lot-of-sounds-at-once/34830968#34830968", "title": "Playing a Lot of Sounds at Once", "body": "<p>I checked out pygame like J.F Sebastian suggested.  It ended up being exactly what I needed.  I used <a href=\"https://www.pygame.org/docs/ref/mixer.html\" rel=\"noreferrer\">pygame.mixer.Sound()</a> in conjunction with <a href=\"https://www.pygame.org/docs/ref/mixer.html#pygame.mixer.get_num_channels\" rel=\"noreferrer\">pygame.mixer.set_num_channels()</a>.  Here's what I came up with.</p>\n\n<pre><code>import pygame as pg\nimport time\n\npg.mixer.init()\npg.init()\n\na1Note = pg.mixer.Sound(\"F:\\Project Harpsichord\\The wavs\\A1.wav\")\na2Note = pg.mixer.Sound(\"F:\\Project Harpsichord\\The wavs\\A0.wav\")\n\npg.mixer.set_num_channels(50)\n\nfor i in range(25):\n    a1Note.play()\n    time.sleep(0.3)\n    a2Note.play()\n    time.sleep(0.3)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6248, "user_id": 3421652, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/myqs7.jpg?s=128&g=1", "display_name": "Roman", "link": "https://stackoverflow.com/users/3421652/roman"}, "is_accepted": false, "score": 2, "last_activity_date": 1452971861, "last_edit_date": 1495540943, "creation_date": 1452971861, "answer_id": 34831058, "question_id": 34535510, "link": "https://stackoverflow.com/questions/34535510/playing-a-lot-of-sounds-at-once/34831058#34831058", "title": "Playing a Lot of Sounds at Once", "body": "<p>This doesn't really solve your problem, but it's too long for the comments, and it may be useful.  I gave it a bash, got defeated on a few fronts - giving up and going for pizza.  Audio is really not my thing, but it was quite a lot of fun playing around with it.</p>\n\n<p>Give <a href=\"http://pydub.com/\" rel=\"nofollow noreferrer\">Pydub</a> a look.  I've Played around with a couple of methods, but haven't had any satisfactory success.  <a href=\"https://dsp.stackexchange.com/questions/3581/algorithms-to-mix-audio-signals-without-clipping\">This answer</a> here explains quite a few things regarding adding two signals together nicely. I assume that the static you have is because of clipping.  </p>\n\n<p>Sorry that I didn't deliver, but I may as well post all the things I've created in case you or someone else wants to grab something from it:</p>\n\n<pre><code>#using python 2.7\n#example animal sounds from http://www.wavsource.com/animals/animals.htm\n    #note that those sounds have lots of different sampling rates and encoding types.  Causes problems.\n#required installs:\n    #numpy\n    #scipy\n    #matplotlib\n    #pyaudio        -sudo apt-get install python-pyaudio\n    #pydub:         -pip install pydub\n\n\ndef example():\n    \"example sounds and random inputs\"\n    sExampleSoundsDir = \"/home/roman/All/Code/sound_files\"\n    sExampleFile1 = 'bird.wav'\n    sExampleFile2 = 'frog.wav'\n    oJ = Jurgenmeister(sExampleSoundsDir)\n\n    #load audio into numpy array\n    dSound1 = oJ.audio2array(sExampleFile1)\n    dSound2 = oJ.audio2array(sExampleFile2)\n\n    #Simply adding the arrays is noisy...\n    dResSound1 = oJ.resample(dSound1)\n    dResSound2 = oJ.resample(dSound2)\n    dJoined = oJ.add_sounds(dResSound1, dResSound2)\n\n    #pydub method\n    oJ.overlay_sounds(sExampleFile1, sExampleFile2)\n\n    #listen to the audio - mixed success with these sounds.\n    oJ.play_array(dSound1)\n    oJ.play_array(dSound2)\n    oJ.play_array(dResSound1)\n    oJ.play_array(dResSound2)\n    oJ.play_array(dJoined)\n\n    #see what the waveform looks like\n    oJ.plot_audio(dJoined)\n\n\n\n\nclass Jurgenmeister:\n    \"\"\"\n    Methods to play as many sounds on command as necessary\n    Named in honour of op, and its as good a name as I can come up with myself.\n    \"\"\"\n\n    def __init__(self, sSoundsDir):\n        import os\n        import random\n        lAllSounds = os.listdir(sSoundsDir)\n        self.sSoundsDir = sSoundsDir\n        self.lAllSounds = lAllSounds\n        self.sRandSoundName = lAllSounds[random.randint(0, len(lAllSounds)-1)]\n\n\n\n    def play_wave(self, sFileName):\n        \"\"\"PyAudio play a wave file.\"\"\"\n\n        import pyaudio\n        import wave\n        iChunk = 1024\n        sDir = \"{}/{}\".format(self.sSoundsDir, sFileName)\n        oWave = wave.open(sDir, 'rb')\n        oPyaudio = pyaudio.PyAudio()\n\n        oStream = oPyaudio.open(\n            format = oPyaudio.get_format_from_width(oWave.getsampwidth()),\n            channels = oWave.getnchannels(),\n            rate = oWave.getframerate(),\n            output = True\n        )\n\n        sData = oWave.readframes(iChunk)\n        while sData != '':\n            oStream.write(sData)\n            sData = oWave.readframes(iChunk)\n\n        oStream.stop_stream()\n        oStream.close()\n        oPyaudio.terminate()\n\n\n\n    def audio2array(self, sFileName):\n        \"\"\"\n        Returns monotone data for a wav audio file in form:  \n            iSampleRate, aNumpySignalArray, aNumpyTimeArray\n\n            Should perhaps do this with scipy again, but I threw that code away because I wanted \n            to try the pyaudio package because of its streaming functions.  They defeated me.\n        \"\"\"\n        import wave\n        import numpy as np\n\n        sDir = \"{}/{}\".format(self.sSoundsDir, sFileName)\n        oWave = wave.open(sDir,\"rb\")\n        tParams = oWave.getparams()\n        iSampleRate = tParams[2]   #frames per second\n        iLen = tParams[3]  # number of frames\n\n        #depending on the type of encoding of the file.  Usually 16\n        try:\n            sSound = oWave.readframes(iLen)\n            oWave.close()\n\n            aSound = np.fromstring(sSound, np.int16)\n        except ValueError:\n            raise ValueError(\"\"\"wave package seems to want all wav incodings to be in int16, else it throws a mysterious error.\n                Short way around it:  find audio encoded in the right format.  Or use scipy.io.wavfile.\n                \"\"\")\n\n        aTime = np.array( [float(i)/iSampleRate for i in range(len(aSound))] )\n\n        dRet = {\n            'iSampleRate': iSampleRate, \n            'aTime': aTime, \n            'aSound': aSound,\n            'tParams': tParams\n        }\n\n        return dRet\n\n\n\n    def resample(self, dSound, iResampleRate=11025):\n            \"\"\"resample audio arrays\n            common audio sample rates are 44100, 22050, 11025, 8000\n\n            #creates very noisy results sometimes.\n            \"\"\"\n            from scipy import interpolate\n            import numpy as np\n            aSound = np.array(dSound['aSound'])\n\n            iOldRate = dSound['iSampleRate']\n            iOldLen = len(aSound)\n            rPeriod = float(iOldLen)/iOldRate\n            iNewLen = int(rPeriod*iResampleRate)\n\n            aTime = np.arange(0, rPeriod, 1.0/iOldRate)\n            aTime = aTime[0:iOldLen]\n            oInterp = interpolate.interp1d(aTime, aSound)\n\n            aResTime = np.arange(0, aTime[-1], 1.0/iResampleRate)\n            aTime = aTime[0:iNewLen]\n\n            aResSound = oInterp(aResTime)\n            aResSound = np.array(aResSound, np.int16)\n\n            tParams = list(x for x in dSound['tParams'])\n            tParams[2] = iResampleRate\n            tParams[3] = iNewLen\n            tParams = tuple(tParams)\n\n            dResSound = {\n                'iSampleRate': iResampleRate, \n                'aTime': aResTime, \n                'aSound': aResSound,\n                'tParams': tParams\n            }\n\n            return dResSound\n\n\n\n    def add_sounds(self, dSound1, dSound2):\n        \"\"\"join two sounds together and return new array\n        This method creates a lot of clipping.  Not sure how to get around that.\n        \"\"\"\n        if dSound1['iSampleRate'] != dSound2['iSampleRate']:\n            raise ValueError('sample rates must be the same.  Please resample first.')\n\n        import numpy as np\n\n        aSound1 = dSound1['aSound']\n        aSound2 = dSound2['aSound']\n\n        if len(aSound1) &lt; len(aSound2):\n            aRet = aSound2.copy()\n            aRet[:len(aSound1)] += aSound1\n            aTime = dSound2['aTime']\n            tParams = dSound2['tParams']\n        else:\n            aRet = aSound1.copy()\n            aRet[:len(aSound2)] += aSound2\n            aTime = dSound1['aTime']\n            tParams = dSound1['tParams']\n\n\n        aRet = np.array(aRet, np.int16)\n\n        dRet = {\n            'iSampleRate': dSound1['iSampleRate'], \n            'aTime': aTime,\n            'aSound': aRet,\n            'tParams': tParams\n        }\n\n        return dRet\n\n\n\n    def overlay_sounds(self, sFileName1, sFileName2):\n        \"I think this method warrants a bit more exploration\n        Also very noisy.\"\n        from pydub import AudioSegment\n\n        sDir1 = \"{}/{}\".format(self.sSoundsDir, sFileName1)\n        sDir2 = \"{}/{}\".format(self.sSoundsDir, sFileName2)\n\n        sound1 = AudioSegment.from_wav(sDir1)\n        sound2 = AudioSegment.from_wav(sDir2)\n\n        # mix sound2 with sound1, starting at 0ms into sound1)\n        output = sound1.overlay(sound2, position=0)\n\n        # save the result\n        sDir = \"{}/{}\".format(self.sSoundsDir, 'OUTPUT.wav')\n        output.export(sDir, format=\"wav\")\n\n\n\n    def array2audio(self, dSound, sDir=None):\n        \"\"\"\n        writes an .wav audio file to disk from an array\n        \"\"\"\n        import struct\n        import wave\n        if sDir ==  None:\n            sDir = \"{}/{}\".format(self.sSoundsDir, 'OUTPUT.wav')\n\n        aSound = dSound['aSound']\n        tParams = dSound['tParams']\n        sSound = struct.pack('h'*len(aSound), *aSound)\n\n        oWave = wave.open(sDir,\"wb\")\n        oWave.setparams(tParams)\n        oWave.writeframes(sSound)\n        oWave.close()\n\n\n\n    def play_array(self, dSound):\n        \"\"\"Tried to use use pyaudio to play array by just streaming it.  It didn't behave, and I moved on.\n        I'm just not getting the pyaudio stream to play without weird distortion \n        when not loading from file.  Perhaps you have more luck.\n        \"\"\"\n        self.array2audio(dSound)\n        self.play_wave('OUTPUT.wav')\n\n\n\n    def plot_audio(self, dSound):\n        \"just plots the audio array.  Nice to see plots when things are going wrong.\"\n        import matplotlib.pyplot as plt\n        plt.plot(dSound['aTime'], dSound['aSound'])\n        plt.show()\n\n\n\n\nif __name__ == \"__main__\":\n    example()\n</code></pre>\n\n<p>I also get this error when I use wave.  It still works, so I just ignore it.\n<a href=\"https://stackoverflow.com/questions/17137701/pyaudio-alsa-error-messages\">Problem seems to be widespread</a>.  Error lines:</p>\n\n<pre><code>ALSA lib pcm_dsnoop.c:618:(snd_pcm_dsnoop_open) unable to open slave\nALSA lib pcm_dmix.c:1022:(snd_pcm_dmix_open) unable to open slave\nALSA lib pcm.c:2239:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.rear\nALSA lib pcm.c:2239:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.center_lfe\nALSA lib pcm.c:2239:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.side\nbt_audio_service_open: connect() failed: Connection refused (111)\nbt_audio_service_open: connect() failed: Connection refused (111)\nbt_audio_service_open: connect() failed: Connection refused (111)\nbt_audio_service_open: connect() failed: Connection refused (111)\nALSA lib pcm_dmix.c:1022:(snd_pcm_dmix_open) unable to open slave\nCannot connect to server socket err = No such file or directory\nCannot connect to server request channel\njack server is not running or cannot be started\n</code></pre>\n\n<p>Good luck!</p>\n"}], "migrated_from": {"other_site": {"aliases": ["http://programmer.stackexchange.com", "http://programmers.stackexchange.com"], "markdown_extensions": ["Prettify"], "launch_date": 1292524346, "open_beta_date": 1283972400, "closed_beta_date": 1283367600, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/softwareengineering/Img/apple-touch-icon@2.png", "twitter_account": "StackSoftEng", "favicon_url": "https://cdn.sstatic.net/Sites/softwareengineering/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/softwareengineering/Img/apple-touch-icon.png", "audience": "professionals, academics, and students working within the systems development life cycle", "site_url": "https://softwareengineering.stackexchange.com", "api_site_parameter": "softwareengineering", "logo_url": "https://cdn.sstatic.net/Sites/softwareengineering/Img/logo.png", "name": "Software Engineering", "site_type": "main_site"}, "on_date": 1451501955, "question_id": 306208}, "owner": {"reputation": 299, "user_id": 5735084, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fIg5JvYx_JI/AAAAAAAAAAI/AAAAAAAAABw/jX72fAzLFxQ/photo.jpg?sz=128", "display_name": "Joshua Jurgensmeier", "link": "https://stackoverflow.com/users/5735084/joshua-jurgensmeier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6612, "favorite_count": 1, "accepted_answer_id": 34830968, "answer_count": 2, "score": 12, "last_activity_date": 1452971861, "creation_date": 1451501591, "last_edit_date": 1495540032, "question_id": 34535510, "link": "https://stackoverflow.com/questions/34535510/playing-a-lot-of-sounds-at-once", "title": "Playing a Lot of Sounds at Once", "body": "<p>I am attempting to create a program in python that plays a particular harpsichord note when a certain key is pressed.  I want it to remain responsive so you can continue to play more notes (kind of like a normal electric piano.) However, because the wav files that the notes are stored in are about 7-10 seconds long I am experiencing some issues.  I can press at least 10 keys per second.  So, over the duration of one note I could have around 100 different wav files playing at once.  I tried to use winsound, but it was unable to play multiple wav files at once.  I then moved on to PyAudio and it works kind of.  The only way that I found to accomplish what I wanted was this:</p>\n\n<pre><code>from msvcrt import getch\nimport pyaudio\nimport wave\nimport multiprocessing as mp\n\n#This function is just code for playing a sound in PyAudio\ndef playNote(filename):\n\n    CHUNK = 1024\n\n    wf = wave.open(filename, 'rb')\n\n\n    p = pyaudio.PyAudio()\n\n    stream = p.open(format=p.get_format_from_width(wf.getsampwidth()),\n                    channels=wf.getnchannels(),\n                    rate=wf.getframerate(),\n                    output=True)\n\n    data = wf.readframes(CHUNK)\n\n    while data != '':\n        stream.write(data)\n        data = wf.readframes(CHUNK)\n\n    stream.stop_stream()\n    stream.close()\n\n    p.terminate()\n\n\nif __name__ == \"__main__\":\n\n    while True:\n        #If the 'a' key is pressed: start a new process that calls playNote\n        #and pass in the file name for a note. \n        if ord(getch()) == 97: #a\n\n            mp.Process(target=playNote, args=(\"F:\\Project Harpsichord\\The wavs\\A1.wav\",)).start()\n\n        #If the 's' key is pressed: start a new process that calls playNote\n        #and pass in the file name for another note. \n        if ord(getch()) == 115: #s\n\n            mp.Process(target=playNote, args=(\"F:\\Project Harpsichord\\The wavs\\A0.wav\",)).start()\n</code></pre>\n\n<p>Basically whenever I want to play a new wav, I have to start a new process that runs the code in the playNote function.  As I already stated I can potentially have up to 100 of these playing at once.  Suffice it to say, one hundred copies of the python interpreter all running at once almost crashed my computer.  I also tried a similar approach with multi-threading, but had the same problems.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/28743400/pyaudio-play-multiple-sounds-at-once\" title=\"This post\">This post</a> shows a way to mix multiple wav files together so they can be played at the same time, but since my program will not necessarily be starting the sounds at the same time I am unsure if this will work.\nI need an efficient way to play multiple notes at the same time.  Whether this comes in the form of another library, or even a different language I really don't care.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 17409, "user_id": 2387772, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/7qeew.jpg?s=128&g=1", "display_name": "yuvi", "link": "https://stackoverflow.com/users/2387772/yuvi"}, "edited": false, "score": 1, "creation_date": 1451501390, "post_id": 34535355, "comment_id": 56812369, "body": "Is there a file named &quot;1&quot; in that folder already?"}, {"owner": {"reputation": 1378, "user_id": 2088027, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f8c24609f6a55a23ab0ddf5ac13f8bff?s=128&d=identicon&r=PG", "display_name": "kevin", "link": "https://stackoverflow.com/users/2088027/kevin"}, "reply_to_user": {"reputation": 17409, "user_id": 2387772, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/7qeew.jpg?s=128&g=1", "display_name": "yuvi", "link": "https://stackoverflow.com/users/2387772/yuvi"}, "edited": false, "score": 0, "creation_date": 1451501445, "post_id": 34535355, "comment_id": 56812397, "body": "No, but some names include the number &quot;1&quot; such as pm_11_1.txt"}, {"owner": {"reputation": 17409, "user_id": 2387772, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/7qeew.jpg?s=128&g=1", "display_name": "yuvi", "link": "https://stackoverflow.com/users/2387772/yuvi"}, "edited": false, "score": 0, "creation_date": 1451501520, "post_id": 34535355, "comment_id": 56812440, "body": "I&#39;ll reiterate - is there <i>any</i> file that is just a number (like &quot;1&quot; or &quot;5&quot; or what have you)? Because the error clearly says that you&#39;re trying to rename a file into a name of an already existing file."}, {"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1451501619, "post_id": 34535355, "comment_id": 56812485, "body": "no he is in the parent folder ,... he probably ran it part way and has already renamed some of the files to numbers"}, {"owner": {"reputation": 3642, "user_id": 4593743, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0212ffc5054bff1695ffa1e46f357746?s=128&d=identicon&r=PG&f=1", "display_name": "python", "link": "https://stackoverflow.com/users/4593743/python"}, "edited": false, "score": 0, "creation_date": 1451501710, "post_id": 34535355, "comment_id": 56812535, "body": "how will you decide which name to give to which file? Is there any specific order we need to rename them?"}, {"owner": {"reputation": 4676, "user_id": 30105, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/a1dc4bddf38de8351ae70e98845242e9?s=128&d=identicon&r=PG", "display_name": "PyNEwbie", "link": "https://stackoverflow.com/users/30105/pynewbie"}, "edited": false, "score": 0, "creation_date": 1451504719, "post_id": 34535355, "comment_id": 56813998, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/29075818/file-renaming-using-python\">file renaming using python</a>"}, {"owner": {"reputation": 619481, "user_id": 2901002, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/hMDvl.jpg?s=128&g=1", "display_name": "jezrael", "link": "https://stackoverflow.com/users/2901002/jezrael"}, "edited": false, "score": 0, "creation_date": 1451563213, "post_id": 34535355, "comment_id": 56833882, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/225735/batch-renaming-of-files-in-a-directory\">Batch Renaming of Files in a Directory</a>"}], "answers": [{"comments": [{"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1451501765, "post_id": 34535448, "comment_id": 56812570, "body": "he should really create a temp folder first to ensure no collisions ... but meh"}, {"owner": {"reputation": 1378, "user_id": 2088027, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f8c24609f6a55a23ab0ddf5ac13f8bff?s=128&d=identicon&r=PG", "display_name": "kevin", "link": "https://stackoverflow.com/users/2088027/kevin"}, "edited": false, "score": 0, "creation_date": 1451503123, "post_id": 34535448, "comment_id": 56813226, "body": "Thanks. See my revised script below."}, {"owner": {"reputation": 341, "user_id": 1566443, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e0a40af043dd0cd852faa502fde0cc8e?s=128&d=identicon&r=PG", "display_name": "Mehran Meidani", "link": "https://stackoverflow.com/users/1566443/mehran-meidani"}, "edited": false, "score": 0, "creation_date": 1451503461, "post_id": 34535448, "comment_id": 56813391, "body": "You should find the last &#39;\\&#39; character in the filename. Like this: <code>directory = filename[:filename.rfind(&#39;\\&#39;)+1]</code> and then rename like this : <code>os.rename(filename, directory + str(n))</code>"}], "tags": [], "owner": {"reputation": 341, "user_id": 1566443, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e0a40af043dd0cd852faa502fde0cc8e?s=128&d=identicon&r=PG", "display_name": "Mehran Meidani", "link": "https://stackoverflow.com/users/1566443/mehran-meidani"}, "is_accepted": false, "score": 2, "last_activity_date": 1451501702, "creation_date": 1451501702, "answer_id": 34535448, "question_id": 34535355, "link": "https://stackoverflow.com/questions/34535355/rename-file-names-in-a-folder-python/34535448#34535448", "title": "Rename file names in a folder - Python", "body": "<p>That script rename that files and change their location to the parent folder, in this case, parent of the data folder. Maybe you have some file with these number in the parent folder. You should attach the folder name to the rename function's second parameter.</p>\n"}, {"tags": [], "owner": {"reputation": 3989, "user_id": 1527217, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/gb5O6.jpg?s=128&g=1", "display_name": "khajvah", "link": "https://stackoverflow.com/users/1527217/khajvah"}, "is_accepted": false, "score": 2, "last_activity_date": 1451501719, "last_edit_date": 1592644375, "creation_date": 1451501719, "answer_id": 34535450, "question_id": 34535355, "link": "https://stackoverflow.com/questions/34535355/rename-file-names-in-a-folder-python/34535450#34535450", "title": "Rename file names in a folder - Python", "body": "<blockquote>\n<p>os.rename(src, dst)</p>\n<p>Rename the file or directory src to dst. If dst is a directory, OSError will be raised. On Unix, if dst exists and is a file, it will be replaced silently if the user has permission. The operation may fail on some Unix flavors if src and dst are on different filesystems. If successful, the renaming will be an atomic operation (this is a POSIX requirement). On Windows, if dst already exists, OSError will be raised even if it is a file; there may be no way to implement an atomic rename when dst names an existing file.</p>\n</blockquote>\n<p>Your destination is wrong. It is your current directory + <code>n</code> while it should be the <code>data</code> directory + <code>n</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1451504270, "post_id": 34535687, "comment_id": 56813807, "body": "why not <code>if not filename.endswith(&quot;.py&quot;): os.rename(filename, str(n))</code> and forget the pass?"}], "tags": [], "owner": {"reputation": 3642, "user_id": 4593743, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0212ffc5054bff1695ffa1e46f357746?s=128&d=identicon&r=PG&f=1", "display_name": "python", "link": "https://stackoverflow.com/users/4593743/python"}, "is_accepted": false, "score": 0, "last_activity_date": 1451505096, "last_edit_date": 1451505096, "creation_date": 1451502736, "answer_id": 34535687, "question_id": 34535355, "link": "https://stackoverflow.com/questions/34535355/rename-file-names-in-a-folder-python/34535687#34535687", "title": "Rename file names in a folder - Python", "body": "<p>You can try this script <code>rename_files.py</code>. you should place this script inside the folder where all your <code>files</code> are located.</p>\n\n<p>Also note:</p>\n\n<blockquote>\n  <p>os.rename(src, dst)</p>\n  \n  <p>Rename the file or directory src to dst. If dst is a directory,\n  OSError will be raised. On Unix, if dst exists and is a file, it will\n  be replaced silently if the user has permission. The operation may\n  fail on some Unix flavors if src and dst are on different filesystems.\n  If successful, the renaming will be an atomic operation (this is a\n  POSIX requirement). On Windows, if dst already exists, OSError will be\n  raised even if it is a file; there may be no way to implement an atomic rename when dst names an existing file.</p>\n</blockquote>\n\n<pre><code>import os\n\nlist_of_files = os.listdir(os.getcwd())\n\nn = 1\nfor filename in list_of_files:\n    if not filename.endswith(\".py\"):\n        os.rename(filename, str(n))\n        n += 1\n</code></pre>\n\n<p>Before running this script you can see the <code>file_names</code> and <code>directory</code>.\n<a href=\"https://i.stack.imgur.com/NUk9T.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NUk9T.png\" alt=\"enter image description here\"></a></p>\n\n<p>After running this script. I hope this is helpful\n<a href=\"https://i.stack.imgur.com/FmI6Q.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FmI6Q.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 1704, "user_id": 4241180, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y8rWG.png?s=128&g=1", "display_name": "vrs", "link": "https://stackoverflow.com/users/4241180/vrs"}, "is_accepted": true, "score": 4, "last_activity_date": 1451503712, "creation_date": 1451503712, "answer_id": 34535935, "question_id": 34535355, "link": "https://stackoverflow.com/questions/34535355/rename-file-names-in-a-folder-python/34535935#34535935", "title": "Rename file names in a folder - Python", "body": "<p>Try this version:</p>\n\n<pre><code>import os\ndata = os.path.abspath(\"data/\")\nfor i, f in enumerate(os.listdir(data)):\n    src = os.path.join(data, f)\n    dst = os.path.join(data, (str(i + 1)))\n    os.rename(src, dst)\n</code></pre>\n\n<p>It's using normalized absolute paths. It works for me. It's kind of more concise and requires only <code>os</code> library instead of two.</p>\n"}], "owner": {"reputation": 1378, "user_id": 2088027, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f8c24609f6a55a23ab0ddf5ac13f8bff?s=128&d=identicon&r=PG", "display_name": "kevin", "link": "https://stackoverflow.com/users/2088027/kevin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2190, "favorite_count": 0, "accepted_answer_id": 34535935, "answer_count": 4, "score": 1, "last_activity_date": 1451515095, "creation_date": 1451501316, "last_edit_date": 1451515095, "question_id": 34535355, "link": "https://stackoverflow.com/questions/34535355/rename-file-names-in-a-folder-python", "title": "Rename file names in a folder - Python", "body": "<p>I have files in a folder. Their names look like:</p>\n\n<pre><code>hello_1\nmusic\nhello_2\nmusic_2015\n</code></pre>\n\n<p>I would like to rename them sequentially:</p>\n\n<pre><code>1\n2\n3\n4\n</code></pre>\n\n<p>My python script is:</p>\n\n<pre><code>import glob, os\n\nn = 1\nfor filename in glob.glob('data\\*'):\n    os.rename(filename, str(n))\n    n += 1\n</code></pre>\n\n<p>I am getting the following error:</p>\n\n<pre><code>[Error 183] Cannot create a file when that file already exists\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 1704, "user_id": 4241180, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y8rWG.png?s=128&g=1", "display_name": "vrs", "link": "https://stackoverflow.com/users/4241180/vrs"}, "edited": false, "score": 0, "creation_date": 1451501327, "post_id": 34535309, "comment_id": 56812327, "body": "It would be much easier to answer your question, if you provide desired output"}], "answers": [{"tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": true, "score": 1, "last_activity_date": 1451503597, "last_edit_date": 1451503597, "creation_date": 1451501508, "answer_id": 34535400, "question_id": 34535309, "link": "https://stackoverflow.com/questions/34535309/replacing-element-in-a-2d-list/34535400#34535400", "title": "replacing element in a 2D List", "body": "<p>If by most common you mean in all the values combined first find the most common element and then iterate over the sublists replacing any Nones with the most common word:</p>\n\n<pre><code>my_data= [['58', 'management', 'unknown', 'no'],\n ['44', 'technician', 'single', 'no'],\n ['33', 'entrepreneur', 'married', 'no'],\n ['47', 'blue-collar', 'married', 'no'],\n ['33', 'unknown', 'single', 'no'],\n ['35', 'management', 'unknown', 'no'],\n ['28', 'management', 'single', 'no'],\n ['42', 'entrepreneur', 'divorced', 'no'],\n ['58', 'retired', 'married', 'no'],\n ['43', 'technician', 'unknown', 'no']]\n\nfrom collections import Counter\nfrom itertools import chain\n\ncn = Counter(chain(*my_data)).most_common(1)[0][0]\nfor sub in my_data:\n    sub[:] = [cn if s == \"unknown\" else s for s in sub ]\n</code></pre>\n\n<p>If you actually want to get the max columns wise it is a bit more involved, you need to apply the same Counter logic but use one for each column:</p>\n\n<pre><code>from collections import Counter\n\n# range over amount of columns and get the count for all words\nl = [Counter() for _ in range(4)]\nfor sub in my_data:\n    for ind, ele in enumerate(sub):\n        l[ind][ele] += 1\n\n# get most common word from each Counter\nl[:] = [c.most_common(1)[0][0] for c in l]\n\nfor sub in my_data:\n   # if word is unknown replace it using the appropriate column word\n   sub[:] = [ l[ind] if ele == \"unknown\" else ele for ind, ele in enumerate(sub)]\n\n\n\n\nfrom pprint import pprint as pp\npp(my_data)\n</code></pre>\n\n<p>Which will give you:</p>\n\n<pre><code>[['58', 'management', 'married', 'no'],\n ['44', 'technician', 'single', 'no'],\n ['33', 'entrepreneur', 'married', 'no'],\n ['47', 'blue-collar', 'married', 'no'],\n ['33', 'management', 'single', 'no'],\n ['35', 'management', 'married', 'no'],\n ['28', 'management', 'single', 'no'],\n ['42', 'entrepreneur', 'divorced', 'no'],\n ['58', 'retired', 'married', 'no'],\n ['43', 'technician', 'married', 'no']]\n</code></pre>\n\n<p>In the third column, either single or married are possible replacement values as they appear an equal amount of times.</p>\n"}], "owner": {"reputation": 47, "user_id": 5731746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/725fe26f3fec804a82faa154c715d4fb?s=128&d=identicon&r=PG&f=1", "display_name": "adamjk66", "link": "https://stackoverflow.com/users/5731746/adamjk66"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 269, "favorite_count": 0, "accepted_answer_id": 34535400, "answer_count": 1, "score": 0, "last_activity_date": 1451503597, "creation_date": 1451501078, "last_edit_date": 1451501712, "question_id": 34535309, "link": "https://stackoverflow.com/questions/34535309/replacing-element-in-a-2d-list", "title": "replacing element in a 2D List", "body": "<p>consider this list</p>\n\n<pre><code> my_data= [\n     ['58', 'management', 'unknown', 'no'],\n     ['44', 'technician', 'single', 'no'],\n     ['33', 'entrepreneur', 'married', 'no'],\n     ['47', 'blue-collar', 'married', 'no'],\n     ['33', 'unknown', 'single', 'no'],\n     ['35', 'management', 'unknown', 'no'],\n     ['28', 'management', 'single', 'no'],\n     ['42', 'entrepreneur', 'divorced', 'no'],\n     ['58', 'retired', 'married', 'no'],\n     ['43', 'technician', 'unknown', 'no']\n]\n</code></pre>\n\n<p>I want to replace those unknown values with the most common element on the list \nand something is wrong with my code can anyone please correct it. \nit seems I need to call remove_unknown() twice to make it work</p>\n\n<pre><code>def most_common(lst):\n    return max(set(lst), key=lst.count)\n\ndef remove_unknowns(ls):\n    mycols=[]\n    for cols in range(0, 4):\n        for rows in xrange(len(ls)):\n            if (type(ls[rows][cols]) is str):\n                mycols.extend([ls[rows][cols]])\n        #print mycols\n        for rows in xrange(len(ls)):\n            if (type(ls[rows][cols]) is str):\n                if ls[rows][cols] == 'unknown':\n                    ls[rows][cols]=most_common(mycols)\n    return ls\nremove_unknowns(my_data)\nremove_unknowns(my_data)\n</code></pre>\n\n<p>my desired output is something like this:</p>\n\n<pre><code>my_data= [\n ['58', 'management', 'married', 'no'],\n ['44', 'technician', 'single', 'no'],\n ['33', 'entrepreneur', 'married', 'no'],\n ['47', 'blue-collar', 'married', 'no'],\n ['33', 'management', 'single', 'no'],\n ['35', 'management', 'married', 'no'],\n ['28', 'management', 'single', 'no'],\n ['42', 'entrepreneur', 'divorced', 'no'],\n ['58', 'retired', 'married', 'no'],\n ['43', 'technician', 'married', 'no']\n</code></pre>\n\n<p>]</p>\n"}, {"tags": ["python", "django", "django-models", "disqus"], "comments": [{"owner": {"reputation": 1913, "user_id": 3509554, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2ed608a1c5a6b018efc70e255ed888d0?s=128&d=identicon&r=PG&f=1", "display_name": "cdvv7788", "link": "https://stackoverflow.com/users/3509554/cdvv7788"}, "edited": false, "score": 0, "creation_date": 1451501614, "post_id": 34535280, "comment_id": 56812482, "body": "is django.contrib.sites in your installed apps?"}, {"owner": {"reputation": 547, "user_id": 2497008, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/O1uBR.jpg?s=128&g=1", "display_name": "Tatenda", "link": "https://stackoverflow.com/users/2497008/tatenda"}, "reply_to_user": {"reputation": 1913, "user_id": 3509554, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2ed608a1c5a6b018efc70e255ed888d0?s=128&d=identicon&r=PG&f=1", "display_name": "cdvv7788", "link": "https://stackoverflow.com/users/3509554/cdvv7788"}, "edited": false, "score": 0, "creation_date": 1451501834, "post_id": 34535280, "comment_id": 56812604, "body": "no i dont have that. i tried adding django.contrib.site.models and i got another error"}], "answers": [{"tags": [], "owner": {"reputation": 5001, "user_id": 1971587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cafdce836e1f30eaaa42b7238e5a7516?s=128&d=identicon&r=PG", "display_name": "Joey Wilhelm", "link": "https://stackoverflow.com/users/1971587/joey-wilhelm"}, "is_accepted": true, "score": 2, "last_activity_date": 1451502735, "creation_date": 1451502735, "answer_id": 34535686, "question_id": 34535280, "link": "https://stackoverflow.com/questions/34535280/installing-disqus-on-django/34535686#34535686", "title": "Installing disqus on django", "body": "<p>You need to ensure that <code>'django.contrib.sites'</code> is in your <code>INSTALLED_APPS</code> setting. After this, the above error should go away, and you should also have a \"Sites\" section in your Django admin.</p>\n"}], "owner": {"reputation": 547, "user_id": 2497008, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/O1uBR.jpg?s=128&g=1", "display_name": "Tatenda", "link": "https://stackoverflow.com/users/2497008/tatenda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 715, "favorite_count": 1, "accepted_answer_id": 34535686, "answer_count": 1, "score": -1, "last_activity_date": 1451502735, "creation_date": 1451500935, "last_edit_date": 1451501223, "question_id": 34535280, "link": "https://stackoverflow.com/questions/34535280/installing-disqus-on-django", "title": "Installing disqus on django", "body": "<p>I am trying to install disqus on my django project. I have followed these instructions:</p>\n\n<p>First, add disqus to your INSTALLED_APPS. You don\u2019t need to run syncdb as there are no models provided.</p>\n\n<p>Next, add DISQUS_API_KEY and DISQUS_WEBSITE_SHORTNAME to your settings. You can get your API key here (you must be logged in on the DISQUS website). To see the shortname of your website, navigate to Settings->General on the DISQUS website.</p>\n\n<p>Finally, you need to change the domain of your Site to the domain you\u2019re actually going to use for your website. The easiest way to do this is to enable django.contrib.admin and just click on the Site object to modify it. If you don\u2019t have contrib.admin installed (or don\u2019t want to install it), you can run python manage.py shell and change the value in the cli:</p>\n\n<p>I am trying to do the last part, the one which starts with the word Finally... </p>\n\n<p>The easiest way to do this is to enable django.contrib.admin and just click on the Site object to modify it.</p>\n\n<p>For this part, i already have django.contrib.admin under my INSTALLED_APPS, but what i dont understand is where is this Site object I am supposed to click. Because of this i tried to use the python manage.py shell approach. The instructions are as follows: </p>\n\n<pre><code>from django.contrib.sites.models import Site\nSite.objects.all()\n\ns = Site.objects.all()[0]\ns.domain = 'arthurkoziel.com'\n\ns.name = 'arthurkoziel.com'\ns.save()\n\nSite.objects.all()\n</code></pre>\n\n<p>Now the problem is when i type <strong>from django.contrib.sites.models import Site</strong>, i get the following error message:</p>\n\n<blockquote>\n  <p>Model class django.contrib.sites.models.Site doesn't declare an\n  explicit app_label and either isn't in an application in\n  INSTALLED_APPS or else was imported before its application was loaded.</p>\n</blockquote>\n\n<p>Can anyone who understands the installation process help me out to interpret.</p>\n"}, {"tags": ["python", "macos", "python-3.x", "tkinter", "tk"], "comments": [{"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1451504750, "post_id": 34535264, "comment_id": 56814014, "body": "Are you asking how to get <code>destroy</code> to destroy and hide the windows after <code>mainloop</code> exits but before <code>time.sleep(10)</code> finishes?"}, {"owner": {"reputation": 158, "user_id": 5720002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12a17db78babaa782233d5c4128c0025?s=128&d=identicon&r=PG&f=1", "display_name": "b3m2a1", "link": "https://stackoverflow.com/users/5720002/b3m2a1"}, "reply_to_user": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1451507699, "post_id": 34535264, "comment_id": 56815504, "body": "Playing around with the above some more, yes. The mac-packaged version of the Tk framework must have done just that. I figured out that as a work-around I can just check whether the window I&#39;m calling destroy on is the root window or not and route to withdraw and quit in that case, but if you know how to get destroy to hide the windows, that would be preferable."}, {"owner": {"reputation": 119001, "user_id": 301832, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/965220a70d38e6a29466f44cdb4f804e?s=128&d=identicon&r=PG", "display_name": "Donal Fellows", "link": "https://stackoverflow.com/users/301832/donal-fellows"}, "edited": false, "score": 0, "creation_date": 1451688983, "post_id": 34535264, "comment_id": 56865327, "body": "There have been a number of changes inside the guts of Tk. The way you&#39;re seeing now is how it is <i>supposed</i> to work. You need an asynchronous wait in the GUI thread\u2026"}], "owner": {"reputation": 158, "user_id": 5720002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12a17db78babaa782233d5c4128c0025?s=128&d=identicon&r=PG&f=1", "display_name": "b3m2a1", "link": "https://stackoverflow.com/users/5720002/b3m2a1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 288, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1451502673, "creation_date": 1451500871, "last_edit_date": 1451502673, "question_id": 34535264, "link": "https://stackoverflow.com/questions/34535264/updated-tk-broke-destroy", "title": "Updated Tk, broke .destroy", "body": "<p>I've been working with tkinter (from python 3.2 and 3.4) for the past year or so and have never had issues with widgets destroying.</p>\n\n<p>I recently updated my version of Tk/Tcl (to ActiveTcl 8.5.18) and also updated my operating system (to MacOS 10.11). At first it seemed no windows would destroy, but I've since discovered that if a process remains running, then destroy will simply freeze the window.</p>\n\n<p>The code below displays this issue:</p>\n\n<pre><code>#! usr/local/bin/python3.4\n\nclass kill_test:\n    def __init__(self,r=None):\n        import tkinter as tk\n        if r is None:\n            r=tk.Tk()\n        self.r=r\n        self.forever_flag=False\n        self.withdraw=False\n        self.buttons=[\n            tk.Label(r,text='Set Hold Flag',relief='groove'),\n            tk.Label(r,text='Destroy Root',relief='groove'),\n            tk.Label(r,text='Withdraw and Destroy',relief='groove'),\n            tk.Label(r,text='Destroy Self',relief='groove'),\n            tk.Label(r,text='Quit Root',relief='groove'),\n            tk.Label(r,text='Withdraw and Quit',relief='groove'),\n            tk.Label(r,text='Make Toplevel',relief='groove')\n            ]\n        def r_destroy(s=self):\n            print('root.destroy called')\n            s.r.destroy()\n        def b_destroy(s=self):\n            print('button.destroy called')\n            for b in self.buttons:\n                if 'Self' in b['text']:\n                    b.destroy()\n        def r_quit(s=self):\n            print('root.quit called')\n            self.r.quit()\n        def f_flag(s=self):\n            print('changing loop_flag')\n            self.forever_flag=(not self.forever_flag)\n            for b in self.buttons:\n                if 'Flag' in b['text']:\n                    if self.forever_flag:\n                        b.base_fg='red'\n                    else:\n                        b.base_fg='black'\n        def w_destroy(s=self):\n            print('withdrawing and destroying')\n            self.r.withdraw()\n            self.r.destroy()\n        def w_quit(s=self):\n            print('withdrawing and quitting')\n            self.r.withdraw()\n            self.r.quit()\n        def t_cmd(s=self):\n            T=tk.Toplevel()\n            kill_test(T)\n        self.cmds=[\n            f_flag,\n            r_destroy,\n            w_destroy,\n            b_destroy,\n            r_quit,\n            w_quit,\n            t_cmd\n            ]\n        i=0;j=0\n        for b,cmd in zip(self.buttons[:-1],self.cmds[:-1]):\n            b.base_fg=b['fg']\n            b.bind('&lt;Enter&gt;',lambda e:e.widget.config(bg='lightblue',fg='white'))\n            b.bind('&lt;Button-1&gt;',lambda e:e.widget.config(bg='darkblue'))\n            b.bind('&lt;ButtonRelease-1&gt;',lambda e,c=cmd:(e.widget.config(bg='lightblue'),c()))\n            b.bind('&lt;Leave&gt;',lambda e:e.widget.config(bg='white',fg=e.widget.base_fg))\n            b.grid(row=i,column=j,sticky='ew')\n            i+=1\n            if i&gt;2:\n                i=0\n                j+=1\n        b=self.buttons[-1];cmd=self.cmds[-1]\n        b.base_fg=b['fg']\n        b.bind('&lt;Enter&gt;',lambda e:e.widget.config(bg='lightblue',fg='white'))\n        b.bind('&lt;Button-1&gt;',lambda e:e.widget.config(bg='darkblue'))\n        b.bind('&lt;ButtonRelease-1&gt;',lambda e,c=cmd:(e.widget.config(bg='lightblue'),c()))\n        b.bind('&lt;Leave&gt;',lambda e:e.widget.config(bg='white',fg=e.widget.base_fg))\n        b.grid(row=3,column=0,columnspan=2,sticky='ew')\n\n    def run(self):\n        self.r.mainloop()\n\nif __name__=='__main__':\n    import time\n    t=kill_test()\n    t.run()\n    if t.forever_flag:\n        time.sleep(10)\n</code></pre>\n\n<p>Calling from the command line, if one does not press the \"Set Hold Flag' button, then everything exits smoothly.</p>\n\n<p>On the other hand, if one does press it, then trying to destroy the window via any mechanism just freezes the window in place until time.sleep exits.</p>\n\n<p>It used to be that the window would at least disappear first. </p>\n\n<p>If one calls the 'Withdraw and destroy' button, the window remains visible but inactive. If one calls the 'Withdraw and quit' button, though, it disappears.</p>\n\n<p>Lastly, toplevel windows will destroy fine (as expected, considering that the loop was never called), regardless of what is done to them. I put in a toplevel button version of the test.</p>\n\n<p>Does anyone have hints as to how I can get the old behaviour back?</p>\n"}, {"tags": ["python", "mongodb", "dictionary", "find"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5731665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85eba699ede7016773ea168f55695fca?s=128&d=identicon&r=PG&f=1", "display_name": "Vic Ross", "link": "https://stackoverflow.com/users/5731665/vic-ross"}, "edited": false, "score": 0, "creation_date": 1451933412, "post_id": 34535675, "comment_id": 56941029, "body": "Thank you!  I just found the extra curly brace and was going to post the answer, but you beat me to it."}], "tags": [], "owner": {"reputation": 3275, "user_id": 4232866, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-P68fF8owhUE/AAAAAAAAAAI/AAAAAAAAACw/174D58q2dj0/photo.jpg?sz=128", "display_name": "Volodymyr Synytskyi", "link": "https://stackoverflow.com/users/4232866/volodymyr-synytskyi"}, "is_accepted": false, "score": 1, "last_activity_date": 1451504290, "last_edit_date": 1451504290, "creation_date": 1451502662, "answer_id": 34535675, "question_id": 34535222, "link": "https://stackoverflow.com/questions/34535222/typeerror-unhashable-type-dict-using-elemmatch-in-count-or-find-in-python/34535675#34535675", "title": "TypeError unhashable type: &#39;dict&#39; using $elemMatch in count or find in Python", "body": "<p>You have too many curly braces in the $elem subquery. Try this query:</p>\n\n<pre><code>{ \n  '$and': \n    [\n      {'SubscriberState': 'ACTIVE'}, \n      {\n        'SubscriptionSet': {\n          '$elemMatch': {\n            'SubscriptionId': {'$in': GoodSubscriptions}, \n            'SeatState': {'$ne': 'ASSIGNED'}\n          }\n        }\n      }\n    ]\n}\n</code></pre>\n\n<p>I actually think you want to use mongodb <a href=\"https://docs.mongodb.org/manual/reference/operator/aggregation/filter/\" rel=\"nofollow\">$filter</a>. Because with the $elemMatch if there is any element within embedded array which satisfies the condition then a whole document with a whole embedded array(despite whether another elements satisfy condition) will be returned. </p>\n"}], "owner": {"reputation": 1, "user_id": 5731665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85eba699ede7016773ea168f55695fca?s=128&d=identicon&r=PG&f=1", "display_name": "Vic Ross", "link": "https://stackoverflow.com/users/5731665/vic-ross"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1220, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1451504290, "creation_date": 1451500697, "question_id": 34535222, "link": "https://stackoverflow.com/questions/34535222/typeerror-unhashable-type-dict-using-elemmatch-in-count-or-find-in-python", "title": "TypeError unhashable type: &#39;dict&#39; using $elemMatch in count or find in Python", "body": "<p>The Users collection in the Mongo database contains records containing an element that is an array (SubscriptionSet) of dictionaries with pairs of values as shown below.</p>\n\n<pre><code>{\n    \"_id\": {\n        \"$oid\": \"567019357a5c390d040cbbc2\"\n    },\n    \"EmailAddress\": \"joejane@myco.com\",\n    \"SubscriptionSet\": [\n        {\n            \"SubscriptionId\": 586102,\n            \"SeatState\": \"ASSIGNED\"\n        },\n        {\n            \"SubscriptionId\": 588972,\n            \"SeatState\": \"ASSIGNED\"\n        }\n    ],\n    \"DisplayName\": \"Joe Jane\",\n    \"SubscriberState\": \"ACTIVE\"\n}\n</code></pre>\n\n<p>I want to find all users that have a SubscriptionId matching one of two values AND a SeatState that is not equal to ASSIGNED.  I am using the following find call.</p>\n\n<pre><code>GoodSubscriptions = [586102, 586104]\ndb = client.bsssubscriptions\nUsers = db.Users\nBadSubscriptions = Users.find({'$and': [{'SubscriberState': 'ACTIVE'}, {'SubscriptionSet': {'$elemMatch': {{'SubscriptionId': {'$in': GoodSubscriptions}}, {'SeatState': {'$ne': 'ASSIGNED'}}}}}]})\n</code></pre>\n\n<p>and get the following error:</p>\n\n<pre><code>  File \"C:\\Users\\IBM_ADMIN\\Desktop\\BSS API\\db query.py\", line 24, in &lt;module&gt;\n    BadVerse = Users.find({'SubscriptionSet': {'$elemMatch': {{'SubscriptionId': {'$in': GoodSubscriptions}}, {'SeatState': {'$ne': 'ASSIGNED'}}}}})\nTypeError: unhashable type: 'dict'\n</code></pre>\n\n<p>I have looked for this specific error and found many examples, but none were related to using a find with a records containing an array of dictionary pairs.</p>\n"}, {"tags": ["python", "html", "xml", "xpath", "web-scraping"], "comments": [{"owner": {"reputation": 25081, "user_id": 4804629, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vGzEm.jpg?s=128&g=1", "display_name": "splash58", "link": "https://stackoverflow.com/users/4804629/splash58"}, "edited": false, "score": 0, "creation_date": 1451501881, "post_id": 34535209, "comment_id": 56812626, "body": "<code>normalize-space(&#47;html&#47;body&#47;table&#47;tbody&#47;tr&#47;td[5])</code>"}], "answers": [{"tags": [], "owner": {"reputation": 88945, "user_id": 290085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/306077a2fb7af6587f470214a1b337ff?s=128&d=identicon&r=PG", "display_name": "kjhughes", "link": "https://stackoverflow.com/users/290085/kjhughes"}, "is_accepted": false, "score": 1, "last_activity_date": 1451502797, "last_edit_date": 1495542184, "creation_date": 1451502486, "answer_id": 34535629, "question_id": 34535209, "link": "https://stackoverflow.com/questions/34535209/get-text-via-xpath-ignoring-markup/34535629#34535629", "title": "Get text via XPath, ignoring markup", "body": "<p>You want the <a href=\"http://www.w3.org/TR/xpath/#dt-string-value\" rel=\"nofollow noreferrer\"><em>string value</em></a> of the <code>td[5]</code> element.  Use <strong><a href=\"http://www.w3.org/TR/xpath/#function-string\" rel=\"nofollow noreferrer\"><code>string()</code></a></strong>:</p>\n\n<pre><code>stuff = tree.xpath(\"string(/html/body/table/tbody/tr/td[5])\")\n</code></pre>\n\n<p>This will return text without markup beneath <code>td[5]</code>.</p>\n\n<p>You can also indirectly obtain the string value of an element via <strong><a href=\"http://www.w3.org/TR/xpath/#function-normalize-space\" rel=\"nofollow noreferrer\"><code>normalize-space()</code></a></strong> as <a href=\"https://stackoverflow.com/questions/34535209/we-scrape-xpath-python-lxml-middle-tag-or-not#comment56812626_34535209\">suggested by splash58 in the comments</a>, if you also want whitespace to be trimmed on the ends and reduced interiorly.</p>\n"}], "owner": {"reputation": 1922, "user_id": 3008185, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/2kQ3T.jpg?s=128&g=1", "display_name": "Hrabal", "link": "https://stackoverflow.com/users/3008185/hrabal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1451502797, "creation_date": 1451500647, "last_edit_date": 1451502617, "question_id": 34535209, "link": "https://stackoverflow.com/questions/34535209/get-text-via-xpath-ignoring-markup", "title": "Get text via XPath, ignoring markup", "body": "<p>I have to retrieve text inside an HTML table, in the cells the text sometimes is inside a <code>&lt;div&gt;</code> and sometimes is not.</p>\n\n<p>How can I make a <code>div</code> in a XPath optional?</p>\n\n<p>My actual code:</p>\n\n<p><code>stuff = tree.xpath(\"/html/body/table/tbody/tr/td[5]/div/text()\")</code></p>\n\n<p>Wanted pseudocode: </p>\n\n<p><code>stuff = tree.xpath(\"/html/body/table/tbody/tr/td[5]/div or nothing/text()\")</code></p>\n"}, {"tags": ["python", "parsing", "dictionary"], "comments": [{"owner": {"reputation": 62965, "user_id": 3679490, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/70f98fb23b16862298ea208aedfd18ae?s=128&d=identicon&r=PG&f=1", "display_name": "vks", "link": "https://stackoverflow.com/users/3679490/vks"}, "edited": false, "score": 0, "creation_date": 1451500447, "post_id": 34535101, "comment_id": 56811914, "body": "you can pickle dump the dictionary into a file and load from a file"}, {"owner": {"reputation": 13493, "user_id": 2607447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccd6c05db10236c0b175d26db1b0ce8e?s=128&d=identicon&r=PG", "display_name": "Milano", "link": "https://stackoverflow.com/users/2607447/milano"}, "reply_to_user": {"reputation": 62965, "user_id": 3679490, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/70f98fb23b16862298ea208aedfd18ae?s=128&d=identicon&r=PG&f=1", "display_name": "vks", "link": "https://stackoverflow.com/users/3679490/vks"}, "edited": false, "score": 0, "creation_date": 1451500518, "post_id": 34535101, "comment_id": 56811952, "body": "Yes but in that case, me and nobody would be able to change values (like in django settings.py)."}, {"owner": {"reputation": 62965, "user_id": 3679490, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/70f98fb23b16862298ea208aedfd18ae?s=128&d=identicon&r=PG&f=1", "display_name": "vks", "link": "https://stackoverflow.com/users/3679490/vks"}, "edited": false, "score": 0, "creation_date": 1451500586, "post_id": 34535101, "comment_id": 56811983, "body": "you can always load and change the value dump again"}, {"owner": {"reputation": 1095, "user_id": 3500696, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/r3rte.jpg?s=128&g=1", "display_name": "Syed Mauze Rehan", "link": "https://stackoverflow.com/users/3500696/syed-mauze-rehan"}, "edited": false, "score": 0, "creation_date": 1451503213, "post_id": 34535101, "comment_id": 56813264, "body": "Why don&#39;t you take out the dictionary declaration part from this file to some other file (say data.json)? Then this settings map should just be reading this file instead of declaring a map.  settings = read_data(&quot;data.json&quot;)  data.json will be   {&#39;driver&#39;:&#39;firefox&#39;,            &#39;last_processed_file&#39;:&#39;x2.txt&#39;}  then when you wish to change the file, all you need to do is read the file to an in memory object and change the values and writing it back without changing your python file."}, {"owner": {"reputation": 1095, "user_id": 3500696, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/r3rte.jpg?s=128&g=1", "display_name": "Syed Mauze Rehan", "link": "https://stackoverflow.com/users/3500696/syed-mauze-rehan"}, "edited": false, "score": 0, "creation_date": 1451503557, "post_id": 34535101, "comment_id": 56813430, "body": "** read the file to an in memory object and change the values and writing it back without changing your python file.  And if u wish to update during execution then you can register signal handlers to the code (say sighup to reload)"}], "answers": [{"tags": [], "owner": {"reputation": 969, "user_id": 3512573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/050a10f5be0185d552b941c12a6b33e3?s=128&d=identicon&r=PG&f=1", "display_name": "jayme", "link": "https://stackoverflow.com/users/3512573/jayme"}, "is_accepted": false, "score": 0, "last_activity_date": 1451501669, "creation_date": 1451501669, "answer_id": 34535438, "question_id": 34535101, "link": "https://stackoverflow.com/questions/34535101/rewrite-dictionary-attributes-in-settings-py/34535438#34535438", "title": "Rewrite dictionary attributes in &quot;settings.py&quot;", "body": "<p>May be silly but couldn't you just dump the string representation of your dictionary back to your <code>settings.py</code> (if you only have \"simple\" values of cause):</p>\n\n<pre><code>settings = {'driver':'firefox',\n           'last_processed_file':'x1.txt'}\ndef dump(fpath, **kwargs):\n    with open(fpath, 'w') as outfile:\n        for key, value in kwargs.iteritems():\n            outfile.write('{0} = {1}\\n'.format(key, repr(value)))\ndump('/tmp/settings.cfg', settings=settings)\n</code></pre>\n"}], "owner": {"reputation": 13493, "user_id": 2607447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccd6c05db10236c0b175d26db1b0ce8e?s=128&d=identicon&r=PG", "display_name": "Milano", "link": "https://stackoverflow.com/users/2607447/milano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1451501669, "creation_date": 1451500258, "last_edit_date": 1451500475, "question_id": 34535101, "link": "https://stackoverflow.com/questions/34535101/rewrite-dictionary-attributes-in-settings-py", "title": "Rewrite dictionary attributes in &quot;settings.py&quot;", "body": "<p>Is there a pythonic way to rewrite dictionary values in files like <code>settings.py</code>?</p>\n\n<p>Sometimes, it is useful to make a <code>*.py</code> file with some settings. In my <code>settings.py</code> there is a common <code>dictionary</code> with <code>keys</code> and their <code>values</code>. For example where the download stopped. In this case, I want to rewrite this <code>dictionary</code> to be able to continue from this step. </p>\n\n<p><strong>settings.py:</strong></p>\n\n<pre><code>settings = {'driver':'firefox',\n           'last_processed_file':'x1.txt'}\n</code></pre>\n\n<p>What if I want to rewrite the 'x1.txt' to another file/string? Of course I can do that using some uncomfortable parsing or saving the dictionary as an object but both has disadvantages. </p>\n\n<p>So if I want to change the value of 'last_processed_file' I would do something like settings.change_value('last_processed_file','x2.txt') and the result would be rewritten file <code>settings.py</code>:</p>\n\n<p><strong>settings.py:</strong></p>\n\n<pre><code>settings = {'driver':'firefox',\n           'last_processed_file':'x2.txt'}\n</code></pre>\n"}, {"tags": ["python", "pandas", "dataframe"], "answers": [{"comments": [{"owner": {"reputation": 2589, "user_id": 3776938, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d1b19e04e44001cc1ddba3afc2212365?s=128&d=identicon&r=PG&f=1", "display_name": "AJG519", "link": "https://stackoverflow.com/users/3776938/ajg519"}, "edited": false, "score": 0, "creation_date": 1451501113, "post_id": 34535196, "comment_id": 56812213, "body": "Thanks, exactly what I was looking for. Didn&#39;t realize you could group on a series like that."}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 1, "creation_date": 1451501259, "post_id": 34535196, "comment_id": 56812288, "body": "Or <code>.str[0]</code> as you just want the first"}, {"owner": {"reputation": 123382, "user_id": 1252759, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aGFfT.jpg?s=128&g=1", "display_name": "Jon Clements", "link": "https://stackoverflow.com/users/1252759/jon-clements"}, "reply_to_user": {"reputation": 619481, "user_id": 2901002, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/hMDvl.jpg?s=128&g=1", "display_name": "jezrael", "link": "https://stackoverflow.com/users/2901002/jezrael"}, "edited": false, "score": 0, "creation_date": 1451501975, "post_id": 34535196, "comment_id": 56812684, "body": "@jezrael don&#39;t forget that there&#39;s a distinct difference between <code>.str[0]</code> and <code>.str[:1]</code> in the case of empty strings..."}], "tags": [], "owner": {"reputation": 123382, "user_id": 1252759, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aGFfT.jpg?s=128&g=1", "display_name": "Jon Clements", "link": "https://stackoverflow.com/users/1252759/jon-clements"}, "is_accepted": true, "score": 9, "last_activity_date": 1451500572, "creation_date": 1451500572, "answer_id": 34535196, "question_id": 34535081, "link": "https://stackoverflow.com/questions/34535081/pandas-groupby-slice-of-a-string/34535196#34535196", "title": "Pandas groupby slice of a string", "body": "<p>You will need to create a grouping key somehow, just not necessarily on the DataFrame itself, for eg:</p>\n\n<pre><code>df.groupby(df.ID.str[:1])['Value'].sum()\n</code></pre>\n"}], "owner": {"reputation": 2589, "user_id": 3776938, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d1b19e04e44001cc1ddba3afc2212365?s=128&d=identicon&r=PG&f=1", "display_name": "AJG519", "link": "https://stackoverflow.com/users/3776938/ajg519"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2845, "favorite_count": 0, "accepted_answer_id": 34535196, "answer_count": 1, "score": 6, "last_activity_date": 1451503757, "creation_date": 1451500180, "last_edit_date": 1451503757, "question_id": 34535081, "link": "https://stackoverflow.com/questions/34535081/pandas-groupby-slice-of-a-string", "title": "Pandas groupby slice of a string", "body": "<p>I have a dataframe where I want to group by the first part of an ID field. For example, say I have the following:</p>\n\n<pre><code>&gt;&gt;&gt; import pandas as pd\n&gt;&gt;&gt; df=pd.DataFrame(data=[['AA',1],['AB',4],['AC',5],['BA',11],['BB',2],['CA',9]], columns=['ID','Value'])\n&gt;&gt;&gt; df\n   ID  Value\n0  AA      1\n1  AB      4\n2  AC      5\n3  BA     11\n4  BB      2\n5  CA      9\n&gt;&gt;&gt; \n</code></pre>\n\n<p>How can I group by the first letter of the ID field?</p>\n\n<p>I can currently do this by creating a new column and then grouping on that, but I imagine there is a more efficient way:</p>\n\n<pre><code>&gt;&gt;&gt; df['GID']=df['ID'].str[:1]\n&gt;&gt;&gt; df.groupby('GID')['Value'].sum()\nGID\nA    10\nB    13\nC     9\nName: Value, dtype: int64\n&gt;&gt;&gt; \n</code></pre>\n"}, {"tags": ["python", "mergesort"], "comments": [{"owner": {"reputation": 2266, "user_id": 1938911, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Epvar.jpg?s=128&g=1", "display_name": "Colin Schoen", "link": "https://stackoverflow.com/users/1938911/colin-schoen"}, "edited": false, "score": 1, "creation_date": 1451499286, "post_id": 34534842, "comment_id": 56811408, "body": "Please include some of the output."}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 1, "creation_date": 1451499299, "post_id": 34534842, "comment_id": 56811419, "body": "why are you appending <code>&quot;n&quot;</code>?"}, {"owner": {"reputation": 15, "user_id": 5731635, "user_type": "registered", "profile_image": "https://graph.facebook.com/1051312404889836/picture?type=large", "display_name": "Ankur Singh", "link": "https://stackoverflow.com/users/5731635/ankur-singh"}, "edited": false, "score": 0, "creation_date": 1451499639, "post_id": 34534842, "comment_id": 56811566, "body": "i am appending &#39;n&#39; as a check to avoid checking we have reached the end of the list."}, {"owner": {"reputation": 15, "user_id": 5731635, "user_type": "registered", "profile_image": "https://graph.facebook.com/1051312404889836/picture?type=large", "display_name": "Ankur Singh", "link": "https://stackoverflow.com/users/5731635/ankur-singh"}, "edited": false, "score": 0, "creation_date": 1451499863, "post_id": 34534842, "comment_id": 56811657, "body": "the output is coming out the same as input , on debugging it seems that after using merge_sort(ls) and merge_sort(rs) , the value of ls and rs remains same and it is not the sorted sub-array as expected."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1451500023, "post_id": 34534842, "comment_id": 56811740, "body": "<code>arr = ls + rs</code> throws away the list you were supposed to sort."}, {"owner": {"reputation": 15, "user_id": 5731635, "user_type": "registered", "profile_image": "https://graph.facebook.com/1051312404889836/picture?type=large", "display_name": "Ankur Singh", "link": "https://stackoverflow.com/users/5731635/ankur-singh"}, "edited": false, "score": 0, "creation_date": 1451500559, "post_id": 34534842, "comment_id": 56811969, "body": "but why ls and rs are not sorted respectively after using merge_sort() ?"}, {"owner": {"reputation": 4955, "user_id": 5274205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3a281a1418dbceeda34cc93d3744554?s=128&d=identicon&r=PG", "display_name": "Chad S.", "link": "https://stackoverflow.com/users/5274205/chad-s"}, "edited": false, "score": 0, "creation_date": 1451500864, "post_id": 34534842, "comment_id": 56812100, "body": "Because you aren&#39;t modifying the array you pass into merge_sort, you are modifying the copy created by <code>arr = ls + rs</code>"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 5731635, "user_type": "registered", "profile_image": "https://graph.facebook.com/1051312404889836/picture?type=large", "display_name": "Ankur Singh", "link": "https://stackoverflow.com/users/5731635/ankur-singh"}, "edited": false, "score": 0, "creation_date": 1451501654, "post_id": 34535389, "comment_id": 56812509, "body": "but why after using ls and rs are not being modified as in case of merge() where after passing arr it is modified ?"}], "tags": [], "owner": {"reputation": 4955, "user_id": 5274205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3a281a1418dbceeda34cc93d3744554?s=128&d=identicon&r=PG", "display_name": "Chad S.", "link": "https://stackoverflow.com/users/5274205/chad-s"}, "is_accepted": true, "score": 0, "last_activity_date": 1451501454, "creation_date": 1451501454, "answer_id": 34535389, "question_id": 34534842, "link": "https://stackoverflow.com/questions/34534842/merge-sort-python-2-7x/34535389#34535389", "title": "Merge Sort Python 2.7x", "body": "<p>The issue is that with the line</p>\n\n<pre><code>arr = ls + rs\n</code></pre>\n\n<p>You are no longer calling merge on the list passed to merge_sort, but rather calling it on a copy. So the original list isn't being modified. To correct this issue you can have the <code>merge_sort</code> function <code>return arr</code> at the end, then assign <code>ls = merge_sort(ls)</code> (and similar for <code>rs</code>). Having done that your code should work.</p>\n\n<p>the correct version is here..</p>\n\n<pre><code>def merge_sort(arr):\n  def merge(sub_arr,p,q):\n    L = []\n    R = []\n    for i in range(p):\n        L.append(sub_arr[i])\n    for i in range(q-p):\n        R.append(sub_arr[p+i])\n    L.append('n')\n    R.append('n')\n    j=k=0\n    for i in range(q):\n        if L[j] &lt; R[k] :\n            sub_arr[i] = L[j]\n            j += 1\n        else:\n            sub_arr[i] = R[k]\n            k += 1\n  if len(arr) &gt; 1 :\n    ls = arr[:len(arr)/2]\n    rs = arr[len(arr)/2:]\n    ls = merge_sort(ls)\n    rs = merge_sort(rs)    \n    arr = ls + rs\n    merge (arr,len(arr)/2,len(arr))\n  return arr\n</code></pre>\n\n<p>This gives the expected result</p>\n\n<pre><code>&gt;&gt;&gt; x = map(int,raw_input('Enter sequence:').strip().split())\nEnter sequence:4 5 2 1 3 4 6\n&gt;&gt;&gt; y = merge_sort(x)\n&gt;&gt;&gt; print x\n[4, 5, 2, 1, 3, 4, 6]\n&gt;&gt;&gt; print y\n[1, 2, 3, 4, 4, 5, 6]\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 5731635, "user_type": "registered", "profile_image": "https://graph.facebook.com/1051312404889836/picture?type=large", "display_name": "Ankur Singh", "link": "https://stackoverflow.com/users/5731635/ankur-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 293, "favorite_count": 0, "accepted_answer_id": 34535389, "answer_count": 1, "score": -5, "last_activity_date": 1451501454, "creation_date": 1451499126, "question_id": 34534842, "link": "https://stackoverflow.com/questions/34534842/merge-sort-python-2-7x", "title": "Merge Sort Python 2.7x", "body": "<p>the function merge() is working perfectly but the merge_sort is not,the value of ls and rs is not changing after using merge_sort().Please help in figuring out what is wrong,i have been stuck at it for hours.</p>\n\n<pre><code>def merge_sort(arr):\n\n\n  def merge(sub_arr,p,q):\n\n    L = []\n    R = []\n\n    for i in range(p):\n        L.append(sub_arr[i])\n        #print L\n\n    for i in range(q-p):\n        R.append(sub_arr[p+i])\n        #print R\n\n    L.append('n')\n    R.append('n')\n\n    j=k=0\n\n    for i in range(q):\n\n        if L[j] &lt; R[k] :\n\n            sub_arr[i] = L[j]\n            j += 1\n\n        else:\n\n            sub_arr[i] = R[k]\n            k += 1\n\n\n  if len(arr) &gt; 1 :\n\n    ls = arr[:len(arr)/2]\n    rs = arr[len(arr)/2:]\n\n\n    merge_sort(ls)\n    #print ls\n    merge_sort(rs)\n    #print rs\n\n\n\n    arr = ls + rs\n\n    #print arr\n\n    merge (arr,len(arr)/2,len(arr))\n    #print arr\n\n\n\n\nx = map(int,raw_input('Enter sequence:').strip().split())\n\nmerge_sort(x)\n\nprint x\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "sqlalchemy"], "comments": [{"owner": {"reputation": 4729, "user_id": 1703772, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/963bc9ac37c31c3f6bff29dc60b8891b?s=128&d=identicon&r=PG", "display_name": "NuclearPeon", "link": "https://stackoverflow.com/users/1703772/nuclearpeon"}, "edited": false, "score": 0, "creation_date": 1451500214, "post_id": 34534709, "comment_id": 56811816, "body": "Would you be able to use <code>unix time</code> instead of date time objects, or be able to convert said date time objects? That way you are only storing an integer and ages are easier to calculate: <a href=\"http://www.unixtimestamp.com/\" rel=\"nofollow noreferrer\">unixtimestamp.com</a>"}, {"owner": {"reputation": 4729, "user_id": 1703772, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/963bc9ac37c31c3f6bff29dc60b8891b?s=128&d=identicon&r=PG", "display_name": "NuclearPeon", "link": "https://stackoverflow.com/users/1703772/nuclearpeon"}, "edited": false, "score": 0, "creation_date": 1451500630, "post_id": 34534709, "comment_id": 56812005, "body": "If you can use UTC time, I&#39;d recommend taking a look at this SO answer: <a href=\"http://stackoverflow.com/a/2528453/1703772\">stackoverflow.com/a/2528453/1703772</a>"}, {"owner": {"reputation": 702, "user_id": 5425358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l1tpV.png?s=128&g=1", "display_name": "tlastowka", "link": "https://stackoverflow.com/users/5425358/tlastowka"}, "reply_to_user": {"reputation": 4729, "user_id": 1703772, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/963bc9ac37c31c3f6bff29dc60b8891b?s=128&d=identicon&r=PG", "display_name": "NuclearPeon", "link": "https://stackoverflow.com/users/1703772/nuclearpeon"}, "edited": false, "score": 0, "creation_date": 1451501157, "post_id": 34534709, "comment_id": 56812237, "body": "UTC isn&#39;t an option here unfortunately.  The table def I gave is simplified, but in reality Its a tool to interface with a larger legacy application with hundreds of tables that is standardized on datetime fields."}], "owner": {"reputation": 702, "user_id": 5425358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l1tpV.png?s=128&g=1", "display_name": "tlastowka", "link": "https://stackoverflow.com/users/5425358/tlastowka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 662, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1451501252, "creation_date": 1451498506, "last_edit_date": 1451501252, "question_id": 34534709, "link": "https://stackoverflow.com/questions/34534709/sqlalchemy-query-comparing-function-on-multiple-columns-to-another-value", "title": "sqlalchemy query comparing function on multiple columns to another value", "body": "<p>Using sqlalchemy, how do i set up a filter that is comparing the value of one column to the value of a function run on multiple columns.</p>\n\n<p>The goal is to write an orm query that selects objects where dt_added + max_age seconds &lt; now.  </p>\n\n<p>If I were to just write the raw sql, this is the statement I'd be going for:</p>\n\n<pre><code>SELECT *\nFROM sometable s\nWHERE DATE_ADD(s.dt_added,interval max_age second) &lt; NOW()\n</code></pre>\n\n<p>The solutions I looked at suggest using raw python datetime objects, but that won't work here because different rows have different values for max_age.  The math has to happen on the server side.</p>\n\n<pre><code>class SomeObject(Base):\n    __tablename__ = 'sometable'\n    some_id = Column(Integer, primary_key=True)\n    modified = Column(DateTime, nullable=False,\n        server_default=text('CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP'))\n    max_age = Column(Integer)\n</code></pre>\n\n<p>Sample data:</p>\n\n<pre><code>id, dt_added, max_age\n 1, 2015-12-30 12:15:00, 3600\n 2, 2015-12-30 12:15:00, 60\n</code></pre>\n\n<p>If the current datetime was '2015-12-30 12:20:00' it would return row 2, but not row 1.</p>\n\n<p>I am able to force the issue using raw text, but I'd rather do it completely through the orm.</p>\n\n<pre><code>from sqlalchemy.sql import func\nfrom sqlalchemy.sql.expression import text\n\nquery = ses.query(\n    SomeObject\n).filter(\n    func.date_add(\n        SomeObject.created,\n        text('INTERVAL max_age second')\n    ) &lt; datetime.datetime.now()\n</code></pre>\n\n<p>Many thanks.</p>\n"}, {"tags": ["python", "encoding"], "comments": [{"owner": {"reputation": 2400, "user_id": 5266746, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/cb43ae82055fed862c2ba3e6ed9c8e9f?s=128&d=identicon&r=PG&f=1", "display_name": "n1c9", "link": "https://stackoverflow.com/users/5266746/n1c9"}, "edited": false, "score": 1, "creation_date": 1451498505, "post_id": 34534689, "comment_id": 56811035, "body": "import sys, put a reload(sys) line at the start of the script then put sys.setdefaultencoding(&#39;UTF8&#39;) after that line."}, {"owner": {"reputation": 4955, "user_id": 5274205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3a281a1418dbceeda34cc93d3744554?s=128&d=identicon&r=PG", "display_name": "Chad S.", "link": "https://stackoverflow.com/users/5274205/chad-s"}, "edited": false, "score": 0, "creation_date": 1451498688, "post_id": 34534689, "comment_id": 56811136, "body": "Don&#39;t use <code>setdefaultencoding</code>. It will <a href=\"https://anonbadger.wordpress.com/2015/06/16/why-sys-setdefaultencoding-will-break-code/\" rel=\"nofollow noreferrer\">cause problems</a>. Instead specify the encoding. Decode early, unicode everywhere, encode late. This is how you properly deal with unicode."}, {"owner": {"reputation": 1, "user_id": 4016048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d516aaf3a0035bfabe07ab3de39c8a6c?s=128&d=identicon&r=PG&f=1", "display_name": "Hasan", "link": "https://stackoverflow.com/users/4016048/hasan"}, "edited": false, "score": 0, "creation_date": 1451499534, "post_id": 34534689, "comment_id": 56811524, "body": "n1c9 Unfortunately it&#39;s don&#39;t work."}, {"owner": {"reputation": 1704, "user_id": 4241180, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y8rWG.png?s=128&g=1", "display_name": "vrs", "link": "https://stackoverflow.com/users/4241180/vrs"}, "edited": false, "score": 0, "creation_date": 1451501174, "post_id": 34534689, "comment_id": 56812247, "body": "Read <a href=\"http://stackoverflow.com/a/12904228/4241180\">this answer</a>"}], "owner": {"reputation": 1, "user_id": 4016048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d516aaf3a0035bfabe07ab3de39c8a6c?s=128&d=identicon&r=PG&f=1", "display_name": "Hasan", "link": "https://stackoverflow.com/users/4016048/hasan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1451500566, "creation_date": 1451498428, "last_edit_date": 1451500566, "question_id": 34534689, "link": "https://stackoverflow.com/questions/34534689/i-am-trying-to-print-message-from-email-but-encoding-isnt-working-correctly", "title": "I am trying to print message from email, but encoding isn&#39;t working correctly", "body": "<p>I am trying to print message from email. I am using imaplib to work with imap server.</p>\n\n<p>Code example below.</p>\n\n<pre><code>def fetch_msg(conn, index):\n    status, msg_data = conn.fetch(index, '(RFC822)')\n\n    if status != 'OK': return None\n    for resp_part in msg_data:\n        if isinstance(resp_part, tuple):\n            msg = email.message_from_string(resp_part[1])\n\n            for header in ['subject', 'to', 'from', 'date']:\n                print('%-8s: %s' % (header.upper(), msg[header]))\n</code></pre>\n\n<p>I get this result: </p>\n\n<pre><code>SUBJECT : =?UTF-8?B?0JHQu9Cw0LPQvtC00LDRgNC40Lwg0LfQsCDQv9C+0LrRg9C/0LrRgyE=?=\nTO      : example@mail.bk\nFROM    : noreply@steampowered.com\nDATE    : Tue, 17 Nov 2015 06:05:13 -0800\n</code></pre>\n\n<p>How can I get SUBJECT with a normal view? I am using utf-8 encoding in the source file.</p>\n"}, {"tags": ["python", "function", "tkinter"], "comments": [{"owner": {"reputation": 2266, "user_id": 1938911, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Epvar.jpg?s=128&g=1", "display_name": "Colin Schoen", "link": "https://stackoverflow.com/users/1938911/colin-schoen"}, "edited": false, "score": 2, "creation_date": 1451498375, "post_id": 34534655, "comment_id": 56810961, "body": "We need more than doesn&#39;t work. Are you getting an error? If so, include it. If not, what is it doing?"}, {"owner": {"reputation": 237, "user_id": 5539565, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/e3caea1216cdc02bbed42516c88cde26?s=128&d=identicon&r=PG&f=1", "display_name": "FastBatteryCharger", "link": "https://stackoverflow.com/users/5539565/fastbatterycharger"}, "reply_to_user": {"reputation": 2266, "user_id": 1938911, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Epvar.jpg?s=128&g=1", "display_name": "Colin Schoen", "link": "https://stackoverflow.com/users/1938911/colin-schoen"}, "edited": false, "score": 0, "creation_date": 1451498754, "post_id": 34534655, "comment_id": 56811171, "body": "you are right &quot;doesnt work&quot; is not enoug. I changed it to"}, {"owner": {"reputation": 237, "user_id": 5539565, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/e3caea1216cdc02bbed42516c88cde26?s=128&d=identicon&r=PG&f=1", "display_name": "FastBatteryCharger", "link": "https://stackoverflow.com/users/5539565/fastbatterycharger"}, "reply_to_user": {"reputation": 2266, "user_id": 1938911, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Epvar.jpg?s=128&g=1", "display_name": "Colin Schoen", "link": "https://stackoverflow.com/users/1938911/colin-schoen"}, "edited": false, "score": 0, "creation_date": 1451498758, "post_id": 34534655, "comment_id": 56811179, "body": "doesnt work: window pops up but lena image is not shown"}], "answers": [{"comments": [{"owner": {"reputation": 237, "user_id": 5539565, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/e3caea1216cdc02bbed42516c88cde26?s=128&d=identicon&r=PG&f=1", "display_name": "FastBatteryCharger", "link": "https://stackoverflow.com/users/5539565/fastbatterycharger"}, "edited": false, "score": 0, "creation_date": 1451499446, "post_id": 34534851, "comment_id": 56811482, "body": "I thank you very much! I didnt know that the Garbage Collector removes the image. Another thing i learned ,thanks!!!"}], "tags": [], "owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "is_accepted": true, "score": 3, "last_activity_date": 1451499165, "creation_date": 1451499165, "answer_id": 34534851, "question_id": 34534655, "link": "https://stackoverflow.com/questions/34534655/python-function-that-shows-image-in-tkinter/34534851#34534851", "title": "python, function that shows image in tkinter?", "body": "<p>There is well known problem with <code>PhotoImage</code> assigned to local variable in function. <code>Garbage Collector</code> remove image when you leave function but you can assign <code>photo</code> (for example) to <code>w</code> like this:</p>\n\n<pre><code>photo = ImageTk.PhotoImage(image)\n\nw = Canvas(root)\nw.photo = photo # assign photo to object.\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9677, "user_id": 4244780, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KUXr1.jpg?s=128&g=1", "display_name": "Iron Fist", "link": "https://stackoverflow.com/users/4244780/iron-fist"}, "is_accepted": false, "score": 0, "last_activity_date": 1451499501, "creation_date": 1451499501, "answer_id": 34534928, "question_id": 34534655, "link": "https://stackoverflow.com/questions/34534655/python-function-that-shows-image-in-tkinter/34534928#34534928", "title": "python, function that shows image in tkinter?", "body": "<p>The reason is about <code>local</code> variables, so <code>photo</code> and <code>w</code> are local to <code>imgShow</code>. One work around is to return a reference to your <code>photo</code>:</p>\n\n<pre><code>def imgShow(img):\n    ##------------this as function----------------------------\n    #convert lena.jpg into tkinter photo image\n    image = Image.open(img)\n    photo = ImageTk.PhotoImage(image)\n    return photo\n\n    #create canvas to display picture\nw = Canvas(root)\npic = imgShow(lena)\nw.create_image(0, 0, image = pic, anchor = \"nw\")\nw.pack(fill = BOTH, expand = YES)\n</code></pre>\n"}], "owner": {"reputation": 237, "user_id": 5539565, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/e3caea1216cdc02bbed42516c88cde26?s=128&d=identicon&r=PG&f=1", "display_name": "FastBatteryCharger", "link": "https://stackoverflow.com/users/5539565/fastbatterycharger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2497, "favorite_count": 0, "accepted_answer_id": 34534851, "answer_count": 2, "score": -1, "last_activity_date": 1617047470, "creation_date": 1451498277, "last_edit_date": 1451499031, "question_id": 34534655, "link": "https://stackoverflow.com/questions/34534655/python-function-that-shows-image-in-tkinter", "title": "python, function that shows image in tkinter?", "body": "<p>i want to create a tkinter window and display the lena picture. I got a code that is working but i dont know how to make a function out of it. </p>\n\n<p>code:</p>\n\n<pre><code>import numpy\nimport cv2\nfrom Tkinter import *\nfrom PIL import Image, ImageTk\nimport scipy.misc\n\n#create root window\nroot = Tk()\nroot.geometry(\"600x600\")\n\n#path to lena picture\nlena = \"C:\\lena.jpg\"\n\n##------------this as function----------------------------\n#convert lena.jpg into tkinter photo image\nimage = Image.open(lena)\nphoto = ImageTk.PhotoImage(image)\n\n#create canvas to display picture\nw = Canvas(root)\nw.create_image(0, 0, image = photo, anchor = \"nw\")\nw.pack(fill = BOTH, expand = YES)\n##-------end:-this as function----------------------------\n\n\n#start root window\nroot.mainloop()\n</code></pre>\n\n<p>I tried this function but it didnt open the lena picture...:</p>\n\n<pre><code>#create root window\nroot = Tk()\nroot.geometry(\"600x600\")\n\n#path to lena picture\nlena = \"C:\\lena.jpg\"\n\n\ndef imgShow(img):\n    ##------------this as function----------------------------\n    #convert lena.jpg into tkinter photo image\n    image = Image.open(img)\n    photo = ImageTk.PhotoImage(image)\n\n    #create canvas to display picture\n    w = Canvas(root)\n    w.create_image(0, 0, image = photo, anchor = \"nw\")\n    w.pack(fill = BOTH, expand = YES)\n    ##-------end:-this as function----------------------------\n\n##use function with lena image path.\n## doesnt work: window pops up but lena image is not shown\nimgShow(lena)\n\n#start root window\nroot.mainloop()\n\n## ErrorMessages?: No Error Message \n</code></pre>\n\n<p>Do you know what i am doing wrong?</p>\n"}, {"tags": ["python", "pyparsing"], "comments": [{"owner": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "edited": false, "score": 1, "creation_date": 1451498191, "post_id": 34534608, "comment_id": 56810857, "body": "From your example, it looks like you need to parse the tokens into an abstract syntax tree first."}, {"owner": {"reputation": 22993, "user_id": 1394393, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mSjIL.jpg?s=128&g=1", "display_name": "jpmc26", "link": "https://stackoverflow.com/users/1394393/jpmc26"}, "edited": false, "score": 0, "creation_date": 1451498298, "post_id": 34534608, "comment_id": 56810921, "body": "From the sound of it, you might not even need the XML if you create an abstract syntax tree?"}, {"owner": {"reputation": 300, "user_id": 3164117, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/4U8xb.png?s=128&g=1", "display_name": "Daniel F", "link": "https://stackoverflow.com/users/3164117/daniel-f"}, "reply_to_user": {"reputation": 22993, "user_id": 1394393, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mSjIL.jpg?s=128&g=1", "display_name": "jpmc26", "link": "https://stackoverflow.com/users/1394393/jpmc26"}, "edited": false, "score": 0, "creation_date": 1451498715, "post_id": 34534608, "comment_id": 56811150, "body": "@jpmc26 I need to give it is input to a program outside of my control. The AST outputted by pyparsing&#39;s <code>asXML</code> is not in the syntax I need. This question was about using the AST formed by pyparsing and turning it into XML in another syntax. For instance, that <code>+</code> must be changed to <code>reportSum</code> and must surround the <code>1</code> and <code>2</code>."}, {"owner": {"reputation": 55852, "user_id": 165216, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U7Xse.jpg?s=128&g=1", "display_name": "PaulMcG", "link": "https://stackoverflow.com/users/165216/paulmcg"}, "edited": false, "score": 0, "creation_date": 1451498884, "post_id": 34534608, "comment_id": 56811244, "body": "To parse and evaluate arithmetic operations, pyparsing includes a method for defining these parametrically, <code>infixNotation</code> (formerly called <code>operatorPrecedence</code>).  A particularly thorough example is on the pyparsing wiki, <a href=\"http://pyparsing.wikispaces.com/file/view/eval_arith.py\" rel=\"nofollow noreferrer\">pyparsing.wikispaces.com/file/view/eval_arith.py</a>. To get your special XML output, change the behavior of the parse actions/classes attached to each operation level."}, {"owner": {"reputation": 22993, "user_id": 1394393, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mSjIL.jpg?s=128&g=1", "display_name": "jpmc26", "link": "https://stackoverflow.com/users/1394393/jpmc26"}, "edited": false, "score": 0, "creation_date": 1451499034, "post_id": 34534608, "comment_id": 56811303, "body": "You might consider <code>setParseAction</code>. It&#39;s a method on <code>pyarsing</code> grammar elements. You can use it to transform the results as <code>pyparsing</code> parses."}, {"owner": {"reputation": 300, "user_id": 3164117, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/4U8xb.png?s=128&g=1", "display_name": "Daniel F", "link": "https://stackoverflow.com/users/3164117/daniel-f"}, "reply_to_user": {"reputation": 55852, "user_id": 165216, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U7Xse.jpg?s=128&g=1", "display_name": "PaulMcG", "link": "https://stackoverflow.com/users/165216/paulmcg"}, "edited": false, "score": 0, "creation_date": 1451499250, "post_id": 34534608, "comment_id": 56811393, "body": "@PaulMcGuire Thank you, but that isn&#39;t what I&#39;m trying to do. I have been reading the pyparsing docs, and am using operatorPrecendence already. The addition is just a single basic example of what I am trying to do. I have one language, and am trying to transform it into another language. I have successfully used pyparsing to parse the first language into an AST. Now, I need to turn that into a second language. I read the basic calculator example, but I don&#39;t want to evaluate the code as I go."}, {"owner": {"reputation": 300, "user_id": 3164117, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/4U8xb.png?s=128&g=1", "display_name": "Daniel F", "link": "https://stackoverflow.com/users/3164117/daniel-f"}, "reply_to_user": {"reputation": 22993, "user_id": 1394393, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mSjIL.jpg?s=128&g=1", "display_name": "jpmc26", "link": "https://stackoverflow.com/users/1394393/jpmc26"}, "edited": false, "score": 0, "creation_date": 1451499314, "post_id": 34534608, "comment_id": 56811425, "body": "@jpmc26 I am using setParseAction already to transform number tokens from strings into floats. However, it doesn&#39;t appear to me that that is what I want. setParseAction appears to be stateless, and I need to transform based on the tokens around a token."}, {"owner": {"reputation": 22993, "user_id": 1394393, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mSjIL.jpg?s=128&g=1", "display_name": "jpmc26", "link": "https://stackoverflow.com/users/1394393/jpmc26"}, "edited": false, "score": 1, "creation_date": 1451500624, "post_id": 34534608, "comment_id": 56812003, "body": "You can set the parse action on grammar elements higher than just a token. For example, assuming that <code>float</code> is a token that matches floating point literals, this is a grammar element: <code>(float + &#39;+&#39; + float)</code>, and you should be able to do something like this on it: <code>(float + &#39;+&#39; + float).setParseAction(lambda x: (&#39;sum&#39;, x[0], x[2]))</code>. (That might not be exactly right, but hopefully, it gets the idea across.) You can set the parse action to accept the list of tokens and return something more suitable for the syntax tree."}, {"owner": {"reputation": 300, "user_id": 3164117, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/4U8xb.png?s=128&g=1", "display_name": "Daniel F", "link": "https://stackoverflow.com/users/3164117/daniel-f"}, "reply_to_user": {"reputation": 22993, "user_id": 1394393, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mSjIL.jpg?s=128&g=1", "display_name": "jpmc26", "link": "https://stackoverflow.com/users/1394393/jpmc26"}, "edited": false, "score": 0, "creation_date": 1451500852, "post_id": 34534608, "comment_id": 56812094, "body": "@jpmc26 That feels so obvious. I should have thought of that. If you put it in an answer, I will mark it as accepted and upvote it."}, {"owner": {"reputation": 22993, "user_id": 1394393, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mSjIL.jpg?s=128&g=1", "display_name": "jpmc26", "link": "https://stackoverflow.com/users/1394393/jpmc26"}, "edited": false, "score": 1, "creation_date": 1451500950, "post_id": 34534608, "comment_id": 56812147, "body": "I don&#39;t feel like I have it flushed out enough to make it into an answer, and unfortunately, I can&#39;t do so right now. However, if you flush it out and post, I&#39;ll glad upvote it. =) Plus my terminology on grammars might be off."}, {"owner": {"reputation": 55852, "user_id": 165216, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U7Xse.jpg?s=128&g=1", "display_name": "PaulMcG", "link": "https://stackoverflow.com/users/165216/paulmcg"}, "reply_to_user": {"reputation": 22993, "user_id": 1394393, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mSjIL.jpg?s=128&g=1", "display_name": "jpmc26", "link": "https://stackoverflow.com/users/1394393/jpmc26"}, "edited": false, "score": 0, "creation_date": 1451501360, "post_id": 34534608, "comment_id": 56812351, "body": "My answer below rambles on and on, the basic concept is exactly as given by @jpmc26 above. If he posts, please accept his as the actual answer."}], "answers": [{"tags": [], "owner": {"reputation": 55852, "user_id": 165216, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U7Xse.jpg?s=128&g=1", "display_name": "PaulMcG", "link": "https://stackoverflow.com/users/165216/paulmcg"}, "is_accepted": false, "score": 2, "last_activity_date": 1451501184, "creation_date": 1451501184, "answer_id": 34535337, "question_id": 34534608, "link": "https://stackoverflow.com/questions/34534608/convert-list-of-tokens-into-xml-output/34535337#34535337", "title": "convert list of tokens into XML output", "body": "<p>In <code>infixNotation</code> (aka <code>operatorPrecedence</code>), you can attach parse actions to each subexpression found. See below:</p>\n\n<pre><code>from pyparsing import *\n\nopfunc = {\n    '+': 'reportSum',\n    '-': 'reportDifference',\n    '*': 'reportProduct',\n    '/': 'reportDivision',\n    }\ndef makeXML(a, op, b):\n    #~ print a,op,b\n    return '&lt;block s=\"%s\"&gt;&lt;l&gt;%s&lt;/l&gt;&lt;l&gt;%s&lt;/l&gt;&lt;/block&gt;' % (opfunc[op], a, b)\n\ndef outputBinary(tokens):\n    t = tokens[0].asList()\n    ret = makeXML(t.pop(0), t.pop(0), t.pop(0))\n    while t:\n        ret = makeXML(ret, t.pop(0), t.pop(0))\n    return ret\n\n\n\ninteger = Word(nums)\n# expand this to include other supported operands, like floats, variables, etc.\noperand = integer\n\narithExpr = infixNotation(operand, \n    [\n    (oneOf('* /'), 2, opAssoc.LEFT, outputBinary),\n    (oneOf('+ -'), 2, opAssoc.LEFT, outputBinary),\n    ])\n\ntests = \"\"\"\\\n    1+2\n    1+2*5\n    1+2*6/3\n    1/4+3*4/2\"\"\".splitlines()\n\nfor t in tests:\n    t = t.strip()\n    print t\n    print arithExpr.parseString(t)[0]\n    print\n</code></pre>\n\n<p>giving:</p>\n\n<pre><code>1+2\n&lt;block s=\"reportSum\"&gt;&lt;l&gt;1&lt;/l&gt;&lt;l&gt;2&lt;/l&gt;&lt;/block&gt;\n\n1+2*5\n&lt;block s=\"reportSum\"&gt;&lt;l&gt;1&lt;/l&gt;&lt;l&gt;&lt;block s=\"reportProduct\"&gt;&lt;l&gt;2&lt;/l&gt;&lt;l&gt;5&lt;/l&gt;&lt;/block&gt;&lt;/l&gt;&lt;/block&gt;\n\n1+2*6/3\n&lt;block s=\"reportSum\"&gt;&lt;l&gt;1&lt;/l&gt;&lt;l&gt;&lt;block s=\"reportDivision\"&gt;&lt;l&gt;&lt;block s=\"reportProduct\"&gt;&lt;l&gt;2&lt;/l&gt;&lt;l&gt;6&lt;/l&gt;&lt;/block&gt;&lt;/l&gt;&lt;l&gt;3&lt;/l&gt;&lt;/block&gt;&lt;/l&gt;&lt;/block&gt;\n\n1/4+3*4/2\n&lt;block s=\"reportSum\"&gt;&lt;l&gt;&lt;block s=\"reportDivision\"&gt;&lt;l&gt;1&lt;/l&gt;&lt;l&gt;4&lt;/l&gt;&lt;/block&gt;&lt;/l&gt;&lt;l&gt;&lt;block s=\"reportDivision\"&gt;&lt;l&gt;&lt;block s=\"reportProduct\"&gt;&lt;l&gt;3&lt;/l&gt;&lt;l&gt;4&lt;/l&gt;&lt;/block&gt;&lt;/l&gt;&lt;l&gt;2&lt;/l&gt;&lt;/block&gt;&lt;/l&gt;&lt;/block&gt;\n</code></pre>\n\n<p>Note that parsing '1+2+3' will not give the traditional <code>[['1','+','2'],'+','3']</code> nested list, but the run-on sequence <code>['1','+','2','+','3']</code>, which is why <code>outputBinary</code> has to iterate over the list beyond just the first 3 elements.</p>\n\n<p>As for your <code>say(\"hi\")</code> example, something like the following should help:</p>\n\n<pre><code>LPAR,RPAR = map(Suppress,\"()\")\nsay_command = Keyword(\"say\")('cmd') + LPAR + delimitedList(QuotedString('\"'))('args') + RPAR\nask_command = Keyword(\"ask\")('cmd') + LPAR + delimitedList(QuotedString('\"'))('args') + RPAR\ncmd_func = {\n    'say': 'bubble',\n    'ask': 'prompt',\n    }\ndef emitAsXML(tokens):\n    func = cmd_func[tokens.cmd]\n    args = ''.join('&lt;l&gt;%s&lt;/l&gt;' % arg for arg in tokens.args)\n    return \"\"\"&lt;block s=\"%s\"&gt;%s&lt;/block&gt;\"\"\" % (func, args)\ncmd = (say_command | ask_command).setParseAction(emitAsXML)\n\ntests = \"\"\"\\\n    say(\"hi\")\n    say(\"hi\",\"handsome\")\n    ask(\"what is your name?\")\"\"\".splitlines()\n\nfor t in tests:\n    t = t.strip()\n    print t\n    print cmd.parseString(t)[0]\n    print\n</code></pre>\n\n<p>giving:</p>\n\n<pre><code>say(\"hi\")\n&lt;block s=\"bubble\"&gt;&lt;l&gt;hi&lt;/l&gt;&lt;/block&gt;\n\nsay(\"hi\",\"handsome\")\n&lt;block s=\"bubble\"&gt;&lt;l&gt;hi&lt;/l&gt;&lt;l&gt;handsome&lt;/l&gt;&lt;/block&gt;\n\nask(\"what is your name?\")\n&lt;block s=\"prompt\"&gt;&lt;l&gt;what is your name?&lt;/l&gt;&lt;/block&gt;\n</code></pre>\n\n<p>If you need a wider context to create some output, then just attach the parse action to the higher-level expression in your parser.</p>\n"}], "owner": {"reputation": 300, "user_id": 3164117, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/4U8xb.png?s=128&g=1", "display_name": "Daniel F", "link": "https://stackoverflow.com/users/3164117/daniel-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1451501184, "creation_date": 1451498107, "last_edit_date": 1451500430, "question_id": 34534608, "link": "https://stackoverflow.com/questions/34534608/convert-list-of-tokens-into-xml-output", "title": "convert list of tokens into XML output", "body": "<p>I have a list of tokens as generated by pyparsing. I need to carry out manipulations on individual tokens in list based on the tokens around them. Currently, I am just using a <code>for</code> loop. Is there any better mechanism for doing this?</p>\n\n<p>For instance, a simple example is <code>[1, \"+\", 2]</code> into </p>\n\n<pre><code>&lt;block s=\"reportSum\"&gt;\n    &lt;l&gt;1&lt;/l&gt;\n    &lt;l&gt;2&lt;/l&gt;\n&lt;/block&gt;\n</code></pre>\n\n<p><strong>Edit:</strong>\nI have been reading the pyparsing docs, and know about operatorPrecedence and setParseAction. I am ultimately trying to transform one language into another.</p>\n\n<p>For instance, <code>say(\"hi\")</code> into <code>&lt;block s=\"bubble\"&gt;&lt;l&gt;Hello!&lt;/l&gt;&lt;/block&gt;</code>. I am currently parsing <code>say(\"hi\")</code> into <code>[\"say\", \"hi\"]</code>, and would like to know how to transform that into the XML I have above.</p>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 1684, "user_id": 4403123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3d6cb94cda55242f6537bba6d90e09b?s=128&d=identicon&r=PG&f=1", "display_name": "KSFT", "link": "https://stackoverflow.com/users/4403123/ksft"}, "edited": false, "score": 1, "creation_date": 1451498268, "post_id": 34534603, "comment_id": 56810905, "body": "What exactly is wrong with it? Does it raise an exception? If so, what exception? Does it give the wrong output? If so, what is it returning, and what did you expect? Is it giving no output?"}, {"owner": {"reputation": 5016, "user_id": 5508736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/156be54ad8a1d4eb8a3c3e82a333d0fd?s=128&d=identicon&r=PG&f=1", "display_name": "Darwin von Corax", "link": "https://stackoverflow.com/users/5508736/darwin-von-corax"}, "edited": false, "score": 0, "creation_date": 1451498344, "post_id": 34534603, "comment_id": 56810947, "body": "Please elaborate on what you&#39;re trying to accomplish."}, {"owner": {"reputation": 67, "user_id": 4959254, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/opEkf.png?s=128&g=1", "display_name": "super trainee", "link": "https://stackoverflow.com/users/4959254/super-trainee"}, "reply_to_user": {"reputation": 1684, "user_id": 4403123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3d6cb94cda55242f6537bba6d90e09b?s=128&d=identicon&r=PG&f=1", "display_name": "KSFT", "link": "https://stackoverflow.com/users/4403123/ksft"}, "edited": false, "score": 0, "creation_date": 1451498361, "post_id": 34534603, "comment_id": 56810954, "body": "@KSFT it is not changing the file and it does not raise an exeption"}, {"owner": {"reputation": 1684, "user_id": 4403123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3d6cb94cda55242f6537bba6d90e09b?s=128&d=identicon&r=PG&f=1", "display_name": "KSFT", "link": "https://stackoverflow.com/users/4403123/ksft"}, "edited": false, "score": 0, "creation_date": 1451498424, "post_id": 34534603, "comment_id": 56810992, "body": "Try printing <code>text</code> before and after you assign it to the result of <code>re.sub()</code>. Is it changing? That should help isolate the problem."}, {"owner": {"reputation": 67, "user_id": 4959254, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/opEkf.png?s=128&g=1", "display_name": "super trainee", "link": "https://stackoverflow.com/users/4959254/super-trainee"}, "reply_to_user": {"reputation": 5016, "user_id": 5508736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/156be54ad8a1d4eb8a3c3e82a333d0fd?s=128&d=identicon&r=PG&f=1", "display_name": "Darwin von Corax", "link": "https://stackoverflow.com/users/5508736/darwin-von-corax"}, "edited": false, "score": 0, "creation_date": 1451498437, "post_id": 34534603, "comment_id": 56810999, "body": "@DarwinvonCorax i am trying to change the youtube link /watch..."}, {"owner": {"reputation": 67, "user_id": 4959254, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/opEkf.png?s=128&g=1", "display_name": "super trainee", "link": "https://stackoverflow.com/users/4959254/super-trainee"}, "reply_to_user": {"reputation": 1684, "user_id": 4403123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3d6cb94cda55242f6537bba6d90e09b?s=128&d=identicon&r=PG&f=1", "display_name": "KSFT", "link": "https://stackoverflow.com/users/4403123/ksft"}, "edited": false, "score": 0, "creation_date": 1451498464, "post_id": 34534603, "comment_id": 56811015, "body": "@KSFT i tried that it is not changing"}], "answers": [{"tags": [], "owner": {"reputation": 1684, "user_id": 4403123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3d6cb94cda55242f6537bba6d90e09b?s=128&d=identicon&r=PG&f=1", "display_name": "KSFT", "link": "https://stackoverflow.com/users/4403123/ksft"}, "is_accepted": true, "score": 0, "last_activity_date": 1451498698, "creation_date": 1451498698, "answer_id": 34534754, "question_id": 34534603, "link": "https://stackoverflow.com/questions/34534603/regex-python-replace-a-line/34534754#34534754", "title": "regex python replace a line", "body": "<p>Dollar signs and dots are a special characters in regular expressions. You need to escape them with a backslash. It also looks like the end of your regex isn't correct. You probably want something like this:</p>\n\n<pre><code>\\$url = www\\.youtube\\.com/watch\\?v=y6120QOlsfU'\n</code></pre>\n\n<p>Because you know what you're replacing, though, you can just use <a href=\"https://docs.python.org/2/library/stdtypes.html#str.replace\" rel=\"nofollow\"><code>str.replace()</code></a>:</p>\n\n<pre><code>text=text.replace(\"www.youtube.com/watch?v=y6120QOlsfU\",\"$url ='www.youtube.com{};\".format(newyoutubelink))\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 4959254, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/opEkf.png?s=128&g=1", "display_name": "super trainee", "link": "https://stackoverflow.com/users/4959254/super-trainee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 34534754, "answer_count": 1, "score": 0, "last_activity_date": 1451498698, "creation_date": 1451498083, "last_edit_date": 1451498569, "question_id": 34534603, "link": "https://stackoverflow.com/questions/34534603/regex-python-replace-a-line", "title": "regex python replace a line", "body": "<p>I need help to replace a line in an html file</p>\n\n<p>line to replace:</p>\n\n<pre><code>        $url = 'www.youtube.com/watch?v=y6120QOlsfU';\n</code></pre>\n\n<p>The python script I am using(does not work):</p>\n\n<pre><code>with open(mywebpage, 'r+') as f:\n     text = f.read ()\n     text = re.sub(\"            $url = 'www.youtube.com.*\",\"            $url ='www.youtube.com{};\".format(newyoutubelink), text)\n     f.seek(0)\n     f.write(text)\n</code></pre>\n"}, {"tags": ["python", "django", "redirect", "python-decorators"], "answers": [{"tags": [], "owner": {"reputation": 255971, "user_id": 464744, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/3dfd6067f4c69986a652444f44bb6d7c?s=128&d=identicon&r=PG", "display_name": "Blender", "link": "https://stackoverflow.com/users/464744/blender"}, "is_accepted": true, "score": 0, "last_activity_date": 1451520043, "creation_date": 1451520043, "answer_id": 34539138, "question_id": 34534598, "link": "https://stackoverflow.com/questions/34534598/django-redirect-back-to-view-from-inside-view-decorator/34539138#34539138", "title": "Django redirect back to view from inside view decorator", "body": "<p>Django actually uses the view function itself in <code>reverse</code>, so I just need to pass in the decorated function instead of the original view:</p>\n\n<pre><code>return redirect(reverse(inner, args=args, kwargs=d))\n                        ^^^^^\n</code></pre>\n"}], "owner": {"reputation": 255971, "user_id": 464744, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/3dfd6067f4c69986a652444f44bb6d7c?s=128&d=identicon&r=PG", "display_name": "Blender", "link": "https://stackoverflow.com/users/464744/blender"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 751, "favorite_count": 0, "accepted_answer_id": 34539138, "answer_count": 1, "score": 0, "last_activity_date": 1451520043, "creation_date": 1451498050, "question_id": 34534598, "link": "https://stackoverflow.com/questions/34534598/django-redirect-back-to-view-from-inside-view-decorator", "title": "Django redirect back to view from inside view decorator", "body": "<p>I've been struggling to get Django's URL redirection to work inside of a decorator. Consider this simple decorator that ensures a view's <code>id</code> parameter is odd:</p>\n\n<pre><code>from django.conf import settings\nfrom django.conf.urls import url\nfrom django.shortcuts import redirect\nfrom django.http import HttpResponse\nfrom django.core.urlresolvers import reverse\nfrom django.utils.decorators import available_attrs\n\nfrom functools import wraps\n\ndef ensure_odd_id(view):\n    @wraps(view, assigned=available_attrs(view))\n    def inner(request, *args, **kwargs):\n        id = int(kwargs.get('id'))\n\n        if id % 2 == 0:\n            d = kwargs.copy()\n            d['id'] = str(id + 1)\n\n            return redirect(reverse(view, args=args, kwargs=d))\n\n        return view(request, *args, **kwargs)\n    return inner\n\n@ensure_odd_id\ndef test(request, id):\n    return HttpResponse('test {}'.format(id))\n\nurlpatterns = [url(r'^test/(?P&lt;id&gt;\\d+)/$', test)]\n\nif __name__ == '__main__':\n    settings.configure(DEBUG=True, ROOT_URLCONF='test')\n\n    from django.core.management import execute_from_command_line\n    execute_from_command_line()\n</code></pre>\n\n<p>If you save this script as <code>test.py</code> and run it with <code>python test.py runserver</code>, you will see that requesting <code>/test/13</code> produces no error, but requesting <code>/test/18</code> produces a <code>NoReverseMatch</code> error for the call to <code>reverse</code>, instead of redirecting to <code>/test/19</code>:</p>\n\n<pre><code>NoReverseMatch at /test/18/\nReverse for 'test.test' with arguments '()'\n    and keyword arguments '{'id': '19'}' not found.\n    0 pattern(s) tried: []\n</code></pre>\n\n<p>I have a feeling this has to do with the fact that the <code>view</code> function is the un-decorated <code>view</code>, while the URL resolver only deals with the decorated view.</p>\n\n<p>Is there any nice way to redirect to the decorated <code>view</code> itself without hacky introspection? </p>\n"}, {"tags": ["python", "regex", "performance", "optimization"], "comments": [{"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 2, "creation_date": 1451497991, "post_id": 34534507, "comment_id": 56810754, "body": "why are you using excepts? How are you expecting  <code>line = regex1.sub(&quot;&quot;,line )</code> etc..  to error?"}, {"owner": {"reputation": 1931, "user_id": 244384, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ea4eb0cbde6a508a9c26a38a77624027?s=128&d=identicon&r=PG", "display_name": "danmcardle", "link": "https://stackoverflow.com/users/244384/danmcardle"}, "edited": false, "score": 0, "creation_date": 1451498121, "post_id": 34534507, "comment_id": 56810828, "body": "I strongly advise that you <a href=\"https://docs.python.org/2/library/profile.html\" rel=\"nofollow noreferrer\">run a profiler</a> on your code to take the guesswork out."}, {"owner": {"reputation": 1351, "user_id": 3323394, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/hPS1U.jpg?s=128&g=1", "display_name": "Arthur Hv", "link": "https://stackoverflow.com/users/3323394/arthur-hv"}, "edited": false, "score": 1, "creation_date": 1451498302, "post_id": 34534507, "comment_id": 56810923, "body": "You are using around 20 successive regexes or text iterations on every line, it can only run slowly... what do you expect your code to do ? Can&#39;t you use higher level parsers for that (e.g xml parser...) ?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 4, "creation_date": 1451498308, "post_id": 34534507, "comment_id": 56810927, "body": "You forgot <code>regex7</code> and <code>regex11</code>. This is one of the many, many reasons to use lists and loops instead of numbered variables. Also, instead of over a dozen different deletion steps, can you use a regex to search for the stuff you want to <i>keep</i>?"}, {"owner": {"reputation": 257, "user_id": 4589953, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/f5b90dadd5ab7ef2ff2ce09b89256dfb?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/4589953/nick"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1451498727, "post_id": 34534507, "comment_id": 56811160, "body": "@PadraicCunningham I expect some character encoding-decoding errors. That&#39;s why I have try, except. I don&#39;t think removing try will improve the speed."}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1451498812, "post_id": 34534507, "comment_id": 56811211, "body": "@Nick,  where are you encoding/decoding?  Your code is almost impossible to follow as you have no comments or structure and you catch every exception."}, {"owner": {"reputation": 29701, "user_id": 558639, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3f4a1073df397d894cf3ae596988b687?s=128&d=identicon&r=PG", "display_name": "fearless_fool", "link": "https://stackoverflow.com/users/558639/fearless-fool"}, "edited": false, "score": 1, "creation_date": 1451498826, "post_id": 34534507, "comment_id": 56811221, "body": "It&#39;s also worth opening the lovely resource <a href=\"https://regex101.com/#python\" rel=\"nofollow noreferrer\">regex101.com/#python</a> and testing out your regexen to see how many steps each one takes -- think of it as a regex-specific profiler."}, {"owner": {"reputation": 257, "user_id": 4589953, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/f5b90dadd5ab7ef2ff2ce09b89256dfb?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/4589953/nick"}, "reply_to_user": {"reputation": 29701, "user_id": 558639, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3f4a1073df397d894cf3ae596988b687?s=128&d=identicon&r=PG", "display_name": "fearless_fool", "link": "https://stackoverflow.com/users/558639/fearless-fool"}, "edited": false, "score": 1, "creation_date": 1451501335, "post_id": 34534507, "comment_id": 56812331, "body": "@fearless_fool this is an awesome tool. Thanks. Now I know that these regex patterns takes the most steps: regex3, regex9, and http removal."}, {"owner": {"reputation": 35789, "user_id": 1219295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BmJq2.png?s=128&g=1", "display_name": "Roland Smith", "link": "https://stackoverflow.com/users/1219295/roland-smith"}, "edited": false, "score": 1, "creation_date": 1451510980, "post_id": 34534507, "comment_id": 56817128, "body": "It is good that you posted your code. It would be nice to also see a <i>small</i> amount of input and expected output to get a feeling for what you are trying to accomplish. As you can see from the comments we have some trouble following it. :-) See <a href=\"http://stackoverflow.com/help/mcve\">How to create a Minimal, Complete, and Verifiable example</a>."}, {"owner": {"reputation": 257, "user_id": 4589953, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/f5b90dadd5ab7ef2ff2ce09b89256dfb?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/4589953/nick"}, "edited": false, "score": 0, "creation_date": 1451513743, "post_id": 34534507, "comment_id": 56818355, "body": "This is a small version that I test my regex on to profile them and decrease the steps: <a href=\"https://regex101.com/r/zH9jJ2/1\" rel=\"nofollow noreferrer\">regex101.com/r/zH9jJ2/1</a>"}, {"owner": {"reputation": 40404, "user_id": 282912, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/bmLJq.png?s=128&g=1", "display_name": "msw", "link": "https://stackoverflow.com/users/282912/msw"}, "edited": false, "score": 0, "creation_date": 1451605488, "post_id": 34534507, "comment_id": 56847567, "body": "Use <code>sed</code> instead. It is far easier to describe your simple transformation than with that lump of code."}], "answers": [{"tags": [], "owner": {"reputation": 29701, "user_id": 558639, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3f4a1073df397d894cf3ae596988b687?s=128&d=identicon&r=PG", "display_name": "fearless_fool", "link": "https://stackoverflow.com/users/558639/fearless-fool"}, "is_accepted": false, "score": 1, "last_activity_date": 1451601551, "last_edit_date": 1451601551, "creation_date": 1451591092, "answer_id": 34550981, "question_id": 34534507, "link": "https://stackoverflow.com/questions/34534507/improving-the-speed-for-regex-operations-in-python/34550981#34550981", "title": "Improving the speed for regex operations in python", "body": "<p>(Elevating what was a comment to an answer): I recommend you use the elegant and useful <a href=\"https://regex101.com/#python\" rel=\"nofollow\" title=\"Regex 101 Tool\">Regex 101 Tool</a> to profile your individual regexen and see if any of them are taking an inordinate amount of time.</p>\n\n<p>While you're at it, you could post a complete example on the site so others can see what you're using for typical input.  (I realize that you've already done this - great!)</p>\n"}, {"tags": [], "owner": {"reputation": 257, "user_id": 4589953, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/f5b90dadd5ab7ef2ff2ce09b89256dfb?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/4589953/nick"}, "is_accepted": true, "score": 0, "last_activity_date": 1451944760, "creation_date": 1451944760, "answer_id": 34600636, "question_id": 34534507, "link": "https://stackoverflow.com/questions/34534507/improving-the-speed-for-regex-operations-in-python/34600636#34600636", "title": "Improving the speed for regex operations in python", "body": "<p>After using the useful Regex tool recommended by @fearless_fool, I improved the speed significantly by replacing <code>.*</code> with a regex that represents a more stricted version of <code>.*</code> for example: <code>[^\\]]*</code>. These changes in the whole script improved the performance significantly.</p>\n"}], "owner": {"reputation": 257, "user_id": 4589953, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/f5b90dadd5ab7ef2ff2ce09b89256dfb?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/4589953/nick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 209, "favorite_count": 0, "accepted_answer_id": 34600636, "answer_count": 2, "score": 0, "last_activity_date": 1451944760, "creation_date": 1451497653, "last_edit_date": 1451515786, "question_id": 34534507, "link": "https://stackoverflow.com/questions/34534507/improving-the-speed-for-regex-operations-in-python", "title": "Improving the speed for regex operations in python", "body": "<p>I have a python script that is running over 1M lines with different lengths. The script runs very slow. It has been running only over 30000 of them for the last 12 hours. Splitting the file is out of question since the file already split. My code looks like this:</p>\n\n<pre><code>regex1 = re.compile(r\"(\\{\\{.*?\\}\\})\", flags=re.IGNORECASE)\nregex2 = re.compile(r\"(&lt;ref.*?&lt;/ref&gt;)\", flags=re.IGNORECASE)\nregex3 = re.compile(r\"(&lt;ref.*?\\/&gt;)\", flags=re.IGNORECASE)\nregex4 = re.compile(r\"(==External links==.*?)\", flags=re.IGNORECASE)\nregex5 = re.compile(r\"(&lt;!--.*?--&gt;)\", flags=re.IGNORECASE)\nregex6 = re.compile(r\"(File:[^ ]*? )\", flags=re.IGNORECASE)\nregex7 = re.compile(r\" [0-9]+ \", flags=re.IGNORECASE)\nregex8 = re.compile(r\"(\\[\\[File:.*?\\]\\])\", flags=re.IGNORECASE)\nregex9 = re.compile(r\"(\\[\\[.*?\\.JPG.*?\\]\\])\", flags=re.IGNORECASE)\nregex10 = re.compile(r\"(\\[\\[Image:.*?\\]\\])\", flags=re.IGNORECASE)\nregex11 = re.compile(r\"^[^_].*(\\) )\", flags=re.IGNORECASE)\n\nfout = open(sys.argv[2],'a+')\n\nwith open(sys.argv[1]) as f:\n    for line in f:\n        parts=line.split(\"\\t\")\n        label=parts[0].replace(\" \",\"_\").lower()\n        line=parts[1].lower()\n        try:\n            line = regex1.sub(\"\",line )\n        except:\n            pass\n        try:\n            line = regex2.sub(\"\",line )\n        except:\n            pass\n        try:\n            line = regex3.sub(\"\",line )\n        except:\n            pass\n        try:\n            line = regex4.sub(\"\",line )\n        except:\n            pass\n        try:\n            line = regex5.sub(\"\",line )\n        except:\n            pass\n        try:\n            line = regex6.sub(\"\",line )\n        except:\n            pass\n        try:\n            line = regex8.sub(\"\",line )\n        except:\n            pass\n        try:\n            line = regex9.sub(\"\",line )\n        except:\n            pass\n        try:\n            line = regex10.sub(\"\",line )\n        except:\n            pass\n\n        try:     \n            for match in re.finditer(r\"(\\[\\[.*?\\]\\])\", line):\n                replacement_list=match.group(0).replace(\"[\",\"\").replace(\"]\",\"\").split(\"|\")\n                replacement_list = [w.replace(\" \",\"_\") for w in replacement_list]\n                replacement_for_links=' '.join(replacement_list)\n                line = line.replace(match.group(0),replacement_for_links)\n        except:\n            pass\n        try:\n            line = re.sub(r'(?i)\\b((?:https?://|www\\d{0,3}[.]|[a-z0-9.\\-]+[.][a-z]{2,4}/)(?:[^\\s()&lt;&gt;]+|\\(([^\\s()&lt;&gt;]+|(\\([^\\s()&lt;&gt;]+\\)))*\\))+(?:\\(([^\\s()&lt;&gt;]+|(\\([^\\s()&lt;&gt;]+\\)))*\\)|[^\\s`!()\\[\\]{};:\\'\".,&lt;&gt;?\u00ab\u00bb\u201c\u201d\u2018\u2019]))', '', line, flags=re.MULTILINE)  \n        except:\n            pass    \n        try:\n            line = line.translate(None, '!\"#$%&amp;\\'*+,./:;&lt;=&gt;?@[\\\\]^`{|}~')\n        except:\n            pass        \n        try:\n            line = line.replace(' (',' ')   \n            line=' '.join([word.rstrip(\")\") if not '(' in word else word for word in line.split(\" \")])\n            line=re.sub(' isbn [\\w-]+ ',' ' ,line)\n            line=re.sub(' [p]+ [\\w-]+ ',' ' ,line)\n            line = re.sub( ' \\d+ ', ' ', line)\n            line= re.sub(\"^\\d+\\s|\\s\\d+\\s|\\s\\d+$\", \" \", line)\n            line = re.sub( '\\s+', ' ', line).strip()\n            line=re.sub(' isbn [\\w-]+ ',' ' ,line)\n        except:\n            pass    \n        out_string=label+\"\\t\"+line\n        fout.write(out_string)\n        fout.write(\"\\n\")\n\nfout.close()\n</code></pre>\n\n<p>Is there any change that I can gain significant improvement over the current version?</p>\n\n<p>UPDATE 1: After profiling using the suggestion by @fearless_fool I realized that regex3 and regex9 and http removal are the least efficient ones. </p>\n\n<p>UPDATE 2: It's just interesting to find out that using <code>.*</code> adds lot more to the steps of the regex patterns. I tried to replace that with <code>[^X]*</code> where <code>X</code> is something I know it never happens in the string. It improves about 20x for 1000 long lines. For example now regex1 is <code>regex1 = re.compile(r\"(\\{\\{[^\\}]*?\\}\\})\", flags=re.IGNORECASE)</code> .... If I want to use two characters in negative matching, I don't know how to do it. For example if I want to change <code>(\\{\\{[^\\}]*?\\}\\})</code> to <code>(\\{\\{[^\\}\\}]*?\\}\\})</code> which I know know is wrong since any word in <code>[]</code> is considered as separate characters. </p>\n"}, {"tags": ["python", "scipy", "signal-processing"], "answers": [{"comments": [{"owner": {"reputation": 1638, "user_id": 3919542, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/a638bc9d7fad666d07f9200694fc3885?s=128&d=identicon&r=PG&f=1", "display_name": "kkk", "link": "https://stackoverflow.com/users/3919542/kkk"}, "edited": false, "score": 0, "creation_date": 1451500563, "post_id": 34534811, "comment_id": 56811971, "body": "can you please explain the other attributes of the method as well as what is there significance.I have taken the width parameter as np.array([0.3,0.4,0.5,0.6,0.7,0.8,0.9,1,1.1,1.2,1.3,1.4,1.5]&zwnj;&#8203;) thinking that these should be the possible widths of the peaks , so 60/40 gives 1.5  and 60/200 gives 0.3 , i have assumed that the width of the peaks should come i n these range , am i correct  ??"}], "tags": [], "owner": {"reputation": 3097, "user_id": 5058588, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-2JN6_yvR-04/AAAAAAAAAAI/AAAAAAAAI1g/4S0B-xB7UH0/photo.jpg?sz=128", "display_name": "Bob Baxley", "link": "https://stackoverflow.com/users/5058588/bob-baxley"}, "is_accepted": false, "score": 4, "last_activity_date": 1451499276, "last_edit_date": 1451499276, "creation_date": 1451498934, "answer_id": 34534811, "question_id": 34534503, "link": "https://stackoverflow.com/questions/34534503/scipy-signal-find-peaks-cwt-parameters/34534811#34534811", "title": "scipy.signal.find_peaks_cwt parameters", "body": "<p>You can think of the <code>widths</code> argument as a list of the possible widths between peaks.  The algorithm smooths over these widths and then look for a peak.  if it consistently finds a peak in each \"width\", it declares that the peak exists.</p>\n\n<pre><code># sample rate\nfs = 100.0\n\n# time vector (10s)\nt = np.arange(0,10,1/fs)\n\n# heart rates to test\nrates = np.array([40,80,100,150,200])/60  \n\n# create periodic signal that looks a  little like a heartbeat\nsignal = abs(np.sin(t*np.pi*rates[2])**3)\n\n#add noise\nsignal_w_noise = signal + np.random.randn(len(signal))*0.1\nplt.plot(t,signal_w_noise)\n\n#find peaks\npeaks = scipy.signal.find_peaks_cwt(signal_w_noise, fs/rates/10)\nplt.plot(t[peaks],signal_w_noise[peaks],'ro')\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/FErvW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FErvW.png\" alt=\"enter image description here\"></a></p>\n\n<p><code>fs/rates/10</code> are the widths I used. Notice that they correspond to the number of samples expected between peaks.  That is, <code>fs/rates</code> is the number of samples between peaks. You might need to twiddle with the factor of 1/10 to get better results.</p>\n"}], "owner": {"reputation": 1638, "user_id": 3919542, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/a638bc9d7fad666d07f9200694fc3885?s=128&d=identicon&r=PG&f=1", "display_name": "kkk", "link": "https://stackoverflow.com/users/3919542/kkk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5434, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1451499276, "creation_date": 1451497646, "question_id": 34534503, "link": "https://stackoverflow.com/questions/34534503/scipy-signal-find-peaks-cwt-parameters", "title": "scipy.signal.find_peaks_cwt parameters", "body": "<p>I am building a heart rate monitor , after smoothing the points I want to find the find the number of peaks present in the graph and thus i want to use the method scipy.signal.find_peaks_cwt() to find the peaks but i am not able to understand as what parameters should i pass as the documentation present in the scipy.org is not good.</p>\n\n<p><a href=\"http://docs.scipy.org/doc/scipy/reference/generated/scipy.signal.find_peaks_cwt.html#scipy-signal-find-peaks-cwt\" rel=\"noreferrer\">http://docs.scipy.org/doc/scipy/reference/generated/scipy.signal.find_peaks_cwt.html#scipy-signal-find-peaks-cwt</a></p>\n\n<p>I have taken a 10 second video of the finger with the flash on , The heart rate may vary from 40bpm to 200bpm.</p>\n\n<pre><code>scipy.signal.find_peaks_cwt(vector, widths, wavelet=None, max_distances=None, gap_thresh=None, min_length=None, min_snr=1, noise_perc=10)\n</code></pre>\n\n<p>I am really confused as what the width parameter is , any help would be great. Thanks in advance</p>\n"}, {"tags": ["python", "unicode", "utf-8", "ipython"], "answers": [{"tags": [], "owner": {"reputation": 1616, "user_id": 1004331, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/84dd3640fe566a329afec588448da697?s=128&d=identicon&r=PG", "display_name": "astromme", "link": "https://stackoverflow.com/users/1004331/astromme"}, "is_accepted": true, "score": 0, "last_activity_date": 1451496982, "creation_date": 1451496982, "answer_id": 34534332, "question_id": 34534227, "link": "https://stackoverflow.com/questions/34534227/why-is-an-empty-string-returned-from-hanzi-to-pinyin/34534332#34534332", "title": "Why is an empty string returned from hanzi.to_pinyin()?", "body": "<p>Aha, I forgot to mark the string as unicode:</p>\n\n<p><code>s = u'\u8fd9\u4e2a\u5b57\u600e\u4e48\u5ff5\uff1f'</code></p>\n\n<p>alternatively, make strings unicode:</p>\n\n<p><code>from __future__ import unicode_literals</code></p>\n"}], "owner": {"reputation": 1616, "user_id": 1004331, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/84dd3640fe566a329afec588448da697?s=128&d=identicon&r=PG", "display_name": "astromme", "link": "https://stackoverflow.com/users/1004331/astromme"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 18, "favorite_count": 0, "accepted_answer_id": 34534332, "answer_count": 1, "score": 0, "last_activity_date": 1451496982, "creation_date": 1451496579, "question_id": 34534227, "link": "https://stackoverflow.com/questions/34534227/why-is-an-empty-string-returned-from-hanzi-to-pinyin", "title": "Why is an empty string returned from hanzi.to_pinyin()?", "body": "<p><a href=\"http://dragonmapper.readthedocs.org/en/latest/readme.html\" rel=\"nofollow\">http://dragonmapper.readthedocs.org/en/latest/readme.html</a></p>\n\n<p>I'm trying to use dragonmapper to convert characters to pinyin, and I'm trying the tutorial but I'm stuck.\n<a href=\"http://dragonmapper.readthedocs.org/en/latest/tutorial.html\" rel=\"nofollow\">http://dragonmapper.readthedocs.org/en/latest/tutorial.html</a></p>\n\n<pre><code>from dragonmapper import hanzi\ns = '\u8fd9\u4e2a\u5b57\u600e\u4e48\u5ff5\uff1f' \npinyin = hanzi.to_pinyin(s)\n</code></pre>\n\n<p>At this point <code>pinyin</code> is an empty string <code>u''</code>.  What am I doing wrong?</p>\n\n<p>(also asked here: <a href=\"https://github.com/tsroten/dragonmapper/issues/11\" rel=\"nofollow\">https://github.com/tsroten/dragonmapper/issues/11</a>)</p>\n"}, {"tags": ["python", "rabbitmq"], "comments": [{"owner": {"reputation": 4651, "user_id": 3270800, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/C7OC7.jpg?s=128&g=1", "display_name": "Tanveer Alam", "link": "https://stackoverflow.com/users/3270800/tanveer-alam"}, "edited": false, "score": 0, "creation_date": 1451496714, "post_id": 34534178, "comment_id": 56810082, "body": "Can you try converting your message to a json object and then send."}], "answers": [{"comments": [{"owner": {"reputation": 489, "user_id": 5731482, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/029c401970013921b28e75ed2eb58210?s=128&d=identicon&r=PG&f=1", "display_name": "Malgi", "link": "https://stackoverflow.com/users/5731482/malgi"}, "edited": false, "score": 0, "creation_date": 1451497468, "post_id": 34534257, "comment_id": 56810475, "body": "Thanks! I&#39;ve sent the message successfully, but got this error after running the consumer: ValueError: No JSON object could be decoded"}, {"owner": {"reputation": 5358, "user_id": 3171657, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J3bKr.png?s=128&g=1", "display_name": "Turn", "link": "https://stackoverflow.com/users/3171657/turn"}, "reply_to_user": {"reputation": 489, "user_id": 5731482, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/029c401970013921b28e75ed2eb58210?s=128&d=identicon&r=PG&f=1", "display_name": "Malgi", "link": "https://stackoverflow.com/users/5731482/malgi"}, "edited": false, "score": 0, "creation_date": 1451498380, "post_id": 34534257, "comment_id": 56810964, "body": "Well you can just print out <code>body</code> to see what it looks like. JSON is just a string so it is pretty easily human-parseable."}, {"owner": {"reputation": 489, "user_id": 5731482, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/029c401970013921b28e75ed2eb58210?s=128&d=identicon&r=PG&f=1", "display_name": "Malgi", "link": "https://stackoverflow.com/users/5731482/malgi"}, "edited": false, "score": 0, "creation_date": 1451499670, "post_id": 34534257, "comment_id": 56811580, "body": "No error after fixing the json message format. Thanks a lot for your solution. You&#39;ve saved my day :)"}], "tags": [], "owner": {"reputation": 5358, "user_id": 3171657, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J3bKr.png?s=128&g=1", "display_name": "Turn", "link": "https://stackoverflow.com/users/3171657/turn"}, "is_accepted": true, "score": 55, "last_activity_date": 1590596533, "last_edit_date": 1590596533, "creation_date": 1451496702, "answer_id": 34534257, "question_id": 34534178, "link": "https://stackoverflow.com/questions/34534178/rabbitmq-how-to-send-python-dictionary-between-python-producer-and-consumer/34534257#34534257", "title": "RabbitMQ: How to send Python dictionary between Python producer and consumer?", "body": "<p>You can't send native Python types as your payload, you have to serialize them first. I recommend using JSON:</p>\n\n<pre><code>import json\nchannel.basic_publish(exchange='',\n                      routing_key='task_queue',\n                      body=json.dumps(message),\n                      properties=pika.BasicProperties(\n                          delivery_mode = 2, # make message persistent\n                      ))\n</code></pre>\n\n<p>and</p>\n\n<pre><code>def callback(ch, method, properties, body):\nprint(\" [x] Received %r\" % json.loads(body))\n</code></pre>\n"}], "owner": {"reputation": 489, "user_id": 5731482, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/029c401970013921b28e75ed2eb58210?s=128&d=identicon&r=PG&f=1", "display_name": "Malgi", "link": "https://stackoverflow.com/users/5731482/malgi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 19344, "favorite_count": 8, "accepted_answer_id": 34534257, "answer_count": 1, "score": 32, "last_activity_date": 1590596533, "creation_date": 1451496400, "question_id": 34534178, "link": "https://stackoverflow.com/questions/34534178/rabbitmq-how-to-send-python-dictionary-between-python-producer-and-consumer", "title": "RabbitMQ: How to send Python dictionary between Python producer and consumer?", "body": "<p>I'm trying to send a python dictionary from a python producer to a python consumer using RabbitMQ. The producer first establishes the connection to local RabbitMQ server. Then it creates a queue to which the message will be delivered, and finally sends the message. The consumer first connects to RabbitMQ server and then makes sure the queue exists by creating the same queue. It then receives the message from producer within the callback function, and prints the 'id' value (1). Here are the scripts for producer and consumer:</p>\n\n<p>producer.py script:</p>\n\n<pre><code>import pika\nimport sys\n\nconnection = pika.BlockingConnection(pika.ConnectionParameters(host='localhost'))\nchannel = connection.channel()\n\nchannel.queue_declare(queue='task_queue', durable=True)\n\nmessage = {'id': 1, 'name': 'name1'}\nchannel.basic_publish(exchange='',\n                      routing_key='task_queue',\n                      body=message,\n                      properties=pika.BasicProperties(\n                         delivery_mode = 2, # make message persistent\n                      ))\nprint(\" [x] Sent %r\" % message)\nconnection.close()\n</code></pre>\n\n<p>consumer.py script:</p>\n\n<pre><code>import pika\nimport time\n\nconnection = pika.BlockingConnection(pika.ConnectionParameters(host='localhost'))\nchannel = connection.channel()\n\nchannel.queue_declare(queue='task_queue', durable=True)\nprint(' [*] Waiting for messages. To exit press CTRL+C')\n\ndef callback(ch, method, properties, body):\n    print(\" [x] Received %r\" % body)\n    print(body['id'])\n    print(\" [x] Done\")\n    ch.basic_ack(delivery_tag = method.delivery_tag)\n\nchannel.basic_qos(prefetch_count=1)\nchannel.basic_consume(callback,\n                      queue='task_queue')\n\nchannel.start_consuming()\n</code></pre>\n\n<p>But, when I run the producer.py, I get this error:</p>\n\n<pre><code>line 18, in &lt;module&gt;\n    delivery_mode = 2, # make message persistent\n  File \"/Library/Python/2.7/site-packages/pika/adapters/blocking_connection.py\", line 1978, in basic_publish\n    mandatory, immediate)\n  File \"/Library/Python/2.7/site-packages/pika/adapters/blocking_connection.py\", line 2064, in publish\n    immediate=immediate)\n  File \"/Library/Python/2.7/site-packages/pika/channel.py\", line 338, in basic_publish\n    (properties, body))\n  File \"/Library/Python/2.7/site-packages/pika/channel.py\", line 1150, in _send_method\n    self.connection._send_method(self.channel_number, method_frame, content)\n  File \"/Library/Python/2.7/site-packages/pika/connection.py\", line 1571, in _send_method\n    self._send_message(channel_number, method_frame, content)\n  File \"/Library/Python/2.7/site-packages/pika/connection.py\", line 1596, in _send_message\n    content[1][s:e]).marshal())\nTypeError: unhashable type\n</code></pre>\n\n<p>Could anybody help me? Thanks!</p>\n"}, {"tags": ["python", "sockets", "udp", "listener"], "comments": [{"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1451496457, "post_id": 34534160, "comment_id": 56809950, "body": "It sounds like you want to set a timeout on the socket, so the recfrom() doesn&#39;t block forever."}, {"owner": {"reputation": 21, "user_id": 5521594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb5c50c269b73e4e8228ecad0b260202?s=128&d=identicon&r=PG&f=1", "display_name": "dingerjunkie", "link": "https://stackoverflow.com/users/5521594/dingerjunkie"}, "reply_to_user": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1451496740, "post_id": 34534160, "comment_id": 56810094, "body": "Apologies for the missed &quot;doubling&quot; of single quotes in my example...I pulled out proprietary stuff and was sloppy with the replacement strings."}, {"owner": {"reputation": 21, "user_id": 5521594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb5c50c269b73e4e8228ecad0b260202?s=128&d=identicon&r=PG&f=1", "display_name": "dingerjunkie", "link": "https://stackoverflow.com/users/5521594/dingerjunkie"}, "reply_to_user": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1451496841, "post_id": 34534160, "comment_id": 56810145, "body": "In a way, yes, Jonathon.  This needed to be a persisting service...I listen for as long as the device/appliance is powered up, so if it is a &quot;timeout,&quot; I need to restore the listening state right after I send the &quot;alive&quot; packet."}, {"owner": {"reputation": 13767, "user_id": 2413201, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rxfuw.jpg?s=128&g=1", "display_name": "Armali", "link": "https://stackoverflow.com/users/2413201/armali"}, "edited": false, "score": 0, "creation_date": 1518530441, "post_id": 34534160, "comment_id": 84537657, "body": "Where shall it work (Unix, Windows, ...)?"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 5521594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb5c50c269b73e4e8228ecad0b260202?s=128&d=identicon&r=PG&f=1", "display_name": "dingerjunkie", "link": "https://stackoverflow.com/users/5521594/dingerjunkie"}, "edited": false, "score": 0, "creation_date": 1451509519, "post_id": 34537221, "comment_id": 56816435, "body": "I&#39;d still like to get input from others on alternate approaches if someone has something cleaner or more elegant."}], "tags": [], "owner": {"reputation": 21, "user_id": 5521594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb5c50c269b73e4e8228ecad0b260202?s=128&d=identicon&r=PG&f=1", "display_name": "dingerjunkie", "link": "https://stackoverflow.com/users/5521594/dingerjunkie"}, "is_accepted": false, "score": 1, "last_activity_date": 1451509487, "creation_date": 1451509487, "answer_id": 34537221, "question_id": 34534160, "link": "https://stackoverflow.com/questions/34534160/python-overlapping-timer-with-udp-listener/34537221#34537221", "title": "Python overlapping timer with UDP listener", "body": "<p>I think I have what is a working solution.  It \"punts\" on the looping complexity a bit, but I believe it is a clean, maintainable, readable solution.</p>\n\n<p>I've created three specific .py scripts; one opens a socket to send the \"wake-up\" packet, second opens a socket to send the \"alive\" packet, and a third that opens up a socket to listen/respond to device search requests.</p>\n\n<p>These are then imported into a \"calling script\" with a timer-based interrupt.</p>\n\n<p>Here's how it looks...</p>\n\n<pre><code>import udp_wakeup\nimport udp_listen\nimport udp_alive\nimport shutil\nimport string\nfrom threading import Timer\nimport thread, time, sys\nfrom datetime import datetime as dt\n\n#dummy flag to ensure constant looping\nrestart = 1\n\ndef timeout():\n    thread.interrupt_main()\n\n#Call and execute the wake-up packet broadcast\nudp_wakeup.main()\n\n#Initiate timer for 1800 seconds, or 30 minutes\nwhile restart = 1\n  try:\n    #Call and execute the listener routine\n    Timer(1800, timeout).start()\n    udp_listen.main()\n  except:\n    #On Timer expire, break from listener, call Alive-broadcast, reset timer and restart listener\n    udp_alive.main()\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 5521594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb5c50c269b73e4e8228ecad0b260202?s=128&d=identicon&r=PG&f=1", "display_name": "dingerjunkie", "link": "https://stackoverflow.com/users/5521594/dingerjunkie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 565, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1451509487, "creation_date": 1451496318, "question_id": 34534160, "link": "https://stackoverflow.com/questions/34534160/python-overlapping-timer-with-udp-listener", "title": "Python overlapping timer with UDP listener", "body": "<p>I'm looking for insight on including a timer with/within the WHILE loop of a UDP listener service.  The service is part of a device auto-discovery system I need to interact with.</p>\n\n<p>The process requiring the listener has three requirements/responsibilities:</p>\n\n<ul>\n<li>Broadcast a notification packet at initial socket bind (device is up)</li>\n<li>Listen for and reply to \"search\" broadcasts</li>\n<li>regardless of presence/absence of \"search\" broadcasts, broadcast a \"still alive\" packet every 30 minutes</li>\n</ul>\n\n<p>Each of these tasks alone are no problem, and the first two are easy to include.  What I'm not comfortable with is \"interrupting the listener\" or modifying the WHILE loop of the listener to send the \"alive\" packet.</p>\n\n<p>If I \"wait\" for the interval, I suspend other processes.  Will a Scheduler object do the same, or allow us to continue?  I can't multi-thread, because I need to receive and send on a specific port, which is bound within the thread.</p>\n\n<p>here is what I have...</p>\n\n<pre><code>import time\nimport socket\nimport sys \nimport shutil\nimport signal\nimport string\nimport re\nimport os\nimport socket\nimport fcntl\nimport struct\n\nHOST = ''\nPORT = 8888\nRESPONSE_MSG = 'Yes, I'm here'\nALIVE_MSG = 'I'm alive'\nIDENTIFY_MSG = 'It's me'\nIP_ADDR = ''\nINTERVAL = 1800\n\n# Datagram (udp) socket\ntry :\n    s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)\n    print 'Socket created'\nexcept socket.error, msg :\n    print 'Failed to create socket. Error Code : ' + str(msg[0]) + ' Message ' + msg[1]\n    sys.exit() \n\ntry:\n    s.bind((HOST, PORT))\nexcept socket.error , msg:\n    print 'Bind failed. Error Code : ' + str(msg[0]) + ' Message ' + msg[1]\n    sys.exit()\n\n# broadcast wake-up message\ns.sendto(IDENTIFY_MSG,'239.255.255.250')\n\n#now keep listening...how do I not stop listening while sending a packet on an interval?\nwhile 1:\n    # receive data from client (data, addr)\n    d = s.recvfrom(1024)\n    data = d[0]\n    source_addr = d[1]\n\n    if not data: \n        break\n\n    s.sendto(RESPONSE_MSG, source_addr)\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1451496395, "post_id": 34534152, "comment_id": 56809922, "body": "You need to fix the indentation in your code"}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1451496409, "post_id": 34534152, "comment_id": 56809930, "body": "If you&#39;re calling the parent implementation, you need to supply it the parameters it needs - why is that a surprise?"}, {"owner": {"reputation": 355, "user_id": 5565000, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/0073c6037644a49b0ddff6669b4bf0ee?s=128&d=identicon&r=PG&f=1", "display_name": "Eli Borodach", "link": "https://stackoverflow.com/users/5565000/eli-borodach"}, "edited": false, "score": 0, "creation_date": 1451497012, "post_id": 34534152, "comment_id": 56810259, "body": "what do you mean? when I call MiniMaxWithAlphaBetaPruningWithRandomW? I don&#39;t see where I don&#39;t supply the parameters, what I see is when I call myself (the recursive function in parent) for some reasom it asks me for the parameter in the son."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1451497073, "post_id": 34534152, "comment_id": 56810285, "body": "You&#39;ve broken Liskov substitutability; the parent and child <code>search</code> methods take different parameters (and Python doesn&#39;t have overloading)."}, {"owner": {"reputation": 355, "user_id": 5565000, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/0073c6037644a49b0ddff6669b4bf0ee?s=128&d=identicon&r=PG&f=1", "display_name": "Eli Borodach", "link": "https://stackoverflow.com/users/5565000/eli-borodach"}, "edited": false, "score": 0, "creation_date": 1451497207, "post_id": 34534152, "comment_id": 56810350, "body": "Exactly! what should I do about that?"}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1451497264, "post_id": 34534152, "comment_id": 56810377, "body": "...make them have the same signature?"}, {"owner": {"reputation": 355, "user_id": 5565000, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/0073c6037644a49b0ddff6669b4bf0ee?s=128&d=identicon&r=PG&f=1", "display_name": "Eli Borodach", "link": "https://stackoverflow.com/users/5565000/eli-borodach"}, "edited": false, "score": 0, "creation_date": 1451497561, "post_id": 34534152, "comment_id": 56810514, "body": "But I don&#39;t want to add an extra unnecessary parameter to the grandfather signature - can&#39;t something else be done?"}, {"owner": {"reputation": 9583, "user_id": 264775, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4fd3faa6d5ece91bb8f6d2111da84f44?s=128&d=identicon&r=PG", "display_name": "thegrinner", "link": "https://stackoverflow.com/users/264775/thegrinner"}, "edited": false, "score": 0, "creation_date": 1451507840, "post_id": 34534152, "comment_id": 56815580, "body": "You could maybe use <code>*args</code> or <code>**kwargs</code>?"}, {"owner": {"reputation": 35789, "user_id": 1219295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BmJq2.png?s=128&g=1", "display_name": "Roland Smith", "link": "https://stackoverflow.com/users/1219295/roland-smith"}, "edited": false, "score": 0, "creation_date": 1451513345, "post_id": 34534152, "comment_id": 56818180, "body": "Those extremely long class names aren&#39;t helping the readability of your code."}], "answers": [{"tags": [], "owner": {"reputation": 177, "user_id": 4050929, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jOgOc.png?s=128&g=1", "display_name": "Jas", "link": "https://stackoverflow.com/users/4050929/jas"}, "is_accepted": false, "score": 0, "last_activity_date": 1451507497, "creation_date": 1451507497, "answer_id": 34536808, "question_id": 34534152, "link": "https://stackoverflow.com/questions/34534152/how-do-i-avoid-ambiguity-in-functioning-when-i-have-inheritance-and-recurssion/34536808#34536808", "title": "How do I avoid ambiguity in functioning when I have inheritance and recurssion", "body": "<p>About the only mitigation (given the conflicting desires expressed in the comments) is to use optional arguments to \"ignore\" the more specific child args.  It doesn't necessarily lead to terribly readable code:</p>\n\n<pre><code>class P:\n  def foo(self,a,b,c,*args):\n     # args is ignored\n     ...\n\nclass C(P):\n  def foo(self,a,b,c,d,*args):\n     ...\n     if something:\n        return someone.foo(a,b,c)\n     else:\n        return someone.foo(a,b,c,d)\n</code></pre>\n\n<p>Note this can also be done with keyword arguments.</p>\n"}, {"tags": [], "owner": {"reputation": 71233, "user_id": 837534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f3782b004830f622e19029e5f7fc146?s=128&d=identicon&r=PG", "display_name": "Mike M&#252;ller", "link": "https://stackoverflow.com/users/837534/mike-m%c3%bcller"}, "is_accepted": false, "score": 0, "last_activity_date": 1451509194, "creation_date": 1451509194, "answer_id": 34537169, "question_id": 34534152, "link": "https://stackoverflow.com/questions/34534152/how-do-i-avoid-ambiguity-in-functioning-when-i-have-inheritance-and-recurssion/34537169#34537169", "title": "How do I avoid ambiguity in functioning when I have inheritance and recurssion", "body": "<p>Making <code>utility_father</code> optional might be an option:</p>\n\n<pre><code>def search(self, state, depth, alpha, beta, maximizing_player, utility_father=None):\n</code></pre>\n"}], "owner": {"reputation": 355, "user_id": 5565000, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/0073c6037644a49b0ddff6669b4bf0ee?s=128&d=identicon&r=PG&f=1", "display_name": "Eli Borodach", "link": "https://stackoverflow.com/users/5565000/eli-borodach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1451509194, "creation_date": 1451496296, "question_id": 34534152, "link": "https://stackoverflow.com/questions/34534152/how-do-i-avoid-ambiguity-in-functioning-when-i-have-inheritance-and-recurssion", "title": "How do I avoid ambiguity in functioning when I have inheritance and recurssion", "body": "<p>I have this function: </p>\n\n<pre><code>class MiniMaxCompetition(MiniMaxWithAlphaBetaPruningWithRandomWQuiescence):\ndef __init__(self, utility, my_color, no_more_time, w, treshold_quiet, reasonable_depth_value, b_quiescence):\n    MiniMaxWithAlphaBetaPruningWithRandomWQuiescence.__init__(self, utility, my_color, no_more_time, w, treshold_quiet, reasonable_depth_value)\n    self.b_quiescence = b_quiescence\n\ndef quiescence_search(self, state, depth, alpha, beta, maximizing_player, utility_father):\n    return MiniMaxWithAlphaBetaPruningWithRandomWQuiescence.quiescence_search(self, state, depth, alpha, beta, maximizing_player, utility_father)\n\ndef search(self, state, depth, alpha, beta, maximizing_player, utility_father):\n    \"\"\"Start the MiniMax algorithm.\n\n    :param state: The state to start from.\n    :param depth: The maximum allowed depth for the algorithm.\n    :param alpha: The alpha of the alpha-beta pruning.\n    :param alpha: The beta of the alpha-beta pruning.\n    :param maximizing_player: Whether this is a max node (True) or a min node (False).\n    :return: A tuple: (The alpha-beta algorithm value, The move in case of max node or None in min mode)\n    \"\"\"\n\n    if (self.b_quiescence):\n        return MiniMaxWithAlphaBetaPruningWithRandomWQuiescence.search(self, state, depth, alpha, beta, maximizing_player, utility_father)\n    else:\n        return MiniMaxWithAlphaBetaPruningWithRandomW.search(self, state, depth, alpha, beta, maximizing_player)\n</code></pre>\n\n<p>when I run I get into second scenario of method search, and it calls: </p>\n\n<pre><code>class MiniMaxWithAlphaBetaPruningWithRandomW(MiniMaxWithAlphaBetaPruning):\ndef __init__(self, utility, my_color, no_more_time, w):\n    MiniMaxWithAlphaBetaPruning.__init__(self, utility, my_color, no_more_time)\n    self.w = w\n\ndef search(self, state, depth, alpha, beta, maximizing_player):\n    \"\"\"Start the MiniMax algorithm.\n\n    :param state: The state to start from.\n    :param depth: The maximum allowed depth for the algorithm.\n    :param alpha: The alpha of the alpha-beta pruning.\n    :param alpha: The beta of the alpha-beta pruning.\n    :param maximizing_player: Whether this is a max node (True) or a min node (False).\n    :return: A tuple: (The alpha-beta algorithm value, The move in case of max node or None in min mode)\n    \"\"\"\n\n    if (self.w == 1):\n        return MiniMaxWithAlphaBetaPruning.search(self, state, depth, alpha, beta, maximizing_player)\n    elif ((self.w &lt; 1) and (self.w &gt; 0)):\n        if depth == 0 or self.no_more_time():\n            return self.utility(state), None\n\n        next_moves = state.legalMoves()\n        if not next_moves:\n            # This player has no moves. So the previous player is the winner.\n            return INFINITY if state.currPlayer != self.my_color else -INFINITY, None\n\n        num_moves_to_choose = int(len(next_moves) * self.w)\n        random_idxs = random.sample(range(len(next_moves)), num_moves_to_choose)\n        if maximizing_player:\n            selected_move = next_moves[0]\n            best_move_utility = -INFINITY\n            for i in random_idxs:\n                new_state = copy.deepcopy(state) \n                new_state.doMove(next_moves[i])                    \n                minimax_value, _ = self.search(new_state, depth - 1, alpha, beta, False)\n                alpha = max(alpha, minimax_value)\n                if minimax_value &gt; best_move_utility:\n                    best_move_utility = minimax_value\n                    selected_move = next_moves[i]\n                if beta &lt;= alpha or self.no_more_time():\n                    break\n            return alpha, selected_move\n        else:\n            for i in random_idxs:\n                new_state = copy.deepcopy(state) \n                new_state.doMove(next_moves[i])                    \n                beta = min(beta, self.search(new_state, depth - 1, alpha, beta, True)[0])\n                if beta &lt;= alpha or self.no_more_time():\n                    break\n            return beta, None\n    else:\n        print('Error w is wrong value - {}'.format(self.w))\n</code></pre>\n\n<p>However, when I try to run i get this error: </p>\n\n<pre><code>Exception in thread Thread-4:\nTraceback (most recent call last):\n  File \"C:\\Python34\\lib\\threading.py\", line 921, in _bootstrap_inner\n    self.run()\n  File \"C:\\Python34\\lib\\threading.py\", line 869, in run\n    self._target(*self._args, **self._kwargs)\n  File \"C:\\Users\\Eli\\workspace\\HW2\\amazons\\utils.py\", line 36, in function_wrapper\n    result = func(*args, **kwargs)\n  File \"C:\\Users\\Eli\\workspace\\HW2\\amazons\\MiniMaxCompetition.py\", line 34, in search\n    return MiniMaxWithAlphaBetaPruningWithRandomW.search(self, state, depth, alpha, beta, maximizing_player)\n  File \"C:\\Users\\Eli\\workspace\\HW2\\amazons\\MiniMaxWithAlphaBetaPruningWithRandomW.py\", line 45, in search\n    minimax_value, _ = self.search(new_state, depth - 1, alpha, beta, False)\nTypeError: search() missing 1 required positional argument: 'utility_father'\n</code></pre>\n\n<p>It seems when it tries to make the recursion it confuses between the method search. Why is this happening? How do I avoid it?</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 21174, "user_id": 636625, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/EuUH4.jpg?s=128&g=1", "display_name": "Shang Wang", "link": "https://stackoverflow.com/users/636625/shang-wang"}, "edited": false, "score": 2, "creation_date": 1451496260, "post_id": 34534129, "comment_id": 56809843, "body": "Is your <code>class Meta</code> indentation like that? If so, then you need to make it indent one more level because <code>class Meta</code> belongs to form class."}, {"owner": {"reputation": 21174, "user_id": 636625, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/EuUH4.jpg?s=128&g=1", "display_name": "Shang Wang", "link": "https://stackoverflow.com/users/636625/shang-wang"}, "edited": false, "score": 0, "creation_date": 1451496345, "post_id": 34534129, "comment_id": 56809883, "body": "Also, python classes should use camelcase, variable names should be all lower case with underscores, so your form should be <code>LoginForm</code>. Look at pep8 definition: <a href=\"https://www.python.org/dev/peps/pep-0008/#class-names\" rel=\"nofollow noreferrer\">python.org/dev/peps/pep-0008/#class-names</a>"}, {"owner": {"reputation": 173, "user_id": 5507984, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/cc0e3148f3bd4c54e540ddccc68e05f3?s=128&d=identicon&r=PG&f=1", "display_name": "Santiago de Diego", "link": "https://stackoverflow.com/users/5507984/santiago-de-diego"}, "reply_to_user": {"reputation": 21174, "user_id": 636625, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/EuUH4.jpg?s=128&g=1", "display_name": "Shang Wang", "link": "https://stackoverflow.com/users/636625/shang-wang"}, "edited": false, "score": 0, "creation_date": 1451497781, "post_id": 34534129, "comment_id": 56810637, "body": "If I write Meta class into LoginForm class it throws an exception of indentationError"}, {"owner": {"reputation": 21174, "user_id": 636625, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/EuUH4.jpg?s=128&g=1", "display_name": "Shang Wang", "link": "https://stackoverflow.com/users/636625/shang-wang"}, "edited": false, "score": 0, "creation_date": 1451497902, "post_id": 34534129, "comment_id": 56810698, "body": "Then your indentation is not correct, maybe you mixed tab with spaces. <a href=\"https://docs.djangoproject.com/en/1.9/topics/forms/modelforms/\" rel=\"nofollow noreferrer\">docs.djangoproject.com/en/1.9/topics/forms/modelforms</a>"}, {"owner": {"reputation": 173, "user_id": 5507984, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/cc0e3148f3bd4c54e540ddccc68e05f3?s=128&d=identicon&r=PG&f=1", "display_name": "Santiago de Diego", "link": "https://stackoverflow.com/users/5507984/santiago-de-diego"}, "reply_to_user": {"reputation": 21174, "user_id": 636625, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/EuUH4.jpg?s=128&g=1", "display_name": "Shang Wang", "link": "https://stackoverflow.com/users/636625/shang-wang"}, "edited": false, "score": 0, "creation_date": 1451498322, "post_id": 34534129, "comment_id": 56810937, "body": "Thanks to both of you! The problem was solved."}, {"owner": {"reputation": 21174, "user_id": 636625, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/EuUH4.jpg?s=128&g=1", "display_name": "Shang Wang", "link": "https://stackoverflow.com/users/636625/shang-wang"}, "edited": false, "score": 0, "creation_date": 1451498546, "post_id": 34534129, "comment_id": 56811065, "body": "Glad it helped. But I thought I&#39;m the only one leaving the comment here. Where&#39;s the other guy? :)"}], "answers": [{"tags": [], "owner": {"reputation": 21174, "user_id": 636625, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/EuUH4.jpg?s=128&g=1", "display_name": "Shang Wang", "link": "https://stackoverflow.com/users/636625/shang-wang"}, "is_accepted": false, "score": 2, "last_activity_date": 1451503231, "creation_date": 1451503231, "answer_id": 34535810, "question_id": 34534129, "link": "https://stackoverflow.com/questions/34534129/django-throws-exception-modelform-has-no-model-class-specified/34535810#34535810", "title": "Django throws exception: ModelForm has no model class specified", "body": "<p>You need to indent your <code>class Meta</code> because it's part of the model form class definition:</p>\n\n<pre><code>class login_form(forms.ModelForm):\n    username = forms.SlugField (max_length=8, \n                             label='Usuario: ')\n    password = forms.SlugField (max_length=8, \n                        widget=forms.PasswordInput(),  \n                        label='Contrase\u00f1a:',\n                        help_text='Hasta 8 letras')\n    class Meta:\n        model  = User\n        fields = ('username',  'password')\n</code></pre>\n\n<p><a href=\"https://docs.djangoproject.com/en/1.9/topics/forms/modelforms/\" rel=\"nofollow\">Django doc</a> explains this in details.</p>\n"}], "owner": {"reputation": 173, "user_id": 5507984, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/cc0e3148f3bd4c54e540ddccc68e05f3?s=128&d=identicon&r=PG&f=1", "display_name": "Santiago de Diego", "link": "https://stackoverflow.com/users/5507984/santiago-de-diego"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 650, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1451503231, "creation_date": 1451496184, "question_id": 34534129, "link": "https://stackoverflow.com/questions/34534129/django-throws-exception-modelform-has-no-model-class-specified", "title": "Django throws exception: ModelForm has no model class specified", "body": "<p>I\u00b4m working with Django Framework and it throws this exception: ModelForm has no model class specified.</p>\n\n<p>This is my code:</p>\n\n<p><strong>views.py</strong></p>\n\n<pre><code>from django.contrib.auth import authenticate, login, logout\nfrom django.shortcuts import redirect\nfrom DjangoApp1.forms import login_form\nfrom django.shortcuts import render  #For render templates\n\ndef login_view(request):    \n\n    form = login_form()\n    context = { 'form': form, 'mensaje':'Logeandose'}\n\n    if request.method == 'POST':        \n        form = login_form(request.POST)     \n        usuario = request.POST.get('username')\n        contrase = request.POST.get('password')\n    # Hacer el login\n        user = authenticate(username=usuario, password=contrase)\n        if user is not None and user.is_active:\n            login(request, user)\n            context['mensaje'] =  u'Logeado como  %s, contrase\u00f1a %s' % (usuario, contrase)\n        else:\n            context['mensaje'] =  u'No usuario  o contrase\u00f1a incorrecta'\n\n    return render (request, 'DjangoApp1/login.html', context)\n</code></pre>\n\n<p>And the models.py where I\u00b4ve the login form:</p>\n\n<p><strong>models.py</strong></p>\n\n<pre><code>from django.contrib.auth.models import User\nfrom django import forms\n\nclass login_form(forms.ModelForm):\n    username = forms.SlugField (max_length=8, \n                             label='Usuario: ')\n    password = forms.SlugField (max_length=8, \n                        widget=forms.PasswordInput(),  \n                        label='Contrase\u00f1a:',\n                        help_text='Hasta 8 letras')\n\nclass Meta:\n    model  = User\n    fields = ('username',  'password')\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "edited": false, "score": 0, "creation_date": 1451496187, "post_id": 34534119, "comment_id": 56809804, "body": "read the doc for <code>any</code> .."}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1451496327, "post_id": 34534119, "comment_id": 56809869, "body": "what are you actually doing?"}, {"owner": {"reputation": 12516, "user_id": 302268, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c3985dffcdc646b67ed0699a364639e2?s=128&d=identicon&r=PG", "display_name": "Mad Wombat", "link": "https://stackoverflow.com/users/302268/mad-wombat"}, "edited": false, "score": 0, "creation_date": 1451496415, "post_id": 34534119, "comment_id": 56809932, "body": "Checking POST request inputs"}, {"owner": {"reputation": 12516, "user_id": 302268, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c3985dffcdc646b67ed0699a364639e2?s=128&d=identicon&r=PG", "display_name": "Mad Wombat", "link": "https://stackoverflow.com/users/302268/mad-wombat"}, "edited": false, "score": 0, "creation_date": 1451496553, "post_id": 34534119, "comment_id": 56810002, "body": "Looks like people are downvoting the question, so I am going to delete it."}, {"owner": {"reputation": 32256, "user_id": 1391441, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/FP3Un.jpg?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/1391441/gabriel"}, "edited": false, "score": 0, "creation_date": 1451496889, "post_id": 34534119, "comment_id": 56810175, "body": "Don&#39;t delete it. Lately people have been very quick to downvote questions that don&#39;t really deserve a downvote. Not sure why. It&#39;ll go up in time."}, {"owner": {"reputation": 12516, "user_id": 302268, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c3985dffcdc646b67ed0699a364639e2?s=128&d=identicon&r=PG", "display_name": "Mad Wombat", "link": "https://stackoverflow.com/users/302268/mad-wombat"}, "edited": false, "score": 0, "creation_date": 1451497267, "post_id": 34534119, "comment_id": 56810379, "body": "True it is very similar. I think my version is more clear-cut, but up to the mods, I suppose."}, {"owner": {"reputation": 4447, "user_id": 1294864, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/dLaJj.jpg?s=128&g=1", "display_name": "Bono", "link": "https://stackoverflow.com/users/1294864/bono"}, "edited": false, "score": 0, "creation_date": 1531906009, "post_id": 34534119, "comment_id": 89767641, "body": "Technically this question is not a duplicate of the one linked. That one is very specific about <i>all</i> keys being present. This is only about <i>one</i> key being present. Which requires a different approach. Therefore I&#39;m voting to re-open this question."}], "answers": [{"comments": [{"owner": {"reputation": 12516, "user_id": 302268, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c3985dffcdc646b67ed0699a364639e2?s=128&d=identicon&r=PG", "display_name": "Mad Wombat", "link": "https://stackoverflow.com/users/302268/mad-wombat"}, "edited": false, "score": 1, "creation_date": 1451496332, "post_id": 34534134, "comment_id": 56809872, "body": "Ah! Exactly what I am looking for."}, {"owner": {"reputation": 217, "user_id": 1735243, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/5mrSI.jpg?s=128&g=1", "display_name": "Raichu", "link": "https://stackoverflow.com/users/1735243/raichu"}, "edited": false, "score": 0, "creation_date": 1540813894, "post_id": 34534134, "comment_id": 92989046, "body": "how to access key inside if statement??"}], "tags": [], "owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "is_accepted": true, "score": 28, "last_activity_date": 1451496210, "creation_date": 1451496210, "answer_id": 34534134, "question_id": 34534119, "link": "https://stackoverflow.com/questions/34534119/check-if-any-of-the-list-of-keys-are-present-in-a-dictionary/34534134#34534134", "title": "Check if any of the list of keys are present in a dictionary", "body": "<p>You could use <code>any</code> and iterate over each key you want to check</p>\n\n<pre><code>if any(key in dict for key in ['asdf', 'qwer', 'zxcf']):\n    # contains at least one of them\n</code></pre>\n\n<p>This will short-circuit and return <code>True</code> upon finding the first match, or will return <code>False</code> if it finds none.</p>\n"}, {"comments": [{"owner": {"reputation": 9571, "user_id": 2770850, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/fwn9J.jpg?s=128&g=1", "display_name": "Nabin", "link": "https://stackoverflow.com/users/2770850/nabin"}, "edited": false, "score": 0, "creation_date": 1493825661, "post_id": 34534204, "comment_id": 74570137, "body": "I get TypeError exception while running your first snippet. Should I change something there?"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 9571, "user_id": 2770850, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/fwn9J.jpg?s=128&g=1", "display_name": "Nabin", "link": "https://stackoverflow.com/users/2770850/nabin"}, "edited": false, "score": 1, "creation_date": 1493837714, "post_id": 34534204, "comment_id": 74577340, "body": "@Spiderman, are you using python 2 or 3? If using python2 you would get a TypeError with the <code>if d.keys() &amp; keys</code> as you would need to call <code>viewkeys</code>."}, {"owner": {"reputation": 9571, "user_id": 2770850, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/fwn9J.jpg?s=128&g=1", "display_name": "Nabin", "link": "https://stackoverflow.com/users/2770850/nabin"}, "edited": false, "score": 1, "creation_date": 1493861549, "post_id": 34534204, "comment_id": 74586047, "body": "Yes I am using 2.7 :) Thanks for your response."}], "tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": false, "score": 6, "last_activity_date": 1511376652, "last_edit_date": 1511376652, "creation_date": 1451496494, "answer_id": 34534204, "question_id": 34534119, "link": "https://stackoverflow.com/questions/34534119/check-if-any-of-the-list-of-keys-are-present-in-a-dictionary/34534204#34534204", "title": "Check if any of the list of keys are present in a dictionary", "body": "<p>You could also use <code>&amp;</code>:</p>\n\n<pre><code>keys =  ['asdf', 'qwer', 'zxcf']\nif d.keys() &amp; keys:\n    print(d)\n</code></pre>\n\n<p>You would need  <code>d.viewkeys()</code> for python2.</p>\n\n<p>Alternatively, make keys a <code>set</code> and see if the set is disjoint or not, which will be the fastest approach:</p>\n\n<pre><code>keys =  {'asdf', 'qwer', 'zxcf'}\n\nif not keys.isdisjoint(d):\n    print(d)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 357, "user_id": 5405684, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/oygjk.gif?s=128&g=1", "display_name": "lstbl", "link": "https://stackoverflow.com/users/5405684/lstbl"}, "reply_to_user": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1451496681, "post_id": 34534220, "comment_id": 56810062, "body": "Oh, nice addition. Thanks CoryKramer!"}], "tags": [], "owner": {"reputation": 357, "user_id": 5405684, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/oygjk.gif?s=128&g=1", "display_name": "lstbl", "link": "https://stackoverflow.com/users/5405684/lstbl"}, "is_accepted": false, "score": 2, "last_activity_date": 1451496733, "last_edit_date": 1451496733, "creation_date": 1451496562, "answer_id": 34534220, "question_id": 34534119, "link": "https://stackoverflow.com/questions/34534119/check-if-any-of-the-list-of-keys-are-present-in-a-dictionary/34534220#34534220", "title": "Check if any of the list of keys are present in a dictionary", "body": "<p>you could try using list comprehension in python:</p>\n\n<pre><code>if any([True for entry in your_list if entry in dict]):\n    --dostuff--\n</code></pre>\n\n<p>EDIT: CoryKramer suggested to remove the '[]' in order to make this a generator, rather than evaluate the entire list before checking if any elements are \"True\":</p>\n\n<pre><code>if any(True for entry in your_list if entry in dict):\n    --dostuff--\n</code></pre>\n"}], "owner": {"reputation": 12516, "user_id": 302268, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c3985dffcdc646b67ed0699a364639e2?s=128&d=identicon&r=PG", "display_name": "Mad Wombat", "link": "https://stackoverflow.com/users/302268/mad-wombat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 14902, "favorite_count": 1, "closed_date": 1451497307, "accepted_answer_id": 34534134, "answer_count": 3, "score": 8, "last_activity_date": 1511376652, "creation_date": 1451496149, "question_id": 34534119, "link": "https://stackoverflow.com/questions/34534119/check-if-any-of-the-list-of-keys-are-present-in-a-dictionary", "closed_reason": "Duplicate", "title": "Check if any of the list of keys are present in a dictionary", "body": "<p>I have a fixed list of strings. I need to check if any of these strings are a key in the dictionary (just need True or False). I could go </p>\n\n<pre>\nif 'asdf' in dict or 'qwer' in dict or 'zxcv' in dict ... :\n    ... do important secret stuff ...\n</pre>\n\n<p>but it seems suboptimal. Is there a more idiomatic way of doing this?</p>\n"}, {"tags": ["python", "big-o", "asymptotic-complexity"], "comments": [{"owner": {"reputation": 3409, "user_id": 3105485, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b4c41125ff9c7b20ca07d0845e7af7ae?s=128&d=identicon&r=PG&f=1", "display_name": "Caridorc", "link": "https://stackoverflow.com/users/3105485/caridorc"}, "edited": false, "score": 0, "creation_date": 1451499499, "post_id": 34534115, "comment_id": 56811512, "body": "I took your code and modified it quite a lot with some additions by me, can I post a CodeReview question with my version? (I&#39;ll give you attribution)"}, {"owner": {"reputation": 357, "user_id": 5405684, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/oygjk.gif?s=128&g=1", "display_name": "lstbl", "link": "https://stackoverflow.com/users/5405684/lstbl"}, "reply_to_user": {"reputation": 3409, "user_id": 3105485, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b4c41125ff9c7b20ca07d0845e7af7ae?s=128&d=identicon&r=PG&f=1", "display_name": "Caridorc", "link": "https://stackoverflow.com/users/3105485/caridorc"}, "edited": false, "score": 0, "creation_date": 1451499595, "post_id": 34534115, "comment_id": 56811545, "body": "Sure thing! I don&#39;t care"}, {"owner": {"reputation": 3409, "user_id": 3105485, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b4c41125ff9c7b20ca07d0845e7af7ae?s=128&d=identicon&r=PG&f=1", "display_name": "Caridorc", "link": "https://stackoverflow.com/users/3105485/caridorc"}, "edited": false, "score": 0, "creation_date": 1451503670, "post_id": 34534115, "comment_id": 56813489, "body": "You can see my version of this code (at first based on yours here) -&gt; <a href=\"http://codereview.stackexchange.com/questions/115453/koch-snowflake-in-python-with-turtle\" title=\"koch snowflake in python with turtle\">codereview.stackexchange.com/questions/115453/&hellip;</a> it turned out to need quite a lot of code to produce the animation just as I wanted it."}], "answers": [{"comments": [{"owner": {"reputation": 357, "user_id": 5405684, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/oygjk.gif?s=128&g=1", "display_name": "lstbl", "link": "https://stackoverflow.com/users/5405684/lstbl"}, "edited": false, "score": 0, "creation_date": 1451509434, "post_id": 34536261, "comment_id": 56816380, "body": "This makes sense to me now: The problem states that when the CPU sends information to the GPU, the rendering time of each triangle is equivalent. However, when the CPU takes care of the calculation by itself, the rendering time is reduced in proportion to the size of the triangle. Therefore, the entire computation is massively reduced in time because it changes a constant factor to an exponentially decreasing factor. Thank you so much Alex!"}], "tags": [], "owner": {"reputation": 826, "user_id": 1715099, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/623042c376d81e406a14cfd5607b127c?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1715099/alex"}, "is_accepted": true, "score": 1, "last_activity_date": 1451505423, "last_edit_date": 1451505423, "creation_date": 1451505042, "answer_id": 34536261, "question_id": 34534115, "link": "https://stackoverflow.com/questions/34534115/koch-snowflake-rendering-time-and-how-to-draw-a-snowflake-using-turtle/34536261#34536261", "title": "Koch snowflake rendering time (and how to draw a snowflake using turtle)", "body": "<p>As indicated by the comments on P.5 of the problem set, the approach taken by the CPU and the GPU are different.</p>\n\n<p>The CPU-only (without hardware acceleration) appproach is to first compute what needs to be drawn, and then send it to the GPU to draw. Since we are assuming that the cost to rasterize is bigger than the cost to gather the line segments, then the amount of time to draw the image will be dominated by the GPU, whose cost will be proportional to the number of pixels it actually has to draw.</p>\n\n<p>The GPU-CPU (with hardware acceleration) approach computes all the triangles, big and small, and then sends them to the GPU to draw the big triangle, delete the middle pixels, draw the smaller triangles, delete the unneeded pixels, and so on. Since drawing takes a long time, then the time GPU has to spend drawing and erasing will dominate the total amount of time spent; since most (asymptotically, 100%) of the pixels that are drawn will in the end be erased, then the total amount of time taken will be substantially more than simply the number of pixels that actually have to be drawn.</p>\n\n<p>In other words: the hardware-acceleration scenario dumps most of the work on to the GPU, which is much slower than the CPU. This is okay if the CPU has other things to work on while the GPU is doing its processing; however, this is not the case here; so, the CPU is just wasting cycles while the GPU is doing its drawing.</p>\n"}], "owner": {"reputation": 357, "user_id": 5405684, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/oygjk.gif?s=128&g=1", "display_name": "lstbl", "link": "https://stackoverflow.com/users/5405684/lstbl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 741, "favorite_count": 0, "accepted_answer_id": 34536261, "answer_count": 1, "score": 1, "last_activity_date": 1451505423, "creation_date": 1451496133, "question_id": 34534115, "link": "https://stackoverflow.com/questions/34534115/koch-snowflake-rendering-time-and-how-to-draw-a-snowflake-using-turtle", "title": "Koch snowflake rendering time (and how to draw a snowflake using turtle)", "body": "<p>I'm currently working through the online course material for the MIT 6.006 course for fun. I'm on problem set #2 (found <a href=\"http://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-006-introduction-to-algorithms-fall-2011/assignments/\" rel=\"nofollow\">here</a>) and had a question about the calculations for the asymptotic rendering time for the koch snowflake problem (problem #1). </p>\n\n<p>According to the solutions, when the CPU is responsible for the rendering and the calculation of coordinates, the asymptotic rendering time is faster than if the process is split up between the CPU and GPU. The math makes sense to me, but does anyone have an intuition about why this is true? </p>\n\n<p>In my mind, the CPU still has to calculate the coordinates to render the snowflake (Theta(4^n) time), and then has to render the image. In my mind, these should be additive, not multiplicative. </p>\n\n<p>However, the solutions state these are multiplicative, so since each triangle/line segment is shorter (for the last two subproblems in problem 1) the runtime is reduced to either Theta((4/3)^n) or Theta(1)!</p>\n\n<p>I'm not a computer scientist--this stuff is just a fun hobby for me. I'd really appreciate an answer from one of you geniuses out there :)</p>\n\n<p>Also, some fun I had while playing with the python turtle module. Heres some very imperfect code to draw a koch snowflake in python:</p>\n\n<pre><code>import turtle\n\ndef snowflake(n,size=200):\n    try: turtle.clear()\n    except: pass\n    turtle.tracer(0,0)\n    snowflake_edge(n,size)\n    turtle.right(120)\n    snowflake_edge(n,size)\n    turtle.right(120)\n    snowflake_edge(n,size)\n    turtle.update()\n    turtle.hideturtle()\n\ndef snowflake_edge(n,size=200):\n    if n==0:\n        turtle.forward(size)\n    else:\n        snowflake_edge(n-1,size/3.0)\n        turtle.left(60)\n        snowflake_edge(n-1,size/3.0)\n        turtle.right(120)\n        snowflake_edge(n-1,size/3.0)\n        turtle.left(60)\n        snowflake_edge(n-1,size/3.0)\n</code></pre>\n"}, {"tags": ["python", "string", "file", "file-io"], "comments": [{"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1451496364, "post_id": 34534106, "comment_id": 56809901, "body": "Consider reading and parsing the file just once. Store it&#39;s contents in a dictionary for fast lookups. The rest of the data can be parsed into something more friendly as well."}], "answers": [{"tags": [], "owner": {"reputation": 1584, "user_id": 4396927, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/6MEbT.jpg?s=128&g=1", "display_name": "vesche", "link": "https://stackoverflow.com/users/4396927/vesche"}, "is_accepted": true, "score": 1, "last_activity_date": 1451498583, "creation_date": 1451498583, "answer_id": 34534725, "question_id": 34534106, "link": "https://stackoverflow.com/questions/34534106/reading-strings-from-large-file-faster/34534725#34534725", "title": "reading strings from large file faster", "body": "<p>Since your input file is alphabetical, what you could do is create a dictionary that contains the line number where each letter starts, like this:</p>\n\n<pre><code>with open('parsed.txt', 'r') as f:\n    data = [line.strip() for line in f if line.strip()]\n\nindex = dict()\nfor i in range(len(data)):\n    line = data[i]\n    first_letter = line[0].lower()\n    if first_letter not in index:\n        index[first_letter] = i\n</code></pre>\n\n<p>You would want to add that code at the beginning so it only runs once before you start doing the searches. This way when you search for a word, you can have it start searching where its first letter starts, like this:</p>\n\n<pre><code>def find_postag(word, postag):\n    start = index[word[0].lower()]\n    for line in data[start:]:\n        # your code here\n        if all(i in line for i in (word,postag)):\n            if line.split(\" \")[0].startswith(word) and line.split(\" \")[1] == word+postag:\n                selectedword = line.split(\" \")[0]\n                break\n    return selectedword\n</code></pre>\n"}], "owner": {"reputation": 1321, "user_id": 2955896, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/zVEA2.jpg?s=128&g=1", "display_name": "JayGatsby", "link": "https://stackoverflow.com/users/2955896/jaygatsby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 34534725, "answer_count": 1, "score": 0, "last_activity_date": 1451498583, "creation_date": 1451496090, "last_edit_date": 1451496345, "question_id": 34534106, "link": "https://stackoverflow.com/questions/34534106/reading-strings-from-large-file-faster", "title": "reading strings from large file faster", "body": "<p>I have a large text file (<code>parsed.txt</code>) which includes almost 1.500.000 lines. Each line is in this format:</p>\n\n<pre><code>foobar foo[Noun]+lAr[A3pl]+[Pnon]+[Nom]\nloremipsum lorem[A1sg]+lAr[A3pl]+[Pl]+[Nom]\n</code></pre>\n\n<p>I'm giving the second field after space and get the first field before space with this function:</p>\n\n<pre><code>def find_postag(word,postag):\n    with open('parsed.txt',\"r\") as zemberek:    \n        for line in zemberek:\n            if all(i in line for i in (word,postag)):\n                if line.split(\" \")[0].startswith(word) and line.split(\" \")[1] == word+postag:\n                    selectedword = line.split(\" \")[0]\n                    break\n        return selectedword\n</code></pre>\n\n<p>However, it works too slow. I'm not sure how can I make the process faster. My idea is: The <code>parsed.txt</code> file is alphabetic ordered. If given <code>word</code> variable starts with \"z\" letter, it reads almost 900.000 lines unnecessarily. Maybe it will be faster if it will check from line 900.000 if the given <code>word</code> starts with \"z\" letter. Is there any better ideas and how can I implement?</p>\n"}, {"tags": ["python", "file", "analytics"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1451497287, "post_id": 34534104, "comment_id": 56810384, "body": "I&#39;m voting to close this question as off-topic because this is neither a code-writing nor tutorial service"}, {"owner": {"reputation": 18474, "user_id": 971141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33bad53cc72fd2873b4bd5b426fcc4c1?s=128&d=identicon&r=PG", "display_name": "David Ferenczy Rogo\u017ean", "link": "https://stackoverflow.com/users/971141/david-ferenczy-rogo%c5%bean"}, "edited": false, "score": 1, "creation_date": 1451499679, "post_id": 34534104, "comment_id": 56811584, "body": "Welcome to StackOverflow. Check the StackOverflow&#39;s help on asking questions first, please. Focus on <a href=\"http://stackoverflow.com/help/how-to-ask\">How to ask a good question</a> and <a href=\"http://stackoverflow.com/help/mcve\">How to create a Minimal, Complete, and Verifiable example</a>, but also other <a href=\"http://stackoverflow.com/help/asking\">help topics</a> would be useful."}, {"owner": {"reputation": 1, "user_id": 5609933, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WntUYdhO6bc/AAAAAAAAAAI/AAAAAAAAATQ/k697guol-3Q/photo.jpg?sz=128", "display_name": "Xuezeng Luke Yann Luke", "link": "https://stackoverflow.com/users/5609933/xuezeng-luke-yann-luke"}, "edited": false, "score": 0, "creation_date": 1451947505, "post_id": 34534104, "comment_id": 56948196, "body": "I searched my question in this website, and tried a bit of functions people mentioned, like replace, split, and also tried a couple of lib like Anacoda; also tried different ideas, like replace space with , or read from .csv instead of .txt, or read only numbers, but none of them are working; I am still a new in programming, so definitely need to think about more, and definitely need people&#39;s help thanks"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5609933, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WntUYdhO6bc/AAAAAAAAAAI/AAAAAAAAATQ/k697guol-3Q/photo.jpg?sz=128", "display_name": "Xuezeng Luke Yann Luke", "link": "https://stackoverflow.com/users/5609933/xuezeng-luke-yann-luke"}, "edited": false, "score": 0, "creation_date": 1451947408, "post_id": 34534425, "comment_id": 56948147, "body": "Thanks, but it did not work as we want, add a lot of empty element in each lists"}], "tags": [], "owner": {"reputation": 159, "user_id": 1394694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2577b8e70e6c85f3579fdecfc1485de8?s=128&d=identicon&r=PG", "display_name": "albf.unicamp", "link": "https://stackoverflow.com/users/1394694/albf-unicamp"}, "is_accepted": false, "score": -1, "last_activity_date": 1451497295, "creation_date": 1451497295, "answer_id": 34534425, "question_id": 34534104, "link": "https://stackoverflow.com/questions/34534104/how-to-read-integers-only-from-a-file-and-ignore-all-spaces-so-the-output-will/34534425#34534425", "title": "how to read integers only from a file, and ignore all spaces, so the output will be a table or list", "body": "<p>Try this:</p>\n\n<pre><code>with open('data', 'r') as content_file:\n    content = content_file.read()\n\ncontent = content.replace(\"\\n\", \"\").split(\" \")\ncontent = [content[i:i+7] for i in range(0, len(content), 7)]\nprint content\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5609933, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WntUYdhO6bc/AAAAAAAAAAI/AAAAAAAAATQ/k697guol-3Q/photo.jpg?sz=128", "display_name": "Xuezeng Luke Yann Luke", "link": "https://stackoverflow.com/users/5609933/xuezeng-luke-yann-luke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": -5, "last_activity_date": 1451947775, "creation_date": 1451496086, "last_edit_date": 1451947775, "question_id": 34534104, "link": "https://stackoverflow.com/questions/34534104/how-to-read-integers-only-from-a-file-and-ignore-all-spaces-so-the-output-will", "title": "how to read integers only from a file, and ignore all spaces, so the output will be a table or list", "body": "<p>many thanks</p>\n\n<p>the reason I asked this question is that I want to analyse a table which I pulled out from a network switch, I only need to analyse the number;\nbut there are a few difficulties, please see the table I pulled out as below\n1, the table contains random number of spaces between numbers and string, some are 5, and some are 12;\n2, I only need to analyze the number or integer, I want to eliminate the strings,\n3, its better to save this into 2-dimensional list, </p>\n\n<p>I searched my question in this website, and tried a bit of functions people mentioned, like replace, split, and also tried a couple of lib like Anacoda; also tried different ideas, like replace space with , or read from .csv instead of .txt, or read only numbers, but none of them are working; I am still a new in programming, so definitely need to think about more, and definitely need people's help thanks </p>\n\n<p>this is my current code to read the data, but can not analyze it</p>\n\n<p>lines = [line.rstrip('\\n') for line in open ('result.txt')] </p>\n\n<pre><code>Port        Align-Err     FCS-Err    Xmit-Err     Rcv-Err  UnderSize  OutDiscards \nGi1/0/1             0           0           0           0          0            0 \nGi1/0/2             0           0           0           0          0          443 \nGi1/0/3             0           0           0           0          0            0 \nGi1/0/4             0          80           0          86          0         4029 \nGi1/0/5             0           0           0           0          0            0 \nGi1/0/6             0           0           0           0          0            0 \nGi1/0/7             0           0           0           0          0            0 \nGi1/0/8             0           0           0           0          0          626 \nGi1/0/9             0           0           0           0          0            0 \nGi1/0/10            0           0           0           0          0            0 \nGi1/0/11            0           0           0           0          0            0 \nGi1/0/12            0           0           0           0          0            0 \nGi1/0/13            0           0           0           0          0          626 \nGi1/0/14            0           0           0           0          0          626 \nGi1/0/15            0           0           0           0          0            0 \nGi1/0/16            0           0           0           0          0          626 \nGi1/0/17            0           0           0           0          0            0 \nGi1/0/18            0           0           0           0          0            0 \nGi1/0/19            0           0           0           0          0            0 \nGi1/0/20            0           0           0           0          0            0 \nGi1/0/21            0           0           0           0          0            0 \nGi1/0/22            0           0           0           0          0           20 \nGi1/0/23            0           0           0           0          0            0 \nGi1/0/24            0           0           0           0          0            0 \nGi1/0/25            0           0           0           0          0            0 \nGi1/0/26            0           0           0           0          0            0 \nGi1/0/27            0           0           0           0          0            0 \nGi1/0/28            0           0           0           0          0            0 \nGi1/0/29            0           0           0           0          0            0 \nGi1/0/30            0           0           0           0          0            0 \nGi1/0/31            0           0           0           0          0            0 \nGi1/0/32            0           0           0           0          0            0 \nGi1/0/33            0           0           0           0          0            0 \nGi1/0/34            0           0           0           0          0            0 \nGi1/0/35            0           0           0           0          0            0 \nGi1/0/36            0           0           0           0          0            0 \nGi1/0/37            0           0           0           0          0            0 \nGi1/0/38            0           0           0           0          0            0 \nGi1/0/39            0           0           0           0          0            0 \nGi1/0/40            0           0           0           0          0            0 \nGi1/0/41            0           0           0           0          0            0 \nGi1/0/42            0           0           0           0          0           33 \nGi1/0/43            0           0           0           0          0            0 \nGi1/0/44            0           0           0           0          0            0 \nGi1/0/45            0           0           0           0          0            0 \nGi1/0/46            0           0           0           0          0            0 \nGi1/0/47            0           0           0           0          0            0 \nGi1/0/48            0           0           0           0          0            0 \nGi1/1/1             0           0           0           0          0          462 \nGi1/1/2             0           0           0           0          0          623 \nGi1/1/3             0           0           0           0          0           62 \nGi1/1/4             0           0           0           0          0           78 \nGi2/0/1             0           0           0           0          0            0 \nGi2/0/2             0           0           0           0          0            0 \nGi2/0/3             0           0           0           0          0            0 \nGi2/0/4             0           0           0           0          0            0 \nGi2/0/5             0           0           0           0          0            0 \nGi2/0/6             0           0           0           0          0            0 \nGi2/0/7             0           0           0           0          0            0 \nGi2/0/8             0           0           0           0          0          629 \nGi2/0/9             0           0           0           0          0            0 \nGi2/0/10            0           0           0           0          0            0 \nGi2/0/11            0           0           0           0          0            0 \nGi2/0/12            0           0           0           0          0            0 \nGi2/0/13            0           0           0           0          0          628 \nGi2/0/14            0           0           0           0          0            0 \nGi2/0/15            0           0           0           0          0            0 \nGi2/0/16            0           0           0           0          0            0 \nGi2/0/17            0           0           0           0          0            0 \nGi2/0/18            0           0           0           0          0            0 \nGi2/0/19            0           0           0           0          0            0 \nGi2/0/20            0           0           0           0          0            0 \nGi2/0/21            0           0           0           0          0            0 \nGi2/0/22            0           0           0           0          0            0 \nGi2/0/23            0           0           0           0          0            0 \nGi2/0/24            0           0           0           0          0            0 \nGi2/0/25            0           0           0           0          0            0 \nGi2/0/26            0           0           0           0          0            0 \nGi2/0/27            0           0           0           0          0            0 \nGi2/0/28            0           0           0           0          0            0 \nGi2/0/29            0           0           0           0          0            0 \nGi2/0/30            0           0           0           0          0            0 \nGi2/0/31            0           0           0           0          0            0 \nGi2/0/32            0           0           0           0          0            0 \nGi2/0/33            0           0           0           0          0            0 \nGi2/0/34            0           0           0           0          0            0 \nGi2/0/35            0           0           0           0          0            0 \nGi2/0/36            0           0           0           0          0            0 \nGi2/0/37            0           0           0           0          0            0 \nGi2/0/38            0           0           0           0          0            0 \nGi2/0/39            0           0           0           0          0            0 \nGi2/0/40            0           0           0           0          0            0 \nGi2/0/41            0           0           0           0          0            0 \nGi2/0/42            0           0           0           0          0            0 \nGi2/0/43            0           0           0           0          0          148 \nGi2/0/44            0           0           0           0          0            0 \nGi2/0/45            0           0           0           0          0            0 \nGi2/0/46            0           0           0           0          0            0 \nGi2/0/47            0           0           0           0          0            0 \nGi2/0/48            0           0           0           0          0            0 \nGi2/1/1             0           0           0           0          0            0 \nGi2/1/2             0           0           0           0          0            0 \nGi2/1/3             0           0           0           0          0            0 \nGi2/1/4             0           0           0           0          0            0 \nPo2                 0           0           0           0          0            0 \nPo11                0           0           0           0          0            0 \nPo12                0           0           0           0          0          181 \nPo13                0           0           0           0          0            0 \nPo14                0           0           0           0          0            0 \nPo20                0           0           0           0          0            0 \nPo21                0           0           0           0          0          462 \nPo22                0           0           0           0          0          623 \nPo23                0           0           0           0          0           62 \nPo24                0           0           0           0          0           78 \nPo25                0           0           0           0          0          443 \n</code></pre>\n"}, {"tags": ["python", "string", "sorting", "file-io"], "answers": [{"comments": [{"owner": {"reputation": 442, "user_id": 5327929, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/50ce276e9047a61240ca4f574d95b540?s=128&d=identicon&r=PG&f=1", "display_name": "Aurora_Titanium", "link": "https://stackoverflow.com/users/5327929/aurora-titanium"}, "edited": false, "score": 1, "creation_date": 1451496530, "post_id": 34534172, "comment_id": 56809990, "body": "The sorting fucntion works fine. However I am having trouble just sorting the &quot;g001&quot; Basically how to sort the data without the string&quot;Test DATA_&quot;?"}, {"owner": {"reputation": 3409, "user_id": 3105485, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b4c41125ff9c7b20ca07d0845e7af7ae?s=128&d=identicon&r=PG&f=1", "display_name": "Caridorc", "link": "https://stackoverflow.com/users/3105485/caridorc"}, "reply_to_user": {"reputation": 442, "user_id": 5327929, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/50ce276e9047a61240ca4f574d95b540?s=128&d=identicon&r=PG&f=1", "display_name": "Aurora_Titanium", "link": "https://stackoverflow.com/users/5327929/aurora-titanium"}, "edited": false, "score": 0, "creation_date": 1451496629, "post_id": 34534172, "comment_id": 56810036, "body": "@Aurora_Titanium (x.replace(&#39;TestData&#39;, &#39;&#39;) for x in xs"}, {"owner": {"reputation": 62965, "user_id": 3679490, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/70f98fb23b16862298ea208aedfd18ae?s=128&d=identicon&r=PG&f=1", "display_name": "vks", "link": "https://stackoverflow.com/users/3679490/vks"}, "reply_to_user": {"reputation": 442, "user_id": 5327929, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/50ce276e9047a61240ca4f574d95b540?s=128&d=identicon&r=PG&f=1", "display_name": "Aurora_Titanium", "link": "https://stackoverflow.com/users/5327929/aurora-titanium"}, "edited": false, "score": 0, "creation_date": 1451496629, "post_id": 34534172, "comment_id": 56810037, "body": "@Aurora_Titanium i have sorted based on key <code>integers</code> at the end after <code>g_</code>"}, {"owner": {"reputation": 442, "user_id": 5327929, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/50ce276e9047a61240ca4f574d95b540?s=128&d=identicon&r=PG&f=1", "display_name": "Aurora_Titanium", "link": "https://stackoverflow.com/users/5327929/aurora-titanium"}, "edited": false, "score": 2, "creation_date": 1483453822, "post_id": 34534172, "comment_id": 70097679, "body": "Sorry! I totally forgot about it. I checked back my old project and found out that I used your solution :) The python community is way better than the C or Java community. They downvote everything!"}], "tags": [], "owner": {"reputation": 62965, "user_id": 3679490, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/70f98fb23b16862298ea208aedfd18ae?s=128&d=identicon&r=PG&f=1", "display_name": "vks", "link": "https://stackoverflow.com/users/3679490/vks"}, "is_accepted": true, "score": 7, "last_activity_date": 1451496382, "creation_date": 1451496382, "answer_id": 34534172, "question_id": 34534083, "link": "https://stackoverflow.com/questions/34534083/how-to-split-a-mixed-string-with-numbers/34534172#34534172", "title": "How to split a mixed string with numbers", "body": "<p>You can do this using <code>re</code>.</p>\n\n<pre><code>import re\nx=\"Test DATA_g004, Test DATA_g003, Test DATA_g001, Test DATA_g002\"\nprint sorted(x.split(\",\"),key= lambda k:int(re.findall(\"(?&lt;=_g)\\d+$\",k)[0]))\n</code></pre>\n\n<p>Output:<code>[' Test DATA_g001', ' Test DATA_g002', ' Test DATA_g003', 'Test DATA_g004']</code></p>\n"}, {"comments": [{"owner": {"reputation": 5359, "user_id": 246801, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/54ac1ed63d1eb6bfc3eb0d89a8c2e135?s=128&d=identicon&r=PG", "display_name": "Zach Young", "link": "https://stackoverflow.com/users/246801/zach-young"}, "edited": false, "score": 1, "creation_date": 1451496912, "post_id": 34534248, "comment_id": 56810191, "body": "I appreciate your use of slicing over <code>re</code> for such simple and normal-looking data. I think it makes the answer, and what the OP was missing, clearer."}], "tags": [], "owner": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "is_accepted": false, "score": 3, "last_activity_date": 1451501853, "last_edit_date": 1592644375, "creation_date": 1451496662, "answer_id": 34534248, "question_id": 34534083, "link": "https://stackoverflow.com/questions/34534083/how-to-split-a-mixed-string-with-numbers/34534248#34534248", "title": "How to split a mixed string with numbers", "body": "<p>Yes, you can. You can sort by the last 3 digits in each test substring:</p>\n<pre><code># The string to be sorted by digits\ns = &quot;Test DATA_g004, Test DATA_g003, Test DATA_g001, Test DATA_g002&quot;\n\n# Create a list by splitting at commas, sort the last 3 characters of each element in the list as `ints`.\nl = sorted(s.split(','), key = lambda x: int(x[-3:]))\n\nprint l\n# [' Test DATA_g001', ' Test DATA_g002', ' Test DATA_g003', 'Test DATA_g004']\n</code></pre>\n<p>You'll want to trim the elements of <code>l</code> if that's important to you, but this will work for all <code>Test</code>s that end in 3 digits.</p>\n<p>If you don't want <code>Test DATA_</code>, you can do this:</p>\n<pre><code># The string to be sorted by digits\ns = &quot;Test DATA_g004, Test DATA_g003, Test DATA_g001, Test DATA_g002&quot;\n\n# Create a list by taking the last 4 characters of sorted strings with key as last 3 characters of each element in the list as `int`s.\nl = sorted((x[-4:] for x in s.split(',')), key = lambda x: int(x[-3:]))\n\nprint l\n# ['g001', 'g002', 'g003', 'g004']\n</code></pre>\n<p>If your data is well-formed (i.e., <code>g</code> followed by 3 digits), this will work quite well. Otherwise, use a regex from any of the other posted answers.</p>\n<hr />\n<p>Another alternative is to push strings into a <code>PriorityQueue</code> as you read them:</p>\n<h1>test.py</h1>\n<pre><code>from Queue import PriorityQueue\n\nq = PriorityQueue()\n\nwith open(&quot;example.txt&quot;) as f:\n  # For each line in the file\n  for line in f:\n    # Create a list from the stripped, split-at-comma string\n    for s in line.strip().split(','):\n      # Push the last four characters of each element in the list into the pq\n      q.put(s[-4:])\n\nwhile not q.empty():\n  print q.get()\n</code></pre>\n<p>The benefit of using a PQ is that it will add them in sorted order, which takes the burden off of you, and it is done in linear time.</p>\n<h1>example.txt</h1>\n<pre><code>Test DATA_g004, Test DATA_g003, Test DATA_g001, Test DATA_g002\n</code></pre>\n<p>And the output:</p>\n<pre><code>13:25 $ python test.py \ng001\ng002\ng003\ng004\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 3, "creation_date": 1451497748, "post_id": 34534252, "comment_id": 56810612, "body": "Very nice solution. Elegant and clean."}], "tags": [], "owner": {"reputation": 9677, "user_id": 4244780, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KUXr1.jpg?s=128&g=1", "display_name": "Iron Fist", "link": "https://stackoverflow.com/users/4244780/iron-fist"}, "is_accepted": false, "score": 4, "last_activity_date": 1451497229, "last_edit_date": 1451497229, "creation_date": 1451496678, "answer_id": 34534252, "question_id": 34534083, "link": "https://stackoverflow.com/questions/34534083/how-to-split-a-mixed-string-with-numbers/34534252#34534252", "title": "How to split a mixed string with numbers", "body": "<p>Retrieve all strings starting with <code>g</code> and then sort the list with <code>sorted</code>  </p>\n\n<pre><code>&gt;&gt;&gt; s = \"Test DATA_g004, Test DATA_g003, Test DATA_g001, Test DATA_g002, \"\n&gt;&gt;&gt; sorted(re.findall(r'g\\d+$', s))\n['g001', 'g002', 'g003', 'g004']\n</code></pre>\n\n<p>Another way, is to use only built-in methods:</p>\n\n<pre><code>&gt;&gt;&gt; l = [x.split('_')[1] for x in s.split(', ') if x]\n&gt;&gt;&gt; l\n['g004', 'g003', 'g001', 'g002']\n&gt;&gt;&gt; l.sort()\n&gt;&gt;&gt; l\n['g001', 'g002', 'g003', 'g004']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 12642, "user_id": 3019689, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cc10b8b7be444698cc0737fb52d51ce7?s=128&d=identicon&r=PG&f=1", "display_name": "jez", "link": "https://stackoverflow.com/users/3019689/jez"}, "is_accepted": false, "score": 2, "last_activity_date": 1451496757, "last_edit_date": 1495541786, "creation_date": 1451496757, "answer_id": 34534272, "question_id": 34534083, "link": "https://stackoverflow.com/questions/34534083/how-to-split-a-mixed-string-with-numbers/34534272#34534272", "title": "How to split a mixed string with numbers", "body": "<p>Sounds like you want \"natural sorting\".  The following, copied from <a href=\"https://stackoverflow.com/a/4836734/3019689\">https://stackoverflow.com/a/4836734/3019689</a> , might do it. </p>\n\n<pre><code>import re\n\ndef natural_sort(l): \n    convert = lambda text: int(text) if text.isdigit() else text.lower() \n    alphanum_key = lambda key: [ convert(c) for c in re.split('([0-9]+)', key) ] \n    return sorted(l, key = alphanum_key)\n</code></pre>\n\n<p>However, you keep saying you want to sort \"without the <code>Test DATA_</code>\" which suggests to me you're not telling the whole story.  If it was literally <code>Test DATA_</code> <em>every</em> time, it would not affect the sort: sort with or without it; it wouldn't matter.  I bet you're really worried about the fact that this string prefix actually varies from filename to filename, and you want to ignore it completely whatever it is and focus only on the numeric part.  If this is the case, you can substitute <code>else None</code> for <code>else text.lower()</code> in the above listing.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 10092244, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Xfl3jvLrVeY/AAAAAAAAAAI/AAAAAAAAhVM/InTKO1Yfj5c/photo.jpg?sz=128", "display_name": "Rohan Kuntoji", "link": "https://stackoverflow.com/users/10092244/rohan-kuntoji"}, "is_accepted": false, "score": 0, "last_activity_date": 1556123007, "creation_date": 1556123007, "answer_id": 55834597, "question_id": 34534083, "link": "https://stackoverflow.com/questions/34534083/how-to-split-a-mixed-string-with-numbers/55834597#55834597", "title": "How to split a mixed string with numbers", "body": "<pre><code>import re\n\ndef natural_sort(l): \n    convert = lambda text: int(text) if text.isdigit() else text.lower() \n    alphanum_key = lambda key: [ convert(c) for c in re.split('(\\d+)', key) ] \n    return sorted(l, key = alphanum_key)\n</code></pre>\n\n<p>This code snippet should work fine. This kind of sorting is called Natural sorting, which is usually used in Alphanumeric cases.</p>\n"}], "owner": {"reputation": 442, "user_id": 5327929, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/50ce276e9047a61240ca4f574d95b540?s=128&d=identicon&r=PG&f=1", "display_name": "Aurora_Titanium", "link": "https://stackoverflow.com/users/5327929/aurora-titanium"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 582, "favorite_count": 1, "accepted_answer_id": 34534172, "answer_count": 5, "score": 5, "last_activity_date": 1556123007, "creation_date": 1451495972, "last_edit_date": 1451519865, "question_id": 34534083, "link": "https://stackoverflow.com/questions/34534083/how-to-split-a-mixed-string-with-numbers", "title": "How to split a mixed string with numbers", "body": "<p>I have a data in a text file that contains \"Test DATA_g004, Test DATA_g003, Test DATA_g001, Test DATA_g002\".</p>\n\n<p>Is it possible to sort it without the word \"Test DATA_\" so the data will be sorted like g001, g002, g003 etc?</p>\n\n<p>I tried the <code>.split(\"Test DATA_\")</code> method but it doesn't work.</p>\n\n<pre><code>def readFile():\n    #try block will execute if the text file is found\n    try:\n        fileName = open(\"test.txt\",'r')\n        data = fileName.read().split(\"\\n\")\n        data.sort (key=alphaNum_Key) #alternative sort function\n        print(data)\n    #catch block will execute if no text file is found\n    except IOError:\n        print(\"Error: File do not exist\")\n        return\n\n#Human sorting\ndef alphaNum(text):\n    return int(text) if text.isdigit() else text\n\n#Human sorting\ndef alphaNum_Key(text):\n    return [ alphaNum(c) for c in re.split('(\\d+)', text) ]\n</code></pre>\n"}, {"tags": ["python", "raspberry-pi", "hardware"], "answers": [{"tags": [], "owner": {"reputation": 35789, "user_id": 1219295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BmJq2.png?s=128&g=1", "display_name": "Roland Smith", "link": "https://stackoverflow.com/users/1219295/roland-smith"}, "is_accepted": true, "score": 1, "last_activity_date": 1451512068, "last_edit_date": 1451512068, "creation_date": 1451511752, "answer_id": 34537687, "question_id": 34533913, "link": "https://stackoverflow.com/questions/34533913/python-raspberry-pi-piano-hat-permission-denied/34537687#34537687", "title": "Python Raspberry Pi Piano-HAT Permission denied", "body": "<p>You probably need to fix the access permissions to the I2C devices.\nHow that is done depends on the Linux version you're using. See e.g. <a href=\"https://www.raspberrypi.org/forums/viewtopic.php?p=238003\" rel=\"nofollow\">here</a>.</p>\n\n<p>If you are the only user of this device, you can set the permissions for these devices to include world readable/writeable (mode 666).</p>\n\n<p>From a security standpoint, it would be better to create a dedicated group (e.g. <code>i2c</code> or <code>devices</code>), set that group as the group of the device nodes in question (making them group readable/writable) and add yourself as a member of that group.</p>\n"}], "owner": {"reputation": 13, "user_id": 5731456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/172d60906120e0313ee1ec78fdb08670?s=128&d=identicon&r=PG&f=1", "display_name": "Fergus", "link": "https://stackoverflow.com/users/5731456/fergus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1010, "favorite_count": 0, "accepted_answer_id": 34537687, "answer_count": 1, "score": 1, "last_activity_date": 1564386137, "creation_date": 1451495276, "last_edit_date": 1564386137, "question_id": 34533913, "link": "https://stackoverflow.com/questions/34533913/python-raspberry-pi-piano-hat-permission-denied", "title": "Python Raspberry Pi Piano-HAT Permission denied", "body": "<p>I recently bought myself a Piano HAT to place on my Rasberry Pi. I am using this website to help me get started, however I have run into an issue...\n<a href=\"http://learn.pimoroni.com/tutorial/piano-hat/getting-started-with-piano-hat\" rel=\"nofollow\">http://learn.pimoroni.com/tutorial/piano-hat/getting-started-with-piano-hat</a>\nWhen I first ran the program (Under Your First Piano HAT), I encountered a lengthy error:</p>\n\n<pre><code>Traceback (most recent call last):\n\nFile\"/home/pi/My-First-Piano-HAT.py\", line 1, in &lt;module&gt;\n\nimport pianohat\n\nFile \"/usr/local/lib/python3.2/dist-packages/pianohat.py\", line 103 in &lt;module&gt;\n\n_piano_ctog = caplxxx.Cap1188(i2c_addr=0X28, alery pin=4)\n\nFile \"/usr/local/lib/python3.2/dist-packages/caplxxx.py\", line 239, in__init__\n\nself.ic2             = SMBus(i2c_bus)\n\nIOError:[Errno 13} Permission denied\n\n_________________________________________________________________________\n</code></pre>\n\n<hr>\n\n<p>If you could answer this question, and solve it for me, I would really appreciate it, as this problem has had me vexed for most of the day :-/</p>\n\n<p>Thanks</p>\n\n<p>Also, I <strong>have</strong> typed curl \"-sSL get.pimoroni.com/pianohat | bash\" into the terminal</p>\n"}, {"tags": ["python", "algorithm", "data-structures"], "comments": [{"owner": {"reputation": 7582, "user_id": 1608816, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/808f852fc552d0791ef2de213cc59f45?s=128&d=identicon&r=PG&f=1", "display_name": "tobspr", "link": "https://stackoverflow.com/users/1608816/tobspr"}, "edited": false, "score": 0, "creation_date": 1451495430, "post_id": 34533904, "comment_id": 56809390, "body": "If you really need the performance, you should consider doing this in C and make an interface for it. It would also help if you would describe the algorithm a bit more"}, {"owner": {"reputation": 130643, "user_id": 3923281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CNpoa.jpg?s=128&g=1", "display_name": "Alex Riley", "link": "https://stackoverflow.com/users/3923281/alex-riley"}, "edited": false, "score": 1, "creation_date": 1451495548, "post_id": 34533904, "comment_id": 56809446, "body": "How many duplicate numbers in this list do you have? You&#39;re listing all pairs of duplicates of a certain number: if there are many duplicates, the list of pairs could grow very, very large..."}, {"owner": {"reputation": 55324, "user_id": 977038, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/f3004677e3b024b4b1944dfd93fb9849?s=128&d=identicon&r=PG", "display_name": "Abhijit", "link": "https://stackoverflow.com/users/977038/abhijit"}, "edited": false, "score": 1, "creation_date": 1451496246, "post_id": 34533904, "comment_id": 56809837, "body": "Can you please explain what is that you want to solve. Processing a list of 10 million elements with an O(n^2) algorithm smells to be a X-Y problem."}], "answers": [{"tags": [], "owner": {"reputation": 69452, "user_id": 953482, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/T3HH6.png?s=128&g=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/953482/kevin"}, "is_accepted": true, "score": 1, "last_activity_date": 1451495795, "creation_date": 1451495795, "answer_id": 34534040, "question_id": 34533904, "link": "https://stackoverflow.com/questions/34533904/algorithm-to-extract-edge-list-efficiently-from-a-vector/34534040#34534040", "title": "Algorithm to extract edge list efficiently from a vector", "body": "<p>Group the indices together based on value, then iterate through pairs of indices using <code>combinations</code>.</p>\n\n<pre><code>from collections import defaultdict\nfrom itertools import combinations\n\nR = [1,3,1,6,9,6,1,2,3,0]\nd = defaultdict(list)\nfor idx,item in enumerate(R,1):\n    d[item].append(idx)\n\nresult = []\nfor indices in d.itervalues():\n    result.extend(combinations(indices, 2))\n\nprint result\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>[(1, 3), (1, 7), (3, 7), (2, 9), (4, 6)]\n</code></pre>\n\n<p>Populating the defaultdict takes O(len(R)) time on average. Finding combinations is O(N!) time, where N is the number of indices in the largest group.</p>\n"}, {"tags": [], "owner": {"reputation": 11191, "user_id": 5224926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f280a3c82415bdba68680536e277e19b?s=128&d=identicon&r=PG&f=1", "display_name": "Randy", "link": "https://stackoverflow.com/users/5224926/randy"}, "is_accepted": false, "score": 0, "last_activity_date": 1451497426, "last_edit_date": 1451497426, "creation_date": 1451495802, "answer_id": 34534041, "question_id": 34533904, "link": "https://stackoverflow.com/questions/34533904/algorithm-to-extract-edge-list-efficiently-from-a-vector/34534041#34534041", "title": "Algorithm to extract edge list efficiently from a vector", "body": "<p>My approach would be to do a pass over the list to find the elements with the same value and store them into new lists, then find the elements that appear more than once and collect the combinations:</p>\n\n<pre><code>In [18]: from collections import defaultdict\n\nIn [19]: d = defaultdict(list)\n\nIn [20]: for i, e in enumerate(R, 1):\n   ....:     d[e].append(i)\n   ....:\n\nIn [21]: from itertools import combinations\n\nIn [22]: from itertools import chain\n\nIn [23]: list(chain(*[list(combinations(v,2)) for v in d.values() if len(v) &gt; 1]))\nOut[23]: [(1, 3), (1, 7), (3, 7), (2, 9), (4, 6)]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 159, "user_id": 1394694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2577b8e70e6c85f3579fdecfc1485de8?s=128&d=identicon&r=PG", "display_name": "albf.unicamp", "link": "https://stackoverflow.com/users/1394694/albf-unicamp"}, "is_accepted": false, "score": 0, "last_activity_date": 1451496579, "creation_date": 1451496579, "answer_id": 34534226, "question_id": 34533904, "link": "https://stackoverflow.com/questions/34533904/algorithm-to-extract-edge-list-efficiently-from-a-vector/34534226#34534226", "title": "Algorithm to extract edge list efficiently from a vector", "body": "<p>My simple solution:</p>\n\n<pre><code>def extract(edges):\n    dic = {}\n    for i in range(len(edges)):\n        if edges[i] in dic.keys():\n            dic[edges[i]].append(i+1)\n        else:\n            dic[edges[i]] = [i+1]\n\n    res = []\n    for k in sorted(dic.keys()):\n        res += combinations(dic[k])\n\n    return res\n\ndef combinations(positions):\n    ret = []\n    print positions\n    for i in range(len(positions)):\n        for j in range(i+1, len(positions)):\n            ret.append([\"e\"+str(positions[i]), \"e\"+str(positions[j])])\n    print ret\n    return ret\n\nR = [1,3,1,6,9,6,1,2,3,0]\nres = extract(R)\nprint res\n</code></pre>\n\n<p>As we can't see your input, you might encounter problems if there are many combinations. One thing to try is <a href=\"http://pypy.org/\" rel=\"nofollow\">pypy</a>, which sometimes gives me a (free) speed up.</p>\n"}, {"tags": [], "owner": {"reputation": 1351, "user_id": 3323394, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/hPS1U.jpg?s=128&g=1", "display_name": "Arthur Hv", "link": "https://stackoverflow.com/users/3323394/arthur-hv"}, "is_accepted": false, "score": 0, "last_activity_date": 1451496687, "creation_date": 1451496687, "answer_id": 34534253, "question_id": 34533904, "link": "https://stackoverflow.com/questions/34533904/algorithm-to-extract-edge-list-efficiently-from-a-vector/34534253#34534253", "title": "Algorithm to extract edge list efficiently from a vector", "body": "<p>Unless I understood it the wrong way, the simplest and optimal way to do this is to use a dictionary of already encountered values.</p>\n\n<pre><code>elem_dict = {}\noutput = []\nfor i, elem in zip (range (length(R))),R):\n    if elem_dict.has_key (elem):\n        output += [[duplicate, i] for duplicate in elem_dict[elem]]\n    else\n        elem_dict[elem] = set ()\n    elem_dict[elem].add (i)\n\nprint output #[[0, 2], [3, 5], [0, 6], [2, 6], [1, 8]]\n</code></pre>\n\n<p>Should be O(n log (n)) in average case, if I'm not mistaken, unless you have a lot of similar values in which case your output is O(n^2) anyway.</p>\n"}], "owner": {"reputation": 1343, "user_id": 797999, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6d0e3b58a20a0c4d753ef9552ba189ff?s=128&d=identicon&r=PG", "display_name": "DonDyck", "link": "https://stackoverflow.com/users/797999/dondyck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 34534040, "answer_count": 4, "score": 0, "last_activity_date": 1451497426, "creation_date": 1451495243, "question_id": 34533904, "link": "https://stackoverflow.com/questions/34533904/algorithm-to-extract-edge-list-efficiently-from-a-vector", "title": "Algorithm to extract edge list efficiently from a vector", "body": "<p>I have a long list (~10 million elements) and the elements that have repeated values are pairs. I want to extract the list of pairs from the list, e.g. </p>\n\n<pre><code>R = [1,3,1,6,9,6,1,2,3,0]\n</code></pre>\n\n<p>will spit out list of pairs</p>\n\n<pre><code>P = [[e1,e3],[e1,e7],[e3,e7],[e4,e6],[e2,e9]]\n</code></pre>\n\n<p>What is the efficient algorithm to achieve this for a long list?</p>\n"}, {"tags": ["python", "drag-and-drop", "pyqt", "pyqt4", "qtablewidget"], "answers": [{"comments": [{"owner": {"reputation": 1164, "user_id": 3119546, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/6d51080abc8a98ac0fce744fcc1f2d2a?s=128&d=identicon&r=PG&f=1", "display_name": "sudobangbang", "link": "https://stackoverflow.com/users/3119546/sudobangbang"}, "edited": false, "score": 0, "creation_date": 1451917339, "post_id": 34569360, "comment_id": 56931565, "body": "This does seem to work, however may I suggest you add a check before creating and setting the <code>QTableWidgetItem</code>. This check will simply read: <code>if(sender.item(srow,j) is not None):</code>  Otherwise if one cell of the row is empty their is major data loss upon drop. Thanks for your answer, I will mark it as correct."}, {"owner": {"reputation": 2010, "user_id": 4850610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3475e1d44848b8b271991d6b9b2c764b?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Lutsenko", "link": "https://stackoverflow.com/users/4850610/alexander-lutsenko"}, "reply_to_user": {"reputation": 1164, "user_id": 3119546, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/6d51080abc8a98ac0fce744fcc1f2d2a?s=128&d=identicon&r=PG&f=1", "display_name": "sudobangbang", "link": "https://stackoverflow.com/users/3119546/sudobangbang"}, "edited": false, "score": 1, "creation_date": 1452145084, "post_id": 34569360, "comment_id": 57041583, "body": "@sudobangbang thanks for your remark. I overlooked this problem, it occurs with python 2, which uses the old PyQt API v1 by default. The check has been added."}], "tags": [], "owner": {"reputation": 2010, "user_id": 4850610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3475e1d44848b8b271991d6b9b2c764b?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Lutsenko", "link": "https://stackoverflow.com/users/4850610/alexander-lutsenko"}, "is_accepted": true, "score": 3, "last_activity_date": 1452143411, "last_edit_date": 1452143411, "creation_date": 1451759923, "answer_id": 34569360, "question_id": 34533878, "link": "https://stackoverflow.com/questions/34533878/drag-and-dropping-rows-between-two-separate-qtablewidgets/34569360#34569360", "title": "Drag and Dropping Rows between two separate QTableWidgets", "body": "<p>I took a look at the @three_pineapples' code, didn't understand a half and deleted that half. Works with multiple row selection.</p>\n\n<pre><code>import sys\nfrom PyQt4.QtGui import *\n\nclass TableWidgetDragRows(QTableWidget):\n    def __init__(self, *args, **kwargs):\n        super().__init__(*args, **kwargs)\n\n        self.setDragEnabled(True)\n        self.setAcceptDrops(True)\n        self.setSelectionBehavior(QAbstractItemView.SelectRows)\n        self.setDragDropOverwriteMode(False)\n        # self.setSelectionMode(QAbstractItemView.SingleSelection)\n\n        self.last_drop_row = None\n\n    # Override this method to get the correct row index for insertion\n    def dropMimeData(self, row, col, mimeData, action):\n        self.last_drop_row = row\n        return True\n\n\n    def dropEvent(self, event):\n        # The QTableWidget from which selected rows will be moved\n        sender = event.source()\n\n        # Default dropEvent method fires dropMimeData with appropriate parameters (we're interested in the row index).\n        super().dropEvent(event)\n        # Now we know where to insert selected row(s)\n        dropRow = self.last_drop_row\n\n        selectedRows = sender.getselectedRowsFast()\n\n        # Allocate space for transfer\n        for _ in selectedRows:\n            self.insertRow(dropRow)\n\n        # if sender == receiver (self), after creating new empty rows selected rows might change their locations\n        sel_rows_offsets = [0 if self != sender or srow &lt; dropRow else len(selectedRows) for srow in selectedRows]\n        selectedRows = [row + offset for row, offset in zip(selectedRows, sel_rows_offsets)]\n\n        # copy content of selected rows into empty ones\n        for i, srow in enumerate(selectedRows):\n            for j in range(self.columnCount()):\n                item = sender.item(srow, j)\n                if item:\n                    source = QTableWidgetItem(item)\n                    self.setItem(dropRow + i, j, source)\n\n        # delete selected rows\n        for srow in reversed(selectedRows):\n            sender.removeRow(srow)\n\n        event.accept()\n\n\n    def getselectedRowsFast(self):\n        selectedRows = []\n        for item in self.selectedItems():\n            if item.row() not in selectedRows:\n                selectedRows.append(item.row())\n        selectedRows.sort()\n        return selectedRows\n\n\nclass Window(QWidget):\n    def __init__(self):\n        super().__init__()\n\n        layout = QHBoxLayout()\n        self.setLayout(layout)\n\n        self.table_widgets = []\n        for _ in range(3):\n            tw = TableWidgetDragRows()\n            tw.setColumnCount(2)\n            tw.setHorizontalHeaderLabels(['Colour', 'Model'])\n\n            self.table_widgets.append(tw)\n            layout.addWidget(tw)\n\n        filled_widget = self.table_widgets[0]\n        items = [('Red', 'Toyota'), ('Blue', 'RV'), ('Green', 'Beetle')]\n        for i, (colour, model) in enumerate(items):\n            c = QTableWidgetItem(colour)\n            m = QTableWidgetItem(model)\n\n            filled_widget.insertRow(filled_widget.rowCount())\n            filled_widget.setItem(i, 0, c)\n            filled_widget.setItem(i, 1, m)\n\n\nif __name__ == '__main__':\n    app = QApplication(sys.argv)\n    window = Window()\n    window.show()\n    sys.exit(app.exec_())\n</code></pre>\n"}], "owner": {"reputation": 1164, "user_id": 3119546, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/6d51080abc8a98ac0fce744fcc1f2d2a?s=128&d=identicon&r=PG&f=1", "display_name": "sudobangbang", "link": "https://stackoverflow.com/users/3119546/sudobangbang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2309, "favorite_count": 0, "accepted_answer_id": 34569360, "answer_count": 1, "score": 3, "last_activity_date": 1452143411, "creation_date": 1451495160, "last_edit_date": 1592644375, "question_id": 34533878, "link": "https://stackoverflow.com/questions/34533878/drag-and-dropping-rows-between-two-separate-qtablewidgets", "title": "Drag and Dropping Rows between two separate QTableWidgets", "body": "<p><em>Background:</em></p>\n<p>I have two separate <code>QTableWidget</code>s on my <code>Main Window</code>. Both of which are dynamically added in python. I have implemented pyqt code, which can be found  under three_pineapples solution <a href=\"https://stackoverflow.com/questions/26227885/drag-and-drop-rows-within-qtablewidget\">here</a>.</p>\n<p><em>My Problem</em></p>\n<p>I want to be able to drag and drop table rows from one table, to another. For example:</p>\n<p>If I attempt to drag Item B from the <strong>Left Table</strong> into the <strong>Right Table</strong></p>\n<p><a href=\"https://i.stack.imgur.com/gF2ym.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gF2ym.png\" alt=\"Example pt. 1\" /></a></p>\n<p>This would be the outcome</p>\n<p><a href=\"https://i.stack.imgur.com/QxSdc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QxSdc.png\" alt=\"Example pt. 2\" /></a></p>\n<p>Any suggestions on how to get this desired behavior?</p>\n"}, {"tags": ["python", "matplotlib", "shapes", "multiple-axes"], "comments": [{"owner": {"reputation": 51822, "user_id": 1552748, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7840b7a3579d2a7065d5c0aa804b5b92?s=128&d=identicon&r=PG", "display_name": "Paul H", "link": "https://stackoverflow.com/users/1552748/paul-h"}, "edited": false, "score": 0, "creation_date": 1451495110, "post_id": 34533806, "comment_id": 56809211, "body": "<code>plt.[whatever]</code> always operates on the most current axes object. If you have three different axes, you should call <code>plot</code> on them directly."}, {"owner": {"reputation": 9, "user_id": 5731434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3172d7be3e59a0e3e4607e595e488de8?s=128&d=identicon&r=PG&f=1", "display_name": "user5731434", "link": "https://stackoverflow.com/users/5731434/user5731434"}, "reply_to_user": {"reputation": 51822, "user_id": 1552748, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7840b7a3579d2a7065d5c0aa804b5b92?s=128&d=identicon&r=PG", "display_name": "Paul H", "link": "https://stackoverflow.com/users/1552748/paul-h"}, "edited": false, "score": 0, "creation_date": 1451497774, "post_id": 34533806, "comment_id": 56810632, "body": "when i tried that, it says name error: plot not defined."}, {"owner": {"reputation": 51822, "user_id": 1552748, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7840b7a3579d2a7065d5c0aa804b5b92?s=128&d=identicon&r=PG", "display_name": "Paul H", "link": "https://stackoverflow.com/users/1552748/paul-h"}, "edited": false, "score": 0, "creation_date": 1451498811, "post_id": 34533806, "comment_id": 56811210, "body": "no, you have to do <code>ax1.plot(...); ax2.plot(...); ....</code> etc"}, {"owner": {"reputation": 51822, "user_id": 1552748, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7840b7a3579d2a7065d5c0aa804b5b92?s=128&d=identicon&r=PG", "display_name": "Paul H", "link": "https://stackoverflow.com/users/1552748/paul-h"}, "edited": false, "score": 0, "creation_date": 1451498888, "post_id": 34533806, "comment_id": 56811248, "body": "you also you break this question up. you have to two very orthogonal concepts: one is about mathematics and the other is about a visualization tool."}, {"owner": {"reputation": 9, "user_id": 5731434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3172d7be3e59a0e3e4607e595e488de8?s=128&d=identicon&r=PG&f=1", "display_name": "user5731434", "link": "https://stackoverflow.com/users/5731434/user5731434"}, "reply_to_user": {"reputation": 51822, "user_id": 1552748, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7840b7a3579d2a7065d5c0aa804b5b92?s=128&d=identicon&r=PG", "display_name": "Paul H", "link": "https://stackoverflow.com/users/1552748/paul-h"}, "edited": false, "score": 0, "creation_date": 1451500295, "post_id": 34533806, "comment_id": 56811847, "body": "Thanks for the sugeestion @PaulH . So any tips about changing the orientation of helix?"}, {"owner": {"reputation": 51822, "user_id": 1552748, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7840b7a3579d2a7065d5c0aa804b5b92?s=128&d=identicon&r=PG", "display_name": "Paul H", "link": "https://stackoverflow.com/users/1552748/paul-h"}, "edited": false, "score": 0, "creation_date": 1451503728, "post_id": 34533806, "comment_id": 56813523, "body": "no -- that&#39;s a separate issue and should have its own question"}], "owner": {"reputation": 9, "user_id": 5731434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3172d7be3e59a0e3e4607e595e488de8?s=128&d=identicon&r=PG&f=1", "display_name": "user5731434", "link": "https://stackoverflow.com/users/5731434/user5731434"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 880, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1451494943, "creation_date": 1451494943, "question_id": 34533806, "link": "https://stackoverflow.com/questions/34533806/draw-more-than-one-helix-using-matplotlib", "title": "Draw more than one helix using matplotlib", "body": "<p>I am trying to draw helix (shape of spring). I was able to draw a single helix using axes3D and matplotlib. \nBelow is my code:</p>\n\n<pre><code>from mpl_toolkits.mplot3d import Axes3D\nfrom matplotlib import rcParams\nimport matplotlib.pyplot as plt\nimport numpy as np\n\ntheta = np.linspace(-9 * np.pi, 9 * np.pi, 300)\n\nradius = 5.0\nx = radius*np.cos(theta)\n\nx=[]\nfor i in theta:\n    if (i &lt; 4.5* np.pi):\n        x.append(radius*np.cos(i))\n    else:\n        x.append((radius+2.0) * np.cos(i))\n\ny=[]\nfor j in theta:\n    if (j &lt; 4.5* np.pi):\n        y.append(radius*np.sin(j))\n    else:\n        y.append((radius+2.0) * np.sin(j))\n\nfig = plt.figure()\nax = fig.gca(projection='3d')\nax.plot(x, y, theta, \n        label = 'Parametric Curve', # label of the curve\n        color = 'DarkMagenta',      # colour of the curve\n        linewidth = 1,            # thickness of the line\n        linestyle = '-'            # available styles - -- -. :\n        )\nrcParams['legend.fontsize'] = 11    # legend font size\nax.legend()                         # adds the legend\n\n\n\nax.set_xlabel('X axis')\nax.set_xlim(-5, 5)\nax.set_ylabel('Y axis')\nax.set_ylim(-10, 10)\nax.set_zlabel('Z axis')\nax.set_zlim(-9*np.pi, 9*np.pi)\n\nax.set_title('3D line plot,\\n parametric curve', va='bottom')\n\nplt.show()                                  # display the plot\n</code></pre>\n\n<p>I have two questions:</p>\n\n<p>1) I was able to adjust the radius of my spiral but was not able to adjust the number of pitch. What changes should i make so I can have 19 circular rings, instead of 9.</p>\n\n<p>2) After certain point(ie. end point of helix), I want to increase my radius and create a right-handed helix that goes all the way to bottom to the starting point of my first helix ( my first helix was left-handed helix). I was able to increase my radius but was not able to change the orientation of my helix and was not able to move it downwards.</p>\n\n<p>After reading the documentation of matplotlib I could find:\n<em>The example below illustrates a plotting several lines with different format styles in one command using arrays.</em></p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\n\n# evenly sampled time at 200ms intervals\nt = np.arange(0., 5., 0.2)\n\n# red dashes, blue squares and green triangles\nplt.plot(t, t, 'r--', t, t**2, 'bs', t, t**3, 'g^')\nplt.show() \n</code></pre>\n\n<p>Why cannot I do the same when there are three axes?</p>\n"}, {"tags": ["python", "google-app-engine", "google-compute-engine", "gcloud", "google-managed-vm"], "comments": [{"owner": {"reputation": 7498, "user_id": 3783770, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/8FsfL.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/3783770/kris"}, "edited": false, "score": 0, "creation_date": 1451497323, "post_id": 34533783, "comment_id": 56810404, "body": "Try to add the <code>--zone</code> flag on deployment."}, {"owner": {"reputation": 2183, "user_id": 902525, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Qzj7i.jpg?s=128&g=1", "display_name": "Lindauson", "link": "https://stackoverflow.com/users/902525/lindauson"}, "reply_to_user": {"reputation": 7498, "user_id": 3783770, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/8FsfL.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/3783770/kris"}, "edited": false, "score": 0, "creation_date": 1451497681, "post_id": 34533783, "comment_id": 56810576, "body": "@add <code>--zone</code> flag: Throws <code>ERROR: (gcloud.preview.app.deploy) unrecognized arguments: --zone</code>"}, {"owner": {"reputation": 879, "user_id": 372128, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rAwcJ.jpg?s=128&g=1", "display_name": "Valentin", "link": "https://stackoverflow.com/users/372128/valentin"}, "edited": false, "score": 0, "creation_date": 1451502257, "post_id": 34533783, "comment_id": 56812830, "body": "Can you please list the output of <code>gcloud info</code>?"}, {"owner": {"reputation": 2183, "user_id": 902525, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Qzj7i.jpg?s=128&g=1", "display_name": "Lindauson", "link": "https://stackoverflow.com/users/902525/lindauson"}, "reply_to_user": {"reputation": 879, "user_id": 372128, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rAwcJ.jpg?s=128&g=1", "display_name": "Valentin", "link": "https://stackoverflow.com/users/372128/valentin"}, "edited": false, "score": 0, "creation_date": 1451505144, "post_id": 34533783, "comment_id": 56814206, "body": "@Valentin: I&#39;ve added the <code>gcloud info</code> response as an edit to my original question."}], "answers": [{"comments": [{"owner": {"reputation": 2183, "user_id": 902525, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Qzj7i.jpg?s=128&g=1", "display_name": "Lindauson", "link": "https://stackoverflow.com/users/902525/lindauson"}, "edited": false, "score": 0, "creation_date": 1451505318, "post_id": 34535566, "comment_id": 56814290, "body": "Thanks for all your help with this Valentin. I tried the above but the result is the same."}, {"owner": {"reputation": 879, "user_id": 372128, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rAwcJ.jpg?s=128&g=1", "display_name": "Valentin", "link": "https://stackoverflow.com/users/372128/valentin"}, "reply_to_user": {"reputation": 2183, "user_id": 902525, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Qzj7i.jpg?s=128&g=1", "display_name": "Lindauson", "link": "https://stackoverflow.com/users/902525/lindauson"}, "edited": false, "score": 0, "creation_date": 1451510558, "post_id": 34535566, "comment_id": 56816932, "body": "Sounds like a bug. Can you please go to the documentation page and file a bug? Alternatively you can file one with <code>gcloud feedback</code> after running the command that didn&#39;t work."}, {"owner": {"reputation": 2183, "user_id": 902525, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Qzj7i.jpg?s=128&g=1", "display_name": "Lindauson", "link": "https://stackoverflow.com/users/902525/lindauson"}, "edited": false, "score": 0, "creation_date": 1451515714, "post_id": 34535566, "comment_id": 56819153, "body": "This error has been filed as Bug/Issue <a href=\"https://code.google.com/p/google-cloud-sdk/issues/detail?id=452\" rel=\"nofollow noreferrer\">452</a>"}], "tags": [], "owner": {"reputation": 879, "user_id": 372128, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rAwcJ.jpg?s=128&g=1", "display_name": "Valentin", "link": "https://stackoverflow.com/users/372128/valentin"}, "is_accepted": false, "score": 2, "last_activity_date": 1451502218, "creation_date": 1451502218, "answer_id": 34535566, "question_id": 34533783, "link": "https://stackoverflow.com/questions/34533783/google-cloud-deployment-error-response-13-could-not-pick-a-region-and-or-zone/34535566#34535566", "title": "Google Cloud Deployment Error Response: [13] Could not pick a region and/or zone", "body": "<p>Try <code>gcloud config set compute/zone us-central1-f</code></p>\n"}, {"comments": [{"owner": {"reputation": 2183, "user_id": 902525, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Qzj7i.jpg?s=128&g=1", "display_name": "Lindauson", "link": "https://stackoverflow.com/users/902525/lindauson"}, "edited": false, "score": 0, "creation_date": 1451925149, "post_id": 34559660, "comment_id": 56936418, "body": "I marked this as the correct answer because it is now Google&#39;s official resolution in lieu of resolving the issue on their backend. See Bug/Issue <a href=\"https://code.google.com/p/google-cloud-sdk/issues/detail?id=452\" rel=\"nofollow noreferrer\">452</a>."}, {"owner": {"reputation": 2183, "user_id": 902525, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Qzj7i.jpg?s=128&g=1", "display_name": "Lindauson", "link": "https://stackoverflow.com/users/902525/lindauson"}, "edited": false, "score": 0, "creation_date": 1451926215, "post_id": 34559660, "comment_id": 56937058, "body": "Also, if you need to maintain your original project name see comment #8 on Bug/Issue <a href=\"https://code.google.com/p/google-cloud-sdk/issues/detail?id=452\" rel=\"nofollow noreferrer\">452</a>."}], "tags": [], "owner": {"reputation": 2183, "user_id": 902525, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Qzj7i.jpg?s=128&g=1", "display_name": "Lindauson", "link": "https://stackoverflow.com/users/902525/lindauson"}, "is_accepted": true, "score": 1, "last_activity_date": 1451679349, "creation_date": 1451679349, "answer_id": 34559660, "question_id": 34533783, "link": "https://stackoverflow.com/questions/34533783/google-cloud-deployment-error-response-13-could-not-pick-a-region-and-or-zone/34559660#34559660", "title": "Google Cloud Deployment Error Response: [13] Could not pick a region and/or zone", "body": "<p>Recreating the project seems to have resolved the issue. </p>\n\n<p>I haven't been able to identify a difference between the two project settings. I imagine the error might have occurred on Google's end while setting up the original project.</p>\n"}], "owner": {"reputation": 2183, "user_id": 902525, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Qzj7i.jpg?s=128&g=1", "display_name": "Lindauson", "link": "https://stackoverflow.com/users/902525/lindauson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 496, "favorite_count": 0, "accepted_answer_id": 34559660, "answer_count": 2, "score": 0, "last_activity_date": 1451679349, "creation_date": 1451494806, "last_edit_date": 1451504905, "question_id": 34533783, "link": "https://stackoverflow.com/questions/34533783/google-cloud-deployment-error-response-13-could-not-pick-a-region-and-or-zone", "title": "Google Cloud Deployment Error Response: [13] Could not pick a region and/or zone", "body": "<p>Context: Following, \"<a href=\"https://cloud.google.com/python/getting-started/using-pub-sub?hl=en\" rel=\"nofollow\">How to Use Pub/Sub with Python</a>\".</p>\n\n<p>Problem: The following error is being thrown while Deploying an app to Google Cloud Platform:</p>\n\n<p><code>Error Response: [13] Could not pick a region and/or zone</code></p>\n\n<p>Resolutions attempted:</p>\n\n<ol>\n<li>Ran <code>gcloud init</code> to re-apply region/zone settings. </li>\n<li>Set <code>ZONE</code> in <code>config.py</code> to \"us-central1-f\".</li>\n<li>Reset Google Cloud API with <code>gcloud config set app/use_appengine_api false</code>.</li>\n</ol>\n\n<hr>\n\n<p><code>gcloud info</code> response:</p>\n\n<pre><code>Google Cloud SDK [90.0.0]\n\nPlatform: [Mac OS X, x86_64]\nPython Version: [2.7.10 (default, Oct 23 2015, 18:05:06)  [GCC 4.2.1 Compatible Apple LLVM 7.0.0 (clang-700.0.59.5)]]\nPython Location: [/Users/.../getting-started-python/6-pubsub/env/bin/python2]\nSite Packages: [Enabled]\n\nInstallation Root: [/Users/user/google-cloud-sdk]\nInstalled Components:\n  core: [2015.12.07]\n  core-nix: [2015.11.24]\n  gcloud: []\n  gsutil-nix: [4.15]\n  gsutil: [4.16]\n  bq: [2.0.18]\n  bq-nix: [2.0.18]\nSystem PATH: [...]\nCloud SDK on PATH: [True]\n\nInstallation Properties: [/Users/user/google-cloud-sdk/properties]\nUser Config Directory: [/Users/user/.config/gcloud]\nUser Properties: [/Users/user/.config/gcloud/properties]\nCurrent Workspace: [None]\nWorkspace Config Directory: [None]\nWorkspace Properties: [None]\n\nAccount: [*******]\nProject: [*******]\n\nCurrent Properties:\n  [core]\n    project: [*******]\n    account: [*******]\n    disable_usage_reporting: [True]\n  [app]\n    use_appengine_api: [true]\n    suppress_change_warning: [true]\n  [compute]\n    region: [us-central1]\n    zone: [us-central1-f]\n\nLogs Directory: [/Users/user/.config/gcloud/logs]\nLast Log File: [/Users/user/.config/gcloud/logs/2015.12.30/14.29.56.415916.log]\n</code></pre>\n"}, {"tags": ["python", "arrays", "numpy", "optimization", "vectorization"], "comments": [{"owner": {"reputation": 1370, "user_id": 2183370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c87158938b508d76a52883632c56328?s=128&d=identicon&r=PG", "display_name": "Frank M", "link": "https://stackoverflow.com/users/2183370/frank-m"}, "edited": false, "score": 1, "creation_date": 1451496904, "post_id": 34533761, "comment_id": 56810184, "body": "The code makes it look like <code>industries</code> is a <code>numpy.ndarray</code>, but it is unclear why you only use row 0.  In the <code>for</code> loop, it also looks like <code>range(0, len(industries))</code> doesn&#39;t match <code>industries[0,i]</code> because <code>len(industries)</code> is the dimension of axis 0, but you&#39;re using it to index into axis 1."}, {"owner": {"reputation": 1370, "user_id": 2183370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c87158938b508d76a52883632c56328?s=128&d=identicon&r=PG", "display_name": "Frank M", "link": "https://stackoverflow.com/users/2183370/frank-m"}, "edited": false, "score": 1, "creation_date": 1451497115, "post_id": 34533761, "comment_id": 56810303, "body": "Also unclear why <code>gains_by_industry</code> is a list of lists or an array of lists.  If you instead turn it into a 2D <code>ndarray</code>, you could then mask on <code>industry in gains_by_industry</code> rather than using an if-else construct in the loop."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1451500037, "post_id": 34533761, "comment_id": 56811746, "body": "How many <code>industries</code>?  What&#39;s the size, more or less, of any other arrays in the calculation?  Looping 10 times is quite different from looping 1000s."}, {"owner": {"reputation": 51, "user_id": 5729181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35b32507e3bbf4ab83da3f9dec2b5264?s=128&d=identicon&r=PG&f=1", "display_name": "user36048", "link": "https://stackoverflow.com/users/5729181/user36048"}, "edited": false, "score": 0, "creation_date": 1451505005, "post_id": 34533761, "comment_id": 56814131, "body": "industries[0,i] is what gets me the industry code for the stock at index <i>i</i>. There is only one industry code per stock; not sure why it always comes in the way it does."}, {"owner": {"reputation": 51, "user_id": 5729181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35b32507e3bbf4ab83da3f9dec2b5264?s=128&d=identicon&r=PG&f=1", "display_name": "user36048", "link": "https://stackoverflow.com/users/5729181/user36048"}, "edited": false, "score": 0, "creation_date": 1451505155, "post_id": 34533761, "comment_id": 56814210, "body": "The function is not working as desired yet. If <code>len(industries)</code> is the dimension of axis-0, then how do I get the length of axis-1?   There are roughly 8000 items for axis-1."}, {"owner": {"reputation": 51, "user_id": 5729181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35b32507e3bbf4ab83da3f9dec2b5264?s=128&d=identicon&r=PG&f=1", "display_name": "user36048", "link": "https://stackoverflow.com/users/5729181/user36048"}, "edited": false, "score": 0, "creation_date": 1451505790, "post_id": 34533761, "comment_id": 56814516, "body": "As for the masked array approach, if I understand you correctly, you are suggesting I perform <code>np.nanmean(np.masked_where(industries != industry, asset_gainpct), out=out)</code> (or something like that) in the FOR loop where I loop through the different industries? If that&#39;s the case, given industries is 1x8000, how do I construct the inequality to ensure it is comparing the industry code at [0,i] to the value of the <i>industry</i> variable?"}, {"owner": {"reputation": 51, "user_id": 5729181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35b32507e3bbf4ab83da3f9dec2b5264?s=128&d=identicon&r=PG&f=1", "display_name": "user36048", "link": "https://stackoverflow.com/users/5729181/user36048"}, "edited": false, "score": 0, "creation_date": 1451507633, "post_id": 34533761, "comment_id": 56815445, "body": "Please see my update for my attempt to use a masked array for the computation."}, {"owner": {"reputation": 2023, "user_id": 3079302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d65ce13ff3ebb67092cbc09b912b88d3?s=128&d=identicon&r=PG", "display_name": "iled", "link": "https://stackoverflow.com/users/3079302/iled"}, "edited": false, "score": 0, "creation_date": 1451509837, "post_id": 34533761, "comment_id": 56816607, "body": "You can use <a href=\"http://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.shape.html\" rel=\"nofollow noreferrer\"><code>ndarray.shape</code></a> to find the <i>lenght</i> in each axis."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1451510706, "post_id": 34533761, "comment_id": 56817000, "body": "Masked arrays (<code>np.ma</code>) is for ignoring selected values.  The mask has to be the same dimension as the data.  I think you want to select specific rows or columns of the big array, something like <code>A[A[:,0]==1,;]</code>, rows where 1st column equals 1.  This is boolean index is often called masking."}], "answers": [{"tags": [], "owner": {"reputation": 13767, "user_id": 2413201, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rxfuw.jpg?s=128&g=1", "display_name": "Armali", "link": "https://stackoverflow.com/users/2413201/armali"}, "is_accepted": false, "score": 0, "last_activity_date": 1518189637, "creation_date": 1518189637, "answer_id": 48708934, "question_id": 34533761, "link": "https://stackoverflow.com/questions/34533761/using-numpy-broadcasting-vectorization-to-build-new-array-from-other-arrays/48708934#48708934", "title": "using numpy broadcasting / vectorization to build new array from other arrays", "body": "<p>Someone gave me a more succinct way to accomplish this, finally eliminating the extra FOR loop. It basically hides the loop in a Pandas DataFrame groupby, but it more succinctly describes what the desired steps are:</p>\n\n<pre><code>def GainPctInd2(offset=0, nbars=2):\n    class GainPctIndFact2(CustomFactor):\n        window_length = nbars + offset\n        inputs = [USEquityPricing.close, ms.asset_classification.morningstar_industry_code]\n        def compute(self, today, assets, out, close, industries):\n            df = pd.DataFrame(index=assets, data={\n                    \"gain\": ((close[-1 - offset] / close[(-1 - offset) - (nbars - 1)]) - 1) * 100,\n                    \"industry_codes\": industries[-1]\n                 })\n            out[:] = df.groupby(\"industry_codes\").transform(np.mean).values.flatten()\n    return GainPctIndFact2()\n</code></pre>\n\n<p>It does not improve the efficiency at all, according to my benchmarks, but it's probably easier to verify correctness. The one problem with their example is that it uses <code>np.mean</code> instead of <code>np.nanmean</code>, and <code>np.nanmean</code> drops the NaN values resulting in a shape mismatch if you try to use it. To fix the NaN issue, someone else suggested this:</p>\n\n<pre><code>def GainPctInd2(offset=0, nbars=2):\n    class GainPctIndFact2(CustomFactor):\n        window_length = nbars + offset\n        inputs = [USEquityPricing.close, ms.asset_classification.morningstar_industry_code]\n        def compute(self, today, assets, out, close, industries):\n            df = pd.DataFrame(index=assets, data={\n                    \"gain\": ((close[-1 - offset] / close[(-1 - offset) - (nbars - 1)]) - 1) * 100,\n                    \"industry_codes\": industries[-1]\n                 })\n            nans = isnan(df['industry_codes'])\n            notnan = ~nans\n            out[notnan] = df[df['industry_codes'].notnull()].groupby(\"industry_codes\").transform(np.nanmean).values.flatten()\n            out[nans] = nan\n    return GainPctIndFact2()\n</code></pre>\n\n<p>\u2013 user36048</p>\n"}], "owner": {"reputation": 51, "user_id": 5729181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35b32507e3bbf4ab83da3f9dec2b5264?s=128&d=identicon&r=PG&f=1", "display_name": "user36048", "link": "https://stackoverflow.com/users/5729181/user36048"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 283, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1518189637, "creation_date": 1451494744, "last_edit_date": 1451654715, "question_id": 34533761, "link": "https://stackoverflow.com/questions/34533761/using-numpy-broadcasting-vectorization-to-build-new-array-from-other-arrays", "title": "using numpy broadcasting / vectorization to build new array from other arrays", "body": "<p>I am working on a stock ranking factor for a Quantopian model. They recommend avoiding the use of loops in custom factors. However, I am not exactly sure how I would avoid the loops in this case.</p>\n\n<pre><code>def GainPctInd(offset=0, nbars=2):  \n    class GainPctIndFact(CustomFactor):  \n        window_length = nbars + offset  \n        inputs = [USEquityPricing.close, ms.asset_classification.morningstar_industry_code]  \n        def compute(self, today, assets, out, close, industries):\n            # Compute the gain percents for all stocks\n            asset_gainpct = (close[-1] - close[offset]) / close[offset] * 100  \n\n            # For each industry, build a list of the per-stock gains over the given window  \n            gains_by_industry = {}  \n            for i in range(0, len(industries)):  \n                industry = industries[0,i]  \n                if industry in gains_by_industry:  \n                    gains_by_industry[industry].append(asset_gainpct[i])  \n                else:  \n                    gains_by_industry[industry] = [asset_gainpct[i]]\n\n            # Loop through each stock's industry and compute a mean value for that  \n            # industry (caching it for reuse) and return that industry mean for  \n            # that stock  \n            mean_cache = {}  \n            for i in range(0, len(industries)):  \n                industry = industries[0,i]  \n                if not industry in mean_cache:  \n                    mean_cache[industry] = np.mean(gains_by_industry[industry])  \n                out[i] = mean_cache[industry]  \n    return GainPctIndFact()\n</code></pre>\n\n<p>When the compute function is called, <em>assets</em> is a 1-d array of the asset names, <em>close</em> is a multi-dimensional numpy array where there are <em>window_length</em> close prices for each asset listed in <em>assets</em> (using the same index numbers), and <em>industries</em> is the list of industry codes associated with each asset in a 1-d array. I know numpy vectorizes the computation of the gainpct in this line:</p>\n\n<p><code>asset_gainpct = (close[-1] - close[offset]) / close[offset] * 100</code></p>\n\n<p>The result is that <em>asset_gainpct</em> is a 1-d array of all the computed gains for every stock. The part I am unclear about is how I would use numpy to finish the calculations without me manually looping through the arrays. </p>\n\n<p>Basically, what I need to do is aggregate all of the gains for all of the stocks based on the industry they are in, then compute the average of those values, and then de-aggregate the averages back out to the full list of assets. </p>\n\n<p>Right now, I am looping through all the industries and pushing the gain percentages into a industry-indexed dictionary storing a list of the gains per industry. Then I am calculating the mean for those lists and performing a reverse-industry lookup to map the industry gains to each asset based on their industry. </p>\n\n<p>It seems to me like this should be possible to do using some highly optimized traversals of the arrays in numpy, but I can't seem to figure it out. I've never used numpy before today, and I'm fairly new to Python, so that probably doesn't help.</p>\n\n<hr>\n\n<p>UPDATE:</p>\n\n<p>I modified my industry code loop to try to handle the computation with a masked array using the industry array to mask the asset_gainpct array like such:</p>\n\n<pre><code>    # For each industry, build a list of the per-stock gains over the given window \n    gains_by_industry = {}\n    for industry in industries.T:\n        masked = ma.masked_where(industries != industry[0], asset_gainpct)\n        np.nanmean(masked, out=out)\n</code></pre>\n\n<p>It gave me the following error:</p>\n\n<blockquote>\n  <p>IndexError: Inconsistant shape between the condition and the input\n  (got (20, 8412) and (8412,))</p>\n</blockquote>\n\n<p>Also, as a side note, <em>industries</em> is coming in as a 20x8412 array because the <em>window_length</em> is set to 20. The extra values are the industry codes for the stocks on the previous days, except they don't typically change, so they can be ignored. I am now iterating over industries.T (the transpose of industries) which means <em>industry</em> is a 20-element array with the same industry code in each element. Hence, I only need element 0.</p>\n\n<p>The error above is coming from the ma.masked_where() call. The <em>industries</em> array is 20x8412 so I presume asset_gainpct is the one listed as (8412,). How do I make these compatible for this call to work?</p>\n\n<hr>\n\n<p>UPDATE 2:</p>\n\n<p>I have modified the code again, fixing several other issues I have run into. It now looks like this:</p>\n\n<pre><code>    # For each industry, build a list of the per-stock gains over the given window \n    unique_ind = np.unique(industries[0,])\n    for industry in unique_ind:\n        masked = ma.masked_where(industries[0,] != industry, asset_gainpct)\n        mean = np.full_like(masked, np.nanmean(masked), dtype=np.float64, subok=False)\n        np.copyto(out, mean, where=masked)\n</code></pre>\n\n<p>Basically, the new premise here is that I have to build a mean-value filled array of the same size as the number of stocks in my input data and then copy the values into my destination variable (<em>out</em>) while applying my previous mask so that only the unmasked indexes are filled with the mean value. In addition, I realized that I was iterating over industries more than once in my previous incarnation, so I fixed that, too. However, the copyto() call is yielding this error:</p>\n\n<blockquote>\n  <p>TypeError: Cannot cast array data from dtype('float64') to\n  dtype('bool') according to the rule 'safe'</p>\n</blockquote>\n\n<p>Obviously, I am doing something wrong; but looking through the docs, I don't see what it is. This looks like it should be copying from <em>mean</em> (which is np.float64 dtype) to <em>out</em> (which I have not previously defined) and it should be using <em>masked</em> as the boolean array for selecting which indexes get copied. Anyone have any ideas on what the issue is?</p>\n\n<hr>\n\n<p>UPDATE 3:</p>\n\n<p>First, thanks for all the feedback from everyone who contributed.</p>\n\n<p>After much additional digging into this code, I have come up with the following:</p>\n\n<pre><code>def GainPctInd(offset=0, nbars=2):\n    class GainPctIndFact(CustomFactor):\n        window_length = nbars + offset\n        inputs = [USEquityPricing.close, ms.asset_classification.morningstar_industry_code]\n        def compute(self, today, assets, out, close, industries):\n            num_bars, num_assets = close.shape\n            newest_bar_idx = (num_bars - 1) - offset\n            oldest_bar_idx = newest_bar_idx - (nbars - 1)\n\n            # Compute the gain percents for all stocks\n            asset_gainpct = ((close[newest_bar_idx] - close[oldest_bar_idx]) / close[oldest_bar_idx]) * 100\n\n            # For each industry, build a list of the per-stock gains over the given window \n            unique_ind = np.unique(industries[0,])\n            for industry in unique_ind:\n                ind_view = asset_gainpct[industries[0,] == industry]\n                ind_mean = np.nanmean(ind_view)\n                out[industries[0,] == industry] = ind_mean\n    return GainPctIndFact()\n</code></pre>\n\n<p>For some reason, the calculations based on the masked views were not yielding correct results. Further, getting those results into the <em>out</em> variable was not working. Somewhere along the line, I stumbled on a post about how numpy (by default) creates views of arrays instead of copies when you do a slice and that you can do a sparse slice based on a Boolean condition. When running a calculation on such a view, it looks like a full array as far as the calculation is concerned, but all the values are still actually in the base array. It's sort of like having an array of pointers and the calculations happen on the data the pointers point to. Similarly, you can assign a value to all nodes in your sparse view and have it update the data for all of them. This actually simplified the logic considerably.</p>\n\n<p>I would still be interested in any ideas anyone has on how to remove the final loop over the industries and vectorize that process. I am wondering if maybe a map / reduce approach might work, but I am still not familiar enough with numpy to figure out how to do it any more efficiently than this FOR loop. On the bright side, the remaining loop only has about 140 iterations to go through vs the two prior loops which would go through 8000 each. In addition to that, I am now avoiding the construction of the <em>gains_by_industry</em> and the <em>mean_cache</em> dict and avoiding all the data copying which went with them. So, it is not just faster, it is also far more memory efficient.</p>\n\n<hr>\n\n<p>UPDATE 4:</p>\n\n<p>Someone gave me a more succinct way to accomplish this, finally eliminating the extra FOR loop. It basically hides the loop in a Pandas DataFrame groupby, but it more succinctly describes what the desired steps are:</p>\n\n<pre><code>def GainPctInd2(offset=0, nbars=2):\n    class GainPctIndFact2(CustomFactor):\n        window_length = nbars + offset\n        inputs = [USEquityPricing.close, ms.asset_classification.morningstar_industry_code]\n        def compute(self, today, assets, out, close, industries):\n            df = pd.DataFrame(index=assets, data={\n                    \"gain\": ((close[-1 - offset] / close[(-1 - offset) - (nbars - 1)]) - 1) * 100,\n                    \"industry_codes\": industries[-1]\n                 })\n            out[:] = df.groupby(\"industry_codes\").transform(np.mean).values.flatten()\n    return GainPctIndFact2()\n</code></pre>\n\n<p>It does not improve the efficiency at all, according to my benchmarks, but it's probably easier to verify correctness. The one problem with their example is that it uses <code>np.mean</code> instead of <code>np.nanmean</code>, and <code>np.nanmean</code> drops the NaN values resulting in a shape mismatch if you try to use it. To fix the NaN issue, someone else suggested this:</p>\n\n<pre><code>def GainPctInd2(offset=0, nbars=2):\n    class GainPctIndFact2(CustomFactor):\n        window_length = nbars + offset\n        inputs = [USEquityPricing.close, ms.asset_classification.morningstar_industry_code]\n        def compute(self, today, assets, out, close, industries):\n            df = pd.DataFrame(index=assets, data={\n                    \"gain\": ((close[-1 - offset] / close[(-1 - offset) - (nbars - 1)]) - 1) * 100,\n                    \"industry_codes\": industries[-1]\n                 })\n            nans = isnan(df['industry_codes'])\n            notnan = ~nans\n            out[notnan] = df[df['industry_codes'].notnull()].groupby(\"industry_codes\").transform(np.nanmean).values.flatten()\n            out[nans] = nan\n    return GainPctIndFact2()\n</code></pre>\n"}]