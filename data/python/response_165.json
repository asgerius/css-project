[{"tags": ["python", "tkinter"], "comments": [{"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 2, "creation_date": 1520469359, "post_id": 49163239, "comment_id": 85332679, "body": "What research have you done prior to asking this question? The answers you seek are all in readily available documentation and tutorials."}, {"owner": {"reputation": 10223, "user_id": 7032856, "user_type": "registered", "accept_rate": 81, "profile_image": "https://lh6.googleusercontent.com/-v2P-pqI1pww/AAAAAAAAAAI/AAAAAAAAABg/BHOFSOpQ0BM/photo.jpg?sz=128", "display_name": "Nae", "link": "https://stackoverflow.com/users/7032856/nae"}, "edited": false, "score": 0, "creation_date": 1520469575, "post_id": 49163239, "comment_id": 85332747, "body": "Please <a href=\"https://stackoverflow.com/posts/49163239/edit\">edit</a> the question and word it better. I&#39;d start by improving the title, right now it&#39;s pretty unclear what the question is about."}, {"owner": {"reputation": 1, "user_id": 9007036, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-61f-S66wxK8/AAAAAAAAAAI/AAAAAAAAFaU/V5Bq97iqfRg/photo.jpg?sz=128", "display_name": "DP9007036", "link": "https://stackoverflow.com/users/9007036/dp9007036"}, "reply_to_user": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1520477100, "post_id": 49163239, "comment_id": 85334597, "body": "@BryanOakley  please share where this info...I could not find out how to accomplish this task"}, {"owner": {"reputation": 1, "user_id": 9007036, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-61f-S66wxK8/AAAAAAAAAAI/AAAAAAAAFaU/V5Bq97iqfRg/photo.jpg?sz=128", "display_name": "DP9007036", "link": "https://stackoverflow.com/users/9007036/dp9007036"}, "reply_to_user": {"reputation": 10223, "user_id": 7032856, "user_type": "registered", "accept_rate": 81, "profile_image": "https://lh6.googleusercontent.com/-v2P-pqI1pww/AAAAAAAAAAI/AAAAAAAAABg/BHOFSOpQ0BM/photo.jpg?sz=128", "display_name": "Nae", "link": "https://stackoverflow.com/users/7032856/nae"}, "edited": false, "score": 0, "creation_date": 1520477216, "post_id": 49163239, "comment_id": 85334624, "body": "@Nae is that better?"}, {"owner": {"reputation": 10223, "user_id": 7032856, "user_type": "registered", "accept_rate": 81, "profile_image": "https://lh6.googleusercontent.com/-v2P-pqI1pww/AAAAAAAAAAI/AAAAAAAAABg/BHOFSOpQ0BM/photo.jpg?sz=128", "display_name": "Nae", "link": "https://stackoverflow.com/users/7032856/nae"}, "edited": false, "score": 0, "creation_date": 1520676106, "post_id": 49163239, "comment_id": 85420289, "body": "@DP9007036 See <a href=\"https://stackoverflow.com/tags/tkinter/info\">tkinter tag info</a> for more info on resources."}, {"owner": {"reputation": 10223, "user_id": 7032856, "user_type": "registered", "accept_rate": 81, "profile_image": "https://lh6.googleusercontent.com/-v2P-pqI1pww/AAAAAAAAAAI/AAAAAAAAABg/BHOFSOpQ0BM/photo.jpg?sz=128", "display_name": "Nae", "link": "https://stackoverflow.com/users/7032856/nae"}, "edited": false, "score": 0, "creation_date": 1520677086, "post_id": 49163239, "comment_id": 85420568, "body": "There can be a number of ways creating a GUI that fits your description. Please narrow down your description better. Perhaps provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and tell exactly how you want to modify it."}], "answers": [{"tags": [], "owner": {"reputation": 10223, "user_id": 7032856, "user_type": "registered", "accept_rate": 81, "profile_image": "https://lh6.googleusercontent.com/-v2P-pqI1pww/AAAAAAAAAAI/AAAAAAAAABg/BHOFSOpQ0BM/photo.jpg?sz=128", "display_name": "Nae", "link": "https://stackoverflow.com/users/7032856/nae"}, "is_accepted": false, "score": 0, "last_activity_date": 1520678238, "creation_date": 1520678238, "answer_id": 49208070, "question_id": 49163239, "link": "https://stackoverflow.com/questions/49163239/copy-entry-widget-text-and-paste-into-another-entry-widget-in-the-same-window/49208070#49208070", "title": "Copy Entry widget text and paste into another Entry widget in the same window", "body": "<p>There can probably a couple more ways of achieving the behavior you want. I think using the <code>textvariable</code> option and <code>Variable Classes</code> fits well here. Together, they let a widget's text to be the same as another at all times. With the <code>Checkbutton</code> the user decides whether or not to do that:</p>\n\n<pre><code>try:                        # In order to be able to import tkinter for\n    import tkinter as tk    # either in python 2 or in python 3\nexcept ImportError:\n    import Tkinter as tk\n\n\ndef on_selection(copy_widget, paste_widget, condition_widget):\n    if condition_widget.var.get():\n        paste_widget['textvariable'] = copy_widget['textvariable']\n    else:\n        paste_widget['textvariable'] = ''\n\n\ndef create_entry_widgets(master):\n    entries = list()\n    for i in range(2):\n        entries.append(tk.Entry(master))\n        entries[-1].pack()\n    entries[0].var = tk.StringVar()\n    entries[0]['textvariable'] = entries[0].var\n    return entries\n\n\ndef create_checkbutton(master, entries):\n    checkbutton = tk.Checkbutton(master, text=\"Copy?\")\n    checkbutton.var = tk.BooleanVar(value=False)\n    checkbutton.config(variable=checkbutton.var, onvalue=True, offvalue=False)\n    checkbutton['command'] = lambda cw=entries[0], pw=entries[1], \\\n                                    cdw=checkbutton: on_selection(cw, pw, cdw)\n    checkbutton.pack()\n    return checkbutton\n\n\ndef main():\n    root = tk.Tk()\n    entries = create_entry_widgets(root)\n    checkbutton = create_checkbutton(root, entries)   \n    tk.mainloop()\n\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9007036, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-61f-S66wxK8/AAAAAAAAAAI/AAAAAAAAFaU/V5Bq97iqfRg/photo.jpg?sz=128", "display_name": "DP9007036", "link": "https://stackoverflow.com/users/9007036/dp9007036"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 351, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1520678238, "creation_date": 1520467048, "last_edit_date": 1520476985, "question_id": 49163239, "link": "https://stackoverflow.com/questions/49163239/copy-entry-widget-text-and-paste-into-another-entry-widget-in-the-same-window", "title": "Copy Entry widget text and paste into another Entry widget in the same window", "body": "<p>How do I copy Entry widget text and paste into another Entry widget in the same window.</p>\n\n<p>i.e. Let's imagine you are completing a joint credit application but you and the co-applicant have the same mailing address. Instead of re-typing the same address over again, there should be a checkbutton on the application that when it's checked it will auto-populate the co-applicant's mailing address with the main applicant's address. How do I get this done in tkinter? (<strong>I'm a tkinter and python rookie</strong>) \nthanks in advance DP\u200b</p>\n"}, {"tags": ["python", "pandas", "variables", "dataframe", "rename"], "answers": [{"comments": [{"owner": {"reputation": 111, "user_id": 9454050, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-f_9JVInuaN8/AAAAAAAAAAI/AAAAAAAAADU/RdSVBWxoNxE/photo.jpg?sz=128", "display_name": "user9454050", "link": "https://stackoverflow.com/users/9454050/user9454050"}, "edited": false, "score": 0, "creation_date": 1520467219, "post_id": 49163204, "comment_id": 85332125, "body": "Awesome. Thanks for your help again @jpp."}, {"owner": {"reputation": 111, "user_id": 9454050, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-f_9JVInuaN8/AAAAAAAAAAI/AAAAAAAAADU/RdSVBWxoNxE/photo.jpg?sz=128", "display_name": "user9454050", "link": "https://stackoverflow.com/users/9454050/user9454050"}, "edited": false, "score": 0, "creation_date": 1520467296, "post_id": 49163204, "comment_id": 85332146, "body": "As an add on; say i wanted to rename in a range of floats instead of integers. Would this be possible?"}, {"owner": {"reputation": 111, "user_id": 9454050, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-f_9JVInuaN8/AAAAAAAAAAI/AAAAAAAAADU/RdSVBWxoNxE/photo.jpg?sz=128", "display_name": "user9454050", "link": "https://stackoverflow.com/users/9454050/user9454050"}, "edited": false, "score": 0, "creation_date": 1520467730, "post_id": 49163204, "comment_id": 85332279, "body": "Yes, very much like you suggest. Using my original example: &quot;subsidence 1.1&quot;, &quot;subsidence 1.2&quot;, &quot;subsidence 1.3&quot; etc."}, {"owner": {"reputation": 111, "user_id": 9454050, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-f_9JVInuaN8/AAAAAAAAAAI/AAAAAAAAADU/RdSVBWxoNxE/photo.jpg?sz=128", "display_name": "user9454050", "link": "https://stackoverflow.com/users/9454050/user9454050"}, "edited": false, "score": 0, "creation_date": 1520468053, "post_id": 49163204, "comment_id": 85332354, "body": "Right. So I can&#39;t have <code>[&#39;subsidence &#39;+str(i) for i in range[1.1, 1.3]]</code>"}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "reply_to_user": {"reputation": 111, "user_id": 9454050, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-f_9JVInuaN8/AAAAAAAAAAI/AAAAAAAAADU/RdSVBWxoNxE/photo.jpg?sz=128", "display_name": "user9454050", "link": "https://stackoverflow.com/users/9454050/user9454050"}, "edited": false, "score": 0, "creation_date": 1520468161, "post_id": 49163204, "comment_id": 85332385, "body": "No, <code>range</code> only accepts integers, see <a href=\"https://docs.python.org/3/library/stdtypes.html#typesseq-range\" rel=\"nofollow noreferrer\">documentation</a>."}, {"owner": {"reputation": 7436, "user_id": 5514476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hP6t0.jpg?s=128&g=1", "display_name": "DJK", "link": "https://stackoverflow.com/users/5514476/djk"}, "edited": false, "score": 2, "creation_date": 1520468320, "post_id": 49163204, "comment_id": 85332416, "body": "use <code>numpy</code>, <code>np.arange(1.1,2,.2)</code>, <code>array([1.1, 1.3, 1.5, 1.7, 1.9]) </code>"}, {"owner": {"reputation": 4890, "user_id": 6866811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8b433dba8feffa45967ca5679a5f6ee?s=128&d=identicon&r=PG&f=1", "display_name": "thesilkworm", "link": "https://stackoverflow.com/users/6866811/thesilkworm"}, "edited": false, "score": 1, "creation_date": 1520468357, "post_id": 49163204, "comment_id": 85332427, "body": "You could get something close by iterating over a range of integers as before but doing str(i/10) instead of str(i)."}, {"owner": {"reputation": 111, "user_id": 9454050, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-f_9JVInuaN8/AAAAAAAAAAI/AAAAAAAAADU/RdSVBWxoNxE/photo.jpg?sz=128", "display_name": "user9454050", "link": "https://stackoverflow.com/users/9454050/user9454050"}, "edited": false, "score": 1, "creation_date": 1520468991, "post_id": 49163204, "comment_id": 85332578, "body": "Thanks everyone, combining all your suggestions I have <code>list =np.arange(1.1,1.21,.01)</code> and  <code>df.columns = [&#39;subsidence&#39;+str(i) for i in list]</code> which gives me exactly what I want."}], "tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": true, "score": 1, "last_activity_date": 1520466830, "creation_date": 1520466830, "answer_id": 49163204, "question_id": 49163167, "link": "https://stackoverflow.com/questions/49163167/rename-a-sequence-of-names-in-pandas-dataframe/49163204#49163204", "title": "Rename a sequence of names in pandas dataframe", "body": "<p>You can set <code>df.columns</code> directly with a list comprehension:</p>\n\n<pre><code>df.columns = ['subsidence '+str(i) for i in range(1, 12)]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 26718, "user_id": 4800652, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/bsfAl.jpg?s=128&g=1", "display_name": "Bharath", "link": "https://stackoverflow.com/users/4800652/bharath"}, "is_accepted": false, "score": 0, "last_activity_date": 1520475587, "creation_date": 1520475587, "answer_id": 49164324, "question_id": 49163167, "link": "https://stackoverflow.com/questions/49163167/rename-a-sequence-of-names-in-pandas-dataframe/49164324#49164324", "title": "Rename a sequence of names in pandas dataframe", "body": "<p>Another way of utitlizing the string operations provided by pandas if and only if <code>these columns are all named \"subsidence\"</code> i.e: </p>\n\n<pre><code>df.columns + ' ' + np.arange(1,len(df.columns)+1).astype(str) \n</code></pre>\n\n<p>Based on earlier comment simply : </p>\n\n<pre><code>df.columns + ' ' +  np.arange(1.1,1.21,.01)\n</code></pre>\n"}], "owner": {"reputation": 111, "user_id": 9454050, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-f_9JVInuaN8/AAAAAAAAAAI/AAAAAAAAADU/RdSVBWxoNxE/photo.jpg?sz=128", "display_name": "user9454050", "link": "https://stackoverflow.com/users/9454050/user9454050"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 250, "favorite_count": 0, "accepted_answer_id": 49163204, "answer_count": 2, "score": 1, "last_activity_date": 1520475587, "creation_date": 1520466609, "last_edit_date": 1520467654, "question_id": 49163167, "link": "https://stackoverflow.com/questions/49163167/rename-a-sequence-of-names-in-pandas-dataframe", "title": "Rename a sequence of names in pandas dataframe", "body": "<p>I have a dataframe in pandas containing 11 columns. These columns are all named \"subsidence\".</p>\n\n<p>I would like to rename the columns \"subsidence 1\", \"subsidence 2\", \"subsidence 3\" etc. Is there a quicker way to do this than using <code>df.rename</code>.  </p>\n"}, {"tags": ["python", "apache-spark", "pyspark", "apache-spark-sql"], "answers": [{"comments": [{"owner": {"reputation": 873, "user_id": 4265823, "user_type": "registered", "accept_rate": 13, "profile_image": "https://www.gravatar.com/avatar/d47aa83dde496efe87c1773e603812c3?s=128&d=identicon&r=PG&f=1", "display_name": "AJm", "link": "https://stackoverflow.com/users/4265823/ajm"}, "edited": false, "score": 0, "creation_date": 1520473652, "post_id": 49163660, "comment_id": 85333766, "body": "i don&#39;t want with Dataframes as later i need to do processing on RDD. I am using Python so can&#39;t use Datasets"}, {"owner": {"reputation": 36454, "user_id": 5880706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/147556055711bd1fa5a938cef92a22b9?s=128&d=identicon&r=PG&f=1", "display_name": "Ramesh Maharjan", "link": "https://stackoverflow.com/users/5880706/ramesh-maharjan"}, "reply_to_user": {"reputation": 873, "user_id": 4265823, "user_type": "registered", "accept_rate": 13, "profile_image": "https://www.gravatar.com/avatar/d47aa83dde496efe87c1773e603812c3?s=128&d=identicon&r=PG&f=1", "display_name": "AJm", "link": "https://stackoverflow.com/users/4265823/ajm"}, "edited": false, "score": 0, "creation_date": 1520476219, "post_id": 49163660, "comment_id": 85334353, "body": "@AJm, converting the dataframe to rdd is quite simple just call .rdd"}, {"owner": {"reputation": 873, "user_id": 4265823, "user_type": "registered", "accept_rate": 13, "profile_image": "https://www.gravatar.com/avatar/d47aa83dde496efe87c1773e603812c3?s=128&d=identicon&r=PG&f=1", "display_name": "AJm", "link": "https://stackoverflow.com/users/4265823/ajm"}, "edited": false, "score": 0, "creation_date": 1520496205, "post_id": 49163660, "comment_id": 85341337, "body": "Does not work . Gives error sql() takes exactly 2 arguments (3 given). As i have replaced &quot;[{somevalues, id:1, name:&#39;xyz&#39;}, {address:Some Value}, {somevalue}]&quot; --&gt; with the column name"}, {"owner": {"reputation": 36454, "user_id": 5880706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/147556055711bd1fa5a938cef92a22b9?s=128&d=identicon&r=PG&f=1", "display_name": "Ramesh Maharjan", "link": "https://stackoverflow.com/users/5880706/ramesh-maharjan"}, "reply_to_user": {"reputation": 873, "user_id": 4265823, "user_type": "registered", "accept_rate": 13, "profile_image": "https://www.gravatar.com/avatar/d47aa83dde496efe87c1773e603812c3?s=128&d=identicon&r=PG&f=1", "display_name": "AJm", "link": "https://stackoverflow.com/users/4265823/ajm"}, "edited": false, "score": 0, "creation_date": 1520513249, "post_id": 49163660, "comment_id": 85351806, "body": "@AJm, can you update the question with what you&#39;ve tried and the detailed error message?"}, {"owner": {"reputation": 873, "user_id": 4265823, "user_type": "registered", "accept_rate": 13, "profile_image": "https://www.gravatar.com/avatar/d47aa83dde496efe87c1773e603812c3?s=128&d=identicon&r=PG&f=1", "display_name": "AJm", "link": "https://stackoverflow.com/users/4265823/ajm"}, "edited": false, "score": 0, "creation_date": 1520535478, "post_id": 49163660, "comment_id": 85366585, "body": "df = spark.sql(&quot;select split(regexp_replace(column_name,  &quot;&quot;[\\&#91;\\&#93; ]&quot;&quot;, &quot;&quot;), &quot;,&quot;) from table_1 &quot;) ;   df.show(10)"}, {"owner": {"reputation": 873, "user_id": 4265823, "user_type": "registered", "accept_rate": 13, "profile_image": "https://www.gravatar.com/avatar/d47aa83dde496efe87c1773e603812c3?s=128&d=identicon&r=PG&f=1", "display_name": "AJm", "link": "https://stackoverflow.com/users/4265823/ajm"}, "edited": false, "score": 0, "creation_date": 1520633407, "post_id": 49163660, "comment_id": 85411142, "body": "Also i looked the example &gt;&gt;&gt; df = sqlContext.createDataFrame([(&#39;100-200&#39;,)], [&#39;str&#39;]) &gt;&gt;&gt; df.select(regexp_replace(&#39;str&#39;, &#39;(\\d+)&#39;, &#39;--&#39;).alias(&#39;d&#39;)).collect() [Row(d=u&#39;-----&#39;)]  But i don&#39;t understand why this [Row(d=u&#39;----&#39;)]  This i don&#39;t need i just need the Curly brackets and the values inside it"}], "tags": [], "owner": {"reputation": 299, "user_id": 5509005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a4df38e13606f4748b4a5229921da79?s=128&d=identicon&r=PG&f=1", "display_name": "ss85", "link": "https://stackoverflow.com/users/5509005/ss85"}, "is_accepted": false, "score": 2, "last_activity_date": 1520470145, "creation_date": 1520470145, "answer_id": 49163660, "question_id": 49163141, "link": "https://stackoverflow.com/questions/49163141/how-to-convert-a-string-into-a-list-using-spark-function-pyspark/49163660#49163660", "title": "How to convert a String into a List using spark function PySpark", "body": "<p>You can use regexp_replace to remove the square brackets and then split on the comma. At first, I'd thought you need to do something special to avoid splitting on the commas within the curly brackets. But it seems spark sql automatically avoids that. For example, the following query in Zeppelin</p>\n\n<pre><code>%sql\nselect split(regexp_replace(\"[{somevalues, id:1, name:'xyz'}, {address:Some Value}, {somevalue}]\",  \"[\\\\[\\\\] ]\", \"\"), \",\")\n</code></pre>\n\n<p>gives me </p>\n\n<pre><code>WrappedArray({somevalues, id:1, name:'xyz'}, {address:SomeValue}, {somevalue})\n</code></pre>\n\n<p>which is what you want.</p>\n\n<p>You can use withColumn to add a column in this way if you're working with dataframes. And for some reason, if the comma within the curly brackets is being split on, you can do more regex-foo as in this post - <a href=\"https://stackoverflow.com/questions/39565349/regex-match-only-outside-parenthesis-so-that-the-text-isnt-split-within-paren\">Regex: match only outside parenthesis (so that the text isn&#39;t split within parenthesis)?</a>.</p>\n\n<p>Hope that makes sense. I'm not sure if you're using dataframes, but they're recommended over the lower level RDD api.</p>\n"}, {"tags": [], "owner": {"reputation": 36454, "user_id": 5880706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/147556055711bd1fa5a938cef92a22b9?s=128&d=identicon&r=PG&f=1", "display_name": "Ramesh Maharjan", "link": "https://stackoverflow.com/users/5880706/ramesh-maharjan"}, "is_accepted": false, "score": 0, "last_activity_date": 1520655387, "creation_date": 1520655387, "answer_id": 49205274, "question_id": 49163141, "link": "https://stackoverflow.com/questions/49163141/how-to-convert-a-string-into-a-list-using-spark-function-pyspark/49205274#49205274", "title": "How to convert a String into a List using spark function PySpark", "body": "<p><strong>If you don't want to go to <code>dataframes</code></strong> then you can use <em>regex replace</em> and <em>split</em> functions on the <em>rdd</em> data you created .</p>\n\n<p>If you have data as </p>\n\n<pre><code>x = \"[{somevalues, id:1, name:'xyz'}, {address:Some Value}, {somevalue}]\"\n</code></pre>\n\n<p>Then you can create <em>rdd</em> and use <em>regex replace</em> and <em>split</em> functions as</p>\n\n<pre><code>import re\nrdd = sc.parallelize([x]).flatMap(lambda x: re.sub(\"},\\\\{\", \"};&amp;;{\", re.sub(\"[\\\\[\\\\]\\s+]\", \"\", x)).split(\";&amp;;\"))\n</code></pre>\n\n<p><code>flatMap</code> is used so that <em>the splitted data comes in separate rows</em> as</p>\n\n<pre><code>{somevalues,id:1,name:'xyz'}\n{address:SomeValue}\n{somevalue}\n</code></pre>\n\n<p>I hope the answer is helpful</p>\n\n<p><strong>Note</strong> : If you want the solution in <code>dataframe</code> way then you can get ideas from my <a href=\"https://stackoverflow.com/a/49204947/5880706\">other answer</a></p>\n"}], "owner": {"reputation": 873, "user_id": 4265823, "user_type": "registered", "accept_rate": 13, "profile_image": "https://www.gravatar.com/avatar/d47aa83dde496efe87c1773e603812c3?s=128&d=identicon&r=PG&f=1", "display_name": "AJm", "link": "https://stackoverflow.com/users/4265823/ajm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2365, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1547477976, "creation_date": 1520466466, "last_edit_date": 1547477976, "question_id": 49163141, "link": "https://stackoverflow.com/questions/49163141/how-to-convert-a-string-into-a-list-using-spark-function-pyspark", "title": "How to convert a String into a List using spark function PySpark", "body": "<p>I am fetching a column from a Dataframe. The column is of <code>string</code> type.</p>\n\n<p><code>x = \"[{somevalues, id:1, name:'xyz'}, {address:Some Value}, {somevalue}]\"</code> &amp; so on..</p>\n\n<p>The data is stored as a string. It can be easily represented as a list.\nI want the output to be: </p>\n\n<pre><code>LIST of [\n{somevalues, id:1, name:'xyz'}, \n{address:Some Value}, \n{somevalue}\n]\n</code></pre>\n\n<p>How can I achieve this using Spark's API? I know that with Python I can use the <code>eval(x)</code> function and it will return the list or I can use the <code>x.split()</code> function, which will also return a list. However, in this approach, it needs to iterate for each record.</p>\n\n<p>Also, I want to use <code>mapPartition</code>; that is the reason why I need my string column to be in a list so that I can pass it to <code>mapPartition</code>.</p>\n\n<p>Is there an efficient way where I can also convert my string data using spark API or would <code>mapPartitions</code> be even better as I will be looping every partition rather than every record?</p>\n"}, {"tags": ["python", "numpy", "scipy", "curve-fitting"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 6728677, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-i-QaHGG_dkQ/AAAAAAAAAAI/AAAAAAAAAEk/mrEo74U89L4/photo.jpg?sz=128", "display_name": "Noah Schumacher", "link": "https://stackoverflow.com/users/6728677/noah-schumacher"}, "edited": false, "score": 0, "creation_date": 1520471320, "post_id": 49163685, "comment_id": 85333220, "body": "Perfect that fixed it. Thanks"}, {"owner": {"reputation": 3988, "user_id": 2436862, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4P7Vh.jpg?s=128&g=1", "display_name": "James Phillips", "link": "https://stackoverflow.com/users/2436862/james-phillips"}, "edited": false, "score": 0, "creation_date": 1520505399, "post_id": 49163685, "comment_id": 85347047, "body": "What method did you use to determine the initial parameter estimates you provided?"}, {"owner": {"reputation": 5396, "user_id": 5179748, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-N6Pn6ac0-tQ/AAAAAAAAAAI/AAAAAAAAB2o/LLcs2JK0DcU/photo.jpg?sz=128", "display_name": "M Newville", "link": "https://stackoverflow.com/users/5179748/m-newville"}, "reply_to_user": {"reputation": 3988, "user_id": 2436862, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4P7Vh.jpg?s=128&g=1", "display_name": "James Phillips", "link": "https://stackoverflow.com/users/2436862/james-phillips"}, "edited": false, "score": 1, "creation_date": 1520511999, "post_id": 49163685, "comment_id": 85350996, "body": "@JamesPhillips you keep asking that question in SO comments, and the answer is always the same: I looked at a plot of the data and GUESSed.  In this case I also plotted the initial model with <code>curve_fit</code> idiotic, cannot-ever-be-justified, and guaranteed-to-cause-problems of silently defaulting to values of 1 for all variables.  For this data and model, it gives a fit so bad that it cannot recover.  The error is entirely with <code>curve_fit</code> -- it should insist on explicit defaults.  Curve fitting <b>requires</b> initial values  -- guesses -- from the user."}, {"owner": {"reputation": 3988, "user_id": 2436862, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4P7Vh.jpg?s=128&g=1", "display_name": "James Phillips", "link": "https://stackoverflow.com/users/2436862/james-phillips"}, "edited": false, "score": 0, "creation_date": 1520518466, "post_id": 49163685, "comment_id": 85355381, "body": "To answer your question, I ask that I may understand."}, {"owner": {"reputation": 5396, "user_id": 5179748, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-N6Pn6ac0-tQ/AAAAAAAAAAI/AAAAAAAAB2o/LLcs2JK0DcU/photo.jpg?sz=128", "display_name": "M Newville", "link": "https://stackoverflow.com/users/5179748/m-newville"}, "reply_to_user": {"reputation": 3988, "user_id": 2436862, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4P7Vh.jpg?s=128&g=1", "display_name": "James Phillips", "link": "https://stackoverflow.com/users/2436862/james-phillips"}, "edited": false, "score": 0, "creation_date": 1520521292, "post_id": 49163685, "comment_id": 85357517, "body": "@JamesPhillips That&#39;s fair, but I think you have asked this question many times in similar SO comments.  I don&#39;t think I can really give a different answer.  Do you have a concern with or insight into how initial guesses are made or may be automated?"}, {"owner": {"reputation": 3988, "user_id": 2436862, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4P7Vh.jpg?s=128&g=1", "display_name": "James Phillips", "link": "https://stackoverflow.com/users/2436862/james-phillips"}, "edited": false, "score": 0, "creation_date": 1520529356, "post_id": 49163685, "comment_id": 85363027, "body": "That would make an excellent Stack Overflow question, please post it."}, {"owner": {"reputation": 5396, "user_id": 5179748, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-N6Pn6ac0-tQ/AAAAAAAAAAI/AAAAAAAAB2o/LLcs2JK0DcU/photo.jpg?sz=128", "display_name": "M Newville", "link": "https://stackoverflow.com/users/5179748/m-newville"}, "reply_to_user": {"reputation": 3988, "user_id": 2436862, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4P7Vh.jpg?s=128&g=1", "display_name": "James Phillips", "link": "https://stackoverflow.com/users/2436862/james-phillips"}, "edited": false, "score": 0, "creation_date": 1520562035, "post_id": 49163685, "comment_id": 85376886, "body": "@JamesPhillips Sorry for being dense, but what question would you like to have asked?"}], "tags": [], "owner": {"reputation": 5396, "user_id": 5179748, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-N6Pn6ac0-tQ/AAAAAAAAAAI/AAAAAAAAB2o/LLcs2JK0DcU/photo.jpg?sz=128", "display_name": "M Newville", "link": "https://stackoverflow.com/users/5179748/m-newville"}, "is_accepted": false, "score": 3, "last_activity_date": 1520470323, "creation_date": 1520470323, "answer_id": 49163685, "question_id": 49163125, "link": "https://stackoverflow.com/questions/49163125/scipy-covariance-of-parameters-could-not-be-estimated-working-for-similar-data/49163685#49163685", "title": "Scipy covariance of parameters could not be estimated. Working for similar data why not this data.", "body": "<p>you need to give realistic starting values for <code>a</code> and <code>b</code> to <code>curve_fit()</code>.  The default is (completely idiotic) to use values of 1.0 for all parameters, without warning.  For your data, this is a pretty bad guess, and will cause the fit to fail. Trying better starting points like</p>\n\n<pre><code> params, extras = curve_fit(func, time, volts, [5.0, 0.1])\n</code></pre>\n\n<p>will work much better....</p>\n"}], "owner": {"reputation": 21, "user_id": 6728677, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-i-QaHGG_dkQ/AAAAAAAAAAI/AAAAAAAAAEk/mrEo74U89L4/photo.jpg?sz=128", "display_name": "Noah Schumacher", "link": "https://stackoverflow.com/users/6728677/noah-schumacher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3245, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1520470323, "creation_date": 1520466366, "question_id": 49163125, "link": "https://stackoverflow.com/questions/49163125/scipy-covariance-of-parameters-could-not-be-estimated-working-for-similar-data", "title": "Scipy covariance of parameters could not be estimated. Working for similar data why not this data.", "body": "<p>I am trying to create a curve fit for the data in \"time\" and \"volts\" np arrays. When I try and fit the data I get the error \"covariance of parameters could not be estimated\". If I put in other data points though it works. I am not sure what could be going wrong here.</p>\n\n<pre><code>import numpy as np\nfrom scipy.optimize import curve_fit\nimport matplotlib.pyplot as plt\nimport pandas as pd\nfrom pandas import Series, DataFrame\n\n\ntime = np.array([100,80,70,60,55,50,45,40,35,30,25,22,20])\nvolts = np.array([6.28,6.04,5.72,5.32,5.08,4.80,4.44,3.96,3.40, \n                  2.80,2.01,1.40,1.01])\n\n## Defining exp func for curve fit\ndef func(x, a ,b):\n    return a * (1 - 2*np.exp(-b * x))\n\nparams, extras = curve_fit(func, time, volts)\nprint(params)\n\nplt.scatter(time, volts)\nx_data = np.arange(5,110)\nplt.plot(x_data, params[0]*(1-2*np.exp(-params[1]*x_data)))\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/LCjqG.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/tlsTm.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n\n<p>For example if I use the data:</p>\n\n<pre><code>volts = np.array([2.56, 2.54, 2.52, 2.46, 2.4, 2.38, 2.30, 2.26, 2.18, 2.08, 1.95, 1.80, 1.68, 1.44, 1.22, .9, .46])\n\ntime = np.array([])\n\nfor i in range(100, 15, -5):\n    time = np.append(time, i)\n</code></pre>\n\n<p>Then the fit works great. </p>\n"}, {"tags": ["python", "amazon-web-services", "amazon-s3", "aws-lambda"], "comments": [{"owner": {"reputation": 250720, "user_id": 113962, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b80ae1d65878cf68a4b1a00848467527?s=128&d=identicon&r=PG", "display_name": "Alasdair", "link": "https://stackoverflow.com/users/113962/alasdair"}, "edited": false, "score": 1, "creation_date": 1520466604, "post_id": 49163099, "comment_id": 85331954, "body": "You have <code>open(&#39;&#47;tmp&#47;output2.csv&#39;, &#39;rb&#39;)</code> but you are trying to write to the file. Note you probably don&#39;t have to create a temporary file. The bucket has a <a href=\"http://boto3.readthedocs.io/en/latest/reference/services/s3.html#S3.Bucket.put_object\" rel=\"nofollow noreferrer\"><code>put_object</code></a> method you can use."}, {"owner": {"reputation": 116, "user_id": 8360221, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-X4pJ0WLE1-A/AAAAAAAAAAI/AAAAAAAAAEY/jReh9Zk_WyE/photo.jpg?sz=128", "display_name": "tskittles", "link": "https://stackoverflow.com/users/8360221/tskittles"}, "reply_to_user": {"reputation": 250720, "user_id": 113962, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b80ae1d65878cf68a4b1a00848467527?s=128&d=identicon&r=PG", "display_name": "Alasdair", "link": "https://stackoverflow.com/users/113962/alasdair"}, "edited": false, "score": 0, "creation_date": 1520467301, "post_id": 49163099, "comment_id": 85332148, "body": "just updated the post to reflect responses to your comment. thoughts?"}, {"owner": {"reputation": 45894, "user_id": 271415, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8648256cc53b261c5e1d266380a256fc?s=128&d=identicon&r=PG", "display_name": "jarmod", "link": "https://stackoverflow.com/users/271415/jarmod"}, "reply_to_user": {"reputation": 250720, "user_id": 113962, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b80ae1d65878cf68a4b1a00848467527?s=128&d=identicon&r=PG", "display_name": "Alasdair", "link": "https://stackoverflow.com/users/113962/alasdair"}, "edited": false, "score": 0, "creation_date": 1520469113, "post_id": 49163099, "comment_id": 85332610, "body": "You  need to fix the problem that @Alasdair indicated. You&#39;re attempting to open a non-existent file for <i>reading</i> hence you get FileNotFoundError). You need to open it for writing. Plus CSV files are text files, not binary files, so &quot;wt&quot; (or just &quot;w&quot; because text is the default) would typically be more appropriate."}, {"owner": {"reputation": 116, "user_id": 8360221, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-X4pJ0WLE1-A/AAAAAAAAAAI/AAAAAAAAAEY/jReh9Zk_WyE/photo.jpg?sz=128", "display_name": "tskittles", "link": "https://stackoverflow.com/users/8360221/tskittles"}, "reply_to_user": {"reputation": 45894, "user_id": 271415, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8648256cc53b261c5e1d266380a256fc?s=128&d=identicon&r=PG", "display_name": "jarmod", "link": "https://stackoverflow.com/users/271415/jarmod"}, "edited": false, "score": 0, "creation_date": 1520469809, "post_id": 49163099, "comment_id": 85332802, "body": "@jarmod When I switch it to &#39;w&#39;, the error is <code>Input &lt;_io.TextIOWrapper name=&#39;&#47;tmp&#47;output2.csv&#39; mode=&#39;w&#39; encoding=&#39;UTF-8&#39;&gt; of type: &lt;class &#39;_io.TextIOWrapper&#39;&gt; is not supported</code>"}, {"owner": {"reputation": 250720, "user_id": 113962, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b80ae1d65878cf68a4b1a00848467527?s=128&d=identicon&r=PG", "display_name": "Alasdair", "link": "https://stackoverflow.com/users/113962/alasdair"}, "edited": false, "score": 1, "creation_date": 1520504384, "post_id": 49163099, "comment_id": 85346360, "body": "You need to use <code>&#39;w&#39;</code> or <code>wb</code> to <i>write</i> the file. The docs you link to are for uploading that file, which is a separate step. You haven&#39;t shown enough information to know why <code>put_object</code> failed. You already have the bucket so I would do <code>bucket.put_object(Key=key, Body=response.content)</code>. If that doesn&#39;t work you should show the complete code you tried, and the full traceback."}], "answers": [{"tags": [], "owner": {"reputation": 4459, "user_id": 6079732, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1WHuY.jpg?s=128&g=1", "display_name": "abigperson", "link": "https://stackoverflow.com/users/6079732/abigperson"}, "is_accepted": false, "score": 3, "last_activity_date": 1520469465, "creation_date": 1520469465, "answer_id": 49163584, "question_id": 49163099, "link": "https://stackoverflow.com/questions/49163099/writing-a-file-to-s3-using-lambda-in-python-with-aws/49163584#49163584", "title": "Writing a file to S3 using Lambda in Python with AWS", "body": "<p>Assuming Python 3.6. The way I usually do this is to wrap the bytes content in a <a href=\"https://docs.python.org/3/library/io.html#binary-i-o\" rel=\"nofollow noreferrer\">BytesIO</a> wrapper to create a file like object. And, per the boto3 docs you can use <a href=\"https://boto3.readthedocs.io/en/latest/guide/s3.html#using-the-transfer-manager\" rel=\"nofollow noreferrer\">the-transfer-manager</a> for a managed transfer:</p>\n\n<pre><code>from io import BytesIO\nimport boto3\ns3 = boto3.client('s3')\n\nfileobj = BytesIO(response.content)\n\ns3.upload_fileobj(fileobj, 'mybucket', 'mykey')\n</code></pre>\n\n<p>If that doesn't work I'd double check all IAM permissions are correct.</p>\n"}, {"tags": [], "owner": {"reputation": 45894, "user_id": 271415, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8648256cc53b261c5e1d266380a256fc?s=128&d=identicon&r=PG", "display_name": "jarmod", "link": "https://stackoverflow.com/users/271415/jarmod"}, "is_accepted": false, "score": 4, "last_activity_date": 1520472058, "last_edit_date": 1520472058, "creation_date": 1520470438, "answer_id": 49163707, "question_id": 49163099, "link": "https://stackoverflow.com/questions/49163099/writing-a-file-to-s3-using-lambda-in-python-with-aws/49163707#49163707", "title": "Writing a file to S3 using Lambda in Python with AWS", "body": "<p>You have a writable stream that you're asking boto3 to use as a readable stream which won't work.</p>\n\n<p>Write the file, and then simply use bucket.upload_file() afterwards, like so:</p>\n\n<pre><code>s3 = boto3.resource('s3')\nbucket = s3.Bucket('transportation.manifests.parsed')\nwith open('/tmp/output2.csv', 'w') as data:\n    data.write(response.content)\n\nkey = 'csv/' + key\nbucket.upload_file('/tmp/output2.csv', key)\n</code></pre>\n"}], "owner": {"reputation": 116, "user_id": 8360221, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-X4pJ0WLE1-A/AAAAAAAAAAI/AAAAAAAAAEY/jReh9Zk_WyE/photo.jpg?sz=128", "display_name": "tskittles", "link": "https://stackoverflow.com/users/8360221/tskittles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13806, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1536140042, "creation_date": 1520466197, "last_edit_date": 1536140042, "question_id": 49163099, "link": "https://stackoverflow.com/questions/49163099/writing-a-file-to-s3-using-lambda-in-python-with-aws", "title": "Writing a file to S3 using Lambda in Python with AWS", "body": "<p>In AWS, I'm trying to save a file to S3 in Python using a Lambda function. While this works on my local computer, I am unable to get it to work in Lambda. I've been working on this problem for most of the day and would appreciate help. Thank you.</p>\n\n<pre><code>def pdfToTable(PDFfilename, apiKey, fileExt, bucket, key):\n\n    # parsing a PDF using an API\n    fileData = (PDFfilename, open(PDFfilename, \"rb\"))\n    files = {\"f\": fileData}\n    postUrl = \"https://pdftables.com/api?key={0}&amp;format={1}\".format(apiKey, fileExt)\n    response = requests.post(postUrl, files=files)\n    response.raise_for_status()\n\n    # this code is probably the problem!\n    s3 = boto3.resource('s3')\n    bucket = s3.Bucket('transportation.manifests.parsed')\n    with open('/tmp/output2.csv', 'rb') as data:\n        data.write(response.content)\n        key = 'csv/' + key\n        bucket.upload_fileobj(data, key)\n</code></pre>\n\n<hr>\n\n<pre><code>    # FYI, on my own computer, this saves the file\n    with open('output.csv', \"wb\") as f:\n        f.write(response.content)\n</code></pre>\n\n<p>In S3, there is a bucket <code>transportation.manifests.parsed</code> containing the folder <code>csv</code> where the file should be saved. </p>\n\n<p>The type of <code>response.content</code> is bytes.</p>\n\n<p>From AWS, the error from the current set-up above is <code>[Errno 2] No such file or directory: '/tmp/output2.csv': FileNotFoundError.</code> In fact, my goal is to save the file to the csv folder under a unique name, so <code>tmp/output2.csv</code> might not be the best approach. Any guidance?</p>\n\n<p>In addition, I've tried to use <code>wb</code> and <code>w</code> instead of <code>rb</code> also to no avail. The error with <code>wb</code> is <code>Input &lt;_io.BufferedWriter name='/tmp/output2.csv'&gt; of type: &lt;class '_io.BufferedWriter'&gt; is not supported.</code> The <a href=\"https://boto3.readthedocs.io/en/latest/reference/services/s3.html#S3.Client.upload_fileobj\" rel=\"nofollow noreferrer\">documentation</a> suggests that using 'rb' is the recommended usage, but I do not understand why that would be the case. </p>\n\n<p>Also, I've tried <code>s3_client.put_object(Key=key, Body=response.content, Bucket=bucket)</code> but receive <code>An error occurred (404) when calling the HeadObject operation: Not Found</code>.</p>\n"}, {"tags": ["python", "tensorflow", "machine-learning", "deep-learning", "keras"], "owner": {"reputation": 4144, "user_id": 4909000, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7814948e917a5a698377e2bac255a9ac?s=128&d=identicon&r=PG&f=1", "display_name": "Alk", "link": "https://stackoverflow.com/users/4909000/alk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1520466191, "creation_date": 1520466191, "question_id": 49163097, "link": "https://stackoverflow.com/questions/49163097/keras-model-cannot-deduct-shape-of-input", "title": "Keras Model Cannot Deduct Shape of Input", "body": "<p>I am attempting to implement a Keras model for my Decoder. To do so, I have the following code:</p>\n\n<pre><code>def Encoder(nc_in=3, input_size=64):\n    inp = Input(shape=(input_size, input_size, nc_in))\n    x = Conv2D(64, kernel_size=5, kernel_initializer=conv_init, use_bias=False, padding=\"same\")(inp)\n    x = conv_block(x,128)\n    x = conv_block(x,256)\n    x = conv_block(x,512)\n    x = conv_block(x,1024)\n\n//RELEVANT CODE IS HERE\n\ndense_layer = Dense(1024)\nx = dense_layer(Flatten()(x))\ndense_layer_weights = dense_layer.get_weights()\nx = AdaptiveDropout(0.5, dense_layer_weights) (x)\n\n//END OF RELEVANT CODE\n\nx = Dense(4*4*1024)(x)\nx = Reshape((4, 4, 1024))(x)\nout = upscale_ps(512)(x)\nreturn Model(inputs=inp, outputs=out)\n</code></pre>\n\n<p>I am creating an <code>AdaptiveDropout</code> layer, which requires the <strong>weights</strong> of the previous layer to be able to function. </p>\n\n<p>The weights are used in the <code>AdaptiveDropout</code> layer as follows:</p>\n\n<pre><code>def call(self, inputs, training=None):\n    beta_matrix = np.ones_like(self.weights)\n    pi = self.alpha * self.weights + beta_matrix\n    p = sigmoid(np.tensordot(inputs[1],pi,[[None], [np.maximum(0,pi.ndim - 2)]]))\n    uniform = np.uniform(p.shape)\n    mask = uniform &lt; p\n    if np.mean(p) == 0:\n        return p * inputs[0]\n    else:\n        return inputs[0] * mask\n</code></pre>\n\n<p>The problem here is that the weights as well as the inputs have an unknown shape, for example the shape for the inputs is: <code>(?,1024)</code>. The shape is only known at runtime. Therefore this code fails with index out of range. I'm not sure how to fix this problem, as I must define the model before runtime and cannot add the <code>AdaptiveDropout</code> layer later on.</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 305, "user_id": 2970820, "user_type": "registered", "profile_image": "https://graph.facebook.com/6709713/picture?type=large", "display_name": "davidshere", "link": "https://stackoverflow.com/users/2970820/davidshere"}, "is_accepted": false, "score": 2, "last_activity_date": 1520467334, "last_edit_date": 1520467334, "creation_date": 1520466590, "answer_id": 49163165, "question_id": 49163061, "link": "https://stackoverflow.com/questions/49163061/perform-linear-algebra-operation-with-pandas-data-frame/49163165#49163165", "title": "perform linear algebra operation with pandas data frame", "body": "<p>You want to import <code>numpy</code> and call:</p>\n\n<pre><code>pandas.DataFrame(numpy.outer(x1, x2))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5141, "user_id": 5508500, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/af10e4c357b7d81518f7adb8799bda51?s=128&d=identicon&r=PG&f=1", "display_name": "erocoar", "link": "https://stackoverflow.com/users/5508500/erocoar"}, "is_accepted": true, "score": 1, "last_activity_date": 1520466786, "creation_date": 1520466786, "answer_id": 49163194, "question_id": 49163061, "link": "https://stackoverflow.com/questions/49163061/perform-linear-algebra-operation-with-pandas-data-frame/49163194#49163194", "title": "perform linear algebra operation with pandas data frame", "body": "<p>Inside of <code>pandas</code>, you can go back to data frames to do it, e.g.</p>\n\n<pre><code>x1.to_frame().dot(x2.to_frame().T)\n</code></pre>\n"}], "owner": {"reputation": 1490, "user_id": 3707564, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/60104882193f0b67e860f3aa5332f399?s=128&d=identicon&r=PG&f=1", "display_name": "user40780", "link": "https://stackoverflow.com/users/3707564/user40780"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 976, "favorite_count": 0, "accepted_answer_id": 49163194, "answer_count": 2, "score": -1, "last_activity_date": 1520467334, "creation_date": 1520465947, "last_edit_date": 1520466865, "question_id": 49163061, "link": "https://stackoverflow.com/questions/49163061/perform-linear-algebra-operation-with-pandas-data-frame", "title": "perform linear algebra operation with pandas data frame", "body": "<p>Suppose I have 2 pandas series, which I perceive as column vector in linear algebra <code>x1</code> and <code>x2</code></p>\n\n<p>I want to do the operation <code>x1 * x2^T</code>, which is a column vector multiply with a row vector to produce a matrix (pandas dataframe).</p>\n\n<p>What is the best procedure for this?</p>\n"}, {"tags": ["python", "list", "type-hinting"], "comments": [{"owner": {"reputation": 4488, "user_id": 2529619, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/8fe42206cbd503e03319de38fa7fd36b?s=128&d=identicon&r=PG", "display_name": "ChaimG", "link": "https://stackoverflow.com/users/2529619/chaimg"}, "edited": false, "score": 1, "creation_date": 1525296555, "post_id": 49163050, "comment_id": 87305847, "body": "This is not a duplicate of those questions. The other questions are about type hinting function <i>arguments</i>."}, {"owner": {"reputation": 4488, "user_id": 2529619, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/8fe42206cbd503e03319de38fa7fd36b?s=128&d=identicon&r=PG", "display_name": "ChaimG", "link": "https://stackoverflow.com/users/2529619/chaimg"}, "edited": false, "score": 0, "creation_date": 1525297066, "post_id": 49163050, "comment_id": 87306076, "body": "To answer the question: <code>self._subscribers = [] # type: List[Monitor]</code>"}], "owner": {"reputation": 1, "user_id": 9448285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ce1fdd5e3ad01a802f50f6df1302302?s=128&d=identicon&r=PG&f=1", "display_name": "mc_m", "link": "https://stackoverflow.com/users/9448285/mc-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 568, "favorite_count": 0, "closed_date": 1520465980, "answer_count": 0, "score": 0, "last_activity_date": 1520466019, "creation_date": 1520465857, "question_id": 49163050, "link": "https://stackoverflow.com/questions/49163050/how-to-hint-the-type-of-an-empty-list-in-python", "closed_reason": "Duplicate", "title": "How to &quot;hint&quot; the type of an empty list in python", "body": "<p>I have a Class:</p>\n\n<pre><code>class MyClass(object):\n    def __init__(self):\n        self._subscribers = []\n</code></pre>\n\n<p>and i want to specify the type that will go into the list 'self._subscribers'. for example a queue.Queue() object. but the list should still be an empty list.</p>\n\n<p>just for ease of use in PyCharm</p>\n\n<pre><code>self._subscribers = [queue.Queue]\nself._subscribers = list[queue.Queue]\n</code></pre>\n\n<p>both don't seem to work</p>\n\n<p>thanks</p>\n\n<p>PS.: Python 3.64</p>\n"}, {"tags": ["python", "python-3.x", "while-loop"], "comments": [{"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 2, "creation_date": 1520465758, "post_id": 49163031, "comment_id": 85331724, "body": "&quot;this does not seem to work&quot; is not a useful problem statement. Can you tell us what it does, and what you expect it to do? You&#39;ve written pseudo-code above, so it&#39;s obviously not executable...what code did you try and find that it didn&#39;t work?"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 3, "creation_date": 1520465782, "post_id": 49163031, "comment_id": 85331733, "body": "Well it won&#39;t work because it&#39;s pseudocode. Please give a <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>"}, {"owner": {"reputation": 1, "user_id": 9459414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b270170ba4bcc8659d0aa87a34932504?s=128&d=identicon&r=PG&f=1", "display_name": "AJin", "link": "https://stackoverflow.com/users/9459414/ajin"}, "edited": false, "score": 1, "creation_date": 1520466061, "post_id": 49163031, "comment_id": 85331795, "body": "Included my actual code, I just wanted a general idea of how to encode two branches in a while statement.  Thanks in advance for the help."}, {"owner": {"reputation": 1, "user_id": 9459414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b270170ba4bcc8659d0aa87a34932504?s=128&d=identicon&r=PG&f=1", "display_name": "AJin", "link": "https://stackoverflow.com/users/9459414/ajin"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1520466394, "post_id": 49163031, "comment_id": 85331899, "body": "@roganjosh 3.6.1"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1520467429, "post_id": 49163031, "comment_id": 85332185, "body": "<code>weight</code> is defined locally to <code>eweight</code>, it can&#39;t be accessed from <code>works</code>. And <code>wgt</code> is never called at all, why is it defined?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1520467537, "post_id": 49163031, "comment_id": 85332218, "body": "You have a <code>return</code> statement in your <code>while</code> loop. That exits from the loop immediately, the loop never repeats."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1520467675, "post_id": 49163031, "comment_id": 85332264, "body": "<b>I want to alternate ... until i=9.</b> You never update <code>i</code>, how will it ever become 9?"}], "answers": [{"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 0, "last_activity_date": 1520467870, "creation_date": 1520467870, "answer_id": 49163353, "question_id": 49163031, "link": "https://stackoverflow.com/questions/49163031/while-loop-true-and-false-for-approximation-of-roots/49163353#49163353", "title": "While Loop true and false for approximation of roots", "body": "<p>If you want to alternate between them, don't put them each in their own <code>while</code> loops, put</p>\n\n<pre><code>while i &lt; 9:\n    if works(a, b):\n        do something\n    if not works(a, b):\n        do something else\n</code></pre>\n\n<p>And whatever you test in your <code>while</code> conditions needs to be something that changes somewhere in the loop. Otherwise you'll get an infinite loop.</p>\n"}], "owner": {"reputation": 1, "user_id": 9459414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b270170ba4bcc8659d0aa87a34932504?s=128&d=identicon&r=PG&f=1", "display_name": "AJin", "link": "https://stackoverflow.com/users/9459414/ajin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 96, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1520467870, "creation_date": 1520465664, "last_edit_date": 1520467026, "question_id": 49163031, "link": "https://stackoverflow.com/questions/49163031/while-loop-true-and-false-for-approximation-of-roots", "title": "While Loop true and false for approximation of roots", "body": "<p>I'm a bit new to programming, and I'm trying to create a root-approximating code.  Namely, I'm doing something similar to Newton's method in calculus.  The idea is, I'm going to input in a big value, subtract until I know I've passed the root, and then add a smaller quantity until I've passed the root, and iterate until I'm in some comfortable error region.</p>\n\n<p>Here's some pseudo code:</p>\n\n<pre><code>def approx(a,b,i):\n    while ((1/2)**i) &gt;= (1/2)**10:\n        while (another function is true):\n            modify values, record root = r\n        while (the same function above is false):\n            modify values, record root = r\n    return approx(a,b,i+1)\nreturn(a,b,r)\n</code></pre>\n\n<p>This does not seem to work in Python, so I was wondering if anyone could point me in the correct direction. </p>\n\n<p>Edit: included my actual code:</p>\n\n<pre><code>from fractions import *\nfrom math import sqrt\nfrom math import fabs\n\ndef pweight(c,d):\n  if d &gt; c:\n    return pweight(d,c)\n  else:\n    return [c+d,c,d]\n\ndef eweight(a,b):\n  if a == b:\n    return [a]\n  elif b &gt; a:\n    return eweight(b,a)\n  else:\n    return [b] + eweight(a-b,b)\n    def weight(a,b,c,d):\n      if a*b/2 &gt; c*d:\n        print(\"No Embedding Exists\")\n        return (False)\n      else:\n        return (True, [c+d]+sorted((pweight(c,d) + eweight(a,b))[1:], reverse=True))\n    def wgt(a,b,c,d):\n      return ([c+d]+sorted((pweight(c,d) + eweight(a,b))[1:], reverse=True))\n\n\n\ndef red(a,i,k):\n  d=a[0]-a[1]-a[2]-a[3]\n  if any(item &lt; 0 for item in a[1:]):\n    # print (\"No Embedding Exists\")\n    return (False, i)\n  elif d &gt;= 0:\n    # print (\"Embedding Exists! How many iterations?\")\n    # print(i)\n    return (True, i)\n  elif d&lt;0:\n    a=[a[0]+d,a[1]+d,a[2]+d,a[3]+d]+a[4:]\n    a=[a[0]]+sorted(a[1:],reverse=True)\n    k.append(a)\n    i=i+1\n    return red(a,i,k)\ndef works(a,b):\n  L = sqrt(a/(2*b))\n  w = weight(1,a,L,L*b)\n  return w[0] and red(w[1],0,[])\n\ndef inf(a,b,i):\n  while ((1/2)**(i+1)) &gt;= (1/2)**(10)):\n      while works(a,b):\n        a = a - (1/2)**i\n        L = sqrt(a/(2*b))\n      while not works(a,b):\n        a = a + (1/2)**(i+1)\n        L = sqrt(a/(2*b))\n      return inf(a,b,i+1)\n  return (a,b,L)\n</code></pre>\n\n<p>I want to input in \"inf(9,1,0)\" and have this code return something close to (255/32,1,sqrt(255/64)).  The main problem is the \"while works(a,b):\" and \"while not works(a,b):\" in the function \"inf(a,b,i).\"  I want the function to alternate between the \"while works\" and \"while not works\" until i=9.</p>\n\n<p>Any sort of general idea would be appreciated (namely, how do you do some sort of alternating function within a while loop).</p>\n"}, {"tags": ["python", "path", "ocr", "tesseract"], "answers": [{"tags": [], "owner": {"reputation": 437, "user_id": 8646727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1f0f714f6043f8c027d0ad50eb883a2?s=128&d=identicon&r=PG&f=1", "display_name": "knobi", "link": "https://stackoverflow.com/users/8646727/knobi"}, "is_accepted": false, "score": 1, "last_activity_date": 1544091085, "creation_date": 1544091085, "answer_id": 53648961, "question_id": 49162994, "link": "https://stackoverflow.com/questions/49162994/pyocr-get-availables-tools-returns-an-empty-list-can-access-tesseract-from/53648961#53648961", "title": "PyOCR - get_availables_tools() returns an empty list / Can access tesseract from the command line", "body": "<p>Had a similar problem using libtesseract-4.dll: Tools list was empty.</p>\n\n<p>As i discovered pyocr is using get_version which returned 0.0.0 . \nAs a Workaround i patched get_version on my installation\nto give back the appropriate value. </p>\n\n<p>This worked because the parameter passing especially the -psm / --psm parameter depends on the result of get_version(). </p>\n\n<p>The issue was accepted as bug and seems to be fixed by the author\nsoon. <a href=\"https://gitlab.gnome.org/World/OpenPaperwork/pyocr/issues/106\" rel=\"nofollow noreferrer\">https://gitlab.gnome.org/World/OpenPaperwork/pyocr/issues/106</a></p>\n"}, {"comments": [{"owner": {"reputation": 813, "user_id": 1226074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba0490d22335a1ddc9c2b17af8a853c6?s=128&d=identicon&r=PG", "display_name": "sekrett", "link": "https://stackoverflow.com/users/1226074/sekrett"}, "edited": false, "score": 0, "creation_date": 1611222050, "post_id": 55198799, "comment_id": 116382756, "body": "Thanks. TESSERACT_CMD solved the issue. Just curious, what is Libtesseract and how to install it?"}, {"owner": {"reputation": 403, "user_id": 8007403, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/46f96745d59cfb96970830e75a9615dd?s=128&d=identicon&r=PG&f=1", "display_name": "Pawel Kam", "link": "https://stackoverflow.com/users/8007403/pawel-kam"}, "reply_to_user": {"reputation": 813, "user_id": 1226074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba0490d22335a1ddc9c2b17af8a853c6?s=128&d=identicon&r=PG", "display_name": "sekrett", "link": "https://stackoverflow.com/users/1226074/sekrett"}, "edited": false, "score": 1, "creation_date": 1611236504, "post_id": 55198799, "comment_id": 116389676, "body": "Libtesseract is an OCR engine written in C. I don&#39;t have any experience with this one, but for PyOCR I guess you could start with Python wrapper like this one <a href=\"https://github.com/virtuald/python-tesseract-sip\" rel=\"nofollow noreferrer\">github.com/virtuald/python-tesseract-sip</a>."}], "tags": [], "owner": {"reputation": 403, "user_id": 8007403, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/46f96745d59cfb96970830e75a9615dd?s=128&d=identicon&r=PG&f=1", "display_name": "Pawel Kam", "link": "https://stackoverflow.com/users/8007403/pawel-kam"}, "is_accepted": false, "score": 1, "last_activity_date": 1552752689, "creation_date": 1552752689, "answer_id": 55198799, "question_id": 49162994, "link": "https://stackoverflow.com/questions/49162994/pyocr-get-availables-tools-returns-an-empty-list-can-access-tesseract-from/55198799#55198799", "title": "PyOCR - get_availables_tools() returns an empty list / Can access tesseract from the command line", "body": "<p><code>get_available_tools()</code> returns a list of \u2018<em>OCR tools available on the local system</em>\u2019 (see <a href=\"https://gitlab.gnome.org/World/OpenPaperwork/pyocr/blob/master/src/pyocr/pyocr.py\" rel=\"nofollow noreferrer\">source code</a>). As I understand, pyocr checks in PATH for available tools, which you have to install yourself.</p>\n\n<p>For now, Pyocr supports the following OCR tools:</p>\n\n<ul>\n<li>Libtesseract (Python bindings for the C API)</li>\n<li>Tesseract (wrapper: fork + exec)</li>\n<li>Cuneiform (wrapper: fork + exec)</li>\n</ul>\n\n<p>If you have installed such tools, but for some reason you don\u2019t have them in your local path (like me), you can always overwrite it like this:</p>\n\n<pre><code>pyocr.tesseract.TESSERACT_CMD = r'&lt;full_path_to_your_tesseract_executable&gt;'\npyocr.cuneiform.CUNEIFORM_CMD = r'&lt;full_path_to_your_cuneiform_executable&gt;'\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9452842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d839af10dd88ad36d664b5981028d8eb?s=128&d=identicon&r=PG&f=1", "display_name": "Wade_MechE", "link": "https://stackoverflow.com/users/9452842/wade-meche"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3261, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1552752689, "creation_date": 1520465414, "question_id": 49162994, "link": "https://stackoverflow.com/questions/49162994/pyocr-get-availables-tools-returns-an-empty-list-can-access-tesseract-from", "title": "PyOCR - get_availables_tools() returns an empty list / Can access tesseract from the command line", "body": "<p>I am attempting to install PyOCR on my computer running Windows 7. I have installed Tesseract-OCR 3.05 for Windows and have added the directory containing Tesseract (C:\\Program Files (x86)\\Tesseract-OCR) to the PATH user variable, the Path System Variable, and created the new system variable TESSDATA_PREFIX with the Tesseract directory. </p>\n\n<p>I am able to use Tesseract directly from the command line to process images, so I am confident that Tesseract was correctly installed. I also made sure to installed Tesseract with the C/C++ library files.</p>\n\n<p>I know this question has been posed before, but since I have added the directories to the environmental variables, I am unsure what to try next. </p>\n\n<p>Below is the output of the \"get_available_tools()\" method.</p>\n\n<pre><code>Python 3.6.3 |Anaconda custom (64-bit)| (default, Oct 15 2017, 03:27:45) \n[MSC v.1900 64 bit (AMD64)] on win32\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; import pyocr\n&gt;&gt;&gt; import pyocr.builders\n&gt;&gt;&gt; pyocr.get_available_tools()\n[]\n&gt;&gt;&gt;\n</code></pre>\n"}, {"tags": ["python", "multithreading", "tkinter", "locking", "deadlock"], "comments": [{"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1520468484, "post_id": 49162990, "comment_id": 85332456, "body": "In general, you can only do Tk stuff on the main thread. If you do something like creating a new Label on a worker thread, depending on your platform, exact details of your code, whether it\u2019s Tuesday, etc., it may work, do nothing, crash, hang, or hang until the main thread gets a chance to run the event loop. The last one would cause a literal deadlock, and some of the others might look like a deadlock if you\u2019re not being very precise."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user3825815"}, "edited": false, "score": 0, "creation_date": 1520531518, "post_id": 49163588, "comment_id": 85364307, "body": "Thank you for your answer. With a lot of lost hours trying to make <code>tkinter</code> work and your answer I&#39;ve finally decided to use OpenCV directly."}], "tags": [], "owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "is_accepted": true, "score": 1, "last_activity_date": 1520469495, "creation_date": 1520469495, "answer_id": 49163588, "question_id": 49162990, "link": "https://stackoverflow.com/questions/49162990/deadlock-in-python/49163588#49163588", "title": "DeadLock in Python", "body": "<p>The most likely problem here is that you're attempting to do Tkinter stuff, like creating a new <code>tk.Label</code>, from a background thread, and that's not allowed.</p>\n\n<p>My first guess is that what's happening is that the Tk code on the background thread is just hanging\u2014which isn't really a deadlock, but since you've got a thread hanging forever while holding a lock, nobody else will ever acquire that lock, so it's much the same effect.</p>\n\n<p>The only way to solve this is to have your background thread(s) post messages to a queue requesting GUI stuff to get done for them, and have the main thread poll that queue each time through the event loop (e.g., via an <code>after</code> function).</p>\n\n<p>The old <code>mttkinter</code> project wrapped this up transparently, but unfortunately it was never updated for modern Python. A few years ago, I slapped together a quick port (at <a href=\"https://github.com/abarnert/mttkinter\" rel=\"nofollow noreferrer\">https://github.com/abarnert/mttkinter</a>), but I never tested it rigorously, and I don't know if anyone's ever used it for anything serious.</p>\n\n<p>But you could try this at least for a quick test. If it makes no difference, then you've probably ruled out Tk threading issues; if it makes a difference, great (although that difference could be \"now it doesn't freeze up, but it crashes 50% of the time\u2014in which case you're not done, and can't trust <code>mttkinter</code> as-is, but at least you know that Tk threading is the thing you have to solve).</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user3825815"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1403, "favorite_count": 0, "accepted_answer_id": 49163588, "answer_count": 1, "score": 0, "last_activity_date": 1520469495, "creation_date": 1520465387, "question_id": 49162990, "link": "https://stackoverflow.com/questions/49162990/deadlock-in-python", "title": "DeadLock in Python", "body": "<p>I'm programing a GUI with <code>tkinter</code> that uses <code>cv2</code> to extract the video stream from the computer camera. To do that, a <code>Thread</code> reloads the image using a while loop.</p>\n\n<p>I have been using <code>Locks</code> so both <code>Threads</code> (the main one and the auxiliar) end their process as expected. However, i'm not able to do that because of a DeadLock that I can't identify.</p>\n\n<p>The code is the following:</p>\n\n<pre><code>import tkinter as tk\nimport cv2\nimport time\nimport sys\nimport threading\nfrom PIL import ImageTk, Image\n\n\nclass Application:\n    gui_root = None\n    gui_panel = None\n\n    frame = None\n    video_capture = None\n    stop_event = None\n    thread = None\n    thread_lock = None\n\n    def __init__(self):\n\n        self.gui_root = tk.Tk()\n        self.gui_root.geometry(\"640x480\")\n        self.gui_root.resizable(False, False)\n\n        self.video_capture = cv2.VideoCapture(0)\n\n        self.stop_event = threading.Event()\n        self.thread_lock = threading.Lock()\n        self.thread = threading.Thread(target=self.load_frame, args=())\n        self.thread.start()\n\n        self.gui_root.wm_protocol(\"WM_DELETE_WINDOW\", self.on_close)\n\n    def start(self):\n\n        self.gui_root.mainloop()\n\n    def load_frame(self):\n\n        print('Starting load_frame')\n\n        while self.thread_lock.acquire() and not self.stop_event.is_set():\n\n                _, self.frame = self.video_capture.read()\n                self.frame = cv2.resize(self.frame, (640, 480))\n\n                c_image = cv2.cvtColor(self.frame, cv2.COLOR_BGR2RGB)\n                c_image_tk = ImageTk.PhotoImage(Image.fromarray(c_image))\n\n                if self.gui_panel is None:\n                    self.gui_panel = tk.Label(image=c_image_tk)\n                    self.gui_panel.place(width=640, height=480, x=0, y=0)\n                else:\n                    self.gui_panel.configure(image=c_image_tk)\n\n                self.thread_lock.release()\n\n        print(\"End of while\")\n        self.thread_lock.release()\n        print('End of Process 2')\n\n    def on_close(self):\n\n        self.stop_event.set()\n        print(\"Event set\")\n        with self.thread_lock:\n            self.video_capture.release()\n            self.gui_root.destroy()\n\n\napp = Application()\napp.start()\n</code></pre>\n"}, {"tags": ["python", "class", "oop"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1520465433, "post_id": 49162957, "comment_id": 85331619, "body": ".... why are you overriding the <code>list</code> class to add an attribute that <i>is a list</i> which you then redirect <code>.append</code>&#39;s to???"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1520465469, "post_id": 49162957, "comment_id": 85331637, "body": "@donkopotamus Just don&#39;t use it <i>unless you understand it&#39;s semantics</i>. Here, it should work just fine."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1520465526, "post_id": 49162957, "comment_id": 85331655, "body": "Anyway, your code prints <code>[1, 2, 3]</code> so I cannot reproduce your issue..."}, {"owner": {"reputation": 1743, "user_id": 4116969, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/pNRr1.jpg?s=128&g=1", "display_name": "HimanAB", "link": "https://stackoverflow.com/users/4116969/himanab"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1520465628, "post_id": 49162957, "comment_id": 85331680, "body": "@juanpa.arrivillaga  It does not print [1,2,3]"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1520465635, "post_id": 49162957, "comment_id": 85331683, "body": "<code>m</code> however, will definitely print <code>[]</code>.... why did you think it would do something different?"}, {"owner": {"reputation": 1743, "user_id": 4116969, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/pNRr1.jpg?s=128&g=1", "display_name": "HimanAB", "link": "https://stackoverflow.com/users/4116969/himanab"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1520465692, "post_id": 49162957, "comment_id": 85331699, "body": "The problem is not giving [] as the parameter to <b>init</b>. even if you remove that m will still be []"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1520465704, "post_id": 49162957, "comment_id": 85331700, "body": "Yes it does, it prints <code>Hehe [1, 2]</code> and then <code>hoho [1, 2, 3]</code> on another line"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1520465725, "post_id": 49162957, "comment_id": 85331710, "body": "The problem is you do not understand the difference between inheritance and composition. Why are you inheriting from <code>list</code>???"}, {"owner": {"reputation": 1743, "user_id": 4116969, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/pNRr1.jpg?s=128&g=1", "display_name": "HimanAB", "link": "https://stackoverflow.com/users/4116969/himanab"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1520465781, "post_id": 49162957, "comment_id": 85331731, "body": "Guys do not try to judge me why I did that. This is a piece of code and I am trying to understand why the output is like this"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1520465840, "post_id": 49162957, "comment_id": 85331748, "body": "I&#39;m not &quot;judging&quot; you, I&#39;m trying to understand your questions and expectations. You keep talking about &quot;printing&quot;, but your code prints exactly what you&#39;d expect. Note, a line wiht <code>m</code> <i>doesn&#39;t print anything</i> unless you are in a REPL, in which case it prints <code>repr(m)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 18468, "user_id": 5249307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c640cd731ca8e455d79860519b6b208?s=128&d=identicon&r=PG", "display_name": "donkopotamus", "link": "https://stackoverflow.com/users/5249307/donkopotamus"}, "is_accepted": true, "score": 3, "last_activity_date": 1520465740, "creation_date": 1520465740, "answer_id": 49163039, "question_id": 49162957, "link": "https://stackoverflow.com/questions/49162957/python-class-print-object-always-returns-an-empty-list/49163039#49163039", "title": "Python class print object always returns an empty list", "body": "<p>As <code>MyList</code> inherits from <code>list</code>, it already contains internal storage for items that <code>append</code> (and <code>extend</code>) would normally add to. When you <code>print(m)</code> it is this <em>internal</em> storage that is shown.</p>\n\n<p>In your case you have then overridden <code>append</code> to redirect items to be added to a separate attribute (<code>lst</code>), meaning that internal storage remains empty.</p>\n\n<p>Note that you have not overridden <code>extend</code>.  Thus:</p>\n\n<pre><code># this will add to the *internal* storage, not `.lst`\n&gt;&gt;&gt; m.extend([\"my\", \"gosh\"])`\n&gt;&gt;&gt; print(m)\n['my', 'gosh']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 255971, "user_id": 464744, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/3dfd6067f4c69986a652444f44bb6d7c?s=128&d=identicon&r=PG", "display_name": "Blender", "link": "https://stackoverflow.com/users/464744/blender"}, "is_accepted": false, "score": 0, "last_activity_date": 1520466044, "creation_date": 1520466044, "answer_id": 49163071, "question_id": 49162957, "link": "https://stackoverflow.com/questions/49162957/python-class-print-object-always-returns-an-empty-list/49163071#49163071", "title": "Python class print object always returns an empty list", "body": "<p><code>Mylist</code> doesn't in any way utilize the fact that it's subclassing <code>list</code>. Your code would work if <code>list</code> actually had a <code>lst</code> attribute that itself was a list, but this is not the case. </p>\n\n<p>You need to use the exposed interface of the <code>list</code> object that you inherited from if you want your overridden methods to do things that are picked up by the underlying <code>list</code> object:</p>\n\n<pre><code>class MyList(list):\n    def __init__(self, iterable):\n        print('I was passed:', iterable)\n\n        super().__init__(iterable)\n\n    def append(self, element):\n        print('I am appending the element:', element)\n\n        super().append(element)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "is_accepted": false, "score": 0, "last_activity_date": 1520474529, "creation_date": 1520474529, "answer_id": 49164213, "question_id": 49162957, "link": "https://stackoverflow.com/questions/49162957/python-class-print-object-always-returns-an-empty-list/49164213#49164213", "title": "Python class print object always returns an empty list", "body": "<p>If you just want to <em>use</em> a list, you don't need to inherit from <code>list</code>, and shouldn't:</p>\n\n<pre><code>class Mylist: # no (list) here!\n    def __init__(self,lst=[]):\n        self.lst=list(lst)\n    def append(self,item):\n        self.lst.append(item)\nm=Mylist([1,2])\nm.append(3)\n</code></pre>\n\n<p>This works. Of course printing out <code>m</code> will just get you something like <code>&lt;__main__.MyList at 0x12345678&gt;</code>, because you haven't told it how you want to be printed. You need to add another method like this:</p>\n\n<pre><code>    def __repr__(self):\n        return '{}({})'.format(type(self).__name__, self.lst)\n</code></pre>\n\n<p>And now you'll print out <code>MyList([1, 2, 3])</code>.</p>\n\n<hr>\n\n<p>If you want to <em>look</em> like a <code>list</code>, you still don't inherit from <code>list</code> for that. In most cases, in Python, \"looking like a list\" is just a matter of duck-typing: you implement all the right methods, and everything just works.</p>\n\n<p>However, you might want to consider inheriting from <a href=\"https://docs.python.org/3/library/collections.abc.html\" rel=\"nofollow noreferrer\"><code>MutableSequence</code></a>. Then, you just implement about 7 or 8 methods, and you get the whole rest of the <code>list</code>'s behavior for free. And you're also providing a way that code that, for whatever reason, needs to explicitly check whether you \"act like a list\" can do so.</p>\n\n<hr>\n\n<p>So, when <em>should</em> you inherit from <code>list</code>? When you want to use the <code>list</code>'s internal storage and implementation as your own.</p>\n\n<p>Here's a silly example. To the extent that it has any reason to exist at all, it's reasonable that it should be a <code>list</code> subclass:</p>\n\n<pre><code>class FreezableList(list):\n    def frozen_copy(self):\n        return tuple(self)\n    def __repr__(self):\n        return '{}({})'.format(type(self).__name__, self.lst)\n</code></pre>\n"}], "owner": {"reputation": 1743, "user_id": 4116969, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/pNRr1.jpg?s=128&g=1", "display_name": "HimanAB", "link": "https://stackoverflow.com/users/4116969/himanab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 253, "favorite_count": 0, "accepted_answer_id": 49163039, "answer_count": 3, "score": 0, "last_activity_date": 1520474529, "creation_date": 1520465190, "last_edit_date": 1520465601, "question_id": 49162957, "link": "https://stackoverflow.com/questions/49162957/python-class-print-object-always-returns-an-empty-list", "title": "Python class print object always returns an empty list", "body": "<p>I have the following code:</p>\n\n<pre><code>class Mylist(list):\n\n    def __init__(self,lst=[]):\n        self.lst=list(lst)\n\n    def append(self,item):\n        self.lst.append(item)\nm=Mylist([1,2])\nm.append(3)\nm\n</code></pre>\n\n<p>Intuitively, this code should print [1,2,3] or maybe [3]? but definitely not []. I am wondering why is this happening? Although when I use m.lst instead of just m, then it prints [1,2,3]. </p>\n"}, {"tags": ["python", "orange"], "comments": [{"owner": {"reputation": 5375, "user_id": 1090455, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d9a0265d342807a582efe8bf053917f6?s=128&d=identicon&r=PG", "display_name": "K3---rnc", "link": "https://stackoverflow.com/users/1090455/k3-rnc"}, "edited": false, "score": 0, "creation_date": 1520508049, "post_id": 49162942, "comment_id": 85348594, "body": "Does right-clicking and choosing <code>Rename (F2)</code> in the context menu work for you?"}, {"owner": {"reputation": 243, "user_id": 1636455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e846fa69b65d5a5ab3c1b1360db13675?s=128&d=identicon&r=PG", "display_name": "Dmitriy Kalugin-Balashov", "link": "https://stackoverflow.com/users/1636455/dmitriy-kalugin-balashov"}, "reply_to_user": {"reputation": 5375, "user_id": 1090455, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d9a0265d342807a582efe8bf053917f6?s=128&d=identicon&r=PG", "display_name": "K3---rnc", "link": "https://stackoverflow.com/users/1090455/k3-rnc"}, "edited": false, "score": 1, "creation_date": 1520516230, "post_id": 49162942, "comment_id": 85353800, "body": "I am asking how to do it from widget code..."}, {"owner": {"reputation": 5375, "user_id": 1090455, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d9a0265d342807a582efe8bf053917f6?s=128&d=identicon&r=PG", "display_name": "K3---rnc", "link": "https://stackoverflow.com/users/1090455/k3-rnc"}, "edited": false, "score": 1, "creation_date": 1520541624, "post_id": 49162942, "comment_id": 85369761, "body": "That&#39;s widget&#39;s <code>name</code> class attribute, I think. No further control over it."}], "owner": {"reputation": 243, "user_id": 1636455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e846fa69b65d5a5ab3c1b1360db13675?s=128&d=identicon&r=PG", "display_name": "Dmitriy Kalugin-Balashov", "link": "https://stackoverflow.com/users/1636455/dmitriy-kalugin-balashov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1520465080, "creation_date": 1520465080, "question_id": 49162942, "link": "https://stackoverflow.com/questions/49162942/is-it-possible-to-change-orange3-on-canvas-widget-caption", "title": "Is it possible to change Orange3 on-canvas widget caption?", "body": "<p>I am developing Orange3 widget. Is there any way to change on-canvas widget caption in execution time?</p>\n\n<p><a href=\"https://i.stack.imgur.com/VBbj4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VBbj4.png\" alt=\"My widget\"></a></p>\n"}, {"tags": ["python", "django", "django-models", "sqlite", "django-forms"], "comments": [{"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1520465294, "post_id": 49162937, "comment_id": 85331580, "body": "Here be bugs, I&#39;ve hit several of them too.  PostgreSQL is the only backend I&#39;ve found where distinct is working correctly with Django."}, {"owner": {"reputation": 57, "user_id": 6556619, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/25a429a153ed075a91225bb634efbf4d?s=128&d=identicon&r=PG&f=1", "display_name": "person10559", "link": "https://stackoverflow.com/users/6556619/person10559"}, "reply_to_user": {"reputation": 250720, "user_id": 113962, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b80ae1d65878cf68a4b1a00848467527?s=128&d=identicon&r=PG", "display_name": "Alasdair", "link": "https://stackoverflow.com/users/113962/alasdair"}, "edited": false, "score": 0, "creation_date": 1520466147, "post_id": 49162937, "comment_id": 85331834, "body": "@Alasdair I&#39;ve edited my query in my question so it&#39;s now City.objects.filter(country_id=country_id).order_by().distin&zwnj;&#8203;ct(). However, I&#39;m still getting duplicate values in my dropdown menu."}, {"owner": {"reputation": 250720, "user_id": 113962, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b80ae1d65878cf68a4b1a00848467527?s=128&d=identicon&r=PG", "display_name": "Alasdair", "link": "https://stackoverflow.com/users/113962/alasdair"}, "edited": false, "score": 0, "creation_date": 1520466298, "post_id": 49162937, "comment_id": 85331881, "body": "Maybe you&#39;re trying to fix this in the wrong place. If you had <code>unique_together = (&#39;country&#39;, &#39;name&#39;)</code> on the <code>City</code> model, that would prevent duplicates getting into the database."}, {"owner": {"reputation": 3625, "user_id": 992401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NgSTh.jpg?s=128&g=1", "display_name": "krs", "link": "https://stackoverflow.com/users/992401/krs"}, "edited": false, "score": 1, "creation_date": 1520468044, "post_id": 49162937, "comment_id": 85332352, "body": "if <code>City.objects.filter(country_id=country_id).order_by().distin&zwnj;&#8203;ct()</code> gives you duplicates then you probably have duplicates in your database, they are distinct because their ID fields differ."}], "answers": [{"tags": [], "owner": {"reputation": 376, "user_id": 253599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85aad3b34c8f3910720944b7ef9842a8?s=128&d=identicon&r=PG", "display_name": "Tyson", "link": "https://stackoverflow.com/users/253599/tyson"}, "is_accepted": false, "score": 1, "last_activity_date": 1520472429, "creation_date": 1520472429, "answer_id": 49163937, "question_id": 49162937, "link": "https://stackoverflow.com/questions/49162937/queryset-distinct-with-filter-and-order-by-does-not-work/49163937#49163937", "title": "Queryset distinct() with filter() and order_by() does not work", "body": "<p>When the database server runs an ordered distinct query, it will:</p>\n\n<ol>\n<li>Collect matching rows from storage, checking them against the <code>WHERE</code> clause.</li>\n<li>Sort according to the <code>ORDER BY</code> clause.</li>\n<li>Emit each row, where the row is <code>DISTINCT</code> from the previous (ordered) emitted row.</li>\n</ol>\n\n<p>Since you have explicitly <em>disabled</em> ordering by not passing any field names to <code>order_by()</code>, the database is free to emit rows in whatever order it chooses (typically in the order they retrieved from storage).</p>\n\n<p><strong><code>DISTINCT</code> filtering doesn't apply across the whole result set, it only applies <em>against the preceding emitted row</em>.</strong>  And since your results are being emitted in an undefined (random) order, <code>DISTINCT</code> isn't likely to filter any results.</p>\n\n<p>You must order your results accordingly by specifying field names in the <code>order_by(*fields)</code> part of your query.</p>\n"}], "owner": {"reputation": 57, "user_id": 6556619, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/25a429a153ed075a91225bb634efbf4d?s=128&d=identicon&r=PG&f=1", "display_name": "person10559", "link": "https://stackoverflow.com/users/6556619/person10559"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 770, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1520472429, "creation_date": 1520465070, "last_edit_date": 1520466061, "question_id": 49162937, "link": "https://stackoverflow.com/questions/49162937/queryset-distinct-with-filter-and-order-by-does-not-work", "title": "Queryset distinct() with filter() and order_by() does not work", "body": "<p>I am using the following models and forms to build two dropdown menus. The City menu is dependent upon the Country menu. Right now my code does the filtering and ordering correctly. However, distinct() is not working. I've played around with the ordering of the queries for a while and it still doesn't work. How can I fix this?</p>\n\n<p><strong>models.py</strong></p>\n\n<pre><code>from django.db import models\n\nclass Country(models.Model):\n    name = models.CharField(max_length=30)\n\n    def __str__(self):\n        return self.name\n\nclass City(models.Model):\n    country = models.ForeignKey(Country, on_delete=models.CASCADE)\n    name = models.CharField(max_length=30)\n\n    def __str__(self):\n        return self.name\n\nclass Person(models.Model):\n    country = models.ForeignKey(Country, on_delete=models.SET_NULL, null=True)\n    city = models.ForeignKey(City, on_delete=models.SET_NULL, null=True)\n\n    def __str__(self):\n        return self.name\n</code></pre>\n\n<p><strong>forms.py</strong></p>\n\n<pre><code>from django import forms\nfrom .models import Person, City\n\nclass PersonForm(forms.ModelForm):\n    class Meta:\n        model = Person\n        fields = ('country', 'city')\n\n    def __init__(self, *args, **kwargs):\n        super().__init__(*args, **kwargs)\n        self.fields['city'].queryset = City.objects.none()\n\n        if 'country' in self.data:\n            try:\n                country_id = int(self.data.get('country'))\n                self.fields['city'].queryset = City.objects.filter(country_id=\\\n                    country_id).order_by().distinct()\n            except (ValueError, TypeError):\n                pass  # invalid input from the client; ignore and fallback to empty City queryset\n        elif self.instance.pk:\n            self.fields['city'].queryset = self.instance.country.city_set.order_by('name')\n</code></pre>\n\n<p><strong>views.py</strong></p>\n\n<pre><code>from django.shortcuts import render\nfrom django.views.generic import ListView, CreateView, UpdateView\nfrom django.urls import reverse_lazy\n\nfrom .models import Person, City\nfrom .forms import PersonForm\n\nclass PersonListView(ListView):\n    model = Person\n    context_object_name = 'people'\n\nclass PersonCreateView(CreateView):\n    model = Person\n    form_class = PersonForm\n    success_url = reverse_lazy('person_changelist')\n\nclass PersonUpdateView(UpdateView):\n    model = Person\n    form_class = PersonForm\n    success_url = reverse_lazy('person_changelist')\n\ndef load_cities(request):\n    country_id = request.GET.get('country')\n    cities = City.objects.filter(country_id=country_id).order_by('name')\n    return render(request, 'hr/city_dropdown_list_options.html', {'cities': cities})\n</code></pre>\n"}, {"tags": ["python", "opencv"], "comments": [{"owner": {"reputation": 3298, "user_id": 8928024, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/75f4b1f5d87975964979ce2718af1ae9?s=128&d=identicon&r=PG&f=1", "display_name": "ZF007", "link": "https://stackoverflow.com/users/8928024/zf007"}, "edited": false, "score": 4, "creation_date": 1520466615, "post_id": 49162915, "comment_id": 85331957, "body": "any errorlogs you can get some info from? If so modify your question to share that info with us."}, {"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 1, "creation_date": 1520471131, "post_id": 49162915, "comment_id": 85333165, "body": "Is this really a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> to reproduce the problem? (Especially the &quot;minimal&quot; part) Version numbers of everything involved and platform info wouldn&#39;t hurt either with an problem like this."}, {"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1520471894, "post_id": 49162915, "comment_id": 85333376, "body": "Hmm, I guess it&#39;s on Windows, since <code>pyvjoy</code> seems to just be a simple ctypes wrapper around a DLL. I highly suspect neither OpenCV, nor Numpy have anything to do with this."}, {"owner": {"reputation": 4924, "user_id": 2862719, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/yzhk5.png?s=128&g=1", "display_name": "m00am", "link": "https://stackoverflow.com/users/2862719/m00am"}, "edited": false, "score": 0, "creation_date": 1520498024, "post_id": 49162915, "comment_id": 85342294, "body": "Welcome to SO. I slightly reformatted your question so that the problem stands out more clearly. To increase your chance of answers, you can add the information requested by the other commenters using the edit function. Additionally, what exactly do you mean by a reset of the shell?"}, {"owner": {"reputation": 1, "user_id": 9459314, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-pHP7o9pQjuE/AAAAAAAAAAI/AAAAAAAABtE/z8_LFPO5_Vc/photo.jpg?sz=128", "display_name": "Paul Naish", "link": "https://stackoverflow.com/users/9459314/paul-naish"}, "edited": false, "score": 0, "creation_date": 1520550651, "post_id": 49162915, "comment_id": 85373921, "body": "It&#39;s to do with mixing 32 bit &amp; 64 bit libraries. It can be quite tricky to ensure that you pick up the correct version.  I had to transfer the code to beneath the correct version. Works now (onto different problems now)"}], "owner": {"reputation": 1, "user_id": 9459314, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-pHP7o9pQjuE/AAAAAAAAAAI/AAAAAAAABtE/z8_LFPO5_Vc/photo.jpg?sz=128", "display_name": "Paul Naish", "link": "https://stackoverflow.com/users/9459314/paul-naish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1520518514, "creation_date": 1520464965, "last_edit_date": 1520518514, "question_id": 49162915, "link": "https://stackoverflow.com/questions/49162915/python-import-restarts-other-imports", "title": "Python import restarts other imports", "body": "<p>I want to create a head tracking interface for a flight simulator. I'm going to use opencv for image acquisition and processing and use vjoy to emulate the joystick (which the flight simulator can pick up &amp; recognise).</p>\n\n<p>As part of developing a toolkit of routines I have a program which highlights the brightest &amp; darkest points in a captured frame which works well.</p>\n\n<pre><code>import numpy as np\nimport pyvjoy #works if I comment this line out\nimport cv2\n\ncap = cv2.VideoCapture(0)\n#j = pyvjoy.VJoyDevice(1)\n\nwhile(True):\n# Capture frame-by-frame\n    ret, frame = cap.read()\n\n# Our operations on the frame come here\n    gray = cv2.cvtColor(frame, cv2.COLOR_BGR2GRAY)\n# Display the resulting frame\n    cv2.imshow('frame - press q to exit',gray)\n\n#    vjoy lines commented out \n#    xAxis=xmin*4000\n#    j.data.wAxisX = 0x2000 \n\n#    j.set_axis(HID_USAGE_X, xAxis)\n\n    if cv2.waitKey(1) &amp; 0xFF == ord('q'):\n        break\n\n# When everything done, release the capture\ncap.release()\ncv2.destroyAllWindows()\n</code></pre>\n\n<p>This code works if I comment out the import of the <code>vjoy</code> library. However, when I import <code>vjoy</code> it forces a reset of the shell even though there are no other active libraries or lines. How can I prevent this?</p>\n"}, {"tags": ["python", "json", "django", "blockchain"], "comments": [{"owner": {"reputation": 730, "user_id": 2664838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ca00063fb52b7b88d470b63fbf6eb32?s=128&d=identicon&r=PG", "display_name": "CoolestNerdIII", "link": "https://stackoverflow.com/users/2664838/coolestnerdiii"}, "edited": false, "score": 0, "creation_date": 1520468366, "post_id": 49162910, "comment_id": 85332430, "body": "If you try to do this in shell, or take a peak at your database, are you certain that there are actual entries in your db? The issue could range from the user profile not actually being created, to possibly overwriting the objects manager in your user, to a range of other things so I would need a bit more info to help."}, {"owner": {"reputation": 54482, "user_id": 8283848, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/YiHgN.jpg?s=128&g=1", "display_name": "JPG", "link": "https://stackoverflow.com/users/8283848/jpg"}, "edited": false, "score": 0, "creation_date": 1520480632, "post_id": 49162910, "comment_id": 85335383, "body": "Are you sure that <code>UserProfile</code> has at least one object in DB?"}, {"owner": {"reputation": 35, "user_id": 9432260, "user_type": "registered", "profile_image": "https://graph.facebook.com/1967498536611157/picture?type=large", "display_name": "Traian Svinti", "link": "https://stackoverflow.com/users/9432260/traian-svinti"}, "edited": false, "score": 0, "creation_date": 1520518612, "post_id": 49162910, "comment_id": 85355480, "body": "Extra information added. Yes the database has 2 users that are connected to 2 individual UserProfiles. Currently I am not trying to get the information but just retrieve that models."}, {"owner": {"reputation": 123, "user_id": 9285677, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-KsYsaxJqLxg/AAAAAAAAAAI/AAAAAAAAABo/EkWc2Kld9AY/photo.jpg?sz=128", "display_name": "Nathan Smith", "link": "https://stackoverflow.com/users/9285677/nathan-smith"}, "edited": false, "score": 0, "creation_date": 1520523105, "post_id": 49162910, "comment_id": 85358808, "body": "How do you know there are 2 UserProfiles in the db? did you run UserProfile.objects.all() in the shell? Sorry to keep harping on this point, Just want to make sure the data is there for sure."}, {"owner": {"reputation": 35, "user_id": 9432260, "user_type": "registered", "profile_image": "https://graph.facebook.com/1967498536611157/picture?type=large", "display_name": "Traian Svinti", "link": "https://stackoverflow.com/users/9432260/traian-svinti"}, "edited": false, "score": 0, "creation_date": 1520524717, "post_id": 49162910, "comment_id": 85359931, "body": "Added screenshot of shell. I believe this shows that I do have UserProfile objects and also when I go into admin I can see there that they also exist"}, {"owner": {"reputation": 123, "user_id": 9285677, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-KsYsaxJqLxg/AAAAAAAAAAI/AAAAAAAAABo/EkWc2Kld9AY/photo.jpg?sz=128", "display_name": "Nathan Smith", "link": "https://stackoverflow.com/users/9285677/nathan-smith"}, "edited": false, "score": 0, "creation_date": 1520528470, "post_id": 49162910, "comment_id": 85362460, "body": "Where are you importing serializers from?"}, {"owner": {"reputation": 35, "user_id": 9432260, "user_type": "registered", "profile_image": "https://graph.facebook.com/1967498536611157/picture?type=large", "display_name": "Traian Svinti", "link": "https://stackoverflow.com/users/9432260/traian-svinti"}, "edited": false, "score": 0, "creation_date": 1520537486, "post_id": 49162910, "comment_id": 85367617, "body": "from django.core import serializers"}], "owner": {"reputation": 35, "user_id": 9432260, "user_type": "registered", "profile_image": "https://graph.facebook.com/1967498536611157/picture?type=large", "display_name": "Traian Svinti", "link": "https://stackoverflow.com/users/9432260/traian-svinti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 102, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1520524758, "creation_date": 1520464944, "last_edit_date": 1520524758, "question_id": 49162910, "link": "https://stackoverflow.com/questions/49162910/django-object-retrieval-not-working", "title": "Django object retrieval not working", "body": "<p>For some reason UserProfile.objects.all() isn't retrieving the models I have to serialize them as json. Any ideas?</p>\n\n<p>views.py</p>\n\n<pre><code>def get_modelAPI(request):\n    UserProfile_json = serializers.serialize(\"json\", UserProfile.objects.all())\n    data = {\"UserProfile_json\": UserProfile_json}\n    return JsonResponse(data)\n</code></pre>\n\n<p>urls.py</p>\n\n<pre><code>url(r'^details/json/$', views.get_modelAPI, name='json'),\n</code></pre>\n\n<p>models.py</p>\n\n<pre><code>class UserProfile(models.Model):\n    fullName = models.CharField(max_length = 250)\n    address = models.CharField(max_length = 250)\n    gender = models.CharField(max_length = 250)\n    dob = models.CharField(max_length = 250)\n    homePhone = models.CharField(max_length = 250)\n    personalPhone = models.CharField(max_length = 250)\n    emergencyContact = models.CharField(max_length = 250)\n    email = models.CharField(max_length = 250)\n    ppsn = models.CharField(max_length = 250)\n    maritalStatus = models.CharField(max_length = 250)\n    employment = models.CharField(max_length = 250)\n    personalPic = models.CharField(max_length = 1000)\n</code></pre>\n\n<p>I am simply attempting to view this model in json format for now later to be parsed.</p>\n\n<p><a href=\"https://i.stack.imgur.com/1ZTGr.png\" rel=\"nofollow noreferrer\">Output</a></p>\n\n<p>Extra information:\nBy changing my get_modelAPI to:</p>\n\n<pre><code>def get_modelAPI(request):\n    UserProfile_json = serializers.serialize(\"json\", \n    UserProfile.objects.all())\n    data = {\"UserProfile_json\": [UserProfile]}\n    return JsonResponse(data)\n</code></pre>\n\n<p>I get:\n<a href=\"https://i.stack.imgur.com/U0Ylh.png\" rel=\"nofollow noreferrer\">New data returned to webpage</a></p>\n\n<p>What I want to do is get the model e.g fullName: 'John Smith' which I have in my database along with the rest of the models, parse this to json.</p>\n\n<p><a href=\"https://i.stack.imgur.com/BeXFt.png\" rel=\"nofollow noreferrer\">Shell screenshot</a></p>\n"}, {"tags": ["python", "dictionary"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 8, "creation_date": 1520464994, "post_id": 49162890, "comment_id": 85331475, "body": "You currently have a <code>dict</code> with three keys, <code>&#39;Name&#39;</code>, <code>&#39;Age&#39;</code>, and <code>&#39;Weight&#39;</code>. The values to these keys are all <code>set</code> objects, which are inherently unordered. This is almost certainly not the correct data-structure to use"}], "answers": [{"tags": [], "owner": {"reputation": 1932, "user_id": 8291840, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/20Unf.png?s=128&g=1", "display_name": "I\u015f\u0131k Kaplan", "link": "https://stackoverflow.com/users/8291840/i%c5%9f%c4%b1k-kaplan"}, "is_accepted": true, "score": 4, "last_activity_date": 1520465158, "creation_date": 1520465158, "answer_id": 49162949, "question_id": 49162890, "link": "https://stackoverflow.com/questions/49162890/how-to-extract-single-dictionary-entry/49162949#49162949", "title": "How to extract single dictionary entry?", "body": "<p>I'd use a structure like this </p>\n\n<pre><code>pets_2 = {\n    'pet1': {'Name':'Molly', 'Age': 10, 'Weight': 101.0},\n    'pet2': {'Name':'Stu', 'Age': 14, 'Weight': 99.5},\n    'pet3': {'Name':'Henry', 'Age': 2, 'Weight': 90.3}\n}\n</code></pre>\n\n<p>and as far as the getting the data out</p>\n\n<pre><code>print(pets_2['pet1']) #{'Name': 'Molly', 'Age': 10, 'Weight': 101.0}\nprint(pets_2['pet1']['Name']) # Molly\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2160, "user_id": 4025659, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/4WeB0.jpg?s=128&g=1", "display_name": "wbadart", "link": "https://stackoverflow.com/users/4025659/wbadart"}, "is_accepted": false, "score": 1, "last_activity_date": 1520465856, "last_edit_date": 1520465856, "creation_date": 1520465213, "answer_id": 49162962, "question_id": 49162890, "link": "https://stackoverflow.com/questions/49162890/how-to-extract-single-dictionary-entry/49162962#49162962", "title": "How to extract single dictionary entry?", "body": "<p>Right now, your values are all <strong><a href=\"https://docs.python.org/3/library/stdtypes.html#set\" rel=\"nofollow noreferrer\"><code>sets</code></a></strong>, so you basically have no way to fetch a specific value. Switch these to a a list, and given you know Stu is the second person, you can assemble Stu:</p>\n\n<pre><code>def get_pet(i):\n    return {'Name': pets_2['Name'][i],\n            'Age': pets_2['Age'][i],\n            'Weight': pets_2['Weight'][i]}\n</code></pre>\n\n<p>More naturally, you could just store your data like so:</p>\n\n<pre><code>pets_3 = {\n    'Stu': {'Age': 14, 'Weight': 99.5},\n    # ...\n}\n</code></pre>\n\n<p>So getting Stu's info becomes <code>pets_3['Stu']</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 1984, "user_id": 4439019, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/ef8889f7e466495157e2527a85930a9c?s=128&d=identicon&r=PG&f=1", "display_name": "JD2775", "link": "https://stackoverflow.com/users/4439019/jd2775"}, "edited": false, "score": 0, "creation_date": 1520465883, "post_id": 49162985, "comment_id": 85331757, "body": "Thank you for explaining to me, makes sense"}], "tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": false, "score": 1, "last_activity_date": 1520465346, "creation_date": 1520465346, "answer_id": 49162985, "question_id": 49162890, "link": "https://stackoverflow.com/questions/49162890/how-to-extract-single-dictionary-entry/49162985#49162985", "title": "How to extract single dictionary entry?", "body": "<p>As mentioned, <code>set</code> is unordered. Here is one solution using lists.</p>\n\n<pre><code>d = {'Name':   ['Molly', 'Stu', 'Henry'],\n     'Age':    [10, 14, 2],\n     'Weight': [101, 99.5, 90.3]}\n\nd2 = {d['Name'][i]: (d['Age'][i], d['Weight'][i]) for i in range(len(d))}\n# {'Henry': (2, 90.3), 'Molly': (10, 101), 'Stu': (14, 99.5)}\n\nd2['Stu']  # (14, 99.5)\n</code></pre>\n"}], "owner": {"reputation": 1984, "user_id": 4439019, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/ef8889f7e466495157e2527a85930a9c?s=128&d=identicon&r=PG&f=1", "display_name": "JD2775", "link": "https://stackoverflow.com/users/4439019/jd2775"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 49162949, "answer_count": 3, "score": -2, "last_activity_date": 1520465856, "creation_date": 1520464870, "last_edit_date": 1520465525, "question_id": 49162890, "link": "https://stackoverflow.com/questions/49162890/how-to-extract-single-dictionary-entry", "title": "How to extract single dictionary entry?", "body": "<p>This should be really simple but I can't figure it out.  How do I extract the details for Stu?  So I want to see Name: Stu, Age:14, Weight: 99.5</p>\n\n<pre><code>pets_2 = {'Name': {'Molly', 'Stu', 'Henry'},\n          'Age':{10, 14, 2},\n          'Weight':{101, 99.5, 90.3}}\n</code></pre>\n\n<p>Side-question, is this the correct format to store this type of dictionary?</p>\n"}, {"tags": ["python", "matlab", "matrix", "product", "scalar"], "comments": [{"owner": {"reputation": 1131, "user_id": 3448634, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/c1b5b4e95d700f849977e3c3e99b4ff7?s=128&d=identicon&r=PG&f=1", "display_name": "Makketronix", "link": "https://stackoverflow.com/users/3448634/makketronix"}, "edited": false, "score": 1, "creation_date": 1520465577, "post_id": 49162883, "comment_id": 85331668, "body": "what do you mean &quot;second value&quot;?"}, {"owner": {"reputation": 21, "user_id": 9459370, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "hundekopfjaeger", "link": "https://stackoverflow.com/users/9459370/hundekopfjaeger"}, "reply_to_user": {"reputation": 1131, "user_id": 3448634, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/c1b5b4e95d700f849977e3c3e99b4ff7?s=128&d=identicon&r=PG&f=1", "display_name": "Makketronix", "link": "https://stackoverflow.com/users/3448634/makketronix"}, "edited": false, "score": 0, "creation_date": 1520500691, "post_id": 49162883, "comment_id": 85343974, "body": "I meant the second value in the first row. But after the explenation from jodag it is clear now."}], "answers": [{"tags": [], "owner": {"reputation": 11476, "user_id": 2790047, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c5a7631a67903295da25dabb94e1f51b?s=128&d=identicon&r=PG", "display_name": "jodag", "link": "https://stackoverflow.com/users/2790047/jodag"}, "is_accepted": false, "score": 1, "last_activity_date": 1520482644, "last_edit_date": 1520482644, "creation_date": 1520480323, "answer_id": 49164990, "question_id": 49162883, "link": "https://stackoverflow.com/questions/49162883/difference-in-scalar-product-with-matlab-and-python/49164990#49164990", "title": "Difference in scalar product with matlab and python", "body": "<p>The two matrices <code>X</code> and <code>Y</code> are identical matrices with columns forming what appears to be an orthonormal basis. Therefore, you should expect <code>transpose(X)*Y</code> to be an identity matrix. All the off-diagonal elements should be zero and only differ from zero due to rounding errors.</p>\n\n<p>That said, the differences you observe simply imply that the various implementations of matrix multiplication differ from each other in some ways. For example, the order in which sums are taken can affect the final result.</p>\n\n<p><strong>Example (MATLAB):</strong> </p>\n\n<pre><code>&gt;&gt; sum(X(:,1).*Y(:,2))\nans =\n   3.366499626335511e-15\n&gt;&gt; sum(flipud(X(:,1)).*flipud(Y(:,2)))\nans =\n   3.366880519846534e-15\n</code></pre>\n\n<p>In this example we manually take the inner product of two large orthogonal vectors. By flipping the vectors the result shouldn't change, however, due to rounding errors we get slightly different results.</p>\n"}], "owner": {"reputation": 21, "user_id": 9459370, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "hundekopfjaeger", "link": "https://stackoverflow.com/users/9459370/hundekopfjaeger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1520482644, "creation_date": 1520464826, "question_id": 49162883, "link": "https://stackoverflow.com/questions/49162883/difference-in-scalar-product-with-matlab-and-python", "title": "Difference in scalar product with matlab and python", "body": "<p>I have a problem. I have two arrays with the size of 82248x20 and if i do the following in Matlab</p>\n\n<pre><code>A=X'*Y\n</code></pre>\n\n<p>it will give me 6.152847328855238e-18 for the second value.\nIf i do it in Python with anything like</p>\n\n<pre><code>test=scipy.io.loadmat('wohin.mat')\nX=test['X']\nY=test['Y']\nA=np.transpose(X)@Y\nA=np.dot(np.transpose(X),Y)\nA=np.matmul(np.transpose(X),Y)\n</code></pre>\n\n<p>i get the value 1.9233746539892849e-16 for the second value and if i do the calculation with </p>\n\n<pre><code>for i in range(0,82248):\n    t=t+np.transpose(Y)[0,i]*X[i,1]\n</code></pre>\n\n<p>i get 3.3664996263355106e-15 for the second value of row one. So where is my misunderstanding or the difference between the three methods. The last one has some rounding errors perhaps, but the two other ones should give me the same result or not?</p>\n\n<p><a href=\"https://www.dropbox.com/s/fka2nv3sbwjlp1x/matrices.mat?dl=0\" rel=\"nofollow noreferrer\">Mat file with the matrices is here</a></p>\n"}, {"tags": ["python", "python-3.x", "lotus-notes", "win32com"], "comments": [{"owner": {"reputation": 13430, "user_id": 622571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41523c6db74e0f187eae731a6871a320?s=128&d=identicon&r=PG", "display_name": "Richard Schwartz", "link": "https://stackoverflow.com/users/622571/richard-schwartz"}, "edited": false, "score": 0, "creation_date": 1520467173, "post_id": 49162879, "comment_id": 85332109, "body": "Show your code! Nobody can answer this for you without at least seeing which of the various APIs you are using to access Lotus Notes data. Some of the APIs expose a method to do what you want, and some do not."}], "answers": [{"tags": [], "owner": {"reputation": 151, "user_id": 3191628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac790e74c269f30580a2b6c26e782334?s=128&d=identicon&r=PG&f=1", "display_name": "richieadler", "link": "https://stackoverflow.com/users/3191628/richieadler"}, "is_accepted": true, "score": 2, "last_activity_date": 1520534040, "creation_date": 1520534040, "answer_id": 49180134, "question_id": 49162879, "link": "https://stackoverflow.com/questions/49162879/move-lotus-notes-email-to-a-different-folder-python/49180134#49180134", "title": "Move Lotus Notes Email to a Different Folder Python", "body": "<p>As you will move the document before getting the next one, I'd recommend to replace your loop with</p>\n\n<pre><code>doc = folder.GetFirstDocument()\nwhile doc:\n    docN = folder.GetNextDocument(doc)\n    yield doc\n    doc = docN\n</code></pre>\n\n<p>And then to move the message to the proper folder you need</p>\n\n<pre><code>doc.PutInFolder(r\"Destination\\Folder\")\ndoc.RemoveFromFolder(r\"Origin\\Folder\")\n</code></pre>\n\n<p>Of course, take care of escaping your backslashes or using raw strings literals to pass correctly the view name.</p>\n\n<p>doc.PutInFolder creates the folder if it doesn't exist. In that case the user needs to have permissions to create public folders, otherwise the created folder will be private. (If the folder already exists, of course, this is not a problem.)</p>\n"}], "owner": {"reputation": 292, "user_id": 5560669, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3b80c4a20a9c188ec7cfa0d48b10e759?s=128&d=identicon&r=PG&f=1", "display_name": "PPJN", "link": "https://stackoverflow.com/users/5560669/ppjn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 473, "favorite_count": 0, "accepted_answer_id": 49180134, "answer_count": 1, "score": 1, "last_activity_date": 1522076918, "creation_date": 1520464799, "last_edit_date": 1522076918, "question_id": 49162879, "link": "https://stackoverflow.com/questions/49162879/move-lotus-notes-email-to-a-different-folder-python", "title": "Move Lotus Notes Email to a Different Folder Python", "body": "<p>After extracting some of the email's data, I would like to move the email to a specified folder with python. I've searched and haven't seemed to find what I need.</p>\n\n<p>Has anyone done this before?</p>\n\n<p>Per a comment, I've added my current logic in hopes that it will clarify my problem. I loop through my folder, extract the details. After doing that, I want to move the email to a different folder.</p>\n\n<pre><code>import win32com.client\nimport getpass\nimport re\n\n\n'''\nLoops through Lotus Notes folder to view messages\n'''\ndef docGenerator(folderName):\n    # Get credentials\n    mailServer = 'server' \n    mailPath = 'PubDir\\inbox.nsf'\n\n    # Password\n    pw = getpass.getpass('Enter password: ')\n\n    # Connect\n    session = win32com.client.Dispatch('Lotus.NotesSession')\n\n    # Initializing the session and database\n    session.Initialize(pw)\n    db = session.GetDatabase(mailServer, mailPath)\n\n    # Get folder\n    folder = db.GetView(folderName)\n    if not folder:\n        raise Exception('Folder \"%s\" not found' % folderName)\n\n    # Get the first document\n    doc = folder.GetFirstDocument()\n\n    # If the document exists,\n    while doc:\n        # Yield it\n        yield doc\n\n        # Get the next document\n        doc = folder.GetNextDocument(doc)\n\n\n\n# Loop through emails\nfor doc in docGenerator('Folder\\Here'):\n\n    # setting variables\n    subject = doc.GetItemValue('Subject')[0].strip()\n    invoice = re.findall(r'\\d+',subject)[0]\n    body = doc.GetItemValue('Body')[0].strip()\n\n    # Move email after extracting above data\n    # ???\n</code></pre>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 26718, "user_id": 4800652, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/bsfAl.jpg?s=128&g=1", "display_name": "Bharath", "link": "https://stackoverflow.com/users/4800652/bharath"}, "edited": false, "score": 0, "creation_date": 1520475101, "post_id": 49162908, "comment_id": 85334095, "body": "Allen wouldn&#39;t be easier if you reset the index in the beginning in the first option i.e <code>df.T.reset_index().set_axis(&#39;company category product price&#39;.split(),1,inplace=False)</code>"}, {"owner": {"reputation": 16194, "user_id": 667883, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a39234ae82a5898cba1d70b5bff80ec3?s=128&d=identicon&r=PG", "display_name": "Allen", "link": "https://stackoverflow.com/users/667883/allen"}, "reply_to_user": {"reputation": 26718, "user_id": 4800652, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/bsfAl.jpg?s=128&g=1", "display_name": "Bharath", "link": "https://stackoverflow.com/users/4800652/bharath"}, "edited": false, "score": 0, "creation_date": 1520477433, "post_id": 49162908, "comment_id": 85334669, "body": "@Dark, I wasn&#39;t sure if the OP wants company as a column or index. You are right, it could be a bit easier if he wants column."}], "tags": [], "owner": {"reputation": 16194, "user_id": 667883, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a39234ae82a5898cba1d70b5bff80ec3?s=128&d=identicon&r=PG", "display_name": "Allen", "link": "https://stackoverflow.com/users/667883/allen"}, "is_accepted": false, "score": 1, "last_activity_date": 1520464943, "creation_date": 1520464943, "answer_id": 49162908, "question_id": 49162858, "link": "https://stackoverflow.com/questions/49162858/pandas-how-to-transpose-the-data-and-add-the-column-name/49162908#49162908", "title": "Pandas how to transpose the data and add the column name", "body": "<p>You can us rename_axis and reset_index:</p>\n\n<pre><code>(\n    df.T\n    .set_axis([\"category\", \"product\", \"price\"], axis=1, inplace=False)\n    .rename_axis('company',axis=0)\n    .reset_index()\n)\n\nOut[124]: \n   company category product price\n0    alpha   public   prodA   100\n1    bravo  private   prodB   200\n2  charlie   public   prodB   300\n</code></pre>\n\n<p>If you would like to keep company as index:</p>\n\n<pre><code>(\n    df.T\n    .set_axis([\"category\", \"product\", \"price\"], axis=1, inplace=False)\n    .rename_axis('company',axis=0)\n)\nOut[125]: \n        category product price\ncompany                       \nalpha     public   prodA   100\nbravo    private   prodB   200\ncharlie   public   prodB   300\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": false, "score": 2, "last_activity_date": 1520466665, "last_edit_date": 1520466665, "creation_date": 1520464983, "answer_id": 49162918, "question_id": 49162858, "link": "https://stackoverflow.com/questions/49162858/pandas-how-to-transpose-the-data-and-add-the-column-name/49162918#49162918", "title": "Pandas how to transpose the data and add the column name", "body": "<p>First set the index name via <code>df.index.set_names</code>, then apply <code>reset_index</code>:</p>\n\n<pre><code>df.index = df.index.set_names('company')\ndf.columns = ['category', 'product', 'price']\ndf = df.reset_index()\n\n#    company category product price\n# 0    alpha   public   prodA   100\n# 1    bravo  private   prodB   200\n# 2  charlie   public   prodB   300\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7436, "user_id": 5514476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hP6t0.jpg?s=128&g=1", "display_name": "DJK", "link": "https://stackoverflow.com/users/5514476/djk"}, "is_accepted": true, "score": 4, "last_activity_date": 1520467965, "creation_date": 1520467965, "answer_id": 49163365, "question_id": 49162858, "link": "https://stackoverflow.com/questions/49162858/pandas-how-to-transpose-the-data-and-add-the-column-name/49163365#49163365", "title": "Pandas how to transpose the data and add the column name", "body": "<p>Just setup the index first, then tanspose the dataframe</p>\n\n<pre><code>df.index = pd.Index(['category','product','price'],name='company')\ndf.T\n\ncompany category product price\nalpha     public   prodA   100\nbravo    private   prodB   200\ncharlie   public   prodB   300\n</code></pre>\n"}], "owner": {"reputation": 970, "user_id": 8210371, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f58eb55b40f46d8638a9c7429289b240?s=128&d=identicon&r=PG&f=1", "display_name": "Hannan", "link": "https://stackoverflow.com/users/8210371/hannan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7595, "favorite_count": 0, "accepted_answer_id": 49163365, "answer_count": 3, "score": 2, "last_activity_date": 1520467965, "creation_date": 1520464676, "question_id": 49162858, "link": "https://stackoverflow.com/questions/49162858/pandas-how-to-transpose-the-data-and-add-the-column-name", "title": "Pandas how to transpose the data and add the column name", "body": "<p>In Pandas I'm transposing the data and want to name the column. </p>\n\n<p>My current data is:</p>\n\n<pre><code>    alpha   bravo    charlie\n0   public  private  public\n1   prodA   prodB    prodB\n2   100     200      300\n</code></pre>\n\n<p>After transposing and renaming the columns, the output is: </p>\n\n<pre><code>df.transpose()\ndf.columns = [\"category\", \"product\", \"price\"]\n\n    category    product price\nalpha   public  prodA   100\nbravo   private prodB   200\ncharlie public  prodB   300\n</code></pre>\n\n<p>How can I have the expected output like:</p>\n\n<pre><code>company category product price\nalpha   public   prodA   100\nbravo   private  prodB   200\ncharlie public   prodB   300\n</code></pre>\n"}, {"tags": ["python", "apache-spark", "pyspark"], "comments": [{"owner": {"reputation": 8106, "user_id": 129600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8304c94fad5c5a762301de60d0a9bd7e?s=128&d=identicon&r=PG", "display_name": "acushner", "link": "https://stackoverflow.com/users/129600/acushner"}, "edited": false, "score": 0, "creation_date": 1520610291, "post_id": 49162854, "comment_id": 85399522, "body": "is there any reason you&#39;re not using dataframes for this?"}], "answers": [{"tags": [], "owner": {"reputation": 36454, "user_id": 5880706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/147556055711bd1fa5a938cef92a22b9?s=128&d=identicon&r=PG&f=1", "display_name": "Ramesh Maharjan", "link": "https://stackoverflow.com/users/5880706/ramesh-maharjan"}, "is_accepted": true, "score": 4, "last_activity_date": 1520486752, "creation_date": 1520486752, "answer_id": 49166009, "question_id": 49162854, "link": "https://stackoverflow.com/questions/49162854/pyspark-typeerror-float-object-is-not-subscriptable-when-calculating-mean-u/49166009#49166009", "title": "Pyspark - TypeError: &#39;float&#39; object is not subscriptable when calculating mean using reduceByKey", "body": "<p><strong>Heres how <code>reduceByKey</code> works. I am taking your example for illustration i.e. with following data that you pass to <code>reduceByKey</code></strong></p>\n\n<pre><code>#                                 x           y        z\n[(('a', 'nexus4', 'stand'), ((-5.958191, 0.6880646, 8.135345), 1))]\n#           part A (key)               part B (value)       counter\n</code></pre>\n\n<p>Let me go step by step</p>\n\n<p>After performing the following <code>mapValues</code> function </p>\n\n<pre><code>rdd_ori.mapValues(lambda x: (x,1))\n</code></pre>\n\n<p>the <em>rdd data</em> will look as </p>\n\n<pre><code>((u'a', u'nexus4', u'stand'), ((-5.9427185, 0.6761626999999999, 8.128204), 1))\n((u'a', u'nexus4', u'stand'), ((-5.958191, 0.6880646, 8.135345), 1))\n((u'a', u'nexus4', u'stand'), ((-5.95224, 0.6702118, 8.136536), 1))\n((u'a', u'nexus4', u'stand'), ((-5.9950867, 0.6535491999999999, 8.204376), 1))\n</code></pre>\n\n<p>So when <code>reduceByKey</code> is invoked as </p>\n\n<pre><code>.reduceByKey(lambda a, b: (a[0][0] + b[0][0], a[0][1] + b[0][1], a[0][2] + b[0][2], a[1] + b[1]))\n</code></pre>\n\n<p>And <strong>all the rows with same key are grouped and values are passed to the <code>lambda</code> function of <code>reducyByKey</code></strong>.</p>\n\n<p>Since in your case, <em>all the keys are same</em>, the values are passed to <code>a</code> and <code>b</code> variables in the following iterations.</p>\n\n<p>In first iteration, <code>a</code> is <code>((-5.9427185, 0.6761626999999999, 8.128204), 1)</code> and <code>b</code> is <code>((-5.958191, 0.6880646, 8.135345), 1)</code> so the calculation part <code>(a[0][0] + b[0][0], a[0][1] + b[0][1], a[0][2] + b[0][2], a[1] + b[1])</code> is correct and passes.</p>\n\n<p>In second iteration, <code>a</code> is the output of <code>(a[0][0] + b[0][0], a[0][1] + b[0][1], a[0][2] + b[0][2], a[1] + b[1])</code> which is <code>(-11.910430999999999, 1.3582764, 16.271881, 2)</code></p>\n\n<p><strong>So if you look at the format of the data there is no such <code>a[0][0]</code> in <code>a</code>. You can just get <code>a[0]</code>, <code>a[1]</code> .. and so on. So thats the issue. And thats what the error message is suggesting too</strong>.</p>\n\n<blockquote>\n  <blockquote>\n    <p>TypeError: 'float' object is not subscriptable</p>\n  </blockquote>\n</blockquote>\n\n<p><strong>The solution to this is to format the data so that you can access <code>a</code> as <code>a[0][0]</code> which can be done if you format your <code>reduceByKey</code> of the following format.</strong></p>\n\n<pre><code>.reduceByKey(lambda a, b: ((a[0][0] + b[0][0], a[0][1] + b[0][1], a[0][2] + b[0][2]), a[1] + b[1]))\n</code></pre>\n\n<p>But that would trouble your last <code>mapValues</code> function </p>\n\n<pre><code>.mapValues(lambda a : (a[0]/a[3], a[1]/a[3],a[2]/a[3]))\n</code></pre>\n\n<p>as your values, <strong>i.e. <code>a</code> in lambda function</strong>, are of <code>((-23.848236199999995, 2.6879882999999998, 32.604461), 4)</code> so <code>a[0]</code> means <code>(-23.848236199999995, 2.6879882999999998, 32.604461)</code> and <code>a[1]</code> means <code>4</code> and there aren't any more so you will encounter </p>\n\n<blockquote>\n  <blockquote>\n    <p>IndexError: tuple index out of range</p>\n  </blockquote>\n</blockquote>\n\n<p>So your last <code>mapValues</code> should be </p>\n\n<pre><code>.mapValues(lambda a : (a[0][0]/a[1], a[0][1]/a[1],a[0][2]/a[1]))\n</code></pre>\n\n<p><strong>So overall, following code should work for you</strong> </p>\n\n<pre><code>rdd_ori = sc.textFile(\"asdasd.csv\") \\\n    .map(lambda x: ((x.split(\",\")[6], x.split(\",\")[7], x.split(\",\")[9]),(float(x.split(\",\")[3]),float(x.split(\",\")[4]),float(x.split(\",\")[5]))))\n\nmeanRDD = rdd_ori.mapValues(lambda x: (x, 1)) \\\n    .reduceByKey(lambda a, b: ((a[0][0] + b[0][0], a[0][1] + b[0][1], a[0][2] + b[0][2]), a[1] + b[1]))\\\n    .mapValues(lambda a : (a[0][0]/a[1], a[0][1]/a[1],a[0][2]/a[1]))\n</code></pre>\n\n<p>I hope I have explained it well enough.</p>\n"}], "owner": {"reputation": 613, "user_id": 6297869, "user_type": "registered", "accept_rate": 58, "profile_image": "https://graph.facebook.com/10208047701583999/picture?type=large", "display_name": "fiticida", "link": "https://stackoverflow.com/users/6297869/fiticida"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2269, "favorite_count": 1, "accepted_answer_id": 49166009, "answer_count": 1, "score": 0, "last_activity_date": 1520506792, "creation_date": 1520464664, "last_edit_date": 1520506792, "question_id": 49162854, "link": "https://stackoverflow.com/questions/49162854/pyspark-typeerror-float-object-is-not-subscriptable-when-calculating-mean-u", "title": "Pyspark - TypeError: &#39;float&#39; object is not subscriptable when calculating mean using reduceByKey", "body": "<p>my \"asdasd.csv\" file has the following structure.</p>\n\n<pre><code> Index,Arrival_Time,Creation_Time,x,y,z,User,Model,Device,gt\n0,1424696633908,1424696631913248572,-5.958191,0.6880646,8.135345,a,nexus4,nexus4_1,stand\n1,1424696633909,1424696631918283972,-5.95224,0.6702118,8.136536,a,nexus4,nexus4_1,stand\n2,1424696633918,1424696631923288855,-5.9950867,0.6535491999999999,8.204376,a,nexus4,nexus4_1,stand\n3,1424696633919,1424696631928385290,-5.9427185,0.6761626999999999,8.128204,a,nexus4,nexus4_1,stand\n</code></pre>\n\n<p>Ok, I get the following {key,value} tuple to operate with it.</p>\n\n<pre><code>#                                 x           y        z\n[(('a', 'nexus4', 'stand'), ((-5.958191, 0.6880646, 8.135345)))]\n#           part A (key)               part B (value) \n</code></pre>\n\n<p>My code for calculating the mean is the following, I have to calculate the mean from each column, X, Y Z for each Key.</p>\n\n<pre><code>rdd_ori = sc.textFile(\"asdasd.csv\") \\\n        .map(lambda x: ((x.split(\",\")[6], x.split(\",\")[7], x.split(\",\")[9]),(float(x.split(\",\")[3]),float(x.split(\",\")[4]),float(x.split(\",\")[5]))))\n\nmeanRDD = rdd_ori.mapValues(lambda x: (x,1)) \\\n            .reduceByKey(lambda a, b: (a[0][0] + b[0][0], a[0][1] + b[0][1], a[0][2] + b[0][2], a[1] + b[1]))\\\n            .mapValues(lambda a : (a[0]/a[3], a[1]/a[3],a[2]/a[3]))\n</code></pre>\n\n<p>My problem I that I tried that code and it works fine on other PC with the same MV I'm using for developing it (PySpark Py3)</p>\n\n<p>Here is an example, that this code is correct: </p>\n\n<p><a href=\"https://i.stack.imgur.com/9W3lz.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9W3lz.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>But I don't know why I'm getting this error, important part is in <strong>Strong</strong>.</p>\n\n<blockquote>\n  <blockquote>\n    <p>--------------------------------------------------------------------------- Py4JJavaError                             Traceback (most recent call\n    last)  in ()\n          9 #sum_1 = count_.reduceByKey(lambda x, y: (x[0][0]+y[0][0],x<a href=\"https://i.stack.imgur.com/9W3lz.jpg\" rel=\"nofollow noreferrer\">0</a>+y<a href=\"https://i.stack.imgur.com/9W3lz.jpg\" rel=\"nofollow noreferrer\">0</a>,x[0][2]+y[0][2]))\n         10 \n    ---> 11 print(meanRDD.take(1))</p>\n  </blockquote>\n  \n  <p>/opt/spark/current/python/pyspark/rdd.py in take(self, num)    1341<br>\n  1342             p = range(partsScanned, min(partsScanned +\n  numPartsToTry, totalParts))\n  -> 1343             res = self.context.runJob(self, takeUpToNumLeft, p)    1344     1345             items += res</p>\n  \n  <p>/opt/spark/current/python/pyspark/context.py in runJob(self, rdd,\n  partitionFunc, partitions, allowLocal)\n      990         # SparkContext#runJob.\n      991         mappedRDD = rdd.mapPartitions(partitionFunc)\n  --> 992         port = self._jvm.PythonRDD.runJob(self._jsc.sc(), mappedRDD._jrdd, partitions)\n      993         return list(_load_from_socket(port, mappedRDD._jrdd_deserializer))\n      994 </p>\n  \n  <p>/opt/spark/current/python/lib/py4j-0.10.4-src.zip/py4j/java_gateway.py\n  in <strong>call</strong>(self, *args)    1131         answer =\n  self.gateway_client.send_command(command)    1132         return_value\n  = get_return_value(\n  -> 1133             answer, self.gateway_client, self.target_id, self.name)    1134     1135         for temp_arg in temp_args:</p>\n  \n  <p>/opt/spark/current/python/pyspark/sql/utils.py in deco(*a, **kw)\n       61     def deco(*a, **kw):\n       62         try:\n  ---> 63             return f(*a, **kw)\n       64         except py4j.protocol.Py4JJavaError as e:\n       65             s = e.java_exception.toString()</p>\n  \n  <p>/opt/spark/current/python/lib/py4j-0.10.4-src.zip/py4j/protocol.py in\n  get_return_value(answer, gateway_client, target_id, name)\n      317                 raise Py4JJavaError(\n      318                     \"An error occurred while calling {0}{1}{2}.\\n\".\n  --> 319                     format(target_id, \".\", name), value)\n      320             else:\n      321                 raise Py4JError(</p>\n  \n  <p>Py4JJavaError: An error occurred while calling\n  z:org.apache.spark.api.python.PythonRDD.runJob. :\n  org.apache.spark.SparkException: Job aborted due to stage failure:\n  Task 0 in stage 127.0 failed 1 times, most recent failure: Lost task\n  0.0 in stage 127.0 (TID 102, localhost, executor driver): org.apache.spark.api.python.PythonException: Traceback (most recent\n  call last):   File\n  \"/opt/spark/current/python/lib/pyspark.zip/pyspark/worker.py\", line\n  177, in main\n      process()   File \"/opt/spark/current/python/lib/pyspark.zip/pyspark/worker.py\", line\n  172, in process\n      serializer.dump_stream(func(split_index, iterator), outfile)   File \"/opt/spark/current/python/pyspark/rdd.py\", line 2423, in\n  pipeline_func\n      return func(split, prev_func(split, iterator))   File \"/opt/spark/current/python/pyspark/rdd.py\", line 2423, in\n  pipeline_func\n      return func(split, prev_func(split, iterator))   File \"/opt/spark/current/python/pyspark/rdd.py\", line 346, in func\n      return f(iterator)   File \"/opt/spark/current/python/pyspark/rdd.py\", line 1842, in\n  combineLocally\n      merger.mergeValues(iterator)   File \"/opt/spark/current/python/lib/pyspark.zip/pyspark/shuffle.py\", line\n  238, in mergeValues\n      <strong>d[k] = comb(d[k], v) if k in d else creator(v)   File \"\", line 3, in  TypeError:\n  'float' object is not subscriptable</strong></p>\n</blockquote>\n"}, {"tags": ["python", "pandas", "numpy"], "comments": [{"owner": {"reputation": 16194, "user_id": 667883, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a39234ae82a5898cba1d70b5bff80ec3?s=128&d=identicon&r=PG", "display_name": "Allen", "link": "https://stackoverflow.com/users/667883/allen"}, "edited": false, "score": 0, "creation_date": 1520465076, "post_id": 49162819, "comment_id": 85331509, "body": "Can you provide a valid sample data set and your expected output?"}], "answers": [{"comments": [{"owner": {"reputation": 317, "user_id": 2208899, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/RezWY.jpg?s=128&g=1", "display_name": "Chad Peruggia", "link": "https://stackoverflow.com/users/2208899/chad-peruggia"}, "edited": false, "score": 0, "creation_date": 1520468550, "post_id": 49163063, "comment_id": 85332467, "body": "Thanks for your answers, I tested both and they do work as expected."}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 0, "creation_date": 1520469567, "post_id": 49163063, "comment_id": 85332744, "body": "thats interesting, i honestly expected cumsum to be quicker. i&#39;m on python 3.6, pandas 0.20.3. is that what you have? also what did you get for numpy version?"}, {"owner": {"reputation": 7436, "user_id": 5514476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hP6t0.jpg?s=128&g=1", "display_name": "DJK", "link": "https://stackoverflow.com/users/5514476/djk"}, "edited": false, "score": 0, "creation_date": 1520470162, "post_id": 49163063, "comment_id": 85332911, "body": "Same thing, but I get 6.05 ms <code>numba</code>, 16.1 ms <code>pandas</code> and 13.3 ms <code>numpy</code>, its still faster, i just had a hard time believing there was such a huge gap"}], "tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": false, "score": 2, "last_activity_date": 1520527321, "last_edit_date": 1520527321, "creation_date": 1520465954, "answer_id": 49163063, "question_id": 49162819, "link": "https://stackoverflow.com/questions/49162819/vectorize-calculation-of-a-pandas-dataframe/49163063#49163063", "title": "Vectorize calculation of a Pandas Dataframe", "body": "<p>Here is a <code>numpy</code> solution. This should be significantly faster than a <code>pandas</code> loop, especially since it uses JIT-compiling via <code>numba</code>.</p>\n\n<pre><code>from numba import jit\n\na = df_a.values\nb = df_b.values\n\n@jit(nopython=True)\ndef fill_b(a, b):\n    for i in range(1, len(b)):\n        b[i] = b[i-1] + a[i]\n    return b\n\ndf_b = pd.DataFrame(fill_b(a, b))\n\n#     0   1   2   3\n# 0   1   2   3   4\n# 1   6   8  10  12\n# 2  15  18  21  24\n# 3  28  32  36  40\n# 4  45  50  55  60\n</code></pre>\n\n<p><strong>Performance benchmarking</strong></p>\n\n<pre><code>import pandas as pd, numpy as np\nfrom numba import jit\n\ndf_a = pd.DataFrame(np.arange(1,1000001).reshape(1000,1000))\n\n@jit(nopython=True)\ndef fill_b(a, b):\n    for i in range(1, len(b)):\n        b[i] = b[i-1] + a[i]\n    return b\n\ndef jp(df_a):\n\n    a = df_a.values\n    b = np.empty(df_a.values.shape)\n    b[0] = np.arange(1, 1001)\n\n    return pd.DataFrame(fill_b(a, b))\n\n%timeit df_a.cumsum()  # 16.1 ms\n%timeit jp(df_a)       # 6.05 ms\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 317, "user_id": 2208899, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/RezWY.jpg?s=128&g=1", "display_name": "Chad Peruggia", "link": "https://stackoverflow.com/users/2208899/chad-peruggia"}, "edited": false, "score": 1, "creation_date": 1520468505, "post_id": 49163208, "comment_id": 85332459, "body": "This is exactly what I was looking for. I knew it had to be simple"}, {"owner": {"reputation": 7436, "user_id": 5514476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hP6t0.jpg?s=128&g=1", "display_name": "DJK", "link": "https://stackoverflow.com/users/5514476/djk"}, "reply_to_user": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 1, "creation_date": 1520473150, "post_id": 49163208, "comment_id": 85333650, "body": "@jpp, i do not. Im sure if you post a question someone here will know"}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 0, "creation_date": 1520474174, "post_id": 49163208, "comment_id": 85333885, "body": "Related: <a href=\"https://stackoverflow.com/questions/49164134/pandas-vectorised-function-cumsum-versus-numpy\">Pandas vectorised function cumsum versus numpy</a>"}], "tags": [], "owner": {"reputation": 7436, "user_id": 5514476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hP6t0.jpg?s=128&g=1", "display_name": "DJK", "link": "https://stackoverflow.com/users/5514476/djk"}, "is_accepted": false, "score": 1, "last_activity_date": 1520466855, "creation_date": 1520466855, "answer_id": 49163208, "question_id": 49162819, "link": "https://stackoverflow.com/questions/49162819/vectorize-calculation-of-a-pandas-dataframe/49163208#49163208", "title": "Vectorize calculation of a Pandas Dataframe", "body": "<p>You can just create <code>df_b</code> using the cumulative sum over <code>df_a</code>, like so</p>\n\n<pre><code>df_a = pd.DataFrame(np.arange(1,17).reshape(4,4))\ndf_b = df_a.cumsum()\n\n    0   1   2   3\n0   1   2   3   4\n1   6   8  10  12\n2  15  18  21  24\n3  28  32  36  40\n</code></pre>\n"}], "owner": {"reputation": 317, "user_id": 2208899, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/RezWY.jpg?s=128&g=1", "display_name": "Chad Peruggia", "link": "https://stackoverflow.com/users/2208899/chad-peruggia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 775, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1520527321, "creation_date": 1520464504, "question_id": 49162819, "link": "https://stackoverflow.com/questions/49162819/vectorize-calculation-of-a-pandas-dataframe", "title": "Vectorize calculation of a Pandas Dataframe", "body": "<p>I have a trivial problem that I have solved using loops, but I am trying to see if there is a way I can attempt to vectorize some of it to try and improve performance.</p>\n\n<p>Essentially I have 2 dataframes (DF_A and DF_B), where the rows in DF_B are based on a sumation of a corresponding row in DF_A and the row above in DF_B. I do have the first row of values in DF_B. </p>\n\n<pre><code>df_a = [\n  [1,2,3,4]\n  [5,6,7,8]\n  [..... more rows]\n]\ndf_b = [\n [1,2,3,4] \n [ rows of all 0 values here, so dimensions match df_a]\n]\n</code></pre>\n\n<p>What I am trying to achive is that the 2nd row in df_b for example will be the values of the first row in df_b + the values of the second row in df_a. So in this case: </p>\n\n<pre><code>df_b.loc[2] = [6,8,10,12] \n</code></pre>\n\n<p>I was able to accomplish this using a loop over range of df_a, keeping the previous rows value saved off and then adding the row of the current index to the previous rows value. Doesn't seem super efficient.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1520464629, "post_id": 49162808, "comment_id": 85331374, "body": "<code>return {&#39;a&#39;:a,&#39;b&#39;:b,&#39;c&#39;:c,&#39;d&#39;:d}</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 377, "user_id": 5953626, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-dDwLTM1rSaQ/AAAAAAAAAAI/AAAAAAAAEkM/XVdkrI4-qxk/photo.jpg?sz=128", "display_name": "Nannan AV", "link": "https://stackoverflow.com/users/5953626/nannan-av"}, "reply_to_user": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 1, "creation_date": 1520465434, "post_id": 49162844, "comment_id": 85331620, "body": "That will definitely give the same dictionary but I am not familiar with the source code of locals method and the returned dictionary may or may not be safe for editing outside the method. So I added the dict() to be on the safer side."}, {"owner": {"reputation": 258, "user_id": 4752660, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh5.googleusercontent.com/-B9wRLbylbsM/AAAAAAAAAAI/AAAAAAAAAII/t_EcxZvmgps/photo.jpg?sz=128", "display_name": "Jose Javier Gonzalez Ortiz", "link": "https://stackoverflow.com/users/4752660/jose-javier-gonzalez-ortiz"}, "edited": false, "score": 0, "creation_date": 1520480106, "post_id": 49162844, "comment_id": 85335255, "body": "Thank you! This is just what I wanted"}], "tags": [], "owner": {"reputation": 377, "user_id": 5953626, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-dDwLTM1rSaQ/AAAAAAAAAAI/AAAAAAAAEkM/XVdkrI4-qxk/photo.jpg?sz=128", "display_name": "Nannan AV", "link": "https://stackoverflow.com/users/5953626/nannan-av"}, "is_accepted": true, "score": 1, "last_activity_date": 1520464620, "creation_date": 1520464620, "answer_id": 49162844, "question_id": 49162808, "link": "https://stackoverflow.com/questions/49162808/dictionary-of-values-from-a-function-call/49162844#49162844", "title": "Dictionary of values from a function call?", "body": "<p>I think you need</p>\n\n<pre><code>def foo(a, b, c=3, d=4):\n  return dict(locals())\n</code></pre>\n"}], "owner": {"reputation": 258, "user_id": 4752660, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh5.googleusercontent.com/-B9wRLbylbsM/AAAAAAAAAAI/AAAAAAAAAII/t_EcxZvmgps/photo.jpg?sz=128", "display_name": "Jose Javier Gonzalez Ortiz", "link": "https://stackoverflow.com/users/4752660/jose-javier-gonzalez-ortiz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "closed_date": 1520464880, "accepted_answer_id": 49162844, "answer_count": 1, "score": 0, "last_activity_date": 1520466031, "creation_date": 1520464440, "last_edit_date": 1520466031, "question_id": 49162808, "link": "https://stackoverflow.com/questions/49162808/dictionary-of-values-from-a-function-call", "closed_reason": "Duplicate", "title": "Dictionary of values from a function call?", "body": "<p>I am running a bunch of experiments and I am constantly finding myself rewriting code in order to document the parameters that are being passed into a function. The main idea is to get a dictionary with the names of the variables that the function got and the values that it got (including default values). Here are some examples of what I am after</p>\n\n<pre><code>def foo(a, b, c=3, d=4):\n    pass\n\nfoo(1,2)\n  {'a': 1, 'b':2, 'c':3, 'd':4}\n\nfoo(1,2,5,6)\n  {'a': 1, 'b':2, 'c':5, 'd':6}\n\nfoo(1,2,d=10)\n  {'a': 1, 'b':2, 'c':3, 'd':10}\n</code></pre>\n\n<p>I have looked into using kwargs and the inspect module but I am not able to get the specified behavior. </p>\n"}, {"tags": ["python", "xml", "odoo"], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 8580759, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ff2b8675baab631abeb7cdfd2b68e22e?s=128&d=identicon&r=PG&f=1", "display_name": "Rad304", "link": "https://stackoverflow.com/users/8580759/rad304"}, "edited": false, "score": 0, "creation_date": 1520512227, "post_id": 49165862, "comment_id": 85351128, "body": "Can you give me an example please"}, {"owner": {"reputation": 99, "user_id": 4251498, "user_type": "registered", "profile_image": "https://graph.facebook.com/1821025667/picture?type=large", "display_name": "Ajay Chauhan", "link": "https://stackoverflow.com/users/4251498/ajay-chauhan"}, "reply_to_user": {"reputation": 95, "user_id": 8580759, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ff2b8675baab631abeb7cdfd2b68e22e?s=128&d=identicon&r=PG&f=1", "display_name": "Rad304", "link": "https://stackoverflow.com/users/8580759/rad304"}, "edited": false, "score": 0, "creation_date": 1520575482, "post_id": 49165862, "comment_id": 85380300, "body": "Have checked your code, seems problem in your domain. You compare id with string."}], "tags": [], "owner": {"reputation": 99, "user_id": 4251498, "user_type": "registered", "profile_image": "https://graph.facebook.com/1821025667/picture?type=large", "display_name": "Ajay Chauhan", "link": "https://stackoverflow.com/users/4251498/ajay-chauhan"}, "is_accepted": false, "score": 1, "last_activity_date": 1520486000, "creation_date": 1520486000, "answer_id": 49165862, "question_id": 49162794, "link": "https://stackoverflow.com/questions/49162794/how-to-override-create-function-odoo/49165862#49165862", "title": "how to override create function Odoo", "body": "<p>Override the create method of tour object &amp; assign Boolean to false in transport object.</p>\n"}], "owner": {"reputation": 95, "user_id": 8580759, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ff2b8675baab631abeb7cdfd2b68e22e?s=128&d=identicon&r=PG&f=1", "display_name": "Rad304", "link": "https://stackoverflow.com/users/8580759/rad304"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 599, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1520537935, "creation_date": 1520464354, "last_edit_date": 1520537935, "question_id": 49162794, "link": "https://stackoverflow.com/questions/49162794/how-to-override-create-function-odoo", "title": "how to override create function Odoo", "body": "<p>I'm creating Odoo model and i wanna trigger a function on create</p>\n\n<p>*More infos:</p>\n\n<p>*Class Tour:</p>\n\n<pre><code>class obj_tour(osv.osv):\n    _name = \"obj.tour\"\n    _description = \"Objet tour\"\n    _columns = {\n       'id_trans' : fields.many2one('obj.gtransport',\"Transport\",selection=_get_selection_transport,required = True),# foreign key\n    }\n    ...\n</code></pre>\n\n<p>*Class Transport</p>\n\n<pre><code>class obj_gtransport(osv.osv):\n    _name = \"obj.gtransport\"\n    _description = \"Objet gtransport\"\n    _rec_name = \"matricule\"\n    _columns = {\n        'est_dispo': fields.boolean( \"Disponible\"),\n    }\n    ...\n</code></pre>\n\n<p>i want to trigger when i use a transport in a tour the transport will change the (est_dispo boolean to false)</p>\n\n<p>*Photos:\n<a href=\"https://i.stack.imgur.com/rjykP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rjykP.png\" alt=\"enter image description here\"></a>\n<a href=\"https://i.stack.imgur.com/4A1ph.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4A1ph.png\" alt=\"enter image description here\"></a></p>\n\n<p>I tried to override the create function but it doesn't change the value of the boolean </p>\n\n<p>Pic:</p>\n\n<pre><code>from openerp import models, fields, api\n\nclass obj_tour(models.Model):\n    _inherit = 'obj.tour'\n    @api.model\n    def create(self, values):\n        record = super(obj_tour, self).create(values)\n        if 'id_trans' in values:\n            trans_id = values['id_trans']\n            trans_model = self.env['obj.gtransport']\n            domain = [('matricule', '=', trans_id)]\n            trans_ids = [idn.id for idn in trans_model.search(domain)]\n            ts = trans_model.browse(trans_ids)\n            for obj in ts:\n               #obj.est_dispo = False\n                obj.write({'est_dispo' : False})\n        return record\n</code></pre>\n\n<p>Any Ideas? </p>\n"}, {"tags": ["python", "sockets"], "comments": [{"owner": {"reputation": 763, "user_id": 7015861, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-ALpUk7Cx5ZE/AAAAAAAAAAI/AAAAAAAAATE/nla7Tao0zAg/photo.jpg?sz=128", "display_name": "Noah Cristino", "link": "https://stackoverflow.com/users/7015861/noah-cristino"}, "edited": false, "score": 2, "creation_date": 1520464454, "post_id": 49162784, "comment_id": 85331306, "body": "I don&#39;t know if it&#39;s doable, but even if it is you should consider another language."}, {"owner": {"reputation": 19004, "user_id": 5079316, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f5e325c060deb5b55ee6ac0941af4dbe?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier Melan&#231;on", "link": "https://stackoverflow.com/users/5079316/olivier-melan%c3%a7on"}, "edited": false, "score": 1, "creation_date": 1520466991, "post_id": 49162784, "comment_id": 85332061, "body": "Python is Turing complete, so yes."}, {"owner": {"reputation": 25595, "user_id": 202229, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6cc1d82c11563b440c57280ad587ee47?s=128&d=identicon&r=PG", "display_name": "smci", "link": "https://stackoverflow.com/users/202229/smci"}, "edited": false, "score": 0, "creation_date": 1584788292, "post_id": 49162784, "comment_id": 107547501, "body": "Recommend you ask these sort of questions on <a href=\"https://gamedev.stackexchange.com\">GameDev.SE</a>, instead of SO"}], "answers": [{"comments": [{"owner": {"reputation": 8856, "user_id": 372526, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/1ffade2b226578a12a4b0d949e5199ee?s=128&d=identicon&r=PG&f=1", "display_name": "Parseltongue", "link": "https://stackoverflow.com/users/372526/parseltongue"}, "edited": false, "score": 1, "creation_date": 1520477444, "post_id": 49163070, "comment_id": 85334671, "body": "I&#39;m seeking to implement a low-resolution version of Transformice (<a href=\"http://www.transformice.com/\" rel=\"nofollow noreferrer\">transformice.com</a>) minus most of the core features (just basic jumping and gravity mechanics, with chat and multiplayer ability).  Can you recommend a javascript platform?  Node.js?  What is popular nowadays?"}, {"owner": {"reputation": 8884, "user_id": 8372104, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/72UbV.png?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/8372104/simon"}, "reply_to_user": {"reputation": 8856, "user_id": 372526, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/1ffade2b226578a12a4b0d949e5199ee?s=128&d=identicon&r=PG&f=1", "display_name": "Parseltongue", "link": "https://stackoverflow.com/users/372526/parseltongue"}, "edited": false, "score": 1, "creation_date": 1520500918, "post_id": 49163070, "comment_id": 85344120, "body": "@Parseltongue  OK, what you want to do looks do-able, if you use the right tools.  I would suggest learning JavaScript for the graphics, this will run client side (in the users browser) [here is an example]( <a href=\"https://www.w3schools.com/graphics/game_intro.asp\" rel=\"nofollow noreferrer\">w3schools.com/graphics/game_intro.asp</a>) of a simple JavaScript game, for the multiplayer part probably use angularJS (this is more of a programming technique rather  than a language)"}, {"owner": {"reputation": 8884, "user_id": 8372104, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/72UbV.png?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/8372104/simon"}, "reply_to_user": {"reputation": 8856, "user_id": 372526, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/1ffade2b226578a12a4b0d949e5199ee?s=128&d=identicon&r=PG&f=1", "display_name": "Parseltongue", "link": "https://stackoverflow.com/users/372526/parseltongue"}, "edited": false, "score": 2, "creation_date": 1520501096, "post_id": 49163070, "comment_id": 85344229, "body": "This will allow you to update the game without reloading.  You will need to send all the player info scores/distance/info to the servers, you could do this with forms.   You can do this via <a href=\"https://knowledge.kitchen/Sending_data_from_client_to_server\" rel=\"nofollow noreferrer\">http forms</a> once again this can be done in JavaScript but you may be able to inplament in Python (the first would probably be easier). Next you send all the info and process it server side.  A SQL (database) is highly recommended although you may be able to inplament something yourself for storage."}, {"owner": {"reputation": 8884, "user_id": 8372104, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/72UbV.png?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/8372104/simon"}, "reply_to_user": {"reputation": 8856, "user_id": 372526, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/1ffade2b226578a12a4b0d949e5199ee?s=128&d=identicon&r=PG&f=1", "display_name": "Parseltongue", "link": "https://stackoverflow.com/users/372526/parseltongue"}, "edited": false, "score": 2, "creation_date": 1520501387, "post_id": 49163070, "comment_id": 85344409, "body": "Next use Python (cgi programming or other) to send all the info to the the players, you will need a list of all the users to send all the data to (SQL database is used for storage).  Node.js can do the same thing as Python, since you already know Python I would suggest learn maybe a web framework, you will need to learn some form handling libraries and data processing/storage libraries. Although you might decide it&#39;s worth using <a href=\"https://vizteck.com/blog/node-js-vs-python-best-option-startup/\" rel=\"nofollow noreferrer\">vizteck.com/blog/node-js-vs-python-best-option-startup</a>"}, {"owner": {"reputation": 8884, "user_id": 8372104, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/72UbV.png?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/8372104/simon"}, "reply_to_user": {"reputation": 8856, "user_id": 372526, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/1ffade2b226578a12a4b0d949e5199ee?s=128&d=identicon&r=PG&f=1", "display_name": "Parseltongue", "link": "https://stackoverflow.com/users/372526/parseltongue"}, "edited": false, "score": 2, "creation_date": 1520501610, "post_id": 49163070, "comment_id": 85344548, "body": "Both Node.js and Python can be used server side, you have the choice of any server side language."}, {"owner": {"reputation": 8856, "user_id": 372526, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/1ffade2b226578a12a4b0d949e5199ee?s=128&d=identicon&r=PG&f=1", "display_name": "Parseltongue", "link": "https://stackoverflow.com/users/372526/parseltongue"}, "edited": false, "score": 0, "creation_date": 1520519054, "post_id": 49163070, "comment_id": 85355813, "body": "Thanks so much @Simon!"}, {"owner": {"reputation": 8884, "user_id": 8372104, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/72UbV.png?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/8372104/simon"}, "reply_to_user": {"reputation": 8856, "user_id": 372526, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/1ffade2b226578a12a4b0d949e5199ee?s=128&d=identicon&r=PG&f=1", "display_name": "Parseltongue", "link": "https://stackoverflow.com/users/372526/parseltongue"}, "edited": false, "score": 0, "creation_date": 1520520722, "post_id": 49163070, "comment_id": 85357057, "body": "@Parseltongue No problem.  Good luck with your project. :-)"}], "tags": [], "owner": {"reputation": 8884, "user_id": 8372104, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/72UbV.png?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/8372104/simon"}, "is_accepted": true, "score": 3, "last_activity_date": 1520466714, "last_edit_date": 1520466714, "creation_date": 1520466032, "answer_id": 49163070, "question_id": 49162784, "link": "https://stackoverflow.com/questions/49162784/can-python-be-used-to-create-multiplayer-browser-based-games/49163070#49163070", "title": "Can Python be used to create multiplayer browser-based games?", "body": "<p>Pygame will be of no use to you here.  You could probably do it (<a href=\"/questions/tagged/sockets\" class=\"post-tag\" title=\"show questions tagged &#39;sockets&#39;\" rel=\"tag\">sockets</a> won't be very useful to you either) I don't suggest it though.  </p>\n\n<p>If you learned JavaScript you would find your task much easier.  Creating a game would require a canvas and that is JavaScript's specialty, even the web-frameworks such as Flask and Django don't inplament them, so eventually you will probably find yourself writing a lot of JavaScript anyway, games are very complex sooner or later your will find some hitch that will not be inplamented and will be forced into writing JS anyway.  </p>\n\n<p>Then you would probably need logins or a way to save scores.  This is where Python can be useful, you could send all the information to be processed server-side in Python.  This has been done before and is reasonably easy.  </p>\n\n<p>If you are talking about a 3d game <em>don't</em>, you will need some form of 3d engine such as three.js, those will be coded in JS (you will find all online engines are inplamented in either JS or Jquery) and those will cause endless headaches if you try to use one of those in Python.</p>\n\n<p>If you want to develop an online in-browser game you will need to know some JavaScript knowledge at some point or another, Python is excellent server-side and good client-side as well, however games are extremely complex at the best of times with graphics and all.  It is not like a web-page, this is an enormous task to undertake (even armed with all the web-development languages -HTML/CSS/JS/Jquery/AJAX/SQL/AngularJS this is an enormous undertaking), and using Python just makes you task much much more difficult, you will go though a lot of hassle and in the end, if you ever do survive it, it would probably have been easier to learn JS and use that.  </p>\n\n<p>Server-side, yes go for Python, if it is client side you need JavaScript.  </p>\n\n<p>If you still decide to do this start with a simple 2d single player game like flappy bird or tetris and then progress to something harder.  </p>\n"}], "owner": {"reputation": 8856, "user_id": 372526, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/1ffade2b226578a12a4b0d949e5199ee?s=128&d=identicon&r=PG&f=1", "display_name": "Parseltongue", "link": "https://stackoverflow.com/users/372526/parseltongue"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2486, "favorite_count": 1, "closed_date": 1520469579, "accepted_answer_id": 49163070, "answer_count": 1, "score": -1, "last_activity_date": 1520466714, "creation_date": 1520464284, "question_id": 49162784, "link": "https://stackoverflow.com/questions/49162784/can-python-be-used-to-create-multiplayer-browser-based-games", "closed_reason": "Needs more focus", "title": "Can Python be used to create multiplayer browser-based games?", "body": "<p>I am interested in creating a multiplayer browser-based game for academic research, but am mainly competent in Python (with experience in PyGame).  </p>\n\n<p>I am aware of PyJS (<a href=\"http://pyjs.org/\" rel=\"nofollow noreferrer\">http://pyjs.org/</a>), but am not sure if that can handle  asynchronous, multiplayer collaboration. </p>\n\n<p>Is this doable in Python?</p>\n"}, {"tags": ["python", "tensorflow", "bazel", "msys"], "answers": [{"tags": [], "owner": {"reputation": 900, "user_id": 1315271, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/607a5a492c037e6e99e88d6994ca1e7e?s=128&d=identicon&r=PG", "display_name": "George", "link": "https://stackoverflow.com/users/1315271/george"}, "is_accepted": false, "score": 0, "last_activity_date": 1521709384, "creation_date": 1521709384, "answer_id": 49424424, "question_id": 49162736, "link": "https://stackoverflow.com/questions/49162736/installing-tensorflow-using-bazel-on-windows/49424424#49424424", "title": "Installing tensorflow using bazel on windows", "body": "<p>I tried to build TF on Windows using bazel. And had the same problem.\nSo as I needed only C++ library, I used the <a href=\"https://joe-antognini.github.io/machine-learning/build-windows-tf\" rel=\"nofollow noreferrer\">following solution</a> using CMake.</p>\n"}], "owner": {"reputation": 160, "user_id": 860160, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/dacbbe588d9f83a52c6372af1d1f88c8?s=128&d=identicon&r=PG", "display_name": "nOp", "link": "https://stackoverflow.com/users/860160/nop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1386, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1521709384, "creation_date": 1520464014, "question_id": 49162736, "link": "https://stackoverflow.com/questions/49162736/installing-tensorflow-using-bazel-on-windows", "title": "Installing tensorflow using bazel on windows", "body": "<p>I am trying to install tensorflow on windows 10 and I am following this link:\n<a href=\"https://www.tensorflow.org/install/install_sources\" rel=\"nofollow noreferrer\">https://www.tensorflow.org/install/install_sources</a></p>\n\n<p>I have successfully installed bazel.  The problem is when I use this command</p>\n\n<pre><code>$ bazel build --config=opt //tensorflow/tools/pip_package:build_pip_package\n</code></pre>\n\n<p>to install tensorflow, msys shows the following error.</p>\n\n<p>ERROR: C:/compiler/tensorflow/tensorflow/python/BUILD:4855:1: no such target '@c                                                                                                                ython//:cython_binary': target 'cython_binary' not declared in package '' define                                                                                                               d by \nC:/tools/msys64/tmp/_bazel_myaccount/zgdsaeo4/external/cython/BUI                                                                                                                LD.bazel</p>\n\n<p>and referenced by '//tensorflow/python:framework/fast_tensor_util.pyx_c                                                                                                                ython_translation'\nERROR: Analysis of target '//tensorflow/tools/pip_package:build_pip_package' fai                                                                                                                led; </p>\n\n<p>build aborted: Loading failed\nINFO: Elapsed time: 5.472s\nFAILED: Build did NOT complete successfully (132 packages loaded)</p>\n\n<p>My guess is, it is looking for /cython folder in the wrong path. However, I have set the python path correctly.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "html", "list"], "comments": [{"owner": {"reputation": 36576, "user_id": 2341603, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZTHIr.jpg?s=128&g=1", "display_name": "Obsidian Age", "link": "https://stackoverflow.com/users/2341603/obsidian-age"}, "edited": false, "score": 3, "creation_date": 1520464117, "post_id": 49162712, "comment_id": 85331193, "body": "What coding language are you trying to do this in, and what you have <a href=\"http://meta.stackoverflow.com/questions/261592\"><b>tried so far</b></a>? The very question you linked to gives you an example of how to do exactly what you&#39;re asking -- what specifically are you struggling with?"}, {"owner": {"reputation": 3, "user_id": 9411026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad65f4f7aa80e369bf8b2bc748b2b27b?s=128&d=identicon&r=PG&f=1", "display_name": "Snow", "link": "https://stackoverflow.com/users/9411026/snow"}, "reply_to_user": {"reputation": 36576, "user_id": 2341603, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZTHIr.jpg?s=128&g=1", "display_name": "Obsidian Age", "link": "https://stackoverflow.com/users/2341603/obsidian-age"}, "edited": false, "score": 0, "creation_date": 1520471299, "post_id": 49162712, "comment_id": 85333212, "body": "I think I was hoping there was a program that would do it.  I did not know exactly what Python was when I posted, I just knew it had to do with programming.  The extent of my &quot;skills&quot; is basic HTML and CSS.  I have since figured out what Python is, installed it, and attempted to make a few .py files from tutorials, but if they&#39;re working, I can&#39;t find the files on my computer."}, {"owner": {"reputation": 416, "user_id": 9241395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08595c32ae35ce5dac7223582b898085?s=128&d=identicon&r=PG&f=1", "display_name": "Igid", "link": "https://stackoverflow.com/users/9241395/igid"}, "edited": false, "score": 0, "creation_date": 1520519668, "post_id": 49162712, "comment_id": 85356221, "body": "@Snow please undo your edit where you pasted my answer into your question. It is clearer for future visitors if the question remains a question and the top answer contains the best solution. You can accept my answer to indicate to others that it solved your problem. Have a read of: <a href=\"https://stackoverflow.com/help/someone-answers\">stackoverflow.com/help/someone-answers</a>"}], "answers": [{"comments": [{"owner": {"reputation": 11483, "user_id": 600486, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/akN6H.png?s=128&g=1", "display_name": "blurfus", "link": "https://stackoverflow.com/users/600486/blurfus"}, "edited": false, "score": 0, "creation_date": 1520473308, "post_id": 49162781, "comment_id": 85333686, "body": "but is it a valid HTML page?"}], "tags": [], "owner": {"reputation": 61, "user_id": 8844006, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Qt5o.png?s=128&g=1", "display_name": "Marti157", "link": "https://stackoverflow.com/users/8844006/marti157"}, "is_accepted": false, "score": 0, "last_activity_date": 1520473071, "last_edit_date": 1520473071, "creation_date": 1520464245, "answer_id": 49162781, "question_id": 49162712, "link": "https://stackoverflow.com/questions/49162712/create-html-files-from-a-list/49162781#49162781", "title": "Create html files from a list", "body": "<p>Try this using python:</p>\n\n<pre><code>for i in range(26):\n    f = open(chr(97+i)+\".html\", \"w\")\n    f.write(\"Some text\")\n    f.close()\n</code></pre>\n\n<p>It should write a file with every letter in the alphabet.</p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 9411026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad65f4f7aa80e369bf8b2bc748b2b27b?s=128&d=identicon&r=PG&f=1", "display_name": "Snow", "link": "https://stackoverflow.com/users/9411026/snow"}, "edited": false, "score": 0, "creation_date": 1520478088, "post_id": 49164451, "comment_id": 85334798, "body": "I think I messed up using the alphabet as my example.  What I want is to create the file from a list of words haha.  While Googl&#39;ing trying to figure it out is how I discovered I could add my base page template at the same time.  So, if I want to use a list of words, I use your file_list = [&quot;main&quot;, &quot;about&quot;, &quot;myhobbies&quot;, &quot;catscatscats&quot;].  What do I replace for letter in alphabet:     f = open(letter+&quot;.html&quot;, &quot;w&quot;) with to make it go from the file_list?  Greatly appreciate the help, I&#39;ve added Python to my &quot;to learn&quot; list!  Also added the tag, thank you so much!"}, {"owner": {"reputation": 3, "user_id": 9411026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad65f4f7aa80e369bf8b2bc748b2b27b?s=128&d=identicon&r=PG&f=1", "display_name": "Snow", "link": "https://stackoverflow.com/users/9411026/snow"}, "edited": false, "score": 0, "creation_date": 1520478288, "post_id": 49164451, "comment_id": 85334857, "body": "Also, should that block of code to create the alphabet pages with the message.replace code take a long time to do it?  (Like over 20 minutes?)"}, {"owner": {"reputation": 3, "user_id": 9411026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad65f4f7aa80e369bf8b2bc748b2b27b?s=128&d=identicon&r=PG&f=1", "display_name": "Snow", "link": "https://stackoverflow.com/users/9411026/snow"}, "edited": false, "score": 0, "creation_date": 1520479419, "post_id": 49164451, "comment_id": 85335123, "body": "Something is working!  I&#39;ll edit my post with the code since it won&#39;t work here."}, {"owner": {"reputation": 416, "user_id": 9241395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08595c32ae35ce5dac7223582b898085?s=128&d=identicon&r=PG&f=1", "display_name": "Igid", "link": "https://stackoverflow.com/users/9241395/igid"}, "reply_to_user": {"reputation": 3, "user_id": 9411026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad65f4f7aa80e369bf8b2bc748b2b27b?s=128&d=identicon&r=PG&f=1", "display_name": "Snow", "link": "https://stackoverflow.com/users/9411026/snow"}, "edited": false, "score": 0, "creation_date": 1520480190, "post_id": 49164451, "comment_id": 85335273, "body": "Yes, use <code>file_list</code> instead of <code>alphabet</code>... and actually, <code>letter</code> is just an arbitrary name I&#39;ve given to the item in the list I&#39;m looping over. So you could even keep it as <code>letter</code>! Or, to be less confusing, change it to a better name like <code>filename</code>"}, {"owner": {"reputation": 416, "user_id": 9241395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08595c32ae35ce5dac7223582b898085?s=128&d=identicon&r=PG&f=1", "display_name": "Igid", "link": "https://stackoverflow.com/users/9241395/igid"}, "reply_to_user": {"reputation": 3, "user_id": 9411026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad65f4f7aa80e369bf8b2bc748b2b27b?s=128&d=identicon&r=PG&f=1", "display_name": "Snow", "link": "https://stackoverflow.com/users/9411026/snow"}, "edited": false, "score": 0, "creation_date": 1520480219, "post_id": 49164451, "comment_id": 85335279, "body": "And no, nothing this simple should take more than a second :/"}, {"owner": {"reputation": 416, "user_id": 9241395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08595c32ae35ce5dac7223582b898085?s=128&d=identicon&r=PG&f=1", "display_name": "Igid", "link": "https://stackoverflow.com/users/9241395/igid"}, "reply_to_user": {"reputation": 3, "user_id": 9411026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad65f4f7aa80e369bf8b2bc748b2b27b?s=128&d=identicon&r=PG&f=1", "display_name": "Snow", "link": "https://stackoverflow.com/users/9411026/snow"}, "edited": false, "score": 0, "creation_date": 1520481650, "post_id": 49164451, "comment_id": 85335682, "body": "I don&#39;t have the reputation to comment on your question, but @Snow, please undo the edit where you inserted my code solution in your question. In order for questions to be helpful to others down the line, they need to see your original question and the answer separately. You can accept my answer (click the tick to the left of it) to indicate to others that my solution worked for you."}], "tags": [], "owner": {"reputation": 416, "user_id": 9241395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08595c32ae35ce5dac7223582b898085?s=128&d=identicon&r=PG&f=1", "display_name": "Igid", "link": "https://stackoverflow.com/users/9241395/igid"}, "is_accepted": true, "score": 1, "last_activity_date": 1520476354, "creation_date": 1520476354, "answer_id": 49164451, "question_id": 49162712, "link": "https://stackoverflow.com/questions/49162712/create-html-files-from-a-list/49164451#49164451", "title": "Create html files from a list", "body": "<p>@Marti157's answer gives you the bare bones of how to do it (after replacing <code>\"some text\"</code> with your <code>message</code>). It involves a clever trick where rather than listing out all the letters of the alphabet, you give the ASCI code for 'a', which is 97, and add <code>i</code>, a number that starts at 0 and goes up for every repetition of the loop.</p>\n\n<p>So this shows you you don't actually need a list to do exactly what you set out to do. But a list could be useful in a number of ways, so let's generate one using the same trick @Marti157 used:</p>\n\n<pre><code>alphabet = [chr(97+i) for i in range(26)]\n</code></pre>\n\n<p>You can do it in one line! This is one of the cool things about Python. Of course, this is probably a dummy example and in the end you'll have a more specific list which you'll want to specify manually. Like so:</p>\n\n<pre><code>file_list = [\"main\", \"about\", \"myhobbies\", \"catscatscats\"]\n</code></pre>\n\n<p>Once you have a list, the loop that generates the files for you (using the <code>alphabet</code> list and your <code>message</code>) is:</p>\n\n<pre><code>for letter in alphabet:\n    f = open(letter+\".html\", \"w\")\n    f.write(message)\n    f.close()\n</code></pre>\n\n<p>The next thing you'll want to do to really make this functional is vary the content of the html file according to the item in the list. For this, let's use '@' as a placeholder within your <code>message</code> text, that we'll later replace with a different letter of the alphabet for each file.</p>\n\n<pre><code>alphabet = [chr(97+i) for i in range(26)]\nmessage = \"\"\"&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;title&gt;This is page @&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n&lt;h1&gt;This is @ Heading&lt;/h1&gt;\n&lt;p&gt;This is @ paragraph.&lt;/p&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\"\"\"\n\nfor letter in alphabet:\n    f = open(letter+\".html\", \"w\")\n    f.write(message.replace(\"@\", letter))\n    f.close()\n</code></pre>\n\n<p>Now w.html should read:</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;title&gt;This is page w&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n&lt;h1&gt;This is w Heading&lt;/h1&gt;\n&lt;p&gt;This is w paragraph.&lt;/p&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>Hopefully this will get you excited about the possibilities for automating this kind of thing with Python!</p>\n\n<h2>File management</h2>\n\n<p>If you are struggling to find the files generated, I'd first look in the directory your Python script is saved. Or, if you're typing it directly in terminal, you might want to check your working directory (quit Python first) using <code>pwd</code>. (I'm assuming it's a Unix terminal, ie. you're using a Mac.) Look into how to use <code>pwd</code> and <code>cd</code> (or their Windows equivalents) to get the files generated where you want them.</p>\n\n<p>Of course the easiest thing would be to tell Python where to save things. <a href=\"https://automatetheboringstuff.com/chapter8/\" rel=\"nofollow noreferrer\">This</a> should tell you everything you need to know.</p>\n\n<h2>P.S.</h2>\n\n<p>Please tag your question with Python. It's what you've chosen to use, whether you realised it or not (and it's a good choice!), and it's what all the answers relate to.</p>\n"}], "owner": {"reputation": 3, "user_id": 9411026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad65f4f7aa80e369bf8b2bc748b2b27b?s=128&d=identicon&r=PG&f=1", "display_name": "Snow", "link": "https://stackoverflow.com/users/9411026/snow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 492, "favorite_count": 0, "accepted_answer_id": 49164451, "answer_count": 2, "score": -2, "last_activity_date": 1520654903, "creation_date": 1520463885, "last_edit_date": 1520654903, "question_id": 49162712, "link": "https://stackoverflow.com/questions/49162712/create-html-files-from-a-list", "title": "Create html files from a list", "body": "<p>I am wondering if it is possible to create html files from a list.  For example, I want to create an html file for each letter of the alphabet.  Is it possible to create a list in notepad or excel such as:</p>\n\n<ul>\n<li>a </li>\n<li>b</li>\n<li>c</li>\n<li>d</li>\n<li>etc.</li>\n</ul>\n\n<p>and then run a program or code that would output a bunch of files (a.html, a.html, c.html, and so on)</p>\n\n<p>I'm pretty ignorant about programming and coding, so if there's a simple solution, I would greatly appreciate any help.  I found <a href=\"https://stackoverflow.com/questions/44675157/generate-html-files-from-the-list-of-words\">this link</a> but I have no idea how to use the code.</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 1798, "user_id": 2280890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e409f9d13ce2d82edcb84b3f9cfb879?s=128&d=identicon&r=PG", "display_name": "import random", "link": "https://stackoverflow.com/users/2280890/import-random"}, "edited": false, "score": 0, "creation_date": 1520463934, "post_id": 49162696, "comment_id": 85331121, "body": "Welcome to Stack Overflow! Please edit your question to show the <a href=\"https://mattgemmell.com/what-have-you-tried/\" rel=\"nofollow noreferrer\">code you have so far</a>. You should include at least an outline (but preferably a <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>) of the code that you are having problems with, then we can try to help. You should also read <a href=\"https://stackoverflow.com/help/how-to-ask\">How to Ask</a>."}], "answers": [{"comments": [{"owner": {"reputation": 325, "user_id": 2831637, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/ebc0179a0bf564819688f8998866eb49?s=128&d=identicon&r=PG&f=1", "display_name": "Korzak", "link": "https://stackoverflow.com/users/2831637/korzak"}, "edited": false, "score": 0, "creation_date": 1551750498, "post_id": 49209740, "comment_id": 96745313, "body": "Does not work. Just puts the whole dataset into the first cell of the Excel file instead of rendering it as a table(s)"}], "tags": [], "owner": {"reputation": 15100, "user_id": 5212614, "user_type": "registered", "accept_rate": 32, "profile_image": "https://i.stack.imgur.com/tITr9.jpg?s=128&g=1", "display_name": "ASH", "link": "https://stackoverflow.com/users/5212614/ash"}, "is_accepted": false, "score": 0, "last_activity_date": 1520717481, "last_edit_date": 1520717481, "creation_date": 1520689391, "answer_id": 49209740, "question_id": 49162696, "link": "https://stackoverflow.com/questions/49162696/extract-data-from-pdf-and-populate-in-excel-using-python/49209740#49209740", "title": "Extract Data from PDF and populate in Excel using Python", "body": "<p>I think it should be something like this.</p>\n\n<pre><code>import PyPDF2\nimport openpyxl\n\npdfFileObj = open('C:/Users/Excel/Desktop/TABLES.pdf', 'rb')\npdfReader = PyPDF2.PdfFileReader(pdfFileObj)\npdfReader.numPages\n\npageObj = pdfReader.getPage(0)\nmytext = pageObj.extractText()\n\n\nwb = openpyxl.load_workbook('C:/Users/Excel/Desktop/excel.xlsx')\nsheet = wb.active\nsheet.title = 'MyPDF'\nsheet['A1'] = mytext\n\nwb.save('C:/Users/Excel/Desktop/excel.xlsx')\nprint('DONE!!')\n</code></pre>\n\n<p>See the link below for more details.</p>\n\n<p><a href=\"http://automatetheboringstuff.com/chapter12/\" rel=\"nofollow noreferrer\">http://automatetheboringstuff.com/chapter12/</a></p>\n"}], "owner": {"reputation": 11, "user_id": 8323542, "user_type": "registered", "profile_image": "https://graph.facebook.com/10212529930590796/picture?type=large", "display_name": "Abhinav Jonnada", "link": "https://stackoverflow.com/users/8323542/abhinav-jonnada"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 4370, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1520717481, "creation_date": 1520463815, "question_id": 49162696, "link": "https://stackoverflow.com/questions/49162696/extract-data-from-pdf-and-populate-in-excel-using-python", "title": "Extract Data from PDF and populate in Excel using Python", "body": "<p>I need bit of advice .............\nI'm working on a program in Python, the program would read data from a PDF  and I'm supposed to populate the same information in a excel sheet\nRight now I'm using PyPDF 2 to extract the data and I would be using Panda to store the data in a data frame and then that data frame would be populated in to excel sheet\nIs my path of action efficient and if there's a better way or a flaw in my plan please let me know about it.</p>\n"}, {"tags": ["python", "opencv", "computer-vision", "ellipse"], "comments": [{"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 1, "creation_date": 1520470120, "post_id": 49162657, "comment_id": 85332899, "body": "&quot;I couldn&#39;t find a better way to describe the 2D array&quot; -- 2D array of small integers, using a computer vision library... how about a grayscale image? (the resulting PNG is about 7x smaller than the code you used to generate it)"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 7978310, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/05cb87af0dc168c58ccb813677b08043?s=128&d=identicon&r=PG&f=1", "display_name": "dcoppin", "link": "https://stackoverflow.com/users/7978310/dcoppin"}, "edited": false, "score": 0, "creation_date": 1520542106, "post_id": 49179543, "comment_id": 85370019, "body": "That&#39;s a good idea indeed. However, cv2.convexHull() returns only 4 points (cf. opencv doc.) while I need at least 5 points to be able to fit an ellipse. <code>hull = cv2.convexHull(cnt)</code> and <code>ellipse=cv2.fitEllipse(hull)</code> gives: <code>error: (-201) Number of points should be &gt;= 5 in function cvFitEllipse2</code>"}], "tags": [], "owner": {"reputation": 1326, "user_id": 2518618, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c6d3411b164af7bf0550b27b720755fd?s=128&d=identicon&r=PG", "display_name": "user2518618", "link": "https://stackoverflow.com/users/2518618/user2518618"}, "is_accepted": false, "score": 0, "last_activity_date": 1520531818, "creation_date": 1520531818, "answer_id": 49179543, "question_id": 49162657, "link": "https://stackoverflow.com/questions/49162657/why-does-cv2-fitellipse-considers-contours-as-side-of-ellipse/49179543#49179543", "title": "Why does cv2.fitEllipse considers contours as side of ellipse?", "body": "<p>fitEllipse() would work much better if your shape looked like an ellipse.</p>\n\n<p>Your shape is very noisy and it is difficult to find an ellipse that fits it properly. Actually, both ellipses that the algorithm found pass near the points of your shape and both may be good approximations.</p>\n\n<p>You should preprocess your shape to make it look more like an ellipse. I would try using cv2.convexHull() before fitEllipse()</p>\n"}], "owner": {"reputation": 21, "user_id": 7978310, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/05cb87af0dc168c58ccb813677b08043?s=128&d=identicon&r=PG&f=1", "display_name": "dcoppin", "link": "https://stackoverflow.com/users/7978310/dcoppin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2790, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1520543388, "creation_date": 1520463622, "last_edit_date": 1520543388, "question_id": 49162657, "link": "https://stackoverflow.com/questions/49162657/why-does-cv2-fitellipse-considers-contours-as-side-of-ellipse", "title": "Why does cv2.fitEllipse considers contours as side of ellipse?", "body": "<p>I am encountering a weird problem with cv2.fitEllipse. When I try to get this ellipse of this form, \n<a href=\"https://i.stack.imgur.com/tPvWW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tPvWW.png\" alt=\"form\"></a></p>\n\n<p>that can be defined (sorry for the long list of definition) as:</p>\n\n<pre><code>import numpy as np\ntest=np.zeros((400,1000))\ntest[241, 113]=1\ntest[241, 114]=1\ntest[242, 112]=1\ntest[242, 113]=1\ntest[242, 114]=1\ntest[242, 115]=1\ntest[242, 116]=1\ntest[242, 118]=1\ntest[242, 119]=1\ntest[242, 120]=1\ntest[242, 121]=1\ntest[243, 111]=1\ntest[243, 112]=1\ntest[243, 113]=1\ntest[243, 114]=1\ntest[243, 115]=1\ntest[243, 116]=1\ntest[243, 117]=1\ntest[243, 118]=1\ntest[243, 119]=1\ntest[243, 120]=1\ntest[243, 121]=1\ntest[244, 110]=1\ntest[244, 111]=1\ntest[244, 112]=1\ntest[244, 113]=1\ntest[244, 114]=1\ntest[244, 115]=1\ntest[244, 116]=1\ntest[244, 117]=1\ntest[244, 118]=1\ntest[244, 119]=1\ntest[244, 120]=1\ntest[245, 109]=1\ntest[245, 110]=1\ntest[245, 111]=1\ntest[245, 112]=1\ntest[245, 113]=1\ntest[245, 114]=1\ntest[245, 115]=1\ntest[245, 116]=1\ntest[245, 117]=1\ntest[245, 118]=1\ntest[245, 119]=1\ntest[245, 120]=1\ntest[246, 109]=1\ntest[246, 110]=1\ntest[246, 111]=1\ntest[246, 112]=1\ntest[246, 113]=1\ntest[246, 114]=1\ntest[246, 115]=1\ntest[246, 116]=1\ntest[246, 117]=1\ntest[246, 118]=1\ntest[246, 119]=1\ntest[247, 109]=1\ntest[247, 110]=1\ntest[247, 111]=1\ntest[247, 112]=1\ntest[247, 113]=1\ntest[247, 114]=1\ntest[247, 115]=1\ntest[247, 116]=1\ntest[247, 117]=1\ntest[247, 118]=1\ntest[247, 119]=1\ntest[248, 108]=1\ntest[248, 109]=1\ntest[248, 110]=1\ntest[248, 111]=1\ntest[248, 112]=1\ntest[248, 113]=1\ntest[248, 114]=1\ntest[248, 115]=1\ntest[248, 116]=1\ntest[248, 117]=1\ntest[248, 118]=1\ntest[248, 119]=1\ntest[249, 109]=1\ntest[249, 110]=1\ntest[249, 111]=1\ntest[249, 112]=1\ntest[249, 113]=1\ntest[249, 114]=1\ntest[249, 115]=1\ntest[249, 116]=1\ntest[249, 117]=1\ntest[249, 118]=1\ntest[249, 119]=1\ntest[250, 109]=1\ntest[250, 110]=1\ntest[250, 111]=1\ntest[250, 112]=1\ntest[250, 113]=1\ntest[250, 114]=1\ntest[250, 115]=1\ntest[250, 116]=1\ntest[250, 117]=1\ntest[250, 118]=1\ntest[250, 119]=1\ntest[250, 120]=1\ntest[251, 109]=1\ntest[251, 110]=1\ntest[251, 111]=1\ntest[251, 112]=1\ntest[251, 113]=1\ntest[251, 114]=1\ntest[251, 115]=1\ntest[251, 116]=1\ntest[251, 117]=1\ntest[251, 118]=1\ntest[251, 119]=1\ntest[251, 120]=1\ntest[252, 109]=1\ntest[252, 110]=1\ntest[252, 111]=1\ntest[252, 112]=1\ntest[252, 113]=1\ntest[252, 114]=1\ntest[252, 115]=1\ntest[252, 116]=1\ntest[252, 117]=1\ntest[252, 118]=1\ntest[252, 119]=1\ntest[252, 120]=1\ntest[252, 121]=1\ntest[253, 109]=1\ntest[253, 112]=1\ntest[253, 113]=1\ntest[253, 114]=1\ntest[253, 115]=1\ntest[253, 116]=1\ntest[253, 117]=1\ntest[253, 118]=1\ntest[253, 119]=1\ntest[253, 120]=1\ntest[253, 121]=1\ntest[254, 112]=1\ntest[254, 113]=1\ntest[254, 114]=1\ntest[254, 115]=1\ntest[254, 116]=1\ntest[254, 117]=1\ntest[254, 118]=1\ntest[254, 119]=1\ntest[254, 120]=1\ntest[254, 121]=1\ntest[255, 110]=1\ntest[255, 112]=1\ntest[255, 113]=1\ntest[255, 114]=1\ntest[255, 115]=1\ntest[255, 116]=1\ntest[255, 117]=1\ntest[255, 118]=1\ntest[255, 119]=1\ntest[255, 120]=1\ntest[255, 121]=1\ntest[255, 122]=1\ntest[256, 108]=1\ntest[256, 110]=1\ntest[256, 111]=1\ntest[256, 112]=1\ntest[256, 113]=1\ntest[256, 114]=1\ntest[256, 115]=1\ntest[256, 116]=1\ntest[256, 117]=1\ntest[256, 118]=1\ntest[256, 119]=1\ntest[256, 120]=1\ntest[256, 121]=1\ntest[256, 122]=1\ntest[256, 123]=1\ntest[257, 106]=1\ntest[257, 107]=1\ntest[257, 108]=1\ntest[257, 109]=1\ntest[257, 110]=1\ntest[257, 111]=1\ntest[257, 112]=1\ntest[257, 113]=1\ntest[257, 114]=1\ntest[257, 115]=1\ntest[257, 116]=1\ntest[257, 117]=1\ntest[257, 118]=1\ntest[257, 119]=1\ntest[257, 120]=1\ntest[257, 121]=1\ntest[257, 122]=1\ntest[257, 123]=1\ntest[257, 124]=1\ntest[258, 103]=1\ntest[258, 104]=1\ntest[258, 105]=1\ntest[258, 106]=1\ntest[258, 107]=1\ntest[258, 108]=1\ntest[258, 109]=1\ntest[258, 110]=1\ntest[258, 111]=1\ntest[258, 112]=1\ntest[258, 113]=1\ntest[258, 114]=1\ntest[258, 115]=1\ntest[258, 116]=1\ntest[258, 117]=1\ntest[258, 118]=1\ntest[258, 119]=1\ntest[258, 120]=1\ntest[258, 121]=1\ntest[258, 122]=1\ntest[258, 123]=1\ntest[258, 124]=1\ntest[259, 103]=1\ntest[259, 104]=1\ntest[259, 105]=1\ntest[259, 106]=1\ntest[259, 107]=1\ntest[259, 108]=1\ntest[259, 109]=1\ntest[259, 110]=1\ntest[259, 111]=1\ntest[259, 112]=1\ntest[259, 113]=1\ntest[259, 114]=1\ntest[259, 115]=1\ntest[259, 116]=1\ntest[259, 117]=1\ntest[259, 118]=1\ntest[259, 119]=1\ntest[259, 120]=1\ntest[259, 121]=1\ntest[259, 122]=1\ntest[259, 123]=1\ntest[259, 124]=1\ntest[260, 106]=1\ntest[260, 107]=1\ntest[260, 108]=1\ntest[260, 109]=1\ntest[260, 110]=1\ntest[260, 111]=1\ntest[260, 112]=1\ntest[260, 113]=1\ntest[260, 114]=1\ntest[260, 115]=1\ntest[260, 116]=1\ntest[260, 117]=1\ntest[260, 118]=1\ntest[260, 119]=1\ntest[260, 120]=1\ntest[260, 121]=1\ntest[260, 122]=1\ntest[260, 123]=1\ntest[260, 124]=1\ntest[261, 107]=1\ntest[261, 110]=1\ntest[261, 111]=1\ntest[261, 112]=1\ntest[261, 113]=1\ntest[261, 114]=1\ntest[261, 115]=1\ntest[261, 116]=1\ntest[261, 117]=1\ntest[261, 118]=1\ntest[261, 119]=1\ntest[261, 120]=1\ntest[261, 121]=1\ntest[261, 122]=1\ntest[261, 123]=1\ntest[261, 124]=1\ntest[261, 125]=1\ntest[262, 115]=1\ntest[262, 116]=1\ntest[262, 117]=1\ntest[262, 118]=1\ntest[262, 119]=1\ntest[262, 120]=1\ntest[262, 121]=1\ntest[262, 122]=1\ntest[262, 123]=1\ntest[262, 124]=1\ntest[262, 125]=1\ntest[262, 126]=1\ntest[262, 127]=1\ntest[262, 128]=1\ntest[263, 116]=1\ntest[263, 117]=1\ntest[263, 118]=1\ntest[263, 119]=1\ntest[263, 120]=1\ntest[263, 121]=1\ntest[263, 122]=1\ntest[263, 123]=1\ntest[263, 127]=1\ntest[263, 128]=1\ntest[263, 129]=1\ntest[263, 130]=1\ntest[263, 131]=1\ntest[263, 132]=1\ntest[263, 133]=1\ntest[263, 134]=1\ntest[263, 135]=1\ntest[264, 117]=1\ntest[264, 118]=1\ntest[264, 119]=1\ntest[264, 120]=1\ntest[264, 121]=1\ntest[264, 122]=1\ntest[264, 123]=1\ntest[264, 127]=1\ntest[264, 128]=1\ntest[264, 129]=1\ntest[264, 130]=1\ntest[264, 131]=1\ntest[264, 132]=1\ntest[264, 133]=1\ntest[264, 134]=1\ntest[264, 135]=1\ntest[264, 136]=1\ntest[264, 138]=1\ntest[264, 139]=1\ntest[265, 118]=1\ntest[265, 119]=1\ntest[265, 120]=1\ntest[265, 121]=1\ntest[265, 122]=1\ntest[265, 123]=1\ntest[265, 131]=1\ntest[265, 134]=1\ntest[265, 135]=1\ntest[265, 136]=1\ntest[265, 137]=1\ntest[265, 138]=1\ntest[265, 139]=1\ntest[265, 140]=1\ntest[265, 141]=1\ntest[265, 142]=1\ntest[265, 143]=1\ntest[266, 120]=1\ntest[266, 121]=1\ntest[266, 122]=1\ntest[266, 135]=1\ntest[266, 136]=1\ntest[266, 137]=1\ntest[266, 138]=1\ntest[266, 139]=1\ntest[266, 140]=1\ntest[266, 141]=1\ntest[266, 142]=1\ntest[266, 143]=1\ntest[266, 144]=1\ntest[266, 145]=1\ntest[267, 121]=1\ntest[267, 122]=1\ntest[267, 142]=1\ntest[267, 143]=1\ntest[267, 144]=1\ntest[267, 145]=1\ntest[267, 146]=1\ntest[267, 147]=1\ntest[267, 148]=1\ntest[267, 149]=1\ntest[267, 150]=1\ntest[267, 151]=1\ntest[268, 147]=1\ntest[268, 148]=1\ntest[268, 149]=1\ntest[268, 150]=1\ntest[268, 151]=1\ntest[268, 152]=1\ntest[268, 153]=1\ntest[268, 154]=1\ntest[268, 155]=1\ntest[268, 156]=1\ntest[268, 157]=1\ntest[269, 149]=1\ntest[269, 151]=1\ntest[269, 152]=1\ntest[269, 153]=1\ntest[269, 154]=1\ntest[269, 155]=1\ntest[269, 156]=1\ntest[269, 157]=1\ntest[270, 156]=1\n</code></pre>\n\n<p>I have the following ellipse:\n<a href=\"https://i.stack.imgur.com/B9QA6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/B9QA6.png\" alt=\"bad ellipse\"></a></p>\n\n<p>To get this result, you can just run the following code with python </p>\n\n<pre><code>import cv2\nimport numpy as np\nimport itertools\nimport matplotlib.pyplot as mpl\ndef getContours_test(clusters):\n        copy_clusters=clusters.copy()\n        int_cnts=[]\n        for label in np.unique(clusters):\n                mask = np.zeros(clusters.shape, dtype=\"uint8\")\n                mask[clusters == label] = 255\n                cnts, hierarchy = \\\n                        cv2.findContours(mask.copy(),cv2.RETR_EXTERNAL,cv2.CHAIN_APPROX_NONE)\n                int_cnts.append(cnts)\n        list_contours=list(itertools.chain.from_iterable(int_cnts))\n        return copy_clusters, list_contours\n\n\ndef getEllipse_test(clusters, list_contours):\n        for index,cnt in enumerate(list_contours):\n                map_ellipse=np.ones(clusters.shape).astype(np.uint8)\n                cimg = np.zeros_like(clusters)\n                cv2.drawContours(cimg, list_contours, index, color=255, thickness=-1)\n                ellipse=cv2.fitEllipse(cnt)\n                cv2.ellipse(map_ellipse,ellipse,(255,0,0))\n        return map_ellipse\n\ntest_result, test_contours = getContours_test(test)\ntest_ellipse = getEllipse_test(test_result,test_contours)\nmpl.contourf(test_result)\nmpl.contour(test_ellipse)\nmpl.show()\n</code></pre>\n\n<p>I tried to see if I could reproduce the same behavior with a similar but simpler form (new form is filled while original is contoured):\n<a href=\"https://i.stack.imgur.com/h0uWJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/h0uWJ.png\" alt=\"2 forms\"></a>\nbut this time, I get a correct result with the same code\n<a href=\"https://i.stack.imgur.com/QK1JH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QK1JH.png\" alt=\"good ellipse\"></a></p>\n\n<pre><code>test2=np.zeros((400,1000))\ntest2[240:260,110:120]=1\ntest2[260:265,117:134]=1\ntest2[265:270,134:155]=1\ntest_result2, test_contours2 = getContours_test(test2)\ntest_ellipse2 = getEllipse_test(test_result2,test_contours2)\nmpl.contourf(test_result2)\nmpl.contour(test_ellipse2)\nmpl.show()\n</code></pre>\n\n<p>Any idea why this is happening? cv2.fitEllipse should have enough contour points to estimate the correct ellipse of the original form.</p>\n\n<p>EDIT: \nFollowing the remark from @user2518618, I tried to include cv2.convexHull() in a method:</p>\n\n<pre><code>def remove_convex(clusters,list_contours):\n        for index,cnt in enumerate(list_contours):\n                map_ellipse=np.ones(clusters.shape).astype(np.uint8)\n                cimg = np.zeros_like(clusters)\n                hull = cv2.convexHull(cnt)\n                cv2.drawContours(cimg, hull, -1, color=255, thickness=-1)\n        return cimg\n</code></pre>\n\n<p>resulting a selection of points suitable for an ellipse to be estimated:</p>\n\n<pre><code>test_hull = remove_convex(test_result,test_contours)\n\nmpl.contour(test_hull)\nmpl.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/j7J6k.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/j7J6k.png\" alt=\"points remaining after cv2.convexHull()\"></a></p>\n\n<p>But if I add <code>ellipse=cv2.fitEllipse(hull)</code> after <code>hull = cv2.convexHull(cnt)</code> in remove_convex, I get the following error:\nerror: (-201) Number of points should be >= 5 in function cvFitEllipse2</p>\n\n<p>Although I understand the error since the opencv documentation says that convex hull returns the four corners of a rectangle, I don't really understand why I just can't use the points plotted above to fit my new ellipse.</p>\n"}, {"tags": ["python", "google-sheets-api"], "comments": [{"owner": {"reputation": 5995, "user_id": 5995040, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Wp8l0.png?s=128&g=1", "display_name": "Mr.Rebot", "link": "https://stackoverflow.com/users/5995040/mr-rebot"}, "edited": false, "score": 0, "creation_date": 1520529467, "post_id": 49162648, "comment_id": 85363097, "body": "If you are converting a pre-valued cell text from <code>one</code> to <code>1</code>, I think that the userEnteredFormat:numberFormat() will not convert that. A workaround would be creating your own library for converting text to numbers. Another thing you can do is create a <a href=\"https://developers.google.com/sheets/api/samples/conditional-formatting\" rel=\"nofollow noreferrer\">Conditional Formatting</a> to check if the entered value for the cell is a number or a text a provide a validator for the cell. Hope this helps."}, {"owner": {"reputation": 105, "user_id": 2090036, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/7LVRb.jpg?s=128&g=1", "display_name": "Ian Crew", "link": "https://stackoverflow.com/users/2090036/ian-crew"}, "reply_to_user": {"reputation": 5995, "user_id": 5995040, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Wp8l0.png?s=128&g=1", "display_name": "Mr.Rebot", "link": "https://stackoverflow.com/users/5995040/mr-rebot"}, "edited": false, "score": 0, "creation_date": 1520546456, "post_id": 49162648, "comment_id": 85372217, "body": "Thanks @Mr.Rebot -- he columns actually contain &quot;1&quot; &quot;2&quot; etc. not &quot;one&quot; &quot;two&quot; and so on. But Google seems to be seeing the &quot;1&quot; &quot;2&quot; etc as text, not numbers, even if they&#39;re an int in python, hence my desire to format them as numbers."}, {"owner": {"reputation": 1418, "user_id": 3390935, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1q23c.png?s=128&g=1", "display_name": "Tom Woodward", "link": "https://stackoverflow.com/users/3390935/tom-woodward"}, "edited": false, "score": 0, "creation_date": 1520560479, "post_id": 49162648, "comment_id": 85376535, "body": "Would formatting it via an internal Google Script that&#39;s called on sheet update be a solution or do you only want to do it via Python?"}, {"owner": {"reputation": 105, "user_id": 2090036, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/7LVRb.jpg?s=128&g=1", "display_name": "Ian Crew", "link": "https://stackoverflow.com/users/2090036/ian-crew"}, "reply_to_user": {"reputation": 1418, "user_id": 3390935, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1q23c.png?s=128&g=1", "display_name": "Tom Woodward", "link": "https://stackoverflow.com/users/3390935/tom-woodward"}, "edited": false, "score": 0, "creation_date": 1520571895, "post_id": 49162648, "comment_id": 85379130, "body": "Thanks @TomWoodward -- I could do it via a Google Apps Script, and that&#39;s an interesting idea, but I&#39;d rather do it via Python if at all possible. What I&#39;m doing is automated reporting pushing its results into a sheet, where a new sheet is created each day when the reporting script runs via cron, so it would be a lot easier if it could all be 100% automated. I also don&#39;t understand why what I&#39;m doing <i>isn&#39;t</i> working: everything I read indicates that it should work...."}, {"owner": {"reputation": 1418, "user_id": 3390935, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1q23c.png?s=128&g=1", "display_name": "Tom Woodward", "link": "https://stackoverflow.com/users/3390935/tom-woodward"}, "edited": false, "score": 0, "creation_date": 1520607903, "post_id": 49162648, "comment_id": 85398005, "body": "Yep. I agree with you and FWIW everything I see you doing matched up with the documentation. It sure does look like it should work."}], "answers": [{"comments": [{"owner": {"reputation": 105, "user_id": 2090036, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/7LVRb.jpg?s=128&g=1", "display_name": "Ian Crew", "link": "https://stackoverflow.com/users/2090036/ian-crew"}, "edited": false, "score": 0, "creation_date": 1520894309, "post_id": 49237142, "comment_id": 85494830, "body": "Thanks @Eric! That did the trick.  I actually ended up fixing it in two ways--see the next response for the details."}], "tags": [], "owner": {"reputation": 11427, "user_id": 702875, "user_type": "registered", "accept_rate": 14, "profile_image": "https://i.stack.imgur.com/8LJM3.jpg?s=128&g=1", "display_name": "Eric Koleda", "link": "https://stackoverflow.com/users/702875/eric-koleda"}, "is_accepted": true, "score": 1, "last_activity_date": 1520863267, "creation_date": 1520863267, "answer_id": 49237142, "question_id": 49162648, "link": "https://stackoverflow.com/questions/49162648/setting-column-in-google-sheets-api-with-python-to-be-number-formatted/49237142#49237142", "title": "Setting column in Google Sheets API (with Python) to be number-formatted", "body": "<p>The problem is likely that your data is currently stored as strings and therefore not affected by the number format. </p>\n\n<pre><code>\"userEnteredValue\": {\n  \"stringValue\": \"1000\"\n},\n\"formattedValue\": \"1000\",\n\"userEnteredFormat\": {\n  \"numberFormat\": {\n    \"type\": \"NUMBER\",\n    \"pattern\": \"#,##0\"\n  }\n},\n</code></pre>\n\n<p>When you set a number format via the UI (<strong>Format > Number > ...</strong>) it's actually doing two things at once:</p>\n\n<ol>\n<li>Setting the number format.</li>\n<li>Converting string values to number values, if possible.</li>\n</ol>\n\n<p>Your API call is only doing #1, so any cells that are currently set with a string value will remain a string value and will therefore be unaffected by the number format. One solution would be to go through the affected values and move the <code>stringValue</code> to a <code>numberValue</code> if the cell contains a number.</p>\n"}, {"tags": [], "owner": {"reputation": 105, "user_id": 2090036, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/7LVRb.jpg?s=128&g=1", "display_name": "Ian Crew", "link": "https://stackoverflow.com/users/2090036/ian-crew"}, "is_accepted": false, "score": 1, "last_activity_date": 1520897621, "last_edit_date": 1520897621, "creation_date": 1520894836, "answer_id": 49245583, "question_id": 49162648, "link": "https://stackoverflow.com/questions/49162648/setting-column-in-google-sheets-api-with-python-to-be-number-formatted/49245583#49245583", "title": "Setting column in Google Sheets API (with Python) to be number-formatted", "body": "<p>To flesh out the answer from Eric Koleda a bit more, I ended up solving this two ways, depending on how I was getting the data for the Sheet:</p>\n\n<p><strong>First</strong>, if I was appending cells to the sheet, I used a function:</p>\n\n<pre><code>def set_cell_type(cell_contents):\n    current_cell_contents=str(cell_contents).replace(',', '')\n    float_cell=re.compile(\"^\\d+\\.\\d+$\")\n    int_cell=re.compile(\"^\\d+$\")\n\n    if int_cell.search(current_cell_contents):\n        data = {\"userEnteredValue\": {\"numberValue\": int(current_cell_contents)}}\n    elif float_cell.search(current_cell_contents):      \n        data =  {\"userEnteredValue\": {\"numberValue\": float(current_cell_contents)}}\n    else:\n        data =  {\"userEnteredValue\": {\"stringValue\": str(cell_contents)}}\n\n    return data\n</code></pre>\n\n<p>To format the cells properly.  Here's the call that actually did the appending:</p>\n\n<pre><code>rows = [{\"values\": [set_cell_type(cell) for cell in row]} for row in daily_data_output]\ndata = { \"requests\": [ { \"appendCells\": { \"sheetId\": all_sheets['Daily record'], \"rows\": rows, \"fields\": \"*\", } } ], }\nsheets_batch_update(SHEET_ID,data)\n</code></pre>\n\n<p><strong>Second</strong>, if I was replacing a whole sheet, I did:</p>\n\n<pre><code>#convert the ints to ints and floats to floats\nfloat_cell=re.compile(\"^\\d+\\.\\d+$\")\nint_cell=re.compile(\"^\\d+$\")\nrow_list=error_message.split(\"\\t\")\ni=0\nwhile i &lt; len(row_list):\n    current_cell=row_list[i].replace(',', '') #remove the commas from any numbers\n    if int_cell.search(current_cell):\n        row_list[i]=int(current_cell)\n    elif float_cell.search(current_cell):       \n        row_list[i]=float(current_cell)\n    i+=1\nerror_output.append(row_list)\n</code></pre>\n\n<p>then the following to actually save error_output to the sheet:</p>\n\n<pre><code>data = {'values': [row for row in error_output]}\nsheets_update(SHEET_ID,data,'Errors!A1')\n</code></pre>\n\n<p>those two techniques, coupled with the formatting calls I had already figured out in my initial question, did the trick.</p>\n"}], "owner": {"reputation": 105, "user_id": 2090036, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/7LVRb.jpg?s=128&g=1", "display_name": "Ian Crew", "link": "https://stackoverflow.com/users/2090036/ian-crew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2122, "favorite_count": 0, "accepted_answer_id": 49237142, "answer_count": 2, "score": 0, "last_activity_date": 1520897621, "creation_date": 1520463585, "question_id": 49162648, "link": "https://stackoverflow.com/questions/49162648/setting-column-in-google-sheets-api-with-python-to-be-number-formatted", "title": "Setting column in Google Sheets API (with Python) to be number-formatted", "body": "<p>I'm trying to format a column of numbers in Google Sheets using the API (Sheets API v.4 and Python 3.6.1, specifically). A portion of my non-functional code is below. I know it's executing, as the background color of the column gets set, but the numbers still show as text, not numbers.</p>\n\n<p>Put another way, I'm trying to get the equivalent of clicking on a column header (A, B, C, or whatever) then choosing the Format -> Number -> Number menu item in the GUI.</p>\n\n<pre><code>def sheets_batch_update(SHEET_ID,data):\n    print ( (\"Sheets: Batch update\"))\n    service.spreadsheets().batchUpdate(spreadsheetId=SHEET_ID,body=data).execute() #,valueInputOption='RAW'\n\ndata={\n  \"requests\": [\n    {\n      \"repeatCell\": {\n        \"range\": {\n          \"sheetId\": all_sheets['Users'],\n          \"startColumnIndex\": 19,\n          \"endColumnIndex\": 20\n        },\n        \"cell\": {\n          \"userEnteredFormat\": {\n            \"numberFormat\": {\n                \"type\": \"NUMBER\",\n                \"pattern\": \"#,##0\",\n            },\n            \"backgroundColor\": {\n              \"red\": 0.0,\n              \"green\": 0.4,\n              \"blue\": 0.4\n            },\n          }\n        },\n        \"fields\": \"userEnteredFormat(numberFormat,backgroundColor)\"\n      }\n    },   \n  ]\n}\nsheets_batch_update(SHEET_ID, data)\n</code></pre>\n"}, {"tags": ["python", "python-2.7", "loops"], "answers": [{"comments": [{"owner": {"reputation": 507, "user_id": 9004645, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1cd6c7469e32e7537b62c1d99e57c245?s=128&d=identicon&r=PG&f=1", "display_name": "Hiddenguy", "link": "https://stackoverflow.com/users/9004645/hiddenguy"}, "edited": false, "score": 0, "creation_date": 1520464963, "post_id": 49162802, "comment_id": 85331468, "body": "Allow me to clarify, I didn&#39;t put most of my code, because as I have noticed on this very webside I continously get hated by my questions.   About the question: My real code asks for <code>input</code> for start and end - hour and minute, where each step takes 5 minutes. If I use <code>if&#47;else</code> then I will print only one of the values so 2355, but the loop will stop. I use this code for my plots, so I don&#39;t use <code>print</code>, and I use <code>Start_time_hours == Star_time_hours</code> to &#39;tell&#39; python I want to start here. Thanks for a wide response btw. :)"}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 507, "user_id": 9004645, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1cd6c7469e32e7537b62c1d99e57c245?s=128&d=identicon&r=PG&f=1", "display_name": "Hiddenguy", "link": "https://stackoverflow.com/users/9004645/hiddenguy"}, "edited": false, "score": 0, "creation_date": 1520466456, "post_id": 49162802, "comment_id": 85331921, "body": "@Hiddenguy: <code>Start_time_hours == Start_time_hours</code> is (barring some weirdness with stuff like floating point NaN values) definitionally true. The only thing you&#39;re &quot;telling&quot; Python with it is to perform a pointless test before continuing, rather than just continuing unconditionally. Whatever else you think you&#39;re &quot;telling&quot; Python is entirely in your head."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 507, "user_id": 9004645, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1cd6c7469e32e7537b62c1d99e57c245?s=128&d=identicon&r=PG&f=1", "display_name": "Hiddenguy", "link": "https://stackoverflow.com/users/9004645/hiddenguy"}, "edited": false, "score": 0, "creation_date": 1520466581, "post_id": 49162802, "comment_id": 85331948, "body": "Also, side-note: Minimizing your code is good, but you still need a reproducible problem for others to evaluate, see <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. I made a guess at a <code>print</code> function, and even using plotting software in your real code, reducing it to a <code>print</code> in your <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> is perfectly reasonable assuming it still exhibits the same problem (and preferred, since <code>print</code> is simpler than the plotting software boilerplate)."}], "tags": [], "owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "is_accepted": false, "score": 1, "last_activity_date": 1520464415, "creation_date": 1520464415, "answer_id": 49162802, "question_id": 49162588, "link": "https://stackoverflow.com/questions/49162588/values-in-loop-in-python/49162802#49162802", "title": "Values in loop in python", "body": "<p>I'm assuming your real code has a <code>print</code> at the top of the loop, before you update the values for the next run. Problem is, you're making the changes to your values to skip 5 minutes before you handle the edge case, and the edge case is equivalent to skipping 5 minutes as well, thus the skipped value.</p>\n\n<p>You could fix this by simply making an <code>if</code>/<code>else</code> so the edge case is exclusive from the normal case, e.g.:</p>\n\n<pre><code>while ...:\n    print Start_time_hours, Start_time_minutes\n    if Start_time_hours == 23 and Start_time_minutes == 55:\n        Start_time_hours = 0\n        Start_time_minutes = 0\n    else:\n        Start_time_minutes += 5\n        Start_time_hours += (Start_time_minutes / 60)\n        Start_time_minutes %= 60\n</code></pre>\n\n<p>which prevents both adjustments from being performed. That said, you don't really need to special case this. You can just handle rollover on the hours the same way you do with minutes. Your loop condition is also nonsensical (you're checking if two values are equal to themselves), so just make it an infinite loop (obviously, if you have a real end condition, use that, or the program will never stop until killed):</p>\n\n<pre><code>while 1:\n    print Start_time_hours, Start_time_minutes\n\n    Start_time_minutes += 5\n    # For Python 2/3 portability, explicitly use floor division operator, //\n    Start_time_hours += Start_time_minutes // 60\n    Start_time_minutes %= 60\n    # Same as minutes, just roll back to 0 by reducing to remainder mod 24\n    Start_time_hours %= 24\n</code></pre>\n\n<p>By and large, the goal with most edge cases is to avoid handling them with special code; if you can unconditionally perform a cheap action that fixes the edge case, but is harmless to the common case, that's the best of all possible worlds. The code is always invoked, so it's far less likely to contain bugs (since most bugs would break the common case too).</p>\n"}, {"tags": [], "owner": {"reputation": 507, "user_id": 9004645, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1cd6c7469e32e7537b62c1d99e57c245?s=128&d=identicon&r=PG&f=1", "display_name": "Hiddenguy", "link": "https://stackoverflow.com/users/9004645/hiddenguy"}, "is_accepted": true, "score": -1, "last_activity_date": 1520504220, "creation_date": 1520504220, "answer_id": 49170626, "question_id": 49162588, "link": "https://stackoverflow.com/questions/49162588/values-in-loop-in-python/49170626#49170626", "title": "Values in loop in python", "body": "<pre><code> Start_time_hours += (Start_time_minutes / 60)\n    Start_time_minutes %= 60\n    str(Start_time_minutes)\n    str(Start_time_hours)\n    str(End_time_minutes)\n    str(End_time_hours)\n    Start_time_hours_format = '{:02}'.format(Start_time_hours)\n    Start_time_minutes_format = '{:02}'.format(Start_time_minutes)\n    End_time_hours_format = '{:02}'.format(End_time_hours)\n    End_time_minutes_format = '{:02}'.format(End_time_minutes)\n    int(Start_time_minutes)\n    Start_time_minutes += 5\n</code></pre>\n\n<p>This code gave me an answer.</p>\n"}], "owner": {"reputation": 507, "user_id": 9004645, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1cd6c7469e32e7537b62c1d99e57c245?s=128&d=identicon&r=PG&f=1", "display_name": "Hiddenguy", "link": "https://stackoverflow.com/users/9004645/hiddenguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 49170626, "answer_count": 2, "score": 0, "last_activity_date": 1520504220, "creation_date": 1520463258, "last_edit_date": 1520463919, "question_id": 49162588, "link": "https://stackoverflow.com/questions/49162588/values-in-loop-in-python", "title": "Values in loop in python", "body": "<p>When I use this loop:</p>\n\n<pre><code>while Start_time_hours == Start_time_hours and Start_time_minutes == Start_time_minutes:\n    Start_time_minutes += 5\n    Start_time_hours += (Start_time_minutes / 60)\n    Start_time_minutes %= 60\n    if Start_time_hours == 23 and Start_time_minutes == 55:\n\n            Start_time_hours = 0\n            Start_time_minutes = 0\n</code></pre>\n\n<p>I have a lack of 2355, how to write it to not miss that value?\nExecuting my loop gives me this:</p>\n\n<pre><code>23 35\n23 40\n23 45\n23 50\n00 00\n00 05\n00 10\n00 15\n00 20\n00 25\n00 30\n</code></pre>\n\n<p>As you can see 2355 is missing, how to avoid that, but all those variables are <code>input</code>'s, I didn't want to litter :)</p>\n"}, {"tags": ["python", "python-2.7", "numpy", "scipy"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1520463553, "post_id": 49162578, "comment_id": 85330972, "body": "Yes, because you create a list of generators. That is what generator expressions do, i.e. <code>(0.0 for col in range(4))</code>. Likely, you meant to use a <i>list-comprehension</i>, which will create a list, which <i>does</i> support item assignment, so <code>[0.0 for col in range(4)]</code>"}, {"owner": {"reputation": 23, "user_id": 2596209, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/100001047215836/picture?type=large", "display_name": "Ishaan Kalsi", "link": "https://stackoverflow.com/users/2596209/ishaan-kalsi"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1520463791, "post_id": 49162578, "comment_id": 85331056, "body": "wow thanks didn&#39;t saw that"}], "answers": [{"tags": [], "owner": {"reputation": 377, "user_id": 5953626, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-dDwLTM1rSaQ/AAAAAAAAAAI/AAAAAAAAEkM/XVdkrI4-qxk/photo.jpg?sz=128", "display_name": "Nannan AV", "link": "https://stackoverflow.com/users/5953626/nannan-av"}, "is_accepted": false, "score": 0, "last_activity_date": 1520464001, "creation_date": 1520464001, "answer_id": 49162735, "question_id": 49162578, "link": "https://stackoverflow.com/questions/49162578/generator-object-does-not-support-item-assignment/49162735#49162735", "title": "&#39;generator&#39; object does not support item assignment", "body": "<p>You need </p>\n\n<pre><code>hds_info_arr2d=[[0.0 for col in range(4)] for rows in range(tot_no_hd_img)] \n</code></pre>\n\n<p>instead of </p>\n\n<pre><code>hds_info_arr2d=[(0.0 for col in range(4)) for rows in range(tot_no_hd_img)] \n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 2596209, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/100001047215836/picture?type=large", "display_name": "Ishaan Kalsi", "link": "https://stackoverflow.com/users/2596209/ishaan-kalsi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1728, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1520464001, "creation_date": 1520463228, "last_edit_date": 1520463599, "question_id": 49162578, "link": "https://stackoverflow.com/questions/49162578/generator-object-does-not-support-item-assignment", "title": "&#39;generator&#39; object does not support item assignment", "body": "<pre><code>def _ext_x_y(buff_1):\n\n    min_x=1000.0\n    min_y=1000.0\n    max_x=0.0\n    max_y=0.0\n\n    #buff_1 is a mat file\n\n    tot_no_hd_img=buff_1['boxes'][0].shape[0]  \n     #gives total no of lists within a list in buff_1 .mat file\n    hds_info_arr2d=[(0.0 for col in range(4))for rows in range(tot_no_hd_img)]   \n    #initializing 2d array\n\n    for cur_hand in range(tot_no_hd_img):\n        for i in range(4): # i represents total no of elements i a list\n            try:\n                idx_val_x=buff_1['boxes'][0][cur_hand][0][0][i][0][0]\n                # last index[0] represents x coordinate float value\n                if(idx_val_x&lt;min_x):\n                    min_x=idx_val_x\n                    hds_info_arr2d[cur_hand][0]=min_x\n                elif(idx_val_x&gt;max_x):\n                    hds_info_arr2d[cur_hand][1]=max_x\n\n                idx_val_y=buff_1['boxes'][0][cur_hand][0][0][i][0][1]\n                #last index[1]  represents y coordinate float value \n                if(idx_val_y&lt;min_y):\n                    hds_info_arr2d[cur_hand][2]=min_y\n                elif(idx_val_y&gt;max_y):\n                    hds_info_arr2d[cur_hand][3]=max_y\n            except Exception as e:\n                print e\n\n\n    return hds_info_arr2d #this should return a 2D list of x,y coordinates\n\nimage_mat_file=sc.loadmat('/home/ishaan/Codes/Datasets/hand_dataset/test_dataset/test_data/annotations/VOC2007_2.mat')\n\nx_y=_ext_x_y(image_mat_file) #why is this generating error \nprint x_y\n</code></pre>\n\n<p>Problem:\nI am trying to get a 2d list with x,y coordinates but it keeps generating error:</p>\n\n<pre><code>'generator' object does not support item assignment\n\n'generator' object does not support item assignment\n\n'generator' object does not support item assignment\n\n'generator' object does not support item assignment\n\n[&lt;generator object &lt;genexpr&gt; at 0x7f2c5a5df140&gt;]\n</code></pre>\n"}, {"tags": ["python", "pandas", "analytics"], "answers": [{"comments": [{"owner": {"reputation": 16194, "user_id": 667883, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a39234ae82a5898cba1d70b5bff80ec3?s=128&d=identicon&r=PG", "display_name": "Allen", "link": "https://stackoverflow.com/users/667883/allen"}, "reply_to_user": {"reputation": 51, "user_id": 7472522, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/37c3d164b58f08e99da54db01ac33be9?s=128&d=identicon&r=PG&f=1", "display_name": "keysersoze977", "link": "https://stackoverflow.com/users/7472522/keysersoze977"}, "edited": false, "score": 0, "creation_date": 1520463748, "post_id": 49162613, "comment_id": 85331045, "body": "@beebeckzzz because when you use apply on a df, x refers to the whole column, which is a Series, hence x[0] works."}], "tags": [], "owner": {"reputation": 16194, "user_id": 667883, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a39234ae82a5898cba1d70b5bff80ec3?s=128&d=identicon&r=PG", "display_name": "Allen", "link": "https://stackoverflow.com/users/667883/allen"}, "is_accepted": true, "score": 2, "last_activity_date": 1520463385, "creation_date": 1520463385, "answer_id": 49162613, "question_id": 49162550, "link": "https://stackoverflow.com/questions/49162550/getting-int-object-is-not-subscriptable-error-while-apply-a-method-to-a-pand/49162613#49162613", "title": "Getting &quot;&#39;int&#39; object is not subscriptable&quot; error while apply a method to a pandas data series", "body": "<p>For a series, apply operates element wise. To reference the first element of the series, you need to use list[0] instead of x[0]:</p>\n\n<pre><code>new_list = list.apply(lambda x: x/list[0])\n</code></pre>\n\n<p>For a DataFrame, apply by default operates column wise, that's why x/x[0] works.</p>\n\n<p>To use the same syntax, you could use:</p>\n\n<pre><code>new_list = list.to_frame().apply(lambda x: x/x[0])\n</code></pre>\n\n<p>By the way, using built-in type name (list) as variable name is not a good idea.</p>\n"}], "owner": {"reputation": 51, "user_id": 7472522, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/37c3d164b58f08e99da54db01ac33be9?s=128&d=identicon&r=PG&f=1", "display_name": "keysersoze977", "link": "https://stackoverflow.com/users/7472522/keysersoze977"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 49162613, "answer_count": 1, "score": 0, "last_activity_date": 1520463385, "creation_date": 1520463104, "last_edit_date": 1520463370, "question_id": 49162550, "link": "https://stackoverflow.com/questions/49162550/getting-int-object-is-not-subscriptable-error-while-apply-a-method-to-a-pand", "title": "Getting &quot;&#39;int&#39; object is not subscriptable&quot; error while apply a method to a pandas data series", "body": "<p>I have a stocks_df data frame that looks like that one in the picture. When I apply the lambda as in the picture it doesn't throw any errors. </p>\n\n<p>However when I do</p>\n\n<pre><code>list = pandas.Series([1,2,3,4,5])\n\nnew_list = list.apply(lambda x: x/x[0])\n</code></pre>\n\n<p>It gives me \"'int' object is not subscriptable\" error. Is there any difference between the two? What am I doing wrong here? </p>\n\n<p><a href=\"https://i.stack.imgur.com/AqYhv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AqYhv.png\" alt=\"mentioned dataframe\"></a></p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "edited": false, "score": 2, "creation_date": 1520463244, "post_id": 49162522, "comment_id": 85330842, "body": "You defined some functions which return some values. Now you have to: 1) call a function, 2) store the result into a variable, 3) print the variable to which you stored the result"}], "answers": [{"tags": [], "owner": {"reputation": 597, "user_id": 9427529, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W5N8b.jpg?s=128&g=1", "display_name": "DZurico", "link": "https://stackoverflow.com/users/9427529/dzurico"}, "is_accepted": false, "score": 0, "last_activity_date": 1520463291, "creation_date": 1520463291, "answer_id": 49162593, "question_id": 49162522, "link": "https://stackoverflow.com/questions/49162522/print-after-return/49162593#49162593", "title": "Print after return", "body": "<pre><code>#import libraries \nimport numpy as np\nimport matplotlib.pyplot as plt\nfrom numpy import pi\n\n#(1)create an array called psi that is 51x51 pixels,(2) create an array called V that is 51x51 pixels\npsi=np.zeros((51,51))\nv=np.zeros((51,51))\n#Using a for-loop, set each element of psi to a 2-D sin function:\n#4) Using the same for-loop, set each element of V to a 2D gaussian:\nn=50\nVm=80\na=.4*n\nfor x in np.arange(50):\n    for y in np.arange(50):\n        psi[x,y]=np.sin(pi*(x/n))*np.sin(pi*(y/n))\n        v[x,y]=Vm*np.exp(-(x-y)**2/(a)**2)\n\n # 5) Plot psi.    \nplt.imshow(psi)\nplt.show()\n\ndef nn(psi):\n  psi1=np.zeros_like(psi)\n  psi1[1:n-1,1:n-1]=(psi[0:n-2,1:n-1]+psi[2:n,1:n-1]+psi[1:n-1,0:n-2]+psi[1:n-1,2:n])/4.\n  return(psi1)\n\n\ndef integrate(psi,v):\n  psi2=psi[x,y]*psi[x,y]\n  intPsi2=(psi2/n**2).sum()\n\n  psi3=(psi[x,y]*v[x,y]*psi[x,y]*(1/n**2))-(2*psi[x,y]*nn(psi))+(2*psi2)\n  intPsiHPsi=psi3.sum()\n\n\n  return intPsi2, intPsiHPsi\n\nintPsi2, intPsiHPsi=integrate(psi,v) #calling the function and storing output in variables\nprint(intPsi2, intPsiHPsi) #printing variables\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2331, "user_id": 2338323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/0zpne.jpg?s=128&g=1", "display_name": "SteveJ", "link": "https://stackoverflow.com/users/2338323/stevej"}, "is_accepted": false, "score": 0, "last_activity_date": 1520463485, "creation_date": 1520463485, "answer_id": 49162627, "question_id": 49162522, "link": "https://stackoverflow.com/questions/49162522/print-after-return/49162627#49162627", "title": "Print after return", "body": "<p>Setting values inside a function does not update those outside a function. You have to assign variables to the method response. </p>\n\n<pre><code>a,b = 1,2\ndef some_funct():\n    a = 4\n    b = 5\n    return a,b\n\nprint (a, b)\nc, d = some_funct()\nprint(a,b)\nprint(c,d)\n</code></pre>\n\n<p>gives</p>\n\n<pre><code>1 2\n1 2\n4 5\n</code></pre>\n\n<p>(Unless you declare the variables with the global keyword - which is generally a bad idea)</p>\n\n<pre><code>a,b = 1,2\ndef some_other_funct():\n    global a\n    global b\n    a = 4\n    b = 5\n    return a,b\n\nprint (a, b)\nc, d = some_other_funct()\nprint(a,b)\nprint(c,d)\n</code></pre>\n\n<p>gives</p>\n\n<pre><code>1 2\n4 5\n4 5\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8635408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b6b967e8efbd57321d87b090c32b67b?s=128&d=identicon&r=PG&f=1", "display_name": "John Smith", "link": "https://stackoverflow.com/users/8635408/john-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1520463485, "creation_date": 1520463001, "question_id": 49162522, "link": "https://stackoverflow.com/questions/49162522/print-after-return", "title": "Print after return", "body": "<p>I want to print intPsi2 and intPsiHPsi after I returned those values but Python won't print them. I think they won't print after I return them because they are localized values. </p>\n\n<pre><code>#import libraries \nimport numpy as np\nimport matplotlib.pyplot as plt\nfrom numpy import pi\n\n#(1)create an array called psi that is 51x51 pixels,(2) create an array called V that is 51x51 pixels\npsi=np.zeros((51,51))\nv=np.zeros((51,51))\n#Using a for-loop, set each element of psi to a 2-D sin function:\n#4) Using the same for-loop, set each element of V to a 2D gaussian:\nn=50\nVm=80\na=.4*n\nfor x in np.arange(50):\n    for y in np.arange(50):\n        psi[x,y]=np.sin(pi*(x/n))*np.sin(pi*(y/n))\n        v[x,y]=Vm*np.exp(-(x-y)**2/(a)**2)\n\n # 5) Plot psi.    \nplt.imshow(psi)\nplt.show()\n\ndef nn(psi):\n  psi1=np.zeros_like(psi)\n  psi1[1:n-1,1:n-1]=(psi[0:n-2,1:n-1]+psi[2:n,1:n-1]+psi[1:n-1,0:n-2]+psi[1:n-1,2:n])/4.\n  return(psi1)\n\n\ndef integrate(psi,v):\n  psi2=psi[x,y]*psi[x,y]\n  intPsi2=(psi2/n**2).sum()\n\n  psi3=(psi[x,y]*v[x,y]*psi[x,y]*(1/n**2))-(2*psi[x,y]*nn(psi))+(2*psi2)\n  intPsiHPsi=psi3.sum()\n\n\n  return(intPsi2, intPsiHPsi)\nprint(intPsi2, intPsiHPsi)\n</code></pre>\n"}, {"tags": ["python", "matplotlib"], "answers": [{"comments": [{"owner": {"reputation": 7687, "user_id": 2809027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fDAhb.jpg?s=128&g=1", "display_name": "Cecil Curry", "link": "https://stackoverflow.com/users/2809027/cecil-curry"}, "edited": false, "score": 0, "creation_date": 1520575529, "post_id": 49169578, "comment_id": 85380316, "body": "<b>Yes.</b> Matplotlib 2.2.0 significantly <a href=\"https://github.com/matplotlib/matplotlib/issues/10716\" rel=\"nofollow noreferrer\">broke backward compatibility</a> and should effectively be considered dead on arrival. With any luck, a new point release will be issued shortly."}], "tags": [], "owner": {"reputation": 37, "user_id": 8391104, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-KjgaxmdbCwk/AAAAAAAAAAI/AAAAAAAAAAo/pYKjSknGoLk/photo.jpg?sz=128", "display_name": "laizililove", "link": "https://stackoverflow.com/users/8391104/laizililove"}, "is_accepted": false, "score": 2, "last_activity_date": 1520501215, "creation_date": 1520501215, "answer_id": 49169578, "question_id": 49162494, "link": "https://stackoverflow.com/questions/49162494/attributeerror-module-matplotlib-has-no-attribute-verbose-on-import/49169578#49169578", "title": "AttributeError: module &#39;matplotlib&#39; has no attribute &#39;verbose&#39;, on import", "body": "<p>I also meet the same problem, I think this problem is the version of MatplotLib, I solve this problem by using version 2.12.</p>\n"}], "owner": {"reputation": 21, "user_id": 4942838, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/372288692972899/picture?type=large", "display_name": "Michael Risling", "link": "https://stackoverflow.com/users/4942838/michael-risling"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1156, "favorite_count": 0, "closed_date": 1520507790, "answer_count": 1, "score": 0, "last_activity_date": 1520501215, "creation_date": 1520462865, "last_edit_date": 1520466141, "question_id": 49162494, "link": "https://stackoverflow.com/questions/49162494/attributeerror-module-matplotlib-has-no-attribute-verbose-on-import", "closed_reason": "Duplicate", "title": "AttributeError: module &#39;matplotlib&#39; has no attribute &#39;verbose&#39;, on import", "body": "<pre><code>import matplotlib.pyplot as plt\nx = range(5)\ny = range(5,11)\nplt.plot(x,y)\nplt.show()\n</code></pre>\n\n<p>Then I get this error message:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Traceback (most recent call last):\n  File \"/Users/michaelrisling/PycharmProjects/untitled/test.py\", line 1, in &lt;module&gt;\n    import matplotlib.pyplot as plt\n  File \"/Users/michaelrisling/untitled/lib/python3.6/site-packages/matplotlib/pyplot.py\", line 115, in &lt;module&gt;\n    _backend_mod, new_figure_manager, draw_if_interactive, _show = pylab_setup()\n  File \"/Users/michaelrisling/untitled/lib/python3.6/site-packages/matplotlib/backends/__init__.py\", line 62, in pylab_setup\n    [backend_name], 0)\n  File \"/Applications/PyCharm.app/Contents/helpers/pycharm_matplotlib_backend/backend_interagg.py\", line 17, in &lt;module&gt;\n    verbose = matplotlib.verbose\nAttributeError: module 'matplotlib' has no attribute 'verbose'\n</code></pre>\n"}, {"tags": ["python", "typeerror"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 4, "creation_date": 1520462723, "post_id": 49162457, "comment_id": 85330656, "body": "<i>&quot;despite both instances being floats&quot;</i> - clearly not. Things like <code>col1[lo]=&quot;x&quot;</code> seem suspicious, no?"}, {"owner": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "edited": false, "score": 0, "creation_date": 1520463618, "post_id": 49162457, "comment_id": 85330997, "body": "Try adding a line like this before the one which fails: <code>print(col1, lo, hi, col1[lo], col1[hi])</code>"}, {"owner": {"reputation": 1, "user_id": 7554614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33771bb4aa688594d0ac43e1e9c63eec?s=128&d=identicon&r=PG&f=1", "display_name": "69BlazeMan420", "link": "https://stackoverflow.com/users/7554614/69blazeman420"}, "edited": false, "score": 0, "creation_date": 1520463729, "post_id": 49162457, "comment_id": 85331038, "body": "But it is a float while the test is happening. Also like I said the code runs if the sign is flipped."}, {"owner": {"reputation": 1, "user_id": 7554614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33771bb4aa688594d0ac43e1e9c63eec?s=128&d=identicon&r=PG&f=1", "display_name": "69BlazeMan420", "link": "https://stackoverflow.com/users/7554614/69blazeman420"}, "edited": false, "score": 0, "creation_date": 1520463885, "post_id": 49162457, "comment_id": 85331101, "body": "Ok, now I get you. Forgot it was a loop. Cheers guys."}], "answers": [{"tags": [], "owner": {"reputation": 597, "user_id": 9427529, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W5N8b.jpg?s=128&g=1", "display_name": "DZurico", "link": "https://stackoverflow.com/users/9427529/dzurico"}, "is_accepted": true, "score": 0, "last_activity_date": 1520463040, "creation_date": 1520463040, "answer_id": 49162534, "question_id": 49162457, "link": "https://stackoverflow.com/questions/49162457/type-error-despite-both-instances-being-floats/49162534#49162534", "title": "Type error despite both instances being floats", "body": "<p>col1=[0.1,0.2,\"x\",0.3,0.1]\nThe problem is that you are writing to the list while working with it. Do:</p>\n\n<pre><code>col1=[0.1,0.2,\"x\",0.3,0.1]\n\nnewcol=col1[:]\nfor x in col1:\n    if x==\"x\":\n        lo=col1.index(\"x\")-1\n        hi=col1.index(\"x\")+1\n        if col1[lo]&gt;col1[hi]:\n            newcol[lo]=\"x\"\n        else:\n            newcol[hi]=\"x\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 7554614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33771bb4aa688594d0ac43e1e9c63eec?s=128&d=identicon&r=PG&f=1", "display_name": "69BlazeMan420", "link": "https://stackoverflow.com/users/7554614/69blazeman420"}, "edited": false, "score": 0, "creation_date": 1520464148, "post_id": 49162558, "comment_id": 85331203, "body": "Only expecting one such element in this instance but it will later include the possibility of more."}], "tags": [], "owner": {"reputation": 6120, "user_id": 9214517, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uHHGLaUqJK4/AAAAAAAAAAI/AAAAAAAAAAA/EMWzo-f2N9c/photo.jpg?sz=128", "display_name": "adrtam", "link": "https://stackoverflow.com/users/9214517/adrtam"}, "is_accepted": false, "score": 0, "last_activity_date": 1520475305, "last_edit_date": 1520475305, "creation_date": 1520463140, "answer_id": 49162558, "question_id": 49162457, "link": "https://stackoverflow.com/questions/49162457/type-error-despite-both-instances-being-floats/49162558#49162558", "title": "Type error despite both instances being floats", "body": "<p>Because you're modifying the list in place. This will work:</p>\n\n<pre><code>col1=[0.1,0.2,\"x\",0.3,0.1]\nfor x in col1[:]:\n    if x==\"x\":\n        lo=col1.index(\"x\")-1\n        hi=col1.index(\"x\")+1\n        if col1[lo]&gt;col1[hi]:\n            col1[lo]=\"x\"\n        else:\n            col1[hi]=\"x\"\n</code></pre>\n\n<p>Note I make a copy of <code>col1</code> at the for loop by using it as <code>col1[:]</code>. Generally speaking, I don't like this code, exactly because you're modifying it in place. You should break after you found for <code>x=='x'</code> if you sure you're expecting only one such element.</p>\n"}], "owner": {"reputation": 1, "user_id": 7554614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33771bb4aa688594d0ac43e1e9c63eec?s=128&d=identicon&r=PG&f=1", "display_name": "69BlazeMan420", "link": "https://stackoverflow.com/users/7554614/69blazeman420"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 49162534, "answer_count": 2, "score": -2, "last_activity_date": 1520475305, "creation_date": 1520462648, "last_edit_date": 1520463998, "question_id": 49162457, "link": "https://stackoverflow.com/questions/49162457/type-error-despite-both-instances-being-floats", "title": "Type error despite both instances being floats", "body": "<p>I have a very simple bit of code that is acting a bit unusual.</p>\n\n<pre><code>col1=[0.1,0.2,\"x\",0.3,0.1]\n\n\nfor x in col1:\n    if x==\"x\":\n        lo=col1.index(\"x\")-1\n        hi=col1.index(\"x\")+1\n        if col1[lo]&gt;col1[hi]:\n            col1[lo]=\"x\"\n        else:\n            col1[hi]=\"x\"\n</code></pre>\n\n<p>Running it returns:</p>\n\n<pre><code>TypeError: '&gt;' not supported between instances of 'float' and 'str'\n</code></pre>\n\n<p>Despite the fact that:</p>\n\n<pre><code>col1=[0.1,0.2,\"x\",0.3,0.1]\nlo=col1.index(\"x\")-1\nhi=col1.index(\"x\")+1\n\nprint(lo)\nprint(hi)\n\nprint(col1[lo])\nprint(col1[hi])\n\nprint(type(col1[lo]))\nprint(type(col1[hi]))\n</code></pre>\n\n<p>Returns:</p>\n\n<pre><code>1\n3\n0.2\n0.3\n&lt;class 'float'&gt;\n&lt;class 'float'&gt;\n</code></pre>\n\n<p>Even more unusually, if you swap the <code>&gt;</code> to a <code>&lt;</code> then the code functions just fine, albeit doing the opposite of what I want it to do.</p>\n\n<p>Any idea what's going on here?</p>\n\n<p>Edit:\nThanks for the comment. Have spotted the problem now.\nWas a dumb mistake but had me confused.</p>\n"}, {"tags": ["python", "class"], "comments": [{"owner": {"reputation": 6370, "user_id": 8710265, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qn3JJ.png?s=128&g=1", "display_name": "Vasilis G.", "link": "https://stackoverflow.com/users/8710265/vasilis-g"}, "edited": false, "score": 5, "creation_date": 1520462503, "post_id": 49162406, "comment_id": 85330574, "body": "What have you tried so far and what problems did you face? Try to be more specific about your issue."}], "answers": [{"tags": [], "owner": {"reputation": 3890, "user_id": 3626078, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/SBXjb.jpg?s=128&g=1", "display_name": "magicleon94", "link": "https://stackoverflow.com/users/3626078/magicleon94"}, "is_accepted": false, "score": 0, "last_activity_date": 1520463144, "last_edit_date": 1520463144, "creation_date": 1520462805, "answer_id": 49162486, "question_id": 49162406, "link": "https://stackoverflow.com/questions/49162406/how-can-i-update-my-employees-bank-account/49162486#49162486", "title": "How can I update my employee&#39;s bank account", "body": "<p>Following your code, a few edits should be done:</p>\n\n<pre><code>class employee:\n   def __init__(self, name, salary):\n      self.name=name\n      self.salary=salary\n      self.account = 0\n   def update(self):\n      self.account += salary\n</code></pre>\n\n<p>Then create your <code>Employee</code> object and call the <code>update</code> method:</p>\n\n<pre><code>employee = Employee()\nprint employee.account #prints 0\nemployee.update()\nprint employee.account #prints salary\nemployee.update()\nprint employee.account #prints 2 times salary\n</code></pre>\n\n<p>and so on.</p>\n\n<p>Now <code>account</code> is an attribute for the class and the increment is updated correctly each time you call the <code>update</code> method.</p>\n\n<p><strong>More explaination</strong></p>\n\n<p>You declared </p>\n\n<pre><code>account = 0 \n</code></pre>\n\n<p>then you set </p>\n\n<pre><code>self.account = account + salary\n</code></pre>\n\n<p>Notice that this way you will always be overwriting <code>self.account</code>, since it's not the same variable <code>account</code>.</p>\n\n<p>So, your code always does something like this:</p>\n\n<pre><code>self.account = 0 + salary\n</code></pre>\n\n<p>which is just </p>\n\n<pre><code>self.account = salary\n</code></pre>\n\n<p>over and over.</p>\n\n<p>The solution I've proposed uses the same (attribute) variable and hopefully does what you need!</p>\n"}, {"tags": [], "owner": {"reputation": 377, "user_id": 5953626, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-dDwLTM1rSaQ/AAAAAAAAAAI/AAAAAAAAEkM/XVdkrI4-qxk/photo.jpg?sz=128", "display_name": "Nannan AV", "link": "https://stackoverflow.com/users/5953626/nannan-av"}, "is_accepted": false, "score": 1, "last_activity_date": 1520463248, "creation_date": 1520463248, "answer_id": 49162585, "question_id": 49162406, "link": "https://stackoverflow.com/questions/49162406/how-can-i-update-my-employees-bank-account/49162585#49162585", "title": "How can I update my employee&#39;s bank account", "body": "<p>Took the liberty of editing typos, and using camel case for class name, we have</p>\n\n<pre><code>class Employee:\n  account = 0\n  def __init__(self, name, salary):\n    self.name = name\n    self.salary = salary\n  def update(self):\n    self.account += self.salary\n</code></pre>\n\n<p>Create new object:</p>\n\n<pre><code>employee1 = Employee()\n</code></pre>\n\n<p>Update object:</p>\n\n<pre><code>employee1.update()\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8234064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e84b455e8c6b2c07cf6340b6a6d9ea7?s=128&d=identicon&r=PG", "display_name": "user8234064", "link": "https://stackoverflow.com/users/8234064/user8234064"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1520463248, "creation_date": 1520462364, "last_edit_date": 1520462549, "question_id": 49162406, "link": "https://stackoverflow.com/questions/49162406/how-can-i-update-my-employees-bank-account", "title": "How can I update my employee&#39;s bank account", "body": "<p>I want my class to be able to update my employees. How should I do it?</p>\n\n<pre><code>class emmploye:\n   account=0\n   def __init__(self, name, salary):\n      self.name=name\n      self.salary=salary\n   def update(self):\n      self.account=account+salary\n</code></pre>\n"}, {"tags": ["python", "python-textprocessing"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1520462332, "post_id": 49162375, "comment_id": 85330503, "body": "You <b>don&#39;t</b>, see e.g. <a href=\"https://stackoverflow.com/q/1373164/3001761\">stackoverflow.com/q/1373164/3001761</a> - make a list or dictionary of dictionaries instead."}, {"owner": {"reputation": 126, "user_id": 8791484, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g9Ljk.jpg?s=128&g=1", "display_name": "dissemin8or", "link": "https://stackoverflow.com/users/8791484/dissemin8or"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1520525295, "post_id": 49162375, "comment_id": 85360369, "body": "@jonrsharpe I have a list of dictionaries already. Edited the question title to reflect this."}], "answers": [{"tags": [], "owner": {"reputation": 126, "user_id": 8791484, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g9Ljk.jpg?s=128&g=1", "display_name": "dissemin8or", "link": "https://stackoverflow.com/users/8791484/dissemin8or"}, "is_accepted": true, "score": 0, "last_activity_date": 1521043946, "creation_date": 1521043946, "answer_id": 49282694, "question_id": 49162375, "link": "https://stackoverflow.com/questions/49162375/how-do-i-use-a-list-of-dictionaries-to-update-values-in-the-correct-dictionary-b/49282694#49282694", "title": "How do I use a list of dictionaries to update values in the correct dictionary based on data in text file?", "body": "<p>Since I seem to be the only one who cares about this problem, I guess I'll post my own solution. Context: clinic dicts have the naming convention 'ward'+'Metrics' and <code>currentLine[2]</code> contains the 'ward' part.</p>\n\n<p>The answer is to use <code>locals()</code> or <code>globals()</code> as appropriate.  </p>\n\n<pre><code>for item in clinicList:\n    if item['Clinic'] == currentLine[2]:\n        specimenType, locals()[currentLine[2]+'Metrics'] = specimenAdderFunction(locals()[currentLine[2]+'Metrics'], currentLine[3])\n</code></pre>\n\n<p>This allows the dict variable to be both called and modified without having to know which one out of the list it was to begin with. This is insecure, so don't use for unknown input data.</p>\n"}], "owner": {"reputation": 126, "user_id": 8791484, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g9Ljk.jpg?s=128&g=1", "display_name": "dissemin8or", "link": "https://stackoverflow.com/users/8791484/dissemin8or"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 49282694, "answer_count": 1, "score": 0, "last_activity_date": 1521043946, "creation_date": 1520462238, "last_edit_date": 1520524976, "question_id": 49162375, "link": "https://stackoverflow.com/questions/49162375/how-do-i-use-a-list-of-dictionaries-to-update-values-in-the-correct-dictionary-b", "title": "How do I use a list of dictionaries to update values in the correct dictionary based on data in text file?", "body": "<p>I'm trying to process data from a CSV file that checks if specific clinic codes are present in each line at index 2 and then update the corresponding dictionary. I previously had an if-elif chain to handle this, but as we are adding more clinics to our testing lab's clientele, this will quickly become an unsustainable practice. </p>\n\n<p>I basically want a way to dynamically call and update the dictionary variable without knowing which one out of the list it will be. This is what I came up with, which gives <code>KeyError: 'clinic'</code> in response to the line: <code>if item['clinic'] == currentLine[2]:</code>, indicating that the <code>item</code> iterator isn't functioning as a stand-in for the underlying dictionary. </p>\n\n<pre><code>#please assume all dicts are properly set up with keys and default values \nclinic1, clinic2, clinic3, clinic4 = {}, {}, {}, {}\nclinicList = [clinic1, clinic2, clinic3, clinic4]\npopulateDictFunction(clinic1, clinic2, clinic3, clinic4)\n\nfor line in infile: currentLine = line.split()          \n    found = False\n#problem area here--v\n    for item in clinicList:\n        if item['clinic'] == currentLine[2]:\n            specimenType, item = specimenAdderFunction(item, currentLine[3])\n            found = True\n    if found == False:\n        print(currentLine[2], 'is not a supported clinic.')\n</code></pre>\n\n<p>Old version (working, but becomes cumbersome as more clinics are added):</p>\n\n<pre><code>if currentLine[2] == 'clinic1':\n    specimenType, clinic1= specimenAdder(clinic1, currentLine[3])\nelif prevLine[2] == 'clinic2':\n    specimenType, clinic2= specimenAdder(clinic2, currentLine[3])\nelse:\n    print(currentLine[2], 'is not recognized.')\n</code></pre>\n"}, {"tags": ["python", "opencv", "mask"], "owner": {"reputation": 83, "user_id": 7495961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1e6e66e30928c37b65cafd9763ed096?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Smith", "link": "https://stackoverflow.com/users/7495961/joe-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 423, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1526305800, "creation_date": 1520462178, "last_edit_date": 1526305800, "question_id": 49162364, "link": "https://stackoverflow.com/questions/49162364/percentage-of-a-color-structure-in-image-opencv-python", "title": "percentage of a color/structure in image openCV python", "body": "<p>Is there an implement way or procedure to get an aproximation of the percentage of a structure/color in a image using opencv. I was attempting several methods by using masks, CLAHE, kernels, transformation...but don't really achieve what I am looking for. \nLet's suppose I want to count or detect the percentage of a structure which can have a color in a particulare image. For instance, if I have the following image:<br>\n<a href=\"https://i.stack.imgur.com/yQPo9.jpg\" rel=\"nofollow noreferrer\">redeye</a>\nIf I want to represent the percentage of blood vessels (those red ones) How shoul I proceed?.\nThis is what I  already tried but doesn't seem to be the optimal way:</p>\n\n<pre><code>path = 'C:/.../redeye.jpg'\nimg=cv2.imread(path)\n#try with HSV (I already tried RGB transformation)\nimg_hsv=cv2.cvtColor(img, cv2.COLOR_BGR2HSV)\n\n# lower mask (0-10)\nlower_red = np.array([7,50,50])\nupper_red = np.array([10,255,255])\nmask0 = cv2.inRange(img_hsv, lower_red, upper_red)\n\n# upper mask (170-180)\nlower_red = np.array([170,50,50])\nupper_red = np.array([180,255,255])\nmask1 = cv2.inRange(img_hsv, lower_red, upper_red)\n\n\n\n# join my masks\nmask = mask0+mask1\n\n# set my output img to zero everywhere except my mask\noutput_img = img.copy()\noutput_img[np.where(mask==0)] = 0\nplt.imshow(output_img)\nplt.show()\n</code></pre>\n"}, {"tags": ["python", "plotly"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1520462377, "post_id": 49162339, "comment_id": 85330522, "body": "Well, you haven&#39;t really given us much to go on here, but I think you need to use <code>df[&#39;hour&#39;] = df[&#39;hour&#39;].dt.strftime(&#39;%Y-%m-%d %H:%M:%S&#39;)</code> or something similar before you send it to be plotted. Obviously, I don&#39;t know what format you want your datetimes to be, that&#39;s an example. Does that work? Even regular python datetimes cannot be serialized to json without some intervention."}, {"owner": {"reputation": 1, "user_id": 9459250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/deeefa5532774a99e36c7bf03bca1e84?s=128&d=identicon&r=PG&f=1", "display_name": "Ann ", "link": "https://stackoverflow.com/users/9459250/ann"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1520463043, "post_id": 49162339, "comment_id": 85330761, "body": "It seems like the times are showing up as this type of variable - &lt;type &#39;builtin_function_or_method&#39;&gt; - rather than a timestamp when I add them to a dictionary. Tried to use df[&#39;hour&#39;] = pd.to_datetime(df[&#39;hour&#39;]) to convert the values to timestamps but when I put the values inside the dictionary, it seems like the type changes? Used print type(hour_counts.keys) to look it up and I get &lt;type &#39;builtin_function_or_method&#39;&gt; as a result. Is there a way to use the to_datetime function on the keys in a dictionary? Sorry if that doesn&#39;t make any sense! Many thanks."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1520463335, "post_id": 49162339, "comment_id": 85330881, "body": "You should have included the traceback in the question. <code>x= hour_counts.keys</code> and <code>y= hour_counts.values</code> are just binding the methods to those names, not <i>calling</i> them. Try changing to <code>x= hour_counts.keys()</code> and <code>y= hour_counts.values()</code>"}, {"owner": {"reputation": 1, "user_id": 9459250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/deeefa5532774a99e36c7bf03bca1e84?s=128&d=identicon&r=PG&f=1", "display_name": "Ann ", "link": "https://stackoverflow.com/users/9459250/ann"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1520529210, "post_id": 49162339, "comment_id": 85362938, "body": "Tried the fix and I don&#39;t get an error anymore, but it seems like I get no output? And when I try to <code>print data</code> it seems like I get no output as well after I put my x and y values into the scatter function. I printed my dictionary as well as <code>hour_counts.keys</code> and <code>hour_counts.values</code> to make sure nothing was going wrong there and it seems that the lists populate correctly."}], "owner": {"reputation": 1, "user_id": 9459250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/deeefa5532774a99e36c7bf03bca1e84?s=128&d=identicon&r=PG&f=1", "display_name": "Ann ", "link": "https://stackoverflow.com/users/9459250/ann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 697, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1520466079, "creation_date": 1520462058, "last_edit_date": 1520466079, "question_id": 49162339, "link": "https://stackoverflow.com/questions/49162339/plotly-values-of-dict-object-not-json-serializable-for-timestamp", "title": "Plotly - Values of dict object not JSON serializable for timestamp?", "body": "<p>I'm trying to use plotly to create a scatter plot, but it seems like my timestamp is not JSON serializable? This is the error I'm getting: </p>\n\n<pre><code>TypeError &lt;built-in method values of dict object at 0x7f6f3d8ac910&gt; is not JSON serializable \n</code></pre>\n\n<p>And this is the code I currently have: </p>\n\n<pre><code>df = datasets[3]\n\n#New column with hour rounded\ndf['hour'] = df['p_time'].dt.floor('h')\n\nhour_counts = {}\nfor hour in df['hour']:\n    if hour in hour_counts:\n        hour_counts[hour] = hour_counts[hour] + 1\n    else:\n        hour_counts[hour] = 1 \n\nprint hour_counts\n\ncount = Scatter(\n    x= hour_counts.keys,\n    y= hour_counts.values,\n    name = \"Number of Riders\",\n    line = dict(color = '#17BECF'),\n    opacity = 0.8)\n\ndata = [count]\n\nlayout = dict(\n    title='Time Series with Rangeslider',\n    xaxis=dict(\n        rangeselector=dict(\n            buttons=list([\n                dict(count=1,\n                     label='1d',\n                     step='day',\n                     stepmode='backward'),\n                dict(count=6,\n                     label='6d',\n                     step='day',\n                     stepmode='backward'),\n                dict(step='all')\n            ])\n        ),\n        rangeslider=dict(),\n        type='date'\n    )\n)\n\nfig = dict(data=data, layout=layout)\niplot(fig)\n</code></pre>\n\n<p>Can anyone provide some insight? Apologies if this is a stupid question. I'm very new to python. Thank you!</p>\n"}, {"tags": ["python", "regex", "string"], "comments": [{"owner": {"reputation": 638, "user_id": 6233386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e78073cc2963b5bae45e4152f3806827?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Peder", "link": "https://stackoverflow.com/users/6233386/mike-peder"}, "edited": false, "score": 0, "creation_date": 1520462092, "post_id": 49162302, "comment_id": 85330393, "body": "You should be able to use a capture group to extract the letter you need."}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 6417088, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1e7544c96b26eeb3f797b289006da682?s=128&d=identicon&r=PG&f=1", "display_name": "Andrea Ferrante", "link": "https://stackoverflow.com/users/6417088/andrea-ferrante"}, "edited": false, "score": 0, "creation_date": 1520463001, "post_id": 49162357, "comment_id": 85330749, "body": "Hey man thanks ! this regex (?&lt;=\\d)[A-Z]{1}(?=\\d) solved my issue...!"}, {"owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "reply_to_user": {"reputation": 57, "user_id": 6417088, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1e7544c96b26eeb3f797b289006da682?s=128&d=identicon&r=PG&f=1", "display_name": "Andrea Ferrante", "link": "https://stackoverflow.com/users/6417088/andrea-ferrante"}, "edited": false, "score": 0, "creation_date": 1520463498, "post_id": 49162357, "comment_id": 85330944, "body": "@AndreaFerrante glad to help!"}, {"owner": {"reputation": 4244, "user_id": 3348112, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ab4cd9458f5debd780353a5554b718d8?s=128&d=identicon&r=PG&f=1", "display_name": "CAustin", "link": "https://stackoverflow.com/users/3348112/caustin"}, "edited": false, "score": 0, "creation_date": 1520463901, "post_id": 49162357, "comment_id": 85331106, "body": "<code>{1}</code> is an effectively meaningless quantifier."}, {"owner": {"reputation": 57, "user_id": 6417088, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1e7544c96b26eeb3f797b289006da682?s=128&d=identicon&r=PG&f=1", "display_name": "Andrea Ferrante", "link": "https://stackoverflow.com/users/6417088/andrea-ferrante"}, "reply_to_user": {"reputation": 4244, "user_id": 3348112, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ab4cd9458f5debd780353a5554b718d8?s=128&d=identicon&r=PG&f=1", "display_name": "CAustin", "link": "https://stackoverflow.com/users/3348112/caustin"}, "edited": false, "score": 0, "creation_date": 1520602926, "post_id": 49162357, "comment_id": 85394910, "body": "@CAustin why ?!"}, {"owner": {"reputation": 4244, "user_id": 3348112, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ab4cd9458f5debd780353a5554b718d8?s=128&d=identicon&r=PG&f=1", "display_name": "CAustin", "link": "https://stackoverflow.com/users/3348112/caustin"}, "reply_to_user": {"reputation": 57, "user_id": 6417088, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1e7544c96b26eeb3f797b289006da682?s=128&d=identicon&r=PG&f=1", "display_name": "Andrea Ferrante", "link": "https://stackoverflow.com/users/6417088/andrea-ferrante"}, "edited": false, "score": 0, "creation_date": 1520621977, "post_id": 49162357, "comment_id": 85405978, "body": "@AndreaFerrante Because it&#39;s the same as simply not writing it. <code>[A-Z]{1}</code> matches the same input as <code>[A-Z]</code>."}], "tags": [], "owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "is_accepted": true, "score": 3, "last_activity_date": 1520462141, "creation_date": 1520462141, "answer_id": 49162357, "question_id": 49162302, "link": "https://stackoverflow.com/questions/49162302/regex-to-find-letter-between-two-numbers-python/49162357#49162357", "title": "Regex to find letter between two numbers python", "body": "<p>You can use a positive lookahead and positive lookbehind:</p>\n\n<pre><code>import re\nstrings = [\"AAPL1809A170\", \"XOM1809C123\"]\nfinal_results = [re.findall('(?&lt;=\\d)[A-Z]{1}(?=\\d)', s)[0] for s in strings]\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>['A', 'C']\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 57, "user_id": 6417088, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1e7544c96b26eeb3f797b289006da682?s=128&d=identicon&r=PG&f=1", "display_name": "Andrea Ferrante", "link": "https://stackoverflow.com/users/6417088/andrea-ferrante"}, "edited": false, "score": 0, "creation_date": 1520462979, "post_id": 49162368, "comment_id": 85330734, "body": "Thank you a lot for replying."}], "tags": [], "owner": {"reputation": 37387, "user_id": 137650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/418a42c29b040f2e0a51eea5330e2b7f?s=128&d=identicon&r=PG", "display_name": "MatsLindh", "link": "https://stackoverflow.com/users/137650/matslindh"}, "is_accepted": false, "score": 3, "last_activity_date": 1520462195, "creation_date": 1520462195, "answer_id": 49162368, "question_id": 49162302, "link": "https://stackoverflow.com/questions/49162302/regex-to-find-letter-between-two-numbers-python/49162368#49162368", "title": "Regex to find letter between two numbers python", "body": "<p>You can use a capture group to tell the regex engine exactly what you want it to extract from the string - it'll be returned as a <a href=\"https://docs.python.org/3/library/re.html#match-objects\" rel=\"nofollow noreferrer\">Match Object</a>:</p>\n\n<pre><code>&gt;&gt;&gt; import re\n&gt;&gt;&gt; re.search('\\d([A-Z])\\d', 'XOM1809C123')\n&lt;_sre.SRE_Match object at 0x7f6e597b54e0&gt;\n&gt;&gt;&gt; re.search('\\d([A-Z])\\d', 'XOM1809C123').group(0)\n'9C1'\n&gt;&gt;&gt; re.search('\\d([A-Z])\\d', 'XOM1809C123').group(1)\n'C'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3418, "user_id": 1158351, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/06288dded18d1b525738107e8d1347a6?s=128&d=identicon&r=PG", "display_name": "pradeep", "link": "https://stackoverflow.com/users/1158351/pradeep"}, "is_accepted": false, "score": 2, "last_activity_date": 1520462961, "creation_date": 1520462961, "answer_id": 49162514, "question_id": 49162302, "link": "https://stackoverflow.com/questions/49162302/regex-to-find-letter-between-two-numbers-python/49162514#49162514", "title": "Regex to find letter between two numbers python", "body": "<p>You can use regex <code>(.*\\d)([A-Z])(\\d.*)</code> - This will give you exact ONE Alphabet between numbers.</p>\n\n<pre><code>&gt;&gt;&gt; import re\n&gt;&gt;&gt; re.search('(.*\\d)([A-Z])(\\d.*)', 'XOM1809C123').group(2)\n'C'\n&gt;&gt;&gt; re.search('(.*\\d)([A-Z])(\\d.*)', 'AAPL1809A170').group(2)\n'A'\n</code></pre>\n\n<p>I find <a href=\"http://rubular.com/\" rel=\"nofollow noreferrer\">http://rubular.com/</a> very handy to test regex.</p>\n"}, {"tags": [], "owner": {"reputation": 1259, "user_id": 6841414, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gGLD5.png?s=128&g=1", "display_name": "colossatr0n", "link": "https://stackoverflow.com/users/6841414/colossatr0n"}, "is_accepted": false, "score": 1, "last_activity_date": 1520466041, "last_edit_date": 1520466041, "creation_date": 1520463749, "answer_id": 49162680, "question_id": 49162302, "link": "https://stackoverflow.com/questions/49162302/regex-to-find-letter-between-two-numbers-python/49162680#49162680", "title": "Regex to find letter between two numbers python", "body": "<p>You can use groups to extract what you want from the match:</p>\n\n<pre><code>str = 'AAPL1809A170'\nmatch = re.search(r\"\\d{1}([A-Z])\\d{1}\", str)\nprint(match.group(1))\n</code></pre>\n\n<p>The group is whatever you put between parenthesis <code>()</code>, e.g., <code>[A-Z]</code>, and then you print the group. Since there's only one group specified, <code>([A-Z])</code>, use <code>print(match.group(1))</code> to print the matched letter. In the case above, this will return <code>A</code>.</p>\n"}], "owner": {"reputation": 57, "user_id": 6417088, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1e7544c96b26eeb3f797b289006da682?s=128&d=identicon&r=PG&f=1", "display_name": "Andrea Ferrante", "link": "https://stackoverflow.com/users/6417088/andrea-ferrante"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1145, "favorite_count": 0, "accepted_answer_id": 49162357, "answer_count": 4, "score": 0, "last_activity_date": 1520466041, "creation_date": 1520461882, "question_id": 49162302, "link": "https://stackoverflow.com/questions/49162302/regex-to-find-letter-between-two-numbers-python", "title": "Regex to find letter between two numbers python", "body": "<p>is there a regex to find a letter beween two numbers in a string by using Python ?</p>\n\n<p><strong>For instance,</strong> given a string like this one \"<strong>AAPL1809A170</strong>\" I would like to extract <strong>A</strong> only...again, given \"<strong>XOM1809C123</strong>\" I would like to extract C only...</p>\n\n<p>To solve my problem I just tried this regex: \"\\d{1}[A-Z]{1}\\d{1}\" but it extract 9A1 or 9C1 given examples strings here above.</p>\n\n<p>Thank you for replying back if possible</p>\n"}, {"tags": ["python", "tensorflow", "neural-network", "artificial-intelligence"], "comments": [{"owner": {"reputation": 493, "user_id": 1814859, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a93e11b22f4e1e8f213bbd0c87a8887c?s=128&d=identicon&r=PG", "display_name": "Johan Holtby", "link": "https://stackoverflow.com/users/1814859/johan-holtby"}, "reply_to_user": {"reputation": 589, "user_id": 4316143, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zMEVZ.jpg?s=128&g=1", "display_name": "Wouter de Winter", "link": "https://stackoverflow.com/users/4316143/wouter-de-winter"}, "edited": false, "score": 0, "creation_date": 1520863786, "post_id": 49162276, "comment_id": 85477737, "body": "Thank you so much! If you wish to have an accept on the answer repost as an answer. I had a feeling that the structure of Tensorflow was more linear moving and transforming this big tensor. What I want is dynamically linked hierarchical neural net structured of many hundreds of subnets. With each subnet trying to be best in estimating a pattern which no other node can estimate. Once again THANK YOU VERY MUCH! I have a bioinformatics background and neural net looks so interesting open filed."}], "answers": [{"tags": [], "owner": {"reputation": 589, "user_id": 4316143, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zMEVZ.jpg?s=128&g=1", "display_name": "Wouter de Winter", "link": "https://stackoverflow.com/users/4316143/wouter-de-winter"}, "is_accepted": true, "score": 1, "last_activity_date": 1521016842, "creation_date": 1521016842, "answer_id": 49273055, "question_id": 49162276, "link": "https://stackoverflow.com/questions/49162276/how-to-make-dynamic-hierarchical-tensorflow-neural-net/49273055#49273055", "title": "How to make dynamic hierarchical TensorFlow neural net?", "body": "<p>I don't know if and how this would work in TF. But specific \"dynamic\" deep learning libraries exist that might give a better fit to your use case. PyTorch for example.</p>\n"}], "owner": {"reputation": 493, "user_id": 1814859, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a93e11b22f4e1e8f213bbd0c87a8887c?s=128&d=identicon&r=PG", "display_name": "Johan Holtby", "link": "https://stackoverflow.com/users/1814859/johan-holtby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 1, "accepted_answer_id": 49273055, "answer_count": 1, "score": 0, "last_activity_date": 1521016842, "creation_date": 1520461782, "question_id": 49162276, "link": "https://stackoverflow.com/questions/49162276/how-to-make-dynamic-hierarchical-tensorflow-neural-net", "title": "How to make dynamic hierarchical TensorFlow neural net?", "body": "<p>I'm investigating on using tensorflow for an experimental AI algorithm using dynamic neural nets alowing the system to scale(remove and add) layers and width of layers. How should one go about this?</p>\n\n<p>And the followup is if I want to also make the nets hierarchical so that they converge to two values (the classifier and the estimate of how sure it is). E.g. If there is a great variance not explained by the neural net it might give a 0,4 out of 1 as a classifier but also a \"sure\" value indicating how good the neural net \"feels\" about the estimate. To compare to us humans we can grasp a concept and also grade how confident we are. Thet hierarchical structure I also want to be dynamic connecting subnets together and disconnecting and also removing them entirely from the system.</p>\n\n<p>My main question: Is this an experiment I should do in tensorflow?</p>\n\n<p>I understand this is not a true technical question. But I hope if you feel it being out of bounds try to edit it to a more objective question.</p>\n"}, {"tags": ["python", "cython"], "answers": [{"comments": [{"owner": {"reputation": 165, "user_id": 6369958, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/641952688bb6a14c0e66cdfa415c9c51?s=128&d=identicon&r=PG&f=1", "display_name": "Claudio", "link": "https://stackoverflow.com/users/6369958/claudio"}, "edited": false, "score": 0, "creation_date": 1520520003, "post_id": 49171009, "comment_id": 85356485, "body": "I didn&#39;t notice that. Thank you!"}], "tags": [], "owner": {"reputation": 6394, "user_id": 3327666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/717bb7cd1896b19837f5ab1f4264bc9d?s=128&d=identicon&r=PG&f=1", "display_name": "Pierre de Buyl", "link": "https://stackoverflow.com/users/3327666/pierre-de-buyl"}, "is_accepted": true, "score": 5, "last_activity_date": 1520505373, "creation_date": 1520505373, "answer_id": 49171009, "question_id": 49162218, "link": "https://stackoverflow.com/questions/49162218/cdef-extern-from-nogil/49171009#49171009", "title": "cdef extern from ... NOGIL", "body": "<p>From <a href=\"http://docs.cython.org/en/latest/src/userguide/external_C_code.html#declaring-a-function-as-callable-without-the-gil\" rel=\"noreferrer\">Cython docs</a> on binding with C code</p>\n\n<blockquote>\n  <p>The nogil function annotation declares that it is safe to call the\n  function without the GIL.</p>\n</blockquote>\n\n<p>In your example, this means that the functions <code>pthread_mutex_init</code> and <code>pthread_mutex_destroy</code> are allowed in a <code>with nogil</code> block. In the absence of an explicit <code>with nogil</code> block, the GIL remains in place: it necessary but not sufficient to declare the function as done in the example.</p>\n\n<p>Plain C variables can be used in the nogil blocks but you are responsible for the thread-safety.</p>\n"}], "owner": {"reputation": 165, "user_id": 6369958, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/641952688bb6a14c0e66cdfa415c9c51?s=128&d=identicon&r=PG&f=1", "display_name": "Claudio", "link": "https://stackoverflow.com/users/6369958/claudio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 455, "favorite_count": 1, "accepted_answer_id": 49171009, "answer_count": 1, "score": 2, "last_activity_date": 1520505373, "creation_date": 1520461502, "question_id": 49162218, "link": "https://stackoverflow.com/questions/49162218/cdef-extern-from-nogil", "title": "cdef extern from ... NOGIL", "body": "<p>There's one thing I don't fully understand about the \"nogil\" applied to a cdef extern like this:</p>\n\n<pre><code>cdef extern from \"pthread.h\" nogil:\n\n    ctypedef struct pthread_mutex_t:\n        pass\n\n    cdef int pthread_mutex_init(pthread_mutex_t *, void *)\n    cdef int pthread_mutex_destroy(pthread_mutex_t *)\n</code></pre>\n\n<p>It isn't clear to me about the effect of that nogil, and I cannot find anything in the Cython's documentation about it. My interpetation is that the functions declared inside have the nogil implicitly. Am I right? And what about the struct?</p>\n\n<p>Thanks for any info.</p>\n"}, {"tags": ["python", "tensorflow", "neural-network", "deep-learning", "keras"], "comments": [{"owner": {"reputation": 49730, "user_id": 349130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4efeebbf6994bb904738c4fb8922bf?s=128&d=identicon&r=PG", "display_name": "Dr. Snoopy", "link": "https://stackoverflow.com/users/349130/dr-snoopy"}, "edited": false, "score": 0, "creation_date": 1520495909, "post_id": 49162202, "comment_id": 85341170, "body": "Its impossible to say what&#39;s wrong with only two lines of code, you should include more code. Also, why are you not just using model.fit?"}, {"owner": {"reputation": 221, "user_id": 5550546, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/220cc388d2eb66c99f035fe699a5ca5e?s=128&d=identicon&r=PG&f=1", "display_name": "Virange", "link": "https://stackoverflow.com/users/5550546/virange"}, "reply_to_user": {"reputation": 49730, "user_id": 349130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4efeebbf6994bb904738c4fb8922bf?s=128&d=identicon&r=PG", "display_name": "Dr. Snoopy", "link": "https://stackoverflow.com/users/349130/dr-snoopy"}, "edited": false, "score": 0, "creation_date": 1520577662, "post_id": 49162202, "comment_id": 85381150, "body": "@Ma The optimization step requires additional tweakings, which hinders the use of model.fit"}], "answers": [{"tags": [], "owner": {"reputation": 815, "user_id": 3261772, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/ccccb9d49cda38ba4ab9811f50dc0143?s=128&d=identicon&r=PG&f=1", "display_name": "Hamid K", "link": "https://stackoverflow.com/users/3261772/hamid-k"}, "is_accepted": false, "score": 0, "last_activity_date": 1617888328, "last_edit_date": 1617888328, "creation_date": 1553828538, "answer_id": 55409890, "question_id": 49162202, "link": "https://stackoverflow.com/questions/49162202/usage-of-learning-phase-in-keras-for-tensorflow-backend/55409890#55409890", "title": "Usage of &#39;learning_phase&#39; in keras for tensorflow backend?", "body": "<p>set the learning phase to 1 (training)</p>\n<pre><code>K.set_learning_phase(1)\n</code></pre>\n<p>Then you need to set the training=false for all batch normalization layers</p>\n<pre><code>if layer.name.startswith('bn'):\n    layer.call(layer.input, training=False)\n</code></pre>\n"}], "owner": {"reputation": 221, "user_id": 5550546, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/220cc388d2eb66c99f035fe699a5ca5e?s=128&d=identicon&r=PG&f=1", "display_name": "Virange", "link": "https://stackoverflow.com/users/5550546/virange"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 5689, "favorite_count": 5, "answer_count": 1, "score": 9, "last_activity_date": 1617888328, "creation_date": 1520461440, "question_id": 49162202, "link": "https://stackoverflow.com/questions/49162202/usage-of-learning-phase-in-keras-for-tensorflow-backend", "title": "Usage of &#39;learning_phase&#39; in keras for tensorflow backend?", "body": "<p>I am trying to train a resnet network using keras backend in tensorflow. The feed dictionary for each batch update is written as:</p>\n\n<pre><code>    feed_dict= {x:X_train[indices[start:end]], y:Y_train[indices[start:end]], keras.backend.learning_phase():1}\n</code></pre>\n\n<p>I am using keras backend (<code>keras.backend.set_session(sess)</code>) because the original resnet network is defined with keras. As the model contains dropout and batch_norm layers, it requires a learning phase to distinct between training and testing. </p>\n\n<p>I observe that whenever I set <code>keras.backend.learning_phase():1</code>, the model train/test accuracy hardly increase above 10%. In contrast, if the learning phase is not set  i.e., the feed dictionary is defined as:</p>\n\n<pre><code>feed_dict= {x:X_train[indices[start:end]], y:Y_train[indices[start:end]]}\n</code></pre>\n\n<p>Then as expected, the model accuracy keeps in increasing with epochs in a standard way.</p>\n\n<p>I would appreciate if someone clarifies <strong>whether the use of learning phase is not necessary or if something else is wrong</strong>. Keras 2.0 documentation seems to suggest using learning phase with dropout and batch_norm layers.</p>\n"}, {"tags": ["python", "youtube", "mp3", "youtube-dl"], "comments": [{"owner": {"reputation": 5360, "user_id": 5103802, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/889904984390190/picture?type=large", "display_name": "Vin&#237;cius Figueiredo", "link": "https://stackoverflow.com/users/5103802/vin%c3%adcius-figueiredo"}, "edited": false, "score": 1, "creation_date": 1520461958, "post_id": 49162200, "comment_id": 85330335, "body": "You can use Python&#39;s <code>os.system</code> to run an external command, so: 1. read the <code>list.txt</code>, 2. store the data line by line in a list, 3. create a <code>for</code> loop iterating the list to run <code>os.system(&quot;youtube-dl.exe -f bestaudio ytsearch:&quot; + item)</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "anon"}, "edited": false, "score": 1, "creation_date": 1520496486, "post_id": 49162200, "comment_id": 85341477, "body": "<a href=\"https://meta.stackoverflow.com/q/319747/35070\">Your answer should not be edited into the question</a>. Instead, <a href=\"https://stackoverflow.com/help/self-answer\">write an answer yourself</a>. Notice that <a href=\"https://github.com/rg3/youtube-dl/blob/master/README.md#do-i-always-have-to-pass--citw\" rel=\"nofollow noreferrer\">as I (as the core developer of youtube-dl) laid out in the official FAQ, both <code>-c</code> and <code>--title</code> are not generally helpful</a>. youtube-dl will resume by default, <code>-c</code> will force resumption even in cases when it breaks. <code>--title</code> has no effect."}], "answers": [{"tags": [], "owner": {"reputation": 3049, "user_id": 3140853, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73157a618d54905fae77b8e32a8db426?s=128&d=identicon&r=PG", "display_name": "alastairtree", "link": "https://stackoverflow.com/users/3140853/alastairtree"}, "is_accepted": false, "score": 0, "last_activity_date": 1520463004, "creation_date": 1520463004, "answer_id": 49162524, "question_id": 49162200, "link": "https://stackoverflow.com/questions/49162200/how-to-use-youtube-dl-search-so-it-can-pull-out-of-a-list-from-a-txt-file/49162524#49162524", "title": "how to use youtube-dl search so it can pull out of a list from a .txt file?", "body": "<p>If you were willing to not use python, and as you are on windows, you could just use Powershell to iterate over lines in the file, see <a href=\"https://stackoverflow.com/questions/33511772/read-file-line-by-line-in-powershell\">Read file line by line in PowerShell</a></p>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 9459123, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/252F9.png?s=128&g=1", "display_name": "professor_png", "link": "https://stackoverflow.com/users/9459123/professor-png"}, "edited": false, "score": 0, "creation_date": 1520492961, "post_id": 49163658, "comment_id": 85339730, "body": "Hey thanks for this, I was able to use your example to help and another guys to help cobble together a command that works with my specific list. ill add my command and what the flags do for future people with this. Thanks again"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "anon"}, "is_accepted": true, "score": 2, "last_activity_date": 1520470142, "creation_date": 1520470142, "answer_id": 49163658, "question_id": 49162200, "link": "https://stackoverflow.com/questions/49162200/how-to-use-youtube-dl-search-so-it-can-pull-out-of-a-list-from-a-txt-file/49163658#49163658", "title": "how to use youtube-dl search so it can pull out of a list from a .txt file?", "body": "<p>If <code>list.txt</code> contains just the words, use the <code>--batch-file</code> (or <code>-a</code> for short option) and set a default search provider (YouTube search in this case):</p>\n\n<pre><code>youtube-dl -a list.txt --default-search ytsearch -x\n</code></pre>\n\n<p>Note that I replaced <code>-f bestaudio</code> with <code>-x</code> (or <code>--extract-audio</code>). This has two advantages: It works with videos without dedicated audio streams (extremely rare these days), and it corrects the m4a file so that it can be read on all music players. You can also pass in <code>--audio-format mp3</code> (or e.g. <code>opus</code> instead of mp3) to get the videos all in a desired output format.</p>\n"}], "owner": {"reputation": 23, "user_id": 9459123, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/252F9.png?s=128&g=1", "display_name": "professor_png", "link": "https://stackoverflow.com/users/9459123/professor-png"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7719, "favorite_count": 0, "accepted_answer_id": 49163658, "answer_count": 2, "score": 2, "last_activity_date": 1520493521, "creation_date": 1520461437, "last_edit_date": 1520493521, "question_id": 49162200, "link": "https://stackoverflow.com/questions/49162200/how-to-use-youtube-dl-search-so-it-can-pull-out-of-a-list-from-a-txt-file", "title": "how to use youtube-dl search so it can pull out of a list from a .txt file?", "body": "<p>I have a firend who gave me a very specific problem, he has a list of plain text words <strong>(for purpose of writing i'll just call this list he has list.txt and i'll populate it will basic words)</strong> and he wants to pull an audio only file of each word on this list from youtube. So i decided youtube-dl would be the fastest tool.</p>\n\n<p>Since the <strong>list.txt</strong> is a plain words list and not a list youtube links it makes it harder to download in bulk. After reading all the documents I think the simplest way is to use the search feature built into youtube-dl.</p>\n\n<blockquote>\n  <h2>List.txt</h2>\n  \n  <ol>\n  <li>blue </li>\n  <li>river</li>\n  <li>red</li>\n  <li>(ETC...)</li>\n  </ol>\n</blockquote>\n\n<p><strong>So basically something that does this.</strong> but since there is a lot more than just 3 items this isn't really practical.</p>\n\n<pre><code>youtube-dl.exe -f bestaudio ytsearch:blue\nyoutube-dl.exe -f bestaudio ytsearch:river\nyoutube-dl.exe -f bestaudio ytsearch:red\n</code></pre>\n\n<p>I've been looking all day for something similar to this bit of code below that can take a .txt file and search youtube and download 1 audio/video per item on this list. </p>\n\n<pre><code>youtube-dl.exe -f bestaudio ytsearch:list.txt\n</code></pre>\n\n<p>I work more with network stuff rather than coding so im kinda out of my depth here and only really have basic coding skills so any help is much appreciated</p>\n\n<hr>\n\n<p>Solution that ended up working for me</p>\n\n<p>also because i need file conversion i used <a href=\"https://www.ffmpeg.org/\" rel=\"nofollow noreferrer\">ffmpeg</a> which has built in support for youtube-dl</p>\n\n<pre><code>youtube-dl -c --title --batch-file test.txt --default-search \"ytsearch\" -x\n</code></pre>\n\n<ul>\n<li><p>-c Force resume of partially downloaded files.</p></li>\n<li><p>--title not really sure doesnt seem to make a diffrence anyhow</p></li>\n<li>-x as alastairtree pointed out its a better way to get audio</li>\n</ul>\n\n<p>Ps. Thanks to all who tried to help me and my friend solve our problem</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "answers": [{"tags": [], "owner": {"reputation": 338, "user_id": 8610165, "user_type": "registered", "profile_image": "https://graph.facebook.com/10213011178861480/picture?type=large", "display_name": "Connor John", "link": "https://stackoverflow.com/users/8610165/connor-john"}, "is_accepted": false, "score": 0, "last_activity_date": 1520461855, "creation_date": 1520461855, "answer_id": 49162294, "question_id": 49162195, "link": "https://stackoverflow.com/questions/49162195/insert-value-based-on-row-index-number-in-a-pandas-dataframe/49162294#49162294", "title": "Insert value based on row index number in a pandas dataframe", "body": "<p>You can set up a few np.where statements to handle this. Try something like the following:</p>\n\n<pre><code>import numpy as np\n...\ndf['ticker'] = np.where(df.index &lt; row_25, \"$\", df['ticker'])\ndf['ticker'] = np.where(row_25 &lt;= df.index &lt; row_50, \"$$\", df['ticker'])\ndf['ticker'] = np.where(row_50 &lt;= df.index &lt; row_75, \"$$$\", df['ticker'])\ndf['ticker'] = np.where(row_75 &lt;= df.index, \"$$$$\", df['ticker'])\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 5347086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/633f87521c74cfa6d6c90982f5edcdf8?s=128&d=identicon&r=PG&f=1", "display_name": "sdp", "link": "https://stackoverflow.com/users/5347086/sdp"}, "edited": false, "score": 0, "creation_date": 1520467311, "post_id": 49162532, "comment_id": 85332152, "body": "I&#39;m not sure what I&#39;m missing but When I ran the code its returning &quot;$&quot; for all the rows in ticker column."}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "reply_to_user": {"reputation": 11, "user_id": 5347086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/633f87521c74cfa6d6c90982f5edcdf8?s=128&d=identicon&r=PG&f=1", "display_name": "sdp", "link": "https://stackoverflow.com/users/5347086/sdp"}, "edited": false, "score": 0, "creation_date": 1520468552, "post_id": 49162532, "comment_id": 85332468, "body": "@sow it work fine on my side , would you mind paste the code you are using here ?&gt;"}, {"owner": {"reputation": 11, "user_id": 5347086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/633f87521c74cfa6d6c90982f5edcdf8?s=128&d=identicon&r=PG&f=1", "display_name": "sdp", "link": "https://stackoverflow.com/users/5347086/sdp"}, "edited": false, "score": 0, "creation_date": 1520471263, "post_id": 49162532, "comment_id": 85333197, "body": "<code>import pandas as pd import numpy as np df=pd.DataFrame(np.random.randint(0,100,size=(11, 4)), columns=list(&#39;ABCD&#39;)) df[&#39;ticker&#39;]=pd.cut(np.arange(len(df))&#47;len(df), [-np.inf,0.25,0.5,0.75,1], labels=[&quot;$&quot;,&quot;$$&quot;,&#39;$$$&#39;,&#39;$$$$&#39;],right=True) df</code>"}], "tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": false, "score": 1, "last_activity_date": 1520464133, "last_edit_date": 1520464133, "creation_date": 1520463035, "answer_id": 49162532, "question_id": 49162195, "link": "https://stackoverflow.com/questions/49162195/insert-value-based-on-row-index-number-in-a-pandas-dataframe/49162532#49162532", "title": "Insert value based on row index number in a pandas dataframe", "body": "<p>I think <code>cut</code> can solve this problem </p>\n\n<pre><code>df['ticker']=pd.cut(np.arange(len(df))/len(df), [-np.inf,0.25,0.5,0.75,1], labels=[\"$\",\"$$\",'$$$','$$$$'],right=True)\ndf\nOut[35]: \n     A   B   C   D ticker\n0   63  51  19  33      $\n1   12  80  57   1      $\n2   53  27  62  26      $\n3   97  43  31  80     $$\n4   91  22  92  11     $$\n5   39  70  82  26     $$\n6   32  62  17  75    $$$\n7    5  59  79  72    $$$\n8   75   4  47   4    $$$\n9   43   5  45  66   $$$$\n10  29   9  74  94   $$$$\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 5347086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/633f87521c74cfa6d6c90982f5edcdf8?s=128&d=identicon&r=PG&f=1", "display_name": "sdp", "link": "https://stackoverflow.com/users/5347086/sdp"}, "edited": false, "score": 0, "creation_date": 1520471072, "post_id": 49162542, "comment_id": 85333155, "body": "The &quot;$$$$&quot; wont populate in the last 2 records. Any idea why it wont populate?"}, {"owner": {"reputation": 41182, "user_id": 6671176, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4DvZ4.png?s=128&g=1", "display_name": "sacuL", "link": "https://stackoverflow.com/users/6671176/sacul"}, "reply_to_user": {"reputation": 11, "user_id": 5347086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/633f87521c74cfa6d6c90982f5edcdf8?s=128&d=identicon&r=PG&f=1", "display_name": "sdp", "link": "https://stackoverflow.com/users/5347086/sdp"}, "edited": false, "score": 0, "creation_date": 1520471796, "post_id": 49162542, "comment_id": 85333349, "body": "try: <code>df[&#39;ticker&#39;] = np.select(conds, choices, default = &#39;test&#39;)</code>, if the last 2 records are filled with the value <code>test</code>, it means that none of the conditions provided were satisfied in those rows. Otherwise, I&#39;m not sure..."}, {"owner": {"reputation": 11, "user_id": 5347086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/633f87521c74cfa6d6c90982f5edcdf8?s=128&d=identicon&r=PG&f=1", "display_name": "sdp", "link": "https://stackoverflow.com/users/5347086/sdp"}, "edited": false, "score": 0, "creation_date": 1520518032, "post_id": 49162542, "comment_id": 85355085, "body": "Your solution worked. I&#39;m not sure why it does&#39;n show in my df . When I saved it as a csv, I was able to see &#39;$$$$&#39;. Thanks sacul"}, {"owner": {"reputation": 343, "user_id": 10713111, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2Ux99.jpg?s=128&g=1", "display_name": "Mactilda", "link": "https://stackoverflow.com/users/10713111/mactilda"}, "edited": false, "score": 0, "creation_date": 1558616795, "post_id": 49162542, "comment_id": 99166223, "body": "I am trying this as I thought this would solve my problem but I get an error saying that ```` &#39;row_6 &#39; is not defined ````  (what would&#39;ve been row_25 in this example). Would you happen to know a way of trouble shooting this?"}], "tags": [], "owner": {"reputation": 41182, "user_id": 6671176, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4DvZ4.png?s=128&g=1", "display_name": "sacuL", "link": "https://stackoverflow.com/users/6671176/sacul"}, "is_accepted": false, "score": 1, "last_activity_date": 1520463737, "last_edit_date": 1520463737, "creation_date": 1520463073, "answer_id": 49162542, "question_id": 49162195, "link": "https://stackoverflow.com/questions/49162195/insert-value-based-on-row-index-number-in-a-pandas-dataframe/49162542#49162542", "title": "Insert value based on row index number in a pandas dataframe", "body": "<p>I like to use <code>np.select</code> for this kind of task, because I find the syntax intuitive and readable:</p>\n\n<pre><code># Set up your conditions:\nconds = [(df.index &gt;= 0) &amp; (df.index &lt;= row_25),\n         (df.index &gt; row_25) &amp; (df.index&lt;=row_50),\n         (df.index &gt; row_50) &amp; (df.index&lt;=row_75),\n         (df.index &gt; row_75)]\n\n# Set up your target values (in the same order as your conditions)\nchoices = ['$', '$$', '$$$', '$$$$']\n\n# Assign df['ticker']\ndf['ticker'] = np.select(conds, choices)\n</code></pre>\n\n<p>returns this:</p>\n\n<pre><code>&gt;&gt;&gt; df\n     A   B   C   D ticker\n0   92  97  25  79      $\n1   76   4  26  94      $\n2   49  65  19  91      $\n3   76   3  83  45     $$\n4   83  16   0  16     $$\n5    1  56  97  44     $$\n6   78  17  18  86    $$$\n7   55  56  83  91    $$$\n8   76  16  52  33    $$$\n9   55  35  80  95   $$$$\n10  90  29  41  87   $$$$\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 5347086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/633f87521c74cfa6d6c90982f5edcdf8?s=128&d=identicon&r=PG&f=1", "display_name": "sdp", "link": "https://stackoverflow.com/users/5347086/sdp"}, "edited": false, "score": 0, "creation_date": 1520471461, "post_id": 49162639, "comment_id": 85333265, "body": "The &quot;$$$$&quot; wont populate any idea on what I&#39;m missing?"}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "reply_to_user": {"reputation": 11, "user_id": 5347086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/633f87521c74cfa6d6c90982f5edcdf8?s=128&d=identicon&r=PG&f=1", "display_name": "sdp", "link": "https://stackoverflow.com/users/5347086/sdp"}, "edited": false, "score": 0, "creation_date": 1520471604, "post_id": 49162639, "comment_id": 85333303, "body": "That&#39;s strange, when I try <code>print(df)</code> I see output as per my post."}, {"owner": {"reputation": 11, "user_id": 5347086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/633f87521c74cfa6d6c90982f5edcdf8?s=128&d=identicon&r=PG&f=1", "display_name": "sdp", "link": "https://stackoverflow.com/users/5347086/sdp"}, "edited": false, "score": 0, "creation_date": 1520518151, "post_id": 49162639, "comment_id": 85355163, "body": "Your solution worked. I&#39;m not sure why it does&#39;n show in my df . When I saved it as a csv, I was able to see &#39;$$$$&#39;. Thanks @jpp"}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "reply_to_user": {"reputation": 11, "user_id": 5347086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/633f87521c74cfa6d6c90982f5edcdf8?s=128&d=identicon&r=PG&f=1", "display_name": "sdp", "link": "https://stackoverflow.com/users/5347086/sdp"}, "edited": false, "score": 0, "creation_date": 1520518196, "post_id": 49162639, "comment_id": 85355196, "body": "@sow, no problem. Feel free to accept (tick on left) if it solved your problem."}], "tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": false, "score": 0, "last_activity_date": 1520463537, "creation_date": 1520463537, "answer_id": 49162639, "question_id": 49162195, "link": "https://stackoverflow.com/questions/49162195/insert-value-based-on-row-index-number-in-a-pandas-dataframe/49162639#49162639", "title": "Insert value based on row index number in a pandas dataframe", "body": "<p>This is one explicit solution using <code>.loc</code> accessor.</p>\n\n<pre><code>import pandas as pd\n\ndf = pd.DataFrame(np.random.randint(0,100,size=(11, 4)), columns=list('ABCD'))\nn = len(df.index)\n\ndf['ticker'] = 'na'\ndf.loc[df.index &lt;= n/4, 'ticker'] = '$'\ndf.loc[(n/4 &lt; df.index) &amp; (df.index &lt;= n/2), 'ticker'] = '$$'\ndf.loc[(n/2 &lt; df.index) &amp; (df.index &lt;= n*3/4), 'ticker'] = '$$$'\ndf.loc[df.index &gt; n*3/4, 'ticker'] = '$$$$'\n\n#      A   B   C   D ticker\n# 0   47  64   7  46      $\n# 1   53  55  75   3      $\n# 2   93  95  28  47      $\n# 3   35  88  16   7     $$\n# 4   99  66  88  84     $$\n# 5   75   2  72  90     $$\n# 6    6  53  36  92    $$$\n# 7   83  58  54  67    $$$\n# 8   49  83  46  54    $$$\n# 9   69   9  96  73   $$$$\n# 10  84  42  11  83   $$$$\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5347086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/633f87521c74cfa6d6c90982f5edcdf8?s=128&d=identicon&r=PG&f=1", "display_name": "sdp", "link": "https://stackoverflow.com/users/5347086/sdp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3122, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1520464133, "creation_date": 1520461391, "question_id": 49162195, "link": "https://stackoverflow.com/questions/49162195/insert-value-based-on-row-index-number-in-a-pandas-dataframe", "title": "Insert value based on row index number in a pandas dataframe", "body": "<p>I need to insert value into a column based on row index of a pandas dataframe.</p>\n\n<pre><code>import pandas as pd\ndf=pd.DataFrame(np.random.randint(0,100,size=(11, 4)), columns=list('ABCD'))\ndf['ticker']='na'\ndf\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/VMwNq.png\" rel=\"nofollow noreferrer\">Sample DataFrame</a>\nIn the above sample dataframe, the ticker column for first 25% of the total number of records must have value '$\" the next 25% of the records must have value \"$$\" and so on. </p>\n\n<p>I tried to get the length of the dataframe and calculate 25,50,75 percent on it and then access one row at a time and assign value to \"ticker\" based on row index.</p>\n\n<pre><code>total_row_count=len(df)\nrow_25 = int(total_row_count * .25)\nrow_50 = int(total_row_count * .5)\nrow_75=int(total_row_count*.75)\n\nif ((row.index &gt;=0) and (row.index&lt;=row_25)):\n    return\"$\"\nelif ((row.index &gt; row_25) and (row.index&lt;=row_50)):\n    return\"$$\"\nelif ((row.index &gt; row_50) and (row.index&lt;=row_75)):\n    return\"$$$\"\nelif (row.index &gt; row_75):\n    return\"$$$$\"\n</code></pre>\n\n<p>But I'm not able to get the row index. Please let me know if there is a different way to assign these values</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 16194, "user_id": 667883, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a39234ae82a5898cba1d70b5bff80ec3?s=128&d=identicon&r=PG", "display_name": "Allen", "link": "https://stackoverflow.com/users/667883/allen"}, "is_accepted": true, "score": 1, "last_activity_date": 1520462106, "creation_date": 1520462106, "answer_id": 49162348, "question_id": 49162161, "link": "https://stackoverflow.com/questions/49162161/pandas-conditionally-set-value-in-new-column/49162348#49162348", "title": "Pandas: Conditionally Set Value in New Column", "body": "<p>Can you try:</p>\n\n<pre><code>df[\"is_weekend\"] = df.index.dayofweek.isin([5,6]).astype(int)\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>df[\"is_weekend\"] = df.apply(lambda x: 1 if x.name.dayofweek in [5,6] else 0, axis=1)\n</code></pre>\n\n<p>Or to use np.where, change it to:</p>\n\n<pre><code>df[\"is_weekend\"] = np.where(((df.index.dayofweek==5) | (df.index.dayofweek==6)), 1, 0)\n</code></pre>\n"}], "owner": {"reputation": 6871, "user_id": 1316501, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/3f0ddaf1d7d2aaeeb19b6ec8a99a70ee?s=128&d=identicon&r=PG", "display_name": "anon_swe", "link": "https://stackoverflow.com/users/1316501/anon-swe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 490, "favorite_count": 0, "accepted_answer_id": 49162348, "answer_count": 1, "score": 0, "last_activity_date": 1520462106, "creation_date": 1520461253, "question_id": 49162161, "link": "https://stackoverflow.com/questions/49162161/pandas-conditionally-set-value-in-new-column", "title": "Pandas: Conditionally Set Value in New Column", "body": "<p>I have a Pandas DataFrame, <code>df</code>, that has a <code>DatetimeIndex</code>. I'm trying to create a new column <code>is_weekend</code> based on whether the row's index's day field is 5 or 6.</p>\n\n<p>Here's my attempt:</p>\n\n<pre><code>df[\"is_weekend\"] = np.where(df.index.dayofweek in [5,6], 1, 0)\n</code></pre>\n\n<p>Unfortunately, I get this:</p>\n\n<pre><code>ValueError: The truth value of an array with more than one element is ambiguous. Use a.any() or a.all()\n</code></pre>\n\n<p>I looked at the NumPy docs for <code>np.where</code> but nothing surprising jumped out.</p>\n\n<p>Any advice appreciated!</p>\n"}, {"tags": ["python", "anaconda", "python-3.6", "conda", "aws-cli"], "comments": [{"owner": {"reputation": 59346, "user_id": 444036, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/My2AZ.jpg?s=128&g=1", "display_name": "Paulo Scardine", "link": "https://stackoverflow.com/users/444036/paulo-scardine"}, "edited": false, "score": 0, "creation_date": 1520461291, "post_id": 49162142, "comment_id": 85330054, "body": "Have you tried to installing it with <code>pip install awscli==1.11.156</code>?"}, {"owner": {"reputation": 425, "user_id": 6660836, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/05ea963bbb083f7b33cc7463088149c4?s=128&d=identicon&r=PG&f=1", "display_name": "morrime", "link": "https://stackoverflow.com/users/6660836/morrime"}, "reply_to_user": {"reputation": 59346, "user_id": 444036, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/My2AZ.jpg?s=128&g=1", "display_name": "Paulo Scardine", "link": "https://stackoverflow.com/users/444036/paulo-scardine"}, "edited": false, "score": 0, "creation_date": 1520461531, "post_id": 49162142, "comment_id": 85330160, "body": "@PauloScardine looks like that worked! I&#39;d thought I needed to install it via conda. Thank you."}, {"owner": {"reputation": 59346, "user_id": 444036, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/My2AZ.jpg?s=128&g=1", "display_name": "Paulo Scardine", "link": "https://stackoverflow.com/users/444036/paulo-scardine"}, "edited": false, "score": 0, "creation_date": 1520516200, "post_id": 49162142, "comment_id": 85353776, "body": "You are welcome. I&#39;ve made it into an answer in order to help future stackoverflowers with the same doubt."}], "answers": [{"tags": [], "owner": {"reputation": 59346, "user_id": 444036, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/My2AZ.jpg?s=128&g=1", "display_name": "Paulo Scardine", "link": "https://stackoverflow.com/users/444036/paulo-scardine"}, "is_accepted": true, "score": 1, "last_activity_date": 1520516130, "creation_date": 1520516130, "answer_id": 49174413, "question_id": 49162142, "link": "https://stackoverflow.com/questions/49162142/how-to-install-specific-awscli-version-in-conda-env-running-3-6-when-not-found/49174413#49174413", "title": "How to install specific awscli version in conda env (running 3.6) when not found in current channels", "body": "<p>Quoting from <a href=\"http://jakevdp.github.io/blog/2016/08/25/conda-myths-and-misconceptions/#Myth-#3:-Conda-and-pip-are-direct-competitors\" rel=\"nofollow noreferrer\">conda miths and misconceptions</a> by Jake VanderPlas:</p>\n\n<blockquote>\n  <p>If all you are doing is installing Python packages within an isolated environment, conda and pip+virtualenv are mostly interchangeable, modulo some difference in dependency handling and package availability. By isolated environment I mean a conda-env or virtualenv, in which you can install packages without modifying your system Python installation.</p>\n</blockquote>\n\n<p>You can try to activate your virtual environment and just install it using any of the standard methods. Supposing you have created a conda virtual environment named py36:</p>\n\n<pre><code>$ source activate py36\n</code></pre>\n\n<p>Or on Windows</p>\n\n<pre><code>&gt; activate py36\n</code></pre>\n\n<p>Then you just use any of the standard install methods, for example:</p>\n\n<pre><code>$ pip install awscli==1.11.156\n\n$ easy_install https://github.com/aws/aws-cli/archive/1.11.156.tar.gz\n</code></pre>\n\n<p>The downside is that conda is not managing dependencies for packages installed using pip but in most cases it is OK.</p>\n"}], "owner": {"reputation": 425, "user_id": 6660836, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/05ea963bbb083f7b33cc7463088149c4?s=128&d=identicon&r=PG&f=1", "display_name": "morrime", "link": "https://stackoverflow.com/users/6660836/morrime"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1007, "favorite_count": 0, "accepted_answer_id": 49174413, "answer_count": 1, "score": 0, "last_activity_date": 1520516130, "creation_date": 1520461164, "question_id": 49162142, "link": "https://stackoverflow.com/questions/49162142/how-to-install-specific-awscli-version-in-conda-env-running-3-6-when-not-found", "title": "How to install specific awscli version in conda env (running 3.6) when not found in current channels", "body": "<p>I am trying to install a specific version of awscli within my conda environment (running python 3.6). I have tried adding <code>conda-forge</code> to my current channels, as suggested in another post.</p>\n\n<p>When I run the command <code>conda install -p /Users/myname/anaconda3/envs/py36 awscli==1.11.156 -y</code></p>\n\n<p>It errors with this message: </p>\n\n<pre><code>Solving environment: failed\n\nPackagesNotFoundError: The following packages are not available from current channels:\n\n  - awscli==1.11.156\n\nCurrent channels:\n\n  - https://repo.continuum.io/pkgs/main/osx-64\n  - https://repo.continuum.io/pkgs/main/noarch\n  - https://repo.continuum.io/pkgs/free/osx-64\n  - https://repo.continuum.io/pkgs/free/noarch\n  - https://repo.continuum.io/pkgs/r/osx-64\n  - https://repo.continuum.io/pkgs/r/noarch\n  - https://repo.continuum.io/pkgs/pro/osx-64\n  - https://repo.continuum.io/pkgs/pro/noarch\n  - https://conda.anaconda.org/conda-forge/osx-64\n  - https://conda.anaconda.org/conda-forge/noarch\n</code></pre>\n"}, {"tags": ["python", "pandas", "numpy"], "comments": [{"owner": {"reputation": 1369, "user_id": 4383396, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1279516226/picture?type=large", "display_name": "Grant Williams", "link": "https://stackoverflow.com/users/4383396/grant-williams"}, "edited": false, "score": 1, "creation_date": 1520461538, "post_id": 49162118, "comment_id": 85330166, "body": "I mean one approach would be to make a list of tuples where the tuples are the arguments for np.where. Then you can iterate through the list and apply np.where() to the args. Although this will only really save you time if you have a way to programmatically generate the inputs."}], "answers": [{"tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": true, "score": 1, "last_activity_date": 1520462691, "creation_date": 1520462691, "answer_id": 49162464, "question_id": 49162118, "link": "https://stackoverflow.com/questions/49162118/create-a-dynamic-function-in-python-pandas-for-repeated-np-where-statements/49162464#49162464", "title": "Create a dynamic function in python/pandas for repeated np.where statements", "body": "<p>Would the below not work instead? It may even be more efficient, as less Boolean arrays need to be calculated and applied.</p>\n\n<pre><code>d = {'N': 'ADBE', 'A': 'ADB', 'D': 'CDB', 'W': 'ODB',\n     'T': 'TDB', 'I': 'ODI', 'S': 'GDB', 'B': 'BVP'}\n\nTABLE['B'] = 'null'\nTABLE.loc[(TABLE.FIELD1=='G') &amp; (TABLE.FIELD2[0:4]=='UXXX'), 'B'] = 'EGIB'\nTABLE.loc[TABLE.FIELD1.isin(d), 'B'] = TABLE.loc[TABLE.FIELD1.isin(d), 'B'].map(d)\n</code></pre>\n"}], "owner": {"reputation": 429, "user_id": 8081945, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/21cee0e18913f91d944f3d90807f5a91?s=128&d=identicon&r=PG&f=1", "display_name": "babz", "link": "https://stackoverflow.com/users/8081945/babz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 1, "accepted_answer_id": 49162464, "answer_count": 1, "score": 3, "last_activity_date": 1520465365, "creation_date": 1520461064, "last_edit_date": 1520465365, "question_id": 49162118, "link": "https://stackoverflow.com/questions/49162118/create-a-dynamic-function-in-python-pandas-for-repeated-np-where-statements", "title": "Create a dynamic function in python/pandas for repeated np.where statements", "body": "<p>I am creating code in which there is alot of repetition of the function <code>np.where</code>. There are about 200 fields which each require some sort of transformation using <code>np.where</code> (essentially case when/ if then statements).</p>\n\n<p>I was hoping to clean up the code by writing a function instead of repeating the statements for each field. The problem is that some fields require just a basic <code>np.where</code> statement whereas others have nested <code>np.where</code> statements (up to 10) and given this I am not sure how to make a function dynamic enough to deal with it or if it is even worth attempting this.</p>\n\n<p>Sample</p>\n\n<pre><code>Case 1-  Simple np.where\nTABLE[\u2018A\u2019]=np.where(TABLE.FIELD1=='N',TABLE.FIELD2,TABLE.FIELD3)\n\n\nCase 2- Nested np.where\nTABLE[\u2018B\u2019]= np.where(TABLE.FIELD1=='N','ADBE',\n                          np.where(TABLE.FIELD1=='A','ADB ',\n                          np.where(TABLE.FIELD1=='D','CDB ',\n                          np.where(TABLE.FIELD1=='W','ODB ',\n                          np.where(TABLE.FIELD1=='T','TDB ',\n                          np.where(TABLE.FIELD1=='I','ODI ',\n                          np.where(TABLE.FIELD1=='S','GDB ',       \n                          np.where(TABLE.FIELD1=='B','BVP ',\n                          np.where(((TABLE.FIELD1=='G')&amp;(TABLE.FIELD2[0:4]=='UXXX')),'EGIB',\n                          np.where(TABLE.FIELD1=='G','GIB ', 'null'))))))))))\n</code></pre>\n"}, {"tags": ["python", "pandas", "dataframe", "pandas-groupby"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1520461183, "post_id": 49162051, "comment_id": 85330008, "body": "That&#39;s not an error, just an unexpected result. There is no reason to also <code>groupby</code> on <code>n_tickets</code>"}], "answers": [{"comments": [{"owner": {"reputation": 99, "user_id": 9199406, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1685998854776515/picture?type=large", "display_name": "Abhinandan Singh", "link": "https://stackoverflow.com/users/9199406/abhinandan-singh"}, "edited": false, "score": 0, "creation_date": 1520464219, "post_id": 49162194, "comment_id": 85331231, "body": "I have a big data set. Even after applying the above code, I am not able to drop the dplicates. Here is the result: 465654 645 4 755874 645 6. Here 465654 and 755874 are indexes and I want to keep just one 645 and corresponding value as 10."}], "tags": [], "owner": {"reputation": 338, "user_id": 8610165, "user_type": "registered", "profile_image": "https://graph.facebook.com/10213011178861480/picture?type=large", "display_name": "Connor John", "link": "https://stackoverflow.com/users/8610165/connor-john"}, "is_accepted": false, "score": 1, "last_activity_date": 1520461390, "creation_date": 1520461390, "answer_id": 49162194, "question_id": 49162051, "link": "https://stackoverflow.com/questions/49162051/i-have-two-columns-in-a-pandas-dataframe-one-column-has-some-same-values-id-a/49162194#49162194", "title": "I have two columns in a pandas dataframe. One column has some same values (id) and corresponding values in another column has Number of tickets", "body": "<p>Try using:</p>\n\n<pre><code>df_tickets = df_tickets.groupby(df_tickets['id']).sum()\n</code></pre>\n\n<p>This should work.</p>\n"}, {"comments": [{"owner": {"reputation": 99, "user_id": 9199406, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1685998854776515/picture?type=large", "display_name": "Abhinandan Singh", "link": "https://stackoverflow.com/users/9199406/abhinandan-singh"}, "edited": false, "score": 1, "creation_date": 1520464071, "post_id": 49162425, "comment_id": 85331173, "body": "I have a big data set. Even after applying the above code, I am not able to drop the dplicates. Here is the result: 465654  645          4 755874  645          6. Here 465654 and 755874 are indexes and I wanr ro keep just one 645 and corresponding value as 10"}], "tags": [], "owner": {"reputation": 16194, "user_id": 667883, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a39234ae82a5898cba1d70b5bff80ec3?s=128&d=identicon&r=PG", "display_name": "Allen", "link": "https://stackoverflow.com/users/667883/allen"}, "is_accepted": true, "score": 1, "last_activity_date": 1520464760, "last_edit_date": 1520464760, "creation_date": 1520462473, "answer_id": 49162425, "question_id": 49162051, "link": "https://stackoverflow.com/questions/49162051/i-have-two-columns-in-a-pandas-dataframe-one-column-has-some-same-values-id-a/49162425#49162425", "title": "I have two columns in a pandas dataframe. One column has some same values (id) and corresponding values in another column has Number of tickets", "body": "<p>You only need to group by 'id':</p>\n\n<pre><code>df.groupby('id',sort=False).sum().reset_index()\nOut[60]: \n        id  n_tickets\n0  1586391          2\n1      640          3\n2  1181593          2\n3   964842          1\n4      780          2\n</code></pre>\n\n<p>when i use the above code:</p>\n\n<pre><code>df_tickets.groupby('id',sort=False).sum().reset_index()\n\n    print(df_tickets.loc[df_tickets['id'] == 780])\n</code></pre>\n\n<p>I get this:</p>\n\n<pre><code>         id     n_tickets\n425166  780          1\n985855  780          1\n</code></pre>\n\n<p>Instead I should get:</p>\n\n<pre><code>    id    n_tickets\n 425166  780      2\n</code></pre>\n"}], "owner": {"reputation": 99, "user_id": 9199406, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1685998854776515/picture?type=large", "display_name": "Abhinandan Singh", "link": "https://stackoverflow.com/users/9199406/abhinandan-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 49162425, "answer_count": 2, "score": 1, "last_activity_date": 1520468150, "creation_date": 1520460727, "last_edit_date": 1520468150, "question_id": 49162051, "link": "https://stackoverflow.com/questions/49162051/i-have-two-columns-in-a-pandas-dataframe-one-column-has-some-same-values-id-a", "title": "I have two columns in a pandas dataframe. One column has some same values (id) and corresponding values in another column has Number of tickets", "body": "<pre><code>   id         n_tickets\n0  1586391          2\n1   640             2\n2   640             1\n3  1181593          2\n4   964842          1\n5    780            1\n6    780            1  \n</code></pre>\n\n<p>I have the above data frame. As you can see that in id column 640 and 780 have occurred two times. I want that just a single occurrence remains but there corresponding values in column n_tickets gets added up. My final dataframe should look like this: </p>\n\n<pre><code>     id         n_tickets\n0  1586391          2\n1   640             3\n2  1181593          2\n3   964842          1\n4    780            2 \n</code></pre>\n\n<p>I am using the code: <code>df_tickets.groupby(['id','n_tickets']).sum()</code>but I am gettting the error:</p>\n\n<pre><code>Empty DataFrame\nColumns: []\nIndex: []\n</code></pre>\n\n<p>when i use the below code:</p>\n\n<pre><code>df_tickets.groupby('id',sort=False).sum().reset_index()\n\nprint(df_tickets.loc[df_tickets['id'] == 780])\n</code></pre>\n\n<p>I get this:</p>\n\n<pre><code>        id     n_tickets\n425166  780          1\n985855  780          1\n</code></pre>\n\n<p>Instead I should get:</p>\n\n<pre><code>           id    n_tickets\n   425166  780      2\n</code></pre>\n"}, {"tags": ["python", "encoding", "simplejson"], "comments": [{"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "edited": false, "score": 0, "creation_date": 1520514218, "post_id": 49162044, "comment_id": 85352431, "body": "Please reduce your program to the shortest possible <b>complete</b> program that demonstrates the error. See <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> for more information."}, {"owner": {"reputation": 831, "user_id": 862907, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/b7c68989f3a0b631567c252f86d9fc67?s=128&d=identicon&r=PG", "display_name": "nidkil", "link": "https://stackoverflow.com/users/862907/nidkil"}, "reply_to_user": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "edited": false, "score": 0, "creation_date": 1520593564, "post_id": 49162044, "comment_id": 85389542, "body": "Simplified the code example and added an example of the json data that is written to the file."}], "answers": [{"comments": [{"owner": {"reputation": 831, "user_id": 862907, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/b7c68989f3a0b631567c252f86d9fc67?s=128&d=identicon&r=PG", "display_name": "nidkil", "link": "https://stackoverflow.com/users/862907/nidkil"}, "edited": false, "score": 0, "creation_date": 1520507827, "post_id": 49162414, "comment_id": 85348475, "body": "Hi Rob, thanks for the quick response. I tried your approach. Using default doesn&#39;t work and nether does cls :-( I have updated my original question to reflect what I have tried.Would you mind double checking that I haven&#39;t done something stupid? Thx."}, {"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "reply_to_user": {"reputation": 831, "user_id": 862907, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/b7c68989f3a0b631567c252f86d9fc67?s=128&d=identicon&r=PG", "display_name": "nidkil", "link": "https://stackoverflow.com/users/862907/nidkil"}, "edited": false, "score": 0, "creation_date": 1520514965, "post_id": 49162414, "comment_id": 85352926, "body": "There is one obvious possibility that I&#39;ve overlooked -- your data. The <code>default()</code> function is only invoked when the JSON encoder encounters a type that it cannot serialize on its own. It is possible that there is no such value in your data."}, {"owner": {"reputation": 831, "user_id": 862907, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/b7c68989f3a0b631567c252f86d9fc67?s=128&d=identicon&r=PG", "display_name": "nidkil", "link": "https://stackoverflow.com/users/862907/nidkil"}, "edited": false, "score": 0, "creation_date": 1520593161, "post_id": 49162414, "comment_id": 85389324, "body": "I don&#39;t think that is the problem. The data contains multiple floats. I have also set a breakpoint in the function and it never reaches it. I have added an example of the json data."}, {"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "reply_to_user": {"reputation": 831, "user_id": 862907, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/b7c68989f3a0b631567c252f86d9fc67?s=128&d=identicon&r=PG", "display_name": "nidkil", "link": "https://stackoverflow.com/users/862907/nidkil"}, "edited": false, "score": 0, "creation_date": 1520604525, "post_id": 49162414, "comment_id": 85395906, "body": "<code>float</code> is a supported type in JSON, so the standard JSONEncoder handles them internally. Given your example dataset, I wouldn&#39;t expect  your <code>default()</code> function to ever be invoked."}, {"owner": {"reputation": 831, "user_id": 862907, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/b7c68989f3a0b631567c252f86d9fc67?s=128&d=identicon&r=PG", "display_name": "nidkil", "link": "https://stackoverflow.com/users/862907/nidkil"}, "edited": false, "score": 0, "creation_date": 1520713127, "post_id": 49162414, "comment_id": 85431675, "body": "I added an example of the data. I do not understand why the code would not be called. Aren&#39;t the named parameters default and cls overruling the default JSONEncoder implementation?"}, {"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "reply_to_user": {"reputation": 831, "user_id": 862907, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/b7c68989f3a0b631567c252f86d9fc67?s=128&d=identicon&r=PG", "display_name": "nidkil", "link": "https://stackoverflow.com/users/862907/nidkil"}, "edited": false, "score": 0, "creation_date": 1520729722, "post_id": 49162414, "comment_id": 85435280, "body": "@nidkil - No. Those do not override the default JSONEncoder implementation. <code>.default()</code> is only invoked when JSONEncoder finds an unknown type."}, {"owner": {"reputation": 831, "user_id": 862907, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/b7c68989f3a0b631567c252f86d9fc67?s=128&d=identicon&r=PG", "display_name": "nidkil", "link": "https://stackoverflow.com/users/862907/nidkil"}, "edited": false, "score": 0, "creation_date": 1520844339, "post_id": 49162414, "comment_id": 85465566, "body": "Hmmmm, I should have figured that out myself :-) Thx for the help Rob!"}], "tags": [], "owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "is_accepted": false, "score": 3, "last_activity_date": 1520463051, "last_edit_date": 1520463051, "creation_date": 1520462417, "answer_id": 49162414, "question_id": 49162044, "link": "https://stackoverflow.com/questions/49162044/setting-simplejson-jsonencoder-default-not-working/49162414#49162414", "title": "Setting simplejson.JSONEncoder.default not working", "body": "<p>Don't override the <code>default</code> encoder function by monkey-patching the <code>JSONEncoder</code> class. As you've seen, that won't have any effect. Instead, pass an appropriate function to <code>dump()</code> or <code>dumps()</code>.</p>\n\n<p>Here is a demonstration:</p>\n\n<pre><code>import simplejson\n\nclass C:\n    def __init__(self, item):\n        self.item = item\n\ndef json_encoder(obj):\n    print(\"WooWoo! Called!\", obj)\n    if isinstance(obj, C):\n        return obj.item\n    raise TypeError(repr(obj) + \" is not JSON serializable\")\n\n\nwith open('save.json', 'w') as outfile:\n    outfile.write(simplejson.dumps([1,C(47),C('orange'),4], default=json_encoder))\n</code></pre>\n\n<p>A deprecated alternative is to subclass <code>JSONEncoder</code> and pass the resulting class to <code>dumps()</code> via the  <code>cls</code> parameter.</p>\n\n<pre><code>import simplejson\n\nclass C:\n    def __init__(self, item):\n        self.item = item\n\nclass json_encoder(simplejson.JSONEncoder):\n    def default(self, obj):\n        print(\"WooWoo! Called!\", obj)\n        if isinstance(obj, C):\n            return obj.item\n        raise TypeError(repr(obj) + \" is not JSON serializable\")\n\nwith open('save.json', 'w') as outfile:\n    outfile.write(simplejson.dumps([1,C(47),C('orange'),4], cls=json_encoder))\n</code></pre>\n"}], "owner": {"reputation": 831, "user_id": 862907, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/b7c68989f3a0b631567c252f86d9fc67?s=128&d=identicon&r=PG", "display_name": "nidkil", "link": "https://stackoverflow.com/users/862907/nidkil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 865, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1520713041, "creation_date": 1520460670, "last_edit_date": 1520713041, "question_id": 49162044, "link": "https://stackoverflow.com/questions/49162044/setting-simplejson-jsonencoder-default-not-working", "title": "Setting simplejson.JSONEncoder.default not working", "body": "<p>I'm trying to overrule the default encoder of simplejson. I have tried two approaches.</p>\n\n<p>Using cls:</p>\n\n<pre><code>class ExtendedJSONEncoder(simplejson.JSONEncoder):\n\n    def default(self, obj):\n        if isinstance(obj, float):\n            return '{0:.8f}'.format(obj)\n        return super(ExtendedJSONEncoder, self).default(obj)\n\ndef save_signal(self, signal):\n    with open('test.json', 'w') as outfile:\n        outfile.write(simplejson.dumps(signal, cls=ExtendedJSONEncoder))\n</code></pre>\n\n<p>Using default:</p>\n\n<pre><code>def extended_JSONEncoder(obj):\n    if isinstance(obj, float):\n        return '{0:.8f}'.format(obj)\n    return simplejson.JSONEncoder.default(obj)\n\ndef save_signal(self, signal):\n    with open('test.json', 'w') as outfile:\n                outfile.write(simplejson.dumps(signal, default=extended_JSONEncoder))\n</code></pre>\n\n<p>In both cases the extended JSONEncoder is not called.</p>\n\n<p>This is an example of the data that I'm processing.</p>\n\n<pre><code>signal = {\n    'pair': 'BTC-XRP',\n    'term': None,\n    'exchange': None,\n    'entry_min': 8.5e-05,\n    'entry_max': None,\n    'stop_loss': None,\n    'targets': [9.4e-05, 0.000105, 0.000118],\n    'risk': 'medium',\n    'strategy': 'targets',\n    'enabled': True,\n    'test_mode': False,\n    'msg_id': 214,\n    'msg_timestamp': '2018-03-05 20:01:52',\n    'channel_id': '1234',\n    'channel_name': 'realtime_sig'\n}\n</code></pre>\n\n<p>Can anyone help me solve this maddening problem?</p>\n"}, {"tags": ["python", "import", "importerror"], "answers": [{"comments": [{"owner": {"reputation": 3286, "user_id": 7619676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a7e32a3b0f08448f8e6099681622dd8?s=128&d=identicon&r=PG&f=1", "display_name": "ZaxR", "link": "https://stackoverflow.com/users/7619676/zaxr"}, "edited": false, "score": 0, "creation_date": 1520461156, "post_id": 49162105, "comment_id": 85329986, "body": "Thanks for the response. My follow up then is where should constants like this live? <code>__init__.py</code> also has a bunch of other constants imported from environment variables, and I&#39;d like all the &quot;set-up&quot; stuff to live together if possible."}, {"owner": {"reputation": 761, "user_id": 1132603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e119a6578046f5bd108773919d8f2904?s=128&d=identicon&r=PG", "display_name": "Totoro", "link": "https://stackoverflow.com/users/1132603/totoro"}, "reply_to_user": {"reputation": 3286, "user_id": 7619676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a7e32a3b0f08448f8e6099681622dd8?s=128&d=identicon&r=PG&f=1", "display_name": "ZaxR", "link": "https://stackoverflow.com/users/7619676/zaxr"}, "edited": false, "score": 0, "creation_date": 1520461294, "post_id": 49162105, "comment_id": 85330057, "body": "create a settings.py or constants.py file and put them there, and try to avoid any imports in that file unless it is a standard library import to avoid any potential circular reference on imports."}, {"owner": {"reputation": 3286, "user_id": 7619676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a7e32a3b0f08448f8e6099681622dd8?s=128&d=identicon&r=PG&f=1", "display_name": "ZaxR", "link": "https://stackoverflow.com/users/7619676/zaxr"}, "edited": false, "score": 0, "creation_date": 1520462139, "post_id": 49162105, "comment_id": 85330415, "body": "Thanks. I ended up moving it to <code>base_config.py</code> and it&#39;s working fine. Per your recommendation, do you usually put that settings.py file in the config folder? Or somewhere else?"}, {"owner": {"reputation": 761, "user_id": 1132603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e119a6578046f5bd108773919d8f2904?s=128&d=identicon&r=PG", "display_name": "Totoro", "link": "https://stackoverflow.com/users/1132603/totoro"}, "reply_to_user": {"reputation": 3286, "user_id": 7619676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a7e32a3b0f08448f8e6099681622dd8?s=128&d=identicon&r=PG&f=1", "display_name": "ZaxR", "link": "https://stackoverflow.com/users/7619676/zaxr"}, "edited": false, "score": 0, "creation_date": 1520462392, "post_id": 49162105, "comment_id": 85330532, "body": "I usually put constants in a settings.py file but there are many ways.  There are also nice libraries like openstack oslo.config that handle configuration plus argument parsing.  One thing to remember is that anything you put in <code>__init__.py</code> is loaded whenever you import any module in that package so you need to be careful what you put there and try to keep it short."}], "tags": [], "owner": {"reputation": 761, "user_id": 1132603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e119a6578046f5bd108773919d8f2904?s=128&d=identicon&r=PG", "display_name": "Totoro", "link": "https://stackoverflow.com/users/1132603/totoro"}, "is_accepted": true, "score": 2, "last_activity_date": 1520462845, "last_edit_date": 1520462845, "creation_date": 1520461024, "answer_id": 49162105, "question_id": 49162032, "link": "https://stackoverflow.com/questions/49162032/python-importerror-cannot-import-name-issue/49162105#49162105", "title": "Python &quot;ImportError: cannot import name&quot; issue", "body": "<p>I would say get that variable BUCKET to a different python file or a settings.py if it is a settings or constant as you are incurring in circular imports because of it.</p>\n\n<p><strong>Update from comments:</strong></p>\n\n<p>Create a <code>settings.py</code> or <code>constants.py</code> file and put the settings/constants there, and try to avoid any imports in <code>__init__.py</code> unless it is a standard library import to avoid any potential circular reference on imports.</p>\n\n<p>One thing to remember is that anything you put in <code>__init__.py</code> is loaded whenever you import any module in that package so you need to be careful what you put there and try to keep it short.</p>\n"}, {"tags": [], "owner": {"reputation": 113, "user_id": 10386713, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-L_Fde2fqYTQ/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaPvLC5w5632hjE3Or7TYO8BNAu9jw/mo/photo.jpg?sz=128", "display_name": "Al Martins", "link": "https://stackoverflow.com/users/10386713/al-martins"}, "is_accepted": false, "score": 0, "last_activity_date": 1598349309, "last_edit_date": 1598349309, "creation_date": 1598348968, "answer_id": 63576244, "question_id": 49162032, "link": "https://stackoverflow.com/questions/49162032/python-importerror-cannot-import-name-issue/63576244#63576244", "title": "Python &quot;ImportError: cannot import name&quot; issue", "body": "<p>I also got that error message using Python 3.7 on pythonanywhere. Turns out that I had uploaded the source module twice, one of them on my user folder. Modules should only be placed on the project folder.</p>\n"}], "owner": {"reputation": 3286, "user_id": 7619676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a7e32a3b0f08448f8e6099681622dd8?s=128&d=identicon&r=PG&f=1", "display_name": "ZaxR", "link": "https://stackoverflow.com/users/7619676/zaxr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11075, "favorite_count": 0, "accepted_answer_id": 49162105, "answer_count": 2, "score": 1, "last_activity_date": 1598349309, "creation_date": 1520460632, "question_id": 49162032, "link": "https://stackoverflow.com/questions/49162032/python-importerror-cannot-import-name-issue", "title": "Python &quot;ImportError: cannot import name&quot; issue", "body": "<p>I'm having trouble importing a variable from my <code>config/__init__.py</code> file.</p>\n\n<p>My directory looks like:</p>\n\n<pre><code>.\n\u251c\u2500\u2500 src\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 config\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 __init__.py\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 base_config.py\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 log_config.py\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 output_config.py\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 script.py\n</code></pre>\n\n<p>In <code>__init__.py</code> I have <code>from config.output_config import output_data</code>. This file also contains a line <code>BUCKET = ...</code></p>\n\n<p>In my <code>output_config.py</code> file I have <code>from config import BUCKET</code>, which is them used in the function <code>output_data()</code>.</p>\n\n<p>In <code>script.py</code> I have <code>import config</code> and a call to <code>config.output_data()</code></p>\n\n<p>When I run script.py, I get the following error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \".../src/config/output_config.py\", line 15, in &lt;module&gt;\n    from config import BUCKET\n  File \".../src/config/__init__.py\", line 7, in &lt;module&gt;\n    from config.output_config import output_data\n  File \".../src/config/output_config.py\", line 15, in &lt;module&gt;\n    from config import BUCKET\nImportError: cannot import name 'BUCKET'\n</code></pre>\n\n<p>It seems like my issue is probably polluting the name space (..and making a circular reference..?), but I'm not sure how to resolve the issue. It's my understanding that the <code>__init__.py</code> file is best used to import other config files, but then I'm not sure how to get my variable <code>BUCKET</code> into the <code>output_config.py</code> file where I need it. Would appreciate help resolving the issue and understanding best practices for structuring projects as it relates to importing.  Thanks!</p>\n"}, {"tags": ["python", "list", "dictionary", "replace"], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 5848930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c8d55b6b07c0e2370d0c9194d68deb2?s=128&d=identicon&r=PG&f=1", "display_name": "P. May", "link": "https://stackoverflow.com/users/5848930/p-may"}, "edited": false, "score": 0, "creation_date": 1520461351, "post_id": 49162073, "comment_id": 85330081, "body": "This seems good but I need it to keep going if there is &quot;b (x)&quot; in list b and so on.. What I posted what just an example"}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "reply_to_user": {"reputation": 95, "user_id": 5848930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c8d55b6b07c0e2370d0c9194d68deb2?s=128&d=identicon&r=PG&f=1", "display_name": "P. May", "link": "https://stackoverflow.com/users/5848930/p-may"}, "edited": false, "score": 0, "creation_date": 1520461502, "post_id": 49162073, "comment_id": 85330149, "body": "This will still work if you had &quot;b (x)&quot; in list <code>b</code>."}], "tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": true, "score": 4, "last_activity_date": 1520460851, "creation_date": 1520460851, "answer_id": 49162073, "question_id": 49162010, "link": "https://stackoverflow.com/questions/49162010/how-to-replace-element-in-list-in-python/49162073#49162073", "title": "How to replace element in list in python", "body": "<p>This is one way. First create a dictionary mapping, then apply it in a list comprehension.</p>\n\n<pre><code>a = [\"a\", \"b\"]\nb = [\"a (x)\"]\n\nb_dict = {v.split(' ')[0]: v for v in b}\n\na = [b_dict.get(i, i) for i in a]\n\n# ['a (x)', 'b']\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 5848930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c8d55b6b07c0e2370d0c9194d68deb2?s=128&d=identicon&r=PG&f=1", "display_name": "P. May", "link": "https://stackoverflow.com/users/5848930/p-may"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 424, "favorite_count": 0, "accepted_answer_id": 49162073, "answer_count": 1, "score": 0, "last_activity_date": 1531156929, "creation_date": 1520460558, "last_edit_date": 1531156929, "question_id": 49162010, "link": "https://stackoverflow.com/questions/49162010/how-to-replace-element-in-list-in-python", "title": "How to replace element in list in python", "body": "<p>I have two <code>list</code> variables:</p>\n\n<pre><code>a = [\"a\", \"b\"]\nb = [\"a (x)\"]\n</code></pre>\n\n<p>I need to find and replace all elements in list <code>a</code> with elements from list <code>b</code> where substring of element before  <code>(</code> from list <code>b</code> is equal to element from list <code>a</code>. So I need to get this:</p>\n\n<pre><code>a = [\"a (x)\", \"b\"]\nb = [\"a (x)\"]\n</code></pre>\n\n<p>It is a bit complicated to exlplain, but I hope you understand.</p>\n\n<p>This is what I have so far, but I don't know how to continue.</p>\n\n<pre><code>for bx in b:\n    for ax in a:\n        if ax == bx[:bx.find(\" (\")]:\n            #I don't know what to do next\n</code></pre>\n\n<p>Do you have some ideas, please?</p>\n"}, {"tags": ["python"], "answers": [{"comments": [{"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "reply_to_user": {"reputation": 45, "user_id": 9459158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c200785fac7ddd371c12fc17ed1c2ed1?s=128&d=identicon&r=PG&f=1", "display_name": "yoman", "link": "https://stackoverflow.com/users/9459158/yoman"}, "edited": false, "score": 0, "creation_date": 1520460811, "post_id": 49162009, "comment_id": 85329850, "body": "Glad to have been of help! Feel free to <a href=\"http://meta.stackexchange.com/questions/5234/how-does-accepting-an-answer-work\">accept my answer</a> if you feel it was useful to you. :-) (You&#39;ll have to wait until your question is at least 15 minutes old however)."}], "tags": [], "owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "is_accepted": false, "score": 3, "last_activity_date": 1520460557, "creation_date": 1520460557, "answer_id": 49162009, "question_id": 49161977, "link": "https://stackoverflow.com/questions/49161977/how-to-loop-a-range-with-python/49162009#49162009", "title": "How to loop a range with python", "body": "<p>You'll need to swap your variables if <code>int2</code> is smaller than <code>int1</code>:</p>\n\n<pre><code>def sum_range(int1, int2):\n    if int1 &gt; int2:\n        int2, int1 = int1, int2\n    count = 0\n    for i in range(int1, int2 + 1):\n         count = count + i\n    return count\n</code></pre>\n\n<p>You don't really need to use a loop here, if you passed your <code>range()</code> to the <a href=\"https://docs.python.org/3/library/functions.html#sum\" rel=\"nofollow noreferrer\"><code>sum()</code> function</a>, then you can leave the looping and summing to that function:</p>\n\n<pre><code>def sum_range(int1, int2):\n    if int1 &gt; int2:\n        int2, int1 = int1, int2\n    return sum(range(int1, int2 + 1))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "is_accepted": false, "score": 0, "last_activity_date": 1520460611, "creation_date": 1520460611, "answer_id": 49162027, "question_id": 49161977, "link": "https://stackoverflow.com/questions/49161977/how-to-loop-a-range-with-python/49162027#49162027", "title": "How to loop a range with python", "body": "<p><code>range</code> counts from the first parameter <em>up to</em> (but not including) the second, which means the range is <em>empty</em> if the first is no smaller than the second.</p>\n"}, {"comments": [{"owner": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "edited": false, "score": 0, "creation_date": 1520461307, "post_id": 49162028, "comment_id": 85330068, "body": "Code only answers are not as helpful as those which explain: 1) Why the OPs code doesn&#39;t work and 2) Why yours does."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1520461433, "post_id": 49162028, "comment_id": 85330123, "body": "or <code>return abs((num1 * (num1 + 1) &#47;&#47; 2) - (num2 * (num2 + 1) &#47;&#47; 2))</code>"}], "tags": [], "owner": {"reputation": 4102, "user_id": 7908770, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/01c6edec3c808659a8e8f42d4259a4b3?s=128&d=identicon&r=PG&f=1", "display_name": "Adi219", "link": "https://stackoverflow.com/users/7908770/adi219"}, "is_accepted": false, "score": 1, "last_activity_date": 1520461809, "last_edit_date": 1520461809, "creation_date": 1520460613, "answer_id": 49162028, "question_id": 49161977, "link": "https://stackoverflow.com/questions/49161977/how-to-loop-a-range-with-python/49162028#49162028", "title": "How to loop a range with python", "body": "<p>Using loops:</p>\n\n<pre><code>def sum_range(num1, num2):\n    sum = 0\n    for i in range(min(num1, num2), max(num1, num2) + 1):\n        sum += i\n    return sum\n</code></pre>\n\n<p>Note: You could also do:</p>\n\n<pre><code>def sum_range(num1, num2):\n    return abs((num1 * (num1 + 1) / 2) - (num2 * (num + 1) / 2))\n## This works as you're essentially asking for the difference between two triangular numbers\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3311, "user_id": 6147374, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d05b5955de351d18e1c8d715f97f0be2?s=128&d=identicon&r=PG&f=1", "display_name": "Ibo", "link": "https://stackoverflow.com/users/6147374/ibo"}, "is_accepted": false, "score": 0, "last_activity_date": 1520468101, "creation_date": 1520468101, "answer_id": 49163394, "question_id": 49161977, "link": "https://stackoverflow.com/questions/49161977/how-to-loop-a-range-with-python/49163394#49163394", "title": "How to loop a range with python", "body": "<p>You don't really need to use the loop:</p>\n\n<pre><code>def sum_range(int1, int2):\n    if int1 &gt; int2:\n        int2, int1 = int1, int2\n    return sum(list(range(int1,int2+1)))\n</code></pre>\n\n<p><strong>Example:</strong></p>\n\n<pre><code>result = sum_range(4, 2)\nprint(result)\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>9\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 9459158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c200785fac7ddd371c12fc17ed1c2ed1?s=128&d=identicon&r=PG&f=1", "display_name": "yoman", "link": "https://stackoverflow.com/users/9459158/yoman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "answer_count": 4, "score": 2, "last_activity_date": 1520468101, "creation_date": 1520460405, "last_edit_date": 1520460506, "question_id": 49161977, "link": "https://stackoverflow.com/questions/49161977/how-to-loop-a-range-with-python", "title": "How to loop a range with python", "body": "<p>This is my question:\nI have to write a function that accepts 2 integer values as parameters and returns the sum of all the integers between the two values, including the first and last values. The parameters may be in any order (i.e. the second parameter may be smaller than the first).</p>\n\n<p>This is the example of the result:</p>\n\n<p><img src=\"https://i.stack.imgur.com/vvxSN.png\" alt=\"screenshot\"></p>\n\n<p>This is what I've tried:</p>\n\n<pre><code>def sum_range(int1,int2):\n    count = 0\n    for i in range(int1,int2+1):\n         count = count + i\n    return count\n</code></pre>\n\n<p>but for this example:</p>\n\n<pre><code>result = sum_range(3, 2)\n\nprint(result)\n</code></pre>\n\n<p>I got the wrong result, can anyone help?</p>\n"}, {"tags": ["python", "django", "exception", "django-templates", "django-views"], "answers": [{"tags": [], "owner": {"reputation": 250720, "user_id": 113962, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b80ae1d65878cf68a4b1a00848467527?s=128&d=identicon&r=PG", "display_name": "Alasdair", "link": "https://stackoverflow.com/users/113962/alasdair"}, "is_accepted": true, "score": 3, "last_activity_date": 1520460085, "creation_date": 1520460085, "answer_id": 49161922, "question_id": 49161895, "link": "https://stackoverflow.com/questions/49161895/noreversematch-at-posts/49161922#49161922", "title": "NoReverseMatch at /posts/", "body": "<p>In your template you have:</p>\n\n<pre><code>{% url 'my_blog:post' post.id %}\n</code></pre>\n\n<p>This gives an error because you have not yet defined a URL pattern in <code>my_blog/urls.py</code> with <code>name=\"post\"</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 57, "user_id": 6307539, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/30a97b4d6623d4b2df541358e3c0fb28?s=128&d=identicon&r=PG&f=1", "display_name": "Maximus Gebo", "link": "https://stackoverflow.com/users/6307539/maximus-gebo"}, "edited": false, "score": 0, "creation_date": 1520461744, "post_id": 49162151, "comment_id": 85330239, "body": "Thanks @Alan , I did as you advised and now I have this:Reverse for &#39;posts&#39; with arguments &#39;(1,)&#39; not found. 1 pattern(s) tried: [&#39;posts/$&#39;]"}], "tags": [], "owner": {"reputation": 1257, "user_id": 4637583, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/532a2d09f5168f19818a1e8cf2ebaabd?s=128&d=identicon&r=PG&f=1", "display_name": "Alan Hoover", "link": "https://stackoverflow.com/users/4637583/alan-hoover"}, "is_accepted": false, "score": 1, "last_activity_date": 1520483116, "last_edit_date": 1520483116, "creation_date": 1520461219, "answer_id": 49162151, "question_id": 49161895, "link": "https://stackoverflow.com/questions/49161895/noreversematch-at-posts/49162151#49162151", "title": "NoReverseMatch at /posts/", "body": "<p>The view name that you are looking up in your template does not match the name defined in your urls.py.  You need to make</p>\n\n<p><strong>urls.py</strong></p>\n\n<pre><code>    url(r'^posts/$', views.posts, name='posts'),\n</code></pre>\n\n<p>and \n<strong>posts.html</strong></p>\n\n<pre><code>&lt;li&gt;&lt;a href=\"{%url 'my_blog:post' post.id%}\"&gt;{{post}}&lt;/a&gt; &lt;/li&gt;\n</code></pre>\n\n<p>match by either adding an <code>s</code> in <code>posts,html</code> or remove the <code>s</code> in <code>urls.py</code></p>\n\n<p><strong>Edit</strong></p>\n\n<p>Looking a little deeper... You need to define your detail view (<code>post</code> with a parameter) in <code>views.py</code>.  And add a corresponding entry in <code>urls.py</code>  Then undo the change I recommended earlier.</p>\n\n<p>You should also consider renaming your views from <code>posts</code> and <code>post</code> to something like <code>post_list</code> and <code>post_detail</code></p>\n"}], "owner": {"reputation": 57, "user_id": 6307539, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/30a97b4d6623d4b2df541358e3c0fb28?s=128&d=identicon&r=PG&f=1", "display_name": "Maximus Gebo", "link": "https://stackoverflow.com/users/6307539/maximus-gebo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 493, "favorite_count": 0, "accepted_answer_id": 49161922, "answer_count": 2, "score": 0, "last_activity_date": 1520483116, "creation_date": 1520459902, "question_id": 49161895, "link": "https://stackoverflow.com/questions/49161895/noreversematch-at-posts", "title": "NoReverseMatch at /posts/", "body": "<p>Just quick info I'm a beginner in python and django.</p>\n\n<p>Here is an issue:</p>\n\n<p>I'm trying to create simple blog app with django, I've created all whats needed and I'm able to render one of my main pages however when I try to access posts page(to be able to view current posts) I receive the following error:</p>\n\n<pre><code>Request Method: GET\nRequest URL:    http://localhost:8000/posts/\nDjango Version: 2.0.2\nException Type: NoReverseMatch\nException Value:    \nReverse for 'post' not found. 'post' is not a valid view function or pattern name.\n</code></pre>\n\n<p>I'm not sure why I receive this error as I have posts view function written and accessible, here are my files:</p>\n\n<p><strong>my_blog/urls.py</strong></p>\n\n<pre><code>\"\"\"Defines URL patterns for my_blog.\"\"\"\n\nfrom django.conf.urls import  url\n\nfrom . import views\n\n#needed app name\napp_name='my_blog'\nurlpatterns=[\n    #Homepage\n    url(r'^$',views.home,name='home'),\n    # Show all posts.\n    url(r'^posts/$', views.posts, name='posts'),\n</code></pre>\n\n<p><strong>models.py</strong></p>\n\n<pre><code>from django.db import models\n\n# Create your models here.\n\nclass BlogPost(models.Model):\n    \"\"\"Post that can be viewed\"\"\"\n    title=models.CharField(max_length=200)\n    text=models.TextField()\n    date_added=models.DateTimeField(auto_now_add=True)\n\n    def __str__(self):\n        \"\"\"Return a string representation of the model.\"\"\"\n        if len(self.text)&lt;50:\n            return self.text\n        else:\n            return self.text[:50] + \"...\"\n</code></pre>\n\n<p><strong>views.py</strong></p>\n\n<pre><code>from django.shortcuts import render\nfrom .models import BlogPost\nfrom django.http import HttpResponseRedirect\n\n\n\n# Create your views here.\n\ndef home(request):\n    \"\"\"The home page for Learning Log\"\"\"\n    return render(request,'my_blog/home.html')\n\n\ndef posts (request):\n    \"\"\"Show all posts.\"\"\"\n    posts=BlogPost.objects.order_by('date_added')\n    context={'posts':posts}\n    return  render(request, 'my_blog/posts.html', context)\n</code></pre>\n\n<p><em>HTML pages:</em></p>\n\n<p><strong>home.html</strong></p>\n\n<pre><code>{%extends \"my_blog/base.html\"%}\n\n{%block content%}\n&lt;html&gt;\n&lt;p align=\"center\"&gt;Welcome to my Blog&lt;/p&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n\n{%endblock content%}\n</code></pre>\n\n<p><strong>base.html</strong></p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=\"en\"&gt;\n\n&lt;head&gt;\n    &lt;meta charset=\"UTF-8\"&gt;\n    &lt;title&gt;My Blog&lt;/title&gt;\n&lt;/head&gt;\n&lt;body bgcolor=\"#85C1E9\"&gt;\n&lt;p&gt;\n    &lt;a href=\"{%url 'my_blog:home'%}\"&gt;Home&lt;/a&gt; -\n    &lt;a href=\"{%url 'my_blog:posts'%}\"&gt;Posts&lt;/a&gt;\n&lt;/p&gt;\n\n{%block content%}{%endblock content%}\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p><strong>posts.html</strong></p>\n\n<pre><code>{%extends \"my_blog/base.html\"%}\n\n\n{%block content%}\n\n&lt;p&gt;Posts&lt;/p&gt;\n\n&lt;ul&gt;\n    {%for post in posts%}\n    &lt;li&gt;&lt;a href=\"{%url 'my_blog:post' post.id%}\"&gt;{{post}}&lt;/a&gt; &lt;/li&gt;\n    {%empty%}\n        &lt;li&gt;No posts have been added yet.&lt;/li&gt;\n    {%endfor%}\n&lt;/ul&gt;\n{%endblock content%}\n</code></pre>\n\n<p>Thanks in advance for assistance</p>\n"}, {"tags": ["python", "pydev"], "owner": {"reputation": 11, "user_id": 9459040, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-KWHLY_0AXCI/AAAAAAAAAAI/AAAAAAAABRE/sUoTjVcLsPQ/photo.jpg?sz=128", "display_name": "Manosh Chalasani", "link": "https://stackoverflow.com/users/9459040/manosh-chalasani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1520460177, "creation_date": 1520459890, "last_edit_date": 1520460177, "question_id": 49161890, "link": "https://stackoverflow.com/questions/49161890/cannot-run-python-server-on-my-local", "title": "Cannot run python server on my local", "body": "<p>When i run python manage.py runserver, i get following error</p>\n\n<pre><code>Could not connect to 127.0.0.1: 5678\nTraceback (most recent call last):\n  File \"/Users/../../../env/lib/python2.7/site-packages/_pydevd_bundle/pydevd_comm.py\", line 488, in start_client\n    s.connect((host, port))\n  File \"/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/socket.py\", line 228, in meth\n    return getattr(self._sock,name)(*args)\nerror: [Errno 22] Invalid argument\n</code></pre>\n\n<p>my manage.py</p>\n\n<pre><code>import os\nimport sys\nimport pymysql\n\n# Uncomment if you want to debug using pydevd\nif (os.environ.get('LOCAL_ENVIRONMENT', '')):\n  import pydevd\n  pydevd.settrace(stdoutToServer=True, stderrToServer=True, suspend=False)\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "class", "oop", "initialization"], "answers": [{"comments": [{"owner": {"reputation": 3394, "user_id": 7727583, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/iVG54.jpg?s=128&g=1", "display_name": "Yannic Hamann", "link": "https://stackoverflow.com/users/7727583/yannic-hamann"}, "edited": false, "score": 0, "creation_date": 1520461804, "post_id": 49161863, "comment_id": 85330267, "body": "Would be cool if you could add the code how to instantiate the class n times as OP asked."}, {"owner": {"reputation": 87, "user_id": 7371073, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/5F7Oy.jpg?s=128&g=1", "display_name": "Holsterbau", "link": "https://stackoverflow.com/users/7371073/holsterbau"}, "edited": false, "score": 0, "creation_date": 1520463798, "post_id": 49161863, "comment_id": 85331057, "body": "The dicts are a very good answer, but I am not very familiar with list comprehensions. What exactly is happening there? I am testing around with code as you have illustrated, and I keep getting <code>ValueError: too many values to unpack (expected 2)</code> and so on."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "reply_to_user": {"reputation": 87, "user_id": 7371073, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/5F7Oy.jpg?s=128&g=1", "display_name": "Holsterbau", "link": "https://stackoverflow.com/users/7371073/holsterbau"}, "edited": false, "score": 1, "creation_date": 1520495366, "post_id": 49161863, "comment_id": 85340900, "body": "@Holsterbau: a list comprehension is just an optimised <code>list.append()</code> loop. So for each iteration, the result of <code>class_map[name](argument)</code> is appended, and the iterations come from <code>for name, argument in xlists</code>. Your error is on the <code>for</code> loop side, which requires all elements in <code>xlists</code> to be a sequence of two values (so your lists in your question, or tuples, or something else that can produce 2 values), the error indicates that at least one element in the <code>xlists</code> list has only a single element."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "reply_to_user": {"reputation": 87, "user_id": 7371073, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/5F7Oy.jpg?s=128&g=1", "display_name": "Holsterbau", "link": "https://stackoverflow.com/users/7371073/holsterbau"}, "edited": false, "score": 1, "creation_date": 1520495478, "post_id": 49161863, "comment_id": 85340956, "body": "@Holsterbau: see <a href=\"//stackoverflow.com/q/6475314\">Python for-in loop preceded by a variable</a> for a more comprehensive list comprehensions explanation."}], "tags": [], "owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "is_accepted": true, "score": 7, "last_activity_date": 1520460738, "last_edit_date": 1520460738, "creation_date": 1520459714, "answer_id": 49161863, "question_id": 49161846, "link": "https://stackoverflow.com/questions/49161846/more-efficient-approach-of-creating-class-instances-of-different-classes/49161863#49161863", "title": "More efficient approach of creating class instances of different classes?", "body": "<p>Use a dictionary to map string to class:</p>\n\n<pre><code>class_map = {\n    'spam': Spam,\n    'eggs': Eggs,\n    'bacon': Bacon,\n}\n\ndef classes_init(xlists):\n    classlist = [class_map[name](argument) for name, argument in xlists]\n</code></pre>\n\n<p>The class map could be created from the class names, if all the strings correspond to the lowercased name:</p>\n\n<pre><code>classes = (Spam, Eggs, Bacon)\nclass_map = {cls.__name__.lower(): cls for cls in classes}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1520460189, "post_id": 49161908, "comment_id": 85329585, "body": "I doub&#39;t <code>exec</code> is faster than using a <code>dict</code>"}], "tags": [], "owner": {"reputation": 4102, "user_id": 7908770, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/01c6edec3c808659a8e8f42d4259a4b3?s=128&d=identicon&r=PG&f=1", "display_name": "Adi219", "link": "https://stackoverflow.com/users/7908770/adi219"}, "is_accepted": false, "score": -2, "last_activity_date": 1520460314, "last_edit_date": 1520460314, "creation_date": 1520459975, "answer_id": 49161908, "question_id": 49161846, "link": "https://stackoverflow.com/questions/49161846/more-efficient-approach-of-creating-class-instances-of-different-classes/49161908#49161908", "title": "More efficient approach of creating class instances of different classes?", "body": "<p>Remove the <code>if-elif</code> structure and add this to yor code:</p>\n\n<pre><code>exec(\"classList.append(\" + xlists[0].title() + \"(number = xlists[1])\")\n</code></pre>\n\n<p>This way, less memory and less time is required than manually entering your data into a <code>dict</code>, but it can be more dangerous if <code>xlists</code> contains strings formatted as code, so make sure you clean the strings before running this code.</p>\n"}], "owner": {"reputation": 87, "user_id": 7371073, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/5F7Oy.jpg?s=128&g=1", "display_name": "Holsterbau", "link": "https://stackoverflow.com/users/7371073/holsterbau"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 49161863, "answer_count": 2, "score": 3, "last_activity_date": 1520460738, "creation_date": 1520459599, "question_id": 49161846, "link": "https://stackoverflow.com/questions/49161846/more-efficient-approach-of-creating-class-instances-of-different-classes", "title": "More efficient approach of creating class instances of different classes?", "body": "<p>Let's say we have a function <code>classes_init</code>. It takes in lists or other types of information which it uses to initialize many instances of different types of classes, such as:</p>\n\n<pre><code>[\"spam\", 24]\n[\"eggs\", 10]\n[\"bacon\", 20]\n...\n</code></pre>\n\n<p>Index 0 of those lists indicates what type of class it is supposed to be. The best way I found of initializing instances of specific classes is through something like the following:</p>\n\n<pre><code>def classes_init(xlists):\n    classlist = list()\n    if xlists[0] == \"spam\":\n        classlist.append(Spam(number=xlists[1]))\n    elif xlists[0] == \"eggs\":\n        classlist.append(Eggs(number=xlists[1]))\n    elif xlists[0] == \"bacon\":\n        classlist.append(Bacon(number=xlists[1]))\n    ... and so on ...\n</code></pre>\n\n<p>Is there a more efficient way of doing this? This is a lot of repetition, so it almost assuredly means this is a wrong approach.</p>\n"}, {"tags": ["python", "django", "visual-studio"], "comments": [{"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 5, "creation_date": 1520459586, "post_id": 49161805, "comment_id": 85329338, "body": "Sounds like Virtual Studio doesn&#39;t support Python 3.7 yet. It&#39;s still in Beta, I wouldn&#39;t expect there to be wide support just yet. Why are you using a pre-release version of Python? Why not use Python 3.6 for now?"}, {"owner": {"reputation": 89, "user_id": 4615803, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/34858f388aff761811350b27ae9a3fc0?s=128&d=identicon&r=PG&f=1", "display_name": "JCDOSAJ", "link": "https://stackoverflow.com/users/4615803/jcdosaj"}, "reply_to_user": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1520462267, "post_id": 49161805, "comment_id": 85330472, "body": "@MartijnPieters Im not sure. I am just getting into python web development. I have 3.7 working for other compilers, but with a background in C++ i am most comfortable with visual studios. Ill try 3.6 and see if that solves anything. Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 310, "user_id": 6941400, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/srsn4.jpg?s=128&g=1", "display_name": "Anshuman Kumar", "link": "https://stackoverflow.com/users/6941400/anshuman-kumar"}, "edited": false, "score": 0, "creation_date": 1578466139, "post_id": 59130077, "comment_id": 105442929, "body": "A simpler  fix might be to create  a new project with the correct version of Python if you haven&#39;t done much work."}], "tags": [], "owner": {"reputation": 507, "user_id": 5382473, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-KTdjvEbXbrc/AAAAAAAAAAI/AAAAAAAAABg/eOAttNPmvak/photo.jpg?sz=128", "display_name": "Amibest", "link": "https://stackoverflow.com/users/5382473/amibest"}, "is_accepted": false, "score": 2, "last_activity_date": 1575235030, "creation_date": 1575235030, "answer_id": 59130077, "question_id": 49161805, "link": "https://stackoverflow.com/questions/49161805/debugging-is-not-supported-for-python-2-5-or-earlier/59130077#59130077", "title": "Debugging is not supported for python 2.5 or earlier?", "body": "<p>Your version of Visual studio doesn't support your current version of Python. Try either to update your Visual Studio or change the python version in your environment configuration to a previous one (e.g 3.6).</p>\n"}, {"tags": [], "owner": {"reputation": 59, "user_id": 4913999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0c324ae6c38323160ee577b3e9a7869?s=128&d=identicon&r=PG&f=1", "display_name": "shrd", "link": "https://stackoverflow.com/users/4913999/shrd"}, "is_accepted": false, "score": 0, "last_activity_date": 1606139698, "creation_date": 1606139698, "answer_id": 64969829, "question_id": 49161805, "link": "https://stackoverflow.com/questions/49161805/debugging-is-not-supported-for-python-2-5-or-earlier/64969829#64969829", "title": "Debugging is not supported for python 2.5 or earlier?", "body": "<p>you need this :</p>\n<p><a href=\"https://i.stack.imgur.com/dAJvx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dAJvx.png\" alt=\"enter image description here\" /></a></p>\n<p>change environnement to 3.6 or 3.7 (3.8 doesn't work in VS community 2017)</p>\n"}], "owner": {"reputation": 89, "user_id": 4615803, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/34858f388aff761811350b27ae9a3fc0?s=128&d=identicon&r=PG&f=1", "display_name": "JCDOSAJ", "link": "https://stackoverflow.com/users/4615803/jcdosaj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4262, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1606139698, "creation_date": 1520459411, "question_id": 49161805, "link": "https://stackoverflow.com/questions/49161805/debugging-is-not-supported-for-python-2-5-or-earlier", "title": "Debugging is not supported for python 2.5 or earlier?", "body": "<p><a href=\"https://i.stack.imgur.com/QrpmC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QrpmC.png\" alt=\"enter image description here\"></a></p>\n\n<p>I keep getting this error in visual studios. There are currently no documentation that I can find that solves this error. Im using Pythong 3.7. Also, I get this same error when I try to debug a Django web application as well as a just regular python web application. I have also tested with Google Chrome, Internet Explorer, and Firefox, all of which give me the same error. The configuration is set up for 3.7</p>\n"}, {"tags": ["python", "pyodbc"], "comments": [{"owner": {"reputation": 7823, "user_id": 8146556, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/1503034639720733/picture?type=large", "display_name": "rahlf23", "link": "https://stackoverflow.com/users/8146556/rahlf23"}, "edited": false, "score": 0, "creation_date": 1520459583, "post_id": 49161783, "comment_id": 85329337, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/24832954/convert-a-pyodbc-row-to-a-string\">Convert a pyodbc.Row to a string</a>"}, {"owner": {"reputation": 59346, "user_id": 444036, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/My2AZ.jpg?s=128&g=1", "display_name": "Paulo Scardine", "link": "https://stackoverflow.com/users/444036/paulo-scardine"}, "edited": false, "score": 0, "creation_date": 1520461180, "post_id": 49161783, "comment_id": 85330004, "body": "Technically it is a dupe but the answer there does not answer this question so I&#39;m voting to keep it open."}], "answers": [{"comments": [{"owner": {"reputation": 97598, "user_id": 2144390, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6QjmY.jpg?s=128&g=1", "display_name": "Gord Thompson", "link": "https://stackoverflow.com/users/2144390/gord-thompson"}, "edited": false, "score": 2, "creation_date": 1520469894, "post_id": 49161940, "comment_id": 85332831, "body": "Note that as the error message indicates, <code>row</code> is not a Python tuple, it is a <code>pyodbc.Row</code> object. They are similar but not the same thing, and people sometimes run into difficulties when they think they&#39;re working with tuples but actually they aren&#39;t."}, {"owner": {"reputation": 11187, "user_id": 1394697, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/658ae7ed330d8fc70df1c173960d27ad?s=128&d=identicon&r=PG", "display_name": "FlipperPA", "link": "https://stackoverflow.com/users/1394697/flipperpa"}, "reply_to_user": {"reputation": 97598, "user_id": 2144390, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6QjmY.jpg?s=128&g=1", "display_name": "Gord Thompson", "link": "https://stackoverflow.com/users/2144390/gord-thompson"}, "edited": false, "score": 1, "creation_date": 1520473861, "post_id": 49161940, "comment_id": 85333819, "body": "Good catch, I&#39;ve amended the answer. Thanks."}], "tags": [], "owner": {"reputation": 11187, "user_id": 1394697, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/658ae7ed330d8fc70df1c173960d27ad?s=128&d=identicon&r=PG", "display_name": "FlipperPA", "link": "https://stackoverflow.com/users/1394697/flipperpa"}, "is_accepted": false, "score": 4, "last_activity_date": 1520473323, "last_edit_date": 1520473323, "creation_date": 1520460190, "answer_id": 49161940, "question_id": 49161783, "link": "https://stackoverflow.com/questions/49161783/how-do-you-convert-a-list-pyodbc-row-to-a-string-in-python-so-that-str-replace-c/49161940#49161940", "title": "How do you convert a list/pyodbc.row to a string in python so that str.replace can be used?", "body": "<p>The returned row you are printing is a <code>pyodbc.Row</code> object, similar to a Python tuple, with all values returned by the query. For the first element in the <code>pyodbc.Row</code>, try <code>print(row[0])</code>.</p>\n\n<p>If you had more than one value returned in the row, it might appear as:</p>\n\n<pre><code>&gt;&gt;&gt; print(row)\n('29.99', '19.99', '0.99')\n</code></pre>\n\n<p>Then these values could be addressed as <code>row[0]</code>, <code>row[1]</code>, and <code>row[2]</code>.</p>\n"}], "owner": {"reputation": 39, "user_id": 9446663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c2b969db22c72762ffed6756137fa7c?s=128&d=identicon&r=PG&f=1", "display_name": "William Hawkins", "link": "https://stackoverflow.com/users/9446663/william-hawkins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4903, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1520509815, "creation_date": 1520459326, "last_edit_date": 1520509815, "question_id": 49161783, "link": "https://stackoverflow.com/questions/49161783/how-do-you-convert-a-list-pyodbc-row-to-a-string-in-python-so-that-str-replace-c", "title": "How do you convert a list/pyodbc.row to a string in python so that str.replace can be used?", "body": "<p>So without me cluttering up this question with code, imagine I have taken data from the database and stored a list of data in a variable \"row\". </p>\n\n<pre><code>print(row)\n&gt; ('29.99')\n</code></pre>\n\n<p>Now when I do, for example this:</p>\n\n<pre><code>newprice = row.replace(\"(\",\"\")\n</code></pre>\n\n<p>It brings up</p>\n\n<blockquote>\n  <p>AttributeError: 'pyodbc.Row' object has no attribute 'replace'</p>\n</blockquote>\n\n<p>How would I go about converting this to a string/integer so that I can perform calculations with it without the brackets or apostrophes?</p>\n"}, {"tags": ["python", "subprocess", "popen"], "comments": [{"owner": {"reputation": 41467, "user_id": 351031, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d495a914ca38eca81f0143e62706775d?s=128&d=identicon&r=PG&f=1", "display_name": "g.d.d.c", "link": "https://stackoverflow.com/users/351031/g-d-d-c"}, "edited": false, "score": 0, "creation_date": 1520464931, "post_id": 49161782, "comment_id": 85331460, "body": "Have you tried calling <code>stdin.flush()</code> after you write to the stream?"}, {"owner": {"reputation": 43, "user_id": 7497051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/989d019c518c6a0e84f9716ea3897064?s=128&d=identicon&r=PG&f=1", "display_name": "roger alston", "link": "https://stackoverflow.com/users/7497051/roger-alston"}, "reply_to_user": {"reputation": 41467, "user_id": 351031, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d495a914ca38eca81f0143e62706775d?s=128&d=identicon&r=PG&f=1", "display_name": "g.d.d.c", "link": "https://stackoverflow.com/users/351031/g-d-d-c"}, "edited": false, "score": 0, "creation_date": 1520553306, "post_id": 49161782, "comment_id": 85374768, "body": "I had a <code>.flush()</code> in place on the first <code>stdin</code> for many of the tests I did.  But where it was missing was in the subprocesses.  Adding a <code>.flush()</code> in <code>cat.py</code> solved the problem."}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 7497051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/989d019c518c6a0e84f9716ea3897064?s=128&d=identicon&r=PG&f=1", "display_name": "roger alston", "link": "https://stackoverflow.com/users/7497051/roger-alston"}, "edited": false, "score": 0, "creation_date": 1520553103, "post_id": 49175838, "comment_id": 85374690, "body": "the key words in this answer were <code>each process</code>.  That was my problem, my <code>cat.py</code> test script was not flushing their output buffers.  So my subprocess creation/management code was correct, it was the subprocesses themselves that were incorrect.  Adding a <code>.flush()</code> after every write in <code>cat.py</code> made the whole thing work exactly like I was expecting.  What made me realize this was trying to convert to building a long shell command and using <code>shell=True</code> but when that had the same exact results, I knew I needed to explicitly flush the subprocess buffers.  Python, always a pleasure.  Thanks!!!!"}, {"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "reply_to_user": {"reputation": 43, "user_id": 7497051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/989d019c518c6a0e84f9716ea3897064?s=128&d=identicon&r=PG&f=1", "display_name": "roger alston", "link": "https://stackoverflow.com/users/7497051/roger-alston"}, "edited": false, "score": 0, "creation_date": 1520557744, "post_id": 49175838, "comment_id": 85375829, "body": "@rogeralston: It\u2019s not Python doing this: all languages buffer by default unless writing directly to a terminal."}], "tags": [], "owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "is_accepted": true, "score": 0, "last_activity_date": 1520520240, "creation_date": 1520520240, "answer_id": 49175838, "question_id": 49161782, "link": "https://stackoverflow.com/questions/49161782/how-to-chain-python-popen-calls-together-correctly/49175838#49175838", "title": "How to chain Python Popen calls together correctly?", "body": "<p>Transferring data between processes is expensive (relative to many simple computations within a process).  The kernel amortizes the cost by waiting until a \"significant\" amount of data is pending&mdash;or until the pipe is closed, since obviously there's no point waiting for more data then.  This happens between <em>each</em> pair of processes.  Your <code>bufsize=0</code> affects only writes <em>within</em> the parent process, which is why it works only for feeding the first stage of the pipeline.</p>\n\n<p>Some programs provide options to control their output buffering (<em>i.e.</em>, they can ask the kernel to transfer data early): Python itself offers <code>python -u</code>.  (If it's <em>your</em> Python program, use <code>flush()</code> like g.d.d.c suggested in <em>each</em> process.)  Otherwise, there is a (mostly) generic utility <a href=\"https://linux.die.net/man/1/unbuffer\" rel=\"nofollow noreferrer\"><code>unbuffer</code></a> that might get you immediate responses.</p>\n"}, {"comments": [{"owner": {"reputation": 43, "user_id": 7497051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/989d019c518c6a0e84f9716ea3897064?s=128&d=identicon&r=PG&f=1", "display_name": "roger alston", "link": "https://stackoverflow.com/users/7497051/roger-alston"}, "edited": false, "score": 0, "creation_date": 1520553907, "post_id": 49175904, "comment_id": 85374926, "body": "This does not work because I need to keep <code>stdin</code> open to receive input continuously while subprocesses further down the chain handle the input to date.  The missing piece from my example was flushing the output buffers in the subprocesses&#39; code.  On Linux <code>.&#47;cat.py</code> will work if you have permission to execute the file (and your Python 3 binary is at <code>&#47;usr&#47;bin&#47;python3</code>)."}], "tags": [], "owner": {"reputation": 30832, "user_id": 459745, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/08a2c6f16c0d4dad20d169d9d76848ac?s=128&d=identicon&r=PG", "display_name": "Hai Vu", "link": "https://stackoverflow.com/users/459745/hai-vu"}, "is_accepted": false, "score": 0, "last_activity_date": 1520520417, "creation_date": 1520520417, "answer_id": 49175904, "question_id": 49161782, "link": "https://stackoverflow.com/questions/49161782/how-to-chain-python-popen-calls-together-correctly/49175904#49175904", "title": "How to chain Python Popen calls together correctly?", "body": "<p>Here is a solution that works for you:</p>\n\n<pre><code>#!/usr/bin/python3\nimport sys, subprocess\n\nlength = 4\nstdin = sys.stdin\nstdout = subprocess.PIPE\ncommand = ['python3', './cat.py']\n\nfor i in range(length):\n    if i == length - 1:\n        stdout = open('stdout', 'w')\n    stderr = open('{}.stderr'.format(i), 'w')\n    process = subprocess.Popen(command, stdin=stdin, stdout=stdout, stderr=stderr)\n    stdin = process.stdout\n\nprocess.communicate()\n</code></pre>\n\n<h1>Notes</h1>\n\n<ul>\n<li>I am running on Linux and running just <code>'./cat.py'</code> does not work for me, I have to use <code>['python3', './cat.py']</code></li>\n<li>My approach works by chaining one process' <code>stdout</code> to the next one's <code>stdin</code></li>\n<li><code>stdout</code> is <code>subprocess.PIPE</code>, except for the last one, which is a file</li>\n<li>Call <code>communicate()</code> on the last process will set the pipe chain in action</li>\n</ul>\n\n<p>Have a good day.</p>\n"}], "owner": {"reputation": 43, "user_id": 7497051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/989d019c518c6a0e84f9716ea3897064?s=128&d=identicon&r=PG&f=1", "display_name": "roger alston", "link": "https://stackoverflow.com/users/7497051/roger-alston"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 466, "favorite_count": 1, "accepted_answer_id": 49175838, "answer_count": 2, "score": 1, "last_activity_date": 1520520417, "creation_date": 1520459319, "question_id": 49161782, "link": "https://stackoverflow.com/questions/49161782/how-to-chain-python-popen-calls-together-correctly", "title": "How to chain Python Popen calls together correctly?", "body": "<p>This is turning out not to be as simple as I thought it should be.  What I am trying to do is chain a few commands using <code>Popen</code> by setting the <code>stdin</code> of the commands to the <code>stdout</code> of the previous command (or <code>PIPE</code> for the first <code>stdin</code>).  Additionally I set the <code>stderr</code>s of the commands to <code>open</code>-ed files.</p>\n\n<p>What I am seeing is that basically this doesn't work at all until I <code>close</code> the <code>stdin</code> of the first command.  I am expecting the processes to communicate down the pipe chain when I write to the first command's <code>stdin</code> but nothing gets written to the second command until I close the first command's <code>stdin</code>.  Similarly, none of the <code>stderr</code> files are actually written to until I close the first command's <code>stdin</code>.</p>\n\n<p>Consider the following examples:</p>\n\n<p><code>./cat.py</code></p>\n\n<pre><code>#!/usr/bin/python3\n\nimport sys, datetime\n\ndef log(msg, file):\n   file.write(str(datetime.datetime.now()) + ': ' + msg + '\\n')\n\nlog('starting now', sys.stdout)\nlog('rofl', sys.stderr)\n\nfor input_line in iter(sys.stdin.readline, ''):\n   input_line = input_line.rstrip('\\n')\n\n   log(input_line, sys.stdout)\n   log('lol ' + input_line, sys.stderr)\n\nlog('ending now', sys.stdout)\n</code></pre>\n\n<p>and</p>\n\n<p><code>./basic.py</code></p>\n\n<pre><code>#!/usr/bin/python3\n\nimport sys, subprocess\n\nsubproc = []\n\nlength = 4\nfor i in range(0, length):\n   if i == 0:\n      subproc.append(subprocess.Popen('./cat.py', bufsize=0, stdin=subprocess.PIPE, stdout=subprocess.PIPE, stderr=open(str(i) + '.stderr', 'w')))\n   elif i == length - 1:\n      subproc.append(subprocess.Popen('./cat.py', bufsize=0, stdin=subproc[-1].stdout, stdout=open(str(i) + '.stdout', 'w'), stderr=open(str(i) + '.stderr', 'w')))\n   else:\n      subproc.append(subprocess.Popen('./cat.py', bufsize=0, stdin=subproc[-1].stdout, stdout=subprocess.PIPE, stderr=open(str(i) + '.stderr', 'w')))\n\nfor input_line in iter(sys.stdin.readline, ''):\n   input_line = input_line.rstrip('\\n')\n\n   subproc[0].stdin.write((input_line + '\\n').encode())\n</code></pre>\n\n<p>This will start a 4-process <code>Popen</code> chain and write the <code>stderr</code>s to <code>0.stderr</code>, <code>1.stderr</code>, etc. and write the final <code>stdout</code> to <code>3.stdout</code>.  Output lines are timestamped so you can easily verify when a specific subprocess received input.  Consider these outputs from a basic test I did waiting a few seconds between inputs.</p>\n\n<p><code>0.stderr</code></p>\n\n<pre><code>2018-03-07 16:18:48.316847: rofl\n2018-03-07 16:18:51.815376: lol hello 1\n2018-03-07 16:18:55.561168: lol hello 2\n2018-03-07 16:18:59.204273: lol hello 3\n</code></pre>\n\n<p><code>1.stderr</code></p>\n\n<pre><code>2018-03-07 16:18:48.320991: rofl\n2018-03-07 16:19:01.888496: lol 2018-03-07 16:18:48.316825: starting now\n2018-03-07 16:19:01.888508: lol 2018-03-07 16:18:51.815345: hello 1\n2018-03-07 16:19:01.888515: lol 2018-03-07 16:18:55.561136: hello 2\n2018-03-07 16:19:01.888523: lol 2018-03-07 16:18:59.204241: hello 3\n2018-03-07 16:19:01.888531: lol 2018-03-07 16:19:01.886950: ending now\n</code></pre>\n\n<p><code>3.stdout</code></p>\n\n<pre><code>2018-03-07 16:18:48.323203: starting now\n2018-03-07 16:19:01.899180: 2018-03-07 16:18:48.323766: starting now\n2018-03-07 16:19:01.899208: 2018-03-07 16:19:01.895778: 2018-03-07 16:18:48.320973: starting now\n2018-03-07 16:19:01.899216: 2018-03-07 16:19:01.895804: 2018-03-07 16:19:01.888476: 2018-03-07 16:18:48.316825: starting now\n2018-03-07 16:19:01.899224: 2018-03-07 16:19:01.895813: 2018-03-07 16:19:01.888504: 2018-03-07 16:18:51.815345: hello 1\n2018-03-07 16:19:01.899233: 2018-03-07 16:19:01.895820: 2018-03-07 16:19:01.888512: 2018-03-07 16:18:55.561136: hello 2\n2018-03-07 16:19:01.899240: 2018-03-07 16:19:01.895829: 2018-03-07 16:19:01.888519: 2018-03-07 16:18:59.204241: hello 3\n2018-03-07 16:19:01.899247: 2018-03-07 16:19:01.895836: 2018-03-07 16:19:01.888527: 2018-03-07 16:19:01.886950: ending now\n2018-03-07 16:19:01.899254: 2018-03-07 16:19:01.895844: 2018-03-07 16:19:01.892480: ending now\n2018-03-07 16:19:01.899262: 2018-03-07 16:19:01.895860: ending now\n2018-03-07 16:19:01.899277: ending now\n</code></pre>\n\n<p>As you can see, the first subprocess gets my <code>write</code>s in real-time but then the chain stalls until I close the first subprocess's <code>stdin</code>.  This is despite me using <code>bufsize=0</code> for all <code>Popen</code> calls.  (Without using <code>0</code> then not even the first subprocess received any of my <code>write</code>s until after closing <code>stdin</code>.)</p>\n\n<p>Is what I'm trying to do possible?  What is the correct way to do this?</p>\n\n<p><code>communicate</code> will not work in my case, because that function closes <code>stdin</code>.  I need to keep <code>stdin</code> open the whole while to process additional incoming data.  I need to keep the first <code>stdin</code> open to receive additional input while the output from the command is sent down the pipe chain, handled by the next command and sent further down the pipe chain.</p>\n\n<p>Any suggestions?</p>\n\n<p>I am using Python 3.4.3.</p>\n\n<p>Thank you,</p>\n"}, {"tags": ["python", "jupyter-notebook"], "comments": [{"owner": {"reputation": 1055, "user_id": 6317608, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c38e6a15ad519a4a887cb319e50be186?s=128&d=identicon&r=PG&f=1", "display_name": "Taylor", "link": "https://stackoverflow.com/users/6317608/taylor"}, "edited": false, "score": 0, "creation_date": 1520460990, "post_id": 49161749, "comment_id": 85329919, "body": "Are you trying to open jupyter using the anaconda navigator? Also you shouldn&#39;t have to install jupyter if you installed anaconda, it comes with it. If you are installing it using pip, that could cause problems."}, {"owner": {"reputation": 638, "user_id": 6233386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e78073cc2963b5bae45e4152f3806827?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Peder", "link": "https://stackoverflow.com/users/6233386/mike-peder"}, "edited": false, "score": 0, "creation_date": 1520461562, "post_id": 49161749, "comment_id": 85330173, "body": "I see there is a call to python 2.7 in your Traceback. Have you tried uninstalling it, running jupyter, and seeing if there is any change in the Traceback?"}, {"owner": {"reputation": 1, "user_id": 8928901, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--Cudjnly6fo/AAAAAAAAAAI/AAAAAAAAASU/zCKuSvWWV_0/photo.jpg?sz=128", "display_name": "Max Springer", "link": "https://stackoverflow.com/users/8928901/max-springer"}, "edited": false, "score": 0, "creation_date": 1520462590, "post_id": 49161749, "comment_id": 85330600, "body": "When running Jupyter in Anaconda I get a line of text similar to the one above, ending in:      NameError: name &#39;StandardError&#39; is not defined     logout"}], "owner": {"reputation": 1, "user_id": 8928901, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--Cudjnly6fo/AAAAAAAAAAI/AAAAAAAAASU/zCKuSvWWV_0/photo.jpg?sz=128", "display_name": "Max Springer", "link": "https://stackoverflow.com/users/8928901/max-springer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 160, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1520459178, "creation_date": 1520459178, "question_id": 49161749, "link": "https://stackoverflow.com/questions/49161749/jupyter-notebook-not-running-mac-os", "title": "Jupyter Notebook Not Running Mac OS", "body": "<p>Just installed jupyter notebook through Anaconda and keep getting this error message when trying to run the command in terminal:</p>\n\n<pre><code>Last login: Wed Mar  7 16:33:16 on ttys001\ndhcp-gs-4010:~ Max$ jupyter notebook\nTraceback (most recent call last):\n  File \"/Users/Max/anaconda3/bin/jupyter-notebook\", line 11, in &lt;module&gt;\n     sys.exit(main())\n  File \"/Users/Max/anaconda3/lib/python3.6/site-\npackages/jupyter_core/application.py\", line 266, in launch_instance\n    return super(JupyterApp, cls).launch_instance(argv=argv, **kwargs)\n  File \"/Users/Max/anaconda3/lib/python3.6/site-    packages/traitlets/config/application.py\", line 657, in launch_instance\n    app.initialize(argv)\n  File \"&lt;decorator-gen-7&gt;\", line 2, in initialize\n  File \"/Users/Max/anaconda3/lib/python3.6/site-    packages/traitlets/config/application.py\", line 87, in catch_config_error\n    return method(app, *args, **kwargs)\n  File \"/Users/Max/anaconda3/lib/python3.6/site-    packages/notebook/notebookapp.py\", line 1507, in initialize\n    self.init_webapp()\n  File \"/Users/Max/anaconda3/lib/python3.6/site-    packages/notebook/notebookapp.py\", line 1270, in init_webapp\n    self.jinja_environment_options\n  File \"/Users/Max/anaconda3/lib/python3.6/site-    packages/notebook/notebookapp.py\", line 156, in __init__\n    default_url, settings_overrides, jinja_env_options)\n  File \"/Users/Max/anaconda3/lib/python3.6/site-    packages/notebook/notebookapp.py\", line 268, in init_settings\n    nbextensions_path=jupyter_app.nbextensions_path,\n  File \"/Users/Max/anaconda3/lib/python3.6/site-    packages/notebook/notebookapp.py\", line 973, in nbextensions_path\n    from IPython.paths import get_ipython_dir\n  File \"/Users/Max/anaconda3/lib/python3.6/site-    packages/IPython/__init__.py\", line 55, in &lt;module&gt;\n    from .terminal.embed import embed\n  File \"/Users/Max/anaconda3/lib/python3.6/site-    packages/IPython/terminal/embed.py\", line 16, in &lt;module&gt;\n    from IPython.terminal.interactiveshell import     TerminalInteractiveShell\n  File \"/Users/Max/anaconda3/lib/python3.6/site-    packages/IPython/terminal/interactiveshell.py\", line 32, in &lt;module&gt;\n    from .debugger import TerminalPdb, Pdb\n  File \"/Users/Max/anaconda3/lib/python3.6/site-    packages/IPython/terminal/debugger.py\", line 6, in &lt;module&gt;\n    from IPython.core.completer import IPCompleter\n  File \"/Users/Max/anaconda3/lib/python3.6/site-    packages/IPython/core/completer.py\", line 146, in &lt;module&gt;\n    import jedi\n  File \"/Users/Max/anaconda3/lib/python3.6/site-    packages/jedi/__init__.py\", line 41, in &lt;module&gt;\n    from jedi.api import Script, Interpreter, set_debug_function, \\\n  File \"/Users/Max/anaconda3/lib/python3.6/site-    packages/jedi/api/__init__.py\", line 23, in &lt;module&gt;\n    from jedi.api import classes\n  File \"/Users/Max/anaconda3/lib/python3.6/site-    packages/jedi/api/classes.py\", line 13, in &lt;module&gt;\n    from jedi.evaluate.utils import ignored, unite\n  File \"/Users/Max/anaconda3/lib/python3.6/site-    packages/jedi/evaluate/__init__.py\", line 81, in &lt;module&gt;\n    from jedi.evaluate.context import ClassContext, FunctionContext, \\\n  File \"/Users/Max/anaconda3/lib/python3.6/site-    packages/jedi/evaluate/context/__init__.py\", line 3, in &lt;module&gt;\n    from jedi.evaluate.context.function import FunctionContext,     FunctionExecutionContext\n  File \"/Users/Max/anaconda3/lib/python3.6/site-    packages/jedi/evaluate/context/function.py\", line 8, in &lt;module&gt;\n    from jedi.evaluate import docstrings\n  File \"/Users/Max/anaconda3/lib/python3.6/site-packages/jedi/evaluate/docstrings.py\", line 46, in &lt;module&gt;\n    from numpydoc.docscrape import NumpyDocString\n  File \"/Users/Max/anaconda3/lib/python3.6/site-    packages/numpydoc/__init__.py\", line 5, in &lt;module&gt;\n    from .numpydoc import setup\n  File \"/Users/Max/anaconda3/lib/python3.6/site-    packages/numpydoc/numpydoc.py\", line 31, in &lt;module&gt;\n    from .docscrape_sphinx import get_doc_object, SphinxDocString\n  File \"/Users/Max/anaconda3/lib/python3.6/site-    packages/numpydoc/docscrape_sphinx.py\", line 14, in &lt;module&gt;\n    from sphinx.jinja2glue import BuiltinTemplateLoader\n  File \"/Users/Max/anaconda3/lib/python3.6/site-    packages/sphinx/jinja2glue.py\", line 22, in &lt;module&gt;\n    from sphinx.application import TemplateBridge\n  File \"/Users/Max/anaconda3/lib/python3.6/site-packages/sphinx/application.py\", line 25, in &lt;module&gt;\n    from docutils import nodes\n  File \"/Library/Python/2.7/site-packages/docutils/__init__.py\", line 68, in &lt;module&gt;\n    class ApplicationError(StandardError):\nNameError: name 'StandardError' is not defined\n</code></pre>\n\n<p>I've uninstalled and reinstalled a few times but can't seem to figure out why its not working. Any advice is welcome!</p>\n"}, {"tags": ["python", "json", "mongodb", "python-3.x", "pymongo"], "answers": [{"comments": [{"owner": {"reputation": 491, "user_id": 8258990, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/6e79c3464ba0240a9e23b143f3af0b92?s=128&d=identicon&r=PG&f=1", "display_name": "aquatic7", "link": "https://stackoverflow.com/users/8258990/aquatic7"}, "edited": false, "score": 0, "creation_date": 1520465253, "post_id": 49162006, "comment_id": 85331568, "body": "So to iterate and get all the links, read it line by line and parse it as JSON and insert it to database I&#39;m trying to do it like this, but it create a new error. <code>for i in raw_replay_data[&#39;data&#39;][&#39;video_info&#39;]:     url3 = i[&#39;msgfile&#39;]         raw_message_data = urllib.request.urlopen(url3)     for line in raw_message_data:         json_data = json.loads(line)         messages.insert_many(json_data)</code>"}, {"owner": {"reputation": 491, "user_id": 8258990, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/6e79c3464ba0240a9e23b143f3af0b92?s=128&d=identicon&r=PG&f=1", "display_name": "aquatic7", "link": "https://stackoverflow.com/users/8258990/aquatic7"}, "edited": false, "score": 0, "creation_date": 1520465437, "post_id": 49162006, "comment_id": 85331623, "body": "I have updated my original question for better formatting."}, {"owner": {"reputation": 491, "user_id": 8258990, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/6e79c3464ba0240a9e23b143f3af0b92?s=128&d=identicon&r=PG&f=1", "display_name": "aquatic7", "link": "https://stackoverflow.com/users/8258990/aquatic7"}, "edited": false, "score": 0, "creation_date": 1520468256, "post_id": 49162006, "comment_id": 85332404, "body": "I have put it at the end of the original question."}, {"owner": {"reputation": 9953, "user_id": 8012206, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/z0Yl9.jpg?s=128&g=1", "display_name": "Joseph D.", "link": "https://stackoverflow.com/users/8012206/joseph-d"}, "reply_to_user": {"reputation": 491, "user_id": 8258990, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/6e79c3464ba0240a9e23b143f3af0b92?s=128&d=identicon&r=PG&f=1", "display_name": "aquatic7", "link": "https://stackoverflow.com/users/8258990/aquatic7"}, "edited": false, "score": 0, "creation_date": 1520468827, "post_id": 49162006, "comment_id": 85332546, "body": "@aquatic7, add a <code>User-Agent</code> header to the urlopen request"}, {"owner": {"reputation": 9953, "user_id": 8012206, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/z0Yl9.jpg?s=128&g=1", "display_name": "Joseph D.", "link": "https://stackoverflow.com/users/8012206/joseph-d"}, "reply_to_user": {"reputation": 491, "user_id": 8258990, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/6e79c3464ba0240a9e23b143f3af0b92?s=128&d=identicon&r=PG&f=1", "display_name": "aquatic7", "link": "https://stackoverflow.com/users/8258990/aquatic7"}, "edited": false, "score": 0, "creation_date": 1520470707, "post_id": 49162006, "comment_id": 85333061, "body": "@aquatic7, does it work now? for your reference - <a href=\"https://stackoverflow.com/questions/13303449/urllib2-httperror-http-error-403-forbidden\" title=\"urllib2 httperror http error 403 forbidden\">stackoverflow.com/questions/13303449/&hellip;</a>"}, {"owner": {"reputation": 491, "user_id": 8258990, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/6e79c3464ba0240a9e23b143f3af0b92?s=128&d=identicon&r=PG&f=1", "display_name": "aquatic7", "link": "https://stackoverflow.com/users/8258990/aquatic7"}, "edited": false, "score": 0, "creation_date": 1520471047, "post_id": 49162006, "comment_id": 85333148, "body": "No, I don&#39;t know what to do. How or where to add the header. :("}, {"owner": {"reputation": 9953, "user_id": 8012206, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/z0Yl9.jpg?s=128&g=1", "display_name": "Joseph D.", "link": "https://stackoverflow.com/users/8012206/joseph-d"}, "reply_to_user": {"reputation": 491, "user_id": 8258990, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/6e79c3464ba0240a9e23b143f3af0b92?s=128&d=identicon&r=PG&f=1", "display_name": "aquatic7", "link": "https://stackoverflow.com/users/8258990/aquatic7"}, "edited": false, "score": 0, "creation_date": 1520471859, "post_id": 49162006, "comment_id": 85333366, "body": "@aquatic7, everything is there. you just need to read and understand it. you can&#39;t just copy-paste code all your life"}, {"owner": {"reputation": 491, "user_id": 8258990, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/6e79c3464ba0240a9e23b143f3af0b92?s=128&d=identicon&r=PG&f=1", "display_name": "aquatic7", "link": "https://stackoverflow.com/users/8258990/aquatic7"}, "edited": false, "score": 0, "creation_date": 1520472715, "post_id": 49162006, "comment_id": 85333552, "body": "I&#39;m not copy/pasting code all my life. I do a lot of time reading, learning, trying, failing, trying, failing, understanding. But sometimes to see the final result makes it easier to deduct and learn from it, by seeing how it works and use it for future reference when similar problems occur. But I will use the information you have provided me and read some more about the use of headers. Thank you very much for your help so far. Much appreciated!"}, {"owner": {"reputation": 491, "user_id": 8258990, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/6e79c3464ba0240a9e23b143f3af0b92?s=128&d=identicon&r=PG&f=1", "display_name": "aquatic7", "link": "https://stackoverflow.com/users/8258990/aquatic7"}, "reply_to_user": {"reputation": 9953, "user_id": 8012206, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/z0Yl9.jpg?s=128&g=1", "display_name": "Joseph D.", "link": "https://stackoverflow.com/users/8012206/joseph-d"}, "edited": false, "score": 0, "creation_date": 1520475774, "post_id": 49162006, "comment_id": 85334249, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/166432/discussion-between-aquatic7-and-codekaizer\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 9953, "user_id": 8012206, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/z0Yl9.jpg?s=128&g=1", "display_name": "Joseph D.", "link": "https://stackoverflow.com/users/8012206/joseph-d"}, "is_accepted": true, "score": 1, "last_activity_date": 1520461943, "last_edit_date": 1520461943, "creation_date": 1520460534, "answer_id": 49162006, "question_id": 49161691, "link": "https://stackoverflow.com/questions/49161691/iterating-through-many-json-links-but-encountering-a-jsondecode-error/49162006#49162006", "title": "Iterating through many json links, but encountering a jsondecode error", "body": "<p><code>url3</code> which may contain this value:\n<a href=\"http://s.live.ksmobile.net/cheetahlive/20/7e/15204559238152116852/15204559238152116852.json\" rel=\"nofollow noreferrer\">http://s.live.ksmobile.net/cheetahlive/20/7e/15204559238152116852/15204559238152116852.json</a></p>\n\n<p>contains individual dictionaries but the entire file is not stored as a JSON array.</p>\n\n<p>Structure is like:</p>\n\n<pre><code>   { \"channelType\":\"TEMPGROUP\", ... } # line 1\n   { \"channelType\":\"TEMPGROUP\", ... } # line 2\n</code></pre>\n\n<p>So need to read it by line and parse each line as JSON.</p>\n\n<pre><code>response = urllib.request.urlopen(url3)\n\nfor line in response:\n    json_data = json.loads(line)\n    # Do something with json_data\n</code></pre>\n"}], "owner": {"reputation": 491, "user_id": 8258990, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/6e79c3464ba0240a9e23b143f3af0b92?s=128&d=identicon&r=PG&f=1", "display_name": "aquatic7", "link": "https://stackoverflow.com/users/8258990/aquatic7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 183, "favorite_count": 0, "accepted_answer_id": 49162006, "answer_count": 1, "score": 0, "last_activity_date": 1520468218, "creation_date": 1520458933, "last_edit_date": 1520468218, "question_id": 49161691, "link": "https://stackoverflow.com/questions/49161691/iterating-through-many-json-links-but-encountering-a-jsondecode-error", "title": "Iterating through many json links, but encountering a jsondecode error", "body": "<p>I have a this JSON that contains information from many \"videos\". Within every single \"video\" in the JSON is another link to a new JSON that contains \"messages\".</p>\n\n<p>I am trying to iterate through the \"message\" JSON links and insert them to a MongoDB database.</p>\n\n<p>The problem is that I get a JSONDecodeError. What am I doing wrong and how do I make it right?</p>\n\n<blockquote>\n  <p>Traceback (most recent call last):</p>\n  \n  <p>File \"/import_messages_dev.py\", line 35, in \n      raw_messages_data = requests.get(url3).json()</p>\n  \n  <p>File \"venv1/lib/python3.6/site-packages/requests/models.py\", line 892, in json\n      return complexjson.loads(self.text, **kwargs)</p>\n  \n  <p>File \"/usr/lib/python3.6/json/<strong>init</strong>.py\", line 354, in loads\n      return _default_decoder.decode(s)</p>\n  \n  <p>File \"/usr/lib/python3.6/json/decoder.py\", line 342, in decode\n      raise JSONDecodeError(\"Extra data\", s, end)\n  json.decoder.JSONDecodeError: Extra data: line 2 column 1 (char 380)</p>\n</blockquote>\n\n<pre><code>import urllib.parse\nimport requests\nimport pymongo\n\n###  DATABASE ####\n# Connect to database // login user:password\nuri = 'mongodb://testuser:password@ds245687.mlab.com:45687/liveme'\n# Set client.\nclient = pymongo.MongoClient(uri)\n# Set database.\ndb = client.get_database()\n\n# Create collection.\nmessages = db['messages']\n\n# The url to the live.me replays.\nreplay_url = \"http://live.ksmobile.net/live/getreplayvideos?\"\n\nuserid = 895324164037541888\n\n# Parsing the urls for replays and profile with the userid.\nurl2 = replay_url + urllib.parse.urlencode({'userid': userid}) + '&amp;page_size=1000'\n\n# Printing urls for own validation.\nprint(f\"Replay url: {url2}\\n\")\n\n# Pull the data from replay json.\nraw_replay_data = requests.get(url2).json()\n\nprint(\"Message links: \")\n\n# Insert messages to database.\nfor i in raw_replay_data['data']['video_info']:\n    url3 = i['msgfile']\n    raw_messages_data = requests.get(url3).json()\n    messages.insert_many(raw_messages_data)\n\n    print(url3)\n\nclient.close()\n</code></pre>\n\n<p><strong>Update for further help to the answer</strong></p>\n\n<p>So to iterate and get all the links, read it line by line and parse it as JSON and insert it to database I'm trying to do it like this, but it create a new error. </p>\n\n<pre><code>for i in raw_replay_data['data']['video_info']:\n    url3 = i['msgfile']\n    raw_message_data = urllib.request.urlopen(url3)\n    for line in raw_message_data:\n        json_data = json.loads(line)\n        messages.insert_many(json_data)\n</code></pre>\n\n<p>The new error is:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"/import_messages_dev.py\", line 54, in &lt;module&gt;\n    raw_message_data = urllib.request.urlopen(url3)\n  File \"/usr/lib/python3.6/urllib/request.py\", line 223, in urlopen\n    return opener.open(url, data, timeout)\n  File \"/usr/lib/python3.6/urllib/request.py\", line 532, in open\n    response = meth(req, response)\n  File \"/usr/lib/python3.6/urllib/request.py\", line 642, in http_response\n    'http', request, response, code, msg, hdrs)\n  File \"/usr/lib/python3.6/urllib/request.py\", line 570, in error\n    return self._call_chain(*args)\n  File \"/usr/lib/python3.6/urllib/request.py\", line 504, in _call_chain\n    result = func(*args)\n  File \"/usr/lib/python3.6/urllib/request.py\", line 650, in http_error_default\n    raise HTTPError(req.full_url, code, msg, hdrs, fp)\nurllib.error.HTTPError: HTTP Error 403: Forbidden\n</code></pre>\n"}, {"tags": ["python", "datetime"], "comments": [{"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 3, "creation_date": 1520459161, "post_id": 49161684, "comment_id": 85329152, "body": "You&#39;ve overwritten the function with your local variable. Give it a different name."}, {"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 3, "creation_date": 1520459279, "post_id": 49161684, "comment_id": 85329201, "body": "Note also, the function probably doesn&#39;t do what you meant, as you used <code>&amp;</code> where you should have used <code>and</code>."}], "answers": [{"comments": [{"owner": {"reputation": 1102, "user_id": 9363594, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DPexN.png?s=128&g=1", "display_name": "Lyxal", "link": "https://stackoverflow.com/users/9363594/lyxal"}, "edited": false, "score": 1, "creation_date": 1520459568, "post_id": 49161796, "comment_id": 85329325, "body": "Make sure to make this the accepted answer by pressing the tick next to this answer if it helped you!"}], "tags": [], "owner": {"reputation": 1102, "user_id": 9363594, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DPexN.png?s=128&g=1", "display_name": "Lyxal", "link": "https://stackoverflow.com/users/9363594/lyxal"}, "is_accepted": true, "score": 1, "last_activity_date": 1520459365, "creation_date": 1520459365, "answer_id": 49161796, "question_id": 49161684, "link": "https://stackoverflow.com/questions/49161684/error-in-datetime-when-a-function-is-repeated/49161796#49161796", "title": "error in datetime when a function is repeated", "body": "<p>The reason why you are getting a <code>TypeError</code> is because <code>last_time</code> is both a function <em>and</em> a variable; when you run the line <code>last_time, next_time, delta = last_time(180) #in GMT</code>, you are basically overwriting the function with the <code>datetime.datetime</code> object returned.</p>\n\n<p>Thankfully, the solution is a quick fix, just change either the variable name or the function name, and the problem will stop!</p>\n\n<p>Hope that helps!</p>\n"}], "owner": {"reputation": 1857, "user_id": 3152047, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/155762c4176b616fab8d1861a3f68a5e?s=128&d=identicon&r=PG&f=1", "display_name": "nunodsousa", "link": "https://stackoverflow.com/users/3152047/nunodsousa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 49161796, "answer_count": 1, "score": 0, "last_activity_date": 1520459365, "creation_date": 1520458905, "last_edit_date": 1520459258, "question_id": 49161684, "link": "https://stackoverflow.com/questions/49161684/error-in-datetime-when-a-function-is-repeated", "title": "error in datetime when a function is repeated", "body": "<p>I'm building a time division selector, i.e., if the actual time is 21h34 and I choose a 3 minutes division, it will return 21h33 (it always start from the pure hour - in this case 21h00, and returns the low closest value). If the time is 14h17, it will return 14h16.</p>\n\n<p>The following code was implemented to solve the problem:</p>\n\n<pre><code>import datetime\n\n\ndef last_time(interval):\n    now = datetime.datetime.now()\n    last_time = now.replace(microsecond=0,second=0,minute=0)\n    while True:\n        if((last_time &lt; now) &amp; (now &lt; last_time + datetime.timedelta(seconds = interval))):\n            return last_time,(last_time + datetime.timedelta(seconds = interval)), \\\n        ((last_time + datetime.timedelta(seconds = interval)) - now).total_seconds()\n            break\n        last_time = last_time + datetime.timedelta(seconds = interval)\n</code></pre>\n\n<p>and to execute the function we do:</p>\n\n<pre><code>last_time, next_time, delta = last_time(180) #in GMT\n</code></pre>\n\n<p>If I run the function only once, it will work without any problem. However, if I run it again, it returns the following error:</p>\n\n<pre><code>TypeError: 'datetime.datetime' object is not callable\n</code></pre>\n"}, {"tags": ["python", "numpy", "tensorflow"], "comments": [{"owner": {"reputation": 1857, "user_id": 3152047, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/155762c4176b616fab8d1861a3f68a5e?s=128&d=identicon&r=PG&f=1", "display_name": "nunodsousa", "link": "https://stackoverflow.com/users/3152047/nunodsousa"}, "edited": false, "score": 0, "creation_date": 1520459209, "post_id": 49161663, "comment_id": 85329169, "body": "Which matrix do you want to invert? the cov_mat?"}, {"owner": {"reputation": 53, "user_id": 4231213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0781d83613939f2d9094bc5616afe36c?s=128&d=identicon&r=PG&f=1", "display_name": "Rebecca Chen", "link": "https://stackoverflow.com/users/4231213/rebecca-chen"}, "reply_to_user": {"reputation": 1857, "user_id": 3152047, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/155762c4176b616fab8d1861a3f68a5e?s=128&d=identicon&r=PG&f=1", "display_name": "nunodsousa", "link": "https://stackoverflow.com/users/3152047/nunodsousa"}, "edited": false, "score": 0, "creation_date": 1520461397, "post_id": 49161663, "comment_id": 85330102, "body": "Yes, the cov_mat, since the gradient of the determinant involves an inverse matrix. I can get the gradient for the first iteration, but after that, I can&#39;t invert the matrix anymore."}, {"owner": {"reputation": 2204, "user_id": 8253769, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-i8_au0WQ7fE/AAAAAAAAAAI/AAAAAAAAAag/HlZZLXkkMhc/photo.jpg?sz=128", "display_name": "kluu", "link": "https://stackoverflow.com/users/8253769/kluu"}, "edited": false, "score": 0, "creation_date": 1520467076, "post_id": 49161663, "comment_id": 85332084, "body": "Could you give us the code of the loss function you are trying to minimize ?"}], "owner": {"reputation": 53, "user_id": 4231213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0781d83613939f2d9094bc5616afe36c?s=128&d=identicon&r=PG&f=1", "display_name": "Rebecca Chen", "link": "https://stackoverflow.com/users/4231213/rebecca-chen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 678, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1534805494, "creation_date": 1520458813, "last_edit_date": 1520461701, "question_id": 49161663, "link": "https://stackoverflow.com/questions/49161663/tensorflow-cant-invert-matrix-while-using-gradient-descent-optimizer", "title": "Tensorflow can&#39;t invert matrix while using Gradient Descent Optimizer", "body": "<p>I'm using <code>tf.linalg.det</code>, and I'm optimizing a function using <code>tf.train.GradientDescentOptimizer</code>. When I try to minimize my loss, but I get an error: </p>\n\n<pre><code>Input is not invertible.[[Node: \ngradients_14/MatrixDeterminant_14_grad/MatrixInverse = \nMatrixInverse[T=DT_FLOAT, adjoint=true, \n_device=\"/job:localhost/replica:0/task:0/device:CPU:0\"]\n(TensorArrayStack_14/TensorArrayGatherV3)]]\n</code></pre>\n\n<p>Here is a sample matrix that I calculate the determinant of:</p>\n\n<pre><code>cov_mat = [[24133534. 15928681. 18767914. 12779963.]\n [15928681. 22415040. 16570539. 13000952.]\n [18767914. 16570539. 21845432. 12702288.]\n [12779963. 13000952. 12702288. 24759624.]]\n</code></pre>\n\n<p>When I try to find the inverse using numpy: </p>\n\n<p><code>inv_matrix = np.linalg.inv(cov_mat)</code> </p>\n\n<p>I get</p>\n\n<pre><code>inv_matrix = [[ 1.3129764e-07 -1.9006050e-08 -9.2320363e-08 -1.0428365e-08]\n[-1.9006050e-08  1.1152212e-07 -5.6890045e-08 -1.9562632e-08]\n[-9.2320363e-08 -5.6890045e-08  1.7552667e-07 -1.2525011e-08]\n[-1.0428365e-08 -1.9562632e-08 -1.2525011e-08  6.2468771e-08]]\n</code></pre>\n\n<p>Multiplying the inverse matrix by original matrix in numpy, I get something close to an identity matrix:</p>\n\n<pre><code>np.dot(cov_mat,inv_matrix)) = \n[[ 1.0000001e+00 -1.2194361e-07  7.6666574e-08  4.2256303e-08]\n[ 5.1060049e-08  9.9999994e-01  1.6705408e-07  4.1031740e-08]\n[ 9.1811515e-08 -9.5680974e-08  1.0000004e+00  1.5748128e-08]\n[-1.8350470e-08  1.3953368e-08  1.4236801e-07  1.0000000e+00]]\n</code></pre>\n\n<p>Can anyone give me any insight as to why tensorflow can't compute the gradient?</p>\n\n<p>Edit: So I figured out that if I only run the optimizer for one iteration, I get a gradient, but if I run the optimizer for more than 1 iteration, I get the non-invertible matrix error. </p>\n"}, {"tags": ["python", "neural-network", "deep-learning", "gradient-descent", "pytorch"], "answers": [{"comments": [{"owner": {"reputation": 507, "user_id": 4345535, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/fda709061c0e9de1b07b42709ff8f3ac?s=128&d=identicon&r=PG&f=1", "display_name": "W.S.", "link": "https://stackoverflow.com/users/4345535/w-s"}, "edited": false, "score": 0, "creation_date": 1521189071, "post_id": 49253755, "comment_id": 85633562, "body": "Thanks. I just find out: to update the Variable, should use ht.data[idx]. use data to access tensor directly."}], "tags": [], "owner": {"reputation": 13598, "user_id": 3990607, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/0ZRtB.png?s=128&g=1", "display_name": "patapouf_ai", "link": "https://stackoverflow.com/users/3990607/patapouf-ai"}, "is_accepted": false, "score": 1, "last_activity_date": 1520936854, "creation_date": 1520936854, "answer_id": 49253755, "question_id": 49161652, "link": "https://stackoverflow.com/questions/49161652/how-to-get-around-in-place-operation-error-if-index-leaf-variable-for-gradient-u/49253755#49253755", "title": "How to get around in place operation error if index leaf variable for gradient update?", "body": "<p>The problem comes from the fact that <code>ht</code> requires grad:</p>\n\n<pre><code>ht = Variable(torch.from_numpy(np.random.normal(0,1,(batch_size,500,1,1))), requires_grad=True)\n</code></pre>\n\n<p>And with variables that require grads, you are not allowed by pytorch to assign values to (slices) of them. You can't do:</p>\n\n<pre><code>ht[idx] = some_tensor\n</code></pre>\n\n<p>That means that you will need to find another way to do your customized shrink function using built in pytorch functions like <code>squeeze</code>, <code>unsqueeze</code>, etc. </p>\n\n<p>Another option is to assign your <code>shrink_ht(ht[idx])</code> slices to another variable or tensor which does not require grads. </p>\n"}, {"tags": [], "owner": {"reputation": 507, "user_id": 4345535, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/fda709061c0e9de1b07b42709ff8f3ac?s=128&d=identicon&r=PG&f=1", "display_name": "W.S.", "link": "https://stackoverflow.com/users/4345535/w-s"}, "is_accepted": true, "score": 4, "last_activity_date": 1521189040, "creation_date": 1521189040, "answer_id": 49316176, "question_id": 49161652, "link": "https://stackoverflow.com/questions/49161652/how-to-get-around-in-place-operation-error-if-index-leaf-variable-for-gradient-u/49316176#49316176", "title": "How to get around in place operation error if index leaf variable for gradient update?", "body": "<p>I just find out: to update the Variable, should use ht.data[idx]. use data to access tensor directly.</p>\n"}, {"tags": [], "owner": {"reputation": 2503, "user_id": 1259561, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/2Guia.jpg?s=128&g=1", "display_name": "THN", "link": "https://stackoverflow.com/users/1259561/thn"}, "is_accepted": false, "score": 1, "last_activity_date": 1583716809, "creation_date": 1583716809, "answer_id": 60593633, "question_id": 49161652, "link": "https://stackoverflow.com/questions/49161652/how-to-get-around-in-place-operation-error-if-index-leaf-variable-for-gradient-u/60593633#60593633", "title": "How to get around in place operation error if index leaf variable for gradient update?", "body": "<p>Using <code>ht.data[idx]</code> is OK here, but the new convention is to explicitly use <code>torch.no_grad()</code>, such as:</p>\n\n<pre><code>with torch.no_grad(): \n    ht[idx] = shrink_ht(ht[idx])\n</code></pre>\n\n<p>Note that there is no gradient for this in place operation. In other words, the gradients only backward to the <code>shrunk</code> values of <code>ht</code>, not to the <code>unshrunk</code> values of <code>ht</code>.</p>\n"}], "owner": {"reputation": 507, "user_id": 4345535, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/fda709061c0e9de1b07b42709ff8f3ac?s=128&d=identicon&r=PG&f=1", "display_name": "W.S.", "link": "https://stackoverflow.com/users/4345535/w-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4761, "favorite_count": 0, "accepted_answer_id": 49316176, "answer_count": 3, "score": 7, "last_activity_date": 1583716809, "creation_date": 1520458747, "last_edit_date": 1520936906, "question_id": 49161652, "link": "https://stackoverflow.com/questions/49161652/how-to-get-around-in-place-operation-error-if-index-leaf-variable-for-gradient-u", "title": "How to get around in place operation error if index leaf variable for gradient update?", "body": "<p>I am encountering In place operation error when I am trying to index a leaf variable to update gradients with customized Shrink function. I cannot work around it. Any help is highly appreciated!</p>\n\n\n\n<pre class=\"lang-python prettyprint-override\"><code>import torch.nn as nn\nimport torch\nimport numpy as np\nfrom torch.autograd import Variable, Function\n\n# hyper parameters\nbatch_size = 100 # batch size of images\nld = 0.2 # sparse penalty\nlr = 0.1 # learning rate\n\nx = Variable(torch.from_numpy(np.random.normal(0,1,(batch_size,10,10))), requires_grad=False)  # original\n\n# depends on size of the dictionary, number of atoms.\nD = Variable(torch.from_numpy(np.random.normal(0,1,(500,10,10))), requires_grad=True)\n\n# hx sparse representation\nht = Variable(torch.from_numpy(np.random.normal(0,1,(batch_size,500,1,1))), requires_grad=True)\n\n# Dictionary loss function\nloss = nn.MSELoss()\n\n# customized shrink function to update gradient\nshrink_ht = lambda x: torch.stack([torch.sign(i)*torch.max(torch.abs(i)-lr*ld,0)[0] for i in x])\n\n### sparse reprsentation optimizer_ht single image.\noptimizer_ht = torch.optim.SGD([ht], lr=lr, momentum=0.9) # optimizer for sparse representation\n\n## update for the batch\nfor idx in range(len(x)):\n    optimizer_ht.zero_grad() # clear up gradients\n    loss_ht = 0.5*torch.norm((x[idx]-(D*ht[idx]).sum(dim=0)),p=2)**2\n    loss_ht.backward() # back propogation and calculate gradients\n    optimizer_ht.step() # update parameters with gradients\n    ht[idx] = shrink_ht(ht[idx])  # customized shrink function.\n\nRuntimeError Traceback (most recent call last) in ()\n15 loss_ht.backward() # back propogation and calculate gradients\n16 optimizer_ht.step() # update parameters with gradients\n\u2014&gt; 17 ht[idx] = shrink_ht(ht[idx]) # customized shrink function.\n18\n19\n\n/home/miniconda3/lib/python3.6/site-packages/torch/autograd/variable.py in setitem(self, key, value)\n85 return MaskedFill.apply(self, key, value, True)\n86 else:\n\u2014&gt; 87 return SetItem.apply(self, key, value)\n88\n89 def deepcopy(self, memo):\n\nRuntimeError: a leaf Variable that requires grad has been used in an in-place operation.\n</code></pre>\n\n<p>Specifically, this line of code below seems give error as it index and update leaf variable at the same time. </p>\n\n<pre class=\"lang-python prettyprint-override\"><code>ht[idx] = shrink_ht(ht[idx])  # customized shrink function.\n</code></pre>\n\n<p>Thanks.</p>\n\n<p>W.S.</p>\n"}, {"tags": ["python", "timestamp", "protocol-buffers"], "comments": [{"owner": {"reputation": 6475, "user_id": 7008416, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1aa92fca6ba297f9420e519fd789ac64?s=128&d=identicon&r=PG&f=1", "display_name": "Arthur Tacca", "link": "https://stackoverflow.com/users/7008416/arthur-tacca"}, "edited": false, "score": 2, "creation_date": 1520850211, "post_id": 49161633, "comment_id": 85468985, "body": "What do you mean &quot;nothing is returned&quot;? What happens if you add <code>print(timestamp)</code> after the third line? Note that <code>timestamp.GetCurrentTime()</code> changes the value of the <code>timestamp</code> object, rather than returning a new object."}, {"owner": {"reputation": 979, "user_id": 1801968, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/551ec32188e0b94733e031a7ea68f37c?s=128&d=identicon&r=PG", "display_name": "P Moran", "link": "https://stackoverflow.com/users/1801968/p-moran"}, "reply_to_user": {"reputation": 6475, "user_id": 7008416, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1aa92fca6ba297f9420e519fd789ac64?s=128&d=identicon&r=PG&f=1", "display_name": "Arthur Tacca", "link": "https://stackoverflow.com/users/7008416/arthur-tacca"}, "edited": false, "score": 0, "creation_date": 1521497644, "post_id": 49161633, "comment_id": 85747671, "body": "Thanks for looking at this! I think I had an environment problem."}], "answers": [{"comments": [{"owner": {"reputation": 678, "user_id": 9864814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b86cd1263481692030c87dd1a7222b40?s=128&d=identicon&r=PG&f=1", "display_name": "GGEv", "link": "https://stackoverflow.com/users/9864814/ggev"}, "edited": false, "score": 0, "creation_date": 1579787016, "post_id": 49373244, "comment_id": 105889132, "body": "is it mandatory though to initialize the variable a priori and then call the GetCurrentTime, can&#39;t it happen somehow in a one-liner on the fly ? to be include in a RPC message at once like timestamp = timestamp.Timestamp().GetCurrentTime()"}, {"owner": {"reputation": 678, "user_id": 9864814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b86cd1263481692030c87dd1a7222b40?s=128&d=identicon&r=PG&f=1", "display_name": "GGEv", "link": "https://stackoverflow.com/users/9864814/ggev"}, "edited": false, "score": 0, "creation_date": 1587742726, "post_id": 49373244, "comment_id": 108638069, "body": "although this code is executed normally in command line, in vs code this message appears: &quot;Instance of &#39;Timestamp&#39; has no &#39;GetCurrentTime&#39; member&quot; What could it be ?"}, {"owner": {"reputation": 678, "user_id": 9864814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b86cd1263481692030c87dd1a7222b40?s=128&d=identicon&r=PG&f=1", "display_name": "GGEv", "link": "https://stackoverflow.com/users/9864814/ggev"}, "edited": false, "score": 0, "creation_date": 1587743477, "post_id": 49373244, "comment_id": 108638494, "body": "my case was discussed here, a false positive and suppressing the warning <a href=\"https://stackoverflow.com/questions/35990313/avoid-pylint-warning-e1101-instance-of-has-no-member-for-class-with-dyn\" title=\"avoid pylint warning e1101 instance of has no member for class with dyn\">stackoverflow.com/questions/35990313/&hellip;</a>"}], "tags": [], "owner": {"reputation": 979, "user_id": 1801968, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/551ec32188e0b94733e031a7ea68f37c?s=128&d=identicon&r=PG", "display_name": "P Moran", "link": "https://stackoverflow.com/users/1801968/p-moran"}, "is_accepted": false, "score": 10, "last_activity_date": 1521497607, "creation_date": 1521497607, "answer_id": 49373244, "question_id": 49161633, "link": "https://stackoverflow.com/questions/49161633/how-do-i-create-a-protobuf3-timestamp-in-python/49373244#49373244", "title": "How do i create a protobuf3 Timestamp in python?", "body": "<p>ARRGGG I think there was a virtual env problem. It works now!</p>\n\n<pre><code>Python 3.6.4 (v3.6.4:d48eceb, Dec 19 2017, 06:54:40) [MSC v.1900 64 bit (AMD64)] on win32\n&gt;&gt;&gt; from google.protobuf.timestamp_pb2 import Timestamp\n&gt;&gt;&gt; timestamp = Timestamp()\n&gt;&gt;&gt; timestamp.GetCurrentTime()\n&gt;&gt;&gt; print(timestamp)\nseconds: 1521497361\nnanos: 600455000\n\n&gt;&gt;&gt;timestamp\nseconds: 1521497361\nnanos: 600455000\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 5875694, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-c8_0K4TsdlQ/AAAAAAAAAAI/AAAAAAAALUE/YC0IYBsfGy0/photo.jpg?sz=128", "display_name": "Kai Zhang", "link": "https://stackoverflow.com/users/5875694/kai-zhang"}, "is_accepted": false, "score": 0, "last_activity_date": 1617659872, "creation_date": 1617659872, "answer_id": 66960304, "question_id": 49161633, "link": "https://stackoverflow.com/questions/49161633/how-do-i-create-a-protobuf3-timestamp-in-python/66960304#66960304", "title": "How do i create a protobuf3 Timestamp in python?", "body": "<p>The only two args of constructing a protobuf Timestamp are seconds and nanos. They are defined as the seconds from the Epoch (1970-01-01 00:00:00). So we can do:</p>\n<pre><code>import datetime\nfrom google.protobuf.timestamp_pb2 import Timestamp\n\nt = datetime.datetime.now().timestamp()\nseconds = int(t)\nnanos = int(t % 1 * 1e9)\n\nproto_timestamp = Timestamp(seconds=seconds, nanos=nanos)\n</code></pre>\n"}], "owner": {"reputation": 979, "user_id": 1801968, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/551ec32188e0b94733e031a7ea68f37c?s=128&d=identicon&r=PG", "display_name": "P Moran", "link": "https://stackoverflow.com/users/1801968/p-moran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9749, "favorite_count": 2, "answer_count": 2, "score": 7, "last_activity_date": 1617659872, "creation_date": 1520458701, "question_id": 49161633, "link": "https://stackoverflow.com/questions/49161633/how-do-i-create-a-protobuf3-timestamp-in-python", "title": "How do i create a protobuf3 Timestamp in python?", "body": "<p>I see that there is a Timestamp object but it doesn't seem to work. \nUsing Python 3.6</p>\n\n<pre><code>$ pip install protobuf3\n</code></pre>\n\n<p>In python:</p>\n\n<pre><code>from google.protobuf.timestamp_pb2 import Timestamp\ntimestamp = Timestamp()\ntimestamp.GetCurrentTime()\n</code></pre>\n\n<p>Nothing is returned. What am I doing wrong?</p>\n"}, {"tags": ["python", "python-3.x", "string-formatting"], "comments": [{"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1520459178, "post_id": 49161623, "comment_id": 85329160, "body": "This isn&#39;t a click question. You pass the result of <code>str.format()</code> to click, this is a <i>string formatting</i> question."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1520459246, "post_id": 49161623, "comment_id": 85329188, "body": "See <a href=\"https://docs.python.org/3/library/string.html#format-string-syntax\" rel=\"nofollow noreferrer\">docs.python.org/3/library/string.html#format-string-syntax</a> for what is possible with the syntax."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1520459417, "post_id": 49161623, "comment_id": 85329261, "body": "In this case, just update the dictionary first, or copy the dictionary and then update the value with the function."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1520459455, "post_id": 49161623, "comment_id": 85329278, "body": "If you are using Python 3.6, use <a href=\"https://docs.python.org/3/reference/lexical_analysis.html#f-strings\" rel=\"nofollow noreferrer\">formated string literals</a> instead."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1520459524, "post_id": 49161623, "comment_id": 85329312, "body": "Also, if this really is Python 3 as your question tag suggests, then the <code>u</code> prefixes to the string literals are redundant. They are only needed in Python 2 or code that needs to remain compatible with Python 2."}, {"owner": {"reputation": 9868, "user_id": 6077803, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1a7abebd7e0f177743b3a9c2e7070ffc?s=128&d=identicon&r=PG&f=1", "display_name": "DenCowboy", "link": "https://stackoverflow.com/users/6077803/dencowboy"}, "reply_to_user": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1520459655, "post_id": 49161623, "comment_id": 85329355, "body": "@MartijnPieters Thanks I&#39;ll try to use the formated string literals! And yes, I used python 2.7 a bit in the past, this is the first time I&#39;m trying 3.6, so making some silly mistakes."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1520460394, "post_id": 49161623, "comment_id": 85329670, "body": "Although, you are using a format string in a variable; <code>f</code> strings produce the formatted result when executed, not via a separate <code>.format()</code> method call.  If you need to be able to swap out format strings then an <code>f</code> string won\u2019t be suitable."}], "owner": {"reputation": 9868, "user_id": 6077803, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1a7abebd7e0f177743b3a9c2e7070ffc?s=128&d=identicon&r=PG&f=1", "display_name": "DenCowboy", "link": "https://stackoverflow.com/users/6077803/dencowboy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "closed_date": 1520459340, "answer_count": 0, "score": 1, "last_activity_date": 1520459324, "creation_date": 1520458660, "last_edit_date": 1520459324, "question_id": 49161623, "link": "https://stackoverflow.com/questions/49161623/how-to-use-a-function-in-string-formatting-in-python", "closed_reason": "Duplicate", "title": "How to use a function in string formatting in Python", "body": "<p>I'm loading a JSON and I'm printing string formatting. </p>\n\n<pre><code>fmt = (u\"{id:&lt;4} {title:&lt;28} {timestamp:&lt;23} {description:&lt;23}\"\n       u\" {link}\")\n</code></pre>\n\n<p>and to print:</p>\n\n<pre><code>for item in items\n    print(fmt.format(**item))\n</code></pre>\n\n<p>This works fine. But the problem here is that I'm printing a unix timestamp.</p>\n\n<p>Now I've written a function (<code>convert_unix_timestamp</code>)which converts the unix timestamp to a readable timestamp.</p>\n\n<p>But how can I use this function and also use my string formatting?</p>\n\n<p>I was thinking about something as below but I don't know how to make this work</p>\n\n<pre><code>fmt = (u\"{id:&lt;4} {title:&lt;28} {self.convert_unix_timestamp(timestamp):&lt;23} {description:&lt;23}\"\n       u\" {link}\")\n</code></pre>\n\n<p>Can someone tell me how I can use a function inside this above?</p>\n"}, {"tags": ["python", "json", "django", "serialization", "django-rest-framework"], "answers": [{"tags": [], "owner": {"reputation": 18398, "user_id": 953553, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0c156e74c158d068b6308eb7b0e5eedc?s=128&d=identicon&r=PG", "display_name": "andilabs", "link": "https://stackoverflow.com/users/953553/andilabs"}, "is_accepted": true, "score": 1, "last_activity_date": 1520498833, "creation_date": 1520498833, "answer_id": 49168927, "question_id": 49161620, "link": "https://stackoverflow.com/questions/49161620/how-to-map-json-keys-with-non-alphanumeric-characters-in-django-rest-framework-s/49168927#49168927", "title": "How to map JSON keys with non-alphanumeric characters in Django Rest Framework Serializer", "body": "<p>I will use these two methods of serializer offered by DRF:</p>\n\n<p><code>.to_representation()</code> - Override this to support serialization, for read operations. Make mapping from <code>django_legit_name</code> to <code>django-not-legit-field-name</code></p>\n\n<p><code>.to_internal_value()</code> - Override this to support deserialization, for write operations. Make mapping from <code>django-not-legit-field-name</code> to <code>django_legit_name</code></p>\n\n<p>Examples you can find here: <a href=\"http://www.django-rest-framework.org/topics/3.0-announcement/#serializers\" rel=\"nofollow noreferrer\">http://www.django-rest-framework.org/topics/3.0-announcement/#serializers</a></p>\n"}], "owner": {"reputation": 1661, "user_id": 856647, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/YWbzz.jpg?s=128&g=1", "display_name": "roob", "link": "https://stackoverflow.com/users/856647/roob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 338, "favorite_count": 0, "accepted_answer_id": 49168927, "answer_count": 1, "score": 0, "last_activity_date": 1520498833, "creation_date": 1520458629, "question_id": 49161620, "link": "https://stackoverflow.com/questions/49161620/how-to-map-json-keys-with-non-alphanumeric-characters-in-django-rest-framework-s", "title": "How to map JSON keys with non-alphanumeric characters in Django Rest Framework Serializer", "body": "<p>I have some JSON keys that contain non-alphanumeric characters e.g. <code>\"my-key=\"</code></p>\n\n<p>I need to map this key to a field <code>my_key</code> in my Django model.</p>\n\n<p>The traditional way to do this is to add a custom field to the <code>ModelSerializer</code> where you specify the <code>source</code>:</p>\n\n<pre><code>class MyModelSerializer(serializers.ModelSerializer):\n    my_key= = serializers.CharField(source='my_key')\n\n    class Meta:\n        model = MyModel\n        fields = ('my-key=',)\n</code></pre>\n\n<p>However this obviously doesn't work because:</p>\n\n<pre><code>my_key= = serializers.CharField(source='my_key')\n</code></pre>\n\n<p>is not valid python for declaring an attribute.</p>\n\n<p><strong>How do I map my JSON key to the model field?</strong></p>\n"}, {"tags": ["python", "json"], "answers": [{"tags": [], "owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "is_accepted": false, "score": 1, "last_activity_date": 1520458943, "creation_date": 1520458943, "answer_id": 49161695, "question_id": 49161614, "link": "https://stackoverflow.com/questions/49161614/python-https-json-parser-error-issue/49161695#49161695", "title": "python- https/json parser error issue", "body": "<p>Your <code>exit()</code> line is not indented correctly. Try this:</p>\n\n<pre><code>if response.status_code != 200:\n    print('Status:', response.status_code, 'Problem with the request. Exiting.')\n    exit()\n</code></pre>\n\n<p>Additionally, even though you are parsing the JSON correctly, you incorrectly use the resulting data. Try this:</p>\n\n<pre><code>output = USD['USD']         # Note: \"[0]\" not required\nprint('Output USD:', USD)   # Note: \", USD\" inside the parentheses\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 939, "user_id": 1786775, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94fb2089e64fcc0932f2c2947fc4e09d?s=128&d=identicon&r=PG", "display_name": "Benjamin Jones", "link": "https://stackoverflow.com/users/1786775/benjamin-jones"}, "edited": false, "score": 0, "creation_date": 1520607626, "post_id": 49161786, "comment_id": 85397821, "body": "Thank you. No error now. However no output. Output is blank. &quot;Fetching url.. Output USD: &quot;"}, {"owner": {"reputation": 939, "user_id": 1786775, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94fb2089e64fcc0932f2c2947fc4e09d?s=128&d=identicon&r=PG", "display_name": "Benjamin Jones", "link": "https://stackoverflow.com/users/1786775/benjamin-jones"}, "edited": false, "score": 0, "creation_date": 1520607940, "post_id": 49161786, "comment_id": 85398036, "body": "Using parts of the answer below I now have what works. output = data[&#39;USD&#39;] print(&#39;Output USD:&#39;, data)"}], "tags": [], "owner": {"reputation": 349, "user_id": 6943619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad68e6d9b199f639d373dd11ea3e8dff?s=128&d=identicon&r=PG&f=1", "display_name": "bfissa", "link": "https://stackoverflow.com/users/6943619/bfissa"}, "is_accepted": true, "score": 2, "last_activity_date": 1520460028, "last_edit_date": 1520460028, "creation_date": 1520459344, "answer_id": 49161786, "question_id": 49161614, "link": "https://stackoverflow.com/questions/49161614/python-https-json-parser-error-issue/49161786#49161786", "title": "python- https/json parser error issue", "body": "<p>The problem is here:</p>\n\n<pre><code>if response.status_code != 200:\n    print('Status:', response.status_code, 'Problem with the request. Exiting.')\nexit()\n</code></pre>\n\n<p>The way you've indented, Python will always call exit(). You want it to call exit() only if there was actually an error, like so: </p>\n\n<pre><code>if response.status_code != 200:\n    print('Status:', response.status_code, 'Problem with the request. Exiting.')\n    exit()\n</code></pre>\n\n<p>However, you have another problem. You're trying to assign \"output\" the value of an object in USD; USD doesn't exist:</p>\n\n<pre><code>data = response.json()\n\noutput = USD[0]['USD'] #\"USD\" doesn't exist. It's the value you're trying to find, not the json that contains the object itself.\n\nprint('Output USD:'), USD #\"USD\" doesn't exist. I think you meant to print \"output\" here, which is the value you're setting in the line above.\n</code></pre>\n\n<p>Instead, try this:</p>\n\n<pre><code>data = response.json()\n\noutput = data[\"USD\"]\n\nprint('Output USD:'), output\n</code></pre>\n"}], "owner": {"reputation": 939, "user_id": 1786775, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94fb2089e64fcc0932f2c2947fc4e09d?s=128&d=identicon&r=PG", "display_name": "Benjamin Jones", "link": "https://stackoverflow.com/users/1786775/benjamin-jones"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 49161786, "answer_count": 2, "score": 0, "last_activity_date": 1520460028, "creation_date": 1520458583, "question_id": 49161614, "link": "https://stackoverflow.com/questions/49161614/python-https-json-parser-error-issue", "title": "python- https/json parser error issue", "body": "<p>I am trying to parse json data from a site that shows values of crypto currency. I am trying to parse it using python. I am a little lost on how to show the output.</p>\n\n<p>API: <code>https://min-api.cryptocompare.com/data/price?fsym=XMR&amp;tsyms=USD</code></p>\n\n<pre><code># code starts below\n\nimport requests\n\n# Set the request parameters\nurl = 'https://min-api.cryptocompare.com/data/price?fsym=XMR&amp;tsyms=USD'\n\n# Fetch url\nprint(\"Fetching url..\")\n\n# Do the HTTP get request\nresponse = requests.get(url, verify=True) #Verify is check SSL certificate\n\n# Error handling\n\n# Check for HTTP codes other than 200\nif response.status_code != 200:\n    print('Status:', response.status_code, 'Problem with the request. Exiting.')\nexit()\n\n# Decode the JSON response into a dictionary and use the data\n\nUSD = response.json()\n\noutput = USD[0]['USD']\n\nprint('Output USD:'), USD\n\n# code ends\n</code></pre>\n\n<p>I am getting a response code 200 because IDLE tries to exit. The code is based off another project and I don't believe I am parsing json correctly? </p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 0, "creation_date": 1521257756, "post_id": 49161594, "comment_id": 85666445, "body": "@SunAns, if one of the below solutions helped, please consider accepting one (green tick on the left), so other users know. Or, of course, feel free to ask for clarification."}], "answers": [{"tags": [], "owner": {"reputation": 201, "user_id": 3566707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3754ae70760050e1c391f8cde4d2e173?s=128&d=identicon&r=PG&f=1", "display_name": "Brayden", "link": "https://stackoverflow.com/users/3566707/brayden"}, "is_accepted": false, "score": 1, "last_activity_date": 1520461442, "creation_date": 1520461442, "answer_id": 49162203, "question_id": 49161594, "link": "https://stackoverflow.com/questions/49161594/concatenate-lists-as-rows-to-make-dataframe-pandas/49162203#49162203", "title": "concatenate lists as rows to make dataframe pandas", "body": "<p><code>import pandas as pd\nfrom itertools import izip_longest\n</code></p>\n\n<p><code>list_1 = ['2017', 'Paul 2', 'Miley 4', 'John 5']\nlist_2 = ['2016', 'Sarah 4', 'Stephanie 6']\n</code></p>\n\n<p><code>def split_names_and_numbers(input_list):\n    year = input_list[0]\n    return [[year] + name_and_number.split(' ') for name_and_number in input_list[1:]]\n</code></p>\n\n<p><code>list_1_split_out = split_names_and_numbers(list_1)</code></p>\n\n<p><code>list_2_split_out = split_names_and_numbers(list_2)</code></p>\n\n<p><code>column_names = ['Year', 'Name', 'Number']</code></p>\n\n<p><code>df_from_list_1 = pd.DataFrame(list_1_split_out, columns=column_names)</code></p>\n\n<p><code>df_from_list_2 = pd.DataFrame(list_1_split_out, columns=column_names)</code></p>\n\n<p><code>final_output = df_from_list_1.append(df_from_list_2, ignore_index=True)</code></p>\n\n<p><code>split_names_and_numbers</code> creates a two dimensional array representing the data for each of your dataframes. <a href=\"https://docs.python.org/2/library/itertools.html#itertools.izip_longest\" rel=\"nofollow noreferrer\">Here's</a> the documentation for izip_longest. And <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.append.html\" rel=\"nofollow noreferrer\">here's</a> the documentation for <code>DataFrame.append</code>. Good luck!</p>\n"}, {"tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": false, "score": 1, "last_activity_date": 1520461990, "creation_date": 1520461990, "answer_id": 49162324, "question_id": 49161594, "link": "https://stackoverflow.com/questions/49161594/concatenate-lists-as-rows-to-make-dataframe-pandas/49162324#49162324", "title": "concatenate lists as rows to make dataframe pandas", "body": "<p>One way is to create a dictionary of values from your input lists and feed it into <code>pd.DataFrame</code>:</p>\n\n<pre><code>lst1 =  ['2017', 'Paul 2', 'Miley 4']\nlst2 = ['2016', 'Sarah 4', 'Stephanie 6']\n\nname, num = list(zip(*(x.split(' ') for x in (lst1[1:] + lst2[1:]))))\nyear = [lst1[0]]*(len(lst1)-1) + [lst2[0]]*(len(lst2)-1)\n\ndf = pd.DataFrame({'name': name, 'year': year, 'num': num})\n\n#         name num  year\n# 0       Paul   2  2017\n# 1      Miley   4  2017\n# 2      Sarah   4  2016\n# 3  Stephanie   6  2016\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16194, "user_id": 667883, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a39234ae82a5898cba1d70b5bff80ec3?s=128&d=identicon&r=PG", "display_name": "Allen", "link": "https://stackoverflow.com/users/667883/allen"}, "is_accepted": true, "score": 1, "last_activity_date": 1520463065, "creation_date": 1520463065, "answer_id": 49162540, "question_id": 49161594, "link": "https://stackoverflow.com/questions/49161594/concatenate-lists-as-rows-to-make-dataframe-pandas/49162540#49162540", "title": "concatenate lists as rows to make dataframe pandas", "body": "<p>You can first pre-process your list data into the format[['name','num','year']...], then load them into a df. Finally concatenate the dfs.</p>\n\n<pre><code>list_1 = ['2017', 'Paul 2', 'Miley 4']\nlist_2 = ['2016', 'Sarah 4', 'Stephanie 6']\n\ndf1 = pd.DataFrame([(e+' '+list1[0]).split() for e in list1 if e!=list1[0]])\ndf2 = pd.DataFrame([(e+' '+list2[0]).split() for e in list2 if e!=list2[0]])\ndf = pd.concat([df1,df2]).set_axis(['name','num','year'], axis=1, inplace=False)\n\nOut[78]: \n        name num  year\n0       Paul   2  2017\n1      Miley   4  2017\n0      Sarah   4  2016\n1  Stephanie   6  2016\n</code></pre>\n"}], "owner": {"reputation": 101, "user_id": 7231968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1211322072282009/picture?type=large", "display_name": "SunAns", "link": "https://stackoverflow.com/users/7231968/sunans"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 342, "favorite_count": 0, "accepted_answer_id": 49162540, "answer_count": 3, "score": 0, "last_activity_date": 1520463065, "creation_date": 1520458511, "question_id": 49161594, "link": "https://stackoverflow.com/questions/49161594/concatenate-lists-as-rows-to-make-dataframe-pandas", "title": "concatenate lists as rows to make dataframe pandas", "body": "<p>I have few lists which have a year at their first index, followed by a name and number e.g </p>\n\n<pre><code>list 1 ['2017', 'Paul 2', 'Miley 4',..]\n\nlist 2 ['2016', 'Sarah 4', 'Stephanie 6'...]\n</code></pre>\n\n<p>I wish to make a dataframe (of all these lists concatenated) that has 3 columns of name, number and year</p>\n\n<pre><code> name   | num   | year\n Paul      2      2017\n Miley     4      2017\n Sarah     4      2016\n Stephanie 6      2016\n</code></pre>\n"}, {"tags": ["python", "matplotlib", "jython"], "comments": [{"owner": {"reputation": 6812, "user_id": 7371893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=128&g=1", "display_name": "&#226;\u0144\u014d\u014b\u0177Xmo\u016f\u015c", "link": "https://stackoverflow.com/users/7371893/%c3%a2%c5%84%c5%8d%c5%8b%c5%b7xmo%c5%af%c5%9c"}, "edited": false, "score": 0, "creation_date": 1520458559, "post_id": 49161570, "comment_id": 85328856, "body": "Google this:  &quot;python virtualenv&quot;.  It creates another environment where python version is different from your current version. Goodluck."}, {"owner": {"reputation": 87, "user_id": 8596904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a03718416d0d5eb720963387c055c9d9?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/8596904/sam"}, "reply_to_user": {"reputation": 6812, "user_id": 7371893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=128&g=1", "display_name": "&#226;\u0144\u014d\u014b\u0177Xmo\u016f\u015c", "link": "https://stackoverflow.com/users/7371893/%c3%a2%c5%84%c5%8d%c5%8b%c5%b7xmo%c5%af%c5%9c"}, "edited": false, "score": 0, "creation_date": 1520458761, "post_id": 49161570, "comment_id": 85328948, "body": "This will not work. In TopSpin you can only save a <code>.py</code> file that is then called in the TopSpin command  prompt by typing it&#39;s name. So I can&#39;t put the file in a virtual environment. :-/"}, {"owner": {"reputation": 2003, "user_id": 6414203, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b25f1c657b4306a0d459c874e859789?s=128&d=identicon&r=PG&f=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/6414203/alan"}, "edited": false, "score": 0, "creation_date": 1520459725, "post_id": 49161570, "comment_id": 85329388, "body": "matplotlib doesn&#39;t work in Jython - it relies on C modules. You could try generating the data in TopSpin, then loading the processed result in the normal environment of your machine. See NMRglue - <a href=\"https://github.com/jjhelmus/nmrglue/issues/13\" rel=\"nofollow noreferrer\">github.com/jjhelmus/nmrglue/issues/13</a> - which can read Bruker data."}], "owner": {"reputation": 87, "user_id": 8596904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a03718416d0d5eb720963387c055c9d9?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/8596904/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3070, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1520458369, "creation_date": 1520458369, "question_id": 49161570, "link": "https://stackoverflow.com/questions/49161570/plot-in-python-without-matplotlib", "title": "Plot in python without matplotlib", "body": "<p>I'm writing a program for TopSpin, an NMR processing software from Bruker. TopSpin runs the python scripts in it's own environment using jython. The python version it returns is 2.5.* (I don't remember the last one).</p>\n\n<pre><code>import sys\nprint(sys.version)\n&gt;&gt; 2.5.*\n</code></pre>\n\n<p>As the code is executed in it's own environment, I cannot update the version of python/jython and I also cannot install missing packages.</p>\n\n<p>For my current project I would need a functionality to plot the values of two lists. The first list on the x-axis and the second one on the y-axis.\nFor this task I wanted to use matplotlib's function <code>plot(xlist, ylist)</code>. Unfortunately TopSpin throws an error at me, saying that the package <code>matplotlib</code> does not exist. As I can't install the package (or at least I have no idea how I should), I now need a workaround.</p>\n\n<p>Is there a way I could call a python script that runs in the normal environment of my computer (like idle) where python 3.6.3 and matplotlib are installed? Ideally this could generate the plot and ship it back to the TopSpin python program.</p>\n\n<p>Or is there an other workaround that enables me to plot my data and show it to the user/save it on the disk, that does not rely on fancy or new packages?</p>\n"}, {"tags": ["python", "pandas", "tuples"], "comments": [{"owner": {"reputation": 2051, "user_id": 6883295, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Opjo7.jpg?s=128&g=1", "display_name": "cfort", "link": "https://stackoverflow.com/users/6883295/cfort"}, "edited": false, "score": 1, "creation_date": 1520458100, "post_id": 49161466, "comment_id": 85328635, "body": "I think this is a job for a slicer. See the docs <a href=\"https://pandas.pydata.org/pandas-docs/stable/advanced.html#using-slicers\" rel=\"nofollow noreferrer\">here</a>"}], "answers": [{"tags": [], "owner": {"reputation": 3051, "user_id": 5053559, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/4accba715685dd4825e31d192ce7c67d?s=128&d=identicon&r=PG&f=1", "display_name": "Davtho1983", "link": "https://stackoverflow.com/users/5053559/davtho1983"}, "is_accepted": false, "score": 1, "last_activity_date": 1520458689, "creation_date": 1520458689, "answer_id": 49161631, "question_id": 49161466, "link": "https://stackoverflow.com/questions/49161466/select-all-rows-in-df-with-the-same-value-in-second-value-of-index-tuple/49161631#49161631", "title": "Select all rows in df with the same value in second value of index tuple", "body": "<p>Ok with credit to <a href=\"https://stackoverflow.com/users/6883295/chuho\">ChuHo</a> </p>\n\n<p>The following code solves my problem</p>\n\n<pre><code>idx = pd.IndexSlice\nprint(forex_open_close.loc[idx[:,['AUDARS']], :])\n</code></pre>\n\n<p>And gives this output :</p>\n\n<pre><code>                      Open    Close  Day Change\nDate       Symbol\n11-01-2018 AUDARS  14.6193  14.7489      0.1296\n12-01-2018 AUDARS  14.7486  14.7758      0.0272\n</code></pre>\n"}], "owner": {"reputation": 3051, "user_id": 5053559, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/4accba715685dd4825e31d192ce7c67d?s=128&d=identicon&r=PG&f=1", "display_name": "Davtho1983", "link": "https://stackoverflow.com/users/5053559/davtho1983"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 222, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1520458689, "creation_date": 1520457875, "question_id": 49161466, "link": "https://stackoverflow.com/questions/49161466/select-all-rows-in-df-with-the-same-value-in-second-value-of-index-tuple", "title": "Select all rows in df with the same value in second value of index tuple", "body": "<p>In the same vein as my earlier question here <a href=\"https://stackoverflow.com/questions/49157349/why-cant-i-search-for-a-row-in-a-pandas-df-using-a-date-as-part-of-a-tuple-inde/49157800?noredirect=1#comment85320895_49157800\">previous question about pandas index tuples</a></p>\n\n<p>How do I access all rows of a df that have the same second element of a tuple in the index?</p>\n\n<p>I have the following df which continues to the next date. It would be great to show dates with the same Symbol together.</p>\n\n<pre><code>                     Open   Close  Day Change\nDate       Symbol\n11-01-2018 AEDAUD  0.3470  0.3448     -0.0022\n           AEDCAD  0.3415  0.3408     -0.0007\n           AEDCHF  0.2663  0.2656     -0.0007\n           AEDDKK  1.6955  1.6838     -0.0117\n           AEDEUR  0.2277  0.2261     -0.0016\n</code></pre>\n\n<p>I'm having trouble selecting using all the rows with the same value in the Symbol column.</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\n\nprint(pd.__version__)\n\nforex_11 = pd.read_csv('FOREX_20180111.csv', sep=',', parse_dates=['Date'])\nforex_12 = pd.read_csv('FOREX_20180112.csv', sep=',', parse_dates=['Date'])\ntime_format = '%d-%m-%Y'\n\nforex = forex_11.append(forex_12, ignore_index=False)\nforex['Date'] = forex['Date'].dt.strftime(time_format)\ntuples = list(forex[['Date', 'Symbol']].itertuples(index=False, name=None))\nforex.index = pd.MultiIndex.from_tuples(tuples, names=['Date', 'Symbol'])\nforex_open_close = pd.DataFrame(np.array(forex[['Open','Close']]), index=forex.index)\nforex_open_close.columns = ['Open', 'Close']\nforex_open_close['Day Change'] = forex_open_close['Close'] - forex_open_close['Open']\nprint(forex_open_close.head())\n</code></pre>\n"}, {"tags": ["python", "tensorflow", "google-cloud-ml", "tensorflow-transform"], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 9315319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e676a3f58a0d06e460a5cab4f8ee3a60?s=128&d=identicon&r=PG&f=1", "display_name": "Max Deng", "link": "https://stackoverflow.com/users/9315319/max-deng"}, "edited": false, "score": 0, "creation_date": 1520528805, "post_id": 49167177, "comment_id": 85362668, "body": "Doesn&#39;t tf.contrib.factorization.kmeansclustering inherit from tf.estimator? Are you thinking of tf.contrib.learn.kmeansclustering?"}, {"owner": {"reputation": 61, "user_id": 9315319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e676a3f58a0d06e460a5cab4f8ee3a60?s=128&d=identicon&r=PG&f=1", "display_name": "Max Deng", "link": "https://stackoverflow.com/users/9315319/max-deng"}, "edited": false, "score": 0, "creation_date": 1520873612, "post_id": 49167177, "comment_id": 85484684, "body": "I tried the things that you&#39;ve said, but I&#39;m still getting the Tensors in list passed to &#39;values&#39; of &#39;ConcatV2&#39; Op have types that don&#39;t all match error."}, {"owner": {"reputation": 3059, "user_id": 3645038, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-f6ZAgzzMF_Q/AAAAAAAAAAI/AAAAAAAAADY/iu-aZyemLjA/photo.jpg?sz=128", "display_name": "Lak", "link": "https://stackoverflow.com/users/3645038/lak"}, "reply_to_user": {"reputation": 61, "user_id": 9315319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e676a3f58a0d06e460a5cab4f8ee3a60?s=128&d=identicon&r=PG&f=1", "display_name": "Max Deng", "link": "https://stackoverflow.com/users/9315319/max-deng"}, "edited": false, "score": 0, "creation_date": 1520877999, "post_id": 49167177, "comment_id": 85487147, "body": "Ah, I see the problem.  It&#39;s here: <a href=\"https://github.com/tensorflow/tensorflow/blob/r1.6/tensorflow/contrib/factorization/python/ops/kmeans.py#L108\" rel=\"nofollow noreferrer\">github.com/tensorflow/tensorflow/blob/r1.6/tensorflow/contri&zwnj;&#8203;b/&hellip;</a> -- the model simply takes all the features and tries to use them all to compute Euclidean distances. In your case, of course, you have a key which should not be used in the model.  Let me follow up with author(s) of the module on the best way to fix this problem."}], "tags": [], "owner": {"reputation": 3059, "user_id": 3645038, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-f6ZAgzzMF_Q/AAAAAAAAAAI/AAAAAAAAADY/iu-aZyemLjA/photo.jpg?sz=128", "display_name": "Lak", "link": "https://stackoverflow.com/users/3645038/lak"}, "is_accepted": false, "score": 2, "last_activity_date": 1520641078, "last_edit_date": 1520641078, "creation_date": 1520492342, "answer_id": 49167177, "question_id": 49161339, "link": "https://stackoverflow.com/questions/49161339/how-to-use-tf-contrib-estimator-forward-features/49167177#49167177", "title": "How to use tf.contrib.estimator.forward_features", "body": "<p>Please check the following:</p>\n\n<p>(1) Forward features only works with TF.estimator. Ensure that you are not using contrib.learn.estimator.  (update: you are using a class that inherits from tf.estimator)</p>\n\n<p>(2) Make sure your input function reads in the key-column.  So, the key column has to be part of your input dataset.  </p>\n\n<p>(3) In the case of tf.transform, #2 means that the transform metadata has to reflect the schema of the key.  The error message you are seeing seems to indicate that the schema specified it as a float and it's actually a string. Or something like that.</p>\n\n<p>(4) Make sure the key column is NOT used by your model.  So, you should not create a FeatureColumn with it.  In other words, the model will simply pass through the key that is read by the input_fn to the predictor.</p>\n\n<p>(5) If you don't see the key in the output, see if this workaround helps you:</p>\n\n<p><a href=\"https://github.com/GoogleCloudPlatform/training-data-analyst/blob/master/courses/machine_learning/deepdive/07_structured/babyweight/trainer/model.py#L132\" rel=\"nofollow noreferrer\">https://github.com/GoogleCloudPlatform/training-data-analyst/blob/master/courses/machine_learning/deepdive/07_structured/babyweight/trainer/model.py#L132</a></p>\n\n<p>Essentially, forward_features changes the graph in memory but not the exported signature. My workaround fixes this.</p>\n"}], "owner": {"reputation": 61, "user_id": 9315319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e676a3f58a0d06e460a5cab4f8ee3a60?s=128&d=identicon&r=PG&f=1", "display_name": "Max Deng", "link": "https://stackoverflow.com/users/9315319/max-deng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 727, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1520641078, "creation_date": 1520457419, "question_id": 49161339, "link": "https://stackoverflow.com/questions/49161339/how-to-use-tf-contrib-estimator-forward-features", "title": "How to use tf.contrib.estimator.forward_features", "body": "<p>I'm trying to use forward_features to get instance keys for cloudml, but I always get errors that I'm not sure how to fix. The preprocessing section that uses tf.Transform is a modification of <a href=\"https://github.com/GoogleCloudPlatform/cloudml-samples/tree/master/reddit_tft\" rel=\"nofollow noreferrer\">https://github.com/GoogleCloudPlatform/cloudml-samples/tree/master/reddit_tft</a> where the instance key is a string and everything else is a bunch of floats. </p>\n\n<pre><code>def gzip_reader_fn():\n      return tf.TFRecordReader(options=tf.python_io.TFRecordOptions(\n          compression_type=tf.python_io.TFRecordCompressionType.GZIP))\n\n\ndef get_transformed_reader_input_fn(transformed_metadata,\n                                    transformed_data_paths,\n                                    batch_size,\n                                    mode):\n  \"\"\"Wrap the get input features function to provide the runtime arguments.\"\"\"\n  return input_fn_maker.build_training_input_fn(\n      metadata=transformed_metadata,\n      file_pattern=(\n          transformed_data_paths[0] if len(transformed_data_paths) == 1\n          else transformed_data_paths),\n      training_batch_size=batch_size,\n      label_keys=[],\n      #feature_keys=FEATURE_COLUMNS,\n      #key_feature_name='example_id',\n      reader=gzip_reader_fn,\n      reader_num_threads=4,\n      queue_capacity=batch_size * 2,\n      randomize_input=(mode != tf.contrib.learn.ModeKeys.EVAL),\n      num_epochs=(1 if mode == tf.contrib.learn.ModeKeys.EVAL else None))\n\nestimator = KMeansClustering(num_clusters=8, \n      initial_clusters=KMeansClustering.KMEANS_PLUS_PLUS_INIT, \n      kmeans_plus_plus_num_retries=32,\n      relative_tolerance=0.0001)\n\nestimator = tf.contrib.estimator.forward_features(\n      estimator,\n      'example_id')\n\ntrain_input_fn = get_transformed_reader_input_fn(\n      transformed_metadata, args.train_data_paths, args.batch_size,\n      tf.contrib.learn.ModeKeys.TRAIN)\n\nestimator.train(input_fn=train_input_fn)\n</code></pre>\n\n<p>If I were to pass in the keys column along side the training features, then I get the error <code>Tensors in list passed to 'values' of 'ConcatV2' Op have types [float32, float32, string, float32, float32, float32, float32, float32, float32, f\nloat32, float32, float32, float32, float32, float32, float32, float32, float32, float32, float32, float32, float32, float32, float32] that don't all match.</code> However, if I were to not pass in the instance keys during training, then I get the value error saying that the key doesn't exist in the features. Also, if I were to change the key column name in the forward_features section from 'example_id' to some random name that isn't a column, then I still get the former error instead of the latter. Can anyone help me make sense of this?</p>\n"}, {"tags": ["python", "tensorflow"], "answers": [{"tags": [], "owner": {"reputation": 61, "user_id": 1466734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fd26cae2de4c5f8a999a316c499801c?s=128&d=identicon&r=PG", "display_name": "tomhosking", "link": "https://stackoverflow.com/users/1466734/tomhosking"}, "is_accepted": false, "score": 2, "last_activity_date": 1521649808, "creation_date": 1521649808, "answer_id": 49411779, "question_id": 49161316, "link": "https://stackoverflow.com/questions/49161316/trailing-x00-characters-in-tensor-when-numpy-string-array-is-returned-from-tf/49411779#49411779", "title": "Trailing &#39;\\x00&#39; characters in Tensor when numpy string array is returned from tf.py_func", "body": "<p>Returning a list instead of a ndarray seems to work:</p>\n\n<pre><code>def foo(x): \n  a = [['abc', 'd']]\n  return a\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2245, "user_id": 13328195, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GgLRzQgNTdPyVSSZpRFLklZvWySBoyQ69LnHjj9cA=k-s128", "display_name": "Roshin Raphel", "link": "https://stackoverflow.com/users/13328195/roshin-raphel"}, "edited": false, "score": 0, "creation_date": 1611738764, "post_id": 65915310, "comment_id": 116544494, "body": "It would be good to explain your answer."}], "tags": [], "owner": {"reputation": 1, "user_id": 9190873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6be42fcd540319451e7d58f4ed745564?s=128&d=identicon&r=PG", "display_name": "\u5c39\u5b97\u94ed", "link": "https://stackoverflow.com/users/9190873/%e5%b0%b9%e5%ae%97%e9%93%ad"}, "is_accepted": false, "score": 0, "last_activity_date": 1611735770, "creation_date": 1611735770, "answer_id": 65915310, "question_id": 49161316, "link": "https://stackoverflow.com/questions/49161316/trailing-x00-characters-in-tensor-when-numpy-string-array-is-returned-from-tf/65915310#65915310", "title": "Trailing &#39;\\x00&#39; characters in Tensor when numpy string array is returned from tf.py_func", "body": "<p>You should change</p>\n<pre><code>a = np.asarray(['abc', 'd'], dtype=np.string_)\n</code></pre>\n<p>to</p>\n<pre><code>a = np.asarray(['abc', 'd'], dtype=object)\n</code></pre>\n"}], "owner": {"reputation": 410, "user_id": 1154333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0569d963d516ecc15ed44beaa52345fe?s=128&d=identicon&r=PG", "display_name": "Yevgeni Litvin", "link": "https://stackoverflow.com/users/1154333/yevgeni-litvin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 159, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1611735770, "creation_date": 1520457309, "last_edit_date": 1525227952, "question_id": 49161316, "link": "https://stackoverflow.com/questions/49161316/trailing-x00-characters-in-tensor-when-numpy-string-array-is-returned-from-tf", "title": "Trailing &#39;\\x00&#39; characters in Tensor when numpy string array is returned from tf.py_func", "body": "<p>When a numpy string array returned from a function invoked by <code>tf.py_func</code> would have fixed string length with trailing '\\x00' characters instead of \"natural\" variable string length without padding. </p>\n\n<p>Here is an example:</p>\n\n<pre><code>import tensorflow as tf\nimport numpy as np\n\ndef main():\n    def foo(x):\n        a = np.asarray(['abc', 'd'], dtype=np.string_)\n        return a\n\n    with tf.Session() as sess:\n\n        f = tf.py_func(foo, [tf.constant(1)], (tf.string))\n        f = tf.Print(f, [f, tf.shape(f)])\n\n        actual = sess.run(f)\n        print actual\n</code></pre>\n\n<p>Prints out:</p>\n\n<pre><code>[abc d\\000\\000][2]\n</code></pre>\n\n<p>A small workaround I am using is:</p>\n\n<pre><code>f = tf.string_split(f, delimiter='\\x00', skip_empty=True).values\n</code></pre>\n\n<p>Is this a TF issue or am I doing something wrong?</p>\n"}, {"tags": ["python", "postgresql", "python-3.6", "psycopg2"], "comments": [{"owner": {"reputation": 6178, "user_id": 4420934, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a512a390a9af72bcac92dcb903e5cdeb?s=128&d=identicon&r=PG&f=1", "display_name": "syntonym", "link": "https://stackoverflow.com/users/4420934/syntonym"}, "edited": false, "score": 0, "creation_date": 1520458323, "post_id": 49161309, "comment_id": 85328749, "body": "Does it work if you remove the <code>&#39;</code> from the column names? I don&#39;t think they are allowed for columns."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7179686"}, "reply_to_user": {"reputation": 6178, "user_id": 4420934, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a512a390a9af72bcac92dcb903e5cdeb?s=128&d=identicon&r=PG&f=1", "display_name": "syntonym", "link": "https://stackoverflow.com/users/4420934/syntonym"}, "edited": false, "score": 0, "creation_date": 1520458416, "post_id": 49161309, "comment_id": 85328798, "body": "When I do I get \u201ccurrent transaction is aborted, commands ignored until end of transaction block\u201d"}, {"owner": {"reputation": 6178, "user_id": 4420934, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a512a390a9af72bcac92dcb903e5cdeb?s=128&d=identicon&r=PG&f=1", "display_name": "syntonym", "link": "https://stackoverflow.com/users/4420934/syntonym"}, "edited": false, "score": 0, "creation_date": 1520460816, "post_id": 49161309, "comment_id": 85329852, "body": "Probably because your current transaction is aborted, and your commands are ignored until the end of the transaction. End the transaction (<code>ROLLBACK</code>) and try again."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7179686"}, "edited": false, "score": 0, "creation_date": 1520458258, "post_id": 49161515, "comment_id": 85328721, "body": "I guess I could look over and make two update transactions, which is more efficient?"}, {"owner": {"reputation": 6178, "user_id": 4420934, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a512a390a9af72bcac92dcb903e5cdeb?s=128&d=identicon&r=PG&f=1", "display_name": "syntonym", "link": "https://stackoverflow.com/users/4420934/syntonym"}, "edited": false, "score": 0, "creation_date": 1520458293, "post_id": 49161515, "comment_id": 85328733, "body": "The <a href=\"https://www.postgresql.org/docs/9.5/static/sql-update.html\" rel=\"nofollow noreferrer\">Postgrsql documentation</a> explicitly mentions the parenthesis syntax so I don&#39;t think that thats the problem."}, {"owner": {"reputation": 91, "user_id": 4708871, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/q4q1U.gif?s=128&g=1", "display_name": "msiadak", "link": "https://stackoverflow.com/users/4708871/msiadak"}, "reply_to_user": {"reputation": 6178, "user_id": 4420934, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a512a390a9af72bcac92dcb903e5cdeb?s=128&d=identicon&r=PG&f=1", "display_name": "syntonym", "link": "https://stackoverflow.com/users/4420934/syntonym"}, "edited": false, "score": 0, "creation_date": 1520458794, "post_id": 49161515, "comment_id": 85328970, "body": "Thanks for pointing that out @syntonym I wasn&#39;t aware of that syntax in postgres.  My guess would be that single quoting the column names within the parens is causing the syntax error then (that&#39;s where the column cursor in the error message points)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7179686"}, "edited": false, "score": 0, "creation_date": 1520458957, "post_id": 49161515, "comment_id": 85329052, "body": "@msiadak I feel like we&#39;re getting closer but I get the following syntax error: <code>set_clauses = &quot;,&quot;.join([{} = %s for col in col[1:]])</code> and it is pointing to the <code>=</code> ...?"}, {"owner": {"reputation": 91, "user_id": 4708871, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/q4q1U.gif?s=128&g=1", "display_name": "msiadak", "link": "https://stackoverflow.com/users/4708871/msiadak"}, "edited": false, "score": 0, "creation_date": 1520459051, "post_id": 49161515, "comment_id": 85329097, "body": "Sorry, I hit save too quickly on my edit.  Should be fixed now."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7179686"}, "edited": false, "score": 0, "creation_date": 1520459128, "post_id": 49161515, "comment_id": 85329125, "body": "Even closer: <code>PostgreSQL: Cursor execution error! current transaction is aborted, commands ignored until end of transaction block</code>"}, {"owner": {"reputation": 91, "user_id": 4708871, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/q4q1U.gif?s=128&g=1", "display_name": "msiadak", "link": "https://stackoverflow.com/users/4708871/msiadak"}, "edited": false, "score": 0, "creation_date": 1520459220, "post_id": 49161515, "comment_id": 85329175, "body": "Are you doing this in an interactive session?  You may need to create a new cursor or start a new transaction."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7179686"}, "edited": false, "score": 0, "creation_date": 1520459312, "post_id": 49161515, "comment_id": 85329216, "body": "Ignore me, I wasn&#39;t closing the current cursor because I was commiting the cursor and not the connection! derp! Thank you for all your help! Follow me on twitter @michealjroberts I&#39;d like to propose a reward"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7179686"}, "edited": false, "score": 0, "creation_date": 1520459800, "post_id": 49161515, "comment_id": 85329425, "body": "@msiadak Hi, just another question ... How would I go about constructing the same <code>set_values</code> method for this execution command: <code>cur_psql.execute(&quot;INSERT INTO {0} {1} VALUES {2} WHERE id={3}&quot;.format(table[0], col[1:], row[1:], col[0]))</code> ??"}, {"owner": {"reputation": 91, "user_id": 4708871, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/q4q1U.gif?s=128&g=1", "display_name": "msiadak", "link": "https://stackoverflow.com/users/4708871/msiadak"}, "edited": false, "score": 0, "creation_date": 1520460030, "post_id": 49161515, "comment_id": 85329523, "body": "I think you&#39;re going to want row[0] at the end, otherwise you&#39;ll be doing WHERE id = id (which will match all rows)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7179686"}, "reply_to_user": {"reputation": 91, "user_id": 4708871, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/q4q1U.gif?s=128&g=1", "display_name": "msiadak", "link": "https://stackoverflow.com/users/4708871/msiadak"}, "edited": false, "score": 0, "creation_date": 1520460033, "post_id": 49161515, "comment_id": 85329525, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/166428/discussion-between-michael-roberts-and-msiadak\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 91, "user_id": 4708871, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/q4q1U.gif?s=128&g=1", "display_name": "msiadak", "link": "https://stackoverflow.com/users/4708871/msiadak"}, "is_accepted": true, "score": 0, "last_activity_date": 1520459021, "last_edit_date": 1520459021, "creation_date": 1520458153, "answer_id": 49161515, "question_id": 49161309, "link": "https://stackoverflow.com/questions/49161309/sql-syntax-error-with-psycopg2-python/49161515#49161515", "title": "SQL syntax error with psycopg2 (python)", "body": "<p>You'll need to split this into separate SQL statements or you'll need to do some kind of looping over your column value pairs.  I would need more information to write the corrected Python code, but your SQL should look something like this:</p>\n\n<p><code>UPDATE table SET col = val WHERE id = id_val</code></p>\n\n<p>You're doing something like:</p>\n\n<p><code>UPDATE table SET ('col1', 'col2') = ('val1', 'val2')</code></p>\n\n<p>If you want to update multiple columns in one statement, you'd do this:</p>\n\n<p><code>UPDATE table SET col1 = val1, col2 = val2 WHERE id = id_val</code></p>\n\n<p>Keep in mind you'll need to escape your values if they're character columns (but not if they're numeric), like so:</p>\n\n<p><code>UPDATE table SET col1 = 'character value', col2 = 123 WHERE id = 1</code></p>\n\n<p>Ultimately, this should be accomplished with bind variables rather than string formatting, as string formatting can expose your code to SQL injection attacks (might not be a concern if this is strictly a utility script that you're running yourself but it's a good habit to get into regardless).  You can find the documentation for bind variables in psycopg2 here: <a href=\"http://initd.org/psycopg/docs/usage.html#query-parameters\" rel=\"nofollow noreferrer\">http://initd.org/psycopg/docs/usage.html#query-parameters</a></p>\n\n<p>Following my advice above would result in something like this:</p>\n\n<pre><code>set_clauses = \",\".join([\"{} = %s\".format(col) for col in col[1:]])\nquery = \"update {} set {} where id = {}\".format(table[0], set_clauses, row[0])\ncur_psql.execute(query, row[1:])\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7179686"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 531, "favorite_count": 0, "accepted_answer_id": 49161515, "answer_count": 1, "score": 0, "last_activity_date": 1520459021, "creation_date": 1520457281, "question_id": 49161309, "link": "https://stackoverflow.com/questions/49161309/sql-syntax-error-with-psycopg2-python", "title": "SQL syntax error with psycopg2 (python)", "body": "<p>So I'm attempting to write my own sqlite3 to postgresql migration script, which takes all the tables from one database to another.</p>\n\n<p>I'm currently seeing the following syntax error:</p>\n\n<pre><code>ERROR: syntax error at or near \"'name'\"\nLINE 1: UPDATE django_site SET ('name', 'domain')=('127.0.0.1:8080',...\n                                ^\n</code></pre>\n\n<p>It's not quite liking <code>('name', 'domain')</code> ... I'm perhaps thinking there's something subtle I'm missing...</p>\n\n<p><code>('name', 'domain')</code> is generated from the following line of code:</p>\n\n<pre><code>col = tuple([desc[0] for desc in self.cur_sql3.description])\n</code></pre>\n\n<p>i.e., taking all of the column names as a generated <code>list</code> then converting to <code>tuple</code> type.</p>\n\n<p>And the SQL query is currently being built as such:</p>\n\n<pre><code>cur_psql.execute(\"UPDATE {0} SET {1}={2} WHERE id={3}\".format(table[0], col[1:], row[1:], col[0]))\n</code></pre>\n\n<p><code>table[0]</code> is the <strong>table name</strong>, <code>col[1:]</code> is everything but the primary id key, <code>row[1:]</code> are all the row values minus the primary key, and col[0] is the <strong>primary key value</strong>, e.g., <code>1,2,3,4</code> or <code>5</code> etc</p>\n\n<p>Any obvious tips to avoid this issue?</p>\n"}, {"tags": ["python", "nlp", "nltk"], "comments": [{"owner": {"reputation": 93705, "user_id": 610569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0e9087f2672b0e4f28d91266acf9ce57?s=128&d=identicon&r=PG", "display_name": "alvas", "link": "https://stackoverflow.com/users/610569/alvas"}, "edited": false, "score": 0, "creation_date": 1520463872, "post_id": 49161277, "comment_id": 85331095, "body": "Duplicate of <a href=\"https://stackoverflow.com/questions/31689621/how-to-traverse-an-nltk-tree-object\" title=\"how to traverse an nltk tree object\">stackoverflow.com/questions/31689621/&hellip;</a> ?"}, {"owner": {"reputation": 61, "user_id": 4844747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c465f9b77a1cd75b6d2d05e40bad0d03?s=128&d=identicon&r=PG", "display_name": "Erica", "link": "https://stackoverflow.com/users/4844747/erica"}, "reply_to_user": {"reputation": 93705, "user_id": 610569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0e9087f2672b0e4f28d91266acf9ce57?s=128&d=identicon&r=PG", "display_name": "alvas", "link": "https://stackoverflow.com/users/610569/alvas"}, "edited": false, "score": 0, "creation_date": 1520474260, "post_id": 49161277, "comment_id": 85333905, "body": "I looked at that question; my question is specifically about how to use the NLTK method breadth_first. That question is about traversing depth first, anyway."}, {"owner": {"reputation": 93705, "user_id": 610569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0e9087f2672b0e4f28d91266acf9ce57?s=128&d=identicon&r=PG", "display_name": "alvas", "link": "https://stackoverflow.com/users/610569/alvas"}, "edited": false, "score": 0, "creation_date": 1520489159, "post_id": 49161277, "comment_id": 85338163, "body": "Interesting, is the recursion still there without explicit break? If so, then it&#39;s a bug =)"}], "answers": [{"tags": [], "owner": {"reputation": 41, "user_id": 2344891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41333b92bec8ef410066f40c4e33bcf3?s=128&d=identicon&r=PG", "display_name": "tevn", "link": "https://stackoverflow.com/users/2344891/tevn"}, "is_accepted": false, "score": 4, "last_activity_date": 1520535429, "last_edit_date": 1520535429, "creation_date": 1520486441, "answer_id": 49165942, "question_id": 49161277, "link": "https://stackoverflow.com/questions/49161277/how-do-you-use-nltk-util-breadth-first-to-search/49165942#49165942", "title": "How do you use nltk.util.breadth_first to search?", "body": "<p>The nltk.util.breadth_first method does a breadth-first <strong>traversal</strong> of the tree you provide as a parameter. To use it as a search mechanism you'll need to check each returned result from the generator for your value.</p>\n\n<p>If you iterate through the results of the generator that's returned by breadth_first and output the results at each step of the traversal you can see that it encounters each node in the tree (in BFS order) and ultimately the leaf nodes and character nodes of the tree as well.</p>\n\n<p>So for your case you'd want to use this generator and at each node check some value to see if you've arrived at a node with the symbol or leaf token that you're looking for in your search.</p>\n\n<p>Here's a sample sentence, its parse tree from nltk, and a traversal through the tree.</p>\n\n<p>Good luck!</p>\n\n<pre><code>&gt;&gt;&gt; sentence\n'They capture mice in the cells'\n&gt;&gt;&gt; parse\nTree('S', [Tree('NP', [Tree('PRP', ['They'])]), Tree('VP', [Tree('VBP', ['capture']), Tree('NP', [Tree('Nom', [Tree('Nom', [Tree('NNS', ['mice'])]), Tree('PP', [Tree('Prep', ['in']), Tree('NP', [Tree('Det', ['the']), Tree('Nom', [Tree('NNS', ['cells'])])])])])])])])\n&gt;&gt;&gt; i = 0\n&gt;&gt;&gt; for node in breadth_first(parse):\n...     print(\"*\"*10)\n...     print(node)\n...     print(type(node))\n...     if i &gt; 10:\n...             break\n...     i += 1\n...\n**********\n(S\n  (NP (PRP They))\n  (VP\n    (VBP capture)\n    (NP\n      (Nom\n        (Nom (NNS mice))\n        (PP (Prep in) (NP (Det the) (Nom (NNS cells))))))))\n&lt;class 'nltk.tree.Tree'&gt;\n**********\n(NP (PRP They))\n&lt;class 'nltk.tree.Tree'&gt;\n**********\n(VP\n  (VBP capture)\n  (NP\n    (Nom\n      (Nom (NNS mice))\n      (PP (Prep in) (NP (Det the) (Nom (NNS cells)))))))\n&lt;class 'nltk.tree.Tree'&gt;\n**********\n(PRP They)\n&lt;class 'nltk.tree.Tree'&gt;\n**********\n(VBP capture)\n&lt;class 'nltk.tree.Tree'&gt;\n**********\n(NP\n  (Nom\n    (Nom (NNS mice))\n    (PP (Prep in) (NP (Det the) (Nom (NNS cells))))))\n&lt;class 'nltk.tree.Tree'&gt;\n**********\nThey\n&lt;class 'str'&gt;\n**********\ncapture\n&lt;class 'str'&gt;\n**********\n(Nom\n  (Nom (NNS mice))\n  (PP (Prep in) (NP (Det the) (Nom (NNS cells)))))\n&lt;class 'nltk.tree.Tree'&gt;\n**********\nT\n&lt;class 'str'&gt;\n**********\nh\n&lt;class 'str'&gt;\n**********\ne\n&lt;class 'str'&gt;\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 4844747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c465f9b77a1cd75b6d2d05e40bad0d03?s=128&d=identicon&r=PG", "display_name": "Erica", "link": "https://stackoverflow.com/users/4844747/erica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 267, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1520535429, "creation_date": 1520457161, "last_edit_date": 1520457574, "question_id": 49161277, "link": "https://stackoverflow.com/questions/49161277/how-do-you-use-nltk-util-breadth-first-to-search", "title": "How do you use nltk.util.breadth_first to search?", "body": "<p>I'm trying to use breadth_first to search for (first) a specific leaf word and then a certain label (NP) in a ParentedTree.  I'd really rather not implement it myself if there's already a method for it. This is what I've tried (including how I made the tree, in case that's where I messed up):</p>\n\n<pre><code>import nltk\nfrom nltk.util import breadth_first\n\ngrammar = nltk.data.load(\"/path/to/grammar.cfg\")\nparser = nltk.parse.EarleyChartParser(grammar)\nsent = \"They are happy people\"\nparse1 = list(parser.parse(sent.split()))\ntree1 = nltk.tree.ParentedTree.convert(parse1[0])\nbf = breadth_first(tree1)\n</code></pre>\n\n<p>This gives me a generator object, but I'm not sure how to use it to search for what I want (the pronoun \"They\").  I tried doing a simple \"for node in bf: print(node)\" and it printed every single letter of the string on a line by itself, repeating forever, until I had to close the window.  </p>\n\n<p>I've read the docs and I've done a lot of googling, but I can't find an example of it actually being used for searching.  What am I doing wrong? </p>\n"}, {"tags": ["python", "arrays", "numpy"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 9361422, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Mik K", "link": "https://stackoverflow.com/users/9361422/mik-k"}, "edited": false, "score": 0, "creation_date": 1520457622, "post_id": 49161321, "comment_id": 85328390, "body": "thank you very much ascripter. I hadnt read about moveaxis. Thanks again"}], "tags": [], "owner": {"reputation": 4200, "user_id": 3104974, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0bf327f4729e0af1e6bf0582391fad75?s=128&d=identicon&r=PG&f=1", "display_name": "ascripter", "link": "https://stackoverflow.com/users/3104974/ascripter"}, "is_accepted": false, "score": 0, "last_activity_date": 1520457335, "creation_date": 1520457335, "answer_id": 49161321, "question_id": 49161223, "link": "https://stackoverflow.com/questions/49161223/convert-numpy-array-of-square-arrays-to-numpy-square-array-conserving-layout/49161321#49161321", "title": "Convert Numpy array of square arrays to numpy square array, conserving &quot;layout&quot;", "body": "<p>A simple reshape doesn't suffice since you have to change the order of the axes first:</p>\n\n<pre><code>import numpy as np\na = np.array([[[0,1,2],[3,4,5],[6,7,8]],[[9,10,11],[12,13,14],[15,16,17]],[[18,19,20],[21,22,23],[24,25,26]]])\nnp.moveaxis(a, 0, 1).reshape(3,9)\n\n[[ 0  1  2  9 10 11 18 19 20]\n [ 3  4  5 12 13 14 21 22 23]\n [ 6  7  8 15 16 17 24 25 26]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 386, "user_id": 1560876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b969e0db93f83186b71b6b5863cec794?s=128&d=identicon&r=PG", "display_name": "pthibault", "link": "https://stackoverflow.com/users/1560876/pthibault"}, "is_accepted": false, "score": 2, "last_activity_date": 1520457787, "creation_date": 1520457787, "answer_id": 49161437, "question_id": 49161223, "link": "https://stackoverflow.com/questions/49161223/convert-numpy-array-of-square-arrays-to-numpy-square-array-conserving-layout/49161437#49161437", "title": "Convert Numpy array of square arrays to numpy square array, conserving &quot;layout&quot;", "body": "<p>Slightly cleaner than <code>moveaxis</code> maybe:</p>\n\n<pre><code>import numpy as np\na = np.arange(27).reshape(3,3,3)\na.swapaxes(0,1).reshape(3,-1)\narray([[ 0,  1,  2,  9, 10, 11, 18, 19, 20],\n   [ 3,  4,  5, 12, 13, 14, 21, 22, 23],\n   [ 6,  7,  8, 15, 16, 17, 24, 25, 26]])\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3394, "user_id": 7727583, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/iVG54.jpg?s=128&g=1", "display_name": "Yannic Hamann", "link": "https://stackoverflow.com/users/7727583/yannic-hamann"}, "edited": false, "score": 0, "creation_date": 1520458227, "post_id": 49161505, "comment_id": 85328707, "body": "should be probably <code>np.stack</code> instead"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "reply_to_user": {"reputation": 3394, "user_id": 7727583, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/iVG54.jpg?s=128&g=1", "display_name": "Yannic Hamann", "link": "https://stackoverflow.com/users/7727583/yannic-hamann"}, "edited": false, "score": 1, "creation_date": 1520458320, "post_id": 49161505, "comment_id": 85328748, "body": "@YannicHamann   I initially suggested <code>stack</code>, but in this case it doesn&#39;t help.  <code>hstack</code> or `concatenate on axis 1 is so much simpler."}], "tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": false, "score": 1, "last_activity_date": 1520458571, "last_edit_date": 1520458571, "creation_date": 1520458067, "answer_id": 49161505, "question_id": 49161223, "link": "https://stackoverflow.com/questions/49161223/convert-numpy-array-of-square-arrays-to-numpy-square-array-conserving-layout/49161505#49161505", "title": "Convert Numpy array of square arrays to numpy square array, conserving &quot;layout&quot;", "body": "<p>Think of this as a list of 3 arrays, that you want to join horizontally:</p>\n\n<pre><code>In [171]: arr = np.arange(27).reshape(3,3,3)\nIn [172]: np.hstack(arr)\nOut[172]: \narray([[ 0,  1,  2,  9, 10, 11, 18, 19, 20],\n       [ 3,  4,  5, 12, 13, 14, 21, 22, 23],\n       [ 6,  7,  8, 15, 16, 17, 24, 25, 26]])\n\nIn [173]: arr\nOut[173]: \narray([[[ 0,  1,  2],\n        [ 3,  4,  5],\n        [ 6,  7,  8]],\n\n       [[ 9, 10, 11],\n        [12, 13, 14],\n        [15, 16, 17]],\n\n       [[18, 19, 20],\n        [21, 22, 23],\n        [24, 25, 26]]])\n</code></pre>\n\n<p>Of I like to test ideas with arrays with differing dimensions.  Then the various axis manipulations becomes more obvious. </p>\n\n<pre><code>In [174]: arr = np.arange(24).reshape(2,3,4)\nIn [175]: arr\nOut[175]: \narray([[[ 0,  1,  2,  3],\n        [ 4,  5,  6,  7],\n        [ 8,  9, 10, 11]],\n\n       [[12, 13, 14, 15],\n        [16, 17, 18, 19],\n        [20, 21, 22, 23]]])\nIn [176]: np.hstack(arr)\nOut[176]: \narray([[ 0,  1,  2,  3, 12, 13, 14, 15],\n       [ 4,  5,  6,  7, 16, 17, 18, 19],\n       [ 8,  9, 10, 11, 20, 21, 22, 23]])\n\nIn [177]: np.vstack(arr)\nOut[177]: \narray([[ 0,  1,  2,  3],\n       [ 4,  5,  6,  7],\n       [ 8,  9, 10, 11],\n       [12, 13, 14, 15],\n       [16, 17, 18, 19],\n       [20, 21, 22, 23]])\n</code></pre>\n\n<p>But there's nothing wrong with the variations on the transpose and reshape answers, if starting from a 3d array (as opposed to a list of arrays):</p>\n\n<pre><code>In [187]: arr.transpose(1,0,2).reshape(3,-1)\nOut[187]: \narray([[ 0,  1,  2,  9, 10, 11, 18, 19, 20],\n       [ 3,  4,  5, 12, 13, 14, 21, 22, 23],\n       [ 6,  7,  8, 15, 16, 17, 24, 25, 26]])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "is_accepted": false, "score": 1, "last_activity_date": 1520458703, "creation_date": 1520458703, "answer_id": 49161634, "question_id": 49161223, "link": "https://stackoverflow.com/questions/49161223/convert-numpy-array-of-square-arrays-to-numpy-square-array-conserving-layout/49161634#49161634", "title": "Convert Numpy array of square arrays to numpy square array, conserving &quot;layout&quot;", "body": "<p>You could use <code>np.block</code></p>\n\n<pre><code>&gt;&gt;&gt; import numpy as np\n&gt;&gt;&gt; X = np.arange(27).reshape(3, 3, 3)\n&gt;&gt;&gt; \n&gt;&gt;&gt; np.block(list(X))\narray([[ 0,  1,  2,  9, 10, 11, 18, 19, 20],\n       [ 3,  4,  5, 12, 13, 14, 21, 22, 23],\n       [ 6,  7,  8, 15, 16, 17, 24, 25, 26]])\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 9361422, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Mik K", "link": "https://stackoverflow.com/users/9361422/mik-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1520460702, "creation_date": 1520456893, "last_edit_date": 1520460702, "question_id": 49161223, "link": "https://stackoverflow.com/questions/49161223/convert-numpy-array-of-square-arrays-to-numpy-square-array-conserving-layout", "title": "Convert Numpy array of square arrays to numpy square array, conserving &quot;layout&quot;", "body": "<p>First time i ask something here. I am kind of 'blocked'.</p>\n\n<p>I have an array composed of n x n arrays (lets take n=3 for simplification):</p>\n\n<pre><code>[\n    [\n        [ 0,  1,  2],\n        [ 3,  4,  5],\n        [ 6,  7,  8]\n    ],\n   [\n        [9, 10, 11],\n        [12, 13, 14],\n        [15, 16, 17]\n    ],\n   [\n        [18, 19, 20],\n        [21, 22, 23],\n        [24, 25, 26]\n    ]\n        ]\n</code></pre>\n\n<p>(altho my array contains a lot more than 3 3*3 arrays)</p>\n\n<p>i want to achieve a 2D array like this :</p>\n\n<pre><code>[0,1,2,9,10,11,18,19,20]  \n[3,4,5,12,13,14,21,22,23]    \n[6,7,8,15,16,17,24,25,26]\n</code></pre>\n\n<p>Is there a trick i haven't thought of because i cant think of any way to accomplish the transformation.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "gis", "polygon", "postgis", "shapefile"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 9458916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d249a2244389aba79d96e6fe15e4e61c?s=128&d=identicon&r=PG&f=1", "display_name": "J. Yu", "link": "https://stackoverflow.com/users/9458916/j-yu"}, "edited": false, "score": 0, "creation_date": 1520465532, "post_id": 49161526, "comment_id": 85331658, "body": "This is what I&#39;m seeing:  GEOGCS[&quot;GCS_WGS_1984&quot;,DATUM[&quot;D_WGS_1984&quot;,SPHEROID[&quot;WGS_1984&quot;&zwnj;&#8203;,6378137,298.2572235&zwnj;&#8203;63]],PRIMEM[&quot;Greenwi&zwnj;&#8203;ch&quot;,0],UNIT[&quot;Degree&quot;&zwnj;&#8203;,0.01745329251994329&zwnj;&#8203;5]]  Trying to read up more about it now, but generally very new to geospatial data and would love any pointers you may have! Thank you!"}], "tags": [], "owner": {"reputation": 54296, "user_id": 128397, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/22b05e50077230ba919b240af4bc13cd?s=128&d=identicon&r=PG", "display_name": "Daniel Pryden", "link": "https://stackoverflow.com/users/128397/daniel-pryden"}, "is_accepted": true, "score": 1, "last_activity_date": 1520458185, "creation_date": 1520458185, "answer_id": 49161526, "question_id": 49161219, "link": "https://stackoverflow.com/questions/49161219/understanding-my-shapefiles-coordinate-points-not-lat-lon-and-why-spatial-joi/49161526#49161526", "title": "Understanding my shapefile&#39;s coordinate points (not lat/lon) and why spatial joins own&#39;t work", "body": "<p>Perhaps it goes without saying, but to spatially join two datasets they need to be in the same coordinate system. Latitude/longitude are coordinates in some geographic coordinate system (and there is more than one, so make sure you know which!).</p>\n\n<p>Shapefiles can include coordinates in a variety of coordinate systems. Typically there is a <code>.prj</code> file that is distributed with the shapefile that describes the coordinate system information.</p>\n\n<p>Looking at your data, I'd guess that it's in eastings and northings, measured in meters, in some projected coordinate system. So before you can spatially join with data in a geographic coordinate system you will first need to <em>unproject</em> the data (go from a projected or planar coordinate system to a spheroidal one), and then possibly perform a <em>datum shift</em> (adjust for differences between different geographic coordinate systems).</p>\n\n<p>I don't know about geopandas or shapely, but I know the <code>proj4</code> library has good Python bindings and can perform these operations. But either way you'll need the data in the <code>.prj</code> file.</p>\n"}], "owner": {"reputation": 3, "user_id": 9458916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d249a2244389aba79d96e6fe15e4e61c?s=128&d=identicon&r=PG&f=1", "display_name": "J. Yu", "link": "https://stackoverflow.com/users/9458916/j-yu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 49161526, "answer_count": 1, "score": 0, "last_activity_date": 1520458185, "creation_date": 1520456881, "question_id": 49161219, "link": "https://stackoverflow.com/questions/49161219/understanding-my-shapefiles-coordinate-points-not-lat-lon-and-why-spatial-joi", "title": "Understanding my shapefile&#39;s coordinate points (not lat/lon) and why spatial joins own&#39;t work", "body": "<p>I downloaded a shapefile of <a href=\"https://datos.gob.mx/busca/dataset/ubicacion-de-codigos-postales-en-mexico/resource/fba3f792-cb83-42da-94eb-36d3befd0d66\" rel=\"nofollow noreferrer\">Postal Codes in Mexico City here</a>. </p>\n\n<p>I'm trying to do a spatial join to see which zip codes intersect with a particular zone I'm interested in.</p>\n\n<p>But when I load the postal codes:</p>\n\n<pre><code>codigos = gpd.read_file('/Users/jaehakyu/Documents/Shapefiles/Mexico Postal Codes/CP_CdMx/CP_09CDMX_v4.shp')\ncodigos.head()\n</code></pre>\n\n<p>I notice strange output in the polygons for these postal codes. They're not comprised of lat/lon coordinates. Instead, they look like this:</p>\n\n<blockquote>\n  <p>POLYGON ((2794650.259300001 819469.0967999995, 2794601.180299997 819320.3825999983, 2794595.038099997 819303.2646000013, 2794581.846100003 819266.4985000007, 2794552.451700002 819177.5449000001, 2794539.257799998 819142.9415000007, 2794490.202399999 819013.9316000007, 2794461.8829 819006.0326999985, 2794333.362800002 818970.185899999, 2794287.639799997 818974.6688000001, 2794223.908 818980.9173000008, 2794210.812299997 818904.4486999999, 2794187.823399998 818901.436999999, 2794164.019500002 818896.5203000009, 2794128.538500004 818896.0044, 2794122.643299997 818895.9186999984, 2794077.665700004 818894.2122999988, 2794066.248400003 818891.7342999987, 2794046.369499996 818886.5003999993, 2794006.863200001 818880.5144000016, 2793988.908100002 818882.2074999996, 2793965.905199997 818887.1242000014, 2793955.3869 818892.3366999999, 2793903.004799999 818932.752799999, 2793796.985100001 818913.691399999, 2793741.294 818906.6301999986, 2793596.247299999 818889.4554999992, 2793571.957000002 819033.999499999, 2793552.235299997 819034.7226999998, 2793527.926200002 819036.2868999988, 2793444.091899998 818973.02, 2793442.978699997 819118.5722999983, 2793437.997699998 819133.6957999989, 2793430.251699999 819144.4745000005, 2793414.9217 819147.9660999998, 2793334.550800003 819163.0062999986, 2793290.008699998 819170.9169000015, 2793213.590499997 819263.4613000005, 2793110.11 819265.5681000017, 2793117.498800002 819308.4505000003, 2793146.486199997 819475.7197000012, 2793186.218999997 819462.5135999992, 2793249.972900003 819441.3235000001, 2793345.965300001 819414.0322999991, 2793436.257799998 819398.3966999985, 2793517.804700002 819384.2754999995, 2793565.4133 819377.8266999982, 2793601.6972 819374.2901000008, 2793787.7729 819356.7437000014, 2793841.170500003 819343.5784999989, 2793848.679399997 819336.9222000018, 2793862.701300003 819415.7888999991, 2793896.867299996 819558.6755999997, 2793912.430100001 819623.6581000015, 2793934.3768 819672.3953000009, 2793959.285499997 819765.1700000018, 2793964.056900002 819787.6761000007, 2793984.413400002 819883.6871000007, 2793997.486699998 819948.0406999998, 2794004.954099998 819981.5982000008, 2794111.821699999 819973.7314999998, 2794230.936700001 819964.9633999988, 2794347.152999997 819955.9384000003, 2794343.185599998 819899.5188000016, 2794458.9071 819890.1013999991, 2794764.265699998 819868.1314000003, 2794762.4494 819852.9858999997, 2794736.8922 819766.9114000015, 2794727.679099999 819735.4631999992, 2794672.272100002 819545.7978999987, 2794650.259300001 819469.0967999995))</p>\n</blockquote>\n\n<p>I tried doing a spatial join anyway, but no luck. I've also tried mapping these polygons using CartoDB, but they do not show up. I'm not sure what I'm dealing with and would love some help understanding:</p>\n\n<p>(1) What the coordinate points here are.\n(2) How to get them to lat/lon so that a spatial join can work</p>\n\n<p>Thank you! I am working on this using geopandas and shapely in Python, by the way.</p>\n"}, {"tags": ["python", "tensorflow", "machine-learning", "callback", "keras"], "comments": [{"owner": {"reputation": 8153, "user_id": 323316, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/E6BbN.png?s=128&g=1", "display_name": "satnhak", "link": "https://stackoverflow.com/users/323316/satnhak"}, "edited": false, "score": 0, "creation_date": 1549881360, "post_id": 49161208, "comment_id": 96049459, "body": "Are you using a generator, that might register an implicit callback."}, {"owner": {"reputation": 4310, "user_id": 3633250, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100001152695429/picture?type=large", "display_name": "Maksim Khaitovich", "link": "https://stackoverflow.com/users/3633250/maksim-khaitovich"}, "reply_to_user": {"reputation": 8153, "user_id": 323316, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/E6BbN.png?s=128&g=1", "display_name": "satnhak", "link": "https://stackoverflow.com/users/323316/satnhak"}, "edited": false, "score": 0, "creation_date": 1549897430, "post_id": 49161208, "comment_id": 96058928, "body": "@briantyler, yes, I did use the generator. It was rather slow (was delivering a batch of images randomly selected from a folder). But are you saying that generators get registered as &quot;On batch end&quot;?"}, {"owner": {"reputation": 8153, "user_id": 323316, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/E6BbN.png?s=128&g=1", "display_name": "satnhak", "link": "https://stackoverflow.com/users/323316/satnhak"}, "edited": false, "score": 0, "creation_date": 1550661432, "post_id": 49161208, "comment_id": 96348547, "body": "I was just speculating, seems reasonable though."}, {"owner": {"reputation": 439, "user_id": 5572627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c35063d65d78b091a198f35461b2e85e?s=128&d=identicon&r=PG&f=1", "display_name": "Isaac Sim", "link": "https://stackoverflow.com/users/5572627/isaac-sim"}, "edited": false, "score": 0, "creation_date": 1564651543, "post_id": 49161208, "comment_id": 101104350, "body": "And what&#39;s the solution?"}, {"owner": {"reputation": 4310, "user_id": 3633250, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100001152695429/picture?type=large", "display_name": "Maksim Khaitovich", "link": "https://stackoverflow.com/users/3633250/maksim-khaitovich"}, "reply_to_user": {"reputation": 439, "user_id": 5572627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c35063d65d78b091a198f35461b2e85e?s=128&d=identicon&r=PG&f=1", "display_name": "Isaac Sim", "link": "https://stackoverflow.com/users/5572627/isaac-sim"}, "edited": false, "score": 0, "creation_date": 1564743827, "post_id": 49161208, "comment_id": 101140409, "body": "@IsaacSim no solution. The message is just confusing, actually it was related to generator (which was picking files for training) being slower than training of model. I managed to slightly speed it up by rewriting it + I started to use larger models which train longer on each batch so the message disappeared"}], "answers": [{"tags": [], "owner": {"reputation": 1330, "user_id": 3336192, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/617aa6524dfd4382cd8685d82174d9e9?s=128&d=identicon&r=PG&f=1", "display_name": "ben", "link": "https://stackoverflow.com/users/3336192/ben"}, "is_accepted": true, "score": 6, "last_activity_date": 1566305393, "creation_date": 1566305393, "answer_id": 57574101, "question_id": 49161208, "link": "https://stackoverflow.com/questions/49161208/keras-method-on-batch-end-is-slow-but-only-callback-i-have-is-checkpoint/57574101#57574101", "title": "Keras - method on_batch_end is slow but only callback I have is checkpoint", "body": "<p>This is most probably a Generator (<code>fit_generator()</code>) issue. When using a generator as data source it has to be called at the end of a batch. Consider revisiting your generator code, using multiprocessing (<code>workers &gt; 1</code>) or a higher batchsize (if possible) </p>\n"}], "owner": {"reputation": 4310, "user_id": 3633250, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100001152695429/picture?type=large", "display_name": "Maksim Khaitovich", "link": "https://stackoverflow.com/users/3633250/maksim-khaitovich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3294, "favorite_count": 1, "accepted_answer_id": 57574101, "answer_count": 1, "score": 5, "last_activity_date": 1566305393, "creation_date": 1520456818, "question_id": 49161208, "link": "https://stackoverflow.com/questions/49161208/keras-method-on-batch-end-is-slow-but-only-callback-i-have-is-checkpoint", "title": "Keras - method on_batch_end is slow but only callback I have is checkpoint", "body": "<p>I set up a network with keras using TensorFlow backend.</p>\n\n<p>When I train my network I often times keep getting message:</p>\n\n<pre><code>UserWarning: Method on_batch_end() is slow compared to the batch update (0.195523). Check your callbacks.\n  % delta_t_median)\n</code></pre>\n\n<p>The issue is that my network is set up with only checkpoint callback:</p>\n\n<pre><code>checkpoint = ModelCheckpoint(filepath, monitor='val_loss', verbose=1, save_best_only=True, mode='min')\ncallbacks_list = [checkpoint]\n</code></pre>\n\n<p>As far as I see in documentation this method is called only on epoch end, so it can't slow down <code>on_batch_end</code> method. Can anyone provide some information on what is the issue?</p>\n"}, {"tags": ["python", "python-3.x", "pandas", "pandas-groupby"], "comments": [{"owner": {"reputation": 375, "user_id": 9290070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7014eb039a5be3bbfb407d05d844e2b1?s=128&d=identicon&r=PG&f=1", "display_name": "Maile Cupo", "link": "https://stackoverflow.com/users/9290070/maile-cupo"}, "edited": false, "score": 0, "creation_date": 1520458068, "post_id": 49161202, "comment_id": 85328620, "body": "Apologies for the format of the pictures, is there a better way to display dataframes?"}, {"owner": {"reputation": 18433, "user_id": 826983, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/8fc679891e6c3cf3aec3b353f3fb9bd6?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan Falk", "link": "https://stackoverflow.com/users/826983/stefan-falk"}, "edited": false, "score": 0, "creation_date": 1520460894, "post_id": 49161202, "comment_id": 85329883, "body": "Please post the data and not such screenshots. Just <code>print(df)</code> and copy paste the output or something like that. Hint: If it&#39;s too lange <code>print(df.sample(5))</code>."}], "answers": [{"tags": [], "owner": {"reputation": 1410, "user_id": 5017267, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/7crzI.png?s=128&g=1", "display_name": "gented", "link": "https://stackoverflow.com/users/5017267/gented"}, "is_accepted": false, "score": 1, "last_activity_date": 1520462062, "last_edit_date": 1520462062, "creation_date": 1520460772, "answer_id": 49162057, "question_id": 49161202, "link": "https://stackoverflow.com/questions/49161202/pandas-aggregate-column-based-on-values-in-a-different-column/49162057#49162057", "title": "Pandas: aggregate column based on values in a different column", "body": "<p>First select the indeces of the dataframe whose variable value is maximum</p>\n\n<pre><code>max_indeces = df.groupby(['Group'])['date'].idxmax()\n</code></pre>\n\n<p>and then select the corresponding rows in the original dataframe, maybe only indicating the actual value you are interested in:</p>\n\n<pre><code>df.iloc[max_indeces]['Val']\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 375, "user_id": 9290070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7014eb039a5be3bbfb407d05d844e2b1?s=128&d=identicon&r=PG&f=1", "display_name": "Maile Cupo", "link": "https://stackoverflow.com/users/9290070/maile-cupo"}, "edited": false, "score": 0, "creation_date": 1520529098, "post_id": 49162277, "comment_id": 85362866, "body": "Yes, this was exactly what I was looking for. Thanks. I didn&#39;t even know that it was possible to iloc multiple lines from the original dataframe using a list of indices."}, {"owner": {"reputation": 18433, "user_id": 826983, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/8fc679891e6c3cf3aec3b353f3fb9bd6?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan Falk", "link": "https://stackoverflow.com/users/826983/stefan-falk"}, "reply_to_user": {"reputation": 375, "user_id": 9290070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7014eb039a5be3bbfb407d05d844e2b1?s=128&d=identicon&r=PG&f=1", "display_name": "Maile Cupo", "link": "https://stackoverflow.com/users/9290070/maile-cupo"}, "edited": false, "score": 0, "creation_date": 1520533952, "post_id": 49162277, "comment_id": 85365723, "body": "@MaileCupo Yes, that&#39;s how you can slice a <code>DataFrame</code>. Glad I could help."}], "tags": [], "owner": {"reputation": 18433, "user_id": 826983, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/8fc679891e6c3cf3aec3b353f3fb9bd6?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan Falk", "link": "https://stackoverflow.com/users/826983/stefan-falk"}, "is_accepted": true, "score": 1, "last_activity_date": 1520461785, "creation_date": 1520461785, "answer_id": 49162277, "question_id": 49161202, "link": "https://stackoverflow.com/questions/49161202/pandas-aggregate-column-based-on-values-in-a-different-column/49162277#49162277", "title": "Pandas: aggregate column based on values in a different column", "body": "<p>In case I understood you right, you can do this:</p>\n\n<pre><code>df.iloc[df.groupby('Group').agg({'date': 'idxmax'}).date]\n</code></pre>\n\n<p>Or as a whole example:</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\n\nnp.random.seed(42)\n\ndata = [(np.random.choice(['home', 'away'], size=1)[0],\n         np.random.choice(['first', 'second'], size=1)[0],\n         pd.Timestamp(np.random.rand()*1.9989e+18)) for i in range(10)]\n\ndf = pd.DataFrame.from_records(data)\ndf.columns = ['Group', 'Val', 'date']\n\ndf.iloc[df.groupby('Group').agg({'date': 'idxmax'}).date]\n</code></pre>\n\n<p>Which selects</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>  Group     Val                          date\n5  away   first 2031-06-09 06:26:43.486610432\n0  home  second 2030-03-22 04:07:07.082781440\n</code></pre>\n\n<p>from</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>  Group     Val                          date\n0  home  second 2030-03-22 04:07:07.082781440\n1  home  second 2007-12-03 05:07:24.061456384\n2  home  second 1979-11-18 23:57:26.700035456\n3  home   first 2024-11-12 08:18:17.789517824\n4  away  second 2014-11-07 13:17:55.756515328\n5  away   first 2031-06-09 06:26:43.486610432\n6  away  second 1983-06-14 13:17:28.334806208\n7  away  second 1981-08-14 03:21:14.746028864\n8  away  second 2003-03-29 11:00:31.189680256\n9  away   first 1988-06-12 16:58:48.341865984\n</code></pre>\n"}], "owner": {"reputation": 375, "user_id": 9290070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7014eb039a5be3bbfb407d05d844e2b1?s=128&d=identicon&r=PG&f=1", "display_name": "Maile Cupo", "link": "https://stackoverflow.com/users/9290070/maile-cupo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4817, "favorite_count": 0, "accepted_answer_id": 49162277, "answer_count": 2, "score": 1, "last_activity_date": 1520535487, "creation_date": 1520456800, "last_edit_date": 1520535487, "question_id": 49161202, "link": "https://stackoverflow.com/questions/49161202/pandas-aggregate-column-based-on-values-in-a-different-column", "title": "Pandas: aggregate column based on values in a different column", "body": "<p>Lets say I start with a dataframe that looks like this:</p>\n\n<pre><code>    Group   Val     date\n0   home    first   2017-12-01\n1   home    second  2017-12-02\n2   away    first   2018-03-07\n3   away    second  2018-03-01\n</code></pre>\n\n<p>Data types are [string, string, datetime]. I would like to get a dataframe that for each group, shows me the value that was entered most recently:</p>\n\n<pre><code>    Group   Most rececnt Val    Most recent date\n0   home    second              12-02-2017\n1   away    first               03-07-2018\n</code></pre>\n\n<p>(Data types are [string, string, datetime])</p>\n\n<p>My initial thought is that I should be able to do something like this by grouping by 'group' and then aggregating the dates and vals. I know I can get the most recent datetime using the 'max' agg function, but I'm stuck on what function to use to get the corresponding val:</p>\n\n<pre><code>df.groupby('Group').agg({'val':lambda x: ____????____\n                     'date':'max'})\n</code></pre>\n\n<p>Thanks,</p>\n"}, {"tags": ["python", "newtons-method"], "comments": [{"owner": {"reputation": 1293, "user_id": 5403987, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1506826735a16a1bc77baf61ac357ccc?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Johnson", "link": "https://stackoverflow.com/users/5403987/tom-johnson"}, "edited": false, "score": 0, "creation_date": 1520521165, "post_id": 49161197, "comment_id": 85357408, "body": "There are a number of root finding routines in SciPy that might help. Check out <a href=\"https://docs.scipy.org/doc/scipy/reference/optimize.html\" rel=\"nofollow noreferrer\">docs.scipy.org/doc/scipy/reference/optimize.html</a>."}], "owner": {"reputation": 195, "user_id": 8727632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/duqMB.jpg?s=128&g=1", "display_name": "Nikki", "link": "https://stackoverflow.com/users/8727632/nikki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 545, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1520456794, "creation_date": 1520456794, "question_id": 49161197, "link": "https://stackoverflow.com/questions/49161197/root-finding-algorithm-for-a-complex-polynomial-equation-in-python", "title": "root-finding algorithm for a complex polynomial equation in python", "body": "<p>I am trying to solve for the following equation with a simple algorithm. I am not sure if the algorithm that I'm using is the best one or not but it is the only way that I could think of.\n<a href=\"https://i.stack.imgur.com/ObPog.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ObPog.png\" alt=\"Equation\"></a> </p>\n\n<p>In this equation, everything other than P is known, and I am trying to solve for that. N is an array of counts, an i is the channel number. S(n) is the probability of having a certain n and C is binomial coefficient of (n, r). Pi is the probability in i channel and Pj is the probability in the previous channels with D distance to i. The code itself is not working but I believe that the main problem is in the way that I am trying to solve for it.</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\nimport math as ms\nfrom scipy.misc import derivative\nimport scipy as sp\n\ndef next_guess(f, x):\n    slop = derivative(f, x, dx = 0.01)\n    return x - float(f(x))/slop\n\ndef my_newton(f, guess):\n    for i in range(30):\n        #print(guess)\n        guess = next_guess(f, guess)\n    return guess\n\n\ndef binomial(n, r):\n\n    dif = ms.factorial(n - r)\n\n    n = ms.factorial(n)\n    r = ms.factorial(r)\n\n    return (n/(r*dif))\n\ndef wrap_func(x, S = np.array([0.1, 0.5, 0.2, 0.1, 0.1]), D = 1, N = np.array([10, 15, 20, 1, 13])):\n    if type(x) == float:\n        z = np.zeros(1)\n    else:\n        z = np.zeros(x.shape[0])\n    N_tot = N.sum()\n    n_max = S.shape[0]\n    for i in range(z.shape[0]):\n        z[i] += my_newton(func(x, S = S, D = 1, N = N[i], n_max = n_max, N_tot = N_tot, i = i), i/100)\n\n    return z    \n\n\n\ndef func(x, S = np.array([0.1, 0.5, 0.2, 0.1, 0.1]), D = 1, N = 0, n_max = 5, N_tot = 10, i = 0):\n    S_sum = 0\n    binom_sum = 0\n    y = 0\n\n    for n in range(n_max):\n        S_sum += S[n] \n        for r in range(n):\n            binom_sum += binomial(n, r)\n\n            y += S_sum * binom_sum * (x**r) * (1 - x - summ_x(x, D, i, S, N, n_max, N_tot))**(n-r)\n\n    return N_tot * y - N     \n\ndef summ_x(x, D, i, S, N, n_max, N_tot):\n    j_min = max(i - D - 1, 0)\n    j_max = i - 1\n    x_values = 0\n    if i == 0:\n        return x_values\n    else:\n        for j in range(j_min, j_max):\n            x_values += func(x, S, D, N, n_max, N_tot, i)\n\n        return x_values\n\nx = np.linspace(0, 1, 1000)\nS = np.array([0.1, 0.5, 0.2, 0.1, 0.1])\nN = np.random.choice(50, size = 1000)\nprint(my_newton(wrap_func, 0.1))\n\nplt.plot(x, wrap_func(x, S = S, D = 1, N = N ))\nplt.axhline(0, lw = 0.5, color = 'grey')\n#plt.plot(my_newton(wrap_func, 1), wrap_func(my_newton(wrap_func, 1), S = S, D = 1, N = N), 'd')\nplt.show()\n</code></pre>\n"}, {"tags": ["python", "regex", "pandas", "replace"], "comments": [{"owner": {"reputation": 15201, "user_id": 7386332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb50c81104978fe1e111da483c41ff0f?s=128&d=identicon&r=PG&f=1", "display_name": "Anton vBR", "link": "https://stackoverflow.com/users/7386332/anton-vbr"}, "edited": false, "score": 1, "creation_date": 1520456865, "post_id": 49161183, "comment_id": 85328018, "body": "change it to <code>&#39;LP&#39;</code>?"}, {"owner": {"reputation": 95, "user_id": 8926058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b434bda897b783148e277227ba15b995?s=128&d=identicon&r=PG&f=1", "display_name": "tq343", "link": "https://stackoverflow.com/users/8926058/tq343"}, "reply_to_user": {"reputation": 15201, "user_id": 7386332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb50c81104978fe1e111da483c41ff0f?s=128&d=identicon&r=PG&f=1", "display_name": "Anton vBR", "link": "https://stackoverflow.com/users/7386332/anton-vbr"}, "edited": false, "score": 0, "creation_date": 1520457145, "post_id": 49161183, "comment_id": 85328164, "body": "First thing I tried; it had no effect."}], "answers": [{"tags": [], "owner": {"reputation": 374, "user_id": 9458191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1a40cb94aeefce360011be0b42c6525?s=128&d=identicon&r=PG&f=1", "display_name": "Seth Rothschild", "link": "https://stackoverflow.com/users/9458191/seth-rothschild"}, "is_accepted": false, "score": 1, "last_activity_date": 1520457334, "creation_date": 1520457334, "answer_id": 49161320, "question_id": 49161183, "link": "https://stackoverflow.com/questions/49161183/pandas-replace-dirty-strings-with-int/49161320#49161320", "title": "Pandas -- Replace dirty strings with int", "body": "<p>Here's something that will work for the example as given:</p>\n\n<pre><code>import pandas as pd\ndf = pd.DataFrame({'colname': ['LP001002', 'LP001003']})\n\n# Slice off the 0th and 1st character of the string\ndf['colname'] = [x[2:] for x in df['colname']]\n</code></pre>\n\n<p>If this is your index, you can access it through <code>df['my_index'] = df.index</code> and then follow the remaining instructions.</p>\n\n<p>In general, you might consider using something like the <a href=\"http://scikit-learn.org/stable/modules/generated/sklearn.preprocessing.LabelEncoder.html\" rel=\"nofollow noreferrer\">label encoder</a> from scikit learn to convert nonnumeric elements to numeric ones.</p>\n"}, {"tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": true, "score": 2, "last_activity_date": 1520457432, "creation_date": 1520457432, "answer_id": 49161346, "question_id": 49161183, "link": "https://stackoverflow.com/questions/49161183/pandas-replace-dirty-strings-with-int/49161346#49161346", "title": "Pandas -- Replace dirty strings with int", "body": "<p>You can use <code>replace</code> </p>\n\n<pre><code>df\nOut[656]: \n        Val\n0  LP001002\n1  LP001003\n2  LP001005\n3  LP001006\n4  LP001008\ndf.Val.replace({'LP':''},regex=True)\nOut[657]: \n0    001002\n1    001003\n2    001005\n3    001006\n4    001008\nName: Val, dtype: object\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 8926058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b434bda897b783148e277227ba15b995?s=128&d=identicon&r=PG&f=1", "display_name": "tq343", "link": "https://stackoverflow.com/users/8926058/tq343"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 49161346, "answer_count": 2, "score": 0, "last_activity_date": 1520460645, "creation_date": 1520456750, "last_edit_date": 1520460645, "question_id": 49161183, "link": "https://stackoverflow.com/questions/49161183/pandas-replace-dirty-strings-with-int", "title": "Pandas -- Replace dirty strings with int", "body": "<p>I am trying to do some machine learning practice, but the ID column of my dataframe is giving me trouble. I have this:</p>\n\n<pre><code>0    LP001002\n1    LP001003\n2    LP001005\n3    LP001006\n4    LP001008\n</code></pre>\n\n<p>I want this:</p>\n\n<pre><code>0    001002\n1    001003\n2    001005\n3    001006\n4    001008\n</code></pre>\n\n<p>My idea is to use a <code>replace</code> function, <code>ID.replace('[LP]', '', inplace=True)</code>, but this doesn't actually change the series. Any one know a good way to convert this column?</p>\n"}, {"tags": ["python", "tensorflow", "keras", "tensorflow-datasets", "tensorflow-estimator"], "answers": [{"comments": [{"owner": {"reputation": 338, "user_id": 4227291, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cKQ9l.png?s=128&g=1", "display_name": "Geoffrey Pruvost", "link": "https://stackoverflow.com/users/4227291/geoffrey-pruvost"}, "edited": false, "score": 1, "creation_date": 1520766005, "post_id": 49202297, "comment_id": 85442130, "body": "I updated my question, I don&#39;t completely understand your answer about the batch size, how the batch size can be 3 here whereas I choose a batch size of 1 ?"}], "tags": [], "owner": {"reputation": 25553, "user_id": 4790871, "user_type": "registered", "accept_rate": 99, "profile_image": "https://lh4.googleusercontent.com/-7sCm6Bl96nw/AAAAAAAAAAI/AAAAAAAAAH4/0LGbJtwJZd0/photo.jpg?sz=128", "display_name": "David Parks", "link": "https://stackoverflow.com/users/4790871/david-parks"}, "is_accepted": false, "score": 1, "last_activity_date": 1520630322, "creation_date": 1520630322, "answer_id": 49202297, "question_id": 49161174, "link": "https://stackoverflow.com/questions/49161174/tensorflow-logits-and-labels-must-have-the-same-first-dimension/49202297#49202297", "title": "Tensorflow : logits and labels must have the same first dimension", "body": "<p>Your logits shape looks right, batch size of 3, and output layer of size 2, which is what you defined as your output layer. Your labels should be shape [3, 2] also. Batch of 3, and each batch has 2 [1,0] or [0,1].</p>\n\n<p>Also note that when you have a boolean classification output you shouldn't have 2 neurons on the output/logits layer. You can just output a single value which takes on 0 or 1, you can probably see how 2 outputs of [1,0], and [0,1] is redundant and can be expressed as a simple [0|1] value. Also you tend to get better results when you do it this way.</p>\n\n<p>Thus, your logits should end up being [3,1] and your labels should be an array of 3 values, one for each of the samples in your batch.</p>\n"}, {"tags": [], "owner": {"reputation": 81, "user_id": 9511672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/245e2ffe16d22c2d86ba4b4153e1b2aa?s=128&d=identicon&r=PG&f=1", "display_name": "Eric", "link": "https://stackoverflow.com/users/9511672/eric"}, "is_accepted": false, "score": 1, "last_activity_date": 1521573455, "creation_date": 1521573455, "answer_id": 49392496, "question_id": 49161174, "link": "https://stackoverflow.com/questions/49161174/tensorflow-logits-and-labels-must-have-the-same-first-dimension/49392496#49392496", "title": "Tensorflow : logits and labels must have the same first dimension", "body": "<p>I had a similar problem and it turned out that one pooling layer was not reshaped correctly. I was incorrectly using in my case <code>tf.reshape(pool, shape=[-1, 64 * 7 * 7])</code> instead of <code>tf.reshape(pool, shape=[-1, 64 * 14 * 14])</code>, which lead to a similar error massage about logits and labels. Altering the factors, e.g. <code>tf.reshape(pool, shape=[-1, 64 * 12 * 12])</code> lead to a completely different, less misleading error message.</p>\n\n<p>Perhaps this is also the case here. I recommend going through the code checking the shapes of the nodes, just in case.</p>\n"}, {"comments": [{"owner": {"reputation": 1774, "user_id": 782392, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3b168d32bf93a073301b3d9b4dc3c313?s=128&d=identicon&r=PG", "display_name": "T3rm1", "link": "https://stackoverflow.com/users/782392/t3rm1"}, "edited": false, "score": 3, "creation_date": 1590337787, "post_id": 61654141, "comment_id": 109636966, "body": "This helped me. I also don&#39;t know why."}, {"owner": {"reputation": 14316, "user_id": 10375049, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mHuz1.jpg?s=128&g=1", "display_name": "Marco Cerliani", "link": "https://stackoverflow.com/users/10375049/marco-cerliani"}, "edited": false, "score": 3, "creation_date": 1591729085, "post_id": 61654141, "comment_id": 110165300, "body": "Here the explanation: <a href=\"https://stackoverflow.com/questions/49161174/tensorflow-logits-and-labels-must-have-the-same-first-dimension/62286888#62286888\" title=\"tensorflow logits and labels must have the same first dimension\">stackoverflow.com/questions/49161174/&hellip;</a>"}], "tags": [], "owner": {"reputation": 381, "user_id": 13117720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54eaa98736b76383e8eba6ab92c2312b?s=128&d=identicon&r=PG&f=1", "display_name": "Raevel", "link": "https://stackoverflow.com/users/13117720/raevel"}, "is_accepted": false, "score": 26, "last_activity_date": 1607800594, "last_edit_date": 1607800594, "creation_date": 1588843040, "answer_id": 61654141, "question_id": 49161174, "link": "https://stackoverflow.com/questions/49161174/tensorflow-logits-and-labels-must-have-the-same-first-dimension/61654141#61654141", "title": "Tensorflow : logits and labels must have the same first dimension", "body": "<p>I resolved it changing from <code>sparse_categorical_crossentropy</code> to <code>categorical_crossentropy</code> and is now running fine.</p>\n"}, {"tags": [], "owner": {"reputation": 91, "user_id": 9544323, "user_type": "registered", "profile_image": "https://graph.facebook.com/1562408430548057/picture?type=large", "display_name": "Yassine Birouk", "link": "https://stackoverflow.com/users/9544323/yassine-birouk"}, "is_accepted": false, "score": 8, "last_activity_date": 1590844684, "creation_date": 1590844684, "answer_id": 62103006, "question_id": 49161174, "link": "https://stackoverflow.com/questions/49161174/tensorflow-logits-and-labels-must-have-the-same-first-dimension/62103006#62103006", "title": "Tensorflow : logits and labels must have the same first dimension", "body": "<p>I already had this problem in my first time using tensorflow, i figured out that my problem was forgetting to add the attribute <code>class_mode='sparse'</code> / <code>class_mode='binary'</code> to the function that uploads tha training data and validation data :</p>\n\n<p>So try to look after the class_mode option</p>\n\n<pre><code>image_gen_val = ImageDataGenerator(rescale=1./255)\nval_data_gen = image_gen_val.flow_from_directory(batch_size=batch_size,\n                                                 directory=val_dir,\n                                                 target_size=(IMG_SHAPE, IMG_SHAPE),\n                                                 class_mode='sparse')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14316, "user_id": 10375049, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mHuz1.jpg?s=128&g=1", "display_name": "Marco Cerliani", "link": "https://stackoverflow.com/users/10375049/marco-cerliani"}, "is_accepted": true, "score": 36, "last_activity_date": 1593175484, "last_edit_date": 1593175484, "creation_date": 1591718697, "answer_id": 62286888, "question_id": 49161174, "link": "https://stackoverflow.com/questions/49161174/tensorflow-logits-and-labels-must-have-the-same-first-dimension/62286888#62286888", "title": "Tensorflow : logits and labels must have the same first dimension", "body": "<p>The problem is in your target shape and is related to the correct choice of an appropriate loss function. you have 2 possibilities:</p>\n<p><strong>1. possibility</strong>: if you have 1D integer encoded target, you can use <code>sparse_categorical_crossentropy</code> as loss function</p>\n<pre><code>n_class = 3\nn_features = 100\nn_sample = 1000\n\nX = np.random.randint(0,10, (n_sample,n_features))\ny = np.random.randint(0,n_class, n_sample)\n\ninp = Input((n_features,))\nx = Dense(128, activation='relu')(inp)\nout = Dense(n_class, activation='softmax')(x)\n\nmodel = Model(inp, out)\nmodel.compile(loss='sparse_categorical_crossentropy',optimizer='adam',metrics=['accuracy'])\nhistory = model.fit(X, y, epochs=3)\n</code></pre>\n<p><strong>2. possibility</strong>: if you have one-hot encoded your target in order to have 2D shape (n_samples, n_class), you can use <code>categorical_crossentropy</code></p>\n<pre><code>n_class = 3\nn_features = 100\nn_sample = 1000\n\nX = np.random.randint(0,10, (n_sample,n_features))\ny = pd.get_dummies(np.random.randint(0,n_class, n_sample)).values\n\ninp = Input((n_features,))\nx = Dense(128, activation='relu')(inp)\nout = Dense(n_class, activation='softmax')(x)\n\nmodel = Model(inp, out)\nmodel.compile(loss='categorical_crossentropy',optimizer='adam',metrics=['accuracy'])\nhistory = model.fit(X, y, epochs=3)\n</code></pre>\n"}], "owner": {"reputation": 338, "user_id": 4227291, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cKQ9l.png?s=128&g=1", "display_name": "Geoffrey Pruvost", "link": "https://stackoverflow.com/users/4227291/geoffrey-pruvost"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36648, "favorite_count": 6, "accepted_answer_id": 62286888, "answer_count": 5, "score": 14, "last_activity_date": 1607800594, "creation_date": 1520456713, "last_edit_date": 1600203069, "question_id": 49161174, "link": "https://stackoverflow.com/questions/49161174/tensorflow-logits-and-labels-must-have-the-same-first-dimension", "title": "Tensorflow : logits and labels must have the same first dimension", "body": "<p>I am new in tensoflow and I want to adapt the MNIST tutorial <a href=\"https://www.tensorflow.org/tutorials/layers\" rel=\"noreferrer\">https://www.tensorflow.org/tutorials/layers</a> with my own data (images of 40x40).\nThis is my model function : </p>\n\n<pre><code>def cnn_model_fn(features, labels, mode):\n        # Input Layer\n        input_layer = tf.reshape(features, [-1, 40, 40, 1])\n\n        # Convolutional Layer #1\n        conv1 = tf.layers.conv2d(\n                inputs=input_layer,\n                filters=32,\n                kernel_size=[5, 5],\n                #  To specify that the output tensor should have the same width and height values as the input tensor\n                # value can be \"same\" ou \"valid\"\n                padding=\"same\",\n                activation=tf.nn.relu)\n\n        # Pooling Layer #1\n        pool1 = tf.layers.max_pooling2d(inputs=conv1, pool_size=[2, 2], strides=2)\n\n        # Convolutional Layer #2 and Pooling Layer #2\n        conv2 = tf.layers.conv2d(\n                inputs=pool1,\n                filters=64,\n                kernel_size=[5, 5],\n                padding=\"same\",\n                activation=tf.nn.relu)\n        pool2 = tf.layers.max_pooling2d(inputs=conv2, pool_size=[2, 2], strides=2)\n\n        # Dense Layer\n        pool2_flat = tf.reshape(pool2, [-1, 10 * 10 * 64])\n        dense = tf.layers.dense(inputs=pool2_flat, units=1024, activation=tf.nn.relu)\n        dropout = tf.layers.dropout(\n                inputs=dense, rate=0.4, training=mode == tf.estimator.ModeKeys.TRAIN)\n\n        # Logits Layer\n        logits = tf.layers.dense(inputs=dropout, units=2)\n\n        predictions = {\n            # Generate predictions (for PREDICT and EVAL mode)\n            \"classes\":       tf.argmax(input=logits, axis=1),\n            # Add `softmax_tensor` to the graph. It is used for PREDICT and by the\n            # `logging_hook`.\n            \"probabilities\": tf.nn.softmax(logits, name=\"softmax_tensor\")\n        }\n\n        if mode == tf.estimator.ModeKeys.PREDICT:\n            return tf.estimator.EstimatorSpec(mode=mode, predictions=predictions)\n\n        # Calculate Loss (for both TRAIN and EVAL modes)\n        loss = tf.losses.sparse_softmax_cross_entropy(labels=labels, logits=logits)\n\n        # Configure the Training Op (for TRAIN mode)\n        if mode == tf.estimator.ModeKeys.TRAIN:\n            optimizer = tf.train.GradientDescentOptimizer(learning_rate=0.001)\n            train_op = optimizer.minimize(\n                    loss=loss,\n                    global_step=tf.train.get_global_step())\n            return tf.estimator.EstimatorSpec(mode=mode, loss=loss, train_op=train_op)\n\n        # Add evaluation metrics (for EVAL mode)\n        eval_metric_ops = {\n            \"accuracy\": tf.metrics.accuracy(\n                    labels=labels, predictions=predictions[\"classes\"])}\n        return tf.estimator.EstimatorSpec(\n                mode=mode, loss=loss, eval_metric_ops=eval_metric_ops)\n</code></pre>\n\n<p>I have a shape size error between labels and logits : </p>\n\n<p><strong>InvalidArgumentError (see above for traceback): logits and labels must have the same first dimension, got logits shape [3,2] and labels shape [1]</strong> </p>\n\n<p>filenames_array is an array of 16 string </p>\n\n<pre><code>[\"file1.png\", \"file2.png\", \"file3.png\", ...]\n</code></pre>\n\n<p>and labels_array is an array of 16 integer </p>\n\n<pre><code>[0,0,1,1,0,1,0,0,0,...]\n</code></pre>\n\n<p>The main function is :</p>\n\n<pre><code># Create the Estimator\nmnist_classifier = tf.estimator.Estimator(model_fn=cnn_model_fn, model_dir=\"/tmp/test_convnet_model\")\n\n# Train the model\ncust_train_input_fn = lambda: train_input_fn_custom(\n        filenames_array=filenames, labels_array=labels, batch_size=1)\n\nmnist_classifier.train(\n        input_fn=cust_train_input_fn,\n        steps=20000,\n        hooks=[logging_hook])\n</code></pre>\n\n<p>I tried to reshape logits without success :</p>\n\n<p>logits = tf.reshape(logits, [1, 2])</p>\n\n<p>I need your help, thanks</p>\n\n<hr>\n\n<p><strong>EDIT</strong></p>\n\n<p>After more time to search, in the first line of my model function</p>\n\n<pre><code>input_layer = tf.reshape(features, [-1, 40, 40, 1])\n</code></pre>\n\n<p>the \"-1\" that signifies that the batch_size dimension will be dynamically calculated have here the value \"3\". The same \"3\" as in my error : <strong>logits and labels must have the same first dimension, got logits shape [3,2] and labels shape [1]</strong></p>\n\n<p>If I force the value to \"1\" I have this new error :</p>\n\n<p><strong>Input to reshape is a tensor with 4800 values, but the requested shape has 1600</strong></p>\n\n<p>Maybe a problem with my features ?</p>\n\n<hr>\n\n<p><strong>EDIT2 :</strong> </p>\n\n<p>the complete code is here : <a href=\"https://gist.github.com/geoffreyp/cc8e97aab1bff4d39e10001118c6322e\" rel=\"noreferrer\">https://gist.github.com/geoffreyp/cc8e97aab1bff4d39e10001118c6322e</a></p>\n\n<hr>\n\n<p><strong>EDIT3</strong></p>\n\n<p>I updated the gist with </p>\n\n<pre><code>logits = tf.layers.dense(inputs=dropout, units=1)\n</code></pre>\n\n<p><a href=\"https://gist.github.com/geoffreyp/cc8e97aab1bff4d39e10001118c6322e\" rel=\"noreferrer\">https://gist.github.com/geoffreyp/cc8e97aab1bff4d39e10001118c6322e</a></p>\n\n<p>But I don't completely understand your answer about the batch size, how the batch size can be 3 here whereas I choose a batch size of 1 ? </p>\n\n<p>If I choose a batch_size = 3 I have this error :\n<strong>logits and labels must have the same first dimension, got logits shape [9,1] and labels shape [3]</strong></p>\n\n<p>I tried to reshape labels : </p>\n\n<pre><code>labels = tf.reshape(labels, [3, 1])\n</code></pre>\n\n<p>and I updated features and labels structure : </p>\n\n<pre><code>    filenames_train = [['blackcorner-data/1.png', 'blackcorner-data/2.png', 'blackcorner-data/3.png',\n                   'blackcorner-data/4.png', 'blackcorner-data/n1.png'],\n                   ['blackcorner-data/n2.png',\n                   'blackcorner-data/n3.png', 'blackcorner-data/n4.png',\n                   'blackcorner-data/11.png', 'blackcorner-data/21.png'],\n                   ['blackcorner-data/31.png',\n                   'blackcorner-data/41.png', 'blackcorner-data/n11.png', 'blackcorner-data/n21.png',\n                   'blackcorner-data/n31.png']\n                   ]\n\nlabels = [[0, 0, 0, 0, 1], [1, 1, 1, 0, 0], [0, 0, 1, 1, 1]]\n</code></pre>\n\n<p>but without success...</p>\n"}, {"tags": ["python", "scikit-learn", "sklearn-pandas"], "answers": [{"tags": [], "owner": {"reputation": 28829, "user_id": 3374996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ijirj.png?s=128&g=1", "display_name": "Vivek Kumar", "link": "https://stackoverflow.com/users/3374996/vivek-kumar"}, "is_accepted": true, "score": 0, "last_activity_date": 1520483194, "creation_date": 1520483194, "answer_id": 49165423, "question_id": 49161133, "link": "https://stackoverflow.com/questions/49161133/write-custom-transformer-in-sklearn-which-returns-predict-of-estimator-in-tran/49165423#49165423", "title": "Write custom transformer in sklearn which returns .predict of estimator in .transform", "body": "<p>You are doing wrong assignment in this line:</p>\n\n<pre><code>self = self.estimator.fit(X,y)\n</code></pre>\n\n<p>Here, self is the current class (EstimatorTransformer) and you are trying to assign it a different class.</p>\n\n<p>You can just write:</p>\n\n<pre><code>def fit(self, X, y):\n    self.estimator.fit(X,y)\n    return self\n</code></pre>\n\n<p>and it will work.</p>\n"}], "owner": {"reputation": 734, "user_id": 5755464, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-Vf68fbcrMOw/AAAAAAAAAAI/AAAAAAAABI0/nQuZ9pogv1s/photo.jpg?sz=128", "display_name": "Rudrani Angira", "link": "https://stackoverflow.com/users/5755464/rudrani-angira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 320, "favorite_count": 0, "accepted_answer_id": 49165423, "answer_count": 1, "score": 0, "last_activity_date": 1520483194, "creation_date": 1520456500, "question_id": 49161133, "link": "https://stackoverflow.com/questions/49161133/write-custom-transformer-in-sklearn-which-returns-predict-of-estimator-in-tran", "title": "Write custom transformer in sklearn which returns .predict of estimator in .transform", "body": "<p>We have a custom transformer    </p>\n\n<pre><code>class EstimatorTransformer(base.BaseEstimator, base.TransformerMixin):\n\n    def __init__(self, estimator):\n        self.estimator = estimator\n\n    def fit(self, X, y):\n        self = self.estimator.fit(X,y)\n        return self\n\n    def transform(self, X):\n        return self.estimator.predict(X)\n</code></pre>\n\n<p>And there is an assert statement </p>\n\n<pre><code>city_trans = EstimatorTransformer(city_est)\ncity_trans.fit(features,target)\nassert ([r[0] for r in city_trans.transform(data[:5])]\n        == city_est.predict(data[:5]))\n</code></pre>\n\n<p>where </p>\n\n<blockquote>\n  <p><code>city_est</code> is the estimator we can pass. I am using <code>city_est = city_est = Ridge(alpha = 1)</code></p>\n</blockquote>\n\n<p>but I get an error in <code>self = self.estimator.fit(X,y)</code>. What I might be doing wrong here. I know that <code>fit()</code> returns <code>self</code>. How should I make this assertion work?</p>\n"}, {"tags": ["python", "pandas", "conditional"], "answers": [{"comments": [{"owner": {"reputation": 1012, "user_id": 8610662, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NW6qK.jpg?s=128&g=1", "display_name": "NLR", "link": "https://stackoverflow.com/users/8610662/nlr"}, "edited": false, "score": 0, "creation_date": 1520460405, "post_id": 49161189, "comment_id": 85329675, "body": "Thanks @AlexanderHughes. My original post had a typo: there are actually three columns to consider, so this solution wouldn&#39;t work."}, {"owner": {"reputation": 7436, "user_id": 5514476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hP6t0.jpg?s=128&g=1", "display_name": "DJK", "link": "https://stackoverflow.com/users/5514476/djk"}, "edited": false, "score": 6, "creation_date": 1520461962, "post_id": 49161189, "comment_id": 85330338, "body": "should be <code>df.apply(lambda x: 10 if x[&#39;c1&#39;] == &#39;Value&#39; else x[&#39;c3&#39;],axis=1)</code>"}, {"owner": {"reputation": 1579, "user_id": 6421575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0de7fcf2bf78e7eb060fb5bb5823070d?s=128&d=identicon&r=PG&f=1", "display_name": "ErnestScribbler", "link": "https://stackoverflow.com/users/6421575/ernestscribbler"}, "edited": false, "score": 8, "creation_date": 1541067671, "post_id": 49161189, "comment_id": 93094174, "body": "This might have performance issues with large datasets. df.apply() is slower."}, {"owner": {"reputation": 95, "user_id": 4721322, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/GKtBO.jpg?s=128&g=1", "display_name": "Runawaygeek", "link": "https://stackoverflow.com/users/4721322/runawaygeek"}, "edited": false, "score": 0, "creation_date": 1589378115, "post_id": 49161189, "comment_id": 109270159, "body": "Was looking for the same, found a lambda worked for me with a dataframe. My code is &#39;ard[&#39;Hr&#39;] = ard.apply(lambda x: x[&#39;Hr&#39;]+1 if x[&#39;Mi&#39;] &gt;= 45 and x[&#39;Mi&#39;] &lt; 60 else x[&#39;Hr&#39;],axis=1)&#39;"}], "tags": [], "owner": {"reputation": 428, "user_id": 7858809, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/8ead7e63357fb4202a47852ea55e4592?s=128&d=identicon&r=PG&f=1", "display_name": "AlexanderHughes", "link": "https://stackoverflow.com/users/7858809/alexanderhughes"}, "is_accepted": false, "score": 24, "last_activity_date": 1520456773, "creation_date": 1520456773, "answer_id": 49161189, "question_id": 49161120, "link": "https://stackoverflow.com/questions/49161120/pandas-python-set-value-of-one-column-based-on-value-in-another-column/49161189#49161189", "title": "Pandas/Python: Set value of one column based on value in another column", "body": "<p>try:</p>\n\n<p><code>df['c2'] = df['c1'].apply(lambda x: 10 if x == 'Value' else x)</code></p>\n"}, {"comments": [{"owner": {"reputation": 1012, "user_id": 8610662, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NW6qK.jpg?s=128&g=1", "display_name": "NLR", "link": "https://stackoverflow.com/users/8610662/nlr"}, "edited": false, "score": 8, "creation_date": 1520460736, "post_id": 49161313, "comment_id": 85329815, "body": "The second solution nailed it for me. I didn&#39;t realize you could use .loc like a WHERE statement in SQL. Makes sense. Thanks!"}, {"owner": {"reputation": 121, "user_id": 10770344, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ynm5ZS9yy5Y/AAAAAAAAAAI/AAAAAAAAADU/xuHwht5i4hM/photo.jpg?sz=128", "display_name": "Steve", "link": "https://stackoverflow.com/users/10770344/steve"}, "edited": false, "score": 0, "creation_date": 1558714370, "post_id": 49161313, "comment_id": 99204850, "body": "How would you apply 10 to multiple columns instead on just one? eg: df.loc[df[&#39;c1&#39;] == &#39;Value&#39;, &#39;c2&#39;,&#39;c3&#39;,&#39;c4] = 10."}, {"owner": {"reputation": 826, "user_id": 11051292, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NinO0.png?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/11051292/joe"}, "edited": false, "score": 1, "creation_date": 1565693309, "post_id": 49161313, "comment_id": 101424078, "body": "I think you have to place all the columns you need to update the value with in a list, then loop through that list and changing the column name parameter in it?"}, {"owner": {"reputation": 132, "user_id": 11803450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e92893ff5b4ee2cc56be359d5a883c28?s=128&d=identicon&r=PG&f=1", "display_name": "MLAlex", "link": "https://stackoverflow.com/users/11803450/mlalex"}, "edited": false, "score": 0, "creation_date": 1598347736, "post_id": 49161313, "comment_id": 112422306, "body": "Great Solution, I am facing a similar problem. Additonally to the condition I need to select only the first 5 entries and set the value only on them. kunden_df.loc[kunden_df[&quot;Distanz&quot;] == 1].iloc[0:amount_contracts][&quot;Betreuer&quot;] = name  can you help me with the syntax?"}, {"owner": {"reputation": 195, "user_id": 8279999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31598ccf3249120fb27e8d984679342c?s=128&d=identicon&r=PG&f=1", "display_name": "Darren", "link": "https://stackoverflow.com/users/8279999/darren"}, "edited": false, "score": 0, "creation_date": 1617210846, "post_id": 49161313, "comment_id": 118243359, "body": "When I assign values with statements like <code>df.loc[df[&#39;c1&#39;] == &#39;Value&#39;, &#39;c1&#39;] = 10</code> I get the dreaded <code>SettingWithCopyWarning</code> -- even when I use the <code>.loc[]</code> syntax. So far it hasn&#39;t been a problem for me, but I find it odd that I get the warning, despite using the suggested <code>.loc[]</code> approach. Any fixes for that? This is with pandas 1.2.3, numpy 1.18.5, and python 3.7.10."}, {"owner": {"reputation": 41182, "user_id": 6671176, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4DvZ4.png?s=128&g=1", "display_name": "sacuL", "link": "https://stackoverflow.com/users/6671176/sacul"}, "reply_to_user": {"reputation": 195, "user_id": 8279999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31598ccf3249120fb27e8d984679342c?s=128&d=identicon&r=PG&f=1", "display_name": "Darren", "link": "https://stackoverflow.com/users/8279999/darren"}, "edited": false, "score": 0, "creation_date": 1617211718, "post_id": 49161313, "comment_id": 118243718, "body": "@Darren, in my experience, the most common reason for a <code>SettingWithCopyWarning</code> is trying to assign values on a view. is it possible that the <code>df</code> you&#39;re trying to modify is e.g. a subset of a larger dataframe? Using the method above on such a view would raise the warning. Also worth mentioning it can be hard to predict which actions will result in a view in pandas (see <a href=\"https://www.practicaldatascience.org/html/views_and_copies_in_pandas.html\" rel=\"nofollow noreferrer\">this</a>)"}, {"owner": {"reputation": 195, "user_id": 8279999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31598ccf3249120fb27e8d984679342c?s=128&d=identicon&r=PG&f=1", "display_name": "Darren", "link": "https://stackoverflow.com/users/8279999/darren"}, "edited": false, "score": 0, "creation_date": 1617231614, "post_id": 49161313, "comment_id": 118250606, "body": "@sacuL, thanks. The scenarios where I get this and can&#39;t figure out why look exactly like the example you described -- not when I&#39;m looking at view of a larger DF.I can effectively prevent the <code>SettingWithCopyWarning</code> when the row subset logic in <code>.loc[]</code> is on the right-hand side of the operation, but not when it&#39;s on the left for assignment of values (like in your example).  Luckily it has never caused a practical problem for me in anything I&#39;ve worked on, but I still can&#39;t figure out why I can&#39;t assign values like the example you gave without the <code>SettingWithCopyWarning</code>."}], "tags": [], "owner": {"reputation": 41182, "user_id": 6671176, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4DvZ4.png?s=128&g=1", "display_name": "sacuL", "link": "https://stackoverflow.com/users/6671176/sacul"}, "is_accepted": true, "score": 120, "last_activity_date": 1565100054, "last_edit_date": 1565100054, "creation_date": 1520457304, "answer_id": 49161313, "question_id": 49161120, "link": "https://stackoverflow.com/questions/49161120/pandas-python-set-value-of-one-column-based-on-value-in-another-column/49161313#49161313", "title": "Pandas/Python: Set value of one column based on value in another column", "body": "<p>one way to do this would be to use indexing with <code>.loc</code>. </p>\n\n<p><strong>Example</strong></p>\n\n<p>In the absence of an example dataframe, I'll make one up here:</p>\n\n<pre><code>import numpy as np\nimport pandas as pd\n\ndf = pd.DataFrame({'c1': list('abcdefg')})\ndf.loc[5, 'c1'] = 'Value'\n\n&gt;&gt;&gt; df\n      c1\n0      a\n1      b\n2      c\n3      d\n4      e\n5  Value\n6      g\n</code></pre>\n\n<p>Assuming you wanted to <strong>create a new column</strong> <code>c2</code>, equivalent to <code>c1</code> except where <code>c1</code> is <code>Value</code>, in which case, you would like to assign it to 10:</p>\n\n<p>First, you could create a new column <code>c2</code>, and set it to equivalent as <code>c1</code>, using one of the following two lines (they essentially do the same thing):</p>\n\n<pre><code>df = df.assign(c2 = df['c1'])\n# OR:\ndf['c2'] = df['c1']\n</code></pre>\n\n<p>Then, find all the indices where <code>c1</code> is equal to <code>'Value'</code> using <code>.loc</code>, and assign your desired value in <code>c2</code> at those indices:</p>\n\n<pre><code>df.loc[df['c1'] == 'Value', 'c2'] = 10\n</code></pre>\n\n<p>And you end up with this:</p>\n\n<pre><code>&gt;&gt;&gt; df\n      c1  c2\n0      a   a\n1      b   b\n2      c   c\n3      d   d\n4      e   e\n5  Value  10\n6      g   g\n</code></pre>\n\n<p>If, as you suggested in your question, you would perhaps sometimes just want to <strong>replace the values in the column you already have</strong>, rather than create a new column, then just skip the column creation, and do the following:</p>\n\n<pre><code>df['c1'].loc[df['c1'] == 'Value'] = 10\n# or:\ndf.loc[df['c1'] == 'Value', 'c1'] = 10\n</code></pre>\n\n<p>Giving you:</p>\n\n<pre><code>&gt;&gt;&gt; df\n      c1\n0      a\n1      b\n2      c\n3      d\n4      e\n5     10\n6      g\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 649, "user_id": 9481613, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GjFWZ7udq84X5Ysni5L9gmx-8sykZfNRCy4IvUv=k-s128", "display_name": "mLstudent33", "link": "https://stackoverflow.com/users/9481613/mlstudent33"}, "edited": false, "score": 0, "creation_date": 1584063439, "post_id": 49162256, "comment_id": 107328784, "body": "what if I want to keep all original columns"}, {"owner": {"reputation": 7436, "user_id": 5514476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hP6t0.jpg?s=128&g=1", "display_name": "DJK", "link": "https://stackoverflow.com/users/5514476/djk"}, "reply_to_user": {"reputation": 649, "user_id": 9481613, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GjFWZ7udq84X5Ysni5L9gmx-8sykZfNRCy4IvUv=k-s128", "display_name": "mLstudent33", "link": "https://stackoverflow.com/users/9481613/mlstudent33"}, "edited": false, "score": 1, "creation_date": 1594931841, "post_id": 49162256, "comment_id": 111308257, "body": "@mLstudent33, using <code>df[&#39;newColName&#39;] = ...</code>, you use a column name, not in your dataframe to create a new column, assuming <code>newColName</code> does not already exist"}], "tags": [], "owner": {"reputation": 7436, "user_id": 5514476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hP6t0.jpg?s=128&g=1", "display_name": "DJK", "link": "https://stackoverflow.com/users/5514476/djk"}, "is_accepted": false, "score": 44, "last_activity_date": 1587313518, "last_edit_date": 1587313518, "creation_date": 1520461690, "answer_id": 49162256, "question_id": 49161120, "link": "https://stackoverflow.com/questions/49161120/pandas-python-set-value-of-one-column-based-on-value-in-another-column/49162256#49162256", "title": "Pandas/Python: Set value of one column based on value in another column", "body": "<p>You can use <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.where.html\" rel=\"noreferrer\"><code>np.where()</code></a> to set values based on a specified condition:</p>\n\n<pre><code>#df\n   c1  c2  c3\n0   4   2   1\n1   8   7   9\n2   1   5   8\n3   3   3   5\n4   3   6   8\n</code></pre>\n\n<p>Now change values (or set) in column <code>['c2']</code> based on your condition.</p>\n\n<pre><code>df['c2'] = np.where(df.c1 == 8,'X', df.c3)\n\n   c1  c3  c4\n0   4   1   1\n1   8   9   X\n2   1   8   8\n3   3   5   5\n4   3   8   8\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 649, "user_id": 9481613, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GjFWZ7udq84X5Ysni5L9gmx-8sykZfNRCy4IvUv=k-s128", "display_name": "mLstudent33", "link": "https://stackoverflow.com/users/9481613/mlstudent33"}, "edited": false, "score": 0, "creation_date": 1584063508, "post_id": 49162271, "comment_id": 107328798, "body": "This is super confusing, can you show some tables to clarify?"}], "tags": [], "owner": {"reputation": 13134, "user_id": 9225671, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Y1fpFhWva_w/AAAAAAAAAAI/AAAAAAAAAC8/weHLi_-bFj8/photo.jpg?sz=128", "display_name": "Ralf", "link": "https://stackoverflow.com/users/9225671/ralf"}, "is_accepted": false, "score": 4, "last_activity_date": 1520461755, "creation_date": 1520461755, "answer_id": 49162271, "question_id": 49161120, "link": "https://stackoverflow.com/questions/49161120/pandas-python-set-value-of-one-column-based-on-value-in-another-column/49162271#49162271", "title": "Pandas/Python: Set value of one column based on value in another column", "body": "<p>I suggest doing it in two steps:</p>\n\n<pre><code># set fixed value to 'c2' where the condition is met\ndf.loc[df['c1'] == 'Value', 'c2'] = 10\n\n# copy value from 'c3' to 'c2' where the condition is NOT met\ndf.loc[df['c1'] != 'Value', 'c2'] = df[df['c1'] != 'Value', 'c3']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 973, "user_id": 11147295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MJJzP.jpg?s=128&g=1", "display_name": "nimbous", "link": "https://stackoverflow.com/users/11147295/nimbous"}, "is_accepted": false, "score": 5, "last_activity_date": 1573217853, "creation_date": 1573217853, "answer_id": 58767067, "question_id": 49161120, "link": "https://stackoverflow.com/questions/49161120/pandas-python-set-value-of-one-column-based-on-value-in-another-column/58767067#58767067", "title": "Pandas/Python: Set value of one column based on value in another column", "body": "<p>You can use <code>pandas.DataFrame.mask</code> to add virtually as many conditions as you need:</p>\n\n<pre><code>data = {'a': [1,2,3,4,5], 'b': [6,8,9,10,11]}\n\nd = pd.DataFrame.from_dict(data, orient='columns')\nc = {'c1': (2, 'Value1'), 'c2': (3, 'Value2'), 'c3': (5, d['b'])}\n\nd['new'] = np.nan\nfor value in c.values():\n    d['new'].mask(d['a'] == value[0], value[1], inplace=True)\n\nd['new'] = d['new'].fillna('Else')\nd\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>    a   b   new\n0   1   6   Else\n1   2   8   Value1\n2   3   9   Value2\n3   4   10  Else\n4   5   11  11\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 109, "user_id": 13598602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/611476853d9a01d651b455518711b19d?s=128&d=identicon&r=PG", "display_name": "Rahul Bordoloi", "link": "https://stackoverflow.com/users/13598602/rahul-bordoloi"}, "is_accepted": false, "score": 0, "last_activity_date": 1595997215, "creation_date": 1595997215, "answer_id": 63146398, "question_id": 49161120, "link": "https://stackoverflow.com/questions/49161120/pandas-python-set-value-of-one-column-based-on-value-in-another-column/63146398#63146398", "title": "Pandas/Python: Set value of one column based on value in another column", "body": "<p>Try out df.apply() if you've a small/medium dataframe,</p>\n<pre><code>df['c2'] = df.apply(lambda x: 10 if x['c1'] == 'Value' else x['c1'], axis = 1)\n</code></pre>\n<p>Else, follow the slicing techniques mentioned in the above comments if you've got a big dataframe.</p>\n"}, {"tags": [], "owner": {"reputation": 71, "user_id": 11918372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63a60fe92052922f370f503c0bab2815?s=128&d=identicon&r=PG&f=1", "display_name": "vkerov", "link": "https://stackoverflow.com/users/11918372/vkerov"}, "is_accepted": false, "score": 7, "last_activity_date": 1601105153, "last_edit_date": 1601105153, "creation_date": 1600801499, "answer_id": 64016190, "question_id": 49161120, "link": "https://stackoverflow.com/questions/49161120/pandas-python-set-value-of-one-column-based-on-value-in-another-column/64016190#64016190", "title": "Pandas/Python: Set value of one column based on value in another column", "body": "<p>Note the tilda that reverses the selection. It uses pandas methods (i.e. is faster than <code>if</code>/<code>else</code>).</p>\n<pre><code>df.loc[(df['c1'] == 'Value'), 'c2'] = 10\ndf.loc[~(df['c1'] == 'Value'), 'c2'] = df['c3']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 421, "user_id": 7194421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c5a7f8d5f99edf897112353d8506b54?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/7194421/sam"}, "is_accepted": false, "score": 0, "last_activity_date": 1604518297, "creation_date": 1604518297, "answer_id": 64686553, "question_id": 49161120, "link": "https://stackoverflow.com/questions/49161120/pandas-python-set-value-of-one-column-based-on-value-in-another-column/64686553#64686553", "title": "Pandas/Python: Set value of one column based on value in another column", "body": "<p>I had a big dataset and .loc[] was taking too long so I found a vectorized way to do it.  Recall that you can set a column to a logical operator, so this works:</p>\n<p><code>file['Flag'] = (file['Claim_Amount'] &gt; 0)</code></p>\n<p>This gives a Boolean, which I wanted, but you can multiply it by, say, 1 to make an Integer.</p>\n"}], "owner": {"reputation": 1012, "user_id": 8610662, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NW6qK.jpg?s=128&g=1", "display_name": "NLR", "link": "https://stackoverflow.com/users/8610662/nlr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 212579, "favorite_count": 24, "accepted_answer_id": 49161313, "answer_count": 8, "score": 74, "last_activity_date": 1604518297, "creation_date": 1520456462, "last_edit_date": 1520461133, "question_id": 49161120, "link": "https://stackoverflow.com/questions/49161120/pandas-python-set-value-of-one-column-based-on-value-in-another-column", "title": "Pandas/Python: Set value of one column based on value in another column", "body": "<p>I need to set the value of one column based on the value of another in a Pandas dataframe. This is the logic:</p>\n\n<pre><code>if df['c1'] == 'Value':\n    df['c2'] = 10\nelse:\n    df['c2'] = df['c3']\n</code></pre>\n\n<p>I am unable to get this to do what I want, which is to simply create a column with new values (or change the value of an existing column: either one works for me). </p>\n\n<p>If I try to run the code above or if I write it as a function and use the apply method, I get the following:</p>\n\n<pre><code>ValueError: The truth value of a Series is ambiguous. Use a.empty, a.bool(), a.item(), a.any() or a.all().\n</code></pre>\n"}, {"tags": ["python", "django", "python-2.7", "raspberry-pi", "django-cms"], "comments": [{"owner": {"reputation": 6847, "user_id": 1081569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8682dc66d5900d9645a8dff1316495e1?s=128&d=identicon&r=PG", "display_name": "Paulo Almeida", "link": "https://stackoverflow.com/users/1081569/paulo-almeida"}, "edited": false, "score": 0, "creation_date": 1520457409, "post_id": 49161006, "comment_id": 85328280, "body": "Try running the pip install command that fails directly on the shell, without <code>-q</code> (which means quiet), to see the output."}, {"owner": {"reputation": 2750, "user_id": 8308081, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-pReTF2MKrbE/AAAAAAAAAAI/AAAAAAAAADI/-BW8Tt3EURc/photo.jpg?sz=128", "display_name": "Lukas Kirner", "link": "https://stackoverflow.com/users/8308081/lukas-kirner"}, "reply_to_user": {"reputation": 6847, "user_id": 1081569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8682dc66d5900d9645a8dff1316495e1?s=128&d=identicon&r=PG", "display_name": "Paulo Almeida", "link": "https://stackoverflow.com/users/1081569/paulo-almeida"}, "edited": false, "score": 0, "creation_date": 1520457749, "post_id": 49161006, "comment_id": 85328455, "body": "Which one do you mean? I cant figure out which command of the array fails"}, {"owner": {"reputation": 6847, "user_id": 1081569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8682dc66d5900d9645a8dff1316495e1?s=128&d=identicon&r=PG", "display_name": "Paulo Almeida", "link": "https://stackoverflow.com/users/1081569/paulo-almeida"}, "edited": false, "score": 0, "creation_date": 1520457877, "post_id": 49161006, "comment_id": 85328522, "body": "The last line in the output, starting with <code>subprocess.CalledProcessError</code>. You have to turn that python list into a command, of course."}], "answers": [{"comments": [{"owner": {"reputation": 2750, "user_id": 8308081, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-pReTF2MKrbE/AAAAAAAAAAI/AAAAAAAAADI/-BW8Tt3EURc/photo.jpg?sz=128", "display_name": "Lukas Kirner", "link": "https://stackoverflow.com/users/8308081/lukas-kirner"}, "edited": false, "score": 0, "creation_date": 1520528066, "post_id": 49162831, "comment_id": 85362190, "body": "I installed the dev Tools like you said but after I run &quot;source env/bin/activate&quot; and &quot;sudo djangocms -f -p . web_site&quot; still the same error comes up"}, {"owner": {"reputation": 250720, "user_id": 113962, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b80ae1d65878cf68a4b1a00848467527?s=128&d=identicon&r=PG", "display_name": "Alasdair", "link": "https://stackoverflow.com/users/113962/alasdair"}, "reply_to_user": {"reputation": 2750, "user_id": 8308081, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-pReTF2MKrbE/AAAAAAAAAAI/AAAAAAAAADI/-BW8Tt3EURc/photo.jpg?sz=128", "display_name": "Lukas Kirner", "link": "https://stackoverflow.com/users/8308081/lukas-kirner"}, "edited": false, "score": 0, "creation_date": 1520528980, "post_id": 49162831, "comment_id": 85362791, "body": "It looks like there are some other prerequisites you need to install. I can&#39;t help with the specifics."}], "tags": [], "owner": {"reputation": 250720, "user_id": 113962, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b80ae1d65878cf68a4b1a00848467527?s=128&d=identicon&r=PG", "display_name": "Alasdair", "link": "https://stackoverflow.com/users/113962/alasdair"}, "is_accepted": false, "score": 0, "last_activity_date": 1520529917, "last_edit_date": 1520529917, "creation_date": 1520464545, "answer_id": 49162831, "question_id": 49161006, "link": "https://stackoverflow.com/questions/49161006/django-cms-on-raspberry-pi-3-fails/49162831#49162831", "title": "Django CMS on Raspberry Pi 3 Fails", "body": "<p>It looks like it is the Pillow installation that is failing. You need to install the python development libraries first</p>\n\n<pre><code># Python 2\nsudo apt-get install python-dev python-setuptools\n\n# Python 3\nsudo apt-get install python3-dev python3-setuptools\n</code></pre>\n\n<p>There are some other prerequisites you'll have to install as well. The Pillow docs give the following prerequisites for Ubuntu 14.04. I'm not sure what the equivalents are for Raspian Stretch</p>\n\n<pre><code>sudo apt-get install libtiff5-dev libjpeg8-dev zlib1g-dev \\\nlibfreetype6-dev liblcms2-dev libwebp-dev libharfbuzz-dev libfribidi-dev \\\ntcl8.6-dev tk8.6-dev python-tk\n</code></pre>\n\n<p>See the <a href=\"https://pillow.readthedocs.io/en/5.0.0/installation.html#linux-installation\" rel=\"nofollow noreferrer\">Pillow docs</a> for more information.</p>\n\n<p>Since you're starting a new project, allow me to encourage you to use Python 3! </p>\n\n<p>Instead of running the Django CMS installer, I would try to get Pillow to install by itself. If it fails, then the error message should be more obvious.</p>\n\n<pre><code>pip install Pillow\n</code></pre>\n\n<p>If the latest version fails, you could try 3.0, since that seems to be the minimum version for Django CMS.</p>\n\n<pre><code>pip install 'Pillow==3.0'\n</code></pre>\n"}], "owner": {"reputation": 2750, "user_id": 8308081, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-pReTF2MKrbE/AAAAAAAAAAI/AAAAAAAAADI/-BW8Tt3EURc/photo.jpg?sz=128", "display_name": "Lukas Kirner", "link": "https://stackoverflow.com/users/8308081/lukas-kirner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 297, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1520529917, "creation_date": 1520456047, "question_id": 49161006, "link": "https://stackoverflow.com/questions/49161006/django-cms-on-raspberry-pi-3-fails", "title": "Django CMS on Raspberry Pi 3 Fails", "body": "<p>Today I tried to install django CMS for a while on my Raspberry pi but it will not work. I Installed a fresh \"RASPBIAN STRETCH LITE\" then I entered following commands via an ssh connection:</p>\n\n<pre><code>sudo wget https://bootstrap.pypa.io/get-pip.py\nsudo python get-pip.py\nsudo pip install Django==1.10\nsudo pip install virtualenv\ncd /srv\nsudo mkdir django_cms\ncd django_cms\nsudo virtualenv env\nsource env/bin/activate\nsudo pip install --upgrade pip\nsudo pip install djangocms-installer\nsudo mkdir django_site\ncd django_site/\nsudo djangocms -f -p . web_site\n</code></pre>\n\n<p>All this follows this <a href=\"https://django-cms.readthedocs.io/en/latest/introduction/install.html\" rel=\"nofollow noreferrer\">guide</a><br>\nAnd this error get thrown after executing the last command above:</p>\n\n<pre><code>    Creating the project\nPlease wait while I install dependencies\nERROR: cmd : [u'pip', u'install', u'-q', u'django-cms&gt;=3.5,&lt;3.6', u'djangocms-admin-style&gt;=1.2,&lt;1.3', u'django-treebeard&gt;=4.0,&lt;5.0', u'https://github.com/divio/djangocms-text-ckeditor/archive/master.zip?1520455195.14', u'https://github.com/divio/djangocms-file/archive/master.zip?1520455195.14', u'https://github.com/divio/djangocms-link/archive/master.zip?1520455195.14', u'https://github.com/divio/djangocms-style/archive/master.zip?1520455195.14', u'https://github.com/divio/djangocms-googlemap/archive/master.zip?1520455195.14', u'https://github.com/divio/djangocms-snippet/archive/master.zip?1520455195.14', u'https://github.com/divio/djangocms-picture/archive/master.zip?1520455195.14', u'https://github.com/divio/djangocms-video/archive/master.zip?1520455195.14', u'https://github.com/divio/djangocms-column/archive/master.zip?1520455195.14', u'easy_thumbnails', u'django-filer&gt;=1.3', u'Django&lt;2.0', u'pytz', u'django-classy-tags&gt;=0.7', u'html5lib&gt;=0.999999,&lt;0.99999999', u'Pillow&gt;=3.0', u'django-sekizai&gt;=0.9', u'six'] :Command \"/usr/bin/python -u -c \"import setuptools, tokenize;__file__='/tmp/pip-build-FFzxtb/Pillow/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\\r\\n', '\\n');f.close();exec(compile(code, __file__, 'exec'))\" install --record /tmp/pip-CPB18v-record/install-record.txt --single-version-externally-managed --compile\" failed with error code 1 in /tmp/pip-build-FFzxtb/Pillow/\n\nThe installation has failed.\n\n\n*****************************************************************\n\nCheck documentation at https://djangocms-installer.readthedocs.io\n\n*****************************************************************\n\nTraceback (most recent call last):\n  File \"/usr/local/bin/djangocms\", line 11, in &lt;module&gt;\n    sys.exit(execute())\n  File \"/usr/local/lib/python2.7/dist-packages/djangocms_installer/main.py\", line 33, in execute\n    verbose=config_data.verbose\n  File \"/usr/local/lib/python2.7/dist-packages/djangocms_installer/install/__init__.py\", line 95, in requirements\n    output = subprocess.check_output(['pip'] + args, stderr=subprocess.STDOUT)\n  File \"/usr/lib/python2.7/subprocess.py\", line 219, in check_output\n    raise CalledProcessError(retcode, cmd, output=output)\nsubprocess.CalledProcessError: Command '[u'pip', u'install', u'-q', u'django-cms&gt;=3.5,&lt;3.6', u'djangocms-admin-style&gt;=1.2,&lt;1.3', u'django-treebeard&gt;=4.0,&lt;5.0', u'https://github.com/divio/djangocms-text-ckeditor/archive/master.zip?1520455195.14', u'https://github.com/divio/djangocms-file/archive/master.zip?1520455195.14', u'https://github.com/divio/djangocms-link/archive/master.zip?1520455195.14', u'https://github.com/divio/djangocms-style/archive/master.zip?1520455195.14', u'https://github.com/divio/djangocms-googlemap/archive/master.zip?1520455195.14', u'https://github.com/divio/djangocms-snippet/archive/master.zip?1520455195.14', u'https://github.com/divio/djangocms-picture/archive/master.zip?1520455195.14', u'https://github.com/divio/djangocms-video/archive/master.zip?1520455195.14', u'https://github.com/divio/djangocms-column/archive/master.zip?1520455195.14', u'easy_thumbnails', u'django-filer&gt;=1.3', u'Django&lt;2.0', u'pytz', u'django-classy-tags&gt;=0.7', u'html5lib&gt;=0.999999,&lt;0.99999999', u'Pillow&gt;=3.0', u'django-sekizai&gt;=0.9', u'six']' returned non-zero exit status 1\n</code></pre>\n\n<p>Does anyone of you have an solution for this?</p>\n\n<p>(My Python version: 2.7.13)</p>\n"}, {"tags": ["python", "tensorflow"], "comments": [{"owner": {"reputation": 349, "user_id": 7705781, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e8308f92d2142ecd3051f48d941bbad?s=128&d=identicon&r=PG&f=1", "display_name": "mdasari", "link": "https://stackoverflow.com/users/7705781/mdasari"}, "edited": false, "score": 0, "creation_date": 1520455959, "post_id": 49160972, "comment_id": 85327542, "body": "perhaps you could remove the old version and install the newer version?"}, {"owner": {"reputation": 1, "user_id": 9458685, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156193027608686/picture?type=large", "display_name": "Metin G&#252;ney", "link": "https://stackoverflow.com/users/9458685/metin-g%c3%bcney"}, "reply_to_user": {"reputation": 349, "user_id": 7705781, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e8308f92d2142ecd3051f48d941bbad?s=128&d=identicon&r=PG&f=1", "display_name": "mdasari", "link": "https://stackoverflow.com/users/7705781/mdasari"}, "edited": false, "score": 0, "creation_date": 1520566038, "post_id": 49160972, "comment_id": 85377742, "body": "I find the explanation I&#39;m looking for in Adriano&#39;s answer in <a href=\"https://stackoverflow.com/questions/43419795/how-to-install-tensorflow-on-anaconda-python-3-6?answertab=votes#tab-top\" title=\"how to install tensorflow on anaconda python 3 6\">stackoverflow.com/questions/43419795/&hellip;</a> ."}], "owner": {"reputation": 1, "user_id": 9458685, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156193027608686/picture?type=large", "display_name": "Metin G&#252;ney", "link": "https://stackoverflow.com/users/9458685/metin-g%c3%bcney"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 179, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1520455856, "creation_date": 1520455856, "question_id": 49160972, "link": "https://stackoverflow.com/questions/49160972/about-installing-new-version-of-tensorflow", "title": "about installing new version of TensorFlow", "body": "<p>I am using Win10 / Python 3.6 / Anaconda Navigator. I installed latest version of TensorFlow via Anaconda Prompt. I saw the message of \"Succesfully installed ... tensorboard-1.6.0 tensorflow-1.6.0 ...\" on the Anaconda Prompt. But in the jupyter nb (after \"import tensorflow as tf; print(tf.<strong>version</strong>)\") I take a result \"1.2.1\" . On the Anaconda Navigator; Environments tab, there is same result \"tensorflow version 1.2.1\".\nCould you explain my problem?</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 3694, "user_id": 1107412, "user_type": "registered", "accept_rate": 37, "profile_image": "https://i.stack.imgur.com/96ODm.png?s=128&g=1", "display_name": "Preslav Rachev", "link": "https://stackoverflow.com/users/1107412/preslav-rachev"}, "edited": false, "score": 0, "creation_date": 1520456110, "post_id": 49160944, "comment_id": 85327617, "body": "Have you looked at the <code>merge</code> function? <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.merge.html\" rel=\"nofollow noreferrer\">pandas.pydata.org/pandas-docs/stable/generated/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 709, "user_id": 3053216, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/332a16581a0c1f65d86f19f57d017af0?s=128&d=identicon&r=PG&f=1", "display_name": "user3053216", "link": "https://stackoverflow.com/users/3053216/user3053216"}, "edited": false, "score": 0, "creation_date": 1520456186, "post_id": 49161030, "comment_id": 85327655, "body": "This is exactly what i was looking for. A quick and clear solution. Thank you!"}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "reply_to_user": {"reputation": 709, "user_id": 3053216, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/332a16581a0c1f65d86f19f57d017af0?s=128&d=identicon&r=PG&f=1", "display_name": "user3053216", "link": "https://stackoverflow.com/users/3053216/user3053216"}, "edited": false, "score": 1, "creation_date": 1520456205, "post_id": 49161030, "comment_id": 85327667, "body": "@user3053216 yw~ :-) happy coding"}, {"owner": {"reputation": 15836, "user_id": 9299259, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7A5cq.jpg?s=128&g=1", "display_name": "YOLO", "link": "https://stackoverflow.com/users/9299259/yolo"}, "edited": false, "score": 1, "creation_date": 1520456254, "post_id": 49161030, "comment_id": 85327691, "body": "You beat me again by seconds. I&#39;ll delete my answer now."}], "tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": true, "score": 3, "last_activity_date": 1520456308, "last_edit_date": 1520456308, "creation_date": 1520456104, "answer_id": 49161030, "question_id": 49160944, "link": "https://stackoverflow.com/questions/49160944/pandas-insert-dataframe-into-other-dataframe-without-preserving-indices/49161030#49161030", "title": "Pandas: Insert dataframe into other dataframe without preserving indices", "body": "<p>When you do insert make sure change the df to values , pandas is index sensitive , which means it will always try to match with the index and column during calculation</p>\n\n<pre><code>original_df.iloc[[0,2],[0,1]] = df_to_insert.values\noriginal_df\nOut[651]: \n    0   1  2\n0  10  11  3\n1   4   5  6\n2  12  13  9\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 709, "user_id": 3053216, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/332a16581a0c1f65d86f19f57d017af0?s=128&d=identicon&r=PG&f=1", "display_name": "user3053216", "link": "https://stackoverflow.com/users/3053216/user3053216"}, "edited": false, "score": 1, "creation_date": 1520456351, "post_id": 49161052, "comment_id": 85327746, "body": "Thanks! I like Wens solutions more since it does not use any additional libraries, but this definitely works as well."}], "tags": [], "owner": {"reputation": 1095, "user_id": 6256935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbdf162e83be7a71cd603f73753fc542?s=128&d=identicon&r=PG&f=1", "display_name": "Jordi", "link": "https://stackoverflow.com/users/6256935/jordi"}, "is_accepted": false, "score": 1, "last_activity_date": 1520456173, "creation_date": 1520456173, "answer_id": 49161052, "question_id": 49160944, "link": "https://stackoverflow.com/questions/49160944/pandas-insert-dataframe-into-other-dataframe-without-preserving-indices/49161052#49161052", "title": "Pandas: Insert dataframe into other dataframe without preserving indices", "body": "<p>It does work with an array rather than a df:</p>\n\n<pre><code>original_df.iloc[[0,2],[0,1]] = np.array([[10,11],[12,13]])\n</code></pre>\n"}], "owner": {"reputation": 709, "user_id": 3053216, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/332a16581a0c1f65d86f19f57d017af0?s=128&d=identicon&r=PG&f=1", "display_name": "user3053216", "link": "https://stackoverflow.com/users/3053216/user3053216"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 443, "favorite_count": 0, "accepted_answer_id": 49161030, "answer_count": 2, "score": 1, "last_activity_date": 1520456308, "creation_date": 1520455748, "question_id": 49160944, "link": "https://stackoverflow.com/questions/49160944/pandas-insert-dataframe-into-other-dataframe-without-preserving-indices", "title": "Pandas: Insert dataframe into other dataframe without preserving indices", "body": "<p>I want to insert a pandas dataframe into another pandas dataframe at certain indices.</p>\n\n<p>Lets say we have this dataframe:</p>\n\n<pre><code>original_df = pd.DataFrame([[1,2,3],[4,5,6],[7,8,9]])\n\n   0  1  2\n0  1  2  3\n1  4  5  6\n2  7  8  9\n</code></pre>\n\n<p>I can then change values at certain indices as following:</p>\n\n<pre><code>original_df = pd.DataFrame([[1,2,3],[4,5,6],[7,8,9]])\noriginal_df.iloc[[0,2],[0,1]] = 2\n\n   0  1  2\n0  2  2  3\n1  4  5  6\n2  2  2  9\n</code></pre>\n\n<p>However, if i use the same technique to insert another dataframe, it doesn't work:</p>\n\n<pre><code>original_df = pd.DataFrame([[1,2,3],[4,5,6],[7,8,9]])\ndf_to_insert = pd.DataFrame([[10,11],[12,13]])\noriginal_df.iloc[[0,2],[0,1]] = df_to_insert\n\n      0     1    2\n0  10.0  11.0  3.0\n1   4.0   5.0  6.0\n2   NaN   NaN  9.0\n</code></pre>\n\n<p>I am looking for a way to get the following result:</p>\n\n<pre><code>   0  1  2\n0  10 11  3\n1  4  5  6\n2  12 13  9\n</code></pre>\n\n<p>It seems to me that with the syntax i am using, the values from df_to_insert are taken from the corresponding index at their target locations. Is there a way for me to avoid this?</p>\n"}, {"tags": ["python", "datetime"], "answers": [{"tags": [], "owner": {"reputation": 611, "user_id": 7218869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f89fa1fa74da5809fcba8db6d49a1717?s=128&d=identicon&r=PG&f=1", "display_name": "py-D", "link": "https://stackoverflow.com/users/7218869/py-d"}, "is_accepted": false, "score": 0, "last_activity_date": 1520457669, "creation_date": 1520457669, "answer_id": 49161401, "question_id": 49160939, "link": "https://stackoverflow.com/questions/49160939/get-dates-for-last-week-in-python/49161401#49161401", "title": "Get Dates for Last Week in Python", "body": "<p>you can go as follows:</p>\n\n<pre><code>from datetime import timedelta\ndef week_range(date):\n   year, week, dow = date.isocalendar()\n   # Find the first day of the week.\n   if dow == 7:\n      # Since we want to start with Sunday, let's test for that condition.\n       start_date = date\n   else:\n    # Otherwise, subtract `dow` number days to get the first day\n       start_date = date - timedelta(dow)\n\n    # Now, add 6 for the last day of the week (i.e., count up to Saturday)\n   end_date = start_date + timedelta(6)\n\n   return (start_date, end_date)\n</code></pre>\n\n<p>Now you have start and end date of week you can find out week dates as you want. For more you can refer <a href=\"https://bradmontgomery.net/blog/calculate-week-range-date/\" rel=\"nofollow noreferrer\">this</a></p>\n"}, {"comments": [{"owner": {"reputation": 507, "user_id": 2536966, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/01bd8565dd2bdb897c40463ee431d2b6?s=128&d=identicon&r=PG", "display_name": "dkeeper09", "link": "https://stackoverflow.com/users/2536966/dkeeper09"}, "edited": false, "score": 0, "creation_date": 1520460738, "post_id": 49161776, "comment_id": 85329818, "body": "Bingo. Thank you!"}], "tags": [], "owner": {"reputation": 11919, "user_id": 9183344, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U7r5r.png?s=128&g=1", "display_name": "r.ook", "link": "https://stackoverflow.com/users/9183344/r-ook"}, "is_accepted": true, "score": 2, "last_activity_date": 1520459306, "creation_date": 1520459306, "answer_id": 49161776, "question_id": 49160939, "link": "https://stackoverflow.com/questions/49160939/get-dates-for-last-week-in-python/49161776#49161776", "title": "Get Dates for Last Week in Python", "body": "<p>Here's one simple version:</p>\n\n<pre><code>from datetime import date, timedelta    \ndef get_week_days(year, week):\n\n    year_start = date(year, 1, 1)\n\n    # the following line assumes your this_week_int starts at 0\n    # if this_week_int starts at 1, change to week-2\n\n    week_start = year_start + timedelta(days=-year_start.isoweekday(), weeks=week-1)\n    week_end = week_start + timedelta(days=6)\n\n    return week_start, week_end\n</code></pre>\n\n<blockquote>\n<pre><code>get_week_days(2018, 1)\n\n# (datetime.date(2017, 12, 31), datetime.date(2018, 1, 6))\n\nget_week_days(2018, 10)\n\n# (datetime.date(2018, 3, 4), datetime.date(2018, 3, 10))\n</code></pre>\n</blockquote>\n\n<p>Essentially, <code>.isoweekday()</code> returns 1 for Monday and 7 for Sundays, so when you deduct that weekday it gives you the start at Sunday.</p>\n"}], "owner": {"reputation": 507, "user_id": 2536966, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/01bd8565dd2bdb897c40463ee431d2b6?s=128&d=identicon&r=PG", "display_name": "dkeeper09", "link": "https://stackoverflow.com/users/2536966/dkeeper09"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1821, "favorite_count": 0, "accepted_answer_id": 49161776, "answer_count": 2, "score": 1, "last_activity_date": 1520459306, "creation_date": 1520455725, "question_id": 49160939, "link": "https://stackoverflow.com/questions/49160939/get-dates-for-last-week-in-python", "title": "Get Dates for Last Week in Python", "body": "<p>Ok I'm trying to get the dates for the previous week in Python assuming the week starts on Sunday and Ends on Saturday.</p>\n\n<p>Through google and trial and error, I have this:</p>\n\n<pre><code>def get_week_days(year, week):\n    d = date(year,1,1)\n    if(d.weekday()&gt;3):\n        d = d+timedelta(7-d.weekday())\n    else:\n        d = d - timedelta(d.weekday())\n    dlt = timedelta(days = (week-1)*7)\n    FH_start = d + dlt\n    FH_end = d + dlt + timedelta(days=6)\n    return FH_start, FH_end\n\nprint get_week_days(2018, this_week_int)\n</code></pre>\n\n<p>and that outputs:\n<code>(datetime.date(2018, 3, 5), datetime.date(2018, 3, 11))</code></p>\n\n<p>How do I offset it to have the week start on Sunday, or is there a better way to write this?</p>\n"}, {"tags": ["python", "amazon-web-services", "amazon-ec2", "discord", "discord.py"], "comments": [{"owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 0, "creation_date": 1520456324, "post_id": 49160890, "comment_id": 85327723, "body": "What version of <a href=\"https://stackoverflow.com/questions/tagged/discord.py\">discord.py</a> is the target box running?  Try executing <code>python3 -c &quot;import discord; print(discord.__version__)&quot;</code>."}, {"owner": {"reputation": 1721, "user_id": 9070959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3fc72be4dddc4ff4156a7d875912d67?s=128&d=identicon&r=PG&f=1", "display_name": "emsimpson92", "link": "https://stackoverflow.com/users/9070959/emsimpson92"}, "reply_to_user": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 0, "creation_date": 1520465992, "post_id": 49160890, "comment_id": 85331780, "body": "version 1.0.0a."}, {"owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 2, "creation_date": 1520466123, "post_id": 49160890, "comment_id": 85331821, "body": "Your code is built for version 0.16 (the &quot;async&quot; branch), while your computer is running version <code>1.0</code> (the &quot;rewrite&quot; branch).  You can either change the version on the computer or update your code (you should probably update your code).  <a href=\"https://discordpy.readthedocs.io/en/rewrite/migrating.html\" rel=\"nofollow noreferrer\">The docs for the rewrite version</a> are probably a good place to start."}], "answers": [{"tags": [], "owner": {"reputation": 1721, "user_id": 9070959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3fc72be4dddc4ff4156a7d875912d67?s=128&d=identicon&r=PG&f=1", "display_name": "emsimpson92", "link": "https://stackoverflow.com/users/9070959/emsimpson92"}, "is_accepted": false, "score": 0, "last_activity_date": 1527024068, "creation_date": 1527024068, "answer_id": 50476620, "question_id": 49160890, "link": "https://stackoverflow.com/questions/49160890/discord-bot-runs-locally-but-not-on-ec2-server/50476620#50476620", "title": "Discord bot runs locally but not on EC2 server?", "body": "<p>Like Patrick said in the comments, my bot was written using the wrong API version. Updating it to the newer version solved the problem.</p>\n"}], "owner": {"reputation": 1721, "user_id": 9070959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3fc72be4dddc4ff4156a7d875912d67?s=128&d=identicon&r=PG&f=1", "display_name": "emsimpson92", "link": "https://stackoverflow.com/users/9070959/emsimpson92"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 469, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1527024068, "creation_date": 1520455558, "last_edit_date": 1520456382, "question_id": 49160890, "link": "https://stackoverflow.com/questions/49160890/discord-bot-runs-locally-but-not-on-ec2-server", "title": "Discord bot runs locally but not on EC2 server?", "body": "<p>So I can run my bot locally from my machine and it works great, but when I try to host it on an AWS I get the error:</p>\n\n<pre><code>AttributeError: 'Message' object has no attribute 'server'\n</code></pre>\n\n<p>Here's the line that's causing the problem.</p>\n\n<pre><code>role = discord.utils.get(message.server.roles, name=entered_role)\n</code></pre>\n"}, {"tags": ["python", "list", "indexing", "nested", "append"], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 9258239, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/Ry2xE.jpg?s=128&g=1", "display_name": "Emily Lauren", "link": "https://stackoverflow.com/users/9258239/emily-lauren"}, "edited": false, "score": 0, "creation_date": 1520456337, "post_id": 49161057, "comment_id": 85327732, "body": "This gives me: TypeError &#39;builtin_function_or_method&#39; object is not subscriptable"}, {"owner": {"reputation": 77, "user_id": 9258239, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/Ry2xE.jpg?s=128&g=1", "display_name": "Emily Lauren", "link": "https://stackoverflow.com/users/9258239/emily-lauren"}, "edited": false, "score": 0, "creation_date": 1520456763, "post_id": 49161057, "comment_id": 85327967, "body": "I was just about to reply saying I tried it with brackets! :D Sadly, this gives me the output: [[0,0]], so just one of the 4 indices I&#39;d like"}, {"owner": {"reputation": 77, "user_id": 9258239, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/Ry2xE.jpg?s=128&g=1", "display_name": "Emily Lauren", "link": "https://stackoverflow.com/users/9258239/emily-lauren"}, "edited": false, "score": 1, "creation_date": 1520458738, "post_id": 49161057, "comment_id": 85328937, "body": "Turns out I had to just fix a line elsewhere in my code! With that and your help, the function returns the various indices now :) thank you!"}], "tags": [], "owner": {"reputation": 4102, "user_id": 7908770, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/01c6edec3c808659a8e8f42d4259a4b3?s=128&d=identicon&r=PG&f=1", "display_name": "Adi219", "link": "https://stackoverflow.com/users/7908770/adi219"}, "is_accepted": false, "score": 0, "last_activity_date": 1520457039, "last_edit_date": 1520457039, "creation_date": 1520456198, "answer_id": 49161057, "question_id": 49160881, "link": "https://stackoverflow.com/questions/49160881/returning-index-of-elements-from-subarray-of-a-nested-list/49161057#49161057", "title": "Returning index of elements from subarray of a nested list", "body": "<p>Use <code>index.append([i, j])</code> instead of your current append line.</p>\n\n<p>This essentially is appending a list which contains the value of <code>i</code> as its first element and the value of <code>j</code> as its second elemen, which is what you want.</p>\n\n<p>Currently, your code is appending the <em>value</em> of the <em>element</em> at <code>m[i][j]</code>, which isn't what you want.</p>\n\n<p>EDIT (in response to comments):</p>\n\n<p>Fixed the error :-) I had accidentally forgot(ten) to put the brackets around the square brackets.</p>\n\n<p>You need to <code>return</code> the <code>index</code> list <em>after</em> the <code>for</code> loops (reindent your <code>return</code> line so that it's one indentation level deeper than the declaration of the function (it should be aligned with the <code>index = []</code> line)).</p>\n"}], "owner": {"reputation": 77, "user_id": 9258239, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/Ry2xE.jpg?s=128&g=1", "display_name": "Emily Lauren", "link": "https://stackoverflow.com/users/9258239/emily-lauren"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1520457039, "creation_date": 1520455522, "question_id": 49160881, "link": "https://stackoverflow.com/questions/49160881/returning-index-of-elements-from-subarray-of-a-nested-list", "title": "Returning index of elements from subarray of a nested list", "body": "<p>I'm having a lot of issues trying create the following function...horizontal(m) that takes a 2D list (representing a matrix) as input, searches for 4 elements that are in arithmetic progression and returns the locations (indices) of these elements. (An aside: it's also suppose to search for 4 elements in arithmetic progression vertically and diagonally, but I'm just working on the horizontal search now.) I've tried a bunch of different codes, but nothing seems to work out and we haven't worked with nested lists at all in my class at school. Please advise!</p>\n\n<pre><code>def horizontal(m):\n\n    diff = m[0][1] - m[0][0]\n    index=[]\n\n    for i in range(len(m)-1):\n        for j in range(len(m[i])):\n            if m[i][j+1] - m[i][j] == diff:\n                index.append(m[i][j])\n                return index\n\n&gt;&gt;&gt;horizontal([[1, 2, 3, 4],\n               [2, 5, 6, 9]])\n&gt;&gt;&gt;[1] #but I would like it to return: [[0,0],[0,1],[0,2],[0,3]]\n</code></pre>\n\n<p>Also, I'm aware that this currently doesn't limit the function's search to 4 elements...I just wanted to figure out how to properly return the indices before continuing. Thank you!</p>\n"}, {"tags": ["python", "python-3.x", "encoding", "utf-8", "base64"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 2, "creation_date": 1520458020, "post_id": 49160878, "comment_id": 85328594, "body": "I cannot reproduce this behavior. your second <code>print</code> gives me <code>\u3053\u3093\u306b\u3061\u306f</code>"}, {"owner": {"reputation": 41, "user_id": 8475096, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6049e5f18e086b92a4761059ffc3afa?s=128&d=identicon&r=PG&f=1", "display_name": "ellsworthless", "link": "https://stackoverflow.com/users/8475096/ellsworthless"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1520464707, "post_id": 49160878, "comment_id": 85331395, "body": "This seems to be a windows issue as I can&#39;t repeat it on Mac or Ubuntu.  But here is what I was seeing: <a href=\"https://imgur.com/a/R2FBJ\" rel=\"nofollow noreferrer\">imgur.com/a/R2FBJ</a>  Note that the initial Japanese string is pasted in.  I&#39;m going to go ahead as this seems to just be a GUI issues as opposed to python doing it wrong."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 2, "creation_date": 1520464771, "post_id": 49160878, "comment_id": 85331411, "body": "Um, you pretty clearly do <code>ja_string = &quot;\u3053\u3053\u3093\u3093\u306b\u306b\u3061\u3061\u306f\u306f&quot;</code> in that image... so do you mean you copied <code>&quot;\u3053\u3093\u306b\u3061\u306f&quot;</code> then pasted it into your terminal emulator and got <code>ja_string = &quot;\u3053\u3053\u3093\u3093\u306b\u306b\u3061\u3061\u306f\u306f&quot;</code>?"}, {"owner": {"reputation": 41, "user_id": 8475096, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6049e5f18e086b92a4761059ffc3afa?s=128&d=identicon&r=PG&f=1", "display_name": "ellsworthless", "link": "https://stackoverflow.com/users/8475096/ellsworthless"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1520465115, "post_id": 49160878, "comment_id": 85331524, "body": "Correct, I copy \u3053\u3093\u306b\u3061\u306f and I get \u3053\u3053\u306b\u306b\u3061\u3061\u306f\u306f"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1520465211, "post_id": 49160878, "comment_id": 85331553, "body": "So that <i>is</i> weird, and might be worth it&#39;s own question. But it looks like it is related to whatever terminal emulator you are using... <code>cmd</code> in windows?"}, {"owner": {"reputation": 41, "user_id": 8475096, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6049e5f18e086b92a4761059ffc3afa?s=128&d=identicon&r=PG&f=1", "display_name": "ellsworthless", "link": "https://stackoverflow.com/users/8475096/ellsworthless"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1520465348, "post_id": 49160878, "comment_id": 85331596, "body": "I&#39;m using ConEmu currently and they have a github ticket from over a year ago about the issue but it&#39;s closed.  I&#39;ll have to look into it more.  Thanks for your help."}], "owner": {"reputation": 41, "user_id": 8475096, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6049e5f18e086b92a4761059ffc3afa?s=128&d=identicon&r=PG&f=1", "display_name": "ellsworthless", "link": "https://stackoverflow.com/users/8475096/ellsworthless"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1520458035, "creation_date": 1520455501, "last_edit_date": 1520458035, "question_id": 49160878, "link": "https://stackoverflow.com/questions/49160878/why-is-python3-decode-encode-duplicating-characters", "title": "Why is Python3 decode/encode duplicating characters?", "body": "<p>I am trying to check the subject of emails in foreign languages for automatic tests.  I was having issues with encoding so I decided to try and write something that handles the encoding of the subject.  In this case it's given to me in base64.  Converting this to utf-8 and then decoding it produces this strange double character problem.  Here is some code I used to test this:</p>\n\n<pre><code>import base64\n\nja_str = \"\u3053\u3093\u306b\u3061\u306f\"\n\n    encoded_js = base64.b64encode(ja_str.encode())\n    print (encoded_js)\n\n    print(base64.b64decode(encoded_js).decode())\n</code></pre>\n\n<p>The result of the above is:</p>\n\n<pre><code>b'44GT44KT44Gr44Gh44Gv'\n\u3053\u3053\u3093\u3093\u306b\u306b\u3061\u3061\u306f\u306f\n</code></pre>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 1058, "user_id": 6659095, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c632542e2d79eb46c23e26044828385b?s=128&d=identicon&r=PG&f=1", "display_name": "Mr.cysl", "link": "https://stackoverflow.com/users/6659095/mr-cysl"}, "reply_to_user": {"reputation": 3394, "user_id": 7727583, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/iVG54.jpg?s=128&g=1", "display_name": "Yannic Hamann", "link": "https://stackoverflow.com/users/7727583/yannic-hamann"}, "edited": false, "score": 0, "creation_date": 1520455721, "post_id": 49160820, "comment_id": 85327429, "body": "@YannicHamann it does not. If you mix such kinds of chars together, the display will be weird, as mentioned in the question. I am also surprised and have no idea how to deal with it..."}], "answers": [{"tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": true, "score": 1, "last_activity_date": 1520456168, "last_edit_date": 1520456168, "creation_date": 1520455697, "answer_id": 49160931, "question_id": 49160820, "link": "https://stackoverflow.com/questions/49160820/how-to-sort-a-counter-with-arabic-in-python/49160931#49160931", "title": "How to sort a counter with Arabic in Python", "body": "<p>The error you're getting out of <code>sorted</code> has nothing to do with the Arabic. The error you're getting out of <code>sorted</code> is because you tried to sort <code>cnt</code>, but your <code>key</code> function is written as if it's sorting <code>cnt.items()</code>. If you add the <code>items()</code> call, <code>sorted(cnt.items(), key=operator.itemgetter(1), reverse=True)</code> will behave the same regardless of whether the keys of <code>cnt</code> use Arabic characters.</p>\n\n<p>As for the display issues, those <em>are</em> due to Arabic. Getting mixed RTL and LTR text to display properly isn't easy, especially in a context like source code where you can't insert formatting characters without changing the meaning. I recommend not trying to use RTL characters in source code; you could move the Arabic to an external file. I would expect most Arabic in real programs to come from external input and localization files.</p>\n"}], "owner": {"reputation": 1058, "user_id": 6659095, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c632542e2d79eb46c23e26044828385b?s=128&d=identicon&r=PG&f=1", "display_name": "Mr.cysl", "link": "https://stackoverflow.com/users/6659095/mr-cysl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 49160931, "answer_count": 1, "score": 2, "last_activity_date": 1520456511, "creation_date": 1520455242, "last_edit_date": 1520456511, "question_id": 49160820, "link": "https://stackoverflow.com/questions/49160820/how-to-sort-a-counter-with-arabic-in-python", "title": "How to sort a counter with Arabic in Python", "body": "<p>Since Arabic starts at the right side, there will be bugs if I do the following:</p>\n\n<pre><code>cnt = {}\ncnt[\"\u067e\"] = 5 # right start char\ncnt[\"t\"] = 4 # left start char\nimport operator\nsorted(cnt, key=operator.itemgetter(1), reverse=True)\n</code></pre>\n\n<p>Is there any way I could solve this problem?</p>\n"}, {"tags": ["python", "r", "subprocess"], "comments": [{"owner": {"reputation": 1619, "user_id": 1564947, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/71ba3964ea0f6279b1f7416d0b91fb72?s=128&d=identicon&r=PG", "display_name": "daviewales", "link": "https://stackoverflow.com/users/1564947/daviewales"}, "edited": false, "score": 0, "creation_date": 1520456588, "post_id": 49160818, "comment_id": 85327882, "body": "Does it work if you run <code>C:&#47;Program Files&#47;R&#47;R-3.4.3&#47;bin&#47;Rscript.exe C:&#47;Users&#47;a0266997&#47;Documents&#47;PossionDistribution.R 10</code> directly in <code>cmd.exe</code>? Your Python looks fine."}, {"owner": {"reputation": 83, "user_id": 9146842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03317bca30b000d0ac77be0a6002dfdf?s=128&d=identicon&r=PG&f=1", "display_name": "Jen", "link": "https://stackoverflow.com/users/9146842/jen"}, "reply_to_user": {"reputation": 1619, "user_id": 1564947, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/71ba3964ea0f6279b1f7416d0b91fb72?s=128&d=identicon&r=PG", "display_name": "daviewales", "link": "https://stackoverflow.com/users/1564947/daviewales"}, "edited": false, "score": 0, "creation_date": 1520457091, "post_id": 49160818, "comment_id": 85328130, "body": "Thanks, what is code should be to run in cmd?   If I type in: &#39;C:/Program Files/R/R-3.4.3/bin/Rscript.exe&#39;, &#39;C:/Users/a0266997/Documents/Casualty/CasualtyEventPossionDi&zwnj;&#8203;stribution.R&#39;, &#39;200&#39;, I got error: &#39;&#39;C&#39; is not recognized as internal or external command...."}, {"owner": {"reputation": 1619, "user_id": 1564947, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/71ba3964ea0f6279b1f7416d0b91fb72?s=128&d=identicon&r=PG", "display_name": "daviewales", "link": "https://stackoverflow.com/users/1564947/daviewales"}, "edited": false, "score": 0, "creation_date": 1520457927, "post_id": 49160818, "comment_id": 85328545, "body": "Try copying exactly what is in my comment, but run it in PowerShell, rather than cmd."}, {"owner": {"reputation": 83, "user_id": 9146842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03317bca30b000d0ac77be0a6002dfdf?s=128&d=identicon&r=PG&f=1", "display_name": "Jen", "link": "https://stackoverflow.com/users/9146842/jen"}, "reply_to_user": {"reputation": 1619, "user_id": 1564947, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/71ba3964ea0f6279b1f7416d0b91fb72?s=128&d=identicon&r=PG", "display_name": "daviewales", "link": "https://stackoverflow.com/users/1564947/daviewales"}, "edited": false, "score": 0, "creation_date": 1520458247, "post_id": 49160818, "comment_id": 85328716, "body": "I got this error: C:/Program : The term &#39;C:/Program&#39; is not recognized as the name of a cmdlet, function,"}, {"owner": {"reputation": 1619, "user_id": 1564947, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/71ba3964ea0f6279b1f7416d0b91fb72?s=128&d=identicon&r=PG", "display_name": "daviewales", "link": "https://stackoverflow.com/users/1564947/daviewales"}, "edited": false, "score": 0, "creation_date": 1520458858, "post_id": 49160818, "comment_id": 85329005, "body": "Sorry! Try this in <code>CMD.exe</code>: <code>&quot;C:\\Program Files\\R\\R-3.4.3\\bin\\Rscript.exe&quot; &quot;C:\\Users\\a0266997\\Documents\\PossionDistribution.R&quot; 10</code>"}, {"owner": {"reputation": 1619, "user_id": 1564947, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/71ba3964ea0f6279b1f7416d0b91fb72?s=128&d=identicon&r=PG", "display_name": "daviewales", "link": "https://stackoverflow.com/users/1564947/daviewales"}, "edited": false, "score": 0, "creation_date": 1520458946, "post_id": 49160818, "comment_id": 85329046, "body": "The quote marks are needed, because there is a space in &quot;Program Files&quot;, and we need to change all the forward slashes to back slashes, because Windows likes to be different."}, {"owner": {"reputation": 83, "user_id": 9146842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03317bca30b000d0ac77be0a6002dfdf?s=128&d=identicon&r=PG&f=1", "display_name": "Jen", "link": "https://stackoverflow.com/users/9146842/jen"}, "reply_to_user": {"reputation": 1619, "user_id": 1564947, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/71ba3964ea0f6279b1f7416d0b91fb72?s=128&d=identicon&r=PG", "display_name": "daviewales", "link": "https://stackoverflow.com/users/1564947/daviewales"}, "edited": false, "score": 0, "creation_date": 1520524295, "post_id": 49160818, "comment_id": 85359623, "body": "I got error as : At line:1 char:46 + &quot;C:\\Program Files\\R\\R-3.4.3\\bin\\Rscript.exe&quot; &quot;C:\\Users\\a0266997\\Documents\\Possio ... +                                              ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Unexpected token &#39;&quot;C:\\Users\\a0266997\\Documents\\PossionDistribution.R&quot;&#39; in expression or statement. At line:1 char:98 + ... istribution.R&quot; 10 +                    ~~ Unexpected token &#39;10&#39; in expression or statement.     + CategoryInfo          : ParserError: (:) [], ParentContainsErrorRecordException     + FullyQualifiedErrorId : UnexpectedToken"}, {"owner": {"reputation": 1619, "user_id": 1564947, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/71ba3964ea0f6279b1f7416d0b91fb72?s=128&d=identicon&r=PG", "display_name": "daviewales", "link": "https://stackoverflow.com/users/1564947/daviewales"}, "edited": false, "score": 0, "creation_date": 1520541226, "post_id": 49160818, "comment_id": 85369550, "body": "Alright! So that&#39;s the real problem. That&#39;s the reason why it doesn&#39;t work when you add the <code>+ args</code>  Does it work if you run the same thing without the <code>10</code> at the end?"}, {"owner": {"reputation": 83, "user_id": 9146842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03317bca30b000d0ac77be0a6002dfdf?s=128&d=identicon&r=PG&f=1", "display_name": "Jen", "link": "https://stackoverflow.com/users/9146842/jen"}, "reply_to_user": {"reputation": 1619, "user_id": 1564947, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/71ba3964ea0f6279b1f7416d0b91fb72?s=128&d=identicon&r=PG", "display_name": "daviewales", "link": "https://stackoverflow.com/users/1564947/daviewales"}, "edited": false, "score": 0, "creation_date": 1520542158, "post_id": 49160818, "comment_id": 85370040, "body": "after taking off &quot;10&quot; I got error: At line:1 char:46 + &quot;C:\\Program Files\\R\\R-3.4.3\\bin\\Rscript.exe&quot; &quot;C:\\Users\\a0266997\\Documents\\Possio ... +                                              ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Unexpected token &#39;&quot;C:\\Users\\a0266997\\Documents\\PossionDistribution.R&quot;&#39; in expression or statement.     + CategoryInfo          : ParserError: (:) [], ParentContainsErrorRecordException     + FullyQualifiedErrorId : UnexpectedToken"}, {"owner": {"reputation": 1619, "user_id": 1564947, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/71ba3964ea0f6279b1f7416d0b91fb72?s=128&d=identicon&r=PG", "display_name": "daviewales", "link": "https://stackoverflow.com/users/1564947/daviewales"}, "edited": false, "score": 0, "creation_date": 1520542944, "post_id": 49160818, "comment_id": 85370411, "body": "Could you put both files online so I can check what&#39;s happening? You could post them here: <a href=\"https://gist.github.com\" rel=\"nofollow noreferrer\">gist.github.com</a>"}, {"owner": {"reputation": 83, "user_id": 9146842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03317bca30b000d0ac77be0a6002dfdf?s=128&d=identicon&r=PG&f=1", "display_name": "Jen", "link": "https://stackoverflow.com/users/9146842/jen"}, "reply_to_user": {"reputation": 1619, "user_id": 1564947, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/71ba3964ea0f6279b1f7416d0b91fb72?s=128&d=identicon&r=PG", "display_name": "daviewales", "link": "https://stackoverflow.com/users/1564947/daviewales"}, "edited": false, "score": 0, "creation_date": 1520981866, "post_id": 49160818, "comment_id": 85537733, "body": "They are at <a href=\"https://gist.github.com/anonymous/a28b2f3728e87f673525613bd10978cb\" rel=\"nofollow noreferrer\">gist.github.com/anonymous/a28b2f3728e87f673525613bd10978cb</a> now"}], "owner": {"reputation": 83, "user_id": 9146842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03317bca30b000d0ac77be0a6002dfdf?s=128&d=identicon&r=PG&f=1", "display_name": "Jen", "link": "https://stackoverflow.com/users/9146842/jen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1520455896, "creation_date": 1520455220, "last_edit_date": 1520455896, "question_id": 49160818, "link": "https://stackoverflow.com/questions/49160818/run-r-scripte-from-python-with-arg-input", "title": "Run R scripte from Python with arg input", "body": "<pre><code>import subprocess\n\nIterations = 10\ncommand = 'C:/Program Files/R/R-3.4.3/bin/Rscript.exe'\npath2script = 'C:/Users/a0266997/Documents/PossionDistribution.R'\nargs = [str(Iterations)]\ncmd = [command, path2script] + args\nsubprocess.Popen(cmd)\n</code></pre>\n\n<p>The code works perfectly fine when there is no \"+ args\" at cmd line</p>\n\n<p>However, after added \"+ args\", the R script doesn't output a csv file which it does before. Any tips of how to pass the args from Python to R? How the R code should look like ( Iterations =  as.numeric(cmd[2]) is not right) ?  I'd appreciate</p>\n"}, {"tags": ["python", "sqlite", "sql-delete"], "comments": [{"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1520455264, "post_id": 49160809, "comment_id": 85327190, "body": "How do you verify the content of the database? Are you sure you are not seeing some cached values?"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1520455715, "post_id": 49160809, "comment_id": 85327427, "body": "At a guess, is there any leading or trailing whitespace on <code>devicename</code>?"}, {"owner": {"reputation": 1, "user_id": 9458810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/113719ebeb0b91dbd6f789973f252305?s=128&d=identicon&r=PG&f=1", "display_name": "p0lr", "link": "https://stackoverflow.com/users/9458810/p0lr"}, "edited": false, "score": 0, "creation_date": 1520456124, "post_id": 49160809, "comment_id": 85327627, "body": "I don&#39;t think there are any whitespaces.  I&#39;m reading the data from the table to create the form that allows for deletion.  Here is the way the radio button is being formed: &lt;td&gt;&lt;input type=&quot;radio&quot; name=&quot;devicedelete&quot; value=&quot;Dan-Mac&quot;/&gt;&lt;/td&gt;. I would think the whitespace would show there if there was any."}, {"owner": {"reputation": 1, "user_id": 9458810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/113719ebeb0b91dbd6f789973f252305?s=128&d=identicon&r=PG&f=1", "display_name": "p0lr", "link": "https://stackoverflow.com/users/9458810/p0lr"}, "edited": false, "score": 0, "creation_date": 1520456332, "post_id": 49160809, "comment_id": 85327728, "body": "I have been very careful to commit every call (other than select) to ensure there is no cached data."}, {"owner": {"reputation": 1, "user_id": 9458810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/113719ebeb0b91dbd6f789973f252305?s=128&d=identicon&r=PG&f=1", "display_name": "p0lr", "link": "https://stackoverflow.com/users/9458810/p0lr"}, "edited": false, "score": 0, "creation_date": 1520456383, "post_id": 49160809, "comment_id": 85327763, "body": "I can insert into the database, so I know the permissions are good, and I can see the row in the database that I&#39;m trying to delete."}, {"owner": {"reputation": 1, "user_id": 9458810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/113719ebeb0b91dbd6f789973f252305?s=128&d=identicon&r=PG&f=1", "display_name": "p0lr", "link": "https://stackoverflow.com/users/9458810/p0lr"}, "edited": false, "score": 0, "creation_date": 1520456403, "post_id": 49160809, "comment_id": 85327776, "body": "I can also delete the row using the command-line sqlite3 interface."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "reply_to_user": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1520456685, "post_id": 49160809, "comment_id": 85327928, "body": "Further to what @Code-Apprentice was saying; after <code>conn.commit()</code>, what do you get from <code>print(cursor.execute(&quot;SELECT * FROM DevicesDynamic WHERE DeviceName = ?&quot;, (devicename, )).fetchall()</code>. It&#39;s not clear <i>where</i> you&#39;re seeing the value you want to delete."}, {"owner": {"reputation": 1, "user_id": 9458810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/113719ebeb0b91dbd6f789973f252305?s=128&d=identicon&r=PG&f=1", "display_name": "p0lr", "link": "https://stackoverflow.com/users/9458810/p0lr"}, "edited": false, "score": 0, "creation_date": 1520457269, "post_id": 49160809, "comment_id": 85328221, "body": "Ah - I have a page that can add or delete an entry to the database.  The order is delete a device if delete device is defined, add a device if all of the necessary fields have data, and at the end of the page, it reads from the database to populate the delete form."}, {"owner": {"reputation": 1, "user_id": 9458810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/113719ebeb0b91dbd6f789973f252305?s=128&d=identicon&r=PG&f=1", "display_name": "p0lr", "link": "https://stackoverflow.com/users/9458810/p0lr"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1520457494, "post_id": 49160809, "comment_id": 85328323, "body": "@roganjosh The query you gave me caused a HTTP 500 error on the Apache server.  I changed it to <code>print cursor.execute(&quot;SELECT * FROM DevicesDynamic WHERE DeviceName = ?&quot;, (devicename, )).fetchall()</code> and it worked.  It provided an empty set, so I&#39;m thinking it&#39;s not matching even though it should..."}, {"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1520457739, "post_id": 49160809, "comment_id": 85328451, "body": "So it sounds like you are seeing the data that should have been deleted in the generated HTML UI. You should use the <code>sqlite3</code> command-line tool or a GUI database tool to check the actual data in the table."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 9458810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/113719ebeb0b91dbd6f789973f252305?s=128&d=identicon&r=PG&f=1", "display_name": "p0lr", "link": "https://stackoverflow.com/users/9458810/p0lr"}, "is_accepted": false, "score": 0, "last_activity_date": 1520457720, "creation_date": 1520457720, "answer_id": 49161415, "question_id": 49160809, "link": "https://stackoverflow.com/questions/49160809/sqlite2-and-python-delete-not-working/49161415#49161415", "title": "SQLite2 and Python DELETE not working", "body": "<p>I'm going to admit my rookie mistake - I used the wrong variable name to populate the query.  I'm plugging in devicename and the variable should be devicedelete.  After making the change, the code works as expected.</p>\n\n<p>Thanks for the help, I'll be in the corner with my head hung in shame.</p>\n"}], "owner": {"reputation": 1, "user_id": 9458810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/113719ebeb0b91dbd6f789973f252305?s=128&d=identicon&r=PG&f=1", "display_name": "p0lr", "link": "https://stackoverflow.com/users/9458810/p0lr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1520457720, "creation_date": 1520455178, "question_id": 49160809, "link": "https://stackoverflow.com/questions/49160809/sqlite2-and-python-delete-not-working", "title": "SQLite2 and Python DELETE not working", "body": "<p>I've gone over this several times and researched like crazy, but still cannot figure out why this SQL delete is not working.</p>\n\n<pre><code>if (devicedelete):\n  print devicedelete\n  conn = sqlite3.connect(dbfile)\n  cursor = conn.cursor()\n  try:\n    cursor.execute('DELETE FROM DevicesDynamic WHERE DeviceName = ?', (devicename, ))\n  except sqlite3.Error as e:\n    print e.args[0]\n  conn.commit()\n  conn.close()\n</code></pre>\n\n<p>The code does display the value that I expect in the devicedelete variable, but it is not deleting from the database.</p>\n\n<p>I am not receiving any errors.</p>\n\n<p>I saw some queries that used three single quotes around the query, so I tried that with no difference in results.</p>\n\n<p>Any thoughts here would be greatly appreciated!</p>\n"}, {"tags": ["python", "linux", "selenium"], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 4581079, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh5.googleusercontent.com/-rbj1D1vc8gw/AAAAAAAAAAI/AAAAAAAAAM0/c007xQyCw78/photo.jpg?sz=128", "display_name": "Buvaneswari Sekar", "link": "https://stackoverflow.com/users/4581079/buvaneswari-sekar"}, "edited": false, "score": 0, "creation_date": 1520520134, "post_id": 49164059, "comment_id": 85356586, "body": "I used above command but it is not working again the same error. I think after click page is reloaded, so next time it not possible to find the next option from dropdwon. I am getting below error."}, {"owner": {"reputation": 53, "user_id": 4581079, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh5.googleusercontent.com/-rbj1D1vc8gw/AAAAAAAAAAI/AAAAAAAAAM0/c007xQyCw78/photo.jpg?sz=128", "display_name": "Buvaneswari Sekar", "link": "https://stackoverflow.com/users/4581079/buvaneswari-sekar"}, "edited": false, "score": 0, "creation_date": 1520520178, "post_id": 49164059, "comment_id": 85356630, "body": "j.click()  ge, screen, stacktrace) selenium.common.exceptions.StaleElementReferenceException: Message: The element reference of &lt;option&gt; is stale; either the element is no longer attached to the DOM, it is not in the current frame context, or the document has been refreshed"}, {"owner": {"reputation": 71, "user_id": 6253836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d12001dfa91e7d931caa004237ad003?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick", "link": "https://stackoverflow.com/users/6253836/patrick"}, "reply_to_user": {"reputation": 53, "user_id": 4581079, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh5.googleusercontent.com/-rbj1D1vc8gw/AAAAAAAAAAI/AAAAAAAAAM0/c007xQyCw78/photo.jpg?sz=128", "display_name": "Buvaneswari Sekar", "link": "https://stackoverflow.com/users/4581079/buvaneswari-sekar"}, "edited": false, "score": 0, "creation_date": 1520560518, "post_id": 49164059, "comment_id": 85376545, "body": "possible to edit the the question with the url so we could check?  1. either the page has been refreshed,  2. directed to wrong site or  3. the element did not appear. if there is no changes in the code above and inserted only the driver.execute_script, there should be a wait option before going to the element"}, {"owner": {"reputation": 53, "user_id": 4581079, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh5.googleusercontent.com/-rbj1D1vc8gw/AAAAAAAAAAI/AAAAAAAAAM0/c007xQyCw78/photo.jpg?sz=128", "display_name": "Buvaneswari Sekar", "link": "https://stackoverflow.com/users/4581079/buvaneswari-sekar"}, "edited": false, "score": 0, "creation_date": 1520758591, "post_id": 49164059, "comment_id": 85440381, "body": "1)Yes, page is refreshed once search button is clicked,2) I print the current url it is the same page, it is not going to wrong page. 3)I used wait option still, the same exception.[stale element reference: element is not attached to the page document]. any other option is there to solve the issue"}], "tags": [], "owner": {"reputation": 71, "user_id": 6253836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d12001dfa91e7d931caa004237ad003?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick", "link": "https://stackoverflow.com/users/6253836/patrick"}, "is_accepted": false, "score": 0, "last_activity_date": 1520473729, "last_edit_date": 1520473729, "creation_date": 1520473381, "answer_id": 49164059, "question_id": 49160750, "link": "https://stackoverflow.com/questions/49160750/how-to-select-dropdown-option1-and-do-search-untill-the-last-optionn-once-page/49164059#49164059", "title": "How to select dropdown option1 and do search untill the last optionn, once page is reloaded,next time loop fails,to find the dropdown option", "body": "<p>does it open in a new page/tab? if not, you can back to the page by the previous button</p>\n\n<pre><code>driver.execute_script(\"window.history.go(**x**)\")\n</code></pre>\n\n<p>where x = number of page/s, eg. if you need to go back 2 pages, value should be <strong>-2</strong></p>\n"}], "owner": {"reputation": 53, "user_id": 4581079, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh5.googleusercontent.com/-rbj1D1vc8gw/AAAAAAAAAAI/AAAAAAAAAM0/c007xQyCw78/photo.jpg?sz=128", "display_name": "Buvaneswari Sekar", "link": "https://stackoverflow.com/users/4581079/buvaneswari-sekar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1520473729, "creation_date": 1520454933, "question_id": 49160750, "link": "https://stackoverflow.com/questions/49160750/how-to-select-dropdown-option1-and-do-search-untill-the-last-optionn-once-page", "title": "How to select dropdown option1 and do search untill the last optionn, once page is reloaded,next time loop fails,to find the dropdown option", "body": "<p>1)I wanted to select drop down option1 and do search(click),and come back to previous page select next option2 from drop down and do search(click), I wanted to do the same untill the last drop down list.</p>\n\n<p>2) I tried with for loop, its working for first option1, loop can select the option1 from drop down and do search(click), next time loop is not finding the drop down option.</p>\n\n<p>3)Can you please help to solve the problem?</p>\n\n<pre><code>driver.find_element_by_id(\"seller_inventory_add_product_onebyone_inputSearchProduct\").send_keys(\"Mobile\")\ndriver.find_element_by_id(\"inventory_obosearch_go_item_search\").click()#next button\nprint \"next button clicled\"\nselement = driver.find_element_by_id(\"seller_inventory_add_product_onebyone_selectProductGroupName\")\nall_optionss = selement.find_elements_by_tag_name(\"option\")\ntime.sleep(2)\ni=0\nfor j in all_optionss:\n        print \"test the loop\"  \n        selement = driver.find_element_by_id(\"seller_inventory_add_product_onebyone_selectProductGroupName\")\n        all_optionss = selement.find_elements_by_tag_name(\"option\")\n        time.sleep(3)\n        if (i &lt; 24):\n            print \"2nd time loop\"\n            time.sleep(2)\n            j.click()\n            print j.text\n            time.sleep(4)\n            print \"before passing value\"\n            var4 = driver.find_element_by_id(\"seller_inventory_add_product_onebyone_inputSearchProduct\")\n            print \"before sending value\"\n            time.sleep(4)\n            var4.clear()\n            time.sleep(4)\n            var4.send_keys(j.text) \n            time.sleep(4)   \n            print \"after sending values\"\n            driver.find_element_by_id(\"inventory_inputSearchProduct_go\").click()#next button\n            print \"next button clicled\"\n            time.sleep(4)  \n            selement = driver.find_element_by_id(\"seller_inventory_add_product_onebyone_selectProductGroupName\").click\n            print \"finding the options\"\n        else:\n\n            break\n</code></pre>\n"}, {"tags": ["python", "decorator"], "comments": [{"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1520455099, "post_id": 49160738, "comment_id": 85327108, "body": "Just move <code>if getattr(fn, &#39;in_txn&#39;, False):</code> inside the inner wrapper..."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1520455131, "post_id": 49160738, "comment_id": 85327121, "body": "The obvious answer, don&#39;t decorate <code>f1</code> or <code>f2</code>, also has the benefit of making it explicit and obvious when a transaction is in progress."}], "answers": [{"tags": [], "owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "is_accepted": true, "score": 2, "last_activity_date": 1520455119, "creation_date": 1520455119, "answer_id": 49160796, "question_id": 49160738, "link": "https://stackoverflow.com/questions/49160738/avoiding-double-wrapping-in-a-decorator/49160796#49160796", "title": "Avoiding double wrapping in a decorator", "body": "<p>There's no need to handle this in the decorator. It's much simpler to separate out the wrapped and unwrapped versions of <code>fn2</code>, e.g.:</p>\n\n<pre><code>def _fn2():\n    do_something_else()\n\n@transaction(True)\ndef fn1(x=False):\n    if x:\n        return _fn2()\n    do_something()\n\nfn2 = transaction(True)(_fn2)\n</code></pre>\n\n<p>The decorator syntax is just syntactic sugar, so the result will be exactly the same.</p>\n"}, {"comments": [{"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1520455898, "post_id": 49160839, "comment_id": 85327508, "body": "This seems like a much more intuitive solution. Would you consider adding the explanation in your comment into the answer? (+1 regardless)"}, {"owner": {"reputation": 588, "user_id": 3758232, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4da26c459717c9a6092828637b887b42?s=128&d=identicon&r=PG&f=1", "display_name": "user3758232", "link": "https://stackoverflow.com/users/3758232/user3758232"}, "edited": false, "score": 0, "creation_date": 1520474808, "post_id": 49160839, "comment_id": 85334030, "body": "That is definitely a good solution but won&#39;t quite work for me because I want to avoid the method implementer to add the wrapper themselves."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1520519768, "post_id": 49160839, "comment_id": 85356311, "body": "Code is read far more than it is written; why do you think saving 3 seconds of typing is better than code that is easier to understand?"}, {"owner": {"reputation": 588, "user_id": 3758232, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4da26c459717c9a6092828637b887b42?s=128&d=identicon&r=PG&f=1", "display_name": "user3758232", "link": "https://stackoverflow.com/users/3758232/user3758232"}, "edited": false, "score": 0, "creation_date": 1521063807, "post_id": 49160839, "comment_id": 85579295, "body": "It&#39;s more about clarity than typing. If I am designing an interface I want to provide all the minimal setup necessary to make it work. If someone tries to implement a method that is required to be wrapped, without wrapping it, their code will break. Why would they have to worry about that?"}], "tags": [], "owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": false, "score": 4, "last_activity_date": 1520456138, "last_edit_date": 1520456138, "creation_date": 1520455356, "answer_id": 49160839, "question_id": 49160738, "link": "https://stackoverflow.com/questions/49160738/avoiding-double-wrapping-in-a-decorator/49160839#49160839", "title": "Avoiding double wrapping in a decorator", "body": "<p>Rather than a decorator, I'd just make another context manager to use explicitly.</p>\n\n<pre><code>@contextlib.contextmanager\ndef MyTxnManager(write):\n    env.timestamp = arrow.utcnow()\n    with TxnManager(write=write) as txn:\n        yield txn\n    delattr(env, 'timestamp')\n\nwith MyTxnManager(True) as txn:\n    fn1()\n</code></pre>\n\n<p>Here, instead of hiding the transaction inside <code>fn1</code> and <code>fn2</code>, we wrap just the timestamp management inside a new transaction manager. This way, calls to <code>fn1</code> and <code>fn2</code> occur in a transaction only if we explicitly cause them to do so.</p>\n"}, {"tags": [], "owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "is_accepted": false, "score": 0, "last_activity_date": 1520455783, "last_edit_date": 1520455783, "creation_date": 1520455383, "answer_id": 49160844, "question_id": 49160738, "link": "https://stackoverflow.com/questions/49160738/avoiding-double-wrapping-in-a-decorator/49160844#49160844", "title": "Avoiding double wrapping in a decorator", "body": "<p>You can always just check if the environment has a timestamp already and not create it in that case. It is using the already-existing attribute as a flag instead of making a new one:</p>\n\n<pre>\ndef transaction(write=False):\n    def _transaction_deco(fn):\n        @wraps(fn)\n        def _wrapper(*args, **kwargs):\n            if hasattr(env, 'timestamp'):\n                ret = fn(*args, **kwargs)\n            else:\n                env.timestamp = arrow.utcnow()\n                with TxnManager(write=write) as txn:\n                    ret = fn(*args, **kwargs)\n                delattr(env, 'timestamp')\n            return ret\n        return _wrapper\n    return _transaction_deco\n</pre>\n\n<p>This will let you nest an arbitrary number of transacted calls, and only use the timestamp and context manager of the outermost one.</p>\n"}], "owner": {"reputation": 588, "user_id": 3758232, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4da26c459717c9a6092828637b887b42?s=128&d=identicon&r=PG&f=1", "display_name": "user3758232", "link": "https://stackoverflow.com/users/3758232/user3758232"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 253, "favorite_count": 0, "accepted_answer_id": 49160796, "answer_count": 3, "score": 1, "last_activity_date": 1520474501, "creation_date": 1520454887, "last_edit_date": 1520474501, "question_id": 49160738, "link": "https://stackoverflow.com/questions/49160738/avoiding-double-wrapping-in-a-decorator", "title": "Avoiding double wrapping in a decorator", "body": "<p>I have a Python 3 script similar to the following:</p>\n\n<pre><code>def transaction(write=False):\n    def _transaction_deco(fn):\n        @wraps(fn)\n        def _wrapper(*args, **kwargs):\n            env.timestamp = arrow.utcnow()\n            with TxnManager(write=write) as txn:\n                ret = fn(*args, **kwargs)\n            delattr(env, 'timestamp')\n            return ret\n        return _wrapper\n    return _transaction_deco\n\n@transaction(True)\ndef fn1(x=False):\n    if x:\n        return fn2()\n    do_something()\n\n@transaction(True)\ndef fn2():\n    do_something_else()\n</code></pre>\n\n<p><code>fn1</code> and <code>fn2</code> can be called independently, and both are wrapped in the <code>transaction</code> decorator. </p>\n\n<p>Also, <code>fn1</code> can call <code>fn2</code> under certain circumstances. This is where I have a problem, because the decorator code is called twice, transactions are nested, and the timestamp is set twice and deleted twice (actually, the second time <code>delattr(env, 'timestamp')</code> is called, an exception is raised because <code>timestamp</code> is no longer there). </p>\n\n<p>I want whatever is decorated with <code>transaction</code> to only be decorated if not already so. </p>\n\n<p>I tried to modify my code based on hints from a <a href=\"https://stackoverflow.com/a/1547261/3758232\">separate Q&amp;A</a>:</p>\n\n<pre><code>def transaction(write=False):\n    def _transaction_deco(fn):\n        # Avoid double wrap.\n        if getattr(fn, 'in_txn', False):\n            return fn(*args, **kwargs)\n\n        @wraps(fn)\n        def _wrapper(*args, **kwargs):\n            # Mark transaction begin timestamp.\n            env.timestamp = arrow.utcnow()\n            with TxnManager(write=write) as txn:\n                ret = fn(*args, **kwargs)\n            delattr(env, 'timestamp')\n            return ret\n        _wrapper.in_txn = True\n        return _wrapper\n\n    return _transaction_deco\n</code></pre>\n\n<p>I.e. if the <code>_in_txn</code> attribute is set for the function, return the bare function because we are already in a transaction.</p>\n\n<p>However, if I run <code>fn1(True)</code> with a debugger, I see that the check for <code>in_txn</code> is never true because the <code>_wrapper</code> variable is set to <code>f1</code> for the outer call, and to <code>f2</code> for the inner call, so the functions are being both decorated separately. </p>\n\n<p>I could set the timestamp variables as properties of the context manager, but I still end up with two bested context managers, and if both trnsactions are R/W, Bad Things will happen. </p>\n\n<p>Can someone suggest a better solution? </p>\n\n<p><strong>Edit:</strong> Based on the replied received, I believe I omitted a key element: <code>fn1</code> and <code>fn2</code> are API metods and must always run within a transaction. The reason for using a decorator is to prevent the API implementer from having to make a decision about the transaction, or having to wrap the methods manually in a context manager or a decorator. However I would be in favor of a non-decorator approach as long as it keeps the implementation of <code>fn1</code> and <code>fn2</code> plain. </p>\n"}, {"tags": ["python", "arrays", "list"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1520455089, "post_id": 49160714, "comment_id": 85327101, "body": "you&#39;re not breaking in the second if. Is that deliberate?"}, {"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 1, "creation_date": 1520455118, "post_id": 49160714, "comment_id": 85327116, "body": "Can you explain the logic behind what this is trying to do?"}, {"owner": {"reputation": 1, "user_id": 9452946, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pT2A6.jpg?s=128&g=1", "display_name": "Niels Lach", "link": "https://stackoverflow.com/users/9452946/niels-lach"}, "edited": false, "score": 0, "creation_date": 1520457385, "post_id": 49160714, "comment_id": 85328268, "body": "I go through what&#39;s already in the list (supposedly in order) from the end of the list and compare the word with the words from the list. If the first letter of the new word comes before the first letter of the word I&#39;m comparing with I move on to the next word in the list. If not then it has it&#39;s location in the list and I break the loop. So not breaking the loop in the second if is intentional."}], "owner": {"reputation": 1, "user_id": 9452946, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pT2A6.jpg?s=128&g=1", "display_name": "Niels Lach", "link": "https://stackoverflow.com/users/9452946/niels-lach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1520454757, "creation_date": 1520454757, "question_id": 49160714, "link": "https://stackoverflow.com/questions/49160714/sorting-lists-in-python-without-sorted-funtion", "title": "Sorting lists in python without sorted() funtion", "body": "<p>I'm trying to make a program which adds the player's input to a list that's sorted alphabetically. When I try the program I've come up with it just arranges the words haphazardly, and I don't know what\u00e4s wrong. What am I missing? I am fully aware there's a function which sorts for you, I'm simply doing this for practice.</p>\n\n<pre><code>alphabet = 'abcdefghijklmnopqrstuvwxyz'\narray = []\nwhile True:\n    pl_inp = input('Add something to the list:\\n')\n    location = 0\n    list_has_content = False\n    for x in reversed(array):\n        indx = 0\n        if alphabet.find(pl_inp[indx]) == alphabet.find(x[indx]):\n            indx += 1\n        elif alphabet.find(pl_inp[indx]) &gt; alphabet.find(x[indx]):\n            list_has_content = True\n            location = array.index(x)\n        elif alphabet.find(pl_inp[indx]) &lt; alphabet.find(x[indx]):\n           location = array.index(x) + 1\n           break\n    if location == 0 and list_has_content == True:\n        array.insert(location, pl_inp)\n    elif location &gt; 0:\n        array.insert(location, pl_inp)\n    else:\n        array.append(pl_inp)\n    print(array)\n</code></pre>\n"}, {"tags": ["python", "decimal", "floating-accuracy"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1520454812, "post_id": 49160644, "comment_id": 85326964, "body": "What is it that you are actually trying to accomplish?"}], "answers": [{"tags": [], "owner": {"reputation": 225, "user_id": 1507041, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2c8f40af8dfa0fc2e02cf92976cecd09?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/1507041/matt"}, "is_accepted": false, "score": 2, "last_activity_date": 1520454994, "creation_date": 1520454994, "answer_id": 49160762, "question_id": 49160644, "link": "https://stackoverflow.com/questions/49160644/turning-decimal-type-numbers-into-string-type-exactly/49160762#49160762", "title": "Turning Decimal type numbers into string type exactly", "body": "<p>Use format</p>\n\n<pre><code>print('{0:f}'.format(number))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "is_accepted": true, "score": 2, "last_activity_date": 1520455395, "creation_date": 1520455395, "answer_id": 49160846, "question_id": 49160644, "link": "https://stackoverflow.com/questions/49160644/turning-decimal-type-numbers-into-string-type-exactly/49160846#49160846", "title": "Turning Decimal type numbers into string type exactly", "body": "<p>If you simply want the number of decimal places in the number (ignoring trailing zeros) just use <code>decimal.Decimal.as_tuple</code>, so:</p>\n\n<pre><code>In [48]: number = decimal.Decimal('0.00000001')\n    ...:\n\nIn [49]: number.as_tuple()\nOut[49]: DecimalTuple(sign=0, digits=(1,), exponent=-8)\n\nIn [50]: abs(number.as_tuple().exponent)\nOut[50]: 8\n</code></pre>\n\n<p>Note, to be safe, you probably need to <code>.normalize</code>:</p>\n\n<pre><code>In [57]: number = decimal.Decimal('3.0000')\n\nIn [58]: number.as_tuple()\nOut[58]: DecimalTuple(sign=0, digits=(3, 0, 0, 0, 0), exponent=-4)\n\nIn [59]: number.normalize().as_tuple().exponent\nOut[59]: 0\n</code></pre>\n\n<p>So...</p>\n\n<pre><code>In [65]: new_number = number.log10()\n\nIn [66]: new_number\nOut[66]: Decimal('0.4771212547196624372950279033')\n\nIn [67]: abs(new_number.normalize().as_tuple().exponent)\nOut[67]: 28\n\nIn [68]: len('4771212547196624372950279033')\nOut[68]: 28\n</code></pre>\n"}], "owner": {"reputation": 423, "user_id": 9442957, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1614474025305055/picture?type=large", "display_name": "Zak Stucke", "link": "https://stackoverflow.com/users/9442957/zak-stucke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 49160846, "answer_count": 2, "score": 0, "last_activity_date": 1520455417, "creation_date": 1520454432, "last_edit_date": 1520454619, "question_id": 49160644, "link": "https://stackoverflow.com/questions/49160644/turning-decimal-type-numbers-into-string-type-exactly", "title": "Turning Decimal type numbers into string type exactly", "body": "<p>How do I turn a decimal from the decimal module into a string exactly so I can loop through in a list? Or is there another method that would work better when trying to work out the number of decimal places something is accurate to (ignoring trailing zeros at the end). </p>\n\n<pre><code>import decimal\nnumber = decimal.Decimal('0.00000001')\n\nprint(str(number))\n&gt;&gt;'1E-8'\n</code></pre>\n\n<p>instead I want: </p>\n\n<pre><code>print(str(number))\n&gt;&gt; '0.00000001'\n</code></pre>\n\n<p>edit: I don't need .format to print it I need to loop through each digit in a for loop. Thanks</p>\n"}, {"tags": ["python", "pandas", "rolling-computation", "rolling-sum"], "answers": [{"tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": false, "score": 0, "last_activity_date": 1520455440, "last_edit_date": 1520455440, "creation_date": 1520455122, "answer_id": 49160797, "question_id": 49160627, "link": "https://stackoverflow.com/questions/49160627/python-pandas-rolling-sum-with-time-varying-windows/49160797#49160797", "title": "python/pandas rolling sum with time-varying windows", "body": "<p>I can not grantee the speed , but it will achieve what you need </p>\n\n<pre><code>df['New']=np.clip(df.index-df.windows+1,a_min=0,a_max=None)\ndf\nOut[626]: \n   val  windows  New\n0    1        2    0\n1    2        2    0\n2    3        1    2\n3    4        1    3\n4    5        3    2\n\ndf.apply(lambda x : df.iloc[x['New']:x.name+1,0].sum(),1)\nOut[630]: \n0     1\n1     3\n2     3\n3     4\n4    12\ndtype: int64\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7823, "user_id": 8146556, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/1503034639720733/picture?type=large", "display_name": "rahlf23", "link": "https://stackoverflow.com/users/8146556/rahlf23"}, "is_accepted": false, "score": 0, "last_activity_date": 1520455794, "creation_date": 1520455794, "answer_id": 49160957, "question_id": 49160627, "link": "https://stackoverflow.com/questions/49160627/python-pandas-rolling-sum-with-time-varying-windows/49160957#49160957", "title": "python/pandas rolling sum with time-varying windows", "body": "<p>This might be what you are after:</p>\n\n<pre><code>arr = [1,2,3]\n\nwindows = [2,2,1]\n\nout = [0,0,0]\n\nfor t, i in enumerate(windows):\n    newarr = arr[:t+1]\n    out[t] = sum(newarr[:-(i+1):-1])\n\n    print('t = ' + str(t+1))\n    print('arr = ' + str(newarr))\n    print('out[' + str(t) + '] = ' + str(out[t]))\n    print('\\n')\n</code></pre>\n\n<p>Gives:</p>\n\n<pre><code>t = 1\narr = [1]\nout[0] = 1\n\n\nt = 2\narr = [1, 2]\nout[1] = 3\n\n\nt = 3\narr = [1, 2, 3]\nout[2] = 3\n</code></pre>\n"}], "owner": {"reputation": 6995, "user_id": 851530, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/e15f09c206d727aae5ce8a3eec02f898?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/851530/michael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 90, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1550444993, "creation_date": 1520454382, "last_edit_date": 1550444993, "question_id": 49160627, "link": "https://stackoverflow.com/questions/49160627/python-pandas-rolling-sum-with-time-varying-windows", "title": "python/pandas rolling sum with time-varying windows", "body": "<p>I have an array</p>\n\n<pre><code>arr = [1,2,3, ..., N]\n</code></pre>\n\n<p>and a list of windows (of length N)</p>\n\n<pre><code>windows = [2,2,1, ...]\n</code></pre>\n\n<p>Is it possible to do a rolling sum computation on <code>arr</code> with the time varying windows stored in <code>windows</code>?</p>\n\n<p>For example at t=3, you have <code>arr=[1,2,3]</code> and <code>window=1</code> so this would indicate returning a 1 day rolling sum such that <code>out[2] = 3</code> </p>\n\n<p>At <code>t=2</code>, you have <code>arr = [1,2]</code> and window=2 so this would indicate a 2 day rolling sum such that <code>out[1]=3</code></p>\n"}]